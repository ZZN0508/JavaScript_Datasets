!function o(n,s,i){function a(r,e){if(!s[r]){if(!n[r]){var t="function"==typeof require&&require;if(!e&&t)return t(r,!0);if(l)return l(r,!0);t=new Error("Cannot find module '"+r+"'");throw t.code="MODULE_NOT_FOUND",t}t=s[r]={exports:{}};n[r][0].call(t.exports,function(e){var t=n[r][1][e];return a(t||e)},t,t.exports,o,n,s,i)}return s[r].exports}for(var l="function"==typeof require&&require,e=0;e<i.length;e++)a(i[e]);return a}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.URLTrackingParams={FROM_SEARCH_PARAM:"from_search=true",SEARCH_RANK_PARAM:"rank",SEARCH_IDENTIFIER_PARAM:"qid",BOOK_SHOW_INTERACTION_PARAM:"ac=1",DISCUSSIONS_PANE_DISCUSSION:"nav_bar_discussions_pane_discussion"}},{}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TRACKED_CLASSES={book_image:{dfp:!0,pmet:{click_type:"book_image"}},book_title:{dfp:!0,pmet:{click_type:"book_title"}},author_link:{dfp:!0,pmet:{click_type:"author_name"}},full_content_link:{dfp:!0,pmet:{click_type:"body_click"}},user_profile:{dfp:!0,pmet:{click_type:"social"}},want_to_read_button:{dfp:!0,pmet:{click_type:"wtr_button"}},sponsored_update_body_image:{dfp:!0,pmet:{click_type:"image"}},cta_link:{dfp:!0,pmet:{click_type:"cta_click"}},sponsored_label:{dfp:!0,pmet:{click_type:"sponsored"}},newsfeed_caret_not_interested:{dfp:!1,pmet:{click_type:"not_interested"}},newsfeed_caret_help:{dfp:!1,pmet:{click_type:"why"}},newsfeed_caret:{dfp:!1,pmet:{click_type:"caret"}},user_rating_star:{dfp:!0,pmet:{click_type:"rating"}},preview_book:{dfp:!0,pmet:{click_type:"preview"}},sponsored_update_body_title_link:{dfp:!0,pmet:{click_type:"sponsored_title"}}},r.TRACKED_CLASSES_AUDIBLE={AEP_Desktop_Browse_Image:{dfp:!0,pmet:{pmet_click_tid:"AEP_Desktop_Browse_Image"}},AEP_Desktop_Browse_Title:{dfp:!0,pmet:{pmet_click_tid:"AEP_Desktop_Browse_Title"}},AEP_Desktop_Browse_ExploreButton:{dfp:!0,pmet:{pmet_click_tid:"AEP_Desktop_Browse_ExploreButton"}},AEP_Desktop_Browse_SponsoredBy:{dfp:!0,pmet:{pmet_click_tid:"AEP_Desktop_Browse_SponsoredBy"}},AEP_Desktop_Video_ExternalLink:{pmet:{pmet_click_tid:"AEP_Desktop_Video_ExternalLink",no_redirect:!0}},AEP_Desktop_Sponsored_BookImage:{pmet:{pmet_click_tid:"AEP_Desktop_Sponsored_BookImage",no_redirect:!0}},AEP_Desktop_Sponsored_BookTitle:{pmet:{pmet_click_tid:"AEP_Desktop_Sponsored_BookTitle",no_redirect:!0}},AEP_Desktop_Sponsored_AuthorLink:{pmet:{pmet_click_tid:"AEP_Desktop_Sponsored_AuthorLink",no_redirect:!0}},AEP_Desktop_Sponsored_WantToRead:{pmet:{pmet_click_tid:"AEP_Desktop_Sponsored_WantToRead",no_redirect:!0}},AEP_Desktop_Sponsored_Stars:{pmet:{pmet_click_tid:"AEP_Desktop_Sponsored_Stars",no_redirect:!0}},AEP_Desktop_Sponsored_BookDescription:{pmet:{pmet_click_tid:"AEP_Desktop_Sponsored_BookDescription",no_redirect:!0}},AEP_Desktop_Sponsored_BookExternalLink:{pmet:{pmet_click_tid:"AEP_Desktop_Sponsored_BookExternalLink",no_redirect:!0}},AEP_Desktop_Carousel_BookImage:{pmet:{pmet_click_tid:"AEP_Desktop_Carousel_BookImage",no_redirect:!0}},AEP_Desktop_Carousel_WantToRead:{pmet:{pmet_click_tid:"AEP_Desktop_Carousel_WantToRead",no_redirect:!0}},AEP_Mobile_Carousel_BookImage:{pmet:{pmet_click_tid:"AEP_Mobile_Carousel_BookImage",no_redirect:!0}},AEP_Mobile_Carousel_WantToRead:{pmet:{pmet_click_tid:"AEP_Mobile_Carousel_WantToRead",no_redirect:!0}},AEP_Mobile_Carousel_BookTitle:{pmet:{pmet_click_tid:"AEP_Mobile_Carousel_BookTitle",no_redirect:!0}},AEP_Mobile_Carousel_Author:{pmet:{pmet_click_tid:"AEP_Mobile_Carousel_Author",no_redirect:!0}}},r.TRACKED_CLASSES_PREMIUM_CAMPAIGN={fcm_blog_title:{dfp:!0,pmet:{click_type:"fcm_blog_title"}},fcm_blog_image:{dfp:!0,pmet:{click_type:"fcm_blog_image"}},fcm_blog_button:{dfp:!0,pmet:{click_type:"fcm_blog_button"}},fcm_book_author:{dfp:!0,pmet:{click_type:"fcm_book_author"}},fcm_book_image:{dfp:!0,pmet:{click_type:"fcm_book_image"}},fcm_book_title:{dfp:!0,pmet:{click_type:"fcm_book_title"}},fcm_book_button:{dfp:!0,pmet:{click_type:"fcm_book_button"}},fcm_book_description:{dfp:!0,pmet:{click_type:"fcm_book_description"}},fcm_giveaway_author:{dfp:!0,pmet:{click_type:"fcm_giveaway_author"}},fcm_giveaway_button:{dfp:!0,pmet:{click_type:"fcm_giveaway_button"}},fcm_giveaway_image:{dfp:!0,pmet:{click_type:"fcm_giveaway_image"}},fcm_giveaway_title:{dfp:!0,pmet:{click_type:"fcm_giveaway_title"}},fcm_list_button:{dfp:!0,pmet:{click_type:"fcm_list_button"}},fcm_list_books:{dfp:!0,pmet:{click_type:"fcm_list_books"}},fcm_list_title:{dfp:!0,pmet:{click_type:"fcm_list_title"}},fcm_genre_title:{dfp:!0,pmet:{click_type:"fcm_genre_title"}},fcm_genre_image:{dfp:!0,pmet:{click_type:"fcm_genre_image"}},fcm_genre_button:{dfp:!0,pmet:{click_type:"fcm_genre_button"}}}},{}],3:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function l(e){return Array.isArray(e)?f.default.map(e,function(e){e=e.split("x");return[parseInt(e[0]),parseInt(e[1])]}):(e=e.split("x"),[parseInt(e[0]),parseInt(e[1])])}function n(e){return!!a.includes(e)}function s(e){var t,r=[];return Array.isArray(e)?(t=f.default.filter(e,n),r=f.default.map(t,function(e){e=e.split("x");return[parseInt(e[0]),parseInt(e[1])]})):n(e)&&(e=e.split("x"),r=[[parseInt(e[0]),parseInt(e[1])]]),r}function u(e,t){var r=arguments.length<=2||void 0===arguments[2]?[]:arguments[2],o=Array.isArray(e.dimensions)?e.dimensions:[e.dimensions],r=f.default.isEmpty(r)?f.default.map(o,function(e){e=e.split("x");return[parseInt(e[0]),parseInt(e[1])]}):r;return{slotID:t,slotName:e.path,sizes:r}}Object.defineProperty(r,"__esModule",{value:!0}),r.fetchApstagBids=r.requestCreative=void 0,r.requestCreativeForAdSlot=function(e){p.default.requestCreativeForSlot(e,arguments.length<=1||void 0===arguments[1]?{}:arguments[1])},r.defineSlot=function(o,n,s,i){window.googletag&&window.googletag.cmd&&window.googletag.cmd.push(function(){var t,e=window.googletag,r=l(s);i?(t=e.sizeMapping(),f.default.map(i,function(e){e=f.default.map(e,function(e){e=e.split("x");return e[0]?[parseInt(e[0]),parseInt(e[1])]:[]});t=t.addSize(e[0],e[1])}),e.defineSlot(n,r,o).defineSizeMapping(t.build()).setCollapseEmptyDiv(!0).addService(e.pubads())):e.defineSlot(n,r,o).addService(e.pubads())})},r.enableServices=function(){window.googletag&&window.googletag.cmd&&window.googletag.cmd.push(function(){window.googletag.enableServices()})},r.dimensionsExplode=l,r.validateA9Sizes=n,r.getA9Sizes=s,r.slotToHash=u,r.lazyLoadOnView=function(e){$j(document).on("lazybeforeunveil",e)},r.lazyLoadInit=function(){window.lazySizesConfig=window.lazySizesConfig||{},window.lazySizesConfig.expand=i},r.adSlotsDefined=function(){var e=window.googletag;return"function"==typeof e&&0<e.pubads().getSlots().length};function d(e){return window.googletag.pubads().refresh(e)}var c=e("../../react_stores/google_ads_store"),p=o(e("../../react_actions/google_ads_actions")),f=o(e("lodash")),i=200,a=["300x250","728x90","970x90","320x50"],h=(r.requestCreative=function(e){var t,r,i,a,o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=window.googletag;i=e,a=o,window.googletag.pubads().addEventListener("slotRenderEnded",function(e){var t,r,o,n,s;e.slot.getSlotId().getDomId()===i&&(e.isEmpty?(p.default.removeAdSlot(i),p.default.trackImpression({slotId:i,impressionCode:c.ImpressionCode.empty})):(t=$j(a.googleHookSelector).find('iframe[id^="google_ads_iframe_"]').contents().find(a.creativeSelector),r=e.slot.getAdUnitPath().split("/",3)[2],o=document.getElementById(""+i),a.isNativeAd?(n=t.data("id"),s=t.data("url"),n&&s?p.default.attachServedNativeAdAttributesAndTracking({slotId:i,campaignId:e.campaignId,lineItemId:e.lineItemId,creative:t,sponsoredId:n,impressionCode:c.ImpressionCode.success,dfpUrl:t.data("url"),adUnit:r,impressionElement:o}):p.default.trackImpression({slotId:i,impressionCode:c.ImpressionCode.empty})):p.default.attachServedBannerAdAttributesAndTracking({slotId:i,campaignId:e.campaignId,lineItemId:e.lineItemId,creative:t,impressionCode:c.ImpressionCode.success,delayImpressionTracking:a.delayImpressionTracking,impressionElement:o}),"160x600"===a.dimensions&&$j(".mainContentContainer").addClass("adSkinEnabled")))}),p.default.hasAttachedDfpCallbackForSlot(e),o.lazyLoadedNewsfeedAd?(r=o.lazyLoadedNewsfeedAd,(t=window.googletag.defineSlot("/4215/"+r.name,r.dimensions,e)).addService(window.googletag.pubads()),n.display(e),d([t])):o.isLazyLoaded?(r=l(o.dimensions),n.defineSlot(o.path,r,e).addService(n.pubads()),t=[{slotID:e,slotName:o.path,sizes:[r]}],r=s(o.dimensions),r=f.default.isEmpty(r)?[]:[u(o.path,e,r)],h(t,r)):n.cmd.push(function(){n.display(e)})},r.fetchApstagBids=function(t,r){var o=window.googletag;o&&o.cmd&&o.cmd.push(function(){var e=window.apstag;Array.isArray(t)&&t.length&&(f.default.isEmpty(r)?o.cmd.push(function(){return _(t)}):e.fetchBids({slots:r},function(){o.cmd.push(function(){return _(t)})}))})}),_=function(e){var t=window.apstag,r=e.map(function(e){return e.slotID}),o=window.googletag.pubads().getSlots().filter(function(e){return r.includes(e.getSlotElementId())});new Promise(function(e,t){return p.default.checkCallbacksAttached(e,t,r)}).then(function(){t.setDisplayBids(),d(o)}).catch(function(){return null})}},{"../../react_actions/google_ads_actions":35,"../../react_stores/google_ads_store":249,lodash:"lodash"}],4:[function(e,t,r){"use strict";function o(e){var t=(0,s.merge)({},t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],{type:t.method});t=(0,s.omit)(t,"method");var o=$j.Deferred(),t=$j.ajax(e,t);return t.done(o.resolve),t.fail(function(e,t,r){(0,n.redirectOnAuthFailure)(e)||o.reject(e,t,r)}),o.promise()}Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_ERROR_MESSAGE=void 0,r.httpRequest=o,r.httpPost=function(e){return o(e,(0,s.merge)({},arguments.length<=1||void 0===arguments[1]?{}:arguments[1],{method:"POST"}))},r.httpDelete=function(e){return o(e,(0,s.merge)({},arguments.length<=1||void 0===arguments[1]?{}:arguments[1],{method:"DELETE"}))},r.httpGet=function(e){return o(e,(0,s.merge)({},arguments.length<=1||void 0===arguments[1]?{}:arguments[1],{method:"GET"}))};var n=e("./default_auth_failure_handler"),s=e("lodash");r.DEFAULT_ERROR_MESSAGE="Something went wrong with your request. Please\n  try again later."},{"./default_auth_failure_handler":5,lodash:"lodash"}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.redirectOnAuthFailure=function(e){if(e&&403===e.status){e=e.responseJSON;if(e.redirect)return(0,o.setLocationUrl)(e.redirect),!0}return!1};var o=e("../env_utils")},{"../env_utils":13}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BOOK_ORIGINS={CURRENTLY_READING_WIDGET:"currently-reading-widget",UPDATE_READING_PROGRESS:"hp_status_editor"}},{}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o,n=e("append-query"),s=(o=n)&&o.__esModule?o:{default:o};r.default={openSocialShareWindow:function(e,t,r){e=(0,s.default)(e,t),t="left="+r.left+", top="+r.top,r="width="+r.width+", height="+r.height;window.open(e,"_blank",t+", "+r+", menubar=no, scrollbar=no")}}},{"append-query":"append-query"}],8:[function(e,t,r){"use strict";function o(e,t,r){switch(t){case u.CLICK:(0,i.httpPost)(t,{data:{feature:e+"_"+r}});break;case u.MOBILE_SETTINGS:(0,i.httpPost)(t,{data:{type:e,metric:r}})}}function n(e){o("Nav",u.CLICK,e)}Object.defineProperty(r,"__esModule",{value:!0}),r.TRACKING_URLS=void 0,r.trackClick=function(e,t){o("click",e,t)},r.trackView=function(e,t){o("view",e,t)},r.trackNavEngage=n,r.trackNavEngageClick=function(e,t){var r;e&&e.target&&("A"!==(r=e.target).tagName||e.defaultPrevented?n(t):(e.preventDefault(),n(t),l.default.setLocationUrl(r.href)))};var s,i=e("./ajax/ajax_helper"),a=e("../modules/env_utils"),l=(s=a)&&s.__esModule?s:{default:s},u=r.TRACKING_URLS={CLICK:"/track/track_click",MOBILE_SETTINGS:"/track/track_mobile_settings"}},{"../modules/env_utils":13,"./ajax/ajax_helper":4}],9:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.VARIANTS={DEFAULT:"default",DARK_BG:"darkBg"}},{}],10:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.handleDataTracking=function(e){var t=e.target,r=e.currentTarget,o=!1;if(t===r)o=i(t);else for(;r.contains(t)&&!(o=i(t));)t=t.parentNode;o&&s.default.trackClickEvent(e,t)};var o,n=e("../../react_actions/data_tracking/data_tracking_actions"),s=(o=n)&&o.__esModule?o:{default:o},i=function(e){return"true"===e.getAttribute("data-tracking-enabletracking")}},{"../../react_actions/data_tracking/data_tracking_actions":30}],11:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.fromNow=function(e){var t=arguments.length<=1||void 0===arguments[1]?(0,i.default)():arguments[1],r=arguments.length<=2||void 0===arguments[2]?null:arguments[2];t.locale("en-abbreviated"),e=null!==r?r:(0,i.default)(e).locale("en-abbreviated");var o=t.diff(e,"days"),n=t.diff(e,"months"),r=t.diff(e,"days",!0);return s.default.inRange(n,1,13)?t.subtract(o,"days").format("DD MMM"):12<n?t.subtract(o,"days").format("DD MMM YY"):s.default.inRange(o,7,28)?Math.ceil(o/7)+"w":6.5<=r&&r<=28?Math.round(r/6.5)+"w":e.fromNow()},r.getFormattedDate=function(e){var t=arguments.length<=1||void 0===arguments[1]?"YYYY-MM-DD":arguments[1];return e?(0,i.default)(e).format(t):""};var s=o(e("lodash")),i=o(e("moment"));i.default.relativeTimeThreshold("s",60),i.default.relativeTimeThreshold("m",60),i.default.relativeTimeThreshold("h",24),i.default.relativeTimeThreshold("d",25),i.default.relativeTimeThreshold("M",10),i.default.locale("en-abbreviated",{relativeTime:{future:"in %s",past:"%s",s:"Just now",m:"1m",mm:"%dm",h:"1h",hh:"%dh",d:"1d",dd:"%dd",M:"a month",MM:"%d months",y:"a year",yy:"%d years"}}),i.default.locale("en")},{lodash:"lodash",moment:"moment"}],12:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.checkIconClassnames=r.getExclusiveShelfType=r.SHELF_TYPES=r.DEFAULT_SHELVES=void 0;var o,n=e("classnames"),s=(o=n)&&o.__esModule?o:{default:o},i=r.DEFAULT_SHELVES={READ:{name:"read",displayName:"Read"},CURRENTLY_READING:{name:"currently-reading",displayName:"Currently Reading"},WANT_TO_READ:{name:"to-read",displayName:"Want to Read"}},a=r.SHELF_TYPES={DEFAULT:"defaultShelves",CUSTOM_EXCLUSIVE:"customExclusiveShelves",NONEXCLUSIVE:"nonExclusiveShelves"},l=r.getExclusiveShelfType=function(e){return e===i.READ.name||e===i.CURRENTLY_READING.name||e===i.WANT_TO_READ.name?a.DEFAULT:a.CUSTOM_EXCLUSIVE};r.checkIconClassnames=function(e){return(0,s.default)({"wantToReadButton__checkIcon--toRead":e===i.WANT_TO_READ.name,"wantToReadButton__checkIcon--currentlyReading":e===i.CURRENTLY_READING.name,"wantToReadButton__checkIcon--read":e===i.READ.name,"wantToReadButton__checkIcon--other":e&&l(e)===a.CUSTOM_EXCLUSIVE})}},{classnames:"classnames"}],13:[function(e,t,r){"use strict";t.exports={PRODUCTION:"production",DEVELOPMENT:"development",TEST:"test",hasDom:function(){return!!window.document},domUnavailable:function(){return!this.hasDom()},isDevelopment:function(){return"production"===this.DEVELOPMENT},getCurrentPath:function(){return window&&window.location?window.encodeURIComponent(window.location.pathname+window.location.search):void 0},setLocationUrl:function(e){window&&(window.location.href=e)},getLocationUrl:function(){return window&&window.location?window.location.href:void 0},getLocationPathname:function(){return window&&window.location?window.location.pathname:void 0}}},{}],14:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=r.clearFlashMessage=function(){$j("#flashMessages").trigger("clearFlashMessage")};r.flashSuccessMessage=function(e){o(),$j("#flashMessages").trigger("addFlashMessage",[e,"success"])},r.flashErrorMessage=function(e){$j("#flashMessages").trigger("addFlashMessage",[e,"error"])}},{}],15:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=e("lodash");r.default={notifyException:function(e,t){e?window.console&&(0,o.isFunction)(window.console.error)&&window.console.error(t,e.stack):window.console&&(0,o.isFunction)(window.console.warn)&&window.console.warn("Attempted to notifyException without providing error,\n                           message: "+t)},notifyUser:function(e){window&&(0,o.isFunction)(window.alert)&&window.alert(e)}}},{lodash:"lodash"}],16:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o={enter:13,escape:27,space:32,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40};r.default={isEnter:function(e){return e===o.enter},isEscape:function(e){return e===o.escape},isSpace:function(e){return e===o.space},isArrowLeft:function(e){return e===o.leftArrow},isArrowUp:function(e){return e===o.upArrow},isArrowRight:function(e){return e===o.rightArrow},isArrowDown:function(e){return e===o.downArrow},isDropdownOpenerKey:function(e){return this.isEnter(e)||this.isSpace(e)||this.isArrowDown(e)},isDefaultOpenerKey:function(e){return this.isEnter(e)||this.isSpace(e)},isDefaultCloserKey:function(e){return this.isEscape(e)},KEYCODES:o}},{}],17:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});function o(e){return!(arguments.length<=1||void 0===arguments[1])&&arguments[1]?e+"Dropdown":e}r.getUnfollowModalId=function(e){return o("confirmUnfollow"+e,!(arguments.length<=1||void 0===arguments[1])&&arguments[1])},r.getCancelFriendRequestModalId=function(e){return o("confirmCancelFriendRequest"+e,!(arguments.length<=1||void 0===arguments[1])&&arguments[1])},r.getUnfriendModalId=function(e){return o("confirmUnfriend"+e,!(arguments.length<=1||void 0===arguments[1])&&arguments[1])},r.getBlockUserModalId=function(e){return o("confirmBlockUser"+e,!(arguments.length<=1||void 0===arguments[1])&&arguments[1])},r.getUnblockUserModalId=function(e){return o("confirmUnblockUser"+e,!(arguments.length<=1||void 0===arguments[1])&&arguments[1])}},{}],18:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BOOK_LOAD_ERROR_MSG="Sorry, weâ€™re having trouble loading your books right now. Please try again later."},{}],19:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ICON_SIZES={SMALL:"small",MEDIUM:"medium",LARGE:"large"},r.ICON_SHAPES={CIRCLE:"circular",ROUND_SQUARE:"roundSquare",RECTANGULAR:"rectangular"}},{}],20:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getImages=function(){return window.GrImageRegistry||{}}},{}],21:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.acknowledgeEvent=function(e){e&&e.nativeEvent&&e.nativeEvent.acknowledge&&e.nativeEvent.acknowledge(e.currentTarget)}},{}],22:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.astralLength=function(e){return e.replace(/(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,"_").length},r.countWords=function(e){return e?e.split(" ").length:0}},{}],23:[function(e,t,r){"use strict";var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var o,s=e("lodash"),i=(o=s)&&o.__esModule?o:{default:o};r.default={toSentence:function(e){var t=arguments.length<=1||void 0===arguments[1]?"and":arguments[1],r=[],o=e.length;switch(o){case 0:return"";case 1:r.push(e[0]);break;case 2:r.push(e[0]),r.push(" "+t+" "),r.push(e[1]);break;default:i.default.each(e.slice(0,-1),function(e){r.push(e),r.push(", ")}),r.push(t+" "),r.push(e[o-1])}return n("span",{},void 0,r)},sentenceJoin:function(e){var t=arguments.length<=1||void 0===arguments[1]?", ":arguments[1],r=[];return i.default.each(e.slice(0,-1),function(e){r.push(e),r.push(t)}),r.push(e[e.length-1]),n("span",{},void 0,r)}}},{lodash:"lodash"}],24:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.FRIEND_STATUS={SELF:"self",FRIEND:"friend",REQUEST_PENDING_FROM:"request_pending_from",REQUEST_PENDING_TO:"request_pending_to",NONE:"none"}},{}],25:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o,n=e("reflux"),e=(o=n)&&o.__esModule?o:{default:o};r.default=e.default.createActions(["follow","unFollow"])},{reflux:"reflux"}],26:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){return s.default.createActions(["selectSpecificResult","selectNextResult","selectPreviousResult","search","searchResultsFound","setShowResultsContainer"])};var o,n=e("reflux"),s=(o=n)&&o.__esModule?o:{default:o}},{reflux:"reflux"}],27:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getACopyClickedHandler=r.getACopyClosed=r.getACopyLoadedSuccess=r.GET_A_COPY_ACTIONS=void 0;var o=e("../../modules/ajax/ajax_helper"),n=r.GET_A_COPY_ACTIONS={LOADED_SUCCESS:"GET_A_COPY_LOADED_SUCCESS",INTERSTITIAL_CLOSED:"GET_A_COPY_INTERSTITIAL_CLOSED"},s=r.getACopyLoadedSuccess=function(e){return{type:n.LOADED_SUCCESS,data:e}};r.getACopyClosed=function(){return{type:n.INTERSTITIAL_CLOSED}},r.getACopyClickedHandler=function(e){return function(t){(0,o.httpGet)(e).done(function(e){t(s(e))})}}},{"../../modules/ajax/ajax_helper":4}],28:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o,n=e("reflux"),e=(o=n)&&o.__esModule?o:{default:o};r.default=e.default.createActions({addNewComment:{},commentEntered:{sync:!0},deleteComment:{},showCommentsForPage:{},showSeeMoreLoadingSpinner:{},textareaFocused:{},textareaFocusRequested:{},textareaUnfocused:{}})},{reflux:"reflux"}],29:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o,n=e("reflux"),e=(o=n)&&o.__esModule?o:{default:o};r.default=e.default.createActions(["updatePreference"])},{reflux:"reflux"}],30:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o,n=e("reflux"),e=(o=n)&&o.__esModule?o:{default:o};r.default=e.default.createActions(["trackClickEvent"])},{reflux:"reflux"}],31:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){return s.default.createActions(["selectSpecificResult","selectNextResult","selectPreviousResult","search","searchResultsFound","setShowResultsContainer"])};var o,n=e("reflux"),s=(o=n)&&o.__esModule?o:{default:o}},{reflux:"reflux"}],32:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o,n=e("reflux"),e=(o=n)&&o.__esModule?o:{default:o};r.default=e.default.createActions(["changeFavoriteGenres"])},{reflux:"reflux"}],33:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o,n=e("reflux"),e=(o=n)&&o.__esModule?o:{default:o};r.default=e.default.createActions(["selectFavoriteGenre","deselectFavoriteGenre","submitSelectedGenres"])},{reflux:"reflux"}],34:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o,n=e("reflux"),e=(o=n)&&o.__esModule?o:{default:o};r.default=e.default.createActions(["displayError","requestFeaturedBooks","trackMenuImpression"])},{reflux:"reflux"}],35:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o,n=e("reflux"),e=(o=n)&&o.__esModule?o:{default:o};r.default=e.default.createActions(["requestCreativeForSlot","displayCreativeForSlot","removeAdSlot","trackImpression","attachServedNativeAdAttributesAndTracking","attachServedBannerAdAttributesAndTracking","hasAttachedDfpCallbackForSlot","checkCallbacksAttached"])},{reflux:"reflux"}],36:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.TOGGLE_SEARCH="TOGGLE_SEARCH";r.toggleSearch=function(e){return{type:"TOGGLE_SEARCH",searchIsActive:e}}},{}],37:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o,n=e("reflux"),e=(o=n)&&o.__esModule?o:{default:o};r.default=e.default.createActions(["like","unLike"])},{reflux:"reflux"}],38:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o,n=e("reflux"),e=(o=n)&&o.__esModule?o:{default:o};r.default=e.default.createActions(["openModal","closeModal"])},{reflux:"reflux"}],39:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o,n=e("reflux"),e=(o=n)&&o.__esModule?o:{default:o};r.default=e.default.createActions({loadMoreUpdates:{},newsfeedItemsLoaded:{sync:!0},updateNativeAdSlot:{},userNotInterested:{},undoUserNotInterested:{},hideStory:{},previewBook:{},setUpdatesFeedPreferences:{}})},{reflux:"reflux"}],40:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o,n=e("reflux"),e=(o=n)&&o.__esModule?o:{default:o};r.default=e.default.createActions(["loadError","loadNotifications","requestNotifications"])},{reflux:"reflux"}],41:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o,n=e("reflux"),e=(o=n)&&o.__esModule?o:{default:o};r.default=e.default.createActions(["loadAnnotatedBooks"])},{reflux:"reflux"}],42:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o,n=e("reflux"),e=(o=n)&&o.__esModule?o:{default:o};r.default=e.default.createActions(["updateProgress","closeUpdateProgressForm","openUpdateProgressForm","refreshReadingSessions","shelveBookSuccess","loadAllReadingSessions"])},{reflux:"reflux"}],43:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o,n=e("reflux"),e=(o=n)&&o.__esModule?o:{default:o};r.default=e.default.createActions({updateSharingTextInputValue:{sync:!0},submitShare:{},openShareModal:{}})},{reflux:"reflux"}],44:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o,n=e("reflux"),e=(o=n)&&o.__esModule?o:{default:o};r.default=e.default.createActions({addShelvings:{},bookShelved:{},bookUnshelved:{},shelveBook:{},toggleNonExclusiveShelving:{},rateBook:{children:["newBook","failed"]},unshelveBook:{}})},{reflux:"reflux"}],45:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o,n=e("reflux"),e=(o=n)&&o.__esModule?o:{default:o};r.default=e.default.createActions(["deselectTab","selectTab"])},{reflux:"reflux"}],46:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o,n=e("reflux"),e=(o=n)&&o.__esModule?o:{default:o};r.default=e.default.createActions(["blockMember"])},{reflux:"reflux"}],47:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o,n=e("reflux"),e=(o=n)&&o.__esModule?o:{default:o};r.default=e.default.createActions(["follow","unFollow"])},{reflux:"reflux"}],48:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o,n=e("reflux"),e=(o=n)&&o.__esModule?o:{default:o};r.default=e.default.createActions(["userAgentGainsTouch","userAgentLosesTouch"])},{reflux:"reflux"}],49:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o,n=e("reflux"),e=(o=n)&&o.__esModule?o:{default:o};r.default=e.default.createActions(["userNotInterested","undoUserNotInterested","isFlashMessageForBook","closeFlashMessage","addBookIDToState"])},{reflux:"reflux"}],50:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o,n=e("reflux"),e=(o=n)&&o.__esModule?o:{default:o};r.default=e.default.createActions(["unfriend","acceptFriendRequest","cancelFriendRequest","follow","unfollow"])},{reflux:"reflux"}],51:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o,n=e("reflux"),e=(o=n)&&o.__esModule?o:{default:o};r.default=e.default.createActions(["addNonExclusiveShelf","removeNonExclusiveShelf"])},{reflux:"reflux"}],52:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o,n=e("reflux"),e=(o=n)&&o.__esModule?o:{default:o};r.default=e.default.createActions(["openAddShelfTextbox","closeAddShelfTextbox","updateShelfNameFilter","updateShelves"])},{reflux:"reflux"}],53:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}e("./_polyfills");var n=o(e("./_dom_ready_initializers")),e=o(e("./_public_actions"));window.ReactActions=e.default,n.default.initializeModernizrTouchCheck()},{"./_dom_ready_initializers":54,"./_polyfills":55,"./_public_actions":56}],54:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={initializeModernizrTouchCheck:function(){document.addEventListener("DOMContentLoaded",function(){Modernizr&&Modernizr.touchevents?window.ReactActions.UserAgentCapabilitiesActions.userAgentGainsTouch():window.ReactActions.UserAgentCapabilitiesActions.userAgentLosesTouch()})}}},{}],55:[function(e,t,r){"use strict";var o,n=e("object-assign"),s=(o=n)&&o.__esModule?o:{default:o};e("../react_isomorphic/shims/Array.prototype.find"),window.Object.assign=s.default},{"../react_isomorphic/shims/Array.prototype.find":230,"object-assign":"object-assign"}],56:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o,n=e("../react_actions/user_agent_capabilities_actions"),e=(o=n)&&o.__esModule?o:{default:o};r.default={UserAgentCapabilitiesActions:e.default}},{"../react_actions/user_agent_capabilities_actions":48}],57:[function(e,t,r){"use strict";e("./_common");var o=e("../react_isomorphic/global"),n=e("../react_isomorphic/site_header"),s=e("../react_isomorphic/reading_notes"),i=e("../react_isomorphic/friend_follow_module"),a=e("../react_isomorphic/news"),l=e("../react_isomorphic/experiments"),e=e("lodash");window.ReactComponents=(0,e.merge)({},o.GlobalComponents,n.HeaderComponents,l.ExperimentComponents,s.ReadingNotesComponents,i.FriendFollowModuleComponents,a.NewsComponents),window.ReactStores=(0,e.merge)({},o.GlobalStores,n.HeaderStores,l.ExperimentStores,s.ReadingNotesStores,i.FriendFollowModuleStores)},{"../react_isomorphic/experiments":223,"../react_isomorphic/friend_follow_module":226,"../react_isomorphic/global":227,"../react_isomorphic/news":228,"../react_isomorphic/reading_notes":229,"../react_isomorphic/site_header":231,"./_common":53,lodash:"lodash"}],58:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=o(e("react")),s=o(e("../gr_component_factory")),i=o(e("../../react_stores/google_ads_store")),a=o(e("reflux")),l=o(e("classnames")),u=e("../../modules/ads/google_ad_helper");r.default=s.default.createClass({displayName:"GoogleBannerAd",mixins:[a.default.connectFilter(i.default,"googleAdsStore",function(e){return e.ads[this.props.adId]})],propTypes:{adId:n.default.PropTypes.string.isRequired,className:n.default.PropTypes.string,delayImpressionTracking:n.default.PropTypes.bool},getDefaultProps:function(){return{delayImpressionTracking:!1}},getStoreState:function(){return this.state.googleAdsStore},componentDidMount:function(){var e,t=this.props.adId;this.getStoreState()&&(e={googleHookSelector:this.refs.googleHook,creativeSelector:this.getStoreState().creativeSelector,dimensions:this.getStoreState().dimensions,isNativeAd:this.getStoreState().isNativeAd,delayImpressionTracking:this.props.delayImpressionTracking,isLazyLoaded:this.getStoreState().isLazyLoaded,path:this.getStoreState().path},this.getStoreState().isLazyLoaded?(0,u.lazyLoadOnView)(function(e){e.target.id===this.adId&&(0,u.requestCreativeForAdSlot)(this.adId,this.params)}.bind({adId:t,params:e})):(0,u.requestCreativeForAdSlot)(this.props.adId,e))},getWidthFromDimensions:function(e){return parseInt(e.split("x")[0])},getBannerAdSizingStyle:function(e){var t,r=this;return{width:Array.isArray(e)?(t=Math).max.apply(t,function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(e.map(function(e){return r.getWidthFromDimensions(e)}))):this.getWidthFromDimensions(e),height:"auto"}},render:function(){if(this.getStoreState()){var e=(0,l.default)(this.props.className,"googleBannerAd",{lazyload:this.getStoreState().isLazyLoaded});return n.default.createElement("div",{className:e,id:this.props.adId,style:this.getBannerAdSizingStyle(this.getStoreState().dimensions),ref:"googleHook"})}return null}})},{"../../modules/ads/google_ad_helper":3,"../../react_stores/google_ads_store":249,"../gr_component_factory":108,classnames:"classnames",react:"react",reflux:"reflux"}],59:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("../../react_stores/google_ads_store")),i=o(e("../gr_component_factory")),a=o(e("reflux")),l=o(e("../featured_content_module")),d=e("../../modules/ads/google_ad_helper"),c=o(e("classnames"));r.default=i.default.createClass({displayName:"GoogleFeaturedContentModule",mixins:[a.default.connectFilter(s.default,"googleAdsStore",function(e){return e.nativeAds[this.props.adId]})],propTypes:{adId:React.PropTypes.string.isRequired,trackingOptions:React.PropTypes.shape({enableTracking:React.PropTypes.bool,adId:React.PropTypes.string}).isRequired,isMobile:React.PropTypes.bool,hasBottomBorder:React.PropTypes.bool,isInline:React.PropTypes.bool},defaultProps:{isMobile:!1,isInline:!1,hasBottomBorder:!1},getStoreState:function(){return this.state.googleAdsStore},componentDidMount:function(){var e;this.getStoreState()&&!this.getStoreState().creative&&(e={googleHookSelector:this.refs.googleHook,creativeSelector:this.getStoreState().creativeSelector,dimensions:this.getStoreState().dimensions,isNativeAd:this.getStoreState().isNativeAd,path:this.getStoreState().path},(0,d.requestCreativeForAdSlot)(this.props.adId,e))},renderCreative:function(){var e=this.getStoreState().creative;return n(l.default,{type:e.type,resource:e.resource,sponsorName:e.sponsorName,isSponsored:e.isSponsored,isMobile:this.props.isMobile,isInline:this.props.isInline,hasBottomBorder:this.props.hasBottomBorder})},render:function(){if(this.getStoreState()){var e=(0,c.default)("googleFeaturedContentModule",this.getStoreState().className),t=this.getStoreState().creative?this.renderCreative():null;return n("div",{},void 0,t,React.createElement("div",{className:e,id:this.props.adId,ref:"googleHook"}))}return null}})},{"../../modules/ads/google_ad_helper":3,"../../react_stores/google_ads_store":249,"../featured_content_module":104,"../gr_component_factory":108,classnames:"classnames",reflux:"reflux"}],60:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("../../react_stores/google_ads_store")),i=o(e("../gr_component_factory")),a=o(e("reflux")),l=o(e("../page_skin")),d=e("../../modules/ads/google_ad_helper");r.default=i.default.createClass({displayName:"GooglePageSkin",mixins:[a.default.connectFilter(s.default,"googleAdsStore",function(e){return e.nativeAds[this.props.adId]})],propTypes:{adId:React.PropTypes.string.isRequired,image:React.PropTypes.string,trackingOptions:React.PropTypes.shape({enableTracking:React.PropTypes.bool,adId:React.PropTypes.string}).isRequired},getStoreState:function(){return this.state.googleAdsStore},componentDidMount:function(){var e;this.getStoreState()&&!this.getStoreState().creative&&(e={googleHookSelector:this.refs.googleHook,creativeSelector:this.getStoreState().creativeSelector,dimensions:this.getStoreState().dimensions,isNativeAd:this.getStoreState().isNativeAd,path:this.getStoreState().path},(0,d.requestCreativeForAdSlot)(this.props.adId,e))},renderCreative:function(){return n(l.default,{imageUrl:this.getStoreState().creative.image_url,backgroundColor:this.getStoreState().creative.background_color})},render:function(){if(this.getStoreState()){var e=this.getStoreState().className,t=this.getStoreState().creative?this.renderCreative():null;return n("div",{className:"pageskinContainer"},void 0,t,React.createElement("div",{className:e,id:this.props.adId,ref:"googleHook"}))}return null}})},{"../../modules/ads/google_ad_helper":3,"../../react_stores/google_ads_store":249,"../gr_component_factory":108,"../page_skin":147,reflux:"reflux"}],61:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("../../../react_stores/google_ads_store")),i=o(e("../../gr_component_factory")),a=o(e("reflux")),l=o(e("./native_ad_body")),d=e("../../../modules/ads/google_ad_helper"),c=o(e("classnames"));r.default=i.default.createClass({displayName:"GoogleNativeAd",mixins:[a.default.connectFilter(s.default,"googleAdsStore",function(e){return e.nativeAds[this.props.adId]})],propTypes:{adId:React.PropTypes.string.isRequired,trackingOptions:React.PropTypes.shape({enableTracking:React.PropTypes.bool,adId:React.PropTypes.string}).isRequired,className:React.PropTypes.string,signedIn:React.PropTypes.bool,allowBehavioralTargeting:React.PropTypes.bool,isMobile:React.PropTypes.bool,isNewsfeed:React.PropTypes.bool},getDefaultProps:function(){return{isMobile:!1,isNewsfeed:!0,signedIn:!0}},getStoreState:function(){return this.state.googleAdsStore},componentDidMount:function(){var e;this.getStoreState()&&!this.getStoreState().creative&&(e={googleHookSelector:this.refs.googleHook,creativeSelector:this.getStoreState().creativeSelector,dimensions:this.getStoreState().dimensions,isNativeAd:this.getStoreState().isNativeAd,lazyLoadedNewsfeedAd:this.getStoreState().lazyLoadedNewsfeedAd,path:this.getStoreState().path,isLazyLoaded:this.getStoreState().isLazyLoaded},this.getStoreState().lazyLoadedNewsfeedAd||this.getStoreState().isLazyLoaded?(0,d.lazyLoadOnView)(function(e){e.target.id===this.adId&&(0,d.requestCreativeForAdSlot)(this.adId,this.params)}.bind({adId:this.props.adId,params:e})):(0,d.requestCreativeForAdSlot)(this.props.adId,e))},render:function(){if(this.getStoreState()){var e=(0,c.default)("googleNativeAd__googleHook",this.getStoreState().className,"lazyload"),t=(0,c.default)("googleNativeAd",this.props.className),r=this.getStoreState().creative?n(l.default,{creative:this.getStoreState().creative,adId:this.props.adId,deviceType:this.getStoreState().deviceType,signedIn:this.props.signedIn,allowBehavioralTargeting:this.props.allowBehavioralTargeting,isMobile:this.props.isMobile,isNewsfeed:this.props.isNewsfeed}):null;return n("div",{className:t},void 0,React.createElement("div",{className:e,id:this.props.adId,ref:"googleHook"},r))}return null}})},{"../../../modules/ads/google_ad_helper":3,"../../../react_stores/google_ads_store":249,"../../gr_component_factory":108,"./native_ad_body":63,classnames:"classnames",reflux:"reflux"}],62:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=o(e("react")),s=o(e("reflux")),i=o(e("../../gr_component_factory")),a=o(e("../../../react_stores/google_ads_store")),l=o(e("./google_native_ad"));r.default=i.default.createClass({displayName:"NativeAd",mixins:[s.default.connectFilter(a.default,"googleAdsStore",function(e){return e.nativeAds[this.props.adId]})],propTypes:{adId:n.default.PropTypes.string.isRequired,trackingOptions:n.default.PropTypes.shape({enableTracking:n.default.PropTypes.bool,adId:n.default.PropTypes.string}).isRequired,className:n.default.PropTypes.string,signedIn:n.default.PropTypes.bool,allowBehavioralTargeting:n.default.PropTypes.bool,isMobile:n.default.PropTypes.bool,isNewsfeed:n.default.PropTypes.bool},getAdsStoreState:function(){return this.state.googleAdsStore},getDefaultProps:function(){return{signedIn:!0,isMobile:!1,isNewsfeed:!0}},render:function(){return this.getAdsStoreState()?n.default.createElement(l.default,this.props):null}})},{"../../../react_stores/google_ads_store":249,"../../gr_component_factory":108,"./google_native_ad":61,react:"react",reflux:"reflux"}],63:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("reflux")),i=o(e("../../gr_component_factory")),a=o(e("../../../react_stores/user_not_interested_store")),l=o(e("../../../react_actions/user_not_interested_actions")),d=o(e("./native_book_ad")),c=o(e("./native_flex_ad")),p=o(e("./user_not_interested_message"));r.default=i.default.createClass({displayName:"NativeAdBody",mixins:[s.default.connect(a.default,"userNotInterestedStore")],propTypes:{adId:React.PropTypes.string,creative:React.PropTypes.object.isRequired,adDeviceType:React.PropTypes.string,signedIn:React.PropTypes.bool,allowBehavioralTargeting:React.PropTypes.bool,isMobile:React.PropTypes.bool,isNewsfeed:React.PropTypes.bool},getDefaultProps:function(){return{isNewsfeed:!0,isMobile:!1,signedIn:!0}},getUserNotInterestedStoreState:function(){return this.state.userNotInterestedStore},render:function(){if(this.props.creative&&this.props.creative.book){var e=this.props.creative.book.bookId;if(this.getUserNotInterestedStoreState()[e]){if(this.getUserNotInterestedStoreState()[e].isClosed)return null;if(this.getUserNotInterestedStoreState()[e].isFlashMessage)return n(p.default,{id:this.props.adId,isNewsfeed:this.props.isNewsfeed,className:this.props.className,creative:this.props.creative})}else l.default.addBookIDToState(e)}return this.props.creative&&this.props.creative.book?n(d.default,{isNewsfeed:this.props.isNewsfeed,isMobile:this.props.isMobile,creative:this.props.creative,adDeviceType:this.props.adDeviceType,signedIn:this.props.signedIn,allowBehavioralTargeting:this.props.allowBehavioralTargeting,id:this.props.adId}):n(c.default,{id:this.props.adId,creative:this.props.creative,signedIn:this.props.signedIn,allowBehavioralTargeting:this.props.allowBehavioralTargeting,isNewsfeed:this.props.isNewsfeed,isMobile:this.props.isMobile})}})},{"../../../react_actions/user_not_interested_actions":49,"../../../react_stores/user_not_interested_store":261,"../../gr_component_factory":108,"./native_book_ad":66,"./native_flex_ad":68,"./user_not_interested_message":70,reflux:"reflux"}],64:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}),s=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}Object.defineProperty(r,"__esModule",{value:!0}),r.NativeAdCaret=void 0;var a=e("react"),l=o(e("../../shared/gr_prop_types")),d=o(e("../../dropdown")),c=o(e("../../click_tracking_wrapper")),p=o(e("../../../react_actions/user_not_interested_actions")),f=e("../../../modules/ads/click_tracking_helper"),h=e("lodash"),s=r.NativeAdCaret=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(_,a.Component),s(_,[{key:"renderNotInterested",value:function(){var e=this;if(this.props.book&&this.props.signedIn){var t=n("button",{className:"gr-buttonAsLink nativeAdCaretMenu__button",onClick:function(){return p.default.userNotInterested(e.props.book.bookId)}},void 0,"Iâ€™m not interested in this book");return n(c.default,{children:t,trackingOptions:f.TRACKED_CLASSES.newsfeed_caret_not_interested})}return null}},{key:"caretList",value:function(){var e=n("a",{className:"nativeAdCaretMenu__link",href:this.props.helpLink},void 0,"Why am I seeing this?");return n("div",{className:"nativeAdCaretMenu"},void 0,this.renderNotInterested(),(0,h.map)(this.props.additionalLinks,function(e){return n("div",{className:"nativeAdCaretMenu__button"},e,"link")}),n(c.default,{children:e,trackingOptions:f.TRACKED_CLASSES.newsfeed_caret_help}))}},{key:"render",value:function(){return n("div",{className:"nativeAdCaret"},void 0,n(d.default,{trigger:n("div",{className:"nativeAdCaret nativeAdCaret__image","aria-label":"Sponsored item options"}),triggerEventType:d.default.TriggerEventTypes.CLICK,bemModifiers:"caret",children:this.caretList()}))}}]),_);function _(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(_).call(this,e))}s.propTypes={book:l.default.book(),helpLink:a.PropTypes.string,updateId:a.PropTypes.string,additionalLinks:a.PropTypes.arrayOf(a.PropTypes.elements),signedIn:a.PropTypes.bool},s.defaultProps={trackingOptions:f.TRACKED_CLASSES.newsfeed_caret,signedIn:!0},r.default=s},{"../../../modules/ads/click_tracking_helper":2,"../../../react_actions/user_not_interested_actions":49,"../../click_tracking_wrapper":82,"../../dropdown":91,"../../shared/gr_prop_types":179,lodash:"lodash",react:"react"}],65:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}),s=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}Object.defineProperty(r,"__esModule",{value:!0}),r.NativeAdSponsoredLabel=void 0;var a=e("react"),l=o(a),d=o(e("../../click_tracking_wrapper")),c=e("../../../modules/ads/click_tracking_helper"),s=r.NativeAdSponsoredLabel=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(p,a.Component),s(p,[{key:"render",value:function(){var e=this.props.sponsoredBy?"Sponsored by ":"Sponsored",e=n("div",{className:"nativeAd__sponsoredLabel"},void 0,n("span",{className:"googleNativeAd__sponsoredBadgeIcon"}),n("span",{className:"googleNativeAd__sponsoredLabel"},void 0,e),n("a",{target:"_blank",href:this.props.sponsoredUrl,className:"gr-hyperlink"},void 0,this.props.sponsoredBy));return n(d.default,{trackingOptions:c.TRACKED_CLASSES.sponsored_label,children:e})}}]),p);function p(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(p).call(this,e))}s.propTypes={sponsoredBy:l.default.PropTypes.string,sponsoredUrl:l.default.PropTypes.string},r.default=s},{"../../../modules/ads/click_tracking_helper":2,"../../click_tracking_wrapper":82,react:"react"}],66:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},s=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}),i=function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e};function a(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}Object.defineProperty(r,"__esModule",{value:!0}),r.NativeBookAd=void 0;var l=e("react"),d=o(e("./native_book_ad_header")),c=e("../../book"),p=o(c),f=o(e("../../book_with_wtr_button")),h=o(e("../../preview_book/preview_book")),_=o(e("../../user_content/expandable_html")),m=o(e("../../book_description")),g=o(e("../../community_rating")),v=o(e("../../click_tracking_wrapper")),y=e("../../../modules/ads/click_tracking_helper"),b=o(e("../../shape_icon")),k=o(e("../../user/user_icon")),S=e("../../../modules/shape_icon_values"),P=o(e("./native_ad_caret")),T=o(e("./native_ad_sponsored_label")),w=o(e("classnames")),i=r.NativeBookAd=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(N,l.Component),i(N,[{key:"isDesktopNewsfeed",value:function(){return this.props.isNewsfeed&&!this.props.isMobile}},{key:"isMobileNewsfeed",value:function(){return this.props.isNewsfeed&&this.props.isMobile}},{key:"renderBookDescription",value:function(){var e=this.props.isMobile?null:s(h.default,{book:this.props.creative.book});return this.props.creative.customText?s("div",{className:"gr-book__description u-marginTopXSmall"},void 0,React.createElement(_.default,this.props.creative.customText),s("div",{className:"u-paddingTopSmall"},void 0,e)):s("div",{},void 0,s(m.default,{className:"u-marginTopXSmall",bookDescription:this.props.creative.book.description}),s("div",{className:"u-paddingTopSmall"},void 0,e))}},{key:"renderLearnMoreButton",value:function(){var e=s("a",{href:this.props.creative.book.bookUrl,rel:"noopener noreferrer",className:"gr-button u-marginTopMedium"},void 0,"Learn More");return s(v.default,{trackingOptions:y.TRACKED_CLASSES.cta_link,children:e})}},{key:"renderBook",value:function(){var e=(0,w.default)({"gr-newsfeedItem__body":this.isDesktopNewsfeed(),bookAdBody:!this.isDesktopNewsfeed()}),t=this.props.creative.book;return this.props.signedIn?s(f.default,{body:this.renderBookDescription(),book:t,responsiveWtrButton:this.props.isMobile,bookClassName:e}):React.createElement(p.default,n({},t,{className:e,size:c.VALID_BOOK_SIZES.LARGE}),this.props.isMobile?s(g.default,{rating:parseFloat(t.avgRating),displayAvgRatingText:!1,ratingsCount:t.ratingsCount,size:g.default.ICON_SIZES.MEDIUM}):null,this.renderBookDescription(),this.renderLearnMoreButton())}},{key:"renderCaret",value:function(){return s("div",{className:"googleNativeAd__caret"},void 0,s(P.default,{book:this.props.creative.book,helpLink:this.props.creative.helpLink,updateId:this.props.id,signedIn:this.props.signedIn}))}},{key:"renderIconBody",value:function(){return this.props.creative.firstFriend?s(k.default,{user:this.props.creative.firstFriend,size:S.ICON_SIZES.MEDIUM}):s(b.default,{imageUrl:this.props.creative.defaultIcon,size:S.ICON_SIZES.MEDIUM,imageAlt:"Sponsored Newsfeed Item Icon",border:!0})}},{key:"renderIcon",value:function(){return s("div",{className:"gr-newsfeedItem__headerIcon gr-mediaBox__media gr-mediaBox__media--marginSmall"},void 0,this.renderIconBody())}},{key:"render",value:function(){var e=s(T.default,{sponsoredBy:this.props.creative.sponsoredBy,sponsoredUrl:this.props.creative.sponsoredUrl}),t=(0,w.default)("gr-mediaBox",{"feedItem feedItem--ad":this.isMobileNewsfeed(),"gr-newsfeedItem gr-mediaBox":this.isDesktopNewsfeed(),"googleNativeAd__item ":!this.isDesktopNewsfeed()}),r=(0,w.default)({nativeAd__newsfeedBody:this.isDesktopNewsfeed()});return React.createElement("div",{className:t,ref:"nativeAd"},this.isDesktopNewsfeed()&&this.renderIcon(),s("div",{className:"u-marginBottomSmall"},void 0,this.renderCaret(),s("div",{className:"nativeAd__headerText"},void 0,s(d.default,{creative:this.props.creative,signedIn:this.props.signedIn,allowBehavioralTargeting:this.props.allowBehavioralTargeting})),this.props.creative.isSponsored?e:null,s("div",{className:r},void 0,this.renderBook())))}}]),N);function N(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,N),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(N).call(this,e))}i.propTypes={isNewsfeed:l.PropTypes.bool,isMobile:l.PropTypes.bool,creative:l.PropTypes.shape().isRequired,adDeviceType:l.PropTypes.string,signedIn:l.PropTypes.bool,allowBehavioralTargeting:React.PropTypes.bool,id:l.PropTypes.string},r.default=i},{"../../../modules/ads/click_tracking_helper":2,"../../../modules/shape_icon_values":19,"../../book":73,"../../book_description":75,"../../book_with_wtr_button":76,"../../click_tracking_wrapper":82,"../../community_rating":88,"../../preview_book/preview_book":150,"../../shape_icon":174,"../../user/user_icon":201,"../../user_content/expandable_html":203,"./native_ad_caret":64,"./native_ad_sponsored_label":65,"./native_book_ad_header":67,classnames:"classnames",react:"react"}],67:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("../../gr_component_factory")),i=o(e("../../user/user_profile_link")),a=o(e("../../shared/gr_prop_types")),l=o(e("lodash"));r.default=s.default.createClass({displayName:"NativeBookAdHeader",propTypes:{creative:a.default.creative().isRequired,signedIn:React.PropTypes.bool,allowBehavioralTargeting:React.PropTypes.bool},getDefaultProps:function(){return{signedIn:!0}},renderLink:function(e,t){return n("a",{className:"gr-hyperlink gr-hyperlink--bold",href:t},void 0,e)},renderFriendHeader:function(){var e=l.default.head(this.props.creative.topFriends);return n("span",{className:"gr-newsfeedItem__headerText"},void 0,n(i.default,{user:e}),this.renderHeaderText()," ",this.props.creative.friendActionText)},renderHeaderText:function(){return 1===this.props.creative.numAdditionalFriends?n("span",{},void 0," and ",n(i.default,{user:this.props.creative.topFriends[1]})):1<this.props.creative.numAdditionalFriends?n("span",{},void 0," and ",this.renderLink(this.props.creative.numAdditionalFriends+" other friends",this.props.creative.book.bookUrl+"#friendReviews")):null},renderSimilarBook:function(){return n("div",{className:"gr-newsfeedItem__headerText gr-newsfeedItem__headerText--truncateWithEllipsis"},void 0,"This is similar to ",this.renderLink(this.props.creative.similarBook.title,this.props.creative.similarBook.bookUrl))},renderGenres:function(){var e=l.default.head(this.props.creative.genres);return n("div",{className:"gr-newsfeedItem__headerText"},void 0,"This book has been shelved by members as ",this.renderLink(e.genre,e.url),1<this.props.creative.genres.length?n("span",{},void 0," and ",this.renderLink(this.props.creative.genres[1].genre,this.props.creative.genres[1].url)):null)},renderDefault:function(){return n("div",{className:"gr-newsfeedItem__headerText"},void 0,"Based on your reading preferences, you might enjoy")},renderSignedOutText:function(){return n("div",{className:"gr-newsfeedItem__headerText"},void 0,"Recommended")},renderContextualHeader:function(){return n("div",{className:"gr-newsfeedItem__headerText"},void 0,this.props.creative.headerText)},render:function(){return this.props.creative.headerText?this.renderContextualHeader():this.props.allowBehavioralTargeting&&this.props.signedIn?this.props.creative.topFriends?this.renderFriendHeader():this.props.creative.similarBook?this.renderSimilarBook():this.props.creative.genres?this.renderGenres():this.renderDefault():this.renderSignedOutText()}})},{"../../gr_component_factory":108,"../../shared/gr_prop_types":179,"../../user/user_profile_link":202,lodash:"lodash"}],68:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}),s=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}Object.defineProperty(r,"__esModule",{value:!0}),r.NativeFlexAd=void 0;var a=e("react"),l=o(e("./native_flex_ad_body")),d=o(e("../../shape_icon")),c=e("../../../modules/shape_icon_values"),p=o(e("./native_ad_caret")),f=o(e("classnames")),h=o(e("./native_ad_sponsored_label")),s=r.NativeFlexAd=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(_,a.Component),s(_,[{key:"getHeaderText",value:function(){return{__html:this.props.creative.headerText}}},{key:"renderCaret",value:function(){return n("div",{className:"googleNativeAd__caret"},void 0,n(p.default,{helpLink:this.props.creative.helpLink,updateId:this.props.id,signedIn:this.props.signedIn}))}},{key:"isDesktopNewsfeed",value:function(){return this.props.isNewsfeed&&!this.props.isMobile}},{key:"isMobileNewsfeed",value:function(){return this.props.isNewsfeed&&this.props.isMobile}},{key:"renderIcon",value:function(){return n("div",{className:"gr-newsfeedItem__headerIcon gr-mediaBox__media gr-mediaBox__media--marginSmall"},void 0,n(d.default,{imageUrl:this.props.creative.defaultIcon,size:c.ICON_SIZES.MEDIUM,imageAlt:"Sponsored Item Icon",border:!0}))}},{key:"render",value:function(){var e=(0,f.default)({"gr-newsfeedItem__body nativeAd__newsfeedBody":this.isDesktopNewsfeed()}),t=n(h.default,{sponsoredBy:this.props.creative.sponsoredBy,sponsoredUrl:this.props.creative.sponsoredUrl}),r=(0,f.default)("gr-mediaBox",{"gr-newsfeedItem gr-mediaBox":this.isDesktopNewsfeed(),"googleNativeAd__item ":!this.isDesktopNewsfeed(),"feedItem feedItem--ad":this.isMobileNewsfeed()});return React.createElement("div",{className:r,ref:"nativeAd"},this.isDesktopNewsfeed()&&this.renderIcon(),n("div",{className:"u-marginBottomSmall"},void 0,this.renderCaret(),n("div",{className:"nativeAd__headerText"},void 0,n("div",{className:"gr-newsfeedItem__headerText",dangerouslySetInnerHTML:this.getHeaderText()})),this.props.creative.isSponsored?t:null,n(l.default,{creative:this.props.creative,bodyClassNames:e})))}}]),_);function _(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(_).call(this,e))}s.propTypes={id:a.PropTypes.string,creative:a.PropTypes.shape().isRequired,signedIn:a.PropTypes.bool,isNewsfeed:a.PropTypes.bool,isMobile:a.PropTypes.bool},r.default=s},{"../../../modules/shape_icon_values":19,"../../shape_icon":174,"./native_ad_caret":64,"./native_ad_sponsored_label":65,"./native_flex_ad_body":69,classnames:"classnames",react:"react"}],69:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("../../gr_component_factory")),i=o(e("../../shared/gr_prop_types")),a=o(e("classnames")),l=o(e("../../click_tracking_wrapper")),d=o(e("../../user_content/expandable_html")),c=e("../../../modules/ads/click_tracking_helper"),p=o(e("react"));r.default=s.default.createClass({displayName:"NativeFlexAdBody",propTypes:{creative:i.default.creative().isRequired,bodyClassNames:p.default.PropTypes.string},renderImage:function(){var e=(0,a.default)("gr-mediaBox__media",this.withBemModifiers("flexAdBody__image")),e=n("a",{target:this.props.creative.externalLink?"_blank":"_self",rel:"noopener noreferrer",href:this.props.creative.updateUrl,className:"flexAdBody__imageLink"},void 0,n("img",{alt:this.props.creative.title,className:e,src:this.props.creative.image}));return n(l.default,{trackingOptions:c.TRACKED_CLASSES.sponsored_update_body_image,children:e})},renderExploreButton:function(){var e=n("a",{target:this.props.creative.externalLink?"_blank":"_self",rel:"noopener noreferrer",href:this.props.creative.callToActionUrl,className:"gr-button u-marginTopMedium gr-microsite-link"},void 0,this.props.creative.callToActionText);return n(l.default,{trackingOptions:c.TRACKED_CLASSES.cta_link,children:e})},render:function(){var e=(0,a.default)(this.props.bodyClassNames,"gr-mediaBox","flexAdBody"),t=(0,a.default)("flexAdBody__titleLink","gr-hyperlink","gr-hyperlink--naked"),t=n("a",{target:this.props.creative.externalLink?"_blank":"_self",rel:"noopener noreferrer",href:this.props.creative.updateUrl,className:t},void 0,this.props.creative.title);return n("div",{className:e},void 0,this.renderImage(),n("div",{className:"gr-mediaBox__desc"},void 0,n("div",{className:"flexAdBody__title"},void 0,n(l.default,{trackingOptions:c.TRACKED_CLASSES.sponsored_update_body_title_link,children:t})),n("div",{className:"flexAdBody__description"},void 0,p.default.createElement(d.default,this.props.creative.description)),this.renderExploreButton()))}})},{"../../../modules/ads/click_tracking_helper":2,"../../click_tracking_wrapper":82,"../../gr_component_factory":108,"../../shared/gr_prop_types":179,"../../user_content/expandable_html":203,classnames:"classnames",react:"react"}],70:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}),s=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}Object.defineProperty(r,"__esModule",{value:!0}),r.UserNotInterestedMessage=void 0;var a=e("react"),l=o(e("../../close_button")),d=o(e("../../../react_actions/user_not_interested_actions")),c=o(e("classnames")),s=r.UserNotInterestedMessage=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(p,a.Component),s(p,[{key:"renderUndoButton",value:function(e){var t=this;return n("button",{className:"gr-buttonAsLink",onClick:function(){d.default.undoUserNotInterested(e.bookId,t.props.id)}},void 0,"Undo")}},{key:"render",value:function(){var e=this.props.creative.book;if(this.props.isNewsfeed){var t=n("span",{className:"gr-newsfeedItem__flashMessage--body"},void 0,"Thanks! We won't recommend"," ",n("a",{href:e.bookUrl},void 0,e.title)," ","again!"," ",this.renderUndoButton(e));return n("div",{className:"gr-newsfeedItem gr-newsfeedItem__flashMessage",role:"alert"},void 0,n("div",{className:"gr-newsfeedItem__close"},void 0,n(l.default,{action:function(){d.default.closeFlashMessage(e.bookId)}})),t)}var t=n("span",{className:"userNotInterested__message"},void 0,"Thanks! We won't recommend"," ",n("a",{href:e.bookUrl},void 0,e.title)," ","again!"," ",this.renderUndoButton(e)),r=(0,c.default)(this.props.className,"userNotInterested");return n("div",{className:r,role:"alert"},void 0,n("div",{className:"userNotInterested__close"},void 0,n(l.default,{action:function(){d.default.closeFlashMessage(e.bookId)}})),t)}}]),p);function p(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(p).call(this,e))}s.propTypes={id:a.PropTypes.string,isNewsfeed:a.PropTypes.bool,className:a.PropTypes.string,creative:a.PropTypes.shape()},r.default=s},{"../../../react_actions/user_not_interested_actions":49,"../../close_button":83,classnames:"classnames",react:"react"}],71:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("../gr_component_factory")),i=e("react"),a=o(e("classnames")),l={SMALL:"small",LARGE:"large"};r.default=s.default.createClass({displayName:"AuthorBadge",statics:{AUTHOR_BADGE_SIZES:l},propTypes:{size:React.PropTypes.oneOf([l.SMALL,l.LARGE]),isGoodreadsAuthor:i.PropTypes.bool.isRequired},getDefaultProps:function(){return{size:l.SMALL}},getClasses:function(){return(0,a.default)("gr-icon",{"gr-icon--authorBadge":this.props.size===l.SMALL,"gr-icon--authorBadgeLarge":this.props.size===l.LARGE})},renderBadge:function(){return n("span",{className:this.getClasses(),title:"Goodreads Author"})},render:function(){return this.props.isGoodreadsAuthor?this.renderBadge():null}})},{"../gr_component_factory":108,classnames:"classnames",react:"react"}],72:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=o(e("reflux")),a=o(e("../gr_component_factory")),l=o(e("../../react_actions/author_follow_actions")),d=o(e("../../react_stores/author_follow_store")),c=o(e("classnames"));r.default=a.default.createClass({displayName:"AuthorFollowButton",mixins:[i.default.connectFilter(d.default,"authorFollowStore",function(e){return e[this.props.authorId]})],propTypes:{authorId:s.default.PropTypes.number.isRequired,className:s.default.PropTypes.string},handleButtonClicked:function(){this.state.authorFollowStore.isFollowing?l.default.unFollow(this.props.authorId):(l.default.follow(this.props.authorId),this.setState({isHovering:!1}))},getButtonText:function(){return this.state.authorFollowStore.isFollowing?this.state.isHovering?"Unfollow":"Following":"Follow author"},render:function(){var e=this,t=(0,c.default)("gr-button",this.props.className);return n("button",{className:t,onClick:this.handleButtonClicked,onMouseEnter:function(){e.setState({isHovering:!0})},onMouseLeave:function(){e.setState({isHovering:!1})},disabled:!this.state.authorFollowStore.buttonEnabled&&"disabled"},void 0,this.getButtonText())}})},{"../../react_actions/author_follow_actions":25,"../../react_stores/author_follow_store":240,"../gr_component_factory":108,classnames:"classnames",react:"react",reflux:"reflux"}],73:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,s=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0}),r.VALID_BOOK_SIZES=void 0;var n=o(e("react")),i=o(e("lodash")),a=o(e("./gr_component_factory")),l=o(e("./shared/gr_prop_types")),d=o(e("./click_tracking_wrapper")),c=e("../modules/ads/click_tracking_helper"),p=o(e("classnames")),f=o(e("./author/author_badge")),h=r.VALID_BOOK_SIZES={SMALL:"small",MEDIUM:"medium",LARGE:"large"};r.default=a.default.createClass({displayName:"Book",propTypes:{imageUrl:n.default.PropTypes.string.isRequired,bookUrl:n.default.PropTypes.string.isRequired,bookCoverUrl:n.default.PropTypes.string,title:n.default.PropTypes.string.isRequired,size:n.default.PropTypes.oneOf(i.default.values(h)),titleSize:n.default.PropTypes.oneOf(i.default.values(h)),author:l.default.author(),mediaBoxModifier:n.default.PropTypes.string,className:n.default.PropTypes.string,sponsored:n.default.PropTypes.bool,bookImageTrackingData:n.default.PropTypes.object,bookTitleTrackingData:n.default.PropTypes.object,authorLinkTrackingData:n.default.PropTypes.object,label:n.default.PropTypes.element},getDefaultProps:function(){return{size:h.MEDIUM,bookImageTrackingData:c.TRACKED_CLASSES.book_image,bookTitleTrackingData:c.TRACKED_CLASSES.book_title,authorLinkTrackingData:c.TRACKED_CLASSES.author_link}},render:function(){var e=(0,p.default)("gr-mediaBox","gr-book--"+this.props.size,this.withBemModifiers("gr-book"),this.props.className),t=(0,p.default)("gr-mediaBox__media",this.withBemModifiers("gr-book__image"),{"gr-book__image--large":this.props.size===h.LARGE}),r=null==this.props.titleSize?this.props.size:this.props.titleSize,o=(0,p.default)(this.withBemModifiers("gr-book__titleLink"),{"gr-book__titleLink--large":r===h.LARGE},"gr-hyperlink gr-hyperlink--naked"),n=(0,p.default)(this.withBemModifiers("gr-book__title")),r=this.withBemModifiers("gr-mediaBox__desc",this.props.mediaBoxModifier),t=s("img",{alt:this.props.title,className:t,src:this.props.imageUrl}),o=s("a",{href:this.props.bookUrl,className:o},void 0,this.props.title);return s("div",{className:e},void 0,s("a",{href:this.props.bookCoverUrl||this.props.bookUrl},void 0,s(d.default,{children:t,trackingOptions:this.props.bookImageTrackingData})),s("div",{className:r},void 0,this.props.label,s("div",{className:n},void 0,s(d.default,{children:o,trackingOptions:this.props.bookTitleTrackingData})),this.renderAuthorLink(),s("div",{className:"gr-book__additionalContent"},void 0,this.props.children)))},renderAuthorLink:function(){var e=null==this.props.titleSize?this.props.size:this.props.titleSize,t=(0,p.default)(this.withBemModifiers("gr-book__author"),{"gr-book__author--large":e===h.LARGE});if(this.props.author){e=s("a",{href:this.props.author.profileUrl,className:"gr-book__authorLink gr-hyperlink gr-hyperlink--naked"},void 0,this.props.author.name);return s("div",{className:t},void 0,"by ",s(d.default,{children:e,trackingOptions:this.props.authorLinkTrackingData}),n.default.createElement(f.default,this.props.author))}return s("div",{className:t},void 0,"by deleted author")}})},{"../modules/ads/click_tracking_helper":2,"./author/author_badge":71,"./click_tracking_wrapper":82,"./gr_component_factory":108,"./shared/gr_prop_types":179,classnames:"classnames",lodash:"lodash",react:"react"}],74:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}),s=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}Object.defineProperty(r,"__esModule",{value:!0}),r.CTA_TEXT_SIGNED_OUT=r.CTA_TEXT_SIGNED_IN=void 0;var a=e("react"),l=e("../../modules/shape_icon_values"),d=(o(e("../modal")),e("../modal_trigger")),c=(o(d),e("../user_rating")),p=o(c),f=o(e("../user/user_icon")),h=o(e("../user/user_profile_link")),_=o(e("../review/write_a_review_button")),s=(r.CTA_TEXT_SIGNED_IN=" start your review of ",r.CTA_TEXT_SIGNED_OUT="Start your review of ",function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(m,a.Component),s(m,[{key:"goToDestination",value:function(){window.location.assign(this.props.destinationPath)}},{key:"render",value:function(){return n("div",{className:"reviewCta"},void 0,n("div",{className:"reviewCta__left"},void 0,n(f.default,{user:this.props.user,shape:l.ICON_SHAPES.RECTANGULAR})),n("div",{className:"reviewCta__right"},void 0,n("div",{className:"u-marginLeftXSmall reviewCta__label"},void 0,n(h.default,{className:"reviewCta__userProfileLink",user:this.props.user}),this.props.user.viewableName?" start your review of ":"Start your review of ",this.props.bookTitle),n("div",{className:"reviewCta__controls"},void 0,n(p.default,{bookId:this.props.bookId,starSize:c.STAR_SIZES.MEDIUM,handleClick:this.goToDestination.bind(this),displayLabel:!1,clickstreamRef:this.props.ratingClickstreamRef}),n(_.default,{destinationPath:this.props.destinationPath,actionType:this.props.actionType,bookId:this.props.bookId,className:"reviewCta__writeButton"}))))}}]),m);function m(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(m).call(this,e))}(r.default=s).propTypes={bookId:a.PropTypes.string.isRequired,user:a.PropTypes.object.isRequired,destinationPath:a.PropTypes.string.isRequired,bookTitle:a.PropTypes.string.isRequired,actionType:a.PropTypes.string,ratingClickstreamRef:a.PropTypes.string}},{"../../modules/shape_icon_values":19,"../modal":142,"../modal_trigger":143,"../review/write_a_review_button":167,"../user/user_icon":201,"../user/user_profile_link":202,"../user_rating":208,react:"react"}],75:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},s=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var i=o(e("./gr_component_factory")),a=o(e("./user_content/truncated_html")),l=o(e("./shared/gr_prop_types")),d=o(e("classnames"));r.default=i.default.createClass({displayName:"BookDescription",propTypes:{bookDescription:l.default.bookDescription().isRequired,className:React.PropTypes.string,bookDescriptionTargetingData:React.PropTypes.object},getDefaultProps:function(){return{bookDescription:{html:"",truncated:!1,fullContentUrl:""}}},render:function(){var e=(0,d.default)(this.props.className,"gr-book__description"),t=this.props.bookDescription;return s("div",{className:e},void 0,t.html?React.createElement(a.default,n({},t,{fullContentText:"Continue reading",bookDescriptionTargetingData:this.props.bookDescriptionTargetingData})):null,this.props.children)}})},{"./gr_component_factory":108,"./shared/gr_prop_types":179,"./user_content/truncated_html":207,classnames:"classnames"}],76:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},s=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var i=o(e("./gr_component_factory")),a=o(e("./shared/gr_prop_types")),l=e("./book"),d=o(l),c=o(e("./want_to_read/want_to_read_button")),p=e("lodash"),f=o(e("./community_rating"));r.default=i.default.createClass({displayName:"BookWithWTRButton",propTypes:{book:a.default.book().isRequired,body:React.PropTypes.element,bookSize:React.PropTypes.oneOf((0,p.values)(l.VALID_BOOK_SIZES)),bookClassName:React.PropTypes.string,responsiveWtrButton:React.PropTypes.bool},getDefaultProps:function(){return{bookSize:l.VALID_BOOK_SIZES.LARGE,responsiveWtrButton:!1}},renderBookBody:function(){return this.props.body||null},renderCommunityRating:function(){var e=this.props.book;return s(f.default,{rating:parseFloat(e.avgRating),displayAvg:!1,displayAvgRatingText:!1,ratingsCount:e.ratingsCount,size:f.default.ICON_SIZES.MEDIUM})},renderWtrButton:function(){return s(c.default,{bookTitle:this.props.book.title,uniqueId:(0,p.random)(1e6).toString(),bookId:this.props.book.bookId,withModalShelvingMenu:this.props.responsiveWtrButton,showStars:!this.props.responsiveWtrButton})},render:function(){return React.createElement(d.default,n({className:this.props.bookClassName},this.props.book,{size:this.props.bookSize}),this.props.responsiveWtrButton&&this.renderCommunityRating(),this.renderWtrButton(),this.renderBookBody())}})},{"./book":73,"./community_rating":88,"./gr_component_factory":108,"./shared/gr_prop_types":179,"./want_to_read/want_to_read_button":217,lodash:"lodash"}],77:[function(e,t,r){"use strict";var u,o=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0}),r.GetACopyButton=void 0;var n,s=e("react"),i=e("react-redux"),a=e("../../react_stores/buy_buttons/get_a_copy_store"),l=(n=a)&&n.__esModule?n:{default:n},d=e("../../react_actions/buy_buttons/get_a_copy_actions"),e=r.GetACopyButton=function(e){var t=e.getACopyDataUrl,r=e.getACopyClickedHandler;return o("div",{},void 0,o("button",{className:"gr-button gr-button--fullWidth u-paddingTopTiny u-paddingBottomTiny u-defaultType",onClick:function(){return r(t)}},void 0,"Get a copy"))};e.propTypes={getACopyDataUrl:s.PropTypes.string.isRequired,getACopyClickedHandler:s.PropTypes.func.isRequired};var c=(0,i.connect)(function(){return{}},function(t){return{getACopyClickedHandler:function(e){return t((0,d.getACopyClickedHandler)(e))}}})(e);r.default=function(e){return o(i.Provider,{store:l.default},void 0,React.createElement(c,e))}},{"../../react_actions/buy_buttons/get_a_copy_actions":27,"../../react_stores/buy_buttons/get_a_copy_store":242,react:"react","react-redux":"react-redux"}],78:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},s=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var i=e("react"),a=o(e("../modal")),l=o(e("../book")),d=o(e("../community_rating")),c=o(e("./glide_button")),p=o(e("./get_a_copy_link")),e=function(e){var t=e.book,r=e.bookLinks,o=e.glideButton,e=e.onCloseHandler;return s(a.default,{id:"GetACopyInterstitial",onCloseHandler:e,showByDefault:!0,centered:!0,bemModifiers:"small"},void 0,s("h3",{className:"gr-h3 gr-h3--noTopMargin"},void 0,"Get a Copy"),React.createElement(l.default,n({},t,{className:"u-paddingBottomSmall u-bottomGrayBorder u-marginBottomSmall",size:"large"}),s(d.default,{rating:parseFloat(t.avgRating),displayAvg:!0,displayAvgRatingText:!1,size:"medium"})),s("div",{className:"u-textAlignCenter"},void 0,s("p",{className:"gr-metaText gr-metaText--upper u-fontSizeDefault"},void 0,"Available At:"),o?React.createElement(c.default,n({},o,{bookId:t.bookId})):null,r.map(function(e){return React.createElement(p.default,n({key:e.name},e))}),s("p",{className:"u-fontSizeDefault"},void 0,s("a",{href:t.moreStoresUrl},void 0,"More store options"))))};e.propTypes={book:i.PropTypes.shape(l.default.propTypes).isRequired,bookLinks:i.PropTypes.array.isRequired,glideButton:i.PropTypes.object,onCloseHandler:i.PropTypes.func},r.default=e},{"../book":73,"../community_rating":88,"../modal":142,"./get_a_copy_link":80,"./glide_button":81,react:"react"}],79:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e};Object.defineProperty(r,"__esModule",{value:!0}),r.ConditionalInterstitial=void 0;var i=e("react-redux"),a=o(e("../../react_stores/buy_buttons/get_a_copy_store")),l=e("../../react_actions/buy_buttons/get_a_copy_actions"),d=o(e("./get_a_copy_interstitial")),c=e("react"),e=r.ConditionalInterstitial=function(e){var t=e.interstitial,e=e.onClose;return t?React.createElement(d.default,s({},t,{onCloseHandler:e})):n("noscript",{})};e.propTypes={interstitial:c.PropTypes.shape({book:c.PropTypes.object,bookLinks:c.PropTypes.array,glideButton:c.PropTypes.object}),onClose:c.PropTypes.func};var p=(0,i.connect)(function(e){return{interstitial:e.activeGetACopyInterstitial}},function(e){return{onClose:function(){return e((0,l.getACopyClosed)())}}})(e);r.default=function(){return n(i.Provider,{store:a.default},void 0,n(p,{}))}},{"../../react_actions/buy_buttons/get_a_copy_actions":27,"../../react_stores/buy_buttons/get_a_copy_store":242,"./get_a_copy_interstitial":78,react:"react","react-redux":"react-redux"}],80:[function(e,t,r){"use strict";var u,o=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),e=function(e){var t=e.name,e=e.url;return o("div",{className:"u-marginBottomTiny"},void 0,o("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"gr-button gr-button--fullWidth"},void 0,t))};e.propTypes={name:n.PropTypes.string.isRequired,url:n.PropTypes.string.isRequired},r.default=e},{react:"react"}],81:[function(e,t,r){"use strict";var u,o=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var n,s=e("react"),i=e("./get_a_copy_link"),a=(n=i)&&n.__esModule?n:{default:n},l=e("../../modules/ajax/ajax_helper"),e=function(e){var t=e.price,r=e.url;return e.bookId,o("div",{onClick:function(){(0,l.httpPost)("/track/track_clickstream",{data:{hit_type:"actionOnly",action_type:"bb_click-amazon"}})}},void 0,o(a.default,{name:"Kindle Store "+t,url:r}))};e.propTypes={price:s.PropTypes.string.isRequired,url:s.PropTypes.string.isRequired,bookId:s.PropTypes.string.isRequired},r.default=e},{"../../modules/ajax/ajax_helper":4,"./get_a_copy_link":80,react:"react"}],82:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=o(e("react")),e=o(e("./gr_component_factory"));r.default=e.default.createClass({displayName:"ClickTrackingWrapper",propTypes:{trackingOptions:n.default.PropTypes.shape({dfp:n.default.PropTypes.bool,pmet:n.default.PropTypes.object.isRequired}).isRequired,children:n.default.PropTypes.element.isRequired},render:function(){return this.props.children}})},{"./gr_component_factory":108,react:"react"}],83:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=o(e("./gr_component_factory")),a=e("../modules/shared/image_registry"),l=o(e("classnames")),d=e("../modules/close_button_values");r.default=i.default.createClass({displayName:"CloseButton",propTypes:{action:s.default.PropTypes.func.isRequired,variant:s.default.PropTypes.oneOf([d.VARIANTS.DEFAULT,d.VARIANTS.DARK_BG])},getDefaultProps:function(){return{variant:d.VARIANTS.DEFAULT}},render:function(){var e=(0,l.default)("gr-iconButton",this.props.className),t=this.props.variant===d.VARIANTS.DARK_BG?(0,a.getImages)().closeIcons.darkBackground:(0,a.getImages)().closeIcon;return n("button",{type:"button",className:e,onClick:this.props.action},void 0,n("img",{alt:"Dismiss",src:t}))}})},{"../modules/close_button_values":9,"../modules/shared/image_registry":20,"./gr_component_factory":108,classnames:"classnames",react:"react"}],84:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},s=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var i=o(e("react")),a=o(e("../gr_component_factory")),l=o(e("../user_content/expandable_html")),d=o(e("../user_content/hidden_html")),c=o(e("../shared/gr_prop_types")),p=o(e("../user/user_profile_link")),f=o(e("../user/user_icon")),h=o(e("./right_side_information"));r.default=a.default.createClass({displayName:"Comment",propTypes:{body:i.default.PropTypes.shape(c.default.expandableHtml()),createdAt:c.default.date.isRequired,authorUser:c.default.user().isRequired,subjectKey:i.default.PropTypes.string.isRequired,subject:c.default.commentSubject(),deletableByCurrentUser:i.default.PropTypes.bool.isRequired,blockedByCurrentUser:i.default.PropTypes.bool,showTimestamp:i.default.PropTypes.bool,uri:i.default.PropTypes.string.isRequired,flagForAbuseUrl:i.default.PropTypes.string.isRequired},getDefaultProps:function(){return{blockedByCurrentUser:!1}},getInitialState:function(){return{showCommentDeletingSpinner:!1}},renderBody:function(){if(this.props.blockedByCurrentUser)return s(d.default,{unhideText:"unhide comment"},void 0,i.default.createElement(l.default,this.props.body));return i.default.createElement(l.default,this.props.body)},render:function(){var e=this;return s("div",{className:"gr-comment gr-mediaBox",onMouseEnter:function(){e.setState({isHoveringOnComment:!0})},onMouseLeave:function(){e.setState({isHoveringOnComment:!1})}},void 0,s("div",{className:"gr-mediaBox__media"},void 0,s(f.default,{user:this.props.authorUser})),s("div",{className:"gr-mediaBox__desc\n                              gr-mediaBox__desc--clearfixOverflow"},void 0,i.default.createElement(h.default,n({isHoveringOnComment:this.state.isHoveringOnComment},this.props)),s(p.default,{user:this.props.authorUser}),this.props.blockedByCurrentUser?s("strong",{},void 0," (blocked)"):null,s("div",{className:"gr-comment__body"},void 0,this.renderBody())))}})},{"../gr_component_factory":108,"../shared/gr_prop_types":179,"../user/user_icon":201,"../user/user_profile_link":202,"../user_content/expandable_html":203,"../user_content/hidden_html":204,"./right_side_information":87,react:"react"}],85:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=o(e("lodash")),a=o(e("../gr_component_factory")),l=o(e("../shared/gr_prop_types")),d=o(e("../../react_actions/comment_actions")),c=o(e("../../react_stores/comments_store")),p=o(e("../user/user_icon")),f=e("../../react_mixins/gr_reflux"),h=o(e("classnames"));r.default=a.default.createClass({displayName:"CommentForm",propTypes:{authorUser:l.default.user().isRequired,subjectKey:s.default.PropTypes.string.isRequired,subject:s.default.PropTypes.shape({type:s.default.PropTypes.string,id:s.default.PropTypes.number,uri:s.default.PropTypes.string}),placeholder:s.default.PropTypes.string},mixins:[(0,f.connectToLazyStore)(c.default,"subjectKey")],getDefaultProps:function(){return{placeholder:"Write a commentâ€¦"}},addNewComment:function(e){this.isCommentEmpty()||d.default.addNewComment({subjectKey:this.props.subjectKey,subject:this.props.subject,body:this.state.unsavedComment,authorUser:this.props.authorUser}),e.preventDefault()},isCommentEmpty:function(){return i.default.isEmpty(i.default.trim(this.state.unsavedComment))},onTextChange:function(e){d.default.commentEntered(this.props.subjectKey,e.target.value)},onFocus:function(){d.default.textareaFocused(this.props.subjectKey)},onBlur:function(){d.default.textareaUnfocused(this.props.subjectKey)},componentDidUpdate:function(){!0===this.state.textareaFocusRequested&&this.refs.commentBodyTextarea.focus()},render:function(){var e=(0,h.default)(this.withBemModifiers("gr-commentForm"),"gr-mediaBox");return n("div",{className:e},void 0,n("div",{className:"gr-mediaBox__media u-noLineHeight"},void 0,n(p.default,{user:this.props.authorUser})),n("form",{className:"gr-mediaBox__desc",method:"post",action:"/comment"},void 0,n("input",{type:"hidden",name:"id",value:this.props.subject.id}),n("input",{type:"hidden",name:"type",value:this.props.subject.type}),s.default.createElement("textarea",{className:"gr-textarea gr-commentForm__textarea",name:"comment[body_usertext]",disabled:this.state.saveInProgress,onChange:this.onTextChange,onFocus:this.onFocus,onBlur:this.onBlur,rows:this.state.textareaRows,value:this.state.unsavedComment,ref:"commentBodyTextarea",placeholder:this.props.placeholder,"aria-label":this.props.placeholder}),this.state.showCommentButton?n("button",{className:"gr-commentForm__submitButton gr-button gr-button--small",disabled:this.state.saveInProgress||this.isCommentEmpty(),onClick:this.addNewComment,type:"submit"},void 0,"Comment"):null))}})},{"../../react_actions/comment_actions":28,"../../react_mixins/gr_reflux":235,"../../react_stores/comments_store":243,"../gr_component_factory":108,"../shared/gr_prop_types":179,"../user/user_icon":201,classnames:"classnames",lodash:"lodash",react:"react"}],86:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},s=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var i=o(e("react")),a=o(e("lodash")),l=o(e("../gr_component_factory")),d=o(e("../shared/gr_prop_types")),c=o(e("./comment")),p=o(e("../pagination_links")),f=o(e("../../react_stores/comments_store")),h=o(e("../../react_actions/comment_actions")),_=o(e("../spinner")),m=e("../../react_mixins/gr_reflux"),g=o(e("classnames"));r.default=l.default.createClass({displayName:"Comments",propTypes:{subjectKey:i.default.PropTypes.string.isRequired,subject:d.default.commentSubject(),subjectUrl:i.default.PropTypes.string,showTimestamp:i.default.PropTypes.bool},getDefaultProps:function(){return{showTimestamp:!0}},mixins:[(0,m.connectToLazyStore)(f.default,"subjectKey")],seeMoreCommentsText:function(){return 1==this.state.numComments?"See 1 comment":"See all "+this.state.numComments+" comments"},showCommentsForPage:function(e){h.default.showCommentsForPage({subjectKey:this.props.subjectKey,subject:this.props.subject,page:e})},showMoreClicked:function(e){h.default.showSeeMoreLoadingSpinner(this.props.subjectKey),this.showCommentsForPage(1),e.preventDefault()},renderSeeMoreComments:function(){var e=this.state.numComments;return 3<e||e>this.state.comments.length?s("div",{className:"gr-comments__seeAllLinkBox"},void 0,this.state.showSeeMoreLoadingSpinner?s("span",{},void 0,s("span",{className:"gr-hyperlink gr-hyperlink--bold"},void 0,this.seeMoreCommentsText()),s("span",{id:"showMoreSpinner",className:"u-marginLeftTiny"},void 0,s(_.default,{}))):s("a",{href:this.props.subjectUrl,className:"gr-hyperlink gr-hyperlink--bold",onClick:this.showMoreClicked},void 0,this.seeMoreCommentsText())):null},renderComments:function(){var t=this,e=this.state.showPagination?this.state.comments:a.default.takeRight(this.state.comments,3);return a.default.map(e,function(e){return i.default.createElement(c.default,n({key:e.uri,subjectKey:t.props.subjectKey,subject:t.props.subject,showTimestamp:t.props.showTimestamp},e))})},render:function(){var e=(0,g.default)(this.withBemModifiers("gr-comments"),"gr-box","gr-box--hiddenOverflow","u-defaultType");return 0<this.state.numComments?s("div",{className:e},void 0,this.state.showPagination?null:this.renderSeeMoreComments(),this.renderComments(),this.state.showPagination?s("div",{className:"u-topGrayBorder"},void 0,s(p.default,{subjectKey:this.props.subjectKey,totalSize:this.state.numComments,currentPageNumber:this.state.currentPage,perPage:10,changePageAction:this.showCommentsForPage,className:"gr-paginationLinks__links"})):null):null}})},{"../../react_actions/comment_actions":28,"../../react_mixins/gr_reflux":235,"../../react_stores/comments_store":243,"../gr_component_factory":108,"../pagination_links":148,"../shared/gr_prop_types":179,"../spinner":194,"./comment":84,classnames:"classnames",lodash:"lodash",react:"react"}],87:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=o(e("reflux")),a=o(e("../gr_component_factory")),l=o(e("../shared/gr_prop_types")),d=o(e("../spinner")),c=o(e("../flagged_resources/flag_for_abuse_link")),p=o(e("../time/relative_time")),f=o(e("../dot_separated_elements")),h=o(e("../../react_actions/comment_actions")),_=o(e("../../react_stores/user_agent_capabilities_store")),m=o(e("../../modules/env_utils"));r.default=a.default.createClass({displayName:"CommentRightSideInformation",mixins:[i.default.connect(_.default,"userAgentCapabilities")],propTypes:{showTimestamp:s.default.PropTypes.bool,isHoveringOnComment:s.default.PropTypes.bool,deletableByCurrentUser:s.default.PropTypes.bool.isRequired,subject:l.default.commentSubject().isRequired,uri:s.default.PropTypes.string.isRequired,subjectKey:s.default.PropTypes.string.isRequired,createdAt:l.default.date.isRequired,flagForAbuseUrl:s.default.PropTypes.string.isRequired},getDefaultProps:function(){return{showTimestamp:!0,isHoveringOnComment:!1}},getInitialState:function(){return{showCommentDeletingSpinner:!1}},deleteComment:function(){var e={subject:this.props.subject,subjectKey:this.props.subjectKey};window.confirm("Are you sure you want to delete this comment?")&&(this.setState({showCommentDeletingSpinner:!0}),h.default.deleteComment(this.props.subjectKey,this.props.uri,e))},getDeleteLink:function(){return this.props.deletableByCurrentUser?this.state.showCommentDeletingSpinner?s.default.createElement(d.default,{ref:"spinner"}):s.default.createElement("a",{className:"gr-comment__deleteLink gr-hyperlink--naked gr-hyperlink",ref:"deleteLink",onClick:this.deleteComment,"aria-label":"Delete comment"},"Delete"):void 0},getFlag:function(){var e=this.props.flagForAbuseUrl+"&return_url="+encodeURIComponent(m.default.getLocationUrl());return n(c.default,{flagForAbuseUrl:e})},getTimestamp:function(){return this.props.showTimestamp?n("small",{className:"gr-comment__timestamp"},void 0,n(p.default,{time:this.props.createdAt})):void 0},getRightSideElements:function(){var e=[];return this.state.userAgentCapabilities.touch?(e.push(this.getDeleteLink()),e.push(this.getFlag()),e.push(this.getTimestamp())):this.props.isHoveringOnComment?(e.push(this.getDeleteLink()),e.push(this.getFlag())):e.push(this.getTimestamp()),e},render:function(){return n("div",{className:"gr-comment__rightSideInformation"},void 0,n(f.default,{elements:this.getRightSideElements()}))}})},{"../../modules/env_utils":13,"../../react_actions/comment_actions":28,"../../react_stores/user_agent_capabilities_store":260,"../dot_separated_elements":89,"../flagged_resources/flag_for_abuse_link":105,"../gr_component_factory":108,"../shared/gr_prop_types":179,"../spinner":194,"../time/relative_time":199,react:"react",reflux:"reflux"}],88:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=o(e("./gr_component_factory")),a=o(e("classnames")),l=o(e("./dot_separated_elements")),d={SMALL:"small",MEDIUM:"medium",LARGE:"large"};r.default=i.default.createClass({displayName:"CommunityRating",statics:{ICON_SIZES:d},propTypes:{rating:s.default.PropTypes.number.isRequired,size:s.default.PropTypes.oneOf([d.SMALL,d.MEDIUM,d.LARGE]),displayAvg:s.default.PropTypes.bool,displayAvgRatingText:s.default.PropTypes.bool,ratingsCount:s.default.PropTypes.number,textReviewsCount:s.default.PropTypes.number,publication:s.default.PropTypes.shape({toBePublished:s.default.PropTypes.bool,date:s.default.PropTypes.string}),editions:s.default.PropTypes.shape({countString:s.default.PropTypes.string,url:s.default.PropTypes.string}),className:s.default.PropTypes.string},getDefaultProps:function(){return{displayAvg:!1,size:d.SMALL}},wrapperClasses:function(){return(0,a.default)("communityRating__starsWrapper",{"communityRating__starsWrapper--small":this.props.size===d.SMALL,"communityRating__starsWrapper--medium":this.props.size===d.MEDIUM,"communityRating__starsWrapper--large":this.props.size===d.LARGE})},starClasses:function(){return(0,a.default)("communityRating__stars",{"communityRating__stars--small":this.props.size===d.SMALL,"communityRating__stars--medium":this.props.size===d.MEDIUM,"communityRating__stars--large":this.props.size===d.LARGE})},getRoundedRating:function(e){var t=Math.floor(e);return e===t?e:e-t<.5?t+.45:t+.6},renderRating:function(){var e={width:this.getRoundedRating(this.props.rating)/5*100+"%"},t="Rated "+this.props.rating.toFixed(2)+" of 5",r=null===this.props.displayAvgRatingText?this.props.displayAvg:this.props.displayAvgRatingText;return n("span",{},void 0,n("div",{className:this.wrapperClasses()},void 0,n("div",{className:this.starClasses(),style:e,"aria-label":t})),this.props.displayAvg?n("span",{className:"gr-metaText"},void 0,this.props.rating.toFixed(2),r?" avg. rating":""):null)},renderRatingsCount:function(){return n("span",{className:"gr-metaText u-inlineBlock"},void 0,this.props.ratingsCount.toLocaleString()," Ratings")},renderTextReviewsCount:function(){return n("span",{className:"gr-metaText u-inlineBlock"},void 0,this.props.textReviewsCount.toLocaleString()," Reviews")},renderPublicationDate:function(){return n("span",{className:"gr-metaText u-inlineBlock"},void 0,(this.props.publication.toBePublished?"expected publication":"published")+" "+this.props.publication.date)},renderEditionsCount:function(){return n("span",{className:"gr-metaText"},void 0,n("a",{className:"gr-hyperlink gr-hyperlink--naked u-inlineBlock",href:this.props.editions.url},void 0,this.props.editions.countString))},render:function(){var e=(0,a.default)("communityRating",this.props.className),t="Rated "+this.props.rating.toFixed(2)+" of 5",r=[this.renderRating()];return this.props.ratingsCount&&r.push(this.renderRatingsCount()),this.props.textReviewsCount&&r.push(this.renderTextReviewsCount()),this.props.publication&&this.props.publication.date&&r.push(this.renderPublicationDate()),this.props.editions&&this.props.editions.countString&&r.push(this.renderEditionsCount()),n("div",{className:e,"aria-label":t},void 0,n(l.default,{elements:r}))}})},{"./dot_separated_elements":89,"./gr_component_factory":108,classnames:"classnames",react:"react"}],89:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=e("lodash"),e=o(e("./gr_component_factory"));r.default=e.default.createClass({displayName:"DotSeparatedElements",propTypes:{elements:s.default.PropTypes.arrayOf(s.default.PropTypes.oneOfType([s.default.PropTypes.element,s.default.PropTypes.string])).isRequired,separator:s.default.PropTypes.element},getDefaultProps:function(){return{separator:n("span",{},void 0," Â· ")}},joinElementsWithSeparator:function(){var o=this,n=(0,i.compact)(this.props.elements);return(0,i.transform)(n,function(e,t,r){e.push(t),r+1!==n.length&&e.push(o.props.separator)})},render:function(){return n("span",{className:this.props.className},void 0,(0,i.map)(this.joinElementsWithSeparator(),function(e,t){return n("span",{},t,e)}))}})},{"./gr_component_factory":108,lodash:"lodash",react:"react"}],90:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),e=o(e("./gr_component_factory"));r.default=e.default.createClass({displayName:"DropDownList",propTypes:{showMoreLink:s.default.PropTypes.bool,moreLinkURL:s.default.PropTypes.string,moreLinkText:s.default.PropTypes.string},getDefaultProps:function(){return{showMoreLink:!1,moreLinkURL:null,moreLinkText:"â€¦More"}},render:function(){return n("div",{},void 0,this.props.children,this.props.showMoreLink&&null!==this.props.moreLinkURL?n("a",{className:"dropDownList__listItem--moreLink",href:this.props.moreLinkURL},void 0,this.props.moreLinkText):null)}})},{"./gr_component_factory":108,react:"react"}],91:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=o(e("lodash")),a=o(e("reflux")),l=o(e("./gr_component_factory")),d=o(e("../react_mixins/hover_intent")),c=o(e("classnames")),p=o(e("react-onclickoutside")),f=o(e("../modules/keys")),h=o(e("../react_stores/user_agent_capabilities_store")),_=e("../modules/shared/touch_not_ready_helper"),m={HOVER:"hover",CLICK:"click"},g={LEFT:"left",RIGHT:"right"};r.default=l.default.createClass({displayName:"Dropdown",mixins:[d.default,p.default,a.default.connect(h.default,"userAgentCapabilities")],propTypes:{alignment:s.default.PropTypes.oneOf(i.default.values(g)),fallbackUrl:s.default.PropTypes.string,onShowCallback:s.default.PropTypes.func,tooltipText:s.default.PropTypes.string,trigger:s.default.PropTypes.oneOfType([s.default.PropTypes.string,s.default.PropTypes.element]).isRequired,triggerEventType:s.default.PropTypes.oneOf(i.default.values(m))},statics:{TriggerEventTypes:m},getTriggerEventType:function(){return this.state.userAgentCapabilities.touch?m.CLICK:this.props.triggerEventType},getInitialState:function(){return{dropdownOpen:!1}},getDefaultProps:function(){return{triggerEventType:m.CLICK,alignment:g.LEFT}},hide:function(){this.setState({dropdownOpen:!1})},show:function(){this.setState({dropdownOpen:!0}),this.props.onShowCallback&&this.props.onShowCallback()},toggle:function(e){this.props.children&&e.preventDefault(),this.state.dropdownOpen?this.hide():this.show()},openList:function(e){f.default.isDropdownOpenerKey(e.keyCode)?(e.preventDefault(),f.default.isArrowDown(e.keyCode)?this.show():this.toggle(e)):f.default.isDefaultCloserKey(e.keyCode)&&(e.preventDefault(),this.hide())},handleClickOutside:function(){this.state.userAgentCapabilities.touch||this.hide()},handleMouseEnter:function(){this.onEnterIntent(this.show,100)},handleMouseLeave:function(){this.onLeaveIntent(this.hide,100)},handleTriggerClick:function(e){return(0,_.acknowledgeEvent)(e),this.state.dropdownOpen&&this.props.triggerEventType===m.HOVER&&!0!==this.state.userAgentCapabilities.touch?void e.preventDefault():void this.toggle(e)},triggerClasses:function(){return(0,c.default)(this.withBemModifiers(["dropdown__trigger"]),{"dropdown__trigger--buttonReset":i.default.isUndefined(this.props.fallbackUrl)},{"dropdown__trigger--triggerEventTypeHover":this.props.triggerEventType===m.HOVER},{"dropdown__trigger--personalNav":"true"===this.props.isInPersonalNav},{"dropdown__trigger--personalNavActive":"true"===this.props.isInPersonalNav&&this.state.dropdownOpen})},renderTriggerButton:function(){return n("button",{className:this.triggerClasses(),"aria-haspopup":"true","aria-expanded":this.state.dropdownOpen,onClick:this.handleTriggerClick,onKeyDown:this.openList,title:this.props.tooltipText,"data-ux-click":"true"===this.props.isInPersonalNav},void 0,this.props.trigger)},renderTriggerLink:function(){return n("a",{className:this.triggerClasses(),href:this.props.fallbackUrl,onClick:this.handleTriggerClick,onKeyDown:this.openList,role:"button","aria-haspopup":"true","aria-expanded":this.state.dropdownOpen,title:this.props.tooltipText,"data-ux-click":"true"===this.props.isInPersonalNav},void 0,this.props.trigger)},render:function(){var e=(0,c.default)(this.withBemModifiers("dropdown")),t=(0,c.default)(this.withBemModifiers("dropdown__menu"),"gr-box gr-box--withShadowLarge",{"dropdown__menu--show":this.state.dropdownOpen}),r=i.default.isUndefined(this.props.fallbackUrl)?this.renderTriggerButton():this.renderTriggerLink(),o=n("div",{className:t,role:"menu"},void 0,this.props.children);switch(this.getTriggerEventType()){case m.HOVER:return n("div",{className:e,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},void 0,r,o);case m.CLICK:return n("div",{className:e},void 0,r,o)}}})},{"../modules/keys":16,"../modules/shared/touch_not_ready_helper":21,"../react_mixins/hover_intent":236,"../react_stores/user_agent_capabilities_store":260,"./gr_component_factory":108,classnames:"classnames",lodash:"lodash",react:"react","react-onclickoutside":"react-onclickoutside",reflux:"reflux"}],92:[function(e,t,r){"use strict";var u,o=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var n,s=e("react"),e=(n=s)&&n.__esModule?n:{default:n};r.default=e.default.createClass({displayName:"error_message.js",propTypes:{componentName:e.default.PropTypes.string.isRequired},render:function(){return o("div",{className:"gr-errorMessage"},void 0,"There was an issue rendering ",this.props.componentName)}})},{react:"react"}],93:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=o(e("../../../../gr_component_factory")),a=o(e("../../../../shared/gr_prop_types")),l=o(e("classnames")),d=o(e("../../../../author/author_badge"));r.default=i.default.createClass({displayName:"UniversalSearchResultAuthor",propTypes:{result:a.default.searchResults.author().isRequired,onChooseResult:s.default.PropTypes.func.isRequired},render:function(){var e=this,t=(0,l.default)("gr-mediaBox","gr-book--navbar","gr-hyperlink","gr-hyperlink--naked","gr-hyperlink--noUnderline","searchResults__result");return n("a",{className:t,href:"#","aria-label":"Search result",onClick:function(){e.props.onChooseResult(e.props.result)}},void 0,n("img",{className:"gr-mediaBox__media",src:this.props.result.object.profileImage,alt:"Author pic"}),n("div",{className:"gr-mediaBox__desc"},void 0,n("div",{className:"gr-universalSearchResult__mainText gr-universalSearchResult__mainText--navbar u-defaultType"},void 0,this.props.result.object.name)),n("div",{className:"gr-universalSearchResult__secondaryText gr-universalSearchResult__secondaryText--navbar"},void 0,"Author",s.default.createElement(d.default,this.props.result.object)))}})},{"../../../../author/author_badge":71,"../../../../gr_component_factory":108,"../../../../shared/gr_prop_types":179,classnames:"classnames",react:"react"}],94:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=o(e("../../../../gr_component_factory")),a=o(e("../../../../shared/gr_prop_types")),l=o(e("classnames")),d=o(e("../../../../author/author_badge"));r.default=i.default.createClass({displayName:"UniversalSearchResultBook",propTypes:{result:a.default.searchResults.book().isRequired,onChooseResult:s.default.PropTypes.func.isRequired},render:function(){var e=this,t=(0,l.default)("gr-mediaBox","gr-book--navbar","gr-hyperlink","gr-hyperlink--naked","gr-hyperlink--noUnderline","gr-universalSearchResults__result");return n("a",{className:t,href:"#","aria-label":"Search result",onClick:function(){e.props.onChooseResult(e.props.result)}},void 0,n("img",{className:"gr-mediaBox__media",src:this.props.result.object.imageUrl,alt:"Cover pic"}),n("div",{className:"gr-mediaBox__desc"},void 0,n("div",{className:"gr-universalSearchResult__mainText gr-universalSearchResult__mainText--navbar u-defaultType"},void 0,this.props.result.object.title),n("div",{className:"gr-universalSearchResult__secondaryText gr-universalSearchResult__secondaryText--navbar"},void 0,"by ",this.props.result.object.authorName,s.default.createElement(d.default,this.props.result.object))))}})},{"../../../../author/author_badge":71,"../../../../gr_component_factory":108,"../../../../shared/gr_prop_types":179,classnames:"classnames",react:"react"}],95:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=o(e("../../../../gr_component_factory")),a=o(e("../../../../shared/gr_prop_types")),l=o(e("classnames"));r.default=i.default.createClass({displayName:"UniversalSearchResultUser",propTypes:{result:a.default.searchResults.user().isRequired,onChooseResult:s.default.PropTypes.func.isRequired},render:function(){var e=this,t=(0,l.default)("gr-mediaBox","gr-book--navbar","gr-hyperlink","gr-hyperlink--naked","gr-hyperlink--noUnderline","searchResults__result");return n("a",{className:t,href:"#","aria-label":"Search result",onClick:function(){e.props.onChooseResult(e.props.result)}},void 0,n("img",{className:"gr-mediaBox__media",src:this.props.result.object.profileImage,alt:"User pic"}),n("div",{className:"gr-mediaBox__desc"},void 0,n("div",{className:"gr-universalSearchResult__mainText gr-universalSearchResult__mainText--navbar u-defaultType"},void 0,this.props.result.object.name)),n("div",{className:"gr-universalSearchResult__secondaryText gr-universalSearchResult__secondaryText--navbar"},void 0,"Goodreads User"))}})},{"../../../../gr_component_factory":108,"../../../../shared/gr_prop_types":179,classnames:"classnames",react:"react"}],96:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},s=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var i=o(e("react")),a=o(e("lodash")),l=o(e("../../../gr_component_factory")),d=o(e("reflux")),c=o(e("react-onclickoutside")),p=o(e("classnames")),f=o(e("../../../../modules/keys")),h=o(e("../../../../react_stores/experimental/search/universal_search_store_factory")),_=o(e("./universal_search_results")),m=o(e("../../../spinner")),e=o(e("../../../../react_mixins/factory_store_mixin"));r.default=l.default.createClass({displayName:"UniversalSearch",mixins:[c.default,d.default.ListenerMixin,(0,e.default)(h.default)],propTypes:{onChooseResult:i.default.PropTypes.func.isRequired,maxResults:i.default.PropTypes.number,searchPath:i.default.PropTypes.string.isRequired,closeAfterResultChosen:i.default.PropTypes.bool,autocompleteUrl:i.default.PropTypes.string.isRequired},getDefaultProps:function(){return{maxResults:7,closeAfterResultChosen:!1}},hide:function(){this.actions.setShowResultsContainer(!1)},handleClickOutside:function(){this.hide()},handleSearch:function(e){this.actions.search(e.target.value,this.props.autocompleteUrl,this.props.maxResults)},handleClick:function(e){a.default.isEmpty(this.state.query)||this.handleSearch(e)},handleChoice:function(e){this.props.onChooseResult(e),this.props.closeAfterResultChosen&&this.hide()},handleKeyPress:function(e){var t=Math.min(this.props.maxResults,this.state.results.length);f.default.isEnter(e.keyCode)&&null!==this.state.activeResult?(this.handleChoice(this.state.activeResult),e.preventDefault()):f.default.isArrowDown(e.keyCode)?this.actions.selectNextResult(t):f.default.isArrowUp(e.keyCode)?this.actions.selectPreviousResult(t):f.default.isEscape(e.keyCode)&&this.hide()},renderInputIcon:function(){var e=(0,p.default)("searchBox__icon",{"searchBox__icon--loadingSpinner":this.state.showLoadingSpinner,"searchBox__icon--magnifyingGlass gr-iconButton":!this.state.showLoadingSpinner});return this.state.showLoadingSpinner?s("span",{className:e},void 0,s(m.default,{})):s("button",{type:"submit",className:e,"aria-label":"Search"})},render:function(){var e=(0,p.default)(this.withBemModifiers("searchBox")),t=(0,p.default)(this.withBemModifiers("searchBox__input"));return s("div",{acceptCharset:"UTF-8",className:e,onKeyDown:this.handleKeyPress},void 0,s("form",{autoComplete:"off",action:this.props.searchPath,className:"searchBox__form",role:"search","aria-label":"Search for books to add to your shelves"},void 0,s("input",{className:t,autoComplete:"off",name:"q",type:"text",placeholder:"Search books/authors","aria-label":"Search books",onClick:this.handleClick,onChange:this.handleSearch,"aria-controls":"searchResults"}),this.renderInputIcon(),this.state.showResultsContainer?i.default.createElement(_.default,n({},this.props,this.state,{onChooseResult:this.handleChoice,mouseoverAction:this.actions.selectSpecificResult})):null))}})},{"../../../../modules/keys":16,"../../../../react_mixins/factory_store_mixin":234,"../../../../react_stores/experimental/search/universal_search_store_factory":245,"../../../gr_component_factory":108,"../../../spinner":194,"./universal_search_results":97,classnames:"classnames",lodash:"lodash",react:"react","react-onclickoutside":"react-onclickoutside",reflux:"reflux"}],97:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=o(e("lodash")),a=o(e("classnames")),l=o(e("../../../drop_down_list")),d=o(e("./results/universal_search_result_book")),c=o(e("./results/universal_search_result_author")),p=o(e("./results/universal_search_result_user")),f=o(e("../../../shared/gr_prop_types")),e=o(e("../../../gr_component_factory")),h={author:c.default,book:d.default,friend:p.default};r.default=e.default.createClass({displayName:"UniversalSearchResults",propTypes:{maxResults:s.default.PropTypes.number.isRequired,query:s.default.PropTypes.string,results:s.default.PropTypes.array.isRequired,shelfName:s.default.PropTypes.string,searchPath:s.default.PropTypes.string,onChooseResult:s.default.PropTypes.func.isRequired,mouseoverAction:s.default.PropTypes.func.isRequired,activeResult:s.default.PropTypes.oneOfType([f.default.searchResults.author(),f.default.searchResults.book(),f.default.searchResults.user()])},renderLastSearchResultItem:function(e){var t=(0,a.default)("gr-buttonAsLink","searchResults__lastItem",this.withBemElement("gr-universalSearchResults","lastItem"));return n("button",{className:t,type:"submit"},void 0,e)},renderResult:function(e){var t=this,r=h[e.type];return n("div",{className:(0,a.default)("gr-universalSearchResults__item",{"gr-universalSearchResults__item--active":e===this.props.activeResult}),onMouseOver:function(){t.props.mouseoverAction(e)}},e.object.id,n(r,{result:e,onChooseResult:this.props.onChooseResult}))},render:function(){var t=this,e=(0,a.default)(this.withBemModifiers("gr-universalSearchResults"),"gr-box","gr-box--withShadow");return n("div",{className:e,id:"universalSearchResults"+this.props.query+this.props.results.length,"aria-live":"polite","aria-label":"Universal search results"},void 0,n(l.default,{maxListItems:this.props.maxResults},void 0,0<this.props.results.length?i.default.map(i.default.slice(this.props.results,0,this.props.maxResults),function(e){return t.renderResult(e)}):this.renderLastSearchResultItem('Search for "'+this.props.query+'"â€¦'),0<this.props.results.length?this.renderLastSearchResultItem('See all results for "'+this.props.query+'"'):null))}})},{"../../../drop_down_list":90,"../../../gr_component_factory":108,"../../../shared/gr_prop_types":179,"./results/universal_search_result_author":93,"./results/universal_search_result_book":94,"./results/universal_search_result_user":95,classnames:"classnames",lodash:"lodash",react:"react"}],98:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=o(e("lodash")),a=o(e("./gr_component_factory")),l=o(e("reflux")),d=o(e("./genre_checkbox")),c=o(e("./../react_actions/modal_actions")),p=o(e("../react_actions/favorite_genres_form_actions")),e=o(e("../react_stores/favorite_genres_form_store"));r.default=a.default.createClass({displayName:"FavoriteGenresForm",mixins:[l.default.connect(e.default,"favoriteGenresFormStore")],propTypes:{favoriteGenres:s.default.PropTypes.array,genres:s.default.PropTypes.array.isRequired},getDefaultProps:function(){return{favoriteGenres:[]}},onSubmit:function(e){p.default.submitSelectedGenres(),c.default.closeModal(),e.preventDefault()},renderGenreCheckboxes:function(){var t=this;return n("div",{className:"gr-genresForm__checkBoxes"},void 0,i.default.map(this.props.genres,function(e){return n(d.default,{genre:e.name,isFavorited:i.default.includes(t.state.favoriteGenresFormStore.selectedGenres,e.name)},e.name)}))},render:function(){return n("div",{className:"gr-genresForm"},void 0,n("div",{className:"gr-genresForm__title"},void 0,"Follow Your Favorite Genres"),n("div",{className:"gr-genresForm__description"},void 0,"We use your favorite genres to make better book recommendations and tailor what you see in your Updates feed."),n("form",{action:"/user/edit_fav_genres","data-remote":"true",method:"post"},void 0,this.renderGenreCheckboxes(),n("button",{type:"submit",onClick:this.onSubmit,className:"gr-button gr-button--large"},void 0,"Save")))}})},{"../react_actions/favorite_genres_form_actions":33,"../react_stores/favorite_genres_form_store":246,"./../react_actions/modal_actions":38,"./genre_checkbox":107,"./gr_component_factory":108,lodash:"lodash",react:"react",reflux:"reflux"}],99:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("./gr_component_factory")),i=o(e("./dot_separated_elements")),a=o(e("react")),l=o(e("classnames")),d=o(e("./click_tracking_wrapper")),c=e("../modules/ads/click_tracking_helper");r.default=s.default.createClass({displayName:"FeaturedContentBlog",propTypes:{blog:a.default.PropTypes.shape({likeCount:a.default.PropTypes.number.isRequired,commentCount:a.default.PropTypes.number.isRequired,imageUrl:a.default.PropTypes.string.isRequired,blogUrl:a.default.PropTypes.string.isRequired,title:a.default.PropTypes.string.isRequired}).isRequired,isMobile:a.default.PropTypes.bool,isInline:a.default.PropTypes.bool},defaultProps:{isMobile:!1,isInline:!1},renderImage:function(){var e=(0,l.default)("featuredContentImageBody__imageLink",{"featuredContentImageBody__imageLink--inline":this.props.isInline}),t=(0,l.default)("featuredContentImageBody__image",{featuredContentImageBody__imageMobile:this.props.isMobile});if(this.props.blog.imageUrl){t=n("a",{className:e,href:this.props.blog.blogUrl},void 0,n("img",{className:t,src:this.props.blog.imageUrl,alt:""+this.props.blog.title}));return n(d.default,{trackingOptions:c.TRACKED_CLASSES_PREMIUM_CAMPAIGN.fcm_blog_image,children:t})}return null},renderTitle:function(){var e=(0,l.default)("featuredContentImageBody__title",{"featuredContentImageBody__title--mobile":this.props.isMobile,"featuredContentImageBody__title--inline":this.props.isInline}),e=n("a",{href:this.props.blog.blogUrl,className:e},void 0,this.props.blog.title);return n(d.default,{trackingOptions:c.TRACKED_CLASSES_PREMIUM_CAMPAIGN.fcm_blog_title,children:e})},renderLikesText:function(e){return n("span",{className:"gr-metaText featuredContentImageBody__likes"},void 0,e," likes")},renderCommentsText:function(e){return n("span",{className:"gr-metaText featuredContentImageBody__comments"},void 0,e," comments")},renderReadMore:function(){var e=(0,l.default)("gr-button","featuredContentImageBody__button",{"featuredContentImageBody__button--mobile":this.props.isMobile,"featuredContentImageBody__button--inline":this.props.isInline}),e=n("a",{href:this.props.blog.blogUrl,className:e},void 0,"Read More");return n(d.default,{trackingOptions:c.TRACKED_CLASSES_PREMIUM_CAMPAIGN.fcm_blog_button,children:e})},renderLikesAndComments:function(){return n("div",{className:"featuredContentImageBody__likesAndComments"},void 0,this.renderLikesAndCommentsText())},renderLikesAndCommentsText:function(){var e=this.props.blog,t=this.renderLikesText(e.likeCount),r=this.renderCommentsText(e.commentCount);return e.likeCount&&e.commentCount?n(i.default,{elements:[t,r]}):e.likeCount?t:e.commentCount?r:null},render:function(){return this.props.isInline?n("div",{className:"featuredContentImageBody--inline genreFeatureContainer"},void 0,this.renderImage(),n("div",{},void 0,this.renderTitle(),this.renderLikesAndComments(),this.renderReadMore())):n("div",{className:"featuredContentImageBody genreFeatureContainer"},void 0,this.renderTitle(),this.renderImage(),this.renderLikesAndComments(),this.renderReadMore())}})},{"../modules/ads/click_tracking_helper":2,"./click_tracking_wrapper":82,"./dot_separated_elements":89,"./gr_component_factory":108,classnames:"classnames",react:"react"}],100:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},s=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var i=o(e("./gr_component_factory")),a=o(e("./book")),l=o(e("./book_description")),d=o(e("react")),c=o(e("./click_tracking_wrapper")),p=o(e("classnames")),f=e("../modules/ads/click_tracking_helper");r.default=i.default.createClass({displayName:"FeaturedContentBook",propTypes:{book:d.default.PropTypes.object.isRequired,isMobile:d.default.PropTypes.bool,isInline:d.default.PropTypes.bool},defaultProps:{isMobile:!1,isInline:!1},renderImage:function(){var e=s("img",{alt:this.props.book.title,src:this.props.book.imageUrl,className:(0,p.default)("featuredContentBook__imageMobile")}),e=s("a",{href:this.props.book.bookCoverUrl||this.props.book.bookUrl,className:(0,p.default)("featuredContentBook__imageLinkMobile")},void 0,e);return s(c.default,{trackingOptions:f.TRACKED_CLASSES_PREMIUM_CAMPAIGN.fcm_book_image,children:e})},renderDescription:function(){return this.props.book.description?s(l.default,{bookDescription:this.props.book.description,className:(0,p.default)("featuredContentBook__description"),bookDescriptionTargetingData:f.TRACKED_CLASSES_PREMIUM_CAMPAIGN.fcm_book_description}):null},renderLearnMore:function(){var e=(0,p.default)("gr-button","featuredContentBook__button",{"featuredContentBook__button--mobile":this.props.isMobile,"featuredContentBook__button--inline":this.props.isInline}),e=s("a",{href:this.props.book.bookUrl,className:e},void 0,"Learn more");return s(c.default,{trackingOptions:f.TRACKED_CLASSES_PREMIUM_CAMPAIGN.fcm_book_button,children:e})},render:function(){return this.props.isMobile?s("div",{className:(0,p.default)("featuredContentBook","featuredContentBook--mobile")},void 0,this.renderImage(),this.renderDescription(),this.renderLearnMore()):s("div",{className:"featuredContentBook"},void 0,d.default.createElement(a.default,n({},this.props.book,{bookImageTrackingData:f.TRACKED_CLASSES_PREMIUM_CAMPAIGN.fcm_book_image,bookTitleTrackingData:f.TRACKED_CLASSES_PREMIUM_CAMPAIGN.fcm_book_title,authorLinkTrackingData:f.TRACKED_CLASSES_PREMIUM_CAMPAIGN.fcm_book_author}),this.renderDescription(),this.renderLearnMore()))}})},{"../modules/ads/click_tracking_helper":2,"./book":73,"./book_description":75,"./click_tracking_wrapper":82,"./gr_component_factory":108,classnames:"classnames",react:"react"}],101:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("./gr_component_factory")),i=o(e("react")),a=o(e("classnames")),l=o(e("./click_tracking_wrapper")),d=e("../modules/ads/click_tracking_helper");r.default=s.default.createClass({displayName:"FeaturedContentGenre",propTypes:{genre:i.default.PropTypes.shape({imageUrl:i.default.PropTypes.string.isRequired,genreUrl:i.default.PropTypes.string.isRequired,tagline:i.default.PropTypes.string.isRequired}).isRequired,isMobile:i.default.PropTypes.bool,isInline:i.default.PropTypes.bool},defaultProps:{isMobile:!1,isInline:!1},renderImage:function(){var e=(0,a.default)("featuredContentImageBody__image",{featuredContentImageBody__imageMobile:this.props.isMobile}),t=(0,a.default)("featuredContentImageBody__imageLink",{"featuredContentImageBody__imageLink--inline":this.props.isInline});if(this.props.genre.imageUrl){e=n("a",{className:t,href:this.props.genre.genreUrl},void 0,n("img",{className:e,src:this.props.genre.imageUrl,alt:""+this.props.genre.tagline}));return n(l.default,{trackingOptions:d.TRACKED_CLASSES_PREMIUM_CAMPAIGN.fcm_genre_image,children:e})}return null},renderTitle:function(){var e=this.props.isMobile?(0,a.default)("featuredContentImageBody__title","featuredContentImageBody__title--mobile"):"featuredContentImageBody__title",e=n("a",{href:this.props.genre.genreUrl,className:e},void 0,this.props.genre.tagline);return n(l.default,{trackingOptions:d.TRACKED_CLASSES_PREMIUM_CAMPAIGN.fcm_genre_title,children:e})},renderCTAButton:function(){var e=(0,a.default)("gr-button gr-microsite-link",{featuredContentImageBody__button:this.props.isMobile,"u-marginTopMedium":!this.props.isInline}),e=n("a",{href:this.props.genre.genreUrl,className:e},void 0,"Learn More");return n(l.default,{trackingOptions:d.TRACKED_CLASSES_PREMIUM_CAMPAIGN.fcm_genre_button,children:e})},render:function(){return this.props.isInline?n("div",{className:"featuredContentImageBody--inline genreFeatureContainer"},void 0,this.renderImage(),n("div",{},void 0,this.renderTitle(),this.renderCTAButton())):n("div",{className:"featuredContentImageBody genreFeatureContainer"},void 0,this.renderTitle(),this.renderImage(),this.props.isMobile?this.renderCTAButton():null)}})},{"../modules/ads/click_tracking_helper":2,"./click_tracking_wrapper":82,"./gr_component_factory":108,classnames:"classnames",react:"react"}],102:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},s=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var i=o(e("./gr_component_factory")),a=o(e("./book")),l=o(e("react")),d=o(e("./time/relative_time")),c=o(e("./user_content/expandable_html")),p=o(e("./shared/gr_prop_types")),f=o(e("./click_tracking_wrapper")),h=e("../modules/ads/click_tracking_helper");r.default=i.default.createClass({displayName:"FeaturedContentGiveaway",propTypes:{giveaway:l.default.PropTypes.shape({book:l.default.PropTypes.object.isRequired,description:p.default.expandableHtml().isRequired,endAt:l.default.PropTypes.string.isRequired,giveawayUrl:l.default.PropTypes.string.isRequired}).isRequired,isMobile:l.default.PropTypes.bool},defaultProps:{isMobile:!1},render:function(){var e=this.props.giveaway;return s("div",{className:"featuredContentGiveaway"},void 0,l.default.createElement(a.default,n({},e.book,{bookImageTrackingData:h.TRACKED_CLASSES_PREMIUM_CAMPAIGN.fcm_giveaway_image,bookTitleTrackingData:h.TRACKED_CLASSES_PREMIUM_CAMPAIGN.fcm_giveaway_title,authorLinkTrackingData:h.TRACKED_CLASSES_PREMIUM_CAMPAIGN.fcm_giveaway_author,bemModifiers:this.props.isMobile?"mobile":""}),l.default.createElement(c.default,n({},e.description,{className:"featuredContentGiveaway__description"})),s("div",{className:"featuredContentGiveaway__expiration gr-metaText"},void 0,"Ends ",s(d.default,{time:e.endAt,longFormat:!0})),s(f.default,{trackingOptions:h.TRACKED_CLASSES_PREMIUM_CAMPAIGN.fcm_giveaway_button},void 0,s("a",{href:e.giveawayUrl,className:"gr-button"},void 0,"Learn more"))))}})},{"../modules/ads/click_tracking_helper":2,"./book":73,"./click_tracking_wrapper":82,"./gr_component_factory":108,"./shared/gr_prop_types":179,"./time/relative_time":199,"./user_content/expandable_html":203,react:"react"}],103:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,s=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var n=o(e("./gr_component_factory")),i=o(e("react")),a=e("lodash"),l=o(e("./click_tracking_wrapper")),d=e("../modules/ads/click_tracking_helper"),c=o(e("classnames"));r.default=n.default.createClass({displayName:"FeaturedContentList",propTypes:{list:i.default.PropTypes.shape({listUrl:i.default.PropTypes.string.isRequired,title:i.default.PropTypes.string.isRequired,topBooksCovers:i.default.PropTypes.array.isRequired}).isRequired,isMobile:i.default.PropTypes.bool,isInline:i.default.PropTypes.bool},defaultProps:{isMobile:!1,isInline:!1},renderBookCovers:function(){var t=this,r=this.props.isMobile?"featuredContentList__bookCoverImage--allowOverlap":"featuredContentList__bookCoverImage--noOverlap",e=(0,c.default)("featuredContentList__bookCovers",{"featuredContentList__bookCovers--inline":this.props.isInline});return s("div",{className:e},void 0,s(l.default,{trackingOptions:d.TRACKED_CLASSES_PREMIUM_CAMPAIGN.fcm_list_books},void 0,s("a",{href:this.props.list.listUrl},void 0,(0,a.map)(this.props.list.topBooksCovers,function(e){return s("div",{className:"featuredContentList__bookCoverContainer"},e,s("img",{src:e,alt:t.props.list.title,className:r}))}))))},renderCTA:function(){return this.props.isMobile?s(l.default,{trackingOptions:d.TRACKED_CLASSES_PREMIUM_CAMPAIGN.fcm_list_button},void 0,s("a",{className:"gr-button gr-button--fullWidth u-marginBottomSmall u-marginTopSmall",href:this.props.list.listUrl},void 0,"View list")):null},render:function(){var e=this.props.list,t=(0,c.default)("featuredContentList",{"featuredContentList--inline":this.props.isInline}),r=(0,c.default)("u-bold featuredContentList__title",{"featuredContentList__title--inline":this.props.isInline}),o=(0,c.default)("u-bold featuredContentList__listDetailsContainer",{"featuredContentList__listDetailsContainer--inline":this.props.isInline}),n=(0,c.default)("u-bold featuredContentList__listDetails",{"featuredContentList__listDetails--inline":this.props.isInline});return s("div",{className:t},void 0,this.renderBookCovers(),s(l.default,{trackingOptions:d.TRACKED_CLASSES_PREMIUM_CAMPAIGN.fcm_list_title},void 0,s("a",{href:e.listUrl,className:r},void 0,e.title)),s("div",{className:o},void 0,s("div",{className:n},void 0,e.numBooks.toLocaleString()," books Â· ",e.numVoters.toLocaleString()," voters")),this.renderCTA())}})},{"../modules/ads/click_tracking_helper":2,"./click_tracking_wrapper":82,"./gr_component_factory":108,classnames:"classnames",lodash:"lodash",react:"react"}],104:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("./gr_component_factory")),i=o(e("react")),a=o(e("./featured_content_blog")),l=o(e("./featured_content_book")),d=o(e("./featured_content_list")),c=o(e("./featured_content_genre")),p=o(e("./featured_content_giveaway")),f=o(e("./sponsored_footer")),h=o(e("classnames"));r.default=s.default.createClass({displayName:"FeaturedContentModule",propTypes:{type:i.default.PropTypes.string.isRequired,resource:i.default.PropTypes.object.isRequired,sponsorName:i.default.PropTypes.string,isSponsored:i.default.PropTypes.bool,isMobile:i.default.PropTypes.bool,hasBottomBorder:i.default.PropTypes.bool,isInline:i.default.PropTypes.bool},defaultProps:{isMobile:!1,isInline:!1,hasBottomBorder:!1},headerText:function(){switch(this.props.type){case"Blog":return"Featured Blog Post";case"Book":return"Featured Book";case"Giveaway":return"Featured Giveaway";case"List":return"Featured List";case"Genre":return"Featured Genre";default:return"Featured Content"}},renderContent:function(){switch(this.props.type){case"Blog":return this.renderBlog();case"Book":return this.renderBook();case"Giveaway":return this.renderGiveaway();case"List":return this.renderList();case"Genre":return this.renderGenre();default:return null}},renderHeader:function(){if(this.props.isMobile)return n("h3",{className:"gr-h3"},void 0,this.headerText());var e=(0,h.default)("featuredContentModule__header",{"featuredContentModule__header--inline":this.props.isInline});return n("div",{className:e},void 0,this.headerText())},renderFooter:function(){return this.props.isSponsored?n(f.default,{isSponsored:!0,sponsoredName:this.props.sponsorName}):null},renderBlog:function(){return n(a.default,{blog:this.props.resource,isMobile:this.props.isMobile,isInline:this.props.isInline})},renderBook:function(){return n(l.default,{book:this.props.resource,isMobile:this.props.isMobile,isInline:this.props.isInline})},renderGiveaway:function(){return n(p.default,{giveaway:this.props.resource,isMobile:this.props.isMobile})},renderList:function(){return n(d.default,{list:this.props.resource,isMobile:this.props.isMobile,isInline:this.props.isInline})},renderGenre:function(){return n(c.default,{genre:this.props.resource,isMobile:this.props.isMobile,isInline:this.props.isInline})},render:function(){var e=(0,h.default)("featuredContentModule",{"featuredContentModule--mobile":this.props.isMobile,"featuredContentModule--inline":this.props.isInline}),t="";return this.props.isMobile&&(t=this.props.hasBottomBorder?"featuredContentBorder__underline":"featuredContentBorder__overline"),n("div",{className:t},void 0,n("section",{className:e},void 0,this.renderHeader(),this.renderContent(),this.renderFooter()))}})},{"./featured_content_blog":99,"./featured_content_book":100,"./featured_content_genre":101,"./featured_content_giveaway":102,"./featured_content_list":103,"./gr_component_factory":108,"./sponsored_footer":195,classnames:"classnames",react:"react"}],105:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=o(e("../gr_component_factory")),a=o(e("classnames"));r.default=i.default.createClass({displayName:"FlagForAbuseLink",propTypes:{flagForAbuseUrl:s.default.PropTypes.string.isRequired},render:function(){var e=(0,a.default)("gr-metaText","gr-hyperlink--naked","gr-hyperlink","gr-flag");return n("a",{href:this.props.flagForAbuseUrl,className:e},void 0,"Flag")}})},{"../gr_component_factory":108,classnames:"classnames",react:"react"}],106:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=e("lodash"),a=o(e("classnames")),l=o(e("./close_button")),d={ERROR:"error",INFO:"info",NOTICE_DEPRECATED:"notice",SUCCESS:"success",WARNING:"warning"};r.default=s.default.createClass({displayName:"FlashMessage",propTypes:{category:s.default.PropTypes.oneOf((0,i.values)(d)),message:s.default.PropTypes.string.isRequired,dismissable:s.default.PropTypes.bool},getDefaultProps:function(){return{undismissable:!1}},getInitialState:function(){return{isVisible:!0}},hideMessage:function(){this.setState({isVisible:!1})},flashMessageMarkup:function(){return{__html:this.props.message}},renderCloseButton:function(){return this.props.undismissable?void 0:n(l.default,{action:this.hideMessage,className:"gr-flashMessage__dismissButton"})},render:function(){var e=this.props,t=e.category;if(e.message,function(e,t){var r,o={};for(r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(o[r]=e[r])}(e,["category","message"]),(0,i.isEmpty)(this.props.message))return null;t=(0,a.default)("gr-flashMessage",{"gr-flashMessage--dismissed":!this.state.isVisible,"gr-flashMessage--error":t===d.ERROR,"gr-flashMessage--info":t===d.INFO,"gr-flashMessage--warning":t===d.WARNING,"gr-flashMessage--success":t===d.SUCCESS});return n("div",{className:t,role:"alert"},void 0,this.renderCloseButton(),n("span",{dangerouslySetInnerHTML:this.flashMessageMarkup()}))}})},{"./close_button":83,classnames:"classnames",lodash:"lodash",react:"react"}],107:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=o(e("./gr_component_factory")),a=o(e("classnames")),l=o(e("../react_actions/favorite_genres_form_actions"));r.default=i.default.createClass({displayName:"GenreCheckbox",propTypes:{genre:s.default.PropTypes.string,isFavorited:s.default.PropTypes.bool.isRequired},onCheckboxChange:function(){this.props.isFavorited?l.default.deselectFavoriteGenre(this.props.genre):l.default.selectFavoriteGenre(this.props.genre)},render:function(){var e=(0,a.default)("gr-genresForm__genreLabel",{"gr-genresForm__genreLabel--selected":this.props.isFavorited});return n("label",{className:e},void 0,n("input",{name:"favorites["+this.props.genre+"]",type:"hidden",value:"false"}),s.default.createElement("input",{name:"favorites["+this.props.genre+"]",type:"checkbox",value:"true","data-genre":this.props.genre,ref:"checkbox",defaultChecked:this.props.isFavorited,onChange:this.onCheckboxChange}),n("span",{className:"u-verticalAlignMiddle u-marginLeftTiny"},void 0,this.props.genre))}})},{"../react_actions/favorite_genres_form_actions":33,"./gr_component_factory":108,classnames:"classnames",react:"react"}],108:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,i=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});function n(e,t){return s=e.mixins||[],e.mixins=s.concat(m),"production"!==h.default.TEST&&(o=t,n=(r=e).render,o=(0,a.merge)({},g,o),r.render=function(){try{return n.apply(this,arguments)}catch(e){return _.default.notifyException(e,"Failed to render "+r.displayName),o.showErrorMessage?i(f.default,{componentName:r.displayName}):null}}),e;var r,o,n,s}var a=e("lodash"),s=o(e("react")),l=o(e("../react_mixins/bem_modifiers")),d=o(e("../react_mixins/deploy_service")),c=o(e("react-addons-pure-render-mixin")),p=o(e("../react_mixins/tracking_data_attributes_mixin")),f=o(e("./error_message")),h=o(e("../modules/env_utils")),_=o(e("../modules/gr_error_reporting")),m=[c.default,l.default,d.default,p.default],g={showErrorMessage:"production"===h.default.DEVELOPMENT};r.default={createClass:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return function(e){if((0,a.isEmpty)(e))throw new Error("GrError: Missing component name. Please make sure `displayName` attribute is defined while creating a React class using GrComponentFactory.createClass.")}(e.displayName),s.default.createClass(n(e,t))}}},{"../modules/env_utils":13,"../modules/gr_error_reporting":15,"../react_mixins/bem_modifiers":232,"../react_mixins/deploy_service":233,"../react_mixins/tracking_data_attributes_mixin":237,"./error_message":92,lodash:"lodash",react:"react","react-addons-pure-render-mixin":"react-addons-pure-render-mixin"}],109:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=o(e("../gr_component_factory")),a=o(e("../modal_trigger")),l=o(e("../modal")),d=o(e("../spinner")),c=e("../../modules/ajax/ajax_helper");r.default=i.default.createClass({displayName:"PreviewBroadcast",propTypes:{previewBroadcastURL:s.default.PropTypes.string.isRequired},getInitialState:function(){return{fetching:!1}},requestPreview:function(e,t){var r=this;(0,c.httpRequest)(this.props.previewBroadcastURL,{method:"GET",data:{message:{subject:e,body:t}}}).done(function(e){r.setState({modalHTML:{__html:e},fetching:!1})}).fail(function(){r.setState({modalHTML:{__html:"<div>There was an error processing your request.</div>"},fetching:!1})})},handlePreview:function(){var e=this,t=document.getElementById("message_body").value,r=document.getElementById("message_subject").value;this.setState({fetching:!0},function(){return e.requestPreview(r,t)})},renderModal:function(){return this.state.fetching?null:n(l.default,{id:"previewBroadcast",centered:!0,bemModifiers:"previewBroadcast"},void 0,n("div",{className:"modalMessageBox"},void 0,n("h3",{className:"modalMessageBox__headerText"},void 0,"Message Preview"),n("div",{dangerouslySetInnerHTML:this.state.modalHTML})))},renderModalTrigger:function(){return this.state.fetching?n(d.default,{isSmall:!0}):n(a.default,{id:"previewBroadcast"},void 0,n("button",{className:"gr-buttonAsLink previewBroadcast__linkText",onClick:this.handlePreview},void 0,"(preview)"))},render:function(){var e=this.renderModal(),t=this.renderModalTrigger();return n("div",{className:"previewBroadcast"},void 0,n("div",{className:"previewBroadcast__openPreviewContainer"},void 0,t,e))}})},{"../../modules/ajax/ajax_helper":4,"../gr_component_factory":108,"../modal":142,"../modal_trigger":143,"../spinner":194,react:"react"}],110:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0}),r.BrowseMenu=void 0;function s(e){var t=e.signedIn,r=e.favoriteGenres,o=e.genres,e=function(e){return"siteHeader__spotlight siteHeader__spotlight--"+e};return t?(0,a.isEmpty)(r)?n("div",{className:e("withoutSubMenu"),onClick:function(e){return(0,l.trackNavEngageClick)(e,"Browse_Spotlight")}},void 0,n(d.default,{genres:o})):n("div",{className:e("browseMenu"),onClick:function(e){return(0,l.trackNavEngageClick)(e,"Browse_Spotlight")}},void 0,n(c.default,{favoriteGenres:r})):n("div",{className:e("withoutSubMenu"),onClick:function(e){return(0,l.trackNavEngageClick)(e,"Browse_Spotlight")}},void 0,n(p.default,{genres:o}))}var i=e("react"),a=e("lodash"),l=e("../../modules/click_and_view_tracking"),d=o(e("./favorite_genres_pane")),c=o(e("./featured_genres")),p=o(e("./genre_list")),f=o(e("../menu_link")),h=o(e("./primary_nav_menu")),_=o(e("../../react_actions/featured_genres_actions"));s.propTypes={signedIn:i.PropTypes.bool,favoriteGenres:i.PropTypes.array,genres:i.PropTypes.array.isRequired};e=r.BrowseMenu=function(e){return n(h.default,{tabName:"siteHeaderBrowseMenu",trigger:n("span",{},void 0,"Browse â–¾"),fallbackUrl:e.browseUrl,bemModifiers:["siteHeaderBrowseMenu"],showingFavoriteGenres:(0,a.isEmpty)(e.favoriteGenres),onShowCallback:function(){(0,l.trackNavEngage)("BrowseShow"),_.default.trackMenuImpression(),_.default.requestFeaturedBooks()}},void 0,n("div",{className:"siteHeader__browseMenuDropdown"},void 0,n("ul",{className:"siteHeader__subNav"},void 0,n(f.default,{href:e.recommendationsUrl,linkText:"Recommendations",linkClass:"siteHeader__subNavLink"}),n(f.default,{href:e.choiceAwardsUrl,linkText:"Choice Awards",linkClass:"siteHeader__subNavLink"}),n(f.default,{href:e.genresIndexUrl,linkText:"Genres",linkClass:"siteHeader__subNavLink siteHeader__subNavLink--genresIndex"}),n(f.default,{href:e.giveawayUrl,linkText:"Giveaways",linkClass:"siteHeader__subNavLink"}),n(f.default,{href:e.newReleasesUrl,linkText:"New Releases",linkClass:"siteHeader__subNavLink"}),n(f.default,{href:e.listUrl,linkText:"Lists",linkClass:"siteHeader__subNavLink"}),n(f.default,{href:e.exploreUrl,linkText:"Explore",linkClass:"siteHeader__subNavLink"}),n(f.default,{href:e.newsUrl,linkText:"News & Interviews",linkClass:"siteHeader__subNavLink"})),React.createElement(s,e)))};e.propTypes={adId:i.PropTypes.string,browseUrl:i.PropTypes.string.isRequired,choiceAwardsUrl:i.PropTypes.string.isRequired,genresIndexUrl:i.PropTypes.string.isRequired,exploreUrl:i.PropTypes.string.isRequired,giveawayUrl:i.PropTypes.string.isRequired,listUrl:i.PropTypes.string.isRequired,newReleasesUrl:i.PropTypes.string.isRequired,recommendationsUrl:i.PropTypes.string.isRequired,newsUrl:i.PropTypes.string.isRequired},r.default=e},{"../../modules/click_and_view_tracking":8,"../../react_actions/featured_genres_actions":34,"../menu_link":141,"./favorite_genres_pane":112,"./featured_genres":113,"./genre_list":115,"./primary_nav_menu":124,lodash:"lodash",react:"react"}],111:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=(o(e("reflux")),e("../gr_component_factory")),i=o(i),a=o(e("../menu_link")),l=o(e("./primary_nav_menu")),d=e("../../modules/click_and_view_tracking");r.default=i.default.createClass({displayName:"CommunityMenu",propTypes:{communityUrl:s.default.PropTypes.string.isRequired,featuredAskAuthorUrl:s.default.PropTypes.string.isRequired,groupsUrl:s.default.PropTypes.string.isRequired,discussionsUrl:s.default.PropTypes.string.isRequired,quotesUrl:s.default.PropTypes.string.isRequired,eventUrl:s.default.PropTypes.string,peopleUrl:s.default.PropTypes.string,quizzesUrl:s.default.PropTypes.string,storiesUrl:s.default.PropTypes.string,triviaUrl:s.default.PropTypes.string},renderMenuLink:function(e,t){return e?n(a.default,{href:e,linkText:t,linkClass:"siteHeader__subNavLink"}):null},render:function(){var e=n("span",{},void 0,"Community â–¾");return n(l.default,{tabName:"siteHeaderCommunityMenu",trigger:e,fallbackUrl:this.props.communityUrl,onShowCallback:function(){return(0,d.trackNavEngage)("CommunityShow")}},void 0,n("ul",{className:"siteHeader__subNav"},void 0,this.renderMenuLink(this.props.groupsUrl,"Groups"),this.renderMenuLink(this.props.discussionsUrl,"Discussions"),this.renderMenuLink(this.props.quotesUrl,"Quotes"),this.renderMenuLink(this.props.featuredAskAuthorUrl,"Ask the Author"),this.renderMenuLink(this.props.triviaUrl,"Trivia"),this.renderMenuLink(this.props.quizzesUrl,"Quizzes"),this.renderMenuLink(this.props.storiesUrl,"Creative Writing"),this.renderMenuLink(this.props.peopleUrl,"People"),this.renderMenuLink(this.props.eventUrl,"Events")))}})},{"../../modules/click_and_view_tracking":8,"../gr_component_factory":108,"../menu_link":141,"./primary_nav_menu":124,react:"react",reflux:"reflux"}],112:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=o(e("../gr_component_factory")),a=o(e("../modal_trigger"));r.default=i.default.createClass({displayName:"FavoriteGenresPane",propTypes:{favoriteGenres:s.default.PropTypes.array,genres:s.default.PropTypes.array.isRequired},render:function(){return n("div",{className:"favoriteGenresPane"},void 0,n("div",{className:"favoriteGenresPane__title"},void 0,"What do you like to read?"),n("div",{className:"favoriteGenresPane__description"},void 0,"Choose your favorite genres to get personalized book recommendations."),n("div",{className:"favoriteGenresPane__buttonContainer"},void 0,n(a.default,{id:"favGenres"},void 0,n("button",{className:"gr-button gr-button--dark"},void 0,"Choose Favorite Genres"))),n("a",{href:"/genres",className:"favoriteGenresPane__browseGenres"},void 0,"Browse Genres"))}})},{"../gr_component_factory":108,"../modal_trigger":143,react:"react"}],113:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("lodash")),i=o(e("reflux")),a=o(e("../gr_component_factory")),l=o(e("./featured_genres_list")),d=o(e("../spinner")),c=o(e("../../react_stores/featured_genres_store")),p=o(e("../../react_stores/user_agent_capabilities_store"));o(e("./../tab_content")),r.default=a.default.createClass({displayName:"FeaturedGenres",mixins:[i.default.connect(c.default,"featuredGenres"),i.default.connect(p.default,"userAgentCapabilities")],render:function(){return this.state.featuredGenres.featuredGenreBookInfo?n("div",{className:"featuredGenres"},void 0,n("span",{className:"featuredGenres__genreList"},void 0,n(l.default,{genres:s.default.pluck(this.state.featuredGenres.featuredGenreBookInfo,"genre")}))):this.state.featuredGenres.errorMessage?n("span",{},void 0,this.state.featuredGenres.errorMessage):n("div",{className:"featuredGenres featuredGenres--sparse"},void 0,n(d.default,{}))}})},{"../../react_stores/featured_genres_store":248,"../../react_stores/user_agent_capabilities_store":260,"../gr_component_factory":108,"../spinner":194,"./../tab_content":198,"./featured_genres_list":114,lodash:"lodash",reflux:"reflux"}],114:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("classnames")),i=o(e("reflux")),a=o(e("react")),l=e("lodash"),d=o(e("../dropdown")),c=o(e("../gr_component_factory")),p=o(e("./../tab")),e=o(e("../../react_stores/user_agent_capabilities_store"));r.default=c.default.createClass({displayName:"FeaturedGenresList",mixins:[i.default.connect(e.default,"userAgentCapabilities")],propTypes:{adId:a.default.PropTypes.string,genres:a.default.PropTypes.array.isRequired},onClick:function(e){e.preventDefault()},allGenresLink:function(){return n("li",{role:"menuitem",className:"genreList__genre"},"allGenres",n("a",{href:"/genres",className:"siteHeader__subNavLink"},void 0,"All Genres"))},renderGenreLink:function(e){var t=(0,s.default)(["genreList__genreLink","gr-hyperlink","gr-hyperlink--naked"]),t=n("a",{href:e.url,className:t},void 0,e.name);return!0===this.state.userAgentCapabilities.touch?t:n(p.default,{group:"featuredGenres",name:"featuredGenre-"+e.name,triggerEventType:d.default.TriggerEventTypes.HOVER},void 0,t)},renderFavoritesList:function(){var r=this;return n("div",{className:"featuredGenres__list genreList genreList--sidebar"},void 0,n("div",{className:"siteHeader__title siteHeader__heading"},void 0,n("span",{className:"featuredGenres__listTitle"},void 0,"Favorite Genres")),n("ul",{},void 0,(0,l.map)((0,l.take)(this.props.genres,8),function(e,t){return n("li",{role:"menuitem",className:"genreList__genre"},e.name,r.renderGenreLink(e))}),this.allGenresLink()))},render:function(){return n("div",{},void 0,this.renderFavoritesList())}})},{"../../react_stores/user_agent_capabilities_store":260,"../dropdown":91,"../gr_component_factory":108,"./../tab":197,classnames:"classnames",lodash:"lodash",react:"react",reflux:"reflux"}],115:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("lodash")),e=o(e("../gr_component_factory"));r.default=e.default.createClass({displayName:"GenreList",renderMoreGenresLink:function(){return n("li",{role:"menuitem",className:"genreList__genre"},void 0,n("a",{href:"/genres",className:"genreList__genreLink gr-hyperlink gr-hyperlink--naked"},void 0,"More Genres"))},render:function(){for(var r=this,e=[],t=this.props.genres.slice(0);10*e.length<this.props.genres.length;)e.push(t.splice(0,10));var o=e.length;return n("div",{className:"genreListContainer"},void 0,n("div",{className:"siteHeader__heading siteHeader__title"},void 0,"Genres"),s.default.map(e,function(e,t){return n("ul",{className:"genreList"},"genreList"+t,s.default.map(e,function(e){return n("li",{role:"menuitem",className:"genreList__genre"},e.name,n("a",{href:e.url,className:"genreList__genreLink gr-hyperlink gr-hyperlink--naked"},void 0,e.name))}),o===t+1?r.renderMoreGenresLink():null)}))}})},{"../gr_component_factory":108,lodash:"lodash"}],116:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},s=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var i=o(e("../shared/cookies")),a=o(e("react")),l=o(e("../gr_component_factory")),d=o(e("classnames")),c=e("redux"),p=e("react-redux"),f=o(e("redux-logger")),h=e("lodash"),_=e("../../modules/shared/touch_not_ready_helper"),m=e("../../modules/click_and_view_tracking"),g=o(e("../favorite_genres_form")),v=o(e("../modal")),y=o(e("../modal_trigger")),b=o(e("./personal_nav")),k=e("./personal_nav_drawer"),S=o(k),P=o(e("./primary_nav_menus")),T=o(e("./profile_menu_jewel")),w=o(e("./header_logo")),N=e("../search/search_toggle"),C=o(N),R=o(e("./nav_search")),M=o(e("./primary_nav_separate_line")),x=o(e("../../react_reducers/header/header_reducer")),A=o(e("../../modules/env_utils")),e=[];A.default.isDevelopment()&&A.default.hasDom()&&e.push((0,f.default)());var I=(0,c.createStore)(x.default,{},c.applyMiddleware.apply(void 0,e));r.default=l.default.createClass({displayName:"Header",getInitialState:function(){return{scrolling:!1,userLikelyHasAccount:!1}},propTypes:{adId:a.default.PropTypes.string,autocomleteUrl:a.default.PropTypes.string,browseUrl:a.default.PropTypes.string,choiceAwardsUrl:a.default.PropTypes.string,communityUrl:a.default.PropTypes.string,eventUrl:a.default.PropTypes.string,discussionsUrl:a.default.PropTypes.string,favoriteGenres:a.default.PropTypes.array,friendIconUrl:a.default.PropTypes.string,genres:a.default.PropTypes.array.isRequired,genresIndexUrl:a.default.PropTypes.string,exploreUrl:a.default.PropTypes.string,giveawayUrl:a.default.PropTypes.string,groupsUrl:a.default.PropTypes.string,featuredAskAuthorUrl:a.default.PropTypes.string,helpUrl:a.default.PropTypes.string,homeUrl:a.default.PropTypes.string,listUrl:a.default.PropTypes.string,logo:a.default.PropTypes.shape({imageUrl:a.default.PropTypes.string,clickthroughUrl:a.default.PropTypes.string,altText:a.default.PropTypes.string}),messageIconUrl:a.default.PropTypes.string,myBooksUrl:a.default.PropTypes.string,myFriendsUrl:a.default.PropTypes.string,myGroupsUrl:a.default.PropTypes.string,myQuotesUrl:a.default.PropTypes.string,myReadingChallengeUrl:a.default.PropTypes.string,myRecsUrl:a.default.PropTypes.string,name:a.default.PropTypes.string,newReleasesUrl:a.default.PropTypes.string,notificationIconUrl:a.default.PropTypes.string,peopleUrl:a.default.PropTypes.string,preferences:a.default.PropTypes.object,profileImage:a.default.PropTypes.string,profileUrl:a.default.PropTypes.string,quizzesUrl:a.default.PropTypes.string,quotesUrl:a.default.PropTypes.string,recommendationsUrl:a.default.PropTypes.string,signedIn:a.default.PropTypes.bool,searchPath:a.default.PropTypes.string,signInUrl:a.default.PropTypes.string,signInWithReturnUrl:a.default.PropTypes.bool,signUpUrl:a.default.PropTypes.string,storiesUrl:a.default.PropTypes.string,tempFriendRequestCount:a.default.PropTypes.number,tempUnreadMessageCount:a.default.PropTypes.number,topFullImage:a.default.PropTypes.shape({clickthroughUrl:a.default.PropTypes.string,altText:a.default.PropTypes.string,backgroundColor:a.default.PropTypes.string,xs:a.default.PropTypes.object,md:a.default.PropTypes.object}),triviaUrl:a.default.PropTypes.string},componentDidMount:function(){"true"===i.default.get("likely_has_account")&&this.setState({userLikelyHasAccount:!0})},handleScrollBegin:function(){this.setState({scrolling:!0})},handleScrollEnd:function(){this.setState({scrolling:!1})},handleProfileModalTriggerClick:function(e){(0,_.acknowledgeEvent)(),(0,m.trackNavEngageClick)(e,"ProfileModalTrigger")},render:function(){return s(p.Provider,{store:I},void 0,s("header",{},void 0,this.renderTopFullImage(),s("div",{className:"siteHeader__topLine gr-box gr-box--withShadow"},void 0,s("div",{className:"siteHeader__contents"},void 0,s("div",{className:"siteHeader__topLevelItem siteHeader__topLevelItem--searchIcon"},void 0,s(C.default,{toggleType:N.SEARCH_TOGGLE_TYPES.ICON})),a.default.createElement(w.default,this.props.logo),s("nav",{className:"siteHeader__primaryNavInline"},void 0,a.default.createElement(P.default,this.props)),a.default.createElement(R.default,this.props),this.props.signedIn?this.renderPersonalNav():this.renderLoginLinks(),this.renderProfileDrawerTrigger(),this.renderModals(),this.renderPersonalNavDrawer())),a.default.createElement(M.default,this.props)))},renderPersonalNav:function(){return s("div",{className:"siteHeader__personal"},void 0,a.default.createElement(b.default,this.props))},renderPersonalNavDrawer:function(){return a.default.createElement(S.default,this.props)},renderProfileDrawerTrigger:function(){var t=this;if(this.props.signedIn){var e={viewableName:this.props.name,profileImage:this.props.profileImage,profileUrl:this.props.profileUrl};return s("div",{className:"siteHeader__topLevelItem siteHeader__topLevelItem--profileIcon"},void 0,s("span",{className:"headerPersonalNav","data-ux-click":!0,onClick:function(e){return t.handleProfileModalTriggerClick(e)}},void 0,s(y.default,{id:k.personalNavDrawerModalId},void 0,a.default.createElement(T.default,n({},this.props,{user:e})))))}e=(0,d.default)("gr-button","gr-button--dark");return this.state.userLikelyHasAccount?s("div",{className:"siteHeader__topLevelItem siteHeader__topLevelItem--signUp"},void 0,s("a",{href:this.getSignInUrl(),className:e,rel:"nofollow",onClick:function(e){return(0,m.trackNavEngageClick)(e,"SignIn")}},void 0,"Sign in")):s("div",{className:"siteHeader__topLevelItem siteHeader__topLevelItem--signUp"},void 0,s("a",{href:this.props.signUpUrl,className:e,rel:"nofollow",onClick:function(e){return(0,m.trackNavEngageClick)(e,"SignUp")}},void 0,"Sign up"))},getSignInUrl:function(){var e=A.default.getCurrentPath();return this.props.signInWithReturnUrl?this.props.signInUrl+"?returnurl="+e:this.props.signInUrl},renderLoginLinks:function(){return s("ul",{className:"siteHeader__personal"},void 0,s("li",{className:"siteHeader__topLevelItem siteHeader__topLevelItem--signedOut"},void 0,s("a",{href:this.getSignInUrl(),rel:"nofollow",className:"siteHeader__topLevelLink",onClick:function(e){return(0,m.trackNavEngageClick)(e,"SignIn")}},void 0,"Sign In")),s("li",{className:"siteHeader__topLevelItem siteHeader__topLevelItem--signedOut"},void 0,s("a",{href:this.props.signUpUrl,rel:"nofollow",className:"siteHeader__topLevelLink",onClick:function(e){return(0,m.trackNavEngageClick)(e,"Join")}},void 0,"Join")))},renderModals:function(){return this.props.signedIn?s(v.default,{id:"favGenres"},void 0,s(g.default,{favoriteGenres:this.props.favoriteGenres,genres:this.props.genres})):null},renderTopFullImage:function(){return(0,h.isEmpty)(this.props.topFullImage)?void 0:s("div",{className:"siteHeader__topFullImageContainer",style:{backgroundColor:this.props.topFullImage.backgroundColor}},void 0,s("a",{className:"siteHeader__topFullImageLink",href:this.props.topFullImage.clickthroughUrl},void 0,s("picture",{},void 0,s("source",{media:"(min-width: 768px)",srcSet:this.props.topFullImage.md["1x"]+" 1x, "+this.props.topFullImage.md["2x"]+" 2x"}),s("img",{alt:this.props.topFullImage.altText,className:"siteHeader__topFullImage",src:this.props.topFullImage.xs["1x"],srcSet:this.props.topFullImage.xs["2x"]+" 2x"}))))}})},{"../../modules/click_and_view_tracking":8,"../../modules/env_utils":13,"../../modules/shared/touch_not_ready_helper":21,"../../react_reducers/header/header_reducer":239,"../favorite_genres_form":98,"../gr_component_factory":108,"../modal":142,"../modal_trigger":143,"../search/search_toggle":173,"../shared/cookies":178,"./header_logo":117,"./nav_search":119,"./personal_nav":122,"./personal_nav_drawer":123,"./primary_nav_menus":125,"./primary_nav_separate_line":126,"./profile_menu_jewel":128,classnames:"classnames",lodash:"lodash",react:"react","react-redux":"react-redux",redux:"redux","redux-logger":"redux-logger"}],117:[function(e,t,r){"use strict";var u,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0}),r.CustomDoodleLogo=r.DefaultLogo=void 0;var s=e("react"),i=e("../../modules/click_and_view_tracking"),a=r.DefaultLogo=function(e){var t=e.clickthroughUrl,e=e.altText;return n("a",{href:t,className:"siteHeader__logo","aria-label":e,title:e,onClick:function(e){return(0,i.trackNavEngageClick)(e,"HeaderLogo")}})};a.propTypes={clickthroughUrl:s.PropTypes.string,altText:s.PropTypes.string};var l=r.CustomDoodleLogo=function(e){var t=e.imageUrl,r=e.clickthroughUrl,e=e.altText;return n("a",{href:r,className:"siteHeader__logo siteHeader__logo--doodle",onClick:function(e){return(0,i.trackNavEngageClick)(e,"HeaderLogo")}},void 0,n("picture",{},void 0,n("img",{src:t,alt:e})))};l.propTypes=o({},a.propTypes,{imageUrl:s.PropTypes.string});r.default=function(e){return e.imageUrl?React.createElement(l,e):React.createElement(a,e)}},{"../../modules/click_and_view_tracking":8,react:"react"}],118:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=o(e("lodash")),s=o(e("../gr_component_factory")),i=o(e("reflux")),a=o(e("./header")),l=o(e("../../react_stores/current_user_store")),e=o(e("../../react_stores/favorite_genres_store"));r.default=s.default.createClass({displayName:"HeaderStoreConnector",mixins:[i.default.connect(l.default,"currentUser"),i.default.connect(e.default,"favoriteGenres")],render:function(){var e=this.state.currentUser.currentUser,t=!n.default.isEmpty(e),r={adId:this.state.favoriteGenres.adId,signedIn:t,genres:this.state.favoriteGenres.allGenres,favoriteGenres:this.state.favoriteGenres.favoriteGenres};return t&&n.default.merge(r,e),n.default.merge(r,this.props),React.createElement(a.default,r)}})},{"../../react_stores/current_user_store":244,"../../react_stores/favorite_genres_store":247,"../gr_component_factory":108,"./header":116,lodash:"lodash",reflux:"reflux"}],119:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=o(e("../gr_component_factory")),a=e("../../analytics/url_tracking_params"),l=o(e("../../modules/env_utils")),d=o(e("../search/book_search")),c=o(e("../experimental/search/universal/universal_search"));r.default=i.default.createClass({displayName:"NavSearch",propTypes:{autocompleteUrl:s.default.PropTypes.string,autoFocus:s.default.PropTypes.bool,searchPath:s.default.PropTypes.string,bemModifiers:s.default.PropTypes.string,signedIn:s.default.PropTypes.bool,mobviousDeviceType:s.default.PropTypes.string},getDefaultProps:function(){return{autoFocus:!1,bemModifiers:"navbar"}},onSearchSelection:function(e){var t=null,t=this.isFeatureEnabled("universal_search")?e.destination+"?"+a.URLTrackingParams.BOOK_SHOW_INTERACTION_PARAM+"&"+a.URLTrackingParams.FROM_SEARCH_PARAM:e.bookUrl+"?"+a.URLTrackingParams.BOOK_SHOW_INTERACTION_PARAM+"&"+a.URLTrackingParams.FROM_SEARCH_PARAM;null!==e.qid&&(t=t.concat("&"+a.URLTrackingParams.SEARCH_IDENTIFIER_PARAM+"="+e.qid),null!==e.rank&&0<e.rank&&(t=t.concat("&"+a.URLTrackingParams.SEARCH_RANK_PARAM+"="+e.rank))),l.default.setLocationUrl(t)},render:function(){return this.isFeatureEnabled("universal_search")?n(c.default,{bemModifiers:this.props.bemModifiers,searchPath:this.props.searchPath,autocompleteUrl:this.props.autocompleteUrl,onChooseResult:this.onSearchSelection}):n(d.default,{autoFocus:this.props.autoFocus,bemModifiers:this.props.bemModifiers,searchPath:this.props.searchPath,autocompleteUrl:this.props.autocompleteUrl,signedIn:this.props.signedIn,deviceType:this.props.mobviousDeviceType,elasticsearchExperiment:this.props.elasticsearchExperiment,onChooseResult:this.onSearchSelection})}})},{"../../analytics/url_tracking_params":1,"../../modules/env_utils":13,"../experimental/search/universal/universal_search":96,"../gr_component_factory":108,"../search/book_search":169,react:"react"}],120:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("../gr_component_factory")),i=e("lodash"),a=e("../../modules/shared/image_registry"),l=o(e("../../modules/to_sentence")),d=o(e("../user/user_icon")),c=o(e("../time/relative_time")),p=o(e("../shape_icon"));r.default=s.default.createClass({displayName:"Notification",mixins:[l.default],propTypes:{notification:React.PropTypes.object.isRequired},userLink:function(e){return n("a",{href:e.profileUrl,className:"u-defaultType"},e.profileUrl,n("b",{},void 0,e.viewableName))},userLinks:function(e){var t=this,r=(0,i.map)(e.actors,function(e){return t.userLink(e)});return e.moreActors?this.sentenceJoin(r):this.toSentence(r)},renderActorIcon:function(e){return e.actor?n(d.default,{user:e.actor}):n(p.default,{imageUrl:(0,a.getImages)().notificationFromGRIcon||"",imageAlt:"Goodreads Notification"})},renderNewNotificationFlag:function(e){return e.viewed?void 0:n("small",{className:"gr-smallAlert u-marginRightTiny"},void 0,"New")},renderHistoryMessage:function(e){return e.historyMessage?n("small",{className:"gr-notification__historyMessage"},void 0,e.historyMessage):void 0},render:function(){var e=this.props.notification;return e.error?null:n("div",{className:"gr-mediaBox gr-notification"},void 0,n("div",{className:"gr-mediaBox__media u-marginRightMedium"},void 0,this.renderActorIcon(e)),n("div",{className:"gr-mediaBox__desc u-defaultType"},void 0,this.userLinks(e),!e.actor||e.moreActors?"":e.directlyAddressed?", ":" ",e.body+" ",e.resource?n("a",{className:"gr-hyperlink",href:e.resource.url},void 0,e.resource.text):null,n("div",{},void 0,this.renderNewNotificationFlag(e),n("small",{},void 0,n(c.default,{time:e.createdAt,longFormat:!0}))),n("div",{},void 0,this.renderHistoryMessage(e))))}})},{"../../modules/shared/image_registry":20,"../../modules/to_sentence":23,"../gr_component_factory":108,"../shape_icon":174,"../time/relative_time":199,"../user/user_icon":201,lodash:"lodash"}],121:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=o(e("lodash")),a=o(e("../gr_component_factory")),l=o(e("reflux")),d=o(e("../spinner")),c=o(e("../dropdown")),p=o(e("../../react_stores/notifications_store")),f=o(e("../../react_actions/notifications_actions")),h=o(e("./notification")),_=e("../../modules/click_and_view_tracking");r.default=a.default.createClass({displayName:"Notifications",mixins:[l.default.connect(p.default,"notificationsStore")],propTypes:{notificationIconUrl:s.default.PropTypes.string.isRequired,withDropdowns:s.default.PropTypes.bool},getDefaultProps:function(){return{withDropdowns:!0}},getStoreState:function(){return this.state.notificationsStore},generateKey:function(e){return e.actor?""+e.actor.profileUrl+e.createdAt:e.resource?""+e.resource.url+e.createdAt:""+e.body+e.createdAt},notificationsCountString:function(){var e=this.getStoreState();return e.unreadCount+(e.unreadCountMore?"+":"")},dropdownShowCallback:function(){(0,_.trackNavEngage)("NotificationsShow"),f.default.requestNotifications()},renderNotificationList:function(){var t=this,e=this.getStoreState(),r=e.notifications;return e.errorOccurred?n("div",{className:"dropdown__container\n                        gr-notifications\n                        gr-notifications--sparse"},void 0,n("span",{},void 0,"An error occurred loading your notifications")):i.default.isUndefined(r)?n("div",{className:"dropdown__container\n                        gr-notifications\n                        gr-notifications--sparse"},void 0,n(d.default,{})):i.default.isEmpty(r)?n("div",{className:"dropdown__container\n                        gr-notifications\n                        gr-notifications--sparse"},void 0,n("span",{},void 0,"No notifications")):n("section",{className:"dropdown__container"},void 0,n("a",{className:"u-displayBlock gr-hyperlink gr-hyperlink--noUnderline",href:"/notifications",onClick:function(e){return(0,_.trackNavEngageClick)(e,"Notifications_ViewAll")}},void 0,n("div",{className:"siteHeader__dropdownHeading"},void 0,n("h3",{className:"siteHeader__heading siteHeader__dropdownHeader"},void 0,"Notifications"),n("span",{},void 0,"View all notifications"))),n("div",{className:"gr-notifications gr-box gr-box--forceScrollBar",onClick:function(e){return(0,_.trackNavEngageClick)(e,"Notifications_List")}},void 0,i.default.map(r,function(e){return n(h.default,{notification:e},t.generateKey(e))})))},render:function(){var e=this,t=this.getStoreState(),t=n("span",{className:"headerPersonalNav__icon\n                       headerPersonalNav__icon--notifications","aria-label":"Notifications"},void 0,0<t.unreadCount?n("span",{className:"headerPersonalNav__flag"},void 0,this.notificationsCountString()):null);return this.props.withDropdowns?n("div",{},void 0,n(c.default,{trigger:t,triggerEventType:c.default.TriggerEventTypes.CLICK,fallbackUrl:this.props.notificationIconUrl,tooltipText:"Notifications",onShowCallback:function(){return e.dropdownShowCallback()},bemModifiers:"notifications",isInPersonalNav:"true"},void 0,this.renderNotificationList())):n("a",{href:this.props.notificationIconUrl,className:"headerPersonalNav",onClick:function(e){return(0,_.trackNavEngageClick)(e,"NotificationsLink")}},void 0,t)}})},{"../../modules/click_and_view_tracking":8,"../../react_actions/notifications_actions":40,"../../react_stores/notifications_store":252,"../dropdown":91,"../gr_component_factory":108,"../spinner":194,"./notification":120,lodash:"lodash",react:"react",reflux:"reflux"}],122:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},s=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var i=o(e("react")),a=o(e("lodash")),l=o(e("append-query")),d=o(e("../gr_component_factory")),c=e("../../modules/click_and_view_tracking"),p=e("../../analytics/url_tracking_params"),f=o(e("../dropdown")),h=o(e("./notifications")),_=o(e("./profile_menu")),m=o(e("./profile_menu_jewel"));r.default=d.default.createClass({displayName:"PersonalNav",propTypes:{author:i.default.PropTypes.shape({id:i.default.PropTypes.number,editProfileUrl:i.default.PropTypes.string,profileUrl:i.default.PropTypes.string,dashboardUrl:i.default.PropTypes.string}),commentsUrl:i.default.PropTypes.string,discussionsUrl:i.default.PropTypes.string,editFavGenresUrl:i.default.PropTypes.string,includeProfileMenu:i.default.PropTypes.bool,groupInvitesCount:i.default.PropTypes.number,messageIconUrl:i.default.PropTypes.string,myFriendsUrl:i.default.PropTypes.string,myQuotesUrl:i.default.PropTypes.string,myReadingChallengeUrl:i.default.PropTypes.string,name:i.default.PropTypes.string,pendingRecsCount:i.default.PropTypes.number,preferences:i.default.PropTypes.object,profileEditUrl:i.default.PropTypes.string,profileImage:i.default.PropTypes.string,profileUrl:i.default.PropTypes.string,signOutUrl:i.default.PropTypes.string,tempFriendRequestCount:i.default.PropTypes.number,tempUnreadMessageCount:i.default.PropTypes.number,withDropdowns:i.default.PropTypes.bool},getDefaultProps:function(){return{includeProfileMenu:!0,withDropdowns:!0}},trackClickIncludeDropdownsSuffix:function(e,t){t=this.props.withDropdowns?t+"_WithDropdowns":t+"_WithoutDropdowns";(0,c.trackNavEngageClick)(e,t)},render:function(){var t=this,e=s("span",{className:"headerPersonalNav__icon headerPersonalNav__icon--discussions","aria-label":"My group discussions"},void 0),r=s("span",{className:"headerPersonalNav__icon headerPersonalNav__icon--inbox","aria-label":"Inbox"},void 0,0<this.props.tempUnreadMessageCount?s("span",{className:"headerPersonalNav__flag"},void 0,this.props.tempUnreadMessageCount):null),o=s("span",{className:"headerPersonalNav__icon headerPersonalNav__icon--friendRequests","aria-label":"Friend Requests"},void 0,0<this.props.tempFriendRequestCount?s("span",{className:"headerPersonalNav__flag"},void 0,this.props.tempFriendRequestCount):null);return s("ul",{className:"personalNav"},void 0,s("li",{className:"personalNav__listItem"},void 0,this.renderNotifications()),s("li",{className:"personalNav__listItem",onClick:function(e){return(0,c.trackNavEngageClick)(e,"DiscussionsLink")}},void 0,s("a",{href:(0,l.default)(this.props.discussionsUrl,{discussion_filter:"groups",ref:p.URLTrackingParams.DISCUSSIONS_PANE_DISCUSSION}),title:"My group discussions",className:"headerPersonalNav"},void 0,e)),s("li",{className:"personalNav__listItem",onClick:function(e){return t.trackClickIncludeDropdownsSuffix(e,"MessagesLink")}},void 0,s("a",{href:this.props.messageIconUrl,title:"Messages",className:"headerPersonalNav"},void 0,r)),s("li",{className:"personalNav__listItem",onClick:function(e){return t.trackClickIncludeDropdownsSuffix(e,"FriendsLink")}},void 0,s("a",{href:this.props.friendIconUrl,title:"Friends",className:"headerPersonalNav"},void 0,o)),this.renderProfileMenu())},renderNotifications:function(){return s(h.default,{notificationIconUrl:this.props.notificationIconUrl,preferences:this.props.preferences,withDropdowns:this.props.withDropdowns})},renderProfileName:function(){var e=this.props.name;return 23<e.length&&(e=e.substring(0,22)+"â€¦"),s("span",{className:"siteHeader__subNavLink gr-h3 gr-h3--noMargin"},void 0," ",e," ")},renderProfileMenu:function(){if(!0!==this.props.includeProfileMenu)return null;var e={viewableName:this.props.name,profileImage:this.props.profileImage,profileUrl:this.props.profileUrl},t=i.default.createElement(m.default,n({},this.props,{user:e,showNotificationsFlag:!1})),e=(0===a.default.size(this.props.author)?this.props:this.props.author).profileUrl;return s("li",{className:"personalNav__listItem"},void 0,s(f.default,{trigger:t,fallbackUrl:e,bemModifiers:"profileMenu",isInPersonalNav:"true",onShowCallback:function(){return(0,c.trackNavEngage)("ProfileShow")}},void 0,s("div",{className:"siteHeader__subNav siteHeader__subNav--profile gr-box gr-box--withShadowLarge"},void 0,this.renderProfileName(),i.default.createElement(_.default,n({},this.props,{profileUrl:e})))))}})},{"../../analytics/url_tracking_params":1,"../../modules/click_and_view_tracking":8,"../dropdown":91,"../gr_component_factory":108,"./notifications":121,"./profile_menu":127,"./profile_menu_jewel":128,"append-query":"append-query",lodash:"lodash",react:"react"}],123:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},s=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0}),r.personalNavDrawerModalId=void 0;var i=o(e("../modal")),a=o(e("../gr_component_factory")),l=o(e("./personal_nav")),d=o(e("./profile_menu")),c=o(e("../user/user_icon")),p=e("../../modules/shape_icon_values");r.personalNavDrawerModalId="personalNavDrawerModal";r.default=a.default.createClass({displayName:"PersonalNavDrawer",render:function(){var e={viewableName:this.props.name,profileImage:this.props.profileImage,profileUrl:this.props.profileUrl};return s(i.default,{asDrawer:!0,id:"personalNavDrawerModal"},void 0,s("div",{className:"personalNavDrawer"},void 0,s("div",{className:"personalNavDrawer__personalNavContainer"},void 0,React.createElement(l.default,n({},this.props,{includeProfileMenu:!1,withDropdowns:!1}))),s("div",{className:"personalNavDrawer__profileAndLinksContainer"},void 0,s("div",{className:"personalNavDrawer__profileContainer gr-mediaFlexbox gr-mediaFlexbox--alignItemsCenter"},void 0,s("div",{className:"gr-mediaFlexbox__media"},void 0,s(c.default,{user:e,size:p.ICON_SIZES.LARGE})),s("div",{className:"gr-mediaFlexbox__desc"},void 0,s("a",{href:this.props.profileUrl,className:"gr-hyperlink gr-hyperlink--bold"},void 0,this.props.name),s("div",{className:"u-displayBlock"},void 0,s("a",{href:this.props.profileUrl,className:"gr-hyperlink gr-hyperlink--naked"},void 0,"View profile")))),s("div",{className:"personalNavDrawer__profileMenuContainer"},void 0,React.createElement(d.default,this.props)))))}})},{"../../modules/shape_icon_values":19,"../gr_component_factory":108,"../modal":142,"../user/user_icon":201,"./personal_nav":122,"./profile_menu":127}],124:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0}),r.PRIMARY_NAV_MENU_TAB_GROUP=void 0;var s=o(e("react")),i=o(e("lodash")),a=o(e("reflux")),l=o(e("../gr_component_factory")),d=o(e("classnames")),c=o(e("react-onclickoutside")),p=o(e("../../modules/keys")),f=o(e("../../react_actions/tab_actions")),h=o(e("../../react_stores/tabs_store")),_=o(e("../../react_stores/user_agent_capabilities_store")),m=e("../../modules/shared/touch_not_ready_helper"),g=r.PRIMARY_NAV_MENU_TAB_GROUP="siteHeaderPrimaryNav";r.default=l.default.createClass({displayName:"Dropdown",mixins:[c.default,a.default.connect(h.default,"tabsStore"),a.default.connect(_.default,"userAgentCapabilities")],propTypes:{fallbackUrl:s.default.PropTypes.string,onShowCallback:s.default.PropTypes.func,tabName:s.default.PropTypes.string.isRequired,tooltipText:s.default.PropTypes.string,showingFavoriteGenres:s.default.PropTypes.bool,trigger:s.default.PropTypes.oneOfType([s.default.PropTypes.string,s.default.PropTypes.element]).isRequired},hide:function(){f.default.deselectTab(this.props.tabName,g)},isMenuActive:function(){return this.props.tabName===this.state.tabsStore[g]},show:function(){f.default.selectTab(this.props.tabName,g),this.props.onShowCallback&&this.props.onShowCallback()},toggle:function(e){(0,m.acknowledgeEvent)(e),this.props.children&&e.preventDefault(),this.isMenuActive()?this.hide():this.show()},openList:function(e){p.default.isDropdownOpenerKey(e.keyCode)?(e.preventDefault(),p.default.isArrowDown(e.keyCode)?this.show():this.toggle(e)):p.default.isDefaultCloserKey(e.keyCode)&&(e.preventDefault(),this.hide())},handleClickOutside:function(){this.state.userAgentCapabilities.touch||this.hide()},triggerClasses:function(){return(0,d.default)(this.withBemModifiers(["primaryNavMenu__trigger"]),{"primaryNavMenu__trigger--buttonReset":i.default.isUndefined(this.props.fallbackUrl)},{"primaryNavMenu__trigger--active":this.isMenuActive()})},renderTriggerButton:function(){return n("button",{className:this.triggerClasses(),"aria-haspopup":"true","aria-expanded":this.isMenuActive(),onClick:this.toggle,onKeyDown:this.openList,title:this.props.tooltipText,"data-ux-click":!0},void 0,this.props.trigger)},renderTriggerLink:function(){return n("a",{className:this.triggerClasses(),href:this.props.fallbackUrl,onClick:this.toggle,onKeyDown:this.openList,role:"button","aria-haspopup":"true","aria-expanded":this.isMenuActive(),title:this.props.tooltipText,"data-ux-click":!0},void 0,this.props.trigger)},render:function(){var e=(0,d.default)(this.withBemModifiers("primaryNavMenu"),"ignore-react-onclickoutside"),t=(0,d.default)("primaryNavMenu__menu",{"primaryNavMenu__menu--show":this.isMenuActive()},"gr-box gr-box--withShadowLarge",{wide:this.props.showingFavoriteGenres}),r=i.default.isUndefined(this.props.fallbackUrl)?this.renderTriggerButton():this.renderTriggerLink(),t=n("div",{className:t,role:"menu"},void 0,this.props.children);return n("div",{className:e},void 0,r,t)}})},{"../../modules/keys":16,"../../modules/shared/touch_not_ready_helper":21,"../../react_actions/tab_actions":45,"../../react_stores/tabs_store":257,"../../react_stores/user_agent_capabilities_store":260,"../gr_component_factory":108,classnames:"classnames",lodash:"lodash",react:"react","react-onclickoutside":"react-onclickoutside",reflux:"reflux"}],125:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=o(e("../gr_component_factory")),a=e("../../modules/click_and_view_tracking"),l=o(e("./community_menu")),d=o(e("./browse_menu"));r.default=i.default.createClass({displayName:"PrimaryNavMenus",propTypes:{adId:s.default.PropTypes.string,browseUrl:s.default.PropTypes.string,choiceAwardsUrl:s.default.PropTypes.string,communityUrl:s.default.PropTypes.string,discussionsUrl:s.default.PropTypes.string,eventUrl:s.default.PropTypes.string,favoriteGenres:s.default.PropTypes.array,featuredAskAuthorUrl:s.default.PropTypes.string,genres:s.default.PropTypes.array.isRequired,giveawayUrl:s.default.PropTypes.string,exploreUrl:s.default.PropTypes.string,groupsUrl:s.default.PropTypes.string,homeUrl:s.default.PropTypes.string,listUrl:s.default.PropTypes.string,myBooksUrl:s.default.PropTypes.string,newReleasesUrl:s.default.PropTypes.string,peopleUrl:s.default.PropTypes.string,quizzesUrl:s.default.PropTypes.string,quotesUrl:s.default.PropTypes.string,recommendationsUrl:s.default.PropTypes.string,signedIn:s.default.PropTypes.bool,storiesUrl:s.default.PropTypes.string,triviaUrl:s.default.PropTypes.string},render:function(){return n("ul",{role:"menu",className:"siteHeader__menuList"},void 0,n("li",{className:"siteHeader__topLevelItem siteHeader__topLevelItem--home",onClick:function(e){return(0,a.trackNavEngageClick)(e,"Home")}},void 0,n("a",{href:this.props.homeUrl,className:"siteHeader__topLevelLink"},void 0,"Home")),n("li",{className:"siteHeader__topLevelItem",onClick:function(e){return(0,a.trackNavEngageClick)(e,"MyBooks")}},void 0,n("a",{href:this.props.myBooksUrl,className:"siteHeader__topLevelLink"},void 0,"My Books")),n("li",{className:"siteHeader__topLevelItem"},void 0,s.default.createElement(d.default,this.props)),n("li",{className:"siteHeader__topLevelItem siteHeader__topLevelItem--community"},void 0,s.default.createElement(l.default,this.props)))}})},{"../../modules/click_and_view_tracking":8,"../gr_component_factory":108,"./browse_menu":110,"./community_menu":111,react:"react"}],126:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0}),r.mapStateToProps=r.component=void 0;var s=o(e("lodash")),i=o(e("react")),a=o(e("../gr_component_factory")),l=o(e("./primary_nav_menus")),d=o(e("react-headroom")),c=o(e("reflux")),p=o(e("../search/search_mobile_nav")),f=o(e("../../react_stores/tabs_store")),h=e("react-redux"),_=e("./primary_nav_menu"),c=r.component=a.default.createClass({displayName:"PrimaryNavSeparateLine",mixins:[c.default.connect(f.default,"tabs")],propTypes:{autocompleteUrl:i.default.PropTypes.string.isRequired,searchPath:i.default.PropTypes.string.isRequired,signedIn:i.default.PropTypes.bool.isRequired,mobviousDeviceType:i.default.PropTypes.string,searchIsActive:i.default.PropTypes.bool,adId:i.default.PropTypes.string,browseUrl:i.default.PropTypes.string,choiceAwardsUrl:i.default.PropTypes.string,communityUrl:i.default.PropTypes.string,discussionsUrl:i.default.PropTypes.string,eventUrl:i.default.PropTypes.string,favoriteGenres:i.default.PropTypes.array,featuredAskAuthorUrl:i.default.PropTypes.string,genres:i.default.PropTypes.array.isRequired,giveawayUrl:i.default.PropTypes.string,groupsUrl:i.default.PropTypes.string,homeUrl:i.default.PropTypes.string,exploreUrl:i.default.PropTypes.string,listUrl:i.default.PropTypes.string,myBooksUrl:i.default.PropTypes.string,newReleasesUrl:i.default.PropTypes.string,peopleUrl:i.default.PropTypes.string,quizzesUrl:i.default.PropTypes.string,quotesUrl:i.default.PropTypes.string,recommendationsUrl:i.default.PropTypes.string,storiesUrl:i.default.PropTypes.string,triviaUrl:i.default.PropTypes.string},getDefaultProps:function(){return{searchIsActive:!1}},isNavPinned:function(){return this.props.searchIsActive||!s.default.isEmpty(this.state.tabs[_.PRIMARY_NAV_MENU_TAB_GROUP])},renderDefaultSeparateLine:function(){return n("nav",{className:"siteHeader__primaryNavSeparateLine gr-box gr-box--withShadow"},void 0,i.default.createElement(l.default,this.props))},renderSearch:function(){return i.default.createElement(p.default,this.props)},render:function(){return n(d.default,{disable:this.isNavPinned()},void 0,this.props.searchIsActive?this.renderSearch():this.renderDefaultSeparateLine())}}),f=r.mapStateToProps=function(e,t){return Object.assign({},t,e)};r.default=(0,h.connect)(f)(c)},{"../../react_stores/tabs_store":257,"../gr_component_factory":108,"../search/search_mobile_nav":172,"./primary_nav_menu":124,"./primary_nav_menus":125,lodash:"lodash",react:"react","react-headroom":"react-headroom","react-redux":"react-redux",reflux:"reflux"}],127:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=o(e("lodash")),a=o(e("../gr_component_factory")),l=e("../../modules/click_and_view_tracking"),d=e("../menu_link"),c=o(d);r.default=a.default.createClass({displayName:"ProfileMenu",propTypes:{author:s.default.PropTypes.shape({id:s.default.PropTypes.number,editProfileUrl:s.default.PropTypes.string,profileUrl:s.default.PropTypes.string,dashboardUrl:s.default.PropTypes.string}),commentsUrl:s.default.PropTypes.string,discussionsUrl:s.default.PropTypes.string,editFavGenresUrl:s.default.PropTypes.string,groupInvitesCount:s.default.PropTypes.number,helpUrl:s.default.PropTypes.string,myFriendsUrl:s.default.PropTypes.string,myGroupsUrl:s.default.PropTypes.string,myQuotesUrl:s.default.PropTypes.string,myReadingChallengeUrl:s.default.PropTypes.string,myRecsUrl:s.default.PropTypes.string,name:s.default.PropTypes.string,pendingRecsCount:s.default.PropTypes.number,profileEditUrl:s.default.PropTypes.string,profileUrl:s.default.PropTypes.string,readingNotesUrl:s.default.PropTypes.string,signOutUrl:s.default.PropTypes.string},isAuthor:function(){return!i.default.isUndefined(this.props.author)},groupInvitesMessage:function(){var e=this.props.groupInvitesCount;return 0===e?"No invitations":1===e?"1 invitation":e+" invitations"},renderGroupInvites:function(){return 0<this.props.groupInvitesCount?n("span",{className:"gr-smallAlert u-marginLeftXSmall"},void 0,this.groupInvitesMessage()):void 0},renderPendingRecs:function(){return 0<this.props.pendingRecsCount?n("span",{className:"gr-smallAlert u-marginLeftXSmall"},void 0,this.props.pendingRecsCount+" new"):void 0},renderAuthorDashboardLink:function(){return this.isAuthor()?n(c.default,{href:this.props.author.dashboardUrl,linkText:"Author Dashboard",linkClass:"siteHeader__subNavLink"}):void 0},render:function(){var e=this.isAuthor()?this.props.author.editProfileUrl:this.props.profileEditUrl;return n("ul",{},void 0,n(c.default,{},void 0,n("a",{href:this.props.profileUrl,className:"siteHeader__subNavLink",onClick:function(e){return(0,l.trackNavEngageClick)(e,d.MENU_LINK_TRACKING_PREFIX+"_Profile")}},void 0,"Profile")),this.renderAuthorDashboardLink(),n(c.default,{href:this.props.myFriendsUrl,linkText:"Friends",linkClass:"siteHeader__subNavLink"}),n(c.default,{},void 0,n("a",{href:this.props.myGroupsUrl,className:"siteHeader__subNavLink",onClick:function(e){return(0,l.trackNavEngageClick)(e,d.MENU_LINK_TRACKING_PREFIX+"_MyGroups")}},void 0,"Groups",this.renderGroupInvites())),n(c.default,{href:this.props.discussionsUrl,linkText:"Discussions",linkClass:"siteHeader__subNavLink"}),n(c.default,{href:this.props.commentsUrl,linkText:"Comments",linkClass:"siteHeader__subNavLink"}),n(c.default,{href:this.props.myReadingChallengeUrl,linkText:"Reading Challenge",linkClass:"siteHeader__subNavLink"}),n(c.default,{href:this.props.readingNotesUrl,linkText:"Kindle Notes & Highlights",linkClass:"siteHeader__subNavLink"}),n(c.default,{href:this.props.myQuotesUrl,linkText:"Quotes",linkClass:"siteHeader__subNavLink"}),n(c.default,{href:this.props.editFavGenresUrl,linkText:"Favorite genres",linkClass:"siteHeader__subNavLink"}),n(c.default,{},void 0,n("a",{href:this.props.myRecsUrl,className:"siteHeader__subNavLink",onClick:function(e){return(0,l.trackNavEngageClick)(e,d.MENU_LINK_TRACKING_PREFIX+"_FriendsRecommendations")}},void 0,"Friendsâ€™ recommendations",this.renderPendingRecs())),n(c.default,{href:e,linkText:"Account settings",linkClass:"siteHeader__subNavLink u-topGrayBorder"}),n(c.default,{href:this.props.helpUrl,linkText:"Help",linkClass:"siteHeader__subNavLink"}),n(c.default,{href:this.props.signOutUrl,linkText:"Sign out",linkClass:"siteHeader__subNavLink",method:"POST"}))}})},{"../../modules/click_and_view_tracking":8,"../gr_component_factory":108,"../menu_link":141,lodash:"lodash",react:"react"}],128:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("../gr_component_factory")),i=o(e("../../react_stores/notifications_store")),a=o(e("react")),l=o(e("reflux")),d=o(e("../user/user_icon"));r.default=s.default.createClass({displayName:"ProfileMenuJewel",mixins:[l.default.connect(i.default,"notificationsStore")],propTypes:{notificationIconUrl:a.default.PropTypes.string,showNotificationsFlag:a.default.PropTypes.bool,tempFriendRequestCount:a.default.PropTypes.number,tempUnreadMessageCount:a.default.PropTypes.number,user:a.default.PropTypes.shape({viewableName:a.default.PropTypes.string.isRequired,profileImage:a.default.PropTypes.string.isRequired,profileUrl:a.default.PropTypes.string}).isRequired},getDefaultProps:function(){return{showNotificationsFlag:!0,tempFriendRequestCount:0,tempUnreadMessageCount:0}},notificationsCountString:function(){var e=this.state.notificationsStore;return e.unreadCount+this.props.tempFriendRequestCount+this.props.tempUnreadMessageCount+(e.unreadCountMore?"+":"")},render:function(){return n("span",{className:"headerPersonalNav__icon"},void 0,this.renderNotificationsCountFlag(),n(d.default,{user:this.props.user,includeLink:!1}))},renderNotificationsCountFlag:function(){return!0===this.props.showNotificationsFlag&&(0<this.state.notificationsStore.unreadCount||0<this.props.tempFriendRequestCount||0<this.props.tempUnreadMessageCount)?n("span",{className:"headerPersonalNav__flag"},void 0,this.notificationsCountString()):null}})},{"../../react_stores/notifications_store":252,"../gr_component_factory":108,"../user/user_icon":201,react:"react",reflux:"reflux"}],129:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("../gr_component_factory")),i=o(e("../dot_separated_elements")),e=o(e("react"));r.default=s.default.createClass({displayName:"EditorialBlogThumbnail",propTypes:{likesCountText:e.default.PropTypes.string,commentsCountText:e.default.PropTypes.string,imageUrl:e.default.PropTypes.string,blogPostUrl:e.default.PropTypes.string.isRequired,title:e.default.PropTypes.string.isRequired,header:e.default.PropTypes.string.isRequired},renderBlogLink:function(e){return n("span",{className:"gr-metaText"},void 0,e)},renderImage:function(){return this.props.imageUrl?n("a",{href:this.props.blogPostUrl},void 0,n("img",{className:"gr-editorialBlogPost__image",src:this.props.imageUrl,alt:""+this.props.title})):null},renderLikesAndComments:function(){var e=this.renderBlogLink(this.props.likesCountText),t=this.renderBlogLink(this.props.commentsCountText);return this.props.likesCountText&&this.props.commentsCountText?n(i.default,{elements:[e,t]}):this.props.likesCountText?e:this.props.commentsCountText?t:null},render:function(){return n("section",{className:"gr-editorialBlogPost"},void 0,n("article",{},void 0,n("h3",{},void 0,this.props.header),n("a",{href:this.props.blogPostUrl,className:"gr-editorialBlogPost__title"},void 0,this.props.title),this.renderImage(),n("div",{className:"gr-editorialBlogPost__likesAndComments"},void 0,this.renderLikesAndComments())))}})},{"../dot_separated_elements":89,"../gr_component_factory":108,react:"react"}],130:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},s=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0}),r.JobsListComponent=void 0;var i=o(e("./gr_component_factory")),a=e("react"),l=o(e("../modules/env_utils")),d=e("lodash"),c=o(e("react-router/lib/Router")),p=o(e("react-router/lib/RouterContext")),f=o(e("react-router/lib/Route")),h=o(e("react-router/lib/Link")),_=o(e("react-router/lib/browserHistory")),m=o(e("react-router/lib/match")),g=o(e("classnames")),v="/jobs",y="https://account.amazon.jobs",b=[" - Goodreads",", Goodreads"],k="jobsListBody",S=r.JobsListComponent=i.default.createClass({displayName:"JobsList",getJobs:function(){return this.props.route.jobs},getSelectedJobData:function(){return this.getJobs()?this.getJobs()[this.props.location.query.id]:null},displayableJobTitle:function(e){var t=e;return b.forEach(function(e){t=t.replace(e,"")}),t},renderBackToAllJobsButton:function(){return s(h.default,{to:v},void 0,s("span",{className:"gr-hyperlink"},void 0,"Back to all jobs"))},renderHeading:function(){var e=(0,g.default)(this.withBemModifiers("jobsListHeading__subtitle"),{"jobsListHeading__subtitle--jobSelected":this.getSelectedJobData()});return s("div",{className:"gr-row gr-justify-content-center"},void 0,s("div",{className:"gr-col gr-col-md-7 gr-col-lg-8"},void 0,s("h2",{className:"gr-marketingPageH2 jobsListHeading__title"},void 0,"Find your next job"),s("p",{className:e},void 0,this.getJobs()?"Want to be part of creating innovative experiences for the largest community of readers? Weâ€™re hiring!":"Sorry, we do not have any open positions at this time. Please check again soon!")))},renderLocation:function(e){var t=(0,g.default)(this.withBemModifiers("jobsListItem__location"),{"jobsListItem__location--jobSelected":this.getSelectedJobData()});return s("div",{className:t},void 0,e.replace(", USA",""))},renderJobItem:function(e){var t=this.getJobs()[e];return t?s("div",{id:e,className:"gr-row jobsListItem"},e,s("div",{className:"gr-col gr-col-md-6 gr-col-lg-7 gr-col-md-offset-1"},void 0,s(h.default,{to:v+"?id="+e},void 0,s("span",{className:"gr-hyperlink gr-d-block jobsListItem__link"},void 0,this.displayableJobTitle(t.title))),s("div",{className:"gr-d-block gr-d-md-none"},void 0,this.renderLocation(t.normalized_location))),s("div",{className:"gr-col gr-col-md-4 gr-col-lg-3 gr-d-none gr-d-md-flex"},void 0,this.renderLocation(t.normalized_location))):null},renderLocationHeading:function(){return s("div",{className:"gr-col gr-col-md-4 gr-col-lg-3 gr-d-none gr-d-md-flex"},void 0,s("h3",{className:"gr-h3"},void 0,"Location City"))},renderCategoryHeading:function(e){var t=e===Object.keys(this.props.route.categories)[0];return s("div",{className:"gr-row"},void 0,s("div",{className:"gr-col gr-col-md-6 gr-col-lg-7 gr-col-md-offset-1"},void 0,s("h3",{className:"gr-h3"},void 0,e)),t&&this.renderLocationHeading())},getJobMarkup:function(e){return{__html:e}},renderSelectedJob:function(){var e=this.getSelectedJobData(),t=this.displayableJobTitle(e.title);return s("div",{className:"jobsListSelectedJob"},void 0,s("h4",{className:"gr-marketingPageH4"},void 0,t),this.renderLocation(e.normalized_location),s("p",{dangerouslySetInnerHTML:this.getJobMarkup(e.description),className:"jobsListSelectedJob__description"}),s("h5",{className:"gr-marketingPageH5"},void 0,"Basic Qualifications:"),s("div",{dangerouslySetInnerHTML:this.getJobMarkup(e.basic_qualifications),className:"jobsListSelectedJob__basicQuals"}),s("h5",{className:"gr-marketingPageH5"},void 0,"Preferred Qualifications:"),s("div",{dangerouslySetInnerHTML:this.getJobMarkup(e.preferred_qualifications),className:"jobsListSelectedJob__preferredQuals"}))},renderCheckJobApp:function(){var e=(0,g.default)({"gr-hyperlink":this.getSelectedJobData()},{"gr-button gr-button--large gr-button--fullWidth gr-button--teal":!this.getSelectedJobData()});return s("a",{href:y,className:e},void 0,"Check on a submitted application")},renderApplicationButtons:function(){var e=this.getSelectedJobData();return s("div",{className:"jobsListSelectedJob__applicationButtons"},void 0,s("div",{className:"jobsListApplyButton gr-d-md-inline"},void 0,s("a",{href:y+v+"/"+e.id_icims+"/apply",className:"gr-button gr-button--large gr-button--teal"},void 0,"Apply now")),s("div",{className:"jobsListCheckJobAppContainer gr-d-md-inline"},void 0,this.renderCheckJobApp()))},render:function(){var r=this;if(this.getSelectedJobData())return s("div",{className:k},void 0,this.renderHeading(),s("div",{className:"gr-row gr-justify-content-center"},void 0,s("div",{className:"gr-col gr-col-md-10 gr-col-lg-8"},void 0,s("div",{className:"jobsListBackToAllJobsContainer--top"},void 0,this.renderBackToAllJobsButton()),this.renderSelectedJob(),s("div",{className:"jobsListLegalText"},void 0,"Qualified applicants with criminal histories will be considered in a manner consistent with all applicable local, state and federal laws, including the San Francisco Fair Chance Ordinance."),this.renderApplicationButtons(),s("div",{className:"jobsListBackToAllJobsContainer--bottom"},void 0,this.renderBackToAllJobsButton()))));var e=(0,g.default)("gr-row gr-justify-content-center jobsListCheckJobAppContainer--jobList",{"jobsListCheckJobAppContainer--noJobs":!this.getJobs()});return s("div",{className:k},void 0,this.renderHeading(),(0,d.map)(this.props.route.categories,function(e,t){return s("div",{className:"jobsListCategory"},t,r.renderCategoryHeading(t),(0,d.map)(e,function(e){return r.renderJobItem(e)}))}),s("div",{className:e},void 0,s("div",{className:"gr-col gr-col-10 gr-col-md-6 gr-col-lg-4"},void 0,this.renderCheckJobApp())))}}),i=function(e){var t=React.createElement(f.default,n({path:v+"(?id=*)",component:S,onChange:function(){var e=document.getElementsByClassName(k)[0].parentElement;null!==e&&e.scrollIntoView(!0)}},e));if(l.default.domUnavailable()){var o=void 0,r=v;return e.selectedId&&(r+="?id="+e.selectedId),(0,m.default)({routes:t,location:r},function(e,t,r){o=r}),React.createElement(p.default,o)}return s(c.default,{history:_.default},void 0,t)};i.propTypes={selectedId:a.PropTypes.string,categories:a.PropTypes.object,jobs:a.PropTypes.object},r.default=i},{"../modules/env_utils":13,"./gr_component_factory":108,classnames:"classnames",lodash:"lodash",react:"react","react-router/lib/Link":269,"react-router/lib/Route":273,"react-router/lib/Router":275,"react-router/lib/RouterContext":276,"react-router/lib/browserHistory":279,"react-router/lib/match":287}],131:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},i=function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e};function a(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}Object.defineProperty(r,"__esModule",{value:!0}),r.LibrarianQuiz=void 0;var l=o(e("react")),d=e("lodash"),c=e("../../modules/ajax/ajax_helper"),p=e("../../modules/env_utils"),f=o(e("../flash_message")),i=r.LibrarianQuiz=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(h,l["default"].Component),i(h,[{key:"gradeQuiz",value:function(){this.setState({gradingInProgress:!0}),(0,c.httpPost)("/librarian/submit_quiz",{data:{userAnswers:this.state.userAnswers}}).done(function(e){(0,p.setLocationUrl)(e.redirect)})}},{key:"addUserAnswer",value:function(e,t){var r=this.state.userAnswers;r[e]=t,this.setState({userAnswers:r})}},{key:"renderStatusFlashMessage",value:function(){return this.state.statusMessage&&!this.state.adminViewing?this.state.passedQuiz?n(f.default,{category:"info",message:this.state.statusMessage}):n(f.default,{category:"error",message:this.state.statusMessage}):null}},{key:"renderAnswerRadioInput",value:function(e,t){var r=this,o=e.questionId;return this.state.finishedQuiz?n("input",{name:"quizQuestion"+o,value:t,type:"radio",checked:e.userAnswer===t,disabled:!0,className:"gr-radioButtonGroup__button"}):n("input",{name:"quizQuestion"+o,value:t,type:"radio",onChange:function(){r.addUserAnswer(o,t)},className:"gr-radioButtonGroup__button"})}},{key:"renderManualLinkBox",value:function(e){return this.state.finishedQuiz&&!e.isUserAnswerCorrect?n("div",{className:"gr-infoMessageBox"},void 0,"Incorrect answer! Please consult the"," ",n("a",{href:e.manualLink,className:"gr-hyperlink"},void 0,"Librarian Manual")," ","for more information."):null}},{key:"renderButton",value:function(){return this.state.finishedQuiz?this.state.passedQuiz&&!this.state.adminViewing?n("a",{className:"gr-button",href:"/librarian/apply_librarian"},void 0,"Apply"):null:n("button",{className:"gr-button",onClick:this.gradeQuiz,disabled:this.state.gradingInProgress},void 0,"Submit")}},{key:"render",value:function(){var o=this;return n("div",{},void 0,this.renderStatusFlashMessage(),(0,d.map)(this.state.attemptAnswers,function(r){return n("fieldset",{className:"gr-radioButtonGroup u-marginTopMedium u-marginBottomMedium"},r.questionId,o.renderManualLinkBox(r),n("legend",{className:"mediumLargeText fullSizeContainer"},void 0,r.questionText),(0,d.map)(r.answers,function(e,t){return n("label",{className:"gr-radioButtonGroup__choice gr-label gr-label--muted"},e.answerId,o.renderAnswerRadioInput(r,e.answerId),String.fromCharCode(65+t),": ",e.answerText)}))}),this.renderButton())}}]),h);function h(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h);e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(h).call(this,e));return e.state=s({},e.props,{userAnswers:{},gradingInProgress:!1}),e.renderManualLinkBox=e.renderManualLinkBox.bind(e),e.gradeQuiz=e.gradeQuiz.bind(e),e.addUserAnswer=e.addUserAnswer.bind(e),e.renderAnswerRadioInput=e.renderAnswerRadioInput.bind(e),e.renderButton=e.renderButton.bind(e),e.renderStatusFlashMessage=e.renderStatusFlashMessage.bind(e),e}i.propTypes={finishedQuiz:l.default.PropTypes.bool,passedQuiz:l.default.PropTypes.bool,adminViewing:l.default.PropTypes.bool,statusMessage:l.default.PropTypes.string,attemptAnswers:l.default.PropTypes.array},r.default=i},{"../../modules/ajax/ajax_helper":4,"../../modules/env_utils":13,"../flash_message":106,lodash:"lodash",react:"react"}],132:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=o(e("../gr_component_factory")),a=e("../../react_mixins/gr_reflux"),l=o(e("../../react_actions/like_actions")),d=o(e("../../react_stores/like_store")),c=o(e("../spinner")),p=o(e("classnames"));r.default=i.default.createClass({displayName:"LikeButton",mixins:[(0,a.connectToLazyStore)(d.default,"resourceKey")],propTypes:{resourceKey:s.default.PropTypes.string.isRequired,resourceLabel:s.default.PropTypes.string.isRequired,showAsLink:s.default.PropTypes.bool},getDefaultProps:function(){return{showAsLink:!0}},componentDidUpdate:function(){this.likeFocused&&!this.state.showLoadingSpinner&&(this.refs.likeButton.focus(),this.likeFocused=!1)},buttonClicked:function(){this.state.isLiked?l.default.unLike(this.props.resourceKey):l.default.like(this.props.resourceKey)},render:function(){var e=this,t=this.state.isLiked?"Unlike":"Like",r=(0,p.default)({"gr-buttonAsLink":this.props.showAsLink},{"gr-button gr-button--small":!this.props.showAsLink});return n("span",{"aria-live":"polite"},void 0,this.state.showLoadingSpinner?n(c.default,{}):s.default.createElement("button",{"aria-label":t+" "+this.props.resourceLabel,ref:"likeButton",className:r,onClick:this.buttonClicked,onFocus:function(){e.likeFocused=!0}},t))}})},{"../../react_actions/like_actions":37,"../../react_mixins/gr_reflux":235,"../../react_stores/like_store":250,"../gr_component_factory":108,"../spinner":194,classnames:"classnames",react:"react"}],133:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=o(e("../gr_component_factory")),a=o(e("../../react_stores/like_store")),e=e("../../react_mixins/gr_reflux");r.default=i.default.createClass({displayName:"LikeCount",mixins:[(0,e.connectToLazyStore)(a.default,"resourceKey")],propTypes:{resourceKey:s.default.PropTypes.string.isRequired},getPluralLike:function(e){return 1===e?"like":"likes"},render:function(){return 0<this.state.likeCount?n("span",{},void 0,n("a",{className:"gr-hyperlink--quiet",href:this.state.likersListUrl},void 0,this.state.likeCount," ",this.getPluralLike(this.state.likeCount))," Â· "):null}})},{"../../react_mixins/gr_reflux":235,"../../react_stores/like_store":250,"../gr_component_factory":108,react:"react"}],134:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=o(e("lodash")),a=o(e("../gr_component_factory")),l=o(e("reflux")),e=o(e("../../react_stores/like_store"));r.default=a.default.createClass({displayName:"LikeInformation",mixins:[l.default.connectFilter(e.default,"likeStore",function(e){return e[this.props.resourceKey]})],propTypes:{resourceKey:s.default.PropTypes.string.isRequired},getNameLink:function(){var e=this.state.likeStore.likedBy,e=(i.default.isUndefined(e.friends)?e.others:e.friends)[0];return n("a",{href:e.profile_url,className:"gr-hyperlink gr-hyperlink--bold likeInformation__name"},void 0,e.name)},getPluralPerson:function(e){return 1<e?"people":"person"},getYouLikeMessage:function(){return n("span",{className:"likeInformation__name"},void 0,"You")},getYouAndAnotherPersonLikeMessage:function(){return n("span",{},void 0,this.getYouLikeMessage()," and ",this.getNameLink())},getYouAndManyPeopleLikeMessage:function(){var e=this.state.likeStore,t=e.likeCount-2;return n("span",{},void 0,this.getYouLikeMessage(),", ",this.getNameLink(),","," and ",n("a",{className:"gr-hyperlink gr-hyperlink--bold",href:e.likersListUrl},void 0,t," other ",this.getPluralPerson(t)))},getSomeoneLikeMessage:function(){return n("span",{},void 0,this.getNameLink())},getManyPeopleLikeMessage:function(){var e=this.state.likeStore,t=e.likeCount-1;return n("span",{},void 0,this.getNameLink()," and ",n("a",{className:"gr-hyperlink gr-hyperlink--bold",href:e.likersListUrl},void 0,t," other ",this.getPluralPerson(t)))},getLikeMessage:function(){var e=this.state.likeStore;if(!e.isLiked)return 1!==e.likeCount?this.getManyPeopleLikeMessage():this.getSomeoneLikeMessage();switch(e.likeCount){case 1:return this.getYouLikeMessage();case 2:return this.getYouAndAnotherPersonLikeMessage();default:return this.getYouAndManyPeopleLikeMessage()}},render:function(){var e=this.state.likeStore;return!e.isLiked&&i.default.isEmpty(e.likedBy)?null:n("div",{className:"likeInformation u-defaultType"},void 0,this.getLikeMessage()," liked this")}})},{"../../react_stores/like_store":250,"../gr_component_factory":108,lodash:"lodash",react:"react",reflux:"reflux"}],135:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=o(e("../gr_component_factory")),a=o(e("./like_count")),l=o(e("./like_button"));r.default=i.default.createClass({displayName:"LikeSimpleFooter",propTypes:{resourceKey:s.default.PropTypes.string.isRequired,resourceLabel:s.default.PropTypes.string.isRequired,isLikeable:s.default.PropTypes.bool.isRequired,showAsLink:s.default.PropTypes.bool},render:function(){return n("span",{},void 0,n(a.default,{resourceKey:this.props.resourceKey}),this.props.isLikeable?n(l.default,{resourceKey:this.props.resourceKey,resourceLabel:this.props.resourceLabel,showAsLink:this.props.showAsLink}):null)}})},{"../gr_component_factory":108,"./like_button":132,"./like_count":133,react:"react"}],136:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("../gr_component_factory")),e=o(e("react"));r.default=s.default.createClass({displayName:"AmazonLoginButton",getInitialState:function(){return{popup:!1}},propTypes:{amazonSignInUrl:e.default.PropTypes.string.isRequired,enabled:e.default.PropTypes.bool,fullWidth:e.default.PropTypes.bool},getDefaultProps:function(){return{enabled:!1,fullWidth:!1}},componentDidMount:function(){this.setState({popup:768<window.innerWidth})},handleButtonPress:function(){this.state.popup?window.open(this.props.amazonSignInUrl,"","width=900,height=540"):window.location.assign(this.props.amazonSignInUrl)},render:function(){return this.props.enabled?n("button",{className:"gr-button gr-button--amazon gr-button--auth "+(this.props.fullWidth?"gr-button--fullWidth":""),onClick:this.handleButtonPress},void 0,n("div",{className:"gr-mediaFlexbox gr-mediaFlexbox--alignItemsCenter gr-mediaFlexbox--justifyHorizontalContentCenter"},void 0,n("div",{className:"gr-mediaFlexbox__media gr-button--amazon__icon"}),n("div",{className:"gr-mediaFlexbox__desc"},void 0,"Continue with Amazon"))):null}})},{"../gr_component_factory":108,react:"react"}],137:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("../gr_component_factory")),e=o(e("react"));r.default=s.default.createClass({displayName:"FacebookLoginButton",getInitialState:function(){return{popup:!1}},propTypes:{enabled:e.default.PropTypes.bool,facebookRedirectUrl:e.default.PropTypes.string.isRequired,facebookSignInUrl:e.default.PropTypes.string.isRequired,fullWidth:e.default.PropTypes.bool},getDefaultProps:function(){return{enabled:!1,fullWidth:!1}},componentDidMount:function(){this.setState({popup:768<window.innerWidth})},handleButtonPress:function(){this.state.popup&&"undefined"!=typeof $grfb?$grfb.login({redirect:this.props.facebookRedirectUrl}):window.location.assign(this.props.facebookSignInUrl)},render:function(){return this.props.enabled&&"undefined"!=typeof $grfb?n("button",{className:"gr-button gr-button--facebook gr-button--auth "+(this.props.fullWidth?"gr-button--fullWidth":""),onClick:this.handleButtonPress},void 0,n("div",{className:"gr-mediaFlexbox gr-mediaFlexbox--alignItemsCenter gr-mediaFlexbox--justifyHorizontalContentCenter"},void 0,n("div",{className:"gr-mediaFlexbox__media gr-button--facebook__icon"}),n("div",{className:"gr-mediaFlexbox__desc"},void 0,"Continue with Facebook"))):null}})},{"../gr_component_factory":108,react:"react"}],138:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("../../login/amazon_login_button")),i=o(e("classnames")),a=o(e("../../login/facebook_login_button")),l=o(e("../../gr_component_factory")),d=o(e("../../modal")),c=o(e("../../login/register_button")),p=o(e("../../login/service_terms_and_privacy")),f=e("../../../modules/ajax/ajax_helper");r.default=l.default.createClass({displayName:"LoginInterstitial",propTypes:{allowAmazonSignIn:React.PropTypes.bool,allowFacebookSignIn:React.PropTypes.bool,overrideSignedOutPageCount:React.PropTypes.bool.isRequired,path:React.PropTypes.shape({termsUrl:React.PropTypes.string.isRequired,privacyUrl:React.PropTypes.string.isRequired}).isRequired},componentDidMount:function(){var r=this;(0,f.httpGet)("/sign_in_prompt",{data:{countOverride:this.props.overrideSignedOutPageCount}}).done(function(e,t){"success"===t?(r.setState({signInUrl:e.signInUrl,signUpUrl:e.signUpUrl,thirdPartyRedirectUrl:e.thirdPartyRedirectUrl,amazonSignInUrl:e.amazonSignInUrl,deviceType:e.deviceType,facebookSignInUrl:e.facebookSignInUrl,isShown:!0===e.showPrompt&&!1===e.isDelayed}),!0===e.showPrompt&&!0===e.isDelayed&&(r.timer=setTimeout(function(){r.setState({isShown:!0})},2e4))):"nocontent"===t&&r.setState({isShown:!1})}).fail(function(){r.setState({isShown:!1})})},getDefaultProps:function(){return{allowAmazonSignIn:!1,allowFacebookSignIn:!1}},getInitialState:function(){return{isShown:!1}},isResponsive:function(){return"mobile"===this.state.deviceType},onCloseHandler:function(){(0,f.httpPost)("/track/track_click",{data:{feature:"LoginInterstitial:dismiss"}}),this.state.deviceType&&(0,f.httpPost)("/track/track_click",{data:{feature:"LoginInterstitial:"+this.state.deviceType+"::dismiss"}})},showPopUpBook:function(){return"desktop"===this.state.deviceType},renderAmazonLoginButton:function(){return this.state.amazonSignInUrl?n("div",{className:"loginModal__button"},void 0,n(s.default,{enabled:this.props.allowAmazonSignIn,amazonSignInUrl:this.state.amazonSignInUrl,fullWidth:!0})):void 0},renderFacebookLoginButton:function(){return this.state.facebookSignInUrl?n("div",{className:"loginModal__button"},void 0,n(a.default,{enabled:this.props.allowFacebookSignIn,facebookRedirectUrl:this.state.thirdPartyRedirectUrl,facebookSignInUrl:this.state.facebookSignInUrl,fullWidth:!0})):void 0},renderContent:function(){var e=(0,i.default)("loginModal",{"loginModal--responsive":this.isResponsive()});return n("div",{className:e},void 0,this.showPopUpBook()?"":n("div",{className:"loginModal__icon",alt:"Goodreads"}),n("div",{className:"loginModal__header"},void 0,n("h3",{className:"gr-h3 gr-h3--serif gr-h3--noMargin"},void 0,"Discover & read more")),this.showPopUpBook()?n("div",{className:"loginModal__popUpBook"}):"",n("div",{className:"loginModal__body"},void 0,n("span",{className:"u-defaultType"},void 0,"Log in to get better recommendations with a free account."),n("div",{className:"loginModal__cta"},void 0,this.renderFacebookLoginButton(),this.renderAmazonLoginButton(),n("div",{className:"loginModal__button"},void 0,n(c.default,{fullWidth:!0,signUpUrl:this.state.signUpUrl})),n("span",{className:"u-defaultType"},void 0,"Already a member?  ",n("a",{href:this.state.signInUrl,rel:"nofollow"},void 0,"Sign in"))),n(p.default,{termsUrl:this.props.path.termsUrl,privacyUrl:this.props.path.privacyUrl})))},render:function(){return this.state.isShown?n(d.default,{id:"LoginInterstitial",centered:!0,onCloseHandler:this.onCloseHandler,responsive:this.isResponsive(),showByDefault:!0},void 0,this.renderContent()):null}})},{"../../../modules/ajax/ajax_helper":4,"../../gr_component_factory":108,"../../login/amazon_login_button":136,"../../login/facebook_login_button":137,"../../login/register_button":139,"../../login/service_terms_and_privacy":140,"../../modal":142,classnames:"classnames"}],139:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("../gr_component_factory")),e=o(e("react"));r.default=s.default.createClass({displayName:"RegisterButton",propTypes:{fullWidth:e.default.PropTypes.bool,signUpUrl:e.default.PropTypes.string.isRequired},getDefaultProps:function(){return{fullWidth:!1}},render:function(){return n("a",{className:"gr-button gr-button--large "+(this.props.fullWidth?"gr-button--fullWidth":""),href:this.props.signUpUrl},void 0,"Sign up with email")}})},{"../gr_component_factory":108,react:"react"}],140:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("../gr_component_factory")),e=o(e("react"));r.default=s.default.createClass({displayName:"ServiceTermsAndPrivacy",propTypes:{privacyUrl:e.default.PropTypes.string.isRequired,termsUrl:e.default.PropTypes.string.isRequired},render:function(){return n("small",{},void 0,"By clicking â€œSign upâ€ I agree to the Goodreads ",n("a",{href:this.props.termsUrl,rel:"nofollow",target:"_blank"},void 0,"Terms of Service")," and confirm that I am at least 13 years old.  Read our ",n("a",{href:this.props.privacyUrl,rel:"nofollow",target:"_blank"},void 0,"Privacy Policy"))}})},{"../gr_component_factory":108,react:"react"}],141:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0}),r.MENU_LINK_TRACKING_PREFIX=void 0;var s=o(e("react")),i=o(e("./gr_component_factory")),a=e("lodash"),l=e("../modules/click_and_view_tracking");r.MENU_LINK_TRACKING_PREFIX="MenuLink";r.default=i.default.createClass({displayName:"MenuLink",propTypes:{href:s.default.PropTypes.string,linkText:s.default.PropTypes.any,linkClass:s.default.PropTypes.string,method:s.default.PropTypes.oneOf(["POST","PUT","DELETE"])},getFriendlyMenuLinkTrackingName:function(e){if("string"!=typeof e)return"MenuLink_Unknown";e=(0,a.camelCase)(e);return"MenuLink_"+(e[0].toUpperCase()+e.slice(1))},render:function(){var t=this;return n("li",{role:"menuitem",className:"menuLink"},void 0,this.props.children?n("span",{},void 0,this.props.children):n("a",{href:this.props.href,className:this.props.linkClass,"data-method":this.props.method,onClick:function(e){return(0,l.trackNavEngageClick)(e,t.getFriendlyMenuLinkTrackingName(t.props.linkText))}},void 0,this.props.linkText))}})},{"../modules/click_and_view_tracking":8,"./gr_component_factory":108,lodash:"lodash",react:"react"}],142:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=o(e("./gr_component_factory")),a=o(e("reflux")),l=o(e("classnames")),d=o(e("../react_stores/modal_store")),c=o(e("../react_actions/modal_actions")),p=o(e("./close_button")),f=o(e("../modules/keys")),h=e("lodash"),_=e("../modules/close_button_values");r.default=i.default.createClass({displayName:"Modal",mixins:[a.default.connect(d.default,"modalStore")],propTypes:{asDrawer:s.default.PropTypes.bool,id:s.default.PropTypes.string.isRequired,centered:s.default.PropTypes.bool,showByDefault:s.default.PropTypes.bool,onCloseHandler:s.default.PropTypes.func,onConfirmHandler:s.default.PropTypes.func,lockBodyScroll:s.default.PropTypes.bool,responsive:s.default.PropTypes.bool},getCloseButtonVariant:function(){return this.props.asDrawer?_.VARIANTS.DARK_BG:_.VARIANTS.DEFAULT},getDefaultProps:function(){return{asDrawer:!1,centered:!1,showByDefault:!1,lockBodyScroll:!0,responsive:!1}},componentDidMount:function(){this.props.showByDefault&&c.default.openModal(this.props.id)},componentDidUpdate:function(){this.updateBodyScrollability()},updateBodyScrollability:function(){this.props.lockBodyScroll&&this.isActive()?document.body.classList.add("modalOpened"):this.state.modalStore.currentActiveModal||document.body.classList.remove("modalOpened")},hide:function(){c.default.closeModal(),this.props.onCloseHandler&&(0,h.isFunction)(this.props.onCloseHandler)&&this.props.onCloseHandler()},isActive:function(){return this.state.modalStore.currentActiveModal===this.props.id},hideOnOverlayClick:function(e){-1<e.target.className.indexOf("modal--overlay")&&this.hide()},hideOnEscape:function(e){f.default.isDefaultCloserKey(e.keyCode)&&this.hide()},handleConfirm:function(){this.props.onConfirmHandler&&this.props.onConfirmHandler(),this.hide()},renderConfirmButtons:function(){return n("div",{className:"modal__confirmButtonsContainer"},void 0,n("button",{className:"gr-button gr-button--large gr-button--dark u-marginRightMedium","data-testid":"confirm",onClick:this.handleConfirm,type:"button"},void 0,"Confirm"),n("button",{className:"gr-button gr-button--large","data-testid":"cancel",onClick:this.hide,type:"button"},void 0,"Cancel"))},render:function(){var e=(0,l.default)("modal","modal--overlay",{"modal--show":this.isActive()&&!this.props.centered,"modal--centered":this.isActive()&&this.props.centered,"modal--drawer":this.props.asDrawer&&!this.props.responsive,"modal--responsive":this.props.responsive});return s.default.createElement("div",{className:e,ref:"modalContent",tabIndex:"0",onClick:this.hideOnOverlayClick,onKeyDown:this.hideOnEscape},this.renderContents())},renderContents:function(){return this.props.asDrawer?n("div",{},void 0,n("div",{className:"modal__close"},void 0,n(p.default,{action:this.hide,variant:this.getCloseButtonVariant()})),n("div",{className:this.withBemModifiers("modal__content")},void 0,this.props.children)):n("div",{className:this.withBemModifiers("modal__content")},void 0,n("div",{className:"modal__close"},void 0,n(p.default,{action:this.hide,variant:this.getCloseButtonVariant()})),this.props.children,this.props.onConfirmHandler&&this.renderConfirmButtons())}})},{"../modules/close_button_values":9,"../modules/keys":16,"../react_actions/modal_actions":38,"../react_stores/modal_store":251,"./close_button":83,"./gr_component_factory":108,classnames:"classnames",lodash:"lodash",react:"react",reflux:"reflux"}],143:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("./gr_component_factory")),i=o(e("../react_actions/modal_actions")),a=o(e("../react_stores/modal_store")),l=o(e("react")),e=o(e("reflux"));r.default=s.default.createClass({displayName:"ModalTrigger",mixins:[e.default.connect(a.default,"modalStore")],propTypes:{id:l.default.PropTypes.string.isRequired,clickHandler:l.default.PropTypes.func},isActive:function(){return this.state.modalStore.currentActiveModal===this.props.id},openModal:function(){this.props.clickHandler&&this.props.clickHandler(),i.default.openModal(this.props.id)},render:function(){return n("a",{className:this.withBemModifiers("modalTrigger"),onClick:this.openModal,role:"button","aria-expanded":this.isActive(),"aria-haspopup":!0},void 0,this.props.children)}})},{"../react_actions/modal_actions":38,"../react_stores/modal_store":251,"./gr_component_factory":108,react:"react",reflux:"reflux"}],144:[function(e,t,r){"use strict";var u,o=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),e=function(e){return o("div",{},void 0,o("a",{href:e.newsUrl},void 0,o("div",{className:"editorialCard__image--interview editorialCard__image--interviewAuthor",style:{backgroundImage:"url("+e.authorImageUrl+")"}}),o("div",{className:"editorialCard__image--interview editorialCard__image--interviewBook",style:{backgroundImage:"url("+e.bookImageUrl+")"}})))};e.propTypes={authorImageUrl:n.PropTypes.string.isRequired,bookImageUrl:n.PropTypes.string.isRequired,newsUrl:n.PropTypes.string.isRequired},r.default=e},{react:"react"}],145:[function(e,t,r){"use strict";var u,o=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),e=function(e){return o("div",{},void 0,o("a",{href:e.newsUrl},void 0,o("img",{className:"newsPreview__newsImage",src:e.newsImageUrl})))};e.propTypes={newsImageUrl:n.PropTypes.string.isRequired,newsUrl:n.PropTypes.string.isRequired},r.default=e},{react:"react"}],146:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,d=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}),n=function(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e};function s(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("react"),c=o(e("../dot_separated_elements")),a=o(e("./news_image")),l=o(e("./author_book_image")),p=o(e("classnames")),n=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(f,i.Component),n(f,[{key:"renderImageSection",value:function(e){var t=e.newsUrl,r=e.newsImageUrl,o=e.authorImageUrl,e=e.bookImageUrl;return r?d(a.default,{newsImageUrl:r,newsUrl:t}):o&&e?d(l.default,{newsUrl:t,authorImageUrl:o,bookImageUrl:e}):null}},{key:"renderTextSection",value:function(e){var t=e.likeCount,r=e.commentCount,o=e.title,n=e.excerpt,s=e.newsUrl,i=this.props,a=i.isMobile,l=i.showLikesComments,e=a?"h4":"a",i=(0,p.default)("gr-h4 gr-h4--serif",{"newsPreview__newsHeader--mobile":a,newsPreview__newsHeader:!a}),a=(0,p.default)({newsPreview__likesAndComments__text:!a});return d("div",{className:"newsPreview__textSection"},void 0,d("div",{},void 0,d(e,{className:i,href:s},void 0,o)),d("div",{className:"newsPreview__excerpt",dangerouslySetInnerHTML:{__html:""+n}}),d("div",{className:"newsPreview__readMore"},void 0,d("a",{href:s},void 0,"Read more...")),l&&d("div",{className:"newsPreview__likesAndComments"},void 0,d("small",{className:a},void 0,d(c.default,{elements:[t+" likes",r+" comments"]}))))}},{key:"render",value:function(){var t=this,e=this.props,r=e.isMobile,o=e.imageOnLeft,e=e.isBookPage,e=(0,p.default)({brownBackground:!r,"newsPreview__sectionHeader--mobile":r,"newsPreview__sectionHeader--bookPage":e&&!r}),n=(0,p.default)("newsPreview__item",{"newsPreview__item--mobile":r});return d("div",{className:"bigBox clearFloats"},void 0,d("div",{className:"h2Container gradientHeaderContainer"},void 0,d("h2",{className:e},void 0,this.props.sectionHeader)),this.props.newsItems.map(function(e){return d("div",{className:n},e.key,r||o?t.renderImageSection(e):t.renderTextSection(e),r||o?t.renderTextSection(e):t.renderImageSection(e))}))}}]),f);function f(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(f).apply(this,arguments))}n.defaultProps={likeCount:0,commentCount:0,isMobile:!1,isBookPage:!1,showLikesComments:!0,imageOnLeft:!1},n.propTypes={sectionHeader:i.PropTypes.string,isMobile:i.PropTypes.bool,isBookPage:i.PropTypes.bool,showLikesComments:i.PropTypes.bool,imageOnLeft:i.PropTypes.bool,newsItems:i.PropTypes.arrayOf(i.PropTypes.shape({likeCount:i.PropTypes.number,commentCount:i.PropTypes.number,title:i.PropTypes.string.isRequired,excerpt:i.PropTypes.string.isRequired,newsImageUrl:i.PropTypes.string,authorImageUrl:i.PropTypes.string,bookImageUrl:i.PropTypes.string,newsUrl:i.PropTypes.string.isRequired}))},r.default=n},{"../dot_separated_elements":89,"./author_book_image":144,"./news_image":145,classnames:"classnames",react:"react"}],147:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("./gr_component_factory")),e=o(e("react"));r.default=s.default.createClass({displayName:"PageSkin",propTypes:{imageUrl:e.default.PropTypes.string,backgroundColor:e.default.PropTypes.string},render:function(){var e={};return this.props.imageUrl&&(e.backgroundImage="url("+this.props.imageUrl+")",e.backgroundRepeat="no-repeat",e.backgroundPosition="center top"),this.props.backgroundColor&&(e.backgroundColor=this.props.backgroundColor),n("div",{className:"pageskin",style:e})}})},{"./gr_component_factory":108,react:"react"}],148:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=o(e("lodash")),a=o(e("classnames")),l=o(e("./gr_component_factory")),d=o(e("./pagination_single_page_link")),e=o(e("./shared/gr_prop_types"));r.default=l.default.createClass({displayName:"PaginationLinks",propTypes:{asButtons:s.default.PropTypes.bool,totalSize:e.default.naturalNumber.isRequired,currentPageNumber:s.default.PropTypes.number.isRequired,className:s.default.PropTypes.string,perPage:e.default.naturalNumber.isRequired,changePageAction:s.default.PropTypes.func.isRequired},getDefaultProps:function(){return{asButtons:!1}},maxPageNumber:function(){return Math.ceil(this.props.totalSize/this.props.perPage)},renderLinkToPage:function(e){return n(d.default,{pageNumber:e,currentPageNumber:this.props.currentPageNumber,changePageAction:this.props.changePageAction},e)},renderPageLinks:function(){var t=this,e=this.maxPageNumber();return 1!==e?e<=6?n("span",{className:"gr-paginationLinks__pageLinksWrapper"},void 0,i.default.times(e,function(e){return t.renderLinkToPage(e+1)})):this.props.currentPageNumber<=3?n("span",{className:"gr-paginationLinks__pageLinksWrapper"},void 0,i.default.times(4,function(e){return t.renderLinkToPage(e+1)}),"â€¦",this.renderLinkToPage(this.maxPageNumber())):this.props.currentPageNumber>=this.maxPageNumber()-3?n("span",{className:"gr-paginationLinks__pageLinksWrapper"},void 0,this.renderLinkToPage(1),"â€¦",this.renderLinkToPage(this.maxPageNumber()-3),this.renderLinkToPage(this.maxPageNumber()-2),this.renderLinkToPage(this.maxPageNumber()-1),this.renderLinkToPage(this.maxPageNumber())):n("span",{className:"gr-paginationLinks__pageLinksWrapper"},void 0,this.renderLinkToPage(1),"â€¦",this.renderLinkToPage(this.props.currentPageNumber),this.renderLinkToPage(this.props.currentPageNumber+1),this.renderLinkToPage(this.props.currentPageNumber+2),"â€¦",this.renderLinkToPage(this.maxPageNumber())):void 0},renderPrevLink:function(){if(1===this.maxPageNumber())return null;var e=(0,a.default)({"gr-paginationLinks__previousLink":!this.props.asButtons,"gr-paginationLinks__previousButton":this.props.asButtons,"gr-button":this.props.asButtons,"gr-button--large":this.props.asButtons});return n("button",{"aria-label":"Previous page",className:e,onClick:this.moveToPrevPage,disabled:1===this.props.currentPageNumber},void 0,"â† Previous")},renderNextLink:function(){if(1===this.maxPageNumber())return null;var e=(0,a.default)({"gr-paginationLinks__nextLink":!this.props.asButtons,"gr-paginationLinks__nextButton":this.props.asButtons,"gr-button":this.props.asButtons,"gr-button--large":this.props.asButtons});return n("button",{"aria-label":"Next page",className:e,onClick:this.moveToNextPage,disabled:this.props.currentPageNumber===this.maxPageNumber()},void 0,"Next â†’")},moveToNextPage:function(e){e.preventDefault(),this.props.changePageAction(this.props.currentPageNumber+1)},moveToPrevPage:function(e){e.preventDefault(),this.props.changePageAction(this.props.currentPageNumber-1)},render:function(){var e=(0,a.default)("gr-paginationLinks",{"gr-paginationLinks--asButtons":this.props.asButtons},this.props.className);return n("div",{className:e},void 0,n("span",{className:"gr-paginationLinks__previousLinkWrapper"},void 0,this.renderPrevLink()),this.renderPageLinks(),n("span",{className:"gr-paginationLinks__nextLinkWrapper"},void 0,this.renderNextLink()))}})},{"./gr_component_factory":108,"./pagination_single_page_link":149,"./shared/gr_prop_types":179,classnames:"classnames",lodash:"lodash",react:"react"}],149:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),e=o(e("./gr_component_factory"));r.default=e.default.createClass({displayName:"PaginationSinglePageLink",propTypes:{pageNumber:s.default.PropTypes.number,currentPageNumber:s.default.PropTypes.number,changePageAction:s.default.PropTypes.func.isRequired},render:function(){return this.props.pageNumber===this.props.currentPageNumber?n("span",{"aria-label":this.props.pageNumber+" current page",className:"gr-paginationLinks__pageNumLink\n                         gr-paginationLinks__pageNumLink--selected"},void 0,this.props.pageNumber):n("button",{className:"gr-paginationLinks__pageNumLink",onClick:this.jumpToPage},void 0,this.props.pageNumber)},jumpToPage:function(e){e.preventDefault(),this.props.changePageAction(this.props.pageNumber)}})},{"./gr_component_factory":108,react:"react"}],150:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,i=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0}),r.shouldDisplayPreviewBookButton=void 0;var n=o(e("reflux")),s=o(e("../gr_component_factory")),a=o(e("../shared/gr_prop_types")),l=o(e("../modal")),d=o(e("../modal_trigger")),c=o(e("../../react_stores/modal_store")),p=o(e("../../react_actions/newsfeed_actions")),f=o(e("./report_wrong_book_button")),h=o(e("./report_wrong_book_form")),_=o(e("./wrong_book_report_acknowledgment")),m=o(e("../../react_stores/user_agent_capabilities_store")),g=e("../../modules/ads/click_tracking_helper"),v=r.shouldDisplayPreviewBookButton=function(e,t){return(!t||!0!==t.touch)&&!!e.kcrPreviewUrl};r.default=s.default.createClass({displayName:"PreviewBook",mixins:[n.default.connect(c.default,"modalStore"),n.default.connect(m.default,"userAgentCapabilities")],propTypes:{book:a.default.book().isRequired},getDefaultProps:function(){return{trackingOptions:g.TRACKED_CLASSES.preview_book}},getInitialState:function(){return{previewViewed:!1,uniqueId:Math.random(1e6)}},getReportWrongBookModalId:function(){return"report-"+this.props.book.kcrPreviewUrl+this.state.uniqueId},getPreviewModalId:function(){return this.props.book.kcrPreviewUrl+this.state.uniqueId},getAcknowledgmentModalId:function(){return"acknowledge-"+this.props.book.kcrPreviewUrl+this.state.uniqueId},openBookPreview:function(){p.default.previewBook(),this.setState({previewViewed:!0})},render:function(){var e=null,t=null,r=null,o=this.getPreviewModalId(),n=this.getReportWrongBookModalId(),s=this.getAcknowledgmentModalId();return this.state.modalStore.currentActiveModal===o&&(e=i("div",{className:"previewBook__container"},void 0,i("div",{className:"previewBook__topBanner"},void 0,i("div",{className:"previewBook__headerText"},void 0,"Preview -Â ",i("cite",{},void 0,this.props.book.title)),i(f.default,{book:this.props.book,modalId:n})),i("iframe",{className:"previewBook__kcrPreview",src:this.props.book.kcrPreviewUrl}))),this.state.previewViewed&&(t=i(h.default,{book:this.props.book,modalId:n,acknowledgmentModalId:s}),r=i(_.default,{modalId:s})),v(this.props.book,this.state.userAgentCapabilities)?i("span",{className:"previewBook"},void 0,i(d.default,{id:o},void 0,i("button",{"aria-label":"Preview "+this.props.book.title,className:"gr-buttonAsLink\n                             previewBook__openPreview",onClick:this.openBookPreview},void 0,"Preview Book")),t,r,i(l.default,{id:o,bemModifiers:"preview"},void 0,e)):null}})},{"../../modules/ads/click_tracking_helper":2,"../../react_actions/newsfeed_actions":39,"../../react_stores/modal_store":251,"../../react_stores/user_agent_capabilities_store":260,"../gr_component_factory":108,"../modal":142,"../modal_trigger":143,"../shared/gr_prop_types":179,"./report_wrong_book_button":151,"./report_wrong_book_form":152,"./wrong_book_report_acknowledgment":153,reflux:"reflux"}],151:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=o(e("../gr_component_factory")),a=o(e("../shared/gr_prop_types")),l=o(e("../modal_trigger"));r.default=i.default.createClass({displayName:"ReportWrongBookButton",propTypes:{book:a.default.book().isRequired,modalId:s.default.PropTypes.string.isRequired},render:function(){return n("div",{className:"previewBook__reportWrongBookButtonContainer"},void 0,n(l.default,{id:this.props.modalId},void 0,n("button",{"aria-label":"This is not the right book.",className:"gr-buttonAsLink\n                               previewBook__reportWrongBookButton"},void 0,"Not the book youâ€™re looking for?")))}})},{"../gr_component_factory":108,"../modal_trigger":143,"../shared/gr_prop_types":179,react:"react"}],152:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=o(e("../gr_component_factory")),a=o(e("../shared/gr_prop_types")),l=o(e("../modal")),d=o(e("../../react_actions/modal_actions")),c=o(e("lodash")),p={wrongBook:"Itâ€™s the wrong book",wrongEdition:"Itâ€™s the wrong edition",other:"Other"};r.default=i.default.createClass({displayName:"ReportWrongBookForm",propTypes:{book:a.default.book().isRequired,modalId:s.default.PropTypes.string.isRequired,acknowledgmentModalId:s.default.PropTypes.string.isRequired},getAuthorString:function(){return"by "+this.props.book.authorName},showReportAcknowledgement:function(){d.default.openModal(this.props.acknowledgmentModalId)},closeModal:function(e){e.preventDefault(),d.default.closeModal()},renderWrongBookForm:function(){var r=[];return c.default.forEach(p,function(e,t){r.push(n("option",{value:t},t,e))}),n("form",{className:"previewBook__reportWrongBookForm",action:"/kindle_book_mapping_flags","data-remote":"true",method:"post"},void 0,"Weâ€™d love your help. Let us know whatâ€™s wrong with this preview ofÂ ",n("cite",{},void 0,this.props.book.title),this.props.book.authorName?this.getAuthorString():"",".",n("br",{}),n("input",{type:"hidden",name:"kindle_book_mapping_flag[book_id]",value:this.props.book.bookId}),n("div",{className:"gr-formInputContainer"},void 0,n("label",{className:"gr-label",htmlFor:"kindle_book_mapping_flag_reason"},void 0,"Problem"),n("select",{name:"kindle_book_mapping_flag[reason]",id:"kindle_book_mapping_flag_reason"},void 0,r)),n("div",{className:"gr-formInputContainer"},void 0,n("label",{className:"gr-label",htmlFor:"kindle_book_mapping_flag_other_reason"},void 0,"Details (if other)"),n("input",{name:"kindle_book_mapping_flag[other_reason]",id:"kindle_book_mapping_flag_other_reason"})),n("button",{className:"gr-button gr-button--modalPrimaryLeft",type:"submit",onClick:this.showReportAcknowledgement},void 0,"Report Problem"),n("button",{className:"gr-buttonAsLink",onClick:this.closeModal,type:"button"},void 0,"Cancel"))},render:function(){return n(l.default,{id:this.props.modalId},void 0,n("h2",{},void 0,"See a Problem?"),this.renderWrongBookForm())}})},{"../../react_actions/modal_actions":38,"../gr_component_factory":108,"../modal":142,"../shared/gr_prop_types":179,lodash:"lodash",react:"react"}],153:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=o(e("../gr_component_factory")),a=o(e("../modal")),l=o(e("../../react_actions/modal_actions"));r.default=i.default.createClass({displayName:"WrongBookReportAcknowledgment",propTypes:{modalId:s.default.PropTypes.string.isRequired},render:function(){return n("div",{className:"previewBook__wrongBookReportAcknowledgment"},void 0,n(a.default,{id:this.props.modalId},void 0,"Thanks for telling us about the problem.",n("div",{},void 0,n("button",{className:"gr-button",onClick:l.default.closeModal},void 0,"Close"))))}})},{"../../react_actions/modal_actions":38,"../gr_component_factory":108,"../modal":142,react:"react"}],154:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("./qualtrics_survey_modal")),i=o(e("./random_helper")),a="book_show_ev_368_seen";r.default=function(e){return"object"==((t=e.deployServices)&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t)&&e.deployServices.book_page_survey_qualtrics&&1e4*i.default.random()<5&&Modernizr&&Modernizr.localstorage&&"true"!==window.localStorage.getItem(a)?(window.localStorage.setItem(a,!0),React.createElement(s.default,e)):n("noscript",{});var t}},{"./qualtrics_survey_modal":157,"./random_helper":158}],155:[function(e,t,r){"use strict";var o=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e};function n(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}Object.defineProperty(r,"__esModule",{value:!0});var s,i=e("react"),a=e("./qualtrics_survey_modal"),l=(s=a)&&s.__esModule?s:{default:s},o=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(u,i.Component),o(u,[{key:"componentDidMount",value:function(){var t=this,e=document.getElementById(this.props.buttonId);if(!e)return null;e=e.querySelectorAll("button.wtrExclusiveShelf[value='to-read'], button.wtrToRead[type='submit']");[].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(e)).forEach(function(e){return e.addEventListener("click",t.handleWTR)})}},{key:"handleWTR",value:function(){var e=this;this.state.renderModal||setTimeout(function(){return e.setState({renderModal:!0})},2500)}},{key:"render",value:function(){return this.state.renderModal?React.createElement(l.default,this.props):null}}]),u);function u(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(u).call(this,e));return e.state={renderModal:!1},e.handleWTR=e.handleWTR.bind(e),e}(r.default=o).propTypes={buttonId:i.PropTypes.string.isRequired}},{"./qualtrics_survey_modal":157,react:"react"}],156:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),s=o(e("./book_page_survey_modal")),i=o(e("./book_show_survey_modal")),a=o(e("./qualtrics_survey_modal")),e=o(e("../../react_wrappers/with_deploy_services_async")),l={signed_in_book_show:i.default,book_show:(0,e.default)(s.default,["book_page_survey_qualtrics"])},s=function(e){var t=l[e.type]||a.default;return React.createElement(t,e)};s.propTypes={type:n.PropTypes.oneOf(Object.keys(l))},r.default=s},{"../../react_wrappers/with_deploy_services_async":265,"./book_page_survey_modal":154,"./book_show_survey_modal":155,"./qualtrics_survey_modal":157,react:"react"}],157:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}),s=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}Object.defineProperty(r,"__esModule",{value:!0}),r.QUALTRICS_COOKIE=void 0;var a=e("react"),l=o(e("../modal")),d=o(e("../shared/cookies")),c=e("../../modules/ajax/ajax_helper"),p=r.QUALTRICS_COOKIE="hide_qualtrics_survey",s=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(f,a.Component),s(f,[{key:"componentDidMount",value:function(){var e=this.shouldShow();e&&((0,c.httpPost)("/track/track",{data:{tid:"QualtricsSurveyModal:"+(this.props.type||"default")}}),this.setState({isShown:e}))}},{key:"shouldShow",value:function(){return!d.default.get(p)&&(!this.props.signedOut||!!d.default.get("blocking_sign_in_interstitial"))}},{key:"onCloseHandler",value:function(){d.default.set(p,!0,90)}},{key:"renderSurvey",value:function(){return n("div",{className:"qualtricsSurvey"},void 0,n("iframe",{className:"qualtricsSurvey__iframe",src:this.props.qualtricsUrl}))}},{key:"render",value:function(){return this.state.isShown?n(l.default,{id:"QualtricsSurveyModal",showByDefault:!0,onCloseHandler:this.onCloseHandler},void 0,this.renderSurvey()):null}}]),f);function f(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f);e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(f).call(this,e));return e.state={isShown:!1},e}s.propTypes={signedOut:a.PropTypes.bool.isRequired,qualtricsUrl:a.PropTypes.string.isRequired,type:a.PropTypes.string},r.default=s},{"../../modules/ajax/ajax_helper":4,"../modal":142,"../shared/cookies":178,react:"react"}],158:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.default={random:function(){return Math.random()}}},{}],159:[function(e,t,r){"use strict";var u,o=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var n,s=e("../shared/gr_prop_types"),i=(n=s)&&n.__esModule?n:{default:n},e=function(e){return o("div",{className:"annotatedBookItem"},void 0,o("a",{className:"annotatedBookItem__knhLink",href:e.annotatedBookData.readingNotesUrl},void 0,o("div",{className:"annotatedBookItem__box gr-row"},void 0,o("div",{className:"annotatedBookItem__imageColumn gr-col-12 gr-col-lg-auto"},void 0,o("img",{src:e.annotatedBookData.imageUrl})),o("div",{className:"annotatedBookItem__mainColumn gr-col-12 gr-col-lg-auto"},void 0,o("div",{className:"annotatedBookItem__bookInfo"},void 0,o("div",{className:"annotatedBookItem__bookInfo__bookTitle"},void 0,e.annotatedBookData.title),o("div",{className:"annotatedBookItem__bookInfo__bookAuthor"},void 0,"By ",e.annotatedBookData.authorName),(e=e.annotatedBookData).noSharedAnnotations?o("div",{},void 0,o("div",{className:"annotatedBookItem__bookInfo__knhCta annotatedBookItem__bookInfo__knhCta--noneVisible"},void 0,e.knhCta)):o("div",{},void 0,o("div",{className:"annotatedBookItem__bookInfo__knhCta"},void 0,e.knhCta)))))))};e.propTypes={annotatedBookData:i.default.readingNotesAnnotatedBookItem().isRequired},r.default=e},{"../shared/gr_prop_types":179}],160:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("../gr_component_factory")),i=e("react"),a=o(e("../shared/gr_prop_types")),l=o(e("./reading_notes_header")),d=o(e("./annotated_books_page"));r.default=s.default.createClass({displayName:"AnnotatedBooksLandingPage",propTypes:{user:a.default.user().isRequired,viewerIsOwner:i.PropTypes.bool.isRequired,canViewProfile:i.PropTypes.bool.isRequired,ownerHasLinkedAmazonAccount:i.PropTypes.bool.isRequired,headline:i.PropTypes.string.isRequired,createLinking:i.PropTypes.string,updateLinking:i.PropTypes.string,learnMore:i.PropTypes.string,contactUs:i.PropTypes.string,isSignedIn:React.PropTypes.bool.isRequired,signInRedirectUrl:React.PropTypes.string.isRequired},renderView:function(){return n("div",{},void 0,n(l.default,{user:this.props.user,headline:this.props.headline,isSignedIn:this.props.isSignedIn,signInRedirectUrl:this.props.signInRedirectUrl,viewerIsOwner:this.props.viewerIsOwner}),n(d.default,{user:this.props.user,viewerIsOwner:this.props.viewerIsOwner,canViewProfile:this.props.canViewProfile,ownerHasLinkedAmazonAccount:this.props.ownerHasLinkedAmazonAccount,createLinking:this.props.createLinking,updateLinking:this.props.updateLinking,learnMore:this.props.learnMore,contactUs:this.props.contactUs}))},render:function(){return n("div",{className:"gr-annotatedBooksPage"},void 0,this.renderView())}})},{"../gr_component_factory":108,"../shared/gr_prop_types":179,"./annotated_books_page":162,"./reading_notes_header":164,react:"react"}],161:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("../gr_component_factory")),i=e("react"),a=e("lodash"),l=o(e("./annotated_book_item"));r.default=s.default.createClass({displayName:"AnnotatedBooksList",propTypes:{annotatedBooksCollection:i.PropTypes.array.isRequired},render:function(){return n("div",{className:"annotatedBooksList"},void 0,(0,a.map)(this.props.annotatedBooksCollection,function(e){return n(l.default,{annotatedBookData:e},e.asin)}))}})},{"../gr_component_factory":108,"./annotated_book_item":159,lodash:"lodash",react:"react"}],162:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("../gr_component_factory")),i=e("react"),a=o(e("../shared/gr_prop_types")),l=o(e("reflux")),d=e("lodash"),c=e("../../modules/reading_notes/reading_notes_helper"),p=o(e("./annotated_books_list")),f=o(e("../flash_message")),h=o(e("../../react_actions/reading_notes/annotated_books_actions")),_=o(e("../../react_stores/reading_notes/annotated_books_store")),m=o(e("../spinner"));r.default=s.default.createClass({displayName:"AnnotatedBooksPage",mixins:[l.default.connect(_.default,"annotatedBooksStore")],propTypes:{user:a.default.user().isRequired,viewerIsOwner:i.PropTypes.bool.isRequired,canViewProfile:i.PropTypes.bool.isRequired,ownerHasLinkedAmazonAccount:i.PropTypes.bool.isRequired,createLinking:i.PropTypes.string,updateLinking:i.PropTypes.string,learnMore:i.PropTypes.string,contactUs:i.PropTypes.string},createLinkHandler:function(){window.open(this.props.createLinking,"","width=900, height=540")},loadAnnotatedBooksHandler:function(){h.default.loadAnnotatedBooks(this.props.user.id)},componentWillMount:function(){this.props.ownerHasLinkedAmazonAccount&&h.default.loadAnnotatedBooks(this.props.user.id)},render:function(){var e=this.state.annotatedBooksStore,t=this.props.viewerIsOwner?this.props.ownerHasLinkedAmazonAccount?(0,d.isEmpty)(e.annotatedBooksCollection)?e.showSpinner?this.renderLoadingView():this.renderEmptyOwnerView():this.renderOwnerCollection():this.renderUnlinkedView():this.props.canViewProfile&&this.props.ownerHasLinkedAmazonAccount?(0,d.isEmpty)(e.annotatedBooksCollection)?e.showSpinner?this.renderLoadingView():this.renderEmptyVisitorView():this.renderVisitorCollection():this.renderEmptyVisitorView();return n("div",{className:"annotatedBooksPage"},void 0,e.showError?n(f.default,{category:"error",message:c.BOOK_LOAD_ERROR_MSG}):null,t)},renderLoadingView:function(){return n("div",{className:"annotatedBooksPage__loading"},void 0,n(m.default,{}))},renderUnlinkedView:function(){return n("div",{className:"annotatedBooksPage__unlinked"},void 0,n("div",{className:"annotatedBooksPage__unlinked__gkLogo"}),n("p",{className:"annotatedBooksPage__unlinked__description"},void 0,"Link your Goodreads and Amazon accounts to access your Kindle notes and highlights on Goodreads."),n("p",{className:"annotatedBooksPage__unlinked__learnMore"},void 0,n("a",{href:this.props.learnMore},void 0,"Learn More about Kindle Notes & Highlights")),n("div",{className:"annotatedBooksPage__unlinked__linkBtn"},void 0,n("button",{className:"gr-button gr-button--dark gr-button--fullWidth",onClick:this.createLinkHandler},void 0,"Connect your accounts")))},renderEmptyOwnerView:function(){return n("div",{className:"annotatedBooksPage__empty"},void 0,n("div",{className:"annotatedBooksPage__empty__description"},void 0,"It looks like you donâ€™t have any Kindle ebooks with notes or highlights.",n("a",{className:"annotatedBooksPage__empty__description__link",href:this.props.learnMore},void 0,"Learn More"),"about Kindle Notes & Highlights and",n("a",{className:"annotatedBooksPage__empty__description__link",href:this.props.contactUs},void 0,"contact us"),"if you have any questions."),n("div",{className:"annotatedBooksPage__empty__content"},void 0,n("div",{className:"annotatedBooksPage__empty__gkLogo"}),n("p",{className:"annotatedBooksPage__emptyOwner__status"},void 0,"Your Goodreads account is connected to your Amazon account."),n("div",{className:"annotatedBooksPage__empty__updateLink"},void 0,n("a",{href:this.props.updateLinking},void 0,"Update account linking"))))},renderEmptyVisitorView:function(){return n("div",{className:"annotatedBooksPage__empty"},void 0,n("div",{className:"annotatedBooksPage__empty__description"},void 0,this.props.user.firstName," has not posted any Kindle Notes & Highlights yet.",n("a",{className:"annotatedBooksPage__empty__description__link",href:this.props.learnMore},void 0,"Learn More about Kindle Notes & Highlights")))},renderOwnerCollection:function(){var e=this.state.annotatedBooksStore;return n("div",{className:"annotatedBooksPage__collection"},void 0,n("div",{className:"annotatedBooksPage__collection__descriptionContainer"},void 0,n("div",{className:"annotatedBooksPage__collection__description"},void 0,"Itâ€™s easy to review, edit, and share the notes and highlights you make in Kindle books."),n("div",{className:"annotatedBooksPage__collection__description"},void 0,"Below are all of the books in your Kindle Library with highlights, starting with the most recently updated.")),n(p.default,{annotatedBooksCollection:e.annotatedBooksCollection}),this.renderLoadMore())},renderVisitorCollection:function(){var e=this.state.annotatedBooksStore;return n("div",{className:"annotatedBooksPage__collection"},void 0,n("div",{className:"annotatedBooksPage__collection__descriptionContainer"},void 0,"Join in the conversation. View, like, and comment on ",this.props.user.firstName,"â€™s notes and highlights."),n(p.default,{annotatedBooksCollection:e.annotatedBooksCollection}))},renderLoadMore:function(){var e=this.state.annotatedBooksStore;return n("div",{className:"annotatedBooksPage__collection__loadMoreContainer"},void 0,e.showSpinner?n(m.default,{}):e.nextToken?n("button",{className:"annotatedBooksPage__collection__loadMoreButton gr-button gr-button--dark",onClick:this.loadAnnotatedBooksHandler},void 0,"Load More"):null)}})},{"../../modules/reading_notes/reading_notes_helper":18,"../../react_actions/reading_notes/annotated_books_actions":41,"../../react_stores/reading_notes/annotated_books_store":253,"../flash_message":106,"../gr_component_factory":108,"../shared/gr_prop_types":179,"../spinner":194,"./annotated_books_list":161,lodash:"lodash",react:"react",reflux:"reflux"}],163:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("../gr_component_factory")),i=o(e("../shared/gr_prop_types")),a=e("react"),l=o(e("../author/author_follow_button")),d=e("../../modules/shape_icon_values"),c=o(e("../user/user_follow_widget")),p=o(e("../user/user_icon")),f=o(e("../user/user_profile_link"));r.default=s.default.createClass({displayName:"ReadingNotesAnnotator",propTypes:{displayUser:i.default.user().isRequired,isSignedIn:React.PropTypes.bool.isRequired,showFollowWidget:a.PropTypes.bool,signInRedirectUrl:React.PropTypes.string.isRequired},defaultProps:{showFollowWidget:!1},renderFollowComponentIfNeeded:function(){return this.props.showFollowWidget?this.props.isSignedIn?this.props.displayUser.authorId?n(l.default,{authorId:this.props.displayUser.authorId,className:"gr-button--small u-displayBlock"}):n(c.default,{displayUser:this.props.displayUser}):n("a",{href:this.props.signInRedirectUrl,className:"gr-button gr-button--small gr-box gr-box--inline gr-box--marginRightSmall",rel:"nofollow"},void 0,"Follow"):void 0},render:function(){return n("div",{className:"readingNotesAnnotator gr-mediaFlexbox gr-mediaFlexbox--alignItemsCenter"},void 0,n("div",{className:"readingNotesAnnotator__userIcon gr-mediaFlexbox__media"},void 0,n(p.default,{user:this.props.displayUser,size:d.ICON_SIZES.MEDIUM})),n("div",{className:"gr-mediaFlexbox__desc"},void 0,n("div",{className:"readingNotesAnnotator__name"},void 0,"byÂ ",n(f.default,{user:this.props.displayUser,className:"u-defaultType"})),this.renderFollowComponentIfNeeded()))}})},{"../../modules/shape_icon_values":19,"../author/author_follow_button":72,"../gr_component_factory":108,"../shared/gr_prop_types":179,"../user/user_follow_widget":200,"../user/user_icon":201,"../user/user_profile_link":202,react:"react"}],164:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("../gr_component_factory")),i=e("react"),a=o(e("../shared/gr_prop_types")),l=o(e("./reading_notes_annotator"));r.default=s.default.createClass({displayName:"ReadingNotesHeader",propTypes:{user:a.default.user().isRequired,headline:i.PropTypes.string.isRequired,isSignedIn:React.PropTypes.bool.isRequired,signInRedirectUrl:React.PropTypes.string.isRequired,viewerIsOwner:i.PropTypes.bool.isRequired},renderAnnotator:function(){return this.props.viewerIsOwner?void 0:n(l.default,{displayUser:this.props.user,isSignedIn:this.props.isSignedIn,showFollowWidget:!this.props.viewerIsOwner,signInRedirectUrl:this.props.signInRedirectUrl})},render:function(){return n("div",{className:"readingNotesHeader"},void 0,n("div",{className:"gr-h3 gr-h3--serif readingNotesHeader__headline"},void 0,this.props.headline),this.renderAnnotator())}})},{"../gr_component_factory":108,"../shared/gr_prop_types":179,"./reading_notes_annotator":163,react:"react"}],165:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0}),r.MESSAGE=void 0;var s=o(e("react")),i=o(e("../gr_component_factory")),a=o(e("../modal")),l=o(e("../../react_components/want_to_read/want_to_read_button"));r.MESSAGE="To make your notes and highlights visible, first add this book to one of your shelves.";r.default=i.default.createClass({displayName:"ReadingNotesShelvingModal",propTypes:{book:s.default.PropTypes.shape({id:s.default.PropTypes.string.isRequired,title:s.default.PropTypes.string.isRequired,imageUrl:s.default.PropTypes.string.isRequired}).isRequired},renderModalContent:function(){return n("div",{className:"gr-mediaFlexbox"},void 0,n("img",{className:"gr-mediaFlexbox__media u-marginRightMedium",src:this.props.book.imageUrl,alt:this.props.book.title}),n("div",{className:"gr-mediaFlexbox__desc"},void 0,n("h3",{className:"gr-h3 gr-h3--noTopMargin gr-h3--serif"},void 0,"Add your book"),n("div",{className:"readingNotesShelvingModal__text"},void 0,"To make your notes and highlights visible, first add this book to one of your shelves."),n(l.default,{bookId:this.props.book.id,bookTitle:this.props.book.title,uniqueId:"readingNotesShelvingModalWTR"})))},render:function(){return n(a.default,{id:"readingNotesShelvingModal",bemModifiers:"readingNotesShelving"},void 0,this.renderModalContent())}})},{"../../react_components/want_to_read/want_to_read_button":217,"../gr_component_factory":108,"../modal":142,react:"react"}],166:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=o(e("../gr_component_factory")),a=o(e("../modal_trigger")),l=o(e("../../react_stores/shelvings_store")),e=e("../../react_mixins/gr_reflux");r.default=i.default.createClass({displayName:"ReadingNotesShelvingModalTrigger",propTypes:{bookId:s.default.PropTypes.string.isRequired,innerHtml:s.default.PropTypes.string.isRequired},mixins:[(0,e.connectToLazyStore)(l.default,"bookId",{stateKey:"shelvings"})],renderInnerHtml:function(){return n("span",{dangerouslySetInnerHTML:{__html:this.props.innerHtml}})},render:function(){return null===this.state.shelvings.exclusiveShelfName?n(a.default,{id:"readingNotesShelvingModal",bemModifiers:"readingNotesShelving"},void 0,n("div",{className:"readingNotesShelvingModalTrigger__unclickableInnerHtml"},void 0,this.renderInnerHtml())):this.renderInnerHtml()}})},{"../../react_mixins/gr_reflux":235,"../../react_stores/shelvings_store":256,"../gr_component_factory":108,"../modal_trigger":143,react:"react"}],167:[function(e,t,r){"use strict";var u,o=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}),n=function(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e};function s(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}Object.defineProperty(r,"__esModule",{value:!0}),r.WRITE_A_REVIEW=void 0;var i=e("react"),a=e("../../modules/ajax/ajax_helper"),n=(r.WRITE_A_REVIEW="Write a review",function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,i.Component),n(l,[{key:"handleButtonClick",value:function(){this.props.actionType&&this.props.bookId&&(0,a.httpPost)("/track/track_clickstream",{data:{action_type:this.props.actionType,book_id:this.props.bookId}}),window.location.assign(this.props.destinationPath)}},{key:"render",value:function(){var e="gr-button u-marginTopBottomXSmall "+this.props.className;return o("button",{className:e,onClick:this.handleButtonClick.bind(this)},void 0,"Write a review")}}]),l);function l(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(l).call(this,e))}(r.default=n).propTypes={destinationPath:i.PropTypes.string.isRequired}},{"../../modules/ajax/ajax_helper":4,react:"react"}],168:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=o(e("./gr_component_factory")),a=e("../modules/ads/google_ad_helper");r.default=i.default.createClass({displayName:"ScrollTracker",propTypes:{experiments:s.default.PropTypes.arrayOf(s.default.PropTypes.string),trackedEventId:s.default.PropTypes.string.isRequired,viewportExpansion:s.default.PropTypes.number},getDefaultProps:function(){return{experiments:[],viewportExpansion:0}},componentDidMount:function(){var t=this;(0,a.lazyLoadOnView)(function(e){e.target.id===t.props.trackedEventId&&(t.props.experiments.length?$j.post("/track_conversion_action",{event:t.props.trackedEventId,options:{experiments:t.props.experiments,multiple:!0}}):$j.post("/track/track",{tid:t.props.trackedEventId}))})},render:function(){return n("div",{id:this.props.trackedEventId,className:"lazyload","data-expand":""+this.props.viewportExpansion})}})},{"../modules/ads/google_ad_helper":3,"./gr_component_factory":108,react:"react"}],169:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},s=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var i=o(e("react")),a=o(e("lodash")),l=o(e("../gr_component_factory")),d=o(e("reflux")),c=o(e("react-onclickoutside")),p=o(e("classnames")),f=o(e("../../modules/keys")),h=o(e("../../react_stores/book_search_store_factory")),_=o(e("./book_search_results")),m=o(e("../spinner")),e=o(e("../../react_mixins/factory_store_mixin"));r.default=l.default.createClass({displayName:"BookSearch",mixins:[c.default,d.default.ListenerMixin,(0,e.default)(h.default)],propTypes:{autoFocus:i.default.PropTypes.bool,onChooseResult:i.default.PropTypes.func.isRequired,maxResults:i.default.PropTypes.number,shelfName:i.default.PropTypes.string,searchPath:i.default.PropTypes.string.isRequired,closeAfterResultChosen:i.default.PropTypes.bool,autocompleteUrl:i.default.PropTypes.string.isRequired,signedIn:i.default.PropTypes.bool,deviceType:i.default.PropTypes.string},getDefaultProps:function(){return{autoFocus:!1,maxResults:5,closeAfterResultChosen:!1}},componentDidMount:function(){var t=this;this.delayedSearch=a.default.debounce(function(e){t.actions.search(e.target.value,t.props.autocompleteUrl)},300),this.signedInStr=this.props.signedIn?"SignedIn":"SignedOut"},hide:function(){this.actions.setShowResultsContainer(!1)},show:function(){this.actions.setShowResultsContainer(!0)},handleClickOutside:function(){this.hide()},handleSearch:function(e){this.setState({searchBoxValue:e.target.value}),a.default.isEmpty(e.target.value)?this.hide():(e.persist(),this.delayedSearch(e))},handleClick:function(e){a.default.isEmpty(this.state.query)||this.handleSearch(e)},handleChoice:function(e){$j.post("/track/track_click",{feature:"NavSearch:"+this.props.deviceType+":"+this.signedInStr+":suggestion_click",pmet_value:e.rank}),this.props.elasticsearchExperiment&&$j.post("/track_conversion_action",{event:"clicked_book_suggestion",options:{experiments:this.props.elasticsearchExperiment,pmet_value:e.rank}}),this.props.onChooseResult(e),this.props.closeAfterResultChosen&&this.hide()},handleKeyPress:function(e){var t=Math.min(this.props.maxResults,this.state.results.length);f.default.isEnter(e.keyCode)?null!==this.state.activeResult?(this.handleChoice(this.state.activeResult),e.preventDefault()):a.default.isEmpty(e.target.value)&&e.preventDefault():f.default.isArrowDown(e.keyCode)?this.actions.selectNextResult(t):f.default.isArrowUp(e.keyCode)?this.actions.selectPreviousResult(t):f.default.isEscape(e.keyCode)&&this.hide()},logSubmit:function(){$j.post("/track/track_click",{feature:"NavSearch:"+this.props.deviceType+":"+this.signedInStr+":see_all_click"})},renderInputIcon:function(){var e=this.withBemModifiers("searchBox__icon","loadingSpinner"),t=(0,p.default)("searchBox__icon--magnifyingGlass gr-iconButton",this.withBemModifiers("searchBox__icon"));return this.state.showLoadingSpinner?s("span",{className:e},void 0,s(m.default,{})):s("button",{type:"submit",className:t,"aria-label":"Search"})},renderResultsContainer:function(){return a.default.isEmpty(this.state.query)?void 0:i.default.createElement(_.default,n({},this.props,this.state,{onChooseResult:this.handleChoice,mouseoverAction:this.actions.selectSpecificResult,elasticsearchExperiment:this.props.elasticsearchExperiment}))},render:function(){var e=(0,p.default)(this.withBemModifiers("searchBox")),t=(0,p.default)(this.withBemModifiers("searchBox__input"));return s("div",{acceptCharset:"UTF-8",className:e,onKeyDown:this.handleKeyPress},void 0,s("form",{autoComplete:"off",action:this.props.searchPath,className:"searchBox__form",role:"search","aria-label":"Search for books to add to your shelves",onSubmit:this.logSubmit},void 0,s("input",{className:t,autoComplete:"off",autoFocus:this.props.autoFocus,name:"q",type:"text",placeholder:"Search books","aria-label":"Search books",onFocus:this.show,onClick:this.handleClick,onChange:this.handleSearch,value:this.state.searchBoxValue,"aria-controls":"searchResults"}),s("input",{type:"hidden",name:"qid",value:0<this.state.results.length?this.state.results[0].qid:""}),this.renderInputIcon(),this.state.showResultsContainer?this.renderResultsContainer():null))}})},{"../../modules/keys":16,"../../react_mixins/factory_store_mixin":234,"../../react_stores/book_search_store_factory":241,"../gr_component_factory":108,"../spinner":194,"./book_search_results":171,classnames:"classnames",lodash:"lodash",react:"react","react-onclickoutside":"react-onclickoutside",reflux:"reflux"}],170:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=o(e("../gr_component_factory")),a=o(e("../shared/gr_prop_types")),l=o(e("classnames")),d=o(e("../author/author_badge"));r.default=i.default.createClass({displayName:"BookSearchResult",propTypes:{book:a.default.book({qid:s.default.PropTypes.string,rank:s.default.PropTypes.number}).isRequired,onChooseResult:s.default.PropTypes.func.isRequired},render:function(){var e=this,t=(0,l.default)("gr-mediaFlexbox","gr-book--navbar","gr-hyperlink","gr-hyperlink--naked","gr-hyperlink--noUnderline","gr-bookSearchResults__result");return n("a",{className:t,href:"#","aria-label":"Search result",onClick:function(){e.props.onChooseResult(e.props.book)}},void 0,n("img",{className:"gr-mediaFlexbox__media",src:this.props.book.imageUrl,alt:""}),n("div",{className:"gr-mediaFlexbox__desc"},void 0,n("div",{className:"gr-book__title gr-book__title--navbar u-defaultType"},void 0,this.props.book.title),n("div",{className:"gr-book__author gr-book__author--navbar"},void 0,"by ",this.props.book.author.name,s.default.createElement(d.default,this.props.book.author))))}})},{"../author/author_badge":71,"../gr_component_factory":108,"../shared/gr_prop_types":179,classnames:"classnames",react:"react"}],171:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=o(e("lodash")),a=o(e("classnames")),l=o(e("../drop_down_list")),d=o(e("./book_search_result")),e=o(e("../gr_component_factory"));r.default=e.default.createClass({displayName:"BookSearchResults",propTypes:{maxResults:s.default.PropTypes.number.isRequired,query:s.default.PropTypes.string,results:s.default.PropTypes.array.isRequired,shelfName:s.default.PropTypes.string,searchPath:s.default.PropTypes.string,onChooseResult:s.default.PropTypes.func.isRequired,mouseoverAction:s.default.PropTypes.func.isRequired,activeResult:s.default.PropTypes.shape({title:s.default.PropTypes.string.isRequired,bookId:s.default.PropTypes.string.isRequired}),signedIn:s.default.PropTypes.string,deviceType:s.default.PropTypes.string},componentDidMount:function(){$j.post("/track/track_click",{feature:"NavSearch:"+this.props.deviceType+":"+(this.props.signedIn?"SignedIn":"SignedOut")+":overlay_shown"}),this.props.elasticsearchExperiment&&$j.post("/track_conversion_action",{event:"overlay_shown",options:{experiments:this.props.elasticsearchExperiment,multiple:!0}})},renderLastSearchResultItem:function(e){var t=(0,a.default)("gr-buttonAsLink","gr-bookSearchResults__lastItem",this.withBemElement("gr-bookSearchResults","lastItem"));return n("button",{className:t,type:"submit"},void 0,e)},render:function(){var t=this,e=(0,a.default)(this.withBemModifiers("gr-bookSearchResults"),"gr-box","gr-box--withShadow");return n("div",{className:e,id:"bookSearchResults"+this.props.query+this.props.results.length,"aria-live":"polite","aria-label":"Book search results"},void 0,n(l.default,{maxListItems:this.props.maxResults},void 0,0<this.props.results.length?i.default.map(i.default.slice(this.props.results,0,this.props.maxResults),function(e){return n("div",{className:(0,a.default)("gr-bookSearchResults__item",{"gr-bookSearchResults__item--active":e===t.props.activeResult}),onMouseOver:function(){t.props.mouseoverAction(e.bookId)}},e.bookId,n(d.default,{book:e,onChooseResult:t.props.onChooseResult}))}):this.renderLastSearchResultItem('Search for "'+this.props.query+'"â€¦'),0<this.props.results.length?this.renderLastSearchResultItem('See all results for "'+this.props.query+'"'):null))}})},{"../drop_down_list":90,"../gr_component_factory":108,"./book_search_result":170,classnames:"classnames",lodash:"lodash",react:"react"}],172:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},s=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var i=o(e("react")),a=o(e("../gr_component_factory")),l=o(e("../header/nav_search")),d=e("../search/search_toggle"),c=o(d);r.default=a.default.createClass({displayName:"SearchMobileNav",propTypes:{autocompleteUrl:i.default.PropTypes.string.isRequired,searchPath:i.default.PropTypes.string.isRequired},render:function(){return s("div",{className:"siteHeader__primaryNavSeparateLine siteHeader__primaryNavSeparateLine--search"},void 0,i.default.createElement(l.default,n({},this.props,{autoFocus:!0,bemModifiers:"primaryNavSeparateLine"})),s(c.default,{toggleType:d.SEARCH_TOGGLE_TYPES.CANCEL}))}})},{"../gr_component_factory":108,"../header/nav_search":119,"../search/search_toggle":173,react:"react"}],173:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0}),r.mapDispatchToProps=r.mapStateToProps=r.component=r.SEARCH_TOGGLE_TYPES=void 0;var s=o(e("react")),i=e("react-redux"),a=o(e("../gr_component_factory")),l=e("lodash"),d=e("../../react_actions/header/search_actions"),c=e("../../modules/shared/touch_not_ready_helper"),p=r.SEARCH_TOGGLE_TYPES={ICON:"icon",CANCEL:"Cancel"},a=r.component=a.default.createClass({displayName:"SearchToggle",propTypes:{searchIsActive:s.default.PropTypes.bool.isRequired,toggleType:s.default.PropTypes.oneOf((0,l.values)(p)),onToggleSearch:s.default.PropTypes.func.isRequired},getDefaultProps:function(){return{searchIsActive:!1}},toggleSearch:function(e){return(0,c.acknowledgeEvent)(e),this.props.onToggleSearch(!this.props.searchIsActive)},hideSearch:function(){return this.props.onToggleSearch(!1)},render:function(){switch(this.props.toggleType){case p.ICON:return n("button",{className:"siteHeader__searchIcon gr-iconButton",onClick:this.toggleSearch,"aria-label":"Toggle search",type:"button","data-ux-click":!0});case p.CANCEL:return n("button",{className:"gr-buttonAsLink",onClick:this.hideSearch,"aria-label":"Hide search",type:"button"},void 0,p.CANCEL);default:return null}}}),l=r.mapStateToProps=function(e,t){return Object.assign({},t,e)},s=r.mapDispatchToProps=function(t){return{onToggleSearch:function(e){return t((0,d.toggleSearch)(e))}}};r.default=(0,i.connect)(l,s)(a)},{"../../modules/shared/touch_not_ready_helper":21,"../../react_actions/header/search_actions":36,"../gr_component_factory":108,lodash:"lodash",react:"react","react-redux":"react-redux"}],174:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u,s=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var i=o(e("react")),a=o(e("./gr_component_factory")),l=o(e("classnames")),d=e("../modules/shape_icon_values"),e=e("lodash");r.default=a.default.createClass({displayName:"ShapeIcon",propTypes:{imageUrl:i.default.PropTypes.string.isRequired,imageAlt:i.default.PropTypes.string.isRequired,includeLink:i.default.PropTypes.bool,linkUrl:i.default.PropTypes.string,size:i.default.PropTypes.oneOf((0,e.values)(d.ICON_SIZES)),shape:i.default.PropTypes.oneOf((0,e.values)(d.ICON_SHAPES)),border:i.default.PropTypes.bool},getShapeClass:function(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0],t=this.props.shape+"Icon";return e&&(t+="--"+e),t},getDefaultProps:function(){return{includeLink:!1,size:d.ICON_SIZES.SMALL,shape:d.ICON_SHAPES.CIRCLE,border:!1}},render:function(){var e=(0,l.default)(this.props.className,(n(e={},""+this.getShapeClass(),!0),n(e,""+this.getShapeClass("medium"),this.props.size===d.ICON_SIZES.MEDIUM),n(e,""+this.getShapeClass("large"),this.props.size===d.ICON_SIZES.LARGE),n(e,""+this.getShapeClass("border"),this.props.border),e));return this.props.includeLink&&this.props.linkUrl?s("a",{href:this.props.linkUrl},void 0,s("img",{className:e,src:this.props.imageUrl,alt:this.props.imageAlt})):s("img",{className:e,src:this.props.imageUrl,alt:this.props.imageAlt})}})},{"../modules/shape_icon_values":19,"./gr_component_factory":108,classnames:"classnames",lodash:"lodash",react:"react"}],175:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),e=o(e("./gr_component_factory"));r.default=e.default.createClass({displayName:"ShareButton",propTypes:{textLabel:s.default.PropTypes.string},getDefaultProps:function(){return{textLabel:"Share"}},render:function(){return n("button",{className:"gr-shareButton",type:"button"},void 0,n("span",{className:"gr-shareButton__innerWrapper"},void 0,n("span",{className:"gr-shareButton__icon"}),n("span",{className:"gr-shareButton__textLabel"},void 0,this.props.textLabel)))}})},{"./gr_component_factory":108,react:"react"}],176:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},s=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var i=o(e("./gr_component_factory")),a=o(e("./shared/gr_prop_types")),l=o(e("reflux")),d=o(e("./modal_trigger")),c=o(e("./share_button")),p=o(e("./modal")),f=o(e("./share_social")),h=o(e("./user_content/string_counter")),_=e("../react_stores/share_dialog_store"),m=o(_),g=o(e("../react_actions/share_dialog_actions")),v=o(e("classnames")),y=o(e("../modules/env_utils")),b=o(e("./flash_message")),k=o(e("./sharing/previews/share_dialog_book_preview")),S=o(e("./sharing/previews/share_dialog_topic_preview")),P=o(e("./sharing/previews/share_dialog_blog_preview")),T=o(e("./sharing/previews/share_dialog_interview_preview"));r.default=i.default.createClass({displayName:"ShareDialog",mixins:[l.default.connect(m.default,"sharingDialog")],propTypes:a.default.shareDialog(),getDefaultProps:function(){return{includePreview:!1}},getInitialState:function(){return{uniqueId:Math.random(1e6)}},getResourceTypeIdentifier:function(){return this.props.sharingData.resourceTypeFriendlyText.replace(/\s/g,"").toLowerCase()},getShareModalId:function(){return"share-"+this.getResourceTypeIdentifier()+"-modal"+this.state.uniqueId},socialExists:function(e){return this.props.social[e].facebook||this.props.social[e].twitter||this.props.social[e].pinterest||this.props.social[e].copyLink},renderPreview:function(){if(!this.props.includePreview)return null;var e=void 0;switch(this.props.sharingData.resourceTypeFriendlyText){case"book":e=React.createElement(k.default,this.props.previewData);break;case"discussion":e=React.createElement(S.default,this.props.previewData);break;case"blog":e=React.createElement(P.default,this.props.previewData);break;case"interview":e=React.createElement(T.default,this.props.previewData)}return e||void 0},renderSocialInModal:function(e){return this.socialExists("inModal")?s("div",{className:"shareModal__socialContainer"},void 0,s("div",{className:"shareModal__socialPrompt"},void 0,e+" share on:"),React.createElement(f.default,n({},this.props.social.inModal,{bemModifiers:"modal",fbOptions:this.props.social.fbOptions,twitterOptions:this.props.social.twitterOptions,pinterestOptions:this.props.social.pinterestOptions,metricName:this.getResourceTypeIdentifier()+"_sharingModal"}))):null},renderCharacterCounter:function(){var e=this.state.sharingDialog.sharingTextInputValue||"";return s(h.default,{counterType:"character",maxLength:_.MAXIMUM_SHARING_TEXT_LENGTH,warnLength:_.WARNING_SHARING_TEXT_LENGTH,text:e})},handleShare:function(){var e=this.props.sharingData,t=this.state.sharingDialog.sharingTextInputValue;g.default.submitShare(e,t)},renderSharePrompt:function(){var e=(0,v.default)("shareModal__bottomContainer",{"shareModal__bottomContainer--noSocial":!this.socialExists("inModal"),"shareModal__bottomContainer--social":this.socialExists("inModal")});return s("span",{className:"shareModal"},void 0,s("h2",{className:"gr-h3 gr-h3--serif shareModal__heading"},void 0,"Share this ",this.props.sharingData.resourceTypeFriendlyText," on Goodreads"),this.renderShareError(),s("textarea",{"aria-label":"Share text",placeholder:"Say something about this "+this.props.sharingData.resourceTypeFriendlyText+"...",value:this.state.sharingDialog.sharingTextInputValue,onChange:function(e){g.default.updateSharingTextInputValue(e.target.value)},className:"gr-textInput shareModal__textInput"}),this.renderCharacterCounter(),this.renderPreview(),s("button",{className:"gr-button gr-button--Large shareModal__button",onClick:this.handleShare,type:"button",disabled:this.state.sharingDialog.shareModalButtonDisabled},void 0,"Share"),s("div",{className:e},void 0,this.renderSocialInModal("Or")))},renderShareSuccess:function(){return s("span",{className:"shareModal"},void 0,s("h2",{className:"gr-h3 gr-h3--serif shareModal__heading"},void 0,"Shared!"),s("h3",{className:"gr-hyperlink shareModal__link"},void 0,s("a",{href:this.state.sharingDialog.sharingUrl,"aria-label":"Link to "+this.state.sharingDialog.sharingDisplayName},void 0,"View post")),s("div",{className:"shareModal__bottomContainer shareModal__bottomContainer--shared"},void 0,this.renderSocialInModal("Also")))},renderShareError:function(){if(this.state.sharingDialog.error){var e=this.props.sharingData.resourceTypeFriendlyText,e=this.state.sharingDialog.errorText||"Something went wrong, and your "+e+" wasn't shared. Please try again later.";return s(b.default,{category:"error",message:e})}return null},renderModalContent:function(){return this.state.sharingDialog.shared?this.renderShareSuccess():this.renderSharePrompt()},renderSocialOutsideModal:function(){return this.socialExists("outsideModal")?React.createElement(f.default,n({},this.props.social.outsideModal,{fbOptions:this.props.social.fbOptions,twitterOptions:this.props.social.twitterOptions,pinterestOptions:this.props.social.pinterestOptions,metricName:this.getResourceTypeIdentifier()+"_shareModuleBar",bemModifiers:"shareBar"})):null},shouldRedirect:function(){return this.props.signInUrl&&!this.props.signedIn},handleClick:function(){this.shouldRedirect()?this.redirectToSignIn():g.default.openShareModal(this.getResourceTypeIdentifier())},getSignInUrl:function(){var e=y.default.getCurrentPath();return this.props.signInUrl+"?returnurl="+e},redirectToSignIn:function(){y.default.setLocationUrl(this.getSignInUrl())},renderModal:function(){return this.shouldRedirect()?null:s(p.default,{id:this.getShareModalId(),bemModifiers:"share"},void 0,this.renderModalContent())},render:function(){return s("div",{},void 0,this.renderModal(),s("div",{className:"shareModuleBar"},void 0,s(d.default,{id:this.getShareModalId(),clickHandler:this.handleClick,bemModifiers:"shareModule"},void 0,s(c.default,{})),this.renderSocialOutsideModal()))}})},{"../modules/env_utils":13,"../react_actions/share_dialog_actions":43,"../react_stores/share_dialog_store":254,"./flash_message":106,"./gr_component_factory":108,"./modal":142,"./modal_trigger":143,"./share_button":175,"./share_social":177,"./shared/gr_prop_types":179,"./sharing/previews/share_dialog_blog_preview":184,"./sharing/previews/share_dialog_book_preview":185,"./sharing/previews/share_dialog_interview_preview":186,"./sharing/previews/share_dialog_topic_preview":188,"./user_content/string_counter":206,classnames:"classnames",reflux:"reflux"}],177:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=o(e("./gr_component_factory")),a=o(e("./sharing/facebook_share")),l=o(e("./sharing/twitter_share")),d=o(e("./sharing/pinterest_share")),c=o(e("classnames"));r.default=i.default.createClass({displayName:"ShareSocial",propTypes:{facebook:s.default.PropTypes.bool,twitter:s.default.PropTypes.bool,pinterest:s.default.PropTypes.bool,copyLink:s.default.PropTypes.bool,fbOptions:s.default.PropTypes.object,twitterOptions:s.default.PropTypes.object,pinterestOptions:s.default.PropTypes.object,metricName:s.default.PropTypes.string},getDefaultProps:function(){return{facebook:!1,twitter:!1,pinterest:!1,copyLink:!1,metricName:""}},renderSocialPlatform:function(e){if(!this.props[e])return null;var t="SocialSharing_"+this.props.metricName+"_"+e;switch(e){case"facebook":return n(a.default,{options:this.props.fbOptions,metricName:t,bemModifiers:this.props.bemModifiers});case"twitter":return n(l.default,{options:this.props.twitterOptions,metricName:t,bemModifiers:this.props.bemModifiers});case"pinterest":return n(d.default,{options:this.props.pinterestOptions,metricName:t,bemModifiers:this.props.bemModifiers})}},render:function(){var e=(0,c.default)(this.withBemModifiers("shareSocialButtons"),this.props.className);return n("div",{className:e},void 0,this.renderSocialPlatform("facebook"),this.renderSocialPlatform("twitter"),this.renderSocialPlatform("pinterest"))}})},{"./gr_component_factory":108,"./sharing/facebook_share":182,"./sharing/pinterest_share":183,"./sharing/twitter_share":189,classnames:"classnames",react:"react"}],178:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={get:function(r){var o=null,e=window.$j;return e&&e.each(document.cookie.split("; "),function(e,t){t=t.split("=");t[0]===r&&(o=t[1])}),o},set:function(e,t,r){r=r||365;var o=new Date;o.setTime(o.getTime()+24*r*60*60*1e3);o="; expires="+o.toGMTString();document.cookie=e+"="+encodeURIComponent(t)+o+"; path=/"}}},{}],179:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(n){function e(e,t,r,o){return o=o||"<<anonymous>>",m.default.isNull(t[r])||m.default.isUndefined(t[r])?e?new Error("Required property `"+r+"` was not specified in `"+o+"`."):null:n(t,r,o)}var t=e.bind(null,!1);return t.isRequired=e.bind(null,!0),t}Object.defineProperty(r,"__esModule",{value:!0});function s(e,t,r){var o=e[t],e=m.default.isString(o)?new Date(o):o;return!m.default.isDate(e)||m.default.isNaN(e.getTime())?new Error("Property '"+t+"' must be a Date. "+r+" was supplied: '"+o+"'."):void 0}function i(e,t){return m.default.merge({},e,t)}function a(){var e={viewableName:_.default.PropTypes.string.isRequired,profileImage:_.default.PropTypes.string.isRequired,profileUrl:_.default.PropTypes.string,informalName:_.default.PropTypes.string};return _.default.PropTypes.shape(i(e,arguments.length<=0||void 0===arguments[0]?{}:arguments[0]))}function l(){var e={bookId:_.default.PropTypes.string,workId:_.default.PropTypes.string,bookUrl:_.default.PropTypes.string,authorName:_.default.PropTypes.string,title:_.default.PropTypes.string,imageUrl:_.default.PropTypes.string,numPages:_.default.PropTypes.number};return _.default.PropTypes.shape(i(e,arguments.length<=0||void 0===arguments[0]?{}:arguments[0]))}function u(){return _.default.PropTypes.shape({id:_.default.PropTypes.number.isRequired,name:_.default.PropTypes.string.isRequired,isGoodreadsAuthor:_.default.PropTypes.bool,profileImage:_.default.PropTypes.string,profileUrl:_.default.PropTypes.string.isRequired})}function d(){return{html:_.default.PropTypes.string.isRequired,truncatedHtml:_.default.PropTypes.string}}function c(){return{html:_.default.PropTypes.string,fullContentUrl:_.default.PropTypes.string,fullContentText:_.default.PropTypes.string,truncated:_.default.PropTypes.bool.isRequired,className:_.default.PropTypes.string,bookDescriptionTargetingData:_.default.PropTypes.object}}function p(){return _.default.PropTypes.shape({type:_.default.PropTypes.string,id:_.default.PropTypes.number,uri:_.default.PropTypes.string})}function f(){return{category:_.default.PropTypes.number.isRequired,questionText:_.default.PropTypes.string.isRequired,isSpoiler:_.default.PropTypes.bool.isRequired,questionUrl:_.default.PropTypes.string.isRequired,user:a().isRequired,authorQuestionsUrl:_.default.PropTypes.string,book:l()}}function h(e){return _.default.PropTypes.shape({destination:_.default.PropTypes.string.isRequired,type:_.default.PropTypes.string.isRequired,object:e})}var _=o(e("react")),m=o(e("lodash")),g={user:a().isRequired,pollName:_.default.PropTypes.string.isRequired,answer:_.default.PropTypes.object.isRequired,url:_.default.PropTypes.string.isRequired,imageUrl:_.default.PropTypes.string.isRequired,isGroupPoll:_.default.PropTypes.bool.isRequired,isChoicePoll:_.default.PropTypes.bool.isRequired,groupName:_.default.PropTypes.string,groupUrl:_.default.PropTypes.string};r.default={user:a,author:u,blogNewsfeedResource:function(){return _.default.PropTypes.shape({title:_.default.PropTypes.string,body:_.default.PropTypes.object.isRequired,url:_.default.PropTypes.string,imageUrl:_.default.PropTypes.string,typeDisplayName:_.default.PropTypes.string})},interviewNewsfeedResource:function(){return _.default.PropTypes.shape({title:_.default.PropTypes.string,body:_.default.PropTypes.object,url:_.default.PropTypes.string,imageUrl:_.default.PropTypes.string,authorImageUrl:_.default.PropTypes.string,author:_.default.PropTypes.string,bookImageUrl:_.default.PropTypes.string,bookTitle:_.default.PropTypes.string,typeDisplayName:_.default.PropTypes.string})},book:l,bookDescription:function(){var e=c();return _.default.PropTypes.shape(i(e,arguments.length<=0||void 0===arguments[0]?{}:arguments[0]))},quote:function(){return _.default.PropTypes.shape({author:u().isRequired,body:_.default.PropTypes.object.isRequired,url:_.default.PropTypes.string.isRequired,quotesAuthorUrl:_.default.PropTypes.string.isRequired})},commentSubject:p,comment:function(){return _.default.PropTypes.shape({canComment:_.default.PropTypes.bool.isRequired,commentable:_.default.PropTypes.bool.isRequired,subjectKey:_.default.PropTypes.string.isRequired,subject:p(),subjectUrl:_.default.PropTypes.string})},like:function(){return _.default.PropTypes.shape({key:_.default.PropTypes.string.isRequired,label:_.default.PropTypes.string.isRequired,isLikeable:_.default.PropTypes.bool.isRequired})},group:function(){return _.default.PropTypes.shape({allUnreadPostsUrl:_.default.PropTypes.string.isRequired,description:_.default.PropTypes.string.isRequired,iconUrl:_.default.PropTypes.string.isRequired,id:_.default.PropTypes.number.isRequired,lastActiveAt:n(s),membersCount:_.default.PropTypes.number,name:_.default.PropTypes.string.isRequired,url:_.default.PropTypes.string.isRequired})},topic:function(){return _.default.PropTypes.shape({id:_.default.PropTypes.number.isRequired,title:_.default.PropTypes.string.isRequired,url:_.default.PropTypes.string.isRequired,totalPosts:_.default.PropTypes.string.isRequired,newPosts:_.default.PropTypes.string,newCommentsUrl:_.default.PropTypes.string,updatedAt:n(s),folder:_.default.PropTypes.shape({name:_.default.PropTypes.string,url:_.default.PropTypes.string})})},authorBlogPostNewsfeedResource:function(){return _.default.PropTypes.shape({author:u().isRequred,title:_.default.PropTypes.string,url:_.default.PropTypes.string})},authorFollowNewsfeedResource:function(){return _.default.PropTypes.shape({user:a().isRequired,author:u().isRequred,userAuthorFollowingsUrl:_.default.PropTypes.string})},authorQaSettingNewsfeedResource:function(){return _.default.PropTypes.shape({author:u().isRequired,message:_.default.PropTypes.string,url:_.default.PropTypes.string.isRequired})},communityQuestion:f,communityAnswer:function(){return{user:a().isRequired,answerText:_.default.PropTypes.shape(c()),isSpoiler:_.default.PropTypes.bool.isRequired,communityQuestion:_.default.PropTypes.shape(f()).isRequired}},friendNewsfeedResource:function(){return _.default.PropTypes.shape({user:a().isRequired,friendUser:a().isRequired,isMyFriend:_.default.PropTypes.bool.isRequired,addFriendUrl:_.default.PropTypes.string,compareBooksUrl:_.default.PropTypes.string,ratingDetailsText:_.default.PropTypes.string,currentlyReadingBook:l()})},userFollowingNewsfeedResource:function(){return _.default.PropTypes.shape({user:a().isRequired,followingUser:a().isRequired,ratingDetailsText:_.default.PropTypes.string,currentlyReadingBook:l()})},pollVoteNewsfeedResource:function(){return _.default.PropTypes.shape(g)},expandableHtml:d,truncatedHtml:c,choicePollVoteNewsfeedResource:function(){return _.default.PropTypes.shape(i(g,{choiceYear:_.default.PropTypes.number.isRequired,choiceUrl:_.default.PropTypes.string.isRequired,badgeUrl:_.default.PropTypes.string.isRequired,votedBook:l().isRequired}))},date:n(s),naturalNumber:n(function(e,t,r){e=e[t];return e<=0?new Error("Property '"+t+"' must be > 0. "+r+" was supplied: '"+e+"'."):void 0}),creative:function(){return _.default.PropTypes.shape({book:l(),customText:_.default.PropTypes.object,helpLink:_.default.PropTypes.string,defaultIcon:_.default.PropTypes.string,numAdditionalFriends:_.default.PropTypes.number,friendActionText:_.default.PropTypes.string,firstFriend:a(),customTextReview:_.default.PropTypes.object,similarBook:l(),similarBookShelf:_.default.PropTypes.string,similarBookShelfUrl:_.default.PropTypes.string,genres:_.default.PropTypes.array})},notification:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t={actor:_.default.PropTypes.shape({viewableName:_.default.PropTypes.string,profileImage:_.default.PropTypes.string,profileUrl:_.default.PropTypes.string}),actors:_.default.PropTypes.array,createdAt:_.default.PropTypes.string,body:_.default.PropTypes.string,resource:_.default.PropTypes.shape({text:_.default.PropTypes.string,url:_.default.PropTypes.string}),viewed:_.default.PropTypes.boolean,moreActors:_.default.PropTypes.boolean};return _.default.PropTypes.shape(i(t,e))},searchResults:{book:function(){return h(_.default.PropTypes.shape({id:_.default.PropTypes.string.isRequired,authorName:_.default.PropTypes.string.isRequired,isGoodreadsAuthor:_.default.PropTypes.bool,title:_.default.PropTypes.string.isRequired,imageUrl:_.default.PropTypes.string}))},author:function(){return h(_.default.PropTypes.shape({id:_.default.PropTypes.string.isRequired,name:_.default.PropTypes.string.isRequired,isGoodreadsAuthor:_.default.PropTypes.bool,profileImage:_.default.PropTypes.string}))},user:function(){return h(_.default.PropTypes.shape({id:_.default.PropTypes.string.isRequired,name:_.default.PropTypes.string.isRequired,profileImage:_.default.PropTypes.string}))}},readingNotesAnnotatedBookItem:function(){return _.default.PropTypes.shape({asin:_.default.PropTypes.string.isRequired,imageUrl:_.default.PropTypes.string.isRequired,title:_.default.PropTypes.string.isRequired,authorName:_.default.PropTypes.string.isRequired,sharedCount:_.default.PropTypes.number.isRequired,highlightCount:_.default.PropTypes.number,noteCount:_.default.PropTypes.number,readingNotesUrl:_.default.PropTypes.string.isRequired,knhCta:_.default.PropTypes.string.isRequired,noSharedAnnotations:_.default.PropTypes.bool.isRequired})},readingChallenge:function(){return _.default.PropTypes.shape({title:_.default.PropTypes.string.isRequired,url:_.default.PropTypes.string.isRequired,id:_.default.PropTypes.number.isRequired,year:_.default.PropTypes.number.isRequired,type:_.default.PropTypes.string.isRequired,maxGoal:_.default.PropTypes.number.isRequired,isFinished:_.default.PropTypes.bool,primaryColor:_.default.PropTypes.string.isRequired,secondaryColor:_.default.PropTypes.string.isRequired,images:_.default.PropTypes.shape({badge:_.default.PropTypes.string.isRequired,completed:_.default.PropTypes.string.isRequired})})},reviewDraftItem:function(){return{reviewDraftUri:_.default.PropTypes.string.isRequired,book:l().isRequired,reviewEditPath:_.default.PropTypes.string.isRequired,reviewText:_.default.PropTypes.shape(d()).isRequired}},shareDialog:function(){return{signedIn:_.default.PropTypes.bool,signInUrl:_.default.PropTypes.string,social:_.default.PropTypes.shape({inModal:_.default.PropTypes.shape({facebook:_.default.PropTypes.bool.isRequired,twitter:_.default.PropTypes.bool.isRequired,pinterest:_.default.PropTypes.bool.isRequired,copyLink:_.default.PropTypes.bool.isRequired}).isRequired,outsideModal:_.default.PropTypes.shape({facebook:_.default.PropTypes.bool.isRequired,twitter:_.default.PropTypes.bool.isRequired,pinterest:_.default.PropTypes.bool.isRequired,copyLink:_.default.PropTypes.bool.isRequired}).isRequired,fbOptions:_.default.PropTypes.object,twitterOptions:_.default.PropTypes.object,pinterestOptions:_.default.PropTypes.object}).isRequired,sharingData:_.default.PropTypes.shape({resourceTypeFriendlyText:_.default.PropTypes.string.isRequired,resourceId:_.default.PropTypes.number.isRequired,sharerUserId:_.default.PropTypes.number}).isRequired,includePreview:_.default.PropTypes.bool,previewData:_.default.PropTypes.object}},recommendedUser:function(){return _.default.PropTypes.shape({viewableName:_.default.PropTypes.string.isRequired,profileImage:_.default.PropTypes.string.isRequired,profilePath:_.default.PropTypes.string.isRequired,books:_.default.PropTypes.arrayOf(_.default.PropTypes.shape({imageUrl:_.default.PropTypes.string.isRequired,title:_.default.PropTypes.string.isRequired})).isRequired,subtitle:_.default.PropTypes.string.isRequired}).isRequired},giveawayLogEntry:function(){return _.default.PropTypes.shape({giveaway_uri:_.default.PropTypes.string,created_at:_.default.PropTypes.string,user_uri:_.default.PropTypes.string,start_at:_.default.PropTypes.string,end_at:_.default.PropTypes.string,release_at:_.default.PropTypes.string,book_uri:_.default.PropTypes.string,country_codes:_.default.PropTypes.string,book_count:_.default.PropTypes.string,adults_only_flag:_.default.PropTypes.string,description:_.default.PropTypes.string,primary_genre:_.default.PropTypes.string,secondary_genre:_.default.PropTypes.string,contact_info:_.default.PropTypes.string,nonwinner_message:_.default.PropTypes.string})}}},{lodash:"lodash",react:"react"}],180:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=o(e("react")),s=o(e("react-dom")),i=o(e("lodash")),a=o(e("../user_content/spoiler"));r.default={replaceSpoilerHTMLWithReactComponents:function(e,t){var o=t||window.$j,e=o(".jsShowSpoiler",e);i.default.each(e,function(e){var t=o(e),r=t.next(".spoilerContainer");r&&(e=r.text().replace("(hide spoiler)",""),r=n.default.createElement(a.default,{html:e}),e=o("<span></span>"),t.replaceWith(e),s.default.render(r,o(e)[0]))})}}},{"../user_content/spoiler":205,lodash:"lodash",react:"react","react-dom":"react-dom"}],181:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),i=o(e("../gr_component_factory")),a=o(e("../modal_trigger")),l=o(e("../modal")),d=o(e("../spinner")),c=e("../../modules/ajax/ajax_helper"),p=o(e("../flash_message"));r.default=i.default.createClass({displayName:"ShareableLinkbutton",propTypes:{getShareableLinkURL:s.PropTypes.string.isRequired,resourceType:s.PropTypes.string.isRequired},getShareableLinkModalId:function(){return"shareableLinkModal"},getInitialState:function(){return{error:!1,fetching:!1,copiedToClipboard:!1,shareableLink:null,ttl:null}},requestLink:function(){var r=this;(0,c.httpRequest)(this.props.getShareableLinkURL,{method:"GET"}).done(function(e){var t=e.link,e=e.ttl;r.setState({shareableLink:t,ttl:e})}).fail(function(){r.setState({error:!0})}).always(function(){r.setState({fetching:!1})})},handleClick:function(){return this.state.shareableLink?null:this.setState({fetching:!0,error:!1},this.requestLink)},copyLinkToClipboard:function(){return this.selectShareableLinkInput(),document.execCommand("copy"),this.setState({copiedToClipboard:!0})},selectShareableLinkInput:function(){return this.shareableLinkInput.select()},renderError:function(){if(this.state.error)return n(p.default,{category:"error",message:"Oops, something went wrong. Please try again."});return null},renderModal:function(){var t=this;if(this.state.shareableLink){var e=parseInt(this.state.ttl/86400);return n(l.default,{id:this.getShareableLinkModalId(),centered:!0,bemModifiers:"share"},void 0,n("div",{className:"shareableLinkModalContainer"},void 0,n("div",{className:"u-paddingBottomMedium"},void 0,n("h2",{className:"gr-h2"},void 0,"Share this ",this.props.resourceType," link with others")),n("div",{className:"u-fullWidth u-paddingBottomTiny"},void 0,n("label",{htmlFor:"inviteUrl"},void 0,"Invite Link:"),React.createElement("input",{className:"shareableLinkInput",ref:function(e){t.shareableLinkInput=e},readOnly:!0,id:"inviteUrl",type:"text",value:this.state.shareableLink,onClick:this.selectShareableLinkInput})),n("div",{className:"u-paddingBottomMedium"},void 0,this.state.ttl&&"This link will expire after "+e+" days. ",this.state.copiedToClipboard&&"Link copied to clipboard!"),n("div",{},void 0,n("button",{type:"button",className:"gr-button",onClick:this.copyLinkToClipboard},void 0,"Copy link to clipboard"))))}return null},renderModalTrigger:function(){return this.state.fetching?n(d.default,{isSmall:!0}):n(a.default,{id:"shareableLinkModal"},void 0,n("button",{type:"button",className:"gr-button",onClick:this.handleClick},void 0,"Get link"))},render:function(){return n("div",{className:"u-paddingTopBottomTiny"},void 0,n("div",{},void 0,this.renderModalTrigger(),this.renderModal(),this.renderError()))}})},{"../../modules/ajax/ajax_helper":4,"../flash_message":106,"../gr_component_factory":108,"../modal":142,"../modal_trigger":143,"../spinner":194,react:"react"}],182:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=o(e("./../gr_component_factory")),a=e("../../modules/ajax/ajax_helper");r.default=i.default.createClass({displayName:"FacebookShare",propTypes:{options:s.default.PropTypes.shape({name:s.default.PropTypes.string,link:s.default.PropTypes.string,description:s.default.PropTypes.string,caption:s.default.PropTypes.string,picture:s.default.PropTypes.string,properties:s.default.PropTypes.object,action_link_text:s.default.PropTypes.string,resource_type:s.default.PropTypes.string}).isRequired,metricName:s.default.PropTypes.string},onFacebookButtonClick:function(){this.props.metricName&&(0,a.httpPost)("/track/track_click",{data:{feature:this.props.metricName}}),$grfb.feedDialog(this.props.options)},render:function(){var e=this;return n("button",{className:this.withBemModifiers("shareSocialButtons__button")+" shareSocialButtons__button--facebook","aria-label":"Share to Facebook",type:"button",onClick:function(){return e.onFacebookButtonClick()}})}})},{"../../modules/ajax/ajax_helper":4,"./../gr_component_factory":108,react:"react"}],183:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=o(e("./../gr_component_factory")),a=e("../../modules/ajax/ajax_helper"),l=o(e("../../modules/child_window_helper"));r.default=i.default.createClass({displayName:"PinterestShare",propTypes:{options:s.default.PropTypes.shape({desription:s.default.PropTypes.string,url:s.default.PropTypes.string,media:s.default.PropTypes.string}).isRequired,metricName:s.default.PropTypes.string,windowSpecs:s.default.PropTypes.object},getDefaultProps:function(){return{windowSpecs:{left:400,top:200,width:700,height:800}}},onPinterestButtonClick:function(){this.props.metricName&&(0,a.httpPost)("/track/track_click",{data:{feature:this.props.metricName}}),l.default.openSocialShareWindow("https://pinterest.com/pin/create/link/",this.props.options,this.props.windowSpecs)},render:function(){var e=this;return n("button",{className:this.withBemModifiers("shareSocialButtons__button")+" shareSocialButtons__button--pinterest","aria-label":"Share to Pinterest",type:"button",onClick:function(){return e.onPinterestButtonClick()}})}})},{"../../modules/ajax/ajax_helper":4,"../../modules/child_window_helper":7,"./../gr_component_factory":108,react:"react"}],184:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),i=o(e("../../gr_component_factory")),a=o(e("../../user_content/truncated_html"));r.default=i.default.createClass({displayName:"ShareDialogBlogPreview",propTypes:{title:s.PropTypes.string.isRequired,imageUrl:s.PropTypes.string,description:s.PropTypes.string.isRequired},render:function(){return n("div",{className:"gr-mediaFlexbox shareModal__previewContainer shareModal__previewContainer--blog"},void 0,n("div",{className:"gr-mediaFlexbox__media sharePreview__image sharePreview__image--blog"},void 0,n("img",{className:"gr-mediaFlexbox__media sharePreview__imageFullWidth",src:this.props.imageUrl,alt:this.props.title})),n("div",{className:"gr-mediaFlexbox__desc"},void 0,n("div",{className:"gr-h3 gr-h3--serif gr-h3--noMargin"},void 0,this.props.title),n("div",{className:"u-marginTopXSmall"},void 0,n("div",{className:"sharePreview__description"},void 0,n(a.default,{html:this.props.description,truncated:!1})))))}})},{"../../gr_component_factory":108,"../../user_content/truncated_html":207,react:"react"}],185:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),i=o(e("../../gr_component_factory")),a=o(e("./share_dialog_preview")),l=o(e("../../community_rating")),d=o(e("../../author/author_badge"));r.default=i.default.createClass({displayName:"ShareDialogBookPreview",propTypes:{author:s.PropTypes.shape({name:s.PropTypes.string.isRequired,isGoodreadsAuthor:s.PropTypes.bool.isRequired}).isRequired,rating:s.PropTypes.string.isRequired,title:s.PropTypes.string.isRequired,imageUrl:s.PropTypes.string.isRequired,ratingsCount:s.PropTypes.number.isRequired,textReviewsCount:s.PropTypes.number.isRequired},renderAuthorText:function(){return n("div",{},void 0,"by ",this.props.author.name,n(d.default,{isGoodreadsAuthor:this.props.author.isGoodreadsAuthor}))},render:function(){return n(a.default,{primaryText:this.props.title,secondaryText:this.renderAuthorText(),imageUrl:this.props.imageUrl},void 0,n("div",{className:"u-marginTopXSmall"},void 0,n(l.default,{rating:parseFloat(this.props.rating),displayAvg:!0,displayAvgRatingText:!1,ratingsCount:this.props.ratingsCount,size:l.default.ICON_SIZES.MEDIUM,textReviewsCount:this.props.textReviewsCount})))}})},{"../../author/author_badge":71,"../../community_rating":88,"../../gr_component_factory":108,"./share_dialog_preview":187,react:"react"}],186:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),i=o(e("../../gr_component_factory")),a=o(e("../../user_content/truncated_html"));r.default=i.default.createClass({displayName:"ShareDialogInterviewPreview",propTypes:{title:s.PropTypes.string.isRequired,description:s.PropTypes.string.isRequired,author:s.PropTypes.string.isRequired,authorImageUrl:s.PropTypes.string,bookImageUrl:s.PropTypes.string,bookTitle:s.PropTypes.string,imageUrl:s.PropTypes.string},renderImage:function(){return this.props.imageUrl?n("img",{className:"gr-mediaFlexbox__media sharePreview__imageFullWidth",src:this.props.imageUrl,alt:this.props.title}):this.props.authorImageUrl&&this.props.bookImageUrl?n("div",{className:"gr-mediaFlexbox__media sharePreview__image",style:{display:"contents"}},void 0,n("div",{className:"editorialCard__image--interview\n                          editorialCard__image--interviewAuthor",style:{backgroundImage:"url("+this.props.authorImageUrl+")"}},void 0,n("span",{className:"u-visuallyHidden"},void 0,this.props.author)),n("div",{className:"editorialCard__image--interview\n                          editorialCard__image--interviewBook",style:{backgroundImage:"url("+this.props.bookImageUrl+")"}},void 0,n("span",{className:"u-visuallyHidden"},void 0,this.props.bookTitle))):null},render:function(){return n("div",{},void 0,n("div",{className:"gr-mediaFlexbox shareModal__previewContainer",style:{display:"block"}},void 0,this.renderImage(),n("div",{className:"gr-mediaFlexbox__desc"},void 0,n("div",{className:"gr-h3 gr-h3--serif gr-h3--noMargin"},void 0,this.props.title),n("div",{className:"u-marginTopXSmall"},void 0,n("div",{className:"sharePreview__description"},void 0,n(a.default,{html:this.props.description,truncated:!1}))))))}})},{"../../gr_component_factory":108,"../../user_content/truncated_html":207,react:"react"}],187:[function(e,t,r){"use strict";var u,o=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var n,s=e("react"),i=e("../../gr_component_factory"),e=(n=i)&&n.__esModule?n:{default:n};r.default=e.default.createClass({displayName:"ShareDialogPreview",propTypes:{imageUrl:s.PropTypes.string.isRequired,primaryText:s.PropTypes.string.isRequired,secondaryText:s.PropTypes.oneOfType([s.PropTypes.element,s.PropTypes.string])},renderSecondaryText:function(){return this.props.secondaryText?o("div",{className:"sharePreview__secondaryText"},void 0,this.props.secondaryText):null},render:function(){return o("div",{className:"gr-mediaFlexbox shareModal__previewContainer"},void 0,o("img",{className:"gr-mediaFlexbox__media sharePreview__image",src:this.props.imageUrl,alt:this.props.primaryText}),o("div",{className:"gr-mediaFlexbox__desc"},void 0,o("div",{className:"gr-h3 gr-h3--serif gr-h3--noMargin"},void 0,this.props.primaryText),this.renderSecondaryText(),o("div",{className:"u-marginTopXSmall"},void 0,this.props.children)))}})},{"../../gr_component_factory":108,react:"react"}],188:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("./share_dialog_preview")),i=e("react"),a=o(e("../../gr_component_factory")),l=o(e("../../user_content/truncated_html"));r.default=a.default.createClass({displayName:"ShareDialogTopicPreview",propTypes:{topicTitle:i.PropTypes.string.isRequired,groupTitle:i.PropTypes.string.isRequired,imageUrl:i.PropTypes.string.isRequired,description:i.PropTypes.string},render:function(){var e=this.props.groupTitle+" - Discussion";return n(s.default,{primaryText:this.props.topicTitle,secondaryText:e,imageUrl:this.props.imageUrl},void 0,n("div",{className:"sharePreview__description"},void 0,n(l.default,{html:this.props.description,truncated:!1})))}})},{"../../gr_component_factory":108,"../../user_content/truncated_html":207,"./share_dialog_preview":187,react:"react"}],189:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=o(e("./../gr_component_factory")),a=e("../../modules/ajax/ajax_helper"),l=o(e("../../modules/child_window_helper"));r.default=i.default.createClass({displayName:"TwitterShare",propTypes:{options:s.default.PropTypes.shape({text:s.default.PropTypes.string,url:s.default.PropTypes.string,via:s.default.PropTypes.string}).isRequired,metricName:s.default.PropTypes.string,windowSpecs:s.default.PropTypes.object},getDefaultProps:function(){return{windowSpecs:{left:400,top:200,width:600,height:500}}},onTwitterButtonClick:function(){this.props.metricName&&(0,a.httpPost)("/track/track_click",{data:{feature:this.props.metricName}}),l.default.openSocialShareWindow("https://twitter.com/intent/tweet/",this.props.options,this.props.windowSpecs)},render:function(){var e=this;return n("button",{className:this.withBemModifiers("shareSocialButtons__button")+" shareSocialButtons__button--twitter","aria-label":"Share to Twitter",type:"button",onClick:function(){return e.onTwitterButtonClick()}})}})},{"../../modules/ajax/ajax_helper":4,"../../modules/child_window_helper":7,"./../gr_component_factory":108,react:"react"}],190:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("../gr_component_factory")),i=o(e("lodash")),a=o(e("classnames"));r.default=s.default.createClass({displayName:"ChoiceSiteAnnouncement",propTypes:{imageUrl:React.PropTypes.string.isRequired,announcementText:React.PropTypes.string.isRequired,description:React.PropTypes.string.isRequired,targetUrl:React.PropTypes.string,totalVotes:React.PropTypes.number.isRequired},getAriaLabel:function(){return"Read more "+this.props.announcementText},hasTargetUrl:function(){return!i.default.isEmpty(this.props.targetUrl)},renderAnnouncementTitle:function(){var e="siteAnnouncement__title";return this.hasTargetUrl()?n("a",{className:(0,a.default)(e,"gr-hyperlink"),"aria-label":this.getAriaLabel(),href:this.props.targetUrl},void 0,this.props.announcementText):n("span",{className:e},void 0,this.props.announcementText)},render:function(){return n("div",{className:"siteAnnouncement gr-mediaFlexbox gr-mediaFlexbox--columnDirection"},void 0,n("a",{className:"gr-mediaFlexbox__media siteAnnouncement__masthead",href:this.props.targetUrl},void 0,n("img",{src:this.props.imageUrl,alt:this.props.imageAlt})),n("div",{className:"gr-mediaFlexbox__desc siteAnnouncement__body"},void 0,this.renderAnnouncementTitle(),n("div",{className:"siteAnnouncement__description"},void 0,this.props.description),n("div",{className:"siteAnnouncement__choiceVoteCount"},void 0,this.props.totalVotes.toLocaleString()," votes")))}})},{"../gr_component_factory":108,classnames:"classnames",lodash:"lodash"}],191:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("../gr_component_factory")),i=o(e("../shape_icon")),a=e("../../modules/shape_icon_values"),l=o(e("lodash")),d=o(e("classnames"));r.default=s.default.createClass({displayName:"SimpleSiteAnnouncement",propTypes:{imageUrl:React.PropTypes.string.isRequired,announcementText:React.PropTypes.string.isRequired,targetUrl:React.PropTypes.string},getAriaLabel:function(){return"Read more "+this.props.announcementText},hasTargetUrl:function(){return!l.default.isEmpty(this.props.targetUrl)},renderIcon:function(){return n(i.default,{imageUrl:this.props.imageUrl,size:a.ICON_SIZES.MEDIUM,imageAlt:"Site Announcement",border:!0})},renderAnnouncementText:function(){var e="siteAnnouncement__simpleText";return this.hasTargetUrl()?n("a",{className:(0,d.default)(e,"gr-hyperlink"),"aria-label":this.getAriaLabel(),href:this.props.targetUrl},void 0,this.props.announcementText):n("span",{className:e},void 0,this.props.announcementText)},renderSecondaryLinkSection:function(){return this.hasTargetUrl()?n("span",{className:"siteAnnouncement__simpleSecondaryLinkSection"},void 0,n("a",{className:"gr-button gr-button--quiet","aria-label":this.getAriaLabel(),href:this.props.targetUrl},void 0,"Read more")):null},render:function(){return n("div",{className:"siteAnnouncement\n                      siteAnnouncement--simple\n                      gr-mediaFlexbox\n                      gr-mediaFlexbox--alignItemsCenter"},void 0,n("div",{className:"gr-mediaFlexbox__media"},void 0,this.renderIcon()),n("div",{className:"gr-mediaFlexbox__desc siteAnnouncement__simpleBody"},void 0,n("h5",{className:"gr-h5 gr-h5--noMargin siteAnnouncement__simpleHeader"},void 0,"Goodreads news"),this.renderAnnouncementText()),this.renderSecondaryLinkSection())}})},{"../../modules/shape_icon_values":19,"../gr_component_factory":108,"../shape_icon":174,classnames:"classnames",lodash:"lodash"}],192:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),i=o(e("../gr_component_factory")),a=o(e("./simple_site_announcement"));r.default=i.default.createClass({displayName:"SiteAnnouncement",propTypes:{title:s.PropTypes.string.isRequired,targetUrl:s.PropTypes.string,displayData:s.PropTypes.shape({description:s.PropTypes.string,mastheadUrl:s.PropTypes.string,imageUrl:s.PropTypes.string}).isRequired},shouldRenderLargeAnnouncement:function(){var e=this.props.displayData;return e&&e.description&&e.mastheadUrl},renderLargeAnnouncement:function(){return n("div",{className:"siteAnnouncement gr-mediaFlexbox gr-mediaFlexbox--columnDirection"},void 0,n("a",{className:"gr-mediaFlexbox__media siteAnnouncement__masthead",href:this.props.targetUrl,"aria-label":this.props.title},void 0,n("img",{src:this.props.displayData.mastheadUrl,alt:this.props.title})),n("div",{className:"gr-mediaFlexbox__desc siteAnnouncement__body"},void 0,n("a",{className:"siteAnnouncement__title gr-hyperlink",href:this.props.targetUrl},void 0,this.props.title),n("div",{className:"siteAnnouncement__description"},void 0,this.props.displayData.description)))},render:function(){return this.shouldRenderLargeAnnouncement()?this.renderLargeAnnouncement():n(a.default,{imageUrl:this.props.displayData.imageUrl,announcementText:this.props.title,targetUrl:this.props.targetUrl})}})},{"../gr_component_factory":108,"./simple_site_announcement":191,react:"react"}],193:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("../gr_component_factory")),i=o(e("../shape_icon")),a=e("../../modules/shape_icon_values");r.default=s.default.createClass({displayName:"WelcomeAnnouncement",propTypes:{imageUrl:React.PropTypes.string.isRequired},renderIcon:function(){return n(i.default,{imageUrl:this.props.imageUrl,size:a.ICON_SIZES.MEDIUM,imageAlt:"Welcome to Goodreads",border:!0})},render:function(){return n("div",{className:"siteAnnouncement siteAnnouncement--welcome"},void 0,n("div",{className:"siteAnnouncement__welcomeIcon"},void 0,this.renderIcon()),n("div",{className:"siteAnnouncement__welcomeBody"},void 0,n("h5",{className:"siteAnnouncement__announcementText"},void 0,"Welcome to Goodreads"),n("span",{},void 0,"Meet your favorite book, find your reading community, and manage your reading life.")))}})},{"../../modules/shape_icon_values":19,"../gr_component_factory":108,"../shape_icon":174}],194:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("./gr_component_factory")),i=o(e("classnames"));r.default=s.default.createClass({displayName:"Spinner",propTypes:{isSmall:React.PropTypes.bool},getDefaultProps:function(){return{isSmall:!1}},render:function(){var e=(0,i.default)("spinnerContainer",this.props.className),t=this.props.isSmall?"small":null;return n("div",{className:e},void 0,n("div",{className:this.withBemModifiers("spinner",t)},void 0,n("div",{className:this.withBemModifiers("spinner__mask",t)},void 0,n("div",{className:this.withBemModifiers("spinner__maskedCircle",t)}))),n("div",{className:"spinnerFallbackText"},void 0,"Loadingâ€¦"))}})},{"./gr_component_factory":108,classnames:"classnames"}],195:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),e=o(e("./gr_component_factory"));r.default=e.default.createClass({displayName:"SponsoredFooter",propTypes:{sponsoredName:s.default.PropTypes.string},renderSponsoredName:function(){return this.props.sponsoredName?n("span",{className:"featuredContentModule__sponsoredName"},void 0,this.props.sponsoredName):void 0},render:function(){var e=this.props.sponsoredName?"Sponsored by ":"Sponsored";return n("div",{className:"featuredContentModule__sponsoredFooter"},void 0,n("span",{className:"featuredContentModule__sponsoredBadgeIcon"}),n("span",{className:"featuredContentModule__sponsoredLabel"},void 0,e),this.renderSponsoredName())}})},{"./gr_component_factory":108,react:"react"}],196:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o,n=e("./gr_component_factory"),e=(o=n)&&o.__esModule?o:{default:o};r.default=e.default.createClass({displayName:"StoresInitializer",render:function(){return null}})},{"./gr_component_factory":108}],197:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=o(e("react")),s=o(e("./gr_component_factory")),i=o(e("../react_actions/tab_actions")),a="click",l="hover";r.default=s.default.createClass({displayName:"Tab",propTypes:{group:n.default.PropTypes.string.isRequired,name:n.default.PropTypes.string.isRequired,initiallySelected:n.default.PropTypes.bool,triggerEventType:n.default.PropTypes.string},getDefaultProps:function(){return{initiallySelected:!1,triggerEventType:a}},componentDidMount:function(){this.props.initiallySelected&&this.selectTab()},selectTab:function(){i.default.selectTab(this.props.name,this.props.group)},render:function(){var e={};switch(this.props.triggerEventType){case a:e.onClick=this.selectTab;break;case l:e.onMouseOver=this.selectTab}return n.default.createElement("span",e,this.props.children)}})},{"../react_actions/tab_actions":45,"./gr_component_factory":108,react:"react"}],198:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=o(e("./gr_component_factory")),a=o(e("reflux")),e=o(e("../react_stores/tabs_store"));r.default=i.default.createClass({displayName:"TabContent",mixins:[a.default.connect(e.default,"tabsStore")],propTypes:{group:s.default.PropTypes.string.isRequired,name:s.default.PropTypes.string.isRequired},isActive:function(){return this.props.name===this.state.tabsStore[this.props.group]},render:function(){return n("div",{},void 0,this.isActive()?this.props.children:null)}})},{"../react_stores/tabs_store":257,"./gr_component_factory":108,react:"react",reflux:"reflux"}],199:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=o(e("../gr_component_factory")),a=o(e("../shared/gr_prop_types")),l=o(e("moment")),d=e("../../modules/date_utils");r.default=i.default.createClass({displayName:"RelativeTime",propTypes:{time:a.default.date.isRequired,longFormat:s.default.PropTypes.bool},getDefaultProps:function(){return{longFormat:!1}},getRelativeTime:function(){return this.props.longFormat?(0,l.default)(new Date(this.props.time)).fromNow():(0,d.fromNow)(this.props.time)},render:function(){return n("time",{dateTime:this.props.time,"aria-label":(0,l.default)(new Date(this.props.time)).fromNow()},void 0,this.getRelativeTime())}})},{"../../modules/date_utils":11,"../gr_component_factory":108,"../shared/gr_prop_types":179,moment:"moment",react:"react"}],200:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("reflux")),i=o(e("../gr_component_factory")),a=o(e("../shared/gr_prop_types")),l=e("../../modules/user/friend_status_values"),d=o(e("../../react_actions/user/user_follow_actions")),e=o(e("../../react_stores/user/user_follow_store"));r.default=i.default.createClass({displayName:"UserFollowWidget",mixins:[s.default.connectFilter(e.default,"userFollowStore",function(e){return e[this.props.displayUser.id]})],propTypes:{displayUser:a.default.user().isRequired},renderFollowStatus:function(){var e=this,t=this.state.userFollowStore;if(t.isFollowing){var r=this.props.displayUser.firstName||this.props.displayUser.viewableName;return n("div",{className:"gr-box gr-box--inline gr-box--marginRightSmall"},void 0,"You are following ",r,".")}return n("button",{className:"gr-button gr-button--small gr-box gr-box--inline gr-box--marginRightSmall",onClick:function(){return d.default.follow(e.props.displayUser.id)},disabled:!t.buttonEnabled&&"disabled"},void 0,"Follow")},renderUnfollowButtonIfNeeded:function(){var e=this,t=this.state.userFollowStore;return t.isFollowing&&t.friendshipStatus!==l.FRIEND_STATUS.REQUEST_PENDING_TO?n("button",{className:"gr-button gr-buttonAsLink gr-buttonAsLink--quiet",onClick:function(){return d.default.unFollow(e.props.displayUser.id)},disabled:!t.buttonEnabled&&"disabled"},void 0,n("span",{className:"gr-metaText"},void 0,"Unfollow")):void 0},shouldHideFollowButtons:function(){var e=this.state.userFollowStore;return e.friendshipStatus==l.FRIEND_STATUS.FRIEND||e.friendshipStatus==l.FRIEND_STATUS.SELF||e.isBlocked||!e.allowsFollow},render:function(){return this.shouldHideFollowButtons()?null:n("div",{className:"userFollowWidget"},void 0,this.renderFollowStatus(),this.renderUnfollowButtonIfNeeded())}})},{"../../modules/user/friend_status_values":24,"../../react_actions/user/user_follow_actions":47,"../../react_stores/user/user_follow_store":259,"../gr_component_factory":108,"../shared/gr_prop_types":179,reflux:"reflux"}],201:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e};Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=o(e("../gr_component_factory")),a=o(e("../shape_icon")),l=e("../../modules/shape_icon_values");r.default=i.default.createClass({displayName:"UserIcon",propTypes:{user:s.default.PropTypes.shape({viewableName:s.default.PropTypes.string.isRequired,profileImage:s.default.PropTypes.string.isRequired,profileUrl:s.default.PropTypes.string}).isRequired,includeLink:s.default.PropTypes.bool,size:s.default.PropTypes.oneOf([l.ICON_SIZES.SMALL,l.ICON_SIZES.MEDIUM,l.ICON_SIZES.LARGE])},getDefaultProps:function(){return{includeLink:!0,size:l.ICON_SIZES.SMALL}},render:function(){var e=this.props.user;return s.default.createElement(a.default,n({imageUrl:e.profileImage,imageAlt:e.viewableName,linkUrl:e.profileUrl,border:!0},this.props))}})},{"../../modules/shape_icon_values":19,"../gr_component_factory":108,"../shape_icon":174,react:"react"}],202:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=o(e("classnames")),a=o(e("../gr_component_factory")),l=o(e("../shared/gr_prop_types")),d=o(e("../click_tracking_wrapper")),c=e("../../modules/ads/click_tracking_helper");r.default=a.default.createClass({displayName:"UserProfileLink",propTypes:{user:l.default.user().isRequired,className:s.default.PropTypes.string},userName:function(){return{__html:this.props.user.viewableName}},render:function(){var e=(0,i.default)("gr-hyperlink","gr-hyperlink--bold","gr-user__profileLink",this.props.className),e=n("a",{className:e,href:this.props.user.profileUrl,dangerouslySetInnerHTML:this.userName()});return this.props.user.profileUrl&&this.props.user.viewableName?n(d.default,{children:e,trackingOptions:c.TRACKED_CLASSES.user_profile}):this.props.user.viewableName?n("b",{},void 0,this.props.user.viewableName):null}})},{"../../modules/ads/click_tracking_helper":2,"../click_tracking_wrapper":82,"../gr_component_factory":108,"../shared/gr_prop_types":179,classnames:"classnames",react:"react"}],203:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("lodash")),i=o(e("../gr_component_factory")),a=o(e("../shared/gr_prop_types")),l=o(e("../shared/gr_spoiler_handler")),d=o(e("classnames"));r.default=i.default.createClass({displayName:"ExpandableHtml",propTypes:a.default.expandableHtml(),getInitialState:function(){return{expanded:!1}},collapse:function(){this.setState({expanded:!1})},expand:function(){this.setState({expanded:!0})},expandable:function(){return!s.default.isEmpty(this.props.truncatedHtml)},visibleHtml:function(){return this.expandable()&&!0!==this.state.expanded?this.props.truncatedHtml:this.props.html},renderToggleButton:function(){if(!this.expandable())return null;var e=this.state.expanded?this.collapse:this.expand,t=this.state.expanded?"Less":"More",r=(0,d.default)("gr-buttonAsLink","u-marginLeftTiny");return n("button",{className:r,onClick:e},void 0,t)},componentDidMount:function(){this.refs.rootNode&&l.default.replaceSpoilerHTMLWithReactComponents(this.refs.rootNode)},componentDidUpdate:function(){this.refs.rootNode&&l.default.replaceSpoilerHTMLWithReactComponents(this.refs.rootNode)},render:function(){if(s.default.isEmpty(this.props.html))return null;var e=(0,d.default)("expandableHtml",this.props.className);return React.createElement("div",{className:e,ref:"rootNode"},n("span",{dangerouslySetInnerHTML:{__html:this.visibleHtml()}}),this.renderToggleButton())}})},{"../gr_component_factory":108,"../shared/gr_prop_types":179,"../shared/gr_spoiler_handler":180,classnames:"classnames",lodash:"lodash"}],204:[function(e,t,r){"use strict";var u,o=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var n,s=e("../gr_component_factory"),e=(n=s)&&n.__esModule?n:{default:n};r.default=e.default.createClass({displayName:"HiddenHtml",propTypes:{unhideText:React.PropTypes.string},getDefaultProps:function(){return{unhideText:"unhide"}},getInitialState:function(){return{expanded:!1}},expand:function(){this.setState({expanded:!0})},renderUnhideButton:function(){return o("button",{className:"gr-buttonAsLink",onClick:this.expand},void 0,this.props.unhideText)},renderContent:function(){return this.state.expanded?this.props.children:o("span",{},void 0,this.renderUnhideButton())},render:function(){return o("div",{},void 0,this.renderContent())}})},{"../gr_component_factory":108}],205:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),e=o(e("../gr_component_factory"));r.default=e.default.createClass({displayName:"Spoiler",propTypes:{html:s.default.PropTypes.string,spoilerWarning:s.default.PropTypes.oneOfType([s.default.PropTypes.string,s.default.PropTypes.element])},componentWillMount:function(){if(null===this.props.html&&null===this.props.children)throw new Error("props.children and props.html cannot both be null")},getDefaultProps:function(){return{html:null,spoilerWarning:null}},getInitialState:function(){return{showSpoiler:!1}},onClickShowSpoiler:function(){this.setState({showSpoiler:!0})},onClickHideSpoiler:function(){this.setState({showSpoiler:!1})},getSpoilerHtml:function(){return{__html:this.props.html}},renderSpoiler:function(){return this.props.html?n("span",{className:"spoiler__text u-marginRightTiny",dangerouslySetInnerHTML:this.getSpoilerHtml()}):this.props.children},render:function(){return n("span",{},void 0,this.state.showSpoiler?n("span",{className:"spoiler__textContainer"},void 0,this.renderSpoiler(),n("button",{className:"gr-buttonAsLink",onClick:this.onClickHideSpoiler},void 0,"(hide spoiler)")):n("span",{},void 0,this.props.spoilerWarning,n("button",{className:"gr-buttonAsLink",onClick:this.onClickShowSpoiler},void 0,"(view spoiler)")))}})},{"../gr_component_factory":108,react:"react"}],206:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),i=o(e("../gr_component_factory")),a=e("../../modules/string_helper"),l=o(e("pluralize"));r.default=i.default.createClass({displayName:"StringCounter",propTypes:{counterType:s.PropTypes.oneOf(["character","word"]).isRequired,maxLength:s.PropTypes.number.isRequired,text:s.PropTypes.string.isRequired,warnLength:s.PropTypes.number},renderWarning:function(e){return n("span",{className:e<0?"gr-smallAlert":void 0,role:"alert"},void 0,e," ",(0,l.default)(this.props.counterType,e)," left")},countType:function(){return"character"===this.props.counterType?(0,a.astralLength)(this.props.text):"word"===this.props.counterType?(0,a.countWords)(this.props.text):null},render:function(){var e=this.countType(this.props.text),e=this.props.maxLength-e;return!this.props.warnLength||e<=this.props.warnLength?n("div",{},void 0,this.renderWarning(e)):null}})},{"../../modules/string_helper":22,"../gr_component_factory":108,pluralize:"pluralize",react:"react"}],207:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("../gr_component_factory")),i=o(e("../shared/gr_prop_types")),a=o(e("../shared/gr_spoiler_handler")),l=o(e("../click_tracking_wrapper")),d=e("../../modules/ads/click_tracking_helper");r.default=s.default.createClass({displayName:"TruncatedHtml",propTypes:i.default.truncatedHtml(),getDefaultProps:function(){return{fullContentText:"More",bookDescriptionTargetingData:d.TRACKED_CLASSES.full_content_link}},componentDidMount:function(){a.default.replaceSpoilerHTMLWithReactComponents(this.refs.rootNode)},render:function(){var e=n("a",{className:"u-marginLeftTiny fullContentLink",href:this.props.fullContentUrl},void 0,this.props.fullContentText);return React.createElement("div",{ref:"rootNode",className:this.props.className},n("span",{dangerouslySetInnerHTML:{__html:this.props.html}}),this.props.truncated?n(l.default,{children:e,trackingOptions:this.props.bookDescriptionTargetingData}):null)}})},{"../../modules/ads/click_tracking_helper":2,"../click_tracking_wrapper":82,"../gr_component_factory":108,"../shared/gr_prop_types":179,"../shared/gr_spoiler_handler":180}],208:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0}),r.STAR_SIZES=void 0;var s=o(e("react")),i=o(e("lodash")),a=o(e("./gr_component_factory")),l=o(e("classnames")),d=o(e("../react_actions/shelvings_actions")),c=o(e("../react_stores/shelvings_store")),p=o(e("./click_tracking_wrapper")),f=e("../react_mixins/gr_reflux"),h=e("../modules/ads/click_tracking_helper"),_=r.STAR_SIZES={SMALL:"smallStars",MEDIUM:"mediumStars",LARGE:"largeStars"};r.default=a.default.createClass({displayName:"UserRating",mixins:[(0,f.connectToLazyStore)(c.default,"bookId")],propTypes:{bookId:s.default.PropTypes.string.isRequired,bookTitle:s.default.PropTypes.string,starsTrackingOptions:s.default.PropTypes.object,starSize:s.default.PropTypes.string,displayLabel:s.default.PropTypes.bool,handleClick:s.default.PropTypes.func,clickstreamRef:s.default.PropTypes.string},getDefaultProps:function(){return{starsTrackingOptions:h.TRACKED_CLASSES.user_rating_star,displayLabel:!0,starSize:_.SMALL}},setHoverRating:function(e){this.setState({hoverRating:e})},removeHoverRating:function(){this.setState({hoverRating:null})},isShelved:function(){return null!==this.state.exclusiveShelfName},updateRating:function(e,t){t.preventDefault(),this.isShelved()?d.default.rateBook(this.state.book.bookId,e,this.state.book.title,this.props.clickstreamRef||null):d.default.rateBook(this.props.bookId,e,this.props.bookTitle,this.props.clickstreamRef||null),this.refs.ratingContainer.focus(),this.props.handleClick&&this.props.handleClick()},starLabel:function(e){return(null!==this.state.exclusiveShelfName&&0<this.state.rating?"Change rating from "+this.state.rating+" to "+e+" ":"Rate "+e+" ")+(1===e?"star":"stars")},renderStar:function(e){var t=e+1,e=null!==this.state.exclusiveShelfName?this.state.rating:0,e=this.state.hoverRating||e,e=(0,l.default)("userRating__star",{"userRating__star--selected":t<=e},"userRating__star--"+this.props.starSize),e=n("button",{className:e,title:this.starLabel(t),onClick:this.updateRating.bind(this,t),onMouseEnter:this.setHoverRating.bind(this,t)});return n(p.default,{children:e,trackingOptions:this.props.starsTrackingOptions},t)},renderTextLabel:function(){if(this.props.displayLabel){var e=(0,l.default)("userRating__label","gr-metaText",{"userRating__label--largeStars":this.props.starSize===_.LARGE});return n("div",{className:e},void 0,null!==this.state.exclusiveShelfName&&0<this.state.rating?"Your rating:":"Rate it:")}},render:function(){var e=(0,l.default)("userRating",{"userRating--largeStars":this.props.starSize===_.LARGE});return n("div",{className:e},void 0,this.renderTextLabel(),s.default.createElement("div",{className:"userRating__starsWrapper",tabIndex:"0",ref:"ratingContainer",role:"group",onMouseLeave:this.removeHoverRating},i.default.times(5,function(e){return this.renderStar(e)},this)))}})},{"../modules/ads/click_tracking_helper":2,"../react_actions/shelvings_actions":44,"../react_mixins/gr_reflux":235,"../react_stores/shelvings_store":256,"./click_tracking_wrapper":82,"./gr_component_factory":108,classnames:"classnames",lodash:"lodash",react:"react"}],209:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),i=o(e("../../gr_component_factory")),a=o(e("../../modal")),l=o(e("../../../react_actions/user/show/block_user_actions")),d=e("../../../modules/modal_id_helper");r.default=i.default.createClass({displayName:"BlockUserConfirmationModal",propTypes:{displayUser:s.PropTypes.shape({firstName:React.PropTypes.string.isRequired,viewableName:React.PropTypes.string.isRequired,userId:React.PropTypes.number.isRequired}).isRequired,fromDropdown:s.PropTypes.bool,isBlocked:s.PropTypes.bool.isRequired},getDefaultProps:function(){return{fromDropdown:!1}},handleConfirmBlockUser:function(){l.default.blockMember(this.props.displayUser.userId)},render:function(){return this.props.isBlocked?n(a.default,{id:(0,d.getUnblockUserModalId)(this.props.displayUser.userId,this.props.fromDropdown),bemModifiers:"friendFollowModule",onConfirmHandler:this.handleConfirmBlockUser},void 0,n("div",{className:"friendFollowConfirmModal"},void 0,n("h2",{className:"gr-h2 gr-h2--serif"},void 0,"Unblock ",this.props.displayUser.viewableName,"?"),n("div",{className:"friendFollowConfirmModal__body"},void 0,"Your profile will appear to ",this.props.displayUser.firstName," as it would to any other Goodreads member. Their comments on discussion boards will be displayed normally. Are you sure?"))):n(a.default,{id:(0,d.getBlockUserModalId)(this.props.displayUser.userId,this.props.fromDropdown),bemModifiers:"friendFollowModule",onConfirmHandler:this.handleConfirmBlockUser},void 0,n("div",{className:"friendFollowConfirmModal"},void 0,n("h2",{className:"gr-h2 gr-h2--serif"},void 0,"Block ",this.props.displayUser.viewableName,"?"),n("div",{className:"friendFollowConfirmModal__body"},void 0,"This will prevent ",this.props.displayUser.firstName," from sending you messages, friend request or from viewing your profile. They will not be notified. Comments on discussion boards from them will be hidden by default.")))}})},{"../../../modules/modal_id_helper":17,"../../../react_actions/user/show/block_user_actions":46,"../../gr_component_factory":108,"../../modal":142,react:"react"}],210:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),i=o(e("../../gr_component_factory")),a=o(e("../../modal")),l=o(e("../../../react_actions/user_relationships/friend_follow_actions")),d=e("../../../modules/modal_id_helper");r.default=i.default.createClass({displayName:"CancelFriendRequestConfirmationModal",propTypes:{displayUser:s.PropTypes.shape({firstName:React.PropTypes.string.isRequired,viewableName:React.PropTypes.string.isRequired,userId:React.PropTypes.number.isRequired}).isRequired,fromDropdown:s.PropTypes.bool,friendRequestToId:s.PropTypes.number.isRequired},getDefaultProps:function(){return{fromDropdown:!1}},handleConfirmCancelFriendRequest:function(){l.default.cancelFriendRequest(this.props.displayUser.userId,this.props.friendRequestToId)},render:function(){return n(a.default,{id:(0,d.getCancelFriendRequestModalId)(this.props.displayUser.userId,this.props.fromDropdown),bemModifiers:"friendFollowModule",onConfirmHandler:this.handleConfirmCancelFriendRequest},void 0,n("div",{className:"friendFollowConfirmModal"},void 0,n("h2",{className:"gr-h2 gr-h2--serif"},void 0,"Cancel Friend Request to ",this.props.displayUser.viewableName,"?"),n("div",{className:"friendFollowConfirmModal__body"},void 0,"This will cancel your friend request and also unfollow ",this.props.displayUser.firstName,", removing their activity from your updates feed.")))}})},{"../../../modules/modal_id_helper":17,"../../../react_actions/user_relationships/friend_follow_actions":50,"../../gr_component_factory":108,"../../modal":142,react:"react"}],211:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),i=o(e("../../gr_component_factory")),a=o(e("../../modal")),l=o(e("../../../react_actions/user_relationships/friend_follow_actions")),d=e("../../../modules/modal_id_helper");r.default=i.default.createClass({displayName:"UnfollowConfirmationModal",propTypes:{displayUser:s.PropTypes.shape({firstName:React.PropTypes.string.isRequired,viewableName:React.PropTypes.string.isRequired,userId:React.PropTypes.number.isRequired}).isRequired,fromDropdown:s.PropTypes.bool},getDefaultProps:function(){return{fromDropdown:!1}},handleConfirmUnfollow:function(){l.default.unfollow(this.props.displayUser.userId)},render:function(){return n(a.default,{id:(0,d.getUnfollowModalId)(this.props.displayUser.userId,this.props.fromDropdown),bemModifiers:"friendFollowModule",onConfirmHandler:this.handleConfirmUnfollow},void 0,n("div",{className:"friendFollowConfirmModal"},void 0,n("h2",{className:"gr-h2 gr-h2--serif"},void 0,"Unfollow ",this.props.displayUser.viewableName,"?"),n("div",{className:"friendFollowConfirmModal__body"},void 0,"This will remove ",this.props.displayUser.firstName,"'s activity from your updates feed.")))}})},{"../../../modules/modal_id_helper":17,"../../../react_actions/user_relationships/friend_follow_actions":50,"../../gr_component_factory":108,"../../modal":142,react:"react"}],212:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),i=o(e("../../gr_component_factory")),a=o(e("../../modal")),l=o(e("../../../react_actions/user_relationships/friend_follow_actions")),d=e("../../../modules/modal_id_helper");r.default=i.default.createClass({displayName:"UnfriendConfirmationModal",propTypes:{displayUser:s.PropTypes.shape({firstName:React.PropTypes.string.isRequired,viewableName:React.PropTypes.string.isRequired,userId:React.PropTypes.number.isRequired}).isRequired,fromDropdown:s.PropTypes.bool},getDefaultProps:function(){return{fromDropdown:!1}},handleConfirmUnfriend:function(){l.default.unfriend(this.props.displayUser.userId)},render:function(){return n(a.default,{id:(0,d.getUnfriendModalId)(this.props.displayUser.userId,this.props.fromDropdown),bemModifiers:"friendFollowModule",onConfirmHandler:this.handleConfirmUnfriend},void 0,n("div",{className:"friendFollowConfirmModal"},void 0,n("h2",{className:"gr-h2 gr-h2--serif"},void 0,"Unfriend ",this.props.displayUser.viewableName,"?"),n("div",{className:"friendFollowConfirmModal__body"},void 0,"This will remove ",this.props.displayUser.firstName,"'s activity from your updates feed, and your own activity will stop appearing in their updates feed. ",this.props.displayUser.firstName," will not be notified.")))}})},{"../../../modules/modal_id_helper":17,"../../../react_actions/user_relationships/friend_follow_actions":50,"../../gr_component_factory":108,"../../modal":142,react:"react"}],213:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=o(e("classnames")),a=o(e("../gr_component_factory")),l=o(e("../../react_actions/user_relationships/friend_follow_actions")),d=o(e("./confirmation_modals/unfollow_confirmation_modal")),c=o(e("./confirmation_modals/cancel_friend_request_confirmation_modal")),p=e("../../modules/modal_id_helper"),f=o(e("../modal_trigger")),h=o(e("../spinner"));r.default=a.default.createClass({displayName:"FollowButton",propTypes:{displayUser:s.default.PropTypes.shape({firstName:s.default.PropTypes.string.isRequired,viewableName:s.default.PropTypes.string.isRequired,userId:s.default.PropTypes.number.isRequired}).isRequired,isFollowing:s.default.PropTypes.bool.isRequired,isPendingFriendRequestTo:s.default.PropTypes.bool.isRequired,friendRequestToId:s.default.PropTypes.number,fromUserShowPage:s.default.PropTypes.bool,inProgress:s.default.PropTypes.bool},getInitialState:function(){return{isHovering:!1}},getDefaultProps:function(){return{fromUserShowPage:!1,inProgress:!1}},handleMouseEnter:function(){this.setState({isHovering:!0})},handleMouseLeave:function(){this.setState({isHovering:!1})},handleFollow:function(){l.default.follow(this.props.displayUser.userId,{from_user_show_page:this.props.fromUserShowPage})},renderFollowButton:function(){var e=(0,i.default)(this.withBemModifiers("friendFollowButton"),"friendFollowButton--dark");return n("button",{className:e,onClick:this.handleFollow,type:"button"},void 0,"Follow")},renderInProgressButton:function(){return n("button",{className:this.withBemModifiers("friendFollowButton"),onClick:this.handleFollow,type:"button"},void 0,n(h.default,{}))},renderUnfollowButton:function(){var e=(0,i.default)(this.withBemModifiers("friendFollowCheckmark"),"u-inlineBlock"),t=this.state.isHovering?"Unfollow":n("span",{},void 0,n("div",{className:e}),"Following"),r=void 0,e=void 0,e=this.props.isPendingFriendRequestTo&&this.props.friendRequestToId?(r=n(c.default,{displayUser:this.props.displayUser,friendRequestToId:this.props.friendRequestToId}),(0,p.getCancelFriendRequestModalId)(this.props.displayUser.userId)):(r=n(d.default,{displayUser:this.props.displayUser}),(0,p.getUnfollowModalId)(this.props.displayUser.userId));return n("div",{className:"u-inlineBlock"},void 0,n(f.default,{id:e},void 0,n("button",{className:this.withBemModifiers("friendFollowButton"),onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,type:"button"},void 0,t)),r)},render:function(){return this.props.inProgress?this.renderInProgressButton():this.props.isFollowing?this.renderUnfollowButton():this.renderFollowButton()}})},{"../../modules/modal_id_helper":17,"../../react_actions/user_relationships/friend_follow_actions":50,"../gr_component_factory":108,"../modal_trigger":143,"../spinner":194,"./confirmation_modals/cancel_friend_request_confirmation_modal":210,"./confirmation_modals/unfollow_confirmation_modal":211,classnames:"classnames",react:"react"}],214:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=o(e("../gr_component_factory")),a=o(e("../modal_trigger")),l=o(e("./confirmation_modals/unfriend_confirmation_modal")),d=o(e("../../react_actions/user_relationships/friend_follow_actions")),c=e("../../modules/modal_id_helper");r.default=i.default.createClass({displayName:"FriendButton",propTypes:{displayUser:s.default.PropTypes.shape({firstName:s.default.PropTypes.string.isRequired,viewableName:s.default.PropTypes.string.isRequired,userId:s.default.PropTypes.number.isRequired}).isRequired,addFriendUrl:s.default.PropTypes.string.isRequired,isFriend:s.default.PropTypes.bool.isRequired,isPendingFriendRequestFrom:s.default.PropTypes.bool.isRequired,isPendingFriendRequestTo:s.default.PropTypes.bool.isRequired,friendRequestFromId:s.default.PropTypes.number},getInitialState:function(){return{isHovering:!1}},handleMouseEnter:function(){this.setState({isHovering:!0})},handleMouseLeave:function(){this.setState({isHovering:!1})},handleAcceptFriendRequest:function(){d.default.acceptFriendRequest(this.props.displayUser.userId,this.props.friendRequestFromId)},renderFriendButton:function(){return this.props.isPendingFriendRequestFrom&&this.props.friendRequestFromId?n("button",{className:"friendFollowButton",onClick:this.handleAcceptFriendRequest,type:"button"},void 0,"Accept request"):this.props.isPendingFriendRequestTo?n("button",{className:"friendFollowButton",type:"button",disabled:!0},void 0,"Pending"):n("a",{className:"friendFollowButton",href:this.props.addFriendUrl},void 0,"Add friend")},renderUnfriendButton:function(){var e=this.state.isHovering?"Unfriend":n("span",{},void 0,n("div",{className:"u-inlineBlock friendFollowCheckmark"}),"Friends");return n("div",{className:"u-inlineBlock"},void 0,n(a.default,{id:(0,c.getUnfriendModalId)(this.props.displayUser.userId)},void 0,n("button",{className:"friendFollowButton",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,type:"button"},void 0,e)),n(l.default,{displayUser:this.props.displayUser}))},render:function(){return this.props.isFriend?this.renderUnfriendButton():this.renderFriendButton()}})},{"../../modules/modal_id_helper":17,"../../react_actions/user_relationships/friend_follow_actions":50,"../gr_component_factory":108,"../modal_trigger":143,"./confirmation_modals/unfriend_confirmation_modal":212,react:"react"}],215:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("reflux")),i=o(e("../gr_component_factory")),a=o(e("../../react_stores/user_relationships/friend_follow_module_store")),l=o(e("../../react_stores/user/show/block_user_store")),d=o(e("../dropdown")),c=o(e("../modal_trigger")),p=o(e("./confirmation_modals/cancel_friend_request_confirmation_modal")),f=o(e("./confirmation_modals/unfriend_confirmation_modal")),h=o(e("./confirmation_modals/unfollow_confirmation_modal")),_=o(e("./confirmation_modals/block_user_confirmation_modal")),m=e("../../modules/modal_id_helper");r.default=i.default.createClass({displayName:"FriendFollowDropdown",mixins:[s.default.connect(a.default,"ffStore"),s.default.connect(l.default,"buStore")],propTypes:{displayUser:React.PropTypes.shape({firstName:React.PropTypes.string.isRequired,viewableName:React.PropTypes.string.isRequired,userId:React.PropTypes.number.isRequired}).isRequired,sendMessageUrl:React.PropTypes.string.isRequired,recommendBooksUrl:React.PropTypes.string.isRequired,compareBooksUrl:React.PropTypes.string.isRequired,addFriendUrl:React.PropTypes.string.isRequired,renderFriendButton:React.PropTypes.bool.isRequired,friendButtonInDropdown:React.PropTypes.bool.isRequired,friendRequestToId:React.PropTypes.number},renderRecommendBooksLink:function(){return this.state.ffStore.isFriend?n("a",{className:"friendFollowModuleDropdownMenu__dropdownLink",href:this.props.recommendBooksUrl,rel:"nofollow","data-testid":"recommendBooks"},void 0,"Recommend books"):void 0},shouldRenderCancelFriendRequestModal:function(){return this.state.ffStore.isFollowing&&this.state.ffStore.isPendingFriendRequestTo&&this.props.friendRequestToId},shouldRenderUnfollowModal:function(){return this.state.ffStore.isFollowing&&!this.state.ffStore.isPendingFriendRequestTo},renderFollowingLinks:function(){return this.shouldRenderCancelFriendRequestModal()?n("div",{className:"friendFollowModuleDropdownMenu__dropdownLink"},void 0,n(c.default,{id:(0,m.getCancelFriendRequestModalId)(this.props.displayUser.userId,!0)},void 0,n("button",{className:"gr-buttonAsLink gr-buttonAsLink--black",type:"button","data-testid":"cancelFriendRequest"},void 0,"Cancel friend request"))):this.shouldRenderUnfollowModal()?n("div",{className:"friendFollowModuleDropdownMenu__dropdownLink"},void 0,n(c.default,{id:(0,m.getUnfollowModalId)(this.props.displayUser.userId,!0)},void 0,n("button",{className:"gr-buttonAsLink gr-buttonAsLink--black",type:"button","data-testid":"unfollow"},void 0,"Unfollow"))):void 0},shouldRenderUnfriendModal:function(){return this.state.ffStore.isFriend},renderFriendLinks:function(){return this.state.ffStore.isFriend?n("div",{},void 0,n("div",{className:"friendFollowModuleDropdownMenu__dropdownLink"},void 0,n(c.default,{id:(0,m.getUnfriendModalId)(this.props.displayUser.userId,!0)},void 0,n("button",{className:"gr-buttonAsLink gr-buttonAsLink--black",type:"button","data-testid":"unfriend"},void 0,"Unfriend ",this.props.displayUser.firstName)))):this.props.friendButtonInDropdown&&this.props.renderFriendButton&&!this.state.ffStore.isPendingFriendRequestTo?n("a",{className:"friendFollowModuleDropdownMenu__dropdownLink",href:this.props.addFriendUrl,rel:"nofollow","data-testid":"addFriend"},void 0,"Add friend"):void 0},renderBlockUserLink:function(){var e=this.state.buStore.isBlocked?"Unblock":"Block this user",t=(this.state.buStore.isBlocked?(0,m.getUnblockUserModalId):(0,m.getBlockUserModalId))(this.props.displayUser.userId,!0);return n("div",{className:"friendFollowModuleDropdownMenu__dropdownLink"},void 0,n(c.default,{id:t},void 0,n("button",{className:"gr-buttonAsLink friendFollowModule__blockedUserText friendFollowModule__blockedUserText--red",type:"button","data-testid":"blockUser"},void 0,e)))},renderDropdownList:function(){return n("div",{className:"friendFollowModuleDropdownMenu"},void 0,n("a",{className:"friendFollowModuleDropdownMenu__dropdownLink",href:this.props.sendMessageUrl,rel:"nofollow","data-testid":"message"},void 0,"Message"),this.renderRecommendBooksLink(),n("a",{className:"friendFollowModuleDropdownMenu__dropdownLink",href:this.props.compareBooksUrl,rel:"nofollow","data-testid":"compareBooks"},void 0,"Compare books"),this.renderFollowingLinks(),this.renderFriendLinks(),this.renderBlockUserLink())},renderDropdownTrigger:function(){return n("div",{},void 0,n("span",{className:"friendFollowModuleCaret__text"},void 0,"More"),n("div",{className:"friendFollowModuleCaret__image"}))},render:function(){return n("div",{className:"friendFollowModuleCaret"},void 0,n(d.default,{trigger:this.renderDropdownTrigger(),triggerEventType:d.default.TriggerEventTypes.CLICK,tooltipText:"More",bemModifiers:"friendFollowModule",children:this.renderDropdownList()}),this.shouldRenderCancelFriendRequestModal()&&n(p.default,{displayUser:this.props.displayUser,isPendingFriendRequestTo:this.state.ffStore.isPendingFriendRequestTo,friendRequestToId:this.props.friendRequestToId,fromDropdown:!0}),this.shouldRenderUnfollowModal()&&n(h.default,{displayUser:this.props.displayUser,fromDropdown:!0}),this.shouldRenderUnfriendModal()&&n(f.default,{displayUser:this.props.displayUser,fromDropdown:!0}),n(_.default,{displayUser:this.props.displayUser,isBlocked:this.state.buStore.isBlocked,fromDropdown:!0}))}})},{"../../modules/modal_id_helper":17,"../../react_stores/user/show/block_user_store":258,"../../react_stores/user_relationships/friend_follow_module_store":262,"../dropdown":91,"../gr_component_factory":108,"../modal_trigger":143,"./confirmation_modals/block_user_confirmation_modal":209,"./confirmation_modals/cancel_friend_request_confirmation_modal":210,"./confirmation_modals/unfollow_confirmation_modal":211,"./confirmation_modals/unfriend_confirmation_modal":212,reflux:"reflux"}],216:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=o(e("reflux")),a=o(e("classnames")),l=o(e("../gr_component_factory")),d=o(e("./follow_button")),c=o(e("./friend_button")),p=o(e("./friend_follow_dropdown")),f=o(e("../spinner")),h=o(e("../modal_trigger")),_=o(e("./confirmation_modals/block_user_confirmation_modal")),m=e("../../modules/modal_id_helper"),g=o(e("../../react_stores/user_relationships/friend_follow_module_store")),e=o(e("../../react_stores/user/show/block_user_store"));r.default=l.default.createClass({displayName:"FriendFollowModule",mixins:[i.default.connectFilter(g.default,"ffStore",function(e){return e[this.props.displayUser.userId]}),i.default.connect(e.default,"buStore")],propTypes:{displayUser:s.default.PropTypes.shape({firstName:s.default.PropTypes.string.isRequired,viewableName:s.default.PropTypes.string.isRequired,userId:s.default.PropTypes.number.isRequired}).isRequired,hideDropdown:s.default.PropTypes.bool.isRequired,sendMessageUrl:s.default.PropTypes.string.isRequired,recommendBooksUrl:s.default.PropTypes.string.isRequired,compareBooksUrl:s.default.PropTypes.string.isRequired,addFriendUrl:s.default.PropTypes.string.isRequired,friendRequestToId:s.default.PropTypes.number,friendRequestFromId:s.default.PropTypes.number,renderFollowButton:s.default.PropTypes.bool.isRequired,renderFriendButton:s.default.PropTypes.bool.isRequired,friendButtonInDropdown:s.default.PropTypes.bool.isRequired,fromUserShowPage:s.default.PropTypes.bool},getDefaultProps:function(){return{fromUserShowPage:!1}},shouldRenderFriendButton:function(){return this.props.renderFriendButton&&!this.props.friendButtonInDropdown},shouldRenderFollowButton:function(){return this.props.renderFollowButton&&!this.state.ffStore.isFriend},render:function(){if(this.state.ffStore.inProgress||this.state.buStore.blockInProgress)return n("div",{className:"u-clearBoth"},void 0,n(f.default,{}));var e=(0,a.default)("u-inlineBlock",{"u-marginRightMedium":this.shouldRenderFriendButton()});return n("div",{className:"friendFollowModule"},void 0,this.state.buStore.isBlocked&&n("div",{className:"friendFollowModule__blockedUserText","data-testid":"blockText"},void 0,"You've blocked ",this.props.displayUser.firstName,".",n("div",{className:"friendFollowModule__blockedUserTextTrigger"},void 0,n(h.default,{id:(0,m.getUnblockUserModalId)(this.props.displayUser.userId)},void 0,n("button",{className:"gr-buttonAsLink friendFollowModule__blockedUserText friendFollowModule__blockedUserText--red",type:"button"},void 0,"Unblock")),n(_.default,{isBlocked:this.state.buStore.isBlocked,displayUser:this.props.displayUser,isPendingFriendRequestTo:this.state.ffStore.isPendingFriendRequestTo}))),n("div",{className:"u-marginAuto"},void 0,this.shouldRenderFollowButton()&&n("div",{className:e},void 0,n(d.default,{displayUser:this.props.displayUser,isFollowing:this.state.ffStore.isFollowing,isPendingFriendRequestTo:this.state.ffStore.isPendingFriendRequestTo,friendRequestToId:this.props.friendRequestToId,fromUserShowPage:this.props.fromUserShowPage})),this.shouldRenderFriendButton()&&n(c.default,{displayUser:this.props.displayUser,addFriendUrl:this.props.addFriendUrl,isFriend:this.state.ffStore.isFriend,isPendingFriendRequestFrom:this.state.ffStore.isPendingFriendRequestFrom,isPendingFriendRequestTo:this.state.ffStore.isPendingFriendRequestTo,friendRequestFromId:this.props.friendRequestFromId}),!this.props.hideDropdown&&s.default.createElement(p.default,this.props)))}})},{"../../modules/modal_id_helper":17,"../../react_stores/user/show/block_user_store":258,"../../react_stores/user_relationships/friend_follow_module_store":262,"../gr_component_factory":108,"../modal_trigger":143,"../spinner":194,"./confirmation_modals/block_user_confirmation_modal":209,"./follow_button":213,"./friend_button":214,"./friend_follow_dropdown":215,classnames:"classnames",react:"react",reflux:"reflux"}],217:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0}),r.ALWAYS_DISPLAY_STARS_PROP=void 0;var s=o(e("react")),i=o(e("../gr_component_factory")),a=o(e("reflux")),l=e("../../react_mixins/gr_reflux"),d=e("../../modules/ads/click_tracking_helper"),c=e("../../modules/default_shelves"),p=o(e("classnames")),f=o(e("../../react_stores/shelvings_store")),h=o(e("../../react_stores/user_shelves_store")),_=o(e("../../react_stores/want_to_read_menu_store")),m=o(e("../../react_actions/want_to_read_menu_actions")),g=o(e("../../react_stores/user_agent_capabilities_store")),v=o(e("../../react_actions/shelvings_actions")),y=o(e("../dropdown")),b=o(e("../modal")),k=o(e("../modal_trigger")),S=o(e("../../react_actions/modal_actions")),P=o(e("../../react_stores/modal_store")),T=o(e("../want_to_read/want_to_read_menu")),w=o(e("../user_rating"));r.ALWAYS_DISPLAY_STARS_PROP="ALWAYS_DISPLAY_STARS_PROP";r.default=i.default.createClass({displayName:"WantToReadButton",propTypes:{bookId:s.default.PropTypes.string.isRequired,bookTitle:s.default.PropTypes.string.isRequired,uniqueId:s.default.PropTypes.string.isRequired,showStars:s.default.PropTypes.oneOfType([s.default.PropTypes.bool,s.default.PropTypes.string]),showMenu:s.default.PropTypes.bool,origin:s.default.PropTypes.string,trackingOptions:s.default.PropTypes.object,starsTrackingOptions:s.default.PropTypes.object,withModalShelvingMenu:s.default.PropTypes.bool},mixins:[(0,l.connectToLazyStore)(f.default,"bookId",{stateKey:"shelvings"}),(0,l.connectToLazyStore)(_.default,"uniqueId",{stateKey:"wantToReadMenu"}),a.default.connect(h.default,"userShelves"),a.default.connect(g.default,"userAgentCapabilities"),a.default.connect(P.default,"modalStore")],getDefaultProps:function(){return{showStars:!1,showMenu:!0,trackingOptions:d.TRACKED_CLASSES.want_to_read_button,withModalShelvingMenu:!1}},shelveBook:function(){v.default.shelveBook(this.props.bookId,h.default.defaultShelves().WANT_TO_READ,this.props.origin)},unshelveBook:function(){window.confirm("Removing a book deletes your rating, review, etc. Remove this book from all your shelves?")&&v.default.unshelveBook(this.state.shelvings.book.bookId)},focusButton:function(e){e&&this.restoreFocusOnUpdate&&!this.state.isShelvingInProgress&&(this.forgetFocus(),e.focus())},rememberFocus:function(){this.restoreFocusOnUpdate=!0},forgetFocus:function(){this.restoreFocusOnUpdate=!1},checkmarkClass:function(){return(0,c.checkIconClassnames)(this.state.shelvings.exclusiveShelfName)},unshelved:function(){return null===this.state.shelvings.exclusiveShelfName},getBookId:function(){return(this.unshelved()?this.props:this.state.shelvings.book).bookId},getBookTitle:function(){return this.unshelved()?this.props.bookTitle:this.state.shelvings.book.title},renderWantToReadLeftUnshelved:function(){var e=this.state.shelvings.isShelvingInProgress?"Savingâ€¦":"Want to Read",t=(0,p.default)("wantToReadButton__leftUnshelvedButton",{"wantToReadButton__leftUnshelvedButton--noOutline":this.state.shelvings.isShelvingInProgress}),r="Add "+this.props.bookTitle+" to your want to read shelf";return s.default.createElement("button",{"aria-label":r,ref:this.focusButton,className:t,onClick:this.shelveBook,onFocus:this.rememberFocus,onBlur:this.forgetFocus},e)},renderWantToReadLeftShelved:function(){var e=(0,p.default)("wantToReadButton__leftShelvedButton"),t=(0,p.default)({wantToReadButton__checkIcon:!this.state.shelvings.isShelvingInProgress},this.checkmarkClass()),r="Remove "+this.state.shelvings.book.title+" from my shelves",o=this.state.shelvings.isShelvingInProgress?"Savingâ€¦":this.state.shelvings.exclusiveShelfDisplayName;return this.state.userAgentCapabilities.touch?s.default.createElement("button",{"aria-label":r,onClick:this.unshelveBook,onFocus:this.rememberFocus,onBlur:this.forgetFocus,ref:this.focusButton,className:e},n("span",{className:t+" u-inlineBlock"}),n("div",{className:"wantToReadButton__shelvedButtonText"},void 0,o)):n("span",{},void 0,s.default.createElement("button",{"aria-label":r,ref:this.focusButton,onClick:this.unshelveBook,onFocus:this.rememberFocus,onBlur:this.forgetFocus,className:e+" "+t}),n("div",{className:"wantToReadButton__shelvedButtonText"},void 0,o))},renderWantToReadRight:function(){var e=this.getBookId(),t=this.getBookTitle(),r=["wantToReadMenu"];return this.props.withModalShelvingMenu&&r.push("wtrMenuToggleDropdown"),this.props.showMenu&&!this.isWTRModalOpen()?n(y.default,{trigger:this.renderWantToReadRightButtonContents(),triggerEventType:y.default.TriggerEventTypes.HOVER,bemModifiers:r},void 0,n(T.default,{uniqueId:this.props.uniqueId,bookId:e,bookTitle:t,userShelves:this.state.userShelves,shelvings:this.state.shelvings})):null},getModalId:function(){return"wtrModal"+this.getBookId()},isWTRModalOpen:function(){return this.state.modalStore.currentActiveModal&&this.state.modalStore.currentActiveModal===this.getModalId()},hideBookAlsoMarkedAsReadMessage:function(){this.state.showBookAlsoMarkedAsReadMessage&&this.setState({showBookAlsoMarkedAsReadMessage:!1})},handleWTRMenuNonExclusiveShelvingWithoutExclusive:function(){this.setState({showBookAlsoMarkedAsReadMessage:!0})},handleModalClose:function(){m.default.closeAddShelfTextbox(this.props.uniqueId),this.hideBookAlsoMarkedAsReadMessage()},handleDoneClick:function(){S.default.closeModal(),this.hideBookAlsoMarkedAsReadMessage()},renderModal:function(){var e=this.getBookId(),t=this.getBookTitle();if(this.props.showMenu&&this.props.withModalShelvingMenu){var r=(0,p.default)("wtrModalContainer",{wtrMenuToggleModal:!this.isWTRModalOpen()});return n("div",{className:r},void 0,n(k.default,{id:this.getModalId()},void 0,n("button",{type:"button",className:"wtrModalContainer__trigger"},void 0,this.renderWantToReadRightButtonContents())),n(b.default,{id:this.getModalId(),centered:!0,onCloseHandler:this.handleModalClose},void 0,n("div",{className:"wtrModal"},void 0,n("h3",{className:"gr-h3 gr-h3--serif gr-h3--noMargin u-paddingBottomXSmall"},void 0,"Shelve ",this.props.bookTitle),n(T.default,{uniqueId:this.props.uniqueId,bookId:e,bookTitle:t,userShelves:this.state.userShelves,shelvings:this.state.shelvings,useModalView:!0,bemModifiers:"modalView",onNonExclusiveShelvingWithoutExclusive:this.handleWTRMenuNonExclusiveShelvingWithoutExclusive,onExclusiveShelvingChange:this.hideBookAlsoMarkedAsReadMessage})),!this.state.wantToReadMenu.showAddShelfTextbox&&n("button",{type:"button",className:"gr-button wtrModal__closeButton","aria-label":"Close want to read menu",onClick:this.handleDoneClick},void 0,"Done"),this.state.showBookAlsoMarkedAsReadMessage&&n("div",{className:"wtrModal__alsoMarkedAsReadMessage"},void 0,"This book has also been marked as Read")))}return null},renderWantToReadRightButtonContents:function(){return n("div",{className:"wantToReadButton__right"},void 0,n("span",{className:"u-visuallyHidden"},void 0,"Shelving menu"))},render:function(){var e=(0,p.default)("wantToReadButton__left",{"wantToReadButton__left--standalone":!this.props.showMenu},{wantToReadButton__leftUnshelved:this.unshelved()},{wantToReadButton__leftShelved:!this.unshelved()}),t=this.unshelved()?this.renderWantToReadLeftUnshelved():this.renderWantToReadLeftShelved(),r=(0,p.default)("wtrStarsContainer",{"wtrStarsContainer--alwaysDisplay":"ALWAYS_DISPLAY_STARS_PROP"===this.props.showStars});return n("div",{},void 0,n("div",{className:"wantToReadButton"},void 0,n("div",{className:e},void 0,t),this.renderModal(),this.renderWantToReadRight()),this.props.showStars?n("div",{className:r},void 0,n(w.default,{bookId:this.props.bookId,starsTrackingOptions:this.props.starsTrackingOptions})):null)}})},{"../../modules/ads/click_tracking_helper":2,"../../modules/default_shelves":12,"../../react_actions/modal_actions":38,"../../react_actions/shelvings_actions":44,"../../react_actions/want_to_read_menu_actions":52,"../../react_mixins/gr_reflux":235,"../../react_stores/modal_store":251,"../../react_stores/shelvings_store":256,"../../react_stores/user_agent_capabilities_store":260,"../../react_stores/user_shelves_store":263,"../../react_stores/want_to_read_menu_store":264,"../dropdown":91,"../gr_component_factory":108,"../modal":142,"../modal_trigger":143,"../user_rating":208,"../want_to_read/want_to_read_menu":218,classnames:"classnames",react:"react",reflux:"reflux"}],218:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},a=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var l=o(e("lodash")),s=o(e("../gr_component_factory")),i=e("../../react_mixins/gr_reflux"),d=e("../../modules/default_shelves"),c=o(e("../../react_stores/want_to_read_menu_store")),p=o(e("./want_to_read_menu_filter")),f=o(e("../../react_actions/shelvings_actions")),h=o(e("./want_to_read_menu_shelf_creator")),_=o(e("../spinner")),m=o(e("classnames"));r.default=s.default.createClass({displayName:"WantToReadMenu",mixins:[(0,i.connectToLazyStore)(c.default,"uniqueId")],propTypes:{bookId:React.PropTypes.string.isRequired,bookTitle:React.PropTypes.string.isRequired,uniqueId:React.PropTypes.string.isRequired,userShelves:React.PropTypes.object.isRequired,shelvings:React.PropTypes.object.isRequired,useModalView:React.PropTypes.bool,onNonExclusiveShelvingWithoutExclusive:React.PropTypes.func,onExclusiveShelvingChange:React.PropTypes.func},defaultPropTypes:function(){return{useModalView:!1}},shelveBook:function(e){f.default.shelveBook(this.props.bookId,e)},unshelveBook:function(){window.confirm("Removing a book deletes your rating, review, etc. Remove this book from all your shelves?")&&f.default.unshelveBook(this.props.bookId)},modifyExclusiveShelving:function(e,t){this.props.onExclusiveShelvingChange&&l.default.isFunction(this.props.onExclusiveShelvingChange)&&this.props.onExclusiveShelvingChange(),e?this.unshelveBook():this.shelveBook(t)},toggleNonExclusiveShelving:function(e){null===this.props.shelvings.exclusiveShelfName&&this.props.onNonExclusiveShelvingWithoutExclusive&&l.default.isFunction(this.props.onNonExclusiveShelvingWithoutExclusive)&&this.props.onNonExclusiveShelvingWithoutExclusive(),f.default.toggleNonExclusiveShelving(this.props.bookId,e,!1,this.props.bookTitle)},renderFilter:function(){return 7<=this.props.userShelves.customExclusiveShelves.concat(this.props.userShelves.nonExclusiveShelves).length?a(p.default,{bookId:this.props.bookId,uniqueId:this.props.uniqueId,shelvings:this.props.shelvings,wantToReadMenu:this.state,bemModifiers:this.props.bemModifiers}):void 0},renderEmptyMessage:function(){var e=this.state.displayableExclusiveShelves;return 0===this.state.displayableNonExclusiveShelves.concat(e).length?a("li",{className:"wantToReadMenu__genericItem"},void 0,"No Matching Shelves"):void 0},renderExclusiveShelves:function(){var i=this,e=this.state.displayableExclusiveShelves;return l.default.map(e,function(e){var t=e.name===i.props.shelvings.exclusiveShelfName,r=e.displayName,o=t?"Unshelve  "+i.props.bookTitle:"Shelve "+i.props.bookTitle+" as "+r,n=(0,m.default)(i.withBemModifiers("wantToReadMenu__exclusiveShelf"),{"wantToReadMenu__exclusiveShelf--shelved":t}),s=i.props.useModalView?i.renderExclusiveShelfStatusIcon(e):null;return a("li",{className:"wantToReadMenu__shelfItem"},r,a("button",{className:n,"aria-label":o,onClick:function(){i.modifyExclusiveShelving(t,e)}},void 0,s&&a("div",{className:"wantToReadMenu__shelfStatusContainer"},void 0,s),r))})},renderExclusiveShelfStatusIcon:function(e){var t,r=null,o=e.name===this.props.shelvings.exclusiveShelfName;return o&&!this.props.shelvings.isShelvingInProgress?(t=(0,m.default)("wantToReadButton__checkIcon","wantToReadButton__checkIcon--modalView",(0,d.checkIconClassnames)(this.props.shelvings.exclusiveShelfName)),r=a("span",{className:t})):this.props.shelvings.isShelvingInProgress&&(!this.props.shelvings.targetExclusiveShelfName&&o||this.props.shelvings.targetExclusiveShelfName===e.name)&&(r=a(_.default,{isSmall:!0})),r},renderNonExclusiveShelves:function(){var s=this,e=this.state.displayableNonExclusiveShelves;return l.default.map(e,function(e){var t=!1;null!==s.props.shelvings.exclusiveShelfName&&l.default.includes(s.props.shelvings.nonExclusiveShelfNames,e.name)&&(t=!0);var r=e.displayName,o="Shelve "+s.props.bookTitle+" as "+r,n=s.withBemModifiers("wantToReadMenu__nonExclusiveShelf");return a("li",{className:"wantToReadMenu__shelfItem"},r,a("label",{className:n},void 0,a("input",{className:"wantToReadMenu__shelfCheckbox",checked:t,type:"checkbox",name:"shelf["+e.name+"]","aria-label":o,onChange:function(){s.toggleNonExclusiveShelving(e)}}),r))})},renderAddNewShelfButton:function(){var e=this.props.userShelves.customExclusiveShelves.concat(this.props.userShelves.nonExclusiveShelves).concat(this.props.userShelves.defaultShelves),t=l.default.map(e,function(e){return e.name}),e=!l.default.includes(t,this.state.shelfNameFilter),t=this.withBemModifiers("wantToReadMenu__newShelfButtonContainer");return a("li",{className:t},void 0,React.createElement(h.default,n({shelfNameFilter:this.state.shelfNameFilter,userCanAddShelf:e,uniqueId:this.props.uniqueId,bookId:this.props.bookId,bemModifiers:this.props.bemModifiers,useModalView:this.props.useModalView,bookTitle:this.props.bookTitle},this.state)))},render:function(){return a("div",{className:"wantToReadMenu"},void 0,this.props.useModalView&&a("div",{className:"wantToReadMenu__headerContainer"},void 0,this.renderFilter()),a("div",{className:"wantToReadMenu__scrollableContainer"},void 0,!this.props.useModalView&&this.renderFilter(),this.renderEmptyMessage(),this.renderExclusiveShelves(),this.renderNonExclusiveShelves()),this.renderAddNewShelfButton())}})},{"../../modules/default_shelves":12,"../../react_actions/shelvings_actions":44,"../../react_mixins/gr_reflux":235,"../../react_stores/want_to_read_menu_store":264,"../gr_component_factory":108,"../spinner":194,"./want_to_read_menu_filter":219,"./want_to_read_menu_shelf_creator":220,classnames:"classnames",lodash:"lodash"}],219:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=o(e("../gr_component_factory")),a=o(e("../../react_actions/want_to_read_menu_actions"));r.default=i.default.createClass({displayName:"WantToReadMenuFilter",propTypes:{bookId:s.default.PropTypes.string.isRequired,uniqueId:s.default.PropTypes.string.isRequired,shelvings:s.default.PropTypes.object.isRequired,wantToReadMenu:s.default.PropTypes.object.isRequired},handleKeyPress:function(e){var t=null;null!==this.props.shelvings.exclusiveShelfName&&(t=this.props.shelvings.exclusiveShelfName),a.default.updateShelfNameFilter(e.target.value,this.props.uniqueId,t)},render:function(){var e=this.withBemModifiers("wantToReadMenuFilter");return n("form",{className:e,onSubmit:function(e){return e.preventDefault()}},void 0,n("input",{className:"gr-textInput\n                               gr-textInput--small\n                               wantToReadMenuFilter--textInput",type:"text",placeholder:"Filter Shelves","aria-label":"Filter Shelf Names",value:this.props.wantToReadMenu.shelfNameFilter,onChange:this.handleKeyPress}))}})},{"../../react_actions/want_to_read_menu_actions":52,"../gr_component_factory":108,react:"react"}],220:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,s=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var n=o(e("react")),i=o(e("../gr_component_factory")),a=o(e("../../react_actions/want_to_read_menu_actions")),l=o(e("../../react_actions/shelvings_actions")),d=o(e("classnames")),c=o(e("lodash"));r.default=i.default.createClass({displayName:"WantToReadMenuShelfCreator",propTypes:{userCanAddShelf:n.default.PropTypes.bool.isRequired,shelfNameFilter:n.default.PropTypes.string,uniqueId:n.default.PropTypes.string.isRequired,bookId:n.default.PropTypes.string.isRequired,bookTitle:n.default.PropTypes.string.isRequired,useModalView:n.default.PropTypes.bool},getDefaultProps:function(){return{useModalView:!1}},getInitialState:function(){return{unsavedShelfName:""}},openAddShelfTextbox:function(){a.default.openAddShelfTextbox(this.props.uniqueId)},closeAddShelfTextbox:function(){a.default.closeAddShelfTextbox(this.props.uniqueId)},checkIfCommentIsEmpty:function(e){this.setState({unsavedShelfName:e.target.value})},shelveAsNewShelfName:function(e,t){t.preventDefault(),a.default.updateShelfNameFilter("",this.props.uniqueId),l.default.toggleNonExclusiveShelving(this.props.bookId,{name:e},!0,this.props.bookTitle)},render:function(){var t=this;if(""!==this.props.shelfNameFilter&&this.props.userCanAddShelf){var e=this.withBemModifiers("wantToReadShelfCreator__addNamedShelfButton");return s("span",{className:"wantToReadShelfCreator"},void 0,s("button",{className:e,"aria-label":"Add new "+this.props.shelfNameFilter+" shelf",onClick:function(e){t.shelveAsNewShelfName(t.props.shelfNameFilter,e)}},void 0,"Add new â€œ",s("span",{className:"wantToReadShelfCreator__addShelfButtonShelfName"},void 0,this.props.shelfNameFilter),"â€ shelf"))}if(this.props.showAddShelfTextbox){var r=(0,d.default)(this.withBemModifiers("wantToReadShelfCreator"),"wantToReadShelfCreator--wrap"),o=(0,d.default)("gr-textInput",this.withBemModifiers("wantToReadShelfCreator__textInput"),{"gr-textInput--small":!this.props.useModalView}),n=(0,d.default)(this.withBemModifiers("wantToReadShelfCreator__addShelfButton"),"gr-button",{"gr-button--small":!this.props.useModalView,"gr-button--dark gr-button--fullWidth":this.props.useModalView});return s("form",{className:r,onSubmit:function(e){t.shelveAsNewShelfName(t.state.unsavedShelfName,e)}},void 0,s("input",{className:o,type:"text",placeholder:"New Shelf Name","aria-label":"Add new shelf name",autoFocus:!0,onChange:this.checkIfCommentIsEmpty}),s("div",{className:"wantToReadShelfCreator__buttonContainer"},void 0,s("input",{type:"submit",className:n,disabled:c.default.isEmpty(c.default.trim(this.state.unsavedShelfName)),value:"Add"}),this.props.useModalView&&s("button",{type:"button",className:"gr-button gr-button--fullWidth wantToReadShelfCreator__cancelButton",onClick:this.closeAddShelfTextbox,"aria-label":"Close add new shelf form"},void 0,"Cancel")))}if(this.props.userCanAddShelf){e=this.withBemModifiers("wantToReadShelfCreator__showAddShelfTextboxButton");return s("span",{className:"wantToReadShelfCreator"},void 0,s("button",{className:e,"aria-label":"Add new shelf",onClick:this.openAddShelfTextbox},void 0,"Add New Shelf"))}return null}})},{"../../react_actions/shelvings_actions":44,"../../react_actions/want_to_read_menu_actions":52,"../gr_component_factory":108,classnames:"classnames",lodash:"lodash",react:"react"}],221:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u,n=(u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,o){var n=e&&e.defaultProps,s=arguments.length-3;if((t=!t&&0!=s?{}:t)&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t=t||(n||{});if(1==s)t.children=o;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];t.children=a}return{$$typeof:u,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}});Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("react")),i=o(e("../gr_component_factory")),a=o(e("./want_to_read_button")),l=o(e("../user_rating")),d=e("lodash");r.default=i.default.createClass({displayName:"WantToReadWithStars",propTypes:{bookId:s.default.PropTypes.string.isRequired,uniqueId:s.default.PropTypes.string.isRequired,bookTitle:s.default.PropTypes.string.isRequired},render:function(){return n("div",{},void 0,n(a.default,{bookId:this.props.bookId,uniqueId:(0,d.random)(1e6).toString(),bookTitle:this.props.bookTitle}),n(l.default,{bookId:this.props.bookId,bookTitle:this.props.bookTitle}))}})},{"../gr_component_factory":108,"../user_rating":208,"./want_to_read_button":217,lodash:"lodash",react:"react"}],222:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.ConversationsStores=r.ConversationsComponents=void 0;var n=o(e("../../react_stores/like_store")),s=o(e("../../react_stores/comments_store")),i=o(e("../../react_components/comment/comment_form")),a=o(e("../../react_components/comment/comments")),l=o(e("../../react_components/like/like_button")),e=o(e("../../react_components/like/like_information"));r.ConversationsComponents={CommentForm:i.default,Comments:a.default,LikeButton:l.default,LikeInformation:e.default},r.ConversationsStores={CommentsStore:s.default,LikeStore:n.default}},{"../../react_components/comment/comment_form":85,"../../react_components/comment/comments":86,"../../react_components/like/like_button":132,"../../react_components/like/like_information":134,"../../react_stores/comments_store":243,"../../react_stores/like_store":250}],223:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ExperimentStores=r.ExperimentComponents=void 0;var o=e("./conversations"),n=e("./old_homepage"),s=e("./review_show"),e=e("lodash");r.ExperimentComponents=(0,e.merge)({},o.ConversationsComponents,n.OldHomepageComponents,s.ReviewShowComponents),r.ExperimentStores=(0,e.merge)({},o.ConversationsStores,n.OldHomepageStores,s.ReviewShowStores)},{"./conversations":222,"./old_homepage":224,"./review_show":225,lodash:"lodash"}],224:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.OldHomepageStores=r.OldHomepageComponents=void 0;var n=o(e("../../react_stores/like_store")),s=o(e("../../react_stores/comments_store")),i=o(e("../../react_components/comment/comment_form")),a=o(e("../../react_components/comment/comments")),l=o(e("../../react_components/like/like_button")),u=o(e("../../react_components/like/like_information")),e=o(e("../../react_components/like/like_simple_footer"));r.OldHomepageComponents={CommentForm:i.default,Comments:a.default,LikeButton:l.default,LikeInformation:u.default,LikeSimpleFooter:e.default},r.OldHomepageStores={CommentsStore:s.default,LikeStore:n.default}},{"../../react_components/comment/comment_form":85,"../../react_components/comment/comments":86,"../../react_components/like/like_button":132,"../../react_components/like/like_information":134,"../../react_components/like/like_simple_footer":135,"../../react_stores/comments_store":243,"../../react_stores/like_store":250}],225:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.ReviewShowStores=r.ReviewShowComponents=void 0;var n=o(e("../../react_stores/like_store")),e=o(e("../../react_components/like/like_simple_footer"));r.ReviewShowComponents={LikeSimpleFooter:e.default},r.ReviewShowStores={LikeStore:n.default}},{"../../react_components/like/like_simple_footer":135,"../../react_stores/like_store":250}],226:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.FriendFollowModuleStores=r.FriendFollowModuleComponents=void 0;var n=o(e("../react_components/user_relationships/friend_follow_module")),s=o(e("../react_stores/user_relationships/friend_follow_module_store")),e=o(e("../react_stores/user/show/block_user_store"));r.FriendFollowModuleComponents={FriendFollowModule:n.default},r.FriendFollowModuleStores={FriendFollowModuleStore:s.default,BlockUserStore:e.default}},{"../react_components/user_relationships/friend_follow_module":216,"../react_stores/user/show/block_user_store":258,"../react_stores/user_relationships/friend_follow_module_store":262}],227:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.GlobalComponents=r.GlobalStores=void 0;var n=o(e("../react_stores/google_ads_store")),s=o(e("../react_components/login/interstitial/login_interstitial")),i=o(e("../react_components/stores_initializer")),a=o(e("../react_components/buy_buttons/get_a_copy_button")),l=o(e("../react_components/buy_buttons/get_a_copy_interstitial")),u=o(e("../react_components/buy_buttons/get_a_copy_interstitial_wrapper")),d=o(e("../react_components/qualtrics/qualtrics_survey")),c=o(e("../react_components/book/review_cta")),p=o(e("../react_components/user/user_icon")),f=o(e("../react_stores/user_not_interested_store")),e=o(e("../react_stores/user_shelves_store"));r.GlobalStores={GoogleAdsStore:n.default,UserNotInterestedStore:f.default,UserShelvesStore:e.default},r.GlobalComponents={LoginInterstitial:s.default,StoresInitializer:i.default,GetACopyButton:a.default,GetACopyInterstitial:l.default,GetACopyInterstitialWrapper:u.default,QualtricsSurvey:d.default,ReviewCta:c.default,UserIcon:p.default}},{"../react_components/book/review_cta":74,"../react_components/buy_buttons/get_a_copy_button":77,"../react_components/buy_buttons/get_a_copy_interstitial":78,"../react_components/buy_buttons/get_a_copy_interstitial_wrapper":79,"../react_components/login/interstitial/login_interstitial":138,"../react_components/qualtrics/qualtrics_survey":156,"../react_components/stores_initializer":196,"../react_components/user/user_icon":201,"../react_stores/google_ads_store":249,"../react_stores/user_not_interested_store":261,"../react_stores/user_shelves_store":263}],228:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.NewsComponents=void 0;var o,n=e("../react_components/news/news_preview"),e=(o=n)&&o.__esModule?o:{default:o};r.NewsComponents={NewsPreview:e.default}},{"../react_components/news/news_preview":146}],229:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.ReadingNotesStores=r.ReadingNotesComponents=void 0;var n=o(e("../react_components/reading_notes/annotated_books_landing_page")),s=o(e("../react_components/author/author_follow_button")),i=o(e("../react_components/comment/comment_form")),a=o(e("../react_components/comment/comments")),l=o(e("../react_components/like/like_button")),u=o(e("../react_components/like/like_information")),d=o(e("../react_components/reading_notes/reading_notes_annotator")),c=o(e("../react_components/reading_notes/reading_notes_header")),p=o(e("../react_components/reading_notes/reading_notes_shelving_modal")),f=o(e("../react_components/reading_notes/reading_notes_shelving_modal_trigger")),h=o(e("../react_components/user/user_follow_widget")),_=o(e("../react_components/user/user_icon")),m=o(e("../react_components/want_to_read/want_to_read_button")),g=o(e("../react_components/want_to_read/want_to_read_with_stars")),v=o(e("../react_stores/reading_notes/annotated_books_store")),y=o(e("../react_stores/author_follow_store")),b=o(e("../react_stores/comments_store")),k=o(e("../react_stores/like_store")),S=o(e("../react_stores/shelvings_store")),P=o(e("../react_stores/user/user_follow_store")),T=o(e("../react_stores/user_shelves_store")),e=o(e("../react_stores/user_agent_capabilities_store"));r.ReadingNotesComponents={AnnotatedBooksLandingPage:n.default,AuthorFollowButton:s.default,CommentForm:i.default,Comments:a.default,LikeButton:l.default,LikeInformation:u.default,ReadingNotesAnnotator:d.default,ReadingNotesHeader:c.default,ReadingNotesShelvingModal:p.default,ReadingNotesShelvingModalTrigger:f.default,UserFollowWidget:h.default,UserIcon:_.default,WantToReadButton:m.default,WantToReadWithStars:g.default},r.ReadingNotesStores={AnnotatedBooksStore:v.default,AuthorFollowStore:y.default,CommentsStore:b.default,LikeStore:k.default,ShelvingsStore:S.default,UserFollowStore:P.default,UserShelvesStore:T.default,UserAgentCapabilitiesStore:e.default}},{"../react_components/author/author_follow_button":72,"../react_components/comment/comment_form":85,"../react_components/comment/comments":86,"../react_components/like/like_button":132,"../react_components/like/like_information":134,"../react_components/reading_notes/annotated_books_landing_page":160,"../react_components/reading_notes/reading_notes_annotator":163,"../react_components/reading_notes/reading_notes_header":164,"../react_components/reading_notes/reading_notes_shelving_modal":165,"../react_components/reading_notes/reading_notes_shelving_modal_trigger":166,"../react_components/user/user_follow_widget":200,"../react_components/user/user_icon":201,"../react_components/want_to_read/want_to_read_button":217,"../react_components/want_to_read/want_to_read_with_stars":221,"../react_stores/author_follow_store":240,"../react_stores/comments_store":243,"../react_stores/like_store":250,"../react_stores/reading_notes/annotated_books_store":253,"../react_stores/shelvings_store":256,"../react_stores/user/user_follow_store":259,"../react_stores/user_agent_capabilities_store":260,"../react_stores/user_shelves_store":263}],230:[function(e,t,r){"use strict";var o,n=e("array.prototype.find");((o=n)&&o.__esModule?o:{default:o}).default.shim()},{"array.prototype.find":"array.prototype.find"}],231:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.HeaderComponents=r.HeaderStores=void 0;var n=o(e("../react_stores/current_user_store")),s=o(e("../react_stores/favorite_genres_store")),i=o(e("../react_stores/notifications_store")),a=o(e("../react_stores/shelvings_store")),l=o(e("../react_stores/tabs_store")),u=o(e("../react_components/flash_message")),d=o(e("../react_components/featured_content_module")),c=o(e("../react_components/page_skin")),p=o(e("../react_components/ads/google_banner_ad")),f=o(e("../react_components/ads/native_ads/native_ad")),h=o(e("../react_components/ads/google_page_skin")),_=o(e("../react_components/ads/google_featured_content_module")),m=o(e("../react_components/scroll_tracker")),g=o(e("../react_components/header/header_store_connector")),v=o(e("../react_components/site_announcement/site_announcement")),y=o(e("../react_components/site_announcement/choice_site_announcement")),b=o(e("../react_components/site_announcement/welcome_announcement")),k=o(e("../react_components/group/preview_broadcast")),S=o(e("../react_components/jobs_list")),P=o(e("../react_components/shared/shareable_link_button")),T=o(e("../react_components/librarian_quiz/quiz")),w=o(e("../react_components/home_page/editorial_blog_thumbnail")),N=o(e("../react_components/share_dialog")),e=o(e("../react_stores/share_dialog_store"));r.HeaderStores={CurrentUserStore:n.default,FavoriteGenresStore:s.default,NotificationsStore:i.default,ShareDialogStore:e.default,ShelvingsStore:a.default,TabsStore:l.default},r.HeaderComponents={FlashMessage:u.default,HeaderStoreConnector:g.default,PageSkin:c.default,FeaturedContentModule:d.default,GoogleBannerAd:p.default,GooglePageSkin:h.default,GoogleFeaturedContentModule:_.default,ScrollTracker:m.default,SiteAnnouncement:v.default,ChoiceSiteAnnouncement:y.default,WelcomeAnnouncement:b.default,ShareDialog:N.default,PreviewBroadcast:k.default,NativeAd:f.default,JobsList:S.default,ShareableLinkButton:P.default,LibrarianQuiz:T.default,EditorialBlogThumbnail:w.default}},{"../react_components/ads/google_banner_ad":58,"../react_components/ads/google_featured_content_module":59,"../react_components/ads/google_page_skin":60,"../react_components/ads/native_ads/native_ad":62,"../react_components/featured_content_module":104,"../react_components/flash_message":106,"../react_components/group/preview_broadcast":109,"../react_components/header/header_store_connector":118,"../react_components/home_page/editorial_blog_thumbnail":129,"../react_components/jobs_list":130,"../react_components/librarian_quiz/quiz":131,"../react_components/page_skin":147,"../react_components/scroll_tracker":168,"../react_components/share_dialog":176,"../react_components/shared/shareable_link_button":181,"../react_components/site_announcement/choice_site_announcement":190,"../react_components/site_announcement/site_announcement":192,"../react_components/site_announcement/welcome_announcement":193,"../react_stores/current_user_store":244,"../react_stores/favorite_genres_store":247,"../react_stores/notifications_store":252,"../react_stores/share_dialog_store":254,"../react_stores/shelvings_store":256,"../react_stores/tabs_store":257}],232:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=o(e("react")),s=o(e("lodash")),i=o(e("classnames"));r.default={propTypes:{bemModifiers:n.default.PropTypes.oneOfType([n.default.PropTypes.string,n.default.PropTypes.arrayOf(n.default.PropTypes.string)])},withBemModifiers:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];return(e=null===e?this.props.bemModifiers:e)?s.default.isString(e)?t+" "+t+"--"+e:s.default.isArray(e)?(0,i.default)(t,s.default.map(e,function(e){return t+"--"+e})):void 0:t},withBemElement:function(t,r){return this.props.bemModifiers?s.default.isString(this.props.bemModifiers)?t+"--"+this.props.bemModifiers+"__"+r:s.default.isArray(this.props.bemModifiers)?(0,i.default)(s.default.map(this.props.bemModifiers,function(e){return t+"--"+e+"__"+r})):void 0:t+"__"+r}}},{classnames:"classnames",lodash:"lodash",react:"react"}],233:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=o(e("react")),s=o(e("lodash"));r.default={propTypes:{deployServices:n.default.PropTypes.arrayOf(n.default.PropTypes.string)},isFeatureEnabled:function(e){return 0<=s.default.indexOf(this.deployServices(),e)},deployServices:function(){if(void 0===this.props.deployServices)throw"trying to access Deploy Services from component, but component does not contain deployServices prop ("+this.constructor.displayName+")";return this.props.deployServices}}},{lodash:"lodash",react:"react"}],234:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return{getInitialState:function(){return this.store=e(),this.store.getInitialState()},componentWillMount:function(){this.actions=this.store.actions,this.unsubscribe=this.store.listen(this.onStoreChange)},componentWillUnmount:function(){this.unsubscribe()},onStoreChange:function(e){this.setState(e)}}}},{}],235:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.connectToLazyStore=function(r,o){var e=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],t=e.stateKey,n=void 0===t?null:t,s=void 0===(e=e.filterValue)?null:e;return{getInitialState:function(){var e=r.getInitialState(a.default.get(this.props,o));return s&&(e=e[s]),e=!a.default.isNull(n)?i({},n,e):e},componentDidMount:function(){var t=this;l.default.utils.extend(this,l.default.ListenerMethods),this.listenTo(r,function(e){e=e[a.default.get(t.props,o)];s&&(e=e[s]),a.default.isNull(n)||(e=i({},n,e)),t.setState(e)})},componentWillUnmount:l.default.ListenerMixin.componentWillUnmount}};var a=o(e("lodash")),l=o(e("reflux"))},{lodash:"lodash",reflux:"reflux"}],236:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o,n=e("lodash"),s=(o=n)&&o.__esModule?o:{default:o};r.default={onEnterIntent:function(e,t){t=t||250;try{clearTimeout(this.leaveTimeout)}catch(e){}this.hoverTimeout=s.default.delay(e,t)},onLeaveIntent:function(e,t){t=t||250;try{clearTimeout(this.hoverTimeout)}catch(e){}this.leaveTimeout=s.default.delay(e,t)}}},{lodash:"lodash"}],237:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o,n=e("react-dom"),s=(o=n)&&o.__esModule?o:{default:o},i=e("lodash"),a=e("../modules/data_tracking/data_tracking_helper");r.default={componentDidMount:function(){var r,o=this.props.trackingOptions;!o||(r=s.default.findDOMNode(this))&&((0,i.each)((0,i.keys)(o),function(e){var t=o[e];(0,i.isUndefined)(t)||r.setAttribute("data-tracking-"+e,JSON.stringify(t))}),!0===o.enableTracking&&r.addEventListener("click",a.handleDataTracking))}}},{"../modules/data_tracking/data_tracking_helper":10,lodash:"lodash","react-dom":"react-dom"}],238:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=e("../../react_actions/buy_buttons/get_a_copy_actions");r.default=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments[1];switch(t.type){case o.GET_A_COPY_ACTIONS.LOADED_SUCCESS:return Object.assign({},e,{activeGetACopyInterstitial:t.data});case o.GET_A_COPY_ACTIONS.INTERSTITIAL_CLOSED:return Object.assign({},e,{activeGetACopyInterstitial:null});default:return e}}},{"../../react_actions/buy_buttons/get_a_copy_actions":27}],239:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=e("../../react_actions/header/search_actions");r.default=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments[1];return t.type!==o.TOGGLE_SEARCH?e:Object.assign({},e,{searchIsActive:t.searchIsActive})}},{"../../react_actions/header/search_actions":36}],240:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});function n(e,t){return h()[e].set(t)}function s(e,t){return h()[e][t]}function i(e){var t=s(e,"followingCount"),r=s(e,"isFollowing");n(e,{isFollowing:!r,followingCount:r?t-1:t+1})}function a(e){var t=s(e,"buttonEnabled");n(e,{buttonEnabled:!t})}var l=o(e("reflux")),u=o(e("freezer-js")),d=o(e("lodash")),c=o(e("../react_actions/author_follow_actions")),p=e("./shared/newsfeed_updates_mixin"),e=o(p),f=new u.default({}),h=function(){return f.get()},p=l.default.createStore({listenables:c.default,mixins:[(0,e.default)(p.NEWSFEED_DEPENDENT_STORE_KEYS.AUTHOR_FOLLOWS)],getInitialState:h,getState:h,initializeWith:function(e){e=d.default.transform(e,function(e,t,r){e[r]={isFollowing:t.isFollowing||!1,followingCount:t.followingCount||0,authorFollowingId:t.authorFollowingId||null,source:t.source||!1,buttonEnabled:!0}});h().set(e)},updateWith:function(e){this.initializeWith(e)},reset:function(){h().reset({})},onFollow:function(t){var r=this,e=s(t,"source"),o="AnnotatedBooksPage"===e,e="ReadingNotesListPage"===e;a(t),this.trigger(this.getState()),$j.post("/author_followings",{format:"json",id:t,from_annotated_books_page:o,from_reading_notes_list_page:e}).done(function(e){e={authorFollowingId:parseInt(d.default.words(e.url,/[0-9]+/)[0],10)};n(t,e),i(t),a(t),r.trigger(r.getState())}).fail(function(e){e&&403===e.status&&e.responseJSON&&(location.href=e.responseJSON.redirect)})},onUnFollow:function(e){var t=this;a(e),this.trigger(this.getState()),$j.ajax({type:"DELETE",url:"/author_followings/"+s(e,"authorFollowingId"),data:{format:"json"}}).done(function(){n(e,{authorFollowingId:null}),i(e),a(e),t.trigger(t.getState())})}});r.default=p},{"../react_actions/author_follow_actions":25,"./shared/newsfeed_updates_mixin":255,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],241:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=o(e("lodash")),s=o(e("reflux")),i=o(e("freezer-js")),a=o(e("../react_actions/book_search_actions_factory"));r.default=function(){var r=new i.default({showLoadingSpinner:!1,showResultsContainer:!1,results:[],query:"",activeResult:null}),o=(0,a.default)();return s.default.createStore({listenables:o,getInitialState:r.get,getState:r.get,actions:o,initializeWith:function(e){r.get().set("showLoadingSpinner",e.showLoadingSpinner).set("showResultsContainer",e.showResultsContainer).set("query",e.query).set("activeResult",e.activeResult).results.reset(e.results)},reset:function(){r.get().reset({})},setValue:function(e,t){r.get().set(e,t)},onSelectSpecificResult:function(t){var e=n.default.find(this.getState().results,function(e){return e.bookId===t});this.setValue("activeResult",e),this.trigger(this.getState())},onSetShowResultsContainer:function(e){this.setValue("showResultsContainer",e),this.setValue("activeResult",null),this.trigger(this.getState())},onSelectNextResult:function(e){var t=this.getState().results,r=n.default.indexOf(t,this.getState().activeResult);this.setValue("activeResult",t[(r+1)%e]),this.trigger(this.getState())},onSelectPreviousResult:function(e){var t=this.getState().results,r=this.getState().activeResult,o=n.default.indexOf(t,r);0===o||null===r?this.setValue("activeResult",t[e-1]):this.setValue("activeResult",t[(o-1)%e]),this.trigger(this.getState())},onSearchResultsFound:function(e,t){t=t,r.get().results.reset(t),this.setValue("query",e),this.setValue("showLoadingSpinner",!1),this.setValue("activeResult",null),this.setValue("showResultsContainer",!0),this.trigger(this.getState())},onSearch:function(t,e){this.setValue("showLoadingSpinner",!0),this.trigger(this.getState()),$j.ajax({url:e,data:{format:"json",q:t},success:function(e){o.searchResultsFound(t,e)}})}})}},{"../react_actions/book_search_actions_factory":26,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],242:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("redux"),s=o(e("redux-logger")),i=o(e("../../modules/env_utils")),a=o(e("redux-thunk")),e=o(e("../../react_reducers/buy_buttons/get_a_copy_reducer")),a=[a.default];i.default.isDevelopment()&&i.default.hasDom()&&a.push((0,s.default)());a=(0,n.createStore)(e.default,{},n.applyMiddleware.apply(void 0,a));r.default=a},{"../../modules/env_utils":13,"../../react_reducers/buy_buttons/get_a_copy_reducer":238,redux:"redux","redux-logger":"redux-logger","redux-thunk":"redux-thunk"}],243:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});function n(e){_().reset(l.default.merge({},f,e))}function a(e){return l.default.has(_(),e)||_().set(e,{numComments:0,unsavedComment:"",comments:[],saveInProgress:!1,showCommentButton:!1,textareaRows:1,showPagination:!1,currentPage:1,showSeeMoreLoadingSpinner:!1}),_()[e]}function s(e,t){a(e).set(t)}var l=o(e("lodash")),i=o(e("reflux")),u=o(e("freezer-js")),d=o(e("../modules/gr_error_reporting")),c=o(e("../react_actions/comment_actions")),p=e("./shared/newsfeed_updates_mixin"),e=o(p),f={},h=new u.default(f),_=function(){return h.get()};r.default=i.default.createStore({listenables:c.default,mixins:[(0,e.default)(p.NEWSFEED_DEPENDENT_STORE_KEYS.COMMENTS)],initializeWith:function(e){n(e)},updateWith:function(e){e=l.default.transform(e,function(e,t,r){e[r]={numComments:t.numComments||0,unsavedComment:t.unsavedComment||"",comments:t.comments||[],showCommentButton:!1,saveInProgress:!1,textareaRows:1,deletableByCurrentUser:t.deletableByCurrentUser,blockedByCurrentUser:t.blockedByCurrentUser||!1}});_().set(e)},onTextareaFocusRequested:function(e){s(e,{textareaFocusRequested:!0}),this.notifyListeners()},onTextareaFocused:function(e){s(e,{textareaRows:2,textareaFocusRequested:!1,showCommentButton:!0}),this.notifyListeners()},onTextareaUnfocused:function(e){var t=a(e).unsavedComment;l.default.isEmpty(l.default.trim(t))&&s(e,{textareaRows:1}),this.notifyListeners()},onShowSeeMoreLoadingSpinner:function(e){s(e,{showSeeMoreLoadingSpinner:!0}),this.notifyListeners()},onDeleteComment:function(e,t,r){var o=this,n=a(e),s=n.numComments-1,i=l.default.findIndex(n.comments,function(e){return e.uri===t});0<=i&&(n.set("numComments",s),n.comments.splice(i,1),n.showPagination||this.notifyListeners(),$j.post("/comment/destroy?comment_uri="+t).done(function(){n.showPagination&&(0===a(e).comments.length&&1<n.currentPage?(r.page=n.currentPage-1,c.default.showCommentsForPage(r)):n.currentPage<Math.ceil(s/10)?(r.page=n.currentPage,c.default.showCommentsForPage(r)):o.notifyListeners())}))},onAddNewComment:function(o){var n=this,e={body:a(o.subjectKey).unsavedComment,authorUser:o.authorUser,updatedAtMessage:"Just now"};s(o.subjectKey,{saveInProgress:!0}),this.notifyListeners(),$j.post("/comment.json",{type:o.subject.type,id:o.subject.id,resource_uri:o.subject.uri,comment:{body_usertext:e.body},digest_default:!0,respect_update_feed_preference:!0,react_framework:!0}).done(function(e){var t=a(o.subjectKey),r=t.numComments+1;t.set({unsavedComment:"",saveInProgress:!1,numComments:r,showCommentButton:!1}),t.comments.length<10?(e=e,t.comments.push({createdAt:new Date,body:e.body,deletableByCurrentUser:e.deletableByCurrentUser,blockedByCurrentUser:e.blockedByCurrentUser,authorUser:o.authorUser,updatedAtMessage:"Just now",uri:e.uri,flagForAbuseUrl:e.flagForAbuseUrl})):(o.page=Math.ceil(r/10),c.default.showCommentsForPage(o)),n.onTextareaUnfocused(o.subjectKey)}).fail(function(e){var t=null;422===e.status?t="Sorry, your comment cannot be posted because it is too long (must be under 12000 characters). Please try again.":404===e.status?t="Sorry, this post has been deleted.":(t="Sorry, your comment cannot be posted. ",e.responseJSON&&e.responseJSON.errors&&(t+=e.responseJSON.errors.join(", "))),t&&d.default.notifyUser(t),s(o.subjectKey,{saveInProgress:!1,showCommentButton:!1}),c.default.textareaUnfocused(o.subjectKey)})},onShowCommentsForPage:function(t){var r=this,o=0<t.page?t.page:1;$j.get("/comment/index.json",{type:t.subject.type,id:t.subject.id,resource_uri:t.subject.uri,page:o,per_page:10,reverse:!0,react_framework:!0}).done(function(e){s(t.subjectKey,{comments:e.comments,showPagination:!0,currentPage:o,showSeeMoreLoadingSpinner:!1}),r.notifyListeners()})},onCommentEntered:function(e,t){s(e,{unsavedComment:t}),this.notifyListeners()},getState:_,getInitialState:function(e){return l.default.isUndefined(e)?_():a(e)},getInitialStateForKey:a,reset:function(){n({})},notifyListeners:function(){this.trigger(_())}})},{"../modules/gr_error_reporting":15,"../react_actions/comment_actions":28,"./shared/newsfeed_updates_mixin":255,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],244:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});function n(){return d.get()}function s(e){n().reset(i.default.merge({},u,e))}var i=o(e("lodash")),a=o(e("reflux")),l=o(e("freezer-js")),e=o(e("../react_actions/current_user_actions")),u={currentUser:{}},d=new l.default(u);r.default=a.default.createStore({listenables:[e.default],initializeWith:function(e){i.default.each(i.default.keys(e),function(e){if(!i.default.has(u,e))throw new Error("Unexpected key passed to initializeWith. Received "+e+" Expected one of "+i.default.keys(u))}),s(e)},getState:n,getInitialState:n,onUpdatePreference:function(e,t){var r;$j.post("/user/update_preferences",{user:(r=t,(t=e)in(e={})?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e)})},reset:function(){s({})}})},{"../react_actions/current_user_actions":29,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],245:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var s=o(e("lodash")),i=o(e("reflux")),a=o(e("freezer-js")),l=e("../../../modules/ajax/ajax_helper"),u=o(e("../../../react_actions/experimental/universal_search_actions_factory"));r.default=function(){var n=new a.default({showLoadingSpinner:!1,showResultsContainer:!1,results:[],query:"",activeResult:null,currentInput:null}),o=(0,u.default)();return i.default.createStore({listenables:o,getInitialState:n.get,getState:n.get,actions:o,initializeWith:function(e){n.get().set({showLoadingSpinner:e.showLoadingSpinner,showResultsContainer:e.showResultsContainer,query:e.query,activeResult:e.activeResult}).results.reset(e.results)},reset:function(){n.get().reset({})},hide:function(){n.get().set({showLoadingSpinner:!1,activeResult:null,showResultsContaine:!1}),this.trigger(n.get())},search:function(t,e,r){t==n.get().currentInput?(n.get().set("showLoadingSpinner",!0),this.trigger(n.get()),(0,l.httpGet)(e,{data:{format:"json",query:t,limit:r},success:function(e){o.searchResultsFound(t,e)}})):this.hide()},delayedSearch:s.default.debounce(function(e,t,r,o){e.search(t,r,o)},300),onSelectSpecificResult:function(e){n.get().set("activeResult",e),this.trigger(n.get())},onSetShowResultsContainer:function(e){n.get().set("showResultsContainer",e),this.trigger(n.get())},onSelectNextResult:function(e){var t=n.get().results,r=s.default.indexOf(t,n.get().activeResult);n.get().set("activeResult",t[(r+1)%e]),this.trigger(n.get())},onSelectPreviousResult:function(e){var t=n.get().results,r=n.get().activeResult,o=s.default.indexOf(t,r);0===o||null===r?n.get().set("activeResult",t[e-1]):n.get().set("activeResult",t[(o-1)%e]),this.trigger(n.get())},onSearchResultsFound:function(e,t){e==n.get().currentInput&&(t=t,n.get().results.reset(t),n.get().set({query:e,showLoadingSpinner:!1,activeResult:null,showResultsContainer:!0}),this.trigger(n.get()))},onSearch:function(e,t,r){e=e.trim(),n.get().set("currentInput",e),s.default.isEmpty(e)?this.hide():this.delayedSearch(this,e,t,r)}})}},{"../../../modules/ajax/ajax_helper":4,"../../../react_actions/experimental/universal_search_actions_factory":31,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],246:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});function n(){return d.get()}function s(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];n().selectedGenres.reset(e)}var i=o(e("lodash")),a=o(e("reflux")),l=o(e("freezer-js")),u=o(e("../react_actions/favorite_genres_actions")),e=o(e("../react_actions/favorite_genres_form_actions")),d=new l.default({selectedGenres:[]}),e=a.default.createStore({listenables:e.default,getInitialState:n,getState:n,initializeWith:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];s(t)},onSubmitSelectedGenres:function(){u.default.changeFavoriteGenres(n().selectedGenres)},onSelectFavoriteGenre:function(e){i.default.includes(n().selectedGenres,e)||(n().selectedGenres.push(e),this.notifyListeners())},onDeselectFavoriteGenre:function(e){n().selectedGenres.shift(e),this.notifyListeners()},notifyListeners:function(){this.trigger(n())},reset:function(){s()}});r.default=e},{"../react_actions/favorite_genres_actions":32,"../react_actions/favorite_genres_form_actions":33,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],247:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});function n(){return d.get()}function s(e){n().reset(i.default.merge({},u,e))}var i=o(e("lodash")),a=o(e("reflux")),l=o(e("freezer-js")),e=o(e("../react_actions/favorite_genres_actions")),u={allGenres:[],favoriteGenres:[]},d=new l.default(u);r.default=a.default.createStore({listenables:[e.default],initializeWith:function(e){i.default.each(i.default.keys(e),function(e){if(!i.default.has(u,e))throw new Error("Unexpected key passed to initializeWith. Received "+e+". Expected one of "+i.default.keys(u))}),s(e)},updateWith:function(e){n().set(e)},getState:n,getInitialState:n,reset:function(){s()},notifyListeners:function(){this.trigger(n())},onChangeFavoriteGenres:function(e){var r,t=this;$j.post("/user/edit_fav_genres",i.default.merge((r=e,i.default.inject(n().allGenres,function(e,t){t=t.name;return e.favorites[t]=i.default.includes(r,t),e},{favorites:{}})),{format:"json"}),function(){n().favoriteGenres.reset(e),t.notifyListeners()})}})},{"../react_actions/favorite_genres_actions":32,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],248:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});function n(){return c.get()}var s=o(e("lodash")),i=o(e("reflux")),a=o(e("freezer-js")),l=o(e("../react_actions/featured_genres_actions")),u=o(e("../react_actions/shelvings_actions")),d=o(e("../react_stores/favorite_genres_store")),c=new a.default({}),i=i.default.createStore({listenables:l.default,init:function(){d.default.listen(function(){l.default.requestFeaturedBooks()})},initializeWith:function(e){c.get().reset({featuredGenreBookInfo:e})},getInitialState:n,getState:n,onRequestFeaturedBooks:function(){var t=this;return s.default.isEmpty(d.default.getState().favoriteGenres)?void this.saveNewFeaturedBooks([]):void(n().requestedFeaturedBooksBefore||($j.get("/genres/featured_books").done(function(e){t.saveNewFeaturedBooks(e.genres),u.default.addShelvings(e.shelvings)}).fail(function(e){l.default.displayError(e)}),n().set("requestedFeaturedBooksBefore",!0)))},onTrackMenuImpression:function(){$j.get("/dfp/browse_menu_impression")},saveNewFeaturedBooks:function(e){n().set("featuredGenreBookInfo",e),this.notifyListeners()},onDisplayError:function(){n().set("errorMessage","Error loading featured books in genre."),this.notifyListeners()},notifyListeners:function(){this.trigger(n())},reset:function(){n().reset({})}});r.default=i},{"../react_actions/featured_genres_actions":34,"../react_actions/shelvings_actions":44,"../react_stores/favorite_genres_store":247,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],249:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.CSA_ELEMENT_TYPE=r.ImpressionCode=void 0;function u(){return b.get()}function s(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];u().reset(p.default.merge({},y,e))}function d(e){if(p.default.has(u().ads,e))return u().ads[e];if(!p.default.has(u().nativeAds,e))throw new ReferenceError("No such product existing for key "+e);return u().nativeAds[e]}function i(e){return e.path.split("/",3)[2]}function l(e,t,r){r=p.default.merge(T(t),r),$j.ajax({url:e,type:"GET",data:r})}function c(e){var t,r,o,n=e.slotId,s=e.impressionCode,e=e.impressionElement;n&&(t=d(n))&&!t.impressionLogged&&(l(t.pmetImpressionTrackUrl,t,{impression_output:s}),r=(e={currentSlotIdState:t,impressionElement:e}).currentSlotIdState,(o=e.impressionElement)&&r&&window.csa&&function(){var t=w(r);Object.values(S).forEach(function(e){t[e]&&o.setAttribute("data-csa-c-"+e,t[e])}),window.csa("Content",{element:o})}(),P(n,{impressionLogged:!0}))}var p=o(e("lodash")),a=o(e("reflux")),f=o(e("freezer-js")),h=o(e("../react_actions/data_tracking/data_tracking_actions")),_=o(e("../react_actions/google_ads_actions")),m=o(e("../react_actions/newsfeed_actions")),g=e("../modules/ads/google_ad_helper"),v=o(e("../modules/env_utils")),y={targeting:{},ads:{},nativeAds:{},device_type:null},b=new f.default(y),k=r.ImpressionCode={success:"0",dfpError:"1",monolithError:"2",empty:"3"},S={adUnit:"ad",lineItemId:"l_id",campaignId:"c_id",type:"type",requestId:"r_id",sessionId:"s_id"},P=(r.CSA_ELEMENT_TYPE="DFP",function(e,t){d(e).set(t)}),T=function(e){return{ad_unit:i(e),line_item_id:e.lineItemId,campaign_id:e.campaignId,ad_device_type:e.adDeviceType}},w=function(e){var t=window&&window.ue||{},r=t.id,o=t.sid,t={};return n(t,S.adUnit,i(e)),n(t,S.lineItemId,e.lineItemId),n(t,S.campaignId,e.campaignId),n(t,S.type,"DFP"),n(t,S.requestId,r),n(t,S.sessionId,o),t};r.default=a.default.createStore({listenables:[_.default,{trackClickEvent:h.default.trackClickEvent}],initializeWith:function(e){(0,g.lazyLoadInit)(),e=p.default.merge({},{callbacksAttached:[]},e),s(e);var r,o=[],n=[];v.default.hasDom()&&!(0,g.adSlotsDefined)()&&(e=p.default.merge({},this.getState().ads,this.getState().nativeAds),p.default.map(e,function(e,t){e.isLazyLoaded||((0,g.defineSlot)(t,e.path,e.dimensions,e.adSizeMapping),o.push((0,g.slotToHash)(e,t)),r=(0,g.getA9Sizes)(e.dimensions),p.default.isEmpty(r)||n.push((0,g.slotToHash)(e,t,r)))}),(0,g.enableServices)(),(0,g.fetchApstagBids)(o,p.default.compact(n)))},resetTo:function(e){s(e)},updateWith:function(e){u().set(p.default.merge({},u(),e))},onTrackClickEvent:function(e,t){var r,o=e.target,n=void 0,s=void 0,i=/news/,a=JSON.parse(t.getAttribute("data-tracking-adId"));if(a=a||p.default.findKey(u().nativeAds,function(e){return e.path.match(i)}))for(;o!==t;)o.getAttribute("data-tracking-dfp")&&!n&&(n=o.getAttribute("data-tracking-dfp"),JSON.parse(n)&&this.trackDfpClick(a)),o.getAttribute("data-tracking-pmet")&&!s&&(s=o.getAttribute("data-tracking-pmet"),r=JSON.parse(s),this.trackPmetClick(a,r)),o=o.parentNode},mergeWith:function(e){u().set(p.default.merge({},u(),e))},onHasAttachedDfpCallbackForSlot:function(e){this.getState().set("callbacksAttached",[].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(this.getState().callbacksAttached),[e]))},onCheckCallbacksAttached:function(e,t,o){p.default.reduce(["ads","nativeAds"],function(e,t){t=p.default.reduce(p.default.keys(u()[t]),function(e,t){var r=!p.default.includes(o,t)||(d(t).isLazyLoaded||p.default.includes(u().callbacksAttached,t));return e&&r},!0);return e&&t},!0)?e(!0):setTimeout(function(){return e(!1)},500)},onRequestCreativeForSlot:function(e,t){window.googletag&&window.googletag.cmd&&window.googletag.cmd.push(function(){(0,g.requestCreative)(e,t)})},onRemoveAdSlot:function(e){P(e,{empty:!0}),this.notifyListeners()},onTrackImpression:function(e){var t=e.slotId,r=e.impressionCode,e=e.impressionElement;c({slotId:t,impressionCode:r,impressionElement:e})},onAttachServedBannerAdAttributesAndTracking:function(e){var t=e.slotId,r=e.campaignId,o=e.lineItemId,n=e.creative,s=e.impressionCode,i=e.delayImpressionTracking,e=e.impressionElement;P(t,{campaignId:r,lineItemId:o,creative:n,impressionCode:s}),this.notifyListeners();var a=d(t);return n?(i||c({slotId:t,impressionCode:s,impressionElement:e}),void a.creative.on("click","a",function(){l(a.pmetClickTrackUrl,a,{click_type:"click"})})):void c({slotId:t,impressionCode:k.dfpError})},onAttachServedNativeAdAttributesAndTracking:function(e){var t=e.slotId,r=e.campaignId,o=e.lineItemId,n=e.creative,s=e.sponsoredId,i=e.impressionCode,a=e.dfpUrl,l=e.adUnit,u=e.impressionElement;P(t,{campaignId:r,lineItemId:o,url:a});e=d(t),r=function(e){switch(e){case"NewsfeedAd":return"/dfp/ajax_native_ad";case"PageSkin":return"/dfp/ajax_premium_campaign_page_skin";case"FeaturedContent":return"/dfp/ajax_premium_campaign_featured_content"}}(e.resourceType);return n?void("NewsfeedAd"===e.resourceType?this.ajaxNewsfeedAd(t,o,s,i,a,l,r,u):this.ajaxPremiumCampaign(t,o,s,i,a,l,r,u)):void c({slotId:t,impressionCode:k.dfpError})},ajaxNewsfeedAd:function(t,e,r,o,n,s,i,a){var l=this;$j.ajax({type:"GET",url:i,data:{format:"json",id:r,line_item_id:e,ad_unit:s,ad_device_type:"desktop",react:!0}}).done(function(e){e.ok?(P(t,e),m.default.updateNativeAdSlot(d(t).id,d(t)),l.notifyListeners(),c({slotId:t,impressionCode:o,impressionElement:a})):c({slotId:t,impressionCode:k.monolithError})})},ajaxPremiumCampaign:function(t,e,r,o,n,s,i,a){var l=this;$j.ajax({type:"GET",url:i,data:{format:"json",id:r,line_item_id:e,ad_unit:s,ad_device_type:"desktop"}}).done(function(e){e.ok?(P(t,e),l.notifyListeners(u()),c({slotId:t,impressionCode:o,impressionElement:a})):c({slotId:t,impressionCode:k.monolithError})})},trackDfpClick:function(e){var t=d(e),r=t.url,e=p.default.merge(T(t),{click_type:"click"}),e=encodeURIComponent("?"+$j.param(e));$j.ajax({type:"GET",url:r+t.pmetClickTrackUrl+e})},trackPmetClick:function(e,t){e=d(e),t=p.default.merge(T(e),t);$j.ajax({type:"GET",url:e.pmetClickTrackUrl,data:t})},notifyListeners:function(){this.trigger(u())},getInitialState:function(e){return p.default.isUndefined(e)?u():d(e)},getInitialStateForKey:d,getState:u,reset:s})},{"../modules/ads/google_ad_helper":3,"../modules/env_utils":13,"../react_actions/data_tracking/data_tracking_actions":30,"../react_actions/google_ads_actions":35,"../react_actions/newsfeed_actions":39,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],250:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});function s(){return g.get()}function n(e){return u.default.has(s(),e)||s().set(e,{likeCount:0,isLiked:!1,showLoadingSpinner:!1}),s()[e]}function i(e,t,r){s()[e].set(t,r)}function a(e,t){return s()[e][t]}function l(e){var t=a(e,"likeCount"),r=a(e,"isLiked");i(e,"isLiked",!r),i(e,"likeCount",a(e,"isLiked")?t+1:t-1)}var u=o(e("lodash")),d=o(e("reflux")),c=o(e("freezer-js")),p=o(e("../react_actions/like_actions")),f=e("./shared/newsfeed_updates_mixin"),h=o(f),_=o(e("../modules/gr_error_reporting")),m=e("../modules/ajax/ajax_helper"),g=new c.default({}),f=d.default.createStore({listenables:p.default,mixins:[(0,h.default)(f.NEWSFEED_DEPENDENT_STORE_KEYS.LIKES)],getState:s,getInitialState:function(e){return u.default.isUndefined(e)?s():n(e)},getInitialStateForKey:n,reset:function(){g.get().reset({})},initializeWith:function(r){u.default.each(u.default.keys(r),function(e){var t=r[e];t.likedBy=t.likedBy||!1,t.likeCount=t.likeCount||0,t.showLoadingSpinner=!1,s().set(e,t)})},updateWith:function(e){this.initializeWith(e)},triggerLoadingSpinner:function(e){var t=a(e,"showLoadingSpinner");i(e,"showLoadingSpinner",!t)},onLike:function(t){var r=this;this.triggerLoadingSpinner(t),this.trigger(this.getState()),(0,m.httpPost)("/rating",{format:"json",data:{rating:{resource_type:a(t,"resourceType"),resource_id:a(t,"resourceId"),resource_uri:a(t,"resourceUri"),rating:1}}}).done(function(e){l(t),i(t,"ratingId",e.rating_id),r.trigger(s())}).fail(function(e){e=e.responseText;e&&_.default.notifyUser(e)}).always(function(){r.triggerLoadingSpinner(t),r.trigger(s())})},onUnLike:function(e){var t=this;this.triggerLoadingSpinner(e),this.trigger(this.getState());var r=a(e,"ratingId"),o="",n={},n=r?(o="/rating/"+r,{format:"json"}):(o="/rating/",{format:"json",resource_uri:a(e,"resourceUri")});(0,m.httpDelete)(o,{data:n}).done(function(){l(e),t.trigger(s())}).fail(function(e){var t="Unable to unlike.";404==e.status?t+=" You may have already unliked.":e.responseText&&(t+=e.responseText),_.default.notifyUser(t+=" Please refresh the page and try again.")}).always(function(){t.triggerLoadingSpinner(e),t.trigger(s())})}});r.default=f},{"../modules/ajax/ajax_helper":4,"../modules/gr_error_reporting":15,"../react_actions/like_actions":37,"./shared/newsfeed_updates_mixin":255,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],251:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});function n(){return a.get()}var s=o(e("reflux")),i=o(e("freezer-js")),e=o(e("../react_actions/modal_actions")),a=new i.default({}),e=s.default.createStore({listenables:e.default,getInitialState:n,getState:n,initializeWith:function(e){a.get().reset(e)},onOpenModal:function(e){a.get().set("currentActiveModal",e),this.notifyListeners()},onCloseModal:function(){a.get().set("currentActiveModal",null),this.notifyListeners()},notifyListeners:function(){this.trigger(n())},reset:function(){a.get().reset({})}});r.default=e},{"../react_actions/modal_actions":38,"freezer-js":"freezer-js",reflux:"reflux"}],252:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});function n(){return l.get()}var s=o(e("reflux")),i=o(e("freezer-js")),a=o(e("../react_actions/notifications_actions")),l=new i.default({}),s=s.default.createStore({listenables:a.default,getInitialState:n,getState:n,initializeWith:function(e){l.get().reset(e)},updateWith:function(e){this.initializeWith(e)},onLoadNotifications:function(e){l.get().set("notifications",e),l.get().set("unreadCount",0),l.get().set("unreadCountMore",!1),this.notifyListeners()},onLoadError:function(){l.get().set("errorOccurred",!0),this.notifyListeners()},onRequestNotifications:function(){l.get().hasRequestedBefore||$j.ajax({url:"/notifications/",type:"GET",success:function(e){a.default.loadNotifications(e)},error:function(){a.default.loadError()}}),l.get().set("hasRequestedBefore",!0)},notifyListeners:function(){this.trigger(n())},reset:function(){l.get().reset({})}});r.default=s},{"../react_actions/notifications_actions":40,"freezer-js":"freezer-js",reflux:"reflux"}],253:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});function n(){return l.get()}var s=o(e("lodash")),i=o(e("reflux")),a=o(e("freezer-js")),e=o(e("../../react_actions/reading_notes/annotated_books_actions")),l=new a.default({annotatedBooksCollection:[],nextToken:null,showSpinner:!0,showError:!1}),e=i.default.createStore({listenables:[e.default],getInitialState:n,getState:n,updateWith:function(e,t){e=s.default.union(l.get().annotatedBooksCollection,e),e=s.default.uniq(e,function(e){return e.asin});n().set({annotatedBooksCollection:e,nextToken:t,showError:!1}),this.notifyListeners()},showSpinner:function(e){n().set("showSpinner",e),this.notifyListeners()},showError:function(){n().set("showError",!0),this.notifyListeners()},notifyListeners:function(){this.trigger(n())},reset:function(){n().reset({})},onLoadAnnotatedBooks:function(e){var t=this,r="/notes/"+e+"/load_more";this.showSpinner(!0);e={};return l.get().nextToken&&(e.start_token=l.get().nextToken),$j.get(r,e).done(function(e){t.updateWith(e.annotated_books_collection,e.next_token)}).fail(function(){t.showError()}).always(function(){t.showSpinner(!1)})}});r.default=e},{"../../react_actions/reading_notes/annotated_books_actions":41,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],254:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.WARNING_SHARING_TEXT_LENGTH=r.MAXIMUM_SHARING_TEXT_LENGTH=void 0;function n(){return c.get()}var s=o(e("reflux")),i=o(e("freezer-js")),a=o(e("../react_actions/share_dialog_actions")),l=e("../modules/ajax/ajax_helper"),u=e("../modules/string_helper"),d=e("lodash"),c=new i.default({});r.MAXIMUM_SHARING_TEXT_LENGTH=420;r.WARNING_SHARING_TEXT_LENGTH=100,r.default=s.default.createStore({listenables:[a.default],getState:n,getInitialState:n,initializeWith:function(e){n().reset(e)},onUpdateSharingTextInputValue:function(e){var t=420<(0,u.astralLength)(e),r=t;n().set({sharingTextInputValue:e,shareModalButtonDisabled:r,textTooLong:t}),this.trigger(n())},onSubmitShare:function(e,t){var r=this;n().set({shareModalButtonDisabled:!0,error:!1}),this.trigger(n());t={resource_id:e.resourceId,resource_type:e.resourceTypeFriendlyText,sharing_text:t};e.sharerUserId&&(t.sharer_user_id=e.sharerUserId),(0,l.httpPost)("/sharings",{format:"json",data:{sharing:t}}).done(function(e){n().set({shared:!0,sharingTextInputValue:"",sharingUrl:e.sharingUrl,sharingDisplayName:e.sharingDisplayName})}).fail(function(e){e=(0,d.get)(e,["responseJSON","message"]);n().set({error:!0,errorText:e})}).always(function(){n().set({shareModalButtonDisabled:!1}),r.trigger(n())})},onOpenShareModal:function(e){n().set({shared:!1,error:!1}),this.trigger(n()),(0,l.httpPost)("/track/track_click",{data:{feature:"OpenSharingModal_"+e}})},reset:function(){n().reset({})}})},{"../modules/ajax/ajax_helper":4,"../modules/string_helper":22,"../react_actions/share_dialog_actions":43,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],255:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.NEWSFEED_DEPENDENT_STORE_KEYS=void 0;var o,n=e("../../react_actions/newsfeed_actions"),s=(o=n)&&o.__esModule?o:{default:o},i=e("lodash");r.default=function(t){return{init:function(){(0,i.includes)((0,i.values)(a),t)&&this.listenTo(s.default.newsfeedItemsLoaded,this.onNewsfeedItemsLoaded)},onNewsfeedItemsLoaded:function(e){t&&e[t]&&(this.updateWith(e[t]),this.trigger(this.getState()))}}};var a=r.NEWSFEED_DEPENDENT_STORE_KEYS={COMMENTS:"comments",LIKES:"likes",SHELVINGS:"shelvings",AUTHOR_FOLLOWS:"authorFollows"}},{"../../react_actions/newsfeed_actions":39,lodash:"lodash"}],256:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});function d(){return w.get()}function c(e){return v.default.has(d(),e)||d().set(e,{exclusiveShelfName:null,nonExclusiveShelfNames:null,exclusiveShelfDisplayName:null,isShelvingInProgress:!1,targetExclusiveShelfName:null}),d()[e]}function u(r,o){c(r).set(o),v.default.each(d(),function(e,t){e.book&&e.book.bookId===r&&c(t).set(o)})}function a(e,t,r){u(e,{exclusiveShelfName:t.name,exclusiveShelfDisplayName:t.displayName}),void 0!==r&&u(e,{book:r.book,updatedAt:Date.parse(r.updatedAt)}),t.name===S.DEFAULT_SHELVES.CURRENTLY_READING.name&&l.default.refreshReadingSessions()}function p(e,t,r){u(e,{exclusiveShelfName:null,exclusiveShelfDisplayName:null,rating:0,nonExclusiveShelfNames:null}),r&&i.default.removeNonExclusiveShelf(t.name)}function f(e,t){m(e,arguments.length<=2||void 0===arguments[2]?null:arguments[2]),u(e,{rating:t})}function h(e,t){var r=arguments.length<=2||void 0===arguments[2]?null:arguments[2],o=c(e);(o=v.default.clone(o.nonExclusiveShelfNames)||[]).push(t.name),u(e,{nonExclusiveShelfNames:o}),m(e,r),i.default.addNonExclusiveShelf(t.name)}function _(e,t,r){var o=c(e),o=v.default.clone(o.nonExclusiveShelfNames),o=v.default.without(o,t.name);r&&i.default.removeNonExclusiveShelf(t.name),u(e,{nonExclusiveShelfNames:o})}function m(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];null===c(e).exclusiveShelfName&&a(e,S.DEFAULT_SHELVES.READ,t)}function g(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1],r=arguments.length<=2||void 0===arguments[2]?null:arguments[2],o=e;return t&&(o=v.default.merge({},e,{book_origin:t})),r&&(o=v.default.merge({},o,{progress_update_text:r})),o=v.default.merge({},o,{v:2}),(0,T.httpPost)("/shelf/add_to_shelf.json",{data:o})}var v=o(e("lodash")),n=o(e("reflux")),s=o(e("freezer-js")),y=o(e("../react_actions/shelvings_actions")),l=o(e("../react_actions/reading_session_actions")),i=o(e("../react_actions/user_shelves_actions")),b=e("./shared/newsfeed_updates_mixin"),k=o(b),S=e("../modules/default_shelves"),P=e("../modules/book_origins"),T=e("../modules/ajax/ajax_helper"),w=new s.default({});r.default=n.default.createStore({listenables:y.default,mixins:[(0,k.default)(b.NEWSFEED_DEPENDENT_STORE_KEYS.SHELVINGS)],getState:d,getInitialState:function(e){return v.default.isUndefined(e)?d():c(e)},initializeWith:function(e){w.get().reset(e),this.notifyListeners()},reset:function(){w.get().reset({})},notifyListeners:function(){this.trigger(d())},updateWith:function(e){e=v.default.transform(e,function(e,t,r){return e[r].isShelvingInProgress=!1,e[r].updatedAt=Date.parse(t.updatedAt),e},e);this.getState().set(e),this.notifyListeners()},onShelveBook:function(t,r){var e=this,o=arguments.length<=2||void 0===arguments[2]?null:arguments[2],n=arguments.length<=3||void 0===arguments[3]?null:arguments[3],s=c(t).exclusiveShelfName;u(t,{isShelvingInProgress:!0,targetExclusiveShelfName:r.name});var i={book_id:t,name:r.name};this.notifyListeners(),g(i,o,n).done(function(e){a(t,r,e),(e=e||{}).shelves={},e.shelves[(0,S.getExclusiveShelfType)(r.name)]=[r.name],y.default.bookShelved(e),s&&((e={})[(0,S.getExclusiveShelfType)(s)]=[s],y.default.bookUnshelved({shelves:e})),o===P.BOOK_ORIGINS.CURRENTLY_READING_WIDGET&&l.default.shelveBookSuccess()}).fail(function(){window.alert("There was an error adding the book to your shelf, please try again.")}).always(function(){u(t,{isShelvingInProgress:!1,targetExclusiveShelfName:null}),e.notifyListeners()})},onUnshelveBook:function(t){var e=this;u(t,{isShelvingInProgress:!0}),this.notifyListeners(),(0,T.httpPost)("/review/destroy",{data:{id:t}}).done(function(){var e={};e[(0,S.getExclusiveShelfType)(c(t).exclusiveShelfName)]=[c(t).exclusiveShelfName],e[S.SHELF_TYPES.NONEXCLUSIVE]=c(t).nonExclusiveShelfNames||[],y.default.bookUnshelved({shelves:e}),p(t)}).fail(function(){window.alert("There was an error removing the book from your shelves, please try again.")}).always(function(){u(t,{isShelvingInProgress:!1}),e.notifyListeners()})},onToggleNonExclusiveShelving:function(e,t,r,o){var n=this,s=c(e).exclusiveShelfName,i=c(e).nonExclusiveShelfNames,a=!v.default.includes(i,t.name),l=d()[e]&&null!==c(e).exclusiveShelfName,u={book:{bookId:e,title:o}};a?(m(e,u),h(e,t,u)):_(e,t,!1),this.notifyListeners();o={book_id:e,name:t.name,a:a?"":"remove"};g(o).done(function(){var e={};a?(e[S.SHELF_TYPES.DEFAULT]=s?[]:[S.DEFAULT_SHELVES.READ.name],e[S.SHELF_TYPES.NONEXCLUSIVE]=[t.name],y.default.bookShelved({shelves:e})):(e[S.SHELF_TYPES.NONEXCLUSIVE]=[t.name],y.default.bookUnshelved({shelves:e}))}).fail(function(){window.alert("There was an error adding the book to your shelf, please try again."),l?a?_(e,t,r):h(e,t,u):p(e,t,r),n.notifyListeners()})},onRateBook:function(e,t,r){var o=this,n=arguments.length<=3||void 0===arguments[3]?null:arguments[3],s=0,i=!1,a={book:{bookId:e,title:r}};d()[e]&&(s=c(e).rating,i=null!==c(e).exclusiveShelfName,0===s&&y.default.rateBook.newBook()),f(e,t,a),this.notifyListeners();var l="/review/rate",r={format:"json",id:e,rating:t,stars_click:!0};n&&(l+="?ref="+n.replace("str","st"+t)),(0,T.httpPost)(l,{data:r}).fail(function(){window.alert("There was an error saving your rating, please try again."),0<s?f(e,s,a):(i?u(e,{rating:0}):p(e,null,!1),y.default.rateBook.failed()),o.notifyListeners()})},onAddShelvings:function(e){this.updateWith(e),this.notifyListeners()}})},{"../modules/ajax/ajax_helper":4,"../modules/book_origins":6,"../modules/default_shelves":12,"../react_actions/reading_session_actions":42,"../react_actions/shelvings_actions":44,"../react_actions/user_shelves_actions":51,"./shared/newsfeed_updates_mixin":255,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],257:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});function n(){return a.get()}var s=o(e("reflux")),i=o(e("freezer-js")),e=o(e("../react_actions/tab_actions")),a=new i.default({}),e=s.default.createStore({listenables:e.default,getInitialState:n,getState:n,initializeWith:function(e){a.get().reset(e)},updateWith:function(e){n().set(e)},onDeselectTab:function(e,t){a.get()[t]===e&&(a.get().set(t,null),this.notifyListeners())},onSelectTab:function(e,t){a.get().set(t,e),this.notifyListeners()},notifyListeners:function(){this.trigger(n())},reset:function(){a.get().reset({})}});r.default=e},{"../react_actions/tab_actions":45,"freezer-js":"freezer-js",reflux:"reflux"}],258:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_ERROR_MESSAGE=void 0;function n(){return f.get()}var s=o(e("reflux")),i=o(e("freezer-js")),a=o(e("../../../react_actions/user/show/block_user_actions")),l=o(e("../../user_relationships/friend_follow_module_store")),u=e("../../../modules/flash_message_helper"),d=e("../../../modules/ajax/ajax_helper"),c=e("lodash"),p={blockInProgress:!1},f=new i.default(p);r.DEFAULT_ERROR_MESSAGE="Something went wrong with your request. Please\n  try again later.";r.default=s.default.createStore({listenables:[a.default],getState:n,getInitialState:n,initializeWith:function(e){e=Object.assign({},p,e);n().set(e),this.trigger(n())},onBlockMember:function(t){var r=this;n().set({blockInProgress:!0}),this.trigger(n());var o=void 0;return(0,d.httpPost)("/user/"+t+"/block_member",{data:{format:"json"}}).done(function(e){(0,u.flashSuccessMessage)(e.message),n().set({isBlocked:e.isBlocked}),l.default.receiveUnfriend(t),r.trigger(n())}).fail(function(e){o=(o=(0,c.get)(e,"message"))||"Something went wrong with your request. Please\n  try again later.",(0,u.flashErrorMessage)(o)}).always(function(){n().set({blockInProgress:!1}),r.trigger(n())})},reset:function(){n().reset(p)}})},{"../../../modules/ajax/ajax_helper":4,"../../../modules/flash_message_helper":14,"../../../react_actions/user/show/block_user_actions":46,"../../user_relationships/friend_follow_module_store":262,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],259:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});function n(e,t){return f()[e].set(t)}function s(e){n(e,{error:null})}function i(e){var t,r=(t=e,r="isFollowing",f()[t][r]);n(e,{isFollowing:!r})}function a(e){n(e,{buttonEnabled:!0})}function l(e){n(e,{buttonEnabled:!1})}var u=o(e("reflux")),d=o(e("freezer-js")),c=o(e("lodash")),e=o(e("../../react_actions/user/user_follow_actions")),p=new d.default({}),f=function(){return p.get()},e=u.default.createStore({listenables:e.default,getState:f,getInitialState:f,initializeWith:function(e){e=c.default.transform(e,function(e,t,r){e[r]={error:null,buttonEnabled:!0,isBlocked:t.isBlocked,allowsFollow:t.allowsFollow,source:t.source||!1,isFollowing:t.isFollowing,friendshipStatus:t.friendshipStatus}});f().set(e)},updateWith:function(e){this.initializeWith(e)},reset:function(){f().reset({})},onFollow:function(t){var e,r,o=this,e=(e=t,r="source",f()[e][r]),r="AnnotatedBooksPage"===e,e="ReadingNotesListPage"===e;l(t),s(t),this.trigger(this.getState()),$j.post("/user/"+t+"/followers",{format:"json",from_annotated_books_page:r,from_reading_notes_list_page:e}).done(function(e){"success"===e.status?i(t):(e={error:e.message},n(t,e))}).always(function(){a(t),o.trigger(o.getState())})},onUnFollow:function(e){var t=this;l(e),s(e),this.trigger(this.getState()),$j.ajax({type:"DELETE",url:"/user/"+e+"/followers/stop_following",data:{format:"json"}}).done(function(){i(e)}).fail(function(){}).always(function(){a(e),t.trigger(t.getState())})}});r.default=e},{"../../react_actions/user/user_follow_actions":47,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],260:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=o(e("reflux")),s=o(e("freezer-js")),e=o(e("../react_actions/user_agent_capabilities_actions")),i={touch:!1},a=new s.default(i);r.default=n.default.createStore({listenables:[e.default],initializeWith:function(e){a.get().reset(e)},reset:function(){a.get().reset(i)},getInitialState:function(){return a.get()},onUserAgentGainsTouch:function(){a.get().set("touch",!0),this.trigger(a.get())},onUserAgentLosesTouch:function(){a.get().set("touch",!1),this.trigger(a.get())}})},{"../react_actions/user_agent_capabilities_actions":48,"freezer-js":"freezer-js",reflux:"reflux"}],261:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});function n(){return d.get()}var s=e("lodash"),i=o(e("reflux")),a=o(e("freezer-js")),l=e("../modules/ajax/ajax_helper"),e=o(e("../react_actions/user_not_interested_actions")),u={default:{isFlashMessage:!1,isClosed:!1}},d=new a.default(u);r.default=i.default.createStore({listenables:[e.default],getState:n,getInitialState:n,reset:function(){n().reset((0,s.merge)({},u,{}))},setDataForKey:function(e,t){var r={};r[e]=t,n().set((0,s.merge)({},n(),r))},onAddBookIDToState:function(e){this.setDataForKey(e,n().default),this.trigger(n())},onIsFlashMessageForBook:function(e){n()[e].isFlashMessage},onCloseFlashMessage:function(e){this.setDataForKey(e,{isClosed:!0}),this.trigger(n())},userNotInterestedHttpPost:function(e){return(0,l.httpPost)("/user_not_interested_works",{data:{user_not_interested_work:{book_id:e,source:"react"}}})},onUserNotInterested:function(e){var t=this;this.userNotInterestedHttpPost(e).done(function(){t.setDataForKey(e,{isFlashMessage:!0}),t.trigger(n())}).fail(function(){window.alert("There was an error marking this book as not interested, please try again.")})},undoUserNotInterestedHttpDelete:function(e){return(0,l.httpDelete)("/user_not_interested_works/undo",{data:{user_not_interested_work:{book_id:e}}})},onUndoUserNotInterested:function(e){var t=this;this.undoUserNotInterestedHttpDelete(e).done(function(){t.setDataForKey(e,{isFlashMessage:!1}),t.trigger(n())}).fail(function(){window.alert("There was an error undoing this action, please try again.")})}})},{"../modules/ajax/ajax_helper":4,"../react_actions/user_not_interested_actions":49,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],262:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});function n(){return c.get()}var s=o(e("reflux")),i=o(e("freezer-js")),a=o(e("../../react_actions/user_relationships/friend_follow_actions")),l=e("../../modules/ajax/ajax_helper"),u=e("lodash"),d=e("../../modules/flash_message_helper"),c=new i.default({});r.default=s.default.createStore({listenables:[a.default],getState:n,getInitialState:n,initializeWith:function(e){n().reset(e)},startAjaxRequest:function(e){n()[e].set({inProgress:!0}),this.trigger(n())},finishAjaxRequest:function(e){n()[e].set({inProgress:!1}),this.trigger(n())},receiveUnfriend:function(e){n()[e].set({isFriend:!1,isFollowing:!1,isPendingFriendRequestTo:!1}),this.trigger(n())},onUnfriend:function(e){var t=this;this.startAjaxRequest(e),(0,l.httpPost)("/friend/destroy/"+e+".json").done(function(){t.receiveUnfriend(e)}).fail(function(e){(0,d.flashErrorMessage)((0,u.get)(e,"message",l.DEFAULT_ERROR_MESSAGE))}).always(function(){return t.finishAjaxRequest(e)})},onCancelFriendRequest:function(e,t){var r=this;this.startAjaxRequest(e),(0,l.httpPost)("/friend/cancel_request/"+t+".json").done(function(){n()[e].set({isFollowing:!1,isPendingFriendRequestTo:!1})}).fail(function(e){(0,d.flashErrorMessage)((0,u.get)(e,"message",l.DEFAULT_ERROR_MESSAGE))}).always(function(){return r.finishAjaxRequest(e)})},onFollow:function(e){var t=this,r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];this.startAjaxRequest(e),(0,l.httpPost)("/user/"+e+"/followers.json",{data:r}).done(function(){n()[e].set({isFollowing:!0})}).fail(function(e){(0,d.flashErrorMessage)((0,u.get)(e,"message",l.DEFAULT_ERROR_MESSAGE))}).always(function(){return t.finishAjaxRequest(e)})},onUnfollow:function(e){var t=this;this.startAjaxRequest(e),(0,l.httpDelete)("/user/"+e+"/followers/stop_following.json").done(function(){n()[e].set({isFollowing:!1,isPendingFriendRequestTo:!1})}).fail(function(e){(0,d.flashErrorMessage)((0,u.get)(e,"message",l.DEFAULT_ERROR_MESSAGE))}).always(function(){return t.finishAjaxRequest(e)})},onAcceptFriendRequest:function(e,t){var r=this;this.startAjaxRequest(e),(0,l.httpPost)("/friend/confirm_request.json",{data:{id:t}}).done(function(){n()[e].set({isFriend:!0,isPendingFriendRequestFrom:!1})}).fail(function(e){(0,d.flashErrorMessage)((0,u.get)(e,"message",l.DEFAULT_ERROR_MESSAGE))}).always(function(){return r.finishAjaxRequest(e)})},reset:function(){n().reset({})}})},{"../../modules/ajax/ajax_helper":4,"../../modules/flash_message_helper":14,"../../react_actions/user_relationships/friend_follow_actions":50,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],263:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});function n(){return h.get()}function s(e,t,r){(e=i.default.find(n()[t],{name:e}))&&e.set("bookCount",e.bookCount+r)}var i=o(e("lodash")),a=o(e("reflux")),l=o(e("freezer-js")),u=o(e("../react_actions/shelvings_actions")),d=o(e("../react_actions/user_shelves_actions")),c=o(e("../react_actions/want_to_read_menu_actions")),p=e("../modules/default_shelves"),f={defaultShelves:[],customExclusiveShelves:[],nonExclusiveShelves:[]},h=new l.default(f);r.default=a.default.createStore({listenables:[d.default,{bookShelved:u.default.bookShelved,bookUnshelved:u.default.bookUnshelved}],getInitialState:h.get,getState:n,defaultShelves:function(){var e=n().defaultShelves;return 0===e.length?p.DEFAULT_SHELVES:{READ:i.default.find(e,"name","read"),CURRENTLY_READING:i.default.find(e,"name","currently-reading"),WANT_TO_READ:i.default.find(e,"name","to-read")}},initializeWith:function(e){h.get().reset(e)},reset:function(){h.get().reset(f)},updateWith:function(e){h.get().reset(e)},onAddNonExclusiveShelf:function(e){var t=i.default.clone(h.get().nonExclusiveShelves)||[],r=i.default.map(t,function(e){return e.name});i.default.includes(r,e)||(t.unshift({name:e,url:"",displayName:e,bookCount:0}),h.get().set("nonExclusiveShelves",t),c.default.updateShelves(),this.trigger(n()))},onRemoveNonExclusiveShelf:function(t){var e=i.default.clone(h.get().nonExclusiveShelves)||[],r=i.default.map(e,function(e){return e.name});i.default.includes(r,t)&&(i.default.remove(e,function(e){return e.name===t}),h.get().set("nonExclusiveShelves",e),c.default.updateShelves(),this.trigger(n()))},onBookShelved:function(e){e=e.shelves||{};i.default.each(e,function(e,t){i.default.each(e,function(e){s(e,t,1)})}),this.trigger(n())},onBookUnshelved:function(e){e=e.shelves||{};i.default.each(e,function(e,t){i.default.each(e,function(e){s(e,t,-1)})}),this.trigger(n())}})},{"../modules/default_shelves":12,"../react_actions/shelvings_actions":44,"../react_actions/user_shelves_actions":51,"../react_actions/want_to_read_menu_actions":52,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],264:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});function n(e,t){_().set(t,v(e))}function s(e){return a.default.has(_(),e)||n("",e),_()[e]}function i(e){_().reset(a.default.merge({},f,e))}var a=o(e("lodash")),l=o(e("reflux")),u=o(e("freezer-js")),d=o(e("../react_actions/want_to_read_menu_actions")),c=o(e("./user_shelves_store")),p="showAddShelfTextbox",f={},h=new u.default(f),_=function(){return h.get()},m=function(t,e){e=e.defaultShelves.concat(e.customExclusiveShelves||[]);return a.default.isEmpty(t)?e:a.default.filter(e,function(e){return e.name.match(new RegExp(t,"i"))})},g=function(t,e){return a.default.isEmpty(t)?e.nonExclusiveShelves:a.default.filter(e.nonExclusiveShelves,function(e){return e.name.match(new RegExp(t,"i"))})},v=function(e){var t=c.default.getState();return{displayableExclusiveShelves:m(e,t),displayableNonExclusiveShelves:g(e,t),shelfNameFilter:e}};r.default=l.default.createStore({listenables:[d.default],getInitialState:function(e){return a.default.isUndefined(e)?_():s(e)},getState:_,initializeWith:function(e){i(e)},reset:function(){i(f)},updateWith:function(t){a.default.each(a.default.keys(t),function(e){_().set(e,t[e])}),this.notifyListeners()},notifyListeners:function(){this.trigger(_())},onUpdateShelfNameFilter:function(e,t){n(e,t),s(t).set(p,!1),this.notifyListeners()},onOpenAddShelfTextbox:function(e){s(e).set(p,!0),this.notifyListeners()},onCloseAddShelfTextbox:function(e){s(e).set(p,!1),this.notifyListeners()},onUpdateShelves:function(){a.default.each(a.default.keys(_()),function(e){var t;t=e,e=_()[t].shelfNameFilter,_().set(t,v(e))}),this.notifyListeners()}})},{"../react_actions/want_to_read_menu_actions":52,"./user_shelves_store":263,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],265:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},s=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}Object.defineProperty(r,"__esModule",{value:!0});var a=o(e("lodash")),l=e("../modules/ajax/ajax_helper"),u=o(e("react"));r.default=function(e,r){function o(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(o).call(this,e));return t.state={deployServices:a.default.merge({},e.deployServices)},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,u["default"].Component),s(o,[{key:"componentDidMount",value:function(){var t=this;a.default.isArray(r)&&!a.default.isEmpty(r)&&(0,l.httpGet)("/deploy_services/check",{data:{format:"json",feature_codes:r}}).done(function(e){a.default.isEmpty(e.deploy_services)||(e=n({},t.state.deployServices,e.deploy_services),t.setState({deployServices:e}))})}},{key:"render",value:function(){return u.default.createElement(e,n({deployServices:this.state.deployServices},a.default.omit(this.props,"deployServices")))}}]),o}},{"../modules/ajax/ajax_helper":4,lodash:"lodash",react:"react"}],266:[function(e,t,r){"use strict";r.__esModule=!0,r.loopAsync=function(t,r,o){function n(){return i=!0,a?void(u=[].concat(Array.prototype.slice.call(arguments))):void o.apply(this,arguments)}var s=0,i=!1,a=!1,l=!1,u=void 0;!function e(){if(!i&&(l=!0,!a)){for(a=!0;!i&&s<t&&l;)l=!1,r.call(this,s++,e,n);return a=!1,i?void o.apply(this,u):void(t<=s&&l&&(i=!0,o()))}}()},r.mapAsync=function(e,t,n){var s=e.length,i=[];if(0===s)return n(null,i);var a=!1,l=0;e.forEach(function(e,o){t(e,o,function(e,t){var r;r=o,e=e,t=t,a||(e?(a=!0,n(e)):(i[r]=t,(a=++l===s)&&n(null,i)))})})}},{}],267:[function(e,t,r){"use strict";function s(e){return"@@contextSubscriber/"+e}r.__esModule=!0,r.ContextProvider=function(e){var t=s(e),r=t+"/listeners",o=t+"/eventIndex",n=t+"/subscribe";return(e={childContextTypes:((e={})[t]=i.isRequired,e),getChildContext:function(){var e={};return e[t]={eventIndex:this[o],subscribe:this[n]},e},componentWillMount:function(){this[r]=[],this[o]=0},componentWillReceiveProps:function(){this[o]++},componentDidUpdate:function(){var t=this;this[r].forEach(function(e){return e(t[o])})}})[n]=function(t){var e=this;return this[r].push(t),function(){e[r]=e[r].filter(function(e){return e!==t})}},e},r.ContextSubscriber=function(e){var t=s(e),r=t+"/lastRenderedEventIndex",o=t+"/handleContextUpdate",n=t+"/unsubscribe";return(e={contextTypes:((e={})[t]=i,e),getInitialState:function(){var e;return this.context[t]?((e={})[r]=this.context[t].eventIndex,e):{}},componentDidMount:function(){this.context[t]&&(this[n]=this.context[t].subscribe(this[o]))},componentWillReceiveProps:function(){var e;this.context[t]&&this.setState(((e={})[r]=this.context[t].eventIndex,e))},componentWillUnmount:function(){this[n]&&(this[n](),this[n]=null)}})[o]=function(e){var t;e!==this.state[r]&&this.setState(((t={})[r]=e,t))},e};var e=e("react"),i=e.PropTypes.shape({subscribe:e.PropTypes.func.isRequired,eventIndex:e.PropTypes.number.isRequired})},{react:"react"}],268:[function(e,t,r){"use strict";r.__esModule=!0,r.routes=r.route=r.components=r.component=r.history=void 0,r.falsy=function(e,t,r){return e[t]?new Error("<"+r+'> should not have a "'+t+'" prop'):void 0};var o=e("react"),n=o.PropTypes.func,s=o.PropTypes.object,i=o.PropTypes.arrayOf,a=o.PropTypes.oneOfType,l=o.PropTypes.element,e=o.PropTypes.shape,o=o.PropTypes.string,o=(r.history=e({listen:n.isRequired,push:n.isRequired,replace:n.isRequired,go:n.isRequired,goBack:n.isRequired,goForward:n.isRequired}),r.component=a([n,o])),l=(r.components=a([o,s]),r.route=a([s,l]));r.routes=a([l,i(l)])},{react:"react"}],269:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return"function"==typeof e?e(t.location):e}r.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},l=o(e("react")),n=o(e("invariant")),s=e("./PropTypes"),u=e("./ContextUtils"),d=l.default.PropTypes,c=d.bool,p=d.object,f=d.string,e=d.func,d=d.oneOfType,f=l.default.createClass({displayName:"Link",mixins:[(0,u.ContextSubscriber)("router")],contextTypes:{router:s.routerShape},propTypes:{to:d([f,p,e]),query:p,hash:f,state:p,activeStyle:p,activeClassName:f,onlyActiveOnIndex:c.isRequired,onClick:e,target:f},getDefaultProps:function(){return{onlyActiveOnIndex:!1,style:{}}},handleClick:function(e){var t,r;this.props.onClick&&this.props.onClick(e),e.defaultPrevented||((t=this.context.router)||(0,n.default)(!1),(r=e).metaKey||r.altKey||r.ctrlKey||r.shiftKey||0!==e.button||this.props.target||(e.preventDefault(),t.push(i(this.props.to,t))))},render:function(){var e=this.props,t=e.to,r=e.activeClassName,o=e.activeStyle,n=e.onlyActiveOnIndex,s=function(e,t){var r,o={};for(r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(o[r]=e[r]);return o}(e,["to","activeClassName","activeStyle","onlyActiveOnIndex"]),e=this.context.router;if(e){if(null==t)return l.default.createElement("a",s);t=i(t,e);s.href=e.createHref(t),(r||null!=o&&!function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return;return 1}(o))&&e.isActive(t,n)&&(r&&(s.className?s.className+=" "+r:s.className=r),o&&(s.style=a({},s.style,o)))}return l.default.createElement("a",a({},s,{onClick:this.handleClick}))}});r.default=f,t.exports=r.default},{"./ContextUtils":267,"./PropTypes":272,invariant:306,react:"react"}],270:[function(e,t,r){"use strict";function a(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function _(e){return i[e]||(i[e]=function(e){for(var t,r="",o=[],n=[],s=0,i=/:([a-zA-Z_$][a-zA-Z0-9_$]*)|\*\*|\*|\(|\)/g;t=i.exec(e);)t.index!==s&&(n.push(e.slice(s,t.index)),r+=a(e.slice(s,t.index))),t[1]?(r+="([^/]+)",o.push(t[1])):"**"===t[0]?(r+="(.*)",o.push("splat")):"*"===t[0]?(r+="(.*?)",o.push("splat")):"("===t[0]?r+="(?:":")"===t[0]&&(r+=")?"),n.push(t[0]),s=i.lastIndex;return s!==e.length&&(n.push(e.slice(s,e.length)),r+=a(e.slice(s,e.length))),{pattern:e,regexpSource:r,paramNames:o,tokens:n}}(e)),i[e]}function n(e,t){var r=_(e="/"!==e.charAt(0)?"/"+e:e),o=r.regexpSource,n=r.paramNames,r=r.tokens;"/"!==e.charAt(e.length-1)&&(o+="/?"),"*"===r[r.length-1]&&(o+="$");r=t.match(new RegExp("^"+o,"i"));if(null==r)return null;o=r[0],t=t.substr(o.length);if(t){if("/"!==o.charAt(o.length-1))return null;t="/"+t}return{remainingPathname:t,paramNames:n,paramValues:r.slice(1).map(function(e){return e&&decodeURIComponent(e)})}}r.__esModule=!0,r.compilePattern=_,r.matchPattern=n,r.getParamNames=function(e){return _(e).paramNames},r.getParams=function(e,t){if(!(e=n(e,t)))return null;var t=e.paramNames,r=e.paramValues,o={};return t.forEach(function(e,t){o[e]=r[t]}),o},r.formatPattern=function(e,t){t=t||{};for(var r=_(e).tokens,o=0,n="",s=0,i=[],a=void 0,l=void 0,u=0,d=r.length;u<d;++u)if("*"===(a=r[u])||"**"===a)null!=(l=Array.isArray(t.splat)?t.splat[s++]:t.splat)||0<o||(0,m.default)(!1),null!=l&&(n+=encodeURI(l));else if("("===a)i[o]="",o+=1;else if(")"===a){var c=i.pop();--o?i[o-1]+=c:n+=c}else if(":"===a.charAt(0))if(null!=(l=t[a.substring(1)])||0<o||(0,m.default)(!1),null==l){if(o){i[o-1]="";for(var c=r.indexOf(a),p=r.slice(c,r.length),f=-1,h=0;h<p.length;h++)if(")"==p[h]){f=h;break}0<f||(0,m.default)(!1),u=c+f-1}}else o?i[o-1]+=encodeURIComponent(l):n+=encodeURIComponent(l);else o?i[o-1]+=a:n+=a;return o<=0||(0,m.default)(!1),n.replace(/\/+/g,"/")};var o,s=e("invariant"),m=(o=s)&&o.__esModule?o:{default:o},i=Object.create(null)},{invariant:306}],271:[function(e,t,r){"use strict";r.__esModule=!0,r.isPromise=function(e){return e&&"function"==typeof e.then}},{}],272:[function(e,t,r){"use strict";r.__esModule=!0,r.locationShape=r.routerShape=void 0;var o=e("react"),n=o.PropTypes.func,s=o.PropTypes.object,e=o.PropTypes.shape,o=o.PropTypes.string;r.routerShape=e({push:n.isRequired,replace:n.isRequired,go:n.isRequired,goBack:n.isRequired,goForward:n.isRequired,setRouteLeaveHook:n.isRequired,isActive:n.isRequired}),r.locationShape=e({pathname:o.isRequired,search:o.isRequired,state:s,action:o.isRequired,key:o})},{react:"react"}],273:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0;var n=o(e("react")),s=o(e("invariant")),i=e("./RouteUtils"),a=e("./InternalPropTypes"),l=n.default.PropTypes,e=l.string,l=l.func,l=n.default.createClass({displayName:"Route",statics:{createRouteFromReactElement:i.createRouteFromReactElement},propTypes:{path:e,component:a.component,components:a.components,getComponent:l,getComponents:l},render:function(){(0,s.default)(!1)}});r.default=l,t.exports=r.default},{"./InternalPropTypes":268,"./RouteUtils":274,invariant:306,react:"react"}],274:[function(e,t,r){"use strict";function o(e){return null==e||d.default.isValidElement(e)}function n(e){return o(e)||Array.isArray(e)&&e.every(o)}function s(e){var t=e.type,t=(t=t.defaultProps,e=e.props,a({},t,e));return t.children&&((e=i(t.children,t)).length&&(t.childRoutes=e),delete t.children),t}function i(e,r){var o=[];return d.default.Children.forEach(e,function(e){var t;d.default.isValidElement(e)&&(e.type.createRouteFromReactElement?(t=e.type.createRouteFromReactElement(e,r))&&o.push(t):o.push(s(e)))}),o}r.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e};r.isReactChildren=n,r.createRouteFromReactElement=s,r.createRoutesFromReactChildren=i,r.createRoutes=function(e){return n(e)?e=i(e):e&&!Array.isArray(e)&&(e=[e]),e};var l,u=e("react"),d=(l=u)&&l.__esModule?l:{default:l}},{react:"react"}],275:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},n=o(e("invariant")),s=o(e("react")),i=o(e("./createTransitionManager")),a=e("./InternalPropTypes"),u=o(e("./RouterContext")),d=e("./RouteUtils"),c=e("./RouterUtils"),p=(o(e("./routerWarning")),s.default.PropTypes),e=p.func,p=p.object,f=s.default.createClass({displayName:"Router",propTypes:{history:p,children:a.routes,routes:a.routes,render:e,createElement:e,onError:e,onUpdate:e,matchContext:p},getDefaultProps:function(){return{render:function(e){return s.default.createElement(u.default,e)}}},getInitialState:function(){return{location:null,routes:null,params:null,components:null}},handleError:function(e){if(!this.props.onError)throw e;this.props.onError.call(this,e)},createRouterObject:function(e){var t=this.props.matchContext;if(t)return t.router;t=this.props.history;return(0,c.createRouterObject)(t,this.transitionManager,e)},createTransitionManager:function(){var e=this.props.matchContext;if(e)return e.transitionManager;var t=this.props.history,r=this.props,e=r.routes,r=r.children;return t.getCurrentLocation||(0,n.default)(!1),(0,i.default)(t,(0,d.createRoutes)(e||r))},componentWillMount:function(){var r=this;this.transitionManager=this.createTransitionManager(),this.router=this.createRouterObject(this.state),this._unlisten=this.transitionManager.listen(function(e,t){e?r.handleError(e):((0,c.assignRouterState)(r.router,t),r.setState(t,r.props.onUpdate))})},componentWillReceiveProps:function(e){},componentWillUnmount:function(){this._unlisten&&this._unlisten()},render:function(){var e=this.state,t=e.location,r=e.routes,o=e.params,n=e.components,s=this.props,e=s.createElement,i=s.render,a=function(e,t){var r,o={};for(r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(o[r]=e[r]);return o}(s,["createElement","render"]);return null==t?null:(Object.keys(f.propTypes).forEach(function(e){return delete a[e]}),i(l({},a,{router:this.router,location:t,routes:r,params:o,components:n,createElement:e})))}});r.default=f,t.exports=r.default},{"./InternalPropTypes":268,"./RouteUtils":274,"./RouterContext":276,"./RouterUtils":277,"./createTransitionManager":283,"./routerWarning":289,invariant:306,react:"react"}],276:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0;var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=o(e("invariant")),s=o(e("react")),_=o(e("./getRouteParams")),i=e("./ContextUtils"),m=e("./RouteUtils"),a=s.default.PropTypes,l=a.array,e=a.func,a=a.object,a=s.default.createClass({displayName:"RouterContext",mixins:[(0,i.ContextProvider)("router")],propTypes:{router:a.isRequired,location:a.isRequired,routes:l.isRequired,params:a.isRequired,components:l.isRequired,createElement:e.isRequired},getDefaultProps:function(){return{createElement:s.default.createElement}},childContextTypes:{router:a.isRequired},getChildContext:function(){return{router:this.props.router}},createElement:function(e,t){return null==e?null:this.props.createElement(e,t)},render:function(){var l=this,e=this.props,u=e.location,d=e.routes,c=e.params,t=e.components,p=e.router,e=null;return null===(e=t?t.reduceRight(function(e,t,r){if(null==t)return e;var o=d[r],r=(0,_.default)(o,c),n={location:u,params:c,route:o,router:p,routeParams:r,routes:d};if((0,m.isReactChildren)(e))n.children=e;else if(e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s]);if("object"!==(void 0===t?"undefined":h(t)))return l.createElement(t,n);var i,a={};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(a[i]=l.createElement(t[i],f({key:i},n)));return a},e):e)||!1===e||s.default.isValidElement(e)||(0,n.default)(!1),e}});r.default=a,t.exports=r.default},{"./ContextUtils":267,"./RouteUtils":274,"./getRouteParams":285,invariant:306,react:"react"}],277:[function(e,t,r){"use strict";function o(e,t){var r=t.location,o=t.params,t=t.routes;return e.location=r,e.params=o,e.routes=t,e}r.__esModule=!0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e};r.createRouterObject=function(e,t,r){return o(n({},e,{setRouteLeaveHook:t.listenBeforeLeavingRoute,isActive:t.isActive}),r)},r.assignRouterState=o},{}],278:[function(e,t,r){"use strict";function i(o,n,e,t){var s=o.length<e,e=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];o.apply(n,t),s&&(0,t[t.length-1])()};return t.add(e),e}function a(e,o,t){function n(e){s=e}var s;e?(s=void 0,l.loopAsync)(e,function(e,t,r){o(e,n,function(e){e||s?r(e,s):t()})},t):t()}r.__esModule=!0,r.runEnterHooks=function(e,o,t){s.clear();var n=e.reduce(function(e,t){return t.onEnter&&e.push(i(t.onEnter,t,3,s)),e},[]);return a(n.length,function(e,t,r){n[e](o,t,function(){s.has(n[e])&&(r(),s.remove(n[e]))})},t)},r.runChangeHooks=function(e,o,n,t){u.clear();var s=e.reduce(function(e,t){return t.onChange&&e.push(i(t.onChange,t,4,u)),e},[]);return a(s.length,function(e,t,r){s[e](o,n,t,function(){u.has(s[e])&&(r(),u.remove(s[e]))})},t)},r.runLeaveHooks=function(e,t){for(var r=0,o=e.length;r<o;++r)e[r].onLeave&&e[r].onLeave.call(e[r],t)};var l=e("./AsyncUtils"),e=function e(){var r=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.hooks=[],this.add=function(e){return r.hooks.push(e)},this.remove=function(t){return r.hooks=r.hooks.filter(function(e){return e!==t})},this.has=function(e){return-1!==r.hooks.indexOf(e)},this.clear=function(){return r.hooks=[]}},s=new e,u=new e},{"./AsyncUtils":266}],279:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0;var n=o(e("history/lib/createBrowserHistory")),e=o(e("./createRouterHistory"));r.default=(0,e.default)(n.default),t.exports=r.default},{"./createRouterHistory":282,"history/lib/createBrowserHistory":300}],280:[function(e,t,r){"use strict";r.__esModule=!0;var c=e("./PatternUtils");r.default=function(n,s){var i,o=n&&n.routes,a=s.routes,l=void 0,u=void 0,d=void 0;return o?(i=!1,(l=o.filter(function(e){if(i)return!0;var t,r,o,t=-1===a.indexOf(e)||(r=n,o=s,!!(t=e).path&&(0,c.getParamNames)(t.path).some(function(e){return r.params[e]!==o.params[e]}));return t&&(i=!0),t})).reverse(),d=[],u=[],a.forEach(function(e){var t=-1===o.indexOf(e),r=-1!==l.indexOf(e);(t||r?d:u).push(e)})):(l=[],u=[],d=a),{leaveRoutes:l,changeRoutes:u,enterRoutes:d}},t.exports=r.default},{"./PatternUtils":270}],281:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0,r.default=function(e){var t=(0,i.default)(e);return(0,n.default)((0,s.default)(function(){return t}))(e)};var n=o(e("history/lib/useQueries")),s=o(e("history/lib/useBasename")),i=o(e("history/lib/createMemoryHistory"));t.exports=r.default},{"history/lib/createMemoryHistory":302,"history/lib/useBasename":304,"history/lib/useQueries":305}],282:[function(e,t,r){"use strict";r.__esModule=!0,r.default=function(e){var t=void 0;return t=i?(0,s.default)(e)():t};var o,n=e("./useRouterHistory"),s=(o=n)&&o.__esModule?o:{default:o},i=!("undefined"==typeof window||!window.document||!window.document.createElement);t.exports=r.default},{"./useRouterHistory":290}],283:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function m(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return 1}r.__esModule=!0;var g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e};r.default=function(n,e){function r(r,o){p&&p.location===r?s(p,o):(0,S.default)(e,r,function(e,t){e?o(e):t?s(g({},t,{location:r}),o):o()})}function s(r,o){function n(e,t){return e||t?s(e,t):void(0,k.default)(r,function(e,t){e?o(e):o(null,null,c=g({},r,{components:t}))})}function s(e,t){e?o(e):o(null,t)}var e=(0,v.default)(c,r),t=e.leaveRoutes,i=e.changeRoutes,a=e.enterRoutes;(0,y.runLeaveHooks)(t,c),t.filter(function(e){return-1===a.indexOf(e)}).forEach(d),(0,y.runChangeHooks)(i,c,r,function(e,t){return e||t?s(e,t):void(0,y.runEnterHooks)(a,r,n)})}function i(e,t){return e.__id__||1<arguments.length&&void 0!==t&&t&&(e.__id__=o++)}function l(e){return e.map(function(e){return f[i(e)]}).filter(function(e){return e})}function a(i,a){(0,S.default)(e,i,function(e,t){if(null!=t){p=g({},t,{location:i});for(var r=l((0,v.default)(c,p).leaveRoutes),o=void 0,n=0,s=r.length;null==o&&n<s;++n)o=r[n](i);a(o)}else a()})}function u(){if(c.routes){for(var e=l(c.routes),t=void 0,r=0,o=e.length;"string"!=typeof t&&r<o;++r)t=e[r]();return t}}function d(e){e=i(e);e&&(delete f[e],m(f)||(h&&(h(),h=null),_&&(_(),_=null)))}var c={},p=void 0,o=1,f=Object.create(null),h=void 0,_=void 0;return{isActive:function(e,t){return e=n.createLocation(e),(0,b.default)(e,t,c.location,c.routes,c.params)},match:r,listenBeforeLeavingRoute:function(e,t){var r=!m(f),o=i(e,!0);return f[o]=t,r&&(h=n.listenBefore(a),n.listenBeforeUnload&&(_=n.listenBeforeUnload(u))),function(){d(e)}},listen:function(o){function e(e){c.location===e?o(null,c):r(e,function(e,t,r){e?o(e):t?n.replace(t):r&&o(null,r)})}var t=n.listen(e);return c.location?o(null,c):e(n.getCurrentLocation()),t}}};var n=(o(e("./routerWarning")),e("./computeChangedRoutes")),v=o(n),y=e("./TransitionUtils"),b=o(e("./isActive")),k=o(e("./getComponents")),S=o(e("./matchRoutes"));t.exports=r.default},{"./TransitionUtils":278,"./computeChangedRoutes":280,"./getComponents":284,"./isActive":286,"./matchRoutes":288,"./routerWarning":289}],284:[function(e,t,r){"use strict";r.__esModule=!0;var n=e("./AsyncUtils"),s=e("./PromiseUtils");r.default=function(o,e){(0,n.mapAsync)(o.routes,function(e,t,r){!function(e,t,r){if(t.component||t.components)return r(null,t.component||t.components);var o=t.getComponent||t.getComponents;o?(e=o.call(t,e,r),(0,s.isPromise)(e)&&e.then(function(e){return r(null,e)},r)):r()}(o,e,r)},e)},t.exports=r.default},{"./AsyncUtils":266,"./PromiseUtils":271}],285:[function(e,t,r){"use strict";r.__esModule=!0;var o=e("./PatternUtils");r.default=function(e,t){var r={};return e.path&&(0,o.getParamNames)(e.path).forEach(function(e){Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e])}),r},t.exports=r.default},{"./PatternUtils":270}],286:[function(e,t,r){"use strict";function l(e,t){return null==t?null==e:null==e||function r(e,o){if(e==o)return!0;if(null==e||null==o)return!1;if(Array.isArray(e))return Array.isArray(o)&&e.length===o.length&&e.every(function(e,t){return r(e,o[t])});if("object"!==(void 0===e?"undefined":n(e)))return String(e)===String(o);for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))if(void 0===e[t]){if(void 0!==o[t])return!1}else{if(!Object.prototype.hasOwnProperty.call(o,t))return!1;if(!r(e[t],o[t]))return!1}return!0}(e,t)}r.__esModule=!0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r.default=function(e,t,r,o,n){var s,i=e.pathname,a=e.query;return null!=r&&("/"!==i.charAt(0)&&(i="/"+i),s=i,"/"!==(e=r.pathname).charAt(0)&&(e="/"+e),"/"!==s.charAt(s.length-1)&&(s+="/"),"/"!==e.charAt(e.length-1)&&(e+="/"),!(e!==s&&(t||!function(e,t,r){for(var o=e,n=[],s=[],i=0,a=t.length;i<a;++i){var l=t[i].path||"";if("/"===l.charAt(0)&&(o=e,n=[],s=[]),null!==o&&l){l=(0,u.matchPattern)(l,o);if(l?(o=l.remainingPathname,n=[].concat(n,l.paramNames),s=[].concat(s,l.paramValues)):o=null,""===o)return n.every(function(e,t){return String(s[t])===String(r[e])})}}}(i,o,n)))&&l(a,r.query))};var u=e("./PatternUtils");t.exports=r.default},{"./PatternUtils":270}],287:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},u=e("history/lib/Actions"),n=o(e("invariant")),d=o(e("./createMemoryHistory")),c=o(e("./createTransitionManager")),p=e("./RouteUtils"),f=e("./RouterUtils");r.default=function(e,s){var i=e.history,t=e.routes,r=e.location,e=function(e,t){var r,o={};for(r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(o[r]=e[r]);return o}(e,["history","routes","location"]);i||r||(0,n.default)(!1);var i=i||(0,d.default)(e),a=(0,c.default)(i,(0,p.createRoutes)(t)),r=r?i.createLocation(r):i.getCurrentLocation();a.match(r,function(e,t,r){var o,n=void 0;r&&(o=(0,f.createRouterObject)(i,a,r),n=l({},r,{router:o,matchContext:{transitionManager:a,router:o}})),s(e,t&&i.createLocation(t,u.REPLACE),n)})},t.exports=r.default},{"./RouteUtils":274,"./RouterUtils":277,"./createMemoryHistory":281,"./createTransitionManager":283,"history/lib/Actions":291,invariant:306}],288:[function(e,t,r){"use strict";function d(e,t){return r={},o=t,e.reduce(function(e,t,r){r=o&&o[r];return Array.isArray(e[t])?e[t].push(r):t in e?e[t]=[e[t],r]:e[t]=r,e},r);var r,o}function l(r,o,n,s,i,a){var l,e=r.path||"";if("/"===e.charAt(0)&&(n=o.pathname,s=[],i=[]),null!==n&&e){try{var t=(0,_.matchPattern)(e,n);t?(n=t.remainingPathname,s=[].concat(s,t.paramNames),i=[].concat(i,t.paramValues)):n=null}catch(e){a(e)}if(""===n){var u=(l={routes:[r],params:d(s,i)},function e(t,s,i,a,r){var o,l;t.indexRoute?r(null,t.indexRoute):t.getIndexRoute?(o={location:s,params:d(i,a)},o=t.getIndexRoute(o,function(e,t){r(e,!e&&(0,m.createRoutes)(t)[0])}),(0,h.isPromise)(o)&&o.then(function(e){return r(null,(0,m.createRoutes)(e)[0])},r)):t.childRoutes?(l=t.childRoutes.filter(function(e){return!e.path}),(0,f.loopAsync)(l.length,function(r,o,n){e(l[r],s,i,a,function(e,t){e||t?(t=[l[r]].concat(Array.isArray(t)?t:[t]),n(e,t)):o()})},function(e,t){r(null,t)})):r()}(r,o,s,i,function(e,t){e?a(e):(Array.isArray(t)?(e=l.routes).push.apply(e,t):t&&l.routes.push(t),a(null,l))}),{v:void 0});if("object"===(void 0===u?"undefined":p(u)))return u.v}}null!=n||r.childRoutes?(u=function(e,t,r,o,n){if(e.childRoutes)return[null,e.childRoutes];if(!e.getChildRoutes)return[];var s=!0,i=void 0,o={location:t,params:d(r,o)},o=e.getChildRoutes(o,function(e,t){return t=!e&&(0,m.createRoutes)(t),s?void(i=[e,t]):void n(e,t)});return(0,h.isPromise)(o)&&o.then(function(e){return n(null,(0,m.createRoutes)(e))},n),s=!1,i}(r,o,s,i,t=function(e,t){e?a(e):t?c(t,o,function(e,t){e?a(e):t?(t.routes.unshift(r),a(null,t)):a()},n,s,i):a()}))&&t.apply(void 0,u):a()}function c(t,n,e,s){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:[],a=5<arguments.length&&void 0!==arguments[5]?arguments[5]:[];void 0===s&&("/"!==n.pathname.charAt(0)&&(n=o({},n,{pathname:"/"+n.pathname})),s=n.pathname),(0,f.loopAsync)(t.length,function(e,r,o){l(t[e],n,s,i,a,function(e,t){e||t?o(e,t):r()})},e)}r.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r.default=c;var n,f=e("./AsyncUtils"),h=e("./PromiseUtils"),_=e("./PatternUtils"),s=e("./routerWarning"),m=((n=s)&&n.__esModule,e("./RouteUtils"));t.exports=r.default},{"./AsyncUtils":266,"./PatternUtils":270,"./PromiseUtils":271,"./RouteUtils":274,"./routerWarning":289}],289:[function(e,t,r){"use strict";r.__esModule=!0,r.default=function(e,t){if(-1!==t.indexOf("deprecated")){if(i[t])return;i[t]=!0}t="[react-router] "+t;for(var r=arguments.length,o=Array(2<r?r-2:0),n=2;n<r;n++)o[n-2]=arguments[n];s.default.apply(void 0,[e,t].concat(o))},r._resetWarned=function(){i={}};var o,n=e("warning"),s=(o=n)&&o.__esModule?o:{default:o},i={}},{warning:309}],290:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0,r.default=function(t){return function(e){return(0,n.default)((0,s.default)(t))(e)}};var n=o(e("history/lib/useQueries")),s=o(e("history/lib/useBasename"));t.exports=r.default},{"history/lib/useBasename":304,"history/lib/useQueries":305}],291:[function(e,t,r){"use strict";r.__esModule=!0,r.PUSH="PUSH",r.REPLACE="REPLACE",r.POP="POP"},{}],292:[function(e,t,r){"use strict";r.__esModule=!0,r.loopAsync=function(t,r,o){function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return i=!0,a?void(u=t):void o.apply(void 0,t)}var s=0,i=!1,a=!1,l=!1,u=void 0;(function e(){if(!i&&(l=!0,!a)){for(a=!0;!i&&s<t&&l;)l=!1,r(s++,e,n);return a=!1,i?void o.apply(void 0,u):void(t<=s&&l&&(i=!0,o()))}})()}},{}],293:[function(e,t,r){"use strict";r.__esModule=!0,r.go=r.replaceLocation=r.pushLocation=r.startListener=r.getUserConfirmation=r.getCurrentLocation=void 0;function o(e){return e=e&&e.key,(0,n.createLocation)({pathname:window.location.pathname,search:window.location.search,hash:window.location.hash,state:e?(0,i.readState)(e):void 0},void 0,e)}var n=e("./LocationUtils"),s=e("./DOMUtils"),i=e("./DOMStateStorage"),a=e("./PathUtils"),e=e("./ExecutionEnvironment"),l="hashchange",u=e.canUseDOM&&!(0,s.supportsPopstateOnHashchange)(),d=r.getCurrentLocation=function(){var t=void 0;try{t=window.history.state||{}}catch(e){t={}}return o(t)},c=(r.getUserConfirmation=function(e,t){return t(window.confirm(e))},r.startListener=function(t){function e(e){void 0!==e.state&&t(o(e.state))}(0,s.addEventListener)(window,"popstate",e);function r(){return t(d())}return u&&(0,s.addEventListener)(window,l,r),function(){(0,s.removeEventListener)(window,"popstate",e),u&&(0,s.removeEventListener)(window,l,r)}},function(e,t){var r=e.state,o=e.key;void 0!==r&&(0,i.saveState)(o,r),t({key:o},(0,a.createPath)(e))});r.pushLocation=function(e){return c(e,function(e,t){return window.history.pushState(e,null,t)})},r.replaceLocation=function(e){return c(e,function(e,t){return window.history.replaceState(e,null,t)})},r.go=function(e){e&&window.history.go(e)}},{"./DOMStateStorage":294,"./DOMUtils":295,"./ExecutionEnvironment":296,"./LocationUtils":297,"./PathUtils":298}],294:[function(e,t,r){"use strict";r.__esModule=!0,r.readState=r.saveState=void 0;function o(e){return"@@History/"+e}var n,s=e("warning"),i=((n=s)&&n.__esModule,{QuotaExceededError:!0,QUOTA_EXCEEDED_ERR:!0}),a={SecurityError:!0};r.saveState=function(e,t){if(window.sessionStorage)try{null==t?window.sessionStorage.removeItem(o(e)):window.sessionStorage.setItem(o(e),JSON.stringify(t))}catch(e){if(a[e.name])return;if(i[e.name]&&0===window.sessionStorage.length)return;throw e}},r.readState=function(e){var t=void 0;try{t=window.sessionStorage.getItem(o(e))}catch(e){if(a[e.name])return}if(t)try{return JSON.parse(t)}catch(e){}}},{warning:309}],295:[function(e,t,r){"use strict";r.__esModule=!0,r.addEventListener=function(e,t,r){return e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent("on"+t,r)},r.removeEventListener=function(e,t,r){return e.removeEventListener?e.removeEventListener(t,r,!1):e.detachEvent("on"+t,r)},r.supportsHistory=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)},r.supportsGoWithoutReloadUsingHash=function(){return-1===window.navigator.userAgent.indexOf("Firefox")},r.supportsPopstateOnHashchange=function(){return-1===window.navigator.userAgent.indexOf("Trident")}},{}],296:[function(e,t,r){"use strict";r.__esModule=!0,r.canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement)},{}],297:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0,r.locationsAreEqual=r.statesAreEqual=r.createLocation=r.createQuery=void 0;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},i=o(e("invariant")),a=(o(e("warning")),e("./PathUtils")),l=e("./Actions"),u=(r.createQuery=function(e){return n(Object.create(null),e)},r.createLocation=function(){var e=arguments.length<=0||void 0===arguments[0]?"/":arguments[0],t=arguments.length<=1||void 0===arguments[1]?l.POP:arguments[1],r=arguments.length<=2||void 0===arguments[2]?null:arguments[2],e="string"==typeof e?(0,a.parsePath)(e):e;return{pathname:e.pathname||"/",search:e.search||"",hash:e.hash||"",state:e.state,action:t,key:r}},function(e){return"[object Date]"===Object.prototype.toString.call(e)}),d=r.statesAreEqual=function r(t,o){if(t===o)return!0;var e=void 0===t?"undefined":s(t);if(e!==(void 0===o?"undefined":s(o)))return!1;if("function"===e&&(0,i.default)(!1),"object"!==e)return!1;if(u(t)&&u(o)&&(0,i.default)(!1),Array.isArray(t))return Array.isArray(o)&&t.length===o.length&&t.every(function(e,t){return r(e,o[t])});var n=Object.keys(t),e=Object.keys(o);return n.length===e.length&&n.every(function(e){return r(t[e],o[e])})};r.locationsAreEqual=function(e,t){return e.key===t.key&&e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&d(e.state,t.state)}},{"./Actions":291,"./PathUtils":298,invariant:306,warning:309}],298:[function(e,t,r){"use strict";r.__esModule=!0,r.createPath=r.parsePath=r.getQueryStringValueFromPath=r.stripQueryStringValueFromPath=r.addQueryStringValueToPath=void 0;var o,n=e("warning"),s=((o=n)&&o.__esModule,r.addQueryStringValueToPath=function(e,t,r){var o=i(e),n=o.pathname,e=o.search,o=o.hash;return a({pathname:n,search:e+(-1===e.indexOf("?")?"?":"&")+t+"="+r,hash:o})},r.stripQueryStringValueFromPath=function(e,t){var r=i(e),o=r.pathname,e=r.search,r=r.hash;return a({pathname:o,search:e.replace(new RegExp("([?&])"+t+"=[a-zA-Z0-9]+(&?)"),function(e,t,r){return"?"===t?t:r}),hash:r})},r.getQueryStringValueFromPath=function(e,t){t=i(e).search.match(new RegExp("[?&]"+t+"=([a-zA-Z0-9]+)"));return t&&t[1]},function(e){var t=e.match(/^(https?:)?\/\/[^\/]*/);return null==t?e:e.substring(t[0].length)}),i=r.parsePath=function(e){var t=s(e),r="",o="",e=t.indexOf("#");-1!==e&&(o=t.substring(e),t=t.substring(0,e));e=t.indexOf("?");return-1!==e&&(r=t.substring(e),t=t.substring(0,e)),{pathname:t=""===t?"/":t,search:r,hash:o}},a=r.createPath=function(e){if(null==e||"string"==typeof e)return e;var t=e.basename,r=e.pathname,o=e.search,e=e.hash,r=(t||"")+r;return o&&"?"!==o&&(r+=o),e&&(r+=e),r}},{warning:309}],299:[function(e,t,r){"use strict";r.__esModule=!0,r.replaceLocation=r.pushLocation=r.getCurrentLocation=r.go=r.getUserConfirmation=void 0;var o=e("./BrowserProtocol");Object.defineProperty(r,"getUserConfirmation",{enumerable:!0,get:function(){return o.getUserConfirmation}}),Object.defineProperty(r,"go",{enumerable:!0,get:function(){return o.go}});var n=e("./LocationUtils"),s=e("./PathUtils");r.getCurrentLocation=function(){return(0,n.createLocation)(window.location)},r.pushLocation=function(e){return window.location.href=(0,s.createPath)(e),!1},r.replaceLocation=function(e){return window.location.replace((0,s.createPath)(e)),!1}},{"./BrowserProtocol":293,"./LocationUtils":297,"./PathUtils":298}],300:[function(e,t,r){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0;var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},c=n(e("invariant")),p=e("./ExecutionEnvironment"),f=o(e("./BrowserProtocol")),h=o(e("./RefreshProtocol")),_=e("./DOMUtils"),m=n(e("./createHistory"));r.default=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];p.canUseDOM||(0,c.default)(!1);function t(e,t){1==++l&&(u=f.startListener(a.transitionTo));var r=t?a.listenBefore(e):a.listen(e);return function(){r(),0==--l&&u()}}var r=e.forceRefresh||!(0,_.supportsHistory)()?h:f,o=r.getUserConfirmation,n=r.getCurrentLocation,s=r.pushLocation,i=r.replaceLocation,r=r.go,a=(0,m.default)(d({getUserConfirmation:o},e,{getCurrentLocation:n,pushLocation:s,replaceLocation:i,go:r})),l=0,u=void 0;return d({},a,{listenBefore:function(e){return t(e,!0)},listen:function(e){return t(e,!1)}})}},{"./BrowserProtocol":293,"./DOMUtils":295,"./ExecutionEnvironment":296,"./RefreshProtocol":299,"./createHistory":301,invariant:306}],301:[function(e,t,r){"use strict";r.__esModule=!0;var o,g=e("./AsyncUtils"),v=e("./PathUtils"),n=e("./runTransitionHook"),y=(o=n)&&o.__esModule?o:{default:o},b=e("./Actions"),k=e("./LocationUtils");r.default=function(){function n(e){var t=_();(d=e).action===b.PUSH?h=[].concat(h.slice(0,t+1),[d.key]):d.action===b.REPLACE&&(h[t]=d.key),f.forEach(function(e){return e(d)})}function t(r){var o,t;d&&(0,k.locationsAreEqual)(d,r)||c&&(0,k.locationsAreEqual)(c,r)||(o=c=r,t=function(e){var t;c===r&&(c=null,e?(r.action===b.PUSH&&(t=(0,v.createPath)(d),(0,v.createPath)(r)===t&&(0,k.statesAreEqual)(d.state,r.state)&&(r.action=b.REPLACE)),r.action===b.POP?n(r):r.action===b.PUSH?!1!==i(r)&&n(r):r.action===b.REPLACE&&!1!==a(r)&&n(r)):d&&r.action===b.POP&&(e=h.indexOf(d.key),t=h.indexOf(r.key),-1!==e&&-1!==t&&l(e-t)))},(0,g.loopAsync)(p.length,function(e,t,r){(0,y.default)(p[e],o,function(e){return null!=e?r(e):t()})},function(e){s&&"string"==typeof e?s(e,function(e){return t(!1!==e)}):t(!1!==e)}))}function r(e,t){var r=arguments.length<=2||void 0===arguments[2]?m():arguments[2];return(0,k.createLocation)(e,t,r)}var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],o=e.getCurrentLocation,s=e.getUserConfirmation,i=e.pushLocation,a=e.replaceLocation,l=e.go,u=e.keyLength,d=void 0,c=void 0,p=[],f=[],h=[],_=function(){return c&&c.action===b.POP?h.indexOf(c.key):d?h.indexOf(d.key):-1},m=function(){return Math.random().toString(36).substr(2,u||6)};return{getCurrentLocation:o,listenBefore:function(t){return p.push(t),function(){return p=p.filter(function(e){return e!==t})}},listen:function(t){return f.push(t),function(){return f=f.filter(function(e){return e!==t})}},transitionTo:t,push:function(e){return t(r(e,b.PUSH))},replace:function(e){return t(r(e,b.REPLACE))},go:l,goBack:function(){return l(-1)},goForward:function(){return l(1)},createKey:m,createPath:v.createPath,createHref:function(e){return(0,v.createPath)(e)},createLocation:r}}},{"./Actions":291,"./AsyncUtils":292,"./LocationUtils":297,"./PathUtils":298,"./runTransitionHook":303}],302:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},n=(o(e("warning")),e("invariant")),d=o(n),c=e("./LocationUtils"),p=e("./PathUtils"),f=o(e("./createHistory")),h=e("./Actions");r.default=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];Array.isArray(e)?e={entries:e}:"string"==typeof e&&(e={entries:[e]});function t(){var e=n[s],t=(0,p.createPath)(e),r=void 0,o=void 0;return e.key&&(r=e.key,o=l(r)),t=(0,p.parsePath)(t),(0,c.createLocation)(u({},t,{state:o}),void 0,r)}function r(e){return 0<=(e=s+e)&&e<n.length}var o=(0,f.default)(u({},e,{getCurrentLocation:t,pushLocation:function(e){(s+=1)<n.length&&n.splice(s),n.push(e),a(e.key,e.state)},replaceLocation:function(e){n[s]=e,a(e.key,e.state)},go:function(e){e&&r(e)&&(s+=e,e=t(),o.transitionTo(u({},e,{action:h.POP})))}})),e=e,n=e.entries,s=e.current;"string"==typeof n?n=[n]:Array.isArray(n)||(n=["/"]),n=n.map(function(e){return(0,c.createLocation)(e)}),null==s?s=n.length-1:0<=s&&s<n.length||(0,d.default)(!1);var i=n.filter(function(e){return e.state}).reduce(function(e,t){return e[t.key]=t.state,e},{}),a=function(e,t){return i[e]=t},l=function(e){return i[e]};return u({},o,{canGo:r})}},{"./Actions":291,"./LocationUtils":297,"./PathUtils":298,"./createHistory":301,invariant:306,warning:309}],303:[function(e,t,r){"use strict";r.__esModule=!0;var o,n=e("warning"),e=((o=n)&&o.__esModule,function(e,t,r){t=e(t,r);e.length<2&&r(t)});r.default=e},{warning:309}],304:[function(e,t,r){"use strict";r.__esModule=!0;var o,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},n=e("./runTransitionHook"),l=(o=n)&&o.__esModule?o:{default:o},u=e("./PathUtils");r.default=function(t){return function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=t(e),o=e.basename,s=function(e){return e&&(o&&null==e.basename&&(0===e.pathname.indexOf(o)?(e.pathname=e.pathname.substring(o.length),e.basename=o,""===e.pathname&&(e.pathname="/")):e.basename=""),e)},i=function(e){if(!o)return e;var t="string"==typeof e?(0,u.parsePath)(e):e,r=t.pathname,e="/"===o.slice(-1)?o:o+"/",r="/"===r.charAt(0)?r.slice(1):r;return a({},t,{pathname:e+r})};return a({},n,{getCurrentLocation:function(){return s(n.getCurrentLocation())},listenBefore:function(r){return n.listenBefore(function(e,t){return(0,l.default)(r,s(e),t)})},listen:function(t){return n.listen(function(e){return t(s(e))})},push:function(e){return n.push(i(e))},replace:function(e){return n.replace(i(e))},createPath:function(e){return n.createPath(i(e))},createHref:function(e){return n.createHref(i(e))},createLocation:function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return s(n.createLocation.apply(n,[i(e)].concat(r)))}})}}},{"./PathUtils":298,"./runTransitionHook":303}],305:[function(e,t,r){"use strict";r.__esModule=!0;function n(e){return(0,s.stringify)(e).replace(/%20/g,"+")}var o,l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},s=e("query-string"),i=e("./runTransitionHook"),u=(o=i)&&o.__esModule?o:{default:o},d=e("./LocationUtils"),c=e("./PathUtils"),p=s.parse;r.default=function(o){return function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],s=o(e),r=e.stringifyQuery,t=e.parseQueryString;"function"!=typeof r&&(r=n),"function"!=typeof t&&(t=p);var i=function(e){return e&&(null==e.query&&(e.query=t(e.search.substring(1))),e)},a=function(e,t){if(null==t)return e;e="string"==typeof e?(0,c.parsePath)(e):e,t=r(t);return l({},e,{search:t?"?"+t:""})};return l({},s,{getCurrentLocation:function(){return i(s.getCurrentLocation())},listenBefore:function(r){return s.listenBefore(function(e,t){return(0,u.default)(r,i(e),t)})},listen:function(t){return s.listen(function(e){return t(i(e))})},push:function(e){return s.push(a(e,e.query))},replace:function(e){return s.replace(a(e,e.query))},createPath:function(e){return s.createPath(a(e,e.query))},createHref:function(e){return s.createHref(a(e,e.query))},createLocation:function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];var n=s.createLocation.apply(s,[a(e,e.query)].concat(r));return e.query&&(n.query=(0,d.createQuery)(e.query)),i(n)}})}}},{"./LocationUtils":297,"./PathUtils":298,"./runTransitionHook":303,"query-string":307}],306:[function(e,t,r){"use strict";t.exports=function(e,t,r,o,n,s,i,a){var l,u,d;if(!e)throw void 0===t?d=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings."):(l=[r,o,n,s,i,a],u=0,(d=new Error(t.replace(/%s/g,function(){return l[u++]}))).name="Invariant Violation"),d.framesToPop=1,d}},{}],307:[function(e,t,r){"use strict";function i(e,t){return t.encode?(t.strict?o:encodeURIComponent)(e):e}var o=e("strict-uri-encode"),a=e("object-assign");r.extract=function(e){return e.split("?")[1]||""},r.parse=function(e,t){var r=function(e){var o;switch(e.arrayFormat){case"index":return function(e,t,r){return o=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),o?(void 0===r[e]&&(r[e]={}),void(r[e][o[1]]=t)):void(r[e]=t)};case"bracket":return function(e,t,r){return o=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),o?void 0===r[e]?void(r[e]=[t]):void(r[e]=[].concat(r[e],t)):void(r[e]=t)};default:return function(e,t,r){return void 0===r[e]?void(r[e]=t):void(r[e]=[].concat(r[e],t))}}}(t=a({arrayFormat:"none"},t)),o=Object.create(null);return"string"==typeof e&&(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach(function(e){var t=e.replace(/\+/g," ").split("="),e=t.shift(),t=void 0===(t=0<t.length?t.join("="):void 0)?null:decodeURIComponent(t);r(decodeURIComponent(e),t,o)}),Object.keys(o).sort().reduce(function(e,t){var r=o[t];return Boolean(r)&&"object"==typeof r&&!Array.isArray(r)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort(function(e,t){return Number(e)-Number(t)}).map(function(e){return t[e]}):t}(r):e[t]=r,e},Object.create(null))):o},r.stringify=function(o,n){var s=function(o){switch(o.arrayFormat){case"index":return function(e,t,r){return(null===t?[i(e,o),"[",r,"]"]:[i(e,o),"[",i(r,o),"]=",i(t,o)]).join("")};case"bracket":return function(e,t){return null===t?i(e,o):[i(e,o),"[]=",i(t,o)].join("")};default:return function(e,t){return null===t?i(e,o):[i(e,o),"=",i(t,o)].join("")}}}(n=a({encode:!0,strict:!0,arrayFormat:"none"},n));return o?Object.keys(o).sort().map(function(t){var e=o[t];if(void 0===e)return"";if(null===e)return i(t,n);if(Array.isArray(e)){var r=[];return e.slice().forEach(function(e){void 0!==e&&r.push(s(t,e,r.length))}),r.join("&")}return i(t,n)+"="+i(e,n)}).filter(function(e){return 0<e.length}).join("&"):""}},{"object-assign":"object-assign","strict-uri-encode":308}],308:[function(e,t,r){"use strict";t.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}},{}],309:[function(e,t,r){"use strict";t.exports=function(){}},{}]},{},[57]);
