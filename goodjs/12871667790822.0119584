window.bouncex&&bouncex.loaded||function(){function c(e){if(b[e])return b[e].exports;var t=b[e]={i:e,l:!1,exports:{}};return a[e].call(t.exports,t,t.exports,c),t.l=!0,t.exports}var a,b;a=[function(e,t,n){function i(){return Math.floor(Date.now()/1e3)}function o(e){if(!(this&&this instanceof o))return new o(e);if(!e)try{window.top.document&&(e=window.top)}catch(e){}this.window=e||window,this.refresh()}Object.defineProperty(t,"__esModule",{value:!0}),t.getEpochSeconds=i,t.WindowProps=o,t.isBxInternalTraffic=r,t.visitorTestMode=s,t.getTimeMs=c,t.createElement=u,t.getOrSet=d,t.default=void 0,o.prototype={constructor:o,props:null,previous:null,refresh:function(){return this.previous=this.props,this.props=this.getWindowProps(this.window),Object.assign(this,this.props)},getWindowProps:function(e){var t=this.__screenProps(e),e=this.__viewportProps(e,t);return Object.assign({},t,e)},__screenProps:function(e){var t=e.screen||{},n=t.availWidth||e.outerWidth,i=t.availHeight||e.outerHeight,o=n<i,a=e.orientation||(t.orientation||{}).angle||0;return a&&Math.abs(Math.abs(a)-90)<=45&&t.availHeight&&e.outerHeight&&o!=e.outerHeight>e.outerWidth&&(n=t.availHeight,i=t.availWidth),{orientation:(t.orientation||{}).type||t.mozOrientation||t.msOrientation||(n<i?"portrait":"landscape"),screenWidth:n,screenHeight:i}},__viewportProps:function(e,t){var n=e.visualViewport||{},i=e.outerWidth||t.screenWidth,o=e.outerHeight||t.screenHeight,a=n.width||e.innerWidth||e.document.documentElement.clientWidth,r=n.height||e.innerHeight||e.document.documentElement.clientHeight,s=i/a,s=e.devicePixelRatio&&e.devicePixelRatio<=s?e.devicePixelRatio:n.scale||s.toPrecision(2),c=Math.round(a*s),u=Math.round(r*s),d=i-c,n=o-u;n<=0&&(e.toolbar||{}).visible&&(d<=0&&(d=t.screenWidth-c),n=t.screenHeight-u);e=e.pageYOffset||e.document.documentElement.scrollTop;return{outerWidth:i,outerHeight:o,width:a,height:r,clientWidth:c,clientHeight:u,scale:s,thresholdHeight:n,thresholdWidth:d,scrollY:e=e<=0?0:e,scrollPageY:Math.floor(100*e/r)}}};var a={WINDOWS:"Windows",MACOS:"Mac OS"};function r(){return"production"!==bouncex.env||s("office")||s("bxdev")}function s(e){switch(!0){case-1<["office","bxdev","bxtest"].indexOf(e):return!(!bouncex.testmode||!bouncex.testmode[e]);case!(bouncex.testmode&&bouncex.testmode.bxdev):return!1;default:return!!(bouncex.testmode&&bouncex.testmode.bxdev&&bouncex.testmode.bxdev[e])}}function c(){return Date.now()}function u(e,t,n){var i=document.createElement(e);if(void 0!==t)for(var o in t)t.hasOwnProperty(o)&&(o in i?i[o]=t[o]:i.setAttribute(o,t[o]));return void 0!==n&&n.appendChild(i),i}function d(e,t,n){var i=e instanceof Map;if(i?e.has(t):e.hasOwnProperty(t))return i?e.get(t):e[t];if(void 0!==t&&void 0!==n){n="function"==typeof n?n():n;return i?e.set(t,n):e[t]=n,n}}var l={onetimeFunction:function(e){var t,n=0;return function(){return n++?t:t=e.apply(null,arguments)}},addCss:function(e,t,n){var i=document.createElement("style");return n&&(i.id=n+"-style"),i.styleSheet?i.styleSheet.cssText=e:i.innerHTML=e,t.appendChild(i),i},WindowProps:o,getEpochSeconds:i,minExceptZero:function(e){return Math.min.apply(Math,e.filter(Number))},getOS:function(){var e=window.navigator.platform;return-1!==["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(e)?a.MACOS:-1!==["Win32","Win64","Windows","WinCE"].indexOf(e)?a.WINDOWS:null},OS:a,shouldSampleMoatPixel:function e(){var t=bouncex.cookie&&bouncex.cookie.did;if(e.hasOwnProperty("shouldSample"))return e.shouldSample;t=(t?Number(t.slice(-2)):Math.floor(100*Math.random()))<50;return e.shouldSample=t},visitorTestMode:s,isBxInternalTraffic:r,getTimeMs:c,createElement:u,getOrSet:d};t.default=l},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(0),o=(n=n(7))&&n.__esModule?n:{default:n};function a(e){var t;e.shouldLog&&(o.default.addRecord(e),t="%c ",e.type&&(t+="[".concat(e.type.toUpperCase(),"] ")),e.group&&(t+="(".concat(e.group,") ")),e.campaignId&&(t+="(#".concat(e.campaignId,") ")),bouncex.log(t.trim(),"color: #fff; background-color: ".concat(e.color,"; border-radius: 3px; padding: 2px;"),e.message))}function r(e,t){var n,i="string"==typeof e?{message:e}:e;for(n in void 0!==i.shouldLog&&(i.shouldLog=i.shouldLog||t.shouldLog),t)void 0===i[n]&&(i[n]=t[n]);return i}t.default={info:function(e){a(r(e,{shouldLog:(0,i.visitorTestMode)("log"),type:"info",color:"#5d59e8"}))},warn:function(e){a(r(e,{shouldLog:(0,i.visitorTestMode)("log")||(0,i.visitorTestMode)("log:warn"),type:"warn",color:"#dd7300"}))},debug:function(e){a(r(e,{shouldLog:(0,i.visitorTestMode)("log")||(0,i.visitorTestMode)("log:warn"),type:"debug",color:"#9500dd"}))},error:function(e){a(r(e,{shouldLog:(0,i.visitorTestMode)("log")||(0,i.visitorTestMode)("log:warn")||(0,i.visitorTestMode)("log:error"),type:"error",color:"#dd0000"}))}}},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.activate_campaign=activate_campaign,exports.activateInstruments=activateInstruments,exports.activation_funcs=activation_funcs,exports.applyCampaignStyles=applyCampaignStyles,exports.assignDomReferencesToCampaign=assignDomReferencesToCampaign,exports.baddjs=baddjs,exports.bcxReady=bcxReady,exports.behavioralCriteriaComplete=behavioralCriteriaComplete,exports.buildReport=buildReport,exports.cacheCreativeForm=cacheCreativeForm,exports.campaignEligible=campaignEligible,exports.can_init=can_init,exports.can_init_post_cookie=can_init_post_cookie,exports.can_show_ad=can_show_ad,exports.clearBounceCookie=clearBounceCookie,exports.close_ad=close_ad,exports.createIframe=createIframe,exports.Criteria=Criteria,exports.deactivate_campaign=deactivate_campaign,exports.evaluateBehavioralTriggers=evaluateBehavioralTriggers,exports.event_js_eval=event_js_eval,exports.EventListeners=EventListeners,exports.event_stream_report=event_stream_report,exports.fireUserSubmitEvent=fireUserSubmitEvent,exports.getBounceCookieFPLocalStorage=getBounceCookieFPLocalStorage,exports.getBounceCookieLocalStorage=getBounceCookieLocalStorage,exports.getBounceCookieMulti=getBounceCookieMulti,exports.getBounceCookieSingle=getBounceCookieSingle,exports.getBounceVisitFPLocalStorage=getBounceVisitFPLocalStorage,exports.getBounceVisitCookieSingle=getBounceVisitCookieSingle,exports.getCalloutTargets=getCalloutTargets,exports.getParam=getParam,exports.getScript=getScript,exports.getTime2=getTime2,exports.initActivationInstruments=initActivationInstruments,exports.initBa=initBa,exports.initBehavioralCriteriaInstruments=initBehavioralCriteriaInstruments,exports.init_browser=init_browser,exports.init_cookie_functions=init_cookie_functions,exports.init_cookie_localstorage=init_cookie_localstorage,exports.init_endpageview_event=init_endpageview_event,exports.init_event_tracking=init_event_tracking,exports.init_ibx=init_ibx,exports.init_ibx_tracking=init_ibx_tracking,exports.init_page_types=init_page_types,exports.initPreInitCustomJs=initPreInitCustomJs,exports.init_protocol_and_domain=init_protocol_and_domain,exports.init_public_functions=init_public_functions,exports.init_testmode_before_cookie=init_testmode_before_cookie,exports.init_testmode_after_cookie=init_testmode_after_cookie,exports.init_url_and_referrer=init_url_and_referrer,exports.init_visit_cookie=init_visit_cookie,exports.init_website_custom_js=init_website_custom_js,exports.isMissingTarget=isMissingTarget,exports.loadCouponsAndValidateForm=loadCouponsAndValidateForm,exports.loadImages=loadImages,exports.make_include_string=make_include_string,exports.next_sequence_id=next_sequence_id,exports.noteCookieAdShown=noteCookieAdShown,exports.parseJSON=parseJSON,exports.parseSiteElementSelector=parseSiteElementSelector,exports.placeCampaign=placeCampaign,exports.qs=qs,exports.report=report,exports.report_submit=report_submit,exports.setAccessibilityProperties=setAccessibilityProperties,exports.setBounceCookieFPLocalStorage=setBounceCookieFPLocalStorage,exports.setBounceCookieLocalStorage=setBounceCookieLocalStorage,exports.setBounceCookieMulti=setBounceCookieMulti,exports.setBounceCookieSingle=setBounceCookieSingle,exports.setBounceVisitFPLocalStorage=setBounceVisitFPLocalStorage,exports.setBounceVisitCookieSingle=setBounceVisitCookieSingle,exports.setCalloutTarget=setCalloutTarget,exports.setCampaignCalloutTargetToIndex=setCampaignCalloutTargetToIndex,exports.setTimeout2=setTimeout2,exports.setTransitionEffect=setTransitionEffect,exports.show_ad=show_ad,exports.stringify_cookie=stringify_cookie,exports.trigger_ad=trigger_ad,exports.tryCatch=tryCatch,exports.unload_campaign=unload_campaign,exports.updateQS=updateQS,exports.wndorientation=wndorientation,exports.wndsize=wndsize,Object.defineProperty(exports,"Logger",{enumerable:!0,get:function(){return _logger.default}}),Object.defineProperty(exports,"Records",{enumerable:!0,get:function(){return _records.default}}),Object.defineProperty(exports,"visitorTestMode",{enumerable:!0,get:function(){return _helpers.visitorTestMode}}),Object.defineProperty(exports,"isBxInternalTraffic",{enumerable:!0,get:function(){return _helpers.isBxInternalTraffic}}),Object.defineProperty(exports,"getTimeMs",{enumerable:!0,get:function(){return _helpers.getTimeMs}}),exports.TabTalk=exports.SinglePageApp=exports.ReloadCampaigns=exports.perf=exports.NativeCapture=exports.InitSequence=exports.Debug=exports.CustomVariables=exports.CouponCodes=exports.ComplianceChecks=exports.BxInterval=exports.BrowserUtil=exports.BehavioralCriteria=exports.bcx_init=exports.ActiveTime=void 0,__webpack_require__(23);var _recirc=_interopRequireDefault(__webpack_require__(24)),_ads=_interopRequireDefault(__webpack_require__(25)),_bouncex=_interopRequireDefault(__webpack_require__(13)),_logger=_interopRequireDefault(__webpack_require__(1)),_records=_interopRequireDefault(__webpack_require__(7)),_helpers=_interopRequireWildcard(__webpack_require__(0)),_indexeddb=_interopRequireDefault(__webpack_require__(29)),_activationTrigger=_interopRequireDefault(__webpack_require__(30)),_keyboardTrigger=_interopRequireDefault(__webpack_require__(31)),_trafficControl=_interopRequireDefault(__webpack_require__(8)),_cookie=__webpack_require__(19),_creativesBaseStyles=_interopRequireDefault(__webpack_require__(22)),_sms=_interopRequireDefault(__webpack_require__(32)),_xhr=_interopRequireDefault(__webpack_require__(33)),_eventSharingCartridge=_interopRequireDefault(__webpack_require__(34)),_analytics=_interopRequireDefault(__webpack_require__(12)),_phoneNumber=_interopRequireDefault(__webpack_require__(35)),_segmentation=_interopRequireDefault(__webpack_require__(21)),_clientEvent=_interopRequireDefault(__webpack_require__(18)),_multiCookie=_interopRequireDefault(__webpack_require__(20));function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return _getRequireWildcardCache=function(){return e},e}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;if(null===e||"object"!==_typeof(e)&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache();if(t&&t.has(e))return t.get(e);var n,i,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n]);return o.default=e,t&&t.set(e,o),o}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _wrapRegExp(e,t){_wrapRegExp=function(e,t){return new n(e,void 0,t)};var i=_wrapNativeSuper(RegExp),o=RegExp.prototype,a=new WeakMap;function n(e,t,n){t=i.call(this,e,t);return a.set(t,n||a.get(e)),t}function r(n,e){var i=a.get(e);return Object.keys(i).reduce(function(e,t){return e[t]=n[i[t]],e},Object.create(null))}return _inherits(n,i),n.prototype.exec=function(e){e=o.exec.call(this,e);return e&&(e.groups=r(e,this)),e},n.prototype[Symbol.replace]=function(e,t){if("string"==typeof t){var n=a.get(this);return o[Symbol.replace].call(this,e,t.replace(/\$<([^>]+)>/g,function(e,t){return"$"+n[t]}))}if("function"!=typeof t)return o[Symbol.replace].call(this,e,t);var i=this;return o[Symbol.replace].call(this,e,function(){var e=[];return e.push.apply(e,arguments),"object"!==_typeof(e[e.length-1])&&e.push(r(e,i)),t.apply(this,e)})},_wrapRegExp.apply(this,arguments)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _wrapNativeSuper(e){var n="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(e){if(null===e||!_isNativeFunction(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return _construct(e,arguments,_getPrototypeOf(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(t,e)})(e)}function _construct(e,t,n){return(_construct=_isNativeReflectConstruct()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);i=new(Function.bind.apply(e,i));return n&&_setPrototypeOf(i,n.prototype),i}).apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}}function _isNativeFunction(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}bouncex=new _bouncex.default(bouncex),bouncex.version="smart-tag-20210608.01",bouncex.gbi2=_ads.default,bouncex.recirc=_recirc.default,bouncex.sms=_sms.default,bouncex.indexdb=new _indexeddb.default(window.indexedDB,loadVisitsFromDb),bouncex.seg=_segmentation.default,bouncex.clientEvents=_clientEvent.default;var InitSequence={status:{preInit1Ready:!1,startedInit1:!1,init1Complete:!1},preInit1:{entry:function(){setTimeout(function(){init_browser(),can_init()&&(init_public_functions(),Debug.initErrorHandling(),init_protocol_and_domain(),init_url_and_referrer(),init_testmode_before_cookie(),ComplianceChecks.init(),(0,_cookie.init_cookie_check)(),init_cookie_functions(),init_visit_cookie(),bouncex.local_storage_enabled||bouncex.local_storage_initialized||setTimeout(function(){InitSequence.preInit1.cookieReady()},0),loadVisitsFromDb(),init_dash())},0)},cookieReady:function(){can_init_post_cookie()&&(init_cookie(),bouncex.cookieReady=!0,InitSequence.preInit1.postCookieFunctions(),InitSequence.preInit1.integrations(),InitSequence.init1.setStatus("preInitReady"),setTimeout(function(){InitSequence.init1.serviceReady("preInit")},0))},postCookieFunctions:function(){init_ibx(),initBa(),initPushedData(),"object"===_typeof(window.bxconv)&&report_conversion_sync(window.bxconv),init_testmode_after_cookie(),initAds()},integrations:function(){initPreInitCustomJs(),ReloadCampaigns.init(),BxInterval.init(),SinglePageApp.init(),init_page_types(),CustomVariables.init()}},init1:{serviceReady:function(e){this.log("service ready: "+e),this.isReadyToRequest()&&(InitSequence.status.startedInit1||(this.setStatus("requesting"),this._request()))},isReadyToRequest:function(){if(!ComplianceChecks.compliancePassed)return this.log("compliance check not ready",!0),!1;if(!InitSequence.status.preInit1Ready)return this.log("pre-init not ready",!0),!1;if(bouncex.website.bxidLoadFirst&&(!bouncex.dg||!bouncex.dg.softID))return this.log("bxid not ready",!0),!1;var e=window.bxgraph&&bouncex.website.dge&&bouncex.website.pde,t=bouncex.cookie&&bouncex.cookie.dgFirstLoad;return!(e&&!t&&(this.log("Init1 request deferred: prospect detector enabled",!0),1))},_request:function(){bcxReady(function(){bouncex.updateBounceCookie(),baddjs(make_include_string()),perf.times("init1request")})},setStatus:function(e){switch(perf.times("setStatus ".concat(e)),e){case"preInitReady":this.log("pre-init ready"),InitSequence.status.preInit1Ready=!0;break;case"requesting":this.log("requesting"),InitSequence.status.startedInit1=!0;break;case"complete":this.log("complete"),InitSequence.status.init1Complete=!0}},log:function(e,t){InitSequence.log("init1",e,t)}},postInit1:{entry:function(){if(perf.times("postInit1 entry"),InitSequence.status.init1Complete||InitSequence.init1.setStatus("complete"),!InitSequence.postInit1.pageReady())return setTimeout2(function(){InitSequence.postInit1.entry()},100),!1;perf.times("init1"),bouncex.state.no_kinesis&&InitSequence.postInit1.report(),InitSequence.postInit1.publicAssignments(),InitSequence.postInit1.editCookie(),InitSequence.postInit1.preCampaignFunctions(),InitSequence.postInit1.integrations(),InitSequence.postInit1.loadCampaigns(),bouncex.bcxReady(function(){"function"==typeof window.bxAsyncInit&&window.bxAsyncInit()})},report:function(){if(bouncex.state.newvid){bouncex.indexdb.isSupported()&&bouncex.indexdb.addVisit(getTime2(),function(e){loadVisitsFromDb()});var e,t=bouncex.wndsize(),n={"visit:useragent":navigator.userAgent,"visit:referrer":bouncex.cookie.r,"visit:landingpageurl":bouncex.cookie.lp,"visit:resolutionx":t.width,"visit:resolutiony":t.height,"visit:customvariables":bouncex.varsToAPI,"visit:cookie":JSON.stringify(Object.assign({},bouncex.cookie,{v:{}})),"useragent:browser":bouncex.state.device.browser,"useragent:version":bouncex.state.device.version,"useragent:platform":bouncex.state.device.platform,"useragent:devicetype":bouncex.state.device.device_type,"customer:hasconverted":bouncex.vars.has_converted||bouncex.cookie.lc?1:0},i=["country_code","country_code3","country_name","city","postal_code","continent_code","region","region_name"];for(e in bouncex.state.geo)bouncex.state.geo.hasOwnProperty(e)&&-1<i.indexOf(e)&&bouncex.state.geo[e]&&(n["geo:"+e.replace("_","")]=bouncex.state.geo[e]);event_stream_report("visit",n)}event_stream_report("pageview",n={"pageview:url":decodeURIComponent(bouncex.calling_url),"pageview:customvariables":bouncex.varsToAPI,"pageview:cookiesize":JSON.stringify(bouncex.cookie).length})},pageReady:function(){return!(!jQueryIsAvailable()||(InitSequence.postInit1.setupPage(),!bouncex.body||!bouncex.body.length))},setupPage:function(){bouncex.window=jQuery(window).eq(0),bouncex.document=jQuery(document).eq(0),bouncex.body=jQuery("body").eq(0),bouncex.head=jQuery("head").eq(0),bouncex.html=jQuery("html").eq(0),bouncex.pa=0},publicAssignments:function(){bouncex.direction="up",bouncex.events={},bouncex.triggers_filled={},bouncex.overlay_visible=!1,bouncex.server_client_time_diff=bouncex.state.tn-parseInt((0,_helpers.getTimeMs)()/1e3),0<bouncex.cookie.as&&0==window.document.title.length&&(window.document.title=window.location.hostname),init_post_campaign_public_function(),bouncex.timespaced=!1},editCookie:function(){if(bouncex.cookie.v)for(var e in bouncex.cookie.v)bouncex.vars[e]&&bouncex.setv(e,bouncex.cookie.v[e]);clearBounceCookie("multi_cookie"==bouncex.website.ct||"fp_local_storage"==bouncex.website.ct),bouncex.setBounceCookie()},preCampaignFunctions:function(){bouncex.website.dge&&bouncex.dg.init(),gbi2Enabled()&&bouncex.gbi2.syncUsers(),shouldCheckDfp()&&bouncex.gbi2.initDfp(),bouncex.seg.init(),bouncex.ca=activation_funcs(),bouncex.ibx._init(),bouncex.sms.init(),init_endpageview_event()},integrations:function(){init_ibx_tracking(),init_event_tracking(),init_website_custom_js()},loadCampaigns:function(){bouncex.campaigns?(bouncex.loadBounceCss(function(){bouncex.loadBrandStyles(),init_activation_funcs()}),bouncex.loadWebfonts()):bouncex.usd&&unhideSite()}},dynamic:{tearDown:function(){if(bouncex.campaigns)for(var e in bouncex.campaigns)bouncex.campaigns.hasOwnProperty(e)&&bouncex.destroy_ad(e);CustomVariables.clearAll(),BxInterval.clearTasks()},startUp:function(){init_url_and_referrer(),incrementPageView(),loadVisitsFromDb(),InitSequence.preInit1.integrations(),InitSequence.postInit1.report(),InitSequence.postInit1.setupPage(),InitSequence.postInit1.integrations()}},log:function(e,t,n){t={group:"init",message:e+"-"+t};n?_logger.default.error(t):_logger.default.info(t)}};function incrementPageView(){bouncex.updateBounceCookie(function(e){e.vpv++,bouncex.state.pvid=e.vpv})}function jQueryIsAvailable(){return"undefined"!=typeof jQuery&&void 0!==jQuery.fn}function init_protocol_and_domain(){bouncex.sau="https://"+bouncex.website.bau,-1!==bouncex.website.beu.indexOf("127.0.0.1")?bouncex.seu="http://"+bouncex.website.beu:bouncex.seu="https://"+bouncex.website.beu,bouncex.au="https://"+bouncex.website.bau,bouncex.eu="https://"+bouncex.website.beu}function init_url_and_referrer(){bouncex.referrer=bouncex.utils.url.formatReferrer(document.referrer),bouncex.calling_url=encodeURIComponent(window.location.href),bouncex.cookie_domain=!1,"bind_to_domain"!=bouncex.website.ct&&"multi_cookie"!=bouncex.website.ct&&"fp_local_storage"!=bouncex.website.ct||0<bouncex.calling_url.indexOf(bouncex.website.domain.toLowerCase())&&(bouncex.cookie_domain=bouncex.website.domain)}function init_dash(){bouncex.eventLog=[],sessionStorage&&sessionStorage.getItem("bxDashUrl")&&baddjs(window.location.protocol+"//dash-staging.bounceexchange.com/client.js")}function init_testmode_before_cookie(){bouncex.testmode={bxdev:determineTestModeFromUrl()}}function determineTestModeFromUrl(){if(-1===bouncex.calling_url.indexOf("bxdev"))return!1;var e=bouncex.utils.getParam("bxdev").toLowerCase();if("off"===e)return!1;var n=["cvars","events","page_types","campaign_js","spa","coupons","log","log:error","log:warn","log:debug"];if(""===e||"all"===e)return n.reduce(function(e,t){return e[t]=!0,e},{});e=e.split(",").reduce(function(e,t){return-1<n.indexOf(t)&&(e[t]=!0),e},{});return 0!==Object.keys(e).length&&e}function init_testmode_after_cookie(){bouncex.updateBounceCookie(function(e){bouncex.testmode.bxtest=e.hcs_bxtest||-1!==bouncex.calling_url.indexOf("bxtest"),-1===bouncex.calling_url.indexOf("bxdev")?bouncex.testmode.bxdev=e.bxdev||!1:bouncex.testmode.bxdev?e.bxdev=bouncex.testmode.bxdev:delete e.bxdev})}function sanitizeMetadata(e,t,n){var i,o,a,r={};for(i in n=n||[],t)t.hasOwnProperty(i)&&(-1===(o=i.trim().toLowerCase()).indexOf(":")&&-1===n.indexOf(o)&&(o=e+":"+o),"string"==typeof(a=t[i])&&(a=a.trim()),r[o]=a);return r}function pushItemEvent(e,t){var n=sanitizeMetadata(e,t);1==bouncex.website.ete?bouncex.et.item.validate(n)&&(bouncex.et.item.requireImageLoad&&n["item:imageurl"]?((t=new Image).onload=function(){event_stream_report(e,n)},t.src=n["item:imageurl"]):event_stream_report(e,n)):event_stream_report(e,n)}function pushRequestemailEvent(e,t){bouncex.carbTrap||(t=sanitizeMetadata(e,t,["email","campaignid","parentcampaignid"])).campaignid&&t.email&&bouncex.utils.validate.email(t.email)&&(t["user:email"]=t.email,event_stream_report(e,t))}function pushRequestpushEvent(e,t){t=sanitizeMetadata(e,t,["campaignid","parentcampaignid"]);t.campaignid&&event_stream_report(e,t)}function pushRequestsendEvent(e,t){t=sanitizeMetadata(e,t,["campaignid","parentcampaignid","fcmtoken","channel","campaign_data","source"]);t.campaignid&&event_stream_report(e,t)}function pushUserEvent(e,t){(t.email||t.emailHash||t.phone||t.forceUserEvent)&&(t.email&&!bouncex.utils.validate.email(t.email)||(bouncex.updateBounceCookie(function(e){e.uid=1}),t["user:gcr"]=bouncex.cookie?bouncex.cookie.gcr:99,t.agent="js",t.eq=1,event_stream_report(e,sanitizeMetadata(e,t,["agent","eq","campaignid"]))))}function processPushedData(e,t){t=t||{};var n,i,o=e.trim().toLowerCase();"conversion"==o?report_conversion_sync(t,"pushdata"):"bx-load-hide"==o?bouncex.usd=t:"item"===o?pushItemEvent(o,t):"view item"===o&&bouncex.website.osre?(n=t["item:id"],i=sanitizeMetadata(o,t),n&&(bouncex.osr.viewItemId=n,Object.keys(bouncex.campaigns||{}).forEach(function(e){void 0===bouncex.campaigns[e].osr_params_json&&bouncex.campaigns[e].isr_params_json&&(bouncex.campaigns[e].osr_params_json=bouncex.campaigns[e].isr_params_json),bouncex.campaigns[e].osr_params_json&&bouncex.campaigns[e].osr_params_json.length&&bouncex.osr.init(e,n)})),event_stream_report(o,i)):"requestemail"==e?pushRequestemailEvent(o,t):"requestpush"==e?pushRequestpushEvent(o,t):"requestsend"==e?pushRequestsendEvent(o,t):"user"==e?pushUserEvent(o,t):event_stream_report(o,i=sanitizeMetadata(o,t))}function initPushedData(){for(var e=bouncex.pushedData.length,t=0;t<e;t++)processPushedData(bouncex.pushedData[t][0],bouncex.pushedData[t][1]);bouncex.pushedData=[]}function can_init_post_cookie(){return!bouncex.gdpr_opt_out}function can_init(){if(document.visibilityState&&"prerender"===document.visibilityState){var e=tryCatch(function(){"prerender"!==document.visibilityState&&(removeEvent(document,"visibilitychange",e),bcx_init())});return addEvent(document,"visibilitychange",e),!(bouncex.prerendered=!0)}if(bouncex.baddjs)return!1;if(!JSON.parse)return!1;if(!window.postMessage)return!1;if(!bouncex.website.ei&&window!=window.top)return!1;if(!areCookiesEnabled())return!1;if(bouncex.browser.prerenderio)return!1;if(bouncex.browser.msie&&bouncex.browser.msie<11)return!1;if(bouncex.website.burls.length)for(var t in bouncex.website.burls)if(bouncex.website.burls.hasOwnProperty(t)){t=bouncex.website.burls[t];if(-1!=t.prop.indexOf("contains")){var n=window.location.href.indexOf(t.val);if("contains"==t.prop&&-1!=n||"not_contains"==t.prop&&-1==n)return!1}else if(-1!=t.prop.indexOf("regex_match")){n=new RegExp(t.val,"gi").test(window.location.href);if("regex_match"==t.prop&&n||"not_regex_match"==t.prop&&!n)return!1}}return!("fp_local_storage"===bouncex.website.ct&&!fpLocalStorageAvailable())}function init_visit_cookie(){var e;bouncex.gdpr_opt_out||((e=getBounceVisitCookie())&&(bouncex.visit_cookie=bouncex.parseJSON(e),bouncex.visit_cookie.ex&&(new Date).getTime()>bouncex.visit_cookie.ex&&(bouncex.visit_cookie=!1)),bouncex.visit_cookie?!bouncex.visit_cookie.ueh&&getParam("ueh")&&bouncex.updateBounceVisitCookie(function(e){e.ueh=getParam("ueh")}):(bouncex.visit_cookie={},bouncex.visit_cookie.lp=bouncex.calling_url.substring(0,500).replace(/\+/g,"%2B").replace(/\%[A-F0-9]?[^A-F0-9]/,""),bouncex.visit_cookie.r=bouncex.referrer,bouncex.visit_cookie.ueh=getParam("ueh")||void 0,setBounceVisitCookie()))}function init_cookie(){var e;bouncex.gdpr_opt_out||(bouncex.cookie=getBounceCookie(),bouncex.cookie.vid||("fp_local_storage"==bouncex.website.ct?bouncex.cookie=getBounceCookieSingle():bouncex.cookie=getBounceCookieFPLocalStorage(),bouncex.cookie.vid&&setBounceCookie()),"fp_local_storage"==bouncex.website.ct&&(e=tryCatch(function(e){e.key==bouncex.website.cookie_name&&e.newValue&&(bouncex.cookie=bouncex.getBounceCookie())}),addEvent(window,"storage",e,!1)),assignCookieDGids())}function assignCookieDGids(){bouncex.updateBounceCookie(function(e){bouncex.website.dge&&e&&bouncex.dg&&(!bouncex.dg.hardID||e.hardID===bouncex.dg.hardID&&e.softID===bouncex.dg.softID?!bouncex.dg.hardID&&e.hardID&&(bouncex.dg.hardID=e.hardID,bouncex.dg.softID=e.softID):(e.hardID=bouncex.dg.hardID,e.softID=bouncex.dg.softID))})}function init_cookie_functions(){var f,n,i,o;bouncex.local_storage_enabled?(window.setBounceCookie=bouncex.setBounceCookie=setBounceCookieLocalStorage,window.getBounceCookie=bouncex.getBounceCookie=getBounceCookieLocalStorage,init_cookie_localstorage()):"multi_cookie"===bouncex.website.ct?(window.MultiCookie=_multiCookie.default,window.setBounceCookie=bouncex.setBounceCookie=setBounceCookieMulti,window.getBounceCookie=bouncex.getBounceCookie=getBounceCookieMulti):"fp_local_storage"===bouncex.website.ct?(window.setBounceCookie=bouncex.setBounceCookie=setBounceCookieFPLocalStorage,window.getBounceCookie=bouncex.getBounceCookie=getBounceCookieFPLocalStorage):(window.setBounceCookie=bouncex.setBounceCookie=setBounceCookieSingle,window.getBounceCookie=bouncex.getBounceCookie=getBounceCookieSingle),"fp_local_storage"===bouncex.website.ct?(window.setBounceVisitCookie=bouncex.setBounceVisitCookie=setBounceVisitFPLocalStorage,window.getBounceVisitCookie=bouncex.getBounceVisitCookie=getBounceVisitFPLocalStorage):(window.setBounceVisitCookie=bouncex.setBounceVisitCookie=setBounceVisitCookieSingle,window.getBounceVisitCookie=bouncex.getBounceVisitCookie=getBounceVisitCookieSingle),window.clearBounceCookie=clearBounceCookie,bouncex.stringify_cookie=stringify_cookie,bouncex.lz=bouncex.lz||(f=String.fromCharCode,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",i={},o={compressToURI:function(e){return null==e?"":o._compress(e,6,function(e){return n.charAt(e)})},decompressFromURI:function(t){if(null==t)return"";if(""==t)return null;try{return t=t.replace(/ /g,"+"),o._decompress(t.length,32,function(e){return function(e,t){if(!i[e]){i[e]={};for(var n=0;n<e.length;n++)i[e][e.charAt(n)]=n}return i[e][t]}(n,t.charAt(e))})}catch(e){return bouncex.err(e,{source:"decompressFromURI"}),""}},compress:function(e){return o._compress(e,16,function(e){return f(e)})},_compress:function(e,t,n){if(null==e)return"";for(var i,o,a,r,s={},c={},u="",d=2,l=3,p=2,b=[],g=0,m=0,h=0;h<e.length;h+=1)if(a=e.charAt(h),Object.prototype.hasOwnProperty.call(s,a)||(s[a]=l++,c[a]=!0),r=u+a,Object.prototype.hasOwnProperty.call(s,r))u=r;else{if(Object.prototype.hasOwnProperty.call(c,u)){if(u.charCodeAt(0)<256){for(i=0;i<p;i++)g<<=1,m==t-1?(m=0,b.push(n(g)),g=0):m++;for(o=u.charCodeAt(0),i=0;i<8;i++)g=g<<1|1&o,m==t-1?(m=0,b.push(n(g)),g=0):m++,o>>=1}else{for(o=1,i=0;i<p;i++)g=g<<1|o,m==t-1?(m=0,b.push(n(g)),g=0):m++,o=0;for(o=u.charCodeAt(0),i=0;i<16;i++)g=g<<1|1&o,m==t-1?(m=0,b.push(n(g)),g=0):m++,o>>=1}0==--d&&(d=Math.pow(2,p),p++),delete c[u]}else for(o=s[u],i=0;i<p;i++)g=g<<1|1&o,m==t-1?(m=0,b.push(n(g)),g=0):m++,o>>=1;0==--d&&(d=Math.pow(2,p),p++),s[r]=l++,u=String(a)}if(""!==u){if(Object.prototype.hasOwnProperty.call(c,u)){if(u.charCodeAt(0)<256){for(i=0;i<p;i++)g<<=1,m==t-1?(m=0,b.push(n(g)),g=0):m++;for(o=u.charCodeAt(0),i=0;i<8;i++)g=g<<1|1&o,m==t-1?(m=0,b.push(n(g)),g=0):m++,o>>=1}else{for(o=1,i=0;i<p;i++)g=g<<1|o,m==t-1?(m=0,b.push(n(g)),g=0):m++,o=0;for(o=u.charCodeAt(0),i=0;i<16;i++)g=g<<1|1&o,m==t-1?(m=0,b.push(n(g)),g=0):m++,o>>=1}0==--d&&(d=Math.pow(2,p),p++),delete c[u]}else for(o=s[u],i=0;i<p;i++)g=g<<1|1&o,m==t-1?(m=0,b.push(n(g)),g=0):m++,o>>=1;0==--d&&(d=Math.pow(2,p),p++)}for(o=2,i=0;i<p;i++)g=g<<1|1&o,m==t-1?(m=0,b.push(n(g)),g=0):m++,o>>=1;for(;;){if(g<<=1,m==t-1){b.push(n(g));break}m++}return b.join("")},decompress:function(t){return null==t?"":""==t?null:o._decompress(t.length,32768,function(e){return t.charCodeAt(e)})},_decompress:function(e,t,n){for(var i,o,a,r,s,c,u=[],d=4,l=4,p=3,b="",g=[],m={val:n(0),position:t,index:1},h=0;h<3;h+=1)u[h]=h;for(o=0,r=Math.pow(2,2),s=1;s!=r;)a=m.val&m.position,m.position>>=1,0==m.position&&(m.position=t,m.val=n(m.index++)),o|=(0<a?1:0)*s,s<<=1;switch(o){case 0:for(o=0,r=Math.pow(2,8),s=1;s!=r;)a=m.val&m.position,m.position>>=1,0==m.position&&(m.position=t,m.val=n(m.index++)),o|=(0<a?1:0)*s,s<<=1;c=f(o);break;case 1:for(o=0,r=Math.pow(2,16),s=1;s!=r;)a=m.val&m.position,m.position>>=1,0==m.position&&(m.position=t,m.val=n(m.index++)),o|=(0<a?1:0)*s,s<<=1;c=f(o);break;case 2:return""}for(i=u[3]=c,g.push(c);;){if(m.index>e)return"";for(o=0,r=Math.pow(2,p),s=1;s!=r;)a=m.val&m.position,m.position>>=1,0==m.position&&(m.position=t,m.val=n(m.index++)),o|=(0<a?1:0)*s,s<<=1;switch(c=o){case 0:for(o=0,r=Math.pow(2,8),s=1;s!=r;)a=m.val&m.position,m.position>>=1,0==m.position&&(m.position=t,m.val=n(m.index++)),o|=(0<a?1:0)*s,s<<=1;u[l++]=f(o),c=l-1,d--;break;case 1:for(o=0,r=Math.pow(2,16),s=1;s!=r;)a=m.val&m.position,m.position>>=1,0==m.position&&(m.position=t,m.val=n(m.index++)),o|=(0<a?1:0)*s,s<<=1;u[l++]=f(o),c=l-1,d--;break;case 2:return g.join("")}if(0==d&&(d=Math.pow(2,p),p++),u[c])b=u[c];else{if(c!==l)return null;b=i+i.charAt(0)}g.push(b),u[l++]=i+b.charAt(0),i=b,0==--d&&(d=Math.pow(2,p),p++)}}})}function setLocalStorageCookie(e){e=bouncex.parseJSON(decodeURIComponent(e));e&&e[bouncex.website.id]?(bouncex.cookies=e,bouncex.cookie=e[bouncex.website.id]):e&&e.vpv?(bouncex.cookie=e,bouncex.cookies[bouncex.website.id]=bouncex.cookie):(e[bouncex.website.id]={},bouncex.cookies=e)}function localStorageFrameSuccess(){var e=tryCatch(function(e){var t;e.origin=="https://"+bouncex.website.biu&&"string"==typeof e.data&&(-1<(t=e.data).indexOf("gdpr_opt_out")&&(bouncex.gdpr_opt_out=!0),"third_party_cookies_disabled"==t?localStorageFail():t.indexOf("bcx_message=true")<0&&(e=e.data,bouncex.local_storage_initialized?setLocalStorageCookie(e):(bouncex.local_storage_initialized=!0,bouncex.cookie={},bouncex.cookies={},e?setLocalStorageCookie(e):("multi_cookie"==bouncex.website.ct?bouncex.cookie=getBounceCookieMulti():bouncex.cookie=getBounceCookieSingle(),clearBounceCookie(!0)),setTimeout(function(){InitSequence.preInit1.cookieReady()},0))))});addEvent(window,"message",e)}function loadVisitsFromDb(){bouncex.indexdb.isSupported()&&bouncex.indexdb.getVisitsAsHoursAgoArray(0,getTime2(),function(e){bouncex.visitsHistoryAsHoursAgo=e})}function addLocalStorageFrame(){try{document.body.appendChild(bouncex.local_storage_frame),localStorageFrameSuccess()}catch(e){setTimeout2(localStorageFail,0)}}function localStorageFail(){bouncex.local_storage_enabled=!1,init_cookie_functions(),bouncex.local_storage_initialized||(bouncex.local_storage_initialized=!0,setTimeout(function(){InitSequence.preInit1.cookieReady()},0))}function init_cookie_localstorage(){var e,t;bouncex.gdpr_opt_out||(e="https://"+bouncex.website.biu+"/assets/bounce/local_storage_frame16.min.html#"+bouncex.website.id+(bouncex.website.swids?"&"+bouncex.website.swids:""),bouncex.local_storage_frame=document.createElement("IFRAME"),bouncex.local_storage_frame.style.display="none",bouncex.local_storage_frame.setAttribute("id","bcx_local_storage_frame"),bouncex.local_storage_frame.setAttribute("src",e),bouncex.local_storage_frame.setAttribute("title","empty"),ComplianceChecks._finished&&document.body?addLocalStorageFrame():t=setInterval2(function(){ComplianceChecks._finished&&document.body&&(clearTimeout(t),ComplianceChecks.compliancePassed&&addLocalStorageFrame())},100))}function init_public_functions(){var e;window.console||(window.console={log:function(){return{}}}),bouncex.setv=bouncex.setVar=CustomVariables.setVar.bind(CustomVariables),bouncex.setVarAndReload=CustomVariables.setVarAndReload.bind(CustomVariables),bouncex.getVar=CustomVariables.getVar.bind(CustomVariables),bouncex.perf=perf,bouncex.loadBounceCss=loadBounceCss,bouncex.updateQS=updateQS,bouncex.make_include_string=make_include_string,bouncex.baddjs=baddjs,bouncex.wndsize=wndsize,bouncex.init=InitSequence.postInit1.entry,bouncex.bcxReady=bcxReady,bouncex.stringify=stringify,bouncex.parseJSON=parseJSON,bouncex.addCss=_helpers.default.addCss,bouncex.createIframe=createIframe,bouncex.unload_campaigns=unload_campaigns,bouncex.unload_campaign=unload_campaign,bouncex.reload_campaigns=window.reload_campaigns=ReloadCampaigns.addRequest.bind(ReloadCampaigns),bouncex.dynamicPageChange=SinglePageApp.dynamicPageChange,bouncex.nextStep=nextStep,bouncex.submitCampaignStep=submitCampaignStep,bouncex.setJumpStep=setJumpStep,bouncex.placeCampaign=placeCampaign,bouncex.alignCampaign=alignCampaign,bouncex.destroyAll=destroyAll,bouncex.passiveEventRegistry={},"window"in(e=window)&&"document"in e&&("atob"in e&&"btoa"in e||(e.atob=function(e){var t=0,n=[],i=0,o=0;if(1==(e=0==(e=(e=String(e)).replace(/\s/g,"")).length%4?e.replace(/=+$/,""):e).length%4)throw Error("InvalidCharacterError");if(/[^+/0-9A-Za-z]/.test(e))throw Error("InvalidCharacterError");for(;t<e.length;)i=i<<6|"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(t)),24===(o+=6)&&(n.push(String.fromCharCode(i>>16&255)),n.push(String.fromCharCode(i>>8&255)),n.push(String.fromCharCode(255&i)),i=o=0),t+=1;return 12===o?n.push(String.fromCharCode(i>>4&255)):18===o&&(i>>=2,n.push(String.fromCharCode(i>>8&255)),n.push(String.fromCharCode(255&i))),n.join("")},e.btoa=function(e){e=String(e);var t,n,i,o,a=0,r=[];if(/[^\x00-\xFF]/.test(e))throw Error("InvalidCharacterError");for(;a<e.length;)o=(t=e.charCodeAt(a++))>>2,t=(3&t)<<4|(n=e.charCodeAt(a++))>>4,n=(15&n)<<2|(i=e.charCodeAt(a++))>>6,i&=63,a===e.length+2?i=n=64:a===e.length+1&&(i=64),r.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(o),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(n),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(i));return r.join("")})),bouncex.repressCampaigns=repressCampaigns,bouncex.isGbi2Campaign=isGbi2Campaign,bouncex.isBxPlayerCampaign=isBxPlayerCampaign}function init_browser(){var e,t=navigator.userAgent;bouncex.browser={},bouncex.browser.webkit=/WebKit/.test(t),bouncex.browser.firefox=/Firefox/.test(t),bouncex.browser.msie=/Trident\/7\.|MSIE/.test(t),bouncex.browser.opera=/Opera|OPR\//.test(t),bouncex.browser.msie&&0<t.indexOf("MSIE")&&(bouncex.browser.msie=parseInt(t.split("MSIE")[1])),bouncex.browser.msie&&0<t.indexOf("rv:")&&(bouncex.browser.msie=parseInt(t.split("rv:")[1])),bouncex.browser.edge=/Edge/.test(t),bouncex.browser.edge&&(bouncex.browser.edge=parseInt(t.split("Edge/")[1])),bouncex.browser.android=t.match(/\bAndroid( [\d.]+)?/),bouncex.browser.android&&(bouncex.browser.android=parseFloat(bouncex.browser.android[1])||!0),bouncex.browser.prerenderio=-1<t.indexOf("Prerender"),bouncex.browser.iphone=-1<t.indexOf("iPhone"),bouncex.browser.ipad=-1<t.indexOf("iPad"),bouncex.browser.ios8=!1,bouncex.browser.ios9=!1,bouncex.browser.ios=!1,bouncex.browser.iphone||bouncex.browser.ipad?(bouncex.browser.ios=parseInt(t.split("Version/")[1]),bouncex.browser.ios9=9===bouncex.browser.ios,bouncex.browser.ios8=8===bouncex.browser.ios,bouncex.browser.chrome=/CriOS/.test(t),bouncex.browser.chrome&&(e=t.match(_wrapRegExp(/iPhone[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]OS[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]([0-9]{0,2})/,{version:1})),bouncex.browser.ios=!!e&&parseInt(e.groups.version))):bouncex.browser.chrome=/Chrome/.test(t),bouncex.browser.safari=!(-1==t.indexOf("Safari")||-1!=t.indexOf("Chrome")),bouncex.browser.safari&&0<t.indexOf("Version/")&&(bouncex.browser.safari=parseInt(t.split("Version/")[1].replace(".",""))),bouncex.browser.chrome&&0<t.indexOf("Chrome/")&&(bouncex.browser.chrome=parseInt(t.split("Chrome/")[1])),bouncex.browser.firefox&&0<t.indexOf("Firefox/")&&(bouncex.browser.firefox=parseInt(t.split("Firefox/")[1])),bouncex.ssl="https:"==window.location.protocol}function init_post_campaign_public_function(){bouncex.setBounceCookie=function(){setBounceCookie()},bouncex.initActivationFuncs=function(){init_activation_funcs()},bouncex.contains=!jQuery.contains||-1!=jQuery().jquery.indexOf("1.4.")||-1<jQuery().jquery.indexOf("1.8.")?eval("document.contains||document.compareDocumentPosition?function(a,b){var adown=a.nodeType===9?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!!(bup&&bup.nodeType===1&&(adown.contains?adown.contains(bup):a.compareDocumentPosition&&a.compareDocumentPosition(bup)&16))}:function(a,b){if(b){while((b=b.parentNode)){if(b===a){return true}}}return false};"):jQuery.contains,bouncex.close_ad=function(e,t,n){close_ad(e,t,n)},bouncex.report=function(e,t,n){if(bouncex.campaigns[e])return report(e,t,n)},bouncex.report_submit=function(e,t,n){return report_submit(e,t,n)},bouncex.report_ga=function(e,t,n){report_ga(e,t,n)},bouncex.report_conversion=function(e,t){report_conversion(e,t)},window.close_bouncex_ad=close_ad,bouncex.fs=fs,bouncex.by_parent_id=function(e){return by_parent_id(e)},bouncex.show_ad=function(e){trigger_ad("manual",e)},bouncex.align_callout=align_callout_public,bouncex.destroy_ad=destroy_ad,bouncex.unload_campaigns=unload_campaigns,bouncex.reload_campaigns=ReloadCampaigns.addRequest.bind(ReloadCampaigns),bouncex.reportGa=reportGa,bouncex.loadBrandStyles=loadBrandStyles,bouncex.loadWebfonts=loadWebfonts,bouncex.activate_campaign=activate_campaign}function initBa(){bouncex.website.ba.enabled&&(bouncex.ba={fbel:[],fbrc:0,fbto:null,lip:{}})}function init_ibx(){bouncex.ibx={wsid:bouncex.website.id,_event_store:[],_item_store:[],uid:null,crt:null,token:null,mode:1,cvar:{},_init:function(){this.vid=bouncex.cookie.vid,this.token=bouncex.cookie.did,this.uid=this._get("user"),this.mode=this._get("mode"),this.crt=this._get("cart"),this._cart("set"),this._clkthrough(),this._espemailid(),this._emailhash(),this._log("initialized"),this._log("mode: "+this.mode+" | token: "+this.token)},user:function(e,t){var n;this._validate(e)?(bouncex.updateBounceCookie(function(e){e.uid=1}),(n=this._cart("get"))&&((t=t||{}).__cart=n),this._push("user",{key:e,val:t}),(n={})["user:email"]=e,n["user:source"]=t.__src,n["user:gcr"]=bouncex&&bouncex.cookie?bouncex.cookie.gcr:99,n.agent="js",t.campaign&&(n.campaignid=t.campaign),n.eq=1,event_stream_report("user",n)):this._log("invalid email")},track:function(e,t,n,i){if(e&&t){this["_"+e+"_store"]&&this["_"+e+"_store"].push({key:JSON.stringify(n)}),this._push(e,{key:t,val:n,segment:i=i||""});var o,a={},r=t;for(o in"item"==e&&(r="item",a["item:segment"]=i,a["item:category"]=i,a["item:id"]=t,a["item:url"]=n.__url,a["item:imageurl"]=n.creative,a["item:imagewidth"]=n.__width,a["item:imageheight"]=n.__height,a.stringvalue=t,a.legacy=1),"cart"==e&&(r="cart"),n)n.hasOwnProperty(o)&&"__"!=o.substring(0,2)&&(a[r+":"+o]=n[o]);n&&n.stringvalue&&(a.stringvalue=n.stringvalue),a.eq=1,event_stream_report(r,a)}else this._log("type and key must be set")},conv_params:function(){var e=this._auto_add({ibx_mode:this._get("mode"),ibx_clicks:this._get("clickstr")});return e.ibx_clicks&&(this._cookies.create("__ibxc0",e.ibx_clicks),this._cookies.destroy("__ibxc")),this._log("conv_params: "+(e.ibx_clicks||"[none]")),this._qs(e)},set:function(e,t){switch(e){case"user":this.uid=t;break;case"mode":0!=t&&1!=t||(this.mode=t,this._cookies.create("__ibxm",t));break;case"cart":this.crt=t,this._cookies.create("__ibxcr",t,.5)}return t},dump:function(e){this._log(e+" = "+this._get(e))},_get:function(e){var t;switch(e){case"events":t=this._event_store;break;case"items":t=this._item_store;break;case"token":t=btoa(bouncex.cookie.did);break;case"user":t=parseInt(bouncex.cookie.uid||this._cookies.read("__ibxu")),isNaN(t)&&(t=0);break;case"mode":t="0"===this._cookies.read("__ibxm")?0:1;break;case"clickstr":t=this._cookies.read("__ibxc");break;case"clicks":t=(t=this._cookies.read("__ibxc"))?t.split(","):[];break;case"cart":t=parseInt(this._cookies.read("__ibxcr")),isNaN(t)&&(t=0);break;default:t="invalid"}return t},_push:function(e,t){var n="type="+e+"&wsid="+this.wsid+"&gcr="+bouncex.cookie.gcr+"&vid="+bouncex.cookie.vid+"&mode=1";n+="&device_id="+encodeURIComponent(bouncex.cookie.did),t.val=JSON.stringify(this._auto_add(t.val||{})),n=n+"&"+this._qs(t),t=void 0!==t.key?": "+t.key:"",this._log(e.toUpperCase()+t+" // "+n),"cart"!=e&&"isr"!=e||(n=bouncex.sau+"/ibx/ping?"+n,document.createElement("img").src=n)},_auto_add:function(e){return(e=e||{}).hasOwnProperty("__url")||(e.__url=location.href),e.hasOwnProperty("__referrer")||(e.__referrer=document.referrer),e},_cart:function _cart(action){var cart=!1;switch(action){case"get":try{cart=eval(bouncex.website.ibx.cart_rep.get)}catch(e){cart=!1,this._log(e)}break;case"set":if(this.crt||-1==location.href.indexOf("ibx_cart"))return!1;cart=this._getparam("ibx_cart"),cart&&(eval(bouncex.website.ibx.cart_rep.set),this.set("cart",1)),cart=this.crt}return cart},_clkthrough:function(){var e,t=this._getparam("ibx_source");if(t)try{if(e=this._get("clickstr")){if(-1!=e.indexOf(t))return void this._log("click-through: "+t+" (DUPLICATE)");e+=","+t}else e=t;this._cookies.create("__ibxc",e),this._log("click-through: "+t)}catch(e){this._log(e)}},_emailhash:function(){var e=bouncex.visit_cookie.ueh;e&&event_stream_report("user",{agent:"js","user:emailhash":e,"user:source":"ibx_clickthrough"})},_espemailid:function(){if(bouncex.website.ibx.ulpj){var e,t,n={"user:source":"esp-email-id",agent:"js"},i=!1;for(e in bouncex.website.ibx.ulpj)!bouncex.website.ibx.ulpj.hasOwnProperty(e)||(t=this._getparam(e))&&(i=!0,n["user:"+bouncex.website.ibx.ulpj[e]]=t);i&&event_stream_report("user",n)}},_log:function(e){0==this.mode&&bouncex.log("ibx: "+e)},_validate:function(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},_quick_validate:function(e){return null!=e&&2<e.indexOf(".")&&0<e.indexOf("@")},_qs:function(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push(t+"="+encodeURIComponent(e[t]));return n.join("&")},_cookies:{domain:window.bouncex.cookie_domain,create:function(e,t,n){n=n||365;var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3);n="; expires="+i.toGMTString(),i=this.domain?"domain=."+this.domain+";":"";document.cookie=e+"="+t+n+"; path=/;"+i},read:function(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var o=n[i];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return null},destroy:function(e){this.create(e,"",-1)}},_getparam:getParam}}function initAds(){bouncex.website.gbi_enabled&&(bouncex.website.gbi_enabled=canShowGbi())}function shouldCheckDfp(){return gbi2Enabled()&&bouncex.website.checkDfp}function init_website_custom_js(){if(bouncex.website.cjs)try{eval(bouncex.website.cjs)}catch(err){bouncex.err(err,{source:"bouncex.website.cjs"})}}function initPreInitCustomJs(){if(bouncex.website.preinit_cjs)try{eval(bouncex.website.preinit_cjs)}catch(err){bouncex.err(err,{source:"bouncex.website.preinit_cjs"})}}exports.InitSequence=InitSequence,bouncex.push=function(e){bouncex.cookieReady?processPushedData(e[0],e[1]):bouncex.pushedData.push(e)};var SinglePageApp={init:function(){bouncex.website.spa&&(bouncex.website.spatm&&!(0,_helpers.visitorTestMode)("spa")||(this._setParams(),this._pageChangeListener()))},setCustomParams:function(e){e.shouldCheckSpa&&(this._shouldCheckSpa=e.shouldCheckSpa),e.pageChangeListener&&(BxInterval.stopTask("spa default listener"),this._pageChangeListener=e.pageChangeListener),e.currentPageIdentifier&&(this._currentPageIdentifier=e.currentPageIdentifier)},_setParams:function(){void 0===this._shouldCheckSpa&&(this._shouldCheckSpa=this._defaults.shouldCheckSpa),void 0===this._pageChangeListener&&(this._pageChangeListener=this._defaults.pageChangeListener),void 0===this._currentPageIdentifier&&(this._currentPageIdentifier=this._defaults.currentPageIdentifier)},_defaults:{shouldCheckSpa:function(){return!0},pageChangeListener:function(){this._shouldCheckSpa()&&BxInterval.addTask(this._detectPageChange.bind(this),0,"spa default listener")},currentPageIdentifier:function(){return window.location.pathname}},_detectPageChange:function(){this._currentPage=this._currentPageIdentifier(),this._prevPage=this._prevPage||this._currentPage,this._prevPage!==this._currentPage&&(this.dynamicPageChange(),this._prevPage=this._currentPage)},dynamicPageChange:function(){bouncex.log("%c ~ spa new page ðŸ¤˜ ~","color: #000FFF"),InitSequence.dynamic.tearDown(),bouncex.state.newvid=!1,InitSequence.dynamic.startUp(),ReloadCampaigns.addRequest("spa new page")}};function init_ibx_tracking(){if(bouncex.website.ibx.te&&1==bouncex.website.ibx.te){try{eval(bouncex.website.ibx.tjs)}catch(err){bouncex.err(err,{source:"bouncex.website.ibx.tjs"})}NativeCapture.fieldMappingEnabled()&&(NativeCapture.init(),NativeCapture.activateFieldMapping())}}function init_event_tracking(){bouncex.website.ete&&(bouncex.website.ettm&&!(0,_helpers.visitorTestMode)("events")||bouncex.et.init())}exports.SinglePageApp=SinglePageApp;var Debug={initErrorHandling:function(){bouncex.err=Debug.report.bind(this);var e=(bouncex.tryCatch=tryCatch)(function(e){var t;(e.filename&&-1<e.filename.indexOf("bounceexchange")||e.error&&e.error.stack&&-1<e.error.stack.indexOf("bounceexchange"))&&(t=-1<bouncex.calling_url.indexOf("bounceexchange.com")?"core app":"window listener",e.preventDefault(),e.stopImmediatePropagation(),bouncex.err(e.error,{source:t}))});addEvent(window,"error",e,!1)},report:function(e,t){var n=e&&this._getErrorMessage(e);this._shouldLog(n)&&(this._log(n),this._sendEvent(n,e,t||{}))},_getErrorMessage:function(e){return e.stack?e.stack.split("\n").filter(function(e){return-1===e.indexOf("init1")}).join("\n"):e.message||e},_shouldLog:function(e){return e&&-1===this._errsArr.indexOf(e)&&(-1<window.location.hostname.indexOf("bounceexchange.com")||void 0!==bouncex.state||"development"===bouncex.env)},_log:function(e){this._errsArr.push(e);var t="development"===bouncex.env?"color: #8B008B;":"color: #388EFA;",n="development"===bouncex.env?"bx log (dev): ":"bx log: ";bouncex.log("%c "+n+e,t)},_errsArr:[],_sendEvent:function(e,t,n){var i=n.liveTraffic||5;_trafficControl.default.apply({internal:!0,liveTraffic:i},function(){event_stream_report("debug",{"debug:code":t.name||"custom","debug:location":n.source||n.location||"","debug:message":e,"debug:url":bouncex.calling_url,"debug:custom_variable":n.cvar||n.custom_variable||"",campaignid:n.ca_id||n.campaign_id||n.campaignId||""})})}};function tryCatch(t,n){if("function"==typeof t)return t._wrapped||(t._wrapped=function(){try{return t.apply(this,arguments)}catch(e){(n=n||{}).source=n.source||t.name||"tryCatch wrapper",Debug.report(e,n)}}),t._wrapped}function delegate(e,t,n,i){if(null!=jQuery.fn.on)e.on(t,i,n);else{if(null==jQuery.fn.delegate)return bouncex.err("event listener delegation not supported"),0;e.delegate(i,t,n)}}function undelegate(e,t,n){null!=jQuery.fn.off?e.off(t,n):null!=jQuery.fn.undelegate&&e.undelegate(n,t)}function bcxReady(f){bouncex.website.fbe||!(-1<bouncex.website.sd&&bouncex.website.vars)?f():(bouncex._bcxReady||eval('bouncex._bcxReady=function(){function i(){if(r.isReady){return}try{document.documentElement.doScroll("left")}catch(e){bouncex.setTimeout2(i,1);return}r.ready()}function s(t){r.bindReady();var n=r.type(t);e.done(t)}var e,t,n={};n["[object Boolean]"]="boolean";n["[object Number]"]="number";n["[object String]"]="string";n["[object Function]"]="function";n["[object Array]"]="array";n["[object Date]"]="date";n["[object RegExp]"]="regexp";n["[object Object]"]="object";var r={isReady:false,readyWait:1,holdReady:function(e){if(e){r.readyWait++}else{r.ready(true)}},ready:function(t){if(t===true&&!--r.readyWait||t!==true&&!r.isReady){if(!document.body){return bouncex.setTimeout2(r.ready,1)}r.isReady=true;if(t!==true&&--r.readyWait>0){return}e.resolveWith(document,[r])}},bindReady:function(){if(e){return}e=r._Deferred();if(document.readyState==="complete"){return bouncex.setTimeout2(r.ready,1)}if(document.addEventListener){document.addEventListener("DOMContentLoaded",t,false);window.addEventListener("load",r.ready,false)}else if(document.attachEvent){document.attachEvent("onreadystatechange",t);window.attachEvent("onload",r.ready);var n=false;try{n=window.frameElement==null}catch(s){}if(document.documentElement.doScroll&&n){i()}}},_Deferred:function(){var e=[],t,n,i,s={done:function(){if(!i){var n=arguments,o,u,a,f,l;if(t){l=t;t=0}for(o=0,u=n.length;o<u;o++){a=n[o];f=r.type(a);if(f==="array"){s.done.apply(s,a)}else if(f==="function"){e.push(a)}}if(l){s.resolveWith(l[0],l[1])}}return this},resolveWith:function(r,s){if(!i&&!t&&!n){s=s||[];n=1;try{while(e[0]){e.shift().apply(r,s)}}finally{t=[r,s];n=0}}return this},resolve:function(){s.resolveWith(this,arguments);return this},isResolved:function(){return!!(n||t)},cancel:function(){i=1;e=[];return this}};return s},type:function(e){return e==null?String(e):n[Object.prototype.toString.call(e)]||"object"}};if(document.addEventListener){t=function(){document.removeEventListener("DOMContentLoaded",t,false);r.ready()}}else if(document.attachEvent){t=function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",t);r.ready()}}}return s}()'),bouncex._bcxReady(f))}function updateQS(){for(var e=1&arguments.length,t=(e?arguments[0]:window.top.location.href).split("#"),n=t[0],t=1<t.length&&t[1],i=[],o=e;o<arguments.length;o+=2){var a=arguments[o],r=encodeURIComponent(arguments[o+1]),s=new RegExp("([?&])"+a+"=?.*?(&|$)","gi");n.match(s)?n=n.replace(s,"$1"+a+"="+r+"$2"):i.push(a+"="+r)}return i.length&&(n+=(-1==n.indexOf("?")?"?":"&"!=n.slice(-1)?"&":"")+i.join("&")),n+(t?"#"+t:"")}function qs(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push(t+"="+encodeURIComponent(e[t]));return n.join("&")}function getJString(e){var t=_typeof(e);if("object"!=t||null===e)return"string"==t&&(e='"'+e+'"'),String(e);var n,i,o=[],a=e&&e.constructor==Array;for(n in e)"string"==(t=_typeof(i=e[n]))?i='"'+i+'"':"object"==t&&null!==i&&(i=getJString(i)),o.push((a?"":'"'+n+'":')+String(i));return(a?"[":"{")+String(o)+(a?"]":"}")}function stringify(e){return"undefined"==typeof JSON||"function"!=typeof JSON.stringify?getJString(e):JSON.stringify(e)}function parseJSON(e,t){t=t||{};try{var n=JSON.parse(e);return n&&"object"===_typeof(n)?n:t}catch(e){return t}}function getParam(e,t){t=t?"?"+t:window.location.href;e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");t=new RegExp("[\\?&#]"+e+"=([^&#]*)").exec(t);return null==t?"":decodeURIComponent(t[1])}function createIframe(e){return(0,_helpers.createElement)("iframe",e)}function getBounceCookieMulti(e){if(bouncex.multicookie||(bouncex.multicookie=new _multiCookie.default({domain:bouncex.website.domain,disable_first_party:bouncex.website.aco.disable_first_party&&bouncex.website.aco.disable_first_party?1:0,first_party_limit:bouncex.website.aco.first_party_limit&&bouncex.website.aco.first_party_limit?bouncex.website.aco.first_party_limit:999999,parse_json:bouncex.parseJSON,stringify_json:bouncex.stringify})),void 0!==e)return bouncex.multicookie.cookie(e);e=bouncex.multicookie.get(bouncex.website.cookie_name);return e=""===e?{}:e}function getBounceCookieLocalStorage(e){return void 0!==e?getBounceCookieSingle(e):bouncex.cookie}function setBounceCookieLocalStorage(){var e,t=encodeURIComponent(bouncex.stringify(bouncex.cookie));bouncex.local_storage_frame.contentWindow?bouncex.local_storage_frame.contentWindow.postMessage(t,"*"):e=setInterval2(function(){bouncex.local_storage_frame.contentWindow&&(bouncex.local_storage_frame.contentWindow.postMessage(t,"*"),clearInterval(e))},100)}function getBounceCookieFPLocalStorage(e){if(e)return getBounceCookieSingle(e);try{var t=localStorage.getItem(bouncex.website.cookie_name);return parseJSON(bouncex.lz.decompressFromURI(t))||{}}catch(e){return{}}}function setBounceCookieFPLocalStorage(){try{localStorage.setItem(bouncex.website.cookie_name,bouncex.lz.compressToURI(bouncex.stringify(bouncex.cookie)))}catch(e){bouncex.err(e,{source:"setBounceCookieFPLocalStorage"})}}function setBounceCookieSingle(){var e=bouncex.website.cookie_name,t=new Date;t.setDate(t.getDate()+365);t=e+"="+bouncex.lz.compressToURI(bouncex.stringify(bouncex.cookie))+"; expires="+t.toUTCString()+";path=/;";bouncex.cookie_domain&&(t+="domain=."+bouncex.cookie_domain+";"),document.cookie=t,setBounceCookieFPLocalStorage()}function getBounceCookieSingle(e){for(var t,n,i,o=(e=e||bouncex.website.cookie_name)===bouncex.website.cookie_name,a=document.cookie.split(";"),r=0;r<a.length;r++)n=a[r].substr(0,a[r].indexOf("=")),i=a[r].substr(a[r].indexOf("=")+1),(n=n.replace(/^\s+|\s+$/g,""))==e&&(bouncex.website.cookie_name==e?i&&(t=parseJSON(i='{"'!==i.substr(0,2)?bouncex.lz.decompressFromURI(i):i)):t=i);return t=o&&(!t||0===Object.keys(t).length)?getBounceCookieFPLocalStorage():t}function setBounceVisitCookieSingle(){var e=bouncex.website.cookie_name+"v",t=new Date;t.setTime(t.getTime()+18e5);t=e+"="+bouncex.lz.compressToURI(bouncex.stringify(bouncex.visit_cookie))+"; expires="+t.toUTCString()+";path=/;";bouncex.cookie_domain&&(t+="domain=."+bouncex.cookie_domain+";"),document.cookie=t}function setBounceVisitFPLocalStorage(){var e=new Date;bouncex.visit_cookie.ex=e.getTime()+18e5,localStorage.setItem(bouncex.website.cookie_name+"v",bouncex.lz.compressToURI(bouncex.stringify(bouncex.visit_cookie)))}function getBounceVisitCookieSingle(e){e=e||bouncex.website.cookie_name+"v";e=bouncex.utils.cookies.read(e);if(e)return'{"'!==e.substr(0,2)?bouncex.lz.decompressFromURI(e):e}function getBounceVisitFPLocalStorage(e){return e?getBounceVisitCookieSingle(e):bouncex.lz.decompressFromURI(localStorage.getItem(bouncex.website.cookie_name+"v"))}function setBounceCookieMulti(){var e=bouncex.website.cookie_name;bouncex.multicookie.set(e,bouncex.stringify_cookie(bouncex.cookie))}function destroyAll(e){document.cookie.split(";").forEach(function(e){e=e.split("=")[0];(-1<e.indexOf("_ibx")||-1<e.indexOf("bounceClientVisit"))&&(document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/;",document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/;domain="+bouncex.cookie_domain+";")}),localStorage.removeItem(bouncex.website.cookie_name),localStorage.removeItem(bouncex.website.cookie_name+"v"),bouncex.indexdb.deleteDatabase(),bouncex.gdpr_opt_out||(bouncex.gdpr_opt_out=!0,bouncex.local_storage_frame&&bouncex.local_storage_frame.contentWindow&&(bouncex.local_storage_frame.contentWindow.postMessage("clear_all_data","*"),bouncex.local_storage_frame.remove()),bouncex.campaigns&&init_post_campaign_public_function(),InitSequence.dynamic.tearDown(),bouncex.website.vars=[],bouncex.website.etjson=[],bouncex.website.cjs="",bouncex.website.preinit_cjs="",bouncex.website.etjs="",bouncex.baddjs=exports.baddjs=baddjs=function(){},exports.event_stream_report=event_stream_report=function(){},bouncex.cookie&&(bouncex.cookie.vid=bouncex.cookie.did=0),"client_opt_out"!==e&&"gdpr_no_consent_cookie"!==e&&report_optout("bx_suppress",{reason:e}),bouncex.cookie={})}function clearBounceCookie(e){var t=bouncex.website.cookie_name,n="; expires=Thu, 01 Jan 1970 00:00:01 GMT";e?(document.cookie=t+"="+n+";path=/;",document.cookie=t+"="+n+";path=/;domain=."+bouncex.cookie_domain+";"):bouncex.cookie_domain?document.cookie=t+"="+n+";path=/;":document.cookie=t+"="+n+";path=/;domain=."+bouncex.cookie_domain+";"}function stringify_cookie(e){return bouncex.stringify(e).replace(/;/g,"\\u003b").replace(/\+/g,"\\u002b").replace(/\=/g,"\\u003d")}function areCookiesEnabled(){var e=!!navigator.cookieEnabled;return void 0!==navigator.cookieEnabled||e||(document.cookie="testcookie",e=-1!=document.cookie.indexOf("testcookie")),e}function fpLocalStorageAvailable(){if(window.localStorage)try{if(localStorage.setItem("bxtest",!0),localStorage.getItem("bxtest"))return localStorage.removeItem("bxtest"),1}catch(e){}}function initTestModeParts(t){var e={page_types:bouncex.website.pt,cvars:bouncex.website.vars}[t];if(!(0,_helpers.visitorTestMode)(t))if(bouncex.removedItems=bouncex.removedItems||{},bouncex.removedItems[t]=[],Array.isArray(e))e=e.filter(function(e){return e.testmode&&bouncex.removedItems[t].push(e.name),!e.testmode});else for(var n in e)e.hasOwnProperty(n)&&e[n].testmode&&(bouncex.removedItems[t].push(n),delete e[n]);return e}function init_page_types(){var e;bouncex.website.pt&&(bouncex.website.pt=initTestModeParts("page_types"),e=findPageTypeMatch(bouncex.website.pt),bouncex.website.pts=e)}function getEnabledPageTypes(){return bouncex.website.pt?Object.keys(bouncex.website.pt):[]}function findPageTypeMatch(e){for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];if((void 0!==n.val?new Criteria(t,n.val,"pagetype"):new Criteria(t,n,"pagetype")).evaluate())return t}return!1}function Criteria(e,t,n){this.name=e,this.conditions=t,this.type=n||"other",this.conditionsPassed=!1,this.evaluate=function(){try{for(var e=0;e<this.conditions.length;e++){for(var t=this.conditions[e],n=!1,i=0;i<t.length&&!n;i++)var o=t[i],a=CriteriaHelper.activations[o.activation],n="function"==typeof a&&a(o.prop,o.prop2,o.prop3,o.val);if(!n)return this.fail(t)}return this.pass()}catch(e){bouncex.err(e,{source:"criteria evaluation: "+this.type})}return this.fail()},this.log=function(){var e;(bouncex.testmode.bxdev||bouncex.testmode.bxtest)&&(bouncex.criteriaLog=bouncex.criteriaLog||{},bouncex.criteriaLog[this.type]=bouncex.criteriaLog[this.type]||{},e=this.name+"-"+JSON.stringify(this.conditions).length,bouncex.criteriaLog[this.type][e]={conditions:this.conditions,conditionsPassed:this.conditionsPassed,failedCondition:this.failedCondition,name:this.name})},this.pass=function(){return this.conditionsPassed=!0,this.log(),!0},this.fail=function(e){return this.conditionsPassed=!1,this.failedCondition=e,this.log(),!1}}exports.Debug=Debug,bouncex.setTimeout2=setTimeout2,bouncex.setInterval2=setInterval2,bouncex.on=function(e,t,n,i){i?delegate(e,t,tryCatch(n),i):null!=jQuery.fn.on?e.on(t,tryCatch(n)):e.bind(t,tryCatch(n))},bouncex.off=function(e,t,n){n?undelegate(e,t,n):null!=jQuery.fn.off?e.off(t):e.unbind(t)};var CriteriaHelper={activations:{page_type_criteria:function(e,t,n,i){return CriteriaHelper.compare("exactly",bouncex.website.pts,i)},custom_variable_criteria:function(e,t,n,i){return CriteriaHelper.compare(e,bouncex.vars[t],i)},device_type_criteria:function(e,t,n,i){return CriteriaHelper.compare("exactly",bouncex.cookie.d,i)},current_page_url:function(e,t,n,i){return CriteriaHelper.compare(e,location.href,i)},js:function(e,t,n,i){return CriteriaHelper.compare("js",null,i)}},compare:function compare(compareMethod,compareValue,compareTo){var compareValue=compareValue||!1===compareValue||0===compareValue?(compareValue+"").toLowerCase():"";if(compareTo||!1===compareTo||0===compareTo?"js"==compareMethod||"regex_match"==compareMethod||"not_regex_match"==compareMethod?compareTo+="":compareTo="greater"==compareMethod||"less"==compareMethod||"less_equal"==compareMethod||"greater_equal"==compareMethod?(""!==compareValue&&(compareValue=Number(compareValue)),Number(compareTo)):(compareTo+"").toLowerCase():compareTo="","contains"==compareMethod||"not_contains"==compareMethod)return-1<compareValue.indexOf(compareTo)?"contains"==compareMethod:"contains"!=compareMethod;if("yes"==compareMethod||"no"==compareMethod)return compareValue?"yes"==compareMethod:"no"==compareMethod;if("exactly"==compareMethod||"not_exactly"==compareMethod)return compareValue==compareTo?"exactly"==compareMethod:"exactly"!=compareMethod;if("contained_in"==compareMethod||"not_contained_in"==compareMethod)return-1<compareTo.indexOf(compareValue)?"contained_in"==compareMethod:"contained_in"!=compareMethod;if("regex_match"==compareMethod||"not_regex_match"==compareMethod){var match=new RegExp(compareTo,"gi").test(window.location.href);return match?"regex_match"==compareMethod:"regex_match"!=compareMethod}if("js"==compareMethod)try{var v=eval(compareTo);return"boolean"==typeof v&&v}catch(err){bouncex.err(err,{source:"evalCriteria - page_types"})}else{if("greater"==compareMethod)return compareTo<compareValue;if("less"==compareMethod&&""!==compareValue)return compareValue<compareTo;if("equal"==compareMethod)return compareValue==compareTo;if("less_equal"==compareMethod&&""!==compareValue)return compareValue<=compareTo;if("greater_equal"==compareMethod)return compareTo<=compareValue;if("not_equal"==compareMethod)return compareValue!=compareTo}return!1}},perf={startTime:"undefined"!=typeof performance&&performance.timing&&performance.timing.navigationStart?performance.timing.navigationStart:(0,_helpers.getTimeMs)(),timesArr:{},times:function(e){this.timesArr.startTime||(this.timesArr.startTime=this.startTime),this.timesArr[e]=(0,_helpers.getTimeMs)()-this.startTime},manualTiming:function(e,t){this.timesArr[e]=t-this.startTime},get:function(e){var t="perf:"+e,n={};return n[t]=bouncex.stringify(this[e+"Arr"]),!(!n[t]||"[]"==n[t]||"{}"==n[t])&&n},report:function(e){if(bouncex.cookie&&"037"===bouncex.cookie.did.substr(bouncex.cookie.did.length-3)){e=this.get(e);if(e)return e.agent="js",event_stream_report("perf",e)}}};function percentageLiveTraffic(e){return bouncex.cookie&&bouncex.cookie.did&&bouncex.cookie.did.substr(bouncex.cookie.did.length-2)<e}function next_sequence_id(){return bouncex.updateBounceCookie(function(e){e.hasOwnProperty("sid")&&!isNaN(e.sid)||(e.sid=-1),e.sid++}),bouncex.cookie.sid}function preventUserTracking(e){return updatePolicyCompliance({email:e["user:email"]}),shouldEnforcePolicies({gdpr:!0,casl:!0})&&!policyException(e)}function updatePolicyCompliance(e){bouncex.state.casl&&bouncex.state.gdpr||!e.email||(e=e.email.split(".").pop().toLowerCase(),bouncex.state.casl||(bouncex.state.casl=1===bouncex.restrictedTlds.casl[e]),bouncex.state.gdpr||(bouncex.state.gdpr=1===bouncex.restrictedTlds.gdpr[e]))}function shouldEnforcePolicies(e){return!(!e.gdpr||!bouncex.state.gdpr)||!(!e.casl||!bouncex.state.casl||bouncex.website.cmp.whitelist_check)}function policyException(e){var t="campaign_submit"===e["user:source"]&&e.campaignid&&isCompliantCampaign(e.campaignid),n=loggedInTrackingAllowed(e),e=fromCompliantSource(e);return t||n||e}function isCompliantCampaign(e){return!(!(!bouncex.state.gdpr||bouncex.website.cmp.gdpr&&bouncex.campaigns[e].compliance.gdpr)||bouncex.state.casl&&!bouncex.campaigns[e].compliance.casl)}function loggedInTrackingAllowed(e){if(e["user:source"]&&"loggedin"===e["user:source"].toLowerCase()){if(bouncex.state.gdpr)return bouncex.website.cmp.gdpr&&bouncex.website.cmp.whitelist_check;if(bouncex.state.casl)return bouncex.website.cmp.whitelist_check}return!1}function fromCompliantSource(e){if(e["user:source"]&&bouncex.website.ibx&&"string"==typeof bouncex.website.ibx.cus&&-1<bouncex.website.ibx.cus.indexOf(e["user:source"]))return!0}function report_optout(e,t){e=bouncex.seu+"/track.gif/"+encodeURIComponent(e)+"?";t.websiteid=bouncex.website.id,t.source||(t.source="web"),t.agent||(t.agent="user");e+=qs(t),t=document.createElement("img");return t.src=e,t.src}function event_stream_report(e,t){"user"===e&&bouncex.ibx._validate(t["user:email"])&&(bouncex.state.redactEmail||preventUserTracking(t))&&(t["user:email"]="redacted"),"requestemail"===e&&bouncex.ibx._validate(t["user:email"])&&(bouncex.state.redactEmail||void 0===bouncex.state.redactEmail&&preventUserTracking(t))&&(t["user:email"]="redacted",t.email="redacted");var n=bouncex.seu+"/track.gif/"+encodeURIComponent(e)+"?";t.mode=bouncex.cookie.m,t.websiteid=bouncex.website.id,t.visitid=bouncex.cookie.vid,t.deviceid=bouncex.cookie.did,bouncex.state&&void 0!==bouncex.state.pvid?t.pageviewid=bouncex.state.pvid:t.pageviewid=bouncex.cookie.vpv+1,t.sequenceid=next_sequence_id(),t.clienttimestamp=(0,_helpers.getTimeMs)(),t.clientapiversion=bouncex.tag,t.device=bouncex.cookie.d,bouncex.website.pts&&(t.page_type=bouncex.website.pts),t.source||(t.source="web"),t.agent||(t.agent="user"),bouncex.dg&&bouncex.dg.softID&&(t.soft_id=bouncex.dg.softID),bouncex.dg&&bouncex.dg.hardID&&(t.hard_id=bouncex.dg.hardID),bouncex.debug&&bouncex.eventLog&&bouncex.eventLog.push({name:e,params:t}),bouncex.cookie.t&&(t.testmode=1),_eventSharingCartridge.default.send({eventName:e,data:t,type:"event"});var i="",o=qs(t),i=(0,_helpers.isBxInternalTraffic)()?n+o:(a=bouncex.lz.compressToURI(o),"visit"===e&&(bouncex.browser.msie||bouncex.browser.edge)&&4e3<(n+a).length&&(t["visit:customvariables"]="{}",o=qs(t),a=bouncex.lz.compressToURI(o)),n+"wklz="+a),a=document.createElement("img");return a.onload=function(){handleEventStreamReportCompletion(t)},a.src=i,behavioralAudiencesReport(e,t),a.src}function handleEventStreamReportCompletion(e){e["user:emailhash"]&&bouncex.visit_cookie&&bouncex.visit_cookie.ueh&&bouncex.updateBounceVisitCookie(function(e){delete e.ueh})}function report(e,t,n){isGbi2Campaign(e)?bouncex.gbi2.report(e,t,n):bouncex.website.gbi_enabled&&bouncex.campaigns[e].gbi?bouncex.gbi.report(e,t,n):buildReport(e,t,n)}function buildReport(t,e,n){var i=0,o="user",a={views:"eligible",pops:"pop",clicks:"click",closes:"close"};if("click"==(e=a[e]?a[e]:e)){if(bouncex.campaigns[t].impression_click_reported)return!1;bouncex.campaigns[t].impression_click_reported=!0,bouncex.updateBounceCookie(function(e){e.campaigns[t].lclk=getTime2()})}else if("close"==e){if(bouncex.campaigns[t].impression_click_reported||bouncex.campaigns[t].submitted)return!1}else"eligible"==e?(o="js",bouncex.updateBounceCookie(function(e){e.campaigns[t].vv=e.campaigns[t].vv?e.campaigns[t].vv+1:1}),1==bouncex.cookie.campaigns[t].vv&&(i=1)):"pop"==e||"trypop"==e?(o="js",1==bouncex.cookie.campaigns[t].av&&(i=1)):"bid_fill"!=e&&"bid_none"!=e&&"bid_empty"!=e&&"bid_error"!=e||(o="js");"object"!==_typeof(n)&&(n={}),i&&(n.uq=1),n.campaignid=t,n.source=n.source||"bouncex",n.agent=o,event_stream_report(e,n),reportGa(t,e),"click"==e&&event_js_eval(t,"click")}function report_submit(e,t,n){return t.m=bouncex.cookie.m,t.d=bouncex.cookie.d,t.visit_id=bouncex.cookie.vid,t.device_id=bouncex.cookie.did,t.campaign_id=e,t.website_id=bouncex.website.id,t.pvid=bouncex.state.pvid,t.cts=(0,_helpers.getTimeMs)(),next_sequence_id(),t.cookie=bouncex.stringify(getBounceCookie()),t.hasOwnProperty("step")||(t.step=1),n&&(t.last_step=1),bouncex.dg&&bouncex.dg.hardID&&(t.hard_id=bouncex.dg.hardID),bouncex.dg&&bouncex.dg.softID&&(t.soft_id=bouncex.dg.softID),jQuery('<img src="'+bouncex.sau+"/capture/submit.gif?"+qs(t)+'"/>')}function report_conversion_sync(obj,source){perf.times("conversion"),obj=obj||{},source=source||"sync",_eventSharingCartridge.default.send({eventName:source,data:obj,type:"conversion"}),bouncex.cookie=getBounceCookie();var bamount=void 0===obj.amount?0:obj.amount,border_id=void 0===obj.order_id?"":obj.order_id,bemail=void 0===obj.email?"":obj.email,bgoal=void 0===obj.goal?"":obj.goal,sid=next_sequence_id(),pvid=bouncex.state?bouncex.state.pvid:bouncex.cookie.vpv+1,url=bouncex.sau+"/capture/convert.gif?m="+bouncex.cookie.m+"&d="+bouncex.cookie.d+"&goal="+encodeURIComponent(bgoal)+"&email="+encodeURIComponent(bemail)+"&email_sha256="+(obj.email_sha256?encodeURIComponent(obj.email_sha256):"")+"&order_id="+encodeURIComponent(border_id)+"&amount="+encodeURIComponent(bamount)+"&website_id="+bouncex.website.id+"&visit_id="+bouncex.cookie.vid+"&device_id="+bouncex.cookie.did+"&pvid="+pvid+"&sid="+sid+"&cts="+(0,_helpers.getTimeMs)()+"&source="+source+"&cookie="+escape(bouncex.stringify(bouncex.cookie))+"&"+bouncex.ibx.conv_params(),sanitizedNumber;_phoneNumber.default.isValid(obj.phone)&&(sanitizedNumber=_phoneNumber.default.sanitize(obj.phone),sanitizedNumber?(url+="&phone="+encodeURIComponent(sanitizedNumber),url+="&phone_sha256="+_phoneNumber.default.toSha256(sanitizedNumber)):url+="&phone_unmatched="+encodeURIComponent(obj.phone)),bouncex.cookie.t&&(url+="&testmode="+bouncex.cookie.t),bouncex.dg&&bouncex.dg.hardID&&(url+="&hard_id="+bouncex.dg.hardID),bouncex.dg&&bouncex.dg.softID&&(url+="&soft_id="+bouncex.dg.softID);var urlLengthLimit=32e3,newUrl=url+"&extradata="+escape(bouncex.stringify(obj));newUrl.length<urlLengthLimit&&(url=newUrl);var img=document.createElement("img");if(img.alt="conversion pixel",img.src=url,bouncex.website.tcjs)try{eval(bouncex.website.tcjs)}catch(err){bouncex.err(err,{source:"bouncex.website.tcjs"})}if(bouncex.website.ibx.te&&1==bouncex.website.ibx.te)try{eval(bouncex.website.ibx.cjs)}catch(err){bouncex.err(err,{source:"bouncex.website.ibx.cjs"})}bouncex.updateBounceCookie(function(e){e.lc=getTime2()})}function report_conversion(e,t){report_conversion_sync(e=e||{},t=t||"async")}function event_js_eval(ca_id,type,data){if(bouncex.campaigns[ca_id].event_js){var campaign_id=ca_id;if(bouncex.campaigns[ca_id].event_js[type])try{eval(bouncex.campaigns[ca_id].event_js[type])}catch(err){bouncex.err(err,{source:"event_js_eval",ca_id:ca_id})}}}function post_submit_redirect(e){var t=bouncex.campaigns[e].is_api,n=bouncex.campaigns[e].submission_redirect,e=bouncex.campaigns[e].submission_redirect_delay;if(t&&e<.3)e=.3;else if(!t)return;n&&setTimeout2(function(){window.top.location.href=n},e?1e3*e:0)}function reportGa(e,t){t="pop"==t?"impression":t;bouncex.website.gar&&bouncex.campaigns[e].ga_i&&bouncex.campaigns[e].ga_i[t]&&bouncex.report_ga(t,bouncex.campaigns[e].ga_i.label)}function report_ga(e,t,n){_analytics.default.report(e,t,n)}function behavioralAudiencesReport(e,t){bouncex.website.ba.enabled&&"user"===t.agent&&facebookReport(e,t)}function facebookReport(e,t){if(1===bouncex.website.ba.fbte&&"user"===t.agent){for(var n=createFacebookEvents(e,t),i=0;i<n.length;i++)bouncex.ba.fbel.push(n[i]);sendEventsToFacebook(!1),"item"===e&&(bouncex.ba.lip=t)}}function sendEventsToFacebook(t){if("undefined"!=typeof fbq)for(;null!=(e=bouncex.ba.fbel.pop());)fbq(e.eventType,e.eventName,e.eventParams),bouncex.ba.fbto&&clearTimeout(bouncex.ba.fbto);else null!=bouncex.ba.fbto&&1!=t||bouncex.ba.fbrc<5&&(bouncex.ba.fbto=setTimeout2(sendEventsToFacebook,500),bouncex.ba.fbrc++)}function createFacebookEvents(e,t){var n,i,o,a=[],r={"add to cart":"AddToCart","added to cart":"AddToCart","view item":"ViewContent","viewed item":"ViewContent",conversion:"Purchase"},s={source:"bx",bx_event_name:e};"conversion"!==e&&(n=("item:id"in t?t:bouncex.ba.lip)["item:id"],i=("item:price"in t?t:bouncex.ba.lip)["item:price"],o=("item:category"in t?t:bouncex.ba.lip)["item:category"],c=("item:copy"in t?t:bouncex.ba.lip)["item:copy"],n&&(s.content_type="product",s.content_ids=[n]),i&&(s.value=i),o&&(s.content_category=o),c&&(s.content_name=c));var c="bx:"+e+" - "+(void 0===bouncex.getBounceCookie().lc?"prospect":"customer");return a.push({eventType:"trackCustom",eventName:c,eventParams:s}),e in r&&a.push({eventType:"track",eventName:r[e],eventParams:s}),a}function noteCookieAdShown(e){if(bouncex.website.gbi_enabled&&bouncex.campaigns[e].gbi.stack_id){if(bouncex.gbi.stacks[bouncex.campaigns[e].gbi.stack_id].failed)return bouncex.gbi.log(e,"NOT saving cookie data"),!1;bouncex.gbi.log(e,"saving cookie data")}bouncex.campaigns[e].ad_shown=!0,bouncex.updateBounceCookie(function(t){var n;t.campaigns[e].lavid=t.vid,t.campaigns[e].la=getTime2(),t.campaigns[e].av=t.campaigns[e].av?t.campaigns[e].av+1:1,t.campaigns[e].fsa||(t.campaigns[e].fsa=t.campaigns[e].la),t.campaigns[e].as=t.campaigns[e].as?t.campaigns[e].as+1:1,t.campaigns[e].ao=t.campaigns[e].ao?t.campaigns[e].ao+1:1,bouncex.campaigns[e].ap=bouncex.campaigns[e].ap?bouncex.campaigns[e].ap+1:1,t.campaigns[e].oa=t.campaigns[e].oa||[],"overlay"!=bouncex.campaigns[e].type&&"none"===bouncex.campaigns[e].coverlay||bouncex.campaigns[e].is_man||(t.campaigns[e].io=1,t.ao++,bouncex.pa++,t.as++,t.campaigns[e].oa.push(t.campaigns[e].la)),0<bouncex.website.mat&&0<bouncex.website.math&&(n=getTime2()-60*bouncex.website.math*60,Object.keys(t.campaigns||{}).forEach(function(e){e=t.campaigns[e];e.oa&&(e.oa=e.oa.filter(function(e){return n<e}))}))})}function report_endpageview(e){if("visibilitychange"!==e.type||"hidden"===document.visibilityState){var t={"pageview:url":bouncex.calling_url,"pageview:customvariables":JSON.stringify(bouncex.vars),"pageview:event":e.type,"perf:times":JSON.stringify(bouncex.perf.timesArr)};if(bouncex.campaigns)for(var n in bouncex.campaigns){var i=bouncex.campaigns[n].frameWatcher;i&&(t["creatives:loaded:".concat(n)]=+i.loadSucceeded,t["creatives:failed:".concat(n)]=+i.loadFailed,t["creatives:load_delay:".concat(n)]=i.loadDelay)}shouldCheckDfp()&&(e=bouncex.gbi2.getDfpEndPageViewEvent(),t.dfp_status=e.dfp_status,t.line_item_id=e.line_item_id,t.dfp_report_status=e.dfp_report_status,t.dfp_suppression_causes=e.dfp_suppression_causes),event_stream_report("endpageview",t),bouncex.off(bouncex.window,".bx_endpageview"),bouncex.off(bouncex.document,".bx_endpageview")}}function init_endpageview_event(){bouncex.state.mobile&&bouncex.on(bouncex.document,"visibilitychange.bx_endpageview",report_endpageview),bouncex.on(bouncex.window,"beforeunload.bx_endpageview pagehide.bx_endpageview unload.bx_endpageview",report_endpageview)}function baddjs(e){var t=document.createElement("script");t.setAttribute("src",e),t.setAttribute("type","text/javascript"),document.getElementsByTagName("head")[0].appendChild(t)}function loadBrandStyles(){if(bouncex.brandStyles){bouncex.brandStylesLoaded=bouncex.brandStylesLoaded||{};var e,t="",n="";for(e in bouncex.brandStyles)bouncex.brandStyles.hasOwnProperty(e)&&!bouncex.brandStylesLoaded[e]&&(t+=bouncex.brandStyles[e],n+="-"+e,bouncex.brandStylesLoaded[e]=!0);t&&bouncex.addCss(t,bouncex.head[0],"bx-brand"+n)}}function loadWebfonts(){if(bouncex.webfonts){bouncex.fontCSSLoaded=bouncex.fontCSSLoaded||{};var e,t="";for(e in bouncex.webfonts)bouncex.webfonts.hasOwnProperty(e)&&!bouncex.fontCSSLoaded[e]&&(t+='<link href="//assets.bounceexchange.com/fonts/'+e+'/stylesheet.css" rel="stylesheet" type="text/css" media="all" />',bouncex.fontCSSLoaded[e]=1);jQuery(t).appendTo(bouncex.head)}}function wndsize(){var e=0,t=0,t=window.innerWidth?(e=_helpers.default.minExceptZero([window.innerWidth,window.outerWidth]),_helpers.default.minExceptZero([window.innerHeight,window.outerHeight])):0!=document.documentElement.clientWidth?(e=document.documentElement.clientWidth,document.documentElement.clientHeight):(e=document.body.clientWidth,document.body.clientHeight);return{width:e,height:t}}function wndorientation(){return window.orientation}function make_include_string(e,t,n){var i="never"===bouncex.website.ljq?0:"undefined"==typeof jQuery?"undefined":_typeof(jQuery),o="";e?(d=getBounceCookie(),e="reloadCampaigns"):(e="init1",CustomVariables.varsToExpire&&0<CustomVariables.varsToExpire.length?(d=getBounceCookie(),CustomVariables.varsToExpire.forEach(function(e){o+="&vdef["+e.name+"]="+escape(e.default).replace(/\+/g,"%2B")})):d=getBounceCookie()),d=bouncex.stringify(d);var a=bouncex.stringify(bouncex.visit_cookie);bcx_vars="";var r,s={};for(r in bouncex.vars)bcx_vars+="&vars["+r+"]="+escape(bouncex.vars[r]),s[r]=String(bouncex.vars[r]);bouncex.varsToAPI=JSON.stringify(s),bouncex.cookieToAPI=JSON.stringify(bouncex.cookie);var c=(new Date).getTimezoneOffset(),u=bouncex.wndsize(),u=u.width+"x"+u.height,a={tojQ:i,cts:(0,_helpers.getTimeMs)(),tzo:c,website_id:bouncex.website.id,resolution:u,referrer:bouncex.referrer,calling_url:bouncex.calling_url,visit_cookie:escape(a),cookie:escape(d)+bcx_vars.replace(/\+/g,"%2B")+o,cookie_too_large:bouncex.cookie_too_large,bp:0,etp:JSON.stringify(getEnabledPageTypes()),pts:bouncex.website.pts||"",compliance_flag:bouncex.complianceFlag||""},d=bouncex.au+"/bounce/"+e+".js?",l=bouncex.utils.url.generateQuerystring(a);if(shouldCheckDfp()&&(l+=bouncex.gbi2.getDfpLineItemIds().map(function(e){return"&dfp[]=".concat(e)}).join("")),bouncex.visitsHistoryAsHoursAgo&&(l+="&vha=".concat(bouncex.visitsHistoryAsHoursAgo.join(","))),"reloadCampaigns"==e){if(l+="&pvid="+bouncex.state.pvid,bouncex.campaigns)for(var p in bouncex.campaigns)bouncex.campaigns[p].ad_visible&&(l+="&vc[]="+p);null!=t&&(l+="&rltype="+t),null!=n&&(l+="&rlname="+n),bouncex.cookie.t&&(l+="&testmode="+bouncex.cookie.t)}bouncex.dg&&bouncex.dg.hardID&&(l+="&hard_id="+bouncex.dg.hardID),bouncex.dg&&bouncex.dg.softID&&(l+="&soft_id="+bouncex.dg.softID);n=d+l;return(0,_helpers.isBxInternalTraffic)()?n:d+"wklz="+bouncex.lz.compressToURI(l)}function unload_campaigns(){if(bouncex.events)for(var e in bouncex.events)unload_campaign(e)}function unload_campaign(e){if(bouncex.events&&bouncex.events[e])for(var t in bouncex.events[e])"object"==_typeof(bouncex.events[e][t])?jQuery(bouncex.events[e][t]).unbind(t):"function"==typeof bouncex.events[e][t]?bouncex.events[e][t]():clearTimeout(bouncex.events[e][t]),delete bouncex.events[e][t]}exports.perf=perf;var ReloadCampaigns={_max:30,_taskId:"make_reload_campaigns_request",init:function(){this._count=0},addRequest:function(e,t){e=e||this.addRequest.caller&&this.addRequest.caller.arguments&&this.addRequest.caller.arguments.length&&"object"!==_typeof(this.addRequest.caller.arguments[0])&&this.addRequest.caller.arguments[0]||"custom",BxInterval.addTask(this._makeRequest.bind(this,e,t=t||"manual"),0,this._taskId),this._log(e+": "+t)},_reportEvent:function(e,t){event_stream_report("reloadcampaigns",{"reloadcampaigns:customvariables":bouncex.varsToAPI,"reloadcampaigns:name":e,"reloadcampaigns:type":t})},_makeRequest:function(e,t){if(this._count>=this._max)return this._cancelRequest();void 0!==bouncex.state&&(bouncex.updateBounceCookie(),this._reloadCampaigns(e,t),this._completeRequest(),bouncex.state.no_kinesis&&this._reportEvent(e,t))},_cancelRequest:function(){BxInterval.stopTask(this._taskId),this._log("max reached")},_completeRequest:function(){BxInterval.stopTask(this._taskId),this._count+=1,this._log(this._count)},_reloadCampaigns:function(e,t){bouncex.baddjs(bouncex.make_include_string("reloadCampaigns",t,e))},_log:function(e){_logger.default.info({group:"reload_campaigns",message:e,color:"#BB8FCE"})}};exports.ReloadCampaigns=ReloadCampaigns;var BxInterval={init:function(){clearInterval(this._masterPoll),this._tasks={},this._masterPoll=setInterval2(this._runTasks.bind(this),1e3)},_runTasks:function(){for(var e in this._tasks){var t;this._tasks.hasOwnProperty(e)&&((t=this._tasks[e]).run(),t.count+=1,0<t.max&&t.count>=t.max&&this._maxedTask(e))}},addTask:function(e,t,n,i){n=n||generateUniqueId();return this._tasks[n]={run:e,max:t||0,count:0,maxedFn:i},n},_maxedTask:function(e){this._tasks[e]&&"function"==typeof this._tasks[e].maxedFn&&this._tasks[e].maxedFn(),this.stopTask(e)},stopTask:function(e){delete this._tasks[e]},clearTasks:function(){this._tasks={}}};function unhideSite(){clearTimeout(bouncex.usd.timeout),bouncex.usd.callback(),delete bouncex.usd}exports.BxInterval=BxInterval;var XD={postMessage:function(e,t){isDeprecatedFunction()},receiveMessage:function(e){isDeprecatedFunction()}};function can_show_ad(t,e){if(!bouncex.campaigns[t])return!1;if(bouncex.campaigns[t].qbxtest&&!bouncex.campaigns[t].ad_visible){if(!e){if(bouncex.campaigns[t].hasBehavioralCriteria&&!behavioralCriteriaComplete(t))return!1;if(bouncex.overlay_visible&&isGbi2Campaign(t))return!1}return!bouncex.campaigns[t].repressed}var n=t,i=bouncex.campaigns[t].gbi.stack_id;bouncex.website.gbi_enabled&&i&&t!=bouncex.gbi.stacks[i].leader_id&&(t=bouncex.gbi.stacks[i].leader_id);var o=getTime2();if(bouncex.updateBounceCookie(function(e){e.lvt=e.campaigns[t].lvt=o}),!e){if(bouncex.overlay_visible&&("none"!=bouncex.campaigns[t].coverlay||"overlay"==bouncex.campaigns[t].type||isGbi2Campaign(t)))return!1;if(bouncex.campaigns[n].ad_visible)return!1;if(0<bouncex.campaigns[t].tvao){i=(window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0);if(bouncex.campaigns[t].tvao>i)return!1}if(bouncex.campaigns[t].hasBehavioralCriteria&&!behavioralCriteriaComplete(t))return!1}if(bouncex.website.dfpcms&&shouldCheckDfp()&&bouncex.gbi2.shouldDfpPreventShowing(t))return!1;if(bouncex.campaigns[n].failed&&(!e||bouncex.campaigns[n].trypopTriggered||!isGbi2Campaign(n)))return!1;if(0<bouncex.website.map&&bouncex.pa>=bouncex.website.map&&("none"!=bouncex.campaigns[t].coverlay||"overlay"==bouncex.campaigns[t].type)&&!bouncex.campaigns[t].is_man)return!1;if(0<bouncex.campaigns[t].map&&bouncex.campaigns[t].ap>=bouncex.campaigns[t].map)return!1;if(0<bouncex.campaigns[t].mas&&bouncex.cookie.campaigns[t].as>=bouncex.campaigns[t].mas)return!1;if(!bouncex.campaigns[t].is_man&&0<bouncex.website.mas&&("none"!=bouncex.campaigns[t].coverlay||"overlay"==bouncex.campaigns[t].type)&&bouncex.website.mas<=bouncex.cookie.as)return!1;if(0<bouncex.campaigns[t].mao&&bouncex.cookie.campaigns[t].ao>=bouncex.campaigns[t].mao)return!1;if(0<bouncex.website.mat&&0<bouncex.website.math&&("none"!=bouncex.campaigns[t].coverlay||"overlay"==bouncex.campaigns[t].type)&&(!bouncex.campaigns[t].current_step||1===bouncex.campaigns[t].current_step)){var a=getTime2()-60*bouncex.website.math*60,n=Object.keys(bouncex.cookie.campaigns||{}).map(function(e){return bouncex.cookie.campaigns[e]}).filter(function(e){return 1===e.io}).map(function(e){return e.oa?e.oa.filter(function(e){return a<e}).length:0}).reduce(function(e,t){return e+t},0);if(bouncex.log(t,"Found "+n+" activations in the last "+bouncex.website.math+" hours with a max of "+bouncex.website.mat),n>=bouncex.website.mat)return!1}return!(!bouncex.campaigns[t].is_man&&!bouncex.campaigns[t].ipc&&(bouncex.cookie.es||bouncex.cookie.campaigns[t].ls||bouncex.cookie.campaigns[t].submitted)&&bouncex.campaigns[t].is_ec||(bouncex.campaigns[t].is_pers||bouncex.campaigns[t].closed_no_show)&&bouncex.cookie.campaigns[t].wcv||bouncex.campaigns[t].repressed||bouncex.campaigns[t].purchase_no_show&&bouncex.cookie.lc>bouncex.cookie.campaigns[t].la)}function close_ad(e,t,n){var i,o=bouncex.campaigns[e];o&&o.ad_shown&&(!o.ad_closed||o.ad_visible)&&("none"==bouncex.campaigns[e].coverlay&&"overlay"!=bouncex.campaigns[e].type||(bouncex.overlay_visible=!1,bouncex.website.otc&&(bouncex.timespaced=!0,bouncex.events[e].timeout_timespace=setTimeout2(function(){bouncex.timespaced=!1},1e3*bouncex.website.otc))),bouncex.campaigns[e].ng&&close_ad_ng(e),o.ad_visible=!1,o.unrepressOthers(),event_js_eval(e,"close"),bouncex.campaigns[e].listeners.stopAll(),t||(i=e,bouncex.website.gbi_enabled&&bouncex.campaigns[e].gbi.stack_id&&i!=bouncex.gbi.stacks[bouncex.campaigns[e].gbi.stack_id].leader_id&&(i=bouncex.gbi.stacks[bouncex.campaigns[e].gbi.stack_id].leader_id),bouncex.updateBounceCookie(function(e){e.campaigns[i].wc=e.campaigns[i].wcv=getTime2()}),n||report(e,"close"),"reload"===bouncex.campaigns[e].close_redirect_type?bouncex.reload_campaigns():bouncex.campaigns[e].close_redirect_type&&bouncex.campaigns[e].close_redirect_url&&(bouncex.events[e].timeout_close_redirect=teleport(bouncex.campaigns[e].close_redirect_type,bouncex.campaigns[e].close_redirect_url))),bouncex.window.unbind("focus.bouncex_window_focus_"+e),o.ad_closed=!0)}function close_ad_ng(e){var t=bouncex.campaigns[e];if("tabtitle"!==bouncex.campaigns[e].type||bouncex.campaigns[e].control||(bouncex.campaigns[e].custom_tab_title.favicon_url&&TabTalk.changeFavicon(e,!0),TabTalk.cancelTitleUpdate(e)),!(bouncex.campaigns[e].control||bouncex.campaigns[e].noCreative&&!isGbi2Campaign(e))){bouncex.campaigns[e].obj1.unbind("click.bcx_campaign_click_"+e,handleClick),bouncex.browser.ios&&0<bouncex.campaigns[e].inputs.length&&("conversionbar"===bouncex.campaigns[e].type||"nanobar"===bouncex.campaigns[e].type)&&(bouncex.campaigns[e].inputs.unbind(".bcx_ios_input_fix_"+e),removeIosInputFix(e));var n,i,o="timeout_auto_submission_close";for(n in bouncex.events[e][o]&&(clearTimeout(bouncex.events[e][o]),delete bouncex.events[e][o]),bouncex.events[e])-1!==n.indexOf("campaign_timer")&&(clearInterval(bouncex.events[e][n]),delete bouncex.events[e][n]);close_ad_ng_post_outro(e),"no_effect"!==bouncex.campaigns[e].transitionEffect?(bouncex.campaigns[e].obj1.addClass("bx-impress-out"),i=jQuery("#bx-creative-"+e),bouncex.on(i,"animationend webKitAnimationEnd",function(){bouncex.off(i,"animationend webKitAnimationEnd"),clearInterval(bouncex.campaigns[e].animationTimeout),bouncex.campaigns[e].obj2.removeClass("bx-impress bx-impress-out"),close_ad_save_detached_children(e)}),bouncex.campaigns[e].animationTimeout=setTimeout2(function(){bouncex.campaigns[e]&&!bouncex.campaigns[e].ad_visible&&(bouncex.off(i,"animationend webKitAnimationEnd"),bouncex.campaigns[e].obj2.removeClass("bx-impress bx-impress-out"),close_ad_save_detached_children(e))},1e3)):(bouncex.campaigns[e].obj2.removeClass("bx-impress"),close_ad_save_detached_children(e)),hideAlly(e),bouncex.campaigns[e].gbi&&bouncex.campaigns[e].gbi.isVideo&&bouncex.campaigns[e].gbi.player&&bouncex.campaigns[e].gbi.player.remove(),t.ad_closed=!0}}function show_ad_restore_detached_children(e){if(isGbi2Campaign(e)){var t=bouncex.campaigns[e];if(null!=t.obj2_detached_children){for(var n=0;n<t.obj2.length;n++)t.obj2_detached_children[n].appendTo(t.obj2[n]);t.obj2_detached_children=null}}}function close_ad_save_detached_children(e){if(isGbi2Campaign(e)){var t=bouncex.campaigns[e];t.obj2_detached_children=[];for(var n=0;n<t.obj2.length;n++)t.obj2_detached_children.push(jQuery(t.obj2[n]).children().detach())}}function close_ad_ng_post_outro(e){"overlay"==bouncex.campaigns[e].type&&(hideAllyOverlayPostOutro(e),bouncex.browser.iphone||bouncex.browser.ipad?(bouncex.html.removeClass("bx-client-overlay-ios"),bouncex.body.removeClass("bx-client-overlay-ios"),bouncex.window.scrollTop(bouncex.preImpressScrollY)):(bouncex.html.removeClass("bx-client-overlay"),bouncex.body.removeClass("bx-client-overlay"))),!bouncex.campaigns[e].blur_gate_enabled||"agilityzone"!=bouncex.campaigns[e].type&&"annotation"!=bouncex.campaigns[e].type||blurGateRemove(e)}function trigger_ad(e,t,n,i){var o=bouncex.campaigns[t];if(e&&"manual"!==e){if(o.hasBehavioralCriteria&&n&&!n.isBehavioral)return!o.realtimeArmed&&behavioralCriteriaComplete(t,i);if(isGbi2Campaign(t)&&"waypoint"!==e&&o.trigger!==e&&bouncex.triggers_filled[e]&&bouncex.triggers_filled[e]!==t)return!1}return show_ad(e,t)}function show_ad(type,ca_id){var ca=bouncex.campaigns[ca_id],fn_display,delay;if((!isGbi2Campaign(ca_id)||bouncex.gbi2.canShowPubCampaign(type,ca_id,shouldCheckDfp()))&&can_show_ad(ca_id)){if(bouncex.pa||perf.times("showad"),ca.trigger=type||ca.trigger||"manual",isGbi2Campaign(ca_id)&&(bouncex.triggers_filled[ca.trigger]=ca_id),bouncex.website.gbi_enabled){if(ca.gbi&&("index"==ca.gbi.provider||"tabr"==ca.gbi.provider||"dfphtml"==ca.gbi.provider||"pbm"==ca.gbi.provider||"aqbx"==ca.gbi.provider)&&!ca.gbi.contentLoaded&&!ca.gbi.isVideo){bouncex.gbi.clearRequestAssets(ca_id);var call="tabr"!=ca.gbi.provider?"requestCompleteSingle":"requestCompleteMultiple";return bouncex.gbi[call](ca_id,ca.gbi.html,function(){ca.gbi.contentLoaded=!0,show_ad(type,ca_id),1<ca.gbi.step&&(setJumpStep(ca_id,ca.gbi.step,!1),nextStep(ca_id))}),!1}var checkPlayVideo=!isBxPlayerCampaign(ca_id)||void 0===ca.video.status.isPlayable;if(checkPlayVideo){if(isPlayableVideoCampaign(ca_id,!0))return playVideo(ca_id,!0,type),!1;if(isBxPlayerCampaign(ca_id))return!1}}if(isGbi2Campaign(ca_id)&&!ca.gbi.contentLoaded&&!ca.gbi.contentLoading&&"function"==typeof ca.onImpression)return ca.gbi.contentLoading=!0,ca.onImpression(function(){ca.gbi.contentLoading=!1,ca.gbi.contentLoaded=!0,show_ad(type,ca_id)});bouncex.campaigns[ca_id].ad_visible=!0,bouncex.campaigns[ca_id].impression_click_reported=!1,bouncex.campaigns[ca_id].submitted=!1,noteCookieAdShown(ca_id),isBxPlayerCampaign(ca_id)?bouncex.video.bxPlayerPop(ca_id,type):report(ca_id,"pop",{"pop:activation":type}),bouncex.campaigns[ca_id].ng&&(ca.frameWatcher&&!ca.frameWatcher.loadSucceeded?(fn_display=_prepareAndDisplay.bind(this,ca_id),ca.frameWatcher.addEventListener("loadSuccess.bx",fn_display,!1)):_prepareAndDisplay(ca_id)),"teleport"!=bouncex.campaigns[ca_id].overlay&&!bouncex.campaigns[ca_id].noCreative&&(show_close(ca_id),bouncex.campaigns[ca_id].ad_auto_close)&&(delay=bouncex.campaigns[ca_id].is_pers?calc_delay_cvt(bouncex.campaigns[ca_id].ad_auto_close):1e3*bouncex.campaigns[ca_id].ad_auto_close,bouncex.events[ca_id].timeout_auto_close=setTimeout2(function(){close_ad(ca_id)},delay)),ca.suppressOthers(),ca.repressOthers(),suppressElements(ca),bouncex.usd&&unhideSite();var campaign=bouncex.campaigns[ca_id],fn_eval_impression;if(ca.frameWatcher&&!ca.frameWatcher.loadSucceeded?(fn_eval_impression=function(){ca.dispatchEvent("impression.bx"),event_js_eval(ca_id,"impression"),campaign&&bouncex.clientEvents.activateImpressionEvent({id:campaign.id,purpose:campaign.purpose,sub_purpose:campaign.sub_purpose})},ca.frameWatcher.addEventListener("loadSuccess.bx",fn_eval_impression,!1)):(ca.dispatchEvent("impression.bx"),event_js_eval(ca_id,"impression"),campaign&&bouncex.clientEvents.activateImpressionEvent({id:campaign.id,purpose:campaign.purpose,sub_purpose:campaign.sub_purpose})),bouncex.campaigns[ca_id].osfn_website)try{eval(bouncex.campaigns[ca_id].osfn_website)}catch(err){bouncex.err(err,{source:"osfn_website",ca_id:ca_id})}ca.ad_closed=!1}}function suppressElements(e){e.suppressElement&&jQuery(e.suppressElement).remove()}function repressCampaigns(e){var t=bouncex.campaigns[e];if(t.repress_overlay||t.repress_top||t.repress_bottom)for(var n in bouncex.campaigns)n!=e&&(n=bouncex.campaigns[n],(t.repress_overlay&&("none"!==n.coverlay||"overlay"===n.type)||t.repress_top&&("none"!==n.ctop||"nanobar"===n.type||"floater"===n.deployment)||t.repress_bottom&&("none"!==n.cbottom||"conversionbar"===n.type))&&(n.repressed_by_ca_id=e,n.repressed=!0))}function show_ad_ng(e,t){_prepareAndDisplay(t)}function _prepareAndDisplay(t){var e,n,i=bouncex.campaigns[t],o=-1<["overlay","endcap"].indexOf(i.deployment);return i.isGBI2&&o&&!i.getClientVisibility()?i.onClientVisible(_prepareAndDisplay.bind(null,t)):(bouncex.campaigns[t].control||("tabtitle"==bouncex.campaigns[t].type?TabTalk.updateTitle(t):"teleport"==bouncex.campaigns[t].type&&teleport("_self",bouncex.campaigns[t].overlay_teleport_html)),!(bouncex.campaigns[t].control||bouncex.campaigns[t].noCreative&&!isGbi2Campaign(t))&&(googleTrustedStoresBadgeFix(t),bouncex.campaigns[t].submittedYet&&(bouncex.campaigns[t].submittedYet=!1),bouncex.events[t].edwTimeout&&clearTimeout(bouncex.events[t].edwTimeout),bouncex.campaigns[t].forceLastStep=!1,bouncex.campaigns[t].current_step?(bouncex.campaigns[t].next_step=1,bouncex.nextStep(t)):(bouncex.campaigns[t].next_step=2,bouncex.campaigns[t].current_step=1,CouponCodes.insertCodesInCurrentStep(t)),bouncex.campaigns[t].obj1.bind("click.bcx_campaign_click_"+t,{ca_id:t},handleClick),bouncex.browser.msie||bouncex.browser.ipad||bouncex.browser.iphone||0<(o=bouncex.campaigns[t].obj1.find(".bx-click-to-copy")).length&&(bouncex.on(o,"click",function(e){document.execCommand("copy")}),bouncex.on(o,"copy",clickToCopy)),bouncex.campaigns[t].inputs=bouncex.campaigns[t].obj1.find(".bx-input, .bx-textarea"),(!bouncex.browser.msie||8<bouncex.browser.msie)&&0<bouncex.campaigns[t].inputs.length&&bxBind(bouncex.campaigns[t].inputs,"keydown.bcx_campaign_input_"+t+" focus.bcx_campaign_input_"+t+" blur.bcx_campaign_input_"+t+" change.bcx_campaign_input_"+t+" paste.bcx_campaign_input_"+t+" keyup.bcx_campaign_input_"+t,handleInputEvents),"overlay"==bouncex.campaigns[t].type?(bouncex.overlay_visible=!0,bouncex.browser.iphone||bouncex.browser.ipad?(bouncex.preImpressScrollY=bouncex.window.scrollTop(),bouncex.html.addClass("bx-client-overlay-ios"),bouncex.body.addClass("bx-client-overlay-ios"),bouncex.html[0].scrollTop=1,bouncex.body[0].scrollTop=1):("auto"==(e=getStyle(bouncex.html[0],"overflow-y"))||"scroll"==e?bouncex.html:bouncex.body).addClass("bx-client-overlay")):"nanobar"==bouncex.campaigns[t].type||"conversionbar"==bouncex.campaigns[t].type||"liquidscreen"==bouncex.campaigns[t].type?(e=jQuery("#bx-campaign-"+t+"-clone"),"nanobar"==bouncex.campaigns[t].type||"liquidscreen"==bouncex.campaigns[t].type?bouncex.body.prepend(e):"conversionbar"==bouncex.campaigns[t].type&&bouncex.body.append(e)):"annotation"==bouncex.campaigns[t].type&&bxBind(window,"resize.bx_campaign_"+t,function(e){alignCampaign(t)},t),bouncex.browser.ios&&0<bouncex.campaigns[t].inputs.length&&("conversionbar"===bouncex.campaigns[t].type||"nanobar"===bouncex.campaigns[t].type)&&bouncex.campaigns[t].inputs.bind("touchstart.bcx_ios_input_fix_"+t,{ca_id:t},handleIosInputTouchStart).bind("blur.bcx_ios_input_fix_"+t,{ca_id:t},handleIosInputBlur),alignCampaign(t),!bouncex.campaigns[t].blur_gate_enabled||"agilityzone"!=bouncex.campaigns[t].type&&"annotation"!=bouncex.campaigns[t].type||blurGateAdd(t),bouncex.campaigns[t].shroud_on_hover&&addShroudOnHover(t),show_ad_restore_detached_children(t),setAccessibilityProperties(t),bouncex.campaigns[t].obj2.addClass("bx-impress"),isGbi2Campaign(t)&&bouncex.gbi2.handleImpression(t),showAlly(t),"no_effect"!==bouncex.campaigns[t].transitionEffect&&(n=jQuery("#bx-creative-"+t),bouncex.campaigns[t].obj1.addClass("bx-impress-in"),bouncex.on(n,"animationend webKitAnimationEnd",function(){bouncex.off(n,"animationend webKitAnimationEnd"),bouncex.campaigns[t].obj1.removeClass("bx-impress-in")})),bouncex.events[t].ally_timeout=setTimeout2(function(){runCampaignTimers(t),"overlay"==bouncex.campaigns[t].type&&(focusOnFirstFocusableElement(t,!0),bxBind(window,"focus.bouncex_window_focus_"+t,function(){focusOnFirstFocusableElement(t,!0)},t))},0),isPlayableVideoCampaign(t)&&playVideo(t),void(i.ad_closed=!1)))}function isPlayableVideoCampaign(e,t){var n=bouncex.campaigns[e],i=n.gbi&&n.gbi.isVideo;if(t){if(!n.video&&i&&n.gbi.playBeforeImpression&&!n.gbi.videoResponseLoaded)return 1;if(isBxPlayerCampaign(e)&&bouncex.video.ready(e))return n.video.status.isPlayable=!0}else{if(!isBxPlayerCampaign(e)&&i&&n.gbi.config.playOnImpression&&n.gbi.player&&"playing"!==n.gbi.player.getState())return 1;if(isBxPlayerCampaign(e)&&i&&!n.ad_shown)return n.video.status.isPlayable=!0}}function playVideo(e,t,n){var i,o=bouncex.campaigns[e];BrowserUtil.currentTab.isVisible()?(o.listeners.onTabVisibilityChange(function(){bouncex.video.playPauseVisibility(e)}),o.listeners.onScroll(function(){bouncex.video.playPauseVisibility(e)}),(i=o.video&&o.video.player||o.gbi&&o.gbi.player)&&(i.muted=i.autoplay=i.playsInline=!0),t?(isBxPlayerCampaign(e)?bouncex.video:bouncex.gbi).playVideoBeforeImpression(n,e):o&&o.gbi&&o.gbi.player?o.gbi.player.play():isBxPlayerCampaign(e)&&bouncex.video.play(e)):o.listeners.onTabVisible(playVideo.bind(this,e,t,n))}function runCampaignTimers(u){var d,e=bouncex.campaigns[u].obj2.find(".bx-timer");0<e.length&&(d=0,e.each(function(e,t){var n,i,o,a,r,s,c="campaign_timer_"+ ++d;bouncex.events[u][c]||(n=jQuery(t),i=n.attr("data-count-to"),o=n.attr("data-count-from"),a=n.attr("data-format"),r=n.attr("data-on-complete"),t=parseInt(n.attr("data-reset")),s=/{0?days}/.test(a),run_timer(i,o,a,s,r,t,n,c,u),bouncex.events[u][c]=setInterval2(function(){run_timer(i,o,a,s,r,!1,n,c,u)},1e3))}))}function blurGateAdd(e){var t=bouncex.campaigns[e];t.blur_gate_targets=jQuery(t.callout_t+" ~ *").add(t.blur_gate_inclusions).not(t.blur_gate_exclusions).not(".bxc"),t.blur_gate_filler_placement=t.calloutTarget.next().is(t.obj1)?t.obj1:t.calloutTarget,t.blur_gate_filler=jQuery(),(bouncex.browser.msie&&bouncex.browser.msie<=9?blurGateAddUsingRedactedContent:10===bouncex.browser.msie||11===bouncex.browser.msie||bouncex.browser.edge?blurGateAddUsingTextShadow:blurGateAddUsingCssFilters)(e)}function blurGateAddUsingRedactedContent(e){var t=bouncex.campaigns[e],n=0;t.blur_gate_targets.each(function(e,t){n+=jQuery(t).height()}),blurGateFillWithDummyContent(e,t.blur_gate_redacted_filler,n,0);var i=getStyle(t.calloutTarget[0],"color")||"#000",i=bouncex.addCss(".bx-blur-"+e+".bx-blur-redacted b { color:"+i+"!important; background-color:"+i+"!important; }",t.obj1[0],"bx-campaign-"+e+"-blur-redacted");t.blur_gate_filler=t.blur_gate_filler.add(i),t.blur_gate_targets.addClass("bx-blur-"+e+" bx-blur-hide")}function blurGateAddUsingTextShadow(e){var t=bouncex.campaigns[e];blurGateAddFillerIfNeeded(e,t.blur_gate_lorem_filler);var n=".bx-blur-"+e+".bx-blur-textshadow { text-shadow: 0 0 8px 1px "+(getStyle(t.calloutTarget[0],"color")||"#000")+"!important; }",n=bouncex.addCss(n,t.obj1[0],"bx-campaign-"+e+"-blur-shadow");t.blur_gate_targets.add(t.blur_gate_filler).addClass("bx-blur-"+e+" bx-blur-textshadow"),t.blur_gate_filler=t.blur_gate_filler.add(n)}function blurGateAddUsingCssFilters(e){var t=bouncex.campaigns[e];blurGateAddFillerIfNeeded(e,t.blur_gate_lorem_filler),t.blur_gate_targets.add(t.blur_gate_filler).addClass("bx-blur-"+e+" bx-blur")}function blurGateRemove(e){var t=bouncex.campaigns[e];t.blur_gate_filler&&t.blur_gate_filler.remove(),t.blur_gate_targets&&t.blur_gate_targets.removeClass("bx-blur-"+e+" bx-blur bx-blur-hide bx-blur-textshadow")}function blurGateAddFillerIfNeeded(e,t){var n=bouncex.campaigns[e],i=0;n.blur_gate_targets.each(function(e,t){return(i+=jQuery(t).height())<600});n=600-i;0<n&&blurGateFillWithDummyContent(e,t,n,0)}function blurGateFillWithDummyContent(e,t,n,i){var o,a,r=bouncex.campaigns[e];i<n&&(a=r.blur_gate_filler.length%t.length,o=jQuery(t[a]),r.blur_gate_filler_placement.after(o),0<(a=o.height())&&(r.blur_gate_filler=r.blur_gate_filler.add(o),blurGateFillWithDummyContent(e,t,n,i+a)))}function addShroudOnHover(e){var t,n=jQuery("#bx-creative-"+e),i=jQuery("#bx-hover-shroud-"+e);n.length&&i.length&&(bxBind(n,"mouseenter.bx-backdrop",function(){t=setTimeout2(function(){bouncex.campaigns[e].obj1.addClass("bx-hover-shroud-on")},150)},e),bxBind(n,"mouseleave.bx-backdrop",function(){clearTimeout(t),bouncex.campaigns[e].obj1.removeClass("bx-hover-shroud-on")},e))}function destroy_ad(e,t){bouncex.campaigns[e].mobile_interval&&clearInterval(bouncex.campaigns[e].mobile_interval),unload_campaign(e),close_ad(e,!0),bouncex.campaigns[e].ng&&jQuery("#bx-campaign-"+e+",#bx-campaign-"+e+"-clone").remove(),bouncex.campaigns[e]&&!t&&(bouncex.campaigns[e].activeTimeCallback&&ActiveTime.clearCallback(bouncex.campaigns[e].activeTimeCallback),delete bouncex.campaigns[e])}var zcCallbacks=[];function getScript(e,t){jQuery.ajax({url:e,cache:!0,dataType:"script",success:t})}function clickToCopy(e){var t=jQuery(e.target),n=t.text().trim();"Copied!"!=n?(e.originalEvent.clipboardData.setData("text/plain",n),e.preventDefault(),t.text("Copied!"),setTimeout2(function(){t.text(n)},1e3)):t.text(n)}function showGenieFormErrors(e,t,n,i){var o=(n=n||{}).errors||!1;if(!o)return!1;var a,r=jQuery();for(a in o){var s=t.find(".bx-error-"+e+"-"+a),c=o[a];s.length&&((s=s.text(c).closest(".bx-row")).addClass("bx-row-validation"),i&&i.length&&i.find(".bx-error-"+e+"-"+a).text(c).closest(".bx-row").addClass("bx-row-validation"),s.find(":input").attr("aria-invalid",!0).attr("aria-describedby","bx-error-"+e+"-"+a),r=r.add(s))}return!!r.length&&(r.eq(0).find(":input").focus(),!0)}function setSubmittedCookies(e,t){bouncex.campaigns[t].submitted=!0,bouncex.updateBounceCookie(function(e){e.campaigns[t].ls=getTime2(),bouncex.campaigns[t].is_ec&&(e.es=!0)})}function setRedactEmail(e,t){t=e.email&&preventUserTracking({"user:email":e.email,"user:source":"campaign_submit",campaignid:t});bouncex.state.redactEmail=t}function processSubmittedCampaignForm(e,t){var n;bouncex.carbTrap=bouncex.carbTrap||""!==e["carb-trap"],bouncex.carbTrap||(setSubmittedCookies(e,t),(e.email||e.phone_number)&&(setRedactEmail(e,t),e.email)&&(n=!!bouncex.campaigns[t].trigger_offsite_json&&JSON.parse(bouncex.campaigns[t].trigger_offsite_json))&&n.campaignId&&bouncex.push(["requestemail",{email:e.email,campaignId:n.campaignId,testmode:(0,_helpers.visitorTestMode)("bxdev")?1:0}]),reportGa(t,"submission"),event_js_eval(t,"submission",e),"function"==typeof bouncex.onformsubmit&&bouncex.onformsubmit(e.email),post_submit_redirect(t))}function processCampaignSubmitClose(e,t){bouncex.campaigns[e].acas&&(bouncex.events[e].timeout_auto_submission_close=setTimeout2(function(){bouncex.close_ad(e)},1e3*bouncex.campaigns[e].acas)),t&&bouncex.close_ad(e,!1,!0)}function processLastStep(e,t){bouncex.campaigns[e].submittedYet||(bouncex.campaigns[e].submittedYet=!0,processSubmittedCampaignForm(queryStringToObject(bouncex.campaigns[e].obj1.find(".bx-input").serialize()),e),processCampaignSubmitClose(e,t))}function loadCouponsAndValidateForm(e){CouponCodes.insertCodesInFormAndSubmit(e,function(e){validateForm(bouncex.campaigns[e].jform,e)}.bind(this,e))}function validateForm(o,a){var r=bouncex.campaigns[a].obj2.filter(".bx-pusher").find(".bx-active-step form");if(!bouncex.formSubmitting){bouncex.formSubmitting=!0,next_sequence_id();var e,t=bouncex.campaigns[a].next_step==bouncex.campaigns[a].numSteps&&!bouncex.campaigns[a].noPostSubmit||bouncex.campaigns[a].forceLastStep,s=bouncex.campaigns[a].current_step==bouncex.campaigns[a].numSteps&&(1===bouncex.campaigns[a].numSteps||bouncex.campaigns[a].noPostSubmit),c=t||s?1:0,n=o.serialize(),i=queryStringToObject(n);for(e in n+="&step="+bouncex.campaigns[a].current_step+"&visit_id="+bouncex.cookie.vid+"&m="+bouncex.cookie.m+"&d="+bouncex.cookie.d,n+="&cookie="+encodeURIComponent(bouncex.stringify(bouncex.cookie)),n+="&pos=overlay&step_name=before",n+="&last_step="+c,n+="&device_id="+bouncex.cookie.did,n+="&cts="+(0,_helpers.getTimeMs)(),n+="&pvid="+bouncex.state.pvid,n+="&url="+bouncex.calling_url,n+="&request_token="+bouncex.state.request_token,bouncex.cookie.t&&(n+="&testmode="+bouncex.cookie.t),bouncex.dg&&bouncex.dg.hardID&&(n+="&hard_id="+bouncex.dg.hardID),bouncex.dg&&bouncex.dg.softID&&(n+="&soft_id="+bouncex.dg.softID),bouncex.vars)n+="&var["+e+"]="+encodeURIComponent(bouncex.vars[e]);t=o.attr("action");o.find(".bx-row-validation").removeClass("bx-row-validation"),r.find(".bx-row-validation").removeClass("bx-row-validation"),o.find('[aria-invalid="true"]').removeAttr("aria-invalid");t={url:t,data:n,dataType:"jsonp",contentType:"multipart/form-data",crossDomain:!0,global:!1,success:function(e){var t=bouncex.events[a].edwTimeout,n=showGenieFormErrors(a,o,e,r),i=o.find(".bx-sms-optin").val();bouncex.formSubmitting=!1,t&&clearTimeout(t),n||(i&&bouncex.updateBounceCookie(function(e){e.ps=1}),bouncex.nextStep(a),c&&processLastStep(a,s)),jQuery.event.trigger({campaign_id:a,isEmptyResponse:!e,response:e,stepNumber:bouncex.campaigns[a].current_step,type:"bxValidateFormComplete"})},error:function(){bouncex.formSubmitting=!1,bouncex.events[a].edwTimeout&&clearTimeout(bouncex.events[a].edwTimeout),bouncex.nextStep(a)}};bouncex.campaigns[a].edw||(bouncex.events[a].edwTimeout=setTimeout2(function(){bouncex.nextStep(a),c&&processLastStep(a,s)},2500)),fireUserSubmitEvent(i,a),_records.default.addRecord({group:"email_capture",campaignId:a,data:t.data}),jQuery.ajax(t)}}function fireUserSubmitEvent(e,t){var n;!bouncex.carbTrap&&""===e["carb-trap"]&&(setRedactEmail(e,t),e.email||e.phone_number)&&(n={campaignid:t,source:"campaign_submit"},e.email&&(n.email=e.email),e.phone_number&&_phoneNumber.default.isValid(e.phone_number)&&((t=_phoneNumber.default.sanitize(e.phone_number))?(n.phone=t,n.phone_sha256=_phoneNumber.default.toSha256(t)):n.phone_unmatched=e.phone_number),bouncex.push(["user",n]))}function submitCampaignStep(e,t){return e=t||e,(0<bouncex.campaigns[e].jform.find(".bx-input").length?loadCouponsAndValidateForm:nextStep)(e),!1}function setJumpStep(e,t,n){bouncex.campaigns[e].jumpStep=t,bouncex.campaigns[e].forceLastStep=n}function nextStep(e){bouncex.campaigns[e].jumpStep&&(bouncex.campaigns[e].next_step=bouncex.campaigns[e].jumpStep,bouncex.campaigns[e].jumpStep=!1),bouncex.campaigns[e].next_step<=bouncex.campaigns[e].numSteps&&(bouncex.campaigns[e].obj2.find(".bx-step-"+e+"-"+bouncex.campaigns[e].current_step).removeClass("bx-active-step"),bouncex.campaigns[e].obj2.find(".bx-step-"+e+"-"+bouncex.campaigns[e].next_step).addClass("bx-active-step"),cacheCreativeForm(e,bouncex.campaigns[e].next_step),bouncex.campaigns[e].obj2.trigger("nextStep",[{currentStep:bouncex.campaigns[e].current_step}]),bouncex.campaigns[e].obj2.removeClass("bx-active-step-"+bouncex.campaigns[e].current_step).addClass("bx-active-step-"+bouncex.campaigns[e].next_step),bouncex.campaigns[e].current_step=bouncex.campaigns[e].next_step,bouncex.campaigns[e].next_step++,CouponCodes.insertCodesInCurrentStep(e),show_close(e),alignCampaign(e),setFocusableElements(e),focusOnFirstFocusableElement(e,!0))}function handleInputEvents(e){var t=jQuery(this),n=t.closest(".bx-row");switch(e.type){case"focus":n.addClass("bx-has-focus");break;case"blur":n.removeClass("bx-has-focus");break;case"keydown":t.css("min-height",t.outerHeight()),{Backspace:null,Tab:null,Enter:null,ShiftLeft:null,ShiftRight:null,ControlLeft:null,ControlRight:null,AltLeft:null,AltRight:null,CapsLock:null,ArrowLeft:null,ArrowUp:null,ArrowRight:null,ArrowDown:null,MetaLeft:null,OSLeft:null,MetaRight:null,OSRight:null}.hasOwnProperty(e.code)&&{8:null,9:null,13:null,16:null,17:null,18:null,20:null,37:null,38:null,39:null,40:null,91:null,93:null,224:null}.hasOwnProperty(e.keyCode)||n.addClass("bx-has-text");break;case"change":case"paste":case"keyup":0<t.val().length?n.addClass("bx-has-text"):n.removeClass("bx-has-text")}}function handleClickReporting(e,t,n){var i="default"===n,o=0<bouncex.campaigns[e].jform.find(".bx-input").length;"nothing"===n||"submit"===t&&i&&o||("close"===t&&i?n="close":i&&(n="click"),bouncex.report(e,n))}function handleClick(e){var t=e.data.ca_id,n=jQuery(e.target),i=n.attr("data-click")?n:n.closest("#bx-campaign-"+t+" [data-click]","#bx-campaign-"+t),o=i.attr("data-click"),a=parseInt(i.attr("data-ignore-bubbles"))&&!n.is(i),n=i.attr("data-click-report")||"default",r=parseInt(i.attr("data-fb-login"));if(0===i.length||a)return!0;if(e.preventDefault(),e.stopPropagation(),handleClickReporting(t,o,n),"close"===o)1==bouncex.utils.getNestedProp("bouncex.campaigns["+t+"].video.vast.isVPAID")&&bouncex.campaigns[t].video.vpaid.ad.stopAd(),bouncex.close_ad(t,!1,!0);else if("nothing"===o)r&&bouncex.fb.popCa(t);else if("hyperlink"===o){var s=i.attr("href");"_blank"===i.attr("target")?((c=window.open()).opener=null,c.location=s):setTimeout2(function(){window.location.href=s},300)}else if("sms-optin-mobile"==o)bouncex.sms.optInMobile(t);else if("trigger"===o){bouncex.report(t,"click");var c=parseInt(i.attr("data-click-trigger"));bouncex.campaigns[c]||(c=by_parent_id(c)),bouncex.campaigns[c]&&bouncex.show_ad(c)}else if("submit"===o){var u=parseInt(i.attr("data-submit-jump")),d=parseInt(i.attr("data-submit-force")),o=parseInt(i.attr("data-step-delay"));if(parseInt(i.attr("data-sms-optin"))&&bouncex.campaigns[t].jform.find(".bx-sms-optin").val(1),o)return setTimeout2(function(){r?bouncex.fb.nextStep(t,u,d):(bouncex.setJumpStep(t,u,d),bouncex.submitCampaignStep(t))},o);r&&!o?bouncex.fb.nextStep(t,u,d):(bouncex.setJumpStep(t,u,d),bouncex.submitCampaignStep(t))}}function run_timer(e,t,n,c,i,o,a,r,s){var u=bouncex.cookie.campaigns[s].fsa,t="first_impression"===t,d=getTime2(),l=e-d;t&&(o&&u+l<=0&&bouncex.updateBounceCookie(function(e){u=e.campaigns[s].fsa=d}),l+=u),l<=0&&(clearInterval(bouncex.events[s][r]),l=0,"close"===i&&close_ad(s));n=n.replace(/{(.*?)}/gi,function(e,t,n,i){var o=0,a="floor",r='<span class="bx-timer-units bx-timer-'+t+'">',s='<span class="bx-ally-label">'+("0days"===t?"days":t)+"</span>";switch(t){case"0days":case"days":a=i.split("{").length-1==0?"ceil":"floor",o=l/60/60/24;break;case"hours":o=c?l/60/60%24:l/60/60;break;case"minutes":o=l/60%60;break;case"seconds":o=l%60}return r+((o=Math[a](o))<10&&"days"!=t?"0"+o:o)+s+"</span>"});a.html(n)}function by_parent_id(e){for(var t in bouncex.campaigns)if(bouncex.campaigns[t].pid==e)return t;return null}function show_close(e,t){bouncex.campaigns[e].ng&&show_close_ng(e,t)}function show_close_ng(t,e){function n(e){bouncex.campaigns[t].obj2.removeClass("bx-has-close-inside bx-has-close-outside"),e&&bouncex.campaigns[t].obj2.addClass("bx-has-close-"+e)}var i=bouncex.campaigns[t].closePlacement[bouncex.campaigns[t].current_step-1];e?n(i=i||"outside"):1===bouncex.campaigns[t].current_step?bouncex.campaigns[t].close_button_delay&&(n(!1),bouncex.events[t].timeout_close_delay=setTimeout2(function(){n(bouncex.campaigns[t].closePlacement[bouncex.campaigns[t].current_step-1]),delete bouncex.events[t].timeout_close_delay,"overlay"==bouncex.campaigns[t].type&&setFocusableElements(t)},1e3*bouncex.campaigns[t].close_button_delay)):!bouncex.campaigns[t].show_close_step&&bouncex.events[t].timeout_close_delay||(n(i),bouncex.events[t].timeout_close_delay&&(clearTimeout(bouncex.events[t].timeout_close_delay),delete bouncex.events[t].timeout_close_delay)),"overlay"==bouncex.campaigns[t].type&&setFocusableElements(t)}function getCampaignTransitionEffect(e){var t=bouncex.campaigns[e].ng?0:1;return bouncex.campaigns[e][bouncex.cookie.campaigns[e].as>t?"te2":"te"]}function placeCampaign(e){var t=bouncex.campaigns[e];t.failed||(!t.ng||"agilityzone"!==t.type&&"annotation"!==t.type?bouncex.body.append(t.html):placeCallout(e),t.placed=!0)}function placeCallout(e){bouncex.campaigns[e].calloutTarget=bouncex.campaigns[e].calloutTarget||jQuery(bouncex.campaigns[e].callout_t).eq(0),bouncex.campaigns[e].calloutPlacementTarget=bouncex.campaigns[e].calloutPlacementTarget||jQuery(bouncex.campaigns[e].callout_pt).eq(0);var t,n=bouncex.campaigns[e].obj1||jQuery(bouncex.campaigns[e].html);bouncex.campaigns[e].deployment&&(t="bx-deployment-"+bouncex.campaigns[e].deployment,n.addClass(t)),"annotation"!==bouncex.campaigns[e].type&&n.css({marginTop:parseInt(bouncex.campaigns[e].callout_voffset)+"px",marginLeft:parseInt(bouncex.campaigns[e].callout_hoffset)+"px"}),(bouncex.campaigns[e].calloutPlacementTarget.length?bouncex.campaigns[e].calloutPlacementTarget:bouncex.campaigns[e].calloutTarget)[bouncex.campaigns[e].dom_placement_method](n)}function alignCampaign(e){var t=parseInt(bouncex.campaigns[e].callout_hoffset)||0,n=parseInt(bouncex.campaigns[e].callout_voffset)||0;if("nanotab"==bouncex.campaigns[e].type||"conversioncorner"==bouncex.campaigns[e].type||"dynamicwallpaper"==bouncex.campaigns[e].type||"railbar"==bouncex.campaigns[e].type)bouncex.campaigns[e].lastCalloutPos&&bouncex.campaigns[e].obj1.removeClass("bx-fixed-"+bouncex.campaigns[e].lastCalloutPos),bouncex.campaigns[e].obj1.addClass("bx-fixed-"+bouncex.campaigns[e].callout_pos),bouncex.campaigns[e].lastCalloutPos=bouncex.campaigns[e].callout_pos,"dynamicwallpaper"==bouncex.campaigns[e].type&&bouncex.website.content_width&&(p=jQuery("#bx-creative-"+e).width(),"content_right"==bouncex.campaigns[e].header_bottom_alignment?t+=parseInt((Number(bouncex.website.content_width)+Number(p))/2):t-=parseInt((Number(bouncex.website.content_width)+Number(p))/2)),bouncex.campaigns[e].obj1.find(".bx-slab").css("margin-left",t+"px"),-1!==bouncex.campaigns[e].callout_pos.indexOf("b")?bouncex.campaigns[e].obj1.find(".bx-align").css("margin-bottom",-n+"px"):bouncex.campaigns[e].obj1.find(".bx-align").css("margin-top",n+"px"),"dynamicwallpaper"==bouncex.campaigns[e].type&&bouncex.website.content_width&&(-1<bouncex.campaigns[e].header_bottom_alignment.indexOf("right")?bouncex.campaigns[e].obj1.find(".bx-shroud").css({left:"50%","margin-left":parseInt(bouncex.website.content_width/2)+"px"}):-1<bouncex.campaigns[e].header_bottom_alignment.indexOf("left")&&bouncex.campaigns[e].obj1.find(".bx-shroud").css({left:"auto",right:"50%","margin-right":parseInt(bouncex.website.content_width/2)+"px"}));else if("annotation"==bouncex.campaigns[e].type&&bouncex.campaigns[e].calloutTarget.length){var i=bouncex.campaigns[e].calloutTarget,o=bouncex.campaigns[e].dom_placement_method,a=bouncex.campaigns[e].calloutPlacementTarget,r=bouncex.campaigns[e].callout_anchor_pos.substr(0,1),s=bouncex.campaigns[e].callout_anchor_pos.substr(1,2),c=bouncex.campaigns[e].obj1.find(".bx-creative");bouncex.campaigns[e].obj1.hasClass("bx-annotation-"+bouncex.campaigns[e].callout_pos)||(bouncex.campaigns[e].lastCalloutPos&&bouncex.campaigns[e].obj1.removeClass("bx-annotation-"+bouncex.campaigns[e].lastCalloutPos),bouncex.campaigns[e].obj1.addClass("bx-annotation-"+bouncex.campaigns[e].callout_pos),bouncex.campaigns[e].lastCalloutPos=bouncex.campaigns[e].callout_pos);var u,d,l,p,b=parseInt(i.height()),g=parseInt(i.width()),m=parseInt(i.outerHeight()),h=parseInt(i.outerWidth()),f={x:0,y:0},x={top:0,right:0,bottom:0,left:0},v=0,_=0;if(a&&0<a.length&&(u=parseInt(a.outerHeight()),d=a.outerWidth()/2+a.offset().left,l=h/2+i.offset().left,p=a.outerHeight()/2+a.offset().top,e=m/2+i.offset().top,v={before:i.offset().top-a.offset().top,after:e+m/2-(p+u/2),prepend:i.offset().top-m/2-a.offset().top,append:e+m-(p+u)}[o],_=l-d),m-b||h-g)for(var y in x)x[y]=parseInt(i.css("padding-"+y))+parseInt(i.css("border-"+y+"-width"));r={l:-x.left-g/2,c:(x.right-x.left)/2,r:x.right+g/2}[r],m={t:x.top,m:x.top-m/2,b:-x.bottom-b}[s];"before"!==o&&"after"!==o||(s=parseInt(i.css("marginLeft"))-parseInt(i.css("marginRight")),f.x=(x.left-x.right+s)/2,"before"===o&&(f.y=-x.top),"after"===o&&(f.y=b+x.bottom+parseInt(i.css("marginBottom")))),c.css("margin","0 0 "+(m+f.y-v-n)+"px "+(r+f.x+_+t)+"px")}}function align_callout(e,t,n,i){n=void 0!==n&&n;var o=bouncex.campaigns[t].c_button,a=bouncex.campaigns[t],r=o.offset(),s=parseInt(r.top),c=parseInt(r.left),u=parseInt(e.height()),d=parseInt(e.width()),l=parseInt(o.outerWidth(!1)),p=parseInt(o.outerHeight(!1)),b=a.callout_pos.substr(0,1),t=a.callout_pos.substr(1,2),r=a.callout_anchor_pos.substr(0,1),o=a.callout_anchor_pos.substr(1,2);"l"==b?c+=0:"c"==b?c-=parseInt(d/2):"r"==b&&(c-=d),"r"==r?c+=l:"c"==r?c+=parseInt(l/2):"l"==r&&(c+=0),"t"==t?s+=0:"m"==t?s-=parseInt(u/2):"b"==t&&(s-=u),"b"==o?s+=p:"m"==o?s+=parseInt(p/2):"t"==o&&(s+=0),s+=parseInt(a.callout_voffset),c+=parseInt(a.callout_hoffset),"down"==n&&void 0!==i?e.animate({top:s+i+"px"},400):"up"==n?e.animate({top:s-i},400):e.css({top:s+"px",left:c+"px"})}function align_callout_public(e){bouncex.campaigns[e].c_button=jQuery(bouncex.campaigns[e].callout_t).eq(0),align_callout(jQuery("#campaign_"+e+"_container_callout"),e)}function handleIosInputTouchStart(e){addIosInputFix(e.data.ca_id)}function addIosInputFix(e){var t;bouncex.campaigns[e].hasIosInputFix||(t="conversionbar"===bouncex.campaigns[e].type?document.body.scrollHeight:0,bouncex.head.append('<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1" id="bx-ios-meta-'+e+'"/>'),window.scrollTo(0,t),bouncex.campaigns[e].hasIosInputFix=!0)}function handleIosInputBlur(e){removeIosInputFix(e.data.ca_id)}function removeIosInputFix(e){bouncex.campaigns[e].hasIosInputFix&&(jQuery("#bx-ios-meta-"+e).remove(),bouncex.campaigns[e].hasIosInputFix=!1)}function showAlly(e){"overlay"==bouncex.campaigns[e].type&&showAllyOverlay(e),bouncex.campaigns[e].obj1.attr("aria-hidden",!1)}function showAllyOverlay(e){bouncex.campaigns[e].tabDecoys.bind("focus.bcx_campaign_ally_"+e,{ca_id:e},handleTabDecoyFocus),bouncex.body.bind("keydown.bcx_campaign_ally_"+e,{ca_id:e},handleAllyKeyDown),bouncex.campaigns[e].focusedBeforeCampaign=jQuery(document.activeElement),bouncex.campaigns[e].siblings=bouncex.campaigns[e].obj2.siblings(),bouncex.campaigns[e].siblings.each(function(){var e,t,n=jQuery(this),i={"aria-hidden":"true","aria-live":"off"};for(e in i)i.hasOwnProperty(e)&&((t=n.attr(e))&&n.attr("data-bx-"+e,t),n.attr(e,i[e]))}),setFocusableElements(e)}function hideAlly(e){bouncex.campaigns[e].obj1.attr("aria-hidden",!0),"overlay"==bouncex.campaigns[e].type&&hideAllyOverlay(e)}function hideAllyOverlay(e){bouncex.campaigns[e].tabDecoys.unbind("focus.bcx_campaign_ally_"+e,handleTabDecoyFocus),bouncex.body.unbind("keydown.bcx_campaign_ally_"+e,handleAllyKeyDown),bouncex.campaigns[e].focusedBeforeCampaign&&bouncex.campaigns[e].focusedBeforeCampaign.focus()}function hideAllyOverlayPostOutro(e){bouncex.campaigns[e].siblings.each(function(){for(var e=jQuery(this),t=["aria-hidden","aria-live"],n=0;n<t.length;n++){var i=t[n],o=e.attr("data-bx-"+i);o?e.attr(i,o):e.removeAttr(i),e.removeAttr("data-bx-"+i)}})}function setFocusableElements(e){e=bouncex.campaigns[e];e.focusableEls=e.obj1.find("form, :input, a").not(":hidden, .bx-ally-tab-decoy, .bx-carb-trap, .bx-ally-no-focus")}function focusOnFirstFocusableElement(e,t){e=bouncex.campaigns[e],e=t?e.focusableEls.not(".bx-close-outside, .bx-close-inside"):e.focusableEls;e.eq(0)&&e.eq(0).focus()}function focusOnLastFocusableElement(e,t){e=bouncex.campaigns[e],e=t?e.focusableEls.not(".bx-close-outside, .bx-close-inside"):e.focusableEls;e.eq(e.length-1)&&e.eq(e.length-1).focus()}function handleAllyKeyDown(e){var t=e.data.ca_id;"Escape"!==e.code&&27!==e.keyCode||bouncex.close_ad(t)}function handleTabDecoyFocus(e){var t=e.data.ca_id,n=bouncex.campaigns[t];e.stopImmediatePropagation(),e.preventDefault(),this===n.tabDecoys.get(0)?focusOnLastFocusableElement(t):this===n.tabDecoys.get(1)&&focusOnFirstFocusableElement(t)}function isGbi2Campaign(e){e=bouncex.campaigns[e];return!!(e&&e.gbi&&e.gbi.placements)}function isBxPlayerCampaign(e){var t=bouncex.campaigns[e];return!!(t&&isGbi2Campaign(e)&&t.video)}function gbi2Enabled(){return bouncex.gbi2&&bouncex.website.gbi2Enabled}function init_activation_funcs(){for(var e in bouncex.instantiateCampaigns(),bouncex.campaigns)bouncex.campaigns[e].failed=!1,bouncex.events[e]=bouncex.events[e]||{},can_show_ad(e,!0)&&!bouncex.campaigns[e].ad_visible&&function(e){var t=0;bouncex.campaigns[e].activation_delay&&(t=calc_delay_cvt(bouncex.campaigns[e].activation_delay)),bouncex.events[e].timeout_activation=setTimeout2(function(){init_activation(e)},t)}(e)}function cacheCreativeForm(e,t){bouncex.campaigns[e].jform=jQuery("#bx-form-"+e+"-step-"+t)}function setAccessibilityProperties(e){e=bouncex.campaigns[e];bouncex.browser.msie&&"overlay"==e.type&&e.obj2.removeAttr("role"),e.tabDecoys=e.obj1.find(".bx-ally-tab-decoy")}function setTransitionEffect(e){var t=bouncex.campaigns[e];t.transitionEffect=getCampaignTransitionEffect(e),t.transitionEffect&&"no_effect"!==t.transitionEffect&&t.obj2.addClass("bx-fx-"+t.transitionEffect)}function assignDomReferencesToCampaign(e){bouncex.campaigns[e].obj1=jQuery("#bx-campaign-"+e),bouncex.campaigns[e].obj2=jQuery(".bx-campaign-"+e),bouncex.campaigns[e].obj2_detached_children=null}function applyCampaignStyles(e){var t=bouncex.campaigns[e];bouncex.addCss(t.styles,t.obj1[0],"bx-campaign-"+e)}function setCalloutTarget(e){return"annotation"!==e.type&&"agilityzone"!==e.type||setCampaignCalloutTargetToIndex(e,0)}function init_activation(e){var t,n=bouncex.campaigns[e],i=bouncex.website.osre&&n.osr_params_json&&!n.osrItems;return n&&(isGbi2Campaign(e)?(!gbi2Enabled()||n.gbi.hasBegunAuction||isMissingTarget(n)||bouncex.gbi2.initCampaign(e),0):setCalloutTarget(n)?void(n.failed||n.placed||(n.html&&placeCampaign(e),bouncex.website.gbi_enabled&&n.gbi&&n.gbi.stack_id&&(t=n.gbi.stack_id,bouncex.gbi.stacks[t].started||initGbiStack(t)),n.ng?(assignDomReferencesToCampaign(e),i||cacheCreativeForm(e,1),n.listeners=new EventListeners,event_js_eval(e,"preactivation"),n.styles&&applyCampaignStyles(e),n.control||n.noCreative||setTransitionEffect(e),loadImages(n.images||[],function(){if(bouncex.website.gbi_enabled&&n.gbi&&n.gbi.provider)bouncex.gbi.log(e,"requesting v2 ad unit"),bouncex.gbi.request(e);else if(i)if("product"!==bouncex.website.pts)bouncex.osr.init(e,!1);else{if(!bouncex.osr.viewItemId)return!1;bouncex.osr.init(e,bouncex.osr.viewItemId)}else activate_campaign(e)})):n.html?isDeprecatedFunction("ca.html else block"):activate_campaign(e))):(n.failed=!0,0))}function deactivate_campaign(e,t){var n=e.id||e.pid;if(e.video&&!e.video.status.stopped&&e.video.vast.isVPAID){bouncex.log(n,"stopping VPAID");var i=_helpers.default.onetimeFunction(deactivate_campaign.bind(null,e,t));return e.video.status.stopped=!0,e.video.vpaid.ad.subscribe(i,"AdStopped"),e.video.vpaid.ad.stopAd(),setTimeout2(i,200)}return bouncex.log(n,"deactivating"),e.obj1&&e.obj1.add(e.obj2).remove(),e.gbi.ready=!1,!t||setTimeout2(t,0)}function loadImagesCount(e,t){return 0==--e&&t(),e}function loadImages(e,t){var n,i,o=n=e.length;if(o)for(var a=0;a<n;a+=1)8===bouncex.browser.msie&&-1!==e[a].indexOf(".svg")?o=loadImagesCount(o,t):((i="string"==typeof e[a]?(0!==(i=e[a]).indexOf("http")&&0!==i.indexOf("//")&&(i="//"+i),jQuery('<img src="'+i+'"/>')):jQuery(e[a])).one("load",function(){o=loadImagesCount(o,t)}),i.length&&i.get(0).complete&&(o=loadImagesCount(o,t)));else t()}function activate_campaign(e){if(!bouncex.campaigns[e]||bouncex.campaigns[e].activated)return!1;bouncex.campaigns[e].gbi&&!isGbi2Campaign(e)?bouncex.website.gbi_enabled?bouncex.campaigns[e].gbi.provider||activateGbiCampaign(e):(bouncex.campaigns[e].failed=!0,bouncex.log(e+": incompatible extension")):(campaignEligible(e),activateInstruments(e))}function activateInstruments(e){bouncex.campaigns[e].hasBehavioralCriteria?(initBehavioralCriteriaInstruments(e),onlyBehavioralCriteriaNegations(e)&&(bouncex.campaigns[e].realtimeArmed=!0,initActivationInstruments(e))):initActivationInstruments(e)}function campaignEligible(e){var t=bouncex.campaigns[e];if(t.activated)return!1;t.activated=!0,report(e,"eligible"),event_js_eval(e,"activation"),t.dispatchEvent("activation.bx")}function initBehavioralCriteriaInstruments(e){var t,n,i=bouncex.campaigns[e].list_of_rt_activations||[];for(t in i)i.hasOwnProperty(t)&&((n=i[t]).val=parseSiteElementSelector(n.val),meetsCommonBehavioralCriteria(n.devicetype)&&(n=_activationTrigger.default.getOrCreate(n,e)).activate(bouncex.ca[n.type]))}function initActivationInstruments(e){var t,n,i=bouncex.campaigns[e].activations;for(t in i)i.hasOwnProperty(t)&&((n=i[t]).val=parseSiteElementSelector(n.val),meetsCommonBehavioralCriteria(n.devicetype)&&((n=_activationTrigger.default.getOrCreate(n,e)).isBehavioral=!0,n.activate(bouncex.ca[n.type])))}function meetsCommonBehavioralCriteria(e){return"all"==(e=e||"all")||e==(bouncex.state.mobile?"mobile":"desktop")}function onlyBehavioralCriteriaNegations(e){var t=bouncex.campaigns[e].list_of_rt_activations,e=t.filter(function(e){return e.shouldBeAbsent}).length;return e&&e===t.length}function behavioralCriteriaComplete(e,t){var n=bouncex.campaigns[e],i=BehavioralCriteria.evaluate.bind(BehavioralCriteria,n.activations_rt,e);return n.realtimeArmed?evaluateBehavioralTriggers(n.activations,e)&&i():(t&&i()&&(n.realtimeArmed=!0,initActivationInstruments(e)),!1)}function evaluateBehavioralTriggers(e,t){for(var n=0;n<e.length;n++){var i=_activationTrigger.default.getRegistered(e[n],t);if(i&&i.triggered)return!0}return!1}function activation_funcs(){var a={manual:function(e,t,n){},control:function(e,t,n){this.trigger(trigger_ad)},inter:function(e,t,n){bouncex.cookie.vpv>=e&&this.trigger(trigger_ad)}},r=new Map;return a.bounce=function(e,t,n){var i=this,o=bouncex.campaigns[n];return!!r.has(o)||(r.set(o,1),bouncex.state.mobile?bouncex.browser.ios&&!bouncex.browser.chrome?this.activate(a.__iosbounce):this.activate(a.__mobile_bounce):(bxBind("html,body","mouseout.bouncex_show_"+n,function(e){process_mouse_out(e,n,i)},n),(bouncex.browser.msie||bouncex.browser.safari&&bouncex.browser.safari<=50)&&bxBind("html,body","mousemove.bouncex_show_"+n,function(e){process_mouse_move(e,n)},n),void _keyboardTrigger.default.setupKeyboardExitEventHandler(n,i,trigger_ad,bxBind)))},a.iosbounce=function(e,t,n){return this.activate(a.bounce)},a.__iosbounce=function(e,t,n){var i=this,o="yes"===t,a={windowProps:new _helpers.default.WindowProps,touchEnded:!0,init:function(){this.scrollSpeed=0,this.previousPosition=null,this.threshold=this.windowProps.thresholdHeight},refresh:function(){var e=this.windowProps.refresh(),t=e.previous;this.orientation_changed=e.orientation!==t.orientation,this.threshold_expanded=this.__thresholdExpanded(),this.orientation_changed?this.init():e.clientHeight>t.clientHeight&&(this.threshold=e.thresholdHeight||e.clientHeight-t.clientHeight)},__thresholdExpanded:function(){var e=this.windowProps;if(e.thresholdHeight)return e.thresholdHeight>this.threshold;e=e.previous.clientHeight-e.clientHeight;return e&&e>=this.threshold},isScrollingUpSlowly:function(e){var t=(e=null!=e?e:this.scrollSpeed)<0,e=Math.abs(e)<=1;return t&&e},recalcScrollSpeed:function(e){var t=this.windowProps,n=this.previousPosition,i=this.previousPosition={timestamp:new Date,pageY:t.window.pageYOffset,touchY:e};if(!n)return this.scrollSpeed=0;var o=t.outerHeight,e=(i.timestamp-n.timestamp)/1e3,t=n.touchY&&i.touchY&&n.touchY-i.touchY,n=i.pageY-n.pageY;return this.scrollSpeed=Math.round((t||n)/e/o*100)/100}};a.init(),bxPassiveBind(window,"touchstart.bouncex_iosbounce_"+n,function(e){a.refresh(),a.touchEnded=!1,a.isResizing=!1;e=e.changedTouches[0];a.recalcScrollSpeed(e.clientY)},n),bxPassiveBind(window,"touchend.bouncex_iosbounce_"+n,function(e){a.touchEnded||(a.touchEnded=!0,e=e.changedTouches[0],a.recalcScrollSpeed(e.clientY),a.isResizing&&(clearTimeout(bouncex.events[n]["orientation_timeout_"+n]),bouncex.events[n]["orientation_timeout_"+n]=setIosBounceTimeout(n,a,o,i)))},n),bxPassiveBind(window,"resize.bouncex_iosbounce_"+n,function(){a.isResizing=!0,a.touchEnded&&(clearTimeout(bouncex.events[n]["orientation_timeout_"+n]),bouncex.events[n]["orientation_timeout_"+n]=setIosBounceTimeout(n,a,o,i))},n)},a.mobile_bounce=function(e,t,n){return this.activate(a.bounce)},a.__mobile_bounce=function(e,t,i){var o,a=this,r=0,s="yes"===t,c=0;clearInterval(bouncex.campaigns[i].mobile_interval),bouncex.campaigns[i].mobile_interval=setInterval2(function(){var e,t=window.scrollY,n=.1*Math.abs(t-r);r<t?o="down":t<r&&(o="up"),e=bouncex.campaigns[i].ad_visible&&s&&"down"===o,!0===bouncex.campaigns[i].ad_shown&&c++,can_show_ad(i)&&"up"===o&&50<n?(a.trigger(trigger_ad),s||clearInterval(bouncex.campaigns[i].mobile_interval)):e&&10<c&&(clearInterval(bouncex.campaigns[i].mobile_interval),close_ad(i,!0)),r=t},100)},a.timer=function(e,t,n){var i=this;bouncex.events[n].timeout_timer=setTimeout2(function(){i.trigger(trigger_ad)},1e3*parseInt(t))},a.back=function(i,e,o){var t,a,n;window.angular||(t=!1,(t=!("landing_page"==i&&!bouncex.state.iol)||t)&&(a=this,history.pushState&&(history.state&&history.state.bx_rewind||(bouncex.browser.chrome&&(bouncex.browser.iphone||bouncex.browser.ipad)?(n="touchend.bcx_rewind_fix_"+o,bxBind(bouncex.body,n,function(){bouncex.body.unbind(n),history.pushState({bx_rewind:"bx_rewind1"},"","")},o)):history.pushState({bx_rewind:"bx_rewind1"},"",decodeURIComponent(bouncex.calling_url))),bouncex.original_hash=window.location.hash,bxBind(bouncex.window,"popstate.bcx_popstate_"+o,function(e,t,n){history.state||"landing_page"==i&&bouncex.browser.safari&&history.state&&history.state.bx_rewind||bouncex.original_hash!==window.location.hash||history.state&&history.state.bx_rewind||"popstate"!=e.type||(can_show_ad(o)?(a.trigger(trigger_ad),clearTimeout(bouncex.rewind_control_timeout),bouncex.campaigns[o].control&&!bouncex.rewind_variation_timeout?bouncex.rewind_control_timeout=setTimeout2(function(){history.back()},300):bouncex.rewind_variation_timeout=setTimeout2(function(){delete bouncex.rewind_variation_timeout},300)):(bouncex.window.unbind("popstate.bcx_popstate_"+o),history.back()))},o))))},a.pers=function(e,t,n){var i=!1;bouncex.campaigns[n].is_pers=!0,(i="landing_page"==e&&bouncex.state.iol||"landing_page"!=e?!0:i)&&this.trigger(trigger_ad)},a.worm=function(e,t,n){noteCookieAdShown(n),report(n,"pop",{"pop:activation":"worm"}),teleport("_self",t)},a.inactivity=function(e,t,n){var i=this,o="mousemove.bouncex_inactivity_"+n+" keydown.bouncex_inactivity_"+n+" DOMMouseScroll.bouncex_inactivity_"+n+" mousewheel.bouncex_inactivity_"+n+" mousedown.bouncex_inactivity_"+n+" touchstart.bouncex_inactivity_"+n+" touchmove.bouncex_inactivity_"+n+" focus.bouncex_inactivity_"+n;bxPassiveBind(window,o,function(){clearTimeout(bouncex.events[n].inactivity),bouncex.events[n].inactivity=setInactivityTimeout(n,t,o,i)},n),bouncex.events[n].inactivity=setInactivityTimeout(n,t,o,i)},a.reactivity=function(e,t,n){var i=this,o="mousemove.bouncex_activity_"+n+" keydown.bouncex_activity_"+n+" DOMMouseScroll.bouncex_activity_"+n+" mousewheel.bouncex_activity_"+n+" mousedown.bouncex_activity_"+n+" touchstart.bouncex_activity_"+n+" touchmove.bouncex_activity_"+n+" focus.bouncex_activity_"+n;bxPassiveBind(window,o,function(){clearTimeout(bouncex.events[n].reactivity),bouncex.events[n].reactivity=setReactivityTimeout(n,t,o,i)},n),bouncex.events[n].reactivity=setReactivityTimeout(n,t,o,i)},a.scroll=function(p,e,b,g,m){var h,f,x,v=this,_=jQuery(document).height(),y=bouncex.wndsize().height,w=parseInt(e);p=1===p,g=!!g&&parseInt(g),x=p||g,m=!!m,bxBind(window,"scroll.bouncex_"+b,function(e){var t,n=(new Date).getTime(),i=window.pageYOffset||document.body.scrollTop,o=bouncex.wndsize(),a=o.height!==y,r=o.height+i+5>=_||i-5<=0,s=bouncex.campaigns[b].ad_visible,c=!x,u=!x,d=p?(_-o.height-i)/(_-o.height)*100:(i+o.height)/_*100,l=p?w<=d:100<parseInt(d)+w&&h<d;if(x&&void 0===f)return f=n,void(h=d);x&&(t=p?(_-o.height)*(h-d)/100:_*(d-h)/100,i=100*Math.abs(t/(n-f)),t=0<t,c=p&&!t||!p&&t,u=!g||g<=i),f=n,h=d,y=o.height,m&&!a&&!r&&(s&&!c||s&&!l)&&(close_ad(b,!0),can_show_ad(b,!0)||jQuery(window).unbind("scroll.bouncex_"+b)),u&&l&&c&&!a&&!r&&(v.trigger(trigger_ad),can_show_ad(b,!0)||m||jQuery(window).unbind("scroll.bouncex_"+b))},b)},a.mclick=function(n,e,i){var t,o=this;"left"==n&&"teleport"==bouncex.campaigns[i].overlay&&"_self"!==bouncex.campaigns[i].overlay_teleport_type?(t=function(){o.trigger(trigger_ad)},bxBind(window.document,"click.bouncex_mclick_"+i,t,i)):(t=function(e){var t=e.keyCode||e.which||e.button;e.button&&2==e.button&&(t=3),("left"==n&&1==t||"any"==n)&&o.trigger(trigger_ad),("right"==n&&3==t||"any"==n)&&o.trigger(trigger_ad),can_show_ad(i,!0)||bouncex.off(jQuery(window.document),"mousedown.bouncex_mclick_"+i)},bxBind(window.document,"mousedown.bouncex_mclick_"+i,t,i))},a.hover=function(e,t,n,i){e=e?Math.round(1e3*e):500,i=1===i;var o=t.replace(/\W/g,""),a=jQuery(t),r=showHover.bind(null,n,o,this),s=handleHover.bind(null,n,o,e,t,i,r),c=unhandleHover.bind(null,n,o);bxBind(t,"mouseenter.bx"+n+o,s,n),bxBind(t,"mouseleave.bx"+n+o,c,n),bouncex.events[n]["listener_hover"+o]=function(){a.unbind("mouseenter.bx"+n+o,s),a.unbind("mouseleave.bx"+n+o,c),a.unbind("mouseleave.bx"+n+o,r)}},a.clickon=function(e,t,n){function i(){jQuery(t).length&&(o.trigger(trigger_ad),can_show_ad(n,!0)||bouncex.events[n]["listener_clickon"+a]())}var o=this,a=t.replace(/\W/g,"");void 0!==bouncex.body.on?(bouncex.body.on("click.bx"+n+a,t,i),bouncex.events[n]["listener_clickon"+a]=function(){bouncex.body.off("click.bx"+n+a,t,i)}):(bouncex.body.delegate(t,"click.bx"+n+a,i),bouncex.events[n]["listener_clickon"+a]=function(){bouncex.body.undelegate(t,"click.bx"+n+a,i)})},a.change=function(e,t,n){function i(){jQuery(t).length&&(o.trigger(trigger_ad),can_show_ad(n,!0)||bouncex.events[n]["listener_change"+a]())}var o=this,a=t.replace(/\W/g,"");void 0!==bouncex.body.on?(bouncex.body.on("change.bx"+n+a,t,i),bouncex.events[n]["listener_change"+a]=function(){bouncex.body.off("change.bx"+n+a,t,i)}):(bouncex.body.delegate(t,"change.bx"+n+a,i),bouncex.events[n]["listener_change"+a]=function(){bouncex.body.undelegate(t,"change.bx"+n+a,i)})},a.waypoint=function(r,s,c,e,u,d,l,p){var b=this;u=!!u,d=!!d,l=!!l,p=!!p,offsetUnitIsPercent=!!e,r=(parseInt(r)||0)/(offsetUnitIsPercent?100:1);function t(){var e,t,n,i,o,a=getCurrentScrollPosition(h,d);a!==f&&(i=u^f<a,e=!g.ad_shown||g.ad_closed,t=p&&!e,(n=(i?e:t)&&jQuery(s).eq(0))&&n.length&&(o=n.height(),i=offsetUnitIsPercent?o*r:r,(o=(o=n.offset().top+i+(l?0:o))<f^o<a)&&e&&b.trigger(trigger_ad),o&&t&&close_ad(c,!0)),g.trypopTriggered&&(g.failed||(p?g.ad_closed:g.ad_shown)&&!can_show_ad(c,!0))&&h.unbind(m),f=a)}var g=bouncex.campaigns[c],m="scroll.bx.waypoint."+c+" resize.bx.waypoint."+c,h=bouncex.window,n=null,f=getCurrentScrollPosition(h,d);bxBind(window,m,function(){clearTimeout(n),n=setTimeout2(t,30)},c)},a.highlight_text=function(i,e,o,a){var r=this;i=parseInt(i)||5,a=parseInt(a)||5;var s,c,e=jQuery(e).eq(0);e.length&&(s=e.text().toLowerCase().trim(),c="mouseup.bouncex_highlight_text_"+o,bxBind(bouncex.body,c,function(){var e="";window.getSelection?e=window.getSelection().toString().toLowerCase():document.selection&&"Control"!=document.selection.type&&(e=document.selection.createRange().text.toLowerCase());var t=e.substring(e.length-i,e.length),n=e.substring(0,i);e.length>=i&&(-1<e.indexOf(s)||-1<s.indexOf(e)||t.length>=i&&-1<s.indexOf(t)||n.length>=i&&-1<s.indexOf(n))&&e.length<=s.length+a&&(r.trigger(trigger_ad),can_show_ad(o,!0)||bouncex.body.unbind(c))},o))},a.tab_unfocus=function(e,t,n,i,o){var a=parseInt(e),r=this;bxBind(window,"blur.bouncex_tabunfocus_"+n,function(){bouncex.events[n].tabunfocus_delay=bouncex.events[n].tabunfocus_delay||setTimeout2(function(){r.trigger(trigger_ad),bxBind(window,"focus.bouncex_tabunfocus_"+n,function(){bouncex.window.unbind("focus.bouncex_tabunfocus_"+n),"yes"===i&&report(n,"click"),"yes"===o&&(clearTimeout(bouncex.events[n].tabunfocus_delay),delete bouncex.events[n].tabunfocus_delay,close_ad(n))},n),can_show_ad(n,!0)||bouncex.window.unbind("blur.bouncex_tabunfocus_"+n)},1e3*a)},n)},a.tab_focus=function(e,t,n,i,o){var a=parseInt(e)||0,r=this;bxBind(window,"blur.bouncex_tab_focus_"+n,function(){bouncex.events[n].tab_focus_delay=bouncex.events[n].tab_focus_delay||setTimeout2(function(){bxBind(window,"focus.bouncex_tab_focus_"+n,function(){r.trigger(trigger_ad),bouncex.window.unbind("focus.bouncex_tab_focus_"+n),"yes"===i&&report(n,"click"),"yes"===o&&(clearTimeout(bouncex.events[n].tab_focus_delay),delete bouncex.events[n].tab_focus_delay,close_ad(n)),can_show_ad(n,!0)||bouncex.window.unbind("blur.bouncex_tab_focus_"+n)},n)},1e3*a)},n)},a.finished_typing=function(e,t,n){var i,o=this,a=jQuery(t).eq(0);a.length&&(i=t.replace(/\W/g,""),bxBind(t,"keyup.bx"+n+i+", blur.bx"+n+i,function(e){var t=jQuery(this).val();handleFinishedTyping(e,n,i,a,o,t)},n))},a.active_time=function(e,t,n){var i=this,t=t;bouncex.campaigns[n].activityArgs=i,bouncex.campaigns[n].activeTimeCallback=ActiveTime.addCallback(t,function(){i.trigger(trigger_ad)})},Object.keys(a).forEach(function(e){"function"==typeof a[e]&&(a[e]=_activationTrigger.default.wrapActivationFunction(e,a[e]))}),a}function getCalloutTargets(e,t){return null==t&&(t=evalCalloutTarget(e)),jQuery(t)}function setCampaignCalloutTargetToIndex(e,t){return e.calloutTarget=getCalloutTargets(e).eq(t),0<e.calloutTarget.length}function handleHover(e,t,n,i,o,a){bouncex.events[e]["timeout_"+t]=setTimeout2(function(){o?bxBind(i,"mouseleave.bx"+e+t,a,e):a()},n)}function unhandleHover(e,t){clearTimeout(bouncex.events[e]["timeout_"+t]),delete bouncex.events[e]["timeout_"+t]}function showHover(e,t,n){n.trigger(trigger_ad),can_show_ad(e,!0)||bouncex.events[e]["listener_hover"+t]()}function getCurrentScrollPosition(e,t){return e.scrollTop()+(t?e.height():0)}function setInactivityTimeout(e,t,n,i){return setTimeout2(function(){i.trigger(trigger_ad),bxPassiveUnbind(window,n)},1e3*t)}function setReactivityTimeout(t,n,i,o){return setTimeout2(function(){bxPassiveUnbind(window,i);var e="mousemove.bouncex_reactivity_"+t+" keydown.bouncex_reactivity_"+t+" DOMMouseScroll.bouncex_reactivity_"+t+" mousewheel.bouncex_reactivity_"+t+" mousedown.bouncex_reactivity_"+t+" touchstart.bouncex_reactivity_"+t+" touchmove.bouncex_reactivity_"+t+" focus.bouncex_reactivity_"+t;bxPassiveBind(window,e,function(){bxPassiveUnbind(window,e),o.trigger(trigger_ad),can_show_ad(t,!0)&&bxPassiveBind(window,i,function(){clearTimeout(bouncex.events[t].reactivity),bouncex.events[t].reactivity=setReactivityTimeout(t,n,i,o)},t)},t)},1e3*n)}function handleFinishedTyping(e,t,n,i,o,a){clearTimeout(bouncex.events[t]["typing_timeout_"+n]),""!==a&&("Tab"!==e.code&&"Enter"!==e.code||9!==e.keyCode&&13!==e.keyCode)&&(bouncex.events[t]["typing_timeout_"+n]=setTimeout2(function(){o.trigger(trigger_ad),can_show_ad(t,!0)||i.unbind("keyup.bx"+t+n+", blur.bx"+t+n)},"blur"===e.type?0:1500))}bouncex.caAutofill=function(e,t){for(var n in t="object"===_typeof(t)?t:{})t.hasOwnProperty(n)&&bouncex.campaigns[e].inputs.filter("[name="+n+"]").val(t[n]).trigger("click")},bouncex.fb={login:function(n){n="function"==typeof n?n:function(){},window.FB?FB.login(function(e){e.authResponse?FB.api("/me",{fields:"id,email,first_name,last_name,gender,name"},function(e){var t;e.error&&(t=e.error&&e.error.message,bouncex.fb.warn("FB.api returned an error: "+t)),e.fname=e.first_name,e.lname=e.last_name,n(e)}):(bouncex.fb.warn("FB.login not authenticated"),n())},{scope:"email, public_profile"}):(bouncex.fb.warn("FB sdk not found"),n())},nextStep:function(t,n,i){bouncex.fb.login(function(e){return bouncex.caAutofill(t,e),bouncex.setJumpStep(t,n,i),bouncex.submitCampaignStep(t),!1})},popCa:function(n){bouncex.fb.login(function(e){var t=0;e&&e.email&&(bouncex.campaigns[n].inputs.filter("[name=email]").val("Autofilling from Facebook...").trigger("click"),t=1500),setTimeout2(function(){bouncex.caAutofill(n,e)},t)})},warn:function(e){_logger.default.warn({group:"bouncex.fb",message:e})}};var ActiveTime={initialized:!1,timeCount:0,events:"mousemove.bouncex_active_time_action keydown.bouncex_active_time_action DOMMouseScroll.bouncex_active_time_action mousewheel.bouncex_active_time_action mousedown.bouncex_active_time_action touchstart.bouncex_active_time_action touchmove.bouncex_active_time_action focus.bouncex_active_time_action",callbacks:{},inactivityTimeout:null,activityInterval:null,addCallback:function(e,t){if(e=parseInt(e),!isNaN(e)){var n=generateUniqueId();return ActiveTime.callbacks[n]={seconds:e,callback:t},ActiveTime.initialized||(ActiveTime.inactivityTimeout=ActiveTime._resetInactivityTimeout(),bxPassiveBind(window,ActiveTime.events,ActiveTime._handleActivity),ActiveTime.initialized=!0),n}},clearCallback:function(e){ActiveTime.callbacks&&ActiveTime.callbacks[e]&&delete ActiveTime.callbacks[e],ActiveTime._shutdownIfNoRemainingCallbacks()},_increase:function(){for(var e in ActiveTime.timeCount++,ActiveTime.callbacks){var t=ActiveTime.callbacks[e];t.seconds<=ActiveTime.timeCount&&(t.callback(),ActiveTime.clearCallback(e))}},_shutdownIfNoRemainingCallbacks:function(){ActiveTime.callbacks&&!jQuery.isEmptyObject(ActiveTime.callbacks)||(ActiveTime._clearActivityInterval(),clearTimeout(ActiveTime.inactivityTimeout),bxPassiveUnbind(window,ActiveTime.events),ActiveTime.initialized=!1)},_handleActivity:function(){ActiveTime.inactivityTimeout=ActiveTime._resetInactivityTimeout(),ActiveTime.activityInterval||(ActiveTime.activityInterval=setInterval2(ActiveTime._increase,1e3))},_resetInactivityTimeout:function(){return clearTimeout(ActiveTime.inactivityTimeout),setTimeout2(ActiveTime._clearActivityInterval,5e3)},_clearActivityInterval:function(){clearInterval(ActiveTime.activityInterval),delete ActiveTime.activityInterval}};function process_mouse_move(e,t){(e.layerY||e.pageY)-(document.body.scrollTop||document.documentElement.scrollTop)<=18?bouncex.direction="up":bouncex.direction=!1,(0<bouncex.campaigns[t].iao||0<bouncex.campaigns[t].rao)&&(e=e.layerX||e.pageX,bouncex.lastX=0<e?e:1)}function process_mouse_out(e,t,n){var i=e||window.event,o=i.toElement,a=i.relatedTarget,i=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;a&&(a===this||bouncex.contains(this,a))||o&&"HTML"!=o.nodeName||(bouncex.browser.msie&&"up"==bouncex.direction?0<bouncex.campaigns[t].iao&&bouncex.lastX<bouncex.campaigns[t].iao||0<bouncex.campaigns[t].rao&&i-bouncex.lastX<bouncex.campaigns[t].rao||(n.trigger(trigger_ad),can_show_ad(t,!0)||jQuery("html,body").unbind("mouseout.bouncex_show_"+t)):!bouncex.browser.msie&&(e.clientY<5&&-50<e.clientY||bouncex.browser.safari&&(-32768==e.clientY||671==e.clientY)&&"up"==bouncex.direction)&&(0<bouncex.campaigns[t].iao&&(e.layerX||e.pageX)<bouncex.campaigns[t].iao||0<bouncex.campaigns[t].rao&&i-(e.layerX||e.pageX)<bouncex.campaigns[t].rao||(40<bouncex.browser.chrome?(bouncex.events[t].bouncex_timeout||(bouncex.events[t].bouncex_timeout=setTimeout2(function(){n.trigger(trigger_ad),bouncex.events[t].bouncex_timeout=!1,jQuery(document).unbind("mouseenter.bx_bouncex_mousenter_"+t),can_show_ad(t,!0)||jQuery("html,body").unbind("mouseout.bouncex_show_"+t)},0)),bxBind(document,"mouseenter.bx_bouncex_mousenter_"+t,function(){jQuery(document).unbind("mouseenter.bx_bouncex_mousenter_"+t),clearTimeout(bouncex.events[t].bouncex_timeout),bouncex.events[t].bouncex_timeout=!1},t)):(n.trigger(trigger_ad),can_show_ad(t,!0)||jQuery("html,body").unbind("mouseout.bouncex_show_"+t)))))}function teleport(e,t){return"_blank"==e?window.open(t,e):setTimeout2(function(){window.open(t,e)},300)}function setIosBounceTimeout(t,n,i,o){return setTimeout2(function(){var e;n.touchEnded&&n.isResizing&&(n.refresh(),n.isResizing=!1,!n.orientation_changed)&&(e=(n.scrollSpeed+n.recalcScrollSpeed())/2,n.isScrollingUpSlowly()||n.isScrollingUpSlowly(e)||(n.threshold_expanded?(o.trigger(trigger_ad),i||can_show_ad(t,!0)||(bxPassiveUnbind(window,"resize.bouncex_iosbounce_"+t),bxPassiveUnbind(window,"touchstart.bouncex_iobounce_"+t),bxPassiveUnbind(window,"touchend.bouncex_iosbounce_"+t))):i&&bouncex.campaigns[t].ad_visible&&(close_ad(t,!0),can_show_ad(t,!0)||(bxPassiveUnbind(window,"resize.bouncex_iosbounce_"+t),bxPassiveUnbind(window,"touchstart.bouncex_iobounce_"+t),bxPassiveUnbind(window,"touchend.bouncex_iosbounce_"+t)))))},100)}function setTimeout2(e,t){return bouncex.website.fbe&&t<1?(tryCatch(e)(),!1):setTimeout(tryCatch(e),t)}function evalCalloutTarget(e){return e.callout_t=parseSiteElementSelector(e.callout_t),e.callout_t}function parseSiteElementSelector(e){if(e&&0<e.length&&"{"===e.charAt(0)){var t=e.substr(1,e.length-2);return bouncex.website.els[t]}return e}function setInterval2(e,t){return setInterval(tryCatch(e),t)}function isMissingTarget(e){return e.missingTarget=!1,("annotation"===e.type||"agilityzone"===e.type)&&(null==e.calloutTarget?e.missingTarget=0==getCalloutTargets(e).length:e.missingTarget=!(e.calloutTarget&&0<e.calloutTarget.length),e.missingTarget)}function loadBounceCss(e){_creativesBaseStyles.default.load(e)}function bxBind(e,t,n,i){e=jQuery(e),i&&(bouncex.events[i][t]=e),e.bind(t,tryCatch(n,{source:"bxBind",ca_id:i}))}function bxPassiveBind(e,t,n,i){var o=t.split(" ");n=tryCatch(n,{source:"bxPassiveBind",ca_id:i}),bouncex.passiveEventRegistry[t]=n,i&&(bouncex.events[i][t]=function(){bxPassiveUnbind(e,t)});for(var a=0,r=o.length;a<r;a++){var s=o[a].split(".")[0];addEvent(e,s,n,!0)}}function bxPassiveUnbind(e,t){for(var n=bouncex.passiveEventRegistry[t],i=t.split(" "),o=0,a=i.length;o<a;o++)removeEvent(e,i[o].split(".")[0],n,!0)}function addEvent(e,t,n,i){e.addEventListener(t,n,!!i&&{passive:!0,capture:!1})}function removeEvent(e,t,n,i){e.removeEventListener(t,n,!!i&&{passive:!0,capture:!1})}function calc_delay_cvt(e){e=1e3*(bouncex.cookie.cvt-getTime2()+e);return e<0?0:e}function fs(){if(!bouncex.browser.msie)return!0;if(void 0===bouncex.fixed_supported)try{bouncex.fixed_supported=isFixedSupported()}catch(e){bouncex.fixed_supported=!0}return bouncex.fixed_supported}function isFixedSupported(){var e=document.body;if(document.createElement&&e&&e.appendChild&&e.removeChild){var t=document.createElement("div");if(!t.getBoundingClientRect)return null;t.innerHTML="x",t.style.cssText="position:fixed;top:100px;",e.appendChild(t);var n=e.style.height,i=e.scrollTop;e.style.height="3000px",e.scrollTop=500;var o=t.getBoundingClientRect().top;e.style.height=n;o=100===o;return e.removeChild(t),e.scrollTop=i,o}return null}function getTime2(){var e=bouncex.server_client_time_diff||0;return parseInt((new Date).getTime()/1e3)+e}function generateUniqueId(){return(0,_helpers.getTimeMs)()+Math.random()}function zoomDisable(e){}function zoomEnable(){}function getStyle(e,t){var n;return e.currentStyle?n=e.currentStyle[t]:window.getComputedStyle&&(n=document.defaultView.getComputedStyle(e,null).getPropertyValue(t)),n}function queryStringToObject(e){for(var t=[],n=e.split("&"),i=0;i<n.length;i++){var o=n[i].split("=");t[o[0]]=o[1]?decodeURIComponent(o[1].replace(/\+/g," ")):""}return t}function googleTrustedStoresBadgeFix(e){"conversionbar"!=bouncex.campaigns[e].type&&"conversioncorner"!=bouncex.campaigns[e].type&&"liquidscreen"!=bouncex.campaigns[e].type&&"nanobar"!=bouncex.campaigns[e].type&&"nanotab"!=bouncex.campaigns[e].type&&"overlay"!=bouncex.campaigns[e].type&&"railbar"!=bouncex.campaigns[e].type||bouncex.addCss("body > #___ratingbadge_0 { z-index: 2147483627 !important; }",bouncex.campaigns[e].obj1[0],"bx-campaign-"+e+"-gts")}exports.ActiveTime=ActiveTime;var init_vars=InitSequence.preInit1.integrations,bcx_init=InitSequence.preInit1.entry;function isDeprecatedFunction(e){e=(isDeprecatedFunction.caller&&isDeprecatedFunction.caller.name||"")+"-"+(e||"");bouncex.err("deprecated function: "+e)}exports.bcx_init=bcx_init,bouncex.log=function(){var e=console.log.bind?console.log.bind(console):window.console.log;(0,_helpers.isBxInternalTraffic)()&&e.apply(null,arguments)},bouncex.console={trace:function(){(0,_helpers.isBxInternalTraffic)()&&console.trace&&console.trace()},group:function(){var e=console.group.bind?console.group.bind(console):window.console.group;((0,_helpers.visitorTestMode)("office")||(0,_helpers.visitorTestMode)("bxdev"))&&e.apply(null,arguments)},groupCollapsed:function(){var e=console.groupCollapsed.bind?console.groupCollapsed.bind(console):window.console.groupCollapsed;(0,_helpers.isBxInternalTraffic)()&&console.groupCollapsed&&e.apply(null,arguments)},groupEnd:function(){var e=console.groupEnd.bind?console.groupEnd.bind(console):window.console.groupEnd;(0,_helpers.isBxInternalTraffic)()&&console.groupEnd&&e.apply(null,arguments)}},bouncex.table=function(){var e=console.table.bind?console.table.bind(console):window.console.table;("production"!==bouncex.env||(0,_helpers.visitorTestMode)("office")||(0,_helpers.visitorTestMode)("bxdev"))&&e.apply(null,arguments)},bouncex.loaded=!0,bouncex.init1Response=tryCatch(function(e){bouncex.state=e.state,"no_consent"===bouncex.complianceFlag||"gdpr_no_consent"===bouncex.complianceFlag&&bouncex.state.gdpr||(bouncex.cookie=e.cookie,bouncex.brandStyles=e.brand_styles,bouncex.webfonts=e.webfonts,bouncex.campaigns=e.campaigns,bouncex.creatives=e.creatives,bouncex.debug=e.debug,bouncex.testmode=e.testmode,bouncex.gbi.stacks=e.gbi_stacks,bouncex.website.gbi2Enabled=e.gbi2_enabled,bouncex.website.sspConfig=e.ssp_config,bouncex.website.pushFilepath=e.push_filepath,bouncex.website.smsEnabled=e.sms_enabled,bouncex.website.smsTC=e.sms_terms_conditions_link,bouncex.website.smsShortCodes=e.sms_short_codes,bouncex.website.brandName=e.brand_name,bouncex.website.adsConfig=e.ads_config,setBounceCookie(),InitSequence.postInit1.entry(),ComplianceChecks.report())});var BehavioralCriteria={evaluate:function(e,t){this._debug.init(t);for(var n=0;n<e.length;n++){var i=e[n];if(this._debug.initCriteriaSet(i,n),!this._andCriteriaSatisfied(i,t))return!1}return!0},_andCriteriaSatisfied:function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(this._orCriteriaSatisfied(i,t))return this._debug.setCriteriaStatus(!0),!0}return this._debug.setCriteriaStatus(!1),!1},_orCriteriaSatisfied:function(e,t){t=_activationTrigger.default.getRegistered(e,t),t=t&&t.triggered?!e.shouldBeAbsent:!!e.shouldBeAbsent;return this._debug.setActivationStatus(e,t),t},_debug:{init:function(e){this.campaignId=e,void 0===this.shouldDebug&&(this.shouldDebug=(0,_helpers.isBxInternalTraffic)())},initCriteriaSet:function(e,t){this.shouldDebug&&(this.failedCriteriaArr=[],this.setInfo="behavioral criteria - criteria "+t+": "+e.map(function(e){return e.activation}).join(","))},setActivationStatus:function(e,t){e.status=t,this.shouldDebug&&(t||this.failedCriteriaArr.push(e.type))},setCriteriaStatus:function(e){this.shouldDebug&&(e=e?" - passed":" - failed ("+this.failedCriteriaArr.join(",")+")",this.log(this.campaignId,this.setInfo+e))},log:function(e,t){this.shouldDebug&&_logger.default.info({group:"rtbc",message:t,color:"#ff69b4",campaignId:e})}}};exports.BehavioralCriteria=BehavioralCriteria;var CustomVariables={_hasInit:!1,_reloadCampaignVarNames:[],_allChangedVars:[],init:function(){this._hasInit||(bouncex.vars={},this.varsToExpire=[],bouncex.website.vars=initTestModeParts("cvars"),this._index={},bouncex.website.vars.forEach(function(e,t){this._index[e.name]=t}.bind(this))),this.evalVars(),setTimeout(function(){this._initPolling()}.bind(this),0),this._hasInit=!0},evalVars:function(e){for(var t=this._filterVars(e=e||"all"),n=0;n<t.length;n++){var i,o=t[n];void 0===bouncex.vars[o.name]&&this._initVar(o),this._canEvalVar(o)&&("all"!==e?(i=this.evalVarAndReload(o.name),"visit"!==o.persist||bouncex.state||i.success||this.varsToExpire.push({name:o.name,default:o.default})):function(t){setTimeout(function(){var e=this.evalVarAndReload(t.name);"visit"!==t.persist||bouncex.state||e.success||this.varsToExpire.push({name:t.name,default:t.default})}.bind(this),0)}.bind(this)(o))}},_filterVars:function(e){if(this._filter=this._filter||{},this._filter[e])return this._filter[e];switch(e){case"all":return this._filter[e]=bouncex.website.vars;case"devicegraph":return this._filter[e]=bouncex.website.vars.filter(function(e){return"devicegraph"===e.persist});case"polling":return this._filter[e]=bouncex.website.vars.filter(function(e){return"none"!==e.polling});case"persist":return this._filter[e]=bouncex.website.vars.filter(function(e){return"no"!==e.persist});default:return[]}},_initVar:function(e){var t="no"!==e.persist&&bouncex.cookie.v&&void 0!==bouncex.cookie.v[e.name]?bouncex.cookie.v[e.name]:e.default;this.setVar(e.name,t)},_canEvalVar:function(e){if(e.page_types.length&&(!bouncex.website.pts||-1===e.page_types.indexOf(bouncex.website.pts)))return!1;if("devicegraph"===e.persist){if(!bouncex.dg||!bouncex.dg.store)return!1;if("number"!=typeof bouncex.vars[e.name])return!1}return"event"!==e.trigger},_evalVar:function(t,e){var n={};"function"!=typeof t.code&&(t.code=this._makeFunc(t.code));try{var i=e?t.code.bind(e):t.code,n=this.setVar(t.name,i())}catch(e){bouncex.err(e,{source:"eval cvar",cvar:t.name})}return n},setVar:function(e,t){var n=bouncex.website.vars[this._index[e]],e={success:!1,changed:!1},i=this._formatVar(t);return e.success=this._validVar(i),e.success&&bouncex.vars[n.name]!==i&&(e.changed=!0,e.oldVal=bouncex.vars[n.name],bouncex.vars[n.name]=i,"no"!==n.persist&&(bouncex.updateBounceCookie(function(e){e.v=e.v||{},e.v[n.name]=i}),bouncex.dg&&bouncex.dg.store&&"devicegraph"===n.persist&&(bouncex.dg.store.v=bouncex.dg.store.v||{},bouncex.dg.store.v[n.name]=i))),e},getVar:function(e){return bouncex.website.vars[this._index[e]]},_reactToChange:function(e,t){t.changed&&("vars"!==e.polling&&this._reloadCampaignVarNames.push(e.name),"devicegraph"===e.persist&&bouncex.dg.updateDeviceGraphCookie(),this._allChangedVars.push({name:e.name,oldVal:t.oldVal}))},evalVarAndReload:function(e,t){e=bouncex.website.vars[this._index[e]],t=this._evalVar(e,t);return this._reactToChange(e,t),t},setVarAndReload:function(e,t){e=bouncex.website.vars[this._index[e]],t=this.setVar(e.name,t);this._reactToChange(e,t)},_makeFunc:function _makeFunc(code){var f=function(){return null},str="f = (function(){return "+encodeURI(code.toString().replace("\n"," "))+"});";try{eval(decodeURI(str))}catch(e){bouncex.err("bad cvar expression "+code)}return f},_validVar:function(e){return"number"==typeof e&&!isNaN(e)||"string"==typeof e||"boolean"==typeof e},_formatVar:function(e){switch(!0){case"true"===e:return!0;case"false"===e:return!1;case"string"==typeof e&&!!e.match(/^[0-9]+$/):return parseInt(e);case"string"==typeof e&&!!e.match(/^[0-9]+\.[0-9]+$/):return parseFloat(e);default:return e}},_initPolling:function(){this._reloadCampaignVarNames=[],BxInterval.addTask(this._pollingVars.bind(this),0,"eval_polling_vars"),BxInterval.addTask(this._cvarChangeEvent.bind(this),0,"emit_change_event")},_pollingVars:function(){this.evalVars("polling"),this._reloadCampaignVarNames.length&&(bouncex.reload_campaigns("variable",this._reloadCampaignVarNames.join(",")),this._reloadCampaignVarNames=[]),this._allChangedVars.length&&2==bouncex.website.ete&&bouncex.et.evalAllUIEvents()},_cvarChangeEvent:function(){this._allChangedVars.length&&bouncex.window&&(bouncex.window.trigger("bxVarsChange",[this._allChangedVars]),this._allChangedVars=[])},clearAll:function(){this._hasInit=!1,bouncex.vars={}}};exports.CustomVariables=CustomVariables;var BrowserUtil={viewport:{getVisibleElements:function(e,i){return jQuery(e).filter(":visible").toArray().reduce(function(e,t,n){return this.elementEdgeInViewport(t,i)&&e.push({element:t,index:n}),e}.bind(this),[])},elementEdgeInViewport:function(e,t){if(!(e=this.__toElement(e)))return!1;t=this._getVerticalPosition(e,t);return this.isInVerticalViewport(t)},elementInViewport:function(e){return!!(e=this.__toElement(e))&&(this.isInVerticalViewport(this._getVerticalPosition(e,"before"))||this.isInVerticalViewport(this._getVerticalPosition(e,"after")))},__toElement:function(e){return e="string"==typeof e?jQuery(e).get(0):e},isInVerticalViewport:function(e){return 0<=e&&e<=(window.innerHeight||document.documentElement.clientHeight)},_getVerticalPosition:function(e,t,n){e=e.getBoundingClientRect();return n=parseInt(n)||0,"before"===t||"prepend"===t?e.top-n:e.bottom+n},distanceToBottom:function(e,t,n){n=this._getVerticalPosition(e,t,n);return(window.innerHeight||document.documentElement.clientHeight)-n}},currentTab:{isVisible:function(){return"visible"===document.visibilityState}}};exports.BrowserUtil=BrowserUtil,bouncex.utils={addNamespace:function(e,t){var n,i,o={};for(n in e)e.hasOwnProperty(n)&&(o[i=-1===(i=n).indexOf(":")?t+":"+n:i]=e[n]);return o},getOrigin:function(){return window.location.origin||window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")},doAjaxRequest:function(e){e.crossDomain=!0,e.global=!1;var t=jQuery.fn.jquery.split(".");return e.xhrFields={withCredentials:!0},parseInt(t[0])<=1&&parseInt(t[1])<=5&&(e.beforeSend=function(e){e.withCredentials=!0},e.xhr=function(){var e=jQuery.ajaxSettings.xhr(),n=e.setRequestHeader;return e.setRequestHeader=function(e,t){"X-Requested-With"!=e&&n.call(this,e,t)},e}),jQuery.ajax(e)},gtmLookup:function(e,t){if(!(t=t||this.url.getParam("id",jQuery('script[src*="googletagmanager"]').attr("src"))))return!1;try{return google_tag_manager[t].dataLayer.get(e)}catch(e){return bouncex.err(e,{source:"gtmLookup"}),""}},getNestedProp:function(e,t,n){var i=void 0!==n?n:window,o=void 0!==t?t:void 0,a=e;if("string"==typeof e){if(/[^A-z0-9\[\].]/.test(e))return bouncex.log("getNestedProp given bad value: "+e),o;a=e.split(/[.\[]/).map(function(e){return e.replace(/[\]]/g,"")})}for(var r=0;r<a.length;r++){var s=a[r];if(void 0===i[s])return o;i=i[s]}return i},cookies:{create:function(e){if(defaults={name:"",value:"",domain:!1,days:14},!(e=jQuery.extend(defaults,e)).name)return!1;var t=new Date;t.setTime(t.getTime()+24*e.days*60*60*1e3);t="; expires="+t.toGMTString(),t=e.name+"="+e.value+t+"; path=/;";e.domain&&(t+="domain="+e.domain+";"),document.cookie=t},destroy:function(e){return this.create({name:e,days:-1})},read:function(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var o=n[i];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return null}},records:{getRecords:function(e){if((0,_helpers.isBxInternalTraffic)())return _records.default.getRecords(e)},printRecords:function(e){if((0,_helpers.isBxInternalTraffic)())return _records.default.printRecords(e)}},url:{allowParams:function(t,e){var n=(e=e||window.location.href).split(/([\?\#])/);if(!t)return n[0];for(var i=1;i<n.length;i++)"?"!==n[i]&&"#"!==n[i]&&(n[i]=this.filterParams(n[i],function(e){return-1<t.indexOf(e)}));return n.join("").replace(/([\?\#](?=[\?\#])|[\?\#]+$)/g,"")},generateQuerystring:function(e,t){var n,i=t||"";for(n in e)e.hasOwnProperty(n)&&(i+=n+"="+e[n]+"&");return i.substring(0,i.length-1)},queryStringToObject:function(e){return(e="?"===(e=void 0===e?window.location.search:e).charAt(0)?e.substring(1):e).split("&").reduce(function(e,t){var n=t.split("="),t=decodeURIComponent(n[0]),n=decodeURIComponent(n[1]);return e[t]=n,e},{})},filterParams:function(e,t){for(var n=e.replace(/[\?\#]/,"").split("&"),i="",o=0;o<n.length;o++)t(n[o].split("=")[0].replace(/[\[]/,"").replace(/[\]]/,""))&&(i+="&"+n[o]);return i.replace("&","")},formatReferrer:function(e){return e?encodeURIComponent(e.split("/")[2]):""},getParam:function(e,t){t=t?"?"+t:window.location.href;e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");t=new RegExp("[\\?&#]"+e+"=([^&#]*)").exec(t);return null==t?"":decodeURIComponent(t[1])},removeParams:function(t,e){e=e||window.location.href,t=["_ke","bxid","cid","email","et_rid","gclid","ibx_source","mc_cid","mc_eid","pid","RIID","spUserID","sfmc_sub","ueh","utm_source","utm_medium","utm_campaign","utm_term","utm_content"].concat(t);for(var n=e.split(/([\?\#])/),i=1;i<n.length;i++)"?"!==n[i]&&"#"!==n[i]&&(n[i]=this.filterParams(n[i],function(e){return-1===t.indexOf(e)}));return n.join("").replace(/([\?\#](?=[\?\#])|[\?\#]+$)/g,"")}},validate:{email:function(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},integer:function(e){return!isNaN(parseInt(e))},url:function(e){return/^(https?):\/\/[^\s/$.?#].[^\s]*$/.test(e)}},isObject:function(e){return null!==e&&"object"===_typeof(e)&&!Array.isArray(e)}},bouncex.utils.getParam=bouncex.utils.url.getParam,bouncex.vst={_init:{buildVastEnv:function(e,t){var n;bouncex.vst._internal.groupCollapsed(e,"init vast parser",!1),n=bouncex.campaigns[e],bouncex.vst.campaignId=e,n.video.vast={handlingWrapper:!1,wrapperLevel:0,tracking:{}},n=bouncex.vst._helpers.isVastOrTag(t),bouncex.vst._init.kickoffVastParse(e,n,t)},kickoffVastParse:function(e,t,n){switch(t){case"tag":return this.extractVastData(e,n);case"vastxml":return bouncex.vst._response.vastResponse(n)}},extractVastData:function(e,t){bouncex.video.log(e,"extract vast url: "+t,"vast");t=bouncex.vst._validations.checkVastUrl(t);bouncex.vst._http.call(e,t,"GET",null,bouncex.vst._response.vastResponse)}},_http:{call:function(t,n,i,o,a,r){bouncex.video.log(t,"making HTTP request","vast"),bouncex.vst._validations.checkHttpRequest(t,n,a);var e=bouncex.vst._http.createXMLRequest();e.onreadystatechange=function(){if(4==e.readyState)if(200===e.status)a&&a(this,e);else if(r){if(0!==e.status)return bouncex.video.fail(t,"XML request to parse vast data failed"),!1}else bouncex.vst&&bouncex.vst._http.call(t,n,i,o,a,!0)},e.open(i,bouncex.vst._validations.checkUrl(n).href,!0),r&&(e.withCredentials=!0);try{o?e.send(o):e.send()}catch(e){bouncex.video.fail(t,"VAST [httpCall]: XHR request failed"+(!0===r?" on second try":".")+e.message),r||bouncex.vst._http.call(t,n,i,o,a,!0,"vast")}},success:function(e){return 200<=e&&e<300},createXMLRequest:function(){var e;return window.XMLHttpRequest?e=new XMLHttpRequest:window.ActiveXObject&&(e=new ActiveXObject("Microsoft.XMLHTTP")),e}},_response:{vastResponse:function(e){var t,n,i=bouncex.vst.campaignId,o=bouncex.campaigns[i];0<o.video.vast.wrapperLevel&&!o.video.vast.handlingWrapper?(n=o.video.vast.wrapperLevel,bouncex.vst._internal.groupCollapsed(i,"re-init vast parser, wrapper found - on loop: "+n,!1)):bouncex.video.log(i,"init vast parser","vast"),t=bouncex.vst._validations.checkXml(e),n=o.video.vast,bouncex.vst._processVastData.getAd(i,t,e),!o.failed&&n.vpaidUrl?(bouncex.video.log(i," -> Found VPAID","vast"),bouncex.vst._loadPlayer.vpaidMedia(i,n)):o.failed||(bouncex.video.log(i,"vast parse complete","vast"),o.video.vast.handlingWrapper||bouncex.vst._loadPlayer.vastMedia(i,n)),o.video.vast.handlingWrapper||bouncex.vst._internal.groupEnd(i,"exit vast parser",!1)}},_xml:{convertStringToXML:function(e){if(!_typeof(window.DOMParser)){var t=new ActiveXObject("Microsoft.XMLDOM");return t.loadXML(e),t}var n,t=new DOMParser;try{(n=t.parseFromString(e,"application/xml"))&&""!==n&&!this.parsingError(n)||bouncex.log("error parsing XML string")}catch(e){bouncex.log("error parsing XML string")}return n},parsingError:function(e){try{var t=(new DOMParser).parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI;return 0<e.getElementsByTagNameNS(t,"parsererror").length}catch(e){bouncex.log("xml parsing error: ",e)}},parseXmlText:function(e){return/^\s*$/.test(e)?null:/^(?:true|false)$/i.test(e)?"true"===e.toLowerCase():e.trim()},elementParsers:{init:function(e,t,n,i){var o,a,r=bouncex.vst._xml.nodeParsers.getXmlNode(e,t,"Impression",1),s=bouncex.vst._xml.nodeParsers.getXmlNode(e,t,"Tracking",1),c=bouncex.vst._xml.nodeParsers.getXmlNode(e,n,"Wrapper",0),u=null!==bouncex.vst._xml.nodeParsers.getXmlNode(e,t,"InLine",0)&&bouncex.vst._xml.nodeParsers.getXmlNode(e,t,"InLine",0),d=bouncex.vst._xml.nodeParsers.getXmlNode(e,u,"Linear",0)||bouncex.vst._xml.nodeParsers.getXmlNode(e,u,"Video",0),n=bouncex.vst._xml.nodeParsers.getXmlNode(e,t,"Error",1);d||u||(a=bouncex.vst._xml.nodeParsers.getXmlNode(e,u,"NonLinear",0),o=bouncex.vst._xml.nodeParsers.getXmlNode(e,t,"Companion",0)),o&&bouncex.video.log(e,"SKIP -> [parseVastElements]: companion ads not currently supported","warning"),a&&bouncex.video.log(e,"SKIP -> [parseVastElements]: nonlinear ads not currently supported","warning"),n&&bouncex.vst._tracking.recordErrorPixels(e,i,n),r&&bouncex.vst._tracking.recordImpressionPixels(i,r),s&&bouncex.vst._tracking.recordEventPixels(i,s),c&&(bouncex.vst._xml.elementParsers.handleWrapper(e,c),bouncex.campaigns[e].video.vast.handlingWrapper=!1,bouncex.campaigns[e].video.vast.wrapperLevel+=1),d&&this.handleVideo(e,i,d)},handleVideo:function(e,t,n){bouncex.vst._tracking.recordVideoClickTrackingPixels(e,t,n),this.handleDuration(e,t,n),this.handleMediaFiles(e,t,n)},handleDuration:function(e,t,n){var n=bouncex.vst._xml.nodeParsers.getXmlNode(e,n,"Duration",0);null!==n&&(n=(n=(n=bouncex.vst._xml.nodeParsers.nodeExists(n)&&"string"!=typeof n?bouncex.vst._xml.nodeParsers.getNodeValue(n):n).split(".")[0]).split(":"),n=parseInt(60*n[0]*60)+parseInt(n[2]),t.duration=n,bouncex.video.log(e,"media duration -> "+t.duration+"s","vast"))},handleMediaFiles:function(e,t,n){var i,o=bouncex.vst._xml.nodeParsers.getXmlNode(e,n,"MediaFile",1),a=null,r=!1;if(null!==o&&0!==o.length||bouncex.video.log(e,"0 media files found","error"),o&&o.length){for(var s=0;s<o.length;s++){if(t.width=o[s].getAttribute("width"),t.height=o[s].getAttribute("height"),t.aspectRatio=t.height/t.width*100,t.apiFramework=o[s].getAttribute("apiFramework")||!1,t.type=o[s].getAttribute("type"),t.aspectRatio=bouncex.vst._helpers.calculateAspectRatioData(t.width,t.height),t.isVPAID=!(!t.apiFramework||"vpaid"!==t.apiFramework.toLowerCase()||"application/javascript"!==t.type),t.offsetAspectRatio=bouncex.campaigns[e].video.player.offsetHeight/bouncex.campaigns[e].video.player.offsetWidth*100,i=null!==bouncex.vst._xml.nodeParsers.getNodeValue(o[s])?bouncex.vst._xml.nodeParsers.getNodeValue(o[s]):this.handleUrlSources(e),-1<t.type.toLowerCase().indexOf("mp4")){t.src=i,r=!0;break}if(-1<t.type.toLowerCase().indexOf("application/javascript"))return bouncex.vst._loadPlayer.handleVPAID(e,t,n,i);a={path:i,type:t.type},t.src=a.path,t.type=a.type,t.vpaidUrl=!1}!1!==r||t.vpaidUrl||null===a||(t.src=a.path,t.type=a.type,t.vpaidUrl=!1)}},handleUrlSources:function(e){var t,n=bouncex.vst._xml.nodeParsers.getXmlNode(e,video,"URL",1);if(n)for(var i=0;i<n.length;i++)t=bouncex.vst._xml.nodeParsers.getNodeValue(n[i]);return t},handleWrapper:function(e,t){bouncex.vst._tracking.processWrapperEventPixels(e,t),(t=(t=bouncex.vst._xml.nodeParsers.getXmlNode(e,t,"VASTAdTagURL",0)||bouncex.vst._xml.nodeParsers.getXmlNode(e,t,"VASTAdTagURI",0)).firstChild.nodeValue&&""!==t.firstChild.nodeValue.trim()?t.firstChild.nodeValue.trim():!(!t.firstChild.constructor||!t.firstChild.constructor.name||"Text"!=t.firstChild.constructor.name)&&t.firstChild.wholeText.trim())?(bouncex.campaigns[e].video.vast.handlingWrapper=!0,bouncex.vst._init.extractVastData(e,t)):bouncex.video.fail(e,"failed to extract a VAST URL node from the XML Wrapper element")}},nodeParsers:{getXmlNode:function(e,t,n,i){var o;return null==t||t.length<1?(bouncex.video.log(e,"Failed to extract node -> "+n+". XML is null. Searched node: "+n,"warning"),null):null===(t="object"===_typeof(t)&&t.getElementsByTagName(n))||t.length<1?("Companion"!==n&&"NonLinear"!==n&&bouncex.video.log(e,"Failed to find node -> "+n,"vast"),null):0===i?(bouncex.video.log(e,"Extracted first occurrence of node -> "+n,"vast"),t[0]):1===i?(o=1<t.length?"Extracted "+t.length+" occurrences of node -> "+n:"Extracted "+t.length+" occurrence of node -> "+n,bouncex.video.log(e,o,"vast"),t):(o=t.length-1,o=Math.round(Math.random()*o),bouncex.video.log(e,"Extracted random element["+o+"] out of "+t.length+" "+n+" nodes","vast"),t[o])},parseNodeText:function(e){return e&&(e.textContent||e.text)},nodeExists:function(e){return null!==e&&null!==e.firstChild},getNodeValue:function(e){var t=!(!e||!e.firstChild),n=!!t&&e.firstChild;if("MediaFile"===e.nodeName&&e&&e.childNodes&&1<e.childNodes.length&&"#text"===n.nodeName)for(var i=0;i<e.childNodes.length;i++)"URL"===e.childNodes[i].nodeName&&(n=e.childNodes[i],t=!0);if(t){if(n.nodeValue&&""!==n.nodeValue.trim())return n.nodeValue;if(n.nextSibling&&n.nextSibling.data&&""!==n.nextSibling.data.trim())return n.nextSibling.data;if(n.wholeText&&""!==n.wholeText&&""!==n.wholeText.trim())return n.wholeText.trim()}return null}}},_tracking:{recordEventPixels:function(e,t){for(var n,i=0;i<t.length;i++){var o=t[i];bouncex.vst._xml.nodeParsers.nodeExists(o)&&(o=bouncex.vst._xml.nodeParsers.getNodeValue(o),n=t[i].getAttribute("event"),e.tracking[n]=e.tracking[n]||[],-1===e.tracking[n].indexOf(o)&&e.tracking[n].push(o))}},recordVideoClickTrackingPixels:function(e,t,n){var i=bouncex.vst._xml.nodeParsers.getXmlNode(e,n,"VideoClicks",0);null!==i&&(null!==(n=bouncex.vst._xml.nodeParsers.getXmlNode(e,i,"ClickThrough",0))&&null!==n.firstChild&&(t.clickThrough=bouncex.vst._xml.nodeParsers.getNodeValue(n)),i=(i=bouncex.vst._xml.nodeParsers.getXmlNode(e,i,"ClickTracking",0))?bouncex.vst._xml.nodeParsers.getNodeValue(i):null,t.tracking.clickTracking=t.tracking.clickTracking||[],i&&-1===t.tracking.clickTracking.indexOf(i)&&t.tracking.clickTracking.push(i))},recordErrorPixels:function(e,t){for(var n=0;n<t.length;n++){var i=t[n];bouncex.vst._xml.nodeParsers.nodeExists(i)&&(i=bouncex.vst._xml.nodeParsers.getNodeValue(i),e.tracking.error=e.tracking.error||[],null!==i&&-1===e.tracking.error.indexOf(i)&&e.tracking.error.push(i))}},recordImpressionPixels:function(e,t){for(var n=0;n<t.length;n++){var i=t[n];bouncex.vst._xml.nodeParsers.nodeExists(i)&&(i=bouncex.vst._xml.nodeParsers.getNodeValue(i),e.tracking.impression=e.tracking.impression||[],null!==i&&-1===e.tracking.impression.indexOf(i)&&e.tracking.impression.push(i))}},processWrapperEventPixels:function(e,t){bouncex.video.log(e,"WRAPPER: init extraction","vast");var n=bouncex.campaigns[e].video.vast,i=bouncex.vst._xml.nodeParsers.getXmlNode(e,t,"Impression",1),o=bouncex.vst._xml.nodeParsers.getXmlNode(e,t,"Tracking",1),a=bouncex.vst._xml.nodeParsers.getXmlNode(e,t,"Linear",0),t=bouncex.vst._xml.nodeParsers.getXmlNode(e,t,"Error",1);i&&(bouncex.video.log(e,"WRAPPER: handling impressions","vast"),bouncex.vst._tracking.recordImpressionPixels(n,i)),t&&(bouncex.video.log(e,"WRAPPER: handling error pixels","vast"),bouncex.vst._tracking.recordErrorPixels(e,n,t)),o&&(bouncex.video.log(e,"WRAPPER: handling tracking events","vast"),bouncex.vst._tracking.recordEventPixels(n,o)),a&&(bouncex.video.log(e,"WRAPPER: handling inline ad click tracking","vast"),bouncex.vst._xml.elementParsers.handleVideo(e,n,a))}},_processVastData:{getAd:function(e,t,n){var i=t.getElementsByTagName("MediaFile"),o=this.addMetaData(e,t),a=bouncex.campaigns[e].video.vast;bouncex.vst._validations.checkMediaExists(e,t,i,n),bouncex.vst._xml.elementParsers.init(e,o,t,a)},addMetaData:function(e,t){var n=bouncex.vst._xml.nodeParsers.getXmlNode(e,t,"Ad",2),t={};return null!==n&&(t.adId=n.getAttribute("id")||null,t.type=n.nodeName||null,t.system=bouncex.vst._xml.nodeParsers.parseNodeText(n.getElementsByTagName("AdSystem")[0])||!1,t.title=bouncex.vst._xml.nodeParsers.parseNodeText(n.getElementsByTagName("AdTitle")[0])||!1,t.description=bouncex.vst._xml.nodeParsers.parseNodeText(n.getElementsByTagName("Description")[0])||!1,t.system=bouncex.vst._xml.nodeParsers.parseNodeText(n.getElementsByTagName("AdSystem")[0])||!1,t.title=bouncex.vst._xml.nodeParsers.parseNodeText(n.getElementsByTagName("AdTitle")[0])||!1,t.description=bouncex.vst._xml.nodeParsers.parseNodeText(n.getElementsByTagName("Description")[0])||!1,t.advertiser=bouncex.vst._xml.nodeParsers.parseNodeText(n.getElementsByTagName("Advertiser")[0])||!1,t.pricing=bouncex.vst._xml.nodeParsers.parseNodeText(n.getElementsByTagName("Pricing")[0])||!1,t.category=bouncex.vst._xml.nodeParsers.parseNodeText(n.getElementsByTagName("Category")[0])||!1,0===bouncex.campaigns[e].video.vast.wrapperLevel&&(bouncex.campaigns[e].video.vast.metaData=t),n)}},_validations:{checkMediaExists:function(e,t,n,i){(null===n||n.length<1)&&(n=bouncex.vst._xml.nodeParsers.getXmlNode(e,t,"Wrapper",0),(t=bouncex.vst._xml.nodeParsers.getXmlNode(e,t,"status",0))&&"NO_AD"===t.innerHTML&&bouncex.video.fail(e,"vastResponse with no ad - status: "+t.innerHTML+", campaign failed."),null===n&&bouncex.video.fail(e,"vastResponse without video, campaign failed"))},checkVastUrl:function(e){var t=bouncex.vst._validations.checkUrl(e),e=t.href||null;return e="https:"===window.location.protocol&&"https"!==t.protocol?"https:"+e.substring(5):e},checkHttpRequest:function(e,t,n){"function"!=typeof n&&bouncex.video.fail(e,"VAST [validateHttpCall]: callback is not a function",!0),"string"!=typeof t&&bouncex.video.fail(e,"VAST [validateHttpCall]: not a valid url",!0)},checkUrl:function(e){var t=document.documentMode,n=document.createElement("a");return t&&(n.setAttribute("href",e),e=n.href),n.setAttribute("href",e),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",hostname:n.hostname,path:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}},checkXml:function(e){var t;if("string"==typeof e)t=bouncex.vst._xml.convertStringToXML(e);else{if(null===e&&null===e.responseXML&&null===e.responseText){var n=e?{url:encodeURIComponent(e.responseURL)}:{};return bouncex.video.log(campaignId,"vast url returned null response | "+n,"error"),!1}var i=e.responseXML||e.responseText||e.response;if("string"==typeof i)try{t=bouncex.vst._xml.convertStringToXML(e.responseText)}catch(e){return bouncex.video.log(campaignId,"vastResponse returned null from url "+n,"error"),!1}else t=i}return t}},_loadPlayer:{vastMedia:function(e,t){bouncex.video.canPlayMedia(e)&&(t=t.src&&"string"!=typeof t.src?JSON.stringify(t.src):t.src||"",bouncex.video.log(e,"found compatible media file ("+t+")","vast"),bouncex.campaigns[e].video.status.vastDataLoaded=!0,bouncex.video.configPlayer(e))},vpaidMedia:function(e,t){bouncex.campaigns[e].video.status.vastDataLoaded=!0;var n=document.createElement("SCRIPT");n.type="text/javascript",n.src=t.vpaidUrl;var i=Object.defineProperty;Object.defineProperty=tryCatch(i),n.onload=function(){Object.defineProperty=i,bouncex.vpd.generateVPAIDManager(e)},window.top.document.body.appendChild(n)},handleVPAID:function(e,t,n,i){n=bouncex.vst._xml.nodeParsers.getXmlNode(e,n,"AdParameters",0);t.vpaidWidth=jQuery("#bx-creative-"+e+" .bx-video-wrapper").css("width").replace(/[^0-9.]/g,""),t.vpaidHeight=jQuery("#bx-creative-"+e+" .bx-video-wrapper").css("height").replace(/[^0-9.]/g,""),t.vpaidUrl="https:"===window.location.protocol&&0===i.indexOf("http:")?"https:"+i.substring(5):i,t.isVPAID=!0,bouncex.campaigns[e].video.isVPAID=!0,n&&(n=bouncex.vst._xml.nodeParsers.getNodeValue(n),t.vpaidAdParams=n)}},_helpers:{isVastOrTag:function(e){return-1!==e.indexOf("<?xml")&&(e=e.replace(/^<\?xml(?:(?!>)[\s\S])*>/i,"")),/^[\s]*<VAST/i.test(e)?"vastxml":"tag"},toCamelCase:function(e){return e.charAt(0).toLowerCase()+e.slice(1)},calculateAspectRatioData:function(e,t){var n={},t=parseInt(e)/parseInt(t);switch(t){case 4/3:n.paddingTop="75%";break;case 1.5:n.paddingTop=String(100/1.5)+"%";break;case 16/9:n.paddingTop="56.25%";break;case 1:n.paddingTop=!1;break;case 1.6:n.paddingTop="62.5%"}return n.ratio=t,n}},_internal:{groupCollapsed:function(e,t,n){bouncex.console.groupCollapsed("%c vast parser "+(e?"("+e+")":"")+": "+t,"color: "+(n?"#FF0000":"#09AF59"))},groupEnd:function(e,t,n){bouncex.console.groupEnd("%c vast parser "+(e?"("+e+")":"")+": "+t,"color: "+(n?"#FF0000":"#09AF59"))}}},bouncex.video={constants:{completionThresholdInSeconds:2},init:function(t,e,n,i){bouncex.campaigns[t].video=bouncex.campaigns[t].video||{},bouncex.video.buildEnv(t,n,i);try{bouncex.vst._init.buildVastEnv(t,e)}catch(e){bouncex.video.fail(t,e)}},buildEnv:function(e,t,n){var i=bouncex.campaigns[e].video;i.player=document.getElementById("bx-video-player-"+e),i.uniqueEventPixels=[],i.vast={},i.vpaid={},i.integrations={},i.integrations.moatApiReference={dispatchEvent:function(){}},i.config={},i.config.provider=t,i.creative={},i.creative.requestWidth=n.width,i.creative.requestHeight=n.height,i.status={ready:!1,passedCompletionThreshold:!1,qOne:!1,midpoint:!1,qThree:!1,vastDataLoaded:!1,stopped:!1}},canPlayMedia:function(e){var t=document.createElement("VIDEO"),n=bouncex.campaigns[e].video.vast.type;if("maybe"===t.canPlayType(n)||"probably"===t.canPlayType(n))return bouncex.video.log(e,"media file supported","player"),!0;t=bouncex.campaigns[e].video.vast.wrapperLevel||!1;bouncex.vst._internal.groupEnd(e,"vast parser exit",!1),t&&!n?bouncex.video.log(e,"no media found on wrapper level "+t,"warning"):bouncex.video.log(e,"video player does not support "+n,"error")},bxPlayerPop:function(e,t){var n=bouncex.video.getPlayerSnapshot(e,bouncex.campaigns[e].video.player);report(e,"pop",{"pop:activation":t,video_type:n.isVPAID?"VPAID":"VAST",media_type:n.type,media_size:n.dimensions.videoWidth+"x"+n.dimensions.videoHeight})},onPlay:function(t){var e=bouncex.campaigns[t],n=e.video.player,i=e.video.config.provider,o=-1<bouncex.campaigns[t].video.config.src.indexOf("/demo/ads_demo_video.mp4"),a=bouncex.video.getPlayerSnapshot(t,n);bouncex.off(jQuery(n),"onplay"),e.video.videoResponseLoaded=!0,"aqbx"===i&&o&&bouncex.video.aqbxStyleFix(t,n);try{n.play()}catch(e){bouncex.video.log(t,"error: "+e,"error")}bouncex.video.toggleMute(t,!0),bouncex.video.fireTrackingEvents(t,"start");a=this._integrations.moat.getDispatchEventParams("AdVideoStart",a.volume);e.video.integrations.moatApiReference.dispatchEvent(a,t)},play:function(e){var t=bouncex.campaigns[e],e=bouncex.video.getPlayerSnapshot(e,t.video.player);e.isVPAID&&e.ready&&t.video.videoResponseLoaded?t.video.vpaid.ad.startAd():!e.playing&&e.ready&&t.video.videoResponseLoaded&&t.video.player.play()},playVideoBeforeImpression:function(e,t){var n=bouncex.campaigns[t];this._integrations.moat.init(t,n.video.vast);var i=n.video.player,o=bouncex.video.getPlayerSnapshot(t,n.video.player),a=this._integrations.moat.apiReference;_helpers.default.shouldSampleMoatPixel()&&(n.video.integrations.moatApiReference=bouncex.video._integrations.moat.initMoatTracking(a.container,a.ids,a.duration,a.partnerCode,a.url)),o.isVPAID?bouncex.vpd.playVPAIDBeforeImpression(e,t):(bouncex.on(jQuery(i),"onplay",bouncex.video.onPlay(t)),bouncex.on(jQuery(i),"onerror",function(e){jQuery(i).off("onerror"),i.pause(),bouncex.campaigns[t].video.status.stopped=!0,bouncex.video.fail(t,e.message||"error loading video response")}),n.video.videoResponseLoaded&&(show_ad(e,t),bouncex.video.fireTrackingEvents(t,"impression")))},configPlayer:function(e){var t=bouncex.campaigns[e],n=t.video.config||{},i=t.video.vast,o=bouncex.video.getPlayerSnapshot(e,t.video.player);o.isVPAID||(n.src=i.src||"//"+bouncex.website.biu+"/assets/global/videos/pub/demo/ads_demo_video.mp4",n.clickThroughUrl=i.clickThrough||!1),n.aspectRatio=i.aspectRatio,n.offsetAspectRatio=i.offsetAspectRatio,o.isVPAID?(n.width=i.vpaidWidth,n.height=i.vpaidHeight):(n.width=i.width,n.height=i.height),bouncex.video.stylePlayer(e),o.isVPAID?bouncex.video.addVpaidEventTrackingListeners(e):(o=document.getElementById("bx-video-player-"+e),jQuery(o).attr("src",bouncex.campaigns[e].video.config.src),bouncex.video.setClickThroughUrl(e,n.clickThroughUrl),bouncex.video.addVideoEventTrackingListeners(e)),bouncex.gbi2.watchVideoLoad(e),t.video.config=n},setClickThroughUrl:function(e,t){e=bouncex.campaigns[e].video.player;""!==t&&!1!==t&&jQuery(e).attr("href",t)},clickThroughHelper:function(e,t){window.open(t,"_blank").focus()},toggleMute:function(e,t){e=bouncex.campaigns[e].video.player;e.muted=!!t||!e.muted,e.muted||0!==e.volume||(e.volume=.75),this.updatePlayerButtons(e)},playPausePlayer:function(e){var t=bouncex.campaigns[e].video,e=t.player;e.paused||e.ended?(e.play(),t.manuallyPaused=!1):(e.pause(),t.manuallyPaused=!0),this.updatePlayerButtons(e)},playPauseVisibility:function(e){var t=bouncex.campaigns[e].video,n=t.player;t.status.passedCompletionThreshold?n.paused||bouncex.video.log(e,"player left alone due to not meeting the completion threshold","player"):BrowserUtil.currentTab.isVisible()?BrowserUtil.viewport.elementInViewport(n)?t.manuallyPaused||!n.paused&&!n.ended||n.play():(n.paused||bouncex.video.log(e,"player paused because video out of viewport","player"),n.pause()):(n.paused||bouncex.video.log(e,"player paused on tab hide","player"),n.pause())},updateProgressPlayer:function(e){var t,n=document.getElementById("bx-video-progress-wrapper-"+e);null!==n&&(e=!1!==(t=bouncex.video.getPlayerSnapshot(e,bouncex.campaigns[e].video.player)).time.inSeconds?t.time.inSeconds:0,t=Math.floor(t.time.durationRounded),e=bouncex.video.getFormattedTime(e),t=bouncex.video.getFormattedTime(t),jQuery(".bx-video-progress-time-left",n).text(e),jQuery(".bx-video-progress-time-total",n).text(t))},toMinutes:function(e){return(e/60).toFixed(2).replace(".",":")},toSeconds:function(e){return"0:"+(e=e<10?("0"+e).slice(-2):e)},getFormattedTime:function(e){return e<60?bouncex.video.toSeconds(e):bouncex.video.toMinutes(e)},canPlay:function(e){var t;bouncex.campaigns[e].video.isVPAID||((t=bouncex.campaigns[e].video.status).ready=!0,t.canPlayEvent=!0,bouncex.video.playerReady(e),jQuery(bouncex.campaigns[e].video.player).unbind("canplay.bx-"+e))},ready:function(e){e=bouncex.campaigns[e];return e.video.status&&e.video.status.ready&&!e.video.videoResponseLoaded},playerReady:function(e){var t=bouncex.campaigns[e];t.video.status.ready?(t.video.isVPAID||bouncex.video.updateProgressPlayer(e),bouncex.gbi2._activateCampaign(e),t.trigger&&!t.ad_visible&&show_ad(t.trigger,e)):bouncex.video.log(e,"player not ready","player")},getPlayerSnapshot:function(e,t){var n=bouncex.campaigns[e].video.vast,i=t.duration||n.duration,o=Math.floor(.25*i),a=Math.floor(2*o),r=Math.floor(3*o),s=bouncex.campaigns[e].video.status,c=bouncex.campaigns[e].video.vast,u=bouncex.campaigns[e].video.creative;return{ended:t.ended,playing:!t.paused,paused:t.paused,type:t.currentType||n.type,src:t.currentSrc||c.vpaidUrl,clickThroughUrl:n.clickThrough,muted:t.muted,volume:t.volume,ready:s.ready||!1,playbackRate:t.playbackRate,seeking:t.seeking,isVPAID:bouncex.campaigns[e].video.vast.isVPAID,vastDataLoaded:s.vastDataLoaded,dimensions:{offsetWidth:t.offsetWidth,offsetHeight:t.offsetHeight,videoWidth:t.videoWidth||n.vpaidWidth,videoHeight:t.videoHeight||n.vpaidHeight,requestWidth:u.requestWidth,requestHeight:u.requestHeight},time:{duration:i,durationRounded:Math.floor(i),currentUnformatted:t.currentTime||!1,inSeconds:parseInt(t.currentTime%60)||!1,firstQuartile:{value:o,passed:s.qOne||!1},midpoint:{value:a,passed:s.midpoint||!1},thirdQuartile:{value:r,passed:s.qThree||!1}}}},stylePlayer:function(e){var t=bouncex.campaigns[e].video.creative;t.dynamicHeight=bouncex.campaigns[e].obj1.find(".bx-creative-"+e+" .bx-row-video").width(),t.dynamicWidth=bouncex.campaigns[e].obj1.find(".bx-creative-"+e+" .bx-row-video").height(),jQuery(".bxc.bx-campaign-"+e).addClass("bx-width-full-content"),jQuery("body").on("focus","#bx-video-btns-"+e+" .bx-video-btn",function(){jQuery("#bx-video-wrapper-"+e).addClass("bx-video-wrapper-has-focus")}).on("blur","#bx-video-btns-"+e+" .bx-video-btn",function(){jQuery(".bx-video-wrapper-"+e).removeClass("bx-video-wrapper-has-focus")}),bouncex.campaigns[e].video.vast.isVPAID||bouncex.video.adjustAspectRatio(e)},adjustAspectRatio:function(e){var t=bouncex.campaigns[e].video,n=t.vast.aspectRatio.paddingTop,i=t.vast.aspectRatio.ratio,o=t.creative.dynamicWidth/t.creative.dynamicHeight,a=-1<t.config.src.indexOf("/demo/ads_demo_video.mp4")&&"aqbx"===bouncex.campaigns[e].video.config.provider,t="300"===t.config.height&&"400"===t.config.width&&"75%"===n;!n||i===o||a||t||(jQuery("#bx-video-wrapper-"+e).addClass("bx-video-aspectRatio-fix-"+e),jQuery(".bx-video-aspectRatio-fix-"+e).css("padding-top",n))},aqbxStyleFix:function(e,t){var n=jQuery(t)[0].videoHeight,t=jQuery(t)[0].videoWidth,n=(Number(jQuery(".bx-creative-"+e+" .bx-row-video").css("width").split("px")[0])/(t/n)).toString()+"px";jQuery(".bx-creative-"+e+" .bx-video-wrapper").css("height",n)},detectVideoProgress:function(e,t,n,i){var o,a=bouncex.campaigns[e].video.status,r=bouncex.video.getPlayerSnapshot(e,bouncex.campaigns[e].video.player),s=r.time.inSeconds;t!==s||r.time.firstQuartile.passed?n!==s||r.time.midpoint.passed?i!==s||r.time.thirdQuartile.passed?bouncex.video.constants.completionThresholdInSeconds<=s&&!a.passedCompletionThreshold&&(a.passedCompletionThreshold=!0,bouncex.video.log(e,"player made it to completion threshold","player")):(o=this._integrations.moat.getDispatchEventParams("AdVideoThirdQuartile",r.volume),bouncex.video.fireTrackingEvents(e,"thirdQuartile"),a.qThree=!0):(o=this._integrations.moat.getDispatchEventParams("AdVideoMidpoint",r.volume),bouncex.video.fireTrackingEvents(e,"midpoint"),a.midpoint=!0):(o=this._integrations.moat.getDispatchEventParams("AdVideoFirstQuartile",r.volume),bouncex.video.fireTrackingEvents(e,"firstQuartile"),a.qOne=!0),o&&bouncex.campaigns[e].video.integrations.moatApiReference.dispatchEvent(o,e)},addVideoEventTrackingListeners:function(t){var n=document.getElementById("bx-video-player-"+t),e=" volumechange.bx-"+t+" canplay.bx-"+t+" durationchange.bx-"+t+" ended.bx-"+t+" pause.bx-"+t+" play.bx-"+t+" playing.bx-"+t+" timeupdate.bx-"+t+" loadeddata.bx-"+t+" error.bx-"+t+" canplaythrough.bx-"+t+" onplay.bx-"+t+" loadedmetadata.bx-"+t,i=" touchend.bx-"+t+" click.bx-"+t,o=bouncex.campaigns[t];bxBind(bouncex.campaigns[t].video.player=n,e,function(e){bouncex.video.handleVideoEvents(t,n,e)}),bxBind(n,i,function(e){o.video.isInClickState||(o.video.isInClickState=!0,bouncex.video.handleVideoEvents(t,n,e),setTimeout(function(){o.video.isInClickState=!1},350))}),this.handleVideoClose(t)},addVpaidEventTrackingListeners:function(e){var t=document.getElementById("bx-video-player-"+e);bxBind(t," volumechange.bx-"+e+" ended.bx-"+e+" pause.bx-"+e+" play.bx-"+e,function(e){bouncex.video.updatePlayerButtons(t)})},handleVideoEvents:function(t,n,i){var o=i.type,a=bouncex.campaigns[t].video.status,i=bouncex.video.getPlayerSnapshot(t,n);"canplaythrough"!==o||a.canPlayEvent?"loadedmetadata"===o&&bouncex.browser.ios?(n.setAttribute("playsinline",""),bouncex.video.canPlay(t)):"canplay"===o?bouncex.video.canPlay(t):"play"===o?this.handlePlayEvent(t,i):"volumechange"===o?this.handleVolumechangeEvent(t,i,n):"timeupdate"!==o||i.isVPAID?"pause"!==o||bouncex.campaigns[t].video.status.stopped||bouncex.campaigns[t].video.player.ended?"ended"===o?this.handleEndEvent(t,i):"error"===o?(a=e.data&&e.data.message?e.data.message:"an error has occurred, campaign failed",bouncex.video.fail(t,a)):"click"!==o&&"touchend"!==o||this.handleClickEvent(t,i):this.handlePauseEvent(t,i):this.handleTimeUpdateEvent(t,i):bouncex.video.canPlay(t),0<=["play","pause","ended","volumechange"].indexOf(o)&&this.updatePlayerButtons(n)},handleVideoClose:function(t){var n=document.getElementById("bx-video-player-"+t),e=document.getElementById("bx-creative-"+t).getElementsByClassName("bx-close-link");bouncex.campaigns[t].video.player=n,jQuery(e).on("click.bx-"+t,function(){var e=bouncex.video.getPlayerSnapshot(t,n),e=bouncex.video._integrations.moat.getDispatchEventParams("AdStopped",e.volume);!1===bouncex.campaigns[t].video.vast.isVPAID&&(bouncex.campaigns[t].video.status.stopped=!0,n.pause()),n.ended=!0,bouncex.campaigns[t].video.integrations.moatApiReference.dispatchEvent(e,t)})},handlePlayEvent:function(e,t){t=this._integrations.moat.getDispatchEventParams("AdPlaying",t.volume);bouncex.campaigns[e].video.integrations.moatApiReference.dispatchEvent(t,e)},handleVolumechangeEvent:function(e,t,n){t=this._integrations.moat.getDispatchEventParams("AdVolumeChange",t.volume);n.muted&&bouncex.video.fireTrackingEvents(e,"mute"),bouncex.campaigns[e].video.integrations.moatApiReference.dispatchEvent(t,e)},handleTimeUpdateEvent:function(e,t){bouncex.video.updateProgressPlayer(e),bouncex.video.detectVideoProgress(e,t.time.firstQuartile.value,t.time.midpoint.value,t.time.thirdQuartile.value)},handlePauseEvent:function(e,t){t=bouncex.video._integrations.moat.getDispatchEventParams("AdPaused",t.volume);bouncex.campaigns[e].video,bouncex.campaigns[e].video.integrations.moatApiReference.dispatchEvent(t,e)},handleClickEvent:function(e,t){if(t.clickThroughUrl)try{bouncex.video.clickThroughHelper(e,t.clickThroughUrl)}catch(e){}bouncex.video.report(e,"click"),bouncex.video.fireTrackingEvents(e,"click"),bouncex.video.fireTrackingEvents(e,"clickTracking")},handleEndEvent:function(e,t){t=this._integrations.moat.getDispatchEventParams("AdVideoComplete",t.volume);bouncex.video.fireTrackingEvents(e,"complete"),bouncex.campaigns[e].video.integrations.moatApiReference.dispatchEvent(t,e),bouncex.off(bouncex.window," volumechange.bx-"+e+" canplay.bx-"+e+" durationchange.bx-"+e+" ended.bx-"+e+" pause.bx-"+e+" play.bx-"+e+" playing.bx-"+e+" timeupdate.bx-"+e+" loadeddata.bx-"+e+" error.bx-"+e+" click.bx-"+e+" canplaythrough.bx-"+e+"touchend.bx-"+e+"onplay.bx-"+e)},updatePlayerButtons:function(e){var t={ended:e.ended,paused:!e.ended&&e.paused,playing:!e.ended&&!e.paused,muted:e.muted,unmuted:!e.muted},n=jQuery(e).closest(".bx-video-wrapper");Object.keys(t).forEach(function(e){n.toggleClass("bx-video-player-"+e,!!t[e])})},getEventUrls:function(e,t){return!(!(t=(bouncex.campaigns[e].video.vast.vpaidUrl?bouncex.campaigns[e].video.vpaid.vastConfig:bouncex.campaigns[e].video.vast).tracking[t])||0===t.length)&&(t="string"==typeof t?[t]:t)},fireTrackingEvents:function(e,t){var n=!1,i=bouncex.campaigns[e].video.uniqueEventPixels||[],o=this.getEventUrls(e,t);if(o)for(var a=0;a<o.length;a++){var r=o[a];null==r||r.length<1||-1===r.indexOf("http")||(i.includes(r)?n=!0:(i.push(r),bouncex.video.log(e,n?"already fired event pixel for "+t:"firing event pixel "+r+" for "+t,"eventpixel"),document.createElement("img").src=r))}},_integrations:{moat:{apiReference:{},init:function(e,t){bouncex.video.log(e,"init moat integration","moat"),bouncex.video._integrations.moat.apiReference=this.getMoatApiReference(e,t)},initMoatTracking:function(e,t,n,i,o){var a,r,s=document.createElement("script"),c=[];t={adData:{ids:t,duration:n,url:o},dispatchEvent:function(e,t){t&&bouncex.video.log(t,e.type,"moat"),this.sendEvent?(c&&(c.push(e),e=c,c=!1),this.sendEvent(e)):c.push(e)}},n="_moatApi"+Math.floor(1e8*Math.random());try{r=(a=e.ownerDocument).defaultView||a.parentWindow}catch(e){a=document,r=window}return r[n]=t,s.type="text/javascript",e&&e.insertBefore(s,e.childNodes[0]||null),s.src="https://z.moatads.com/"+i+"/moatvideo.js#"+n,t},getMoatApiReference:function(e,t){var n=bouncex.campaigns[e];return{partnerCode:"bouncexjsvideo854426616072",container:bouncex.campaigns[e].video.player,url:t.src,duration:t.duration,ids:{level1:window.location.host+"("+bouncex.website.id+")",level2:bouncex.gbi2.getDeploymentType(e),level3:t.isVPAID?"VPAID":"VAST",level4:"video",slicer1:bouncex.state.mobile?"mobile":"desktop",slicer2:n.trigger}}},getDispatchEventParams:function(e,t){return{type:e,adVolume:t}}}},report:function(e,t,n){bouncex.video.log(e,'reporting event "'+t+'"',"player");var i=bouncex.video.getPlayerSnapshot(e,bouncex.campaigns[e].video.player);(n=n||{}).source="ads",n.agent="js",n.video_type=i.isVPAID?"VPAID":"VAST",n.media_type=i.type,n.media_size=i.dimensions.videoWidth+"x"+i.dimensions.videoHeight,n.video_length=i.time.duration,"video_pause"===t&&(n.pause_location=i.time.currentUnformatted),buildReport(e,t,n)},log:function(e,t,n){var i,o=e?"["+e+"]":"",a="("+(bouncex.campaigns[e]?bouncex.campaigns[e].video.config.provider||"no provider":"stack")+")";switch(_records.default.addRecord({group:"video",campaignId:e,message:t,isError:"error"===n?"#FF0000":"#00F"}),n){case"vast":i="#09AF59";break;case"vpaid":i="#226666";break;case"player":i="#8E29D4";break;case"moat":i="#A13647";break;case"error":i="#FF0000";break;case"warning":i="#F67917";break;case"eventpixel":i="#956843";break;default:i="#8E29D4"}"vast"===n?bouncex.log("%c [vast]: "+t,"color: "+i):bouncex.log("%c video ["+n+"] "+o+a+": "+t,"color: "+i)},fail:function(e,t){bouncex.campaigns[e].failed=!0,bouncex.video.log(e,t,"error")}},bouncex.vpd={generateVPAIDManager:function(t){bouncex.video.configPlayer(t),bouncex.campaigns[t].video.vpaid=bouncex.campaigns[t].vpaid||{},bouncex.vpd.campaignId=t;try{bouncex.video.log(t,"getVPAIDAd() called","vpaid"),bouncex.campaigns[t].video.vpaid.ad=getVPAIDAd(),this._versionCheck(t)}catch(e){bouncex.campaigns[t].video.vpaid.ad=document.getVPAIDAd()}this._init(t)},_versionCheck:function(e){var t=bouncex.campaigns[e].video.vpaid.ad.handshakeVersion("2.0");if(t&&"2.0"!==t)return bouncex.video.log(e,"generateVPAIDManager -> Ad VPAID version ("+t+") is not supported","error"),!1},_buildVpaidEnv:function(e,t,n,i){bouncex.video.log(e,"building VPAID environment","vpaid");return t.ad=bouncex.campaigns[e].video.vpaid.ad,t.vastConfig=bouncex.campaigns[e].video.vast,t.config={},i&&((i=i.appendChild(document.createElement("div"))).className="bx-vpaid-slot bx-row-html"),t.callbacks={AdClickThru:this.onAdClickThru,AdDurationChange:this.onAdDurationChange,AdError:this.onAdError,AdImpression:this.onAdImpression,AdLoaded:this.onAdLoaded,AdPaused:this.onAdPaused,AdPlaying:this.onAdPlaying,AdSizeChange:this.onAdSizeChange,AdSkippableStateChange:this.onAdSkippableStateChange,AdSkipped:this.onAdSkipped,AdStarted:this.onAdStarted,AdStopped:this.onAdStopped,AdUserAcceptInvitation:this.onAdUserAcceptInvitation,AdUserClose:this.onAdUserClose,AdUserMinimize:this.onAdUserMinimize,AdVideoComplete:this.onAdVideoComplete,AdVideoFirstQuartile:this.onAdVideoFirstQuartile,AdVideoMidpoint:this.onAdVideoMidpoint,AdVideoStart:this.onAdVideoStart,AdVideoThirdQuartile:this.onAdVideoThirdQuartile,AdVolumeChange:this.onAdVolumeChange},t.adUnit={lastVolume:""},t.config.creativeData={},t.config.environmentVars={},t.config.viewMode="normal",t.config.desiredBitrate=-1,t.config.environmentVars.slot=i,t.config.environmentVars.videoSlot=n,t.config.environmentVars.autoPlay=!1,t.config.environmentVars.videoSlotCanAutoPlay=!0,t},_init:function(e){bouncex.video.log(e,"init VPAID","vpaid");var t,n=bouncex.document[0].getElementById("bx-video-player-"+e),i=bouncex.document[0].getElementById("bx-video-wrapper-"+e),o=this._buildVpaidEnv(e,bouncex.campaigns[e].video.vpaid,n,i),a=o.ad,i=document.getElementById("bx-video-progress-wrapper-"+e);for(t in i&&i.parentNode.removeChild(i),o.callbacks)a.unsubscribe(o.callbacks[t],t),a.subscribe(o.callbacks[t],t);o.vastConfig.vpaidAdParams&&(o.config.creativeData={AdParameters:o.vastConfig.vpaidAdParams}),bouncex.vpd._validateVPAID(a)||bouncex.video.log(e,"_validateVPAID Error: VPAID interface check failed","error"),bouncex.vpd._adjustCreativeForVpaid(e),a.initAd(o.vastConfig.vpaidWidth,o.vastConfig.vpaidHeight,o.config.viewMode,o.config.desiredBitrate,o.config.creativeData,o.config.environmentVars)},_validateVPAID:function(e){return!!(e.handshakeVersion&&"function"==typeof e.handshakeVersion&&e.initAd&&"function"==typeof e.initAd&&e.startAd&&"function"==typeof e.startAd&&e.stopAd&&"function"==typeof e.stopAd&&e.skipAd&&"function"==typeof e.skipAd&&e.resizeAd&&"function"==typeof e.resizeAd&&e.pauseAd&&"function"==typeof e.pauseAd&&e.resumeAd&&"function"==typeof e.resumeAd&&e.expandAd&&"function"==typeof e.expandAd&&e.collapseAd&&"function"==typeof e.collapseAd&&e.subscribe&&"function"==typeof e.subscribe&&e.unsubscribe&&"function"==typeof e.unsubscribe)},_adjustCreativeForVpaid:function(e){var t=bouncex.campaigns[e].video.vast,n=2*jQuery("#bx-creative-"+e+" .bx-wrap").css("padding-left").replace(/[^0-9]/g,"");jQuery("#bx-creative-"+e).css("max-width",parseInt(t.vpaidWidth)+n+"px")},_fireVpaidTrackingEvents:function(e,t){var n=bouncex.campaigns[bouncex.vpd.campaignId].video.uniqueEventPixels||[],i=bouncex.campaigns[bouncex.vpd.campaignId].video.vpaid.ad,o=!1;if(null!=t&&0!=t.length&&!bouncex.video.disableTrackingEvents){"string"==typeof t&&(t=[t]);for(var a=0;a<t.length;a++){var r=t[a];null===r||r.length<1||-1===r.indexOf("http")||(n.includes(r)?o=!0:(n.push(r),"true"!==i.allowCacheBusting&&!0!==i.allowCacheBusting||(-1<r.indexOf("?")?r+="&rnd="+Math.random():r+="?rnd="+Math.random()),bouncex.video.log(bouncex.vpd.campaignId,o?"already fired event pixel for "+e:"firing event pixel "+r+" for "+e,"eventpixel"),document.createElement("img").src=r))}}},playVPAIDBeforeImpression:function(e,t){t=bouncex.campaigns[t].video;t.videoResponseLoaded=!0,t.triggerType=e,t.vpaid.ad.startAd()},_adLoaded:function(e,t){bouncex.campaigns[e].video.status.ready=!0,bouncex.video.playerReady(e)},_adStarted:function(e){bouncex.campaigns[e].video.videoResponseLoaded&&show_ad(bouncex.campaigns[e].video.triggerType,e)},_currentAdVolume:function(){return bouncex.campaigns[bouncex.vpd.campaignId].video.vpaid.ad.getAdVolume()},onAdLoaded:function(){var e=bouncex.campaigns[bouncex.vpd.campaignId].video.vpaid;bouncex.vpd._adLoaded(bouncex.vpd.campaignId,e),bouncex.vpd._fireVpaidTrackingEvents("AdLoaded",e.vastConfig.tracking.loaded),e.ad.unsubscribe(e.callbacks.onAdLoaded,"AdLoaded")},onAdStarted:function(){var e=bouncex.vpd._currentAdVolume();bouncex.vpd._fireVpaidTrackingEvents("AdStarted",bouncex.campaigns[bouncex.vpd.campaignId].video.vpaid.vastConfig.tracking.creativeView),bouncex.campaigns[bouncex.vpd.campaignId].video.vpaid.adUnit.lastVolume=e,bouncex.vpd._adStarted(bouncex.vpd.campaignId)},onAdUserClose:function(){bouncex.vpd._fireVpaidTrackingEvents("AdUserClose",bouncex.campaigns[bouncex.vpd.campaignId].video.vpaid.vastConfig.tracking.close)},onAdUserMinimize:function(){bouncex.vpd._fireVpaidTrackingEvents("AdUserMinimize",bouncex.campaigns[bouncex.vpd.campaignId].video.vpaid.vastConfig.tracking.collapse)},onAdUserAcceptInvitation:function(){bouncex.vpd._fireVpaidTrackingEvents("AdUserAcceptInvitation",bouncex.campaigns[bouncex.vpd.campaignId].video.vpaid.vastConfig.tracking.acceptInvitation)},onAdSkippableStateChange:function(){bouncex.campaigns[bouncex.vpd.campaignId].video.vpaid.ad.getAdSkippableState()},onAdStopped:function(){var e=bouncex.vpd._currentAdVolume();bouncex.campaigns[bouncex.vpd.campaignId].video.status.stopped=!0,bouncex.vpd._moatDispatch("AdStopped",e)},onAdPaused:function(){var e=bouncex.vpd._currentAdVolume(),t=bouncex.campaigns[bouncex.vpd.campaignId].video;t.manuallyPaused=t.manuallyPaused||BrowserUtil.currentTab.isVisible(),bouncex.vpd._fireVpaidTrackingEvents("AdPaused",bouncex.campaigns[bouncex.vpd.campaignId].video.vpaid.vastConfig.tracking.pause),bouncex.vpd._moatDispatch("AdPaused",e)},onAdPlaying:function(){var e=bouncex.vpd._currentAdVolume();bouncex.campaigns[bouncex.vpd.campaignId].video.manuallyPaused=!1,bouncex.vpd._fireVpaidTrackingEvents("AdPlaying",bouncex.campaigns[bouncex.vpd.campaignId].video.vpaid.vastConfig.tracking.resume),bouncex.vpd._moatDispatch("AdPlaying",e)},onAdVolumeChange:function(){var e=bouncex.vpd._currentAdVolume(),t=bouncex.campaigns[bouncex.vpd.campaignId].video.vpaid.adUnit.lastVolume;0===e&&0<t?bouncex.vpd._fireVpaidTrackingEvents("AdVolumeChange",bouncex.campaigns[bouncex.vpd.campaignId].video.vpaid.vastConfig.tracking.mute,"volumechange"):0<e&&0===t&&bouncex.vpd._fireVpaidTrackingEvents("AdVolumeChange",bouncex.campaigns[bouncex.vpd.campaignId].video.vpaid.vastConfig.tracking.unmute,"volumechange"),bouncex.vpd._moatDispatch("AdVolumeChange",e),bouncex.campaigns[bouncex.vpd.campaignId].video.vpaid.adUnit.lastVolume=e},onAdImpression:function(){bouncex.vpd._fireVpaidTrackingEvents("AdImpression",bouncex.campaigns[bouncex.vpd.campaignId].video.vpaid.vastConfig.tracking.impression)},onAdVideoStart:function(){var e=bouncex.vpd.campaignId;bouncex.video.toggleMute(e,!0);e=bouncex.vpd._currentAdVolume();bouncex.campaigns[bouncex.vpd.campaignId].video.vpaid.adUnit.started=!0,bouncex.vpd._fireVpaidTrackingEvents("AdVideoStart",bouncex.campaigns[bouncex.vpd.campaignId].video.vpaid.vastConfig.tracking.start),bouncex.vpd._moatDispatch("AdVideoStart",e)},onAdSkipped:function(){bouncex.vpd._fireVpaidTrackingEvents("AdSkipped",bouncex.campaigns[bouncex.vpd.campaignId].video.vpaid.vastConfig.tracking.skip),bouncex.close_ad(bouncex.vpd.campaignId)},onAdVideoFirstQuartile:function(){var e=bouncex.vpd._currentAdVolume();bouncex.vpd._fireVpaidTrackingEvents("AdVideoFirstQuartile",bouncex.campaigns[bouncex.vpd.campaignId].video.vpaid.vastConfig.tracking.firstQuartile),bouncex.campaigns[bouncex.vpd.campaignId].video.status.qOne=!0,bouncex.vpd._moatDispatch("AdVideoFirstQuartile",e)},onAdVideoMidpoint:function(){var e=bouncex.vpd._currentAdVolume();bouncex.vpd._fireVpaidTrackingEvents("AdVideoMidpoint",bouncex.campaigns[bouncex.vpd.campaignId].video.vpaid.vastConfig.tracking.midpoint),bouncex.campaigns[bouncex.vpd.campaignId].video.status.midpoint=!0,bouncex.vpd._moatDispatch("AdVideoMidpoint",e)},onAdVideoThirdQuartile:function(){var e=bouncex.vpd._currentAdVolume();bouncex.vpd._fireVpaidTrackingEvents("AdVideoThirdQuartile",bouncex.campaigns[bouncex.vpd.campaignId].video.vpaid.vastConfig.tracking.thirdQuartile),bouncex.campaigns[bouncex.vpd.campaignId].video.status.qThree=!0,bouncex.vpd._moatDispatch("AdVideoThirdQuartile",e)},onAdClickThru:function(e,t,n){bouncex.campaigns[bouncex.vpd.campaignId].video.vast.clickThrough=e,void 0!==n&&1==n&&(e?window.open(e):bouncex.campaigns[bouncex.vpd.campaignId].video.vast.clickThrough&&window.open(bouncex.campaigns[bouncex.vpd.campaignId].video.vast.clickThrough)),bouncex.vpd._fireVpaidTrackingEvents("AdClickThru",bouncex.campaigns[bouncex.vpd.campaignId].video.vpaid.vastConfig.tracking.clickTracking)},onAdDurationChange:function(){bouncex.vpd._fireVpaidTrackingEvents("AdDurationChange",bouncex.campaigns[bouncex.vpd.campaignId].video.vpaid.vastConfig.tracking.durationchange)},onAdSizeChange:function(){(document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.fullscreenElement)&&bouncex.vpd._fireVpaidTrackingEvents("AdSizeChange",bouncex.campaigns[bouncex.vpd.campaignId].video.vpaid.vastConfig.tracking.fullscreen)},onAdVideoComplete:function(){bouncex.vpd._fireVpaidTrackingEvents("AdVideoComplete",bouncex.campaigns[bouncex.vpd.campaignId].video.vpaid.vastConfig.tracking.complete),bouncex.vpd._moatDispatch("AdVideoComplete",bouncex.vpd._currentAdVolume())},onAdError:function(e){bouncex.vpd._fireVpaidTrackingEvents("AdError",bouncex.campaigns[bouncex.vpd.campaignId].video.vpaid.vastConfig.tracking.error)},_moatDispatch:function(e,t){bouncex.campaigns[bouncex.vpd.campaignId].video.integrations.moatApiReference.dispatchEvent({type:e,adVolume:t},bouncex.vpd.campaignId)}};var ComplianceChecks={init:function(){this.onFailure=bouncex.destroyAll,this.onSuccess=InitSequence.init1.serviceReady.bind(InitSequence.init1,"compliance check"),this._checkComplianceIntegrations()},_checkComplianceIntegrations:function(){for(var e in this._finished=!1,this._integrations)this._integrations.hasOwnProperty(e)&&(e=this._integrations[e],this._setIntegrationActions(e.name),this._initIntegration(e))},_hasFailingIntegration:function(){for(var e in this._integrations)if(this._integrations.hasOwnProperty(e)&&!this._integrations[e].passed)return!0;return!1},_initIntegration:function(e){delete e.passed,e.init()},_integrationPassed:function(){this._finished||this._hasFailingIntegration()||(this.compliancePassed=!0,this._finished=!0,this.onSuccess())},_integrationFailed:function(e){this.compliancePassed=!1,this._finished=!0,this.onFailure(e)},_setIntegrationActions:function(e){var t,n=this._integrations[e];for(t in this._integrationActions)n[t]=this._integrationActions[t].bind(this,n)},_integrationActions:{log:function(e,t){this._log(e.name,t)},failsCheckInEU:function(e,t){if(!0===bouncex.gdprApplies||bouncex.state&&bouncex.state.gdpr)return e.failsCheck(t);bouncex.complianceFlag=bouncex.complianceFlag||"gdpr_no_consent",e.passesCheck(t)},failsCheckInCA:function(e,t){if(!0===e.ccpaApplies)return e.failsCheck(t);e.passesCheck(t)},passesCheck:function(e,t){e.passed=!0,this._log(e.name,t,!1),this._integrationPassed()},failsCheck:function(e,t){e.passed=!1,setTimeout2(function(){ComplianceChecks._finished||(bouncex.complianceFlag="no_consent",this._log(e.name,t,!0),this._integrationFailed(e.name))}.bind(this),5e3)}},_integrations:{ccpa:{name:"ccpa",init:function(){if(!window.__uspapi)return this.ccpaApplies=!1,this.passesCheck("CCPA does not apply");__uspapi("getUSPData",1,function(e,t){return t&&this.hasOptedOut(e)?this.failsCheckInCA(this.name,"user has opted out"):this.passesCheck("user has not opted out or CCPA N/A")}.bind(this))},hasOptedOut:function(e){return!(!e||!e.uspString||"Y"!==e.uspString.charAt(2)||(this.ccpaApplies=!0,0))}},iab_cmp:{name:"iab_cmp",bxVendorId:256,bxPurposeIds:[1],init:function(){if(this.cmpVersion=null,this.consentEventData={"consent:timeStamp":(0,_helpers.getTimeMs)()},window.__tcfapi)this.cmpVersion=2,this.addTcf();else{if(!window.__cmp)return this.consentEventData["consent:hasConsent"]="no cmp",this.passesCheck("no __cmp");this.cmpVersion=1,this.getVendorConsents()}this.pingTimeout=setTimeout2(function(){this.failsCheckInEU("ping timed out")}.bind(this),200),this.pingCMP()},gdprApplies:function(e){return!1===e||"false"===e?bouncex.gdprApplies=!1:!0!==e&&"true"!==e||(bouncex.gdprApplies=!0),bouncex.gdprApplies},addTcf:function(){window.__tcfapi("addEventListener",2,tryCatch(function(e,t){if(this.consentEventData["consent:tcData"]=qs(e),this.getVendorConsentsCalled=!0,!t)return this.failsCheckInEU("success false");t=this.gdprApplies(e.gdprApplies);if(t){if(this.consentPasses(e.vendor.consents[this.bxVendorId])){for(var n=0;n<this.bxPurposeIds.length;n++){var i=this.bxPurposeIds[n];if(!this.consentPasses(e.purpose.consents[i]))return}this.consentEventData["consent:hasConsent"]=!0,this.passesCheck("checks passed")}}else!1===t&&this.passesCheck("gdpr does not apply")}.bind(this)))},pingCMP:function(){this.firstTime=this.firstTime||(0,_helpers.getTimeMs)(),1===this.cmpVersion?window.__cmp("ping",null,tryCatch(this.pingHandler.bind(this))):2===this.cmpVersion&&window.__tcfapi("ping",2,tryCatch(this.pingHandler.bind(this)))},pingHandler:function(e,t){if(clearTimeout(this.pingTimeout),!this._finished){if(!e||!t&&1===this.cmpVersion)return this.failsCheckInEU("ping success false");e=this.gdprApplies(e.gdprApplies);return e?void 0:!1===e?this.passesCheck("gdpr does not apply"):2e3<=(0,_helpers.getTimeMs)()-this.firstTime?this.getVendorConsentsCalled?this.failsCheckInEU("gdpr consent unknown"):this.passesCheck("cmp not loaded in time"):void setTimeout2(this.pingCMP.bind(this),200)}},getVendorConsents:function(){window.__cmp("getVendorConsents",[this.bxVendorId],tryCatch(function(e,t){if(this.getVendorConsentsCalled=!0,!t)return this.failsCheckInEU("success false");t=this.gdprApplies(e.gdprApplies);if(t){if(this.consentPasses(e.vendorConsents[this.bxVendorId])){for(var n=0;n<this.bxPurposeIds.length;n++){var i=this.bxPurposeIds[n];if(!this.consentPasses(e.purposeConsents[i]))return}this.passesCheck("checks passed")}}else!1===t&&this.passesCheck("gdpr does not apply")}.bind(this)))},consentPasses:function(e){return!0===e||(!1===e?this.failsCheck("fails consent"):this.failsCheckInEU("unexpected response"),!1)},report:function(){(!0===bouncex.gdprApplies||bouncex.state&&bouncex.state.gdpr)&&event_stream_report("cmp",this.consentEventData)}}},_log:function(e,t,n){t={group:"compliance",message:e+": "+t};n?_logger.default.error(t):_logger.default.info(t)},report:function(){for(var e in this._integrations)"function"==typeof this._integrations[e].report&&this._integrations[e].report()}};exports.ComplianceChecks=ComplianceChecks;var CouponCodes={insertCodesInCurrentStep:function(e){e={campaignId:e,getPlaceholders:this._step.getPlaceholders,populateCoupon:this._step.populatePlaceholderWithCode,insertLoadingMsg:this._step.insertLoadingMsg};this.log(e,"init visible coupons"),this._loadCoupons(e)},insertCodesInFormAndSubmit:function(e,t){t={campaignId:e,getPlaceholders:this._form.getPlaceholders,populateCoupon:this._form.populatePlaceholderWithCode,callback:t};this.log(t,"init hidden coupons"),this._loadCoupons(t)},_step:{getPlaceholders:function(e){var n=bouncex.campaigns[e.campaignId],i=".bx-step-"+n.current_step+' .bx-cpn-not-loaded[data-cpn-set]:not([data-cpn-set=""])';return Array.prototype.slice.call(n.obj1[0].querySelectorAll(i)).map(function(e,t){return{campaign:e,clone:n.obj2[1]?n.obj2[1].querySelectorAll(i)[t]:null}})},populatePlaceholderWithCode:function(t){[t.placeholder,t.clone].map(function(e){e&&(e.innerText=t.code||t.errorMsg,e.classList.remove("bx-cpn-not-loaded"))}),CouponCodes._checkIsFinished(t)},insertLoadingMsg:function(e){[e.placeholder,e.clone].map(function(e){e&&(e.innerText="loading...")})}},_form:{getPlaceholders:function(e){e=bouncex.campaigns[e.campaignId];return Array.prototype.slice.call(e.jform[0].querySelectorAll('[value="bx-cpn-not-loaded"][data-cpn-set]:not([data-cpn-set=""])')).map(function(e){return{campaign:e}})},populatePlaceholderWithCode:function(e){e.placeholder.value=e.code||"false",CouponCodes._checkIsFinished(e)}},_loadCoupons:function(t){var e=t.getPlaceholders(t);if(0===e.length)return this.log(t,"no coupons found"),this._finishedLoading(t);e.forEach(function(e){e={campaignId:t.campaignId,populateCoupon:t.populateCoupon,getPlaceholders:t.getPlaceholders,callback:t.callback,setName:e.campaign.getAttribute("data-cpn-set"),placeholder:e.campaign,clone:e.clone,insertLoadingMsg:t.insertLoadingMsg};this._loadCoupon(e)}.bind(this))},_finishedLoading:function(e){this.log(e,"finished"),"function"==typeof e.callback&&e.callback()},_loadCoupon:function(e){var t=this._getCouponStatus(e.setName);switch(this.log(e,"coupon status: "+t),t){case"cookied":return e.code=this._getCookiedCode(e.setName),this._populateCoupon(e);case"untracked":return this._requestCoupon(e);case"requesting":return setTimeout2(this._loadCoupon.bind(this,e),200);default:return bouncex.err("unexpected coupon status",{source:"coupon code"})}},_requestCoupon:function(e){this.log(e,"requesting coupon");var t={type:"GET",url:"https://"+bouncex.website.bau+"/bounce/fetch_coupon",data:{setName:e.setName,websiteId:bouncex.website.id,visitId:bouncex.cookie.vid,deviceId:bouncex.cookie.did,campaignId:e.campaignId,requestToken:bouncex.state.request_token},success:this._onSuccessHandler.bind(this,e),error:this._onErrorHandler.bind(this,e)};bouncex.website.cpnu&&"cpn.bouncex.net"!=bouncex.website.cpnu&&(t.url="https://"+bouncex.website.cpnu+"/coupon",t.headers={Authorization:"Bearer "+bouncex.state.request_token},t.data={set:e.setName,website_id:bouncex.website.id,visit_id:bouncex.cookie.vid}),this._pendingCoupons[e.setName]=!0,"function"==typeof e.insertLoadingMsg&&e.insertLoadingMsg(e),jQuery.ajax(t)},_onSuccessHandler:function(e,t){return t&&t.error?this._onErrorHandler(e,null,t.error):t&&t.code||t&&t.coupon&&t.coupon.code?(e.code=t.code||t.coupon&&t.coupon.code,this._completeRequest(e,"successful"),void this.report({campaignId:e.campaignId,couponId:t.id||t.coupon&&t.coupon.id,couponCode:t.code||t.coupon&&t.coupon.code})):this._onErrorHandler(e,null,"unexpected response")},_onErrorHandler:function(e,t,n){var i=this._getDefaultCode(e.placeholder);i?e.code=i:e.errorMsg=this._getErrorMsg(n);i=[];t&&"number"==typeof t.status&&i.push("xhr status "+t.status),n&&i.push(n);i="failed: "+i.join(",");bouncex.err({name:"coupon error",message:i},{liveTraffic:100,campaignId:e.campaignId}),this._completeRequest(e,i)},_getErrorMsg:function(e){return"no coupon found"!==e?"COUPON ERROR 1":"COUPON ERROR 0"},_completeRequest:function(e,t){this.log(e,"request status: "+t),e.code&&this._cookieCoupon(e.setName,e.code),this._populateCoupon(e),delete this._pendingCoupons[e.setName]},_cookieCoupon:function(t,n){bouncex.updateBounceCookie(function(e){e.cpn=bouncex.utils.isObject(e.cpn)?e.cpn:{},e.cpn[t]=n})},_populateCoupon:function(e){this.log(e,"populating code: "+e.code),this._triggerCouponFetchedEvent(e),e.populateCoupon(e)},_triggerCouponFetchedEvent:function(e){bouncex.window&&bouncex.window.trigger("bxCouponFetched",[{setName:e.setName,code:e.code,campaignId:e.campaignId}])},_pendingCoupons:{},_getCouponStatus:function(e){return bouncex.cookie.cpn&&bouncex.cookie.cpn[e]?"cookied":this._pendingCoupons[e]?"requesting":"untracked"},_getCookiedCode:function(e){return bouncex.cookie.cpn&&bouncex.cookie.cpn[e]},_getDefaultCode:function(e){return e.getAttribute("data-cpn-default")},_checkIsFinished:function(e){this._hasPlaceholders(e)||this._finishedLoading(e)},_hasPlaceholders:function(e){return 0<e.getPlaceholders(e).length},log:function(e,t){e={shouldLog:(0,_helpers.visitorTestMode)("coupons"),group:"coupons",campaignId:e.campaignId||"",message:(e.setName?e.setName+": ":"")+t},_logger.default.info(e)},report:function(e){bouncex.report(e.campaignId,"coupon",{"coupon:id":e.couponId,"coupon:code":e.couponCode})}};function activateGbiCampaign(e){if(bouncex.campaigns[e].gbi.ready)return 1;var t;bouncex.gbi.log(e,"activate gbi campaign"),bouncex.campaigns[e].gbi.ready=!0,bouncex.campaigns[e].gbi.stack_id?(t=bouncex.campaigns[e].gbi.stack_id,bouncex.gbi.stacks[t].leader_id==e&&"control"==bouncex.campaigns[e].ttype||(bouncex.gbi.log(e,"a campaign in the stack is ready, processing stack..."),processGbiStack(t))):(bouncex.gbi.log(e,"activating out of stack campaign"),campaignEligible(e),activateInstruments(e))}function attachClickReportingToIframe(e,t){bouncex.on(e,"mouseenter.gbi_click_events_"+t,function(){bouncex.on(bouncex.window,"blur.gbi_click_events_"+t,function(){bouncex.report(t,"click",{value:"ad"})})}),bouncex.events[t].gbi_click=function(){bouncex.off(bouncex.window,"blur.gbi_click_events_"+t)},bouncex.on(e,"mouseleave.gbi_click_events_"+t,bouncex.events[t].gbi_click)}function canShowGbi(){var e=document.createElement("div");e.innerHTML="&nbsp;",e.className=bouncex.lz.decompressFromURI("IYEwzgRgNg9gxgayA"),document.body.appendChild(e);var t=e.offsetHeight;return document.body.removeChild(e),0!==t}function clearGbiStackCampaigns(e,t){bouncex.gbi.log(!1,"clearing other campaigns...");var n,i,o=bouncex.gbi.stacks[e].campaigns;for(n in o)!o.hasOwnProperty(n)||(i=o[n])!=t&&(bouncex.gbi.cancelRequest(i),bouncex.destroy_ad(i,!0))}function deactivateGbiCampaign(e){bouncex.events[e].gbiRequest&&clearInterval(bouncex.events[e].gbiRequest),bouncex.gbi.log(e,"deactivate gbi campaign"),bouncex.campaigns[e].failed=!0,bouncex.campaigns[e].gbi.ready=!1}function finishGbiStack(e,t){bouncex.gbi.stacks[e].failed=!1,clearInterval(bouncex.events[bouncex.gbi.stacks[e].leader_id].gbiStack),delete bouncex.events[bouncex.gbi.stacks[e].leader_id].gbiStack;var n="control"==bouncex.campaigns[bouncex.gbi.stacks[e].leader_id].ttype;t||(bouncex.gbi.stacks[e].failed=!0,n&&selectAdStackCampaign(bouncex.gbi.stacks[e].leader_id)),bouncex.gbi.log(!1,"done looking at stack ["+e+"] "+(bouncex.gbi.stacks[e].failed?"failed":"success"))}function initGbiStack(e,t){bouncex.gbi.log(!1,"Starting stack ["+e+"]");var n=bouncex.gbi.stacks[e];n.started=!0,bouncex.events[n.leader_id]||(bouncex.events[n.leader_id]={}),bouncex.events[n.leader_id].gbiStack=setTimeout2(function(){processGbiStack(e)||(9<n.processCount?(bouncex.gbi.log(!1,"stack ["+e+"]: ran out of tries"),finishGbiStack(e,!1)):n.finished||(bouncex.gbi.log(!1,"stack ["+e+"]: no winners yet. Trying again..."),initGbiStack(e,1e3)))},t)}function processGbiStack(e){var t;if((t=bouncex.gbi.stacks[e]).finished)return bouncex.gbi.log(!1,"stack ["+e+"] already finished"),0;(t=bouncex.gbi.stacks[e]).processCount=t.processCount||0,t.processCount++,bouncex.gbi.log(!1,"processing stack ["+e+"] ("+t.processCount+") ...");var n,i=t.campaigns;for(n in t.failedCount=0,i)if(i.hasOwnProperty(n)){var o=i[n],a=bouncex.campaigns[o];if(a.failed)t.failedCount++,bouncex.gbi.log(o,"has failed");else if("control"==a.ttype&&o==t.leader_id)t.failedCount++;else{if(!a.gbi.ready&&a.gbi.config&&a.gbi.config.stackWeight&&a.gbi.config.stackWeight>t.processCount)return bouncex.gbi.log(o,"campaign with weight of "+a.gbi.config.stackWeight+" didn't have enough time"),0;if(a.gbi.ready)return selectAdStackCampaign(o),finishGbiStack(e,!0),1;bouncex.gbi.log(o,"not ready ")}}return t.failedCount!==i.length||(bouncex.gbi.log(!1,"stack ["+e+"]: all campaigns have failed"),finishGbiStack(e,!1)),0}function selectAdStackCampaign(e){var t=bouncex.campaigns[e].gbi.stack_id;bouncex.gbi.stacks[t].finished=!0,bouncex.gbi.log(e,"selected"),campaignEligible(e),initActivationInstruments(e),clearGbiStackCampaigns(t,bouncex.gbi.stacks[t].selectedCampaign=e)}exports.CouponCodes=CouponCodes,bouncex.dg={init:function(){bouncex.website.dgp&&(this.dg_timeout=setTimeout2(function(){CustomVariables.evalVars("devicegraph"),bouncex.err("dg timeout")},3e3)),this.initPostDeviceGraph(null)},initPostDeviceGraph:function(e,t){perf.times("initPostDeviceGraph"),null===e?(void 0!==t&&t.IDs&&(this.idTime=(0,_helpers.getTimeMs)(),this.json=t,this.softID=t.IDs.deviceID,this.hardID=t.IDs.cookieID,!t.info.firstLoad&&bouncex.cookie.dgFirstLoad||(bouncex.updateBounceCookie({dgFirstLoad:!0}),bouncex.website.pde&&this.previousCustomerLookup()),assignCookieDGids()),void 0!==bouncex.state&&void 0!==this.json&&(t=this.json,bouncex.perf.manualTiming("bxid",this.idTime),bouncex.website.dgp&&(clearTimeout(this.dg_timeout),this.store=bouncex.parseJSON(t.cookie),this._replenishCookie(),CustomVariables.evalVars("devicegraph")))):this.handleError(e)},getAdsOptStatus:function(e,t){null===e&&(t=t.deviceID||t.IDs.deviceID,window.bouncex.gbi.deviceOptedStatus=t||"")},previousCustomerLookup:function(){var e;bouncex.gdpr_opt_out||(perf.times("pd-start2"),e="https://pd.cdnwidget.com",e=(e="development"===bouncex.env||"staging"===bouncex.env?"https://pd.stg.cdnwidget.com":e)+"/lookup?deviceID="+this.softID+"&cookieID="+this.hardID+"&bxwid="+bouncex.website.id,(0,_xhr.default)({url:e,type:"GET",then:function(e){var t={name:"deviceGraph",callback:function(e){bouncex.unsubscribeFromCookie(e),InitSequence.init1.serviceReady("graph callback")}};bouncex.subscribeToCookie(t),bouncex.updateBounceCookie({dg:e})},catch:this.handleError,finally:function(){perf.times("pd-stop2")}}))},_replenishCookie:function(){var e=[],t=bouncex.stringify(bouncex.cookie.v);if(this.store&&this.store.v)for(var n in this.store.v)if(this.store.v.hasOwnProperty(n)&&bouncex.cookie.v[n]!==this.store.v[n]){if(void 0===CustomVariables.getVar(n)){delete this.store.v[n];continue}e.push(n),bouncex.setv(n,this.store.v[n])}e.length&&(reload_campaigns("device_graph_hydration",e.join(",")),event_stream_report("device_graph_hydration",{hydrated_deviceid:this.store.did,hydrated_visitid:this.store.vid,hydrated_cookie:bouncex.stringify(this.store),cookie:bouncex.stringify(bouncex.cookie),hydrated_cvar:bouncex.stringify(this.store.v),previous_cvar:t}))},updateDeviceGraphCookie:function(){this.store.did=bouncex.cookie.did,this.store.vid=bouncex.cookie.vid;var e={bxwid:bouncex.website.id,deviceID:this.softID,obj:encodeURIComponent(bouncex.stringify(this.store))};jQuery.ajax({type:"GET",url:"https://ids.cdnwidget.com/u?"+qs(e),error:function(){bouncex.err("device graph update failed")}})},handleError:function(e){bouncex.updateBounceCookie({dgFirstLoad:!0}),_logger.default.error({group:"Device Graph",message:e}),InitSequence.init1.serviceReady("graph callback")}},bouncex.et={init:function init(){this.stopAll();try{eval(bouncex.website.etjs),this.evalAllUIEvents(!0)}catch(err){bouncex.err(err,{source:"event tracking js"})}},evalAllUIEvents:function(e){if(2===bouncex.website.ete&&bouncex.website.etjson)for(var t=0;t<bouncex.website.etjson.length;t++)!e&&bouncex.website.etjson[t].criteriaPassed||(bouncex.website.etjson[t].criteriaPassed=this.evalUIEvent(bouncex.website.etjson[t]))},evalUIEvent:function(t){var e=new Criteria(t.type.val,t.evaluation,"UI event").evaluate();if(e){var n=t.trigger;switch(n.activation){case"onActiveTime":var i=n.val;bouncex.et.onActiveTime(i,function(){bouncex.et.makeUIEvent(t)});break;case"onClick":var o=bouncex.website.els[n.val];o&&bouncex.et.on(bouncex.body,"click",function(){var e=jQuery(this);bouncex.et.makeUIEvent(t,e)},o);break;case"onCartEmpty":bouncex.et.onCartEmpty(function(){bouncex.et.makeUIEvent(t)});break;case"onHover":case"onVisible":bouncex.et[n.activation](bouncex.website.els[n.val],function(e){bouncex.et.makeUIEvent(t,e)});break;case"delay":o=1e3*n.val;bouncex.setTimeout2(function(){bouncex.et.makeUIEvent(t)},o);break;default:this.makeUIEvent(t)}}return e},makeUIEvent:function(e,i){var t=e.type.val,e=e.data_fields[0].reduce(function(e,t){var n;return"default"!==t.activation&&((n=CustomVariables.getVar(t.val))&&"event"===n.trigger&&CustomVariables.evalVarAndReload(t.val,i),e["custom"===t.activation?t.val:t.activation]=bouncex.vars[t.val]),e},{});bouncex.push([t,e])},hoverTime:1e3,log:function(e){_logger.default.info({group:"et log",message:e,color:"#4b0082"})},on:function(e,t,n,i){var o=this.register({event:t,selector:i,stop:function(){bouncex.off(e,t+"."+o,i)}});return bouncex.on(e,t+"."+o,n,i),o},onActiveTime:function(e,t){var n=ActiveTime.addCallback(e,t);return this.register({event:"active time",stop:function(){ActiveTime.clearCallback(n)}})},onCartEmpty:function(n){var e=bouncex.et.cart.config?bouncex.et.cart.config.cartCountVariable:"cart_qty";this.onVarChange(e,function(e,t){0<e&&0===t&&n()})},onAnyVarChange:function(e){return this.on(bouncex.window,"bxVarsChange",function(){e(arguments[1])})},onVarChange:function(n,i){return this.onAnyVarChange(function(e){for(var t=0;t<e.length;t++)if(e[t].name==n)return i(e[t].oldVal,bouncex.vars[n])})},onHover:function(e,t){var n,i=this.hoverTime,o={event:"hover",selector:e,stop:function(){bouncex.off(bouncex.body,"mouseenter."+a,e),bouncex.off(bouncex.body,"mouseleave."+a,e),clearTimeout(n)}},a=this.register(o);bouncex.on(bouncex.body,"mouseenter."+a,function(){var e=jQuery(this);clearTimeout(n),e.attr("data-bxhover-"+a)||(n=setTimeout(function(){e.attr("data-bxhover-"+a,!0),bouncex.tryCatch(t)(e)},i))},e),bouncex.on(bouncex.body,"mouseleave."+a,function(){clearTimeout(n)},e)},onTrue:function(e,t,n){var i,o=0;n=n||5,e()?t():i=bouncex.et.setInterval(function(){e()?(bouncex.et.stop(i),t()):n<o&&bouncex.et.stop(i),o++})},onVisible:function(e,t){var n,i=!1;function o(){n=jQuery(e).is(":visible"),!i&&n&&bouncex.tryCatch(t)(jQuery(e)),i=n}return o(),this.setInterval(o)},register:function(e){var t=generateUniqueId();return bouncex.listeners=bouncex.listeners||{},bouncex.listeners[t]=e,t},setInterval:function(e){var t=BxInterval.addTask(e);return this.register({event:"bxInterval",stop:function(){BxInterval.stopTask(t)}})},stop:function(e){bouncex.listeners.hasOwnProperty(e)&&(bouncex.listeners[e].stop(),delete bouncex.listeners[e])},stopAll:function(){for(var e in bouncex.listeners)this.stop(e)},cart:{init:function(e){var t={storeCartVariable:"cart",cartCountVariable:"cart_qty",maxVariableSize:bouncex.local_storage_enabled?1500:400,storeValues:["count","items"],maxItems:10};e=jQuery.extend(t,e),this.config=e,this.replenish=e.replenish||this.replenish,this.validateReplenishment=e.validateReplenishment||this.validateReplenishment,this.reportReplenishment=e.reportReplenishment||this.reportReplenishment,this.replenishmentComplete=e.replenishmentComplete||bouncex.utils.getParam("bx_replen"),this.replenishmentType=e.replenishmentType||"unknown",this.replenishmentSuccessful=e.replenishmentSuccessful||this.replenishmentSuccessful,this.tryReplenishment(),this.reportReplenishment()},setReplenishmentReportingStatus:function(e){e={BX_CART_VALID:{code:0},BX_CART_MALFORMED:{code:1,message:"bx_cart malformed"},BX_CART_ITEMS_ALREADY_IN_CART:{code:2,message:"Items already in cart"},BX_CART_MISSING_DATA:{code:3,message:"Missing value, token or items"},BX_CART_REJECTED_UNKNOWN_REASON:{code:4,message:"Aborted for unknown reason"},BX_REPLEN_FAILURE:{code:9,message:"Could not replenish cart"},BX_REPLEN_SUCCESS:{code:10}}[e];e&&(this.returnCode=e.code,e.message&&(this.failureMessage=e.message))},getCart:function(){return this.state||(this.config.storeCartVariable&&bouncex.vars[this.config.storeCartVariable]?(this.state=JSON.parse(bouncex.vars[this.config.storeCartVariable]),this.state):{})},getCount:function(){return bouncex.vars[this.config.cartCountVariable]},inferCount:function(e){if(bouncex.utils.validate.integer(e.count))return parseInt(e.count);if(e.items){for(var t=0,n=0;n<e.items.length;n++)t+=parseInt(e.items[n].qty)||1;return t}return bouncex.utils.validate.integer(this.getCount())?parseInt(this.getCount()):0},parseCartParam:function(e){return"{"!==e.charAt(0)&&(e=atob(e)),JSON.parse(e)},tryReplenishment:function(){var e=bouncex.utils.getParam("bx_cart"),t={};if(this.replenishing=!1,!e)return!1;try{t=this.parseCartParam(e)}catch(e){return bouncex.err(e),this.setReplenishmentReportingStatus("BX_CART_MALFORMED"),!1}return this.validateReplenishment(t)?(this.save(t),this.replenishing=!0,this.setReplenishmentReportingStatus("BX_CART_VALID"),this.replenish(t)):(void 0===this.returnCode&&this.setReplenishmentReportingStatus("BX_CART_REJECTED_UNKNOWN_REASON"),!1)},replenish:function(e){return bouncex.et.log("Replenish function not defined"),null},replenishmentSuccessful:function(){return 0<this.getCount()},save:function(e){if(!e)return!1;this.state=e;var t=jQuery.extend(!0,{},e);if(this.config.storeCartVariable){var n={};if(0===t.count)n={count:0};else for(var i=0;i<this.config.storeValues.length;i++){var o=this.config.storeValues[i];t.hasOwnProperty(o)&&(n[o]=t[o])}this.saveToVariable(n)}},saveToVariable:function(e){var t=JSON.stringify(e);t.length<=this.config.maxVariableSize?(bouncex.setv(this.config.storeCartVariable,t),setBounceCookie()):e.items&&e.items.length&&(JSON.stringify(e.items[e.items.length-1]).length>=this.config.maxVariableSize?e.items.pop():e.items.shift(),this.saveToVariable(e))},track:function(e){e=jQuery.extend({},e);e.items&&(e.items=JSON.stringify(e.items)),e.ids&&(e.ids=e.ids.join(",")),e=bouncex.utils.addNamespace(e,"cart"),bouncex.push(["cart",e])},update:function(e){if(this.replenishing)return!1;var t;if(e.newItem&&((t=this.getCart().items||[]).push(e.newItem),e.items=t),this.config.maxItems&&e.items&&e.items.length>this.config.maxItems&&(e.items=e.items.slice(e.items.length-this.config.maxItems)),e.count=this.inferCount(e),!e.ids&&e.items){for(var n=[],i=0;i<e.items.length;i++)e.items[i].id&&n.push(e.items[i].id);n.length&&(e.ids=n)}(e.newItem||e.addToCart)&&bouncex.push(["add to cart",{}]),delete e.newItem,delete e.addToCart,this.save(e),this.track(e)},validateReplenishment:function(e){var t=this.getCount();return bouncex.utils.validate.integer(t)&&0<t?(this.setReplenishmentReportingStatus("BX_CART_ITEMS_ALREADY_IN_CART"),!1):e?!!(e.value||e.token||e.items)||(this.setReplenishmentReportingStatus("BX_CART_MISSING_DATA"),!1):(this.setReplenishmentReportingStatus("BX_CART_MALFORMED"),!1)},reportReplenishment:function(){var e=this.getCart(),t=bouncex.utils.getParam("bx_cart");if(t)try{e=this.parseCartParam(t)}catch(e){bouncex.err(e)}var n={"cart:replentype":this.replenishmentType};e.ids&&(n["cart:ids"]=e.ids),e.date&&(n["cart:date"]=e.date),e.items&&(n["cart:items"]=JSON.stringify(e.items)),e.eid&&(n["cart:eventid"]=e.eid),t?(n["cart:returncode"]=this.returnCode,n["cart:count"]=this.getCount(),0<this.returnCode?(this.failureMessage&&(n["cart:failuremessage"]=this.failureMessage),bouncex.push(["cart replenish abort",n])):bouncex.push(["cart replenish attempt",n])):this.replenishmentComplete&&setTimeout(function(){n["cart:success"]=this.replenishmentSuccessful(),n["cart:count"]=this.getCount(),n["cart:success"]?this.setReplenishmentReportingStatus("BX_REPLEN_SUCCESS"):this.setReplenishmentReportingStatus("BX_REPLEN_FAILURE"),this.failureMessage&&(n["cart:failuremessage"]=this.failureMessage),n["cart:returncode"]=this.returnCode,bouncex.push(["cart replenish",n])}.bind(this),1100)}},item:{requirements:[{name:"id"},{name:"copy"},{name:"url",tests:[function(e){return bouncex.utils.validate.url(e)}]},{name:"imageurl",tests:[function(e){return bouncex.utils.validate.url(e)}]}],requireImageLoad:!0,validate:function(e){for(var t=0;t<this.requirements.length;t++){var n=this.requirements[t];if(!e["item:"+n.name])return bouncex.et.log("Invalid Item. "+n.name+" empty"),!1;if(n.tests)for(var i=0;i<n.tests.length;i++){var o=n.tests[i],a=e["item:"+n.name];if("function"==typeof o&&!o(a))return bouncex.et.log("Invalid Item. The following "+n.name+" failed "+o.name+" test: "+a),!1}}return!0}}},bouncex.gbi={wrapContentInIframe:function(e,t,n){var i,o,a=bouncex.campaigns[n],r=a.gbi&&(a.gbi.config.shrinkToFit||a.gbi.config.shrinkToFitWindow),s="-webkit-transform-origin: 0 0; transform-origin: 0 0; max-width: 100%; max-height: 100%;";a.gbi.provider;e.find("iframe").remove(),!r||"overlay"!==a.type&&"agilityzone"!==a.type||(o=(c=bouncex.gbi.getResizeData(n)).scaleRatio)<1&&(s+="-webkit-transform: scale("+o+"); transform: scale("+o+");",e.css({width:c.scaledWidth+"px",height:c.scaledHeight+"px"}));var c=createIframe({target:"_blank",class:"bx-gbi-frame",frameborder:"0",horizontalscrolling:"no",verticalscrolling:"no",width:"100%",height:"100%",vspace:"0",hspace:"0",marginwidth:"0",marginheight:"0",scrolling:"no",allowTransparency:"true"});e.append(c);try{(i=c.contentWindow.document).open(),i.write('<html><head><base target="_blank"/></head><body marginwidth="0" marginheight="0" style="'+s+'">'+t+"</body>"),i.close()}catch(e){bouncex.gbi.log(n,"error creating gbi frame: "+e)}return i},init:function(e){bouncex.campaigns[e].gbi.impressionPixels=new Array,bouncex.campaigns[e].gbi.clickPixels=new Array},fail:function(e,t){bouncex.campaigns[e].failed=!0,this.clearRequestAssets(e),this.log(e,t,!0)},log:function(e,t,n){var i="("+(bouncex.campaigns[e]?bouncex.campaigns[e].gbi.provider||"no provider":"stack")+")";bouncex.log("%c gbi "+(e?"("+e+")":"")+i+": "+t,"color: "+(n?"#FF0000":"#00F"))},request:function(t){bouncex.gbi.init(t);var e=bouncex.gbi.providerApi[bouncex.campaigns[t].gbi.provider];e||bouncex.gbi.fail(t,"undefined provider "+bouncex.campaigns[t].gbi.provider);try{e.initDemoAd?e.initDemoAd(t):e.request?e.request(t):bouncex.gbi.fetch(t)}catch(e){bouncex.gbi.fail(t,e)}},fetch:function(e){var t=bouncex.gbi.providerApi[bouncex.campaigns[e].gbi.provider];return bouncex.gbi.doAjaxRequest(e,t.getFetchOptions(e))},doAjaxRequest:function(e,t){bouncex.campaigns[e].gbi.ajaxRequest=bouncex.utils.doAjaxRequest(t)},report:function(i,o,e){var t,n;bouncex.gbi.log(i,'reporting event "'+o+'"'),e=e||{},bouncex.campaigns[i].gbi.provider&&(s="","pop"==o?bouncex.campaigns[i].gbi.impressionPixels&&0<bouncex.campaigns[i].gbi.impressionPixels.length&&(s+=bouncex.campaigns[i].gbi.impressionPixels.join("")):"click"==o&&(bouncex.campaigns[i].gbi.clickPixels&&0<bouncex.campaigns[i].gbi.clickPixels.length&&(s+=bouncex.campaigns[i].gbi.clickPixels.join("")),e.value||(e.value="nonad")),s&&("oubr"==bouncex.campaigns[i].gbi.provider?(t=bouncex.campaigns[i].gbi.config,n={url:bouncex.campaigns[i].gbi.impressionPixels[0],method:"GET",timeout:15e3,beforeSend:function(e){e.setRequestHeader("Authorization","API_KEY "+t.API_KEY)},success:function(e){bouncex.gbi.log(i,'reporting provider pixel for "'+o+'"')},error:function(e,t,n){bouncex.gbi.log(i,'error for reporting provider pixel for "'+o+'"')}},bouncex.gbi.doAjaxRequest(i,n)):(jQuery(s).hide().appendTo(bouncex.body),bouncex.gbi.log(i,'reporting provider pixel for "'+o+'"'))));var a=bouncex.campaigns[i].gbi.stack_id;if(!a||"eligible"!=o&&"pop"!=o)buildReport(i,o,e);else{var r,s=bouncex.gbi.stacks[a],c=s.campaigns;for(r in bouncex.campaigns[s.leader_id].ttype,c){var u=c[r],d=u==i,l=u==bouncex.gbi.stacks[a].leader_id;if("pop"==o&&!d&&l&&noteCookieAdShown(u),("eligible"==o&&(d||l)||"pop"==o&&d)&&buildReport(u,o,e),"pop"==o&&((l={})["trypop:provider"]=bouncex.campaigns[u].gbi.provider||"none",e&&e["pop:activation"]&&(l.activation=e["pop:activation"]),buildReport(u,"trypop",l)),d)break}}},requestCompleteMultiple:function(e,t,n){var i=bouncex.campaigns[e];bouncex.gbi.log(e,"have a bid with multiple units"),bouncex.gbi.providerApi[i.gbi.provider].buildHTML(e,i.gbi.lastResponse),loadImages(i.images,function(){bouncex.gbi.log(e,"images loaded"),activateGbiCampaign(e),n&&n()})},requestCompleteSingle:function(e,t,n){bouncex.gbi.log(e,"have a bid with a single unit");var i=bouncex.campaigns[e],o=i.obj1.find(".bx-step-"+(i.gbi.step||1)).find(".bx-group-placeholder").eq(0),a=i.gbi.provider;"index"!=a&&"pbm"!=a&&"dfphtml"!=a||(t+=bouncex.gbi.integrations.moat.display.getScriptTag({website:window.location.host+" ("+bouncex.website.id+")",deviceType:bouncex.state.mobile?"mobile":"desktop",trigger:i.trigger,adSize:i.gbi.config.units&&i.gbi.config.units[0]||"unknown",placement:"overlay"===i.type?i.type:i.subtype}));t=bouncex.gbi.wrapContentInIframe(o,t,e);if(!t)return bouncex.gbi.fail(e,"failed to wrap content in iframe: check for missing placeholder group");attachClickReportingToIframe(o,e),loadImages(jQuery(t).find("img").filter(":visible"),function(){bouncex.gbi.log(e,"image loaded"),activateGbiCampaign(e),n&&n()})},requestCompleteSingleVideo:function(e,t){bouncex.gbi.log(e,"have a bid with a single vast unit");var n=bouncex.campaigns[e],i=bouncex.gbi.getPlayerConfig(e,t),o=n.obj1.find(".bx-step-"+(n.gbi.step||1)).find(".bx-group-placeholder").eq(0),t=n.gbi.config.shrinkToFit||n.gbi.config.shrinkToFitWindow,n="overlay"===n.type||"agilityzone"===n.type;t&&n&&((n=bouncex.gbi.getResizeData(e)).scaleRatio<1&&(i.width=n.scaledWidth,i.height=n.scaledHeight,o.css({width:n.scaledWidth,height:n.scaledHeight}))),bouncex.gbi.initVideoFrame(e,o,i)},initVideoFrame:function(t,e,n){var i,o,a=bouncex.campaigns[t],r="//"+bouncex.website.biu+"/assets/global/plugins/jwplayer/8.3.0/jwplayer.js",s=bouncex.gbi.integrations.moat,c=e.width(),u=e.height();e.empty(),i=createIframe({class:"bx-gbi-frame",style:"border: 0; width: "+c+"px; height: "+u+"px;"}),n.width=c,n.height=u,e.append(i),o=i.contentWindow,bouncex.browser.firefox&&(o.oldGetComputedStyle=o.getComputedStyle,o.getComputedStyle=function(e,t){t=o.oldGetComputedStyle(e,t);return null===t?{}:t}),o.document.write('<html><body style="margin: 0px; overflow: hidden;"><div id="bx-video"></div></body></html>'),(i=o.document.createElement("script")).setAttribute("src",r),i.onload=function(){bouncex.gbi.log(t,"jwplayer script loaded"),o.jwplayer?(bouncex.gbi.log(t,"jwplayer executed"),o.jwplayer.key="o8z/iG2QyTbuWcdH2vCzMM0waC0nOAeJ9/gVcpFiPZ+tv1+5",o.player=a.gbi.player=o.jwplayer("bx-video"),a.gbi.player.setup(n),a.gbi.player.on("adClick",function(){bouncex.report(t,"click",{value:"ad"})}),a.gbi.player.on("adError",function(e){bouncex.gbi.log(t,e.message?"ad error: "+e.message:"ad error")}),a.gbi.contentLoaded=!0,s.video.loadPlugin(t)):bouncex.gbi.fail(t,"jwplayer failed to execute")},i.onerror=function(){bouncex.gbi.fail(t,"jwplayer script failed to load")},o.document.body.appendChild(i)},getPlayerConfig:function(e,t){var n=bouncex.campaigns[e],i=n.gbi.config.videoPlayerConfig||{},o=/^[\s]*<VAST/i.test(t)?"vastxml":"tag",e=n.obj1.find(".bx-group-placeholder").eq(0);return i.file="//"+bouncex.website.biu+"/assets/global/plugins/jwplayer/blank.mp4",i.advertising=i.advertising||{},i.advertising.client="vast",i.advertising.vpaidcontrols=!0,i.advertising[o]=t,i.mute=!0,i.width=i.width||e.width(),i.height=i.height||e.height(),n.gbi.config.playOnImpression=!0,n.gbi.config.videoPlayerConfig=i},addFullVideoSupport:function(e){return e.video&&(e.video.mimes=e.video.mimes||[],-1===e.video.mimes.indexOf("video/mp4")&&e.video.mimes.push("video/mp4"),-1===e.video.mimes.indexOf("application/javascript")&&e.video.mimes.push("application/javascript")),e},cancelRequest:function(e){var t=bouncex.campaigns[e];t.gbi.ajaxRequest&&(bouncex.gbi.log(e,"cancelling request"),t.gbi.ajaxRequest.abort()),bouncex.gbi.init(e)},clearRequestAssets:function(e){bouncex.events[e].gbiRequest&&(clearInterval(bouncex.events[e].gbiRequest),delete bouncex.events[e].gbiRequest)},getResizeDataForV2:function(e){return bouncex.gbi.getResizeData(e)},getResizeData:function(e){var t=bouncex.campaigns[e],n=bouncex.campaigns[e].gbi.config,i=2*((parseInt(t.obj1.find(".bx-wrap").css("padding-left"),10)||0)+(parseInt(t.obj1.find(".bx-align").css("padding-left"),10)||0)),e=1,n=t.gbi.isVideo?{w:n.videoPlayerConfig.width,h:n.videoPlayerConfig.height}:n.imp[0].banner;return"agilityzone"===t.type&&t.calloutTarget.length?e=(t.calloutTarget.width()-i)/n.w:"overlay"===t.type&&(t=(bouncex.wndsize().width-i)/n.w,e=(i=(bouncex.wndsize().height-i)/n.h)<t?i:t),{scaleRatio:e,scaledWidth:n.w*e,scaledHeight:n.h*e}},getCreativeDimensions:function(e){e=jQuery("#bx-creative-"+e);return e.css("max-width","none"),{width:e.width(),height:e.height()}},shrinkToFitWindow:function(e){var t=bouncex.gbi.getCreativeDimensions(e),n=bouncex.wndsize();n.width-=12,n.height-=12;var i=t.width>n.width?n.width/t.width:1,n=t.height>n.height?n.height/t.height:1,i=n<i?n:i;i<1&&bouncex.campaigns[e].obj1.find(".bx-slab").css({width:t.width+12+"px",height:t.height+12+"px",overflow:"visible",top:"50%",left:"50%",transform:"scale("+i+") translate(-50%, -50%)",transformOrigin:"0 0"})},shrinkToFitParent:function(e){var t=bouncex.gbi.getCreativeDimensions(e),n=bouncex.campaigns[e].obj1.parent().width(),n=t.width>n?n/t.width:1;n<1&&bouncex.campaigns[e].obj1.find(".bx-slab").css({width:t.width*n+"px",height:t.height*n+"px",transform:"scale("+n+")",transformOrigin:"0 0"})},populateTemplate:function populateTemplate(ca_id,response,unitJsonPath,imageJsonPath){for(var creative=jQuery("#bx-creative-"+ca_id),creativeClone=creative.clone(!0),templateGroups=creativeClone.find(".bx-group-placeholder"),groupLength=templateGroups.length,k=0;k<groupLength;k+=1){var unit=eval(unitJsonPath+"[k];"),templateGroup=jQuery(templateGroups[k]),image,html;templateGroup.length&&(unit?(image=eval("unit."+imageJsonPath),templateGroup.find(".bx-lineshape").css("background-image","url("+image+")"),bouncex.campaigns[ca_id].images.push(image),html=templateGroup.html(),html=html.replace(/{(.*?)}/gi,function(query,keyword){var content=eval("unit."+keyword);if(void 0!==content)return content}),templateGroup.html(html)):templateGroup.remove())}var html=creativeClone.html();html=html.replace(/{(.*?)}/gi,function(query,keyword){try{return eval("response."+keyword)}catch(err){return keyword}}),creativeClone.html(html),creative.replaceWith(creativeClone)},generateDynamicRequestUrlParams:function generateDynamicRequestUrlParams(ca_id){var config=bouncex.campaigns[ca_id].gbi.config,dynamicQueryStr="",dynamicParams=config.dynamic_request_params;if(dynamicParams)for(var param in dynamicParams)try{dynamicQueryStr+="&"+param+"="+encodeURIComponent(eval(dynamicParams[param]))}catch(e){bouncex.gbi.log("invalid dynamic request param "+param+" must have valid javascript as value")}return dynamicQueryStr},requestAndRefreshRequest:function(e){var t=bouncex.campaigns[e],n=bouncex.gbi.providerApi[t.gbi.provider];t.gbi.requestNum=1,n.fetch(e),bouncex.events[e].gbiRequest=setInterval2(function(){return can_show_ad(e)||bouncex.campaigns[e].failed?(bouncex.gbi.init(e),t.gbi.requestNum++,void n.fetch(e)):(clearInterval(bouncex.events[e].gbiRequest),void bouncex.gbi.log(e,"clearing interval"))},t.gbi.config.reload||18e4)},playVideoBeforeImpression:function(e,t){var n=bouncex.campaigns[t],i=n.gbi.player;i.on("adImpression",function(){i.off("adImpression"),i.off("adError"),bouncex.gbi.log(t,"video response detected"),n.gbi.videoResponseLoaded=!0,show_ad(e,t)}),i.on("adError",function(e){i.off("adImpression"),i.off("adError"),i.stop(),bouncex.gbi.fail(t,e.message||"error loading response")}),i.play()}},bouncex.gbi.integrations={moat:{display:{scriptSrc:document.location.protocol+"//z.moatads.com/bounceexchangedisplay18031701869/moatad.js",getScriptTag:function(e){if(!_helpers.default.shouldSampleMoatPixel())return bouncex.log("SAMPLE: MOAT script blocked"),"";e=qs({moatClientLevel1:e.website,moatClientLevel2:e.deviceType,moatClientLevel3:e.trigger,moatClientLevel4:e.adSize,zMoatPlacement:e.placement});return'<script src="'+this.scriptSrc+"?"+e+'" type="text/javascript"><\/script>'}},video:{scriptSrc:document.location.protocol+"//z.moatads.com/jwplayerplugin0938452/moatplugin.js",partnerCode:"bouncexjsvideojwplayer997111196347",loadPlugin:function(e){if(!_helpers.default.shouldSampleMoatPixel())return bouncex.log(e,"SAMPLE: MOAT script blocked"),"";var t=this;getScript(t.scriptSrc,function(){t.addImpressionListener(e)})},addImpressionListener:function(e){var t=bouncex.campaigns[e],n=this;t.gbi.player.on("adImpression",function(e){moatjw.add({partnerCode:n.partnerCode,player:this,adImpressionEvent:e,ids:{level1:window.location.host+" ("+bouncex.website.id+")",level2:bouncex.state.mobile?"mobile":"desktop",level3:t.trigger,level4:"video",slicer1:"overlay"===t.type?t.type:t.subtype},duration:30})})}}},tag:{intermediaryId:"869cff86d1c453c1",generateId:function(){return this.intermediaryId+":"+bouncex.website.id}}},bouncex.gbi.providerApi={aqbx:{initDemoAd:function(t){var e,n;try{e=bouncex.campaigns[t].gbi.config.imp[0]}catch(e){bouncex.gbi.fail(t,"no creative dimensions have been set for this ad!")}void 0!==e.video?(n='<VAST version="2.0"><Ad><InLine><AdSystem>Acudeo Compatible</AdSystem><AdTitle>VAST 2.0 AQBX</AdTitle><Description>VAST 2.0 AQBX</Description><Creatives><Creative><Linear><Duration>00:00:21</Duration><MediaFiles><MediaFile delivery="progressive" type="video/mp4" bitrate="500" width="400" height="300" scalable="true" maintainAspectRatio="true">https://'+bouncex.website.biu+"/assets/global/videos/pub/demo/ads_demo_video.mp4</MediaFile></MediaFiles></Linear></Creative></Creatives></InLine></Ad></VAST>",bouncex.campaigns[t].gbi.isVideo=!0,bouncex.gbi.requestCompleteSingleVideo(t,n),bouncex.gbi.log(t,"aqbx video ad loaded")):(e=(n=e.banner).w,n='<a><img height="'+(n=n.h)+'" width="'+e+'" src="https://'+bouncex.website.biu+"/assets/global/images/pub/demo"+e+"x"+n+'.gif"/></a>',bouncex.campaigns[t].gbi.html=n),activateGbiCampaign(t)}},an:{getFetchOptions:function(i){var t=this,e=bouncex.campaigns[i].gbi.config;return{url:e.request_url,type:"POST",dataType:"json",processData:!1,timeout:e.timeout||255,success:function(e){e=t.processResponse(i,e);if(!e)return bouncex.gbi.fail(i,"no bid");bouncex.gbi.requestCompleteSingle(i,e)},error:function(e,t,n){return bouncex.gbi.fail(i,t)}}},processResponse:function(t,e){if(e&&"ok"==e.status)try{var n=e.native.length;if(0<n){for(var i="",o=0;o<n;o++){bouncex.campaigns[t].gbi.clickPixels.push('<img src="'+e.native[o].click_trackers+'"/>');var a=e.native[o].impression_trackers.length;if(0<a)for(var r=0;r<a;r++)bouncex.campaigns[t].gbi.impressionPixels.push('<img src="'+e.native[o].impression_trackers[r]+'"/>');i+='<a href="'+e.native[o].click_url+'"><img height="100%" width="100%" title="',i+=e.native[o].title+'" src="'+e.native[o].main_media[0].url+'"/></a>'}return i}}catch(e){bouncex.gbi.fail(t,e)}return""}},dfpi:{getFetchOptions:function(i){var e=bouncex.campaigns[i].gbi.config,t=this;return{url:e.request_url+"&c="+getTime2()+bouncex.gbi.generateDynamicRequestUrlParams(i),type:"GET",dataType:"json",processData:!1,timeout:e.timeout||1e3,success:function(e){e=t.processResponse(i,e);if(!e)return bouncex.gbi.fail(i,"no bid");bouncex.gbi.requestCompleteSingle(i,e)},error:function(e,t,n){return bouncex.gbi.fail(i,"timed out")}}},processResponse:function(t,e){if(e&&e.main_media)try{var n=e.impression_trackers.length;if(0<n)for(var i=0;i<n;i++)bouncex.campaigns[t].gbi.impressionPixels.push('<img src="'+e.impression_trackers[i]+'"/>');var o=e.click_trackers.length;if(0<o)for(i=0;i<o;i++)bouncex.campaigns[t].gbi.clickPixels.push('<img src="'+e.click_trackers[i]+'"/>');var a=e.main_media.length;if(0<a){for(var r="",i=0;i<a;i++)r+='<a href="'+e.click_url+'"><img height="100%" width="100%" title="',r+=e.title+'" src="'+e.main_media[i].url+'"/></a>';return r}}catch(e){bouncex.gbi.fail(t,e)}return""}},dfps:{getFetchOptions:function(i){var e=bouncex.campaigns[i].gbi.config,t=this;return{url:e.request_url+"&c="+getTime2()+bouncex.gbi.generateDynamicRequestUrlParams(i),type:"GET",dataType:"json",processData:!1,timeout:e.timeout||1e3,success:function(e){e=t.processResponse(i,e);if(!e)return bouncex.gbi.fail(i,"no bid");bouncex.gbi.requestCompleteSingle(i,e)},error:function(e,t,n){return bouncex.gbi.fail(i,"timed out")}}},processResponse:function(t,e){if(e&&e.main_media)try{var n=e.impression_trackers.length;if(0<n)for(var i=0;i<n;i++)bouncex.campaigns[t].gbi.impressionPixels.push('<img src="'+e.impression_trackers[i]+'"/>');var o=e.main_media.length;if(0<o){for(var a="",i=0;i<o;i++)a+=e.main_media[i].url;return a}}catch(e){bouncex.gbi.fail(t,e)}return""}},dfphtml:{getFetchOptions:function(n){var e=bouncex.campaigns[n].gbi.config;return{url:e.request_url+"&c="+getTime2()+bouncex.gbi.generateDynamicRequestUrlParams(n),method:"GET",global:!1,processData:!1,timeout:e.timeout||1e3,complete:function(e,t){if("success"!=t)return bouncex.gbi.fail(n,t+" "+e.status);if(200===e.status){t=e.responseText;if(!t)return bouncex.gbi.fail(n,"no bid");bouncex.campaigns[n].gbi.html=t,activateGbiCampaign(n)}else bouncex.gbi.fail(n,"response status "+e.status)}}}},crit:{getFetchOptions:function(i,e){var t=this,n=bouncex.campaigns[i].gbi.config;return{url:n.endpoint+"/recommendations.get",data:n,dataType:"jsonp",method:"GET",timeout:15e3,success:function(e){t.processResponse(i,e)&&activateGbiCampaign(i)},error:function(e,t,n){return bouncex.gbi.fail(i,"timed out")}}},processResponse:function(t,e){if(!e||0!==e.response_status)return e&&e.status_message?bouncex.gbi.fail(t,"Bad response: "+e.status_message):bouncex.gbi.fail(t,"No bid"),!1;try{return this.populatePixel(t,e)&&this.populateCreative(t,e)}catch(e){bouncex.gbi.fail(t,e)}},populatePixel:function(e,t){for(var n=t.impression_pixels,i=n.length,o=0;o<i;o+=1)bouncex.campaigns[e].gbi.impressionPixels.push('<img src="'+n[o].url+'"/>');return!0},populateCreative:function(e,t){return bouncex.gbi.populateTemplate(e,t,"response.products","image.url"),!0}},tabr:{getFetchOptions:function(i,e){var t=this,n=bouncex.campaigns[i].gbi.config;return n["source.id"]=window.location.pathname,n["source.url"]=window.location.href,n["rec.visible"]=!1,n["user.session"]="init",n["app.type"]="desktop",{url:n.endpoint_domain+"/1.1/json/"+n["publisher-name"]+"/recommendations.get",data:n,dataType:"json",method:"GET",timeout:15e3,success:function(e){t.processResponse(i,e)&&activateGbiCampaign(i)},error:function(e,t,n){return bouncex.gbi.fail(i,"timed out")}}},processResponse:function(t,e){if(!(e&&e.id&&0<e.list.length))return bouncex.gbi.fail(t,"no bid");try{return e.list?(bouncex.campaigns[t].gbi.lastResponse=e,this.getPixels(t,e),!0):bouncex.gbi.fail(t,"no bid")}catch(e){bouncex.gbi.fail(t,e)}},buildHTML:function(e,t){bouncex.gbi.populateTemplate(e,t,"response.list","thumbnail[0].url")},getPixels:function(e,t){var n=bouncex.campaigns[e].gbi.config,i=n.endpoint_domain+"/1.1/json/"+n["publisher-name"]+"/recommendations.notify-visible?";i+="response.id="+t.id+"&response.session="+t.session,i+="&app.type="+(bouncex.state.mobile?"mobile":"desktop")+"&app.apikey="+n["app.apikey"],bouncex.campaigns[e].gbi.impressionPixels.push('<img src="'+i+'"/>')}},oubr:{getFetchOptions:function(i,e){var t=this,n=bouncex.campaigns[i].gbi.config;return{url:n[n.environment+"_endpoint"]+"/recommendations/documents",dataType:"json",method:"GET",data:n.data,timeout:15e3,beforeSend:function(e){e.setRequestHeader("Authorization","API_KEY "+n.API_KEY)},success:function(e){t.processResponse(i,e)&&activateGbiCampaign(i)},error:function(e,t,n){return bouncex.gbi.fail(i,"timed out")}}},processResponse:function(t,e){if(!(e&&e.requestId&&e.items&&0<e.items.length))return bouncex.gbi.fail(t,"no bid");try{return bouncex.campaigns[t].gbi.lastResponse=e,this.getPixels(t,e)&&this.populateCreative(t,e)}catch(e){bouncex.gbi.fail(t,e)}},populateCreative:function(e,t){return bouncex.gbi.populateTemplate(e,t,"response.items","thumbnail"),!0},getPixels:function(e,t){bouncex.campaigns[e].gbi.config;t=t._actions.reportViewed;return bouncex.campaigns[e].gbi.impressionPixels.push(t),!0}},index:{request:function(t){bouncex.gbi.init(t);try{bouncex.gbi.requestAndRefreshRequest(t)}catch(e){bouncex.gbi.fail(t,e)}},isMultiBidRequest:function(e){e=bouncex.campaigns[e].gbi.config;return 1<e.imp.length||e.jsonp},getRequestData:function getRequestData(ca_id){var campaign=bouncex.campaigns[ca_id],config=campaign.gbi.config,pageUrl=document.location.protocol+"//"+document.location.hostname+document.location.pathname,multiBidParams=this.isMultiBidRequest(ca_id)&&config.params&&config.params.length?"&"+config.params:"",urlWithParams=updateQS(pageUrl,"deployment",campaign.type,"device",bouncex.state.mobile?"mobile":"desktop")+multiBidParams;if(config.imp&&config.imp.length)for(var i=0;i<config.imp.length;i++)config.imp[i].video&&(config.imp[i]=bouncex.gbi.addFullVideoSupport(config.imp[i]));var requestData={id:getTime2(),imp:config.imp,site:{page:urlWithParams,ref:bouncex.referrer,mobile:bouncex.state.mobile?1:0}};return config.dynamic_site_page&&(requestData.site.page=document.location.protocol+"//"+document.location.hostname+"/"+eval(config.dynamic_site_page)),requestData.source={pchain:bouncex.gbi.integrations.tag.generateId()},requestData},getFetchOptions:function(n){for(var i=this,e=bouncex.campaigns[n],t=e.gbi.config,o=i.getRequestData(n),a=e.subtype||("overlay"===e.type?"overlay":"none"),r=bouncex.ssl?"https://as-sec":"http://as",r=!1===t.production?"http://astest":r,s={partner:e.gbi.provider,partner_site_id:t.s,request_number:e.gbi.requestNum,deployment:a,requested_ad_units:t.units?t.units.join(", "):"",request_timestamp:(0,_helpers.getTimeMs)(),deal_id:"NA",price:"NA"},c={url:r+".casalemedia.com/cygnus",data:{v:"7",cb:(0,_helpers.getTimeMs)(),s:t.s,r:bouncex.stringify(o)},dataType:"text",contentType:"application/x-www-form-urlencoded",global:!1,crossDomain:!0,xhrFields:{withCredentials:!0},timeout:t.timeout||1e3,complete:function(e,t){i.handleResponse(n,e,t,s)}},u=0;u<o.imp.length;u++)if(o.imp[u].video){e.gbi.isVideo=!0,c.data.v="8.8",c.data.fn="jsonp";break}return c},handleResponse:function(e,t,n,i){var o,a,r=bouncex.campaigns[e],s="bid_error";if("success"===n&&200===t.status&&t.responseText?(a=(o=t.responseText).substring(o.indexOf("(")+1,o.lastIndexOf(")")),(a=(o=this.processResponse(e,a))&&o.ext&&o.ext.dealid)&&(i.deal_id=a),o&&o.ext&&o.ext.pricelevel&&(i.price=this.convertPrice(o.ext.pricelevel,a)),s=o?"bid_fill":"bid_none"):"success"!==n||t.responseText?0===t.status&&(s="bid_cancel"):s="bid_empty",bouncex.gbi.report(e,s,i),"bid_fill"!==s)return"bid_empty"===s?bouncex.gbi.fail(e,"empty response"):"bid_none"===s?bouncex.gbi.fail(e,"no bid"):"bid_error"===s?bouncex.gbi.fail(e,n+" "+t.status):void 0;r.gbi.isVideo?(r.gbi.vastUrl=o.ext&&o.ext.vasturl,bouncex.gbi.requestCompleteSingleVideo(e,r.gbi.vastUrl)):r.gbi.html=o.adm,r.gbi.step=this.isMultiBidRequest(e)?Number(o.impid):1,bouncex.gbi.log(e,"using step "+r.gbi.step),activateGbiCampaign(e)},fetch:function(e){bouncex.gbi.doAjaxRequest(e,this.getFetchOptions(e))},processResponse:function(e,t){if(t)try{var n=(t=bouncex.parseJSON(t)).seatbid[0].bid[0];if(this.isMultiBidRequest(e))for(var i=0;i<t.seatbid.length;i++)for(var o=0;o<t.seatbid[i].bid.length;o++)t.seatbid[i].bid[o].ext.pricelevel&&Number(t.seatbid[i].bid[o].ext.pricelevel.substring(1))>Number(n.ext.pricelevel.substring(1))&&(n=t.seatbid[i].bid[o]);return n}catch(e){}return!1},getRatio:function(e){var t=bouncex.campaigns[e].gbi.config.imp[0].banner,n=bouncex.wndsize(),i=1,e=1;return t.w>n.width&&(i=n.width/t.w),(e=t.h>n.height?n.height/t.h:e)<i?e:i},convertPrice:function(e,t){var n=e.length-2,e=e.split("");e.splice(n,0,".");e=e.join("").replace(/[^0-9.]/g,"");return(t?Number(e):Number(e)/.85).toFixed(5)}},pbm:{request:function(t){bouncex.gbi.init(t);try{this.userSynced()?bouncex.gbi.requestAndRefreshRequest(t):this.syncUser(t)}catch(e){bouncex.gbi.fail(t,e)}},syncUser:function(e){var t=bouncex.campaigns[e].gbi.config,t=createIframe({style:"display: none;",src:"//"+t.user_sync_endpoint+"?p="+t.publisher_id});t.onload=function(){sessionStorage.setItem("bxpbmsynced","true"),bouncex.gbi.requestAndRefreshRequest(e)},document.body.appendChild(t)},userSynced:function(){return!!sessionStorage.getItem("bxpbmsynced")},getTagId:function(e,t){e=bouncex.campaigns[e];return e.subtype?{masthead:"Masthead",endcap:"End_Cap",encore:"Encore",middleofarticle:"Middle_of_Article",skyline:"Skyline"}[e.subtype]+"_"+t:"overlay"===e.type?"Overlay_"+t:""},getRequestData:function(e){var t=bouncex.campaigns[e].gbi.config,n=(bouncex.state.mobile?t.mobile_id:t.desktop_id).toString(),i=bouncex.cookie.vid+"_"+bouncex.cookie.sid,o=t.isLegacy?t.requestData:{},a=(t.isLegacy?t.requestData:t).imp,r=this.getTagId(e,n);if(a&&a.length)for(var s=0;s<a.length;s++)a[s].video&&(a[s]=bouncex.gbi.addFullVideoSupport(a[s]));jQuery.extend(o,{id:i,site:{id:n,name:window.location.hostname,ref:decodeURIComponent(bouncex.referrer),page:decodeURIComponent(bouncex.calling_url),publisher:{id:t.publisher_id}},device:{ua:navigator.userAgent,ip:bouncex.state.vip},imp:a.map(function(e,t){return e.id=(0,_helpers.getTimeMs)().toString()+t,e.secure=bouncex.ssl?1:0,e.tagid=r,e}),at:1,tmax:200});t=this.getExtraIds();return t&&(o.user={eids:t}),o.source={pchain:bouncex.gbi.integrations.tag.generateId()},o},getExtraIds:function(){var e=window.bouncex.gbi.deviceOptedStatus;if(e)return[{source:"bxid",uids:[{id:e,atype:1}]}]},getFetchOptions:function(n){for(var i=this,e=bouncex.campaigns[n],t=e.gbi.config,o=i.getRequestData(n),a=(bouncex.ssl?"https://":"http://")+t.endpoint,r=o.imp.length,s=e.subtype||("overlay"===e.type?"overlay":"none"),c=!!(o.user&&o.user.eids&&o.user.eids[0]&&o.user.eids[0].uids&&o.user.eids[0].uids[0]&&o.user.eids[0].uids[0].id),u=0;u<r;u++)if(o.imp[u].video){e.gbi.isVideo=!0;break}var d={partner:e.gbi.provider,partner_site_id:o.site.id,request_number:e.gbi.requestNum,deployment:s,requested_ad_units:t.units?t.units.join(", "):"",request_timestamp:(0,_helpers.getTimeMs)(),device_id_included:c,deal_id:"NA",price:"NA"};return{url:a,data:bouncex.stringify(o),method:"POST",type:"POST",dataType:"json",timeout:t.timeout||2e3,complete:function(e,t){i.handleResponse(n,e,t,d)}}},handleResponse:function(e,t,n,i){var o,a=bouncex.campaigns[e],r="bid_error";if("success"===n&&200===t.status?((o=this.processResponse(e,t.responseText))&&o.dealid&&(i.deal_id=o.dealid),o&&o.price&&(i.price=o.price),r=o?"bid_fill":"bid_none"):"nocontent"!==n&&"success"!==n||204!==t.status?0===t.status&&(r="bid_cancel"):r="bid_empty",bouncex.gbi.report(e,r,i),"bid_fill"!==r)return"bid_empty"===r?bouncex.gbi.fail(e,"empty bid response"):"bid_none"===r?bouncex.gbi.fail(e,"no bid"):"bid_error"===r?bouncex.gbi.fail(e,"status "+t.status+": "+n):void 0;a.gbi.isVideo?bouncex.gbi.requestCompleteSingleVideo(e,o.adm):a.gbi.html=o.adm,activateGbiCampaign(e)},fetch:function(e,t){bouncex.gbi.doAjaxRequest(e,this.getFetchOptions(e))},processResponse:function(e,t){return!!t&&(t=bouncex.parseJSON(t)).seatbid[0].bid[0]}},rcl:{request:function(t){bouncex.gbi.init(t);try{this.init(t)}catch(e){bouncex.gbi.fail(t,e)}},init:function(e){var t=bouncex.campaigns[e];t.gbi.isVideo=!0,t.gbi.playBeforeImpression=!0,bouncex.gbi.requestCompleteSingleVideo(e,this.getVastUrl(e)),activateGbiCampaign(e)},getVastUrl:function(e){var t,e=bouncex.campaigns[e].gbi.config,n=e.requestUrl,i=e.requestData;for(t in i.PAGE_URL=bouncex.calling_url,i.cb=getTime2(),i)n=updateQS(n,t,i[t]);return n}}};var NativeCapture={_captureContexts:[],_hasSentEvent:!1,_inputExclusionIdentifiers:["[type=button]","[type=submit]","[type=reset]","[type=hidden]","[type=radio]","[type=checkbox]","[type=image]","[type=password]"],_submitIdentifiers:[["[type=submit]","[class*=submit]","[id*=submit]"],["[type=button]","[class*=button]","button"],["a"]],_addCaptureListeners:function(){this._log("adding capture context listeners");var i=this;this._captureContexts.forEach(function(t){var n=tryCatch(function(){i._log("submit detected; checking input value");var e=t.input.value;e&&bouncex.utils.validate.email(e)?(i._log("email detected"),i._trackUser(e,t.input.id)):i._log("no email detected")});t.submit.addEventListener("click",n),t.input.addEventListener("keydown",function(e){"Enter"!==e.code&&13!==e.keyCode||n()})})},_addCustomCaptureContexts:function(){var e,t,n=bouncex.website.els,i={},o=this._getExclusionIdentifiers(bouncex.website.ibx.miw_exclude);if(n&&0<Object.keys(n).length)for(key in n)-1<key.indexOf("native_capture_input")&&(e=n[key]+":not("+o+")",t=jQuery(e).get(0),i[e=this._customElemObjKey(key,"native_capture_input")]=i[e]||{},i[e].input=t),-1<key.indexOf("native_capture_submit")&&(t=jQuery(n[key]).get(0),i[e=this._customElemObjKey(key,"native_capture_submit")]=i[e]||{},i[e].submit=t);for(pair in i)i[pair].input&&i[pair].submit&&this._captureContexts.push({input:i[pair].input,submit:i[pair].submit})},_customElemObjKey:function(e,t){return e.replace(t,"")+"_"},_getExclusionIdentifiers:function(e){var t=this._inputExclusionIdentifiers.slice();return e?t.concat(e.split(",").map(function(e){return e.trim()})):t},_getInputSelector:function(){var t="input";return this._getExclusionIdentifiers(bouncex.website.ibx.miw_exclude).forEach(function(e){t+=":not("+e+")"}),t},_initCaptureContexts:function(e){for(var t=0;t<e.length;t++)e:for(var n=0;n<this._submitIdentifiers.length;n++)for(var i=this._submitIdentifiers[n].join(","),o=e[t].parentNode,a=0;a<10&&o;a++){var r=o.querySelector(i);if(r){this._captureContexts.push({input:e[t],submit:r});break e}o=o.parentNode}},_log:function(e){_logger.default.info({group:"capture",message:e})},_trackUser:function(e,t){if(this._hasSentEvent)return!1;this._log("sending user event");e={email:e,source:"input_submission"};t&&(e.input_id=t),bouncex.push(["user",e]),this._hasSentEvent=!0},init:function(){this._log("initializing native capture"),this._addCustomCaptureContexts();var e=this._getInputSelector(),e=jQuery(e).get();if(!this._captureContexts.length&&!e.length)return this._log("no input fields found"),!1;this._log("searching for capture contexts"),this._initCaptureContexts(e),this._captureContexts.length?(this._log("found "+this._captureContexts.length+" capture contexts"),this._addCaptureListeners()):this._log("no capture contexts found")},activateFieldMapping:function(){var e="input:not([type=button],[type=submit],[type=reset],[type=hidden],[type=radio],[type=checkbox],[type=image],[type=password], #privy-container input, #dwfrm_giftcert_purchase_recipientEmail, #dwfrm_wishlist_search_email)";bouncex.website.ibx.miw_exclude&&(e+=":not("+bouncex.website.ibx.miw_exclude+")"),bouncex.off(bouncex.body,"blur.bx-miw",e),bouncex.on(bouncex.body,"blur.bx-miw",function(){var e,t={source:"input"},n=jQuery(this).val();/^\S+@\S+\.\S+$/.test(n)&&(t.email=n),_phoneNumber.default.isValid(n)&&((e=_phoneNumber.default.sanitize(n))?(t.phone=e,t.phone_sha256=_phoneNumber.default.toSha256(e)):t.phone_unmatched=n);n=jQuery(this).attr("id");n&&(t.input_id=n),bouncex.push(["user",t])},e)},fieldMappingEnabled:function(){var e,t=bouncex.website.fme,n=bouncex.website.fmc,i=bouncex.state&&bouncex.state.geo&&bouncex.state.geo.country_code;return!i&&window.Intl&&window.Intl.Locale&&(e=Intl.DateTimeFormat().resolvedOptions().locale,i=new Intl.Locale(e).region),!!(t&&n&&i)&&-1<n.indexOf(i)}};exports.NativeCapture=NativeCapture,bouncex.osr={init:function(e,t){try{bouncex.osr.log(e,t?"init OSR on product page, excluding item #"+t:"init OSR",!1),this._getOsrParamsJson(e,bouncex.campaigns[e].osr_params_json),this._getItems(e,t)}catch(e){bouncex.err(e,{source:"osr js"})}},_getItems:function(n,e){bouncex.osr.log(n,"getting items",!1);var t=bouncex.campaigns[n].osr.config.endpoint,t={url:t=e?t+","+e:t,method:"GET",timeout:4e3,dataType:"json",complete:function(e,t){if(bouncex.osr._handleResponse(n,e)&&(bouncex.osr.log(n,"tracked items successfully loaded",!1),cacheCreativeForm(n,1),bouncex.osr.activateCampaign(n)),!bouncex.campaigns[n].osrItems)return bouncex.osr.fail(n,"no items returned, OSR campaign "+n+" is ineligible")}};bouncex.utils.doAjaxRequest(t)},_getOsrParamsJson:function(e,t){var n=bouncex.parseJSON(t);bouncex.campaigns[e].osr={},bouncex.campaigns[e].osr.config={},t=n.sortBy+","+n.minProducts+","+n.maxProducts,n.endpoint="https://"+bouncex.website.osru+"?website_id="+bouncex.website.id+"&device_id="+bouncex.cookie.did+"&visit_id="+bouncex.cookie.vid+"&osr_params="+t,bouncex.campaigns[e].osr.config=n},_handleResponse:function(t,e){if(e&&200===e.status)try{var n=e.responseText;if(n.trim()&&0!==n.length)return bouncex.campaigns[t].osrItems=bouncex.parseJSON(n).items,bouncex.osr._populateCreative(t,bouncex.campaigns[t].osrItems);bouncex.osr.fail(t,"empty response")}catch(e){bouncex.osr.fail(t,e)}else if(e&&202===e.status)try{-1<e.responseText.indexOf("Not enough 'view item' events")&&bouncex.osr.fail(t,"OSR campaign's minimum # of products is greater than the user's history of 'view item' events.")}catch(e){bouncex.osr.fail(t,e)}return!1},_populateCreative:function(e,t){if(bouncex.campaigns[e].control)return!0;var n=document.getElementById("bx-campaign-"+e),i=n.cloneNode(!0);return n.innerHTML=this._populateClonedCreativeTemplate(bouncex.campaigns[e].numSteps,i,t,bouncex.campaigns[e].osr.config,e),!0},_populateClonedCreativeTemplate:function(e,t,n,i,o){var a=0;this._adjustLocalItemsObject(o,n,i),this._populateOsrItemNumberElements(this._getOsrItemNumberElements(t),bouncex.campaigns[o].osrItems.length),("development"===bouncex.env||"staging"===bouncex.env)&&n.length>bouncex.campaigns[o].osrItems.length&&(n=bouncex.campaigns[o].osrItems);for(var r=1;r<=e;r++){for(var s=this._getOsrGroups(r,t),c=0;c<s.length;c++){var u=n[c],d=s[c];d&&u?d.innerHTML=bouncex.osr._populateClonedCreativeGroups(d,u,i):d.parentNode.removeChild(d)}s.length&&(a=s.length)}return bouncex.campaigns[o].osr.config.inconsistentMaxParamToCreativeMax&&0<a&&a!==n.length&&(bouncex.campaigns[o].osrItems=n.slice(0,a),this._populateOsrItemNumberElements(this._getOsrItemNumberElements(t),a)),t.innerHTML},_adjustLocalItemsObject:function(e,t,n){var i=[];if(t.length>n.maxProducts){for(var o in bouncex.campaigns[e].osr.config.inconsistentMaxParamToCreativeMax=!0,t)(i.length<n.maxProducts||void 0===i.length)&&i.push(t[o]);bouncex.campaigns[e].osrItems=i}},_populateClonedCreativeGroups:function(e,t,n,i){var o,a,r,s=bouncex.osr._setLinkBehavior(n.linkBehavior),c=e.querySelectorAll("[data-bx-osr]",i);for("true"!==n.disableGroupLinks?(r=e.firstChild&&"A"===e.firstChild.tagName?e.firstChild:e,bouncex.osr._setOsrAttributes(r,{href:t.url,"data-click":"hyperlink",target:s,"data-click-report":"default"})):bouncex.osr._setOsrAttributes(e,{style:"cursor:default !important"}),i=0;i<c.length;i++)a=(o=c[i]).getAttribute("data-bx-osr"),bouncex.osr._populateItemProperties(o,a,t,n,s);return e.innerHTML},_populateItemProperties:function(e,t,n,i,o){"imageurl"===t?bouncex.osr._populateImages(e,n[t]):"price"===t?bouncex.osr._populatePrice(e,i.currency,n[t]):"url"===t?bouncex.osr._populateUrl(e,o,n[t]):e.firstChild.textContent=n[t]},_getOsrGroups:function(e,t){return t.querySelectorAll(".bx-step-"+e+' [data-bx-osr="group"]')},_getOsrItemNumberElements:function(e){return e.querySelectorAll('[data-bx-osr="numitems"]')},_populateOsrItemNumberElements:function(e,t){for(var n=0;n<e.length;n++){var i,o=e[n];o&&0<t&&(i=o.textContent.replace(o.textContent,t),o.textContent=i)}},_setOsrAttributes:function(e,t){for(var n in t)e.setAttribute(n,t[n])},_populateUrl:function(e,t,n){0<e.getElementsByTagName("button").length&&(e=e.getElementsByTagName("button")[0]),this._setOsrAttributes(e,{href:n,"data-click":"hyperlink",target:t,"data-click-report":"default"}),e.classList.add("bx-osr-preventclicks")},_populatePrice:function(e,t,n){n=this._getFormattedCurrency(t,n);e.firstChild.textContent=n},_populateImages:function(e,t){"DIV"===e.firstChild.tagName?e.firstChild.setAttribute("style","background-image:url('"+t+"')"):e.firstChild.setAttribute("src",t)},_getFormattedCurrency:function(e,t){switch(e){case"USD":return"$"+t;case"EU":return"â‚¬"+t;default:return"$"+t}},_setLinkBehavior:function(e){switch(e){case"newTab":return"_blank";case"currTab":return"_self";default:return"_blank"}},activateCampaign:function(e){bouncex.osr.log(e,"activating OSR campaign",!1),activate_campaign(e)},log:function(e,t,n){t={group:"osr",campaignId:e,message:t};n?_logger.default.error(t):_logger.default.info(t)},fail:function(e,t){bouncex.campaigns[e].failed=!0,this.log(e,t,!0)}};var TabTalk={_flashTitle:function(t,n){var i=this,o=bouncex.campaigns[t];n=n||5,this.cancelTitleUpdate(t),function e(){o.custom_tab_title.flashOn?(o.custom_tab_title.flashOn=!1,o.custom_tab_title.formattedTitle&&(document.title=bouncex.originalTitle),i.changeFavicon(t,!0)):(o.custom_tab_title.flashOn=!0,o.custom_tab_title.formattedTitle&&(document.title=o.custom_tab_title.formattedTitle),i.changeFavicon(t,!1)),0<--n&&(bouncex.events[t].effect_timeout=setTimeout2(e,2e3))}()},_scrollTitle:function(n,i){var o=bouncex.campaigns[n];o.custom_tab_title.formattedTitle&&(i=i||0,this.cancelTitleUpdate(n),function e(){var t=o.custom_tab_title.formattedTitle+"  ";i>t.length&&(i=0),document.title=t.substr(i)+t.substr(0,i),i+=3,bouncex.events[n].effect_timeout=setTimeout2(e,1e3)}())},cancelTitleUpdate:function(e){clearTimeout(bouncex.events[e].effect_timeout),bouncex.originalTitle?document.title=bouncex.originalTitle:document.title="",delete bouncex.campaigns[e].custom_tab_title.flashOn},changeFavicon:function(e,t){var n=bouncex.campaigns[e];n.custom_tab_title.favicon_url&&(jQuery('link[rel~="icon"]').remove(),(e=document.createElement("link")).type=t?"image/x-icon":n.linkType,e.rel="icon",e.href=t?n.originalFavicon:n.custom_tab_title.favicon_url,document.getElementsByTagName("head")[0].appendChild(e))},updateTitle:function(e){var t=bouncex.campaigns[e];bouncex.originalTitle=bouncex.originalTitle||document.title;var n=jQuery('link[rel~="icon"]');t.originalFavicon=n&&n.attr("href")||"/favicon.ico",t.linkType=t.custom_tab_title.favicon_type||"image/x-icon";n=t.custom_tab_title.effect,t="flashForever"===n?1/0:1;"scroll"===n?this._scrollTitle(e):this._flashTitle(e,2*t-1),this.changeFavicon(e,!1)}};function EventListeners(){this.listeners={},this.register=function(e){var t=generateUniqueId();return this.listeners[t]=e,t},this.stop=function(e){this.listeners.hasOwnProperty(e)&&(this.listeners[e].stop(),delete this.listeners[e])},this.stopAll=function(){for(var e in this.listeners)this.stop(e)},this.on=function(e,t,n,i){var o=this.register({event:t,selector:i,stop:function(){bouncex.off(e,t+"."+o,i)}});return bouncex.on(e,t+"."+o,n,i),o},this.setInterval=function(e){var t=BxInterval.addTask(e);return this.register({event:"bxInterval",stop:function(){BxInterval.stopTask(t)}})},this.onTabVisible=function(e){var t=this.register({stop:function(){bouncex.off(bouncex.document,"visibilitychange."+t)}});bouncex.on(bouncex.document,"visibilitychange."+t,function(){BrowserUtil.currentTab.isVisible()&&(e(),this.stop(t))}.bind(this))},this.onTabVisibilityChange=function(e){return this.on(bouncex.document,"visibilitychange",e)},this.onScroll=function(e){return this.on(bouncex.document,"scroll",e)}}exports.TabTalk=TabTalk},function(e,t,n){function i(e){this.__init(e||{})}function o(){Array.prototype.slice.call(arguments).forEach(function(e){e&&Object.assign(this,e)},this),this.__init()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i,t.SSP_Request=o,t=bouncex&&bouncex.website&&bouncex.website.cjs&&-1<bouncex.website.cjs.indexOf("bouncex.CONSOLIDATE_BIDS = true"),i.CONSOLIDATE_BIDS=t,(i.getUniqueImpressionID=function(){return String(++i.getUniqueImpressionID.counter)}).counter=0,Object.assign(i.prototype,{__Request_Class:o,provider:null,requests:null,startTime:null,endTime:null,durationTime:null,campaign_ids:null,campaign_placement_ids:null,__init:function(e){Object.assign(this,e)},sendBidRequests:function(e){return this.startTime=Date.now(),e.map(function(e){return e.send()})},createBidRequests:function(){var e={auction:this.auction,ssp:this,provider:this.provider};return this.requests=this.__createAllBidRequests(e)},__createAllBidRequests:function(t){var n=[];return this.campaign_ids.forEach(function(e){e=this.__createCampaignBidRequests(t,e);e&&e.length&&Array.prototype.push.apply(n,e)},this),n},__createCampaignBidRequests:function(e,t){var n={campaign:this.auction.campaigns[t],campaignId:t},t=this.campaign_placement_ids[t],n=this.__createPlacementBidRequest.bind(this,e,n);return t.map(n)},__createPlacementBidRequest:function(e,t,n){var i=t.campaign.gbi.placements[n],e=Object.assign({placement:i,placementId:n,adUnitId:i.adUnitId,type:i.mediaType,width:i.width,height:i.height,deployment:i.deployment,moat:i.moat},t,e);return this.__instantiateBidRequest(e)},__instantiateBidRequest:function(e){return o.factory(this,e)},getIncompleteRequests:function(){return this.requests.filter(function(e){return!e.endTime&&!e.aborted})},checkIfDone:function(){return null!==this.endTime||null===this.requests||0===this.getIncompleteRequests().length&&(this.__done(),!0)},__done:function(){null===this.endTime&&(this.endTime=new Date,this.durationTime=this.endTime-this.startTime,this.auction.checkBidRequestsDone())},getUniqueImpressionID:i.getUniqueImpressionID}),Object.defineProperties(i.prototype,{__Request_Prototype:{writable:!0},auction:{writable:!0}}),o.__SSP_Class=i,o.factory=function(e,t){var n=e.provider,n=bouncex.gbi2._requestIndex[n](Object.assign({provider:n},t));return n instanceof o?n:new(e.__Request_Class||o)(n,t)},Object.assign(o.prototype,{aborted:!1,startTime:null,endTime:null,duration:null,__init:function(){this.auction||(this.auction=bouncex),this.ssp||(this.ssp=Object.create(this.constructor.__SSP_Class.prototype)),this.__initCampaigns()},__initCampaigns:function(){this.campaigns?Object.values(this.campaigns).forEach(this.__initCampaign,this):(this.campaign||this.campaignId)&&(this.campaign?this.campaignId||(this.campaignId=this.campaign.id):this.campaign=this.auction.campaigns[this.campaignId]||{},(this.campaigns={})[this.campaignId]=this.campaign,this.__initCampaign(this.campaign))},__initCampaign:function(e){e.gbi||(e.gbi={}),e.gbi.requests||(e.gbi.requests=[]),e.gbi.requests.push(this)},send:function(){return this.init()},fetch:function(e){return this.startTime=Date.now(),bouncex.utils.doAjaxRequest(e)},done:function(){this.endTime||(this.endTime=Date.now(),this.duration=this.endTime-this.startTime,this.ssp&&this.ssp.checkIfDone())},reportResult:function(e,t){(t=t||{}).partner||(t.partner=this.provider);var n=t.campaign_id||this.getCampaignId();bouncex.gbi2.report(n,e,t)},end:function(){this.request&&this.request.abort(),this.aborted=!0,this.done()},getCampaignId:function(){return this.campaignId||Object.keys(this.campaigns||this.campaignSettings)[0]||null},getCampaign:function(e){e=e||this.getCampaignId();return e&&(this.campaigns||this.auction.campaigns)[e]},_getProviderConfig:function(e){return bouncex.gbi2._getProviderConfig(this.provider,e)},getUniqueImpressionID:i.getUniqueImpressionID,createDisplayImpression:function(e,t){return Object.assign({id:e.impid||this.getUniqueImpressionID(),banner:{w:Number(e.width),h:Number(e.height)}},t||{})},createVideoImpression:function(e,t){var n="overlay"===e.deployment,n={id:e.impid||this.getUniqueImpressionID(),video:{mimes:["video/mp4","application/javascript"],minduration:3,maxduration:150,protocols:[2,3,5,6],linearity:1,api:[1,2],startdelay:0,placement:n?5:4,playbackmethod:[2]}};return e.width&&(n.video.w=Number(e.width)),e.height&&(n.video.h=Number(e.height)),Object.assign(n,t||{})},getExtraIds:function(){var e=window.bouncex.gbi.deviceOptedStatus;return e?[{source:"bxid",uids:[{id:e,atype:1}]}]:[]},_getReportablePrice:function(e){return e&&Number(e).toFixed(5)}}),Object.defineProperties(o.prototype,{auction:{writable:!0},ssp:{writable:!0},campaign:{writable:!0},campaigns:{writable:!0},placement:{writable:!0}})},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a,t.campaignMethods=void 0;var i=n(5),o=n(14);function a(e,t){e&&Object.assign(this,e),t&&(this.id=t),this.__init()}function r(e){if("overlay"===e.type)return e.type;if(e.subtype)return e.subtype;try{var t=e.activePlacementId||Object.keys(e.gbi.placements)[0];return e.gbi.placements[t].deployment||null}catch(e){return null}}Object.assign(a,{isGbi2Campaign:function(e){return!!(e&&e.gbi&&e.gbi.placements)}}),Object.assign(a.prototype=Object.create(i.EventTargetMixin,{constructor:Object.getOwnPropertyDescriptor(a.prototype,"constructor")}),{isGBI2:!1,document:window.document,visibilityThreshold:.6,__init:function(){this.__init_eventTarget(),this.deployment=r(this),this.sortOrder=c(this),this.__assertCongruency(),this.deployment_type=(0,o.DeploymentType)(this.deployment,this),this.domElementID="bx-campaign-".concat(this.id)},__assertCongruency:function(){if(!this.id)throw new TypeError("Campaign Congruency: ID missing");if(this.isGBI2!==a.isGbi2Campaign(this))throw new TypeError("Campaign Congruency: (".concat(this.id,") GBI2 mismatch"))},getElement:function(){return this.document.getElementById(this.domElementID)},getElementSlab:function(e){return this.document.querySelector("#".concat(this.domElementID," > .bx-slab"))},getStyleSheet:function(){return this.document.getElementById("".concat(this.domElementID,"-style")).sheet},hide:function(e){!!this.hidden!=!e&&(this.getElementSlab().hidden=this.hidden=!e)},unhide:function(){this.hide(!0)},getClientRect:function(){var e,t=this.getElement(),n=this.document.getElementById("bx-creative-".concat(this.id))||this.getElementSlab()||t,i=!n.clientHeight;i&&(e=t.style.getPropertyValue("display"),t.style.setProperty("display","block","important"));n=n&&n.getBoundingClientRect();return i&&(e?t.style.setProperty("display",e,""):t.style.removeProperty("display")),n},getClientVisibility:function(){if("visible"!==this.document.visibilityState)return 0;var e=this.getClientRect();if(!e||!e.height||e.bottom<=0||e.top>=window.innerHeight||e.top===e.bottom)return 0;if(0<=e.top&&e.bottom<=window.innerHeight)return 1;var t=e.height,e=Math.min(e.bottom,window.innerHeight)-Math.max(e.top,0);if(t<=e)return 1;t=Math.round(e/t*100)/100;return null!==this.visibilityThreshold?t>=this.visibilityThreshold:t},onClientVisible:function(e){this.getClientVisibility()?e():setTimeout(this.onClientVisible.bind(this),120,e)},preclude:function(e){this.repress(e),this.suppress(e)},repress:function(e){this.repressed_by_ca_id=e,this.repressed=!0},unrepress:function(){delete this.repressed_by_ca_id,delete this.repressed},suppress:function(e){this.supressed_by_ca_id=e,bouncex.close_ad(this.id,!0)},repressOthers:function(){this.getRepSuppressableCampaigns(this.repress_overlay,this.repress_top,this.repress_bottom).forEach(function(e){e.repress(this.id)},this)},unrepressOthers:function(){Object.values(bouncex.campaigns).forEach(function(e){this.id==e.repressed_by_ca_id&&e.unrepress()},this)},suppressOthers:function(){var e=this.suppress_overlay||this.supress_overlay,t=this.suppress_top||this.supress_top,n=this.suppress_bottom||this.supress_bottom;this.getRepSuppressableCampaigns(e,t,n).forEach(function(e){e.suppress(this.id)},this)},getRepSuppressableCampaigns:function(t,n,i){return t||n||i?Object.values(bouncex.campaigns).filter(function(e){return this.id!==e.id&&(t&&("none"!==e.coverlay||"overlay"===e.type)||n&&("none"!==e.ctop||"nanobar"===e.type||"floater"===e.deployment)||i&&("none"!==e.cbottom||"conversionbar"===e.type))},this):[]}});var s={overlay:10,floater:20,masthead:30,infeed:40,encore:50,endcap:60,default:127};function c(e){e=s[e.deployment];return null==e?s.default:e}t.campaignMethods={deployment:r,sortOrder:c}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BXEventListener=a,t.BXScrollHandler=r,t.EventTargetMixin=void 0;var i=n(0);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,n,i){return this.__init(e,t,n,i),this.add()}Object.assign(a,{remove:function(e){return!!(e&&e instanceof a)&&e.remove()}}),Object.assign(a.prototype,{__init:function(e,t,n,i){return this.target=e,this.type=t,this.handler=n,this.options=i,this.handleEvent=this["function"==typeof n?"handleEventFn":"handleEventObj"],this},handleEventFn:function(e){return this.handler(e,this)},handleEventObj:function(e){return this.handler.handleEvent(e,this)},add:function(){return this.target.addEventListener(this.type,this,this.options),this},remove:function(){return this.target.removeEventListener(this.type,this,this.options),this}});n={document:window.document,__init_eventTarget:function(e){return this.eventTarget=e||this.document.createElement("div")},on:function(e,t,n){return new a(this.eventTarget,e,t,n)},off:function(e,t,n){return this.eventTarget.removeEventListener(e,t,n)},dispatchEvent:function(e,t){t=new CustomEvent(e,{bubbles:!0,detail:t});return this.eventTarget.dispatchEvent(t)},once:function(e,t,n){var i={once:!0};return n&&"object"===o(n)?i=Object.assign({},i,i):void 0!==n&&(i.capture=!!n),this.on(e,t,i)}};function r(e){return r.hasInitialized||r.init(),new a(window,r.eventType,e,{capture:!1,passive:!0})}t.EventTargetMixin=n,Object.assign(r,{eventType:"scroll.bx",hasInitialized:!1,scrollListener:null,init:function(){r.hasInitialized=!0,r.windowProps=new i.WindowProps,r.scrollListener=new a(window,"scroll",r.delayedScrollHandler,{capture:!1,passive:!0})},delayedScrollHandler:function(){r.ticking||(r.ticking=!0,setTimeout(window.requestAnimationFrame,120,r.scrollHandler))},scrollHandler:function(){r.ticking=!1;var e=r.windowProps.refresh(),t=e.previous.scrollY-e.scrollY,n=e.previous.scrollPageY-e.scrollPageY;t&&(t=new CustomEvent("scroll.bx",{bubbles:!0,cancelable:!1,detail:{pos:e.scrollY,speed:Math.abs(n),pixelSpeed:Math.abs(t),fast:22<Math.abs(n),direction:t<0?"down":"up"}}),window.dispatchEvent(t))}})},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default={get:function(e){return e.type="GET",jQuery.ajax(e)}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(0);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=[];function r(e){return"function"==typeof e?a.filter(e):a}n={addRecord:function(e){if(!(0,i.isBxInternalTraffic)())return!1;500<=a.length&&a.shift();var t=null===(t=e)||"object"!==o(t)||Array.isArray(t)?{}:e;"string"==typeof e&&(t.message=e),t.group=t.group||!1,t.message=t.message||"",t.isError=!!t.isError,t.timestamp=(0,i.getTimeMs)(),a.push(t)},clearRecords:function(){a=[]},getRecords:r,printRecords:function(e){var t,n,i;r(e).forEach(function(e){n=new Date(e.timestamp).toLocaleTimeString(),i=e.isError?"#FF0000":"#00F",t="%c ",e.group&&(t+="(".concat(e.group,") ")),e.campaignId&&(t+="(".concat(e.campaignId,") ")),t+="(".concat(n,") "),t+=e.message,bouncex.log(t,"color: ".concat(i))})}};t.default=n},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t._setPageId=function(e){a=e},t.default=void 0;var o=n(2),a=Math.floor(100*Math.random());n={apply:function(e,t){var n,i;((n=e).internal&&(0,o.isBxInternalTraffic)()||n.liveTraffic&&("canary"!==n.type?(i=n.liveTraffic,!!(e=bouncex.cookie&&bouncex.cookie.did)&&Number(e.substr(e.length-2))<i):(n=n.liveTraffic,a<n)))&&t()}};t.default=n},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o,t.SSP_BSW_Request=a;var i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n,i,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n]);return o.default=e,t&&t.set(e,o),o}(n(3));function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function o(e){this.__init(e||{})}function a(e){i.SSP_Request.apply(this,arguments)}Object.assign(o.prototype=Object.create(i.default.prototype,{constructor:Object.getOwnPropertyDescriptor(o.prototype,"constructor")}),{__Request_Class:a,provider:"bsw",deployment_campaigns:null,__createAllBidRequests:function(e){var t,n=Object.assign({campaigns:{},campaign_settings:{},lookup_campaign_ids:{}},e);for(t in this.auction.campaigns)this.__createCampaignBidRequests(n,t);return[this.__instantiateBidRequest(n)]},__createCampaignBidRequests:function(e,t){for(var n=e.campaigns[t]=this.auction.campaigns[t],i=e.campaign_settings[t]={campaign:n,deployment:n.deployment,placement_settings:{},lookup_placement_ids:{video:{},display:{}}},o=this.campaign_placement_ids[t],a=0;a<o.length;a++){var r=o[a];this.__createPlacementBidRequest(e,i,r)}return e.lookup_campaign_ids[n.deployment]=t,i},__createPlacementBidRequest:function(e,t,n){var i=t.campaign.gbi.placements[n],i=t.placement_settings[n]={placement:i,placementId:n,adUnitId:i.adUnitId,type:i.mediaType,width:i.width,height:i.height,deployment:i.deployment,moat:i.moat};return this.lookupPlacementID(t.lookup_placement_ids,i,n),i},lookupPlacementID:function(e,t,n){if(e&&t){var i="video"===t.type?"video":"display",o=t.width||"0",t=t.height||"0",i=e[i]||(e[i]={}),t="".concat(o,"x").concat(t);return void 0===n?i[t]||Object.values(i)[0]:i[t]=n}}}),a.__SSP_Class=o,Object.assign(a.prototype=Object.create(i.SSP_Request.prototype,{constructor:Object.getOwnPropertyDescriptor(a.prototype,"constructor")}),{provider:"bsw",init:function(){var e=this.getRequestData(),e=this.getOptions(e);return this.fetch(e)},getOptions:function(e){return{url:this._getProviderConfig("endpoint"),data:JSON.stringify(e),dataType:"json",contentType:"text/plain; charset=UTF-8",method:"POST",type:"POST",timeout:5e3,context:this,complete:function(e,t){this.handleResponse(e,t),this.done()}}},getSiteId:function(){var e=this._getProviderConfig("site_id"),t=this._getProviderConfig("qa_site_id");return this.getCampaign().qbxtest&&t||e},getRequestData:function(){var e,t=this.getSiteId(),n=(bouncex.segments||[]).map(String),i={publisher_id:Number(t)||0,placements:[],schain:this.schainObject(),segments:n};for(e in this.campaign_settings)this.__getCampaignRequestData(i,this.campaign_settings[e]);return i},__getCampaignRequestData:function(e,t){var n,i={code:t.deployment};for(n in t.placement_settings)this.__getPlacementRequestData(i,t.placement_settings[n]);return e.placements.push(i),i},__getPlacementRequestData:function(e,t){var n="display"===t.type?"banner":"video",i=e[n]||(e[n]={sizes:[]});if("video"==n&&0<i.sizes.length)return null;e={w:Number(t.width),h:Number(t.height)};return i.sizes.push(e),t.moat&&!i.va&&(i.va=t.moat.v,"video"==n&&(i.cr=Math.min(t.moat.c,100))),i},schainObject:function(){return{ver:"1.0",complete:1,nodes:[{asi:"behave.com",sid:this.getSiteId()+"",hp:1}]}},handleResponse:function(e){var t=bouncex.gbi2._constants.bidEvents,n=t.error,i={partner:this.provider,partner_site_id:this.getSiteId()||"NA",request_timestamp:this.startTime};if(200===e.status){var o=e.responseJSON||JSON.parse(e.responseText);if(o.placement_bid&&o.placement_bid.length){var a=this.handleResponseCampaign.bind(this,i);return o.placement_bid.map(a)}n=t.none}else 0===e.status&&(n=t.cancelled);this.reportResult(n,i)},getBidCampaignId:function(e){if(!this.lookup_campaign_ids)return this.getCampaignId();e=e.code;return this.lookup_campaign_ids[e]||Object.values(this.lookup_campaign_ids)[0]},getBidPlacementId:function(e,t){t=this.campaign_settings&&this.campaign_settings[t]&&this.campaign_settings[t].lookup_placement_ids,e={type:e.media_type,width:e.w,height:e.h};return this.ssp.lookupPlacementID(t,e)},handleResponseCampaign:function(e,t){var n=bouncex.gbi2._constants.bidEvents.fill,i=this.getBidCampaignId(t),o=this.campaigns[i],a=this.getBidPlacementId(t,i),r=o.gbi.placements[a]||{};bouncex.gbi2.log(i,"placement #"+a+" received a bid from bidswitch");a=bouncex.gbi2._createBid({provider:this.provider,campaignId:i,placementId:a,adUnitId:r.adUnitId,arrivalTime:this.endTime,adHtml:t.adm,vastData:t.adm,dealId:t.dealid,price:t.price});o.gbi.bids.push(a);e=Object.assign({campaign_id:i,deployment:o.deployment||"unknown",requested_ad_units:r.width+"x"+r.height,deal_id:t.dealid,price:bouncex.gbi2._getReportablePrice(t.price),auction_number:o.gbi.auctionCount,ad_unit_id:r.adUnitId},e);return this.reportResult(n,e),a}})},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o,t.SSP_INDEX_Request=a;var s=n(0),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n,i,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n]);return o.default=e,t&&t.set(e,o),o}(n(3));function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function o(e){this.__init(e||{})}function a(e){i.SSP_Request.apply(this,arguments)}Object.assign(o.prototype=Object.create(i.default.prototype,{constructor:Object.getOwnPropertyDescriptor(o.prototype,"constructor")}),{__Request_Class:a,provider:"index",__createAllBidRequests:function(t){var n=[];return this.__groupBidRequests().forEach(function(e){e=Object.assign(e,t),e=this.__instantiateBidRequest(e);n.push(e)},this),n},__groupBidRequests:function(){var e,n=this,i=new Map;for(e in this.auction.campaigns)!function(t){(n.campaign_placement_ids[t]||[]).forEach(function(e){this.addRequestGroupPlacement(i,{campaignID:t,placementID:e})},n)}(e);return i},addRequestGroupPlacement:function(e,t){var n,i=t.campaignID,o=t.placementID,a=this.getRequestGroup(e,t);void 0!==a&&(e=(n=(0,s.getOrSet)(a.campaigns,i,this.auction.campaigns[i])).gbi.placements[o],n=(0,s.getOrSet)(a.campaignSettings,i,{campaignID:i,deployment:n.deployment,placementSettings:{}}),Object.assign(t,this.__createPlacementBidRequest(i,e,o)),n.placementSettings[o]=t,o=this.getPlacementLookupKey(t),a.lookupPlacementSettings[o]=t)},getRequestGroup:function(e,t){t=this.getRequestKey(t);return(0,s.getOrSet)(e,t,{requestKey:t,campaigns:{},campaignSettings:{},lookupPlacementSettings:{}})},getRequestKey:function(e){var t=e.campaignID;return[t,this.auction.campaigns[t].gbi.placements[e.placementID].mediaType].join("|")},getPlacementLookupKey:function(e){var t=e.campaignID;return this.auction.campaigns[t],[e.impid].join("|")},__createPlacementBidRequest:function(e,t,n){return{impid:this.getUniqueImpressionID(),campaignID:e,placement:t,placementID:n,adUnitId:t.adUnitId,type:t.mediaType,width:t.width,height:t.height,deployment:t.deployment,moat:t.moat}}}),a.__SSP_Class=o,Object.assign(a.prototype=Object.create(i.SSP_Request.prototype,{constructor:Object.getOwnPropertyDescriptor(a.prototype,"constructor")}),{provider:"index",intermediaryId:"869cff86d1c453c1",init:function(){var e=this.getRequestData(),e=this.getOptions(e);return this.fetch(e)},getOptions:function(e){var t=this.isVideo(),e={url:bouncex.ssl?"https://as-sec.casalemedia.com/cygnus":"http://as.casalemedia.com/cygnus",data:{v:t?"8.8":"7",cb:Date.now(),s:this.getSiteId(),r:JSON.stringify(e)},dataType:"text",contentType:"application/x-www-form-urlencoded",global:!1,crossDomain:!0,xhrFields:{withCredentials:!0},timeout:5e3,context:this,complete:function(e,t){this.handleResponse(e,t),this.done()}};return t&&(e.data.fn="jsonp"),e},isVideo:function(){var e=Object.values(this.campaignSettings)[0];return"video"===Object.values(e.placementSettings)[0].type},getSiteId:function(){var e=this._getProviderConfig("s"),t=this._getProviderConfig("qa_site_id");return this.getCampaign().qbxtest&&t||e},getRequestData:function(){var e,t={id:String((0,s.getEpochSeconds)()),imp:[],site:{page:this.getUrlWithParams(),ref:bouncex.referrer,mobile:bouncex.state.mobile?1:0},source:{pchain:"".concat(this.intermediaryId,":").concat(bouncex.website.id),ext:{schain:this.schainObject()}}};for(e in this.campaignSettings)this.__getCampaignRequestData(t,this.campaignSettings[e]);return t},getUrlWithParams:function(){this.getCampaign().type;var e=document.location.protocol+"//"+document.location.hostname+document.location.pathname,t=bouncex.state.mobile?"mobile":"desktop";return e+"?device=".concat(t)},__getCampaignRequestData:function(e,t){var n,i=e.imp;for(n in t.placementSettings){var o=this.__getPlacementRequestData(t,t.placementSettings[n]);i.push(o)}return i},__getPlacementRequestData:function(e,t){return"video"===t.type?this.createVideoImpression(t):this.createDisplayImpression(t)},schainObject:function(e){var t,n={ver:"1.0",complete:1,nodes:[{asi:"wunderkind.co",sid:bouncex.website.id+"",hp:1}]};return e&&((t=n.nodes[0]).rid=e,t.name=bouncex.website.name,t.domain=bouncex.website.domain),n},handleResponse:function(e){var t=bouncex.gbi2._constants.bidEvents,n=t.error,i={partner:this.provider,partner_site_id:this.getSiteId()||"NA",request_timestamp:this.startTime};if(200===e.status){var o=this.getBidsFromResponse(e);if(o&&o.length){var a=this.handleResponseBid.bind(this,i);return o.map(a)}n=t.none}else 0===e.status&&(n=t.cancelled);this.reportResult(n,i)},getBidsFromResponse:function(e){try{var t,n,i=e.responseJSON;return!i&&e.responseText&&(n=(t=e.responseText).substring(t.indexOf("(")+1,t.lastIndexOf(")")),i=JSON.parse(n)),i.seatbid[0].bid}catch(e){return!1}},getBidPlacementSettings:function(e){return this.lookupPlacementSettings[e.impid]},handleResponseBid:function(e,t){var n=bouncex.gbi2._constants.bidEvents.fill,i=this.getBidPlacementSettings(t),o=i.placementID,a=i.placement,r=i.campaignID,s=this.auction.campaigns[r];bouncex.gbi2.log(r,"placement #".concat(o," received a bid from ").concat(this.provider));var c=t.ext||{},u=c.dealid||t.dealid,d=this.convertPrice(c.pricelevel,u)||t.price||0,c=c.vasturl||t.adm,i="display"===i.type?i.width+"x"+i.height:"video",c=bouncex.gbi2._createBid({provider:this.provider,campaignId:r,placementId:o,adUnitId:a.adUnitId,arrivalTime:this.endTime,adHtml:t.adm,vastData:c,dealId:u,price:Number(d)});s.gbi.bids.push(c);e=Object.assign({campaign_id:r,deployment:s.deployment||"unknown",requested_ad_units:i,deal_id:u||"NA",price:this._getReportablePrice(d)||"NA",auction_number:s.gbi.auctionCount,ad_unit_id:a.adUnitId},e);return this.reportResult(n,e),c},convertPrice:function(e,t){if(!e)return 0;var n=e.length-2,e=e.split("");e.splice(n,0,".");e=e.join("").replace(/[^0-9.]/g,"");return(t?Number(e):Number(e)/.85).toFixed(5)}})},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getDomainsFromCode=function(e){for(var t,n=new Set,i=/(?:\/\/|["'])((?:[a-z0-9-]+\.)+[a-z]{2,})[\/'"]/gi;null!==(t=i.exec(e));n.add(t[1].toLowerCase()));return n},t.preconnectDomains=function(e){var t={rel:"preconnect",href:null},n={rel:"dns-prefetch",href:null};e.forEach(function(e){t.href=n.href="https://".concat(e),(0,o.createElement)("link",t,document.head),(0,o.createElement)("link",n,document.head)})},t.preconnect=function(e){e=i.getDomainsFromCode(e);i.preconnectDomains(e)};var i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n,i,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n]);return o.default=e,t&&t.set(e,o),o}(n(11)),o=n(0);function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}},function(e,t,n){function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={gtag:function(e,t){window.gtag("event",e,{send_to:bouncex.website.gai,event_category:"Wunderkind",event_label:t,non_interaction:!0})},ga:function(t,n,i){bouncex.website.gai?window.ga(function(){var e=window.ga.getAll().filter(function(e){return e.get("trackingId")===bouncex.website.gai});e.length&&window.ga(e[0].get("name")+".send","event","Wunderkind",t,n,{nonInteraction:i})}):window.ga("send","event","Wunderkind",t,n,{nonInteraction:i})},_gaq:function(e,t,n){t=t.replace(/\(|\)/g,"");bouncex.website.gai&&window._gaq.push(["_setAccount",bouncex.website.gai]),window._gaq.push(["_trackEvent","Wunderkind",e,t,,n])}},i={report:function(e,t,n){var i,o;"string"==typeof e&&"string"==typeof t&&(e=e,o=(o=void 0===n||!n?"Wunderkind "+e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():o)||e,e=/Impression$/.test(o),"function"==typeof window.gtag&&bouncex.website.gai?i="gtag":"function"==typeof window.ga?i="ga":"object"===a(window._gaq)&&(i="_gaq"),i&&r[i]&&r[i](o,t,e))}};t.default=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=a(n(4)),o=a(n(15));function a(e){return e&&e.__esModule?e:{default:e}}function r(e){e&&Object.assign(this,e),this.updateQueue={bounce:[],visit:[],subscribers:new Map}}Object.assign(r.prototype,{campaigns:null,instantiateCampaigns:function(){this.campaigns&&(Object.keys(this.campaigns).forEach(this.instantiateCampaignId,this),this.sortCampaigns())},instantiateCampaignId:function(e){var t,n=this.campaigns[e];return!n||n instanceof i.default||(t=(i.default.isGbi2Campaign(n)?o:i).default,this.campaigns[e]=new t(n,e)),this.campaigns[e]},sortCampaigns:function(){var n=this.campaigns;if(!n||Object.keys(n).length<=1)return n;var e=Object.keys(n).sort(function(e,t){return n[e].sortOrder-n[t].sortOrder});return e.join()===Object.keys(n).join()||e.forEach(function(e){var t=n[e];delete n[e]&&(n[e]=t)}),n},processQueuedUpdates:function(){this._processBounceCookieQueue(),this._processBounceVisitCookieQueue(),this._notifyCookieSubscribers()},_notifyCookieSubscribers:function(){0!==this.updateQueue.subscribers.size&&this.updateQueue.subscribers.forEach(function(e,t){e(t)})},subscribeToCookie:function(e){var t=e.callback&&e.name,n=this.updateQueue.subscribers.has(e.name);t&&!n&&this.updateQueue.subscribers.set(e.name,e.callback)},unsubscribeFromCookie:function(e){this.updateQueue.subscribers.delete(e)},_processBounceCookieQueue:function(){0!==this.updateQueue.bounce.length&&void 0!==this.getBounceCookie()&&(this.updateQueue.bounce.forEach(function(e){this.cookie=this.getBounceCookie(),e&&("function"==typeof e?e(this.cookie):Object.assign(this.cookie,e),this.setBounceCookie())},this),this.updateQueue.bounce=[])},_processBounceVisitCookieQueue:function(){0!==this.updateQueue.visit.length&&void 0!==this.getBounceVisitCookie()&&(this.updateQueue.visit.forEach(function(e){this.visit_cookie=this.parseJSON(this.getBounceVisitCookie()),e&&("function"==typeof e?e(this.visit_cookie):Object.assign(this.visit_cookie,e),this.setBounceVisitCookie())},this),this.updateQueue.visit=[])},updateBounceCookie:function(e){this.updateQueue.bounce.push(e),this.processQueuedUpdates()},updateBounceVisitCookie:function(e){this.updateQueue.visit.push(e),this.processQueuedUpdates()}})},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DeploymentType=i,t.DeploymentFloater=r;var a=n(5),o=(n=n(0))&&n.__esModule?n:{default:n};function i(e,t){e=e&&i.types[e];if(e)return new e(t)}function r(e){this.__init(e)}Object.assign(i.prototype,{__init:function(e){this.campaign=e},handleEvent:function(e){var t=e.type;null!==this.handleEventTypes&&t in this.handleEventTypes&&this.handleEventTypes[t].apply(this,arguments)},handleEventTypes:null}),Object.assign(r.prototype=Object.create(i.prototype,{constructor:Object.getOwnPropertyDescriptor(r.prototype,"constructor")}),{topScrolledPos:0,__init:function(e){i.prototype.__init.apply(this,arguments),this.pinned=!1,this.attachListeners(e)},attachListeners:function(e){e.once("impression.bx",this,!1),e.once("activation.bx",this,!1)},pinCreative:function(){var e=this.campaign.getElement();e.classList.add("bx-deployment-floater-pinned"),e.classList.remove("bx-deployment-floater"),this.pinned=!0,this.campaign.unhide()},scaleFloatingMasthead:function(){var e,t=Math.ceil(.2*(new o.default.WindowProps).height),n=this.campaign.getElement().offsetHeight,i=Math.round(100*t/n)/100;i<1&&(e=".bxc.bx-base.bx-campaign-".concat(this.campaign.id,".bx-deployment-floater .bx-wrap"),i="{ transform-origin: top; transform: scale(".concat(i,"); height: ").concat(t,"px }"),this.campaign.getStyleSheet().insertRule("".concat(e," ").concat(i),0),this.topScrolledPos+=n-t)},handleEventTypes:{"impression.bx":function(){var e=this.campaign.getElement(),t=jQuery(this.campaign.getElement()),n=t.find(".bx-slab").height(),i=(i=this.campaign.calloutTarget&&this.campaign.calloutTarget.width())?"".concat(i,"px"):"inherit";t.css({height:"".concat(n,"px"),"max-width":i});e=e.getBoundingClientRect&&e.getBoundingClientRect(),e=e&&e.top||0;e<0?(this.topScrolledPos=window.scrollY+e,this.scaleFloatingMasthead(),(0,a.BXScrollHandler)(this)):this.pinCreative()},"scroll.bx":function(e,t){var n,i,o=this.campaign;o&&!o.ad_closed&&o.ad_visible&&!this.pinned?(n="down"===e.detail.direction,i=e.detail.pos<=this.topScrolledPos,e=e.detail.fast,n?o.hide():i?(this.pinCreative(),a.BXEventListener.remove(t)):e&&o.unhide()):a.BXEventListener.remove(t)},"activation.bx":function(){var e=Object.values(bouncex.campaigns).filter(function(e){return"masthead"===e.deployment})[0];e&&!e.failed&&e.preclude(this.campaign.id)}}}),i.types={floater:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=o(n(4)),a=o(n(16));function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){i.default.apply(this,arguments)}Object.assign(r.prototype=Object.create(i.default.prototype,{constructor:Object.getOwnPropertyDescriptor(r.prototype,"constructor")}),{isGBI2:!0,adformats:null,providers:null,updateWinningBids:function(t){var e=this.updateAdFormats(),n=new Set;return Object.values(e).forEach(function(e){(e.winningBid=e.findWinningBid(t))&&n.add(e.winningBid)}),n},updateAdFormats:function(){var e=this.gbi.bids||[],n=this.gbi.placements||{},i=this.activationMediaTypes(),o=this.adformats={all:new a.default("all",e)};return e.forEach(function(e){var t=e.placementId&&n[e.placementId],t=t&&t.mediaType;i.has(t)&&(o[t]||(o[t]=new a.default(t))).bids.push(e)}),o},activationMediaTypes:function(){var t=new Set;return t.add("all"),this.activations&&this.activations.forEach(function(e){e.adformat&&t.add(e.adformat)}),t},activationAdFormat:function(t){var e=this.activations&&this.activations.filter(function(e){return e.activation===t})[0],e=e&&e.adformat||"all";return this.adformats&&this.adformats[e]},activationBid:function(e){e=this.activationAdFormat(e);return e&&e.winningBid},isReadyForAuction:function(e){return!(this.ad_shown||this.failed||this.trigger||!e&&(!this.activated||this.winningBid||this.gbi.ready))},getProviders:function(){if(null!==this.providers)return this.providers;var e,t={},n=this.gbi.placements;for(e in n)for(var i=n[e].providers,o=0;o<i.length;o++){var a=i[o];(t[a]||(t[a]=[])).push(e)}return this.providers=t}})},function(e,t,n){function i(e,t){this.id=e,this.bids=t||[]}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i,Object.assign(i.prototype,{findWinningBid:function(e){return this.bids&&this.__findWinningBid(this.bids,e)||null},__findWinningBid:function(e,t){for(var n=0;n<t.length;n++){if(e.length<=1)return e[0];e=t[n](e)}return e[0]}})},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default={reload:function(){bouncex.reload_campaigns()}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={callbacks:[],eventQueue:[],reset:function(){this.callbacks=[],this.eventQueue=[]},onEvent:function(e,t){this.callbacks.push({type:e,cb:t}),this.__evaluateQueues(e)},activateEvent:function(e,t){this.eventQueue.push({type:e,data:t,ts:Date.now()}),this.__evaluateQueues(e)},__evaluateQueues:function(t){var e,n=this.callbacks.filter(function(e){return e.type===t});0!==n.length&&(e=this.eventQueue.filter(function(e){return e.type===t}),this.eventQueue=this.eventQueue.filter(function(e){return e.type!==t}),e.forEach(function(t){n.forEach(function(e){try{e.cb(t)}catch(e){bouncex.err(e,"Client event handler")}})}))}};Object.values(["Impression","CreativeLoaded"]).forEach(function(t){i["on".concat(t)]=function(e){i.onEvent(t,e)},i["activate".concat(t,"Event")]=function(e){i.activateEvent(t,e)}}),t.default=i},function(e,t,n){function i(){return!(bouncex.browser.chrome&&bouncex.browser.ios||bouncex.browser.firefox||bouncex.browser.safari||!Number(bouncex.website.aco.local_storage))}function o(){return!(("multi_cookie"!==bouncex.website.ct||!bouncex.website.aco.disable_first_party)&&6e3<document.cookie.length)}Object.defineProperty(t,"__esModule",{value:!0}),t.can_local_store=i,t.checkCookieEligibility=o,t.init_cookie_check=function(){bouncex.local_storage_enabled=i(),bouncex.cookie_too_large=!1,bouncex.local_storage_enabled||"multi_cookie"===bouncex.website.ct||o()||(bouncex.cookie_too_large=!0)}},function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){"use strict";this.disable_first_party=e.disable_first_party||!1,this.first_party_limit=e.first_party_limit||999999,this.domain=e.domain||window.location.host,e.parse_json&&(this.parse_json=e.parse_json),e.stringify_json&&(this.stringify_json=e.stringify_json)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o.prototype={best:function(t,e){var n={};""===t&&(t={});try{'{"'!==e.substr(0,2)&&(e=bouncex.lz.decompressFromURI(e)),n=this.parse_json(e)}catch(e){return t}if(!t.fvt&&!n.fvt){var i=Object.keys(t).length;return Object.keys(n).length>i?n:t}i=t.fvt||0;return(n&&n.fvt?n.fvt:0)>i?n:t},parse_json:JSON.parse,stringify_json:JSON.stringify,set_qs:function(e,t,n){var i;return-1===e.indexOf("&"+t+"=")?e+="&"+t+"="+n:(i=new RegExp("&"+t+"=[^&]*"),e=e.replace(i,"&"+t+"="+n)),e},set:function(e,t){"object"==i(t)&&(t=this.stringify_json(t)),this.disable_first_party||this.cookie(e,t),this.local_storage(e,t),this.window_name(e,t)},get:function(e){for(var t,n=this.getvs(e),i="";t=n.pop();)i=this.best(i,t);return this.set(e,i),i},getvs:function(e){function t(e){e&&""!==e&&n.push(e)}var n=[];return t(this.cookie(e)),t(this.local_storage(e)),t(this.window_name(e)),n},cookie:function(e,t){if(void 0===t)return this.get_qs(e,document.cookie);var n=this.domain;window.location.host.indexOf(n)<0&&(n=window.location.host.split(".").slice(-2).join(".")),document.cookie=e+"='; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/; domain="+n,document.cookie.length+t.length<this.first_party_limit&&(document.cookie=e+"="+t+"; expires=Tue, 31 Dec 2030 00:00:00 UTC; path=/; domain="+n)},local_storage:function(e,t){var n=window.localStorage;try{if(n){if(void 0===t)return n.getItem(e);n.setItem(e,t)}}catch(e){}},window_name:function(e,t){try{if(void 0===t)return this.get_qs(e,window.name);window.name=this.set_qs(window.name,e,t)}catch(e){}},get_qs:function(e,t){if("string"==typeof t)for(var n,i=e+"=",o=t.split(/[;&]\s*/),a=0;a<o.length;a++)if(0===(n=o[a]).indexOf(i))return n.substring(i.length,n.length)}},t.default=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(6)),o=a(n(1));function a(e){return e&&e.__esModule?e:{default:e}}n={init:function(){var e=bouncex.getBounceVisitCookie(),t=bouncex.getBounceCookie();if(bouncex.segments=bouncex.segments||[],"string"==typeof e)try{e=JSON.parse(e)}catch(e){o.default.error("could not parse visit cookie for segments")}e&&e.seg?bouncex.segments=e.seg:i.default.get({url:"https://dfp.bouncex.net/pub/segment/".concat(bouncex.website.id,"/").concat(t.did),error:function(){bouncex.updateBounceVisitCookie({seg:[]}),bouncex.segments=[]},success:function(e){bouncex.updateBounceVisitCookie({seg:e}),bouncex.segments=e}})}};t.default=n},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=(i=n(1))&&i.__esModule?i:{default:i},a=n(0),r={development:"//assets.staging.bounceexchange.com/tag/css/",staging:"//assets.staging.bounceexchange.com/tag/css/",production:"//assets.bounceexchange.com/tag/css/"},n={load:function(e){var t;e="function"==typeof e?e:function(){};var n=bouncex.assets&&bouncex.assets.creativesBaseStyles;if(!n)return t={group:"Creatives Base Styles",message:"asset file hash not available"},void o.default.error(t);bouncex.css_added?e():(n={id:"creativesBaseStyles",rel:"stylesheet",href:r[bouncex.env].concat("creatives-base-styles."+n+".min.css"),type:"text/css",onload:function(){e(),bouncex.css_added=!0},onerror:function(){t={group:"Creatives Base Styles",message:"creatives base styles loading failed"},o.default.error(t)}},(0,a.createElement)("link",n,document.head))}};t.default=n},function(e,t,n){function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.polyfillAll=o,t.default=t.Polyfills=void 0;var i={"Object.values":function(){Object.values||(Object.values=a)},"Object.assign":function(){Object.assign||(Object.assign=r)},CustomEvent:function(){"function"!=typeof window.CustomEvent&&(window.CustomEvent=s)},ListenerOptions:function(){!function(){var t=!1;try{var e={get capture(){return t=!0}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){t=!1}return t}()&&(u(Window),u(Node))}};function o(){Object.keys(i).forEach(function(e){try{this[e]()}catch(e){}},i)}function a(t){return Object.keys(t).map(function(e){return t[e]})}function r(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];Object.keys(n).forEach(function(e){t[e]=n[e]})}return t}function s(e,t){t=t||{bubbles:!1,cancelable:!1,detail:null};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}function u(e){var r=e.prototype.addEventListener,s=e.prototype.removeEventListener;e.prototype.addEventListener=function(e,t,n){if(n&&"object"===c(n)){var i,o=!!n.capture,a=r.call(this,e,t,o);return n.once&&(i=s.bind(this,e,t,o),r.call(this,e,i,o)),a}return r.apply(this,arguments)},e.prototype.removeEventListener=function(e,t,n){if(n&&"object"===c(n)){var i=!!n.capture;return s.call(this,e,t,i)}return s.apply(this,arguments)}}t.Polyfills=i,(t.default=o)()},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=(n=n(1))&&n.__esModule?n:{default:n};t.default={_articles:[],_constants:{selectors:{group:".bx-group-custom",image:".bx-row-line",headline:".bx-row-text-subheadline"}},_getArticles:function(){return this._articles},_getRequestOptions:function(){var n=this;return{url:n._settings.feedUrl,dataType:n._settings.feedFormat,complete:function(e,t){n._handleResponse(e,t)}}},_getStorageKey:function(){return"bx-recirc-"+bouncex.website.id},_getStoredArticles:function(){var e=this._getStorageKey(),e=window.sessionStorage.getItem(e);return bouncex.parseJSON(e,[])},_getValidArticles:function(e){for(var t=[],n=0;n<e.length;n++)this._isValidArticle(e[n])&&t.push(e[n]);return t},_getValidGroups:function(e){for(var t=e.querySelectorAll(this._constants.selectors.group),n=[],i=0;i<t.length;i++)this._isValidGroup(t[i])&&n.push(t[i]);return n},_handleResponse:function(e,t){if("error"===t)return this.error(null,"error response from article feed");this.log(null,"parsing feed response");t=this._parseArticles(e);if(!t)return this.error(null,"no articles found while parsing feed response");e=this._getValidArticles(t);if(!e.length)return this.error(null,"all articles failed validation");this.log(null,e.length+"/"+t.length+" articles passed validation"),this._setArticles(e),this._storeArticles(e)},_isValidGroup:function(e){var t=1===e.querySelectorAll(this._constants.selectors.image).length,n=1===e.querySelectorAll(this._constants.selectors.headline).length,e=1===e.querySelectorAll("a").length;return t&&n&&e},_requestFeed:function(e){this.log(null,"requesting articles from "+e.url),jQuery.ajax(e)},_setArticles:function(e){this._articles=e},_storeArticles:function(e){this.log(null,"storing articles in session storage");var t=this._getStorageKey();try{window.sessionStorage.setItem(t,JSON.stringify(e))}catch(e){this.error(null,e)}},_isValidArticle:function(e){if(!e)return!1;var t=!(!e.link||!bouncex.utils.validate.url(e.link)),n=!(!e.image||!bouncex.utils.validate.url(e.image)),e=!!e.headline;return t&&n&&e},_parseArticles:function(e){switch(this._settings.feedFormat){case"xml":return this._settings.responseParser(e.responseXML);case"json":return this._settings.responseParser(e.responseJSON);default:return this.error(null,"unrecognized feed format type"),!1}},_populateGroup:function(t,e,n){try{var i=e.querySelectorAll(this._constants.selectors.image)[0].firstChild,o=e.querySelectorAll(this._constants.selectors.headline)[0].firstChild,a=e.querySelector("a");i.style.backgroundImage="url("+n.image+")",i.style.backgroundSize="cover",o.textContent=n.headline,a.setAttribute("href",n.link)}catch(e){this.error(t,e)}},_settings:{},_validateSettings:function(){return!!(this._settings.feedFormat&&this._settings.feedUrl&&this._settings.responseParser&&"function"==typeof this._settings.responseParser)},addSettings:function(e){for(var t in e)bouncex.recirc._settings[t]=e[t]},articlesAvailable:function(){return 0<this._articles.length},error:function(e,t){this.log(e,t,!0)},init:function(){if(this.isEnabled()&&!this.articlesAvailable()){if(!this._validateSettings())return this.log(null,"settings failed validation");var e=this._getStoredArticles();e&&e.length?(this.log(null,"retrieving articles from session storage"),this._setArticles(e)):(this.log(null,"no articles found in storage; requesting from feed"),this._requestFeed(this._getRequestOptions()))}},isEnabled:function(){return!!this._settings.enabled},log:function(e,t,n){t={group:"recirc",campaignId:e,message:t};n?i.default.error(t):i.default.info(t)},populateCreative:function(e){if(!this.isEnabled())return!1;if(!this.articlesAvailable())return!1;var t=document.getElementById("bx-campaign-"+e);if(!t)return this.error(e,"no creative found");var n=this._getValidGroups(t),i=this._getArticles();if(n.length&&n.length<=i.length){this.log(e,"populating article groups");for(var o=0;o<n.length;o++)this._populateGroup(e,n[o],i[o])}else n.length&&this.log(e,"not enough articles to populate creative")}}},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(2),i=m(n(26)),o=m(n(27)),a=g(n(3)),s=n(9),c=n(10),d=m(n(28)),l=g(n(0)),p=n(11);function b(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return b=function(){return e},e}function g(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=b();if(t&&t.has(e))return t.get(e);var n,i,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n]);return o.default=e,t&&t.set(e,o),o}function m(e){return e&&e.__esModule?e:{default:e}}n={_activateBehavioralTriggers:function(e){(0,u.activateInstruments)(e)},_activateCampaign:function(e){this.log(e,"activating campaign");var t=bouncex.campaigns[e];t.gbi.ready=!0,t.gbi.hasActivatedOnce||((0,u.event_js_eval)(e,"activation"),t.dispatchEvent("activation.bx"),t.gbi.hasActivatedOnce=!0)},_activateCreative:function(e,t){this.log(e,"activating creative");var n=bouncex.campaigns[e],i=bouncex.creatives[t],t=/{bpcid}/g;if(n.html=i.html.replace(t,e),n.styles=i.styles.replace(t,e),!(0,u.setCalloutTarget)(n))return bouncex.gbi2.error(e,"no anchor found"),this._failCampaign(e);(0,u.placeCampaign)(e),(0,u.assignDomReferencesToCampaign)(e),(0,u.cacheCreativeForm)(e,1),(0,u.setAccessibilityProperties)(e),(0,u.setTransitionEffect)(e),(0,u.applyCampaignStyles)(e)},_activatePlacement:function(t,n){var e,i=bouncex.campaigns[t],o=n.placementId,a=i.gbi.placements[o],r=this;this.log(t,"activating placement #".concat(o," (").concat(a.mediaType,")")),i.winningBid=n,i.activePlacementId=o,i.activeAdUnitId=a.adUnitId,this._activateCreative(t,a.creativeId),bouncex.recirc.populateCreative(t),"display"==a.mediaType?(i.onImpression=function(e){r._populateDisplayAd(t,{trigger:i.trigger,content:n.adHtml,width:a.width,height:a.height,deployment:a.deployment,onReady:e})},this._activateCampaign(t),(0,p.preconnect)(n.adHtml)):"video"==a.mediaType&&(e={vast:n.vastData,width:a.width,height:a.height},(o=i.obj1.find('video[id*="bx-video-player"]'))&&0<o.length?(i.gbi.isVideo=!0,bouncex.video.init(t,e.vast,n.provider,a)):this._prepareVideo(t,e,function(){r._activateCampaign(t)}),(0,p.preconnect)(n.vastData))},_adjustPosition:function(e){"masthead"===this._getDeploymentType(e)&&(e=bouncex.campaigns[e],bouncex.window.scrollTop(e.obj1.offset().top))},_allRequestsAreComplete:function(e){var t=bouncex.campaigns[e].gbi.requests;if(!t)return!1;for(var n=0;n<t.length;n++)if(!t[n].endTime)return!1;return!0},_attachClickReporting:function(e,t){bouncex.on(t,"mouseenter.gbi_click_events_"+e,function(){bouncex.on(bouncex.window,"blur.gbi_click_events_"+e,function(){bouncex.report(e,"click",{value:"ad"})})}),bouncex.events[e].gbi_click=function(){bouncex.off(bouncex.window,"blur.gbi_click_events_"+e)},bouncex.on(t,"mouseleave.gbi_click_events_"+e,bouncex.events[e].gbi_click)},_bidFilters:{isPerformanceBid:function(e){var t=[];return e.forEach(function(e){"perf"===e.provider&&t.push(e)}),t.length?t:e},hasDealId:function(e){var t=[];return e.forEach(function(e){e.dealId&&t.push(e)}),t.length?t:e},hasHighestPrice:function(e){var t=[],n=0;return e.forEach(function(e){e.price>n?(n=e.price,t=[e]):e.price==n&&t.push(e)}),t.length?t:e},arrivedFirst:function(e){var t=[],n=0;return e.forEach(function(e){0===n||e.arrivalTime<n?(n=e.arrivalTime,t=[e]):e.arrivalTime==n&&t.push(e)}),t.length?t:e}},_compose:function(){var e=Array.prototype.slice.call(arguments),n={};return e.forEach(function(e){for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t])}),n},_constants:{auctionDelayInMilliseconds:2e3,defaultReloadDelayInMilliseconds:3e5,bidEvents:{fill:"bid_fill",none:"bid_none",empty:"bid_empty",error:"bid_error",cancelled:"bid_cancel",selected:"bid_selected"},targetSelector:".bx-group-placeholder:eq(0)"},auctionHandler:null,_createAndSendAuction:function(){var e;return null===this.auctionHandler&&(e={auctionCheckpoint:this._constants.auctionDelayInMilliseconds,auctionTimeout:2*this._constants.auctionDelayInMilliseconds},this.auctionHandler=new d.default(e)),this.auctionHandler.getOrCreateAuction()},_createAndSendRequests:function(t,e){this.log(t,"sending bid requests");var n,i,o=[];for(n in e)e.hasOwnProperty(n)&&(i=e[n]).providers.forEach(function(e){e=this._createBidRequest(e,{campaignId:t,placementId:n,adUnitId:i.adUnitId,type:i.mediaType,width:i.width,height:i.height,deployment:i.deployment,moat:i.moat});o.push(e),e.init()}.bind(this));return o},_createBid:function(e){return{provider:e.provider,campaignId:e.campaignId,placementId:e.placementId,adUnitId:e.adUnitId,price:e.price,adHtml:e.adHtml,vastData:e.vastData,dealId:e.dealId,arrivalTime:e.arrivalTime||Date.now(),targeting:e.targeting}},_createBidRequest:function(e,t){return this._requestIndex[e](t)},_createDisplayFrame:function(e){return(0,u.createIframe)({target:"_blank",class:"bx-gbi-frame",frameborder:"0",horizontalscrolling:"no",verticalscrolling:"no",width:"100%",height:"100%",vspace:"0",hspace:"0",marginwidth:"0",marginheight:"0",scrolling:"no",allowTransparency:"true",srcdoc:e})},_customizations:{anchor:{updateDynamicAnchor:function(e){var t,n=bouncex.campaigns[e];n.dynamic_anchor&&!n.gbi.contentLoaded&&(t=(0,u.parseSiteElementSelector)(n.callout_t),n.visibleAnchors=u.BrowserUtil.viewport.getVisibleElements(t,n.dom_placement_method),0<n.visibleAnchors.length&&((0,u.setCampaignCalloutTargetToIndex)(n,n.visibleAnchors[0].index),(0,u.placeCampaign)(e)))},passesViewabilityTest:function(e){var t=bouncex.campaigns[e],e=this._getMinimumHeight(t)||250;return u.BrowserUtil.viewport.distanceToBottom(t.calloutTarget[0],t.dom_placement_method,t.callout_voffset)>e},_getMinimumHeight:function(e){var t=this._getBidDimensions(e);return("prepend"===e.dom_placement_method||"append"===e.dom_placement_method?e.calloutTarget:e.calloutTarget.parent()).innerWidth()*(t.height/t.width)/2},_getBidDimensions:function(e){var t=e.winningBid?e.winningBid.placementId:Object.keys(e.gbi.placements)[0],t=e.gbi.placements[t];return{height:Number(t.height),width:Number(t.width)}}}},_deactivateCampaign:function(e,t){this.log(e,"deactivating campaign");e=bouncex.campaigns[e];return(0,u.deactivate_campaign)(e,t)},_restartCampaign:function(e){var t=this.initCampaign.bind(this,e);this._deactivateCampaign(e,t)},_endAllRequests:function(e){bouncex.campaigns[e].gbi.requests.forEach(function(e){(!e.campaigns||Object.keys(e.campaigns).length<=1)&&e.end()})},_exceedsFrequencyCap:function(){var e=bouncex.website.adsConfig;if(!e)return!1;if(!e.freqCapEnabled)return!1;if(!e.freqCapImpressions)return!1;switch(e.freqCapInterval){case"pageview":return this._pageImpressions>=e.freqCapImpressions;case"visit":return bouncex.visit_cookie.pci>=e.freqCapImpressions}return!1},_failCampaign:function(e){var t=bouncex.campaigns[e];if(t.failed)return!1;this.log(e,"campaign failed");e=this._getDeploymentType(e);return this._failedDeployments.push(e),t.failed=!0,t.gbi.ready=!1},_failedDeployments:[],_getAdUnitIds:function(e){var e=bouncex.campaigns[e],t=e.gbi&&e.gbi.placements;return Object.keys(t).map(function(e){return t[e].adUnitId})},_getDeploymentType:function(e){var e=bouncex.campaigns[e],t=e.gbi&&e.gbi.placements;if(t)for(var n in t)if(t.hasOwnProperty(n))return t[n].deployment;return""},_getProviderConfig:function(e,t){var n=bouncex.website.sspConfig;return n&&n[e]&&n[e][t]},_getReportablePrice:function(e){return Number(e).toFixed(5)},_getResizeData:function(e,t){t.width=Number(t.width),t.height=Number(t.height);var n=bouncex.campaigns[e],i=n.obj1,o=1,a=2*((parseInt(i.find(".bx-wrap").css("padding-left"),10)||0)+(parseInt(i.find(".bx-align").css("padding-left"),10)||0)),e=bouncex.wndsize();return"agilityzone"===n.type&&n.calloutTarget.length?o=((i=0<(i=n.calloutTarget.width()||n.calloutTarget.parents(":visible").width())?Math.min(i,e.width):e.width)-a)/t.width:"overlay"===n.type&&(n=(e.width-a)/t.width,o=(a=(e.height-a)/t.height)<n?a:n),{scaleRatio:o,scaledWidth:t.width*o,scaledHeight:t.height*o}},_incrementImpressionCounters:function(){"number"==typeof this._pageImpressions?this._pageImpressions++:this._pageImpressions=1,bouncex.updateBounceVisitCookie(function(e){"number"==typeof e.pci?e.pci++:e.pci=1})},_initAuction:function(e){var t=bouncex.campaigns[e];if(t.isReadyForAuction()){this.log(e,"initializing auction");var n=t.gbi.bids,i=[this._bidFilters.isPerformanceBid,this._bidFilters.hasDealId,this._bidFilters.hasHighestPrice,this._bidFilters.arrivedFirst];if(0==n.length)return this.log(e,"no bids were returned"),this._failCampaign(e);i=t.updateWinningBids(i);if(this._reportWinningBids(e,i),!(0,u.setCalloutTarget)(t))return this.error(e,"no anchor found"),this._failCampaign(e);i=t.adformats.video||t.adformats.all;i&&i.winningBid&&this._activatePlacement(e,i.winningBid);var o=this,i=bouncex.gbi2._getProviderConfig(i.winningBid.provider,"reload")||this._constants.defaultReloadDelayInMilliseconds;(0,u.setTimeout2)(function(){t.isReadyForAuction(!0)&&o._restartCampaign(e)},i)}},_initRequests:function(e,t){var n=bouncex.campaigns[e],i=n.gbi.placements;n.gbi.hasBegunAuction=!0,n.gbi.bids=[];var o=decodeURIComponent(bouncex.calling_url);if(n.qbxtest&&-1!==o.indexOf("bxssp="))for(var a in i)i.hasOwnProperty(a)&&((a=i[a]).providers=a.providers.filter(function(e){return-1!==o.indexOf("bxssp=".concat(e))}));this._isForceTest(e)&&!t?this._prefetchBids(e,"aqbx",i):bouncex.vars.perf_ads_prefetch&&!t?this._prefetchBids(e,"perf",i):(n.gbi.auction=this._createAndSendAuction(),this._setAuctionTimeout(e))},_injectSegmentIntoIframe:function(e){bouncex.cookie&&(e.wkndSegment={audienceID:"".concat(bouncex.website.id,"/").concat(bouncex.cookie.did),segments:bouncex.segments||[]})},_integrations:{tag:{intermediaryId:"869cff86d1c453c1",generateId:function(){return this.intermediaryId+":"+bouncex.website.id}},moat:{display:{scriptSrc:document.location.protocol+"//z.moatads.com/bounceexchangedisplay18031701869/moatad.js",getScriptTag:function(e){if(!l.default.shouldSampleMoatPixel())return bouncex.gbi2.log(null,"SAMPLE: MOAT script blocked"),"";e=(0,u.qs)({moatClientLevel1:e.website,moatClientLevel2:e.deviceType,moatClientLevel3:e.trigger,moatClientLevel4:e.adSize,zMoatPlacement:e.placement});return'<script src="'+this.scriptSrc+"?"+e+'" type="text/javascript"><\/script>'}},video:{scriptSrc:document.location.protocol+"//z.moatads.com/jwplayerplugin0938452/moatplugin.js",partnerCode:"bouncexjsvideojwplayer997111196347",loadPlugin:function(e){if(!l.default.shouldSampleMoatPixel())return bouncex.gbi2.log(e,"SAMPLE: MOAT script blocked"),"";var t=this;(0,u.getScript)(t.scriptSrc,function(){t.addImpressionListener(e)})},addImpressionListener:function(e){var t=bouncex.campaigns[e],n=this;t.gbi.player.on("adImpression",function(e){moatjw.add({partnerCode:n.partnerCode,player:this,adImpressionEvent:e,ids:{level1:window.location.host+" ("+bouncex.website.id+")",level2:bouncex.state.mobile?"mobile":"desktop",level3:t.trigger,level4:"video",slicer1:"overlay"===t.type?t.type:t.subtype},duration:30})})}}},jwplayer:{key:"o8z/iG2QyTbuWcdH2vCzMM0waC0nOAeJ9/gVcpFiPZ+tv1+5",createPlayerConfig:function(e){var t=/^[\s]*<VAST/i.test(e.vastData)?"vastxml":"tag",n={};return n.file="//"+bouncex.website.biu+"/assets/global/plugins/jwplayer/blank.mp4",n.mute=!0,n.width=e.width,n.height=e.height,n.advertising={},n.advertising.client="vast",n.advertising.vpaidcontrols=!0,n.advertising[t]=e.vastData,n},createPlayerInstance:function(t,e,n,i){bouncex.gbi2.log(t,"creating video player instance");var o="//"+bouncex.website.biu+"/assets/global/plugins/jwplayer/8.3.0/jwplayer.js",a=(0,u.createIframe)({class:"bx-gbi-frame",style:"border: 0; width: "+e.width()+"px; height: "+e.height()+"px;"}),r=this;e.append(a);var s=a.contentWindow;bouncex.browser.firefox&&(s.oldGetComputedStyle=s.getComputedStyle,s.getComputedStyle=function(e,t){t=s.oldGetComputedStyle(e,t);return null===t?{}:t}),s.document.write('<html><body style="margin: 0px; overflow: hidden;"><div id="bx-video"></div></body></html>');a=s.document.createElement("script");a.setAttribute("src",o),a.onload=function(){bouncex.gbi2.log(t,"jwplayer script loaded"),s.jwplayer?(bouncex.gbi2.log(t,"jwplayer executed"),s.jwplayer.key=r.key,s.player=s.jwplayer("bx-video"),s.player.setup(n),s.player.on("adClick",function(){bouncex.gbi2.report(t,"click",{value:"ad"})}),s.player.on("adError",function(e){bouncex.gbi2.error(t,e.message?"video error: "+e.message:"video error")}),i(s.player)):(bouncex.gbi2.error(t,"jwplayer failed to execute"),bouncex.gbi2._failCampaign(t))},a.onerror=function(){bouncex.gbi2.error(t,"jwplayer script failed to load"),bouncex.gbi2._failCampaign(t)},s.document.body.appendChild(a),bouncex.gbi2._injectSegmentIntoIframe(s)}}},_isForceTestLiveConditions:function(e){var t="abxtest".concat(e),n="abxtestall";return bouncex.updateBounceCookie(function(e){e.hcs_abxtest=e.hcs_abxtest||[],-1<bouncex.calling_url.indexOf(t)&&-1===e.hcs_abxtest.indexOf(t)&&e.hcs_abxtest.push(t),-1<bouncex.calling_url.indexOf(n)&&-1===e.hcs_abxtest.indexOf(n)&&e.hcs_abxtest.push(n)}),-1<bouncex.cookie.hcs_abxtest.indexOf(t)||-1<bouncex.cookie.hcs_abxtest.indexOf(n)},_isForceTest:function(e){return-1<bouncex.calling_url.indexOf("aqbxtest"+e)||this._isForceTestLiveConditions(e)},_populateDisplayAd:function(t,e){this.log(t,"populating display ad");var n=bouncex.campaigns[t].obj1.find(bouncex.gbi2._constants.targetSelector),i=bouncex.gbi2._integrations.moat.display,o=e.content,a=e.onReady,r="transform-origin: 0 0; max-width: 100%; max-height: 100%;";if(0===n.length)return bouncex.gbi2.error(t,"creative is missing an ad stack placeholder group"),bouncex.gbi2._failCampaign(t),!1;var s=bouncex.gbi2._getResizeData(t,{width:e.width,height:e.height});s.scaleRatio<1&&(n.css({width:s.scaledWidth+"px",height:s.scaledHeight+"px",overflow:"hidden"}),o.indexOf("celtra-ad"),r+=" transform: scale(".concat(s.scaleRatio,");")),o+=i.getScriptTag({website:window.location.host+" ("+bouncex.website.id+")",deviceType:bouncex.state.mobile?"mobile":"desktop",trigger:e.trigger,adSize:e.width+"x"+e.height,placement:e.deployment}),o='<html><head><base target="_blank"/>'.concat("<script>var inDapIF = true;<\/script>",'</head><body marginwidth="0" marginheight="0" style="').concat(r,'">').concat(o,"</body>");try{var c=this._createDisplayFrame(o);this.watchCreativesLoad(t,c),n.append(c)}catch(e){return bouncex.gbi2.error(t,"error populating ad: "+e),bouncex.gbi2._failCampaign(t),!1}this._injectSegmentIntoIframe(c.contentWindow),this._attachClickReporting(t,n);c=c.contentDocument;(0,u.loadImages)(jQuery(c).find("img").filter(":visible"),function(){bouncex.gbi2.log(t,"images loaded successfully"),a&&a()})},watchCreativesLoad:function(e,t){var n=bouncex.campaigns[e];if(n.frameWatcher&&n.frameWatcher.frameElement===t)return n.frameWatcher;n.frameWatcher=new o.default(t),n.frameWatcher.campaignId=e;e=this._reportCreativesLoaded.bind(this,n.frameWatcher);n.frameWatcher.addEventListener("loadComplete.bx",e,!1);e=this._reportAdIntervention.bind(this,n.frameWatcher);n.frameWatcher.addEventListener("adIntervention.bx",e,!1)},watchVideoLoad:function(e){var t=document.getElementById("bx-video-player-"+e);this.watchCreativesLoad(e,t)},_reportCreativesLoaded:function(e){var t=e.campaignId,n=t&&bouncex.campaigns[t];n&&e.loadComplete&&!e.reportData&&(e.reportData={loaded:+e.loadSucceeded,failed:+e.loadFailed,load_delay:e.loadDelay},this.report(t,"creatives_loaded",e.reportData),bouncex.clientEvents.activateCreativeLoadedEvent({id:n.id,purpose:n.purpose,sub_purpose:n.sub_purpose}),e.loadFailed&&this.error(t,"creatives failed to load"))},_reportAdIntervention:function(e){var t=e.campaignId,n=t&&bouncex.campaigns[t];n&&e.intervention&&(e.loadSucceeded&&bouncex.close_ad(t,!0),this.error(t,"Ad Intervened by Browser"),this.report(t,"ad_intervention",n.winningBid||{}))},_prefetchBids:function(e,t,n){this.log(e,"prefetching "+t);var i,o=bouncex.campaigns[e],a={};for(i in n)n.hasOwnProperty(i)&&(a[i]=this._compose(n[i]),a[i].providers=[t]);o.gbi.requests=this._createAndSendRequests(e,a),(0,u.setTimeout2)(function(){this._endAllRequests(e),0<o.gbi.bids.length?this._initAuction(e):this._initRequests(e,!0)}.bind(this),1e3)},_prepareVideo:function(t,e,n){this.log(t,"preparing video ad");var i=bouncex.campaigns[t],o=i.obj1.find(bouncex.gbi2._constants.targetSelector),a=bouncex.gbi2._integrations.jwplayer,r=o.width(),s=o.height(),c=bouncex.gbi2._getResizeData(t,{width:r,height:s});c.scaleRatio<1&&(r=c.scaledWidth,s=c.scaledHeight,o.css({width:r+"px",height:s+"px"}));s=a.createPlayerConfig({vastData:e.vast,width:r,height:s});a.createPlayerInstance(t,o,s,function(e){i.gbi.player=e,i.gbi.isVideo=!0,i.gbi.config=i.gbi.config||{},i.gbi.config.playOnImpression=!0,bouncex.gbi2._integrations.moat.video.loadPlugin(t),i.gbi.contentLoaded=!0,n()})},_userSyncRequests:{__isSynced:function(e){return!!sessionStorage.getItem("bx".concat(e,"synced"))},__setAsSynced:function(e){bouncex.gbi2.log("SYNC","".concat(e," was synced")),sessionStorage.setItem("bx".concat(e,"synced"),"1")},__insertSyncElement:function(e,t,n){var n=(0,l.createElement)(t,{style:"display: none;",width:"1",height:"1",src:n}),i=this;n.onload=function(){i.__setAsSynced(e)},document.body.appendChild(n)},bsw:function(){this.__isSynced("bsw")||this.__insertSyncElement("bsw","img","https://ssp.behave.com/push_sync")},pbm:function(){if(!this.__isSynced("pbm")){var e=bouncex.gbi2._getProviderConfig("pbm","user_sync_endpoint"),t=bouncex.gbi2._getProviderConfig("pbm","publisher_id");return e?t?void this.__insertSyncElement("pbm","iframe","//"+e+"?p="+t):bouncex.gbi2.error(this.campaignId,"no publisher id found for pubmatic user sync"):bouncex.gbi2.error(this.campaignId,"no endpoint found for pubmatic user sync")}}},_requestIndex:{sharedBehaviors:{rtb:function(){return{createDisplayImpression:function(e,t,n){t={id:1,banner:{w:e=Number(e),h:t=Number(t)}};return bouncex.gbi2._compose(t,n)},createVideoImpression:function(e,t,n){var i={id:1,video:{mimes:["video/mp4","application/javascript"],minduration:3,maxduration:150,protocols:[2,3,5,6],linearity:1,api:[1,2],startdelay:0,placement:"overlay"===this.deployment?5:4,playbackmethod:[2]}};return e&&(i.video.w=Number(e)),t&&(i.video.h=Number(t)),bouncex.gbi2._compose(i,n)},getExtraIds:function(){var e=window.bouncex.gbi.deviceOptedStatus;return e?[{source:"bxid",uids:[{id:e,atype:1}]}]:[]}}}},aqbx:function(e){return new a.SSP_Request(e,{init:function(){this.startTime=(0,u.getTimeMs)(),this.done();var n,e=bouncex.campaigns[this.campaignId].gbi.placements[this.placementId].override_content;e&&"vast-url"===e.type?(e={url:e.value,complete:function(e,t){n.handleResponse(e,t),n.done()}},(n=this).fetch(e)):this.handleResponse()},handleResponse:function(e,t){var n=bouncex.campaigns[this.campaignId],i=null;"success"===t&&e&&(i=e.responseText);i=bouncex.gbi2._createBid({provider:"aqbx",campaignId:this.campaignId,placementId:this.placementId,adUnitId:this.adUnitId,price:0,adHtml:this.getDisplayHtml(this.width,this.height),vastData:this.getVastXml(i),arrivalTime:this.endTime});n.gbi.bids.push(i),bouncex.gbi2.log(this.campaignId,"bid simulated for force testing")},getDisplayHtml:function(e,t){var n=bouncex.campaigns[this.campaignId].gbi.placements[this.placementId].override_content;return n&&"html"===n.type?n.value:'<a><img src="https://'+bouncex.website.biu+"/assets/global/images/pub/demo"+e+"x"+t+'.gif" width="'+e+'" height="'+t+'"/></a>'},getVastXml:function(e){var t=bouncex.campaigns[this.campaignId].gbi.placements[this.placementId].override_content;return e||(t&&"vast-xml"===t.type?t.value:'<VAST version="2.0"><Ad><InLine><AdSystem>Acudeo Compatible</AdSystem><AdTitle>VAST 2.0 AQBX</AdTitle><Description>VAST 2.0 AQBX</Description><Creatives><Creative><Linear><Duration>00:00:21</Duration><MediaFiles><MediaFile delivery="progressive" type="video/mp4" bitrate="500" width="400" height="300" scalable="true" maintainAspectRatio="true">https://'+bouncex.website.biu+"/assets/global/videos/pub/demo/ads_demo_video.mp4</MediaFile></MediaFiles></Linear></Creative></Creatives></InLine></Ad></VAST>")}})},perf:function(e){return new a.SSP_Request(e,{provider:"perf",fetch:function(e){this.startTime=(0,u.getTimeMs)(),this.request=jQuery.ajax(e)},init:function(){var n=this,e={url:bouncex.gbi2._getProviderConfig("perf","endpoint"),data:n.getRequestData(),complete:function(e,t){n.handleResponse(e,t),n.done()}};this.fetch(e)},getRequestData:function(){return{bxid:bouncex.dg.softID||"none",w:this.width,h:this.height}},handleResponse:function(e,t){var n=bouncex.campaigns[this.campaignId],i=bouncex.gbi2._constants.bidEvents,o=i.error,a={partner:"perf",deployment:this.deployment||"unknown",requested_ad_units:this.width+"x"+this.height,request_timestamp:this.startTime,deal_id:"NA",price:"NA",auction_number:n.gbi.auctionCount,ad_unit_id:this.adUnitId},r=e.responseJSON;200===e.status?r&&r.adHtml?(o=i.fill,bouncex.gbi2.log(this.campaignId,"placement #"+this.placementId+" received a bid from performance ads"),r=bouncex.gbi2._createBid({provider:"perf",campaignId:this.campaignId,placementId:this.placementId,adUnitId:this.adUnitId,adHtml:r.adHtml,arrivalTime:this.endTime,targeting:r.targeting}),n.gbi.bids.push(r)):o=i.none:0===e.status&&(o=i.cancelled),this.reportResult(o,a)}})},bsw:function(e){return new s.SSP_BSW_Request(e)},index:function(e){if(a.default.CONSOLIDATE_BIDS)return new c.SSP_INDEX_Request(e);var t=bouncex.gbi2._requestIndex.sharedBehaviors.rtb;return new a.SSP_Request(e,t(),{provider:"index",init:function(){var e=this.getRequestData(),n=this,t=bouncex.gbi2._getProviderConfig("index",bouncex.campaigns[this.campaignId].qbxtest?"qa_site_id":"s"),e={url:bouncex.ssl?"https://as-sec.casalemedia.com/cygnus":"http://as.casalemedia.com/cygnus",data:{v:"7",cb:(0,u.getTimeMs)(),s:t,r:bouncex.stringify(e)},dataType:"text",contentType:"application/x-www-form-urlencoded",global:!1,crossDomain:!0,xhrFields:{withCredentials:!0},timeout:5e3,complete:function(e,t){n.handleResponse(e,t),n.done()}};"video"===this.type&&(e.data.v="8.8",e.data.fn="jsonp"),this.fetch(e)},getRequestData:function(){var e,t=bouncex.campaigns[this.campaignId],n=document.location.protocol+"//"+document.location.hostname+document.location.pathname,i=bouncex.state.mobile?"mobile":"desktop",i=bouncex.updateQS(n,"deployment",t.type,"device",i);return"display"==this.type?e=this.createDisplayImpression(this.width,this.height):"video"==this.type&&((e=this.createVideoImpression(this.width,this.height)).video.api=[1,2]),{id:(0,u.getTime2)(),imp:[e],site:{page:i,ref:bouncex.referrer,mobile:bouncex.state.mobile?1:0},source:{pchain:bouncex.gbi2._integrations.tag.generateId(),ext:{schain:bouncex.gbi2.schainObject()}}}},handleResponse:function(e,t){var n,i,o,a,r=bouncex.campaigns[this.campaignId],s=bouncex.gbi2._constants.bidEvents,c=s.error,u={partner:"index",partner_site_id:bouncex.gbi2._getProviderConfig("index","s"),deployment:this.deployment||"unknown",requested_ad_units:"display"===this.type?this.width+"x"+this.height:"video",request_timestamp:this.startTime,deal_id:"NA",price:"NA",auction_number:r.gbi.auctionCount,ad_unit_id:this.adUnitId};"success"===t&&200===e.status?(n=this.getBidFromResponse(e.responseText))?(c=s.fill,bouncex.gbi2.log(this.campaignId,"placement #"+this.placementId+" received a bid from index exchange"),a=n.ext&&n.ext.dealid,i=n.ext&&n.ext.pricelevel,o=0,a&&(u.deal_id=a),i&&(o=this.convertPrice(n.ext.pricelevel,a),u.price=bouncex.gbi2._getReportablePrice(o)),a=bouncex.gbi2._createBid({provider:"index",campaignId:this.campaignId,placementId:this.placementId,adUnitId:this.adUnitId,price:Number(o),adHtml:n.adm,vastData:n.ext&&n.ext.vasturl,dealId:a,arrivalTime:this.endTime}),r.gbi.bids.push(a)):c=s.none:"success"!==t||e.responseText?0===e.status&&(c=s.cancelled):c=s.empty,this.reportResult(c,u)},getBidFromResponse:function(e){try{var t=e.substring(e.indexOf("(")+1,e.lastIndexOf(")")),n=bouncex.parseJSON(t);return n.seatbid&&n.seatbid[0]&&n.seatbid[0].bid&&n.seatbid[0].bid[0]}catch(e){return!1}},convertPrice:function(e,t){var n=e.length-2,e=e.split("");e.splice(n,0,".");e=e.join("").replace(/[^0-9.]/g,"");return(t?Number(e):Number(e)/.85).toFixed(5)}})},pbm:function(e){var t=bouncex.gbi2._requestIndex.sharedBehaviors.rtb;return new a.SSP_Request(e,t(),{provider:"pbm",init:function(){var e=this.getRequestData(),n=this,e={url:document.location.protocol+"//"+bouncex.gbi2._getProviderConfig("pbm","endpoint"),data:bouncex.stringify(e),method:"POST",type:"POST",dataType:"json",timeout:5e3,complete:function(e,t){n.handleResponse(e,t),n.done()}};this.fetch(e)},getRequestData:function(){var e=bouncex.state.mobile?"mobile_id":"desktop_id";bouncex.campaigns[this.campaignId].qbxtest&&(e="qa_site_id"),bouncex.campaigns[this.campaignId];var t,n=bouncex.cookie.vid+"_"+bouncex.cookie.sid,i=bouncex.gbi2._getProviderConfig("pbm",e),o=this.getTagId(i,this.placementId),e=bouncex.gbi2._integrations,o={id:(0,u.getTimeMs)().toString(),secure:bouncex.ssl?1:0,tagid:o};return"display"===this.type?t=this.createDisplayImpression(this.width,this.height,o):"video"===this.type&&(t=this.createVideoImpression(this.width,this.height,o)),{id:n,site:{id:i,name:window.location.hostname,ref:decodeURIComponent(bouncex.referrer),page:decodeURIComponent(bouncex.calling_url),publisher:{id:bouncex.gbi2._getProviderConfig("pbm","publisher_id")}},device:{ua:navigator.userAgent,ip:bouncex.state.vip},imp:[t],source:{pchain:e.tag.generateId(),ext:{schain:bouncex.gbi2.schainObject(n)}},user:{eids:this.getExtraIds()},at:1,tmax:200}},handleResponse:function(e,t){var n=bouncex.campaigns[this.campaignId],i=bouncex.gbi2._constants.bidEvents,o=i.error,a=bouncex.state.mobile?"mobile_id":"desktop_id";bouncex.campaigns[this.campaignId].qbxtest&&(a="qa_site_id");var r={partner:"pbm",partner_site_id:bouncex.gbi2._getProviderConfig("pbm",a),deployment:this.deployment||"unknown",requested_ad_units:"display"===this.type?this.width+"x"+this.height:"video",request_timestamp:this.startTime,price:"NA",deal_id:"NA",auction_number:n.gbi.auctionCount,ad_unit_id:this.adUnitId};"success"===t&&200===e.status?(a=this.getBidFromResponse(e.responseText))?(o=i.fill,bouncex.gbi2.log(this.campaignId,"placement #"+this.placementId+" received a bid from pubmatic"),a.dealid&&(r.deal_id=a.dealid),a.price&&(r.price=bouncex.gbi2._getReportablePrice(a.price)),a=bouncex.gbi2._createBid({provider:"pbm",campaignId:this.campaignId,placementId:this.placementId,adUnitId:this.adUnitId,price:a.price,adHtml:a.adm,vastData:a.adm,dealId:a.dealid,arrivalTime:this.endTime}),n.gbi.bids.push(a)):o=i.none:"nocontent"!==t&&"success"!==t||204!==e.status?0===e.status&&(o=i.cancelled):o=i.empty,this.reportResult(o,r)},getBidFromResponse:function(e){try{var t=bouncex.parseJSON(e);return t.seatbid&&t.seatbid[0]&&t.seatbid[0].bid&&t.seatbid[0].bid[0]}catch(e){return!1}},getTagId:function(e,t){t=bouncex.campaigns[this.campaignId].gbi.placements[t];return t&&t.deployment?{overlay:"Overlay",masthead:"Masthead",endcap:"End_Cap",encore:"Encore",middleofarticle:"Middle_of_Article",skyline:"Skyline",infeed:"Infeed",floater:"Floater"}[t.deployment]+"_"+e:""}})}},_reportWinningBids:function(t,e){var n=bouncex.campaigns[t],i=this._constants.bidEvents.selected,o=[];e.forEach(function(e){o.push(this._selectWinningBid(t,e))},this);n={auction_number:n.gbi.auctionCount,bids:JSON.stringify(o)};this.report(t,i,n)},_selectWinningBid:function(e,t){var n=bouncex.campaigns[e],i=n.gbi.placements[t.placementId];return this.log(e,"selecting ".concat(i.mediaType," bid from ").concat(t.provider)),{media_type:i.mediaType,partner:t.provider,deployment:i.deployment,deal_id:t.dealId||"NA",price:bouncex.gbi2._getReportablePrice(t.price),auction_number:n.gbi.auctionCount,ad_unit_id:t.adUnitId}},_setAuctionTimeout:function(e){var t=this._constants.auctionDelayInMilliseconds,n=this;(0,u.setTimeout2)(function(){0<bouncex.campaigns[e].gbi.bids.length||n._allRequestsAreComplete(e)?(n.log(e,"one or more bids received, or all requests have resolved; ending wait period"),n._endAllRequests(e),n._initAuction(e)):(n.log(e,"no bids after first wait period; some requests still pending; trying again"),(0,u.setTimeout2)(function(){n.log(e,"ending wait period"),n._endAllRequests(e),n._initAuction(e)},t))},t)},hasSuppressedLineItem:function(){return i.default.hasSuppressedLineItem()},shouldDfpPreventShowing:function(e){return this.isDfpLoaded()?!!this.hasSuppressedLineItem()&&(this.log(e,"GAM Suppressed Lineitem on page",!0),!0):(this.log(e,"GAM not loaded",!0),!0)},canShowPubCampaign:function(e,t,n){var i=bouncex.campaigns[t];if(!this._isForceTest(t)){if(this._exceedsFrequencyCap())return!1;if(n&&this.shouldDfpPreventShowing(t))return!1}if(i.dynamic_anchor){if(this._customizations.anchor.updateDynamicAnchor(t),0===i.visibleAnchors.length)return this.log(t,"dynamic anchor - no visible anchors",!0),!1;if(!this._customizations.anchor.passesViewabilityTest(t))return this.log(t,"dynamic anchor - fails visibility test",!0),!1}if(i.trigger&&i.winningBid)return e===i.trigger||i.activationBid(e)===i.winningBid;n=this.readyCampaignAd(e,t);return this.tryPop(t,e),!(i.failed||(i.gbi.ready?!i.trypopTriggered||!n||(this.log(t,"passes canShowPubCampaign criteria"),0):(this.log(t,"gbi.ready is false",!0),1)))},readyCampaignAd:function(e,t){var n=bouncex.campaigns[t],e=n.activationBid(e);return!!e&&(e!==n.winningBid&&(n.obj1&&(n.obj1.add(n.obj2).remove(),delete n.video,delete n.gbi.isVideo),this._activatePlacement(t,e)),!0)},error:function(e,t){this.log(e,t,!0)},getDeploymentType:function(e){return this._getDeploymentType(e)},getFailedDeployments:function(){return this._failedDeployments},initCampaign:function(e){this.log(e,"initializing campaign");var t=bouncex.campaigns[e];if(t.adformats=t.winningBid=null,t.gbi.auctionCount?t.gbi.auctionCount++:t.gbi.auctionCount=1,this.log(e,"initCampaign run #".concat(t.gbi.auctionCount)),13<t.gbi.auctionCount&&this._failCampaign(e),(0,u.isMissingTarget)(t))return this.error(e,"no anchor found"),this._failCampaign(e);t.activated||(this.report(e,"eligible"),t.listeners=new u.EventListeners,(0,u.event_js_eval)(e,"preactivation"),this.log(e,"activating behavioral triggers"),this._activateBehavioralTriggers(e),t.activated=!0),this._initRequests(e)},syncUsers:function(){Object.keys(bouncex.website.sspConfig||{}).forEach(function(e){"function"==typeof this._userSyncRequests[e]&&this._userSyncRequests[e]()},this)},initDfp:function(){i.default.init()},isDfpLoaded:function(){return i.default.getDfpIsLoaded()},getDfpEndPageViewEvent:function(){return i.default.getDfpEndPageViewEvent()},getDfpLineItemIds:function(){return i.default.lineItems.getAll()},handleImpression:function(e){this._adjustPosition(e),this._incrementImpressionCounters()},log:function(e,t,n){e={group:"gbi",message:t,campaignId:e};n?u.Logger.error(e):u.Logger.info(e)},report:function(e,t,n){if(0===t.indexOf("bid_")&&bouncex.vars.block_bid_events)return!1;var i=bouncex.campaigns[e],o=(n=n||{}).partner||i.winningBid&&i.winningBid.provider;switch(o?this.log(e,"provider ".concat(o.toUpperCase(),' reporting event "').concat(t,'"')):this.log(e,'reporting event "'+t+'"'),t){case"pop":var a=i.winningBid;n.ad_unit_id=i.activeAdUnitId||0,a?(n.targeting="perf"===a.provider?a.targeting:"NA",n.partner=a.provider,n.deal_id=a.dealId,n.price=this._getReportablePrice(a.price),n.deployment=this._getDeploymentType(e),n.auction_number=i.gbi.auctionCount):this.error(e,'unable to find bid data to report on "pop"');break;case"trypop":n.ad_units=this._getAdUnitIds(e).join(",");break;case"click":n.value=n.value||"nonad";break;case"eligible":n.ad_units=this._getAdUnitIds(e).join(",")}n.source="ads",(0,u.buildReport)(e,t,n)},tryPop:function(e,t){var n=bouncex.campaigns[e];if(!n.trypopTriggered){if("overlay"!==this._getDeploymentType(e)&&!n.dynamic_anchor){var i=(0,u.parseSiteElementSelector)(n.callout_t);if(!i||!jQuery(i).length)return}this.report(e,"trypop",{activation:t}),n.trypopTriggered=!0}},schainObject:function(e){var t,n={ver:"1.0",complete:1,nodes:[{asi:"wunderkind.co",sid:bouncex.website.id+"",hp:1}]};return e&&((t=n.nodes[0]).rid=e,t.name=bouncex.website.name,t.domain=bouncex.website.domain),n},schainObjectString:function(){var e=this.schainObject();return[e.ver,e.complete+"!"+e.nodes[0].asi,e.nodes[0].sid,e.nodes[0].hp].map(encodeURIComponent).join(",")}};t.default=n},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=c(n(6)),o=c(n(17)),a=c(n(8)),r=c(n(1)),s=n(2);function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var d=!1,l="unsent",p=(n=[{key:"clear",value:function(){this._lineItems=[],d=!1}},{key:"count",value:function(){return this._lineItems.length}},{key:"add",value:function(e){isNaN(Number(e))||Number(e)<=0||this._lineItems.push(e)}},{key:"getAll",value:function(){return this._lineItems}},{key:"formatAll",value:function(e){return this._lineItems.join(e=e||",")}},{key:"collectFromPage",value:function(){window.googletag&&"function"==typeof window.googletag.pubads&&window.googletag.apiReady&&window.googletag.pubadsReady&&(window.googletag.pubads().getSlots().forEach(function(e){var t=e.getResponseInformation();if(t){e=t.lineItemId;if("number"!=typeof t.lineItemId){if("number"!=typeof t.sourceAgnosticLineItemId)return;e=t.sourceAgnosticLineItemId}-1<this.getAll().indexOf(e)||this.add(e)}},this),0<this.getAll().length&&(v("dfp ids found: ".concat(p.formatAll(", "))),d=!0))}}],u(b.prototype,n),new b);function b(){!function(e){if(!(e instanceof b))throw new TypeError("Cannot call a class as a function")}(this),this._lineItems=[]}function g(){return"https://dfp.bouncex.net/pub/".concat(bouncex.website.id,"?li=").concat(p.formatAll("|"))}function m(){return!d||!!bouncex.website.gbi.rblocks&&0<p.getAll().filter(function(e){return-1!==bouncex.website.gbi.rblocks.indexOf(e)}).length}function h(){a.default.apply({type:"canary",liveTraffic:10,internal:!0},function(){i.default.get({url:g(),error:function(){l="failure"},success:function(){l="success"}})})}function f(){if(d)return s.BxInterval.stopTask("dfp_detection"),void v("stopped dfp interval");p.collectFromPage(),d&&0<p.getAll().length&&(h(),o.default.reload())}function x(){d=!0,v("dfp max attempts")}function v(e){r.default.info({group:"dfp",message:e,color:"#ffa500"})}n={lineItems:p,getRequestUrl:g,report:h,initDetection:f,init:function(){s.BxInterval.addTask(f,30,"dfp_detection",x)},onFailure:x,getDfpEndPageViewEvent:function(){var e,t={line_item_id:p.formatAll(","),dfp_status:"pending",dfp_report_status:l,dfp_suppression_causes:""};return d&&(t.dfp_status="allowed",m())&&(t.dfp_status="suppressed",e=p.getAll().filter(function(e){return-1!==bouncex.website.gbi.rblocks.indexOf(e)}),t.dfp_suppression_causes=e.join(",")),t},getDfpIsLoaded:function(){return d},hasSuppressedLineItem:m};t.default=n},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var i={childList:!0,subtree:!0,attributes:!0,characterData:!0},o={FrameWatcher:{lastChanged:null,loadComplete:!1,loadFailed:!1,frameList:null,frameElement:null,startTime:null,completeTime:null,loadDelay:null},__FrameWatcher:{id:null,lastChanged:null,creative:null,loaded:!1,blocked:!1,failed:!1,startTime:null,completeTime:null,frameElement:null,childFrameList:null},__FrameWatcher__PropertyDescriptors:{document:{enumerable:!1,writable:!0},outerFrame:{enumerable:!1,writable:!0},parentFrame:{enumerable:!1,writable:!0},__innerFrames:{enumerable:!1,writable:!0}}};function a(e){if(!(this instanceof a))return new a(e);Object.assign(this,o.FrameWatcher),this.__init(),e&&(this.frameElement=e,this.watch(e))}function r(e,t,n){Object.assign(this,o.__FrameWatcher),Object.defineProperties(this,o.__FrameWatcher__PropertyDescriptors),this.frameElement=t,this.outerFrame=e,this.parentFrame=n,this.id=e.frameList.length+1,this.__init()}a.prototype={__init:function(){this.frameList=[],this.startTime=new Date,this.__loadCompleteEvent=new CustomEvent("loadComplete.bx",{bubbles:!1,bxFrameWatcher:this}),this.__loadSuccessEvent=new CustomEvent("loadSuccess.bx",{bubbles:!1,bxFrameWatcher:this}),this.__adInterventionEvent=new CustomEvent("adIntervention.bx",{bubbles:!1,bxFrameWatcher:this}),this.__checkLoadCompleteInterval=setInterval(this.checkLoadComplete.bind(this),1e3)},touch:function(){this.lastChanged=new Date},watch:function(e,t){t=new r(this,e,t);return e.dataset.bxFrameWatcherId=t.id=this.frameList.push(t),t},checkLoadComplete:function(){if(this.loadComplete)return this.__loadComplete();var e=this.__checkLoadStatus(),t=this.lastChanged&&new Date-this.lastChanged;(e.loadComplete||e.domComplete&&1e3<=t)&&this.__loadComplete(e.loadFailed||e.loadBlocked)},__checkLoadStatus:function(){var n=0,i={count:0,pending:!1,loaded:!1,blocked:!1,failed:!1},o={count:0,pending:!1,loaded:!1,blocked:!1,failed:!1};this.frameList.forEach(function(e){var t=e.creative?o:i;t.count++,e.creativeLoaded()?t.loaded=!0:(t[(e.failed?"failed":e.isBlocked()&&"blocked")||e.loaded&&"loaded"||"pending"]=!0,n+=!e.domComplete())});var e=0<o.count,t=e?o:i;return{loadFailed:t.failed&&(e||!t.pending||!n),loadBlocked:t.blocked,loadComplete:t.loaded&&!t.pending,domComplete:t.count&&!n}},__loadComplete:function(e){this.loadComplete||(this.loadComplete=!0,this.loadFailed=!!e,this.completeTime=new Date,this.frameList[0]&&this.frameList[0].loaded&&(this.startTime=this.frameList[0].startTime),this.loadDelay=this.completeTime-this.startTime,setTimeout(this.dispatchEvent.bind(this),0,this.__loadCompleteEvent),this.loadFailed||setTimeout(this.dispatchEvent.bind(this),0,this.__loadSuccessEvent)),this.__cleanup()},__cleanup:function(){this.loadComplete=!0,this.frameList.forEach(function(e){e.__cleanup()});try{this.__checkLoadCompleteInterval&&clearInterval(this.__checkLoadCompleteInterval)}catch(e){}this.__checkLoadCompleteInterval=null},get loadSucceeded(){return this.loadComplete&&!this.loadFailed},addEventListener:function(){return this.frameElement.addEventListener.apply(this.frameElement,arguments)},removeEventListener:function(){return this.frameElement.removeEventListener.apply(this.frameElement,arguments)},dispatchEvent:function(){return this.frameElement.dispatchEvent.apply(this.frameElement,arguments)},reportAdIntervention:function(e,t,n){this.intervention||(this.intervention={frame:e,reports:t},this.dispatchEvent(this.__adInterventionEvent),this.__loadComplete(!0))}},r.prototype={__init:function(){this.childFrameList=[],this.__mutationObserver=new MutationObserver(this.touch.bind(this));var e=this.ready.bind(this),t=this.onLoadError.bind(this);this.frameElement.addEventListener("load",e,!1),this.frameElement.addEventListener("error",t,!1),this.__watchFrameAssetsInterval=setInterval(this.watchFrameAssets.bind(this),100),e()},__init_document:function(){var t,e;this.document=this.frameElement.contentDocument,this.startTime=new Date,this.loaded=!1,this.blocked=!1,this.failed=!1,this.__childFrameCount=0,this.__mutationObserver.disconnect(),this.document?(this.__mutationObserver.observe(this.document,i),this.__innerFrames=this.document.getElementsByTagName("iframe"),t=new RegExp(/^(https?:|)\/\//i),e=function(e){!this.creative&&"IMG"!==e.target.tagName&&e.target.src&&t.test(e.target.src)&&this.onLoadError()}.bind(this),this.document.addEventListener("error",e,!0),this.listenAdIntervention()):this.__innerFrames=null,this.touch()},ready:function(e){if(this.loadComplete)return!0;e?(this.touch(),this.document!==this.frameElement.contentDocument?this.__init_document():this.listenAdIntervention(),this.document||this.onFrameLoaded()):this.__init_document(),this.watchFrameAssets()},domComplete:function(){return!(!this.loaded&&!this.loadComplete)||(this.creative?this.failed||this.creativeLoaded():this.document?"complete"===this.document.readyState:this.parentFrame?this.parentFrame.domComplete():"complete"===this.frameElement.ownerDocument.readyState)},touch:function(){this.creative||(this.__hasChanged=!0,this.lastChanged=new Date,this.outerFrame.touch())},watch:function(e){e=this.outerFrame.watch(e,this);return this.childFrameList.push(e),e},watchFrameAssets:function(){if(this.loadComplete)return this.onFrameLoaded();this.document!==this.frameElement.contentDocument&&this.__init_document(),this.__hasChanged&&!this.getCreative()&&this.watchInnerFrames(),this.loaded||this.checkFrameLoaded(),this.__hasChanged=!1},checkFrameLoaded:function(){!this.domComplete()||this.lastChanged<=new Date-100&&this.onFrameLoaded()},getCreative:function(){if(this.creative)return this.creative;var e=this.getCeltraCreative()||this.getVideoCreative();return e&&this.watchCreative(e)},watchCreative:function(e){return this.creative=e,this.failed=!1,this.loaded=this.creativeLoaded(),this.loaded?this.onFrameLoaded():this.listenCreativeLoaded(),e},getCeltraCreative:function(){if(this.document&&this.frameElement.contentWindow&&this.frameElement.contentWindow.celtra){var e=this.document.querySelectorAll(".celtra-ad-v3, .celtra-ad-v4")[0];if(e&&e.celtra)return e}return null},getVideoCreative:function(){var e=this.document?this.document.getElementsByTagName("VIDEO")[0]:"VIDEO"===this.frameElement.tagName&&this.frameElement;return e?{video:e}:null},listenCreativeLoaded:function(){this.creative.celtra?(this.creative.addEventListener("celtraLoaded",this.onFrameLoaded.bind(this),!1),this.creative.addEventListener("celtraError",this.onLoadError.bind(this),!1)):this.creative.video&&(this.creative.video.addEventListener("loadstart",this.onLoadStarted.bind(this),!1),this.creative.video.addEventListener("loadeddata",this.onFrameLoaded.bind(this),!1),this.creative.video.addEventListener("error",this.onLoadError.bind(this),!1))},creativeLoaded:function(){if(this.failed||!this.creative)return!1;if(this.creative.celtra)return this.creative.celtra.loaded;if(this.creative.video){var e=this.creative.video;return e.src?e.readyState&&1<e.readyState:0<e.buffered.length}return!1},watchInnerFrames:function(){var e=this.document&&this.__innerFrames;if(e&&e.length!==this.__childFrameCount){this.__childFrameCount=e.length;for(var t=0;t<e.length;t++){var n=e[t];n.dataset.bxFrameWatcherId||this.watch(n)}}},isBlocked:function(){return!0!==this.blocked&&this.document?!!this.document.querySelector("div.GoogleActiveViewClass > div[style*=iVBORw0KGgoAAAANSUhEUgAAADoAAAA6CAYAAAGWvHq], div.GoogleActiveViewElement > div[style*=iVBORw0KGgoAAAANSUhEUgAAADoAAAA6CAYAAAGWvHq]")&&(this.blocked=!0):this.blocked},onFrameLoaded:function(){return setTimeout(this.outerFrame.checkLoadComplete.bind(this.outerFrame),0),this.completeTime=new Date,this.loaded=!0},onLoadError:function(){this.failed=!0,this.domComplete()&&setTimeout(this.outerFrame.checkLoadComplete.bind(this.outerFrame),0)},onLoadStarted:function(){return this.loadComplete||(this.startTime=new Date),!0},get loadComplete(){return this.outerFrame.loadComplete},__cleanup:function(){try{this.__watchFrameAssetsInterval&&clearInterval(this.__watchFrameAssetsInterval),this.__mutationObserver&&this.__mutationObserver.disconnect()}catch(e){}this.loaded=this.loadComplete||!this.document,this.__watchFrameAssetsInterval=null},listenAdIntervention:function(){var e,t,n,i=this.frameElement.contentDocument&&this.frameElement.contentWindow;i&&i.ReportingObserver&&(e=i.ReportingObserver,t=this.reportAdIntervention.bind(this),(n=new e(t,{types:["intervention"]})).observe(),i.addEventListener("unload",function(){var e=n.takeRecords();t(e,n)},!0))},reportAdIntervention:function(e,t){if(!this.intervention&&e&&e.length)return this.intervention=e,this.outerFrame.reportAdIntervention(this,e,t)}}},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a,t.Auction=c;var i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n,i,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n]);return o.default=e,t&&t.set(e,o),o}(n(3)),t=n(9),n=n(10);function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}var o={aqbx:i.SSP_Request,perf:i.SSP_Request,bsw:t.SSP_BSW_Request,index:i.default.CONSOLIDATE_BIDS?n.SSP_INDEX_Request:i.SSP_Request,pbm:i.SSP_Request};function a(e){this.__init(e||{})}function c(e,t){this.auctionHandler=e,this.campaigns=t,this.__init()}a.impid=0,a.SSP_factory=function(e,t){var n=o[e],t=new(n&&n.__SSP_Class||i.default)(t);return t.provider=e,n&&(t.__Request_Class=n||i.SSP_Request),t},Object.assign(a.prototype,{activeAuction:null,auctions:null,auctionTimeout:null,auctionCheckpoint:null,__init:function(e){this.auctions=[],this.auctionTimeout=e.auctionTimeout||null,this.auctionCheckpoint=e.auctionCheckpoint||null},getOrCreateAuction:function(){return null===this.activeAuction||this.activeAuction.checkBidRequestsDone()?this.createAndSendNewAuction():this.activeAuction},createAndSendNewAuction:function(){var e=this.createNewAuction();return null!==e&&setTimeout(e.sendBidRequests.bind(e),100),e},createNewAuction:function(){var e=this.getAuctionableCampaigns();return Object.keys(e).length?(this.activeAuction=new c(this,e),this.auctions.push(this.activeAuction),this.activeAuction):null},getAuctionableCampaigns:function(){var e,t={};for(e in bouncex.campaigns){var n=bouncex.campaigns[e];n.isGBI2&&n.isReadyForAuction(!0)&&(t[e]=n)}return t}}),Object.assign(c.prototype,{campaigns:null,providerCampaigns:null,bidRequests:null,SSPList:null,startTime:null,endTime:null,durationTime:null,__init:function(){this.SSPList={}},__initBidRequests:function(){return null!==this.campaigns&&this.__initCampaigns()&&(this.providerCampaigns=this.getProviderCampaigns(),this.bidRequests=this.createBidRequests()),this.bidRequests&&0<Object.keys(this.bidRequests).length},__initCampaigns:function(){for(var e in this.campaigns){var t=this.campaigns[e];t.isReadyForAuction()?this.__initCampaign(t):delete this.campaigns[e]}return 0<Object.keys(this.campaigns).length},__initCampaign:function(e){e.gbi.hasBegunAuction=!0,e.gbi.bids=[],e.gbi.requests=[],e.adformats=null,e.winningBid=null},__initSSP:function(e,t){t={auction:this,campaign_ids:Object.keys(t),campaign_placement_ids:t};return this.SSPList[e]=a.SSP_factory(e,t)},getProviderCampaigns:function(){var e,t={};for(e in this.campaigns){var n,i=this.campaigns[e].getProviders();for(n in i)(t[n]||(t[n]={}))[e]=i[n]}return t},createBidRequests:function(){var e,t={};for(e in this.providerCampaigns){var n=this.providerCampaigns[e],i=this.__initSSP(e,n),o=i.createBidRequests();t[e]={ssp:i,campaign_placement_ids:n,requests:o}}return t},sendBidRequests:function(){var e=this.auctionHandler.auctionTimeout,t=this.auctionHandler.auctionCheckpoint;if(null===this.startTime){if(this.startTime=new Date,!this.__initBidRequests())return this.failed=!0,void this.__bidRequestsDone();Object.values(this.bidRequests).forEach(function(e){e.ssp.sendBidRequests(e.requests),e.timeSent=new Date}),null!==e&&setTimeout(this.__timeout.bind(this),e),null!==t&&setTimeout(this.__checkpoint.bind(this),t)}},getIncompleteBidRequests:function(){return Object.values(this.bidRequests).filter(function(e){return!e.ssp.checkIfDone()})},checkBidRequestsDone:function(){return null!==this.startTime&&(null!==this.endTime||null===this.bidRequests||0===this.getIncompleteBidRequests().length&&(this.__bidRequestsDone(),!0))},__timeout:function(){null===this.endTime&&this.__bidRequestsDone()},__checkpoint:function(){this.updateWinningBids()},__bidRequestsDone:function(){null===this.endTime&&(this.endTime=new Date,this.durationTime=this.endTime-this.startTime,this.updateWinningBids())},updateWinningBids:function(){for(var e in this.campaigns){e=this.campaigns[e];if(this.endTime||e.gbi.bids.length)try{this.updateCampaignWinningBids(e)}catch(e){}}},updateCampaignWinningBids:function(e){return bouncex.gbi2._initAuction(e.id),e.winningBid}}),Object.defineProperties(i.default.prototype,{auctionHandler:{writable:!0}})},function(e,t,n){function i(e,t){this.__init.apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0}),(t.default=i).db=null,i.prototype={__init:function(e,t){this.databaseName="wknd",this.version=1,this.indexedDB=e,this.onInitSuccess=t,this.__openDatabase()},__onError:function(e){},__openDatabase:function(){var e;this.isSupported()&&!i.db&&((e=this.indexedDB.open(this.databaseName,this.version)).onerror=this.__onError,e.onsuccess=this.__onconnectSuccess.bind(this),e.onupgradeneeded=this.__onupgradeneeded.bind(this))},__onconnectSuccess:function(e){i.db=e.target.result,this.onInitSuccess&&this.onInitSuccess()},__onupgradeneeded:function(e){var t=e.target.result;t.onerror=this.__onError,e.oldVersion<1&&t.createObjectStore("visits",{keyPath:"start_date"})},__performRequest:function(e,t,n){i.db&&((e=t(i.db.transaction([e],"readwrite").objectStore(e))).onsuccess=n,e.onerror=this.__onError)},isSupported:function(){var e=window.IDBObjectStore||window.webkitIDBObjectStore||window.mozIDBObjectStore||window.msIDBObjectStore,t=window.IDBIndex||window.webkitIDBIndex||window.mozIDBIndex||window.msIDBIndex;return void 0!==e&&void 0!==t&&void 0!==e.prototype.getAll&&void 0!==t.prototype.getAll&&!!this.indexedDB},deleteDatabase:function(){i.db&&(i.db.close(),i.db=null),this.isSupported()&&this.indexedDB.deleteDatabase(this.databaseName)},addVisit:function(t,e){this.__performRequest("visits",function(e){return e.add({start_date:t})},e)},getVisitsAsHoursAgoArray:function(e,o,a){function t(e){for(var t=[],n=e.target.result,i=0;i<n.length;i++)t.push(Math.floor(Math.abs((o-n[i].start_date)/3600)));a(t)}var n;e?(n=IDBKeyRange.lowerBound(e),this.__performRequest("visits",function(e){return e.getAll(n)},t)):this.__performRequest("visits",function(e){return e.getAll()},t)},getVisitsSince:function(e,t){function n(e){t(e.target.result)}var i;e?(i=IDBKeyRange.lowerBound(e),this.__performRequest("visits",function(e){return e.count(i)},n)):this.__performRequest("visits",function(e){return e.count()},n)}}},function(e,t,n){function i(e,t){this.__init.apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0}),(t.default=i).prototype={triggered:!1,__init:function(e,t){this.type=e.activation,this.campaign_id=t,this.args=this.__args(e,t),this.instrumentId=this.getUniqueInstrumentId(e,t),this.assignTrigger(e),this.register()},__args:function(e,t){return e.__args||[e.prop,e.val,t,e.prop2,e.prop3,e.prop4,e.prop5,e.prop6,e.devicetype,e.adformat]},activate:function(e){return(e.__wrapActivationFunction||e).apply(this,this.args)},trigger:function(e){var t=!this.triggered;return this.triggered=!0,e(this.getNormalizedType(),this.campaign_id,this,t)},__argExemptTypes:new Set(["bounce","manual","control","inter","back","pers"]),getUniqueInstrumentId:function(e,t){var n=e.activation;if(this.__argExemptTypes.has(n))return JSON.stringify([n,t]);t=this.__args(e,t);return JSON.stringify([n,t])},__registry:new Map,register:function(){this.__registry.set(this.instrumentId,this)},assignTrigger:function(e){return e.activationTrigger=this},getRegistered:function(e,t){if(e.activationTrigger)return e.activationTrigger;t=this.getUniqueInstrumentId(e,t),t=this.__registry.get(t);return t&&t.assignTrigger(e)},getOrCreate:function(e,t){return this.getRegistered(e,t)||new i(e,t)},getNormalizedType:function(){switch(this.type){case"iosbounce":case"mobile_bounce":case"bounce":return"bounce";default:return this.type}},criteriaFromArgs:function(e,t){return{activation:t,campaign_id:e[2],__args:e}},wrapActivationFunction:function(t,n){return Object.defineProperties(function(){var e=i.criteriaFromArgs(arguments,t);return i.getOrCreate(e,e.campaign_id).activate(n)},{name:{value:n.name||t},__wrapActivationFunction:{value:n}})}},i.getRegistered=i.prototype.getRegistered.bind(i.prototype),i.getOrCreate=i.prototype.getOrCreate.bind(i.prototype),i.criteriaFromArgs=i.prototype.criteriaFromArgs.bind(i.prototype),i.wrapActivationFunction=i.prototype.wrapActivationFunction.bind(i.prototype)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.keyboardExitHandler=o,t.default=void 0;var r=(n=n(0))&&n.__esModule?n:{default:n};function s(e,t,n,i){n.trigger(i),bouncex.campaigns[t].ad_shown&&(e.preventDefault(),jQuery("html,body").unbind("keydown.bouncex_bounce"))}function o(e,t,n,i){var o=e||window.event,a=o.key,e=["1","2","3","4","5","6","7","8","9","l","m"];r.default.getOS()===r.default.OS.MACOS?o.metaKey&&(-1<["ArrowLeft","ArrowRight","Backspace"].indexOf(a)||-1<e.indexOf(a))&&s(o,t,n,i):(o.altKey&&-1<["ArrowLeft","ArrowRight"].indexOf(a)||o.ctrlKey&&-1<e.indexOf(a))&&s(o,t,n,i)}t.default={setupKeyboardExitEventHandler:function(t,n,i,e){e("html,body","keydown.bouncex_bounce."+t,function(e){return o(e,t,n,i)},t)}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(2),i=a(n(1));function a(e){return e&&e.__esModule?e:{default:e}}a(n(0));n={_constants:{product:"sms",optInMessage:"Hit 'Send' to sign-up for automated, recurring <BrandName> mktg txts (like cart reminders) to this #, per terms.",params:{source:"sms_source",click:"sms_click",uph:"sms_uph"}},init:function(){this.initialized=!0,this._clickthrough(),this._user()},_clickthrough:function(){var n,i=bouncex.utils.url.getParam(this._constants.params.click);i&&(n=Math.floor((new Date).getTime()/1e3),bouncex.updateBounceCookie(function(e){var t=e.sms||{};t[i]=n,e.sms=t}))},_user:function(){var e=bouncex.utils.url.getParam(this._constants.params.uph);e&&(e={"user:phone_sha256":e,source:"web","user:source":"sms_clickthrough",agent:"js",channel:this._constants.product},this.report("user",e))},_getOptInSlug:function(e){return"YES-"+bouncex.website.id+"-"+e+"-"+bouncex.cookie.did},_getOptInMessage:function(){var e=bouncex.website.sms&&bouncex.website.sms.optm||this._constants.optInMessage.replace("<BrandName>",bouncex.website.brandName),e=encodeURIComponent(e+"\n");return e=bouncex.browser.android&&bouncex.browser.android<10?e.replace(/%/g,"%25"):e},_getOptInShortCode:function(){var e=bouncex.website.smsShortCodes;return e&&e.length?e[0]:"29143"},_getOptInURI:function(e){return"sms://"+this._getOptInShortCode()+"?&body="+this._getOptInMessage()+this._getOptInSlug(e)},_triggerOptIn:function(e){bouncex.close_ad(e),window.location.href=this._getOptInURI(e)},optInMobile:function(e){if(!this.initialized)return this.log(e,"sms not initialized. check that sms is enabled and required website settings are valid.",!0),!1;this.report("prompt",{campaignid:e}),(0,o.setTimeout2)(this._triggerOptIn.call(this,e),300)},report:function(e,t){var n,i={agent:"user",source:this._constants.product};for(n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);(0,o.event_stream_report)(e,i)},log:function(e,t,n){t={group:this._constants.product,campaignId:e,message:t};n?i.default.error(t):i.default.info(t)}};t.default=n},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;function o(t){var n;try{n=JSON.parse(t.responseText)}catch(e){n=t.responseText}return[n,t]}var a=(n=n(1))&&n.__esModule?n:{default:n};t.default=function(e){var t,n,i;e&&e.url&&e.type?(t=function(){},n={then:e.then||t,catch:e.catch||t,finally:e.finally||t},(i=new(window.XMLHttpRequest||ActiveXObject)("MSXML2.XMLHTTP.3.0")).onreadystatechange=function(){4===i.readyState&&(200<=i.status&&i.status<300?n.then:n.catch).apply(n,o(i))},i.onloadend=function(){n.finally.apply(n,o(i))},i.open(e.type,e.url),i.send()):a.default.error({group:"XHR Request",message:"Cancelling request; Url or type is not defined"})}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=(n=n(1))&&n.__esModule?n:{default:n};t.default={send:function(e){if(e.eventName&&e.data&&e.type){var t,n,i={conversion:{source:e.eventName,obj:e.data},event:{eventname:e.eventName,params:e.data}};if(window._shq&&window._shq.push?(t=window._shq.push.bind(_shq),n="onProcessWknd"):window._smtr&&window._smtr.push&&(t=window._smtr.push.bind(_smtr),n="onDLProcess"),i.hasOwnProperty(e.type)&&t&&n)try{t([n,i[e.type]])}catch(e){o.default.error({group:"Event Sharing Cartridge",message:e})}}}}},function(e,t,n){function o(e,t){if(!e)return!1;e={us:/^(\+?1)?\s?\(?[1-9]\d{2}\)?[-.\s]?\d{3}[-.\s]?\d{4}[-.\s]?$/.test(e),uk:/^(((\+?44\D*\d{4}|\(?0?\d{4}\)?)\D*\d{3}\D*\d{3})|((\+?44\D*\d{3}|\(?0?\d{3}\)?)\D*\d{3}\D*\d{4})|((\+?44\D*\d{2}|\(?0?\d{2}\)?)\D*\d{4}\D*\d{4}))(\s*\#(\d{3,4}))?$/.test(e)};return t?e[t]:e.us||e.uk}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={isValid:o,sanitize:function(e){var t;if("+"===(i=e.replace(/[^\d+]/g,"")).charAt(0))return i;if(/^4{2}/.test(i)&&o("+"+i,"uk"))return"+"+i;if("1"===i.charAt(0)&&o("+"+i,"us"))return"+"+i;var n=(n=null,"0"===(t=i).charAt(0)&&(n="UK"),(n=!(n=o(t,"us")?"US":n)&&bouncex.state&&bouncex.state.geo?bouncex.state.geo.country_code:!n&&window.Intl&&window.Intl.Locale?(t=Intl.DateTimeFormat().resolvedOptions().locale,new Intl.Locale(t).region):n||(["4253","2925","4188","874"].includes(bouncex.website.id)?"UK":"US"))?"US"===n?"1":"44":""),i=i.replace(/^0+/,"");return(n||!o(e,"us")||!o(e,"uk"))&&n?"+"+n+i:null},toSha256:function e(t){function n(e,t){return e>>>t|e<<32-t}for(var i,o=Math.pow,a=o(2,32),r="",s=[],c=8*t.length,u=e.h=e.h||[],d=e.k=e.k||[],l=d.length,p={},b=2;l<64;b++)if(!p[b]){for(h=0;h<313;h+=b)p[h]=b;u[l]=o(b,.5)*a|0,d[l++]=o(b,1/3)*a|0}for(t+="Â€";t.length%64-56;)t+="\0";for(h=0;h<t.length;h++){if((i=t.charCodeAt(h))>>8)return;s[h>>2]|=i<<(3-h)%4*8}for(s[s.length]=c/a|0,s[s.length]=c,i=0;i<s.length;){for(var g=s.slice(i,i+=16),m=u,u=u.slice(0,8),h=0;h<64;h++){var f=g[h-15],x=g[h-2],v=u[0],_=u[4],x=u[7]+(n(_,6)^n(_,11)^n(_,25))+(_&u[5]^~_&u[6])+d[h]+(g[h]=h<16?g[h]:g[h-16]+(n(f,7)^n(f,18)^f>>>3)+g[h-7]+(n(x,17)^n(x,19)^x>>>10)|0);(u=[x+((n(v,2)^n(v,13)^n(v,22))+(v&u[1]^v&u[2]^u[1]&u[2]))|0].concat(u))[4]=u[4]+x|0}for(h=0;h<8;h++)u[h]=u[h]+m[h]|0}for(h=0;h<8;h++)for(i=3;i+1;i--){var y=u[h]>>8*i&255;r+=(y<16?0:"")+y.toString(16)}return r}};t.default=i},function(e,t,n){n=n(2);bouncex.website&&(n.perf.times("tag"),0<bouncex.website.sd&&!bouncex.website.fbe?(0,n.setTimeout2)(n.InitSequence.preInit1.entry,bouncex.website.sd):(0,n.tryCatch)(n.InitSequence.preInit1.entry)())},function(e,t,n){n(12),n(13),n(4),n(17),n(18),n(19),n(14),n(5),n(16),n(15),n(20),n(21),n(22),n(2),n(36),n(25),n(28),n(27),n(26),n(24),n(9),n(10),n(3),n(32),n(30),n(6),n(34),n(0),n(29),n(31),n(1),n(35),n(23),n(11),n(7),n(8),e.exports=n(33)}],b={},c.m=a,c.c=b,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)c.d(n,i,function(e){return t[e]}.bind(null,i));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="",c(c.s=37)}();
