YUI.add("stencil-tooltip",function(x,t){"use strict";function e(t){this.constructor.superclass.constructor.call(this,t)}var i=null,n="D-n",y="Tooltip",r="TooltipContent",o=x.UA.ie&&x.UA.ie<7?["javascript",":false"].join(""):"about:blank",a={default:{id:i,position:"t",validPositions:"tfr tr t tl tfl rfb rb r rt rft bfl bl b br bfr lft lt l lb lfb",content:"",classes:"FancyBox Arrow Pos-a Lh-14 Z-5 Px-10 Mt-10",role:"alert",width:"150px",maxWidth:i,minWidth:i,template:"<div tabindex='-1' class='{classes}' role='{role}'><iframe src='"+o+"' aria-hidden='true' tabindex='-1' frameborder='0' class='IframeTooltip'></iframe></div>",contentClasses:"Pos-r M-0",container:i,parent:document.body,autohide:!0,arrowHeight:8,arrowWidth:14,mouseover:!1,noPosition:!1,align:i,alignNode:i,focusNode:i,nofocus:!1,scrollIntoView:!1}},A="px",l="id",C="top",E="left",c="tooltip-content-id",P={tl:"South SouthWest",tfl:"South SouthFarWest",tc:"South",tr:"South SouthEast",tfr:"South SouthFarEast",rt:"West WestNorth",rft:"West WestFarNorth",rc:"West",rb:"West WestSouth",rfb:"West WestFarSouth",br:"North NorthEast",bfr:"North NorthFarEast",bc:"North",bl:"North NorthWest",bfl:"North NorthFarWest",lb:"East EastSouth",lfb:"East EastFarSouth",lc:"East",lt:"East EastNorth",lft:"East EastFarNorth"},h=function(t,e){var o,s,i=x.Node(document.createElement("div"));return i.setAttribute("className","js-Tooltip-Wrapper Pos-r"),(o=x.Node.create(x.Lang.sub(e.template,e)).addClass(n).addClass(y)).get(l)||(s=x.stamp(o),o.set(l,s)),i.append(o),t.get("parentNode")?t.replace(i):x.one(e.parent).prepend(i),o.append(t),t.addClass(r),o},u=function(t,e){var o,s,i;return(i=t.get(l))||(i=x.stamp(t),t.set(l,i)),e=(s=(o=e.id||t.getData(c))?x.one("#"+o):s)?(i=s.get("parentNode")).hasClass("Tooltip")?i:h(s,e):(s=x.one(document.createElement("div")),o=o||x.stamp(s),s.set(l,o),h(s,e)),t.setData(c,o),e},d=function(t,e,o){var s={},i=o.one("."+r),n=i.get(l),t=t.get(l);return e.mouseover&&!o.hasAttribute("data-tooltip")&&(o.setAttribute("data-trigger","mouseenter mouseleave").setAttribute("data-tooltip",'{"target":"#'+t+'","mouseenter":{"show":{"id":"'+n+'","noPosition":true,"nofocus":'+e.nofocus+'}},"mouseleave":{"hide":{"id":"'+n+'","noPosition":true}}}').setAttribute("data-plugin","tooltip"),x.Stencil.initAll(o)),e.maxWidth&&(s.maxWidth=e.maxWidth),e.minWidth&&(s.minWidth=e.minWidth),e.width&&(s.width=e.width),i.setStyles(s).setAttribute("className",e.contentClasses+" "+r),o},f=function(t,e,o){var s=(e=e||{}).type||"default";return o&&o.type&&(0===o.type.indexOf("mouse")||0===o.type.indexOf("pointer"))&&(e.nofocus=!0),x.merge(a[s],e)},p=function(t,e,o){var s;(o=o||u(t,e)).getData("beenShown")||(d(t,e,o),this.processSources(o),o.setData("beenShown",1)),!e.noContentUpdate&&e.content&&this.setContent(o,e.content),e.noPosition?o.removeClass(n):this.position(t,o,e),e.scrollIntoView&&o.scrollIntoView(),!1===e.nofocus&&(e.autohide&&(s=x.bind(b,this,i,i,o)),e=e.focusNode?x.one(e.focusNode):o,this.focus(o,e,s)),o.one(".TooltipContent").fire("tooltip:show")},b=function(t,e,o){o=o||u(t,e),this.releaseFocus(o),o.addClass(n),o.one(".TooltipContent").fire("tooltip:hide")},T=function(t,e){var o=0;switch(t){case"l":o=e?.75:.25;break;case"t":o=.25;break;case"r":o=e?.25:.75;break;case"b":o=.75;break;case"fl":o=e?1:0;break;case"ft":o=0;break;case"fr":o=e?0:1;break;case"fb":o=1;break;default:o=.5}return o},k=function(t,e,o){var s=0;switch(t){case"fl":case"fr":case"ft":case"fb":s=(2+e/2)*("fr"===t||"fb"===t?-1:1),!o||"fr"!==t&&"fl"!==t||(s*=-1)}return s},g=function(t,e,o,s,i){var n=0,r=0,r="t"===o||"b"===o?(n=-T(s,i)*e.w,"t"===o?-e.h:t.h):(n="l"===o?-e.w:t.w,t.h/2-T(s,i)*e.h);return{x:t.x+n,y:t.y+r,w:e.w,h:e.h}},m=function(t,e){return t.left<=e.x&&t.right>=e.x+e.w&&t.top<=e.y&&t.bottom>=e.y+e.h},F=function(t){return t.substr(1)||"c"},H=function(t){return t.charAt(0)},w=function(t,e,o,s){for(var i,n,r,a=s.validPositions.split(" "),l=x.Array.indexOf(a,s.box+s.arrow),c=!1,h=!1,u=l="c"===s.arrow&&l<0?x.Array.indexOf(a,s.box):l;!c&&!h;)n=H(a[i=u]),r=F(a[i]),i=g(t,o,n,r,s.rtl),c=m(e,i),(u=(u+=1)===a.length?0:u)===l&&(h=!0);return c&&(s.box=n,s.arrow=r),{styles:s}},I=function(t,e,o,s){e={x:e.getX(),y:e.getY(),w:e.get("offsetWidth"),h:e.get("offsetHeight")},o={x:0,w:o.get("offsetWidth"),h:o.get("offsetHeight")},t=t?{right:t.getX(),left:t.getX()+t.get("offsetWidth"),height:t.get("offsetHeight"),top:t.getY()}:x.DOM.viewportRegion();return{container:t,pointAtNode:e,tooltip:o,positions:w(e,t,o,s)}};x.extend(e,x.Stencil.BasePlugin,{setContent:function(t,e){x.Stencil.getNodeList(t).each(function(t){t=t.one(".TooltipContent");"string"==typeof e?t.set("innerHTML",e):(t.set("innerHTML",""),t.appendChild(x.one(e)))},this)},position:function(t,e,o){var s,i,n,r,a,l,c,h,u=e.get("parentNode"),d="rtl"===u.getStyle("direction"),f=o.position,p=H(f),b=F(f),g=x.UA.ie&&x.UA.ie<8?0:o.arrowHeight,m=o.arrowWidth,w=o.align,N=o.alignNode,v=o.classes,S=o.container,W={},N=N&&x.one(N),S=S&&x.one(S);switch(e.setAttribute("className",v=v+" V-h "+y),p=(s=I(S,t,e,{arrow:b,box:p,validPositions:o.validPositions,rtl:d})).positions.styles.box,b=s.positions.styles.arrow,e.setAttribute("className",v+=" "+P[p+b]),a=u.getY(),r=u.getX(),l=parseInt(e.getComputedStyle("marginTop"),10),c=t.getX()-r,h=t.getY()-a,i=T(b,d),n=k(b,m,d),p){case"b":case"t":W[E]=c-s.tooltip.w*i-n+s.pointAtNode.w/2+A,W[C]="t"===p?h-s.tooltip.h-g-l+A:h+s.pointAtNode.h+g-l+A;break;case"l":case"r":W[d?"right":E]="r"===p?c+s.pointAtNode.w+g+A:c-s.tooltip.w-g+A,W[C]=N&&"t"===w?N.getY()-a-l-n+A:h+s.pointAtNode.h/2-l-s.tooltip.h*i-n+A}e.setStyles(W),e.removeClass("V-h")},show:function(t,e,o){this._node;var s=f(0,e,o);t.each(function(t){p.call(this,t,s)},this)},hide:function(t,e,o){this._node;var s=f(0,e,o);t.each(function(t){b.call(this,t,s)},this)},toggle:function(t,e,o){this._node;var s,i=f(0,e,o);t.each(function(t){((s=u(t,i)).hasClass(n)?p:b).call(this,t,i,s)},this)}},{NS:"StencilTooltip"}),x.Stencil.registerPlugin(e,"Tooltip")},"@VERSION@",{requires:["stencil-base","yui-base","dom-base","dom-screen","node-base","node-pluginhost","node-style","stencil-source"]});
