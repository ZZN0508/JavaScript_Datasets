var AjaxReq=function(){function t(e){var t="GET",n={req:null,data:null,code:200},r=null,o=new XMLHttpRequest;this.success=function(e){return o.onreadystatechange=function(){4==o.readyState&&(n.data=o.response,200==n.code&&e(n))},this},this.failed=function(e){return 500==n.code&&e(n),this};try{if(!e.url||!e.data)throw new Exception;if("GET"==(t=e.method?e.method.toUpperCase():t)){if(-1!=e.url.indexOf("?"))throw new Exception;var a,u=0;for(a in e.data)e.url+=0==u?"?"+a+"="+e.data[a]:"&"+a+"="+e.data[a],u++}else r=function(e){var t,n=[];for(t in e){var r=e[t],r=encodeURIComponent(t)+"="+encodeURIComponent(r);n.push(r)}return n.join("&").replace(/%20/g,"+")}(e.data);o.open(t,e.url,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send(r),n.req=e,n.req.method=t}catch(e){n.code=500}finally{return this}}return{request:function(e){return new t(e)}}}();
