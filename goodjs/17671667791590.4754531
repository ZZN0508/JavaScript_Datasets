(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[39],{210:function(e,t,r){"use strict";r.r(t),r.d(t,"default",function(){return i});var u=r(0),g=r.n(u),s=r(389),v=r(380),c=(e,t)=>{var{ptrt:r,userOrigin:t}=t,r=r||window.location.href,e=new URL(e);return e.searchParams.set("ptrt",r),t&&e.searchParams.set("userOrigin",t),e.toString()},b=r(52),d=r(273);function m(e,t,r,i,a,n,l){try{var o=e[n](l),s=o.value}catch(e){return r(e),0}o.done?t(s):Promise.resolve(s).then(i,a)}var U=e=>{var[{registerUrl:t,signInUrl:r,idAvailability:i,webCoreUsiModalFeature:a},n]=Object(u.useState)({registerUrl:null,signInUrl:null,idAvailability:!1,webCoreUsiModalFeature:!1}),l=Object(d.b)()["host"],s=(e=e,l=l&&!l.endsWith(".com")?".co.uk":".com","https://idcta".concat("live"===e?"":".test",".api.bbc").concat(l,"/idcta/config"));return Object(u.useEffect)(()=>{var o,e;o=function*(){var e=yield(yield Object(b.a)(s)).json(),t="GREEN"===e["id-availability"];n({registerUrl:t?e.register_url:e.unavailable_url,signInUrl:t?e.signin_url:e.unavailable_url,idAvailability:"GREEN"===e["id-availability"],webCoreUsiModalFeature:e.features.webCoreUsiModal})},e=function(){var e=this,l=arguments;return new Promise(function(t,r){var i=o.apply(e,l);function a(e){m(i,t,r,a,n,"next",e)}function n(e){m(i,t,r,a,n,"throw",e)}a(void 0)})},function(){e.apply(this,arguments)}()},[s]),{registerUrl:t,signInUrl:r,idAvailability:i,webCoreUsiModalFeature:a}},r="account-prompt",w="".concat(r,"-content-page-views"),h="".concat(r,"-last-shown-date"),p=e=>{var{env:t,hideIfServiceUnavailable:r,ptrt:i,userOrigin:a,setSignInPrompt:n}=e,{idAvailability:l,signInUrl:o,registerUrl:e,webCoreUsiModalFeature:t}=U(t);if(!o||!e||r&&(!l||!t))return null;o=c(o,{ptrt:i,userOrigin:a}),a=c(e,{ptrt:i,userOrigin:a});return g.a.createElement(s.a,{signInUrl:o,registerUrl:a,onDismiss:()=>n({show:!1})})},i=e=>{var r,i,a,{env:t,pageType:n,signInPrompt:{show:l,hideIfServiceUnavailable:o,ptrt:s,userOrigin:c},setSignInPrompt:e}=e;return r=n,i=e,a=Object(d.b)().host,Object(u.useEffect)(()=>{var e=Object(v.a)(),t=a&&a.endsWith(".com");e||t||(t=localStorage.getItem(h))&&Date.now()-new Date(Number(t)).getTime()<864e5||(e=>{var t=localStorage.getItem(w);switch(e){case"index":localStorage.setItem(w,0);break;case"content":null!==t&&localStorage.setItem(w,Number(t)+1)}return Number(localStorage.getItem(w))})(r)<3||(i({show:!0,hideIfServiceUnavailable:!0}),localStorage.setItem(h,Date.now()),localStorage.removeItem(w))},[]),Object(v.a)()||!l?null:g.a.createElement(p,{env:t,hideIfServiceUnavailable:o,ptrt:s,userOrigin:c,setSignInPrompt:e})}}}]);
