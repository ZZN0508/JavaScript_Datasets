!function(){function y(e){return"'"+e.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}function o(e,r){function a(e){return u+=e.split(/\n/).length-1,e=(e=t?e.replace(/\s+/g," ").replace(/<!--[\w\W]*?-->/g,""):e)&&$[1]+y(e)+$[2]+"\n"}function i(e){var n,t=u;return l?e=l(e,r):o&&(e=e.replace(/\n/g,function(){return"$line="+ ++u+";"})),0===e.indexOf("=")&&(n=s&&!/^=[=#]/.test(e),e=e.replace(/^=[=#]?|[\s;]*$/g,""),n?(n=e.replace(/\s*\([^\)]+\)/,""),b[n]||/^(include|print)$/.test(n)||(e="$escape("+e+")")):e="$string("+e+")",e=$[1]+e+$[2]),x((e=o?"$line="+t+";"+e:e).replace(j,"").replace(k,",").replace(T,"").replace(E,"").replace(S,"").split(W),function(e){var n;e&&!p[e]&&(n="print"===e?d:"include"===e?g:b[e]?"$utils."+e:w[e]?"$helpers."+e:"$data."+e,h+=e+"="+n+",",p[e]=!0)}),e+"\n"}var o=r.debug,n=r.openTag,c=r.closeTag,l=r.parser,t=r.compress,s=r.escape,u=1,p={$data:1,$filename:1,$utils:1,$helpers:1,$out:1,$line:1},f="".trim,$=f?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],f=f?"$out+=text;return $out;":"$out.push(text);",d="function(){var text=''.concat.apply('',arguments);"+f+"}",g="function(filename,data){data=data||$data;var text=$utils.$include(filename,data,$filename);"+f+"}",h="'use strict';var $utils=this,$helpers=$utils.$helpers,"+(o?"$line=0,":""),m=$[0],f="return new String("+$[3]+");";x(e.split(n),function(e){var n=(e=e.split(c))[0],t=e[1];1===e.length?m+=a(n):(m+=i(n),t&&(m+=a(t)))});f=h+m+f;o&&(f="try{"+f+"}catch(e){throw {filename:$filename,name:'Render Error',message:e.message,line:$line,source:"+y(e)+".split(/\\n/)[$line-1].replace(/^\\s+/,'')};}");try{var v=new Function("$data","$filename",f);return v.prototype=b,v}catch(e){throw e.temp="function anonymous($data,$filename) {"+f+"}",e}}function $(e,n){return"string"==typeof n?u(n,{filename:e}):t(e,n)}$.version="3.0.0",$.config=function(e,n){c[e]=n};var c=$.defaults={openTag:"<%",closeTag:"%>",escape:!0,cache:!0,compress:!1,parser:null},l=$.cache={};$.render=function(e,n){return u(e,n)};var t=$.renderFile=function(e,n){e=$.get(e)||s({filename:e,name:"Render Error",message:"Template not found"});return n?e(n):e};$.get=function(e){var n,t;return l[e]?t=l[e]:"object"!=typeof document||(n=document.getElementById(e))&&(n=(n.value||n.innerHTML).replace(/^\s*|\s*$/g,""),t=u(n,{filename:e})),t};function r(e,n){return"string"!=typeof e&&("number"==(n=typeof e)?e+="":e="function"==n?r(e.call(e)):""),e}function n(e){return a[e]}var a={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},i=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},b=$.utils={$helpers:{},$include:t,$string:r,$escape:function(e){return r(e).replace(/&(?![\w#]+;)|[<>"']/g,n)},$each:function(e,n){var t,r;if(i(e))for(t=0,r=e.length;t<r;t++)n.call(e,e[t],t,e);else for(t in e)n.call(e,e[t],t)}};$.helper=function(e,n){w[e]=n};var w=$.helpers=b.$helpers;$.onerror=function(e){var n,t="Template Error\n\n";for(n in e)t+="<"+n+">\n"+e[n]+"\n\n";"object"==typeof console&&console.error(t)};var s=function(e){return $.onerror(e),function(){return"{Template Error}"}},u=$.compile=function(t,r){function e(n){try{return new i(n,a)+""}catch(e){return r.debug?s(e)():(r.debug=!0,u(t,r)(n))}}for(var n in r=r||{},c)void 0===r[n]&&(r[n]=c[n]);var a=r.filename;try{var i=o(t,r)}catch(e){return e.filename=a||"anonymous",e.name="Syntax Error",s(e)}return e.prototype=i.prototype,e.toString=function(){return i.toString()},a&&r.cache&&(l[a]=e),e},x=b.$each,j=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|\s*\.\s*[$\w\.]+/g,k=/[^\w$]+/g,T=new RegExp(["\\b"+"break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined".replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),E=/^\d[^,]*|,\d[^,]*/g,S=/^,+|,+$/g,W=/^$|,+/;c.openTag="{{",c.closeTag="}}";c.parser=function(e,n){var t,r,a,i=(e=e.replace(/^\s/,"")).split(" "),o=i.shift(),c=i.join(" ");switch(o){case"if":e="if("+c+"){";break;case"else":e="}else"+(i="if"===i.shift()?" if("+i.join(" ")+")":"")+"{";break;case"/if":e="}";break;case"each":var l=i[0]||"$data";e="$each("+(l="as"!==(i[1]||"as")?"[]":l)+",function("+((i[2]||"$value")+","+(i[3]||"$index"))+"){";break;case"/each":e="});";break;case"echo":e="print("+c+");";break;case"print":case"include":e=o+"("+i.join(",")+");";break;case"!":e=c;break;default:if(/^\s*\|\s*[\w\$]/.test(c)){l=!0;0===e.indexOf("#")&&(e=e.substr(1),l=!1);for(var s=0,u=e.split("|"),p=u.length,f=u[s++];s<p;s++)t=f,r=u[s],a=void 0,r=(a=r.split(":")).shift(),a=a.join(":")||"",f="$helpers."+r+"("+t+(a=a&&", "+a)+")";e=(l?"=":"=#")+f}else e=$.helpers[o]?"=#"+o+"("+i.join(",")+");":"="+e}return e},"function"==typeof define?define("lofty/util/template/2.0/template",["require","exports","module"],function(e,n,t){t.exports=$}):"undefined"!=typeof exports?module.exports=$:this.template=$}();
