(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{823:function(e,t,i){"use strict";i.r(t);var s=i(5),a=i.n(s),n=i(454),o=i.n(n),r=i(9),d=i.n(r),c=i(27),s=i.n(c),n=i(25),p=i.n(n),r=i(15),h=i.n(r),c=i(26),n=i.n(c),l=i(22),v=i.n(l),r=i(453),c=i.n(r),r=i(475),u=i.n(r),r=i(734),m=i.n(r);function b(t,e){var i,s=Object.keys(t);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(t),e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,i)),s}function f(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?b(Object(i),!0).forEach(function(e){a()(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):b(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}var y={playertype:"html",onLoad:"getVidiblePlayer",loadingplaceholder:"1",pos:"video"},g={embeded:"cms_video_plugin_us.edit.huffpost.net",fwkeyvalues:"sponsorship=SPONSORSHIP_NAME",fwsitesection:"composer",sitesection:"news",timeline_preview_border:3,timeline_preview_shape:"rectangle"},s=(r=v.a.PureComponent,n()(w,r),s()(w,[{key:"componentDidMount",value:function(){var t,i,s=this;this.props.defer&&((t=document.createElement("script")).src=this.vdbSrc,i=!1,"function"==typeof IntersectionObserver?(this.intersectionObserver=new IntersectionObserver(function(e){!i&&0<e.length&&e.forEach(function(e){e.isIntersecting&&(i=!0,s.vidibleRef.current.appendChild(t))})},{rootMargin:"".concat(window.innerHeight,"px")}),this.intersectionObserver.observe(this.vidibleRef.current)):this.vidibleRef.current.appendChild(t))}},{key:"defaultPlayer",value:function(){var e=this.props.defer?null:v.a.createElement("script",{type:"text/javascript",src:this.vdbSrc,async:!0}),e=v.a.createElement("div",o()({ref:this.vidibleRef,className:this.vdbClass,vdb_params:this.vdbParams},this.cetDataVars),e);return this.props.addPlaceholder?v.a.createElement("div",{className:"vidible-wrapper",style:{width:"100%",height:"auto"}},v.a.createElement("div",{className:"vidible-placeholder",style:{left:"0",width:"100%",height:"0",position:"relative",paddingBottom:"56.25%"}}),e):e}},{key:"ampPlayer",value:function(){return this.pid&&this.cid&&this.vid&&this.vdbParams?v.a.createElement("amp-o2-player",{"data-pid":this.pid,"data-bcid":this.cid,"data-vid":this.vid,width:"375",height:"211","data-macros":this.vdbParams,layout:"responsive"}):""}},{key:"render",value:function(){return v.a.createElement(l.Fragment,null,this.isAmp?this.ampPlayer():this.defaultPlayer())}},{key:"pid",get:function(){var e=this.isAmp?"mobile":this.device,t=this.vidibleConfigValues||{},i=t.overrides,s=void 0===i?{}:i,i=t.whitelisted,t=void 0===i?[]:i,i=this.meta.pid;return this.options.isNative||!this.vidibleConfigValues||t.includes(i)?i:s.all||(s[this.placement]&&s[this.placement][e]?s[this.placement][e]:i)}},{key:"cid",get:function(){return this.meta.cid&&this.meta.cid.replace("5688f5c1e4b0f2c97f395156","56000e19e4b0e4e194b84b31")}},{key:"vid",get:function(){return this.meta.vid}},{key:"macros",get:function(){var e=y;return this.isAmp&&(e=f({},e,{},g)),e=f({},e,{},this.meta.macros),this.ads&&this.ads.package&&(e.fwkeyvalues="sponsorship=".concat(this.ads.package)),this.ads&&this.ads.site_and_category&&(e.fwsitesection=this.ads.site_and_category),this.noVideoAds&&(e.disableads=1),this.videoTraits&&this.videoTraits.videoTag&&(e.fwkeyvalues="sponsorship=".concat(this.videoTraits.videoTag)),this.options.sectionSlug&&(e.zone3=this.options.sectionSlug),this.options.subcategories&&(e.section=this.options.subcategories),this.options.entryId&&(e.hpid=this.options.entryId),this.options.entryTagsList&&(e.cms_tag=this.options.entryTagsList),this.options.entryId?e.page_type="bpage":e.page_type="apage",this.options.dfpKeywordParam&&(e["dfp-keyword"]=this.options.dfpKeywordParam),e}},{key:"bid",get:function(){var e=this.vidibleConfigValues||{},t=e.playlists,t=void 0===t?{}:t,e=e.whitelisted,e=void 0===e?[]:e;return this.videoTraits&&this.videoTraits.videoPlaylist?this.videoTraits.videoPlaylist:e.includes(this.meta.pid)&&"bid"in this.meta?this.meta.bid:"sectionSlug"in this.options&&this.options.sectionSlug in t?t[this.options.sectionSlug]:"default"in t?t.default:""}},{key:"vdbParams",get:function(){return u.a.stringify(m()(this.macros,function(e,t){return"m.".concat(t)}))}},{key:"vdbSrc",get:function(){return(this.bid?"https://delivery.vidible.tv/jsonp/bid=".concat(this.bid,"/pid="):"https://delivery.vidible.tv/jsonp/pid=").concat(this.pid,"/vid=").concat(this.vid,"/").concat(this.cid,".js?").concat(this.vdbParams)}},{key:"vdbClass",get:function(){var e=["vdb_player","vdb_".concat(this.pid).concat(this.cid),this.props.className];return this.options.theme&&e.push(this.options.theme),e.join(" ")}}]),w);function w(e){d()(this,w);var t=p()(this,h()(w).call(this,e)),i=e.meta,s=e.options,a=e.index,e=e.cetDataVars;return t.isAmp=!!s.isAmp,t.device=s.device,t.meta=i||{},t.ads=s.commercialVideo,t.noVideoAds=s.noVideoAds,t.options=s,t.cetDataVars=e,t.placement=s.placement||(0!==a||s.relatedMedia?"content":"top_media"),t.vidibleConfigValues=s.vidibleConfigValues,t.videoTraits=s.videoTraits,t.vidibleRef=v.a.createRef(),t}s.propTypes={className:c.a.string,index:c.a.number.isRequired,meta:c.a.shape({}),options:c.a.shape({isAmp:c.a.bool,macros:c.a.shape({}),noVideoAds:c.a.bool,theme:c.a.string}),defer:c.a.bool,addPlaceholder:c.a.bool,cetDataVars:c.a.shape({})},s.defaultProps={className:"",meta:{},options:{},defer:!1,addPlaceholder:!1,cetDataVars:{}},t.default=s}}]);
