System.register(["./chunk-vendor.js","./chunk-frameworks.js"],function(t){"use strict";var s,n,o,c,u,i,r,m;return{setters:[function(e){s=e.a,n=e.r,o=e.o,c=e.f},function(e){u=e.c,i=e.u,r=e.e,m=e.h}],execute:function(){t("h",e);let a=[];function e(e){const t=e.currentTarget.closest("form"),s=e.currentTarget.getAttribute("data-confirm-text");if(m(t)&&!confirm(s))return!1;for(const o of t.querySelectorAll("input, textarea")){const e=o;e.value=e.defaultValue,e.classList.contains("session-resumable-canceled")&&(e.classList.add("js-session-resumable"),e.classList.remove("session-resumable-canceled"))}const n=e.currentTarget.closest(".js-comment");return n&&n.classList.remove("is-comment-editing"),!0}function l(e){const t=e.querySelector("ol");if(t){t.innerHTML="";const e=a.map(e=>{const t=document.createElement("li");return t.textContent=e,t});for(const s of e)t.appendChild(s)}e.hidden=!1}s("click",".js-comment-edit-button",function(e){const t=e.currentTarget.closest(".js-comment");t.classList.add("is-comment-editing"),t.querySelector(".js-write-tab").click();const s=t.querySelector(".js-comment-field");s.focus(),c(s,"change");const n=e.currentTarget.closest(".js-dropdown-details");n&&n.removeAttribute("open")}),s("click",".js-comment-hide-button",function(e){const t=e.currentTarget.closest(".js-comment").querySelector(".js-minimize-comment");t&&t.classList.remove("d-none");const s=e.currentTarget.closest(".js-dropdown-details");s&&s.removeAttribute("open")}),s("click",".js-comment-hide-minimize-form",function(e){e.currentTarget.closest(".js-minimize-comment").classList.add("d-none")}),s("click",".js-comment-cancel-button",e),s("click",".js-cancel-issue-edit",function(e){e.currentTarget.closest(".js-details-container").querySelector(".js-comment-form-error").hidden=!0}),n(".js-comment-delete, .js-comment .js-comment-update, .js-issue-update, .js-comment-minimize, .js-comment-unminimize",function(e,t,s){const n=e.closest(".js-comment");n.classList.add("is-comment-loading");e=n.getAttribute("data-body-version");e&&s.headers.set("X-Body-Version",e)}),n(".js-comment .js-comment-update",async function(t,e){let s;const n=t.closest(".js-comment"),o=n.querySelector(".js-comment-update-error"),c=n.querySelector(".js-comment-body-error");o instanceof HTMLElement&&(o.hidden=!0),c instanceof HTMLElement&&(c.hidden=!0),a=[];try{s=await e.json()}catch(e){if(422!==e.response.status)throw e;{const t=JSON.parse(e.response.text);if(t.errors)return void(o instanceof HTMLElement&&(o.textContent="There was an error posting your comment: "+t.errors.join(", "),o.hidden=!1))}}if(s){e=s.json;e.errors&&0<e.errors.length&&(a=e.errors,l(c));const i=n.querySelector(".js-comment-body");i&&e.body&&(i.innerHTML=e.body),n.setAttribute("data-body-version",e.newBodyVersion);const r=n.querySelector(".js-body-version");r instanceof HTMLInputElement&&(r.value=e.newBodyVersion);for(const u of n.querySelectorAll("input, textarea")){const t=u;t.defaultValue=t.value}n.classList.remove("is-comment-stale","is-comment-editing");const m=n.querySelector(".js-comment-edit-history");if(m){const t=await u(document,e.editUrl);m.innerHTML="",m.append(t)}}}),o(".js-comment-body-error",{add:e=>{a&&0<a.length&&l(e)}}),n(".js-comment .js-comment-delete, .js-comment .js-comment-update, .js-comment-minimize, .js-comment-unminimize",async function(e,t){const s=e.closest(".js-comment");try{await t.text()}catch(t){if(422!==t.response.status)throw t;{let e;try{e=JSON.parse(t.response.text)}catch(e){}e&&e.stale&&s.classList.add("is-comment-stale")}}s.classList.remove("is-comment-loading")}),n(".js-discussion-comment-unminimize, .js-discussion-comment-minimize",async function(t,e){const s=t.closest(".js-discussion-comment"),n=s.querySelector(".js-discussion-comment-error");n&&(n.hidden=!0);try{const t=await e.html();s.replaceWith(t.html)}catch(e){if(!(400<=e.response.status&&e.response.status<500))throw e;if(e.response.html){const t=e.response.html.querySelector(".js-discussion-comment").getAttribute("data-error");n instanceof HTMLElement&&(n.textContent=t,n.hidden=!1)}}}),n(".js-comment-delete",async function(e,t){await t.json();let s=e.closest(".js-comment-delete-container");s||(s=e.closest(".js-comment-container")||e.closest(".js-line-comments"),s&&1!==s.querySelectorAll(".js-comment").length&&(s=e.closest(".js-comment"))),s.remove()}),n(".js-issue-update",async function(e,t){const s=e.closest(".js-details-container"),n=s.querySelector(".js-comment-form-error");let o;try{o=await t.json()}catch(e){n.textContent=(null===(c=null===(c=null===(c=e.response)||void 0===c?void 0:c.json)||void 0===c?void 0:c.errors)||void 0===c?void 0:c[0])||"Something went wrong. Please try again.",n.hidden=!1}if(o){s.classList.remove("open"),n.hidden=!0;var c=o.json;if(null!=c.issue_title){s.querySelector(".js-issue-title").textContent=c.issue_title;const e=s.closest(".js-issues-results");if(e){if(e.querySelector(".js-merge-pr.is-merging")){const t=e.querySelector(".js-merge-pull-request textarea");t instanceof HTMLTextAreaElement&&t.value===t.defaultValue&&(t.value=t.defaultValue=c.issue_title)}else if(e.querySelector(".js-merge-pr.is-squashing")){const t=e.querySelector(".js-merge-pull-request .js-merge-title");t instanceof HTMLInputElement&&t.value===t.defaultValue&&(t.value=t.defaultValue=c.default_squash_commit_title)}const t=e.querySelector("button[value=merge]");t&&t.setAttribute("data-input-message-value",c.issue_title);const i=e.querySelector("button[value=squash]");i&&i.setAttribute("data-input-title-value",c.default_squash_commit_title)}}document.title=c.page_title;for(const r of e.elements)(r instanceof HTMLInputElement||r instanceof HTMLTextAreaElement)&&(r.defaultValue=r.value)}}),n(".js-comment-minimize",async function(e,t){await t.json();const s=e.closest(".js-comment"),n=s.querySelector(".js-minimize-comment");if(n&&n.classList.contains("js-update-minimized-content")){const t=e.querySelector("input[type=submit], button[type=submit]");t&&t.classList.add("disabled");const n=s.closest(".js-comment-container");n&&await i(n)}else{n&&n.classList.add("d-none");const t=e.closest(".unminimized-comment");t.classList.add("d-none"),t.classList.remove("js-comment");const s=e.closest(".js-minimizable-comment-group").querySelector(".minimized-comment");s&&s.classList.remove("d-none"),s&&s.classList.add("js-comment")}}),n(".js-comment-unminimize",async function(e,t){await t.json();const s=e.closest(".js-minimizable-comment-group"),n=s.querySelector(".unminimized-comment"),o=s.querySelector(".minimized-comment");if(n)n.classList.remove("d-none"),n.classList.add("js-comment"),o&&o.classList.add("d-none"),o&&o.classList.remove("js-comment");else{if(o){const e=o.querySelector(".timeline-comment-actions");e&&e.classList.add("d-none"),o.classList.remove("js-comment")}const e=s.closest(".js-comment-container");await i(e)}}),s("details-menu-select",".js-comment-edit-history-menu",e=>{var t=e.detail.relatedTarget.getAttribute("data-edit-history-url");t&&(e.preventDefault(),t=u(document,t),r({content:t,dialogClass:"Box-overlay--wide"}))},{capture:!0})}}});
