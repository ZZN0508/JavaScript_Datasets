!function(_,A){"use strict";function f(t,e){var r=this,a=S.extend({},r.config,e),n={},i=a.name+"-"+ ++o;return r.config=function(t,e){return e===A?a[t]:(a[t]=e,r)},r.addItems=function(t){return n.a&&n.a("string"===S.type(t)?S(t):t),r},r.getItems=function(){return n.g?n.g():{}},r.update=function(t){return n.e&&n.e({},!t),r},r.force=function(t){return n.f&&n.f("string"===S.type(t)?S(t):t),r},r.loadAll=function(){return n.e&&n.e({all:!0},!0),r},r.destroy=function(){return S(a.appendScroll).off("."+i,n.e),S(_).off("."+i),n={},A},function(v,p,y,t,e){function r(){var n,i,o,l;T=1<_.devicePixelRatio,y=a(y),0<=p.delay&&setTimeout(function(){u(!0)},p.delay),(p.delay<0||p.combined)&&(t.e=(n=p.throttle,i=function(t){"resize"===t.type&&(B=L=-1),u(t.all)},l=0,function(t,e){function r(){l=+new Date,i.call(v,t)}var a=+new Date-l;o&&clearTimeout(o),n<a||!p.enableThrottle||e?r():o=setTimeout(r,n-a)}),t.a=function(t){t=a(t),y.push.apply(y,t)},t.g=function(){return y=S(y).filter(function(){return!S(this).data(p.loadedName)})},t.f=function(t){for(var e=0;e<t.length;e++){var r=y.filter(function(){return this===t[e]});r.length&&u(!1,r)}},u(),S(p.appendScroll).on("scroll."+e+" resize."+e,t.e))}function a(t){for(var e=p.defaultImage,r=p.placeholder,a=p.imageBase,n=p.srcsetAttribute,i=p.loaderAttribute,o=p._f||{},l=0,u=(t=S(t).filter(function(){var t=S(this),e=w(this);return!t.data(p.handledName)&&(t.attr(p.attribute)||t.attr(n)||t.attr(i)||o[e]!==A)}).data("plugin_"+p.name,v)).length;l<u;l++){var f=S(t[l]),s=w(t[l]),c=f.attr(p.imageBaseAttribute)||a;s===E&&c&&f.attr(n)&&f.attr(n,d(f.attr(n),c)),o[s]===A||f.attr(i)||f.attr(i,o[s]),s===E&&e&&!f.attr(F)?f.attr(F,e):s===E||!r||f.css(R)&&"none"!==f.css(R)||f.css(R,"url('"+r+"')")}return t}function u(t,e){if(y.length){for(var r=e||y,a=!1,n=p.imageBase||"",i=p.srcsetAttribute,o=p.handledName,l=0;l<r.length;l++)if(t||e||(A=r[l].getBoundingClientRect(),g=p.scrollDirection,h=p.threshold,m=(0<=L?L:L=S(_).height())+h>A.top&&-h<A.bottom,b=(0<=B?B:B=S(_).width())+h>A.left&&-h<A.right,"vertical"===g?m:"horizontal"===g?b:m&&b)){var u=S(r[l]),f=w(r[l]),s=u.attr(p.attribute),c=u.attr(p.imageBaseAttribute)||n,d=u.attr(p.loaderAttribute);u.data(o)||p.visibleOnly&&!u.is(":visible")||!((s||u.attr(i))&&(f===E&&(c+s!==u.attr(F)||u.attr(i)!==u.attr(C))||f!==E&&c+s!==u.css(R))||d)||(a=!0,u.data(o,!0),z(u,f,c,d))}var A,g,h,m,b;a&&(y=S(y).filter(function(){return!S(this).data(o)}))}else p.autoDestroy&&v.destroy()}function z(e,t,r,a){++b;var n=function(){m("onError",e),h(),n=S.noop};m("beforeLoad",e);var i=p.attribute,o=p.srcsetAttribute,l=p.sizesAttribute,u=p.retinaAttribute,f=p.removeAttribute,s=p.loadedName,c=e.attr(u);if(a){var d=function(){f&&e.removeAttr(p.loaderAttribute),e.data(s,!0),m(D,e),setTimeout(h,1),d=S.noop};e.off(N).one(N,n).one(I,d),m(a,e,function(t){t?(e.off(I),d()):(e.off(N),n())})||e.trigger(N)}else{var A=S(new Image);A.one(N,n).one(I,function(){e.hide(),t===E?e.attr(O,A.attr(O)).attr(C,A.attr(C)).attr(F,A.attr(F)):e.css(R,"url('"+A.attr(F)+"')"),e[p.effect](p.effectTime),f&&(e.removeAttr(i+" "+o+" "+u+" "+p.imageBaseAttribute),l!==O&&e.removeAttr(l)),e.data(s,!0),m(D,e),A.remove(),h()});var g=(T&&c?c:e.attr(i))||"";A.attr(O,e.attr(l)).attr(C,e.attr(o)).attr(F,g?r+g:null),A.complete&&A.trigger(I)}}function w(t){return t.tagName.toLowerCase()}function d(t,e){if(e){var r=t.split(",");t="";for(var a=0,n=r.length;a<n;a++)t+=e+r[a].trim()+(a!==n-1?",":"")}return t}function h(){--b,y.length||b||m("onFinishedAll")}function m(t,e,r){return!!(t=p[t])&&(t.apply(v,[].slice.call(arguments,1)),!0)}var b=0,B=-1,L=-1,T=!1,D="afterLoad",I="load",N="error",E="img",F="src",C="srcset",O="sizes",R="background-image";"event"===p.bind||l?r():S(_).on(I+"."+e,r)}(r,a,t,n,i),a.chainable?t:r}var S=_.jQuery||_.Zepto,o=0,l=!1;S.fn.Lazy=S.fn.lazy=function(t){return new f(this,t)},S.Lazy=S.lazy=function(t,e,r){if(S.isFunction(e)&&(r=e,e=[]),S.isFunction(r)){t=S.isArray(t)?t:[t],e=S.isArray(e)?e:[e];for(var a=f.prototype.config,n=a._f||(a._f={}),i=0,o=t.length;i<o;i++)(a[t[i]]===A||S.isFunction(a[t[i]]))&&(a[t[i]]=r);for(var l=0,u=e.length;l<u;l++)n[e[l]]=t[0]}},f.prototype.config={name:"lazy",chainable:!0,autoDestroy:!0,bind:"load",threshold:500,visibleOnly:!1,appendScroll:_,scrollDirection:"both",imageBase:null,defaultImage:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",placeholder:null,delay:-1,combined:!1,attribute:"data-src",srcsetAttribute:"data-srcset",sizesAttribute:"data-sizes",retinaAttribute:"data-retina",loaderAttribute:"data-loader",imageBaseAttribute:"data-imagebase",removeAttribute:!0,handledName:"handled",loadedName:"loaded",effect:"show",effectTime:0,enableThrottle:!0,throttle:250,beforeLoad:A,afterLoad:A,onError:A,onFinishedAll:A},S(_).on("load",function(){l=!0})}(window);