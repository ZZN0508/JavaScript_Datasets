try{!function(s){function e(e){for(var t,n,r=e[0],o=e[1],i=0,a=[];i<r.length;i++)n=r[i],c[n]&&a.push(c[n][0]),c[n]=0;for(t in o)Object.prototype.hasOwnProperty.call(o,t)&&(s[t]=o[t]);for(l&&l(e);a.length;)a.shift()()}var n={},c={2:0};function u(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return s[e].call(t.exports,t,t.exports,u),t.l=!0,t.exports}u.e=function(r){var e,o,i,t,a,n=[],s=c[r];return 0!==s&&(s?n.push(s[2]):(e=new Promise(function(e,t){s=c[r]=[e,t]}),n.push(s[2]=e),(o=document.createElement("script")).charset="utf-8",o.timeout=120,u.nc&&o.setAttribute("nonce",u.nc),o.src=u.p+""+({}[r]||r)+"."+{0:"9043d1855b197a65b0a1",1:"a748bced5066663d97b9",3:"c9cdfa5e12a81faef5e6",4:"a5035a0c168a4c0641db",5:"39793314a19d8809207f",6:"f4c2bd3762de29874350",7:"4cca7f3c791890296a05",8:"2afb5431890b8f2b36dd",9:"bd5b1fa01cb3f6bd47af",10:"e0c60ebaf8f6a3a61805",11:"734eac882dd5eaaf7b24",12:"eebe42a6c3f72ae88567",13:"0b006069c28654639c95",14:"c3c7e5550fd40b219f37"}[r]+".chunk.js?Q_CLIENTVERSION=1.46.0&Q_CLIENTTYPE=hostedjs",i=new Error,t=function(e){o.onerror=o.onload=null,clearTimeout(a);var t,n=c[r];0!==n&&(n&&(t=e&&("load"===e.type?"missing":e.type),e=e&&e.target&&e.target.src,i.message="Loading chunk "+r+" failed.\n("+t+": "+e+")",i.type=t,i.request=e,n[1](i)),c[r]=void 0)},a=setTimeout(function(){t({type:"timeout",target:o})},12e4),o.onerror=o.onload=t,document.head.appendChild(o))),Promise.all(n)},u.m=s,u.c=n,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(t,e){if(1&e&&(t=u(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)u.d(n,r,function(e){return t[e]}.bind(null,r));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="",u.oe=function(e){throw console.error(e),e};var t=(r=window["WAFQualtricsWebpackJsonP-hosted-1.46.0"]=window["WAFQualtricsWebpackJsonP-hosted-1.46.0"]||[]).push.bind(r);r.push=e;for(var r=r.slice(),o=0;o<r.length;o++)e(r[o]);var l=t;u(u.s=2)}([function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=function(){var e=window.QSI,t=window.QSI=r(r({},e),{reg:e.reg||{},ed:e.ed||{},reqID:e.reqID||{},overrides:e.overrides||{},shouldStripQueryParamsInQLoc:!!e.shouldStripQueryParamsInQLoc,config:r({zoneId:"",brandId:""},e.config),global:r(r({currentZIndex:2e9,intercepts:{},eventTrackers:[],featureFlags:{},enableJSSanitization:!1,latencySamplePercentage:.02,alreadyFetchedJSModules:[],maxCookieSize:null},e.global),{isHostedJS:function(){return!0},clientType:"hostedjs",clientVersion:"1.46.0",hostedJSLocation:e.config.hostedJSLocation||e.config.clientBaseURL,legacyId:e.config.interceptId||e.config.zoneId||e.config.targetingId||e.global.ID}),isFullDbgInitialized:!1,baseURL:"",LoadingState:e.LoadingState||[],PendingQueue:e.PendingQueue||[],debugConfig:e.debugConfig||{},getBaseURLFromConfigAndOverrides:function(){var e="";if(t.overrides.baseURL)e=t.overrides.baseURL;else if(t.config.baseURL)e=t.config.baseURL;else if(e="siteintercept.qualtrics.com",t.config.brandId){if(!t.config.zoneId)throw"You must specify a zoneId";e=t.config.zoneId.replace("_","").toLowerCase()+"-"+t.config.brandId.toLowerCase()+"."+e}return 0===e.indexOf("https://")?e=e.substring(8):0===e.indexOf("http://")?e=e.substring(7):0===e.indexOf("//")&&(e=e.substring(2)),"https://"+e},initFullDbg:function(){t.isFullDbgInitialized=!0},getClientVersionQueryString:function(){var e={Q_CLIENTVERSION:t.global.clientVersion||"unknown",Q_CLIENTTYPE:t.global.clientType||"unknown"};return void 0!==t.clientTypeVariant&&(e.Q_CLIENTTYPE+=t.clientTypeVariant),t.generateQueryString(e)},generateQueryString:function(e){var t,n,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(e[n=t]&&(n+="="+encodeURIComponent(e[t])),r.push(n));return r.join("&")}});if(!t.global.legacyId)throw"You must specify a zoneId or zoneId and interceptId";return t.global.baseURL=t.getBaseURLFromConfigAndOverrides(),t.global.isHostedJS()&&(t.global.enableJSSanitization=t.config.enableJSSanitization||!0),t.baseURL=t.baseURL||t.overrides.siBaseURL||t.global.baseURL+"/WRSiteInterceptEngine/",e=t.global.hostedJSLocation,n.p=e,t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"e",function(){return i}),n.d(t,"d",function(){return a}),n.d(t,"c",function(){return s}),n.d(t,"b",function(){return c});var o=[],r=function(e){var t=e;return t="string"==typeof e?document.getElementById(e):t},i=function(e,t){13!==e.which&&32!==e.which||(e.preventDefault(),(e=document.querySelector('button, a[href], input, select, textarea, [tabindex]:not([tabindex="-1"])'))&&e.focus(),t())},a=function(e,t,n,r){void 0===r&&(r=!1),o=o||[],e&&(o.push({elementToObserve:e,eventName:t,eventHandler:n,preventRemove:r||!1}),e.addEventListener(t,n,!1))},s=function(e){return"string"==typeof e},c=function(e){return"object"==typeof e&&e instanceof Array}},function(e,t,n){e.exports=n(8)},function(e,t){QSI.history&&!window.QTest||(QSI.historyStorage={historySessionName:"QSI_HistorySession",get useCookie(){return"sessionStorage"!==QSI.historyStorageType},get limit(){return this.useCookie?2e3:1e4},getHistorySessionData:function(){return this.useCookie?QSI.cookie.get(this.historySessionName):sessionStorage.getItem(this.historySessionName)},eraseHistorySessionData:function(){this.useCookie?QSI.cookie.erase(this.historySessionName):sessionStorage.removeItem(this.historySessionName)},setHistorySessionData:function(e){this.useCookie?QSI.cookie.set(this.historySessionName,e,0):sessionStorage.setItem(this.historySessionName,e)}},QSI.history={historyStorage:QSI.historyStorage,logVisit:function(){this.logCurrentURL(),this.logSearch(),this.startFocusTracking(),this.logReferrer()},startFocusTracking:function(){if(!this.started)try{this.started=!0,this.focusTime=this.getFocusTimeFromBrowserStorage(),this.blurTime=this.getBlurTimeFromBrowserStorage();var e=this;setInterval(function(){try{e.focused?e.focusTime+=1:e.blurTime+=1}catch(e){"undefined"!=typeof QSI&&QSI.dbg&&QSI.dbg.e&&QSI.dbg.e(e)}},1e3);function t(){try{e.focused=!0}catch(e){"undefined"!=typeof QSI&&QSI.dbg&&QSI.dbg.e&&QSI.dbg.e(e)}}var n;t(),QSI.util.observe(window,"focus",t),QSI.util.observe(window,"blur",function(){try{e.focused=!1}catch(e){"undefined"!=typeof QSI&&QSI.dbg&&QSI.dbg.e&&QSI.dbg.e(e)}}),n=QSI.Browser.isMobile?"pagehide":"unload",QSI.util.observe(window,n,function(){try{QSI.profile.set("History","BlurTime",e.blurTime),QSI.profile.set("History","FocusTime",e.focusTime)}catch(e){"undefined"!=typeof QSI&&QSI.dbg&&QSI.dbg.e&&QSI.dbg.e(e)}})}catch(e){QSI.dbg.e(e)}},logSite:function(e,t){var n,r=this.historyStorage.getHistorySessionData();r?(n=(n=(r=decodeURIComponent(r)).split("|"))[n.length-1].split("~")[0],r+="|"):n=r="",e!==n&&this.writeHistory(r+=e+"~"+t)},writeHistory:function(e,t){if(null!=t&&t<=0)this.historyStorage.eraseHistorySessionData();else{t=t||QSI.historyStorageSize||QSI.global.maxCookieSize||this.historyStorage.limit;var n=encodeURIComponent(e),r=this.limitSize(n,t);try{this.historyStorage.setHistorySessionData(r)}catch(n){e=decodeURIComponent(r),this.writeHistory(e,t-500)}}},limitSize:function(e,t){if(!e.length)return e;for(t=t||this.historyStorage.limit;e.length>t;){var n=decodeURIComponent(e).split("|");n.splice(0,1),e=n.join("|"),e=encodeURIComponent(e)}return e},get:function(){var e=(e=this.historyStorage.getHistorySessionData())||[];return e=this.limitSize(e),decodeURIComponent(e)},logCurrentURL:function(){var e=window.location.href,t=+new Date;this.logSite(e,t)},getReferrer:function(){return document.referrer},logSearch:function(){var e,t,n=this.getReferrer();0<=n.search(/(google.com)|(bing.com)|(yahoo.com)/)&&(t="",0<=n.search(/(google.com)|(bing.com)/)?(e=n.match(/q=(.*?)\&/))&&e.length&&e[1]&&(t=e[1]):0<=n.search(/yahoo.com/)&&((e=n.match(/p=(.*?)\&/))&&e.length&&e[1]&&(t=e[1])),t=decodeURIComponent(t),QSI.profile.set("History","SearchTerm",t))},logReferrer:function(){var e=this.getReferrer();e&&(QSI.util.build("a",{href:e}).hostname!==document.location.host&&QSI.profile.set("History","SiteReferrer",e),QSI.profile.set("History","PageReferrer",e))},logIntercept:function(e,t){t&&this.logActionSet(t)},logActionSet:function(e){var t;0<=e.search("AS_")&&(t=e,e=+new Date,QSI.profile.set("ActionSetHistory",t,e),QSI.profile.set("ActionSetHistory",t,e,1))},logSurvey:function(e,t){QSI.profile.set("QualtricsSurveyHistory",e,t,1)},getSiteReferrer:function(){return QSI.profile.get("History","SiteReferrer")},getPageReferrer:function(){return QSI.profile.get("History","PageReferrer")},getSearch:function(){return QSI.profile.get("History","SearchTerm")||""},getTimeOnSite:function(){var e=this.focusTime;return e+this.blurTime+"|"+e},getFocusTimeFromBrowserStorage:function(){return QSI.profile.get("History","FocusTime")||0},getBlurTimeFromBrowserStorage:function(){return QSI.profile.get("History","BlurTime")||0},getActionSetHistory:function(e,t){return QSI.profile.get("ActionSetHistory",e,t)||0},getPageCount:function(){var e=this.historyStorage.getHistorySessionData(),t=0,n=[];if(e){for(var r=(e=decodeURIComponent(e)).split("|"),o=r.length,i=0;i<o;i++)n.push(r[i].split("~")[0]);var a={};for(o=n.length,i=0;i<o;i++)a[n[i]]||(t++,a[n[i]]=!0)}return{unique:t,total:n.length}}})},function(e,t){QSI.profile||(QSI.profile={namespace:"QSI_",set:function(e,t,n,r){if(void 0===e||void 0===t||void 0===n)throw new Error("To few arguments");try{var o=this.getStorage(r),i=this.namespace+e,a=o.getItem(i);(a=a?JSON.parse(a):{})[t]=n,a=JSON.stringify(a),o.setItem(i,a)}catch(e){QSI.dbg.e("error setting profile item"),QSI.dbg.e(e)}},get:function(e,t,n){n=this.getStorage(n),e=this.namespace+e,e=n.getItem(e);return e?(e=JSON.parse(e),t?e[t]||null:e):null},erase:function(e,t,n){var r=this.getStorage(n),n=this.namespace+e;t?(delete(e=JSON.parse(r.getItem(n)))[t],e=JSON.stringify(e),r.setItem(n,e)):r.removeItem(n)},getStorage:function(e){if(this.hasSessionStorage())return e?localStorage:sessionStorage;if(QSI.UserDataStorage){var t=QSI.UserDataStorage;return e?t.isPermanent(!0):t.isPermanent(!1),t}return QSI.CookieStorage},hasSessionStorage:function(){var e="qualtricssessionstoragetestkey",t=window.sessionStorage;try{return t.setItem(e,e),t.removeItem(e),!0}catch(e){return!1}}})},function(e,t){void 0===QSI.util&&(QSI.util={$:function(e){return e="string"==typeof e?document.getElementById(e):e},forOwn:function(e,t){if(e&&e instanceof Object&&this.isFunction(t))for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(e[n],n,e)},build:function(e,n,t){var r,o=document.createElement(e);if(n&&(r=this,QSI.util.forOwn(n,function(e,t){switch(t){case"style":r.setStyle(o,n[t]);break;case"className":o.className=n[t];break;case"id":o.id=n[t];break;default:o.setAttribute(t,n[t])}})),t)if(QSI.util.isString(t))"style"===e&&o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(String(t)));else if(QSI.util.isArray(t))for(var i=0,a=t.length;i<a;i++){var s=t[i];"string"==typeof s||"number"==typeof s?o.appendChild(document.createTextNode(String(s))):s&&s.nodeType&&o.appendChild(s)}return o},setStyle:function(n,r){QSI.util.forOwn(r,function(e,t){try{n.style[t]=r[t]}catch(e){QSI.dbg.e(e)}})},isString:function(e){return"string"==typeof e},isArray:function(e){return"object"==typeof e&&e instanceof Array},getQueryParam:function(e,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");e=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null===e?"":e[1]},observe:function(e,t,n,r){this.obs=this.obs||[],e&&(this.obs.push({el:e,e:t,f:n,preventRemove:r||!1}),e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+this.capFirst(t)]&&(e["on"+this.capFirst(t)]=n))},stopObserving:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):e["on"+this.capFirst(t)]&&(e["on"+this.capFirst(t)]=null)},removeObservers:function(){var t=this;this.each(this.obs||[],function(e){e.preventRemove||t.stopObserving(e.el,e.e,e.f)})},remove:function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},isFunction:function(e){return"function"==typeof e||!1},capFirst:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},each:function(e,t){var n=e.length;if(n)for(var r=0;r<n;r++)t(e[r],r)}})},function(e,t){QSI.ContactFrequency={contactFrequencyRequestTimeout:1e4,contactFrequencyCheckResults:{},contactFrequencyCheckStates:{CAN_CONTACT:"CAN_CONTACT",DO_NOT_CONTACT:"DO_NOT_CONTACT",NOT_CHECKED:"NOT_CHECKED"},checkContactFrequencyRules:function(e,o){var t=QSI.Orchestrator.Deferred(),i={};return QSI.util.forOwn(e,function(e,t){var n,r;this.contactFrequencyCheckResults[t]={status:this.contactFrequencyCheckStates.NOT_CHECKED,brandId:null,surveyId:null},null!==e.Targeting.Decision.ActionSetID&&(n=e.Intercept,!QSI.util.shouldPreventRepeatedDisplay(t,n.DisplayOptions)&&this.shouldCheckContactFrequency(n)&&((r=this.getIQDirectorySettings(n))&&((e=this.getTargetSurveyId(n,e.Targeting))&&(r.surveyId=e,this.contactFrequencyCheckResults[t].surveyId=e),this.contactFrequencyCheckResults[t].brandId=o,r.brandId=o,i[t]=r),this.contactFrequencyCheckResults[t].status=this.contactFrequencyCheckStates.DO_NOT_CONTACT))}.bind(this)),0!==Object.keys(i).length?this.sendContactFrequencyRequest(i,t):t.resolve(),t.promise()},shouldCheckContactFrequency:function(e){return e.DisplayOptions&&e.DisplayOptions.useContactFrequencyRules},getIQDirectorySettings:function(e){if(!e.DisplayOptions)return null;var t,n=e.DisplayOptions;if(QSI.global.featureFlags["DX.ContactFrequencyV2"]?QSI.config&&QSI.config.externalReference&&(t=QSI.config.externalReference):t=this.resolveContactFrequencyExternalReference(n.contactFrequencyRefLocator,n.contactFrequencyRefExpression),!t)return QSI.dbg.e("Could not retrieve external reference ID for Contact Frequency Check"),null;if(!("string"==typeof t||t instanceof String))return QSI.dbg.e("External reference ID must be a string for Contact Frequency Check"),null;e=n.contactFrequencyDirectoryID;if(!e)return QSI.dbg.e("Missing directoryId for Contact Frequency Check"),null;n=n.contactFrequencyUserID;return n?{extRef:t,directoryId:e,userId:n}:(QSI.dbg.e("Missing User Id for Contact Frequency Check"),null)},getTargetSurveyId:function(e,t){if(!t.Decision||!t.Decision.ActionSetID)return null;t=t.Decision.ActionSetID;return e.ActionSets&&e.ActionSets[t]&&e.ActionSets[t].Target&&"Survey"===e.ActionSets[t].Target.Type?e.ActionSets[t].Target.PrimaryElement:null},resolveContactFrequencyExternalReference:function(e,t){if(!t)return QSI.dbg.e("No reference expression used for contact frequency check"),null;switch(e){case"JavaScript":return QSI.EmbeddedData.getJavaScriptValue(t.expression);case"Cookie":return QSI.cookie.get(t.expression);default:return QSI.dbg.e("Reference locator used for contact frequency check is unsupported:"+e),null}},sendContactFrequencyRequest:function(e,n){var r="https://"+QSI.global.brandDC+"/dx-iqd-proxy/check-frequency-rules";QSI.LatencyLog.startComponentTimer(QSI.LatencyLog.components.CONTACT_FREQUENCY),QSI.util.sendHttpRequest({type:"POST",url:r,header:{"Content-type":"application/json"},data:JSON.stringify(e),successCallback:function(e){try{var t;if("object"!=typeof(t=e.response?JSON.parse(e.response):t))throw new Error("ContactFrequency check came back with invalid response: "+results);QSI.util.forOwn(t,function(e,t){null!==e?!0===e.passesFrequencyRules&&(this.contactFrequencyCheckResults[t].status=this.contactFrequencyCheckStates.CAN_CONTACT,this.contactFrequencyCheckResults[t].contactId=e.contactId):QSI.dbg.e("ContactFrequency check for intercept:"+t+" errored; defaulting to no show")}.bind(this))}catch(e){QSI.dbg.e(e)}finally{QSI.LatencyLog.endComponentTimer(QSI.LatencyLog.components.CONTACT_FREQUENCY),n.resolve()}}.bind(this),errorCallback:function(e){var t="Call to ContactFrequency endpoint: "+r+" failed.";e.status&&(t=t+" Status:"+e.status),e.response&&(t=t+" Response:"+e.response),QSI.dbg.e(t),QSI.LatencyLog.endComponentTimer(QSI.LatencyLog.components.CONTACT_FREQUENCY),n.resolve()}.bind(this),timeout:this.contactFrequencyRequestTimeout,timeoutCallback:function(){QSI.dbg.e("ContactFrequency check POST request to:"+r+" timed out"),QSI.LatencyLog.endComponentTimer(QSI.LatencyLog.components.CONTACT_FREQUENCY),n.resolve()}})},recordContactFrequencyRequest:function(e){var n="https://"+QSI.global.brandDC+"/dx-iqd-proxy/record-contact";QSI.util.sendHttpRequest({type:"POST",url:n,header:{"Content-type":"application/json"},data:JSON.stringify(e),errorCallback:function(e){var t="Call to ContactFrequency endpoint: "+n+" failed.";e.status&&(t=t+" Status:"+e.status),e.response&&(t=t+" Response:"+e.response),QSI.dbg.e(t)}.bind(this),timeout:this.contactFrequencyRequestTimeout,timeoutCallback:function(){QSI.dbg.e("ContactFrequency record POST request to:"+n+" timed out")}})}}},function(e,t){QSI.AssetManager={promiseFetch:function(e,t,n){var r=QSI.Orchestrator.Deferred(),o=new XMLHttpRequest;return o.open(e,t,!0),o.withCredentials=!0,"POST"===e&&o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.onreadystatechange=function(){4===o.readyState&&(200===o.status?r.resolve(o.responseText):r.reject(o.responseText))},o.send(n),r.promise()},generateDefinitionRequestURL:function(e,t,n,r){var o=QSI.baseURL+"Asset.php?",i=[];return t=t||n.version,i.push("Module="+e),i.push("Version="+t),null!=r&&i.push("Q_InterceptID="+r),null===n.Q_NOCACHE&&i.push("Q_NOCACHE"),QSI.CORSOrigin&&i.push("Q_ORIGIN="+QSI.CORSOrigin),void 0!==n.Q_CLIENTVERSION&&null!==n.Q_CLIENTVERSION&&i.push("Q_CLIENTVERSION="+n.Q_CLIENTVERSION),void 0!==n.Q_CLIENTTYPE&&null!==n.Q_CLIENTTYPE&&(n="Q_CLIENTTYPE="+n.Q_CLIENTTYPE,i.push(n)),o+i.join("&")},loadDefinition:function(e,t){var n=QSI.Orchestrator.Deferred(),r=new XMLHttpRequest;return r.open("GET",e,!0),r.onreadystatechange=function(){if(4===r.readyState)if(200===r.status)try{var e=JSON.parse(r.responseText);e.Error?n.reject(e):(t(e),n.resolve(r.responseText))}catch(e){n.reject(r.responseText)}else n.reject(r.responseText)},r.send(),n.promise()},promiseLoadIntercept:function(t,e,n,r){var o=e.InterceptID,n=QSI.AssetManager.generateDefinitionRequestURL(o,e.InterceptRevision,n);return r.startComponentTimer("AssetDefinition-"+o),QSI.AssetManager.loadDefinition(n,function(e){r.endComponentTimer("AssetDefinition-"+o),QSI.Request[t].Intercepts[o].Intercept=e.InterceptDefinition})},promiseLoadCreative:function(t,n,e,r){var o=n.Decision.Creative.ID;if("CR_NoCreative"===o)return QSI.Request[t].Intercepts[n.InterceptID].Creative=null,QSI.Orchestrator.Deferred().resolve(null);e=QSI.AssetManager.generateDefinitionRequestURL(o,n.Decision.Creative.Revision,e,n.InterceptID);return r.startComponentTimer("AssetDefinition-"+o),QSI.AssetManager.loadDefinition(e,function(e){r.endComponentTimer("AssetDefinition-"+o),QSI.util.isLegacyCreative(e.CreativeDefinition.Type)&&(e.CreativeDefinition=QSI.AssetManager.sortCreativeDefinition(e.CreativeDefinition)),QSI.Request[t].Intercepts[n.InterceptID].Creative=e.CreativeDefinition})},promiseLoadPopUnderTarget:function(t,n,e){e=QSI.AssetManager.generateDefinitionRequestURL(n.Decision.PopUnderTarget.ID,n.Decision.PopUnderTarget.Revision,e,n.InterceptID);return QSI.AssetManager.loadDefinition(e,function(e){QSI.Request[t].Intercepts[n.InterceptID].PopUnderTarget=e.CreativeDefinition})},promiseLoadScript:function(e,t,n,r){var o=e+":"+QSI.global.clientVersion;if(-1!==n.global.alreadyFetchedJSModules.indexOf(o))return r.markComponentAlreadyFetched("JSModule-"+e),(i=QSI.Orchestrator.Deferred()).resolve(),i.promise();var i=QSI.Orchestrator.Deferred(),a=document.createElement("script");a.src=QSI.global.hostedJSLocation+e+"Module.js?";var s=[];return void 0!==QSI.Orchestrator&&void 0!==QSI.Orchestrator.getClientVersionQueryString&&s.push(QSI.Orchestrator.getClientVersionQueryString()),-1===window.location.href.indexOf("Q_DEBUG")&&!QSI.config.debug||s.push("Q_DEBUG=true"),a.src+=s.join("&"),a.defer=!0,a.addEventListener("load",function(){try{!0===QSI.wrongModuleVersionRequested&&(i.reject(),QSI.dbg.e("Script: "+e+" failed to load because an unavailable version ("+t+") was requested.")),n.global.alreadyFetchedJSModules.push(o),r.endComponentTimer("JSModule-"+e),i.resolve()}catch(e){"undefined"!=typeof QSI&&QSI.dbg&&QSI.dbg.e&&QSI.dbg.e(e)}},!1),a.addEventListener("error",function(){try{i.reject(),QSI.dbg.e("Script: "+e+" failed to load.")}catch(e){"undefined"!=typeof QSI&&QSI.dbg&&QSI.dbg.e&&QSI.dbg.e(e)}}),r.startComponentTimer("JSModule-"+e),document.body.appendChild(a),i.promise()},sortCreativeDefinition:function(e){if(e&&e.Options&&e.Options.elements&&e.Options.elements.Elements){for(var t=e.Options.elements.Elements,t=QSI.util.stableSort(t,function(e,t){return Number(e.style.zIndex)<Number(t.style.zIndex)?-1:Number(e.style.zIndex)>Number(t.style.zIndex)?1:0}),n=0;n<t.length;n++)t[n].style&&t[n].style.zIndex&&(t[n].style.zIndex=QSI.global.currentZIndex++);return t=QSI.util.stableSort(t,function(e,t){return Number(e.position.left)<Number(t.position.left)?-1:Number(e.position.left)>Number(t.position.left)?1:0}),t=QSI.util.stableSort(t,function(e,t){return Number(e.position.top)<Number(t.position.top)?-1:Number(e.position.top)>Number(t.position.top)?1:0}),e.Options.elements.Elements=t,e}return e}}},function(e,t,f){"use strict";f.r(t),f(3),f(4),f(5),f(6),f(7);function l(e,a,s,c){return new(s=s||Promise)(function(n,t){function r(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,o)}i((c=c.apply(e,a||[])).next())})}function d(n,r){var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function u(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}var o=f(1),n=function(){var r=this;this.trackElements=function(){var e,t,n;0==r.loaded&&(r.loadCounts(),e=window.QSI,t=e.dbg,n=e.global.eventTrackers,Object.keys(n).forEach(function(e){var t=n[e];r.trackElement(t,e)}),Object(o.d)(window,"beforeunload",function(){try{r.storeCounts()}catch(e){void 0!==window.QSI&&t&&t.e&&t.e(e)}}),r.loaded=!0)},this.trackElement=function(e,t){var n=window.QSI.dbg,e=Object(o.a)(e);e&&Object(o.d)(e,"click",function(){try{r.track(t)}catch(e){void 0!==window.QSI&&n&&n.e&&n.e(e)}})},this.track=function(e){r.clicked=!0,r.counts[e]?r.counts[e]++:r.counts[e]=1},this.storeCounts=function(){var e,t;!0===r.clicked&&(e=window.QSI.cookie,t=JSON.stringify(r.counts),e.set(r.cookieName,t))},this.loadCounts=function(){var e=window.QSI.cookie.get(r.cookieName);e&&(r.counts=JSON.parse(e))},this.get=function(e){return r.counts[e]||0},this.incrementEventList=function(){if("_qsie"in window&&Object(o.b)(window._qsie))for(var e=0,t=window._qsie.length;e<t;e++){var n=window._qsie[e];Object(o.c)(n)&&r.track(n)}},this.counts={},this.cookieName="QSI_CT",this.loaded=!1,this.clicked=!1},h=f(0),I=(L.metricName="si.SILatency",L.alreadyFetchedMarker="ALREADY_FETCHED",L.components={CORE_MODULE:"coreModuleRequest",TARGETING:"targetingRequest",DPR_TARGETING:"dprTargetingRequest",XMD_DEBUG_TARGETING:"xmdDebugTargetingRequest",ASSETS_AND_MODULES:"allAssetDefinitionsAndJSModules",CONTACT_FREQUENCY:"contactFrequencyCheck"},L),r={OTHER_INTERCEPT_PASSED:"OTHER_INTERCEPT_PASSED",MISSING:"MISSING",PENDING:"PENDING",INVALID:"INVALID"},a=(O.prototype.backOffAndRetry=function(e){this.retryCount<this.retryLimit?(this.retryCount++,setTimeout(e,this.retryBackOffFormula(this.retryCount))):window.QSI.dbg.e("Retryer for "+this.retryerName+" - Exceeded retry limit of "+this.retryLimit+"; No longer retrying")},O.prototype.getRetryCount=function(){return this.retryCount},O.prototype.resetRetryCount=function(){this.retryCount=0},O),i=(E.prototype.doSPAReload=function(){var e;window.QSI&&window.QSI.API&&((e=window.QSI.API).unload(),setTimeout(function(){e.load()},100))},E.prototype.handleSPAEvaluation=function(e){var n,r,t=this;e&&!window.QSI.spaEvaluation&&(window.QSI.spaEvaluation=!0,e.onUrlPathChange?(window.history.pushState&&(n=window.history.pushState,window.history.pushState=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];n.apply(window.history,e);try{this.doSPAReload()}catch(e){this.debugLog.e("An error occurred while handling SPA reload on pushState. "+e)}}.bind(this)),window.history.replaceState&&(r=window.history.replaceState,window.history.replaceState=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r.apply(window.history,e);try{this.doSPAReload()}catch(e){this.debugLog.e("An error occurred while handling SPA reload on replaceState. "+e)}}.bind(this)),window.addEventListener("popstate",function(){try{t.doSPAReload()}catch(e){t.debugLog.e("An error occurred while handling SPA reload on popstate. "+e)}})):e.onHashChange&&window.addEventListener("hashchange",function(){try{t.doSPAReload()}catch(e){t.debugLog.e("An error occurred while handling SPA reload on hashchange. "+e)}}))},E.prototype.addWindowHandlersPostMessageListener=function(e){if("string"==typeof e.data&&-1!=e.data.indexOf("QSI_popunderwatcher_addWindowHandler")){var t=e.data.split("|"),n=t[1],r=t[2],t=e.source;try{JSON.parse(window.sessionStorage.getItem("QSI_OptInIDsAndWindowNames"))[n]!==r||window.QSI.windows[r]||(window.QSI.windows[r]=t)}catch(e){this.debugLog.e(e)}}},E.prototype.load=function(t,e){var n=this,r=window.QSI.AssetManager;e||(this.targetingRetryer=new a("Targeting Call",3,function(e){return 2e3*Math.pow(2,e-1)}),h.a.LoadingState.push(!0));var o=this.generateTargetingURL(t);this.xmdDebugRetryer=new a("Q_XMD_DEBUG Call",3,function(e){return 2e3*Math.pow(2,e-1)});var i=e?I.components.TARGETING+"_retry_"+this.targetingRetryer.getRetryCount():I.components.TARGETING;this.latencyLog.startComponentTimer(i);e=this.getTargetingPostData(),e=r.promiseFetch("POST",o,e);h.a.Request[t.id]={Intercepts:{},Params:t},e.then(function(){n.latencyLog.endComponentTimer(i)}).then(this.handleTargetingResponse.bind(this,t),function(e){n.debugLog.e(e.Message),t.deferred&&t.deferred.reject()})},E.prototype.getTargetingPostData=function(){var e=h.a.shouldStripQueryParamsInQLoc?"Q_LOC="+encodeURIComponent(window.location.href.split("?")[0]):"Q_LOC="+encodeURIComponent(window.location.href);return void 0!==h.a.config.externalReference&&(e+="&extRef="+encodeURIComponent(h.a.config.externalReference)),e},E.prototype.generateTargetingURL=function(e){var t=h.a.baseURL+"Targeting.php?",n=[];e.InterceptID&&n.push("Q_InterceptID="+e.InterceptID),e.ZoneID&&n.push("Q_ZoneID="+e.ZoneID),e.Q_XMD_DEBUG?n.push("Q_XMD_DEBUG"):(null===e.Q_DEBUG&&(n.push("Q_DEBUG"),h.a.isDebug=!0),null===e.Q_BOOKMARKLET&&n.push("Q_BOOKMARKLET")),null===e.Q_NOCACHE&&n.push("Q_NOCACHE"),void 0!==e.version&&null!==e.version&&n.push("Version="+e.version);var r=h.a.profile.get("QualtricsSurveyHistory","",1);return r&&(r=encodeURIComponent(Object.keys(r).toString()),n.push("Q_QualtricsSurveyTaken="+r)),void 0!==e.Q_CLIENTVERSION&&null!==e.Q_CLIENTVERSION&&n.push("Q_CLIENTVERSION="+e.Q_CLIENTVERSION),void 0!==e.Q_CLIENTTYPE&&null!==e.Q_CLIENTTYPE&&n.push("Q_CLIENTTYPE="+e.Q_CLIENTTYPE),t+n.join("&")},E.prototype.isMessageEventOriginAllowed=function(e){if(h.a.reg)for(var t in h.a.reg)if(Object.prototype.hasOwnProperty.call(h.a.reg,t)&&h.a.reg[t]&&h.a.reg[t].options){t=h.a.reg[t].options;if(t.targetURLOrigin===e)return!0;if(t.target&&t.target.OriginalURLOrigin===e)return!0}return!1},E.prototype.doCSTargetingEvaluation=function(s,c,u){return l(this,void 0,void 0,function(){var o,i,a,t,n=this;return d(this,function(e){switch(e.label){case 0:return(o=o||{}).EMBEDDED_TARGET="EmbeddedTarget",Array.isArray(s.ClientSideIntercepts)?(i=window.QSI.ClientSideTargeting,s.Intercepts=[],a={Intercepts:{},Type:h.a.config.editing?"Editing":"Published"},t=s.ClientSideIntercepts.map(function(r){return l(n,void 0,void 0,function(){var t,n;return d(this,function(e){switch(e.label){case 0:return r?r.Error?(this.debugLog.log(r.Message),[3,3]):[3,1]:[3,3];case 1:return[4,new Promise(function(t,n){setTimeout(function(){try{var e=i.evaluateIntercept(r,h.a.isDebug);t(e)}catch(e){n(e)}})})];case 2:n=e.sent(),t=n.interceptEntry,n=n.interceptDebugInfo,a.Intercepts[r.InterceptID]=n,t&&(c.Intercepts[r.InterceptID]={},c.Intercepts[r.InterceptID].Targeting=t,s.Intercepts.push(t),t.Decision.Creative&&(t.Decision.Creative.Type&&(s.Modules[t.Decision.Creative.Type]=u),t.Decision.PopUnderTarget&&(s.Modules.PopUnder=u)),t.Decision.Target&&t.Decision.Target.DisplayType===o.EMBEDDED_TARGET&&(s.Modules.EmbeddedTarget=u)),e.label=3;case 3:return[2]}})})}),[4,Promise.all(t)]):[2];case 1:return e.sent(),0<s.Intercepts.length&&(s.Modules.ScreenCapture=u),h.a.isDebug&&(s.DebugInfo=JSON.stringify(a)),delete s.Modules.DependencyResolver,[2]}})})},E.prototype.handleTargetingResponse=function(r,e){var o,t=this,n=window.QSI,i=n.AssetManager,a=n.API,s=n.EventTracker,n=n.history;try{if("SampleRejected"===e)return;try{o=JSON.parse(e)}catch(r){return void this.debugLog.e("Failed to parse JSON of targeting response: "+e)}if(o.Error)return void this.debugLog.e(o.Message);if("XMD_RETRY"===o.Message)return void this.targetingRetryer.backOffAndRetry(function(){t.load(r,!0)});this.setGlobalVars(o);var c=o.Modules;o.RequestData&&o.RequestData.reevaluateInterceptOnUrlChange&&this.handleSPAEvaluation({onHashChange:!0,onUrlPathChange:!0}),n.logVisit(),!h.a.Request[r.id].hasDependencies&&h.a.Request[r.id].hasBeenResolved||(s.trackElements(),s.incrementEventList(),window._qsie=a.Events);var u=this.isBrowserSupported();c.Core&&u?i.promiseLoadScript("Core",c.Core,h.a,this.latencyLog).then(function(){return l(t,void 0,void 0,function(){var t,n=this;return d(this,function(e){switch(e.label){case 0:return e.trys.push([0,4,,5]),t=window.QSI.ClientSideTargeting,h.a.global.featureFlags["DUX.ClientSideTargetingM1"]&&o.ClientSideIntercepts&&0<o.ClientSideIntercepts.length?(t.setEnabled(!0),[4,this.doCSTargetingEvaluation(o,h.a.Request[r.id],h.a.global.clientVersion)]):[3,2];case 1:return e.sent(),[3,3];case 2:o.Intercepts&&o.Intercepts.forEach(function(e){e&&(e.Error?n.debugLog.log(e.Message):(h.a.Request[r.id].Intercepts[e.InterceptID]={},h.a.Request[r.id].Intercepts[e.InterceptID].Targeting=e))}),e.label=3;case 3:return!o.Dependencies||h.a.global.featureFlags["DUX.ClientSideTargetingM1"]&&o.ClientSideIntercepts&&0<o.ClientSideIntercepts.length?(f.e(14).then(f.bind(null,50)).then(function(e){(0,e.addPopunderEmbeddedDataHandler)(e.updatePopunderEDCallback)}),this.shouldMakeXMDDebugCall(o)?(r.Q_XMD_DEBUG=!0,this.handleXMDDebug(r,o)):this.loadModules(r,o)):this.handleDependencyResolver(r,o),[3,5];case 4:return t=e.sent(),this.debugLog.e(t),[3,5];case 5:return[2]}})})},function(){}):this.doneLoading(r,o)}catch(r){this.debugLog.e(r)}},E.prototype.shouldMakeXMDDebugCall=function(t){if(window.QSI.ClientSideTargeting.isEnabled()){var e=function(){for(var e=0;e<t.Intercepts.length;e++)if(t.Intercepts[e].ContactFrequencyRulesEnabled)return!0;return!1}();return!!h.a.config.externalReference&&e}return!!h.a.config.externalReference&&h.a.global.featureFlags["DX.ContactFrequencyV3"]&&h.a.isDebug},E.prototype.handleDependencyResolver=function(t,e){var n=this,r=window.QSI.AssetManager,o=this.generateTargetingURL(t);o+="&t="+(new Date).getTime(),o+="&Q_VSI="+encodeURIComponent(JSON.stringify(e.RequestData.validIntercepts)),o+="&Q_DPR=true",this.latencyLog.startComponentTimer(I.components.DPR_TARGETING);var i,a="";for(i in e.Dependencies)Object.prototype.hasOwnProperty.call(e.Dependencies,i)&&("SiteCatalyst"===i&&(QSI["Resolve"+i].rootName=h.a.adobeVar),a+=QSI["Resolve"+i].prepare(e.Dependencies[i]));a+="&"+this.getTargetingPostData(),r.promiseFetch("POST",o,a).then(function(){this.latencyLog.endComponentTimer(I.components.DPR_TARGETING)}).then(this.handleTargetingResponse.bind(this,t),function(e){n.debugLog.e(e.Message),t.deferred&&t.deferred.reject()})},E.prototype.handleXMDDebug=function(t,n){var r=this,e=window.QSI.AssetManager,o={};n.Intercepts.forEach(function(e){var t;e.Decision&&e.Decision.ActionSetID&&(t=e.InterceptID,e=e.Decision.ActionSetID,o[t]=e)});var i=this.generateTargetingURL(t),a="";a+=this.getTargetingPostData(),a+="&ContactFrequencyDebugIntercepts="+JSON.stringify(o);var s=""+I.components.XMD_DEBUG_TARGETING+this.xmdDebugRetryer.getRetryCount();this.latencyLog.startComponentTimer(s),e.promiseFetch("POST",i,a).then(function(e){r.latencyLog.endComponentTimer(s),r.handleXMDDebugResponse(t,n,o,e)})},E.prototype.hasXMDCacheFailure=function(e){for(var t=0;t<e.Intercepts.length;t++){var n=e.Intercepts[t];if(n.Decision&&n.Decision.ContactFrequencyInfo){n=n.Decision.ContactFrequencyInfo.FailureMode,n=!!r[n]&&n!==r.OTHER_INTERCEPT_PASSED&&n!==r.INVALID;if(n)return n}}return!1},E.prototype.handleXMDDebugResponse=function(r,o,n,e){var i,a,s=this;try{i=JSON.parse(e)}catch(r){return void this.debugLog.e("Failed to parse JSON of Q_XMD_DEBUG targeting response: "+e)}if(h.a.isDebug)try{a=JSON.parse(o.DebugInfo)}catch(r){return void this.debugLog.e("Failed to parse debugInfo JSON of Q_DEBUG targeting response: "+o)}this.hasXMDCacheFailure(i)?this.xmdDebugRetryer.backOffAndRetry(function(){a&&(i.DebugInfo=o.DebugInfo);var t={};o.Intercepts.forEach(function(e){t[e.InterceptID]=e}),i.Intercepts.forEach(function(e){e.Decision&&(e.Decision.ActionSetID=t[e.InterceptID].Decision.ActionSetID)}),s.handleXMDDebug(r,i)}):(h.a.isDebug&&(i.Intercepts.forEach(function(e){var t;e&&(t=e.InterceptID,Object.prototype.hasOwnProperty.call(a.Intercepts,t)&&Object.prototype.hasOwnProperty.call(n,t)&&(e.Error?(s.debugLog.log(e.Message),a.Intercepts[t].contactFrequencyPassed=!1):a.Intercepts[t].contactFrequencyPassed=!!e.Decision.ActionSetID))}),i.DebugInfo=JSON.stringify(a),i.Modules.Debug=h.a.global.clientVersion),i.Intercepts.forEach(function(e){if(e)if(e.Error)s.debugLog.log(e.Message);else{for(var t=void 0,n=0;n<o.Intercepts.length;n++)e.InterceptID===o.Intercepts[n].InterceptID&&(t=o.Intercepts[n]);t&&(e.ContactID=t.ContactID||e.ContactID,e.DirectoryID=t.DirectoryID||e.DirectoryID,e.SurveyID=t.SurveyID||e.SurveyID,e.DistributionID=t.DistributionID||e.DistributionID),h.a.Request[r.id].Intercepts[e.InterceptID]={},h.a.Request[r.id].Intercepts[e.InterceptID].Targeting=e}}),this.loadModules(r,i))},E.prototype.loadModules=function(n,e){var t,r=this,o=window.QSI,i=o.AssetManager,a=o.ContactFrequency,s=[],c=e.Modules;for(t in this.latencyLog.startComponentTimer(I.components.ASSETS_AND_MODULES),f.e(1).then(f.bind(null,48)),c)if(Object.prototype.hasOwnProperty.call(c,t)){if("ScreenCapture"===t){this.setupScreenCaptureListener(c[t]);continue}if("ClientLog"===t)continue;if("DependencyResolver"===t)continue;if(("HTTPRedirect"===t||"LatencyLog"===t)&&h.a.global.isHostedJS()){this.debugLog.c("Module type '"+t+"' is not supported when using Site Intercept Hosted JS");continue}if("EmbeddedFeedback"===t)continue;var u=i.promiseLoadScript(t,c[t],h.a,this.latencyLog);s.push(u)}for(var l=0;l<e.Intercepts.length;l++){var d,g,p=e.Intercepts[l];p&&!p.Error&&null!==p.Decision.ActionSetID&&(d=i.promiseLoadIntercept(n.id,p,n,this.latencyLog),g=i.promiseLoadCreative(n.id,p,n,this.latencyLog),s.push(d,g),p.Decision.PopUnderTarget&&p.Decision.PopUnderTarget.ID&&"Target"!==p.Decision.PopUnderTarget.ID&&(p=i.promiseLoadPopUnderTarget(n.id,p,n),s.push(p)))}this.when.apply(this,s).then(function(){try{r.latencyLog.endComponentTimer(I.components.ASSETS_AND_MODULES),h.a.global.featureFlags["DX.ContactFrequencyV3"]||!h.a.global.featureFlags["DX.ContactFrequencyV2"]&&!h.a.global.featureFlags["DX.ContactFrequency"]?r.prepareIntercepts(n,e):a.checkContactFrequencyRules(h.a.Request[n.id].Intercepts,h.a.global.brandID).then(function(){r.prepareIntercepts(n,e)})}catch(e){r.debugLog.e(e)}},function(e){var t="";("string"==typeof e||e&&"string"==typeof e.Message)&&(t=e),r.debugLog.e("An error occurred while loading the intercept. "+t),n.deferred&&n.deferred.reject()})},E.prototype.setInterceptDisplayOptionCallback=function(e,t){var n=window.QSI.util;switch(e){case"":case"onfocus":n.waitForFocus().then(t);break;case"onload":t();break;case"onexit":n.waitForExitIntent().then(t);break;default:return}},E.prototype.prepareIntercepts=function(r,o){var i=this;return f.e(1).then(f.bind(null,48)).then(function(){var e=window.QSI.RunIntercepts;!0!==r.loadingFromAPI&&(i.latencyLog.endTimer(),0<i.xmdDebugRetryer.getRetryCount()?i.latencyLog.send():i.latencyLog.sampledSend(h.a.global.latencySamplePercentage)),i.setGlobalIncludes(r,o);var t=h.a.Request[r.id].displayInterceptType,n=h.a.global.featureFlags["DUX.ClientSideTargetingM1"]&&o.ClientSideIntercepts&&0<o.ClientSideIntercepts.length;("manual"!==t&&!h.a.Request[r.id].zoneManualDisplay||h.a.Request[r.id].hasDependencies&&!n)&&e(r.id,!1),i.doneLoading(r,o),r.deferred&&r.deferred.resolve()})},E.prototype.isBrowserSupported=function(){return!("Chrome"===h.a.Browser.name&&h.a.Browser.version<=20||"Firefox"===h.a.Browser.name&&h.a.Browser.version<=59||"Internet Explorer"===h.a.Browser.name&&h.a.Browser.version<=10)},E.prototype.setGlobalIncludes=function(e,t){var n;h.a.isDebug&&t.DebugInfo&&(h.a.Request[e.id].Debug={debugInfo:JSON.parse(t.DebugInfo),version:t.RequestData.bVersion},n={version:t.RequestData.bVersion,debugInfo:JSON.parse(t.DebugInfo)},h.a.debugConfig=n),h.a.version=t.RequestData.bVersion,h.a.InterceptsRan=!1,h.a.Request[e.id].hasDependencies=t.RequestData.hasDependencies,h.a.Request[e.id].hasBeenResolved=t.RequestData.hasBeenResolved,h.a.Request[e.id].displayInterceptType=t.RequestData.displayInterceptType,h.a.Request[e.id].zoneManualDisplay=t.RequestData.zoneManualDisplay},E.prototype.setGlobalVars=function(e){h.a.Browser={name:e.RequestData.browser,version:e.RequestData.browserVersion,isMobile:e.RequestData.isMobile,isBrowserSupported:e.RequestData.isBrowserSupported},h.a.CORSOrigin=e.RequestData.CORSOrigin,h.a.OS={name:e.RequestData.osName,version:e.RequestData.osVersion},h.a.global.brandID=e.RequestData.brandID,h.a.global.brandDC=e.RequestData.brandDC,h.a.global.graphicPath="https://"+h.a.global.brandDC+"/WRQualtricsSiteIntercept/Graphic.php?IM=",h.a.global.imagePath=h.a.global.baseURL+"/WRQualtricsShared/Graphics/",h.a.global.maxCookieSize=e.RequestData.maxCookieSize,h.a.global.featureFlags=e.FeatureFlags,h.a.global.screenCaptureServiceBaseURL=e.RequestData.screenCaptureServiceBaseURL,h.a.global.eventTrackers=e.RequestData.eventTrackers,h.a.adobeVar=e.RequestData.adobeSCVariable,h.a.id=e.RequestData.ID,h.a.reqID[e.RequestData.ID]=!0,h.a.CookieDomain=e.RequestData.cookieDomain,h.a.historyStorageType=e.RequestData.historyStorageType,h.a.historyStorageSize=e.RequestData.historyStorageSize,h.a.currentURL=window.location.href.split("?")[0],function(){var e=document.createElement("div");e.className="scrollbar-measure",e.style.width="100px",e.style.height="100px",e.style.overflow="scroll",e.style.position="absolute",e.style.top="-99999px",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;h.a.scrollbarWidth=t,document.body.removeChild(e)}()},E.prototype.parseQueryString=function(e){var t={};if(e&&-1!==e.indexOf("?"))for(var n=e.split("?",2)[1].split("&"),r=0;r<n.length;r++){var o=n[r].split("=",2);"Q_LOC"===o[0]&&-1!==o[1].indexOf("Q_DEBUG")&&(t.Q_DEBUG=!0),o[0]&&(t[o[0]]=decodeURIComponent(o[1]))}return t},E.prototype.replaceAll=function(e,t,n){return t=t.replace(/([.*+?^${}()|[\]\\=!:/])/g,"\\$1"),e.replace(new RegExp(t,"g"),n)},E.prototype.when=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=this,r=u([e],t),o=r.length,a=o,s=1===a?e:this.Deferred();if(1<o)for(var c=0;c<o;c++)r[c]&&r[c].promise?r[c].promise().done(function(r,o){return function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];o[r]=1<arguments.length?e:i.createArrayFromArguments(u([e],t)),--a||s.resolve(o)}}(c,r)).fail(s.reject):a--;return a<1&&s.resolve(r),s.promise()},E.prototype.createArrayFromArguments=function(e){return e?Array.prototype.slice.call(e):[]},E.prototype.isFunction=function(e){return"function"==typeof e||!1},E.prototype.forOwn=function(e,t){if(e&&e instanceof Object&&this.isFunction(t))for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(e[n],n,e)},E.prototype.each=function(e,t){var n=e.length;if(n)for(var r=0;r<n;r++)t(e[r],r)},E.prototype.doneLoading=function(e,t){if(h.a.LoadingState.pop(),0===h.a.LoadingState.length){!0!==e.loadingFromAPI&&((e=document.createEvent("Event")).initEvent("qsi_js_loaded",!0,!0),window.dispatchEvent(e)),this.lastSiResponse=t;for(var n=h.a.PendingQueue.length,r=0;r<n;r++)h.a.PendingQueue.shift()()}},E.prototype.setupJFEMessageEventHandlerForIOSOptimization=function(){var r=this;if(!h.a.JFEListenerRegistered)return h.a.JFEListenerRegistered=!0,window.addEventListener("message",function(e){try{if(!r.isMessageEventOriginAllowed(e.origin))return;!function(e){var t=null;if("string"==typeof e)try{t=JSON.parse(e)}catch(e){return}return null!==t&&"JFE"===t.from&&"SI"===t.to&&"JFELoaded"===t.event&&"iOS"===h.a.OS.name}(e.data)||(t=e.source,n=e.origin,t.postMessage({event:"addIOSSIWorkaround",from:"SI",to:"JFE"},n))}catch(e){r.debugLog.e(e)}var t,n})},E.prototype.setupScreenCaptureListener=function(i){var a=this;if(!h.a.screenCaptureListenerRegistered)return h.a.screenCaptureListenerRegistered=!0,window.addEventListener("message",function(t){try{if(!a.isMessageEventOriginAllowed(t.origin))return;var e=window.QSI,n=e.AssetManager,r=e.util.getOriginInterceptOfMessage(t.source);if(!r)return;var o=t.data;if("string"==typeof o)try{o=JSON.parse(o)}catch(e){return}if(!o||"JFE"!==o.from||"SI"!==o.to)return;if(h.a.screenCaptureHandlers||(h.a.screenCaptureHandlers={}),"canScreenCapture"===o.event)return void 0===h.a.screenCaptureModulePromise&&(h.a.screenCaptureModulePromise=n.promiseLoadScript("ScreenCapture",i,h.a,a.latencyLog)),void t.source.postMessage(JSON.stringify({event:"canScreenCapture",from:"SI",to:"JFE",canScreenCapture:!0}),t.origin);void 0!==h.a.screenCaptureModulePromise&&h.a.screenCaptureModulePromise.then(function(){var e=window.QSI.ScreenCaptureHandler;switch(h.a.screenCaptureHandlers[o.sessionId]||(h.a.screenCaptureHandlers[o.sessionId]=new e(r,t.source,o.sessionId,o.translations,t.origin)),o.event){case"startScreenCapture":h.a.screenCaptureHandlers[o.sessionId].captureScreen(o.questionId);break;case"editScreenCapture":h.a.screenCaptureHandlers[o.sessionId].editAnnotations(o.questionId);break;case"removeScreenCapture":h.a.screenCaptureHandlers[o.sessionId].removeScreenCapture(o.questionId);break;case"sessionFinished":h.a.screenCaptureHandlers[o.sessionId].removeAllScreenCaptures();break;default:return}})}catch(e){a.debugLog.e(e)}})},E),s=function(){var n=this;this.isFullDbgInitialized=-1!==window.location.href.indexOf("Q_DEBUG"),this.safeConsole=function(e,t){if(n.isFullDbgInitialized)try{console[e](t)}catch(e){}},this.enableFullDebug=function(){n.isFullDbgInitialized=!0},this.disableFullDebug=function(){n.isFullDbgInitialized=!1},this.log=function(e,t,n){var r=window.QSI,o=r.ClientLog,r=r.global;o&&(r.featureFlags.isClientLoggingEnabled?o.send(e,t,n):o.sampledSend(e,t,n,.02))},this.c=function(e){n.safeConsole("log",e),n.log(e)},this.d=function(e){n.safeConsole("dir",e),n.log(e)},this.t=function(e){n.safeConsole("trace",e),n.log(e)},this.e=function(e){n.safeConsole("log",e&&e.message||"error"),n.safeConsole("error",e),n.log(e)}},c=(R.prototype.send=function(e,t,n){void 0===t&&(t=!0),void 0===n&&(n="error");try{var r,o=window.QSI,i=o.baseURL+"Ajax.php?action=ClientLog&"+(0,o.getClientVersionQueryString)(),a=window.QSI.reqID,s="";for(r in a)a[r]&&(s+=r+" ");t&&e.stack&&(e=e.stack);var c=navigator.userAgent,u=window.QSI,l=u.currentURL,d=u.global.brandID,g={LevelName:n,Message:"requestId: "+s+"\n currentURL: "+l+"\n userAgent: "+c+"\n brandID: "+(void 0===d?"unknown":d)+"\n message: "+e};QSI.util.sendHttpRequest({type:"POST",url:i,header:{"Content-type":"application/x-www-form-urlencoded"},includeCookies:!1,data:QSI.util.buildQueryString(g)})}catch(e){window.QSI.isDebug&&console.log(e)}},R.prototype.sampledSend=function(e,t,n,r){Math.random()<=r/100&&this.send(e,t,n)},R),g=(T.prototype.set=function(e,t,n,r,o){void 0===o&&(o={});var i=h.a.global.maxCookieSize,a=this.get(e),s=this.getCookieSize();a&&(s-=(e+"="+a).length);a="";n&&((c=new Date).setTime(c.getTime()+864e5*n),a="; expires="+c.toUTCString());var c="";r?c="domain="+r:h.a.CookieDomain&&(c="domain="+h.a.CookieDomain);e=e+"="+t,t=s+e.length;if(!(o.force||null!==i&&t<=i||null===i))throw new Error("Cannot exceed the specified maximum cookie size");o.erase?this.cookieSize=s:this.cookieSize=t;c=e+a+"; path=/; "+c;"https:"===location.protocol&&(c+="; secure"),document.cookie=c},T.prototype.get=function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){var o=n[r],i=o.indexOf(t);if(~i)return o.substring(i+t.length,o.length)}return null},T.prototype.erase=function(e,t){this.set(e,"",-1,t,{force:!0,erase:!0})},T.prototype.getCookieSize=function(){return this.cookieSize},T.prototype.areCookiesEnabled=function(){try{document.cookie="cookietest=1";var e=-1!==document.cookie.indexOf("cookietest=");return document.cookie="cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT",e}catch(e){return!1}},T),p=(D.prototype.refreshFromCookie=function(){try{var e=window.QSI.cookie.get(this.cookieName);e&&(this.storageCache=JSON.parse(e))}catch(e){this.storageCache={}}},D.prototype.setToCookie=function(){try{window.QSI.cookie.set(this.cookieName,JSON.stringify(this.storageCache))}catch(e){}},D.prototype.setItem=function(e,t){this.storageCache[e]=t,this.setToCookie()},D.prototype.getItem=function(e){return this.storageCache[e]||null},D.prototype.removeItem=function(e){delete this.storageCache[e],this.setToCookie()},D.prototype.reload=function(){this.refreshFromCookie()},D.prototype.clear=function(){this.storageCache={},this.setToCookie()},D),S=(C.prototype.increment=function(e){try{window.QSI.EventTracker.track(e)}catch(e){window.QSI.dbg.e(e)}},C.prototype.count=function(e){try{return window.QSI.EventTracker.get(e)}catch(e){window.QSI.dbg.e(e)}},C.prototype.push=function(e){try{window.QSI.EventTracker.track(e)}catch(e){window.QSI.dbg.e(e)}},C),y=function(){return(y=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},b=["close"],w=(Object.defineProperty(Q.prototype,"name",{get:function(){return this.intercept.Name},enumerable:!0,configurable:!0}),Object.defineProperty(Q.prototype,"id",{get:function(){return this.intercept.InterceptID},enumerable:!0,configurable:!0}),Q.instanceCache={},Q.getInstance=function(e,t){var n=e.InterceptID;return Q.instanceCache[n]||(Q.instanceCache[n]=new Q(e,t)),Q.instanceCache[n]},Q.clearInstanceCache=function(){delete Q.instanceCache,Q.instanceCache={}},Q),v=function(){return(v=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},t=(m.prototype.loadHelper=function(r){try{if(window.QSI.reg||this.unloading)return void r.reject();void 0===window.QSI&&(window.QSI={}),void 0===window.QSI.reg&&(window.QSI.reg={}),void 0===window.QSI.ed&&(window.QSI.ed={}),void 0===window.QSI.reqID&&(window.QSI.reqID={}),void 0===window.QSI.Request&&(window.QSI.Request={}),void 0===window.QSI.styleElements&&(window.QSI.styleElements=[]),window.QSI.util.forOwn(window.QSI.reqID,function(e,t){var n={loadingFromAPI:!0};n.id=t,"Editing"===window.QSI.version&&(n.version="0"),void 0!==window.QSI.global.clientVersion&&null!==window.QSI.global.clientVersion&&(n.Q_CLIENTVERSION=window.QSI.global.clientVersion),void 0!==window.QSI.global.clientType&&null!==window.QSI.global.clientType&&(n.Q_CLIENTTYPE=window.QSI.global.clientType,void 0!==window.QSI.clientTypeVariant&&(n.Q_CLIENTTYPE+=window.QSI.clientTypeVariant)),0===t.search(/ZN/)?n.ZoneID=t:n.InterceptID=t,window.QSI.isDebug&&(n.Q_DEBUG=null),n.deferred=r,window.QSI.Orchestrator.load(n,!1)})}catch(r){window.QSI.dbg.e(r)}},m);function m(){var n=this;this.unloading=!1,this.Events=new S,this.load=function(){try{var e=window.QSI.Orchestrator.Deferred(),t=e.promise();return window.QSI.PendingQueue||(window.QSI.PendingQueue=[]),window.QSI.LoadingState&&0<window.QSI.LoadingState.length?window.QSI.PendingQueue.push(n.loadHelper.bind(n,e)):n.loadHelper.bind(n,e)(),t}catch(e){window.QSI.dbg.e(e)}finally{window.QSI.dbg.log("DXJSAPIEvents: QSI.API.load()",!1,"info")}},this.unload=function(){try{if(window.QSI.PendingQueue||(window.QSI.PendingQueue=[]),window.QSI.LoadingState&&0<window.QSI.LoadingState.length)return void window.QSI.PendingQueue.push(window.QSI.API.unload);if(n.unloading=!0,window.QSI.reg&&(window.QSI.util.forOwn(window.QSI.reg,function(e,t){window.QSI.reg[t].remove()}),window.QSI.util.removeObservers()),window.QSI.debug&&(window.QSI.util.remove(window.QSI.util.$("QSI_Debug")),window.QSI.debuggerHasDisplayed=!1),window.QSI.styleElements)for(var e=window.QSI.styleElements,t=0;t<e.length;t++)window.QSI.util.remove(e[t]);window.QSI.reg=void 0,window.QSI.Request=void 0,window.QSI.styleElements=void 0,window.QSI.callbacks=void 0,w.clearInstanceCache(),n.unloading=!1}catch(e){window.QSI.dbg.e(e)}finally{window.QSI.dbg.log("DXJSAPIEvents: QSI.API.unload()",!1,"info")}},this.run=function(){try{if(window.QSI.PendingQueue||(window.QSI.PendingQueue=[]),window.QSI.LoadingState&&0<window.QSI.LoadingState.length)return void window.QSI.PendingQueue.push(window.QSI.API.run);window.QSI.InterceptsRan||void 0===window.QSI.reg||window.QSI.RunIntercepts(null,!0)}catch(e){window.QSI.dbg.e(e)}finally{window.QSI.dbg.log("DXJSAPIEvents: QSI.API.run()",!1,"info")}},this.getIntercept=function(n){return new Promise(function(e,t){try{window.QSI.PendingQueue||(window.QSI.PendingQueue=[]),window.QSI.LoadingState&&0<window.QSI.LoadingState.length?window.QSI.PendingQueue.push(function(){e()}):e()}catch(e){t(e)}}).then(function(){var e=window.QSI.Orchestrator.getInterceptFromSiResponse(n),t=e[0],e=e[1];if(!t)throw n+" is not a valid Intercept ID";return w.getInstance(v({},t),e?v({},e):null)}).catch(function(e){throw window.QSI.dbg.e(e),e}).finally(function(){window.QSI.dbg.log("DXJSAPIEvents: QSI.API.getIntercept()",!1,"info")})}}function Q(e,t){var o=this;this.intercept=e,this.evaluation=t,this.events=b.reduce(function(e,t){return e[t]={counter:0,callbacks:{}},e},{}),this.addCallbackForEvent=function(e,t){var n=o.events[e],r=String(n.counter++);return n.callbacks[r]=t,function(){n.callbacks[r]&&delete n.callbacks[r]}},this.runCallbacksForEvent=function(e){var t=o.events[e];Object.keys(t.callbacks).forEach(function(e){t.callbacks[e]()})},this.onClose=function(e){return window.QSI.callbacks[o.id].onClose=function(){o.runCallbacksForEvent("close")},o.addCallbackForEvent("close",e)},this.getEvaluationResult=function(){var e,t={passed:!!o.evaluation};return o.evaluation&&o.evaluation.Decision&&(e=o.evaluation.Decision.Target.Type,t=y(y({},t),{targetType:e,targetValue:o.evaluation.Decision.Target.URL}),o.evaluation.Decision.Creative&&(e=o.evaluation.Decision.Creative,t=y(y({},t),{creative:{id:e.ID,name:e.Name,type:e.Type,revision:e.Revision}}))),t},window.QSI.callbacks=window.QSI.callbacks||{},window.QSI.callbacks[this.id]=window.QSI.callbacks[this.id]||{}}function C(){}function D(){this.storageCache={},this.cookieName="QSI_DATA",this.refreshFromCookie()}function T(){var n=this;this.cookieSize=0,document.cookie.split(";").forEach(function(e){var t=e.indexOf("QSI");~t&&(n.cookieSize+=e.length-t)})}function R(){}function E(){var g=this;this.init=function(e,t){if(g.latencyLog=e,g.debugLog=t,g.setupJFEMessageEventHandlerForIOSOptimization(),window.QSI.windows||(window.QSI.windows={}),window.addEventListener("message",g.addWindowHandlersPostMessageListener),g.latencyLog.startTimer(),h.a.config.evaluate&&g.handleSPAEvaluation(h.a.config.evaluate),h.a.global.legacyId){h.a.Request||(h.a.Request={}),h.a.debugConfig=h.a.debugConfig||{};var n=h.a.global.legacyId,r={id:n};g.latencyLog.setRequestId(n),~Object.keys(h.a.Request).indexOf(n)&&e.markDuplicateScriptExecution(),0===n.indexOf("ZN")?r.ZoneID=n:r.InterceptID=n;t=void 0;if(h.a.global.isHostedJS())void 0===(t=g.parseQueryString(window.location.href)).Q_DEBUG&&!h.a.config.debug||(r.Q_DEBUG=null,g.debugLog.enableFullDebug()),!h.a.config.editing&&"0"!==h.a.global.version||(r.version="0");else{n=void 0;if(document.currentScript)n=document.currentScript.src;else try{var o,i=document.querySelectorAll("script"),a=[];for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(a[o]=i[o]);var s=h.a.global.baseURL;0===s.indexOf("https://")?s=s.substring(8):0===s.indexOf("http://")?s=s.substring(7):0===s.indexOf("//")&&(s=s.substring(2)),n=a.filter(function(e){return(-1!==e.src.indexOf(s+"/WRSiteInterceptEngine/?")||-1!==e.src.indexOf(s+"/SIE/?"))&&-1===e.src.indexOf("Q_Impress")&&-1===e.src.indexOf("Q_Redirect")&&-1===e.src.indexOf("Q_Click")&&-1===e.src.indexOf("Q_DPR")})[0].src}catch(e){g.debugLog.e("An error occurred while loading the intercept. "+e)}void 0!==(t=g.parseQueryString(n)).Q_NOCACHE&&(r.Q_NOCACHE=null),void 0!==t.Q_BOOKMARKLET&&(r.Q_BOOKMARKLET=null,r.Q_DEBUG=null,g.debugLog.enableFullDebug()),void 0!==t.Q_DEBUG&&(r.Q_DEBUG=null,g.debugLog.enableFullDebug()),void 0!==t.Q_VERSION&&(r.version=t.Q_VERSION)}return void 0!==h.a.global.clientVersion&&null!==h.a.global.clientVersion&&(r.Q_CLIENTVERSION=h.a.global.clientVersion),void 0!==h.a.global.clientType&&null!==h.a.global.clientType&&(r.Q_CLIENTTYPE=h.a.global.clientType,void 0!==h.a.clientTypeVariant&&(r.Q_CLIENTTYPE+=h.a.clientTypeVariant)),-1!==window.location.search.indexOf("Q_WAF_PREVIEWER")?Promise.all([f.e(13),f.e(11)]).then(f.bind(null,49)).then(function(e){new e.LivePreviewer}).catch(function(e){g.debugLog.e("An error occurred while loading the live previewer. "+e)}):(g.load(r,!1),Promise.resolve(null))}if(!h.a.Request){h.a.Request={};for(var c=document.querySelectorAll("[data-siteinterceptscript]"),u=0;u<c.length;u++){var l=c[u];h.a.isDebug=h.a.isDebug||l.hasAttribute("data-qdebug")||-1!==window.location.href.indexOf("Q_DEBUG"),h.a.isDebug&&g.debugLog.enableFullDebug();var d={};return l.hasAttribute("data-interceptid")&&(d.InterceptID=l.getAttribute("data-interceptid"),d.id=d.InterceptID),l.hasAttribute("data-zoneid")&&(d.ZoneID=l.getAttribute("data-zoneid"),d.id=d.ZoneID),l.hasAttribute("data-qnocache")&&(d.Q_NOCACHE=null),l.hasAttribute("data-qbookmarklet")&&(d.Q_BOOKMARKLET=null),h.a.isDebug&&(d.Q_DEBUG=null),l.hasAttribute("data-version")&&(d.version=l.getAttribute("data-version")),g.load(d,!1),Promise.resolve(null)}}},this.generateQueryString=h.a.generateQueryString,this.getClientVersionQueryString=h.a.getClientVersionQueryString,this.Deferred=function(){var n={},r="pending",o=[],i=[],a=[],s=[],c=g,u={state:function(){return r},then:function(e,t){return this.done(e).fail(t),this},done:function(e){if("pending"===r&&e)a.push(e);else if("resolved"===r)try{e.apply(this,o)}catch(e){c.debugLog.e(e)}return this},fail:function(e){if("pending"===r&&e)s.push(e);else if("rejected"===r)try{e.apply(this,i)}catch(e){c.debugLog.e(e)}return this},promise:function(){return u}};return g.forOwn(u,function(e,t){n[t]=u[t]}),n.resolve=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];"pending"===r&&(r="resolved",o=t,c.each(a,function(e){try{e.apply(c,t)}catch(e){c.debugLog.e(e)}}))},n.reject=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];"pending"===r&&(r="rejected",i=t,c.each(s,function(e){try{e.apply(c,t)}catch(e){c.debugLog.e(e)}}))},n},this.getInterceptFromSiResponse=function(n){var e=g.lastSiResponse;if(e&&e.ClientSideIntercepts){var t=null;return[e.ClientSideIntercepts.reduce(function(e,t){return e||t.InterceptID===n?t:e},null),t=e.Intercepts?e.Intercepts.reduce(function(e,t){return e||t.InterceptID===n?t:e},null):t]}return null}}function O(e,t,n){this.retryerName=e,this.retryLimit=t,this.retryBackOffFormula=n,this.retryCount=0}function L(e){var o=this;this.metricName=L.metricName,this.components=L.components,this.overallLatencyStartTime=null,this.overallLatency=null,this.componentStartTimes={},this.componentLatencies={},this.isDuplicateScriptExecution=!1,this.setRequestId=function(e){o.requestId=e},this.startTimer=function(){o.latencyStartTime=Date.now()},this.endTimer=function(){null!==o.latencyStartTime?o.overallLatency=Date.now()-o.latencyStartTime:o.debugLog.e("Tried to log overall end time without a start time.")},this.startComponentTimer=function(e){o.componentStartTimes[e]=Date.now()},this.endComponentTimer=function(e){var t=o.componentStartTimes[e];void 0!==t?o.componentLatencies[e]=Date.now()-t:o.debugLog.e("Tried to log a component end time without a component start time.  Component name: "+e)},this.markComponentAlreadyFetched=function(e){o.componentLatencies[e]||(o.componentLatencies[e]=L.alreadyFetchedMarker)},this.markDuplicateScriptExecution=function(){o.isDuplicateScriptExecution=!0},this.send=function(){try{if(null===o.overallLatency)return void o.debugLog.e("Incomplete Latency Data Provided");var e,t=h.a.baseURL+"Ajax.php?action=LatencyLog&"+h.a.getClientVersionQueryString(),n=[];for(e in h.a.Request)Object.prototype.hasOwnProperty.call(h.a.Request,e)&&e!==o.requestId&&n.push(e);var r={MetricName:L.metricName,Latency:o.overallLatency,ComponentLatencies:o.componentLatencies,AdditionalData:{RequestID:o.requestId,ClientURL:h.a.currentURL,UserAgent:navigator.userAgent,BrandID:h.a.global.brandID,BrandDC:h.a.global.brandDC,OtherRequestIDsExecuted:n,IsDuplicateScriptExecution:o.isDuplicateScriptExecution}};QSI.util.sendHttpRequest({type:"POST",url:t,header:{"Content-type":"application/x-www-form-urlencoded"},includeCookies:!1,data:QSI.util.buildQueryString({LoggingData:JSON.stringify(r)})})}catch(e){o.debugLog.e(e)}},this.sampledSend=function(e){try{Math.random()<=e/100==1&&o.send()}catch(e){o.debugLog.e(e)}},this.debugLog=e}var A=new s,k=new I(A);window.QSI.API=window.QSI.API||new t,window.QSI.ClientLog=new c,window.QSI.dbg=A,window.QSI.LatencyLog=k,window.QSI.EventTracker=new n,window.QSI.cookie=new g,window.QSI.CookieStorage=new p,window.QSI.Orchestrator=new i,"function"!=typeof window.Promise||"function"!=typeof window.IntersectionObserver?window.QSI.AssetManager.promiseLoadScript("Polyfills",h.a.global.clientVersion,h.a,k).then(function(){window.QSI.Orchestrator.init(k,A)}):window.QSI.Orchestrator.init(k,A)}])}catch(e){"undefined"!=typeof QSI&&QSI.dbg&&QSI.dbg.e&&QSI.dbg.e(e)}
