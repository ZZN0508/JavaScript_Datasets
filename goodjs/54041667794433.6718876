(self.webpackChunklite=self.webpackChunklite||[]).push([[7883],{7883:(e,n,t)=>{"use strict";t.d(n,{Z:()=>c,G:()=>f});var n=t(28655),o=t.n(n),n=t(63038),Ce=t.n(n),n=t(71439),xe=t(67294),ye=t(12291),we=t(93653),Pe=t(46829);function i(){var e=o()(["\n  mutation DismissPostMutation($postId: ID!) {\n    dismissPost(postId: $postId)\n  }\n"]);return e}function Se(e){var n=e.viewer,t=e.show,e=e.post;return n&&"PENDING"===e.statusForCollection&&((0,s.DM)(e)||(0,s.py)(e,n))?xe.createElement(Ue.Sl,null,xe.createElement(Oe.rU,{ariaControls:p,ariaExpanded:"false",onClick:t},"Manage submission")):null}function Ie(e){var n=e.children,t=e.isVisible,o=e.post,i=e.hide,r=e.showLoadingIndicator,l=(0,d.h3)(o),a=(0,d.yb)(o),c=(0,ye.I0)(),s=o.pendingCollection;return s?xe.createElement(Oe.J2,{ariaId:p,isVisible:t,hide:i,popoverRenderFn:function(){return xe.createElement(Oe.xu,{padding:"16px",maxWidth:"280px"},xe.createElement(Oe.xu,{display:"flex",flexDirection:"row",alignItems:"center"},xe.createElement(Oe.xu,{paddingRight:"8px"},xe.createElement(u.v,{collection:s,size:40})),xe.createElement(m.F,{scale:"S"},"This draft is submitted to ",s.name,".")),xe.createElement(Oe.xu,{flexDirection:"row",display:"flex",paddingTop:"16px"},xe.createElement(Oe.xu,{paddingRight:"8px"},xe.createElement(Oe.zx,{buttonStyle:"OBVIOUS",onClick:function(){i(),r(),l(o.pendingCollection).then(function(){window.location.reload(!1)})}},"Accept")),xe.createElement(Oe.zx,{buttonStyle:"SUBTLE",onClick:function(){a(o.pendingCollection).then(function(){c((0,Ve.Dx)({message:"Story removed from ".concat(s.name||"publication")}))}),i()}},"Don't accept")))}},n):n}function Fe(e){var n=e.viewer,t=e.show,e=e.post;return n&&("APPROVED"===e.statusForCollection&&((0,s.DM)(e)||(0,s.py)(e,n)||(0,s.Hj)(e,n))||"PENDING"===e.statusForCollection&&(0,s.Hj)(e,n))?xe.createElement(Ue.Sl,null,xe.createElement(Oe.rU,{ariaControls:E,ariaExpanded:"false",onClick:t},"Remove story from publication")):null}function De(e){var n=e.children,t=e.isVisible,o=e.hide,i=e.post,r=e.viewer,l=(0,ye.I0)(),a=(0,d.yb)(i),c=i.collection||i.pendingCollection;return c?xe.createElement(Oe.J2,{ariaId:E,isVisible:t,hide:o,popoverRenderFn:function(){return xe.createElement(Oe.xu,{padding:"16px",maxWidth:"280px"},xe.createElement(Oe.xu,{display:"flex",flexDirection:"row",alignItems:"center"},xe.createElement(Oe.xu,{paddingRight:"8px"},xe.createElement(u.v,{collection:c,size:40})),"APPROVED"===i.statusForCollection?xe.createElement(m.F,{scale:"S"},(0,s.Hj)(i,r)?"Your":"This"," story is published in"," ",c.name,"."):"PENDING"===i.statusForCollection?xe.createElement(m.F,{scale:"S"},"Your story is being reviewed by ",c.name," editors."):xe.createElement(m.F,{scale:"S"},"This draft is submitted to ",c.name)),xe.createElement(Oe.xu,{flexDirection:"row",display:"flex",paddingTop:"16px"},xe.createElement(Oe.xu,{paddingRight:"8px"},xe.createElement(Oe.zx,{buttonStyle:"SUBTLE",onClick:function(){a(c).then(function(){l((0,Ve.Dx)({message:"Story removed from ".concat(c.name||"publication")}))},function(){l((0,Ve.Dx)({message:"There was a problem removing the story from ".concat(c.name||"publication"),toastStyle:"ERROR"}))}),o()}},"PENDING"===i.statusForCollection?"Cancel submission":"Remove from ".concat(c.name||"")))))}},n):n}var ke=(0,n.Ps)(i()),_e=t(35848),Re=t(42963),Te=t(53962),Me=t(62806),Ae=t(1506),u=t(73882),d=t(71245),s=t(74871),Ue=t(32262),Oe=t(78181),m=t(64504),Ve=t(85277),p="manageSubmissionPopover",E="removeFromPublicationPopover",Le=t(965),Be=t(49925),Ne=t(78820),He=t(73232),Ke=t(85740),ze=t(53976),Qe=t(34675),Ge=t(62181),je=t(57469),qe=t(23824),Je=t(29169),We=t(14391),$e=t(65347),Xe=t(67297),r=t(93394),Ye=t(39171),Ze=t(51064),en=t(95614),nn=t(55573),tn=t(27952);function l(){var e=o()(["\n  fragment CreatorActionOverflowPopover_post on Post {\n    allowResponses\n    id\n    statusForCollection\n    isLocked\n    isPublished\n    clapCount\n    mediumUrl\n    pinnedAt\n    pinnedByCreatorAt\n    curationEligibleAt\n    mediumUrl\n    responseDistribution\n    visibility\n    ...useIsPinnedInContext_post\n    pendingCollection {\n      id\n      name\n      creator {\n        id\n      }\n      avatar {\n        id\n      }\n      viewerEdge {\n        id\n        isEditor\n      }\n      domain\n      slug\n    }\n    creator {\n      id\n      viewerEdge {\n        id\n        isBlocking\n      }\n      ...MutePopoverOptions_creator\n      ...auroraHooks_publisher\n    }\n    collection {\n      id\n      name\n      creator {\n        id\n      }\n      avatar {\n        id\n      }\n      viewerEdge {\n        id\n        isEditor\n      }\n      domain\n      slug\n      ...MutePopoverOptions_collection\n      ...auroraHooks_publisher\n    }\n    viewerEdge {\n      clapCount\n      id\n      shareKey\n    }\n    ...ClapMutation_post\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return e}var a=function(e){return{fill:e.baseColor.fill.normal,":hover":{fill:e.baseColor.fill.darker},":focus":{fill:e.baseColor.fill.darker}}};function on(){return xe.createElement(Oe.hS,null,function(e){return xe.createElement(r.Z,{className:e(a)})})}var c=function(e){var n,t=e.creator,o=e.post,i=e.collection,r=e.showLoadingIndicator,l=e.setIsAuthorOrPubMuted,a=e.setMutedAuthorId,c=e.setMutedPubId,s=e.onPostDismissed,u=e.isMutingFromHomeFeed,d=e.isDismissDisabled,m=e.isMuteDisabled,p=e.hideUndoApplause,E=void 0!==p&&p,f=xe.useState(!1),v=Ce()(f,2),h=v[0],g=v[1],b=xe.useState(!1),C=Ce()(b,2),x=C[0],y=C[1],w=xe.useState(!1),P=Ce()(w,2),S=P[0],I=P[1],F=(0,Xe.b$)(function(e){return e.multiVote.clapsPerPost}),D=(0,ye.I0)(),k=xe.useCallback(function(e){return D((0,$e.at)(e))},[D]),_=(0,nn.l)(F,o,o.viewerEdge),R=_.clapCount,T=_.viewerClapCount,M=(0,Ve.w)(),A=(0,Qe.Hk)().value,U=null==A?void 0:A.id,O=!!(0,ze.V)({name:"enable_updated_three_dot_menu",placeholder:!1}),V=(0,Le.CP)(),L=(n=o.id,(0,Pe.useMutation)(ke,{variables:{postId:n}})),B=Ce()(L,1)[0],e=(0,Ne.KQ)(o),p=Ce()(e,2),N=p[0],H=p[1],K=(0,Be.UL)(o.collection),z=(0,Be.UL)(o.creator),Q=xe.useCallback(function(e){var n;M({extraParams:{collectionName:(null===(n=o.collection)||void 0===n?void 0:n.name)||"",becamePinned:!!e.data.setPinnedAt.pinnedAt},message:"",toastStyle:"POST_PINNED_TO_COLLECTION_HOMEPAGE"})},[null===(f=o.collection)||void 0===f?void 0:f.name]),G=xe.useCallback(function(e){M({message:e.data.postSetPinnedByCreatorAt.pinnedByCreatorAt?"This story has been pinned to your profile's homepage":"This story has been unpinned from your profile's homepage"})},[]),j=xe.useCallback(function(){H().then(Q)},[H,Q,null==o||null===(te=o.collection)||void 0===te?void 0:te.name]),v=(0,Ne.In)(o),b=Ce()(v,2),q=b[0],J=b[1],W=xe.useCallback(function(){J().then(G)},[J,G]),$=!(0,en.T)(),X=(0,Xe.v9)(function(e){return e.config.authDomain}),C=xe.useState(!1),w=Ce()(C,2),P=w[0],Y=w[1],Z=o.responseDistribution===We.Et.DISTRIBUTED,F=(0,Ze.O)(!1),_=Ce()(F,3),n=_[0],ee=_[1],L=_[2],e=(0,Ze.O)(!1),p=Ce()(e,4),f=p[0],ne=p[2],te=p[3],v=(0,we.j)(o.id),oe=Ce()(v,1)[0],b=(0,Ze.O)(!1),C=Ce()(b,3),w=C[0],ie=C[1],F=C[2],_=xe.useCallback(function(){oe().then(function(){return window.location.reload()})},[oe]),e="Delete story".concat(Z?" and response":""),p=Z?He.Q:"Are you sure you want to delete this story?",v=(0,Ke.P5)("can_edit_members_only_posts");if(!t||!A)return null;function re(){return xe.createElement(_e.qT,{hidePopover:ne,creator:t,collection:i,postId:o.id,setIsAuthorOrPubMuted:l,setMutedAuthorId:a,setMutedPubId:c,isMutingFromHomeFeed:u})}function le(){return xe.createElement(Fe,{viewer:A,post:o,show:function(){I(!0),ne()}})}function ae(){return xe.createElement(Me.r,{hidePopover:ne,postId:o.id,allowResponses:ue})}function ce(){return xe.createElement(xe.Fragment,null,A.id&&R&&T&&0<T?xe.createElement(Ue.Sl,null,xe.createElement(Oe.rU,{onClick:function(){V(o,(null==A?void 0:A.id)||"",-T),k({postId:de,clapCount:R-T,viewerClapCount:0,viewerHasClappedSinceFetch:!0}),ne()}},"Undo applause for this post")):null)}function se(){return xe.createElement(xe.Fragment,null,U?xe.createElement(Je.z,{targetUserId:t.id,postId:o.id,hidePopover:ne,viewerId:U}):xe.createElement(Ue.Sl,null,xe.createElement(Ge.R9,{operation:"register",post:o,susiEntry:"report_footer"},"Report this story")))}var ue=o.allowResponses,de=o.id,b=o.pendingCollection,me=o.mediumUrl,pe=o.viewerEdge.shareKey,C=o.visibility,Ee=U===t.id,fe=(null==i?void 0:i.viewerEdge.isEditor)||(null==b?void 0:b.viewerEdge.isEditor),ve=Ee||fe,v=v&&o&&o.isLocked,he=ve||v,v="creatorActionOverflowMenu",ge="LOCKED"===C,be=fe&&!Ee||!ve;return P?xe.createElement(Re.l,{to:(0,tn.d0A)(X,o.id)}):xe.createElement(xe.Fragment,null,xe.createElement(Oe.QH,{buttonStyle:"STRONG",cancelText:"Cancel",isVisible:n,onConfirm:function(){Y(!0)},hide:L,titleText:"Edit story and response",confirmText:"Continue",isDestructiveAction:!1},He.t),xe.createElement(Oe.QH,{buttonStyle:"ERROR",cancelText:"Cancel",isVisible:w,onConfirm:_,hide:F,titleText:e,confirmText:"Delete",isDestructiveAction:!0},p),xe.createElement(Oe.J2,{ariaId:v,isVisible:f,hide:ne,popoverRenderFn:function(){return xe.createElement(Ue.mX,null,xe.createElement(xe.Fragment,null,$&&he?xe.createElement(Ue.Sl,null,Z?xe.createElement(Oe.rU,{linkStyle:"SUBTLE",onClick:(0,Ye.B)(ne,ee)},"Edit story"):xe.createElement(Oe.rU,{linkStyle:"SUBTLE",href:(0,tn.d0A)(X,o.id)},"Edit story")):null,i&&fe&&K&&xe.createElement(Ue.Sl,null,xe.createElement(Oe.rU,{onClick:j},N?"Unpin this story from ":"Pin this story to ",i.name)),Ee&&z&&xe.createElement(Ue.Sl,null,xe.createElement(Oe.rU,{onClick:W},q?"Unpin this story from your profile":"Pin this story to your profile")),U&&!d?xe.createElement(Ue.Sl,null,xe.createElement(Oe.rU,{onClick:function(){B({variables:{postId:o.id}}),s&&s(o.id),ne()}},"Dismiss this story")):null,ve?xe.createElement(xe.Fragment,null,xe.createElement(Ue.oK,null),xe.createElement(Ue.Sl,null,xe.createElement(Oe.rU,{href:(0,tn.KIb)(X,o.id)},"Story settings"))):null,ve&&xe.createElement(Ue.Sl,null,xe.createElement(Oe.rU,{href:(0,tn.T0G)(X,o.id)},O?"Story stats":"View stats")),ve&&ge&&me&&pe&&xe.createElement(Te.$,{post:o,shareKey:pe}),O?xe.createElement(xe.Fragment,null,ve&&xe.createElement(Ue.oK,null)):xe.createElement(xe.Fragment,null,ve?xe.createElement(xe.Fragment,null,!m&&re(),xe.createElement(Ae.yi,{post:o,show:function(){y(!0),ne()}}),le(),xe.createElement(Se,{viewer:A,post:o,show:function(){g(!0),ne()}}),ae()):null),O?xe.createElement(xe.Fragment,null,ve?xe.createElement(xe.Fragment,null,ae(),le(),Ee&&xe.createElement(Ue.Sl,null,xe.createElement(Oe.rU,{onClick:(0,Ye.B)(ne,ie)},"Delete story"))):null):ve?xe.createElement(xe.Fragment,null,xe.createElement(Ue.oK,null),!Ee&&ce(),se(),xe.createElement(je.F,{hidePopover:ne,creator:t,viewer:A})):null,O?xe.createElement(xe.Fragment,null,be?xe.createElement(xe.Fragment,null,fe&&xe.createElement(Ue.oK,null),!E&&ce(),se(),xe.createElement(_e.qT,{hidePopover:ne,creator:t}),xe.createElement(je.F,{hidePopover:ne,creator:t,viewer:A}),xe.createElement(qe.j,{hidePopover:ne,creator:t,viewer:A})):null):xe.createElement(xe.Fragment,null,ve?null:xe.createElement(xe.Fragment,null,re(),!E&&ce(),se(),xe.createElement(je.F,{hidePopover:ne,creator:t,viewer:A})))))}},xe.createElement(Ae.jB,{post:o,isVisible:x,hide:function(){y(!1)},showLoadingIndicator:r},xe.createElement(De,{viewer:A,post:o,isVisible:S,hide:function(){I(!1)}},xe.createElement(Ie,{post:o,isVisible:h,hide:function(){g(!1)},showLoadingIndicator:r},xe.createElement(Oe.xu,{flexGrow:"0",marginRight:"-4px"},xe.createElement(Oe.rU,{ariaControls:v,ariaExpanded:f?"true":"false",ariaLabel:"More options",onClick:te},xe.createElement(on,null))))))))},f=(0,n.Ps)(l(),_e.mz,_e.Gj,Le.JP,Ne.xt,Be.C5)},1506:(e,n,t)=>{"use strict";t.d(n,{x7:()=>y,yi:()=>function(e){var o=e.show,i=e.post,n=i.statusForCollection,t=i.isPublished,r=g.useState(!1),e=a()(r,2),r=e[0],l=e[1];return r||x.V6.on("load",function(){return l(!0)}),!n&&t&&r?g.createElement(F,{post:i,noQueryReturn:null},function(e){var n=e.loading,t=e.error,e=e.data;if(n||t)return null;t=(void 0===e?{viewer:void 0}:e).viewer,e=i.creator;if(!t||!e||t.id!==e.id)return null;e=t.adminCollections,t=t.writerCollections;return 0===e.length&&0===t.length?null:g.createElement(u.Sl,null,g.createElement(b.rU,{ariaControls:w,ariaExpanded:"false",onClick:o},"Add to publication"))}):null},jB:()=>D});var o=t(63038),a=t.n(o),n=t(28655),i=t.n(n),o=t(71439),r=t(80439),g=t(67294),l=t(73882),c=t(71245),n=t(74871),s=t(34675),u=t(32262),b=t(78181),C=t(64504),x=t(72955);function d(){var e=i()(["\n  fragment CollectionSubmission_post on Post {\n    id\n    ...CollectionSubmissionPopover_post\n    ...CollectionSubmissionPopoverMenuItem_post\n  }\n  ","\n  ","\n"]);return e}function m(){var e=i()(["\n  fragment CollectionSubmissionPopover_post on Post {\n    id\n    isPublished\n    creator {\n      id\n    }\n  }\n"]);return e}function p(){var e=i()(["\n  fragment CollectionSubmissionPopoverMenuItem_post on Post {\n    id\n    statusForCollection\n    isPublished\n    creator {\n      id\n    }\n  }\n"]);return e}function E(){var e=i()(["\n  query CollectionSubmissionPopoverQuery {\n    viewer {\n      id\n      writerCollections {\n        ...CollectionSubmissionPopoverQuery_collection\n      }\n      adminCollections {\n        ...CollectionSubmissionPopoverQuery_collection\n      }\n    }\n  }\n  ","\n"]);return e}function f(){var e=i()(["\n  fragment CollectionSubmissionPopoverQuery_collection on Collection {\n    ...CollectionSubmissionOption_collection\n    ...ManageSubmission_collection\n  }\n  ","\n  ","\n"]);return e}function v(){var e=i()(["\n  fragment CollectionSubmissionOption_collection on Collection {\n    id\n    name\n    slug\n    ...CollectionAvatar_collection\n  }\n  ","\n"]);return e}var t=(0,o.Ps)(v(),l.d),t=(0,o.Ps)(f(),t,n.a6),h=(0,o.Ps)(E(),t),n=(0,o.Ps)(p()),t=(0,o.Ps)(m()),y=(0,o.Ps)(d(),t,n),w="collectionSubmissionPopover",P=[{name:"",value:"No publication",content:g.createElement(b.xu,{height:"32px",display:"flex",alignItems:"center",marginLeft:"5px"},g.createElement(C.F,{scale:"M",color:"DARKER"},"No publication"))}];function S(e){e=e.collection;return e.name?g.createElement(b.xu,{display:"flex",justifyContent:"space-between",width:"200px",alignItems:"center",marginLeft:"5px"},g.createElement(C.F,{scale:"M",color:"DARKER"},e.name),g.createElement(l.v,{collection:e,size:32})):null}function I(e){var n=e.isVisible,e=e.hide;return g.createElement(b.Vq,{isVisible:n,hide:e,withCloseButton:!0},g.createElement(b.xu,{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",maxWidth:"480px"},g.createElement(C.X6,{scale:"M",tag:"h3"},"Story submitted"),g.createElement(b.xu,{paddingTop:"8px",paddingBottom:"24px"},g.createElement(C.QE,{scale:"M"},"Weâ€™ll email you when the publication editor has reviewed your submission.")),g.createElement(b.zx,{buttonStyle:"OBVIOUS",onClick:e},"OK")))}var F=function(e){var o=e.children,n=e.post,t=e.noQueryReturn,i=n.creator;return i?g.createElement(s.I8,null,function(e){return!e||e.id!==i.id?t:g.createElement(r.AE,{query:h,ssr:!1},function(e){var n=e.loading,t=e.error,e=e.data;return o({loading:n,error:t,data:e})})}):t},D=function(e){var s=e.post,u=e.hide,d=e.showLoadingIndicator,m=e.isVisible,p=e.children,n=g.useState(!1),e=a()(n,2),n=e[0],t=e[1],e=g.useState(""),e=a()(e,2),E=e[0],f=e[1],v=(0,c.h3)(s),h=(0,c.Lf)(s);return n||x.V6.on("load",function(){return t(!0)}),s.isPublished&&n?g.createElement(b.Bn,null,function(e){var n=e.isVisible,t=e.hide,c=e.show;return g.createElement(g.Fragment,null,g.createElement(I,{hide:t,isVisible:n}),g.createElement(F,{post:s,noQueryReturn:p},function(e){var n=e.loading,t=e.error,e=e.data;if(n||t)return p;n=(void 0===e?{viewer:void 0}:e).viewer,t=s.creator;if(!n||!t||n.id!==t.id)return p;e=n.adminCollections,t=n.writerCollections;if(0===e.length&&0===t.length)return p;var n=e.concat(t).filter(function(e){return!!e&&!!e.slug&&!!e.name}).map(function(e){return{name:e.slug||"",value:e.name||"",content:g.createElement(S,{collection:e})}}),o=P.concat(n),i=e.reduce(function(e,n){return e[n.slug||""]=n,e},{}),r=t.reduce(function(e,n){return e[n.slug||""]=n,e},{}),l="";!E||(t=o.find(function(e){return e.name===E}))&&(l=t.value);var a="addStoryToPublicationTitle";return g.createElement(b.J2,{ariaId:w,hide:u,isVisible:m,popoverRenderFn:function(){return g.createElement(b.xu,{padding:"20px",width:"280px",display:"flex",flexDirection:"column"},g.createElement(C.F,{scale:"M",color:"DARKER",ariaLabelledById:a},"Add your story to a publication:"),g.createElement(b.xu,{marginTop:"10px",position:"relative"},g.createElement(b.xu,{position:"absolute",height:"16px",width:"100%",bottom:"0",zIndex:"100",backgroundImage:"linear-gradient(transparent, #ffffff)"}),g.createElement(b.xu,{maxHeight:"160px",overflow:"auto"},g.createElement(b.Ee,{value:l,onChange:f,options:o,radioButtonsName:"addStory",ariaLabelledBy:a}))),g.createElement(b.xu,{display:"flex",marginTop:"20px"},E in i?g.createElement(b.zx,{onClick:function(){var e=i[E];u(),d(),v(e).then(function(){window.location.reload(!1)})},buttonStyle:"OBVIOUS"},"Add story"):g.createElement(b.zx,{onClick:function(){var e=r[E];h(e),u(),c()},disabled:!E},"Submit"),g.createElement(b.xu,{marginLeft:"10px"},g.createElement(C.F,{scale:"M",color:"LIGHTER"},g.createElement(b.rU,{onClick:u},g.createElement(b.xu,{padding:"10px"},"Cancel"))))),g.createElement(b.xu,{marginTop:"10px"},g.createElement(C.F,{scale:"M"},"This story will be automatically submitted to the publication. When you submit your story, the publication's editors will be notified and will be able to edit your story.")))}},p)}))}):p}},74871:(e,n,t)=>{"use strict";t.d(n,{Hj:()=>l,py:()=>a,DM:()=>c,a6:()=>s,En:()=>u});var n=t(28655),o=t.n(n),n=t(71439),t=t(73882);function i(){var e=o()(["\n  fragment ManageSubmission_post on Post {\n    id\n    statusForCollection\n    collection {\n      ...ManageSubmission_collection\n    }\n    pendingCollection {\n      ...ManageSubmission_collection\n    }\n    creator {\n      id\n    }\n  }\n  ","\n"]);return e}function r(){var e=o()(["\n  fragment ManageSubmission_collection on Collection {\n    name\n    creator {\n      id\n    }\n    viewerEdge {\n      id\n      isEditor\n    }\n    ...CollectionAvatar_collection\n  }\n  ","\n"]);return e}var l=function(e,n){return n&&e.creator&&n.id===e.creator.id},a=function(e,n){e=e.pendingCollection||e.collection;return e&&e.creator&&n.id===e.creator.id},c=function(e){e=e.pendingCollection||e.collection;return null==e?void 0:e.viewerEdge.isEditor},s=(0,n.Ps)(r(),t.d),u=(0,n.Ps)(i(),s)}}]);
