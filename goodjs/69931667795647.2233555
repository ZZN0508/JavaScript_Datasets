define(["./../sg","local/common/components/nsglibCommon"],function(t,i){var n=!1;return{init:function(){function e(){t.onAd(function(e,t,n,a,l){var r,o,d;"flat-search-json"===e?(r=n,(d=document.getElementById("searchQuery"))&&r&&r.value&&(d.value=(o=r.value,(r=document.createElement("textarea")).innerHTML=o,r.innerHTML),i.domBuilder.addEvent(d,"click",function e(){d.value="",i.domBuilder.removeEvent(d,"click",e)}))):/flat-link/.test(e)&&c(t,n)})}!1===n&&(n=!0,setTimeout(function(){e()},0))},onAdLink:c};function c(e,t){var n="onet-ad-"+e.replace("-json",""),a=document.getElementById(n);a&&t&&t.url&&t.link&&(e={href:t.url},t.blank&&"1"===t.blank&&(e.target="_blank"),e=(n=i.domBuilder.createFragment()).create("a").setAttr(e),void 0!==t.html&&e.setHtml(t.html),(e=e.create("span").setAttr({class:"title"})).createText(t.link+" "),a.parentNode.insertBefore(n.getDomElement(),a),(t=a.getAttribute("data-add-label"))&&"1"===t&&((n=i.domBuilder.createFragment()).create("span").createText("REKLAMA").addClass("newsAdd"),e.appendChild(n.getDomElement())),i.domBuilder.removeClass(a.parentNode,"hide"))}});
