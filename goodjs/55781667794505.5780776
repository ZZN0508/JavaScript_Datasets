!function(){var e,n,t;VWO.v_t="7.0.144",e=function(){return VWO&&VWO._&&VWO._.libLoaded},n=function(){!function(){var s={TRACK_PAGE_COOKIE_NAME:"_vwo_p",FUNNEL_EXPIRY:100,INITIAL_PRICING_VERSION:0,FEATURE_BUCKET_INDEX:1,SAMPLING_VERSION_INDEX:2,TRACK_GLOBAL_COOKIE_EXPIRY_STATE_INDEX:3,FUNNEL_INFORMATION_INDEX:2,GOAL_INFORMATION_INDEX:3,ANALYZE_INFORMATION_INDEX:4,CRO_START_TIMESTAMP_INDEX:5,PAGE_ID_INFORMATION_INDEX:1,ANALYSE_SERVER_NAME_INDEX:2,TRACK_PAGE_ID_INFORMATION_INDEX:3};function n(){var e=G.getDataStore();e&&((e=e.split(":"))[s.ANALYZE_INFORMATION_INDEX]=function(e){for(var n=C.getKeys(e),t=n.length,i="";t--;)i+=n[t]+"_"+e[n[t]]+(0===t?"":",");return i}(m.analyze),G.setDataStore(e.join(":")))}VWO._.commonUtil.extend(s,VWO._.CookieEnum);var o,r,u,l,t,I,d,_,E,e,i,c,g,N,O,A,f,a,S,T,p,V,R,C=VWO._.commonUtil,m={analyze:{}},v=0,G={init:function(){var e,n;m.analyze=(n={},n=(e=G.getDataStore())?function(e){var n,t,i={};if(!e)return i;for(e=e.split(","),v=0;v<e.length;v++)n=(t=e[v].split("_"))[0],t=t[1],i[n]=t;return i}(e.split(":")[s.ANALYZE_INFORMATION_INDEX]):n)},includeAnalyzeCampaign:function(e){m.analyze[e]="1",n()},excludeAnalyzeCampaign:function(e){m.analyze[e]="0",n()},isAnalyzeCampaignIncluded:function(e){if("1"===m.analyze[e]||1===m.analyze[e])return"1"},isAnalyzeCampaignExcluded:function(e){return"0"===m.analyze[e]||0===m.analyze[e]}};VWO._.commonUtil.extend(G,VWO._.commonCookieHandler),window.___vwo=1,VWO._.track.loaded||(o=VWO._.utils,r=VWO._.CampaignEnum,u=VWO._.GoalsEnum,l=VWO._.libUtils,t=VWO._.cookies,I=VWO._.EventsEnum,d=VWO._.triggerEvent,_=VWO._.commonUtil,E=VWO._.coreLib,e=VWO._.vwoLib,VWO._.campaign,i=VWO._.listener,c=VWO._.sessionInfoService,g=VWO._.tags,N=window._vwo_acc_id,O=window._vwo_exp,A=window._vwo_exp_ids,s.FUNNEL_EXPIRY=VWO.FUNNEL_EXPIRY_CUSTOM||100,f={setUp:function(){f.preProcessData()},init:function(){return f.initiated||l.doesUuidCookiesExist()||(t.erase(s.TRACK_SESSION_COOKIE_NAME),t.erase(s.TRACK_GLOBAL_COOKIE_NAME)),f.expireGlobalCookie(),f.expireGoals(),f.createGlobalCookieReturnEligibility()?(f.isUserBucketed()?f.startSession():d(I.RECORDING_NOT_ELIGIBLE,"USER_NOT_BUCKETED"),f.expireFunnels(_.getServerStartTimestamp(!0)),G.init(),f.initiated=!0,!(f.visitorRetracked=!1)):(d(I.RECORDING_NOT_ELIGIBLE,"URL_NOT_MATCHING"),!1)},preProcessData:function(){VWO.data.url=VWO.data.url||{},VWO.data.url.i=VWO.data.url.i||".*"},isUserEligible:function(){return E.compareUrlWithIncludeExcludeRegex(E.getCurrentUrl(),VWO.data.url.i,VWO.data.url.e).didMatch},expireGlobalCookie:function(){f.shouldExpireGlobalCookie()&&(t.erase(s.TRACK_GLOBAL_COOKIE_NAME),t.erase(s.TRACK_SESSION_COOKIE_NAME))},getLatestSamplingVersion:function(){return window.VWO.data.pvn||s.INITIAL_PRICING_VERSION},getCpt:function(){return window.VWO.data.cpt||0},updateTrackPageId:function(){var e=f.getTrackPageId()+1;return f.markTrackPageId(e),e},getTrackPageId:function(){var e=c.getSNCookieValueByIndex(s.TRACK_PAGE_ID_INFORMATION_INDEX);return e?parseInt(e,10):0},markTrackPageId:function(e){c.setSNCookieValueByIndex(s.TRACK_PAGE_ID_INFORMATION_INDEX,e)},getCroStartTimestamp:function(){return G.getDataInfoByIndex(s.CRO_START_TIMESTAMP_INDEX)},setCroStartTimestamp:function(){var e=_.getCurrentTimestamp(!0)-c.getFirstSessionId();G.setDataInfoByIndex(s.CRO_START_TIMESTAMP_INDEX,e)},shouldExpireGlobalCookie:function(){var e=G.getDataStore(),n=G.getMetaInfoByIndex(s.TRACK_GLOBAL_COOKIE_EXPIRY_STATE_INDEX);if(e){var t=_.getServerStartTimestamp(!0),i=c.getFirstSessionId(),e=f.getCroStartTimestamp();if(24*s.TRACK_GLOBAL_COOKIE_EXPIRY*60*60+e+i<t)return!c.getSessionStore()||(n||G.setMetaInfoByIndex(s.TRACK_GLOBAL_COOKIE_EXPIRY_STATE_INDEX,1),!1);if(i<f.getCpt())return!0;n=f.getLatestSamplingVersion(),i=G.getMetaInfoByIndex(s.SAMPLING_VERSION_INDEX)||s.INITIAL_PRICING_VERSION;if(!(i<n)&&Math.abs(i)<Math.abs(n)&&f.isUserBucketed())return!0}return!1},_markFunnelValue:function(e,n,t){this._markFeatureValue(s.FUNNEL_INFORMATION_INDEX,e,[n,t,c.getRelativeSessionId(),O[e].v])},_isFunnelValue:function(e,n,t){return this._isFeatureValue(s.FUNNEL_INFORMATION_INDEX,e,[n,t])},expireFunnels:function(e){var n,t,i,a,o,r=G.getDataStore(),u=c.getFirstSessionId();if(r){for(t=(n=(r=r.split(":"))[s.FUNNEL_INFORMATION_INDEX].split(",")).length;t--;)i=(o=n[t].split("_"))[0],a=+o[3]+24*s.FUNNEL_EXPIRY*60*60+u,o=+o[4],(a<e||O[i]&&O[i].v>o)&&n.splice(t,1);r[s.FUNNEL_INFORMATION_INDEX]=n.join(","),r=r.join(":"),G.setDataStore(r)}},expireGoals:function(){c.getSessionStore()&&!f.visitorRetracked||G.deleteDataStoreInfoByIndex(s.GOAL_INFORMATION_INDEX)},getSessionIdOfFunnel:function(e){e=G.getDataStore().match(new RegExp("[:,]"+e+"_[^_]*_._([^_]*)_[^,:]*"));return e&&e[1]?+e[1]+c.getFirstSessionId():0},_markFeatureValue:function(e,n,t,i){var a=i?G.getMetaStore():G.getDataStore(),o=a.split(":"),r=n,u=o[e],_=o.length;if(!u)for(;_<=e;)o[_]="",_++;u=(u=o[e]).match(new RegExp("(?:^|,)("+n+"_[^,]+)"));(t=void 0===t?[]:t)instanceof Array||(t=[t]);for(var s=0;s<t.length;s++)r+="_"+t[s];o[e]=u?o[e].replace(new RegExp("(^|,)("+n+"_[^,]+)"),"$1"+r):o[e]+(0===o[e].length?"":",")+r,a=o.join(":"),i?G.setMetaStore(a):G.setDataStore(a)},_isFeatureValue:function(e,n,t,i){var a,i=(i?G.getMetaStore():G.getDataStore()).split(":")[e];return(t=void 0===t?[]:t)instanceof Array||(t=[t]),!!(e===s.FUNNEL_INFORMATION_INDEX?(a=t[1],e=t[0]||"[^_]*",a=null==a?".":a,new RegExp("(,|^)"+n+"_"+e+"_"+a)):(a=null==(a=t[0])?".":a,new RegExp("(,|^)"+n+"_"+a))).test(i)&&"1"},_markGoalValue:function(e,n){this._markFeatureValue(s.GOAL_INFORMATION_INDEX,e,n)},_isGoalValue:function(e,n){return this._isFeatureValue(s.GOAL_INFORMATION_INDEX,e,n)},isCroEnabled:function(){if(!t.get(s.TRACK_GLOBAL_COOKIE_NAME))return!1;var e=G.getMetaStore().split(":")||[];return!(!e[s.FEATURE_BUCKET_INDEX]&&!e[s.SAMPLING_VERSION_INDEX])||void 0},createGlobalCookieReturnEligibility:function(){if(!f.isCroEnabled()){if(!f.isUserEligible())return!1;t.get(s.TRACK_GLOBAL_COOKIE_NAME)||(l.createUUIDCookie(),c.createGlobalCookie()),f.setCroStartTimestamp()}return f.markFeatureLevelBucketing(),f.setSamplingVersion(),!0},markFeatureLevelBucketing:function(){for(var e=c.getPcTraffic(),n=window._vwo_pc_custom||window.VWO.data.pc,t=_.getKeys(n),i=t.length;i--;)f._isFeatureValue(s.FEATURE_BUCKET_INDEX,t[i],null,1)||f._markFeatureValue(s.FEATURE_BUCKET_INDEX,t[i],+(e<n[t[i]]),!0)},setSamplingVersion:function(){G.setMetaInfoByIndex(s.SAMPLING_VERSION_INDEX,f.getLatestSamplingVersion())},isUserBucketed:function(){for(var e=window.VWO.data.pc,n=_.getKeys(e),t=n.length;t--;)if(f.isFeatureBucketed(n[t]))return!0},isFeatureBucketed:function(e){return!e||f._isFeatureValue(s.FEATURE_BUCKET_INDEX,e,1,!0)},excludeFunnel:function(e){f._markFunnelValue(e,0,0)},includeFunnel:function(e){f._markFunnelValue(e,0,1)},includeAnalyzeCampaign:function(e){G.includeAnalyzeCampaign(e)},excludeAnalyzeCampaign:function(e){G.excludeAnalyzeCampaign(e)},excludeGoal:function(e){f._markGoalValue(e,0)},includeGoal:function(e){f._markGoalValue(e,1)},shouldAddGoalInFunnel:function(e,n){n=parseInt(n,10);var t,i=f.getGoalIndexInFunnel(e,n);if(i<0)return!1;for(var a,o,r,n=O[e].g[0].id===n,u=G.getDataStore().split(":")[s.FUNNEL_INFORMATION_INDEX].split(","),_=u.length;_--;)if((a=u[_].split("_"))[0]===e){if(r=!0,o=+a[1],!+a[2])return!1;t=f.getGoalIndexInFunnel(e,o)+1===i}return n&&!r&&(E.runCampaigns({keepElementLoadedRunning:!1,expIds:[e],isManual:!0},null,null,!0),f.isFunnelIncluded(e)&&(t=!0)),t},getGoalIndexInFunnel:function(e,n){for(var t=0;t<O[e].g.length;t++)if(O[e].g[t].id===n)return t;return-1},getGoalsString:function(e){for(var n="",t=0;t<e.length;t++)n=n+e[t].id+("REVENUE_TRACKING"===e[t].type?"_1":"")+(t===e.length-1?"":",");return n},getGtAndF:function(e){for(var n,t,i=A.length,a={};i--;)n=A[i],O[n].type===r.FUNNEL_CAMPAIGN&&this.shouldAddGoalInFunnel(n,e)&&(f._markFunnelValue(n,e,1),a[n]=this.getGoalsString(O[n].g)+":"+f.getSessionIdOfFunnel(n));return t=_.getKeys(a),"&gt="+ +!f.isGoalTriggered(e)+"_"+t.join(",")+"&f="+o.jsonStringify(a)},startSession:function(){var e,n,t,i,a,o,r=document.URL,u="s.gif?account_id="+N+l.getUUIDString(l.createUUIDCookie()),_=1;c.isSessionInfoSynced()?(c.updateAndSyncPageId(),o=f.updateTrackPageId(),e=g.getTags(),n=g.getEgTags(),a=c.getSessionId(),_=VWO._.pageId,i=a>c.getFirstSessionId(),u=u+"&s="+a+"&p="+_,window._vis_debug||l.sendCall(u+(e?"&tags="+e:"")+(n?"&eg="+n:"")+"&update=1&cq=1")):(_=1,g.refresh(),e=g.getTags(),n=g.getEgTags(),c.getSessionStore()?(c.updateAndSyncPageId(),_=VWO._.pageId,c.setSNCookieValueByIndex(s.SESSION_SYNCED_STATE_INDEX,1)):(t=c.getRelativeSessionTimestamp(this),c.initializeSession(t+":"+_+":::1"),VWO._.pageId=_),o=f.updateTrackPageId(),u=u+"&s="+(a=c.getSessionId())+"&p="+_,i=a>c.getFirstSessionId(),window._vis_debug||l.sendCall(u+"&ed="+encodeURIComponent(l.extraData(!0))+"&cu="+encodeURIComponent(c.getInfo().cu||r)+(e?"&tags="+e:"")+(n?"&eg="+n:"")+"&r="+ +i+"&cq=1")),c.setVisitorInformation(),f.setAnalyzeServerName(),d(I.TRACK_SESSION_CREATED,a,_,i,1===o,o),c.updateSession()},setAnalyzeServerName:function(){var e=c.getSNCookieValueByIndex(s.ANALYSE_SERVER_NAME_INDEX);e?window.VWO.data.asn=e:(window.VWO.data.as&&c.setSNCookieValueByIndex(s.ANALYSE_SERVER_NAME_INDEX,window.VWO.data.as),window.VWO.data.asn=window.VWO.data.as||"dev.visualwebsiteoptimizer.com")},isGoalIncluded:function(e){return this._isGoalValue(e,1)||this._isGoalValue(e,2)},isGoalExcluded:function(e){return this._isGoalValue(e,0)},isAnalyzeCampaignExcluded:function(e){return G.isAnalyzeCampaignExcluded(e)},isAnalyzeCampaignIncluded:function(e){return G.isAnalyzeCampaignIncluded(e)},isFunnelIncluded:function(e){return f._isFunnelValue(e,void 0,1)},isFunnelExcluded:function(e){return f._isFunnelValue(e,void 0,0)},markGoalTriggered:function(e,n){e=O[e].goals[n];f._markGoalValue(n,2),e.type===u.SEPARATE_PAGE&&(e.pageVisited=1)},isGoalTriggered:function(e){return f._isGoalValue(e,2)},shouldTriggerGoal:function(e,n){var e=O[e].goals[n],t=!1;if(f._isGoalValue(n,0))return!1;if(f._isGoalValue(n,1)&&(t=!e.pageVisited),f._isGoalValue(n,2)&&(t=!1),!e.pageVisited&&!t)for(var i,a=A.length;a--;)i=A[a],O[i].type===r.FUNNEL_CAMPAIGN&&this.shouldAddGoalInFunnel(i,n)&&(t=!0);return e.type===u.SEPARATE_PAGE&&(e.pageVisited=!0),t},loaded:!0,initiated:!1},_.extend(VWO._.track,f),f=VWO._.track,a=function(){3===VWO.data.tcVersion&&!p||(f.setUp(),f.init()&&E.runCampaigns({keepElementLoadedRunning:!1,expIds:_.filter(A,function(e){return l.isSessionBasedCampaign(e)}),isManual:!1},null,null,!0))},S=function(){VWO._.ac&&VWO._.ac.cInstJS?VWO._.addConsentTrigger(a):a()},T=function(){(3!==VWO.data.tcVersion||p)&&V&&(f.initiated||(S(),e.init("track")))},R=function(){f.visitorRetracked=!0,f.init(),E.runCampaigns(!1,_.filter(A,function(n){try{window._vwo_exp[n].combination_chosen}catch(e){window.VWO._.customError&&window.VWO._.customError({msg:"LOGGING: experiment id "+n+"not found in "+window._vwo_exp_ids,url:"track-lib.ts",lineno:879,colno:9})}return window._vwo_exp&&window._vwo_exp[n]?l.isSessionBasedCampaign(n)&&(window._vwo_exp[n].combination_chosen=void 0,1):l.isSessionBasedCampaign(n)}),null,!0),f.visitorRetracked=!1},i.onEventReceive(I.RETRACK_VISITOR,function(){VWO._.ac&&VWO._.ac.cInstJS?VWO._.addConsentTrigger(R):R()}),i.onEventReceive(I.NEW_SESSION_CREATED,function(){f.visitorRetracked=!0}),i.onEventReceive(I.POST_URL_CHANGE,S),i.onEventReceive(I.NOT_REDIRECTING,function(){V||(V=!0,T())}),i.onEventReceive(I.UPDATE_SETTINGS_CALL,function(){p||(p=!0,T())}))}()},(t=function(){e()?n():setTimeout(t,100)})()}();
