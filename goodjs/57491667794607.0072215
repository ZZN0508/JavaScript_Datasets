define("helpers/auth",["jquery","underscore","info","require"],function(e,a,o,t){var n="000000000000000000000000",i=null==o.user?n:o.user._id;return{loggedIn:i!==n,user:i,ensureLogin:function(){return!!this.loggedIn||(t(["modules/login"],function(e){e()}),!1)},userHasFlag:function(t){var e=o.user&&o.user.flags?o.user.flags:[];return a.any(e,function(e){return t==e})},userHasPermission:function(e){return!!(o.user&&o.user.permissions?o.user.permissions:{})[e]},getAuthLink:function(t){var e=o.user&&o.user.authLinks?o.user.authLinks:[];return a.find(e,function(e){return e.provider==t})}}}),define("helpers/social",["jquery","info","utils","helpers/auth","helpers/tracker","require"],function(o,n,i,r,t,e){window.fbAsyncInit=function(){function a(e,t){o.ajax({url:"/auth/facebook",type:"POST",data:{token:e,auto:t}}).then(function(e){return e.error?alert(e.error):void o.get("/api/v2/me").success(function(){window.location.reload()})})}FB.init({appId:n.apps.facebook,version:"v3.1",status:!0,xfbml:!0}),FB.Event.subscribe("xfbml.render",function(){-1!==window.location.href.indexOf("scrollnext")&&window.parent&&window.parent.FBCommentHeight&&window.parent.FBCommentHeight(o("#main").data("legacyid"),o("section.fbc").height())}),o(document).trigger("fbInit"),FB.getLoginStatus(function(e){var t=!("false"==i.cookie.get("oioautologin"))&&!1!==n.socialplugins;e.authResponse&&"connected"==e.status&&!r.loggedIn&&t&&a(e.authResponse.accessToken,!0)}),FB.Event.subscribe("edge.create",function(e){o(window).trigger("facebookedgecreate",e),t.trackSocial("facebook","like",e)}),o(document.body).on("click","a.facebook_login",function(e){e.preventDefault(),FB.login(function(e){e.authResponse&&e.authResponse.accessToken&&a(e.authResponse.accessToken)},{scope:"email, user_birthday"})}),o(document.body).on("click","a.turkcell_login",function(e){e.preventDefault();e=window.location.origin;window.location="https://hizligiris.com.tr/hizligiris/oauth/authorize?client_id=Onedio&scope=openid%20phone%20email%20profile&redirect_uri="+e+"/api/v2/user/fastLogin&response_type=code&state=State.1xYcV5yePCOBSHQm7rl0DIaMQA-WODFw4yUqds__5OKUPvp9Z8LhMNL4w25TZpnF_y4LEeIdVSHW4wE4z8e8Bp&nonce=Nonce.RIAH8lxHV0z0w-QOAoYLz7WMBVl2j4Qs2z33PUg8IB9ySbljguhlATADT4IaNLx6gksyRZYNsKS_onPMdKUn3-u&prompt=login&acr_values=2&display=page&ui_locales=tr&claims_locales=tr"}),o("a.o-cikis-btn").on("click",function(){i.cookie.set("oioautologin","false")}),o("body").on("click","[data-fbui]",function(e){e.preventDefault(),FB.ui(o(this).data("fbui"),function(){})}),FB.Event.subscribe("xfbml.render",function(){o(window).trigger("facebookrender").data("facebookrender",!0)}),o(window).trigger("facebookinit").data("facebookinit",!0)},r.loggedIn&&i.cookie.delete("oioautologin"),!1!==n.socialplugins&&(e(["twitter"]),i.injectScript("facebook-jssdk","//connect.facebook.net/tr_TR/sdk.js"))}),define("plugins/follow",["jquery","helpers/auth","require"],function(o,n){o.fn.setupfollow=function(){return this.find("[data-follow]:not(.followinitialized)").each(function(){function a(){var e=o("[data-follow='"+t.attr("data-follow")+"']");t.data("following")?e.removeClass("positive").addClass("negative").text(t.data("text")||"Takipten Ã‡Ä±kar"):e.removeClass("negative").addClass("positive").text(t.data("text")||"Takip Et"),e.css("visibility","visible")}var t=o(this).addClass("followinitialized");if(t.on("click",function(e){var t=o(this);e.preventDefault(),"boolean"==typeof t.data("following")&&n.ensureLogin()&&(e=t.data("follow"),o.ajax({url:"/api"+e,type:"POST",data:{follow:!t.data("following")}}).done(function(e){t.data("following",e),a()}))}),!n.loggedIn)return t.data("following",!1),a();var e=t.data("follow");o.ajax({url:"/api"+e}).done(function(e){void 0!==e.following&&(t.data("following",e.following),a())})}),this}}),define("modules/hovercard",["jquery","underscore","require","helpers/auth","plugins/follow"],function(d,e,o,u){var n=0,f=1,h=2,g=3,p=4,m={};d(function(){d(document.body).on("mouseover","[data-hovercard]",function(){var i,r,s=d(this),l=d(window),c=s.data("hovercard");c&&(c.uid||(c={uid:e.uniqueId("hovercard"),path:"/~/api"+c,timer:null,state:n,change:(new Date).getTime()},s.data("hovercard",c)),i=function(){var e=d(this).data("hovercard");e.state==n?(e.state=f,e.change=(new Date).getTime()):e.state==g&&(e.state=p)},r=function(e){var t=d(this).data("hovercard");t.state==f||t.state==h?t.state=n:t.state==p&&(t.state=g,t.change=(new Date).getTime(),e&&(t.change-=600))},c.timer||(c.timer=setInterval(function(){var t,a,e=(new Date).getTime();c.state==f&&700<=e-c.change?(c.state=h,t=c.path,a=function(n){c.state==h&&n&&n.template&&o([n.template],function(e){var t,a,o;c.state==h&&(c.state=p,(o=d(e({item:n,self:n._id==u.user}))).setupfollow(),t=s.offset(),a=d("<div></div>").addClass("hovercard").hide().attr("id",c.uid).append(o).append(d("<div></div>").addClass("arrow")),d(document.body).append(a.fadeIn(150)),e=l.scrollTop()+a.height()+15+55<t.top,o=l.width()-a.width()-15>t.left,e?a.css({top:t.top-a.height()-15}).addClass("bottomarrow"):a.css({top:t.top+s.height()+15}).addClass("toparrow"),o?a.css({left:t.left}).addClass("leftarrow"):a.css({left:t.left-a.width()+s.width()}).addClass("rightarrow"),a.on("mouseover.hovercard",function(){i.call(s[0])}),a.on("mouseout.hovercard",function(){r.call(s[0])}),a.on("click",function(e){e=d(e.target).data("hcmode");"close"==e?r.call(s[0],!0):"clearcache"==e&&(m={})}))})},m[t]?a(m[t]):d.ajax({url:t,type:"GET"}).done(function(e){m[t]=e,a(e)})):c.state==g&&600<=e-c.change&&(d("#"+c.uid).fadeOut(150,function(){d(this).remove()}),c.state=n,s.off(".hovercard"),clearInterval(c.timer),c.timer=null)},30)),s.on("mouseout.hovercard",function(){r.call(this)}),s.on("click.hovercard",function(){r.call(this,!0)}),i.call(this))})})}),define("variables",function(){return{sizes:{footer:35},twitterusers:["onediocom","tarafonline","onediogundem","OnedioSpor","OnedioTeknoloji","onediokultur","tarafkitap","OnedioEglence","CNNSonDakika","sondakikaonedio","GalatasarySK","twhaber"]}}),define("index",["jquery","underscore","utils","info","require","helpers/auth","variables","helpers/tracker","helpers/social","modules/hovercard"],function(n,o,i,t,r,a,e,s){function l(){var e=!t.actingUser||t.actingUser._id==t.user._id?t.user:t.actingUser;e&&(e.avatars?n("img[data-avatar=self]").attr("src",e.avatars.small):n("img[data-avatar=self]").attr("src","/img/user/"+e._id))}function c(){n("[data-follow]").length&&r(["plugins/follow"],function(){u.setupfollow()})}var d=n(window),u=n(document.body);n("head meta[name='requirejs']").each(function(){r([n(this).attr("content")])}),n(document.body).on("click",".loadmore a[data-loadmore]",function(e){e.preventDefault();var t=n(this);t.hasClass("working")||(t.text("YÃ¼kleniyor...").addClass("working").closest(".innercut").addClass("animate"),n.ajax({url:t.data("loadmore")}).then(function(e){if(e.error)return alert(e.error);e=n(e.html).hide();t.closest(".loadmore").before(e).remove(),e.show()}))}),a.userHasFlag("email_unapproved")&&n('<div class="email_unapproved">E-Mail adresiniz onaylanmamÄ±ÅŸ. Onay mailini tekrar istemek iÃ§in <a href="#">buraya tÄ±klayÄ±n</a>. E-Mail adresinizi deÄŸiÅŸtirmek iÃ§in <a href="/uye/ayarlari">buraya tÄ±klayÄ±n.</a></div>').on("click","a[href='#']",function(e){e.preventDefault(),n.ajax({url:"/api/v2/user/sendapprovemail"}).then(function(){alert("Onay mailiniz tekrar yollandÄ±. LÃ¼tfen email kutunuzu kontrol ediniz.")})}).on("mouseleave",function(){n(this).fadeOut(200)}).appendTo(n(document.body)),n("#fbconnecttoggle").on("change",function(){n.post("/api/user/setflag",{flag:"facebook.connect.disable",value:!n(this).prop("checked")}).done(function(e){return e.error?alert(e.error):void 0})}),n("#main-header").on("click",".o-notifications",function(e){e.preventDefault(),e.stopPropagation(),n(this),r(["modules/notification"],function(e){e.open()})}),n(".flashmessage").each(function(){function t(){a.slideUp(300,function(){a.remove()}),e.animate({top:0},300,function(){e.css("top","")})}var a=n(this);if(a.hasClass("important")||a.hasClass("turkcellFastLoginMessageImportant"))return a.hide(),r(["jquery","tpl/modules/flashmodal","plugins/modal"],function(e,t){e(t({title:"Bilgi",message:a.text()})).modal()});var e=n("#main.fill").css("top",0);a.slideDown(300),e.animate({top:"46px"}),a.one("click",function(e){e.preventDefault(),t()});var o=setTimeout(t,6e3);a.on("mouseover",function(e){e.preventDefault(),clearTimeout(o),a.one("mouseout",function(e){e.preventDefault(),t()})})}),u.on("click","a.sendmessage, button.sendmessage",function(e){e.preventDefault(),e.stopPropagation();var o=n(this);r(["helpers/auth","modules/messaging"],function(e,t){var a;!e.ensureLogin()||(a=o.attr("data-id"))!==e.user&&t.open(a)})}),u.on("click","a[data-href]",function(){n(this).attr("href",n(this).data("href")).removeAttr("data-href")}),n("#main-header").on("click",".o-messages",function(e){e.preventDefault(),e.stopPropagation(),n(this),r(["modules/messaging"],function(e){e.open()})}),n("#admin-panel").on("click",".newspool",function(e){e.preventDefault(),e.stopPropagation(),n(this),r(["modules/newspool"],function(e){e.open()})}),i.hash.get("login")&&a.ensureLogin(),u.one("click","a[data-action=invite]",function(e){e.preventDefault();var t=n(this);r(["modules/invite"],function(){t.trigger("click")})}),u.one("click","a[data-action=mailshare]",function(e){e.preventDefault();var t=n(this);r(["modules/mailshare"],function(){t.trigger("click")})}),u.one("click","a[data-action=feedback]",function(e){e.preventDefault();var t=n(this);r(["modules/feedback"],function(){t.trigger("click")})}),n("head meta[name='onedio:metatag']").length&&n("[data-admin-metatags]").length&&n("[data-admin-metatags]").show().one("click",function(e){var t=n(this);e.preventDefault(),r(["modules/admin/metatag-editor"],function(){t.trigger("click")})});function f(e){confirm(n(this).data("confirm"))||e.preventDefault()}u.on("click","a[data-confirm], button[data-confirm]",f),u.on("submit","form[data-confirm]",f),u.on("click","a.disabled",function(e){e.preventDefault()}),u.on("click","a[data-auth=required]",function(e){a.ensureLogin()||e.preventDefault()});var h=n("#main.fill");h.length&&d.on("resize",function(){h.css("min-height",n(window).height()-n("#main-footer").height())}).trigger("resize"),screen.width&&screen.width<1100&&1024<=screen.width&&navigator&&"iPad"!=navigator.platform&&(v=(screen.width-24)/1100,n("body").css("zoom",v));var g=n("#home"),p=n("#bottom"),m=n("aside.large.panel div.ad.floating");p.on("click",function(e){e.preventDefault(),n("html, body").animate({scrollTop:n(document).height()},"fast")}),n(window).on("scroll validatefloatingitems",o.throttle(function(){var e,t=n("aside.social-controls.floating"),a=n(document).scrollTop();a<500?g.removeClass("active"):g.addClass("active"),p.length&&(100<n(document).height()-(a+n(window).height())?p.addClass("active"):p.removeClass("active")),a+=51,t.length&&(e=t.offset().top,!t.hasClass("fixed")&&e<a?(n("#euro2016headlogo").hide(),requestAnimationFrame(function(){t.addClass("fixed"),t.after(n("<div></div>").addClass("scrollhelper"))})):t.hasClass("fixed")&&t.next(".scrollhelper").offset().top>a&&(n("#euro2016headlogo").show(),requestAnimationFrame(function(){t.removeClass("fixed").next(".scrollhelper").remove()}))),m.length&&(e=m.offset().top,!m.hasClass("fixed")&&e<a?(m.addClass("fixed"),m.after(n("<div></div>").addClass("scrollhelper"))):m.hasClass("fixed")&&m.next(".scrollhelper").offset().top>a&&m.removeClass("fixed").next(".scrollhelper").remove())},100)).trigger("validatefloatingitems"),l(),u.on("click","[data-action=impersonate]",function(e){e.preventDefault(),n(this),r(["tpl/admin/impersonate","info","plugins/modal"],function(a,o){n.ajax({url:"/api/admin/impersonate/list",type:"GET"}).done(function(e){if(e.error)return alert(e.error);var t=n(a({list:e,actingUser:o.actingUser})).modal().on("submit","form[name=impersonate]",function(e){e.preventDefault();e=n(this);n.ajax({url:"/api/admin/impersonate",type:"GET",data:e.serialize()}).done(function(e){return e.error?alert(e.error):void(e.success&&(o.actingUser=e.user,n("a[data-action=impersonate]").text(o.actingUser.username),l(),t.modal("close")))})})})})}),n.fn.progress=function(e){return!1===e?n(this).removeClass("progressbar"):n(this).addClass("progressbar"),this},n(".widget").length&&r(["modules/widgets"]),function(){var a=t.filteredCats;if(!a)try{a=JSON.parse(i.cookie.get("onediocatfilter"))}catch(e){a=[]}n("[data-filtercat]").each(function(){var t=n(this);o.intersection(a,t.data("filtercat")).length==t.data("filtercat").length?t.addClass("active"):t.removeClass("active"),t.data("filtercat-negate")&&t.toggleClass("active"),t.on("click",function(e){e.preventDefault(),a=o.intersection(a,t.data("filtercat")).length==t.data("filtercat").length?o.difference(a,t.data("filtercat")):o.union(a,t.data("filtercat")),(a=o.compact(a)).length?i.cookie.set("onediocatfilter",JSON.stringify(a),2592e3):i.cookie.delete("onediocatfilter"),t.toggleClass("active"),n("[data-filtercat-cloak]").addClass("active"),n("[o-data-filtercat-cloak]").addClass("active")})})}(),c(),u.on("contentload",c),n.ajaxSetup({success:function(){setTimeout(function(){u.trigger("contentload")},10)}}),!a.userHasFlag("followpanel.show")&&"true"!=i.hash.get("followpanel")||r(["modules/followpanel"]);var v=i.hash.get("ut");function w(){n("article.widget.waitingapproval form.delete").show()}v&&(history&&history.replaceState?history.replaceState(null,null,window.location.pathname+window.location.search):window.location.hash="",s.trackEvent("UrlTracker",v)),"/"==window.location.pathname&&(n("body").on("click","a[href^='/haber'],a[href^='http://t.oned.io']",function(){n(this).attr("target","_blank")}),setTimeout(function(){var e=o.debounce(function(){n(document).scrollTop()<530?window.location.reload():setTimeout(e,100)},15e3);u.on("mousemove keydown",e),e()},3e5)),"/onay-bekleyen-haberler"==window.location.pathname&&a.userHasPermission("moderate.article.approve")&&(u.on("contentload ",w),w()),n(".headertrigger").each(function(){var t=n(this),a=n("#"+t.data("panel")),e=0;t.add(a).on("activate",function(){n(".header-panel.active").removeClass("active"),a.addClass("active"),t.addClass("active"),"categories"==t.data("panel")&&t.append('<img src="https://bs.serving-sys.com/serving/adServer.bs?cn=display&c=19&mc=imp&pli=27405416&PluID=0&ord=[timestamp]&rtu=-1" width="0" height="0"/>');var e=(n('[data-panel="user-panel"]').offset()?n('[data-panel="user-panel"]'):n('[data-panel="login-panel"]')).offset();"fixed"!=t.data("panelposition")&&(e=n(window).width()-e.left-64,a.css({right:e})),n("html").trigger("click"),a.trigger("activated").find("input").first().focus()}).on("mouseenter",function(){e++,"click"!=t.data("trigger")&&t.trigger("activate")}).on("mouseleave",function(){e&&e--,setTimeout(function(){e||(a.removeClass("active"),t.removeClass("active"))},500)}),t.on("click",function(e){t.attr("href")&&"#"==t.attr("href")&&e.preventDefault(),"click"!=t.data("trigger")&&"#"!=t.attr("href")||t.trigger("activate")})}),n("#search-panel").find("i.fa-search").on("click",function(){n(this).closest("form").submit()});var k=null;n("nav#categories").on("mouseover select","[data-category]",function(){function e(){n("#headNews").children().remove().end().append(k[t]||null)}var t=n(this).attr("data-category");n("[data-category]").removeClass("selected"),n(this).hasClass("left")&&(n(".subCat").removeClass("selected"),n("#"+t).addClass("selected")),n(this).addClass("selected"),k?e():n.ajax({url:"/api/category/headerlisting"}).done(function(t){k={},o.each(o.keys(t),function(e){k[e]=n(t[e])}),e()})}).on("activated",function(){n(".subCat").removeClass("selected"),n(".subCat").first().addClass("selected"),n(this).find("[data-category]:contains(Test)").first().trigger("select")}),setTimeout(n(document.body).on("click","article.o-sponsored-article",function(){var e=n(this).closest("article"),t=n(this).closest("article").find("div.o-featured a")[0].getAttribute("title"),a=n(this).closest("article").index();"SaÃ§ SÄ±rlarÄ±"!==t&&"Makyaj.com"!==t&&"trendyol"!==t||e.append('<img src="//dmp.adform.net/dmp/profile/?pid=10548&sg='+{"SaÃ§ SÄ±rlarÄ±":"Sac+Sirlari+Clickers","Makyaj.com":"Makyaj.com+Clickers",trendyol:"Trendyol+CPC+Clickers"}[t]+'" style="width:0;height:0;">'),s.trackEvent("Category_Page","Featured Click","Index "+a,a)}),500)});
