KISSY.add("dom/base/api",[],function(n){var r=n.Env.host||{},t=r.document,o=n.UA,i={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12},a={isCustomDomain:function(e){var e=e||r,t=(e=a.get(e)).document.domain;return t!==(e=e.location.hostname)&&t!=="["+e+"]"},getEmptyIframeSrc:function(e){return e=a.get(e=e||r),o.ie&&a.isCustomDomain(e)?"javascript:void(function(){"+encodeURIComponent('document.open();document.domain="'+e.document.domain+'";document.close();')+"}())":""},NodeType:i,getWindow:function(e){if(!e)return r;if(e=a.get(e),n.isWindow(e))return e;var t=e;return(t=t.nodeType!==i.DOCUMENT_NODE?e.ownerDocument:t).defaultView||t.parentWindow},getDocument:function(e){return e?(e=a.get(e),n.isWindow(e)?e.document:e.nodeType===i.DOCUMENT_NODE?e:e.ownerDocument):t},isDomNodeList:function(e){return e&&!e.nodeType&&e.item&&!e.setTimeout},nodeName:function(e){var t=a.get(e),e=t.nodeName.toLowerCase();return e=o.ie&&(t=t.scopeName)&&"HTML"!==t?t.toLowerCase()+":"+e:e},_RE_NUM_NO_PX:RegExp("^("+/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source+")(?!px)[a-z%]+$","i")};return n.mix(a,i),a}),KISSY.add("dom/base/attr",["./api"],function(s,e){function u(e){return null==e?"":e+""}function a(e,t){var n=y[t=b[t]||t];return n&&n.get?n.get(e,t):e[t]}var c=e("./api"),e=s.Env.host.document,l=c.NodeType,e=e&&e.documentElement,f=c.nodeName,d=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,n=/^(?:button|input|object|select|textarea)$/i,r=/^a(?:rea)?$/i,p=/:|^on/,v=/\r/g,h={},m={val:1,css:1,html:1,text:1,data:1,width:1,height:1,offset:1,scrollTop:1,scrollLeft:1},g={tabindex:{get:function(e){var t=e.getAttributeNode("tabindex");return t&&t.specified?parseInt(t.value,10):n.test(e.nodeName)||r.test(e.nodeName)&&e.href?0:void 0}}},b={hidefocus:"hideFocus",tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},E={get:function(e,t){return c.prop(e,t)?t.toLowerCase():void 0},set:function(e,t,n){return!1===t?c.removeAttr(e,n):((t=b[n]||n)in e&&(e[t]=!0),e.setAttribute(n,n.toLowerCase())),n}},y={},T={},N={select:{get:function(e){var t,n=e.selectedIndex,r=e.options;if(n<0)return null;if("select-one"==""+e.type)return c.val(r[n]);for(e=[],n=0,t=r.length;n<t;++n)r[n].selected&&e.push(c.val(r[n]));return e},set:function(e,t){var n=s.makeArray(t);return s.each(e.options,function(e){e.selected=s.inArray(c.val(e),n)}),n.length||(e.selectedIndex=-1),n}}};return s.each(["radio","checkbox"],function(e){N[e]={get:function(e){return null===e.getAttribute("value")?"on":e.value},set:function(e,t){if(s.isArray(t))return e.checked=s.inArray(c.val(e),t),1}}}),g.style={get:function(e){return e.style.cssText}},s.mix(c,{_valHooks:N,_propFix:b,_attrHooks:g,_propHooks:y,_attrNodeHook:T,_attrFix:h,prop:function(e,t,n){var r,o,i=c.query(e);if(s.isPlainObject(t))s.each(t,function(e,t){c.prop(i,t,e)});else if(o=y[t=b[t]||t],void 0!==n)for(e=i.length-1;0<=e;e--)r=i[e],o&&o.set?o.set(r,n,t):r[t]=n;else if(i.length)return a(i[0],t)},hasProp:function(e,t){for(var n=c.query(e),r=n.length,o=0;o<r;o++)if(void 0!==a(n[o],t))return!0;return!1},removeProp:function(e,t){for(var n,t=b[t]||t,r=c.query(e),o=r.length-1;0<=o;o--){n=r[o];try{n[t]=void 0,delete n[t]}catch(e){}}},attr:function(e,t,n,r){var o=c.query(e),i=o[0];if(s.isPlainObject(t)){var a,r=n;for(a in t)c.attr(o,a,t[a],r)}else{if(r&&m[t])return c[t](e,n);if(t=t.toLowerCase(),r&&m[t])return c[t](e,n);if(e=d.test(t=h[t]||t)?E:p.test(t)?T:g[t],void 0===n){if(i&&i.nodeType===l.ELEMENT_NODE)return(e="form"===f(i)?T:e)&&e.get?e.get(i,t):""===(n=i.getAttribute(t))&&(!(t=i.getAttributeNode(t))||!t.specified)||null===n?void 0:n}else for(r=o.length-1;0<=r;r--)(i=o[r])&&i.nodeType===l.ELEMENT_NODE&&((e="form"===f(i)?T:e)&&e.set?e.set(i,n,t):i.setAttribute(t,""+n))}},removeAttr:function(e,t){for(var n,r,t=t.toLowerCase(),t=h[t]||t,o=c.query(e),i=o.length-1;0<=i;i--)(r=o[i]).nodeType===l.ELEMENT_NODE&&(r.removeAttribute(t),d.test(t)&&(n=b[t]||t)in r)&&(r[n]=!1)},hasAttr:e&&!e.hasAttribute?function(e,t){for(var n,t=t.toLowerCase(),r=c.query(e),o=0;o<r.length;o++)if((n=(n=r[o]).getAttributeNode(t))&&n.specified)return!0;return!1}:function(e,t){for(var n=c.query(e),r=n.length,o=0;o<r;o++)if(n[o].hasAttribute(t))return!0;return!1},val:function(e,t){var n,r,o,i,a;if(void 0===t){if(o=c.get(e))return(n=N[f(o)]||N[o.type])&&"get"in n&&void 0!==(r=n.get(o,"value"))?r:"string"==typeof(r=o.value)?r.replace(v,""):null==r?"":r}else for(i=(r=c.query(e)).length-1;0<=i&&1===(o=r[i]).nodeType;i--)null==(a=t)?a="":"number"==typeof a?a+="":s.isArray(a)&&(a=s.map(a,u)),(n=N[f(o)]||N[o.type])&&"set"in n&&void 0!==n.set(o,a,"value")||(o.value=a)},text:function(e,t){var n,r,o,i;if(void 0===t)return n=c.get(e),c._getText(n);for(o=(r=c.query(e)).length-1;0<=o;o--)(i=(n=r[o]).nodeType)===l.ELEMENT_NODE?(c.cleanData(n.getElementsByTagName("*")),"textContent"in n?n.textContent=t:n.innerText=t):i!==l.TEXT_NODE&&i!==l.CDATA_SECTION_NODE||(n.nodeValue=t)},_getText:function(e){return e.textContent}}),c}),KISSY.add("dom/base/class",["./api"],function(i,e){function a(e){for(var t,n=[],r=(e=(e=i.trim(e||"")).split(l)).length,o=0;o<r;o++)(t=e[o])&&n.push(t);return n}function t(s){return function(e,t){for(var n,r=e.classList,o=u.call(arguments,2),i=0,a=t.length;i<a;i++)(n=t[i])&&r[s].apply(r,[n].concat(o))}}function n(o){return function(e,t){var n=a(t),r=u.call(arguments,2);s.query(e).each(function(e){e.nodeType===c.ELEMENT_NODE&&s[o].apply(s,[e,n].concat(r))})}}var s=e("./api"),u=[].slice,c=s.NodeType,l=/[\.\s]\s*\.?/;return i.mix(s,{_hasClass:function(e,t){var n,r,o,i=e.classList;if(i.length){for(n=0,r=t.length;n<r;n++)if((o=t[n])&&!i.contains(o))return!1;return!0}return!1},_addClass:t("add"),_removeClass:t("remove"),_toggleClass:t("toggle"),hasClass:function(e,t){var n=!1,t=a(t);return s.query(e).each(function(e){if(e.nodeType===c.ELEMENT_NODE&&s._hasClass(e,t))return!(n=!0)}),n},replaceClass:function(e,t,n){s.removeClass(e,t),s.addClass(e,n)},addClass:n("_addClass"),removeClass:n("_removeClass"),toggleClass:n("_toggleClass")}),s}),KISSY.add("dom/base/create",["./api"],function(c,e){function s(e){return(e=e&&e!==v?e.createElement(m):t)===t&&(e.innerHTML=""),e}function l(e,t){t=s(t);return t.innerHTML="m<div>"+e+"</div>",t.lastChild}function u(e,t,n){var r=t.nodeType;if(r===h.DOCUMENT_FRAGMENT_NODE)for(t=t.childNodes,n=n.childNodes,r=0;t[r];)n[r]&&u(e,t[r],n[r]),r++;else if(r===h.ELEMENT_NODE)for(t=t.getElementsByTagName("*"),n=n.getElementsByTagName("*"),r=0;t[r];)n[r]&&e(t[r],n[r]),r++}function f(e,t){var n,r,o=(o=c.Env.mods["event/dom/base"])&&o.exports;if(t.nodeType!==h.ELEMENT_NODE||p.hasData(e)){for(r in n=p.data(e))p.data(t,r,n[r]);o&&o.clone&&o.clone(e,t)}}function d(e){var t,n,r=null;if(e&&(e.push||e.item)&&e[0])for(r=(r=e[0].ownerDocument).createDocumentFragment(),t=0,n=(e=c.makeArray(e)).length;t<n;t++)r.appendChild(e[t]);return r}var p=e("./api"),v=c.Env.host.document,h=p.NodeType,e=c.UA.ieMode,m="div",t=v&&v.createElement(m),g=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,b=/<([\w:]+)/,E=/^\s+/,y=/\s+$/,T=!!(e&&e<9),N=T,_=/<|&#?\w+;/,i=v&&"outerHTML"in v.documentElement,S=/^<(\w+)\s*\/?>(?:<\/\1>)?$/;c.mix(p,{create:function(e,t,n,r){var o=null;if(!e)return o;if(e.nodeType)return p.clone(e);if("string"!=typeof e)return o;(r=void 0===r?!0:r)&&(e=c.trim(e));var i,a,s,r=p._creators,n=n||v,u=m;return _.test(e)?(s=S.exec(e))?o=n.createElement(s[1]):(e=e.replace(g,"<$1></$2>"),i=(r[u=(s=b.exec(e))&&(i=s[1])?i.toLowerCase():u]||l)(e,n),N&&(a=e.match(E))&&i.insertBefore(n.createTextNode(a[0]),i.firstChild),N&&/\S/.test(e)&&(a=e.match(y))&&i.appendChild(n.createTextNode(a[0])),1===(e=i.childNodes).length?o=e[0].parentNode.removeChild(e[0]):e.length&&(o=d(e))):o=n.createTextNode(e),c.isPlainObject(t)&&(o.nodeType===h.ELEMENT_NODE?p.attr(o,t,!0):o.nodeType===h.DOCUMENT_FRAGMENT_NODE&&p.attr(o.childNodes,t,!0)),o},_fixCloneAttributes:function(e,t){"textarea"===p.nodeName(e)&&(t.defaultValue=e.defaultValue,t.value=e.value)},_creators:{div:l},_defaultCreator:l,html:function(e,t,n){var r,o,i=(e=p.query(e))[0],a=!1;if(!i)return null;if(void 0===t)return i.nodeType===h.ELEMENT_NODE?i.innerHTML:i.nodeType===h.DOCUMENT_FRAGMENT_NODE?((n=s(i.ownerDocument)).appendChild(i),n.innerHTML):null;if(!((t+="").match(/<(?:script|style|link)/i)||N&&t.match(E)||O[(t.match(b)||["",""])[1].toLowerCase()]))try{for(r=e.length-1;0<=r;r--)(o=e[r]).nodeType===h.ELEMENT_NODE&&(p.cleanData(o.getElementsByTagName("*")),o.innerHTML=t);a=!0}catch(e){}a||(t=p.create(t,0,i.ownerDocument,0),p.empty(e),p.append(t,e,n))},outerHtml:function(e,t,n){var r=(e=p.query(e)).length,o=e[0];if(!o)return null;if(void 0===t)return i&&o.nodeType!==p.DOCUMENT_FRAGMENT_NODE?o.outerHTML:((t=s(o.ownerDocument)).appendChild(p.clone(o,!0)),t.innerHTML);if(!(t+="").match(/<(?:script|style|link)/i)&&i)for(n=r-1;0<=n;n--)(o=e[n]).nodeType===h.ELEMENT_NODE&&(p.cleanData(o,1),o.outerHTML=t);else t=p.create(t,0,o.ownerDocument,0),p.insertBefore(t,e,n),p.remove(e)},remove:function(e,t){for(var n,r,o=p.query(e),i=(i=c.Env.mods["event/dom/base"])&&i.exports,a=o.length-1;0<=a;a--)n=o[a],t||n.nodeType!==h.ELEMENT_NODE||((r=c.makeArray(n.getElementsByTagName("*"))).push(n),p.removeData(r),i&&i.detach&&i.detach(r)),function e(t,n){if(n)if(T&&n.canHaveChildren&&"removeNode"in t){if(t.firstChild)e:{try{t.innerHTML="";break e}catch(e){}for(var r;r=t.lastChild;)e(r,t)}t.removeNode(!1)}else n.removeChild(t)}(n,n.parentNode)},clone:function(e,t,n,r){"object"==typeof t&&(r=t.deepWithDataAndEvent,n=t.withDataAndEvent,t=t.deep);var o,i,e=p.get(e),a=p._fixCloneAttributes;return e?(i=e.nodeType,o=e.cloneNode(t),i!==h.ELEMENT_NODE&&i!==h.DOCUMENT_FRAGMENT_NODE||(a&&i===h.ELEMENT_NODE&&a(e,o),t&&a&&u(a,e,o)),n&&(f(e,o),t&&r&&u(f,e,o)),o):null},empty:function(e){for(var t,n=(e=p.query(e)).length-1;0<=n;n--)t=e[n],p.remove(t.childNodes)},_nodeListToFragment:d}),p.outerHTML=p.outerHtml;var r,o=p._creators,a=p.create,O={area:"map",thead:"table",td:"tr",th:"tr",tr:"tbody",tbody:"table",tfoot:"table",caption:"table",colgroup:"table",col:"colgroup",legend:"fieldset"};for(r in O)!function(n){o[r]=function(e,t){return a("<"+n+">"+e+"</"+n+">",void 0,t)}}(O[r]);return o.option=o.optgroup=function(e,t){return a('<select multiple="multiple">'+e+"</select>",void 0,t)},O.option=O.optgroup=1,p}),KISSY.add("dom/base/data",["./api"],function(u,e){var c=e("./api"),o=u.Env.host,i="_ks_data_"+u.now(),a={},s={},l={applet:1,object:1,embed:1},n=function(e,t){if(e)if(void 0!==t){if(t in e)return!0}else if(!u.isEmptyObject(e))return!0;return!1},f={hasData:function(e,t){return e==o?f.hasData(s,t):n(e[i],t)},data:function(e,t,n){if(e==o)return f.data(s,t,n);var r=e[i];if(void 0===n)return void 0!==t?r&&r[t]:e[i]=e[i]||{};(r=e[i]=e[i]||{})[t]=n},removeData:function(t,e){if(t==o)return f.removeData(s,e);var n=t[i];if(void 0!==e)delete n[e],u.isEmptyObject(n)&&f.removeData(t);else try{delete t[i]}catch(e){t[i]=void 0}}},d={hasData:function(e,t){e=e[i];return!!e&&n(a[e],t)},data:function(e,t,n){if(!l[e.nodeName.toLowerCase()]){var r=e[i];if(!r){if(void 0!==t&&void 0===n)return;r=e[i]=u.guid()}if(e=a[r],void 0===n)return void 0!==t?e&&e[t]:a[r]=a[r]||{};(e=a[r]=a[r]||{})[t]=n}},removeData:function(t,e){var n,r=t[i];if(r)if(n=a[r],void 0!==e)delete n[e],u.isEmptyObject(n)&&d.removeData(t);else{delete a[r];try{delete t[i]}catch(e){t[i]=void 0}t.removeAttribute&&t.removeAttribute(i)}}};return u.mix(c,{__EXPANDO:i,hasData:function(e,t){for(var n=!1,r=c.query(e),o=0;o<r.length&&!(n=((n=r[o]).nodeType?d:f).hasData(n,t));o++);return n},data:function(e,t,n){var r=(e=c.query(e))[0];if(u.isPlainObject(t))for(var o in t)c.data(e,o,t[o]);else if(void 0===n){if(r)return(r.nodeType?d:f).data(r,t)}else for(o=e.length-1;0<=o;o--)((r=e[o]).nodeType?d:f).data(r,t,n)},removeData:function(e,t){for(var n,r=c.query(e),o=r.length-1;0<=o;o--)((n=r[o]).nodeType?d:f).removeData(n,t)},cleanData:function(e,t){for(var n=c.query(e),r=(r=u.Env.mods["event/dom/base"])&&r.exports,o=n.length-1;0<=o;o--)if((a=n[o]).nodeType){var i=t&&u.makeArray(a.getElementsByTagName("*"))||[];i.push(a);for(var a=0,s=i.length;a<s;a++)d.removeData(i[a]);r&&r.detach&&r.detach(i)}else f.removeData(a)}}),c}),KISSY.add("dom/base/insertion",["./api"],function(u,e){function c(e){e.src?u.getScript(e.src):(e=u.trim(e.text||e.textContent||e.innerHTML||""))&&u.globalEval(e)}function r(e,t,n,r){e=function e(t,n){for(var r,o=[],i=0;t[i];i++)if(r=t[i],s=p(r),r.nodeType===f.DOCUMENT_FRAGMENT_NODE)o.push.apply(o,e(v(r.childNodes),n));else if("script"!==s||r.type&&!m.test(r.type)){if(r.nodeType===f.ELEMENT_NODE&&!d.test(s)){for(var a,s=[],u=r.getElementsByTagName("script"),c=0;c<u.length;c++)(a=u[c]).type&&!m.test(a.type)||s.push(a);h.apply(t,[i+1,0].concat(s))}o.push(r)}else r.parentNode&&r.parentNode.removeChild(r),n&&n.push(r);return o}(e=l.query(e),r=r&&[]),l._fixInsertionChecked&&l._fixInsertionChecked(e);var o,i,a,s=(t=l.query(t)).length;if((e.length||r&&r.length)&&s)for(e=l._nodeListToFragment(e),1<s&&(a=l.clone(e,!0),t=u.makeArray(t)),o=0;o<s;o++)i=t[o],e&&n(0<o?l.clone(a,!0):e,i),r&&r.length&&u.each(r,c)}var l=e("./api"),f=l.NodeType,d=/^(?:button|input|object|select|textarea)$/i,p=l.nodeName,v=u.makeArray,h=[].splice,m=/\/(java|ecma)script/i;return u.mix(l,{_fixInsertionChecked:null,insertBefore:function(e,t,n){r(e,t,function(e,t){t.parentNode&&t.parentNode.insertBefore(e,t)},n)},insertAfter:function(e,t,n){r(e,t,function(e,t){t.parentNode&&t.parentNode.insertBefore(e,t.nextSibling)},n)},appendTo:function(e,t,n){r(e,t,function(e,t){t.appendChild(e)},n)},prependTo:function(e,t,n){r(e,t,function(e,t){t.insertBefore(e,t.firstChild)},n)},wrapAll:function(e,t){t=l.clone(l.get(t),!0),(e=l.query(e))[0].parentNode&&l.insertBefore(t,e[0]);for(var n;(n=t.firstChild)&&1===n.nodeType;)t=n;l.appendTo(e,t)},wrap:function(e,t){e=l.query(e),t=l.get(t),u.each(e,function(e){l.wrapAll(e,t)})},wrapInner:function(e,n){e=l.query(e),n=l.get(n),u.each(e,function(e){var t=e.childNodes;t.length?l.wrapAll(t,n):e.appendChild(n)})},unwrap:function(e){e=l.query(e),u.each(e,function(e){e=e.parentNode,l.replaceWith(e,e.childNodes)})},replaceWith:function(e,t){e=l.query(e),t=l.query(t);l.remove(t,!0),l.insertBefore(t,e),l.remove(e)}}),u.each({prepend:"prependTo",append:"appendTo",before:"insertBefore",after:"insertAfter"},function(e,t){l[t]=l[e]}),l}),KISSY.add("dom/base/offset",["./api"],function(p,e){function s(e){var t,n=e.ownerDocument.body;return e.getBoundingClientRect?(e=(t=e.getBoundingClientRect())[g],t=t[b],{left:e-=r.clientLeft||n.clientLeft||0,top:t-=r.clientTop||n.clientTop||0}):{left:0,top:0}}function c(e,t){var n,r,o={left:0,top:0},i=m(e),a=e,t=t||i;do{}while(i==t?(n=s(r=a),r=m(r),n.left+=v.scrollLeft(r),n.top+=v.scrollTop(r)):n=s(a),o.left+=n.left,o.top+=n.top,i&&i!=t&&(a=i.frameElement)&&(i=i.parent));return o}var v=e("./api"),l=p.Env.host,i=p.UA,e=l.document,h=v.NodeType,r=e&&e.documentElement,m=v.getWindow,t=Math.max,g="left",b="top";return p.mix(v,{offset:function(e,t,n){var r;if(void 0===t)return r=(e=v.get(e))?c(e,n):r;for(r=(n=v.query(e)).length-1;0<=r;r--){var e=n[r],o=t;"static"===v.css(e,"position")&&(e.style.position="relative");var i,a=c(e),s={},u=void 0;for(u in o)i=parseFloat(v.css(e,u))||0,s[u]=i+o[u]-a[u];v.css(e,s)}},scrollIntoView:function(e,t,n,r){var o,i,a,s,u,c,l,f,d;(o=v.get(e))&&((t=(t=t&&v.get(t))||o.ownerDocument).nodeType===h.DOCUMENT_NODE&&(t=m(t)),p.isPlainObject(n)&&(r=n.allowHorizontalScroll,i=n.onlyScrollIfNeeded,n=n.alignWithTop),r=void 0===r||r,a=p.isWindow(t),e=v.offset(o),s=v.outerHeight(o),d=v.outerWidth(o),e=a?(a=t,u=v.height(a),c=v.width(a),f={left:v.scrollLeft(a),top:v.scrollTop(a)},a=e[g]-f[g],o=e[b]-f[b],d=e[g]+d-(f[g]+c),e[b]+s-(f[b]+u)):(u=v.offset(t),c=t.clientHeight,l=t.clientWidth,f={left:v.scrollLeft(t),top:v.scrollTop(t)},a=e[g]-(u[g]+(parseFloat(v.css(t,"borderLeftWidth"))||0)),o=e[b]-(u[b]+(parseFloat(v.css(t,"borderTopWidth"))||0)),d=e[g]+d-(u[g]+l+(parseFloat(v.css(t,"borderRightWidth"))||0)),e[b]+s-(u[b]+c+(parseFloat(v.css(t,"borderBottomWidth"))||0))),i?(o<0||0<e)&&(!0===n||!1!==n&&o<0?v.scrollTop(t,f.top+o):v.scrollTop(t,f.top+e)):(n=void 0===n||!!n)?v.scrollTop(t,f.top+o):v.scrollTop(t,f.top+e),r&&(i?(a<0||0<d)&&(!0===n||!1!==n&&a<0?v.scrollLeft(t,f.left+a):v.scrollLeft(t,f.left+d)):void 0===n||n?v.scrollLeft(t,f.left+a):v.scrollLeft(t,f.left+d)))},docWidth:0,docHeight:0,viewportHeight:0,viewportWidth:0,scrollTop:0,scrollLeft:0}),p.each(["Left","Top"],function(a,s){var u="scroll"+a;v[u]=function(e,t){if("number"==typeof e)return arguments.callee(l,e);var n,r,o,i,e=v.get(e);return e&&e.nodeType===h.ELEMENT_NODE?void 0!==t?e[u]=parseFloat(t):n=e[u]:(i=m(e),void 0!==t?(t=parseFloat(t),r="Left"===a?t:v.scrollLeft(i),o="Top"===a?t:v.scrollTop(i),i.scrollTo(r,o)):"number"!=typeof(n=i["page"+(s?"Y":"X")+"Offset"])&&("number"!=typeof(n=(r=i.document).documentElement[u])&&(n=r.body[u]))),n}}),p.each(["Width","Height"],function(o){v["doc"+o]=function(e){return e=v.get(e),e=v.getDocument(e),t(e.documentElement["scroll"+o],e.body["scroll"+o],v["viewport"+o](e))},v["viewport"+o]=function(e){var e=v.get(e),t=m(e),e=t["inner"+o];if(i.mobile&&e)return e;var e="client"+o,n=(t=t.document).body,r=t.documentElement[e];return"CSS1Compat"===t.compatMode&&r||n&&n[e]||r}}),v}),KISSY.add("dom/base/style",["./api","ua"],function(e,t){function a(e,t){return t.toUpperCase()}function n(e){if((e=-1!==e.indexOf("-")?e.replace(f,a):e)in v)return v[e];if(!b||e in b)v[e]={propertyName:e,propertyNamePrefix:""};else{for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<m;n++){var r,o=h[n];(r=o+t)in b&&(v[e]={propertyName:r,propertyNamePrefix:o})}v[e]=v[e]||null}return v[e]}function s(e){if(A[e])return A[e];var t=n(e);return t&&t.propertyName||e}function i(e,t,n){var r,o,i;if(3!==e.nodeType&&8!==e.nodeType&&(r=e.style)){if(t=t.replace(f,a),i=x[t],t=s(t),void 0===n)return void 0===(o=!(i&&"get"in i&&void 0!==(o=i.get(e,!1)))?r[t]:o)?"":o;if(null===n||""===n?n="":isNaN(Number(n))||C[t]||(n+="px"),void 0!==(n=i&&i.set?i.set(e,n):n)){try{r[t]=n}catch(e){}""===n&&r.removeAttribute&&r.removeAttribute(t)}r.cssText||e.removeAttribute("style")}}function u(e){var t,n=arguments;return 0!==e.offsetWidth?t=r.apply(void 0,n):function(e,t,n){var r,o={},i=e.style;for(r in t)o[r]=i[r],i[r]=t[r];for(r in n.call(e),t)i[r]=o[r]}(e,L,function(){t=r.apply(void 0,n)}),t}function c(e,t,n,r){for(var o,i,a=0,s=0;s<t.length;s++)if(o=t[s])for(i=0;i<n.length;i++)a+=parseFloat(p._getComputedStyle(e,"border"===o?o+n[i]+"Width":o+n[i],r))||0;return a}function l(e){var t,n=e.ownerDocument;return t=n.defaultView?n.defaultView.getComputedStyle(e,null):t}function r(e,t,n){if(d.isWindow(e))return t===O?p.viewportWidth(e):p.viewportHeight(e);if(9===e.nodeType)return t===O?p.docWidth(e):p.docHeight(e);var r=t===O?["Left","Right"]:["Top","Bottom"],o=t===O?e.offsetWidth:e.offsetHeight,i=l(e),a="border-box"===p._getComputedStyle(e,"boxSizing",i),s=0;return(null==o||o<=0)&&(o=void 0,(null==(s=p._getComputedStyle(e,t,i))||Number(s)<0)&&(s=e.style[t]||0),s=parseFloat(s)||0),t=void 0!==o||a,o=o||s,(n=void 0===n?a?N:y:n)===y?t?o-c(e,["border","padding"],r,i):s:t?o+(n===N?0:n===T?-c(e,["border"],r,i):c(e,["margin"],r,i)):s+c(e,E.slice(n),r,i)}var f=/-([a-z])/gi,d=e,p=t("./api"),o=e.Env.host,v={},h=["Webkit","Moz","O","ms"],m=h.length,g=o.document||{},b=(g&&g.documentElement).style;t("ua");var E=["margin","border","padding"],y=-1,T=2,N=1,_=p.nodeName,S=/^margin/,O="width",D="display"+d.now(),C={fillOpacity:1,fontWeight:1,lineHeight:1,opacity:1,orphans:1,widows:1,zIndex:1,zoom:1},w=/\d(?!px)[a-z%]+$/i,x={},A={},M={},t=n("userSelect"),I=t&&t.propertyName;A.float="cssFloat",d.mix(p,{_cssHooks:x,_cssProps:A,_getComputedStyle:function(e,t,n){var r,o="",i=e.ownerDocument;return t=s(t),""!==(o=(n=n||i.defaultView.getComputedStyle(e,null))?n.getPropertyValue(t)||n[t]:o)||p.contains(i,e)||(o=e.style[t]),p._RE_NUM_NO_PX.test(o)&&S.test(t)&&(e=(r=e.style).width,t=r.minWidth,i=r.maxWidth,r.minWidth=r.maxWidth=r.width=o,o=n.width,r.width=e,r.minWidth=t,r.maxWidth=i),o},style:function(e,t,n){var r,o=(e=p.query(e))[0];if(d.isPlainObject(t))for(r in t)for(o=e.length-1;0<=o;o--)i(e[o],r,t[r]);else{if(void 0===n)return r="",r=o?i(o,t,n):r;for(o=e.length-1;0<=o;o--)i(e[o],t,n)}},css:function(e,t,n){var r,o=(e=p.query(e))[0];if(d.isPlainObject(t))for(r in t)for(o=e.length-1;0<=o;o--)i(e[o],r,t[r]);else{if(t=t.replace(f,a),r=x[t],void 0===n)return n="",void 0===(n=o&&!(r&&"get"in r&&void 0!==(n=r.get(o,!0)))?p._getComputedStyle(o,t):n)?"":n;for(o=e.length-1;0<=o;o--)i(e[o],t,n)}},show:function(e){for(var t,n,r,o,i,a=(e=p.query(e)).length-1;0<=a;a--)(i=e[a]).style.display=p.data(i,D)||"","none"===p.css(i,"display")&&(t=i.tagName.toLowerCase(),r=M[t],o=n=void 0,M[t]||(n=g.body||g.documentElement,o=g.createElement(t),p.prepend(o,n),r=p.css(o,"display"),n.removeChild(o),M[t]=r),t=r,p.data(i,D,t),i.style.display=t)},hide:function(e){for(var t=(e=p.query(e)).length-1;0<=t;t--){var n,r=(n=e[t]).style,o=r.display;"none"!==o&&(o&&p.data(n,D,o),r.display="none")}},toggle:function(e){for(var t,n=(e=p.query(e)).length-1;0<=n;n--)t=e[n],"none"===p.css(t,"display")?p.show(t):p.hide(t)},addStyleSheet:function(e,t,n){"string"==typeof e&&(n=t,t=e,e=o);var r,e=p.getDocument(e);(r=(n=n&&n.replace("#",""))?p.get("#"+n,e):r)||(r=p.create("<style>",{id:n},e),p.get("head",e).appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(e.createTextNode(t)))},unselectable:I?function(e){for(var t=(e=p.query(e)).length-1;0<=t;t--)e[t].style[I]="none"}:function(e){for(var t,n,r,o=0,i=(e=p.query(e)).length-1;0<=i;i--)for(r=(t=e[i]).getElementsByTagName("*"),t.setAttribute("unselectable","on"),n=["iframe","textarea","input","select"];t=r[o++];)d.inArray(_(t),n)||t.setAttribute("unselectable","on")},innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0,width:0,height:0}),d.each([O,"height"],function(r){p["inner"+d.ucfirst(r)]=function(e){return(e=p.get(e))&&u(e,r,T)},p["outer"+d.ucfirst(r)]=function(e,t){e=p.get(e);return e&&u(e,r,t?0:N)};var o=r===O?["Left","Right"]:["Top","Bottom"];p[r]=function(e,t){var n=p.get(e);if(void 0===t)return n&&u(n,r,y);if(n){e=l(n);return"border-box"===p._getComputedStyle(n,"boxSizing",e)&&(t+=c(n,["padding","border"],o,e)),p.css(n,r,t)}},x[r]={get:function(e,t){var n;return n=t?u(e,r)+"px":n}}});var L={position:"absolute",visibility:"hidden",display:"block"};d.each(["left","top"],function(o){x[o]={get:function(e,t){var n,r;if(t){if("static"===(r=p.css(e,"position")))return"auto";if((t="auto"===(n=p._getComputedStyle(e,o)))&&"relative"===r)return"0px";if(t||w.test(n)){if(r={top:0,left:0},"fixed"===p.css(e,"position"))t=e.getBoundingClientRect();else{for(n=e.offsetParent||(e.ownerDocument||g).body;n&&!P.test(n.nodeName)&&"static"===p.css(n,"position");)n=n.offsetParent;t=p.offset(e),(r=p.offset(n)).top+=parseFloat(p.css(n,"borderTopWidth"))||0,r.left+=parseFloat(p.css(n,"borderLeftWidth"))||0}t.top-=parseFloat(p.css(e,"marginTop"))||0,t.left-=parseFloat(p.css(e,"marginLeft"))||0,n={top:t.top-r.top,left:t.left-r.left}[o]+"px"}}return n}}});var P=/^(?:body|html)$/i;return p}),KISSY.add("dom/base/selector",["./api"],function(p,e){function v(e){for(var t=this.length,n=0;n<t&&!1!==e(this[n],n);n++);}function h(e){if(!(e=e.substr(1)))throw Error("An invalid or illegal string was specified for selector.");return e}function m(e,t){var n="string"==typeof e,r=void 0!==t?m(t):(s=1,[E]),o=r.length;if(e){if(n){if(e=w(e),s)if("body"===e)i=[E.body];else if(S.test(e))i=T(g(E,RegExp.$1));else if(C.test(e))i=(s=b._getElementById(RegExp.$2,E))&&s.nodeName.toLowerCase()===RegExp.$1?[s]:[];else if(O.test(e))i=(s=b._getElementById(e.substr(1),E))?[s]:[];else if(D.test(e))i=T(E.getElementsByTagName(e));else if(!e.match(/,|\+|=|~|\[|\]|:|>|\||\$|\^|\*|\(|\)|[\w-]+\.[\w-]+|[\w-]+#[\w-]+/)){for(var i,a=r,s=0,n=(i=e.split(/\s+/)).length;s<n;s++){var u=i,c=s,l=i[s];l="#"===(d=l.charAt(0))?function(n){return function(e){var t=b._getElementById(n,E);return t&&b._contains(e,t)?[t]:[]}}(h(l)):"."===d?function(t){return function(e){return g(e,t)}}(h(l)):function(t){return function(e){return e.getElementsByTagName(t)}}(l),u[c]=l}for(s=0,n=i.length;s<n;s++){l=i[s];var f,d=[];for(u=0,c=a.length;u<c;u++)f=l(a[u]),d.push.apply(d,T(f));if(!(a=d).length)break}i=a&&1<a.length?b.unique(a):a}if(!i){for(i=[],s=0;s<o;s++)_.apply(i,b._selectInternal(e,r[s]));1<i.length&&1<o&&b.unique(i)}}else if(i=e.nodeType||p.isWindow(e)?[e]:e.getDOMNodes?e.getDOMNodes():y(e)?e:N(e)?T(e):[e],!s)for(u=(n=i).length,i=[],s=0;s<u;s++)for(a=0;a<o;a++)if(b._contains(r[a],n[s])){i.push(n[s]);break}}else i=[];return i.each=v,i}function s(e,t){e=e&&u(e,"class");return(e=e&&e.replace(/[\r\t\n]/g," "))&&-1<(" "+e+" ").indexOf(" "+t+" ")}function u(e,t){t=e&&e.getAttributeNode(t);if(t&&t.specified)return t.nodeValue}function c(e,t){return"*"===t||e.nodeName.toLowerCase()===t.toLowerCase()}var g,r,o,b=e("./api"),E=p.Env.host.document,e=E.documentElement,a=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.msMatchesSelector,y=p.isArray,T=p.makeArray,N=b.isDomNodeList,_=Array.prototype.push,S=/^\.([\w-]+)$/,O=/^#([\w-]+)$/,D=/^([\w-])+$/,C=/^([\w-]+)#([\w-]+)$/,l=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/,w=p.trim;function i(e,t){return e===t?(r=!0,0):b._compareNodeOrder(e,t)}return g="getElementsByClassName"in E?function(e,t){return e.getElementsByClassName(t)}:function(e,t){for(var n,r=[],o=e.getElementsByTagName("*"),t=" "+t+" ",i=0;i<o.length;i++)-1<(" "+((n=o[i]).className||n.getAttribute("class"))+" ").indexOf(t)&&r.push(n);return r},p.mix(b,{_compareNodeOrder:function(e,t){return e.compareDocumentPosition&&t.compareDocumentPosition?4&e.compareDocumentPosition(t)?-1:1:e.compareDocumentPosition?-1:1},_getElementsByTagName:function(e,t){return T(t.querySelectorAll(e))},_getElementById:function(e,t){return t.getElementById(e)},_getSimpleAttr:u,_isTag:c,_hasSingleClass:s,_matchesInternal:function(e,t){for(var n,r=[],o=0,i=t.length;o<i;o++)n=t[o],a.call(n,e)&&r.push(n);return r},_selectInternal:function(e,t){return T(t.querySelectorAll(e))},query:m,get:function(e,t){return m(e,t)[0]||null},unique:(o=!0,[0,0].sort(function(){return o=!1,0}),function(e){if(r=o,e.sort(i),r)for(var t=1,n=e.length;t<n;)e[t]===e[t-1]?(e.splice(t,1),--n):t++;return e}),filter:function(e,t,n){var r,o,i,a,e=m(e,n),n=[];return"string"==typeof t&&(t=w(t))&&(i=l.exec(t))&&(r=i[1],o=i[2],a=i[3],r?o||a||(t=function(e){return u(e,"id")===r}):t=function(e){var t=!0,n=!0;return o&&(t=c(e,o)),(n=a?s(e,a):n)&&t}),"function"==typeof t?p.filter(e,t):b._matchesInternal(t,e)},test:function(e,t,n){return(e=m(e,n)).length&&b.filter(e,t,n).length===e.length}}),b}),KISSY.add("dom/base/traversal",["./api"],function(l,e){function o(e,t,n,r,o,i,a){if(!(e=f.get(e)))return null;if(0===t)return e;if(!(e=!i?e[n]:e))return null;o=o&&f.get(o)||null;var s,u,i=[],c=l.isArray(t=void 0===t?1:t);for("number"==typeof t&&(s=0,u=t,t=function(){return++s===u});e&&e!==o&&(!(e.nodeType===d.ELEMENT_NODE||e.nodeType===d.TEXT_NODE&&a)||!function(e,t){if(!t)return!0;if(l.isArray(t)){var n,r=t.length;if(!r)return!0;for(n=0;n<r;n++)if(f.test(e,t[n]))return!0}else if(f.test(e,t))return!0;return!1}(e,t)||r&&!r(e)||(i.push(e),c));)e=e[n];return c?i:i[0]||null}function r(e,t,n,r){var o,i,a=[];if(o=(o=e=f.get(e))&&n?e.parentNode:o){for(n=l.makeArray(o.childNodes),o=0;o<n.length;o++)i=n[o],!r&&i.nodeType!==d.ELEMENT_NODE||i===e||a.push(i);t&&(a=f.filter(a,t))}return a}var f=e("./api"),d=f.NodeType;return l.mix(f,{_contains:function(e,t){return!!(16&e.compareDocumentPosition(t))},closest:function(e,t,n,r){return o(e,t,"parentNode",function(e){return e.nodeType!==d.DOCUMENT_FRAGMENT_NODE},n,!0,r)},parent:function(e,t,n){return o(e,t,"parentNode",function(e){return e.nodeType!==d.DOCUMENT_FRAGMENT_NODE},n,void 0)},first:function(e,t,n){return o((e=f.get(e))&&e.firstChild,t,"nextSibling",void 0,void 0,!0,n)},last:function(e,t,n){return o((e=f.get(e))&&e.lastChild,t,"previousSibling",void 0,void 0,!0,n)},next:function(e,t,n){return o(e,t,"nextSibling",void 0,void 0,void 0,n)},prev:function(e,t,n){return o(e,t,"previousSibling",void 0,void 0,void 0,n)},siblings:function(e,t,n){return r(e,t,!0,n)},children:function(e,t){return r(e,t,void 0)},contents:function(e,t){return r(e,t,void 0,1)},contains:function(e,t){return e=f.get(e),t=f.get(t),!(!e||!t)&&f._contains(e,t)},index:function(e,t){var e=f.query(e),n=0,r=e[0];if(t)return n=f.query(t),"string"==typeof t?l.indexOf(r,n):l.indexOf(n[0],e);if(!(e=r&&r.parentNode))return-1;for(;r=r.previousSibling;)r.nodeType===d.ELEMENT_NODE&&n++;return n},equals:function(e,t){if(e=f.query(e),t=f.query(t),e.length!==t.length)return!1;for(var n=e.length;0<=n;n--)if(e[n]!==t[n])return!1;return!0}}),f}),KISSY.add("dom/base","./base/api,./base/attr,./base/class,./base/create,./base/data,./base/insertion,./base/offset,./base/style,./base/selector,./base/traversal".split(","),function(e,t){var n=t("./base/api");return t("./base/attr"),t("./base/class"),t("./base/create"),t("./base/data"),t("./base/insertion"),t("./base/offset"),t("./base/style"),t("./base/selector"),t("./base/traversal"),e.mix(e,{DOM:n,get:n.get,query:n.query}),n}),KISSY.add("event",["event/dom","event/custom"],function(e,t){var n=t("event/dom"),t=t("event/custom");return(n=e.Event=e.merge(n,{DomEvent:n,CustomEvent:t})).global=t.global,e.EventTarget=n.Target=t.Target,n}),KISSY.add("event/dom/base/utils",["dom"],function(e,t){var n=t("dom"),r="ksEventTargetId_"+e.now(),e=e.Env.host.document;return{simpleAdd:e&&e.addEventListener?function(e,t,n,r){e.addEventListener&&e.addEventListener(t,n,!!r)}:function(e,t,n){e.attachEvent&&e.attachEvent("on"+t,n)},simpleRemove:e&&e.removeEventListener?function(e,t,n,r){e.removeEventListener&&e.removeEventListener(t,n,!!r)}:function(e,t,n){e.detachEvent&&e.detachEvent("on"+t,n)},data:function(e,t){return n.data(e,r,t)},removeData:function(e){return n.removeData(e,r)}}}),KISSY.add("event/dom/base/special",[],function(){return{}}),KISSY.add("event/dom/base/observer",["event/base","./special"],function(e,t){function n(e){n.superclass.constructor.call(this,e)}var r=t("event/base"),i=t("./special");return e.extend(n,r.Observer,{keys:"fn,filter,data,context,originalType,groups,last".split(","),notifyInternal:function(e,t){var n,r,o=e.type;return(r=this.originalType)?e.type=r:r=o,(r=i[r])&&r.handle?(r=r.handle(e,this,t))&&0<r.length&&(n=r[0]):n=this.simpleNotify(e,t),!1===n&&e.halt(),e.type=o,n}}),n}),KISSY.add("event/dom/base/object",["event/base"],function(a,e){function s(){return t}function u(){return f}function c(e){var t=e.type;c.superclass.constructor.call(this);var n=u;"defaultPrevented"in(this.originalEvent=e)?n=e.defaultPrevented?s:u:"getPreventDefault"in e?n=e.getPreventDefault()?s:u:"returnValue"in e&&(n=e.returnValue===f?s:u),this.isDefaultPrevented=n;var r,o=[],i=d.concat();for(a.each(p,function(e){t.match(e.reg)&&(i=i.concat(e.props),e.fix&&o.push(e.fix))}),n=i.length;n;)this[r=i[--n]]=e[r];for(this.target||(this.target=e.srcElement||l),3===this.target.nodeType&&(this.target=this.target.parentNode),n=o.length;n;)(r=o[--n])(this,e)}var e=e("event/base"),l=a.Env.host.document,t=!0,f=!1,d="altKey,bubbles,cancelable,ctrlKey,currentTarget,eventPhase,metaKey,shiftKey,target,timeStamp,view,type".split(","),p=[{reg:/^key/,props:["char","charCode","key","keyCode","which"],fix:function(e,t){null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),void 0===e.metaKey&&(e.metaKey=e.ctrlKey)}},{reg:/^touch/,props:["touches","changedTouches","targetTouches"]},{reg:/^gesturechange$/i,props:["rotation","scale"]},{reg:/^(mousewheel|DOMMouseScroll)$/,props:[],fix:function(e,t){var n,r,o,i=t.wheelDelta,a=t.axis,s=t.wheelDeltaY,u=t.wheelDeltaX,t=t.detail;i&&(o=i/120),t&&(o=-(0==t%3?t/3:t)),void 0!==a&&(a===e.HORIZONTAL_AXIS?(r=0,n=-1*o):a===e.VERTICAL_AXIS&&(n=0,r=o)),void 0!==s&&(r=s/120),(n=void 0!==u?-1*u/120:n)||r||(r=o),void 0!==n&&(e.deltaX=n),void 0!==r&&(e.deltaY=r),void 0!==o&&(e.delta=o)}},{reg:/^mouse|contextmenu|click|mspointer|(^DOMMouseScroll$)/i,props:"buttons,clientX,clientY,button,offsetX,relatedTarget,which,fromElement,toElement,offsetY,pageX,pageY,screenX,screenY".split(","),fix:function(e,t){var n,r,o=e.target,i=t.button;return null==e.pageX&&null!=t.clientX&&(r=(n=o.ownerDocument||l).documentElement,n=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||n&&n.scrollLeft||0)-(r&&r.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||n&&n.scrollTop||0)-(r&&r.clientTop||n&&n.clientTop||0)),e.which||void 0===i||(e.which=1&i?1:2&i?3:4&i?2:0),!e.relatedTarget&&e.fromElement&&(e.relatedTarget=e.fromElement===o?e.toElement:e.fromElement),e}}];return a.extend(c,e.Object,{constructor:c,preventDefault:function(){var e=this.originalEvent;e.preventDefault?e.preventDefault():e.returnValue=f,c.superclass.preventDefault.call(this)},stopPropagation:function(){var e=this.originalEvent;e.stopPropagation?e.stopPropagation():e.cancelBubble=t,c.superclass.stopPropagation.call(this)}}),c}),KISSY.add("event/dom/base/observable","event/base,dom,./special,./utils,./observer,./object".split(","),function(d,e){function p(e){d.mix(this,e),this.reset()}var t=e("event/base"),h=e("dom"),v=e("./special"),a=e("./utils"),r=e("./observer"),m=e("./object"),g=t.Utils;return d.extend(p,t.Observable,{setup:function(){var e=this.type,t=v[e]||{},n=this.currentTarget,r=a.data(n).handle;t.setup&&!1!==t.setup.call(n,e)||a.simpleAdd(n,e,r)},constructor:p,reset:function(){p.superclass.reset.call(this),this.lastCount=this.delegateCount=0},notify:function(e){var t,n,r=e.target,o=e.type,i=this.currentTarget,a=this.observers,s=[],u=this.delegateCount||0;if(u&&r.nodeType)for(;r!==i;){if(!0!==r.disabled||"click"!==o){for(var c,l,f,d={},p=[],v=0;v<u;v++)(c=void 0===(c=d[l=(f=(n=a[v]).filter)+""])?d[l]=h.test(r,f):c)&&p.push(n);p.length&&s.push({currentTarget:r,currentTargetObservers:p})}r=r.parentNode||i}for(u<a.length&&s.push({currentTarget:i,currentTargetObservers:a.slice(u)}),v=0,r=s.length;!e.isPropagationStopped()&&v<r;++v)for(p=(o=s[v]).currentTargetObservers,o=o.currentTarget,e.currentTarget=o,o=0;!e.isImmediatePropagationStopped()&&o<p.length;o++)i=(i=p[o]).notify(e,this),!1!==t&&void 0!==i&&(t=i);return t},fire:function(e,t){var e=e||{},n=""+this.type,r=!1!==(c=v[n]||{}).bubbles,o=this.currentTarget;if(!(c.fire&&!1===c.fire.call(o,t)||(e instanceof m||(a=e,e=new m({currentTarget:o,type:n,target:o}),d.mix(e,a)),c.preFire&&!1===c.preFire.call(o,e,t)))){for(var i,a=o,s=h.getWindow(a),u=s.document,c=[],l="on"+n,f=0;c.push(a),a=a.parentNode||a.ownerDocument||a===u&&s,!t&&a&&r;);for(a=c[f];e.currentTarget=a,(r=p.getDomEventObservable(a,n))&&void 0!==(r=r.notify(e))&&!1!==i&&(i=r),a[l]&&!1===a[l].call(a)&&e.preventDefault(),a=c[++f],!t&&a&&!e.isPropagationStopped(););if(!t&&!e.isDefaultPrevented()){try{o[n]&&!d.isWindow(o)&&o[p.triggeredEvent=n]()}catch(e){}p.triggeredEvent=""}return i}},on:function(e){var t=this.observers,n=v[this.type]||{},e=e instanceof r?e:new r(e);-1===this.findObserver(e)&&(e.filter?(t.splice(this.delegateCount,0,e),this.delegateCount++):e.last?(t.push(e),this.lastCount++):t.splice(t.length-this.lastCount,0,e),n.add&&n.add.call(this.currentTarget,e))},detach:function(e){var t,n=v[this.type]||{},r="filter"in e,o=e.filter,i=e.context,a=e.fn,s=this.currentTarget,u=this.observers,e=e.groups;if(u.length){e&&(t=g.getGroupsRe(e));var c,l,f,d=u.length;if(a||r||t){for(i=i||s,c=e=0,l=[];e<d;++e)i!==((f=u[e]).context||s)||a&&a!==f.fn||r&&(o&&o!==f.filter||!o&&!f.filter)||t&&!f.groups.match(t)?l[c++]=f:(f.filter&&this.delegateCount&&this.delegateCount--,f.last&&this.lastCount&&this.lastCount--,n.remove&&n.remove.call(s,f));this.observers=l}else this.reset();this.checkMemory()}},checkMemory:function(){var e,t,n=this.type,r=v[n]||{},o=this.currentTarget,i=a.data(o);i&&(e=i.observables,this.hasObserver()||(t=i.handle,r.tearDown&&!1!==r.tearDown.call(o,n)||a.simpleRemove(o,n,t),delete e[n]),d.isEmptyObject(e)&&(i.handle=null,a.removeData(o)))}}),p.triggeredEvent="",p.getDomEventObservable=function(e,t){var n,e=a.data(e);return(n=e?e.observables:n)?n[t]:null},p.getDomEventObservablesHolder=function(e,t){var n=a.data(e);return!n&&t&&a.data(e,n={}),n},p}),KISSY.add("event/dom/base/dom-event","event/base,./utils,dom,./special,./observable,./object".split(","),function(a,e){function s(e,t){var n,r=l[t]||{};return!e.originalType&&(n=r.typeFix)&&(e.originalType=t,t=n),t}function o(e,t,n){var r,o,t=s(n=a.merge(n),t),i=f.getDomEventObservablesHolder(e,1);(o=i.handle)||((o=i.handle=function(e){var t=e.type,n=o.currentTarget;if(f.triggeredEvent!==t&&"undefined"!=typeof KISSY&&(t=f.getDomEventObservable(n,t)))return e.currentTarget=n,e=new d(e),t.notify(e)}).currentTarget=e),(i=(r=!(r=i.observables)?i.observables={}:r)[t])||(i=r[t]=new f({type:t,currentTarget:e})).setup(),i.on(n)}function u(e,t,n){var t=s(n=a.merge(n),t),r=((e=f.getDomEventObservablesHolder(e))||{}).observables;if(e&&r)if(t)(t=r[t])&&t.detach(n);else for(t in r)r[t].detach(n)}var t=e("event/base"),r=e("./utils"),c=e("dom"),l=e("./special"),f=e("./observable"),d=e("./object"),p=t.Utils,i={on:function(e,t,n,r){return e=c.query(e),p.batchForType(function(e,t,n,r){for(t=(n=p.normalizeParam(t,n,r)).type,r=e.length-1;0<=r;r--)o(e[r],t,n)},1,e,t,n,r),e},detach:function(e,t,n,r){return e=c.query(e),p.batchForType(function(e,t,n,r){for(var o,i,t=(n=p.normalizeParam(t,n,r)).type,r=e.length-1;0<=r;r--)if(u(o=e[r],t,n),n.deep&&o.getElementsByTagName)for(o=(i=o.getElementsByTagName("*")).length-1;0<=o;o--)u(i[o],t,n)},1,e,t,n,r),e},delegate:function(e,t,n,r,o){return i.on(e,t,{fn:r,context:o,filter:n})},undelegate:function(e,t,n,r,o){return i.detach(e,t,{fn:r,context:o,filter:n})},fire:function(o,e,i,a){var s;return(i=i||{}).synthetic=1,p.splitAndRun(e,function(e){var t,n,r;for(p.fillGroupsForEvent(e,i),e=i.type,(n=l[e])&&n.typeFix&&(e=n.typeFix),n=(o=c.query(o)).length-1;0<=n;n--)t=o[n],r=f.getDomEventObservable(t,e),(r=!a&&!r?new f({type:e,currentTarget:t}):r)&&(t=r.fire(i,a),!1!==s&&void 0!==t&&(s=t))}),s},fireHandler:function(e,t,n){return i.fire(e,t,n,1)},clone:function(e,n){var t;(t=f.getDomEventObservablesHolder(e))&&((e=r.data(e))&&e===r.data(n)&&r.removeData(n),a.each(t.observables,function(e,t){a.each(e.observers,function(e){o(n,t,e)})}))}};return i}),KISSY.add("event/dom/base/key-codes",[],function(e){var t=e.UA,n={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=n.F1&&t<=n.F12)return!1;switch(t){case n.ALT:case n.CAPS_LOCK:case n.CONTEXT_MENU:case n.CTRL:case n.DOWN:case n.END:case n.ESC:case n.HOME:case n.INSERT:case n.LEFT:case n.MAC_FF_META:case n.META:case n.NUMLOCK:case n.NUM_CENTER:case n.PAGE_DOWN:case n.PAGE_UP:case n.PAUSE:case n.PRINT_SCREEN:case n.RIGHT:case n.SHIFT:case n.UP:case n.WIN_KEY:case n.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=n.ZERO&&e<=n.NINE||e>=n.NUM_ZERO&&e<=n.NUM_MULTIPLY||e>=n.A&&e<=n.Z||t.webkit&&0===e)return!0;switch(e){case n.SPACE:case n.QUESTION_MARK:case n.NUM_PLUS:case n.NUM_MINUS:case n.NUM_PERIOD:case n.NUM_DIVISION:case n.SEMICOLON:case n.DASH:case n.EQUALS:case n.COMMA:case n.PERIOD:case n.SLASH:case n.APOSTROPHE:case n.SINGLE_QUOTE:case n.OPEN_SQUARE_BRACKET:case n.BACKSLASH:case n.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};return n}),KISSY.add("event/dom/base/gesture",[],function(){return{start:"mousedown",move:"mousemove",end:"mouseup",tap:"click",singleTap:"click",doubleTap:"dblclick"}}),KISSY.add("event/dom/base/special-events",["./dom-event","./special"],function(e,t){var n=t("./dom-event"),t=t("./special");return e.mix(t,{mousewheel:{typeFix:e.UA.gecko?"DOMMouseScroll":"mousewheel"},load:{bubbles:!1},click:{fire:function(e){if(!e&&"checkbox"==""+this.type&&this.click&&"input"===this.nodeName.toLowerCase())return this.click(),!1}},focus:{bubbles:!1,preFire:function(e,t){if(!t)return n.fire(this,"focusin")},fire:function(e){if(!e&&this.ownerDocument&&this!==this.ownerDocument.activeElement&&this.focus)return this.focus(),!1}},blur:{bubbles:!1,preFire:function(e,t){if(!t)return n.fire(this,"focusout")},fire:function(e){if(!e&&this.ownerDocument&&this===this.ownerDocument.activeElement&&this.blur)return this.blur(),!1}}})}),KISSY.add("event/dom/base/mouseenter",["dom","./special"],function(e,t){var i=t("dom"),n=t("./special");e.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(e){n[e.name]={typeFix:e.fix,handle:function(e,t,n){var r=e.currentTarget,o=e.relatedTarget;if(!o||o!==r&&!i.contains(r,o))return[t.simpleNotify(e,n)]}}})}),KISSY.add("event/dom/base/valuechange",["dom","./dom-event","./special"],function(e,t){function n(e){var t;u.hasData(e,p)&&(t=u.data(e,p),clearTimeout(t),u.removeData(e,p))}function r(e){n(e.target)}function o(e){var t=e.value,n=u.data(e,d);t!==n&&(c.fireHandler(e,l,{prevVal:n,newVal:t}),u.data(e,d,t))}function i(e){var t,n=e.target;"focus"===e.type&&u.data(n,d,n.value),t=n,u.hasData(t,p)||u.data(t,p,setTimeout(function e(){o(t),u.data(t,p,setTimeout(e,v))},v))}function a(e){o(e.target)}function s(e){u.removeData(e,d),n(e),c.detach(e,"blur",r),c.detach(e,"webkitspeechchange",a),c.detach(e,"mousedown keyup keydown focus",i)}var u=t("dom"),c=t("./dom-event"),t=t("./special"),l="valuechange",f=u.nodeName,d="event/valuechange/history",p="event/valuechange/poll",v=50;return t[l]={setup:function(){var e=f(this);"input"!==e&&"textarea"!==e||(s(this),c.on(this,"blur",r),c.on(this,"webkitspeechchange",a),c.on(this,"mousedown keyup keydown focus",i))},tearDown:function(){s(this)}},c}),KISSY.add("event/dom/base","./base/dom-event,./base/object,./base/key-codes,./base/gesture,./base/special-events,./base/mouseenter,./base/valuechange".split(","),function(e,t){var n=t("./base/dom-event"),r=t("./base/object"),o=t("./base/key-codes"),i=t("./base/gesture"),a=t("./base/special-events");return t("./base/mouseenter"),t("./base/valuechange"),e.merge({add:n.on,remove:n.detach,KeyCode:o,Gesture:i,Special:a,Object:r},n)}),KISSY.add("event/base/utils",[],function(a){function o(e){if(e.indexOf(".")<0)return[e,""];var t=e.match(/([^.]+)?(\..+)?$/),e=[t[1]];return(t=t[2])?(t=t.split(".").sort(),e.push(t.join("."))):e.push(""),e}var t,r;return{splitAndRun:t=function(e,t){a.isArray(e)?a.each(e,t):-1===(e=a.trim(e)).indexOf(" ")?t(e):a.each(e.split(/\s+/),t)},normalizeParam:function(e,t,n){var r=t||{},r="function"==typeof t?{fn:t,context:n}:a.merge(r),e=(t=o(e))[0];return r.groups=t[1],r.type=e,r},batchForType:function(r,o){var i=a.makeArray(arguments),e=i[2+o];e&&"object"==typeof e?a.each(e,function(e,t){var n=[].concat(i);n.splice(0,2),n[o]=t,n[o+1]=e,r.apply(null,n)}):t(e,function(e){var t=[].concat(i);t.splice(0,2),t[o]=e,r.apply(null,t)})},fillGroupsForEvent:function(e,t){var n=o(e),e=n[1];e&&(e=r(e),t._ksGroups=e),t.type=n[0]},getGroupsRe:r=function(e){return RegExp(e.split(".").join(".*\\.")+"(?:\\.|$)")}}}),KISSY.add("event/base/object",[],function(e){function t(){this.timeStamp=e.now(),this.currentTarget=this.target=void 0}function n(){return!1}function r(){return!0}return t.prototype={constructor:t,isDefaultPrevented:n,isPropagationStopped:n,isImmediatePropagationStopped:n,preventDefault:function(){this.isDefaultPrevented=r},stopPropagation:function(){this.isPropagationStopped=r},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=r,this.stopPropagation()},halt:function(e){e?this.stopImmediatePropagation():this.stopPropagation(),this.preventDefault()}},t}),KISSY.add("event/base/observer",[],function(t){function e(e){t.mix(this,e)}return e.prototype={constructor:e,equals:function(n){var r=this;return!!t.reduce(r.keys,function(e,t){return e&&r[t]===n[t]},1)},simpleNotify:function(e,t){e=this.fn.call(this.context||t.currentTarget,e,this.data);return this.once&&t.removeObserver(this),e},notifyInternal:function(e,t){t=this.simpleNotify(e,t);return!1===t&&e.halt(),t},notify:function(e,t){var n=e._ksGroups;return!n||this.groups&&this.groups.match(n)?this.notifyInternal(e,t):void 0}},e}),KISSY.add("event/base/observable",[],function(t){function e(e){this.currentTarget=null,t.mix(this,e),this.reset()}return e.prototype={constructor:e,hasObserver:function(){return!!this.observers.length},reset:function(){this.observers=[]},removeObserver:function(e){for(var t=this.observers,n=t.length,r=0;r<n;r++)if(t[r]===e){t.splice(r,1);break}this.checkMemory()},checkMemory:function(){},findObserver:function(e){for(var t=this.observers,n=t.length-1;0<=n;--n)if(e.equals(t[n]))return n;return-1}},e}),KISSY.add("event/base",["./base/utils","./base/object","./base/observer","./base/observable"],function(e,t){return{Utils:t("./base/utils"),Object:t("./base/object"),Observer:t("./base/observer"),Observable:t("./base/observable")}}),KISSY.add("event/dom/focusin",["event/dom/base"],function(e,t){var o=t("event/dom/base"),i=o.Special;return e.each([{name:"focusin",fix:"focus"},{name:"focusout",fix:"blur"}],function(t){function n(e){return o.fire(e.target,t.name)}var r=e.guid("attaches_"+e.now()+"_");i[t.name]={setup:function(){var e=this.ownerDocument||this;r in e||(e[r]=0),e[r]+=1,1===e[r]&&e.addEventListener(t.fix,n,!0)},tearDown:function(){var e=this.ownerDocument||this;--e[r],0===e[r]&&e.removeEventListener(t.fix,n,!0)}}}),o}),KISSY.add("event/custom/observer",["event/base"],function(e,t){function n(){n.superclass.constructor.apply(this,arguments)}t=t("event/base");return e.extend(n,t.Observer,{keys:["fn","context","groups"]}),n}),KISSY.add("event/custom/object",["event/base"],function(t,e){function n(e){n.superclass.constructor.call(this),t.mix(this,e)}e=e("event/base");return t.extend(n,e.Object),n}),KISSY.add("event/custom/observable",["event/base","./observer","./object"],function(e,t){function n(){n.superclass.constructor.apply(this,arguments),this.defaultFn=null,this.defaultTargetOnly=!1,this.bubbles=!0}var r=t("event/base"),o=t("./observer"),c=t("./object"),l=r.Utils;return e.extend(n,r.Observable,{on:function(e){e=new o(e),-1===this.findObserver(e)&&this.observers.push(e)},fire:function(e){var t,n,r,e=e||{},o=this.bubbles,i=this.currentTarget,a=this.type,s=this.defaultFn,u=e;if(e.type=a,u instanceof c||(u.target=i,u=new c(u)),u.currentTarget=i,e=this.notify(u),!1!==r&&void 0!==e&&(r=e),o&&!u.isPropagationStopped())for(t=(o=i.getTargets())&&o.length||0,n=0;n<t&&!u.isPropagationStopped();n++)e=o[n].fire(a,u),!1!==r&&void 0!==e&&(r=e);return r=s&&!u.isDefaultPrevented()&&(e=(a=u.target).getCustomEventObservable(u.type),!this.defaultTargetOnly&&!e.defaultTargetOnly||i===a)?s.call(i,u):r},notify:function(e){for(var t,n,r=[].concat(this.observers),o=r.length,i=0;i<o&&!e.isImmediatePropagationStopped();i++)t=r[i].notify(e,this),!1!==n&&void 0!==t&&(n=t);return n},detach:function(e){var t,n=e.fn,r=e.context,o=this.currentTarget,i=this.observers,e=e.groups;if(i.length){e&&(t=l.getGroupsRe(e));var a,s,u,c=i.length;if(n||t){for(r=r||o,a=e=0,s=[];e<c;++e)(r!==((u=i[e]).context||o)||n&&n!==u.fn||t&&!u.groups.match(t))&&(s[a++]=u);this.observers=s}else this.reset()}}}),n}),KISSY.add("event/custom/target",["event/base","./observable"],function(i,e){var t=e("event/base"),a=e("./observable"),s=t.Utils,u=s.splitAndRun;return{isTarget:1,getCustomEventObservable:function(e,t){var n=this.getCustomEvents(),r=n&&n[e];return r=!r&&t?n[e]=new a({currentTarget:this,type:e}):r},fire:function(e,n){var r,o=this,t=o.getTargets(),i=t&&t.length,n=n||{};return u(e,function(e){var t;if(s.fillGroupsForEvent(e,n),e=n.type,(t=o.getCustomEventObservable(e))||i){if(t){if(!t.hasObserver()&&!t.defaultFn&&(t.bubbles&&!i||!t.bubbles))return}else t=new a({currentTarget:o,type:e});e=t.fire(n),!1!==r&&void 0!==e&&(r=e)}}),r},publish:function(e,t){var n,r=this;return u(e,function(e){n=r.getCustomEventObservable(e,!0),i.mix(n,t)}),r},addTarget:function(e){var t=this.getTargets();return i.inArray(e,t)||t.push(e),this},removeTarget:function(e){var t=this.getTargets();return-1!==(e=i.indexOf(e,t))&&t.splice(e,1),this},getTargets:function(){return this["__~ks_bubble_targets"]||(this["__~ks_bubble_targets"]=[])},getCustomEvents:function(){return this["__~ks_custom_events"]||(this["__~ks_custom_events"]={})},on:function(e,t,n){var r=this;return s.batchForType(function(e,t,n){e=(t=s.normalizeParam(e,t,n)).type,(e=r.getCustomEventObservable(e,!0))&&e.on(t)},0,e,t,n),r},detach:function(e,t,n){var o=this;return s.batchForType(function(e,t,n){var r=s.normalizeParam(e,t,n);(e=r.type)?(e=o.getCustomEventObservable(e,!0))&&e.detach(r):(e=o.getCustomEvents(),i.each(e,function(e){e.detach(r)}))},0,e,t,n),o}}}),KISSY.add("event/custom",["./custom/target"],function(e,t){t=t("./custom/target");return{Target:t,global:e.mix({},t)}}),KISSY.add("cookie",[],function(e){function s(e){return"string"==typeof e&&""!==e}var u=e.Env.host.document,c=encodeURIComponent,r=e.urlDecode;return e.Cookie={get:function(e){var t,n;return t=s(e)&&(n=(""+u.cookie).match(RegExp("(?:^| )"+e+"(?:(?:=([^;]*))|;|$)")))?n[1]?r(n[1]):"":t},set:function(e,t,n,r,o,i){var t=""+c(t),a=n;"number"==typeof a&&(a=new Date).setTime(a.getTime()+864e5*n),a instanceof Date&&(t+="; expires="+a.toUTCString()),s(r)&&(t+="; domain="+r),s(o)&&(t+="; path="+o),i&&(t+="; secure"),u.cookie=e+"="+t},remove:function(e,t,n,r){this.set(e,"",-1,t,n,r)}},e.Cookie});
