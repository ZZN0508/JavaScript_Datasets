function VortexSimple(e,n){var b=this;b.appID=e,b.eventName=n,b.extendedEnvData=!1,b.etaHubUrl="https://etahub.com/events";var r=[];function o(){}b.set=function(e,n){r[e]=n},b.del=function(e){delete r[e]},b.send=function(e,n){var o;"undefined"!=typeof XMLHttpRequest&&((o=new XMLHttpRequest).onreadystatechange=function(){var e;4==o.readyState&&(e=o.responseType&&"text"!==o.responseType?"document"===o.responseType?o.responseXML:o.response:o.responseText,b.response=JSON.parse(e),void 0!==n&&n(e))},o.open("GET",e,!0),o.send(null))},b.sendData=function(e){b.send(b.generateUrl(),e)},b.generateUrl=function(){var e=[],n=b.detectEnv();for(o in n)n.hasOwnProperty(o)&&(e[encodeURIComponent("_"+b.determineTypePrefix(n[o])+o)]=encodeURIComponent(n[o]));for(o in r)r.hasOwnProperty(o)&&(e[encodeURIComponent(b.determineTypePrefix(r[o])+o)]=encodeURIComponent(r[o]));var o,s="?app_id="+encodeURIComponent(b.appID)+"&eventName="+encodeURIComponent(b.eventName)+"&";for(o in e)e.hasOwnProperty(o)&&(s+=o+"="+e[o]+"&");return b.etaHubUrl+s},b.determineTypePrefix=function(e){var n="";switch(typeof e){case"string":n="s";break;case"number":n="n";break;case"boolean":n="b";break;default:throw new o}return n},b.detectEnv=function(){var e,n,o,s="";try{var r="-";screen.width&&(width=screen.width||"",height=screen.height||"",s+=width+" x "+height);var i,t,a,d,c=navigator.appVersion,p=navigator.userAgent,w=navigator.appName,u=""+parseFloat(navigator.appVersion);parseInt(navigator.appVersion,10);-1!=(a=p.indexOf("Opera"))?(w="Opera",u=p.substring(a+6),-1!=(a=p.indexOf("Version"))&&(u=p.substring(a+8))):-1!=(a=p.indexOf("OPR"))?(w="Opera",u=p.substring(a+4),-1!=(a=p.indexOf("Version"))&&(u=p.substring(a+8))):-1!=(a=p.indexOf("MSIE"))?(w="Microsoft Internet Explorer",u=p.substring(a+5)):-1!=(a=p.indexOf("Chrome"))?(w="Chrome",u=p.substring(a+7)):-1!=(a=p.indexOf("Safari"))?(w="Safari",u=p.substring(a+7),-1!=(a=p.indexOf("Version"))&&(u=p.substring(a+8))):-1!=(a=p.indexOf("Firefox"))?(w="Firefox",u=p.substring(a+8)):-1!=p.indexOf("Trident/")?(w="Microsoft Internet Explorer",u=p.substring(p.indexOf("rv:")+3)):(t=p.lastIndexOf(" ")+1)<(a=p.lastIndexOf("/"))&&(w=p.substring(t,a),u=p.substring(a+1),w.toLowerCase()==w.toUpperCase()&&(w=navigator.appName)),-1!=(d=(u=-1!=(d=(u=-1!=(d=u.indexOf(";"))?u.substring(0,d):u).indexOf(" "))?u.substring(0,d):u).indexOf(")"))&&(u=u.substring(0,d)),i=parseInt(""+u,10),isNaN(i)&&(u=""+parseFloat(navigator.appVersion),parseInt(navigator.appVersion,10)),e=/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(c),o=!!navigator.cookieEnabled,void 0!==navigator.cookieEnabled||o||(document.cookie="testcookie",o=-1!=document.cookie.indexOf("testcookie"));var g,f,W,O=r,v=[{s:"Windows 3.11",r:/Win16/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows Phone",r:/(Windows Phone)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows ME",r:/Windows ME/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(g in v){var x=v[g];if(x.r.test(p)){O=x.s;break}}switch(n=r,/Windows Phone/.test(O)?n=/Windows Phone (.*?);/.exec(p)[1]:/Windows/.test(O)&&(n=/Windows (.*)/.exec(O)[1]),O){case"Mac OS X":n=/Mac OS X (10[\.\_\d]+)/.exec(p)[1];break;case"Android":var h=/Android ([\.\_\d]+)/.exec(p);h?n=h[1]:/Firefox\//.exec(p)&&(n="-(Firefox does not report)");break;case"iOS":n=(n=/OS (\d+)_(\d+)_?(\d+)?/.exec(c))[1]+"."+n[2]+"."+(0|n[3])}W="no check","undefined"!=typeof swfobject&&(W=0<(f=swfobject.getFlashPlayerVersion()).major?f.major+"."+f.minor+" r"+f.release:r)}catch(e){console.log("Error running agent detection: "+e.toString())}return b.extendedEnvData?{host:window.location.hostname,screen:s,browser:w,browserVersion:u,mobile:e,os:O,osVersion:n,cookies:o,flashVersion:W,languages:navigator.languages?navigator.languages.join(","):navigator.language||navigator.userLanguage}:{host:window.location.hostname,mobile:e}}}
