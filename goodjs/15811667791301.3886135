import{r as e}from"./singletons-bb9012b7.js";import{S as l,i as s,s as t,l as a,f as o,d as n,e as c,c as r,a as i,b as u,v as h,k as p,n as f,M as g,E as d,P as m,K as $,r as v,B as b,u as w,N as y,Q as k,R as x,T,U as E,F as q,J as z,H as j,V as I,j as S,m as A,o as P,w as U,z as _,W as D}from"./vendor-aca2138d.js";import{a as H}from"./paths-2c73d5fe.js";import{b as N}from"./env-984c559a.js";const O=async function(l,t){return e.goto(l,t,[])},M=E["window"];function V(e,l,t){const s=e.slice();return s[28]=l[t],s}const B=e=>({option:8&e,highlighted:12&e,search:1&e,regex:16&e}),C=e=>({option:e[28],highlighted:e[28]===e[2],search:e[0],regex:e[4]});function G(e){let t,l;return{c(){t=c("img"),this.h()},l(e){t=r(e,"IMG",{class:!0,alt:!0,src:!0}),this.h()},h(){u(t,"class","icon-search svelte-z7q7fo"),u(t,"alt","Search icon"),t.src!==(l=H+"/images/icon-search.svg")&&u(t,"src",l)},m(e,l){o(e,t,l)},p:q,d(e){e&&n(t)}}}function L(t){let s,e,a,i;return{c(){s=c("img"),this.h()},l(e){s=r(e,"IMG",{class:!0,alt:!0,src:!0}),this.h()},h(){u(s,"class","icon-clear svelte-z7q7fo"),u(s,"alt","Clear icon"),s.src!==(e=H+"/images/icon-clear.svg")&&u(s,"src",e)},m(e,l){o(e,s,l),a||(i=m(s,"click",t[14]),a=!0)},p:q,d(e){e&&n(s),a=!1,i()}}}function R(t){let a,s,p=t[3],f=[];for(let e=0;e<p.length;e+=1)f[e]=W(V(t,p,e));return{c(){a=c("ul");for(let e=0;e<f.length;e+=1)f[e].c();this.h()},l(e){a=r(e,"UL",{class:!0});var l=i(a);for(let e=0;e<f.length;e+=1)f[e].l(l);l.forEach(n),this.h()},h(){u(a,"class","svelte-z7q7fo")},m(e,l){o(e,a,l);for(let e=0;e<f.length;e+=1)f[e].m(a,null);t[24](a),s=!0},p(l,t){if(270877&t){let e;for(p=l[3],e=0;e<p.length;e+=1){var s=V(l,p,e);f[e]?(f[e].p(s,t),h(f[e],1)):(f[e]=W(s),f[e].c(),h(f[e],1),f[e].m(a,null))}for(b(),e=p.length;e<f.length;e+=1)(e=>v(f[e],1,1,()=>{f[e]=null}))(e);w()}},i(e){if(!s){for(let e=0;e<p.length;e+=1)h(f[e]);s=!0}},o(e){f=f.filter(Boolean);for(let e=0;e<f.length;e+=1)v(f[e]);s=!1},d(e){e&&n(a),y(f,e),t[24](null)}}}function W(t){let s,b,w,y,k,x;const q=t[19].default,E=z(q,t,t[18],C),T=E||function(e){let t,s,c=e[9](e[28].label,e[4])+"";return{c(){s=a(),this.h()},l(e){s=a(),this.h()},h(){t=new I(s)},m(e,l){t.m(c,e,l),o(e,s,l)},p(e,l){24&l&&c!==(c=e[9](e[28].label,e[4])+"")&&t.p(c)},d(e){e&&n(s),e&&t.d()}}}(t);function j(...e){return t[23](t[28],...e)}return{c(){s=c("li"),b=c("span"),T&&T.c(),w=p(),this.h()},l(e){s=r(e,"LI",{class:!0});var l=i(s);b=r(l,"SPAN",{});e=i(b);T&&T.l(e),e.forEach(n),w=f(l),l.forEach(n),this.h()},h(){u(s,"class","svelte-z7q7fo"),g(s,"highlighted",t[28]===t[2])},m(e,l){o(e,s,l),d(s,b),T&&T.m(b,null),d(s,w),y=!0,k||(x=m(s,"click",j),k=!0)},p(e,l){t=e,E?E.p&&262173&l&&$(E,q,t,t[18],l,B,C):T&&T.p&&24&l&&T.p(t,l),12&l&&g(s,"highlighted",t[28]===t[2])},i(e){y||(h(T,e),y=!0)},o(e){v(T,e),y=!1},d(e){e&&n(s),T&&T.d(e),k=!1,x()}}}function F(g){let s,$,y,q,E,T,t,j,z,H=function(){let t;function s(e){return e[7]&&""!==e[7].value&&e[6]?L:G}let c=s(g),r=c(g);return{c(){r.c(),t=a()},l(e){r.l(e),t=a()},m(e,l){r.m(e,l),o(e,t,l)},p(e,l){c===(c=s(e))&&r?r.p(e,l):(r.d(1),r=c(e),r&&(r.c(),r.m(t.parentNode,t)))},d(e){r.d(e),e&&n(t)}}}(),I=g[5]&&g[6]&&0<g[3].length&&R(g);return{c(){s=c("div"),$=c("input"),y=p(),H&&H.c(),q=p(),E=c("div"),I&&I.c(),T=p(),this.h()},l(e){s=r(e,"DIV",{class:!0});var l=i(s);$=r(l,"INPUT",{disabled:!0,placeholder:!0,autocomplete:!0,class:!0}),y=f(l),H&&H.l(l),q=f(l),E=r(l,"DIV",{class:!0});var t=i(E);I&&I.l(t),t.forEach(n),l.forEach(n),T=f(e),this.h()},h(){$.disabled=!N,u($,"placeholder",g[1]),u($,"autocomplete","none"),u($,"class","svelte-z7q7fo"),u(E,"class","options svelte-z7q7fo"),u(s,"class","autocomplete svelte-z7q7fo")},m(e,l){o(e,s,l),d(s,$),g[21]($),k($,g[0]),d(s,y),H&&H.m(s,null),d(s,q),d(s,E),I&&I.m(E,null),o(e,T,l),t=!0,j||(z=[m(M,"click",g[20]),m($,"input",g[22]),m($,"focus",g[10]),m($,"blur",g[11]),m($,"keydown",g[12]),m(s,"click",J)],j=!0)},p(e,[l]){(!t||2&l)&&u($,"placeholder",e[1]),1&l&&$.value!==e[0]&&k($,e[0]),H.p(e,l),e[5]&&e[6]&&0<e[3].length?I?(I.p(e,l),104&l&&h(I,1)):(I=R(e),I.c(),h(I,1),I.m(E,null)):I&&(b(),v(I,1,1,()=>{I=null}),w())},i(e){t||(h(I),t=!0)},o(e){v(I),t=!1},d(e){e&&n(s),g[21](null),H&&H.d(),I&&I.d(),e&&n(T),j=!1,x(z)}}}const J=e=>e.stopPropagation();function K(e,l,t){let s,{$$slots:a={},$$scope:n}=l;const o=T();let c,r,i,u=l["options"],h=l["value"],{search:p=""}=l,{placeholder:f=""}=l,{get_results:d=l=>u.filter(e=>l.test(e)).map(e=>({label:e,value:e}))}=l,g=!1,m=!1,v=null,$=[];const b=(e,l)=>{l.preventDefault(),e&&(t(0,p=e.label),o("change",t(15,h=e))),t(5,g=!1),c.blur()},w=e=>{var l=r.querySelectorAll("li")[e],e=l.offsetTop,l=e+l.offsetHeight;e<r.scrollTop?t(8,r.scrollTop=e,r):l>r.scrollTop+r.clientHeight&&t(8,r.scrollTop=l-r.clientHeight,r)};return e.$$set=e=>{"options"in e&&t(16,u=e.options),"value"in e&&t(15,h=e.value),"search"in e&&t(0,p=e.search),"placeholder"in e&&t(1,f=e.placeholder),"get_results"in e&&t(17,d=e.get_results),"$$scope"in e&&t(18,n=e.$$scope)},e.$$.update=()=>{1&e.$$.dirty&&t(4,s=new RegExp(p.replace(/ae/gi,"(?:ae|Ã¦)").replace(/oe/gi,"(?:oe|Å“)").replace(/a/gi,"[aÃ Ã¡Ã¢Ã¤Ã£Ã¥Ä]").replace(/c/gi,"[cÃ§Ä‡Ä]").replace(/e/gi,"[eÃ¨Ã©ÃªÃ«Ä“Ä—Ä™]").replace(/i/gi,"[iÃ®Ã¯Ã­Ä«Ä¯Ã¬]").replace(/n/gi,"[nÃ±Å„]").replace(/o/gi,"[oÃ´Ã¶Ã²Ã³Ã¸ÅÃµ]").replace(/u/gi,"[uÃ»Ã¼Ã¹ÃºÅ«]"),"i")),131088&e.$$.dirty&&Promise.resolve(d(s)).then(e=>{t(3,$=e)}),12&e.$$.dirty&&($.includes(v)||t(2,v=$[0]))},[p,f,v,$,s,g,m,c,r,(e,l)=>e.replace(l,e=>`<mark>${e}</mark>`),()=>{t(5,g=!0),t(6,m=!1),t(2,v=$[0]),setTimeout(()=>c.select()),o("focus")},()=>{i=window.setTimeout(()=>{t(5,g=!1),t(6,m=!1),t(2,v=$[0])},500)},e=>{if(t(6,m=!0),"Escape"===e.key)t(5,g=!1),c.blur();else if("ArrowUp"===e.key){const e=$.indexOf(v);t(2,v=0===e?$[$.length-1]:$[e-1]),w($.indexOf(v))}else if("ArrowDown"===e.key){const e=$.indexOf(v);t(2,v=e===$.length-1?$[0]:$[e+1]),w($.indexOf(v))}else"Enter"===e.key&&b(v,e)},b,()=>{c&&(i&&clearTimeout(i),t(7,c.value="",c),c.focus())},h,u,d,n,a,()=>t(5,g=!1),function(e){j[e?"unshift":"push"](()=>{c=e,t(7,c)})},function(){p=this.value,t(0,p)},(e,l)=>b(e,l),function(e){j[e?"unshift":"push"](()=>{r=e,t(8,r)})}]}class Q extends l{constructor(e){super(),s(this,e,K,F,t,{options:16,value:15,search:0,placeholder:1,get_results:17})}}function X(e){let s,t;return s=new Q({props:{search:e[0],get_results:e[2],placeholder:e[1]}}),s.$on("select",e[3]),s.$on("change",e[4]),{c(){S(s.$$.fragment)},l(e){A(s.$$.fragment,e)},m(e,l){P(s,e,l),t=!0},p(e,[l]){const t={};1&l&&(t.search=e[0]),2&l&&(t.placeholder=e[1]),s.$set(t)},i(e){t||(h(s.$$.fragment,e),t=!0)},o(e){v(s.$$.fragment,e),t=!1},d(e){U(s,e)}}}function Y(l,e,t){let s,{search:a=""}=e,{placeholder:n="Search to find your county"}=e;return _(async()=>{}),l.$$set=e=>{"search"in e&&t(0,a=e.search),"placeholder"in e&&t(1,n=e.placeholder)},[a,n,async function(t){return s=s||await async function(){const e=await fetch(`${H}/data/counties.json`);return(await e.json()).map(e=>{var l="USA-11001"===e.geoid?"Washington":e.name;return{label:e.state?`${l}, ${e.state}`:`${l}`,value:{slug:e.slug,geoid:e.geoid,population:e.population,url:e.url}}}).sort((e,l)=>e.value.population>l.value.population?-1:1)}(),s.filter(({label:e})=>t.test(e)).sort((e,l)=>e.label.search(t)-l.label.search(t)||l.value.population-e.value.population).slice(0,32)},function(e){D(l,e)},function(e){D(l,e)}]}class Z extends l{constructor(e){super(),s(this,e,Y,X,t,{search:0,placeholder:1})}}export{Z as C,O as g};
