YUI.add("flickr-photos-getHtmlMeta-fetcher",function(n,i){"use strict";n.namespace("ModelFetchers")["flickr-photos-getHtmlMeta"]={run:function(t,e){var o={photo_id:t.id},r=this;return n.Promise.all([e.callAPI("flickr.photos.getHtmlMeta",o),e.getModelRegistry("photo-head-meta-models")]).then(function(e){return r._processResponse(e,t)},n.FetcherErrorLogger(i))},_processResponse:function(e,t){var o=e[0],e=e[1];o&&o.HTMLMETA&&(o=n.APIHelper.response.parsePhotoMeta(o),e.addOrUpdate(o))}}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["photo-head-meta-models"]}),YUI.add("photo-head-meta-models",function(t){function o(e){o.superclass.constructor.call(this,e)}t.Models[this.name]=o,t.extend(o,t.FlickrModelRegistry,{name:this.name,remote:{read:function(e){return t.ModelFetchers["flickr-photos-getHtmlMeta"].run(e,this.appContext)}},getFieldsForDisplay:function(o){var r={},n=this;return["title","noindexfollow","keywords","og:title","og:description","og:type","og:url","og:image","og:image:width","og:image:height","flickr_photos:by","flickr_photos:camera","flickr_photos:sets","flickr_photos:groups","flickr_photos:galleries","twitter:card","twitter:player","twitter:player:width","twitter:player:height","twitter:image","twitter:description","twitter:app:url:iphone","twitter:app:url:ipad","twitter:app:url:googleplay","twitter:creator","pinterest"].forEach(function(e){var t=n.getValue(o,e);void 0!==t&&(r[e]=t)}),r},attributes:{"og:title":{setter:function(e){return e&&e.replace?e.replace(/"/g,"&quot;"):e}},noindexfollow:{setter:function(e){return e&&e.replace?e.replace(/"/g,"&quot;"):e}},keywords:{setter:function(e){return e&&e.replace?e.replace(/"/g,"&quot;"):e}},title:{setter:function(e){return e&&e.replace?e.replace(/"/g,"&quot;"):e}},"og:description":{setter:function(e){return e&&e.replace?e.replace(/"/g,"&quot;"):e}},"og:type":{},"og:url":{},"og:image":{},"og:image:width":{},"og:image:height":{},"flickr_photos:by":{},"flickr_photos:camera":{},"flickr_photos:sets":{},"flickr_photos:groups":{},"flickr_photos:galleries":{},"twitter:card":{},"twitter:player":{},"twitter:player:width":{},"twitter:player:height":{},"twitter:image":{},"twitter:description":{setter:function(e){return e&&e.replace?e.replace(/"/g,"&quot;"):e}},"twitter:app:url:iphone":{},"twitter:app:url:ipad":{},"twitter:app:url:googleplay":{},"twitter:creator":{},pinterest:{setter:function(e){return e}}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-promise","flickr-photos-getHtmlMeta-fetcher","flickr-photos-getInfo-fetcher","attribute-helpers"]}),YUI.add("photo-notes-models",function(t){function o(e){o.superclass.constructor.call(this,e)}t.Models[this.name]=o,t.extend(o,t.FlickrModelRegistry,{name:this.name,remote:{read:function(e){return t.ModelFetchers["flickr-photos-getInfo"].run(e,this.appContext)}},attributes:{notes:{isCollection:!0}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-photos-getInfo-fetcher"]}),YUI.add("flickr-photos-addNotes-creator",function(r,n){"use strict";r.namespace("ModelCreators")["flickr-photos-addNotes"]={run:function(t,e){var o=this;return r.Promise.all([e.callAPI("flickr.photos.notes.add",this._processParams(t)),e.getModelRegistry("photo-notes-models"),e.getModelRegistry("note-models")]).then(function(e){return o._processResponse(e,t)},r.FetcherErrorLogger(n))},_processParams:function(e){return{photo_id:e.photoId,note_x:e.left,note_y:e.top,note_w:e.width,note_h:e.height,note_text:e.text}},_processResponse:function(e,t){var o=e[0],r=e[1],e=e[2];return e.addOrUpdate({id:o.note.id,left:o.note.x,top:o.note.y,width:o.note.w,height:o.note.h,text:o.note.content,author:o.note.author,authorName:o.note.authorname,authorRealName:o.note.authorrealname,authorIsPro:o.note.authorispro,authorProBadge:o.note.authorProBadge,authorIsDeleted:o.note.authorisdeleted}),o=e.proxy(o.note.id),r.exists(t.photoId)?r.getValue(t.photoId,"notes").appendToList(o):r.add({id:t.photoId,notes:[o]}),o}}},"@VERSION@",{requires:["flickr-promise"],optional:["photo-notes-models","note-models"]}),YUI.add("flickr-photos-editNote-updater",function(r,n){"use strict";r.namespace("ModelUpdaters")["flickr-photos-editNote"]={run:function(t,e){var o=this;return r.Promise.all([e.callAPI("flickr.photos.notes.edit",this._processParams(t)),e.getModelRegistry("photo-notes-models"),e.getModelRegistry("note-models")]).then(function(e){return o._processResponse(e,t)},r.FetcherErrorLogger(n))},_processParams:function(e){return{note_id:e.noteId,note_x:e.noteX,note_y:e.noteY,note_w:e.noteW,note_h:e.noteH,note_text:e.noteText}},_processResponse:function(e,t){var o=e[0],r=e[1];return(e=e[2].proxy(o.note.id)).setValues({left:o.note.x,top:o.note.y,width:o.note.w,height:o.note.h,text:o.note.content}),r.getValue(o.note.photoId,"notes").getFromListByID(o.note.id).setValues({left:o.note.x,top:o.note.y,width:o.note.w,height:o.note.h,text:o.note.content}),e}}},"@VERSION@",{requires:["flickr-promise"],optional:["photo-notes-models","note-models"]}),YUI.add("flickr-photos-deleteNote-deletor",function(o,r){"use strict";o.namespace("ModelDeletors")["flickr-photos-deleteNote"]={run:function(e,t){return t.callAPI("flickr.photos.notes.delete",{note_id:e}).then(null,o.FetcherErrorLogger(r))}}},"@VERSION@",{requires:["flickr-promise"],optional:[]}),YUI.add("note-models",function(o){function t(e){t.superclass.constructor.call(this,e)}o.Models[this.name]=t,o.extend(t,o.FlickrModelRegistry,{name:this.name,remote:{create:function(e){return o.ModelCreators["flickr-photos-addNotes"].run(e,this.appContext)},update:function(e,t){e={noteId:e,noteX:this.getValue(e,"left"),noteY:this.getValue(e,"top"),noteW:this.getValue(e,"width"),noteH:this.getValue(e,"height"),noteText:this.getValue(e,"text")};return o.ModelUpdaters["flickr-photos-editNote"].run(e,this.appContext)},delete:function(e){return o.ModelDeletors["flickr-photos-deleteNote"].run(e,this.appContext)}},attributes:{author:{setter:function(e){return e}},authorName:{setter:function(e){return e}},authorRealName:{setter:function(e){return e}},authorIsPro:{defaultValue:!1,setter:function(e){return o.AttributeHelpers.coerceBoolean(e)}},authorProBadge:{defaultValue:"standard",setter:function(e){return o.AttributeHelpers.coerceString(e)}},authorIsDeleted:{defaultValue:!1,setter:function(e){return o.AttributeHelpers.coerceBoolean(e)}},left:{validator:function(e){return o.AttributeHelpers.validateInteger(e)},setter:function(e){return o.AttributeHelpers.coerceInteger(e)}},top:{validator:function(e){return o.AttributeHelpers.validateInteger(e)},setter:function(e){return o.AttributeHelpers.coerceInteger(e)}},width:{validator:function(e){return o.AttributeHelpers.validateInteger(e)},setter:function(e){return o.AttributeHelpers.coerceInteger(e)}},height:{validator:function(e){return o.AttributeHelpers.validateInteger(e)},setter:function(e){return o.AttributeHelpers.coerceInteger(e)}},text:{setter:function(e){return e}}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-photos-addNotes-creator","flickr-photos-editNote-updater","flickr-photos-deleteNote-deletor","attribute-helpers"]}),YUI.add("flickr-photos-deleteAutotags-deletor",function(o,r){"use strict";o.namespace("ModelDeletors")["flickr-photos-deleteAutotags"]={run:function(e,t){return t.callAPI("flickr.photos.deleteAutotags",e).then(null,o.FetcherErrorLogger(r))}}},"@VERSION@",{requires:["flickr-promise"],optional:[]});
