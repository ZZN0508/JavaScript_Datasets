(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["people"],{"487a":function(e,n,t){(function(n,t){e.exports=t()})(0,(function(){"use strict";var e="@@InfiniteScroll",n=function(e,n){var t,o,i,r,a,l=function(){e.apply(r,a),o=t};return function(){if(r=this,a=arguments,t=Date.now(),i&&(clearTimeout(i),i=null),o){var e=n-(t-o);e<0?l():i=setTimeout((function(){l()}),e)}else l()}},t=function(e){return e===window?Math.max(window.pageYOffset||0,document.documentElement.scrollTop):e.scrollTop},o=document.defaultView.getComputedStyle,i=function(e){var n=e;while(n&&"HTML"!==n.tagName&&"BODY"!==n.tagName&&1===n.nodeType){var t=o(n).overflowY;if("scroll"===t||"auto"===t)return n;n=n.parentNode}return window},r=function(e){return e===window?document.documentElement.clientHeight:e.clientHeight},a=function(e){return e===window?t(window):e.getBoundingClientRect().top+t(window)},l=function(e){var n=e.parentNode;while(n){if("HTML"===n.tagName)return!0;if(11===n.nodeType)return!1;n=n.parentNode}return!1},c=function(){if(!this.binded){this.binded=!0;var e=this,t=e.el,o=t.getAttribute("infinite-scroll-throttle-delay"),r=200;o&&(r=Number(e.vm[o]||o),(isNaN(r)||r<0)&&(r=200)),e.throttleDelay=r,e.scrollEventTarget=i(t),e.scrollListener=n(s.bind(e),e.throttleDelay),e.scrollEventTarget.addEventListener("scroll",e.scrollListener),this.vm.$on("hook:beforeDestroy",(function(){e.scrollEventTarget.removeEventListener("scroll",e.scrollListener)}));var a=t.getAttribute("infinite-scroll-disabled"),l=!1;a&&(this.vm.$watch(a,(function(n){e.disabled=n,!n&&e.immediateCheck&&s.call(e)})),l=Boolean(e.vm[a])),e.disabled=l;var c=t.getAttribute("infinite-scroll-distance"),u=0;c&&(u=Number(e.vm[c]||c),isNaN(u)&&(u=0)),e.distance=u;var d=t.getAttribute("infinite-scroll-immediate-check"),f=!0;d&&(f=Boolean(e.vm[d])),e.immediateCheck=f,f&&s.call(e);var p=t.getAttribute("infinite-scroll-listen-for-event");p&&e.vm.$on(p,(function(){s.call(e)}))}},s=function(e){var n=this.scrollEventTarget,o=this.el,i=this.distance;if(!0===e||!this.disabled){var l=t(n),c=l+r(n),s=!1;if(n===o)s=n.scrollHeight-c<=i;else{var u=a(o)-a(n)+o.offsetHeight+l;s=c+i>=u}s&&this.expression&&this.expression()}},u={bind:function(n,t,o){n[e]={el:n,vm:o.context,expression:t.value};var i=arguments;n[e].vm.$on("hook:mounted",(function(){n[e].vm.$nextTick((function(){l(n)&&c.call(n[e],i),n[e].bindTryCount=0;var t=function t(){n[e].bindTryCount>10||(n[e].bindTryCount++,l(n)?c.call(n[e],i):setTimeout(t,50))};t()}))}))},unbind:function(n){n&&n[e]&&n[e].scrollEventTarget&&n[e].scrollEventTarget.removeEventListener("scroll",n[e].scrollListener)}},d=function(e){e.directive("InfiniteScroll",u)};return window.Vue&&(window.infiniteScroll=u,Vue.use(d)),u.install=d,u}))},"53c9":function(e,n,t){"use strict";var o=t("c938"),i=t.n(o);i.a},"5d14":function(e,n,t){"use strict";t.d(n,"a",(function(){return i}));var o=t("750b");function i(e){var n=Object(o["e"])(!1),t=Object(o["e"])(!0),i=Object(o["e"])(0),r=function(){return n.value=!0,i.value+=100,e(i.value).then((function(e){return n.value=!1,0===e.length?(t.value=!1,!1):e}))};return{loading:n,load:r,canLoad:t}}},bea6:function(e,n,t){"use strict";t.r(n);var o,i=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.handleLoadMorePeople,expression:"handleLoadMorePeople"}]},[e.people&&!e.isLoading?t("div",{staticClass:"People container"},e._l(e.people,(function(n,o){var i=n.id,r=n.img,a=n.code,l=n.name,c=n.videos;return t("div",{key:o,staticClass:"People__card"},[t("XxxPersonCard",{attrs:{img:1===r?e.getPersonImgUrl(i,150):e.userPlaceholderImg,code:a,name:l,videos:c,"is-followed":e.isPersonFollowed(i),"is-follow-loading":e.isPersonFollowLoading(i),to:"/people/"+(a||i)},on:{"follow-click":function(n){return e.handlePersonFollow(i)}}})],1)})),0):e._e(),e.isLoading||e.isMoreLoading?t("div",[t("div",{staticClass:"People container"},e._l(e.dummyPeople,(function(e){return t("div",{key:e,staticClass:"People__card"},[t("XxxPersonCard",{attrs:{"is-loading":""}})],1)})),0),t("XxxSpinner",{staticClass:"mx-auto"})],1):e._e()])},r=[],a=(t("99af"),t("d3b7"),t("ddb0"),t("2909")),l=t("5530"),c=t("487a"),s=t.n(c),u=(t("d81d"),t("96cf"),t("1da1")),d=t("15fd"),f=t("7085"),p=function(e){return e.map((function(e){var n=e.image,t=Object(d["a"])(e,["image"]);return Object(l["a"])({img:n},t)}))},v=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(n){var t,i,r,a,l,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=new AbortController,t=o,i=t.signal,r=n?"?offset=".concat(n):"",e.prev=3,e.next=6,fetch("".concat(f["b"],"/people").concat(r),{signal:i});case 6:return a=e.sent,e.next=9,a.json();case 9:return l=e.sent,c=l.people,e.abrupt("return",p(c));case 14:return e.prev=14,e.t0=e["catch"](3),console.log(e.t0),e.abrupt("return",null);case 18:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(n){return e.apply(this,arguments)}}(),m=function(){o&&o.abort()},g=t("c5bc"),h=t.n(g),b=t("5d14"),w=t("03c4"),L=t("694d"),P={name:"People",metaInfo:{title:"People",meta:[{name:"keywords",content:"people"},{name:"description",content:"People."}]},directives:{infiniteScroll:s.a},setup:function(e,n){var t=Object(b["a"])(v),o=t.loading,i=t.canLoad,r=t.load;return Object(l["a"])({isMoreLoading:o,canLoadMore:i,loadMorePeople:r},Object(L["a"])(n))},data:function(){return{isLoading:!0,people:[]}},computed:{userPlaceholderImg:function(){return h.a},dummyPeople:function(){return Object(a["a"])(new Array(6).keys())}},methods:{getPersonImgUrl:w["a"],handleLoadMorePeople:function(){var e=this;this.isMoreLoading||this.isLoading||!this.canLoadMore||this.loadMorePeople().then((function(n){n&&(e.people=[].concat(Object(a["a"])(e.people),Object(a["a"])(n)))}))}},mounted:function(){window.scroll(0,0)},created:function(){var e=this;this.isLoading=!0,v().then((function(n){e.people=n,e.isLoading=!1}))},beforeDestroy:function(){m()}},y=P,x=(t("53c9"),t("2877")),T=Object(x["a"])(y,i,r,!1,null,"0e2191ad",null);n["default"]=T.exports},c938:function(e,n,t){}}]);