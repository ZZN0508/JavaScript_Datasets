!function(c,e){e.register("module.Class",function(e){function t(){}function i(n){return function(e,t){if(e.length===+e.length){for(var n=0,o=e.length;n<o;n++)if(!1===t(e[n],n,e))return}else for(var i in e)if(e.hasOwnProperty(i)&&!1===t(e[i],i,e))return}(Array.prototype.slice.call(arguments,1),function(e){if(e)for(var t in e)n[t]=e[t]}),n}return t.extend=function(e,t){var n=this,o=e&&e.hasOwnProperty("constructor")?e.constructor:function(){n.apply(this,arguments)};return i(o,n,t),(t=function(){this.constructor=o}).prototype=n.prototype,o.prototype=new t,e&&i(o.prototype,e),o.__super__=n.prototype,o},t}),e.register("comp.component",function(e){function t(e,t){return function(){t.apply(e,arguments)}}var n=e.module.Class,e=e.core.func.empty,o=c.SINA_OUTLOGIN_LAYER;return o.set("sso",{entry:"homepage"}).init(),n.extend({elem:null,loginLayer:o,constructor:function(e){this.elem=e.elem,this.render(),o.register("login_success",t(this,this.login)),o.register("logout_success",t(this,this.logout))},render:e,show:function(){this.elem.style.display=""},hide:function(){this.elem.style.display="none"},login:e,logout:e,destory:function(){this.elem=null}},{bind:t})}),e.register("core.dom.contains",function(e){return function(e,t){if(!e||!t)return!1;if(e===t)return!1;if(e.compareDocumentPosition)return 16==(16&e.compareDocumentPosition(t));if(e.contains&&1===t.nodeType)return e.contains(t);for(;t=t.parentNode;)if(e===t)return!0;return!1}}),e.register("comp.dropmenu",function(n){function o(o,i){return function(e){var t=o,n=e.relatedTarget||e.fromElement;n&&(t===n||r(t,n))||i.apply(t,arguments)}}var e=n.comp.component,i=e.bind,r=n.core.dom.contains,s=e.extend({constructor:function(e){s.__super__.constructor.apply(this,arguments);var t=this;/ipad/.test(c.navigator.userAgent.toLowerCase())?n.addEvent(document.body,"touchend",i(t,t.bodyTouch)):this.hover(function(e){t.highlight(!0),t.showMenu()},function(){t.highlight(!1),t.hideMenu()})},elemTouch:function(){var e=c.user_panel_homepage_currentTab;e&&e!=this&&(e&&e.highlight(!1),e&&e.hideMenu()),this.highlight(!0),this.showMenu(),c.user_panel_homepage_currentTab=this},bodyTouch:function(e){e=e.target;r(this.elem,e)||(this.highlight(!1),this.menu&&(this.menu.style.display="none"))},render:function(){var e=this;/ipad/.test(c.navigator.userAgent.toLowerCase())&&n.removeEvent(e.elem.getElementsByTagName("a")[0],"touchend",i(e,e.elemTouch)),this._menuTpl&&(this.elem.innerHTML=this._menuTpl),/ipad/.test(c.navigator.userAgent.toLowerCase())&&n.addEvent(e.elem.getElementsByTagName("a")[0],"touchend",i(e,e.elemTouch))},highlight:function(e){var t="tn-onmouse";!0===e?n.addClassName(this.elem,t):n.removeClassName(this.elem,t)},hover:function(e,t){e&&(n.IE?n.addEvent(this.elem,"mouseenter",e):n.addEvent(this.elem,"mouseover",o(this.elem,e))),t&&(n.IE?n.addEvent(this.elem,"mouseleave",t):n.addEvent(this.elem,"mouseout",o(this.elem,t)))},showMenu:function(){this.menu&&(this.menu.style.display="block")},hideMenu:function(){this.menu&&(this.menu.style.display="none")},destory:function(){this.menu=null}});return s}),e.register("comp.loginbutton",function(e){var t=e.comp.dropmenu,i=(t.bind,e.core.dom.contains),n=t.extend({_timer:null,canCloseLoginLayer:function(){var e=this.loginLayer;if(e.isLogin())return!0;try{var t=document.activeElement,n=e.nodes.loginname.value,o=e.nodes.password.value;return!(n||o||i(e.nodes.box,t))}catch(e){return!0}},showMenu:function(){this.loginLayer.set("plugin",{parentNode:e.E("SI_Top_LoginLayer"),position:"custom"}).set("styles",{left:"-100px",top:"-1px",marginTop:"0px"}),this.loginLayer.show();try{_S_uaTrack("index_new_menu","weibo_signin")}catch(e){}},hideMenu:function(){this.canCloseLoginLayer()&&this.loginLayer.hide()},login:function(){this.hide()},logout:function(){this.show()},destory:function(){n.__super__.destory.call(this),this._timer&&(clearTimeout(this._timer),this._timer=null)}});return n}),e.register("comp.logoutmenu",function(i){function r(o,i){return function(e){var t=o,n=e.relatedTarget||e.fromElement;n&&(t===n||s(t,n))||i.apply(t,arguments)}}var e=i.comp.dropmenu,t=e.bind,s=i.core.dom.contains,n=e.extend({_menuTpl:'<span class="tn-greeting">鎮ㄥソ锛�</span>            <div id = "SI_Top_Box_div">                <a  class="tn-tab tn-tab-user" href="" target="_blank" id = "SI_Top_Nick">                <i><span class="tn-arrow"></span><em id = "SI_Top_Nick_Name"></em></i></a>                <div style="display:none;" class="tn-topmenulist tn-topmenulist-a tn-topmenulist-a-user">                    <ul class="tn-text-list">                        <li suda-uatrack="key=content_collect&value=www_fav_click"><a target="_blank" title="鎴戠殑鏀惰棌" href="http://my.sina.com.cn/#location=fav">鎴戠殑鏀惰棌</a></li>                        <li><a target="_blank" title="閫€鍑�" href="javascript:;" id = "SI_Top_Logout_a">閫€鍑�</a></li>                    </ul>                </div>            </div>',_timer:null,constructor:function(){n.__super__.constructor.apply(this,arguments),this.menu=document.getElementById("SI_Top_Box_div").getElementsByTagName("div")[0],i.addEvent(document.getElementById("SI_Top_Logout_a"),"click",t(this,function(){this.loginLayer.logout()})),this.hide()},login:function(){this.getNickName()},logout:function(){this.hideMenu(),this.hide()},getNickName:function(){var e,t,n=this.loginLayer;n&&(e=n.getSinaCookie(),t=this,e&&e.uid&&n.getWeiboInfo({timeout:3e4,onSuccess:function(e){document.getElementById("SI_Top_Nick").href="http://weibo.com/",t.setNickName(e.data.name),t.show()},onFailure:function(){document.getElementById("SI_Top_Nick").href="http://login.sina.com.cn/",t.setNickName(e.nick),t.show()}}))},setNickName:function(e){for(var t=document.getElementById("SI_Top_Nick_Name"),n="",o=0,i=0,r=(e=(t.title=e).split("")).length;i<r;i++)if(/[\u4e00-\u9fa5]/.test(e[i]))if(o<5)o+=1,n+=e[i];else{if(5!==o)break;o+=1,n+="..."}else{if(!(o<5))break;n+=e[i],o+=.5}t.innerHTML=n},hover:function(e,t){var n=document.getElementById("SI_Top_Nick"),o=document.getElementById("SI_Top_Box_div");e&&(i.IE?i.addEvent(n,"mouseenter",e):i.addEvent(n,"mouseover",r(n,e))),t&&(i.IE?i.addEvent(o,"mouseleave",t):i.addEvent(o,"mouseout",r(o,t)))},showMenu:function(){n.__super__.showMenu.apply(this,arguments);try{SUDA.uaTrack("content_collect","www_fav_show")}catch(e){}}});return n}),e.register("kit.extra.merge",function(e){return function(e,t){var n,o={};for(n in e)o[n]=e[n];for(n in t)o[n]=t[n];return o}}),e.register("kit.io.ajax",function(u){return function(t){var e=function(e){r=!1,t.onComplete(e,s.args),setTimeout(l,0)},n=function(e){r=!1,t.onFail(e,s.args),setTimeout(l,0)},o=[],i=null,r=!1,s=u.parseParam({url:"",method:"get",responseType:"json",timeout:3e4,onTraning:u.funcEmpty,isEncode:!0},t);s.onComplete=e,s.onFail=n;function a(e){for(;o.length;)o.shift();if(r=!1,i)try{i.abort()}catch(e){}i=null}var l=function(){o.length&&!0!==r&&(r=!0,s.args=o.shift(),i=u.ajax(s))};return(n={request:function(e){(e=e||{})&&!e.setting_rid&&c.$CONFIG&&$CONFIG.setting_rid&&(e.setting_rid=$CONFIG.setting_rid),t.noQueue&&a(),t.uniqueRequest&&i||(o.push(e),e._t=0,l())}}).abort=a,n}}),e.register("kit.io.jsonp",function(s){return function(e){function t(){o.length&&!0!==r&&(r=!0,i.args=o.shift(),i.onComplete=function(e){r=!1,n.onComplete(e,i.args),setTimeout(t,0)},i.onFail=function(e){r=!1,n.onFail(e),setTimeout(t,0)},s.jsonp(s.kit.extra.merge(n,{args:i.args,onComplete:function(e){i.onComplete(e)},onFail:function(e){try{i.onFail(e)}catch(e){}}})))}var n=s.parseParam({url:"",method:"get",responseType:"json",varkey:"_v",timeout:3e4,onComplete:s.funcEmpty,onTraning:s.funcEmpty,onFail:s.funcEmpty,isEncode:!0},e),o=[],i={},r=!1,e={request:function(e){(e=e||{})&&!e.setting_rid&&c.$CONFIG&&$CONFIG.setting_rid&&(e.setting_rid=$CONFIG.setting_rid),o.push(e),e._t=1,t()},abort:function(e){for(;o.length;)o.shift();r=!1,i=null}};return e}}),e.register("core.obj.parseParam",function(e){return function(e,t,n){var o,i={};for(o in t=t||{},e)i[o]=e[o],null==t[o]||n&&!e.hasOwnProperty(o)||(i[o]=t[o]);return i}}),e.register("core.dom.removeNode",function(t){return function(e){e=t.E(e)||e;try{e.parentNode.removeChild(e)}catch(e){}}}),e.register("core.util.getUniqueKey",function(e){var t=(new Date).getTime().toString(),n=1;return function(){return t+n++}}),e.register("core.func.empty",function(){return function(){}}),e.register("core.str.parseURL",function(e){return function(e){for(var t=["url","scheme","slash","host","port","path","query","hash"],n=/^(?:([A-Za-z]+):(\/{0,3}))?([0-9.\-A-Za-z]+\.[0-9A-Za-z]+)?(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/.exec(e),o={},i=0,r=t.length;i<r;i+=1)o[t[i]]=n[i]||"";return o}}),e.register("core.arr.isArray",function(e){return function(e){return"[object Array]"===Object.prototype.toString.call(e)}}),e.register("core.str.trim",function(e){return function(e){if("string"!=typeof e)throw"trim need a string as parameter";for(var t=e.length,n=0,o=/(\u3000|\s|\t|\u00A0)/;n<t&&o.test(e.charAt(n));)n+=1;for(;n<t&&o.test(e.charAt(t-1));)--t;return e.slice(n,t)}}),e.register("core.json.queryToJson",function(c){return function(e,t){function n(e){return t?decodeURIComponent(e):e}for(var o,i,r,s=c.core.str.trim(e).split("&"),a={},l=0,u=s.length;l<u;l++)s[l]&&(i=(o=s[l].split("="))[0],r=o[1],o.length<2&&(r=i,i="$nullName"),a[i]?(1!=c.core.arr.isArray(a[i])&&(a[i]=[a[i]]),a[i].push(n(r))):a[i]=n(r));return a}}),e.register("core.json.jsonToQuery",function(n){function s(e,t){return e=n.core.str.trim((e=null==e?"":e).toString()),t?encodeURIComponent(e):e}return function(e,t){var n=[];if("object"==typeof e)for(var o in e)if("$nullName"!==o)if(e[o]instanceof Array)for(var i=0,r=e[o].length;i<r;i++)n.push(o+"="+s(e[o][i],t));else"function"!=typeof e[o]&&n.push(o+"="+s(e[o],t));else n=n.concat(e[o]);return n.length?n.join("&"):""}}),e.register("core.util.URL",function(a){return function(e,t){var o=a.core.obj.parseParam({isEncodeQuery:!1,isEncodeHash:!1},t||{}),n={},i=a.core.str.parseURL(e),r=a.core.json.queryToJson(i.query),s=a.core.json.queryToJson(i.hash);return n.setParam=function(e,t){return r[e]=t,this},n.getParam=function(e){return r[e]},n.setParams=function(e){for(var t in e)n.setParam(t,e[t]);return this},n.setHash=function(e,t){return s[e]=t,this},n.getHash=function(e){return s[e]},n.valueOf=n.toString=function(){var e=[],t=a.core.json.jsonToQuery(r,o.isEncodeQuery),n=a.core.json.jsonToQuery(s,o.isEncodeQuery);return""!=i.scheme&&(e.push(i.scheme+":"),e.push(i.slash)),""!=i.host&&(e.push(i.host),""!=i.port&&(e.push(":"),e.push(i.port))),e.push("/"),e.push(i.path),""!=t&&e.push("?"+t),""!=n&&e.push("#"+n),e.join("")},n}}),e.register("core.io.scriptLoader",function(i){var r={},s={url:"",charset:"UTF-8",timeout:3e4,args:{},onComplete:i.core.func.empty,onTimeout:i.core.func.empty,isEncode:!1,uniqueID:null};return function(e){var t,n=i.core.obj.parseParam(s,e);if(""==n.url)throw"scriptLoader: url is null";var o,e=n.uniqueID||i.core.util.getUniqueKey();return null!=(o=r[e])&&1!=i.IE&&(i.core.dom.removeNode(o),o=null),(o=null==o?r[e]=i.C("script"):o).charset=n.charset,o.id="scriptRequest_script_"+e,o.type="text/javascript",null!=n.onComplete&&(i.IE?o.onreadystatechange=function(){if("loaded"==o.readyState.toLowerCase()||"complete"==o.readyState.toLowerCase()){try{clearTimeout(t),document.getElementsByTagName("head")[0].removeChild(o),o.onreadystatechange=null}catch(e){}n.onComplete()}}:o.onload=function(){try{clearTimeout(t),i.core.dom.removeNode(o)}catch(e){}n.onComplete()}),o.src=i.core.util.URL(n.url,{isEncodeQuery:n.isEncode}).setParams(n.args).toString(),document.getElementsByTagName("head")[0].appendChild(o),0<n.timeout&&(t=setTimeout(function(){try{document.getElementsByTagName("head")[0].removeChild(o)}catch(e){}n.onTimeout()},n.timeout)),o}}),e.register("kit.io.jsonp2",function(r){return function(e){var e=r.core.obj.parseParam({url:"",charset:"UTF-8",timeout:3e4,args:{},onComplete:null,onTimeout:null,responseName:null,isEncode:!1,varkey:"varname"},e),t=-1,n=e.responseName||"STK_"+r.core.util.getUniqueKey();e.args[e.varkey]=n;var o=e.onComplete,i=e.onTimeout;return e.onTimeout=function(){1!=t&&null!=i&&(t=2,i())},e.onComplete=function(){2!=t&&null!=o&&(t=1,o(c[n]),c[n]=void 0)},r.core.io.scriptLoader(e)}}),e.register("kit.io.inter",function(s){return function(){var e={},n={},r={};return e.register=function(e,t){if(void 0!==n[e])throw e+" interface has been registered";n[e]=t,r[e]={}},e.hookComplete=function(e,t){var n=s.core.util.getUniqueKey();return r[e][n]=t,n},e.removeHook=function(e,t){r[e]&&r[e][t]&&delete r[e][t]},e.getTrans=function(o,i){var e=s.kit.extra.merge(n[o],i);return e.onComplete=function(e,t){try{i.onComplete(e,t)}catch(e){}if(e&&e.code&&"100000"===e.code)try{i.onSuccess(e,t)}catch(e){}else try{i.onError(e,t)}catch(e){}for(var n in r[o])try{r[o][n](e,t)}catch(e){}},"jsonp"===n[o].requestMode?s.kit.io.jsonp(e):"ijax"===n[o].requestMode?s.kit.io.ijax(e):s.kit.io.ajax(e)},e.request=function(o,i,e){var t=s.core.json.merge(n[o],i);return e&&!e.setting_rid&&c.$CONFIG&&$CONFIG.setting_rid&&(e.setting_rid=$CONFIG.setting_rid),t.onComplete=function(e,t){try{i.onComplete(e,t)}catch(e){}if(e&&e.code&&"100000"===e.code)try{i.onSuccess(e,t)}catch(e){}else try{i.onError(e,t)}catch(e){}for(var n in r[o])try{r[o][n](e,t)}catch(e){}},(t=s.core.obj.cut(t,["noqueue"])).args=e,"jsonp"===n[o].requestMode?s.jsonp(t):"jsonp2"===n[o].requestMode?s.kit.io.jsonp2(t):"ijax"===n[o].requestMode?s.ijax(t):s.ajax(t)},e}}),e.register("core.arr.indexOf",function(e){return function(e,t){if(t.indexOf)return t.indexOf(e);for(var n=0,o=t.length;n<o;n++)if(t[n]===e)return n;return-1}}),e.register("core.arr.inArray",function(n){return function(e,t){return-1<n.core.arr.indexOf(e,t)}}),e.register("core.obj.cut",function(i){return function(e,t){var n,o={};if(!i.core.arr.isArray(t))throw"core.obj.cut need array as second parameter";for(n in e)i.core.arr.inArray(n,t)||(o[n]=e[n]);return o}}),e.register("common.trans.top",function(e){var t=e.kit.io.inter(),e=t.register;return e("blogInfo",{url:"//comets.blog.sina.com.cn/notice",requestMode:"jsonp2"}),e("emailInfo",{url:"//service.mail.sina.com.cn/mailproxy/mailnotice.php",requestMode:"jsonp"}),e("weiboInfo",{url:"https://rm.api.weibo.com/2/remind/unread_count.json",requestMode:"jsonp"}),t}),e.register("comp.weibomenu",function(e){var t=e.comp.dropmenu,n=e.common.trans.top,s=t.extend({_menuTpl:'<a target="_blank" href="http://weibo.com/" class="tn-tab" suda-uatrack="key=index_new_menu&value=weibo_click">        <i>寰崥<em class="tn-new" style="display:none;"></em>        <span class="tn-arrow"> </span></i> </a>    <div style="display:none;" class="tn-topmenulist tn-topmenulist-a tn-topmenulist-a-weibo">        <ul class="tn-text-list">            <li suda-uatrack="key=index_new_menu&value=weibo_list_click"><a href="http://weibo.com/messages?topnav=1&amp;wvr=4" title="绉佷俊" target="_blank" data-role="dm">绉佷俊</a></li>            <li suda-uatrack="key=index_new_menu&value=weibo_list_click"><a href="http://weibo.com/comment/inbox?topnav=1&amp;wvr=4&amp;f=1" title="璇勮" target="_blank" data-role="cmt">璇勮</a></li>            <li suda-uatrack="key=index_new_menu&value=weibo_list_click"><a href="http://weibo.com/at/weibo?topnav=1&amp;wvr=4" title="@鎴�" target="_blank" data-role="mention_status">@鎴�</a></li>        </ul>    </div>',_timer:null,constructor:function(){this.resetWeiboInfo(),s.__super__.constructor.apply(this,arguments)},render:function(){s.__super__.render.apply(this,arguments),this.menu=this.elem.getElementsByTagName("div")[0];var e=this.elem.getElementsByTagName("em")[0];this.weiboInfo._hasNewInfo?e.style.display="inline-block":e.style.display="none";for(var t=this.elem.getElementsByTagName("li"),n=0,o=t.length;n<o;n++){for(var i=t[n].childNodes[0];1!==i.nodeType;)i=i.nextSibling;var r=this.weiboInfo[i.getAttribute("data-role")];0<r&&(i.innerHTML="<em>"+r+"</em>"+i.title)}},login:function(){var e=this;e.getWeiboInfo(),this._timer=setInterval(function(){e.getWeiboInfo()},6e4)},getWeiboInfo:function(){var t=this,e=this.loginLayer.getSinaCookie()&&this.loginLayer.getSinaCookie().uid;e&&n.request("weiboInfo",{onComplete:function(e){1==e.code&&(t.setWeiboInfo(e.data),t.render())}},{source:"2751753920",uid:e})},setWeiboInfo:function(e){for(var t in 0<e.cmt||0<e.dm||0<e.mention_status?this.weiboInfo._hasNewInfo=!0:this.weiboInfo._hasNewInfo=!1,this.weiboInfo)t in e&&e[t]!=this.weiboInfo[t]&&(99<e[t]?this.weiboInfo[t]="99+":this.weiboInfo[t]=e[t])},resetWeiboInfo:function(){this.weiboInfo||(this.weiboInfo={}),this.weiboInfo.cmt=0,this.weiboInfo.dm=0,this.weiboInfo.mention_status=0,this.weiboInfo._changed=!1,this.weiboInfo._hasNewInfo=!1},logout:function(){clearInterval(this._timer),this.resetWeiboInfo(),this.render()},showMenu:function(){s.__super__.showMenu.apply(this,arguments);try{_S_uaTrack("index_new_menu","weibo_show")}catch(e){}},destory:function(){s.__super__.destory.call(this),this.weiboInfo=null}});return s}),e.register("comp.emailmenu",function(e){var t=e.comp.dropmenu,n=e.common.trans.top,s=t.extend({_menuTpl:'<a target="_blank" href="http://mail.sina.com.cn" class="tn-tab" suda-uatrack="key=index_new_menu&value=mail_click"> <i>閭            <em class="tn-new" style="display:none;"></em>            <span class="tn-arrow"> </span></i> </a>    <div style="display:none;" class="tn-topmenulist tn-topmenulist-a tn-topmenulist-a-mail">        <ul class="tn-text-list">            <li suda-uatrack="key=index_new_menu&value=mail_list_click"><a href="http://mail.sina.com.cn/" title="鍏嶈垂閭" target="_blank" data-role="unread">鍏嶈垂閭</a></li>            <li suda-uatrack="key=index_new_menu&value=mail_list_click"><a href="http://vip.sina.com.cn/" title="VIP閭" target="_blank">VIP閭</a></li>            <li suda-uatrack="key=index_new_menu&value=mail_list_click"><a href="http://mail.sina.net/" title="浼佷笟閭" target="_blank">浼佷笟閭</a></li> <li suda-uatrack="key=index_new_menu&value=mail_list_click"><a href="http://mail.sina.com.cn/client/mobile/index.php?suda-key=mail_app&suda-value=login" title="鏂版氮閭瀹㈡埛绔�" target="_blank">鏂版氮閭瀹㈡埛绔�</a></li></ul>    </div>',_timer:null,constructor:function(){this.resetMailInfo(),s.__super__.constructor.apply(this,arguments)},render:function(){s.__super__.render.apply(this,arguments),this.menu=this.elem.getElementsByTagName("div")[0];var e=this.elem.getElementsByTagName("em")[0];this.mailInfo._hasNewInfo?e.style.display="inline-block":e.style.display="none";for(var t=this.elem.getElementsByTagName("li"),n=0,o=t.length;n<o;n++){for(var i=t[n].childNodes[0];1!==i.nodeType;)i=i.nextSibling;var r=this.mailInfo[i.getAttribute("data-role")];0<r&&(i.innerHTML="<em>"+r+"</em>"+i.title)}},login:function(){var e=this;e.getMailInfo(),this._timer=setInterval(function(){e.getMailInfo()},12e4)},logout:function(){clearInterval(this._timer),this.resetMailInfo(),this.render()},getMailInfo:function(){var t=this,e=this.loginLayer.getSinaCookie()&&this.loginLayer.getSinaCookie().uid;e&&n.request("emailInfo",{onComplete:function(e){1==e.result&&(t.setMailInfo(e.data),t.render())}},{uid:e})},setMailInfo:function(e){(e=parseInt(e,10))!==this.mailInfo.unread&&(this.mailInfo.unread=999<e?"999+":e),this.mailInfo._hasNewInfo=0<e},resetMailInfo:function(){this.mailInfo||(this.mailInfo={}),this.mailInfo.unread=0,this.mailInfo._changed=!1,this.mailInfo._hasNewInfo=!1},showMenu:function(){s.__super__.showMenu.apply(this,arguments);try{_S_uaTrack("index_new_menu","mail_show")}catch(e){}},destory:function(){s.__super__.destory.call(this),this.mailInfo=null}});return s}),e.register("comp.blogmenu",function(e){var t=e.comp.dropmenu,o=e.common.trans.top,s=t.extend({_menuTpl:'<a target="_blank" href="http://i.blog.sina.com.cn/" class="tn-tab" suda-uatrack="key=index_new_menu&value=blog_click">        <i>鍗氬            <em class="tn-new" style="display: none;"></em>            <span class="tn-arrow"> </span></i> </a>    <div style="display:none;" class="tn-topmenulist tn-topmenulist-a tn-topmenulist-a-blog">        <ul class="tn-text-list">            <li suda-uatrack="key=index_new_menu&value=blog_list_click">                <a href="http://i.blog.sina.com.cn/blogprofile/profilecommlist.php?type=1" title="鍗氬璇勮" target="_blank" data-role="blogcomment">鍗氬璇勮</a></li>            <li suda-uatrack="key=index_new_menu&value=blog_list_click">                <a href="http://i.blog.sina.com.cn/blog_rebuild/profile/controllers/notelist.php?action=profilenotice" title="鏈鎻愰啋" target="_blank" data-role="unreadnotices">鏈鎻愰啋</a></li>        </ul>    </div>',_timer:null,constructor:function(){this.resetBlogInfo(),s.__super__.constructor.apply(this,arguments)},render:function(){s.__super__.render.apply(this,arguments),this.menu=this.elem.getElementsByTagName("div")[0];var e=this.elem.getElementsByTagName("em")[0];this.blogInfo._hasNewInfo?e.style.display="inline-block":e.style.display="none";for(var t=this.elem.getElementsByTagName("li"),n=0,o=t.length;n<o;n++){for(var i=t[n].childNodes[0];1!==i.nodeType;)i=i.nextSibling;var r=this.blogInfo[i.getAttribute("data-role")];0<r&&(i.innerHTML="<em>"+r+"</em>"+i.title)}},login:function(){var e=this;e.getBlogInfo(),this._timer=setInterval(function(){e.getBlogInfo()},3e5)},getBlogInfo:function(){var t=this.loginLayer.getSinaCookie()&&this.loginLayer.getSinaCookie().uid,n=this;t&&o.request("blogInfo",{onComplete:function(e){"A00006"==e.code&&(n.setBlogInfo(e.data[t]),n.render())}},{uid:t})},resetBlogInfo:function(){this.blogInfo||(this.blogInfo={}),this.blogInfo.unreadnotices=0,this.blogInfo.blogcomment=0,this.blogInfo._changed=!1,this.blogInfo._hasNewInfo=!1},setBlogInfo:function(e){for(var t in 0<e.unreadnotices||0<e.blogcomment?this.blogInfo._hasNewInfo=!0:this.blogInfo._hasNewInfo=!1,this.blogInfo)t in e&&e[t]!=this.blogInfo[t]&&(999<e[t]?this.blogInfo[t]="999+":this.blogInfo[t]=e[t])},logout:function(){clearInterval(this._timer),this.resetBlogInfo(),this.render()},showMenu:function(){s.__super__.showMenu.apply(this,arguments);try{_S_uaTrack("index_new_menu","blog_show")}catch(e){}},destory:function(){s.__super__.destory.call(this),this.blogInfo=null}});return s}),e.register("comp.topstyle",function(e){return[".tn-person-r{float:right;}",".tn-person-r .tn-title{float:left;font-size:12px;position:relative;}",".tn-person-r .tn-title .tn-tab{border: 1px solid #FCFCFC; border-width: 0 1px; color:#4C4C4C; display: inline-block; line-height: 16px; cursor: pointer; position: relative; z-index:9999; padding:0 2px 0 0; text-decoration:none;}",".tn-person-r .tn-title .tn-tab i,",".tn-person-r .tn-user i{display: inline-block; height:17px;  padding:12px 15px 12px 18px; vertical-align:bottom; _overflow: hidden; font-style:normal;}","/*.tn-person-r .tn-user{display: inline-block; line-height: 16px; position: relative; z-index:9999; padding:0 2px 0 0;}*/",".tn-person-r .tn-user i{padding-left: 0;padding-right:0;}",".tn-person-r .tn-user a:link,.top-nav .tn-user a:visited{text-decoration:none;}",".tn-person-r .tn-user a:hover,.top-nav .tn-user a:active{text-decoration:underline;}",".tn-person-r .tn-title .tn-tab-user i{position:relative;max-width:79px;_width:79px;height:23px;padding:6px 31px 12px 18px;line-height:28px;overflow:hidden;color:#FF8400; overflow:hidden;}",".tn-person-r .tn-title .tn-tab-user .tn-arrow{position:absolute;right:15px;top:17px;}",".tn-person-r .tn-title .tn-tab:hover,",".tn-person-r .tn-setting .tn-name:hover,",".tn-person-r .tn-setting .tn-tab:hover,",".tn-person-r .tn-onmouse .tn-tab,",".tn-person-r .tn-onmouse .tn-tab{ border-color:#EDEEF0; background-color: #EDEEF0; text-decoration:none; color:#ff8400; }",".tn-person-r .tn-onmouse .tn-tab i,",".tn-person-r .tn-onmouse .tn-tab i{ color: #4C4C4C; }",".tn-person-r .tn-onmouse .tn-tab:hover i,",".tn-person-r .tn-onmouse .tn-tab:hover i{color:#ff8400;}",".tn-person-r .tn-title .tn-greeting{position:absolute;left:-36px;top:10px;height:20px; overflow:hidden;line-height:20px;}",".tn-person-r .tn-title-login .tn-tab a,",".tn-person-r .tn-title-login .tn-tab a:hover{ color:#000; }",".tn-person-r .tn-topmenulist{ position:absolute; border:1px solid #333; background:#fff; z-index:9998; font-size:12px; }",".tn-person-r .tn-topmenulist { color:#333; }",".tn-person-r .tn-topmenulist a{ color:#0a8cd2; }",".tn-person-r .tn-topmenulist .tn-text-list { border-bottom:1px solid #FECC5B;margin:0 0 -2px;padding:0;white-space: nowrap;}",".tn-person-r .tn-topmenulist .tn-text-list li{ /*height:31px; 锟斤拷锟斤拷锟斤拷3锟斤拷锟斤拷bug*/line-height:31px; border-bottom: 1px solid #FECC5B; }",".tn-person-r .tn-topmenulist .tn-text-list li a{ _zoom:1; display: block; color:#333; padding:0 15px; }",".tn-person-r .tn-topmenulist .tn-text-list li a:hover{ color: #E67902; background:#FFF5DA; text-decoration:none; }",".tn-person-r .tn-topmenulist .tn-text-list li em{ color:#DE1F26; float: right; }",".tn-person-r .tn-topmenulist-a{ border: 1px solid #EBBE7A; border-top:0; overflow: hidden; -moz-box-shadow: 3px 3px 3px rgba(0, 0, 0, .1); -webkit-box-shadow: 3px 3px 3px rgba(0, 0, 0, .1); box-shadow: 3px 3px 3px rgba(0, 0, 0, .1); top:41px; left:0;}",".tn-person-r .tn-topmenulist-b{border:0;top:42px;left:-110px;}",".tn-person-r .tn-topmenulist-a-client{width:112px}",".tn-person-r .tn-topmenulist-a-nav{ width:110px;}",".tn-person-r .tn-topmenulist-a-menu{ width:110px;}",".tn-person-r .tn-topmenulist-a-user{width:110px;}",".tn-person-r .tn-topmenulist-a-weibo,.tn-topmenulist-a-other{ width:78px;}",".tn-person-r .tn-topmenulist-a-mail,.tn-topmenulist-a-blog{ width:110px; }",".tn-person-r .tn-topmenulist .tn-loading{ padding:10px 0; text-align:center; }",".tn-person-r li { list-style:none; margin:0;padding:0;}",".tn-person-r img { border:0; }",".tn-person-r a:focus{ outline-style:none; }",".tn-person-r em,",".tn-person-r i{ font-style:normal; font-weight:normal; }",".tn-person-r a{ color:#FF8400; text-decoration:none; }",".tn-person-r a:hover { text-decoration:underline; }",".tn-person-r .tn-new { margin-top:-10px;position:absolute;background:url(//i0.sinaimg.cn/home/main/index2013/0403/icon.png) 0 -1017px; width:14px; height:11px; }",".tn-person-r .tn-arrow { display:inline-block; width:8px; height:5px; margin:0 0 0 5px; overflow:hidden; vertical-align:middle; font-size:12px; line-height:13px; -webkit-transform:none; -moz-transform:none; -o-transform:none; background: url(//i0.sinaimg.cn/home/main/index2013/0403/icon.png) 0 -977px no-repeat; }"].join("\n")}),e.register("kit.dom.appendStyle",function(o){return function(e,t){var n,t=o.parseParam({autoAppend:!0,target:null,type:"text/css"},t);return e=(e=e||"").toString(),o.isNode(t.target)&&"style"===t.target.tagName.toLowerCase()?n=t.target:(n=document.createElement("style")).setAttribute("type",t.type),n.styleSheet?n.styleSheet.cssText=n.innerHTML+e:n.appendChild(document.createTextNode(e)),t.autoAppend&&document.getElementsByTagName("head")[0].appendChild(n),n}}),function(e){var t=e.comp.weibomenu,n=e.comp.blogmenu,o=e.comp.emailmenu,i=e.comp.loginbutton,r=e.comp.logoutmenu;(0,e.kit.dom.appendStyle)(e.comp.topstyle);new n({elem:e.E("SI_Top_Blog")}),new o({elem:e.E("SI_Top_Mail")}),new t({elem:e.E("SI_Top_Weibo")}),new i({elem:e.E("SI_Top_Login")}),new r({elem:e.E("SI_Top_Logout")})}(e)}(this,window.SINA_OUTLOGIN_LAYER.STK);
