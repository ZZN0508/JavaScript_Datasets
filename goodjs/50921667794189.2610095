(()=>{"use strict";var n={56:(t,e,n)=>{n.r(e),n.d(e,{default:()=>p});var o=n(1);function i(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var e=o.default.lib("utilities/bindify").bindify,n=o.default.lib("player/lib/elem"),s=n.elemBind,u=n.elemUnbind,a=n.elemWidth,l=n.elemHeight,c=n.elemOffset,h=(0,o.default.lib("utilities/detect").cachedDetect)(),n=function(){function e(t){var o=this;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),r(this,"onTouchStart",function(t){o.rootWidth=a(o.rootElem),o.rootHeight=l(o.rootElem),o.rootOffset=c(o.rootElem),o.resetTouchContext(),t.touches[0]&&(o.xDown=t.touches[0].clientX,o.yDown=t.touches[0].clientY),o.updatePinch(t),2==t.touches.length&&o.touchesAreInsideRootElem()&&t.preventDefault(),o.startedAt=Date.now(),s(document,"touchmove",o.onTouchMoveDocument,{passive:!1}),s(document,"touchend",o.onTouchEndDocument),s(o.rootElem,"touchmove",o.onTouchMove,{passive:!1}),s(o.rootElem,"touchend",o.onTouchEnd);var e=o.getTouchContext(t);o.trigger("touchstart",t,e),o.maybeTriggerMoreSpecificEvent(t,e)}),r(this,"onTouchMove",function(t){t._handledByTouchMove=!0;var e=t.touches[0].clientX,n=t.touches[0].clientY;o.xDiff=o.xDown-e,o.yDiff=o.yDown-n,o.updatePinch(t),o.isPinch||(25<Math.sqrt(o.xDiff*o.xDiff+o.yDiff*o.yDiff)||300<Date.now()-o.startedAt)&&(o.isSwipe=!0);n=o.getTouchContext(t);o.trigger("touchmove",t,n),o.maybeTriggerMoreSpecificEvent(t,n)}),r(this,"onTouchMoveDocument",function(t){t._handledByTouchMove||o.onTouchMove(t)}),r(this,"onTouchEnd",function(t){t._handledByTouchEnd=!0;var e=o.getTouchContext(t);o.trigger("touchend",t,e),o.maybeTriggerMoreSpecificEvent(t,e),setTimeout(function(){o.resetTouchContext(),o.unbindTouchEndAndTouchMove()},0)}),r(this,"onTouchEndDocument",function(t){t._handledByTouchEnd||o.onTouchEnd(t)}),this.rootElem=t,this.xDown=this.yDown=null,this.xDiff=this.yDiff=0,this.isSwipe=!1,this.isPinch=!1,this.startedAt=null,this.initialPinchDistance=null,this.touch1=this.touch2=null,this.pinchDistance=0,this.pinchScale=0,s(t,"touchstart",this.onTouchStart,!!h.passiveSupported&&{passive:!1})}return t=e,(n=[{key:"updatePinch",value:function(t){var e=this.rootOffset;return 2===t.touches.length?(this.touch1={left:t.touches[0].pageX-e.left,top:t.touches[0].pageY-e.top},this.touch2={left:t.touches[1].pageX-e.left,top:t.touches[1].pageY-e.top},this.pinchDistance=Math.sqrt(Math.pow(this.touch1.left-this.touch2.left,2),Math.pow(this.touch1.top-this.touch2.top,2)),null==this.initialPinchDistance&&(this.initialPinchDistance=this.pinchDistance),this.pinchScale=this.pinchDistance/this.initialPinchDistance,this.pinchDelta=this.pinchDistance-this.initialPinchDistance,this.isPinch=!0,this.pinchScale):0}},{key:"getTouchContext",value:function(t){var e=this.rootOffset,n=Date.now()-this.startedAt,t=Object(t.touches[0]);return{xOffset:t.pageX-e.left,yOffset:t.pageY-e.top,xDelta:this.xDiff,yDelta:this.yDiff,absXDelta:Math.abs(this.xDiff),absYDelta:Math.abs(this.yDiff),delta:Math.sqrt(this.xDiff*this.xDiff+this.yDiff*this.yDiff),startedAt:this.startedAt,isSwipe:!this.isPinch&&this.isSwipe,isTap:n<1e3&&!this.isPinch&&!this.isSwipe,isLongPress:1e3<=n&&!this.isPinch&&!this.isSwipe,isPinch:this.isPinch,timeDelta:n,pinchScale:this.pinchScale,pinchDistance:this.pinchDistance}}},{key:"touchIsInsideRootElem",value:function(t){return 0<=t.left&&t.left<this.rootWidth&&0<=t.top&&t.top<this.rootHeight}},{key:"touchesAreInsideRootElem",value:function(){return this.touchIsInsideRootElem(this.touch1)&&this.touchIsInsideRootElem(this.touch2)}},{key:"resetTouchContext",value:function(){this.xDown=this.yDown=null,this.xDiff=this.yDiff=0,this.isSwipe=!1,this.isPinch=!1,this.startedAt=null,this.pinchDelta=0,this.pinchDistance=0,this.initialPinchDistance=null,this.touch1=this.touch2=null}},{key:"maybeTriggerMoreSpecificEvent",value:function(t,e){e.isLongPress?this.trigger("longpress",t,e):e.isTap?this.trigger("tap",t,e):e.isSwipe?this.trigger("swipe",t,e):e.isPinch&&this.trigger("pinch",t,e)}},{key:"destroy",value:function(){u(this.rootElem,"touchstart",this.onTouchStart),this.unbindTouchEndAndTouchMove(),this.rootElem=null}},{key:"unbindTouchEndAndTouchMove",value:function(){u(document,"touchmove",this.onTouchMoveDocument),u(document,"touchend",this.onTouchEndDocument),u(this.rootElem,"touchmove",this.onTouchMove),u(this.rootElem,"touchend",this.onTouchEnd)}}])&&i(t.prototype,n),o&&i(t,o),e;var t,n,o}();e(n.prototype),o.default.define("vulcanV2Player/TouchEvents.js",n);const p=n},55:(t,e,n)=>{n.r(e),n.d(e,{default:()=>r});var e=n(1),o=n(6),s=n(56);function u(){return(u=Object.assign||function(t){for(var e,n=1;n<arguments.length;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)}function a(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=i(n);return t=o?(t=i(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!=typeof t&&"function"!=typeof t?h(e):t}}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f=(0,e.default.lib("utilities/detect").cachedDetect)();const r=function(){function i(){var o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return p(h(o=r.call.apply(r,[this].concat(e))),"onSwipe",function(t,e){var n=o.props.onSwipe;n&&n(t,e)}),p(h(o),"onPinch",function(t,e){var n=o.props.onPinch;n&&n(t,e)}),p(h(o),"onLongPress",function(t,e){var n=o.props.onLongPress;n&&n(t,e)}),p(h(o),"onCustomTouchMove",function(t,e){var n=o.props.onCustomTouchMove;n&&n(t,e)}),o}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(i,o.Component);var t,e,n,r=c(i);return t=i,(e=[{key:"render",value:function(){var t=this.props.tagName||"div";return(0,o.h)(t,u({},this.props,{ref:this.props.elemRef}),this.props.children)}},{key:"componentDidMount",value:function(){this._savedBase=this.base,this.setupBindings()}},{key:"componentDidUpdate",value:function(){this.base!==this._savedBase&&(this._savedBase=this.base,this.destroyBindings(),this.setupBindings())}},{key:"componentWillUnmount",value:function(){this.destroyBindings()}},{key:"setupBindings",value:function(){var t;this.unbinds=[],f.touchScreen&&((t=this.touchEvents=new s.default(this.base)).on("swipe",this.onSwipe),t.on("pinch",this.onPinch),t.on("longpress",this.onLongPress),t.on("touchmove",this.onCustomTouchMove))}},{key:"destroyBindings",value:function(){this.touchEvents&&(this.touchEvents.destroy(),this.touchEvents=null),this.unbinds&&(this.unbinds.map(function(t){return t()}),this.unbinds=null)}}])&&a(t.prototype,e),n&&a(t,n),i}()},469:(t,e,n)=>{n.r(e),n.d(e,{default:()=>O});var e=n(1),i=n(55),s=n(6);function u(){return(u=Object.assign||function(t){for(var e,n=1;n<arguments.length;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)}function o(e,t){var n,o=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)),o}function a(e){for(var n,t=1;t<arguments.length;t++)n=null==arguments[t]?{}:arguments[t],t%2?o(Object(n),!0).forEach(function(t){v(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))});return e}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function c(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=d(n);return t=o?(t=d(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!=typeof t&&"function"!=typeof t?_(e):t}}function _(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var y=e.default.lib("player/translations").getTranslation,g=e.default.lib("player/lib/interFontFamily").interFontFamily,m=e.default.lib("utilities/isMouseDown").isMouseDown,b=e.default.lib("player/lib/elem").elemIsInside,e=function(){function n(t){var e;return l(this,n),v(_(e=o.call(this,t)),"setSkipSVGFocusState",function(t){e.setState({skipSvgHasFocus:t})}),v(_(e),"setRewatchSVGFocusState",function(t){e.setState({rewatchSvgHasFocus:t})}),v(_(e),"setContainerHasFocus",function(t){e.setState({containerHasFocus:t})}),e.state={hovering:!1,skipSvgHasFocus:!1,rewatchSvgHasFocus:!1,containerHasFocus:!1},e}h(n,s.Component);var o=f(n);return c(n,[{key:"componentDidMount",value:function(){var t=this;"raw"===this.deriveCtaTypeFromOptions(this.props.options)&&b(document.activeElement,this.props.uiContainer)&&setTimeout(function(){t.overlayRef.focus()},0)}},{key:"deriveCtaTypeFromOptions",value:function(t){return"raw"===t.ctaType&&t.raw?"raw":"text"===t.ctaType&&t.text?"text":"image"===t.ctaType&&t.image?"image":!t.ctaType&&(t.raw||t.text||t.image?t.raw||!t.text&&!t.image?"raw":t.image?"image":"text":void 0)}},{key:"fontSizing",value:function(){var t=30,e=this.props,n=e.videoHeight,e=e.videoWidth;return this.props.options.autoSize&&(n=e/n<1?58:72,t=Math.round(this.props.videoHeight/9),t=Math.min(n,Math.max(10,t))),t}},{key:"fontFamily",value:function(){return{fontFamily:g}}},{key:"containerStyles",value:function(){var t=this.fontFamily();return a({height:"100%",backgroundColor:this.state.hovering?this.props.hoverColor:"",boxShadow:this.state.containerHasFocus&&!this.props.isMostRecentFocusViaMouse?"0 0 0 2px #fff inset":"none",color:"#ffffff",fontSize:"".concat(this.fontSizing(),"px"),lineHeight:"1.2em",position:"relative",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center"},t)}},{key:"skipOrRewatchStyles",value:function(){return{bottom:"".concat(this.fontSizing()/3,"px"),boxSizing:"border-box",cursor:"pointer",padding:"".concat(this.fontSizing()/6,"px"),position:"absolute"}}},{key:"rewatchSVG",value:function(){var t=this;if(this.props.options.rewatch&&"end"===this.props.options.time){var e="".concat(this.fontSizing()/2,"px");return(0,s.h)(i.default,{tagName:"button",onClick:this.props.onClickRewatch,style:a(a({},this.skipOrRewatchStyles()),{},{left:"".concat(e),border:this.state.rewatchSvgHasFocus?"2px solid white":"2px solid transparent"}),className:"w-css-reset w-vulcan-v2-button",onfocusin:function(){return t.setRewatchSVGFocusState(!m())},onfocusout:function(){return t.setRewatchSVGFocusState(!1)}},(0,s.h)("span",{style:a(a({},this.fontFamily()),{},{fontSize:"".concat(e)})},"↺ ",y(this.props.playerLanguage.code,"REWATCH")))}}},{key:"skipSVG",value:function(){var t=this;if(!!this.props.nextVideo()||"end"!==this.props.options.time){var e="".concat(this.fontSizing()/2,"px");return(0,s.h)(i.default,{tagName:"button",onClick:this.props.onClickSkip,style:a(a({},this.skipOrRewatchStyles()),{},{right:"".concat(e),border:this.state.skipSvgHasFocus?"2px solid white":"2px solid transparent"}),className:"w-css-reset w-vulcan-v2-button",onfocusin:function(){return t.setSkipSVGFocusState(!m())},onfocusout:function(){return t.setSkipSVGFocusState(!1)}},(0,s.h)("span",{style:a(a({},this.fontFamily()),{},{fontSize:"".concat(e)})},y(this.props.playerLanguage.code,"SKIP")," →"))}}},{key:"render",value:function(){var e=this,t=a({},this.props.options),t=this.deriveCtaTypeFromOptions(t);return(0,s.h)("div",{style:this.containerStyles(),onBlur:function(){return e.setContainerHasFocus(!1)},onFocus:function(){return e.setContainerHasFocus(!0)},tabIndex:"raw"===t?0:-1,ref:function(t){return e.overlayRef=t}},(0,s.h)(w,{ctaType:t,fontFamily:this.fontFamily(),fontSize:this.fontSizing(),isMostRecentFocusViaMouse:this.props.isMostRecentFocusViaMouse,logConversionEvent:this.props.logConversionEvent,options:this.props.options,videoHeight:this.props.videoHeight,videoWidth:this.props.videoWidth,uiContainer:this.props.uiContainer}),this.rewatchSVG(),this.skipSVG())}}]),n}(),w=function(){function i(){var e;l(this,i);for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return v(_(e=r.call.apply(r,[this].concat(n))),"setHoverState",function(t){e.setState({hovering:t})}),v(_(e),"setHasFocus",function(t){e.setState({hasFocus:t})}),v(_(e),"resizeOnImageLoad",function(){e.ctaImage&&e.forceUpdate()}),e}h(i,s.Component);var r=f(i);return c(i,[{key:"componentDidMount",value:function(){var t,e=this.props.ctaType;"raw"!==e&&b(document.activeElement,this.props.uiContainer)&&("text"===e?t=this.overlayTextRef:"image"===e&&(t=this.overlayImageRef),setTimeout(function(){null!==t&&void 0!==t&&t.focus()},0))}},{key:"ctaContentStyles",value:function(){return{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",width:"100%",textDecoration:"none",boxShadow:this.state.hasFocus&&!this.props.isMostRecentFocusViaMouse?"0 0 0 2px #fff inset":"none",boxSizing:"border-box"}}},{key:"imageStyles",value:function(){if(this.ctaImage){var t=this.ctaImage,e=t.naturalWidth,n=t.naturalHeight,o=this.props,t=o.videoWidth,o=o.videoHeight;if(n<o&&e<t){o=Math.min(t/e,o/n);return{width:"".concat(e*o,"px"),height:"".concat(n*o,"px")}}return{maxWidth:"100%",maxHeight:"100%"}}}},{key:"textStyle",value:function(){return{textAlign:"center",lineHeight:"1.2em",fontWeight:100,width:"80%",color:"white",fontSize:"".concat(this.props.fontSize,"px")}}},{key:"renderText",value:function(){var t=this.props.options.text.replace(/<br\/>/g,"\n").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br/>");return(0,s.h)("div",{className:"w-css-reset-tree",style:a(a({},this.props.fontFamily),this.textStyle()),dangerouslySetInnerHTML:{__html:t||""}})}},{key:"renderImage",value:function(){var e=this;return this.props.options.image.src?(0,s.h)("img",{className:"w-css-reset-tree",src:this.props.options.image.src,ref:function(t){return e.ctaImage=t},style:this.imageStyles(),onLoad:this.resizeOnImageLoad,alt:this.props.options.altText||null}):void 0}},{key:"renderRaw",value:function(){return(0,s.h)("div",{dangerouslySetInnerHTML:{__html:this.props.options.raw}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.options,o=t.ctaType,t=n.link?"a":"span",n={href:n.link,target:"_blank",class:"w-css-reset",style:this.ctaContentStyles(),onClick:n.link?this.props.logConversionEvent:null,onMouseEnter:function(){return e.setHoverState(!0)},onMouseLeave:function(){return e.setHoverState(!1)},onFocus:function(){return e.setHasFocus(!0)},onBlur:function(){return e.setHasFocus(!1)}};return(0,s.h)("div",{style:{width:"100%",height:"100%"}},"text"===o&&(0,s.h)(t,u({},n,{ref:function(t){return e.overlayTextRef=t}}),this.renderText()),"image"===o&&(0,s.h)(t,u({},n,{ref:function(t){return e.overlayImageRef=t}}),this.renderImage()),"raw"===o&&(0,s.h)(k,{raw:this.props.options.raw}))}}]),i}(),k=function(){function t(){return l(this,t),e.apply(this,arguments)}h(t,s.Component);var e=f(t);return c(t,[{key:"shouldComponentUpdate",value:function(t){return this.props.raw!==t.raw}},{key:"rawContainerStyles",value:function(){return{alignContent:"center",display:"flex",flexDirection:"column",height:"100%",justifyContent:"center"}}},{key:"render",value:function(){return(0,s.h)("div",{style:this.rawContainerStyles(),dangerouslySetInnerHTML:{__html:this.props.raw}})}}]),t}();const O=e},2:(t,e,n)=>{var o;n.r(e),n.d(e,{default:()=>i});try{(o=self).self!==o&&(o.self,1)&&"undefined"!=typeof window&&(o=window)}catch(t){o="undefined"==typeof globalThis?window:globalThis}const i=o},1:(t,e,n)=>{n.r(e),n.d(e,{default:()=>o});e=n(2);null==e.default.Wistia&&(e.default.Wistia={});n=e.default.Wistia;null==n._initializers&&(n._initializers={}),null==n._destructors&&(n._destructors={}),null==n.mixin&&(n.mixin=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])});const o=e.default.Wistia},6:(t,e,n)=>{n.r(e),n.d(e,{render:()=>v,hydrate:()=>y,createElement:()=>l,h:()=>l,Fragment:()=>x,createRef:()=>function(){return{current:null}},isValidElement:()=>o,Component:()=>C,cloneElement:()=>function(t,e,n){var o,i,r,s=arguments,u=S({},t.props);for(r in e)"key"==r?o=e[r]:"ref"==r?i=e[r]:u[r]=e[r];if(3<arguments.length)for(n=[n],r=3;r<arguments.length;r++)n.push(s[r]);return null!=n&&(u.children=n),m(t.type,u,o||t.key,i||t.ref,null)},createContext:()=>function(t,o){t={__c:o="__cC"+u++,__:t,Consumer:function(t,e){return t.children(e)},Provider:function(t){var n,e;return this.getChildContext||(n=[],((e={})[o]=this).getChildContext=function(){return e},this.shouldComponentUpdate=function(t){this.props.value!==t.value&&n.some(c)},this.sub=function(t){n.push(t);var e=t.componentWillUnmount;t.componentWillUnmount=function(){n.splice(n.indexOf(t),1),e&&e.call(t)}}),t.children}};return t.Provider.__=t.Consumer.contextType=t},toChildArray:()=>function e(t,n){return n=n||[],null==t||"boolean"==typeof t||(Array.isArray(t)?t.some(function(t){e(t,n)}):n.push(t)),n},options:()=>w});var w,o,i,r,s,u,k={},O=[],a=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function S(t,e){for(var n in e)t[n]=e[n];return t}function T(t){var e=t.parentNode;e&&e.removeChild(t)}function l(t,e,n){var o,i,r,s=arguments,u={};for(r in e)"key"==r?o=e[r]:"ref"==r?i=e[r]:u[r]=e[r];if(3<arguments.length)for(n=[n],r=3;r<arguments.length;r++)n.push(s[r]);if(null!=n&&(u.children=n),"function"==typeof t&&null!=t.defaultProps)for(r in t.defaultProps)void 0===u[r]&&(u[r]=t.defaultProps[r]);return m(t,u,o,i,null)}function m(t,e,n,o,i){i={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==i?++w.__v:i};return null!=w.vnode&&w.vnode(i),i}function x(t){return t.children}function C(t,e){this.props=t,this.context=e}function b(t,e){if(null==e)return t.__?b(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e)return n.__e;return"function"==typeof t.type?b(t):null}function c(t){(!t.__d&&(t.__d=!0)&&i.push(t)&&!h.__r++||s!==w.debounceRendering)&&((s=w.debounceRendering)||r)(h)}function h(){for(var t;h.__r=i.length;)t=i.sort(function(t,e){return t.__v.__b-e.__v.__b}),i=[],t.some(function(t){var e,n,o,i,r;t.__d&&(i=(o=(e=t).__v).__e,(r=e.__P)&&(n=[],(t=S({},o)).__v=o.__v+1,R(r,o,t,e.__n,void 0!==r.ownerSVGElement,null==o.__h?null:[i],n,null==i?b(o):i,o.__h),d(n,o),o.__e!=i&&function t(e){var n,o;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,n=0;n<e.__k.length;n++)if(null!=(o=e.__k[n])&&null!=o.__e){e.__e=e.__c.base=o.__e;break}return t(e)}}(o)))})}function P(t,e,n,o,i,r,s,u,a,l){var c,h,p,f,_,d,v,y=o&&o.__k||O,g=y.length;for(n.__k=[],c=0;c<e.length;c++)if(null!=(f=n.__k[c]=null==(f=e[c])||"boolean"==typeof f?null:"string"==typeof f||"number"==typeof f||"bigint"==typeof f?m(null,f,null,null,f):Array.isArray(f)?m(x,{children:f},null,null,null):0<f.__b?m(f.type,f.props,f.key,null,f.__v):f)){if(f.__=n,f.__b=n.__b+1,null===(p=y[c])||p&&f.key==p.key&&f.type===p.type)y[c]=void 0;else for(h=0;h<g;h++){if((p=y[h])&&f.key==p.key&&f.type===p.type){y[h]=void 0;break}p=null}R(t,f,p=p||k,i,r,s,u,a,l),_=f.__e,(h=f.ref)&&p.ref!=h&&(v=v||[],p.ref&&v.push(p.ref,null,f),v.push(h,f.__c||_,f)),null==_?a&&p.__e==a&&a.parentNode!=t&&(a=b(p)):(null==d&&(d=_),"function"==typeof f.type&&null!=f.__k&&f.__k===p.__k?f.__d=a=function t(e,n,o){var i,r;for(i=0;i<e.__k.length;i++)(r=e.__k[i])&&(r.__=e,n="function"==typeof r.type?t(r,n,o):D(o,r,r,e.__k,r.__e,n));return n}(f,a,t):a=D(t,f,p,y,_,a),l||"option"!==n.type?"function"==typeof n.type&&(n.__d=a):t.value="")}for(n.__e=d,c=g;c--;)null!=y[c]&&("function"==typeof n.type&&null!=y[c].__e&&y[c].__e==n.__d&&(n.__d=b(o,c+1)),function t(e,n,o){var i,r,s;if(w.unmount&&w.unmount(e),(i=e.ref)&&(i.current&&i.current!==e.__e||M(i,null,n)),o||"function"==typeof e.type||(o=null!=(r=e.__e)),e.__e=e.__d=void 0,null!=(i=e.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(e){w.__e(e,n)}i.base=i.__P=null}if(i=e.__k)for(s=0;s<i.length;s++)i[s]&&t(i[s],n,o);null!=r&&T(r)}(y[c],y[c]));if(v)for(c=0;c<v.length;c++)M(v[c],v[++c],v[++c])}function D(t,e,n,o,i,r){var s,u,a;if(void 0!==e.__d)s=e.__d,e.__d=void 0;else if(null==n||i!=r||null==i.parentNode)t:if(null==r||r.parentNode!==t)t.appendChild(i),s=null;else{for(u=r,a=0;(u=u.nextSibling)&&a<o.length;a+=2)if(u==i)break t;t.insertBefore(i,r),s=r}return void 0===s?i.nextSibling:s}function p(t,e,n){"-"===e[0]?t.setProperty(e,n):t[e]=null==n?"":"number"!=typeof n||a.test(e)?n:n+"px"}function E(t,e,n,o,i){var r;t:if("style"===e)if("string"==typeof n)t.style.cssText=n;else{if("string"==typeof o&&(t.style.cssText=o=""),o)for(e in o)n&&e in n||p(t.style,e,"");if(n)for(e in n)o&&n[e]===o[e]||p(t.style,e,n[e])}else if("o"===e[0]&&"n"===e[1])r=e!==(e=e.replace(/Capture$/,"")),e=(e.toLowerCase()in t?e.toLowerCase():e).slice(2),t.l||(t.l={}),t.l[e+r]=n,n?o||t.addEventListener(e,r?_:f,r):t.removeEventListener(e,r?_:f,r);else if("dangerouslySetInnerHTML"!==e){if(i)e=e.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if("href"!==e&&"list"!==e&&"form"!==e&&"tabIndex"!==e&&"download"!==e&&e in t)try{t[e]=null==n?"":n;break t}catch(t){}"function"==typeof n||(null!=n&&(!1!==n||"a"===e[0]&&"r"===e[1])?t.setAttribute(e,n):t.removeAttribute(e))}}function f(t){this.l[t.type+!1](w.event?w.event(t):t)}function _(t){this.l[t.type+!0](w.event?w.event(t):t)}function R(t,e,n,o,i,r,s,u,a){var l,c,h,p,f,_,d,v,y,g,m,b=e.type;if(void 0===e.constructor){null!=n.__h&&(a=n.__h,u=e.__e=n.__e,e.__h=null,r=[u]),(l=w.__b)&&l(e);try{t:if("function"==typeof b){if(v=e.props,y=(l=b.contextType)&&o[l.__c],g=l?y?y.props.value:l.__:o,n.__c?d=(c=e.__c=n.__c).__=c.__E:("prototype"in b&&b.prototype.render?e.__c=c=new b(v,g):(e.__c=c=new C(v,g),c.constructor=b,c.render=j),y&&y.sub(c),c.props=v,c.state||(c.state={}),c.context=g,c.__n=o,h=c.__d=!0,c.__h=[]),null==c.__s&&(c.__s=c.state),null!=b.getDerivedStateFromProps&&(c.__s==c.state&&(c.__s=S({},c.__s)),S(c.__s,b.getDerivedStateFromProps(v,c.__s))),p=c.props,f=c.state,h)null==b.getDerivedStateFromProps&&null!=c.componentWillMount&&c.componentWillMount(),null!=c.componentDidMount&&c.__h.push(c.componentDidMount);else{if(null==b.getDerivedStateFromProps&&v!==p&&null!=c.componentWillReceiveProps&&c.componentWillReceiveProps(v,g),!c.__e&&null!=c.shouldComponentUpdate&&!1===c.shouldComponentUpdate(v,c.__s,g)||e.__v===n.__v){c.props=v,c.state=c.__s,e.__v!==n.__v&&(c.__d=!1),(c.__v=e).__e=n.__e,e.__k=n.__k,e.__k.forEach(function(t){t&&(t.__=e)}),c.__h.length&&s.push(c);break t}null!=c.componentWillUpdate&&c.componentWillUpdate(v,c.__s,g),null!=c.componentDidUpdate&&c.__h.push(function(){c.componentDidUpdate(p,f,_)})}c.context=g,c.props=v,c.state=c.__s,(l=w.__r)&&l(e),c.__d=!1,c.__v=e,c.__P=t,l=c.render(c.props,c.state,c.context),c.state=c.__s,null!=c.getChildContext&&(o=S(S({},o),c.getChildContext())),h||null==c.getSnapshotBeforeUpdate||(_=c.getSnapshotBeforeUpdate(p,f)),m=null!=l&&l.type===x&&null==l.key?l.props.children:l,P(t,Array.isArray(m)?m:[m],e,n,o,i,r,s,u,a),c.base=e.__e,e.__h=null,c.__h.length&&s.push(c),d&&(c.__E=c.__=null),c.__e=!1}else null==r&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=function(t,e,n,o,i,r,s,u){var a,l,c,h,p=n.props,f=e.props,_=e.type,d=0;if("svg"===_&&(i=!0),null!=r)for(;d<r.length;d++)if((a=r[d])&&(a===t||(_?a.localName==_:3==a.nodeType))){t=a,r[d]=null;break}if(null==t){if(null===_)return document.createTextNode(f);t=i?document.createElementNS("http://www.w3.org/2000/svg",_):document.createElement(_,f.is&&f),r=null,u=!1}if(null===_)p===f||u&&t.data===f||(t.data=f);else{if(r=r&&O.slice.call(t.childNodes),l=(p=n.props||k).dangerouslySetInnerHTML,c=f.dangerouslySetInnerHTML,!u){if(null!=r)for(p={},h=0;h<t.attributes.length;h++)p[t.attributes[h].name]=t.attributes[h].value;(c||l)&&(c&&(l&&c.__html==l.__html||c.__html===t.innerHTML)||(t.innerHTML=c&&c.__html||""))}if(function(t,e,n,o,i){for(var r in n)"children"===r||"key"===r||r in e||E(t,r,null,n[r],o);for(r in e)i&&"function"!=typeof e[r]||"children"===r||"key"===r||"value"===r||"checked"===r||n[r]===e[r]||E(t,r,e[r],n[r],o)}(t,f,p,i,u),c)e.__k=[];else if(d=e.props.children,P(t,Array.isArray(d)?d:[d],e,n,o,i&&"foreignObject"!==_,r,s,t.firstChild,u),null!=r)for(d=r.length;d--;)null!=r[d]&&T(r[d]);u||("value"in f&&void 0!==(d=f.value)&&(d!==t.value||"progress"===_&&!d)&&E(t,"value",d,p.value,!1),"checked"in f&&void 0!==(d=f.checked)&&d!==t.checked&&E(t,"checked",d,p.checked,!1))}return t}(n.__e,e,n,o,i,r,s,a);(l=w.diffed)&&l(e)}catch(t){e.__v=null,!a&&null==r||(e.__e=u,e.__h=!!a,r[r.indexOf(u)]=null),w.__e(t,e,n)}}}function d(t,e){w.__c&&w.__c(e,t),t.some(function(e){try{t=e.__h,e.__h=[],t.some(function(t){t.call(e)})}catch(t){w.__e(t,e.__v)}})}function M(t,e,n){try{"function"==typeof t?t(e):t.current=e}catch(t){w.__e(t,n)}}function j(t,e,n){return this.constructor(t,n)}function v(t,e,n){var o,i,r;w.__&&w.__(t,e),i=(o="function"==typeof n)?null:n&&n.__k||e.__k,r=[],R(e,t=(!o&&n||e).__k=l(x,null,[t]),i||k,k,void 0!==e.ownerSVGElement,!o&&n?[n]:!i&&e.firstChild?O.slice.call(e.childNodes):null,r,!o&&n?n:i?i.__e:e.firstChild,o),d(r,t)}function y(t,e){v(t,e,y)}w={__e:function(t,e){for(var n,o,i;e=e.__;)if((n=e.__c)&&!n.__)try{if((o=n.constructor)&&null!=o.getDerivedStateFromError&&(n.setState(o.getDerivedStateFromError(t)),i=n.__d),null!=n.componentDidCatch&&(n.componentDidCatch(t),i=n.__d),i)return n.__E=n}catch(e){t=e}throw t},__v:0},o=function(t){return null!=t&&void 0===t.constructor},C.prototype.setState=function(t,e){var n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=S({},this.state);(t="function"==typeof t?t(S({},n),this.props):t)&&S(n,t),null!=t&&this.__v&&(e&&this.__h.push(e),c(this))},C.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),c(this))},C.prototype.render=x,i=[],r="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,u=h.__r=0}},o={};function i(t){var e=o[t];if(void 0!==e)return e.exports;e=o[t]={exports:{}};return n[t](e,e.exports,i),e.exports}i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var e={};(()=>{i.r(e);var r=i(1),s=i(469),u=i(6);function o(e,t){var n,o=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)),o}function a(e){for(var n,t=1;t<arguments.length;t++)n=null==arguments[t]?{}:arguments[t],t%2?o(Object(n),!0).forEach(function(t){d(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))});return e}function l(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=_(n);return t=o?(t=_(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!=typeof t&&"function"!=typeof t?f(e):t}}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var v=r.default.lib("utilities/isMouseDown").isMouseDownRecently,y=r.default.lib("utilities/color"),g=r.default.lib("promiscuous"),m="postRoll-v2-cta",b=r.default.lib("utilities/core").unescapeHtml,t=r.default.lib("player/lib/elem"),w=t.getCssTags,k=t.execCssTags,O=t.removeCssTags,S=t.getScriptTags,T=t.execScriptTags,x=t.removeScriptTags,C=t.elemStripEventAttributes,n=function(){function o(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),d(f(n=i.call(this,t,e)),"nextVideo",function(){return n.video.nextVideo()}),d(f(n),"translateColor",function(){var t=new y("#303030").alpha(n._style.backgroundOpacity||.91),e=new y(t);return{rgbaBackgroundColor:t.toRgba(),rgbaHoverColor:e.alpha(.41).toRgba()}}),d(f(n),"onClickSkip",function(){"beforeplay"===n.video.state()&&n.video.unsuspend({state:"playing",time:n.video.time()}),n.hide(),v()||n.video._focusNextVisibleElem()}),d(f(n),"onClickRewatch",function(){n.video.unsuspend({time:0,state:"playing"}),n.hide(),v()||n.video._focusNextVisibleElem()}),d(f(n),"logConversionEvent",function(){var t=a(a({},n.formatConversionData()),{},{converted:!0,link:n._link});n.video.trigger("conversion-postRoll",t),n.video._tracker.logConversionOpportunity(t)}),n.pluginName="postRoll-v2",n.video=t,n.options=e,n.updateFromOptions(n.options),n._conversionOpportunityType="callToAction",n._isVisible=!1,n.unbinds=[],null==n._time&&(n._time="end"),n._style||(n._style={}),n.video.defineOverlay(m,n.getOptionsForDefineOverlay()),n.setupOverlayBindings(),n}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(o,r.default.Plugin.Base);var t,e,n,i=p(o);return t=o,(e=[{key:"renderCta",value:function(){var i=this;return new g(function(t){var e={altText:i._altText,ctaType:i._ctaType,text:i._text,raw:i._raw,image:i._image,time:i._time,rewatch:i._rewatch,autoSize:i._autoSize,style:i._style,link:i._link},n=i.video,o=n.controls.modalOverlay.props.isMostRecentFocusViaMouse;r.default.asyncRequire("interFontFace.js").then(function(){(0,u.render)((0,u.h)(s.default,{options:e,playerLanguage:n.playerLanguage(),videoHeight:n.videoHeight(),videoWidth:n.videoWidth(),isMostRecentFocusViaMouse:o,onClickSkip:i.onClickSkip,onClickRewatch:i.onClickRewatch,nextVideo:i.nextVideo,logConversionEvent:i.logConversionEvent,hoverColor:i.translateColor().rgbaHoverColor,uiContainer:n.uiContainer}),i.rootElem),i.reactMounts=[i.rootElem],t()})})}},{key:"customizePreview",value:function(t){var e;t.anyChanged(["plugin[postRoll-v2]","plugin[postRoll-v1]","ephemeral[ui][callToAction]"])&&(this.resetOverLayType(),"text"===(e=a({},t.currentValue("plugin[postRoll-v2]")||t.currentValue("plugin[postRoll-v1]")||{on:!1})).ctaType&&(e.text||(e.text="Here's a link to click! →"),e.link||(e.link="https://wistia.com")),this.updateFromOptions(e),t.currentValue("ephemeral[ui][callToAction][isOpen]")?(this.show(),this.video.time(this.formatStringToTime(e.time))):this.hide())}},{key:"formatStringToTime",value:function(t){return"before"===t?0:"end"===t?this.video.duration():t}},{key:"getOptionsForDefineOverlay",value:function(){var e=this;return{mount:function(t){return e.rootElem=t,e.renderCta().then(function(){e.possiblyExecuteScriptTags(!0)})},onControlPropsUpdated:function(t){t.videoWidth!==this.props.videoWidth&&e.renderCta(),t.playerLanguage&&t.playerLanguage.code!==this.props.playerLanguage.code&&e.renderCta()},style:a(a({},e._style),{},{backgroundColor:e.translateColor().rgbaBackgroundColor}),type:"modal",transition:"fade"}}},{key:"setupOverlayBindings",value:function(){var e=this;this.video.embedded(function(){var t=e._time;"before"===t&&"beforeplay"===e.video.state()?e.show():"end"===t?e.unbinds.push(e.video.on("end",function(){e.show()})):e.unbinds.push(e.video.on("crosstime",e._time,function(){e.show()})),e.unbinds.push(e.video.on("beforerebuild",function(){e._isVisible=!1}))})}},{key:"hide",value:function(){this._isVisible=!1,this.video.cancelOverlay(m)}},{key:"sanitizeUrl",value:function(t){t=b(t);return/^(https?|mailto|ftp|tel|#|\/)/.test(t)?t:"http://".concat(t)}},{key:"sanitizeRaw",value:function(t){return this._previousUnstrippedRaw=this._unstrippedRaw||t,this._unstrippedRaw=t,this._scriptTags=S(t),this._cssTags=w(t),O(x(t))}},{key:"formatConversionData",value:function(){var t="end"===this._time?this.video.duration():"before"===this._time?0:this._time;return{co_key:this._conversionOpportunityKey,co_type:this._conversionOpportunityType,time:t}}},{key:"logConversionOpportunity",value:function(){this.video._tracker.logConversionOpportunity(this.formatConversionData())}},{key:"show",value:function(){var t=this;return this.video.requestOverlay(m).then(function(){return t.renderCta()}).then(function(){t._isVisible||(t._isVisible=!0,t.logConversionOpportunity()),t.possiblyExecuteScriptTags(),t.rootElem&&(r.default.EmbedLink.setupAll(t.rootElem),r.default.plugin._allow3rdParty(t.video.embedOptions())||C(t.rootElem))})}},{key:"possiblyExecuteScriptTags",value:function(t){var e=this._unstrippedRaw!==this._previousUnstrippedRaw||t,n=this._scriptTags&&0<this._scriptTags.length,t=this._cssTags&&0<this._cssTags.length;this._raw&&(n||t)&&e&&r.default.plugin._allow3rdParty(this.video.embedOptions())&&(T(this._scriptTags||[]),k(this._cssTags||[]))}},{key:"remove",value:function(){this.unbinds.map(function(t){return t()}),this.unbinds=[],this.video.cancelOverlay(m),c(_(o.prototype),"remove",this).call(this)}},{key:"resetOverLayType",value:function(){this._text=void 0,this._image=void 0,this._html=void 0,this._raw=void 0}},{key:"updateText",value:function(t){this.resetOverLayType(),this._text=t,this.show()}},{key:"updateImage",value:function(t){this.resetOverLayType(),this._image=P(t),this.show()}},{key:"updateRaw",value:function(t){this.resetOverLayType(),this._raw=this.sanitizeRaw(t),this.show()}},{key:"updateUrl",value:function(t){this._link=this.sanitizeUrl(t),this.show()}},{key:"showRewatch",value:function(){this._rewatch=!0,this.show()}},{key:"hideRewatch",value:function(){this._rewatch=!1,this.show()}},{key:"updateFromOptions",value:function(t){for(var e in t)this.updateFromOption("_".concat(e),t[e])}},{key:"updateFromOption",value:function(t,e){"_link"===t?this._link=this.sanitizeUrl(e):"_raw"===t?this._raw=this.sanitizeRaw(e):"_image"===t?this._image=P(e):"_backgroundOpacity"===t?this._style=a(a({},this._style),{},{backgroundOpacity:e}):this[t]=e}}])&&l(t.prototype,e),n&&l(t,n),o}(),P=function(t){if(t){var e=new Image;return e.src=t,e}};r.default.plugin("postRoll-v2",function(t,e){return new n(t,e)})})()})();
