define("modules/helpers/gigyaHelper",["jquery","md5","sha256","modules/helpers/nflTokenHelper"],function(n,e,r,t){window.md5||(window.md5=e);var s={options:{ttl:6e4,screens:{accountDetails:"account-details",activate:"activate",editProfile:"edit-profile",changePassword:"gigya-change-password-screen",emailPreferences:"gigya-communication-screen",forgotPassword:"gigya-forgot-password-screen",forgotPasswordSuccess:"gigya-forgot-password-success-screen",signUp:"gigya-register-screen-2",signIn:"gigya-sign-in-screen",resetPassword:"reset-password",resetPasswordSuccess:"reset-password-success"}},skdEnabled:function(){var e=window.gigyaApiKey;return void 0!==e&&0!==e.length},loadSDK:function(){var r=n.Deferred();return window.gigya?r.resolve():window.requireQueue(["gigya"],function(e){r.resolve()}),r.promise()},checkUserStatus:function(){var o=n.Deferred();return s.hasUserDataExpired()?window.gigya.accounts.getAccountInfo({include:"loginIDs, profile, data",callback:function(r){0===r.errorCode?(s.storeUserData(r),t.getToken(r).done(function(e){t.storeToken(e),o.resolve(r)})):(s.deleteUserData(),t.getToken({}).done(function(e){t.storeToken(e),o.resolve(r)}).fail(function(){o.resolve(r)}))}}):o.resolve({errorCode:0}),o.promise()},setAccountInfo:function(e){return e=e,r=n.Deferred(),e=n.extend({},e,{callback:function(e){r.resolve(e)}}),window.gigya.accounts.setAccountInfo(e),r.promise().then(function(){return e=s,r=n.Deferred(),e.deleteUserData(),e.checkUserStatus().done(function(e){r.resolve(e)}),r.promise();var e,r});var r},showScreenSet:function(e){n.isEmptyObject(e)||window.gigya.accounts.showScreenSet(e)},storeUserData:function(e){if(!n.isEmptyObject(e))try{localStorage.setItem("nfl.user",JSON.stringify({data:e.data,gigyaUID:e.UID||"",hashedProfileID:e.loginIDs.username?r(e.loginIDs.username):"",hashedEmail:e.loginIDs.emails&&e.loginIDs.emails[0]?r(e.loginIDs.emails[0].toLowerCase()):"",exp:Date.now()+s.options.ttl}))}catch(e){window.console.error('gigyaHelper cannot store "nfl.user" into localStorage')}},hasUserData:function(){return null!==localStorage.getItem("nfl.user")},getUserData:function(){return JSON.parse(localStorage.getItem("nfl.user"))},deleteUserData:function(){localStorage.removeItem("nfl.user")},hasUserDataExpired:function(){if(!s.hasUserData())return!0;var e=s.getUserData();return null===e||!e.hasOwnProperty("exp")||Date.now()>e.exp},logout:function(){var r=n.Deferred();return window.gigya.accounts.logout({callback:function(e){r.resolve(e)}}),r.promise()}};return s});
