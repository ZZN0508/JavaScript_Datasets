!function(){"use strict";var t={176:function(t){t.exports.get=function(e){if(document.cookie&&document.cookie.length){for(var r,t=document.cookie.split(";"),n={},o=0,i=t.length;o<i;o++)n[(r=t[o].replace(/^(\s|\u00A0)+/g,"").split("="))[0]]=decodeURIComponent(r[1]);return e?n[e]:n}},t.exports.set=function(e,r,t){if(void 0!==e&&void 0!==r){var n=(t=t||{}).expires||{};"number"==typeof t.expires&&(n=new Date).setTime(n.getTime()+24*t.expires*60*60*1e3);r=e+"="+encodeURIComponent(r);return r+=n.toUTCString?"; expires="+n.toUTCString():"",r+=t.path?"; path="+t.path:"",r+=t.domain?"; domain="+t.domain:"",r+=t.samesite?"; samesite="+t.samesite:"",r+=t.secure?"; secure":"",document.cookie=r}},t.exports.remove=function(e,r){return(r=r||{}).expires=-1,t.exports.set(e,"",r)}}},n={};function R(e){if(n[e])return n[e].exports;var r=n[e]={exports:{}};return t[e](r,r.exports,R),r.exports}R.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return R.d(r,{a:r}),r},R.d=function(e,r){for(var t in r)R.o(r,t)&&!R.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},R.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},function(){function u(){return(Date.now().toString(36)+Math.random().toString(36).slice(2)).slice(0,17)}function r(e){return e.split(".").slice(-2).join(".")}function c(o){var n,e,i,a,r,s;n="/session/getRsidx",e={},i=function(e,r){var t,n;e?o(e):((t=null!=e?e:null==r?void 0:r.result.rccid)&&((n=t)instanceof Error&&(n={message:t.message},"code"in t&&(n.code=t.code,n.details=t.details)),t=t instanceof Error&&"need session"!==t.message?1/24/30:1/24/12,function(e,r){try{d.set("rchainid",JSON.stringify(e),r)}catch(e){}}(n,f(f({},m),{expires:t}))),o(e,r))},a=new XMLHttpRequest,r=w+"/api/v3"+n,s="rid"+u(),e.id=s,a.open("post",r,!0),a.setRequestHeader("Content-Type","application/json"),a.withCredentials=!0,a.onreadystatechange=function(){var e,r,t;4===a.readyState&&200===a.status&&(e=(r=JSON.parse(a.responseText)).success,t=r.error,r=r.result,t=null===(t=null==t?void 0:t.extra)||void 0===t?void 0:t.legacy_error,e&&null==t?i(null,r):i(new O(null!=t?{message:null===(r=t.strerror)||void 0===r?void 0:r.toLowerCase(),code:t.errno,details:{method:n,requestId:s}}:{message:"api failed",code:0,details:{method:n,requestId:s}})))},a.onerror=function(){i(new O({message:"api does not respond",code:0,details:{method:n,requestId:s}}))},a.send(JSON.stringify(e))}var n,t,o,e=R.n({"https://prime.rambler.ru":{key1:"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwTHGbo/ZwQVpkql42H/5tbOYgEVnS1w66lN4vql6TWtYi+TpeTuy9WaRJptIHhO1fKYNRV6QaRw6QJ/lHf5cl9Y8klOU02A5Mnwdq7UKo3z+SB4/cPZWyk0vGHcIE9iDLjUkOAF0bdArYEgujl1ysYMQOdb93VSCPyM2GSZJx7itnHG6melJThTe7TO63rzQHPSkn/z1tLCGcQBF/UoSSbOHDpU+ntBdX7ord/9Q2Lwid0Oy4ISBqzQSxS54SyZHXefYz+e8pD9eCtmiadPd8IU60AYJul/pDqIf4utD+kHeQPWut+abBYt5LMV5Wy4ZoAmdrRuhguNzx9r6G4xxCwIDAQAB",key2:"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAzGXeSOMjF1jaD8n3JD5lZpls0f0keRuYFqOmGgvrx9xvq0Man2Eg60TCVihZ3AhWotA0LW0pl3ZSrc1TpuObYBDT3qHB+YXdef4TBU1cI7TzK+GCp5Za+B/N1DOP9dBP71lFXNzYH1KaqQlCHSJPq5yq35QZhdAH780eaPZP0wKsbU1j6ucAu0vYndTgpxx2WmlSdY8yDfD7JZdRyzOqwyTut//LtakzzBS/guN+tTsdUds2hlAb2i/iGOiQlsrioX35x7D0pEyj/7NPY4ABgWTQAFV65OJnbiWG+fqQ6M9XwQrT/UbgeXVslYUkz5NmtGp2FlLl1fOPtLOwXhFswwIDAQAB"},"https://prime-stage01.rambler.ru":{key1:"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2U2M51P4BnHxpH59slie4xLIzxP4xNn7jPk1t4PHmLnaVsC3ytcHEcEF/lK+lBBbtCmrfVxuoXWI64KMyeonrNPscDpFlDhctbwXqsTEXx7KAxX9EUTbqY2JOMgJMgt44IhmUbrkiWdynCAsCKKrCwAIbh5vBorHEjm2eWxDRG8qAzlu0HAAK6Mn8+5cCk3nJKR0lLWj71n44aE4h7QvnG7TT3RYWjFjOLPpeF8/IlHZigecECPox5Ss2ylPDh2u8Gt4BW01T3M09FwamCeh/uzYjqneRZT3o6K7Rp92iXimxjnnw+4QWP9iACIuDQqZLpIQLhMi02E9N+j9+bhCeQIDAQAB",key2:"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEApGPr0ZzcEEJ7/eRK1/neCvduJeicYXsF17vRc8JIS+YWXVScOA6yzML3pnyN+ubnlOGBdpB8n4tb4yiNe8fxzVo+/aWOOcvcrxc5b1L1MvKP/sUIS6L7hi4p6hQGMF+cfVGqYh+iFzpwAZ9qKXVe3XBKc5ym0Pm2fKCIJ7RNMZY6pMZP8HQjpL+rFXrMgPIkkazqUqUMaudKZGmfBBbuSWUfhOyRJIkTakfExn7Thklk7f68n3sde5c1t1ttuWFhi7UcThQ3aoN4BLhuQhT0s2rNvhIdNZd6IoA+DZMIXxKjNLAXeYkcQVtUB47zVhOiAxjD2UkyhfB1o44IvOsY5wIDAQAB"}}),i=(n=function(e,r){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(e,r)},function(e,r){function t(){this.constructor=e}n(e,r),e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}),O=(o=Error,i(v,o),v),l=1===function(){var e,r=null;try{r=JSON.parse(null!==(e=window.localStorage.getItem("primeStageApi"))&&void 0!==e?e:"")}catch(e){}return r}()?"https://prime-stage01.rambler.ru":"https://prime.rambler.ru",i=function(e,n,t,o){var i=new XMLHttpRequest,r=l+"/api/v3/prime/"+n,a=u();t.id=a,"get"===e&&(r+="?"+Object.keys(t).reduce(function(e,r){return e.concat(r+"="+encodeURIComponent(t[r]&&"object"==typeof t[r]?JSON.stringify(t[r]):t[r]))},[]).join("&")),i.open(e,r,!0),i.setRequestHeader("Content-Type","application/json"),i.onreadystatechange=function(){if(4===i.readyState&&200===i.status){var e=JSON.parse(i.responseText),r=e.success,t=e.error,e=e.result;if(r&&null==t){r=i.getResponseHeader("x-server-response-signature");return r&&e&&(e.signature=r),void o(null,e)}t=null==t?"UNKNOW_ERROR":t.type+"_"+t.subtype;o(new O({message:"api failed",code:t,details:{requestId:a,method:n}}))}},i.onerror=function(){o(new O({message:"api does not respond",code:"UNKNOW_ERROR",details:{requestId:a,method:n}}))},i.send("get"===e?null:JSON.stringify(t))},a=i.bind(null,"post"),p=i.bind(null,"get","getActiveAdblockInfo"),s=i.bind(null,"post","createAdblockOrder"),d=R(176),f=function(){return(f=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var o in r=arguments[t])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e}).apply(this,arguments)},m={domain:"."+window.location.hostname.split(".").slice(-2).join("."),path:"/",samesite:"none",secure:!0},i="requestStorageAccess"in document&&"function"==typeof document.requestStorageAccess,w=(t=window.location.hostname,(i=(i?["id.rambler.ru","id.championat.com","idrambler.afisha.ru","rid.eda.ru","id.gazeta.ru","id.lenta.ru","id.moslenta.ru","id.secretmag.ru","id.motor.ru","id.passion.ru","id.wmj.ru","id.letidor.ru","id.ferra.ru","id.quto.ru","id.indicator.ru","id-loyalty.rambler-co.ru","id.eagleplatform.com"].filter(function(e){return r(e)===r(t)}):[])[0])?"https://"+i:"https://id.rambler.ru");function v(e){var r,t=o.call(this)||this;return t.name="ApiError",t.message=e.message.toString().toLowerCase(),t.code=null!==(r=e.code)&&void 0!==r?r:"unknown",t.details=e.details,t}window.primeStorage=null!==(i=window.primeStorage)&&void 0!==i?i:{};var y=window.primeStorage;y.timing=null!==(i=y.timing)&&void 0!==i?i:[],y.viewId=null!==(i=y.viewId)&&void 0!==i?i:u(),y.serialId=null!==(i=y.serialId)&&void 0!==i?i:1;function g(e){for(var r=new ArrayBuffer(e.length),t=new Uint8Array(r),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return r}function h(e){var r=(t=e.split("."))[0],e=t[1],t=t[2];return{header:I(r),payload:I(e),signature:t}}function S(){}var i=window.crypto||window.msCrypto,b=(null==i?void 0:i.subtle)||(null==i?void 0:i.webkitSubtle),A=(Object.defineProperty(T.prototype,"hasMsCrypto",{get:function(){return"msCrypto"in window},enumerable:!1,configurable:!0}),T.prototype.importKey=function(e,r,t,n,o){var i=b.importKey(e,r,t,n,o);return this.hasMsCrypto?new Promise(function(r,e){var t=i;t.addEventListener("complete",function(e){r(e.target.result)}),t.addEventListener("error",function(){e(new Error("importing a key failed"))})}):i},T.prototype.verify=function(e,r,t,n){var o=b.verify(e,r,t,n);return this.hasMsCrypto?new Promise(function(r,e){var t=o;t.addEventListener("complete",function(e){r(e.target.result)}),t.addEventListener("error",function(){e(new Error("verification a key failed"))})}):o},new T),I=function(e){var r=e.replace(/-/g,"+").replace(/_/g,"/");switch(r.length%4){case 0:break;case 2:r+="==";break;case 3:r+="=";break;default:throw new Error("illegal base64url string")}return JSON.parse(decodeURIComponent(escape(window.atob(r))))},k={RS256:{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}}},E="undefined"!=typeof window&&(null===(E=window.navigator)||void 0===E?void 0:E.userAgent)||"",P=/iPhone|iPad|iPod/i.test(E),C=/Android/i.test(E),j=function(){return(j=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var o in r=arguments[t])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e}).apply(this,arguments)},x=e()[l],q=(B.prototype.push=function(e){(e=void 0===e?S:e)()},B.prototype.api=function(n,o,i,e){void 0===i&&(i=S),!1!==(null==e?void 0:e.needSessionId)?c(function(e,r){var t;null!==(t=null==r?void 0:r.result)&&void 0!==t&&t.token?(r={params:o,sessionId:r.result.token},a(n,r,i)):i(e)}):a(n,{params:o},i)},B.prototype.getSubscription=function(o,n){void 0===n&&(n=S);function s(e,r){var t;u.overall=Date.now()-i,t=u,clearTimeout(y.timeout),y.timing.push(t),y.timeout=window.setTimeout(function(){var e,r;e=function(){var e,r=y.timing;if(y.timing=[],Array.isArray(r)&&0<r.length)try{var t=encodeURIComponent(r.sort(function(e,r){return e.start-r.start}).map(function(r){return Object.keys(r).map(function(e){return e+"-"+r[e]}).join("_")}).join("!")),n=null!==(e=y.viewId)&&void 0!==e?e:"",o=y.serialId?y.serialId++:"";(new Image).src=l+"/phtimes?view_id="+n+"&serial="+o+"&data="+t}catch(e){}},"complete"===document.readyState?e():(r=function(){e(),window.removeEventListener("load",r)},window.addEventListener("load",r))},2e3),n(e,r)}var i=Date.now(),e=null===(e=null===(e=window.performance)||void 0===e?void 0:e.timing)||void 0===e?void 0:e.navigationStart,u={start:e?i-e:0},d=!1;if(!0===window.PRIME_SSR_STATUS)return u.ssr=0,void s(null,d);function t(e,t){var r;if(e)s(e,d);else if(null!=t&&t.signature){var n=Date.now();try{var o=h(t.signature),i=1e3*parseInt(o.payload.ctime,10);if(6e5<Date.now()-i)throw new Error("signature has expired");var a=x[null===(r=o.header)||void 0===r?void 0:r.kid];!function(e,r,t){if("string"==typeof e)if("string"==typeof r){var n=e.split("."),o=n[0],i=n[1],a=n[2];if("string"!=typeof a)return t(new Error("illegal token"));var s=h(e),u=k[s.header.alg];u?(r=g(window.atob(r)),A.importKey("spki",r,u,!1,["verify"]).then(function(e){var r=o+"."+i;return A.verify(u,e,g(window.atob(a.replace(/-/g,"+").replace(/_/g,"/").replace(/\n/g,""))),g(r))}).then(function(e){e?t(null,s):t(new Error("invalid signature"))},function(e){t(e)})):t(new Error("algorithm not found"))}else t(new Error("secret must be a string"));else t(new Error("token must be a string"))}(null==t?void 0:t.signature,a,function(e,r){d=!!t.adblockInfoList&&0<t.adblockInfoList.length&&o.signature===(null==r?void 0:r.signature),u.verify=Date.now()-n,s(e,d)})}catch(e){u.verify=Date.now()-n,s(e,d)}}else s(new Error("empty signature"),d)}e=y.cache;if((null==e?void 0:e.referrer)===o.referrer&&Date.now()-(null==e?void 0:e.currentTime)<3e5)return u.cache=0,void t(null,e);var a=Date.now();Array.isArray(y.queue)?y.queue.push(function(e,r){u.wait=Date.now()-a,t(e,r)}):(y.queue=[t],c(function(r,e){var t;if(u.id=Date.now()-a,null===(t=null==e?void 0:e.result)||void 0===t||!t.token)return Array.isArray(y.queue)&&y.queue.forEach(function(e){e(r,void 0)}),delete y.queue,0;var e={params:o,sessionId:e.result.token},n=Date.now();p(e,function(r,t){u.prime=Date.now()-n,t&&(t.currentTime=Date.now(),t.referrer=o.referrer,y.cache=t),Array.isArray(y.queue)&&y.queue.forEach(function(e){e(r,t)}),delete y.queue})}))},B.prototype.createSubscriptionOrder=function(e,y){void 0===y&&(y=S);var g=e.code,h=e.project,b=e.cpsEmail,A=e.cpsPhone,r=e.useForSubscription,n=void 0!==r&&r,r=e.trial,o=void 0===r||r,I=function(e,r){var t={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&r.indexOf(o)<0&&(t[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,o=Object.getOwnPropertySymbols(e);n<o.length;n++)r.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(t[o[n]]=e[o[n]]);return t}(e,["code","project","cpsEmail","cpsPhone","useForSubscription","trial"]);g?b?c(function(e,r){var t;null!==(t=null==r?void 0:r.result)&&void 0!==t&&t.token?(r={params:{code:g,useForSubscription:n,trial:o,paymentCpsEmail:b},sessionId:r.result.token},s(r,function(e,r){var t,n,o,i,a,s,u,d,c,l,p,f,m,w,v;e?y(e):(t=r.shopId,n=r.scId,o=r.orderNumber,i=r.requestSign,a=r.orderAmount,l=r.discountPrice,s=r.tax,u=r.publicName,d=r.publicDescription,c=r.publicPicture,e=r.useForSubscription,r=["AC","ST"],parseFloat(a)&&!e||r.pop(),r=j({lang:"ru",tabs:r.map(function(e){return{tab:e}})},I),l={order:{shopId:t,scId:n,orderNumber:o,requestSign:i,cpsEmail:b,orderAmount:a,productName:g,addData:{project:h}},products:[{offer:{name:u,description:d,picture:c,price:l,tax:s,taxValue:0},count:1,total:{price:l,currencyId:"RUB"}}]},A&&(l.order.cpsPhone=A),e&&(l.order.paymentAddParams={rebillingOn:1}),(P||C)&&(l.order.paymentAddParams=j(j({},l.order.paymentAddParams),{jsonParams:{app2app:!0,"app.osType":P?"ios":"android","app.deepLink":encodeURIComponent(window.location.href)}})),p=r,f=l,m=function(e,r){r?y(null,{orderNumber:o}):y(e)},window.RamblerPayment=window.RamblerPayment||[],window.RamblerPayment.push(function(){var e=window.RamblerPayment.buildWidget("PaymentPopup",p);void 0!==e&&e.then(function(t){return t.show(),t.initializeOrder(f).then(function(){var r,e=null;t.on("close",function(){t.destroy(),m(e,r)}),t.on("fail",function(){e=new Error("payment failed")}),t.on("success",function(e){r=e})})}).catch(function(e){m(e)})}),w=function(e){e&&m(e)},(v=document.createElement("script")).src="https://payment.rambler.ru/widget/sdk.js",v.onload=function(){w(null),document.body&&document.body.removeChild(v)},v.onerror=function(){w(new O({message:"script does not loaded"}))},document.body&&document.body.appendChild(v))})):y(e)}):y(new Error("missing `cpsEmail` in params")):y(new Error("missing `code` of product in params"))},B),e=function(){var e;!Array.isArray(window.primeHelper)&&window.primeHelper||(e=window.primeHelper||[],window.primeHelper=new q,e.forEach(function(e){return e()}))};function B(){}function T(){}document.body?e():document.addEventListener("DOMContentLoaded",e,!1)}()}();
