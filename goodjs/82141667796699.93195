var dragEvent,contentMenu,hp,_CLIENTTIMEOUTERROR="Problem loading data.";function tog(e,t){return ById(e)&&(ById(e).style.display=t?"":"none"),t}function togg(e){if(ById(e)){var t=ById(e).style.display;return ById(e).style.display=t?"":"none",t}}function setHtml(e,t){ById(e)&&(ById(e).innerHTML=t)}function forAll(e,t){for(var n=document.querySelectorAll(e),r=0;r<n.length;r++)t(n[r])}function fixArrIE8(e){return e.indexOf||(e.indexOf=function(e,t){for(var n=t||0,r=this.length;n<r;n++)if(this[n]===e)return n;return-1}),e.map||(e.map=function(e,t){var n,r,o,i,s=Object(this),a=s.length>>>0;for(1<arguments.length&&(n=t),r=new Array(a),o=0;o<a;)o in s&&(i=s[o],i=e.call(n,i,o,s),r[o]=i),o++;return r}),e.filter||(e.filter=function(e){for(var t,n=Object(this),r=n.length>>>0,o=[],i=arguments[1],s=0;s<r;s++)s in n&&(t=n[s],e.call(i,t,s,n)&&o.push(t));return o}),e.reduce||(e.reduce=function(e,t){if("function"!=typeof e)throw new TypeError(e+" is not a function");var n=Object(this),r=n.length>>>0;if(0==r&&arguments.length<2)throw new TypeError("Reduce of empty array with no initial value");if(1==r&&arguments.length<2)return n[0];if(0==r&&1<arguments.length)return t;for(var o=1<arguments.length?0:1,i=1<arguments.length?t:n[0];o<r;o++)i=e(i,n[o],o,n);return i}),e}function setLocation(e){ById("txtLoc").value=e,__doPostBack("","")}function ByQuery(e,t){return e.querySelector(t)}function DragPoint(e,t){this.Col=e,this.Row=t}function DragControl(e){this.dragEvent=e,this.mc=null,this.origNext=null,this.dragContainer=e.getDragContainer(),this.dx=0,this.dy=0,this.mcPos=null}function toggleCode(e){var t=ById("ctrContent_"+e),n=ById("gc_"+e);togg("ctrCode_"+e)?(n.innerHTML="<span>OK</span>",n.title&&(n.setAttribute("data-title",n.title),n.title=""),t.style.opacity=.4):(n.innerHTML='<span>&lt;</span><span class="chCodeSlash">/</span><span>&gt;</span>',n.title=n.getAttribute("data-title"),t.style.opacity=1)}"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),ById("fHP")&&(dragEvent=new function(){var a=this;this.columns=[];for(var e=0;e<=2;e++){var t=ById("Content_CA_Column"+e);this.columns.push(t),t.appendChild(document.createElement("div"))}function n(e){var t,e=(t=e,e=new Object,0<=navigator.userAgent.indexOf("MSIE")?(e.target=event.srcElement,e.event=event):(e.target=t.target,e.event=t),e);a.target=e.target,a.event=e.event}this.blocks=[],this.headers=[],this.DC=null,this.getDragContainer=function(){return a.DC||(a.DC=ById("DragContainer")),a.DC},this.start=function(e){return n(e),this.oldMouseMove=document.onmousemove,this.oldMouseUp=document.onmouseup,this.control=new DragControl(this),this.control.PrepareDrag(),document.onmousemove=function(e){return a.move(e)},!(document.onmouseup=function(e){return a.end(e)})},this.move=function(e){return n(e),this.control.Drag(),document.selection&&document.selection.empty(),!1},this.end=function(e){return document.onmousemove=this.oldMouseMove,document.onmouseup=this.oldMouseUp,this.control.EndDrag(),function(){if(a.control.Dragged){var e,t="",n=0;for(e in a.columns){var r=a.columns[e],o=0;if(null!=r)for(var i=0;i<r.childNodes.length;i++){var s=r.childNodes[i];a.control.isSupported(s)&&(t+=s.getAttribute("ACID")+"="+n.toString()+o.toString()+";",o++)}n++}ById("Content_CA_dataTransfer").src=location.protocol+"//"+location.host+"/_/hp/UpdateClientConfiguration.aspx?data="+t}}(),this.control=null,this.event=null,this.target=null,document.selection&&document.selection.empty(),!1};for(var r=document.querySelectorAll(".trH"),e=0;e<r.length;e++){this.headers.push(r[e].id);var o=r[e].getAttribute("DC");this.blocks[o]=ById(o),r[e].style.cursor="move",r[e].onmousedown=function(e){var t=((e=e||window.event).target||e.srcElement).nodeName;return"A"!=t&&"SPAN"!=t&&"path"!=t&&"svg"!=t&&a.start(e)}}}),DragControl.prototype={getOffset:function(e,t){var n=e.getBoundingClientRect(),e=document.querySelector(".main-holder").getBoundingClientRect();return t?n.left-e.left:n.top-e.top},getCoordinates:function(e){for(var t=0,n=0;n<this.dragEvent.columns.length;n++){for(var r=this.dragEvent.columns[n],o=0,i=0;i<r.childNodes.length;i++){var s=r.childNodes[i];if(s==e)return new DragPoint(t,o);this.isSupported(s)&&o++}t++}return null},PrepareDrag:function(){var e=this.dragEvent.target,t=this.dragEvent.event;this.mc=this.getContainer(e),this.origNext=this.mc.nextSibling,this.mcPos=this.getCoordinates(this.mc);e=this.dragContainer;this.dx=t.clientX-this.getOffset(this.mc,!0),this.dy=t.clientY-this.getOffset(this.mc,!1),e.innerHTML=this.mc.innerHTML,e.className=this.mc.className,e.backgroundColor=this.mc.backgroundColor;t.clientX;e.style.left=this.getOffset(this.mc,!0)+"px",e.style.top=this.getOffset(this.mc,!1)+"px",e.style.height=this.mc.offsetHeight+"px",e.style.width=this.mc.offsetWidth+"px",("Win32"==navigator.platform||0<=navigator.userAgent.indexOf("Gecko"))&&(e.style.filter="alpha(Opacity=75)",e.style.opacity=.75)},Drag:function(){this.dragEvent.target;var e=this.dragEvent.event,t=this.dragContainer;t.style.left=e.clientX-this.dx+"px",t.style.top=e.clientY-this.dy+"px",this.DragOver()},DragOver:function(){var e,t=this.dragContainer,n=this.dragEvent.event;if(n.clientX!=this.cacheX||n.clientY!=this.cacheY){this.cacheX=n.clientX,this.cacheY=n.clientY;var r,o=t.offsetLeft,i=t.offsetTop,s=(this.getOffset(t,!0),this.getOffset(t,!1),1e6),a=1e6,l=null,d=-1;for(r in this.dragEvent.columns){var c,u=this.dragEvent.columns[r];null!=u&&((c=(c=o-this.getOffset(u,!0))<0?-c:c)<s?(s=c,(a=this.getOffset(u,!1))<0&&(a=-a),l=u,d=r):c!=s||(c=(c=this.getOffset(u,!1))<0?-c:c)<i&&i<c+u.clientHeight&&(a=c,l=u,d=r))}if(a=1e6,null!=l)for(var h=0;h<l.childNodes.length;h++){var f,g=l.childNodes[h];"DIV"==g.nodeName&&((f=(f=i-this.getOffset(g,!1))<0?-f:f)<a&&(a=f,e=g))}this.isAllowedToDropTo(this.mc.getAttribute("acid").split("|")[0],d)&&null!=e&&this.mc.nextSibling!=e&&this.mc!=e&&e.parentNode.insertBefore(this.mc,e)}},Reset:function(){this.origNext.parentNode.insertBefore(this.mc,this.origNext)},Contains:function(e,t){for(var n=0,n=0;n<e.childNodes.length;n++)if(e.childNodes[n]==t)return!0;return!1},EndDrag:function(){var e=this.getCoordinates(this.mc);this.Dragged=!1,null!=this.mcPos&&null!=e&&(this.Dragged=this.mcPos.Col!=e.Col||this.mcPos.Row!=e.Row),this.isAllowedToDropTo(this.mc.getAttribute("acid").split("|")[0],e.Col)||(this.Dragged=!1,this.Reset()),this.mc=null,this.origNext=null,this.dragContainer.innerHTML="",this.dragContainer.style.height="0px",this.dragContainer.style.width="0px"},isAllowedToDropTo:function(e,t){return 2!=t||0<=["WI","ST","WT","WTHR","RS","DI","LS"].indexOf(e)},getContainer:function(e){var t=e;do{if(t.getAttribute("acid"))return t}while((t=t.parentNode).parentNode);return null},isSupported:function(e){return"DIV"==e.nodeName&&e.getAttribute("acid")}},ById("fHP")&&(contentMenu=new function(){function i(e,t){t?localStorage.menuState|=1<<e:localStorage.menuState&=65535^1<<e}function s(e){(dt=e.getAttribute("data-needtoload"))&&!e.getAttribute("data-loaded")&&(ById("Content_CA_dataTransfer").src=location.protocol+"//"+location.host+"/_/hp/Controls/AsyncMenu.aspx?CID="+e.id+"&Menu="+dt)}this.addCustomRSS=function(){ById("hdCustomRSS").value="1",ById("fHP").submit()},this.tog=function(e,t,n){var r=e+"_dvChild",o=togg(r),e=ById(e+"_dvGroupTitle");i(t+1,o),o?lib.addClass(e,"open"):lib.removeClass(e,"open"),s(ById(r))},forAll("[data-addblock]",function(e){e.onclick=function(){return ById("hnb").value=e.getAttribute("data-addblock"),ById("fHP").submit(),!1}}),ById("addContent").onclick=function(){var e=togg("addContentBlock");setHtml("addContentPlus",e?"&ndash;":"+"),i(0,e)},(m=document.querySelector("[data-needtoload]"))&&!m.style.display&&s(m)}),ById("fHP")&&(hp=new function(){var e,t=this;function n(e){var t=ById(e+"trDz"),n=ById(e+"ae");togg(e+"trPz")?(n.firstChild.className="i close",t.style.opacity=.4):(n.firstChild.className="i edit",t.style.opacity=1)}this.failAfter=function(e,t){setTimeout(function(){e&&"1"!=e.getAttribute("data-loaded")&&(e.innerHTML=_CLIENTTIMEOUTERROR)},1e3*t)},this.selBackground=function(e,t,n){for(var r in ById(t).value=n,e.parentNode.childNodes){r=e.parentNode.childNodes[r];r.style&&(r.style.border=r==e?"solid 2px black":"")}},forAll(".settings",function(e){e.onclick=function(){return n(e.id.substr(0,e.id.length-2)),!1}}),this.openSettings=function(e){for(;e&&!e.getAttribute("acid");)e=e.parentNode;n(e.id.substr(0,e.id.length-2))},ById("hpWeather")&&setHtml("hpWeather",'<div style="display:none"><iframe src="'+location.protocol+"//"+location.host+"/_/hp/Controls/AsyncWeatherControl.aspx?"+ById("hpWeather").getAttribute("data-pars")+'" id="wrifrm" class="ifrm" style="display:'+(navigator.userAgent&&0<navigator.userAgent.indexOf("Gecko")?"inline":"none")+'"></iframe></div>'),ById("hpHoroscope")&&(e=new Date,setHtml("hpHoroscope",'<div style="display:none"><iframe src="'+location.protocol+"//"+location.host+"/_/hp/Controls/AsyncHoroscopeControl.aspx?birthday="+ById("hpHoroscope").getAttribute("data-birthday")+"&date="+e.getDate()+"-"+(e.getMonth()+1)+"-"+e.getFullYear()+'" id="wrifrm" class="ifrm" style="display:'+(navigator.userAgent&&0<navigator.userAgent.indexOf("Gecko")?"inline":"none")+'"></iframe></div>')),forAll("div.bgCells",function(e){var t,n=e.getAttribute("data-inp"),r=["White","#F8F8F8","#F0F0F0","#FEF2F2","#FFF6F1","#FFFBF1","#FEFFF1","#F9FFF1","#F4FFF1","#F1FFF3","#F1FFF8","#F1FFFD","#F1FDFF","#F1F8FF","#F1F3FF","#F4F1FF","#F9F1FF"],o=["White","#E4E4E4","#C8C8C8","#FECACA","#FFDCC9","#FFEFC9","#FBFFC9","#E8FFC9","#D4FFC9","#C9FFD1","#C9FFE4","#C9FFF7","#C9F7FF","#C9E4FF","#C9D1FF","#D4C9FF","#E7C9FF"],i="";for(t in r)i+='<span style="'+(ById(n).value==r[t]?"border:solid 2px black;":"")+"background:"+o[t]+'" onclick="hp.selBackground(this, \''+n+"', '"+r[t]+"')\"></span>";e.innerHTML=i}),forAll("[data-timeout]",function(e){t.failAfter(e,e.getAttribute("data-timeout"))})}),forAll(".chbGetCode",function(e){e.onclick=function(){return toggleCode(e.id.replace("gc_","")),!1}});var diacriticsRemover=new function(){var o;this.remove=function(e){return function(){if(!o){var e=[{b:"a",l:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{b:"b",l:"bⓑｂḃḅḇƀƃɓ"},{b:"c",l:"cⓒｃćĉċčçḉƈȼꜿↄ"},{b:"d",l:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{b:"e",l:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{b:"f",l:"fⓕｆḟƒꝼ"},{b:"g",l:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{b:"h",l:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{b:"hv",l:"ƕ"},{b:"i",l:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{b:"j",l:"jⓙｊĵǰɉ"},{b:"k",l:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{b:"l",l:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{b:"m",l:"mⓜｍḿṁṃɱɯ"},{b:"n",l:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{b:"o",l:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{b:"p",l:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{b:"q",l:"qⓠｑɋꝗꝙ"},{b:"r",l:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{b:"s",l:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{b:"t",l:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{b:"u",l:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{b:"v",l:"vⓥｖṽṿʋꝟʌ"},{b:"w",l:"wⓦｗẁẃŵẇẅẘẉⱳ"},{b:"x",l:"xⓧｘẋẍ"},{b:"y",l:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{b:"z",l:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}];o={};for(var t=0;t<e.length;t++)for(var n=e[t].l.split(""),r=0;r<n.length;r++)o[n[r]]=e[t].b}}(),e.toLocaleLowerCase().replace(/[^\u0000-\u007E]/g,function(e){return o[e]||e})}},hangman=new function(){this.guess="";var a,l,d,c,n,u=this,o=0,e=ById("hangman");function r(e){a=e,c=diacriticsRemover.remove(e).toLocaleUpperCase()}e&&(d=(t=e.getAttribute("data-tr"))?JSON.parse(t):{lost:"Sorry, you lost. See if your friends can solve it!",won:"You won in {0} guesses. See if your friends can beat you!",shWon:"I beat Hangman in {0} guesses! Can you beat me?",shLost:"I couldn't figure out this word in Hangman. Can you?"},this.newGame=function(e){lib.show("hmWait"),l=c=a="",n=e,lib.AsyncRequest("/_/game/hangman.ashx?lang="+info.PageLang+"&r="+Math.random())},this.update=function(){var e=ById("tfd_hm_input");if(!e.disabled){for(var t,n="",r=0;r<e.value.length;r++)if(t=e.value.substr(r,1),n=diacriticsRemover.remove(t).toLocaleUpperCase(),t.length!=n.length&&(n=t),!/[0-9,\.;\- =`\/\[\]#\!\?\$_\*\)\(\\\|\>\<@%\^&\+\~\{\}\:\"\']/.test(n)&&u.guess.indexOf(n)<0){u.guess+=n,c.indexOf(n)<0&&(ById("hm_wrong").innerHTML+=n);break}e.value=n;for(r=0;r<ById("hm_wrong").innerHTML.length;r++)ById("tfd_hm_td"+r).style.backgroundColor="transparent";ById("hm_word").innerHTML="";for(var o="transparent"==ById("tfd_hm_td9").style.backgroundColor,r=0;r<a.length;r++)ById("hm_word").innerHTML+=0<=u.guess.indexOf(c.substr(r,1))||o?a.substr(r,1):"_";if(ById("hm_word").innerHTML.indexOf("_")<0){if(o)goal.reset("gh"),ById("tfd_hm_span").style.backgroundPosition="0 -220px",ById("hm_result").innerHTML=d.lost+tfdShare.getBtns("h"+l+"0",d.shLost);else{ById("tfd_hm_span").style.backgroundPosition="0 0";for(r=0;r<=9;r++)ById("tfd_hm_td"+r).style.backgroundColor="transparent";for(var i=ById("hm_wrong").innerHTML.length,r=0,s="";r<c.length;r++)s.indexOf(c.charAt(r))<0&&(s+=c.charAt(r));info.isLogin?(gg=goal.getMsg("gh"))?ById("hm_result").innerHTML=gg:ById("hm_result").innerHTML=d.won.replace("{0}",i+s.length)+tfdShare.getBtns("h"+l+String.fromCharCode(65+i),d.shWon.replace("{0}",i+s.length)):(ById("hm_result").innerHTML=tfdShare.getBadgeHTML("gh"),tfdShare.isBadge&&lib.hide("hmWr")),fconn.ev("gh")}e.disabled=!0,ById("tfd_hm_a").style.visibility="",window.sessionStorage&&(sessionStorage.hmPlayed=1),setTimeout(function(){ById("tfd_hm_new_game").focus()},50)}""!=n&&"function"==typeof regShare&&regShare("gh")}},this.init=function(e){if(e||!ById("tfd_hm_input").disabled){ById("tfd_hm_span").style.backgroundPosition="0 -110px";var t=ById("Content_CA_HM_0_BC"),n=(n=null!=t?t.style.backgroundColor:null)||"white";if(e||1==o)for(var r=0;r<=9;r++)ById("tfd_hm_td"+r).style.backgroundColor=n;o+=1,lib.show("hmWr")}},this.refresh=function(){lib.hide("hmWait"),ById("hangman").style.visibility="visible",ById("hmShare")&&(ById("hmShare").innerHTML=""),u.guess="",ById("tfd_hm_a").style.visibility="hidden",o&&u.init(1),o++;var e=ById("tfd_hm_input");e.disabled=!1,n&&(setTimeout(function(){e.focus()},50),n=0),setHtml("hm_result",""),setHtml("hm_wrong",e.value=""),u.update()},this.learn=function(){top.location="/"+encodeURIComponent(a.toLocaleLowerCase())},this.callback=function(e,t){r(e),l=t,u.refresh()},window.sessionStorage&&sessionStorage.hmPlayed?u.newGame():(r(e.getAttribute("data-word")),l=e.getAttribute("data-key"),u.refresh()))},bee=new function(){var o,n,r=2,i=this,e=ById("TfdBee");e&&(this.newGame=function(){setHtml("beeShare",""),lib.hide("tfd_bee_nt"),setHtml("tfd_bee_answ",""),lib.show("beeAnsBtn"),ById("tfd_bee_uword").style.backgroundColor="",ById("tfd_bee_uword").value="",lib.AsyncRequest("/_/game/bee.ashx?l="+r+"&r="+Math.random())},this.level=function(e){e.value!=r&&(r=+e.value,i.newGame())},this.answer=function(){lib.show("beeNewWord"),lib.show("beeNew");var e=ById("tfd_bee_uword"),t=["Easy","Hard","Expert"];e.value.trim().toLowerCase()==o.toLowerCase()?(setHtml("tfd_bee_answ",'<a class=u href="/'+encodeURIComponent(o)+'">Learn the word</a>'),ById("tfd_bee_nt").style.color="#27937d",info.isLogin?(gg=goal.getMsg("gb"))?ById("tfd_bee_nt").innerHTML=gg:ById("tfd_bee_nt").innerHTML="You got it right! See if your friends can spell it! "+tfdShare.getBtns("b"+n+(r+4),"I correctly spelled this "+t[r-1]+" Level word in Spelling Bee! Can you?"):ById("tfd_bee_nt").innerHTML=tfdShare.getBadgeHTML("gb"),e.style.backgroundColor="#F1FFF3",fconn.ev("gb@"+r)):(setHtml("tfd_bee_answ",'Correct answer: <a style="text-decoration:underline" href="/'+encodeURIComponent(o)+'">'+o+"</a>"),ById("tfd_bee_nt").style.color="#e76049",goal.reset("gb"),ById("tfd_bee_nt").innerHTML="Sorry, that's incorrect. See if your friends can spell it! "+tfdShare.getBtns("b"+n+r,"I couldn't spell this "+t[r-1]+" Level word in Spelling Bee. Can you?"),e.style.backgroundColor="#FFC0CB"),lib.hide("beeAnsBtn"),lib.show("tfd_bee_nt"),lib.show("tfd_bee_difficulty"),"function"==typeof regShare&&regShare("gb"),window.sessionStorage&&(sessionStorage.beePlayed=1)},this.keyDown=function(e,t){if(t.ctrlKey&&13==e){t=document.querySelector("#tfd_bee_sound .snd-icon-plain");return t&&t.click(),!1}return 13!=e&&10!=e||(ById("beeAnsBtn").style.display?i.newGame(1):ById("tfd_bee_uword").value&&i.answer(),!1)},this.callback=function(e,t,n,r){o=e,setHtml("tfd_bee_sound","<span class=snd data-ttl='Ctrl+Enter' data-snd="+t+"></span>"),setHtml("tfd_bee_def",n),snd.fill([ById("tfd_bee_sound").firstChild])},window.sessionStorage&&sessionStorage.beePlayed?i.newGame():(o=e.getAttribute("data-word"),n=e.getAttribute("data-key")))},matchUp=new function(){var e,n=-1,r=[-1,-1,-1,-1,-1],o=ById("muClear");function i(e){return+e.id.substr(4)}function s(e){ById("muTitleL").style.visibility=e?"":"hidden"}function a(e){ById("muTitleR").style.visibility=e?"":"hidden"}o&&(e=ById("muSubmit"),forAll("[id^=mu_a]",function(t){t.onclick=function(){0<=r[i(this)]||(o.disabled=!1,s(0),a(1),n=i(this),forAll("[id^=mu_a]",function(e){r[i(e)]<0&&(e.className="mu_"+(e==t?"S":"E")+i(e))}),forAll("[id^=mu_b]",function(e){fixArrIE8(r).indexOf(i(e))<0&&(e.className="mu_H"+n)}))}}),forAll("[id^=mu_b]",function(t){t.onclick=function(){var e;"function"==typeof regShare&&regShare("gm"),0<=fixArrIE8(r).indexOf(i(this))||(a(0),e=+this.id.substr(4),t.className="mu_S"+n,r[n]=e,0<=fixArrIE8(r).indexOf(-1)&&s(1),forAll("[id^=mu_a]",function(e){r[i(e)]<0&&(e.className="mu_H"+i(e))}),forAll("[id^=mu_b]",function(e){fixArrIE8(r).indexOf(i(e))<0&&(e.className="mu_E"+n)}))}}),o.onclick=function(){r=[-1,-1,-1,-1,-1],forAll("[id^=mu_a]",function(e){e.className="mu_D"+i(e)}),forAll("[id^=mu_b]",function(e){e.className="mu_E"+i(e)}),o.disabled=!0,s(1),a(0)},e.onclick=function(){for(var e="//"+("es"==info.PageLang?"es":"www")+".thefreedictionary.com/_/MatchUp.aspx?res="+encodeURIComponent(r),t=0;t<=4;t++)e+="&tfd_a"+t+"="+encodeURIComponent(ById("mu_a"+t).innerHTML),e+="&tfd_b"+t+"="+encodeURIComponent(ById("mu_b"+t).innerHTML);top.location=e})},mismatch=new function(){var e,n=-1,r=[-1,-1,-1,-1,-1],o=ById("mmClear");function i(e){return+e.id.substr(4)}function s(e){ById("mmTitleL").style.visibility=e?"":"hidden"}function a(e){ById("mmTitleR").style.visibility=e?"":"hidden"}o&&(e=ById("mmSubmit"),forAll("[id^=mm_a]",function(t){t.onclick=function(){0<=r[i(this)]||(o.disabled=!1,s(0),a(1),n=i(this),forAll("[id^=mm_a]",function(e){r[i(e)]<0&&(e.className="mm_"+(e==t?"S":"E")+i(e))}),forAll("[id^=mm_b]",function(e){fixArrIE8(r).indexOf(i(e))<0&&(e.className="mm_H"+n)}))}}),forAll("[id^=mm_b]",function(t){t.onclick=function(){var e;"function"==typeof regShare&&regShare("gm"),0<=fixArrIE8(r).indexOf(i(this))||(a(0),e=+this.id.substr(4),t.className="mm_S"+n,r[n]=e,0<=fixArrIE8(r).indexOf(-1)&&s(1),forAll("[id^=mm_a]",function(e){r[i(e)]<0&&(e.className="mm_H"+i(e))}),forAll("[id^=mm_b]",function(e){fixArrIE8(r).indexOf(i(e))<0&&(e.className="mm_E"+n)}))}}),o.onclick=function(){r=[-1,-1,-1,-1,-1],forAll("[id^=mm_a]",function(e){e.className="mm_D"+i(e)}),forAll("[id^=mm_b]",function(e){e.className="mm_E"+i(e)}),o.disabled=!0,s(1),a(0)},e.onclick=function(){for(var e="//"+("es"==info.PageLang?"es":"www")+".thefreedictionary.com/_/MatchUp.aspx?mismatch=1&res="+encodeURIComponent(r),t=0;t<=4;t++)e+="&tfd_a"+t+"="+encodeURIComponent(ById("mm_a"+t).innerHTML),e+="&tfd_b"+t+"="+encodeURIComponent(ById("mm_b"+t).innerHTML);top.location=e})};window.observables=new function(){var o=[];function n(e){function n(){var e=arguments;if(1!==e.length)return o.length&&o[o.length-1].callback(n),n.val;e=n.chk(e[0]);n.val!==e&&(n.val=e,n.chgd())}return n.chk=function(e){return e instanceof Array?e.slice(0):e},n.val=n.chk(e),n.subs=[],n.subscribe=function(e,t){"function"==typeof e&&n.subs.push(e)&&t&&e(n.val,n)},n.chgd=function(){for(var e=n.val,t=0;t<n.subs.length;t++)n.subs[t](e,n)},n}this.observable=function(e){return"undefined"==typeof ko?n(e):ko.observable(e)},this.computed=function(e){return"undefined"==typeof ko?function(e){function n(){return n.val()}n.subs=[],n.val=e,n.subscribe=function(e,t){"function"==typeof e&&n.subs.push(e)&&t&&e(n.val(),n())},n.chgd=function(){for(var e=n.val(),t=0;t<n.subs.length;t++)n.subs[t](e,n)};var t,r=[];for(t in o.push({callback:function(e){r.push(e)}}),e(),o.pop(),r)r[t].subscribe(n.chgd);return n}(e):ko.computed(e)},this.observableArray=function(e){if("undefined"!=typeof ko)return ko.observableArray(e);var t=n();return t.chk=function(e){return e instanceof Array?[].concat(e):[]},t.removeAll=function(){t([])},t.push=function(e){t(t().concat([e]))},t(e),t}};var shBtns,isMM,grammarQuiz=new function(){this.selected=function(e){ById("gqAnsBtn").disabled=!1},this.submit=function(){lib.hide("gqBtnsStart");for(var e=document.querySelectorAll('#grammarQuiz input[type="radio"]'),t=0;t<e.length;t++){var n=e[t],r=n.nextSibling,o="cr"==n.className;n.checked?(r.className=o?"aCrU":"aWr",lib.show(o?"gqBtnsRight":"gqBtnsWrong"),o?fconn.ev("ggq"):goal.reset("ggq")):r.className=o?"aCr":"aOth",n.disabled=!0}},this.restart=function(){lib.AsyncRequest("/_/game/grammarQuiz.ashx?&r="+Math.random())},this.callback=function(e){var t=JSON.parse(e);lib.hide("gqBtnsRight"),lib.hide("gqBtnsWrong"),lib.show("gqBtnsStart"),ById("gqAnsBtn").disabled=!0,ById("gqQuestion").innerHTML=t.question;for(var n="",r=0;r<t.answers.length;r++)n+='<input type="radio" name="gQuiz" onclick="grammarQuiz.selected(this)"'+(r+1==t.corrAnsNum?' class="cr"':"")+' id="opt'+r+'"><label for="opt'+r+'">'+t.answers[r]+"</label><br>";ById("gqAnswers").innerHTML=n,ById("grammarQuiz").setAttribute("data-url",t.url)},this.learn=function(){location.href="//www.thefreedictionary.com/"+ById("grammarQuiz").getAttribute("data-url")+".htm"}},wm=new function(){var d,c=[],u=0<=navigator.userAgent.indexOf("MSIE 8"),h=0,f=1,g=0,m=0,b=0,p=null,w=null,y=[0,0,0,2,3,5,8,13,21,34,55,89];function o(){u&&p||window.sessionStorage&&(sessionStorage["wm-timed"]=JSON.stringify({sh:d,data:c,sortABC:g}))}var v=new function(){function o(e){e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}function i(e,t,n){return Math.round((t-e)*n+e)}this.blendColors=function(e,t,n){return e=o(e),t=o(t),"#"+r((n={r:i(e.r,t.r,n),g:i(e.g,t.g,n),b:i(e.b,t.b,n)}).r)+r(n.g)+r(n.b);function r(e){e=e.toString(16);return 1==e.length?"0"+e:e}}};function i(l,d,c){function u(){l.getContext("2d").clearRect(0,0,l.width,l.height)}"function"==typeof l.getContext&&l.getContext("2d")&&(d.started.subscribe(function(){d.started()||u()}),d.elapsed.subscribe(function(){var e,t,n,r,o,i,s,a;u(),e=d.elapsed(),t=d.duration(),n=l.getContext("2d"),r=-Math.PI/2,o=2*Math.PI*e/t-Math.PI/2,i=l.width/2,s=l.height/2,a=Math.min(i,s)-c/2,n.beginPath(),n.arc(i,s,a,r,o,!0),n.lineWidth=c,e=t-e,n.strokeStyle=30<e?"#2ecc71":15<e?v.blendColors("#2ecc71","#ffdd00",(30-e)/15):v.blendColors("#ffdd00","#ff0000",(15-e)/15),n.stroke()}))}function s(){var r=this,o=null,i=null,s=null,a=null;function l(){o=null;var e=s+(new Date-a)/1e3;if(!r.started()||e>=r.duration())return r.elapsed(r.duration()),void r.started(!1);r.elapsed(e),o=setTimeout(l,1e3*i)}this.elapsed=observables.observable(),this.duration=observables.observable(),this.started=observables.observable(),this.start=function(e,t,n){i=n,null!=o&&clearTimeout(o),a=new Date,s=e,r.elapsed(e),r.duration(t),r.started(!0),o=setTimeout(l,1e3*i)}}function a(d,e,c,u){var h=this;function f(e){var t=this;this.character=observables.observable(),this.selected=observables.observable(!1),this.position=observables.observable(),this.top=observables.observable(),this.left=observables.observable(),this.tryToggle=function(){e.onletterclick(t)}}var g=d/2,m=e/2,r=[],o=[];function t(e){var t,n,r,o,i=h.letters();if(i.length!==e.length){h.letters.removeAll();for(var s=null,a=0;a<e.length;a++){(s=new f(h)).position(a);var l=(l=e.length,t=a,o=r=n=void 0,n=2*Math.PI/(l-1),r=d/2-(d-3*c)/4-.5*c,o=g-c/2,l=m-u/2,0<t&&(o-=Math.cos(n*t)*r,l-=Math.sin(n*t)*r),{left:o,top:l});s.left(l.left),s.top(l.top),s.character(e[s.position()]),h.letters.push(s)}}else for(var a in i)i[a].character(e[i[a].position()])}this.disabled=observables.observable(!1),this.letters=observables.observableArray(),this.selectedChars=observables.observable(o),this.setNewWord=function(e){t(e)},this.unselectLast=function(){0<r.length&&h.onletterclick(r[r.length-1])},this.onletterclick=function(e){if(!h.disabled()){if(e.selected())for(var t=r.length-1;0<=t;t--){var n=r[t];if(n.selected(!1),r.pop(),o.pop(),n===e)break}else e.selected(!0),r.push(e),o.push(e.character());h.selectedChars(o)}},this.unselectAll=function(){for(var e in r)r[e].selected(!1);r=[],o=[],h.selectedChars(o)}}function _(e,t){var n,r=this,o=new s;i(e,o,t);this.roundStatus=observables.observable(),this.timeLeftInSeconds=observables.observable(),this.roundTimeInSeconds=function(){return n},o.elapsed.subscribe(function(e){r.timeLeftInSeconds(Math.floor(n-e))}),o.started.subscribe(function(e){e||r.roundStatus()==_.roundStatusType.started&&(r.timeLeftInSeconds(0),r.roundStatus(_.roundStatusType.timePassed),r.timeLeftInSeconds(null))}),this.timeLeftToString=observables.computed(function(){var e=r.timeLeftInSeconds();if(null==e)return"";var t=Math.floor(e/60),e=e%60;return(10<=t?t:"0"+t)+":"+(10<=e?e:"0"+e)}),this.init=function(e){n=e,r.roundStatus(_.roundStatusType.notStarted),r.timeLeftInSeconds(null)},this.start=function(e){r.timeLeftInSeconds(null),!isNaN(n)&&0<n?o.start(e||0,n,.04):n=void 0,r.roundStatus(_.roundStatusType.started)},this.cancel=function(e){r.roundStatus(e?_.roundStatusType.savedForLater:_.roundStatusType.canceled),o.started(!1)}}function I(e,t,n,r){e%=100;if(11<=e&&e<=19)return r;switch(e%=10){case 1:return t;case 2:case 3:case 4:return n;default:return r}}function l(e){var t;ById("wm_error").innerHTML=e||"",g?ById("rAlphabetical").checked=!0:ById("rChronological").checked=!0,null!=p&&(p.wordwheel.unselectAll(),f||u||(p.wordwheel.setNewWord(c[0].word),h||p.currentRound.roundStatus()!=_.roundStatusType.started&&(p.currentRound.init(120),p.currentRound.start(null==w?0:(new Date-w)/1e3)))),p||(ById("wm_word").innerHTML="<div class='wm_w'><a href='/"+c[0].word.toLowerCase()+"'>"+c[0].word.toUpperCase()+"</a></div>"),b=fixArrIE8(c).filter(function(e){return e.found}).length,ById("wm_state").innerHTML=ById("wmStateString").innerHTML.replace("#f",b).replace("#t",c.length-1)+" ("+Math.round(100*b/(c.length-1))+"%)",p&&(t=fixArrIE8(c).reduce(function(e,t){return t.found?e+(y[t.word.length]||0):e},0),e=I(b,ById("wm_wh_n1word").innerHTML,ById("wm_wh_n4words").innerHTML,ById("wm_wh_n5words").innerHTML).replace("{0}",b+"/"+(c.length-1)),t=I(b,ById("wm_wh_n1point").innerHTML,ById("wm_wh_n4points").innerHTML,ById("wm_wh_n5points").innerHTML).replace("{0}",t),ById("wm_wh_results").innerHTML=e+"<br/>"+t);for(var n=c.slice(1),r=(n=g?n.sort(function(e,t){return e.word<t.word?1:-1}):n.sort(function(e,t){return e.found==t.found?e.word<t.word?1:-1:e.found>t.found?1:-1})).length,o="",i=h||b==c.length-1;0<r--;){var s,a=n[r],l=a.word;(s="*"!=l[0])||(l=l.substr(1)),a.found>m&&(m=a.found),(!p&&h||a.found)&&(s=(!p||i)&&s,o+="<div class='"+(p?"wm_a wh":a.found?"wm_a":"wm_ar")+"'>"+(p?"":"<span class='wmhr'>&#9679;</span>&nbsp;")+"<a href='"+(s?"/"+l.toLowerCase():"javascript:void(0)")+"' "+(s?"":"style='cursor:default;'")+">"+l.toUpperCase()+"</a></div>")}setHtml("wm_answers",o),lib.show("wm_game"),tog("wm_addf",!i),tog("wm_answer",!i&&!p),tog("wm_wordhub-link",i&&p&&!f),tog("wmRegNote",2<=b&&!info.isLogin&&!p),tog("wmShNote",2<=b&&info.isLogin&&!p)&&setHtml("wmShNote0",tfdShare.getBtns("w"+b+"q"+d.key,d.msg.replace("#f",b).replace("#t",c.length-1))),tog("wm_wordwheel-mode",null!=p),tog("wm_state",null==p),tog("wm_radio",null==p),tog("wm_wh_wheel",null!=p&&!f),tog("wm_wh_results",null!=p&&!f),tog("wm_wh_time-left",null!=p&&!f),tog("wm_wh_logo",null!=p&&f),tog("wm_wh_newuser",null!=p&&f),tog("wm_answers",null==p||!f),tog("wm_new_game",null==p),tog("wm_wh_selected-chars",!i),tog("wm_legacy-mode",null==p),null!=p&&(p.wordwheel.disabled(i),ById("wm_wordwheel-mode").className=ById("wm_wordwheel-mode").className.replace(" disabled","")+(i?" disabled":""),i||ById("wordMaker").focus())}function B(e){for(var t,n="";0<e.length;)n+=e[t=Math.floor(Math.random()*e.length)],e=e.substr(0,t)+e.substr(t+1);return n}function t(e){if(e){"en"==info.PageLang&&(e=diacriticsRemover.remove(e)),"function"==typeof regShare&&regShare("gw");for(var t=c.length-1;0<t;){if(c[t].word.toLowerCase()==e.toLowerCase()){var n=c[t].found;return n||(c[t].found=m+1,l(),null==p&&info.isLogin&&fconn.isFC()&&fc.wm.addWord(e,null,function(){c[t].found=0,l("Couldn't record word. Please check your Internet connection.")}),null==p||info.isLogin&&fconn.isFC()||o()),ById("wm_new_word").value="",!n}t--}ById("wm_new_word").style.color="red"}}_.roundStatusType={notStarted:0,started:1,canceled:2,savedForLater:3,timePassed:4,allWordsFound:5,alreadyPlayed:6},this.haveSavedSeed=function(e){lib.show("wmSaveNote"),setHtml("wmSavedSeed",e)},this.goToReg=function(){var e,t,n;h||((e=document.createElement("form")).setAttribute("method","post"),e.setAttribute("action","https://secure.thefreedictionary.com/Registration.aspx?wm"),(t=document.createElement("input")).setAttribute("type","hidden"),t.setAttribute("name","wordMakerGameState"),n=info.PageLang+";"+c[0].word+";"+fixArrIE8(c).filter(function(e){return e.found}).map(function(e){return e.word}).join(),t.setAttribute("value",n),e.appendChild(t),document.body.appendChild(e),e.submit())},this.answer=function(){var e,t,n,r;h=1,l(),null!=p?(e=info.PageLang,t=c[1].word,n=fixArrIE8(c).filter(function(e){return e.found}).map(function(e){return e.word}),r=c.length-1,lib.AsyncRequest(fconn.URL+"api/wordhub/endGame.ashx?lang="+encodeURIComponent(e)+"&seed="+encodeURIComponent(t)+"&wordsFound="+encodeURIComponent(n.join(","))+"&wordsTotal="+encodeURIComponent(r)+"&timed=True&tfd=1")):info.isLogin&&fconn.isFC()&&fc.wm.gameOver()},this.add=function(){t(ById("wm_new_word").value.trim())},this.newGame=function(){u&&p||(f=0,lib.show("wm_wait"),m=0,null==p&&info.isLogin&&fconn.isFC()?fc.wm.newGame(info.PageLang):lib.AsyncRequest("/_/game/wordmaker.ashx?lang="+info.PageLang+"&r="+Math.random()))},this.whCallbackFc=function(e){u&&p||null!=p&&(ById("wm_wait")?(lib.hide("wm_wait"),f=e?(c=fixArrIE8(e.split(",")).map(function(e){return ee=e.split("@"),{word:ee[0],found:1==ee.length?0:+ee[1]}}),null!=p&&c.splice(0,0,{word:B(c[0].word)}),h=1,0):1,l()):setTimeout(function(){wm.whCallbackFc(e)},500))},this.callBackFC=function(e,t,n,r,o){ById("wm_wait")?(d={key:t,msg:n},lib.hide("wm_wait"),c=fixArrIE8(e.split(",")).map(function(e){return ee=e.split("@"),{word:ee[0],found:1==ee.length?0:+ee[1]}}),ById("wm_new_word").value="",g=+o,null==p?h=+r:tog("wm_mode-btn",1),l()):setTimeout(function(){wm.callBackFC(e,t,n,r,o)},500)},this.callBackNewGame=function(e,t,n,r){lib.hide("wm_wait"),d={key:t,msg:n},c=fixArrIE8(e.split(",")).map(function(e){return{word:e,found:0}}),null!=p&&c.splice(0,0,{word:B(c[0].word)}),ById("wm_new_word").value="",r||(h=0),null!=p&&(w=new Date,p.currentRound.cancel()),null==p||info.isLogin&&fconn.isFC()||o(),l()},this.sort=function(e){g=+e,null==p&&info.isLogin&&fconn.isFC()&&fc.wm.sort(g),l()};var e=ById("wordMaker");function C(e){null==p||h||(27==(e=e||window.event).keyCode?p.wordwheel.unselectAll():8==e.keyCode&&p.wordwheel.unselectLast())}function S(e){if(null!=p&&!h){for(var t=(String.fromCharCode((e||window.event).charCode)||"").toLowerCase()[0],n=null,r=0;r<p.wordwheel.letters().length;r++){var o=p.wordwheel.letters()[r];if(o.character()==t){if(!o.selected()){o.tryToggle(),n=null;break}n=o}}null!=n&&n.tryToggle()}}function A(e){t(e.join(""))&&p.wordwheel.unselectAll()}function k(e){e==_.roundStatusType.timePassed&&(p.wordwheel.unselectAll(),wm.answer())}function n(){var e=ById("wm_wordwheel-mode"),t=ByQuery(e,".time-left"),r=ByQuery(e,".wordwheel>.container"),n=ById("wm_timer-canvas"),o=ByQuery(e,".selected-chars");(p={wordwheel:new a(120,120,25,25),currentRound:new _(n,6)}).currentRound.roundStatus.subscribe(k),p.currentRound.timeLeftToString.subscribe(function(e){t.innerHTML=e,n.style.display=""!=e?"":"none"},!0),p.currentRound.timeLeftInSeconds.subscribe(function(e){t.className=null!=e&&e<=15?"time-left hurry-up":"time-left"},!0),p.wordwheel.letters.subscribe(function(e){r.innerHTML="";for(var t=0;t<e.length;t++)!function(e,t,n){t.appendChild(n),t.className="wh_l l"+e.position()+(e.selected()?" sel":""),t.style.position="absolute",e.top.subscribe(function(e){t.style.top=e+"px"},!0),e.left.subscribe(function(e){t.style.left=e+"px"},!0),e.selected.subscribe(function(e){t.className=t.className.replace(" sel","")+(e?" sel":"")},!0),lib.event.add(t,"click",e.tryToggle),e.character.subscribe(function(e){n.innerHTML=e},!0),r.appendChild(t)}(e[t],document.createElement("div"),document.createElement("span"))},!0),p.wordwheel.selectedChars.subscribe(function(e){o.innerHTML=e.join("")},!0),p.wordwheel.selectedChars.subscribe(A),lib.event.add(o,"click",function(){p.wordwheel.unselectAll(!0)}),lib.event.add(ById("wordMaker"),"keypress",S),lib.event.add(ById("wordMaker"),"keydown",C),lib.event.add(document,"keydown",function(e){if(document.activeElement===ById("wordMaker")&&8===(e||window.event).keyCode)return e.preventDefault(),e.stopPropagation(),!1})}null!=e?("1"==e.getAttribute("data-whmode")&&(n(),h=1,tog("wm_mode-btn",0)),null==p||info.isLogin&&fconn.isFC()?(words=e.getAttribute("data-words"))?this.callBackNewGame(words,e.getAttribute("data-sh-key"),e.getAttribute("data-sh-msg"),null!=p):tog("wm_new_game",null==p):function(){if(!u&&window.sessionStorage&&sessionStorage["wm-timed"])try{var e=JSON.parse(sessionStorage["wm-timed"]);d=e.sh,c=e.data,h=1,g=e.sortABC,f=0,l()}catch(e){}else l()}()):console.warn("!! ById('wordMaker') returned null.")},tfdShare=new function(){var t=this;this.tr={playXMore:"You won! Win {0} more games to get the Bronze badge.",play1More:"You won! Win one more game to get the Bronze badge.",gotBadge:"Great job! You just earned the Bronze badge. Click {0} to collect it.",here:"here"},this.isBadge=!1,this.getBtns=function(e,t,n){if(e&&!(e.length<=3)){e=encodeURI(location.protocol+"//")+encodeURIComponent(("en"==info.PageLang?"www":info.PageLang)+"."+info.Domain+(n?"/_/archive.htm.aspx?shr=":"/_/sh.aspx?t=")+e);return'<ul class="social-networks">'+('<li class="facebook"><a target="_blank" href="http://www.facebook.com/share.php?u='+e+'" title="Share on Facebook"></a></li>')+('<li class="twitter"><a href="https://twitter.com/share?url='+e+"&text="+encodeURIComponent(t)+'" target="_blank" title="Share on Twitter"></a></li>')+(n?'<li class="rss hide400"><a target=_blank href="/_/WoD/rss.aspx'+("wod"==n?"":"?type="+n)+'" title="RSS feed"></a></li>':"")+('<li class="mail hide400"><a href="mailto:?subject='+encodeURIComponent(t)+"&body="+encodeURIComponent(t)+"%0d%0a%0d%0aURL%3a "+e+'" title="E-mail"></a></li>')+"</ul>"}},this.getWonCnt=function(e){if("gm"==e||"gmm"==e||0<location.href.indexOf("sh.aspx"))return 8;var t=lib.cookie.get("wonCnt",0,1);return t&&t.substring(0,2)==e?+t.substring(2):0},this.getBadgeHTML=function(e){this.isBadge=!1;var t=this.getWonCnt(e);return lib.cookie.set("wonCnt",e+(t+1),0,1),3<=t?(this.isBadge=!0,"<span class='img badge_"+e+"'></span>"+this.tr.gotBadge.replace("{0}","<a class=u href='https://secure.thefreedictionary.com/Registration.aspx'>"+this.tr.here+"</a>")):2==t?this.tr.play1More:this.tr.playXMore.replace("{0}",3-t)},(h=ById("shareTr"))&&(this.tr=JSON.parse(h.getAttribute("data-tr"))),forAll(".shareFeedBtns",function(e){e.innerHTML=t.getBtns(e.getAttribute("data-feed-shkey"),e.getAttribute("data-feed-shmsg"),e.getAttribute("data-feed-type"))})},goal={reset:function(e){fconn.ev(e+":gRS")},getMsg:function(e){return fconn.isFC()?fc.goal.getMsg(e):null},getLev:function(e){return fconn.isFC()?fc.goal.getLev(e):null}};(d=ById("matchUpShare"))&&(shBtns=tfdShare.getBtns(d.getAttribute("data-shkey"),d.getAttribute("data-shmsg")),isMM="mismatch"==d.getAttribute("data-game"),info.isLogin?(d.innerHTML=d.getAttribute("data-shlbl")+shBtns,fconn.ev("gm"+(isMM?"m@":"")+matchUpAns)):d.innerHTML=matchUpAns<=2?d.getAttribute("data-shlbl")+shBtns:tfdShare.getBadgeHTML("gmm")),ById("dvLiveSearch")&&(window.LiveSearch=new function(){var o,i=0,s=ById("dvLiveSearch"),a=[],l=0;function t(){var e;l||(l=1,(e=ById("ls"+i))&&e.parentNode.removeChild(e),lib.AsyncRequest(fconn.URL+"recentSearches.ashx?tab="+info.tab+"&r="+(new Date).getTime(),null,null,function(){l=0,t()},"ls"+ ++i))}function d(e,t){function r(e,t,n){n==t.length?e.innerHTML=t:(e.innerHTML=t.substr(0,n)+"<span style='color:black'>|</span>",setTimeout(function(){r(e,t,n+1)},100))}var n=document.createElement("a");for(n.setAttribute("href",encodeURI(e).replace("%20","+")),n.onmouseover=function(){LiveSearch.IsPause=!0},n.onmouseout=function(){LiveSearch.IsPause=!1},s.insertBefore(n,s.childNodes.length?s.childNodes[0]:null),t?setTimeout(function(){n.className="sh",r(n,e,1)},100):(n.className="sh",n.innerHTML=e);20<s.children.length;)s.removeChild(s.children[s.children.length-1])}function c(){0<a.length&&!LiveSearch.IsPause&&(o=a[0],d(a[a.length-1],1),a.splice(a.length-1,1)),a.length<4&&t(),setTimeout(c,1e3)}this.IsPause=!1,this.callback=function(e){if(1==i){for(var t=5;t<e.length-1;t++)d(e[t]);a=e.slice(0,5),setTimeout(c,3e3)}else{var n,r=fixArrIE8(e).indexOf(o);-1==r?n=e:0<r&&(n=e.slice(0,r)),n&&Array.prototype.splice.apply(a,[0,0].concat(n))}l=0},t()}),info.isLogin&&"undefined"!=typeof fconn&&!fconn.isFC()&&lib.AsyncRequest(fconn.URL+"static/js/fc.ashx"+(window._cb?window._cb+"&":"?")+"lang="+(info.PageLang||"en")),ById("spellCheckerFrame")&&(window.SpellChecker=new function(){var p=[];function s(){ById("spellCheckerFrame").contentWindow.onChange()}function w(e,t){ById("spellCheckResult").innerHTML=e,ById("spellCheckResult").className=t?"err":"no-err"}this.hideErrorBox=function(){lib.hide("spellErrBox")},lib.event.add(document,"click",this.hideErrorBox),this.showErrorBox=function(e,t){if("spellErrFixed"!=t.getAttribute("class")){ById("spellErrButtons").innerHTML="",ById("spellErrHead").innerText=t.getAttribute("data-msg"),rpls=t.getAttribute("data-rep").split("~~");for(var n,r=0;r<rpls.length;r++)rpls[r]&&((n=document.createElement("div")).setAttribute("class","spellErrBoxBtn"),n.innerText=rpls[r],n.onclick=function(e){t.innerText=e.target.innerText,t.setAttribute("class","spellErrFixed"),t.onclick=null,lib.hide("spellErrBox"),s()},ById("spellErrButtons").appendChild(n));(n=document.createElement("div")).setAttribute("class","spellErrBoxBtn"),n.innerText="Ignore this error",n.onclick=function(e){p.push(t.innerText),lib.isStor()&&sessionStorage.setItem("spellCheckIgnore",JSON.stringify(p)),t.setAttribute("class","spellErrFixed"),t.onclick=null,lib.hide("spellErrBox"),s()},ById("spellErrButtons").appendChild(n);var o=ById("spellCheckerFrame"),i=Math.min(o.clientWidth-180,e.clientX),o=o.offsetTop+e.clientY+10;ById("spellErrBox").setAttribute("style","left:"+i+"px;top:"+o+"px"),lib.show("spellErrBox"),e.preventDefault(),e.stopPropagation()}};var e,n="";this.check=function(){if(n=(n=(n=(n=(n=(n=ById("spellCheckerFrame").contentWindow.document.getElementById("txt").innerHTML).replace(/<br>/g,"\r\n")).replace(/<div>/g,"\r\n")).replace(/<.*?>/g,"")).replace(/&nbsp;/g," ")).replace(/ +/g," ").trim()){if(info.isLogin&&lib.cookie.get("premium",1,1)){if(1e5<n.length)return void w("Text is too long. Please limit your text to less than 100,000 characters.",1)}else if(3e3<n.length)return void w('Text is too long. Please limit your text to less than 3,000 characters. Or check up to 100,000 characters when you activate the <a href="https://secure.thefreedictionary.com/premium/subscribe">ad-free subscription</a>.',1);w(""),lib.show("spellCheckWait"),ById("spellCheckButton").disabled=!0;var e=ById("spellCheckLang"),t=e.options[e.selectedIndex].value,e=new XMLHttpRequest;e.onreadystatechange=function(){var e;4==this.readyState&&(ById("spellCheckButton").disabled=!1,lib.hide("spellCheckWait"),200==this.status?function(e,t){for(var n,r="",o=0,i=0,s=0,a=0;a<e.matches.length;a++){for(var l=e.matches[a],d=l.offset,c=l.length,u=t.substr(d,c),h=!1,f=0;f<p.length;f++)if(p[f]==u){h=!0,s++;break}if(!h){for(var g="",f=0;f<l.replacements.length;f++)g&&(g+="~~"),g+=b(l.replacements[f].value);var m=b(l.message);i++,r+=t.substring(o,d),r+="<span class='spellErr' data-msg=\""+m+'" data-rep="'+g+"\" onclick='parent.SpellChecker.showErrorBox(event, this);return false'>",r+=u,r+="</span>",o=d+c}function b(e){return e.replace(/\"/g,"&quot;")}}r=(r+=t.substring(o)).replace(/\r\n/g,"<br>"),ById("spellCheckerFrame").contentWindow.setText(r),n=1<i?"Found "+i+" errors":1==i?"Found one error":"No errors found",s&&(n+=" ("+s+" ignored)"),w(n,i)}(JSON.parse(this.responseText),n):403==this.status?w("Too many requests. Please try again later.",1):(e="",w("Error occurred"+(e=this.responseText?" ("+(this.responseText.length<5?this.responseText:"?")+")":e)+". Please try again later.",1)))},e.open("POST","http://grammar.atstart.org/check.ashx",!0),e.send("text="+encodeURIComponent(n)+"&lang=en-"+t+"&uid="+fconn.userId()+"&prm="+lib.cookie.get("premium",1,1))}},window.onChangeTextSize=function(){ById("spellCheckerFrame").contentWindow.updFontSize()},lib.isStor()&&((e=localStorage.spellCheckRegion)&&(ById("spellCheckLang").selectedIndex=e),(e=sessionStorage.spellCheckIgnore)&&(p=JSON.parse(e))),ById("spellCheckLang").addEventListener("change",function(e){lib.isStor()&&(localStorage.spellCheckRegion=e.target.selectedIndex)})});
