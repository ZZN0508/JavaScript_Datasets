!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("preact/compat")):"function"==typeof define&&define.amd?define(["preact/compat"],t):"object"==typeof exports?exports["latest_preferences/latest_preferences.jsx"]=t(require("preact/compat")):e["latest_preferences/latest_preferences.jsx"]=t(e["preact/compat"])}(this,function(n){return r=[function(n,e,t){!function(e){function t(e){return e&&e.Math==Math&&e}n.exports=t("object"==typeof globalThis&&globalThis)||t("object"==typeof window&&window)||t("object"==typeof self&&self)||t("object"==typeof e&&e)||function(){return this}()||Function("return this")()}.call(this,t(71))},function(e,t,n){var r=n(0),o=n(43),i=n(3),a=n(44),s=n(46),n=n(79),c=o("wks"),u=r.Symbol,l=n?u:u&&u.withoutSetter||a;e.exports=function(e){return i(c,e)&&(s||"string"==typeof c[e])||(s&&i(u,e)?c[e]=u[e]:c[e]=l("Symbol."+e)),c[e]}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(7);e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t,n){var r=n(9),o=n(10),i=n(17);e.exports=r?function(e,t,n){return o.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var u=n(0),l=n(26).f,f=n(5),d=n(11),p=n(22),h=n(74),y=n(48);e.exports=function(e,t){var n,r,o,i,a=e.target,s=e.global,c=e.stat;if(n=s?u:c?u[a]||p(a,{}):(u[a]||{}).prototype)for(r in t){if(o=t[r],i=e.noTargetGet?(i=l(n,r))&&i.value:n[r],!y(s?r:a+(c?".":"#")+r,e.forced)&&void 0!==i){if(typeof o==typeof i)continue;h(o,i)}(e.sham||i&&i.sham)&&f(o,"sham",!0),d(n,r,o,e)}}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){function r(e){return"function"==typeof e?e:void 0}var o=n(38),i=n(0);e.exports=function(e,t){return arguments.length<2?r(o[e])||r(i[e]):o[e]&&o[e][t]||i[e]&&i[e][t]}},function(e,t,n){n=n(2);e.exports=!n(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},function(e,t,n){var r=n(9),o=n(42),i=n(4),a=n(41),s=Object.defineProperty;t.f=r?s:function(e,t,n){if(i(e),t=a(t,!0),i(n),o)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var s=n(0),c=n(5),u=n(3),l=n(22),r=n(29),n=n(18),o=n.get,f=n.enforce,d=String(String).split("String");(e.exports=function(e,t,n,r){var o=!!r&&!!r.unsafe,i=!!r&&!!r.enumerable,a=!!r&&!!r.noTargetGet;"function"==typeof n&&("string"!=typeof t||u(n,"name")||c(n,"name",t),(r=f(n)).source||(r.source=d.join("string"==typeof t?t:""))),e!==s?(o?!a&&e[t]&&(i=!0):delete e[t],i?e[t]=n:c(e,t,n)):i?e[t]=n:l(t,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&o(this).source||r(this)})},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,t){e.exports=!1},function(e,t){e.exports={}},function(e,t,n){"use strict";function r(e){var n,r;this.promise=new e(function(e,t){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=e,r=t}),this.resolve=o(n),this.reject=o(r)}var o=n(12);e.exports.f=function(e){return new r(e)}},function(e,t,n){var r=n(66),o=n(32);e.exports=function(e){return r(o(e))}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r,o,i,a,s,c,u,l,f=n(73),d=n(0),p=n(7),h=n(5),y=n(3),v=n(23),m=n(30),n=n(24),d=d.WeakMap;u=f?(r=v.state||(v.state=new d),o=r.get,i=r.has,a=r.set,s=function(e,t){return t.facade=e,a.call(r,e,t),t},c=function(e){return o.call(r,e)||{}},function(e){return i.call(r,e)}):(n[l=m("state")]=!0,s=function(e,t){return t.facade=e,h(e,l,t),t},c=function(e){return y(e,l)?e[l]:{}},function(e){return y(e,l)}),e.exports={set:s,get:c,has:u,enforce:function(e){return u(e)?c(e):s(e,{})},getterFor:function(n){return function(e){var t;if(!p(e)||(t=c(e)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return t}}}},function(e,t,n){var r=n(27),n=n(0);e.exports="process"==r(n.process)},function(e,t,n){function v(e,t){this.stopped=e,this.result=t}var m=n(4),b=n(86),g=n(47),_=n(53),w=n(87),S=n(88);e.exports=function(e,t,n){function r(e){return i&&S(i),new v(!0,e)}function o(e){return d?(m(e),h?y(e[0],e[1],r):y(e[0],e[1])):h?y(e,r):y(e)}var i,a,s,c,u,l,f=n&&n.that,d=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_ITERATOR),h=!(!n||!n.INTERRUPTED),y=_(t,f,1+d+h);if(p)i=e;else{if("function"!=typeof(p=w(e)))throw TypeError("Target is not iterable");if(b(p)){for(a=0,s=g(e.length);a<s;a++)if((c=o(e[a]))&&c instanceof v)return c;return new v(!1)}i=p.call(e)}for(u=i.next;!(l=u.call(i)).done;){try{c=o(l.value)}catch(e){throw S(i),e}if("object"==typeof c&&c&&c instanceof v)return c}return new v(!1)}},function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},function(e,t,n){var r=n(0),o=n(5);e.exports=function(t,n){try{o(r,t,n)}catch(e){r[t]=n}return n}},function(e,t,n){var r=n(0),o=n(22),n="__core-js_shared__",n=r[n]||o(n,{});e.exports=n},function(e,t){e.exports={}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t,n){var r=n(9),o=n(64),i=n(17),a=n(16),s=n(41),c=n(3),u=n(42),l=Object.getOwnPropertyDescriptor;t.f=r?l:function(e,t){if(e=a(e),t=s(t,!0),u)try{return l(e,t)}catch(e){}if(c(e,t))return i(!o.f.call(e,t),e[t])}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(0),n=n(7),o=r.document,i=n(o)&&n(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t,n){var n=n(23),r=Function.toString;"function"!=typeof n.inspectSource&&(n.inspectSource=function(e){return r.call(e)}),e.exports=n.inspectSource},function(e,t,n){var r=n(43),o=n(44),i=r("keys");e.exports=function(e){return i[e]||(i[e]=o(e))}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(0<e?r:n)(e)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},function(e,t,n){function r(){}function o(e){return"<script>"+e+"<\/script>"}var i,a=n(4),s=n(78),c=n(25),u=n(24),l=n(49),f=n(28),d=n(30)("IE_PROTO"),p=function(){try{i=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;p=i?function(e){e.write(o("")),e.close();var t=e.parentWindow.Object;return e=null,t}(i):((t=f("iframe")).style.display="none",l.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(o("document.F=Object")),e.close(),e.F);for(var n=c.length;n--;)delete p.prototype[c[n]];return p()};u[d]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(r.prototype=a(e),n=new r,r.prototype=null,n[d]=e):n=p(),void 0===t?n:s(n,t)}},function(e,t,n){n=n(8);e.exports=n("navigator","userAgent")||""},function(e,t,n){var r=n(3),o=n(69),i=n(30),n=n(84),a=i("IE_PROTO"),s=Object.prototype;e.exports=n?Object.getPrototypeOf:function(e){return e=o(e),r(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},function(e,t,n){var r={};r[n(1)("toStringTag")]="z",e.exports="[object z]"===String(r)},function(e,t,n){var r=n(10).f,o=n(3),i=n(1)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},function(e,t,n){n=n(0);e.exports=n},function(e,t){e.exports=n},function(e,t,n){"use strict";"undefined"!=typeof window&&(n=n(82),window.Promise=window.Promise||n)},function(e,t,n){var o=n(7);e.exports=function(e,t){if(!o(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!o(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!o(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!o(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(9),o=n(2),i=n(28);e.exports=!r&&!o(function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(13),o=n(23);(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.10.1",mode:r?"pure":"global",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"})},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+r).toString(36)}},function(e,t,n){var a=n(3),s=n(16),c=n(72).indexOf,u=n(24);e.exports=function(e,t){var n,r=s(e),o=0,i=[];for(n in r)!a(u,n)&&a(r,n)&&i.push(n);for(;t.length>o;)a(r,n=t[o++])&&(~c(i,n)||i.push(n));return i}},function(e,t,n){var r=n(19),o=n(50),n=n(2);e.exports=!!Object.getOwnPropertySymbols&&!n(function(){return!Symbol.sham&&(r?38===o:37<o&&o<41)})},function(e,t,n){var r=n(31),o=Math.min;e.exports=function(e){return 0<e?o(r(e),9007199254740991):0}},function(e,t,n){var r=n(2),o=/#|\.prototype\./,n=function(e,t){e=a[i(e)];return e==c||e!=s&&("function"==typeof t?r(t):!!t)},i=n.normalize=function(e){return String(e).replace(o,".").toLowerCase()},a=n.data={},s=n.NATIVE="N",c=n.POLYFILL="P";e.exports=n},function(e,t,n){n=n(8);e.exports=n("document","documentElement")},function(e,t,n){var r,o,i=n(0),n=n(34),i=i.process,i=i&&i.versions,i=i&&i.v8;i?o=(r=i.split("."))[0]+r[1]:n&&(!(r=n.match(/Edge\/(\d+)/))||74<=r[1])&&(r=n.match(/Chrome\/(\d+)/))&&(o=r[1]),e.exports=o&&+o},function(e,t,n){"use strict";function r(e,t){var n=this;return n instanceof r?(a&&(n=a(new Error(void 0),i(n))),void 0!==t&&c(n,"message",String(t)),l(e,(t=[]).push,{that:t}),c(n,"errors",t),n):new r(e,t)}var o=n(6),i=n(35),a=n(52),s=n(33),c=n(5),u=n(17),l=n(20);r.prototype=s(Error.prototype,{constructor:u(5,r),message:u(5,""),name:u(5,"AggregateError")}),o({global:!0},{AggregateError:r})},function(e,t,n){var o=n(4),i=n(85);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,e={};try{(n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(e,[]),r=e instanceof Array}catch(n){}return function(e,t){return o(e),i(t),r?n.call(e,t):e.__proto__=t,e}}():void 0)},function(e,t,n){var i=n(12);e.exports=function(r,o,e){if(i(r),void 0===o)return r;switch(e){case 0:return function(){return r.call(o)};case 1:return function(e){return r.call(o,e)};case 2:return function(e,t){return r.call(o,e,t)};case 3:return function(e,t,n){return r.call(o,e,t,n)}}return function(){return r.apply(o,arguments)}}},function(e,t,n){var r=n(36),o=n(27),i=n(1)("toStringTag"),a="Arguments"==o(function(){return arguments}());e.exports=r?o:function(e){var t;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(e=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?e:a?o(t):"Object"==(e=o(t))&&"function"==typeof t.callee?"Arguments":e}},function(e,t,n){n=n(0);e.exports=n.Promise},function(e,t,n){var r=n(4),o=n(12),i=n(1)("species");e.exports=function(e,t){var n,e=r(e).constructor;return void 0===e||null==(n=r(e)[i])?t:o(n)}},function(e,t,n){function r(e){return function(){w(e)}}function o(e){w(e.data)}var i,a=n(0),s=n(2),c=n(53),u=n(49),l=n(28),f=n(58),d=n(19),p=a.location,h=a.setImmediate,y=a.clearImmediate,v=a.process,m=a.MessageChannel,b=a.Dispatch,g=0,_={},w=function(e){var t;_.hasOwnProperty(e)&&(t=_[e],delete _[e],t())},n=function(e){a.postMessage(e+"",p.protocol+"//"+p.host)};h&&y||(h=function(e){for(var t=[],n=1;n<arguments.length;)t.push(arguments[n++]);return _[++g]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},i(g),g},y=function(e){delete _[e]},d?i=function(e){v.nextTick(r(e))}:b&&b.now?i=function(e){b.now(r(e))}:m&&!f?(m=(f=new m).port2,f.port1.onmessage=o,i=c(m.postMessage,m,1)):a.addEventListener&&"function"==typeof postMessage&&!a.importScripts&&p&&"file:"!==p.protocol&&!s(n)?(i=n,a.addEventListener("message",o,!1)):i="onreadystatechange"in l("script")?function(e){u.appendChild(l("script")).onreadystatechange=function(){u.removeChild(this),w(e)}}:function(e){setTimeout(r(e),0)}),e.exports={set:h,clear:y}},function(e,t,n){n=n(34);e.exports=/(?:iphone|ipod|ipad).*applewebkit/i.test(n)},function(e,t,n){var r=n(4),o=n(7),i=n(15);e.exports=function(e,t){if(r(e),o(t)&&t.constructor===e)return t;e=i.f(e);return(0,e.resolve)(t),e.promise}},function(e,t,n){"use strict";var r=n(6),u=n(12),o=n(15),i=n(21),l=n(20);r({target:"Promise",stat:!0},{allSettled:function(e){var s=this,t=o.f(s),c=t.resolve,n=t.reject,r=i(function(){var r=u(s.resolve),o=[],i=0,a=1;l(e,function(e){var t=i++,n=!1;o.push(void 0),a++,r.call(s,e).then(function(e){n||(n=!0,o[t]={status:"fulfilled",value:e},--a||c(o))},function(e){n||(n=!0,o[t]={status:"rejected",reason:e},--a||c(o))})}),--a||c(o)});return r.error&&n(r.value),t.promise}})},function(e,t,n){"use strict";var r=n(6),f=n(12),d=n(8),o=n(15),i=n(21),p=n(20),h="No one promise resolved";r({target:"Promise",stat:!0},{any:function(e){var c=this,t=o.f(c),u=t.resolve,l=t.reject,n=i(function(){var r=f(c.resolve),o=[],i=0,a=1,s=!1;p(e,function(e){var t=i++,n=!1;o.push(void 0),a++,r.call(c,e).then(function(e){n||s||(s=!0,u(e))},function(e){n||s||(n=!0,o[t]=e,--a||l(new(d("AggregateError"))(o,h)))})}),--a||l(new(d("AggregateError"))(o,h))});return n.error&&l(n.value),t.promise}})},function(e,t,n){"use strict";function y(){return this}var v=n(6),m=n(102),b=n(35),g=n(52),_=n(37),w=n(5),S=n(11),r=n(1),E=n(13),O=n(14),n=n(63),P=n.IteratorPrototype,x=n.BUGGY_SAFARI_ITERATORS,I=r("iterator"),k="values",j="entries";e.exports=function(e,t,n,r,o,i,a){m(n,t,r);function s(e){if(e===o&&h)return h;if(!x&&e in d)return d[e];switch(e){case"keys":case k:case j:return function(){return new n(this,e)}}return function(){return new n(this)}}var c,u,l=t+" Iterator",f=!1,d=e.prototype,p=d[I]||d["@@iterator"]||o&&d[o],h=!x&&p||s(o),r="Array"==t&&d.entries||p;if(r&&(e=b(r.call(new e)),P!==Object.prototype&&e.next&&(E||b(e)===P||(g?g(e,P):"function"!=typeof e[I]&&w(e,I,y)),_(e,l,!0,!0),E&&(O[l]=y))),o==k&&p&&p.name!==k&&(f=!0,h=function(){return p.call(this)}),E&&!a||d[I]===h||w(d,I,h),O[t]=h,o)if(c={values:s(k),keys:i?h:s("keys"),entries:s(j)},a)for(u in c)!x&&!f&&u in d||S(d,u,c[u]);else v({target:t,proto:!0,forced:x||f},c);return c}},function(e,t,n){"use strict";var r,o=n(2),i=n(35),a=n(5),s=n(3),c=n(1),u=n(13),l=c("iterator"),n=!1;[].keys&&("next"in(c=[].keys())?(c=i(i(c)))!==Object.prototype&&(r=c):n=!0);o=null==r||o(function(){var e={};return r[l].call(e)!==e});o&&(r={}),u&&!o||s(r,l)||a(r,l,function(){return this}),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:n}},function(e,t,n){"use strict";var r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!r.call({1:2},1);t.f=i?function(e){e=o(this,e);return!!e&&e.enumerable}:r},function(e,t,n){var r=n(45),o=n(25);e.exports=Object.keys||function(e){return r(e,o)}},function(e,t,n){var r=n(2),o=n(27),i="".split;e.exports=r(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return"String"==o(e)?i.call(e,""):Object(e)}:Object},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){"use strict";"undefined"!=typeof window&&n(81)},function(e,t,n){var r=n(32);e.exports=function(e){return Object(r(e))}},,function(e,t){var n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var c=n(16),u=n(47),l=n(77),n=function(s){return function(e,t,n){var r,o=c(e),i=u(o.length),a=l(n,i);if(s&&t!=t){for(;a<i;)if((r=o[a++])!=r)return!0}else for(;a<i;a++)if((s||a in o)&&o[a]===t)return s||a||0;return!s&&-1}};e.exports={includes:n(!0),indexOf:n(!1)}},function(e,t,n){var r=n(0),n=n(29),r=r.WeakMap;e.exports="function"==typeof r&&/native code/.test(n(r))},function(e,t,n){var s=n(3),c=n(75),u=n(26),l=n(10);e.exports=function(e,t){for(var n=c(t),r=l.f,o=u.f,i=0;i<n.length;i++){var a=n[i];s(e,a)||r(e,a,o(t,a))}}},function(e,t,n){var r=n(8),o=n(76),i=n(67),a=n(4);e.exports=r("Reflect","ownKeys")||function(e){var t=o.f(a(e)),n=i.f;return n?t.concat(n(e)):t}},function(e,t,n){var r=n(45),o=n(25).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},function(e,t,n){var r=n(31),o=Math.max,i=Math.min;e.exports=function(e,t){e=r(e);return e<0?o(e+t,0):i(e,t)}},function(e,t,n){var r=n(9),a=n(10),s=n(4),c=n(65);e.exports=r?Object.defineProperties:function(e,t){s(e);for(var n,r=c(t),o=r.length,i=0;i<o;)a.f(e,n=r[i++],t[n]);return e}},function(e,t,n){n=n(46);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,t,n){var r=n(1),o=n(33),n=n(10),i=r("unscopables"),a=Array.prototype;null==a[i]&&n.f(a,i,{configurable:!0,value:o(null)}),e.exports=function(e){a[i][e]=!0}},function(e,t){!function(e){"use strict";var t,n,a,r,o,i,s,c,u,l;function f(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function d(e){return e="string"!=typeof e?String(e):e}function p(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return n&&(e[Symbol.iterator]=function(){return e}),e}function h(t){this.map={},t instanceof h?t.forEach(function(e,t){this.append(t,e)},this):Array.isArray(t)?t.forEach(function(e){this.append(e[0],e[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function y(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function v(n){return new Promise(function(e,t){n.onload=function(){e(n.result)},n.onerror=function(){t(n.error)}})}function m(e){var t=new FileReader,n=v(t);return t.readAsArrayBuffer(e),n}function b(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e)if("string"==typeof e)this._bodyText=e;else if(a&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(r&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(o&&a&&s(e))this._bodyArrayBuffer=b(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!o||!ArrayBuffer.prototype.isPrototypeOf(e)&&!c(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=b(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a&&(this.blob=function(){var e=y(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?y(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(m)}),this.text=function(){var e,t,n=y(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,n=v(t=new FileReader),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}function _(e,t){var n,r=(t=t||{}).body;if(e instanceof _){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new h(e.headers)),this.method=e.method,this.mode=e.mode,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new h(t.headers)),this.method=(e=(n=t.method||this.method||"GET").toUpperCase(),-1<u.indexOf(e)?e:n),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function w(e){var n=new FormData;return e.trim().split("&").forEach(function(e){var t;e&&(e=(t=e.split("=")).shift().replace(/\+/g," "),t=t.join("=").replace(/\+/g," "),n.append(decodeURIComponent(e),decodeURIComponent(t)))}),n}function S(e,t){t=t||{},this.type="default",this.status=void 0===t.status?200:t.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new h(t.headers),this.url=t.url||"",this._initBody(e)}e.fetch||(t="URLSearchParams"in e,n="Symbol"in e&&"iterator"in Symbol,a="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),r="FormData"in e,(o="ArrayBuffer"in e)&&(i=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=function(e){return e&&DataView.prototype.isPrototypeOf(e)},c=ArrayBuffer.isView||function(e){return e&&-1<i.indexOf(Object.prototype.toString.call(e))}),h.prototype.append=function(e,t){e=f(e),t=d(t);var n=this.map[e];this.map[e]=n?n+","+t:t},h.prototype.delete=function(e){delete this.map[f(e)]},h.prototype.get=function(e){return e=f(e),this.has(e)?this.map[e]:null},h.prototype.has=function(e){return this.map.hasOwnProperty(f(e))},h.prototype.set=function(e,t){this.map[f(e)]=d(t)},h.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},h.prototype.keys=function(){var n=[];return this.forEach(function(e,t){n.push(t)}),p(n)},h.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),p(t)},h.prototype.entries=function(){var n=[];return this.forEach(function(e,t){n.push([t,e])}),p(n)},n&&(h.prototype[Symbol.iterator]=h.prototype.entries),u=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],_.prototype.clone=function(){return new _(this,{body:this._bodyInit})},g.call(_.prototype),g.call(S.prototype),S.prototype.clone=function(){return new S(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},S.error=function(){var e=new S(null,{status:0,statusText:""});return e.type="error",e},l=[301,302,303,307,308],S.redirect=function(e,t){if(-1===l.indexOf(t))throw new RangeError("Invalid status code");return new S(null,{status:t,headers:{location:e}})},e.Headers=h,e.Request=_,e.Response=S,e.fetch=function(n,i){return new Promise(function(r,e){var t=new _(n,i),o=new XMLHttpRequest;o.onload=function(){var n,e={status:o.status,statusText:o.statusText,headers:(t=o.getAllResponseHeaders()||"",n=new h,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var t=e.split(":"),e=t.shift().trim();e&&(t=t.join(":").trim(),n.append(e,t))}),n)};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var t="response"in o?o.response:o.responseText;r(new S(t,e))},o.onerror=function(){e(new TypeError("Network request failed"))},o.ontimeout=function(){e(new TypeError("Network request failed"))},o.open(t.method,t.url,!0),"include"===t.credentials?o.withCredentials=!0:"omit"===t.credentials&&(o.withCredentials=!1),"responseType"in o&&a&&(o.responseType="blob"),t.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),o.send(void 0===t._bodyInit?null:t._bodyInit)})},e.fetch.polyfill=!0)}("undefined"!=typeof self?self:this)},function(e,t,n){var r=n(83);n(106),n(107),n(108),n(109),e.exports=r},function(e,t,n){n(51),n(89),n(91),n(60),n(61),n(99),n(100),n(103);n=n(38);e.exports=n.Promise},function(e,t,n){n=n(2);e.exports=!n(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})},function(e,t,n){var r=n(7);e.exports=function(e){if(!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},function(e,t,n){var r=n(1),o=n(14),i=r("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||a[i]===e)}},function(e,t,n){var r=n(54),o=n(14),i=n(1)("iterator");e.exports=function(e){if(null!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){var r=n(4);e.exports=function(e){var t=e.return;if(void 0!==t)return r(t.call(e)).value}},function(e,t,n){var r=n(36),o=n(11),n=n(90);r||o(Object.prototype,"toString",n,{unsafe:!0})},function(e,t,n){"use strict";var r=n(36),o=n(54);e.exports=r?{}.toString:function(){return"[object "+o(this)+"]"}},function(e,t,n){"use strict";var r,o,i,a,s=n(6),c=n(13),y=n(0),u=n(8),l=n(55),f=n(11),d=n(92),p=n(37),h=n(93),v=n(7),m=n(12),b=n(94),g=n(29),_=n(20),w=n(95),S=n(56),E=n(57).set,O=n(96),P=n(59),x=n(98),I=n(15),k=n(21),j=n(18),T=n(48),U=n(1),A=n(19),C=n(50),R=U("species"),B="Promise",M=j.get,L=j.set,N=j.getterFor(B),F=l,D=y.TypeError,H=y.document,W=y.process,G=u("fetch"),q=I.f,$=q,z=!!(H&&H.createEvent&&y.dispatchEvent),V="function"==typeof PromiseRejectionEvent,K="unhandledrejection",T=T(B,function(){if(g(F)===String(F)){if(66===C)return!0;if(!A&&!V)return!0}if(c&&!F.prototype.finally)return!0;if(51<=C&&/native code/.test(F))return!1;function e(e){e(function(){},function(){})}var t=F.resolve(1);return(t.constructor={})[R]=e,!(t.then(function(){})instanceof e)}),w=T||!w(function(e){F.all(e).catch(function(){})}),J=function(e){var t;return!(!v(e)||"function"!=typeof(t=e.then))&&t},Y=function(d,p){var h;d.notified||(d.notified=!0,h=d.reactions,O(function(){for(var r,e=d.value,t=1==d.state,n=0;h.length>n;){var o,i,a,s=h[n++],c=t?s.ok:s.fail,u=s.resolve,l=s.reject,f=s.domain;try{c?(t||(2===d.rejection&&function(t){E.call(y,function(){var e=t.facade;A?W.emit("rejectionHandled",e):Z("rejectionhandled",e,t.value)})}(d),d.rejection=1),!0===c?o=e:(f&&f.enter(),o=c(e),f&&(f.exit(),a=!0)),o===s.promise?l(D("Promise-chain cycle")):(i=J(o))?i.call(o,u,l):u(o)):l(e)}catch(e){f&&!a&&f.exit(),l(e)}}d.reactions=[],d.notified=!1,p&&!d.rejection&&(r=d,E.call(y,function(){var e,t=r.facade,n=r.value;if(X(r)&&(e=k(function(){A?W.emit("unhandledRejection",n,t):Z(K,t,n)}),r.rejection=A||X(r)?2:1,e.error))throw e.value}))}))},Z=function(e,t,n){var r,o;z?((r=H.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),y.dispatchEvent(r)):r={promise:t,reason:n},!V&&(o=y["on"+e])?o(r):e===K&&x("Unhandled promise rejection",n)},X=function(e){return 1!==e.rejection&&!e.parent},Q=function(t,n,r){return function(e){t(n,e,r)}},ee=function(e,t,n){e.done||(e.done=!0,(e=n?n:e).value=t,e.state=2,Y(e,!0))},te=function(n,e,t){if(!n.done){n.done=!0,t&&(n=t);try{if(n.facade===e)throw D("Promise can't be resolved itself");var r=J(e);r?O(function(){var t={done:!1};try{r.call(e,Q(te,t,n),Q(ee,t,n))}catch(e){ee(t,e,n)}}):(n.value=e,n.state=1,Y(n,!1))}catch(e){ee({done:!1},e,n)}}};T&&(F=function(e){b(this,F,B),m(e),r.call(this);var t=M(this);try{e(Q(te,t),Q(ee,t))}catch(e){ee(t,e)}},(r=function(e){L(this,{type:B,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=d(F.prototype,{then:function(e,t){var n=N(this),r=q(S(this,F));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=A?W.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Y(n,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r,t=M(e);this.promise=e,this.resolve=Q(te,t),this.reject=Q(ee,t)},I.f=q=function(e){return e===F||e===i?new o:$(e)},c||"function"!=typeof l||(a=l.prototype.then,f(l.prototype,"then",function(e,t){var n=this;return new F(function(e,t){a.call(n,e,t)}).then(e,t)},{unsafe:!0}),"function"==typeof G&&s({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return P(F,G.apply(y,arguments))}}))),s({global:!0,wrap:!0,forced:T},{Promise:F}),p(F,B,!1,!0),h(B),i=u(B),s({target:B,stat:!0,forced:T},{reject:function(e){var t=q(this);return t.reject.call(void 0,e),t.promise}}),s({target:B,stat:!0,forced:c||T},{resolve:function(e){return P(c&&this===i?F:this,e)}}),s({target:B,stat:!0,forced:w},{all:function(e){var s=this,t=q(s),c=t.resolve,u=t.reject,n=k(function(){var r=m(s.resolve),o=[],i=0,a=1;_(e,function(e){var t=i++,n=!1;o.push(void 0),a++,r.call(s,e).then(function(e){n||(n=!0,o[t]=e,--a||c(o))},u)}),--a||c(o)});return n.error&&u(n.value),t.promise},race:function(e){var n=this,r=q(n),o=r.reject,t=k(function(){var t=m(n.resolve);_(e,function(e){t.call(n,e).then(r.resolve,o)})});return t.error&&o(t.value),r.promise}})},function(e,t,n){var o=n(11);e.exports=function(e,t,n){for(var r in t)o(e,r,t[r],n);return e}},function(e,t,n){"use strict";var r=n(8),o=n(10),i=n(1),a=n(9),s=i("species");e.exports=function(e){var t=r(e),e=o.f;a&&t&&!t[s]&&e(t,s,{configurable:!0,get:function(){return this}})}},function(e,t){e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},function(e,t,n){var o=n(1)("iterator"),i=!1;try{var r=0,a={next:function(){return{done:!!r++}},return:function(){i=!0}};a[o]=function(){return this},Array.from(a,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var r={};r[o]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n}},function(e,t,n){var r,o,i,a,s,c,u,l,f=n(0),d=n(26).f,p=n(57).set,h=n(58),y=n(97),v=n(19),m=f.MutationObserver||f.WebKitMutationObserver,b=f.document,g=f.process,n=f.Promise,d=d(f,"queueMicrotask"),d=d&&d.value;d||(r=function(){var e,t;for(v&&(e=g.domain)&&e.exit();o;){t=o.fn,o=o.next;try{t()}catch(e){throw o?a():i=void 0,e}}i=void 0,e&&e.enter()},a=h||v||y||!m||!b?n&&n.resolve?(u=n.resolve(void 0),l=u.then,function(){l.call(u,r)}):v?function(){g.nextTick(r)}:function(){p.call(f,r)}:(s=!0,c=b.createTextNode(""),new m(r).observe(c,{characterData:!0}),function(){c.data=s=!s})),e.exports=d||function(e){e={fn:e,next:void 0};i&&(i.next=e),o||(o=e,a()),i=e}},function(e,t,n){n=n(34);e.exports=/web0s(?!.*chrome)/i.test(n)},function(e,t,n){var r=n(0);e.exports=function(e,t){var n=r.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},function(e,t,n){"use strict";var r=n(6),o=n(13),i=n(55),a=n(2),s=n(8),c=n(56),u=n(59),n=n(11);r({target:"Promise",proto:!0,real:!0,forced:!!i&&a(function(){i.prototype.finally.call({then:function(){}},function(){})})},{finally:function(t){var n=c(this,s("Promise")),e="function"==typeof t;return this.then(e?function(e){return u(n,t()).then(function(){return e})}:t,e?function(e){return u(n,t()).then(function(){throw e})}:t)}}),o||"function"!=typeof i||i.prototype.finally||n(i.prototype,"finally",s("Promise").prototype.finally)},function(e,t,n){"use strict";var r=n(101).charAt,o=n(18),n=n(62),i="String Iterator",a=o.set,s=o.getterFor(i);n(String,"String",function(e){a(this,{type:i,string:String(e),index:0})},function(){var e=s(this),t=e.string,n=e.index;return n>=t.length?{value:void 0,done:!0}:(n=r(t,n),e.index+=n.length,{value:n,done:!1})})},function(e,t,n){var a=n(31),s=n(32),n=function(i){return function(e,t){var n,r=String(s(e)),o=a(t),e=r.length;return o<0||e<=o?i?"":void 0:(t=r.charCodeAt(o))<55296||56319<t||o+1===e||(n=r.charCodeAt(o+1))<56320||57343<n?i?r.charAt(o):t:i?r.slice(o,o+2):n-56320+(t-55296<<10)+65536}};e.exports={codeAt:n(!1),charAt:n(!0)}},function(e,t,n){"use strict";function r(){return this}var o=n(63).IteratorPrototype,i=n(33),a=n(17),s=n(37),c=n(14);e.exports=function(e,t,n){t+=" Iterator";return e.prototype=i(o,{next:a(1,n)}),s(e,t,!1,!0),c[t]=r,e}},function(e,t,n){var r,o=n(0),i=n(104),a=n(105),s=n(5),n=n(1),c=n("iterator"),u=n("toStringTag"),l=a.values;for(r in i){var f=o[r],d=f&&f.prototype;if(d){if(d[c]!==l)try{s(d,c,l)}catch(e){d[c]=l}if(d[u]||s(d,u,r),i[r])for(var p in a)if(d[p]!==a[p])try{s(d,p,a[p])}catch(e){d[p]=a[p]}}}},function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,t,n){"use strict";var r=n(16),o=n(80),i=n(14),a=n(18),n=n(62),s="Array Iterator",c=a.set,u=a.getterFor(s);e.exports=n(Array,"Array",function(e,t){c(this,{type:s,target:r(e),index:0,kind:t})},function(){var e=u(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?{value:e.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}},"values"),i.Arguments=i.Array,o("keys"),o("values"),o("entries")},function(e,t,n){n(51)},function(e,t,n){n(60)},function(e,t,n){"use strict";var r=n(6),o=n(15),i=n(21);r({target:"Promise",stat:!0},{try:function(e){var t=o.f(this),e=i(e);return(e.error?t.reject:t.resolve)(e.value),t.promise}})},function(e,t,n){n(61)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var r,o;void 0===(r="function"==typeof(r=o=function(){function s(){for(var e=0,t={};e<arguments.length;e++){var n,r=arguments[e];for(n in r)t[n]=r[n]}return t}function u(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function e(c){function a(){}function n(e,t,n){if("undefined"!=typeof document){"number"==typeof(n=s({path:"/"},a.defaults,n)).expires&&(n.expires=new Date(+new Date+864e5*n.expires)),n.expires=n.expires?n.expires.toUTCString():"";try{var r=JSON.stringify(t);/^[\{\[]/.test(r)&&(t=r)}catch(e){}t=c.write?c.write(t,e):encodeURIComponent(String(t)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var o,i="";for(o in n)n[o]&&(i+="; "+o,!0!==n[o]&&(i+="="+n[o].split(";")[0]));return document.cookie=e+"="+t+i}}function t(e,t){if("undefined"!=typeof document){for(var n={},r=document.cookie?document.cookie.split("; "):[],o=0;o<r.length;o++){var i=r[o].split("="),a=i.slice(1).join("=");t||'"'!==a.charAt(0)||(a=a.slice(1,-1));try{var s=u(i[0]),a=(c.read||c)(a,s)||u(a);if(t)try{a=JSON.parse(a)}catch(e){}if(n[s]=a,e===s)break}catch(e){}}return e?n[e]:n}}return a.set=n,a.get=function(e){return t(e,!1)},a.getJSON=function(e){return t(e,!0)},a.remove=function(e,t){n(e,"",s(t,{expires:-1}))},a.defaults={},a.withConverter=e,a}(function(){})})?r.call(t,n,t,e):r)||(e.exports=r),e.exports=o()},,,,function(e,t){var n=9007199254740991,c="[object Arguments]",r="[object Function]",o="[object GeneratorFunction]",i=/^(?:0|[1-9]\d*)$/;var a,s,u=Object.prototype,l=u.hasOwnProperty,f=u.toString,d=u.propertyIsEnumerable,p=(a=Object.keys,s=Object,function(e){return a(s(e))}),h=Math.max,y=!d.call({valueOf:1},"valueOf");function v(e,t,n){var r=e[t];l.call(e,t)&&g(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function m(e,t){return(t=null==t?n:t)&&("number"==typeof e||i.test(e))&&-1<e&&e%1==0&&e<t}function b(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||u)}function g(e,t){return e===t||e!=e&&t!=t}var _=Array.isArray;function w(e){return null!=e&&("number"==typeof(t=e.length)&&-1<t&&t%1==0&&t<=n)&&!((e=S(e)?f.call(e):"")==r||e==o);var t}function S(e){var t=typeof e;return e&&("object"==t||"function"==t)}var E,O,P,x=(E=function(e,t){if(y||b(t)||w(t))!function(e,t,n){n=n||{};for(var r=-1,o=t.length;++r<o;){var i=t[r];v(n,i,e[i])}}(t,(w(r=t)?function(e,t){var n,r,o,i=_(e)||(r=n=e)&&"object"==typeof r&&w(r)&&l.call(n,"callee")&&(!d.call(n,"callee")||f.call(n)==c)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],a=i.length,s=!!a;for(o in e)!t&&!l.call(e,o)||s&&("length"==o||m(o,a))||i.push(o);return i}:function(e){if(!b(e))return p(e);var t,n=[];for(t in Object(e))l.call(e,t)&&"constructor"!=t&&n.push(t);return n})(r),e);else for(var n in t)l.call(t,n)&&v(e,n,t[n]);var r},O=function(e,t){var n=-1,r=t.length,o=1<r?t[r-1]:void 0,i=2<r?t[2]:void 0,o=3<E.length&&"function"==typeof o?(r--,o):void 0;for(i&&function(e,t,n){if(S(n)){var r=typeof t;return("number"==r?w(n)&&m(t,n.length):"string"==r&&t in n)&&g(n[t],e)}}(t[0],t[1],i)&&(o=r<3?void 0:o,r=1),e=Object(e);++n<r;){var a=t[n];a&&E(e,a)}return e},P=h(void 0===P?O.length-1:P,0),function(){for(var e=arguments,t=-1,n=h(e.length-P,0),r=Array(n);++t<n;)r[t]=e[P+t];for(var t=-1,o=Array(P+1);++t<P;)o[t]=e[t];return o[P]=r,function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(O,this,o)});e.exports=x},function(e,t,n){e.exports=n(348)()},,,function(e,t,n){"use strict";e.exports=n(156)},,function(e,t){function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var o={Popular:{brexit:{id:"brexit",text:"Brexit",type:"Topic"},coronavirus:{id:"coronavirus",text:"Coronavirus",type:"Topic"},equality:{id:"equality",text:"Equality",type:"Topic"},"real-estate":{id:"real-estate",text:"Real Estate",type:"Topic"},cryptocurrency:{id:"cryptocurrency",text:"Cryptocurrency",type:"Topic"}},Trending:{"personal-finance":{id:"personal-finance",text:"Personal Finance",type:"Topic"},stocks:{id:"stocks",text:"Stocks",type:"Topic"},etf:{id:"etf",text:"ETFs",type:"Topic"},"climate-change":{id:"climate-change",text:"Climate Change",type:"Topic"},"u-s-presidential-election-2020":{id:"u-s-presidential-election-2020",text:"Election",type:"Event"}}};e.exports={PREFERENCES:o,groupPreferencesByTagType:function(e){var t,r=Object.assign.apply(Object,[{}].concat(function(e){if(Array.isArray(e))return n(e)}(t=Object.values(o))||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e){if(e){if("string"==typeof e)return n(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?n(e,void 0):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()));return e.reduce(function(e,t){var n=r[t],t=n.id,n=n.type;return e[n]||(e[n]=[]),e[n].push(t),e},{})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=f(n(149)),i=f(n(157)),a=f(n(158)),s=f(n(159)),c=n(162),o=f(n(163)),u=f(n(164)),l=n(165);function f(e){return e&&e.__esModule?e:{default:e}}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p="data-signed-in",h="data-status",y="data-reg-ui-client-status",v="reg-ui-client",m="reg-ui-client__iframe",b=new RegExp("^https?://([^\\\\/]+\\.)*bloomberg\\.com(:\\d+)?(/|$)","i"),g="reg-user-info-ready",_="reg-ui-show-pop-up";function w(e){var t=0<arguments.length&&void 0!==e?e:{},e=window._regUserInfo||{};window._regUserInfo={agentId:t.agentId||e.agentId,sessionId:t.sessionId||e.sessionId,sessionKey:t.sessionKey||e.sessionKey,userId:t.userId||e.userId,user:t.user||e.user},window._regUserInfo.user&&window._regUserInfo.user.referralToken&&function(e){var e=0<arguments.length&&void 0!==e?e:{},n=(0,r.default)({},(0,o.default)(),e),e=Object.keys(n).reduce(function(e,t){return(e+=""===e?"?":"&")+"".concat(t,"=").concat(n[t])},"");window.history.replaceState({},"","".concat(document.location.href.split("?")[0]).concat(e))}({sref:window._regUserInfo.user.referralToken})}var S,E,S=(S=[{key:"isWhiteListedDomain",value:function(e){return b.test(e)}},{key:"goToUrl",value:function(e){window.location.href=e}}],E=[{key:"initialize",value:function(){var e=this;return this._setupMessageListener(),this.verifySignInStatus(function(){e._updateLinks()},function(){e._displayWhenUnauthenticated&&e.linkToSignIn()}),this}},{key:"verifySignInStatus",value:function(n,r){var o=this;return this._userInfo.fetchUserInfo(function(e,t){return w(t),(0,i.default)(window,g,t),t.userId?("function"==typeof n&&n.call(o,t.userId),void o.dispatchSignedInEvent(t,"already-signed-in")):((0,i.default)(window,"reg-user-not-signed-in"),void("function"==typeof r&&r.call(o)))}),this}},{key:"removeUserInfoEventHandler",value:function(){this._userInfoEventHandler&&(window.removeEventListener(g,this._userInfoEventHandler),this._userInfoEventHandler=null)}},{key:"cleanup",value:function(){this._windowMessageListener&&(window.removeEventListener("message",this._windowMessageListener),this._windowMessageListener=null),this._userClickEventHandler&&(this.removeTextElements(),this._userClickEventHandler=null),this._disableEscapeHandler&&(window.removeEventListener("keyup",this._disableEscapeHandler),this._disableEscapeHandler=null);var e=document.getElementById(v);e&&(e.removeEventListener("click",this._hidePopup),document.body.removeChild(e)),this.removeUserInfoEventHandler(),this._openedWindowReference&&(this._openedWindowReference=null)}},{key:"linkToSignIn",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._queryParams,t=1<arguments.length?arguments[1]:void 0;this._createPopup(this._urls.getLoginUrl(e),t)}},{key:"linkToRegister",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._queryParams,t=1<arguments.length?arguments[1]:void 0;e&&!1===e.closeable&&(this._dismissible=!1),this._createPopup(this._urls.getRegisterUrl(e),(0,r.default)({v4:e&&("true"===e.v4||!0===e.v4)},t))}},{key:"linkToTerminalRegister",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._queryParams,t=1<arguments.length?arguments[1]:void 0;this._createPopup(this._urls.getTerminalRegisterUrl(e),t)}},{key:"linkToBwRegister",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._queryParams,t=1<arguments.length?arguments[1]:void 0;this._createPopup(this._urls.getBwRegisterUrl(e),t)}},{key:"linkToBSSO",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._queryParams,t=(0,r.default)({newWindow:!0,width:400,height:525,location:"no",windowName:"terminal"},1<arguments.length?arguments[1]:void 0);this._createPopup(this._urls.getBssoUrl(e),t)}},{key:"onUserInfoReady",value:function(e){var t,n=this;window._regUserInfo?e(window._regUserInfo):(t=this._userInfoEventHandler||this._bindUserInfoEvent(e),this._userInfoEventHandler=function(e){t(e),n.removeUserInfoEventHandler()},window.addEventListener(g,this._userInfoEventHandler))}},{key:"addTextElements",value:function(e){var t=this,n=e&&e.length&&0<=e.length?Array.prototype.slice.call(e):[];return e instanceof window.Element&&(n=[e]),this._textElements=this._textElements.concat(n),this._textElements.forEach(function(e){e.removeEventListener("click",t._userClickEventHandler),e.addEventListener("click",t._userClickEventHandler)}),window._regUserId&&this._updateLinks(),this}},{key:"removeTextElements",value:function(){var t=this;this._textElements.forEach(function(e){e.removeEventListener("click",t._userClickEventHandler)}),this._textElements=[]}},{key:"refreshUserInfo",value:function(){return this._userInfo.fetchUserInfo(function(e,t){w(t)},!0),this}},{key:"optInToReferralSharing",value:function(e){var t=this;return this._userInfo.optInToReferralSharing(e).then(function(){return t.refreshUserInfo()})}},{key:"optOutOfReferralSharing",value:function(){var e=this;return this._userInfo.optOutOfReferralSharing(0<arguments.length&&void 0!==arguments[0]&&arguments[0]).then(function(){return e.refreshUserInfo()})}},{key:"isLoggedIn",value:function(){return this._isLoggedIn}},{key:"isTerminalSubscriber",value:function(){return this._isTerminalSubscriber}},{key:"isBBGSubscriber",value:function(){return this._isBBGSubscriber}},{key:"isBWSubscriber",value:function(){return this._isBWSubscriber}},{key:"_bindUserInfoEvent",value:function(t){return function(e){t(e.detail)}}},{key:"_setupMessageListener",value:function(){window.addEventListener("message",this._windowMessageListener)}},{key:"_createPopup",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(t.newWindow)null==this._openedWindowReference||this._openedWindowReference.closed?(r="width=".concat(t.width,",height=").concat(t.height,",location=").concat(t.location),this._openedWindowReference=window.open(e,t.windowName||"sign_in",r)):this._openedWindowReference.focus();else{var n=t.v4,r=void 0!==n&&n,t=document.getElementById(v),n=document.getElementById(m);if(document.body.setAttribute(y,"show"),t){if(n.getAttribute("src")===e)return t.setAttribute(h,"show"),void(0,i.default)(window,_);document.body.removeChild(t)}r=this._generatePopupContent(e,r);document.body.appendChild(r),this._showPopupAfterIframeHeightRefresh(),this._dismissible?r.addEventListener("click",this._hidePopup):document.addEventListener("keyup",this._disableEscapeHandler)}}},{key:"_generatePopupContent",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],t='<div class="'.concat(t?"reg-ui-client__wide-iframe-container":"reg-ui-client__iframe-container",'">\n            <iframe id="').concat(m,'" class="').concat(t?"reg-ui-client__wide-iframe":"reg-ui-client__iframe",'" src="').concat(e,'" frameborder="0"></iframe></div>'),e=document.createElement("div");return e.setAttribute("class","reg-ui-client"),e.setAttribute("id",v),e.innerHTML=t,e}},{key:"_hidePopup",value:function(e){e&&e.stopPropagation(),document.body.removeAttribute(y);e=document.getElementById(v);(0,i.default)(window,"reg-ui-close-pop-up"),e&&e.removeAttribute(h),document.activeElement.blur()}},{key:"_updateLinks",value:function(){this._textElements.forEach(function(e){e.setAttribute(p,"true"),e.textContent="Settings"})}},{key:"_userClickEventHandler",value:function(e){if(e.preventDefault(),"true"!==e.target.getAttribute(p))return this.linkToSignIn();O.goToUrl(this._urls.getSettingsUrl())}},{key:"_disableEscapeHandler",value:function(e){"Escape"!==e.key&&27!==(e.keyCode||e.which)||e.preventDefault()}},{key:"_showPopupAfterIframeHeightRefresh",value:function(){var e=document.getElementById(v),t=document.getElementById(m);e&&t&&(e.setAttribute(h,"show"),t.addEventListener("load",function(){t.style.height=t.scrollHeight,(0,i.default)(window,_)}))}},{key:"_windowMessageListener",value:function(e){var t=e.origin||e.originalEvent.origin;if(O.isWhiteListedDomain(t)){var n=e.data;switch(n.type){case"REG-HIDE-POPUP":this._hidePopup();break;case"REG-USER-SIGNED-IN":this._updateLinks(),w({userId:n.userId,user:n.user}),this.dispatchSignedInEvent(n,"sign-in-event");break;case"REG-USER-HIDE-POPUP":this._hidePopup();break;case"REG-USER-REGISTERED":(0,i.default)(window,"reg-user-registered",n)}}}},{key:"dispatchSignedInEvent",value:function(e,t){var n=e.userId,e=e.user;n&&(this._isLoggedIn=!0,this._isTerminalSubscriber=(0,l.isTerminalSubscriber)(),this._isBBGSubscriber=(0,l.isBBGSubscriber)(),this._isBWSubscriber=(0,l.isBWSubscriber)(),window._regUserId!==n?((0,i.default)(window,"reg-user-signed-in",{source:t,userId:n,user:e,isTerminalSubscriber:this._isTerminalSubscriber,isBBGSubscriber:this._isBBGSubscriber,isBWSubscriber:this._isBWSubscriber}),window._regUserId=n):(0,i.default)(window,"reg-user-repeated-sign-in",{source:t,userId:n,user:e,isTerminalSubscriber:this._isTerminalSubscriber,isBBGSubscriber:this._isBBGSubscriber,isBWSubscriber:this._isBWSubscriber}))}}],d((n=O).prototype,E),d(n,S),O);function O(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,O),this._textElements=[];var n=t.dismissible,r=t.displayWhenUnauthenticated,o=t.queryParams,i=t.environment,t=void 0===i?"production":i,i=(0,u.default)(window.location.hostname),t=c.URLS_MAP[t="staging"===t&&i?i:t]||c.URLS_MAP.production;this._isLoggedIn=!1,this._isTerminalSubscriber=!1,this._isBBGSubscriber=!1,this._isBWSubscriber=!1,this._dismissible=!(!1===n||"false"===n),this._displayWhenUnauthenticated=Boolean(r),this._queryParams=o,this._urls=new a.default(t),this._userInfo=new s.default(this._urls),this._openedWindowReference=null,this._userClickEventHandler=this._userClickEventHandler.bind(this),this._windowMessageListener=this._windowMessageListener.bind(this),this._disableEscapeHandler=this._disableEscapeHandler.bind(this),this.dispatchSignedInEvent=this.dispatchSignedInEvent.bind(this),this.isLoggedIn=this.isLoggedIn.bind(this),this.isTerminalSubscriber=this.isTerminalSubscriber.bind(this),this.isBBGSubscriber=this.isBBGSubscriber.bind(this),this.isBWSubscriber=this.isBWSubscriber.bind(this),this.addTextElements(e)}t.default=S},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,function(t,r){if(t&&r)try{new t.CustomEvent("test")}catch(e){var n=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=r.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n};n.prototype=t.Event.prototype,t.CustomEvent=n}}("undefined"!=typeof window?window:null,"undefined"!=typeof document?document:null);t.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window,t=new window.CustomEvent(1<arguments.length?arguments[1]:void 0,{detail:2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}});e.dispatchEvent(t)}},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a,s=/([^:]\/)\/+/g,a=(a=[{key:"appendQueryParams",value:function(e,t){if(!t||"object"!==i(t))return e;var n=Object.keys(t);if(0===n.length)return e;for(var r=e+"?"+c.constructKeyValuePair(n[0],t[n[0]]),o=1;o<n.length;++o)r+="&"+c.constructKeyValuePair(n[o],t[n[o]]);return r}},{key:"constructKeyValuePair",value:function(e,t){return e+"="+encodeURIComponent(t)}}],r((o=c).prototype,[{key:"_constructPath",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this._baseUrl,e="".concat(n).concat(e).replace(s,"$1");return c.appendQueryParams(e,t)}},{key:"getLoginUrl",value:function(e){var t=this._config.loginUrl;return this._constructPath(t,e)}},{key:"getRegisterUrl",value:function(e){var t=this._config.registerUrl;return this._constructPath(t,e)}},{key:"getTerminalRegisterUrl",value:function(e){var t=this._config.terminalRegisterUrl;return this._constructPath(t,e)}},{key:"getBwRegisterUrl",value:function(e){var t=this._config.bwRegisterUrl;return this._constructPath(t,e)}},{key:"getSettingsUrl",value:function(e){var t=this._config.settingsUrl;return this._constructPath(t,e)}},{key:"getUserInfoUrl",value:function(e){var t=this._config.userInfoUrl;return this._constructPath(t,e,this._apiBaseUrl)}},{key:"getBssoUrl",value:function(e){var t=this._config.bssoUrl;return this._constructPath(t,e,this._apiBaseUrl)}},{key:"getOptInToReferralsUrl",value:function(e){var t=this._config.optInToReferralsUrl;return this._constructPath(t,e,this._apiBaseUrl)}},{key:"getOptOutFromReferralsUrl",value:function(e){var t=this._config.optOutFromReferralsUrl;return this._constructPath(t,e,this._apiBaseUrl)}}]),r(o,a),c);function c(e){!function(e){if(!(e instanceof c))throw new TypeError("Cannot call a class as a function")}(this);var t=e.baseUrl,n=e.apiBaseUrl;this._baseUrl=t,this._apiBaseUrl=n,this._config=e}t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(160)),u=o(n(145)),l=o(n(161));function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(40),n(68);var a=/bloomberg\.com$/i,f="_breg-uid",d="_breg-user",s="_last-refresh",p="session_id",h="session_key",y="agent_id";function v(){var e=u.default.get(y),t=u.default.get(p),n=u.default.get(h),r=u.default.get(f),o=u.default.get(d);return{agentId:e,sessionId:t,sessionKey:n,userId:r,user:o?function(e){try{return JSON.parse(decodeURIComponent(e))}catch(e){return null}}(o):null}}var c,m,b,n=(m=g,b=[{key:"fetchUserInfo",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return g.isOnBbgComSite()?this._fetchUserInfoForSameSite(e,t):this._fetchUserInfoForDifferentSite(e,t)}},{key:"optInToReferralSharing",value:function(e){return this._fetchFromRegAPIForSameSite(this._optInUrl,{method:"PUT",body:{productRatePlanId:e}})}},{key:"optOutOfReferralSharing",value:function(e){return this._fetchFromRegAPIForSameSite(this._optOutUrl,{method:"PUT",body:{defaulted:e}})}},{key:"_fetchUserInfoForSameSite",value:function(n,e){var t=!e&&!!u.default.get(s),e=!!u.default.get(y);g.isFetchInProgress()||(t&&e?n(null,v()):(g.lock(),g.jsonp(this._userInfoUrl,{timeout:5e3},function(e,t){return g.unlock(),e?n(e,!1):void n(e,t)})))}},{key:"_fetchUserInfoForDifferentSite",value:function(c,e){var t=!e&&!!u.default.get(s),e=!!u.default.get(y);g.isFetchInProgress()||(t&&e?c(null,v()):(g.lock(),g.jsonp(this._userInfoUrl,{timeout:5e3},function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(g.unlock(),e)return c(e,!1);var n=t.userId,r=t.user,o=t.sessionId,i=t.sessionKey,a=t.agentId,s=(0,l.default)();u.default.set(y,a,{expires:s}),u.default.set(p,o,{expires:s}),u.default.set(h,i,{expires:s}),n&&u.default.set(f,n,{expires:s}),r&&u.default.set(d,encodeURIComponent(JSON.stringify(r)),{expires:s}),c(e,t)})))}},{key:"_fetchFromRegAPIForSameSite",value:function(e,t){var n={method:t.method,headers:{Accept:"application/json","Content-Type":"application/json","x-csrf-token":u.default.get("_reg-csrf-token")},credentials:"include"};return t.body&&(n.body=JSON.stringify(t.body)),g.fetch(e,n).then(function(e){return e.json()})}}],n=[{key:"lock",value:function(){window.__regUIFetchInProgress=!0}},{key:"unlock",value:function(){window.__regUIFetchInProgress=!1}},{key:"isFetchInProgress",value:function(){return window.__regUIFetchInProgress}},{key:"isOnBbgComSite",value:function(){return a.test(window.location.hostname)}},{key:"jsonp",value:function(e,t,n){return(0,r.default)(e,t,n)}},{key:"fetch",value:(c=function(e,t){return fetch(e,t)},_.toString=function(){return c.toString()},_)}],i(m.prototype,b),i(m,n),g);function g(e){!function(e){if(!(e instanceof g))throw new TypeError("Cannot call a class as a function")}(this),this._userInfoUrl=e.getUserInfoUrl(),this._optInUrl=e.getOptInToReferralsUrl(),this._optOutUrl=e.getOptOutFromReferralsUrl()}function _(e,t){return c.apply(this,arguments)}t.default=n},function(e,t){e.exports=function(e,t,n){"function"==typeof t&&(n=t,t={});var r,o,i=(t=t||{}).prefix||"__jp",a=t.name||i+l++,s=t.param||"callback",c=null!=t.timeout?t.timeout:6e4,i=encodeURIComponent,t=document.getElementsByTagName("script")[0]||document.head;function u(){r.parentNode&&r.parentNode.removeChild(r),window[a]=f,o&&clearTimeout(o)}return c&&(o=setTimeout(function(){u(),n&&n(new Error("Timeout"))},c)),window[a]=function(e){u(),n&&n(null,e)},e=(e+=(~e.indexOf("?")?"&":"?")+s+"="+i(a)).replace("?&","?"),(r=document.createElement("script")).src=e,t.parentNode.insertBefore(r,t),function(){window[a]&&u()}};var l=0;function f(){}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(){var e=new Date;return e.setFullYear(e.getFullYear()+1),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URLS_MAP=void 0;var n=(r=n(149))&&r.__esModule?r:{default:r},r={loginUrl:"iframe/login",registerUrl:"iframe/register",terminalRegisterUrl:"iframe/terminal-register",bwRegisterUrl:"iframe/magazine",settingsUrl:"account",userInfoUrl:"user-info",bssoUrl:"api/login/bloomberg-auth-redirect",optInToReferralsUrl:"api/referrals/opt-in",optOutFromReferralsUrl:"api/referrals/opt-out"},r={development:(0,n.default)({baseUrl:"http://local.bloomberg.com:4004/account/",apiBaseUrl:"http://local-login.bloomberg.com:4004/"},r),red:(0,n.default)({baseUrl:"https://origin.red.bloomberg.com/account/",apiBaseUrl:"https://red-login.bloomberg.com/"},r),orange:(0,n.default)({baseUrl:"https://origin.orange.bloomberg.com/account/",apiBaseUrl:"https://orange-login.bloomberg.com/"},r),yellow:(0,n.default)({baseUrl:"https://origin.yellow.bloomberg.com/account/",apiBaseUrl:"https://yellow-login.bloomberg.com/"},r),green:(0,n.default)({baseUrl:"https://origin.green.bloomberg.com/account/",apiBaseUrl:"https://green-login.bloomberg.com/"},r),blue:(0,n.default)({baseUrl:"https://origin.blue.bloomberg.com/account/",apiBaseUrl:"https://blue-login.bloomberg.com/"},r),purple:(0,n.default)({baseUrl:"https://origin.purple.bloomberg.com/account/",apiBaseUrl:"https://purple-login.bloomberg.com/"},r),sandcastle:(0,n.default)({baseUrl:"https://origin.sandcastle.bloomberg.com/account/",apiBaseUrl:"https://sandcastle-login.bloomberg.com/"},r),staging:(0,n.default)({baseUrl:"https://origin.staging.bloomberg.com/account/",apiBaseUrl:"https://staging-login.bloomberg.com/"},r),production:(0,n.default)({baseUrl:"https://www.bloomberg.com/account/",apiBaseUrl:"https://login.bloomberg.com/"},r)};t.URLS_MAP=r},function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:window.location.href).split("?")[1];return e?e.split("&").reduce(function(e,t){var n,n=(n=t.split("="),t=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}}(n,t)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),t=n[0],n=n[1];return e[t]=void 0===n||n,e},{}):{}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=["red","orange","yellow","green","blue","purple","sandcastle"];t.default=function(e){e=e.split(".");if(!(e.length<3||"bloomberg"!==e[2])){e=e[1];return-1!==r.indexOf(e)?e:void 0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTerminalSubscriber=t.isBWSubscriber=t.isBBGSubscriber=void 0;function r(){var e=o.default.getJSON(i);return e&&e.subscriptionsData?e.subscriptionsData.reduce(function(t,e){e=e.entitlements;return e&&e.forEach(function(e){return t.add(e)}),t},new Set):new Set}var o=(n=n(145))&&n.__esModule?n:{default:n},i="_user-data",a={BLOOMBERG_ALL:"bbg-all",BLOOMBERG_DIGITAL:"bbg-digital",BUSINESSWEEK_PRINT:"bw-print",BUSINESSWEEK_DIGITAL:"bw-digital",BUSINESSWEEK_ZINIO:"bw-zinio"};t.isBBGSubscriber=function(){var t=r();return[a.BLOOMBERG_ALL,a.BLOOMBERG_DIGITAL].some(function(e){return t.has(e)})},t.isBWSubscriber=function(){var t=r();return[a.BUSINESSWEEK_DIGITAL,a.BUSINESSWEEK_PRINT,a.BUSINESSWEEK_ZINIO].some(function(e){return t.has(e)})},t.isTerminalSubscriber=function(){var e=(e=o.default.getJSON(i))&&e.linkedAccounts?e.linkedAccounts.split("|").reduce(function(e,t){return t&&(e[t]=!0),e},{}):null;return Boolean(e&&e.terminal)}},,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCommonjsModule=function(e){var t={exports:{}};return e(t,t.exports),t.exports}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t){e.exports=function(){return fetch.apply(void 0,arguments).then(function(e){var t=e.ok,n=e.status,r=e.statusText;return e.json().then(function(e){return t?Promise.resolve({status:n,json:e}):Promise.reject({status:n,json:e})},function(){return t?Promise.resolve({status:n,message:r}):Promise.reject({status:n,message:r})})})}},,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(173),o=n(351),r=(n(352),r.createCommonjsModule(function(e){e.exports=o.default}));t.default=r},function(e,t){function n(e){this.globalConfig=e||{}}n.prototype.trackEvent=function(e){e=Object.assign({},this.globalConfig,e);window.dataLayer&&e.event&&e.category&&e.action&&e.label&&window.dataLayer.push({event:e.event,eventCategory:e.category,eventAction:e.action,eventLabel:e.label})},e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(39),o=n(350),i=n(357);var a,s=(a=r)&&"object"==typeof a&&"default"in a?a:{default:a},n=function(e){var t=e.size,n=e.align,r=e.weight,o=e.color,e=e.children,o=[i.default[void 0===t?"standard":t],i.default["text-align-"+(void 0===n?"left":n)],i.default["font-weight-"+(void 0===r?"normal":r)],i.default["color-"+(void 0===o?"black":o)]].join(" ").trim();return s.default.createElement("span",{className:o},e)};n.propTypes={size:o.default.oneOf(["small","standard","large","xlarge","xxlarge"]),weight:o.default.oneOf(["normal","bold"]),align:o.default.oneOf(["left","center","right"]),color:o.default.oneOf(["black","white"]),children:o.default.string.isRequired},t.default=n},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n(359)},function(e,t,n){"use strict";var a=n(349);function r(){}function o(){}o.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,o,i){if(i!==a){i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}var n={array:e.isRequired=e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:r};return n.PropTypes=n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(173),o=(n(185),n(353),n(356)),r=r.createCommonjsModule(function(e){e.exports=o.default()});t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&Symbol.for,o=r?Symbol.for("react.element"):60103,i=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,c=r?Symbol.for("react.profiler"):60114,u=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,f=r?Symbol.for("react.async_mode"):60111,d=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,h=r?Symbol.for("react.suspense"):60113,y=r?Symbol.for("react.suspense_list"):60120,v=r?Symbol.for("react.memo"):60115,m=r?Symbol.for("react.lazy"):60116,b=r?Symbol.for("react.block"):60121,g=r?Symbol.for("react.fundamental"):60117,_=r?Symbol.for("react.responder"):60118,w=r?Symbol.for("react.scope"):60119;function S(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case o:switch(e=e.type){case f:case d:case a:case c:case s:case h:return e;default:switch(e=e&&e.$$typeof){case l:case p:case m:case v:case u:return e;default:return t}}case i:return t}}}function E(e){return S(e)===d}function O(e){return E(e)||S(e)===f}function P(e){return S(e)===l}function x(e){return S(e)===u}function I(e){return"object"==typeof e&&null!==e&&e.$$typeof===o}function k(e){return S(e)===p}function j(e){return S(e)===a}function T(e){return S(e)===m}function U(e){return S(e)===v}function A(e){return S(e)===i}function C(e){return S(e)===c}function R(e){return S(e)===s}function B(e){return S(e)===h}function M(e){return"string"==typeof e||"function"==typeof e||e===a||e===d||e===c||e===s||e===h||e===y||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===u||e.$$typeof===l||e.$$typeof===p||e.$$typeof===g||e.$$typeof===_||e.$$typeof===w||e.$$typeof===b)}var L=d,N=l,F=u,D=o,H=p,W=a,G=m,q=v,$=i,z=c,V=s,K=h,J=E,Y=S,r={AsyncMode:f,ConcurrentMode:L,ContextConsumer:N,ContextProvider:F,Element:D,ForwardRef:H,Fragment:W,Lazy:G,Memo:q,Portal:$,Profiler:z,StrictMode:V,Suspense:K,isAsyncMode:O,isConcurrentMode:J,isContextConsumer:P,isContextProvider:x,isElement:I,isForwardRef:k,isFragment:j,isLazy:T,isMemo:U,isPortal:A,isProfiler:C,isStrictMode:R,isSuspense:B,isValidElementType:M,typeOf:Y};t.AsyncMode=f,t.ConcurrentMode=L,t.ContextConsumer=N,t.ContextProvider=F,t.Element=D,t.ForwardRef=H,t.Fragment=W,t.Lazy=G,t.Memo=q,t.Portal=$,t.Profiler=z,t.StrictMode=V,t.Suspense=K,t.default=r,t.isAsyncMode=O,t.isConcurrentMode=J,t.isContextConsumer=P,t.isContextProvider=x,t.isElement=I,t.isForwardRef=k,t.isFragment=j,t.isLazy=T,t.isMemo=U,t.isPortal=A,t.isProfiler=C,t.isStrictMode=R,t.isSuspense=B,t.isValidElementType=M,t.typeOf=Y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n=n(173).createCommonjsModule(function(e,t){});t.default=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var p=n(185),h=n(354),y=n(174),r=n(355),v=Function.call.bind(Object.prototype.hasOwnProperty);function o(){return null}t.default=function(i,c){var a="function"==typeof Symbol&&Symbol.iterator,u="<<anonymous>>",e={array:t("array"),bool:t("boolean"),func:t("function"),number:t("number"),object:t("object"),string:t("string"),symbol:t("symbol"),any:n(o),arrayOf:function(c){return n(function(e,t,n,r,o){if("function"!=typeof c)return new l("Property `"+o+"` of component `"+n+"` has invalid PropType notation inside arrayOf.");var i=e[t];if(!Array.isArray(i))return new l("Invalid "+r+" `"+o+"` of type `"+f(i)+"` supplied to `"+n+"`, expected an array.");for(var a=0;a<i.length;a++){var s=c(i,a,n,r,o+"["+a+"]",y.default);if(s instanceof Error)return s}return null})},element:n(function(e,t,n,r,o){t=e[t];return i(t)?null:new l("Invalid "+r+" `"+o+"` of type `"+f(t)+"` supplied to `"+n+"`, expected a single ReactElement.")}),elementType:n(function(e,t,n,r,o){t=e[t];return p.default.isValidElementType(t)?null:new l("Invalid "+r+" `"+o+"` of type `"+f(t)+"` supplied to `"+n+"`, expected a single ReactElement type.")}),instanceOf:function(a){return n(function(e,t,n,r,o){if(e[t]instanceof a)return null;var i=a.name||u;return new l("Invalid "+r+" `"+o+"` of type `"+((t=e[t]).constructor&&t.constructor.name?t.constructor.name:u)+"` supplied to `"+n+"`, expected instance of `"+i+"`.")})},node:n(function(e,t,n,r,o){return s(e[t])?null:new l("Invalid "+r+" `"+o+"` supplied to `"+n+"`, expected a ReactNode.")}),objectOf:function(c){return n(function(e,t,n,r,o){if("function"!=typeof c)return new l("Property `"+o+"` of component `"+n+"` has invalid PropType notation inside objectOf.");var i,a=e[t],t=f(a);if("object"!==t)return new l("Invalid "+r+" `"+o+"` of type `"+t+"` supplied to `"+n+"`, expected an object.");for(i in a)if(v(a,i)){var s=c(a,i,n,r,o+"."+i,y.default);if(s instanceof Error)return s}return null})},oneOf:function(u){return Array.isArray(u)?n(function(e,t,n,r,o){for(var i,a,s=e[t],c=0;c<u.length;c++)if(i=s,a=u[c],i===a?0!==i||1/i==1/a:i!=i&&a!=a)return null;t=JSON.stringify(u,function(e,t){return"symbol"===d(t)?String(t):t});return new l("Invalid "+r+" `"+o+"` of value `"+String(s)+"` supplied to `"+n+"`, expected one of "+t+".")}):o},oneOfType:function(a){if(!Array.isArray(a))return o;for(var e=0;e<a.length;e++){var t=a[e];if("function"!=typeof t)return function(e){var t=d(e);switch(t){case"array":case"object":return;case"boolean":case"date":case"regexp":return;default:;}}(t),o}return n(function(e,t,n,r,o){for(var i=0;i<a.length;i++)if(null==(0,a[i])(e,t,n,r,o,y.default))return null;return new l("Invalid "+r+" `"+o+"` supplied to `"+n+"`.")})},shape:function(c){return n(function(e,t,n,r,o){var i,a=e[t],t=f(a);if("object"!==t)return new l("Invalid "+r+" `"+o+"` of type `"+t+"` supplied to `"+n+"`, expected `object`.");for(i in c){var s=c[i];if(s){s=s(a,i,n,r,o+"."+i,y.default);if(s)return s}}return null})},exact:function(u){return n(function(e,t,n,r,o){var i,a=e[t],s=f(a);if("object"!==s)return new l("Invalid "+r+" `"+o+"` of type `"+s+"` supplied to `"+n+"`, expected `object`.");for(i in h.default({},e[t],u)){var c=u[i];if(!c)return new l("Invalid "+r+" `"+o+"` key `"+i+"` supplied to `"+n+"`.\nBad object: "+JSON.stringify(e[t],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(u),null,"  "));c=c(a,i,n,r,o+"."+i,y.default);if(c)return c}return null})}};function l(e){this.message=e,this.stack=""}function n(s){function e(e,t,n,r,o,i,a){if(r=r||u,i=i||n,a!==y.default&&c){a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}return null==t[n]?e?null===t[n]?new l("The "+o+" `"+i+"` is marked as required in `"+r+"`, but its value is `null`."):new l("The "+o+" `"+i+"` is marked as required in `"+r+"`, but its value is `undefined`."):null:s(t,n,r,o,i)}var t=e.bind(null,!1);return t.isRequired=e.bind(null,!0),t}function t(a){return n(function(e,t,n,r,o,i){t=e[t];return f(t)!==a?new l("Invalid "+r+" `"+o+"` of type `"+d(t)+"` supplied to `"+n+"`, expected `"+a+"`."):null})}function s(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(s);if(null===t||i(t))return!0;var e=function(){var e=t&&(a&&t[a]||t["@@iterator"]);if("function"==typeof e)return e}();if(!e)return!1;var n,r=e.call(t);if(e!==t.entries){for(;!(n=r.next()).done;)if(!s(n.value))return!1}else for(;!(n=r.next()).done;){var o=n.value;if(o&&!s(o[1]))return!1}return!0;default:return!1}}function f(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":"symbol"==t||e&&("Symbol"===e["@@toStringTag"]||"function"==typeof Symbol&&e instanceof Symbol)?"symbol":t}function d(e){if(null==e)return""+e;var t=f(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}return l.prototype=Error.prototype,e.checkPropTypes=r.default,e.resetWarningCache=r.default.resetWarningCache,e.PropTypes=e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable;var r=function(){try{if(!Object.assign)return;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return}}()?Object.assign:function(e,t){for(var n,r=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),o=1;o<arguments.length;o++){for(var i in n=Object(arguments[o]))u.call(n,i)&&(r[i]=n[i]);if(c)for(var a=c(n),s=0;s<a.length;s++)l.call(n,a[s])&&(r[a[s]]=n[a[s]])}return r};t.default=r},function(e,t,n){"use strict";function r(e,t,n,r,o){}Object.defineProperty(t,"__esModule",{value:!0}),n(174),r.resetWarningCache=function(){},t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(174);function r(){}function o(){}o.resetWarningCache=r,t.default=function(){function e(e,t,n,r,o,i){if(i!==a.default){i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}var n={array:e.isRequired=e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:r};return n.PropTypes=n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(358).default(".styles_small__17iL6{font-size:12px}.styles_standard__24rYH{font-size:14px}.styles_large__9u9Wo{font-size:16px}.styles_xlarge__2THrA{font-size:18px}.styles_xxlarge__1sOZb{font-size:22px}.styles_font-weight-normal__3eA7N{font-family:BWHaasGrotesk-55Roman-Web,Helvetica,Arial,sans-serif}.styles_font-weight-bold__2cePf{font-family:BWHaasGrotesk-75Bold-Web,Helvetica,Arial,sans-serif}.styles_text-align-left__rejGO{text-align:left}.styles_text-align-right__2KZYz{text-align:right;display:block}.styles_text-align-center__1kIxx{text-align:center;display:block}.styles_color-black__1Xe9m{color:#000}.styles_color-white__2EPol{color:#fff}"),t.default={small:"styles_small__17iL6",standard:"styles_standard__24rYH",large:"styles_large__9u9Wo",xlarge:"styles_xlarge__2THrA",xxlarge:"styles_xxlarge__1sOZb","font-weight-normal":"styles_font-weight-normal__3eA7N","font-weight-bold":"styles_font-weight-bold__2cePf","text-align-left":"styles_text-align-left__rejGO","text-align-right":"styles_text-align-right__2KZYz","text-align-center":"styles_text-align-center__1kIxx","color-black":"styles_color-black__1Xe9m","color-white":"styles_color-white__2EPol"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n,r=(t=void 0===t?{}:t).insertAt;e&&"undefined"!=typeof document&&(n=document.head||document.getElementsByTagName("head")[0],(t=document.createElement("style")).type="text/css","top"===r&&n.firstChild?n.insertBefore(t,n.firstChild):n.appendChild(t),t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)))}},function(e,t,n){"use strict";n.r(t);var s=n(39),d=n.n(s),t=n(153),c=n.n(t),t=n(187),r=n.n(t),t=n(150),t=n.n(t),u={"modal-overlay":"modal-overlay__c22ced61",modalOverlay:"modal-overlay__c22ced61",modal:"modal__41d104f7",header:"header__8672f4f9","top-left-module":"top-left-module__e6b6f893",topLeftModule:"top-left-module__e6b6f893",title:"title__b9b4b8c4","top-right-module":"top-right-module__6b771680",topRightModule:"top-right-module__6b771680",footer:"footer__c27120f9",small:"small__e5e1e769",medium:"medium__d7014bec",body:"body__8d297e58"};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e){if(e){if("string"==typeof e)return a(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?a(e,void 0):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=y(n);return e=r?(e=y(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==o(e)&&"function"!=typeof e?h(t):e}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e){return e&&e.focus()}var m=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(n,s.Component);var t=p(n);function n(){var e;return function(e){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),(e=t.call(this)).state={mounted:!1},e.origin=null,e.firstFocusable=null,e.lastFocusable=null,e.firstFocusTrap=Object(s.createRef)(),e.lastFocusTrap=Object(s.createRef)(),e.modalRef=Object(s.createRef)(),e.handlePressEsc=e.handlePressEsc.bind(h(e)),e.handleFocusTrap=e.handleFocusTrap.bind(h(e)),e.handleOutsideClick=e.handleOutsideClick.bind(h(e)),e}return l(n.prototype,[{key:"componentDidUpdate",value:function(e){this.props.isOpen!==e.isOpen&&(this.props.isOpen?(document.body.style.overflow="hidden",this.setFocusableElements(),v(this.firstFocusable)):(document.body.style.overflow="",v(this.origin),this.unsetFocusableElements()))}},{key:"componentDidMount",value:function(){var e=this;this.setState({mounted:!0},function(){e.props.isOpen&&(document.body.style.overflow="hidden",e.setFocusableElements(),v(e.firstFocusable))})}},{key:"setFocusableElements",value:function(){var e=this.modalRef.current.querySelectorAll("button, [href], input, select, textarea, [tabindex]:not([tabindex='-1'])");this.origin=document.activeElement,this.firstFocusable=i(e).shift()||this.firstFocusTrap.current,this.lastFocusable=i(e).pop()||this.lastFocusTrap.current}},{key:"unsetFocusableElements",value:function(){this.origin=null,this.firstFocusable=null,this.lastFocusable=null}},{key:"handleFocusTrap",value:function(e){this.lastFocusTrap.current===e.target&&v(this.firstFocusable),this.firstFocusTrap.current===e.target&&v(this.lastFocusable)}},{key:"handlePressEsc",value:function(e){this.props.isOpen&&27===e.keyCode&&this.props.onClose(e)}},{key:"handleOutsideClick",value:function(e){this.modalRef.current&&this.modalRef.current.contains(e.target)||this.props.onClose(e)}},{key:"render",value:function(){if(!this.props.isOpen||!this.state.mounted)return null;var e=this.props,t=e.title,n=e.children,r=e.topLeftModule,o=e.topRightModule,i=e.bottomModule,a=e.isHidden,e=e.size,o=t&&d.a.createElement("div",{className:u.header},d.a.createElement("div",{className:u.topLeftModule},r),d.a.createElement("h4",{className:u.title},t),d.a.createElement("div",{className:u.topRightModule},o)),e=[u.modal,u[e]].join(" ");return Object(s.createPortal)(d.a.createElement("div",{"aria-hidden":a,className:u.modalOverlay,onClick:this.handleOutsideClick,onFocus:this.handleFocusTrap,onKeyDown:this.handlePressEsc,"data-testid":"modal-overlay",role:"presentation"},d.a.createElement("div",{tabIndex:"0",ref:this.firstFocusTrap}),d.a.createElement("div",{className:e,ref:this.modalRef,role:"dialog","aria-modal":"true","aria-label":t,"data-testid":"modal"},o,d.a.createElement("div",{className:u.body},n),d.a.createElement("div",{className:u.footer},i)),d.a.createElement("div",{tabIndex:"0",ref:this.lastFocusTrap})),document.body)}}]),n}();m.defaultProps={title:"",topLeftModule:null,topRightModule:null,bottomModule:null,children:null,isHidden:!1,size:"medium"},m.propTypes={title:t.a.string,topLeftModule:t.a.element,topRightModule:t.a.element,bottomModule:t.a.element,children:t.a.element,isHidden:t.a.bool,size:t.a.oneOf(["small","medium"])};function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function g(e){return d.a.createElement("button",b({"aria-label":"Close",className:"x-button__6ea99fc6",onClick:e.onClick},e))}function _(t){var e=t.selected,n=t.text,e="preference-button".concat(e?" preference-button--selected":"");return d.a.createElement("div",{className:"preference-button__wrapper"},d.a.createElement("button",{className:e,onClick:function(e){e.preventDefault(),t.onClick(t.id)},"aria-label":n,name:n},d.a.createElement("div",{className:"preference-button__text"},n),d.a.createElement("div",{className:"preference-button__plus"}),d.a.createElement("div",{className:"preference-button__checkmark"})))}var t=n(186),w=n.n(t),S=n(155),t=n(175),E=n.n(t);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function x(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function I(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?x(Object(o),!0).forEach(function(e){var t,n;t=r,e=o[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):x(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=A(n);return e=r?(e=A(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==O(e)&&"function"!=typeof e?U(t):e}}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var C="signed-in",R="signing-in",B="loading",M="preferencesIntroBubbleViewed",L=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(a,s.Component);var e,i=T(a);function a(e){var t;!function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this);var n=(t=i.call(this,e)).props,r=n.fetchedPreferences,o=n.hidden,e=n.signInStatus,n="viewed"!==localStorage.getItem(M);t.state={hidden:o,selectedPreferences:r||[],showIntro:n,signInStatus:e,showSignInSpinner:!1,submissionState:"normal"},t.tracker=new w.a({category:"latest_preferences",event:"latest_preferences_event"}),t.onAddTopics=t.onAddTopics.bind(U(t)),t.onApplyPreferences=t.onApplyPreferences.bind(U(t)),t.onCloseIntro=t.onCloseIntro.bind(U(t)),t.onManageTopics=t.onManageTopics.bind(U(t)),t.onPreferenceSelected=t.onPreferenceSelected.bind(U(t)),t.onPrefModalCloseClick=t.onPrefModalCloseClick.bind(U(t)),t.onRegModalClose=t.onRegModalClose.bind(U(t)),t.onRegModalOpen=t.onRegModalOpen.bind(U(t)),t.onSignIn=t.onSignIn.bind(U(t)),t.onSignInClick=t.onSignInClick.bind(U(t)),t.onSignOut=t.onSignOut.bind(U(t)),t.openRegModal=t.openRegModal.bind(U(t));n=window.__bloomberg__.environment,e=n.registrationEnv,n=n.registrationUrl;return t.engagementsUrl="".concat(n,"/api/engagements/latest-preferences"),t.regUIClient=new c.a(null,{environment:e}),t.regUIClient.initialize(),t}return e=[{key:"componentDidMount",value:function(){var e=this.state.signInStatus,t=this.props,n=t.fetchedPreferences,r=t.storiesElement,t=t.moduleProvenance;n.length||r.classList.add("story-list-module__stories--with-preferences-CTA"),"canonical"===t&&(this.regUIClient.initialize(),e?window.addEventListener("reg-user-signed-in",this.onSignIn):window._regUserId?this.onSignIn():this.regUIClient.verifySignInStatus(this.onSignIn,this.onSignOut)),window.addEventListener("reg-ui-show-pop-up",this.onRegModalOpen),window.addEventListener("reg-ui-close-pop-up",this.onRegModalClose)}},{key:"componentWillUnmount",value:function(){this.removeEventListeners()}},{key:"removeEventListeners",value:function(){window.removeEventListener("reg-user-signed-in",this.onSignIn),window.removeEventListener("reg-ui-show-pop-up",this.onRegModalOpen),window.removeEventListener("reg-ui-close-pop-up",this.onRegModalClose)}},{key:"submitUserPreferences",value:function(){var t=this,e={topicIds:this.state.selectedPreferences};E()(this.engagementsUrl,I(I({},{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"}),{},{body:JSON.stringify(e)})).then(function(e){t.handleEngagements(e.json)}).catch(function(e){401!==e.status?(t.setState({submissionState:"error"}),console.error("Preferences fetch failed: ".concat(JSON.stringify(e.json)))):t.setState({signInStatus:R},t.openRegModal)})}},{key:"fetchUserPreferences",value:function(){var t=this;E()(this.engagementsUrl,I({},{method:"GET",headers:{Accept:"application/json"},credentials:"include"})).then(function(e){t.handleEngagements(e.json)}).catch(function(e){t.broadcastPreferenceState(C,[]),console.error("Preferences fetch failed: ".concat(JSON.stringify(e.json)))})}},{key:"handleEngagements",value:function(e){e=e.map(function(e){return e.resourceId});this.broadcastPreferenceState(C,e),this.setState({hidden:!0})}},{key:"broadcastPreferenceState",value:function(e,t){var n=this.props.moduleProvenance,r=Object(S.groupPreferencesByTagType)(t);window.__bloomberg__.eventBus.publish("preferences-fetched",{signInStatus:e,fetchedPreferences:t,preferencesByTagType:r,moduleProvenance:n})}},{key:"onAddTopics",value:function(){this.setState({hidden:!1,showIntro:!1}),localStorage.setItem(M,"viewed"),this.tracker.trackEvent({action:"click",label:"cta-click"})}},{key:"onApplyPreferences",value:function(){var e=this;this.tracker.trackEvent({action:"click",label:"submit-preferences-click | ".concat(this.state.selectedPreferences.join())}),this.state.signInStatus!==C?this.setState({submissionState:B,signInStatus:R},this.openRegModal):this.setState({submissionState:B},function(){e.submitUserPreferences()})}},{key:"onRegModalOpen",value:function(){this.setState({hidden:!0,showSignInSpinner:!1})}},{key:"onCloseIntro",value:function(){this.setState({showIntro:!1}),localStorage.setItem(M,"viewed"),this.tracker.trackEvent({action:"click",label:"close-intro-click"})}},{key:"onManageTopics",value:function(){this.setState({hidden:!1}),this.tracker.trackEvent({action:"click",label:"manage-topics-click"})}},{key:"onPreferenceSelected",value:function(e){var t,n=function(e){if(Array.isArray(e))return P(e)}(t=this.state.selectedPreferences)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e){if(e){if("string"==typeof e)return P(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?P(e,void 0):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),t=this.state.selectedPreferences.indexOf(e);-1!==t?(n.splice(t,1),this.tracker.trackEvent({action:"click",label:"deselect-preference-click | ".concat(e)})):(n.push(e),this.tracker.trackEvent({action:"click",label:"select-preference-click | ".concat(e)})),this.setState({selectedPreferences:n})}},{key:"onPrefModalCloseClick",value:function(){var e=0<this.props.fetchedPreferences.length?this.props.fetchedPreferences:[];this.setState({hidden:!0,selectedPreferences:e}),this.tracker.trackEvent({action:"click",label:"modal-close-click"})}},{key:"onRegModalClose",value:function(){this.setState({submissionState:"normal"})}},{key:"onSignIn",value:function(){this.state.submissionState===B?this.submitUserPreferences():this.fetchUserPreferences()}},{key:"onSignInClick",value:function(){this.setState({signInStatus:R,showSignInSpinner:!0},this.openRegModal),this.tracker.trackEvent({action:"click",label:"sign-in-click"})}},{key:"onSignOut",value:function(){this.broadcastPreferenceState("signed-out",[])}},{key:"openRegModal",value:function(){this.regUIClient.linkToSignIn()}},{key:"render",value:function(){var t=this,e=this.state,n=e.hidden,r=e.selectedPreferences,o=e.showIntro,i=e.showSignInSpinner,a=e.signInStatus,s=e.submissionState,c=this.props,u=c.fetchedPreferences,l=c.moduleElement,f=0<u.length,e=a!==C,c=s===B,u=a===C?"Apply":"Sign in to continue";return a?d.a.createElement("div",{className:"preferences__wrapper"},!f&&d.a.createElement(N,{onAddTopics:this.onAddTopics}),f&&d.a.createElement("div",{className:"preferences__title"}," From your interests "),!f&&o&&d.a.createElement(D,{onClose:this.onCloseIntro}),d.a.createElement(m,{size:"medium",isOpen:!n,onClose:this.onPrefModalCloseClick},d.a.createElement(g,{onClick:this.onPrefModalCloseClick,"data-classname":"close-button"}),d.a.createElement("div",{className:"preferences__label-wrapper"},d.a.createElement("div",{className:"preferences__label"},"Add topics that matter to you")),d.a.createElement("section",{className:"preferences"},Object.keys(S.PREFERENCES).map(function(e){return d.a.createElement("div",{className:"preferences__category"},d.a.createElement("div",{className:"preferences__category-label"},e),Object.values(S.PREFERENCES[e]).map(function(e){return d.a.createElement(_,{id:e.id,text:e.text,selected:-1!==r.indexOf(e.id),onClick:t.onPreferenceSelected})}))}),d.a.createElement("div",{className:"preferences__opaque-background"})),d.a.createElement("div",{className:"preferences__apply-button-wrapper"},d.a.createElement("button",{className:"preferences__apply-button".concat(c?" preferences__apply-button--loading":""),onClick:this.onApplyPreferences,disabled:!r.length||c},c?"":u,d.a.createElement("div",{className:"preferences__apply-button__loading-dots"},d.a.createElement("span",{className:"preferences__apply-button__loading-dot"}),d.a.createElement("span",{className:"preferences__apply-button__loading-dot"}),d.a.createElement("span",{className:"preferences__apply-button__loading-dot"})))),e&&d.a.createElement(W,{onSignInClick:this.onSignInClick,showSignInSpinner:i}),"error"===s&&d.a.createElement(F,null)),f&&d.a.createElement(H,{onManageTopics:this.onManageTopics,moduleElement:l})):null}}],k(a.prototype,e),a}(),N=function(e){e=e.onAddTopics;return d.a.createElement("div",{className:"preferences__call-to-action"},d.a.createElement("div",{className:"preferences__call-to-action__text"}," Get the latest from the topics you follow "),d.a.createElement("button",{className:"preferences__add-topics-button",onClick:e},"Add my topics"),d.a.createElement("div",{className:"preferences__call-to-action__text"}," You might like: "))},F=function(){return d.a.createElement("div",{className:"preferences__error-message"},"Network error. Please try again.")},D=function(e){e=e.onClose;return d.a.createElement("div",{className:"preferences__intro-bubble"},d.a.createElement("div",{className:"preferences__intro-bubble-message"},d.a.createElement("div",{className:"preferences__intro-bubble-new"},"NEW"),"Get the latest stories based on your interests."),d.a.createElement("button",{className:"preferences__intro-bubble-x","aria-label":"Close bubble",onClick:e}))},H=function(e){var t=e.onManageTopics,e=e.moduleElement;return Object(s.createPortal)(d.a.createElement("button",{className:"preferences__manage-topics-button",onClick:t},"Manage Topics"),e)},W=function(e){var t=e.onSignInClick,e=e.showSignInSpinner;return d.a.createElement("div",{className:"preferences__sign-in"},d.a.createElement(r.a,{size:"standard"}," Already have your topics saved? "),d.a.createElement("button",{className:"preferences__sign-in__button",onClick:t}," Sign In "),e&&d.a.createElement("div",{className:"preferences__sign-in__spinner"}))};function G(e,t){var n=t.moduleProvenance,r=t.signInStatus,o=t.fetchedPreferences,i=void 0===o?[]:o,a="".concat('.story-list-module[data-variation="preferences"]','[data-module-provenance="').concat(n,'"]'),t="".concat(a," ").concat(".story-list-module__preferences"),o="".concat(a," ").concat(".story-list-module__stories"),a=e.querySelector(a),t=e.querySelector(t),o=e.querySelector(o);return t&&Object(s.render)(d.a.createElement(L,{hidden:!0,fetchedPreferences:i,signInStatus:r,moduleProvenance:n,moduleElement:a,storiesElement:o}),t),t}window.__bloomberg__.eventBus.subscribe("abba-variant-loaded",function e(){window.__bloomberg__.eventBus.unsubscribe("abba-variant-loaded",e);var t=G(document,{moduleProvenance:"canonical"}),n=G(document,{moduleProvenance:"shadow"});window.__bloomberg__.eventBus.subscribe("preferences-module-reloaded",function(e){"canonical"===e.moduleProvenance?(Object(s.unmountComponentAtNode)(t),t=G(document,e)):(Object(s.unmountComponentAtNode)(n),n=G(document,e))})})}],i={},o.m=r,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=347);function o(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}var r,i});
