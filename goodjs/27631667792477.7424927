function __trcCopyProps(e,t,i){for(r in e)t[r]=e[r];if(i)for(var r in i)t[r]=i[r];return t}function __trcFromError(e){return TRC.Browser.ie&&e.message?e.message+"["+e.number+": "+e.name+"]":e.message?e.message+(e.fileName?e.fileName+":"+e.lineNumber:""):e}function __trcClientTimestamp(){var e=new Date,t=e.getHours(),i=e.getMinutes(),e=e.getSeconds()+e.getMilliseconds()/1e3;return(t<10?"0":"")+t+":"+(i<10?"0":"")+i+":"+(e<10?"0":"")+e.toFixed(3)}function __trcLog(e,t,i,r){if(TRC.pConsole("page",TRC.modDebug.getType(e),t,t),"0"==e&&TRC.pConsole("errors",TRC.modDebug.getType(e),t,t),!(window.trc_debug_level<e)){"object"==typeof window.console&&console.log(t);try{var n,o;!isNaN(r)&&null!==r||(r=1),s=e,l=r,Math.random()<=+l&&(s<=window.trc_debug_level||document.cookie&&0<document.cookie.search("taboola-debug"))&&(n={pct:r},(a=i)&&a.stack&&window.TRCImpl&&TRC.util&&TRC.util.isPercentEnabled(window.TRCImpl.global,"rbox-error-stack-reporting-pct")&&(o=TRCImpl&&TRCImpl.global["rbox-err-stack-max-length"]||250,n.errStack=i.stack.substr(0,o)),TRC.modDebug.logMessageToServer(e,t,n))}catch(e){}}var a,s,l}function __trcError(e,t,i){__trcLog(0,e+(t?": "+__trcFromError(t):""),t,i),t&&t.stack&&void 0!==window.console&&console.trace&&console.trace()}function __trcDebug(e,t,i){__trcLog(3,e,t,i)}function __trcInfo(e,t,i){__trcLog(2,e,t,i)}function __trcWarn(e,t,i){__trcLog(1,e+(t?"("+t+")":""),t,i)}function __trcDOMWalker(e,t){for(t(e),e=e.firstChild;e;)arguments.callee(e,t),e=e.nextSibling}function __trcJSONify(e){return window.JSON.stringify(e)}function __trcUnJSONify(t){try{return"string"==typeof t?TRC.util.jsonParseWithNative(t):t}catch(e){throw new Error("JSON parse update error - invalid input! "+t)}}function __trcTrim(e){return e.replace(/^\s+|\s+$/g,"")}function __trcGetElementsByClass(e,t,i){for(var r,n=[],o=new RegExp("(^|\\s)"+e+"(\\s|$)"),a=(r=(i=i||document).getElementsByTagName(t=t||"*")).length,s=0;s<a;s++)o.test(r[s].className)&&n.push(r[s]);return n}function __trcToArray(e,t){for(var i in e)e.hasOwnProperty(i)&&t.push([i,e[i]])}function __trcObjectCreate(e){if("function"==typeof Object.create)return Object.create(e);function t(){}if(e!==Object(e)&&null!==e)throw TypeError("Argument must be an object, or null");t.prototype=e||{};var i=new t;return(t.prototype=null)===e&&(i.__proto__=null),i}!function(e){e.TRC=e.TRC||{},e.TRC.sharedObjects=e.TRC.sharedObjects||{},e.TRC.sharedObjects.loadedScripts=e.TRC.sharedObjects.loadedScripts||{},e.TRC.sharedObjects.loadedPixels=e.TRC.sharedObjects.loadedPixels||{}}(window),((i,r,n)=>{const o="trc_modal_hidden",a="trc_modal_mask",s="trc_modal_dialog",l="trc_close_modal",c=r.createElement("div"),d=r.createElement("div");let h,u="";function p(){m(d,o),m(c,o),n.dom.off(r,"keyup",g),n.dom.off(r,"click",f),n.dom.off(r.getElementById(l),"click",f),n.dom.off(i,"message",C)}function e(e){const t=r.createElement("div");return t.id=`tbl-aug-${Math.floor(2147483648*Math.random()).toString(36)}`,u=`#${t.id}`,e&&e.appendChild(t),t}const m=function(e,t){if(e.classList)return e.classList.add(t);n.dom.removeClass(e,t),e.className+=` ${t}`},g=e=>{27===(e.which||e.keyCode)&&p()},f=e=>{var t=e.target||e.srcElement;t!==d&&t.id!==l||(n.dom.stopEvent(e),p())},C=e=>{/http(s)?:\/\/www\.taboola\.com/.test(e.origin)&&e.data&&1025==+e.data&&p()},b=function(e){TRC.dom.injectStyle(`${e} .trc_modal_dialog { width: 660px; height: 550px; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; padding: 12px; border: 2px solid #417cc3; position: fixed; z-index: 9999999; background: #f7f9fc; top: 50%; left: 50%; margin-top: -250px; margin-left: -330px; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; -ms-box-sizing: content-box; -o-box-sizing: content-box; box-sizing: content-box; -webkit-box-shadow: black 0 0 18px 0; -moz-box-shadow: black 0 0 18px 0; -ms-box-shadow: black 0 0 18px 0; -o-box-shadow: black 0 0 18px 0; box-shadow: black 0 0 18px 0; -webkit-border-radius: 10px; -moz-border-radius: 10px; -ms-border-radius: 10px; -o-border-radius: 10px; border-radius: 10px; }${e} .trc_modal_mask { z-index: 9999998; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: #000; opacity: 0.5; filter: alpha(opacity=50); }${e} .trc_modal_close { font-family: sans-serif !important; width: 30px !important; height: 30px !important; font-size: 30px !important; font-weight: bold !important; line-height: 28px !important; color: #fff !important; text-shadow: 0 1px 0 #000; opacity: 0.9; filter: alpha(opacity=90); background: #417cc3; padding: 0; cursor: pointer; border: 0; -webkit-appearance: none; text-align: center; position: absolute !important; top: -13px; right: -13px; text-decoration: none !important; z-index: 9; -webkit-border-radius: 15px !important; -moz-border-radius: 15px !important; -ms-border-radius: 15px !important; -o-border-radius: 15px !important; border-radius: 15px !important; }${e} .trc_modal_hidden { display: none !important; }${e} .trc_modal_frame { width: 100% !important; height: 550px !important; }`,null)},T=e(),t=e(T),v=e(t);n.aboutUs={open:function(e){const t=function(e,t){for(;e.tagName.toUpperCase()!==t.toUpperCase();)e=e.parentNode;return e}(e.target||e.srcElement,"A");e&&n.dom.stopEvent(e),h||(m(d,a),m(d,o),m(c,s),m(c,o),v.appendChild(d),v.appendChild(c),r.body.appendChild(T),b(u),h=!0);e=t.getAttribute("tblEnablesScrolling");c.innerHTML=function(e,t="no"){const i=[];return i.push(`<a id="${l}" class="trc_modal_close">&times;</a>\n                <iframe class="trc_modal_frame" scrolling=${t} frameborder=0 allowTransparency=true src="${e}"></iframe>`),i.join("")}(t.href,e),n.dom.removeClass(d,"trc_modal_hidden"),n.dom.removeClass(c,"trc_modal_hidden"),n.dom.on(r,"keyup",g),n.dom.on(r,"click",f),n.dom.on(r.getElementById("trc_close_modal"),"click",f),n.dom.on(i,"message",C)},close:p}})(window,document,TRC),function(n){TRC.blocker=TRC.blocker||{states:{ABP_DETECTION_DISABLED:-2,ABP_NOT_DETECTED:0,ABP_DETECTED:1},createBlockDetectionDiv:function(e){var t=n.createElement("div");return t.className=e,t.style.fontSize="12px",t.style.lineHeight="1",t.appendChild(n.createTextNode(".")),n.documentElement.appendChild(t),t},isBlockDetectedOnDiv:function(e){return e.offsetHeight?(TRC.pConsole("page","warn","No AdBlockPlus detected on div with class: "+e.className),!1):(TRC.pConsole("page","warn","AdBlockPlus detected on div with class: "+e.className),!0)},isBlockDetectedOnClassNames:function(e){for(var t,i=e.length,r=0;r<i;r++)if(e[r]){t=this.createBlockDetectionDiv(e[r]);try{if(this.isBlockDetectedOnDiv(t))return!0}catch(e){TRC.pConsole("page","error","unable to inspect offsetHeight of div with class: "+t.className)}finally{n.documentElement.removeChild(t)}}return!1},getBlockedState:function(e,t){return(this.blockedState!==this.states.ABP_DETECTED||t)&&(this.blockedState=e&&this.isBlockDetectedOnClassNames(e)?this.states.ABP_DETECTED:this.states.ABP_NOT_DETECTED),this.blockedState}}}((window,document)),function(){TRC.amp={};var e,t,d=TRC.amp;d.getRboxContainer=function(){return e=e||document.getElementsByClassName("trc_rbox_container")[0]},d.getAMPContainer=function(){return t=t||document.getElementById("c")},d.setAMPmodule=function(e){e.manualVisibilityTrigger=!0,e.disableReadMore=!0,e.slider=!1;var i=null,r=this.sendAMPResize,n=this.sendAMPFeedResize,o=e.global["amp-neg-threshold"]||5,a=e.global["amp-pos-threshold"]||100,s=e.global["amp-debounce-time"]||200,l=void 0!==e.amp_disable_resize?e.amp_disable_resize:e.global["amp-disable-resize"],c="function"==typeof e.global["amp-onrender"]?e.global["amp-onrender"]:function(){return!0};d.getAMPContainer().classList.add("tbl-amp-container"),TRC.eventDelegator.subscribe("onrender",function(e){var t={negative:o,positive:a};if(!c(e)||l)return!1;(i=null===i?!(!e.container.placementData||!e.container.placementData.isFeedCard):i)?(d.getAMPContainer().style.position="static",n()):(r(t,TRC.lastVisibleRects||null),TRC.listen("visible::"+e.placement,TRC.util.debounce(r.trcBind(this,t),s,!1,this)))})},d.sendAMPResize=function(e,t){var i=t?t.boundingClientRect.height:TRC.dom.getWindowHeight(),t=d.getRboxContainer().scrollHeight,i=i-t,e=i<0?e.negative:e.positive;Math.abs(i)>=e&&window.context.requestResize(void 0,t)},d.sendAMPFeedResize=function(){window.context.requestResize(void 0,d.getAMPContainer().offsetHeight+50),TRC.dispatch("ampFeedResize")}}(),window,document,TRC.aspect={before:function(e,t,i,r){var n=e[t];e[t]=function(){return r&&(e[t]=n),i.apply(this,arguments),n.apply(this,arguments)}},after:function(t,i,r,n){var o=t[i];t[i]=function(){n&&(t[i]=o);var e=o.apply(this,arguments);return r.apply(this,arguments),e}}},(()=>{class r{constructor(e,t,i){this.trcManager=e.trc,this.container=t,this.blockClicksSource=r.getBlockClicksSource(this.trcManager.global,i),this.isBlockingFastClicks=!0,this.isStoryWidget=TRC.StoryWidget.shouldInitStoryWidget(e),this.blockMarginalClicksValue=this.getBlockMarginalClicksValue(i,"uicm"),this.fastClicksTimeoutInMilliseconds=this.getBlockFastClicksTimeoutInMilliseconds(i,"uics"),TRC.dom.on(this.container,"click",this.handleBlockClicks.trcBind(this)),this.observeItem()}getBlockMarginalClicksValue(e,t){t=this.getClickValueByPriority(e,t);return r.isValidClickValue(t)?t:r.getDefaultMarginValue()}getBlockFastClicksTimeoutInMilliseconds(e,t){t=this.getClickValueByPriority(e,t);return r.isValidClickValue(t)?1e3*parseFloat(t):r.getDefaultFastClickValue()}static getBlockClicksSource(e,t){return r.checkIsFraudEnabled(e)?r.BLOCK_CLICK_SOURCE.fraud:r.checkIsDemandEnabled(t)?r.BLOCK_CLICK_SOURCE.demand:null}getClickValueByPriority(e,t){switch(this.blockClicksSource){case r.BLOCK_CLICK_SOURCE.fraud:return this.trcManager.global[`unintentional-clicks-fraud-${t}`];case r.BLOCK_CLICK_SOURCE.demand:return e[t];default:return this.trcManager.global[`unintentional-clicks-${t}`]}}static isBlockClicksEnabled(e,t){return!1===r.isBlockClicksDisabled(e)&&(r.checkIsFraudEnabled(e)||r.checkIsDemandEnabled(t))}static isBlockClicksDisabled(e){return TRC.util.isTrue(e["unintentional-clicks-disabled"])}static checkIsFraudEnabled(e){return TRC.util.isTrue(e["unintentional-clicks-fraud-enable"])}static checkIsDemandEnabled(e){return TRC.util.isTrue(e.uic)}sendBlockClickEvent(e){this.trcManager.sendEvent("supply-feature",{d:JSON.stringify({event_type:r.CLICK_BLOCKED_EVENT[e],block_clicks_source:this.blockClicksSource})},null)}handleBlockClicks(e){if(this.isBlockingFastClicks)return r.preventClickBubbling(e),void this.sendBlockClickEvent("FAST");this.isMarginalClick(e)&&this.isBlockableClick(e)&&(r.preventClickBubbling(e),this.sendBlockClickEvent("MARGIN"))}isBlockableClick(e){return!(this.isStoryWidget&&-1<e.target.parentNode.className.indexOf("tbl-labels-arrow")||-1<e.target.className.indexOf("video-title"))}isMarginalClick(e){var t=this.container.offsetWidth,i=this.container.offsetHeight,r=this.transformBlockMarginalClicksConfig(t,i),n=this.container.getBoundingClientRect(),o=e.clientX-n.left,n=e.clientY-n.top;return n<r.top||o>t-r.right||o<r.left||n>i-r.bottom}static preventClickBubbling(e){e.preventDefault(),e.stopPropagation()}transformBlockMarginalClicksConfig(e,t){return{top:r.calculatePercentage(this.blockMarginalClicksValue,t),right:r.calculatePercentage(this.blockMarginalClicksValue,e),bottom:r.calculatePercentage(this.blockMarginalClicksValue,t),left:r.calculatePercentage(this.blockMarginalClicksValue,e)}}static calculatePercentage(e,t){return parseFloat(e)/100*t}observeItem(){TRC.intersections.observe({targetElement:this.container,threshold:0,onExit:()=>this.clearFastClickTimeout(),onEnter:()=>this.setFastClickTimeout()})}setFastClickTimeout(){this.clearFastClickTimeoutId(),this.setIsBlockingFastClicks(!0);var e=TRC.Timeout.set(()=>{this.setIsBlockingFastClicks(!1),this.clearFastClickTimeoutId()},this.fastClicksTimeoutInMilliseconds);this.timeoutId=e}clearFastClickTimeout(){this.setIsBlockingFastClicks(!0),this.timeoutId&&this.clearFastClickTimeoutId()}clearFastClickTimeoutId(){TRC.Timeout.clear(this.timeoutId),this.timeoutId=null}setIsBlockingFastClicks(e){this.isBlockingFastClicks=e}static isValidClickValue(e){return!isNaN(parseFloat(e))}static getDefaultMarginValue(){return"0.5"}static getDefaultFastClickValue(){return"3000"}}r.CLICK_BLOCKED_EVENT={MARGIN:"marginal_click_blocked",FAST:"fast_click_blocked"},r.BLOCK_CLICK_SOURCE={fraud:"fraud",demand:"demand"},TRC.BlockClicksManager=r})(),function(r,n){var e={isEnabled:function(){return!!r.taboolaMobile}};TRC.Browser=new function(){this.dom=!!n.getElementById&&1,this.dom&&(n.importNode&&(this.dom=2),n.normalizeDocument&&(this.dom=3));var e=this.opera=!!r.opera&&9;if(this.opera&&(navigator.geolocation&&(this.opera=10),r.opera.version&&(this.opera=parseFloat(r.opera.version()))),this.ie=navigator.userAgent.match(/Trident/)&&/rv:11.0/i.test(navigator.userAgent)?11:"object"==typeof n.all&&!e&&("CSS1Compat"==n.compatMode&&r.XMLHttpRequest?Object.defineProperty?"object"!=typeof DOMImplementation||"function"!=typeof DOMImplementation.prototype.createDocument?8:r.msMatchMedia?10:9:7:6),this.webkit=!!r.openDatabase&&!this.opera,this.chrome=!(!this.webkit||!r.chrome),this.safari=this.webkit&&!this.chrome,this.safari&&(n.compareDocumentPosition&&(this.safari=4),navigator.registerContentHandler&&(this.safari=5),r.matchMedia&&(this.safari=6)),this.firefox=!!navigator.userAgent.match(/firefox/i),this.firefox){try{"function"==typeof n.createElement("canvas").getContext&&(this.firefox=1.5)}catch(e){}"object"==typeof r.globalStorage&&(this.firefox=2),n.elementFromPoint&&(this.firefox=3),n.querySelector&&(this.firefox=3.5),n.getElementsByTagName("head")[0].mozMatchesSelector&&(this.firefox=3.6),r.Uint8Array&&(this.firefox=4),Function.prototype.isGenerator&&(this.firefox=5),r.matchMedia&&(this.firefox=6),r.FileReader&&r.FileReader.prototype.readAsArrayBuffer&&(this.firefox=7),n.head&&n.head.insertAdjacentHTML&&(this.firefox=8)}for(var t=["firefox","chrome","safari","webkit","khtml","ie","opera"],i=0;i<t.length;i++)!function(e,t){e[t+"Upto"]=function(e){return this[t]&&("number"!=typeof this[t]||this[t]<=e)},e[t+"Atleast"]=function(e){return this[t]&&("number"!=typeof this[t]||this[t]>=e)}}(this,t[i]);return this.compatibility={lineClamp:void 0!==n.createElement("div").style.webkitLineClamp,cssTransforms:function(){for(var e=n.createElement("div"),t=["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"],i=0;i<t.length;i++)if(void 0!==e.style[t[i]])return!0;return!1}(),passiveEvents:function(){var e=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){e=!0}}))}catch(e){}return e}()},this},TRC.Device=new function(){var e;this.isTouchDevice="ontouchstart"in window,this.deviceType=(e=navigator.userAgent.match(/iPhone|iPod|iPad/i))?e[0]:"other"},TRC.MobileSdk=e}(window,document),TRC.CacheUtils=class{constructor(e,t,i){this.localStorage=e,this.cacheName=t,this.cacheTtl=i}isOverTtl(e){return(new Date).getTime()-e>this.cacheTtl}setCacheClean(e,t){const{localStorage:i,cacheName:r,cacheTtl:n}=this;TRC.Timeout.set(()=>{TRC.tlf&&console.time("in setCacheClean"),t.removeKey(e),i.setValue(r,__trcJSONify(t.getData())),TRC.tlf&&console.timeEnd("in setCacheClean")},n)}static removeKey(e,t){return!!t.getValue(e)&&(t.removeKey(e),!0)}cleanCache(e,t,i){var r,n=e||TRC.util.keys(t.getData());for(let e=0;e<n.length;e++)r=n[e],this.isOverTtl(t.getValue(r).s)&&i.removeKey(r);this.localStorage.setValue(this.cacheName,__trcJSONify(t.getData()))}getCache(e){var t=this.localStorage.getValue(this.cacheName)||{};try{if(t)return e.getDummyStorage(TRC.util.jsonParseWithNative(t))}catch(t){return e.getDummyStorage()}}},TRC.CategoryCard=class{constructor(e){const{sourceCategory:t,global:i}=e.trc,{publisherId:r,dom:{addClass:n}}=TRC,o=i["allowed-categories-map"];let a={};if(this.text="",this.isCategoryCard=!0,this.sourceCategory=t,n(e.container,"tbl-category-card-enabled"),t){o&&(a=o[r]||o);const s=a[t];s?(this.render=this.validateCategoryLogic(e),this.render&&(n(e.container,"tbl-category-card-rendered"),this.text=s.toUpperCase())):this.sendEvent("No category translation")}else this.sendEvent("No Source Category")}sendEvent(e){TRCImpl.sendAbTestEvent("category-card",`Channel: ${this.sourceCategory}, Result: ${e}`)}validateCategoryLogic(t){const{length:i=0}=t.recommendationList;if(!i)return!1;for(let e=0;e<i;e++){const i=t.recommendationList[e];if(!i.category)return this.sendEvent("No Category"),!1;if(this.sourceCategory!==i.category)return this.sendEvent(`fallback. item category is: ${i.category}`),!1}return!0}static enableCategoryCard(e){return!!e.trc.getProperty(e.mode_name,"enable-category-card",e.propertiesOverride)}},(n=>{function i(e="taboola",t="Rendered",i=null){if(TRC.dom.isInIframe()){const e="in-iframe";i=i?[i,e].join(", "):e}TRCImpl.sendEvent("supply-feature",{d:JSON.stringify({event_type:"ccpa",event_state:t,event_value:e,event_msg:i})},null)}const e=e=>{var{config:t,firstTime:i,placement:r}=d;return t&&!t.renderOnce||i&&r===e},d=n.ccpa={placement:"",isInitialized:!1,firstTime:!0,sendCcpaEvent:i,create:(e,t={})=>{n.ccpa.firstTime=!1;let i="tbl-ccpa-container";TRC.dom.isSmartPhone()&&(i+=" tb-ccpa-mobile"),TRC.dom.addClass(e,i);t=TRC.util.merge({},d.config,t);TRC.PopupLink.create(e,t)},init:(e=[],t={})=>{d.isInitialized=!0,(({markup:e="CCPA Notice",href:t="https://ccparequest.taboola.com/",enableScrolling:i="yes",classList:r,style:n,inlineStyle:o="",location:a="beforeend",renderOnce:s=!0,placement:l=""})=>{const c=r?[...r,"tbl-ccpa"]:"tbl-ccpa";d.config={markup:e,href:t,enableScrolling:i,classList:c,style:n,inlineStyle:o,location:a,renderOnce:s,placement:l}})(t),(t=>{let i=d.config&&d.config.placement;if(i)return n.ccpa.placement=i,i;for(let e=0;e<t.length;e++){const r=t[e];if((i=r.dc||r.uuip||r.uip).toLowerCase().indexOf("below")>-1&&r.v.length>0)return d.placement=i,i}d.placement=i})(e),TRC.dom.injectStyle("a.tbl-ccpa { font-weight: normal; font-size: 11px; Color: #999999; margin: 0 3px 0 0; text-decoration: none; font-family: Arial, Helvetica, sans-serif; float: right; } a.tbl-ccpa.tbl-ccpa-left { float: left; } a.tbl-ccpa.tbl-ccpa-right { float: right; }.logoDiv a.tbl-ccpa span { font-size: 11px; color: #999999; }div.tbl-feed-header.tbl-ccpa-container .tbl-ccpa { margin-top: 3px; }div.tbl-feed-header.tbl-ccpa-container div.tbl-feed-header-logo { display: inline-block; }.trc-widget-footer a.tbl-ccpa.tbl-cpa-pipe-before::before { content: '|'; margin-right: 2px; font-size: 11px; color: #999999; }.tbl-rtl .tb-ccpa-mobile { line-height: 11px; }.tbl-rtl .logoDiv.link-ccpa { display: inline-block; }.tbl-rtl div.tbl-feed-header .tbl-ccpa { margin-top: 0; }.tbl-rtl .trc-widget-footer a.tbl-ccpa { float: none; } .tbl-rtl .trc-widget-footer a.tbl-ccpa.tbl-cpa-pipe-before::before { content: ''; } .tbl-rtl .trc-widget-footer a.tbl-ccpa.tbl-cpa-pipe-before::after { content: '|'; margin-left: 2px; font-size: 11px; color: #999999; }",null),i()},shouldCreateCcpa:e,renderOnWidgetFooter:t=>{if(!t.isFeedCard&&e(t.placement)){var i=t.getWidgetFooter();let e="";0<i.children.length&&(e=" tbl-cpa-pipe-before");const r={markup:`<span>${d.config.markup}</span>`,classList:`${d.config.classList} tbl-ccpa-on-widget${e}`,location:"afterbegin",wrapper:{type:"div",className:"logoDiv link-ccpa"}};t.hasAdChoicesLogo&&(r.children='<span class="trc_logos_v_align">&nbsp;</span>'),d.create(i,r)}},renderOnHeaderFeed:(t,i,r)=>{if(d.shouldCreateCcpa(i)){const i={};let e="";"RIGHT"===r?e=" tbl-ccpa-left":"LEFT"===r&&(e=" tbl-ccpa-right"),i.classList=`${d.config.classList}${e}`,d.create(t,i)}}}})((window,document,TRC)),function(){var t=0,i={taboola_default:"BOOx2jhOOx2mtAKABDENAqAAAAAYSAAA"},r={cmpStatus:3},n="",o={getConsentData:[]},a={getConsentData:1};function s(){r.gdprApplies=!0,r.consentData=i.taboola_default,r.consentPreset="taboola_default"}function l(e,t,i){return a[e]&&o[e].push(i),"tcf"===n?function(){try{return window.__tcfapi("addEventListener",2,d),!0}catch(e){__trcWarn("Error while calling __tcfapi:addEventListener",e)}}():"iab"===n?!!window.__cmp&&(window.__cmp("getConsentData",null,c),!0):void 0}function c(e){e.cmpStatus=t,u(e)}function d(e,t){if(t&&("tcloaded"===e.eventStatus||"useractioncomplete"===e.eventStatus)){h(e),u(r);try{window.__tcfapi("removeEventListener",2,function(){},e.listenerId)}catch(e){__trcWarn("Error while calling __tcfapi:removeEventListener",e)}}}function h(e){r.cmpStatus=t,r.gdprApplies=e.gdprApplies,r.tcString=e.tcString,r.consentData=null}function u(e){r=TRC.util.merge(r,e),function(){var e=o.getConsentData;if(!0!==e.pushOverride){e.push=function(e){"function"==typeof e&&e(r)},e.pushOverride=!0;for(var t=0;t<e.length;t++)e[t](r)}}()}TRC.consent=TRC.consent||{},TRC.consent.setPresets=function(e){i=TRC.util.merge(i,e)},TRC.consent.setConsent=function(e){"tcf"===n?function(i){try{window.__tcfapi("getTCData",2,function(e,t){t&&(h(e),r=TRC.util.merge(r,i))})}catch(i){__trcWarn("Error while calling __tcfapi:getTCData",i)}u()}(e):TRC.consent.hasCMP()?(s(),e&&(r.cmpStatus=e.consentData?t:r.cmpStatus,r.consentPreset=e.consentData?"":r.consentPreset,(r=TRC.util.merge(r,e)).consentData=i[e.consentPreset]||r.consentData),u()):__trcError("TRC.consent.setConsent:- no consent source was set")},TRC.consent.getConsentStatus=function(){return r.cmpStatus},TRC.consent.hasCMP=function(){return!!n},TRC.consent.setConsentSource=function(e,t){return s(),n=e.source.toLowerCase()||n,i=TRC.util.merge(i,e.presets),TRC.cmp=l,r.cmpStatus=1,t&&(i=t),!0},TRC.consent.getAMPConsent=function(t){if(window.context)if(TRC.util.isEmptyString(window.context.initialConsentValue))if("function"==typeof window.context.getConsentState)try{window.context.getConsentState(function(e){1===e.consentState?t("true",null):2===e.consentState?t("false",null):t(null,null)})}catch(e){__trcError("Error while calling AMP getConsentState",e),t(null,null)}else t(null,null);else/\d[YN-]{3}$/.test(window.context.initialConsentValue)?(r.ccpaString=window.context.initialConsentValue,r.gdprApplies=null,r.consentData=null,r.tcString=null):(r.tcString=window.context.initialConsentValue,r.gdprApplies=!0,r.consentData=null),r.cmpStatus=5,t(null,r);else t(null,null)},window._trcIsUTactive&&(TRC.consent.setCurrentSource=function(e){n=e,o={getConsentData:[]},r={cmpStatus:3}})}(),TRC.CustomModulesManager={registeredModules:{},getPath(e,t){switch(e){case void 0:case"ui-innovation":return`${this.PATH.UI}/${t}`;case"demand-formats":return`${this.PATH.DEMAND}/${t}`;default:return e}},setGlobalPaths(){var e=TRCImpl.global["cdn-taboola-path"]||"cdn.taboola.com";this.setGlobal=!0,this.CDN=TRC.shiftDomain(e),this.PATH={UI:TRCImpl.global["ui-innovation-modules-path"]||"ui-ab-tests",DEMAND:"demand-formats"}},getCustomModulesFromResponse(e){e&&e.trc&&(e={feedExtension:this.createModuleMap(e.trc.f,!0,"drp"),demandGenericAction:this.createModuleMap(e.trc.dcga,!1),clientGenericActionPageLevel:this.createModuleMap(e.trc.cga,!1),clientGenericActionPlacementLevel:this.createModuleMap(e.trc.vl,!0,"cga")},this.loadModules(e))},createModuleMap:(e,t,i)=>({root:e,loop:t,key:i}),loadModules(t){this.setGlobal||this.setGlobalPaths();const e=Object.keys(t);e.forEach(e=>{e=t[e];e.root&&(e.loop?this.loadModulesFromChildren(e):this.loadModulesFromRoot(e))})},loadModulesFromChildren(i){Object.keys(i.root).forEach(e=>{var t=i.root[e];t&&t[i.key]&&t[i.key].customModules&&this.loadCustomModules(t[i.key].customModules,e)})},loadModulesFromRoot(e){e.root&&e.root.customModules&&this.loadCustomModules(e.root.customModules)},loadCustomModules(e,t){try{const i=__trcUnJSONify(e);Object.keys(i).forEach(e=>{this.loadModule(e,i[e],t)})}catch(t){__trcError(`Error while trying to parse json custom module, error msg: ${t} ,module data: ${e}`)}},loadModule(e,t,i){let r=this.registeredModules[e];if(r&&-1===r.feedsOriginPlacementNames.indexOf(i)&&r.feedsOriginPlacementNames.push(i),!r&&!0!==t.disable){r=this.registeredModules[e]={options:t,moduleName:e,feedsOriginPlacementNames:[i]};i=this.getPath(t.path,e);if(this.shouldLoadResource(t.js)&&!r.jsRequested){TRC.customHooks||(TRC.customHooks={});const n=t.js||e;this.loadModuleResource(`${i}/${n}`,"js",e,r),r.jsRequested=!0}if(this.shouldLoadResource(t.css)&&!r.cssRequested){const n=t.css||e;this.loadModuleResource(`${i}/${n}`,"css",e,r),r.cssRequested=!0}}},shouldLoadResource:e=>void 0===e||!TRC.util.isFalse(e),runHook(e,t,i,...r){this.dispatchHook(e,t,i,r)},dispatchHook(i,r,n,o){Object.keys(this.registeredModules).forEach(e=>{const t=this.registeredModules[e];if(this.isRelevantType(r,t,n))if(t.ready){const r=this.getModuleHook(t,i,n,...o);r&&r()}else TRC.listen(`TRC.${e}.ready`,()=>{const e=this.getModuleHook(t,i,n,...o);e&&e()})})},isRelevantType(e,t,i){const{uiModes:r,placements:n}=t.options;return!e||(i instanceof TRC.Feed?-1!==t.feedsOriginPlacementNames.indexOf(i.mainContainerPlacement)&&(!n||e&&n&&-1<n.indexOf(e)):i instanceof TRC.implClasses.TRCRBox?!r||e&&r&&-1<r.indexOf(e):void 0)},getModuleHook(e,t,i,...r){const n=TRC.customHooks[e.moduleName];return n&&n.hooks&&n.hooks[t]&&n.hooks[t].trcBind(i,...r,i)},loadModuleResource(e,t,i,r){const n=`${TRC.PROTOCOL}//${this.CDN}/${e}.${t}`;TRC.net.loadScript(n,t,e=>{"error"===e.type?__trcError(`Failed to load custom module resource ${n}`):!(r[`${t}Ready`]=!0)!==r.options.js&&!r.jsReady||!1!==r.options.css&&!r.cssReady||(TRC.dispatch(`TRC.${i}.ready`),r.ready=!0)})}},(r=>{TRC.docVisibilityUtil=function(){let e="",t="";return void 0!==r.hidden?(e="hidden",t="visibilitychange"):void 0!==r.msHidden?(e="msHidden",t="msvisibilitychange"):void 0!==r.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange"),e?{addEventListener:function(e){r.addEventListener(t,()=>{e(i())},!1)},isVisible:i}:{addEventListener:()=>{},isVisible:()=>null};function i(){return!r[e]}}()})((window,document)),TRC.lazyLoadingDependencies={"distance-from-article":[{fileName:"article-detection",objectName:"ArticleDetection"}],"tfa-eid":[{fileName:"sha256",objectName:"sha256"}],"bid-detection":[{fileName:"distance-from-article",objectName:"DistanceFromArticle"}]},TRC.ModuleLoader={requestedModules:{},load(i,r,n,e,o){if(o=void 0===o?window.TRCImpl&&TRCImpl.global&&TRCImpl.global["module-load-retry"]||2:o,r)n();else if(this.requestedModules[i]&&!e)this.requestedModules[i].callbacks.push(n);else{e||(this.requestedModules[i]={callbacks:[this.logSuccessToPerformance.trcBind(this,i),n]},TRC.performance&&TRC.performance.mark(`moduleLazyLoad${i}start`,null,"",i,"moduleLazyLoadTime",TRC.PerfEvenType.START));const a=this.toFingerPrintedName(i),s=TRC.lazyLoadingDependencies[i];if(!s||s.length<=0)TRC.loadTaboolaScript(a,!0,this.requestedModules[i].callbacks,e=>{this.loadErrorCallback(e,o,i,r,n,a)});else{let t=0;TRC.loadTaboolaScript(a,!0,e=>{this.invokeCallbackUponFullLoad(++t,s.length,i,e)},e=>{this.loadErrorCallback(e,o,i,r,n,a)}),e||s.forEach(e=>{this.load(e.fileName,TRC[e.objectName],e=>{this.invokeCallbackUponFullLoad(++t,s.length,i,e)})})}}},invokeCallbackUponFullLoad(e,t,i,r){if(!(e<t+1)){const n=this.chainCallbacks(this.requestedModules[i].callbacks);n(r)}},logSuccessToPerformance(e){TRC.performance&&TRC.performance.mark(`moduleLazyLoad${e}stop`,null,"",e,"moduleLazyLoadTime",TRC.PerfEvenType.STOP)},toFingerPrintedName(e){var t=`${TRC.hasES6Support()?"es6":"es5"}.js`;return`${e}.${TRC.version}.${t}`},chainCallbacks:e=>Array.isArray(e)?t=>{e.forEach(e=>e(t))}:"function"==typeof e?e:()=>{},loadErrorCallback(e,t,i,r,n,o){0<t?TRC.ModuleLoader.load(i,r,n,!0,--t):(this.logError(e,o),this.requestedModules[i]=null)},logError(e,t){__trcError(`failed to load module ${t}. Error is: ${e.message}`,e)}},(i=>{const r=!!i.navigator.sendBeacon;TRC.hasNetworkAsyncSupport=()=>r,TRC.sendPostAsyncCall=(e,t)=>!!r&&(i.navigator.sendBeacon(e,t),!0)})(window),TRC.RBoxUsage={logUsage(e,{file:t="",method:i="",position:r="",skipCaching:n,extraData:o={}}={}){TRCImpl&&TRCImpl.global&&TRCImpl.global["disable-rbox-usage-logging"]||TRC.modDebug.logMessageToServer(4,e,{file:t,method:i,position:r,extraData:__trcJSONify(o)},n)}},TRC.unifiedPlacementsProductsUtil={containersReset:(r,n)=>{Object.keys(r).forEach(e=>{var e=r[e].mainContainerId,t=document.querySelectorAll(`[${n}=${e}]`);for(let e=0;e<t.length;e++){const n=t[e],i=n.getAttribute(TRC.intersections.TARGET_ATTRIB);0<e?n.remove():(n.className=n.origClassName,n.innerHTML="",i&&TRC.intersections.unobserveAll(i))}})}},TRC.CTAManager=class{constructor(){this.cardIndexOnPage=0}static renderCTAItem(e,t){TRC.ModuleLoader.load("call-to-action-component",TRC.CallToActionComponent,()=>{t.CallToActionComponent=new TRC.CallToActionComponent(e,t),t.CallToActionComponent.renderCTAButton()})}shouldRenderCTAForItem(e,t){var i=t.video_data;if(this.cardIndexOnPage++,!TRC.Browser.ieUpto(10)){if(!i["cta-text"])return!1;if(!i.isSyndicated)return!1;if(!t.rbox.isFeedCard)return!1;if("start"===t.thumbnail_position)return!1;var{detail_order:r,link:t}=t;return!(r&&r.length&&"branding"===r[0]||!t||(this.sendAbTestEvent("rendered",i.itemIndex,e.placement),0))}}sendAbTestEvent(e,t,i){i={module:"cta-lazy-module",event:e,cardIndexOnPage:this.cardIndexOnPage,index:t,placement:i};window.TRCImpl.sendAbTestEvent("cta-lazy-module",JSON.stringify(i))}},TRC.css=TRC.css||{},TRC.css.utils=(()=>{let o=0,s=0,a="";const l=4040,c=" style_split",d="{class},",h="vidiscovery-note";function u(e,t){const i=0<=e.indexOf("@media")?`${e.split("{")[0]}{`:"",r=(e=i?e.substring(e.indexOf("{")+1):e).split("{"),n=(1<r.length?r[0]:e).split("."),o=n.length;if(o<2)return i+e;var a=n[1];return __trcTrim(a)===h?i+e:(t[__trcTrim(a)]?(p(1),n[0]=`#${t[__trcTrim(a)].cssDivsArr.join(" #")} ${n[0]}`):(p(s),n[0]=(a=n.join("."),g(!1,!1).replace(new RegExp("{class}","gm"),a)+n[0])),1<r.length?(r[0]=n.join("."),i+r.join("{")):i+n.join("."))}function n(e,t){const i=e.split(","),r=i.length;let n="";if(o>l&&(n=c,__trcDebug(`Number of augmented css rules before Split : ${o}`),m(0)),null===t)return function(t,e){var i=t.length;if("string"==typeof t)return p(1),e+t;for(let e=0;e<i&&(p(1),!(0<=t[e].indexOf("{")&&e<i-1));e++);return e+t.join(",")}(r<2?e:i,n);if(r<2)return n+u(e,t);for(let e=0;e<r&&(i[e]=u(i[e],t),!(0<=i[e].indexOf("{")&&e<r-1));e++);return n+i.join(",")}function p(e){o+=e}function m(e){o=e}function g(t,e){let i;if("object"!=typeof t)return a;a="",Object.keys(t).forEach(e=>{"string"==typeof e&&""!==e&&(i=`#${t[e].cssDivsArr.join(" #")} `,a=`${a}${i} ${d}`),s++});var r=`#${e.iframe.join(" #")} ${d}`,n=`#${e.topDiv.join(" #")} ${d}`,e=a.slice(0,a.length-d.length);return a=`${r}${n}${e}`}function f(r,n,o){const e=r.trc.vl,a=o["modes"],s=a[TRC.inflate.COMMON];let l="",c="";return e&&e.forEach((e,t)=>{const i=function(e,t,i,r){const n=TRC.implClasses["TRCRBox"],o=r.preloadRequest[t.fpl||t.uuip||t.uip],a=n.prototype.calcModeName(r.addVariantProperties(null,e,i).trc,o?o.mode:void 0),s=function(e,t,i,r){return r.modes[e]?e:r.modes[t.m]?t.m:i&&r.modes[i.mode]?i.mode:void 0}(a,t,o,r);let l=s?[s]:[];return t.multiWidget&&t.multiWidget.children&&(l=[...l,...function t(e){let i=[];return e.forEach(e=>{e.children?i=[...i,...t(e.children)]:e.name&&i.push(e.name)}),i}(t.multiWidget.children)]),l}(r,e,t,o);i.forEach(e=>{TRC.injectedModes.indexOf(e)<0&&a[e]&&(l+=TRC.inflate.inflateStyle(e,TRC.inflate.inflateObject(s[TRC.inflate.STYLE],a[e][TRC.inflate.STYLE])),n&&a[e].mode_custom&&(c+=a[e].mode_custom),TRC.injectedModes.push(e))})}),{inflatedStyle:l,customCss:c}}return{bakeCss(e,t){var i=t.global["enable-custom-injection"];TRC.injectedModes=TRC.injectedModes||[];let r=TRC.injectedCustomStyle?"":t.defaults.style+t.global.style.rtl;e=f(e,i,t);r+=e.inflatedStyle,r+=t.global.style.custom&&!TRC.injectedCustomStyle?t.global.style.custom:"",r+=i?e.customCss||"":t.global.style.mode_custom&&!TRC.injectedCustomStyle?t.global.style.mode_custom:"",r+=TRC.injectedCustomStyle?"":TRC.dom.pullAggregatedStyle(),0<TRC.blocker.blockedState&&t.global["switch-abp-class"]&&(r=this.ABPswap(r)),r&&(TRC.dom.injectStyle(r,null),TRC.injectedCustomStyle=!0)},setStyleTextIdPrefix(e,t,i){t&&g(t,i);t=function(e,t){const i=e.split("}"),r=i.length;return r<2?n(e,t):(i.forEach(e=>n(e,t)),i.join("}"))}(e,t);return __trcDebug(`Number of augmented css rules left : ${o}`),m(0),t},setStyleElements(e){const t=e.split(c),i=t.length;1<i&&TRC.pConsole("page","debug","splitting css",""),t.forEach(e=>TRC.dom.injectStyle(e))},setStyleProperty(e,t,i,r){var n=e.style["cssText"];e.style.cssText=n+=`;${t}:${i}${r?"!important":""}`},generateCssRuleWithVendorPrefixes(e,t){const i="{property}: {value};".replace("{property}",e).replace("{value}",t),r=[];return[" -webkit-","-moz-","-ms-","-o-"].forEach(e=>r.push(e+i)),r.push(i),r.join(" ")},escape:window.CSS&&window.CSS.escape||function(e){function t(e){this.message=e}(t.prototype=new Error).name="InvalidCharacterError";const i=String(e),r=i["length"];let n=-1,o,a="";for(var s=i.charCodeAt(0);++n<r;){if(0===(o=i.charCodeAt(n)))throw new t("Invalid character: the input contains U+0000.");1<=o&&o<=31||127===o||0===n&&48<=o&&o<=57||1===n&&48<=o&&o<=57&&45===s?a+=`\\${o.toString(16)} `:a+=128<=o||45===o||95===o||48<=o&&o<=57||65<=o&&o<=90||97<=o&&o<=122?i.charAt(n):`\\${i.charAt(n)}`}return a}}})(window),TRC.css.Stack=function(e,t){const{stack:i,idPrefix:a="tab_"}=e,s={},l=document.createDocumentFragment(),r=t?document.head.appendChild(document.createElement("style")):null;i.forEach(e=>s[e.type]=TRC.dom.injectStyle(e.cssText||"",l,a+e.type)),this.injectAllStyles=function(){r?document.head.insertBefore(l,r):document.head.appendChild(l),TRC.styleInjected=!0},this.addStyle=function(e,t,i){const r=s[e],n=i?document:l,o=a+e;t&&(r?r.styleSheet?r.styleSheet.cssText+=t:r.appendChild(document.createTextNode(t)):s[e]=TRC.dom.injectStyle(t,n,o))}},TRC.css.responsive=function(){function u(e,t){return(99.99-e*t)/e}function b(e,t,i,r,n,o,a){var s=e.rows*e.cells,l=`.${t} div.videoCube:nth-of-type(-n+${s}){display:block;visibility:visible;}`,s=`.${t} div.videoCube:nth-of-type(n+${1+s}){display:none;visibility:hidden;}`;n?(i.push(TRC.css.utils.setStyleTextIdPrefix(l,TRC.modesCache,TRC.lightBoxCssReset)),i.push(TRC.css.utils.setStyleTextIdPrefix(s,TRC.modesCache,TRC.lightBoxCssReset))):(i.push(l),i.push(s)),o&&function(e,t,i,r){e=e.cells,r=e/r*100;i.push(`.${t} .trc_rbox_div { width: ${r}%; }`),i.push(`.${t} .trc_rbox_outer { overflow-x: scroll; -webkit-overflow-scrolling: touch; }`)}(e,t,i,a)}function T(e,t,i,r,n,o,a){var s,l,c,d=`.${t} .trc_rbox_outer .videoCube .${1==+e.cells?"video-label-box":"trc-main-label"} {height:auto;}`,h=`.${t} .trc_rbox_outer .videoCube {margin-bottom:10px;}`,a=(s=e,l=t,c=a,a="rtl"===(a=n)?"right":"left",o?`.${l} .trc_rbox_div{margin-${a}:-${s.margin*s.cells/c}%;}`:`.${l} .trc_rbox_outer{margin-${a}:-${s.margin}%;}`),s=TRCImpl.global["disable-one-row-widget-auto-height"],s=(o||!s)&&1==+e.rows;1!=+e.cells&&!s||(r?(i.push(TRC.css.utils.setStyleTextIdPrefix(d,TRC.modesCache,TRC.lightBoxCssReset)),i.push(TRC.css.utils.setStyleTextIdPrefix(h,TRC.modesCache,TRC.lightBoxCssReset))):(i.push(d),i.push(h))),r?i.push(TRC.css.utils.setStyleTextIdPrefix(a,TRC.modesCache,TRC.lightBoxCssReset)):i.push(a),i.push(`.${t} .videoCube_aspect{padding-bottom:${e.ratio}%; width: 100%;}`),function(e,t,i,r,n,o){const a=u(e,i),s="rtl"===o?"right":"left",l=TRC.css["utils"],c=`.${t} .videoCube{width: ${a}%; position: relative; float: ${s}; margin: 0 0 ${i}% 0; margin-${s}: ${i}%;}`;n?r.push(l.setStyleTextIdPrefix(c,TRC.modesCache,TRC.lightBoxCssReset)):r.push(c)}(e.cells,t,e.margin,i,r,n)}return{injectedStyles:{},rulesToCssText(e,t,i,r,n,o,a,s){const l=[];let c,d,h;for(c=0;d=t[c];c++)(h=void 0!==d.min||void 0!==d.max)&&l.push("@media screen and "),void 0!==d.min&&(l.push(`(min-width: ${d.min}px) `),d.max&&l.push("and ")),void 0!==d.max&&l.push(`(max-width: ${d.max}px) `),h&&l.push("{"),n?(u=l,p=C=f=g=m=p=void 0,p="rtl"===o?"right":"left",m=`.${e} .trc_rbox_div .videoCube {width: ${1==+d.cells?"100":"48"}%;}`,g=`.${e} .trc_header_left_column {width: ${1==+d.cells?"100":"48"}%;}`,f=`.${e} .trc_header_right_column {display: ${1==+d.cells?"none":"inline"};}`,C=`.${e} .trc_rbox_div div.videoCube:nth-of-type(-n+${d.rows}){float:${p};clear:${p};}`,p=`.${e} .trc_rbox_div div.videoCube:nth-of-type(n+${d.rows+1}){float:none;clear:${"rtl"===o?"left":"right"};margin-${p}:auto;}`,r?(u.push(TRC.css.utils.setStyleTextIdPrefix(p,TRC.modesCache,TRC.lightBoxCssReset)),u.push(TRC.css.utils.setStyleTextIdPrefix(C,TRC.modesCache,TRC.lightBoxCssReset)),u.push(TRC.css.utils.setStyleTextIdPrefix(m,TRC.modesCache,TRC.lightBoxCssReset)),u.push(TRC.css.utils.setStyleTextIdPrefix(g,TRC.modesCache,TRC.lightBoxCssReset)),u.push(TRC.css.utils.setStyleTextIdPrefix(f,TRC.modesCache,TRC.lightBoxCssReset))):(u.push(p),u.push(C),u.push(m),u.push(g),u.push(f))):T(d,e,l,r,o,a,s),b(d,e,l,0,r,a,s),h&&l.push("} ");var u,p,m,g,f,C;return l.join("")},getRulePercentageWidth:u}}(),(()=>{const c={en:{now:"Now",today:"Today",yesterday:"Yesterday",minutes:"{0} minutes ago",hour:"1 hour ago",hours:"{0} hours ago",days:"{0} days ago"},de:{now:"Jetzt",today:"Heute",yesterday:"Gestern",minutes:"Vor {0} minuten",hour:"Vor 1 stunde",hours:"Vor {0} stunden",days:"Vor {0} tagen"},ru:{now:"Ð¢ÐµÐ¿ÐµÑ€ÑŒ",today:"cÐµÐ³Ð¾Ð´Ð½Ñ",yesterday:"Ð²Ñ‡ÐµÑ€Ð°",minutes:"{0} Ð¼Ð¸Ð½ÑƒÑ‚ Ð½Ð°Ð·Ð°Ð´","minutes-above5":"{0} Ð¼Ð¸Ð½ÑƒÑ‚Ñ‹ Ð½Ð°Ð·Ð°Ð´",hour:"1 Ñ‡Ð°Ñ Ð½Ð°Ð·Ð°Ð´",hours:"{0} Ñ‡Ð°ÑÐ° Ð½Ð°Ð·Ð°Ð´","hours-above5":"{0} Ñ‡Ð°ÑÐ¾Ð² Ð½Ð°Ð·Ð°Ð´",days:"{0} Ð´Ð½Ñ Ð½Ð°Ð·Ð°Ð´","days-above5":"{0} Ð´Ð½ÐµÐ¹ Ð½Ð°Ð·Ð°Ð´"},fr:{now:"A l`instant",today:"Aujourd`hui",yesterday:"Hier",minutes:"Il y a {0} minutes",hour:"Il y a 1 heure",hours:"Il y a {0} heures",days:"Il y a {0} journÃ©es"},es:{now:"Ahora",today:"Hoy",yesterday:"Ayer",minutes:"Hace {0} minutos",hour:"Hace 1 hora",hours:"Hace {0} horas",days:"Hace {0} dias"},it:{now:"Adesso",today:"Oggi",yesterday:"Leri",minutes:"{0} minuti fa",hour:"1 ora fa",hours:"{0} ore fa",days:"{0} giorni fa"},th:{now:"à¹€à¸”à¸µà¹‹à¸¢à¸§à¸™à¸µà¹‰",today:"à¸§à¸±à¸™à¸™à¸µà¹‰",yesterday:"à¹€à¸¡à¸·à¹ˆà¸­à¸§à¸²à¸™",minutes:"{0} à¸™à¸²à¸—à¸µà¸—à¸µà¹ˆà¹à¸¥à¹‰à¸§",hour:"1 à¸Šà¸±à¹ˆà¸§à¹‚à¸¡à¸‡à¸—à¸µà¹ˆà¹à¸¥à¹‰à¸§",hours:"{0} à¸Šà¸±à¹ˆà¸§à¹‚à¸¡à¸‡à¸—à¸µà¹ˆà¹à¸¥à¹‰à¸§",days:"{0} à¸§à¸±à¸™à¸—à¸µà¹ˆà¹à¸¥à¹‰à¸§"},hi:{now:"à¤…à¤­à¥€",today:"à¤†à¤œ",yesterday:"à¤•à¤²",minutes:"{0} à¤®à¤¿à¤¨à¤¿à¤Ÿ à¤ªà¤¹à¤²à¥‡",hour:"1 à¤¤à¤¾à¤¸à¤¾à¤ªà¥‚à¤°à¥à¤µà¥€",hours:"{0} à¤¤à¤¾à¤¸à¤¾à¤‚à¤ªà¥‚à¤°à¥à¤µà¥€",days:"{0} à¤¦à¤¿à¤¨ à¤ªà¤¹à¤²à¥‡"},"pt-br":{now:"Agora",today:"Hoje",yesterday:"Ontem",minutes:"{0} minutos atrÃ¡s",hour:"1 hora atrÃ¡s",hours:"{0} horas atrÃ¡s",days:"{0} dias atrÃ¡s"},ms:{now:"Sekarang",today:"Hari ini",yesterday:"Semalam",minutes:"{0} minit yang lalu",hour:"1 jam yang lalu",hours:"{0} jam yang lalu",days:"{0} yang lalu"},jp:{now:"ä»Š",today:"ä»Šæ—¥",yesterday:"æ˜¨æ—¥",minutes:"{0} åˆ†å‰",hour:"1 æ™‚é–“å‰",hours:"{0} æ™‚é–“å‰",days:"{0}æ—¥å‰"},vi:{now:"Má»›i cáº­p nháº­t",today:"HÃ´m nay",yesterday:"Má»™t ngÃ y trÆ°á»›c",minutes:"{0} phÃºt trÆ°á»›c",hour:"1 giá» trÆ°á»›c",hours:"{0} giá» trÆ°á»›c",days:"{0} ngÃ y trÆ°á»›c"},tr:{now:"Åžimdi",today:"BugÃ¼n",yesterday:"DÃ¼n",minutes:"{0} dakika Ã¶nce",hour:"1 saat Ã¶nce",hours:"{0} saat Ã¶nce",days:"{0} gÃ¼n Ã¶nce"},ko:{now:"ì§€ê¸ˆ",today:"ì˜¤ëŠ˜",yesterday:"ì–´ì œ",minutes:"{0} ë¶„ì „",hour:"1 ì‹œê°„ì „",hours:"{0} ì‹œê°„ì „",days:"{0} ì¼ ì „"},bn:{now:"à¦à¦–à¦¨",today:"à¦†à¦œ",yesterday:"à¦—à¦¤à¦•à¦¾à¦²",minutes:"{0} à¦®à¦¿à¦¨à¦¿à¦Ÿ à¦†à¦—à§‡",hour:"1 à¦˜à¦¨à§à¦Ÿà¦¾ à¦†à¦—à§‡",hours:"{0} à¦˜à¦¨à§à¦Ÿà¦¾ à¦†à¦—à§‡",days:"{0} à¦¦à¦¿à¦¨ à¦†à¦—à§‡"},"zh-TW":{now:"ç¾åœ¨",today:"ä»Šå¤©",yesterday:"æ˜¨å¤©",minutes:"{0} åˆ†é˜å‰",hour:"1å°æ™‚å‰",hours:"{0} å°æ™‚å‰",days:"{0}å¤©å‰"},mr:{now:"à¤†à¤¤à¤¾",today:"à¤†à¤œ",yesterday:"à¤‰à¤¦à¥à¤¯à¤¾",minutes:"{0} à¤®à¤¿à¤¨à¤¿à¤Ÿà¤¾à¤‚à¤ªà¥‚à¤°à¥à¤µà¥€",hour:"1 à¤¤à¤¾à¤¸à¤¾à¤ªà¥‚à¤°à¥à¤µà¥€",hours:"{0} à¤¤à¤¾à¤¸à¤¾à¤‚à¤ªà¥‚à¤°à¥à¤µà¥€",days:"{0} à¤¦à¤¿à¤µà¤¸à¤¾à¤‚à¤ªà¥‚à¤°à¥à¤µà¥€"}};TRC._translationQueue=TRC._translationQueue||[],TRC._translationQueue.push({"time-ago":c});class d{static setTimeAgoCustomLanguage(){__trcWarn("TRCRbox.dateFormatDays - custom language is depreciated")}static dateFormatTimeAgo(t,i,e){let r;if(!t||0===parseInt(t,10)||isNaN(t))return __trcWarn(`TRCRbox.dateFormatDays - published_date cannot be parsed, it is ${t}`),"";r=new Date(1e3*parseInt(t,10));const n="time-ago",o=TRC.translationManager.getAll(n)||c.en,a=TRC.translationManager.getLabel,s=new Date,l=Date.now()-r.getTime();try{if(l<30*d.minute)return a({feature:n,label:"now"});if(l<d.hour){const c=Math.floor(l/d.minute);return a({feature:n,label:"minutes",data:[c]})}if(l<7*d.hour){const c=Math.floor(l/d.hour);return 1===c?a({feature:n,label:"hour"}):!o["days-above5"]||c<5?a({feature:n,label:"hours",data:[c]}):a({feature:n,label:"hours-above5",data:[c]})}if(l<24*d.hour&&s.getDate()===r.getDate())return a({feature:n,label:"today"});if(TRC.util.isTrue(TRCImpl.global["timeago-string-dates"]))return e.formatData("published-date",t);if(l<48*d.hour)return a({feature:n,label:"yesterday"});const c=Math.floor(l/d.day);return!o["days-above5"]||c<5?a({feature:n,label:"days",data:[c]}):a({feature:n,label:"days-above5",data:[c]})}catch(e){return __trcError(`TRCRbox.dateFormatDays - error in calculating time ago. this might be due to bad date or custom lang not properly init. date: ${t} lang: ${i}`),""}}static dateFormatISO(e){const t=new Date(1e3*parseInt(e,10)),i=t.getFullYear();let r=t.getMonth()+1,n=t.getDate();return n<10&&(n=`0${n}`),r<10&&(r=`0${r}`),`${i}-${r}-${n}`}static dateFormatAmerican(e){const t=new Date(1e3*parseInt(e,10)),i=t.getFullYear(),r=t.getMonth()+1,n=t.getDate();return`${r}/${n}/${i}`}static dateFormatEuropean(e){const t=new Date(1e3*parseInt(e,10)),i=t.getFullYear(),r=t.getMonth()+1,n=t.getDate();return`${n}/${r}/${i}`}}d.millisecond=1,d.second=1e3*d.millisecond,d.minute=60*d.second,d.hour=60*d.minute,d.day=24*d.hour,TRC.DateUtils=d})(),TRC.modDebug=function(s){var e,t,l=TRC.PROTOCOL,o={timeStamp:"tim=",type:"type=",message:"msg=",debugLevel:"llvl=",id:"id="},a=function(e){var t,i=[];for(t in e)e.hasOwnProperty(t)&&i.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return i.join("&")},c=(t={},{setMessageCache:function(e){t[e]?t[e]+=1:t[e]=1},getMessageCount:function(e){return t[e]||0}});function d(e){switch(e){case 0:return"error";case.5:return"perf";case 1:return"warn";case 2:return"info";case 3:return"debug";case 4:return"usage";default:return}}function h(e,t,i,r){var n=s.TRCImpl&&s.TRCImpl.getSystemFlag("loaderType");return o.timeStamp+encodeURIComponent(i)+"&"+o.type+encodeURIComponent(d(e))+"&"+o.message+encodeURIComponent(t)+(1<trc_debug_level?"&"+o.debugLevel+trc_debug_level:"")+"&"+o.id+Math.floor(1e4*Math.random())+(s.TRC.version?"&cv="+s.TRC.version:"")+(n?"&lt="+n:"")+(r?"&"+a(r):"")}return e={logMessageToServer:function(t,i,r,e){var n,o,a;c.setMessageCache(i),(c.getMessageCount(i)<=2||e)&&(n=s.TRCImpl&&TRCImpl.domain?TRCImpl.domain:"trc.taboola.com",o=s.TRCImpl?TRCImpl["normalize-log-param"]("publisher",TRC.publisherId):TRC.publisherId,a=__trcClientTimestamp(),e=function(e){e=l+"//"+e+"/"+o+"/log/2/debug?"+h(t,i,a,r),TRC.net.fireSimpleHttpRequest(e)},TRCImpl.trcEventRoute&&-1<TRCImpl.eventTypesToRoute.indexOf("debug")?(e(TRCImpl.trcEventRoute),TRCImpl.enableTrcEventRouteExperiment&&e(n)):e(n))},getType:d},s._trcIsUTactive&&(e.getType=d,e.messageCache=c,e.getLogParams=h),e}(window,document),(()=>{const o="-delta",a=(e,t)=>{if(e.children)e.children.forEach(e=>{a(e,t)});else if(e.name&&!s(e.name)){const a=e.name+o;t.modes[a]?e.name=a:t.modes[e.name]&&__trcWarn(`Could not resolve Multi-Widget delta mode name ${a}`)}},s=e=>new RegExp(`${o}$`).test(e);TRC.deltaModeAdapter={switchModeNamesIfInDeltaTest(n,e){e&&e.trc&&e.trc.vl&&e.trc.vl.length&&e.trc.vl.forEach(e=>{var t,i,r;TRC.util.isTrue(e.dlt)&&(e.multiWidget?a(e.multiWidget,n):e.m?(i=n,r=(t=e).m+o,s(t.m)||(i.modes[r]?t.m=r:i.modes[t.m]&&__trcWarn(`Could not resolve Feed / Added Widget delta mode name ${r}`))):((e,t)=>{const i=t.preloadRequest[e.uip];if(i){if(!s(i.mode)){const e=i.mode+o;t.modes[e]?i.mode=i.mode_name=e:t.modes[i.mode]&&__trcWarn(`Could not resolve Widget delta mode name ${e}`)}}else __trcWarn(`Delta mode replace: placement ${e.uip} is missing from preloadRequest`)})(e,n))})}}})(),function(i,a){var e,t,r,n=[],o=null,s=!1;function l(e){try{if(o&&(TRC.Browser.ieUpto(10)?a.detachEvent("onreadystatechange",o):(a.removeEventListener("DOMContentLoaded",arguments.callee,!1),TRC.Interval.clear(o))),TRC.dom.isReady)return;TRC.dom.isReady=!0,TRC.dom.onReady=function(e){e()};for(var t=0;t<n.length;t++)n[t]()}catch(e){__trcError("Error in DOMReady processing",e)}}TRC.dom={injectedStyles:[],aggregatedStyles:"",isReady:!1,onReady:function(e,t){t?TRC.Timeout.set(e,10):n.push(e)},init:function(){if(!s)if(s=!0,a.readyState&&/loaded|complete/.test(a.readyState))l(!0);else{if(TRC.Browser.ieUpto(10)){var t=a.createElement("div");!function(){try{t.doScroll("left")}catch(e){return t.to=TRC.Timeout.set(arguments.callee,10)}l()}(),a.attachEvent("onreadystatechange",o=function(){/loaded|complete/.test(a.readyState)&&(TRC.Timeout.clear(t.to),l())})}else{if(/interactive/.test(a.readyState))return void l(!0);a.addEventListener("DOMContentLoaded",l,!1),o=TRC.Interval.set(function(){/loaded|complete|interactive/.test(a.readyState)&&l()},10)}var e=i.onload;i.onload=function(){if(l(),e)try{e()}catch(e){}}}},on:i.addEventListener?function(e,t,i){var r;"touchstart"!==t&&"touchmove"!==t||!TRC.Browser.compatibility.passiveEvents||(r={passive:!0}),e.addEventListener(t,i,r)}:i.attachEvent?function(e,t,i){e.attachEvent("on"+t,i)}:void(el["on"+sType]=fn),off:i.removeEventListener?function(e,t,i){e.removeEventListener(t,i,!1)}:i.detachEvent?function(e,t,i){e.detachEvent("on"+t,i)}:void(el["on"+sType]=fn),getText:function(e){return e.textContent||e.innerText||e.innerHTML},lineHeight:function(e){var t;return e.computedClientHeight||(t=e.style.display,e.style.display="inline-block",e.computedClientHeight=parseFloat(getComputedStyle(e).height),e.style.display=t),e.computedClientHeight},isAncestor:function(e,t,i){for(t=i?t:t.parentNode;t&&t!==e&&9!=t.nodeType;)t=t.parentNode;return e===t},pullAggregatedStyle:function(){var e=this.aggregatedStyles;return this.aggregatedStyles="",e},aggregateStyles:function(e){TRC.styleInjected?this.injectStyle(e):this.aggregatedStyles+=e},injectStyle:function(e,t,i){var r=document.createElement("style"),t=t||a;return r.type="text/css",i&&(r.id=i),(t.head||t).appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e)),this.injectStyleOverflowFix(e),TRC.styleInjected=!0,this.injectedStyles.push(r),r},injectStyleOverflowFix:function(e){if(TRC.Browser.ie&&31==document.styleSheets.length){var t=document.getElementById("trc_rbox_css_loaded");if(null==t&&((t=document.createElement("div")).id="trc_rbox_css_loaded",a.body.appendChild(t)),"hidden"!=document.trcGetCurrentStyle(t,"overflow")){var i=e.split("}"),r=null;try{for(var n=0;n<document.styleSheets.length;n++){var o=document.styleSheets[n];if(i.length+o.rules.length<=4096){r=o;break}}null!=r&&(r.cssText+=e)}catch(e){__trcError("Error in injectStyleOverflowFix processing",e)}}}},removeAllInjectedStyleSheets:function(){for(var e,t=0;t<this.injectedStyles.length;t++)(e=this.injectedStyles[t]).parentNode&&e.parentNode.removeChild(e);this.injectedStyles=[],this.aggregatedStyles="",TRC.styleInjected=!1,TRC.css.responsive.injectedStyles=[]},swapElements:function(e,t,i){return i&&TRC.dom.purgeEventHandlers(e),e&&e.parentNode&&e.parentNode.replaceChild(t,e),t},iterateOnNode:function(e,t){for(t(e),e=e.firstChild;e;)arguments.callee(e,t),e=e.nextSibling},purgeEventHandlers:function(e){try{TRC.dom.iterateOnNode(e,function(e){for(var t in e)"function"==typeof e[t]&&(e[t]=null)})}catch(e){__trcError("TRC.dom.purgeEventHandlers : ",e.message)}},clearInnerElements:function(e){for(var t;t=e.firstChild;)this.purgeEventHandlers(t),e.removeChild(t)},stopEvent:function(e){return e.cancelBubble=!0,e.returnValue=!1,e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),!1},addClass:function(e,t){e&&(e.className+=" "+t+" ")},removeClass:function(e,t){if(e){if(e.classList)return e.classList.remove(t);t=new RegExp("s*"+t,"g"),e.className=e.className.replace(t,"")}},containsClass:function(e,t){return e&&-1<e.className.split(" ").indexOf(t)},detectAnimationEvent:function(t,e){var i="animation"+e,r={animation:"animation"+e,WebkitAnimation:"webkitAnimation"+e.charAt(0).toUpperCase()+e.slice(1),OAnimation:"oanimation"+e,MozAnimation:"animation"+e,MSAnimation:"MSAnimation"+e};return Object.keys(r).some(function(e){if(void 0!==t.style[e])return i=r[e],!0}),i},createHTMLElement:function(e,t){var i=document.createElement(e);return t&&Object.keys(t).length&&Object.keys(t).forEach(function(e){i[e]=t[e]}),i},elementMatchesSelector:function(t,e){var i;return["matches","msMatchesSelector","oMatchesSelector","mozMatchesSelector","webkitMatchesSelector"].some(function(e){return"function"==typeof t[e]&&(i=e),t[e]}),i?t[i](e):null},closest:function(e,t){if(TRC.util.isNativeFunction(e.closest))return e.closest(t);for(;!this.elementMatchesSelector(e,t);)if(!(e=e.parentElement))return null;return e},getWindowWidth:function(){return window.innerWidth?this.getWindowWidth=function(){return window.innerWidth}:0!=document.documentElement.clientWidth?this.getWindowWidth=function(){return document.documentElement.clientWidth}:this.getWindowWidth=function(){return document.body.clientWidth},this.getWindowWidth()},getWindowHeight:function(){return window.innerHeight?this.getWindowHeight=function(){return window.innerHeight}:0!=document.documentElement.clientHeight?this.getWindowHeight=function(){return document.documentElement.clientHeight}:this.getWindowHeight=function(){return document.body.clientHeight},this.getWindowHeight()},getDocumentWidth:function(){return Math.max(Math.max(a.body.scrollWidth,a.documentElement.scrollWidth),Math.max(a.body.offsetWidth,a.documentElement.offsetWidth),Math.max(a.body.clientWidth,a.documentElement.clientWidth))},getDocumentHeight:function(){return Math.max(Math.max(a.body.scrollHeight,a.documentElement.scrollHeight),Math.max(a.body.offsetHeight,a.documentElement.offsetHeight),Math.max(a.body.clientHeight,a.documentElement.clientHeight))},getScreenDensity:function(){return window.devicePixelRatio&&window.devicePixelRatio.toFixed(3)||-1},getPageVerticalScroll:function(){return i.pageYOffset||a.body.scrollTop},getScrollTop:function(e){return e===i?this.getPageVerticalScroll()||document.documentElement.scrollTop:e.scrollTop},getViewportVerticalRange:function(){var e=this.getPageVerticalScroll();return{min:e,max:e+this.getWindowHeight()}},getViewportHorizontalRange:function(){var e=i.pageXOffset||a.body.scrollLeft;return{min:e,max:e+this.getWindowWidth()}},getElementRect:function(e){return e.getBoundingClientRect()},isInIframe:function(t){try{return i.top!==i.self}catch(e){return"boolean"==typeof t&&t}},createAugmentingContainers:function(e,t){for(var i,r=[],n=null,o=0;o<e;o++)n=i=this.createAugmentingContainer(n),r.push(i);return t&&r[e-1].appendChild(t),r},createAugmentingContainer:function(e){var t=a.createElement("div");return t.id="tbl-aug-"+Math.floor(2147483648*Math.random()).toString(36),e&&e.appendChild(t),t},generateAugmentationPrefix:function(e){for(var t="",i=0;i<e.length;i++)t+="#"+e[i].id+" ";return t},isHighDensity:(r=window.matchMedia&&(window.matchMedia("only screen and (min-resolution: 124dpi), only screen and (min-resolution: 1.3dppx), only screen and (min-resolution: 48.8dpcm)").matches||window.matchMedia("only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen and (-o-min-device-pixel-ratio: 2.6/2), only screen and (min--moz-device-pixel-ratio: 1.3), only screen and (min-device-pixel-ratio: 1.3)").matches)||window.devicePixelRatio&&1.3<window.devicePixelRatio,function(){return r}),isSmartPhone:(t=window.matchMedia&&window.matchMedia(" only screen and (min-device-width : 320px) and (max-device-width : 480px)").matches||/(iPhone|iPod)/g.test(navigator.userAgent),function(){return t}),isTablet:(e=window.matchMedia&&window.matchMedia(" only screen and (min-device-width : 768px) and (max-device-width : 1024px)").matches||/(iPhone|iPod)/g.test(navigator.userAgent),function(){return e}),isDesktop:function(){return!(this.isTablet()||this.isSmartPhone())},getOuterWidth:function(e){return e.getBoundingClientRect().width+parseFloat(getComputedStyle(e).marginLeft)+parseFloat(getComputedStyle(e).marginRight)},isHtmlContent:function(e){return/(?:%3C|[<>&])/.test(e)},setContentToElement:function(e,t){TRC.dom.isHtmlContent(t)?e.innerHTML=t:e.innerText=t}}}(window,document),(()=>{const t={ID:"id",TITLE:"title",THUMBNAIL:"thumb"};class o{constructor(e,t){this.trcManager=e,this.parentContainerSelector=t.parentContainerSelector,this.additionalLogDataBuilder=t.additionalLogDataBuilder,this.initReportedItemsMap(),this.trcManager.sendAbTestEvent("DEDUP_DEBUG","true"),TRC.modDebug.logMessageToServer(1,"Duplicated items monitoring enabled",{pcs:this.parentContainerSelector,vi:TRC.pageManager.getPageData()})}initReportedItemsMap(){this.reportedItems={},Object.keys(t).forEach(e=>{e=t[e];this.reportedItems[e]=[]})}checkForDuplicatedItems(){var e=[].slice.call(document.querySelectorAll(`${this.parentContainerSelector} .videoCube`));this.checkAndNotifyMetaDataDuplication(e,t.ID)||(this.checkAndNotifyMetaDataDuplication(e,t.TITLE),this.checkAndNotifyMetaDataDuplication(e,t.THUMBNAIL))}checkAndNotifyMetaDataDuplication(e,t){const i=`data-item-${t}`,r=e.map(e=>e.getAttribute(i)),n=e.filter(e=>o.isItemMetaDataFoundMoreThanOnce(e,r,i));if(n.length)return n.forEach(e=>this.notifyItemMetaDataDuplication(e,i,t)),!0}static isItemMetaDataFoundMoreThanOnce(e,t,i){i=e.getAttribute(i);return t.indexOf(i)!==t.lastIndexOf(i)}notifyItemMetaDataDuplication(e,t,i){var r,n;-1===this.reportedItems[i].indexOf(e)&&(r=`DUP_${i.toUpperCase()}`,n=e.getAttribute("data-item-id"),t={mdt:i,md:e.getAttribute(t),ii:n,pcs:this.parentContainerSelector,vi:TRC.pageManager.getPageData()},this.trcManager.sendAbTestEvent(r,n),"function"==typeof this.additionalLogDataBuilder&&__trcCopyProps(this.additionalLogDataBuilder(e),t),TRC.modDebug.logMessageToServer(1,"Duplicated item served",t,!0),this.reportedItems[i].push(e))}}TRC.DuplicatedItemsMonitor=o})(),function(e,l){"use strict";var d,c={},h=e.TRC;function o(e,t){e.innerHTML=c._tokenizeSingle(h.dom.getText(e),t)}function r(e,t){var i,r;e&&(i=d(function(e){return 0<=e.className.search("title")},e,"span"),r=d(function(e){return 0<=e.className.search("description")},e,"span"),t.call(this,e,i,r))}function i(i){return function(e){for(var t in e)e.hasOwnProperty(t)&&e[t].boxes.forEach(function(e){r(e.labelsBox,i),r(e.preLabelsBox,i)})}}(h.Ellipsis=c).doEllipsis=function(e){d=d||h.implClasses.TRCRBox.prototype.findElement,h.ellipsisPerf&&console.timeStamp("Taboola new ellipsis"),h.performance&&h.performance.mark("7.2.1",null,"Ellipsis","all","SmartEllipsis",h.PerfEvenType.START),c.measure(e),c.renderEllipsis(e),h.performance&&h.performance.mark("7.2.9",null,"Ellipsis","all","SmartEllipsis",h.PerfEvenType.STOP)},c.tokenize=function(e,n){return n=n in c._tokenizeStrategies?n:"word",i(function(e,t,i){e.trcEllipsisTokenized&&delete e.trcEllipsisTokenized;var r=c._tokenizeStrategies[n];t&&o(t,r),i&&o(i,r),e.trcEllipsisTokenized=!0})(e)},c.verifyTokenized=function(e){var t=!0;return i(function(e){t=t&&e.trcEllipsisTokenized})(e),t},c.measure=i(function(e,t,i){t=t&&c._measureSingleElementSizes(t),i=i&&c._measureSingleElementSizes(i);e.trcEllipsisPositions={title:t,description:i}}),c.renderEllipsis=i(function(e,t,i){var r=e.trcEllipsisPositions;if(!r||t&&!r.title||i&&!r.description)__trcDebug("Calling renderEllipsis without measuring first. Skipping");else try{t&&c._repaintSingleEllipsis(t,r.title),i&&c._repaintSingleEllipsis(i,r.description)}catch(e){__trcDebug(e.message+". Skipping")}}),c._tokenizeStrategies={word:function(e){return{spaces:!0,tokens:e.split(/\s+/)}},letter:function(e){return{spaces:!1,tokens:e.match(/&[\w#]+;|./g)}}},c._tokenizeSingle=function(e,t){e=t.call(this,e);return h.util.map(e.tokens,function(e){return" "===e?e:"<ins>"+e+"</ins>"}).join(e.spaces?" ":"")},c._measureSingleElementSizes=function(e){if(!e||!e.offsetHeight)return null;if(!e.firstChild||"INS"!=e.firstChild.tagName)return __trcDebug("Attempted to call measure on element before tokenize. Skipping");var t=d(function(e){return 0<=e.className.search("lastLineEllipsis")},e,"ins");if(t){var i=e.getElementsByTagName("ins");if(0<=t.className.replace(/[\t\r\n\f]/g," ").indexOf("tblHideAllButFirst"))for(var r=0;r<i.length;r++)(c=i[r]).style.display="";t.parentNode.removeChild(t)}for(var n,o,i=e.getElementsByTagName("ins"),t=h.dom.lineHeight(i[0]),a=Math.floor(parseFloat(getComputedStyle(e).height)/t)*t,s=a-t,t=e.offsetWidth,e=i[0].offsetWidth,l=[],r=0;r<i.length;r++){var c=i[r];void 0!==(n=void 0===n&&c.offsetTop>=s?i[r]:n)&&l.push(h.dom.getText(c)),!o&&c.offsetTop>=a&&(o=i[r-1])}return{lastLineStartsAt:n,lastVisibleWord:o,singleLineContent:l,elementWidth:t,firstWordWidth:e}},c._repaintSingleEllipsis=function(e,t){if(t.lastVisibleWord){var i=l.createElement("ins");h.dom.addClass(i,"lastLineEllipsis");var r=e.tokenizeStrategy||"word",n=c._tokenizeStrategies[r]("").spaces;if(i.appendChild(document.createTextNode(t.singleLineContent.join(n?" ":""))),e.insertBefore(i,t.lastLineStartsAt),"word"===r&&t.firstWordWidth>=t.elementWidth)for(var o=e.getElementsByTagName("ins"),a=0;a<o.length;a++){var s=o[a];-1==s.className.replace(/[\t\r\n\f]/g," ").indexOf("lastLineEllipsis")?s.style.display="none":s.className+=" tblHideAllButFirst"}}}}(window,document),TRC.eventDelegator=function(e){var t,n=[],o={};function i(e,t){n[e]&&(r(n[e]._all,t||""),t&&n[e][t.container.id]&&r(n[e][t.container.id],t))}function r(e,t){if(e)for(var i=e.length,r=0;r<i;r++)try{"function"==typeof e[r]&&setTimeout(function(e,t){return function(){e(t)}}(e[r],t),0)}catch(e){__trcError("executeHandlers",e)}}function a(e,t){if(t)for(var i in t)try{"function"==typeof e&&setTimeout(function(e,t){return function(){e(t)}}(e,t[i]),0)}catch(e){__trcError("executeHandlers",e)}else setTimeout(e,0)}var s={subscribe:function(e,t,i){var r;n[e]||(n[r=e]=[],n[r]._all=[]),i?(n[e][i]||(n[e][i]=[]),n[e][i].push(t),o[e]&&o[e][i]&&a(t,{mode:o[e][i]})):(n[e]._all.push(t),o[e]&&a(t,o[e]))},dispatch:function(e,t){o[e]=o[e]||{},t?o[e][t.container.id]=t:o[e]._all={},i(e,t||null)},resetEvents:function(){o={}}};if(e._trcIsUTactive&&(s.processDelegatorsStack=i,s.executeHandlers=r,s.executePreviousEvents=a,s.delegatorsStack=n,s.eventsStack=o),TRC.subscriptionRegister)for(;TRC.subscriptionRegister.length;)t=TRC.subscriptionRegister.shift(),s.subscribe(t.event,t.handler,t.container);return s}(window,document),function(){function i(e){return"api::"+e}function r(e,t){TRC.dispatch(i(e),{detail:t})}function n(e,t){var i=TRC.TRCParser,e={mode:i.parseModeName(e=e||{}),placement:i.parsePlacementName(e),baseMode:i.parseBaseModeName(e),variant:i.parseTestVariant(e),itemCount:i.getItemCount(e)};return t&&(e.container=t.container,e.items=t.apiData),e}TRC.EventsAPI={dispatchClick:function(e,t){var i=TRC.TRCParser;e=e||{},t=t||{},r("click",{slot:(e=new TRC.ItemParser(e)).getSlot(),id:e.getId(),type:e.getType(),title:e.getTitle(),url:e.getUrl(),linkTarget:e.getLinkTarget(),mode:i.parseModeName(t),placement:i.parsePlacementName(t),baseMode:i.parseBaseModeName(t),variant:i.parseTestVariant(t),itemCount:i.getItemCount(t)})},dispatchVisible:function(e,t){r("visible",n(e,t))},dispatchRender:function(e,t){r("render",n(e,t))},dispatchNoContent:function(e,t,i){e={reason:e};t&&(e.placement=t),e.isFeedCard=i||!1,r("nocontent",e)},listen:function(e,t){TRC.listen(i(e),t,!0)},readmore:function(e,t){var i=TRC.TRCParser;r("readmore."+e,{mode:i.parseModeName(t=t||{}),placement:i.parsePlacementName(t),variant:i.parseTestVariant(t)})}}}((window,document)),function(r){var n,o,a={},s=0;function l(e){void 0===a[e]&&(a[e]=[])}if(TRC.listen=function(e,t,i){if("object"==typeof e&&e.length)return e.forEach(function(e){TRC.listen(e,t)}),null;l(e);i={id:s++,handler:t,eventName:e,sync:i,remove:function(){var e,t;e=this.eventName,t=this.id,l(e),a[e]=a[e].filter(function(e){return t!==e.id})}};return a[e].push(i),i},TRC.dispatch=function(e,t){l(e);var i=n(e,t);a[e].forEach(function(e){if(e.sync)try{e.handler.call(this,i)}catch(e){}else o(function(){e.handler.call(this,i)}.trcBind(this))}.trcBind(this))},TRC.getEventsMap=function(){return a},r.addEventListener&&r.dispatchEvent)return r.addEventListener("trcFakeEvents",function(e){e.cx()},!1),n=function(e,t){var i=r.createEvent("Event");return i.initEvent(e,!1,!1),"[object Array]"!==Object.prototype.toString.call(t)&&"object"==typeof t?__trcCopyProps(t,i):i.data=t,i},o=function(e){var t=n("trcFakeEvents");t.cx=e,r.dispatchEvent(t)};r.documentElement.attachEvent("onpropertychange",function(e){"trcFakeEvents"==e.propertyName&&e.cx()}),n=function(e,t){var i;return t&&t.generator&&"ceo"===t.generator?(t.type=e,t):((i=r.createEventObject()).generator="ceo",i.type=e,"[object Array]"!==Object.prototype.toString.call(t)&&"object"==typeof t?__trcCopyProps(t,i):i.data=t,i)},o=function(e){var t=n("trcFakeEvents");t.cx=e,t.propertyName="trcFakeEvents",r.documentElement.fireEvent("onpropertychange",t)}}((window,document)),function(t){var e=TRC.ExpandAnimationManager=function(e){TRC.RBoxUsage.logUsage("ExpandAnimationManager"),this.rbox=e,this.container=e.container,this.trcContainer=this.container._trc_container,TRC.css.utils.setStyleElements(this.createCSS()),this.trcContainer.className+=" trc_expandable",this.throttledExpandScrollHandler=this.scrollHandler.trcBind(this).trcThrottle(10),TRC.dom.on(t,"scroll",this.throttledExpandScrollHandler)};e.prototype.scrollHandler=function(){this.rbox.isInViewPort(this.container,0)?this.trcContainer.wasOutOfViewPort&&(this.trcContainer.className+=" trc_show",TRC.dom.off(window,"scroll",this.throttledExpandScrollHandler)):this.trcContainer.wasOutOfViewPort=!0},e.prototype.createCSS=function(){for(var e=[],t="#"+TRC.css.utils.escape(this.container.id),i=this.rbox.trc.getProperty(this.rbox.mode_name,"expand-animation-duration"),r=this.rbox.trc.getProperty(this.rbox.mode_name,"expand-animation-max-height"),n=[t+" .trc_rbox_container.trc_expandable {"+TRC.css.utils.generateCssRuleWithVendorPrefixes("transition-duration",i+"ms")+"}",t+" .trc_rbox_container.trc_expandable.trc_show { max-height: "+r+"px;}"],o=0;o<n.length;o++)this.rbox.trc.cssReset?e.push(TRC.css.utils.setStyleTextIdPrefix(n[o],TRC.modesCache,TRC.lightBoxCssReset)):e.push(n[o]);return e.join("")}}(window),(()=>{const r={collapsedHeight:490,expandButtonCaption:"Show More",collapseButtonCaption:"Show Less",fadeBackgroundColor:"#fff",fadeHeight:60,buttonTop:28,buttonBottom:10,fadeGradient:40};class n{constructor(e,t,i){this.externalCardMaxRetries=e.global["external-card-max-retries"]||5,this.externalCardRetryInterval=e.global["external-card-retry-interval"]||1e3,i=__trcCopyProps(r,{},i),this.init(t,i)}init(e,t,i=0){this.boxElement=document.getElementById(e),this.boxElement?this.boxElement.getBoundingClientRect().height<t.collapsedHeight?i<this.externalCardMaxRetries?(i++,setTimeout(this.init.trcBind(this,e,t,i),this.externalCardRetryInterval)):TRC.dom.addClass(this.boxElement,"tbl-expandable-box-inactive"):(TRC.dom.addClass(this.boxElement,"tbl-collapsed"),TRC.dom.injectStyle(n.getExpandableBoxCSS(e,t)),this.boxElement.appendChild(this.createExpandButton(t)),this.boxElement.appendChild(this.createCollapseButton(t)),this.listenToBoxClick()):__trcError(`Cannot find expandable box element by ID: ${e}`)}createExpandButton(e){return this.createButton(e.expandButtonCaption,this.handleExpandClick,"tbl-expand-btn-container")}createCollapseButton(e){return this.createButton(e.collapseButtonCaption,this.handleCollapseClick,"tbl-collapse-btn-container")}createButton(e,t,i){const r=document.createElement("div"),n=document.createElement("a");return n.className+="tbl-expandable-box-btn",n.textContent?n.textContent=e:n.innerText=e,TRC.dom.on(n,"click",t.trcBind(this)),r.className=`tbl-expandable-box-btn-container ${i}`,r.appendChild(n),r}addExpandClasses(){TRC.dom.addClass(this.boxElement,"tbl-expanded"),TRC.dom.removeClass(this.boxElement,"tbl-collapsed"),this.isExpanded=!0}addCollapseClasses(){TRC.dom.addClass(this.boxElement,"tbl-collapsed"),TRC.dom.removeClass(this.boxElement,"tbl-expanded"),this.isExpanded=!1}handleExpandClick(e){e.preventDefault(),e.stopPropagation(),this.isExpanded||this.addExpandClasses()}handleCollapseClick(e){e.preventDefault(),e.stopPropagation(),this.addCollapseClasses(),this.boxElement.scrollIntoView&&this.boxElement.scrollIntoView()}static getExpandableBoxCSS(e,t){return`#${e}.tbl-expanded { max-height: inherit; } #${e}.tbl-expanded .tbl-collapse-btn-container { display: block; padding: 0 5px; }#${e}.tbl-collapsed { max-height: ${t.collapsedHeight}px; overflow: hidden; position: relative; } #${e}.tbl-collapsed .tbl-expand-btn-container { display: block; }#${e} .tbl-expandable-box-btn { margin: ${t.buttonTop}px 0 ${t.buttonBottom}px !important; display: inline-block !important; line-height: 38px !important; text-align: center !important; white-space: nowrap !important; vertical-align: middle !important; cursor: pointer !important; -webkit-touch-action: manipulation; -moz-touch-action: manipulation; -ms-touch-action: manipulation; -o-touch-action: manipulation; touch-action: manipulation; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; -o-user-select: none; user-select: none; color: #326891 !important; background: #edf2f5 none !important; border: 1px solid #93abbc !important; height: 38px !important; width: 100% !important; font-size: 15px !important; font-weight: bold !important; border-radius: 3px !important; font-family: sans-serif !important; } #${e} .tbl-expandable-box-btn:hover { background-color: #bed0dc !important; border-color: #7399b3 !important; color: #326891 !important; }#${e} .tbl-expandable-box-btn-container { display: none; text-align: center; }#${e} .tbl-expand-btn-container { position: absolute; z-index: 100; left: 0; right: 0; bottom: 0; padding: ${t.fadeHeight}px 10px 0px 10px; box-sizing: border-box; background: -moz-linear-gradient(top, rgba(255, 255, 255, 0) 0%, ${t.fadeBackgroundColor} ${t.fadeGradient}%, ${t.fadeBackgroundColor} 100%); background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, rgba(255, 255, 255, 0)), color-stop(50%, ${t.fadeBackgroundColor}), color-stop(100%, ${t.fadeBackgroundColor})); background: -webkit-linear-gradient(top, rgba(255, 255, 255, 0) 0%, ${t.fadeBackgroundColor} ${t.fadeGradient}%, ${t.fadeBackgroundColor} 100%); background: -o-linear-gradient(top, rgba(255, 255, 255, 0) 0%, ${t.fadeBackgroundColor} ${t.fadeGradient}%, ${t.fadeBackgroundColor} 100%); background: -ms-linear-gradient(top, rgba(255, 255, 255, 0) 0%, ${t.fadeBackgroundColor} ${t.fadeGradient}%, ${t.fadeBackgroundColor} 100%); background: linear-gradient(to bottom, rgba(255, 255, 255, 0) 0%, ${t.fadeBackgroundColor} ${t.fadeGradient}%, ${t.fadeBackgroundColor} 100%); }`}listenToBoxClick(){TRC.listen("expandableBoxChildIFrameClick",e=>{e.container!==this.boxElement||this.isExpanded||this.addExpandClasses()})}}TRC.ExpandableBox=n})(),TRC.ExternalContainerAppender={MAX_RETRIES:50,TIMEOUT:100,move(i,r,n=0){if(document.querySelector)if(r){let e,t=!1;try{e=document.querySelector(i)}catch(r){__trcWarn(`Exception while trying to find external container with selector ${i}: ${r}`),t=!0}e?(r.appendChild(e),TRC.dispatch("trcContentReady",{container:r})):n<this.MAX_RETRIES&&!t?TRC.Timeout.set(this.move.trcBind(this,i,r,n+1),this.TIMEOUT):__trcWarn(`Could not find external container with selector ${i} to move`)}else __trcError("Could not find target container for external container move")}},function(){let n={};const o={},a={isPlacementApprovedToRender:()=>!0,hideFallbackElements(){return this},reportTimeToRender(){}};class s{constructor(e,{enable:t,elements_to_hide:i}={},{should_render:r}={}){this.originalPlacementName=e,this.isApprovedToRender=null,this.triedToHideFallbackElements=!1,this.enable=t,this.elements_to_hide=i,this.should_render=r}setIsApprovedToRender(){if(null===this.isApprovedToRender&&this.enable&&"function"==typeof this.should_render)try{this.should_render()?this.isApprovedToRender=!0:(this.isApprovedToRender=!1,l.report({type:"ERROR",reason:"notAllowedToRender",originalPlacementName:this.originalPlacementName}))}catch(e){this.isApprovedToRender=!1,__trcError("Fallback Error in should_render",e)}}isPlacementApprovedToRender(){return this.setIsApprovedToRender(),this.isApprovedToRender}hideFallbackElements({placement:e}){return this.isApprovedToRender&&!this.triedToHideFallbackElements&&(this.triedToHideFallbackElements=!0,this.hideElements(e)),this}reportTimeToRender({isCache:e,placement:t,recommendationList:i}){l.report({type:"placementData",timeToRendered:performance.now&&performance.now(),originalPlacementName:this.originalPlacementName,placementName:t,items:i?i.length:null,isCache:!!e})}hideElements(i){Array.isArray(this.elements_to_hide)&&this.elements_to_hide.forEach(e=>{const t=document.querySelectorAll(e);if(t.length)for(let e=0;e<t.length;++e)t[e].style.display="none";else l.report({type:"ERROR",reason:"noFallbackElements",placement:i})})}}const i=({cga:e,fpl:t,uip:i},r={})=>{t=t||i,i=n[t];if(i)return i;e=e&&e.fallback;return e&&!i?(n[t]=new s(t,e,r[t]),n[t]):a},t=({response:e,placement:t})=>{t=e.feedPlacement||t;return n[t]||a},l={report:e=>{TRC.util.isPercentEnabled(TRCImpl.global,"enable-fallback-events")&&(e={data:JSON.stringify(e),type:"fallback"},TRCImpl.sendEvent("pubs-generic",{d:JSON.stringify(e)},{}))},runOnError:e=>{const t=e["placement"],i=n[t],r=o[t];if(r&&"function"==typeof r)try{r()}catch(e){__trcError("Fallback Error in on_error",e)}i&&i.enable&&l.report({type:"ERROR",reason:"failedToRender",placement:t})},setOnError:({placement:e,on_error:t})=>{o[e]=t}};TRC.listen("onRboxFlowError",l.runOnError),TRC.fallbackApi={shouldRenderPlacement:(e,t)=>{try{return i(e,t).isPlacementApprovedToRender()}catch(e){__trcError("Fallback shouldRenderPlacement Error",e)}return!0},finalize:e=>{try{t(e).hideFallbackElements(e).reportTimeToRender(e)}catch(e){__trcError("Fallback Error in finalize",e,.2)}},setOnError:l.setOnError},window._trcIsUTactive&&(TRC.fallbackApi.unitestsHelpers={fallbackUtils:l,getFallbackPlacement:t,build:i,clearFallbackPlacements:()=>{n={}}})}(),function(){let e=!1;function t(){let e=!1,t,i;try{return TRC.dom.isInIframe(!0)&&(t=window.top&&window.top.TRC&&window.top.TRC.FeedView)&&(i=t.getSelectors(),e=window.frames&&window.frames.name===i.IFRAME_ID),e}catch(e){__trcError("Error in TRC.FeedViewInIframeReport.isFeedViewIframe(): ",e)}}TRC.FeedViewInIframeReport={report:function(){try{!e&&t()&&(TRCImpl.sendAbTestEvent("isFeedViewIframe",window.top.TRC.pageManager.getPageData()),e=!0)}catch(e){__trcError("Error in TRC.FeedViewInIframeReport.report(): ",e)}}},window._trcIsUTactive&&(TRC.FeedViewInIframeReport.isFeedViewIframe=t)}(),(()=>{class t{constructor(e){t.loadFeedViewModuleWhenNeeded(),e.feedViewConfig=!0,TRC.hasFeedView=!0}static loadFeedViewModuleWhenNeeded(){var e=TRC.util.isRboxEncapsulated(TRC),t=TRC.dom.isInIframe(!0);e||t||TRC.feedViewModuleLoaded||TRC.ModuleLoader.load("feed-view",TRC.FeedView,()=>{TRC.feedViewModuleLoaded=!0})}static isFeedViewWidget(e,t){const i=e.getProperty(null,"feed-view-devices"),r=e.getProperty(null,"feed-view-enable"),n=e=>"all"===i||i===e;return!(TRC.util.isFalse(r)||TRC.util.isTrue(TRC.dom.isSmartPhone())&&TRC.util.isFalse(n("smart_phone"))||TRC.util.isFalse(TRC.dom.isSmartPhone())&&TRC.util.isFalse(n("desktop"))||TRC.util.isFalse(e.getProperty(t.mode_name,"mode-enable-feed-view"))||TRC.util.isTrue(TRC.hasFeedView)||e.global["disable-feed-view-top-referrer"])}}TRC.FeedViewWidgetLoaderManager=t})(),(()=>{class o{constructor(e,t){this.trcManager=e,this.trcCache=e.trcCache,this.firstIframe=t,this.renderedCardsPreviously=!1,this.feedContainerNum=TRC.feedContainerNum,this.shouldBreakForAMPSplitFeed=!1,this.CACHE_KEYS={F:"tbl_f",SYNC_FI:"tbl_syncFi",SYNC_FB:"tbl_syncFb",SYNC_VIEW_ID:"tbl_syncViewID",PUB_CARD_LOCS:"tbl_pubCardLocs",NEXT_IFRAME_TO_LOAD:"tbl_nextIframeToLoad",CURRENT_AMP_FRAME_NUM:"tbl_currentAmpFrameNum"}}cacheOrAssignFeedResponseData(e){!0===this.firstIframe&&!1===this.renderedCardsPreviously?(this.ampSplitFeedCache.cacheData(this.CACHE_KEYS.F,e.trc.f),this.renderedCardsPreviously=!0):!1===this.renderedCardsPreviously&&!1===this.firstIframe&&(e.trc.f=this.ampSplitFeedCache.getCacheData(this.CACHE_KEYS.F),this.renderedCardsPreviously=!0)}handleFeedIndexOffset(e){return e.fi=this.syncFi+1,e.fi}cacheLeftoverCards(e,t){const i={};__trcCopyProps(e,i);e=TRC.TrcCache.extractKey(this.reqForCacheKey);this.trcCache.enableCacheViaStorageFlag(),i.trc.vl.splice(0,t+1),this.trcCache.cacheResponse(e,i)}handlePubCardInResponse(e,t){const i=this.ampSplitFeedCache.getCacheData(this.CACHE_KEYS.PUB_CARD_LOCS),r=parseInt(sessionStorage.getItem(this.CACHE_KEYS.NEXT_IFRAME_TO_LOAD),10);r===parseInt(this.feedContainerNum,10)&&sessionStorage.setItem(this.CACHE_KEYS.NEXT_IFRAME_TO_LOAD,r+1);var n=t+1+this.oldSyncFi;-1===i.indexOf(n)&&this.currentAmpFrameNum<=this.feedContainerNum&&i.push(n),this.ampSplitFeedCache.cacheData(this.CACHE_KEYS.PUB_CARD_LOCS,i),this.currentAmpFrameNum=i.length+1,TRC.currentAmpFrameNum=this.currentAmpFrameNum,this.ampSplitFeedCache.cacheData(this.CACHE_KEYS.CURRENT_AMP_FRAME_NUM,this.currentAmpFrameNum),TRC.keyWriting=!0,this.cacheLeftoverCards(e,t),this.shouldBreakForAMPSplitFeed=!0}updateFeedIndexAndBatch(e){let t;this.oldSyncFi=this.syncFi,t=Number(this.oldSyncFi)+e.trc.vl.length;var i=Object.keys(e.trc.f)[0];this.syncFb=parseInt(e.trc.f[i].nb,10),!0===e.cached&&(t-=e.trc.vl.length),this.syncFi=t,this.ampSplitFeedCache.cacheData(this.CACHE_KEYS.SYNC_FI,t),this.ampSplitFeedCache.cacheData(this.CACHE_KEYS.SYNC_FB,this.syncFb)}copyReqToReqForCacheKey(e){this.reqForCacheKey={},__trcCopyProps(e,this.reqForCacheKey)}static getPlacementId(e){return e&&e.placement?e.placement.split("|").pop().trim():""}detectDuplicateCards(e){e=o.getPlacementId(e);null!==this.ampSplitFeedCache.getCacheData(e)?__trcError("Duplicate Card Index In AMP Split Feed"):this.ampSplitFeedCache.cacheData(e,!0)}detectSkippedCard(e){const t=o.getPlacementId(e),i=t.split(" "),r=i[0],n=i[1];isNaN(n)?__trcError("Card name doesn't contain numeric index In AMP Split Feed"):(e=`${r} ${parseInt(n,10)-1}`,1<n&&null===this.ampSplitFeedCache.getCacheData(e)&&__trcError("Card(s) Skipped In AMP Split Feed"))}initParametersForSplitFeedFrames(){var e=this.ampSplitFeedCache.getCacheData(this.CACHE_KEYS.SYNC_FI),t=this.ampSplitFeedCache.getCacheData(this.CACHE_KEYS.SYNC_FB);this.syncFi=null===e?null:parseInt(e,10),this.syncFb=null===t?null:parseInt(t,10);t=this.ampSplitFeedCache.getCacheData(this.CACHE_KEYS.SYNC_VIEW_ID);null===t?this.ampSplitFeedCache.cacheData(this.CACHE_KEYS.SYNC_VIEW_ID,TRC.pageManager.getPageData()):TRC.syncViewID=t;let i=this.ampSplitFeedCache.getCacheData(this.CACHE_KEYS.PUB_CARD_LOCS);i||(i=[],this.ampSplitFeedCache.cacheData(this.CACHE_KEYS.PUB_CARD_LOCS,i)),this.currentAmpFrameNum=i.length+1}checkAMPSplitFeedFlagsAndInit(e,t){this.nextIframeToLoad=sessionStorage.getItem("tbl_nextIframeToLoad"),this.sentIframeLoadFailed=!1,this.attemptCounter=0,this.MAX_ATTEMPTS=20,!this.nextIframeToLoad&&this.firstIframe&&(this.nextIframeToLoad="1",sessionStorage.setItem("tbl_nextIframeToLoad",this.nextIframeToLoad)),this.nextIframeToLoad!==this.feedContainerNum?this.timeoutID=setTimeout(this.delayInit.trcBind(this,e,t),300):(this.didInit=!0,t(e))}static sendIframeLoadFailed(e){TRC.pConsole("errors","error","AMP split feed iframe",e,"blocked from out of order loading")}delayInit(e,t){try{this.attemptCounter++,!this.sentIframeLoadFailed&&this.attemptCounter>=this.MAX_ATTEMPTS&&(o.sendIframeLoadFailed(TRC.feedContainerNum),this.sentIframeLoadFailed=!0),this.nextIframeToLoad=sessionStorage.getItem("tbl_nextIframeToLoad"),this.nextIframeToLoad===TRC.feedContainerNum?(this.didInit=!0,clearTimeout(this.timeoutID),t(e)):this.timeoutID=setTimeout(this.delayInit.trcBind(this,e,t),300)}catch(e){__trcError("AMP split feed - error in delaying iframe init",e)}}initAmpSplitFeedIframe(e){this.trcManager.trcCache.reloadCache(),this.ampSplitFeedCache=new TRC.KeyValueCache({cacheName:"trc_amp_split_feed_cache",noTtl:!0}),this.initParametersForSplitFeedFrames(),this.trcManager.dispatchRequestWrapper(e)}}TRC.AmpSplitFeedManager=o})(),(()=>{const e=["click"];TRC.CardEventsManager=class{constructor(e,t,i,r){var t=t["feedDynamicParameters"];this.trcManager=e,this.cardPlacementData=i,this.exactVisibleDistanceThresholdFromTop=t&&t.exactVisibleDistanceThresholdFromTop||this.trcManager.global["exact-visible-distance-threshold-from-top"]||200,this.listenToCardInteractionEvents(r)}sendEvent(e,t){TRC.TrcEventsLogger.sendPlacementEvent(this.trcManager,this.cardPlacementData,e,t)}handleRenderedCard(e){e.style.position="relative",this.sendEvent("card-available"),this.observeCardVisibility(e)}listenToCardInteractionEvents(t){e.forEach(e=>{TRC.dom.on(t,e,this.sendCardInteractionEvent.trcBind(this,e)),"click"===e&&t.querySelector("iframe")&&TRC.dom.on(window,"blur",this.checkIfCardIFrameClickedAndLog.trcBind(this,t))})}checkIfCardIFrameClickedAndLog(e){const t=document["activeElement"];t&&"iframe"===t.tagName.toLowerCase()&&(t===e||e.contains(t))&&this.sendCardInteractionEvent("click")}sendCardInteractionEvent(e){e={id:Date.now(),type:e},e={d:JSON.stringify(e)};this.sendEvent("card-interaction",e)}observeCardVisibility(e){e={targetElement:e,enableDelayedVisibilityCheck:!0,exactVisibleThresholdFromTop:this.exactVisibleDistanceThresholdFromTop,onTrigger:this.sendEvent.trcBind(this,"card-visible",null)};TRC.intersections.isInViewPort(e)}}})(),(()=>{const a="tbl-feed-container",s="tbl-feed-card",l="tbl-feed-full-width",r="tbl-feed-abp",c="data-feed-container-num",o="data-feed-main-container-id",n={FULL_WIDTH:"FULL_WIDTH",PARTIAL_WIDTH:"PARTIAL_WIDTH"};class d{constructor(e,t,i){const r=__trcCopyProps(i,{});this.trcManager=e,this.container=t.container,this.origContainer=this.container,this.mainContainerId=this.container.id,this.mainContainerPlacement=t.placement,this.numContainers=1,this.testData=e.testData,this.experimentsData=e.experimentsData,this.experimentsHash=e.experimentsHash,this.options=i,this.numPendingPublisherCards=0,this.layout=i.mobileLayout||i.feedUi&&i.feedUi.layout,this.shouldDisableScopeCss=this.trcManager.global["disable-scope-feed-css"],this.firstCardRequestId=t.firstCardRequestId,this.unifiedPlacement=t.unifiedPlacement,i.wasWidget&&(this.widgetToFeedHelper=new TRC.WidgetToFeedHelper(this,e,i.hasFeedUI)),i.videoSingleManager&&this.loadVideoSingleManager(t,e,i),!1!==i.hasFeedUI&&TRC.dom.injectStyle(this.createCss(i),null),r.afterPlacementContainerCreated=d.addFeedCardAttributes.trcBind(this),r.itemsParentContainerSelector=`[${o}="${this.mainContainerId}"]`,this.infiniteScrollEngine=new TRC.InfiniteScrollEngine(e,t,r),this.publisherCardsManager=new TRC.PublisherCardsManager(this,e,t,i);const n=d.getFeedConfig(i,"footerOverlayConfig","footerOverlay");n&&TRC.ModuleLoader.load("feed-footer-overlay",TRC.FooterOverlay,()=>{this.footerOverlay=new TRC.FooterOverlay(e,n)}),TRC.isAMPSplitFeed&&(this.numContainers=this.trcManager.ampSplitFeedManager.feedContainerNum),this.setMainContainerCssClassesAndAttributes(this.container,i),this.listenToCardContentReady(),this.header=this.createHeader(i.feedUi),TRC.Heatmap.isEnabled(this.trcManager)&&(this.heatmap=new TRC.Heatmap(e),TRC.dom.on(this.container,"click",e=>{this.heatmap.captureAndSendClickData(e)}))}handlePlacement(e){var t=e.trcResponse&&e.trcResponse.spl,i=e.trcResponse&&e.trcResponse.pcp,r=e.trcResponse&&e.trcResponse.scac?null:this.infiniteScrollEngine.numPlacements;return t?(this.infiniteScrollEngine.handlePlacement(e),this.publisherCardsManager.registerPublisherCardForHandling(e),void this.publisherCardsManager.handlePendingPublisherCards(0,r,null,t)):(TRC.isAMPSplitFeed&&(this.trcManager.ampSplitFeedManager.detectDuplicateCards(e),this.trcManager.ampSplitFeedManager.detectSkippedCard(e)),i?TRC.isAMPSplitFeed?void this.stopScrolling():(this.publisherCardsManager.registerPublisherCardForHandling(e),this.infiniteScrollEngine.numPlacements++,void this.numPendingPublisherCards++):(0<this.numPendingPublisherCards&&(this.publisherCardsManager.handlePendingPublisherCards(0,r,null,t),this.numPendingPublisherCards=0),this.infiniteScrollEngine.handlePlacement(e),this.trcManager["after-card-created"](e,r,this),void TRC.CustomModulesManager.runHook("after-card-created",this.mainContainerPlacement,this,e,r,this)))}stopScrolling(){this.infiniteScrollEngine.stopScrolling()}setIsAllowedToRequestMoreContent(e){this.infiniteScrollEngine.setIsAllowedToRequestMoreContent(e)}updateNextBatchNumber(e){this.infiniteScrollEngine.updateNextBatchNumber(e)}setMainContainerCssClassesAndAttributes(e,t){const i=[a];switch(this.layout){case n.FULL_WIDTH:i.push(l);break;case n.PARTIAL_WIDTH:i.push("tbl-feed-partial-width")}t.feedUi&&t.feedUi.cardFrame&&i.push(`tbl-feed-frame-${t.feedUi.cardFrame}`),0<TRC.blocker.blockedState&&i.push(r),TRC.dom.addClass(this.container,i.join(" ")),1<this.numContainers&&(this.container.id=`${this.mainContainerId}-split-num-${this.numContainers-1}`),e.setAttribute(c,this.numContainers),e.setAttribute(o,this.mainContainerId),e.setAttribute("data-parent-placement-name",this.mainContainerPlacement),this.trcManager.language&&e.setAttribute("data-pub-lang",this.trcManager.language)}createHeader(e){if(!TRC.isAMPSplitFeed||!this.trcManager.ampSplitFeedManager||1===Number(this.trcManager.ampSplitFeedManager.feedContainerNum)){const t=document.createElement("div"),i=document.createElement("div"),r=!(!e||!e.feedHeaderData),n=e&&e.logoPosition&&"NONE"!==e.logoPosition?e.logoPosition:null,o=n?`tbl-logo-${n.toLowerCase()}-position`:"";if(i.className="tbl-feed-header-logo",t.className=` tbl-feed-header ${o}`,t.appendChild(i),TRC.ccpa.renderOnHeaderFeed(t,this.unifiedPlacement,n),r){const i=d.createFeedHeaderTextElement(e.feedHeaderData.headerText);t.className+=" tbl-header-with-text",t.appendChild(i)}return this.container.insertBefore(t,this.container.firstChild),t}}static createFeedHeaderTextElement(e){const t=document.createElement("div");return t.className="tbl-feed-header-text",t.innerText=e,t}static addFeedCardAttributes(e,t){e.setAttribute("tbl-feed-card",""),t.isStandaloneVideo&&d.setFeedVideoCardAttribute(e),d.setFeedCardVideoIndication(e,t)}static setFeedCardVideoIndication(e,t){t.trcResponse.nvb&&e.setAttribute("no-vbelow",""),t.trcResponse.nva&&e.setAttribute("no-vabove","")}static setFeedVideoCardAttribute(e){e.setAttribute("tbl-feed-video","")}listenToCardContentReady(){TRC.listen("trcContentReady",this.onTrcContentReady.trcBind(this))}onTrcContentReady(e){var e=e["container"];if(e&&e.placementData){const t=e["placementData"];t.isFeedCard&&this.onCardContentReady(e,t)}}onCardContentReady(e,t){const{style:i,id:r}=e,{trcResponse:n,expandOptions:o}=t;TRC.dom.addClass(e,s),n.cpad&&(i.padding=n.cpad),o&&(e.expandableBox=new TRC.ExpandableBox(this.trcManager,r,o),this.listenToBoxChildIFrameClick())}listenToBoxChildIFrameClick(){this.expandableBoxIFrameClickListener||(this.expandableBoxIFrameClickListener=!0,TRC.dom.on(window,"blur",()=>{var e=document["activeElement"];e&&TRC.dom.elementMatchesSelector(e,`[${o}="${this.mainContainerId}"] .${s} iframe`)&&TRC.dispatch("expandableBoxChildIFrameClick",{container:TRC.dom.closest(e,` .${s}`)})}))}createCss(e){const t=[];e.feedCss?t.push(e.feedCss.replace(/{FEED_MAIN_CONTAINER_ID_ATT}/g,`[${o}="${this.mainContainerId}"]`)):t.push(d.getDefaultFeedCSS()),this.isFullWidthMobileFeed(e)&&t.push(this.getMobileFullWidthMarginsCss()),e.feedUi&&t.push(d.getFeedUiCss(e.feedUi,this.mainContainerId)),e.publisherFeedCss&&t.push(e.publisherFeedCss),t.push(e.feedCssOverride);let i=t.join("");return this.shouldDisableScopeCss||(i=d.scopeCss(i,this.mainContainerId)),i}static scopeCss(e,t){return e.replace(new RegExp(`.${a}`,"g"),`[${o}="${t}"]`)}getTestData(){return this.testData}getExperimentsData(){return this.experimentsData}getExperimentsHash(){return this.experimentsHash}static getFeedUiCss(e,t){const i=[],r=e.feedBackgroundColor||e.feedBackground,n=`[${o}="${t}"]`;if(i.push(`${n}[${c}] {background-color: ${r}; padding: ${e.feedPadding};}`),"NONE"===e.logoPosition?i.push(`${n} .tbl-feed-header .tbl-feed-header-logo {display:none;}`):i.push(`${n} .tbl-feed-header {padding: 0px 5px 10px 5px; background: transparent; text-align: initial; display: table; width: 100%;}`),e.feedHeaderData){const{headerFontSize:t="20px",headerFontFamily:r="Arial, Helvetica, sans-serif",headerColor:c="#000000",headerFontStyle:o="normal"}=e.feedHeaderData;i.push(`${n} .tbl-feed-header .tbl-feed-header-text {font-size: ${t}; color: ${c}; line-height: ${t}; font-family: ${r}; font-weight: ${o}}`)}return i.join("")}getMobileFullWidthMarginsCss(e){const t=e?this.container.parentNode:this.container,i=t.getBoundingClientRect(),r=-1*i.left,n=-1*(document.documentElement.clientWidth-i.width-Math.abs(r));let o=`#${this.container.id}.${a}.${l}`;return(r||n)&&t.offsetParent?(e&&(o+=`[${c}="${e}"]`),`@media screen and (max-width: 480px) {\n                        ${o} {\n                            margin-left: ${r}px;\n                            margin-right: ${n}px;\n                        }\n                    }`):""}static getDefaultFeedCSS(){return`.${a} { position: relative; margin-top: 20px; margin-bottom: 20px; -webkit-text-size-adjust: 100%; clear: both; } .${a} .tbl-feed-header { padding: 5px; background-color: #ffffff; display: inline-block; } .${a} .tbl-feed-header-logo { background: url(//cdn.taboola.com/static/f8/f89e1763-220d-4e09-ba69-9e040548fb7a.svg) no-repeat 0 0; background-size: contain; height: 11px; width: 76px; display: inline-block; } .${a} .tbl-loading-spinner { margin-bottom: 10px; } .${a} .${s} { margin-bottom: 10px; background-color: #ffffff; border: 1px solid #f1f1f1; } .${a} .${r} { max-width: 770px; margin: 20px auto 0; }/** Mobile CSS Rules **/@media screen and (max-width: 480px) { .${a} { padding: 0; background-color: #ffffff; } .${a} .tbl-feed-header { margin-left: 2px; padding: 5px 0; } .${a} .${s} { margin-bottom: 5px; padding-bottom: 5px; border-width: 0; border-bottom: 4px solid #f1f1f1; } .${a} .trc_header_ext, .${a} .trc-widget-footer { padding-right: 3px; } }/** End of Mobile CSS Rules **/`}getVideoManagerRequestData(){return{"session-data":TRC.pageManager.getPublisherValue(TRC.publisherId,"session-data"),req:this.firstCardRequestId}}loadVideoSingleManager(e,t,i){const r=__trcCopyProps(e,{},null),n=__trcCopyProps(i.videoSingleManager,{});n.parentFeedOptions=i,this.videoManager=new TRC.VideoTagLoader(t,n,r,null,this.getVideoManagerRequestData()),this.videoManager.loadVideo()}switchMainContainer(e){this.container=e,this.infiniteScrollEngine.switchMainContainer(this.container)}isFullWidthMobileFeed(e){return(e.mobileLayout||this.layout)===n.FULL_WIDTH}getIsFirstBatch(){return this.infiniteScrollEngine.getIsFirstBatch()}static getFeedConfig(e,t,i){return e?this.getFeedDynamicParameter(e.feedDynamicParameters,t)||e[i]:null}static getFeedDynamicParameter(e,t){if(e){t=e[t];if(t)return JSON.parse(t)}return null}}TRC.Feed=d})(),(()=>{class d{constructor(e){this.trcManager=e,this.feeds={},this.invalidFeedsMap={},this.configs={}}handleFeedCardPlacement(e,t){t.isFeedCard=!0,d.setScaArray(t,e);const i=this.getOrCreateFeed(e),r=i&&i.options,n=r&&TRC.Feed.getFeedDynamicParameter(r.feedDynamicParameters,"feedViewConfig"),o=r&&r.feedView,a=r&&(n||o),s=n&&TRC.util.isFalse(n.isFeedView)?n.isFeedView:a;i&&(s&&(TRC.hasFeedView||this.trcManager.global["disable-feed-view-top-referrer"]||(TRC.hasFeedView=!0),TRC.FeedViewWidgetLoaderManager.loadFeedViewModuleWhenNeeded(),a&&a.enableAEClicks&&(i.enableAEClicks=!0),t.feedViewConfig=a),t.parentFeed=i,t.parentFeed.handlePlacement(t))}getOrCreateFeed(e){const t=e.fpl,i=this.getFeedConfig(t),r=this.feeds[t]||this.createNewFeed(i,t,e);if(r instanceof TRC.Feed)return i.eof&&r.stopScrolling(),i.nb&&r.updateNextBatchNumber(i.nb),r}createNewFeed(e,t,i){var{uuip:r,ri:n,sca:o}=i,{fcs:a,rooc:s,exm:l}=e,i=d.parseFeedOptionsFromResponse(e);l&&this.trcManager.enableExploreMore(e,t),TRC.VirtualPlacementsManager.handleVirtualPlacement(this.trcManager,t);const c=this.trcManager.preloadRequest[t];if(c){if(c.isFeed=!0,!a||(c.container=this.getNewFeedContainer(c.container,t,a,s),c.container))return c.fti=e.fti,c.unifiedPlacement=r,c.firstCardRequestId=n,c.sca=o,this.feeds[t]=new TRC.Feed(this.trcManager,c,i)}else __trcDebug(`'createNewFeed' : placement '${t}' was not in the request - ignore`)}getNewFeedContainer(e,t,i,r){r=this.trcManager.getWidgetContainer({container:e,"container-selectors":i,"render-on-orig-container":r},"feed");if(r)return r;this.invalidFeedsMap[t]=!0}getFeedConfig(e){return this.configs&&this.configs[e]?this.configs[e]:{}}hasFeedConflict(e,t){return this.feeds[e]||this.hasFeedTestDataMismatch(t)}hasFeedTestDataMismatch(e){const t=this.feeds[e];if(!t)return!1;if(t.getTestData()!==this.trcManager.testData)return!0;var i=t.getExperimentsHash(),e=this.trcManager.experimentsHash;return i&&!e||!i&&e||i&&e&&i!==e}static setScaArray(e,t){e&&e.globalTrcResponseJSON&&e.globalTrcResponseJSON.sca&&(t.sca=e.globalTrcResponseJSON.sca)}static isExperimentDataEqual(e,t){return JSON.stringify(e)===JSON.stringify(t)}static parseFeedOptionsFromResponse(e){return{nextBatchDistanceThreshold:e.nbdt,feedCss:e.css,feedCssOverride:e.fcss,publisherFeedCss:e.pfcss,mobileLayout:e.fml,videoSingleManager:e.vsm,feedUi:e.fui,feedNextUp:e.fnu,exploreMore:e.exm,footerOverlay:e.fov,feedDynamicParameters:e.drp,videoDisclosurePosition:e.vdp,uiDesignVersion:e.udv,wasWidget:TRC.util.isTrue(e.ww),firstBatchLazyLoadingEnabled:TRC.util.isTrue(e.fbll),hasFeedUI:void 0===e.hfu||TRC.util.isTrue(e.hfu),hasPreventReachingFooter:TRC.util.isTrue(e.prf),preventReachingFooterData:e.prfd,feedView:TRC.util.isTrue(e.fv)}}static createFeedScriptWidgetData(e,t){return{placement:e,scriptData:t,addWidget:!0}}static createFeedIframe(e,t){return{placement:e,iframeData:t,addWidget:!0,isIframeCard:!0}}static createPublisherCardData(e,t){return{placement:e,addWidget:!0,publisherCardData:t.pcp}}static createExternalWidgetData(e,t){return{placement:e,externalContainerSelector:t.es}}static isExternalContainerWidget(e){return void 0!==e.es&&null!==e.es}static isFeedScriptWidget(e){return e.fpl&&e.js}static isFeedIframe(e){return e.fpl&&e.ifr}static isPublisherCard(e){return e.fpl&&e.pcp}}TRC.FeedsManager=d})(),(()=>{class r{constructor(e,t,i){this.trcManager=e,this.parentPlacementData=t,this.parentPlacementName=t.placement,this.container=t.container,this.origContainer=this.container,this.parentContainerId=this.container.id,this.afterPlacementContainerCreated=i.afterPlacementContainerCreated,this.nextBatchDistanceThreshold=i.nextBatchDistanceThreshold||2e3,this.numPlacements=1,this.scAdjacencyPlacements=0,this.feedDynamicParameters=i.feedDynamicParameters,this.uiBatchNumberCounter=1,this.isPendingNextBatch=!0,this.numOfConsecutiveFailedRequests=0,this.maxNumOfConsecutiveFailedRequests=this.trcManager.global["feed-max-num-of-consecutive-failed-requests"]||10,this.firstBatchLazyLoadingEnabled=i.firstBatchLazyLoadingEnabled,this.isFirstBatchRequest=!0,this.isLoadNextBatchAnchorObserveEnter=!1,this.currentBatchSuccessful=!1,this.enableManualLoadNextBatch=this.trcManager.manualVisibilityTrigger&&this.trcManager.global["enable-manual-visible"]||this.feedDynamicParameters&&this.feedDynamicParameters.manualLoadNextBatch,this.numPlaceholderItems=this.feedDynamicParameters&&this.feedDynamicParameters.numPlaceholderItems||3,this.itemsParentContainerSelector=i.itemsParentContainerSelector||`#${this.parentContainerId}`;t=this.feedDynamicParameters&&this.feedDynamicParameters.rootSelectorScrollElement||this.trcManager.global["feed-load-next-batch-root-selector"];this.observerRootSelector=t||null,this.observerScrollElement=t&&document.querySelector(t)||window,this.feedObserverLoadNextBatch=this.feedDynamicParameters&&this.feedDynamicParameters.feedObserverLoadNextBatch||this.trcManager.global["feed-observer-load-next-batch"],this.firstBatchDistanceThresholdFromTop=this.feedDynamicParameters&&this.feedDynamicParameters.firstBatchDistanceThresholdFromTop||this.trcManager.global["first-batch-distance-threshold-from-top"],this.feedObserverLoadNextBatch&&!this.enableManualLoadNextBatch&&(this.isLoadNextBatchUsingObserver=!0),this.firstBatchDistanceThresholdFromTop&&!this.enableManualLoadNextBatch&&(this.throttledLoadRestOfBatchScrollHandler=this.loadRestOfBatchScrollHandler.trcBind(this,this.firstBatchDistanceThresholdFromTop).trcThrottle(10),TRC.dom.on(this.observerScrollElement,"scroll",this.throttledLoadRestOfBatchScrollHandler)),this.enableManualLoadNextBatch&&(this.lastManualRectsTop=0,this.listenToManualLoadNextBatchEvent()),this.feedDynamicParameters&&this.feedDynamicParameters.enableHistory&&(this.historyManager=new TRC.HistoryManager(e)),this.isLoadNextBatchUsingObserver&&this.createLoadNextBatchObserverAnchorElement();e=TRC.Feed.getFeedConfig(i,"preventReachingFooterConfig","preventReachingFooterData");this.hasPreventReachingFooter=e&&void 0!==e.enable?TRC.util.isTrue(e.enable):i.hasPreventReachingFooter,e&&this.hasPreventReachingFooter&&TRC.PreventReachingTheFooter.init(this,e),this.listenToTrcResponse(),this.createLoadingIndicator(),this.initMonitoringOfDuplicatedItemsIfNeeded()}loadRestOfBatchScrollHandler(e){e=this.isNearingStartOfPage(e);this.restOfFirstBatchLoaded||this.isCache?TRC.dom.off(this.observerScrollElement,"scroll",this.throttledLoadRestOfBatchScrollHandler):!this.restOfFirstBatchLoaded&&e&&(this.getNextBatch(),TRC.dom.off(this.observerScrollElement,"scroll",this.throttledLoadRestOfBatchScrollHandler))}createNewNextBatchAnchorObserver(){TRC.dom.off(this.observerScrollElement,"scroll",this.nextBatchObserverCreator),TRC.intersections.unobserve(this.loadNextBatchAnchorObserverId),this.ampFeedResizeListener&&this.ampFeedResizeListener.remove(),this.nextBatchObserverCreator=null,this.isLoadNextBatchAnchorObserveEnter=!1,this.observeNextBatchAnchor()}observeNextBatchAnchor(){var e=this.getNextBatchDistanceThreshold(),e={rootSelector:this.observerRootSelector,targetElement:this.loadNextBatchAnchorContainer,threshold:[0,.25,.5,.75,1],rootMargin:`0px 0px ${e}px 0px`,onEnter:this.getNextBatch.trcBind(this)};this.loadNextBatchAnchorObserverId=TRC.intersections.observe(e)}createLoadingSpinner(){this.spinnerContainer=document.createElement("div"),this.spinnerContainer.className+="tbl-loading-spinner tbl-hidden",this.container.appendChild(this.spinnerContainer)}createLoadingCardPlaceholder(){this.spinnerContainer=document.createElement("div"),TRC.ModuleLoader.load("feed-card-placeholder",TRC.FeedCardPlaceHolder,()=>{TRC.FeedCardPlaceHolder.createLoadingCardPlaceholder({direction:this.trcManager.direction,container:this.container,cardPlaceholder:this.spinnerContainer,numPlaceholderItems:this.numPlaceholderItems})})}createLoadingIndicator(){this.feedDynamicParameters&&"true"===this.feedDynamicParameters.disableLoadingCardsPlaceholder||this.trcManager.global["disable-loading-cards-placeholder"]?this.createLoadingSpinner():this.createLoadingCardPlaceholder()}createLoadNextBatchObserverAnchorElement(){this.loadNextBatchAnchorContainer=document.createElement("div"),this.loadNextBatchAnchorContainer.className="tbl-batch-anchor",this.container.appendChild(this.loadNextBatchAnchorContainer),this.observeNextBatchAnchor()}stopScrolling(){if(this.preventReachingTheFooter&&this.preventReachingTheFooter.disable(),this.isLoadNextBatchUsingObserver)return this.isAllowedToRequestMoreContent=!1,void TRC.intersections.unobserve(this.loadNextBatchAnchorObserverId);this.enableManualLoadNextBatch?this.isAllowedToRequestMoreContent=!1:TRC.dom.off(this.observerScrollElement,"scroll",this.throttledScrollHandler)}hideLoadingSpinner(){-1===this.spinnerContainer.className.indexOf("tbl-hidden")&&TRC.dom.addClass(this.spinnerContainer,"tbl-hidden")}showLoadingSpinner(){TRC.dom.removeClass(this.spinnerContainer,"tbl-hidden")}listenToTrcResponse(){var e=(this.hasPreventReachingFooter?this.onTrcResponsePreventReachingFooterWrapper:this.onTrcResponse).trcBind(this);TRC.EventsAPI.listen("nocontent",this.onTrcNoContent.trcBind(this)),TRC.listen("trcResponseHandled",e),TRC.listen("resumeFeedRendering",e)}listenToManualLoadNextBatchEvent(){TRC.listen(`visible::${this.parentPlacementName}`,this.manualLoadNextBatchHandler.trcBind(this))}shouldEnableLoadNextBatch(e){var t=e.boundingClientRect.top<this.lastManualRectsTop;return e.boundingClientRect.top+e.boundingClientRect.height-e.rootBounds.height<=this.getNextBatchDistanceThreshold()&&t}manualLoadNextBatchHandler(e){this.shouldEnableLoadNextBatch(e)&&this.getNextBatch(),this.lastManualRectsTop=e.boundingClientRect.top}isNearingStartOfPage(e){return e<=this.getScrollTop()}getNextBatchDistanceThreshold(){if(!this.isFirstBatchRequest)return this.nextBatchDistanceThreshold;var e=this.firstBatchLazyLoadingEnabled&&this.trcManager.global["feed-first-batch-distance-threshold"]||this.nextBatchDistanceThreshold;return this.trcManager.renderController.isLazyRenderEnabled?this.trcManager.renderController.getBatchThreshold(this,e):e}updateNextBatchNumber(e){this.trcNextBatchNumber=+e}getNextBatch(e){try{this.preventReachingTheFooter&&this.preventReachingTheFooter.lateRenderEnabled&&this.preventReachingTheFooter.handleGetNextBatch();const t={};if(!1===this.isAllowedToRequestMoreContent||this.isPendingNextBatch)return;if(this.isLoadNextBatchUsingObserver){if(!e&&this.isLoadNextBatchAnchorObserveEnter)return;this.isLoadNextBatchAnchorObserveEnter=!0}this.isFirstBatchRequest=!1,this.parentPlacementData.fb=this.trcNextBatchNumber||++this.uiBatchNumberCounter,this.restOfFirstBatchLoaded=!0,this.parentPlacementData.fi=this.numPlacements+this.scAdjacencyPlacements,t[this.parentPlacementName]=this.parentPlacementData,this.isPendingNextBatch=!0,this.showLoadingSpinner(),this.trcManager.dispatchLoadRequest(t)}catch(e){__trcError("Failed to load next batch in getNextBatch()",e)}}getScrollTop(){return TRC.dom.getScrollTop(this.observerScrollElement)}static isVideoItemPreviewOn(e,t){return!(e.uimvip!==t.mode&&!e.evip)}handlePlacement(e){const t=document.createElement("div"),i=e.trcResponse.scac;if(this.feedDynamicParameters&&r.isVideoItemPreviewOn(this.feedDynamicParameters,e)&&(t.className="tbl-preview"),e.isCache){if(this.isCache=!0,this.cachedViewId=e.cachedViewId,!this.loadFromCacheEventSent){const r="backToFeed_loadFromCache",t=__trcJSONify({origViewId:this.cachedViewId,placement:e.placement,cardIndex:i?null:this.numPlacements});this.trcManager.sendAbTestEvent("backToFeed_loadFromCache",t),this.loadFromCacheEventSent=!0}}else if(this.isCache&&!this.loadNotFromCacheEventSent){const r="backToFeed_loadNotFromCache",t=__trcJSONify({origViewId:this.cachedViewId,placement:e.placement,cardIndex:i?null:this.numPlacements});this.trcManager.sendAbTestEvent("backToFeed_loadNotFromCache",t),this.loadNotFromCacheEventSent=!0}e.container=t,e.modeGroupOrder=this.numPlacements,i||t.setAttribute("data-card-index",this.numPlacements),t.placementData=e,this.uiBatchNumberCounter=+e.trcResponse.fb||this.uiBatchNumberCounter,this.parentContainerId&&(t.id=`${this.parentContainerId}${i?`-sca${this.scAdjacencyPlacements+1}`:`-pl${this.numPlacements}`}`,t.setAttribute("data-batch-num",this.uiBatchNumberCounter)),"function"==typeof this.afterPlacementContainerCreated&&this.afterPlacementContainerCreated(t,e),this.isLoadNextBatchUsingObserver?this.container.insertBefore(t,this.container.querySelector(".tbl-batch-anchor")):this.container.insertBefore(t,this.container.querySelector(".tbl-loading-spinner")),this.historyManager&&(this.historyManager.trackElement(t),this.historyManager.scrollToElementIfWasLastInViewPort(t)),i?this.scAdjacencyPlacements++:this.numPlacements++,(!e.trcResponse.v||0<e.trcResponse.v.length)&&(this.currentBatchSuccessful=!0)}switchMainContainer(e){this.container=e,this.isLoadNextBatchUsingObserver&&this.container.appendChild(this.loadNextBatchAnchorContainer),this.container.appendChild(this.spinnerContainer)}onTrcResponsePreventReachingFooterWrapper(e){this.preventReachingTheFooter&&this.preventReachingTheFooter.preparePreventScroll(e)}onTrcNoContent(e){e.detail.placement||(this.currentBatchSuccessful=!1,this.onTrcResponse())}onTrcResponse(){if(this.currentBatchSuccessful)this.numOfConsecutiveFailedRequests=0;else if(this.numOfConsecutiveFailedRequests++,this.numOfConsecutiveFailedRequests>=this.maxNumOfConsecutiveFailedRequests)return this.stopScrolling(),void this.hideLoadingSpinner();this.currentBatchSuccessful=!1,this.isPendingNextBatch=!1,this.preventReachingTheFooter&&!0===this.preventReachingTheFooter.isWaitToHide?this.preventReachingTheFooter.isWaitToHide=!1:this.hideLoadingSpinner(),this.isLoadNextBatchUsingObserver&&!this.nextBatchObserverCreator&&!1!==this.isAllowedToRequestMoreContent&&(this.nextBatchObserverCreator=this.createNewNextBatchAnchorObserver.trcBind(this).trcThrottle(10),TRC.dom.on(this.observerScrollElement,"scroll",this.nextBatchObserverCreator),this.ampFeedResizeListener=TRC.listen("ampFeedResize",this.nextBatchObserverCreator)),this.duplicatedItemsMonitor&&this.duplicatedItemsMonitor.checkForDuplicatedItems(),this.preventReachingTheFooter&&this.preventReachingTheFooter.isEnableLateRender&&(this.preventReachingTheFooter.isEnableLateRender=!1,this.getNextBatch(!0))}setIsAllowedToRequestMoreContent(e){this.isAllowedToRequestMoreContent=e}getIsFirstBatch(){return this.isFirstBatchRequest}initMonitoringOfDuplicatedItemsIfNeeded(){var e;this.shouldMonitorForDuplicatedItems()&&(e={parentContainerSelector:this.itemsParentContainerSelector,additionalLogDataBuilder:e=>({cardIndex:TRC.dom.closest(e,"[data-card-index]").getAttribute("data-card-index")})},this.duplicatedItemsMonitor=new TRC.DuplicatedItemsMonitor(this.trcManager,e))}shouldMonitorForDuplicatedItems(){return this.trcManager.global["monitor-dup-items-traffic-pct"]>100*Math.random()||-1!==["yes","true","1"].indexOf(TRC.URL.prototype.getParameter.call(location.href,"taboola_dedup_debug"))}}TRC.InfiniteScrollEngine=r})(),TRC.PreventReachingTheFooter=class{constructor(e){this.getConfig(e),this.trackFastScroller()}getConfig(e){this.lateRenderTimeout=parseInt(e.timeout,10)||5e3,this.fastScrollerTime=parseInt(e.fastScrollerTime,10)||1e4,this.maxCards=parseInt(e.maxCards,10)||5,this.detectCardNumber=parseInt(e.detectCardNumber,10)||5,this.trcManager=e.trcManager,this.infiniteScrollEngine=e.infiniteScrollEngine,this.cardOneTime=null,this.detectCardTime=null,this.observerTargets=[],this.onScroll=this.observeScroll.trcBind(this).trcThrottle(50),this.onEndKey=this.endKeyHandler.trcBind(this),this.isFastScroller=!1,this.prevPosition=window.pageYOffset,this.scrollThrottleTime=parseInt(e.scrollThrottleTime,10)||10,this.timeout=null,this.scrollTimeoutLength=parseInt(e.scrollTimeoutLength,10)||5e3,this.timeoutEnabled=!1,this.stopListenToBatch=!0,this.shouldPreventScrolling=!0,this.loadNextBatchAnchorContainer=e.infiniteScrollEngine.loadNextBatchAnchorContainer,this.isPreventScroll=!1}trackFastScroller(){TRC.dom.on(window,"scroll",this.onScroll),TRC.dom.on(document,"keydown",this.onEndKey)}unTrackFastScroller(){TRC.dom.off(window,"scroll",this.onScroll),TRC.dom.off(document,"keydown",this.onEndKey),this.observerTargets.forEach(e=>{TRC.intersections.unobserve(e)})}enableLateRender(){this.isFastScroller=!0,this.lateRenderEnabled=!0}observeScroll(){this.cardOne&&0!==this.cardOne.length||(this.cardOne=this.infiniteScrollEngine.origContainer.querySelector('[data-card-index="1"]'),this.cardOne&&this.observeCard(this.cardOne,this.saveCardVisibilityTime.trcBind(this,"cardOneTime"))),this.detectCard&&0!==this.detectCard.length||(this.detectCard=this.infiniteScrollEngine.origContainer.querySelector(`[data-card-index="${this.detectCardNumber}"]`),this.detectCard&&this.observeCard(this.detectCard,this.saveCardVisibilityTime.trcBind(this,"detectCardTime"))),this.detectCardTime&&this.cardOneTime&&(this.detectCardTime-this.cardOneTime<this.fastScrollerTime&&this.enableLateRender(),this.unTrackFastScroller())}observeCard(e,t){t=TRC.intersections.observe({targetElement:e,onEnter:t,threshold:.5});this.observerTargets.push(t)}saveCardVisibilityTime(e){this[e]||(this[e]=(new Date).getTime())}endKeyHandler(){var{keyCode:e,metaKey:t}=window.event;this.lateRenderEnabled||(35===e||t&&40===e)&&(this.unTrackFastScroller(),this.enableLateRender())}handleGetNextBatch(){this.getNextBatchTime=(new Date).getTime()}handleBatch(e,t){t=t.trc.vl.length;void 0===this.numOfCards&&(this.numOfCards=0),this.numOfCards+=t,this.isPreventScroll=!1,this.numOfCards>=this.maxCards&&(this.numOfCards=0,this.isPreventScroll=!0,this.isEnableLateRender=!0,this.preventScrollBelowAnchor()),this.stopListenToBatch||this.stopListenToScrollForPrevent()}listenToScrollForPrevent(){this.onScrollForPrevent=this.observeScrollForPrevent.trcBind(this),TRC.dom.on(window,"scroll",this.onScrollForPrevent),this.stopListenToBatch=!1}stopListenToScrollForPrevent(){TRC.dom.off(window,"scroll",this.onScrollForPrevent),TRC.dom.off(document,"keydown",this.onEndKeyOnPreventScroll),this.stopListenToBatch=!0,clearTimeout(this.timeout)}observeScrollForPrevent(){const e=(new Date).getTime();if(!(e-this.scrollEventTime<this.scrollThrottleTime)){var t=TRC.dom.getScrollTop(window),i=this.prevPosition>t,r=this.infiniteScrollEngine.parentContainerId,n=document.getElementById(`${r}-pl${this.infiniteScrollEngine.numPlacements-1}`).scrollHeight,r=window.innerHeight-n/1.5,n=TRC.PreventReachingTheFooter.getOffsetFromTopOfPage(this.loadNextBatchAnchorContainer);if(!i&&n<t+r&&this.shouldPreventScrolling){const e=n-r;window.scrollTo(TRC.PreventReachingTheFooter.getWindowScrollLeft(),e),this.timeoutEnabled||this.enableScrollBelowAnchorOnTimeout()}this.prevPosition=TRC.dom.getScrollTop(window),this.scrollEventTime=(new Date).getTime()}}enableScrollBelowAnchorOnTimeout(){this.timeout=setTimeout(()=>{this.shouldPreventScrolling=!1},this.scrollTimeoutLength),this.timeoutEnabled=!0}preventScrollBelowAnchor(){this.shouldPreventScrolling=!0,clearTimeout(this.timeout),this.timeoutEnabled=!1}static getWindowScrollLeft(){return window.scrollX||document.documentElement.scrollLeft}static getOffsetFromTopOfPage(e){return e.getBoundingClientRect().top+window.pageYOffset}listenToKeysOnPreventScroll(){this.onEndKeyOnPreventScroll=this.endKeyHandlerOnPreventScroll.trcBind(this),TRC.dom.on(document,"keydown",this.onEndKeyOnPreventScroll)}endKeyHandlerOnPreventScroll(e){var{keyCode:t,metaKey:e}=e||window.event;(35===t||e&&40===t)&&window.scrollTo(0,TRC.PreventReachingTheFooter.getOffsetFromTopOfPage(this.loadNextBatchAnchorContainer)-window.innerHeight)}shouldLateRender(e){return this.isFastScroller&&this.isEnableLateRender&&e<this.lateRenderTimeout}preparePreventScroll(e){this.trcResponseTime=(new Date).getTime();var t=this.trcResponseTime-this.getNextBatchTime;this.shouldLateRender(t)?(t=this.lateRenderTimeout-t,setTimeout(this.infiniteScrollEngine.onTrcResponse.trcBind(this.infiniteScrollEngine,e),t),this.trcResponseTime=null,this.getNextBatchTime=null,this.isWaitToHide=!0,this.isPreventScroll&&(this.listenToScrollForPrevent(),this.listenToKeysOnPreventScroll())):this.infiniteScrollEngine.onTrcResponse(e)}disable(){this.infiniteScrollEngine.hideLoadingSpinner(),this.isPreventScroll=!1,this.stopListenToScrollForPrevent()}static init(e,t){e.preventReachingTheFooter=new TRC.PreventReachingTheFooter({timeout:t.timeout,fastScrollerTime:t.fastScrollerTime,maxCards:t.maxCards,detectCardNumber:t.detectCardNumber,infiniteScrollEngine:e,trcManager:TRCImpl,scrollTimeoutLength:t.scrollTimeoutLength,scrollThrottleTime:t.scrollThrottleTime})}},(()=>{class n{constructor(e,t,i,r){this.parentFeed=e,this.trcManager=t,this.options=r,this.container=e.container,this.origContainer=this.container,this.pendingPublisherCardsList=[],this.feedDynamicParameters=this.options.feedDynamicParameters,this.shouldStopFeedOnMissingPublisherCard=this.feedDynamicParameters&&"STOP"===this.feedDynamicParameters.missingPublisherCardFeedStrategy||"STOP"===this.trcManager.global["missing-publisher-card-feed-strategy"],this.shouldSendCardEvents=!(this.feedDynamicParameters&&this.feedDynamicParameters.disableSendingCardEvents||this.trcManager.global["disable-sending-card-events"]),this.publisherCardMaxRetries=t.global["feed-split-max-retries"]||5,this.publisherCardRetryInterval=t.global["feed-split-retry-interval"]||1e3,this.feedCardEventsMaxRetries=t.global["feed-card-events-max-retries"]||5,this.feedCardEventsRetryInterval=t.global["feed-card-events-retry-interval"]||1e3,this.feedCardEventsMinContainerHeight=t.global["feed-card-events-min-container-height"]||100}handlePendingPublisherCards(e=0,t,i,r){var n=(i=i||this.pendingPublisherCardsList[0]).trcResponse[r?"spl":"pcp"],o=n.tps,a=n.sun||n.pun;let s,l=!1;try{s=document.querySelector(o)}catch(e){__trcWarn(`Exception while trying to find publisher card with selector ${o}: ${e}`),l=!0}if(!s||!s.parentNode)return this.parentFeed.setIsAllowedToRequestMoreContent(!1),void(e<this.publisherCardMaxRetries&&!l?(e++,setTimeout(this.handlePendingPublisherCards.trcBind(this,e,t,i,r),this.publisherCardRetryInterval)):(e=0,this.pendingPublisherCardsList.shift(),this.pendingPublisherCardsList.length?setTimeout(this.handlePendingPublisherCards.trcBind(this,e,t,this.pendingPublisherCardsList[0],r),this.publisherCardRetryInterval):(r||this.shouldStopFeedOnMissingPublisherCard?this.parentFeed.stopScrolling():(this.pendingPublisherCardsList=[],this.parentFeed.setIsAllowedToRequestMoreContent(!0),TRC.dispatch("resumeFeedRendering")),TRC.modDebug.logMessageToServer(1,`Load publisher card: ${a} on Card: ${t} with the anchor element selector: ${o} failed after ${this.publisherCardMaxRetries} retries`,{idx:"pc",pc:a,st:0,sel:o,slot:t,plat:this.trcManager.getPlatformCode()}))));this.createFeedContainerForResumeAfterPublisherCard(s,n),this.shouldSendCardEvents&&!r&&this.pendingPublisherCardsList.forEach(this.initCardEventsManager.trcBind(this)),TRC.modDebug.logMessageToServer(2,`Load publisher card: ${a} on Card: ${t} with the anchor element selector: ${o} succeed`,{idx:"pc",pc:a,st:1}),this.pendingPublisherCardsList=[],this.parentFeed.setIsAllowedToRequestMoreContent(!0),0<e&&TRC.dispatch("resumeFeedRendering")}initCardEventsManager(e,t=0){var i=e.trcResponse.pcp.tps,r=document.querySelector(i);r?(i=new TRC.CardEventsManager(this.trcManager,this.options,e,r),this.checkIfCardRendered(i,r)):t<this.publisherCardMaxRetries&&(t++,setTimeout(this.initCardEventsManager.trcBind(this,e,t),this.feedCardEventsRetryInterval))}createFeedContainerForResumeAfterPublisherCard(e,t){var i=document.createElement("div"),r=this.parentFeed.container;if(this.parentFeed.numContainers++,this.parentFeed.switchMainContainer(i),this.parentFeed.setMainContainerCssClassesAndAttributes(i,this.options),e.parentNode.insertBefore(i,e.nextElementSibling),t&&(TRC.util.isTrue(t.scw)||TRC.util.isTrue(t.acw))&&(this.setPublisherCardContainerStyle(i),TRC.dom.on(window,"resize",this.setPublisherCardContainerStyle.trcBind(this,i))),n.sendWarnIfAnchorIsIncorrectlyPositioned(r,e),this.parentFeed.isFullWidthMobileFeed(this.options)){const e=this.parentFeed.getMobileFullWidthMarginsCss(this.parentFeed.numContainers);e&&TRC.dom.injectStyle(e,null)}}static sendWarnIfAnchorIsIncorrectlyPositioned(e,t){t.getBoundingClientRect().top<e.getBoundingClientRect().top&&__trcWarn("anchor element is above the original feed container")}static getContainerWidth(e){return getComputedStyle(e).width}getPageDirection(){return"rtl"===this.trcManager.direction?"right":"left"}setPublisherCardContainerMargin(e){var t=this.getPageDirection(),i=this.origContainer.getBoundingClientRect()[t],r=e.getBoundingClientRect()[t];let n,o=1;i!==r&&("right"===t?(n="marginRight",o=-1):n="marginLeft",r=(i-r+parseInt(getComputedStyle(e)[n],10))*o,e.style[n]=`${r}px`)}setPublisherCardContainerStyle(e){var t=n.getContainerWidth(this.origContainer),i=n.getContainerWidth(e),r=this.options["feedDynamicParameters"],r=r&&r.disableFeedSplitContainerAlignment||this.trcManager.global["disable-feed-split-container-alignment"],i=t===i;i&&r||(i||(e.style.width=t),r||this.setPublisherCardContainerMargin(e))}registerPublisherCardForHandling(e){this.pendingPublisherCardsList.unshift(e)}checkIfCardRendered(e,t,i=0){t.getBoundingClientRect().height<this.feedCardEventsMinContainerHeight?i<this.feedCardEventsMaxRetries&&(i++,setTimeout(this.checkIfCardRendered.trcBind(this,e,t,i),this.feedCardEventsRetryInterval)):e.handleRenderedCard(t)}}TRC.PublisherCardsManager=n})(),(()=>{const n="trc-w2f";TRC.WidgetToFeedHelper=class{constructor(e,t,i){this.parentFeed=e,this.trcManager=t,this.hasFeedUI=i,this.setUpFeedContainer(),TRC.listen("trcResponseHandled",this.setContentTypeCssClass.trcBind(this))}setUpFeedContainer(){const e=this.parentFeed.container;e.className+=` ${n}`,!1===this.hasFeedUI&&(e.className+=" trc-w2f-no-ui")}setContentTypeCssClass(){const e=this.parentFeed.container,t=e.querySelectorAll(".videoCube.syndicatedItem").length,i=e.querySelectorAll(".videoCube:not(.syndicatedItem)").length;let r=i?t?"hybrid":"organic":"sponsored";this.parentFeed.container.className=this.parentFeed.container.className.replace(/\btrc-content-(hybrid|sponsored|organic)\b/g,""),this.parentFeed.container.className+=` trc-content-${r}`}addHeaderToFeed(e){this.parentFeed.header.appendChild(e),this.header=e}addFooterToFeed(e){this.footer=document.createElement("div"),this.footer.className="tbl-feed-footer",this.footer.appendChild(e),this.parentFeed.container.appendChild(this.footer)}getHeader(){return this.header}getFooter(){return this.footer}applyWidgetHeaderAndFooterStylesToFeed(e){if(!this.headerAndFooterStylesApplied){const i=new RegExp(`(\\.${e})([^{]+\\.(trc_rbox_header|logoDiv|trc-widget-footer))`,"g"),r=new RegExp(`^(?![^}]*.${n}[^{]+).*$`,"gm");TRC.dom.injectedStyles.forEach(t=>{if(i.test(t.innerText)){let e=t.innerText.replace(i,`.${n}$2`);e=(e=(e=(e=e.replace(/\n/g,"")).replace(/}/g,"}\n")).replace(r,"")).replace(/\n/g,""),TRC.dom.injectStyle(e,document)}}),this.headerAndFooterStylesApplied=!0}}}})(),(()=>{const r={TABOOLA_REMINDER:{name:"taboola_reminder",responseKey:"taboola-reminder",contentElementId:"tbl-taboola-reminder-inner",moduleFileName:"taboola-reminder",moduleClass:"TaboolaReminder",closeBtn:"tbl-taboola-reminder-closeBtn",closeBtnWrapper:"tbl-taboola-reminder-closeBtn-wrapper"},NEXT_UP:{name:"next_up",responseKey:"next-up-widget",contentElementId:"tbl-next-up-inner",moduleFileName:"next-up-widget",moduleClass:"NextUpWidget",closeBtn:"tbl-next-up-closeBtn",closeBtnWrapper:"tbl-next-up-closeBtn-wrapper"}};class n{constructor(e,t,i){n.isFloatingUnitOn?__trcWarn("Floating Unit: Trying To Add More Than One Floating Unit"):(n.isFloatingUnitOn=!0,this.formattedResponse=e,this.placementData=t,this.trcManager=i,this.videoList=this.formattedResponse.trc["video-list"],this.unit=n.getUnitByResponseKey(this.videoList),this.contentSelector=`#${this.unit.contentElementId}`,this.sendSupplyEvent("RENDERED"),this.initFloatingUnit())}sendSupplyEvent(e,t=null,i=null){i={event_type:this.unit.name,event_state:e,event_value:t,event_msg:i};TRCImpl.sendEvent("supply-feature",{d:JSON.stringify(i)},null)}static getUnitByResponseKey(t){let i;return Object.keys(r).some(e=>{e=r[e];return!!t[e.responseKey]&&(i=e,!0)}),i}initFloatingUnit(){this.createElementForFloatingUnitContent(),this.setFloatingUnitOptions(),this.definePlacementDataContainerSelector(),this.lazyLoadModules()}definePlacementDataContainerSelector(){this.placementData["container-selectors"]=[{container:this.contentSelector,location:"first",shouldCreateContainer:!0,isFloatingUnit:!0}]}setFloatingUnitOptions(){this.floatingUnitOptions=this.videoList[this.unit.responseKey]||{},this.floatingUnitOptions.unit=this.unit}setNextUpSpecificOptions(){this.floatingUnitOptions.nupOverlayConfig=this.trcManager.global["nup-overlay-config"]?JSON.parse(this.trcManager.global["nup-overlay-config"]):{}}lazyLoadModules(){TRC.ModuleLoader.load("floating-unit",TRC.FloatingUnit,(()=>{this.lazyLoadChildClass()}).trcBind(this))}lazyLoadChildClass(){this.unit.responseKey===r.NEXT_UP.responseKey&&this.setNextUpSpecificOptions(),TRC.ModuleLoader.load(this.unit.moduleFileName,TRC[this.unit.moduleClass],(()=>{const e=TRC[this.unit.moduleClass];new e(this.floatingUnitOptions,this.trcManager,this.contentElement),this.trcManager.initRBoxDrawingIfPlacementEligible(this.placementData)}).trcBind(this))}createElementForFloatingUnitContent(){const e=document.createElement("div");e.id=this.unit.contentElementId,e.className=this.unit.contentElementId,TRC.dom.addClass(e,"tbl-hidden"),this.contentElement=document.body.appendChild(e)}static isFloatingUnit(e){return e&&!!n.getUnitByResponseKey(e)}}n.isFloatingUnitOn=!1,TRC.FloatingUnitGenerator=n})(),function(){var l,c=1000075,d={},h="";function u(){return TRC.MobileSdk.isEnabled()}function p(){if(!u())return TRC.isAMP&&window.context&&window.context.canonicalUrl||TRC.pageManager.getTopMostWindow().location.href;var e=TRC._taboolaClone&&TRC._taboolaClone.filter(function(e){return!!e.url});return e&&e.url||window.location.href}TRC.clickFraudDetect={init:function(e,t,i,r,n){h=p(),l=TRCImpl.additional_data&&TRCImpl.additional_data.sdkd||{};var o=((a=document.createElement("a")).href=h||p(),a.hostname),a=r.global["fraud-detection-script-url"]||"https://js.ad-score.com/score.min.js?pid="+c+"#",s=d={tid:u()?"_InAPP":"PHON"===TRC.platform_code?"_MW":"_Desktop",l1:e,l4:i,uid:t,pub_domain:o,ref:i};l.appid?s.l3=s.pub_app=l.appid:s.l3=TRC.platform_code,function(e,t){if(!TRC.botDetected)try{TRC.net.loadScript(e,"js",function(e){TRC.clickFraudDetect.isLoaded=!0,e.impressionUTID.enabled&&function(e){var t=[e.viewId,e.publisherId,e.userId].join("-");if(e.publisherId&&e.userId&&e.viewId)try{window.adScore("set","utid",{},{pid:c,utid:t}),TRC.clickFraudDetect.impressionUTID=t}catch(e){__trcError("Failed to set fraud UTID on impression",e)}else __trcError("Error in clickFraudDetect.setImpressionUTID: missing parameters")}(e.impressionUTID)}.bind(null,t),null,!0)}catch(e){__trcWarn("loadFraudScript: Error appending fraud script",e)}}(TRC.URL.prototype.switchProtocol.call(a,TRC.PROTOCOL)+TRC.util.keys(s).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(s[e])}).join("&"),{impressionUTID:{enabled:(this.isInitialized=!0)===r.global["fraud-enable-impression-utid"],publisherId:e,userId:t,viewId:n}})},fraudScriptCallback:function(r,n,o,a,s,l){setTimeout(function(){try{var t,i;TRC.clickFraudDetect.isLoaded?(t={},i=TRC.clickFraudDetect.impressionUTID,TRC.util.keys(d).forEach(function(e){t[e]=d[e]}),t.pid=""+c,t.l2=r,t.l3=t.l3||TRC.platform_code,t.l4=a,t.l5=s,t.l6="clicked",t.uid=n,t.utid=i?i+"_"+o:o,t.isTRCUrl=l,adScore("send","adclick",{},t)):__trcWarn("Fraud script did not render",e)}catch(e){__trcWarn("fraudScriptCallback: Error in fraud detection",e)}},0)},isInitialized:!1,isLoaded:!1,impressionUTID:null}}(),TRC.util=function(win,doc){var modObject={isType:function(e,t){return t=t.charAt(0).toUpperCase()+t.substr(1),Object.prototype.toString.call(e)=="[object "+t+"]"},hasKeys:function(e){if(this.isType(e,"object"))if(Object.keys&&!Object.propertyIsEnumerable("keys")){if(0<Object.keys(e).length)return!0}else for(var t in e)if(e.hasOwnProperty(t))return!0;return!1},getRandomIds:function(e){for(var t=0;t<e.len;t++)e.arr[t]=e.prefix+Math.floor(Math.random()*Math.pow(10,e.strength)+1)+e.suffix},getHtmlDecodeText:(element=doc.createElement("div"),Fr={amp:"&",apos:"'","#x27":"'","#x2F":"/","#39":"'","#47":"/",lt:"<",gt:">",nbsp:" ",quot:'"'},Gr=/&(#(?:x[0-9a-f]+|\d+)|[a-z]+);?/gi,decodeSpecialCharacters=function(e){return e.replace(Gr,Hr)},function(e){if("string"!=typeof e)return"";if(!TRC.dom.isHtmlContent(e))return e;var t=decodeSpecialCharacters(e);return TRC.dom.isHtmlContent(t)?(element.innerHTML=encodeURI(e),t=element.textContent||element.innerText,decodeURI(t)):t}),isEmptyString:function(e){return!e||/^\s*$/.test(e)},keys:function(){"use strict";if(Object.keys)return function(e){return"object"==typeof e||"function"==typeof e&&null!==e?Object.keys(e):[]};var n=Object.prototype.hasOwnProperty,o=!{toString:null}.propertyIsEnumerable("toString"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],s=a.length;return function(e){if("object"!=typeof e&&("function"!=typeof e||null===e))return[];var t,i,r=[];for(t in e)n.call(e,t)&&r.push(t);if(o)for(i=0;i<s;i++)n.call(e,a[i])&&r.push(a[i]);return r}}(),merge:function(e){"use strict";if(null==e||e.constructor!==Object)return null;for(var t=TRC.util,i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r&&r.constructor===Object)for(var n,o=t.keys(r),a=0,s=o.length;a<s;a++)e[n=o[a]]=r[n]}return e},debounce:function(r,n,o,a){var s;return function(){var e=a||window,t=arguments,i=o&&!s;clearTimeout(s),s=setTimeout(function(){s=null,o||r.apply(e,t)},n),i&&r.apply(e,t)}},preprocessJsonString:function(t){return"string"!=typeof t?"":([{regex:/({|\[)\s*'/g,replace:'$1"'},{regex:/'\s*(:|}|,|\])/g,replace:'"$1'},{regex:/(:|,)\s*'/g,replace:'$1"'},{regex:/(?:([^"\s:\[{,])"([^"\s:,\]}]))/g,replace:'$1\\"$2'}].forEach(function(e){t=t.replace(e.regex,e.replace)}),t)},jsonParseWithNative:function(t){try{return JSON.parse(t)}catch(e){return TRC.util.jsonParseWithEval(t)}},jsonParseCustomNative:function(t){if(win.TRCImpl&&win.TRCImpl.global&&TRC.util.isTrue(TRCImpl.global["enable-json-parse-preprocess"]))try{return JSON.parse(TRC.util.preprocessJsonString(t))}catch(e){return __trcWarn("JSON Preprocess failed: '"+t+"'"),null}return TRC.util.jsonParseWithEval(t)},jsonParseWithEval:function(text){try{return eval("("+String(text)+")")}catch(e){throw new Error("JSON parse error - invalid input!")}},isNativeFunction:function(e){return/\{\s*\[native code\]\s*\}/.test(""+e)},filterObj:function(e,t){var i,r={};for(i in t)t.hasOwnProperty(i)&&e.call(this,t[i],i,t)&&(r[i]=t[i]);return r},textIsRTL:function(e){if(!e)return!1;var t="A-Za-zÃ€-Ã–Ã˜-Ã¶Ã¸-Ê¸Ì€-Öà €-á¿¿â°€-ï¬œï¸€-ï¹¯ï»½-ï¿¿",i="Ö‘-ß¿ï¬-ï·¿ï¹°-ï»¼",i=e.match(new RegExp("^[^"+t+i+"]*(?:(["+t+"]+)|(["+i+"]+))"));return!(!i||!i[2])},isArray:function(e){return!(!e||Array!==e.constructor)},map:function(e,t,i){if(Array.prototype.map)return e.map(t,i);var r,n,o;if(null==e)throw new TypeError(" array is null or not defined");var a,s=Object(e),l=s.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(1<arguments.length&&(r=i),n=new Array(l),o=0;o<l;)o in s&&(a=s[o],a=t.call(r,a,o,s),n[o]=a),o++;return n},isTrue:function(e){return"true"===e||!0===e||"1"===e},isFalse:function(e){return!e||"false"===e},isNumber:function(e){if(TRC.util.isType(e,"string")){if(!e.trim())return!1}else if(!TRC.util.isType(e,"number"))return!1;return 0<=e-e+1},parseTimeout:function(e,t){return t=void 0!==t?t:-1,void 0!==e?parseInt(e,10):t},splitUrlParts:(linkElement=document.createElement("a"),function(e){return e?(linkElement.href=e,{search:linkElement.search}):{}}),hashString:function(e){var t=0;if(0==e.length)return t;for(var i=0;i<e.length;i++){t=(t<<5)-t+e.charCodeAt(i);t&=t}return t},isPercentEnabled:(flags={},window._trcIsUTactive&&(TRC._rolledFlagsByPercent=flags),function(e,t){var i;return void 0!==flags[t]&&null!==flags[t]||(i=Math.random(),flags[t]="true"===e[t]||i<=+e[t]),flags[t]}),haveMutualKeys:function(e,t){if(!(e&&TRC.util.hasKeys(e)&&t&&TRC.util.hasKeys(t)))return!1;var i=TRC.util.merge({},e,t);return Object.keys(i).length<Object.keys(e).length+Object.keys(t).length},isAmp:function(e){return!!e.isAMP},isMobileSDK:function(e){return!(!e.mobile||!e.mobile.reportClick)},isRboxEncapsulated:function(e){return!(!this.isAmp(e)&&!this.isMobileSDK(e))},formatString:function(e,i){return i&&0!==i.length?e.replace(/\{(\d+)\}/g,function(e,t){t=t[0];return void 0!==i[t]?i[t]:e}):e},objectify:function(t,a){var i={};return a=a||".",Object.keys(t).forEach(function(e){var n={},o=t[e];Object.keys(o).forEach(function(e){var r,t,i=o[e];-1!==e.indexOf(a)?(r=n,t=e.split(a).filter(function(e,t,i){return r[e]=r[e]||{},t+1===i.length||(r=r[e],!1)}),r[t[0]]=i):n[e]=i}),i[e]=n}),i}},flags,linkElement,element,decodeSpecialCharacters,Fr,Gr;function Hr(e,t){return"#"===t[0]?String.fromCharCode("x"===t[1].toLowerCase()?parseInt(t.substr(2),16):parseInt(t.substr(1),10)):Fr[t]||e}return modObject}(window,document),void 0===document.trcGetCurrentStyle&&(document.trcGetCurrentStyle=function(e,t,i){if("string"==typeof e&&(e=document.getElementById(e)),window.getComputedStyle){var r=window.getComputedStyle(e,i);return r?r.getPropertyValue(t):i?null:e.style[t]}return t=t.replace(/-(\w)/,function(e,t){return t.toUpperCase()}),e.currentStyle[t]}),Function.prototype.trcBind||(Function.prototype.trcBind=Function.prototype.bind),void 0===Function.prototype.trcThrottle&&(Function.prototype.trcThrottle=function(t){var i,r=this;return function(){var e=arguments;i&&clearTimeout(i),i=setTimeout(function(){r.apply(r,e)},t)}}),void 0===document.head&&(document.head=document.getElementsByTagName("head")[0]),TRC.GoogleAds=function(){return"object"==typeof window.console&&console.log("TRC.GoogleAds is Deprecated"),{draw:function(){}}},TRC.math=TRC.math||(window,document,{roundByDecimal:function(e,t){var i=e/t,e=i.toFixed(0);return e*t+t*Math.round(i-e)},round10:function(e,t){return i="round",e=e,void 0===(t=t)||0==+t?Math[i](e):(e=+e,t=+t,isNaN(e)||"number"!=typeof t||t%1!=0?NaN:(e=e.toString().split("e"),+((e=(e=Math[i](+(e[0]+"e"+(e[1]?+e[1]-t:-t)))).toString().split("e"))[0]+"e"+(e[1]?+e[1]+t:t))));var i}}),(()=>{const h="trc_rbox_div",u="videoCube";class p{constructor(e){this.trcManager=e,this.itemAppearanceTime={}}static isEnabled(e){return TRC.util.isPercentEnabled(e.global,"enable-rbox-heatmap")}captureItemTime(e){this.itemAppearanceTime[e]=Date.now()}captureAndSendClickData(e){if(TRC.dom.closest(e.target,`.${h}`)&&(t=e,!TRC.dom.closest(t.target,"a.item-thumbnail-href")&&!TRC.dom.closest(t.target,"a.item-label-href"))){var t;const i=p.collectClickHeatmapCardData(e);TRC.dom.closest(e.target,`.${u}`)&&(i["item-d"]=this.collectClickHeatmapItemData(e)),this.trcManager.sendEvent("heatmap",{d:JSON.stringify(i)},{})}}static collectEventTargetData(e,t){const i=t?h:u,r=TRC.dom.containsClass(e.target,i),n=r?e.target:TRC.dom.closest(e.target,`.${i}`),o=n.getClientRects()[0],a=r?{x:0,y:0}:e.target.getClientRects()[0],[s,l]=p.getClickPoints(e,a),c=r?s:Math.abs((a.x||a.left)-(o.x||o.left))+s,d=r?l:Math.abs((a.y||a.top)-(o.y||o.top))+l;return{el:n,x:c,y:d,h:o.height,w:o.width}}static collectClickHeatmapCardData(e){var t=p.collectEventTargetData(e,!0);return{x:t.x,y:t.y,h:t.h,w:t.w,"c-time":Math.floor(e.timeStamp)}}collectClickHeatmapItemData(e){var t=p.collectEventTargetData(e,!1),e=this.itemAppearanceTime[t.el.video_data.id];return{x:t.x,y:t.y,h:t.h,w:t.w,slot:t.el.video_data.itemIndex,"ap-time":e}}static getClickPoints(e,t){if(i(e)){const i={x:t.x||t.left,y:t.y||t.top};return[e.touches[0].clientX-i.x,e.touches[0].clientY-i.y]}return[e.offsetX,e.offsetY];function i(e){return e.touches}}}TRC.Heatmap=p})(),(()=>{let n,o,a=.1,s=.3,i=!1;function e({mybox:t,containerElm:e,boxesList:i}){n=i;var r,i=!!(r=!(!t.trcResponse||!t.trcResponse.vtag)&&t.trcResponse.vtag).advancedVideoConfiguration&&r.advancedVideoConfiguration;if(!r||!l(r.unitType,i))return!1;if(i){const n=i["mid-article-hip-rbox-percent-inview-to-report"],t=i["mid-article-hip-min-percent-to-display"];a=n?Number(n):a,s=t?Number(t):a}r=t.id,i=e,c(r,i),d(r,i),e.classList.add("tbl-invisible"),TRC.listen("noAdjacInFirstWF",e=>{t.trcResponse.scac&&(TRC.trcHipCloseUnit=TRC.trcHipCloseUnit||{},TRC.trcHipCloseUnit[e.data]=!0),TRCImpl.sendAbTestEvent("HipLostNoAdjacInFirstWF","HipLost"),h(e.data)})}const r=["4","254"],l=(e,t)=>(!t||"true"!==t["mid-article-hip-opt-out"])&&-1!==r.indexOf(e.toString()),c=(e,t)=>{const i=[];for(let e=10*a;e<=10;e++){const r=e/100;i.push(r)}e={targetElement:t,threshold:i,onEnter:u.trcBind(this,e)};o=TRC.intersections.observe(e)},d=(e,t)=>{e={targetElement:t,threshold:[s],onEnter:((e,t)=>{TRCImpl.sendAbTestEvent("HipLostRboxInViewPort",Math.floor(100*t.intersectionRatio)),h(e)}).trcBind(this,e),disableDuplicatePrevention:!0},e=TRC.intersections.observe(e);TRC.listen("adjacAdPlaying",p.trcBind(this,e)),TRC.listen("rBoxVisible",p.trcBind(this,e))},h=e=>{const t=n[e]["container"];t.classList.remove("tbl-invisible"),TRC.dispatch("rBoxVisible",e),TRC.trcHipContainersShowing=TRC.trcHipContainersShowing||{},TRC.trcHipContainersShowing[e]=!0},u=(e,t)=>{t.intersectionRatio>a&&!i?(i=!0,TRCImpl.sendAbTestEvent("rboxViewPortIntersection",Math.floor(100*t.intersectionRatio))):t.intersectionRatio<a&&i&&(TRCImpl.sendAbTestEvent("rboxOutOfViewPort",Math.floor(100*t.intersectionRatio)),p(o))},p=e=>{TRC.intersections.unobserve(e)};TRC.HighImpactPlacement={handleHighImpactPlacement:e},window._trcIsUTactive&&(TRC.HighImpactPlacement.reportRboxInViewPort=u,TRC.HighImpactPlacement.checkIfHIP=l),TRC.listen("beforeBoxRender",e)})(),function(){var t="trc_vp_els";function e(e){this.trcManager=e,this.sessionStorage=TRC.pageManager.getLocalStorageImplementation("strict-w3c-storage","session"),this.lastViewportElementData=this.getVPElementsHistory()[e.getItemId()],e.trcCache.enableCacheViaStorageFlag()}e.prototype.trackElement=function(e){TRC.dom.on(e,"click",this.storeElementPosition.trcBind(this,e))},e.prototype.scrollToElementIfWasLastInViewPort=function(t){var e,i=this.trcManager;this.lastViewportElementData&&t.id===this.lastViewportElementData.id&&(delete(e=this.getVPElementsHistory())[this.trcManager.getItemId()],this.storeVPElementsHistory(e),"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual"),setTimeout(function(){t.scrollIntoView(!1);var e={abTestsEventType:"simple",name:"backToFeed_backToCard",type:__trcJSONify({origViewId:t.placementData.cachedViewId,viewId:TRC.pageManager.getPageData(),placement:t.getAttribute("data-placement-name"),cardIndex:t.getAttribute("data-card-index")}),eventTime:(new Date).getTime()};i.sendEvent("abtests",{"unescape-d":encodeURIComponent(__trcJSONify(e))},null,!1,null,null)},0))},e.prototype.storeElementPosition=function(e){var t=this.getVPElementsHistory();t[this.trcManager.getItemId()]={id:e.id,s:(new Date).getTime()};e={abTestsEventType:"simple",name:"backToFeed_exitFromCard",type:__trcJSONify({viewId:TRC.pageManager.getPageData(),placement:e.getAttribute("data-placement-name"),cardIndex:e.getAttribute("data-card-index")}),eventTime:(new Date).getTime()};this.trcManager.sendEvent("abtests",{"unescape-d":encodeURIComponent(__trcJSONify(e))},null,!1,null,null),this.storeVPElementsHistory(t)},e.prototype.storeVPElementsHistory=function(e){e=this.removeEntriesToLimit(e),this.sessionStorage.setValue(t,__trcJSONify(e))},e.prototype.getVPElementsHistory=function(){var e=this.sessionStorage.getValue(t)||"{}";return TRC.util.jsonParseWithNative(e)},e.prototype.removeEntriesToLimit=function(e){var t,i,r,n={};if(TRC.util.keys(e).length<=5)return e;for(i in e)e.hasOwnProperty(i)&&(n[e[i].s]=i);for((t=TRC.util.keys(n)).sort();5<t.length;)t.shift();for(r in n)n.hasOwnProperty(r)&&-1===t.indexOf(r)&&delete e[n[r]];return e},TRC.HistoryManager=e}(),TRC.imageUtils={getImageUrlBasedOnCloudinaryApi(e,t,i="https://images.taboola.com/taboola/image/fetch"){const r=this.cloudinaryEncoding(e);return[i,t,r].join("/")},cloudinaryEncoding(t){if(null==t)return"";let i=void 0,r=void 0,n="",o=0;const a=`${t}`,e=a.length;for(i=r=0;o<e;){const t=a.charCodeAt(o);let e=null;t<128?r++:e=127<t&&t<2048?String.fromCharCode(t>>6|192,63&t|128):String.fromCharCode(t>>12|224,t>>6&63|128,63&t|128),null!==e&&(r>i&&(n+=a.slice(i,r)),n+=e,i=r=o+1),o++}return r>i&&(n+=a.slice(i,e)),escape(n)}},function(u,p){"use strict";var t;function l(e){this.time=e.time,this.target=e.target,this.rootBounds=e.rootBounds,this.boundingClientRect=e.boundingClientRect,this.intersectionRect=e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0},this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,e=t.width*t.height,t=this.intersectionRect,t=t.width*t.height;this.intersectionRatio=e?t/e:this.isIntersecting?1:0}function e(e,t){var i,r,n,t=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(t.root&&1!=t.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=(i=this._checkForIntersections.bind(this),r=this.THROTTLE_TIMEOUT,n=null,function(){n=n||setTimeout(function(){i(),n=null},r)}),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(t.rootMargin),this.thresholds=this._initThresholds(t.threshold),this.root=t.root||null,this.rootMargin=this._rootMarginValues.map(function(e){return e.value+e.unit}).join(" ")}function i(e,t,i,r){"function"==typeof e.addEventListener?e.addEventListener(t,i,r||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,i)}function r(e,t,i,r){"function"==typeof e.removeEventListener?e.removeEventListener(t,i,r||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,i)}function m(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?t=!t.width||!t.height?{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}:t:{top:0,bottom:0,left:0,right:0,width:0,height:0}}function n(e,t){for(var i=t;i;){if(i==e)return!0;i=g(i)}return!1}function g(e){e=e.parentNode;return e&&11==e.nodeType&&e.host?e.host:e}"IntersectionObserver"in u&&"IntersectionObserverEntry"in u&&"intersectionRatio"in u.IntersectionObserverEntry.prototype?"isIntersecting"in u.IntersectionObserverEntry.prototype||Object.defineProperty(u.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return 0<this.intersectionRatio}}):(t=[],e.prototype.THROTTLE_TIMEOUT=1e3,e.prototype.POLL_INTERVAL=null,e.prototype.observe=function(t){if(!this._observationTargets.some(function(e){return e.element==t})){if(!t||1!=t.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:t,entry:null}),this._monitorIntersections()}},e.prototype.unobserve=function(t){this._observationTargets=this._observationTargets.filter(function(e){return e.element!=t}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},e.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},e.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},e.prototype._initThresholds=function(e){e=e||[0];return(e=!Array.isArray(e)?[e]:e).sort().filter(function(e,t,i){if("number"!=typeof e||isNaN(e)||e<0||1<e)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==i[t-1]})},e.prototype._parseRootMargin=function(e){e=(e||"0px").split(/\s+/).map(function(e){e=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!e)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(e[1]),unit:e[2]}});return e[1]=e[1]||e[0],e[2]=e[2]||e[0],e[3]=e[3]||e[1],e},e.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this._checkForIntersections(),this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(i(u,"resize",this._checkForIntersections,!0),i(p,"scroll",this._checkForIntersections,!0),"MutationObserver"in u&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(p,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},e.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,r(u,"resize",this._checkForIntersections,!0),r(p,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},e.prototype._checkForIntersections=function(){var a=this._rootIsInDom(),s=a?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach(function(e){var t=e.element,i=m(t),r=this._rootContainsTarget(t),n=e.entry,o=a&&r&&this._computeTargetAndRootIntersection(t,s),o=e.entry=new l({time:u.performance&&performance.now&&performance.now(),target:t,boundingClientRect:i,rootBounds:s,intersectionRect:o});n?a&&r?this._hasCrossedThreshold(n,o)&&this._queuedEntries.push(o):n&&n.isIntersecting&&this._queuedEntries.push(o):this._queuedEntries.push(o)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},e.prototype._computeTargetAndRootIntersection=function(e,t){var i,r,n,o,a=u.getComputedStyle(e);if(a&&"none"!==a.display){for(var s=m(e),l=g(e),c=!1;!c;){var d=null,h=1==l.nodeType?u.getComputedStyle(l):{};if(!h||"none"===h.display)return;if(l==this.root||l==p?(c=!0,d=t):l!=p.body&&l!=p.documentElement&&"visible"!=h.overflow&&(d=m(l)),d&&(i=d,r=s,d=h=o=n=void 0,n=Math.max(i.top,r.top),o=Math.min(i.bottom,r.bottom),h=Math.max(i.left,r.left),d=Math.min(i.right,r.right),r=o-n,!(s=0<=(i=d-h)&&0<=r&&{top:n,bottom:o,left:h,right:d,width:i,height:r})))break;l=g(l)}return s}},e.prototype._getRootRect=function(){var e,t;return t=this.root?m(this.root):(e=p.documentElement,t=p.body,{top:0,left:0,right:e.clientWidth||t.clientWidth,width:e.clientWidth||t.clientWidth,bottom:e.clientHeight||t.clientHeight,height:e.clientHeight||t.clientHeight}),this._expandRectByRootMargin(t)},e.prototype._expandRectByRootMargin=function(i){var e=this._rootMarginValues.map(function(e,t){return"px"==e.unit?e.value:e.value*(t%2?i.width:i.height)/100}),e={top:i.top-e[0],right:i.right+e[1],bottom:i.bottom+e[2],left:i.left-e[3]};return e.width=e.right-e.left,e.height=e.bottom-e.top,e},e.prototype._hasCrossedThreshold=function(e,t){var i=e&&e.isIntersecting?e.intersectionRatio||0:-1,r=t.isIntersecting?t.intersectionRatio||0:-1;if(i!==r)for(var n=0;n<this.thresholds.length;n++){var o=this.thresholds[n];if(o==i||o==r||o<i!=o<r)return!0}},e.prototype._rootIsInDom=function(){return!this.root||n(p,this.root)},e.prototype._rootContainsTarget=function(e){return n(this.root||p,e)},e.prototype._registerInstance=function(){t.indexOf(this)<0&&t.push(this)},e.prototype._unregisterInstance=function(){var e=t.indexOf(this);-1!=e&&t.splice(e,1)},TRC.IntersectionObserver=e,TRC.IntersectionObserverEntry=l)}(window,document),TRC.intersections=function(u){var s=0,l={},c={},d="observeId";function h(){}function p(e,t){return e&&(e===t||t.contains(e)||"getAttribute"in e&&e.getAttribute("data-tbl-friendly-overlay"))}function m(e){var t,i;return p((t=(i=g((t=e).getBoundingClientRect())).targetElementCenterX,i=i.targetElementCenterY,u.elementFromPoint(t,i)),e)}function g(e){return t(e,["mm"]).mm}function t(t,e){var i={};return e.forEach(function(e){i[e]=function(e,t){switch(t){case"lt":return r(e,0,0);case"mt":return r(e,.5,0);case"rt":return r(e,1,0);case"lm":return r(e,0,.5);case"mm":return r(e,.5,.5);case"rm":return r(e,1,.5);case"lb":return r(e,0,1);case"mb":return r(e,.5,1);case"rb":return r(e,1,1);default:__trcWarn("intersections.getPointInElementByPosition - pos parameter not recognized. pos is: "+t)}}(t,e)}),i;function r(e,t,i){return{targetElementCenterX:e.left+Math.round((e.right-e.left)*t),targetElementCenterY:e.top+Math.round((e.bottom-e.top)*i)}}}function o(e,t,i){t.onTrigger(e,t.observer,i,t.lastBoundingClientRect),i=i,t===TRC.intersections.visibilityState.IN_VIEW_PORT_VISIBLE&&TRC.intersections.unObservePolling(i)}function f(e){TRC.Timeout.clear(e.visibleTimeout),delete e.visibleTimeout}function a(e,t,i){f(e),e.visibilityReported||(e=e,i=i,(t=t).isEnter&&e.isVisible&&("function"!=typeof t.visibleWidgetPredicate||t.visibleWidgetPredicate())&&(delete e.isVisible,e.visibilityReported=!0,o(e,t,i)))}function C(e,t,i){var r=TRCImpl&&TRCImpl.global["visibility-intersection-api-delay"]||1e3,n=i===TRC.intersections.visibilityState.IN_VIEW_PORT_VISIBLE&&!e.visibleTimeout||TRC.intersections.forceEnableDelayedVisibilityState();t.enableDelayedVisibilityCheck?n&&(e.isVisible=!0,e.lastVisibleBoundingClientRect=t.lastBoundingClientRect,e.lastVisibleBoundingClientRect.pageXOffset=t.geometryOffsets.pageXOffset,e.lastVisibleBoundingClientRect.pageYOffset=t.geometryOffsets.pageYOffset,e.visibleTimeout=TRC.Timeout.set(a.trcBind(this,e,t,i),r)):o(e,t,i)}function b(e,t,i){var r=t.target;e.isEnter=t.isIntersecting,e.isExit=!e.isEnter,e.intersection=t.intersectionRatio,e.isEnter?e.onEnter(t,r,e.observer):e.isExit&&(r.visibleTimeout&&f(r),r.isVisible=!1,e.onExit(t,r,e.observer),TRC.intersections.unObservePolling(e));var n,o,a,s,l=g(t.boundingClientRect),c=l.targetElementCenterX,d=l.targetElementCenterY,h=TRCImpl&&TRCImpl.global["visibility-threshold-override"]||0;return n=e,a=s=t.isIntersecting&&t.intersectionRatio>=h&&(l=c,a=d,s=t.intersectionRect,h=e.exactVisibleThresholdFromTop,s.height>=h||l<=s.right&&a<=s.bottom&&0<a)?TRC.intersections.visibilityState.IN_VIEW_PORT_VISIBLE:t.isIntersecting?TRC.intersections.visibilityState.IN_VIEW_PORT_NOT_VISIBLE:TRC.intersections.visibilityState.NOT_IN_VIEW_PORT,t=t,c=c,d=d,n.disableCheckOverlay||a!==TRC.intersections.visibilityState.IN_VIEW_PORT_VISIBLE||(d=u.elementFromPoint(c-1,d-1)||u.elementFromPoint(c+1,d+1),isNaN(n.exactVisibleThresholdFromTop)||(o=u.elementFromPoint(c,t.boundingClientRect.top+n.exactVisibleThresholdFromTop)),p(d,t.target)||p(o,t.target)||(a=TRC.intersections.visibilityState.IN_VIEW_PORT_NOT_VISIBLE,1<=t.intersectionRatio&&null!==d&&TRC.intersections.observePolling(n))),s=a,i.disableDuplicatePrevention?C(r,e,s):e.lastEventId&&e.lastEventId===s||(C(r,e,s),e.lastEventId=s),s}var T={getPointsOnElement:t,TARGET_ATTRIB:d,visibilityState:{IN_VIEW_PORT_VISIBLE:1,IN_VIEW_PORT_NOT_VISIBLE:2,NOT_IN_VIEW_PORT:3},observe:function(a){var e,t,i=a.disableCheckOverlay?[0,.5]:[0,.25,.5,.75,1];function r(e){for(var t=0;t<e.length;t++)for(var i=e[t],r=i.target.getAttribute(d).split(" "),n=0;n<r.length;n++){var o=r[n],o=l[o];o.lastBoundingClientRect=i.boundingClientRect,o.geometryOffsets={pageXOffset:window.pageXOffset,pageYOffset:window.pageYOffset},o&&o.observer.tblObserverKey===this.tblObserverKey&&b(o,i,a)}}if(a.targetElement&&null!==a.threshold&&(a.onEnter||a.onExit||a.onTrigger)){e=a.targetElement,t="tbl-observe-"+s,o=e.getAttribute(d)?e.getAttribute(d)+" "+t:t,e.setAttribute(d,o),s++,function(e,t){if(TRC.util.isArray(e.threshold))for(var i=0;i<e.threshold.length;i++){var r=e.threshold[i];-1===t.indexOf(r)&&t.push(e.threshold)}else-1===t.indexOf(e.threshold)&&t.push(e.threshold)}(a,i),l[t]={targetSelector:t,targetElement:e,isEnter:null,isExit:null,intersection:null,disableCheckOverlay:a.disableCheckOverlay,disableDuplicatePrevention:a.disableDuplicatePrevention,enableDelayedVisibilityCheck:a.enableDelayedVisibilityCheck,visibleWidgetPredicate:a.visibleWidgetPredicate,exactVisibleThresholdFromTop:a.exactVisibleThresholdFromTop,threshold:a.threshold,onExit:a.onExit||h,onEnter:a.onEnter||h,onTrigger:a.onTrigger||h,boundingClientRect:null};var n,o={root:a.rootSelector||null,rootMargin:a.rootMargin||"0px",threshold:a.threshold},i=TRC.util.hashString(JSON.stringify(o));return c[i]?n=c[i]:(o.root=o.root&&document.querySelector(o.root),n=new(TRC.IntersectionObserver||IntersectionObserver)(r.trcBind(o),o),"MutationObserver"in window||(n.POLL_INTERVAL=TRCImpl.global["intersections-polyfill-poll-interval"]||500),o.tblObserverKey=n.tblObserverKey=i,c[i]=n),(l[t].observer=n).observe(e),t}__trcDebug("missing params for intersectionHandler")},isInViewPort:function(e){var t=TRCImpl.global["visibility-threshold"]||e.disableCheckOverlay?[0,.5]:[0,.25,.5,.75,1],e={rootSelector:e.rootSelector||null,targetElement:e.targetElement,threshold:t,rootMargin:"0px",disableCheckOverlay:e.disableCheckOverlay,disableDuplicatePrevention:e.disableDuplicatePrevention,enableDelayedVisibilityCheck:e.enableDelayedVisibilityCheck,visibleWidgetPredicate:e.visibleWidgetPredicate,exactVisibleThresholdFromTop:e.exactVisibleThresholdFromTop,onTrigger:e.onTrigger,onEnter:e.onEnter};return this.observe(e)},unobserve:function(e){var t,i,r=l[e];if(r)return i=(t=(r=l[e].targetElement).getAttribute(d).split(" ")).indexOf(e),1===t.length&&(l[e].observer.unobserve(r),r.removeAttribute(d)),-1<i&&1<t.length&&(t.splice(i,1),r.setAttribute(d,t.join(" "))),delete l[e];__trcLog("missing target element for unobserve")},unobserveAll:function(e){for(var t=e.split(" "),i=0;i<t.length;i++)this.unobserve(t[i])},getIntersectionState:function(){return l},observePolling:function(e){this.observedElementsInPolling[e.targetSelector]||(this.observedElementsInPolling[e.targetSelector]={target:e.targetElement,state:e},e.underPolling=!0,this.observedElementsInPollingCounter++),0<this.observedElementsInPollingCounter&&this.startPolling(500)},unObservePolling:function(e){this.observedElementsInPolling[e.targetSelector]&&(delete this.observedElementsInPolling[e.targetSelector],this.observedElementsInPollingCounter--,e.underPolling=!1),0===this.observedElementsInPollingCounter&&this.stopPolling()},stopPolling:function(){clearInterval(this.pollingInterval),this.pollingInterval=null},startPolling:function(e){this.pollingInterval||(this.pollingInterval=setInterval(function(){var e,t,i=T.observedElementsInPolling;for(t in i)if(i.hasOwnProperty(t)&&m((e=i[t]).target)){for(var r=e.target.getAttribute(T.TARGET_ATTRIB).split(" "),n=T.getIntersectionState(),o=0;o<r.length;o++){var a=r[o];C(e.target,n[a],T.visibilityState.IN_VIEW_PORT_VISIBLE)}T.unObservePolling(e.state)}},e))},observedElementsInPolling:{},observedElementsInPollingCounter:0,forceEnableDelayedVisibilityState:function(){return!1}};return T}((window,document)),(()=>{const t="tbl_creative_preview",r="additional-properties",a={sentUsageLog:!1,overriddenPlacements:{}},n={autoTriggerConfig:{hover:"true",viewabilityConfig:{percentage:"5",time:"0"}},repeat:"true",scriptUrlTemplate:"//15.taboola.com/tbp?oid=15&pubid=166277&tagid=948107&pstn=[pstn]&cb=[cb]&callback={CALLBACK_NAME}",unitBootSrc:"//vidstat.taboola.com/vpaid/units/{version}/creatives/creative_js.js"};a.handleOverrideItems=(e,t)=>{e=a.getValueFromUrl("tbl_should_override_all_slots",!1)?l(e,t):o(e,t[0].itemType);a.overrideItems(e,t)};const i=(e,t)=>{const i=(e=>{var t=e[r];if(t)try{return __trcUnJSONify(t)}catch(t){return __trcDebug(`invalid json in ${e[r]}`),{}}return{}})(e);i&&Object.keys(i).forEach(e=>{t[e]=i[e]})};a.overrideItems=(r,n)=>{0<r.length&&n&&r.forEach((e,t)=>{var i=t%n.length;a.overrideItem(r[t],n[i])})},a.overrideItem=(e,t)=>{e.thumbnail=t.thumbnail||"",e.title=t.title||"",e.description=t.description||"",e["branding-text"]=t["branding-text"]||"",e.uploader=t.uploader||"",i(t,e),e.url="#"};a.isEnabled=e=>e&&a.isItemOverrideUrlParam(),a.isItemOverrideUrlParam=()=>0<=location.search.indexOf(t);const s=(e,t)=>!!e[t]||!(e["is-syndicated"]||e["is-in-network"]||e["is-native"])&&"is-organic"===t,o=(e,t)=>{const{overriddenPlacements:i={}}=a,r=[];let n,o;return e.forEach(e=>{o=e.uuip||e.uip;var e=e["v"];e&&o&&!i[o]&&(n=((t,i)=>{if(!i)return t[0];for(let e=0;e<t.length;e++)if(s(t[e],i))return t[e]})(e,t))&&(r.push(n),i[o]=!0)}),r},l=(e,t)=>{const i=a.getValueFromUrl("tbl_should_repeat_override_items",!0),r=[];return i||c(e,t),e.forEach(e=>{e.v&&e.v.forEach(e=>{r.push(e)})}),r},c=(t,i)=>{let r=i.length;for(let e=0;e<t.length;e++){const i=t[e].v;i&&(i.length>=r?d(t,e+1,r):(r-=i.length,e===t.length-1&&0<r&&h(i,r)))}},d=(e,t,i)=>{e.splice(t),e[t-1].v.splice(i)},h=(t,i)=>{for(let e=0;e<i;e++)t.push(Object.assign({},t[0]))};a.getValueFromUrl=(t,i)=>{try{let e=__trcUnJSONify(TRC.URL.prototype.getParameter.call(window.location.search,t,decodeURIComponent));return(void 0===e||null===e&&i)&&(e=i),e}catch(i){return __trcDebug(`invalid data in url param ${t}`),null}},a.getNewItemFromUrl=()=>{let e=a.getValueFromUrl(t);return Array.isArray(e)||(e=[e]),e},TRC.ItemOverride={run:(e,t)=>{if(a.isEnabled(e)){const r=a.getNewItemFromUrl();(e=>{if(!a.sentUsageLog){const t=e?e.map(e=>e&&e.creativeId||null):null;TRC.RBoxUsage.logUsage("TRC.ItemOverride",{extraData:{creativeIds:t,url:window.location.href}}),a.sentUsageLog=!0}})(r);var[i]=r,e=t&&t.trc&&t.trc.vl||[];r&&i&&e.length&&(u(r,t),a.handleOverrideItems(e,r))}}},window._trcIsUTactive&&(TRC.ItemOverride.privateProps=a);const u=(t,i)=>{var e=a.getValueFromUrl("tbl_pvideo_version","27_6_17");n.unitBootSrc=n.unitBootSrc.replace("{version}",e);for(let e=0;e<t.length;e++)if(t[e]&&t[e]["additional-properties"]&&t[e]["additional-properties"]["pvideo-url"]){for(let e=0;e<i.trc.vl.length;e++)i.trc.vl[e].pvc=n;return}}})(),function(){function e(e){this._data=e}e.prototype.getId=function(){return this._data.id},e.prototype.getLinkTarget=function(){return this._data.linkTarget},e.prototype.getUrl=function(){return this._data.url},e.prototype.getTitle=function(){return this._data.title},e.prototype.getType=function(){var e=this._data;return e["is-syndicated"]?"sponsored":e["is-in-network"]?"exchange":e["is-native"]?"native":"organic"},e.prototype.getSlot=function(){return this._data.itemIndex},TRC.ItemParser=e}(),window,document,TRC.KeyValueCache=class{constructor(e,t=!1){if(this.onlyClean=t,this.pm=TRC.pageManager,this.storageType=e.storageType||"session",this.localStorage=this.pm.getLocalStorageImplementation("strict-w3c-storage",this.storageType),this.keyValueCache=null,this.cacheTtl=e.ttl||12e5,this.noTtl=e.noTtl||!1,this.cacheName=e.cacheName||"key_value_cache",this.cacheUtils=new TRC.CacheUtils(this.localStorage,this.cacheName,this.cacheTtl),!localStorage)return{isValidCache:!1};this.isValidCache=!0,this.init()}cacheData(e,t){t=this.setCacheData(e,t);return this.localStorage.setValue(this.cacheName,__trcJSONify(this.keyValueCache.getData())),t}setCacheData(e,t){var i=(new Date).getTime();try{this.keyValueCache.setValue(e,{value:t,s:i}),!1===this.noTtl&&this.setCacheClean(e)}catch(e){return!1}return!0}getCacheData(e){var t=this.keyValueCache.getValue(e);return!0===this.noTtl&&t||t&&!this.isOverTtl(this.keyValueCache.getValue(e).s)?this.keyValueCache.getValue(e).value:null}isOverTtl(e){return this.cacheUtils.isOverTtl(e)}setCacheClean(e){this.cacheUtils.setCacheClean(e,this.keyValueCache)}cleanCache(e){this.cacheUtils.cleanCache(e,this.keyValueCache,this)}removeKey(e){TRC.CacheUtils.removeKey(e,this.keyValueCache)}getKeyValueCache(){return this.cacheUtils.getCache(this.pm)}init(){if(this.onlyClean)return this.localStorage.removeKey(this.cacheName),!1;this.keyValueCache=this.getKeyValueCache();var e=TRC.util.keys(this.keyValueCache.getData());return this.cleanCache(e),!0}},(()=>{let r=!1,n=[];const h=TRC.LineClamp={fixBoxOverflow(t,i,r,e,n,o,a,s){let l=!1;if(!(null==t||a&&(l=h.setupBoxLineClamp(t)))){if(s&&!l)return __trcDebug("Skipping fixBoxOverflow due to feature flag.");if(TRC.ellipsisPerf&&console.timeStamp("Taboola old ellipsis"),!(t.clientHeight<=0||t.clientWidth<=0)){let e=!1;t.parentNode.font=h.getFontSize(t);a=t.innerHTML;t.innerText="";var s=h.add_span(null,"H",t),c=Math.max(s.offsetHeight,s.clientHeight),d=Math.max(0,t.scrollHeight-t.clientHeight);for(t.removeChild(s),TRC.dom.setContentToElement(t,a),h.addInlineElementsForMeasure(t.inlineDetailsElements,t,!0),t.inlineDetailsElementsHTML=t.innerHTML.replace(a,""),i=i.replace(/^\s+|\s+$/g,"");t.clientHeight+d+c/2<t.scrollHeight&&i.length;)e=!0,i=h.truncateOverflowingText(t,i,r),t.inlineDetailsElementsHTML&&(t.innerHTML+=t.inlineDetailsElementsHTML);h.hideClonedElementsAfterMeasure(n,o),TRC.Browser.ie&&!e&&(t.style.height="auto")}}},setupBoxLineClamp(e){var t=parseInt(document.trcGetCurrentStyle(e,"line-height"),10),i=parseInt(document.trcGetCurrentStyle(e,"height"),10),t=t&&i?Math.round(i/t).toString():null;return!(!t||e.isRTL||"rtl"===document.trcGetCurrentStyle(e,"direction")||(n.push({domElm:e,numLine:t}),window._trcIsUTactive&&(TRC._lineClampCache=n),!r&&(requestAnimationFrame(()=>{n.forEach(e=>{const t=e&&e.domElm,i=e&&e.numLine;TRC.dom.addClass(t,"trc_ellipsis"),TRC.css.utils.setStyleProperty(t,"-webkit-line-clamp",i,!1),t.parentNode.font=h.getFontSize(t)}),r=!1,n=[]}),r=!0,0)))},getFontSize(e){let t=0,i=!1,r=document.trcGetCurrentStyle(e,"font-size");for(var n=["px","pt","em","ch"];!i&&t<n.length;){if(r.indexOf(n[t])){switch(r=parseInt(r,10),n[t]){case"px":break;case"pt":r/=.75;break;case"em":case"ch":r*=10}i=!0}t++}return r},add_span(e,t,i){const r=document.createElement("span");return null!=e&&(r.className=e),null!=t&&("object"==typeof t?r.appendChild(t):TRC.dom.setContentToElement(r,t)),void 0!==i&&i.appendChild(r),r},addInlineElementsForMeasure(t,i,r){let n,o;for(let e=0;t&&e<t.length;e++)n=t[e],!h.findElement(e=>{return 0<=e.className.search(n)&&e.parentNode===i},i)&&n&&((o=document.createElement("span")).className="trc_inline_detail_spacer",o.innerHTML=" ",i.appendChild(o),i.appendChild(r?n.cloneNode(!0):n))},findElement(t,e,i,r){var n=(e=void 0===e?document:e).getElementsByTagName(i=void 0===i?"*":i);for(let e=0;e<n.length;e++)if(t(n[e]))return n[e];return r},truncateOverflowingText(e,t,i){t=i&&0<=t.search(/\s/)?t.replace(/\s+\S+$/,""):t.substr(0,t.length-1);var r=e.getElementsByTagName("bde");e.inlineDetailsElementsHTML&&r.length&&(i=e.innerHTML.replace(e.inlineDetailsElementsHTML,""),TRC.dom.setContentToElement(e,i)),0<e.getElementsByTagName("span").length&&e.removeChild(e.getElementsByTagName("span")[0]);r=0<r.length?r[0]:e;return TRC.dom.setContentToElement(r,t),h.add_span(null,h.createEllipsis(),e),t},hideClonedElementsAfterMeasure(t,i){let r,n;for(let e=0;t&&e<t.length;e++)r=t[e],(n=h.findElement(e=>{return 0<=e.className.search(r)&&e.parentNode===i},i,"span"))&&(n.style.display="none")},createEllipsis:()=>document.createTextNode("â€¦")}})(),function(){function t(e,t){return e=e.toLowerCase(),-1!==i[t].indexOf("|"+e+"|")?"content_hub"===e?"z":e.substr(0,1):(__trcError('illegal parameter "'+e+'" was passed to trc_ListOriginBuilder method: "set'+t.substr(0,1).toUpperCase()+t.substr(1)+'" \nUsing "video" instead'),"v")}var i={source:"|v|h|c|t|s|p|o|z|video|home|category|text|search|photo|other|content_hub",target:"|v|p|t|m|video|photo|text|mix|"},r="v",e=TRC.ListOriginBuilder=function(e,t){this.setSource(e||r),this.setTarget(t||"v")};e.prototype.setSource=function(e){r=t(e,"source")},e.prototype.getSource=function(){return r},e.prototype.setTarget=function(e){this.target=t(e,"target")},e.prototype.getTarget=function(){return this.target},e.prototype.toString=function(){return(r+"2"+this.target).replace(/v2v/,"blended")}}((window,document)),TRC.multiWidget={init({originalContainer:e,multiWidget:t,widgetOptions:i,initRBox:r,trcManager:n}){const o=e;this.trcManager=n;n="rtl"===this.trcManager.direction,t=[t];return e.parentNode?(i.multiWidgetRecItems=[].slice.call(i.response.trc["video-list"].video),!i.multiWidgetRecItems.length&&this.trcManager.global["mw-display-none-on-no-items-to-render"]&&(e.style.display="none"),TRC.multiWidget.recursiveBuild.call(this,{widgetsArr:t,containerElm:o,depth:0,parentLayout:t,widgetOptions:i,initRBox:r,isRTL:n}),o.className+=" trc_multi_widget",o):null},recursiveBuild({widgetsArr:e,containerElm:i,depth:r,parentLayout:n,widgetOptions:o,initRBox:a,isRTL:s}){n.isRTL=s,e.forEach(e=>{const t=__trcCopyProps(e,{});if(t.children){if(!t.children.length)return;const e=TRC.multiWidget.createWrapper(t);i.appendChild(e),i=e,TRC.multiWidget.addMargin(i.previousSibling,n),TRC.multiWidget.recursiveBuild.call(this,{widgetsArr:t.children,depth:r+1,parentLayout:t,containerElm:i,widgetOptions:o,initRBox:a,isRTL:s})}else{const e=TRC.multiWidget.createWidget.call(this,{layout:t,widgetOptions:o,initRBox:a,isRTL:s});i.appendChild(e),TRC.multiWidget.addMargin(e.previousSibling,n)}t.flexSize&&(t.container.style.msFlex=t.container.style.flex=t.flexSize,t.container.style.overflow="hidden")})},addMargin(e,{gap:t,orientation:i,isRTL:r}){e&&t&&(e.style[`margin${"V"===i?"Bottom":r?"Left":"Right"}`]=t)},createWrapper(e){const t=document.createElement("div");return t.className+=" trc_multi_widget_container","V"===e.orientation&&(t.style.msFlexDirection=t.style.flexDirection="column"),e.container=t,t},createWidget({layout:e,widgetOptions:t,initRBox:i}){e.container=document.createElement("div");const{container:r,name:n}=e;return this.ensureValidContainer(r),n&&r.setAttribute("widget-name",n),t.mode_name=t.mode=t.response.trc["video-list"]["base-mode"]=e.name,e.RBox=i.call(this,r,t),r}},TRC.net=function(s){var i=[];return{loadScript:function(e,t,i,r,n){var o=s.getElementsByTagName("script")[0],a=null;if("js"==t)(a=s.createElement("script")).type="text/javascript",a.src=TRC.shiftDomain(e),a.charset="UTF-8",r?a.setAttribute("defer","defer"):n&&a.setAttribute("async","async");else{if("css"!=t)throw new Error("External reference loaded must be of type 'js' or 'css'!");(a=s.createElement("link")).rel="stylesheet",a.type="text/css",a.href=e}return"function"==typeof i&&(a.addEventListener("load",i,!1),a.addEventListener("error",i,!1)),o.parentNode.insertBefore(a,o),a},fireSimpleHttpRequest:function(e){var t=new Image;t.src=e,i.push(t)}}}((window,document)),TRC.pageLevelFeaturesManager={features:{"explore-more":{responseKey:"exm",enableInIframe:!0,functionCall:(e,t)=>{TRC.pageLevelFeaturesManager.getFeatureOnFeedLevel(e,t)}},"virtual-placement":{responseKey:"vpl",enableInIframe:!0,functionCall:(e,t)=>{TRC.pageLevelFeaturesManager.getFeatureOnPageLevel(e,t)}},stories:{responseKey:"s",enableInIframe:!0,functionCall:(e,t)=>{TRC.pageLevelFeaturesManager.getFeatureOnPageLevel(e,t)}}},pageLevelFeatures:{},disableFeatureOnIframe(){const i=TRC.pageLevelFeaturesManager["pageLevelFeatures"],r=window.self!==window.top;if(r){const r=Object.keys(this.features);for(let t=0;t<r.length;t++){var n=r[t],o=this.features[n]["responseKey"],a=TRCImpl.global[`enable-${o}-inside-iframe`];let e=this.features[n]["enableInIframe"];if(void 0!==a&&(e=a),!1===e){const r=this.getPlfKey(o);i[r]=!0}}}},getFeature(n){Object.keys(this.features).forEach(e=>{const t=this.features[e],i=t.responseKey,r=this.pageLevelFeatures[i];if(!r)try{t.functionCall(n,i)}catch(e){__trcError("Error in functionCall in pageLevelFeaturesManager",e)}})},getFeatureOnFeedLevel(t,i){var r=t.trc.f,n=r&&Object.keys(r);if(n)for(let e=0;e<n.length;e++){const t=r[n[e]],o=t[i];if(o){const t=this.getPlfKey(i);return this.pageLevelFeatures[t]=!0}}},getFeatureOnPageLevel(e,t){if(e.trc&&e.trc[t]){const e=this.getPlfKey(t);return this.pageLevelFeatures[e]=!0}},getPlfKey:e=>`ack_${e}`},(()=>{let t=null;class i{static init(e){i.setReferrer(e),e["keep-referrer-in-session"]&&TRC.pageManager.sessionStorageSetValue("tbl-session-referrer",location.href)}static updateReferrer(e){t=e}static getReferrer(){return t}static setReferrer(e){t=t||function(){var t=document.head.getElementsByTagName("link");for(let e=0;e<t.length;e++)if("referrer"===t[e].rel)return t[e].href}()||function(){let e="";try{return(e=top.window.TRC&&top.window.TRC.hasFeedView?decodeURI(document.referrer):decodeURI(top.window.document.referrer))&&!/https?:\/\/(\w+)\.taboola(syndication)?\.com/.test(e)?e.substr(0,400):e.split("?")[0]}catch(e){__trcDebug("TRC.Manager.getReferrer : rendering in cross domain iframe")}}()||function(e){if(e["keep-referrer-in-session"]){const e=TRC.pageManager.sessionStorageGetValue("tbl-session-referrer");if(e&&location.hostname===new TRC.URL(e).host)return e}}(e)||""}}TRC.PageReferrer=i})(),function(n,e){n.TRC=n.TRC||{};var r,o=!1,i="taboola global",t="trctestcookie";function a(){for(var n="trc_cookie_storage",o={},e=document.cookie.split(/;\s+/),t=0;t<e.length;t++){var i=TRC.text.lsplit(e[t],"=",2),r=unescape(i[0]),a=unescape(i[1]);if(r==n){for(var s=a.split("|"),l=0;l<s.length;l++){i=s[l].split("=");o[unescape(i[0])]=unescape(i[1])}break}}return this.save=function(){var e,t=new Array;for(e in o)o.hasOwnProperty(e)&&null!=o[e]&&(t[t.length]=escape(e)+"="+escape(o[e]));var i=0<t.length?1:-1,r=new Date((new Date).getTime()+365*i*864e5),i=this.getDomain();void 0!==document.cookie&&(document.cookie=n+"="+escape(t.join("|"))+";domain="+i+";path=/;expires="+r.toUTCString())},this.getDomain=function(){return!0===TRCImpl.global["store-first-party-cookie-in-subdomain"]||"true"===TRCImpl.global["store-first-party-cookie-in-subdomain"]?d.getPageSubDomain():""},this.getValue=function(e){return o.hasOwnProperty(e)?o[e]:null},this.setValue=function(e,t){o[e]=t,this.save()},this.removeKey=function(e){delete o[e],this.save()},this.delete=function(){o={},this.save()},this}function s(e){var i=e||{};return this.getValue=function(e){return i[e]||null},this.setValue=function(e,t){i[e]=t},this.removeKey=function(e){delete i[e]},this.getData=function(){return i},this.delete=function(){i={}},this}function l(i){return this.getValue=function(e){return n[i+"Storage"].getItem(e)},this.setValue=function(e,t){try{n[i+"Storage"].setItem(e,t)}catch(e){}},this.removeKey=function(e){try{n[i+"Storage"].removeItem(e)}catch(e){}},this}function c(e){try{if(n.localStorage instanceof Storage&&TRC.useStorageDetection&&function(e){var t=n[e+"Storage"],i=(new Date).getTime()+"",e="_taboolaStorageDetection";try{if(t.setItem(e,i),t.getItem(e)==i)return t.removeItem(e),t}catch(e){}}(e))return new l(e)}catch(e){return null}}var d=function(){return this.publisher_id=null,this.item_id=null,this.page_id=null,this.state={},this.stateStack=[],this.getPageSubDomain=function(){return this.getPageDomainFromHostName(e.location.hostname)},this.getPageDomainFromHostName=function(e){var t="";try{var i=e.split(".").reverse(),t="."+i[1]+"."+i[0];3<=i.length&&i[1].match(/^(com|edu|gov|net|mil|org|nom|co|name|info|biz)$/i)&&(t="."+i[2]+"."+i[1]+"."+i[0])}catch(e){}return t},this.getLocalStorageImplementation=function(e,t){if(null!=this.state.privateStorageImpl&&"strict-w3c-storage"!=e)return this.state.privateStorageImpl;var i=n.TRCImpl?n.TRCImpl.global:{};switch(e=e||i["local-storage-usage"]||"prefer-w3c-storage"){case"strict-w3c-storage":return c("session"===t?"session":"local");case"prefer-w3c-storage":var r=c("local");if(r)return this.state.privateStorageImpl=r;case"prefer-cookies":try{if(this.canWriteCookies())return this.state.privateStorageImpl=new a}catch(e){}default:return this.state.privateStorageImpl=new s}},this.getFirstPartyCookie=function(){if(this.state.firstPartyCookie)return this.state.firstPartyCookie;var e=this.getLocalStorageImplementation();if(e instanceof a||e instanceof s)return this.state.firstPartyCookie=e;try{if(this.canWriteCookies())return this.state.firstPartyCookie=new a}catch(e){}return this.state.firstPartyCookie=new s},this.canWriteCookies=function(){var e;return(n.TRCImpl?n.TRCImpl.global:{})["use-trctestcookie"]?(document.cookie=t+"=ok",e=-1!==document.cookie.indexOf(t),document.cookie=t+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;",e):n.navigator.cookieEnabled},this.getDummyStorage=function(e){return new s(e)},this.trcParseParams=function(e){if(e&&!owner.item_id)for(var t=e.split("&"),i=0;i<t.length;i++){var r=TRC.text.lsplit(t[i],"=",2);switch(unescape(r[0])){case"item_id":owner.item_id=unescape(r[1]);break;case"publisher_id":owner.publisher_id=unescape(r[1])}}},this.trcGetPublisherParams=function(){for(var e=document.getElementsByTagName("script"),t=0;t<e.length;t++){var i=e[t].src.split("taboola(syndication)?.com/libtrc/")[1];i&&0<=e[t].src.search(/taboola(syndication)?.com.*page_management/)&&(i=(i=i.split("?")[0]).split("/"),owner.page_id=i[0],2<i.length&&(owner.page_id+="/"+i[1]),owner.trcParseParams(e[t].src.split("?")[1]))}},this.getPageData=function(){var e=this.getTopMostWindow();return e.taboola_view_id||(e.taboola_view_id=(new Date).getTime()),TRC.isAMPSplitFeed&&void 0!==TRC.syncViewID&&""!==TRC.syncViewID?TRC.syncViewID:e.taboola_view_id},this.storeValue=function(e,t){this.storePublisherValue(i,e,t)},this.removeKey=function(e){this.removePublisherKey(i,e)},this.getValue=function(e){return this.getPublisherValue(i,e)},this.storePublisherValue=function(e,t,i){this.isNotAllowedToWriteValue(t,i)||(t=this.buildKeyWithPublisher(e,t),this.getLocalStorageImplementation().setValue(t,i),this.addKeyToStoredKeysList(t))},this.isNotAllowedToWriteValue=function(e,t){return null==t||TRC.doNotTrack&&!this.isAllowedKeyWhenDoNotTrack(e)},this.buildKeyWithPublisher=function(e,t){return e+":"+t},this.getPublisherValue=function(e,t){return TRC.doNotTrack&&!this.isAllowedKeyWhenDoNotTrack(t)?null:this.getLocalStorageImplementation().getValue(this.buildKeyWithPublisher(e,t))},this.removePublisherKey=function(e,t){return this.getLocalStorageImplementation().removeKey(this.buildKeyWithPublisher(e,t))},this.removeAllKeys=function(){for(var e,t=this.getStoredKeysList(),i=[],r=0;r<t.length;r++)e=t[r],this.isAllowedKeyWhenDoNotTrack(e)?i.push(e):this.getLocalStorageImplementation().removeKey(e);this.setStoredKeysList(i)},this.addKeyToStoredKeysList=function(e){var t=this.getStoredKeysList();-1===t.indexOf(e)&&(t.push(e),this.setStoredKeysList(t))},this.getStoredKeysList=function(){var e,t=this.getLocalStorageImplementation().getValue(this.buildKeyWithPublisher(i,"local-storage-keys"));try{e=TRC.util.jsonParseWithNative(t)||[]}catch(t){e=[],__trcError("Could not parse local storage keys",t)}return e},this.setStoredKeysList=function(e){var t;try{t=__trcJSONify(e),this.getLocalStorageImplementation().setValue(this.buildKeyWithPublisher(i,"local-storage-keys"),t)}catch(e){return void __trcError("Could not stringify local storage keys",e)}},this.isAllowedKeyWhenDoNotTrack=function(e){var t=(n.TRCImpl&&n.TRCImpl.global||{})["dnt-allowed-keys"]||["session-id","trc_css-isolation"];return null!=e&&(e=e.split(":")[1]||e,-1!==t.indexOf(e))},this.removeUserId=function(){TRC.pageManager.removeKey("user-id"),TRCImpl.global["store-userid-first-party-cookie"]&&this.getFirstPartyCookie().removeKey(this.buildKeyWithPublisher(i,"user-id"))},this.storeUserId=function(e,t){this.isNotAllowedToWriteValue("user-id",e)||(t?this.getFirstPartyCookie().delete():(this.storePublisherValue(i,"user-id",e),TRCImpl.global["store-userid-first-party-cookie"]&&this.getFirstPartyCookie()!==this.getLocalStorageImplementation()&&this.getFirstPartyCookie().setValue(this.buildKeyWithPublisher(i,"user-id"),e)))},this.getUserId=function(){return TRC.user_id||TRC.pageManager.getValue("user-id")},this.storeSessionId=function(e,t){this.isNotAllowedToWriteValue("session-id",e)||(t?this.getFirstPartyCookie().delete():1==TRCImpl.global["store-sessiondata-first-party-cookie"]&&this.getFirstPartyCookie()!==this.getLocalStorageImplementation()&&this.getFirstPartyCookie().setValue(this.buildKeyWithPublisher(i,"session-data"),e))},this.getUserIdFirstPartyCookie=function(){return this.getFirstPartyCookie().getValue(this.buildKeyWithPublisher(i,"user-id"))},this.getTopMostWindow=function(){var t;try{(t=n.top).TRC=t.TRC||{},t.TRC||(t=n),TRCImpl&&TRCImpl.global&&TRCImpl.global["disable-strict-top-window-check"]||t.location}catch(e){t=n}return t},this.additionalDispatchParams=function(){return null==this.state.moreDispatchParams&&(this.state.moreDispatchParams=this.getCurrentURL().filtered),0==this.state.moreDispatchParams.length?"":"&"+this.state.moreDispatchParams.join("&")},this.getForceTrcCache=function(){return o},this.getCurrentURL=function(){var e=TRC.isAMP&&n.context&&n.context.canonicalUrl||n.location.href,e=new TRC.URL(e),t=[],i=[];e.search.replace(/^\?/,"").split(/&/).forEach(function(e){e&&(0==e.search("trc_")||"taboola-debug"==e?(o=new Boolean(e.match(/trc_cache/)).valueOf(),i.push(e)):t.push(e))}),e.search=0<t.length?"?"+t.join("&"):"";e=new String(e.toString());return e.filtered=i,e},this.sessionStorageGetValue=function(e){var t=this.getLocalStorageImplementation("strict-w3c-storage","session");return t&&t.getValue(e)||null},this.sessionStorageSetValue=function(e,t){var i=this.getLocalStorageImplementation("strict-w3c-storage","session");i&&i.setValue(e,t)},this.initState=function(){void 0===this.state&&(this.state={}),this.state.privateStorageImpl=null,this.state.m_publisherDomains={host:[],path:[],query:[]},this.state.moreDispatchParams=null},this.getReferrer=function(){return TRC.PageReferrer.getReferrer()},this.updateReferrer=function(e){TRC.PageReferrer.updateReferrer(e)},this.initReferrer=function(e){TRC.PageReferrer.init(e)},this.pushState=function(){this.stateStack.push(this.state),delete this.state,this.initState()},this.popState=function(){0<this.stateStack.length&&(this.state=this.stateStack.pop())},this.initState(),this};d.getPageData=function(){return r.getPageData()},d.storeValue=function(e,t){return r.storeValue(e,t)},d.storePublisherValue=function(e,t,i){return r.storePublisherValue(e,t,i)},d.getValue=function(e){return r.getValue(e)},d.getPublisherValue=function(e,t){return r.getPublisherValue(e,t)},d.additionalDispatchParams=function(){return r.additionalDispatchParams()},d.getCurrentURL=function(){return r.getCurrentURL()},d.getPageSubDomain=function(){return r.getPageSubDomain()},d.pushState=function(){return r.pushState()},d.popState=function(){return r.popState()},TRC.pageManager=r=TRC.pageManager||new d,n.PageManager=n.PageManager||d}(window,document),TRC.PlacementEventPostData=class{constructor(){this.postData={}}setFullItemList(e){"object"==typeof e?this.postData.fil=__trcJSONify(e):"string"==typeof e&&(this.postData.fil=e)}setScreenHeight(e){this.postData.sh=e}setScreenWidth(e){this.postData.sw=e}setScreenDensity(e){this.postData.sde=e}setBrowserWidth(e){this.postData.bw=e}setBrowserHeight(e){this.postData.bh=e}setDocumentWidth(e){this.postData.dw=e}setDocumentHeight(e){this.postData.dh=e}setArticlePos(e){this.postData.bad=e}setContainerPos(e){this.postData.cd=e}setContainerWidth(e){this.postData.mw=e}getAll(){return this.postData}},(e=>{e.PopupLink={create:(e,t)=>{var{style:i="",location:r="beforeend"}=t;i&&TRC.dom.injectStyle(i),e.insertAdjacentHTML(r,(e=>{const{markup:t="",href:i="#",enableScrolling:r="no",classList:n="",children:o="",inlineStyle:a="",wrapper:s}=e;let l=`<a tblenablesscrolling="${r}" href="${i}" \n                               class="${n}" style="${a}" rel="nofollow" target="_blank"\n                               >${t}${o}</a>`;return s&&(l=`<${s.type} class="${s.className}">${l}</${s.type}>`),l})(t)),e=((e,t)=>{switch(e){case"beforebegin":return t.previousElementSibling;case"afterbegin":return t.firstElementChild;case"beforeend":return t.lastElementChild;case"afterend":return t.nextElementSibling;default:return t.firstElementChild}})(r,e),TRC.Device.isTouchDevice||TRC.dom.isInIframe()||TRC.dom.on(e,"click",e=>TRC.aboutUs.open(e)||!1)}}})((window,document,TRC)),function(){var e=TRC.PostRenderQueue=function(){return this.backend=[],this};e.prototype.pushBack=function(e,t){__trcDebug("postRenderQueue.pushBack("+e+")"),this.backend.push({name:e,func:t})},e.prototype.pushFront=function(e,t){__trcDebug("postRenderQueue.pushFront("+e+")"),this.backend.unshift({name:e,func:t})},e.prototype.popFront=function(){if(0==this.backend.length)return null;var e=this.backend.shift();return"function"==typeof e?{name:"unknown",func:e}:e}}((window,document)),((l,c)=>{const d="tbl-forkorts-article",h=` ${d} ${d}-active`,u="tbl-read-more-box-btn",r="tbl-read-more-button-arrow";function p(e,t){const i=c.createElement("div");return i.className="tbl-read-more-box",i.innerHTML=`<a \n                            id="${u}_${t}" \n                            class="tbl-read-more-btn ${"rtl"===TRCImpl.direction?"tbl-rtl-read-more-btn":""}"\n                            href="#" \n                        > \n                            ${e.caption}\n                            ${`\n            <svg class='${r}' viewBox="0 0 8 6" fill="none" xmlns="http://www.w3.org/2000/svg">\n                <path \n                    d="M6.85381 0.203525L3.99181 3.06553L1.12981 0.203525C1.00407 0.0820867 0.835672 0.0148905 0.660874 0.0164095C0.486076 0.0179284 0.318868 0.088041 0.195262 0.211646C0.0716568 0.335252 0.00154415 0.50246 2.52017e-05 0.677258C-0.00149374 0.852056 0.0657025 1.02046 0.187141 1.14619L3.52047 4.47953C3.64549 4.60451 3.81503 4.67472 3.99181 4.67472C4.16858 4.67472 4.33812 4.60451 4.46314 4.47953L7.79647 1.14619C7.86015 1.08469 7.91094 1.01113 7.94588 0.929795C7.98081 0.848459 7.99921 0.760979 7.99997 0.67246C8.00074 0.58394 7.98388 0.496154 7.95036 0.414223C7.91683 0.332292 7.86733 0.257857 7.80474 0.195262C7.74214 0.132667 7.66771 0.083165 7.58578 0.0496444C7.50385 0.0161238 7.41606 -0.00074404 7.32754 2.51711e-05C7.23902 0.000794382 7.15154 0.0191852 7.0702 0.0541246C6.98887 0.0890639 6.91531 0.139852 6.85381 0.203525Z"\n                    fill="#BCBCBC"\n                />\n            </svg>\n        `}\n                        </a>`,i}function m(e,t,i){TRC.util.isPercentEnabled(TRCImpl.global,"read-more-events-enabled")&&this.sendEvent("supply-feature",{d:JSON.stringify({event_type:"read_more",event_state:e,event_value:t,event_msg:i})},null)}TRC._translationQueue=TRC._translationQueue||[],TRC._translationQueue.push({"read-more":{de:"Weiterlesen",el:"%CE%94%CE%B9%CE%B1%CE%B2%CE%AC%CF%83%CF%84%CE%B5%20%CE%A0%CE%B5%CF%81%CE%B9%CF%83%CF%83%CF%8C%CF%84%CE%B5%CF%81%CE%B1",en:"Read%20More",es:"Leer%20M%C3%A1s",fr:"Lire%20La%20Suite",he:"%D7%A7%D7%A8%D7%90%20%D7%A2%D7%95%D7%93",hi:"%E0%A4%94%E0%A4%B0%20%E0%A4%AA%E0%A4%A2%E0%A4%BC%E0%A5%87%E0%A4%82",it:"Per%20saperne%20di%20pi%C3%B9",jp:"%E7%B6%9A%E3%81%8D%E3%82%92%E8%AA%AD%E3%82%80",ko:"%EC%9E%90%EC%84%B8%ED%9E%88%EB%B3%B4%EA%B8%B0",nl:"Lees%20Meer",pt:"Leia%20Mais",ru:"%D1%87%D0%B8%D1%82%D0%B0%D1%82%D1%8C%20%D0%B4%D0%B0%D0%BB%D0%B5%D0%B5",ta:"%E0%AE%AE%E0%AF%87%E0%AE%B2%E0%AF%81%E0%AE%AE%E0%AF%8D%20%E0%AE%AA%E0%AE%9F%E0%AE%BF%E0%AE%95%E0%AF%8D%E0%AE%95",th:"%E0%B8%AD%E0%B9%88%E0%B8%B2%E0%B8%99%E0%B9%80%E0%B8%9E%E0%B8%B4%E0%B9%88%E0%B8%A1%E0%B9%80%E0%B8%95%E0%B8%B4%E0%B8%A1"}}),TRC.setReadMore=function(e){!function(e){try{const n=m.trcBind(e);TRC.tlf&&console.time("init Read More"),n("Available",!0,null);var t=function(e,t){var i=TRC.translationManager.getLabel({feature:"read-more",label:"DEFAULT_CAPTION"});return{caption:e&&e.caption||t&&t.caption||i&&decodeURIComponent(i)||"Read More",boxSelector:e&&e.boxSelector||t&&t.boxSelector||null,threshold:e&&e.threshold||t&&t.threshold||1100,backgroundColor:e&&e.backgroundColor||t&&t.backgroundColor||"#fff",minimizedSize:e&&e.minimizedSize||t&&t.minimizedSize||800,scrollSize:e&&e.scrollSize||t&&t.scrollSize||800,buttonTop:e&&e.buttonTop||t&&t.buttonTop||48,buttonBottom:e&&e.buttonBottom||t&&t.buttonBottom||28,divTop:e&&e.divTop||t&&t.divTop||75,gradient:e&&e.gradient||t&&t.gradient||40,cutoffType:e&&e.cutoffType||t&&t.cutoffType||"ARTICLE",anchorSelector:e&&e.anchorSelector||t&&t.anchorSelector||null,lengthFromAnchorElementType:e&&e.lengthFromAnchorElementType||t&&t.lengthFromAnchorElementType||"BELOW",lengthFromAnchorElement:e&&e.lengthFromAnchorElement||t&&t.lengthFromAnchorElement||30}}(e.readMorePageConfig,e.readMoreConfig);if(function(e,t){"parent"===(t=e.context||t.context)&&(l=l.parent,c=l.parent.document),"top"===t&&(l=l.top,c=l.top.document)}(e.readMorePageConfig,e.readMoreConfig),!l.matchMedia)return n("Rendered",!1,"match media is not supported"),!1;if(!t.boxSelector)return n("Rendered",!1,"no box selector defined"),!1;const o=c.querySelector(t.boxSelector);if(!o)return n("Rendered",!1,"box content not detected"),!1;if(c.querySelector(`.${d}`)===o)return n("Rendered",!1,"box content already in use"),!1;if(o.offsetHeight<t.threshold||(l.pageYOffset||c.documentElement.scrollTop||c.body.scrollTop)>=t.scrollSize)return n("Rendered",!1,"dimensions exception"),!1;o.className+=h,function(e,t){t=t||"kortWidgetCssStyle";let i=c.querySelector(`#${t}`);i&&i.parentNode.removeChild(i),(i=c.createElement("div")).id=t,i.innerHTML=`&shy;<style>${e}</style>`,c.documentElement.appendChild(i)}(function(e){return`.${d} { max-height: inherit; } .${d}.tbl-forkorts-article-active { max-height: calc(${e.minimizedSize}px - 35px); overflow: hidden; position: relative; }.tbl-read-more-box { position: absolute; z-index: 4; left: 0; right: 0; /* there's a small line between the start of the feed/widget aand you can see the content there. so i placed the gradient 2px lower. */ bottom: -2px; display: none; text-align: center; padding: ${e.divTop}px 12px calc(50px - 35px); background: linear-gradient(to bottom, rgba(255, 255, 255, 0.05) 10%, ${e.backgroundColor} 60%, ${e.backgroundColor} 100%); } .tbl-read-more-box .tbl-read-more-btn { background: #F7F7F7; border: 1px solid #bebebe; border-radius: 24px; color: #5C5C5C; width: 130px; margin: -6px 0 40px 0; padding: 8px 20px 8px 25px; height: 30px; line-height: 14px; font-size: 14px; font-weight: 500; text-align: center; } .tbl-read-more-box .tbl-read-more-btn.tbl-rtl-read-more-btn { padding: 8px 25px 8px 20px; } .tbl-read-more-box .tbl-read-more-btn.tbl-rtl-read-more-btn .tbl-read-more-button-arrow { margin: 0 6px 0 0; } .tbl-read-more-box .tbl-read-more-btn .tbl-read-more-button-arrow { width: 8px; height: 8px; margin: 0 0 0 6px; } .tbl-read-more-box .tbl-read-more-btn:hover { cursor: pointer; text-decoration: none; background: #ececec; color: #5C5C5C; }.${d}-active .tbl-read-more-box { display: block; }`}(t));var i=p(t,e.id);o.appendChild(i);var r=function(e,t,i){let r,n;if("PAGE_ELEMENT"===e.cutoffType&&(n=c.querySelector(e.anchorSelector))){const c=n.getBoundingClientRect(),o=t.getBoundingClientRect();"ABOVE"===e.lengthFromAnchorElementType?r=c.top-o.top-e.lengthFromAnchorElement:(r=c.bottom-o.top+e.lengthFromAnchorElement,r+=i.getBoundingClientRect().height)}return r}(t,o,i);r&&(o.style.maxHeight=`${r}px`),TRC.readMoreVisible=!0,TRC.dispatch("readMoreRendered"),TRC.EventsAPI.readmore("render",e.response&&e.response.trc),c.querySelector(`#${u}_${e.id}`).addEventListener("click",function(e){const t=c.querySelector(`.${d}`);e.preventDefault(),e.stopPropagation(),t.classList.remove(`${d}-active`),t.style.maxHeight="",m.call(this,"clicked","true",null),TRC.EventsAPI.readmore("click",this.response&&this.response.trc),TRC.dispatch("readMoreClicked"),TRC.readMoreVisible=!1}.trcBind(e),!1),n("Rendered",!0,null);const a={targetElement:i,onEnter:()=>{n("Visible",!0,null),TRC.intersections.unobserve(s)}},s=TRC.intersections.observe(a);return TRC.tlf&&console.timeEnd("init Read More"),!0}catch(e){return __trcError("Error read more init",e),!1}}(e)&&TRC.EventsAPI.readmore("none",e.response&&e.response.trc)}})(window,document),(()=>{const t={threshold:0,disableCheckOverlay:!0,root:null};class o{constructor(e){this.trcManager=e,this.cardsCounters={},this.lazyBatches={},this.init()}init(){this.isLazyRenderEnabled="boolean"==typeof this.isLazyRenderEnabled?this.isLazyRenderEnabled:this.checkLazyRenderEnabled(),this.isLazyRenderEnabled&&this.setLazyConfig()}checkLazyRenderEnabled(){var{global:e,yieldingEnabled:t,framework:i}=this.trcManager,r=!(!e||!e["lazy-render-enable"]),e=!t,t=!i,i=!TRC.dom.isInIframe(!0);return r&&e&&t&&i}setLazyConfig(){var e=this.trcManager.global["lazy-render"]||{},{excPlc:t,sbKill:i,dispatchPlacements:r,raKill:n}=e;this.lazyConfig={excludePlacements:TRC.util.isArray(t)?t:["Feed - Explore More"],sbKill:TRC.util.isTrue(i),dispatchPlacements:o.getDispatchPlacements(r),raKill:TRC.util.isTrue(n)},this.lazyConfig.sbKill&&(TRC.pageLevelFeaturesManager.pageLevelFeatures.sb_kill=!0),this.placementsConfigs={},__trcCopyProps(o.proxyPlacementLevelConfigs(e),this.lazyConfig)}getPlacementConfig(e,t){var t=t["unifiedPlacement"];return this.isFppEnabled(t)&&this.placementsConfigs[t][e]||this.lazyConfig[e]}setPlacementsConfig(t){t&&Object.keys(t).forEach(e=>{this.placementsConfigs[e]=o.proxyPlacementLevelConfigs(t[e])})}static proxyPlacementLevelConfigs(e){const{enable:t,rootMargin:i,minCards:r,maxBatch:n,fullLazyBatch:o,dispatchEnabled:a}=e;return{enable:TRC.util.isTrue(t),minCards:TRC.util.isNumber(r)?parseInt(r,10):5,maxBatch:TRC.util.isNumber(n)?parseInt(n,10):1,rootMargin:"string"==typeof i&&1<i.indexOf("px")?i:"2500px",fullLazyBatch:TRC.util.isTrue(o),dispatchEnabled:TRC.util.isTrue(a)}}static getDispatchPlacements(e){return Array.isArray(e)?e:"string"==typeof e?__trcUnJSONify(e):[]}isLazyBatch(e,t){return!!(this.getPlacementConfig("maxBatch",t)>=e||t.isCache)}addResponse(e){var t=e.trc.vl;this.onePlacementRendered=!1,e.trc.f?this.updateCardsCounters(t):this.onePlacementRendered=!0}updateCardsCounters(e){e.forEach(e=>{var t;e.fb&&({uuip:t,fb:e}=e,this.cardsCounters[t]=this.cardsCounters[t]||{},this.cardsCounters[t][e]=this.cardsCounters[t][e]?++this.cardsCounters[t][e]:1)})}placementRender(e){void 0===e.container&&!e.addWidget||(this.trcManager.yieldingEnabled?this.yieldRenderer(e):this.isLazyRenderEnabled&&this.isLazyPlacement(e)?this.lazyRenderer(e):this.standardRenderer(e))}getBatchThreshold(e,t){var{uiBatchNumberCounter:i,parentPlacementData:e}=e;if(this.isValidLazyPlacement(e)&&this.isLazyBatch(i,e)){const r=this.getNumberOfCards(e.unifiedPlacement,i),n=this.getPlacementConfig("minCards",e);return r&&r>n?Math.floor(t*n/r):t}return t}getNumberOfCards(t,i){try{return this.cardsCounters[t][i]}catch(e){return __trcError(`failed to get number of cards for lazy rendering :- ${t} | ${i}`),0}}isValidLazyPlacement(e){var t=e["unifiedPlacement"];if(this.isFppEnabled(t))return!0;if(this.isFppDisabled(t)||!this.lazyConfig.enable)return!1;t=-1<this.lazyConfig.excludePlacements.indexOf(t);return!!(!e.trcResponse||!e.trcResponse.nup)&&!t}isFppEnabled(e){e=this.placementsConfigs[e];return!(!e||!TRC.util.isTrue(e.enable))}isFppDisabled(e){e=this.placementsConfigs[e];return!(!e||!TRC.util.isFalse(e.enable))}yieldRenderer(e){this.trcManager.loadRBoxDrawQueue(e)}standardRenderer(e){this.onePlacementRendered=!1,this.trcManager.internalDrawRBox(e)}static getRootElement(e){return e.parentFeed&&e.parentFeed.infiniteScrollEngine.observerScrollElement.children?e.parentFeed.infiniteScrollEngine.observerScrollElement:null}lazyRenderer(e){const t=this.getPlacementConfig("minCards",e),i=e["unifiedPlacement"];if(void 0===i||e.modeGroupOrder>t){const t=this.getPlacementConfig("fullLazyBatch",e),r=this.lazyConfig["dispatchPlacements"],n=this.getPlacementConfig("dispatchEnabled",e)||-1<r.indexOf(i);n?this.dispatchPlacements(e):i&&t&&this.lazyBatches[i]?this.pushLazyBatchPlacement(e):this.setObserverParams(e)}else this.standardRenderer(e)}dispatchPlacements(e){this.pushLazyBatchPlacement(e),this.listener||(this.listener=TRC.listen("render-placement",e=>{this.lazyRenderBatch(e.placement,e.cb)}))}setObserverParams(e){const t=this.getObserverConfig(e),i=new(TRC.IntersectionObserver||IntersectionObserver)(t.onEnter,t.observerParams);i.observe(e.container)}isLazyPlacement(e){return!(this.onRenderApiKill()||this.onePlacementRendered||!e.container||!this.isValidLazyPlacement(e))&&(!e.trcResponse.fb||this.isLazyBatch(e.trcResponse.fb,e))}onRenderApiKill(){var e=TRC.getEventsMap()["api::render"];return!!(this.lazyConfig.raKill&&Array.isArray(e)&&0<e.length)}pushLazyBatchPlacement(e){this.lazyBatches[e.unifiedPlacement]?this.lazyBatches[e.unifiedPlacement].push(e):this.lazyBatches[e.unifiedPlacement]=[e]}lazyRenderBatch(e,t){const i=this.lazyBatches[e];i&&(i.forEach(e=>this.standardRenderer(e)),delete this.lazyBatches[e]),t&&t()}getObserverConfig(i){let r;const e=__trcCopyProps(t,{});return e.root=o.getRootElement(i),e.rootMargin=this.getPlacementConfig("rootMargin",i),r=this.getPlacementConfig("fullLazyBatch",i)?(this.pushLazyBatchPlacement(i),this.lazyRenderBatch.trcBind(this,i.unifiedPlacement)):this.trcManager.internalDrawRBox.trcBind(this.trcManager,i),{targetElement:i.container,observerParams:e,onEnter:(e,t)=>{e[0].isIntersecting&&(r(),t.unobserve(i.container))}}}}TRC.RenderControl=o})(),(()=>{const r="tbl_rtus_id",i="RealTimeUserSyncMain",n="RealTimeUserSyncCallback";TRC.Rtus=class{constructor(e){this.trc=e,this.localStorage=e.pageManager.getLocalStorageImplementation()}applyRtus(){this.trc.ccpaPs?(this._log("ccpaPushTriggerRtus"),this._validateCcpaConsentAndCallRtusWithCcpaParams(this.trc.ccpaPs)):"function"==typeof window.__uspapi?this._applyRtusWithCcpa():"function"==typeof window.__tcfapi?this._applyRtusWithGdpr():"function"==typeof window.__cmp?this._log("gdprV1"):(this._log("default"),this._triggerRtusCall(""))}_applyRtusWithCcpa(){window.__uspapi("getUSPData",1,(e,t)=>{try{t?(this._log("ccpaApiTriggerRtus"),this._validateCcpaConsentAndCallRtusWithCcpaParams(e.uspString)):this._log("ccpaApiFail")}catch(e){this._log("ccpaApiError")}})}_validateCcpaConsentAndCallRtusWithCcpaParams(e){"Y"!==e.charAt(2)&&this._triggerRtusCall(`&us_privacy=${e}&gdpr=0&gdpr_consent=&gdpr_pd=`)}_applyRtusWithGdpr(){window.__tcfapi("getTCData",2,(e,t)=>{try{t?TRC.Rtus.shouldCallRtusWithGdprParams(e)?(this._log("gdprV2triggerRtus"),this._callRtusWithGdprParams(e)):this._log("gdprV2notTriggerRtus"):this._log("gdprV2fail")}catch(e){this._log("gdprV2error")}},[42,91])}static shouldCallRtusWithGdprParams(e){return TRC.Rtus.isGdprNotApplies(e)||TRC.Rtus.hasConsent(e)}static isGdprNotApplies(e){return!e.gdprApplies}static hasConsent(e){var e=(e.vendor||{})["consents"];return e[42]&&e[91]}_callRtusWithGdprParams(e){e=`&us_privacy=&gdpr=${e.gdprApplies?1:0}&gdpr_consent=${e.tcString}&gdpr_pd=0`;this._triggerRtusCall(e)}_triggerRtusCall(e){var t="getRTUS",e=`//gum.criteo.com/sync?c=72&r=2&j=TRC.${t}${e}`;this._setRtusCallback(t),this.trc.performance&&this.trc.performance.mark(`${i}Start`,null,i,0,i,this.trc.PerfEvenType.START),this.trc.performance&&this.trc.performance.mark(`${n}Start`,null,n,0,n,this.trc.PerfEvenType.START);try{this.trc.net.loadScript(e,"js",null,null,!0),this.trc.pConsole("page","info","injected RTUS service")}catch(e){__trcWarn("Error during RTUS loading asset file: ",e)}try{this.trc.rtbRealTimeUserId=this.localStorage.getValue(r)}catch(e){__trcWarn("Error during fetching RTUI from local storage: ",e)}}_setRtusCallback(e){this.trc[e]=e=>{try{this.trc.performance&&this.trc.performance.mark(`${n}Stop`,null,n,0,n,this.trc.PerfEvenType.STOP);var{status:t,userid:i}=e||{};"OK"===t?(this.trc.rtbRealTimeUserId=i,this.localStorage.setValue(r,i)):(this.trc.rtbRealTimeUserId=null,this.localStorage.removeKey(r))}catch(e){__trcWarn("Error during RTUS callback: ",e)}}}_log(e){this.trc.RBoxUsage.logUsage("rtus",{file:"rtus.js",method:"injectRtus",position:e})}}})(),TRC.ScriptRenderer={render(e,t){e&&e.js?(e.normalizedTag=TRC.text.htmlUnescape(e.js),this.renderInIframe(this.createIframe(t.container),e)):__trcError("could not find script to render")},createIframe(e){if(e){const t=document.createElement("iframe");return t.style.border=t.frameBorder=t.border="0",t.style.display="block",t.scrolling="no",e.appendChild(t),t}__trcError("could not find container to create Iframe within")},renderInIframe(t,i){if(t){let e=t.contentWindow||t.contentDocument;e.document&&(e=e.document),this.setOuterIframeStyle(t,i),this.runTagInIframe(e,i.normalizedTag),this.resetStyleInIframe(e)}else __trcError("could not find iframe to render within")},setOuterIframeStyle(e,t){e.style.width=t.w||"0px",e.style.height=t.h||"0px"},runTagInIframe(e,t){null!=t?(e.open(),e.write(t),e.close()):__trcError("could not find normalizedTag to render")},resetStyleInIframe(e){const t=e.createElement("style"),i="body { margin: 0px }";t.type="text/css",t.styleSheet?t.styleSheet.cssText=i:t.appendChild(e.createTextNode(i)),e.getElementsByTagName("head")[0].appendChild(t)}},function(t){TRC.SpotlightLoader={load:function(e){this.shouldLoad(e)&&(this.loadedScript?TRC.dispatch("trc_afterRboxDraw"):(__trcDebug("Detected Spotlight Administrator("+e.trc.pi+")"),TRC.backstageDomainPrefix=e.trc.bdp,TRC.backstageDomainSuffix=e.trc.bds,this.loadedScript=TRC.URL.prototype.switchProtocol.call(TRC.getBackstageUrl()+"resources/js/1.1.0/spotlight.js",TRC.PROTOCOL),TRC.Manager.prototype.loadExternal(this.loadedScript,"js")))},shouldLoad:function(e){return!(!t.querySelectorAll||TRC.Device.isTouchDevice||!e||!e.trc||"1"!=e.trc.sl)},registerOnMainContainer:function(e,t){e&&this.shouldLoad(t)&&e.setAttribute("data-spotlight-publisher-id",t.trc.pi)}}}((window,document)),(()=>{const s={CAROUSEL_CONTAINER:"tbl-stories-carousel-container",CAROUSEL_TOPICS_WRAPPER:"tbl-stories-topics-wrapper",CAROUSEL_TOPIC_CONTAINER:"tbl-stories-topics-container",CAROUSEL_TOPIC_IMAGE_WRAPPER:"tbl-stories-topic-image-wrapper",CAROUSEL_TOPIC_TITLE:"tbl-stories-topic-title",CAROUSEL_TOPIC_IMAGE:"tbl-stories-topic-image",CAROUSEL_TOPIC_CLICK_LOADING:"tbl-stories-topic-loading",CAROUSEL_ONBOARDING:"tbl-stories-onboarding",CAROUSEL_READY:"tbl-stories-carousel-ready"},t={cs:"#4472c4",ce:"#00b5d9"};class i{constructor(e){this.storiesContext=e,this.options=this.getCarouselOptions(),this.injectCarouselStyle(),this.createCarouselLayout()}injectCarouselStyle(){var e=this.options["onBoardingColor"];TRC.dom.injectStyle(`.tbl-stories-carousel-container { box-sizing: initial; float: initial; padding: initial; width: initial; vertical-align: initial; border: initial; }.tbl-stories-carousel-container .tbl-stories-topic-image { top: 0; left: 0; bottom: 0; right: 0; }.tbl-stories-carousel-container { position: relative; height: 105px; } .tbl-stories-carousel-container .tbl-stories-topics-wrapper { height: 105px; display: -webkit-box; display: -webkit-flex; display: -ms-flexbox; display: flex; -webkit-box-pack: justify; -webkit-justify-content: space-between; -ms-flex-pack: justify; justify-content: space-between; margin: 0; padding: 0 5px; overflow-x: auto; } .tbl-stories-carousel-container .tbl-stories-topics-wrapper::-webkit-scrollbar { display: none; } .tbl-stories-carousel-container .tbl-stories-topics-container { list-style: none; text-align: center; -webkit-flex-shrink: 0; -ms-flex-negative: 0; flex-shrink: 0; width: 72px; height: 105px; position: relative; } .tbl-stories-carousel-container .tbl-stories-topic-image-wrapper { height: 64px; width: 64px; position: absolute; left: 0; top: 0; border-radius: 32px; margin: 0 4px; z-index: 0; } .tbl-stories-carousel-container .tbl-stories-topic-image-wrapper svg { vertical-align: inherit; fill: transparent; } .tbl-stories-carousel-container .tbl-stories-topic-title { font-size: 12px; position: absolute; line-height: 14px; bottom: 0; left: 0; width: 100%; font-weight: normal; font-style: normal; height: 28px; margin: auto; } .tbl-stories-carousel-container .tbl-stories-topic-loading svg { animation: tbl-stories-rotate 2s infinite linear; -webkit-animation: tbl-stories-rotate 2s infinite linear; } .tbl-stories-carousel-container .tbl-stories-topic-loading .tbl-stories-topic-image { filter: grayscale(100%); } .tbl-stories-carousel-container .tbl-stories-onboarding { position: absolute; opacity: 0; background-color: ${e}; color: #fcfcfc; padding: 0 15px; z-index: 1; right: 0; -webkit-transform: translateX(-100vh); -ms-transform: translateX(-100vh); transform: translateX(-100vh); border-radius: 16px 0 0 16px; font-size: 12px; height: 30px; line-height: 30px; top: 0; } .tbl-stories-carousel-container .tbl-stories-topic-image { width: 60px; height: 60px; border: 2px solid #fcfcfc; position: absolute; border-radius: 50%; z-index: 1; opacity: 0; transition: opacity 1s ease-in, filter 1s ease-in; box-sizing: border-box; margin: auto; overflow: auto; } .tbl-stories-carousel-container.tbl-stories-carousel-ready .tbl-stories-topic-image { opacity: 1; } .tbl-stories-carousel-container.tbl-stories-carousel-ready .tbl-stories-onboarding { -webkit-animation: tbl-stories-onboarding-fade 6s linear; animation: tbl-stories-onboarding-fade 6s linear; -webkit-animation-delay: 2s; animation-delay: 2s; }@-webkit-keyframes tbl-stories-rotate { from { -webkit-transform: rotate(-360deg); transform: rotate(-360deg); } to { -webkit-transform: rotate(360deg); transform: rotate(360deg); } }@keyframes tbl-stories-rotate { from { -webkit-transform: rotate(-360deg); transform: rotate(-360deg); } to { -webkit-transform: rotate(360deg); transform: rotate(360deg); } }@-webkit-keyframes tbl-stories-onboarding-fade { 0%, 100% { -webkit-transform: translate(0, -10px); transform: translate(0, -10px); opacity: 0; } 10%, 90% { -webkit-transform: translate(0, -10px); transform: translate(0, -10px); opacity: 0.8; } }@keyframes tbl-stories-onboarding-fade { 0%, 100% { -webkit-transform: translate(0, -10px); transform: translate(0, -10px); opacity: 0; } 10%, 90% { -webkit-transform: translate(0, -10px); transform: translate(0, -10px); opacity: 0.8; } }`)}carouselReady(){requestAnimationFrame(()=>{TRC.dom.addClass(this.carouselContainer,s.CAROUSEL_READY)})}getCarouselOptions(){let e=this.storiesContext.options.storiesUi["cc"];return e=e||{},{topicBorderColor:e.tc||t,onBoardingColor:e.obc||"#2676F7",onBoardingText:e.obt||"New! Click to view visual Stories",useCloudinaryCroppingForThumbs:void 0===e.clcrt||TRC.util.isTrue(e.clcrt)}}createCarouselLayout(){this.carouselContainer=TRC.dom.createHTMLElement("nav",{className:s.CAROUSEL_CONTAINER}),this.topicsList=TRC.dom.createHTMLElement("ul",{className:s.CAROUSEL_TOPICS_WRAPPER}),this.carouselContainer.insertAdjacentHTML("afterbegin",this.getOnBoarding()),this.carouselContainer.appendChild(this.topicsList)}addTopic(e){this.topicsList.insertAdjacentElement("beforeend",this.getTopicElement(e))}getTopicElement({id:e,imageUrl:t,title:i,slotPosition:r}){const n=TRC.dom.createHTMLElement("li",{className:s.CAROUSEL_TOPIC_CONTAINER,"data-rel":e,"data-slot-position":r}),o=`<div class="${s.CAROUSEL_TOPIC_IMAGE_WRAPPER}">\n                            <img alt="${e}" class="${s.CAROUSEL_TOPIC_IMAGE}" src="${t}" onerror="this.style.display='none'">\n                            ${this.getBorderTopic()}\n                           </div>`,a=`<label class="${s.CAROUSEL_TOPIC_TITLE}">${i}</label>`;return n.insertAdjacentHTML("afterbegin",`${o}${a}`),TRC.dom.on(n,"click",this.carouselTopicClickHandler.trcBind(this,e)),n}carouselTopicClickHandler(e,t){e=this.storiesContext.topics[e];i.clickOnCarouselTopicLoadingIndication(t.currentTarget),TRC.StoriesVerticalUi?this.storiesContext.renderVerticalUiPlacements(e):TRC.listen("vertical-ui-loaded",this.storiesContext.renderVerticalUiPlacements.trcBind(this.storiesContext,e))}getBorderTopic(){var e=this.options["topicBorderColor"];return`<svg height="64px" width="64px"viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" xml:space="preserve">  \n                            <linearGradient id="topic-background-grad" x1="0%" y1="0%" x2="100%" y2="0%">\n                                <stop offset="0%" style="stop-color:${e.cs};stop-opacity:1"></stop>\n                                <stop offset="100%" style="stop-color:${e.ce};stop-opacity:1"></stop>\n                            </linearGradient>\n                            <circle cx="50" cy="50" r="50" fill="url(#topic-background-grad)"></circle>\n                        </svg>`}getTopicImage(e,t){var i=this.options["useCloudinaryCroppingForThumbs"];let r=0<t.length?t[0].thumbnail:"";return e&&(r=e),i?TRC.imageUtils.getImageUrlBasedOnCloudinaryApi(r,"g_auto,c_thumb,r_max,q_auto,w_60,h_60"):r}static clickOnCarouselTopicLoadingIndication(e){TRC.dom.addClass(e,s.CAROUSEL_TOPIC_CLICK_LOADING),TRC.Timeout.set(()=>{TRC.dom.removeClass(e,s.CAROUSEL_TOPIC_CLICK_LOADING)},2e3)}getOnBoarding(){return`<div class="${s.CAROUSEL_ONBOARDING}">${this.options.onBoardingText}</div>`}}TRC.StoriesCarousel=i})(),(()=>{class o{constructor(e){this.trcManager=e,this.stories={},this.configs={}}static lazyLoadStoriesModules(){TRC.StoriesVerticalUi||TRC.ModuleLoader.load("stories-vertical-ui",TRC.StoriesVerticalUi,()=>{TRC.dispatch("vertical-ui-loaded")})}createNewStories(r,n){o.lazyLoadStoriesModules(),Object.keys(r).forEach(e=>{if(this.stories[e])__trcWarn(`Stories already created for '${e}'`);else{const t=r[e],i=o.parseStoriesOptionsFromResponse(t);i.storiesPlacementsAmount=n,TRC.VirtualPlacementsManager.handleVirtualPlacement(this.trcManager,e),this.stories[e]=new TRC.Stories(this.trcManager,e,i)}})}handleStoryPlacement(e,t){t.isStories=!0,t.parentStories=this.getRelevantStories(e),t.parentStories.handlePlacement(t)}getRelevantStories(e){return this.stories[e.stpl]}static parseStoriesOptionsFromResponse({sti:e,sui:t,fv:i,st:r}){return{storiesProductId:e,storiesUi:t||{},enableFeedView:TRC.util.isTrue(i),injectScStrategy:r||"static"}}}TRC.StoriesManager=o})(),(()=>{const n={STORIES_CONTAINER:"tbl-stories-container",PLACEMENTS_CONTAINER:"tbl-stories-placements-container",CAROUSEL_CONTAINER:"tbl-stories-carousel-container",STORIES_PLACEMENT:"tbl-stories-placement"},o={MAIN_CONTAINER_ID:"data-stories-main-container-id",STORY_INDEX:"data-story-index",STORY_TOPIC_INDEX:"data-story-topic-index",STORY_TOPIC:"data-story-topic"};class a{constructor(e,t,i){this.trcManager=e,this.storiesPlacements={},this.topics={},this.options=i,this.unifiedPlacementName=t,this.numPlacements=0,this.numTopics=0,this.container=this.trcManager.preloadRequest[t].container,this.parentContainerId=this.container.id,a.injectCss(),this.createStoriesContainer(),this.storiesCarouselInstance=new TRC.StoriesCarousel(this)}static injectCss(){TRC.dom.injectStyle(".tbl-stories-container { height: 105px; width: 100vw; font-family: helvetica, arial, sans-serif; -webkit-overflow-scrolling: auto; padding-top: 10px; margin-bottom: 5px; } .tbl-stories-container .tbl-stories-placement { display: none; }")}createStoriesContainer(){TRC.dom.addClass(this.container,n.STORIES_CONTAINER),this.container.setAttribute(o.MAIN_CONTAINER_ID,this.unifiedPlacementName),this.placementsContainer=TRC.dom.createHTMLElement("section",{className:n.PLACEMENTS_CONTAINER})}handlePlacement(e){var{placement:t,trcResponse:i}=e;if(this.storiesPlacements[t])__trcWarn(`Stories placement already created for '${t}'`);else{const r=document.createElement("section");e.container=r,e.modeGroupOrder=++this.numPlacements,r.setAttribute(o.STORY_INDEX,this.numPlacements),r.placementData=e,r.id=`${this.parentContainerId}-pl${this.numPlacements}`,TRC.dom.addClass(r,n.STORIES_PLACEMENT),this.handleTopicRelatedPlacement(r,i),this.placementsContainer.appendChild(r),this.isStoriesLastPlacement(),this.storiesPlacements[t]=e}}isStoriesLastPlacement(){var e;this.options.storiesPlacementsAmount===this.numPlacements&&(e=this.storiesCarouselInstance["carouselContainer"],this.container.appendChild(e),this.container.appendChild(this.placementsContainer),this.storiesCarouselInstance.carouselReady())}renderVerticalUiPlacements(e){this.verticalUi||(this.verticalUi=new TRC.StoriesVerticalUi(this)),this.verticalUi.openVerticalUi(e)}handleTopicRelatedPlacement(e,t){var{categoryId:i,categoryTitle:r,categoryImage:n}=a.getPlacementCategoryData(t);i&&(e.setAttribute(o.STORY_TOPIC,i),e.setAttribute(o.STORY_TOPIC_INDEX,++this.numTopics),e={id:i,title:r||i,imageUrl:this.storiesCarouselInstance.getTopicImage(n,t.v),slotPosition:this.numPlacements,placementContainer:e},this.topics[i]=e,this.storiesCarouselInstance.addTopic(e))}static getPlacementCategoryData(e){var{cid:t,ct:i,ciu:e}=e;return{categoryId:t,categoryTitle:i,categoryImage:e}}}TRC.Stories=a})(),function(){let i=!1;const n={SHOW_ITEM:"tbl-show-item",NEXT_ITEM:"tbl-next-item",REMOVE_LEFT:"tbl-remove-item",REMOVE_RIGHT:"tbl-remove-item-to-right",IMAGE_HOLDER:"thumbBlock_holder",ZOOM_IN:TRC.Browser.ie?"":"tbl-zoom-in-item",PROGRESS_BAR_WRAPPER:"tbl-story-progressBar-wrp",PROGRESS_BAR_WRAPPER_TEXT_OVER:"tbl-story-progressBar-wrp-text-over",PROGRESS_BAR_OVERFLOW_WRAPPER:"tbl-story-progressBar-overflow-wrp",PROGRESS_BAR:"tbl-story-progressBar",PROGRESS_RUNNER:"tbl-progress-runner",PROGRESS_ANIM:"tbl-progress-anim",PREVENT_CLICK:"tbl-prevent-click-progressBar",ARROW_BUTTON:"tbl-arrow-btn",CLICKABLE_AREA:"tbl-clickable-area-btn",TOUCH_DEVICE:"tbl-story-touch-device",DESKTOP:"tbl-story-desktop"},t={SLIDE_OUT_LEFT:"tbl-animation-slide-out-left",SLIDE_OUT_RIGHT:"tbl-animation-slide-out-right",PROGRESS_BAR_ANIMATION:"tbl-animation-progress-bar"},r={LABELS:".item-label-href",LABELS_GRADIENT_CONTAINER:"tbl-text-over-container",LABELS_GRADIENT_OVERLAY:"tbl-text-over",LABELS_ALIGN:"tbl-text-over-align",LABELS_ALIGN_LEFT:"tbl-text-over-labels-left",LABELS_ALIGN_RIGHT:"tbl-text-over-labels-right"},o=[t.SLIDE_OUT_LEFT,t.SLIDE_OUT_RIGHT];class a{constructor(e){this.props=a.GetStoryWidgetProps(e),this.active=!1,this.finishFirstCycle=!1,this.browserWidth=TRC.dom.getWindowWidth(),this.internalc=e.internalContainer,this.mainContainer=e.container,this.rbox=e,this.setNumOfItems(e.responsiveRules),this.items=Array.prototype.slice.call(e.boxes,0,this.amountOfItems),this.intervalLength=this.props.storyInterval,this.debugWidget=-1!==window.location.search.indexOf("tbl-debug=true"),this.isTouchDevice=TRC.Device.isTouchDevice,this.deviceType=this.isTouchDevice?n.TOUCH_DEVICE:n.DESKTOP,this.calcImageHeight(),this.thumbnailPosition=e.getThumbnailPosition(),this.state={previousItem:null,showItem:this.items[0],showNextItem:this.items[1],activePB:null,previousPosition:null,currentPosition:0},i||a.setDefaultCss();const t=TRC.listen("trcContentReady",e=>{e.container===this.mainContainer&&this.init(t)})}static shouldInitStoryWidget(e){return!0===e.trc.getProperty(e.mode_name,"storyWidget",e.propertiesOverride)}static GetStoryWidgetProps(e){return{storyInterval:e.trc.getProperty(e.mode_name,"storyWidget-story-interval",e.propertiesOverride)||7}}static setTextOverForStoryWidget(e,t){var i=document.createElement("span"),e=this.getDirection(e);TRC.dom.addClass(i,r.LABELS_GRADIENT_OVERLAY),t.link.appendChild(i),TRC.dom.addClass(t.link,r.LABELS_GRADIENT_CONTAINER),this.alignLabelsBox(t,e),this.addArrowIcon(t.link,e)}calcImageHeight(){this.imageHeight=a.getOuter("height",this.items[0].querySelector(`.${n.IMAGE_HOLDER}`)),this.imageWidth=a.getOuter("width",this.items[0].querySelector(`.${n.IMAGE_HOLDER}`))}init(e){try{e.remove(),setTimeout(()=>{this.container=this.mainContainer.querySelector(".trc_rbox_container"),TRC.dom.addClass(this.container,`story-widget ${this.deviceType}`),this.calcImageHeight(),this.buildStoryWidget(),this.setDynamicCss(),TRC.dispatch("widgetHeightReady")},0);var t={onEnter:this.startTheStory.trcBind(this),onExit:this.stopTheStory.trcBind(this),targetElement:this.internalc};TRC.intersections.observe(t)}catch(e){__trcError("error on reco reel initialisation",e)}}buildStoryWidget(){if(this.rbox.trc.sendAbTestEvent("animated_story","available"),this.listenToAnimationEvents(),this.arrows=[],this.clickedAreas=[],this.progressBar=this.createProgressBar(),this.internalc.parentNode.appendChild(this.progressBar),this.allowRecalculateSize=!0,this.deviceType===n.DESKTOP)this.arrows=this.createArrowBtns(),TRC.dom.on(this.internalc,"mouseover",this.playStateAnimation.trcBind(this,"paused")),TRC.dom.on(this.internalc,"mouseleave",this.playStateAnimation.trcBind(this,"running"));else{this.clickedAreas=this.createMobileClickedArea();const e=document.createElement("div");e.className=n.PREVENT_CLICK,this.progressBar.appendChild(e)}const e=this.calcCardHeight();this.responsiveAlignment(e),TRC.dom.on(window,"resize",TRC.util.debounce(()=>{this.recalculateWidgetSize(e)},100,!1,this))}recalculateWidgetSize(e){e.item.style.removeProperty("top"),e.itemHeight=a.getOuter("height",e.item),this.responsiveAlignment(e)}static getConsts(){return{CSS_CLASSES:n,CSS_ANIMATION:t,SLIDE_EVENTS:o,ARROW_SIZE:56,PROGRESS_BAR_HEIGHT:100}}setNumOfItems(e){const r=this.rbox.boxes.length;e?e.forEach(e=>{var t=e.min<this.browserWidth&&(this.browserWidth<e.max||void 0===e.max),i=e.rows*e.cells,e=i<=r;t&&(this.amountOfItems=e?i:r)}):this.amountOfItems=r}static setDefaultCss(){i=!0,TRC.dom.injectStyle("div.story-widget { position: relative; /*DEFAULTS */ /*EVENTS*/ /*PROGRESS BAR */ /*ARROWS */ } div.story-widget .videoCube.thumbnail_under .tbl-text-over-container .tbl-labels-arrow { position: absolute; } div.story-widget .videoCube.thumbnail_under .tbl-text-over-container .video-label-box.tbl-text-over-align { width: 91%; } div.story-widget .videoCube.thumbnail_under .tbl-text-over-container .video-label-box.tbl-text-over-labels-right { right: 0; left: auto; } div.story-widget .videoCube.thumbnail_under .tbl-text-over-container .video-label-box.tbl-text-over-labels-left { left: 0; right: auto; } div.story-widget.tbl-story-touch-device .tbl-story-progressBar-overflow-wrp .tbl-story-progressBar-wrp { position: absolute; width: 100%; font-size: 0; background: -webkit-linear-gradient(top, rgba(1, 0, 0, 0.8) 0%, rgba(0, 0, 0, 0) 100%); background: -webkit-gradient(linear, left top, left bottom, from(rgba(1, 0, 0, 0.8)), to(rgba(0, 0, 0, 0))); background: -o-linear-gradient(top, rgba(1, 0, 0, 0.8) 0%, rgba(0, 0, 0, 0) 100%); background: linear-gradient(to bottom, rgba(1, 0, 0, 0.8) 0%, rgba(0, 0, 0, 0) 100%); } div.story-widget.tbl-story-touch-device .tbl-story-progressBar-overflow-wrp .tbl-story-progressBar-wrp .tbl-story-progressBar { top: 5px; height: 2px; } div.story-widget.tbl-story-touch-device .tbl-story-progressBar-overflow-wrp .tbl-prevent-click-progressBar { pointer-events: auto; } div.story-widget.tbl-story-touch-device .videoCube.thumbnail_under .tbl-text-over-container .video-label-box.tbl-text-over-align { bottom: 0; } div.story-widget.tbl-story-touch-device .videoCube.thumbnail_under .tbl-text-over-container .tbl-labels-arrow { bottom: 10px; } div.story-widget.tbl-story-touch-device .videoCube.thumbnail_under .tbl-text-over-container .tbl-labels-arrow-right { right: 3%; } div.story-widget.tbl-story-touch-device .videoCube.thumbnail_under .tbl-text-over-container .tbl-labels-arrow-left { left: 3%; } div.story-widget.tbl-story-desktop:hover .tbl-arrow-btn.tbl-arrow-left { left: 0; } div.story-widget.tbl-story-desktop:hover .tbl-arrow-btn.tbl-arrow-right { right: 0; } div.story-widget.tbl-story-desktop:hover .tbl-story-progressBar-wrp { opacity: 0; transform: translateY(100px); } div.story-widget.tbl-story-desktop:hover .tbl-story-progressBar-wrp-text-over { opacity: 1; transform: none; } div.story-widget.tbl-story-desktop .tbl-text-over-container .video-label-box.tbl-text-over-align { bottom: 15px; } div.story-widget.tbl-story-desktop .tbl-text-over-container .tbl-labels-arrow { bottom: 20px; } div.story-widget.tbl-story-desktop .tbl-text-over-container .tbl-labels-arrow-right { right: 4%; } div.story-widget.tbl-story-desktop .tbl-text-over-container .tbl-labels-arrow-left { left: 4%; } div.story-widget .trc_rbox_outer { margin: 0; } div.story-widget .trc_rbox_outer .trc_rbox_div { overflow: hidden; } div.story-widget .trc_rbox_outer .videoCube { position: absolute; width: 100%; margin: 0; bottom: 0; } div.story-widget .trc_rbox_outer .videoCube .thumbBlock_holder { overflow: hidden; z-index: -1; } div.story-widget .trc_rbox_outer .videoCube .thumbBlock_holder .thumbBlock_placeholder { background-color: #aeaeae; position: absolute; top: 0; left: 0; width: 100%; height: 100%; } div.story-widget .trc_rbox_outer .videoCube .thumbBlock_holder .thumbBlock_placeholder svg { width: 100px; height: 100px; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); } div.story-widget .trc_rbox_outer .videoCube .thumbBlock_holder .thumbBlock { -webkit-transform: scale(1.00); -moz-transform: scale(1.00); -ms-transform: scale(1.00); -o-transform: scale(1.00); transform: scale(1.00); } div.story-widget .trc_rbox_outer .videoCube .video-label-box { z-index: -1; opacity: 0; } div.story-widget .trc_rbox_outer .videoCube .item-label-href.tbl-text-over-container { z-index: -1; opacity: 0; } div.story-widget .trc_rbox_outer .videoCube .item-label-href.tbl-text-over-container .video-label-box { z-index: auto; opacity: 1; } div.story-widget .videoCube.tbl-show-item { z-index: 1; } div.story-widget .videoCube.tbl-show-item .thumbBlock_holder { z-index: 1; } div.story-widget .videoCube.tbl-show-item .video-label-box { z-index: 1; -webkit-animation: tbl-animation-fade-in 1s; -moz-animation: tbl-animation-fade-in 1s; -ms-animation: tbl-animation-fade-in 1s; -o-animation: tbl-animation-fade-in 1s; animation: tbl-animation-fade-in 1s; -webkit-animation-fill-mode: forwards; -moz-animation-fill-mode: forwards; -ms-animation-fill-mode: forwards; -o-animation-fill-mode: forwards; animation-fill-mode: forwards; } div.story-widget .videoCube.tbl-show-item .item-label-href.tbl-text-over-container { z-index: 1; -webkit-animation: tbl-animation-fade-in 1s; -moz-animation: tbl-animation-fade-in 1s; -ms-animation: tbl-animation-fade-in 1s; -o-animation: tbl-animation-fade-in 1s; animation: tbl-animation-fade-in 1s; -webkit-animation-fill-mode: forwards; -moz-animation-fill-mode: forwards; -ms-animation-fill-mode: forwards; -o-animation-fill-mode: forwards; animation-fill-mode: forwards; } div.story-widget .videoCube.tbl-show-item .item-label-href.tbl-text-over-container .video-label-box { animation: none; z-index: auto; } div.story-widget .videoCube.tbl-show-item .tbl-labels-arrow-right { z-index: 1; -webkit-animation: tbl-animation-fade-in 1s; -moz-animation: tbl-animation-fade-in 1s; -ms-animation: tbl-animation-fade-in 1s; -o-animation: tbl-animation-fade-in 1s; animation: tbl-animation-fade-in 1s; -webkit-animation-fill-mode: forwards; -moz-animation-fill-mode: forwards; -ms-animation-fill-mode: forwards; -o-animation-fill-mode: forwards; animation-fill-mode: forwards; } div.story-widget .videoCube.tbl-show-item .tbl-labels-arrow-left { z-index: 1; -webkit-animation: tbl-animation-fade-in 1s; -moz-animation: tbl-animation-fade-in 1s; -ms-animation: tbl-animation-fade-in 1s; -o-animation: tbl-animation-fade-in 1s; animation: tbl-animation-fade-in 1s; -webkit-animation-fill-mode: forwards; -moz-animation-fill-mode: forwards; -ms-animation-fill-mode: forwards; -o-animation-fill-mode: forwards; animation-fill-mode: forwards; } div.story-widget .videoCube.tbl-remove-item .thumbBlock_holder { -webkit-animation: tbl-animation-slide-out-left 0.75s; -moz-animation: tbl-animation-slide-out-left 0.75s; -ms-animation: tbl-animation-slide-out-left 0.75s; -o-animation: tbl-animation-slide-out-left 0.75s; animation: tbl-animation-slide-out-left 0.75s; } div.story-widget .videoCube.tbl-remove-item .video-label-box { -webkit-animation: tbl-animation-fade-out 1s; -moz-animation: tbl-animation-fade-out 1s; -ms-animation: tbl-animation-fade-out 1s; -o-animation: tbl-animation-fade-out 1s; animation: tbl-animation-fade-out 1s; opacity: 0; } div.story-widget .videoCube.tbl-remove-item .item-label-href.tbl-text-over-container { -webkit-animation: tbl-animation-fade-out 1s; -moz-animation: tbl-animation-fade-out 1s; -ms-animation: tbl-animation-fade-out 1s; -o-animation: tbl-animation-fade-out 1s; animation: tbl-animation-fade-out 1s; opacity: 0; } div.story-widget .videoCube.tbl-remove-item .item-label-href.tbl-text-over-container .video-label-box { animation: none; } div.story-widget .videoCube.tbl-remove-item .tbl-labels-arrow-right { -webkit-animation: tbl-animation-fade-out 1s; -moz-animation: tbl-animation-fade-out 1s; -ms-animation: tbl-animation-fade-out 1s; -o-animation: tbl-animation-fade-out 1s; animation: tbl-animation-fade-out 1s; opacity: 0; } div.story-widget .videoCube.tbl-remove-item .tbl-labels-arrow-left { -webkit-animation: tbl-animation-fade-out 1s; -moz-animation: tbl-animation-fade-out 1s; -ms-animation: tbl-animation-fade-out 1s; -o-animation: tbl-animation-fade-out 1s; animation: tbl-animation-fade-out 1s; opacity: 0; } div.story-widget .videoCube.tbl-remove-item-to-right .thumbBlock_holder { -webkit-animation: tbl-animation-slide-out-right 0.75s; animation: tbl-animation-slide-out-right 0.75s; } div.story-widget .videoCube.tbl-remove-item-to-right .video-label-box { -webkit-animation: tbl-animation-fade-out 1s; -moz-animation: tbl-animation-fade-out 1s; -ms-animation: tbl-animation-fade-out 1s; -o-animation: tbl-animation-fade-out 1s; animation: tbl-animation-fade-out 1s; opacity: 0; } div.story-widget .videoCube.tbl-remove-item-to-right .item-label-href.tbl-text-over-container { -webkit-animation: tbl-animation-fade-out 1s; -moz-animation: tbl-animation-fade-out 1s; -ms-animation: tbl-animation-fade-out 1s; -o-animation: tbl-animation-fade-out 1s; animation: tbl-animation-fade-out 1s; opacity: 0; } div.story-widget .videoCube.tbl-remove-item-to-right .item-label-href.tbl-text-over-container .video-label-box { animation: none; } div.story-widget .videoCube.tbl-next-item .video-label-box { opacity: 0; } div.story-widget .videoCube.tbl-next-item .item-label-href.tbl-text-over-container { opacity: 0; } div.story-widget .videoCube.tbl-next-item .item-label-href.tbl-text-over-container .video-label-box { opacity: 0; } div.story-widget .videoCube.tbl-next-item .thumbBlock_holder { z-index: 0; } div.story-widget .tbl-story-progressBar-overflow-wrp { z-index: 9; position: absolute; pointer-events: none; overflow: hidden; width: 100%; } div.story-widget .tbl-story-progressBar-overflow-wrp .tbl-story-progressBar-wrp { direction: ltr; width: 100%; box-sizing: border-box; position: absolute; padding: 0 4%; background: -webkit-linear-gradient(top, rgba(0, 0, 0, 0) 0%, rgba(1, 0, 0, 0.8) 100%); background: -webkit-gradient(linear, left top, left bottom, from(rgba(0, 0, 0, 0)), to(rgba(1, 0, 0, 0.8))); background: -o-linear-gradient(top, rgba(0, 0, 0, 0) 0%, rgba(1, 0, 0, 0.8) 100%); background: linear-gradient(to bottom, rgba(0, 0, 0, 0) 0%, rgba(1, 0, 0, 0.8) 100%); opacity: 1; } div.story-widget .tbl-story-progressBar-overflow-wrp .tbl-story-progressBar-wrp .tbl-story-progressBar { position: relative; top: 85px; display: inline-block; vertical-align: top; /* set bars to the absolute top container when using inline block */ width: 23%; height: 3px; background-color: rgba(255, 255, 255, 0.4); margin: 0 1%; overflow: hidden; } div.story-widget .tbl-story-progressBar-overflow-wrp .tbl-story-progressBar-wrp .tbl-story-progressBar span.tbl-progress-runner { width: 100%; height: 100%; position: absolute; left: 0; overflow: hidden; display: block; background-color: #fcfcfc; } div.story-widget .tbl-story-progressBar-overflow-wrp .tbl-story-progressBar-wrp .tbl-story-progressBar .tbl-progress-anim { -webkit-animation-fill-mode: forwards; animation-fill-mode: forwards; } div.story-widget .tbl-story-progressBar-overflow-wrp .tbl-story-progressBar-wrp-text-over { padding: 0 3%; background: none; } div.story-widget .tbl-arrow-btn { position: absolute; background-color: rgba(0, 0, 0, 0.419608); z-index: 2; font-size: 40px; text-align: center; color: #ffffff; cursor: pointer; line-height: 0; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; -o-user-select: none; user-select: none; -webkit-transition: left 1s, right 1s; -moz-transition: left 1s, right 1s; -ms-transition: left 1s, right 1s; -o-transition: left 1s, right 1s; transition: left 1s, right 1s; } div.story-widget .tbl-arrow-btn svg { transform: translateY(50%); } div.story-widget .tbl-arrow-btn.tbl-arrow-left { -webkit-transform: scaleX(-1); -moz-transform: scaleX(-1); -ms-transform: scaleX(-1); -o-transform: scaleX(-1); transform: scaleX(-1); } div.story-widget .tbl-clickable-area-btn { position: absolute; z-index: 2; height: 100%; } div.story-widget .tbl-clickable-area-btn.tbl-clickable-area-left { left: 0; } div.story-widget .tbl-clickable-area-btn.tbl-clickable-area-right { right: 0; }@-webkit-keyframes tbl-animation-slide-out-left { 0% { left: 0; } 100% { left: -100%; } }@keyframes tbl-animation-slide-out-left { 0% { left: 0; } 100% { left: -100%; } }@-webkit-keyframes tbl-animation-slide-out-right { 0% { right: 0; } 100% { right: -100%; } }@keyframes tbl-animation-slide-out-right { 0% { right: 0; } 100% { right: -100%; } }@-webkit-keyframes tbl-animation-fade-in { 0% { opacity: 0; } 100% { opacity: 1; } }@keyframes tbl-animation-fade-in { 0% { opacity: 0; } 100% { opacity: 1; } }@-webkit-keyframes tbl-animation-fade-out { 0% { opacity: 1; } 100% { opacity: 0; } }@keyframes tbl-animation-fade-out { 0% { opacity: 1; } 100% { opacity: 0; } }@-webkit-keyframes tbl-animation-zoom-In { 0% { -webkit-transform: scale(1.00); -moz-transform: scale(1.00); -ms-transform: scale(1.00); -o-transform: scale(1.00); transform: scale(1.00); } 100% { -webkit-transform: scale(1.1); -moz-transform: scale(1.1); -ms-transform: scale(1.1); -o-transform: scale(1.1); transform: scale(1.1); } }@keyframes tbl-animation-zoom-In { 0% { -webkit-transform: scale(1.00); -moz-transform: scale(1.00); -ms-transform: scale(1.00); -o-transform: scale(1.00); transform: scale(1.00); } 100% { -webkit-transform: scale(1.1); -moz-transform: scale(1.1); -ms-transform: scale(1.1); -o-transform: scale(1.1); transform: scale(1.1); } }@-webkit-keyframes tbl-animation-progress-bar { 0% { -webkit-transform: translateX(0); -moz-transform: translateX(0); -ms-transform: translateX(0); -o-transform: translateX(0); transform: translateX(0); } 100% { -webkit-transform: translateX(100%); -moz-transform: translateX(100%); -ms-transform: translateX(100%); -o-transform: translateX(100%); transform: translateX(100%); } }@keyframes tbl-animation-progress-bar { 0% { -webkit-transform: translateX(0); -moz-transform: translateX(0); -ms-transform: translateX(0); -o-transform: translateX(0); transform: translateX(0); } 100% { -webkit-transform: translateX(100%); -moz-transform: translateX(100%); -ms-transform: translateX(100%); -o-transform: translateX(100%); transform: translateX(100%); } }")}setDynamicCss(){var e=`${this.intervalLength}s`,t=`${+this.intervalLength+.5}s`,i=this.rbox.mode_name,r=this.isTouchDevice?Math.round(.3*this.imageHeight):100,n=this.isTouchDevice?Math.round(.15*this.imageHeight):0;this.imageHeight;TRC.dom.injectStyle(`.story-widget.tbl-story-touch-device .${i} .tbl-story-progressBar-overflow-wrp .tbl-prevent-click-progressBar { height: ${n}px; }.story-widget .${i} { /*EVENTS*/ } .story-widget .${i} .videoCube.tbl-show-item.tbl-zoom-in-item .thumbBlock_holder .thumbBlock { -webkit-animation: tbl-animation-zoom-In ${t} ease-in; -moz-animation: tbl-animation-zoom-In ${t} ease-in; -ms-animation: tbl-animation-zoom-In ${t} ease-in; -o-animation: tbl-animation-zoom-In ${t} ease-in; animation: tbl-animation-zoom-In ${t} ease-in; } .story-widget .${i} .tbl-story-progressBar-overflow-wrp { height: ${r}px; } .story-widget .${i} .tbl-story-progressBar-overflow-wrp .tbl-story-progressBar-wrp { height: ${r}px; -webkit--webkit-transition: all 1s; -moz--webkit-transition: all 1s; -ms--webkit-transition: all 1s; -o--webkit-transition: all 1s; -webkit-transition: all 1s; } .story-widget .${i} .tbl-story-progressBar-overflow-wrp .tbl-story-progressBar-wrp .tbl-progress-anim { -webkit-animation: tbl-animation-progress-bar ${e} linear; -moz-animation: tbl-animation-progress-bar ${e} linear; -ms-animation: tbl-animation-progress-bar ${e} linear; -o-animation: tbl-animation-progress-bar ${e} linear; animation: tbl-animation-progress-bar ${e} linear; } .story-widget .${i} .tbl-arrow-btn { height: 56px; width: 56px; } .story-widget .${i} .tbl-clickable-area-btn { top: ${n}px; width: 56px; height: ${this.imageHeight-n}px; } .story-widget .${i} .tbl-arrow-btn.tbl-arrow-left { left: -56px; } .story-widget .${i} .tbl-arrow-btn.tbl-arrow-right { right: -56px; }`)}listenToAnimationEvents(){var e=TRC.dom.detectAnimationEvent(this.container,"end")||"animationend",t=TRC.dom.detectAnimationEvent(this.container,"start")||"animationstart";TRC.dom.on(this.container,t,e=>this.animationStartHandler(e)),TRC.dom.on(this.container,e,e=>this.animationEndHandler(e))}static getOuter(e,t){return t&&t.getBoundingClientRect()[e]}static addASvgArrow(){return`<svg width="17px" height="29px" viewBox="0 0 17 29" version="1.1" xmlns="http://www.w3.org/2000/svg">\n                       <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                           <g id="Desktop-4-cards" transform="translate(-1073.000000, -436.000000)" fill="#FFFDFD" fill-rule="nonzero">\n                               <g id="Group" transform="translate(1081.500000, 450.500000) scale(-1, 1) translate(-1081.500000, -450.500000) translate(1073.000000, 436.000000)">\n                                   <polygon id="Rectangle-5" transform="translate(8.294336, 8.495231) rotate(45.000000) translate(-8.294336, -8.495231) " points="7.05498966 -1.37457069 9.68971053 -1.39537442 9.53368258 18.3650322 6.8989617 18.3858359"></polygon>\n                                   <polygon id="Rectangle-5" transform="translate(8.294336, 20.257858) scale(1, -1) rotate(45.000000) translate(-8.294336, -20.257858) " points="7.05498966 10.3880565 9.68971053 10.3672528 9.53368258 30.1276594 6.8989617 30.1484631"></polygon>\n                               </g>\n'\n                           </g>\n'\n                       </g>\n'\n                   </svg>`}static addASvgPlaceHolder(){return'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"\n                    viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">\n                     <rect fill="none" stroke="#fff" stroke-width="4" x="25" y="25" width="50" height="50">\n                    <animateTransform\n                       attributeName="transform"\n                       dur="0.5s"\n                       from="0 50 50"\n                       to="180 50 50"\n                       type="rotate"\n                       id="strokeBox"\n                       attributeType="XML"\n                       begin="rectBox.end"/>\n                    </rect>\n                     <rect x="27" y="27" fill="#fff" width="46" height="50">\n                    <animate\n                       attributeName="height"\n                       dur="1.3s"\n                       attributeType="XML"\n                       from="50" \n                       to="0"\n                       id="rectBox" \n                       fill="freeze"\n                       begin="0s;strokeBox.end"/>\n                    </rect>\n                  </svg>'}static addArrowIcon(e,t){e.insertAdjacentHTML("beforeend","ltr"===t?'<div class="tbl-labels-arrow tbl-labels-arrow-right">\n                          <?xml version="1.0" encoding="UTF-8"?>\n                          <svg width="23px" height="23px" viewBox="0 0 23 23" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                          <title>Group 3</title>\n                          <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round">\n                          <g id="Mobile-SC-CTA" transform="translate(-320.000000, -479.000000)" stroke="#FFFFFF">\n                          <g id="Group-3" transform="translate(321.000000, 480.000000)">\n                          <polyline id="Path" points="8.2173913 5.47826087 13.6956522 10.0434783 8.2173913 14.6086957"></polyline>\n                          <circle id="Oval" cx="10.5" cy="10.5" r="10.5"></circle>\n                          </g>\n                          </g>\n                          </g>\n                          </svg>\n                        </div>':'<div class="tbl-labels-arrow tbl-labels-arrow-left">\n                    <?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\n                    <svg width="23px" height="23px"\n                         viewBox="0 0 23 23"\n                         version="1.1"\n                         xmlns="http://www.w3.org/2000/svg"\n                         xmlns:xlink="http://www.w3.org/1999/xlink">\n                      <title id="title37">Group 3</title>\n                      <desc id="desc39">Created with Sketch.</desc>\n                      <g transform="rotate(180,11.5,11.5)"\n                         stroke-linejoin="round"\n                         stroke-linecap="round"\n                         fill-rule="evenodd"\n                         fill="none"\n                         stroke-width="1"\n                         stroke="none"\n                         id="Page-1">\n                        <g stroke="#ffffff" transform="translate(-320,-479)" id="Mobile-SC-CTA">\n                          <g transform="translate(321,480)" id="Group-3">\n                            <polyline points="8.2173913 5.47826087 13.6956522 10.0434783 8.2173913 14.6086957" id="Path" />\n                            <circle r="10.5" cy="10.5" cx="10.5" id="Oval" />\n                          </g>\n                        </g>\n                      </g>\n                    </svg>\n                    </div>')}static getDirection(e){e=e.trc.getProperty(e.mode_name,"direction",e.propertiesOverride);return TRC.direction||e||"ltr"}static alignLabelsBox(e,t){t="rtl"===t?r.LABELS_ALIGN_RIGHT:r.LABELS_ALIGN_LEFT;TRC.dom.addClass(e.labelsBox,r.LABELS_ALIGN),TRC.dom.addClass(e.labelsBox,t)}listenToSwipeEvents(t){const i={start:{screenX:0,screenY:0},end:{screenX:0,screenY:0}};TRC.dom.on(t,"touchstart",e=>{i.start={screenX:e.changedTouches[0].screenX,screenY:e.changedTouches[0].screenY}}),TRC.dom.on(t,"touchend",e=>{i.end={screenX:e.changedTouches[0].screenX,screenY:e.changedTouches[0].screenY},this.handleGesture(t,i)})}handleGesture(e,t){var{start:i,end:r}=t,{width:t,height:e}=e.getBoundingClientRect(),t=(r.screenX-i.screenX)/t,e=(r.screenY-i.screenY)/e;return e<t&&.25<t?this.arrowClicked("right",!0):t<e&&t<-.25?this.arrowClicked("left",!0):void 0}calcCardHeight(){let r={itemHeight:0,item:null};return this.items.forEach((e,t)=>{0===t&&(r.item=e);const i=e.querySelector(".thumbBlock_holder");i&&i.insertAdjacentHTML("afterbegin",`<div class="thumbBlock_placeholder">${a.addASvgPlaceHolder()}</div>`);t=a.getOuter("height",e);e.style.top=0,t>r.itemHeight&&(r={itemHeight:t,item:e}),this.isTouchDevice&&this.listenToSwipeEvents(e.querySelector(`.${n.IMAGE_HOLDER}`))}),r}responsiveAlignment(e){const{progressBar:t,arrows:i,clickedAreas:r}=this;e.item.style.top=0,this.calcImageHeight(),0<e.itemHeight&&(this.internalc.style.height=`${e.itemHeight}px`);e=this.items[0];let n=0;e&&e.pre_detail_order&&0<e.pre_detail_order.length&&(n+=a.getOuter("height",e.preLabelsBox));e=`${this.imageHeight-100+n}px`;t.firstChild.style.top=0,t.style.top=this.isTouchDevice?`${n}px`:e,i.forEach(e=>{e.style.top=`${(this.imageHeight+n)/2-28}px`}),r.forEach(e=>{e.style.width=`${.15*this.imageWidth}px`})}playStateAnimation(e){const{activePB:t,showItem:i}=this.state,r=i.querySelector(".thumbBlock"),n=t.firstChild;n&&(n.style.webkitAnimationPlayState=e,n.style.animationPlayState=e),r&&(r.style.webkitAnimationPlayState=e,r.style.animationPlayState=e)}createProgressBar(){const e=document.createElement("div");e.className=n.PROGRESS_BAR_OVERFLOW_WRAPPER;const t=document.createElement("div");return t.className=n.PROGRESS_BAR_WRAPPER,"under"===this.thumbnailPosition&&TRC.dom.addClass(t,n.PROGRESS_BAR_WRAPPER_TEXT_OVER),t.insertAdjacentHTML("afterbegin",this.createProgressUnits()),this.progressBars=Array.prototype.slice.call(t.childNodes),this.state.activePB=this.progressBars[0],e.appendChild(t),e}createProgressUnits(){let t="";for(let e=0;this.amountOfItems>e;e++)t+=`<div class="${n.PROGRESS_BAR}" style="width: ${100/this.amountOfItems-2}%" data-progress-bar-index="${e}"><span class="${n.PROGRESS_RUNNER}"></span></div>`;return`${t}`}createArrowBtns(){return["left","right"].map(e=>{const t=document.createElement("div");return t.className=`${n.ARROW_BUTTON} tbl-arrow-${e}`,t.insertAdjacentHTML("beforeend",a.addASvgArrow()),TRC.dom.on(t,"click",this.arrowClicked.trcBind(this)),this.internalc.parentNode.appendChild(t),t})}createMobileClickedArea(){return["left","right"].map(e=>{const t=document.createElement("div");return t.className=`${n.CLICKABLE_AREA} tbl-clickable-area-${e}`,TRC.dom.on(t,"click",this.arrowClicked.trcBind(this)),this.internalc.parentNode.appendChild(t),t})}startTheStory(){var e;this.isImageHeightChanged()&&this.allowRecalculateSize&&(this.allowRecalculateSize=!1,e=this.calcCardHeight(),this.recalculateWidgetSize(e)),this.active=!0,this.restartAnimation()}isImageHeightChanged(){var e=this["imageHeight"];return this.calcImageHeight(),e!==this.imageHeight}stopTheStory(){this.active=!1}restartAnimation(){setTimeout(()=>{this.updateItem(),this.updateCarouselIteration("left")})}arrowClicked(e,t){if(this.disableClickEvents)return!1;t=a.resolveAnimationDirection(e,t);return TRCImpl.sendAbTestEvent("animated_story",`click_${"left"===t?"right":"left"}`),this.updateIteration(t),!0}static resolveAnimationDirection(e,t){return t?e:TRC.dom.containsClass(e.currentTarget,n.ARROW_BUTTON)?TRC.dom.containsClass(e.currentTarget,"tbl-arrow-left")?"right":"left":TRC.dom.containsClass(e.currentTarget,n.CLICKABLE_AREA)&&TRC.dom.containsClass(e.currentTarget,"tbl-clickable-area-left")?"right":"left"}updateIteration(e){e=e||"left",this.debugWidget&&this.debugSlider();let t=1;var{showNextItem:i,currentPosition:r}=this.state;if("right"===e){let e;TRC.dom.removeClass(i,n.NEXT_ITEM),e=r?(t=-1,r-1):t=this.amountOfItems-1,TRC.dom.addClass(this.items[e],n.NEXT_ITEM)}r=+r+t===this.amountOfItems?0:r+t;this.setState({showPosition:r,nextShowPosition:Number(r+1)===this.amountOfItems?0:r+1}),this.updateCarouselIteration(e)}setState({showPosition:e,nextShowPosition:t}){var i=this.items[e],r=this.items[t],t=this.progressBars[e];return this.state={previousItem:this.state.showItem,showItem:i,showNextItem:r,activePB:t,previousPosition:this.state.currentPosition,currentPosition:e}}isFirstIteration(){return null===this.state.previousPosition}updateCarouselIteration(e){var t,i;this.active&&({REMOVE_LEFT:t,REMOVE_RIGHT:i}=n,t="left"===e?t:i,i=this.state["previousPosition"],this.isFirstIteration()||this.slideAnimation(t),this.updateProgressBar(),this.progressBars.length-1===i&&(this.finishFirstCycle=!0))}debugSlider(){const i={},r=["SHOW_ITEM","NEXT_ITEM","REMOVE_LEFT","REMOVE_RIGHT","ZOOM_IN"];this.items.forEach((e,t)=>{i[`item_${t}`]={},Object.keys(n).forEach(e=>{r.includes(e)&&(i[`item_${t}`][e]=TRC.dom.containsClass(n[e])?"X":null)})}),console.log(`%c card ${this.container.dataset.cardIndex}`,`background: #5${10*this.container.dataset.cardIndex}; color: white`),console.table(i)}slideAnimation(e=n.REMOVE_LEFT){var t=this.state.previousPosition,t=this.items[t];TRC.dom.addClass(t,e)}updateProgressBar(){const{activePB:e,currentPosition:i,previousPosition:t}=this.state;this.isFirstIteration()||TRC.dom.removeClass(this.progressBars[t].firstChild,n.PROGRESS_ANIM),TRC.dom.addClass(e.firstChild,n.PROGRESS_ANIM),this.progressBars.forEach((e,t)=>{e.firstChild.style.left=i>t?"0":"-100%"})}updateItem(){var{showItem:e,showNextItem:t,currentPosition:i}=this.state;this.clearThePreviousItem(),document.querySelector(`.${n.SHOW_ITEM}`)&&this.clearAll(),TRC.dom.addClass(e,`${n.SHOW_ITEM} ${n.ZOOM_IN}`),TRC.dom.removeClass(e,n.NEXT_ITEM),TRC.dom.addClass(t,n.NEXT_ITEM),this.finishFirstCycle||TRCImpl.sendAbTestEvent("animated_story",`Visible_${i+1}`)}clearThePreviousItem(){var e=this.state["previousItem"];return!!this.state.previousItem&&(a.clearClassNames(e),!0)}clearAll(){this.items.forEach(e=>(a.clearClassNames(e),!0))}static clearClassNames(e){TRC.dom.removeClass(e,n.SHOW_ITEM),TRC.dom.removeClass(e,n.REMOVE_LEFT),TRC.dom.removeClass(e,n.REMOVE_RIGHT),n.ZOOM_IN&&TRC.dom.removeClass(e,n.ZOOM_IN)}animationStartHandler(e){-1!==o.indexOf(e.animationName)&&(this.disableClickEvents=!0)}animationEndHandler(e){e.animationName===t.PROGRESS_BAR_ANIMATION&&(this.disableClickEvents=!1,this.updateIteration()),-1!==o.indexOf(e.animationName)&&(this.disableClickEvents=!1,this.updateItem())}}TRC.StoryWidget=a}(),function(){var c=TRC.taboolaConnect={},a=!1,d={},h=!!(TRC&&TRC.mobile&&TRC.mobile.reportClick);function n(e,t){"available"===t&&TRC.dispatch("available::"+e.placementName,{container:e.container}),"click"===t&&TRC.dispatch("click::"+e.placementName)}function o(e,t,i){t=t.config["max-height"]&&parseInt(t.config["max-height"]);t&&parseInt(i.height)>t&&(i.height=t),e.height=e.style.height=parseInt(i.height)+"px"}c.createIframe=function(e,t,i,r,n,o){if(e){var a=i||{},s=Math.floor(2147483648*Math.random()).toString(36),l=document.createElement("iframe");return a.attributes&&function(e,t){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}(a.attributes,l),l.style.border=l.frameBorder=l.border="0",l.style.display="block",l.style.height=parseInt(i.height)?parseInt(i.height)+"px":"0px",l.style.width="100%",l.scrolling="no",l.sandbox=a.sandbox||"allow-same-origin allow-scripts allow-popups allow-forms",a.fifr?c.lazyLoadDynamicContentLoader(l):(t=addHashParam(t,"tbcId",s),t=addHashParam(t,"lang",o||window.navigator.language),h&&(t=addHashParam(t,"isMobileSDK",""+h)),l.src=t),d[s]={origin:r,placementName:n,frame:l,config:i,container:e},e.innerHTML="",e.appendChild(l),l}__trcError("could not find container to create Iframe within")},c.lazyLoadDynamicContentLoader=function(t){TRC.ModuleLoader.load("dynamic-content-loader",TRC.dcl,function(){var e=t.contentWindow||t.contentDocument;e&&(e.document.open(),e.document.write(TRC.dcl),e.document.close())}.trcBind(t))},c.receiveMessage=function(e,t){var i=t.data;i&&d[i.id]&&(void 0===e.origin?d[i.id]:e).origin===t.origin&&this[i.action]&&this[i.action](i.payload||{sizeObject:i.sizeObject},d[i.id])},c.openInIframe=function(e,t){var i=t.frame,r=t.container,n=e.iframeArgs,t={isSmallIOS:function(){return 0<=TRCImpl["small-ios-device"].indexOf(TRC.Device.deviceType)},getPublisherBrandingName:function(){return n.publisherName},trc:TRCImpl},e={title:n.title,url:n.logger_url,logger_url:n.logger_url};new TRC.FeedView(t,e,r),c.postMessage(i,{action:"openInIframe",message:"openInIframe done",dimension:{height:i.style.height}},"*")},addHashParam=function(e,t,i){t=t+"="+i;if(0<e.indexOf("#")){i=e.slice(-1);return e+("&"===i||"#"===i?t:"&"+t)}return e+"#"+t},c.getOrigin=function(e){return e.match(/^(https:|http:)?\/\/[^/]+/i)[0]},c.postMessage=function(e,t,i){e.contentWindow.postMessage(t,i)},c.rendered=function(e,t){var i=t.frame,r=t.container;o(i,t,e.sizeObject),r.className+=" tbl-feed-card",n(t,"available");e={action:"rendered",message:"rendered done",dimension:{height:i.style.height}},r=TRCImpl.global["start-magazine-url"];r&&t.origin===r&&(e.publisherId=TRC.publisherId,e.placementName=t.placementName),c.postMessage(i,e,"*")},c.expand=function(e,t){var i=t.frame;o(i,t,e.sizeObject),c.postMessage(i,{action:"expand",message:"expand done",dimension:{height:i.style.height}},"*")},c.click=function(e,t){var i=t.frame,r=e.sizeObject;r&&o(i,t,r),n(t,"click"),c.postMessage(i,{action:"click",message:"click done",dimension:{height:i.style.height}},"*"),TRC.mobile&&TRC.mobile.reportClick&&TRC.mobile.reportClick(e.sizeObject)},c.collapse=function(e,t){var i=t.frame;o(i,t,e.sizeObject),c.postMessage(i,{action:"collapse",message:"collapse done",dimension:{height:i.style.height}},"*")},c.maxHeight=function(e,t){var i=t.frame,t=t.config["max-height"]||"";c.postMessage(i,{action:"maxHeight",message:t,dimension:{height:i.style.height}},"*")},c.createCard=function(e,t,i,r,n){if(!i.fifr){var o=this.getOrigin(i.origin||t);if(!o)return void __trcError("non valid origin for third party card")}a||(window.addEventListener("message",this.receiveMessage.bind(this,i),!1),a=!0),this.createIframe(e,t,i,o,r,n)},c.error=function(e){__trcWarn("External error report to taboola-connect: "+e)},window._trcIsUTactive&&(TRC.taboolaConnect.addHashParam=addHashParam)}();class TasksExecutorQueue{constructor(){this.tasks=[],this.runningTask=null}add(e){return this.tasks.push(e),1===this.tasks.length&&this.callNext(),this}callNext(){if(this.tasks.length)if("function"==typeof this.tasks[0]){[this.runningTask]=this.tasks;let e=!1;this.runningTask.cancel=()=>{e=!0},this.runningTask(()=>{e||(e=!0,this.tasks.shift(),this.callNext())})}else this.tasks.shift(),this.callNext()}resetQueue(){this.runningTask.cancel(),this.tasks=[]}}TRC.TasksExecutorQueue=TasksExecutorQueue,window,document,TRC.text={replaceAll(e,t,i,r){return void 0!==t&&void 0!==i&&t!==i?(t=new RegExp(t,"gi"),e.replace(t,"function"==typeof i&&"object"==typeof r?i.trcBind(r):i)):e},lsplit(e,t,i){const r=e.split(t);return r.slice(0,i-1).concat(r.length>=i?r.slice(i-1).join(t):[])},parseCSV(e){const t=e.split(","),i=[];for(;t.length;){let e=t.shift();if('"'===e[0]){for(;'"'!==e.slice(1).replace(/""/g,"").slice(-1)&&(e+=`,${t.shift()}`,t.length););i.push(e.slice(1,e.length-1).replace(/""/g,'"'))}else i.push(e)}return i},toStringList(e){if(!e)return[];if(!(e instanceof Array))return[`${e}`];const t=[];return e.forEach(e=>{e&&t.push(`${e}`)}),t},htmlUnescape:e=>String(e).replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&#34;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&"),encodeHTML:e=>"string"==typeof e&&e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),toLowerCamelCase(e){if(-1===e.indexOf("-"))return e;const t=e.toLowerCase().split("-").map(e=>e.charAt(0).toUpperCase()+e.substr(1)).join("");return t.charAt(0).toLowerCase()+t.substr(1)},splitAndJoin(e,t){let i=e.split(".");return i=(i=i.map(e=>t(e))).join(".")}},(()=>{let e=!1;const s={POSITION:{SPONSORED:"syndicated-static-text-position",ORGANIC:"organic-static-text-position",EMBLEM:"emblem-position"},TEXT:{SPONSORED:"syndicated-static-text",ORGANIC:"organic-static-text"},SHOW_ORGANIC_FIXED_LABEL:"organic-show-static-text",EMBLEM:"emblem"},n={EMBLEM_WRAPPER:"thumbnail-emblem",STATIC_TEXT:"static-text",FIXED_LABEL:"tbl-fixed-label",BIG_LABEL:"tbl-big-label",SMALL_LABEL:"tbl-small-label"};class l{constructor(e,t,i){var{categoryCard:r,recommendationList:n,add_span:o}=i,a=t?"SPONSORED":"ORGANIC";this.categoryCard=r,this.getModeClientProperty=i.getModeClientProperty.trcBind(i),this.size=n&&n.length,this.addSpan=o,this.emblemSrc=this.getModeClientProperty(s.EMBLEM),this.fixedLabelPosition=this.getFixedLabelPosition(t,s.POSITION[a]),this.fixedLabelText=this.getModeClientProperty(s.TEXT[a]),this.emblemSrc&&"null"!==this.emblemSrc&&(l.setCss(),this.emblemPosition=this.getModeClientProperty(s.POSITION.EMBLEM)||"top-left",this.addEmblem(e,a)),this.emblemRenderd&&!this.isEmblemAndTextNotOnSamePosition()||this.categoryCard&&this.categoryCard.isCategoryCard&&!this.categoryCard.render||this.addFixedLabel(e,t)}static setCss(){e||(e=!0,TRC.dom.injectStyle(".thumbnail-emblem { height: 35px; width: 35px; }.trc_related_container .thumbnail-emblem.bottom-right, .trc_related_container .static-text.bottom-right { bottom: 0; right: 0; background-position: bottom; }.trc_related_container .thumbnail-emblem.top-right, .trc_related_container .static-text.top-right { top: 0; right: 0; background-position: top; }.trc_related_container .thumbnail-emblem.bottom-left, .trc_related_container .static-text.bottom-left { bottom: 0; left: 0; background-position: bottom; }.trc_related_container .thumbnail-emblem.top-left, .trc_related_container .static-text.top-left { top: 0; left: 0; background-position: top; }.trc_related_container .thumbnail-emblem.top, .trc_related_container .static-text.top { width: 100%; top: 0; }.trc_related_container .thumbnail-emblem.bottom, .trc_related_container .static-text.bottom { width: 100%; bottom: 0; padding: 2px 0; }.trc_related_container .videoCube .thumbBlock .static-text { position: absolute; z-index: 1; margin: 0; padding: 5px; display: block; opacity: 0.7; } .trc_related_container .videoCube .thumbBlock .static-text.tbl-fixed-label { opacity: 1; padding: 0 5px; text-align: center; } .trc_related_container .videoCube .thumbBlock .static-text.tbl-fixed-label.tbl-small-label { min-width: 107px; min-height: 27px; line-height: 27px; letter-spacing: 0.31px; } .trc_related_container .videoCube .thumbBlock .static-text.tbl-fixed-label.tbl-big-label { min-width: 140px; min-height: 33px; font-size: 14px; line-height: 33px; letter-spacing: 0.39px; }.trc_related_container .thumbnail-emblem { background-position-x: center; }"))}isEmblemAndTextNotOnSamePosition(){return this.emblemRenderd&&this.fixedLabelPosition!==this.emblemPosition}addEmblem(e){this.emblemRenderd=!0;const t=this.addSpan(n.EMBLEM_WRAPPER,null,e);t.style.backgroundImage=`url('${this.emblemSrc}')`,TRC.dom.addClass(t,this.emblemPosition)}addFixedLabel(e,t){const i=[n.STATIC_TEXT],r=document.createElement("span");if(!t){const e=this.getModeClientProperty(s.SHOW_ORGANIC_FIXED_LABEL);if(!e)return;i.push(n.FIXED_LABEL),i.push(1===this.size?n.BIG_LABEL:n.SMALL_LABEL),this.categoryCard&&this.categoryCard.render&&(this.fixedLabelText=this.categoryCard.text)}l.setCss(),i.push(this.fixedLabelPosition),r.className=i.join(" "),this.fixedLabelText&&r.appendChild(document.createTextNode(this.fixedLabelText)),e.appendChild(r)}getFixedLabelPosition(e,t){e=e?"top-right":"bottom-left";return this.getModeClientProperty(t)||e}}TRC.ThumbnailOverlayComponents=l})(),(n=>{const e="tn_t_on",o=TRC.pageManager.getLocalStorageImplementation("strict-w3c-storage","session");let a=TRC.taboolaNews&&TRC.taboolaNews.timeOn,s=!1;if(!a&&o)try{a=JSON.parse(o.getValue(e)),s=!0}catch(n){__trcError("Error occurred while trying to read Taboola News data from SessionStorage but object data was corrupted.")}if(a){!s&&o&&o.setValue(e,JSON.stringify(a));let t=function(){var t=(new Date).getTime();if(!TRC.isAMP)return n.performance&&n.performance.timing&&n.performance.timing.navigationStart||t;try{var e=JSON.parse(n.context.ca).attributes._context.initialIntersection.time||t;return new Date(n.context.startTime-e)}catch(e){return t}}(),i,r=0;TRC.docVisibilityUtil.addEventListener(function(e){e?t=(new Date).getTime():(i=(new Date).getTime(),r+=1,TRCImpl.sendAbTestEvent&&TRCImpl.sendAbTestEvent("taboola_news_timeon",`${r.toString()}::${(i-t).toString()}`,null,!0))})}})(window),function(){function n(e,t){var i=document.createElement("span");o(i,"span");for(var r=0;r<t.length;r++){var n=function(e,t){var i=document.createElement("iframe");return o(i,"iFrame"),e&&t&&(e.tag&&e.trackableObject?(i.src="javascript:'<html><head></head><body>"+e.tag+e.trackableObject+"</body></html>'",TRC.dom.on(i,"load",function(){-1<e.trackableObject.indexOf("moat_trackable")&&function(e){if(e)try{__trcDebug("dispatching adLoaded event for MOAT"),e.dispatchEvent(new CustomEvent("adLoaded",{bubbles:!0,cancelable:!1}))}catch(e){}}(function(e,t){if(e&&e.contentDocument&&t)return(e=e.contentDocument.querySelector(".moat_trackable")).moatObject={adElement:t,adLoaded:1,creativeType:"banner",versions:"1"},e;__trcError("Error occurred while trying to prepare trackable object for MOAT")}(i,t))})):e.tag?i.src="javascript:'<html><head></head><body>"+e.tag+"</body></html>'":i.src="javascript:'<html><head></head><body>"+e+"</body></html>'"),i}(t[r],e);i.appendChild(n)}e.appendChild(i)}function o(e,t){e.id="script-tracking-"+t+"-"+parseInt(1e4*Math.random(),10),e.name=e.id,e.width=0,e.height=0,e.style.display="none"}TRC.TrackingScriptLoader={TRC_SCRIPT_TAGS_ATTRIBUTE:"viewability-tags",renderScriptTagIntoVideoBox:function(e,t,i){try{var r;e&&t&&t[this.TRC_SCRIPT_TAGS_ATTRIBUTE]&&0<t[this.TRC_SCRIPT_TAGS_ATTRIBUTE].length?(r=function(e,t){var i,r=[];try{for(var n=0;n<e.length;n++)i=TRC.TrackingScriptIdAppender&&TRC.TrackingScriptIdAppender.setTagDetails(e[n],t),r.push(i)}catch(t){return __trcError("Error occurred while trying to add tblUniqueTagId To Relevant Js Tags"),e}return r}(t[this.TRC_SCRIPT_TAGS_ATTRIBUTE],i),function(e,t){try{TRC.dom.addClass(e,t)}catch(e){__trcError("Error occurred while trying to add tblUniqueTagId To Relevant videoBoxContainer")}}(e,i),TRC.MobileSdk.isEnabled()||n(e,r)):__trcDebug("renderScriptTagIntoVideoBox: videoBoxContainer/recommendation is null or TRC_SCRIPT_TAGS_ATTRIBUTE not exist")}catch(e){__trcError("failed to add JS script tracking to single videoBoxContainer Container")}}}}(),function(){var t=new RegExp('(src|SRC)\\s*=\\s*"?(.+?)\\"|\\|s>'),o=[new e("adsafeprotected.com","ias_adpath",".{uniqueId}",function(e){var t=e.indexOf("><\/script>"),t=e.slice(0,t);return this.extractSrcValue(t)},!1,null),new e("cdn.doubleverify.com","btreg",null,function(e){return this.extractSrcValue(e)},!1,null),new e("z.moatads.com","taboolaTrackable",null,function(e){return this.extractSrcValue(e)},!0,function(){return'<div class="moat_trackable" style="display: none;"></div>'})];function e(e,t,i,r,n,o){this.tagDomain=e,this.tagParamName=t,this.uniqueParamFormat=i,this.tagUrlExtractor=r,this.hasTrackableObject=n,this.trackableObjectCreator=o}e.prototype.isMatchingTagDomain=function(e){return-1!==e.indexOf(this.tagDomain)},e.prototype.shouldAddTrackableObject=function(){return this.hasTrackableObject},e.prototype.appendId=function(e,t){try{var i=this.tagUrlExtractor(e);if(i)return t=this.formatUniqueId(t),e.replace(i,i+this.getUrlParamsSeparator(i)+this.tagParamName+"="+t)}catch(t){return __trcError("Error occurred while trying to append unique Id to a specific tag"),e}return e},e.prototype.extractSrcValue=function(e){e=t.exec(e);return e[e.length-1].replace(/^"+|"+$/g,"")},e.prototype.formatUniqueId=function(e){return this.uniqueParamFormat?this.uniqueParamFormat.replace("{uniqueId}",e):e},e.prototype.getUrlParamsSeparator=function(e){return-1!==e.indexOf("?")||-1!==e.indexOf("#")?"&":"?"},e.prototype.createTrackableObject=function(){return this.trackableObjectCreator()},TRC.TrackingScriptIdAppender={setTagDetails:function(e,t){if(!e||!t)return e;for(var i=0;i<o.length;i++){var r=o[i];if(r.isMatchingTagDomain(e)){var n={};return n.tag=r.appendId(e,t),r.shouldAddTrackableObject()&&(n.trackableObject=r.createTrackableObject()),n}}return e}}}(),(()=>{const r={};let n={},o=function(e){var t=e["feature"],i=r[t][a];return i?d(i,e):(__trcWarn(`TRC.TranslationsManager - language key: ${a} not recognized for feature ${t}.`),d(r[t].en,e))},a="en",i=!0,t=!1,s=!1;const l={};function c(e){a="tb-jp"===e?e.substr(e.indexOf("-")+1):e}function e(t){Object.keys(t).forEach(e=>{TRC.translationManager.register(e,t[e])})}function d(e,t){if(e){var{label:i,data:t}=t,i=e[i];return i?t?TRC.util.formatString(i,t):i:e}}function h(e){var t=e["feature"],i=d(n[t],e);return"string"!=typeof i&&(e.data||!i)?(__trcWarn(`TRC.TranslationsManager - language key: ${a} not recognized for feature ${t}.`),d(r[t].en,e)):i}TRC.translationManager={getLabel:e=>{var t=e.feature;if(n[t]||r[t]){var{cached:i,translation:t}=function(e){var{feature:t,label:i="",data:e=[]}=e,e=t+i+a+JSON.stringify(e);let r=!1;return l[e]?{cached:r=!0,translation:l[e]}:{cached:r,translation:e}}(e);if(i)return t;e=o(e);return e?l[t]=e:void 0}},setTranslations:e=>{if(!i&&!t){if(!e||!TRC.util.hasKeys(e))return __trcWarn("Dynamic Translation load is enabled but response is missing the map. Using embedded solution",null,1),void(i=!0);n=TRC.util.objectify(e),TRC.pageLevelFeaturesManager.pageLevelFeatures.stop_tslt=!0,t=!0,o=h}},getAll:e=>i?r[e][a]||r[e].en:n[e],register:(e,t)=>{r[e]=TRC.util.merge(t,r[e])},setLanguage:e=>{c(e)},init:(e=!1,t="en")=>{s||(c(t),s=!0,i=!e)}},TRC._translationQueue||(TRC._translationQueue=[]),TRC._translationQueue.forEach(e),TRC._translationQueue.push=e})(),(e=>{e.TRC=e.TRC||{};const l="disable";let c,d;const h={bulkingStrategy:{delay:(()=>{let o=[];return(t,e,i,r,n)=>{o.push(i),1===o.length&&setTimeout(()=>{var e=s(o);if((n=n||{}).bulkSize=o.length,TRC.util.isPercentEnabled(TRCImpl.global,"bulk-body-debug-sample-rate")){const o=e.events;TRC.RBoxUsage.logUsage("Debug body size of bulk events",{extraData:{name:"bulk_body_debug",method:"bulkPost",body:{type:typeof o,size:(o&&o.length)+0}}})}TRC.TRCLogger.post(t,"bulk",e,r,n),o=[]},a(e))}})(),sendFirstThenDelay:(()=>{const o={};return(e,t,i,r,n)=>{o[t]?h.bulkingStrategy.delay(e,t,i,r,n):((n=n||{}).bulkSize=1,TRC.TRCLogger.post(e,"bulk",s([i]),r,n),o[t]=!0)}})()}},a=e=>"number"==typeof TRCImpl.global[`bulk-${e}-events-delay`]?TRCImpl.global[`bulk-${e}-events-delay`]:"number"==typeof TRCImpl.global["bulk-events-delay"]?TRCImpl.global["bulk-events-delay"]:0,s=e=>(e.forEach(e=>{e.data=TRC.TRCLogger.formatParams(e.data)}),{sd:d,ui:c,events:__trcJSONify(e)});e.TRC.TRCBulkLogger=TRC.TRCBulkLogger={bulkPost:(e,t,i,r,n)=>{const o=TRCImpl.global[`bulk-${t}-events-strategy`]||l,a=(e=>{if(e&&e!==l){const l=h.bulkingStrategy[e];if("function"==typeof l)return l}return null})(o);var s;a?(d=d||i.sd,c=c||i.ui,a(e,t,(s=i,{type:t,timestamp:Date.now(),data:s}),r,n)):(TRC.TRCLogger.post(e,t,i,r,n),o!==l&&__trcWarn(`FailedSendingBulkEvent for eventType: ${t}, with strategy: ${o}`))}},window._trcIsUTactive&&(TRC.TRCBulkLogger.privateProps=h)})(window),(()=>{class o{constructor(e,t=!1){if(this.onlyClean=t,this.pm=TRC.pageManager,this.storageType=e.storageType||"session",this.localStorage=this.pm.getLocalStorageImplementation("strict-w3c-storage",this.storageType),this.currentSize=0,this.trcCache=null,this.trcCacheByPlacement=null,this.cacheSize=e.cacheSize||5,this.cacheTtl=e.ttl||12e5,this.disableFeedCache=e.disableFeedCache,this.trcCacheName=e.cacheName||"trc_cache",this.trcCacheByPlacementName=`${this.trcCacheName}_by_placement`,this.TRC_CACHE_ACTIVE_STORAGE_KEY="trc_cache_active",this.cacheUtils=new TRC.CacheUtils(this.localStorage,this.trcCacheName,this.cacheTtl),this.cacheByPlacementUtils=new TRC.CacheUtils(this.localStorage,this.trcCacheByPlacementName,this.cacheTtl),!this.localStorage)return{isValidCache:!1};this.isValidCache=!0,this.init()}extractAndResolveKey(e){e=TRC.TrcCache.extractKey(e);return this.getFeedRelatedKeyFromCache(this.trcCacheByPlacement,this.trcCache,e)||e}static extractKey(t){const e=t.it,i=t.ii,r=[];let n=`${e}=${i}`;for(let e=0;e<t.r.length;e++)r.push(`,${t.r[e].uip}=${t.r[e].uim}`);return o.sortByPlacements(r),n+=r.join(),TRC.isAMPSplitFeed&&void 0!==TRC.currentAmpFrameNum&&(!0===TRC.keyWriting?(n+=TRC.currentAmpFrameNum,TRC.keyWriting=!1):n+=TRC.feedContainerNum),n}cacheResponse(e,t){TRC.tlf&&console.time("in cacheResponse");t=this.setCacheResponse(e,t);return this.currentSize>this.cacheSize&&this.removeToLimit(),this.localStorage.setValue(this.trcCacheName,__trcJSONify(this.trcCache.getData())),this.localStorage.setValue(this.trcCacheByPlacementName,__trcJSONify(this.trcCacheByPlacement.getData())),TRC.tlf&&console.timeEnd("in cacheResponse"),t}setCacheResponse(t,e){const i=(new Date).getTime(),r=this.trcCache.getData();let n;try{if((n=r[t])&&n.r.trc.f)TRC.TrcCache.updateFeedConfigPropsInCache(e.trc.f,n.r.trc.f),TRC.TrcCache.addNewFeedCardsToCachedResponse(e.trc.vl,n.r.trc.vl);else{const r={s:i,r:e,vi:this.pm.getPageData()},n=!(!e.trc||!e.trc.cga||!e.trc.cga.selectiveCache);n&&(r.is=n),this.trcCache.setValue(t,r),o.splitKeyToPlacementLookupKeys(t).forEach(e=>{this.trcCacheByPlacement.setValue(e,t)}),this.currentSize++,this.setCacheClean(t)}}catch(e){return __trcError("setCacheResponse Error",e),!1}return!0}getCacheResponse(e){TRC.tlf&&console.time("in getCacheResponse");const t=this.trcCache.getValue(e);if(!t||this.isOverTtl(this.trcCache.getValue(e).s))return TRC.tlf&&console.timeEnd("in getCacheResponse"),null;{TRC.tlf&&console.timeEnd("in getCacheResponse");const t=this.trcCache.getValue(e);return{response:t.r,viewId:t.vi,isSelective:t.is}}}isOverTtl(e){this.cacheUtils.isOverTtl(e)}static splitKeyToPlacementLookupKeys(e){return"string"!=typeof e?[]:e.split(",").map((e,t,i)=>0!==t&&e?`${i[0]},${e}`:null).filter(e=>null!==e)}setCacheClean(e){this.cacheUtils.setCacheClean(e,this.trcCache),o.splitKeyToPlacementLookupKeys(e).forEach(e=>this.cacheByPlacementUtils.setCacheClean(e,this.trcCacheByPlacement))}cleanCache(e){this.cacheUtils.cleanCache(e,this.trcCache,this);var t=e.map(o.splitKeyToPlacementLookupKeys).reduce((e,t)=>e.concat(t),[]);this.cacheByPlacementUtils.cleanCache(t,this.trcCacheByPlacement,this)}removeKey(e){e=TRC.CacheUtils.removeKey(e,this.trcCache);!0===e&&this.currentSize--,o.splitKeyToPlacementLookupKeys(e).forEach(e=>{TRC.CacheUtils.removeKey(e,this.trcCacheByPlacement)})}getTrcCache(){return this.cacheUtils.getCache(this.pm)}getTrcCacheByPlacement(){return this.cacheByPlacementUtils.getCache(this.pm)}removeToLimit(t){t=t||TRC.util.keys(this.trcCache.getData());var i,r=this.currentSize-this.cacheSize;this.sortByStamp(t);for(let e=0;e<r;e++)i=t.shift(),this.removeKey(i)}static sortByPlacements(t){let i,r;for(let e=1;e<=t.length-1;++e){for(i=t[e],r=e;0<r&&t[r-1]>=i;)t[r]=t[r-1],--r;t[r]=i}}sortByStamp(t){let i,r;for(let e=1;e<=t.length-1;++e)for(r=e;0<r&&this.trcCache.getValue(t[r-1]).s>=i;)i=t[r],t[r]=this.keys[r-1],t[r]=i,--r}reloadCache(){this.trcCache=this.getTrcCache(),this.trcCacheByPlacement=this.getTrcCacheByPlacement()}init(){var e;TRC.tlf&&console.time("in init cache trc"),this.onlyClean?this.localStorage.removeKey(this.trcCacheName):(this.trcCache=this.getTrcCache(),this.trcCacheByPlacement=this.getTrcCacheByPlacement(),e=TRC.util.keys(this.trcCache.getData()),this.currentSize=e.length,this.cleanCache(e),this.currentSize>this.cacheSize&&this.removeToLimit(e),TRC.tlf&&console.timeEnd("in init cache trc"))}enableCacheViaStorageFlag(){this.localStorage.setValue(this.TRC_CACHE_ACTIVE_STORAGE_KEY,"true")}isCacheEnabledViaStorageFlag(){return"true"===this.localStorage.getValue(this.TRC_CACHE_ACTIVE_STORAGE_KEY)}getFeedRelatedKeyFromCache(e,t,i){var r=e.getData(),e=i.split(",");if(!(2<e.length||this.disableFeedCache)){t=t.getValue(i);return t?t.r&&t.r.trc&&t.r.trc.f?i:void 0:r[`${e[0]},${e[1]}`]}}static addNewFeedCardsToCachedResponse(e,r){e.forEach(t=>{let i;for(let e=0;e<r.length;e++)if(t.uip===r[e].uip){r[e]=t,i=!0;break}i||r.push(t)})}static updateFeedConfigPropsInCache(n,o){n&&o&&Object.keys(n).forEach(r=>{Object.keys(o).some(e=>{if(e!==r)return!1;{const t=n[r],i=o[e];return i.nb=t.nb,i.eof=t.eof,!0}})})}shouldRequestUseViewIdFromCache(e,t,i,r){return e&&e.response&&r.cachedResponses[t]&&(this.isCacheEnabledViaStorageFlag()||!r.global["disable-trc-cache-reuse-view-id"]&&i)}}TRC.TrcCache=o})((window,document)),(()=>{const e=TRC.TrcEventsLogger={};e.sendPlacementEvent=function(e,t,i,r,n,o,a,s){let l=!1;function c(){l||(l=!0,a&&a())}const d=t.trcResponse,h=t.globalTrcResponseJSON,u=d.ri,p=h.sd,m=t.placement,g=Math.floor(1e5*Math.random()),f={ri:u,sd:e.getSessionData(p),ui:TRC.pageManager.getUserId(),pi:e.getItemId(),wi:h.wi,pt:e.getItemType(),vi:t.cachedViewId||TRC.pageManager.getPageData()};t.cachedViewId&&(f.cache="1"),__trcCopyProps(r,f),o?(TRC.pConsole(m,"info",`sending event type: ${i}`,f,"object"),e.log1(i,f,n,c,m)):e.logTrcEvent(i,f,n,c);TRC.performance&&"card-visible"===i&&TRC.performance.mark(`11.0.${g}`,null,m,u,"card-visible",TRC.PerfEvenType.MARK),"number"==typeof s&&TRC.Timeout.set(c,s)}})(),window,document,TRC.TRCParser={parseModeName:function(e){return e.mode||null},parsePlacementName:function(e){return e.placement||null},parseABModeName:function(e,t){t=this.parseTestVariant(t);return null===t?null:"ab_"+e+"_"+t},parseBaseModeName:function(e){if("object"!=typeof e)return null;e=e["video-list"];return"object"==typeof e&&e["base-mode"]?e["base-mode"]:null},parseTestVariant:function(e){var t;return"object"!=typeof e?null:(t=e["video-list"],e.uvpw&&"object"==typeof t&&t["test-variant"]?t["test-variant"]:void 0===e["test-variant"]?null:e["test-variant"])},IsBaseModeAndABModeExist:function(e){var t=this.parseBaseModeName(e),e=this.parseTestVariant(e);return!(!t||!e)},parseBaseModeAndABModeName:function(e){var t=this.parseTestVariant(e),e=this.parseBaseModeName(e);return null!==e&&null!==t?"ab_"+e+"_"+t:null},getItemCount:function(e){return e["video-list"].video?e["video-list"].video.length:0},hasVariantMismatch:function(e){var t=e["test-variant"],e=e["video-list"]["test-variant"];return!(!t||!e)&&t!==e}},(()=>{let t="";const i="rbox:serving-piggyback-enabled";TRC.TrcRequestPiggyBack={setPiggyBackData:e=>{TRCImpl.global[i]&&e&&e.trc&&e.trc.srpg&&(t=e.trc.srpg)},getPiggyBackData:()=>TRCImpl.global[i]&&t?t:""}})(),function(win,doc){var TRANSPORT_FORM_ELEMENT="trc-transport-form-element";function initEventsRedirectParams(e,t,i){if(this.enableTrcEventRoute||e.trc.el2r&&TRC.util.isArray(e.trc.el2r)){try{e.trc.el2r&&(this.eventTypesToRoute=e.trc.el2r)}catch(e){__trcError("TRC.parseResponse: even list to route is not a valid json",e)}e.trc.route&&(t=e.trc.route.split(":")[1],i=this.global["trc-event-route-template"]||"<dc>-trc-events.taboola.com",this.trcEventRoute=i.replace("<dc>",t.toLocaleLowerCase()))}}var Manager=TRC.Manager=function(e,g){this.feedsManager=new window.TRC.FeedsManager(this),this.storiesManager=new window.TRC.StoriesManager(this),this.totalModeCounter=0,this.renderedModeCounter=0;this.numOfResetCssDivs=3,this.eventLogger=[],this.eventCounter={},this.NO_CONTENT={noItems:"NO_ITEMS",mute:"MUTE",error:"ERROR",timeOut:"TIMEOUT"},this.cloudinarySortedRatios,this.cachedResponses={},this.pendingRequests=[],this.iframePixelReporter,this.virtualPlacementsManager=new TRC.VirtualPlacementsManager,this.reset=function(){for(var e in this.reset=!0,TRC.dispatch("trcReset"),this.clearPageElements(),this.widgetContainerReset(),TRC.unifiedPlacementsProductsUtil.containersReset(this.feedsManager.feeds,"data-feed-main-container-id"),TRC.unifiedPlacementsProductsUtil.containersReset(this.storiesManager.stories,"data-stories-main-container-id"),TRC.callbacks)TRC.callbacks.hasOwnProperty(e)&&0<=e.search("recommendations")&&(TRC.callbacks[e]=function(){});this.global["enable-old-preloadRequestLoader"]&&this.preloadRequestLoader&&(TRC.Timeout.clear(this.preloadRequestLoader.timeout),this.clearPreloadRequestLoader());try{delete win.trc_video_id,delete win.trc_article_id,delete win.trc_item_url,delete win.trc_adPlayer}catch(e){win.trc_video_id=null,win.trc_article_id=null,win.trc_item_url=null,win.trc_adPlayer=null}finally{this.global["enable-old-preloadRequestLoader"]||this.clearPreloadRequestLoaderAndResetQueue()}},this.renderRBox=function(e){var t=TRC.dom.closest(e.getContainer(),".trc_rbox_container");e.load(function(){try{t.style.display="none"}catch(e){__trcError("Failed to hide main container on Error",e)}})},this.getConfig=function(e,t){return void 0!==e[t]?e[t]:void 0!==win["trc_"+t]&&null!=win["trc_"+t]?e[t]=win["trc_"+t]:(void 0!==this[t]&&this[t],e[t]=this[t])},this.getItemId=function(){var e=this.itemid;return win.trc_video_id||""==win.trc_video_id?e=win.trc_video_id:!win.trc_article_id&&""!=win.trc_article_id||(e=win.trc_article_id),""==e&&(e=this.getAutoItemMeta("item-id",null,this.urlPreNormalizer,this["normalize-item-id"])),this.itemid=e},this.getGlobalRequestId=function(){return TRC.events_ri},this.getGlobalSessionData=function(){return TRC.session_data},this.getSessionId=function(){return this.sessionId},this.getPlatformCode=function(){return TRC.platform_code},this.getReferrer=function(){return TRC.pageManager.getReferrer()},this.getItemUrlQueryString=function(){if(this.itemUrlQueryString)return this.itemUrlQueryString;var e,t=TRC.pageManager.getTopMostWindow(),i=this.global["item-query-string-max-length"]||400;return TRC.isAMP?(e=TRC.util.splitUrlParts(document.referrer),this.itemUrlQueryString=e.search||""):this.itemUrlQueryString=t.location.search,this.itemUrlQueryString.length>i&&(i=this.itemUrlQueryString.substring(0,i-1),this.itemUrlQueryString=i.substring(0,i.lastIndexOf("&"))),this.itemUrlQueryString},this.getListSize=function(e){return e.visible&&"rbox-only-video"!==e.mode?this.calculateAutoListSize(e):0},this.getListId=function(e){return"rbox-only-video"===e.mode?"rbox-invisible-widget":e.list_id||"rbox-tracking"===e.mode?e.mode:"rbox-"+(e.visible?e.origin.toString():"tracking")},this.getExtraResponsiveRecom=function(e){var t=this.getProperty(e.mode_name,"responsive-extra-columns"),e=this.getProperty(e.mode_name,"rows");return t?t*(e||1):0},this.getResponsiveRecommendations=function(e){for(var t,i,r,n=0,o="function"==typeof win.matchMedia,a=this.getMatchMediaRuleMaxWidth(e,o),s=0,l=e.length;s<l;s++)t=(r=e[s]).cells*r.rows,i=o&&(win.matchMedia("(min-width: "+r.minWidth+"px)"+(isNaN(r.maxWidth)?"":" and (max-width: "+r.maxWidth+"px)")).matches||win.matchMedia("screen and (min-height: "+r.minWidth+"px)"+(isNaN(r.maxWidth)?"":" and (max-height: "+r.maxWidth+"px)")+" and (orientation: portrait)").matches),(isNaN(a)||r.minWidth<=a||a<0||i)&&n<t&&(n=t);return{listSize:n,rule:n?r:null}},this.getMatchMediaRuleMaxWidth=function(e,t){var i;if(!t)return screen.width;for(var r=0,n=e.length;r<n;r++)if(i=e[r],win.matchMedia("screen and (min-device-width: "+i.minWidth+"px)"+(isNaN(i.maxWidth)?"":" and (max-device-width: "+i.maxWidth+"px)")).matches)return i.maxWidth},this.calculateAutoListSize=function(e){var t,i,r=this.getProperty(e.mode_name,"list-size"),n=0,o=this.getProperty(e.mode_name,"responsive-rules");if(this.getProperty(e.mode_name,"mode-is-responsive")){if(o&&o.length)return t=this.getResponsiveRecommendations(o),e.matched_rule=t.rule,t.listSize;n=this.getExtraResponsiveRecom(e)}if(r=r+n,e.autoSize=this.getProperty(e.mode_name,"auto-size"),!e.autoSize)return e.autoSize=!1,r;if(0==(i=Math.floor(0<e.container.clientWidth?e.container.clientWidth:e.container.offsetWidth)))return e.autoSize=!1,r;for(var a=this.getProperty(e.mode_name,"auto-size-rules"),s=0;s<a.length;s++)parseInt(a[s].minWc)<=i&&i<=parseInt(a[s].maxWc)&&(e.AutoSizeRule=a[s]);return e.AutoSizeRule?(e.rows=this.getProperty(e.mode_name,"rows"),e.rows<=1?this.modes[e.mode_name]["list-size"]=e.AutoSizeRule.n+n:this.modes[e.mode_name]["list-size"]=e.AutoSizeRule.n*e.rows+n):0},this.calculateAutoSizeParameters=function(e){var t;if(this.calculateAutoListSize(e),e.AutoSizeRule)for(var i=Math.floor(0<e.container.clientWidth?e.container.clientWidth:e.container.offsetWidth),r=e.AutoSizeRule.minWsRange;r<=e.AutoSizeRule.maxWsRange;r++)if(t=(i-(e.AutoSizeRule.n-1)*r)/e.AutoSizeRule.n,parseInt(t)==t){e.AutoSizeRule.Wi=t,e.AutoSizeRule.Ws=r;break}},this.getItemUrl=function(){var e=this.itemurl;return!win.trc_item_url&&null!=this.itemurl||(e=this.getAutoItemMeta("item-url",null,this.urlPreNormalizer,this["normalize-item-url"])),this.itemurl=e},this.urlPreNormalizer=function(e,t){var i,r=this["prenormalize-"+e];if(!r)return t;(r["truncate-at"]||[]).forEach(function(e){e=t.search(e);0<=e&&(t=t.substr(0,e))});var n,o=new win.TRC.URL(t);for(n in r)if(r.hasOwnProperty(n)){if(!r[n])continue;switch(n){case"host":delete o.host;break;case"trailing-dirsep":for(;"/"==o.pathname.substr(o.pathname.length-1);)o.pathname=o.pathname.substr(0,o.pathname.length-1);break;case"query":var a=[],s=o.search.replace(/^\?/,"").split("&"),l=(i="string"==typeof(i=r[n])?new RegExp(i):i)instanceof Array?function(e){for(var t=0;t<i.length;t++)if(e==i[t])return!0;return!1}:i instanceof RegExp?i.test.trcBind(i):function(){return!1};s.forEach(function(e){l(decodeURIComponent(e.split("=")[0]))&&a.push(e)}),o.search=(a.length?"?":"")+a.join("&");break;case"fragment":var c=o.hash.replace(/^#/,"");"string"==typeof(i=r[n])&&(i=new RegExp(i)),o.hash="",i instanceof RegExp&&i.test(c)?o.hash="#"+c:i instanceof Array&&i.forEach(function(e){0<=c.search(e)&&(o.hash="#"+c)})}}return o.pathname||(o.pathname="/"),"item-id"==e?o.toString().toLowerCase():o.toString()},this.genCallback=function(e){var t="recommendations_"+(TRC.callbacks.auto_gen_callback_seq=TRC.callbacks.auto_gen_callback_seq+1||1);return TRC.callbacks[t]=e,"TRC.callbacks."+t},this.formatTRCRequest=function(e,t,i){try{e.hasOwnProperty("rbox-tracking")&&Object.keys&&1<Object.keys(e).length&&delete e["rbox-tracking"],TRC.pageLevelFeaturesManager.disableFeatureOnIframe();var r=new this.GlobalRequetParams;return(!TRC.isOptim("geom")||i)&&TRC.isOptim("geom")||(this.setGlobalParmas(r,t),this.setGlobalParamsDecorators(r)),r.setPlacementsParamsArray(this.getPlacementsRequestParams(e,r,i)),TRC.pConsole("recommendations","debug","hook : normalize-request-param",this["normalize-request-param"].toString(),"string"),r.setAll(this["normalize-request-param"](r.getAll(),null)),this.setNewPlacementsInRequest(e,r),TRC.pConsole("recommendations","info","formatted request",r.getAll(),"object"),r.getAll()}catch(e){__trcError("TRC.formatTRCRequest",e)}},this.setGlobalParmas=function(e,t){var i=e,e=TRCImpl?TRCImpl.global:{};i.setItemId(this.getItemId()),i.setTemplate(TRC.pageTemplate),i.setItemType(t||this.getItemType()),i.setSessionData(this.getSessionData(TRC.session_data)),i.setUserId(this.getUserId(TRC.user_id)),e["store-userid-first-party-cookie"]&&i.setUserIdFirstPartyCookie(TRC.pageManager.getUserIdFirstPartyCookie()),i.setLoaderBuildTime(this.global.bakeTime),i.setViewId(TRC.pageManager.getPageData()),i.setClientVersion(this.version),i.setPublisherVersion(this.getPublisherVersion()),i.setItemUrl(this.getItemUrl()),i.setDeviceId(this.deviceId),i.setUnifiedId(this.unifiedId),i.setUserType(this.userType),i.setPaywall(this.paywall),i.setPremium(this.premium),i.setAdvertorialSource(this.advertorialSource),i.setExternalPageView(this.external_page_view),i.setBlockVideoLoader(this.blockVideoLoader?"1":"0"),i.setUserLanguages(this.getUserLanguages()),i.setExperimentVariant(this.getSystemFlag("experimentID")),this.consentState&&(i.setCmpStatus(this.consentState.cmpStatus),i.setGdprApplies(this.consentState.gdprApplies),i.setConsentDaisyBit(this.consentState.consentData),i.setConsentTcString(this.consentState.tcString,this.global["max-tcs-size"]),i.setGdprWasTimeout(this.consentState.wasTimeout)),TRC.consentData&&(i.setCmpStatus(TRC.consentData.cmpStatus),i.setGdprApplies(TRC.consentData.gdprApplies),i.setConsentDaisyBit(TRC.consentData.consentDaisyBit)),this.getUSPData(function(e){TRC.ccpaPs=e}),i.setCex(TRC.cexConsentData),i.setCcpaDns(TRC.ccpaCdns),i.setCcpaPs(TRC.ccpaPs),i.setExcludedPublishers(TRC.exp),i.setBlockThumbnailVideoLoader(this.blockThumbnailVideoLoader?"1":"0"),e["flc-enabled"]&&TRC.flc&&i.setFlc(TRC.flc.readFlcFromLocalStorage()),void 0!==navigator.connection&&(i.setConnectionType(navigator.connection.type),i.setConnectionSpeed(navigator.connection.effectiveType)),i.setPageLevelFeature(TRC.pageLevelFeaturesManager.pageLevelFeatures),i.setTrcPiggyBack(TRC.TrcRequestPiggyBack.getPiggyBackData())},this.setNewPlacementsInRequest=function(e,t){var i,r,n=t.getPlacementsParamsArray();if(e)for(var o=0,a=n.length;o<a;o++)i=n[o].uip,r=n[o].orig_uip,e[i]||(e[i]=e[r],e[r]=e[i],e[r].new_uip=i)},this.setRequestMetaData=function(e){var t,i={};for(t in this.tags&&this.tags.length&&(i.k=this.tags.join(",")),this.metadata)this.metadata.hasOwnProperty(t)&&this.metadata[t]&&(i[this.parseMetaName(t)]=this.metadata[t]);TRC.util.hasKeys(i)&&e.setMetaData(i)},this.parseMetaName=function(e){switch(e){case"user":return"u";case"uploader":return"U";case"content-rating":return"c";case"publish-date":return"t";case"duration":return"d";case"category":return"x";default:return e}},this.getPlacementsRequestParams=function(e,t,i){for(var r,n,o=[],a=TRC.util.keys(e),s=0;s<a.length;s++)(r=e[n=a[s]]).placement&&(this.setModeGlobalParamsDecorators(t,r),(n=this.createNewPlacementParams(r,e[n],i)).setAll(this["normalize-request-param"](n.getAll(),r.mode_name)),o.push(n.getAll()));return o},this.createNewPlacementParams=function(e,t,i){var r=new this.PlacementParams;return r.setListId(this.getListId(e)),r.setListSize(this.getListSize(e)),r.setUIMode(this.computeUIM(t)),r.setUIPlacement(e.placement),r.setOriginalUIPlacement(e.placement),this.setPlacementParamsDecorators(r,e,i),r},this.setPlacementParamsDecorators=function(e,t,i){var r=this.getProperty(t.mode_name,"required-attributes");"string"==typeof r&&"none"!=r&&e.setRequiredAttr(r),t.dfp&&t.dfp.campaign_id&&e.setNativeCampaignID(t.dfp.campaign_id),t.category&&e.setAllowedCategories(t.category),this.enablePlacementGeometry&&(TRC.isOptim("geom")&&!i||!TRC.isOptim("geom"))&&this.addGeometryPlacementData(e,t.container),t.exclude&&e.setExclusions(TRC.text.toStringList(t.exclude)),t.fi&&(TRC.isAMPSplitFeed&&(t.fi=this.ampSplitFeedManager.handleFeedIndexOffset(t)),e.setFeedIndex(t.fi)),t.fb&&(!TRC.isAMPSplitFeed||null!==(i=Number(this.ampSplitFeedManager.syncFb))&&(t.fb=i),e.setFeedBatch(t.fb)),t.fti&&e.setFeedTemplateId(t.fti)},this.addGeometryPageData=function(e,t){try{TRC.tlf&&console.time("page geometry"),e.setArticlePos(this.getGeometryPageData(t)),e.setScreenWidth(window.screen.availWidth),e.setScreenHeight(window.screen.availHeight),e.setBrowserWidth(TRC.dom.getWindowWidth()),TRC.tlf&&console.timeEnd("page geometry")}catch(t){e.bad=-5}},this.addGeometryExtendedPageData=function(t){try{TRC.tlf&&console.time("page geometry extended"),t.setScreenDensity(TRC.dom.getScreenDensity()),t.setBrowserHeight(TRC.dom.getWindowHeight()),t.setDocumentWidth(TRC.dom.getDocumentWidth()),t.setDocumentHeight(TRC.dom.getDocumentHeight()),TRC.tlf&&console.timeEnd("page geometry extended")}catch(e){t.bad=-6}},this.addGeometryPlacementData=function(e,t){try{TRC.tlf&&console.time("mode geometry - "+e.getAll().uim),e.setContainerPos(this.getPosFromDocTop(t,"top")),e.setContainerWidth(this.getModeWidth(t)),TRC.tlf&&console.timeEnd("mode geometry - "+e.getAll().uim)}catch(t){e.cd=-5}},this.getModeWidth=function(e){return e.getBoundingClientRect().width},this.getGeometryPageData=function(e){var t,i;switch(!0){case"function"!=typeof doc.querySelector:return-4;case"string"==typeof e:return this.computeGeometryPageData(e);case e instanceof Array&&0<e.length:for(i=0;i<e.length;i++)if(-1<(t=this.computeGeometryPageData(e)))return t;return-2;default:return-1}},this.computeGeometryPageData=function(e){try{var t=doc.querySelector(e);return t?this.getPosFromDocTop(t,"bottom"):-2}catch(e){return-3}},this.getPosFromDocTop=function(e,t){return e.getBoundingClientRect()[t]+TRC.dom.getPageVerticalScroll()},this.setGlobalParamsDecorators=function(e){TRC.pageManager.getValue("past-exclusions")&&e.setPastExclusions(TRC.pageManager.getValue("past-exclusions")),this.excludedItems&&e.setExclusions(TRC.text.toStringList(this.excludedItems)),this.getReferrer()&&e.setReferrer(this.getReferrer()),this.enablePageGeometry&&this.addGeometryPageData(e,this.global["page-geometry-selectors"]),this.enablePageGeometryExtended&&this.addGeometryExtendedPageData(e),this.setRequestMetaData(e),!0===this.global["send-item-query-string-in-req"]&&e.setItemUrlQueryString(this.getItemUrlQueryString()),TRC.networkId&&e.setNetworkID(TRC.networkId),this.tracking_codes&&e.setUTMParams(this.buildUTMParams(this.tracking_codes)),this.additional_data&&e.setAdditionalData(this.additional_data),TRC.rtbRealTimeUserId&&(TRC.performance&&TRC.performance.mark("RealTimeUserSyncMainStop",null,"RealTimeUserSyncMain",0,"RealTimeUserSyncMain",TRC.PerfEvenType.STOP),e.setRtui(TRC.rtbRealTimeUserId))},Manager.prototype.buildUTMParams=function(e){var t,i=[];for(t in e)e.hasOwnProperty(t)&&i.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return i.join("&")},this.setModeGlobalParamsDecorators=function(e,t){this.setPlayerGlobalParams(e,t),0==t.origin.toString().indexOf("h2")&&e.setItemId("_homepage_")},this.setPlayerGlobalParams=function(e,t){e.setItemId(t.item_id),e.setItemType(t.item_type),e.setItemUrl(t.item_url)},this.computeUIM=function(e){var t=e.mode_name;return t+(this.global["disable-network-uim"]||void 0===TRC.networkId?"":":pub="+TRC.networkId)+(-2<TRC.blocker.blockedState&&this.global["use-abp-uim"]?":abp="+TRC.blocker.blockedState:"")+(this.global["use-calibration-uim"]&&this.getProperty(t,"mode-is-responsive")?this.computeCalbUIM(e):"")},this.computeCalbUIM=function(e){if(!e.matched_rule)return"";var t=TRC.implClasses.TRCRBox,i=this.modes[e.mode_name],r=e.matched_rule,n="none"!=i["thumbnail-position"]&&i["thumbnail-position"]||void 0,t=n?TRC.math.round10(t.prototype.getRuleAspectRatio(r,"ratio")||t.prototype.getThumbAspectRatio(i,"ratio")||t.prototype.DEFAULT_THUMB_RATIO,-1):void 0,e=n?this.caclculateThumbnailWidth(e.container,r):void 0;return":type=responsive,rows="+r.rows+",cells="+r.cells+",thumb-pos="+n+(n&&"none"!=n?",thumb-ratio="+t+",thumb-width="+e:"")},this.caclculateThumbnailWidth=function(e,t){t=TRC.css.responsive.getRulePercentageWidth(t.cells,t.margin.h)/100;return e&&t?(e=parseInt(0<e.clientWidth?e.clientWidth:e.offsetWidth,10),TRC.math.roundByDecimal(e*t,50)):null},this.dispatchLoadRequest=function(e){this.global["enable-old-preloadRequestLoader"]?this.performDispatchLoadRequest(e):TRC.recoRequestsQueue.add(this.performDispatchLoadRequest.bind(this,e))},this.performDispatchLoadRequest=function(e,t){if(TRC.util.hasKeys(e))if(this.global["enable-old-preloadRequestLoader"]&&this.preloadRequestLoader&&!this.global["disable-simultaneous-req-protection"]){var i=arguments;TRC.Timeout.set(function(){i.callee.apply(this,[].slice.call(i).concat([!0]))}.trcBind(this),100)}else{var r,n=this.getProperty(null,"timeout")||8e3;if(this.preloadRequest=e,null!=this.getItemId()){this.delayedDispatchLoadRequest=null;try{if(this.formattedTRCRequest=r=this.formatTRCRequest(this.preloadRequest),TRC.isAMPSplitFeed&&this.ampSplitFeedManager.copyReqToReqForCacheKey(r),TRC.utm.push((new Date).getTime()-TRC.utm.start),this.isValidForCache(r.it)&&this.activateTrcCache(r,this.trcCache,this.trcCacheItemType,this.handleLoadResponse,this))return"function"==typeof t&&t(),void(TRC.usingCacheForPageRefresh=!this.trcCache.isCacheEnabledViaStorageFlag());r.cb=this.genCallback(this.handleLoadResponse.trcBind(this,r.cacheKey));var o=this.createRequestUrl(r),a=void 0===this.global["enable-trc-ajax"]||TRC.util.isTrue(this.global["enable-trc-ajax"]);TRC.workerInited||TRC.initWorkerIfAvailable(o,n),TRC.worker?this.callTrcByWorker(o,r,n):a?this.callTrcByAjax(o,r,n,t):this.callTrc(o,r,n,t),delete r.cacheKey}catch(e){__trcError("TRC.dispatchLoadRequest: Error in request processing",e)}}else this.delayedDispatchLoadRequest=this.dispatchLoadRequest.trcBind(this,e)}},this.isValidForCache=function(e){return!!(this.trcCache&&this.trcCache.isValidCache&&(this.trcCache.isCacheEnabledViaStorageFlag()||this.trcCacheItemType[e]&&(""===this.trcParams||TRC.pageManager.getForceTrcCache())))},this.activateTrcCache=function(e,t,i,r,n){if(!e.r&&!e.r.length)return!1;void 0===TRC.currentAmpFrameNum&&(TRC.currentAmpFrameNum=1);var o=t.extractAndResolveKey(e),a=t.getCacheResponse(o),s="c"===i[e.it];if(a&&a.response&&!this.cachedResponses[o]){if(s||t.isCacheEnabledViaStorageFlag()||a.isSelective)return this.setCachedResponse(a,r,n),this.cachedResponses[o]=!0;"d"===i[e.it]&&(e.cache=1,e.cacheKey=o)}else e.cacheKey=o,t.shouldRequestUseViewIdFromCache(a,o,s,this)&&(e.vi=a.viewId);return!1},this.setCachedResponse=function(e,t,i){e.response.cached=!0,e.response.cachedViewId=e.viewId,TRC.Timeout.set(t.trcBind(i,null,e.response,!0),0),TRC.pConsole("recommendations","warn","using cached recommendations","")},this.createRequestUrl=function(e){this.systemFlags&&this.systemFlags.loaderType&&(e.lt=this.systemFlags.loaderType);var t="";e.cache&&(t="&cache=1",delete e.cache);t=protocol+"//"+this.domain+"/"+encodeURIComponent(TRC.publisherId)+"/trc/3/json?tim="+encodeURIComponent(__trcClientTimestamp())+(this.trcByPass?"&trc_skip_failover=yes&":"&")+(this.enableTrcRoute&&this.trcRoute?"route="+this.trcRoute+"&":"")+(this.enableExperimentsVariantIdEvent&&this.experimentsVariantIdParamsStr?this.experimentsVariantIdParamsStr+"&":"")+(this.getLoaderTypesValue()?this.getLoaderTypesValue()+"&":"")+"data="+encodeURIComponent(__trcJSONify(e))+this.getOptOut()+TRC.pageManager.additionalDispatchParams()+t+(1<win.trc_debug_level?"&llvl="+win.trc_debug_level:"");return this.enableTrcEventRouteExperiment&&(t+="&trc_evi=21|1434|2154"),t},this.abortLoadRequest=function(e,t){for(var i in e?TRC.EventsAPI.dispatchNoContent(TRCImpl.NO_CONTENT.timeOut):TRC.EventsAPI.dispatchNoContent(TRCImpl.NO_CONTENT.error),this.preloadRequest)if(this.preloadRequest.hasOwnProperty(i)){if(0<=i.search("rbox-tracking"))continue;e&&(e=!1,__trcWarn("TRC.abortLoadRequest: pv3 timeout"),t&&(TRC.callbacks[t.replace("TRC.callbacks.","")]=function(){})),TRC.dispatch("onRboxFlowError",{placement:i});var r=this.preloadRequest[i];delete this.preloadRequest[i],r.loadRBoxRequestFailed=!0,this.internalDrawRBox(r)}this.clearPreloadRequestLoaderAndCallNext()},this.getOptOut=function(){return void 0!==this.userOptOut&&null!==this.userOptOut&&-1<[!0,"true",!1,"false"].indexOf(this.userOptOut)?"&user.opt_out="+this.userOptOut:""},this.handleLoadResponseFailure=function(e){TRC.performance&&TRC.performance.mark("5.1.8",null,"TrcPv3",this.lastReqId,"pv3call",TRC.PerfEvenType.STOP),null==this.preloadRequestLoader||!this.global["disable-simultaneous-req-protection"]&&e&&e.target&&this.preloadRequestLoader.src!==e.target.src||(__trcError("Server did not respond to loadRBox"),this.abortLoadRequest())},this.isActivePlacementData=function(e,t){return!e.new_uip||t===e.new_uip},this.loadEid=function(e){!this.global["eid-enabled"]||e.trc.DNT||e.trc.cm||TRC.ModuleLoader.load("tfa-eid",TRC.tfaEid,function(){})},this.handleLoadResponse=function(e,t,i){TRC.performance&&TRC.performance.mark("handleLoadResponseStart",null,"handleLoadResponse","","handleLoadResponse",TRC.PerfEvenType.START),this.global["disable-delta-mode-switch"]||TRC.deltaModeAdapter.switchModeNamesIfInDeltaTest(this,t),this.global["enable-mode-injection"]&&!this.global["css-isolation"]&&TRC.css.utils.bakeCss(t,this),TRC.ItemOverride.run(this.global["enable-item-override"],t);var r,n,o=TRCImpl?TRCImpl.global:{};try{if(TRC.tlf&&console.timeStamp("start handleLoadResponse(pv3)"),TRC.tlf&&console.time("in handleLoadResponse"),TRC.performance&&TRC.performance.mark("6.0.1",null,"TrcPv3","","pv3prase",TRC.PerfEvenType.START),TRC.pConsole("recommendations","info","recommendations response",t,t.trc.verbose?"verbose":"object"),TRC.pConsole("","time","recommendations loaded",""),TRC.utm.push((new Date).getTime()-TRC.utm.start),t&&t.trc&&t.trc.f)for(var a=Object.keys(t.trc.f),s=0;s<a.length;s++){var l,c,d=a[s];this.feedsManager&&this.feedsManager.feeds&&this.feedsManager.feeds[d]&&((l=this.feedsManager.feeds[d])&&l.infiniteScrollEngine&&l.infiniteScrollEngine.preventReachingTheFooter&&((c=l.infiniteScrollEngine.preventReachingTheFooter)&&c.lateRenderEnabled&&l.infiniteScrollEngine.preventReachingTheFooter.handleBatch(e,t)))}if(t&&t.trc&&t.trc.ui&&(this.watchedItem=t.trc.wi,this.globaleRequestId=t.trc.vl&&t.trc.vl.length?t.trc.vl[0].ri:this.globaleRequestId,TRC.events_ri=this.globaleRequestId,TRC.session_data=t&&t.trc?t.trc.sd:null,TRC.platform_code=t&&t.trc?t.trc.plc:null,TRC.user_id=t.trc.ui||null,TRC.isOptim("defer-events")?setTimeout(function(){TRC.eventDelegator.dispatch("user_id_ready")},0):TRC.eventDelegator.dispatch("user_id_ready"),TRC.eventDelegator.dispatch("user_id_ready"),n=TRC.util.parseTimeout(this.global["defer-cookie-sync"]),t.trc.stp&&(-1===n?TRC.dispatch("send_user_id",t.trc.stp):setTimeout(function(){TRC.dispatch("send_user_id",t.trc.stp)},n)),t.trc.jst&&(-1===n?TRC.dispatch("load_script_tags",t.trc.jst):setTimeout(function(){TRC.dispatch("load_script_tags",t.trc.jst)},n)),TRC.responseLoaded=!0,TRC.alertVVResponseLoaded&&TRC.alertVVResponseLoaded(TRC.version)),TRC.CustomModulesManager.getCustomModulesFromResponse(t),!(t&&t.trc&&t.trc.vl&&t.trc.vl.length))return __trcError("Invalid response from server: "+t),void this.abortLoadRequest();t.trc.tc&&!TRC.taboolaConsole&&TRC.Manager.prototype.loadExternal("//c2.taboola.com/console/console_loader.js","js"),TRC.UserIdMerger.notifyPossibleUserChange(this,TRC.publisherId,t.trc.ui,t.trc.sd),t.trc.cm||TRC.pageManager.storePublisherValue(TRC.publisherId,"session-data",t.trc.sd),TRC.TrcRequestPiggyBack.setPiggyBackData(t),TRC.translationManager.setTranslations(t.trc.tslt),t.trc.DNT&&"TRUE"===t.trc.DNT.toUpperCase()?(TRC.doNotTrack=!0,TRC.pageManager.removeAllKeys(),TRC.pageManager.removeUserId()):(TRC.pageManager.storeUserId(t.trc.ui,t.trc.cm),!0!==o["store-sessiondata-first-party-cookie"]&&"true"!==o["store-sessiondata-first-party-cookie"]||TRC.pageManager.storeSessionId(t.trc.sd,t.trc.cm),TRC.pConsole("page","debug","Storing user-id: "+t.trc.ui)),this.loadEid(t),e&&(this.trcCache.cacheResponse(e,t,TRC.pageManager.state.moreDispatchParams),this.cachedResponses[e]=!0),o["disable-page-level-feature"]||TRC.pageLevelFeaturesManager.getFeature(t),function(){this.parseResponse(t,i),TRC.util.isPercentEnabled(TRCImpl.global,"enable-feed-view-iframe-report")&&TRC.FeedViewInIframeReport.report(),this.global["enable-old-preloadRequestLoader"]&&this.checkPreloadRequest(r),this.global["smart-ellipsis"]&&TRC.dom.on(win,"resize",TRC.util.debounce(this._repaintEllipsis,500,!1,this)),this.clearPreloadRequestLoaderAndCallNext();try{TRC.SpotlightLoader.load(t)}catch(e){__trcError("Error while trying to load Spotlight")}TRC.tlf&&console.timeEnd("in handleLoadResponse"),TRC.tlf&&console.timeStamp("end handleLoadResponse"),TRC.performance&&TRC.performance.mark("6.0.9",null,"TrcPv3","","pv3prase",TRC.PerfEvenType.STOP)}.call(this),this.global["enable-old-preloadRequestLoader"]?this.handleLoadResponseFailure():this.checkPreloadRequest(),TRC.dispatch("trcResponseHandled"),TRC.performance&&TRC.performance.mark("handleLoadResponseStop",null,"handleLoadResponse","","handleLoadResponse",TRC.PerfEvenType.STOP)}catch(e){__trcError("Error in TRC.handleLoadResponse : ",e)}},this.parseResponse=function(e,t){var i,r,n,o,a,s={},l=e.trc.vl;this.yieldingEnabled=function(e,t){if((t?t.global:{})["disable-yield"])return!1;if(TRC.URL.prototype.getParameter.call(win.location.href,"yield-batch"))return!0;for(var i in e)if(void 0!==e[i].modeGroupOrder)return!0;return!1}(this.preloadRequest,this),this.testData=e.trc.td,this.experimentsData=e.trc.evi,this.experimentsHash=e.trc.evh,this.sourceCategory=e.trc.scat,e.trc.vpl&&(this.virtualPlacementsManager.response=e.trc.vpl);var c,d,h,u,p,m=this.parseClientGenericAction(e);if(this.initCcpa(m,e),this.initPubConfigGenericActionOverride(m),this.renderController.setLazyConfig(),this.renderController.setPlacementsConfig(e.trc.lzr),this.enableTrcRoute&&(a=e.trc.route)&&(this.trcRoute=a),this.enableLoaderCacheBuster)try{window.fetch&&window.Request?(c=TRC.PROTOCOL+"//cdn.taboola.com/libtrc/"+g.publisher+"/loader.js",e.trc.lfr&&(d=new Request(c,{cache:"reload",mode:"no-cors"}),fetch(d))):__trcDebug("Cache Bust not supported")}catch(e){__trcError("failed to run cache busting on this browser on: "+c,e)}for(initEventsRedirectParams.call(this,e,void 0,void 0),this.enableExperimentsVariantIdEvent&&this.experimentsData&&this.buildExperimentsVariantIdParams(),e.trc.s&&(p=l.filter(function(e){return!!e.stpl}),this.storiesManager.createNewStories(e.trc.s,p.length)),TRC.isAMPSplitFeed&&(this.ampSplitFeedManager.updateFeedIndexAndBatch(e),this.ampSplitFeedManager.cacheOrAssignFeedResponseData(e)),__trcCopyProps(e.trc.f,this.feedsManager.configs),this.renderController.addResponse(e),n=0;n<l.length;n++)if((o=l[n]).pcp&&TRC.isAMPSplitFeed&&this.ampSplitFeedManager.handlePubCardInResponse(e,n),i=o.uip,this.global["disable-skip-placement"]||!this.shouldSkipPlacement(o,e))if(this.sessionId=e.trc.si,void 0!==(r=this.getOrCreatePlacementData(i,o))){if(r.unifiedPlacement=o.uuip,r.globalTrcResponseJSON=e.trc,r.trcResponse=o,TRC.fallbackApi.shouldRenderPlacement(o,this.preloadRequest))if(0<=i.search("rbox-tracking"))r.response=this.formatPlacementRecommendations(e,n);else if(this.feedsManager.hasFeedConflict(i,o.fpl))__trcWarn("Feed conflict detected for '"+i+"' with feed placement '"+o.fpl+"' and test data '"+this.td+"' and '"+JSON.stringify(this.experimentsData)+"'"),TRC.EventsAPI.dispatchNoContent(TRCImpl.NO_CONTENT.noItems,i,!0);else{if(o.et&&(r.expandOptions=this.getExpandOptions(o)),r.isCache=t,e.cachedViewId&&(r.cachedViewId=e.cachedViewId),o.fpl){if(this.feedsManager.invalidFeedsMap[o.fpl])continue;if(this.feedsManager.handleFeedCardPlacement(o,r),!r.parentFeed)continue}else o.stpl&&this.storiesManager.handleStoryPlacement(o,r);if(TRC.isAMPSplitFeed&&!0===this.ampSplitFeedManager.shouldBreakForAMPSplitFeed)break;r.scriptData||r.publisherCardData||(o.es?TRC.ExternalContainerAppender.move(o.es,r.container):this.isStandaloneVideo(o)?(r.videoTagLoader=new TRC.VideoTagLoader(this,o.vtag,r,null,{"session-data":e.trc.sd,req:o.ri}),r.videoTagLoader.loadVideo()):(u=this.formatPlacementRecommendations(e,n,s),r.response=u,this.addFormattedResponseToWidgetAddedFromTrc(o,u,r.addWidget),r.response&&(r.dc&&delete r.dc,h=u.trc["video-list"],TRC.FloatingUnitGenerator.isFloatingUnit(h)?this.floatingUnitGenerator=new TRC.FloatingUnitGenerator(u,r,this):(h&&(r["container-selectors"]=h["container-selectors"],r["render-on-orig-container"]=h["render-on-orig-container"]),!o.fpl&&TRC.FeedViewWidgetLoaderManager.isFeedViewWidget(this,r)&&new TRC.FeedViewWidgetLoaderManager(r),this.initRBoxDrawingIfPlacementEligible(r)))))}}else __trcWarn("Invalid placement in server response",i);else __trcDebug("'parseResponse' : Skip on placement '"+i+"'");s.text&&(TRC.cssStack?TRC.cssStack.addStyle("override",s.text,TRC.styleInjected):TRC.dom.injectStyle(s.text)),this.yieldingEnabled&&(p=(this.global||{})["yield-delay"]||0,this.executeRBoxDrawQueue(p))},this.checkPreloadRequest=function(){var e,t,i=TRC.util.parseTimeout(this.global["defer-scripts-render"]);for(e in this.preloadRequest)this.preloadRequest.hasOwnProperty(e)&&(placementData=this.preloadRequest[e],this.placementShouldHaveResponseData(placementData,e)&&!this.placementHasResponseData(placementData)&&(__trcWarn("Server did not provide response for '"+e+'"!'),delete this.preloadRequest[e],this.shouldRetryFailedPlacementRequest(placementData)?this.retryFailedPlacementRequest(e,placementData):TRC.dispatch("onRboxFlowError",{placement:e})),this.isActivePlacementData(placementData,e)&&placementData.dc&&placementData.dc.renderAd(),placementData.scriptData&&(-1!==i?setTimeout(function(e,t){TRC.ScriptRenderer.render(t.scriptData,t)}.trcBind(null,placementData.scriptData,placementData),i):TRC.ScriptRenderer.render(placementData.scriptData,placementData)),placementData.iframeData)&&(t="tb-jp"===this.language?"ja-JP":this.language,TRC.taboolaConnect.createCard(placementData.container,placementData.iframeData.url,placementData.iframeData.config,placementData.placement,t))},this.initRBoxDrawingIfPlacementEligible=function(e){this.renderController.placementRender(e)},this.buildExperimentsVariantIdParams=function(){var i=this.global["rbox-reported-experiments-layers"]||[2,6];this.experimentsVariantIdParamsStr="",this.experimentsVariantIdParamsMap=Object.keys(this.experimentsData).reduce(function(e,t){return-1<i.indexOf(Number(t))&&(e["tvi"+t]=this.experimentsData[t].split("|")[1]),e}.trcBind(this),{}),this.experimentsVariantIdParamsStr=TRC.TRCLogger.formatParams(this.experimentsVariantIdParamsMap)},this.addFormattedResponseToWidgetAddedFromTrc=function(e,t,i){i&&(this.preloadRequest[e.uip].response=t)},this.getWidgetContainer=function(e,t){var i=e.container,r=!(0==e["render-on-orig-container"]);return doc.querySelectorAll?this.getOrCreateContainerForMoveOrAddWidget(e["container-selectors"],i,t)||(r?i:(__trcWarn("TRC.getWidgetContainer: Not falling back to original container even though could not find valid container when trying to move "+t),null)):i},this.getOrCreateContainerForMoveOrAddWidget=function(e,t,i){if(e)try{for(var r=0;r<e.length;r++){var n=this.getOrCreateContainer(e[r],t);if(n)return n}__trcWarn("TRC.extractValidContainer: Could not find any valid container when trying to move "+i)}catch(e){__trcError("TRC.extractValidContainer: Error occured while trying to find valid container",e)}return null},this.getOrCreateContainer=function(e,t){var i=e.container,r=e.shouldCreateContainer,i=doc.querySelectorAll(i);if(i&&1===i.length){TRC.util.isTrue(r)&&(e.shouldCreateContainer=!1,i=[this.createNewContainer(e.location,i[0],e.id)]);i=this.ensureValidContainer(i[0]);return i===t?t:i?(e.isFloatingUnit||this.cleanContainerClasses(t),i):void 0}},this.createNewContainer=function(e,t,i){var r=doc.createElement("div"),i=i||(new Date).getTime();return r.id=i,(e=this.getLocationContainer(e))&&t.insertAdjacentElement(e,r),r},this.getLocationContainer=function(e){switch(e){case"first":return"afterbegin";case"last":return"beforeend";case"before":return"beforebegin";case"after":return"afterend";default:return""}},this.cleanContainerClasses=function(e){e&&(e.className="")},this.addVariantProperties=function(e,t,i){i=t.trc.vl[i],e=e||{trc:{"video-list":{}}};return e.trc["test-variant"]=t.trc.t,e.trc.uvpw=t.trc.uvpw,e.trc["video-list"]["base-mode"]=i.m,e.trc["video-list"]["test-variant"]=i.t,e},this.formatPlacementRecommendations=function(e,t,i){var r,n=e.trc.vl[t],o=this.preloadRequest[n.uip]||{},a={trc:{req:n.ri,"session-id":e.trc.si,"session-data":e.trc.sd,"user-id":e.trc.ui,"watched-item":e.trc.wi,"country-code":e.trc.cc,"test-variant":e.trc.t,"is-provider":!!e.trc.iframeData,uvpw:e.trc.uvpw,placement:n.uip,mode:o.mode,DNT:e.trc.DNT,cpb:e.trc.cpb,sl:e.trc.sl,pi:e.trc.pi,bdp:e.trc.bdp,ppb:n.ppb,"test-data":e.trc.td,"placement-group":n.pg}};return(n.prty||n.caty)&&(a.trc.prty=n.prty,a.trc.caty=n.caty),e.cached&&(a.cached=!0,a.cachedViewId=e.cachedViewId),n.dc&&"tbl"!==n.typ?a.trc.tag=n:a.trc["video-list"]={video:n.v,"base-mode":n.m,"test-variant":n.t,"properties-override":n.po&&TRC.util.jsonParseCustomNative("{"+n.po+"}")||null,"container-selectors":n.cs,"next-up-widget":n.nup,"taboola-reminder":n.tr,"render-on-orig-container":n.rooc,vtag:n.vtag,pvc:n.pvc,"content-hub-forced-placement":!!n.chf},e.trc.cm&&(a.trc["consent-missing"]=e.trc.cm),(r=n.csso)&&(i.text=this.getModeOverrideCss(i,r,o)),n.fpl&&(a.feedPlacement=n.fpl),e.trc.evi&&(a.experimentsData=e.trc.evi),this.addVariantProperties(a,e,t)},this.getModeOverrideCss=function(e,t,i){if(-1<t.indexOf("$container_id$"))try{t=TRC.text.replaceAll(t,"\\$container_id\\$","#"+i.container.id,null)}catch(e){t=TRC.text.replaceAll(t,"\\$container_id\\$","",null)}return e.text?e.text+t:t},this.loadSpotlight=function(){document.querySelectorAll&&(this.spotlightLoaded?TRC.dispatch("trc_afterRboxDraw"):(this.spotlightLoaded=TRC.URL.prototype.switchProtocol.call(TRC.getBackstageUrl()+"resources/js/1.1.0/spotlight.js",protocol),this.loadExternal(this.spotlightLoaded,"js")))},this.setCssDivsIds=function(e,t){for(var i in e)e.hasOwnProperty(i)&&(e[i].cssDivsArr=[],i&&TRC.util.getRandomIds({arr:e[i].cssDivsArr,len:t,strength:4,prefix:"t",suffix:"_r"}))},this.setLBCssDivsIds=function(e,t){TRC.util.getRandomIds({arr:e.iframe,len:t,strength:4,prefix:"t",suffix:"_r"}),TRC.util.getRandomIds({arr:e.topDiv,len:t,strength:4,prefix:"t",suffix:"_r"})},this.getModesCache=function(){if(TRC.modesCache)return TRC.modesCache;for(var e in TRC.modesCache={},this.modes)this.modes.hasOwnProperty(e)&&(TRC.modesCache[e]={});return TRC.modesCache},this.sendUserIdTags=function(e){return this.sendExternalTracking(e.data,win.TRC.sharedObjects.loadedPixels)},this.initFrameworks=function(e){"amp"===e&&TRC.amp?TRC.amp.setAMPmodule(this):"mobile-sdk"!==e||(this.manualVisibilityTrigger=!0)},this.init=function(e){TRC.tlf&&console.timeStamp("init TRCImpl");var t,i=TRC.URL.prototype.getParameter.call(location.href,"trc_css-isolation")||TRC.pageManager.getValue("trc_css-isolation"),r=TRC.URL.prototype.getParameter.call(location.href,"trc_abp");__trcCopyProps(e,this),TRC.util.hasKeys(this["trc-network-mapping"])&&(TRC.networkId=TRC.publisherId,this.shiftPublisherId(this["trc-network-mapping"]),(t=this["network-pubs-global"])&&t[TRC.publisherId]&&TRC.util.merge(this.global,t[TRC.publisherId])),g.framework&&this.initFrameworks(g.framework),this.boxes={},this.unique_placement_count={},this.tags=[],this.metadata={},this.cssReset="yes"===i||"no"!==i&&!1!==this.global["css-isolation"],this.trcRequestDelay=this.global["trc-request-delay"]||500,this.trcByPass=!0===this["trc-skip-failover"],this.enablePageGeometry=this.global["has-page-geometry"],this.enablePageGeometryExtended=this.global["has-page-geometry-extended"],this.enableSlotsGeometry=this.global["has-slots-geometry"],this.enableSlotsSaliency=this.global["has-slots-saliency"],this.spatialSlotsThrottleMax=this.global["spatial-slots-throttle-max"],this.spatialSlotsThrottleTH=this.global["spatial-slots-throttle-th"],this.spatialSlotsThrottleTHPerPage=this.global["spatial-slots-throttle-th-per-page"],this.enablePlacementGeometry=this.global["has-mode-geometry"],this.maxRetriesPerFailedPlacementRequest=this.global["max-retries-per-failed-placement-req"]||1,i&&TRC.pageManager.storeValue("trc_css-isolation",i),doc.interestCohort&&this.global["flc-enabled"]&&TRC.ModuleLoader.load("flc",TRC.flc,function(){}),this.configForPostEvent={available:this.global["send-avail-as-post"],visible:this.global["send-event-as-post"],"new-visible":this.global["send-event-as-post"],explore:this.global["send-explore-as-post"],"content-hub-available":this.global["send-avail-as-post"],"content-hub-visible":this.global["send-event-as-post"],"content-hub-explore":this.global["send-explore-as-post"],perf:!0,"rtb-win":!0},this.configForGetEvent={available:this.global["send-avail-as-get"],visible:this.global["send-visible-as-get"],"new-visible":this.global["send-visible-as-get"],explore:this.global["send-explore-as-get"],"content-hub-available":this.global["send-avail-as-get"],"content-hub-visible":this.global["send-visible-as-get"],"content-hub-explore":this.global["send-explore-as-get"],perf:!1,"rtb-win":!1},this.trcRoute=null,this.enableTrcRoute=!0===this.global["enable-trc-route"],this.enableLoaderCacheBuster=!0===this.global["enable-loader-cache-buster"],this.eventTypesToRoute=this.global["event-types-to-route"]||[],this.enableTrcEventRoute=0<this.eventTypesToRoute.length,this.trcEventRoute=this.enableTrcEventRoute?this.global["default-event-route"]||!1:null,this.enableTrcEventRouteExperiment=!0===this.global["enable-trc-event-route-experiment"],this.enableExperimentsVariantIdEvent=this.global["enable-experiments-variant-id-event"],this.enableLoaderTypeEvent=this.global["enable-loader-type-event"],this.isDeferredAvailable=this.global["enable-deferred-available"],this.enableExpoImageTag=!1!==this.global["enable-expo-img-tag"],this.trcParams=TRC.pageManager.additionalDispatchParams(),this.trcCacheClean=this.global["clean-trc-cache"],function(e){try{var t=window.sessionStorage&&window.sessionStorage.getItem("tbl_disable_cache");e["enable-trc-cache"]&&(t||TRC.URL.prototype.getParameter.call(location.href,"tbl_disable_cache"))&&(window.sessionStorage.setItem("tbl_disable_cache","true"),e["enable-trc-cache"]=!1)}catch(e){}}(this.global),this.trcCache=this.global["enable-trc-cache"]?new TRC.TrcCache(this.global["trc-cache-conf"]||{}):null,this.trcCacheItemType=this.global["trc-cache-it"],this.disableReadMore=!1===this.global["enable-read-more"]||!1===this.disableReadMore,this.blockVideoLoader=this.shouldBlockVideoLoader(this.global["block-video-prob"]),this.blockThumbnailVideoLoader=this.shouldBlockThumbnailVideoLoader(this.global["block-thumbnail-video-prob"]),this.global["enable-consent"]&&this.setConsentConfig(this.consentConfigOverride,this.global["consent-presets"]),TRC.getBackstageUrl=function(){var e=TRC.backstageDomainPrefix||"backstage",t=TRC.backstageDomainSuffix||"taboola.com";return this["backstage-domain-url"]||"https://"+e+"."+t+"/backstage/"}.trcBind(this),r?this.setABPEmulation(r):this.global["abp-detection-enabled"]?TRC.blocker.blockedState=TRC.blocker.getBlockedState(this.global["abp-detection-class-names"]||["banner_ad","sponsored_ad"],this.global["abp-ignore-cached-state"]):TRC.blocker.blockedState=TRC.blocker.states.ABP_DETECTION_DISABLED,TRC.styleInjected||this.global["enable-mode-injection"]||this.bakedStyelInjection(),this.domain=TRC.shiftDomain(this.global["requests-domain"]||"trc.taboola.com"),this.origin instanceof Array||(this.origin=[this.origin]),null!=this.userMetadata?this.metadata.user=__trcJSONify(this.userMetadata):void 0===win.trc_user_id?this.metadata.user=this["get-user"]():this.metadata.user=win.trc_user_id;try{TRC.pConsole("page","debug","Hook : publisher_start",this["publisher-start"].toString()),this["publisher-start"]()}catch(e){__trcError("Error running publisher-start",e)}this.metadata.uploader=this["get-creator"](),this.tags=this["get-tags"]();try{this.metadata.v=this["get-views"](),this.metadata.r=this["get-rating"](),this.metafields.split(",").forEach(function(e){e&&(this.metadata[e]=this["get-"+e]?this["get-"+e]():this.readMetaTag(e))}.trcBind(this))}catch(e){}this.initFraudDetection(),TRC.listen("send_user_id",this.sendUserIdTags.trcBind(this)),TRC.listen("load_script_tags",this.loadScriptTags.trcBind(this)),window.context&&window.context.data&&window.context.data.feedContainerNum&&1<=parseInt(window.context.data.feedContainerNum,10)&&(TRC.isAMPSplitFeed=!0,TRC.feedContainerNum=window.context.data.feedContainerNum),TRC.mobile&&TRC.mobile.reportClick||TRC.isAMP||!TRC.util.isPercentEnabled(this.global,"spa-detection-enabled")||TRC.ModuleLoader.load("spa-detector",TRC.SpaDetector,function(){TRC.SpaDetector.getInstance(this)}.trcBind(this)),TRC.util.isPercentEnabled(this.global,"guarantee-card-clash-detection")&&TRC.ModuleLoader.load("card-interference-detector",TRC.CardInterferenceDetector,function(){}),TRC.pageManager.initReferrer(this.global),this.renderController=new TRC.RenderControl(this),this.init=function(){},TRC.isInteractive=!1,TRC.isPageLoaded=!1,this.trcCacheClean&&!this.trcCache&&(this.trcCache=new TRC.TrcCache({},!0),this.trcCache=null),this.listenToRenderedModes(),this.global["enable-always-track"]&&!TRC.pushedRboxTracking&&(function(){{var e,t,i;document.body&&(t=(e="rbox-tracking")+"-div",document.getElementById(t)||((i=document.createElement("div")).id=t,document.body.appendChild(i).style.display="none"),win._taboola.push({mode:e,container:t}))}}(),TRC.pushedRboxTracking=!0);r=TRC.util.isTrue(this.global["tm-dynamic-load"]);TRC.translationManager.init(r,this.language)},this.initFraudDetection=function(){this.shouldEnableFraudDetection()&&TRC.listen("trcResponseHandled",this.enableFraudDetection.trcBind(this))};var t=null;this.getExpoImageTag=function(){return null!==t||(t="",this.enableExpoImageTag&&null!==this.getSystemFlag("imageExternal")&&(t="tb_expo_img="+this.getSystemFlag("imageExternal"))),t};var i=null,r=null;return this.getLoaderTypesValue=function(){if(r)return i;if(i="",r={},!this.enableLoaderTypeEvent)return i;this.systemFlags.loaderType&&(i="lti="+this.systemFlags.loaderType,r.lti=this.systemFlags.loaderType);var t=this.systemFlags.eventExternal;return t&&Object.keys(t).forEach(function(e){i+=(i?"&":"")+"ex_"+e+"="+t[e],r["ex_"+e]=t[e]}),i},this.getLoaderTypesObject=function(){return r||this.getLoaderTypesValue(),r},this.ABPswap=function(e){return TRC.text.replaceAll(e,"\\."+TRC.SYNDICATED_CLASS_NAME+"|\\."+TRC.SPONSORED_CONTAINER_CLASS_NAME,function(e){return"."+this[e.slice(1)]},this.global["switch-abp-class"])},this.stackedStyleInjection=function(e,t,i,r){TRC.cssStack||(TRC.cssStack=new TRC.css.Stack({idPrefix:"tab_",stack:[{type:"default",cssText:e+(i||"")},{type:"mode",cssText:""},{type:"publisher",cssText:t},{type:"custom",cssText:""}]},r))},this.bakedStyelInjection=function(){var e=this.defaults.style+this.global.style;0<TRC.blocker.blockedState&&this.global["switch-abp-class"]&&(e=this.ABPswap(e)),this.cssReset?(this.setLBCssDivsIds(TRC.lightBoxCssReset={iframe:[],topDiv:[]},this.numOfResetCssDivs),this.setCssDivsIds(this.getModesCache(),this.numOfResetCssDivs),TRC.css.utils.setStyleElements(TRC.css.utils.setStyleTextIdPrefix(e,TRC.modesCache,TRC.lightBoxCssReset)),__trcInfo("CSS Isolation is active")):this.global["css-ie-split"]&&TRC.Browser.ieUpto(9)?TRC.css.utils.setStyleElements(TRC.css.utils.setStyleTextIdPrefix(e,null,TRC.lightBoxCssReset)):TRC.dom.injectStyle(e)},this.setABPEmulation=function(e){TRC.blocker.blockedState=e,this.global["abp-detection-enabled"]=!0,this.global["use-abp-uim"]=!0,TRC.pConsole("page","warn","emulating Ad Blocker Plus detection.")},this.setConsentConfig=function(e,t){TRC.consent.hasCMP()||(t&&TRC.consent.setPresets(t),e?TRC.consent.setConsentSource(TRC.util.merge({source:"iab_override"},e)):"function"==typeof window.__tcfapi?TRC.consent.setConsentSource({source:"tcf"}):"function"==typeof window.__cmp&&TRC.consent.setConsentSource({source:"iab"}))},this.countTrcContainerMissingError=0,this.ensureValidContainer=function(e,t){var i=e,r="trc_related_container",n=" "+r+" trc_spotlight_widget"+(TRC.dom.isInIframe(!0)?" trc_in_iframe":"")+("rtl"===this.direction?" tbl-rtl":"");if("string"==typeof e&&(e=document.getElementById(e),t&&!e))return null;if(null==(e="object"!=typeof e?null:e))return null!=(e=document.getElementById(r))?(e.className.search(r)<=0&&(e.origClassName=e.className),e.className+=n,e):(document.body&&this.countTrcContainerMissingError<2&&(this.countTrcContainerMissingError+=1,__trcError("Didn't manage to find TRC container for R-Box with ID "+i+" (retry="+this.countTrcContainerMissingError+") "+(TRC.dom.isReady?"(Document is Ready)":"")+"!")),null);if(e.className.match(r))return e;for(;e.hasChildNodes();)e.removeChild(e.firstChild);return e.origClassName=e.className,e.className+=n,e},this.getPublisherVersion=function(){try{if(0<=TRC.baseDomain.search(TRC.publisherId)){var e=TRC.baseDomain.split("/");if(""==e[e.length-1]&&e.pop(),e[e.length-1]!=TRC.publisherId)return e[e.length-1]}}catch(e){}return"default"},this.getItemType=function(){switch(TRC.listOrigin.getSource()){case"h":return"home";case"c":return"category";case"t":return"text";case"s":return"search";case"p":return"photo";case"o":return"other";case"z":return"content_hub";default:return"video"}},this.getUserLanguages=function(){return navigator.languages||(navigator.language?[navigator.language]:[])},this.playVideo=function(e){TRC.RBoxUsage.logUsage("TRCImpl.playVideo");try{TRC.dispatch("videoPlaying",e)}catch(e){__trcError("Problem in playVideo:videoPlaying",e)}var t;void 0!==e.id&&win.trc_video_id!=e.id&&(t=TRC.listOrigin.getSource(),void 0===e.url&&(win.trc_video_id||"v"!=t?e.url=null:(e.url=this.getAutoItemMeta("item-url",null,this.urlPreNormalizer,this["normalize-item-url"]),this.trc_url_auto_detection=e.id)),win.trc_video_id=e.id,win.trc_item_url=e.url,null!=this.delayedDispatchLoadRequest&&this.delayedDispatchLoadRequest())},this.setUser=function(e){this.userMetadata=e,TRC.pConsole("page","info","user meta data ",e,"object")},this.calculatePlacement=function(e){if(0<=e.mode_name.search("rbox-tracking"))return e.mode_name;e=e.mode_name+(e.category?"!"+e.category:"");return void 0!==this.unique_placement_count[e]&&(e+="#"+ ++this.unique_placement_count[e]),e},this.computeRBoxOptions=function(e){return(e="string"==typeof e?{mode_name:e}:e).pubOpts||(e.pubOpts=__trcCopyProps(e,{}),e.on_error&&TRC.fallbackApi.setOnError(e),e.tracking=(this.tracking||"")+(e.tracking||""),e.target_type=e.target_type||this.target_type||this.getProperty(e.mode_name,"target_type")||"video",e.origin=new TRC.ListOriginBuilder(TRC.listOrigin.getSource(),e.target_type),e.mode_name=!!e.mode&&e.mode||!!e.mode_name&&e.mode_name||!!win.trc_mode_name&&win.trc_mode_name||"rbox-"+e.origin.toString(),e.mode_name=e.mode_name.replace(/\s+/g,""),e.category=!!e.category&&e.category,e.link_target=e.link_target||this.link_target,void 0===e.placement&&(e.placement=this.calculatePlacement(e)),this.unique_placement_count[e.placement]=0,e.visible="boolean"==typeof e.visible?e.visible:!this.invisible,"string"==typeof e.autoplaybox&&(e.autoplaybox=document.getElementById(e.autoplaybox)),!e.player&&!0!==e.slider&&e.visible&&(e.original_container=e.container,e.container=this.ensureValidContainer(e.container)),e.addWidget||(e.response=null),e.computed=!0),e},this.listenToPlayer=function(r,n){var o="rtl"===this.direction?" tbl-rtl":"",a=TRC.listen("videoPlaying",function(e){var t,i=document.getElementById(e.player_id);i?TRC.dom.isAncestor(n,i,!0)?(a.remove(),TRC.listen("videoPlaying",function(e){e.player_id===n.player_id?t.style.left="-999999em":__trcError("TRC.listenToPlayer: wrong player_id was used for videoPlaying")}),n.player_id=e.player_id,r.container&&("string"==typeof r.container&&(r.container=document.getElementById(r.container)),t=r.container),t||(r.container=t=document.createElement("div")),t.className="trc_related_container trc-inplayer-rbox"+o,t.style.left="-999999em",t.style.width=i.offsetWidth+"px",t.style.marginTop="-"+i.offsetHeight+"px",n.appendChild(t),TRC.kaltura_API&&TRC.Browser.firefox&&(delete TRC.kaltura_API,TRC.kaltura_support()),r.getListId=function(){return"rplayer-after"},r.list_id=r.getListId(),r.loaded=!0,this.internalDrawRBox(r)):__trcError("TRC.listenToPlayer: object with player_id wasn't found in playerContainer that was passed"):__trcError("TRC.listenToPlayer: wrong player_id was passed")}.trcBind(this));TRC.listen("videoDone",function(e){var t=r.container;t?e.player_id===n.player_id?t.style.left="0":__trcError("TRC.listenToPlayer: wrong player_id was used for videoDone"):__trcError("TRC.listenToPlayer:videoDone mainContainer wasn't found")}),TRC.ooyala_API&&(TRC.listen("ooyala_stateChanged",function(e){var t=r.container;t&&(e.player_id===n.player_id?t.style.left="-999999em":__trcError("TRC.listenToPlayer: wrong player_id was used for ooyala_stateChanged"))}),TRC.listen("ooyala_activePanelChanged",function(e){var t=r.container;t&&(e.player_id===n.player_id?t.style.left="more"===e.activePanel||"info"===e.activePanel?"0":"-999999em":__trcError("TRC.listenToPlayer: wrong player_id was used for ooyala_activePanelChanged"))}))},this.loadRBoxDrawQueue=function(e){var t;!function(e){var t;return this.urlOverrideYieldArr||(t=TRC.URL.prototype.getParameter.call(win.location.href,"yield-batch"),this.urlOverrideYieldArr=t?t.split("|"):[]),-1<this.urlOverrideYieldArr.indexOf(e)}(e.placement)||(e.modeGroupOrder=0),this.itemsToDraw=this.itemsToDraw||[],this.itemsToDrawWithoutOrder=this.itemsToDrawWithoutOrder||[],void 0!==e.modeGroupOrder?(t=parseInt(e.modeGroupOrder,10),isNaN(t)?this.itemsToDrawWithoutOrder.push(e):(this.itemsToDraw[t]=this.itemsToDraw[t]||[],this.itemsToDraw[t].push(e))):this.itemsToDrawWithoutOrder.push(e)},this.executeRBoxDrawQueue=function(e,t){TRC.yieldingOrderArr=TRC.yieldingOrderArr||[];t=t||0;TRC.taboola_yield_report&&0==t&&(console.time("executeRBoxDrawQ"),performance.mark("start executeRBoxDrawQueue")),0<this.itemsToDrawWithoutOrder.length&&(this.itemsToDraw.push(this.itemsToDrawWithoutOrder),this.itemsToDrawWithoutOrder=[]);var i,r=this.itemsToDraw.shift();TRC.yieldingOrderArr.push(r?r.length:0),r&&(TRC.taboola_yield_report&&(console.time("executeRBoxDrawQueue batch-"+t),performance.mark("start executeRBoxDrawQueue batch-"+t)),i={},r.forEach(function(e){e=this.internalDrawRBox(e);e&&(i[e.id]=e)}.trcBind(this)),TRC.dispatch("batchrender",{data:{boxes:i}}),TRC.taboola_yield_report&&(console.timeEnd("executeRBoxDrawQueue batch-"+t),performance.mark("end executeRBoxDrawQueue batch-"+t)));var n=function(e,t){this.executeRBoxDrawQueue(e,t)}.bind(this);if(0<this.itemsToDraw.length)return r?void TRC.Timeout.set(function(){n(e,++t)},e):void n(e,++t);TRC.taboola_yield_report&&(console.timeEnd("executeRBoxDrawQ"),performance.mark("end executeRBoxDrawQueue"),performance.measure("total rbox rendering time","start executeRBoxDrawQueue","end executeRBoxDrawQueue"));r=0<t?{boxes:{}}:this;TRC.dispatch("allrender",{data:r})},this.internalDrawRBox=function(e){if(e.container=this.getWidgetContainer(e,"widget"),(e=this.computeRBoxOptions(e)).player){var t=e.player;return delete e.player,void this.listenToPlayer(e,document.getElementById(t))}if(t=e.container){if(e.visible||(t.style.display="none"),e.spotlight&&t.setAttribute("data-spotlight-publisher-id",e["spotlight-publisher-id"]),null!=e.response||!this.loadCalled||void 0===this.preloadRequest[e.placement]||(e.response=this.preloadRequest[e.placement].response,__trcCopyProps(e,this.preloadRequest[e.placement]),null!=e.response)){try{TRC.SpotlightLoader.registerOnMainContainer(t,e.response)}catch(e){__trcError("Error while trying to register Spotlight data on main container")}return e.trcResponse&&e.trcResponse.multiWidget?(TRC.multiWidget.init.call(this,{originalContainer:t,multiWidget:e.trcResponse.multiWidget,widgetOptions:e,initRBox:this.initRBox,trcManager:this}),this.boxes):this.initRBox.call(this,t,e)}this.preloadRequest[e.placement].container=e.container}},this.createCssResetContainers=function(e,t){for(var i,r=TRC.modesCache[t]?TRC.modesCache[t].cssDivsArr:[],n=e,o=r.length-1;0<=o;o--)(i=document.createElement("div")).id=r[o],i.className="trc_isolation",i.appendChild(n),n=i;return n},this.handleAMPSplitFeedRequest=function(e){var t;void 0===this.ampSplitFeedManager&&(t=1===parseInt(window.context.data.feedContainerNum,10),this.ampSplitFeedManager=new TRC.AmpSplitFeedManager(this,t)),!0!==this.ampSplitFeedManager.didInit&&this.ampSplitFeedManager.checkAMPSplitFeedFlagsAndInit(e,this.ampSplitFeedManager.initAmpSplitFeedIframe.trcBind(this.ampSplitFeedManager))},this.handlePushedRequest=function(e){this.global["disable-skip-load-request"]||!this.shouldSkipPushedRequest(e)?TRC.isAMPSplitFeed?this.handleAMPSplitFeedRequest(e):e[Object.keys(e)[0]]&&e[Object.keys(e)[0]].rec?(this.preloadRequest=e,this.handleLoadResponse("",e[Object.keys(e)[0]].rec)):this.dispatchRequestWrapper(e):__trcDebug("'handlePushedRequest' : Skip on push request")},this.dispatchRequestWrapper=function(e){this.loadCalled=!0,this.dispatchLoadRequest(e),this.isPendingLoadRBox=!1},this.dispatchCMPRequest=function(t,i){var r=parseInt(1e5*Math.random());this.pendingRequests[r]=1,TRC.cmp("getConsentData",null,function(e){t.pendingRequests[r]&&(delete t.pendingRequests[r],t.consentState=e,t.handlePushedRequest(i))}),this.global["max-wait-for-cmp"]&&TRC.Timeout.set(function(){t.pendingRequests[r]&&TRC.consent.setConsent({wasTimeout:!0})},this.global["max-wait-for-cmp"])},this.dispatchAmpConsentRequest=function(i,r){var n;!1===this.global["amp-consent-enable"]?i.handlePushedRequest(r):(n=parseInt(1e5*Math.random()),this.pendingRequests[n]=1,TRC.consent.getAMPConsent(function(e,t){i.pendingRequests[n]&&(delete i.pendingRequests[n],t&&(i.consentState=t,TRC.ccpaPs=t.ccpaString),TRC.cexConsentData=e,i.handlePushedRequest(r))}),this.global["max-wait-for-cmp"]&&TRC.Timeout.set(function(){i.pendingRequests[n]&&(i.consentState={wasTimeout:!0})},this.global["max-wait-for-cmp"]))},this.getUSPData=function(i){if(!1!==this.global["ccpa-ps-enable"]&&"function"==typeof __uspapi)try{__uspapi("getUSPData",1,function(e,t){t&&e&&i(e.uspString)})}catch(i){__trcError("Error while calling __uspapi for getUSPData",i)}},this.loadRBox=function(){var e,t=arguments,i=Array.prototype.slice.call(arguments),r={},n=this;if(!(i.length<1))try{if(this.isPendingLoadRBox||this.preloadRequestLoader)setTimeout(function(){this.loadRBox.apply(this,t)}.trcBind(this),100);else{i[0]instanceof Array&&(i=i[0]);for(var o=this.till_request_count=0;o<i.length;o++)i[o].player||this.till_request_count++;for(;i.length;)if((e=this.computeRBoxOptions(__trcCopyProps(i.shift(),{}))).player||!0===e.slider)!0===e.slider&&this.createContainerForEscalatorWidget(e),TRC.Timeout.set(a.trcBind(this,r,e),0);else{if(r[e.placement])throw new Error("Placement '"+e.placement+"' is not unique in loadRBox()!");r[e.placement]=e,function(e,t,i){if(this.isPendingLoadRBox=!0,e.container&&1===e.container.nodeType)this.till_request_count--;else{if(!TRC.dom.isReady)return!e.player&&e.visible&&(e.container=this.ensureValidContainer(e.original_container)),void TRC.Timeout.set(arguments.callee.trcBind(this,e,t,i),t);this.error("Invalid container provided for request "+e.placement+" ("+e.container+")!"),delete i[e.placement],this.till_request_count--}this.till_request_count<=0&&(TRC.isAMP?this.dispatchAmpConsentRequest(n,i):TRC.consent.hasCMP()?this.dispatchCMPRequest(n,i):this.handlePushedRequest(i))}.trcBind(this,e,40,r)()}}function a(e,t){var i={};i[t.placement]=t,this.handlePushedRequest(i)}}catch(t){throw __trcError("Error in loadRBox()",t),t}},this.parseLoaderParams(g),TRC.dom.init(),this.init(e),this},protocol=TRC.PROTOCOL;TRC.recoRequestsQueue=new TRC.TasksExecutorQueue,Manager.prototype["list-size"]=0,Manager.prototype.MAX_RETRY=2,Manager.prototype.drawInterface=!1,Manager.prototype.delayedDispatchLoadRequest=null,Manager.prototype.invisible=!1,Manager.prototype.excludedItems=null,Manager.prototype.boxes={},Manager.prototype.itemid=null,Manager.prototype.itemurl=null,Manager.prototype.tags=[],Manager.prototype.metadata={},Manager.prototype.userMetadata=null,Manager.prototype.loadCalled=!1,Manager.prototype.unique_placement_count={},Manager.prototype.trc_url_auto_detection=null,Manager.prototype.shiftPublisherId=function(e){var t,i,r,n,o,a=TRC.URL.prototype.getParameter.call(location.href,"taboola_sim_domain")||TRC.URL.prototype.getParameter.call(location.href,"fakeurl"),s=win.trc_item_url?new TRC.URL(win.trc_item_url):null,l=(a||(s?s.host:null)||location.host).toLowerCase(),c=(a||(s?s.href:null)||location.href).toLowerCase(),d=e[l],h=["m","mobile","www2","www3"];if(!d){for(__trcToArray(e,t=[]),t.sort(function(e,t){return e[0].length>t[0].length?-1:e[0].length<t[0].length?1:0}),i=0,r=t.length;i<r;i++)if(0<(n=t[i][0].toLowerCase()).indexOf("/")){if(c.match(n)){d=t[i][1];break}if(-1<n.indexOf("www.")&&c.match(n.replace("www.",""))){d=t[i][1];break}}else if(l.match(n)){d=t[i][1];break}if(!d&&l.indexOf("www.")<0){for(i=0,r=h.length;i<r&&(o=new RegExp("(https://|http://|^)"+h[i]+"."),!(d=e[l.replace(o,"www.")]));i++);d=d||e["www."+l]}}TRC.publisherId=d||"unknown-site-on-"+TRC.publisherId,TRC.pConsole("page","info","in 'Network-Solution' : publisher-id was set to - "+TRC.publisherId,"")},Manager.prototype.widgetContainerReset=function(){for(var e in this.boxes)if(this.boxes.hasOwnProperty(e)){var t,i=this.boxes[e].container;if(i){for(t=i.getAttribute(TRC.intersections.TARGET_ATTRIB),i.className=i.origClassName,delete i._trc_container,delete i._trc_anonbox;i.hasChildNodes();)i.removeChild(i.lastChild);t&&TRC.intersections.unobserveAll(t)}TRC.Timeout.reset(),TRC.Interval.reset(),delete this.boxes[e]}},Manager.prototype.getProperty=function(e,t,i){return(i&&i.hasOwnProperty(t)&&void 0!==i[t]?i:void 0===this.modes||void 0===this.modes[e]||void 0===this.modes[e][t]?this:TRC.propertiesOverride&&void 0!==TRC.propertiesOverride[t]?TRC.propertiesOverride:this.modes[e])[t]},Manager.prototype.runHook=function(e,t,i,r,n){var o=Array.prototype.slice.call(arguments,5),a=this.getFunction(t,i,r,o);return n&&TRC.CustomModulesManager.dispatchHook(i,t,e,o),a},Manager.prototype.getFunction=function(e,t,i,r){this.global["disable-runHook"]&&(r=Array.prototype.slice.call(arguments,3));var n=this.getProperty(e,t,i);if("function"==typeof n)return TRC.pConsole(e,"debug","Hook : "+t,n.toString(),"function"),n.apply(this,r)},Manager.prototype.readMetaTag=function(e){for(var t=document.head.getElementsByTagName("meta"),i=null,r=0;r<t.length;r++)if(t[r].name){if(t[r].name.toLowerCase()=="item-"+e.toLowerCase())return t[r].content;t[r].name.toLowerCase()==e.toLowerCase()&&(i=t[r].content)}return i},Manager.prototype.get_intent=function(){var e=win.location.href,t=TRC.pageManager.getPublisherValue(TRC.publisherId,"auto-play-intent");if(null!=t){t=t.split(":");if(parseInt(t[0])>(new Date).getTime()-3e4&&t[1]==this.getItemId())return void 0!==t[2]?t[2]:"n"}return 0<=e.search(this.getItemId())?"s":"u"},Manager.prototype["get-creator"]=function(){return this.readMetaTag("uploader")||this.readMetaTag("creator")},Manager.prototype["get-tags"]=function(){},TRC.implClasses=TRC.implClasses||{},Manager.prototype.logTrcEvent=function(e,t,i,r,n){var o,a,s,l,c=!1;if(t.tim=__trcClientTimestamp(),t.id=parseInt(1e4*Math.random()),t.llvl=win.trc_debug_level,this.global["tmp-disable-cv"]||(t.cv=this.version),this.configForPostEvent[e])try{if(o=this.global["send-full-list"]&&i?__trcCopyProps(t,{},i):t,s=this.shouldPostEventAsAjax(e),a=((l=this.global["rbox-ajax-post-events-full-rollout"])?"":"new-")+e,s)try{this.logPostTrcEventAsAjax(a,o)}catch(c){!1!==this.configForGetEvent[e]&&l||(t.fbe=1,this.logGetTrcEvent(a,t,r,i,n))}l||this.logPostTrcEvent(e,o)}catch(e){c=!0,__trcError("Error in sending post event",e)}!c&&!1===this.configForGetEvent[e]&&!0===this.configForPostEvent[e]||(!1!==this.configForGetEvent[e]&&!c||(t.fbe=1),this.logGetTrcEvent(e,t,r,i,n))},Manager.prototype.isValidForFill=function(e,t){try{if(("available"==e||"visible"==e)&&this.global["enable-get-fil"]&&this.global["get-fil-n-items"]>=this.preloadRequest[t].response.trc["video-list"].video.length)return!0}catch(e){}return!1},Manager.prototype.shouldEnableFraudDetection=function(){var e;return!!this.global.test_for_fraud&&0!==(e=this.global["fraud-traffic-percentage"])&&(e=e||10,Math.floor(100*Math.random())<=e)},Manager.prototype.enableFraudDetection=function(){if(!TRC.clickFraudDetect.isInitialized)try{TRC.clickFraudDetect.init(TRC.publisherId,TRC.pageManager.getUserId(),this.getReferrer(),this,TRC.pageManager.getPageData())}catch(e){__trcWarn("failed to init fraud detection")}},Manager.prototype.logGetTrcEvent=function(e,t,i,r,n){this.trcEventRoute&&-1<this.eventTypesToRoute.indexOf(e)?(this.logGetTrcEventImpl(this.trcEventRoute,e,t,i,r,n),this.enableTrcEventRouteExperiment&&this.logGetTrcEventImpl(this.domain,e,t,i,r,n)):this.logGetTrcEventImpl(this.domain,e,t,i,r,n)},Manager.prototype.logGetTrcEventImpl=function(e,t,i,r,n,o){var a,s,l;for(l in TRC.tlf&&console.time("in logGetTrcEvent - "+t),i)i.hasOwnProperty(l)&&(i[l]=this["normalize-log-param"](l,i[l]));t=this["normalize-log-param"]("type",t),this.isValidForFill(t,o)&&(i=__trcCopyProps(i,{},n));try{a=this.composeGetURL(t,i,e),s=new Image,this.eventLogger.push(s),r&&(s.onload=s.onerror=function(){if("function"==typeof r)try{r()}catch(e){__trcError("Error in event callback",e)}return!0}),s.src=a}catch(e){__trcError("Error in sending event",e)}TRC.tlf&&console.timeEnd("in logGetTrcEvent - "+t),TRC.performance&&"available"===t&&TRC.performance.mark("8.1.9"),TRC.performance&&"visible"===t&&TRC.performance.mark("9.1.9")},Manager.prototype.logPostTrcEvent=function(e,t){this.trcEventRoute&&-1<this.eventTypesToRoute.indexOf(e)?(this.logPostTrcEventImpl(this.trcEventRoute,e,t),this.enableTrcEventRouteExperiment&&this.logPostTrcEventImpl(this.domain,e,t)):this.logPostTrcEventImpl(this.domain,e,t)},Manager.prototype.logPostTrcEventImpl=function(e,t,i){TRC.tlf&&console.time("in logPostTrcEvent - "+t);var r,n,o=this["normalize-log-param"]("publisher",TRC.publisherId),a="tb-trc-transportFrame-"+(t=this["normalize-log-param"]("type",t))+"-"+i.id,s=this.getTransportForm(a),a=document.getElementById(a);for(n in i)i.hasOwnProperty(n)&&((r=doc.createElement("input")).name=("_"==n.charAt(0)?n.substr(1):n).replace(/unescape-/g,""),r.type="hidden",r.value=this["normalize-log-param"](n,i[n]),s.appendChild(r));if(!a)throw new Error("post iframe can be created");TRC.Browser.ie&&((l=a.contentDocument||a.contentWindow.document).write(""),l.close());var l=[];this.trcByPass&&l.push("trc_skip_failover=yes"),this.enableTrcRoute&&this.trcRoute&&l.push("route="+this.trcRoute),this.enableExperimentsVariantIdEvent&&this.experimentsVariantIdParamsStr&&l.push(this.experimentsVariantIdParamsStr),this.getLoaderTypesValue()&&l.push(this.getLoaderTypesValue()),s.action=protocol+"//"+e+"/"+o+"/log/3/"+escape(t)+(0<l.length?"?"+l.join("&"):""),s.submit(),TRC.tlf&&console.timeEnd("in logPostTrcEvent - "+t),TRC.performance&&"available"===t&&TRC.performance.mark("8.2.9"),TRC.performance&&"visible"===t&&TRC.performance.mark("9.2.9")},Manager.prototype.getTransportForm=function(e){var t,i;return(i=doc.createElement("form")).className="trc-hidden "+TRANSPORT_FORM_ELEMENT,i.target=e,i.style.display="none",i.method="post",doc.body.appendChild(i),(t=doc.createElement("span")).className=TRANSPORT_FORM_ELEMENT,t.innerHTML='<iframe class="trc-hidden" id="'+e+'" name="'+e+'" width="0" height="0" style="display:none"></iframe>',doc.body.appendChild(t),i},Manager.prototype.shouldPostEventAsAjax=function(e){var t=this.global["rbox-post-events-as-ajax"];return t&&("boolean"==typeof t||-1!==t.indexOf(e))},Manager.prototype.logPostTrcEventAsAjax=function(i,r){var e=!1,t=win.XDomainRequest||TRC.Browser.ieUpto(9);if(!t)try{this.queryParamsObj=__trcCopyProps(this.experimentsVariantIdParamsMap,{}),this.enableTrcRoute&&this.trcRoute&&(this.queryParamsObj.route=this.trcRoute),__trcCopyProps(this.getLoaderTypesObject(),this.queryParamsObj);function n(e,t){TRC.util.isPercentEnabled(e.global,"enable-bulk-events")&&e.global["bulk-"+i+"-events-strategy"]?TRC.TRCBulkLogger.bulkPost(t,i,r,null,e.queryParamsObj):TRC.TRCLogger.post(t,i,r,null,e.queryParamsObj)}this.trcEventRoute&&-1<this.eventTypesToRoute.indexOf(i)?(n(this,protocol+"//"+this.trcEventRoute),this.enableTrcEventRouteExperiment&&n(this,protocol+"//"+this.domain)):n(this,protocol+"//"+this.domain)}catch(i){e=!0,__trcError("Error in sending post event as ajax",i)}(t||e)&&this.logPostTrcEvent(i,r)},Manager.prototype.log1=function(e,t,i,r,n,o){var a=e+":"+(n||t.li+t.ii)+t.ri;t.ii&&t.it&&(a=e+":"+t.li+t.ii+t.ri),this.eventCounter[a]?this.eventCounter[a]++:("function"==typeof o?o():this.logTrcEvent(e,t,i,r,n),this.eventCounter[a]=1)},Manager.prototype.loadExternal=function(){return TRC.net.loadScript.apply(null,arguments)},Manager.prototype.parseLoaderParams=function(e){for(var t in e)if(e.hasOwnProperty(t)){var i=e[t];if("unknown"==i)continue;switch("auto"==i&&(i=""),t){case"visible":this.invisible=!("boolean"==typeof i?i:"false"!=i);break;case"video":win.trc_video_id=i,TRC.listOrigin.setSource("v");break;case"url":win.trc_item_url=i;break;case"article":win.trc_article_id=i,TRC.listOrigin.setSource("t");break;case"category":win.trc_article_id=i,TRC.listOrigin.setSource("c");break;case"home":case"homepage":win.trc_article_id=i,TRC.listOrigin.setSource("h");break;case"search":win.trc_article_id=i,TRC.listOrigin.setSource("s");break;case"photo":win.trc_article_id=i,TRC.listOrigin.setSource("p");break;case"other":win.trc_article_id=i,TRC.listOrigin.setSource("o");break;case"content_hub":win.trc_article_id=i,TRC.listOrigin.setSource("z");break;case"link_target":this.link_target=i;break;case"video_source":this.video_source=i;break;case"callback":this.video_player_callback=i;break;case"player_reference":this.video_player_reference=i;break;case"target_type":TRC.listOrigin.setTarget(this.target_type=i);break;case"exclude":this.excludedItems=i instanceof Array?i:[i];break;case"tracking":this.tracking=i;break;case"referrer":TRC.pageManager.updateReferrer(i);break;case"amp_disable_resize":this.amp_disable_resize=i;break;case"user_opt_out":this.userOptOut=!(!i||"false"==i||"0"==i)||i;break;case"device":this.deviceId=i;break;case"unified_id":this.unifiedId=i;break;case"user_type":this.userType=i;break;case"paywall":this.paywall=i;break;case"premium":this.premium=!!i;break;case"advertorial_source":this.advertorialSource=i;break;case"external_page_view":this.external_page_view=i;break;case"tracking_codes":this.tracking_codes=i;break;case"additional_data":this.additional_data=i;break;case"framework":this.framework=i;break;case"iab_alternative_config":this.consentConfigOverride=i;break;case"consentMessage":TRC.consent.setConsent(i)}}},Manager.prototype.getItemByMetaValue=function(e){for(var t=document.head.getElementsByTagName("meta"),i=0;i<t.length;i++)if(t[i].name==e)return t[i].content;return null},Manager.prototype.getItemByCanonicalValue=function(e,t){for(var i=document.head.getElementsByTagName("link"),r=0;r<i.length;r++)if("canonical"==i[r].rel)return t.call(this,e,i[r].href);return null},Manager.prototype.getItemByOgValue=function(e,t){for(var i=document.head.getElementsByTagName("meta"),r=0;r<i.length;r++)if("og:url"==i[r].getAttribute("property")&&5<i[r].content.length)return t.call(this,e,i[r].content);return null},Manager.prototype.getItemByLocationValue=function(e,t){return t.call(this,e,TRC.pageManager.getCurrentURL().toString())},Manager.prototype.getItemByParamUrl=function(e,t){return!win.trc_item_url||"item-id"!=e&&"item-url"!=e?null:t.call(this,e,win.trc_item_url)},Manager.prototype.getAutoItemMeta=function(e,t,i,r){var n,o,a={paramUrl:"getItemByParamUrl",meta:"getItemByMetaValue",canonical:"getItemByCanonicalValue",og:"getItemByOgValue",location:"getItemByLocationValue"},s=this.global["url-extract-order"]||["paramUrl","meta","canonical","og","location"],l=0;for(s.push("location"),t=t?i.call(this,e,t):null;l<s.length&&TRC.util.isEmptyString(t);){o=s[l],n=this[a[s[l]]];try{t=n?n.call(this,e,i):null}catch(e){if(!this.global["tmp-catch-item-url-err"])throw new Error(e.message);t=""}l++}return"item-url"==e&&"getItemByParamUrl"==o?t:r?r.call(this,t,win.trc_video_id?"video":"text","getItemByLocationValue"!=o):t},Manager.prototype.getEventParams=function(){return{ri:TRC.events_ri,sd:this.getSessionData(TRC.session_data),ui:TRC.pageManager.getUserId(),pi:this.getItemId(),wi:this.watchedItem||null,pt:this.getItemType(),vi:TRC.pageManager.getPageData()}},Manager.prototype.sendEvent=function(e,t,i,r,n,o){function a(){s||(s=!0,n&&n())}var s=!1,l=this.getEventParams();__trcCopyProps(t,l),r?(this.log1(e,l,i,a,this.placement),TRC.pConsole("page","info","event type : "+e+" - this event will be sent only once for the widget",l,"object")):(this.logTrcEvent(e,l,i,a),TRC.pConsole("page","info","sending event type : "+e,l,"object")),"number"==typeof o&&TRC.Timeout.set(a,o)},Manager.prototype.getSystemFlag=function(e){return this.systemFlags&&void 0!==this.systemFlags[e]?this.systemFlags[e]:null},Manager.prototype.getSessionData=function(e){var t=TRC.pageManager.getPublisherValue(TRC.publisherId,"session-data");return!0!==this.global["prefer-response-session-data"]&&t||!e?t:e},Manager.prototype.getUserId=function(e){return TRC.pageManager.getValue("user-id")||e||null},Manager.prototype.GlobalRequetParams=function(){var i={id:parseInt(1e3*Math.random())};this.setItemId=function(e){e&&(i.ii=e)},this.setTemplate=function(e){e&&(i.tmpl=e)},this.setItemType=function(e){e&&(i.it=e)},this.setSessionData=function(e){i.sd=e},this.setUserId=function(e){i.ui=e},this.setLoaderBuildTime=function(e){e&&(i.lbt=e)},this.setUserIdFirstPartyCookie=function(e){i.uifp=e},this.setUserLanguages=function(e){e&&(i.ul=e)},this.setCmpStatus=function(e){"number"==typeof e&&(i.cmps=e)},this.setConsentDaisyBit=function(e){"string"==typeof e&&(i.cdb=e)},this.setConsentTcString=function(e,t){"string"==typeof e&&(!t||e.length<t)&&(i.tcs=e)},this.setCmpStatus=function(e){"number"==typeof e&&(i.cmps=e)},this.setGdprApplies=function(e){"boolean"==typeof e&&(i.ga=e)},this.setGdprWasTimeout=function(e){"boolean"==typeof e&&(i.gwto=e)},this.setCex=function(e){e&&"string"==typeof e&&(i.cex=e)},this.setCcpaDns=function(e){e&&"string"==typeof e&&(i.ccpa_dns=e)},this.setCcpaPs=function(e){e&&"string"==typeof e&&(i.ccpa_ps=e)},this.setExcludedPublishers=function(e){e&&"string"==typeof e&&(i.exp=e)},this.setViewId=function(e){i.vi=e},this.setClientVersion=function(e){i.cv=e},this.setPublisherVersion=function(e){i.uiv=e},this.setItemUrl=function(e){e&&(i.u=e)},this.setPlacementsParamsArray=function(e){i.r=e},this.getPlacementsParamsArray=function(){return i.r},this.setExperimentVariant=function(e){e&&(i.pev=e)},this.setPastExclusions=function(e){i.px=e},this.setScreenHeight=function(e){i.sh=e},this.setScreenWidth=function(e){i.sw=e},this.setBrowserWidth=function(e){i.bw=e},this.setArticlePos=function(e){i.bad=e},this.setScreenDensity=function(e){i.sde=e},this.setBrowserHeight=function(e){i.bh=e},this.setDocumentWidth=function(e){i.dw=e},this.setDocumentHeight=function(e){i.dh=e},this.setExclusions=function(e){i.ex=e},this.enableTrcTesMode=function(){i.y=!0},this.setReferrer=function(e){i.e=e},this.setMetaData=function(e){i.m=e},this.setItemUrlQueryString=function(e){e&&(i.qs=e)},this.setNetworkID=function(e){i.nsid=e},this.getId=function(){return i.id},this.setAll=function(e){e&&(i=e)},this.getAll=function(){return i},this.setRtui=function(e){i.rtui=e},this.setDeviceId=function(e){e&&(i.did=e)},this.setUnifiedId=function(e){e&&(i.unuid=e)},this.setUserType=function(e){e&&(i.usrtyp=e)},this.setPaywall=function(e){e&&(i.pywl=e)},this.setPremium=function(e){e&&(i.prem=e)},this.setAdvertorialSource=function(e){e&&(i.advrtsrc=e)},this.setExternalPageView=function(e){e&&(i.extpvid=e)},this.setUTMParams=function(e){e&&(i.pp=e)},this.setBlockVideoLoader=function(e){e&&(i.bv=e)},this.setFlc=function(e){e&&(i.fl=e)},this.setBlockThumbnailVideoLoader=function(e){e&&(i.btv=e)},this.setConnectionType=function(e){e&&(i.con=e)},this.setConnectionSpeed=function(e){e&&(i.cos=e)},this.setAdditionalData=function(e){e&&(i.ad=e)},this.setPageLevelFeature=function(e){e&&0<Object.keys(e).length&&(i.plf=e)},this.setTrcPiggyBack=function(e){e&&(i.srpg=e)}},Manager.prototype.PlacementParams=function(){var t={};this.setListId=function(e){t.li=e},this.setListSize=function(e){t.s=e},this.setUIMode=function(e){t.uim=e},this.setUIPlacement=function(e){t.uip=e},this.setContainerPos=function(e){t.cd=e},this.setContainerWidth=function(e){t.mw=e},this.setOriginalUIPlacement=function(e){t.orig_uip=e},this.setRequiredAttr=function(e){t.ra=e},this.setAllowedCategories=function(e){t.ac=e},this.setNativeCampaignID=function(e){t.nvcid=e},this.setExclusions=function(e){t.ex=e},this.setAll=function(e){t=e},this.getAll=function(){return t},this.setFeedBatch=function(e){t.fb=e},this.setFeedTemplateId=function(e){t.fti=e},this.setFeedIndex=function(e){t.fi=e}},Manager.prototype.log=__trcLog,Manager.prototype.error=__trcError,Manager.prototype.warn=__trcWarn,Manager.prototype.info=__trcInfo,Manager.prototype.debug=__trcDebug,Manager.prototype._repaintEllipsis=function(e){e=e.data&&e.data.boxes;TRC.Ellipsis.doEllipsis(TRC.util.filterObj(function(e){return e.shouldUseSmartEllipsis()},e||this.boxes))},Manager.prototype.sendExternalTracking=function(e,t){if(!TRC.botDetected){var i,r=this.generatePixelsMarkup(e,t),t=this.shouldWritePixelsToIframe(e);try{r&&((t=t&&this.appendPixelsToIFrame(r))||((i=doc.createElement("span")).innerHTML=r,doc.body.appendChild(i)))}catch(e){__trcError("Error in Manager.sendExternalTracking")}return r}},Manager.prototype.shouldWritePixelsToIframe=function(e){return e&&this.isInternalPixels(e)||void 0===this.global["disable-iframe-for-tracking-pixel"]||!this.global["disable-iframe-for-tracking-pixel"]},Manager.prototype.isInternalPixels=function(e){for(var t=0;t<e.length;t++)if(-1<this.stripDomainFromPixel(e[t]).indexOf("taboola.com"))return!0;return!1},Manager.prototype.stripDomainFromPixel=function(e){e=e.replace(/(http[s]*:\/\/)|(^\/\/)/,"");return e=-1<(e=-1<e.indexOf("?")?e.substring(0,e.indexOf("?")):e).indexOf("/")?e.substring(0,e.indexOf("/")):e},Manager.prototype.loadScriptTags=function(e){for(var t,i=e.data,r=win.TRC.sharedObjects.loadedScripts,n=[],o=0;i&&o<i.length;o++)if((t=i[o])&&!r[t])try{r[t]=!0,t=TRC.URL.prototype.switchProtocol.call(t,TRC.PROTOCOL),n.push(TRC.net.loadScript(t,"js",null,null,!0))}catch(e){__trcWarn("Error appending script at position "+o+", url="+t,e)}return n},Manager.prototype.listenToRenderedModes=function(){TRC.eventDelegator.subscribe("onrender",function(){this.renderedModeCounter++,this.renderedModeCounter!==this.totalModeCounter||TRC.yieldingEnabled||TRC.dispatch("allrender",{data:this})}.trcBind(this))},Manager.prototype.generatePixelsMarkup=function(e,t){for(var i,r="",n=0;e&&n<e.length;n++)!(i=e[n])||t&&t[i]||(t&&(t[i]=!0),(i=TRC.text.encodeHTML(i))&&(r+='<img width="0" height="0" src="'+TRC.URL.prototype.switchProtocol.call(i,protocol,!0)+'">'));return r},Manager.prototype.appendPixelsToIFrame=function(e){var t;return(t=this.global["disable-unified-iframe-pixel-reporter"]?this.appendPixelsToIFrameMultipleIframes(e):this.appendPixelsToIFrameUnifiedIframes(e))&&this.global["track-external-pixel-traffic"]&&this.global["track-external-pixel-traffic"]>100*Math.random()&&TRC.modDebug.logMessageToServer(1,"fire external pixel",{idx:"pix",plat:this.getPlatformCode(),urls:e.match(/<img [^>]*src="([^"]+)"[^>]*>/gm)}),t},Manager.prototype.appendPixelsToIFrameUnifiedIframes=function(e){var t,i,r,n,o="trc-pixel-iframe-"+parseInt(1e4*Math.random(),10),a=!1;if(e){try{this.iframePixelReporter?i=this.iframePixelReporter:(t=this.getPixelWrapper(o),doc.body.appendChild(t),i=doc.getElementById(o),this.iframePixelReporter=i),r=i.contentDocument||i.contentWindow.document,(n=doc.createElement("span")).innerHTML=e,r.body.appendChild(n),a=!0,r.close()}catch(e){__trcDebug("Failed to create IFrame for external tracking")}return a}},Manager.prototype.appendPixelsToIFrameMultipleIframes=function(e){var t,i,r,n="trc-pixel-iframe-"+parseInt(1e4*Math.random(),10),o=!1;if(e){try{i=this.getPixelWrapper(n),doc.body.appendChild(i),t=doc.getElementById(n),(r=(this.iframePixelReporter=t).contentDocument||t.contentWindow.document).body.innerHTML=e,o=!0,r.close()}catch(e){__trcDebug("Failed to create IFrame for external tracking")}return o}},Manager.prototype.getPixelWrapper=function(e){var t;return!this.global["disable-iframe-span-wrapping"]||TRC.Browser.ieUpto(8)?(t=doc.createElement("span")).innerHTML='<iframe class="trc-hidden" id="'+e+'" name="'+e+'" width="0" height="0" style="display:none"></iframe>':((t=doc.createElement("iframe")).className="trc-hidden",t.id=e,t.name=e,t.style.height="0px",t.style.width="0px",t.style.display="none"),t},Manager.prototype.placementShouldHaveResponseData=function(e,t){return t.search("rbox-tracking")<0&&!e.isFeed&&!e.isIframeCard&&!e.externalContainerSelector&&!e.isStandaloneVideo&&!e.scriptData&&!e.publisherCardData},Manager.prototype.placementHasResponseData=function(e){return null!=e.response||e.dc},Manager.prototype.getOrCreatePlacementData=function(e,t){var i=this.preloadRequest[e];return i||(i=this.createPlacementData(e,t))&&(this.preloadRequest[e]=i),i},Manager.prototype.createPlacementData=function(e,t){return this.isRegularWidget(t)?this.createAddedWidgetData(e,t):this.isStandaloneVideo(t)?this.createStandaloneVideoWidgetData(e,t):TRC.FeedsManager.isFeedIframe(t)?TRC.FeedsManager.createFeedIframe(e,t):TRC.FeedsManager.isFeedScriptWidget(t)?TRC.FeedsManager.createFeedScriptWidgetData(e,t):TRC.FeedsManager.isExternalContainerWidget(t)?TRC.FeedsManager.createExternalWidgetData(e,t):TRC.FeedsManager.isPublisherCard(t)?TRC.FeedsManager.createPublisherCardData(e,t):void 0},Manager.prototype.isRegularWidget=function(e){return e.m},Manager.prototype.createAddedWidgetData=function(e,t){return{placement:e,mode:t.m,mode_name:t.m,addWidget:!0}},Manager.prototype.isStandaloneVideo=function(e){return e.vtag&&e.vtag.position===TRC.VideoTagLoader.prototype.LOCATION_TYPES.STANDALONE},Manager.prototype.createStandaloneVideoWidgetData=function(e,t){return{placement:e,isStandaloneVideo:!0}},Manager.prototype.getSortedCloudinaryRatios=function(){var e;if(!this.cloudinarySortedRatios){for(var t=this.global["cloudinary-aspect-ratios-list"]||[[1,2],[1,1.9],[1,1.8],[9,16],[1,1.7],[1,1.6],[1,1.5],[1,1.4],[3,4],[1,1.3],[1,1.2],[1,1.1],[1,1],[1,.9],[6,5],[1,.8],[4,3],[1,.7],[3,2],[1,.6],[16,9],[2,1]],i=0;i<t.length;i++)e=t[i],t[i]=e[0]/e[1];this.cloudinarySortedRatios=t.sort()}return this.cloudinarySortedRatios},Manager.prototype.getExpandOptions=function(e){var t={expandType:e.et};return e.ch&&(t.collapsedHeight=e.ch),e.ebc&&(t.expandButtonCaption=e.ebc),e.cbc&&(t.collapseButtonCaption=e.cbc),t},Manager.prototype.clearPageElements=function(){this.clearTransportFrames(),this.clearUserXElements(),this.clearStyleSheets()},Manager.prototype.clearTransportFrames=function(){document.querySelector&&[].slice.call(document.querySelectorAll("."+TRANSPORT_FORM_ELEMENT)).forEach(function(e){e.parentNode.removeChild(e)})},Manager.prototype.clearUserXElements=function(){TRC.userX&&TRC.userX.reset()},Manager.prototype.clearStyleSheets=function(){this.global["clear-styles-on-reset"]&&TRC.dom.removeAllInjectedStyleSheets()},Manager.prototype.shouldBlockVideoLoader=function(e){var t=!1;return isNaN(e)||(t=Math.random()<e/100),TRC.pConsole("page","info","Blocked video: "+t+", block-video-prob: "+e,"string"),t},Manager.prototype.shouldBlockThumbnailVideoLoader=function(e){var t=!1;return isNaN(e)||(t=Math.random()<e/100),TRC.pConsole("page","info","Blocked thumbnail video: "+t+", block-Thumbnail-video-prob: "+e,"string"),t},Manager.prototype.getPublisherVersionPropertyWithFallbackToNetwork=function(e){return this[e][TRC.publisherId]||TRC.networkId&&this[e][TRC.networkId]},Manager.prototype.getSiteNameOgValue=function(){return this.siteName||(this.siteName=this.getPageMetaPropertyValue("og:site_name")),this.siteName},Manager.prototype.getPageMetaPropertyValue=function(e){for(var t=document.head.getElementsByTagName("meta"),i=0;i<t.length;i++)if(t[i].getAttribute("property")===e)return t[i].content;return __trcDebug("Failed finding meta tag property : "+e+" value"),null},Manager.prototype.composeGetURL=function(e,t,i){var r,n=this["normalize-log-param"]("publisher",TRC.publisherId),o=protocol+"//"+(i||this.domain)+"/"+n+"/log/3/"+escape(e)+"?";for(r in o+=this.trcByPass?"trc_skip_failover=yes&":"",o+=this.enableTrcRoute&&this.trcRoute?"route="+this.trcRoute+"&":"",o+=this.enableExperimentsVariantIdEvent&&this.experimentsVariantIdParamsStr?this.experimentsVariantIdParamsStr+"&":"",o+=this.getLoaderTypesValue()?this.getLoaderTypesValue()+"&":"",t)t.hasOwnProperty(r)&&(nam="_"==r.charAt(0)?r.substr(1):r,void 0!==t[r]&&null!=t[r]&&(0==r.indexOf("unescape-")?o+=r.replace("unescape-","")+"="+t[r]+"&":o+=escape(nam)+"="+escape(t[r])+"&"));return o},Manager.prototype.sendAbTestEvent=function(e,t,i,r){e={abTestsEventType:"simple",name:e,type:t,eventTime:(new Date).getTime()},t={"unescape-d":encodeURIComponent(__trcJSONify(e))};r&&TRC.hasNetworkAsyncSupport()?(t.tim=__trcClientTimestamp(),t.id=parseInt(1e4*Math.random()),t.llvl=win.trc_debug_level,__trcCopyProps(this.getEventParams(),t),e=this.composeGetURL("abtests",t),TRC.sendPostAsyncCall(e)):this.sendEvent("abtests",t,null,!1,i,null,r)},Manager.prototype.initRBox=function(e,t){var i=new TRC.implClasses.TRCRBox(t.origin.toString(),t,this);return e._trcRboxId=i.id,this.boxes[i.id]=i,e._trc_container||(e._trc_container=document.createElement("div"),e._trc_container.className="trc_rbox_container",e._trc_anonbox=document.createElement("div"),e._trc_container.appendChild(e._trc_anonbox),e.appendChild(e._trc_container),this.cssReset&&"rbox-tracking"!==i.mode_name?(t=doc.createElement("div"),TRC.dom.swapElements(e,t,!1),i.outermostContainer=this.createCssResetContainers(e,i.mode_name),TRC.dom.swapElements(t,i.outermostContainer,!1),TRC.pConsole("page","info","CSS reset is enabled on all widgets")):i.outermostContainer=e),TRC.dispatch("beforeBoxRender",{mybox:i,containerElm:e,boxesList:this.boxes}),i.render(e._trc_anonbox),this.renderRBox(i),win.TRC.trc_drawRBox=!0,i},Manager.prototype.shouldRetryFailedPlacementRequest=function(e){return!e.addWidget&&!e.fpl&&(!e.numFailedRequests||e.numFailedRequests<this.maxRetriesPerFailedPlacementRequest)},Manager.prototype.retryFailedPlacementRequest=function(e,t){t.numFailedRequests=t.numFailedRequests||0;var i={};(i[e]=t).numFailedRequests++,this.dispatchLoadRequest(i)},Manager.prototype.createContainerForEscalatorWidget=function(e){e.container=document.createElement("div"),e.container.id="trc_rbox_slider_"+Math.floor(2147483648*Math.random()).toString(36),e.container.className="trc_related_container",this.cssReset&&doc.body.appendChild(e.container)},Manager.prototype.callTrc=function(e,t,i,r){TRC.isAMPSplitFeed&&this.ampSplitFeedManager.ampSplitFeedCache.getCacheData("tbl_syncViewID")!==t.vi&&__trcError("View ID Not Synched Between AMP Split Feed iFrames"),this.preloadRequestLoader=this.loadExternal(e,"js",this.handleLoadResponseFailure.trcBind(this),!0),this.preloadRequestLoader.doneCurrentRequest=r,this.preloadRequestLoader.timeout=TRC.Timeout.set(this.abortLoadRequest.trcBind(this,!0,t.cb),i),this.lastReqId=t.id,TRC.performance&&TRC.performance.mark("5.1.0",null,"TrcPv3",this.lastReqId,"pv3call",TRC.PerfEvenType.START),TRC.pConsole("","time","dispatch recommendation request","")},Manager.prototype.callTrcByWorker=function(url,req,timeout){TRC.performance&&TRC.performance.mark("5.1.0",null,"TrcPv3",this.lastReqId,"pv3call",TRC.PerfEvenType.START),this.lastReqId=req.id,TRC.worker.xhr(url,timeout,function(data){try{eval(data)}catch(e){__trcError("TRC.worker: Worker Error in trc response",e)}},this.handleLoadResponseFailure.bind(this)),TRC.pConsole("","time","dispatch recommendation request","")},Manager.prototype.callTrcByAjax=function(e,t,i,r){TRC.performance&&TRC.performance.mark("5.1.0",null,"TrcPv3",this.lastReqId,"pv3call",TRC.PerfEvenType.START),this.lastReqId=t.id;var n=function(e){this.handleLoadResponseFailure(),this.abortLoadRequest(!0,t.cb),__trcWarn(e)}.trcBind(this),o=this.handleLoadResponse.trcBind(this,t.cacheKey);this.preloadRequestLoader={},this.preloadRequestLoader.doneCurrentRequest=r;r=new XMLHttpRequest;r.open("GET",e,!0),r.setRequestHeader("Content-Type","text/plain"),r.withCredentials=!0,r.timeout=i,r.addEventListener("readystatechange",this.handleTrcAjaxResponseStatus.trcBind(this,r,o,n)),r.addEventListener("error",function(){n("Network error")}),r.addEventListener("timeout",function(){n("Network timeout: "+i)}),r.send(""),TRC.pConsole("","time","dispatch recommendation request","")},Manager.prototype.handleTrcAjaxResponseStatus=function(e,t,i){if(4===e.readyState&&0!==e.status)if(e.status<200||300<=e.status)i("Ajax status code not valid");else{var r=e.responseText;if(!r||-1<r.indexOf('{"trc":{}}'))i("Invalid response from server: "+r);else if(-1<r.indexOf("TRC.callbacks.mute()"))TRC.callbacks.mute();else{var n=r.match(/^[^{]*(.*)\)$/);if(n)try{t(JSON.parse(n[1]))}catch(e){i("TRC response not a valid JSON: "+r)}else i("Can't validate TRC response: "+r)}}},Manager.prototype.clearPreloadRequestLoader=function(){this.preloadRequestLoader&&(TRC.Timeout.clear(this.preloadRequestLoader.timeout),this.preloadRequestLoader.parentNode&&this.preloadRequestLoader.parentNode.removeChild(this.preloadRequestLoader),this.preloadRequestLoader=null)},Manager.prototype.clearPreloadRequestLoaderAndCallNext=function(){var e;this.preloadRequestLoader&&"function"==typeof this.preloadRequestLoader.doneCurrentRequest&&(e=this.preloadRequestLoader.doneCurrentRequest),this.clearPreloadRequestLoader(),e&&e()},Manager.prototype.clearPreloadRequestLoaderAndResetQueue=function(){this.clearPreloadRequestLoader(),TRC.recoRequestsQueue.resetQueue()},Manager.prototype.enableExploreMore=function(e,t){e.shouldNotCopyPublisherHeaderHtml=this.global.shouldNotCopyPublisherHeaderHtml||!1,this.loadExploreMoreModule(e);e=this.createAndAppendExploreMoreContainer(e.exm.container);this.setPlacementDataInPreloadRequest(t,e),TRC.exploreMoreInitialized=!0},Manager.prototype.setPlacementDataInPreloadRequest=function(e,t){this.preloadRequest[e]=this.computeRBoxOptions({container:t,placement:e,target_type:"mix",addedWidget:!0})},Manager.prototype.createAndAppendExploreMoreContainer=function(e){var t=document.createElement("div");return t.id=e,TRC.dom.addClass(t,"tbl-invisible"),document.body.appendChild(t),t},Manager.prototype.loadExploreMoreModule=function(e){TRC.ModuleLoader.load("explore-more",TRC.ExploreMore,function(){this.exploreMore=new TRC.ExploreMore(this,e)}.trcBind(this))},Manager.prototype.shouldSkipPlacement=function(e,t){return!!TRC.exploreMoreInitialized&&TRC.ExploreMore&&TRC.ExploreMore.shouldSkipPlacement(e,t,this.feedsManager)},Manager.prototype.shouldSkipPushedRequest=function(e){return!!TRC.exploreMoreInitialized&&TRC.ExploreMore&&TRC.ExploreMore.shouldSkipPushedRequest(e)},Manager.prototype.parseClientGenericAction=function(e){e=this.emulateCga()||e.trc.cga;if(e)return __trcUnJSONify(e)},Manager.prototype.emulateCga=function(){return TRC.URL.prototype.getParameter.call(location.href,"trc_cga")},Manager.prototype.initCcpa=function(e,t){var i=e&&e.ccpa;!this.global["disable-ccpa"]&&i&&TRC.ccpa&&!TRC.ccpa.isInitialized&&(TRC.ccpaPs?(TRC.ccpa.isInitialized=!0,TRC.ccpa.sendCcpaEvent("publisher")):TRC.ccpa.init(t.trc.vl,e.ccpa))},Manager.prototype.initPubConfigGenericActionOverride=function(e){var t;e&&e.pubConfigOverride&&(this.isExpoTest()&&TRC.util.haveMutualKeys(e.pubConfigOverride,TRC.overrideGlobalConfig)&&__trcError("client generic action override publisher config used in an expo test! expo test:"+this.getSystemFlag("experimentID")+",override is:"+JSON.stringify(e.pubConfigOverride)+" expo is:"+JSON.stringify(TRC.overrideGlobalConfig)),t=TRC.util.merge({},this.global,e.pubConfigOverride),Object.defineProperty(this,"global",{get:function(){return t}}))},Manager.prototype.isExpoTest=function(){return!!this.getSystemFlag("experimentID")}}(window,document),function(d,a){function f(){return document.createTextNode("Â ")}TRC.implClasses=TRC.implClasses||{};var h,o=TRC.implClasses.TRCRBox=function(e,t,i){return this._id=Math.floor(1e5*Math.random()),this.fixHeight=t.height,this.domain=i.domain,this.origin=e,this.header=!1,this.id="trc_"+this._id,this.response=this.request=null,__trcCopyProps(t,this),this.loaded=!!this.loaded&&this.loaded,this.element=null,this.listContainer=null,this.retryCount=0,this.drawList=!1,this.forceItemType=!1,this.trc=i,this.util=TRC.util,this.timeoutId=null,this.errorHandler="",this.boxes=[],this.recommendationList=null,this.use_cdn=!0===this.trc.getProperty(this.mode_name,"use-cdn-recommendations",this.propertiesOverride),this.postRenderQueue=new TRC.PostRenderQueue,this.src=null,this.fullEventItemsHash={},this.isCssImportant=this.trc.getProperty(this.mode_name,"use-css-important",this.propertiesOverride),this.publisher=TRC.publisherId,this.smallIOSDevice=this.trc["small-ios-device"]||"iPhone|iPod",this.isSmallIOS=0<=this.smallIOSDevice.indexOf(TRC.Device.deviceType),this.isFeedCard=t.isFeedCard,this.enableFeedView=t.feedViewConfig||this.trc.global["enable-feed-view"]||!1,this.iosLinkTarget=this.trc.getProperty(this.mode_name,"ios-sc-link-target-mode",this.propertiesOverride)||this.trc.global["ios-sc-link-target"],this.defaultLinkTarget=this.trc.global["link-target-conf"]||{NAV:"_self",NT:"_blank",SP:"_blank"},this.linkTargetConf=this.isSmallIOS&&this.iosLinkTarget?this.iosLinkTarget:this.trc["link-target-conf"],this.ntHandlerEnabled=this.trc.global["publisher-onclick-nt-enabled"],this.organicRedirParam=this.trc.global["organic-redirect-param"],this.shiftRedirOnclick=this.trc.global["shift-redir-onclick"],this.useRedirect=TRC.util.isAmp(TRC)?this.trc.global["enable-organic-redirect-on-amp"]:this.trc.global["enable-organic-redirect"],this.useRedirectOnLink=this.trc.global["use-redirect-on-link"],this.adcItemTypes=this.trc.global["adchoice-item-types"]||{"is-organic":!1,"is-in-network":!1,"is-syndicated":!0,"is-native":!0},this.sendClickPiggyBack=this.trc.global["send-pb-in-click"],this.imagesAltUrls=this.trc.global["images-alt-urls"]||[],this.disableResponsiveCSSReuse=this.trc.global["disable-responsive-css-reuse"],this.options=t,this.apiData=[],this.lazyLoadImageObserversIds=[],this.isMultiWidget=t.trcResponse&&t.trcResponse.multiWidget,TRC.util.isPercentEnabled(this.trc.global,"custom-image-size-round-percent")&&(this.customImageSizeRound=this.trc.global["custom-image-size-round-value"]),this},n="https://images.taboola.com/taboola/image/fetch/",s=n+"f_jpg%2Cq_80%2Ch_{h}%2Cw_{w}%2Cc_fill%2Cg_faces%2Ce_sharpen/",l=n+"fl_lossy%2Cf_gif%2Ch_{h}%2Cw_{w}%2Cc_fill%2Cg_faces:auto%2Ce_sharpen/",u=TRC.PROTOCOL;o.prototype.DEFAULT_THUMB_RATIO=.8,o.prototype.getImageUrlPrefix=function(){return s},o.prototype.getListId=function(){return this.visible?"rbox-"+this.origin:"rbox-tracking"},o.prototype.getSessionId=function(){return this.response&&this.response.trc?this.response.trc["session-id"]:null},o.prototype.getItemType=function(){return this.forceItemType||this.trc.getItemType()},o.prototype.generateHeader=function(e){var t=this.getWidgetToFeedHelper(),i=document.createElement("div"),r=document.createElement("span"),n=this.trc.getProperty(this.mode_name,"header",this.propertiesOverride),o=this.trc.getProperty(this.mode_name,"header-right",this.propertiesOverride),a="No Header"!==o;return i.id=this.id.replace("trc_","trc_header_"),i.className="trc_rbox_header trc_rbox_border_elm",r.className="trc_rbox_header_span",this.generateHeaderIcon(r),i.ext=document.createElement("div"),i.ext.className="trc_header_ext",i.appendChild(i.ext),a?(this.generateHeaderPart(r,n,"trc_header_left_column trc_header_left_part"),this.generateHeaderPart(r,o,"trc_header_right_column trc_header_right_part")):r.insertAdjacentHTML("beforeend","No Header"!==n?n:""),i.titleBox=r,i.appendChild(r),t&&!t.getHeader()?t.addHeaderToFeed(i):e.appendChild(i),i},o.prototype.generateHeaderIcon=function(e){var t,i=this.trc.getProperty(this.mode_name,"header-icon",this.propertiesOverride)||"NONE";"CUSTOM"===i?t=this.trc.getProperty(this.mode_name,"header-icon-url",this.propertiesOverride):"PUBLISHER_LOGO"===i&&(t=this.trc.getPublisherVersionPropertyWithFallbackToNetwork("publisher-logo")),t&&((i=document.createElement("img")).className="trc_rbox_header_icon_img trc_img",i.src=TRC.URL.prototype.switchProtocol.call(t,u),(t=document.createElement("div")).className="trc_rbox_header_icon_div",t.appendChild(i),e.appendChild(t),e.className+=" trc_rbox_header_icon_span")},o.prototype.generateHeaderPart=function(e,t,i){var r=document.createElement("span");r.className="trc_inner_header "+(i||""),r.insertAdjacentHTML("beforeend",t),e.appendChild(r)},o.prototype.render=function(e){this.element=document.createElement("div"),this.element.id=this.id.replace("trc_","trc_wrapper_"),this.element.className="trc_rbox "+this.mode_name,this.element.style.overflow="hidden",e.appendChild(this.element),this.element.style.display="none",!0===this.trc.getProperty(this.mode_name,"has-expand-animation",this.propertiesOverride)&&new TRC.ExpandAnimationManager(this)},o.prototype.setTargetItemsList=function(e,t,i){if(t)for(var r=0,n=t.length;r<n;r++)e[t[r]["item-id"]]={tii:t[r]["item-id"],tipt:this.getProviderType(t[r]),tit:t[r].type,tids:i}},o.prototype.getJsonTargetItemsList=function(e){var t,i=[];for(t in e)e.hasOwnProperty(t)&&i.push(e[t]);return i},o.prototype.getProviderType=function(e,t){return e["is-syndicated"]?t?"sponsored":"SP":e["is-in-network"]?t?"exchange":"NT":e["is-native"]?t?"native":"NAV":t?"organic":"RC"},o.prototype.setApiItemsData=function(e){this.apiData.push({url:e.url,slot:e.itemIndex,id:e.id,type:this.getProviderType(e,!0),title:e.title})},o.prototype.isReadMoreDevice=function(e){for(var t=e.split("|"),i={smart_phone:TRC.dom.isSmartPhone(),tablet:TRC.dom.isTablet(),desktop:TRC.dom.isDesktop()},r=0;r<t.length;r++){if("all"===t[r])return!0;if(i[t[r]])return!0}return!1},o.prototype.getReadMoreConfig=function(){var e=this.trc.getProperty(this.mode_name,"read-more-config",this.propertiesOverride)||{};return e.boxSelector=this.trc.getProperty(this.mode_name,"read-more-box-selector",this.propertiesOverride),e.threshold=this.trc.getProperty(this.mode_name,"read-more-threshold",this.propertiesOverride),e.minimizedSize=this.trc.getProperty(this.mode_name,"read-more-minimized-size",this.propertiesOverride),e.caption=this.trc.getProperty(this.mode_name,"read-more-caption",this.propertiesOverride),e.cutoffType=this.trc.getProperty(this.mode_name,"read-more-cutoff-from-type",this.propertiesOverride),e.anchorSelector=this.trc.getProperty(this.mode_name,"read-more-anchor-selector",this.propertiesOverride),e.lengthFromAnchorElementType=this.trc.getProperty(this.mode_name,"read-more-cutoff-length-type",this.propertiesOverride),e.lengthFromAnchorElement=this.trc.getProperty(this.mode_name,"read-more-cutoff-length-from-anchor-element",this.propertiesOverride),e.modeDevices=this.trc.getProperty(this.mode_name,"read-more-mode-devices",this.propertiesOverride),e},o.prototype.isNoRecommendationsMode=function(){return"rbox-tracking"==this.getListId()||"rbox-only-video"===this.mode_name},o.prototype.calcModeName=function(e,t){var i;return TRC.TRCParser.IsBaseModeAndABModeExist(e)?TRC.TRCParser.parseBaseModeAndABModeName(e):(i=TRC.TRCParser.parseBaseModeName(e))?i:(i=TRC.TRCParser.parseTestVariant(e))?(TRC.pConsole(this.mode_name,"info","test variant = "+i),TRC.TRCParser.parseABModeName(t,e)):void 0},o.prototype.loadScriptCallback=function(e,t){this.propertiesOverride=t.trc&&t.trc["video-list"]&&t.trc["video-list"]["properties-override"],this.isProviderIframe=this.trcResponse&&this.trcResponse.hasOwnProperty("ifr")&&this.trcResponse.ifr;var i,r,n,o="TRCRBox.loadScriptCallback(retry="+this.retryCount+")",a=t.trc,s=this.response&&this.response.trc.DNT&&"TRUE"===this.response.trc.DNT.toUpperCase(),l=(TRC.TRCParser,this.trc.getProperty(this.mode_name,"thumbnail-position",this.propertiesOverride));if(__trcDebug("Enter "+o),this.abortRequest(),this.utm=this.requestTime&&[this.requestTime,(new Date).getTime()-TRC.utm.start],e&&(this.trc.trcCache.cacheResponse(e,t,TRC.pageManager.state.moreDispatchParams),this.trc.cachedResponses[e]=!0),a&&a["video-list"]&&a["video-list"].pvc&&(this.pVideoLoader=new TRC.PVideoLoader(this,a["video-list"].pvc,this.response.trc,this.trc)),!(a&&a["video-list"]&&a["video-list"].video||this.isProviderIframe)){__trcError("Exit "+o+": request format error");var c=this.response.feedPlacement||this.placement;return TRC.dispatch("onRboxFlowError",{placement:c}),void TRC.EventsAPI.dispatchNoContent(this.trc.NO_CONTENT.noItems,this.placement,this.isFeedCard)}if(TRC.UserIdMerger.notifyPossibleUserChange(this.trc,TRC.publisherId,a["user-id"],a["session-data"]),a["consent-missing"]||TRC.pageManager.storePublisherValue(TRC.publisherId,"session-data",a["session-data"]),t.trc.DNT&&"TRUE"===t.trc.DNT.toUpperCase()?(TRC.doNotTrack=!0,TRC.pageManager.removeAllKeys(),TRC.pageManager.removeUserId()):TRC.pageManager.storeUserId(a["user-id"],a["consent-missing"]),this.drawList)__trcWarn("Exit "+o+": got another response after already drawing");else{if(this.response=t,this.isResponseFromCache()&&(this.cachedViewId=this.response.cachedViewId),this.setTargetItemsList(this.fullEventItemsHash,a["video-list"].video,"a"),(r=new TRC.PlacementEventPostData).setFullItemList(this.getJsonTargetItemsList(this.fullEventItemsHash)),n=this.createUtmParam(),void 0!==this.modeGroupOrder&&this.util.merge(n,{mgo:this.modeGroupOrder}),a["video-list"].video&&a["video-list"].video.length<1&&!this.isNoRecommendationsMode()){__trcError("Exit "+o+": no items in response - "+this.mode_name),TRC.EventsAPI.dispatchRender(a),this.abortRendering(),this.sendAvailableEvent(n,r,!0,!1);var c=this.response.feedPlacement||this.placement;return TRC.dispatch("onRboxFlowError",{placement:c}),void TRC.EventsAPI.dispatchNoContent(this.trc.NO_CONTENT.noItems,this.placement,this.isFeedCard)}if(this.isResponsive=this.trc.getProperty(this.mode_name,"mode-is-responsive",this.propertiesOverride),this.recommendationList=this.isMultiWidget?this.multiWidgetRecItems.splice(0,this.getCurrentListSize()):a["video-list"].video||[],this.isProviderIframe?TRC.listen("available::"+this.placement,function(e){!1!==this.trcResponse.config["send-events"]&&(this.sendAvailableEvent(n,r,!1,!0),this.visibilityReporter=new TRC.WidgetVisibilityReporter(this),TRC.intersections.isInViewPort({targetElement:e.container,enableDelayedVisibilityCheck:!0,onTrigger:function(){this.recommendationList.length&&this.visibilityReporter.calculateVisibleItems(null,!0,this.recommendationList),this.visibilityReporter.reportVisibility()}.trcBind(this)}),this.registerProviderClicks(this.recommendationList)),this.sendPlacementTrackingPixelsOnce("i")}.trcBind(this)):this.sendAvailableEvent(n,r,!1,!1),this["rtb-win"]&&this.sendEvent("rtb-win",this["rtb-win"]),this.itemsTypes=this.getItemsTypesList(this.recommendationList),this.privacyId=this.getPrivacyId(this.recommendationList),this.orig_name=this.mode_name,this.orig_placement=this.placement,this.isProviderIframe||this.sendPlacementTrackingPixelsOnce("i"),c=this.calcModeName(t.trc,this.mode_name),this.changeModeName(c,!0,"mode - "+c+" has no config :- fallback - "+this.mode_name),this.isProviderIframe||this.isNoRecommendationsMode()||void 0!==this.trc.modes[this.mode_name]){c=this.trc.getProperty(this.mode_name,"auto-size",this.propertiesOverride),i="none"!=this.trc.getProperty(this.mode_name,"thumbnail-position",this.propertiesOverride),this.useNativeLineClamp=TRC.Browser.compatibility.lineClamp&&!this.trc.getProperty(this.mode_name,"details-inline-with-title",this.propertiesOverride)&&this.trc.getProperty(this.mode_name,"use-browser-line-clamp",this.propertiesOverride),this.widgetCreatorLayout=this.trc.getProperty(this.mode_name,"widget-creator-layout",this.propertiesOverride),this.isWCTextLinks="autowidget-template-text-links"===this.widgetCreatorLayout,this.isCarousel="scrolling"===this.trc.getProperty(this.mode_name,"navigation-type",this.propertiesOverride),this.shouldLazyLoadImages=this.trc.getProperty(this.mode_name,"has-thumbs-image-lazy-load",this.propertiesOverride)||this.trc.global["thumbnail-image-lazy-load"],this.link_target=this.link_target||this.trc.getProperty(this.mode_name,"link-target")||"normal",__trcDebug("Exit "+o+": success"),this.drawList=!0,this.hasReadMore=!0!==this.trc.disableReadMore&&this.trc.getProperty(this.mode_name,"enable-read-more",this.propertiesOverride),this.readMorePageConfig=this.read_more||{},this.readMoreConfig=this.getReadMoreConfig(),this.readMoreDevices=this.trc.getProperty(this.mode_name,"read-more-mode-devices",this.propertiesOverride)||this.trc["read-more-devices"],this.getWidgetToFeedHelper()&&this.getWidgetToFeedHelper().applyWidgetHeaderAndFooterStylesToFeed(this.mode_name),this.callPreRenderHooks(),this.trc.getProperty(this.mode_name,"pending-archive")&&TRC.modDebug.logMessageToServer(0,"PENDING_ARCHIVE_MODE_ERROR["+this.mode_name+"]",{"event-type":"ARCHIVE_MODE_ERROR"}),TRC.setReadMore&&this.hasReadMore&&this.isReadMoreDevice(this.readMoreDevices)?TRC.isOptim("defer-read-more")?setTimeout(function(){TRC.setReadMore(this)}.trcBind(this),0):TRC.setReadMore(this):TRC.EventsAPI.readmore("none",this.response&&this.response.trc),this.trc.yieldingEnabled||this.trc.totalModeCounter++;try{this.reqId=this.response.trc.req}catch(e){this.reqId=-1}TRC.performance&&TRC.performance.mark("7.0.1."+this._id,null,this.mode_name,this.reqId,"rendering",TRC.PerfEvenType.REQ_LEVEL_START),this.container&&this.container.setAttribute("data-placement-name",this.placement),this.isProviderIframe||(TRC.CategoryCard.enableCategoryCard(this)&&(this.categoryCard=new TRC.CategoryCard(this)),this.isResponsive&&!this.isWCTextLinks?(this.generateResponsiveOuters(this.element),this.drawResponsiveList(a),this.postHandleRecommendationsResponseData(a,t,l,i,s,null)):"rbox-only-video"===t.trc.mode?(this.postHandleRecommendationsResponseData(a,t,l,i,s,null),this.postRender()):(c&&this.container&&0==this.container.clientWidth&&(this.container.style.width="100%"),TRC.ModuleLoader.load("non-responsive-widget",this.drawListBody,function(){this.generateVisibleParts(),this.drawListBody(a),this.postHandleRecommendationsResponseData(a,t,l,i,s,null)}.trcBind(this))))}else __trcError("TRCRBox.loadScriptCallback: Mode name '"+this.mode_name+"' doesn't exist in configuration file ")}},o.prototype.postHandleRecommendationsResponseData=function(e,t,i,r,n,o){this.shouldLazyLoadImages&&(this.lazyLoadViewportMarginThreshold=this.trc.getProperty(this.mode_name,"thumbs-image-lazy-load-margins",this.propertiesOverride)||this.trc.global["thumbs-image-lazy-load-margins"]||"600px 1500px 600px 1500px",this.isCarousel&&"none"!==i&&this.createCarouselContainerImgLazyLoadObserver()),TRC.StoryWidget.shouldInitStoryWidget(this)&&new TRC.StoryWidget(this),TRC.performance&&TRC.performance.mark("7.0.9."+this._id,o,this.mode_name,this.reqId,"rendering",TRC.PerfEvenType.REQ_LEVEL_STOP),TRC.dispatch("trcContentReady",{container:this.container}),e&&e["video-list"]&&e["video-list"].vtag&&this.trc["mode-before-video-load"](this)&&(TRC.performance&&TRC.performance.mark("10.0.1."+this._id,null,"videotag","","videoTagLoad",TRC.PerfEvenType.START),o={placement:this.placement,container:this.container},this.videoTagLoader=new TRC.VideoTagLoader(this.trc,e["video-list"].vtag,o,this,this.response.trc),this.videoTagLoader.loadVideo(),TRC.performance&&TRC.performance.mark("10.0.9."+this._id,null,"videotag","","videoTagLoad",TRC.PerfEvenType.STOP));try{TRC.SpotlightLoader.registerOnMainContainer(this.container,t),TRC.SpotlightLoader.load(this.response)}catch(e){__trcError("Error while trying to load Spotlight")}this.shouldInitRTBUserAdChoice(r,n)&&TRC.ModuleLoader.load("user-adchoice",TRC.userAdChoice,this.initRTBUserAdChoice.trcBind(this)),this.shouldInitTaboolaChoice(r,n)&&TRC.ModuleLoader.load("userx",TRC.userX,this.initTaboolaChoice.trcBind(this)),this.shouldInitSliderManager()&&(TRC.RBoxUsage.logUsage("Init Escalator"),TRC.ModuleLoader.load("slider",TRC.SliderManager,function(){new TRC.SliderManager(this)}.trcBind(this)))},o.prototype.shouldInitTaboolaChoice=function(e,t){var i=this.trc.global["has-userx"]&&this.trc.getProperty(this.mode_name,"mode-has-userx",this.propertiesOverride),r=this.options&&this.options.trcResponse&&!!this.options.trcResponse.nup;return TRC.pConsole(this.mode_name,"info","has user X = "+i,""),i&&e&&!t&&!TRC.Device.isTouchDevice&&!TRC.SpotlightLoader.loadedScript&&!r},o.prototype.initTaboolaChoice=function(){if(TRC.userX&&!TRC.userX.isInitialized)try{TRC.userX.init(this.trc)}catch(e){__trcDebug("failed to init Taboola Choice",e)}try{TRC.userX.initForMode(this)}catch(e){__trcDebug("failed to init Taboola Choice for mode "+this.mode_name)}},o.prototype.shouldInitRTBUserAdChoice=function(e,t){return this.trc.global["show-rtb-ad-choices-icon"]&&e&&!t&&!TRC.SpotlightLoader.loadedScript&&this.recommendationList&&this.recommendationList.some(function(e){return e.plink})},o.prototype.initRTBUserAdChoice=function(){if(!TRC.userAdChoice.isInitialized)try{TRC.userAdChoice.init()}catch(e){__trcDebug("failed to init RTB Choice")}try{TRC.userAdChoice.initForMode(this)}catch(e){__trcDebug("failed to init RTB Choice for mode "+this.mode_name)}},o.prototype.shouldInitSliderManager=function(){return(!0===this.slider||!0===this.trc.getProperty(this.mode_name,"slider",this.propertiesOverride))&&!1!==this.trc.slider},o.prototype.callPreRenderHooks=function(){var e=this.trc.getProperty(this.mode_name,"mode-start"),t=this.trc["mode-pub-start"];try{"function"==typeof t&&(t(this,this.container),TRC.CustomModulesManager.runHook("mode-pub-start",null,this,this,this.container)),"function"==typeof e&&e(this,this.container)}catch(e){__trcError("Error in pre rendered hooks - "+e.message)}},o.prototype.registerProviderClicks=function(e){for(var t,i=0;i<e.length;i++){t=e[i],TRC.listen("click::"+this.placement,function(){this.sendEvent("click",{it:t.type,ii:t["item-id"],p:t["is-syndicated"]?t.publisher:"",li:this.getListId()},null,!1),this.trc.sendExternalTracking(this.getAllExternalTrackingURLsList().c)}.trcBind(this));break}},o.prototype.changeModeName=function(e,t,i){e&&(void 0!==this.trc.modes[e]?(this.trc.cssReset&&this.switchCSSResetDivIds(this.mode_name,e),this.mode_name=e,this.element.className="trc_rbox "+this.mode_name):this.trc.global["send-variant-warning"]&&(t?__trcWarn:__trcDebug)(i))},o.prototype.switchCSSResetDivIds=function(e,t){var i=TRC.modesCache[e]?TRC.modesCache[e].cssDivsArr:[],r=TRC.modesCache[t]?TRC.modesCache[t].cssDivsArr:[],n=i.length;try{for(var o=0;o<n;o++)a.getElementById(i[o]).id=r[o]}catch(e){__trcError("TRCRBox.prototype.switchCSSResetDivs : ",e.message)}},o.prototype.abortRequest=function(){this.timeoutId&&(TRC.Timeout.clear(this.timeoutId),this.timeoutId=null),this.request&&(this.request.parentNode.removeChild(this.request),this.request=null)},o.prototype.abortRendering=function(){switch(__trcDebug("Called TRCRBox.abortRendering(retry="+this.retryCount+")"),this.drawList=!0,typeof this.errorHandler){case"string":return void(null!=this.listContainer&&this.listContainer.appendChild(document.createTextNode("Error getting recommendations: "+this.errorHandler)));case"function":return void this.errorHandler()}},o.prototype.getContainer=function(){return this.element.parentNode},o.prototype.sendEvent=function(e,t,i,r,n,o){var a=!1,s=this.trc.formattedTRCRequest&&this.trc.formattedTRCRequest.tmpl,l=this.response.trc["placement-group"],c=this.response&&this.response.trc?this.response.trc["session-data"]:null,d={ri:this.response?this.response.trc.req:null,sd:this.trc.getSessionData(c),ui:TRC.pageManager.getUserId(),pi:this.trc.getItemId(),wi:this.response?this.response.trc["watched-item"]:null,pt:this.getItemType(),vi:this.cachedViewId||TRC.pageManager.getPageData(),li:this.getListId()},c=function(){a||(a=!0,n&&n())};this.isResponseFromCache()&&(d.cache="1"),this.trc.formattedTRCRequest&&this.trc.formattedTRCRequest.ad&&(d.ad=__trcJSONify(this.trc.formattedTRCRequest.ad)),this.trc.systemFlags&&"normal"!==this.trc.systemFlags.loaderType&&(d.lt=this.trc.systemFlags.loaderType),this.response.trc&&(this.trc.global["tmp-use-pb-params"]&&this.trc.configForPostEvent[e]||"click"===e&&this.sendClickPiggyBack)&&(this.response.trc.ppb&&(t.ppb=this.response.trc.ppb),this.response.trc.cpb&&(t.cpb=this.response.trc.cpb),this.response.trc.prty&&(t.prty=this.response.trc.prty),this.response.trc.caty&&(t.caty=this.response.trc.caty)),"click"==e&&"nt"==t.prt&&(d={}),s&&(d.tmpl=s),l&&(d.pg=l),__trcCopyProps(t,d),!0!==this.response.trc["video-list"]["content-hub-forced-placement"]||"available"!==e&&"explore"!==e&&"visible"!==e||(e="content-hub-"+e),r?(TRC.pConsole(this.mode_name,"info","sending event type : "+e,d,"object"),this.trc.log1(e,d,i,c,this.placement)):this.trc.logTrcEvent(e,d,i,c);TRC.performance&&"visible"==e&&TRC.performance.mark("11.0."+this._id,null,this.mode_name,this.reqId,"visible",TRC.PerfEvenType.MARK),"number"==typeof o&&TRC.Timeout.set(c,o)},o.prototype.load=function(e){if(this.errorHandler=e,this.loadRBoxRequestFailed)return __trcError("loadRBox failed, aborting."),void this.abortRendering();({}[this.placement]=this).loadScriptCallback(null,this.response),this.detectBids(),this.measureDistanceFromArticle(),this.takePageScreenshot()},o.prototype.detectBids=function(){TRC.util.isPercentEnabled(this.trc.global,"enable-bid-detection")&&TRC.ModuleLoader.load("bid-detection",TRC.BidDetection,function(){TRC.bidDetector||(TRC.bidDetector=new TRC.BidDetection(this.response.trc),TRC.bidDetector.detect())}.trcBind(this))},o.prototype.measureDistanceFromArticle=function(){TRC.util.isRboxEncapsulated(TRC)||TRC.util.isPercentEnabled(this.trc.global,"enable-distance-from-article")&&TRC.ModuleLoader.load("distance-from-article",TRC.DistanceFromArticle,function(){TRC.DistanceFromArticle.measureAndReport(this.trc.global["distance-violation-minimal-article-text-percentage"])}.bind(this))},o.prototype.takePageScreenshot=function(){!TRC.util.isRboxEncapsulated(TRC)&&TRC.util.isPercentEnabled(this.trc.global,"screenshot-capture-enabled")&&TRC.ModuleLoader.load("screenshot-capture",TRC.screenshotCaputre,function(){TRC.screenshotCaputre.init(document.body,{keepImages:!0})}.trcBind(this))},o.prototype.getBoundingClientRect=function(e,t){return t?{left:t.boundingClientRect.left+e.left,right:t.boundingClientRect.right+e.left,top:t.boundingClientRect.top+e.top,bottom:t.boundingClientRect.top+e.bottom,width:t.boundingClientRect.width,height:t.boundingClientRect.height}:e},o.prototype.clearChilds=function(e){for(;e.hasChildNodes();)e.removeChild(e.lastChild)},o.prototype.hasDuration=function(){for(var e,t=this.trc.getProperty(this.mode_name,"detail-order",this.propertiesOverride).split(","),i=0;e=t[i];i++)if("duration"==e)return!0;return!1},o.prototype.cleanStyleDimensions=function(e){var t=null;try{__trcDOMWalker(e,function(e){e.style.cssText&&(e.style.width="",e.style.height=""),-1!==(e.className+"").indexOf("video-duration")&&(t=e)})}catch(e){}return t},o.prototype.createBillboard=function(){var e=__trcGetElementsByClass("trc_rbox_outer","div",this.element)[0];if(!e)return null;var t=document.createElement("div");return(this.billboard=t).className="trc_billboard",t.style.width="auto",e.parentNode.insertBefore(t,e),e.style.clear="both",t},o.prototype.checkForBlocking=function(){var e,t,i,r,n,o,a="",s=[],l=[],c=[];if(this.trc.global["enable-old-abp-check"]){for(e=0;t=this.boxes[e];e++){try{(r=t.video_data["is-in-network"]||t.video_data["is-native"])||(i=t.video_data["is-syndicated"])}catch(e){}n=r?l:i?c:s,t&&1===t.nodeType&&t.childNodes.length?(o=document.trcGetCurrentStyle(t,"-moz-binding"),document.trcGetCurrentStyle(t,"orphans"),"hidden"!=document.trcGetCurrentStyle(t,"visibility")&&("none"==document.trcGetCurrentStyle(t,"display")?("4321"==document.trcGetCurrentStyle(t,"orphans")&&(a=a||"adblockplus"),n.push(1)):o&&"none"!=o&&(a=a||"adblockplus",n.push(1)))):n.push(1)}(s.length||c.length||l.length)&&__trcWarn("blocked:"+s.length+"-"+l.length+"-"+c.length+"-"+(a||"unknown"))}},o.prototype.setVideoPlayerLoad=function(e,t,i,r,n,o){try{this.pVideoLoader.loadVideo({playerContainer:e,url:t,poster:i,itemIndex:r,itemId:n},o),TRC.tlf&&console.time("in setVideoPlayerLoad")}catch(e){__trcWarn("Error in setVideoPlayerLoad",e)}},o.prototype.getThumbnailsDimensions=function(e){e=e.boundingClientRect;return{width:Math.ceil(e.width),height:Math.ceil(e.height)}},o.prototype.removeCarouselItemImgLazyLoadObserver=function(e){for(var t,e=e.split(" "),i=0;i<e.length;i++)-1!==(t=this.lazyLoadImageObserversIds.indexOf(e[i]))&&(TRC.intersections.unobserve(this.lazyLoadImageObserversIds[t]),this.lazyLoadImageObserversIds.splice(t,1))},o.prototype.createCarouselContainerImgLazyLoadObserver=function(){var e={targetElement:this.container,threshold:0,rootMargin:this.lazyLoadViewportMarginThreshold,disableCheckOverlay:!0,onEnter:this.createCarouselItemImgLazyLoadObserver.trcBind(this)};this.lazyLoadImageObserversIds.push(TRC.intersections.observe(e))},o.prototype.loadCarouselItemImage=function(e,t,i,r,n,o,a,s,l,c){a=this.getThumbnailsDimensions(a),s=s.getAttribute(TRC.intersections.TARGET_ATTRIB);this.setImageLoad(e,t,i,r,n,o,!0,a),s&&this.removeCarouselItemImgLazyLoadObserver(s)},o.prototype.createCarouselItemImgLazyLoadObserver=function(e,t,i,r){for(var n,t=t.getAttribute(TRC.intersections.TARGET_ATTRIB),o=0;o<this.boxes.length;o++)n={rootSelector:"#"+this.outerBox.id,targetElement:this.boxes[o].thumbBlock,threshold:0,rootMargin:this.lazyLoadViewportMarginThreshold,onEnter:this.loadCarouselItemImage.trcBind(this,this.boxes[o].img,this.boxes[o],this.boxes[o].img_src,100,this.boxes[o].thumbBlock,this.trc.global["thumb-lazy-load-switch"])},this.lazyLoadImageObserversIds.push(TRC.intersections.observe(n));t&&this.removeCarouselItemImgLazyLoadObserver(t)},o.prototype.lazyLoadImage=function(e,t,i,r,n,o,a,s,l,c){a=this.getThumbnailsDimensions(a),s=s.getAttribute(TRC.intersections.TARGET_ATTRIB);this.setImageLoad(e,t,i,r,n,o,!0,a),s&&this.removeCarouselItemImgLazyLoadObserver(s)},o.prototype.alternateImgBaseUrl=function(e){return TRC.imageCounter++,e.replace("images.taboola.com",this.imagesAltUrls[TRC.imageCounter%this.imagesAltUrls.length])},o.prototype.setImageLoad=function(e,t,i,r,n,o,a,s){var l,c,d,h=TRC.util.isPercentEnabled(this.trc.global,"cloudinary-encode")?TRC.imageUtils.cloudinaryEncoding(i):(this.trc.global["tmp-image-utf8-encode"]?encodeURIComponent:escape)(i);if(!a&&this.shouldLazyLoadImages)return this.isCarousel?void 0:(c={targetElement:n,threshold:0,rootMargin:this.lazyLoadViewportMarginThreshold,disableCheckOverlay:!0,onEnter:this.lazyLoadImage.trcBind(this,e,t,i,r,n,o)},void this.lazyLoadImageObserversIds.push(TRC.intersections.observe(c)));if(l=a?s:this.getContainerDim(n,t,this.isHiddenItem(t)))c=this.getImageOptimizationUrlByItemRtbProp(t.video_data),i=this.getImageOptimizePrefix(i,c,l)+h;else if(r)return void TRC.Timeout.set(this.setImageLoad.trcBind(this,e,t,i,r--,n,o,a,s),50);o=t.video_data["pvideo-url"],a=t.video_data.itemIndex,s=t.video_data["item-id"],0<this.imagesAltUrls.length&&(i=this.alternateImgBaseUrl(i)),this.trc.getExpoImageTag()&&(i+=(-1===i.indexOf("?")?"?":"&")+this.trc.getExpoImageTag()),t.img_src=i=TRC.URL.prototype.switchProtocol.call(i,u),e.src=i,d=Date.now(),TRC.performance&&TRC.performance.mark("imgLoad"+d+"start",null,"",d,"imgLoadTime",TRC.PerfEvenType.START),TRC.dom.on(e,"load",function(e){return TRC.performance&&TRC.performance.mark("imgLoad"+d+"stop",null,"",d,"imgLoadTime",TRC.PerfEvenType.STOP),!0}),this.pVideoLoader&&o&&(t={isCreatePVideoOverlay:this.trc.getProperty(this.mode_name,"p-video-overlay",this.propertiesOverride),video_data:t.video_data,container:t,language:this.trc.language,isSendEvents:this.trc.global["p-video-overlay-send-events"]},n=this.isResponsive?n:n.firstChild,this.setVideoPlayerLoad(n,o,i,a,s,t))},o.prototype.getImageOptimizationUrlByItemRtbProp=function(e){return this.imageOptimizePrefixFlag=!0,e["is-rtb"]?this.rtbImageOptimizePrefix=this.rtbImageOptimizePrefix||this.getImageOptimizationUrl(e):(e["thumbnail-transformations"]||e["is-gift"])&&this.trc.global["image-optimization-url-per-item-is-enabled"]?this.getImageOptimizationUrl(e):this.imageOptimizePrefix=this.imageOptimizePrefix||this.getImageOptimizationUrl(e)},o.prototype.setImagePrefixUrl=function(e){var t,i="image-url-prefix",r=s;return e["is-rtb"]?(i="rtb-image-url-prefix",r="https://images.taboola.com/taboola/image/fetch/$pw_{w}%2C$ph_{h}/t_tbl-cnd/"):e["is-gift"]?(i="gif-url-prefix",r=l):e["thumbnail-transformations"]&&(t=n+"h_{h},w_{w},"+e["thumbnail-transformations"]+"/"),TRC.shiftDomain(t||this.trc.getProperty(this.mode_name,i,this.propertiesOverride)||this.trc.global[i]||r)},o.prototype.handleGifPrefixParams=function(e){var t=this.trc.global["gif-fade-effect-in-ms"];return t&&"0"!==t&&(t=encodeURIComponent(",e_fade:{fade},e_fade:-{fade}".replace(new RegExp("{fade}","g"),t)),e=e.substr(0,e.length-1)+t+(e.lastIndexOf("/")===e.length-1?"/":"")),e},o.prototype.forceGifPrefixUrl=function(){return TRC.shiftDomain(this.trc.getProperty(this.mode_name,"gif-url-prefix",this.propertiesOverride)||this.trc.global["gif-url-prefix"]||l)},o.prototype.getImageOptimizationUrl=function(e){var t=this.setImagePrefixUrl(e),i=this.trc.global["images-host"],r=this.trc.getProperty(this.mode_name,"images-radius",this.propertiesOverride),n=e["is-gift"];return e["pvideo-url"]&&e.thumbnail&&-1<e.thumbnail.indexOf(".gif")&&(t=this.forceGifPrefixUrl(),n=!0),i&&2<i.length&&((e=new TRC.URL(t)).host=i,t=e.toString()),r&&"0"!=r&&(t=n?t.replace(new RegExp("f_gif"),"f_gif%2Cr_"+r):(t=t.replace(/f_jpg(%2C)?/,"")).replace(/fetch\//,"fetch/f_png%2Cr_"+r+"%2C")),t=n?this.handleGifPrefixParams(t):t},o.prototype.isHiddenItem=function(e){return"none"===a.trcGetCurrentStyle(e,"display",null)},o.prototype.getContainerDim=function(e,t,i){var r=100;if(i){if(this.cachedImageDim)return this.cachedImageDim}else if(i=TRC.dom.getElementRect(e),e=Math.ceil(i.right-i.left))return r=Math.ceil(i.bottom-i.top||this.getAspectHeight(t)||e*this.getThumbAspectRatio(this.trc.modes[this.mode_name],"ratio")||r),this.cachedImageDim={width:e,height:r};return null},o.prototype.getAspectHeight=function(e){return e.thumbnail_aspect?(e=TRC.dom.getElementRect(e.thumbnail_aspect)).bottom-e.top:0},o.prototype.getImageOptimizePrefix=function(e,t,i){TRC.performance&&TRC.performance.mark("7.1.1."+this._id);var r=this.getImageSizeFactor(),n=this.trc.getProperty(this.mode_name,"image-min-width",this.propertiesOverride)||110,o=this.trc.getProperty(this.mode_name,"image-max-dimension",this.propertiesOverride)||1500,a=parseInt(this.customImageSizeRound)||this.trc.getProperty(this.mode_name,"image-size-round",this.propertiesOverride)||20,s=this.trc.getProperty(this.mode_name,"image-max-ratio",this.propertiesOverride)||2.5,o=Math.min(Math.ceil(Math.max(i.width*r,n)/a)*a,o),s=Math.max(Math.min(this.getAllowedRatio(i),s),1/s),s=Math.ceil(o*s);return t=t.replace(new RegExp("{w}","g"),o.toString()).replace(new RegExp("{h}","g"),s.toString()),TRC.performance&&TRC.performance.mark("7.1.9."+this._id),t},o.prototype.getImageSizeFactor=function(){var e=this.trc.getProperty(this.mode_name,"image-size-factor",this.propertiesOverride)||1.2;return e=this.trc.global["use-dpr-images"]&&this.trc.getProperty(this.mode_name,"use-dpr-images",this.propertiesOverride)&&TRC.dom.isHighDensity()?this.trc.getProperty(this.mode_name,"image-dpr-factor",this.propertiesOverride)||e:e},o.prototype.getAllowedRatio=function(e){for(var t=this.trc.getSortedCloudinaryRatios(),i=this.trc.getProperty(this.mode_name,"image-allowed-ratio-diff",this.propertiesOverride)||.01,e=+e.height/e.width,r=Math.abs(e-i),n=0;n<t.length;n++){var o=t[n];if(!isNaN(o)&&r<=o)return o}return e},o.prototype.isInViewPort=function(e,t){var i=TRC.visibility.getMinViewPortOffsets(this.container);return!(i<0&&Math.abs(i)>t)},o.prototype.createUtmParam=function(){return{utm:TRC.utm.join(",")+(this.utm?","+this.utm.join(","):"")}},o.prototype.postRender=function(e){if(e){var t=this.postRenderQueue.popFront();if(null==t)return void __trcDebug("TRCRBox.postRender: finished");try{t.func.call(this),TRC.pConsole(this.mode_name,"debug","executing postRender functions - see info",t.func.toString())}catch(e){__trcError("Error in TRCRBox.postRender while executing "+t.name,e)}}TRC.Timeout.set(this.postRender.trcBind(this,!0),0)},o.prototype.getPopupUrl=function(){return this.trc.getProperty(this.mode_name,"popup-custom-url",this.propertiesOverride)||"popup.taboola.com/"+(this.trc.language||"en")},o.prototype.check_visibility=function(){for(var e=0;e<this.boxes.length;e++){var t=this.boxes[e];this.itemMaxHeight&&(t.style.height=this.itemMaxHeight+"px")}},o.prototype.findElement=function(e,t,i,r){for(var n=(t=void 0===t?document:t).getElementsByTagName(i=void 0===i?"*":i),o=0;o<n.length;o++)if(e(n[o]))return n[o];return r},o.prototype.findElements=function(e,t,i){for(var r=[],n=0;e&&n<e.length;n++){var o=e[n],a=this.findElement(function(e){return 0<=e.className.search(o)},t,"span");a&&(i&&(a=a.cloneNode(!0)),r.push(a))}return r},o.prototype.getLinkTarget=function(e,t,i){return e=!(e=t&&t[e]||i[e])?"_blank":e},o.prototype.addPiggyBackParams=function(e){if(e)return e+"&ppb="+this.response.trc.ppb+"&cpb="+this.response.trc.cpb},o.prototype.detectItemFromSameHost=function(e,t){if(e===t||this.trc["detect-item-from-same-host"](e,t))return!0;for(var i=e.split(".").reverse().join(""),r=t.split(".").reverse().join(""),n=!0,o=0;o<6;o++)if(i[o]!==r[o]){n=!1;break}return n},o.prototype.createVideoLinkRel=function(e,t,i){var r;return(this.trc.global["allow-nofollow-for-exchange"]||!e["is-in-network"]||e["is-in-network"]&&!t)&&(r="nofollow",this.trc.global["disable-noopener-for-links"]||"_blank"!==i||(r+=" noopener")),this.trc.global["disable-sponsored-for-links"]||e["is-in-network"]||e["is-dc"]||(r+=" sponsored"),r},o.prototype.createVideoLink=function(a,e){var t,s,l=document.createElement("a"),i=this.ntHandlerEnabled&&a["is-in-network"],r=this.sendClickPiggyBack?this.addPiggyBackParams(a.logger_url):a.logger_url,n=!0!==this.trc.global["disable-stop-propagation"],o=TRC.pageManager.getTopMostWindow().location.hostname,c=TRC.URL(a.url).host;!0===this.response.trc["video-list"]["content-hub-forced-placement"]&&(r=r.replace("click","content-hub-click"));var d=!1,h=this.detectItemFromSameHost(o,c);return a["is-in-network"]&&TRC.hasFeedView&&this.parentFeed&&this.parentFeed.enableAEClicks&&(h?(a.scParams=a.scParams||{},a.original_url=a.original_url||a.url,d=!0):(this.feedViewExchangeFallbackEventData={eventType:"fallback",original_url:o,target_url:c},this.shouldSendFeedViewExchangeFallbackEvent=!0)),i&&(a.hasNtClckHnadler=!0),TRC.isOptim("title-decode")?l.title=e:l.title=TRC.util.getHtmlDecodeText(e),a.link_target=this.link_target,!a.isSyndicated||i||d?(l.href=a.url,"blank"!=this.link_target?TRC.util.isAmp(TRC)&&this.trc.global.amp_target?l.target=this.trc.global.amp_target:l.target="_parent":(l.target="_blank",l.onmousedown=function(e){((e=e||event).target||e.srcElement).target="_blank"}),a["is-in-network"]&&(a.scParams.prt="nt"),this.organicRedirParam&&(r=r.replace("&url=","&"+this.organicRedirParam+"=")),this.useRedirect&&this.useRedirectOnLink&&(l.href=r),l.onmousedown=function(e){e=this.attachHeatMapDataToLink(r,e);l.href=e}.trcBind(this),l.onclick=this.videoLinkClickHandler.trcBind(this,a,l,r)):(l.href=a.url,t=this.getLinkTarget(this.getProviderType(a),this.linkTargetConf,this.defaultLinkTarget),(h=this.createVideoLinkRel(a,h,t))&&(l.rel=h),l.logger_url=r.replace("&url=","&redir=")+(a["is-in-network"]?"&prt=nt":"")+(a["is-native"]?"&prt=nav":""),l.target=t,1==this.trc.global["enable-ie-split-click-event"]&&TRC.Browser.ie&&(s=2048<l.logger_url.length),!0===this.trc.global["touchstart-enabled"]&&TRC.dom.on(l,"touchstart",function(e){var t=this.attachHeatMapDataToLink(l.logger_url,e);l.href=t,l.isTouchPropagation=1,n&&e.stopPropagation()}.trcBind(this)),l.onmousedown=function(e){if(((e=e||event).target||e.srcElement).target=t,l.isTouchPropagation)return!0;s||(this.shiftRedirOnclick?l.href=l.logger_url:(e=this.attachHeatMapDataToLink(l.logger_url,e),l.href=e))}.trcBind(this),l.onclick=function(e){try{var t,i,r,n,o;TRC.clickFraudDetect.isInitialized&&a["is-syndicated"]&&(i=(t=l.search.match(/[^&??=]+/g)).indexOf("ri"),r="",-1<i&&(r+=t[i+1]),-1<(i=t.indexOf("ii"))&&(r+=(n=t[i+1].match(/^~~V1~~(-?[\d]{10,})/))?"_"+n[1]:""),o=0<=l.href.indexOf("trc.taboola.com"),TRC.clickFraudDetect.fraudScriptCallback(this.placement,TRC.pageManager.getUserId(),r,this.trc.referrer,a.itemIndex,o))}catch(e){__trcError("Publisher 'onclick' Fraud handler had an error",e)}return this.shouldSendFeedViewExchangeFallbackEvent&&this.trc.sendAbTestEvent("feedView_ae",this.feedViewExchangeFallbackEventData),this.trc.sendExternalTracking(this.getItemExternalTrackingURLsList(a).c),l.isTouchPropagation||(s?this.sendEvent("click",{ii:a["item-id"],it:a.type},null,!1):this.shiftRedirOnclick&&(e=this.attachHeatMapDataToLink(l.logger_url,e),l.href=e)),!0}.trcBind(this)),this.trc.global["events-api-click-enabled"]&&TRC.dom.on(l,"click",function(e){var t=l.target;"_blank"===(a.linkTarget=t)?setTimeout(function(){TRC.EventsAPI.dispatchClick(a,this.response.trc)}.trcBind(this),0):TRC.EventsAPI.dispatchClick(a,this.response.trc)}.trcBind(this)),l},o.prototype.attachHeatMapDataToLink=function(e,t){if(!TRC.Heatmap.isEnabled(this.trc)||!this.listContainer.heatmap)return e;try{var i=this.listContainer.heatmap,r=TRC.Heatmap.collectClickHeatmapCardData(t);return r["item-d"]=i.collectClickHeatmapItemData(t),e+"&d="+JSON.stringify(r)}catch(t){return __trcError("Error in trcrbox-ui.attachHeatMapDataToLink - "+t,t),e}},o.prototype.changeUrlProtocol=function(e,t){var i=window.location.protocol,r=new TRC.URL(e.original_url),r=r&&r.protocol;i!==r&&(this.trc.global["enable-feed-view-redirect-url"]||(e.url=e.url.replace(r,i)),i=encodeURIComponent(i),r=encodeURIComponent(r),e.logger_url=this.options&&this.options.feedViewConfig&&this.options.feedViewConfig.disableHandlePublisherChangesToFeedView?e.logger_url.replace(i,r):e.logger_url.replace(r,i),t.href=e.logger_url.replace(r,i))},o.prototype.openFeedView=function(e,t,i,r){if(this.changeUrlProtocol(e,t),!TRC.feedViewModuleLoaded||r)return"_self"!==t.target&&(t.target="_self"),!0;t=this.recommendationList&&1<this.recommendationList.length&&this.videoBoxContainer?this.videoBoxContainer:this.container;return new TRC.FeedView(this,e,t),!1},o.prototype.videoLinkClickHandler=(h=function(e,t,i,r){return i.target="_blank",r?!!TRC.Browser.firefoxUpto(8)||(e.clickLink(i.href,i.target),!1):(i.href=t.url,e.sendEvent("click",{ii:t["item-id"],it:t.type},null,!1),!0)},function(e,t,i,r){var n,o;r=r||event,TRC.feedViewModuleLoaded&&TRC.FeedView&&(o=(n=TRC.FeedView.getSelectors())&&window.frames&&window.frames.name===n.IFRAME_ID,this.enableFeedView||o)&&(s=(s=new TRC.URL(e.url))&&s.host,this.detectItemFromSameHost(window.location.host,s)?e.link_target="feedView":this.trc.sendAbTestEvent("feedView_different_domains","true"));var a,s=e.link_target,l=!1,c=this.useRedirect;switch("embed"!==s&&this.trc.sendExternalTracking(this.getItemExternalTrackingURLsList(e).c),s){case"feedView":l=this.openFeedView(e,t,n,o);break;case"blank":(r.target||r.srcElement).target="_blank",c&&(a=this.attachHeatMapDataToLink(i,r),t.href=a),l=h(this,e,t,c);break;default:c&&"local"!=e.link_target&&"function"!=typeof this.onclick&&"function"!=typeof this.trc.onclick?(this.shiftRedirOnclick&&(a=this.attachHeatMapDataToLink(i,r),t.href=a),l=!0):this.sendEvent("click",e.hasNtClckHnadler?e.scParams:{ii:e["item-id"],it:e.type},null,!1,this.publisherClickHandler.trcBind(this,e,this.clickLink.trcBind(this,e.url)),2e3)}return e.url!=e.original_url&&__trcDebug("url:"+e.original_url+", changed to:"+e.url+", on page:"+d.location.href),l||(r.cancelBubble=!0,r.stopPropagation&&r.stopPropagation()),l}),o.prototype.clickLink=function(e,t){TRC.Browser.firefoxUpto(8)&&(d.location.href=e);var i=document.createElement("a");i.href=e,i.target=t||"_parent",i.style.visibility="hidden",document.body.appendChild(i),i.click?i.click():(t=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window,button:0}),i.dispatchEvent(t))},o.prototype.publisherClickHandler=function(e,t){var i=__trcCopyProps(e,{});delete i["item-id"],delete i.link;try{if("function"==typeof this.onclick&&!this.onclick.call(this.pubOpts,i))return!1;if("function"==typeof this.trc.onclick&&!this.trc.onclick.call(this.pubOpts,i))return!1}catch(e){__trcError("Publisher 'onclick' handler had an error",e)}return t()},o.prototype.add_span=function(e,t,i){var r=document.createElement("span");return null!=e&&(r.className=e),null!=t&&("object"==typeof t?r.appendChild(t):TRC.dom.setContentToElement(r,t)),void 0!==i&&i.appendChild(r),r},o.prototype.genBidiLabel=function(e,t,i){var r,n,o=TRC.util.textIsRTL(t),a=r=t,s="video-label "+i;return this.shouldUseSmartEllipsis()&&(n=this.trc.getProperty(this.mode_name,"tokenize-strategy")||"word",t=TRC.Ellipsis._tokenizeStrategies[n],a=TRC.Ellipsis._tokenizeSingle(r.innerHTML||r,t),s+=" trc-smart-ellipsis","ltr"===this.trc.direction&&(o?s+=" tbl-rtl-label":"title"!==i&&(s+=" tbl-ltr-label"))),a=this.add_span(s,a,e),(e[i]=a).isRTL=o,a.tokenizeStrategy=n,a},o.prototype.handlePublishedDate=function(e,t){var i="published-date",e=this.trc.getProperty(this.mode_name,"format-x-days-ago",this.propertiesOverride)?TRC.DateUtils.dateFormatTimeAgo(e[i],this.trc.language,this):this.formatData(i,e[i]);"with-branding"===this.trc.getProperty(this.mode_name,"published-date-position",this.propertiesOverride)&&((i=t.querySelector(".branding"))&&TRC.dom.addClass(i,"inline-branding"),e=" "+(this.trc.getProperty(this.mode_name,"branding-separator",this.propertiesOverride)||"|")+" "+e),this.add_span("video-label video-published-date",e,t)},o.prototype.buildLabelBox=function(e,t,i){var r,n,o;for(-1!==i.indexOf("title")&&this.createTitleAndIconContainer(e),r=0;r<i.length;r++)switch(n=i[r]){case"title":this.genBidiLabel(e,t.title,"video-title");break;case"uploader":void 0!==t.uploader&&this.add_span("video-label video-uploader",this.formatData("uploader",t.uploader),e);break;case"category":void 0!==t.category&&this.add_span("video-label video-category",this.formatData("category",decodeURIComponent(t.category.split(";")[0].split("//")[0])),e);break;case"views":this.add_span("video-label video-views",this.formatData("views",t.views),e);break;case"rating":this.add_span("video-label video-rating",this.formatData("rating",t.rating),e);break;case"description":this.genBidiLabel(e,t.description,"video-description").title='"Description: '+this.removeHtmlTags(t.description)+'"';break;case"duration":void 0!==t.duration&&""!=t.duration&&this.add_span("video-label video-duration-detail",this.formatData("duration",t.duration),e);break;case"branding":o=t.isSyndicated?this.shouldHandleScBrandingWithSponsoredLink()?this.createScBrandingWithSponsoredLink(t,e):this.createScBranding(t,e):this.createOrganicBranding(t,e),e.branding=o;break;case"url":break;case"published-date":this.handlePublishedDate(t,e);break;default:void 0!==t[n]&&t[n]&&this.add_span("video-label video-"+n,this.formatData(n,t[n]),e)}},o.prototype.shouldHandleScBrandingWithSponsoredLink=function(){return"after_branding"===this.getDisclosurePosition()},o.prototype.getDisclosurePosition=function(){return this.disclosurePosition||(this.disclosurePosition=this.trc.getProperty(this.mode_name,"disclosure-position",this.propertiesOverride)),this.disclosurePosition},o.prototype.getDisclosureAlignment=function(){return this.disclosureAlignment||(this.disclosureAlignment=this.trc.getProperty(this.mode_name,"disclosure-alignment",this.propertiesOverride)),this.disclosureAlignment},o.prototype.createScBrandingWithSponsoredLink=function(e,t){var i=this.trc.getProperty(this.mode_name,"branding-separator",this.propertiesOverride);if(this.branding=this.add_span("branding composite-branding",null,t),this.add_span("branding-inner",this.formatData("syndicator",e["branding-text"]),this.branding),t=this.trc.getProperty(this.mode_name,"disclosure-link-text-sponsored",this.propertiesOverride))return"right"!==(e=this.getDisclosureAlignment())&&this.add_span("branding-separator",i,this.branding),this.renderDisclosureLinkWithBranding(this.branding,t,e),this.branding},o.prototype.createScBranding=function(e,t){return e["branding-text"]?this.add_span("branding",this.formatData("syndicator",e["branding-text"]),t):e["branding-url"]?this.add_span("branding","<img src='"+e["branding-url"]+"'>",t):void 0},o.prototype.createOrganicBranding=function(e,t){return this.add_span("branding",this.formatData("syndicator",this.getPublisherBrandingName()),t)},o.prototype.createTitleAndIconContainer=function(e){var t,i,r=this.trc.getProperty(this.mode_name,"title-icon",this.propertiesOverride)||"NONE";"CUSTOM"===r?i=this.trc.getProperty(this.mode_name,"title-icon-url",this.propertiesOverride):"PUBLISHER_LOGO"===r&&(i=this.trc.getPublisherVersionPropertyWithFallbackToNetwork("publisher-logo")),i&&(t=document.createElement("span"),r=document.createElement("img"),t.className="video-icon-container",r.className="video-icon-img trc_img",r.src=TRC.URL.prototype.switchProtocol.call(i,u),e.className+=" label-box-with-title-icon",t.appendChild(r),e.appendChild(t))},o.prototype.isUsingImageOptimizationService=function(e){var t=this.trc.global["images-host"]||"images.taboola.com";return-1<e.indexOf(t)},o.prototype.isTaboolaCDNImage=function(e){return e.match(/cdn.taboola.com\/.*thumbnails\S/)},o.prototype.logImageError=function(e,t,i,r){__trcWarn("Failed to load "+(r?r+" ":"")+"thumbnail "+e+" for item="+t+", loading "+i+" thumbnail instead",null,this.trc.global["rbox-image-error-reporting-pct"]||.1)},o.prototype.getFallbackImageForTaboolaCDNImage=function(e,t,i){var r=this.isUsingImageOptimizationService(e),n=e.search(/\Shttp\S/),n=unescape(e.slice(n+1)),i=TRC.URL.prototype.switchProtocol.call(r?unescape(n):n,i);return this.logImageError(e,t,i,"taboola CDN"),i},o.prototype.getFallbackImageForNonTaboolaCDNImage=function(e,t,i){var r=e.src,n=this.isUsingImageOptimizationService(r),o=r.search(/\Shttp\S/),a=n&&unescape(e.src.slice(o+1)),r="https:"!==i||a&&0===a.indexOf(i)||this.trc.global["always-allow-orig-image-fallback"];return 5<o&&n&&r?this.getOrigImageFromOptimizationUrl(e.src,a,t):this.getDefaultThumbnail(e,t,i)},o.prototype.getOrigImageFromOptimizationUrl=function(e,t,i){return this.logImageError(e,i,t),t},o.prototype.getDefaultThumbnail=function(e,t,i){var r=this.trc.getProperty(this.mode_name,"default-thumbnail",this.propertiesOverride),i=TRC.URL.prototype.switchProtocol.call("undefined"!=r?r:"",i);return e.onerror=null,this.logImageError(e.src,t,"default"),i},o.prototype.getRuleAspectRatio=function(e,t){return!(!e.virtualThumbWidth||!e.virtualThumbHeight||isNaN(e.virtualThumbWidth)||isNaN(e.virtualThumbHeight))&&("ratio"==t?e.virtualThumbHeight/e.virtualThumbWidth:e.virtualThumbHeight/e.virtualThumbWidth*100)},o.prototype.getThumbAspectRatio=function(e,t){try{var i=e["thumbnail-height"]/e["thumbnail-width"];return"ratio"==t?i:Math.round(100*i)}catch(e){return __trcWarn("getThumbAspectRatio",e.message),null}},o.prototype.getThumbnailURL=function(e,t,i){if(void 0===e["thumb-size"])return e.thumbnail;for(var r=[{w:e["thumb-size"].split("x")[0],h:e["thumb-size"].split("x")[1],u:e.thumbnail}],n=1;void 0!==e["thumb-size-"+n];n++)r.push({w:e["thumb-size-"+n].split("x")[0],h:e["thumb-size-"+n].split("x")[1],u:e["thumbnail-"+n]});for(var r=r.sort(function(e,t){return e.w*e.h-t.w*t.h}),o=0;o<r.length;o++)if(t*i<=r[o].w*r[o].h)return r[o].u;return r.pop().u},o.prototype.addTaboolaLogo=function(){this.renderAdchoicesLink(this.getAdchoiceConfig(),this.itemsTypes,this.adcItemTypes),this.renderAttributionLink(),this.renderDisclosureLink(),this.addClearingDiv(),this.addWidgetContentType(),TRC.ccpa.renderOnWidgetFooter(this)},o.prototype.renderAttributionLink=function(){var e=this.add_span(null,this.trc.getProperty(this.mode_name,"attribution-text",this.propertiesOverride)),t=this.trc.getProperty(this.mode_name,"attribution-position",this.propertiesOverride),i=this.trc.attribution&&"none"!=t,r=this.trc.getProperty(this.mode_name,"hide-attribution-when-no-place",this.propertiesOverride),n=this.trc["attribution-disclosure-direction"];i&&("top"===t?this.isContainerNarrowForAttribution()?r||this.generateLinksBox(this.getWidgetFooter(),e,n,"attribution",null,"bottom"):this.generateLinksBox(this.header.ext,e,n,"attribution",null,"top"):this.generateLinksBox(this.getWidgetFooter(),e,n,"attribution",null,"bottom"))},o.prototype.isContainerNarrowForAttribution=function(){if(TRC.isOptim("attribution")&&this.isFeedCard)return!1;var e=this.trc.getProperty(this.mode_name,"min-width-for-attribution",this.propertiesOverride),t=this.container.clientWidth||this.container.offsetWidth;return t&&t<e},o.prototype.adcHoverHandler=function(e,t){__trcGetElementsByClass("trc_adc_b_logo",null,e)[0].style.display=t?"inline-block":"none"},o.prototype.isAdchoicesEnabled=function(e,t,i){return!!e&&"off"!=e.status&&!!this.isAdchoiceItemTypes(t,i)},o.prototype.isAdchoiceItemTypes=function(e,t){for(var i in e)if(t[i])return!0;return!1},o.prototype.getAdchoiceConfig=function(){var e=this.trc.getProperty(this.mode_name,"adchoice-position",this.propertiesOverride);return{status:this.trc.global["has-adchoice"]&&"none"!==e?"on":"off",position:e,url:this.trc.getProperty(this.mode_name,"adchoice-target-url",this.propertiesOverride)||this.trc.global["adchoice-url"],enableBig:this.trc.getProperty(this.mode_name,"adchoice-large",this.propertiesOverride)}},o.prototype.getAdchoicesPosition=function(e,t){var i="top";return"auto"===e?(i="none"===t?i:t,this.isContainerNarrowForAttribution()&&(i="bottom")):i=e,i},o.prototype.renderAdchoicesLink=function(e,t,i){var r,n;this.hasAdChoicesLogo=this.isAdchoicesEnabled(e,t,i),this.hasAdChoicesLogo&&(r=null,n=this.getAdchoicesPosition(e.position,this.trc.getProperty(this.mode_name,"attribution-position",this.propertiesOverride)),t=e.url||null,i=this.trc["attribution-disclosure-direction"],(r=this.add_span("trc_adc_wrapper",null)).appendChild(this.add_span("trc_adc_s_logo",null)),e.enableBig&&r.appendChild(this.add_span("trc_adc_b_logo",null)),r.appendChild(f()),t="top"===n?this.generateLinksBox(this.header.ext,r,i,"adc",null,"top",t):this.generateLinksBox(this.getWidgetFooter(),r,i,"adc",null,n,t),e.enableBig&&(t.onmouseover=function(){o.prototype.adcHoverHandler(this,!0)},t.onmouseout=function(){o.prototype.adcHoverHandler(this,!1)}))},o.prototype.generateLinksBox=function(e,t,i,r,n,o,a,s){function l(e){return TRC.aboutUs.open(e)||!1}var c,d,h,u=document.createElement("div"),p=["trc_desktop_"+r+"_link","trc_mobile_"+r+"_link"],m=this.getPopupUrl(),m=TRC.PROTOCOL+"//"+TRC.shiftDomain(m)+"/?"+this.getAttributionLinkParams(),g=a||m;if(e){for(c=0;c<p.length;c++)(d=document.createElement("a")).className=p[c]+" trc_attribution_position_"+(o||"bottom"),d.rel="nofollow",this.trc.global["disable-sponsored-for-links"]||(d.rel+=" sponsored"),this.trc.global["disable-noopener-for-links"]||(d.rel+=" noopener"),d.appendChild(t.cloneNode(!0)),d.href=g,d.target="_blank",this.hasAdChoicesLogo&&((h=this.add_span("trc_logos_v_align",null)).appendChild(f()),d.appendChild(h)),c||(d.onclick=l),u.appendChild(d);return"rtl"===i&&(u.style.cssFloat=u.style.styleFloat="left"),u.className="logoDiv link-"+r+" "+(n?" attribution-disclosure-link-"+n:"")+(s?" align-"+r+"-"+s:""),e.appendChild(u),u}},o.prototype.getAttributionLinkParams=function(){var e=["template=colorbox","utm_source="+this.publisher,"utm_medium=referral","utm_content="+this.mode_name+":"+this.placement+":"+(this.trc["test-variant"]||"")];return!this.trc.global["show-rtb-ad-choices-icon"]&&this.privacyId&&e.push("plink="+this.privacyId),e.join("&")},o.prototype.addWidgetContentType=function(){var e=this.getWidgetContentType(this.itemsTypes);this.element.className+=" "+("sponsored"===e&&0<TRC.blocker.blockedState&&this.trc.global["switch-abp-class"]?this.trc.global["switch-abp-class"]["trc-content-sponsored"]:"trc-content-"+e)+" "},o.prototype.getWidgetContentType=function(e){var t=e["is-syndicated"]||e["is-in-network"]||e["is-native"];return t&&e["is-organic"]?"hybrid":t?"sponsored":"organic"},o.prototype.getItemsTypesList=function(e){for(var t,i={},r=0;t=e[r];r++)t["is-syndicated"]?i["is-syndicated"]=!0:t["is-in-network"]?i["is-in-network"]=!0:t["is-native"]?i["is-native"]=!0:i["is-organic"]=!0,t["is-adc"]&&(i["is-adc"]=!0);return i},o.prototype.getPrivacyId=function(e){for(var t,i=0;t=e[i];i++)if(t.plink)return t.plink;return null},o.prototype.getWidgetFooter=function(){var e=this.getWidgetToFeedHelper();return this.footer||(this.footer=document.createElement("div"),this.footer.className="trc-widget-footer",e&&!e.getFooter()?e.addFooterToFeed(this.footer):this.element.appendChild(this.footer)),this.footer},o.prototype.renderDisclosureLink=function(){var e,t=this.trc.getProperty(this.mode_name,"min-width-for-disclosure",this.propertiesOverride),i=this.trc.getProperty(this.mode_name,"hide-disclosure-when-no-place",this.propertiesOverride),r=this.add_span(null,this.trc.getProperty(this.mode_name,"disclosure-link-text-sponsored",this.propertiesOverride)),n=this.add_span(null,this.trc.getProperty(this.mode_name,"disclosure-link-text-hybrid",this.propertiesOverride)),o=this.trc["attribution-disclosure-direction"];"none"!==this.getDisclosurePosition()&&"after_branding"!==this.getDisclosurePosition()&&(e=this.isFeedCard&&TRC.isOptim("disclosure")?0:this.container.clientWidth||this.container.offsetWidth,"bottom"!==this.getDisclosurePosition()&&this.isHeaderExtContainerAvailable()&&(!e||t<=e)?(this.generateLinksBox(this.header.ext,r,o,"disclosure","sponsored","top"),this.generateLinksBox(this.header.ext,n,o,"disclosure","hybrid","top")):i||(this.generateLinksBox(this.getWidgetFooter(),r,o,"disclosure","sponsored","bottom"),this.generateLinksBox(this.getWidgetFooter(),n,o,"disclosure","hybrid","bottom")))},o.prototype.renderDisclosureLinkWithBranding=function(e,t){var i=this.add_span(null,t),t="right"===this.getDisclosureAlignment()?this.trc.direction:null;this.generateLinksBox(e,i,t,"disclosure","sponsored",this.getDisclosurePosition(),null,this.getDisclosureAlignment())},o.prototype.isHeaderExtContainerAvailable=function(){return this.header.ext&&"No Header"!=this.trc.getProperty(this.mode_name,"header",this.propertiesOverride)},o.prototype.addClearingDiv=function(){var e=document.createElement("div");e.className="trc_clearer",this.element.appendChild(e)},o.prototype.genDuration=function(e){var t=this.formatDuration(e),i=document.createElement("dt");i.style.position="absolute",i.style.overflow="hidden",i.style.height="auto",i.style.width="auto",i.style.zIndex=48,i.style.right=0;e=document.createElement("div");return e.style.zIndex=50,e.style.paddingLeft="4px",e.style.paddingRight="4px",e.innerText=t,i.appendChild(e),i},o.prototype.fixBoxOverflow=function(e,t,i,r,n,o){return TRC.util.isPercentEnabled(TRCImpl.global,"enable-new-ellipsis-module")?TRC.LineClamp.fixBoxOverflow(e,t,i,r,n,o,this.useNativeLineClamp,this.shouldUseSmartEllipsis()):this.legacyFixBoxOverflow(e,t,i,r,n,o)},o.prototype.legacyFixBoxOverflow=function(e,t,i,r,n,o){var a=!1;if(!(null==e||this.useNativeLineClamp&&(a=this.setupBoxLineClamp(e)))){if(this.shouldUseSmartEllipsis()&&!a)return __trcDebug("Skipping fixBoxOverflow due to feature flag.");if(TRC.ellipsisPerf&&console.timeStamp("Taboola old ellipsis"),!(e.clientHeight<=0||e.clientWidth<=0)){var s=!1;e.parentNode.font=this.getFontSize(e);var l=e.innerHTML;e.innerText="";var a=this.add_span(null,"H",e),c=Math.max(a.offsetHeight,a.clientHeight),d=Math.max(0,e.scrollHeight-e.clientHeight);for(e.removeChild(a),TRC.dom.setContentToElement(e,l),this.addInlineElementsForMeasure(e.inlineDetailsElements,e,!0),e.inlineDetailsElementsHTML=e.innerHTML.replace(l,""),t=t.replace(/^\s+|\s+$/g,"");e.clientHeight+d+c/2<e.scrollHeight&&t.length;)s=!0,t=this.truncateOverflowingText(e,t,i),e.inlineDetailsElementsHTML&&(e.innerHTML+=e.inlineDetailsElementsHTML);this.hideClonedElementsAfterMeasure(n,o),TRC.Browser.ie&&!s&&(e.style.height="auto")}}},o.prototype.setupBoxLineClamp=function(e){TRC.dom.removeClass(e,"trc_ellipsis");var t=parseInt(document.trcGetCurrentStyle(e,"line-height"),10),i=parseInt(document.trcGetCurrentStyle(e,"height"),10),t=t&&i?Math.round(i/t).toString():null;return!(!t||e.isRTL||"rtl"==document.trcGetCurrentStyle(e,"direction")||(TRC.dom.addClass(e,"trc_ellipsis"),TRC.css.utils.setStyleProperty(e,"-webkit-line-clamp",t,!1),e.parentNode.font=this.getFontSize(e),0))},o.prototype.truncateOverflowingText=function(e,t,i){t=i&&0<=t.search(/\s/)?t.replace(/\s+\S+$/,""):t.substr(0,t.length-1);var r=e.getElementsByTagName("bde");e.inlineDetailsElementsHTML&&r.length&&(i=e.innerHTML.replace(e.inlineDetailsElementsHTML,""),TRC.dom.setContentToElement(e,i)),0<e.getElementsByTagName("span").length&&e.removeChild(e.getElementsByTagName("span")[0]);r=0<r.length?r[0]:e;return TRC.dom.setContentToElement(r,t),this.add_span(null,document.createTextNode("â€¦"),e),t},o.prototype.addInlineElementsForMeasure=function(e,t,i){for(var r,n,o=0;e&&o<e.length;o++)r=e[o],!this.findElement(function(e){return 0<=e.className.search(r)&&e.parentNode===t},t)&&r&&((n=document.createElement("span")).className="trc_inline_detail_spacer",n.innerHTML=" ",t.appendChild(n),t.appendChild(i?r.cloneNode(!0):r))},o.prototype.hideClonedElementsAfterMeasure=function(e,t){for(var i,r,n=0;e&&n<e.length;n++)i=e[n],(r=this.findElement(function(e){return 0<=e.className.search(i)&&e.parentNode===t},t,"span"))&&(r.style.display="none")},o.prototype.removeHtmlTags=function(e){return e.replace(new RegExp("<[^>]+>","g"),"")},o.prototype.formatData=function(e,t){var i=this.trc.getProperty(this.mode_name,"format-"+e,this.propertiesOverride);return"function"==typeof(i=i||"%s")?i.call(this,t):(void 0===(t=0<=e.search("duration")||0<=e.search("Duration")?this.formatDuration(t):t)&&(t=""),i.replace(new RegExp("%\\w"),'<dt style="display:inline">'+t+"</dt>"))},o.prototype.formatDuration=function(e){var t=parseInt(e/3600);1<=t?e%=3600:t=0;var i=parseInt(e/60),r=parseInt(e%60);return"number"!=typeof t||"number"!=typeof i||"number"!=typeof r||isNaN(t)||isNaN(i)||isNaN(r)||e<1?"":(1<=t?t+":":"")+(i<10?"0":"")+i+":"+(r<10?"0":"")+r},o.prototype.formatNumber=function(e){return void 0===e?"":this.trc.runHook(this,this.mode_name,"format-number",this.propertiesOverride,!1,e)},o.prototype.dateFormatISO=TRC.DateUtils.dateFormatISO,o.prototype.dateFormatAmerican=TRC.DateUtils.dateFormatAmerican,o.prototype.dateFormatEuropean=TRC.DateUtils.dateFormatEuropean,o.prototype.getFontSize=function(e){for(var t=0,i=!1,r=document.trcGetCurrentStyle(e,"font-size"),n=["px","pt","em","ch"];!i&&t<n.length;){if(r.indexOf(n[t])){switch(r=parseInt(r),n[t]){case"px":break;case"pt":r/=.75;break;case"em":case"ch":r*=10}i=!0}t++}return r},o.prototype.sendExploreEvent=function(){this.exploreTimeoutId&&(TRC.Timeout.clear(this.exploreTimeoutId),this.exploreTimeoutId=null),this.sendEvent("explore",{},null,!0)},o.prototype.onMouseOverExploreTrackerHandler=function(e,t){t=(t=t||d.event).target||t.srcElement;t!=this.container&&null!=this.exploreTimeoutId||t==this.container&&null!=this.exploreTimeoutId||(this.exploreTimeoutId=TRC.Timeout.set(this.sendExploreEvent.trcBind(this),e))},o.prototype.setExploreTracker=function(){var e=0;this.exploreTimeoutId=null,void 0!==this.trc.global&&(e=this.trc.global["explore-delay"]||e),this.container.onmouseover=this.onMouseOverExploreTrackerHandler.trcBind(this,e),0!=e&&(this.container.onmouseout=this.onMouseOutExploreTrackerHandler.trcBind(this))},o.prototype.onMouseOutExploreTrackerHandler=function(e){e=e||d.event;var t=this.container.getBoundingClientRect();e.clientX>=t.left&&e.clientX<t.right&&e.clientY>=t.top&&e.clientY<t.bottom||this.exploreTimeoutId&&(TRC.Timeout.clear(this.exploreTimeoutId),this.exploreTimeoutId=null)},o.prototype.resetBoxes=function(){this.boxes=[]},o.prototype.setResponsiveRules=function(e,t){var i;TRC.css.responsive.injectedStyles[e]&&!this.disableResponsiveCSSReuse||((i=this.trc.getProperty(this.mode_name,"responsive-rules",this.propertiesOverride))?this.setOnStandardResponsiveRules(e,t,i):this.setOnAutoSizeResponsiveRules(e,t,this.trc.getProperty(this.mode_name,"auto-size-rules",this.propertiesOverride)),TRC.css.responsive.injectedStyles[e]=!0)},o.prototype.setOnStandardResponsiveRules=function(e,t,i){var r=this.trc.getProperty(this.mode_name,"rows",this.propertiesOverride),n=this.trc.getProperty(this.mode_name,"carousel-min-items",this.propertiesOverride)||1.33;try{for(var o=this.responsiveRules=[],a=0,s=i.length;a<s;a++)o[a]={rows:i[a].rows||r||1,cells:i[a].cells,min:i[a].minWidth,max:i[a].maxWidth,margin:i[a].margin.h,ratio:this.getRuleAspectRatio(i[a])||this.getThumbAspectRatio(this.trc.modes[this.mode_name])||100*this.DEFAULT_THUMB_RATIO};TRC.css.utils.setStyleElements(TRC.css.responsive.rulesToCssText(e,this.responsiveRules,t,this.trc.cssReset,this.isWCTextLinks,this.trc.direction,this.isCarousel,n))}catch(e){__trcError("Error in setOnStandardResponsiveRules : ",e.message)}},o.prototype.setOnAutoSizeResponsiveRules=function(e,t,i){var r=TRC.dom.getWindowWidth(),n=0<this.container.clientWidth?this.container.clientWidth:this.container.offsetWidth,o=r/n,a=this.trc.getProperty(this.mode_name,"rows",this.propertiesOverride),r=this.trc.getProperty(this.mode_name,"carousel-min-items",this.propertiesOverride);try{for(var s=this.responsiveRules=[],l=0,c=i.length;l<c;l++)s[l]={rows:i[l].rows||a||1,cells:i[l].n,min:o*i[l].minWc,margin:Math.round((i[l].maxWsRange+i[l].minWsRange)/2)/n*100,ratio:this.getThumbAspectRatio(this.trc.modes[this.mode_name])||i[l].ratio||100*this.DEFAULT_THUMB_RATIO};TRC.css.utils.setStyleElements(TRC.css.responsive.rulesToCssText(e,this.responsiveRules,t,this.trc.cssReset,!1,this.trc.direction),this.isCarousel,r)}catch(e){__trcError("Error in setOnAutoSizeResponsiveRules : ",e.message)}},o.prototype.setMetaAttribute=function(e){e.meta={},__trcCopyProps(this.trc,e.meta),delete e.meta["video-list"]},o.prototype.drawResponsiveList=function(e){TRC.tlf&&console.timeStamp("start mode - "+this.mode_name),TRC.tlf&&console.group("mode - "+this.mode_name),TRC.tlf&&console.time("mode rendering");var t=this.listContainer,i=document.createElement("div"),r=this.recommendationList.length,n=0,o=1e3,a=TRC.dom.closest(this.getContainer(),".trc_related_container"),s="trc_elastic";TRC.pConsole(this.mode_name,"debug","start drawing responsive mode - see info",this.trc.getProperty(this.mode_name,"responsive-rules",this.propertiesOverride),"object"),this.internalContainer=i,this.orientation=this.trc.getProperty(this.mode_name,"orientation",this.propertiesOverride);var l=this.disableResponsiveCSSReuse?this.id:this.mode_name;TRC.dom.addClass(a,s+" "+s+"_"+l),this.resetBoxes(),i.id="internal_"+this.id,TRC.dom.clearInnerElements(t),t.appendChild(i),this.setExploreTracker(),this.setMetaAttribute(i),this.firstVideo=null,this.setResponsiveRules(s+"_"+l,r),this.pasreRecommendationList(r,this.hasDuration(),i),this.trc.global["smart-ellipsis"]||(this.isClassFilter?TRC.listen("IE_ClassShift",this.fixResponsiveVideoBoxes.trcBind(this)):(TRC.dom.on(d,"resize",this.fixResponsiveVideoBoxes.trcBind(this).trcThrottle(500)),TRC.listen("videoCubeChange",this.fixResponsiveVideoBoxes.trcBind(this)))),(!this.boxes.length||this.boxes.length<=0)&&(r=this.response.feedPlacement||this.placement,TRC.dispatch("onRboxFlowError",{placement:r})),TRC.dom.addClass(this.boxes[0],"trc-first-recommendation trc-spotlight-first-recommendation"),this.postRenderQueue.pushBack("list-suffix,publisher-end",function(e){this.trc.runHook(this,this.mode_name,"list-suffix",this.propertiesOverride,!0,e,this),this.trc["publisher-end"](this.id),TRC.CustomModulesManager.runHook("publisher-end",null,this,this.id)}.trcBind(this,i)),this.postRenderQueue.pushBack("checkForBlocking",this.checkForBlocking.trcBind(this)),this.postRender(),this.visibleTimeoutId=null,void 0!==this.trc.global&&(n=this.trc.global["visible-delay"]||n,o=this.trc.global["visible-cycle"]||o),TRC.fallbackApi.finalize(this),TRC.Heatmap.isEnabled(this.trc)&&this.attachHeatMapToContainer(a),this.visibilityReporter=new TRC.WidgetVisibilityReporter(this),TRC.eventDelegator.dispatch("onrender",{name:this.mode_name,container:this.container,placement:this.orig_placement}),TRC.EventsAPI.dispatchRender(e,this),TRC.tlf&&console.timeEnd("mode rendering"),TRC.tlf&&console.groupEnd()},o.prototype.attachHeatMapToContainer=function(e){this.isFeedCard?this.listContainer.heatmap=this.getCurrentFeed(e).heatmap:(this.listContainer.heatmap=new TRC.Heatmap(this.trc),TRC.dom.on(this.listContainer,"click",function(e){this.listContainer.heatmap.captureAndSendClickData(e)}.bind(this)))},o.prototype.getCurrentFeed=function(e){var t,i=this.trc.feedsManager.feeds,r=e.getAttribute("data-placement-name");for(t in i)if(i.hasOwnProperty(t)&&-1<r.indexOf(t))return i[t]},o.prototype.createVideoBoxDirectURL=function(e){var t,i=e.video_data,r=i.url;try{i.isSyndicated||(i.original_url=r,t=this.formatTrackingParam()||this.tracking,(r=this.trc.runHook(this,this.mode_name,"change-url",this.propertiesOverride,!1,r,e,t))===i.original_url&&t&&(r=TRC.URL.prototype.addParamsToUrl(r,t))),i.url=r,e.directURL=r}catch(e){__trcError("Error in createVideoBoxDirectURL",e)}},o.prototype.formatTrackingParam=function(){var r=this.getModeClientProperty("organic-tracking-params");if(r)return Object.keys(r).reduce(function(e,t,i){return e+(0!==i?"&":"")+t+"="+r[t]},"")},o.prototype.createVideoBoxClickUrlParams=function(e,t){var i=this.response&&this.response.trc?this.response.trc["session-data"]:null,i={pi:this.trc.getItemId(),ri:this.response.trc.req,sd:this.trc.getSessionData(i),ui:TRC.pageManager.getUserId(),it:e.type,ii:e["item-id"],pt:this.getItemType(),li:this.listContainer.id,sig:e.sig,url:t,vi:this.cachedViewId||TRC.pageManager.getPageData(),p:e.isSyndicated?e.publisher:"",r:Math.floor(100*Math.random())},t=this.trc.formattedTRCRequest&&this.trc.formattedTRCRequest.tmpl,e=this.response.trc["placement-group"];return t&&(i.tmpl=t),e&&(i.pg=e),i},o.prototype.createVideoBoxClickUrlWithParams=function(e){var t,i,r=[];for(i in e)e.hasOwnProperty(i)&&e[i]&&(this.trc["normalize-log-param"](i,e[i]),r.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i])));return t=u+"//"+this.domain+"/"+encodeURIComponent(this.trc["normalize-log-param"]("publisher",TRC.publisherId))+"/log/3/click?"+r.join("&"),this.trc.enableExperimentsVariantIdEvent&&this.trc.experimentsVariantIdParamsStr&&(t+="&"+this.trc.experimentsVariantIdParamsStr),this.trc.getLoaderTypesValue()&&(t+="&"+this.trc.getLoaderTypesValue()),t},o.prototype.createVideoBoxClickUrl=function(e,t){t=this.createVideoBoxClickUrlParams(e,t);return this.createVideoBoxClickUrlWithParams(t)},o.prototype.fixResponsiveBoxTitleAndDesc=function(t){var i=t.labelsBox,r=t.video_data,n=t.link,o=this.getDetailSpansFromLabelsBoxes("title",t),a=this.getDetailSpansFromLabelsBoxes("description",t);try{if(!this.trc.global["smart-ellipsis"])for(var e=0;e<o.length;e++)TRC.dom.setContentToElement(o[e],t.getAttribute("data-item-title"));setTimeout(function(){for(var e=0;e<o.length;e++)this.fixBoxOverflow(o[e],t.getAttribute("data-item-title"),!1,"false"!=r["truncate-title"]);r.thumbUnder&&i.font&&(n.style.fontSize=i.font+"px")}.trcBind(this),0),a.length&&setTimeout(function(){for(var e=0;e<a.length;e++)this.fixBoxOverflow(a[e],r.description,!0,!0)}.trcBind(this),0)}catch(t){__trcError("Problem in fixResponsiveBoxTitleAndDesc",t)}},o.prototype.getDetailSpansFromLabelsBoxes=function(e,t){e=t.querySelectorAll('.video-label-box [class*="'+e+'"]');return[].slice.call(e)},o.prototype.createVideoBoxLabels=function(e){var t=document.createElement("span");return this.setVideoBoxLabelsClass(t),e.appendChild(t),t},o.prototype.setVideoBoxLabelsClass=function(e){e.className="video-label-box"},o.prototype.createThumbBlockHolder=function(e,t,i){var r=a.createElement("div");r.className="thumbBlock_holder",t.appendChild(r),this.createVideoBoxThumbBlock(e,r,i),this.createVideoBoxAspect(r,e)},o.prototype.createVideoBoxAspect=function(e,t){var i=document.createElement("div");i.className="videoCube_aspect",e.appendChild(i),t.thumbnail_aspect=i},o.prototype.drawVideoBoxThumbnailLink=function(e,t,i,r){return e.img_src=this.getThumbnailURL(i,this.trc.getProperty(this.mode_name,"thumbnail-width",this.propertiesOverride),this.trc.getProperty(this.mode_name,"thumbnail-height",this.propertiesOverride)),r=this.createVideoLink(i,r),TRC.dom.addClass(r,"item-thumbnail-href"),this.createThumbBlockHolder(e,r,t),r},o.prototype.createVideoBoxThumbBlock=function(e,t,i){var r=document.createElement("span"),n=e.video_data;i||"video"!=n.type||void 0===n.duration||""==n.duration||"0"==n.duration||this.genDuration(n.duration),r.className="thumbBlock",n.imageIframe&&(this.drawImageIframe(r,n.imageIframe,e.link.logger_url),e.hasFloatingButton=!0),e.thumbBlock=r,t.appendChild(r)},o.prototype.setVideoBoxImageHandlers=function(e,t,i){e.onerror=this.responsiveImageOnErrorHandler.trcBind(this,e,t,i,u),e.onload=this.responsiveImageOnLoadHandler.trcBind(this,e,t,i)},o.prototype.responsiveImageOnErrorHandler=function(e,t,i,r){var n=e.src,o=n.search(/\Shttp\S/),i=i["item-id"];if(5<o&&this.isTaboolaCDNImage(n)&&!TRC.Browser.ie)return n=this.getFallbackImageForTaboolaCDNImage(n,i,r),void(t.img_src=e.src=n);n=this.getFallbackImageForNonTaboolaCDNImage(e,i,r),t.thumbBlock.style.backgroundImage="URL('"+n+"')"},o.prototype.responsiveImageOnLoadHandler=function(e,t,i){e&&e.complete?this.appendVideoBoxImage(t):TRC.Timeout.set(arguments.callee.trcBind(this,t.thumbBlock,e),50)},o.prototype.fixResponsiveVideoImage=function(e,t,i){var r;if(this.imageOptimizePrefixFlag)return t.style.visibility="visible",t.style.width="100%",void(t.style.height="100%");var n,o,a,s,l=e.thumbBlock,c=l.clientWidth,d=l.clientHeight,h=this.isCssImportant,l=TRC.css.utils;if(0!=d&&0!=c&&0!=t.height)try{c/d>(n=this.getImageAspectRatio(t))?(o=Math.floor(c/n),a=Math.floor((d-o)/2),l.setStyleProperty(t,"width",c+"px",h),0!=a&&(t.style.position="relative",l.setStyleProperty(t,"top",a+"px",h))):(r=Math.floor(d*n),s=Math.floor((c-r)/2),l.setStyleProperty(t,"height",d+"px",h),0!=s&&(t.style.position="relative","ltr"==this.trc.direction?l.setStyleProperty(t,"left",s+"px",h):l.setStyleProperty(t,"left",-1*s+"px",h))),t.style.visibility="visible"}catch(e){alert(e.message),__trcError("Error in fixResponsiveVideoImage : ",e.message)}else i||TRC.Timeout.set(this.fixResponsiveVideoImage.trcBind(this,e,t,!0),500)},o.prototype.getImageAspectRatio=function(e){return e.trcRatio||(e.trcRatio=e.width/e.height),e.trcRatio},o.prototype.createVideoBoxImageLoader=function(e){var t=new Image,i=e.video_data,r=e.thumbBlock;this.trc.global["thumb-lazy-load-switch"]&&this.updateThumbnailStack(t),t.style.visibility="hidden",e.img=t,this.setVideoBoxImageHandlers(t,e,i),this.trc.global["use-delay-image-load"]?TRC.Timeout.set(this.setImageLoad.trcBind(this,t,e,e.img_src,100,r,this.trc.global["thumb-lazy-load-switch"]),10):this.setImageLoad(t,e,e.img_src,100,r,this.trc.global["thumb-lazy-load-switch"]),this.add_span("thumbnail-overlay",null,r),i.isSyndicated&&this.addVideoBoxBranding(r,i),new TRC.ThumbnailOverlayComponents(r,i.isSyndicated,this)},o.prototype.updateThumbnailStack=function(e){this.thumbnailImageStack=this.thumbnailImageStack||[],this.thumbnailImageStack.push(e)},o.prototype.addVideoBoxBranding=function(e,t){var i=document.createElement("span");i.className="branding",t["branding-text"]?i.appendChild(document.createTextNode(this.formatData("syndicator",t["branding-text"]))):t["branding-url"]&&this.createBrandingImage(i,t["branding-url"]),e.appendChild(i)},o.prototype.createBrandingImage=function(e,t){var i=a.createElement("img");i.src=t,e.appendChild(i)},o.prototype.createVideoBoxThumbLink=function(e,t){try{var i,r=e.video_data,n=e.thumbnail_position,o=this.drawVideoBoxThumbnailLink(e,t,r,e.getAttribute("data-item-title"));"under"===n?(o.title=e.link.title="",e.insertBefore(o,e.link),TRC.StoryWidget.shouldInitStoryWidget(this)?TRC.StoryWidget.setTextOverForStoryWidget(this,e):(i=document.createElement("span"),TRC.dom.addClass(e.link,"tbl-text-over-container"),TRC.dom.addClass(i,"tbl-text-over"),e.link.appendChild(i)),this.findElement(function(e){return 0<=e.className.search("title")},e.labelsBox,"span",null),r.thumbUnder=!0):"bottom"===n?e.appendChild(o):e.insertBefore(o,e.link)}catch(e){__trcError("Error in createVideoBoxThumbLink",e)}},o.prototype.setVideoBoxDataAttr=function(e,t){e.setAttribute("data-item-id",t["item-id"]),e.setAttribute("data-item-title",t.title),e.setAttribute("data-item-thumb",this.getThumbnailURL(t,100,80)),e.setAttribute("data-item-syndicated",!!t.isSyndicated)},o.prototype.getThumbnailPosition=function(e,t){return t||this.trc.getProperty(this.mode_name,"thumbnail-position",this.propertiesOverride)},o.prototype.drawResponsiveVideoBox=function(e,t,i,r,n,o){var a,s=this.videoBoxContainer=document.createElement("div");try{return t=__trcCopyProps(t,{},{isSyndicated:t["is-syndicated"]||t["is-in-network"]||t["is-native"],isPhoto:"photo"===t.type,isText:"text"===t.type,imageIframe:t.hasOwnProperty("image-iframe")&&t["image-iframe"],tags:"string"==typeof t.tags?TRC.text.parseCSV(t.tags):[]}),this.setApiItemsData(t),this.createResponsiveVideoBox(s,t,n,o),"none"!==s.thumbnail_position&&this.createVideoBoxThumbLink(s,i),this.createResponsiveLabelsBoxes(s),this.createCallToActionButton(this,s),!TRC.botDetected&&t[TRC.TrackingScriptLoader.TRC_SCRIPT_TAGS_ATTRIBUTE]&&0<t[TRC.TrackingScriptLoader.TRC_SCRIPT_TAGS_ATTRIBUTE].length&&(a=this.outermostContainer.id||this.placement.split(" ").join("-"),a+="-"+t.itemIndex,TRC.TrackingScriptLoader.renderScriptTagIntoVideoBox(s,t,a)),this.trc.runHook(this,this.mode_name,"item-renderer",this.propertiesOverride,!0,s,s.video_data),e.appendChild(s),this.fixResponsiveBoxTitleAndDesc(s),this.boxes.push(s),this.shouldHandleScBrandingWithSponsoredLink()&&TRC.Browser.ieUpto(10)&&this.handleBrandingWithDisclosureContainerWidth(),t.imageIframe||this.createVideoBoxImageLoader(s),TRC.BlockClicksManager.isBlockClicksEnabled(this.trc.global,t)&&new TRC.BlockClicksManager(this,s,t),s}catch(e){__trcError("Error in drawResponsiveVideoBox",e)}return null},o.prototype.createResponsiveLabelsBoxes=function(e){this.buildLabelBox(e.preLabelsBox,e.video_data,e.pre_detail_order),this.buildLabelBox(e.labelsBox,e.video_data,e.detail_order)},o.prototype.createCallToActionButton=function(e,t){this.trc.global["enable-call-to-action-creative-component"]&&this.trc.getProperty(this.mode_name,"ctaWidget")&&(TRC.ctaManager=TRC.ctaManager||new TRC.CTAManager,TRC.ctaManager.shouldRenderCTAForItem(e,t)&&TRC.CTAManager.renderCTAItem(e,t))},o.prototype.handleBrandingWithDisclosureContainerWidth=function(){var e,t,i=this.branding;i&&(e=i.querySelector(".branding-inner"),t=i.querySelector(".branding-separator"),i=i.querySelector(".logoDiv"),t=t&&TRC.dom.getOuterWidth(t),i=TRC.dom.getOuterWidth(i),e.style.maxWidth="calc(100% - "+(t+i)+"px)")},o.prototype.createResponsiveVideoBox=function(e,t,i,r){e.rbox=this,e.video_data=t,e.thumbnail_position=this.getThumbnailPosition(t,r||null),this.setVideoBoxDataAttr(e,t),this.setVideoBoxClassName(e),this.createVideoBoxDirectURL(e),t.logger_url=this.createVideoBoxClickUrl(e.video_data,e.directURL),e.setAttribute("data-item-title",t.title),this.setVideoBoxDetailsOrder(e,i||null),this.createDetailsLabelsContainers(e)},o.prototype.createDetailsLabelsContainers=function(e){var t=0;0<e.pre_detail_order.length&&(this.createVideoBoxPreThumbnailLink(e),t++),0<e.detail_order.length&&(this.createVideoBoxAfterThumbnailLink(e),t++),1<t&&TRC.dom.addClass(e,"trc-split-label")},o.prototype.setVideoBoxClassName=function(e){var i=0,r=this.isResponsive,n=this.trc.getProperty(this.mode_name,"orientation",this.propertiesOverride),o=0<TRC.blocker.blockedState&&this.trc.global["switch-abp-class"]?this.trc.global["switch-abp-class"].syndicatedItem:TRC.SYNDICATED_CLASS_NAME;this.setVideoBoxClassName=function(e){var t=e.video_data;e.className="videoCube trc_spotlight_item origin-"+t.origin+" thumbnail_"+e.thumbnail_position+(t.isSyndicated?" "+o:"")+(t["is-in-network"]?" inNetworkItem":"")+(t["is-native"]?" tabNativeItem":"")+(t.isPhoto?" photoItem":"")+(t.isText?" textItem":"")+" "+(r?"videoCube_"+(i+=1)+"_child":n)},this.setVideoBoxClassName(e)},o.prototype.setVideoBoxDetailsOrder=function(e,t){var i=t||this.trc.getProperty(this.mode_name,"detail-order"+(e.video_data.isSyndicated?"-syndicated":""),this.propertiesOverride),t=this.trc.getProperty(this.mode_name,"before-detail-order"+(e.video_data.isSyndicated?"-syndicated":""),this.propertiesOverride);e.detail_order=i?i.split(","):[],e.pre_detail_order=t?t.split(","):[]},o.prototype.createVideoBoxAfterThumbnailLink=function(e){var t=e.video_data,i=e.getAttribute("data-item-title"),i=this.createVideoLink(t,i);e.labelsBox=this.createVideoBoxLabels(i),e.appendChild(i),e.link=i,TRC.dom.addClass(i,"item-label-href"),TRC.dom.addClass(e.labelsBox,"trc-main-label")},o.prototype.createVideoBoxPreThumbnailLink=function(e){var t=e.video_data,i=e.getAttribute("data-item-title"),i=this.createVideoLink(t,i);e.preLabelsBox=this.createVideoBoxLabels(i),e.appendChild(i),e.preLink=i,TRC.dom.addClass(i,"item-label-href"),TRC.dom.addClass(e.preLabelsBox,"trc-pre-label"),TRC.dom.addClass(e,"item-has-pre-label")},o.prototype.appendVideoBoxImage=function(e){try{null==e.img_src&&!this.trc.global["thumb-lazy-load-switch"]||(void 0===e.image_div?e.thumbBlock.style.backgroundImage="URL('"+e.img_src+"')":(e.thumbBlock.appendChild(e.image_div),e.image_div.appendChild(e.img),e.img.style.visibility="visible"))}catch(e){__trcError("Pager thumbnail images fixing errors",e)}},o.prototype.pasreRecommendationList=function(e,t,i){var r,n;this.stopBoxRendering=!1;for(var o=0;o<e;o++){TRC.tlf&&0===o&&console.time("item rendering"),(r=this.recommendationList[o]).itemIndex=o,null==this.firstVideo&&"video"==r.type&&(this.firstVideo=r);try{this.trc.runHook(this,this.mode_name,"item-data-filter",this.propertiesOverride,!1,r),this.fixHeight&&!this.stopBoxRendering?(n=this.drawResponsiveVideoBox(i,r,t,this.orientation),this.stopBoxRendering=this.hasMaxHeightExploitation(parseInt(document.trcGetCurrentStyle(this.container,"height"),10),this.fixHeight),this.stopBoxRendering&&this.safeRemoveItem(n)):this.fixHeight||this.drawResponsiveVideoBox(i,r,t,this.orientation,null,null)}catch(e){__trcError("Error in pasreRecommendationList",e)}TRC.tlf&&0==o&&console.timeEnd("item rendering")}},o.prototype.safeRemoveItem=function(e){var t=e.parentNode;TRC.dom.clearInnerElements(e),t.removeChild(e)},o.prototype.hasMaxHeightExploitation=function(e,t){return t<=e},o.prototype.fixResponsiveVideoBoxes=function(){for(var e=this.boxes,t=0,i=e.length;t<i;t++)this.fixResponsiveBoxTitleAndDesc(e[t])},o.prototype.createSponsoredOverlay=function(e){var t=a.createElement("span");t.className="trc_sponsored_overlay",e.appendChild(t)},o.prototype.setSponsoredOverlayClass=function(e,t){t.className="thumbnail"==e?"trc_sponsored_overlay_base":"trc_sponsored_overlay_base round"},o.prototype.genrateResponsiveSponsoredLabel=function(e,t){var i=this.trc.getProperty(this.mode_name,"sponsored-location",this.propertiesOverride);if(i.match(/^thumbnail/)){var r=document.createElement("span");try{this.setSponsoredOverlayClass(i,r),this.createSponsoredOverlay(r),t.appendChild(r),e.spnoverlay=r}catch(e){__trcError("Error while generating sponsored label",e)}}},o.prototype.generateResponsiveOuters=function(e){var t;null==this.listContainer&&(this.header=this.generateHeader(e),(t=a.createElement("div")).id=this.id.replace("trc_","outer_"),t.className="trc_rbox_outer",this.generateResponsiveRBoxDiv(t),e.appendChild(t),this.outerBox=t,this.addTaboolaLogo(),e.style.display="block")},o.prototype.generateResponsiveRBoxDiv=function(e){var t=a.createElement("div");t.id=this.getListId(),t.className="trc_rbox_div trc_rbox_border_elm",e.appendChild(t),this.listContainer=t},o.prototype.getAllExternalTrackingURLsList=function(){var e,t=this.response.trc["video-list"].video;try{if(!this.externalTrackingURLsList){this.externalTrackingURLsList={};for(var i=0;t&&i<t.length;i++)for(var r in e=this.getItemExternalTrackingURLsList(t[i]))e.hasOwnProperty(r)&&(this.externalTrackingURLsList[r]||(this.externalTrackingURLsList[r]=[]),this.externalTrackingURLsList[r]=this.externalTrackingURLsList[r].concat(e[r]))}return this.externalTrackingURLsList}catch(t){return __trcError("Error in TRCRBox.getAllExternalTrackingURLsList"),{}}},o.prototype.getItemExternalTrackingURLsList=function(e){var t,i,r,n=e["item-id"],o=e.itp,a={};if(!n)return __trcDebug("Item does not have id. External tracking pixel will not be sent if defined"),[];try{if(this.externalTrackingURLsListByItemId||(this.externalTrackingURLsListByItemId={}),!this.externalTrackingURLsListByItemId[n]){for(var s=0;o&&s<o.length;s++)i=(t=o[s]).t,r=t.u,i&&r&&(a[i]||(a[i]=[]),a[i].push(r));this.externalTrackingURLsListByItemId[n]=a}return this.externalTrackingURLsListByItemId[n]}catch(e){return __trcError("Error in TRCRBox.getItemExternalTrackingURLsList"),[]}},o.prototype.sendPlacementTrackingPixelsOnce=function(e){this.trc.log1(e,{ri:this.response.trc.req},null,null,this.placement,this.sendAllTrackingPixelsOfType.trcBind(this,e))},o.prototype.sendAllTrackingPixelsOfType=function(e){this.trc.sendExternalTracking(this.getAllExternalTrackingURLsList()[e])},o.prototype.shouldUseSmartEllipsis=function(){return this.trc.global["smart-ellipsis"]&&("enableAndOverrideModeFlag"===this.trc.global["smart-ellipsis"]||this.trc.getProperty(this.mode_name,"smart-ellipsis"))},o.prototype.getEffectiveResponsiveRule=function(e,t,i){if(e=e||this.responsiveRules,t=t||"min",i=i||"max","function"!=typeof d.matchMedia||!this.isResponsive||!e)return null;for(var r=0;r<e.length;r++)if(d.matchMedia("screen and (min-width: "+e[r][t]+"px)"+(isNaN(e[r][i])?"":" and (max-width: "+e[r][i]+"px)")).matches)return e[r];return null},o.prototype.getCurrentListSize=function(){var e=this.trc.getProperty(this.mode_name,"responsive-rules",this.propertiesOverride),e=this.getEffectiveResponsiveRule(e,"minWidth","maxWidth");return this.isResponsive&&e?e.rows*e.cells:this.trc.getListSize(this)},o.prototype.drawImageIframe=function(e,t,i){t=t||"",i=i&&i.replace(/&redir=[^&]*/,"")+"&redir=",e.innerHTML=t.replace("${CLICK_URL_ESC}",encodeURIComponent(i))},o.prototype.getWidgetToFeedHelper=function(){return this.parentFeed&&this.parentFeed.widgetToFeedHelper},o.prototype.getPublisherBrandingName=function(){var e;return this.publisherBrandingText||(e=this.trc.getPublisherVersionPropertyWithFallbackToNetwork("publisher-branding")||"",this.publisherBrandingText=TRC.text.encodeHTML(e)||this.trc.getSiteNameOgValue()||""),this.publisherBrandingText},o.prototype.sendAvailableEvent=function(e,t,i,r){this.isResponseFromCache()&&!this.trc.global["send-available-for-cached-response"]||(!r&&this.trc.isDeferredAvailable?(TRC.performance&&TRC.performance.mark("8.0.1."+this._id),r=this.sendEvent.trcBind(this,"available",this.util.merge(e,{df:1}),t.getAll(),!0),i?TRC.Timeout.set(r,0):this.postRenderQueue.pushBack("available",r)):this.sendEvent("available",e,t.getAll(),!0))},o.prototype.isResponseFromCache=function(){return this.response&&this.response.cached},o.prototype.getModeClientProperty=function(e){return this.trc.getProperty(this.mode_name,e,this.propertiesOverride)}}(window,document),function(){var e=TRC.URL=function(e){var t=TRC.text.lsplit;if(!e)throw new Error("Invalid URL!");var i=t(this.href=e,"#",2);return this.hash=1<i.length?"#"+i.pop():"",i=t(e=i[0],"?",2),this.search=1<i.length?"?"+i.pop():"",i=t(e=i[0],"://",2),this.protocol=1<i.length?i.shift()+":":"",i=t(e=i[0],"/",2),this.pathname=1<i.length?"/"+i.pop():"/",i=t(e=i[0],"@",2),this.auth=1<i.length?i.shift():"",i=t(e=i[0],":",2),this.port=1<i.length?parseInt(i.pop()):0,this.host=i[0],this},r={"http:":1,"https:":1};e.prototype.toString=function(e){return(this.host?this.protocol+"//"+(this.auth?this.auth+"@":"")+this.host+(this.port?":"+this.port:""):"")+this.pathname+this.search+(!e&&this.hash||"")},e.prototype.switchProtocol=function(e,t){var i=this instanceof TRC.URL?this:new TRC.URL(this);return r[e]&&(t&&"https:"==i.protocol||(i.protocol=e)),1<(i=i.toString(!1)).length?i:""},e.prototype.getParameter=function(e,t){var i,r=TRC.URL.prototype.getQueryStringObj.call(this);for(i in r)if(unescape(i)==e)return(t||unescape)(r[i]);return null},e.prototype.getQueryStringObj=function(){for(var e,t=(this instanceof TRC.URL?this:new TRC.URL(this)).search.substr(1).split(/&/),i={},r=0;r<t.length;r++)t[r]&&(i[(e=t[r].split(new RegExp("="),2))[0]]=e[1]);return i},e.prototype.addParamsToUrl=function(e,t){e=e.split("#");return e[0]+(0<=e[0].search("\\?")?"&":"?")+t+(e[1]?"#"+e[1]:"")}}((window,document)),function(e){e.TRC=e.TRC||{},TRC.UserIdMerger={notifyPossibleUserChange:function(e,t,i,r){var n;e.global["rbox-enable-fix-user-id-event"]&&(n=TRC.pageManager.getValue("user-id"),t=TRC.pageManager.getPublisherValue(t,"session-data"),this.multipleUsersExist(i,n)&&this.sendUserIdFixEvent(e,n,i,t,r))},multipleUsersExist:function(e,t){return t&&e&&t!==e},sendUserIdFixEvent:function(e,t,i,r,n){n={time:(new Date).getTime(),fromUser:t,toUser:i,fromSD:r,toSD:n};e.sendEvent("fix-user-id",n)}}}(window,document),function(){TRC.InvokePVideoLoader=function(){TRC.PVideoLoader=function(e,t,i,r){this.blockVideo=r.blockThumbnailVideoLoader,this.blockVideo||(TRC.VideoLoader.call(this,e.trc,t,e.placement,e.container,i),this.rbox=e)},TRC.PVideoLoader.prototype=__trcObjectCreate(TRC.VideoLoader.prototype),TRC.VideoLoader.prototype.ITEM_ID_SEPARATOR="~~",TRC.PVideoLoader.prototype.getCallbacksObjectKey=function(){return"pVideoCallbacks"},TRC.PVideoLoader.prototype.genVideoCallback=function(videoCallbackParams){var videoCallbackName=this.generateCallbackName(),that=this;return TRC.pVideoCallbacks[videoCallbackName]=function(data){if(TRCImpl.global["enable-video-ajax"]){if(!TRC.VideoTagLoader.prototype.isXHRDone(data.target))return;TRC.performance&&TRC.performance.mark("videoAjaxStop",null,"","","videoAjaxRoundtrip",TRC.PerfEvenType.STOP),data=TRC.VideoTagLoader.prototype.parseTBResponse(data.target.responseText)}var unitBootSrc,script;TRC.performance&&TRC.performance.mark("videoJsonpRequestStop",null,"","","videoJsonpRequestTime",TRC.PerfEvenType.STOP),data=data||{},data.tags&&data.tags[0]&&(unitBootSrc=data.tags[0].unitBootSrc||that.videoConfig.unitBootSrc,script=document.createElement("script"),script.src=unitBootSrc,script.setAttribute("type","text/javascript"),script.setAttribute("src",unitBootSrc),script.onload=function(){var unit=eval(data.tags[0].url),viewabilityConfig=that.videoConfig.autoTriggerConfig.viewabilityConfig,videoDataForEvent;-1==viewabilityConfig.time&&(viewabilityConfig.time=0,viewabilityConfig.percentage=101),unit.set("pVideoUrl",videoCallbackParams.url),unit.set("playerContainer",videoCallbackParams.playerContainer),unit.set("components.PosterView",{isActive:!0,imageLocation:videoCallbackParams.poster}),unit.set("customization.placeHolder.background-color","black"),unit.set("viewPercent",viewabilityConfig.percentage),unit.set("secondsInView",viewabilityConfig.time),unit.set("isPlayOnHover",that.videoConfig.autoTriggerConfig.hover),unit.set("isRepeat",that.videoConfig.repeat),that.videoConfig.videoEventsEnabled&&(videoDataForEvent=that.getVideoDataForEvent(videoCallbackParams.itemIndex,videoCallbackParams.itemId),unit.on("error",function(){that.sendDebugEvent("error",videoDataForEvent)}),unit.on("eligible",function(){that.sendDebugEvent("eligible",videoDataForEvent)}),unit.on("play",function(e){that.sendDebugEvent("play",videoDataForEvent,e)}),unit.on("render",function(){that.sendDebugEvent("rendered",videoDataForEvent)}),unit.on("quarterly",function(e){that.sendDebugEvent("quarterly",videoDataForEvent,e)}),unit.on("complete",function(){that.sendDebugEvent("complete",videoDataForEvent)})),TRC.tlf&&console.timeEnd("in setVideoPlayerLoad"),TRC.tlf&&console.timeStamp("end setVideoPlayerLoad")},document.getElementsByTagName("head")[0].appendChild(script))},"TRC."+this.getCallbacksObjectKey()+"."+videoCallbackName},TRC.PVideoLoader.prototype.sendDebugEvent=function(e,t,i){var r=window.trc_debug_level,t={event:e,data:i||null,rii:t.rii,placement:t.placement,mode:t.modeName,itemIndex:t.itemIndex,itemId:t.itemId};window.trc_debug_level=3,__trcDebug("Performance Video Event: "+JSON.stringify(t)),window.trc_debug_level=r},TRC.PVideoLoader.prototype.getVideoDataForEvent=function(e,t){return{rii:this.rbox.response.trc.req,placement:this.rbox.placement,modeName:this.rbox.mode_name,itemIndex:e,itemId:this.extractRealItemId(t)}},TRC.PVideoLoader.prototype.extractRealItemId=function(e){if(!e)return null;e=e.split(this.ITEM_ID_SEPARATOR)[2];return e&&0<e.length&&!isNaN(parseFloat(e))&&isFinite(e)?e:null},TRC.PVideoLoader.prototype.loadVideo=function(e,t){var i,e=TRC.VideoLoader.prototype.loadVideo.call(this,e);return e&&t&&(i=(i=t.container.getElementsByClassName("thumbBlock_holder"))&&i[0])&&t.isCreatePVideoOverlay&&(t=TRC.pVideoOverlay.create(t.video_data,t.language,t.isSendEvents),i.appendChild(t)),e}}}(),(i=>{const n={en:{cancel:"CANCEL",goto:"GO TO"},de:{cancel:"Abbrechen",goto:"Mehr erfahren"},fr:{cancel:"Annuler",goto:"Se rendre sur"},it:{cancel:"Annulla",goto:"Vai a"},jp:{cancel:"ã‚­ãƒ£ãƒ³ã‚»ãƒ«",goto:"ã‚µã‚¤ãƒˆã¸è¡Œã"},pt:{cancel:"Fechar",goto:"Ir para"},es:{cancel:"Cancelar",goto:"Ir a"},ko:{cancel:"CANCEL",goto:"ì§€ê¸ˆ ë” ì•Œì•„ë³´ê¸°"},he:{cancel:"×¡×’×•×¨",goto:"×¢×‘×•×¨ ×œ×“×£"}},o=(i=i||{dom:{stopEvent(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()},on(e,t,i){e.addEventListener(t,i)},addClass(e,t){e.className+=` ${t} `},removeClass(e,t){t=new RegExp(`s*${t}`,"g");e.className=e.className.replace(t,"")}},global:{"p-video-overlay-send-events":!1}}).dom;TRC._translationQueue=TRC._translationQueue||[],TRC._translationQueue.push({"p-video-overlay":n});let a={},s;function l(e,t){h(t.currentTarget.firstElementChild),void 0===t.gotoSyndicator&&d("p-video-overlay__display-overlay",e),t.gotoSyndicator||o.stopEvent(t)}function r(e,t,i){d(t.msg,e),i.gotoSyndicator=t.flag}function c(e){var t=p(e),e=m(e);return u("p-video-overlay",null,[e,t])}const d=function(e,t){s&&(t={itemId:t["item-id"],publisher:t.publisher,syndicatorId:t["syndicator-id"]},TRCImpl.sendAbTestEvent&&TRCImpl.sendAbTestEvent(e,__trcJSONify(t)),i.modDebug.logMessageToServer(1,e,t))},h=function(e){var t=e.className.match(/p-video-overlay-show/);o[t?"removeClass":"addClass"](e,"p-video-overlay-show")},u=function(e,t,i){const r=o.createHTMLElement("div",{className:e||""});return"function"==typeof t&&o.on(r,"click",t),i&&i.length&&i.forEach&&i.forEach(e=>{r.appendChild(e)}),r},p=function(e){var t=o.createHTMLElement("span",{className:"p-video-back-action-label",innerText:a.cancel||n.en.cancel});return u("p-video-overlay-action p-video-back-action",r.bind(this,e,{msg:"p-video-overlay__hide-overlay",flag:!1}),[t])},m=function(e){var t=o.createHTMLElement("span",{className:"p-video-goto-action-label",innerText:a.goto||n.en.goto}),i=o.createHTMLElement("span",{className:"p-video-goto-action-url",innerHTML:e["branding-text"]});return u("p-video-overlay-action p-video-goto-action",r.bind(this,e,{msg:"p-video-overlay__go-to-syndicator-page",flag:!0}),[t,i])};i.pVideoOverlay={create:function(e,t,i){var r=c(e);s=i,a=TRC.translationManager.getLabel({feature:"p-video-overlay"})||n.en;r=u("p-video-overlay-container",l.bind(this,e),[r]);return d("p-video-overlay__overlay-created-on-item",e),r},createVideoPlayerOverlayElement:c,createActionElement:u,createGotoActionElement:m,createBackActionElement:p,actionClickHandler:r,videoOverlayClickHandler:l,videoOverlayToggleDisplay:h,stripUrl:function(e){if(!e||!e.length)return"";const t=e.replace(/(^\w+:|^)\/\//,"");return t.replace(/\/.*/,"")},sendDebugEvent:d}})((window,document,TRC)),(()=>{class BaseVideoUnitLoader{constructor(e){this.videoConfig=e}loadUnit(videoCallbackData){TRC.performance&&TRC.performance.mark("videoEvalBaseLoadUnitStart",null,"","","videoEvalBaseLoadUnitTime",TRC.PerfEvenType.START);const unit=eval(videoCallbackData.tags[0].url);TRC.performance&&TRC.performance.mark("videoEvalBaseLoadUnitStop",null,"","","videoEvalBaseLoadUnitTime",TRC.PerfEvenType.STOP);const{rawJsonValue}=this.videoConfig;return this.setUnitParams(unit,rawJsonValue),unit}getVideoContainerSelector(){return null}setUnitParams(t){const e=this.videoConfig["advancedVideoConfiguration"],i={detachToSlider:!0,unitType:!0,parentFeedOptions:!0,rawJsonValue:!0};Object.keys(this.videoConfig).forEach(e=>{this.videoConfig[e]&&(i[e]||t.set(e,this.videoConfig[e]))}),BaseVideoUnitLoader.setAdvancedVideoConfiguration(t,e);var r=this.videoConfig.aggLevel||1;1<r&&t.set("preset",{level:r})}static setAdvancedVideoConfiguration(i,r){r&&Object.keys(r).forEach(e=>{var t=TRC.text.splitAndJoin(e,TRC.text.toLowerCamelCase);BaseVideoUnitLoader.setToUnit(i,r,e,t)})}static setToUnit(e,t,i,r){const n={unitType:!0,parentFeedOptions:!0,rawJsonValue:!0};"IN_WIDGET"!==t.unitType&&(n.detachToSlider=!0);var o={"additionalCss.zIndex":"additionalCss.z-index"};n[r]||(o[r]?e.set(o[r],t[i]):e.set(r,t[i]))}}TRC.BaseVideoUnitLoader=BaseVideoUnitLoader})(),(()=>{class SingleVideoManagerUnitLoader extends TRC.BaseVideoUnitLoader{constructor(e,t){super(e),this.trcManager=t,this.parentFeedOptions=e.parentFeedOptions}loadUnit(videoCallbackData){TRC.performance&&TRC.performance.mark("videoEvalSingleManagerLoadUnitStart",null,"","","videoEvalSingleManagerLoadUnitTime",TRC.PerfEvenType.START);const unit=eval(videoCallbackData.tags[0].url);return TRC.performance&&TRC.performance.mark("videoEvalSingleManagerLoadUnitStop",null,"","","videoEvalSingleManagerLoadUnitTime",TRC.PerfEvenType.STOP),this.setUnitParams(unit),unit}getVideoContainerSelector(){return null}setUnitParams(e){super.setUnitParams(e);var t=this.videoConfig.distanceRepeat||0,i=TRC.util.isTrue(this.videoConfig.startFromSlider),r=TRC.util.isTrue(this.videoConfig.detachToSlider),n=TRC.util.isTrue(this.videoConfig.detachToSliderAnimation),o=this.videoConfig.videoAbTest||null,a=this.videoConfig.startCard||null,s=this.videoConfig.maxVideoCards||null,l=this.videoConfig.permanentCard||null,c=this.parentFeedOptions["feedDynamicParameters"],d=c&&c.videoDisclosurePosition||this.parentFeedOptions.videoDisclosurePosition||this.trcManager.global["video-disclosure-position"],c=this.parentFeedOptions&&this.parentFeedOptions.uiDesignVersion;e.set("distanceRepeat",t),e.set("detachToSlider.isStartFromSlider",i),e.set("detachToSlider.isDetachToSlider",r),e.set("detachToSlider.animation",n),e.set("abTest",o),a&&e.set("startCard",a),s&&e.set("maxVideoCards",s),l&&e.set("permanentCard",l),d&&e.set("components.adChoice.position",d),3<=c&&(e.set("components.adChoice.title.style.color","#999999"),e.set("components.adChoice.title.logoStyle.display","none"))}}TRC.SingleVideoManagerUnitLoader=SingleVideoManagerUnitLoader})(),(()=>{class SliderVideoUnitLoader extends TRC.BaseVideoUnitLoader{loadUnit(videoCallbackData){TRC.performance&&TRC.performance.mark("videoEvalSliderLoadUnitStart",null,"","","videoEvalSliderLoadUnitTime",TRC.PerfEvenType.START);const unit=eval(videoCallbackData.tags[0].url);return TRC.performance&&TRC.performance.mark("videoEvalSliderLoadUnitStop",null,"","","videoEvalSliderLoadUnitTime",TRC.PerfEvenType.STOP),this.setUnitParams(unit),unit}getVideoContainerSelector(){return null}setUnitParams(e){super.setUnitParams(e)}}TRC.SliderVideoUnitLoader=SliderVideoUnitLoader})(),(()=>{class StandaloneVideoUnitLoader extends TRC.BaseVideoUnitLoader{constructor(e,t){super(e),this.options=t}loadUnit(videoCallbackData,videoContainer){this.setCmTag(videoContainer),TRC.performance&&TRC.performance.mark("videoEvalStandaloneLoadUnitStart",null,"","","videoEvalStandaloneLoadUnitTime",TRC.PerfEvenType.START);const unit=eval(videoCallbackData.tags[0].url);return TRC.performance&&TRC.performance.mark("videoEvalStandaloneLoadUnitStop",null,"","","videoEvalStandaloneLoadUnitTime",TRC.PerfEvenType.STOP),this.setupVideo(videoContainer,unit),unit}getVideoContainerSelector(e){return e&&e.id?`#${e.id}`:(__trcWarn("Cannot get a selector for standalone video container - Taboola publisher container must be defined and have an ID"),null)}setCmTag(e){window.cmTag.set("isCustomEvents",!0),window.cmTag.set("width",e.getBoundingClientRect().width),window.cmTag.set("customization",this.options.videoCssCustomization)}setupVideo(e,t){let i=!1;const r=TRC.util.isTrue(this.videoConfig.startFromSlider),n=TRC.util.isTrue(this.videoConfig.detachToSlider),o=TRC.util.isTrue(this.videoConfig.detachToSliderAnimation),a=function(){!i&&TRC.visibility.isInViewPortWithOffset(e,-50)&&(t.play&&"function"==typeof t.play&&t.play(e),i=!0,TRC.dispatch("trcContentReady",{container:e}),TRC.dom.off(window,"scroll",a))};t.set("detachToSlider.isStartFromSlider",r),t.set("detachToSlider.isDetachToSlider",n),t.set("detachToSlider.animation",o),t.on("ready",()=>{a(),i||TRC.dom.on(window,"scroll",a)})}}TRC.StandaloneVideoUnitLoader=StandaloneVideoUnitLoader})(),(()=>{class VideoAsItemUnitLoader extends TRC.BaseVideoUnitLoader{constructor(e,t,i){super(e),this.options=t,this.rbox=i,this.allowExpandInViewport=TRC.util.isTrue(e.allowExpandInViewport),this.replaceWidgetItems=TRC.util.isTrue(e.replaceWidgetItems),this.disableFitToSizeForSingleColumn=TRC.util.isTrue(e.disableFitToSizeForSingleColumn),this.isContainerRatioValidForTakeOver=!1,this.getContainerDimensions(t.container)}loadUnit(videoCallbackData,videoContainer){const itemsToHide=this.getSponsoredItemsToHide();let unit;if(!this.replaceWidgetItems||itemsToHide&&itemsToHide.length){const slotItem=this.getSlotWidgetItem();if(slotItem){const slotItemComputedStyle=getComputedStyle(slotItem);this.setCmTag(slotItem,slotItemComputedStyle),TRC.performance&&TRC.performance.mark("videoEvalItemLoadUnitStart",null,"","","videoEvalItemLoadUnitTime",TRC.PerfEvenType.START),unit=eval(videoCallbackData.tags[0].url),TRC.performance&&TRC.performance.mark("videoEvalItemLoadUnitStop",null,"","","videoEvalItemLoadUnitTime",TRC.PerfEvenType.STOP),this.setUnitParams(unit),this.setupVideo(unit,itemsToHide,videoContainer,slotItemComputedStyle)}}return unit}getVideoContainerSelector(e){e=this.createVideoContainer(e);return e?`#${e.id}`:null}createVideoContainer(e){const t=document.createElement("figure"),i=this.getSlotWidgetItem(),r=i&&i.parentNode;return i&&r&&e?(e.id?t.id=e.id:t.id=Math.floor(2147483648*Math.random()).toString(36),t.id+="-video",r.insertBefore(t,i),t):(__trcWarn("Could not create video container selector for integrated widget - nowhere to append the video container"),null)}setCmTag(e,t){t=this.getUnitContainerStyle(e,t);window.cmTag.set("isCustomEvents",!0),window.cmTag.set("width",parseInt(t.width,10)),window.cmTag.set("customization",this.getUnitCustomization(e,t)),window.cmTag.set("isFitToSize",this.isFitToSizeVideo()),window.cmTag.set("openingEffect",this.videoConfig.expandEffect),window.cmTag.set("isContainerRatioNotValidForTakeOver",!this.isContainerRatioValidForTakeOver),window.cmTag.set("rboxContainerRatio",this.containerRatio)}getUnitCustomization(e,t){const i={};if(i.unitContainer=t,!this.isFitToSizeVideo()){const t=e.querySelector(".thumbBlock_holder"),r=e.querySelector(".video-label-box .video-title"),n=e.querySelector(".video-label-box .branding");i.placeHolder=getComputedStyle(t),i.titleContainer={title:getComputedStyle(r),branding:getComputedStyle(n)}}return i}isFitToSizeVideo(){if(!this.disableFitToSizeForSingleColumn)return!0;var e=this.rbox.getEffectiveResponsiveRule();return!e||1!==e.cells}getUnitContainerStyle(e,t){var i=parseFloat(t.marginLeft),r=parseFloat(t.marginRight),n=parseFloat(t.width),o=this.getNumOfSlotsToOccupy();return{width:`${Math.ceil(n*o+(i+r)*(o-1))}px`,height:t.height}}setTakeOverUnitContainerStyle(e,t){const i=this.getUnitContainerStyle(e,t),r=this.rbox.getEffectiveResponsiveRule(),n=parseFloat(t.marginTop),o=parseFloat(t.marginBottom),a=parseFloat(t.height),s=r.rows;i.height=Math.ceil(a*s+(n+o)*(s-1)),TRC.dispatch("widgetTakeoverSizeChange",{width:parseInt(i.width,10),customization:this.getUnitCustomization(e,i)})}setupVideo(t,i,r,e){const n=this["allowExpandInViewport"],o=this.rbox.container;let a=this.getSlotWidgetItem();this.setVideoContainerInitialStyle(r,e),t.on("ready",e=>{if(e&&e.isTakeoverWidget&&e.isContainerRatioValidForTakeOver){this.setPlacementSingleAdConf(),a=this.getMaxHeightSlot();const t=getComputedStyle(a);this.setTakeOverUnitContainerStyle(a,t),this.setVideoContainerInitialStyle(r,t),r.style.zIndex=999}!n&&TRC.visibility.isInViewPortWithOffset(a,0)||(o&&TRC.dom.addClass(o,"iw_video_frame"),this.replaceWidgetItems?i&&i.length?(parseInt(this.videoConfig.expandEffect,10)?t.on("renderAnimation:completed",VideoAsItemUnitLoader.displayVideoInsteadOfItems.trcBind(this,r,i)):VideoAsItemUnitLoader.displayVideoInsteadOfItems(r,i),t.play&&"function"==typeof t.play&&t.play(r)):__trcDebug("Not enough sponsored items to hide - aborting integrated widget video load"):t.play&&"function"==typeof t.play&&t.play(r))})}setVideoContainerInitialStyle(e,t){var i=this.getSlotWidgetItem(),r=parseFloat(t.marginLeft),n=this.getOuterRBoxComputedStyle(),n=parseFloat(n.marginLeft),r=i.offsetLeft-r-(n+r);e.style.position="absolute",e.style.float=t.float,e.style.top=`${i.offsetTop}px`,e.style.left=`${r}px`,e.style.width="auto",e.style.marginLeft=t.marginLeft,e.style.marginRight=t.marginRight,e.style.marginTop=t.marginTop,e.style.marginBottom=t.marginBottom,this.replaceWidgetItems||(e.style.zIndex=90)}getOuterRBoxComputedStyle(){var e=this.rbox.outerBox;return getComputedStyle(e)}static displayVideoInsteadOfItems(e,t){VideoAsItemUnitLoader.hideWidgetItems(t),e.style.position="static"}static hideWidgetItems(e){e.forEach(e=>{e.style.display="none",e.style.visibility="hidden"})}getSlotWidgetItem(){if(this.slotWidgetItem)return this.slotWidgetItem;var e=this.getWidgetItems(),t=this.getInsertionPointSlotNumber()-1;return isNaN(t)?void 0:this.slotWidgetItem=e[t]}getInsertionPointSlotNumber(){var t,i=this.getWidgetItems(),r=parseInt(this.videoConfig.slot,10);if(void 0!==this.insertionPointSlotNumber)return this.insertionPointSlotNumber;if(!isNaN(r)&&0<r){if(this.allowExpandInViewport)return this.insertionPointSlotNumber=r;for(let e=r;e<=i.length;e++)if(t=e-1,!TRC.visibility.isInViewPortWithOffset(i[t],0))return this.insertionPointSlotNumber=e}return __trcWarn(`video tag loader - unknown slot (${r}) for integrated widget implementation`),null}getSponsoredItemsToHide(){const e=this.getWidgetItems(),t=this.getInsertionPointSlotNumber(),i=this.getNumOfSlotsToOccupy(),r=[];let n=e.length,o;for(;n>=t;n--)if((o=e[n-1]).video_data["is-syndicated"]&&null!==o.offsetParent&&(r.push(o),r.length===i))return r;return __trcWarn("video tag loader - didn't find enough sponsored items for integrated widget replacement"),null}getWidgetItems(){return this.rbox.boxes}getNumOfSlotsToOccupy(){var e,t=this.videoConfig.slotMaxSize||2,i=this.getInsertionPointSlotNumber();return void 0===this.numOfSlotsToOccupy&&((e=this.rbox.getEffectiveResponsiveRule())?(i=i%e.cells||e.cells,i=e.cells-i+1,this.numOfSlotsToOccupy=Math.min(i,t)):this.numOfSlotsToOccupy=t),this.numOfSlotsToOccupy}setPlacementSingleAdConf(){this.videoConfig.slot=1,this.videoConfig.slotMaxSize=99,this.slotWidgetItem=null,this.insertionPointSlotNumber=void 0,this.numOfSlotsToOccupy=void 0,this.isTakeoverWidget=!0}getContainerDimensions(e){e&&(e=e.getBoundingClientRect(),this.containerWidth=e.width,this.containerHeight=e.height,this.containerRatio=this.containerWidth/this.containerHeight,this.containerRatio<2.36&&1<this.containerRatio&&(this.isContainerRatioValidForTakeOver=!0))}getMaxHeightSlot(){var t=this.getWidgetItems();let i=-1,r=t[0];for(let e=0;e<t.length;e++){var n=parseInt(getComputedStyle(t[e]).height,10);n>i&&(i=n,r=t[e])}return r}}TRC.VideoAsItemUnitLoader=VideoAsItemUnitLoader})(),(()=>{class WidgetAdjacentVideoUnitLoader extends TRC.BaseVideoUnitLoader{loadUnit(videoCallbackData){TRC.performance&&TRC.performance.mark("videoEvalWidgetLoadUnitStart",null,"","","videoEvalWidgetLoadUnitTime",TRC.PerfEvenType.START);const unit=eval(videoCallbackData.tags[0].url);return TRC.performance&&TRC.performance.mark("videoEvalWidgetLoadUnitStop",null,"","","videoEvalWidgetLoadUnitTime",TRC.PerfEvenType.STOP),this.setUnitParams(unit),unit}getVideoContainerSelector(e){return this.videoConfig.position?`#${this.createVideoContainer(e).id}`:null}createVideoContainer(e){const t=document.createElement("div"),i=e._trc_container;if(e.id?t.id=e.id:t.id=Math.floor(2147483648*Math.random()).toString(36),t.id+="-video",!i)return __trcWarn("Cannot generate a selector for widget adjacent video container - widget container is not found"),null;let r;switch(this.videoConfig.position){case"above":r=i;break;case"below":r=i.nextSibling;break;default:__trcWarn(`Unknown position in video config: ${this.videoConfig.position}`)}return e.insertBefore(t,r),t}}TRC.WidgetAdjacentVideoUnitLoader=WidgetAdjacentVideoUnitLoader})(),TRC.InvokeVideoLoader=function(){TRC.VideoLoader=function(e,t,i,r,n){this.trcManager=e,this.videoConfig=t,this.placement=i,this.unifiedPlacement=t.unifiedPlacement,this.taboolaContainer=r,this.trcResponse=n,this.consentData=e.consentState||TRC.consentData||{}},TRC.VideoLoader.prototype.CALLBACK_NAME_PREFIX="videoCallback",TRC.VideoLoader.prototype.valueOrEmptyString=function(e){return null!=e?e:""},TRC.VideoLoader.prototype.loadVideo=function(e){if(TRC.botDetected)__trcDebug("video loader - not loading. Bot detected.");else if(this.blockVideo)__trcDebug("video loader - not loading. Video was blocked due to configuration.");else{if(!TRC.Browser.ieUpto(10)){var t=this.videoConfig.scriptUrlTemplate,i=TRC.util.isTrue(TRCImpl.global["enable-video-ajax"]);TRC.pConsole("video loader","info","loading video for placement: "+this.placement);var r,n,o=TRC.URL.prototype.getParameter.call(location.href,"video-integration-variant");return null===o&&(o=this.trcManager.global["video-integration-variant"]),t?((r=document.createElement("script")).id=this.taboolaContainer.id+"-v-loader",n=this.genVideoCallback(e),r.src=a.trcBind(this,e,o,TRC.shiftDomain(t),n)(),TRC.performance&&TRC.performance.mark("videoJsonpRequestStart",null,"","","videoJsonpRequestTime",TRC.PerfEvenType.START),i?this.loadVideoByAjax(r.src,n):this.taboolaContainer.appendChild(r)):TRC.pConsole("video loader","error","error while loading video for placement: "+this.placement+". missing script url template in response"),!0}__trcDebug("video loader - not loading. Unsupported browser.")}};var a=function(e,t,i,r){return i.replace("{PUBLISHER_NAME}",TRC.publisherId).replace("{UNIT_TYPE}",encodeURIComponent(this.videoConfig.unitType)).replace("{UNIT_LOCATION}",encodeURIComponent(this.valueOrEmptyString(this.videoConfig.unitLocation))).replace("{SOURCE_PAGE_TYPE}",this.trcManager.getItemType()).replace("{PLACEMENT_NAME}",encodeURIComponent(this.getPlacementName())).replace("{UNIFIED_PLACEMENT_NAME}",encodeURIComponent(this.valueOrEmptyString(this.getUnifiedPlacementName()))).replace("{USER_ID}",TRC.pageManager.getUserId()).replace("{CALLBACK_NAME}",r).replace("{REFERRER}",encodeURIComponent(this.trcManager.getReferrer())).replace("{PAGE_URL}",encodeURIComponent(this.valueOrEmptyString(this.getItemUrlForVideo()))).replace("{CACHE_BUSTER}",this.getScriptCacheBuster()).replace("{PLATFORM}",this.valueOrEmptyString(this.videoConfig.platform)).replace("{NORM_PLATFORM}",this.valueOrEmptyString(this.videoConfig.fullyNormalizedPlatform)).replace("{COUNTRY}",this.valueOrEmptyString(this.videoConfig.country)).replace("{TAG_ID}",this.valueOrEmptyString(this.videoConfig.tagId)).replace("{VARIANT}",this.valueOrEmptyString(this.videoConfig.variant)).replace("{INTEGRATION_VARIANT}",this.valueOrEmptyString(t)).replace("{SESSION_ID}",this.valueOrEmptyString(this.trcManager.getSessionId())).replace("{SOURCE_ITEM_ID}",this.valueOrEmptyString(this.trcManager.getItemId())).replace("{VIEW_ID}",this.valueOrEmptyString(TRC.pageManager.getPageData())).replace("{GEO_LAT}",this.valueOrEmptyString((o("loc")||{}).lat)).replace("{GEO_ING}",this.valueOrEmptyString((o("loc")||{}).ing)).replace("{DEVICE_IFA}",this.valueOrEmptyString(this.trcManager.deviceId)).replace("{APP_ID}",this.valueOrEmptyString(o("appid"))).replace("{SESSION_DATA}",this.valueOrEmptyString(this.getSessionData())).replace("{REQUEST_ID}",this.valueOrEmptyString(this.getRequestId())).replace("{APP_NAME}",this.valueOrEmptyString(o("app"))).replace("{CONSENT_DAISY_BIT}",this.valueOrEmptyString(this.getConsentString())).replace("{GDPR_APPLIES}",this.valueOrEmptyString(this.getGdprApplies())).replace("{SC_PREDICTIONS}",this.valueOrEmptyString(this.getPredictions())).replace("{OPEN_EXCHANGE_ENABLED}",this.valueOrEmptyString(this.getOpenExchangeEnabled())).replace("{EXTERNAL_VIEW_ID}",this.valueOrEmptyString(this.getExternalViewId())).replace("{SOURCE_ITEM_ID}",this.valueOrEmptyString(this.getSourceItemId())).replace("{SOURCE_ITEM_ID_INT}",this.valueOrEmptyString(this.getSourceItemId())).replace("{PUBLISHER_ID}",this.valueOrEmptyString(this.getPublisherId())).replace("{SDK_NAME}",encodeURIComponent(this.valueOrEmptyString(o("sdkt")))).replace("{SDK_VERSION}",this.valueOrEmptyString(o("sdkv"))).replace("{OS}",encodeURIComponent(this.valueOrEmptyString(o("os")))).replace("{USER_ID_SOURCE}",this.valueOrEmptyString(this.getUserIdSource())).replace("{FAGG}",this.valueOrEmptyString(this.videoConfig.aggLevel||1)).replace("{CCPA_DNS}",this.valueOrEmptyString(this.getCcpaDoNotSell())).replace("{CCPA_PRIVACY}",this.valueOrEmptyString(this.getCcpaPrivacyString())).replace("{REGION}",this.valueOrEmptyString(this.getRegion())).replace("{HAS_GDPR_CONSENT}",this.valueOrEmptyString(this.getHasGDPRConsent())).replace("{TCF_VERSION}",this.valueOrEmptyString(this.getTCFVersion())).replace("{CMP_STATUS}",this.valueOrEmptyString(this.consentData.cmpStatus)).replace("{TABOOLA_NETWORK_ID}",this.valueOrEmptyString(this.getTaboolaNetworkId())).replace("{AB_TEST_PERCENT}",this.valueOrEmptyString(n("vidABTestPercent"))).replace("{AB_TEST_LAYER}",this.valueOrEmptyString(n("vidABTestLayer")))},n=function(e){try{return TRC.URL.prototype.getParameter.call(t(),"tb_"+e,!1)}catch(e){return""}},t=function(){return window.TRCImpl.getItemUrlQueryString&&"function"==typeof window.TRCImpl.getItemUrlQueryString?window.TRCImpl.getItemUrlQueryString()||"":document.location.search},o=function(e){if(i()&&void 0!==TRCImpl.additional_data.sdkd[e])return TRCImpl.additional_data.sdkd[e]},i=function(){return void 0!==TRCImpl.additional_data&&void 0!==TRCImpl.additional_data.sdkd};TRC.VideoLoader.prototype.loadVideoByAjax=function(e,t){var i=new XMLHttpRequest;i.open("GET",this.addProtocolToUrl(e),!0),i.setRequestHeader("Content-Type","text/plain"),i.withCredentials=!0,i.addEventListener("readystatechange",r(t)),TRC.performance&&TRC.performance.mark("videoAjaxStart",null,"","","videoAjaxRoundtrip",TRC.PerfEvenType.START),i.send(null)},TRC.VideoLoader.prototype.addProtocolToUrl=function(e){return e=0===e.indexOf("//")?TRC.PROTOCOL+e:e};var r=function(e){for(var t=e.split(".")||[],i=window,r=0;r<t.length;r++){var n=t[r];if(!i[n]){i=function(){};break}i=i[n]}return i};TRC.VideoLoader.prototype.generateCallbackName=function(){var e=this.getCallbacksObjectKey();return TRC[e]=TRC[e]||{},e=TRC[e].auto_gen_callback_seq=TRC[e].auto_gen_callback_seq+1||1,this.CALLBACK_NAME_PREFIX+e},TRC.VideoLoader.prototype.genVideoCallback=function(){throw new Error("This is an abstract method that should be inherited.")},TRC.VideoLoader.prototype.getCallbacksObjectKey=function(){throw new Error("This is an abstract method that should be inherited.")},TRC.VideoLoader.prototype.getItemUrlForVideo=function(){var e,t,i,r,n=[],o="";if(!(e=this.trcManager.getItemUrl()))return null;if(t=this.getVideoParametersToKeep(),(i=(i=this.getWindowLocationSearch()).substr(1)).length){for(var n=i.split("&"),a=0;a<n.length;a++)(r=n[a].split("=")[0]).length&&-1!==t.indexOf(r)&&-1===e.indexOf(r.concat("="))&&(o=o.concat(r,"=",n[a].split("=")[1],"&"));1<=o.length&&(o=o.substring(0,o.length-1),o=(-1===e.indexOf("?")?"?":"&").concat(o)),e=e.concat(o)}return e},TRC.VideoLoader.prototype.getSessionData=function(){return this.trcResponse["session-data"]},TRC.VideoLoader.prototype.getRequestId=function(){return this.trcResponse.req},TRC.VideoLoader.prototype.getPlacementName=function(){return this.videoConfig.placement||this.placement},TRC.VideoLoader.prototype.getUnifiedPlacementName=function(){return this.unifiedPlacement},TRC.VideoLoader.prototype.getPredictions=function(){return this.videoConfig.predictions},TRC.VideoLoader.prototype.getExternalViewId=function(){return this.videoConfig.rid},TRC.VideoLoader.prototype.getOpenExchangeEnabled=function(){return this.videoConfig.oee},TRC.VideoLoader.prototype.getSourceItemId=function(){return this.videoConfig.sii},TRC.VideoLoader.prototype.getScriptCacheBuster=function(){return(new Date).getTime().toString()},TRC.VideoLoader.prototype.getWindowLocationSearch=function(){return window.location.search||""},TRC.VideoLoader.prototype.getVideoParametersToKeep=function(){return this.trcManager.global["video-tag-keep-url-params"]||["vstaging","keyword","customTB"]},TRC.VideoLoader.prototype.getPublisherId=function(){return this.videoConfig.tpubid},TRC.VideoLoader.prototype.getUserIdSource=function(){return this.videoConfig.uis},TRC.VideoLoader.prototype.getCcpaDoNotSell=function(){return this.videoConfig.ccpaDns},TRC.VideoLoader.prototype.getCcpaPrivacyString=function(){return this.videoConfig.ccpaPrivacy},TRC.VideoLoader.prototype.getRegion=function(){return this.videoConfig.region},TRC.VideoLoader.prototype.getHasGDPRConsent=function(){return this.videoConfig.hasGDPRConsent},TRC.VideoLoader.prototype.getConsentDaisyBit=function(){return this.consentData.consentData||this.consentData.consentDaisyBit},TRC.VideoLoader.prototype.getTCFVersionByConsentStr=function(){return this.consentData.tcString?2:this.getConsentDaisyBit()?1:void 0},TRC.VideoLoader.prototype.getTCFVersionByMethodImpl=function(){return"function"==typeof window.__tcfapi?2:"function"==typeof window.__cmp?1:void 0},TRC.VideoLoader.prototype.getTCFVersion=function(){return this.videoConfig.tcfVersion||this.getTCFVersionByConsentStr()||this.getTCFVersionByMethodImpl()},TRC.VideoLoader.prototype.getConsentString=function(){return 2==this.getTCFVersion()?this.consentData.tcString:this.getConsentDaisyBit()},TRC.VideoLoader.prototype.getTaboolaNetworkId=function(){return this.videoConfig.tnetid},TRC.VideoLoader.prototype.getGdprApplies=function(){return(this.trcManager.global["video-gdpr-applies-use-requires-consent"]?this.videoConfig:this.consentData).gdprApplies}},TRC.InvokeVideoTagLoader=function(){TRC.VideoTagLoader=function(e,t,i,r,n){r&&"rbox-only-video"===r.mode&&(this.invisibleContainer="#"+i.container.id),this.blockVideo=e.blockVideoLoader||!e["before-video-load"](),this.blockVideo||(TRC.VideoLoader.call(this,e,t,i.placement,i.container,n),this.options=i,this.videoConfig=t,this.videoConfig.isHip=this.isHip(r),this.videoConfig.rboxContainerId=r&&r.id,this.unitLoader=this.initUnitLoader(t,i,r,e))},TRC.VideoTagLoader.prototype=__trcObjectCreate(TRC.VideoLoader.prototype),TRC.VideoTagLoader.prototype.LOCATION_TYPES={ABOVE:"above",BELOW:"below",ITEM:"item",STANDALONE:"standalone",SINGLE_MANAGER:"singleManager"},TRC.VideoTagLoader.prototype.initUnitLoader=function(e,t,i,r){switch(e.position){case this.LOCATION_TYPES.STANDALONE:return new TRC.StandaloneVideoUnitLoader(e,t);case this.LOCATION_TYPES.ITEM:return new TRC.VideoAsItemUnitLoader(e,t,i);case this.LOCATION_TYPES.SINGLE_MANAGER:return new TRC.SingleVideoManagerUnitLoader(e,r);case this.LOCATION_TYPES.ABOVE:case this.LOCATION_TYPES.BELOW:return new TRC.WidgetAdjacentVideoUnitLoader(e);default:return new TRC.SliderVideoUnitLoader(e)}},TRC.VideoTagLoader.prototype.setGlobalUnitParams=function(e){this.trcManager&&this.trcManager.framework&&"mobile-sdk"===this.trcManager.framework&&(e.set("isSDK",!0),e.set("widgetPlacement",this.getPlacementName())),this.options&&this.options.isFeed&&this.options.container&&e.set("feedContainer",this.options.container);var t=this.getPlacementName();this.options&&this.options.sca&&this.isFeedHasSC(this.options.sca,t)&&e.set("placementWithScAdjacency",t),TRC.filledImpressions=TRC.filledImpressions||[],e.on("filledImpression",function(e){TRC.filledImpressions.push(e)})},TRC.VideoTagLoader.prototype.getCallbacksObjectKey=function(){return"videoTagCallbacks"},TRC.VideoTagLoader.prototype.genVideoCallback=function(){var e=this.generateCallbackName(),r=this;return TRC.videoTagCallbacks[e]=function(i){if(TRCImpl.global["enable-video-ajax"]){if(!r.isXHRDone(i.target))return;TRC.performance&&TRC.performance.mark("videoAjaxStop",null,"","","videoAjaxRoundtrip",TRC.PerfEvenType.STOP),i=r.parseTBResponse(i.target.responseText)}var e,t;TRC.performance&&TRC.performance.mark("videoJsonpRequestStop",null,"","","videoJsonpRequestTime",TRC.PerfEvenType.STOP),(i=i||{}).tags&&i.tags[0]&&((e=r.getLiteUnitVersion(i.tags[0].liteUnitBootSrc||r.videoConfig.liteUnitBootSrc))||(e=i.tags[0].unitBootSrc||r.videoConfig.unitBootSrc),window.TRC.liteUnit&&(e=r.getLiteUnitFromTRCConfig(e)),(t=r.getVideoMacrosLiteUnitVersion(i.tags[0].url))&&-1===window.location.href.indexOf("static-test-files.taboolasyndication")&&(e=r.replaceVersion(e,t)),(-1<(t=TRC.isAMP?window.context.location.search:window.TRCImpl.getItemUrlQueryString()||"").indexOf("tb_liteUnitUrl")||-1<t.indexOf("tb_liteUnitVersion"))&&(e=r.getVersionFromUrl(e,t)),(t=document.createElement("script")).src=e,t.onload=function(){window.TRC=window.TRC||{},window.TRC.liteUnit=window.TRC.liteUnit||{},TRCImpl.global["enable-mw-no-items-exit"]?window.TRC.liteUnit.abTest="scadjtst1_vA":TRCImpl.global["enable-mw-content-ready-margins"]?window.TRC.liteUnit.abTest="scadjtst1_vB":TRCImpl.global["enable-mw-control"]&&(window.TRC.liteUnit.abTest="scadjtst1_vC"),window.TRC.liteUnit&&window.TRC.liteUnit.abTest&&(window.cmTag.set("pixels.startWithABT.isFire",!0),window.cmTag.push("abTest",window.TRC.liteUnit.abTest));var e=r.videoConfig.containerSelector||r.unitLoader.getVideoContainerSelector(r.taboolaContainer)||r.invisibleContainer;e&&(window.cmTag.set("parentSelector",e),t=document.querySelector(e));var t=r.unitLoader.loadUnit(i,t);t&&r.setGlobalUnitParams(t)},document.getElementsByTagName("head")[0].appendChild(t))},"TRC."+this.getCallbacksObjectKey()+"."+e},TRC.VideoTagLoader.prototype.isXHRDone=function(e){return 200===e.status&&e.readyState===XMLHttpRequest.DONE},TRC.VideoTagLoader.prototype.parseTBResponse=function(e){var t;try{TRC.performance&&TRC.performance.mark("videoAjaxParsingStart",null,"","","videoAjaxParsing",TRC.PerfEvenType.START),t=JSON.parse(this.extractJSONFromResponse(e))}catch(e){t=void 0}finally{TRC.performance&&TRC.performance.mark("videoAjaxParsingStop",null,"","","videoAjaxParsing",TRC.PerfEvenType.STOP)}return t},TRC.VideoTagLoader.prototype.extractJSONFromResponse=function(e){return e.slice(e.indexOf("(")+1,e.lastIndexOf(")"))},TRC.VideoTagLoader.prototype.getLiteUnitVersion=function(e){if(e&&"lite-unit-boot-src"!==(e=decodeURIComponent(e))){var t=this.getUnitType();if(t)return e.replace("{{UNIT_TYPE}}",t).replace("{{PLATFORM}}",TRC.dom.isDesktop()?"Desktop":"Mobile")}return""},TRC.VideoTagLoader.prototype.getUnitType=function(){for(var e in this.UNIT_TYPES)if(-1<this.UNIT_TYPES[e].indexOf(this.videoConfig.unitType))return e;return""},TRC.VideoTagLoader.prototype.UNIT_TYPES={Slider:["46","59"],Inline:["193","198","199","194","216","48","32","215"],WidgetItem:["226","227","248","4","5"],FeedManager:["244","245","247"],VideoForPerformance:["232","233"],RecoReelWidget:["254","255"],StoriesWidget:["143","144"]},TRC.VideoTagLoader.prototype.getLiteUnitFromTRCConfig=function(e){return window.TRC.liteUnit.liteUnitVersion&&(e=this.getLiteUnitVersion(window.TRC.liteUnit.liteUnitVersion)),e=window.TRC.liteUnit.version?this.replaceVersion(e,window.TRC.liteUnit.version):e},TRC.VideoTagLoader.prototype.replaceVersion=function(e,t){return e.replace(/\d+[_|.]\d+[_|.]\d+/,t)},TRC.VideoTagLoader.prototype.getVideoMacrosLiteUnitVersion=function(e){for(var t=new RegExp("liteUnitVersion","gi"),i=void 0;t.exec(e);)i=t.lastIndex;if(void 0!==i){var r=(e=(e=e.substring(i)).substring(2,e.indexOf(");"))).replace(/\'|\"|\s+/g,"");if(r)return r}},TRC.VideoTagLoader.prototype.getVersionFromUrl=function(e,t){var i=void 0,r=void 0;return t.split("&").forEach(function(e){-1<e.indexOf("tb_liteUnitUrl")?i=e.split("=")[1]:-1<e.indexOf("tb_liteUnitVersion")&&(r=e.split("=")[1])}),i&&(e=this.getLiteUnitVersion(i)),e=r?this.replaceVersion(e,r):e},TRC.VideoTagLoader.prototype.isFeedHasSC=function(e,t){for(var i=0;i<e.length;i++)if(e[i]===t)return!0;return!1},TRC.VideoTagLoader.prototype.isHip=function(e){if(!e||!e.trcResponse||!e.trcResponse.vtag)return!1;e=e.trcResponse.vtag;return(!e.advancedVideoConfiguration||"true"!==e.advancedVideoConfiguration["mid-article-hip-opt-out"])&&e.unitType&&-1<["4","254"].indexOf(e.unitType.toString())}},TRC.VirtualPlacementsManager=class{constructor(){this.virtualPlacementsMap={},this.response={}}static handleVirtualPlacement(e,t){const i=e["virtualPlacementsManager"],r=i.response[t];if(r){const n=__trcCopyProps(r,{});n.id=t,i.createVirtualPlacement(n,t,e)}}createVirtualPlacement(e,t,i){e&&!this.virtualPlacementsMap[t]&&(this.virtualPlacementsMap[t]=e,e=i.getOrCreateContainer(e),i.setPlacementDataInPreloadRequest(t,e))}},TRC.visibility=TRC.visibility||{},TRC.visibility=function(e){function t(e){var t=TRC.dom.getViewportVerticalRange(),e=TRC.dom.getElementRect(e);return e.top<0?Math.max(e.top,e.bottom):t.max-e.top-t.min}function i(e){var t=TRC.dom.getViewportHorizontalRange(),e=TRC.dom.getElementRect(e);return e.left<0?Math.max(e.left,e.right):t.max-e.left-t.min}var r={getViewPortOffsets:function(e){return{verticalOffset:t(e),horizontalOffset:i(e)}},getMinViewPortOffsets:function(e){e=this.getViewPortOffsets(e);return e.verticalOffset<0&&e.horizontalOffset<0?Math.max(e.verticalOffset,e.horizontalOffset):Math.min(e.verticalOffset,e.horizontalOffset)},isInViewPortWithOffset:function(e,t){return!(this.getMinViewPortOffsets(e)<(t||0))}};return e._trcIsUTactive&&(r.getVerticalVPShift=t,r.getHorizontalVPShift=i),r}(window,document),(()=>{const r={defaultMaxSlotsGeometryPerPage:50,maxDefaultThrottleNumber:1e3,defaultThresholdThrottleNumber:10};class s{constructor(e){this.rBoxWidget=e,this.trcManager=this.rBoxWidget.trc,this.widgetContainer=this.rBoxWidget.container,this.widgetItems=this.rBoxWidget.boxes,this.uiModeName=this.rBoxWidget.mode_name,this.MIN_VISIBLE_ITMES=this.trcManager.global["min-visible-items"]||1,this.init()}init(){this.resetVisibilityData(),this.rBoxWidget.isProviderIframe||(this.isManualVisibilityMode()?TRC.listen(`visible::${this.rBoxWidget.orig_placement}`,this.reportManualVisibilityIfVisibleByRects.trcBind(this)):this.initVisibilityObserver())}resetVisibilityData(){this.organicVisibleItems={},this.sponsoredVisibleItems={},this.exchangeVisibleItems={},this.nativeVisibleItems={},this.visibleItemsIdxList=[]}isManualVisibilityMode(){return!((this.rBoxWidget.isFeedCard||window.AMP_MODE)&&"mobile-sdk"!==this.trcManager.framework||!this.rBoxWidget.manualVisibilityTrigger&&!this.trcManager.manualVisibilityTrigger||!this.trcManager.global["enable-manual-visible"])}reportVisibility(){const e=new TRC.PlacementEventPostData,t=this.trcManager.getProperty(this.uiModeName,"thumbnail-position",this.rBoxWidget.propertiesOverride),i=[],r=[],n=[],o=[],a=[],s=[],l=[],c=[],d=[],h=[],u=[];var p;!this.visibilityReported&&(Object.keys(this.organicVisibleItems).forEach(e=>{i.push(this.organicVisibleItems[e].id),n.push(this.organicVisibleItems[e].type)}),Object.keys(this.sponsoredVisibleItems).forEach(e=>{r.push(this.sponsoredVisibleItems[e].id),o.push(this.sponsoredVisibleItems[e].type),l.push(this.sponsoredVisibleItems[e].publisher)}),Object.keys(this.exchangeVisibleItems).forEach(e=>{a.push(this.exchangeVisibleItems[e].id),s.push(this.exchangeVisibleItems[e].type),c.push(this.exchangeVisibleItems[e].publisher)}),Object.keys(this.nativeVisibleItems).forEach(e=>{d.push(this.nativeVisibleItems[e].id),h.push(this.nativeVisibleItems[e].type),u.push(this.nativeVisibleItems[e].publisher)}),0<i.length||0<r.length||0<a.length||0<d.length||this.rBoxWidget.isProviderIframe)&&(TRC.pConsole(this.uiModeName,"info","sending new visible event",""),e.setFullItemList(this.rBoxWidget.getJsonTargetItemsList(this.rBoxWidget.fullEventItemsHash)),this.trcManager.enablePageGeometry&&this.trcManager.addGeometryPageData(e,this.trcManager.global["page-geometry-selectors"]),this.trcManager.enablePageGeometryExtended&&this.trcManager.addGeometryExtendedPageData(e),this.trcManager.enablePlacementGeometry&&this.trcManager.addGeometryPlacementData(e,this.widgetContainer),TRC.EventsAPI.dispatchVisible(this.rBoxWidget.response.trc,this),p={il:i.join(","),sil:r.join(","),ilt:n.join(","),navil:d.join(","),silt:o.join(","),ntil:a.join(","),ntilt:s.join(","),navilt:h.join(","),niltp:c.join(","),siltp:l.join(","),naviltp:u.join(","),tp:t},this.processSpatialSlotsData(p),this.rBoxWidget.sendEvent("visible",p,e.getAll(),!0),!this.trcManager.global["disable-external-visibility-once"]&&this.externalVisibleSent||(this.rBoxWidget.sendPlacementTrackingPixelsOnce("vi"),this.externalVisibleSent=!0),this.trcManager.global["disable-runHook"]?(this.trcManager.getFunction(this.uiModeName,"after-visible",this.rBoxWidget.propertiesOverride,this.rBoxWidget.internalContainer,this),TRC.CustomModulesManager.runHook("after-visible",this.uiModeName,this,this.rBoxWidget.propertiesOverride,this.rBoxWidget.internalContainer,this)):this.trcManager.runHook(this,this.uiModeName,"after-visible",this.rBoxWidget.propertiesOverride,!0,this.rBoxWidget.internalContainer,this),this.visibilityReported=!0)}static isSpatialEnabled(e){return TRC.util.isPercentEnabled(e.global,"enable-spatial-data-per-page")||e.spatialSlotsThrottleTHPerPage}processSpatialSlotsData(e){if(!this.rBoxWidget.isProviderIframe&&s.isSpatialEnabled(this.trcManager)&&this.isThrottleValidated()){const i=this.trcManager.global["max-slots-geometry-per-page"]||r.defaultMaxSlotsGeometryPerPage,n=[],o=[];let t=null;this.trcManager.enableSlotsSaliency&&(t=window.getComputedStyle(window.document.body)),this.visibleItemsIdxList.slice(-i).forEach(e=>{e=this.rBoxWidget.boxes[e];this.trcManager.enableSlotsGeometry&&s.processVisibleItemGeometry(e,n),this.trcManager.enableSlotsSaliency&&s.processVisibleItemSaliency(e,t,o)});const a=[];if(0===n.length&&0<o.length){const r=o.map(e=>e.id);r.forEach((e,t)=>{const i=o[t];delete i.id,a.push({id:e,ssd:i})}),e.spatialData=__trcJSONify(a)}else if(0<n.length&&0===o.length){const r=n.map(e=>e.id);r.forEach((e,t)=>{const i=n[t];delete i.id,a.push({id:e,sgd:i})}),e.spatialData=__trcJSONify(a)}else if(0<n.length&&0<o.length){const r=n.map(e=>e.id);r.forEach((e,t)=>{const i=n[t];delete i.id;const r=o[t];delete r.id,a.push({id:e,sgd:i,ssd:r})}),e.spatialData=__trcJSONify(a)}}}isThrottleValidated(){var e=this.trcManager.spatialSlotsThrottleMax||r.maxDefaultThrottleNumber;let t=this.trcManager.spatialSlotsThrottleTH;if("number"!=typeof t&&(t=r.defaultThresholdThrottleNumber),t!==e){if(!(0<t))return!1;{const r=Math.floor(Math.random()*e);if(r>t)return!1}}return!0}static processVisibleItemGeometry(e,t){let i={id:-1,x:-1,y:-1,h:-1,w:-1};if(e.lastVisibleBoundingClientRect){const t=(e.lastVisibleBoundingClientRect.left+e.lastVisibleBoundingClientRect.pageXOffset).toFixed(2),r=(e.lastVisibleBoundingClientRect.top+e.lastVisibleBoundingClientRect.pageYOffset).toFixed(2);i={id:e.video_data["item-id"],x:t,y:r,h:e.lastVisibleBoundingClientRect.height.toFixed(2),w:e.lastVisibleBoundingClientRect.width.toFixed(2)}}t.push(i)}static processVisibleItemSaliency(e,t,i){const r=window.getComputedStyle(e),n={id:e.video_data["item-id"],fsi:r.getPropertyValue("font-size"),fst:r.getPropertyValue("font-style"),fn:r.getPropertyValue("font-family"),cbg:r.getPropertyValue("background-color"),dbg:t.getPropertyValue("background-color")};i.push(n)}calculateVisibleItems(n,o,e){const t=e||this.rBoxWidget.boxes;let a=0;return this.visibleItemsIdxList=[],t.forEach((e,t)=>{const i=e.video_data||e,r=this.rBoxWidget.fullEventItemsHash[i["item-id"]];o||e.isVisible||n&&this.isElementVisibleByRects(e,n)?(i["is-syndicated"]?s.addVisibleItemToList(this.sponsoredVisibleItems,i,"is-syndicated"):i["is-in-network"]?s.addVisibleItemToList(this.exchangeVisibleItems,i,"is-in-network"):i["is-native"]?s.addVisibleItemToList(this.nativeVisibleItems,i,"is-native"):s.addVisibleItemToList(this.organicVisibleItems,i,"is-organic"),r.tids="vp",a++,this.visibleItemsIdxList.push(t)):"vp"!==r.tids&&(r.tids="nvp")}),a}static addVisibleItemToList(e,t){e[t["item-id"]]={id:t["item-id"],type:t.type,publisher:t.publisher}}isVisibleWidget(){return this.calculateVisibleItems()>=this.MIN_VISIBLE_ITMES||this.widgetContainer.isVisible}initVisibilityObserver(){const i=this.reportVisibility.trcBind(this),r=this.isVisibleWidget.trcBind(this);if(TRC.tlf&&console.time(`visibility - ${this.uiModeName}`),this.resetVisibilityData(),!this.isVisibilityObserverInitialized){var e={targetElement:this.widgetContainer,enableDelayedVisibilityCheck:!0,visibleWidgetPredicate:r,onTrigger:i,onEnter:()=>{TRC.util.isPercentEnabled(this.trcManager.global,"guarantee-card-clash-detection")&&TRC.ModuleLoader.load("card-interference-detector",TRC.CardInterferenceDetector,()=>{TRC.CardInterferenceDetector.detectCardInterrupted(this.widgetContainer)})}};TRC.intersections.isInViewPort(e);const n=this.rBoxWidget.listContainer&&this.rBoxWidget.listContainer.heatmap;this.widgetItems.forEach(e=>{var t={targetElement:e,enableDelayedVisibilityCheck:!0,visibleWidgetPredicate:r,onTrigger:i,onEnter:()=>n&&n.captureItemTime(e.video_data.id)};TRC.intersections.isInViewPort(t)}),this.isVisibilityObserverInitialized=!0}TRC.tlf&&console.timeEnd(`visibility - ${this.uiModeName}`)}reportManualVisibilityIfVisibleByRects(e){(this.calculateVisibleItems(e)>=this.MIN_VISIBLE_ITMES||this.isElementVisibleByRects(this.widgetContainer,e))&&this.reportVisibility()}isElementVisibleByRects(e,t){var i=(e=e||this.widgetContainer).getBoundingClientRect();if(!s.hasVolume(i))return!1;var r=this.rBoxWidget.getBoundingClientRect(i,t),n=r.left+Math.round((r.right-r.left)/2),o=r.top+Math.round((r.bottom-r.top)/2),i=TRC.Browser.operaUpto(10.1)||TRC.Browser.safariUpto(4)?document.elementFromPoint(n+document.body.scrollLeft,o+document.body.scrollTop):document.elementFromPoint(n,o),r=s.getRootBounds(t),r=0<n&&n<r.maxX&&0<o&&o<r.maxY;return t?r:r&&i&&s.isAncestor(i,e)}static hasVolume(e){return e.top!==e.bottom}static getRootBounds(e){const t={};return e?(t.maxX=e.rootBounds.width,t.maxY=e.rootBounds.height):(t.maxX="CSS1Compat"===document.compatMode&&document.documentElement.clientWidth||document.body.clientWidth,t.maxY="CSS1Compat"===document.compatMode&&document.documentElement.clientHeight||document.body.clientHeight),t}static isAncestor(e,t){return!(!e.parentNode||e.parentNode===document.documentElement&&e!==t)&&(e===t||s.isAncestor(e.parentNode,t))}}TRC.WidgetVisibilityReporter=s})(),(()=>{class o{constructor(e){this.initialUrl=e.initialUrl,this.initialUrlTimeout=e.initialUrlTimeout,this.initialUrl&&(this.initialUrlPending=!0);const t=new Worker(o._buildBlob(this.initialUrl,this.initialUrlTimeout));TRC.URL=TRC.URL||TRC.webkitURL,t.onmessage=this.onWorkerMessage.bind(this),this.worker=t,this.contextCallbacks={},this.context=0}handshake(e){var t={type:"handshake",_context:this._generateContextId()};this.contextCallbacks[t._context]={resolve:e},this.worker.postMessage(t)}xhr(e,t,i,r){const n={url:e,timeout:t||8e3,type:"xhr",_context:this._generateContextId()};e===this.initialUrl&&this.initialUrlPending&&(n._context=-1),this.initialUrlPending=!1,this.contextCallbacks[n._context]={resolve:i,reject:r},-1!==n._context&&this.worker.postMessage(n)}onWorkerMessage(e){const t=e.data,{_context:i,type:r,error:n}=t,o=this.contextCallbacks[i]||{},{resolve:a,reject:s}=o,l="xhrBlob"===r?t.buffer:t.result;a&&"function"==typeof a&&!n?a(l||{}):"function"==typeof s&&s(),delete this.contextCallbacks[i]}_generateContextId(){return++this.context}static _buildBlob(e,t){e=e||"";let i='/*! 20210610-6-RELEASE 2021-06-10 */\n\nfunction onHandshake(t){const e={_context:t,type:"handshake"};self.postMessage(e)}function fetch(t,e,o,n){t=t.replace("/trc/3/json?","/trc/3/json?wrkr=1&");const r=new XMLHttpRequest;r.withCredentials=!0,r.onreadystatechange=function(){r.readyState<4||200!==r.status||4===r.readyState&&o(r)},r.onerror=function(t){(new Image).src="http://trc.taboola.com/xhrworker-errors/log/2/debug?tim=10:24:11.81&type=xhrerror",n(t)},r.ontimeout=function(t){(new Image).src="http://trc.taboola.com/xhrworker-errors/log/2/debug?tim=10:24:11.81&type=xhrtimeout",n(t)},r.open("GET",t,!0),e&&(r.timeout=e),r.send("")}self.addEventListener("message",t=>{const e=t.data,{url:o,timeout:n,_context:r,type:s}=e;if("handshake"===s)return onHandshake(r);fetch(o,n,t=>{const e=t.responseText,o={result:e,type:s,_context:r};self.postMessage(o)},()=>{const t={error:!0,type:s,_context:r};self.postMessage(t)})},!1);const initialUrl="%%initialUrl%%",initialTimeout="%%timeout%%"||8e3;initialUrl&&fetch(initialUrl,initialTimeout,t=>{const e=t.responseText,o={result:e,_context:-1,type:"xhr"};postMessage(o)},()=>{const t={_context:-1,error:!0,type:"xhr"};postMessage(t)});';i=(i=i.replace("%%initialUrl%%",e)).replace("%%timeout%%",t||"");t=new Blob([i],{type:"text/javascript"});return window.URL.createObjectURL(t)}}TRC.initWorkerIfAvailable=function(t,i){if(TRC.workerInited=!0,!TRC.worker&&window.Worker&&window.URL&&window.URL.createObjectURL&&TRCImpl.global["xhr-worker"]){const r=new o({initialUrl:t,timeout:i});TRC.worker=r;const n=setTimeout(()=>{__trcError("worker timeout"),e=()=>{},TRC.worker=!1},200);let e=()=>clearTimeout(n);r.handshake(()=>e())}},TRC.WebWorker=o})(),function(n,o){n.TRC=n.TRC||{};function r(){return!0}function a(e,t,i,r){return t=e+"/"+encodeURIComponent(i||n.TRC.publisherId)+"/log/3/"+t,r&&(t+="?"+o.TRCLogger.formatParams(r)),t}function s(e,t){var i=new(n.XDomainRequest||n.XMLHttpRequest);return i.open(e,t),i.onload=r,i.onerror=r,i.ontimeout=r,i.onprogress=r,i.withCredentials=!0,i}n.TRC.TRCLogger=o.TRCLogger={post:function(e,t,i,r,n){n=a(e,t,r,n),n=s("POST",n);n.setRequestHeader&&n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(o.TRCLogger.formatParams(i))},get:function(e,t,i,r){i=a(e,t,r,i);s("GET",i).send()},formatParams:function(e){var t,i=[];for(t in e)e.hasOwnProperty(t)&&i.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return i.join("&")}}}(window,window[0<="${jsScope}".indexOf("{jsScope}")?"TRC":"${jsScope}"]),function(win,doc){TRC.performance&&TRC.performance.mark("4.0");var protocol=TRC.PROTOCOL,getParameter=TRC.URL.prototype.getParameter,taboolaConsole=getParameter.call(location.href,"trc_console"),timers,div;function invokeInheritedModules(){TRC.InvokeVideoLoader(),TRC.InvokePVideoLoader(),TRC.InvokeVideoTagLoader()}win.trc_debug_level=getParameter.call(location.href,"taboola-debug"),TRC.tlf=!!getParameter.call(location.href,"taboola-perf"),TRC.taboola_yield_report=!!getParameter.call(location.href,"taboola-yield-report"),taboolaConsole&&"yes"===taboolaConsole.toLowerCase()&&(TRC.taboolaConsole=!0,TRC.Manager.prototype.loadExternal("http://c2.taboola.com/console/console_loader.js","js")),isNaN(parseInt(win.trc_debug_level))&&(trc_debug_level=1),TRC.callbacks={mute:function(){var e,t=TRCImpl.boxes;if(TRCImpl.clearPreloadRequestLoaderAndCallNext(),TRC.Timeout.reset(),t)for(e in t)t[e].request=null;TRC.EventsAPI.dispatchNoContent(TRCImpl.NO_CONTENT.mute),TRC.pConsole("warning - mute!","warn","server returned mute","")}},TRC.trc_drawRBox=!1,TRC.listOrigin=new TRC.ListOriginBuilder,TRC.baseDomain=TRC.baseDomain||protocol+"//cdn.taboola.com/libtrc/"+TRC.publisherId+"/",TRC.prototype=TRC.prototype||{},TRC.Interval=function(){var intervals={};return{set:function(callback,interval){var aArgs=Array.prototype.slice.call(arguments,2),intervalId=win.setInterval(function(){"function"==typeof callback?callback.apply(null,aArgs):eval(callback)},interval);return intervals[intervalId.toString()]=1,intervalId},clear:function(e){e&&(win.clearInterval(e),delete intervals[e.toString()])},reset:function(){for(intervalId in intervals)win.clearInterval(intervalId),delete intervals[intervalId.toString()]}}}(),TRC.Timeout=(timers={},{set:function(e,t){var i=win.setTimeout(function(){delete timers[i.toString()],e()},t);return timers[i.toString()]=1,i},clear:function(e){e&&(win.clearTimeout(e),delete timers[e.toString()])},reset:function(){for(var e in timers)win.clearTimeout(e),delete timers[e.toString()]}}),TRC.trcReady=function(){try{TRC.pConsole("page","debug","libtrc : calling TRC.ready",""),invokeInheritedModules(),TRC.implLoaded=!0;var e=TRC.ready({style:".trc_rbox_container{direction:ltr;text-align:left}.trc_rbox_container [class*=span]{float:none;margin-left:0}.trc_multi_widget_container{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}.trc_multi_widget_container .trc_rbox_div{margin:0}.trc_rbox_header{border:0 solid;overflow:hidden;vertical-align:middle}.trc_rbox_container .trc_img{display:inline-block!important}.trc_rbox_header_icon_div{display:table-cell;vertical-align:baseline}.trc_rbox_header .trc_rbox_header_icon_div .trc_rbox_header_icon_img{vertical-align:middle;width:auto}.trc_rbox_header_icon_span{display:inline-table}.in_trc_header{position:relative!important;float:right;margin:0}#trc_rbox_css_loaded{overflow:hidden;width:0;height:0}.trc_rbox{margin-top:0}.trc_rbox_div{margin:0 0 3px;direction:ltr;padding:0;box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box;-webkit-box-sizing:border-box;overflow:auto;position:relative;width:auto;border:solid #ccc 1px}.loading-animation span{display:block}.videoCube{zoom:1;cursor:pointer;float:none;overflow:hidden;box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box;-webkit-box-sizing:border-box}.videoCube_hover,div.videoCube:hover{cursor:pointer}.videoCube span.video-title:hover,.videoCube_hover span.video-title{text-decoration:underline}.videoCube a{text-decoration:none;border:0;color:#000;cursor:pointer}.videoCube a,.videoCube a:hover,.videoCube a:link,.videoCube_hover a{text-decoration:none!important;outline:0}.videoCube a .thumbBlock{float:left;display:block;overflow:hidden!important}.videoCube a img,.videoCube img{border:0;display:block;margin:0;height:auto;width:auto}.videoCube .video-label{display:block;overflow:hidden}.videoCube .video-label{width:auto!important;white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word}.videoCube .video-label-box.label-box-with-title-icon{display:table}.video-icon-container{float:left;display:table-cell;vertical-align:baseline}.video-icon-img{vertical-align:middle}.videoCube .video-duration{height:0;float:left;position:relative;color:#fff;font-size:11px}.videoCube .video-duration dt{border-radius:4px;-moz-border-radius:4px;-webkit-border-radius:4px;background-color:#000;opacity:.6}.videoCube span.video-label.trc_ellipsis{position:relative;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical}.videoCube span.video-label.trc-smart-ellipsis{position:relative;overflow:hidden}.videoCube span.video-label.trc-smart-ellipsis ins{display:inline-block;text-decoration:inherit}.videoCube span.video-label.trc-smart-ellipsis.tbl-ltr-label{direction:ltr}.videoCube span.video-label.trc-smart-ellipsis.tbl-ltr-label ins{float:left;margin-right:5px;direction:ltr}.videoCube span.video-label.trc-smart-ellipsis.tbl-rtl-label{float:right;direction:rtl;width:100%!important}.videoCube span.video-label.trc-smart-ellipsis.tbl-rtl-label ins{float:right;margin-left:5px;direction:rtl}.videoCube span.video-label.trc-smart-ellipsis ins.lastLineEllipsis{display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-wrap:normal;width:100%}.video-duration.video-duration-detail div{color:#fff}.trc_rbox .sponsored{position:relative;display:block;overflow:visible;height:auto;width:auto;padding-right:0;text-align:right;font-size:9px}.trc_rbox_div{height:410px}.videoCube{direction:ltr;font-size:11px;margin:0;color:#000;border-width:0}.videoCube.vertical:first-child{border-top:0;margin-top:0}.videoCube.horizontal:first-child{border-left:0;margin-left:0}.videoCube_hover,div.videoCube:hover{background-color:#ebf0ff;color:#000}.videoCube .thumbBlock{margin:0;border-style:solid}.videoCube a img,.videoCube img{border-color:#ececec}.videoCube .video-label-box{margin-left:81px}.videoCube .video-label dt{font-weight:700}.videoCube .video-title{height:auto;margin-bottom:3px;white-space:normal}.videoCube .trc_inline_detail_spacer{display:inline-block;white-space:pre}.loading-animation{font-family:sans;font-size:1.5em;text-align:center;color:gray;height:100%}.trc_rbox_header{font-family:Arial,Helvetica,sans-serif;font-size:12px;font-weight:700;text-decoration:none;color:#000}.trc_header_right_part{position:absolute;left:50%;top:0}.branding_div{overflow:visible;float:right}.branding_div img{height:20px}.videoCube .branding .logoDiv{font-size:inherit;line-height:inherit;background:0 0;margin:0;padding:0}.videoCube .branding .logoDiv a{vertical-align:inherit;color:inherit;line-height:inherit}.videoCube .branding .logoDiv a span{vertical-align:inherit}.trc_related_container .videoCube .branding .attribution-disclosure-link-sponsored{display:inline-block;float:none}.trc_related_container .videoCube .branding .attribution-disclosure-link-sponsored.align-disclosure-right{float:right;margin-left:auto;padding-left:2px}.videoCube .video-label-box .branding.composite-branding{display:-webkit-box;display:-ms-flexbox;display:flex}.branding.composite-branding>*{display:inline-block;vertical-align:bottom}.branding .branding-separator{margin:0 2px;font-weight:400}.branding .branding-inner{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.video-label-box span.branding.inline-branding{display:inline-block}.trc_related_container div.horizontal{float:left;box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box;-webkit-box-sizing:border-box}.trc_related_container DIV.videoCube.thumbnail_bottom .thumbBlock,.trc_related_container DIV.videoCube.thumbnail_top .thumbBlock{float:none}.vidiscovery-note{display:none}.videoCube .thumbBlock .trc_sponsored_overlay_base{display:block;width:auto;margin-left:0;position:absolute;color:#fff!important}.videoCube .thumbBlock .trc_sponsored_overlay{opacity:.6;display:block;position:absolute}.videoCube .thumbBlock .trc_sponsored_overlay_base .sponsored{position:relative;display:block;overflow:visible;width:auto;text-align:center;padding:0 5px;margin-top:0}.videoCube .thumbBlock .trc_sponsored_overlay_base.round .trc_sponsored_overlay{border-radius:4px;-moz-border-radius:4px;-webkit-border-radius:4px}.videoCube .thumbBlock .trc_sponsored_overlay_base.round{margin-left:4px}.thumbnail-emblem,.videoCube .thumbnail-overlay,.videoCube:hover .thumbnail-overlay,.videoCube_hover .thumbnail-overlay{position:absolute;background:transparent no-repeat;background-size:contain;z-index:50}.thumbnail_bottom{padding-bottom:8px}.trc_related_container .logoDiv{font-family:Arial,Helvetica,sans-serif;white-space:nowrap;font-size:9px}.trc_related_container .logoDiv a{font-size:9px;text-decoration:none!important;color:#000;margin-right:1px;vertical-align:text-bottom}.logoDiv a span:hover{text-decoration:underline}.trc_rbox_header .logoDiv{font-size:1em}.trc_tl .trc_rbox_header .logoDiv{position:relative;z-index:1}.trc_tl .trc_rbox_header_span .trc_header_right_column{position:absolute;width:48%;left:52%;top:0}.trc_tl .trc_rbox_div .videoCube.horizontal{clear:left}.trc_tl .trc_rbox_div .videoCube.trc_tl_right_col{float:none;clear:right;margin-left:auto}.trc_tl .videoCube .video-title .branding{line-height:1.3em}.trc_tl .videoCube:hover span.branding,.trc_tl .videoCube_hover span.branding{text-decoration:none}.trc_tl .trc_rbox_div .videoCube.thumbnail_none a{vertical-align:top;overflow:visible}.trc_tl .videoCube .video-label-box{display:inline-block;vertical-align:top;width:100%}.trc_rbox_container.trc_expandable{overflow:hidden;max-height:0;transition-property:max-height;-webkit-transition-property:max-height;-moz-transition-property:max-height;-o-transition-property:max-height;-webkit-transform:translateZ(0);-moz-transform:translateZ(0);-ms-transform:translateZ(0);-o-transform:translateZ(0);transform:translateZ(0)}.trc_related_container .videoCube .thumbBlock .branding{position:absolute;bottom:0;z-index:1;width:100%;margin:0;padding:5px 0;text-align:center}.syndicatedItem .branding{margin:0}.trc-inplayer-rbox{background:#333;background:rgba(30,30,30,.9);bottom:0;position:absolute;height:300px;text-align:center}.trc-inplayer-rbox .trc_rbox_container{margin:50px auto 0;width:640px}.trc_rbox.trc-auto-size{width:100%;height:100%}.videoCube.thumbnail_under .video-title{min-height:2.58em}.videoCube.thumbnail_under .tbl-text-over-container{width:100%;position:absolute;z-index:1;left:0;bottom:0;min-height:66%;max-height:66%;padding-top:2px;padding-bottom:2px;line-height:1.25em}.videoCube.thumbnail_under .tbl-text-over-container .tbl-text-over{height:100%;width:100%;position:absolute;background:linear-gradient(to bottom,rgba(0,0,0,0) 0,rgba(0,0,0,.8) 100%)}.videoCube.thumbnail_under .tbl-text-over-container span.branding,.videoCube.thumbnail_under .tbl-text-over-container span.video-description,.videoCube.thumbnail_under .tbl-text-over-container span.video-title{position:relative;z-index:1;padding:0 8px;margin:0}.videoCube.thumbnail_under .tbl-text-over-container span.video-title{margin-bottom:6px;min-height:auto}.videoCube.thumbnail_under .tbl-text-over-container .video-label-box{position:absolute;bottom:0;left:0;width:100%;padding:0 8px 6px 8px;min-height:auto}.trc-auto-size .trc_rbox_outer .trc_rbox_div{height:auto;width:auto}.trc-auto-size .trc_rbox_div .videoCube{height:auto}.trc-auto-size .trc_rbox_div .videoCube.trc-first-recommendation{margin-top:0}.trc_rbox .trc_rbox_outer .trc_rbox_div .videoCube.trc-first-in-row{margin-left:0}.trc_elastic .trc_rbox{width:auto}.trc_elastic .videoCube{overflow:hidden}.trc_elastic .videoCube .thumbBlock{background:transparent no-repeat center center;background-size:cover;position:absolute;display:inline-block;top:0;right:0;bottom:0;left:0;margin-left:0;margin-right:0}.trc_elastic .thumbBlock_holder{position:relative;width:100%}.trc_elastic .thumbnail_start .thumbBlock_holder{float:left;margin-right:10px}.trc_elastic .thumbnail_start.item-has-pre-label .thumbBlock_holder{margin-right:0}.trc_elastic .videoCube_aspect{width:1px}.trc_elastic .trc_rbox .trc_rbox_div{height:auto}.trc_elastic .thumbnail_start .trc-pre-label{float:left;padding-right:10px}.trc_elastic .thumbnail_start.trc-split-label .trc-main-label{float:left;padding-left:10px}.trc_elastic .video-label-box{display:block}.trc_elastic .thumbnail_start .video-label-box{box-sizing:border-box}.trc_user_adChoice_btn{background:url(//cdn.taboola.com/static/c5/c5ef96bc-30ab-456a-b3d5-a84f367c6a46.svg) no-repeat scroll 0 0 rgba(255,255,255,1);border-radius:0 0 0 5px;width:16px;height:16px;position:absolute;right:0;top:0;z-index:9000;cursor:pointer;border-width:2px 0 2px 4px;border-style:solid;border-color:#fff;opacity:.7;background-size:contain;visibility:hidden}.videoCube:hover .trc_user_adChoice_btn,.videoCube_hover .trc_user_adChoice_btn{visibility:visible}.videoCube .trc_user_adChoice_btn_static{visibility:visible}.p-video-overlay-container{position:absolute;width:100%;height:100%;top:0;left:0;background-color:transparent}.p-video-overlay.p-video-overlay-show{display:flex}.p-video-overlay{display:none;background-color:#000;opacity:.7;width:100%;height:100%;flex-direction:column}.p-video-overlay-action{color:#fff;width:100%;direction:ltr;text-align:center;display:flex;justify-content:center;flex-direction:column}.p-video-overlay-action.p-video-back-action{height:34%}.p-video-back-action-label{font-family:Helvetica Neue,serif;font-size:14px;font-weight:200;letter-spacing:1px}.p-video-overlay-action.p-video-goto-action{height:66%}.p-video-goto-action-url{font-family:Helvetica Neue,serif;font-size:24px;font-weight:400;text-decoration:underline;margin-top:5px}.p-video-goto-action-label{font-family:Helvetica Neue,serif;font-size:14px;font-weight:100;letter-spacing:1px}.trc_related_container .trc_clearer{clear:both;height:0;overflow:hidden;font-size:0;line-height:0;visibility:hidden}.link-adc{float:right!important}.trc-widget-footer .logoDiv{line-height:normal;padding-bottom:5px}.trc-widget-footer .link-adc a .trc_adc_wrapper,.trc_header_ext .link-adc a .trc_adc_wrapper{height:12px;width:18px;display:inline-block;padding-left:1px;margin-bottom:2px}.trc-widget-footer .link-adc a .trc_adc_b_logo,.trc-widget-footer .link-adc a .trc_adc_s_logo,.trc_header_ext .link-adc a .trc_adc_b_logo,.trc_header_ext .link-adc a .trc_adc_s_logo{vertical-align:middle;height:15px;display:inline-block;margin-top:-1px}.trc-widget-footer .link-adc a .trc_adc_s_logo,.trc_header_ext .link-adc a .trc_adc_s_logo{width:12px;height:14px;background:url(//cdn.taboola.com/static/c5/c5ef96bc-30ab-456a-b3d5-a84f367c6a46.svg) no-repeat;background-size:contain;vertical-align:middle}.trc-widget-footer .link-adc a .trc_adc_b_logo,.trc_header_ext .link-adc a .trc_adc_b_logo{width:77px;background:#fff url(//cdn.taboola.com/libtrc/static/thumbnails/0781f9c5a8637d1e162874f157460048.png) no-repeat!important;right:-1px;display:none;position:absolute}.logoDiv .trc_mobile_adc_link,.logoDiv .trc_mobile_attribution_link,.logoDiv .trc_mobile_disclosure_link{display:none}.logoDiv .trc_desktop_adc_link,.logoDiv .trc_desktop_attribution_link,.logoDiv .trc_desktop_disclosure_link{display:inline}@media screen and (max-width:767px){.logoDiv .trc_mobile_disclosure_link{display:inline}.logoDiv .trc_mobile_attribution_link{display:inline}.logoDiv .trc_mobile_adc_link{display:inline}.logoDiv .trc_desktop_disclosure_link{display:none}.logoDiv .trc_desktop_attribution_link{display:none}.logoDiv .trc_desktop_adc_link{display:none}}.trc_in_iframe .logoDiv .trc_mobile_attribution_link,.trc_in_iframe .logoDiv .trc_mobile_disclosure_link{display:inline}.trc_in_iframe .logoDiv .trc_desktop_attribution_link,.trc_in_iframe .logoDiv .trc_desktop_disclosure_link{display:none}.trc_related_container .logoDiv,.trc_related_container .trc_header_ext .logoDiv{float:right}.trc_related_container .logoDiv+.logoDiv{margin-right:2px}.trc_related_container .attribution-disclosure-link-hybrid,.trc_related_container .attribution-disclosure-link-sponsored{display:none}.trc-w2f.trc-content-sponsored .attribution-disclosure-link-sponsored,.trc_related_container .trc-content-sponsored .attribution-disclosure-link-sponsored{display:block}.trc-w2f.trc-content-hybrid .attribution-disclosure-link-hybrid,.trc_related_container .trc-content-hybrid .attribution-disclosure-link-hybrid{display:block}.trc_related_container .trc-widget-footer:hover a span,.trc_related_container .trc_header_ext:hover a span{text-decoration:underline!important}.logoDiv a span.trc_logos_v_align{display:inline-block!important;font-size:15px!important;line-height:1em!important;width:0!important}.trc_related_container .trc-widget-footer:hover a span.trc_adc_wrapper,.trc_related_container .trc-widget-footer:hover a span.trc_logos_v_align,.trc_related_container .trc_header_ext:hover a span.trc_adc_wrapper,.trc_related_container .trc_header_ext:hover a span.trc_logos_v_align{text-decoration:none!important}.trc_related_container .trc_rbox_header_span .trc_header_right_column{display:none}.trc_related_container img{max-width:none}.trc_related_container{clear:both}.tbl-loading-spinner{width:100%;height:40px;background:url(//cdn.taboola.com/static/91/91a25024-792d-4b52-84e6-ad1478c3f552.gif) center center no-repeat;background-size:40px}.tbl-hidden{display:none!important}.tbl-invisible{opacity:0;pointer-events:none}.tbl-batch-anchor{width:100%;height:1px}.iw_video_frame .trc_rbox_div{overflow:hidden}.trc-w2f .trc_rbox .trc-widget-footer,.trc-w2f .trc_rbox .trc_rbox_header{display:none!important}"});if(e.global["smart-ellipsis"]&&!TRC.ellipsisListening&&(TRC.listen("ellipsis",e._repaintEllipsis.trcBind(e)),TRC.listen("allrender",e._repaintEllipsis.trcBind(e)),TRC.listen("batchrender",e._repaintEllipsis.trcBind(e)),TRC.ellipsisListening=!0),!e.invisible)return;TRC.dom.onReady(function(){div?(div.innerHTML="",div.style.display="none"):(div=doc.createElement("div"),doc.body.appendChild(div).style.display="none"),_taboola.push({mode:"rbox-tracking",container:div})})}catch(e){__trcError("Error in libtrc initialization",e)}},TRC.pConsole("","time","impl file loaded",""),TRC.utm.push((new Date).getTime()-TRC.utm.start),TRC.tlf&&console.timeStamp("call trcReady"),TRC.trcReady()}(window,document);
