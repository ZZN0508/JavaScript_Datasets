!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("wafer-scrollview",[],t):"object"==typeof exports?exports["wafer-scrollview"]=t():(e.wafer=e.wafer||{},e.wafer.wafers=e.wafer.wafers||{},e.wafer.wafers["wafer-scrollview"]=t())}("undefined"!=typeof self?self:this,function(){return i={"./src/base.js":function(e,t,D){"use strict";function B(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}Object.defineProperty(t,"__esModule",{value:!0});function a(e,t,i){null===e&&(e=Function.prototype);var s=Object.getOwnPropertyDescriptor(e,t);return void 0!==s?"value"in s?s.value:void 0!==(s=s.get)?s.call(i):void 0:null===(e=Object.getPrototypeOf(e))?void 0:a(e,t,i)}function W(e,t,i){e.style.webkitTransition="transform "+t+"ms "+i,e.style.transition="transform "+t+"ms "+i}function m(e){e.style.webkitTransition="",e.style.transition=""}function I(e,t){_&&(e.style.cursor=t)}var j,s,r,N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i,s=arguments[t];for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},i=function(e,t,i){return t&&A(e.prototype,t),i&&A(e,i),e},n=window.wafer,V=n.base,o=n.constants,l=n.features,u=n.utils,n=n.WaferBaseClass,c=l.smoothScroll,g=l.transformProperty,X=o.ATTR_PREFIX,d=u.setTimeout,h=u.clearTimeout,v=u.bindEvent,y=u.clearAndSetInnerHTML,F=u.convertNodeListToArray,f=u.elementInView,w=u.fetchWithCache,z=u.findAncestor,U=u.getConfigFromJSONScriptNode,p=u.isVisible,H=u.throttle,b=u.unbindEvent,Y="active",R="visited",q=["indicatorClick","indicatorMouseLeave","indicatorMouseover","next","pause","prev","resume"],_="ontouchstart"in window,E=(r=!(s=[]),{add:function(e,t){var i;s.push((i=t,function(){return e.call(i)})),this.exec(t._util.transitionDuration)},exec:function(t){var i=this;r||(r=!0,d(function(){var e=s.shift();switch(r=!1,e.call(),s.length){case 0:return;case 1:i.exec(t);case 2:i.exec(t+50);default:i.exec(0)}},t))}}),i=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(J,n),i(J,[{key:"addAriaAttributes",value:function(e){var t=this._util;t.sliderItems=F(t.sliderElem.children),e=e||t.dataList.getActive();for(var i=t.sliderItems.length,s=0;s<i;s++){var r=t.sliderItems[s];r.setAttribute("aria-hidden",(e!==r)+"")}}},{key:"slidesHasBeenUpdated",value:function(){var e=this._util;e.sliderItems=F(e.sliderElem.children);var t=e.sliderItems.length;this._state.slideWidth=100/t;for(var i=0;i<t;i++)e.sliderItems[i].style.width=this._state.slideWidth+"%";this.updateWidth()}},{key:"updateWidth",value:function(){var e=this._util,t=this._state.virtualCounter,i=e.edgePadding,s=e.edgePaddingPercentage,r=e.rightPadding,a=e.sliderElem,n=e.sliderItems;a.style.width="";var o=a.clientWidth;s?(s=o*e.edgePaddingPercentage/100,e.sliderElem.style["padding-left"]=s+"px",e.itemWidth=o-2*s):e.itemWidth=i?o-2*i:r?o-r:o,a.style.width=e.itemWidth*n.length+"px",a.style[g]="translateX(-"+(t*e.itemWidth+this.negativeWidthCoefficient)+"px)"}},{key:"addEventListeners",value:function(){var s=this,e=this._util,t=e.behavior,i=e.elem,r=e.sliderElem;if("native"===t)return window.wafer.ready(function(){window.wafer.on("video:mediacurrent",function(){var e=r.getElementsByClassName("active")[0],t=r.getElementsByClassName("wafer-playlist-active")[0],i=F(r.children).indexOf(t);e!==t&&-1!==i&&(i=i*t.getBoundingClientRect().width,e.classList.remove("active"),t.classList.add("active"),s._state.activeElem=t,c?r.scrollTo({behavior:"smooth",left:i,top:0}):r.scrollTo(i,0),s.updateButtons(!0))})}),void v(r||i,"scroll",this._syncWithThrottle);t=this._util.indicatorItems;this.setTimeoutForAutoSwitch(),t&&((i=this._util.indicatorWithoutCountElem)&&(t.forEach(function(e,t){e.setAttribute("data-index",t)}),v(i,"click",this.indicatorClick)),this._util.shouldAutoSwitch&&i&&(v(i,"mouseover",this.indicatorMouseover),v(i,"mouseleave",this.indicatorMouseLeave))),a(J.prototype.__proto__||Object.getPrototypeOf(J.prototype),"addEventListeners",this).call(this)}},{key:"pauseAutoSwitch",value:function(){this._util.shouldAutoSwitch&&(this._state.autoSwitchInProgress=!1,this._util._switchScrollTimeout&&h(this._util._switchScrollTimeout,this))}},{key:"setTimeoutForAutoSwitch",value:function(){var e,t=this;!this._util.shouldAutoSwitch||this._state.autoSwitchPausedByUser||this._state.autoSwitchInProgress||this._state.mouseOnElement||(this._state.autoSwitchInProgress=!0,e=this._util.autoSwitchTimeout,this.pauseAutoSwitch(),this._util._switchScrollTimeout=d(function(){t.showCurrent(1,{source:"autoscroll",type:"next"})},e,this))}},{key:"removeEventListeners",value:function(){var e=this._util,t=e.behavior,i=e.elem,s=e.indicatorWithCountElem,r=e.shouldAutoSwitch,e=e.sliderElem;"native"!==t?(s&&b(s,"click",this.indicatorClick),r&&s&&(v(s,"mouseover",this.indicatorMouseover),v(s,"mouseleave",this.indicatorMouseLeave)),this.pauseAutoSwitch(),a(J.prototype.__proto__||Object.getPrototypeOf(J.prototype),"removeEventListeners",this).call(this)):b(e||i,"scroll",this._syncWithThrottle)}},{key:"preFetch",value:function(){for(var e=this._util.dataList,t=0;t<3;t++){var i=e.getForward(t),s=e.getBackward(t);i&&this.renderSlide(i,{prefetch:!0}),s&&this.renderSlide(s,{prefetch:!0})}}},{key:"snapNativeScrollViewToActiveElement",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.calledOnLoad,i=e.source,s=this._util,r=s.isUsingScrollSnap,a=s.sliderElem,e=this._state.activeElem;!e||void 0!==t&&t&&0===a.scrollLeft?this.updateButtons(!0):(t=(s=e.getBoundingClientRect()).left,e=s.width,s=t,r?(c?("next"===i?s=e:"prev"===i&&(s=-1*e),a.scrollBy({behavior:"smooth",left:s,top:0})):a.scrollBy(t,0),this.updateButtons(!0)):(s=a.getBoundingClientRect().width,a.scrollLeft=s<=e?t-30:t-(s-e)/2))}},{key:"handleResize",value:function(){var e,t=this._util,i=t.behavior,s=t.cycle,r=t.transitionDuration,a=t.transitionTimingFunction;"native"!==i&&(e=this._util.sliderElem,p(e)&&(m(e),s?this.slidesHasBeenUpdated():this.updateWidth(),d(function(){W(e,r,a)},0)))}},{key:"handleFetch",value:function(u){var c,d,h=this,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=e.fetchBody,i=e.fetchUrl,s=e.prefetch,v=void 0!==s&&s,s=e.replace,f=void 0!==s&&s,p=e.resultSelector;v&&!u.parentNode||(e=this._util,c=e.dataList,(e=e.sliderItemsDataMapping).has(u)||e.set(u,{}),d=e.get(u),!i||void 0!==d.fetchStatus&&2!==d.fetchStatus?(v?V.prefetch(u):V.sync(u),f&&this.slidesHasBeenUpdated()):(d.fetchStatus=0,w(i,{body:t}).then(function(){var e,t,i,s,r,a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=a.assets,o=void 0===n?{}:n,l=a.html;l&&(e=void 0,t=!1,V.destroy(u),f?(r=document.createElement("div"),i=u.parentNode,s=F(i.children),r.innerHTML=l,n=p&&r.querySelector(p),a=F((n||r||{}).children),n=s.indexOf(u),r=u===c.tail,c.appendWithReplace(u,a),-1!==n&&(a.forEach(function(e){i.insertBefore(e,u)}),r&&(i.removeChild(s[0]),h._state.virtualCounter=Math.floor(2.5),t=u!==c.tail),i.removeChild(u)),e=i,h._state.hasBeenThreadmilled=!1):(y(u,l),e=u),d.fetchStatus=1,V.syncAssets(o),v?V.prefetch(u):V.sync(e),t&&m(h._util.sliderElem),f&&h.slidesHasBeenUpdated())}).catch(function(e){V.emitError({name:J.constructor.name,elem:u,meta:{fetchUrl:i},stack:e.stack}),d.fetchStatus=2})))}},{key:"renderSlide",value:function(e){var t,i,s,r=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).prefetch,a=void 0!==r&&r,n=this._util.sliderElem;a&&!f(n,{offsetX:0,offsetY:0},V.viewport)||(r=s=i=t=void 0,"fetch"===((n=e.getAttribute(X+"url"))&&(t="fetch",s=!!Number(e.getAttribute(X+"replace")),i=e.getAttribute(X+"result-selector"),r=e.getAttribute(X+"body")),t)?this.handleFetch(e,{fetchBody:r,fetchUrl:n,prefetch:a,replace:s,resultSelector:i}):a?V.prefetch(e):d(function(){V.sync(e)},this._util.transitionDuration))}},{key:"updateElemsUsingVirtualElements",value:function(e,t){var s,r=this,a=this._util,n=this._state,i=a.cycle,o=a.dataList,l=a.itemWidth,u=a.sliderElem,c=a.transitionTimingFunction,d=a.transitionDuration,h=o.size,v=n.slideWidth,f=n.virtualCounter;if(1===e){if(i||!(h<t+1)){var p=o.getElementToAppend();if(p&&(p.style.width=v+"%"),W(u,d,c),u.style[g]="translateX(-"+(((f||0)+1)*l+this.negativeWidthCoefficient)+"px)",null===f)return n.virtualCounter=1,this._util.counter=t,o.setNextAsActive(),void this.scrollViewTransformAnimationDidComplete();n.virtualCounter++,o.setNextAsActive(),p&&E.add(function(){var e=a.itemWidth,t=a.sliderElem,i=F(t.children);t.removeChild(i[0]),t.appendChild(p),a.sliderItems=F(t.children),n.virtualCounter--,m(t),t.style[g]="translateX(-"+n.virtualCounter*e+"px)",r.scrollViewTransformAnimationDidComplete()},this)}}else-1===e&&(!i&&t<0||((s=o.getElementToPrepend())&&(s.style.width=v+"%"),W(u,d,c),u.style[g]="translateX(-"+(f-1)*l+"px)",n.virtualCounter--,o.setPreviousAsActive(),s&&E.add(function(){var e=a.itemWidth,t=a.sliderElem,i=F(t.children);t.removeChild(i[i.length-1]),t.prepend(s),a.sliderItems=F(t.children),n.virtualCounter++,m(t),t.style[g]="translateX(-"+n.virtualCounter*e+"px)",r.scrollViewTransformAnimationDidComplete()},this)))}},{key:"showCurrent",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=this._util,i=t.boundaryElem,s=t.counter,r=t.cycle,a=t.dataList,n=t.elem,o=t.itemWidth,l=t.sliderElem,u=a.size,c=s;if(this.isValidMove(e))if(r?1===e?c=u<=c+1?0:s+e:-1===e&&(c=c<=0?u-1:s+e):c=s+e,a.getActive().classList.remove(Y),c!==s){if(!this._state.hasBeenThreadmilled){for(;5<[].concat(function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}(l.children)).length;)l.removeChild(l.children[5]);t.sliderItems=F(l.children),this.slidesHasBeenUpdated(),this._state.hasBeenThreadmilled=!0}this.updateElemsUsingVirtualElements(e,c),this._util.counter=c;e=a.getActive();e.classList.add(Y,R),this.renderSlide(e),this.updateIndicators(c,s),this.updateButtons(),this.triggerOnChange(),this.preFetch(),c+1===u?(n.classList.add("wafer-scrollview-reached-end"),i&&i.classList.add("wafer-scrollview-boundary-reached-end")):(n.classList.remove("wafer-scrollview-reached-end"),i&&i.classList.remove("wafer-scrollview-boundary-reached-end")),this.addAriaAttributes(e),V.emitWaferEvent("scrollview:change",{elem:n,meta:{index:c+1,prevIndex:s+1}})}else{a=a.getActive();a.classList.add(Y,R);o="translateX(-"+(this._state.virtualCounter*o+this.negativeWidthCoefficient)+"px)";o!==this._util.transformValue&&(l.style[g]=o,this._util.transformValue=o),this.addAriaAttributes(a)}}},{key:"triggerOnChange",value:function(){var e=this._state.triggerNodeMap,t=this._util.dataList.getActive(),i=[];e.has(t)?i=e.get(t):(i=F(t.getElementsByClassName("wafer-scrollview-trigger-on-active")),e.set(t,i)),i.forEach(function(e){V.trigger(e)})}},{key:"updateIndicators",value:function(e,t){var i=this._util,s=i.indicatorCountElem,r=i.indicatorsCustomCount,i=i.indicatorItems;i&&(i[t]&&i[t].classList.remove(Y),i[e]&&i[e].classList.add(Y,R)),s&&(s.innerHTML=r&&r[e]||e+1)}},{key:"updateButtons",value:function(e){var t,i=this._util,s=i.behavior,r=i.nextBtn,a=i.prevBtn;"native"!==s?(t=i.counter,s=i.cycle,i=i.dataList.size,r&&(s&&!e||t!==i-1?r.removeAttribute("disabled"):r.setAttribute("disabled",!0)),a&&(s&&!e||0!==t?a.removeAttribute("disabled"):a.setAttribute("disabled",!0))):(e=this._state.activeElem)&&(t=e.previousElementSibling,e=e.nextElementSibling,r&&(e?r.removeAttribute("disabled"):r.setAttribute("disabled",!0)),a&&(t?a.removeAttribute("disabled"):a.setAttribute("disabled",!0)))}},{key:"updateAfterDrag",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=this._util.drag,i=t.currentDirection,s=t.endX,r=t.horizontalDirection,t=s-t.startX,r=i===r;r&&0<t&&30<Math.abs(t)?this.showCurrent(-1,e):r&&t<0&&30<Math.abs(t)?this.showCurrent(1,e):this.showCurrent()}},{key:"didLock",value:function(){this.pauseAutoSwitch()}},{key:"didUnLock",value:function(){this.setTimeoutForAutoSwitch()}},{key:"isValidMove",value:function(e){var t=this._util,i=t.counter,s=t.cycle,t=t.dataList.size;return s?1===e&&i<=t-1||-1===e&&0<=i||0===e:1===e&&i<t-1||-1===e&&0<i||0===e}},{key:"grab",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=this._util.drag;this._util.pointerDown=!1,t.endX&&this.updateAfterDrag(e),this.clearDrag()}},{key:"grabbing",value:function(){var e=this._util,t=e.drag,i=e.elem,s=e.itemWidth,r=e.sliderElem,a=e.triggerWafersDuringTransition,e=-1*(this._state.virtualCounter*s+(t.startX-t.endX)),t="translateX("+e+"px)";a&&2*Math.abs(e)>=s&&V.sync(i),t!==this._util.transformValue&&(this._util.drag.grabbing=!0,r.style[g]=t,this._util.transformValue=t)}},{key:"clearDrag",value:function(){var e=this;this._util.drag={currentDirection:null,endX:0,endY:0,grabbing:!1,horizontalDirection:0,last:0,startX:0,startY:0},this._util.grabTimeout&&h(this._grabTimeout),this._util.grabTimeout=d(function(){e._util.drag.isVerticalDirection=!1},50)}},{key:"indicatorClick",value:function(e){if(t=e.target.getAttribute("data-index")){var t,i=this._util.counter;if((t=parseInt(t,10))<i)for(var s=0;s<i-t;s++)this.showCurrent(-1);else if(i<t)for(var r=0;r<t-i;r++)this.showCurrent(1)}}},{key:"scrollViewTransformAnimationDidComplete",value:function(){this._state.autoSwitchInProgress=!1,this.setTimeoutForAutoSwitch()}},{key:"indicatorMouseover",value:function(e){this._state.mouseOnElement=!0,this.pauseAutoSwitch()}},{key:"indicatorMouseLeave",value:function(e){this._state.mouseOnElement=!1,this.setTimeoutForAutoSwitch()}},{key:"next",value:function(e){var t;e.preventDefault(),e.stopPropagation(),"native"!==this._util.behavior?this.showCurrent(1,{source:"button",type:"next",sourceEvent:e}):!(t=this._state.activeElem)||(e=t.nextElementSibling)&&(t.classList.remove("active"),this._state.activeElem=e,this._state.activeElem.classList.add("active"),this.snapNativeScrollViewToActiveElement({calledOnLoad:!1,source:"next"}))}},{key:"pause",value:function(e){e.preventDefault(),e.stopPropagation();var t=this._util,e=t.elem;t.shouldAutoSwitch&&e.classList.add("wafer-scrollview-autoswitch-paused-by-user","wafer-scrollview-autoswitch-paused"),this._state.autoSwitchPausedByUser=!0,this.pauseAutoSwitch()}},{key:"prev",value:function(e){var t;e.preventDefault(),e.stopPropagation(),"native"!==this._util.behavior?this.showCurrent(-1,{source:"button",type:"prev",sourceEvent:e}):!(t=this._state.activeElem)||(e=t.previousElementSibling)&&(t.classList.remove("active"),this._state.activeElem=e,this._state.activeElem.classList.add("active"),this.snapNativeScrollViewToActiveElement({calledOnLoad:!1,source:"prev"}))}},{key:"resume",value:function(e){e.preventDefault(),e.stopPropagation();var t=this._util,e=t.elem;t.shouldAutoSwitch&&e.classList.remove("wafer-scrollview-autoswitch-paused-by-user","wafer-scrollview-autoswitch-paused"),this._state.autoSwitchPausedByUser=!1,this.setTimeoutForAutoSwitch()}},{key:"keydown",value:function(e){this._state.disableEventHandlers||(37===(e=e||window.event).keyCode?this.showCurrent(-1,{source:"key",type:"prev"}):39===e.keyCode&&this.showCurrent(1,{source:"key",type:"next"}))}},{key:"touchstart",value:function(e){var t,i;this._state.disableEventHandlers||(this.pauseAutoSwitch(),t=this._util,e=(i=e.touches[0]).pageX,i=i.pageY,t.pointerDown=!0,t.drag.isVerticalDirection=!1,t.drag.startX=e,t.drag.startY=i)}},{key:"touchend",value:function(e){this._state.disableEventHandlers||(this._util.pointerDown=!1,this.grab({source:"touch"}))}},{key:"touchmove",value:function(e){var t,i,s,r,a,n,o;this._state.disableEventHandlers||(s=(i=(t=this._util).drag).startX,r=i.startY,a=(o=e.touches[0]).pageX,n=o.pageY,o=0,i.isVerticalDirection||(8<Math.abs(r-n)&&(i.isVerticalDirection=n<r?1:-1),i.horizontalDirection=o=s!==a?a<s?1:-1:o,i.last!==a&&(i.currentDirection=i.last>a?1:-1,i.last=a),t.pointerDown&&(i.endX=a,i.endY=n,this.isValidMove(o)&&(t.drag.grabbing&&e.cancelable&&e.preventDefault(),8<Math.abs(r-n)&&(i.isVerticalDirection=n<r?1:-1),o&&!i.isVerticalDirection&&this.grabbing()))))}},{key:"mousedown",value:function(e){var t,i;this._state.disableEventHandlers||(e.preventDefault&&e.preventDefault(),t=this._util,i=e.pageX,e=e.pageY,t.pointerDown=!0,t.drag.isVerticalDirection=!1,t.drag.startX=i,t.drag.startY=e)}},{key:"mouseover",value:function(){this._state.mouseOnElement=!0;var e=this._util,t=e.elem;e.shouldAutoSwitch&&t.classList.add("wafer-scrollview-autoswitch-paused"),this.pauseAutoSwitch()}},{key:"mouseup",value:function(e){var t;this._state.disableEventHandlers||(t=this._util.sliderElem,I(t,"-webkit-grab"),this.grab({source:"mouse"}))}},{key:"mouseleave",value:function(e){var t,i,s=this._state.disableEventHandlers;this._state.mouseOnElement=!1,s||(e.preventDefault(),this._state.autoSwitchPausedByUser||(i=(t=this._util).elem,t.shouldAutoSwitch&&i.classList.remove("wafer-scrollview-autoswitch-paused"),this.setTimeoutForAutoSwitch()),t=(s=this._util).drag,i=s.pointerDown,s=s.sliderElem,i&&(i=e.pageX,e=e.pageY,t.endX=i,t.endY=e,I(s,"-webkit-grabbing"),this.grabbing()))}},{key:"mousemove",value:function(e){var t,i,s;this._state.disableEventHandlers||(s=(i=this._util).pointerDown,t=i.sliderElem,i=i.drag,s&&(s=e.pageX,e=e.pageY,this._util.pointerDown=!1,I(t,"-webkit-grab"),i.endX=s,i.endY=e,this.updateAfterDrag(),this.clearDrag()))}},{key:"remove",value:function(){this._util.elem.remove()}},{key:"destroy",value:function(){this.removeEventListeners(),a(J.prototype.__proto__||Object.getPrototypeOf(J.prototype),"destroy",this).call(this)}},{key:"negativeWidthCoefficient",get:function(){if(!this._util)return 0;var e=this._util,t=e.counter,i=e.dataList,s=e.resizeEnd,e=e.rightPadding;if(t>=i.size-2){if(e)return-e;if(s){t=i.tail;if(!t)return 0;e=t.style.width,s=t.getBoundingClientRect().width;t.style.width="";i=t.getBoundingClientRect().width;return t.style.width=e,-(s-Math.min(i,s))}}return 0}}]),J);function J(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=t.counter,s=void 0===i?0:i,r=t.syncDelay,a=void 0===r?25:r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,J);var n=B(this,(J.__proto__||Object.getPrototypeOf(J)).call(this,e,{},{})),o=e.getAttribute(X+"behavior");if(n._util={elem:e,sliderElem:F(e.getElementsByClassName("slides"))[0]||e,behavior:o,nextBtn:F(e.getElementsByClassName("next-btn"))[0],prevBtn:F(e.getElementsByClassName("prev-btn"))[0]},q.forEach(function(e){n[e]=n[e].bind(n)}),"native"===o){var l=e.getAttribute(X+"scroll-snap");n._util.isUsingScrollSnap=null==l?0:Number(l);var u=n._util.sliderElem;n._state=n._state||{},n._state.activeElem=null,n._syncWithThrottle=H(function(){V.sync(u)},a,n);var c=F(u.children);return c.some(function(e){return!!e.classList.contains(Y)&&(n._state.activeElem=e,!0)}),n._state.activeElem=n._state.activeElem||c[0],n._state.activeElem.classList.add("active"),n.snapNativeScrollViewToActiveElement({calledOnLoad:!0,source:"onLoad"}),n.addEventListeners(),B(n)}var d=e.getAttribute(X+"edge-padding")||"",h=parseInt(d,10)||0,v=parseInt(e.getAttribute(X+"right-padding"),10)||0,f=e.getAttribute(X+"resize-end"),p=e.getAttribute(X+"boundary"),m=e.getAttribute(X+"pagination-target"),g=parseInt(e.getAttribute(X+"has-indicator-pagination"),10)||0,y=e.getAttribute(X+"trigger-wf-during-transition"),i=e.getAttribute(X+"scrollview-td"),t=Number(e.getAttribute(X+"auto-switch"))||0,r=Number(e.getAttribute(X+"auto-switch-timeout"))||2e3,o=e.getAttribute(X+"scrollview-ttf"),l=e.getElementsByClassName("wafer-indicators-counts")[0],a=U(l).counts,c=m&&F(document.body.querySelectorAll(m))||F(e.getElementsByClassName("indicators")),l=e.getAttribute(X+"cycle"),w=void 0,b=void 0,_=void 0,E=void 0,A=void 0,l=null==l?0:Number(l);c.some(function(e){"count"===(w=e.getAttribute(X+"pagination-type")||"default")?(b=F(e.getElementsByClassName("current-page"))[0],E=e):_=(A=e)?F(e.children):null});var k=new(j||(m=D("./src/data.js"),j=m&&m.__esModule?m:{default:m})).default({windowLimit:5}),p=p&&z(e,p);k.cycle=l;var C=n._util=N({},n._util,{autoSwitchTimeout:r,_switchScrollTimeout:null,boundaryElem:p,counter:s,cycle:l,dataList:k,drag:{endX:0,endY:0,isVerticalDirection:!1,startX:0,startY:0},edgePadding:h,elem:e,indicatorCountElem:b,indicatorElems:c,indicatorItems:_,indicatorPagination:g,indicatorsCustomCount:a,indicatorWithCountElem:E,indicatorWithoutCountElem:A,indicatorType:w,resizeEnd:null==f?0:Number(f),rightPadding:v,shouldAutoSwitch:t,sliderItemsDataMapping:new Map,transitionDuration:null==i?250:Number(i),transitionTimingFunction:null==o?"ease-out":o,triggerWafersDuringTransition:"1"===y?1:0});d&&-1!==d.indexOf("%")&&(C.edgePaddingPercentage=parseInt(d.replace("%",""),10),C.edgePadding=0),n._state={autoSwitchInProgress:!1,autoSwitchPausedByUser:!1,disableEventHandlers:!1,hasBeenThreadmilled:!1,mouseOnElement:!1,slideWidth:null,triggerNodeMap:new Map,virtualCounter:null},C.sliderItems=F(C.sliderElem.children);var S=C.sliderItems.length;n._state.slideWidth=100/S,n.updateWidth(),W(C.sliderElem,C.transitionDuration,C.transitionTimingFunction),I(C.sliderElem,"-webkit-grab"),C.edgePaddingPercentage?(d=C.itemWidth*C.edgePaddingPercentage/100,C.sliderElem.style["padding-left"]=d+"px"):C.sliderElem.style["padding-left"]=C.edgePadding+"px";for(var x=document.createDocumentFragment(),M=void 0,T=!1,L=0;L<S;L++){var P=C.sliderItems[L];k.add(P),P.style.width=n._state.slideWidth+"%",!T&&0<L&&P.classList.contains(Y)&&(M=L,T=!0),x.appendChild(P)}if(C.sliderElem.appendChild(x),M)for(var O=0;O<M;O++)n.showCurrent(1);return n.addEventListeners(),n.addAriaAttributes(),0!==s||M||(n.preFetch(),n.updateIndicators(s),n.updateButtons(!0),k.getActive().classList.add(Y,R)),e.classList.add("wafer-scrollview-rendered"),n}function A(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}i.events={click:[["next-btn","next"],["pause-btn","pause"],["prev-btn","prev"],["resume-btn","resume"]],keydown:[["_self","keydown"]],mousedown:[["slides","mousedown"]],mouseleave:[["next-btn","mouseleave"],["prev-btn","mouseleave"],["_self","mouseleave"]],mousemove:[["slides","mousemove"]],mouseover:[["next-btn","mouseover"],["prev-btn","mouseover"],["_self","mouseover"]],mouseup:[["slides","mouseup"]],touchend:[["slides","touchend"]],touchmove:[["slides","touchmove"]],touchstart:[["slides","touchstart"]]},t.default=i,e.exports=t.default},"./src/controller.js":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function r(e,t,i){null===e&&(e=Function.prototype);var s=Object.getOwnPropertyDescriptor(e,t);return void 0!==s?"value"in s?s.value:void 0!==(s=s.get)?s.call(i):void 0:null===(e=Object.getPrototypeOf(e))?void 0:r(e,t,i)}var a,i=function(e,t,i){return t&&h(e.prototype,t),i&&h(e,i),e},n=window.wafer,o=n.base,l=n.controllers,n=n.utils,u=n.elementInView,c=n.throttle,l=l.WaferBaseController,i=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(d,l),i(d,[{key:"handleVisibilityChange",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=this._state.elementInstances,i=!0,s=!1,r=void 0;try{for(var a,n=t.values()[Symbol.iterator]();!(i=(a=n.next()).done);i=!0){var o=a.value.instance;o._util.shouldAutoSwitch&&(e?o.setTimeoutForAutoSwitch():o.pauseAutoSwitch())}}catch(e){s=!0,r=e}finally{try{!i&&n.return&&n.return()}finally{if(s)throw r}}}},{key:"handleScroll",value:function(){this._validateWithThrottle()}},{key:"handleResize",value:function(){this._validateWithThrottle(),r(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"handleResize",this).call(this)}},{key:"willValidate",value:function(e){var i=this._state.elementInstances;e.forEach(function(e){var t=i.get(e).instance;t._util.shouldAutoSwitch&&(u(e,{offsetX:0,offsetY:0},o.viewport)?t.setTimeoutForAutoSwitch():t.pauseAutoSwitch())})}}]),d);function d(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.root,t=void 0===t?document:t,e=e.selector,e=void 0===e?".wafer-scrollview":e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,{root:t,selector:e,WaferClass:(a||(e=s("./src/base.js"),a=e&&e.__esModule?e:{default:e})).default}));return i.sync(),i._validateWithThrottle=c(function(){i.validate()},25,i),i}function h(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}t.default=i,e.exports=t.default},"./src/data.js":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var h="next",v="prev",s=(function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}(r,[{key:"add",value:function(e){var t,i=this.tail,s=this.elemMapping.size;i?(t=this.elemMapping.get(i),this.elemMapping.set(e,new Map([["index",s],[h,t.get(h)],[v,i]])),this.elemMapping.get(this.tail).set(h,e),this.elemMapping.get(this.head).set(v,e),this.tail=e):(this.elemMapping.set(e,new Map([["index",s],[h,e],[v,e]])),this.head=this.tail=e),this.active||(this.active=e)}},{key:"getActive",value:function(){return this.active}},{key:"setNextAsActive",value:function(){this.active=this.elemMapping.get(this.active).get(h)}},{key:"setPreviousAsActive",value:function(){this.active=this.elemMapping.get(this.active).get(v)}},{key:"getElementToAppend",value:function(){var e=this.elemMapping.get(this.active).get("index"),t=this.elemMapping.size,i=this.scrollItemsLimit;return this.cycle?(t<=2?i=0:t<=3&&(i=1),this.getForward(i+1)):!(e<i)&&e+i-1<t?this.getForward(i+1):null}},{key:"getElementToPrepend",value:function(){var e=this.elemMapping.get(this.active).get("index"),t=this.elemMapping.size,i=this.scrollItemsLimit;return this.cycle?this.getBackward(i):!(t-i<=e)&&0<=e-i-1?this.getBackward(i+1):null}},{key:"getForward",value:function(e){for(var t=0,i=this.active;t++<e;)if(i=this.elemMapping.get(i).get(h),!this.cycle&&i===this.head)return null;return i}},{key:"getBackward",value:function(e){for(var t=0,i=this.active;t++<e;)if(i=this.elemMapping.get(i).get(v),!this.cycle&&this.tail===i)return null;return i}},{key:"appendWithReplace",value:function(e,t){e=e||this.active;var i=this.elemMapping.get(e),s=i.get(v),r=i.get(h),i=t[0],a=i,n=s;this.elemMapping.get(s).set(h,a);for(var o=1;o<t.length;o++){var l=t[o];this.elemMapping.set(a,new Map([[h,l],[v,n]])),n=a,a=l}this.elemMapping.set(a).set(a,new Map([[h,r],[v,n]])),this.elemMapping.get(r).set(v,a),e===this.head?this.head=i:e===this.tail&&(this.tail=a),e===this.active&&(this.active=i),this.elemMapping.delete(e);for(var u=(c=this.elemMapping.get(s)).get("index");c;){var c,d=c.get(h);(c=this.elemMapping.get(d)).set("index",++u),d===this.tail&&(c=null)}}},{key:"size",get:function(){return this.elemMapping.size}}]),r);function r(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).windowLimit,e=void 0===e?5:e;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,r),this.active=null,this.elemMapping=new Map,this.tail=null,this.cycle=!1,this.head=null,this.scrollItemsLimit=Math.floor(e/2)}function a(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}t.default=s,e.exports=t.default},"./src/entry.js":function(e,t,i){"use strict";var s,r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=new(s||(r=i("./src/controller.js"),s=r&&r.__esModule?r:{default:r})).default({}),e.exports=t.default}},r={},s.m=i,s.c=r,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="https://s.yimg.com/aaq/wf/",s(s.s="./src/entry.js");function s(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return i[e].call(t.exports,t,t.exports,s),t.l=!0,t.exports}var i,r});
