var geoUtils=function(){requestInProgress=!1,concurrentQueue=[],getDomain=function(){var a=webutils.getParameterByName("domain")!==-1?webutils.getParameterByName("domain"):window.location.hostname;return"www.zendesk.com"===a&&0===window.location.pathname.indexOf("/th/")?"www.zendesk.com/th":a};var a=getDomain();geoLocateQueue=function(a,b){for(;concurrentQueue.length>0;){var c=concurrentQueue.shift();"function"==typeof c[b]&&c[b](a)}};var b={"www.zendesk.hk":{continent:"AS",country:"HK",region:"APAC",language:"zh-tw",locale:"zh-tw"},"www.zendesk.co.jp":{continent:"AS",country:"JP",region:"APAC",language:"ja",locale:"ja-jp"},"www.zendesk.kr":{continent:"AS",country:"KR",region:"APAC",language:"ko",locale:"ko-kr"},"www.zendesk.com.ru":{continent:"AS",country:"RU",region:"EMEA",language:"ru",locale:"ru-ru"},"www.zendesk.tw":{continent:"AS",country:"TW",region:"APAC",language:"zh-tw",locale:"zh-tw"},"www.zendesk.de":{continent:"EU",country:"DE",region:"EMEA",language:"de",locale:"de-de"},"www.zendesk.es":{continent:"EU",country:"ES",region:"EMEA",language:"es",locale:"es-es"},"www.zendesk.fr":{continent:"EU",country:"FR",region:"EMEA",language:"fr",locale:"fr-fr"},"www.zendesk.co.uk":{continent:"EU",country:"GB",region:"EMEA",language:"en-gb",locale:"en-gb"},"www.zendesk.it":{continent:"EU",country:"IT",region:"EMEA",language:"it",locale:"it-it"},"www.zendesk.nl":{continent:"EU",country:"NL",region:"EMEA",language:"nl",locale:"nl-nl"},"www.zendesk.com.mx":{continent:"NA",country:"MX",region:"LATAM",language:"es-419",locale:"es-la"},"www.zendesk.com.br":{continent:"SA",country:"BR",region:"LATAM",language:"pt-br",locale:"pt-br"},"www.zendesk.com":{continent:"NA",country:"US",region:"AMER",language:"en",locale:"en-us",default:!0},"www.zendesk.com/th":{continent:"AS",country:"TH",region:"APAC",language:"th",locale:"th-th"},"www.zendesk.st":{continent:"NA",country:"US",region:"AMER",language:"en",locale:"en-us"}};return getGeoData=function(){return new Promise(function(a,b){var c=sessionStorage.getItem("geoData");return c?a(JSON.parse(c)):requestInProgress?void concurrentQueue.push({resolve:a,reject:b}):(requestInProgress=!0,void $.ajax({url:webutils.appUrl("geo.json"),type:"GET",success:function(b){try{b.disableCache||sessionStorage.setItem("geoData",JSON.stringify(b))}catch(a){}a(b),geoLocateQueue(b,"resolve")},error:function(a,c,d){console.error(d),b(d),geoLocateQueue(d,"reject")},complete:function(){requestInProgress=!1}}))})},isUserInContinentCountry=function(c,d,e){if(c)return d=d||!1,e=e||!1,new Promise(function(f,g){b[a]&&(c===b[a].continent&&d===b[a].country?f(!0):d||c!==b[a].continent||f(!0)),geoUtils.getGeoData().then(function(a){!a&&e&&f(!0),f(d?a.country_code===d:a.continent_code===c)}).catch(function(a){console.error(a),g(a)})})},isUserInRegions=function(c,d){if(d=d||!1,c)return b[a]&&b[a].default===!0&&(d=!0),new Promise(function(e,f){b[a]&&!d&&c.indexOf(b[a].region)!==-1&&e(!0),geoUtils.getGeoData().then(function(a){a||e(!1),e(c&&c.indexOf(a.region)!==-1?!0:!1)}).catch(function(a){f(a)})})},isUserInRegion=function(a){return isUserInRegions([a])},isUserIn=function(a){if(a)return new Promise(function(b,c){geoUtils.getGeoData().then(function(c){c||b(!1);var d=[];for(var e in a)d.push(a[e]===c[e]);b(d.indexOf(!1)===-1)}).catch(function(a){c(a)})})},domainLanguage=function(){return b[a]&&b[a].hasOwnProperty("language")?b[a].language:"en"},getLocale=function(){var c=webutils.getParameterByName("locale")!==-1?webutils.getParameterByName("locale"):null;return c?c:b[a]&&b[a].hasOwnProperty("locale")?b[a].locale:"en-us"},{domainInfo:b,domainLanguage:domainLanguage,getLocale:getLocale,getGeoData:getGeoData,getDomain:getDomain,isUserInContinentCountry:isUserInContinentCountry,isUserInRegions:isUserInRegions,isUserInRegion:isUserInRegion,isUserIn:isUserIn}}();