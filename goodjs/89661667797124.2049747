var youdaos=window.youdao||{};youdaos.global=this,function(a){function i(){for(var t,e=[],i=0;i<arguments.length;i++)"string"==typeof(t=arguments[i])&&(t=document.getElementById(t)),e.push(t);return e.length<2?e[0]:e}a.mixin=function(t,e){for(var i in e)t[i]=e[i]},a.bind=function(e,t){var i=t||a.global;if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,s),e.apply(i,t)}}return function(){return e.apply(i,arguments)}},a.events={element:function(t){return t.target||t.srcElement},map:{},listen:function(t,e,i,s){t.addEventListener?t.addEventListener(e,i,s):t.attachEvent&&(t["e"+e+i]=i,t[e+i]=function(){return t["e"+e+i](window.event)},t.attachEvent("on"+e,t[e+i]));var n=this.map;n[t]?n[t].push({type:e,fn:i,mode:s}):n[t]=[{type:e,fn:i,mode:s}]},unlisten:function(t,e,i,s){t.addEventListener?t.addEventListener(e,i,s):t.attachEvent&&(t["e"+e+i]=i,t[e+i]=function(){return t["e"+e+i](window.event)},t.attachEvent("on"+e,t[e+i]));var n=this.map;if(n[t]&&"[object Array]"===toString.call(n[t]))for(var h=0,o=n[t].length;h<o;h++){var r=n[t][h];r.type==e&&r.fn==i&&n[t].splict(h,1)}},unlistenAll:function(t){var e=this.map;if(e[t])for(var i=0;i<e[t].length;i++){var s=e[t][i];this.unlisten(t,s.type,s.fn,s.mode)}}},a.dom={visible:function(t){return"none"!=i(t).style.display},hide:function(){for(var t=0;t<arguments.length;t++)i(arguments[t]).style.display="none"},show:function(){for(var t=0;t<arguments.length;t++)i(arguments[t]).style.display=""},getHeight:function(t){return(t=i(t)).offsetHeight},addClassName:function(t,e){(t=i(t))&&(t.className=""==t.className?e:t.className+" "+e)},removeClassName:function(t,e){(t=i(t))&&(e=new RegExp("(^| )"+e+"( |$)"),t.className=t.className.replace(e,"$1").replace(/ $/,""))},attr:function(t,e,i,s){var n,h=e;if("string"==typeof e){if(void 0===i)return t&&t.getAttribute(e);(h={})[e]=i}for(n in h)t.setAttribute(n,h[n])}},a.dimension={cumOffset:function(t){for(var e,i,s,n,h=0,o=0,r=!1;h+=t.offsetTop||0,o+=t.offsetLeft||0,(t=t.offsetParent)&&(i=(e=window.getComputedStyle(t,null)).getPropertyValue("position")),t&&"fixed"!=i;);return"fixed"===i&&(r=!0,s=Number(e.getPropertyValue("top").slice(0,-2)),n=Number(e.getPropertyValue("left").slice(0,-2))),[o,h,r,s,n]}},a.SK={BACKSPACE:8,TAB:9,RETURN:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,INSERT:45,SHIFT:16,CTRL:17,ALT:18},a.Autocomplete=function(t,e,i,s,n,h,o){a.events.listen(document,"click",a.bind(this.hideOnDoc,this)),a.events.listen(document,"blur",a.bind(this.hideOnDoc,this)),this._dataCache={},this.blurOptions=h||{},this.inputType=document.getElementById(o),this.objName=e||this.defSugName,this.isIE=navigator&&-1!=navigator.userAgent.toLowerCase().indexOf("msie"),this.hideClose=!!s||!1,this.selectCallBack=!1,this.box=document.getElementById(t),a.events.listen(this.box,"keydown",a.bind(this.onkeydown,this));var r=this;this.box.onblur=function(t){r.hide(t),r.blurOptions.onblur&&r.blurOptions.onblur()},a.events.listen(this.box,"dblclick",a.bind(this.dbClick,this)),this.count=0,this.sugServ=this.defSugServ,this.sugServUrlPost=this.S_QUERY_URL_POST,i&&(this.sugServ=i),this.sugMoreParams="",this.logServ=this.defSugServ,this.logServUrlPost=this.S_LOG_URL_POST,this.searchServ=this.defSearchServ,this.searchParamName=this.defSearchParamName,this.searchMoreParams="",this.kf=this.defKeyfrom+this.KEYFROM_POST,this.openInNewWindow=!1,this.clickEnabled=!0,this.sptDiv=document.createElement("div"),document.body.appendChild(this.sptDiv),this.sdiv=document.createElement("div"),this.sdiv.style.position="absolute",this.sdiv.style.zIndex=1e4,a.dom.hide(this.sdiv),document.body.appendChild(this.sdiv),this.iframe=document.createElement("iframe"),this.iframe.style.position="absolute",this.iframe.style.zIndex=9999,a.dom.hide(this.iframe),document.body.appendChild(this.iframe),this.bdiv=document.createElement("div"),this.vis=!1,this.lastUserQuery="",this.initVal="",this.box&&""!=this.box.value&&(this.initVal=this.box.value),this.curUserQuery=this.initVal,this.upDownTag=!1,window.onresize=a.bind(this.winResize,this),this.clean(),!n&&this.box&&(this.timeoutId=setTimeout(a.bind(this.sugReq,this),this.REQUEST_TIMEOUT))},a.mixin(a.Autocomplete.prototype,{start:function(){0!=this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(a.bind(this.sugReq,this),this.REQUEST_TIMEOUT),this.box&&""!=this.box.value&&(this.initVal=this.box.value,this.curUserQuery=this.initVal)},setOffset:function(t,e){this.offsetX=t,this.offsetY=e},setObjectName:function(t){this.objName=t},setSugServer:function(t,e){this.sugServ=t,e&&(this.sugServUrlPost=e),this.clean()},setSugMoreParams:function(t){this.sugMoreParams=t},setLogServer:function(t,e){this.logServ=t,e&&(this.logServUrlPost=e)},setSearchServer:function(t){this.searchServ=t},setSearchParamName:function(t){this.searchParamName=t},setSearchMoreParams:function(t){this.searchMoreParams=t},setKeyFrom:function(t){0<t.indexOf(this.KEYFROM_POST)?this.kf=t:this.kf=t+this.KEYFROM_POST},setSelectCallBack:function(t){this.selectCallBack=t},setOpenInNewWindow:function(){this.openInNewWindow=!0},getSearchUrl:function(t){var e="eng";return this.inputType&&(e=this.inputType.value),encodeURI(this.searchServ+e+"/"+t+"/#keyfrom="+this.kf)},getSugQueryUrl:function(t,e,i){return encodeURI(this.sugServ+this.sugServUrlPost+t+this.sugMoreParams+"&keyfrom="+this.kf+"&o="+this.objName+"&rn=10"+this.hour())+"&le="+i},clicklog:function(t,e,i,s,n){var h="";return e&&(h+=e),i&&(h+=i),s&&(h+=s),n&&(h+=n),(new Image).src=encodeURI(this.logServ+this.logServUrlPost+t+h+this.time()),!0},dbClick:function(){var t;this.box.createTextRange?((t=this.box.createTextRange()).moveStart("character",0),t.select()):this.box.setSelectionRange&&this.box.setSelectionRange(0,this.box.value.length),""!=this.box.value&&(this.lastUserQuery==this.box.value?0<this.sdiv.childNodes.length&&(this.vis?this.hide():this.show()):this.doReq())},winResize:function(){this.vis&&this.show()},onkeydown:function(t){if(t.ctrlKey)return!0;var e=a.SK;switch(t.keyCode){case e.PAGE_UP:case e.PAGE_DOWN:case e.END:case e.HOME:case e.INSERT:case e.CTRL:case e.ALT:case e.LEFT:case e.RIGHT:case e.SHIFT:case e.TAB:return!0;case e.ESC:return this.hide(),!1;case e.UP:if(this.vis)this.upDownTag=!0,this.up();else{if(1<this.sdiv.childNodes.length&&this.lastUserQuery==this.box.value)return this.show(),!1;""!=this.box.value&&this.doReq()}return this.isIE?t.returnValue=!1:t.preventDefault(),!1;case e.DOWN:if(this.vis)this.upDownTag=!0,this.down();else{if(1<this.sdiv.childNodes.length&&this.lastUserQuery==this.box.value)return this.show(),!1;""!=this.box.value&&this.doReq()}return this.isIE?t.returnValue=!1:t.preventDefault(),!1;case e.RETURN:return!(this.vis&&-1<this.curNodeIdx&&!this.select())||(this.isIE?t.returnValue=!1:t.preventDefault(),!1);case e.BACKSPACE:1==this.box.value.length&&(this.curUserQuery="");default:return!(this.upDownTag=!1)}},sugReq:function(){document.activeElement&&document.activeElement!=this.box||(""!=this.box.value&&this.box.value!=this.initVal?this.lastUserQuery!=this.box.value&&(this.upDownTag||this.doReq()):""!=this.lastUserQuery&&(this.lastUserQuery="",this.vis&&(this.hide(),this.clean()))),0!=this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(a.bind(this.sugReq,this),this.REQUEST_TIMEOUT)},select:function(t){var e;if(e=t?this.LOG_MOUSE_SELECT:this.LOG_KEY_SELECT,this.getCurNode()){var i=this.getCurNode().getAttribute(this.ITEM_TYPE),s=this.getCurNode().getElementsByTagName("td")[0].innerHTML.replace(/<\/?[^>]*>/g,"");if("1"==i){if(s=this.getElemAttr(this.getCurNode(),this.ITEM_LINK),this.clicklog(e,"&q="+this.curUserQuery,"&index=0","&select="+s,"&direct=true"),this.hide(),this.selectCallBack)return void this.selectCallBack(this.box.value,this.kf);window.open(s,"_blank")}else try{if(t)this.clicklog(e,"&q="+this.curUserQuery,"&index="+this.curNodeIdx,"&select="+s),this.curUserQuery=s,this.openInNewWindow||(this.box.value=s);else{if(this.box.value!=s)return!0;this.clicklog(e,"&q="+this.curUserQuery,"&index="+this.curNodeIdx,"&select="+s),this.curUserQuery=s,s=this.box.value}this.hide();var n=this.getSearchUrl(s);if(this.openInNewWindow){if(this.selectCallBack)return void this.selectCallBack(this.box.value,this.kf);window.open(n,"_blank")}else document.location=n}catch(t){}}return!1},submitForm:function(t){var r=document.getElementById(t),a=this;r&&("_blank"===r.getAttribute("target")&&this.setOpenInNewWindow(),this.setSelectCallBack(function(t,e){var i,s=!1,n=document.createElement("input"),h=!1,o=!1;n.style.display="none",n.name=a.searchParamName||"query",n.value=t,r.keyfrom?(s=(h=r.keyfrom).value,h.value=e):((o=document.createElement("input")).style.display="none",o.name="keyfrom",o.value=e),o&&r.appendChild(o),r.appendChild(n),i=r.action,r.action=a.searchServ+a.curUserQuery,r.submit(),r.action=i,o&&(r.removeChild(o),o=!1),h&&(h.value=s,h=!1),r.removeChild(n)}))},doReq:function(){this.initVal="",this.curUserQuery=this.box.value;var t=this.box.value;this.lastUserQuery=this.box.value;var e="eng";this.inputType&&(e=this.inputType.value),this._dataCache[t]?this.updateCall(this._dataCache[t]):(this.count++,e=this.getSugQueryUrl(t,this.count,e),this.excuteCall(e))},clean:function(){this.size=0,this.curNodeIdx=-1,this.sdiv.innerHTML="",this.bdiv.innerHTML=""},onComplete:function(){setTimeout(a.bind(this.updateContent,this),5)},cleanScript:function(){for(;0<this.sptDiv.childNodes.length;)this.sptDiv.removeChild(this.sptDiv.firstChild)},isValidNode:function(t){return 1==t.nodeType},getReqStr:function(t){return t&&0<t.getElementsByTagName("div").length?this.getElemAttr(t.getElementsByTagName("div")[0],this.QUERY_ATTR):null},getElemAttr:function(t,e){return this.unescape(t.getAttribute(e))},updateContent:function(){if(this.cleanScript(),this.box.value,""==this.bdiv.innerHTML)return this.hide(),void this.clean();var t;this.sdiv.innerHTML=this.bdiv.innerHTML;var e=this.sdiv.getElementsByTagName("table");e[2].parentNode.removeChild(e[2]),children=e[1].getElementsByTagName("tr"),this.size=0,this.childs=new Array;for(var i=0;i<children.length;i++)t=children[i],this.isValidNode(t)&&(t.setAttribute(this.ITEM_INDEX,this.size),a.events.listen(t,"mousemove",a.bind(this.mouseMoveItem,this)),a.events.listen(t,"mouseover",a.bind(this.mouseOverItem,this)),a.events.listen(t,"mouseout",a.bind(this.mouseOutItem,this)),a.events.listen(t,"click",a.bind(this.select,this)),this.childs.push(t),this.size++);3<=Number(e.length)&&this.bindATagWithMouseEvent(e[2],!1),this.show(),this.canMouseOver=!1},showContent:function(){var t=a.dimension.cumOffset(this.box);this.offsetX=this.offsetX||0,this.offsetY=this.offsetY||0,t[2]?(this.sdiv.style.position="fixed",this.sdiv.style.top=t[1]+(this.box.offsetHeight-1)+t[3]+this.offsetY+"px",this.sdiv.style.left=t[0]+t[4]+this.offsetX+"px"):(this.sdiv.style.position="absolute",this.sdiv.style.top=t[1]+(this.box.offsetHeight-1)+this.offsetY+"px",this.sdiv.style.left=t[0]+this.offsetX+"px"),this.sdiv.style.cursor="default",this.sdiv.style.width=this.box.offsetWidth-this.offsetX+"px",a.dom.show(this.sdiv),this.iframe.style.top=this.sdiv.style.top,this.iframe.style.left=this.sdiv.style.left,this.iframe.style.width=this.sdiv.style.width,this.iframe.style.height=this.sdiv.offsetHeight,this.iframe.style.border=0,a.dom.show(this.iframe),this.vis=!0,this.curNodeIdx=-1},show:function(){this.sdiv.childNodes.length<1||this.showContent()},hide:function(){this.hlOff(),a.dom.hide(this.sdiv),a.dom.hide(this.iframe),this.curNodeIdx=-1,this.vis=!1},hideOnDoc:function(){this.clickEnabled&&(this.hide(),this.clickEnabled=!1,setTimeout(a.bind(this.enableClick,this),60))},enableClick:function(){this.clickEnabled=!0},mouseMoveItem:function(t){this.canMouseOver=!0,this.mouseOverItem(t)},mouseOverItem:function(t){if(this.removeBoxBlur(),this.canMouseOver){for(var e=a.events.element(t);e.parentNode&&(!e.tagName||null==e.getAttribute(this.ITEM_INDEX));)e=e.parentNode;t=e.tagName?e.getAttribute(this.ITEM_INDEX):-1;-1!=t&&t!=this.curNodeIdx&&(this.hlOff(),this.curNodeIdx=Number(t),this.hlOn(!1))}else this.canMouseOver=!0},mouseOutItem:function(){this.hlOff(),this.curNodeIdx=-1,this.revertBoxBlur()},getNode:function(t){return this.childs&&0<=t&&t<this.childs.length?this.childs[t]:void 0},getCurNode:function(){return this.getNode(this.curNodeIdx)},hover:function(t,e){t||(this.box.value=e)},hlOn:function(t){if(this.getCurNode()){var e=this.getCurNode().getElementsByTagName("td");this.procInstantResult(),t&&(this.box.value=e[0].innerHTML.replace(/<\/?[^>]*>/g,""));for(var i=0;i<e.length;++i)a.dom.addClassName(e[i],this.ITEM_HIGHLIGHT_STYLE)}},hlOff:function(){if(this.getCurNode()){for(var t=this.getCurNode().getElementsByTagName("td"),e=0;e<t.length;++e)a.dom.removeClassName(t[e],this.ITEM_HIGHLIGHT_STYLE);this.procInstantResultBack()}},procInstantResult:function(){var t;-1!=this.getCurNode().innerHTML.indexOf("is_red")&&((t=document.getElementById("is_red"))&&(t.style.color="#fff"),(t=document.getElementById("is_green"))&&(t.style.color="#fff"))},procInstantResultBack:function(){var t;-1!=this.getCurNode().innerHTML.indexOf("is_red")&&((t=document.getElementById("is_red"))&&(t.style.color="#c60a00"),(t=document.getElementById("is_green"))&&(t.style.color="#008000"))},up:function(){var t=this.curNodeIdx;0<this.curNodeIdx?(this.hlOff(),this.curNodeIdx=t-1,this.hlOn(!0)):0==this.curNodeIdx?(this.hlOff(),this.curNodeIdx=t-1,this.box.value=this.curUserQuery):(this.curNodeIdx=this.size-1,this.hlOn(!0))},down:function(){var t=this.curNodeIdx;this.curNodeIdx<0?(this.curNodeIdx=t+1,this.hlOn(!0)):this.curNodeIdx<this.size-1?(this.hlOff(),this.curNodeIdx=t+1,this.hlOn(!0)):(this.hlOff(),this.curNodeIdx=-1,this.box.value=this.curUserQuery)},excuteCall:function(t){var e=document.createElement("script");e.src=t,e.charset="utf-8",this.sptDiv.appendChild(e)},unescape:function(t){return t.replace(new RegExp("&quot;","gm"),'"').replace(new RegExp("&gt;","gm"),">").replace(new RegExp("&lt;","gm"),"<").replace(new RegExp("&amp;","gm"),"&")},escape:function(t){return t.replace(new RegExp("&","gm"),"&amp;").replace(new RegExp("<","gm"),"&lt;").replace(new RegExp(">","gm"),"&gt;").replace(new RegExp('"',"gm"),"&quot;")},subLink:function(t){return t.length<=43?t:t.substr(t,40)+"..."},updateCall:function(t){t=unescape(t);if(this.bdiv.innerHTML=t,this.bdiv.childNodes.length<2)this.bdiv.innerHTML="";else{for(var e=this.bdiv.getElementsByClassName("remindtt75"),i=e.length,s=e[0].parentNode.parentNode,n=i-1;4<n;n--)s.removeChild(e[n].parentNode);for(i=e.length,n=0;n<i;n++)e[n].innerHTML=e[n].innerHTML.replace(this.curUserQuery,"<span>"+this.curUserQuery+"</span>");t=this.bdiv.getElementsByTagName("table")[0];t.style.background="#fcfcfe",t.style["box-shadow"]="0 2px 1px 1px #e6e6e6",t.style["padding-bottom"]="10px",t.style["border-radius"]="0 0 5px 5px"}this.onComplete()},focusBox:function(){var t;this.box.focus(),this.box.createTextRange?((t=this.box.createTextRange()).moveStart("character",this.box.value.length),t.select()):this.box.setSelectionRange&&this.box.setSelectionRange(this.box.value.length,this.box.value.length)},pressPoint:function(t){this.clickEnabled&&(this.clickEnabled=!1,setTimeout(a.bind(this.enableClick,this),20),this.clicklog(this.LOG_ICON_PRESS,"&q="+this.box.value,"&visible="+this.vis),this.focusBox(),this.vis?this.hide():this.lastUserQuery!=this.box.value||""==this.sdiv.innerHTML?this.doReq():this.show())},removeBoxBlur:function(){this.box.onblur=null},revertBoxBlur:function(){this.box.onblur=a.bind(this.hide,this)},bindATagWithMouseEvent:function(t,e){try{if(this.hideClose&&t.parentNode)return void t.parentNode.removeChild(t)}catch(t){}var i=t.getElementsByTagName("A"),i=(i=0==i.length?t.getElementsByTagName("a"):i)[0];e?a.events.listen(i,"click",a.bind(this.turnOnSuggest,this)):a.events.listen(i,"click",a.bind(this.turnOffSuggest,this)),a.events.listen(i,"mouseover",a.bind(this.removeBoxBlur,this)),a.events.listen(i,"mouseout",a.bind(this.revertBoxBlur,this))},onCompleteHint:function(){setTimeout(a.bind(this.showSugHint,this,arguments[0]),5)},showSugHint:function(){this.sdiv.childNodes.length<1||this.showContent()},turnOnSuggest:function(){return this.clicklog(this.CHANGE_SUG_STATUS,"&s=open&q="+this.box.value),this.lastUserQuery="",this.initVal=this.box.value,this.curUserQuery=this.initVal,this.upDownTag=!1,this.vis&&this.hide(),this.clean(),!1},turnOffSuggest:function(){return this.clicklog(this.CHANGE_SUG_STATUS,"&s=close&q="+this.box.value),this.vis&&this.hide(),this.clean(),!1},time:function(){return"&time="+new Date},hour:function(){return"&h="+(new Date).getHours()},LOG_MOUSE_SELECT:"mouseSelect",LOG_KEY_SELECT:"keySelect",LOG_ICON_PRESS:"iconPress",CHANGE_SUG_STATUS:"changeStatus",hintCode1:"<table cellpadding=0 cellspacing=1 border=0 width=100% bgcolor=#8cbbdd align=center><tr><td valign=top><table cellpadding=0 cellspacing=0 border=0 width=100% align=center><tr><td align=left bgcolor=white class='remindtt752'>",hintCode2:"</td></tr></table>",hintCode4:"</a></td></tr></table></td></tr></table>",REQUEST_TIMEOUT:50,ITEM_INDEX:"s_index",ITEM_HIGHLIGHT_STYLE:"aa_highlight",ITEM_TYPE:"hitt",ITEM_QUERY:"hitq",ITEM_LINK:"hitl",QUERY_ATTR:"squery",KEYFROM_POST:".suggest",S_QUERY_URL_POST:"/suggest.s?query=",S_LOG_URL_POST:"/clog.s?type=",defSugServ:"http://"+location.host+"/suggest/",defSearchServ:"http://"+document.domain+"/search?",defSearchParamName:"q",defKeyfrom:document.domain.replace(/.youdao.com/,""),defSugName:"aa",sugCookieName:"SUG_STATUS"})}(youdaos);
