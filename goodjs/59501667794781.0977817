!function(e,o){function t(e,t,n){n="; expires="+new Date(+new Date+n).toGMTString();o.cookie=e+"="+t+n+"; path=/"}e.ue=e.ue||{};var n={set:t,get:function(e){if(o.cookie&&o.cookie.split)for(var t,n,u=document.cookie.split(";"),r=new RegExp("^\\s*"+e+"="),i=0;i<u.length;i++)if(t=u[i],r.test(t)&&(n=t.split("="))&&2==n.length)return n[1];return null},del:function(e){t(e,"",-1)}};e.ue.ch=n}(ue_csm,document),function(t){var e=t.ue||{},n="csm-sid";function u(e){return/^\d{3}-\d{7}-\d{7}$/.test(e)}function r(e,t){for(var n,u,r="",i=0;i<t;i++)r+=(n=e,u=void 0,u=Math.floor(Math.random()*n.length),n.charAt(u));return r}var i={newRID:function(){return r("0123456789ABCDEFGHIJKLMNOPQRSTUVXYZ",20)},newSID:function(){var e=r("0123456789",18);return e.substring(0,3)+"-"+e.substring(4,11)+"-"+e.substring(11,18)},getSID:function(){if(t.ue&&t.ue.ch){var e=t.ue.ch.get(n);if(u(e))return e}return 0},setSID:function(e){return u(e)?t.ue&&t.ue.ch?(t.ue.ch.set(n,e,2366769449),1):void 0:0}};e.id=t.ue_id||i.newRID(),e.rid=e.id,e.mid=t.ue_mid||"mkt=aiwnacsm",e.furl=t.ue_furl||"fls-na.amazon.com",e.sn=t.ue_sn||(window.location?window.location.hostname:"");var o=t.ue_sid||i.getSID();o||(o=i.newSID(),i.setSID(o)),e.sid=o,e.identifier=i,t.ue=e}(ue_csm),function(e){var u=e.ue||{},r=["latency","forester","jserrors"],i=0,o=function(){},a={};u.implementations=a,u.register=function(e,t){var n=o;o=function(){n(),t()},++i==r.length&&function(){var e;if(u.q)for(var t=0;t<u.q.length;t++)(e=u.q[t]).n&&a[e.n]&&a[e.n].call&&a[e.n].call(this,e.t,e.a);o()}()},e.ue=u}(ue_csm),function(_,b){var w=_.ue||{};_.ueinit=(_.ueinit||0)+1,w.id||(w.id=_.ue_id||w.identifier.newRID()),w.url=_.ue_url||"/uedata/"+w.sid+"/",w.a="",w.b="",w.h={},w.r={ld:0,oe:0,ul:0},w.s=1,w.t={},w.sc={},w.iel=[],w.ielf=[],w.fc_idx={},w.viz=[],w.v="a02",w.ifr=b.top!==b.self||b.frameElement?1:0;var n,u,y=(n={},u=[],{tag:function(e,t){0<=w.tag.delta&&(w.tag.delta=-1),(void 0===t?u:(n[t]=n[t]||[],n[t])).push(e)},consume:function(e){var t;return void 0===e?(t=u,u=[]):(t=n[e]||[],n[e]=[]),t}});function S(e,t,n){var u,r;return 0<=S.delta&&(S.delta=-1),e&&(u=r=_.ue,t&&t!=u.id&&((r=u.sc[t])||(r={},n&&(u.sc[t]=r))),u=n?r[e]=n:r[e]),u}function L(e,t,n,u){0<=L.delta&&(u=u||w.t0+L.delta,L.delta=-1);var r,u=u||(new Date).getTime();if(!(!t&&void 0!==n)){if(e)for(r in(t?S("t",t)||S("t",t,{}):_.ue.t)[e]=u,n)S(r,t,n[r]);return u}}function T(f,e,t){function n(e,t){var n,u,r=[e],i=0,e={};for(u in t?(r.push("m=1"),e[t]=1):e=_.ue.sc,e){var o=S("wb",u),a=S("t",u)||{},c=S("t0",u)||_.ue.t0;if(t||2==o){var s,l=o?i++:"";for(s in r.push("sc"+l+"="+u),a)s.length<=3&&a[s]&&r.push(s+l+"="+(a[s]-c));r.push("t"+l+"="+a[f]),(S("ctb",u)||S("wb",u))&&(n=1)}}return!d&&n&&r.push("ctb=1"),r.join("&")}if(0<=T.delta&&(p=w.t0+T.delta,T.delta=-1),!(!e&&void 0!==t)){for(var u in t)S(u,e,t[u]);L("pc",e,t);var r=S("id",e)||_.ue.id,i=!e||e==r,o=_.ue.url+"?"+f+"&v="+_.ue.v+"&id="+r,d=S("ctb",e)||S("wb",e);d&&(o+="&ctb="+d),1<_.ueinit&&(o+="&ic="+_.ueinit);var a,c,s=b.performance||b.webkitPerformance,l=_.ue.bfini,g=s&&s.navigation&&2==s.navigation.type;l&&1<l?(o+="&bft="+(l-1),o+="&bfform=1"):g&&(o+="&bft=1"),g&&(o+="&bfnt=1"),!_.ue._fi||"at"!=f||e&&e!=r||(o+=_.ue._fi()),"ld"!=f&&"ul"!=f||e&&e!=r||("ld"==f&&(b.onbeforeunload&&b.onbeforeunload.isUeh&&(b.onbeforeunload=null),document.ue_backdetect&&document.ue_backdetect.ue_back&&document.ue_backdetect.ue_back.value++,_._uess&&(v=_._uess())),s&&s.timing&&(S("ctb",r,"1"),_.ue.t.tc=s.timing.navigationStart),s&&(a=s,w.collected||((c=a.timing)&&(_.ue.t.na_=c.navigationStart,_.ue.t.ul_=c.unloadEventStart,_.ue.t._ul=c.unloadEventEnd,_.ue.t.rd_=c.redirectStart,_.ue.t._rd=c.redirectEnd,_.ue.t.fe_=c.fetchStart,_.ue.t.lk_=c.domainLookupStart,_.ue.t._lk=c.domainLookupEnd,_.ue.t.co_=c.connectStart,_.ue.t._co=c.connectEnd,_.ue.t.sc_=c.secureConnectionStart,_.ue.t.rq_=c.requestStart,_.ue.t.rs_=c.responseStart,_.ue.t._rs=c.responseEnd,_.ue.t.dl_=c.domLoading,_.ue.t.di_=c.domInteractive,_.ue.t.de_=c.domContentLoadedEventStart,_.ue.t._de=c.domContentLoadedEventEnd,_.ue.t._dc=c.domComplete,_.ue.t.ld_=c.loadEventStart,_.ue.t._ld=c.loadEventEnd),(a=a.navigation)&&(_.ue.t.ty=a.type+_.ue.t0,_.ue.t.rc=a.redirectCount+_.ue.t0,_.ue.tag&&_.ue.tag(a.redirectCount?"redirect":"nonredirect",w.main_scope)),_.ue.collected=1)),_.ue_hob&&_.ue_hoe&&(_.ue.t.hob=_.ue_hob,_.ue.t.hoe=_.ue_hoe),_.ue.ifr&&(o+="&ifr=1")),L(f,e,t,p);s="ld"==f&&e&&S("wb",e);s&&S("wb",e,2);var p,m=1;for(h in _.ue.sc)if(1==S("wb",h)){m=0;break}if(o=s?n(o,null):(!m||(p=n(o,null))!=o&&(_.ue.b=p),v&&(o+=v),n(o,e||_.ue.id)),_.ue.b||s)for(var h in _.ue.sc)2==S("wb",h)&&delete _.ue.sc[h];var v=0;s||(_.ue.s=0,_.ue_err&&0<_.ue_err.ec&&(o+="&ec="+_.ue_err.ec),v=S("ctb",e),S("t",e,{})),!o||(i=[y.consume().join("|"),y.consume(e).join("|"),i?y.consume(w.main_scope).join("|"):""])&&(o+="&csmtags="+i.join("|")),o&&_.ue_pageviz&&0<_.ue.viz.length&&(o+="&viz="+_.ue.viz.join("|"),_.ue.viz=[]),function t(e,n,u,r){var i;""!=e&&(i=new Image,_.ue.b&&(i.onload=function(){var e;""!=_.ue.b&&(e=_.ue.b,_.ue.b="",t(e,n,u,1))}),_.ue.log&&(r||u)||!_.ue_uselegacy||(_.ue.iel.push(i),i.src=e),_.ue.log&&(_.ue.log(e,"uedata",{n:1}),_.ue.ielf.push(e)),_.ue_err&&!_.ue_err.ts&&_.ue_err.startTimer())}(_.ue.a=o,f,v,s)}}function r(e,t){var n;0<=r.delta&&(n=w.t0+r.delta,r.delta=-1),e&&(_.ue_cel&&_.ue_cel.reset(),_.ue.t0=n||+new Date,_.ue.rid=e,_.ue.id=e,_.ue.fc_idx={},_.ue.viz=[])}w.implementations.ues=function(e,t){S.delta=e,S.apply(this,t)},w.implementations.uet=function(e,t){L.delta=e,L.apply(this,t)},w.implementations.uex=function(e,t){T.delta=e,T.apply(this,t)},w.implementations.tag=function(e,t){w.tag.delta=e,w.tag.apply(this,t)},w.implementations.rst=function(e,t){r.delta=e,r.apply(this,t)},w.tag=y.tag,w.register("latency",function(){_.ues=S,_.uet=L,_.uex=T,_.ue.reset=r}),function(){var t=_.ue.r;function e(e){return function(){t[e]||(t[e]=1,T(e))}}_.onLd=e("ld"),_.onLdEnd=e("ld");var n,u={beforeunload:e("ul"),stop:function(){T("os")}};for(n in u)!function(e,t,n,u,r){var i=t[n="on"+n];"function"==typeof i?e&&(_.ue.h[e]=i):i=function(){},t[n]=r?function(e){u(e),i(e)}:function(e){i(e),u(e)},t[n].isUeh=1}(0,window,n,u[n]);_.ue_pageviz&&ue_viz&&ue_viz(),_.ue._uep=function(){(new Image).src=(_.ue_md||"http://uedata.amazon.com/uedata/?tp=")+ +new Date},!_.ue_pr||2!=_.ue_pr&&4!=_.ue_pr||_.ue._uep()}()}(ue_csm,window),function(u){var r={ec:0,ecf:0,pec:0,ts:0,erl:[],ter:[],mxe:50,startTimer:function(){r.ts++,setInterval(function(){u.ue&&r.pec<r.ec&&u.uex("at"),r.pec=r.ec},1e4)}},i=u.ue_jserr_ns||"jserr",p="v1",m="FATAL",h=20,v=256,_=/\(?([^\s]*):(\d+):\d+\)?/,b=/.*@(.*):(\d*)/;function o(e,t){if(!e)return{};e.m&&e.m.message&&(e=e.m);var n,u,r,i,o,a,c,s,l={m:(t.m||t.message||"")+(e.m&&e.m.message||e.m||e.message||"Unknown error"),f:e.f||e.sourceURL||e.fileName||e.filename||e.m&&e.m.target&&e.m.target.src,l:e.l||e.line||e.lineno||e.lineNumber,c:e.c&&""+e.c,s:[],name:e.name,type:e.type,csm:p+" "+(e.fromOnError?"onerror":"ueLogError")},f=0,d=0,g=e.stack||(e.err?e.err.stack:"");if(l.pageURL=t.pageURL||""+(window.location?window.location.href:"")||"missing",l.logLevel=t.logLevel||m,(s=t.attribution)&&(l.attribution=""+s),g&&g.split)for(l.csm+=" stack",n=g.split("\n");f<g.length&&l.s.length<h;)(u=n[f++])&&l.s.push(function(e){if(e)return e.replace(/^\s+|\s+$/g,"")}(u));else for(l.csm+=" callee",r=w(e.args||arguments,"callee"),d=f=0;r&&f<h;)i=v,r.skipTrace||(u=r.toString())&&u.substr&&(i=0===d?4*v:i,l.s.push(u.substr(0,i=1==d?2*v:i)),d++),r=w(r,"caller"),f++;return!l.f&&0<l.s.length&&(o=l)&&o.s&&(c=0<o.s.length?o.s[0]:"",s=1<o.s.length?o.s[1]:"",(a=(!(a=c?c.match(b):a)||3!=a.length)&&s?s.match(_):a)&&3==a.length&&(o.f=a[1],o.l=a[2])),l}function w(e,t){try{return e[t]}catch(e){return}}function a(e,t,n){e&&u.ue.log(o(e,t),i,{d:n})}function c(e,t){var n;!e||u.ue_err.ec>u.ue_err.mxe||(u.ue_err.ec++,u.ue_err.ter.push(e),t=t||{},n=e.logLevel||t.logLevel,t.logLevel=n,t.attribution=e.attribution||t.attribution,n&&n!=m||r.ecf++,0<=c.delta?(a(e,t,c.delta),c.delta=-1):a(e,t))}c.skipTrace=o.skipTrace=a.skipTrace=1,ue.implementations.err=function(e,t){c.delta=e,c.apply(this,t)},ue.register("jserrors",function(){u.ueLogError=c}),u.ue_err=r}(ue_csm),function(T,k){var e={};!function(){function t(e){return e<10?"0"+e:e}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+t(this.getUTCMonth()+1)+"-"+t(this.getUTCDate())+"T"+t(this.getUTCHours())+":"+t(this.getUTCMinutes())+":"+t(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var l,f,d,n=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,u={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function g(e){return n.lastIndex=0,n.test(e)?'"'+e.replace(n,function(e){var t=u[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}"function"!=typeof e.stringify&&(e.stringify=function(e,t,n){var u;if(f=l="","number"==typeof n)for(u=0;u<n;u+=1)f+=" ";else"string"==typeof n&&(f=n);if((d=t)&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return function e(t,n){var u,r,i,o,a,c=l,s=n[t];switch(s&&"object"==typeof s&&"function"==typeof s.toJSON&&(s=s.toJSON(t)),typeof(s="function"==typeof d?d.call(n,t,s):s)){case"string":return g(s);case"number":return isFinite(s)?String(s):"null";case"boolean":case"null":return String(s);case"object":if(!s)return"null";if(l+=f,a=[],"[object Array]"===Object.prototype.toString.apply(s)){for(o=s.length,u=0;u<o;u+=1)a[u]=e(u,s)||"null";return i=0===a.length?"[]":l?"[\n"+l+a.join(",\n"+l)+"\n"+c+"]":"["+a.join(",")+"]",l=c,i}if(d&&"object"==typeof d)for(o=d.length,u=0;u<o;u+=1)"string"==typeof d[u]&&(i=e(r=d[u],s))&&a.push(g(r)+(l?": ":":")+i);else for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(i=e(r,s))&&a.push(g(r)+(l?": ":":")+i);return i=0===a.length?"{}":l?"{\n"+l+a.join(",\n"+l)+"\n"+c+"}":"{"+a.join(",")+"}",l=c,i}}("",{"":e})})}();function n(){j=0,M=[]}function u(){if(0!=j){var e,t,n,u,r="";for(n in M)if(M.hasOwnProperty(n))for(u in""!=r&&(r+=o),r+=n+a,t=!0,e=M[n])e.hasOwnProperty(u)&&(t||(r+=c),t=!1,r+=u+s+e[u]);return x.w=r,i+r}}var j,M,r,x=T.ue||{},t=T.ue_log_idx?"2":"1",i="//"+x.furl+"/1/batch/"+t+"/OP/",o="/",a="$",c="&",s="=",E=",",O="_",I=":",D="%",X=2e3,C=5,N=1e3,P={},z=function(e){return(""+e).length},U=k.JSON&&k.JSON.stringify||e&&e.stringify,J=function(e){return e&&e.r||x.rid},R=function(e){return e&&e.s||x.sid},A=function(e){return e&&e.m||x.mid},H=function(e){return e&&e.sn||x.sn||k.ue_sn},q=function(e){return e&&e.mkt||x.mkt||k.ue_mkt},F=function(e,t,n){var u;n&&n.d?u=n.d:0<F.delta?(u=F.delta,F.delta=-1):u=x.d(),function(e,t,n,u,r){if(r){n||(n={});n.r||(n.r=r)}var i=J(n)+":"+t,o;if(P[i]=(P[i]||0)+1,P[i]>N)P[i]==N+1&&F({m:"ns '"+t+"' reached the max no of calls ("+N+") - aborting log of "+e,f:"forester-client.js"},"jserr",n);else{var a=A(n)+I+R(n)+I+J(n),c=0,s,l=""+u,f=e,d,g,p,m,h="s",v=typeof e,_=n&&n.n||!1,b,w,y,S=H(n),L=q(n);for(S&&(a+=I+S),L&&(a+=I+"mkt="+L),"undefined"==v?(f="",h="u"):null==e?(f="",h=null):"boolean"==v?(f=e?"1":"0",h="b"):"number"==v&&!isNaN(e)&&isFinite(e)?(f=""+e,h="n"):"object"==v&&(U?(f=U(e),h="j"):f=""+e),f=k.encodeURIComponent(f),y=X-z(a)-z(t)-z(l)-2,null!=h&&(y-=z(h)+2);""!=f;){if(c++,(b=G(a,t,f,l,h))<=(w=X-j))d=f,g="",w-=b,j+=b;else{if(z(f)<=y){Q();continue}if(p=w-(b-z(f)),!(C<=p)){if(X-(b-z(f))<C)return;Q();continue}p-=f.charAt(p-1)==D?1:f.charAt(p-2)==D?2:0,d=f.substr(0,p),g=f.substr(p),w=0,j=X,s=s||1+Math.ceil(z(g)/y)}M[a]||(M[a]=[]),T.ue_log_idx?(x.ue_idx=x.ue_idx||{},x.ue_idx[t]=x.ue_idx[t]||0,m=x.ue_idx[t]+I+(null!=h?h+I+d+I+l:l),x.ue_idx[t]+=1):m=null!=h?h+I+d+I+l:l,s&&(m+=I+c+O+s),M[a][t]?M[a][t]+=E+m:M[a][t]=m,0!=w&&!_||Q(),f=g}0}}(e,t,n,u)},G=function(e,t,n,u,r){u=z(u);return null!=r&&(u+=z(r)+z(n)+2),M[e]?M[e][t]?u++:(u+=z(t)+1,0<M[e].length&&u++):(u+=z(e)+z(t)+2,0<M.length&&u++),u},Q=function(e){var t=u();t&&((new Image).src=t,n())},l=[],f=k.onbeforeunload,d=0,i="//"+x.furl+"/1/batch/"+t+"/OP/",Q=function(e){var t=u();if(t){if(x.getWindowProtocol&&(t=x.getWindowProtocol()+t),e)(new Image).src=t;else if(r&&d){if(l.push(t),1==l.length)try{r.open("GET",t,!0),r.send()}catch(e){}}else(new Image).src=t;n()}};if(window.XMLHttpRequest)r=new XMLHttpRequest,d="withCredentials"in r?1:0;else if(window.ActiveXObject&&window.XDomainRequest)for(var g=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.5.0","MSXML2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],p=0;p<g.length;p++){try{r=new ActiveXObject(g[p]),d=1}catch(e){continue}break}r&&(r.onreadystatechange=function(){var e;4==r.readyState&&(l.shift(),0<l.length&&(e=l[0],r.open("GET",e,!0),r.send()))}),k.onbeforeunload=function(e){f&&f(e),Q(1)},x.intervals=[],x.intervals.push(k.setInterval(function(){Q()},6e4)),n(),x.implementations.log=function(e,t){F.delta=e,F.apply(this,t)},x.register("forester",function(){x.log=F,x.strigify=U}),k.amznJQ&&k.amznJQ.declareAvailable("forester-client"),T.ue=x}(ue_csm,window);
