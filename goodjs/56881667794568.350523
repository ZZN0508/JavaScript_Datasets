(self.webpackJsonp__wix_thunderbolt_app=self.webpackJsonp__wix_thunderbolt_app||[]).push([[964],{14778:function(n,e,t){"use strict";t.r(e),t.d(e,{PopupUtilsSymbol:function(){return o.zC},PopupsLinkUtilsAPISymbol:function(){return o.wk},PopupsSymbol:function(){return o.r_},editor:function(){return w},editorPage:function(){return L},name:function(){return o.u2},page:function(){return b},site:function(){return T}});var o=t(23228),u=t(5096),r=t(55031),C=t(59032),I=t(31191),p=t(43757),i=t(61049),a=t(55048),h=t(51831),O=t(8562),c=t(24263),e=t(96456),l=(0,p.ff)([c.xf,u.ZQ,(0,p.t6)(i.Wf,"popups"),a.QZ,(0,p.t6)(i.jC,o.u2),c.JR,e.O],function(n,p,i,a,c,o,e){function t(u,r){return(0,I.mG)(void 0,void 0,void 0,function(){return(0,I.Jh)(this,function(n){switch(n.label){case 0:return t=u,(null==(o=i.get())?void 0:o.currentPopupId)===t||(null==o?void 0:o.pendingPopupId)===t?[2]:(i.update(function(n){return(0,I.pi)((0,I.pi)({},n),{pendingPopupId:u})}),(0,h.U)(),[4,l({pageId:u,contextId:u})]);case 1:return n.sent(),r&&(s=r),0<d.length&&d.forEach(function(n){n&&n(u)}),(0,O.yF)(p)||p.addEventListener("keydown",P),[4,(e=u,o=a.getPageWrapperComponentId(e,e),a.addComponentToDynamicStructure("POPUPS_ROOT",{componentType:"PopupRoot",components:[o],uiType:c.isResponsive?"Responsive":"Classic"},((t={})[o]={componentType:"PageMountUnmount",components:[e]},t)))];case 2:return n.sent(),i.update(function(n){return(0,I.pi)((0,I.pi)({},n),{pageWillLoadHandler:g,currentPopupId:u})}),[2]}var e,t,o})})}var u,l=n.initPage,d=[],r=[],s=null,f=e.isDuringNavigation()?e.waitForNavigationEnd():Promise.resolve(),P=function(n){"Escape"===n.key&&g()},g=function(){return(0,I.mG)(void 0,void 0,void 0,function(){var e,t;return(0,I.Jh)(this,function(n){switch(n.label){case 0:return(e=v())?[4,o(e,e)]:[2];case 1:return t=n.sent(),t=t.getAllImplementersOf(C.j.PageWillUnmountHandler),[4,Promise.all(t.map(function(n){return n.pageWillUnmount({pageId:e,contextId:e})}))];case 2:return n.sent(),(0,h.i)(),m(e),(0,O.yF)(p)||p.removeEventListener("keydown",P),s&&(s(),s=null),0<r.length&&r.forEach(function(n){n&&n()}),i.update(function(n){return(0,I.pi)((0,I.pi)({},n),{pageWillLoadHandler:null,currentPopupId:void 0,pendingPopupId:void 0})}),[2]}})})},v=function(){return i.get()?i.get().currentPopupId:void 0},m=function(n){n=a.getPageWrapperComponentId(n,n);a.removeComponentFromDynamicStructure(n),a.removeComponentFromDynamicStructure("POPUPS_ROOT")};return{isPopupPage:function(n){return c.popupPages[n]},openPopupPage:function(n,e){return void 0===e&&(e=null),f=f.then(function(){return t(n,e)})},closePopupPage:g,registerToPopupEvent:function(n,e){switch(n){case"popupScroll":u=e;var t=p.document.getElementById("POPUPS_ROOT");t&&t.addEventListener("scroll",u);break;case"popupOpen":d.push(e);break;case"popupClose":r.push(e)}},getCurrentPopupId:v}}),d=(0,p.ff)([(0,p.t6)(i.Wf,"popups")],function(e){return{appWillLoadPage:function(){var n=e.get();n&&n.pageWillLoadHandler&&n.pageWillLoadHandler()}}}),s=t(31428),e=t(19238),f=["SCROLL_TO_TOP","SCROLL_TO_BOTTOM"],P=(0,p.ff)([o.r_,e.Iz],function(u,r){return{handleClick:function(n){var e=n.getAttribute("data-popupid");if(e)return u.openPopupPage(e),!0;var t=r.getFullUrlWithoutQueryParams(),o=!!u.getCurrentPopupId(),e=n.getAttribute("href"),e=t===(e&&(0,s.Gw)(e)),n=n.getAttribute("data-anchor")||"",n=f.includes(n);return!(!o||!e&&!n||(u.closePopupPage(),0))}}}),e=t(11552),g=(0,p.ff)([o.r_,e.G],function(e,t){return{componentTypes:["PopupCloseIconButton"],componentWillMount:function(n){t.register(n.id,"onClick",e.closePopupPage)}}}),v=(0,p.ff)([(0,p.t6)(i.$e,o.u2),o.r_,e.G],function(n,e,t){var o=n.closeSiteButtons;return{componentTypes:["SiteButton"],componentWillMount:function(n){o[n.id]&&t.register(n.id,"onClick",e.closePopupPage)}}}),m=(0,p.ff)([(0,p.t6)(i.$e,o.u2),o.r_,e.G],function(n,e,t){var o=n.popupsWithCloseOnOverlayClick;return{componentTypes:["PopupPage","ResponsivePopupPage"],componentWillMount:function(n){o[n.id]&&t.register(n.id,"onClick",e.closePopupPage)}}}),_=(0,p.ff)([(0,p.t6)(i.jC,o.u2),(0,p.t6)(i.Wf,o.u2)],function(n,e){return{getPopupPages:function(){return n.popupPages},getCurrentOrPendingPopupId:function(){var n;return(null===(n=e.get())||void 0===n?void 0:n.currentPopupId)||(null===(n=e.get())||void 0===n?void 0:n.pendingPopupId)}}}),y=(0,p.ff)([(0,p.t6)(i.jC,o.u2),(0,p.t6)(i.Wf,o.u2)],function(e,t){return{isPopupPage:function(n){return e.popupPages[n]},getCurrentPopupId:function(){var n;return null===(n=t.get())||void 0===n?void 0:n.currentPopupId}}}),W=(0,p.ff)([o.wk],function(n){return{get platformEnvData(){return{popups:{popupPages:n.getPopupPages()}}}}}),k=t(65482),T=function(n){n(o.r_).to(l),n(u.nB).to(W),n(o.zC).to(y),n(o.wk).to(_),n(r.QV).to(P),n(C.j.AppWillLoadPageHandler).to(d)},b=function(n){n(k.Vx).to(g),n(k.Vx).to(v),n(k.Vx).to(m)},w=T,L=b}}]);
