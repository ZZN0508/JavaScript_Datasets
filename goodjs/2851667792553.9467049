YUI.add("stencil-lightbox",function(a,t){"use strict";function e(t){this.constructor.superclass.constructor.call(this,t)}var i,s,l="Dn",d="Modal-off",c="Modal-on",u="Modal-is2tall",r="LightBox-open",o=a.one(document),h=o.get("documentElement"),n=a.Node.create('<div class="Modal Modal-off" role="alertdialog" tabindex="-1"></div>'),g=function(t,e){return i||(i=t.item(0)===this._node&&e&&e.content?n:t.item(0),a.UA.ie&&a.UA.ie<7&&i.plug(a.Plugin.Shim)),i};e.DEFAULTS={content:"",closebtn:1,autohide:1,focusNode:null,enforceFocus:1},a.extend(e,a.Stencil.BasePlugin,{hide:function(t,e){e=g.call(this,t,e);this.hideCurtain(),Stencil.css.transitioned(e,function(t,e){e&&"0"!==t.getComputedStyle("opacity")||t.addClass(l)}),h.removeClass(r),e.addClass(d).removeClass(c).removeClass(u),e.fire("lightbox:hide"),this.releaseFocus(e),i=null},show:function(t,e){var i,s,o=g.call(this,t,e),n=a.merge(this.constructor.DEFAULTS,e);n.content&&o.set("innerHTML",n.content),this.processSources(o),n.closebtn&&(1===Number(n.closebtn)?(i=o.one(".ModalDismissBtn"))||(i=a.Node.create('<button class="ModalDismissBtn Btn Pos-a T-0 End-0 M-4 Fz-xs P-2" data-plugin="lightbox" data-lightbox=\'{"default":"hide"}\'><i class="Icon">&#xe009;</i></button>'),o.append(i)):(i=a.one(n.closebtn)).hasAttribute("data-lightbox")||i.setAttribute("data-plugin",(i.getAttribute("data-plugin")+" lightbox").trim()).setAttribute("data-lightbox",'{"default":"hide"}')),s=n.focusNode?a.one(n.focusNode):i||o,this.showCurtain(o),o.removeClass(l),o.set("role","alertdialog").set("tabIndex","-1"),setTimeout(a.bind(function(){var t;o.removeClass(d).addClass(c),h.addClass(r),o.get("offsetHeight")>a.DOM.viewportRegion().height&&o.addClass(u),o.fire("lightbox:show"),n.autohide&&n.enforceFocus&&(t=a.bind(this.hide,this,a.Stencil.getNodeList(o))),this.focus(o,s,t,n.enforceFocus)},this),10)},toggle:function(t,e){g.call(this,t).hasClass(d)?this.show(t,e):this.hide(t,e)},showCurtain:function(t){return s||(s=a.Node.create('<div tabindex="-1" class="PageOverlay Dn"><b class="ModalShim"></b><b class="IEShim"></b></div>'),a.UA.ie&&a.UA.ie<7&&s.plug(a.Plugin.Shim),o.one("body").append(s),s.after("click",function(t){s===t.target&&t.halt()})),s.prepend(t).removeClass(l),s},hideCurtain:function(){s&&!s.hasClass(l)&&Stencil.css.transitioned(s,function(t,e){e&&"0"!==t.getComputedStyle("opacity")||t.addClass(l)})}},{NS:"StencilLightBox"}),a.Stencil.registerPlugin(e,"LightBox")},"@VERSION@",{requires:["stencil-base","yui-base","dom-base","dom-screen","node-base","node-pluginhost","shim-plugin"]});
