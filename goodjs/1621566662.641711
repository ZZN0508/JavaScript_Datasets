define(["OK/logger","OK/NewsFetchCoordinator"],(function(t,e){"use strict";var r;function n(){r||(r=!!document.getElementById("call2"))}function i(t,e){t&&require(["OK/WebRTCUtils!"],(function(n){if(n.isBrowserSupported())try{var i=OK.util.parseJsonCorrected(t);i&&(r?require(["OK/call2"],(function(t){t.onPush(i)})):require(["OK/videochat/Chat"],(function(t){t.onPush(i)})))}catch(t){e&&e()}}))}return{activatePush:function(){n(),e.addBlock("VCP"),require(["OK/VideoChatSound"])},activateWebPush:function(e){n(),window.history&&window.history.replaceState(null,"","/");var r=e.getAttribute("data-notification"),o=e.getAttribute("data-alternative-link");r?i(r,(function(){t.error("videochat.webpush.error")})):o&&window.navigateOnUrlFromJS&&navigateOnUrlFromJS(o)},setNewContent:function(e){i(e,(function(){t.error("videochat.push.error")}))}}}));