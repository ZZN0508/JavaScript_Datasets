"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),o=1;o<arguments.length;o++){var a=arguments[o];if(null!=a)for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(n[r]=a[r])}return n},writable:!0,configurable:!0,enumerable:!1}),window._hmt=window._hmt||[],function(){function o(t){for(var e=document.cookie.split("; "),n=0;n<e.length;n++){var o=e[n].split("=");if(o[0]==t&&"UD"==t)return decodeURIComponent(o[1]);if(o[0]==t)return decodeURI(o[1])}}function t(){var t=window.location.host;return 0===t.indexOf("blog")?"UA-127895514-2":0===t.indexOf("download")?"UA-127895514-8":0===t.indexOf("edu")?"UA-127895514-9":0===t.indexOf("bbs")?"UA-127895514-4":0===t.indexOf("ask")?"UA-127895514-5":0===t.indexOf("gitbook")?"UA-127895514-10":0===t.indexOf("iteye")?"UA-127895514-6":0===t.indexOf("passport")?"UA-127895514-7":0===t.indexOf("so")?"UA-127895514-3":0===t.indexOf("www")?0<t.indexOf("iteye")?"UA-127895514-6":"UA-127895514-1":""}var e=(a="6bcd52f51e9b3dce32bec4a3997715ac",(n=$('meta[name="toolbar"]')).length&&(n=n.attr("content")||{},a=(n=JSON.parse(n)).hmId||a),a);!function(t){for(var e=document.cookie.split("; "),n=0;n<e.length;n++){var o=e[n].split("=");/^Hm\_.+\_.+$/.test(o[0])&&-1===o[0].indexOf(t)&&-1===o[0].indexOf("6bcd52f51e9b3dce32bec4a3997715ac")&&(document.cookie=o[0]+"="+escape("")+";max-age=0;domain=.csdn.net;path=/")}}(e),_hmt.push(["_setAccount",e]),function(){try{var t=!!o("UN"),e=!!o("UserName"),n=(n=o("p_uid"))?n.substr(1,1):0;_hmt.push(["_setUserProperty",{islogin:+t,isonline:+e,isvip:+(1==n)}]),e&&_hmt.push(["_setUserId",o("UserName")]),_hmt.push(["_setUserTag","6525",o("uuid_tt_dd")])}catch(t){}}();var n=document.createElement("script");n.src="https://hm.baidu.com/hm.js?"+e;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(n,a),-1<document.referrer.indexOf("google.com")&&(e=function(){dataLayer.push(arguments)},(n=document.createElement("script")).src="https://www.googletagmanager.com/gtag/js?id="+t(),a.parentNode.insertBefore(n,a),window.dataLayer=window.dataLayer||[],a=o("UserName")||"",e("js",new Date),e("config",t()),a&&e("set",{user_id:a}))}(),function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://g.csdnimg.cn/??asdf/1.1.3/trackad.js,iconfont/nav/iconfont-1.0.1.js,notification/1.3.8/notify.js,notification/1.3.8/main.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}(),window._hmt=window._hmt||[],function(u,h){function a(t){for(var e=document.cookie.split("; "),n=0;n<e.length;n++){var o=e[n].split("=");if(o[0]==t)return decodeURIComponent(o[1])}}function o(t,e,n){var o=new Date;n?o.setTime(o.getTime()+n):o.setTime(o.getTime()+2592e6),document.cookie=t+"="+encodeURIComponent(e)+";expires="+o.toGMTString()+";domain=.csdn.net;path=/"}function n(t){var e=new Date;document.cookie=t+"="+escape("1")+";max-age=0;expires="+e.toGMTString()+";domain=.csdn.net;path=/"}function r(){return location.origin+location.pathname==="https://www.csdn.net/c/"}function m(t){var e,n,o,a,r,i,s,c,l,d,p;"[object Object]"==Object.prototype.toString.call(t)&&(e=h("#csdn-toolbar"),n=t.need_first_suspend||!1,o=t.need_little_suspend||!1,s=t.little_tool_id||"",a=t.little_need_insert_type||"",r=t.need_change_function||"",i="",1==n&&1==o||(o&&""!=s&&(e=h(s)),o&&s&&""!=a&&(i=h("."+a)),0!==e.length?(c=function(){var t;50<=(document.documentElement.scrollTop||document.body.scrollTop)?(e.css({position:"fixed",top:"0",left:"0","z-index":"1993",width:"100%"}),o&&h(".secodn_level_csdn_logo").length&&h(".secodn_level_csdn_logo").css({display:"block"}),o&&""!=a&&(h("body").addClass("toolbar-second-drop"),"onlySearch"==a||"onlyUser"==a?h("#csdn_tool_otherPlace").append(i):"searchUser"==a&&(h("#csdn_tool_otherPlace").append(h(".onlySearch")),h("#csdn_tool_otherPlace").append(h(".onlyUser")))),"function"==typeof r&&r("fixed")):(e.css({position:"relative","z-index":""}),o&&h(".secodn_level_csdn_logo").length&&h(".secodn_level_csdn_logo").css({display:"none"}),o&&""!=a&&(h("body").removeClass("toolbar-second-drop"),t=h("#csdn-toolbar .toolbar-container"),"onlySearch"==a?t.find(".toolbar-menus").after(i):"onlyUser"==a?t.find(".toolbar-container-right").append(i):"searchUser"==a&&(t.find(".toolbar-container-middle").append(h(".onlySearch")),t.find(".toolbar-container-right").append(h(".onlyUser")))),"function"==typeof r&&r("noFixed"))},l=80,p=null,s=function(){var t=this,e=new Date;0<e-p-l?(d&&(clearTimeout(d),d=null),c.apply(t,arguments),p=e):d=d||setTimeout(function(){c.apply(t,arguments)},l)},50<(document.documentElement.scrollTop||document.body.scrollTop)&&s(),h(u).on("scroll",s)):g.push(m.bind(this,t))))}function t(){this.currentUser={userName:"",userNick:'<a class="set-nick" href="https://passport.csdn.net/account/profile">设置昵称<span class="write-icon"></span></a>',desc:'<a class="fill-dec" href="//my.csdn.net" target="_blank">编辑自我介绍，让更多人了解你<span class="write-icon"></span></a>',avatar:""},this.hasLogin=!1,this.$container="",this.announcement=0,this.logoData={title:"CSDN首页",url:{default:"https://csdnimg.cn/cdn/content-toolbar/csdn-logo.png?v=20200416.1",dark:"https://g.csdnimg.cn/common/csdn-toolbar/images/csdn-logo.png",home:"https://g.csdnimg.cn/common/csdn-toolbar/images/csdn-logo.png"}},this.navData=[],this.personMenuData=[],this.advertData={date:{start:"2020/07/03 08:50:00",end:"2020/07/04 17:30:00"},background:{large:"https://csdnimg.cn/public/publick_img/ad_20200703_toolbar325.jpg",default:"https://csdnimg.cn/public/publick_img/ad_20200703_toolbar80_2.jpg"},color:"#027ef2",url:"https://aiprocon.csdn.net/p/live?utm_source=live_703"},this.init()}u.csdn=u.csdn||{},u.csdn.configuration_tool_parameterv=m;var e,i,s,c,l,d=["csdn-toolbar-default","csdn-toolbar-dark","csdn-toolbar-home"],g=[],p=0;t.prototype={constructor:t,init:function(){var e=this;e.checkLogin(function(t){t.userName&&(e.hasLogin=!0,_hmt.push(["_setUserTag","5744",t.userName])),e.setPersonMenuData()}),e.getToolbarData(e.render)},render:function(t){var e=this;e.renderToolbar(),e.renderLogo(),e.renderNav(),e.renderSearch(),e.renderBtns(),e.getHotSearchWordData(),e.chain()},setPersonMenuData:function(){this.personMenuData=[{name:"我的关注",url:"https://i.csdn.net/#/uc/follow-list",report:{mod:"popu_789",dest:"https://i.csdn.net/#/uc/follow-list",spm:"3001.5109"},icon:"toolbar-icon-follow",class:""},{name:"我的收藏",url:"https://i.csdn.net/#/uc/collection-list?type=1",report:{mod:"popu_789",dest:"https://i.csdn.net/#/uc/collection-list?type=1",spm:"3001.5110"},icon:"toolbar-icon-collect",class:""},{name:"个人中心",url:"https://i.csdn.net/#/uc/profile",report:{mod:"popu_789",dest:"https://i.csdn.net/#/uc/profile",spm:"3001.5111"},icon:"toolbar-icon-profile",class:""},{name:"帐号设置",url:"https://i.csdn.net/#/account/index",report:{mod:"popu_789",dest:"https://i.csdn.net/#/account/index",spm:"3001.5112"},icon:"toolbar-icon-account",class:"toolbar-subMenu-border"},{name:"我的博客",url:"https://blog.csdn.net/"+this.currentUser.userName,report:{mod:"popu_789",dest:"https://blog.csdn.net/",spm:"3001.5113"},icon:"toolbar-icon-blog",class:""},{name:"管理博客",url:"https://mp.csdn.net/console/article",report:{mod:"popu_789",dest:"https://mp.csdn.net/console/article",spm:"3001.5114"},icon:"toolbar-icon-mp",class:""},{name:"我的学院",url:"https://edu.csdn.net/",report:{mod:"popu_789",dest:"https://edu.csdn.net/",spm:"3001.5115"},icon:"toolbar-icon-edu",class:""},{name:"我的下载",url:"https://mp.csdn.net/console/upDetailed",report:{mod:"popu_789",dest:"https://mp.csdn.net/console/upDetailed",spm:"3001.5116"},icon:"toolbar-icon-download",class:""},{name:"我的书架",url:"https://book.csdn.net/bookshelf",report:{mod:"popu_789",dest:"https://book.csdn.net/bookshelf",spm:"3001.5117"},icon:"toolbar-icon-book",class:"toolbar-subMenu-border"},{name:"我的钱包",url:"https://i.csdn.net/#/wallet/index",report:{mod:"popu_789",dest:"https://i.csdn.net/#/wallet/index",spm:"3001.5136"},icon:"toolbar-icon-wallet",class:""},{name:"我的订单",url:"https://mall.csdn.net/myorder",report:{mod:"popu_789",dest:"https://mall.csdn.net/myorder",spm:"3001.5137"},icon:"toolbar-icon-order",class:"toolbar-subMenu-border"},{name:"帮助",url:"https://blog.csdn.net/blogdevteam/article/details/103478461",report:{mod:"popu_789",dest:"https://blog.csdn.net/blogdevteam/article/details/103478461",spm:"3001.5138"},icon:"toolbar-icon-help",class:""},{name:"退出",url:"javascript:;",report:{spm:"3001.5139"},icon:"toolbar-icon-logout",class:"toolbar-btn-logout"}]},getAvatarByAu:function(t){return!!t&&"https://profile.csdnimg.cn/"+t.split("").join("/")+"/2_"+(this.currentUser.userName&&this.currentUser.userName.toLowerCase())},checkLogin:function(t){var e=a("AU"),n=a("UserNick"),o=a("UserName");this.currentUser.userNick=n,this.currentUser.userName=o,this.currentUser.avatar=this.getAvatarByAu(e),t&&t(this.currentUser)},renderToolbar:function(){var e=this,t=e.getToolbarStyle(),t=h('<div id="csdn-toolbar">\n                    <div class="toolbar-inside" '+(t?'style="'+t+'"':"")+'>\n                      <div class="toolbar-container">\n                        <div class="toolbar-container-left">\n                          <div class="toolbar-logo toolbar-subMenu-box csdn-toolbar-fl"></div>\n                          <ul class="toolbar-menus csdn-toolbar-fl"></ul>\n                        </div>\n                        <div class="toolbar-container-middle">\n                          <div class="toolbar-search onlySearch"></div>\n                        </div>\n                        <div class="toolbar-container-right">\n                          <div class="toolbar-btns onlyUser"></div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>');return h("body").prepend(t),e.$container=t.find(".toolbar-container"),e.$logoBox=t.find(".toolbar-logo"),e.$NavBox=t.find(".toolbar-menus"),e.$searchBox=t.find(".toolbar-search"),e.$btnsBox=t.find(".toolbar-btns"),h(document).on("click",function(t){0!==h(t.target).closest(".toolbar-search").length||e.searchInputFocus||(e.clearSeachDropMenu(),e.toggleSearchBarInput())}),this},renderNav:function(){var n=this,t=""+this.navData.map(function(t){t.active=(e=(e=(e=t.url).replace("https://","")).split(".")[0],~location.host.indexOf(e)),("index"===t.id&&r()||"community"===t.id&&!r())&&(t.active=!1);var e=((new Date).getTime(),n.isEffectiveTime(t.icon));return'<li class="'+(t.active?"active ":"")+(t.children.length?"toolbar-subMenu-box":"")+(t.slider&&t.slider.list&&t.slider.list.length?" toolbar-subSlider-box":"")+'">\n                                <a '+(t.report?"data-report-click='"+JSON.stringify(t.report)+"'":"")+" "+(t.report&&t.report.spm?'data-report-query="spm='+t.report.spm+'"':"")+" href='"+t.url+"'>\n                                  "+t.name+"\n                                  "+(e?"<img style='"+t.icon.style+'\'" src="'+t.icon.url+'">':"")+"\n                                  "+(t.children.length?'<i class="toolbar-subMenu-arrowHead"></i>':"")+"\n                                </a>\n                                "+(t.children.length?'<div class="toolbar-subMenu">\n                                    '+t.children.map(function(t){return"<a data-report-click='"+JSON.stringify(t.report)+"' data-report-query=\"spm="+t.report.spm+'" target="_blank" href=\''+t.url+"'>"+t.name+"</a>"}).join("")+"\n                                  </div>":"")+"\n                                "+(t.slider&&t.slider.list&&t.slider.list.length?'<div class="toolbar-subSlider">\n                                  <div class=toolbar-subSlider-'+t.id+">\n                                    "+t.slider.list.map(function(t){return(t.name&&t.name.length<=2||t.imgUrl)&&"<a "+(t.report?"data-report-click='"+JSON.stringify(t.report)+"'":"")+" "+(t.report&&t.report.spm?'data-report-query="spm='+t.report.spm+'"':"")+' target="_blank" href='+(t.url||"javascript:void(0);")+">"+(t.name||"")+(t.imgUrl?"<img src="+t.imgUrl+" style="+(t.imgStyle||"")+" />":"")+"</a>"}).join("")+"\n                                    </div>\n                                  </div>":"")+"\n                              </li>"}).join("");return this.$NavBox.append(t),this},renderLogo:function(){var t=["default","dark","home"][p],t='<a data-report-click=\'{"spm":"3001.4476"}\' data-report-query="spm=3001.4476" href="'+(this.logoData.link||"https://csdn.net")+'"><img title="'+(this.logoData.title||"CSDN首页")+'" src="'+this.logoData.url[t]+'"></a>\n                    '+(this.logoData.qrcode?'<div class="toolbar-subMenu">\n                    <img width="96" height="96" src="'+this.logoData.qrcode+'">\n                  </div>':"");return this.$logoBox.append(t),this},renderSearch:function(){var n=this,t=h('<div class="toolbar-search-container">\n                    <input id="toolbar-search-input" autocomplete="off" type="text" value="" placeholder="'+this.getSearchInputPlaceHolder()+'">\n                    <button id="toolbar-search-button"></button>\n                    <input type="password" autocomplete="new-password" readonly disabled="true" style="display: none; position:absolute;left:-9999999px;width:0;height:0;"/>\n                  </div>'),o=!1;return t.on("focus","#toolbar-search-input",function(t){""===h(this).val()&&n.getSearchHistoryArray(n.renderSearchHistoryDropMenu),n.toggleSearchBarInput("focus"),n.searchInputFocus=!0,o=!0}).on("blur","#toolbar-search-input",function(t){n.searchInputFocus=!1}).on("input","#toolbar-search-input",function(t){var e=h(this).val();""===(n.searchInputValue=e)&&o?n.getSearchHistoryArray(n.renderSearchHistoryDropMenu):h(".toolbar-search-drop-menu").remove()}).on("click","button",function(t){var e=h("#toolbar-search-input").val();return n.clickSearchBtnHandler.call(n,e),n.buriedPoint({spm:"3001.4498"}),!1}).on("keyup","#toolbar-search-input",function(t){13===t.keyCode&&h("#toolbar-search-button").trigger("click")}),this.$searchBox.append(t),this.renderBaiduSearchDropMenu(),this},renderBtns:function(){var t=this,e=h('<div class="toolbar-btn toolbar-btn-login csdn-toolbar-fl '+(this.hasLogin?"toolbar-subMenu-box":"")+'">\n                      '+(this.hasLogin?'<a class="hasAvatar" data-report-click=\'{"spm": "3001.5343"}\' data-report-query="spm=3001.5343" href="https://blog.csdn.net/'+t.currentUser.userName+'"><img src="'+this.currentUser.avatar+'"></a>':' <a data-report-click=\'{"spm":"3001.5105"}\' data-report-query="spm=3001.5105" href="https://passport.csdn.net/account/login">登录/注册</a>')+'\n                      </div>\n                    <div class="toolbar-btn toolbar-btn-vip csdn-toolbar-fl">\n                      <a data-report-click=\''+JSON.stringify(t.vipData.report)+"' "+(t.vipData.report.spm?'data-report-query="spm='+t.vipData.report.spm+'"':"")+" href='"+t.vipData.url+"'>"+t.vipData.name+" "+(t.isEffectiveTime(t.vipData.icon)?"<img style='"+t.vipData.icon.style+'\'" src="'+t.vipData.icon.url+'">':"")+'</a>\n                    </div>\n                    <div class="toolbar-btn toolbar-btn-collect csdn-toolbar-fl">\n                      <a data-report-click=\'{"spm":"3001.4506"}\' data-report-query="spm=3001.4506" href="https://i.csdn.net/#/user-center/collection-list?type=1">收藏</a>\n                    </div>\n                    '+(this.hasLogin?' <div class="toolbar-btn csdn-toolbar-fl"><a data-report-click=\'{"spm":"3001.4507"}\' data-report-query="spm=3001.4507" href="https://blog.csdn.net/nav/watchers">动态</a></div>':"")+'\n                    <div class="toolbar-btn toolbar-btn-msg csdn-toolbar-fl">\n                      <div class="toolbar-subMenu-box">\n                        <a data-report-click=\'{"spm":"3001.4508"}\' data-report-query="spm=3001.4508" id="toolbar-remind" href="https://i.csdn.net/#/msg/index">消息</a>\n                      </div>\n                      <div class="toolbar-msg-box"></div>\n                    </div>\n                    <div class="toolbar-btn toolbar-btn-write csdn-toolbar-fl '+(this.hasLogin?"toolbar-subMenu-box":"")+'">\n                      <a data-report-click=\'{"spm":"3001.4503"}\' data-report-query="spm=3001.4503" href="https://mp-new.csdn.net"><i></i>创作中心</a>\n                    </div>');return this.$btnsBox.append(e),e.on("click",".toolbar-btn-logout",function(){t.clickLogoutBtnHandler()}),this.$msgBox=e.find(".toolbar-msg-box"),this},renderMsgMenu:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e='<div class="toolbar-subMenu">\n                    <a id="toolbar-announcement" href="'+(t.announcement?t.announcement.announcementUrl:"javaScript:;")+'"><span class="pos-rel">公告'+(t.announcement&&t.announcement.announcementCount?"<i></i>":"")+"</span></a>\n                    "+(this.hasLogin?'<a data-type="comment" href="https://i.csdn.net/#/msg/index"><span class="pos-rel">评论'+(t.comment?"<i></i>":"")+'</span></a>\n                                      <a data-type="attention" href="https://i.csdn.net/#/msg/attention"><span class="pos-rel">关注'+(t.follow?"<i></i>":"")+'</span></a>         \n                                      <a data-type="like" href="https://i.csdn.net/#/msg/like"><span class="pos-rel">点赞'+(t.thumb_up?"<i></i>":"")+'</span></a>\n                                      <a data-type="chat" href="https://im.csdn.net/im/main.html"><span class="pos-rel">私信'+(t.im?"<i></i>":"")+'</span></a>\n                                      <a data-type="notice" href="https://i.csdn.net/#/msg/notice"><span class="pos-rel">系统通知'+(t.system?"<i></i>":"")+'</span></a>\n                                      <a href="https://i.csdn.net/#/msg/setting">消息设置</a>':"")+"     \n                  </div>";this.$btnsBox.find(".toolbar-btn-msg .toolbar-subMenu-box").append(e),h("#toolbar-announcement").off("click").on("click",this.clickAnnouncementHandler.bind(this)),this.hasLogin||t.announcement&&this.setRemind(t.announcement.announcementUrl,t.announcement.announcementCount),g.length&&g.forEach(function(t){return t()})},renderCoupon:function(t){var e=h('<a href="https://i.csdn.net/#/msg/notice" class="toolbar-msg-coupon">你有一张VIP限时优惠券哦</a>');t&&0<t&&-1===u.location.href.indexOf("assign_skin_id")&&(this.$msgBox.append(e),setTimeout(function(){e.remove()},5e3))},renderGuide:function(t){var e=a("c-toolbar-loginguide"),n=h('<span class="toolbar-msg-guide"><a href="https://i.csdn.net/#/msg/index">登录查看未读消息</a><i></i></span>');!e&&t&&(n.find("i").click(function(t){o("c-toolbar-loginguide",1,864e5),n.remove()}),!this.hasLogin&&0<t&&this.$msgBox.append(n))},renderLiveMsg:function(e){var n,o=this;e&&1===e.status&&((n=h('<div class="toolbar-msg-live">\n                      <a class="toolbar-msg-live-title" target="_blank" href="'+e.url+'">'+e.title+'</a>\n                      <p class="toolbar-msg-live-count"><i></i>'+e.count+'人在看</p>\n                      <div class="toolbar-msg-live-avatar"><span><img src="'+e.avatar+'" alt=""></span></div>\n                      <span class="toolbar-msg-live-close"></span>\n                    </div>')).on("click",".toolbar-msg-live-close",function(t){n.remove()}),n.on("click",".toolbar-msg-live-title",function(t){o.reportLiveId(+e.messageId)}),o.$msgBox.append(n),setTimeout(function(){n.remove()},15e3))},reportLiveId:function(t){var e;t==t&&(e={messageId:t},e=JSON.stringify?JSON.stringify(e):'{"messageId":'+t+"}",h.ajax({url:"https://msg.csdn.net/v1/web/message/view/live",type:"post",data:e,contentType:"application/json",xhrFields:{withCredentials:!0},dataType:"json",success:function(t){}}))},renderSearchHistoryDropMenu:function(){var e=this,t=this.getSearchHistoryData(),n=h('<div class="toolbar-search-drop-menu '+(t.length?"toolbar-search-half":"")+'">\n                        '+(t.length?'<div class="toolbar-search-history">\n                          <p class="toolbar-search-title">搜索历史<span class="toolbar-search-clear"><i></i>清空</span></p>\n                          <ul>\n                            '+t.map(function(t){return'<li class="toolbar-search-item" data-type="history">'+t+"</li>"}).join("")+"\n                          </ul>\n                        </div>":"")+"\n                      </div>");n.on("click",".toolbar-search-clear",function(t){e.clearSearchHistory(),n.find(".toolbar-search-history").remove(),n.removeClass("toolbar-search-half")}).on("click","li",function(t){e.clickSearchItemHandler.call(e,h(this)),e.setAnimate(e.$NavBox,{width:"auto"})}),e.clearSeachDropMenu(),e.$searchHotAndHistoryDropMenu=n,e.$searchBox.append(n),e.getHotSearchData()},renderSearchHotDropMenu:function(t){t&&(t=h('<div class="toolbar-search-hot">\n                      <p class="toolbar-search-title">CSDN热搜</p>\n                      <ul>\n                        '+t.map(function(t,e){return'<li class="toolbar-search-item '+(e<=2||t.hot?"hot":"")+'" data-type="hot">'+(t.productId||t.word)+"</li>"}).join("")+"\n                      </ul>\n                    </div>"),this.$searchHotAndHistoryDropMenu.find(".toolbar-search-hot").remove(),this.$searchHotAndHistoryDropMenu&&this.$searchHotAndHistoryDropMenu.append(t))},renderBaiduSearchDropMenu:function(){var t,e,n,o=this;t="https://csdnimg.cn/search/baidu_opensug-1.0.1.js",e=function(){BaiduSuggestion.bind("toolbar-search-input",{XOffset:"-1",YOffset:"-8",fontSize:"14px",width:260,"line-height":"32px",padding:"0 16px",color:h(".toolbar-search-drop-menu ").css("color"),borderColor:h(".toolbar-search-drop-menu ").css("background-color"),bgcolorHI:"#F0F1F2",sugSubmit:!1},function(t){o.clickSearchBtnHandler.call(o,t),o.buriedPoint({spm:"3001.6005",mod:"popu_903",extend1:"toolbar百度建议词点击query上报",extra:JSON.stringify({query:o.searchInputValue,clickQuery:t})})})},(n=document.createElement("script")).type="text/javascript",n.readyState?n.onreadystatechange=function(){"loaded"!=n.readyState&&"complete"!=n.readyState||(n.onreadystatechange=null,e&&e())}:n.onload=function(){e&&e()},n.src=t,document.getElementsByTagName("head")[0].appendChild(n)},clickSearchBtnHandler:function(t){var e=encodeURIComponent(t||this.placeHolder),n=!t&&this.placeHolder,o="",t="https://so.csdn.net/so/search/s.do?q="+e+"&t="+function(){var t=u.location.host,e="";switch(t.split(".")[0]){case"www":case"blog":case"bbs":e="";break;case"download":e="doc";break;case"ask":e="ask";break;case"gitchat":case"geek":e="";break;case"edu":e="course";break;default:e=""}return e=-1<t.indexOf(".blog.csdn.net")?"blog":e}()+"&u=",a=n?this.urlParamsPlaceholder:this.urlParams;if("undefined"===e)return h("#toolbar-search-input").focus(),!1;if(a){for(var r in a)a.hasOwnProperty(r)&&(o+="&"+r+"="+a[r]);t+=o}this.urlParams="",-1<u.location.href.indexOf("so.csdn.net")?u.csdn&&u.csdn.toolbarSearchUrl?u.location.href=u.csdn.toolbarSearchUrl+e+o:u.location.href=t:u.open(t)},clickSearchItemHandler:function(t){var e=t.text(),n=t.data("type"),o=this,a=t.index(),t={extra:JSON.stringify({searchword:e}),spm:"hot"===n?"3001.4502":"3001.4501"};"hot"===n&&(t=(a=(a=o.hotSearchData[a])&&a.reportData)?o.getHotSearchPointData(a,e):t),o.buriedPoint(t),h("#toolbar-search-input").val(e).blur(),o.clickSearchBtnHandler.call(o,e),o.clearSeachDropMenu(),o.toggleSearchBarInput()},clickAnnouncementHandler:function(){this.hasLogin&&(h("#toolbar-announcement").find(">i").remove(),this.announcement&&(this.announcement.announcementCount=0),o("announcement-new",JSON.stringify(this.announcement),this.announcement.announcementExpire||3e5),this.clearReadAnnouncement())},clickLogoutBtnHandler:function(){var t={mod:"popu_789"},e="https://passport.csdn.net/account/logout?from="+encodeURIComponent(u.location.href);t.dest=e,t.extend1="退出",u.location.href=e,csdn&&csdn.report&&csdn.report.reportClick(t)},clearSeachDropMenu:function(){h(".toolbar-search-drop-menu").remove()},clearReadAnnouncement:function(){h.ajax({url:"https://msg.csdn.net/v1/web/message/read_announcement",type:"post",contentType:"application/json",xhrFields:{withCredentials:!0},dataType:"json",success:function(t){},error:function(t){}})},setUserAvatar:function(t){var e=t.avatarUrl;0<t.totalCount&&e&&!this.hasLogin&&a("UN")&&(e='<a class="hasAvatar" href="https://passport.csdn.net/account/login"><img src="'+e+'"></a>',h(".toolbar-btn-login").html(e))},getHotSearchPointData:function(t,e){e=Object.assign({},{searchword:e},JSON.parse(t.data.extra||"{}"));return this.urlParams=t.urlParams,Object.assign({},t.data,{extra:JSON.stringify(e),spm:"3001.4502"})},getReadAnnouncement:function(){var e=this;h.ajax({url:"https://msg.csdn.net/v1/web/message/view/announcement",type:"post",contentType:"application/json",xhrFields:{withCredentials:!0},dataType:"json",success:function(t){t.status&&(t=t.data,e.announcement=t,o("announcement-new",JSON.stringify(t),t.announcementExpire||3e5),e.hasLogin?e.getUnreadMsg():e.renderMsgMenu({announcement:t}))},error:function(t){}})},getUnreadMsg:function(){var o,t;(this.hasLogin||a("UN"))&&(o=this,t=JSON.stringify?JSON.stringify({coupon:!0}):'{"coupon":true}',h.ajax({url:"https://msg.csdn.net/v1/web/message/view/unread",type:"post",data:t,contentType:"application/json",xhrFields:{withCredentials:!0},dataType:"json",success:function(t){var e,n;t.status&&(e=t.data,n=o.announcement&&o.announcement.announcementCount,t=o.announcement&&o.announcement.announcementUrl,e.totalCount=n?n+e.totalCount:e.totalCount,e.announcement={announcementCount:n,announcementUrl:t},o.setRemind("",e.totalCount),o.setDocumentTitle(e.totalCount),o.renderCoupon(e.coupon_order),o.renderGuide(e.totalCount),o.renderLiveMsg(e.live_info),o.setUserAvatar(e),o.renderMsgMenu(e))}}))},getSearchHistoryData:function(){return this.searchHistoryArray.splice(0,10)},getSearchHistoryArray:function(e){var n=this;h.ajax({url:"https://so.csdn.net/api/v1/get_search_his",type:"get",contentType:"application/json",dataType:"json",xhrFields:{withCredentials:!0},success:function(t){200==t.code&&(n.searchHistoryArray=t.data.map(function(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;")}),e&&e.call(n))},error:function(t){}})},getHotSearchData:function(){var e=this;(new Date).valueOf()-e.copyHotSearchDataTime<=2e3&&e.hotSearchData?e.renderSearchHotDropMenu(e.hotSearchData):h.ajax({url:"https://silkroad.csdn.net/api/v2/assemble/list/channel/pc_hot_word",type:"get",data:{channel_name:"pc_hot_word",size:10,user_name:e.currentUser.userName,platform:"pc",imei:a("uuid_tt_dd")},contentType:"application/json",dataType:"json",success:function(t){200===t.code&&(t=t.data&&t.data.items,e.copyHotSearchData(t),e.renderSearchHotDropMenu(t))},error:function(t){e.hotSearchData&&e.renderSearchHotDropMenu(e.hotSearchData)}})},getHotSearchWordData:function(e){var t={channel_name:"pc_hot_word",size:10,user_name:this.currentUser.userName,platform:"pc",imei:a("uuid_tt_dd")};if(u.toolbarSearchExt)try{var n=_typeof(u.toolbarSearchExt);"object"===n?t.toolbarSearchExt=JSON.stringify(u.toolbarSearchExt):"string"===n&&(t.toolbarSearchExt=u.toolbarSearchExt)}catch(t){}var o=this;h.ajax({url:"https://silkroad.csdn.net/api/v2/assemble/list/channel/search_hot_word",type:"get",data:t,contentType:"application/json",dataType:"json",success:function(t){200===t.code&&((t=t.data&&t.data.items.length&&t.data.items).length&&o.setPleaceHolderInterval(t.filter(function(t){return!!t.productId}),0,!1),e&&e())},error:function(t){}})},setPleaceHolderInterval:function(t){var e=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,o=arguments[2];n===t.length&&(o=!(n=0)),this.setSearchInputPlaceholder(t[n],o),1!==t.length&&setTimeout(function(){e.setPleaceHolderInterval(t,n+1,o)},1e4)},copyHotSearchData:function(t){t&&(this.hotSearchData=t,this.copyHotSearchDataTime=(new Date).getTime())},clearSearchHistory:function(){h.ajax({url:"https://so.csdn.net/api/v1/del_search_his",type:"get",contentType:"application/json",dataType:"json",xhrFields:{withCredentials:!0},success:function(t){t.code},error:function(t){}})},updataSearchHistoryArray:function(t,e){o(t,JSON.stringify(e))},addSearchHistory:function(t){t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;");var e=this.getSearchHistoryArray("searchHistoryArray-new"),n=h.inArray(t,e);-1<n&&e.splice(n,1),""!==h.trim(t)&&e.unshift(t),10<e.length&&e.pop(),this.updataSearchHistoryArray("searchHistoryArray-new",e)},getSearchInputPlaceHolder:function(){return this.placeHolder||(~location.host.indexOf("edu")?"搜学院课程":"搜CSDN")},setSearchInputPlaceholder:function(t,e){this.hotSearchWordData=t,this.placeHolder=t.productId,this.urlParamsPlaceholder=t.reportData&&t.reportData.urlParams,this.placeHolder&&h("#toolbar-search-input").attr("placeholder",this.placeHolder)},isEffectiveTime:function(t){if(!t)return!1;var e=(new Date).getTime(),n=new Date(t.start);return e<=new Date(t.end)&&n<=e},getCurrentLogoData:function(t){var n=this;return Array.isArray(t)?t.reduce(function(t,e){return t="default"!==e.type||t?t:e,n.isEffectiveTime(e.time)?e:t},void 0):"object"===(void 0===t?"undefined":_typeof(t))?t:n.logoData},getToolbarData:function(e){var n=this;h.ajax({url:"https://img-home.csdnimg.cn/data_json/toolbar/toolbar0602.json",type:"get",dataType:"JSON",contentType:"application/x-www-form-urlencoded; charset=utf-8",success:function(t){n.navData=t.menus.slice(0,t.menus.length-1),n.vipData=t.menus.pop(),n.logoData=n.getCurrentLogoData(t.logo),n.background=t.background,n.redpackData=t.redpackData,u.csdn.toolbarData=t,e&&e.call(n)},error:function(t){e&&e.call(n)}})},buriedPoint:function(t){try{csdn&&csdn.report&&csdn.report.reportClick(t)}catch(t){}},setDocumentTitle:function(t){var e=document.title;0<t&&(document.title="("+t+"条消息) "+e)},setRemind:function(t,e){var n=h("#toolbar-remind");!this.hasLogin&&t&&n.attr("href",t),n.html('<span class="pos-rel">消息'+(0<e?'<i class="toolbar-msg-count"></i>':"")+"</span>")},setAnimate:function(t,e,n){n&&t.animate(e,n)||t.css(e)},toggleNavItems:function(t,e){t=this.$NavBox.find(">li").eq(t).nextAll();e&&t.show()||t.hide()},getNavItemsWidthByCount:function(t){var n=0;return this.$NavBox.find(">li").eq(t).prevAll().each(function(t,e){n+=h(this).width()}),n},toggleSearchBarInput:function(t){var e;1366<h(document).width()||(e=this.getNavItemsWidthByCount(5),"focus"===t?this.setAnimate(this.$NavBox,{width:e},200):this.setAnimate(this.$NavBox,{width:"auto"},0),this.toggleNavItems(4,"focus"!==t))},getToolbarStyle:function(){var t=this.background;if(t){t=t[["default","dark","home"][p]];return 0<=t.indexOf("http")?"background: url("+t+") no-repeat center center;background-size: cover;":0<=t.indexOf("#")?"background: "+t:void 0}},setToolbarMsgCountByType:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;t&&this.hasLogin&&(0!==(t=h(".toolbar-btn-msg").find('a[data-type="'+t+'"]')).length&&(t.find("i").remove(),t.html('<span class="pos-rel">'+t.text()+(0<e?"<i></i>":"")+"</span>"),e=h(".toolbar-btn-msg").find(".toolbar-subMenu a i").length,this.setRemind("",e)))},chain:function(){var t=a("announcement-new"),e=a("UserName");return function(t){try{t&&h(document).trigger(t)}catch(t){}}("toolbarReady"),t&&"undefined"!==JSON.parse(t).announcementUrl?(this.announcement=JSON.parse(t),e?this.getUnreadMsg():this.renderMsgMenu({announcement:this.announcement}),n("announcement"),n("announcement_new"),n("searchHistoryArray"),n("searchHistoryArray-new"),this):void this.getReadAnnouncement()}},s=h('meta[name="toolbar"]'),c="",l=0,l=s.length?(e=s.attr("content")||{},(e=JSON.parse(e)).type||l):(e="toolbarSkinType",i={},location.href.replace(/([^*#&=?]+)=([^*#&=?]+)/g,function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var o=e[1],a=e[2];i[o]=a}),(e?i[e]:i)||l),c="https://g.csdnimg.cn/common/csdn-toolbar/"+d[l]+".css",p=l,-1===location.host.indexOf("loc-toolbar")&&(l=c,(c=document.createElement("link")).rel="stylesheet",c.type="text/css",c.href=l,document.getElementsByTagName("head")[0].appendChild(c));d=new t;u.csdn.toolbar={setToolbarMsgCountByType:d.setToolbarMsgCountByType.bind(d),configuration_tool_parameterv:m}}(window,jQuery),function(){function c(t){try{t&&$(document).trigger(t)}catch(t){}}function l(i,s){var t="https://kunpeng.csdn.net/ad/json/"+(s=void 0===s?536:s);$.ajax({url:t,type:"get",dataType:"JSON",contentType:"application/x-www-form-urlencoded; charset=utf-8",xhrFields:{withCredentials:!0},success:function(t){if(200===t.code&&t.data)switch(t.data.adType){case"baodeng":e=t.data,r=!!function(t){for(var e=document.cookie.split("; "),n=0;n<e.length;n++){var o=e[n].split("=");if(o[0]==t&&"UD"==t)return decodeURIComponent(o[1]);if(o[0]==t)return decodeURI(o[1])}}("is_advert"),e?(n="width:100%; height:100%; background-image: url("+e.imgUrl+"); background-size: auto 80px;background-repeat: no-repeat; background-position: center center;",o="width:100%; height:100%; background-image: url("+e.bigImgUrl+"); background-size: auto 320px;background-repeat: no-repeat; background-position: center center;",(a=$('<div class="toolbar-advert">\n            <a href="'+e.clickUrl+'" target="_blank" style="background: '+e.backgroundColor+';" class="toolbar-advert-default '+(r?"":"toolbar-advert-lg")+'"><div style="'+(r?n:o)+'"></div></a>\n            <span class="toolbar-adver-btn">×</span>\n            <img style="width:0;height:0;display:none;" src="'+e.exposureUrl+'"/>\n          </div>')).find(".toolbar-adver-btn").click(function(t){return a.remove(),c("toolbarHeightChange"),!1}),$("#csdn-toolbar").prepend(a),c("toolbarHeightChange"),r||function(t,e,n){var o=new Date;if(-1==n)return document.cookie=t+"="+escape(e)+";domain=.csdn.net;path=/";n?o.setTime(o.getTime()+n):o.setTime(o.getTime()+2592e6),document.cookie=t+"="+escape(e)+";expires="+o.toGMTString()+";domain=.csdn.net;path=/"}("is_advert","1",864e5),a.on("transitionend",function(t){c("toolbarHeightChange")}),setTimeout(function(){r||$(".toolbar-advert-default").removeClass("toolbar-advert-lg").find("div").attr("style",n),c("toolbarHeightChange")},1e3*(e.showSeconds||5))):function(t){var e=new Date;document.cookie=t+"="+escape("1")+";max-age=0;expires="+e.toGMTString()+";domain=.csdn.net;path=/"}("is_advert");break;case"code":!function(t){var e=$('<div class="toolbar-advert"></div>');t.content&&e.append(t.content),t.exposureUrl&&(t=$('<img width="0" height="0" style="display:none;" src="'+t.exposureUrl+'">'),e.append(t));c("toolbarHeightChange"),$("#csdn-toolbar").prepend(e),setTimeout(function(){c("toolbarHeightChange")},200)}(t.data)}else csdn&&csdn.toolbarData&&csdn.toolbarData.advert&&csdn.toolbarData.advert.checkPlugin&&541!==s&&setTimeout(function(){!function(){var t=$('<div class="adsbox"></div>');if($("#csdn-toolbar").append(t),t.is(":hidden"))return t.remove(),!0;t.remove()}()&&!$("#greenerSettings").length||$("#open_chromePlugin_tab").length||l(i,541)},5e3);var e,n,o,a,r}})}$(document).on("toolbarReady",function(t){l()})}(),function(){function i(t){for(var e=document.cookie.split("; "),n=0;n<e.length;n++){var o=e[n].split("=");if(o[0]==t&&"UD"==t)return decodeURIComponent(o[1]);if(o[0]==t)return decodeURI(o[1])}}function s(t,e,n){var o=new Date;if(-1==n)return document.cookie=t+"="+e+";domain=.csdn.net;path=/",0;n?o.setTime(o.getTime()+n):o.setTime(o.getTime()+2592e6),document.cookie=t+"="+e+";expires="+o.toGMTString()+";domain=.csdn.net;path=/"}var e=(_createClass(t,[{key:"init",value:function(){"1"!==i("hideBarrage")&&(this.getToolbarHeight(),this.insertCss(),this.queryBarrage(),this.bindToolbarHeightChange(),this.handlePageVisibilityChange())}},{key:"queryBarrage",value:function(){var e=this;$.ajax({url:"https://barrage-kunpeng.csdn.net/api/barrage/list",type:"get",contentType:"application/x-www-form-urlencoded; charset=utf-8",xhrFields:{withCredentials:!0},dataType:"json",success:function(t){200===t.code?(e.pollDelay=t.pollDelay,t.data.length?(e.allData=t.data,e.barrageList=e.getBarrageList(),e.renderBarrage(),e.start(),e.insertAdCookie(),e.resetErrorCount()):e.setTimer()):201!==t.code&&e.handleQueryError()},error:function(t){e.handleQueryError()}})}},{key:"handleQueryError",value:function(){this.errorCount++,this.setTimer(),10<this.errorCount&&clearTimeout(this.timer)}},{key:"getBarrageList",value:function(){var t=this.allData.slice(0,3);return this.allData=this.allData.slice(3),t.map(function(t){return Object.assign({},t,{x:0,speed:2+Number(Math.random().toFixed(1)),stop:!1})})}},{key:"start",value:function(){for(var n=this,o=document.documentElement.clientWidth,a=0,t=0;t<this.barrageDomArr.length;t++)!function(e){n.fnArr.push(function(){var t;n.barrageList[e].x-=n.barrageList[e].speed,n.barrageDomArr[e].style.transform="translateX("+n.barrageList[e].x+"px)",o+n.barrageList[e].x>=-n.barrageBoxWidth&&!n.barrageList[e].stop?requestAnimationFrame(n.fnArr[e]):o+n.barrageList[e].x<-n.barrageBoxWidth&&!n.barrageList[e].stop&&++a===n.barrageDomArr.length&&(n.fnArr=[],$("#barrageBox").remove(),n.checkIsPassport()||(t=n.getTomorrowTimeRemaining(),s("ad_last_time",Date.now(),t)),n.barrageList=n.getBarrageList(),n.barrageList.length?(n.renderBarrage(),n.start(),n.insertAdCookie()):n.setTimer())})}(t);for(var e=0;e<this.barrageList.length;e++)!function(t){requestAnimationFrame(n.fnArr[t]),setTimeout(function(){window.csdn.report.reportView({mod:"popu_894",extend1:n.barrageList[t].barrageId,dest:n.barrageList[t].clickUrl})},1e3)}(e)}},{key:"insertCss",value:function(){var t=document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",e.appendChild(document.createTextNode("\n        #barrageBox .barrage-item {\n          position:relative;\n          display: flex;\n          align-items: center;\n          height: 40px;\n          margin-bottom: 62px;\n          border-radius: 0 100px 100px 0;\n          width: fit-content;\n        }\n        #barrageBox .barrage-item.barrage-link-hide {\n          visibility: hidden;\n        }\n        #barrageBox .barrage-item .barrage-follow {\n          cursor: pointer;\n          position: absolute;\n          left: 8px;\n          bottom: -9px;\n          z-index: 999;\n          border: none;\n          outline: none;\n          font-size: 12px;\n          font-weight: 500;\n          line-height: 17px;\n          color: #FFFFFF;\n          -webkit-background-clip: text;\n          -webkit-text-fill-color: transparent;\n        }\n        #barrageBox .barrage-item .barrage-follow.is-follow {\n          left: 2px\n        }\n        #barrageBox .barrage-item .barrage-link {\n          position: relative;\n          display: flex;\n          align-items: center;\n          color: #fff;\n          font-size: 14px;\n          font-weight: 500;\n          height: 100%;\n          padding-right: 24px;\n          min-width: 294px;\n        }\n        #barrageBox .barrage-item .barrage-link img {\n          width: 38px;\n          height: 38px;\n          display: block;\n          border-radius: 50%;\n          margin-right: 27px;\n        }\n        #barrageBox .barrage-item .barrage-link .barrage-content {\n          max-width: 592px;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n        }\n        #barrageBox .barrage-item .barrage-link .barrage-bg {\n          width: 320px;\n          height: 80px;\n          position: absolute;\n          left: -26px;\n          top: 50%;\n          transform: translateY(-50%);\n        }\n        #barrageBox .barrage-item .barrage-right {\n          position: relative;\n          height: 100%;\n          width: 44px;\n          display: flex;\n          align-items: center;\n        }\n        #barrageBox .barrage-item .barrage-right .barrage-close {\n          width: 100%;\n          height: 100%;\n          position: absolute;\n          background: url('https://img-home.csdnimg.cn/images/20201104030927.png') no-repeat center;\n          background-size: 16px 16px;\n          cursor: pointer;\n        }\n        #barrageBox .barrage-item .barrage-right .barrage-right-border {\n          width: 1px;\n          height: 20px;\n          background: rgba(255, 255, 255, 0.3);\n        }\n      ")),t.appendChild(e)}},{key:"renderBarrage",value:function(){for(var t="",e=0;e<this.barrageList.length;e++){var n=this.barrageList[e].barrageId,o=this.barrageList[e].clickUrl;t+='\n          <div class="barrage-item" style="background-color: '+this.barrageList[e].bgColor+"; box-shadow: -12px 4px 14px 0 "+this.barrageList[e].shadowColor+';">\n          '+(this.barrageList[e].type?"":'<button class="barrage-follow" data-username="'+this.barrageList[e].username+'">关注</button>')+'\n            <a class="'+(this.barrageList[e].type?"barrage-link barrage-link-redpack":"barrage-link")+'" href="'+(this.barrageList[e].type?"javascript:;":o)+'" target="'+(this.barrageList[e].type?"":"_blank")+'" data-report-click=\'{"mod":"popu_894","extend1": "'+n+'", "dest": "'+o+'"}\'>\n              <img src="'+this.barrageList[e].headImage+'" alt="">\n              <div class="barrage-content">'+this.barrageList[e].nickname.slice(0,10)+"："+this.barrageList[e].content+'</div>\n              <div class="barrage-bg" style="background: url('+this.barrageList[e].bgImage+') no-repeat center; background-size: cover;"></div>\n            </a>\n            <div class="barrage-right">\n              <div class="barrage-close"></div>\n              <div class="barrage-right-border"></div>\n            </div>\n          </div>\n        '}$("#csdn-toolbar").append('<div id="barrageBox" style="position: fixed; z-index: 99999; top: '+(this.toolbarHeight+32)+'px;">'+t+"</div>"),this.barrageDomArr=[].concat(_toConsumableArray(document.querySelectorAll("#barrageBox .barrage-item")));var a=$("#barrageBox");this.barrageBoxWidth=a.width()+26,a.css({right:-this.barrageBoxWidth+"px"});var r=this;a.on("mouseenter",".barrage-item",function(){r.barrageList[$(this).index()].stop=!0}),a.on("mouseleave",".barrage-item",function(){r.barrageList[$(this).index()].stop=!1,requestAnimationFrame(r.fnArr[$(this).index()])}),a.on("click",".barrage-close",function(){$("#barrageBox").remove(),clearTimeout(r.timer),s("hideBarrage","1",r.getTomorrowTimeRemaining())}),a.on("click",".barrage-follow",function(){$(this).hasClass("is-follow")||r.follow(r.barrageList[$(this).parent().index()].username)}),a.on("click",".barrage-link.barrage-link-redpack",function(){var t;i("UserName")?$(this).hasClass("already")||(t=$(this).parent().index(),window.csdn.barrageRedpack&&window.csdn.barrageRedpack.open(r.barrageList[t].typeId),$(this).addClass("already").parent().addClass("barrage-link-hide")):window.location.href="https://passport.csdn.net/account/login?from="+encodeURIComponent(window.location.href)})}},{key:"insertAdCookie",value:function(){for(var t=i("ad_barrage_ids")||"",e=t?t.split(","):[],e=[].concat(_toConsumableArray(new Set(e.concat(this.barrageList.filter(function(t){return t.isAddCookie}).map(function(t){return t.barrageId})))));500<e.length;)e.shift();s("ad_barrage_ids",e.join(","),864e5)}},{key:"setTimer",value:function(){var t=this;clearTimeout(this.timer),this.timer=setTimeout(function(){t.queryBarrage()},1e3*this.pollDelay)}},{key:"resetErrorCount",value:function(){this.errorCount=0}},{key:"bindToolbarHeightChange",value:function(){var e=this;$(document).on("toolbarHeightChange",function(){e.getToolbarHeight();var t=$("#barrageBox");t.length&&t.css("top",e.toolbarHeight+32+"px")})}},{key:"getToolbarHeight",value:function(){var t=$("#csdn-toolbar");this.toolbarHeight=t.length?t.height():44}},{key:"handlePageVisibilityChange",value:function(){var t,e,n=this;void 0!==document.hidden?(t="hidden",e="visibilitychange"):void 0!==document.msHidden?(t="msHidden",e="msvisibilitychange"):void 0!==document.webkitHidden&&(t="webkitHidden",e="webkitvisibilitychange");document.addEventListener(e,function(){document[t]?clearTimeout(n.timer):$("#barrageBox").length||n.setTimer()},!1)}},{key:"getTomorrowTimeRemaining",value:function(){var t=(new Date).getFullYear()+"/"+((new Date).getMonth()+1)+"/"+((new Date).getDate()+1);return new Date(t)-Date.now()}},{key:"follow",value:function(e){var n=this;i("UserName")?i("UserName")!==e&&$.ajax({url:"https://me.csdn.net/api/relation/create",type:"post",contentType:"application/x-www-form-urlencoded; charset=utf-8",xhrFields:{withCredentials:!0},data:JSON.stringify({username:e}),dataType:"json",success:function(t){n.changeFollowStatus(e)},error:function(t){n.changeFollowStatus(e)}}):window.location.href="https://passport.csdn.net/account/login?from="+encodeURIComponent(window.location.href)}},{key:"changeFollowStatus",value:function(t){$("#barrageBox").find(".barrage-item").each(function(){$(this).find(".barrage-follow").attr("data-username")===t&&$(this).find(".barrage-follow").addClass("is-follow").text("已关注")})}},{key:"checkIsPassport",value:function(){return!!~window.location.href.indexOf("passport.csdn.net")}}]),t);function t(){_classCallCheck(this,t),this.allData=[],this.barrageList=[],this.barrageDomArr=[],this.fnArr=[],this.barrageBoxWidth=400,this.pollDelay=30,this.timer=null,this.errorCount=0,this.toolbarHeight=44}$(document).on("toolbarReady",function(){var t=window.csdn.toolbarData.barrageData.whiteList;t.length&&t.some(function(t){return"*"===t||!!~location.href.indexOf(t)})&&(new e).init()})}(),function(){var n=!1,o=(_createClass(t,[{key:"init",value:function(){this.getCollectionFolder()}},{key:"getCollectionFolder",value:function(){var e=this;$.ajax({url:"https://www.csdn.net/community/toolbar-api/v1/favorites-list",type:"get",contentType:"application/x-www-form-urlencoded; charset=utf-8",xhrFields:{withCredentials:!0},dataType:"json",success:function(t){200===t.code&&(e.data=t.data.favoritesList,e.data.length&&(e.data[0].contentList=t.data.contentList,e.render(),e.finishInit=!0))},error:function(t){}})}},{key:"getCollectionContent",value:function(t){var e=this;$.ajax({url:"https://www.csdn.net/community/toolbar-api/v1/get-favorite-content?id="+t,type:"get",contentType:"application/x-www-form-urlencoded; charset=utf-8",xhrFields:{withCredentials:!0},dataType:"json",success:function(t){200===t.code&&(e.data[e.currentIndex].contentList=t.data,e.render())},error:function(t){}})}},{key:"bindToggleFolder",value:function(){var t=this;$("#csdn-toolbar-collection").on("click",".toolbar-collection-left ul li",function(){$(this).index()!==t.currentIndex&&(t.currentIndex=$(this).index(),$(this).addClass("collection-folder-active").siblings().removeClass("collection-folder-active"),t.data[t.currentIndex].contentList?t.render():t.getCollectionContent(t.data[t.currentIndex].id))})}},{key:"render",value:function(){var t;this.finishInit?$("#csdn-toolbar-collection .toolbar-collection-right").empty().append(this.renderRight()):(t='\n          <div id="csdn-toolbar-collection" class="csdn-toolbar-plugin">\n            <div class="toolbar-collection-left csdn-toolbar-scroll-box">\n              <ul>'+this.renderLeft()+'</ul>\n            </div>\n            <div class="toolbar-collection-right">\n              '+this.renderRight()+'\n            </div>\n            <div class="csdn-toolbar-plugin-triangle"></div>\n          </div>\n        ',this.container.append(t),this.isHideOnce&&$("#csdn-toolbar-collection").hide(),this.bindToggleFolder())}},{key:"renderLeft",value:function(){for(var t="",e=0;e<this.data.length;e++)t+="\n          <li"+(e===this.currentIndex?' class="collection-folder-active"':"")+'>\n            <div class="toolbar-collection-folder-name">'+this.data[e].name+'</div>\n            <div class="toolbar-collection-folder-count">'+this.data[e].num+"</div>\n          </li>\n        ";return t}},{key:"renderRight",value:function(){if(this.data[this.currentIndex].contentList.length){for(var t="",e=0;e<this.data[this.currentIndex].contentList.length;e++){var n=this.data[this.currentIndex].contentList[e];t+='\n          <li>\n            <a href="'+n.url+'" target="_blank">\n              <span '+("其他"===n.source?'class="toolbar-collection-type toolbar-collection-otherType"':'class="toolbar-collection-type"')+">"+n.source+'</span>\n              <span class="toolbar-collection-title">'+n.title+"</span>\n            </a>\n          </li>\n        "}return'<ul class="csdn-toolbar-scroll-box">'+t+"</ul>"+(15<this.data[this.currentIndex].num?'<a href="https://i.csdn.net/#/user-center/collection-list?type=1&folder='+this.data[this.currentIndex].id+"&key="+this.currentIndex+'" class="toolbar-collection-more" target="_blank">查看更多<i></i></a>':"")}return'\n          <div class="toolbar-collection-empty">\n            <div>空空如也</div>\n          </div>\n        '}},{key:"show",value:function(){clearTimeout(this.timer),this.timer=setTimeout(function(){n&&$("#csdn-toolbar-collection").stop().fadeIn(100)},150)}},{key:"hide",value:function(){this.isHideOnce=!0,clearTimeout(this.timer),n||$("#csdn-toolbar-collection").stop().fadeOut(100)}}]),t);function t(){_classCallCheck(this,t),this.container=$(".toolbar-btn.toolbar-btn-collect"),this.data=[],this.currentIndex=0,this.isHideOnce=!1,this.finishInit=!1,this.timer=null,this.init()}!function(t){for(var e=document.cookie.split("; "),n=0;n<e.length;n++){var o=e[n].split("=");if(o[0],0,o[0]==t)return decodeURI(o[1])}}("UserName")||$(document).on("toolbarReady",function(){var t=null,e=$(".toolbar-btn.toolbar-btn-collect");e.on("mouseenter",function(){n=!0,t?t.show():t=new o}),e.on("mouseleave",function(){n=!1,t.hide()})})}(),function(){var e=(_createClass(n,[{key:"init",value:function(){this.initSliderScroll()}},{key:"initSliderScroll",value:function(){var e=this;this.sliderArray.forEach(function(t){$(".toolbar-subSlider-"+t.id).children().length&&e.sliderScroll(".toolbar-subSlider-"+t.id,$(".toolbar-subSlider-"+t.id).children().length,t.slider.time||4)})}},{key:"sliderScroll",value:function(t,e,n){var o=0,a=$(t);setInterval(function(){o===e-1?(o+=1,a.append(a.children().first().clone()),a.css({"margin-top":-48*o+"px",transition:"all 0.8s"})):e<=o?(o=0,a.css({"margin-top":"0px",transition:"none"}),a.children("a").last().remove()):(o+=1,a.css({"margin-top":-48*o+"px",transition:"all 0.8s"}))},1e3*n),a.on("transitionend",function(){e<=o&&(o=0,a.css({"margin-top":"0px",transition:"none"}),a.children("a").last().remove())})}}]),n);function n(t){_classCallCheck(this,n),this.sliderArray=t,this.init()}$(document).on("toolbarReady",function(){var t=window.csdn.toolbarData.menus.filter(function(t){return t.slider&&t.slider.list&&0<t.slider.list.length});t.length&&new e(t)})}(),function(){function a(t){for(var e=document.cookie.split("; "),n=0;n<e.length;n++){var o=e[n].split("=");if(o[0]==t)return decodeURIComponent(o[1])}}function n(t){t=0<arguments.length&&void 0!==t?t:window;return t&&$(t).height()}function o(){var t,e,n,o=!window.csdn||void 0===window.csdn.needShowLoginBoxAuto||!!window.csdn.needShowLoginBoxAuto;window.csdn&&window.csdn.loginBox&&o&&!a("needShowLoginBoxAuto")&&!a("UserName")&&(setTimeout(function(){try{window.csdn.loginBox.show()}catch(t){}},800),t="needShowLoginBoxAuto",e="1",n=60*i.hours*60*1e3,o=new Date,n?o.setTime(o.getTime()+n):o.setTime(o.getTime()+2592e6),document.cookie=t+"="+encodeURIComponent(e)+";expires="+o.toGMTString()+";domain=.csdn.net;path=/")}function r(t){return t&&t.some(function(t){return"*"===t||!!~location.href.indexOf(t)})}var i={whiteList:["loc-toolbar.csdn.net"],blackList:[],ratio:.5,hours:6};try{window.csdn=window.csdn||{},csdn.loginBox=csdn.loginBox||{},csdn.loginBox.loginBoxParams={isClosedBtn:!0}}catch(a){}$(document).on("toolbarReady",function(t){var e=window.csdn.toolbarData||{};(i=Object.assign({},i,e.loginBoxData))&&r(i.whiteList)&&!r(i.blackList)&&((n(document)-n(window))*i.ratio<100?o():$(window).on("scroll",function(t){$(this).scrollTop()>=(n(document)-n(window))*i.ratio&&o()}))})}(),window.csdn=window.csdn||{},window.csdn.middleJump=function(o){var t;(t=o)&&t.el&&t.url&&$(o.el).on("click","a",function(t){var e=$(this).attr("href")||"",n=-1<e.split("?")[0].indexOf(".csdn.net")?e:o.url+(-1<o.url.indexOf("?")?"&":"?")+"target="+encodeURIComponent(e);t.preventDefault(),e&&!/^#/g.test(e)&&window.open(n,"_blank")})},function(){var t,e;t=function(){var n=new CsdnNotification({top:"50px",right:"24px",time:6e3},function(t){var e;303===t.cmdId&&(t={spm:"3001.6004",dest:(e=t.body).url,extra:JSON.stringify(JSON.parse(e.report_data).data.extra)},e='<div class="notification-item" data-report-view=\''+JSON.stringify(t)+'\'>\n        <span class="notification-close"></span>\n        <div class="notification-info">'+e.description+'</div>\n        <div class="notification-bottom">\n          <div class="notification-title">'+e.popularityWord+'</div>\n          <a href="'+e.url+'" target="_blank" class="notification-options" data-report-click=\''+JSON.stringify(t)+'\' data-report-query="spm=3001.6004">'+e.jumpTag+"</a>\n        </div>\n        </div>",csdn.report&&csdn.report.viewCheck(),n.create(e))})},(e=document.createElement("script")).type="text/javascript",e.readyState?e.onreadystatechange=function(){"loaded"!=e.readyState&&"complete"!=e.readyState||(e.onreadystatechange=null,t())}:e.onload=function(){t()},e.src="https://g.csdnimg.cn/common/csdn-notification/csdn-notification.js",document.getElementsByTagName("head")[0].appendChild(e)}(),function(){function e(t){for(var e=document.cookie.split("; "),n=0;n<e.length;n++){var o=e[n].split("=");if(o[0]==t&&"UD"==t)return decodeURIComponent(o[1]);if(o[0]==t)return decodeURI(o[1])}}function n(){return e("UserName")}function o(){var t;this.data={},this.isVip=!!+(e("p_uid")||"").substr(1,1),this.isRender=!1,this.$box=$(".toolbar-btn.toolbar-btn-login"),this.nickName="--",this.userName=e("UserName"),this.avatar=(t=e("AU"))?"https://profile.csdnimg.cn/"+t.split("").join("/")+"/0_"+n().toLowerCase():"",this.list=[{name:"个人中心",url:"https://i.csdn.net/#/user-center/profile",report:{dest:"https://i.csdn.net/#/user-center/profile",spm:"3001.5111"},icon:"csdn-profile-icon-person",class:""},{name:"内容管理",url:"https://mp-new.csdn.net/mp_blog/manage/article?spm=1011.2124.3001.5298",report:{dest:"https://mp-new.csdn.net/mp_blog/manage/article?spm=1011.2124.3001.5298",spm:"3001.5448"},icon:"csdn-profile-icon-pages",class:""},{name:"学习平台",url:"https://edu.csdn.net/",report:{dest:"https://edu.csdn.net/",spm:"3001.5350"},icon:"csdn-profile-icon-study",class:""},{name:"我的订单",url:"https://mall.csdn.net/myorder",report:{dest:"https://mall.csdn.net/myorder",spm:"3001.5137"},icon:"csdn-profile-icon-order",class:""},{name:"我的钱包",url:"https://i.csdn.net/#/wallet/index",report:{dest:"https://i.csdn.net/#/wallet/index",spm:"3001.5136"},icon:"csdn-profile-icon-wallet",class:"pb-8 csdn-border-bottom"},{name:"签到抽奖",url:"https://i.csdn.net/#/uc/reward",report:{dest:"https://i.csdn.net/#/uc/reward",spm:"3001.5351"},icon:"csdn-profile-icon-draw",class:"pt-8 pb-8 csdn-border-bottom"},{name:"退出",url:"javascript:;",report:{spm:"3001.5139"},icon:"csdn-profile-icon-logout",class:"pt-8 csdn-profile-logout"}],this.render()}o.prototype.render=function(){var e=this,t=$('<div id="csdn-toolbar-profile" class="csdn-toolbar-plugin">\n            <div class="csdn-profile-top">\n              <a class="csdn-profile-avatar" data-report-click=\'{"spm": "3001.5343"}\' data-report-query="spm=3001.5343"  href="https://blog.csdn.net/'+e.userName+'"><img src="'+e.avatar+'"></a>\n              <p class="csdn-profile-nickName">'+e.nickName+'</p>\n              <a data-report-click=\'{"spm": "3001.5344"}\' data-report-query="spm=3001.5344" href="https://mall.csdn.net/vip" class="csdn-profile-no-vip"></a>\n            </div>\n            <div class="csdn-profile-mid">\n              <a data-report-click=\'{"spm": "3001.5347"}\' data-report-query="spm=3001.5347" href="https://blog.csdn.net/'+e.userName+'?type=sub&subType=fans"><i class="csdn-profile-fansCount">--</i>粉丝</a>\n              <a data-report-click=\'{"spm": "3001.5348"}\' data-report-query="spm=3001.5348" href="https://blog.csdn.net/'+e.userName+'?type=sub"><i class="csdn-profile-followCount">--</i>关注</a>\n              <a data-report-click=\'{"spm": "3001.5349"}\' data-report-query="spm=3001.5349" href="https://blog.csdn.net/'+e.userName+'"><i class="csdn-profile-likeCount">--</i>获赞</a>\n            </div>\n            <div class="csdn-profile-bottom">\n              <ul class="csdn-border-bottom">\n                '+e.list.map(function(t){return'<li class="'+t.class+'"><a href="'+t.url+'" '+(t.report?"data-report-click='"+JSON.stringify(t.report)+"'":"")+" "+(t.report?"data-report-query='spm="+t.report.spm+"'":"")+'><i class="csdn-profile-icon '+t.icon+'"></i>'+t.name+"</a></li>"}).join("")+"\n              </ul>\n            </div>\n          </div>");return this.$box.append(t),this.$tpl=t,this.$box.on("mouseenter",function(t){e.isEenter=!0,e.isRender&&e.showProfile()||e.getData()}).on("mouseleave",function(t){e.isEenter=!1,e.hideProfile()}),this.$tpl.find(".csdn-profile-logout").on("click",function(t){var e={mod:"popu_789"},n="https://passport.csdn.net/account/logout?from="+encodeURIComponent(window.location.href);e.dest=n,e.extend1="退出",window.location.href=n,csdn&&csdn.report&&csdn.report.reportClick(e)}),this},o.prototype.update=function(t){var e,n,o,a,r;t&&(e=t.fansCount,n=t.likeCount,o=t.favoritesCount,a=t.nickName,r=t.followCount,this.toggleVip(t),this.isRender=!0,$(".csdn-profile-fansCount").text(e||"--"),$(".csdn-profile-likeCount").text(n||"--"),$(".csdn-profile-favoritesCount").text(o||"--"),$(".csdn-profile-nickName").text(a||"--"),$(".csdn-profile-followCount").text(r||"--"))},o.prototype.toggleVip=function(t){this.isVip=1===t.vip,this.isVip&&$(".csdn-profile-no-vip").addClass("csdn-profile-vip").removeClass("csdn-profile-no-vip").attr("href","https://www.csdn.net/vip")},o.prototype.showProfile=function(){var t=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){t.isEenter&&($(".csdn-toolbar-plugin").hide(),t.$box.addClass("toolbar-btn-login-action"),t.$tpl.stop().fadeIn(200))},150)},o.prototype.hideProfile=function(){this.timer&&clearTimeout(this.timer),this.isEenter||(this.$box.removeClass("toolbar-btn-login-action"),this.$tpl.stop().fadeOut(100))},o.prototype.getData=function(){var e=this;if(!e.isRender){var t=window.csdn.toolbar.profileData;if(t)return e.update(t),void e.showProfile();$.ajax({url:"https://www.csdn.net/community/toolbar-api/v1/get-user-info",type:"get",dataType:"JSON",contentType:"application/x-www-form-urlencoded; charset=utf-8",xhrFields:{withCredentials:!0},success:function(t){200===t.code&&(e.update(t.data),window.csdn.toolbar.profileData=t.data),e.showProfile()},error:function(t){}})}},$(document).on("toolbarReady",function(t){setTimeout(function(){n()&&new o},200)})}(),function(){function n(){this.el=null,this.host="https://mp-luckydraw.csdn.net/",this.dev=!1,this.type=["redPacket","coupon","common-coupon"],this.renderCss()}n.prototype.open=function(t){var e;t&&(e=this,$.ajax({url:e.host+"/luckydraw/api/timesWin",type:"post",data:JSON.stringify({lotteryId:t,username:function(t){for(var e=document.cookie.split("; "),n=0;n<e.length;n++){var o=e[n].split("=");if(o[0]==t&&"UD"==t)return decodeURIComponent(o[1]);if(o[0]==t)return decodeURI(o[1])}}("UserName")}),contentType:"application/json",xhrFields:{withCredentials:!0},dataType:"json",success:function(t){200===(t=e.dev?{code:200,data:{prizeId:"123",name:e.type[parseInt(99*Math.random())%3],url:"",money:(10*Math.random()).toFixed(2)}}:t).code&&t.data?e.clear().render(t.data):e.clear().render()}}))},n.prototype.render=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=this,n="csdn-redpack-sorry";t.prizeId&&"common-coupon"===t.name?n="csdn-redpack-common-coupon":t.prizeId&&"coupon"===t.name?n="csdn-redpack-coupon":!t.prizeId||"redPacket"!==t.name&&"randomRedPacket"!==t.name||(n="csdn-redpack-cash"),e.el=$('<div id="csdn-redpack-barrage" class="csdn-redpack-barrage csdn-redpack-container">\n                  <div class="csdn-redpack-result '+n+'">\n                    <a class="csdn-redpack-result-link" href="'+(t.url||"javascript:;")+'" '+(t.url?'target="_blank"':"")+'></a>\n                    <em class="csdn-redpack-result-close"></em>\n                    '+("csdn-redpack-sorry"!==n?"<span>"+t.money+"</span>":"")+"\n                    "+("csdn-redpack-common-coupon"===n||"csdn-redpack-coupon"===n?"<i>"+t.money+"</i>":"")+"\n                  </div>\n              </div>"),e.el.find(".csdn-redpack-result-close").on("click",function(t){e.clear()}),e.el.find(".csdn-redpack-result-link").on("click",function(t){e.clear()}),$("body").append(e.el)},n.prototype.renderCss=function(){var t=$('<style type="text/css">\n                      #csdn-redpack-barrage {\n                        position: fixed;\n                        width: 100%;\n                        height: 100%;\n                        background: rgba(0, 0, 0, 0.74);\n                        overflow: hidden;\n                        top: 0;\n                        left: 0;\n                        z-index: 2147483647;\n                      }\n                      #csdn-redpack-barrage * {\n                        margin: 0;\n                        padding: 0;\n                        -webkit-box-sizing: border-box;\n                        box-sizing: border-box;\n                        -webkit-user-select: none;\n                        -moz-user-select: none;\n                        -ms-user-select: none;\n                        user-select: none;\n                      }\n                      #csdn-redpack-barrage a {\n                        text-decoration: none;\n                      }\n                      #csdn-redpack-barrage .csdn-redpack-result {\n                        width: 950px;\n                        height: 720px;\n                        position: absolute;\n                        top: 50%;\n                        left: 50%;\n                        z-index: 999;\n                        -webkit-transform: translate(-50%, -45%);\n                        transform: translate(-50%, -45%);\n                        background-size: contain;\n                      }\n                      #csdn-redpack-barrage .csdn-redpack-result .csdn-redpack-result-close {\n                        display: block;\n                        position: absolute;\n                        width: 50px;\n                        height: 50px;\n                        z-index: 99999;\n                        top: 18px;\n                        right: 300px;\n                        cursor: pointer;\n                      }\n                      #csdn-redpack-barrage .csdn-redpack-result .csdn-redpack-result-link {\n                        display: block;\n                        position: absolute;\n                        width: 188px;\n                        height: 50px;\n                        z-index: 99999;\n                        left: 50%;\n                        bottom: 276px;\n                        cursor: pointer;\n                        margin-left: -84px;\n                      }\n                      #csdn-redpack-barrage .csdn-redpack-result.csdn-redpack-sorry {\n                        background: url("https://img-home.csdnimg.cn/images/20201110020632.png") no-repeat center center;\n                        background-size: contain;\n                      }\n                      #csdn-redpack-barrage .csdn-redpack-result.csdn-redpack-cash {\n                        background: url("https://img-home.csdnimg.cn/images/20201110020622.png") no-repeat center center;\n                        background-size: contain;\n                      }\n                      #csdn-redpack-barrage .csdn-redpack-result.csdn-redpack-cash span {\n                        position: absolute;\n                        display: block;\n                        text-align: center;\n                        min-width: 100px;\n                        font-size: 40px;\n                        font-weight: 900;\n                        height: 56px;\n                        line-height: 56px;\n                        font-family: Arial-Black, Arial;\n                        color: #FE1826;\n                        text-shadow: 0px 2px 12px rgba(234, 202, 105, 0.39);\n                        left: 50%;\n                        -webkit-transform: translate(-40%, 0);\n                        transform: translate(-40%, 0);\n                        top: 135px;\n                      }\n                      #csdn-redpack-barrage .csdn-redpack-result.csdn-redpack-cash .csdn-redpack-result-link {\n                        bottom: 316px;\n                      }\n                      #csdn-redpack-barrage .csdn-redpack-result.csdn-redpack-coupon {\n                        background: url("https://img-home.csdnimg.cn/images/20201110020628.png") no-repeat center center;\n                        background-size: contain;\n                      }\n                      #csdn-redpack-barrage .csdn-redpack-result.csdn-redpack-common-coupon {\n                        background: url("https://img-home.csdnimg.cn/images/20201110020625.png") no-repeat center center;\n                        background-size: contain;\n                      }\n                      #csdn-redpack-barrage .csdn-redpack-result.csdn-redpack-coupon span,\n                      #csdn-redpack-barrage .csdn-redpack-result.csdn-redpack-common-coupon span,\n                      #csdn-redpack-barrage .csdn-redpack-result.csdn-redpack-coupon i,\n                      #csdn-redpack-barrage .csdn-redpack-result.csdn-redpack-common-coupon i {\n                        min-width: 90px;\n                        font-size: 24px;\n                        font-weight: 900;\n                        font-family: Arial-Black, Arial;\n                        color: #FE1826;\n                        text-shadow: 0px 2px 12px rgba(234, 202, 105, 0.39);\n                        position: absolute;\n                        top: 318px;\n                        left: 346px;\n                        text-align: center;\n                        line-height: 34px;\n                        height: 34px;\n                      }\n                      #csdn-redpack-barrage .csdn-redpack-result.csdn-redpack-coupon i,\n                      #csdn-redpack-barrage .csdn-redpack-result.csdn-redpack-common-coupon i {\n                        top: 303px;\n                        left: 516px;\n                        text-align: center;\n                        font-style: normal;\n                      }\n                  </style>');document.head.insertBefore($(t)[0],document.head.getElementsByTagName("title")[0])},n.prototype.clear=function(){return this.el=null,this.dev=!1,$(".csdn-redpack-barrage").remove(),this},n.prototype.test=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:243;this.dev=1<arguments.length&&void 0!==arguments[1]&&arguments[1],this.host="https://test-luckydraw.csdn.net/",this.open(t)},$(document).on("toolbarReady",function(t){var e=(window.csdn.toolbarData||{}).barrageRedpackData;e&&e.whiteList&&e.whiteList.some(function(t){return"*"===t||!!~location.href.indexOf(t)})&&(window.csdn.barrageRedpack=new n)})}(),function(){var r={clickUrl:"javascript:void(0);",imgUrl:"https://g.csdnimg.cn/common/redpack/images/redpaceAdvert.png",backgroundColor:"#FFCEA6"};window.csdn.toolbar.initRedpackAdvert=function(t,e,n){var o,a;"init"===t?e&&(e=Object.assign({},r,e),o=n,n="width:100%; height:100%; background-image: url("+e.imgUrl+"); background-size: auto 80px;background-repeat: no-repeat; background-position: center center;",(a=$('<div class="toolbar-redpack-advert">\n            <a href="'+e.clickUrl+'" style="background: '+e.backgroundColor+';" '+(e.AdvertClickSpm?'data-report-click=\'{"spm":'+JSON.stringify(e.AdvertClickSpm)+"}'":"")+' class="toolbar-redpack-advert-default"><div style="'+n+'"></div></a>\n            <span class="toolbar-redpack-adver-btn" '+(e.CloseClickSpm?'data-report-click=\'{"spm":'+JSON.stringify(e.CloseClickSpm)+"}'":"")+" ></span>\n          </div>")).find(".toolbar-redpack-adver-btn").click(function(t){a.remove()}),a.find(".toolbar-redpack-advert-default").click(function(t){o&&o()}),$("#csdn-toolbar").prepend(a),e.viewSpm&&csdn&&csdn.report&&csdn.report.reportView({spm:e.viewSpm})):"close"===t&&$("body").find("#csdn-toolbar .toolbar-redpack-advert").remove()}}(),function(){function n(){var t,e,n,o;n="https://g.csdnimg.cn/common/redpack/redpack.css",(o=document.createElement("link")).rel="stylesheet",o.type="text/css",o.href=n,document.getElementsByTagName("head")[0].appendChild(o),o="https://g.csdnimg.cn/common/redpack/redpack.js",(e=document.createElement("script")).type="text/javascript",e.readyState?e.onreadystatechange=function(){"loaded"!=e.readyState&&"complete"!=e.readyState||(e.onreadystatechange=null,t&&t())}:e.onload=function(){t&&t()},e.src=o,document.getElementsByTagName("head")[0].appendChild(e)}$(document).on("toolbarReady",function(t){var e=(window.csdn.toolbarData||{}).redpackData;e&&e.whiteList&&e.whiteList.some(function(t){return"*"===t||!!~location.href.indexOf(t)})&&n()})}(),function(){function e(){return function(t){for(var e=document.cookie.split("; "),n=0;n<e.length;n++){var o=e[n].split("=");if(o[0]==t&&"UD"==t)return decodeURIComponent(o[1]);if(o[0]==t)return decodeURI(o[1])}}("UserName")}function n(){this.isVip=!1,this.timer=null,this.box=null,this.isRender=!1,this.bindEvent()}n.prototype.getProfileData=function(e){var n=this;$.ajax({url:"https://www.csdn.net/community/toolbar-api/v1/get-user-info",type:"get",dataType:"JSON",contentType:"application/x-www-form-urlencoded; charset=utf-8",xhrFields:{withCredentials:!0},success:function(t){200===t.code&&(e&&e.call(n,t.data),window.csdn.toolbar.profileData=t.data)},error:function(t){}})},n.prototype.renderVip=function(t){var e=1===t.vip,n="https://mall.csdn.net/vip",o="https://marketing.csdn.net/p/2f3b07d4dc2f2d2b92c7a0ad8cd1dc93?utm_source=CSDNshop_vipcenter",a=1===t.vip?"3001.5402":"3001.5400",t=1===t.vip?"3001.5403":"3001.5401",t=$('<div id="csdn-plugin-vip">\n                        <div class="csdn-plugin-vip-header">\n                            会员特权\n                        </div>\n                        <div class="csdn-plugin-vip-body">\n                            <a href="https://download.csdn.net/?utm_source=vip_xz_862637798_yy"><i class="csdn-plugin-vip-icon csdn-plugin-vip-icon-download"></i><br/>资源下载</a>\n                            <a href="https://edu.csdn.net/course?channelType=3&utm_source=vip_jpk_862637798_yy"><i class="csdn-plugin-vip-icon csdn-plugin-vip-icon-class"></i><br/>千节精品课</a>\n                            <a href="https://book.csdn.net/?utm_source=vip_dzs_862637798_yy"><i class="csdn-plugin-vip-icon csdn-plugin-vip-icon-book"></i><br/>千本电子书</a>\n                            <a href="https://so.csdn.net/so/search?q=&t=vip&s=0&pnt=-1&ct=100&utm_source=vip_jswz_862637798_yy"><i class="csdn-plugin-vip-icon csdn-plugin-vip-icon-pages"></i><br/>VIP技术文章</a>\n                        </div>\n                        <div class="csdn-plugin-vip-footer">\n                            <a data-report-click=\'{"spm": "'+a+'"}\' data-report-query="spm='+a+'" class="csdn-plugin-vip-footer-btn" href="'+(e?o:n)+'">\n                              '+(e?"去使用权益":"开通会员")+'\n                            </a>\n                            <a data-report-click=\'{"spm": "'+t+'"}\' data-report-query="spm='+t+'" class="csdn-plugin-vip-footer-link" href="'+(e?n:o)+'">\n                              '+(e?"立即续费享8折优惠":"查看完整会员权益")+"<i></i>\n                            </a>\n                        </div>\n                    </div>"),n=$(".toolbar-btn-vip").find(">a");$(".toolbar-btn-vip").append(t),e&&(n.attr("href",o),n.attr("data-report-click",'{"spm": "3001.5399"}'),n.attr("data-report-query","spm=3001.5399")),this.box=t,this.showVip(),this.isRender=!0},n.prototype.showVip=function(){var t=this;clearTimeout(t.timer),t.timer=setTimeout(function(){t.isEnter&&t.box&&t.box.stop().fadeIn(100)},150)},n.prototype.hideVip=function(){clearTimeout(this.timer),this.isEnter||this.box&&this.box.stop().fadeOut(100)},n.prototype.init=function(){var t=window.csdn.toolbar&&window.csdn.toolbar.profileData;t?this.renderVip(t):this.getProfileData(this.renderVip)},n.prototype.bindEvent=function(){var e=this;$(".toolbar-btn-vip").on("mouseenter",function(t){e.isEnter=!0,e.isRender?e.showVip():e.init()}).on("mouseleave",function(t){e.isEnter=!1,e.hideVip()})},$(document).on("toolbarReady",function(t){setTimeout(function(){e()&&new n},200)})}(),function(){var n=!1,o=(_createClass(t,[{key:"init",value:function(){this.render(),this.getActivityList()}},{key:"getActivityList",value:function(){var e=this;$.ajax({url:"https://www.csdn.net/community/toolbar-api/v1/get-activity-list",type:"get",contentType:"application/x-www-form-urlencoded; charset=utf-8",xhrFields:{withCredentials:!0},dataType:"json",success:function(t){200===t.code&&(e.activityList=t.data.list,e.activityList.length&&e.insertActivity())},error:function(t){}})}},{key:"render",value:function(){this.container.append('\n        <div id="csdn-toolbar-write" class="csdn-toolbar-plugin">\n          <div class="csdn-toolbar-plugin-triangle"></div>\n          <ul class="csdn-toolbar-write-box">\n            <li class="csdn-toolbar-write-box-blog">\n              <a href="https://mp.csdn.net/edit" target="_blank" data-report-click=\'{"spm":"3001.5352"}\' data-report-query="spm=3001.5352">\n                <i class="csdn-toolbar-write-icon"></i>\n                <span>写文章</span>\n              </a>\n            </li>\n            <li class="csdn-toolbar-write-box-blink">\n              <a href="https://blink.csdn.net" target="_blank" data-report-click=\'{"spm":"3001.5353"}\' data-report-query="spm=3001.5353">\n                <i class="csdn-toolbar-write-icon"></i>\n                <span>发Blink</span>\n              </a>\n            </li>\n            <li class="csdn-toolbar-write-box-ask">\n              <a href="https://ask.csdn.net/?word=" target="_blank" data-report-click=\'{"spm":"3001.5354"}\' data-report-query="spm=3001.5354">\n                <i class="csdn-toolbar-write-icon"></i>\n                <span>提问题</span>\n              </a>\n            </li>\n            <li class="csdn-toolbar-write-box-upload">\n              <a href="https://mp-new.csdn.net/mp_download/creation/uploadResources" target="_blank" data-report-click=\'{"spm":"3001.5355"}\' data-report-query="spm=3001.5355">\n                <i class="csdn-toolbar-write-icon"></i>\n                <span>传资源</span>\n              </a>\n            </li>\n            <li class="csdn-toolbar-write-box-code">\n              <a href="https://codechina.csdn.net/explore" target="_blank" data-report-click=\'{"spm":"3001.5356"}\' data-report-query="spm=3001.5356">\n                <i class="csdn-toolbar-write-icon"></i>\n                <span>建项目</span>\n              </a>\n            </li>\n          </ul>\n        </div>\n      ')}},{key:"insertActivity",value:function(){for(var t="",e=0;e<this.activityList.length;e++)t+='\n          <li>\n            <a href="'+this.activityList[e].url+'" target="_blank">#'+this.activityList[e].name+"</a>\n          </li>\n        ";this.container.find("#csdn-toolbar-write").append('\n        <div class="csdn-toolbar-write-activity">\n          <div class="csdn-toolbar-write-activity-head">创作活动</div>\n          <ul>'+t+'</ul>\n          <div class="toolbar-write-activity-more">\n            <a href="https://mp-new.csdn.net/mp_blog/manage/creative?spm=1011.2124.3001.5311" target="_blank" data-report-click=\'{"spm":"3001.5358"}\' data-report-query="spm=3001.5358">查看更多<i></i></a>\n          </div>\n        </div>\n      ')}},{key:"show",value:function(){clearTimeout(this.timer),this.timer=setTimeout(function(){n&&$("#csdn-toolbar-write").stop().fadeIn(100)},150)}},{key:"hide",value:function(){clearTimeout(this.timer),n||$("#csdn-toolbar-write").stop().fadeOut(100)}}]),t);function t(){_classCallCheck(this,t),this.container=$(".toolbar-btn.toolbar-btn-write"),this.activityList=[],this.init()}$(document).on("toolbarReady",function(){var t=null,e=$(".toolbar-btn.toolbar-btn-write");e.on("mouseenter",function(){n=!0,t?t.show():t=new o}),e.on("mouseleave",function(){n=!1,t.hide()})})}();
