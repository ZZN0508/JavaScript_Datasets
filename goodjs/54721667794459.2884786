!function(n){var r={};function o(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=n,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/sdk/",o(o.s=2)}([function(n,e,t){"use strict";n.exports.get=function(e){if(document.cookie&&document.cookie.length){for(var t,n=document.cookie.split(";"),r={},o=0,i=n.length;o<i;o++)r[(t=n[o].replace(/^(\s|\u00A0)+/g,"").split("="))[0]]=decodeURIComponent(t[1]);return e?r[e]:r}},n.exports.set=function(e,t,n){if(void 0!==e&&void 0!==t){var r=(n=n||{}).expires||{};"number"==typeof n.expires&&(r=new Date).setTime(r.getTime()+24*n.expires*60*60*1e3);t=e+"="+encodeURIComponent(t);return t+=r.toUTCString?"; expires="+r.toUTCString():"",t+=n.path?"; path="+n.path:"",t+=n.domain?"; domain="+n.domain:"",t+=n.secure?"; secure":"",document.cookie=t}},n.exports.remove=function(e,t){return(t=t||{}).expires=-1,n.exports.set(e,"",t)}},function(e,t){e.exports={end_of_article:{weight:30,maxPerMonth:35},share_social_network:{weight:60,maxPerMonth:3},video_finished:{weight:30,maxPerMonth:5},video_share:{weight:1,maxPerMonth:60},comment_sent:{weight:1,maxPerMonth:50},comment_reply:{weight:1,maxPerMonth:50},quiz_finished:{weight:20,maxPerMonth:3},quiz_share:{weight:15,maxPerMonth:3},save_page:{weight:20,maxPerMonth:3},review_place_sent:{weight:60,maxPerMonth:3},review_event_sent:{weight:60,maxPerMonth:3},rating_place_sent:{weight:40,maxPerMonth:3},rating_event_sent:{weight:30,maxPerMonth:3},buy_tickets_cinema:{weight:250,maxPerMonth:2},buy_tickets_theatre:{weight:600,maxPerMonth:2},buy_tickets_concert:{weight:350,maxPerMonth:2},buy_tickets_sport:{weight:500,maxPerMonth:2},recipe_like:{weight:1,maxPerMonth:50},author_recipe_subscription:{weight:10,maxPerMonth:20},add_recipe:{weight:150,maxPerMonth:3},add_blog_article_app:{weight:100,maxPerMonth:5},add_blog_article:{weight:100,maxPerMonth:5},repost_article:{weight:100,maxPerMonth:5},article_like:{weight:1,maxPerMonth:50},comment_like:{weight:1,maxPerMonth:50}}},function(e,t,n){"use strict";n.r(t),n.d(t,"registerSdk",function(){return a});var r,u=function(t){var e,n;r?t(null,r):(window.ramblerIdHelper||(window.ramblerIdHelper=[],e=function(e){e&&t(e)},(n=document.createElement("script")).src="https://id.rambler.ru/rambler-id-helper/auth_events.js",n.onload=function(){e(),document.body&&document.body.removeChild(n)},n.onerror=function(){e(new Error("script does not loaded"))},document.body&&document.body.appendChild(n)),window.ramblerIdHelper.push(function(){r=window.ramblerIdHelper,t(null,r)}))},o=n(0),c=function(e){var t,n=null;try{n=JSON.parse(null!==(t=window.localStorage.getItem(e))&&void 0!==t?t:"")}catch(e){}return n},d=function(e,t){try{window.localStorage.setItem(e,JSON.stringify(t))}catch(e){}},t=n(1),s=n.n(t),p=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<n;t++)for(var i=arguments[t],a=0,l=i.length;a<l;a++,o++)r[o]=i[a];return r},i=1===c("loyaltyStageApi")?"https://loyalty-stage.rambler-co.ru":"https://loyalty.rambler-co.ru",h=Date.now()-2592e6,m=i+"/events",f=function(){var e=null!==(e=null===(e=function(){var e=null;try{e=o.get()}catch(e){}return e}())||void 0===e?void 0:e.ruid)&&void 0!==e?e:c("loyalty_uid");return e||(e=(+new Date/1e3).toString()+"-"+Math.round(2147483647*Math.random()).toString(),d("loyalty_uid",e)),e},v=function(e,t){var n=new XMLHttpRequest,e=JSON.stringify({params:{chainId:e}});n.open("post",i+"/api/v3/loypro/getUserStatus",!0),n.setRequestHeader("Content-Type","application/json"),n.onreadystatechange=function(){var e;4===n.readyState&&200===n.status&&(e=JSON.parse(n.responseText),t(Boolean(null===(e=null==e?void 0:e.result)||void 0===e?void 0:e.partisipant)))},n.onerror=function(){t(!1)},n.send(e)},y=function(){return(y=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function g(n,r){var e,t,a;if("setup"!==n){var o,i=r.project,l=r.userId;if(void 0===l)return o=function(e,t){t=null!==(t=null==t?void 0:t.rccid)&&void 0!==t?t:null;g(n,y(y({},r),{userId:t}))},void u(function(e,t){e?o():t.getDefaultChainId(function(e,t){o(0,e)})});i={type:l?"userEvent":"noauthEvent",eventType:n,chainId:null!=l?l:f(),project:i,timestamp:Date.now(),eventReferer:null===(i=window.location.href)||void 0===i?void 0:i.slice(0,200)};("userEvent"===(a=i).type?v:function(e,t){return t(!1)})(a.chainId,function(e){var t,n,r;e||(i=null!==(n=c("loyalty_noauth"))&&void 0!==n?n:{},(t=s.a[a.eventType])&&((n=null!==(e=null===(r=i.events)||void 0===r?void 0:r.filter(function(e){return e.timestamp>h}))&&void 0!==e?e:[]).filter(function(e){return e.eventType===a.eventType}).length<t.maxPerMonth&&(r=a.eventType,o=a.timestamp,i.score=null!==(e=i.score)&&void 0!==e?e:0,i.score+=t.weight,i.events=p(n,[{eventType:r,timestamp:o}])),d("loyalty_noauth",i)));var o=new XMLHttpRequest,i=encodeURIComponent(JSON.stringify([a])),i=m+"?data="+i;o.open("get",i,!0),o.setRequestHeader("content-type","text/plain"),o.send(null)}),l&&(t={event_type:(e=i).eventType,ts:Date.now(),chain_id:e.chainId,project_name:e.project},e="https://kraken.rambler.ru/lp_endpoint?"+Object.keys(t).map(function(e){return e+"="+encodeURIComponent(t[e])}).join("&"),(new Image).src=e),null===(e=null===(l=window.RamblerLoyalty)||void 0===l?void 0:l.sendEvent)||void 0===e||e.call(l,i)}else null!=r&&r.apiUrl&&(m=r.apiUrl)}var a=function(){var e;window.loyalty&&"number"!=typeof window.loyalty.l||(e=(null===(e=window.loyalty)||void 0===e?void 0:e.q)||[],window.loyalty=g,e.forEach(function(e){return g(e[0],e[1])}))};document.body?a():document.addEventListener("DOMContentLoaded",a,!1)}]);
