import{S as s,i as a,s as t,e,c as o,a as l,d as c,b as i,f as n,K as r,T as d,z as h,t as f,k as u,g as m,n as v,E as g,F as p,h as k}from"./vendor-808bba56.js";import{a as w}from"./paths-2c73d5fe.js";import{g as y}from"./decompress-ca00fa94.js";import{a as S,g as b}from"./godzown-e5d5fadc.js";function j(s){let a,t,r,d,h,w,y,S,b,j,z,_,I,P=s[0].name+"",U=s[0].state+"",$=5==(0==s[2].level||s[2].level)?"an":"a",x=s[2].risk+"";function N(s,a){return s[1]?E:A}let D=N(s),V=D(s);return{c(){a=e("a"),t=e("p"),r=f(P),d=f(", "),h=f(U),w=f(", is at "),y=f($),S=u(),b=e("span"),j=f(x),z=f(" risk"),_=f(". Your risk is\n\t\t\t\tminimal if you are vaccinated."),V.c(),this.h()},l(s){a=o(s,"A",{href:!0,class:!0});var e=l(a);t=o(e,"P",{class:!0});var i=l(t);r=m(i,P),d=m(i,", "),h=m(i,U),w=m(i,", is at "),y=m(i,$),S=v(i),b=o(i,"SPAN",{class:!0,style:!0});var n=l(b);j=m(n,x),z=m(n," risk"),n.forEach(c),_=m(i,". Your risk is\n\t\t\t\tminimal if you are vaccinated."),V.l(i),i.forEach(c),e.forEach(c),this.h()},h(){i(b,"class","risk-level svelte-r2kzvs"),g(b,"color",s[2].background_color),i(t,"class","svelte-r2kzvs"),i(a,"href",I=s[0]&&s[0].url),i(a,"class","svelte-r2kzvs")},m(s,e){n(s,a,e),p(a,t),p(t,r),p(t,d),p(t,h),p(t,w),p(t,y),p(t,S),p(t,b),p(b,j),p(b,z),p(t,_),V.m(t,null)},p(s,e){1&e&&P!==(P=s[0].name+"")&&k(r,P),1&e&&U!==(U=s[0].state+"")&&k(h,U),4&e&&$!==($=5==(0==s[2].level||s[2].level)?"an":"a")&&k(y,$),4&e&&x!==(x=s[2].risk+"")&&k(j,x),4&e&&g(b,"color",s[2].background_color),D!==(D=N(s))&&(V.d(1),V=D(s),V&&(V.c(),V.m(t,null))),1&e&&I!==(I=s[0]&&s[0].url)&&i(a,"href",I)},d(s){s&&c(a),V.d()}}}function z(s){let a,t,d,h,k;return{c(){a=e("div"),t=e("div"),d=u(),h=e("span"),k=f("Loading"),this.h()},l(s){a=o(s,"DIV",{class:!0});var e=l(a);t=o(e,"DIV",{class:!0,style:!0}),l(t).forEach(c),d=v(e),h=o(e,"SPAN",{class:!0});var i=l(h);k=m(i,"Loading"),i.forEach(c),e.forEach(c),this.h()},h(){i(t,"class","icon-loading svelte-r2kzvs"),g(t,"background-image","url('"+w+"/images/icon-loading.png')"),i(h,"class","loading-text svelte-r2kzvs"),i(a,"class","loading-wrapper svelte-r2kzvs")},m(s,e){n(s,a,e),p(a,t),p(a,d),p(a,h),p(h,k)},p:r,d(s){s&&c(a)}}}function A(s){let a,t;return{c(){a=e("span"),t=f("See whatâ€™s safe to do â€º"),this.h()},l(s){a=o(s,"SPAN",{class:!0});var e=l(a);t=m(e,"See whatâ€™s safe to do â€º"),e.forEach(c),this.h()},h(){i(a,"class","see-more-detail svelte-r2kzvs")},m(s,e){n(s,a,e),p(a,t)},d(s){s&&c(a)}}}function E(s){let a,t,r,d;return{c(){a=f("Â "),t=e("span"),r=f("See whatâ€™s safe to do.Â "),d=f("â€º"),this.h()},l(s){a=m(s,"Â "),t=o(s,"SPAN",{class:!0});var e=l(t);r=m(e,"See whatâ€™s safe to do.Â "),e.forEach(c),d=m(s,"â€º"),this.h()},h(){i(t,"class","mobile-only svelte-r2kzvs")},m(s,e){n(s,a,e),n(s,t,e),p(t,r),n(s,d,e)},d(s){s&&c(a),s&&c(t),s&&c(d)}}}function _(s){let a;function t(s,a){return s[3]?z:s[0]?j:void 0}let d=t(s),h=d&&d(s);return{c(){a=e("div"),h&&h.c(),this.h()},l(s){a=o(s,"DIV",{class:!0});var t=l(a);h&&h.l(t),t.forEach(c),this.h()},h(){i(a,"class","risk-in-your-area")},m(s,t){n(s,a,t),h&&h.m(a,null)},p(s,[e]){d===(d=t(s))&&h?h.p(s,e):(h&&h.d(1),h=d&&d(s),h&&(h.c(),h.m(a,null)))},i:r,o:r,d(s){s&&c(a),h&&h.d()}}}function I(s,a,t){let{county:e}=a,{is_embed:o}=a;const l=d();let c=null,i=!0;return h((async()=>{let s;try{s=window.localStorage.getItem("default-county")}catch(a){console.error("localStorage.getItem failed",a)}if(!s){S();const a=await b("2020-03-16-coronavirus-maps").catch((()=>null));if(a&&-1!==Object.keys(a).indexOf("selected")){let t=a.selected.find((s=>s.split("USA-").length>0&&5===s.split("USA-")[1].length));t&&(s=t.split("USA-")[1])}}if(!s)try{const a=await fetch("https://www.nytimes.com/svc/int/functions/geoip");if(a.ok){const{data:t}=await a.json();if(t.fips_geoid){s=t.fips_geoid;["36005","36047","36061","36081","36085"].includes(s)&&(s="36998")}}}catch(o){}if(s){try{window.localStorage.setItem("default-county",s)}catch(a){console.error("localStorage.setItem failed",a)}const o=(await fetch("https://static01.nyt.com/newsgraphics/2021/coronavirus-tracking/data/usa-risk-levels.json").then((s=>s.json()))).counties[`USA-${s}`];if(o){t(2,c=y(o.risk_level));const a=await fetch(`${w}/data/counties.json`).then((s=>s.json()));t(0,e=a.find((a=>a.geoid===`USA-${s}`))),"11001"===s&&t(0,e.name="Washington",e)}}t(3,i=!1),l("data-loaded")})),s.$$set=s=>{"county"in s&&t(0,e=s.county),"is_embed"in s&&t(1,o=s.is_embed)},[e,o,c,i]}class P extends s{constructor(s){super(),a(this,s,I,_,t,{county:0,is_embed:1})}}export{P as R};