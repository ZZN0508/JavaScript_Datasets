!function(e){"use strict";var q="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}var n=t(function(e,t){function u(e){return"function"==typeof e}function n(){var e=setTimeout;return function(){return e(i,1)}}function i(){for(var e=0;e<w;e+=2)(0,R[e])(R[e+1]),R[e]=void 0,R[e+1]=void 0;w=0}function a(e,t){var n=this,i=new this.constructor(s);void 0===i[D]&&b(i);var r,o=n._;return o?(r=arguments[o-1],S(function(){return g(o,i,r,n.k)})):p(n,i,e,t),i}function c(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(s);return f(t,e),t}function s(){}function l(e){try{return e.then}catch(e){return P.error=e,P}}function d(e,t,n){var r,o,i,s;t.constructor===e.constructor&&n===a&&t.constructor.resolve===c?(i=e,1===(s=t)._?h(i,s.k):2===s._?v(i,s.k):p(s,void 0,function(e){return f(i,e)},function(e){return v(i,e)})):n===P?(v(e,P.error),P.error=null):void 0!==n&&u(n)?(r=t,o=n,S(function(n){var i=!1,e=function(e,t){try{e.call(t,function(e){i||(i=!0,(r!==e?f:h)(n,e))},function(e){i||(i=!0,v(n,e))})}catch(e){return e}}(o,r,n.T);!i&&e&&(i=!0,v(n,e))},e)):h(e,t)}function f(e,t){var n;e===t?v(e,new TypeError("You cannot resolve a promise with itself")):(n=typeof t,null===t||"object"!=n&&"function"!=n?h(e,t):d(e,t,l(t)))}function r(e){e.S&&e.S(e.k),m(e)}function h(e,t){void 0===e._&&(e.k=t,e._=1,0!==e.A.length&&S(m,e))}function v(e,t){void 0===e._&&(e._=2,e.k=t,S(r,e))}function p(e,t,n,i){var r=e.A,o=r.length;e.S=null,r[o]=t,r[o+1]=n,r[o+2]=i,0===o&&e._&&S(m,e)}function m(e){var t=e.A,n=e._;if(0!==t.length){for(var i,r=void 0,o=e.k,s=0;s<t.length;s+=3)i=t[s],r=t[s+n],i?g(n,i,r,o):r(o);e.A.length=0}}function g(e,t,n,i){var r=u(n),o=void 0,s=void 0,a=void 0,c=void 0;if(r){if((o=function(e,t){try{return e(t)}catch(e){return P.error=e,P}}(n,i))===P?(c=!0,s=o.error,o.error=null):a=!0,t===o)return void v(t,new TypeError("A promises callback cannot return that same promise."))}else o=i,a=!0;void 0!==t._||(r&&a?f(t,o):c?v(t,s):1===e?h(t,o):2===e&&v(t,o))}function b(e){e[D]=M++,e._=void 0,e.k=void 0,e.A=[]}function o(e){this[D]=M++,this.k=this._=void 0,this.A=[],s!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof o?function(t,e){try{e(function(e){f(t,e)},function(e){v(t,e)})}catch(e){v(t,e)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}function y(e,t){this.M=e,this.promise=new e(s),this.promise[D]||b(this.promise),E(t)?(this.length=t.length,this.C=t.length,this.k=new Array(this.length),0===this.length?h(this.promise,this.k):(this.length=this.length||0,this.R(t),0===this.C&&h(this.promise,this.k))):v(this.promise,new Error("Array Methods must be provided an Array"))}var E,w,_,T,S,A,k,L,R,C,x,I,O,D,P,M,N,F;e.exports=(E=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},T=_=void(w=0),S=function(e,t){R[w]=e,R[w+1]=t,2===(w+=2)&&(T?T(i):O())},A="undefined"!=typeof window?window:void 0,L=(k=A||{}).MutationObserver||k.WebKitMutationObserver,e="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),k="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,R=new Array(1e3),O=void 0,O=e?function(){return process.nextTick(i)}:L?(x=0,L=new L(i),I=document.createTextNode(""),L.observe(I,{characterData:!0}),function(){I.data=x=++x%2}):k?((C=new MessageChannel).port1.onmessage=i,function(){return C.port2.postMessage(0)}):(void 0===A?function(){try{var e=Function("return this")().require("vertx");return void 0!==(_=e.runOnLoop||e.runOnContext)?function(){_(i)}:n()}catch(e){return n()}}:n)(),D=Math.random().toString(36).substring(2),P={error:null},M=0,y.prototype.R=function(e){for(var t=0;void 0===this._&&t<e.length;t++)this.I(e[t],t)},y.prototype.I=function(t,e){var n,i,r=this.M,o=r.resolve;o===c?(n=l(t))===a&&void 0!==t._?this.O(t._,e,t.k):"function"!=typeof n?(this.C--,this.k[e]=t):r===F?(d(i=new r(s),t,n),this.L(i,e)):this.L(new r(function(e){return e(t)}),e):this.L(o(t),e)},y.prototype.O=function(e,t,n){var i=this.promise;void 0===i._&&(this.C--,2===e?v(i,n):this.k[t]=n),0===this.C&&h(i,this.k)},y.prototype.L=function(e,t){var n=this;p(e,void 0,function(e){return n.O(1,t,e)},function(e){return n.O(2,t,e)})},N=y,o.prototype.catch=function(e){return this.then(null,e)},o.prototype.finally=function(t){var n=this.constructor;return u(t)?this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){throw e})}):this.then(t,t)},(F=o).prototype.then=a,F.all=function(e){return new N(this,e).promise},F.race=function(r){var o=this;return E(r)?new o(function(e,t){for(var n=r.length,i=0;i<n;i++)o.resolve(r[i]).then(e,t)}):new o(function(e,t){return t(new TypeError("You must pass an array to race."))})},F.resolve=c,F.reject=function(e){var t=new this(s);return v(t,e),t},F.D=function(e){T=e},F.P=function(e){S=e},F.N=S,F.polyfill=function(){var e=void 0,t=(e=q).Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=F},F.Promise=F)}),ee=window.Promise||n;ee.allSettled||(ee.allSettled=function(e){return ee.all(e.map(function(e){return e.then(function(e){return{status:"fulfilled",value:e}}).catch(function(e){return{status:"rejected",reason:e}})}))});function s(e){return null!=e}function a(e){var t=m(null);return p.call(arguments,function(e){s(e)&&function(e,t){for(var n in e)t[n]=e[n]}(Object(e),t)}),t}function o(e){return"function"==typeof e}function i(e){if(!e||!("symbol"==typeof e||e.constructor&&"Symbol"===e.constructor.name&&"Symbol"===e[e.constructor.toStringTag]))throw new TypeError(e+" is not a symbol");return e}var r,c,u,l={object:!0,symbol:!0},d=Object.keys,f=function(){try{return Object.keys("primitive"),1}catch(e){return}}()?Object.keys:function(e){return d(s(e)?Object(e):e)},h=Math.max,v="function"==typeof(Ue=Object.assign)&&(Ue(Ue={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),Ue.foo+Ue.bar+Ue.trzy==="razdwatrzy")?Object.assign:function(t,n){var i,e,r,o=h(arguments.length,2);for(t=Object(function(e){if(!s(e))throw new TypeError("Cannot use null or undefined");return e}(t)),r=function(e){try{t[e]=n[e]}catch(e){i=i||e}},e=1;e<o;++e)f(n=arguments[e]).forEach(r);if(void 0!==i)throw i;return t},p=Array.prototype.forEach,m=Object.create,g="razdwatrzy",b=String.prototype.indexOf,y="function"==typeof g.contains&&!0===g.contains("dwa")&&!1===g.contains("foo")?String.prototype.contains:function(e){return-1<b.call(this,e,arguments[1])},E=t(function(e){(e.exports=function(e,t){var n,i,r,o;return arguments.length<2||"string"!=typeof e?(r=t,t=e,e=null):r=arguments[2],null==e?i=!(n=o=!0):(n=y.call(e,"c"),i=y.call(e,"e"),o=y.call(e,"w")),o={value:t,configurable:n,enumerable:i,writable:o},r?v(a(r),o):o}).gs=function(e,t,n){var i,r;return"string"!=typeof e?(r=n,n=t,t=e,e=null):r=arguments[3],null==t?t=void 0:o(t)?null==n?n=void 0:o(n)||(r=n,n=void 0):(r=t,t=n=void 0),e=null==e?!(i=!0):(i=y.call(e,"c"),y.call(e,"e")),e={get:t,set:n,configurable:i,enumerable:e},r?v(a(r),e):e}}),w=Object.create,_=Object.defineProperties,T=Object.defineProperty,S=Object.prototype,A=w(null);if("function"==typeof Symbol){r=Symbol;try{String(r()),u=!0}catch(e){}}var k,L=(k=w(null),function(e){for(var t,n,i=0;k[e+(i||"")];)++i;return k[e+=i||""]=!0,T(S,t="@@"+e,E.gs(null,function(e){n||(n=!0,T(this,t,E(e)),n=!1)})),t}),R=function(e){if(this instanceof R)throw new TypeError("TypeError: Symbol is not a constructor");return c(e)},C=c=function e(t){var n;if(this instanceof e)throw new TypeError("TypeError: Symbol is not a constructor");return u?r(t):(n=w(R.prototype),t=void 0===t?"":String(t),_(n,{F:E("",t),U:E("",L(t))}))};_(c,{for:E(function(e){return A[e]||(A[e]=c(String(e)))}),keyFor:E(function(e){for(var t in i(e),A)if(A[t]===e)return t}),hasInstance:E("",r&&r.hasInstance||c("hasInstance")),isConcatSpreadable:E("",r&&r.isConcatSpreadable||c("isConcatSpreadable")),iterator:E("",r&&r.iterator||c("iterator")),match:E("",r&&r.match||c("match")),replace:E("",r&&r.replace||c("replace")),search:E("",r&&r.search||c("search")),species:E("",r&&r.species||c("species")),split:E("",r&&r.split||c("split")),toPrimitive:E("",r&&r.toPrimitive||c("toPrimitive")),toStringTag:E("",r&&r.toStringTag||c("toStringTag")),unscopables:E("",r&&r.unscopables||c("unscopables"))}),_(R.prototype,{constructor:E(c),toString:E("",function(){return this.U})}),_(c.prototype,{toString:E(function(){return"Symbol ("+i(this).F+")"}),valueOf:E(function(){return i(this)})}),T(c.prototype,c.toPrimitive,E("",function(){var e=i(this);return"symbol"==typeof e?e:e.toString()})),T(c.prototype,c.toStringTag,E("c","Symbol")),T(R.prototype,c.toStringTag,E("c",c.prototype[c.toStringTag])),T(R.prototype,c.toPrimitive,E("c",c.prototype[c.toPrimitive]));var x,I=function(){var e;if("function"==typeof Symbol){e=Symbol("test symbol");try{String(e)}catch(e){return}return l[typeof Symbol.iterator]&&l[typeof Symbol.toPrimitive]&&l[typeof Symbol.toStringTag]}}()?Symbol:C;(function(){for(var e=["webkit","moz"],t=0;t<e.length&&!window.requestAnimationFrame;++t){var n=e[t];window.requestAnimationFrame=window[n+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"]}!/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)&&window.requestAnimationFrame&&window.cancelAnimationFrame||(window.requestAnimationFrame=function(e){return setTimeout(e,0)},window.cancelAnimationFrame=clearTimeout)})(),Number.isInteger||(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),"undefined"!=typeof DOMTokenList&&((ht=document.createElement("div")).classList.toggle("test-class",!1),ht.classList.contains("test-class"))&&(x=DOMTokenList.prototype.toggle,DOMTokenList.prototype.toggle=function(e,t){!0!==t?!1!==t?x.call(this,e):this.remove(e):this.add(e)}),"function"!=typeof Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){for(var t=Object(this),n=t.length>>>0,i=arguments[1],r=0;r<n;){var o=t[r];if(e.call(i,o,r,t))return o;r++}}}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){for(var t=Object(this),n=t.length>>>0,i=arguments[1],r=0;r<n;){var o=t[r];if(e.call(i,o,r,t))return r;r++}return-1}}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),i=n.length>>>0;if(0==i)return!1;var r,o,t=0|t,s=Math.max(0<=t?t:i-Math.abs(t),0);for(;s<i;){if((r=n[s])===(o=e)||"number"==typeof r&&"number"==typeof o&&isNaN(r)&&isNaN(o))return!0;s++}return!1}}),String.prototype.includes||(String.prototype.includes=function(e,t){return!((t="number"!=typeof t?0:t)+e.length>this.length)&&-1!==this.indexOf(e,t)}),Object.values||(Object.values=function(t){return Object.keys(t).map(function(e){return t[e]})}),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.slice(t||0,e.length)===e}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){return(void 0===t||t>this.length)&&(t=this.length),this.substring(t-e.length,t)===e}),Number.isNaN=Number.isNaN||function(e){return"number"==typeof e&&e!=e},void 0===Number.parseFloat&&(Number.parseFloat=window.parseFloat),void 0===Number.parseInt&&(Number.parseInt=window.parseInt),Array.prototype.entries||(Array.prototype.entries=function(){var e,t=this,n=0;function i(){}return i.prototype.next=function(){return(e=n>t.length-1?!0:e)?{value:void 0,done:!0}:{value:[n,t[n++]],done:!1}},i.prototype[I.iterator]=function(){return this},new i}),Array.prototype[I.iterator]||(Array.prototype[I.iterator]=function(){var e,t=this,n=0;function i(){}return i.prototype.next=function(){return(e=n>t.length-1?!0:e)?{value:void 0,done:!0}:{value:t[n++],done:!1}},i.prototype[I.iterator]=function(){return this},new i});var O,D,P=window.Map||function(){function e(){o=[],s=[]}function n(e){return-1<(i=o.indexOf(e))}var i,o,s;return e(),{get size(){return o.length},has:n,clear:e,get:function(e){return s[o.indexOf(e)]},keys:function(){return o.slice()},values:function(){return s.slice()},entries:function(){return o.map(function(e,t){return[e,s[t]]})},delete:function(e){return n(e)&&o.splice(i,1)&&!!s.splice(i,1)},forEach:function(n,i){var r=this;s.forEach(function(e,t){return n.call(i,e,o[t],r)})},set:function(e,t){return n(e)?s[i]=t:s[o.push(e)-1]=t,this}}},He=window.WeakMap||(O=Object.defineProperty,D=Date.now()%1e9,F.prototype.set=function(e,t){if("object"!==U(e)&&"function"!=typeof e)throw new TypeError("Invalid value used as weak map key");var n=e[this.name];return n&&n[0]===e?n[1]=t:O(e,this.name,{value:[e,t],writable:!0}),this},F.prototype.get=function(e){var t;return(t=e[this.name])&&t[0]===e?t[1]:void 0},F.prototype.delete=function(e){var t=e[this.name];return!(!t||t[0]!==e||(t[0]=t[1]=void 0))},F.prototype.has=function(e){var t=e[this.name];return!!t&&t[0]===e},F),M=window.Array.from,N=[1];function F(){this.name="__st"+(1e9*Math.random()>>>0)+D+++"__"}var Be=(M="function"==typeof M&&M(N)===N?!1:M)||function(e){return[].slice.call(e,0)};function U(e){return(U="function"==typeof I&&"symbol"==typeof I.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof I&&e.constructor===I&&e!==I.prototype?"symbol":typeof e})(e)}function j(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function H(e,t,n){return t&&j(e.prototype,t),n&&j(e,n),e}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)),i}function X(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?V(Object(n),!0).forEach(function(e){B(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function W(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function K(e,t,n){return(K=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}}()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);i=new(Function.bind.apply(e,i));return n&&z(i,n.prototype),i}).apply(null,arguments)}function G(e){var n="function"==typeof P?new P:void 0;return(G=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return K(e,arguments,$(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),z(t,e)})(e)}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(void 0!==I&&I.iterator in Object(e)){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=e[I.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}}(e,t)||J(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e){return function(e){if(Array.isArray(e))return Z(e)}(e)||function(e){if(void 0!==I&&I.iterator in Object(e))return Be(e)}(e)||J(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){if(e){if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Be(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(e,t):void 0}}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function We(e,t){var n;if(void 0!==I&&null!=e[I.iterator])return(n=e[I.iterator]()).next.bind(n);if(Array.isArray(e)||(n=J(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Q=t(function(e,t){e.exports=function(c){var u={};return(c=c||{}).prependOn=function(e,t){return c.on(e,t,!0)},c.eventNames=function(){return Object.keys(u)},c.on=function(e,t,n){for(var i=0,r=(e=[].concat(e)).length;i<r;i++){var o=e[i];if(!o)throw new Error("Tried to listen for an undefined event.");u[o]||(u[o]=[]),n?u[o].unshift(t):u[o].push(t)}return c},c.once=function(e,t,n){function i(){t.apply(c.off(e,i),arguments)}return i.handler=t,c.on(e,i,n)},c.off=function(e,t){if(!e)return u={},c;for(var n=0,i=(e=[].concat(e)).length;n<i;n++){var r=e[n];if(!r)throw new Error("Tried to remove an undefined event.");if(r in u)if(t){var o=u[r].indexOf(t);if(-1===o)for(var s=0,a=u[r].length;s<a;s++)if(u[r][s].handler===t){o=n;break}if(-1===o)return c;u[r].splice(o,1)}else delete u[r]}return c},c.fire=function(e){if(!e)throw new Error("Tried to fire an undefined event.");if(e in u)for(var t=u[e].slice(0),n=0,i=t.length;n<i;n++)if(t[n].apply(c,t.slice.call(arguments,1)),c.V){delete c.V;break}return c},c.halt=function(){return c.V=!0,c},c}});function ne(r){return function(i){for(var e=arguments.length,t=new Array(1<e?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return t.forEach(function(e){for(var t in e){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(i,t,Object.assign(n,r))}}),i}}var ie=ne({enumerable:!1,configurable:!0,writeable:!1}),re=ne({enumerable:!1,configurable:!1,writeable:!1}),oe=ne({enumerable:!0,configurable:!0,writeable:!1}),se="",ae={defer:!0,async:!0};function ce(o,e){e=Object.assign(ae,e);var s=window.vpimport__=window.vpimport__||{cache:{}};if(s.cache[o])return s.cache[o].H;var t=new ee(function(t,n){var i=document.getElementsByTagName("head")[0],r=document.createElement("script");r.src=se+o,r.defer=e.defer,r.async=e.async,r.onreadystatechange=r.onload=function(){var e=Object.keys(s).filter(function(e){return"cache"!==e})[0];s.cache[o].W=s[e],delete s[e],t(s.cache[o].W),i.removeChild(r)},r.onerror=function(e){n(e),delete s.cache[o],i.removeChild(r)},i.appendChild(r)});return s.cache[o]={H:t},t}function ue(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return n.reduce(function(r,o){return Object.keys(o||{}).forEach(function(e){var t,n=r[e],i=o[e];n&&void 0===i||(Array.isArray(i)?r[e]=(n||[]).concat(i):(t=i)&&"object"===U(t)?r[e]=ue({},n,i):r[e]=i)}),r},e)}function le(){var n,i,e=new ee(function(e,t){n=e,i=t});return e.resolve=n,e.reject=i,e}function de(e,t){for(var n=e,i=0;i<t.length;i++)if(t.start(i)<=e&&t.end(i)>=e){n=t.end(i);break}return n-e}function fe(e,t){if(!t||!t.length)return 0;if(1===t.length&&t.end(0)-t.start(0)<1e-6)return 0;for(var n=0,i=t.length-1;0<=i&&t.end(i)>e;--i)n+=t.end(i)-Math.max(t.start(i),e);return n}function he(e){return"string"!=typeof e?{}:e.replace("?","").split("&").reduce(function(e,t){var n;return 0<t.length&&(t=(n=Ve(t.split("="),2))[0],n=n[1],e[t]=decodeURIComponent(n)),e},{})}function ve(e,t){t=function(e){if("object"!==U(e))return"";var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return n.length?n.join("&"):""}(t);return"".concat(e).concat(t?"?".concat(t):"")}function pe(e){var t=e.split("://");if(2!==t.length)return null;e=t[1].split("/");if(1<e.length)return e[0];e=t[1].split("?");if(1<e.length)return e[0];e=t[1].split("#");return 1<e.length?e[0]:t[1]}function me(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function ge(e){return e}var be=Math.max;function ye(o,s,a){return s=be(void 0===s?o.length-1:s,0),function(){for(var e=arguments,t=-1,n=be(e.length-s,0),i=Array(n);++t<n;)i[t]=e[s+t];for(var t=-1,r=Array(s+1);++t<s;)r[t]=e[t];return r[s]=a(i),me(o,this,r)}}var Ee="object"==("undefined"==typeof global?"undefined":U(global))&&global&&global.Object===Object&&global,we="object"==("undefined"==typeof self?"undefined":U(self))&&self&&self.Object===Object&&self,_e=Ee||we||Function("return this")(),Te=_e.Symbol,Se=Object.prototype,Ae=Se.hasOwnProperty,ke=Se.toString,Le=Te?Te.toStringTag:void 0,Re=Object.prototype.toString,Ce=Te?Te.toStringTag:void 0;function xe(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Ce&&Ce in Object(e)?function(e){var t=Ae.call(e,Le),n=e[Le];try{var i=!(e[Le]=void 0)}catch(e){}var r=ke.call(e);return i&&(t?e[Le]=n:delete e[Le]),r}(e):Re.call(e)}function Ie(e){var t=U(e);return null!=e&&("object"==t||"function"==t)}function Oe(e){if(Ie(e)){e=xe(e);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}}var De=_e.G,Pe=(Ft=/[^.]+$/.exec(De&&De.keys&&De.keys.IE_PROTO||""))?"Symbol(src)_1."+Ft:"",Me=Function.prototype.toString;function Ne(e){if(null!=e){try{return Me.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var Fe=/^\[object .+?Constructor\]$/,qe=Function.prototype,n=Object.prototype,Ue=qe.toString,g=n.hasOwnProperty,je=RegExp("^"+Ue.call(g).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function $e(e,t){e=null==e?void 0:e[t];return!Ie(t=e)||Pe&&Pe in t||!(Oe(t)?je:Fe).test(Ne(t))?void 0:e}var ze,Ke,Ge,Ye=function(){try{var e=$e(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Je=Date.now,Xe=(ze=Ye?function(e,t){return Ye(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:ge,Ge=Ke=0,function(){var e=Je(),t=16-(e-Ge);if(Ge=e,0<t){if(800<=++Ke)return arguments[0]}else Ke=0;return ze.apply(void 0,arguments)});function Ze(e,t){return Xe(ye(e,t,ge),e+"")}function Qe(e,t){return e===t||e!=e&&t!=t}function et(e,t){for(var n=e.length;n--;)if(Qe(e[n][0],t))return n;return-1}var tt=Array.prototype.splice;function nt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}nt.prototype.clear=function(){this.K=[],this.size=0},nt.prototype.delete=function(e){var t=this.K,e=et(t,e);return!(e<0||(e==t.length-1?t.pop():tt.call(t,e,1),--this.size,0))},nt.prototype.get=function(e){var t=this.K,e=et(t,e);return e<0?void 0:t[e][1]},nt.prototype.has=function(e){return-1<et(this.K,e)},nt.prototype.set=function(e,t){var n=this.K,i=et(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this};var it=$e(_e,"Map"),rt=$e(Object,"create"),ot=Object.prototype.hasOwnProperty,st=Object.prototype.hasOwnProperty;function at(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function ct(e,t){var n,i=e.K;return("string"==(e=U(n=t))||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function ut(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function lt(e){e=this.K=new nt(e);this.size=e.size}function dt(e,t,n){"__proto__"==t&&Ye?Ye(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function ft(e,t,n){(void 0===n||Qe(e[t],n))&&(void 0!==n||t in e)||dt(e,t,n)}at.prototype.clear=function(){this.K=rt?rt(null):{},this.size=0},at.prototype.delete=function(e){e=this.has(e)&&delete this.K[e];return this.size-=e?1:0,e},at.prototype.get=function(e){var t=this.K;if(rt){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return ot.call(t,e)?t[e]:void 0},at.prototype.has=function(e){var t=this.K;return rt?void 0!==t[e]:st.call(t,e)},at.prototype.set=function(e,t){var n=this.K;return this.size+=this.has(e)?0:1,n[e]=rt&&void 0===t?"__lodash_hash_undefined__":t,this},ut.prototype.clear=function(){this.size=0,this.K={hash:new at,map:new(it||nt),string:new at}},ut.prototype.delete=function(e){e=ct(this,e).delete(e);return this.size-=e?1:0,e},ut.prototype.get=function(e){return ct(this,e).get(e)},ut.prototype.has=function(e){return ct(this,e).has(e)},ut.prototype.set=function(e,t){var n=ct(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this},lt.prototype.clear=function(){this.K=new nt,this.size=0},lt.prototype.delete=function(e){var t=this.K,e=t.delete(e);return this.size=t.size,e},lt.prototype.get=function(e){return this.K.get(e)},lt.prototype.has=function(e){return this.K.has(e)},lt.prototype.set=function(e,t){var n=this.K;if(n instanceof nt){var i=n.K;if(!it||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.K=new ut(i)}return n.set(e,t),this.size=n.size,this};var C="object"==(void 0===e?"undefined":U(e))&&e&&!e.nodeType&&e,ht=C&&"object"==("undefined"==typeof module?"undefined":U(module))&&module&&!module.nodeType&&module,N=ht&&ht.exports===C?_e.Buffer:void 0,vt=N?N.allocUnsafe:void 0;function pt(e,t){if(t)return e.slice();t=e.length,t=vt?vt(t):new e.constructor(t);return e.copy(t),t}var mt=_e.Uint8Array;function gt(e){var t=new e.constructor(e.byteLength);return new mt(t).set(new mt(e)),t}function bt(e,t){t=t?gt(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}function yt(e,t){var n=-1,i=e.length;for(t=t||Array(i);++n<i;)t[n]=e[n];return t}var Et=Object.create,wt=function(e){if(!Ie(e))return{};if(Et)return Et(e);_t.prototype=e;e=new _t;return _t.prototype=void 0,e};function _t(){}function Tt(t,n){return function(e){return t(n(e))}}var St=Tt(Object.getPrototypeOf,Object),At=Object.prototype;function kt(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||At)}function Lt(e){return"function"!=typeof e.constructor||kt(e)?{}:wt(St(e))}function Rt(e){return null!=e&&"object"==U(e)}function Ct(e){return Rt(e)&&"[object Arguments]"==xe(e)}var M=Object.prototype,xt=M.hasOwnProperty,It=M.propertyIsEnumerable,Ot=Ct(function(){return arguments}())?Ct:function(e){return Rt(e)&&xt.call(e,"callee")&&!It.call(e,"callee")},Dt=Array.isArray;function Pt(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=9007199254740991}function Mt(e){return null!=e&&Pt(e.length)&&!Oe(e)}var we="object"==(void 0===e?"undefined":U(e))&&e&&!e.nodeType&&e,Se=we&&"object"==("undefined"==typeof module?"undefined":U(module))&&module&&!module.nodeType&&module,De=Se&&Se.exports===we?_e.Buffer:void 0,Nt=(De?De.isBuffer:void 0)||function(){return!1},Ft=Function.prototype,qe=Object.prototype,qt=Ft.toString,Ut=qe.hasOwnProperty,jt=qt.call(Object);function Ht(e){if(Rt(e)&&"[object Object]"==xe(e)){e=St(e);if(null===e)return 1;e=Ut.call(e,"constructor")&&e.constructor;return"function"==typeof e&&e instanceof e&&qt.call(e)==jt}}var Bt={};function Vt(t){return function(e){return t(e)}}Bt["[object Float32Array]"]=Bt["[object Float64Array]"]=Bt["[object Int8Array]"]=Bt["[object Int16Array]"]=Bt["[object Int32Array]"]=Bt["[object Uint8Array]"]=Bt["[object Uint8ClampedArray]"]=Bt["[object Uint16Array]"]=Bt["[object Uint32Array]"]=!0,Bt["[object Arguments]"]=Bt["[object Array]"]=Bt["[object ArrayBuffer]"]=Bt["[object Boolean]"]=Bt["[object DataView]"]=Bt["[object Date]"]=Bt["[object Error]"]=Bt["[object Function]"]=Bt["[object Map]"]=Bt["[object Number]"]=Bt["[object Object]"]=Bt["[object RegExp]"]=Bt["[object Set]"]=Bt["[object String]"]=Bt["[object WeakMap]"]=!1;var n="object"==(void 0===e?"undefined":U(e))&&e&&!e.nodeType&&e,Wt=n&&"object"==("undefined"==typeof module?"undefined":U(module))&&module&&!module.nodeType&&module,$t=Wt&&Wt.exports===n&&Ee.process,Ue=function(){try{return Wt&&Wt.require&&Wt.require("util").types||$t&&$t.binding&&$t.binding("util")}catch(e){}}(),g=Ue&&Ue.isTypedArray,zt=g?Vt(g):function(e){return Rt(e)&&Pt(e.length)&&!!Bt[xe(e)]};function Kt(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Gt=Object.prototype.hasOwnProperty;function Yt(e,t,n){var i=e[t];Gt.call(e,t)&&Qe(i,n)&&(void 0!==n||t in e)||dt(e,t,n)}function Jt(e,t,n,i){var r=!n;n=n||{};for(var o=-1,s=t.length;++o<s;){var a=t[o],c=i?i(n[a],e[a],a,n,e):void 0;(r?dt:Yt)(n,a,c=void 0===c?e[a]:c)}return n}var Xt=/^(?:0|[1-9]\d*)$/;function Zt(e,t){var n=U(e);return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&Xt.test(e))&&-1<e&&e%1==0&&e<t}var Qt=Object.prototype.hasOwnProperty;function en(e,t){var n,i=Dt(e),r=!i&&Ot(e),o=!i&&!r&&Nt(e),s=!i&&!r&&!o&&zt(e),a=i||r||o||s,c=a?function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}(e.length,String):[],u=c.length;for(n in e)!t&&!Qt.call(e,n)||a&&("length"==n||o&&("offset"==n||"parent"==n)||s&&("buffer"==n||"byteLength"==n||"byteOffset"==n)||Zt(n,u))||c.push(n);return c}var tn=Object.prototype.hasOwnProperty;function nn(e){return Mt(e)?en(e,!0):function(n){if(!Ie(n))return function(){var e=[];if(null!=n)for(var t in Object(n))e.push(t);return e}();var e,t=kt(n),i=[];for(e in n)("constructor"!=e||!t&&tn.call(n,e))&&i.push(e);return i}(e)}function rn(p,m,g,b,y){p!==m&&function(e,t,n){for(var i=-1,r=Object(e),o=n(e),s=o.length;s--;){var a=o[++i];if(!1===t(r[a],a,r))break}}(m,function(e,t){var n,i,r,o,s,a,c,u,l,d,f,h,v;y=y||new lt,Ie(e)?(i=m,o=g,s=rn,a=b,c=y,f=Kt(n=p,r=t),h=Kt(i,r),(v=c.get(h))?ft(n,r,v):((u=void 0===(l=a?a(f,h,r+"",n,i,c):void 0))&&(v=!(d=Dt(h))&&Nt(h),i=!d&&!v&&zt(h),l=h,d||v||i?l=Dt(f)?f:Rt(d=f)&&Mt(d)?yt(f):v?pt(h,!(u=!1)):i?bt(h,!(u=!1)):[]:Ht(h)||Ot(h)?Ot(l=f)?l=Jt(f,nn(f)):Ie(f)&&!Oe(f)||(l=Lt(h)):u=!1),u&&(c.set(h,l),s(l,h,o,a,c),c.delete(h)),ft(n,r,l))):(l=b?b(Kt(p,t),e,t+"",p,m,y):void 0,ft(p,t,l=void 0===l?e:l))},nn)}function on(e,t,n,i,r,o){return Ie(e)&&Ie(t)&&(o.set(t,e),rn(e,t,void 0,on,o),o.delete(t)),e}function sn(a){return Ze(function(e,t){var n=-1,i=t.length,r=1<i?t[i-1]:void 0,o=2<i?t[2]:void 0,r=3<a.length&&"function"==typeof r?(i--,r):void 0;for(o&&function(e,t,n){if(Ie(n)){var i=U(t);return("number"==i?Mt(n)&&Zt(t,n.length):"string"==i&&t in n)&&Qe(n[t],e)}}(t[0],t[1],o)&&(r=i<3?void 0:r,i=1),e=Object(e);++n<i;){var s=t[n];s&&a(e,s,n,r)}return e})}var an=sn(function(e,t,n,i){rn(e,t,n,i)}),cn=Ze(function(e){return e.push(void 0,on),me(an,void 0,e)}),ht=function(){function e(e){this.Y=!1,this.J=!1,this.$=e,Q(this)}H(e,null,[{key:"displayName",get:function(){return"ExternalDisplay"}},{key:"supported",get:function(){return!1}},{key:"supportedVideoTypes",get:function(){return[]}}]);var t=e.prototype;return t.showPicker=function(){},t.getFile=function(){var e=this.constructor.displayName.replace("ExternalDisplay","");if(this.$.externalDisplayFiles[e])return this.$.externalDisplayFiles[e];var n=this.constructor.supportedVideoTypes,e=this.$.files.filter(function(e){return-1!==n.indexOf(e.mime)}).sort(function(e,t){return e.mime===t.mime?e.priority-t.priority:n.indexOf(e.mime)-n.indexOf(t.mime)});if(!e.length)throw new Error("No files available for ".concat(this.constructor.displayName," external display."));return e[0]},H(e,[{key:"active",get:function(){return this.J}},{key:"available",get:function(){return this.Y}},{key:"element",get:function(){return document.createElement("div")}}]),e}(),un={ABORT:"abort",CAN_PLAY:"canplay",CAN_PLAY_THROUGH:"canplaythrough",DURATION_CHANGE:"durationchange",EMPTIED:"emptied",ENDED:"ended",ENTER_PICTURE_IN_PICTURE:"enterpictureinpicture",LEAVE_PICTURE_IN_PICTURE:"leavepictureinpicture",ERROR:"error",LOADED_DATA:"loadeddata",LOADED_METADATA:"loadedmetadata",LOAD_START:"loadstart",PAUSE:"pause",PLAY:"play",PLAYING:"playing",PROGRESS:"progress",RATE_CHANGE:"ratechange",RESIZE:"resize",SEEKED:"seeked",SEEKING:"seeking",STALLED:"stalled",SUSPEND:"suspend",TIME_UPDATE:"timeupdate",VOLUME_CHANGE:"volumechange",WAITING:"waiting",WEBKIT_BEGIN_FULLSCREEN:"webkitbeginfullscreen",WEBKIT_END_FULLSCREEN:"webkitendfullscreen",WEBKIT_PRESENTATION_MODE_CHANGED:"webkitpresentationmodechanged"},ln={AVAILABLE:"externaldisplayavailable",UNAVAILABLE:"externaldisplayunavailable",ACTIVATED:"externaldisplayactivated",DEACTIVATED:"externaldisplaydeactivated"},dn={AIRPLAY_AVAILABLE:"available",AIRPLAY_UNAVAILABLE:"unavailable",AIRPLAY_ACTIVATED:"activated",AIRPLAY_DEACTIVATED:"deactivated"},fn={SCANNER_CHANGE:"scannerchange",SCANNER_ERROR:"scannererror",FILE_ERROR:"fileerror",FILE_SRC_UPDATE:"filesrcupdate",DOWNLOAD_START:"downloadstart",DOWNLOAD_END:"downloadend",DOWNLOAD_ERROR:"downloaderror",DOWNLOAD_TIMEOUT:"downloadtimeout",DRM_AUTH_FAILURE:"drmauthfailure",DRM_AUTH_SUCCESS:"drmauthsuccess",DRM_FAILURE:"drmfailure",DRM_KEY_SWITCH:"drmkeyswitch",DRM_OUTPUT_RESTRICTED:"drmoutputrestricted",EME_UNSUPPORTED:"emeunsupported",CURRENT_FILE_CHANGE:"currentfilechange",MEDIA_URL_EXPIRED:"mediaurlexpired",MEDIA_URL_BAD_REQUEST:"mediaurlbadrequest",STREAM_CHANGE:"streamchange",STREAM_CHANGE_START:"streamchangestart",STREAM_BUFFER_START:"streambufferstart",STREAM_BUFFER_END:"streambufferend",DROPPED_FRAMES:"droppedframes",BANDWIDTH:"bandwidth",STREAM_TARGET_CHANGE:"streamtargetchange",PRESENTATION_MODE_CHANGE:"presentationmodechange",CUE_POINT:"cuepoint",BUFFER_OCCUPANCY:"bufferoccupancy",MANIFEST_TIMEOUT:"manifesttimeout",MANIFEST_LOADED:"manifestloaded",STREAMS_LOADED:"streamsloaded",TEXT_SRC_UPDATE:"texttracksrcupdate",TEXT_TRACKS_AVAILABLE:"texttracksavailable",AV_DURATION_MISMATCH:"avdurationmismatch",BUFFER_STARTED:"bufferstarted",BUFFER_ENDED:"bufferended",QUOTA_EXCEEDED_ERROR:"quotaexceedederror",CHAPTER_CUES_UPDATED:"chaptercuesupdated",APPEND_BUFFER_END:"appendbufferend"},hn={STREAM_ONLINE:"livestreamonline",STREAM_OFFLINE:"livestreamoffline",BUFFER_GAP_JUMP:"livebuffergapjump",BUFFER_GAP_JUMP_PREVENT:"livebuffergapjumpprevent"},vn={CAMERA_UPDATE:"cameraupdate",CAMERA_CHANGE:"camerachange",MOTION_START:"motionstart",MOTION_END:"motionend",SPATIAL_UNSUPPORTED:"spatialunsupported",WEBVR_ENTER:"entervr",WEBVR_EXIT:"exitvr",WEBVR_HARDWARE_AVAILABLE:"webvrhardwareavailable"},pn={MEDIASESSION_PLAY:"mediasessionplay",MEDIASESSION_PAUSE:"mediasessionpause",MEDIASESSION_SEEK_FORWARD:"mediasessionseekforward",MEDIASESSION_SEEK_BACKWARD:"mediasessionseekbackward"},mn={BRAIN_ML_MODEL_ERR:"brainmlmodelerr",BRAIN_ML_MODEL_NET_ERR:"brainmlmodelresperr",BRAIN_ML_MODEL_TIMEOUT:"brainmlmodeltimeout",BRAIN_ML_SWITCH_TO_SKYFIRE:"brainmlmodelswitchtoskyfire",BRAIN_ML_MODEL_INPUTS:"brainmlmodelinputs"},gn=Object.assign({},un,ln,dn,fn,vn,hn,pn,mn),bn=function(t){function e(e){return(e=t.call(this,e)||this).X=document.createElement("video"),e.X.setAttribute("data-airplay",""),e.X.setAttribute("x-webkit-airplay","allow"),e.addVideoEventListeners(),e}W(e,t),H(e,null,[{key:"displayName",get:function(){return"AirPlayExternalDisplay"}},{key:"supported",get:function(){return"WebKitPlaybackTargetAvailabilityEvent"in window}},{key:"supportedVideoTypes",get:function(){return["application/vnd.apple.mpegurl","video/mp4"]}}]);var n=e.prototype;return n.addVideoEventListeners=function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.X;e.addEventListener(un.LOADED_METADATA,function(e){t.fire(un.LOADED_METADATA,e)}),e.addEventListener("webkitplaybacktargetavailabilitychanged",function(e){switch(e.availability){case"available":t.Y||(t.Y=!0,t.fire(dn.AIRPLAY_AVAILABLE));break;case"not-available":t.Y&&(t.Y=!1,t.fire(dn.AIRPLAY_UNAVAILABLE))}}),e.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",function(e){return e.target.webkitCurrentPlaybackTargetIsWireless?(t.J=!0,void t.fire(dn.AIRPLAY_ACTIVATED)):(t.J=!1,void t.fire(dn.AIRPLAY_DEACTIVATED))})},n.showPicker=function(){var e=this;this.X.webkitShowPlaybackTargetPicker(),this.loadMetadata().then(function(){return e.X.webkitShowPlaybackTargetPicker()}).catch(function(){})},n.loadMetadata=function(){var n=this;return 1<=this.X.readyState?ee.resolve():new ee(function(e,t){n.X.addEventListener(un.LOADED_METADATA,function(){e()}),n.X.src=n.getFile().src})},H(e,[{key:"element",get:function(){return this.X},set:function(e){if(!(e instanceof HTMLVideoElement))throw new TypeError("The element for AirPlay must be a <video>.");e!==this.X&&(this.addVideoEventListeners(e),this.X=e,this.X.setAttribute("x-webkit-airplay","allow"))}}]),e}(ht),yn=navigator.userAgent.toLowerCase();function En(e){e=e.toLowerCase();var t=new RegExp(e).test(yn);return"safari"===e?t&&new RegExp("version").test(yn):t}function wn(e){var t,n=document.createElement("div"),i=e.charAt(0).toUpperCase()+e.slice(1),r=(e+" "+["Webkit","Moz","O","ms"].join(i+" ")+i).split(" ");for(t in r){var o=r[t];if(void 0!==n.style[o])return o}return e}var C=!!En("android")&&(parseFloat(yn.replace(/^.* android (\d+)\.(\d+).*$/,"$1.$2"))||!0),N=window.devicePixelRatio||1,M=!(!En("windows phone")&&!En("iemobile"))&&(parseFloat(yn.replace(/^.* windows phone (os )?(\d+)\.(\d+).*$/,"$2.$3"))||!0),Se=!!En("msie")&&parseFloat(yn.replace(/^.*msie (\d+).*$/,"$1")),we=!!En("trident")&&parseFloat(yn.replace(/^.*trident\/(\d+)\.(\d+).*$/,"$1.$2"))+4,_n=!!(En("ipad;")||En("iphone;")||En("ipod touch;"))&&parseFloat(yn.replace(/^.* os (\d+)_(\d+).*$/,"$1.$2")),De="MacIntel"===navigator.platform&&void 0!==navigator.standalone,Ft=En("opera")||En("opr"),qe=/^Mozilla\/5\.0 \(.* Mac OS X.*\(KHTML, like Gecko\)(?: Mobile\/[\S]*|)$/i.test(yn);function Tn(){if(!En("safari"))return[];var e=yn.split(" ").find(function(e){return/version\//.test(e)});return e?e.replace("version/","").split(".").map(function(e){return parseInt(e,10)}):[]}var Sn=En("safari")&&En("apple")&&!En("chrome")&&!En("android")&&11<=Tn()[0],An={airPlay:"WebKitPlaybackTargetAvailabilityEvent"in window,android:C,appleMail:qe,hasAutoplayPolicy:C||_n||Sn||66<=function(){if(!En("chrome"))return[];var e=yn.split(" ").find(function(e){return(_n?/CriOS\//:/chrome\//).test(e)});return e?e.replace("chrome/","").split(".").map(function(e){return parseInt(e,10)}):[]}()[0],iOS:_n,iPadOS:De,mobileAndroid:C&&En("mobile"),browser:{bb10:En("bb10"),chrome:En("chrome"),firefox:En("firefox"),ie:Se||we,edge:En("edge"),opera:Ft,safari:En("safari")&&En("apple")&&!En("chrome")&&!En("android")},devicePixelRatio:N,iPhone:En("iphone;")||En("ipod touch;")||En("ipod;"),iPad:En("ipad;"),iPadNonRetina:En("ipad;")&&N<2,mac:En("mac os"),pointerEvents:window.navigator.pointerEnabled||window.navigator.msPointerEnabled||!1,passiveEvents:function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassive",null,t),window.removeEventListener("testPassive",null,t)}catch(e){}return e}(),svg:!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch||En("windows phone")||1<window.navigator.maxTouchPoints||window.navigator.msMaxTouchPoints||!1,transformProperty:wn("transform"),transitionProperty:wn("transition"),webp:!(!(n=document.createElement("canvas")).getContext||!n.getContext("2d"))&&0===n.toDataURL("image/webp").indexOf("data:image/webp"),windowsPhone:M},kn=/mac os x 10_13/.test(yn),Ln=An.iOS&&11<=An.iOS,Ee=An.iPhone&&812===window.screen.availHeight&&375===window.screen.availWidth,g=An.iPhone&&896===window.screen.availHeight&&414===window.screen.availWidth,ht=An.iPad&&1112===window.screen.availWidth&&834===window.screen.availHeight,qe=An.iPad&&834===window.screen.availWidth&&1194===window.screen.availHeight,De=An.iPad&&1024===window.screen.availWidth&&1366===window.screen.availHeight,C=Ee||g||ht||qe||De;function Rn(){return!!(Sn&&kn||Sn&&Ln)||"undefined"!=typeof MediaSource&&MediaSource.isTypeSupported('video/mp4; codecs="hvc1"')}function Cn(){return!(An.iOS||An.iPad||An.browser.ie)&&(!En("safari")||11<Tn()[0]||11===Tn()[0]&&(1<Tn()[2]||0<Tn()[1]))}An.hevc=Rn(),An.hdr=Sn&&Ln&&C,An.vp9hdr=(window.matchMedia("(color-gamut: p3)").matches||window.matchMedia("(color-gamut: rec2020)").matches)&&48<=screen.colorDepth&&(MediaSource.isTypeSupported('video/webm; codecs="vp09.02.10.10.01.09.16.09.00"')||MediaSource.isTypeSupported('video/webm; codecs="vp09.02.10.10.01.09.16.09.01"')||MediaSource.isTypeSupported('video/webm; codecs="vp09.02.10.10.01.09.18.09.00"')||MediaSource.isTypeSupported('video/webm; codecs="vp09.02.10.10.01.09.18.09.01"')),An.av1="undefined"!=typeof MediaSource&&MediaSource.isTypeSupported('video/mp4; codecs="av01.0.31M.08.0.110.01.01.01.0"'),An.webvr=!!(window.navigator&&"getVRDisplays"in window.navigator),An.webxr=!!(window.navigator&&"xr"in window.navigator&&"supportsSession"in window.navigator.xr),An.spatialPlayback=Cn(),An.spatialHEVC=!An.browser.safari&&Cn()&&Rn(),An.stereoscopic=An.spatialPlayback&&An.mobileAndroid;var xn=!!(Se=navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)\.([0-9]+)\./))&&{major:parseInt(Se[1],10),minor:parseInt(Se[2],10)};function In(e){for(var t=0,n=this.length;t<n;t++)if(this[t].id==="".concat(e))return this[t];return null}function On(e){e=0<arguments.length&&void 0!==e?e:[];return e.item=function(e){return this[e]},e.getTrackById=In,e}function Dn(){return(void 0!==window.performance&&"function"==typeof window.performance.now?window.performance:Date).now()}function Pn(e){return Dn()-e}function Mn(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(e^(16*Math.random()>>e)/4).toString(16)})}function Nn(e){for(var t=window.atob(e),n=t.length,i=new Uint8Array(n),r=0;r<n;r++)i[r]=t.charCodeAt(r);return i}function Fn(e,t,n,i){var r=0,o=0,e=e,t=t,i=n/i;return i<=e/t?r=(i*(o=t)).toFixed(2):o=((r=e)/i).toFixed(2),{width:r,height:o,left:Math.max((e-r)/2,0),top:Math.max((t-o)/2,0)}}function qn(e){var t=[document.fullscreenElement,document.webkitFullscreenElement,document.webkitCurrentFullScreenElement,document.mozFullScreenElement,document.msFullscreenElement].find(function(e){return void 0!==e});return void 0!==t?!!t:e.webkitDisplayingFullscreen}function Un(e,t){return t&&(e+=';codecs="'.concat(t,'"')),e}function jn(e,t){t=1<arguments.length&&void 0!==t?t:3;if(e=parseFloat(e),isNaN(e))return 0;t=Math.pow(10,t);return Math.round(e*t)/t}function Hn(e,t){return e&&e.tests&&e.tests[t]?e.tests[t]:null}function Bn(e){return e&&"ML"===e.displayName}var Vn=function(e,t){this.name=e,this.message=t,Object.freeze(this)},Wn=new He,$n=(zn.fromVTTCue=function(e){if(Wn.has(e))return Wn.get(e);var t={};try{t=JSON.parse(e.text)}catch(e){}return new zn(e.startTime,t)},zn);function zn(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=parseFloat(e);if(isNaN(n))throw new TypeError("Time must be a number.");if(n<0)throw new TypeError("Time must be a positive number.");this.time=e,this.data=t,this.id=Mn();try{var i="undefined"==typeof VTTCue?TextTrackCue:VTTCue;this.vttCue=new i(e,e+.25,JSON.stringify(t)),this.vttCue.id=this.id}catch(e){throw new Vn("CuePointsNotSupported","Cue points are not supported in this browser.")}Wn.set(this.vttCue,this),Object.freeze(this)}function Kn(t,n,i){var r;try{document.removeChild({})}catch(e){r=Object.create(Object.getPrototypeOf(e),{name:{value:n,configurable:!0,writable:!0},code:{value:t,configurable:!0,writable:!0},message:{value:i,configurable:!0,writable:!0},toString:{value:function(){return"".concat(n,": DOM Exception ").concat(t)},configurable:!0,writable:!0}})}return Object.freeze(r)}function Gn(e,t){if(!e||void 0===e[t])throw Kn(1,"INDEX_SIZE_ERR");return e[t]}function Yn(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return Object.freeze(B({get length(){return r.length},start:function(e){return Gn(r,e)},end:function(e){return Gn(o,e)}},I.iterator,function(){return e=r,t=o,i=0,B(n={},I.iterator,function(){return this}),B(n,"next",function(){return i<e.length?{done:!1,value:t?[e[i],t[i++]]:e[i++]}:{done:!0}}),n;var e,t,n,i}))}Yn.from=function(e){if(!(e instanceof TimeRanges))throw new TypeError("Can only create a TelecineTimeRange from a TimeRanges object.");for(var t=[],n=[],i=0,r=e.length;i<r;i++)t.push(e.start(i)),n.push(e.end(i));return Yn(t,n)};var Jn,Xn,Zn=document.createElement("video"),Qn={"application/vnd.apple.mpegurl":"application/vnd.apple.mpegurl","video/mp4":'video/mp4; codecs="avc1.64001E"',"video/webm":'video/webm; codecs="vp8, vorbis"',"video/x-flv":'video/x-flv; codecs="vp6"'},ei={disabled:"DISABLED"in(we="undefined"==typeof TextTrack?{}:TextTrack)?we.DISABLED:"disabled",hidden:"HIDDEN"in we?we.HIDDEN:"hidden",showing:"SHOWING"in we?we.SHOWING:"showing"},ti="track"in(Ft=document.createElement("track"))&&"oncuechange"in Ft.track,ni=new He,ii=function(){function s(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.Z=e,this.tt=n,this.nt=null,this.it=null,this.et=[],Q(this),this.on("play",function(){return t.rt()});e=e.querySelector("video");e||((e=document.createElement("video")).preload="none",this.Z.appendChild(e)),e.setAttribute("tabindex","-1"),this.$=e,n.playRequest&&(this.ot=n.playRequest,this.ot.video=e),n.htmlScanner&&n.htmlScanner.controls&&(this.$.controls=!0),this.ut=this.handleVideoEvent.bind(this),this.addVideoEventListeners(),this.at="none",this.st=!1,this.ct=!1,this.lt=-1}H(s,null,[{key:"displayName",get:function(){return"HTMLScanner"}},{key:"supported",get:function(){return 0<s.supportedVideoTypes.length}},{key:"supportedVideoTypes",get:function(){var e,t=[];if("function"!=typeof Zn.canPlayType)return t;for(e in Qn){var n=Qn[e];An.android&&"application/vnd.apple.mpegurl"===e||(An.android&&!An.mobileAndroid&&"video/mp4"===e&&An.android instanceof String?3<parseInt(An.android.split(".")[0],10)&&t.push(e):Zn.canPlayType(n).replace(/^no$/,"")&&t.push(e))}return t}},{key:"supportedAudioTypes",get:function(){return[]}},{key:"supportedExternalDisplays",get:function(){return[bn]}},{key:"supportsSettingVolume",get:function(){if(An.android||An.iOS)return!1;var e=Zn.volume;return Zn.volume=.5*e,Zn.volume!==e}},{key:"supportsTextTracks",get:function(){return void 0!==Zn.textTracks&&Zn.textTracks instanceof TextTrackList}},{key:"supportsPlaybackRate",get:function(){if(An.android&&xn&&xn.major<52)return!1;var e=Zn.playbackRate;Zn.playbackRate=.5*e;var t=e!==Zn.playbackRate;return Zn.playbackRate=e,t}}]);var e=s.prototype;return e.deactivate=function(){this.nt&&(this.nt.off("filesrcupdate"),this.nt.off("texttracksrcupdate")),this.removeVideoEventListeners(),this.removeSnapshot(),this.$.style.display="none"},e.reactivate=function(){this.addVideoEventListeners(),this.$.style.display=""},e.addVideoEventListeners=function(){var t=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.$;Object.keys(un).forEach(function(e){e=un[e];n.addEventListener(e,t.ut)})},e.removeVideoEventListeners=function(){var t=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.$;Object.keys(un).forEach(function(e){e=un[e];n.removeEventListener(e,t.ut)})},e.play=function(e){var t=this;return this.ot.start(e).catch(function(e){throw t.ft(e),e})},e.ft=function(e){this.fire(un.ERROR,new Vn(e.name,e.message))},e.pause=function(){this.ot.cancel(),this.$.pause()},e.onpause=function(){},e.ontimeupdate=function(){this.lt=this.currentTime},e.addTextTrack=function(n){var i,t=this;n.src?((e=document.createElement("track")).kind=n.kind,e.src=n.src,e.id="telecine-track-".concat(n.id),e.srclang=n.language,e.label=n.label,this.$.appendChild(e),i=e.track):(i=this.$.addTextTrack(n.kind,n.label,n.language),this.ht=this.ht||{},this.ht["telecine-track-".concat(n.id)]=i),i.addEventListener("cuechange",function(){return n.dispatchEvent("cuechange")}),this.$.addEventListener("timeupdate",function(){qn(t.$)&&(n.mode=i.mode)});function r(){var e=An.iOS&&qn(t.$);!n.dt||e?n.mode=i.mode:i.mode=ei[n.mode]}var o,e,s=[];return e?e.addEventListener("load",r):r(),["loadeddata","seeking"].forEach(function(e){t.$.addEventListener(e,r),s.push([e,r])}),n.dt&&(i.mode=ei[n.mode]),ti||(o=[],e=function(){if(i&&"disabled"!==ei[i.mode]){if(o.length!==i.activeCues.length)return n.dispatchEvent("cuechange"),void(o=Be(i.activeCues));for(var e=0,t=i.activeCues.length;e<t;e++)if(i.activeCues[e].startTime!==o[e].startTime)return n.dispatchEvent("cuechange"),void(o=Be(i.activeCues))}},this.$.addEventListener("timeupdate",e),s.push(["timeupdate",e])),ni.set(n,s),i},e.removeTextTrack=function(e){var n=this,t=this.$.querySelector("#telecine-track-".concat(e.id));t&&this.$.removeChild(t);e=ni.get(e);Array.isArray(e)&&e.forEach(function(e){var t=Ve(e,2),e=t[0],t=t[1];n.$.removeEventListener(e,t)})},e.getCuesForTrack=function(e){e=this.getTrackById("telecine-track-".concat(e.id));return e?Be(e.cues):[]},e.getActiveCuesForTrack=function(e){e=this.getTrackById("telecine-track-".concat(e.id));return e?Be(e.activeCues):[]},e.setModeForTrack=function(e,t){var n=this.getTrackById("telecine-track-".concat(e.id));return n&&n.mode!==ei[t]&&(n.mode=ei[t],ti||"disabled"===t||e.dispatchEvent("cuechange")),this},e.setSrcForTrack=function(e,t){e=this.$.querySelector("#telecine-track-".concat(e.id));return e&&null===e.track.cues&&(e.src=t),this},e.pt=function(e,t){var n,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;this.wt||(this.wt=this.$.addTextTrack("chapters"),this.wt.mode="hidden");var r=e.timecode,o=i?i.timecode:t,i=window.VTTCue||window.TextTrackCue;try{n=new i(r,o,e.title)}catch(e){throw new Vn("ChaptersNotSupported","Chapters are not supported in this browser.")}n.size=(o-r)/t,n.id=r,this.wt.addCue(n)},e.addChapter=function(e,t){var n=this.video.chapters,t={timecode:e,title:t};n.push(t),n.sort(function(e,t){return e.timecode-t.timecode});n=n[n.indexOf(t)+1];this.pt(t,this.video.duration,n),this.yt(this.wt,this.video.duration)},e.removeChapter=function(t){try{this.wt.removeCue(t)}catch(t){throw new Vn("ChaptersNotSupported","Chapters are not supported in this browser.")}var e=this.video.chapters.find(function(e){return e.timecode===t.timecode});this.video.chapters.splice(e,1),this.yt(this.wt,this.video.duration)},e.yt=function(e,t){for(var n=0;n<e.cues.length;n++){var i=e.cues[n],r=e.cues[n+1],r=r?r.startTime:t;i.endTime=r,i.size=(r-i.startTime)/t}this.fire(fn.CHAPTER_CUES_UPDATED)},e.addChapters=function(n,i){var r=this;0!==n.length&&i&&(n=n.filter(function(e){return r.gt(e,i)})).sort(function(e,t){return e.timecode-t.timecode}).forEach(function(e,t){return r.pt(e,i,n[t+1])})},e.addCuePoint=function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(this._t||(this._t=this.$.addTextTrack("metadata"),this._t.mode="hidden",this._t.addEventListener("cuechange",function(e){Be(e.target.activeCues).forEach(function(e){t.fire(fn.CUE_POINT,$n.fromVTTCue(e))})}),this.$.addEventListener("canplay",function(e){t._t.mode="hidden"})),e=parseFloat(e),isNaN(e))throw new TypeError("Time must be a number.");if(e<0||e>=this.duration)throw new TypeError("Time must be a positive number less than the duration of the video.");n=new $n(e,n);return this._t.addCue(n.vttCue),n},e.removeCuePoint=function(e){if(!e)throw new Vn("InvalidCuePoint","The specified cue point is not valid.");return this._t.removeCue(e.vttCue),!0},e.removeAllCuePoints=function(){var t=this;return this._t&&this._t.length&&Be(this._t.cues).forEach(function(e){t._t.removeCue(e)}),!0},e.onerror=function(){if(!this.$.error)return!1;switch(this.$.error.code){case this.$.error.MEDIA_ERR_SRC_NOT_SUPPORTED:return this.kt("MediaSrcNotSupportedError","The media was not suitable."),this.Et(),!1;case this.$.error.MEDIA_ERR_DECODE:return-1!==this.lt&&An.iOS?(this.$.load(),this.currentTime=this.lt,this.lt=-1):(this.kt("MediaDecodeError","The media could not be decoded."),this.Et()),!1;case this.$.error.MEDIA_ERR_NETWORK:return this.kt("MediaNetworkError","A network error ocurred while fetching the media."),!1;case this.$.error.MEDIA_ERR_ABORTED:return this.kt("MediaAbortedError","The user agent aborted the fetching of the media."),!1;default:return this.kt("MediaUnknownError","An unknown error occurred."),!1}},e.kt=function(e,t){this.fire(un.ERROR,new Vn(e,t))},e.onended=function(){if(this.$.paused||this.$.pause(),this.currentTime<this.$.duration)return!1},e.onwaiting=function(){return!1},e.onwebkitbeginfullscreen=function(){this.ct=!0},e.onwebkitendfullscreen=function(){this.ct=!1},e.onwebkitpresentationmodechanged=function(){this.Tt()},e.onenterpictureinpicture=function(){this.Tt()},e.onleavepictureinpicture=function(){this.Tt()},e.Tt=function(){this.fire(fn.PRESENTATION_MODE_CHANGE,this.presentationMode)},e.shouldHandleVideoEvent=function(e){return!0},e.handleVideoEvent=function(e){e.target===this.$&&!1!==this.shouldHandleVideoEvent(e)&&("function"==typeof this["on".concat(e.type)]&&!1===this["on".concat(e.type)](e)||this.fire(e.type))},e.swapVideo=function(e,t){var n=e.paused;this.removeVideoEventListeners(e),e.parentElement.replaceChild(t,e),e.pause(),t.currentTime=e.currentTime,n||t.play(),this.addVideoEventListeners(t),this.$=t},e.onexternaldisplayactivated=function(e){this.st||(this.$!==e.element&&(this.St=this.$,this.swapVideo(this.$,e.element)),this.st=!0)},e.onexternaldisplaydeactivated=function(e){this.st&&(this.St&&(this.swapVideo(e.element,this.St),this.St=null),this.st=!1)},e.setVideoSrc=function(e){this.$.src=e},e.canSeekTo=function(e){var t=this.duration;if(t&&t<e&&(e=t),0<this.$.seekable.length)for(var n=0,i=this.$.seekable.length;n<i;n++)if(this.$.seekable.start(n)<=e&&this.$.seekable.end(n)>=e)return!0;return!1},e.seekToTime=function(i){var r=this;return this.canSeekTo(i)?(this.$.currentTime=i,ee.resolve(this.$.currentTime)):new ee(function(e,t){function n(){r.canSeekTo(i)&&(Object.keys(un).forEach(function(e){e=un[e];r.$.removeEventListener(e,n)}),r.$.currentTime=i,e(r.$.currentTime))}Object.keys(un).forEach(function(e){e=un[e];r.$.addEventListener(e,n)})})},e.takeSnapshot=function(){var e=this.Z.querySelector("[telecine-snapshot]");e||((e=document.createElement("canvas")).setAttribute("telecine-snapshot",""),this.Z.appendChild(e)),e.setAttribute("width","".concat(this.Z.clientWidth,"px")),e.setAttribute("height","".concat(this.Z.clientHeight,"px")),e.style.display="";var t=Fn(this.$.clientWidth,this.$.clientHeight,this.$.videoWidth,this.$.videoHeight),n=t.width,i=t.height,r=t.left,t=t.top;e.style.cssText="position:absolute;width:".concat(n,"px;height:").concat(i,"px;left:").concat(r,"px;top:").concat(t,"px");t=e.getContext("2d");0<e.width&&0<e.height&&t.drawImage(this.$,0,0,e.width,e.height)},e.removeSnapshot=function(){var e=this.Z.querySelector("[telecine-snapshot]");e&&(e.style.display="none")},e.getTrackById=function(e){if(this.ht&&this.ht[e])return this.ht[e];if("function"==typeof this.$.textTracks.getTrackById)return this.$.textTracks.getTrackById(e);e=document.getElementById(e);return e?e.track:null},e.initDrm=function(){var e=this.nt.drmHandler;e&&e.init(this)},e.showExternalDisplayPicker=function(t){if(!this.et.length)throw new Vn("ExternalDisplayUnvailable","No external displays are available.");if(t){var e=this.et.filter(function(e){return e.constructor.displayName.replace("ExternalDisplay","")===t})[0];if(!e)throw new Vn("InvalidExternalDisplay","The specified external display is not available.");e.showPicker()}else this.et[0].showPicker()},e.xt=function(){this.$.requestPictureInPicture()},e.At=function(){document.exitPictureInPicture()},e.Mt=function(){return this.Ct.length<1?null:this.Ct.slice(0).sort(function(e,t){return e.priority-t.priority})[0]},e.Rt=function(){var e=this.Mt();e?this.currentFile=e:this.fire(fn.SCANNER_ERROR,{reason:"all files failed"})},e.gt=function(e,t){return void 0!==e.timecode&&0<=e.timecode&&e.timecode<=t&&void 0!==e.title},e.Et=function(){var e=this.Ct.indexOf(this.it);this.Ct.splice(e,1),this.Rt()},e.rt=function(){var e,t=this;"mediaSession"in navigator&&(e={title:this.nt.title,artist:this.nt.subtitle,artwork:[]},this.nt.metadata.thumbnail&&e.artwork.push({src:this.nt.metadata.thumbnail}),navigator.mediaSession.metadata=new MediaMetadata(e),"function"==typeof navigator.mediaSession.setActionHandler&&(navigator.mediaSession.setActionHandler("play",function(){t.play().then(function(){return t.fire(pn.MEDIASESSION_PLAY)}).catch(t.ft.bind(t))}),navigator.mediaSession.setActionHandler("pause",function(){t.pause(),t.fire(pn.MEDIASESSION_PAUSE)}),navigator.mediaSession.setActionHandler("seekforward",function(){t.currentTime=Math.min(t.duration,t.currentTime+10),t.fire(pn.MEDIASESSION_SEEK_FORWARD)}),navigator.mediaSession.setActionHandler("seekbackward",function(){t.currentTime=Math.max(0,t.currentTime-10),t.fire(pn.MEDIASESSION_SEEK_BACKWARD)})))},H(s,[{key:"chaptersTrack",get:function(){return this.wt}},{key:"manifest",get:function(){return this.It}},{key:"buffered",get:function(){return Yn.from(this.$.buffered)}},{key:"cuePoints",get:function(){return this._t?Be(this._t.cues).map(function(e){return $n.fromVTTCue(e)}):[]}},{key:"currentFile",get:function(){return this.it},set:function(e){var t,n=this,i=!this.$.paused,r=this.currentTime,o=!this.it||e.video.id!==this.it.video.id;o||this.takeSnapshot(),this.it=e,o&&(this.$.preload=this.at),this.constructor===s&&0<this.$.readyState&&(this.$.currentTime=0),(An.iOS||An.android)&&this.it.video.title?(t=this.it.video.title,this.it.video.subtitle&&(t="".concat(t," ").concat(this.it.video.subtitle)),this.$.setAttribute("title",t)):this.$.removeAttribute("title"),this.setVideoSrc(this.it.src,o),this.fire(fn.CURRENT_FILE_CHANGE,e),An.iOS&&!o&&this.play().catch(this.ft.bind(this)),this.constructor!==s||o?i&&this.play().catch(this.ft.bind(this)):(this.seekToTime(r).then(function(e){return i&&n.play().catch(n.ft.bind(n)),e}).catch(function(){}),this.once("canplay",function(){return n.removeSnapshot()}),this.once("playing",function(){return n.removeSnapshot()}))}},{key:"currentTime",get:function(){return this.$.currentTime},set:function(e){this.seekToTime(e)}},{key:"duration",get:function(){return this.$.duration}},{key:"ended",get:function(){return this.$.ended}},{key:"externalDisplayAvailable",get:function(){return this.et.some(function(e){return e.available})}},{key:"externalDisplayActive",get:function(){return this.et.some(function(e){return e.active})}},{key:"loop",get:function(){return this.$.loop},set:function(e){this.$.loop=e}},{key:"isLowerProfileAvailable",get:function(){return null}},{key:"muted",get:function(){return this.$.muted},set:function(e){this.$.muted=e}},{key:"playsinline",get:function(){return this.$.playsinline},set:function(e){(this.$.playsinline=e)?this.$.setAttribute("playsinline",""):this.$.removeAttribute("playsinline")}},{key:"paused",get:function(){return this.$.paused}},{key:"defaultPlaybackRate",get:function(){return this.$.defaultPlaybackRate},set:function(e){this.$.defaultPlaybackRate=e}},{key:"playbackRate",get:function(){return this.$.playbackRate},set:function(e){this.$.playbackRate=e}},{key:"played",get:function(){return this.$.played}},{key:"seekable",get:function(){return this.$.seekable}},{key:"seeking",get:function(){return this.$.seeking}},{key:"preload",get:function(){return this.at},set:function(e){this.$.preload=e,this.at=e}},{key:"autoPictureInPicture",get:function(){return this.$.autoPictureInPicture},set:function(e){this.$.autoPictureInPicture=e}},{key:"disablePictureInPicture",get:function(){return this.$.disablePictureInPicture},set:function(e){this.$.disablePictureInPicture=e}},{key:"presentationMode",get:function(){return this.$.webkitPresentationMode||(document.pictureInPictureElement?"picture-in-picture":"inline")},set:function(e){if(-1===this.supportedPresentationModes.indexOf(e))throw new Vn("InvalidPresentationMode","The â€œ".concat(e,"â€ presentation mode is not supported."));"pictureInPictureEnabled"in document?"picture-in-picture"===e?this.xt():document.pictureInPictureElement===this.$&&this.At():"function"==typeof this.$.webkitSetPresentationMode&&this.$.webkitSetPresentationMode(e)}},{key:"supportedPresentationModes",get:function(){var e=["inline"];return"pictureInPictureEnabled"in document?document.pictureInPictureEnabled&&!this.$.disablePictureInPicture&&e.push("picture-in-picture"):"function"==typeof this.$.webkitSupportsPresentationMode&&this.$.webkitSupportsPresentationMode("picture-in-picture")&&e.push("picture-in-picture"),e}},{key:"video",get:function(){return this.nt},set:function(i){var e,t,r=this;this.reactivate(),this.nt!==i&&(this.nt&&(this.nt.off("filesrcupdate"),this.nt.off("texttracksrcupdate")),this.removeAllCuePoints(),this.nt=i,this.Ct=i.files.filter(function(e){return-1!==r.constructor.supportedVideoTypes.indexOf(e.mime)}),this.nt.on("filesrcupdate",function(e){e===r.it&&r.Rt()}),this.nt.on("texttracksrcupdate",function(e){r.video.currentScanner&&r.video.currentScanner.setSrcForTrack(e,e.src)}),this.tt.externalDisplays&&this.tt.externalDisplays.length&&(this.et=[],e=this.constructor.supportedExternalDisplays,t=(e=!Array.isArray(e)?[]:e).map(function(e){return e.displayName}),this.tt.externalDisplays.filter(function(e){return e.supported&&-1!==t.indexOf(e.displayName)}).forEach(function(e){var t=new e(i),n=e.displayName.replace("ExternalDisplay","");t.on(un.LOADED_METADATA,function(e){return r.fire(un.LOADED_METADATA,e)}),t.on("available",function(){return r.fire(ln.AVAILABLE,{type:n})}),t.on("unavailable",function(){return r.fire(ln.UNAVAILABLE,{type:n})}),t.on("activated",function(){"function"==typeof r.onexternaldisplayactivated&&r.onexternaldisplayactivated(t),r.fire(ln.ACTIVATED,{type:n})}),t.on("deactivated",function(){"function"==typeof r.onexternaldisplaydeactivated&&r.onexternaldisplaydeactivated(t),r.fire(ln.DEACTIVATED,{type:n})}),r.et.push(t)})),this.Rt(),An.iOS&&this.et.forEach(function(e){"AirPlay"===e.constructor.displayName&&(e.element=r.$)}),this.initDrm())}},{key:"videoElement",get:function(){return this.$}},{key:"videoWidth",get:function(){return this.$.videoWidth}},{key:"videoHeight",get:function(){return this.$.videoHeight}},{key:"volume",get:function(){return this.$.volume},set:function(e){this.$.volume=e}},{key:"readyState",get:function(){return this.$.readyState}}]),s}(),N={};try{N.Set=Set}catch(e){Jn=0,Xn=Object.defineProperties,(Is=Xn(ri.prototype,{size:{configurable:!0,get:function(){return this.Ot.length}}})).add=function(e){return oi(this,e)||this.Ot.push(e),this},Is.clear=function(){var e=this.Ot.length;this.Ot.splice(0,e)},Is.delete=function(e){return oi(this,e)&&!!this.Ot.splice(Jn,1)},Is.entries=function(){return this.Ot.map(si)},Is.forEach=function(n,i){this.Ot.forEach(function(e,t){n.call(i,e,e,this)},this)},Is.has=function(e){return oi(this,e)},Is.keys=Is.values=function(){return this.Ot.slice(0)},N.Set=ri}function ri(e){Xn(this,{Ot:{value:[]}}),e&&e.forEach(this.add,this)}function oi(e,t){return-1<(Jn=e.Ot.indexOf(t))}function si(e){return[e,e]}var ai=N.Set,ci={MANIFEST:"manifest",SEGMENT:"segment"},ui={method:"GET",async:!0,retry:0,throwHttpErrors:!0,headers:{},hooks:{beforeRequest:[],beforeRetry:[],afterResponse:[]},validateStatus:function(e){return 200<=e&&e<300},retryStatus:function(e){return[408,413,429].includes(e)||500<=e&&e<600}};function li(e,t){var n=this;this.headers={},this.perfTimings={},ue(this,t),this.ok=2==(this.status/100|0),this.body=e,this.text=function(){return ee.resolve(e)},this.json=function(){return ee.resolve(JSON.parse(e))},this.blob=function(){return ee.resolve(new Blob([e]))},this.arrayBuffer=function(){return ee.resolve(e)},this.clone=function(){return new li(e,n)}}var di,fi,hi,vi,pi=(W(_i,vi=G(Error)),_i),mi=(W(wi,hi=G(Error)),wi),gi=(W(Ei,fi=G(Error)),Ei),bi=(W(yi,di=G(Error)),yi);function yi(e){var t;return(t=di.call(this,"Request timed out.")||this).name="TimeoutError",t.timeoutMs=e,t}function Ei(){var e;return(e=fi.call(this,"A network error occurred.")||this).name="NetworkError",e}function wi(e){var t;return(t=hi.call(this,e.statusText)||this).name="HTTPError",t.response=e,t}function _i(){var e;return(e=vi.call(this,"The operation was aborted.")||this).name="AbortError",e}function Ti(){}function Si(e,t,n){if(!e.s){if(n instanceof Ai){if(!n.s)return void(n.o=Si.bind(null,e,t));1&t&&(t=n.s),n=n.v}n&&n.then?n.then(Si.bind(null,e,t),Si.bind(null,e,2)):(e.s=t,e.v=n,(n=e.o)&&n(e))}}var Ai=(ki.prototype.then=function(n,i){var r=new ki,e=this.s;if(e){e=1&e?n:i;if(e){try{Si(r,1,e(this.v))}catch(e){Si(r,2,e)}return r}return this}return this.o=function(e){try{var t=e.v;1&e.s?Si(r,1,n?n(t):t):i?Si(r,1,i(t)):Si(r,2,t)}catch(e){Si(r,2,e)}},r},ki);function ki(){}function Li(e){return e instanceof Ai&&1&e.s}function Ri(a){var c=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return ee.resolve(function(s){return function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}(s,function(i){var r=!1;u++;var o=function(e){if(!a.retryAbortErrors&&e instanceof pi)return 0;if(e instanceof bi)return 0;if(u>=a.retry)return 0;if(e instanceof mi){if(!a.retryStatus(e.response.status))return 0;var t=e.response.headers["retry-after"];if(t&&a.retryStatus(e.response.status)){var n=Number(t);return isNaN(n)?n=Date.parse(t)-Date.now():n*=1e3,n}if(413===e.response.status)return 0}return.3*Math.pow(2,u-1)*1e3}(i);return function(e,t){var n=function(){if(0!==o&&u>0)return function(e,t,n){return e&&e.then||(e=ee.resolve(e)),t?e.then(t):e}(function(n){return new ee(function(e,t){return setTimeout(e,n)})}(o),function(){var t=a.hooks.beforeRetry||[];return function(e,t){return e&&e.then?e.then(t):t()}(function(n,i,e){var r,o,s=-1;return function e(t){try{for(;++s<n.length;)if((t=i(s))&&t.then){if(!Li(t))return void t.then(e,o||(o=Si.bind(null,r=new Ai,2)));t=t.v}r?Si(r,1,t):r=t}catch(e){Si(r||(r=new Ai),2,e)}}(),r}(t,function(e){return function(e,t){return e&&e.then?e.then(Ti):ee.resolve()}((0,t[e])(a,i,u))}),function(){return r=!0,c(s)})})}();return n&&n.then?n.then(t):t(n)}(0,function(e){if(r)return e;if(a.throwHttpErrors)throw i})})}.apply(this,e))}catch(e){return ee.reject(e)}},u=0;return c}function Ci(e,t,n){return n?t?t(e):e:(e&&e.then||(e=ee.resolve(e)),t?e.then(t):e)}function xi(e,t,n){if(!e.s){if(n instanceof Ii){if(!n.s)return void(n.o=xi.bind(null,e,t));1&t&&(t=n.s),n=n.v}n&&n.then?n.then(xi.bind(null,e,t),xi.bind(null,e,2)):(e.s=t,e.v=n,(n=e.o)&&n(e))}}var Ii=(Oi.prototype.then=function(n,i){var r=new Oi,e=this.s;if(e){e=1&e?n:i;if(e){try{xi(r,1,e(this.v))}catch(e){xi(r,2,e)}return r}return this}return this.o=function(e){try{var t=e.v;1&e.s?xi(r,1,n?n(t):t):i?xi(r,1,i(t)):xi(r,2,t)}catch(e){xi(r,2,e)}},r},Oi);function Oi(){}function Di(i,r,o){var s,a,c=-1;return function e(t){try{for(;++c<i.length&&(!o||!o());)if((t=r(c))&&t.then){if(!((n=t)instanceof Ii&&1&n.s))return void t.then(e,a=a||xi.bind(null,s=new Ii,2));t=t.v}s?xi(s,1,t):s=t}catch(e){xi(s=s||new Ii,2,e)}var n}(),s}function Pi(e,t){return e&&e.then?e.then(t):t(e)}function Mi(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return ee.resolve(n.apply(this,e))}catch(e){return ee.reject(e)}}}var n=["get","post","put","patch","head","delete"],Ni={json:"application/json",text:"text/plain",arrayBuffer:"*/*",blob:"*/*"},Fi=["get"];function qi(e,r){var t=Mi(function(){var t=!1,n=!1,i=r.hooks.beforeRequest||[];return Pi(Di(i,function(e){return Ci((0,i[e])(r),function(e){return e instanceof Ui?(r=e,void(n=!0)):e instanceof li?(t=!0,ee.resolve(e).then(ji(r))):void 0})},function(){return n||t}),function(e){return t?e:(o=(i=r).url,s=i.method,a=i.body,c=i.onDownloadProgress,new ee(function(n,e){var t,r=new XMLHttpRequest;for(t in r.open(s.toUpperCase(),o,i.async),i.timeout&&(r.timeout=i.timeout),r.onload=function(){var i,e,t;(0!==r.status||r.responseURL&&0===r.responseURL.indexOf("file:"))&&(i={},r.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(e,t,n){i[t]=i[t]?"".concat(i[t],",").concat(n):n}),e={},window.performance&&void 0!==window.performance.getEntriesByType&&(!(t=window.performance.getEntriesByType("resource")).length||(t=t.filter(function(e){return e.name===r.responseURL}).sort(function(e,t){return e.connectStart-t.connectStart})).length&&(e=t[t.length-1].toJSON())),n(new li(r.response,{headers:i,statusText:r.statusText,status:r.status,url:r.responseURL,perfTimings:e})))},r.onabort=function(){e(new pi)},r.onerror=function(){e(new gi)},r.ontimeout=function(){e(new bi(i.timeout))},"function"==typeof c&&r.addEventListener("progress",c),i.headers)r.setRequestHeader(t,i.headers[t]);i.withCredentials&&(r.withCredentials=!0),i.responseType&&(r.responseType=i.responseType),i.abort=r.abort.bind(r),r.send(a||null)}).then(ji(r)));var i,o,s,a,c})}),n=r=new Ui(e,r),i=n.method,o=n.json,e=n.jwt,n=n.searchParams;o&&(r.headers["Content-Type"]=Ni.json,r.body=JSON.stringify(o)),e&&(r.headers.Authorization="jwt ".concat(e)),n&&(e=(o=Ve(r.url.split("?"),2))[0],o=o[1],r.url=ve(e,X(X({},he(o)),n)));var s,a=-1!==Fi.indexOf(i.toLowerCase())?Ri(r)(t):t();for(s in Ni)!function(t){a[t]=Mi(function(){return r.headers["Content-Type"]=Ni[t],Ci(a,function(e){return e.clone()[t]()})})}(s);return function e(t,n){var i=t.then.bind(t);return Object.assign(t,{abort:n,then:function(){return e(i.apply(void 0,arguments),n)}})}(a,function(){return r.abort()})}function Ui(e,t){ue(this,ui,e="string"==typeof e?{url:e}:e,t)}function ji(i){var e=i.validateStatus,r=i.throwHttpErrors,o=i.hooks;return Mi(function(t){var n=o.afterResponse||[];return Pi(Di(n,function(e){return Ci((0,n[e])(i,t.clone()),function(e){e instanceof li&&(t=e)})}),function(){if(!e||e(t.status))return t;if(r)throw new mi(t);return t})})}n.forEach(function(n){return qi[n]=function(e,t){return qi(e,X({method:n},t))}});var Hi={ARRAY_BUFFER:"arraybuffer"},M=Object.freeze({__proto__:null,ContentTypes:ci,defaults:ui,requestMethods:n,responseTypes:Ni,retryMethods:Fi,request:qi,Request:Ui,get:qi.get,post:qi.post,put:qi.put,patch:qi.patch,head:qi.head,Response:li,ResponseTypes:Hi,AbortError:pi,HTTPError:mi,NetworkError:gi,TimeoutError:bi});function Bi(e,t){var n=1<arguments.length&&void 0!==t?t:[];if(0===e.length)return 0;for(var i=0,r=0,o=0;o<e.length;o++){var s=n[o]||1;r+=s,i+=e[o]*s}return i/r}function Vi(e){e.sort(function(e,t){return e-t});var t=Math.floor(e.length/2);return e.length%2?e[t]:(e[t-1]+e[t])/2}function Wi(){return("undefined"!=typeof performance?performance:Date).now()}var $i,zi=(W(Ki,$i=G(Error)),Ki);function Ki(){return $i.apply(this,arguments)||this}function Gi(){}var Yi=[],Ji=[],Xi=[];function Zi(e,t,n){return n?t?t(e):e:(e&&e.then||(e=ee.resolve(e)),t?e.then(t):e)}var Qi=[],er=function(){function e(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.retryCount,n=void 0===t?3:t,i=e.parallel,r=void 0===i?1:i,t=e.includeWithSpeeds,i=void 0===t||t,t=e.timeout,t=void 0===t?0:t,e=e.retryAbortErrors,e=void 0===e||e;this.jt=[],this.Lt=new ai,this.Dt=new He,this.Pt=n,this.Nt=!1,this.Ft=!1,this.Ut=r,this.Vt=i,this.Bt=t,this.Ht=e,this.qt()}e.getPercentileSpeed=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:5,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:.8;return function(e,t){if(e.sort(),0===e.length)return 0;if(t<=0)return e[0];if(1<=t)return e[e.length-1];var n=e.length*t,i=Math.floor(n),n=n%1;return(t=i+1)>=e.length?e[i]:e[i]*(1-n)+e[t]*n}(Yi.slice(-e),t)},e.getAverageSpeed=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:5,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return Bi(Yi.slice(-e),t)},e.getHarmonicAverageSpeed=function(){return function(e){if(0===e.length)return 0;for(var t=0,n=0;n<e.length;n++)t+=1/e[n];return e.length/t}(Yi.slice(-(0<arguments.length&&void 0!==arguments[0]?arguments[0]:5)))},e.getVolatilityScaler=function(){var e=Yi.slice(-(0<arguments.length&&void 0!==arguments[0]?arguments[0]:5));if(e.length<3)return null;var t=Bi(e,[]);return Math.min.apply(Math,te(e))/t},e.getMedianSpeed=function(){return Vi(Yi.slice(-(0<arguments.length&&void 0!==arguments[0]?arguments[0]:5)))},e.getResponseSpeeds=function(){return Yi},e.getProgressSpeeds=function(){return Qi},e.getFailedSegments=function(){return Ji},e.getSuccessfulSegments=function(){return Xi};var t=e.prototype;return t.add=function(n,i){var r=this;return new ee(function(e,t){t=r.Wt(n,e,t);r.zt(t,i),r.Nt&&!r.Ft&&r.Gt()})},t.start=function(){this.Nt||(this.Nt=!0,this.Gt())},t.stop=function(){this.Nt=!1},t.abort=function(){var t=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;this.jt.filter(function(e){return!n||n===e.stream}).forEach(function(e){e.reject(new zi("Stream manually aborted")),t.fire("downloadabort",e.identifier)}),this.jt=this.jt.filter(function(e){return n&&n!==e.stream}),this.Lt.forEach(function(e){n&&n!==e.stream||e.request.abort()})},t.Kt=function(e){for(var t=0;t<this.jt.length&&!(this.jt[t].priority>e.priority);t++);this.jt.splice(t,0,e)},t.qt=function(){var e=this;this.Yt=new He,Q(this),window.addEventListener("online",function(){e.start(),e.Jt&&(e.Jt.resolve(),e.Jt=null)}),window.addEventListener("offline",function(){e.stop(),e.abort(),e.Jt=new le})},t.zt=function(e,t){e.hasOwnProperty("priority")?this.Kt(e):this.jt[t?"unshift":"push"](e)},t.Gt=function(){if(this.Nt){this.Ft=!0;for(var e=this.Ut-this.Lt.size,t=0;t<e;t++)this.$t()}},t.Wt=function(e,t,n){var i=e;return e.id&&(i=e.id),X(X({},e),{},{identifier:i,resolve:t,reject:n})},t.Xt=function(){0!==this.Lt.size||0!==this.jt.length?this.Lt.size<this.Ut&&this.Gt():this.Ft=!1},t.$t=function(){var e,t,n,i,r,o,s;0!==this.jt.length?(t=(e=this.jt.shift()).url,n=e.byteRange,s=e.isInitSegmentRequest,i=e.identifier,o=e.timeout,r={stream:e.stream,data:{url:t,isInitSegmentRequest:s,requestSendTime:Wi(),uuid:([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(e^16*Math.random()>>e/4).toString(16)})}},s=this.Bt,0<=(o=parseInt(o,10))&&(s=o),s={url:t,type:ci.SEGMENT,responseType:Hi.ARRAY_BUFFER,retry:this.Pt,hooks:{beforeRetry:[this.Zt.bind(this)]},onDownloadProgress:this.Qt(i,r),headers:n&&{Range:"bytes=".concat(n)},retryAbortErrors:this.Ht,timeout:s},this.fire("downloadstart",i),r.request=qi(s).then(this.tn(r,e)).catch(this.nn(r,e)),this.Lt.add(r)):this.Ft=!1},t.Zt=function(){try{var t=this;return function(){var e=function(){if(t.Jt)return(e=t.Jt)&&e.then?e.then(Gi):ee.resolve();var e}();if(e&&e.then)return e.then(Gi)}()}catch(t){return ee.reject(t)}},t.Qt=function(r,o){var s=this,a=0,c=0,u=Wi();return function(e){var t,n,i;e.lengthComputable&&(t=8*(e.loaded-c),n=Wi(),i={startTime:u,length:i=n-u,bitrate:t/(i/1e3),index:a},0<a&&(100<=Qi.length&&Qi.shift(),Qi.push(i)),u=n,c=e.loaded,a+=1,s.Yt.set(o,{bytesTotal:e.total,bytesLoaded:e.loaded,percent:e.loaded/e.total,identifier:r}),s.fire("progress",r))}},t.tn=function(n,i){var r=this,o=Wi(),s=i.identifier,a=i.resolve;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return ee.resolve(function(e){return Zi(e.arrayBuffer(),function(t){return n.data.duration=Wi()-n.data.requestSendTime,r.Lt.delete(n),r.Yt.delete(n),r.in(i,o,t.byteLength),r.fire("downloadend",s,{request:n,response:e}),Xi.push({url:n.data.url,status:200,duration:n.data.duration}),Zi(r.en(n,t),function(e){a(t=e),r.Xt()})})}.apply(this,e))}catch(e){return ee.reject(e)}}},t.in=function(e,t,n){e=e.includeWithBandwidthChecks,t=(Wi()-t)/1e3;8e3<n&&(t=8*n/t,100<Yi.length&&Yi.shift(),this.Vt&&e&&Yi.push(t))},t.en=function(e,t){return e.data.url&&e.data.url.match(".ts$")?this.rn(e,t):ee.resolve(new Uint8Array(t))},t.rn=function(i,e){try{var r=this;return t=function(){return new ee(function(n){r.un.on("data",function(e){r.un.off("data");var t=new Uint8Array(e.initSegment.byteLength+e.data.byteLength);t.set(e.initSegment,0),t.set(e.data,e.initSegment.byteLength),n(i.data.isInitSegmentRequest?e.initSegment:t)}),r.un.push(new Uint8Array(e)),r.un.flush()})},(n=function(){if(!r.un)return Zi(ce("module/mux-mp4.js"),function(e){r.un=new e({keepOriginalTimestamps:!0})})}())&&n.then?n.then(t):t()}catch(i){return ee.reject(i)}var t,n},t.nn=function(n,e){var i=this,r=e.identifier,o=e.reject,s=e.size;return function(e){var t=Wi()-n.data.requestSendTime;n.data.duration=t,e instanceof pi?(Ji.push({url:n.data.url,status:"abort",duration:t}),i.fire("downloadabort",r)):e instanceof mi?(Ji.push({url:n.data.url,status:e.response.status,duration:t}),i.fire("downloaderror",r,e.response.status)):e instanceof bi&&(Ji.push({url:n.data.url,status:"timeout",duration:t}),0<s&&0<e.timeoutMs&&(t=8*s/(e.timeoutMs/1e3),Yi.push(t*=.5)),i.fire("downloadtimeout",r,{timeoutMs:e.timeoutMs})),i.Yt.delete(n),i.Lt.delete(n),o(e),i.Xt()}},H(e,[{key:"parallel",get:function(){return this.Ut},set:function(e){this.Ut=e}},{key:"pendingFetches",get:function(){var n=this,i=[];return this.Lt.forEach(function(e){var t;n.Yt.get(e)&&((t=n.Yt.get(e)).elapsedTime=Wi()-e.data.requestSendTime,i.push(t))}),i}}]),e}(),tr=((Ee=wr.prototype).addStream=function(e){var t=this;e.on("segmentadd",function(){return t.Sn()});var n=this.vn.push(e)-1;e.index=n,null===this.cn&&(this.xn(n),this.ln=!0)},Ee.streamIndexAtTime=function(e){return this._n[void 0]?{stream:this.activeStreamIndex}:this._n[Math.floor(e/6)]},Ee.switchTo=function(e){var t=this,n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],i=e;"object"===U(e)&&(i=e.index);var r,o=this.cn!==i,s=o;return(o=!(o||!this.ln)||o)&&(this.ln=!1,r=this.cn,e=this.vn[r],this.fire("streamchangestart",r,i),e&&s&&n&&e.abort(),this.An=i,this.xn(i)),this.Sn(),new ee(function(e){o?t.Mn=function(){t.An===i&&(t.Mn=null,e(),t.fire("streamchange",i))}:e()})},Ee.isTimeInBuffer=function(e){for(var t=0;t<this.sn.buffered.length;t++){var n=this.sn.buffered.start(t),i=this.sn.buffered.end(t);if(n<=e&&e<=i)return!0}return!1},Ee.hasAppendedFinalSegment=function(){return void 0!==this.wn&&this.isTimeInBuffer(this.wn)},Ee.clear=function(){this.vn.forEach(function(e){return e.clear()})},Ee.remove=function(n){var i=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.an.Cn.duration;return new ee(function(e,t){i.dn.push([n,r,e]),i.Sn()})},Ee.removeEventListeners=function(){this.sn&&this.sn.removeEventListener("updateend",this.kn)},Ee.Tn=function(){var e=this.an.Cn.duration,t=Math.floor(e/6);t+=1<6%e?1:0;for(var n=0;n<t;n++)this._n[n]={stream:null,segment:n,type:"video"}},Ee.Rn=function(){this.sn.addEventListener("updateend",this.kn)},Ee.xn=function(e){this.fn=!0,this.cn=e,this.an.In.streamIndex=e},Ee.En=function(){this.On(),this.jn(),this.Sn()},Ee.On=function(){if(this.bn&&this.endTime)return this.bn=!1,this.wn=this.endTime,void this.an.checkEndOfStream();!this.activeStream.hasNextSegment()&&0<this.wn&&"open"===this.an.Cn.readyState&&this.an.checkEndOfStream()},Ee.jn=function(){this.hn&&(this.fire("appendbufferend",this.hn),this.hn=null,this.Mn&&this.Mn())},Ee.Sn=function(){if(this.sn){if(this.activeStream&&"closed"!==this.an.Cn.readyState&&!this.sn.updating)if(this.dn.length)this.Ln();else if(!this.pn&&!this.yn)return this.fn?(this.fn=!1,void this.Dn()):void this.Pn()}else this.on("sourcebufferattach",this.Sn)},Ee.Ln=function(){var n=this,e=Ve(this.dn.shift(),3),t=e[0],i=e[1],r=e[2];this.sn.addEventListener("updateend",function e(t){n.sn.removeEventListener("updateend",e),r(),clearTimeout(n.mn),n.mn=setTimeout(function(){n.pn=!1,n.Sn()},5e3)}),this.sn.remove(t,i)},Ee.Dn=function(){var t=this;this.yn=!0,this.activeStream.getInitSegment().then(function(e){return t.hn=null,t.sn.appendBuffer(e),t.yn=!1,e}).catch(function(e){t.fn=!0,t.yn=!1})},Ee.Pn=function(){var e=this.activeStream.getNextSegment();if(null!==e){var t,n=this.activeStream.getIdForSegment(e);this.activeStream.isFinal(e)&&(this.bn=!0),this.hn=n,this.fire("appendbufferstart",n);try{this.sn.appendBuffer(e),this._n[n.segment]=n,this.gn&&(this.gn=!1,this.fire("initialbufferstart"))}catch(n){"QuotaExceededError"===n.name&&(this.pn=!0,this.fire("quotaexceedederror",this.sn.buffered),6<this.an.$.currentTime&&(t=this.an.$.currentTime-6,this.an.removeBuffer(0,t)),this.activeStream.Nn.unshift(e))}}},H(wr,[{key:"streams",get:function(){return this.vn}},{key:"activeStreamIndex",get:function(){return this.cn}},{key:"activeStream",get:function(){return this.vn[this.cn]}},{key:"sourceBuffer",get:function(){return this.sn},set:function(e){this.sn=e,this.Rn(),this.fire("sourcebufferattach")}},{key:"endTime",get:function(){var e=this.sn.buffered;if(0<e.length)return e.end(e.length-1)}}]),wr),nr=function(){function u(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:new er;Q(this),this.Nn=[],this.Fn=e,this.fn=!0,this.Un=NaN,this.Vn=t,this.Bn=n,this.Bn.start(),this.Hn=new He,this.qn={}}u.isValidSegmentUrl=function(e){return"string"==typeof e||"string"==typeof e.url&&"string"==typeof e.byteRange};var e=u.prototype;return e.getIdForSegment=function(e){return u.isValidSegmentUrl(e)?this.qn[e]:this.Hn.get(e).id},e.isFinal=function(e){return this.Hn.get(e).final},e.addSegment=function(t){var n=this,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=e.identifier,r=void 0===i?null:i,o=e.isFinalSegment,s=void 0!==o&&o,a=e.loadOnly,c=void 0!==a&&a,i=e.priority,o=void 0===i?0:i,a=e.includeWithBandwidthChecks,i=void 0===a||a,a=e.timeout,a=void 0===a?null:a,e=e.size,e=void 0===e?null:e;return this.fn&&this.getInitSegment(),u.isValidSegmentUrl(t)?(this.qn[t]=r||t,this.fire("queued",this.getIdForSegment(t)),this.Bn.add({url:t.url||t,byteRange:t.byteRange,id:this.getIdForSegment(t),stream:this,includeWithBandwidthChecks:i,isInitSegmentRequest:!1,priority:o,timeout:a,size:e}).then(function(e){n.Hn.set(e,{id:r||t,final:s}),n.Nn.push(e),n.fire("bufferqueueadd",n.getIdForSegment(t)),c||n.fire("segmentadd")})):(this.Hn.set(t,{id:r,final:s}),this.Nn.push(t),this.fire("bufferqueueadd",r),ee.resolve())},e.clear=function(){this.Nn=[]},e.abort=function(){var e=this;this.getInitSegment().then(function(){e.Bn.abort(e)}).catch(function(e){})},e.hasNextSegment=function(){return 0<this.Nn.length},e.getNextSegment=function(){return 0===this.Nn.length?null:this.Nn.shift()},e.getInitSegment=function(){var t=this,e="object"===U(this.Fn)&&"url"in this.Fn?this.Fn.url:this.Fn;return e?(this.fn=!1,u.isValidSegmentUrl(e)?this.Bn.add({url:e,byteRange:this.Fn.byteRange,id:null,stream:this,isInitSegmentRequest:!0}).then(function(e){return t.Fn=e,t.Fn}):ee.resolve(this.Fn)):ee.resolve(null)},H(u,[{key:"codec",get:function(){return this.Vn},set:function(e){this.Vn=e}},{key:"index",get:function(){return this.Un},set:function(e){this.Un=e}},{key:"pendingFetches",get:function(){return this.Bn.pendingFetches}}]),u}(),ir=((g=Er.prototype).start=function(){return this.$n(),this},g.stop=function(){return this.Xn(),this},g.destroy=function(){this.Xn(),this.Zn()},g.getDroppedFrameRate=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"average",t=this.zn[t];if(!t)return 0;if(t.length<e)return 0;e=t.slice(-e);return("median"===n?Vi:Bi)(e)},g.getDroppedFrameTotal=function(){return{dropped:this.Qn(),total:this.ti()}},g.Rn=function(){this.$.addEventListener("playing",this.bound.startCheckingDroppedFrames),this.$.addEventListener("pause",this.bound.stopCheckingDroppedFrames),this.$.addEventListener("ended",this.bound.stopCheckingDroppedFrames)},g.Zn=function(){this.$.removeEventListener("playing",this.bound.startCheckingDroppedFrames),this.$.removeEventListener("pause",this.bound.stopCheckingDroppedFrames),this.$.removeEventListener("ended",this.bound.stopCheckingDroppedFrames)},g.$n=function(){this.Nt=!0,this.ni()},g.Xn=function(){this.Nt=!1},g.ni=function(){var e,t,n,i=this;this.Nt&&null!==this.Jn&&(clearTimeout(this.Wn),e=(n=this.Qn())-this.Kn,this.Kn=n,n=(t=this.ii())-this.Yn,this.Yn=t,this.zn[this.Jn]||(this.zn[this.Jn]=[]),this.Gn[this.Jn]||(this.Gn[this.Jn]=[]),100<this.zn[this.Jn].length&&this.zn[this.Jn].shift(),100<this.Gn[this.Jn].length&&this.Gn[this.Jn].shift(),this.zn[this.Jn].push(e),this.Gn[this.Jn].push(n),this.Wn=setTimeout(function(){i.ni()},1e3))},g.Qn=function(){return"function"==typeof this.$.getVideoPlaybackQuality?this.$.getVideoPlaybackQuality().droppedVideoFrames:this.$.webkitDroppedFrameCount||0},g.ti=function(){return"function"==typeof this.$.getVideoPlaybackQuality?this.$.getVideoPlaybackQuality().totalVideoFrames:this.$.webkitDecodedFrameCount||0},g.ii=function(){if("function"!=typeof this.$.getVideoPlaybackQuality)return this.$.webkitDecodedFrameCount||0;var e=this.$.getVideoPlaybackQuality();return e.totalVideoFrames-e.droppedVideoFrames-e.corruptedVideoFrames},H(Er,[{key:"streamIndex",get:function(){return this.Jn},set:function(e){this.Jn=e}}]),Er),rr=((ht=yr.prototype).switchTo=function(e){return 1===this.ri.length&&this.video.switchTo(e)},ht.getCurrentSpeed=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.type,n=void 0===t?"average":t,i=e.howMany,t=void 0===i?10:i,i=e.weights,i=void 0===i?[]:i,e=e.percentile,e=void 0===e?null:e;return"harmonicAverage"===n?er.getHarmonicAverageSpeed(t):"average"===n?er.getAverageSpeed(t,i):"median"===n?er.getMedianSpeed(t):er.getPercentileSpeed(t,e)},ht.getVolatilityScaler=function(e){return er.getVolatilityScaler(e)},ht.getResponseSpeeds=function(){return er.getResponseSpeeds()},ht.getFailedSegments=function(){return er.getFailedSegments()},ht.getSuccessfulSegments=function(){return er.getSuccessfulSegments()},ht.getDroppedFrameRate=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.activeStreamIndex;return this.In.getDroppedFrameRate(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:"average")},ht.getDroppedFrameTotal=function(){return this.In.getDroppedFrameTotal()},ht.clear=function(){this.ri.forEach(function(e){return e.clear()})},ht.streamIndexAtTime=function(e,t){return this.ei[t].streamIndexAtTime(e)?this.ei[t].streamIndexAtTime(e).stream:null},ht.removeBuffer=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.$.duration;if(t>=(n=n||0))return ee.resolve();var e=this.ri.map(function(e){return e.remove(t,n)});return ee.all(e)},ht.addStream=function(e,t){var n,i=this,r=this.ci(e);this.ei[r]||(n=new tr(this,r),this.ei[r]=n,this.ri.push(n),this.readyPromise.then(function(){var t;try{t=i.Cn.addSourceBuffer(e)}catch(e){if(22!==e.code)return void i.fire("srcnotsupported",e);t=i.ei[r]}i.tt.duration&&(t.appendWindowEnd=i.tt.duration+.1),n.sourceBuffer=t}).catch(function(e){}),["appendbufferstart","appendbufferend","streamchange","streamchangestart","initialbufferstart","quotaexceedederror"].forEach(function(t){n.on(t,function(e){i.fire(t,e)})}));var o=new nr(t,e,this.Bn);return["queued","bufferqueueadd"].forEach(function(t){o.on(t,function(e){i.fire(t,e)})}),this.ei[r].addStream(o),o},ht.checkEndOfStream=function(){var t=this;this.ri.every(function(e){return e.hasAppendedFinalSegment()})&&this.$.addEventListener("timeupdate",function e(){t.$.removeEventListener("timeupdate",e),t.ri.every(function(e){return e.isTimeInBuffer(t.$.currentTime)})&&t.endOfStream()})},ht.abortFetches=function(){this.Bn.abort()},ht.endOfStream=function(){"open"===this.Cn.readyState&&(this.li()||(this.Cn.endOfStream(),this.fire("endofstream")))},ht.destroy=function(){this.clear(),this.fi(),this.off(),this.In.destroy(),this.Bn.abort(),this.$.src&&(this.$.removeAttribute("src"),this.$.load())},ht.Rn=function(){var r=this;this.readyPromise=new ee(function(e,t){r.oi=e,r.Cn.addEventListener("sourceopen",r.ai)}),["downloadstart","downloadend","downloadabort","downloaderror","downloadtimeout","progress"].forEach(function(i){r.Bn.on(i,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.fire.apply(r,[i].concat(t))})})},ht.li=function(){for(var e=0;e<this.Cn.sourceBuffers.length;e++)if(this.Cn.sourceBuffers[e].updating)return!0;return!1},ht.si=function(){URL.revokeObjectURL(this.$.src),this.Cn.removeEventListener("sourceopen",this.ai),this.tt.duration&&(this.Cn.duration=this.tt.duration,this.fire("durationset")),this.oi()},ht.fi=function(){this.ri.forEach(function(e){return e.removeEventListeners()})},ht.ci=function(e){return 0===e.indexOf("audio")?"audio":"video"},H(yr,[{key:"mediaSource",get:function(){return this.Cn}},{key:"pendingFetches",get:function(){return this.Bn.pendingFetches}},{key:"streams",get:function(){return 1===this.ri.length&&this.video.streams}},{key:"activeStreamIndex",get:function(){return 1===this.ri.length&&this.video.activeStreamIndex}},{key:"video",get:function(){return!!this.ei.video&&this.ei.video}},{key:"audio",get:function(){return!!this.ei.audio&&this.ei.audio}}]),yr),qe=function(n){function e(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return(e=n.call(this,e)||this).tt=t,e.blacklisted=[],e.whitelisted=[],e.MAX_LOADABLE_SEGMENTS_AUTO=3,e.MAX_LOADABLE_SEGMENTS_LOCKED=15,e.SEGMENT_DURATION=6,e}W(e,n),H(e,[{key:"displayName",get:function(){return"MediaSource"}}]);var t=e.prototype;return t.isTimeInBuffer=function(e,t,n){return this.hi(e,e,t,n,1)},t.getDistanceFromBuffer=function(e,t){for(var n=e,i=0;i<t.length;i++)if(t.start(i)<=e&&t.end(i)>=e){n=t.end(i);break}return n-e},t.blacklist=function(e){this.blacklisted[e]=1},t.lock=function(){this.whitelisted=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]},t.filterStreams=function(e,t,n){for(var i,r,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,s=[],a=!1,c=0;c<e.length;c++)if(i&&i[0]===e[c].width&&i[1]===e[c].height)s.push(e[c]);else{if(a)break;this.blacklisted[c]&&-1===this.whitelisted.indexOf(c)||this.whitelisted.length&&-1===this.whitelisted.indexOf(c)||(this.whitelisted.length?s.push(e[c]):(r=this.di(t,n,e[c].width,e[c].height,o),(n<1e3/(window.devicePixelRatio||1)?1.75:1)<=r&&(a=!0),s.push(e[c]),i=[e[c].width,e[c].height]))}return s},t.getCurrentSpeed=function(){var e="average",t=3,n=[1,2,5];return this.tt.tests&&this.tt.tests.harmonic_average&&this.tt.tests.harmonic_average.group&&(e="harmonicAverage",t=this.vi(),n=[]),this.scanner.sorcerer.getCurrentSpeed({type:e,howMany:t,weights:n})},t.getAudioIndexFromVideo=function(e,t,n){if(0===t.length)return!1;if(!e[n])return 0;for(var i=0;i<t.length;i++){if(t[i].bitrate<8e4&&e[n].bitrate<5e5)return i;if(144e3<t[i].bitrate&&1e6<e[n].bitrate)return i}return 0},t.pi=function(e,t,n,i){var r=n/i,n=e-t*r,i=t-e/r,r=e-n;return[r=0<i?e:r,0<n?t:t-i]},t.di=function(e,t,n,i){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null,t=this.pi(e,t,n,i),i=n*i;r&&(i*=r);r=window.devicePixelRatio||1;return i/(t[0]*t[1]*r*r)},t.vi=function(){var e=Hn(this.tt,"lookahead_count");return e&&e.group&&e.data.count?e.data.count:e&&e.data.segment_lookahead_count?e.data.segment_lookahead_count:this.MAX_LOADABLE_SEGMENTS_AUTO},t.mi=function(e,t,n){n=n&&11e6<n.bitrate;return 1===this.whitelisted.length?n?30:this.MAX_LOADABLE_SEGMENTS_LOCKED*this.SEGMENT_DURATION:this.vi()*this.SEGMENT_DURATION},t.hi=function(e,t,n,i){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0;if(!n)return!1;t=Math.min(t,i);for(var o=0;o<n.length;o++){var s=jn(n.start(o))-r,a=jn(n.end(o))+r;if(s<=e&&t<=a)return!0}return!1},t.bi=function(e){return 0<e.video.length&&0<e.audio.length},t.wi=function(e,t,n,i){var r=1;return this.bi(i)&&(r=.05),this.hi(e.start,e.end,t,n,r)},e}(function(){function e(e){this.scanner=e}H(e,[{key:"displayName",get:function(){return"Brain"}}]);var t=e.prototype;return t.destroy=function(){},t.shouldPowerUp=function(e,t){return!1},t.shouldPowerDown=function(e,t){return!1},t.canPowerUp=function(e,t){return 1!==e.length&&t<e.length-1},t.canPowerDown=function(e,t){return 1!==e.length&&0<t},t.filterStreams=function(e){return e},e}()),or=function(t){function e(e){return(e=t.call(this,e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{})||this).BANDWIDTH_UPSWITCH_THRESHOLD=.85,e.BANDWIDTH_DOWNSWITCH_THRESHOLD=.9,e}W(e,t),H(e,[{key:"displayName",get:function(){return"Skyfire"}}]);var n=e.prototype;return n.shouldPowerUp=function(e,t,n){n&&this.tt.startingBandwidthThreshold&&(this.BANDWIDTH_UPSWITCH_THRESHOLD=this.tt.startingBandwidthThreshold);var i=e.indexOf(t);if(!this.canPowerUp(e,i=-1===i?0:i))return ee.resolve(!1);t=this.getCurrentSpeed();if(!t)return ee.resolve(!1);e=this.yi(t,this.BANDWIDTH_UPSWITCH_THRESHOLD,e);return e===i||!n&&i<e&&de(this.scanner.currentTime,this.scanner.$.buffered)<1.5*this.SEGMENT_DURATION?ee.resolve(!1):ee.resolve(e)},n.shouldPowerDown=function(e,t){var n=e.indexOf(t);if(-1===n){var i=this.isTimeInBuffer(this.scanner.$.duration,this.scanner.$.buffered,this.scanner.$.duration);return this.whitelisted.length||this.blacklisted.length||!i?ee.resolve(e.length-1):ee.resolve(!1)}if(!this.canPowerDown(e,n))return ee.resolve(!1);i=this.getCurrentSpeed();if(!i)return ee.resolve(!1);if(this.hasTooManyDroppedFrames(n,t,this.tt.droppedFrameSwitchPercent))return ee.resolve(n-1);e=this.yi(i,this.BANDWIDTH_DOWNSWITCH_THRESHOLD,e);return e===n?ee.resolve(!1):ee.resolve(e)},n.hasTooManyDroppedFrames=function(e,t,n){return this.scanner.sorcerer.getDroppedFrameRate(10,e,"median")/t.framerate*100>=n&&(this.blacklist(e),!0)},n.getTimeEstimateToLoad=function(e,t){if(null===t)return 3;var n=t.segments[e],e=n.end-n.start,n=this.getCurrentSpeed();return e*(t.bitrate+t.audioBitrate)/n*1.3},n.canPlayFromTimeInStream=function(e,t){if(!this.isTimeInBuffer(e,this.scanner.$.buffered,this.scanner.$.duration))return!1;if(!t)return!1;var n=this.getSegmentsToLoad(!1,"video",t);if(0===n.length)return!0;e=de(e,this.scanner.$.buffered);return this.getTimeEstimateToLoad(n[0],t)<e},n.getSegmentsToLoad=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"video",n=this.scanner.$,i=this.scanner.currentTime,r=[],o=i+this.mi(i,n.duration,2<arguments.length?arguments[2]:void 0),n=this.scanner.sorcerer[t].activeStreamIndex,s=this.scanner.vn[t][n];if(!s)return r;var t=this.scanner.sorcerer[t].sourceBuffer,a=null;t&&(a=t.buffered);for(var c=0;c<s.segments.length;c++){var u,l,d=s.segments[c];d.end<i||d.start>o||(u=i>=d.start&&i<d.end,l=this.wi(d,a,this.scanner.$.duration,this.scanner.vn),!e&&l||e&&l&&u||(u||o>=d.start)&&r.push(c))}return r},n.yi=function(e,t,n){for(var i=0,r=i;r<n.length;r++)e*t>n[r].bitrate+n[r].audioBitrate&&(i=r);return i},e}(qe),sr=function(i){function e(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return(t=i.call(this,e,n)||this).gi=n.tests.ml_brain.data.mimir_url,t._i=n.tests.ml_brain.data.geolocation,t.ki={},t.Ei=null,t.Ti=[],t.Si=[],t.xi=[],t.Ai=[],t.Mi=[],t.Ci=[],t.Ri=[],t.Ii=[],t.Oi=null,t.ji=null,t.Li=null,t.Di=!1,t.Pi=!1,t.Ni=0,t.Fi=[],t.Ui=0,t.Vi=[[fn.DOWNLOAD_START,t.Bi.bind(Y(t))],[fn.DOWNLOAD_END,t.Hi.bind(Y(t))],[fn.APPEND_BUFFER_END,t.qi.bind(Y(t))],[fn.DOWNLOAD_TIMEOUT,t.Wi.bind(Y(t))]],t.zi=[t.Gi],t.Ki=[t.Yi],t.Vi.forEach(function(e){t.scanner.on(e[0],e[1])}),(n=ui.hooks.beforeRequest).push.apply(n,te(t.zi)),(n=ui.hooks.afterResponse).push.apply(n,te(t.Ki)),t}W(e,i),H(e,[{key:"displayName",get:function(){return"ML"}}]);var t=e.prototype;return t.destroy=function(){var t=this;this.Vi.forEach(function(e){t.scanner.off(e[0],e[1])}),this.zi.forEach(function(e){var t=ui.hooks.beforeRequest,e=t.indexOf(e);0<=e&&t.splice(e,1)}),this.Ki.forEach(function(e){var t=ui.hooks.afterResponse,e=t.indexOf(e);0<=e&&t.splice(e,1)})},t.Bi=function(e){e=e.identifier;"video"===e.type&&(this.ji={index:e.segment,streamIndex:e.stream,complete:null}),"audio"===e.type&&(this.Li={index:e.segment,streamIndex:e.stream,complete:null})},t.Ji=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"video";return"video"===t?null!==this.ji&&this.ji.index===e.segment&&this.ji.streamIndex===e.stream:"audio"===t&&null!==this.Li&&this.Li.index===e.segment},t.$i=function(){return null!==this.ji||null!==this.Li},t.Hi=function(e){var t=e.identifier,n=e.data,i=n.request,r=n.response,o=i.data.duration/1e3,e=r.body.byteLength,n=null;r.perfTimings&&(n=r.perfTimings.responseStart-r.perfTimings.connectStart),"video"===t.type&&this.Ji(t,"video")&&(this.ji.complete={downloadTime:o,byteLength:e,ttfb:n,uuid:i.data.uuid},this.Pi||(this.Xi(t.stream,t.segment-1,o,e,n),this.Pi=!0)),"audio"===t.type&&this.Ji(t,"audio")&&(this.Li.complete={downloadTime:o,byteLength:e,ttfb:n,uuid:i.data.uuid})},t.Wi=function(e){var t=e.identifier,n=(e.data.timeoutMs||8e3)/1e3,i=t.segment,e=this.scanner.vn[t.type][t.stream].segments[i].size;delete this.ki[i],this.Xi(t.stream,i,n,e,.1,void 0)},t.Zi=function(){this.ji=null,this.Li=null},t.qi=function(e){var t,n,i,r=e.identifier;"video"===r.type&&(this.Ui+=1),this.bi(this.scanner.vn)?this.Ji(r,"video")&&this.Ji(r,"audio")&&null!==this.ji.complete&&null!==this.Li.complete&&(i=this.ji.complete,n=this.Li.complete,t=i.downloadTime+n.downloadTime,e=i.byteLength+n.byteLength,n=i.ttfb+n.ttfb,this.Xi(r.stream,r.segment-1,t,e,n,i.uuid),this.Zi()):this.Ji(r,"video")&&null!==this.ji.complete&&(i=this.ji.complete,this.Xi(r.stream,r.segment-1,i.downloadTime,i.byteLength,i.ttfb,i.uuid),this.Zi())},t.Xi=function(e,t,n,i,r,o){var s=this.scanner.vn.video[e],a=this.scanner.sorcerer.video.sourceBuffer;a&&s&&(this.Ti.push(this.getTotalBufferDuration()),this.Ai.push(de(this.scanner.currentTime,a.buffered)),this.Mi.push(e),this.Si.push(n),this.xi.push(i),this.Ri.push(r),this.Ci.push(s.segments.length-t),this.Ii.push(o))},t.handleScrubEnd=function(e){var t=this.Si.length,n=t?this.Si[t-1]:0,i=this.xi.length,r=i?this.xi[i-1]:0,o=this.Ri.length,t=o?this.Ri[o-1]:0,i=this.scanner.vn.video[e],o=this.Qi(i),i=o?o.index:this.Ci[this.Ci.length-1],o=this.Ii.length?this.Ii[this.Ii.length-1]:"";this.Xi(e,i,n,r,t,o)},t.shouldPowerUp=function(e,t,n){var i=e.indexOf(t);if(-1===i&&(i=0),1===this.whitelisted.length)return this.whitelisted[0]>i?ee.resolve(0):ee.resolve(!1);if(1===this.scanner.vn.video.length)return ee.resolve(!1);if(!this.canPowerUp(e,i))return ee.resolve(!1);if(this.scrubInProgress)return ee.resolve(!1);var r=this.Qi(t);if(null===r)return ee.resolve(!1);var o={index:r.index,streamIndex:r.streamIndex},r=r.index;if(null!==this.Ei&&this.Ei.index===o.index&&this.Ei.streamIndex===o.streamIndex)return ee.resolve(!1);if(!(r in this.ki))return this.te(o,e,t).then(function(e){return i<e&&e}).catch(console.error);r=this.ki[r];return i<r?ee.resolve(r):ee.resolve(!1)},t.shouldPowerDown=function(e,t){var n=e.indexOf(t);if(-1===n){var i=this.isTimeInBuffer(this.scanner.$.duration,this.scanner.$.buffered,this.scanner.$.duration);return this.whitelisted.length||this.blacklisted.length||!i?ee.resolve(e.length-1):ee.resolve(!1)}if(1===this.whitelisted.length)return this.whitelisted[0]<n?ee.resolve(0):ee.resolve(!1);if(1===this.scanner.vn.video.length)return ee.resolve(!1);if(!this.canPowerDown(e,n))return ee.resolve(!1);if(this.scrubInProgress)return ee.resolve(!1);var r=this.Qi(t);if(null===r)return ee.resolve(!1);i={index:r.index,streamIndex:r.streamIndex},r=r.index;if(null!==this.Ei&&this.Ei.index===i.index&&this.Ei.streamIndex===i.streamIndex)return ee.resolve(!1);if(!(r in this.ki))return this.te(i,e,t).then(function(e){return e<n&&e}).catch(console.error);r=this.ki[r];return r<n?ee.resolve(r):ee.resolve(!1)},t.getTotalBufferDuration=function(){var e=this.scanner.sorcerer.video.sourceBuffer,t=0;if(!e)return t;for(var n=0;n<e.buffered.length;n++){var i=e.buffered.start(n);t+=e.buffered.end(n)-i}return t},t.canPlayFromTimeInStream=function(e,t){return!!this.isTimeInBuffer(e,this.scanner.$.buffered,this.scanner.$.duration)&&!!t},t.ne=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=e.slice(0);if(n.length<8){for(var i=8-n.length,r=0;r<i;r++)n.unshift(t);return n}return n.slice(n.length-8,n.length)},t.ee=function(e,t){var n=this,i={240:1,360:2,480:3,540:3,720:4,1080:5,1440:6,2160:7},r={240:0,360:1,480:2,540:2,720:3,1080:4,1440:5,2160:6},o=[0,0,0,0,0,0,0,0],s=[0,0,0,0,0,0,0,0],a=[0,0,0,0,0,0,0,0];this.Ui<3&&(a[a.length-1]=1);for(var c=0;c<t.length;c++){var u=t[c],l=parseInt(u.quality,10);l in i&&(o[i[l]]=1);var d=this.getAudioIndexFromVideo(t,this.Fi,c),f=null;"number"==typeof d&&(f=this.Fi[d]);for(var h,v,p=0;p<u.segments.length;p++)p===e&&l in r&&(h=u.segments[p].size,v=0,f&&f.segments[p]&&(v=f.segments[p].size),s[r[l]]=h+v)}var m=this.Mi.map(function(e){return parseInt(n.scanner.vn.video[e].quality,10)});return{availableQualities:o,nextChunkSizes:s,lastBufferSizes:this.ne(this.Ti),lastChunkDownloadTimes:this.ne(this.Si),lastTtfb:this.ne(this.Ri,.1),lastChunkSizes:this.ne(this.xi),lastChunkQualities:this.ne(m),numRemainingChunks:this.ne(this.Ci),lastPlaybackHeads:this.ne(this.Ai),geolocation:[[this._i]],videoStart:a}},t.re=function(e,t){for(var n=-1,i=-1,r=0;r<e.length;r++)e[r]>i&&(i=e[r],n=r);for(var o=[],s=0;s<t.length;s++)1===t[s]&&o.push(s);return{1:240,2:360,3:540,4:720,5:1080,6:1440,7:2160}[o[n]]},t.oe=function(e,t){for(var n=0;n<t.length;n++){var i=parseInt(t[n].quality,10);if(i===e)return n;if(480===i&&540===e)return n}return 0},t.Gi=function(e){e.startTime=Dn()},t.Yi=function(e,t){return t.duration=Pn(e.startTime),t},t.te=function(i,r,e){var o=this,s=this.ee(i.index,r);return this.Ei=i,qi.post(this.gi,{json:{inputs:s},timeout:2e3}).then(function(e){var t=JSON.parse(e.body),n=o.re(t.outputs[0],s.availableQualities),t=o.oe(n,r);return o.ki[i.index]=t,o.Ii.length&&o.Oi&&(n=o.Ii[o.Ii.length-1],o.scanner.fire(mn.BRAIN_ML_MODEL_INPUTS,X({chunkRequestID:n,duration:e.duration,geolocation:o._i},o.Oi))),o.Oi=s,o.Ei=null,t}).catch(function(e){var t;e instanceof mi&&(t={status:e.response.status,resp:e.response.body,url:o.gi},o.scanner.fire(mn.BRAIN_ML_MODEL_ERR,t),o.Ni++),e instanceof bi&&(t={url:o.gi},o.scanner.fire(mn.BRAIN_ML_MODEL_TIMEOUT,t),o.Ni++),e instanceof gi&&(n={url:o.gi},o.scanner.fire(mn.BRAIN_ML_MODEL_NET_ERR,n),o.Ni++),2<=o.Ni&&o.scanner.resetBrain(!0);var n=i.streamIndex;return o.ki[i.index]=n,o.Ei=null,n})},t.Qi=function(e){var t=this.scanner.sorcerer.video.sourceBuffer,n=null;if(null===(n=t?t.buffered:n))return null;for(var i=this.ue(e),r=0;r<i.length;r++){var o=i[r].segment;if(!this.wi(o,n,this.scanner.$.duration,this.scanner.vn))return i[r]}return null},t.ue=function(e){var t=this.scanner.$,n=this.scanner.currentTime,i=n+this.mi(n,t.duration,e),r=[],o=this.scanner.sorcerer.video.activeStreamIndex,s=this.scanner.vn.video[o];if(!s)return r;for(var a=0;a<s.segments.length;a++){var c=s.segments[a];c.end<n||c.start>i||(n>=c.start&&n<c.end||i>=c.start)&&r.push({segment:c,index:a,streamIndex:o})}return r},t.ae=function(t,n){var i=this;Object.keys(this.ki).filter(function(e){return-1===t.indexOf(parseInt(e,10))}).forEach(function(e){var t=i.ki[e],t=i.scanner.vn.video[t].segments[e];i.wi(t,n,i.scanner.$.duration,i.scanner.vn)||delete i.ki[e]})},t.getSegmentsToLoad=function(e,t,n){var i=this.ue(n),t=this.scanner.sorcerer[t].sourceBuffer,r=null;t&&(r=t.buffered),this.ae(i.map(function(e){return e.index}),r);for(var o=[],s=0;s<i.length;s++){var a=i[s].segment,c=i[s].index,u=this.wi(a,r,this.scanner.$.duration,this.scanner.vn),a=c in this.ki;u||!a&&1!==this.whitelisted.length&&1!==this.scanner.vn.video.length||o.push(c)}return o},H(e,[{key:"audioStreams",set:function(e){this.Fi=e}},{key:"scrubInProgress",set:function(e){this.Di=e},get:function(){return this.Di}}]),e}(qe),ar=((De=br.prototype).start=function(){return clearInterval(this.ce),this.ce=setInterval(this.le.bind(this),200),this.le()},De.stop=function(){clearInterval(this.ce)},De.onSegmentAppended=function(){this.le()},De.le=function(){var e=this.$.buffered,t=this.$.currentTime,n=this.fe(e,t);if(0===this.$.readyState)return!1;if(this.$.paused)return!1;var i=this.$.duration;if(i<=t)return this.$.currentTime=i-.1,!0;if(e.length<=n)return!1;e=e.start(n);return!(i<=e||.5<e-t||0!==n||(this.stop(),this.he("audio",e),this.he("video",e),this.$.currentTime=e,0))},De.fe=function(e,t){if(!e||!e.length)return null;for(var n=0;n<e.length;n++){var i=e.start(n),r=e.end(n);if(t<i&&(0===n||r-t<=.1))break}return 0<=n?n:null},De.he=function(e,t){e=this.se(0,e);e&&e.segments&&e.segments[0]&&(e.segments[0].start=t)},br),cr=function(o){function e(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return(e=o.call(this,e,t)||this).reset(),e.manifestLoadDurations=[],t.mediaSourceScanner&&(e.de=t.mediaSourceScanner.maxPreloadStreamIndex),e}W(e,o),H(e,null,[{key:"displayName",get:function(){return"MediaSourceScanner"}},{key:"supported",get:function(){return"undefined"!=typeof MediaSource&&MediaSource.isTypeSupported}},{key:"supportedVideoTypes",get:function(){return["application/vnd.vimeo.dash+json","video/vnd.mpeg.dash.mpd"]}}]);var t=e.prototype;return t.deactivate=function(){o.prototype.deactivate.call(this),this.sorcerer&&this.sorcerer.destroy(),this.reset()},t.reset=function(){this.ve=new ai,this.pe={},An.browser.safari&&(this.me=new ar(this.$,this.se.bind(this))),this.resetBrain(),this.be=!1,this.we=!1,this.It=null,this.vn={},this.vn.audio=[],this.vn.video=[],this.Fi=[],this.ye=null,this.ge=null,this._e=null,this.ke=null,this.Ee=null,this.Te=null,this.Se=!1,this.xe=null,this.Ae=!1,this.Me=!1,this.Ce=null,this.Re=null,this.Ie=!1,this.Oe=[],this.je={},this.Le=0,this.De=null,this.Pe=null,clearInterval(this.Ne),clearTimeout(this.Fe)},t.resetBrain=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this.tt.mediaSourceScanner||{};if(t.tests=this.tt.tests,this.Ue&&this.Ue.destroy(),e){var n=Bn(this.Ue);return this.Ue=new or(this,t),void(n&&this.fire(mn.BRAIN_ML_SWITCH_TO_SKYFIRE))}this.Ue=new or(this,t);n=Hn(t,"ml_brain");n&&n.group&&n.data.use_model&&(this.Ue=new sr(this,t))},t.preloadStream=function(){var i=this;if(this.Ce)return this.Ce;var n=0,e=1;this.vn.audio.length&&(e=2);var r=this.sorcerer.video.activeStreamIndex;this.Oe.length&&(r=this.Oe[0]);var o=0,t=this.Ue.getSegmentsToLoad(!1,"video",r);0<t.length&&(o=t[0]);function s(t){(n+=1)<e||(t.segment===o&&0===i.Oe.length?i.Be(!0).then(function(e){return!1!==e&&e>t.stream?(i.sorcerer.video.switchTo(e,!1),i.vn.audio.length&&(e=i.Ue.getAudioIndexFromVideo(i.vn.video,i.vn.audio,e),i.sorcerer.audio.switchTo(e,!1)),void c(!(n=0))):void a()}).catch(console.error):a())}var a=function(){},c=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0]&&(r=i.sorcerer.video.activeStreamIndex),i.De=r,i.Ve(!0)};return this.Ce=new ee(function(n,e){a=function(){var e=i.se(r).segments[0].end,t=i.He(!0);i.currentTime>=t&&(i.currentTime=t),i.currentTime>e&&(i.sorcerer.clear(),i.ve=new ai),i.sorcerer.video.switchTo(r,!1),i.vn.audio.length&&(e=i.Ue.getAudioIndexFromVideo(i.vn.video,i.vn.audio,r),i.sorcerer.audio.switchTo(e,!1)),i.sorcerer.off("bufferqueueadd",s),i.De=null,i.be=!0,n()},i.sorcerer.on("bufferqueueadd",s),c()}),this.Ce},t.loadManifest=function(o){var t=this,n=Date.now();return An.browser.ie&&o&&-1!==o.indexOf("archive_playlist")?(setTimeout(function(){t.kt("MediaUnknownError","An unknown error occurred.")},250),new ee(function(){})):qi({url:o,timeout:1e4,type:ci.MANIFEST}).then(function(e){return e.url&&e.url!==o&&-1!==e.url.indexOf("live-archive")&&(t.ge=e.url.split("/").slice(0,-2).join("/")),t.manifestLoadDurations.push({url:o,status:e.status,duration:Date.now()-n}),t.fire(fn.MANIFEST_LOADED),e.text()}).then(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return ee.resolve(function(i){var r;return function(e,t){var n=function(){if(-1!==o.indexOf(".mpd"))return function(e,t,n){return e&&e.then||(e=ee.resolve(e)),t?e.then(t):e}(ce("module/media-manifest.js"),function(e){var t=e.parseMPD;r=t(i,o)});r=JSON.parse(i)}();return n&&n.then?n.then(t):t()}(0,function(){return r})}.apply(this,e))}catch(e){return ee.reject(e)}}).catch(function(e){if(t.manifestLoadDurations.push({url:o,status:e.response&&e.response.status,duration:Date.now()-n}),t.reset(),e instanceof mi&&410===e.response.status)return t.fire(fn.MEDIA_URL_EXPIRED),new ee(function(){});throw e instanceof mi&&400===e.response.status?t.fire(fn.MEDIA_URL_BAD_REQUEST,e.response.url):e instanceof bi&&t.fire(fn.MANIFEST_TIMEOUT),e})},t.setVideoSrc=function(t,e){var n=this;if((!(2<arguments.length&&void 0!==arguments[2])||arguments[2])&&!e&&this.ye){if(("metadata"===this.at||"none"===this.at&&!this.paused)&&!this.be)return void this.ye.then(function(){var e=n.paused;n.setVideoSrc(t,e,!1)}).catch(console.error);if("auto"===this.at)return void this.ye.then(function(){n.setVideoSrc(t,!1,!1)}).catch(console.error)}e&&this.reset(),e||!this.paused||this.sorcerer||(e=!0);var i=this.qe;e&&(i=this.qt);var r=t.split("/");r.pop();var o="".concat(r.join("/"),"/");this.Se=!e,this.ye=this.We(t,this.at).then(this.loadManifest.bind(this)).then(function(e){return"string"==typeof n.ge&&-1!==n.ge.indexOf("live-archive")||(n.ge=o),e}).then(i.bind(this)),e&&"auto"===this.at&&(this.ye=this.ze(this.ye,this.preloadStream.bind(this),!1)),this.ye=this.Ge(this.ye)},t.getBitrateAtTime=function(e,t){if(!this.sorcerer)return 0;e=this.sorcerer.streamIndexAtTime(e,t);return this.vn[t][e]?this.vn[t][e].bitrate:0},t.lockStreamIndexes=function(){var e,t=this,n=this.Oe.map(function(e){return t.vn.video.indexOf(t.vn.video[e])}),i=!this.paused;i&&(this.Ke=!0,this.$.pause()),this.je.video=!1,this.Ue.lock(n),!this.we&&"auto"!==this.at||(e=Math.max(this.currentTime-7,0),n=Math.min(this.currentTime+7,this.$.duration),this.sorcerer.removeBuffer(e,n).then(function(){!t.we&&"auto"===t.at||t.ended?t.Ye():(t.seekToTime(t.currentTime),i&&t.paused&&(t.Je=!0,t.$.play()))}).catch(console.error))},t.seekToTime=function(e){var t=this;if(e===this.currentTime)return ee.resolve();var n,i=null===this.ke;if(i||(this.$e&&(this.$e(),this.$e=null),this.Xe=null,this.ke=null,this.Ee=null),this.ke=e,this.Ze(),this.be)for(var r in this.vn)0<this.vn[r].length&&(n=this.sorcerer[r].activeStreamIndex,this.sorcerer[r].streams[n].abort());return this.Xe=this.Qe(e),ee.all([this.ye,this.Re]).then(function(){t.Ye()}).catch(console.error),this.tr&&0===e&&this.fire(un.SEEKING),i||this.play().catch(this.ft.bind(this)),this.ye.then(function(){return t.Xe}).catch(function(e){})},t.takeSnapshot=function(){},t.initDrm=function(){},t.onstalled=function(){return!1},t.onseeked=function(e){this.we&&this.Ve()},t.onended=function(e){return o.prototype.onended.call(this,e),!0},t.onseeking=function(e){this.we},t.Ze=function(){var e=this;this.nr(),clearTimeout(this.ir),this.ir=setTimeout(function(){e.er()},200)},t.nr=function(){this.rr||(this.rr=!0,Bn(this.Ue)&&(this.Ue.scrubInProgress=!0))},t.er=function(){var e;this.rr=!1,Bn(this.Ue)&&(this.Ue.scrubInProgress=!1,e=this.sorcerer.video.activeStreamIndex,this.Ue.handleScrubEnd(e),this.Ye())},t.ontimeupdate=function(e){if(!this.sorcerer)return!1;if(o.prototype.ontimeupdate.call(this),this.me&&this.me.stop(),0===this.currentTime)return this.we;if(this.ke)return!1;this.we||(this.we=!0),this.Me&&this.currentTime>=this.Me&&(this.sorcerer.removeBuffer(0,this.Me-2),this.Me=!1);var t=this.sorcerer.getDroppedFrameTotal();this.fire(fn.DROPPED_FRAMES,t);var n=this.sorcerer.getResponseSpeeds(),i=this.vn.video[this.sorcerer.video.activeStreamIndex],t=this.tt.tests&&this.tt.tests.download_bitrate;t&&t.group||!i||!this.Ue.getCurrentSpeed||(r={speed:this.Ue.getCurrentSpeed(),bitrate:i.bitrate,speeds:n},this.fire(fn.BANDWIDTH,r));var r=this.$.buffered.length;if(!r)return!0;r=this.$.buffered.end(r-1);return Math.ceil(r)===Math.ceil(this.$.duration)||(Math.abs(this.currentTime-r)<.2?(this.Ie||(this.fire(fn.STREAM_BUFFER_START,{hasLowerStreamIndex:0<this.sorcerer.video.activeStreamIndex}),this.Ie=!0),!1):void 0)},t.or=function(){return!!this.ended||Math.ceil(this.currentTime)===Math.ceil(this.$.duration)},t.ur=function(){return!!this.sorcerer&&!this.or()&&(null!==this.De?(this.ar(),!0):0!==this.currentTime||this.be?(this.Ye(),!0):this.we)},t.onprogress=function(){this.Ue.canPlayFromTimeInStream(this.currentTime,this.se())&&this.Ie&&(this.fire(fn.STREAM_BUFFER_END),this.Ie=!1)},t.onwaiting=function(){return!this.me||!this.me.start()},t.onerror=function(){return!!this.$.error&&(this.$.error.code===this.$.error.MEDIA_ERR_DECODE?(this.fire(fn.SCANNER_ERROR,{reason:"encountered media decode error"}),!1):o.prototype.onerror.call(this))},t.pause=function(){o.prototype.pause.call(this)},t.play=function(){var e=this;return this.Ve(),o.prototype.play.call(this,function(){return e.Te&&e.Te(),e.Se||e.be||"auto"===e.at||(e.ye=e.ze(e.ye,e.preloadStream.bind(e))),e.ye.then(function(){return ee.resolve(e.Xe)})})},t.onpause=function(){return this.Ke?this.Ke=!1:(o.prototype.onpause.call(this),!0)},t.onplay=function(){return!this.Je||(this.Je=!1)},t.ze=function(e,t){var n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],t=e.then(t);return t=n?this.Ge(t):t},t.Ge=function(e){var t=this;return e.catch(function(e){return t.fire(fn.FILE_ERROR,{reason:e}),new ee(function(e,t){})})},t.sr=function(){this.be&&12e3<this.vn.video[this.sorcerer.video.activeStreamIndex].bitrate/1e3&&(this.Re=this.sorcerer.removeBuffer())},t.We=function(n,i){var r=this;return new ee(function(e,t){"none"!==i||r.Se&&!r.paused?e(n):r.Te=function(){e(n),r.Te=null}})},t.Qe=function(){var r=this,o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.ke;return new ee(function(e,t){var n=r.we&&0===o,i=r.Ue.canPlayFromTimeInStream(o,r.se());n||i?e(o):(r.sr(),r.Ee=e)}).then(function(e){r.ke=null,r.Xe=null;var t=new ee(function(t,e){r.$e=e,r.$.addEventListener("seeked",function e(){t(r.$.currentTime),r.$.removeEventListener("seeked",e)})});return r.$.currentTime=e,t})},t.cr=function(e,t){"auto"!==e&&"auto"===t&&(this.ye=this.ze(this.ye,this.preloadStream.bind(this))),e!==t&&"none"!==t&&this.Te&&this.Te()},t.lr=function(e){var t=e.audio.reduce(function(e,t){return e+t.duration},0),n=e.video.reduce(function(e,t){return e+t.duration},0),t=t/e.audio.length,e=n/e.video.length;return 4+t<e?e-t:0},t.hr=function(e){return e.video.every(function(e){return e.segments.every(function(e){return"size"in e})})},t.qe=function(s){var a=this;return new ee(function(e,t){if(a.It=s,a.vn.video=a.dr(s.video),s.audio){var n=a.lr(s);if(0<n)return a.fire(fn.AV_DURATION_MISMATCH,n),a.fire(fn.SCANNER_ERROR,{reason:"Encountered A/V duration mismatch"}),void t();n=s.audio.filter(function(e){return"opus"===e.codecs}),t=s.audio.filter(function(e){return"opus"!==e.codecs}),n=An.browser.safari||An.iOS||An.iPadOS||!MediaSource.isTypeSupported('audio/mp4; codecs="opus"')||!n.length?t:n;a.vn.audio=a.dr(n)}for(var i=0;i<a.vn.video.length;i++){var r,o=0;s.audio&&(r=a.Ue.getAudioIndexFromVideo(a.vn.video,a.vn.audio,i),(r=a.vn.audio[r])&&(o=r.bitrate)),a.vn.video[i].audioBitrate=o}Bn(a.Ue)&&0<a.vn.audio.length&&(a.Ue.audioStreams=a.vn.audio),a.pr(a.vn.video,a.vn.audio,a.It.key_info),a.hr(s)||a.resetBrain(!0),a.fire(fn.STREAMS_LOADED,a.vn),e()})},t.mr=function(e,t){this.sorcerer&&this.sorcerer.destroy(),this.sorcerer=new rr(e,t),this.$.src=URL.createObjectURL(this.sorcerer.mediaSource),this.successfulSegments=this.sorcerer.getSuccessfulSegments(),this.failedSegments=this.sorcerer.getFailedSegments(),this.Ve()},t.Ve=function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this.br(500),clearTimeout(this.Fe),this.Fe=setTimeout(function(){e.br(5e3)},6e4),t&&this.ur()},t.br=function(e){var t=this;clearInterval(this.Ne),this.Ne=setInterval(function(){t.ur()},e)},t.He=function(){var e,t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],n=t?1/0:0;for(e in this.vn)this.vn[e].length&&(n=Math[t?"min":"max"](n,this.vn[e][0].duration));return n},t.qt=function(i){var r=this;return this.qe(i).then(function(){var e=r.video&&r.video.metadata.percentShown?r.video.metadata.percentShown:null,t=r.Ue.filterStreams(r.vn.video,r.$.clientWidth,r.$.clientHeight,e).length-1,e=r.vn.video[0];r.Oe.length&&(e=r.vn.video[r.Oe[0]]),void 0!==r.de&&t<=r.vn.video.indexOf(i.video[r.de])&&(e=r.vn.video[t]),r.mr(r.$,{duration:r.He(),fetcherTimeout:8e3,fetcherRetryAbortErrors:!1}),r.sorcerer.on("srcnotsupported",function(){r.fire(fn.SCANNER_ERROR,{reason:"this codec is not supported for mediasource playback"})});var n,e=r.vn.video.indexOf(e);for(n in r.vn)!function(i){r.vn[i].forEach(function(e,t){var n=r.wr(t,"init",i);r.yr(t,i)&&r.vn[i][t].init_segment_range&&(n={url:n,byteRange:r.gr(t,"init",i)}),r.sorcerer.addStream("".concat(e.mime_type,'; codecs="').concat(r.vn[i][t].codecs,'"'),n)})}(n);r.sorcerer.video.switchTo(e),r.sorcerer.on("queued",r._r.bind(r)),r.sorcerer.on("downloadabort",r.kr.bind(r)),r.sorcerer.on("appendbufferend",r.qi.bind(r)),r.sorcerer.on("downloadstart",r.Bi.bind(r)),r.sorcerer.on("downloadend",r.Hi.bind(r)),r.sorcerer.on("downloaderror",r.Er.bind(r)),r.sorcerer.on("downloadtimeout",r.Wi.bind(r)),r.sorcerer.on("quotaexceedederror",r.Tr.bind(r)),r.sorcerer.video.on("streamchange",r.Sr.bind(r)),r.sorcerer.video.on("streamchangestart",r.xr.bind(r)),r.sorcerer.mediaSource.addEventListener("sourceended",function(){r.fire(un.PROGRESS)})})},t.dr=function(e){e=e.slice(0);return e.sort(function(e,t){var n=e.width*e.height*e.bitrate,i=t.width*t.height*t.bitrate;return e.width===t.width&&e.height===t.height?e.framerate-t.framerate:n-i}),e},t.yr=function(e,t){return!!this.vn[t][e].segments[0].range},t.gr=function(e,t,n){return"init"===t?this.vn[n][e].init_segment_range:this.vn[n][e].segments[t].range},t.Ar=function(e,t){return"init"===t?0:this.vn[2<arguments.length&&void 0!==arguments[2]?arguments[2]:"video"][e].segments[t].start},t.wr=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"video";if("init"===t&&!this.vn[n][e].init_segment_range&&-1===this.vn[n][e].init_segment.indexOf(".")){var i=this.vn[n][e].init_segment;return Nn(i).buffer}var r=this.ge,i=this.It.base_url&&-1!==this.It.base_url.indexOf("//");return i&&(r=this.It.base_url),this.It.base_url&&!i&&(r+=this.It.base_url),this.vn[n][e].base_url&&(r+=this.vn[n][e].base_url),this.yr(e,n)?r:"init"===t?r+this.vn[n][e].init_segment:(this.vn[n][e].segments[t].url&&(r+=this.vn[n][e].segments[t].url),r)},t.Mr=function(e,t,n){return"".concat(e,":").concat(t,":").concat(n)},t.Cr=function(e,t,n){return t===this.vn[n][e].segments.length-1},t.Rr=function(e,t){var n=[],i=this.pe[e];if(!i)return n;for(var r=0;r<i.length;r++)this.ve.has(this.Mr(i[r],e,t))&&n.push(i[r]);return n},t.getCurrentStream=function(){return this.se(0,0<arguments.length&&void 0!==arguments[0]?arguments[0]:"video")},t.se=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"video";return void 0!==this.sorcerer&&(e=this.sorcerer[t].activeStreamIndex),this.vn[t][e]},t.Be=function(e,t){var n=this,i=this.vn.video,r=this.video&&this.video.metadata.percentShown?this.video.metadata.percentShown:null;if(0===(i=this.Ue.filterStreams(i,this.$.clientWidth,this.$.clientHeight,r)).length)return ee.resolve(!1);if(this.je.video&&!Bn(this.Ue))return ee.resolve(!1);r=i[i.length-1];r.id!==this._e&&(this._e=r.id,r={index:this.vn.video.indexOf(r),streams:this.vn.video},this.fire(fn.STREAM_TARGET_CHANGE,r));var o=this.se();return this.Ue.shouldPowerUp(i,o,e).then(function(e){return!1===e?n.Ue.shouldPowerDown(i,o).then(function(e){return!1===e?e:n.vn.video.indexOf(i[e])}):n.vn.video.indexOf(i[e])})},t.Ir=function(){var d=this,f=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"video";this.Be(!1,f).then(function(e){"audio"===f&&(!1===e&&(e=d.sorcerer.video.activeStreamIndex),e=d.Ue.getAudioIndexFromVideo(d.vn.video,d.vn.audio,e),d.sorcerer.audio.activeStreamIndex===e&&(e=!1));var t=!1;!1!==e&&(t=e>d.sorcerer[f].activeStreamIndex,d.je[f]=!0,d.sorcerer[f].switchTo(e).then(function(){d.je[f]=!1}).catch(console.error));for(var t=t,u=d.Ue.getSegmentsToLoad(t,f,d.se()),l=d.sorcerer[f].activeStreamIndex,n=0;n<u.length;n++)!function(e){var t=d.wr(l,u[e],f),n=d.Rr(u[e],f);if(1<n.length)return;if(1===n.length&&l<=n[0])return;var i=d.Cr(l,u[e],f),r={stream:l,segment:u[e],type:f},o=d.sorcerer[f].streams[l],s=t;d.yr(l,f)&&(s={url:s,byteRange:d.gr(l,u[e],f)});var a=d.Ar(l,u[e],f),c="video"===f,n=null;0===l&&"video"===f&&(n=16e3);t=null;try{t=d.vn[f][l].segments[u[e]].size}catch(e){}o.addSegment(s,{identifier:r,isFinalSegment:i,priority:a,includeWithBandwidthChecks:c,timeout:n,size:t}).catch(function(e){if(!(e instanceof zi||e instanceof pi||e instanceof bi))throw e})}(n)}).catch(console.error)},t.ar=function(){var e,a=this;for(e in this.vn)!function(e){if(0===a.vn[e].length)return;var t=0,n=a.Ue.getSegmentsToLoad(!1,e,a.se());0<n.length&&(t=n[0]);var i=a.De;"audio"===e&&(i=a.Ue.getAudioIndexFromVideo(a.vn.video,a.vn.audio,a.De));var r=a.Mr(i,t,e);if(a.ve.has(r))return;var o=a.wr(i,t,e),s=a.Cr(i,t,e),n=a.sorcerer[e].streams[i],r={stream:i,segment:t,type:e},o=o;a.yr(i,e)&&(o={url:o,byteRange:a.gr(i,t,e)}),n.addSegment(o,{identifier:r,isFinalSegment:s,loadOnly:!0,priority:0}).catch(function(e){if(!(e instanceof zi||e instanceof pi||e instanceof bi))throw e})}(e)},t.Ye=function(){var t=this;return this.ye&&this.ye.then(function(){for(var e in t.vn)0<t.vn[e].length&&t.Ir(e)})},t._r=function(e){this.ve.add(this.Mr(e.stream,e.segment,e.type)),this.pe[e.segment]||(this.pe[e.segment]=[]),-1===this.pe[e.segment].indexOf(e.stream)&&this.pe[e.segment].push(e.stream)},t.Or=function(t){var n=this;(this.pe[t.segment]||[]).forEach(function(e){n.ve.delete(n.Mr(e,t.segment,t.type))})},t.kr=function(e){this.pe[e.segment]&&this.Or(e)},t.qi=function(e){this.fire(fn.APPEND_BUFFER_END,{identifier:e}),this.Ve(),this.Ae&&e.stream===this.xe&&(this.Ae=!1,this.Me=this.vn.video[e.stream].segments[e.segment].start),this.pe[e.segment]&&this.Or(e);e=this.Ue.canPlayFromTimeInStream(this.ke,this.se());null!==this.ke&&this.Ee&&e&&(this.Ee(this.ke),this.Ee=null),this.me&&this.me.onSegmentAppended()},t.Bi=function(e){this.fire(fn.DOWNLOAD_START,{identifier:e})},t.Hi=function(e,t){this.fire(fn.DOWNLOAD_END,{identifier:e,data:t})},t.Er=function(e,t){this.Or(e);var n=fn.DOWNLOAD_ERROR;410===t&&(n=fn.MEDIA_URL_EXPIRED),this.fire(n,{identifier:e,status:t})},t.Wi=function(e,t){this.fire(fn.DOWNLOAD_TIMEOUT,{identifier:e,data:t}),this.pe[e.segment]&&this.Or(e),"video"===e.type?this.je.video=!1:"audio"===e.type&&(this.je.audio=!1)},t.Tr=function(e){this.fire(fn.QUOTA_EXCEEDED_ERROR,{buffered:e})},t.xr=function(e,t){t={previousStreamIndex:this.It.video.indexOf(this.vn.video[e]),index:this.It.video.indexOf(this.vn.video[t]),streams:this.It.video};this.fire(fn.STREAM_CHANGE_START,t)},t.Sr=function(e){e>this.xe&&0<this.currentTime&&(this.Ae=!0),this.xe=e;e={index:this.It.video.indexOf(this.vn.video[e]),streams:this.It.video};this.fire(fn.STREAM_CHANGE,e)},t.pr=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};this.nt.drmHandler&&(e={audio:t.map(function(e){return"".concat(e.mime_type,';codecs="').concat(e.codecs,'"')}),video:e.map(function(e){return"".concat(e.mime_type,';codecs="').concat(e.codecs,'"')})},this.nt.drmHandler.init(this,e,n))},H(e,[{key:"preload",get:function(){return this.at},set:function(e){this.cr(this.at,e),this.at=e}},{key:"videoElement",get:function(){return this.$}},{key:"videoWidth",get:function(){var e=this.se();return e?e.width:this.$.videoWidth}},{key:"videoHeight",get:function(){var e=this.se();return e?e.height:this.$.videoHeight}},{key:"restrictedStreamIndexes",get:function(){return this.Oe},set:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];this.Oe.join(",")!==t.join(",")&&(this.Oe=t,this.ye.then(function(){return e.lockStreamIndexes()}).catch(console.error))}},{key:"currentTime",get:function(){return null!==this.ke?this.ke:this.$.currentTime},set:function(e){!this.we&&0===e||this.seekToTime(e)}},{key:"downloadSpeed",get:function(){return this.Le}},{key:"brainDebug",get:function(){var e=this.sorcerer&&this.Ue&&this.Ue.getCurrentSpeed?this.Ue.getCurrentSpeed():null,t=this.sorcerer&&this.sorcerer.getResponseSpeeds?this.sorcerer.getResponseSpeeds():null;return{currentSpeed:e,responseSpeeds:t=t?t.slice(-20):[]}}},{key:"isLowerProfileAvailable",get:function(){return this.sorcerer?0<this.sorcerer.video.activeStreamIndex:null}}]),e}(ii),ur=[1,2,5],lr=function(t){function e(e){return(e=t.call(this,e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{})||this).jr=.4,e.Lr=.6,e.Dr=e.tt.tests&&e.tt.tests.live_volatility&&e.tt.tests.live_volatility.group,e.consecutiveStreamIndex={},e.isNewPlayback=!0,e}W(e,t),H(e,[{key:"displayName",get:function(){return"Live"}}]);var n=e.prototype;return n.optimalStreamIndex=function(e,t){if(this.isNewPlayback&&2<=(null==(g=this.scanner.sorcerer)?void 0:g.getResponseSpeeds().length)&&(this.isNewPlayback=!1),1===e.length)return 0;if(this.isNewPlayback){for(var n=0,i=0,r=this.scanner.videoElement.clientHeight,o=[],s=0;s<e.length;s++){var a=e[s].height;o.push(a),a<r&&i<a&&(i=e[n=s].height)}return Math.max(0,n-1)}var c=this.getCurrentSpeed(),u=(u=this.scanner.sorcerer.getVolatilityScaler(5))||.3,l=t,d=t;if(this.Dr)for(var f=0;f<e.length;f++)c*this.jr*u>e[f].bandwidth&&(l=f),c*this.Lr*u>e[f].bandwidth&&(d=f);else for(var h=0;h<e.length;h++)c*this.jr>e[h].bandwidth&&(l=h),c*this.Lr>e[h].bandwidth&&(d=h);var v=t<l?l:d;this.Pr(v),this.consecutiveStreamIndex[v]++;var p=1.5*this.scanner.segmentLength,m=this.scanner.videoElement,g=m.buffered;return g&&0!==g.length?g.end(g.length-1)-m.currentTime<p?0!==t?t-1:0:2<this.consecutiveStreamIndex[v]&&v!==t?v:t:0},n.getCurrentSpeed=function(){return this.scanner.sorcerer.getCurrentSpeed({type:"average",howMany:5,weights:ur})},n.Pr=function(e){for(var t in this.consecutiveStreamIndex[e]||(this.consecutiveStreamIndex[e]=0),this.consecutiveStreamIndex)this.consecutiveStreamIndex.hasOwnProperty(t)&&parseInt(t,10)!==e&&(this.consecutiveStreamIndex[t]=0)},n.getAvailabilityStart=function(e){return this.Nr(e.edge)},n.getAvailabilityEnd=function(e){return this.Fr(e.edge)},n.getSegmentsToLoad=function(e,t){var n=this,i=this.scanner.videoElement,e=this.scanner.sorcerer[e].sourceBuffer;if(fe(i.currentTime,e&&e.buffered)>=this.scanner.bufferTarget)return[];var e=t.edge+t.age,r=this.Nr(e),o=this.Fr(e),t=t.segments.sort(function(e,t){return e.index-t.index});if(!this.Ur&&r<t[0].start)return[];this.Ur=!0;t=t.filter(function(e){return!!e.uri&&!n.scanner.isSegmentAdded(e)&&!(e.end<r||e.start>o)});return t.length,t},n.Nr=function(e){e-=this.Vr();return Math.max(0,e)},n.Fr=function(e){var t=this.Vr(),n=this.scanner.bufferTarget,n=e-Math.max(0,t-n);return Math.max(0,n)},n.Vr=function(){return this.scanner.presentationDelay||this.scanner.manifest.presentationDelay},e}(or),dr=["disabled","hidden","showing"],fr=["subtitles","captions","descriptions","chapters","metadata"],hr=["ar","fa","he","iw","ku","ps","sd","ur","yi"],vr=new He,pr=new He,mr=(gr.prototype.dispatchEvent=function(e){this.fire(e,{target:this})},H(gr,[{key:"mode",get:function(){return vr.get(this)},set:function(e){-1<dr.indexOf(e)&&(this.dt=!0,vr.get(this)!==e&&(vr.set(this,e),this.video.currentScanner&&this.video.currentScanner.setModeForTrack(this,e),this.dispatchEvent("modechange")))}},{key:"src",get:function(){return pr.get(this)},set:function(e){pr.set(this,e),this.video.fire(fn.TEXT_SRC_UPDATE,this)}},{key:"cues",get:function(){return this.video.currentScanner?this.video.currentScanner.getCuesForTrack(this):[]}},{key:"activeCues",get:function(){return this.video.currentScanner?this.video.currentScanner.getActiveCuesForTrack(this):[]}}]),gr);function gr(e,t){var n=e.kind,i=e.src,r=void 0===i?null:i,o=e.label,i=void 0===o?"":o,o=e.language,o=void 0===o?"":o,e=e.id,e=void 0===e?Mn():e;if(-1===fr.indexOf(n))throw Kn(12,"SYNTAX_ERR","Syntax Error");Q(this),Object.defineProperties(this,{kind:{value:n,enumerable:!0},label:{value:i,enumerable:!0},language:{value:o,enumerable:!0},id:{value:"".concat(e),enumerable:!0},rtl:{value:-1!==hr.indexOf(o.substr(0,2)),enumerable:!0}}),this.video=t,this.src=r,this.dt=!1,vr.set(this,"disabled")}function br(e,t){this.$=e,this.se=t}function yr(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.$=e,this.tt=t,Q(this);var n=this.tt,t=n.fetcherTimeout,t=void 0===t?0:t,n=n.fetcherRetryAbortErrors,n=void 0===n||n;this.In=new ir(e),this.Cn=new MediaSource,this.Bn=new er({parallel:1,timeout:t,retryAbortErrors:n}),this.ei={},this.ri=[],this.oi=null,this.ai=this.si.bind(this),this.Rn()}function Er(e){this.$=e,this.Nt=!1,this.Wn=null,this.zn={},this.Gn={},this.Kn=0,this.Yn=0,this.Jn="default",this.bound={startCheckingDroppedFrames:this.$n.bind(this),stopCheckingDroppedFrames:this.Xn.bind(this)}}function wr(e){Q(this),this.an=e,this.sn=null,this.cn=null,this.ln=!1,this.fn=!0,this.hn=null,this.dn=[],this.vn=[],this.pn=!1,this.mn=null,this.bn=!1,this.wn=void 0,this.yn=!1,this.gn=!0,this._n={},this.kn=this.En.bind(this),this.an.on("durationset",this.Tn.bind(this))}function _r(e){var t=/^(?:(\d{2,}):)?(\d{2}):(\d{2})[,.](\d{3})$/.exec(e);if(!t)return-1;e=parseInt(t[4],10)/1e3;return e+=parseInt(t[3],10),t[2]&&(e+=60*parseInt(t[2],10)),t[1]&&(e+=60*parseInt(t[1],10)*60),e}function Tr(e,t,n){return n?t?t(e):e:(e&&e.then||(e=ee.resolve(e)),t?e.then(t):e)}function Sr(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}function Ar(){}var kr=An.browser.ie||An.browser.edge?.5:.2;function Lr(e,t){if(!t)return e&&e.then?e.then(Ar):ee.resolve()}function Rr(e,t){return e&&e.then?e.then(t):t(e)}function Cr(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return ee.resolve(n.apply(this,e))}catch(e){return ee.reject(e)}}}var xr=function(i){function e(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return(t=i.call(this,e,n)||this).Br=!1,t.Hr=!1,t.qr=2e3,t.Wr=1e4,t.reset(),t.bufferTarget=n.bufferTarget||12,t.presentationDelay=n.presentationDelay||12,window.addEventListener("online",function(){t.play()}),t}W(e,i),H(e,null,[{key:"displayName",get:function(){return"HLSLiveScanner"}},{key:"supported",get:function(){return"undefined"!=typeof MediaSource&&MediaSource.isTypeSupported}},{key:"supportedVideoTypes",get:function(){return["application/x-mpegURL"]}},{key:"supportsPlaybackRate",get:function(){return!1}}]);var t=e.prototype;return t.deactivate=function(){i.prototype.deactivate.call(this),this.reset()},t.reset=function(){this.an&&this.an.destroy(),this.zr&&this.zr.stop(),this.Gr=new le,this.an=null,this.vn={},this.vn.video=[],this.vn.audio=[],this.xe=0,this.Kr=!1,this.Yr=!1,this.Jr=!1,this.$r=0,this.Xr=0,this.Zr=!1,this.Qr=new lr(this,this.tt),this.Oe=[],this.to={},this.no={},this.io=0,this.eo=0,this.ro=this.tt.tests&&this.tt.tests.live_playrate_recover&&this.tt.tests.live_playrate_recover.group,this.oo=null,this.uo=null,this.ao=null},t.endLive=function(){this.Kr=!1,this.zr&&this.zr.stop(),this.an&&(this.an.abortFetches(),this.an.endOfStream()),this.Yr=!0,i.prototype.deactivate.call(this),this.fire(un.ENDED)},t.so=function(){this.Kr||(this.Kr=!0,this.fire(hn.STREAM_ONLINE))},t.co=function(){this.Kr&&(this.Kr=!1,this.fire(hn.STREAM_OFFLINE))},t.lo=function(e){e?this.so():this.co()},t.fo=function(o){try{var s=this;if(s.Yr)return;s.zr&&(s.zr.stop(),s.zr.off());var e=[ce("module/media-manifest.js")];return s.video.metadata.p2pReady&&e.push(s.video.metadata.p2pReady),Tr(ee.allSettled(e),function(e){var t=Ve(e,1)[0].value,n=t.M3U8Loader,i=t.PLAYLIST_UPDATE,e=t.PLAYLIST_ERROR,r=t.convertTsCodecs;return s.zr=new n,s.zr.on(i,function(){return s.ho()}),s.zr.on(e,function(e){s.co()}),Rr(Sr(function(){var e=s.video.metadata.playlistRefreshUrl;return Tr(s.zr.start(o,e),function(e){s.It=e,s.so()})},function(e){throw s.co(),s.endLive(),e}),function(e){var t,n;s.vn.video=((n=s.It.video.slice(0)).sort(function(e,t){var n=e.width*e.height*e.bitrate,i=t.width*t.height*t.bitrate;return e.width===t.width&&e.height===t.height?e.framerate-t.framerate:n-i}),(t=n).filter(function(e){return e.codecs.split(".")[0]===t[0].codecs.split(".")[0]})),s.vn.audio=function(e){return e.reduce(function(e,t,n,i){return e.concat(function(e){return e.audio}(t))},[])}(s.vn.video).filter(function(e,t,n){return n.indexOf(e)===t});var i=null==(n=s.video)||null==(i=n.metadata)?void 0:i.percentShown,i=s.Qr.filterStreams(s.vn.video,s.$.clientWidth,s.$.clientHeight,i),i=s.Qr.optimalStreamIndex(i,0),i=s.vn.video[i];return Tr(s.zr.switchTo(s.It.video.indexOf(i)),function(){var e;return null==(e=s.an)||e.destroy(),s.an=new rr(s.$,{fetcherRetryAbortErrors:!1,fetcherTimeout:8e3}),s.vn.video.forEach(function(e){s.an.addStream(r(Un(s.It.activeVideo.mimeType,e.codecs)),e.initSegment)}),s.vn.audio.forEach(function(e){s.an.addStream(r(Un(s.It.activeAudio.mimeType,e.codecs)),e.initSegment)}),s.fire(fn.STREAMS_LOADED,s.vn),s.manifest.captions&&0<s.manifest.captions.length&&(s.manifest.captions.forEach(s.do.bind(s)),s.fire(fn.TEXT_TRACKS_AVAILABLE)),s.vo(),Lr(s.po(!0))})})})}catch(o){return ee.reject(o)}},t.mo=function(){try{var e=this;return function(e){if(e&&e.then)return e.then(Ar)}(Sr(function(){return Tr(e.zr.update(),function(){e.so()})},function(){e.co()}))}catch(e){return ee.reject(e)}},t.bo=function(e){this.an&&this.an.destroy(),this.an=new rr(e,{fetcherRetryAbortErrors:!1,fetcherTimeout:8e3})},t.vo=function(){this.an.video.on("streamchange",this.Sr.bind(this)),this.an.video.on("streamchangestart",this.xr.bind(this)),this.an.on("downloadend",this.Hi.bind(this)),this.an.on("downloadtimeout",this.Wi.bind(this)),this.an.on("downloadabort",this.wo.bind(this)),this.an.on("appendbufferend",this.yo.bind(this))},t.Hi=function(e,t){var n;e&&e.isInitSegmentRequest||(n=this.se(),t.extraContext={liveAvail:{start:this.Qr.getAvailabilityStart(n),end:this.Qr.getAvailabilityEnd(n)}},this.fire(fn.DOWNLOAD_END,{identifier:e,data:t}))},t.Wi=function(e,t){var n;e&&e.isInitSegmentRequest||(n="".concat(e.type,"_").concat(e.segment),delete this.to[n],this.fire(fn.DOWNLOAD_TIMEOUT,{identifier:e,data:t}))},t.wo=function(e,t){e&&e.isInitSegmentRequest||(e="".concat(e.type,"_").concat(e.segment),delete this.to[e])},t.xr=function(e,t){t={previousStreamIndex:this.vn.video.indexOf(this.vn.video[e]),index:this.vn.video.indexOf(this.vn.video[t]),streams:this.vn.video};this.fire(fn.STREAM_CHANGE_START,t)},t.Sr=function(e){this.fire(fn.STREAM_CHANGE,{index:e,streams:this.vn.video})},t.yo=function(){this.Zr||(this.Zr=!0)},t.ho=function(){this.Ye(),this.Hr&&this.manifest.captions&&0<this.manifest.captions.length&&this._o(),this.lo(this.ko()||!this.Eo()),this.To(),this.ro&&this.So()},t.xo=function(e,t,n){this.oo=e,this.uo=n,this.ao=t,this.playbackRate=t},t.Ao=function(){this.oo=null,this.uo=null,this.ao=null,this.playbackRate=1},t.So=function(){var e=this.se(),t=this.Qr.getAvailabilityStart(e),e=this.Qr.getAvailabilityEnd(e);this.Zr&&(t&&e&&this.currentTime?this.oo&&new Date-this.oo<this.uo||((e=e-this.currentTime)<6?this.xo(new Date,.9,15e3):300<e?this.xo(new Date,1.1,15e3):this.oo&&this.Ao()):this.Ao())},t.do=function(e,t){var n=e.label,e=e.language;this.Mo||(e=new mr({label:n,id:t,kind:"captions",language:e},this.nt),this.nt.textTracks=On([e]),this.Mo=this.addTextTrack(e))},t._o=function(){try{var i=this;return Tr(i.Gr,function(){i.manifest.captions&&i.manifest.captions[0].segments.forEach(Cr(function(e){var t="".concat(e.type,"_").concat(e.mediaSequenceNumber);if(!i.no[t])return i.no[t]=!0,Tr(qi(e.url).text(),function(e){var t=function(e){for(var t,n=0,i=e.split(/(?:(?:\r\n|\n){2,})/),r=[];0===n&&/^\uFEFF?WEBVTT(?: .*)?/.test(i[n])&&n++,(t=/^(?:(.*)(?:\r\n|\n))?([\d:,.]+) --> ([\d:,.]+)(.*)?(?:\r\n|\n)([\s\S]*)/.exec(i[n]))&&r.push({startTime:_r(t[2]),endTime:_r(t[3]),text:t[5]}),++n<i.length;);return r}(e),n=((e=e.match(/=MPEGTS:(\d+),/))&&e[1]||0)/9e4;t.forEach(function(e){e.startTime=n+e.startTime,e.endTime=n+e.endTime;e=new(window.VTTCue||window.TextTrackCue)(e.startTime,e.endTime,e.text);i.Mo.addCue(e)})})}))})}catch(i){return ee.reject(i)}},t.ko=function(){return 0<this.manifest.maxEndTime&&(this.manifest.maxEndTime===this.io?this.eo++:this.eo=0,this.io=this.manifest.maxEndTime),this.eo<3},t.Ye=function(){try{var t=this;return Tr(t.Gr,function(){for(var e in t.vn)0<t.vn[e].length&&t.Ir(e)})}catch(t){return ee.reject(t)}},t.isSegmentAdded=function(e){var t=e.type,e=e.mediaSequenceNumber;return!!this.to["".concat(t,"_").concat(e)]},t.Ir=function(i){var r=this,o=this.an[i].activeStreamIndex,e=this.se(i,o);this.Qr.getSegmentsToLoad(i,e).forEach(function(e){var t="".concat(i,"_").concat(e.mediaSequenceNumber),n={stream:o,segment:e.mediaSequenceNumber,type:i};r.sorcerer[i].streams[o].addSegment(e.url,{identifier:n}).catch(function(e){delete r.to[t]}),r.to[t]=!0})},t.getCurrentStream=function(){return this.se(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"video")},t.se=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"video",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return void 0!==this.an&&null!==this.an&&(t=this.an[e].activeStreamIndex),this.vn[e][t]},t.po=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];try{var n=this;if(n.Jr)return;var e=n.video&&n.video.metadata.percentShown?n.video.metadata.percentShown:null,i=n.Qr.filterStreams(n.vn.video,n.$.clientWidth,n.$.clientHeight,e);if(0===i.length)return;var r=i[n.Qr.optimalStreamIndex(i,n.xe)],o=n.vn.video.indexOf(r);return function(){if(0<=o&&(t||o!==n.xe)){if(0<o-n.xe&&0<n.Xr){if(Pn(n.Xr)<n.Wr)return}else n.Xr=Dn();var e={index:o,streams:n.vn.video};n.fire(fn.STREAM_TARGET_CHANGE,e),n.Jr=!0;e=n.It.video.indexOf(r);return Tr(n.zr.switchTo(e),function(){n.sorcerer.video.activeStreamIndex,n.an.video.switchTo(o,!0).then(function(){n.Jr=!1}).catch(console.error),n.xe=o})}}()}catch(t){return ee.reject(t)}},t.To=function(){var e=this.buffered;if(e.length){var t,n,i=e.length,r=this.$.currentTime;try{s=function(e,t){if(!e||!e.length)return null;if(1===e.length&&e.end(0)-e.start(0)<1e-6)return null;for(var n,i=0;i<e.length;i++)if(e.start(i)>t&&(0===i||e.end(i-1)-t<=.5)){n=i;break}return 0<=n?n:null}(e,r)}catch(e){throw DOMException,e}if(null!==s&&0!==this.$.readyState&&!(this.$.paused||i<=s)){try{t=e.start(s),n=e.end(i-1)}catch(e){throw DOMException,e}var o,s,i=t-r,r=n-t;0<r&&r<=2*this.segmentLength?(o="Preventing jump too close to buffered end time."+" Would have jumped to: ".concat(t,".")+" Last buffered end time ".concat(n,"."),this.fire(hn.BUFFER_GAP_JUMP_PREVENT,{msg:o})):(0===s?(o="Jumping forward ".concat(i)+" seconds because of gap before start time of ".concat(t),this.fire(hn.BUFFER_GAP_JUMP,{msg:o})):(s="Jumping forward ".concat(i," seconds because of gap starting at")+" ".concat(e.end(s-1)," and ending at ").concat(t),this.fire(hn.BUFFER_GAP_JUMP,{msg:s})),this.$.currentTime=t+.1)}}},t.Eo=function(){var e=this.buffered;return!!(e&&e.length&&this.$.currentTime+kr>e.end(e.length-1))},t.setVideoSrc=function(e){try{var t=this;return Tr(t.We(t.at),function(){return Tr(t.fo(e),function(){t.$.src=URL.createObjectURL(t.an.mediaSource),t.Gr.resolve()})})}catch(e){return ee.reject(e)}},t.We=function(e){try{return this.Co=new le,"none"===e&&this.paused||this.Co.resolve(),this.Co}catch(e){return ee.reject(e)}},t.getBitrateAtTime=function(e,t){if(!this.an)return 0;e=this.an.streamIndexAtTime(e,t);return this.vn[t][e]?this.vn[t][e].bandwidth:0},t.onprogress=function(){this.To()},t.ondurationchange=function(){this.To()},t.ontimeupdate=function(){var e;this.an&&(i.prototype.ontimeupdate.call(this),this.fire(fn.DROPPED_FRAMES,this.an.getDroppedFrameTotal()),(e=this.se())&&(e={speed:this.Qr.getCurrentSpeed(),bitrate:e.bitrate,speeds:this.an.getResponseSpeeds()},this.fire(fn.BANDWIDTH,e)),!this.Kr&&this.Eo()&&this.fire(hn.STREAM_OFFLINE),Pn(this.$r)>this.qr&&(this.po(),this.$r=Dn()))},t.seekToTime=function(){},t.onpause=function(){this.zr&&this.zr.stop()},t.pause=function(){i.prototype.pause.call(this),this.zr&&this.zr.stop(),this.an&&(this.an.abortFetches(),this.to={},this.an.removeBuffer().catch(function(){}))},t.play=function(){var n=this;return i.prototype.play.call(this,Cr(function(){return n.Co.resolve(),e=function(){return Tr(n.Gr,function(){n.Ye(),n.Br=!0})},(t=function(){if(n.Br)return n.to={},Rr(Sr(function(){return Lr(n.an.removeBuffer())},function(e){}),function(){return Tr(n.mo(),function(){return Tr(n.Ro(),function(){n.currentTime=n.buffered.start(0)+.1})})})}())&&t.then?t.then(e):e();var e,t}))},t.Ro=function(){var t=this;return new ee(function(e){t.an.once("appendbufferend",e)})},t.setCaptionsState=function(e){this.Hr=e},H(e,[{key:"preload",get:function(){return this.at},set:function(e){this.at!==e&&"none"!==e&&this.Co.resolve(),this.at=e}},{key:"latency",get:function(){return(fe(this.currentTime,this.buffered)||0)+this.se().age}},{key:"downloadSpeed",get:function(){return this.Qr.getCurrentSpeed()}},{key:"restrictedStreamIndexes",get:function(){return this.Oe},set:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];this.Oe.join(",")!==e.join(",")&&(this.Oe=e,this.Qr.lock(this.Oe))}},{key:"videoWidth",get:function(){return this.Io?this.Io.width:this.$.videoWidth}},{key:"videoHeight",get:function(){return this.Io?this.Io.height:this.$.videoHeight}},{key:"currentTime",get:function(){return this.$.currentTime},set:function(e){0<this.$.readyState&&(this.$.currentTime=e)}},{key:"isLowerProfileAvailable",get:function(){return this.an?0<this.an.video.activeStreamIndex:null}},{key:"sorcerer",get:function(){return this.an}},{key:"segmentLength",get:function(){return this.It.activeVideo.targetDuration}}]),e}(ii),Ir=document.createElement("video"),Or={"application/x-mpegURL":"application/x-mpegURL"},Dr=function(n){function e(e){var t;return(t=n.call(this,e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{})||this).Oo=null,t.reset(),window.addEventListener("online",function(){t.play()}),t}W(e,n),H(e,null,[{key:"displayName",get:function(){return"NativeHLSLiveScanner"}},{key:"supported",get:function(){return 0<e.supportedVideoTypes.length}},{key:"supportedVideoTypes",get:function(){var e,t=[];if("function"!=typeof Ir.canPlayType)return t;for(e in Or)Ir.canPlayType(Or[e]).replace(/^no$/,"")&&t.push(e);return t}},{key:"supportsPlaybackRate",get:function(){return!1}}]);var t=e.prototype;return t.deactivate=function(){n.prototype.deactivate.call(this),this.reset()},t.reset=function(){this.jo&&clearTimeout(this.jo),this.ye=null,this.jo=null,this.Kr=!1,this.Yr=!1,this.Lo=null,this.Do=0,this.jo=null,this.Qr=new lr(this,this.tt),this.Oe=[]},t.endLive=function(){var e=this;this.Kr=!1,this.Yr=!0,clearTimeout(this.jo),this.$.pause(),setTimeout(function(){n.prototype.deactivate.call(e),e.fire(un.ENDED)},0)},t.Po=function(){var e=this,t=he(this.video.metadata.playlistRefreshUrl.split("?")[1]);t.expires&&(this.jo=setTimeout(function(){e.No()},1e3*(t.expires-10)))},t.No=function(){var t=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,i=this.video.metadata.playlistRefreshUrl;return qi(i).json().then(function(e){if(!("url"in e))throw new Error("Error parsing 'url' key from player live API refresh endpoint: ".concat(i," ").concat(e));return t.Fo(e.url.hls).then(function(){return t.play(),t.Uo(5e3),null}).catch(function(){return t.No(++n)})}).catch(function(){if(3<=n)throw new Error("Manifest failed to load after ".concat(n," attempts."));return++n,t.No(n)})},t.Vo=function(){var e=this;this.on(hn.STREAM_OFFLINE,function(){e.Kr=!1})},t.Bo=function(e){return this.Vo(),this.Kr=!0,this.fire(hn.STREAM_ONLINE),this.Uo(5e3),ee.resolve(e)},t.Fo=function(e){var n=this;return this.Oo=e,/json=1/.test(e)?qi(e).json().then(function(e){if(!("url"in e))throw new Error("Error parsing 'url' key from Live API manifest endpoint: ".concat(n.Oo," ").concat(e));n.$.src=e.url,n.Po()}).catch(function(e){var t=n.video.metadata.playlistRefreshUrl;return qi(t).json().then(function(e){if(!("url"in e))throw new Error("Error parsing 'url' key from player live API refresh endpoint: ".concat(t," ").concat(e));n.Oo=e.url.ios,n.$.src=e.url.ios,n.Po()})}):(this.$.src=e,this.Po(),ee.resolve())},t.Uo=function(e){var n=this;"number"==typeof An.iOS&&An.iOS<9||this.Lo||(this.Lo=setTimeout(function(){var t;n.Kr&&((t=new XMLHttpRequest).onload=function(){410!==t.status?(200!==t.status&&n.fire(hn.STREAM_OFFLINE),t.response.match(/^#EXTM3U\n#EXT-X-VERSION:3\n$/)&&n.fire(hn.STREAM_OFFLINE)):n.No()},t.onerror=function(){n.fire(hn.STREAM_OFFLINE)},/json=1/.test(n.Oo)?qi(n.Oo).json().then(function(e){"url"in e||n.fire(hn.STREAM_OFFLINE),t.open("GET",e.url),t.send()}).catch(function(){t.open("GET",n.Oo),t.send()}):(t.open("GET",n.Oo),t.send()))},e))},t.setVideoSrc=function(e){var t=this;this.ye=this.Bo(e).then(function(){return t.Oo=e,t.Fo(e)})},t.onprogress=function(){this.Lo&&(clearTimeout(this.Lo),this.Lo=null)},t.onstalled=function(){this.Uo(1e4)},t.onerror=function(){var t=this;return this.$.error.code===this.$.error.MEDIA_ERR_SRC_NOT_SUPPORTED?(qi(this.Oo).then(function(){n.prototype.onerror.call(t)}).catch(function(e){e instanceof gi?t.fire(un.ERROR,new Vn("MediaNetworkError","A network error ocurred while fetching the media.")):n.prototype.onerror.call(t)}),!1):n.prototype.onerror.call(this)},t.onwaiting=function(){this.Uo(1e4)},t.seekToTime=function(){},t.play=function(){var e=this;return n.prototype.play.call(this,function(){return e.ye})},H(e,[{key:"currentTime",get:function(){return this.$.currentTime},set:function(e){this.$.currentTime=e}}]),e}(ii),Pr=function(){function e(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.Ho=e,this.Z=e.Z,this.tt=t}H(e,null,[{key:"displayName",get:function(){return"Effect"}},{key:"supported",get:function(){return!1}},{key:"supportedScanners",get:function(){return[]}}]);var t=e.prototype;return t.activate=function(){throw new Vn("NotImplemented","The effect must implement the activate method.")},t.deactivate=function(){throw new Vn("NotImplemented","The effect must implement the deactivate method.")},e}(),Mr=new He,Nr=new He,Fr=(H(qr,[{key:"priority",get:function(){return Mr.get(this)},set:function(e){if(!("number"==typeof(e=parseInt(e,10))&&isFinite(e)&&Math.floor(e)===e&&0<=e))throw new TypeError("The file priority must be an integer greater than or equal to 0.");Mr.set(this,e)}},{key:"src",get:function(){return Nr.get(this)},set:function(e){Nr.set(this,e),this.video.fire(fn.FILE_SRC_UPDATE,this)}},{key:"restrictedStreamIndexes",get:function(){if(!Object.getOwnPropertyDescriptor(Object.getPrototypeOf(this.video.currentScanner),"restrictedStreamIndexes"))throw new ReferenceError("The current scanner does not support streams.");return this.video.currentScanner.restrictedStreamIndexes},set:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];if(!Array.isArray(e))throw new TypeError("Indexes must be an array.");if(!Object.getOwnPropertyDescriptor(Object.getPrototypeOf(this.video.currentScanner),"restrictedStreamIndexes"))throw new ReferenceError("The current scanner does not support streams.");this.video.currentScanner.restrictedStreamIndexes=e}}]),qr);function qr(e,t){var n=e.src,i=e.mime,r=e.id,o=void 0===r?Mn():r,r=e.priority,r=void 0===r?0:r,e=e.metadata,e=void 0===e?{}:e;if(!n)throw new TypeError("Must provide a src for the file.");if(!i)throw new TypeError("Must provide a mime type for the file.");Object.defineProperties(this,{mime:{value:i,enumerable:!0},id:{value:"".concat(o),enumerable:!0},metadata:{value:e,enumerable:!0}}),this.video=t,this.priority=r,this.src=n}function Ur(){return window.MediaKeys&&window.navigator&&window.navigator.requestMediaKeySystemAccess&&window.MediaKeySystemAccess&&window.MediaKeySystemAccess.prototype.getConfiguration||window.WebKitMediaKeys}function jr(e,t,n){"string"==typeof t&&(t=function(e){for(var t=new ArrayBuffer(2*e.length),n=new Uint16Array(t),i=0,r=e.length;i<r;i++)n[i]=e.charCodeAt(i);return n}(t));var i=0,r=new ArrayBuffer(e.byteLength+4+t.byteLength+4+n.byteLength),o=new DataView(r);new Uint8Array(r,0,e.byteLength).set(e),i+=e.byteLength,o.setUint32(i,t.byteLength,!0),i+=4;e=new Uint8Array(r,i,t.byteLength);return e.set(t),i+=e.byteLength,o.setUint32(i,n.byteLength,!0),i+=4,new Uint8Array(r,i,n.byteLength).set(n),new Uint8Array(r,0,r.byteLength)}function Hr(e,t){for(var t=!(1<arguments.length&&void 0!==t)||t?e.buffer:e,t=String.fromCharCode.apply(null,new Uint16Array(t)),t=(new DOMParser).parseFromString(t,"application/xml"),n={},i=t.getElementsByTagName("HttpHeader"),r=0;r<i.length;++r){var o=i[r].querySelector("name"),s=i[r].querySelector("value");n[o.textContent]=s.textContent}return[n,e=Nn(t.querySelector("Challenge").textContent)]}function Br(i,r,o,e){var n=e.audio||[],s=e.video||[],a=[{video:"HW_SECURE_ALL",audio:"SW_SECURE_CRYPTO"},{video:"HW_SECURE_DECODE",audio:"SW_SECURE_CRYPTO"},{video:"HW_SECURE_CRYPTO",audio:"SW_SECURE_CRYPTO"},{video:"SW_SECURE_DECODE",audio:"SW_SECURE_CRYPTO"},{video:"SW_SECURE_CRYPTO",audio:"SW_SECURE_CRYPTO"}].map(function(t){var e={persistentState:"optional",sessionTypes:["temporary"]};return s.length&&(e.videoCapabilities=s.map(function(e){return{contentType:e,robustness:t.video}})),n.length&&(e.audioCapabilities=n.map(function(e){return{contentType:e,robustness:t.audio}})),e}),e=Object.keys(i).map(function(e){var t=i[e].id;if(r||o){var n=null,e=r?window.WebKitMediaKeys:window.MSMediaKeys;try{n=new e(t)}catch(e){}return ee.resolve({name:t,keySystem:n})}return navigator.requestMediaKeySystemAccess(t,a).then(function(e){return e.createMediaKeys()}).catch(function(e){}).then(function(e){return{name:t,keySystem:e}})});return ee.all(e)}function Vr(t,n){var i=null;return Object.keys(t).forEach(function(e){n.name===t[e].id&&(i=t[e])}),i}var Wr=((C=eo.prototype).init=function(e){var t,n,i,r,o=this,s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.$=e.$,this.tu=e,Ur()?(this.nu=(t=this.Wo,n=this.zo,i={},r="".concat(window.screen.availWidth,"x").concat(window.screen.availHeight),e=window.devicePixelRatio,i.merchant="vimeo",i.sessionId=JSON.stringify({ua:navigator.userAgent,token:t,resolution:r,pixelRatio:e}),i.userId=n,i),Br(this.qo,this.Ko,!1,s).then(function(e){if(e.forEach(function(e){e.keySystem&&(o.$o=e)}),!o.$o)return o.tu.fire(fn.EME_UNSUPPORTED),!1;e=Vr(o.qo,o.$o);return o.Xo="encrypted",o.Yo=e.license_url,o.Ko&&(o.iu=e.certificate_url,o.Xo="webkitneedkey"),o.$.addEventListener(o.Xo,o.Zo),o.Ko?o.$.webkitSetMediaKeys(o.$o.keySystem):o.$.mediaKeys?(o.Jo=o.$.mediaKeys.createSession(),o.Jo.addEventListener("message",function(e){return o.eu(e)})):(o.Jo=o.$o.keySystem.createSession(),o.Jo.addEventListener("message",function(e){return o.eu(e)}),o.$.setMediaKeys(o.$o.keySystem)),!0})):(this.tu.fire(fn.EME_UNSUPPORTED),!1)},C.destroy=function(){this.Jo&&this.Jo.sessionId&&this.Jo.close(),this.$.removeEventListener(this.Xo,this.Zo)},C.Qo=function(n){var i=this;return"com.apple.fps.1_0"===this.$o.name?(this.ru().then(function(e){i.ou="assetId=".concat(i.Go);var t=jr(n.initData,i.ou,e);return i.Jo=i.$o.keySystem.createSession("video/mp4",t),i.Jo.addEventListener("webkitkeymessage",function(e){return i.eu(e)}),e}).catch(function(e){i.tu.fire(e.error,e.payload)}),!0):!this.Jo.sessionId&&!this.uu&&(this.uu=this.Jo.generateRequest(n.initDataType,n.initData).catch(function(){i.tu.fire(fn.DRM_FAILURE)}),!0)},C.eu=function(s){var a=this;return new ee(function(n,i){a.uu=null;var r=new XMLHttpRequest;r.keySession=s.target,r.responseType="arraybuffer",r.open("POST",a.Yo),r.setRequestHeader("dt-custom-data",window.btoa(JSON.stringify(a.nu)));var t,e,o=s.message;"com.microsoft.playready"===a.$o.name&&(e=Hr(s.message,!1),t=e[0],Object.keys(t).forEach(function(e){r.setRequestHeader([e],t[e])}),o=e[1]),"com.apple.fps.1_0"===a.$o.name&&(e=btoa(String.fromCharCode.apply(null,o)),e=encodeURIComponent(e),o="spc=".concat(e,"&").concat(a.ou),r.setRequestHeader("Content-type","application/x-www-form-urlencoded")),r.onload=function(){if(403!==r.status)if(400<=r.status)i({error:fn.DRM_FAILURE});else try{a.tu.fire(fn.DRM_AUTH_SUCCESS);var e=new Uint8Array(r.response),t=e.buffer;"com.apple.fps.1_0"===a.$o.name&&(t=function(e){e=window.atob(e.trim());return"<ckc>"===e.substr(0,5)&&"</ckc>"===e.substr(-6)&&(e=e.slice(5,-6)),new Uint8Array(atob(e).split("").map(function(e){return e.charCodeAt(0)}))}(btoa(String.fromCharCode.apply(null,e)))),r.keySession.update(t),n()}catch(e){i("Error updating key session: ".concat(e))}else{t=JSON.parse(r.getResponseHeader("x-dt-error-message"));i({error:fn.DRM_AUTH_FAILURE,payload:{text:t.error,code:t.error_code}})}},r.onerror=i,r.send(o)}).catch(function(e){a.tu.fire(e.error,e.payload)})},C.ru=function(){var e=this;return new ee(function(t,n){var i=new XMLHttpRequest;i.responseType="arraybuffer",i.open("GET",e.iu),i.setRequestHeader("dt-custom-data",window.btoa(JSON.stringify(e.nu))),i.onload=function(){if(403!==i.status)if(400<=i.status)n({error:fn.DRM_FAILURE});else try{t(new Uint8Array(i.response))}catch(e){n(e)}else{var e=JSON.parse(i.getResponseHeader("x-dt-error-message"));n({error:fn.DRM_AUTH_FAILURE,payload:{text:e.error,code:e.error_code}})}},i.onerror=n,i.send()})},eo),$r=((Se=Qr.prototype).getAllKeySessions=function(){return Object.values(this.hu)||[]},Se.getCdms=function(e){return this.au[e]},Se.getAllPreferredKeySystems=function(){return this.su},Se.addCdms=function(e,t){this.au[t]=e},Se.addKeySession=function(e,t){this.hu[t]=e},Se.addLicenseTokenUrl=function(e,t){this.cu[t]=e},Se.addLicenseUrl=function(e,t){this.lu[t]=e},Se.addPreferedKeySystem=function(e,t){this.su[t]=e},Se.closeAllKeySessions=function(){for(var e in this.hu)this.hu[e]&&this.hu[e].sessionId&&this.hu[e].close()},H(Qr,[{key:"state",get:function(){return this.du},set:function(e){Object.values(this.vu).indexOf(e)<0||(this.du=e)}},{key:"activeKeySession",get:function(){return this.hu[this.du]}},{key:"activeKeySystem",get:function(){return this.su[this.du]}},{key:"keyTypes",get:function(){return this.vu}},{key:"activeLicenseTokenUrl",get:function(){return this.cu[this.du]}},{key:"activeLicenseUrl",get:function(){return this.lu[this.du]}}]),Qr),zr=((we=Zr.prototype).init=function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return this.$=e.$,this.tu=e,this.yu=!!window.MSMediaKeys,Ur()||this.yu?this.wu.state===this.vu.KEYCHAIN_SD_FALLBACK?this.setUpKeySystem(n,i,this.vu.KEYCHAIN_SD_FALLBACK):this.setUpKeySystem(n,i).then(function(){return t.setUpKeySystem(n,i,t.vu.KEYCHAIN_SD_FALLBACK)}):(this.tu.fire(fn.EME_UNSUPPORTED),ee.reject())},we.setUpKeySystem=function(i,r){var o=this,s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.vu.KEYCHAIN_DEFAULT;return new ee(function(e,t){var n=o.wu.getCdms(s);return n||t(),Br(n,o.Ko,o.yu,i).then(function(e){o.wu.addPreferedKeySystem(e.find(function(e){return e.keySystem}),s);e=o.wu.activeKeySystem&&Vr(n,o.wu.activeKeySystem);if(!e)throw o.tu.fire(fn.EME_UNSUPPORTED),new Error("No valid key system was found.");o.wu.addLicenseTokenUrl(e.license_url,s);var t=r&&r.inits&&r.inits[e.id];return t||o.gu(e,s),o._u(s).then(function(){var e=o.wu.state===s;return t&&e&&o.Qo(t.cenc,s)})}).then(e)})},we.destroy=function(){this.wu&&this.wu.closeAllKeySessions(),this.$&&this.$.removeEventListener(this.Xo,this.Zo)},we.ku=function(t){var n=this;return new ee(function(e){n.wu.state=t,n.wu.activeKeySession.addEventListener("message",function(e){return n.eu(e)}),e()})},we.gu=function(e,t){this.Xo="encrypted",this.wu.addLicenseUrl(e.license_url,t),this.Ko?(this.iu=e.certificate_url,this.Xo="webkitneedkey"):this.yu&&(this.Xo="msneedkey"),this.$.addEventListener(this.Xo,this.Zo)},we._u=function(n){var i=this;return new ee(function(t){var e;i.yu?(e=function e(){i.$.msSetMediaKeys(i.wu.activeKeySystem.keySystem),i.$.removeEventListener("loadedmetadata",e),t()},1<=i.$.readyState?e():i.$.addEventListener("loadedmetadata",e)):(i.Ko?i.$.webkitSetMediaKeys(i.wu.activeKeySystem.keySystem):(e=i.$.mediaKeys||i.wu.activeKeySystem.keySystem,i.wu.addKeySession(i.Eu(e),n),n===i.wu.state&&i.wu.activeKeySession.addEventListener("message",function(e){return i.eu(e)}),i.$.mediaKeys||i.$.setMediaKeys(i.wu.activeKeySystem.keySystem)),t())})},we.Eu=function(e,t,n){n=e.createSession(t,n);if(!n)throw new Error("Could not create key session");return n},we.Qo=function(i,r){var o=this;r=r||this.wu.state;var s=new Error("A decryption key error was encountered");return"com.apple.fps.1_0"===this.wu.activeKeySystem.name?(this.ru(this.iu).then(function(e){var t;o.ou=(t=i.initData,n=new Uint16Array(t.buffer),t=String.fromCharCode.apply(null,n),(n=document.createElement("a")).href=t,n.hostname);var n=jr(i.initData,o.ou,e);return o.wu.addKeySession(o.Eu(o.wu.activeKeySystem.keySystem,"video/mp4",n),r),o.wu.activeKeySession.contentId=o.ou,o.wu.activeKeySession.addEventListener("webkitkeymessage",function(e){return o.eu(e)}),o.wu.activeKeySession.addEventListener("webkitkeyerror",function(e){throw s}),e}).catch(function(e){o.tu.fire(e.error,e.payload)}),!0):"com.microsoft.playready"===this.wu.activeKeySystem.name?(this.wu.addKeySession(this.Eu(this.$.msKeys,"video/mp4",i.initData),r),this.wu.activeKeySession.addEventListener("mskeymessage",function(e){return o.eu(e)}),this.wu.activeKeySession.addEventListener("mskeyerror",function(e){throw s}),!0):!this.wu.activeKeySession.sessionId&&!this.uu&&(this.wu.activeKeySession.addEventListener("keystatuseschange",this.mu),this.uu=this.wu.activeKeySession.generateRequest(i.initDataType,i.initData).catch(function(){o.tu.fire(fn.DRM_FAILURE)}),!0)},we.bu=function(){var e=this,n=!1,t=Be(this.wu.activeKeySession.keyStatuses.values());if(t.forEach(function(e,t){"expired"===e&&(n=!0)}),t.every(function(e){return"output-restricted"===e})){if(this.pu&&0===this.tu.currentTime)return void this.ku(this.vu.KEYCHAIN_SD_FALLBACK).then(function(){e.tu.fire(fn.DRM_KEY_SWITCH,e.vu.KEYCHAIN_SD_FALLBACK)}).catch(function(){});this.tu.fire(fn.DRM_OUTPUT_RESTRICTED)}n&&this.wu.activeKeySession.close()},we.eu=function(a){var c=this;return this.Tu(this.wu.activeLicenseTokenUrl).then(function(s){return new ee(function(t,n){c.wu.addLicenseUrl(s,c.wu.state),c.uu=null;var i=new XMLHttpRequest;i.keySession=a.target,i.open("POST",c.wu.activeLicenseUrl),i.responseType="arraybuffer";var e,r,o=a.message;"com.microsoft.playready"===c.wu.activeKeySystem.name&&(e=Hr(a.message),r=e[0],Object.keys(r).forEach(function(e){i.setRequestHeader(e,r[e])}),o=e[1]),"com.apple.fps.1_0"===c.wu.activeKeySystem.name&&(o=new Uint8Array(o),i.setRequestHeader("Content-type","application/octet-stream")),i.onload=function(){if(403!==i.status)if(400<=i.status)n(new Vn(fn.DRM_FAILURE));else try{c.tu.fire(fn.DRM_AUTH_SUCCESS);var e=new Uint8Array(i.response);i.keySession.update(e),t()}catch(e){n(new Vn(fn.DRM_FAILURE,"Error updating key session: ".concat(e)))}else n(new Vn(fn.DRM_AUTH_FAILURE))},i.onerror=n,i.send(o)}).catch(function(e){c.tu.fire(e.name,{text:e.message||"License request failed."})})})},we.Tu=function(e){return new ee(function(i,r){var o=new XMLHttpRequest;o.open("GET",e),o.onload=function(){if(400<=o.status)r(new Vn(fn.DRM_FAILURE));else try{try{var e=JSON.parse(o.response),t=e.licenseAcquisitionUrl,n=e.token;if(!t&&!n)throw new Error;i("".concat(t,"?ExpressPlayToken=").concat(n))}catch(e){i(o.response)}}catch(e){r(new Vn(fn.DRM_FAILURE,"Error retrieving License Acquisition URL (LA_URL): ".concat(e)))}},o.onerror=r,o.send()})},we.ru=function(i){return new ee(function(e,t){var n=new XMLHttpRequest;n.open("GET",i),n.responseType="arraybuffer",n.setRequestHeader("Pragma","Cache-Control: no-cache"),n.setRequestHeader("Cache-Control","max-age=0"),n.onload=function(){if(403!==n.status)if(400<=n.status)t({error:fn.DRM_FAILURE});else try{e(new Uint8Array(n.response))}catch(e){t(e)}else t({error:fn.DRM_AUTH_FAILURE})},n.onerror=t,n.send()})},H(Zr,[{key:"state",get:function(){return this.wu.state}}]),Zr),Kr=new He,Gr=(Xr.prototype.deactivate=function(){var t=this;this.Su&&this.Su.destroy(),this.textTracks.forEach(function(e){return t.currentScanner.removeTextTrack(e)})},H(Xr,[{key:"drmHandler",get:function(){return this.Su||null}},{key:"currentFile",get:function(){return this.currentScanner.currentFile},set:function(e){this.currentScanner.currentFile=e}},{key:"currentScanner",get:function(){return Kr.get(this)},set:function(t){var n=this;this.currentScanner&&this.currentScanner.constructor.supportsTextTracks&&this.textTracks.forEach(function(e){return n.currentScanner.removeTextTrack(e)}),t.constructor.supportsTextTracks&&this.textTracks.forEach(function(e){return t.addTextTrack(e)}),Kr.set(this,t)}},{key:"chapters",get:function(){return this.chapters}}]),Xr),Yr=((Ft=Jr.prototype).destroy=function(){clearInterval(this.xu),this.zu(this.Ho.off),this.Lu()},Ft.zu=function(e){e(un.PAUSE,this.Du),e(un.PLAYING,this.ju),e(un.SEEKING,this.Nu),e(un.SEEKED,this.Uu),e(hn.STREAM_ONLINE,this.Bu),e(hn.STREAM_OFFLINE,this.qu)},Ft.Pu=function(){this.userPlayState=!1},Ft.Lu=function(){this.Mu&&(this.Mu=!1,this.fire(fn.BUFFER_ENDED))},Ft.Fu=function(){this.Cu=!0},Ft.Vu=function(){this.Cu=!1},Ft.Hu=function(){this.Iu=!0},Ft.Wu=function(){this.Iu=!1},Ft.Gu=function(){clearInterval(this.xu),this.xu=setInterval(this.runIntervalCheck.bind(this),this.Ou)},Ft.runIntervalCheck=function(){if(this.Ho.video){var e=this.Ho.video.currentScanner;if(e){var t=this.Ho.isLive(),n=e.currentTime,e=this.Ou/2/1e3;if(this.playInitiated&&(!this.Cu||t)&&(!this.Ho.paused||this.userPlayState)&&!this.Mu&&n<this.Au+e){if(t&&!this.Iu)return;for(var i=this.Ho.buffered,r=0;r<i.length;r++)if(n>=i.start(r)&&n+.2<=i.end(r))return;if(n+e>=this.Ho.duration)return;this.Mu=!0,this.fire(fn.BUFFER_STARTED)}(this.playInitiated&&this.Mu&&n>this.Au+e||t&&!this.Iu&&this.Mu)&&(this.Mu=!1,this.fire(fn.BUFFER_ENDED)),this.Au=n}}},H(Jr,[{key:"userPlayState",get:function(){return this.Ru},set:function(e){(this.Ru=e)||this.Lu()}}]),Jr);function Jr(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.Ho=e,this.tt=t,this.xu=null,this.Au=this.tt.embedTime||0,this.Mu=!1,this.Cu=!1,this.Ru=!1,this.playInitiated=!1,this.Iu=!1,this.Ou=250,Q(this),this.ju=this.Lu.bind(this),this.Du=this.Pu.bind(this),this.Nu=this.Fu.bind(this),this.Uu=this.Vu.bind(this),this.Bu=this.Hu.bind(this),this.qu=this.Wu.bind(this),this.zu(this.Ho.on),this.tt.noInterval||this.Gu()}function Xr(e){var t=this,n=e.files,i=e.id,r=void 0===i?Mn():i,o=e.title,s=void 0===o?null:o,a=e.subtitle,c=void 0===a?null:a,i=e.metadata,o=void 0===i?{}:i,a=e.textTracks,i=void 0===a?On():a,a=e.externalDisplayFiles,u=void 0===a?{}:a,a=e.chapters,a=void 0===a?[]:a,e=e.duration;if(!n||!Array.isArray(n))throw new TypeError("Must provide files for the video.");Q(this);n=function(e){e=0<arguments.length&&void 0!==e?e:[];return e.getFileById=In,e}(n.map(function(e){return e instanceof Fr?(e.video=t,e):new Fr(e,t)})),i=On(i.map(function(e){return e instanceof mr?(e.video=t,e):new mr(e,t)}));Object.keys(u).forEach(function(e){!u[e]||u[e]instanceof Fr||(u[e]=new Fr(u[e],t))}),Object.defineProperties(this,{id:{value:"".concat(r),enumerable:!0},title:{value:s,enumerable:!0},subtitle:{value:c,enumerable:!0},metadata:{value:o,enumerable:!0},files:{value:n,enumerable:!0},textTracks:{value:i,enumerable:!0,writable:!0},chapters:{value:a,enumerable:!0},duration:{value:e,enumerable:!0},externalDisplayFiles:{value:u,enumerable:!0}}),o.drm&&(o.drm.fastly?this.Su=new zr(o.drm,o.useHls):this.Su=new Wr(o.drm,o.useHls))}function Zr(e,t){this.pu=!!e.fallback_asset,this.Ko=t,this.Xo=null,this.Zo=this.Qo.bind(this),this.mu=this.bu.bind(this),this.wu=new $r,this.vu=this.wu.keyTypes,this.wu.state=this.vu.KEYCHAIN_DEFAULT,this.wu.addCdms(e.cdms,this.vu.KEYCHAIN_DEFAULT),this.pu&&this.wu.addCdms(e.fallback_cdms,this.vu.KEYCHAIN_SD_FALLBACK)}function Qr(){this.au={},this.su={},this.cu={},this.lu={},this.fu={},this.hu={},this.du="default",this.vu={KEYCHAIN_DEFAULT:"default",KEYCHAIN_SD_FALLBACK:"sd-fallback"}}function eo(e,t){this.qo=e.cdms,this.Wo=e.lr_token,this.zo=e.user,this.Go=e.asset,this.Ko=t,this.Yo=null,this.Jo=null,this.$o=null,this.Xo=null,this.Zo=this.Qo.bind(this)}function to(){var t,n;function i(){if(!n)return ee.reject();t.preload="";var e=t.play();return e=void 0===e?new ee(function(e){t.addEventListener("playing",e)}):e}function r(){n&&(n.resolve(),n=null)}function o(e){n&&(n.reject(e),n=null)}return{set video(e){t=e},get active(){return!!n},start:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:ee.resolve.bind(ee);return n=n||new le,(t.src?document.createElement("video"):t).load(),e().then(i).then(r).catch(o),n},cancel:function(){n&&(n.reject(new Vn("PlayInterrupted","The play() request was interrupted by a call to pause()")),n=null)}}}var no=((Is=vo.prototype).supportsEffect=function(e){var t=this;return!!e.supported&&e.supportedScanners.some(function(e){return t.Zu(t.Ju)===e.displayName})},Is.getEffectByName=function(t){var n=this,i=null;return this.Xu.forEach(function(e){t===n.Qu(e)&&(i=e)}),i},Is.activateEffect=function(e,t){t=new e(this,t);return t.activate(),this.Xu.push(t),t},Is.deactivateEffect=function(n){var i=this;return this.Xu.some(function(e,t){return e.constructor===n&&(e.deactivate(),i.Xu.splice(t,1),!0)})},Is.deactivateEffects=function(){var t=this;this.Xu.forEach(function(e){return t.deactivateEffect(e.constructor)})},Is.play=function(){if(!this.$||this.$.files.length<1)throw new Vn("NoFiles","There are no files to play.");this.ta.playInitiated||(this.ta.playInitiated=!0),this.ta.userPlayState=!0;var e=this.Ju.play();return this.Yu.paused=!1,e},Is.pause=function(){if(!this.$||this.$.files.length<1)throw new Vn("NoFiles","There are no files to play.");return this.ta.userPlayState=!1,this.Ju.pause(),this.Yu.paused=!0,this},Is.isLive=function(){return this.currentScannerName.includes("Live")},Is.endLive=function(){this.Ju.endLive()},Is.getBitrateAtTime=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"video";return"MediaSourceScanner"!==this.Zu(this.Ju)&&"HLSLiveScanner"!==this.Zu(this.Ju)||"audio"===t&&this.Ju.vn[t].length<=1?0:this.Ju.getBitrateAtTime(e,t)},Is.getCurrentStream=function(){var e,t;return null==(e=(t=this.Ju).getCurrentStream)?void 0:e.call(t,0<arguments.length&&void 0!==arguments[0]?arguments[0]:"video")},Is.showExternalDisplayPicker=function(e){this.Ju.showExternalDisplayPicker(e)},Is.supportsPresentationMode=function(e){return-1!==this.supportedPresentationModes.indexOf(e)},Is.addChapter=function(e,t){this.Ju.addChapter(e,t)},Is.removeChapter=function(e){this.Ju.removeChapter(e)},Is.addCuePoint=function(e,t){return this.Ju.addCuePoint(e,t)},Is.removeCuePoint=function(e){return this.Ju.removeCuePoint(e)},Is.removeAllCuePoints=function(){return this.Ju.removeAllCuePoints()},Is.addVideoEventListeners=function(){return this.Ju.addVideoEventListeners()},Is.removeVideoEventListeners=function(){return this.Ju.removeVideoEventListeners()},Is.na=function(){var e,r=this,t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).textTrackSupport,o=void 0!==t&&t,s=this.$.files.sort(function(e,t){return e.priority-t.priority}),a=this.Ku;for(e in s){var n=function(e){var t,n=s[e];for(t in a){var i=a[t];if(i.supported&&(!o||i.supportsTextTracks)&&-1===r.$u.indexOf(r.Zu(i))&&i.supportedVideoTypes.some(function(e){return n.mime===e}))return{v:i}}}(e);if("object"===U(n))return n.v}return o?(this.kt("TextTracksNotSupported","None of the scanners support text tracks in this browser."),this.$u=[],this.na()):null},Is.ia=function(e,t){var n=this;if(this.Ju.constructor!==e||this.Ju.video!==t){this.Ju.deactivate();var i=new e(this.Z,this.tt);Object.keys(gn).forEach(function(e){var t=gn[e];i.on(t,function(e){return n.ea(t,e,i)})}),this.Ju=i,t.currentScanner=i,this.Ju.video=t;for(var r=Object.keys(this.Yu),o=0;o<r.length;o++){var s=r[o];"paused"!==s?"currentTime"!==s&&(this.Ju[s]=this.Yu[s]):!1===this.Yu.paused&&this.Ju.play()}this.Ju.addChapters(t.chapters,t.duration),this.fire(fn.SCANNER_CHANGE,this.Zu(this.Ju))}},Is.ra=function(){var e;null!==this.$&&((e=this.na({textTrackSupport:0<this.$.textTracks.length}))?this.ia(e,this.$):this.kt("FilesNotPlayable","None of the files could be played in this browser."))},Is.oa=function(){this.Ju.deactivate(),this.Ju=new ii(this.Z)},Is.ea=function(t,e,n){if(n===this.Ju){switch(t){case un.ERROR:return void(e instanceof Vn&&this.fire(un.ERROR,e));case fn.SCANNER_ERROR:this.kt("ScannerError","The current scanner can no longer be used because ".concat(e.reason)),this.$u.push(this.Zu(this.Ju)),this.ra([]);break;case fn.FILE_ERROR:this.kt("FileError","The current file can no longer be used because ".concat(e.reason)),this.Ju.Et();break;case fn.DOWNLOAD_ERROR:this.kt("DownloadError",e),this.Ju.Et();break;case fn.EME_UNSUPPORTED:this.kt("DRMFailure",{text:null,code:"emeunsupported"});break;case fn.DRM_FAILURE:case fn.DRM_AUTH_FAILURE:this.kt("DRMFailure",{text:e.text,code:e.code});break;case fn.DRM_OUTPUT_RESTRICTED:this.kt("DRMFailure",{text:null,code:"outputrestricted"});break;case fn.DRM_AUTH_SUCCESS:this.fire(fn.DRM_AUTH_SUCCESS);break;case un.TIME_UPDATE:this.Yu.currentTime=this.Ju.currentTime;break;case fn.MEDIA_URL_EXPIRED:this.kt("MediaUrlExpired",e);break;case fn.MEDIA_URL_BAD_REQUEST:this.kt("MediaUrlBadRequest",e);break;case mn.BRAIN_ML_MODEL_ERR:this.kt("MimirError",e);break;case mn.BRAIN_ML_MODEL_NET_ERR:this.kt("MimirNetworkError",e);break;case mn.BRAIN_ML_MODEL_TIMEOUT:this.kt("MimirNetworkTimeout",e);break;case vn.SPATIAL_UNSUPPORTED:this.getEffectByName("ThreeSixtyEffect").deactivate();break;case un.ENDED:this.Yu.paused=!0;break;case un.WAITING:this.fire(un.WAITING)}this.Xu.forEach(function(e){"function"==typeof e["on".concat(t)]&&e["on".concat(t)]()}),this.fire(t,e)}},Is.kt=function(e,t){this.fire(un.ERROR,new Vn(e,t))},Is.Zu=function(e){return(e instanceof ii?e:e.prototype).constructor.displayName},Is.Gu=function(){var e=this;this.ta&&this.ta.destroy(),this.ta=new Yr(this,this.tt),this.ta.on(fn.BUFFER_STARTED,function(){e.fire(fn.BUFFER_STARTED)}),this.ta.on(fn.BUFFER_ENDED,function(){e.fire(fn.BUFFER_ENDED)})},Is.Qu=function(e){return(e instanceof Pr?e:e.prototype).constructor.displayName},Is.aa=function(e){"HLSLiveScanner"===this.Zu(this.Ju)&&this.Ju.setCaptionsState(e)},H(vo,[{key:"element",get:function(){return this.Z}},{key:"videoElement",get:function(){return this.Ju.videoElement}},{key:"manifest",get:function(){return this.Ju.manifest||{video:[]}}},{key:"supportsSettingVolume",get:function(){return this.Ku.some(function(e){return e.supported&&e.supportsSettingVolume})}},{key:"supportsPlaybackRate",get:function(){return this.Ju.constructor.supportsPlaybackRate}},{key:"supportsTextTracks",get:function(){return this.Ku.some(function(e){return e.supported&&e.supportsTextTracks})}},{key:"activeEffects",get:function(){return this.Xu}},{key:"latency",get:function(){return this.Ju.latency}},{key:"downloadSpeed",get:function(){return this.Ju.downloadSpeed||0}},{key:"isLowerProfileAvailable",get:function(){return this.Ju.isLowerProfileAvailable}},{key:"buffered",get:function(){return this.Ju.buffered}},{key:"bufferTarget",get:function(){return this.Ju.bufferTarget},set:function(e){this.Yu.bufferTarget=e,this.Ju.bufferTarget=e}},{key:"presentationDelay",get:function(){return this.Ju.presentationDelay},set:function(e){this.Yu.presentationDelay=e,this.Ju.presentationDelay=e}},{key:"manifestLoadDurations",get:function(){return this.Ju.manifestLoadDurations||[]}},{key:"successfulSegments",get:function(){return this.Ju.successfulSegments||[]}},{key:"failedSegments",get:function(){return this.Ju.failedSegments||[]}},{key:"cuePoints",get:function(){return this.Ju.cuePoints}},{key:"currentChapterID",get:function(){return this.Ju&&this.Ju.chaptersTrack&&this.Ju.chaptersTrack.activeCues.length?this.Ju.chaptersTrack.activeCues[0].id:null}},{key:"chapters",get:function(){return this.Ju.chaptersTrack?this.Ju.chaptersTrack.cues:[]}},{key:"chaptersTrack",get:function(){return this.Ju.chaptersTrack}},{key:"currentFile",get:function(){return this.Ju.currentFile},set:function(t){if(!(t="string"==typeof t?this.Ct.filter(function(e){return e.id===t})[0]:t))throw new Vn("FileNotValid","The file is not valid.");this.Ju.currentFile=t}},{key:"currentScannerName",get:function(){return this.Zu(this.Ju)}},{key:"currentTime",get:function(){return this.Ju.currentTime},set:function(e){this.Yu.currentTime=e,this.Ju.currentTime=e}},{key:"duration",get:function(){return this.Ju.duration}},{key:"ended",get:function(){return this.Ju.ended}},{key:"externalDisplayAvailable",get:function(){return this.Ju.externalDisplayAvailable}},{key:"externalDisplayActive",get:function(){return this.Ju.externalDisplayActive}},{key:"loop",get:function(){return this.Ju.loop},set:function(e){this.Yu.loop=e,this.Ju.loop=e}},{key:"muted",get:function(){return this.Ju.muted},set:function(e){this.Yu.muted=!!e,this.Ju.muted=!!e}},{key:"playsinline",get:function(){return this.Ju.playsinline},set:function(e){this.Yu.playsinline=!!e,this.Ju.playsinline=!!e}},{key:"paused",get:function(){return this.Ju.paused}},{key:"played",get:function(){return this.Ju.played}},{key:"seekable",get:function(){return this.Ju.seekable}},{key:"seeking",get:function(){return this.Ju.seeking}},{key:"defaultPlaybackRate",get:function(){return this.Ju.defaultPlaybackRate},set:function(e){this.Yu.defaultPlaybackRate=e,this.Ju.defaultPlaybackRate=e}},{key:"playbackRate",get:function(){return this.Ju.playbackRate},set:function(e){this.Yu.playbackRate=e,this.Ju.playbackRate=e}},{key:"preload",get:function(){return this.Ju.preload},set:function(e){this.Yu.preload=e,this.Ju.preload=e}},{key:"autoPictureInPicture",get:function(){return this.Ju.autoPictureInPicture},set:function(e){this.Yu.autoPictureInPicture=!!e,this.Ju.autoPictureInPicture=!!e}},{key:"disablePictureInPicture",get:function(){return this.Ju.disablePictureInPicture},set:function(e){this.Yu.disablePictureInPicture=!!e,this.Ju.disablePictureInPicture=!!e}},{key:"presentationMode",get:function(){return this.Ju.presentationMode},set:function(e){this.Ju.presentationMode=e}},{key:"supportedPresentationModes",get:function(){return this.Ju.supportedPresentationModes}},{key:"video",get:function(){return this.$},set:function(e){this.$&&this.$.deactivate(),this.$u=[],this.Gu(),null===e?(this.$=null,this.oa()):(this.$=new Gr(e),this.ra())}},{key:"videoWidth",get:function(){return this.Ju.videoWidth}},{key:"videoHeight",get:function(){return this.Ju.videoHeight}},{key:"volume",get:function(){return this.Ju.volume},set:function(e){if(e<0||1<e)throw new Vn("IndexSizeError","Failed to set the 'volume' property: The volume provided (".concat(e,") is outside of the range [0, 1]."));this.Yu.volume=e,this.Ju.volume=e}},{key:"brainDebug",get:function(){return this.Ju.brainDebug}}]),vo),io=function(t){function e(e){return(e=t.call(this,e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{})||this).sa=!1,e.$=e.Ho.Ju.$,e}W(e,t),H(e,null,[{key:"displayName",get:function(){return"CanvasEffect"}},{key:"supported",get:function(){return!0}},{key:"supportedScanners",get:function(){return[ii,cr]}}]);var n=e.prototype;return n.activate=function(){this.sa=!0,this.ca=document.createElement("canvas"),this.ca.className="vp-canvas-effect",this.ca.style.cssText="\n            position: absolute;\n            top:0;\n            left:0;\n            bottom:0;\n            right:0;\n        ",this.la=this.ca.getContext("2d",{alpha:!1}),this.Z.appendChild(this.ca),this.fa()},n.deactivate=function(){this.ca&&this.Z.removeChild(this.ca),this.ha(),this.sa=!1},n.fa=function(){this.da()},n.da=function(){this.va=window.requestAnimationFrame(this.pa.bind(this))},n.pa=function(){var e=this.$,t=this.ca;t.width=e.clientWidth,t.height=e.clientHeight;var n=Math.floor(this.ma()),i=Math.floor(this.ba()),r=Math.floor((e.clientWidth-n)/2),o=Math.floor((e.clientHeight-i)/2);this.la.fillStyle="#000",this.la.fillRect(0,0,t.width,t.height),this.la.drawImage(e,r,o,n,i),this.da()},n.wa=function(){return this.$.videoHeight/this.$.videoWidth},n.ma=function(){return Math.min(this.$.clientHeight/this.wa(),this.$.clientWidth)},n.ba=function(){return Math.min(this.$.clientWidth*this.wa(),this.$.clientHeight)},n.ha=function(){this.va&&(window.cancelAnimationFrame(this.va),this.va=null)},e}(Pr),ro=(H(ho,null,[{key:"Equirect",get:function(){return"equirectangular"}}]),ho),oo=(H(fo,null,[{key:"Mono",get:function(){return"mono"}},{key:"TopBottom",get:function(){return"top-bottom"}}]),fo),so=((N=lo.prototype).createEquirectProjection=function(e,t){switch(t){case oo.Mono:this.ya=this._a(e);break;case oo.TopBottom:this.ya=this._a(e),this.ga=this._a(e),this.ya.layers.set(1),this.ga.layers.set(2),this.ka(this.ya.geometry,.5,0),this.ka(this.ga.geometry,.5,.5)}},N._a=function(e,t,n,i){i=new THREE.SphereBufferGeometry(t||lo.SPHERE_RADIUS,n||lo.TESSELATION_WIDTH,i||lo.TESSELATION_HEIGHT);i.scale(-1,1,1);e=new THREE.MeshBasicMaterial({map:e});return new THREE.Mesh(i,e)},N.ka=function(e,t,n){for(var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,r=0;r<e.attributes.uv.array.length;r+=2)e.attributes.uv.array[r+i]*=t,e.attributes.uv.array[r+i]+=n},H(lo,[{key:"left",get:function(){return this.ya}},{key:"right",get:function(){return this.ga}}],[{key:"TESSELATION_WIDTH",get:function(){return 120}},{key:"TESSELATION_HEIGHT",get:function(){return 80}},{key:"SPHERE_RADIUS",get:function(){return 500}}]),lo),ao=((n=uo.prototype).hasVRHeadset=function(){var t=this;return An.webvr?navigator.getVRDisplays().then(function(e){return 0<e.length?(t.Ea.vr.setDevice(e[0]),e[0]):null}):null},n.enter=function(){return this.Ea.vr.getDevice()&&this.Ea.vr.getDevice().requestPresent([{source:this.Ea.domElement}])},n.exit=function(){return this.Ea.vr.getDevice()&&this.Ea.vr.getDevice().exitPresent()},H(uo,[{key:"supported",get:function(){return An.webvr}},{key:"device",get:function(){return this.Ea&&this.Ea.vr.getDevice()?this.Ea.vr.getDevice():null}},{key:"isPresenting",get:function(){return!(!this.Ea||!this.Ea.vr.getDevice())&&this.Ea.vr.getDevice().isPresenting}}]),uo),co=function(t){function e(e){return(e=t.call(this,e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{})||this).sa=!1,e.Ta=null,e.Sa=null,e.Ea=null,e.isUserInteracting=!1,e.xa=0,e.Aa=0,e._coordinates={lat:0,long:0},e.Ma={lat:0,long:0},e.Ca={lat:0,long:0},e.Ra=e.cameraProps,e.Ia=0,e.Oa=0,e.ja=0,e.$=e.Ho.Ju.$,e.La=null,e.Da={x:0,y:0},e.Pa={lat:0,long:0},e.Na={videoFps:e.tt.fps,motionRenderSpeed:60},e.Fa=1e3/e.Na.videoFps,e.Ua=[],e.Va=!1,e.Ba=!1,e.Ha=!1,e.qa={up:!1,down:!1,left:!1,right:!1},e}W(e,t),H(e,[{key:"isUserInteracting",set:function(e){e!==this.Wa&&((this.Wa=e)?this.tt.isMobile||this.Ho.fire(vn.MOTION_START):this.tt.isMobile||this.Ho.fire(vn.MOTION_END))},get:function(){return this.Wa}}],[{key:"displayName",get:function(){return"ThreeSixtyEffect"}},{key:"supported",get:function(){try{var e=document.createElement("canvas");return!!window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl"))}catch(e){return this.Ho.Ju.fire(vn.SPATIAL_UNSUPPORTED),!1}}},{key:"supportedScanners",get:function(){return[ii,cr]}}]),e.frustumSurfaceArea=function(e,t,n){e=2*so.SPHERE_RADIUS*2*Math.sin(Math.PI/180*(e/2));return e*t/n*e/(4*Math.PI*Math.pow(so.SPHERE_RADIUS,2))};var n=e.prototype;return n.activate=function(){var i=this;return new ee(function(e,t){var n;window.THREE?e():((n=document.createElement("script")).src=i.tt.threeUrl,document.body.appendChild(n),n.onload=function(){e()})}).then(function(){return i.qt()})},n.qt=function(){var t=this;this.sa=!0,this.Ta=new THREE.PerspectiveCamera(this.tt.fieldOfView,this.$.clientWidth/this.$.clientHeight,1,2*so.SPHERE_RADIUS),this.Ta.target=new THREE.Vector3(0,0,0),this.Ta.layers.enable(1),this.za(this.tt.directorTimeline),this.Sa=new THREE.Scene,this.Ga=new THREE.VideoTexture(this.$),this.Ga.generateMipmaps=!1,this.Ga.minFilter=THREE.NearestFilter,this.Ga.maxFilter=THREE.NearestFilter,this.Ga.format=THREE.RGBFormat,this.Ka=new so(this.tt.projection,this.tt.stereoMode,this.Ga),this.Ka.isStereo&&this.Sa.add(this.Ka.right),this.Sa.add(this.Ka.left),this.Ea=new THREE.WebGLRenderer,this.Ea.vr.enabled=!0,this.Ea.setPixelRatio(window.devicePixelRatio),this.Ya=document.createElement("div"),this.Ya.appendChild(this.Ea.domElement),this.Z.appendChild(this.Ya),this.Ja(),this.Ho.Ju.$.setAttribute("crossorigin","anonymous"),this.fa(),this.Ho.Ju.paused||this.$a(),this.Xa=new ao(this.Ea),this.Xa.supported&&this.Xa.hasVRHeadset().then(function(e){setTimeout(function(){t.Ho.fire(vn.WEBVR_HARDWARE_AVAILABLE,t.Xa.device)},100)}).catch(function(e){})},n.toggleVR=function(){var e=this;this.Xa.isPresenting?this.Xa.exit().then(function(){e.adjustRenderSize()}).catch(function(e){}):this.Ho.Ju.paused||this.Xa.enter().then(function(){e.adjustRenderSize()}).catch(function(e){})},n.onplay=function(){this.sa&&(this.$a(),this.adjustRenderSize())},n.deactivate=function(){this.Ya&&this.Z.removeChild(this.Ya),this.ha(),this.sa=!1},n.snapToCenter=function(){var t=this;this.Ua.forEach(function(e){return clearTimeout(e)});for(var n=((180<=this._coordinates.long?360:0)-this._coordinates.long)/11,i=(0-this._coordinates.lat)/11,e=this.ja=0;e<50;e++)!function(e){t.Ua.push(setTimeout(function(){0===e&&(t.Va=!0,t.tt.isMobile||(t.Fa=1e3/t.Na.motionRenderSpeed)),49===e&&(t.Va=!1,t.tt.isMobile||(t.Fa=1e3/t.Na.videoFps)),t.Za(t._coordinates.lat+i/Math.pow(1.1,e),t._coordinates.long+n/Math.pow(1.1,e)),t.Pa.lat=THREE.Math.radToDeg(t.Da.x)+t._coordinates.lat+i/Math.pow(1.1,e),t.Pa.long=THREE.Math.radToDeg(t.Da.y)+t._coordinates.long+i/Math.pow(1.1,e)},e*t.Fa))}(e)},n.isStereo=function(){return!!this.Ka&&this.Ka.isStereo},n.za=function(e){e&&e[0]&&void 0!==e[0].p&&"undefined"!==e[0].y&&this.Za(e[0].p,e[0].y)},n.Za=function(e,t){this.Ma.long=this._coordinates.long,this.Ma.lat=this._coordinates.lat,e%=360,this._coordinates.lat=Math.max(-85,Math.min(85,e)),t=0<=(t%=360)?t:360+t,this._coordinates.long=t},n.makeContact=function(e){this.isUserInteracting=!0,this.Ua.forEach(function(e){return clearTimeout(e)}),this.Va=!1,this.Qa={x:e.x,y:e.y},this.Ca.long=this._coordinates.long,this.Ca.lat=this._coordinates.lat,this.ts={long:this._coordinates.long,lat:this._coordinates.lat},this.tt.isMobile||(this.Fa=1e3/this.Na.motionRenderSpeed)},n.move=function(e){this.Pa.lat=THREE.Math.radToDeg(this.Da.x)+this.Ma.lat,this.Pa.long=THREE.Math.radToDeg(this.Da.y)+this.Ma.long;var t=this.ts.lat-.2*(this.Qa.y-e.y),e=.2*(this.Qa.x-e.x)+this.ts.long;this.Za(t,e)},n.moveWheel=function(e){this.Pa.lat=THREE.Math.radToDeg(this.Da.x)+this.Ma.lat,this.Pa.long=THREE.Math.radToDeg(this.Da.y)+this.Ma.long;var t=this._coordinates.lat-.1*e.y,e=this._coordinates.long+.1*e.x;this.Za(t,e)},n.moveDevice=function(e,t,n,i){this.Ha=!0;var r=new THREE.Quaternion,o=window.orientation;null===o&&(o=this.$.clientWidth>this.$.clientHeight?90:0),e=e?THREE.Math.degToRad(e):0,t=t?THREE.Math.degToRad(t):0,n=n?THREE.Math.degToRad(n):0;var s=o?THREE.Math.degToRad(o):0,a=new THREE.Vector3(0,0,1),c=new THREE.Euler,u=new THREE.Quaternion,o=new THREE.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5));c.set(t,e,-n,"YXZ"),r.setFromEuler(c),r.multiply(o),r.multiply(u.setFromAxisAngle(a,-s)),this.Da=(new THREE.Euler).setFromQuaternion(r,"YXZ"),this.ja=this.Da.z,this.isUserInteracting||this.Va||this.Za(THREE.Math.radToDeg(this.Da.x)-this.Pa.lat,-THREE.Math.radToDeg(this.Da.y)+this.Pa.long),this.Ba||(this.snapToCenter(),this.Ho.fire(vn.MOTION_START),this.Ba=!0)},n.releaseContact=function(e){this.Pa.lat=THREE.Math.radToDeg(this.Da.x)-this._coordinates.lat,this.Pa.long=THREE.Math.radToDeg(this.Da.y)+this._coordinates.long,this.isUserInteracting=!1,this.ts&&!e&&(e=Math.hypot(this._coordinates.long-this.ts.long,this._coordinates.lat-this.ts.lat),this.ns(e))},n.abandonMotion=function(){this.isUserInteracting=!1,this.ts=null},n.keyPress=function(e){this.es()||(this.isUserInteracting=!0,this.Ua&&this.Ua.forEach(function(e){return clearTimeout(e)})),this.qa[e]||(this.qa[e]=!0)},n.keyUp=function(e){this.qa[e]=!1,this.es()||(this.isUserInteracting=!1,this.ns(1/0))},n.rs=function(){var t=this;Object.keys(this.qa).forEach(function(e){if(t.qa[e])switch(e){case"up":t.Za(t._coordinates.lat+2,t._coordinates.long);break;case"down":t.Za(t._coordinates.lat-2,t._coordinates.long);break;case"left":t.Za(t._coordinates.lat,t._coordinates.long-2);break;case"right":t.Za(t._coordinates.lat,t._coordinates.long+2)}})},n.es=function(){var t=this;return Object.keys(this.qa).map(function(e){return t.qa[e]}).some(function(e){return e})},n.ns=function(t){var i=this;20<=t&&function(){var n={long:i._coordinates.long-i.Ma.long,lat:i._coordinates.lat-i.Ma.lat};t===1/0&&(n.long/=2,n.lat/=2);for(var e=1;e<50;e++)!function(t){i.Ua.push(setTimeout(function(){1===t&&(i.Va=!0),49===t&&(i.Va=!1,i.Fa=1e3/i.Na.videoFps);var e=2/Math.pow(t,1.5);i.Pa.lat=THREE.Math.radToDeg(i.Da.x)+i._coordinates.lat+n.lat,i.Pa.long=THREE.Math.radToDeg(i.Da.y)+i._coordinates.long+n.long,i.Za(i._coordinates.lat+n.lat*e,i._coordinates.long+n.long*e)},t*i.Fa))}(e)}()},n.onseeked=function(){this.sa&&this.os()},n.onresize=function(){this.adjustRenderSize(),this.isUserInteracting=!1},n.os=function(){var e;this.isVRPresenting||(this.Ia=THREE.Math.degToRad(90+this._coordinates.lat),this.Oa=THREE.Math.degToRad(this._coordinates.long),this.Ta.position.set(Math.sin(this.Ia)*Math.cos(this.Oa),Math.cos(this.Ia),Math.sin(this.Ia)*Math.sin(this.Oa)),this.Ta.lookAt(this.Ta.target),this.Ta.rotation.z+=this.ja,e=this.cameraProps,this.Ho.fire(vn.CAMERA_UPDATE,e),this.Ra.yaw===e.yaw&&this.Ra.pitch===e.pitch&&this.Ra.roll===e.roll&&this.Ra.fov===e.fov||(this.Ra=e,this.Ho.fire(vn.CAMERA_CHANGE,e))),this.Ea.render(this.Sa,this.Ta)},n.adjustRenderSize=function(){var e;this.isVRPresenting?(this.Ta.aspect=this.$.clientWidth/this.$.clientHeight,this.Ta.updateProjectionMatrix(),this.Ea.setSize(this.$.clientWidth,this.$.clientHeight)):(this.$.clientWidth>this.$.clientHeight?this.Ta.aspect=Math.max(1,Math.min(2,this.$.clientWidth/this.$.clientHeight)):this.Ta.aspect=Math.max(1/3,Math.min(3,this.$.clientWidth/this.$.clientHeight)),this.Ta.updateProjectionMatrix(),e=Fn(this.$.clientWidth,this.$.clientHeight,this.Ta.aspect,1),this.Ea.setSize(e.width,e.height),this.Ya.style.paddingTop="".concat(e.top,"px"))},n.fa=function(){var e=this;this.Ea.setAnimationLoop(function(){e.es()&&e.rs(),e.os()})},n.ha=function(){this.Ea.setAnimationLoop(null)},n.$a=function(){this.us({backgroundColor:"#000",display:"block"})},n.Ja=function(){this.us({backgroundColor:"#000",display:"none"})},n.us=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.backgroundColor,e=e.display;this.Ya.style.cssText="position:absolute;left:0;top:0;margin-left:auto;margin-right:auto;padding:0;background:".concat(t,";width:100%;height:100%;text-align:center;display:").concat(e)},H(e,[{key:"currentCoordinates",get:function(){return this._coordinates},set:function(e){var t=Ve(e,2),e=t[0],t=t[1];if(90<e||e<-90)throw new RangeError("Latitude should be a float between -90 and 90.");if(t<0||360<t)throw new RangeError("Longitude should be a float between 0 and 360.");this.Za(e,t),this.os()}},{key:"cameraProps",get:function(){return{yaw:this._coordinates.long,pitch:this._coordinates.lat,roll:this.roll,fov:this.fieldOfView}},set:function(e){e=X(X({},this.cameraProps),e),this.fieldOfView=e.fov,this.roll=e.roll,this.currentCoordinates=[e.pitch,e.yaw]}},{key:"roll",get:function(){return 180*this.ja/Math.PI},set:function(e){if(e<-180||180<e)throw new RangeError("Roll should be a float between -180 and 180.");this.ja=THREE.Math.degToRad(e)}},{key:"isVRPresenting",get:function(){return this.Xa&&this.Xa.isPresenting}},{key:"fieldOfView",get:function(){return this.Ta?this.Ta.fov:this.tt.fieldOfView},set:function(e){this.Ta.fov=e,this.Ta.updateProjectionMatrix(),this.Ea.render(this.Sa,this.Ta)}},{key:"hasVRHeadset",get:function(){return this.Xa&&!!this.Xa.device}}]),e}(Pr);function uo(e){this.Ea=e}function lo(e,t,n){this.isStereo=t!==oo.Mono,this.ya=null,this.ga=null,e===ro.Equirect?this.createEquirectProjection(n,t):this.createEquirectProjection(n,oo.Mono)}function fo(){}function ho(){}function vo(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};this.Z=e,this.Ku=t,this.tt=n,this.$=null,this.ht=On(),this.Yu={},this.Ju=new ii(e),this.tt.playRequest=new to,this.$u=[],this.Xu=[],Q(this)}function po(e){return"symbol"==U(e)||Rt(e)&&"[object Symbol]"==xe(e)}var mo=/^\s+|\s+$/g,go=/^[-+]0x[0-9a-f]+$/i,bo=/^0b[01]+$/i,yo=/^0o[0-7]+$/i,Eo=parseInt;function wo(e){if("number"==typeof e)return e;if(po(e))return NaN;if("string"!=typeof(e=Ie(e)?Ie(t="function"==typeof e.valueOf?e.valueOf():e)?t+"":t:e))return 0===e?e:+e;e=e.replace(mo,"");var t=bo.test(e);return t||yo.test(e)?Eo(e.slice(2),t?2:8):go.test(e)?NaN:+e}var Ee=Te?Te.prototype:void 0,_o=Ee?Ee.toString:void 0;function To(e){if("string"==typeof e)return e;if(Dt(e))return function(e,t){for(var n=-1,i=null==e?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}(e,To)+"";if(po(e))return _o?_o.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function So(e){return null==e?"":To(e)}var Ao,ko=_e.isFinite,Lo=Math.min,Ro=(Ao=Math.round,function(e,t){if(e=wo(e),(t=null==t?0:Lo((n=(i=(n=t)?(n=wo(n))===1/0||n===-1/0?17976931348623157e292*(n<0?-1:1):n==n?n:0:0===n?n:0)%1,i==i?n?i-n:i:0),292))&&ko(e)){i=(So(e)+"e").split("e");return+((i=(So(Ao(i[0]+"e"+(+i[1]+t)))+"e").split("e"))[0]+"e"+(+i[1]-t))}var n,i;return Ao(e)});function Co(e){return!isNaN(e)}function xo(e){return Ro(e,3)}var Io=0;function Oo(e){var t=++Io;return"".concat(0<arguments.length&&void 0!==e?e:"b").concat(t)}Oo(),Oo();var Do=Oo(),Po=Oo(),Mo=Oo(),No=Oo(),Fo=Oo(),qo=Oo(),Uo=Oo(),jo=Oo(),Ho=Oo(),Bo=Oo(),Vo=Oo(),Wo=Oo(),$o=Oo(),zo=Oo(),Ko=Oo(),Go=Oo(),Yo=Oo(),Jo=Oo(),Xo=Oo(),Zo=Oo(),g=Object.freeze({__proto__:null,CONFIG_CHANGED:jo,TELECINE_READY:Ho,TELECINE_VIDEO_INIT:Bo,PLAY_INITIATED:Vo,QUALITY_CHANGED:Wo,FORCED_QUALITY:$o,CUE_CHANGED:zo,CAPTIONS_CHANGED:Ko,SPATIAL_PLAYBACK_TOGGLED:Go,PICTURE_IN_PICTURE_AVAILABLE:Yo,PICTURE_IN_PICTURE_NOT_AVAILABLE:Jo,PICTURE_IN_PICTURE_ACTIVATED:Xo,PICTURE_IN_PICTURE_DEACTIVATED:Zo}),ht=Object.freeze({__proto__:null,EVENT_PENDING:"liveeventpending",EVENT_ACTIVE:"liveeventactive",EVENT_STARTING:"liveeventstarting",EVENT_STARTED:"liveeventstarted",EVENT_ENDED:"liveeventended",ARCHIVE_STARTED:"livearchivestarted",ARCHIVE_DONE:"livearchivedone",ARCHIVE_ERROR:"livearchiveerror"}),Qo={h264:"video/mp4",hls:"application/vnd.apple.mpegurl",hlsLive:"application/x-mpegURL",dash:"application/vnd.vimeo.dash+json",dashMpd:"video/vnd.mpeg.dash.mpd",vp6:"video/x-flv",vp8:"video/webm",webm:"video/webm",hds:"application/f4m"},es={"application/vnd.apple.mpegurl":"hls","application/vnd.vimeo.dash+json":"dash","video/vnd.mpeg.dash.mpd":"dash","video/mp4":"progressive","video/webm":"progressive","video/x-flv":"progressive","application/x-mpegURL":"hlslive"},ts=(X(X(X(X(X(X(X(X(X({},un),fn),hn),ht),vn),ln),pn),mn),g),X(X({},hn),ht));function ns(e){var t;return"done"===(null==e||null==(t=e.archive)?void 0:t.status)}function is(e){return"pending"===(null==e?void 0:e.status)}function rs(e){return"started"===(null==e?void 0:e.status)}function os(e){return"ended"===(null==e?void 0:e.status)}function ss(e,t){var n=null==(o=e.request.files.hls)?void 0:o.default_cdn,i=e.request,r=i.signature,o=i.timestamp,i=i.expires,e="https://".concat(e.player_url,"/live/").concat(e.video.id),n="?signature=".concat(r,"&time=").concat(o,"&expires=").concat(i,"&cdn=").concat(n);return"".concat(e).concat(t).concat(n)}var as=Tt(Object.keys,Object),cs=Object.prototype.hasOwnProperty;function us(e){if(!kt(e))return as(e);var t,n=[];for(t in Object(e))cs.call(e,t)&&"constructor"!=t&&n.push(t);return n}var qe=$e(_e,"DataView"),De=$e(_e,"Promise"),C=$e(_e,"Set"),Se=$e(_e,"WeakMap"),ls=Ne(qe),ds=Ne(it),fs=Ne(De),hs=Ne(C),vs=Ne(Se),we=xe,ps=we=qe&&"[object DataView]"!=we(new qe(new ArrayBuffer(1)))||it&&"[object Map]"!=we(new it)||De&&"[object Promise]"!=we(De.resolve())||C&&"[object Set]"!=we(new C)||Se&&"[object WeakMap]"!=we(new Se)?function(e){var t=xe(e),e="[object Object]"==t?e.constructor:void 0,e=e?Ne(e):"";if(e)switch(e){case ls:return"[object DataView]";case ds:return"[object Map]";case fs:return"[object Promise]";case hs:return"[object Set]";case vs:return"[object WeakMap]"}return t}:we,ms=Object.prototype.hasOwnProperty;function gs(e){if(null==e)return!0;if(Mt(e)&&(Dt(e)||"string"==typeof e||"function"==typeof e.splice||Nt(e)||zt(e)||Ot(e)))return!e.length;var t,n=ps(e);if("[object Map]"==n||"[object Set]"==n)return!e.size;if(kt(e))return!us(e).length;for(t in e)if(ms.call(e,t))return!1;return!0}function bs(e){return(Mt(e)?en:us)(e)}function ys(){return[]}var Es=Object.prototype.propertyIsEnumerable,ws=Object.getOwnPropertySymbols,_s=ws?function(s){return null==s?[]:(s=Object(s),function(e){for(var t=-1,n=null==e?0:e.length,i=0,r=[];++t<n;){var o=e[t];Es.call(s,o)&&(r[i++]=o)}return r}(ws(s)))}:ys;function Ts(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}var Ss=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Ts(t,_s(e)),e=St(e);return t}:ys;function As(e,t,n){t=t(e);return Dt(e)?t:Ts(t,n(e))}function ks(e){return As(e,bs,_s)}function Ls(e){return As(e,nn,Ss)}var Rs=Object.prototype.hasOwnProperty,Cs=/\w*$/,Ft=Te?Te.prototype:void 0,xs=Ft?Ft.valueOf:void 0,Is=Ue&&Ue.isMap,Os=Is?Vt(Is):function(e){return Rt(e)&&"[object Map]"==ps(e)},N=Ue&&Ue.isSet,Ds=N?Vt(N):function(e){return Rt(e)&&"[object Set]"==ps(e)},Ps={};function Ms(o,s,a,e,t,c){var u,n=1&s,i=2&s,r=4&s;if(void 0!==(u=a?t?a(o,e,t,c):a(o):u))return u;if(!Ie(o))return o;var l,d,f,h=Dt(o);if(h){if(e=(f=o).length,p=new f.constructor(e),e&&"string"==typeof f[0]&&Rs.call(f,"index")&&(p.index=f.index,p.input=f.input),u=p,!n)return yt(o,u)}else{var v=ps(o),p="[object Function]"==v||"[object GeneratorFunction]"==v;if(Nt(o))return pt(o,n);if("[object Object]"==v||"[object Arguments]"==v||p&&!t){if(u=i||p?{}:Lt(o),!n)return i?(l=o,d=(d=u)&&Jt(o,nn(o),d),Jt(l,Ss(l),d)):(l=o,d=(d=u)&&Jt(o,bs(o),d),Jt(l,_s(l),d))}else{if(!Ps[v])return t?o:{};u=function(e,t){var n,i,r=e.constructor;switch(v){case"[object ArrayBuffer]":return gt(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return n=e,i=t?gt(n.buffer):n.buffer,new n.constructor(i,n.byteOffset,n.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return bt(e,t);case"[object Map]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return(n=new(i=e).constructor(i.source,Cs.exec(i))).lastIndex=i.lastIndex,n;case"[object Set]":return new r;case"[object Symbol]":return xs?Object(xs.call(e)):{}}}(o,n)}}n=(c=c||new lt).get(o);if(n)return n;c.set(o,u),Ds(o)?o.forEach(function(e){u.add(Ms(e,s,a,e,o,c))}):Os(o)&&o.forEach(function(e,t){u.set(t,Ms(e,s,a,t,o,c))});var i=r?i?Ls:ks:i?keysIn:bs,m=h?void 0:i(o);return function(e){for(var t,n,i=-1,r=null==e?0:e.length;++i<r&&!1!==(t=e[i],n=i,m&&(t=o[n=t]),void Yt(u,n,Ms(t,s,a,n,o,c))););}(m||o),u}function Ns(e){return Ms(e,5)}function Fs(e){var n=this,t={},i={get attributes(){return Object.assign({},n)},get previousAttributes(){return t},clear:function(){for(var e in r(),n.attributes)delete n[e]},set:function(e){for(var t in r(),e=Ns(e))n[t]=e[t]},clone:function(){return new Fs(n.attributes)},toJSON:function(){return Ns(n.attributes)}};function r(){gs(n.attributes)||(t=Ns(n.attributes))}return i.set(e),ie(n,i)}function qs(e,t){var n=new Fs(cn(e,t)),i=!1;return re(n,{reset:function(e){return n.clear(),i=!0,n.set(e),cn(n,t),n},isNewVideo:function(){var e=n.previousAttributes;return!i||e.video.id!==n.video.id||e.video.version.current!==n.video.version.current||e.video.live_event&&!ns(e.video.live_event)&&(!n.video.live_event||ns(n.video.live_event))}})}Ps["[object Arguments]"]=Ps["[object Array]"]=Ps["[object ArrayBuffer]"]=Ps["[object DataView]"]=Ps["[object Boolean]"]=Ps["[object Date]"]=Ps["[object Float32Array]"]=Ps["[object Float64Array]"]=Ps["[object Int8Array]"]=Ps["[object Int16Array]"]=Ps["[object Int32Array]"]=Ps["[object Map]"]=Ps["[object Number]"]=Ps["[object Object]"]=Ps["[object RegExp]"]=Ps["[object Set]"]=Ps["[object String]"]=Ps["[object Symbol]"]=Ps["[object Uint8Array]"]=Ps["[object Uint8ClampedArray]"]=Ps["[object Uint16Array]"]=Ps["[object Uint32Array]"]=!0,Ps["[object Error]"]=Ps["[object Function]"]=Ps["[object WeakMap]"]=!1;var Us=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,js=/^\w*$/;function Hs(i,r){if("function"!=typeof i||null!=r&&"function"!=typeof r)throw new TypeError("Expected a function");function o(){var e=arguments,t=r?r.apply(this,e):e[0],n=o.cache;return n.has(t)?n.get(t):(e=i.apply(this,e),o.cache=n.set(t,e)||n,e)}return o.cache=new(Hs.Cache||ut),o}Hs.Cache=ut;var Bs,Vs=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ws=/\\(\\)?/g,$s=(Bs=(n=Hs(function(e){var r=[];return 46===e.charCodeAt(0)&&r.push(""),e.replace(Vs,function(e,t,n,i){r.push(n?i.replace(Ws,"$1"):t||e)}),r},function(e){return 500===Bs.size&&Bs.clear(),e})).cache,n);function zs(e,t){return Dt(e)?e:function(e,t){if(!Dt(e)){var n=U(e);return"number"==n||"symbol"==n||"boolean"==n||null==e||po(e)||js.test(e)||!Us.test(e)||null!=t&&e in Object(t)}}(e,t)?[e]:$s(So(e))}function Ks(e){if("string"==typeof e||po(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Gs(e,t){for(var n=0,i=(t=zs(t,e)).length;null!=e&&n<i;)e=e[Ks(t[n++])];return n&&n==i?e:void 0}function Ys(e,t,n){t=null==e?void 0:Gs(e,t);return void 0===t?n:t}function Js(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=wo(n))==n?n:0),void 0!==t&&(t=(t=wo(t))==t?t:0),(e=wo(e))==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=t<=e?e:t)),e}function Xs(e){return e.quality||e.metadata.quality}function Zs(e,t,n){var i=1<arguments.length&&void 0!==t&&t,t=2<arguments.length&&void 0!==n&&n,n=e.url;if("avc_url"in e&&(n=e.avc_url),t)return n;t=(!i||An.spatialHEVC)&&An.hevc;return(!i||An.spatialHEVC)&&An.hdr&&"hevc_hdr_url"in e?n=e.hevc_hdr_url:t&&"hevc_sdr_url"in e?n=e.hevc_sdr_url:An.av1&&"av1_url"in e&&(n=e.av1_url),n}function Qs(e){return e.fallback_url}function ea(e,t){var n=e.request.files,i=n.hls.default_cdn,r=e.request.drm,o=n.hls.cdns[i],r=1<arguments.length&&void 0!==t&&t?Qs(o):Zs(o,e.video.spatial,r);return{id:"hls-".concat(i,"-").concat(e.video.id),src:r,mime:Qo.hls,priority:2,metadata:{cdn:i,origin:n.hls.cdns[i].origin,quality:"sd"}}}function ta(n,e){var i=1<arguments.length&&void 0!==e&&e,r=n.request.files;return gs(r.dash)?[]:Object.keys(r.dash.cdns).map(function(e){var t=r.dash.cdns[e],t=i?Qs(t):Zs(t,n.video.spatial);return{id:"dash-".concat(e,"-").concat(n.video.id),src:t,mime:n.request.drm?Qo.dashMpd:Qo.dash,priority:e===r.dash.default_cdn?1:2,metadata:{cdn:e,origin:r.dash.cdns[e].origin,quality:"sd"}}})}function na(e){if(gs(e.progressive))return[];var t=e.progressive;return(t="progressive_avc"in e?e.progressive_avc:t).filter(ra(t))}function ia(e){if("number"==typeof e)return e;e=e.split("-");return 5===e.length?e[0]:parseInt(e[0],10)}function ra(e){var t=e.filter(oa).map(Xs);return function(e){return-1===t.indexOf(Xs(e))||oa(e)}}function oa(e){var t=e.fps;return 30<(t="metadata"in e?e.metadata.fps:t)}function sa(e){return 720<=aa(e)}function aa(e){return"string"!=typeof e&&(e=Xs(e)),parseInt(e,10)}function ca(e){var t=na(e.request.files).map(function(e){return e.quality});return ua(e,e.embed.quality,t)}function ua(e,t,n){n=2<arguments.length&&void 0!==n?n:[];return e.embed.on_site||An.android||An.iOS||An.windowsPhone||!t||n.length&&-1===n.indexOf(t)?null:t}function la(e){var r=0<arguments.length&&void 0!==e?e:"desc";return function(e,t){var n=aa(e),i=da(e),e=aa(t),t=da(t);return"asc"===r?n-e||i-t:e-n||t-i}}function da(e){return"object"!==U(e)?0:"fps"in e?e.fps:"metadata"in e&&"fps"in e.metadata?e.metadata.fps:0}function fa(e){var t=e.video.live_event,n=e.request.files;if(gs(n.hls))return null;var i=n.hls.default_cdn,t=n.hls.cdns[i].json_url||(null==(r=t.playback)?void 0:r.hls_noredirect),r=e.request.flags.live_dash?2:1;return{id:"hls-".concat(i,"-").concat(e.video.id),src:t,mime:Qo.hlsLive,priority:r,metadata:{cdn:i,origin:n.hls.cdns[i].origin,quality:"sd"}}}function ha(e,t){var n=[];if(t.video){var i=t.video.currentFile.mime;if(i===Qo.hlsLive)return t.manifest.video.map(function(e){return X(X({},e),{},{quality:"".concat(e.height,"p")})});n=[Qo.dash,Qo.dashMpd].includes(i)?(i=t.video.drmHandler&&"sd-fallback"===t.video.drmHandler.state,function(e,t,n){var i=1<arguments.length&&void 0!==t&&t,r=2<arguments.length&&void 0!==n&&n;if(!e)return[];t=e.streams;"streams_avc"in e&&(t=e.streams_avc);n=(!i||An.spatialHEVC)&&An.hevc;return(!i||An.spatialHEVC)&&An.hdr&&"streams_hevc_hdr"in e?t=e.streams_hevc_hdr:n&&"streams_hevc_sdr"in e?t=e.streams_hevc_sdr:An.av1&&"streams_av1"in e&&(t=e.streams_av1),t=r&&"streams_fallback"in e?e.streams_fallback:t}(e.request.files.dash,e.video.spatial,i)):t.video.files.filter(function(e){return"progressive"===es[e.mime]})}return n.filter(ra(n)).sort(la())}function va(e){return e.request.text_tracks.map(function(e){return{id:e.id,src:e.url,kind:e.kind,label:e.label,language:e.lang}})}function pa(e,t){return ba.captureException(e,t)}function ma(e,t){return ba.captureBreadcrumb(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:"backbone",3<arguments.length&&void 0!==arguments[3]?arguments[3]:"info")}var ga={captureException:function(e){},captureMessage:function(e){},captureBreadcrumb:function(){}},ba=ga;function ya(n,r,o){var e=n.embed.playsinline&&(An.mobileAndroid||10<=An.iOS),i=!1,t=!1,s=!1,a=!0,c="auto";function u(e){var t,n;!a&&o.buffered&&0<o.buffered.length&&(e=e||o.currentTime,n=function(e,t){var n=e.length-1;if(1<e.length)for(var i=0,r=e.length;i<r;i++)if(e.start(i)<=t&&e.end(i)>=t){n=i;break}return n}(o.buffered,e),e=(t=o.buffered.end(n))/o.duration,n=o.duration,r.fire(un.PROGRESS,{loaded:t,duration:n,loadProgress:e}),s&&i&&t===o.duration&&i&&o.paused&&o.play().catch(pa))}function l(e){var t;"auto"!==e?-1!==(t=ha(n,o).reverse().map(function(e){return e.quality}).indexOf(e))&&(ma("Switched to ".concat(e),{},"video"),o.video.currentFile.restrictedStreamIndexes=[t]):o.video.currentFile.restrictedStreamIndexes=[]}function d(){var e=ha(n,o).map(function(e){return e.quality}),e=ua(n,n.embed.quality,e);e&&r.fire($o,e),l(e||"auto")}return r.on(Bo,function(){o.playsinline=e,o.muted=n.embed.muted,o.disablePictureInPicture=!n.embed.pip,o.autoPictureInPicture=n.embed.autopip}),r.on(Po,function(){a=!0,o.paused||o.pause(),i=t=!1,setTimeout(function(){o.currentTime=0},300)}),o.on(un.PLAY,function(){a=!1,r.fire(un.PLAY,o.currentTime)}),o.on(un.PAUSE,function(){i=!1,r.fire(un.PAUSE,o.currentTime,o.ended)}),o.on(un.PLAYING,function(e){u()}),o.on(un.TIME_UPDATE,function(e){var t,n,i=o.currentTime;a||(t=o.duration,n=o.playbackRate,r.fire(un.TIME_UPDATE,{currentTime:i,duration:t,timeProgress:i/t,playbackRate:n}))}),o.on(un.ENDED,function(e){o.loop?o.play().catch(pa):(i=!1,r.fire(un.ENDED,e))}),o.on(un.LOADED_METADATA,function(e){var t=o.duration;if(isFinite(t)&&0<t){if(t<n.video.duration-1||t>n.video.duration+1)return;n.video.duration=t}n.video.video_width=o.videoWidth,n.video.video_height=o.videoHeight}),o.on(un.DURATION_CHANGE,function(e){var t=o.duration;isFinite(t)&&(0<n.video.duration&&(t<n.video.duration-1||t>n.video.duration+1)||(n.video.duration=t))}),o.on(un.PROGRESS,u),o.on(fn.BUFFER_STARTED,function(){s=!0}),o.on(fn.BUFFER_ENDED,function(){s=!1}),r.on(Do,function(e,t){t=t||(o.duration||n.video.duration)*Js(e,0,1),t=Js(t,0,o.duration||n.video.duration),o.currentTime=t}),o.on(un.SEEKING,function(){var e=o.currentTime,t=o.duration;r.fire(un.SEEKING,{currentTime:e,duration:t,timeProgress:e/t})}),o.on(un.SEEKED,function(){u();var e=o.currentTime,t=o.duration;r.fire(un.SEEKED,{currentTime:e,duration:t,timeProgress:e/t})}),o.on(fn.CURRENT_FILE_CHANGE,function(e){ma("Current file changed",{id:e.id,mime:e.mime,src:e.src,metadata:e.metadata},"video"),e.metadata.quality,[Qo.dash,Qo.dashMpd].includes(e.mime)&&d(),[Qo.hlsLive].includes(e.mime)?o.once(fn.STREAMS_LOADED,function(){d()}):(e=ca(n))&&r.fire($o,e)}),{play:function(){return i=!0,t||(r.fire(Vo),t=!0),o.play()},pause:function(){i=!1,o.pause()},get quality(){return c},set quality(e){var t;t=e,e=o.video.currentFile.mime,[Qo.dash,Qo.dashMpd,Qo.hlsLive].includes(e)?l(t):0<(e=ha(n,o).filter(function(e){return e.metadata.quality===t})).length&&(a=!0,o.video.currentFile=e[0]),c=t,r.fire(Wo,t)}}}function Ea(e,n,i){var t=!1,r=i.presentationMode;function o(){!i.supportsPresentationMode("picture-in-picture")||An.spatialPlayback&&e.video.spatial?n.fire(Jo):n.fire(Yo)}i.on(un.LOADED_METADATA,function(){t=!0}),i.on(un.PLAY,function(){t?o():i.once(un.LOADED_METADATA,o)}),i.on(fn.PRESENTATION_MODE_CHANGE,function(t){"inline"===r&&"picture-in-picture"===t&&n.fire(Xo),"picture-in-picture"===r&&"inline"===t&&n.fire(Zo),r=t,i.video.textTracks.forEach(function(e){"picture-in-picture"===t&&"hidden"===e.mode&&(e.mode="showing"),"inline"===t&&"showing"===e.mode&&(e.mode="hidden")})}),n.on(qo,function(){i.supportsPresentationMode("picture-in-picture")&&(i.presentationMode="picture-in-picture")}),n.on(Uo,function(){i.supportsPresentationMode("picture-in-picture")&&(i.presentationMode="inline")})}function wa(t,n,i){var r=null;An.spatialPlayback&&(n.on(Bo,function(){r&&(i.deactivateEffect(co),r=null,n.fire(Go,r));var e=t.video.spatial;e&&(t.request.drm||i.supportsEffect(co)&&(r=i.activateEffect(co,{threeUrl:t.request.urls.three_js,fps:t.video.fps,fieldOfView:e.fov,directorTimeline:e.director_timeline,projection:e.projection,stereoMode:e.stereo_mode,initialView:e.initial_view,isMobile:An.android,dimensions:t.embed.on_site?{width:1080,height:540}:{width:640,height:360}}),n.fire(Go,r)))}),i.on(vn.SPATIAL_UNSUPPORTED,function(){r&&(i.deactivateEffect(co),r=null,n.fire(Go,r))}))}function _a(e,t,n){var i=null;t.on(Bo,function(){i&&(n.deactivateEffect(io),i=null),e.video.canvas&&(e.request.drm||n.supportsEffect(io)&&(i=n.activateEffect(io)))})}var Ta=sn(function(e,t,n){rn(e,t,n)});function Sa(e,t,n){return n?t?t(e):e:(e&&e.then||(e=ee.resolve(e)),t?e.then(t):e)}var Aa=((Ee=ka.prototype).disable=function(){this.hs=!0},Ee.forcePolling=function(){this.isForcePolling||(this.fs=!0,this.ds())},Ee.unforcePolling=function(){this.fs=!1},Ee.ds=function(){!1!==this.as.polling&&(this.vs()?this.ps():this.ms()&&this.bs())},Ee.ms=function(){var e;return!(os(this.as)&&"started"!==(null==(e=this.as.archive)?void 0:e.status)||!this.isForcePolling&&rs(this.as))},Ee.vs=function(){return!this.ss||!(!is(this.as)||null!==this.as.id)},Ee.ws=function(){try{var t=this;return Sa(qi(t.cs).json(),function(e){return t.ss=e.url,e.url})}catch(t){return ee.reject(t)}},Ee.bs=function(){try{var n=this;if(n.hs)return;var i,r={};return An.browser.ie&&(r={Pragma:"no-cache","Cache-Control":"no-cache"}),e=function(t){try{var e=Sa(qi({url:n.ss,retry:3,retryStatus:function(e){return[410].includes(e)||ui.retryStatus(e)},hooks:{beforeRetry:[n.Zt.bind(n)]},headers:r}).json(),function(e){i=e})}catch(e){return t()}return e&&e.then?e.then(void 0,t):e}(function(){throw new Error("Hit max retries polling ".concat(n.ss))}),t=function(e){if(i.status!==n.as.status){if(os(i)&&"provision_expire"===i.terminate_reason)return n.ss=null,n.as.id=null,void setTimeout(n.ds.bind(n),5e3);var t=(B(t={},"active",ts.EVENT_ACTIVE),B(t,"pending",ts.EVENT_PENDING),B(t,"started",ts.EVENT_STARTED),B(t,"ended",ts.EVENT_ENDED),t[i.status]);try{n.fire(t,i)}catch(e){throw new Error("Error firing live event status change ".concat(e))}}!i.archive||n.as.archive&&i.archive.status===n.as.archive.status||(B(t={},"started",ts.ARCHIVE_STARTED),B(t,"done",ts.ARCHIVE_DONE),B(t,"error",ts.ARCHIVE_ERROR),t=t[i.archive.status],n.fire(t,i)),n.as=Ta(n.as,i),n.ms()&&setTimeout(n.bs.bind(n),5e3)},e&&e.then?e.then(t):t()}catch(n){return ee.reject(n)}var e,t},Ee.Zt=function(t,e){try{return Sa(this.ws(),function(e){t.url=e})}catch(t){return ee.reject(t)}},Ee.ps=function(){try{var r=this;return r.hs?void 0:Sa(qi(r.ls).json(),function(e){var t,n,i=!1;return t=function(e){return i?e:void setTimeout(r.ps.bind(r),5e3)},(n=function(){if(null!==e.ingest.session_id)return r.as.id=e.ingest.session_id,Sa(r.ws(),function(){r.bs(),i=!0})}())&&n.then?n.then(t):t(n)})}catch(r){return ee.reject(r)}},H(ka,[{key:"isForcePolling",get:function(){return this.fs}}]),ka);function ka(e,t,n){Q(this),this.as=Ns(e),this.ss=e.session_url||e.sessionUrl,this.cs=t,this.ls=n,this.fs=!1,this.hs=!1,this.ds()}function La(e,t,n){return n?t?t(e):e:(e&&e.then||(e=ee.resolve(e)),t?e.then(t):e)}function Ra(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return ee.resolve(n.apply(this,e))}catch(e){return ee.reject(e)}}}function Ca(n,i,r){var t,o,s,a,c=Ra(function(t){return function(){try{var e=La(ce("module/streamroot.js"),function(e){return e(r,{TelecineEvents:fn,VideoEvents:un},t)})}catch(e){return null}return e&&e.then?e.then(void 0,function(e){return null}):e}()}),u=Ra(function(){if(s&&s.stop(),n.video.p2p)return a=new le,e=function(){s.setUp(),a.resolve()},(t=function(){if(!s)return r.bufferTarget=30,r.presentationDelay=30,La(c(n.video.p2p),function(e){s=e})}())&&t.then?t.then(e):e();var e,t});function l(){o&&(o.disable(),o=null)}function d(){r.endLive()}return i.on(jo,function(){var e;t&&!n.isNewVideo()||(t=!0,u(),l(),n.video.live_event&&!ns(n.video.live_event)&&(e=n.video.live_event,(o=new Aa(e,ss(n,"/session/refresh"),"https://".concat((e=n).vimeo_url,"/live_event/status?clip_id=").concat(e.video.id))).on(ts.EVENT_ENDED,d),Object.keys(ts).forEach(function(e){var t=ts[e];o.on(t,function(e){i.fire(t,e)})})))}),i.on(Mo,function(){s&&(s.destroy(),s=null),l()}),r.on(ts.STREAM_ONLINE,function(){o.isForcePolling&&o.unforcePolling()}),r.on(ts.STREAM_OFFLINE,function(){o.isForcePolling||o.forcePolling()}),{get p2pReady(){return a}}}function xa(e,t){t=1<arguments.length&&void 0!==t?t:[];if(!e||"null"===e||0===t.length)return{track:null};var e=Ve(e.split("."),2),n=e[0],i=e[1],r=Ve(n.split(/[-_]/),1)[0],o=n!==r,t=t.filter(function(e){return o&&e.language===n||e.language===r}).sort(function(e,t){e=2*(e.language===r&&e.kind===i)+2*(e.language===n)+ +(e.kind===i);return 2*(t.language===r&&t.kind===i)+2*(t.language===n)+ +(t.kind===i)-e});return 0<t.length?{track:t[0],exactMatch:t[0].language===n&&t[0].kind===i}:{track:null}}function Ia(s,i,r){var o;function e(){if(0!==i.video.textTracks.length){if(i.video.textTracks.forEach(function(e){e.on("cuechange",t),e.on("modechange",n)}),i.video.textTracks.language&&Ve(i.video.textTracks.language.split(/[-_]/),1)[0]!=Ve(i.video.textTracks.language.split(/[-_]/),1)[0]){var e="".concat(i.video.textTracks.language,".subtitles");if(xa(e,i.video.textTracks).track)return void s.fire(No,e)}s.fire(Fo)}else s.fire(Fo)}function t(e){for(var t,e=e.target,n=e.activeCues,i=[],r=0,o=n.length;r<o;r++)""!==n[r].text.replace(/^\s+|\s+$/gm,"")&&((t=document.createElement("span")).appendChild(n[r].getCueAsHTML()),i.push({html:t.innerHTML.replace(/\n/g,"<br>"),text:n[r].text}));s.fire(zo,e,i)}function n(e){var t=e.target,n=r.querySelector("video");An.iOS&&(e=n,void 0!==(n=[document.fullscreenElement,document.webkitFullscreenElement,document.webkitCurrentFullScreenElement,document.mozFullScreenElement,document.msFullscreenElement].find(function(e){return void 0!==e}))?n:e.webkitDisplayingFullscreen)&&"showing"===t.mode&&s.fire(Ko,t)}s.on(Bo,e),s.on(No,function(e){var t,n;o&&o.id===e||(t=i.video.textTracks.getTrackById(e),n=!0,t||(e=xa(e,i.video.textTracks),t=e.track,n=e.exactMatch),t!==o&&setTimeout(function(){i.video&&i.video.textTracks.forEach(function(e){e.mode=e===t?"hidden":"disabled"}),s.fire(Ko,t,!n),o=t},0))}),s.on(Fo,function(){setTimeout(function(){i.video&&i.video.textTracks.forEach(function(e){e.mode="disabled"}),s.fire(zo),o&&(o=null,s.fire(Ko,null))},0)}),s.on(fn.TEXT_TRACKS_AVAILABLE,e)}function Oa(a,c,u){var l,d,e,r,t;function f(e,t){e.forEach(function(e){var t=l.video.files.getFileById(e.id);t&&t.src!==e.src&&(t.src=e.src)}),t.forEach(function(e){var t=l.video.textTracks.getTrackById(e.id);t&&t.src!==e.src&&(t.src=e.src)})}return l=new no(u,[cr,xr,Dr,ii],{externalDisplays:[bn],mediaSourceScanner:{droppedFrameSwitchPercent:(t=a,An.spatialPlayback&&t.video.spatial?35:50)},tests:a.request.ab_tests,fileCodecs:a.request.file_codecs,bufferTarget:a.video.buffer_target,presentationDelay:a.video.presentation_delay}),Object.values(un).filter(function(e){return![un.TIME_UPDATE,un.PROGRESS,un.SUSPEND,un.ERROR].includes(e)}).forEach(function(e){l.on(e,function(){ma(e,0<arguments.length&&void 0!==arguments[0]?arguments[0]:"","video event")})}),l.on(fn.STREAMS_LOADED,function(e){e.video.forEach(function(e){var t,n=(t=e.id,ha(a,l).find(function(e){return ia(e.id)===String(t)||ia(e.id)===ia(t)}));n?(e.profile=n.profile,e.quality=n.quality,e.fps=n.fps):(e.profile=null,e.quality="".concat(e.height,"p"),e.fps=e.framerate)})}),l.on(fn.STREAM_CHANGE,function(e){var t=e.index,n=e.streams,e=n[t];ma("Stream changed",e,"video"),c.fire(fn.STREAM_CHANGE,e,t,n)}),l.on(fn.STREAM_TARGET_CHANGE,function(e){var t=e.index,n=e.streams,e=n[t];c.fire(fn.STREAM_TARGET_CHANGE,e,t,n)}),l.on(fn.DRM_KEY_SWITCH,function(){var e,t,n,i,r;a.request.drm.fallback_asset&&(e=va(a),f((n=(t=a).request.files,i=[],r=t.request.drm&&An.browser.safari,(n.hls&&(An.iPhone||An.iPad)||r)&&(i=i.concat(ea(t,!0))),i=n.dash&&!r?i.concat(ta(t,!0)):i),e))}),e=l.on,r=c.fire,[ln.ACTIVATED,ln.AVAILABLE,ln.DEACTIVATED,ln.UNAVAILABLE,hn.STREAM_OFFLINE,hn.STREAM_ONLINE,hn.BUFFER_GAP_JUMP,hn.BUFFER_GAP_JUMP_PREVENT,pn.MEDIASESSION_PAUSE,pn.MEDIASESSION_PLAY,pn.MEDIASESSION_SEEK_BACKWARD,pn.MEDIASESSION_SEEK_FORWARD,fn.AV_DURATION_MISMATCH,fn.BANDWIDTH,fn.BUFFER_ENDED,fn.BUFFER_OCCUPANCY,fn.BUFFER_STARTED,fn.CHAPTER_CUES_UPDATED,fn.CUE_POINT,fn.CURRENT_FILE_CHANGE,fn.DOWNLOAD_END,fn.DOWNLOAD_TIMEOUT,fn.DRM_AUTH_SUCCESS,fn.DRM_KEY_SWITCH,fn.DROPPED_FRAMES,fn.MANIFEST_LOADED,fn.MANIFEST_TIMEOUT,fn.QUOTA_EXCEEDED_ERROR,fn.SCANNER_CHANGE,fn.STREAM_CHANGE_START,fn.STREAM_BUFFER_END,fn.STREAM_BUFFER_START,fn.TEXT_TRACKS_AVAILABLE,vn.CAMERA_UPDATE,vn.CAMERA_CHANGE,vn.MOTION_END,vn.MOTION_START,vn.SPATIAL_UNSUPPORTED,vn.WEBVR_ENTER,vn.WEBVR_EXIT,vn.WEBVR_HARDWARE_AVAILABLE,mn.BRAIN_ML_SWITCH_TO_SKYFIRE,mn.BRAIN_ML_MODEL_INPUTS,un.DURATION_CHANGE,un.ERROR,un.LOAD_START,un.LOADED_DATA,un.LOADED_METADATA,un.PLAYING,un.RATE_CHANGE,un.RESIZE,un.STALLED,un.VOLUME_CHANGE,un.WAITING,un.ENTER_PICTURE_IN_PICTURE,un.LEAVE_PICTURE_IN_PICTURE].forEach(function(i){e(i,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.apply(void 0,[i].concat(t))})}),c.fire(Ho),Ia(c,l,u),Ea(a,c,l),wa(a,c,l),_a(a,c,l),d=new Ca(a,c,l),t=new ya(a,c,l),c.on(jo,function(){var e,t,n,i,r,o,s=a.video.live_event;is(s)||"active"===(null==s?void 0:s.status)||os(s)&&!ns(s)?l.video=null:rs(s)&&l.video&&!a.isNewVideo()||(o=rs(s)?function(e){var t=[],n=fa(e);n&&t.push(n);e=function(e){var t=e.video.live_event,n=e.request.files;if(gs(n.dash))return null;var i=n.dash.default_cdn,t=n.dash.cdns[i].url||(null==(r=t.playback)?void 0:r.dash_noredirect),r=e.request.flags.live_dash?2:1;return{id:"dash-".concat(i,"-").concat(e.video.id),src:t,mime:Qo.dashMpd,priority:r,metadata:{cdn:i,origin:n.dash.cdns[i].origin,quality:"sd"}}}(e);return e&&t.push(e),t}(a):(i=(e=a).request.files,r=na(i),o=ca(e),t=function(e){var t=e.files,n=void 0===t?[]:t,t=e.preference,t=void 0===t?"360p":t,e=e.priorityOffset,i=void 0===e?0:e;(n=Be(n)).sort(la());var r=n.map(Xs);return t&&(-1===r.indexOf(t)&&(r.push(t),r.sort(function(e,t){return aa(t)-aa(e)})),t=r.indexOf(t),(t=r.splice(0,t)).reverse(),r.push.apply(r,te(t))),n.map(function(e){return{id:e.id,src:e.url,mime:e.mime,priority:r.indexOf(e.quality)+1+i,metadata:{profile:e.profile,cdn:e.cdn,origin:e.origin,quality:e.quality,fps:e.fps}}})}({files:r,preference:e.request.cookie.quality||o||(r=na((t=e).request.files),o=r.some(sa),n="720p",!(o=An.mobileAndroid?!1:o)||-1!==(r=r.map(Xs)).indexOf("1080p")&&-1===r.indexOf("720p")&&(n="1080p"),t.request.cookie.hd||t.video.default_to_hd?n:"360p"),priorityOffset:2}),n=e.request.drm&&An.browser.safari,(i.hls&&(An.iPhone||An.iPad)||n)&&(t=t.concat(ea(e))),t=i.dash&&!n?t.concat(ta(e)):t),r=va(a),!l.video||a.isNewVideo()?(i=o,n=r,e=a.video.live_event,t=u.getBoundingClientRect(),e=rs(e)?fa(a):function(){var e=a.request.files;if(gs(e.hls))return null;var t=e.hls.default_cdn,n=e.hls.cdns[t],e=n.captions||n.avc_url;return e?{src:e,mime:Qo.hls,metadata:{cdn:t,origin:n.origin,quality:"sd"}}:null}(),l.video={id:a.video.id,title:a.video.title,subtitle:"from ".concat(a.video.owner.name),files:i,textTracks:n,chapters:Ys(a,"embed.chapters",[]),duration:a.video.duration,externalDisplayFiles:{AirPlay:e},metadata:{playlistRefreshUrl:ss(a,"/playlist/refresh"),thumbnail:a.video.thumbs[640],useHls:a.request.drm&&An.browser.safari,drm:a.request.drm,p2pReady:a.video.p2p&&d.p2pReady,percentShown:co.frustumSurfaceArea(a.video.spatial.fov,t.width,t.height)}},c.fire(Bo)):f(o,r))}),oe({telecine:l},t)}function Da(e,t,n){this.constructorName="BackboneError",this.message=e,this.name=t,this.source=n}Da.prototype=new Error;var Pa={embed:{},request:{cookie:{},files:{},flags:{},urls:{},text_tracks:[],file_codecs:{}},video:{owner:{},thumbs:{},version:{}},user:{}};function Ma(e,t){var o=Q(),s=null,n=new qs(t,Pa);function i(e){return o.fire(jo,e),e}var r,t={play:function(){return r.play()},pause:function(){return r.pause()},get currentTime(){return.1<a.currentTime?xo(a.currentTime):0},set currentTime(e){if(e=parseFloat(e),isNaN(e)||e<0)throw new Da("Seconds must be a positive number less than the duration of the video.","RangeError","setCurrentTime");o.fire(Do,null,e)},get duration(){return xo(n.video.duration)},get enabledTextTrack(){return s},loadVideo:function(e){return n.reset(e),n=i(n),this},unload:function(){return o.fire(Po),this},destroy:function(){return o.fire(Mo),this},on:function(e,t){return o.on(e,t),this},once:function(e,t){return o.once(e,t),this},off:function(e,t){return o.off(e,t),this},hasTextTrack:function(e){var t,n,i,r=this.textTracks;return Co(e)?t=r.getTrackById(e):(n=e.split(".")[0],i=r.some(function(e){return e.language.toLowerCase()===n.toLowerCase()})),!(!t&&!i)},enableTextTrack:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=this.textTracks;if(Co(e))s=n.getTrackById(e);else{var i=Ve(e.split("."),2),r=i[0],i=i[1],i=void 0===i?t:i;if(!this.hasTextTrack(e))throw new Da("There are no tracks for â€œ".concat(r.toUpperCase(),"â€."),"InvalidTrackLanguageError","enableTextTrack");e=i?"".concat(r,".").concat(i):r;s=xa(e,n).track}if(!s||i&&s.kind!==i)throw new Da("There are no ".concat(i," tracks for â€œ").concat(r.toUpperCase(),"â€."),"InvalidTrackError","enableTextTrack");a.aa(!0),o.fire(No,s.id)},disableTextTrack:function(){s=null,a.aa(!1),o.fire(Fo)},get qualities(){return e=(n=this).representations.map(function(e){var t=Xs(e);return{id:t,label:function(e){var t,n=Xs(e),i={"1440p":"2K","2160p":"4K","2700p":"5K","3240p":"6K","3780p":"7K","4320p":"8K"};for(t in i)n=n.replace(t,i[t]);return n}(e),active:n.quality===t}}),t=null==(t=n.video)?void 0:t.currentFile.mime,[Qo.dash,Qo.dashMpd,Qo.hlsLive].includes(t)&&e.unshift({id:"auto",label:"Auto",active:!n.quality||"auto"===n.quality}),e;var n,e,t},get quality(){return r.quality},set quality(e){r.quality=e},get playbackRate(){return a?a.playbackRate:1},set playbackRate(e){a.playbackRate=e,a.defaultPlaybackRate=e},get presentationMode(){return a.presentationMode},set presentationMode(e){"picture-in-picture"===e?o.fire(qo):o.fire(Uo)},get textTracks(){return a.video?a.video.textTracks:[]},get representations(){return ha(n,a)},get volume(){return a?a.volume:xo(n.request.cookie.volume)},set volume(e){if(e=parseFloat(e),isNaN(e)||e<0||1<e)throw new Da("Volume should be a number between 0 and 1.","RangeError","setVolume");a.volume=e},get videoId(){return n.video.id},get videoWidth(){return a.videoWidth||n.video.width},get videoHeight(){return a.videoHeight||n.video.height},get readyState(){return a.videoElement.readyState},get brainDebug(){return a.brainDebug}},n=i(n),a=(r=new Oa(n,o,e)).telecine,e=Object.create(a);return oe(e,t)}var Na,Fa,g="object"==typeof global&&global&&global.Object===Object&&global,ht="object"==typeof self&&self&&self.Object===Object&&self,qe=(g||ht||Function("return this")()).Symbol,De=Object.prototype,qa=De.hasOwnProperty,Ua=De.toString,ja=qe?qe.toStringTag:void 0,Ha=Object.prototype.toString,Ba=qe?qe.toStringTag:void 0,Va=(Na=Object.getPrototypeOf,Fa=Object,function(e){return Na(Fa(e))}),C=Function.prototype,Se=Object.prototype,Wa=C.toString,$a=Se.hasOwnProperty,za=Wa.call(Object),Ka=("function"==typeof(we=("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof module?module:Function("return this")()).Symbol)?we.observable?Dl=we.observable:(Dl=we("observable"),we.observable=Dl):Dl="@@observable",Dl);function Ga(e,t,n){if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(Ga)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var i=e,r=t,o=[],s=o,a=!1;function c(){s===o&&(s=o.slice())}function u(){return r}function l(t){if("function"!=typeof t)throw new Error("Expected listener to be a function.");var n=!0;return c(),s.push(t),function(){var e;n&&(n=!1,c(),e=s.indexOf(t),s.splice(e,1))}}function d(e){if(!function(e){if(null!=e&&"object"==typeof e&&"[object Object]"==(null==(t=e)?void 0===t?"[object Undefined]":"[object Null]":Ba&&Ba in Object(t)?function(e){var t=qa.call(e,ja),n=e[ja];try{var i=!(e[ja]=void 0)}catch(e){}var r=Ua.call(e);return i&&(t?e[ja]=n:delete e[ja]),r}(t):Ha.call(t))){var t,e=Va(e);if(null===e)return 1;e=$a.call(e,"constructor")&&e.constructor;return"function"==typeof e&&e instanceof e&&Wa.call(e)==za}}(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(a)throw new Error("Reducers may not dispatch actions.");try{a=!0,r=i(r,e)}finally{a=!1}for(var t=o=s,n=0;n<t.length;n++)(0,t[n])();return e}return d({type:"@@redux/INIT"}),(t={dispatch:d,subscribe:l,getState:u,replaceReducer:function(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");i=e,d({type:"@@redux/INIT"})}})[Ka]=function(){var e,n=l;return(e={subscribe:function(e){if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");function t(){e.next&&e.next(r)}return t(),{unsubscribe:n(t)}}})[Ka]=function(){return this},e},t}function Ya(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}var Ja=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e};function Xa(e){return!isNaN(e)&&parseInt(Number(e),10)==e&&!isNaN(parseInt(e,10))}var Za=function(e){for(var t=this,n=function i(r){return r.length>=e.length?e.apply(t,r):function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i([].concat(te(r),t))}},i=arguments.length,r=new Array(1<i?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];return n(r)}(function(t,n){return Object.keys(t).every(function(e){return t[e]===n[e]})});function Qa(e,t,n){n=2<arguments.length&&void 0!==n?n:document.styleSheets[0];try{n.insertRule?n.insertRule(e+"{"+t+"}",(n.cssRules||n.rules).length):n.addRule(e,t)}catch(e){}}function ec(e,t){var n=0<arguments.length&&void 0!==e?e:document.activeElement,t=1<arguments.length&&void 0!==t?t:null;try{n.blur()}catch(n){t&&t(n)}}function tc(e){var t=e.getBoundingClientRect();return t=document.msFullscreenElement&&window.parent!==window&&e.offsetWidth<e.clientWidth?{bottom:100*t.bottom,left:100*t.left,top:100*t.top,right:100*t.right,width:100*t.width,height:100*t.height}:t}function nc(e){try{return new URL(e).origin}catch(e){}var t=document.createElement("a");return t.href=e,t.origin||"".concat(t.protocol.replace(":",""),"://").concat(t.host)}function ic(e){var t=e.width,n=e.height,i=e.elementWidth,r=e.elementHeight,o=e.threshold,e=void 0===o?10:o,o=1,t=t/n,n=i-r*t,t=r-i/t;return{extraWidth:n,extraHeight:t,scaleFactor:o=0<n&&n<e||0<t&&t<e?uc(Math.max(i/(i-n),r/(r-t)),3):o}}function rc(e,t,n){return n<e?n:e<t?t:e}function oc(e,t,n){var i=n.width,r=n.height,o=n.scrollbars,s=void 0===o?"yes":o,a=n.resizable,c=void 0===a?"yes":a,o=n.toolbar,a=void 0===o?"no":o,n=(window.screenY||window.screenTop||0)+window.outerHeight/2-r/2,o=(window.screenX||window.screenLeft||0)+window.outerWidth/2-i/2;window.chrome&&-1!==window.navigator.userAgent.toLowerCase().indexOf("mac os x")&&(r+=27),window.safari&&(r+=47);a="scrollbars=".concat(s,",resizable=").concat(c,",toolbar=").concat(a);return window.open(e,t,"width=".concat(i,",height=").concat(r,",left=").concat(o,",top=").concat(n,",").concat(a))}function sc(e){return/^(https?:)?\/\/(.+)\.vimeo(ws)?\.(com|dev)(?=$|\/)/.test(e)?nc(e):""}function ac(e,t,n){if(/^(https?:)?\/\/(.+)\.vimeo(ws)?\.(com|dev)\/video\/\d+\/config(?=$|\?)/.test(t))return t;var i=function(e){if(Xa(e))return parseInt(e,10);e=e.match(/(video|\.com|\.dev)\/(\d+)/);if(!e||e.length<3)throw new Error("Please provide a Vimeo URL with a valid clip id.");return parseInt(e[2],10)}(t),r=he(window.location.search),t=he("".concat(t).split("?")[1]),n=Object.assign(r,t,n);return ve("".concat(e,"/video/").concat(i,"/config"),n)}function cc(e){for(var t,n,i=(e||document).querySelectorAll("[tabindex]"),r=[],o=0,s=0,a=i.length;s<a;s++)t=i[s],n=window.getComputedStyle(t,""),0<t.tabIndex&&"none"!==n.display&&0<n.opacity&&"hidden"!==n.visibility&&(r[o++]=t);e=r.shift();e&&(e.focus(),e.blur())}function uc(e,t){t=1<arguments.length&&void 0!==t?t:3;if(e=parseFloat(e),isNaN(e))return 0;t=Math.pow(10,t);return Math.round(e*t)/t}function lc(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(e^16*Math.random()>>e/4).toString(16)})}function dc(e,t){return-1!==Be(t).indexOf(e)}function fc(e){return e?Be(e.parentNode.children).indexOf(e):-1}var hc=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}(fc,function(e,t){for(;null!=e&&e.parentElement&&!dc(e,t);)e=e.parentElement;return dc(e,t)?e:null});function vc(e,t,n){if(void 0!==n)e.style[t]=n;else if("string"==typeof(n=t)||!Dt(n)&&Rt(n)&&"[object String]"==xe(n))e.setAttribute("style",t);else for(var i in t)vc(e,i,t[i])}function pc(e,r,t){t.forEach(function(i){e(i,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.apply(void 0,[i].concat(t))})})}function mc(e){for(var t=Object.keys(e),n=t.length,i=[],r=0;r<n;)i[r]=e[t[r]],r+=1;return i}function gc(e,t){return t&&0===t.indexOf(e)}var bc=0;function yc(e){var t=++bc;return"".concat(0<arguments.length&&void 0!==e?e:"p").concat(t)}function Ec(){return{id:"error",title:"Player error",message:"The player is having trouble. Weâ€™ll have it back up and running as soon as possible.",modal:!0,final:!0}}var wc={ys:yc(),_s:yc(),ks:yc(),Es:yc()},_c={VIDEO_TITLE:"video-title",VIDEO_BYLINE:"video-byline",VIDEO_PORTRAIT:"video-portrait"},Tc="application/vnd.vimeo.dash+json",Sc={Ts:yc(),Ss:yc(),As:yc(),_hideOverlay:yc(),_showOverlay:yc(),Ms:yc(),_updateEmailCapture:yc(),Cs:yc(),Rs:yc(),Is:yc(),Os:yc(),Ls:yc(),Ds:yc(),Ps:yc(),Ns:yc(),Fs:yc(),Us:yc(),Vs:yc(),Bs:yc(),Hs:yc(),qs:yc(),Ws:yc(),_hideOutro:yc(),zs:yc(),_overrideControlbarBehavior:yc(),Gs:yc(),Ks:yc(),Ys:yc(),Js:yc(),$s:yc(),Xs:yc(),_addCard:yc(),_removeCard:yc(),Zs:yc(),Qs:yc()},Ac={will:"willLikeVideo",did:"didLikeVideo"},kc={will:"willUnlikeVideo",did:"didUnlikeVideo"},Lc={will:"willAddToWatchLater",did:"didAddToWatchLater"},Rc={will:"willRemoveFromWatchLater",did:"didRemoveFromWatchLater"},Cc={will:"willOpenVodPurchaseForm",did:"didOpenVodPurchaseForm"},xc={will:"willOpenShareOverlay",did:"didOpenShareOverlay"},Ic={will:"willOpenLoginForm",did:"didOpenLoginForm"},Oc={will:"willOpenCollectionsOverlay",did:"didOpenCollectionsOverlay"},Dc={will:"willShowOutro",did:"didShowOutro"},Pc={will:"willSendPlayLog",did:"didSendPlayLog"},Mc={tc:yc(),nc:yc(),ic:yc(),ec:yc(),tr:yc(),rc:yc(),oc:yc(),uc:yc(),ac:yc(),sc:yc(),cc:yc(),lc:yc(),fc:yc(),hc:yc(),dc:yc(),vc:yc(),pc:yc(),mc:yc(),bc:yc(),wc:yc(),yc:yc(),gc:yc(),_c:yc(),kc:yc(),Ec:yc(),Tc:yc(),Sc:yc(),xc:yc(),Ac:yc(),Mc:yc(),Cc:yc(),Rc:yc(),Ic:yc(),Oc:yc(),jc:yc(),Lc:yc(),Dc:yc(),Pc:yc(),Nc:yc(),Fc:yc(),Uc:yc(),Vc:yc(),Bc:yc(),Hc:yc(),qc:yc(),Wc:yc(),zc:yc(),Gc:yc(),Kc:yc(),Yc:yc(),Jc:yc(),$c:yc(),Xc:yc(),Zc:yc(),Qc:yc(),tl:yc(),nl:yc(),il:yc(),el:yc(),rl:yc(),ol:yc(),ul:yc(),al:yc(),sl:yc(),cl:yc(),ll:yc(),fl:yc(),hl:yc(),dl:yc(),vl:yc(),pl:yc(),ml:yc(),bl:yc(),wl:yc(),yl:yc(),gl:yc(),_l:yc(),kl:yc(),El:yc(),Tl:yc(),Sl:yc(),Al:yc(),Ml:yc(),Cl:yc(),Rl:yc(),Il:yc(),Ol:yc(),jl:yc(),Ll:yc(),Dl:yc(),Pl:yc(),Nl:yc(),Fl:yc(),Ul:yc(),Vl:yc(),Bl:yc(),Hl:yc(),ql:yc(),Wl:yc(),zl:yc(),Gl:yc(),Kl:yc(),Yl:yc(),Jl:yc(),_loadVideo:yc(),$l:yc(),Xl:yc(),Zl:yc(),Ql:yc(),tf:yc(),nf:yc(),if:yc(),ef:yc(),rf:yc(),uf:yc(),af:yc(),sf:yc(),cf:yc(),lf:yc(),ff:yc(),hf:yc(),df:yc(),vf:yc(),pf:yc(),mf:yc(),be:yc(),bf:yc(),wf:yc(),yf:yc(),gf:yc(),_f:yc(),kf:yc(),Ef:yc(),Tf:yc(),Sf:yc(),xf:yc(),Af:yc(),Mf:yc(),Cf:yc(),Rf:yc(),If:yc(),Of:yc(),jf:yc()},Nc={Ts:yc(),Lf:yc(),Df:yc(),Pf:yc()},Fc={"application/vnd.apple.mpegurl":"hls","application/vnd.vimeo.dash+json":"dash","video/vnd.mpeg.dash.mpd":"dash","video/mp4":"progressive","video/webm":"progressive","video/x-flv":"progressive","application/x-mpegURL":"hlslive"},qc={AD_STARTED:"adstarted",AD_COMPLETED:"adcompleted",AD_ERROR:"aderror",AD_SKIPPED:"adskipped",AD_ALL_COMPLETED:"adallcompleted",AD_CLICKED:"adclicked",BUFFER_END:"bufferend",BUFFER_START:"bufferstart",CHAPTER_CHANGE:"chapterchange",CHROMECAST_CONNECTED:"chromecastconnected",CONTROL_BAR_VISIBILITY_CHANGED:"controlbarvisibilitychanged",CUE_CHANGE:"cuechange",CUEPOINT:"cuepoint",DURATION_CHANGE:"durationchange",EMAIL_CAPTURE_FAILED:"emailcapturefailed",EMAIL_CAPTURE:"emailcapture",ENDED:"ended",ERROR:"error",FULLSCREENCHANGE:"fullscreenchange",LIVE_EVENT_ENDED:"liveeventended",LIVE_EVENT_STARTED:"liveeventstarted",LIVE_STREAM_OFFLINE:"livestreamoffline",LIVE_STREAM_ONLINE:"livestreamonline",LOADED_DATA:"loadeddata",LOAD_START:"loadstart",LOADED_METADATA:"loadedmetadata",LOADED:"loaded",MOTION_END:"motionend",MOTION_START:"motionstart",CAMERA_CHANGE:"camerachange",WEBVR_HARDWARE_AVAILABLE:"webvrhardwareavailable",ENTER_WEBVR:"enterwebvr",EXIT_WEBVR:"exitwebvr",ENTER_PICTURE_IN_PICTURE:"enterpictureinpicture",LEAVE_PICTURE_IN_PICTURE:"leavepictureinpicture",SPATIAL_UNSUPPORTED:"spatialunsupported",PAUSE:"pause",PLAY:"play",PLAYING:"playing",PLAYBACK_RATE_CHANGE:"playbackratechange",RATE_CHANGE:"ratechange",PROGRESS:"progress",QUALITY_CHANGE:"qualitychange",READY:"ready",RESIZE:"resize",SEEKING:"seeking",SEEKED:"seeked",SPACE_CHANGE:"spacechange",TEXT_TRACK_CHANGE:"texttrackchange",TIME_UPDATE:"timeupdate",VOLUME_CHANGE:"volumechange",WAITING:"waiting"},Uc={playProgress:"timeupdate",loadProgress:"progress",finish:"ended",seek:"seeked"},jc={MARKER_SEEKED:"seeked",MARKER_ENDED:"ended",MARKER_UPSWITCH:"upswitch",MARKER_DOWNSWITCH:"downswitch",MARKER_SWITCH_COMPLETE:"switchcomplete",MARKER_RESIZE:"resize",MARKER_SCANNER_CHANGE:"scannerchange",MARKER_FILE_CHANGE:"filechange",MARKER_STALLED:"stalled",MARKER_BUFFER_GAP_JUMP:"buffergapjump",MARKER_BUFFER_GAP_JUMP_PREVENT:"buffergapjumpprevent"},Hc={MARKER_SEEKED:"#0088cc",MARKER_ENDED:"#503873",MARKER_UPSWITCH:"#5a9e02",MARKER_DOWNSWITCH:"#d93636",MARKER_RESIZE:"#FF8A00",MARKER_SCANNER_CHANGE:"#e9ff00",MARKER_FILE_CHANGE:"#b5d3e2",MARKER_STALLED:"#f44283"},Bc={NOTHING:"nothing",BEGINNING:"beginning",EMAIL:"email",VOD:"vod",VIDEOS:"videos",LINK:"link",THREEVIDEOS:"threevideos",PROMOTED:"promoted",SHARE:"share"},Vc=Object.freeze({__proto__:null,BrowserNotSupported:function(){return{id:"not-supported",title:"Unsupported viewing environment",message:'Your system is having trouble playing this video. For more information, see our <a href="https://help.vimeo.com/hc/en-us/articles/115015677227-Troubleshoot-player-error-messages" target="_blank" rel="noopener" aria-describedby="new-window">Help Center</a>.',deferred:!0,final:!0}},DRMFailure:function(){return{id:"drm-failure",title:"Rights issue",message:"Weâ€™re having trouble authorizing playback for this video. ",final:!0}},FilesNotPlayable:function(){return{id:"not-supported",title:"Player error",message:"The player is having trouble. Weâ€™ll have it back up and running as soon as possible.",deferred:!0,final:!0}},MediaSrcNotSupportedError:function(){return{id:"not-supported",final:!1}},MediaDecodeError:function(){return{id:"decode",final:!1}},MediaNetworkError:function(){return{id:"network",title:"Network error",message:'A network hiccup interrupted playback. Please <a href="javascript:window.location.reload()" rel="noopener">reload the player</a> and try again.',final:!0}},MediaUnknownError:function(){return{id:"unknown",title:"Browser error",message:'Weâ€™re having trouble playing this video file. Please <a href="javascript:window.location.reload()" rel="noopener">reload the player</a> and try again.',final:!0}},FileError:function(){return{id:"telecine-file-error",final:!1}},DownloadError:function(){return{id:"telecine-download-error",final:!1}},MediaUrlExpired:function(){return{id:"media-url-expired",title:"Playback error",message:'Weâ€™re having trouble playing this video. Please <a href="javascript:window.location.reload()" rel="noopener">reload the player</a> and try again.',final:!1}},ScannerError:function(){return{id:"scanner-error",final:!1}},PlayerError:Ec});function Wc(){return(void 0!==window.performance&&"function"==typeof window.performance.now?window.performance:Date).now()}function $c(e){return Wc()-e}function zc(){var i=0,r=null,n=0,o=!1;function t(){return i/1e3}return{trackBufferStart:function(e,t){r=Wc(),n++,o=!0,e(t)},trackBufferEnd:function(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};o&&(t=$c(r),i+=t,n.buffer_duration=t/1e3,o=!1,e(n))},trackVideoExit:function(e){o&&!e&&(i+=$c(r))},resetLastBufferTime:function(){r=null},getBufferRatio:function(e){e=t()/e*100;return isNaN(e)?0:Math.round(100*e)/100},getBufferCount:function(){return n},getTotalBufferDuration:t,isVideoBuffering:function(){return o}}}var Kc={VIDEO_BUFFER_END:"video-buffer-end",VIDEO_BUFFER_START:"video-buffer-start",VIDEO_ENDED:"video-ended",VIDEO_EXIT:"video-exit",VIDEO_LOAD_FAILURE:"video-load-failure",VIDEO_MINUTE_WATCHED:"video-minute-watched",VIDEO_PAUSED:"video-paused",VIDEO_PLAYED:"video-played",VIDEO_PLAYBACK_ERROR:"video-playback-error",VIDEO_READY:"video-ready",VIDEO_START_ATTEMPT:"video-start-attempt",VIDEO_START_FAILURE:"video-start-failure",VIDEO_START_TIME:"video-start-time",VIDEO_SEEK:"video-seek",VIDEO_SEEKED:"video-seeked",CHUNK_DOWNLOADED:"chunk_downloaded"};function Gc(n){function i(n,i){var r=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"POST";return new ee(function(t,e){"POST"===o&&navigator.sendBeacon?t({status:navigator.sendBeacon(n,i)}):qi({url:n,body:i,method:o,async:r,headers:{"Content-Type":"text/plain; charset=UTF-8"}}).then(function(e){t({response:e,status:e.status})}).catch(e)})}return{log:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];return 2<arguments.length&&void 0!==arguments[2]&&!arguments[2]||(e.event_time=e.event_time||Wc()),i(n,JSON.stringify([e]),t)},logRequestPromiseWithUrl:i}}function Yc(r){var e=0,t=0,n=0,i=0,o=!1,s=-1,a=null,c=null,u=null,l={satisfied:0,tolerable:0,frustrated:0},d=null;function f(){var e,t=r.getBoundingClientRect(),n=r.videoWidth,i=r.videoHeight;0===n&&0===i||(e="satisfied",t.width>n&&t.height>i&&(n/t.width<.4?e="satisfied":n/t.width<1?e="tolerable":1<n/t.width&&(e="frustrated")),c&&(t=$c(c),l[u]+=t),u=e,c=Wc())}function h(){return o?0:1}function v(){return-1===s?null:8e3<s||-1===s?0:2e3<s?.5:1}function p(){return d?(i=n/$c(d),4<=e||.12<=i?0:e<4&&0!==e?i<.12?.5:0:1):null}function m(){if(-1===s)return null;switch(f(),Object.keys(l).reduce(function(e,t){return l[e]>l[t]?e:t})){case"satisfied":return 1;case"tolerable":return.5;case"frustrated":return 0}return null}return r.addEventListener("playing",function(){-1===s&&(a=Wc())}),r.addEventListener("progress",function(){-1===s&&(d=Wc(),s=$c(a)),f()}),{startupTimeScore:v,rebufferScore:p,failureScore:h,videoQualityScore:m,overallScore:function(){return Math.min(h(),v(),p(),m())},trackBufferStart:function(){-1!==s&&(e++,t=Wc())},trackBufferEnd:function(){-1!==s&&(n+=$c(t))},onError:function(e){e.final&&(o=!0)}}}function Jc(e,t){t=1<arguments.length&&void 0!==t?t:3;if(e=parseFloat(e),isNaN(e))return 0;t=Math.pow(10,t);return Math.round(e*t)/t}function Xc(n,i){var e,t,r,o,s,a,c,u,l,d,f,h,v,p=0;function m(){s=r=t=e=0,u=o=null,l=c=a=!1,d=new Yc(n),f=new zc,h={bufferTracker:f,videoBufferCheck:function(){setInterval(function(){var e=n.currentTime;c&&!l&&!n.paused&&!h.bufferTracker.isVideoBuffering()&&e<r+.125&&h.bufferTracker.trackBufferStart(b),c&&!n.paused&&h.bufferTracker.isVideoBuffering()&&r+.125<e&&(h.bufferTracker.trackBufferEnd(y),h.bufferTracker.resetLastBufferTime()),r=e},250)},addEventData:function(e){return null},playbackSessionTimer:function(){var e=Wc();setInterval(function(){(!n.paused&&a||l||h.bufferTracker.isVideoBuffering())&&(s+=$c(e)/1e3),e=Wc()},500)}}}function g(e,t){t=1<arguments.length&&void 0!==t?t:{};0===p&&(t=Object.assign(t,h.addEventData(e)),i(e,t))}function b(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};d.trackBufferStart(),g(Kc.VIDEO_BUFFER_START,e)}function y(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};d.trackBufferEnd(),g(Kc.VIDEO_BUFFER_END,e)}return m(),g(Kc.VIDEO_READY),v=Math.floor(60*Math.random()),setInterval(function(){!n.paused&&a&&(e++,0!==t?60<=e&&(e=0,t++,g(Kc.VIDEO_MINUTE_WATCHED)):e===v&&(e=0,t++,g(Kc.VIDEO_MINUTE_WATCHED)))},1e3),window.addEventListener("unload",function(e){h.bufferTracker.trackVideoExit(n.paused);var t={startup:d.startupTimeScore(),rebuffer:d.rebufferScore(),failure:d.failureScore(),quality:d.videoQualityScore(),overall:d.overallScore()};u&&g(Kc.VIDEO_EXIT,{vxs:t},!1)},!1),n.addEventListener("playing",function(){a=!0,l||c&&g(Kc.VIDEO_PLAYED)}),n.addEventListener("timeupdate",function(){var e;c||(e={startup_duration:u?Jc($c(u)/1e3,2):null},g(Kc.VIDEO_START_TIME,e),c=!0)}),n.addEventListener("pause",function(){a=!1,g(Kc.VIDEO_PAUSED)}),n.addEventListener("seeking",function(){l||(o=Wc(),a=!(l=!0),g(Kc.VIDEO_SEEK))}),n.addEventListener("seeked",function(){l=!1,n.paused||(a=!0),g(Kc.VIDEO_SEEKED,{seek_duration:$c(o)/1e3}),o=null}),n.addEventListener("ended",function(){g(Kc.VIDEO_ENDED)}),n.addEventListener("waiting",function(){a=!1}),n.addEventListener("canplay",function(){l||h.bufferTracker.isVideoBuffering()&&!a&&(h.bufferTracker.trackBufferEnd(y),h.bufferTracker.resetLastBufferTime())}),{globalProperties:function(){return{autoplay:n.autoplay,buffer_count:h.bufferTracker.getBufferCount(),total_buffer_duration:h.bufferTracker.getTotalBufferDuration(),buffer_ratio:h.bufferTracker.getBufferRatio(s),client_time:Wc(),is_buffering:h.bufferTracker.isVideoBuffering(),looping:n.loop,minutes_watched:t,network_state:n.networkState,playback_rate:n.playbackRate,player_width:n.getBoundingClientRect().width,player_height:n.getBoundingClientRect().height,session_playback_duration:Jc(s,2),video_time:n.currentTime,video_height:n.videoHeight,video_width:n.videoWidth,volume:Jc(n.volume,2)}},logStartRequest:function(){u=Wc(),g(Kc.VIDEO_START_ATTEMPT)},customizeHooks:function(e){h=Object.assign(h,e)},initHooks:function(){h.videoBufferCheck(),h.playbackSessionTimer()},logBufferStart:b,logBufferEnd:y,setDisplayContext:function(e){p=e},handleExternalError:function(e,t){a=!1,d.onError(t),g(c?Kc.VIDEO_PLAYBACK_ERROR:Kc.VIDEO_LOAD_FAILURE,e)},reset:m}}function Zc(e){return e.config.video.p2p?"vimeo-live-ecdn":e.config.request.flags.ott?"vimeo-ott-vod":e.config.video.live_event?"vimeo-live":e.config.embed.context&&-1!==e.config.embed.context.indexOf("Stock")?"vimeo-stock-vod":e.config.video.vod?"vimeo-ondemand":"vimeo-vod"}function Qc(e){return"dev"===e.request.build.js?"dev":"3.28.1"}var eu,tu=new ee(function(e){eu=e});function nu(i,r){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;return tu.then(function(e){return o/=.1,Math.random()<=o&&e.captureException((!(n=t=i)||t instanceof Error||(n=new Error(t.message||t),t.name&&(n.name=t.name)),n),r),e.lastEventId();var t,n})}window.addEventListener("unhandledrejection",function(e){e.preventDefault(),e.reason&&nu(e.reason).catch(function(e){})});var iu={setUp:function(r){r.config.request.sentry.enabled&&ce("module/sentry.js").then(function(i){var e="dev"===r.config.request.build.js?"dev":"production",t=[new i.Integrations.Dedupe,new i.Integrations.ExtraErrorData,new i.Integrations.Breadcrumbs({console:!1}),new i.Integrations.GlobalHandlers({onunhandledrejection:!1})];return i.init({dsn:r.config.request.sentry.url,release:Qc(r.config),environment:e,integrations:t,ignoreErrors:["NotAllowedError","AbortError","PlayInterrupted","Failed to load image"],blacklistUrls:[/^moz-extension/i,/^chrome-extension/i],beforeSend:function(e,t){if(!r.config.request)return null;if(An.appleMail)return null;if(gc("ReportingObserver",e.message)&&.01<Math.random())return null;var n=null==(t=t.originalException)?void 0:t.error;return gc("Non-Error exception captured",e.message)&&n?(i.withScope(function(e){e.setExtra("nonErrorException",!0),i.captureException(n)}),null):(e.tags["document.visibilityState"]=document.visibilityState,r.config.request.sentry.enabled?e:null)}}),i.configureScope(function(e){if(e.setTag("session",r.config.request.session),e.setTag("locale",r.config.request.lang),e.setTag("debug_intent",r.config.request.sentry.debug_intent?1:0),e.setTag("product",Zc(r)),e.setTag("backend",r.config.request.build.backend),e.setTag("video_embed_permission",r.config.video.embed_permission),e.setTag("video_privacy",r.config.video.privacy),r.config.user.logged_in&&e.setUser({id:r.config.user.id}),r.config.request.ab_tests)for(var t in r.config.request.ab_tests){var n,i=r.config.request.ab_tests[t];for(n in e.setTag("".concat(t,"_test"),1),e.setTag("".concat(t,"_group"),i.group),i.data)e.setTag("".concat(t,"_data_").concat(n),i.data[n])}}),r.config.request.sentry.debug_intent&&window.addEventListener("unload",function(){i.captureMessage("Session debug",{level:"info"})},!1),i}).then(eu).catch(function(e){})},captureException:nu,captureMessage:function(t,n){return tu.then(function(e){return e.captureMessage(t,n),e.lastEventId()})},captureBreadcrumb:function(t,n){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"player",r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"info";return tu.then(function(e){return e.addBreadcrumb({message:t,data:n,category:i,level:r})})}};function ru(e){var s=e.events,a=null,c=null,t=null,u=null,l=null,o={video:{},request:{},embed:{}};function n(){return c&&c-6e4<=Date.now()}function d(e){var t=Date.now()+1e3*e;return l=setTimeout(function(){"onLine"in navigator&&!navigator.onLine||u||(u=r().catch(iu.captureException))},1e3*e-6e4-5e3),t}function i(e,t){var n=1<arguments.length&&void 0!==t?t:{};clearTimeout(l);var i=a;if(isNaN(e)&&"string"!=typeof e)return c=d((a=e).request.expires),ee.resolve({old:i,loaded:a});Date.now();var r=(o=Ta(o,a)).request.referrer;r&&(n.referrer=r);t=null!=a&&a.player_url?"https://".concat(a.player_url):"";return qi(ac(sc(e)||t,e,n),{withCredentials:!0,throwHttpErrors:!1}).json().then(function(e){return 7!==(a=e).view&&(c=d(a.request.expires),o.request.session&&a.video.id===o.video.id&&(a.request.session=o.request.session),r&&(a.request.referrer=r),o.embed.player_id&&(a.embed.player_id=o.embed.player_id),o.embed.on_site&&(a.embed.on_site=1,a.embed.context=o.embed.context)),Date.now(),{old:i,loaded:a}}).catch(function(e){iu.captureException(e)})}function r(){clearTimeout(l),Date.now();var t=null==a?void 0:a.request.referrer,e=a.request,n=e.signature,i=e.session,r=e.timestamp,o=e.expires,e=a.request.ott_chromecast_token,o="https://".concat(a.player_url,"/video/").concat(a.video.id,"/config/request?session=").concat(i,"&signature=").concat(n,"&time=").concat(r,"&expires=").concat(o);return e&&(o="".concat(o,"&ott_chromecast_token=").concat(e)),t&&(o+="".concat(-1===o.indexOf("?")?"?":"&","referrer=").concat(encodeURIComponent(t))),qi(o,{withCredentials:!0,retry:3}).json().then(function(e){return a.request=e,t&&(a.request.referrer=t),c=d(a.request.expires),Date.now(),u=null,s.fire(Mc.Ul),a.request}).catch(function(e){var t={id:"network",title:"Network error",message:'A network hiccup interrupted playback. Please <a href="javascript:window.location.reload()" rel="noopener">reload the player</a> and try again.',final:!0};throw s.fire(Mc.nc,t.id,t),e})}return window.addEventListener("online",function(){n()&&(u=r().catch(iu.captureException))}),s.on(Mc.nc,function(e){u||"media-url-expired"!==e||(u=r().catch(iu.captureException))}),{get isExpired(){return n()},load:function(e,t){return i(e,t)},reload:function(){return null!=a&&a.video.id?i(a.video.id):ee.reject(new Error("No config loaded."))},toJSON:function(){return a},get config(){return a},set config(e){a=e},verify:function(){return n()?u=u||r():ee.resolve(a.request)},get $(){return t},set $(e){t=e}}}var ou=function(){return _e.Date.now()},su=Math.max,au=Math.min;function cu(i,n,e){var r,o,s,a,c,u,l=0,d=!1,f=!1,t=!0;if("function"!=typeof i)throw new TypeError("Expected a function");function h(e){var t=r,n=o;return r=o=void 0,l=e,a=i.apply(n,t)}function v(e){var t=e-u;return void 0===u||n<=t||t<0||f&&s<=e-l}function p(){var e,t=ou();if(v(t))return m(t);c=setTimeout(p,(e=n-(t-u),f?au(e,s-(t-l)):e))}function m(e){return c=void 0,t&&r?h(e):(r=o=void 0,a)}function g(){var e=ou(),t=v(e);if(r=arguments,o=this,u=e,t){if(void 0===c)return l=t=u,c=setTimeout(p,n),d?h(t):a;if(f)return clearTimeout(c),c=setTimeout(p,n),h(u)}return void 0===c&&(c=setTimeout(p,n)),a}return n=wo(n)||0,Ie(e)&&(d=!!e.leading,s=(f="maxWait"in e)?su(wo(e.maxWait)||0,n):s,t="trailing"in e?!!e.trailing:t),g.cancel=function(){void 0!==c&&clearTimeout(c),r=u=o=c=void(l=0)},g.flush=function(){return void 0===c?a:m(ou())},g}function uu(e,t){var n=e,i=t;return n%320!=0&&(n=100*Math.ceil(e/100),i=Math.round(n/e*t)),{width:n,height:i}}function lu(e){var t=e.width,n=e.height,i=e.baseUrl,r=e.crop,r=void 0!==r&&r,e=e.defaultExtension,e=void 0===e?".jpg":e,i=(i=i.replace(/\.[^/.]+$/,""))+(An.webp?".webp":"".concat(e)),e={},t=parseInt(t,10),n=parseInt(n,10);return 0!==t&&(r?e.w=t:e.mw=t),0!==n&&(r?e.h=n:e.mh=n),1<An.devicePixelRatio&&(e.q=70),ve(i,e)}function du(r){return new ee(function(e,t){var n=new Image;function i(){iu.captureBreadcrumb("Load image: ".concat(r),{}),t(new Error("Failed to load image."))}n.onload=function(){n&&0<n.width&&0<n.height?e(n):i()},n.onerror=i,n.src=r})}function fu(t){return du(t).catch(function(e){return iu.captureException(e,{extra:{imageUrl:t}}),new ee(function(){})})}var hu="7742C69E",vu="78077C77",pu={connected:yc(),disconnected:yc(),playing:yc(),paused:yc(),buffering:yc(),idle:yc(),ended:yc(),sessionStateChanged:yc(),timeUpdated:yc(),mediaLoadedSuccess:yc(),mediaLoadedFailed:yc(),error:yc()},mu=((Ft=Eu.prototype).calculateStartTime=function(){var e=Number(0<arguments.length&&void 0!==arguments[0]?arguments[0]:null)||this.Ff.backbone.currentTime-7;return e<0&&(e=0),e=this.isEndOfVideo?0:e},Ft.loadMedia=function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=e.contentId,i=e.currentTime,r=void 0===i?null:i,o=e.duration,s=void 0===o?null:o,a=e.token,c=void 0===a?null:a,u=e.bypassToken,l=void 0===u?null:u,i=e.autoRequest,o=void 0!==i&&i,a=e.autoCaption,d=void 0===a||a,u=e.autoDisconnect,f=void 0===u||u,i=e.tracks,a=void 0===i?[]:i;if(bu.isLoadingMedia)return ee.resolve(!1);u=this.Ff.config;n=n||u.video.id;var h,e=u.request,i=e.drm;null!=i&&i.fastly&&(h=Ys(e,"files.dash.default_cdn"),n=Ys(e,"files.dash.cdns.".concat(h,".url")),h=Ys(i,"cdms.widevine.license_url"),a=(e.text_tracks||[]).map(function(e){var t,n,t=(t=e.url,(n=document.createElement("a")).href=t,n),n=t.pathname,t=t.search;return X(X({},e),{},{url:"https://player.vimeo.com".concat(n).concat(t)})}));r=this.calculateStartTime(r),s=Number(s)||this.duration,c=c||u.user.vimeo_api_client_token,l=l||u.video.bypass_token;this.isEndOfVideo&&(this.nh=!1);var v={contentId:n,duration:s,autoRequest:o,tracks:a,currentTime:r,requestCustomData:{token:c,bypassToken:l,tokenType:"jwt"}};return this.Ff.config.request.ott_chromecast_token&&(v.requestCustomData.ottChromecastToken=this.Ff.config.request.ott_chromecast_token),(h?this.Tu(h).then(function(e){return X(X({},v),{},{mediaCustomData:{widevineLicenseServerURL:e}})}):ee.resolve(v)).then(function(e){return bu.loadMedia(e)}).then(function(){return bu.fire(pu.mediaLoadedSuccess),t.addRemotePlayerListenersOnPlaying(),t.Ff.events.fire(Vo),t.Ff.events.fire(Sc._hideOutro),t.ih=!1,d&&t.onCaptionsChanged(t.Ff.backbone.enabledTextTrack),t.Ff.backbone.paused||t.Ff.backbone.pause(),!0}).catch(function(e){return bu.fire(pu.mediaLoadedFailed,e),f&&t.endCurrentSession(),ee.reject(e)})},Ft.Tu=function(t){return new ee(function(e,n){var i=new XMLHttpRequest;i.open("GET",t),i.onload=function(){function t(e){return new Error("Error retrieving License Acquisition URL (LA_URL): ".concat(e))}if(200<=i.status&&i.status<300)try{e(i.response)}catch(e){n(t(e))}else n(t(i.status))},i.onerror=n,i.send()})},Ft.init=function(){this.removeInitListeners(),this.addInitListeners()},Ft.addInitListeners=function(){this.addSessionStateListener(),this.addIsConnectedListener()},Ft.endCurrentSession=function(){bu.castContext&&bu.castContext.endCurrentSession(!(0<arguments.length&&void 0!==arguments[0])||arguments[0])},Ft.syncBackbone=function(){!this.isOutroRendered&&this.Ff.backbone.paused&&(this.Ff.backbone.currentTime=this.lastCurrentTime,this.syncTime())},Ft.stopBackbone=function(){this.Ff.events.fire(Sc.Rs)},Ft.enableUI=function(){var e;!this.Nf||(e=null==(e=bu.currentSessionObj)?void 0:e.receiver)&&this.Nf.show("Casting on "+e.friendlyName),this.Ff.preview.show(),this.Ff.element.classList.add("is-casting")},Ft.disableUI=function(){this.Nf&&this.Nf.hide(),this.isOutroRendered||(this.Ff.preview.hide(),this.Ff.backbone.element.classList.remove("invisible")),this.Ff.element.classList.remove("is-casting")},Ft.syncTime=function(){var e=this.lastCurrentTime/this.duration;bu.fire(pu.timeUpdated,{currentTime:this.lastCurrentTime,duration:this.duration,percent:e}),0<e&&this.Ff.events.fire(un.TIME_UPDATE,{currentTime:this.lastCurrentTime,duration:this.duration,timeProgress:e})},Ft.th=function(){var e=this;return this.nh=!0,this.Ff.events.fire(Mc.uc),this.removeRemotePlayerListenersOnPlaying(),this.isLooped?this.loadMedia().catch(function(){e.showOutro()}):this.showOutro(),bu.fire(pu.ended),!0},Ft.showOutro=function(){this.isOutroRendered||(this.ih=!0,this.Ff.events.fire(Sc.Ws))},Ft.dispose=function(){this.endCurrentSession(),this.removeAllRemoteListeners()},Ft.onIsMediaLoadedChanged=function(e){!1===e.value?this.isTimeEnded&&this.endVideo():this.Ff.backbone.paused||this.Ff.backbone.pause()},Ft.onPlayerStateChanged=function(e){switch(null===e.value&&this.isTimeEnded&&this.endVideo(),e.value){case bu.PlayerState.PLAYING:bu.fire(pu.playing);break;case bu.PlayerState.PAUSED:bu.fire(pu.paused);break;case bu.PlayerState.BUFFERING:bu.fire(pu.buffering);break;default:bu.PlayerState.IDLE;bu.fire(pu.idle)}},Ft.onVolumeLevelChanged=function(e){this.Ff.events.fire(Sc.Ss,e.value,!0)},Ft.onIsMutedChanged=function(e){this.Ff.events.fire(Sc.Ss,e.value?0:bu.remotePlayer.volumeLevel,!0)},Ft.onCurrentTimeChanged=function(e){this.isMediaLoaded&&(this.lt=e.value),this.syncTime(),this.isTimeEnded&&this.endVideo()},Ft.onChangeVolume=function(e){this.volumeLevel=e},Ft.onCaptionsChanged=function(e){var t=bu.currentSession;t&&t.sendMessage("urn:x-cast:com.vimeo.cast.media",{action:"setActiveByLanguage",value:null==e?void 0:e.language})},Ft.onSessionStateChanged=function(e){switch(e.sessionState){case bu.SessionState.SESSION_STARTING:this.addPreventLocalPlayerEvents();break;case bu.SessionState.SESSION_RESUMED:case bu.SessionState.SESSION_STARTED:this.loadMedia();break;case bu.SessionState.SESSION_ENDING:case bu.SessionState.SESSION_ENDED:break;case bu.SessionState.SESSION_START_FAILED:this.removePreventLocalPlayerEvents()}bu.fire(pu.sessionStateChanged,e.sessionState)},Ft.onIsConnectedChanged=function(e){e.value?this.onConnected():this.onDisconnected()},Ft.onConnected=function(){this.removePreventLocalPlayerEvents(),this.stopBackbone(),this.addLocalPlayerListeners(),this.addRemotePlayerListenersOnIdle(),this.addMessageListener(),this.enableUI(),bu.fire(pu.connected)},Ft.onDisconnected=function(){this.syncBackbone(),this.removeRemotePlayerListeners(),this.removeLocalPlayerListeners(),this.removeMessageListener(),this.disableUI(),bu.fire(pu.disconnected)},Ft.onConfigChanged=function(){this.loadMedia()},Ft.onReset=function(){this.loadMedia()},Ft.onPlayOrPausePressed=function(){this.isEndOfVideo?this.loadMedia():this.isPlayingOrPaused&&bu.remotePlayerController.playOrPause(),this.Ff.events.halt()},Ft.onControlSeek=function(e,t){!t&&e&&(t=this.duration*(e=1<e?1:e)),this.currentTime=t,this.Ff.events.halt()},Ft.addSessionStateListener=function(){bu.castContext&&bu.castContext.addEventListener(bu.CastContextEventType.SESSION_STATE_CHANGED,this.Kf)},Ft.addMessageListener=function(){var e=bu.currentSession;e&&e.addMessageListener("urn:x-cast:com.vimeo.cast.media",this.Zf)},Ft.onMessageReceived=function(e,t){"MEDIA_FINISHED"===(t=JSON.parse(t)).type&&("END_OF_STREAM"===t.endedReason?this.endVideo():"ERROR"===t.endedReason&&(this.endCurrentSession(),bu.fire(pu.error,new Error("Chromecast encountered an error and media finished."))))},Ft.addIsConnectedListener=function(){bu.remotePlayerController&&bu.remotePlayerController.addEventListener(bu.RemotePlayerEventType.IS_CONNECTED_CHANGED,this.Gf)},Ft.addPreventLocalPlayerEvents=function(){this.Ff.events.prependOn([Mc.wc,Mc.bc,Mc.xc,Mc.Ac,fn.BUFFER_STARTED,fn.BUFFER_ENDED,Sc.Ts,Mc.ac,Mc.jc,Mc.jl,Sc.Rs],this.Qf)},Ft.addRemotePlayerListenersOnIdle=function(){this.removeRemotePlayerListenersOnIdle(),this.addIsMediaLoadedChangedListener(),this.addVolumeLevelChangedListener()},Ft.addLocalPlayerListeners=function(){this.Ff.events.prependOn(Mc.wc,this.Bf),this.Ff.events.prependOn(Mc.bc,this.Bf),this.Ff.events.prependOn(Mc.xc,this.Qf),this.Ff.events.prependOn(Mc.Ac,this.Qf),this.Ff.events.prependOn(fn.BUFFER_STARTED,this.Qf),this.Ff.events.prependOn(fn.BUFFER_ENDED,this.Qf),this.Ff.events.prependOn(Sc.Ts,this.Uf),this.Ff.events.prependOn(Mc.ac,this.Vf),this.Ff.events.on(Mc.jc,this.Xf),this.Ff.events.on(Mc.jl,this.Hf),this.Ff.events.on(Sc.Rs,this.qf)},Ft.preventPlayerDefaultEvent=function(){this.Ff.events.halt()},Ft.addCurrentTimeChangedListener=function(){bu.remotePlayerController&&bu.remotePlayerController.addEventListener(bu.RemotePlayerEventType.CURRENT_TIME_CHANGED,this.zf)},Ft.addIsMediaLoadedChangedListener=function(){bu.remotePlayerController&&bu.remotePlayerController.addEventListener(bu.RemotePlayerEventType.IS_MEDIA_LOADED_CHANGED,this.Yf)},Ft.addPlayerStateChangedListener=function(){bu.remotePlayerController&&bu.remotePlayerController.addEventListener(bu.RemotePlayerEventType.PLAYER_STATE_CHANGED,this.Wf)},Ft.addVolumeLevelChangedListener=function(){bu.remotePlayerController&&(bu.remotePlayerController.addEventListener(bu.RemotePlayerEventType.VOLUME_LEVEL_CHANGED,this.Jf),bu.remotePlayerController.addEventListener(bu.RemotePlayerEventType.IS_MUTED_CHANGED,this.$f))},Ft.addRemotePlayerListenersOnPlaying=function(){this.removeRemotePlayerListenersOnPlaying(),this.addCurrentTimeChangedListener(),this.addPlayerStateChangedListener()},Ft.removeRemotePlayerListenersOnIdle=function(){this.removeIsMediaLoadedChangedListener(),this.removeVolumeLevelChangedListener()},Ft.removeInitListeners=function(){bu.castContext&&bu.castContext.removeEventListener(bu.CastContextEventType.SESSION_STATE_CHANGED,this.Kf),bu.remotePlayerController&&bu.remotePlayerController.removeEventListener(bu.RemotePlayerEventType.IS_CONNECTED_CHANGED,this.Gf)},Ft.removeRemotePlayerListenersOnPlaying=function(){this.removeCurrentTimeChangedListener(),this.removePlayerStateChangedListener()},Ft.removeMessageListener=function(){var e=bu.currentSession;e&&e.removeMessageListener("urn:x-cast:com.vimeo.cast.media",this.Zf)},Ft.removeCurrentTimeChangedListener=function(){bu.remotePlayerController&&bu.remotePlayerController.removeEventListener(bu.RemotePlayerEventType.CURRENT_TIME_CHANGED,this.zf)},Ft.removeIsMediaLoadedChangedListener=function(){bu.remotePlayerController&&bu.remotePlayerController.removeEventListener(bu.RemotePlayerEventType.IS_MEDIA_LOADED_CHANGED,this.Yf)},Ft.removePlayerStateChangedListener=function(){bu.remotePlayerController&&bu.remotePlayerController.removeEventListener(bu.RemotePlayerEventType.PLAYER_STATE_CHANGED,this.Wf)},Ft.removeVolumeLevelChangedListener=function(){bu.remotePlayerController&&(bu.remotePlayerController.removeEventListener(bu.RemotePlayerEventType.VOLUME_LEVEL_CHANGED,this.Jf),bu.remotePlayerController.removeEventListener(bu.RemotePlayerEventType.IS_MUTED_CHANGED,this.$f))},Ft.removePreventLocalPlayerEvents=function(){this.Ff.events.off([Mc.wc,Mc.bc,Mc.xc,Mc.Ac,fn.BUFFER_STARTED,fn.BUFFER_ENDED,Sc.Ts,Mc.ac,Mc.jc,Mc.jl,Sc.Rs],this.Qf)},Ft.removeLocalPlayerListeners=function(){this.Ff.events.off(Mc.wc,this.Bf),this.Ff.events.off(Mc.bc,this.Bf),this.Ff.events.off(Mc.xc,this.Qf),this.Ff.events.off(Mc.Ac,this.Qf),this.Ff.events.off(fn.BUFFER_STARTED,this.Qf),this.Ff.events.off(fn.BUFFER_ENDED,this.Qf),this.Ff.events.off(Sc.Ts,this.Uf),this.Ff.events.off(Mc.ac,this.Vf),this.Ff.events.off(Mc.jc,this.Xf),this.Ff.events.off(Mc.jl,this.Hf),this.Ff.events.off(Sc.Rs,this.qf)},Ft.removeRemotePlayerListeners=function(){this.removeRemotePlayerListenersOnPlaying(),this.removeRemotePlayerListenersOnIdle()},Ft.removeAllRemoteListeners=function(){this.removeRemotePlayerListeners(),this.removeInitListeners()},H(Eu,[{key:"lastCurrentTime",get:function(){return this.lt||0}},{key:"isTimeEnded",get:function(){return this.lastCurrentTime+.5>=this.duration}},{key:"isOutroRendered",get:function(){return this.ih||!1}},{key:"isLooped",get:function(){return this.Ff.config.embed.loop}},{key:"isEndOfVideo",get:function(){return this.nh||!1}},{key:"currentTime",set:function(e){bu.remotePlayer&&bu.remotePlayerController&&(bu.remotePlayer.currentTime=e,bu.remotePlayerController.seek(),this.lt=e)}},{key:"volumeLevel",set:function(e){bu.remotePlayer&&bu.remotePlayerController&&(bu.remotePlayer.volumeLevel=e,bu.remotePlayerController.setVolumeLevel())}},{key:"duration",get:function(){return this.Ff.config.video.duration}},{key:"isPlayingOrPaused",get:function(){return bu.remotePlayer?bu.remotePlayer.playerState===bu.PlayerState.PLAYING||bu.remotePlayer.playerState===bu.PlayerState.PAUSED:null}},{key:"isIdle",get:function(){return bu.remotePlayer?null===bu.remotePlayer.playerState||bu.remotePlayer.playerState===bu.PlayerState.IDLE:null}},{key:"isMediaLoaded",get:function(){return!!bu.remotePlayer&&bu.remotePlayer.isMediaLoaded}}]),Eu),gu={SETUP_DONE:"SETUP_DONE",NOT_SETUP:"NOT_SETUP"},bu=Q(new(function(r){function e(){return r.apply(this,arguments)||this}W(e,r);var t=e.prototype;return t.init=function(){var e,t=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=n.appId,n=n.chromecastPlayer,n=void 0===n?null:n,i=i||(null!=n&&null!=(e=n.Ff)&&e.config.request.flags.ott?vu:hu);return this.chromecastPlayer=n,this.setup().then(function(e){return e&&(r.prototype.init.call(t,{receiverApplicationId:i,autoJoinPolicy:t.AutoJoinPolicy.PAGE_SCOPED}),t.chromecastPlayer&&t.chromecastPlayer.init()),e}).catch(function(e){return t.fire(pu.error,e),ee.reject(e)})},t.dispose=function(){this.chromecastPlayer=null},H(e,[{key:"chromecastPlayer",get:function(){return this.eh},set:function(e){if(e&&!(e instanceof mu))throw new SyntaxError("An invalid ChromecastPlayer was specified");this.chromecastPlayer&&this.chromecastPlayer.dispose(),this.eh=e}}]),e}(((Is=yu.prototype).init=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.receiverApplicationId,n=void 0===t?"":t,i=e.resumeSavedSession,t=void 0===i||i,i=e.language,i=void 0===i?null:i,e=e.autoJoinPolicy,r=void 0===e?"TAB_AND_ORIGIN_SCOPED":e;if(!this.isGCastApiAvailable)throw new Error("CAF is not available. Call setup() first.");if("string"!=typeof n||""===n.trim())throw new Error("Parameter 'receiverApplicationId' must be valid.");switch(r){case chrome.cast.AutoJoinPolicy.TAB_AND_ORIGIN_SCOPED:case chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED:case chrome.cast.AutoJoinPolicy.PAGE_SCOPED:break;default:r=chrome.cast.AutoJoinPolicy.TAB_AND_ORIGIN_SCOPED}return this.CastContextEventType=cast.framework.CastContextEventType,this.RemotePlayerEventType=cast.framework.RemotePlayerEventType,this.CastState=Object.assign(this.CastState,cast.framework.CastState),this.SessionState=cast.framework.SessionState,this.PlayerState=chrome.cast.media.PlayerState,cast.framework.CastContext.getInstance().setOptions({receiverApplicationId:n.trim(),resumeSavedSession:t,language:i,autoJoinPolicy:r}),this.isInitialized?this.remotePlayerController:this.initRemotePlayer()},Is.initRemotePlayer=function(){if(!this.isGCastApiAvailable)throw new ReferenceError("CAF is not available. Call setup() first.");return this.remotePlayer=new cast.framework.RemotePlayer,this.remotePlayerController=new cast.framework.RemotePlayerController(this.remotePlayer),this.remotePlayerController},Is.setup=function(){var r=this,e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).loadLibrary,o=void 0===e||e;return new ee(function(n,i){if(r.isGCastApiAvailable)return r.AutoJoinPolicy=chrome.cast.AutoJoinPolicy,void n(!0);window.__onGCastApiAvailable=function(e,t){t?(t=new Error(t),i(t)):(r.AutoJoinPolicy=chrome.cast.AutoJoinPolicy,n(e))};try{if(!1===o)throw new ReferenceError("Cast is not available. Make sure the library has been loaded.");r.loadLibrary()||n(!1)}catch(e){var t=new Error(e);i(t)}})},Is.loadLibrary=function(){if(this.isGCastApiAvailable)return!0;if(null!==window.chrome&&void 0!==window.chrome&&"Google Inc."===window.navigator.vendor){var e="//www.gstatic.com/cv/js/sender/v1/cast_sender.js";if(!(0<document.querySelectorAll('script[src^="//www.gstatic.com/cv/js/sender/v1/cast_sender.js"]').length)){e+="?loadCastFramework=1";e=document.createElement("script");return e.src="//www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1",e.async=!0,e.defer=!0,document.head.appendChild(e),!0}}return!1},Is.loadMedia=function(e){var t=this,n=e.contentId,i=e.contentType,r=e.currentTime,o=void 0===r?0:r,r=e.duration,s=void 0===r?0:r,r=e.requestCustomData,a=void 0===r?null:r,r=e.mediaCustomData,c=void 0===r?null:r,r=e.autoRequest,r=void 0!==r&&r,e=e.tracks,u=void 0===e?[]:e;return n?this.isSessionEstablished?this.loadMediaOnSession(this.currentSession,{contentId:n,contentType:i,currentTime:o,duration:s,requestCustomData:a,mediaCustomData:c,tracks:u}):!0!==r?ee.reject(new TypeError("Option 'autoRequest' must be true when session is not connected.")):this.requestSession().then(function(e){return t.loadMediaOnSession(e,{contentId:n,contentType:i,currentTime:o,duration:s,requestCustomData:a,mediaCustomData:c,tracks:u})}):ee.reject(new TypeError("Option 'contentId' must be valid."))},Is.loadMediaOnSession=function(e,t){var n=this,i=t.contentId,r=t.contentType,o=t.currentTime,s=void 0===o?0:o,a=t.duration,c=t.requestCustomData,u=void 0===c?null:c,o=t.mediaCustomData,c=void 0===o?null:o,o=t.tracks,t=void 0===o?[]:o;if(e&&e instanceof cast.framework.CastSession){o=e.getSessionState();if(o!==this.SessionState.SESSION_STARTING&&o!==this.SessionState.SESSION_STARTED&&o!==this.SessionState.SESSION_RESUMED)return ee.reject(new ReferenceError("Session must be established."));t=this.createLoadRequest(i,r,s,a,u,c,t);return null!==this.currentLoadRequestId&&this.currentLoadRequestId===t.requestId||(this.currentLoadRequestId=t.requestId,this.currentLoadingMediaPromise=e.loadMedia(t).finally(function(){n.currentLoadRequestId=null,n.currentLoadingMediaPromise=null})),this.currentLoadingMediaPromise}return ee.reject(new ReferenceError("Session must be cast.framework.CastSession."))},Is.requestSession=function(){var e=this;return this.isSessionEstablished?ee.resolve(this.currentSession):this.castContext?this.castContext.requestSession().then(function(){return e.currentSession}):ee.reject(new Error("CastContext is not available. Call setup() first."))},Is.sendMessage=function(e){var t=this,n=e.namespace,i=e.data,r=void 0===i?{}:i,e=e.autoRequest,e=void 0!==e&&e;return this.isSessionEstablished?this.sendMessageOnSession(this.currentSession,{namespace:n,data:r}):!0!==e?ee.reject(new TypeError("Option 'autoRequest' must be true when session is not connected.")):this.requestSession().then(function(e){return t.sendMessageOnSession(e,{namespace:n,data:r})})},Is.sendMessageOnSession=function(e,t){var n=t.namespace,i=t.data,t=void 0===i?{}:i;if(!e&&e instanceof cast.framework.CastSession)return ee.reject(new ReferenceError("Session must be cast.framework.CastSession."));i=e.getSessionState();return i!==this.SessionState.SESSION_STARTING&&i!==this.SessionState.SESSION_STARTED&&i!==this.SessionState.SESSION_RESUMED?ee.reject(new ReferenceError("Session must be established.")):e.sendMessage(n,t)},Is.createCastButton=function(i){var e=document.createElement("button","google-cast-button");return i&&i.style&&(null===i.style["--disconnected-color"]&&(i.style["--disconnected-color"]="#00ADEF"),null===i.style["--connected-color"]&&(i.style["--connected-color"]="#E5E500")),i&&Object.keys(i).forEach(function(t){var n;"string"==typeof i[t]?e.setAttribute(t,i[t]):"style"===t&&"object"===U(i[t])&&(n="",Object.keys(i[t]).forEach(function(e){n+=e+":"+i[t][e]+";"}),e.setAttribute(t,n))}),e},Is.createLoadRequest=function(e,t,n,i,r,o,s){t=new chrome.cast.media.MediaInfo(e.toString(),t);t.customData=o,t.duration=i;var a={subtitles:chrome.cast.media.TextTrackType.SUBTITLES,captions:chrome.cast.media.TextTrackType.CAPTIONS};t.tracks=s.map(function(e){var t=new chrome.cast.media.Track(e.id,chrome.cast.media.TrackType.TEXT);return t.trackContentId=e.url,t.trackContentType="text/vtt",t.subtype=a[e.kind],t.name=e.label,t.language=e.lang,t});t=new chrome.cast.media.LoadRequest(t);return t.customData=r,t.currentTime=n||0,t},H(yu,[{key:"isGCastApiAvailable",get:function(){return!!("undefined"!=typeof cast&&cast&&cast.framework&&cast.framework.VERSION)}},{key:"castState",get:function(){return this.castContext?this.castContext.getCastState():this.isGCastApiAvailable?this.CastState.SETUP_DONE:this.CastState.NOT_SETUP}},{key:"versionGCastApi",get:function(){return this.isGCastApiAvailable?cast.framework.VERSION:null}},{key:"castContext",get:function(){return this.isGCastApiAvailable?cast.framework.CastContext.getInstance():null}},{key:"currentSession",get:function(){return this.castContext?this.castContext.getCurrentSession():null}},{key:"currentSessionObj",get:function(){var e=this.currentSession;return e?e.getSessionObj():null}},{key:"isInitialized",get:function(){return!(!this.isGCastApiAvailable||!this.remotePlayerController)}},{key:"isSessionEstablished",get:function(){var e=this.currentSessionObj;return!!e&&e.status===chrome.cast.SessionStatus.CONNECTED}},{key:"isCastConnected",get:function(){return this.castState===this.CastState.CONNECTED}}]),yu))));function yu(){this.version="1.2.36",this.remotePlayer=null,this.remotePlayerController=null,this.CastContextEventType=null,this.RemotePlayerEventType=null,this.CastState=gu,this.SessionState=null,this.PlayerState=null,this.currentLoadRequestId=null,this.currentLoadRequestPromise=null}function Eu(e){var t=e.player,e=e.textAlert;this.Nf=void 0===e?null:e,this.Ff=t,this.Uf=this.onControlSeek.bind(this),this.Vf=this.onChangeVolume.bind(this),this.Bf=this.onPlayOrPausePressed.bind(this),this.Hf=this.onConfigChanged.bind(this),this.qf=this.onReset.bind(this),this.Wf=this.onPlayerStateChanged.bind(this),this.zf=this.onCurrentTimeChanged.bind(this),this.Gf=this.onIsConnectedChanged.bind(this),this.Kf=this.onSessionStateChanged.bind(this),this.Yf=this.onIsMediaLoadedChanged.bind(this),this.Jf=this.onVolumeLevelChanged.bind(this),this.$f=this.onIsMutedChanged.bind(this),this.Xf=this.onCaptionsChanged.bind(this),this.Zf=this.onMessageReceived.bind(this),this.Qf=this.preventPlayerDefaultEvent.bind(this),this.endVideo=cu(this.th,500)}function wu(e){return e.replace(/(_\w)/g,function(e){return e[1].toUpperCase()})}function _u(e){return{type:"CONFIG_LOAD",payload:X({},function n(i,r){return Object.keys(r).reduce(function(e,t){return r[t]&&"object"===U(r[t])?e[i(t)]=n(i,r[t]):e[i(t)]=r[t],e},{})}(wu,e))}}var Tu=function(e){return{type:"LIVE_SET_START_TIME",payload:e}};function Su(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length?arguments[1]:void 0,n=t.type,i=t.payload;switch(n){case"CONFIG_LOAD":return i.video.liveEvent?X(X({},e),i.video.liveEvent):null;case"LIVE_UPDATE":return X(X({},e),i);case"LIVE_SET_START_TIME":return X(X({},e),{},{ingest:X(X({},e.ingest),{},{startTime:i})});default:return e}}function Au(e){var t;return(null==(e=e.liveEvent)||null==(t=e.ingest)?void 0:t.scheduledStartTime)||null}function ku(e){return"pending"===(null==(e=e.liveEvent)?void 0:e.status)}function Lu(e){return"active"===(null==(e=e.liveEvent)?void 0:e.status)}function Ru(e){return"ended"===(null==(e=e.liveEvent)?void 0:e.status)}var Cu=function(e){return!(null==(e=e.liveEvent)||!e.status)},xu=function(e){return null==(e=e.liveEvent)?void 0:e.status},Iu=function(e){var t;return(null==(e=e.liveEvent)||null==(t=e.ingest)?void 0:t.startTime)||null},Ou=function(e){return"started"===(null==(e=e.liveEvent)?void 0:e.status)},Du=function(e){return Cu(e)&&!Ru(e)},Pu=function(e){var t;return"done"===(null==(e=e.liveEvent)||null==(t=e.archive)?void 0:t.status)},Ue=Object.freeze({__proto__:null,default:Su,liveExists:Cu,liveStatus:xu,liveArchiveStatus:function(e){var t;return null==(e=e.liveEvent)||null==(t=e.archive)?void 0:t.status},dashLiveUrl:function(e){return null==(e=e.liveEvent)?void 0:e.playback.dash_noredirect},hlsLiveUrl:function(e){return null==(e=e.liveEvent)?void 0:e.playback.hls},scheduledLiveStartTime:Au,liveStartTime:Iu,isLivePending:ku,isLiveActive:Lu,isLiveStarted:Ou,isLiveEnded:Ru,liveInProgress:Du,isLiveArchived:Pu});function Mu(n,i,r){var e=null;function o(){return r.getAttribute("data-thumb")}function s(){return uu(i.get("ui.player.width")*An.devicePixelRatio,i.get("ui.player.height")*An.devicePixelRatio)}function a(){return i.get(Cu)&&!i.get(Ou)||!n.config.embed.autoplay||bu.isCastConnected}function c(){if(!n.config.video.thumbs.base)return ee.resolve();var e=s(),t=e.width,e=lu({width:t,height:e.height,baseUrl:n.config.video.thumbs.base});r.setAttribute("data-thumb",e),r.setAttribute("data-thumb-width",t);e=fu(e).then(function(e){return i.dispatch({type:"PREVIEW_SET_SIZE",payload:{width:e.width,height:e.height}}),a()&&(r.style.backgroundImage="url(".concat(o(),")")),e});return a()?ee.race([e,new ee(function(e){return setTimeout(e,2e3)})]):ee.resolve()}return e=c(),n.events.on(Mc.qc,function(){r.classList.contains("vp-preview-invisible")&&"beginning"!==n.config.embed.outro||(e=c())}),i.watch("ui.player.width",cu(function(){e=e.then(function(){return e=s().width,t=r.getAttribute("data-thumb-width"),e<=parseInt(t,10)||0===e?ee.resolve():c();var e,t}).catch(function(e){})},150)),i.watch("ui.preview.scaleFactor",function(e){r.classList.toggle("vp-preview-cover",1<e)}),{show:function(){r.style.backgroundImage="url(".concat(o(),")"),r.classList.remove("vp-preview-invisible")},hide:function(){r.classList.add("vp-preview-invisible")},resetThumbnail:function(){r.setAttribute("data-thumb",""),r.setAttribute("data-thumb-width",""),r.style.backgroundImage=""},getThumbnail:o,loadThumbnail:c,thumbnailPromise:e}}function Nu(e){return!0===e||!1===e?Number(e):"null"===e?null:e}function Fu(n,e){e=1<arguments.length&&void 0!==e?e:document.cookie;try{if(e&&""!==e)return e.split(";").reduce(function(e,t){return 0===(t=t.trim()).indexOf("".concat(n,"="))?decodeURIComponent(t.substr(n.length+1)):e},null)}catch(n){}return null}var qu=["quality","volume","captions"],Uu=null;function ju(o){var s,e=0!==o.config.request.urls.proxy.indexOf(window.location.origin),i=0;function a(e){var t=null;try{t=Fu("player")}catch(e){}if(!t)return null;var t=t.substring(1,t.length-1),i={};t.split("&").forEach(function(e){e=e.split("="),i[e[0]]=Nu(decodeURIComponent(e[1]||""))});var n=[].concat(e),t=n.reduce(function(e,t){if(t in i){var n=parseFloat(i[t]);return e[t]=isNaN(n)||"quality"===t?i[t]:n,e}return e[t]=null,e},{});return 1===n.length?t[e]:t}function n(e,t){o.doNotTrackEnabled||(function(e,t){if(Uu){var n={method:"set",key:"sync_".concat(e),val:t,session:o.config.request.session};return i=n,Uu.then(function(e){var t=nc(o.config.request.urls.proxy);return e.contentWindow.postMessage(i,t),e}).catch(function(e){iu.captureException(e,{extra:{proxyUrl:o.config.request.urls.proxy}})}),n=n,o.config.embed.on_site&&window.postMessage(n,window.location.origin)}var i;try{window.localStorage.setItem("sync_".concat(e),JSON.stringify(t))}catch(e){}}(e,t=Nu(t)),function(e,t){0<=qu.indexOf(e)&&(o.config.request.cookie[e]=t);var n=[];0<=qu.indexOf(e)&&null!==t&&n.push("".concat(e,"=").concat(t));var i,r=a(qu);for(i in r)i in r&&null!==r[i]&&i!==e&&n.push("".concat(i,"=").concat(r[i]));!function(e,t,n,i){var r=3<arguments.length&&void 0!==i?i:{},o=r.samesite,i=r.secure,r=new Date;r.setFullYear(r.getFullYear()+1),r=r.toGMTString(),t=Nu(t);t="".concat("player","=").concat(t);t+=";expires=".concat(r),t+=";path=/",t+=";domain=".concat(n),i&&(t+=";secure"),o&&(t+=";samesite=".concat(o));try{document.cookie=t}catch(e){return}}("player",'"'.concat(n.join("&"),'"'),o.config.request.cookie_domain,{secure:!0,samesite:"none"})}(e,t))}function r(e,t){switch(e){case"sync_quality":o.events.fire(Sc.Os,t,!0);break;case"sync_volume":if(o.config.embed.settings.background)break;o.events.fire(Sc.Ss,t,!0);break;case"sync_captions":if(null===t){o.events.fire(Sc.Hs,!0);break}o.events.fire(Sc.Bs,t,!0);break;case"sync_login":n=t,4<i||(i++,n&&!o.config.user.logged_in?o.events.fire(Mc.Ml):!n&&o.config.user.logged_in&&o.events.fire(Mc.Rl));break;case"sync_active":null!==t&&t!==o.config.request.session&&o.config.embed.autopause&&o.events.fire(Mc.Gl)}var n}return o.events.on(Mc.sc,function(e,t){t||n("quality",e)}),o.events.on(Mc.ac,function(e,t){o.config.request.cookie.volume=Nu(e),t||n("volume",e)}),o.events.on(Mc.jc,function(e,t){if(e){e="".concat(e.language,".").concat(e.kind);return o.config.request.cookie.captions=Nu(e),void(t||n("captions",e))}o.config.request.cookie.captions=null,t||n("captions",null)}),o.events.on(Mc.wc,function(){o.config.embed.settings.background||(n("active",o.config.request.session),o.events.fire(Mc.zl))}),o.events.on([Mc.bc,Mc.uc],function(){a("active")===o.config.request.session&&n("active",null)}),o.events.on(Mc.Cl,function(){n("login",!0)}),e&&!Uu&&(s=o.config.request.urls.proxy,Uu=new ee(function(n,t){document.createElement("a").href=o.config.request.urls.proxy;var i=document.createElement("iframe");i.src=s,i.setAttribute("title","Vimeo LocalStorage Proxy"),i.setAttribute("aria-hidden","true"),i.setAttribute("hidden",""),i.onload=function(e){var t=nc(o.config.request.urls.proxy);i.contentWindow.postMessage({method:"ping"},t)},i.onerror=function(e){t(e)};var r=setTimeout(function(){t()},1e4);window.addEventListener("message",function e(t){0!==s.indexOf(t.origin)||"ready"!==t.data&&"ping"!==t.data||(window.removeEventListener("message",e,!1),clearTimeout(r),n(i))},!1),document.body.appendChild(i)})),e?window.addEventListener("message",function(e){var t=nc(o.config.request.urls.proxy);e.origin===t&&"object"===U(e.data)&&"key"in e.data&&"newValue"in e.data?r(e.data.key,e.data.newValue):e.origin===window.location.origin&&e.data.session!==o.config.request.session&&r(e.data.key,e.data.val)},!1):window.addEventListener("storage",function(t){if(0===t.key.indexOf("sync_")&&t.oldValue!==t.newValue){try{if(window.localStorage.getItem(t.key)!==t.newValue)return}catch(t){}try{r(t.key,JSON.parse(t.newValue))}catch(e){iu.captureException(e,{extra:{key:t.key,oldValue:t.oldValue,newValue:t.newValue}})}}},!1),{reset:function(){n("login",!!o.config.user.logged_in)}}}function Hu(e,t){return function(e,t){var n,i={feature:1<arguments.length&&void 0!==t?t:null,$deeplink_path:"app.vimeo.com/"+e,$always_deeplink:!0,ref:"player",context:"player"},r=[];for(n in i)r.push("".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(i[n])));return e=r.join("&"),"https://bnc.lt/a/".concat("key_live_jpj6Duy53e6MhounkriNljdgsBhGbf0d","?").concat(e)}("videos/".concat(e),t)}function Bu(f,n,t){var i,r,o,h,v,p=f.events,s=f.backbone,a=!f.config.embed.playsinline&&(An.mobileAndroid||An.iOS&&!An.iPad),c=8<=An.iOS&&!An.iPad,u=!1,l=!1,d=!1,m=!1,g=null,b=!1,y=!1,E=!1,w=!1,_=!1,T=!1;function e(e){s.element.classList.remove("invisible"),S()}function S(){var e=s.play();return(e=T?e.catch(A):e).catch(L).then(R)}function A(e){if(T=!1,k(e))return p.fire(Sc.As,!0),s.play();throw e}function k(e){return e&&("NotAllowedError"===e.name||"AbortError"===e.name)}function L(e){return p.fire(Mc.ic,e),new ee(function(){})}function R(){p.fire(Mc.ec)}function C(e){try{s.currentTime=e}catch(e){}}function x(){m||b||u&&s.paused&&S()}function I(){var e="none";("metadata"===f.config.request.flags.preload_video||a||8<=An.iOS)&&(e="metadata"),"auto"===f.config.request.flags.preload_video&&(e="metadata","MediaSourceScanner"===s.currentScannerName&&(e="auto")),s.preload=e,p.on(Mc._l,function(){f.config.request&&"metadata_on_hover"===f.config.request.flags.preload_video&&!d&&f.verifyConfig().then(function(){return s.preload="metadata",!0}).catch(function(e){})})}function O(){_=!1;var e=s.video;function t(){null===f.config.request.cookie.captions||"null"===f.config.request.cookie.captions||s.hasTextTrack(f.config.request.cookie.captions)&&p.fire(Sc.Bs,f.config.request.cookie.captions,!0)}s.loadVideo(f.config),e||(f.config.embed.texttrack?(e=f.config.embed.texttrack,s.hasTextTrack(e)&&p.fire(Sc.Bs,e,!0)):(p.on(fn.TEXT_TRACKS_AVAILABLE,function(){t()}),t()))}function D(e,t,n,i){var r;l&&((r=new XMLHttpRequest).open("DELETE","".concat(e,"/plays/").concat(t,"/").concat(n,"?token=").concat(i),!1),r.send(),l=!1)}function P(){f.config.embed.autoplay&&(n.get(Cu)&&!n.get(Ou)||p.fire(Mc.wc))}function M(){b=!0,d&&!w&&(u=u||!s.paused,s.pause(),p.fire(Mc.tr,s.currentTime))}function N(){b=!1,u&&!w&&(y||E||!a||p.fire(Sc.Vs),x())}function F(e){var t,n,i,r,o,s,a,c,u,l,d;h||e.name.includes("PlayInterrupted")||("TextTracksNotSupported"!==e.name?(iu.captureBreadcrumb(e.name,{message:e.message},"telecine error","error"),l=f.config.video.live_event?1:.001,"MediaUrlBadRequest"!==e.name||v||(v=!0,l=1,t=(u=(d=f.config.request).files).dash.cdns.fastly_skyfire.url,n=u.hls.cdns.fastly_skyfire.url,i=u.dash.cdns.akfire_interconnect_quic.url,r=u.hls.cdns.akfire_interconnect_quic.url,o=u.progressive.length?u.progressive[0].url:null,s=u.progressive.length?u.progressive[0].id:null,a=d.file_codecs,c=f.config.video.file_codecs,u=f.config.user.logged_in,d=d.build.js,iu.captureBreadcrumb(e.name,{fastly_dash_url:t,fastly_hls_url:n,akamai_dash_url:i,akamai_hls_url:r,prog_url:o,prog_id:s,file_codecs:a,video_file_codecs:c,logged_in:u,version:d},"MediaUrlBadRequest config","error")),-1!==e.name.indexOf("Mimir")&&(l=1,iu.captureBreadcrumb(e.name,e,"ABR","error")),(u=new Error(e.message)).name=e.name,iu.captureException(u,null,l),"function"==typeof(d=Vc[e.name])&&((u=d()).final&&p.off(un.ERROR,F),g=u.deferred?u.id:null,"DRMFailure"===e.name&&(l=f.config.request.dynamic_drm_translation_map,d=e.message.code,l&&d&&l[d]&&(u.title=l[d].title,u.message=l[d].msg),iu.captureBreadcrumb("DRM failure",e,"video")),p.fire(Mc.nc,u.id,u))):p.fire(Sc.Fs))}s.element.classList.add("invisible"),c&&s.element.classList.add("hide-webkit-controls"),f.config.video.live_event&&t.classList.add("live-background"),f.config.embed.transparent&&t.classList.add("transparent"),n.watch(xu,function(e){"started"===e&&setTimeout(function(){O(),s.element.classList.remove("invisible"),p.fire(Mc.wc)},12e3)}),n.watch(Pu,function(){f.loadVideo(f.config.video.id)}),n.watch("ui.video.scaleFactor",function(e){s.element.classList.toggle("vp-telecine-cover",1<e)}),function e(){p.once(Mc.$l,e),pc((s=f.backbone).on,p.fire,[Ko,zo,$o,Xo,Yo,Zo,Jo,Vo,Wo,Go,Ho,Bo,ln.ACTIVATED,ln.AVAILABLE,ln.DEACTIVATED,ln.UNAVAILABLE,ts.ARCHIVE_DONE,ts.EVENT_ACTIVE,ts.EVENT_ENDED,ts.EVENT_STARTED,ts.STREAM_OFFLINE,ts.STREAM_ONLINE,ts.BUFFER_GAP_JUMP,ts.BUFFER_GAP_JUMP_PREVENT,pn.MEDIASESSION_PAUSE,pn.MEDIASESSION_PLAY,pn.MEDIASESSION_SEEK_BACKWARD,pn.MEDIASESSION_SEEK_FORWARD,fn.AV_DURATION_MISMATCH,fn.BANDWIDTH,fn.BUFFER_ENDED,fn.BUFFER_OCCUPANCY,fn.BUFFER_STARTED,fn.CHAPTER_CUES_UPDATED,fn.CUE_POINT,fn.CURRENT_FILE_CHANGE,fn.DOWNLOAD_END,fn.DOWNLOAD_TIMEOUT,fn.DRM_AUTH_SUCCESS,fn.DRM_KEY_SWITCH,fn.DROPPED_FRAMES,fn.MANIFEST_LOADED,fn.MANIFEST_TIMEOUT,fn.QUOTA_EXCEEDED_ERROR,fn.SCANNER_CHANGE,fn.STREAM_BUFFER_START,fn.STREAM_CHANGE,fn.STREAM_CHANGE_START,fn.STREAM_TARGET_CHANGE,fn.TEXT_TRACKS_AVAILABLE,vn.CAMERA_CHANGE,vn.CAMERA_UPDATE,vn.MOTION_END,vn.MOTION_START,vn.SPATIAL_UNSUPPORTED,vn.WEBVR_ENTER,vn.WEBVR_EXIT,vn.WEBVR_HARDWARE_AVAILABLE,mn.BRAIN_ML_SWITCH_TO_SKYFIRE,mn.BRAIN_ML_MODEL_INPUTS,un.DURATION_CHANGE,un.ENDED,un.ERROR,un.LOAD_START,un.LOADED_DATA,un.LOADED_METADATA,un.PAUSE,un.PLAY,un.PLAYING,un.PROGRESS,un.RATE_CHANGE,un.RESIZE,un.SEEKED,un.SEEKING,un.STALLED,un.TIME_UPDATE,un.VOLUME_CHANGE,un.WAITING,un.ENTER_PICTURE_IN_PICTURE,un.LEAVE_PICTURE_IN_PICTURE])}(),pc(bu.on,p.fire,[pu.connected,pu.disconnected]),I(),p.on(un.LOADED_METADATA,function(e){f.config.video.duration=s.duration,f.config.video.video_width=s.videoWidth,f.config.video.video_height=s.videoHeight}),p.on(un.DURATION_CHANGE,function(e){f.config.video.duration=s.duration}),p.on(fn.SCANNER_CHANGE,function(){I(),setTimeout(function(){p.fire(s.supportsSettingVolume?Sc.Ns:Sc.Ps),p.fire(s.supportsTextTracks?Sc.Us:Sc.Fs)},0),iu.captureBreadcrumb("Scanner changed to ".concat(s.currentScannerName),{},"video")}),p.on([ts.EVENT_ACTIVE,ts.EVENT_STARTED,ts.EVENT_ENDED,ts.ARCHIVE_DONE],function(e){Object.assign(f.config.video.live_event,e),n.dispatch({type:"LIVE_UPDATE",payload:e})}),p.on(Mc.wc,function(){f.displayContext!==f.backbone?f.displayContext.play():function(){if("disable"!==f.config.video.privacy&&f.config.video.spatial&&An.iOS&&!_||s.element.classList.remove("invisible"),g)return p.fire(Mc.nc,g),f.preview.show();if(u=!0,b)f.preview.show();else{if(s.off(un.PLAY,e),a&&(y=!0,p.fire(Sc.Vs)),n.get(Ou)&&(T=!0),!d)return f.config.video.spatial&&An.iOS&&!_?(_=!0,p.fire(Sc._showOverlay,"app-redirect",{redirectUrl:f.doNotTrackEnabled?f.config.video.share_url:Hu(f.config.video.id,"player-spatial-redirect"),title:null,buttonText:"Watch in the Vimeo app",ignoreText:null,bottomText:"360 not supported in this browser",newWindow:!f.config.embed.on_site}),p.once(un.PLAY,e)):S().then(function(){!s.muted||!n.get(Ou)&&s.supportsSettingVolume||p.fire(Mc.Bc)}).catch(console.error);d&&x()}}()}).on(Mc.bc,function(){u=!1,f.displayContext.pause()}).on(Mc.Gl,function(){(window.location.search.indexOf("autopause=0")<0&&!s.paused&&!f.config.embed.settings.background||u)&&(u=!1,p.fire(Mc.bc))}),p.on(un.ERROR,function(e){if(k(e)&&!T){if(f.config.embed.autoplay=0,s.pause(),f.config.embed.time)return C(f.config.embed.time),void p.fire(Mc.tr,s.currentTime);0!==s.currentTime?p.fire(Mc.tr,s.currentTime):p.fire(Sc.Rs)}}),p.on(un.PLAY,function(e){s.element.classList.remove("invisible")}),p.on(un.PAUSE,function(e,t){m||p.fire(Mc.tr,e,t)}),p.on(un.TIME_UPDATE,function(e){e.currentTime}),p.on(un.ENDED,function(e){m||f.config.embed.loop||(y&&p.fire(Mc.mc),u=!1,p.fire(Mc.uc,e))}),p.on(fn.DRM_AUTH_SUCCESS,function(){l=!0}),p.on(Vo,function(){d=!0,p.once(un.TIME_UPDATE,function(){p.fire(Mc.hc)})}),p.on(fn.BUFFER_STARTED,function(){m||p.fire(wc._s)}),p.on(mn.BRAIN_ML_SWITCH_TO_SKYFIRE,function(){"ml_brain"in f.config.request.ab_tests&&delete f.config.request.ab_tests.ml_brain}),v=h=!1,window.addEventListener("unload",function(){h=!0},!1),p.on(un.ERROR,F),p.on("test-error",F),p.on(Sc.Is,function(e){e=!!e&&(!An.iOS||10<=An.iOS);f.config.embed.loop=e,s.loop=e}),p.fire(Sc.Is,f.config.embed.loop),p.on(Mc._c,function(e,t){f.events.fire(Mc.kc,t),f.events.fire(Sc.Ts,null,e),d||p.fire(Mc.wc)}),p.on(Mc.xc,function(){b||(u=!s.paused,m=!0,s.pause())}),p.on(Mc.Ac,function(e){m=!1,d?e||x():p.fire(Mc.wc)}),p.on(Sc.Ts,function(e,t){b||(t=t||(s.duration||f.config.video.duration)*rc(e,0,1),e=s.duration?t/s.duration:0,p.fire(Sc.Xs,t,e))}),p.on(Sc.Xs,function(e){C(e)}),function(){p.on(Sc.Ss,function(e,t,n){n&&(e+=s.volume),e=rc(e,0,1),f.displayContext!==s&&(f.displayContext.volume=e),s.volume=e,s.muted=0===e,f.events.fire(Mc.ac,e,t)}),p.on(Sc.As,function(e){s.muted=!!e,f.events.fire(Mc.ac,s.volume,!0)}),p.on(un.VOLUME_CHANGE,function(){return p.fire(Mc.ac,s.volume,!0)});var e=f.config.request.cookie.volume;p.fire(Sc.Ss,e,!0),p.fire(Sc.As,f.config.embed.muted)}(),p.on(Sc.Os,function(e,t){s.video.currentFile.mime!==Tc&&!n.get(Ou)||(t=!0),o=t,s.quality=e}),p.on(Wo,function(e){p.fire(Mc.sc,e,o)}),r=s.playbackRate,p.on(un.RATE_CHANGE,function(e){s.playbackRate!==r&&(p.fire(Mc.dc,s.playbackRate,r),r=s.playbackRate)}),p.on(Sc.Zs,function(e){s.playbackRate=e}),p.on(Mc._loadVideo,function(){try{s.playbackRate=1}catch(e){}}),p.on(Mc.Qc,M),p.on(Mc.tl,N),p.on(Mc.Oc,function(e,t){t.isCentered()&&(t.isVisible()?M:N)()}),p.on(Mc.sl,function(e){d&&!w&&(u=!s.paused,s.pause())}),p.on(Mc.fl,function(e){w||x()}),p.on(Mc.qc,function(e,t){s.element.classList.remove("hide-webkit-controls"),e&&(E=!0),e||(d||An.browser.safari||(s.poster=f.preview.getThumbnail()),y=!0,setTimeout(function(){s.textTracks.forEach(function(e){"hidden"===e.mode&&(e.mode="showing")})},500)),t||!An.windowsPhone||An.browser.edge||p.fire(Sc.qs,!0)}),p.on(Mc.zc,function(e){s.poster="",e||s.pause(),d||s.element.classList.add("invisible"),E=y=!1,c&&s.element.classList.add("hide-webkit-controls"),s.textTracks.forEach(function(e){"showing"===e.mode&&(e.mode="hidden")})}),p.on(Vo,function(){s.poster=""}),p.on(Sc.qs,function(e){return e?(s.controls=!0,void t.classList.add("native-controls")):(s.controls=!1,void t.classList.remove("native-controls"))}),p.on(Mc.Ul,function(){O()}),p.on(Mc.jl,function(){O(),P()}),p.on(Sc.Rs,function(){s.unload(),p.fire(Mc.tr,s.currentTime),f.preview.show(),s.element.classList.add("invisible"),u=d=!1,g=null}),p.on(Sc.Bs,function(e){i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];try{f.config.request.flags.ott&&s.videoElement&&s.videoElement.setAttribute("crossorigin","anonymous"),s.enableTextTrack(e)}catch(e){}}).on(Sc.Hs,function(){i=0<arguments.length&&void 0!==arguments[0]&&arguments[0],f.config.request.flags.ott&&s.videoElement&&s.videoElement.removeAttribute("crossorigin"),s.disableTextTrack()}),p.on(Ko,function(e,t){p.fire(Mc.jc,e,i||t)}),p.on(ln.AVAILABLE,function(e){e=e.type;f.config.request.drm||"AirPlay"===e&&p.fire(Mc.yf)}),p.on(ln.UNAVAILABLE,function(e){e=e.type;f.config.request.drm||"AirPlay"===e&&p.fire(Mc.gf)}),p.on(ln.ACTIVATED,function(e){e=e.type;"AirPlay"===(w=!0,e)&&p.fire(Mc._f)}),p.on(ln.DEACTIVATED,function(e){e=e.type;"AirPlay"===(w=!1,e)&&p.fire(Mc.kf)}),p.on(Mc.Ef,function(){s.showExternalDisplayPicker("AirPlay")}),p.on(Sc.Gs,function(){s.supportsPresentationMode("picture-in-picture")&&(s.presentationMode="picture-in-picture")}),p.on(Sc.Ks,function(){s.supportsPresentationMode("picture-in-picture")&&(s.presentationMode="inline")}),O(),An.spatialPlayback?(p.fire(Sc.Ys),p.on([un.PLAY,un.SEEKED],function(){p.fire(Sc.$s)}),p.on(vn.SPATIAL_UNSUPPORTED,function(){d?p.fire(wc.Es,b):p.once(Mc.hc,function(){p.fire(wc.Es,b)})})):p.once(Mc.hc,function(){f.config.video.spatial&&p.fire(wc.ks,b)}),window.addEventListener("beforeunload",function(){var e=f.config.request.drm;e&&D(e.hoover_url,e.user,e.asset,e.hoover_token)},!1),p.on(Mc._loadVideo,function(){var e=f.config.request&&f.config.request.drm;e&&D(e.hoover_url,e.user,e.asset,e.hoover_token)}),f.events.on(Sc.Qs,function(){return s.destroy()}),f.ready().then(function(){return setTimeout(P,0),0<f.config.embed.time&&p.fire(Sc.Xs,f.config.embed.time,f.config.embed.time/s.duration),null}).catch(function(e){}),p.fire(Mc.hf)}var Vu,Wu=0,$u=0,zu={},Ku={};function Gu(e,t,n,i){if(this.element){e instanceof Array||(e=[e]),n||"function"!=typeof t||(n=t,t="_root");for(var r=this.id,o=0;o<e.length;o++)i?function(e,t,n,i){if(zu[e.id])if(t)if(i||n)if(i){if(zu[e.id][t][n])for(var r=0;r<zu[e.id][t][n].length;r++)if(zu[e.id][t][n][r]===i){zu[e.id][t][n].splice(r,1);break}}else delete zu[e.id][t][n];else zu[e.id][t]={};else for(var o in zu[e.id])zu[e.id].hasOwnProperty(o)&&(zu[e.id][o]={})}(this,e[o],t,n):(zu[r]&&zu[r][e[o]]||Yu.addEvent(this,e[o],function(t){return function(e){!function(e,t,n){if(zu[e][n]){var i,r,o=t.target||t.srcElement,s={},a=0,c=0;for(i in Wu=0,zu[e][n])zu[e][n].hasOwnProperty(i)&&(r=function e(t,n,i){return"_root"==n?i:t!==i?(r=t,(Vu=Vu||r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||Yu.matchesSelector).call(t,n)?t:t.parentNode?(Wu++,e(t.parentNode,n,i)):void 0):void 0;var r}(o,i,Ku[e].element))&&Yu.matchesEvent(n,Ku[e].element,r,"_root"==i,t)&&(Wu++,zu[e][n][i].match=r,s[Wu]=zu[e][n][i]);for(t.stopPropagation=function(){t.cancelBubble=!0},a=0;a<=Wu;a++)if(s[a])for(c=0;c<s[a].length;c++){if(!1===s[a][c].call(s[a].match,t))return Yu.cancel(t);if(t.cancelBubble)return}}}(r,e,t)}}(e[o])),s=this,a=e[o],c=t,u=n,zu[s.id]||(zu[s.id]={}),zu[s.id][a]||(zu[s.id][a]={}),zu[s.id][a][c]||(zu[s.id][a][c]=[]),zu[s.id][a][c].push(u));return this}var s,a,c,u}function Yu(e,t){if(!(this instanceof Yu)){for(var n in Ku)if(Ku[n].element===e)return Ku[n];return Ku[++$u]=new Yu(e,$u),Ku[$u]}this.element=e,this.id=t}Yu.prototype.on=function(e,t,n){return Gu.call(this,e,t,n)},Yu.prototype.off=function(e,t,n){return Gu.call(this,e,t,n,!0)},Yu.matchesSelector=function(){},Yu.cancel=function(e){e.preventDefault(),e.stopPropagation()},Yu.addEvent=function(e,t,n){var i="blur"==t||"focus"==t,i=An.passiveEvents?{capture:i,passive:!1}:i;e.element.addEventListener(t,n,i)},Yu.matchesEvent=function(){return!0};var Ju=Yu.addEvent,Xu=void 0===window.PointerEvent&&void 0!==window.MSPointerEvent,Zu={pointerdown:"MSPointerDown",pointerup:"MSPointerUp",pointercancel:"MSPointerCancel",pointermove:"MSPointerMove",pointerenter:"MSPointerEnter",pointerleave:"MSPointerLeave",pointerover:"MSPointerOver",pointerout:"MSPointerOut"},Qu="onmspointerenter"in document,el="onmspointerleave"in document;function tl(h,v){var o,s,p,r,a,t,n=0,m={},c=new Gc;function u(){return Date.now?Date.now():(new Date).getTime()}function i(){o=!1,s=h.backbone?h.backbone.currentTime:0,a=r=p=0,t=!1}function g(i,r,o,s){h.verifyConfig().then(function(){var e=r;e.signature=h.config.request.signature,e.session=h.config.request.session,e.time=h.config.request.timestamp,e.expires=h.config.request.expires;var t=JSON.stringify(e);if(null===e.sessionTime&&(iu.captureBreadcrumb("sessionTime is null breadcrumbs",{endpoint:i,allParams:e}),iu.captureException("sessionTime is null when making stats request")),!h.config.request.urls.player_telemetry_url)throw new Error("Stats logging failed due to lack of telemetry host");var n=h.config.request.urls.player_telemetry_url+i;return c.logRequestPromiseWithUrl(n,t,!o).then(function(e){200!==e.status&&s<2&&(410!==e.status?setTimeout(function(){g(n,r,o,s+1)},1e3):h.events.once(Mc.Ul,function(){g(n,r,o,s+1)}))}).catch(function(e){throw e})}).catch(function(e){})}function l(s,a,c){var u=h.backbone.currentFile||{},e=u.id,l=void 0===e?0:e,t=u.mime,d=void 0===t?"video/mp4":t,e=u.metadata,t=(e=void 0===e?{}:e).profile,f=void 0===t?-1:t;d===Tc&&(t=(e=m).id,l=void 0===t?0:t,e=e.profile,f=void 0===e?-1:e),h.performDelegateAction(Pc,function(e){function t(e){var t;g(s,X(X({referrer:h.config.request.referrer,embed:!h.config.embed.on_site,context:h.config.embed.context,autoplay:n.continuous?2:h.config.embed.autoplay,loop:h.config.embed.loop?1:0,id:h.config.video.id,vodId:null!=(t=h.config.video.vod)&&t.id?h.config.video.vod.id:null,vodSaleId:null!=(t=h.config.video.vod)&&t.sale_id?h.config.video.vod.sale_id:null,sessionTime:uc(p),videoShape:h.config.video.spatial?"mono"!==h.config.video.spatial.stereo_mode?2:1:0,spatialPlayback:(t=h.backbone.getEffectByName("ThreeSixtyEffect"),An.spatialPlayback&&t?t.isStereo()?2:1:0),userId:h.config.user.id,userAccountType:h.config.user.account_type,userIsMod:h.config.user.mod?1:0,teamOriginUserId:h.config.user.team_origin_user_id||null,teamId:h.config.user.team_id||null,ownerId:h.config.video.owner.id,ownerAccountType:h.config.video.owner.account_type,privacy:h.config.video.privacy,rating:h.config.video.rating?h.config.video.rating.id:null,type:"html",videoFileId:Number.isInteger(Number(l))?l:"0",delivery:Fc[d],profileId:f,quality:u.metadata?u.metadata.quality:null,duration:uc(h.config.video.duration),seconds:uc(a)},e),{},{playbackRate:h.backbone.playbackRate,build:Qc(h.config)}),c)}var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=v.get(Du)?1:0,r=v.get(Iu),o={isLive:i};if(i){if(!r)return void qi("https://".concat(h.config.vimeo_url,"/live_event/status?clip_id=").concat(h.config.video.id)).json().then(function(e){return e&&e.ingest&&(v.dispatch(Tu(e.ingest.start_time)),r=v.get(Iu)),r&&(o.liveStartTime=r),t(o),e}).catch(function(e){});o.liveStartTime=r}t(o)})}function d(e,t,n){var i=0<arguments.length&&void 0!==e?e:0,e=1<arguments.length&&void 0!==t&&t,t=!(2<arguments.length&&void 0!==n)||n;h.playLoggingEnabled&&(n=u(),t&&n<r+1e3||(r=n,t&&!h.config.request.flags.partials||o||l("/log/partial",i,e)))}function f(e,t){var n;t=t||{};var i,r={referrer:h.config.request.referrer,embed:!h.config.embed.on_site,context:h.config.embed.context,id:h.config.video.id,vodId:null!=(n=h.config.video.vod)&&n.id?h.config.video.vod.id:null,vodSaleId:null!=(n=h.config.video.vod)&&n.sale_id?h.config.video.vod.sale_id:null,userId:h.config.user.id,userAccountType:h.config.user.account_type,userIsMod:h.config.user.mod?1:0,ownerId:h.config.video.owner?h.config.video.owner.id:0,duration:uc(h.config.video.duration),seconds:uc(h.backbone.currentTime),playbackRate:h.backbone.playbackRate,build:Qc(h.config)};for(i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);g("/log/"+e,r)}return i(),function(){h.events.on(un.TIME_UPDATE,function(e){var t=e.currentTime,n=(e.duration,e.timeProgress,e.playbackRate),e=Math.floor(t);!o&&a+1e3<u()&&(s<t&&(p+=(t-s)/n),s=t),e%30==0&&d(t)}),h.events.on(Mc.dc,function(e,t){f("playback_rate_change",{oldPlaybackRate:t}),d(h.backbone.currentTime)}),h.events.on(Vo,function(){!t&&h.playLoggingEnabled&&(t=!0,l("/log/play",0))}),h.events.on(Mc.tr,function(e){h.backbone.ended||d(e)}),h.events.on(un.SEEKED,function(e){e=e.currentTime;n=e,o||d(n)}),h.events.on(Mc.xc,function(){a=u(),o=!0}),h.events.on(Mc.Ac,function(){s=h.backbone.currentTime,o=!1,d(n)}),h.events.on(Mc.yc,function(){d(h.backbone.currentTime)}),h.events.on(Mc.uc,function(){p+=h.config.video.duration-s,d(h.config.video.duration,!1,!1)}),h.events.on(fn.STREAM_CHANGE,function(e){m=e});var i=[],r=!1;function e(){i.length&&h.performDelegateAction(Pc,function(e){var t;g("/log/spatial",{embed:!h.config.embed.on_site,id:h.config.video.id,context:h.config.embed.context,ownerId:h.config.video.owner?h.config.video.owner.id:0,referrer:h.config.request.referrer,vodId:null!=(t=h.config.video.vod)&&t.id?h.config.video.vod.id:null,vodSaleId:null!=(t=h.config.video.vod)&&t.sale_id?h.config.video.vod.sale_id:null,userId:h.config.user.id,userAccountType:h.config.user.account_type,userIsMod:h.config.user.mod?1:0,teamOriginUserId:h.config.user.team_origin_user_id||null,teamId:h.config.user.team_id||null,build:Qc(h.config),motionLog:JSON.stringify(i)},!1)})}h.events.on(vn.MOTION_START,function(){r=!0,function e(){var t=h.backbone.getEffectByName("ThreeSixtyEffect").currentCoordinates,n=Math.round(100*t.lat)/100,t=Math.round(100*t.long)/100,t={sessionTime:p,videoTime:h.backbone.currentTime,coordinates:{lat:n,lon:t}};i.push(t),setTimeout(function(){r&&e()},1e3)}()}),h.events.on(vn.MOTION_END,function(){r=!1,e()}),h.events.on(Mc._loadVideo,function(){e(),i=[]}),window.addEventListener("unload",function(){h.backbone&&0<h.backbone.currentTime&&(d(h.backbone.currentTime,!0,!1),e())},!1)}(),[{type:"share_press",event:Mc.Yc},{type:"facebook_press",event:Mc.el},{type:"twitter_press",event:Mc.rl},{type:"tumblr_press",event:Mc.ol},{type:"email_press",event:Mc.ul},{type:"embed_press",event:Mc.Jc},{type:"login_success",event:Mc.Cl},{type:"airplay",event:Mc._f},{type:"vod_press",event:Mc.$c},{type:"collection_press",event:Mc.Xc},{type:"email_capture_submitted",event:Mc.ll}].forEach(function(e){var t;h.events.on(e.event,(t=e.type,function(){f(t)}))}),h.events.on(Mc.Hl,function(e){var t={outroType:h.config.embed.outro,ownerAccountType:h.config.video.owner.account_type,playerWidth:h.element.clientWidth,playerHeight:h.element.clientHeight};null!=e&&e.length&&(t.outroVideos=e.join(",")),f("outro_displayed",t)}).on(Mc.Wl,function(e){f("outro_video_press",{ownerAccountType:h.config.video.owner.account_type,videoId:e})}).on(Mc.Zc,function(){f("outro_follow_press",{add:!h.config.user.following})}).on(Mc.if,function(e){f("outro_cta_press",{ownerAccountType:h.config.video.owner.account_type,link:e})}).on(Mc.Xl,function(e){f("outro_link_press",{ownerAccountType:h.config.video.owner.account_type,link:e})}).on(Mc.nf,function(e){f("outro_image_press",{ownerAccountType:h.config.video.owner.account_type,link:e})}).on(Mc.Gc,function(){f("like_press",{add:!h.config.user.liked})}).on(Mc.Kc,function(){f("watch_later_press",{add:!h.config.user.watch_later})}).on(Mc.sl,function(e){0===e.indexOf("login-")&&f("login_attempt")}).on(Mc.jc,function(e,t){t||(e?f("text_track_change",{textTrackLanguage:e.language,textTrackKind:e.kind}):f("text_track_change"))}).on(Mc.Vc,function(e){1!==e&&12!==e||f("badge_press",{badgeId:e})}).on(Mc.Qc,function(e){"email-capture"===e&&f("email_capture_displayed")}).on(Mc.tl,function(e){"email-capture"===e&&f("email_capture_dismissed")}).on(Mc.rf,function(e){f("card_press",{ownerAccountType:h.config.video.owner.account_type,cardId:e,cardType:"link"})}).on(Mc.ef,function(e,t){h.config.embed.editor||f("card_displayed",{ownerAccountType:h.config.video.owner.account_type,cardId:e,cardType:t.url?"link":"text"})}),h.events.on(Mc.jl,function(e){e&&i()}),h.events.fire(Mc.pf),{}}Yu.addEvent=function(e,t,n){"transitionend"===(t=Xu&&Zu[t]?Zu[t]:t)&&(Ju(e,"webkitTransitionEnd",n),Ju(e,"otransitionend",n)),Ju(e,t="MSPointerLeave"===(t="MSPointerEnter"===(t="mouseleave"===(t="mouseenter"===t?"mouseover":t)?"mouseout":t)&&!Qu?"MSPointerOver":t)&&!el?"MSPointerOut":t,n)},Yu.matchesEvent=function(e,t,n,i,r){return!(("mouseenter"===e||"mouseleave"===e||!Qu&&"MSPointerEnter"===e||!el&&"MSPointerLeave"===e)&&(n=n,r.relatedTarget&&(i&&t!==n||n===r.relatedTarget||n.contains(r.relatedTarget))))};var nl={settings:{}};function il(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:nl,t=1<arguments.length?arguments[1]:void 0,n=t.type,t=t.payload;return"CONFIG_LOAD"!==n?e:X(X({},e),t.embed)}N=Object.freeze({__proto__:null,default:il,transparent:function(e){return e.embed.transparent}});function rl(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length?arguments[1]:void 0,n=t.type,t=t.payload;return"CONFIG_LOAD"!==n?e:X(X({},e),t.video)}var ol=function(e){return e.video.height/e.video.width},n=Object.freeze({__proto__:null,default:rl,ratio:ol});function sl(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length?arguments[1]:void 0,n=t.type,t=t.payload;return"CONFIG_LOAD"!==n?e:t.video.webinar?X(X({},e),t.video.webinar):null}function al(e){return!!e.webinar}function cl(e){return"ended"===(null==(e=e.webinar)?void 0:e.status)}function ul(e){return null==(e=e.webinar)?void 0:e.registrationForm}var ll=function(e){return al(e)&&!cl(e)&&!gs(ul(e))},Ee=Object.freeze({__proto__:null,default:sl,isWebinar:al,isWebinarEnded:cl,webinarRegistrationForm:ul,showWebinarRegistrationForm:ll});function dl(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length?arguments[1]:void 0;return"CONTAINER_RESIZE"!==t.type?e:X(X({},e),{},{width:t.payload.width,height:t.payload.height})}var fl=function(e){return e.ui.container.width},hl=function(e){return e.ui.container.height},g=Object.freeze({__proto__:null,default:dl,width:fl,height:hl});function vl(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length?arguments[1]:void 0;return"PREVIEW_SET_SIZE"!==t.type?e:X(X({},e),{},{width:t.payload.width,height:t.payload.height})}ht=Object.freeze({__proto__:null,default:vl,scaleFactor:function(e){return ic({width:e.ui.preview.width,height:e.ui.preview.height,elementWidth:Ml(e),elementHeight:Nl(e)}).scaleFactor}});function pl(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length?arguments[1]:void 0;return"CARDS_SET_SIZE"!==t.type?e:X(X({},e),{},{size:t.payload})}function ml(e){return 0<e.ui.cards.size&&200<=e.ui.container.width&&e.ui.container.width<415}function gl(e){return Math.min((hl(e)-Il(e))/ol(e),fl(e))}function bl(e){return Math.min(fl(e)*ol(e)+Il(e),hl(e))}function yl(e){return 1<Ol(e)}function El(e){return(e.embed.transparent&&!yl(e)?bl:hl)(e)}function wl(e){return Nl(e)>Ml(e)}function _l(e){var t=Ml(e),n=Nl(e);if(wl(e))return t<225;var i=gs(e.embed.settings.customLogo)&&t<300||n<169,n=!gs(e.embed.settings.customLogo)&&(t<338||n<190);return i||n}function Tl(e){var t=Ml(e);if(wl(e))return t<300;var n=gs(e.embed.settings.customLogo)&&t<=375,t=!gs(e.embed.settings.customLogo)&&t<=450;return n||t}function Sl(e){return e=Ml(e),Pl.xxs<=e&&e<Pl.xs}function Al(e){return e=Ml(e),Pl.xs<=e&&e<Pl.sm}function kl(e){return e=Ml(e),Pl.sm<=e&&e<Pl.md}function Ll(e){return e=Ml(e),Pl.md<=e&&e<Pl.lg}function Rl(e){return e=Ml(e),Pl.lg<=e&&e<Pl.xl}function Cl(e){return e=Ml(e),Pl.xl<=e&&e<Pl.xxl}function xl(e){return Ml(e)>=Pl.xxl}var De=function(e){return ml(e)?60:0},qe=Object.freeze({__proto__:null,default:pl,isCarouselVisible:ml,isCardsThumbVisible:function(e){return 0<e.ui.cards.size&&300<=e.ui.container.width},getCarouselHeight:De}),C=t(function(e,t){function r(e,t){return e===t}function l(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:r,n=null,i=null;return function(){return function(e,t,n){if(null!==t&&null!==n&&t.length===n.length){for(var i=t.length,r=0;r<i;r++)if(!e(t[r],n[r]))return;return 1}}(t,n,arguments)||(i=e.apply(null,arguments)),n=arguments,i}}function n(c){for(var e=arguments.length,u=Array(1<e?e-1:0),t=1;t<e;t++)u[t-1]=arguments[t];return function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=0,r=t.pop(),o=function(e){if((e=Array.isArray(e[0])?e[0]:e).every(function(e){return"function"==typeof e}))return e;throw e=e.map(function(e){return typeof e}).join(", "),new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+e+"]")}(t),s=c.apply(void 0,[function(){return i++,r.apply(null,arguments)}].concat(u)),a=l(function(){for(var e=[],t=o.length,n=0;n<t;n++)e.push(o[n].apply(null,arguments));return s.apply(null,e)});return a.resultFunc=r,a.recomputations=function(){return i},a.resetRecomputations=function(){return i=0},a}}t.rh=!0,t.defaultMemoize=l,t.createSelectorCreator=n,t.createStructuredSelector=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:o;if("object"!=typeof t)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof t);var i=Object.keys(t);return e(i.map(function(e){return t[e]}),function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t,n){return e[i[n]]=t,e},{})})};var o=t.createSelector=n(l)}),Il=De,Ol=function(e){return ic({width:gl(e),height:bl(e),elementWidth:fl(e),elementHeight:hl(e)}).scaleFactor},Se=function(e){return(e.embed.transparent&&!yl(e)?gl:fl)(e)},we=function(e){return e.embed.transparent&&!yl(e)?"contain":"100% 100%"},Dl=C.createSelector(Se,El,function(e,t){return{width:e,height:t}}),Ft=C.createSelector(ol,we,Il,function(e,t,n){return{ratio:e,size:t,bottom:n}}),Is=Object.freeze({__proto__:null,bottom:Il,scaleFactor:Ol,width:Se,height:El,size:we,boundingRect:Dl,settings:Ft}),Pl={xxs:0,xs:390,sm:600,md:960,lg:1280,xl:1600,xxl:1920},Ml=Se,Nl=function(e){return El(e)-Il(e)},De=C.createSelector(Ml,Nl,function(e,t){return{width:e,height:t}}),we=Object.freeze({__proto__:null,breakpoints:Pl,width:Ml,height:Nl,boundingRect:De,isTinyMode:_l,isMiniMode:Tl,mode:function(e){return _l(e)?"tiny":Tl(e)?"mini":"normal"},xxs:Sl,xs:Al,sm:kl,md:Ll,lg:Rl,xl:Cl,xxl:xl,breakpoint:function(t){var n={xxs:Sl,xs:Al,sm:kl,md:Ll,lg:Rl,xl:Cl,xxl:xl};return Object.keys(Pl).find(function(e){return n[e](t)})}}),Dl=Object.freeze({__proto__:null,scaleFactor:function(e){return ic({width:e.video.width,height:e.video.height,elementWidth:Ml(e),elementHeight:Nl(e)}).scaleFactor}}),Ft=Object.freeze({__proto__:null,size:function(e){return Math.max(10,Math.round(.045*Nl(e)))}}),Se=Object.freeze({__proto__:null,isLinkTitleVisible:function(e){e=e.ui;return 360<=e.container.width&&203<=e.container.height||415<=e.container.width},isLinkDescriptionVisible:function(e){e=e.ui;return 360<=e.container.width&&340<=e.container.height||415<=e.container.width&&234<=e.container.height}}),C=Object.freeze({__proto__:null,isEmailCaptureVisible:function(e){e=e.ui;return 300<=e.container.width&&169<=e.container.height}}),De=Object.freeze({__proto__:null,isPrefsMenuCentered:function(e){return An.touch&&Ml(e)<415}});function Fl(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length?arguments[1]:void 0;return{container:dl(e.container,t),preview:vl(e.preview,t),cards:pl(e.cards,t)}}Ft=Object.freeze({__proto__:null,default:Fl,container:g,layout:Is,player:we,preview:ht,video:Dl,cards:qe,outro:Se,overlay:C,controlbar:De,captions:Ft});function ql(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length?arguments[1]:void 0,n=X(X({},function(e,t){return e=0<arguments.length&&void 0!==e?e:{},"CONFIG_LOAD"!==(t=1<arguments.length?t:void 0).type?e:X(X({},e),t.payload)}(e,t)),{},{embed:il(e.embed,t),video:rl(e.video,t),liveEvent:Su(e.liveEvent,t),webinar:sl(e.webinar,t)});return X(X({},n),{},{ui:Fl(e.ui,t,n)})}var Ul=Object.freeze({__proto__:null,default:ql,embed:N,video:n,liveEvent:Ue,ui:Ft,webinar:Ee});function jl(e,t,i){var n=!1,r=!1;function o(e){i.style.fontSize="".concat(e,"px")}function s(){i.classList.add("hidden"),i.setAttribute("hidden","")}function a(){"picture-in-picture"!==e.backbone.presentationMode&&(e.config.embed.settings.background||(i.classList.remove("hidden"),i.removeAttribute("hidden")))}return e.events.on(zo,function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];if(function(e){for(var n,e=0<arguments.length&&void 0!==e?e:[];i.firstChild;)i.removeChild(i.firstChild);e.length&&(n=document.createDocumentFragment(),e.forEach(function(e){var t=document.createElement("span"),e=e.html;t.innerHTML=e,n.appendChild(t)}),i.appendChild(n))}(t),t.length)return n?void a():void(r=!0);s()}).on(Mc.jc,function(e){return e?(i.setAttribute("lang",e.language),void i.setAttribute("dir",e.rtl?"rtl":"ltr")):(i.removeAttribute("dir"),void i.removeAttribute("lang"))}).on(Vo,function(){n=!0,r&&(r=!1,a())}).on(Xo,function(){s()}).on(Zo,function(){a()}).on(Sc.Rs,function(){n=!1,s()}),t.watch("ui.captions.size",o),o(t.get("ui.captions.size")),e.events.on(Mc.Rc,function(e){e?i.classList.add("with-controls"):i.classList.remove("with-controls")}),e.events.on(Mc.Qc,function(){i.classList.add("invisible")}).on(Mc.tl,function(){i.classList.remove("invisible")}),e.events.on(Mc.uc,function(){"nothing"!==e.config.embed.outro&&i.classList.add("invisible")}).on([un.PLAY,Mc.xc],function(){i.classList.remove("invisible")}),{}}var Hl=t(function(e){var n;(n={templates:{},render:function(e,t){return n.templates[e]?n.templates[e].call(n,t||{}):""},map:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},escape:function(e){return null==e?"":String(e).replace(/[&<>"'\\/]/g,function(e){return n.map[e]})},helpers:{}}).templates.adcountdown=function(e){return'<div class="vp-ads-tag hidden"><span class="vp-ads-countdown"></span></div>'},n.templates.notice=function(e){return"<h3><span>"+e.strings.text+"<span></h3>"},n.templates.stream_studder=function(e){return"<h3> "+(this.render("icon_warning")||"")+' <span>Having issues? <button type="button" class="vp-alert-button-link button-link" aria-label="Switch to auto" data-alert-autofocus data-close data-context="suggestion">Switch to Auto</button> for smoother streaming.</span></h3>'},n.templates.warning_alert=function(e){var t="<h3> ";return(t+=this.render("icon_warning")||"")+" <span>"+e.strings.text+"<span></h3>"},n.templates.badge=function(e){var t="";return e.badge&&(e.badge.link&&(t+='<a href="'+e.badge.link+'"',e.targetBlank&&(t+=' target="_blank" rel="noopener"'),t+=' aria-describedby="new-window">'),t+=' <img src="'+e.badge.img+'"',e.badge.margin&&(t+=' style="margin:'+e.badge.margin+'"'),t+=' width="'+e.badge.width+'" height="'+e.badge.height+'" alt="'+e.badge.name+' Badge"> ',e.badge.link&&(t+="</a>"),t+=""),t+""},n.templates.buffer_pattern=function(e){return'<pattern id="'+e.id+'" patternUnits="userSpaceOnUse" x="0" y="0" width="10" height="10" viewBox="0 0 10 10"><line x1="5" y1="-1" x2="-5" y2="10" stroke-width="2" stroke="#666" stroke-linecap="butt" /><line x1="10" y1="-1" x2="0" y2="10" stroke-width="2" stroke="#666" stroke-linecap="butt" /><line x1="15" y1="-1" x2="5" y2="10" stroke-width="2" stroke="#666" stroke-linecap="butt" /></pattern>'},n.templates.card=function(e){var t='<div class="card';return e.className&&(t+=" "+e.className),e.teaser&&(t+=" card-hasDetail"),t+='"> ',e.url&&(t+='<a class="card-link" href="',t+=this.escape(e.url)||"",t+='" target="_blank" rel="noopener" aria-describedby="new-window">'),t+=' <div class="card-inner"> ',e.image&&(t+=' <div class="card-imageWrap js-cardImageWrap"><img class="card-image" src="'+e.image+'" alt=""></div> '),t+=' <div class="card-body"><h3 class="card-text card-text--title"><span>',t+=this.escape(e.headline)||"",t+="</span> ",e.url&&(t+=this.render("icon_card_arrow")||""),t+=" </h3> ",e.teaser&&(t+=' <p class="card-text card-text--detail"> ',t+=this.escape(e.teaser)||"",t+=" </p> "),t+=" </div></div> ",e.url&&(t+="</a>"),t+"</div>"},n.templates.chapter_marker=function(e){return'<div class="chapter-marker js-chapter-marker" data-time="'+e.chapter.startTime+'" style="left:'+e.chapter.startTime/e.duration*100+'%;"><div class="chapter-title-wrapper"><div class="chapter-title"><div class="js-chapter-content chapter-title-content-wrapper"><span class="chapter-number">'+e.index+"</span><span> "+(this.escape(e.chapter.text)||"")+" </span></div></div></div></div>"},n.templates.chapters=function(e){for(var t="",n=0;n<e.chapters.length;n++)t+=this.render("chapter_marker",{chapter:e.chapters[n],index:n+1,duration:e.duration})||"",t+="";return t+""},n.templates.compass=function(e){var t='<svg viewBox="0 0 36 36"> ';return 1==e.version?t+=' <circle class="compass-background" r="18" cx="18" cy="18"></circle><path class="compass-slice" transform="rotate(-45, 18, 18)" d="M0,0 m18,18 l12,0 A12,12 0 0,0 18,6 z"/><circle fill="none" class="compass-ring" stoke-width="3" r="14.5" cx="18" cy="18"></circle><polygon class="compass-dimple" points="16,3.5 18,1 20,3.5"/> ':t+=' <circle class="compass-background" r="18" cx="18" cy="18"></circle><path class="compass-slice" transform="rotate(-30, 18, 18)" d="M0,0 m18,18 l13,0 A13,13 0 0,0 11.500000000000004,6.741669750802297 z"/><circle class="compass-centercircle" r="3" cx="18" cy="18"></circle><path class="compass-line" stroke-linecap="round" d="M0,18 L36,18 z" /> ',t+"</svg>"},n.templates.controlbar_trailer=function(e){var t='<button type="button" class="play trailer rounded-box"><div><span class="play-icon">';return t+=this.render("icon_play")||"",t+="</span><p>"+e.text+"</p></div></button>",e.vimeoLogo.show&&(t+=' <div class="logo"> ',e.vimeoLogo.showLink&&(t+=' <a href="'+e.vimeoLogo.url+'"',e.targetBlank&&(t+=' target="_blank" rel="noopener"'),t+=' aria-label="'+e.strings.watchOnVimeo+'" aria-describedby="new-window" data-clip-link> '),t+=this.render("logo")||"",e.vimeoLogo.showLink&&(t+=" </a> "),t+=" </div>"),t+="",e.customLogo&&(t+=' <div class="custom-logo',e.customLogo.sticky&&(t+=" sticky"),t+='" style="width:'+e.customLogo.width+"px;height:"+e.customLogo.height+'px"> ',e.customLogo.showLink&&(t+='<a href="',t+=this.escape(e.customLogo.url)||"",t+='" target="_blank" rel="noopener" aria-describedby="new-window">'),t+=' <img src="'+e.customLogo.img+'" alt=""> ',e.customLogo.showLink&&(t+="</a>"),t+=" </div>"),t+""},n.templates.controlbar=function(e){var t='<button type="button" class="play rounded-box state-'+e.playState+'"><div class="tiny-bars"><svg width="100%" height="100%" viewBox="0 0 65 40" focusable="false"><defs><clipPath id="rounded-border"><rect height="100%" width="100%" x="0" y="0" rx="5"/></clipPath> ';return t+=this.render("buffer_pattern",{id:"tiny-buffer"})||"",t+=' </defs><g clip-path="url(#rounded-border)"><rect class="buffer hidden" height="3" width="110%" x="0" y="37" fill="url(#tiny-buffer)"/><rect class="loaded" height="3" width="0" x="0" y="37" fill="#666"/><rect class="played fill" height="3" width="0" x="0" y="37"/></g></svg></div><div class="play-icon">'+e.playIcon+'</div><div class="pause-icon">'+e.pauseIcon+'</div><div class="replay-icon">'+e.replayIcon+'</div></button><div class="play-bar rounded-box"> ',t+=this.render("live_status")||"",t+=this.render("live_viewer_count")||"",t+=' <div class="vp-progress"><div class="focus-target" role="slider" aria-label="Progress Bar" aria-valuemin="0" aria-valuemax="'+e.rawDuration+'" aria-valuenow="0" tabindex="0"></div><div class="loaded',e.rawDuration<60&&(t+=" short-video"),t+='"></div><div class="played"></div><div class="cuepoints"></div><div class="chapters"></div><div class="thumb-preview invisible hidden" role="presentation" aria-hidden="true"><div class="thumb"></div></div><div class="ghost-timecode invisible hidden" role="presentation" aria-hidden="true"><div class="box">00:00</div></div><div class="timecode" role="presentation" aria-hidden="true"><div class="box">'+e.duration+"</div></div></div> ",e.volume&&(t+=' <div class="volume" role="slider" title="'+e.strings.volume+'" aria-valuemin="0" aria-valuemax="1" tabindex="0"><div></div><div></div><div></div><div></div><div></div></div> '),e.castButton&&(t+=' <google-cast-launcher class="vp-cast-button" title="'+e.strings.chromecast+'" role="button" tabindex="0"></google-cast-launcher> '),e.ccButton&&(t+=' <button type="button" class="toggle cc '+(e.ccOn?"on":"off")+'" aria-haspopup="true"> '+e.captionsIcon+" </button> "),e.prefsButton&&(t+=' <button type="button" class="vp-prefs js-prefs" aria-haspopup="true"> '+e.settingsIcon+" </button> "),e.chapters&&(t+=' <button type="button" class="vp-chapter-button js-chapter-button" aria-haspopup="true"> '+e.chaptersIcon+" </button> "),e.airplayButton&&(t+=' <button type="button" class="toggle airplay off hidden" title="'+e.strings.airPlay+'" data-title-off="'+e.strings.airPlay+'" data-title-on="'+e.strings.airPlayOff+'" hidden> ',t+=this.render("icon_airplay")||"",t+=" </button> "),e.stereoscopicButton&&(t+=' <button type="button" class="toggle stereoscopic off" title="'+e.strings.stereoscopic+'" data-title-off="'+e.strings.stereoscopic+'" data-title-on="'+e.strings.stereoscopicOff+'"> ',t+=this.render("icon_stereoscopic")||"",t+=" </button> "),t+=' <button type="button" class="pip hidden enter" title="'+e.strings.pipEnter+'" data-title-enter="'+e.strings.pipEnter+'" data-title-return="'+e.strings.pipReturn+'" hidden> ',t+=this.render("icon_pip")||"",t+=' </button><button type="button" class="fullscreen',e.fullscreenButton||(t+=" only-in-fullscreen"),t+='"><div class="fullscreen-icon">'+e.fullscreenIcon+'</div><div class="unfullscreen-icon">'+e.unfullscreenIcon+"</div></button> ",e.vimeoLogo.show&&(t+=' <div class="logo"> ',e.vimeoLogo.showLink&&(t+=' <a href="'+e.vimeoLogo.url+'"',e.targetBlank&&(t+=' target="_blank" rel="noopener"'),t+=' class="vp-logo-link" aria-label="'+e.strings.watchOnVimeo+'" aria-describedby="new-window" data-clip-link> '),t+=this.render("logo")||"",e.vimeoLogo.showLink&&(t+=" </a> "),t+=" </div> "),t+="</div> ",e.customLogo&&(t+=' <div class="custom-logo',e.customLogo.sticky&&(t+=" sticky"),t+='" style="max-width:'+e.customLogo.width+"px;height:"+e.customLogo.height+'px"> ',e.customLogo.showLink&&(t+='<a href="',t+=this.escape(e.customLogo.url||"")||"",t+='" target="_blank" rel="noopener" aria-describedby="new-window">'),t+=' <img src="'+e.customLogo.img+'" alt=""> ',e.customLogo.showLink&&(t+="</a>"),t+=" </div>"),t+""},n.templates.debug_panel=function(e){var t="<div class='vp-stats-debug-values'> ";return t+=this.render("debug_values",e)||"",t+="</div>",e.hideCloseButton||(t+='<button type="button" class="vp-stats-debug-close" aria-label="Close stats debug panel">',t+=this.render("icon_close")||"",t+="</button>"),t+='<input type="text" class="vp-stats-debug-code">',e.isCopyDisabled||(t+='<button type="button" class="vp-copy-debug"><span class="vp-copy-debug-label">Copy Debug Payload</span></button>'),t+="",e.isDNTEnabled&&(t+="No Debug Key available as Do Not Track is enabled."),t+""},n.templates.debug_values=function(e){var t="";return e.clipId&&(t+="<p><span>Clip ID:</span><b>"+e.clipId+"</b></p>"),t+="",e.delivery&&(t+="<p><span>Delivery:</span><b>"+e.delivery+"</b></p>"),t+="",e.codec&&(t+="<p><span>Codec:</span><b>"+e.codec+"</b></p>"),t+="",e.resolution&&(t+="<p><span>Playing:</span><b>"+e.resolution+"</b></p>"),t+="",e.embedSize&&(t+="<p><span>Embed Size:</span><b>"+e.embedSize+"</b></p>"),t+="",e.isDash&&(t+="<p><span>Separate AV:</span><b>"+e.separateAudioVideo+"</b></p>"),t+="",(e.isDash||e.isLive)&&(t+="<p><span>Dropped Frames:</span><b>"+e.droppedFrames+" / "+e.totalFrames+" - "+e.droppedFramesPercent+"</b></p>"),t+="",e.vrHeadsetName&&(t+="<p><span>VR Hardware:</span><b>"+e.vrHeadsetName+"</b></p>"),t+="",e.isLive&&(t+="<p><span>Live Latency:</span><b>"+e.liveLatency+"</b></p>"),t+="",e.isLive&&e.liveSessionID&&(t+="<p><span>Live Session ID:</span><b>"+e.liveSessionID+"</b></p>"),t+="",e.p2pSources&&(t+="<p><span>P2P:</span><b>"+e.p2pSources+" - "+e.p2pOffload+"</b></p>"),t+="",e.drmEnabled&&(t+="<p><span>DRM:</span><b>Enabled; Fastly DRM: "+e.drmFastly+"</b></p>"),t+="<p><span>Playhead / Buffer:</span><b>"+e.currentTime+" / "+e.bufferEnd+" / "+e.bufferAhead+"</b></p>",(e.isDash||e.isLive)&&(t+="<p><span>Bandwidth:</span><b>"+e.bandwidthKbps+'</b><div class="vp-stats-debug-bandwidth-minmax"> (<b class="vp-stats-debug-bandwidth-min">'+e.bandwidthMinKbps+'</b><b class="vp-stats-debug-bandwidth-max">'+e.bandwidthMaxKbps+'</b>) </div></p><div class="vp-stats-debug-time-series"> '+e.bandwidthSeriesSvg+"</div>"),t+="",e.sessionId&&e.showSessionId&&(t+='<p><span>Debug Key:</span><br><b class="vp-stats-debug-session-id">'+e.sessionId+"</b></p>"),t+""},n.templates.icon_airplay=function(e){return'<svg class="airplay-icon" viewBox="0 0 44 36" focusable="false"><polygon class="fill" points="0,0 44,0 44,27 34.5,27 31,23 40,23 40,4 4,4 4,23 13,23 9.5,27 0,27"/><polygon class="fill" points="7,36 22,18 37,36"/></svg>'},n.templates.icon_back=function(e){return'<svg class="icon-back" viewBox="0 0 64 64" preserveAspectRatio="xMidYMid" focusable="false"><path class="fill" d="M0 32l32 32v-20h32l0-24h-32v-20z"/></svg>'},n.templates.icon_broken_heart=function(e){return'<svg class="unlike-icon" viewBox="0 0 110 81" preserveAspectRatio="xMidYMid" focusable="false"><path class="fill" d="M82.496 1c-14.594 0-23.198 10.043-25.948 14.48l-6.77 10.727 13.661 8.543-13.661 12.535 5.695 15.348-9.686-15.348 11.389-11.975-11.969-7.402s4.22-14.27 4.621-15.521c.782-2.438.782-2.438-.813-3.289-5.516-2.944-12.608-8.098-21.509-8.098-16.299 0-27.506 15.037-27.506 27.885 0 12.795 12.562 22.558 22.245 27.592 9.186 4.771 30.601 18.349 32.755 24.523 2.154-6.174 23.57-19.752 32.753-24.523 9.684-5.034 22.247-14.797 22.247-27.592 0-12.848-11.208-27.885-27.504-27.885z"/></svg>'},n.templates.icon_card_arrow=function(e){return'<svg class="card-arrow" viewBox="0 0 10 10" preserveAspectRatio="xMidYMid" focusable="false"><polygon class="fill" points="10 8.337 10 0 1.663 0 1.663 1.603 7.263 1.603 0 8.866 1.134 10 8.397 2.737 8.397 8.337"/></svg>'},n.templates.icon_cc=function(e){return'<svg viewBox="0 0 20 14" focusable="false" aria-labelledby="cc-icon-title" role="img"><title id="cc-icon-title">'+e.title+'</title><path class="fill" fill-rule="evenodd" clip-rule="evenodd" d="M17 0h-14c-1.657 0-3 1.343-3 3v8c0 1.656 1.343 3 3 3h14c1.657 0 3-1.344 3-3v-8c0-1.657-1.343-3-3-3zm-7.271 8.282c-.145.923-.516 1.686-1.105 2.268-.597.591-1.369.89-2.294.89-1.138 0-2.049-.402-2.706-1.195-.647-.786-.975-1.866-.975-3.215 0-1.458.372-2.603 1.105-3.403.65-.708 1.487-1.067 2.487-1.067 1.33 0 2.321.482 2.947 1.435.34.53.526 1.072.553 1.611l.013.236h-1.984l-.044-.169c-.092-.355-.207-.622-.343-.793-.239-.298-.591-.443-1.076-.443-.483 0-.856.209-1.14.641-.298.455-.449 1.12-.449 1.977 0 .851.156 1.49.466 1.898.298.395.666.588 1.122.588.469 0 .814-.16 1.058-.491.138-.183.255-.472.351-.856l.042-.17h2.013l-.041.258zm7.582 0c-.145.923-.516 1.686-1.104 2.268-.598.591-1.369.89-2.294.89-1.139 0-2.049-.402-2.707-1.195-.646-.785-.975-1.865-.975-3.214 0-1.458.372-2.603 1.106-3.403.649-.708 1.485-1.067 2.486-1.067 1.33 0 2.32.482 2.946 1.435.34.53.526 1.072.554 1.611l.012.236h-1.9829999999999999l-.043-.169c-.092-.355-.208-.623-.344-.793-.238-.298-.591-.443-1.076-.443-.483 0-.856.209-1.139.641-.299.455-.45 1.12-.45 1.977 0 .851.157 1.49.467 1.898.299.395.666.588 1.121.588.469 0 .814-.16 1.058-.491.138-.183.256-.472.352-.856l.042-.17h2.012l-.041.257z"/></svg>'},n.templates.icon_chapters=function(e){return'<svg class="icon-chapter" viewBox="7 7 18 18" focusable="false" aria-labelledby="chapters-icon-title" role="img"><title id="chapters-icon-title">'+e.title+'</title><g class="icon-chapter-group"><rect class="fill" x="11" y="9" width="14" height="2" rx="1"></rect><rect class="fill" x="7" y="9" width="2" height="2" rx="1"></rect><rect class="fill" x="7" y="15" width="2" height="2" rx="1"></rect><rect class="fill" x="11" y="15" width="14" height="2" rx="1"></rect><rect class="fill" x="11" y="21" width="14" height="2" rx="1"></rect><rect class="fill" x="7" y="21" width="2" height="2" rx="1"></rect></g></svg>'},n.templates.icon_check=function(e){return'<svg class="check-icon" viewBox="0 0 12 12"><path class="fill" d="M10.9 2.9l-.7-.7c-.2-.2-.6-.2-.8-.1L5 6.6 2.6 4.1c-.2-.1-.6-.1-.7 0l-.8.8c-.1.1-.1.5 0 .7l3.1 3.1c.4.4 1 .4 1.4 0l5.1-5.1c.3-.2.3-.6.2-.7z"/></svg>'},n.templates.icon_circle_info=function(e){return'<svg viewBox="0 0 20 20"><g class="fill"><path d="M10 16a6 6 0 1 1 6-6 6 6 0 0 1-6 6zm0-11a5 5 0 1 0 5 5 5 5 0 0 0-5-5z"></path><path d="M10 9a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5.5.5 0 0 1-.5-.5v-3A.5.5 0 0 1 10 9zm0-2a.5.5 0 0 1 .5.5.5.5 0 0 1-.5.5.5.5 0 0 1-.5-.5.5.5 0 0 1 .5-.5z"></path></g></svg>'},n.templates.icon_clock=function(e){return'<svg class="watch-later-icon" viewBox="0 0 20 20" preserveAspectRatio="xMidYMid" focusable="false"><polyline class="fill hour-hand" points="9.64,4.68 10.56,4.68 11.28,11.21 8.93,11.21 9.64,4.68" /><polyline class="fill minute-hand" points="14.19,13.65 13.7,14.14 8.58,10.4 10.44,8.5 14.19,13.65" /><circle class="stroke" cx="10" cy="10" r="8" stroke-width="2" /></svg>'},n.templates.icon_close_new=function(e){return'<svg class="icon-close-new" viewBox="0 0 16 16" preserveAspectRatio="xMidYMid" focusable="false"><path class="fill" d="M8.001 9.416l6.437 6.437a.497.497 0 0 0 .713-.001l.7-.7a.503.503 0 0 0 .002-.714L9.416 8.001l6.437-6.436a.497.497 0 0 0-.001-.713l-.7-.7a.503.503 0 0 0-.714-.002L8.001 6.587 1.565.15a.497.497 0 0 0-.713.001l-.7.7a.503.503 0 0 0-.002.714L6.587 8 .15 14.438a.497.497 0 0 0 .001.713l.7.7a.503.503 0 0 0 .714.002L8 9.416z"/></svg>'},n.templates.icon_close=function(e){return'<svg class="icon-close" viewBox="0 0 64 64" preserveAspectRatio="xMidYMid" focusable="false"><path class="fill" d="M60 48.796l-16.812-16.796 16.812-16.796-11.204-11.204-16.796 16.804-16.804-16.804-11.196 11.204 16.796 16.796-16.796 16.796 11.196 11.204 16.804-16.804 16.796 16.804z"/></svg>'},n.templates.icon_collections=function(e){return'<svg class="collections-icon" viewBox="0 0 24 24" focusable="false"><path class="fill" d="M24 12c0-.3-.1-.6-.4-.8l-2.7-2.3 2.4-1c.4-.1.7-.5.7-.9 0-.3-.1-.6-.4-.8l-7-6c-.1-.1-.4-.2-.6-.2-.1 0-.3 0-.4.1l-15 6c-.3.1-.6.5-.6.9 0 .3.1.6.4.8l2.7 2.3-2.4 1c-.4.1-.7.5-.7.9 0 .3.1.6.4.8l2.7 2.3-2.4 1c-.4.1-.7.5-.7.9 0 .3.1.6.4.8l7 6c.1.1.4.2.6.2.1 0 .3 0 .4-.1l15-6c.4-.1.6-.5.6-.9 0-.3-.1-.6-.4-.8l-2.7-2.3 2.4-1c.4-.1.7-.5.7-.9zm-8.2-9.8l5.3 4.5-12.9 5.1-5.3-4.5 12.9-5.1zm5.3 14.5L8.2 21.8l-5.3-4.5 1.9-.8 2.6 2.2c.1.2.4.3.6.3.1 0 .3 0 .4-.1l10.5-4.2 2.2 2zm-12.9.1l-5.3-4.5 1.9-.8 2.6 2.2c.1.2.4.3.6.3.1 0 .3 0 .4-.1l10.5-4.2 2.3 1.9-13 5.2z"/></svg>'},n.templates.icon_embed=function(e){return'<svg class="embed-icon" viewBox="0 0 55 48" preserveAspectRatio="xMidYMid" focusable="false" aria-labelledby="embed-icon-title" role="img"><title id="embed-icon-title">'+e.title+'</title><polygon class="fill" points="16.019,16.385 11.968,13.131 0,24.543 12.082,35.955 16.132,32.703 7.439,24.543"/><polygon class="fill" points="42.92,13.131 38.868,16.384 47.561,24.542 38.981,32.701 43.033,35.955 55,24.542"/><polygon class="fill" points="24.083,39.221 28.76,39.221 36.243,8.351 31.566,8.351"/></svg>'},n.templates.icon_facebook=function(e){return'<svg class="facebook-icon" viewBox="0 0 64 64" preserveAspectRatio="xMidYMid" focusable="false" aria-labelledby="fb-icon-title" role="img"><title id="fb-icon-title">'+e.title+'</title><path class="fill" d="M35.992 64h-11.992v-32h-8v-11.028l8-0.004-0.013-6.497c0-8.997 2.44-14.471 13.037-14.471h8.824v11.030h-5.514c-4.127 0-4.325 1.541-4.325 4.418l-0.016 5.52h9.918l-1.169 11.028-8.741 0.004-0.008 32z"/></svg>'},n.templates.icon_fast_forward=function(e){return'<svg viewBox="0 0 40 20" preserveAspectRatio="xMidYMid" focusable="false"><polygon class="fill" points="1,0 20,10 1,20" /><polygon class="fill" points="20,0 40,10 20,20" /></svg>'},n.templates.icon_follow=function(e){return'<svg class="icon icon-follow" viewBox="0 0 24 24" preserveAspectRatio="xMidYMid" focusable="false"><defs><clipPath id="icon-mask--check"><rect x="0" y="0" width="24" height="24" /></clipPath></defs><path class="icon-path icon-path--plus fill" d="M24 10h-10v-10h-4v10h-10v4h10v10h4v-10h10z"/><path class="icon-path icon-path--check fill" d="M9 21.035l-9-8.638 2.791-2.87 6.156 5.874 12.21-12.436 2.843 2.817z" clip-path="url(#icon-mask--check)"/><path class="icon-path icon-path--close fill" d="M23.954 21.03l-9.184-9.095 9.092-9.174-2.832-2.807-9.09 9.179-9.176-9.088-2.81 2.81 9.186 9.105-9.095 9.184 2.81 2.81 9.112-9.192 9.18 9.1z"/></svg>'},n.templates.icon_fullscreen=function(e){return'<svg viewBox="0 0 12 12" preserveAspectRatio="xMidYMid" focusable="false" aria-labelledby="fullscreen-icon-title" role="img"><title id="fullscreen-icon-title">'+e.title+'</title><polyline class="fill" points="6,6 5.9,2 4.9,3 2.9,1 1,2.9 3,4.9 2,5.9" transform="translate(6,6)" /><polyline class="fill" points="6,6 5.9,2 4.9,3 2.9,1 1,2.9 3,4.9 2,5.9" transform="translate(6,6) rotate(90)" /><polyline class="fill" points="6,6 5.9,2 4.9,3 2.9,1 1,2.9 3,4.9 2,5.9" transform="translate(6,6) rotate(180)" /><polyline class="fill" points="6,6 5.9,2 4.9,3 2.9,1 1,2.9 3,4.9 2,5.9" transform="translate(6,6) rotate(270)" /></svg>'},n.templates.icon_gear=function(e){return'<svg class="icon-gear" viewBox="0 0 16 16" preserveAspectRatio="xMidYMid" focusable="false" aria-labelledby="settings-icon-title" role="img"><title id="settings-icon-title">'+e.title+'</title><defs><clipPath id="icon-gear-mask-hd"><polygon points="19 9.422 19 0 0 0 0 16 4.996 16 6 9.422 19 9.422"/></clipPath><clipPath id="icon-gear-mask-4k"><polygon points="19 0 0 0 0 16 .656 16 7.641 9.422 19 9.422"/></clipPath></defs><g class="icon-gear-group"><path class="icon-gear-cog fill" d="M8.75,0 L7.25,0 C6.69771525,0 6.25,0.44771525 6.25,1 L6.25,1.71 C6.24203899,2.03670262 6.03616565,2.32571712 5.73,2.44 C5.22486505,2.64787629 4.75048268,2.92375823 4.32,3.26 C4.06726048,3.46530794 3.71530155,3.4969447 3.43,3.34 L2.81,3 C2.57947626,2.86645499 2.30519371,2.83041629 2.04799634,2.89987835 C1.79079898,2.96934041 1.57195122,3.13856029 1.44,3.37 L1.44,3.37 L0.69,4.67 C0.438460777,5.14101477 0.601355467,5.72655514 1.06,6 L1.06,6 L1.68,6.36 C1.95609578,6.53006064 2.1022252,6.84996558 2.05,7.17 C1.97585362,7.71080372 1.97585362,8.25919628 2.05,8.8 C2.1022252,9.12003442 1.95609578,9.43993936 1.68,9.61 L1.06,10 C0.828560291,10.1319512 0.65934041,10.350799 0.589878348,10.6079963 C0.520416285,10.8651937 0.556454987,11.1394763 0.69,11.37 L0.69,11.37 L1.44,12.67 C1.72842942,13.137733 2.34023095,13.2851012 2.81,13 L2.81,13 L3.43,12.64 C3.71530155,12.4830553 4.06726048,12.5146921 4.32,12.72 C4.75048268,13.0562418 5.22486505,13.3321237 5.73,13.54 C6.03616565,13.6542829 6.24203899,13.9432974 6.25,14.27 L6.25,15 C6.25,15.5522847 6.69771525,16 7.25,16 L8.75,16 C9.30228475,16 9.75,15.5522847 9.75,15 L9.75,14.29 C9.75796101,13.9632974 9.96383435,13.6742829 10.27,13.56 C10.7751349,13.3521237 11.2495173,13.0762418 11.68,12.74 C11.9327395,12.5346921 12.2846984,12.5030553 12.57,12.66 L13.19,13.02 C13.4205237,13.153545 13.6948063,13.1895837 13.9520037,13.1201217 C14.209201,13.0506596 14.4280488,12.8814397 14.56,12.65 L14.56,12.65 L15.31,11.35 C15.5746773,10.8743026 15.4102265,10.2742794 14.94,10 L14.94,10 L14.32,9.64 C14.0439042,9.46993936 13.8977748,9.15003442 13.95,8.83 C14.0241464,8.28919628 14.0241464,7.74080372 13.95,7.2 C13.8977748,6.87996558 14.0439042,6.56006064 14.32,6.39 L14.94,6.03 C15.1714397,5.89804878 15.3406596,5.67920102 15.4101217,5.42200366 C15.4795837,5.16480629 15.443545,4.89052374 15.31,4.66 L15.31,4.66 L14.56,3.36 C14.426372,3.13025585 14.2067828,2.96315821 13.9497298,2.89561144 C13.6926768,2.82806466 13.4193087,2.86562606 13.19,3 L13.19,3 L12.57,3.36 C12.2846984,3.5169447 11.9327395,3.48530794 11.68,3.28 C11.2495173,2.94375823 10.7751349,2.66787629 10.27,2.46 C9.96383435,2.34571712 9.75796101,2.05670262 9.75,1.73 L9.75,1 C9.75,0.73478351 9.64464316,0.480429597 9.45710678,0.292893219 C9.2695704,0.10535684 9.01521649,-8.8817842e-16 8.75,0 Z M10.5,8 C10.5,9.38071187 9.38071187,10.5 8,10.5 C6.61928813,10.5 5.5,9.38071187 5.5,8 C5.5,6.61928813 6.61928813,5.5 8,5.5 C9.38071187,5.5 10.5,6.61928813 10.5,8 Z" /></g><g class="icon-gear-text icon-gear-text-hd"><polygon class="fill" points="10.17 12.38 10.46 10.43 12.22 10.43 11.36 16 9.6 16 9.95 13.76 8.09 13.76 7.77 16 6.01 16 6.85 10.43 8.61 10.43 8.32 12.38"/><path class="fill" d="M17.82,11.23 C17.65,10.98 17.32,10.43 15.93,10.43 L13.37,10.43 L12.51,16 L15.09,16 C16.1538092,16.0719871 17.159097,15.5065128 17.65,14.56 C18.1567595,13.5192032 18.2181336,12.3169925 17.82,11.23 Z M15.9,14.42 C15.6125419,14.6349311 15.2582986,14.7412041 14.9,14.72 L14.48,14.72 L14.9,11.72 L15.35,11.72 C15.6806309,11.6794538 16.0108877,11.7981978 16.24,12.04 C16.4818058,12.8447587 16.357466,13.7151373 15.9,14.42 Z"/></g><g class="icon-gear-text icon-gear-text-4k"><polygon class="fill" points="11.82 10.29 13.58 10.29 13.19 12.17 13.19 12.17 15.19 10.27 17.48 10.27 14.75 12.62 16.36 16 14.36 16 13.36 13.78 12.76 14.32 12.39 16 10.63 16"/><path class="fill" d="M7.86,14.9 L5.31,14.9 L5.61,13.41 L8.78,10.41 L10.36,10.41 L9.72,13.51 L10.44,13.51 L10.18,14.87 L9.45,14.87 L9.22,16 L7.63,16 L7.86,14.9 Z M8.19,13.54 L8.54,12 L8.54,12 L6.94,13.58 L8.19,13.54 Z"/></g></svg>'},n.templates.icon_heart=function(e){return'<svg class="like-icon" viewBox="0 0 110 81" preserveAspectRatio="xMidYMid" focusable="false"><path class="fill" d="M82.496 1c-14.698 0-25.969 11.785-27.496 13.457-1.526-1.672-12.798-13.457-27.494-13.457-16.299 0-27.506 15.037-27.506 27.885 0 12.795 12.562 22.558 22.245 27.592 9.186 4.771 30.601 18.349 32.755 24.523 2.154-6.174 23.57-19.752 32.755-24.523 9.684-5.034 22.245-14.797 22.245-27.592 0-12.848-11.206-27.885-27.504-27.885z"/></svg>'},n.templates.icon_line_arrow=function(e){return'<svg class="icon-lineArrow" viewBox="0 0 24 15"><polygon class="fill" points="21 0 24 3.057 12 15 0 3.057 3 0 12 9"/></svg>'},n.templates.icon_live_viewers=function(e){return'<svg width="12" height="14" viewBox="0 0 12 14"><g transform="translate(-5 -4)" fill="#FFF" fill-rule="evenodd"><circle cx="11" cy="7" r="3"/><path d="M9 12h4a4 4 0 0 1 4 4v2H5v-2a4 4 0 0 1 4-4z"/></g></svg>'},n.templates.icon_lock=function(e){return'<svg viewBox="0 0 46 76" preserveAspectRatio="xMidYMid" focusable="false"><path class="fill bolt" d="M5,42v-15C8,5 39,5 42,27v30h-7v-30C32,14 15,14 12,27v15z"/><rect class="fill" x="0" y="41" height="35" width="46" rx="4" ry="4"/></svg>'},n.templates.icon_mail=function(e){return'<svg class="mail-icon" viewBox="0 0 72 72" preserveAspectRatio="xMidYMid" focusable="false" aria-labelledby="mail-icon-title" role="img"><title id="mail-icon-title">'+e.title+'</title><path class="fill" d="M71.754,57.6C71.9,57.169,72,56.718,72,56.241V16.759c0-0.453-0.092-0.881-0.225-1.291l-23.487,19.86L71.754,57.6z"/><path class="fill" d="M35.999,40.118l6.187-4.971l3.131-2.516L68.9,12.693c-0.387-0.113-0.789-0.193-1.213-0.193H4.312c-0.424,0-0.827,0.08-1.215,0.194l23.599,19.949l3.132,2.517L35.999,40.118z"/><path class="fill" d="M67.688,60.5c0.405,0,0.791-0.074,1.164-0.18L45.157,37.843l-9.159,7.361l-9.145-7.351L3.15,60.322C3.522,60.426,3.907,60.5,4.312,60.5H67.688z"/><path class="fill" d="M0.226,15.468C0.092,15.878,0,16.307,0,16.759v39.482c0,0.478,0.099,0.929,0.247,1.356l23.476-22.261L0.226,15.468z"/></svg>'},n.templates.icon_muted=function(e){return'<svg class="vp-icon-muted" viewBox="0 0 16 16"><path class="fill" d="M15.988 9.491l-1.49 1.491-1.491-1.491-1.491 1.491-1.49-1.491 1.49-1.491-1.49-1.491 1.49-1.491 1.491 1.491 1.491-1.491 1.49 1.491-1.49 1.491 1.49 1.491zM8.008 15.996l-3.998-3.998h-2.998c-0.552 0-0.999-0.447-0.999-0.999v-5.997c0-0.552 0.447-0.999 0.999-0.999h2.998l3.998-3.998c0 0 0.999-0.125 0.999 0.999 0 5.423 0 13.304 0 13.993 0 1.124-0.999 0.999-0.999 0.999zM7.009 4.002l-1.999 1.999h-2.998v3.998h2.998l1.999 1.999v-7.996z"></path></svg>'},n.templates.icon_pause=function(e){return'<svg viewBox="0 0 20 20" preserveAspectRatio="xMidYMid" focusable="false" aria-labelledby="pause-icon-title" role="img"><title id="pause-icon-title">'+e.title+'</title><rect class="fill" width="6" height="20" x="0" y="0" /><rect class="fill" width="6" height="20" x="12" y="0" /></svg>'},n.templates.icon_pip=function(e){return'<svg class="pip-icon" viewBox="0 0 16 12"><polygon class="fill" points="6 8 1 8 1 1 14 1 14 6 15 6 15 0 0 0 0 9 6 9 6 8"/><rect class="fill" x="7" y="7" width="9" height="5"/><polyline class="fill enter" transform="translate(4, 4) rotate(180) translate(-4, -4)" points="5.33 2 5.33 3 3.67 3 5.67 5 5 5.67 3 3.67 3 5.33 2 5.33 2 2"/><polyline class="fill return" points="5.33 2 5.33 3 3.67 3 5.67 5 5 5.67 3 3.67 3 5.33 2 5.33 2 2"/></svg>'},n.templates.icon_play=function(e){return'<svg viewBox="0 0 20 20" preserveAspectRatio="xMidYMid" focusable="false" aria-labelledby="play-icon-title" role="img"><title id="play-icon-title">'+e.title+'</title><polygon class="fill" points="1,0 20,10 1,20"/></svg>'},n.templates.icon_prev=function(e){return'<svg class="icon-prev" viewBox="0 0 27 48" preserveAspectRatio="xMidYMid" focusable="false"><path class="fill" d="M7.243,24L26.414,4.828c0.781-0.781,0.781-2.047,0-2.828L25,0.586 c-0.781-0.781-2.047-0.781-2.828,0L0.879,21.879c-1.172,1.172-1.172,3.071,0,4.243l21.293,21.293c0.781,0.781,2.047,0.781,2.828,0 L26.414,46c0.781-0.781,0.781-2.047,0-2.828L7.243,24z"/></svg>'},n.templates.icon_replay=function(e){return'<svg viewBox="-387 605 16 16" preserveAspectRatio="xMidYMid" aria-labelledby="replay-icon-title" role="img"><title id="replay-icon-title">'+e.title+'</title><path class="fill" d="M-387 606v4c0 .6.4 1 1 1h4c.6 0 1-.4 1-1s-.4-1-1-1h-1.5c1.1-1.2 2.7-2 4.5-2 3.3 0 6 2.7 6 6s-2.7 6-6 6c-2.3 0-4.4-1.3-5.4-3.4-.2-.5-.8-.7-1.3-.5-.5.2-.7.8-.5 1.3 1.3 2.8 4.2 4.6 7.2 4.6 4.4 0 8-3.6 8-8s-3.6-8-8-8c-2.3 0-4.5 1-6 2.7V606c0-.6-.4-1-1-1s-1 .4-1 1z"/></svg>'},n.templates.icon_share=function(e){return'<svg class="share-icon" viewBox="0 0 20 20" preserveAspectRatio="xMidYMid" focusable="false"><polygon class="fill" points="20,0 0,12 5,15 17,4 7,16 7,19 9,17 14,20"/></svg>'},n.templates.icon_spin=function(e){return'<svg class="vp-spin-trace" viewBox="0 0 50 50" focusable="false"><circle cx="50%" cy="50%" r="20"></circle></svg><svg class="vp-spin-circle" viewBox="0 0 50 50" focusable="false"><circle cx="50%" cy="50%" r="20"></circle></svg>'},n.templates.icon_stereoscopic=function(e){return'<svg viewBox="0 0 20 13" focusable="false"><path class="fill" d="M 18.74,0 1.2,0 C 0.55,0 0,0.57 0,1.27 L 0,11.73 C 0,12.43 0.55,13 1.23,13 L 6,13 c 0.54,0 1,-0.32 1.16,-0.79 L 8.55,8.74 C 8.79,8.16 9.35,7.75 10,7.75 c 0.65,0 1.21,0.41 1.45,0.99 l 1.39,3.47 c 0.19,0.47 0.62,0.79 1.11,0.79 l 4.79,0 C 19.45,13 20,12.43 20,11.73 L 20,1.27 C 20,0.57 19.45,0 18.74,0 M 5.22,8.58 C 4,8.58 3,7.55 3,6.29 3,5 4,4 5.22,4 6.44,4 7.43,5 7.43,6.29 7.43,7.55 6.44,8.58 5.22,8.58 m 9.56,0 C 13.56,8.58 12.57,7.55 12.57,6.29 12.57,5.03 13.56,4 14.78,4 16,4 17,5.03 17,6.29 17,7.55 16,8.58 14.78,8.58 Z" /></svg>'},n.templates.icon_tumblr=function(e){return'<svg class="tumblr-icon" viewBox="0 0 12 20" focusable="false" aria-labelledby="tumblr-icon-title" role="img"><title id="tumblr-icon-title">'+e.title+'</title><path class="fill" d="M7.865,19.958 C3.629,19.958 2.02,16.834 2.02,14.627 L2.02,8.105 L0,8.105 L0,5.527 C3.027,4.436 3.756,1.705 3.927,0.149 C3.938,0.042 4.022,0 4.07,0 L6.994,0 L6.994,5.084 L10.987,5.084 L10.987,8.105 L6.979,8.105 L6.979,14.318 C6.993,15.149 7.291,16.287 8.815,16.287 C8.843,16.287 8.872,16.287 8.9,16.286 C9.43,16.272 10.14,16.118 10.511,15.941 L11.471,18.788 C11.11,19.317 9.481,19.932 8.015,19.957 C7.964,19.958 7.915,19.958 7.865,19.958"/></svg>'},n.templates.icon_twitter=function(e){return'<svg class="twitter-icon" viewBox="0 0 274 223" preserveAspectRatio="xMidYMid" focusable="false" aria-labelledby="twitter-icon-title" role="img"><title id="twitter-icon-title">'+e.title+'</title><path class="fill" d="M85.98,222 C54.305,222 24.822,212.715 0,196.801 C4.388,197.319 8.853,197.584 13.38,197.584 C39.658,197.584 63.843,188.617 83.039,173.574 C58.495,173.121 37.781,156.905 30.644,134.621 C34.068,135.276 37.582,135.627 41.196,135.627 C46.312,135.627 51.267,134.942 55.974,133.66 C30.314,128.508 10.981,105.838 10.981,78.662 C10.981,78.426 10.981,78.191 10.985,77.957 C18.548,82.158 27.196,84.681 36.391,84.972 C21.341,74.914 11.438,57.746 11.438,38.287 C11.438,28.008 14.204,18.373 19.032,10.089 C46.696,44.023 88.025,66.353 134.641,68.692 C133.685,64.587 133.188,60.306 133.188,55.91 C133.188,24.935 158.302,-0.178 189.279,-0.178 C205.411,-0.178 219.988,6.634 230.22,17.535 C242.996,15.019 255,10.351 265.837,3.924 C261.649,17.021 252.756,28.013 241.175,34.955 C252.521,33.599 263.331,30.584 273.39,26.123 C265.87,37.371 256.36,47.25 245.402,55.158 C245.51,57.563 245.564,59.982 245.564,62.414 C245.564,136.533 189.148,222 85.98,222"/></svg>'},n.templates.icon_unfullscreen=function(e){return'<svg viewBox="0 0 12 12" preserveAspectRatio="xMidYMid" focusable="false" aria-labelledby="unfullscreen-icon-title" role="img"><title id="unfullscreen-icon-title">'+e.title+'</title><polyline class="fill" points="-1,-1 -1.1,-5 -2.1,-4 -4.1,-6 -6,-4.1 -4,-2.1 -5,-1.1" transform="translate(6,6) "/><polyline class="fill" points="-1,-1 -1.1,-5 -2.1,-4 -4.1,-6 -6,-4.1 -4,-2.1 -5,-1.1" transform="translate(6,6) rotate(90)" /><polyline class="fill" points="-1,-1 -1.1,-5 -2.1,-4 -4.1,-6 -6,-4.1 -4,-2.1 -5,-1.1" transform="translate(6,6) rotate(180)" /><polyline class="fill" points="-1,-1 -1.1,-5 -2.1,-4 -4.1,-6 -6,-4.1 -4,-2.1 -5,-1.1" transform="translate(6,6) rotate(270)" /></svg>'},n.templates.icon_vod_download=function(e){return'<svg class="vod-download-icon" viewBox="0 0 32 32" focusable="false"><path class="fill" d="M21.707 24.707l-5 5c-.39.39-1.024.39-1.414 0l-5-5c-.39-.39-.39-1.024 0-1.414l1.06-1.06c.392-.392 1.025-.392 1.415 0L14 23.462V15c0-.552.448-1 1-1h2c.552 0 1 .448 1 1v8.464l1.232-1.232c.39-.39 1.024-.39 1.414 0l1.06 1.06c.392.39.392 1.025 0 1.415z"/><path class="fill" d="M27.894 12.31c.063-.43.106-.864.106-1.31 0-4.97-4.03-9-9-9-3.6 0-6.7 2.12-8.138 5.175C10.175 6.75 9.368 6.5 8.5 6.5 6.015 6.5 4 8.515 4 11c0 .445.067.874.187 1.28C1.76 13.05 0 15.318 0 18c0 3.314 2.686 6 6 6h1c0-2.42 1.718-4.436 4-4.9V15c0-2.21 1.79-4 4-4h2c2.21 0 4 1.79 4 4v4.1c2.282.464 4 2.48 4 4.9h1c3.314 0 6-2.686 6-6 0-2.65-1.72-4.896-4.106-5.69z"/></svg>'},n.templates.icon_vod_rent=function(e){return'<svg class="vod-rent-icon" viewBox="0 0 32 32" focusable="false"><path class="fill" d="M23 11H9c-.552 0-1 .448-1 1v8c0 .552.448 1 1 1h14c.552 0 1-.448 1-1v-8c0-.552-.448-1-1-1z"/><path class="fill" d="M32 22V10c-2.76 0-5-2.24-5-5H5c0 2.76-2.24 5-5 5v12c2.76 0 5 2.24 5 5h22c0-2.76 2.24-5 5-5zm-6-1c0 1.105-.895 2-2 2H8c-1.105 0-2-.895-2-2V11c0-1.105.895-2 2-2h16c1.105 0 2 .895 2 2v10z"/></svg>'},n.templates.icon_vod_subscribe=function(e){return'<svg class="vod-subscribe-icon" viewBox="0 0 32 32" focusable="false"><path class="fill" d="M20 9v2c0 .552.448 1 1 1h10c.552 0 1-.448 1-1V1c0-.552-.448-1-1-1h-2c-.552 0-1 .448-1 1v4.445C24.98 2.01 20.523-.128 15.558.005 7.293.23.413 6.96.018 15.216-.42 24.41 6.905 32 16 32c8.47 0 15.404-6.583 15.964-14.912.04-.585-.413-1.088-1-1.088H28.96c-.514 0-.956.388-.994.9C27.506 23.107 22.326 28 16 28 9.217 28 3.748 22.37 4.01 15.53 4.246 9.284 9.47 4.147 15.72 4.003 19.38 3.92 22.674 5.483 24.926 8H21c-.552 0-1 .448-1 1z"/><path class="fill" d="M13 20v-8l8 4"/></svg>'},n.templates.icon_vod=function(e){return'<svg class="vod-icon" viewBox="0 0 21 23" focusable="false"><path class="fill" d="M19.602,4.716l-7.665-4.385C11.169-0.108,9.91-0.111,9.139,0.327L1.4,4.721C0.63,5.158,0,6.234,0,7.112v8.776c0,0.878,0.63,1.955,1.398,2.393l0.526,0.3l7.176,4.09c0.77,0.438,2.028,0.438,2.798,0l7.702-4.39c0.77-0.438,1.4-1.516,1.4-2.393V7.112C21,6.234,20.37,5.156,19.602,4.716z M7.336,15.761L7.337,7.24l8.008,4.26L7.336,15.761z"/></svg>'},n.templates.icon_warning=function(e){return'<svg class="warning-icon" focusable="false" width="36" height="32.326" viewBox="287.915 380.297 36 32.326"><path d="M309.646 382.963c-2.052-3.555-5.41-3.555-7.462 0L288.79 406.16c-2.05 3.555-.372 6.463 3.732 6.463h26.786c4.104 0 5.783-2.908 3.73-6.463l-13.392-23.197zm-2 23.224c0 .983-.804 1.788-1.788 1.788-.983 0-1.788-.805-1.788-1.788 0-.984.805-1.79 1.788-1.79s1.79.805 1.788 1.79zm-.317-7.76c-.254 2.604-.916 4.735-1.472 4.735-.557 0-1.22-2.13-1.477-4.735-.255-2.604-.464-5.72-.464-6.925 0-1.204.87-2.19 1.935-2.19 1.066 0 1.936.986 1.936 2.19s-.205 4.32-.457 6.925z"/></svg>'},n.templates.live_status=function(e){return'<div class="vp-live-status"><div class="vp-live-status-circle offline"></div><span>LIVE</span></div>'},n.templates.live_viewer_count=function(e){return'<div class="vp-live-viewer-count"><div class="vp-live-viewer-count-person"> '+(this.render("icon_live_viewers")||"")+' </div><span class="vp-live-viewer-count-value">0</span></div>'},n.templates.logo=function(e){return'<svg viewBox="0 0 140 40" preserveAspectRatio="xMidYMid" role="img" focusable="false" aria-labelledby="logo-icon-title" role="img"><title id="logo-icon-title">Vimeo</title><g><path class="fill logo-v" d="M31.277 18.832c-.14 3.052-2.27 7.229-6.39 12.531-4.259 5.536-7.863 8.306-10.811 8.306-1.825 0-3.371-1.687-4.633-5.059l-2.529-9.275c-.938-3.372-1.943-5.06-3.019-5.06-.234 0-1.054.494-2.458 1.477l-1.474-1.901c1.546-1.358 3.071-2.717 4.572-4.078 2.062-1.783 3.609-2.72 4.642-2.814 2.438-.234 3.938 1.433 4.502 5.001.608 3.851 1.03 6.246 1.266 7.182.704 3.195 1.476 4.791 2.321 4.791.657 0 1.641-1.037 2.954-3.108 1.312-2.072 2.015-3.649 2.109-4.732.188-1.789-.516-2.686-2.109-2.686-.75 0-1.522.173-2.318.514 1.54-5.044 4.481-7.495 8.823-7.355 3.22.095 4.737 2.184 4.552 6.266z"/><path class="fill logo-i" d="M50.613 28.713c-1.313 2.484-3.119 4.733-5.417 6.748-3.143 2.718-6.285 4.076-9.425 4.076-1.456 0-2.57-.469-3.343-1.406-.773-.938-1.137-2.153-1.09-3.653.045-1.548.526-3.938 1.441-7.173.914-3.232 1.373-4.967 1.373-5.201 0-1.218-.423-1.828-1.266-1.828-.282 0-1.079.494-2.393 1.477l-1.618-1.901c1.501-1.358 3.001-2.717 4.502-4.078 2.017-1.783 3.518-2.72 4.504-2.814 1.546-.14 2.684.314 3.411 1.367.726 1.052.996 2.417.81 4.098-.61 2.852-1.268 6.472-1.972 10.864-.046 2.01.681 3.014 2.182 3.014.656 0 1.827-.693 3.518-2.083 1.406-1.156 2.555-2.243 3.447-3.262l1.336 1.755zm-6.12-25.016c-.047 1.168-.633 2.288-1.76 3.361-1.266 1.212-2.767 1.82-4.501 1.82-2.672 0-3.963-1.166-3.869-3.499.045-1.213.76-2.381 2.144-3.501 1.384-1.119 2.919-1.68 4.609-1.68.984 0 1.805.387 2.462 1.155.656.772.961 1.553.915 2.344z"/><path class="fill logo-m" d="M94.543 28.713c-1.314 2.484-3.117 4.733-5.416 6.748-3.145 2.718-6.285 4.076-9.426 4.076-3.051 0-4.527-1.687-4.432-5.06.045-1.501.338-3.306.877-5.415.539-2.108.832-3.748.879-4.921.049-1.779-.492-2.673-1.623-2.673-1.223 0-2.682 1.456-4.375 4.362-1.788 3.05-2.754 6.003-2.894 8.861-.095 2.02.103 3.568.592 4.645-3.272.096-5.565-.444-6.873-1.617-1.171-1.032-1.708-2.742-1.614-5.135.045-1.501.276-3.001.69-4.502.414-1.5.644-2.837.69-4.011.095-1.734-.54-2.604-1.9-2.604-1.177 0-2.444 1.339-3.806 4.011-1.361 2.673-2.113 5.465-2.253 8.371-.094 2.627.074 4.456.503 5.486-3.219.096-5.505-.582-6.857-2.035-1.122-1.214-1.634-3.06-1.539-5.54.044-1.214.258-2.911.645-5.084.386-2.175.603-3.87.647-5.087.093-.841-.119-1.263-.633-1.263-.281 0-1.079.475-2.393 1.424l-1.687-1.901c.234-.184 1.71-1.545 4.432-4.078 1.969-1.828 3.306-2.766 4.009-2.812 1.219-.095 2.204.409 2.954 1.511s1.126 2.38 1.126 3.834c0 .469-.047.915-.14 1.336.703-1.077 1.523-2.017 2.463-2.814 2.156-1.874 4.572-2.931 7.245-3.166 2.298-.187 3.938.352 4.925 1.617.795 1.033 1.17 2.511 1.125 4.433.329-.28.681-.586 1.056-.915 1.078-1.267 2.133-2.273 3.164-3.023 1.736-1.267 3.541-1.97 5.418-2.112 2.25-.187 3.867.35 4.852 1.611.844 1.028 1.219 2.5 1.127 4.415-.047 1.309-.363 3.213-.949 5.712-.588 2.501-.879 3.936-.879 4.31-.049.982.047 1.659.279 2.034.236.373.797.559 1.689.559.656 0 1.826-.693 3.518-2.083 1.406-1.156 2.555-2.243 3.447-3.262l1.337 1.757z"/><path class="fill logo-e" d="M120.922 28.642c-1.361 2.249-4.033 4.495-8.02 6.743-4.971 2.856-10.012 4.284-15.125 4.284-3.797 0-6.52-1.267-8.16-3.797-1.172-1.735-1.734-3.797-1.688-6.189.045-3.797 1.736-7.407 5.064-10.832 3.658-3.75 7.973-5.627 12.945-5.627 4.596 0 7.033 1.873 7.314 5.615.188 2.384-1.125 4.842-3.938 7.368-3.004 2.76-6.781 4.515-11.328 5.263.842 1.169 2.109 1.752 3.799 1.752 3.375 0 7.059-.855 11.045-2.574 2.859-1.207 5.111-2.461 6.754-3.76l1.338 1.754zm-15.969-7.345c.045-1.259-.469-1.89-1.547-1.89-1.406 0-2.83.969-4.283 2.906-1.451 1.936-2.201 3.789-2.248 5.562-.025 0-.025.305 0 .911 2.295-.839 4.287-2.122 5.971-3.849 1.357-1.491 2.06-2.707 2.107-3.64z"/><path class="fill logo-o" d="M140.018 23.926c-.189 4.31-1.781 8.031-4.783 11.169-3.002 3.137-6.73 4.706-11.186 4.706-3.705 0-6.52-1.195-8.441-3.585-1.404-1.777-2.182-4.001-2.32-6.668-.236-4.029 1.217-7.729 4.361-11.101 3.377-3.746 7.619-5.618 12.732-5.618 3.281 0 5.766 1.102 7.457 3.301 1.594 2.015 2.32 4.614 2.18 7.796zm-7.95-.264c.047-1.269-.129-2.434-.527-3.49-.4-1.057-.975-1.587-1.725-1.587-2.391 0-4.361 1.293-5.906 3.877-1.316 2.115-2.02 4.371-2.111 6.766-.049 1.176.164 2.21.633 3.104.514 1.032 1.242 1.549 2.182 1.549 2.109 0 3.914-1.244 5.416-3.735 1.267-2.068 1.945-4.23 2.038-6.484z"/></g></svg>'},n.templates.menu_list_panel=function(e){var t='<div class="vp-panel vp-panel-open vp-panel--'+e.id+'"><div class="vp-panel-title"><button type="button" class="vp-panel-button js-panelTitleButton" tabindex="0"><span class="vp-panel-button-text">'+e.title+'</span><span class="vp-panel-stat"><span class="vp-panel-stat-text js-panelStatText">'+e.active+"</span> ";t+=this.render("icon_line_arrow")||"",t+=' </span></button></div><div class="vp-panel-itemsWrap"><ul class="vp-panel-items js-panelItems"> ';for(var n=0;n<e.items.length;n++)t+=' <li class="vp-panel-item',e.items[n].active&&(t+=" vp-panel-item-on"),t+='" data-time="'+e.items[n].id+'" tabindex="0" role="menuitemradio" aria-checked="',e.items[n].active?t+="true":t+="false",t+='"> ',e.items[n].index&&(t+='<span class="vp-panel-item-index">'+e.items[n].index+"</span>"),t+=' <span class="vp-panel-item-label">'+e.items[n].label+"</span></li> ";return t+' </ul><div class="vp-indicator"></div></div></div>'},n.templates.menu=function(e){e='<div class="vp-menu vp-menu-hidden vp-menu-invisible" role="menu" hidden><button type="button" class="vp-menu-close js-menuClose" aria-label="'+e.strings.close+'">';return e+=this.render("icon_close_new")||"",(e+='</button><button type="button" class="vp-menu-info js-menuInfo">')+(this.render("icon_circle_info")||"")+"</button></div>"},n.templates.nudge=function(e){var t='<div class="vp-nudge vp-nudge-backward invisible"><div class="vp-nudge-seconds"></div><div class="vp-nudge-symbol vp-nudge-backward-symbol"> ';return t+=this.render("icon_fast_forward")||"",(t+=' </div></div><div class="vp-nudge vp-nudge-forward invisible"><div class="vp-nudge-seconds"></div><div class="vp-nudge-symbol vp-nudge-forward-symbol"> ')+(this.render("icon_fast_forward")||"")+" </div></div>"},n.templates.outer=function(e){var t='<div class="vp-video-wrapper"><div class="vp-video"><div class="vp-telecine"></div></div><div class="vp-preview"></div><div class="vp-shade vp-shade-invisible"></div><div class="vp-nudge-shade vp-nudge-shade-left vp-nudge-shade-invisible"></div><div class="vp-nudge-shade vp-nudge-shade-right vp-nudge-shade-invisible"></div><div class="vp-spin vp-spin-invisible"> ';return t+=this.render("icon_spin")||"",t+=' </div></div><div class="vp-text-alert-wrapper hidden"><div class="vp-alert-text"></div><div class="vp-alert-time"><div class="vp-live-start-time-title"></div><div class="vp-live-start-time-body"></div><div class="vp-live-start-time-footer"></div></div></div><div class="vp-target"></div><div class="vp-captions hidden with-controls" hidden aria-live="assertive"><span></span></div><div class="vp-cards-wrapper"><div class="vp-cards"></div></div><div class="vp-outro-wrapper hidden" hidden><div class="vp-outro" role="dialog"></div></div><div class="vp-controls-wrapper"><div class="vp-badge"></div><div class="vp-title"></div><div class="vp-controls"></div><div class="vp-sidedock hidden" hidden></div><div class="vp-unmute hidden" hidden></div></div><div class="vp-overlay-wrapper hidden" role="dialog" aria-modal="true" aria-labelledby="vp-overlay-labelledby" hidden><div class="vp-overlay-bg"></div><div class="vp-overlay-cell"><div class="vp-overlay"></div><div class="vp-overlay-icon-wrapper hidden"><div class="vp-overlay-icon"></div></div><div class="vp-overlay-logo logo"></div></div><nav><button type="button" class="vp-nav-prevButton js-back cloaked" aria-label="'+e.strings.back+'">',t+=this.render("icon_prev")||"",(t+='</button><button type="button" class="vp-nav-closeButton js-close" aria-label="'+e.strings.close+'">')+(this.render("icon_close_new")||"")+'</button></nav></div><div class="vp-notification-wrapper hidden" hidden><div class="vp-notification-cell"><div class="vp-notification" role="dialog" aria-live="assertive"></div></div></div><div class="vp-stats-debug rounded-box hidden" aria-hidden="true" hidden></div><div class="vp-nudge-wrapper hidden"></div><span id="new-window" hidden>This opens in a new window.</span>'},n.templates.sidedock=function(e){var t="";return e.vodButton&&(t+=' <div class="box" data-vod-expiring="'+e.vodPurchaseInfo.expiring+'" data-vod-purchased="'+e.purchased+'"><button type="button" class="vod-button rounded-box',e.purchased&&(t+=" on"),e.vodPurchaseInfo.expiring&&(t+=" expiring"),t+='" data-product-id="'+e.vodPurchaseInfo.product_id+'"><div class="vod-button-inner"><span class="vod-label">'+e.vodDisplayLabel+"</span> ",t+=this.render("icon_vod")||"",t+=' </div></button></div><div class="sidedock-inner">'),e.likeButton&&(t+=' <div class="box"><label class="rounded-box hidden like-label" role="presentation"><span>'+(e.liked?e.strings.unlike:e.strings.like)+'</span></label><button type="button" class="like-button rounded-box',e.liked&&(t+=" on"),t+='" aria-label="',e.loggedIn?t+=""+(e.liked?e.strings.unlike:e.strings.like):t+=""+e.strings.likeLoggedOut,t+='" data-label-add="'+e.strings.like+'" data-label-add-logged-out="'+e.strings.likeLoggedOut+'" data-label-remove="'+e.strings.unlike+'"> ',t+=this.render("icon_heart")||"",t+=" </button></div>"),e.watchLaterButton&&(t+=' <div class="box"><label class="rounded-box hidden watch-later-label" role="presentation"><span>'+(e.addedToWatchLater?e.strings.watchLaterRemove:e.strings.watchLaterAdd)+'</span></label><button type="button" class="watch-later-button rounded-box',e.addedToWatchLater&&(t+=" on"),t+='" aria-label="',e.loggedIn?t+=""+(e.addedToWatchLater?e.strings.watchLaterRemove:e.strings.watchLaterAdd):t+=""+e.strings.watchLaterAddLoggedOut,t+='" data-label-add="'+e.strings.watchLaterAdd+'" data-label-add-logged-out="'+e.strings.watchLaterAddLoggedOut+'" data-label-remove="'+e.strings.watchLaterRemove+'"> ',t+=this.render("icon_clock")||"",t+=" </button></div>"),e.collectionsButton&&(t+=' <div class="box"><label class="rounded-box hidden collections-label" role="presentation"><span>'+e.strings.collections+'</span></label><button type="button" class="collections-button rounded-box" aria-label="'+e.strings.collections+'"> ',t+=this.render("icon_collections")||"",t+=" </button></div>"),e.shareButton&&(t+=' <div class="box"><label class="rounded-box hidden share-label" role="presentation"><span>'+e.strings.share+'</span></label><button type="button" class="share-button rounded-box" aria-label="'+e.strings.share+'"> ',t+=this.render("icon_share")||"",t+=" </button></div>"),e.vodButton&&(t+=" </div>"),t+""},n.templates.app_redirect=function(e){var t='<div class="vp-overlay-content"> ';return e.strings.title&&(t+=' <div class="app-redirect-title">'+e.strings.title+"</div> "),e.hideRedirectButton||(t+=' <div class="'+(e.strings.title?"":"app-redirect--topspace")+'"><a class="app-redirect-button" href="'+e.redirectUrl+'" role="button"',e.newWindow&&(t+=' data-new-window="1" target="_blank" rel="noopener"'),t+=' aria-describedby="new-window">'+e.strings.buttonText+"</a></div> "),e.strings.ignoreText&&(t+=' <div class="app-redirect-ignore">'+e.strings.ignoreText+"</div> "),e.strings.bottomText&&(t+=' <div class="app-redirect-bottom-text">'+e.strings.bottomText+"</div> "),t+"</div>"},n.templates.email_capture_field=function(e){var t="";return e.field.required?(t+=' <div class="vp-email-capture-form-custom-field required" data-id="'+e.field.id+'" aria-hidden="true"><label class="vp-email-capture-form-input-label" for="custom-field-'+e.field.id+'"> ',t+=this.escape(e.field.field_name)||"",t+=' </label><input id="custom-field-'+e.field.id+'" class="vp-email-capture-form-input ',e.field.locked&&(t+="locked_field"),e.field.static_field&&(t+="static_field"),t+='" name="',t+=this.escape(e.field.field_name)||"",t+='" maxlength="180" tabIndex="-1" required /></div>'):(t+=' <div class="vp-email-capture-form-custom-field" data-id="'+e.field.id+'" aria-hidden="true"><label class="vp-email-capture-form-input-label" for="custom-field-'+e.field.id+'"> ',t+=this.escape(e.field.field_name)||"",t+=' </label><input id="custom-field-'+e.field.id+'" class="vp-email-capture-form-input ',e.field.locked&&(t+="locked_field"),e.field.static_field&&(t+="static_field"),t+='" name="',t+=this.escape(e.field.field_name)||"",t+='" tabIndex="-1" maxlength="180" /></div>'),t+""},n.templates.email_capture_logo=function(e){return'<img src="'+(this.escape(e.url)||"")+'" alt="" class="vp-email-capture-logo">'},n.templates.email_capture_privacy_policy=function(e){var t='<a class="vp-email-capture-privacy-policy" href="';return(t+=this.escape(e.url)||"")+'" target="_blank" rel="noopener">'+e.text+"</a>"},n.templates.email_capture_skip=function(e){var t="";return e.positionIsAfter&&(t+=' <input class="vp-email-capture-form-button vp-email-capture-form-button--cancel" type="button" value="'+e.skipText+'">'),t+="",e.positionIsAfter||(t+=' <input class="vp-email-capture-form-button vp-email-capture-form-button--cancel" type="button" value="'+e.skipToVideoText+'">'),t+""},n.templates.email_capture_title=function(e){return'<div class="vp-email-capture-title" id="vp-overlay-labelledby"> '+(this.escape(e.title)||"")+"</div>"},n.templates.email_capture=function(e){var t='<div class="vp-email-capture-wrapper"><div class="vp-email-capture"> ';e.text||(t+=' <div class="vp-sr-only" id="vp-overlay-labelledby">'+e.aria_label+"</div> "),t+=' <form class="vp-email-capture-form" action="'+e.action+'" method="post" novalidate><div class="vp-email-capture-title-logo-wrap"> ',e.customLogo&&(t+=this.render("email_capture_logo",{url:e.customLogo})||""),e.text&&(t+=this.render("email_capture_title",{title:e.text})||""),t+=' </div><div class="vp-email-capture-form-fields-bubble-wrapper"><div class="vp-email-capture-form-fields-wrapper"><div class="vp-email-capture-form-fields-slider"> ';for(var n=0;n<e.customFields.length;n++)t+=this.render("email_capture_field",{field:e.customFields[n]})||"";return t+=' </div></div><div class="vp-validation-bubble hidden"><div class="vp-validation-bubble-message"></div></div></div><div class="vp-email-capture-form-buttons"><input class="vp-email-capture-form-button vp-email-capture-form-button--back" tabIndex="-1" type="button" value="'+e.strings.back+'" aria-hidden="true"><div class="vp-email-capture-form-button--next-submit-wrapper"><div class="vp-email-capture-form-button--next-submit-slider"><input class="vp-email-capture-form-button vp-email-capture-form-button--next" tabIndex="-1" type="button" value="'+e.strings.next+'" aria-hidden="true"><input class="vp-email-capture-form-button vp-email-capture-form-button--submit" tabIndex="-1" type="submit" value="'+e.strings.submit+'" aria-hidden="true"></div></div></div> ',e.isWebinar&&(t+=' <button class="vp-email-capture-reg-skip">'+e.strings.reg_skip+"</button> "),t+=' <div class="vp-email-capture-disclaimer-wrapper cloaked"><div class="vp-email-capture-disclaimer" value="'+e.strings.disclaimer+'"> '+e.strings.disclaimer+" </div> ",e.privacyPolicy&&(t+=this.render("email_capture_privacy_policy",{text:e.strings.privacy_policy,url:e.privacyPolicy})||""),t+=' </div></form><div class="vp-email-capture-form-skip"> ',e.allowSkip&&(t+=this.render("email_capture_skip",{position:e.position,skipText:e.strings.skip,skipToVideoText:e.strings.skip_to_video,positionIsAfter:e.positionIsAfter})||""),t+=' </div><div class="vp-email-capture-progress-wrapper"><div class="vp-email-capture-steps"> '+e.strings.step+' <span class="vp-email-capture-current-step"></span> '+e.strings.of+' <span class="vp-email-capture-total-steps">'+e.customFields.length+'</span></div><div class="vp-email-capture-progress-bar"><span class="vp-email-capture-progress-meter"></span></div></div></div><div class="vp-email-capture-thank-you hidden"><div class="vp-email-capture-thank-you-box"><h1 class="vp-email-capture-thank-you-title">'+e.strings.thank_you+'</h1><p class="vp-email-capture-thank-you-subtitle">'+e.strings.successful+"</p></div> ",e.positionIsAfter||(t+=' <div class="vp-email-capture-video-countdown vp-email-capture-video-countdown-meter-wrapper" aria-label="'+e.strings.video_starts+'"><div class="vp-email-capture-video-countdown-meter"></div><div class="vp-email-capture-video-countdown-meter-text"> '+e.strings.video_starts+' <span class="vp-email-capture-video-countdown-timer"></span></div></div> '),t+' </div><div class="vp-email-capture-reg-thank-you hidden"><div class="vp-email-capture-thank-you-box"><h1 class="vp-email-capture-thank-you-title">'+e.strings.reg_thank_you+'</h1><p class="vp-email-capture-thank-you-subtitle">'+e.strings.reg_thank_you_subtitle+"</p></div></div></div>"},n.templates.error=function(e){var t='<div class="vp-overlay-content error"><div class="vp-sr-only" id="vp-overlay-labelledby">'+e.aria_label+"</div> ";return e.title&&(t+=" <h1>"+e.title+"</h1> "),e.message&&(t+=" <p>"+e.message+"</p> "),t+"</div>"},n.templates.help=function(e){var t='<div class="vp-overlay-content help"><h1 id="vp-overlay-labelledby">'+e.strings.title+'</h1><dl><div class="volume-up secondary"><dt class="arrow">â†‘</dt><dd>'+e.strings.volumeUp+'</dd></div><div class="volume-down secondary"><dt class="arrow">â†“</dt><dd>'+e.strings.volumeDown+'</dd></div><div class="scrub-forward secondary"><dt class="arrow">â†’</dt><dd>'+e.strings.scrubForward+'</dd></div><div class="scrub-backwards secondary"><dt class="arrow">â†</dt><dd>'+e.strings.scrubBackwards+'</dd></div><div class="like"><dt>L</dt><dd>'+e.strings.like+'</dd></div><div class="share"><dt>S</dt><dd>'+e.strings.share+'</dd></div><div class="watch-later"><dt>W</dt><dd>'+e.strings.watchLater+'</dd></div><div class="toggle-captions"><dt>C</dt><dd>'+e.strings.captions+'</dd></div><div class="toggle-prefs"><dt>H</dt><dd>'+e.strings.prefs+'</dd></div><div class="fullscreen"><dt>F</dt><dd>'+e.strings.fullscreen+"</dd></div> ";return e.onSite||(t+='<div class="view-on-vimeo"><dt>V</dt><dd>'+e.strings.viewOnVimeo+"</dd></div>"),t+" </dl></div>"},n.templates.outro_email=function(e){var t='<div class="vp-outro-bg"';return e.bgimage&&(t+=' style="background-image: url('+e.bgimage+');"'),t+'></div><div class="vp-outro-content vp-outro-content--email vp-outro-shade js-outro-content"></div>'},n.templates.outro_image=function(e){var t='<div class="vp-outro-content vp-outro-content--image js-outro-content"> ';return e.url&&(t+='<a class="vp-outro-imageLink js-imageLink" href="'+e.url+'" target="_blank" rel="noopener" aria-describedby="new-window">'),e.bgimage&&(t+='<div class="vp-outro-image" style="background-image: url('+e.bgimage+');"',e.alt_text&&(t+=' aria-label="',t+=this.escape(e.alt_text)||"",t+='" role="img"'),t+="></div>"),e.url&&(t+="</a>"),t+"</div>"},n.templates.outro_link=function(e){var t='<div class="vp-outro-bg"';return e.bgimage&&(t+=' style="background-image: url('+e.bgimage+');"'),t+='></div><div class="vp-outro-content vp-outro-content--link vp-outro-shade js-outro-content"><div class="vp-outro-linkWrapper js-outro-linkWrapper"> ',e.title&&(t+='<h1 class="vp-outro-textTitle js-outro-title">',t+=this.escape(e.title)||"",t+="</h1>"),e.description&&(t+='<p class="vp-outro-textDescription js-outro-text">',t+=this.escape(e.description)||"",t+="</p>"),e.text&&e.url&&(t+=' <div class="vp-outro-buttonWrap"><a class="vp-outro-button js-cta" href="'+e.url+'" target="_blank" rel="noopener" aria-describedby="new-window"><span>',t+=this.escape(e.text)||"",t+="</span></a></div> "),e.text2&&e.url2&&(t+=' <div class="vp-outro-linkWrap js-outro-linkWrap"><a class="vp-outro-link js-link" href="'+e.url2+'" target="_blank" rel="noopener" aria-describedby="new-window">',t+=this.escape(e.text2)||"",t+="</a></div> "),t+" </div></div>"},n.templates.outro_nothing=function(e){return'<div class="vp-outro-bg"></div><div class="vp-outro-content vp-outro-content--nothing vp-outro-shade js-outro-content"></div>'},n.templates.outro_share=function(e){var t='<div class="vp-outro-bg"';return e.bgimage&&(t+=' style="background-image: url('+e.bgimage+');"'),(t+='></div><div class="vp-outro-content vp-outro-content--share vp-outro-shade js-outro-content"></div><nav class="panel-nav"><button type="button" class="vp-nav-prevButton js-back cloaked" aria-label="'+e.strings.back+'">')+(this.render("icon_prev")||"")+"</button></nav>"},n.templates.outro_staticimage=function(e){var t='<div class="vp-outro-content vp-outro-content--staticImage js-outro-content"><div class="vp-outro-staticImageWrapper"> ';return e.url&&(t+='<a class="vp-outro-staticImageLink" href="'+e.url+'" target="_blank" rel="noopener" aria-describedby="new-window">'),t+=' <img class="vp-outro-staticImage" src="'+e.svg_url+'"> ',e.url&&(t+="</a>"),t+" </div></div>"},n.templates.outro_text=function(e){return'<div class="vp-outro-content vp-outro-content--text vp-outro-shade js-outro-content"><div class="vp-outro-textWrapper"><div class="vp-outro-text">'+e.text+"</div></div></div>"},n.templates.outro_videos=function(e){var t='<div class="vp-outro-bg"';e.bgimage&&(t+=' style="background-image: url('+e.bgimage+');"'),t+='></div><div class="vp-outro-content vp-outro-content--videos vp-outro-shade js-outro-content"> ';for(var n=0;n<e.contexts.length;n++){var i=e.contexts[n];t+=' <div class="vp-outro-videosSection vp-outro-videosSection--'+i.videos.length,i.promoted&&(t+=" vp-outro-videosSection--promoted"),t+='"><div class="vp-outro-videosHeaderWrapper"><header class="vp-outro-videosHeader"><h1 class="vp-outro-videosTitle">'+i.context+"</h1> ",e.showFollowButton&&!i.promoted&&(t+=' <div class="vp-outro-followWrap js-outro-followWrap"><button type="button" class="vp-outro-follow js-outro-follow" aria-label="'+e.strings.follow+'" aria-pressed="',e.following?t+="true":t+="false",t+='"> ',t+=this.render("icon_follow")||"",t+=' <span class="vp-outro-follow-text" data-label-follow="'+e.strings.follow+'" data-label-following="'+e.strings.following+'" data-label-unfollow="'+e.strings.unfollow+'"></span></button></div> '),t+=' </header></div><ul class="vp-outro-videos vp-outro-videos--'+i.videos.length+'"> ';for(var r=0;r<i.videos.length;r++)t+=' <li><a class="vp-outro-videoLink js-videoLink',1==n&&(t+=" hovered"),t+='" href="'+i.videos[r].url+'" ',e.target&&(t+=' target="_blank" rel="noopener" '),t+=' data-video-id="'+i.videos[r].id+'" aria-describedby="new-window" ><div class="vp-outro-imgWrapper" style="background-image: url('+i.videos[r].thumbnail+')"></div><header class="vp-outro-videoHeader" id="vp-outro-videoHeader"><h1 class="vp-outro-videoTitle">',t+=this.escape(i.videos[r].title)||"",t+="</h1> ",i.videos[r].byline&&(t+=' <h2 class="vp-outro-videoByline">',t+=this.escape(i.videos[r].byline)||"",t+="</h2> "),t+=" </header></a> ";t+=" </ul></div> "}return t+"</div>"},n.templates.outro_vod=function(e){var t='<div class="vp-outro-content vp-outro-content--vod vp-outro-shade js-outro-content"><div class="vp-outro-vodWrapper"><h1 class="vp-outro-vodHeader" aria-describedby="new-window"><a href="'+e.url+'" target="_blank" rel="noopener">';t+=this.escape(e.title)||"",t+="</a></h1> ";var n=e.countries,i=e.country;if(this.helpers.isAvailableInCountry(n,i))if(e.purchased)t+=' <a class="vp-outro-vodButton vp-outro-vodButton--watch js-vod-watch" role="button" href="'+e.url+'" target="_blank" rel="noopener" aria-describedby="new-window">'+e.strings.watch+"</a> ";else{if(!e.isComingSoon){t+=' <ul class="vp-outro-vod"> ';for(var r=0;r<e.buttons.length;r++){t+=' <li class="vp-outro-vod-item"><a class="vp-outro-vodButton vp-outro-vodButton--'+e.buttons[r].type+' js-vod-button" role="button" href="'+e.url+"#buy="+e.buttons[r].product_id+'" target="_blank" rel="noopener" data-product-id="'+e.buttons[r].product_id+'" aria-describedby="new-window" ><div class="vp-outro-vodIcon"> ',"buy"===e.buttons[r].type?t+=this.render("icon_vod_download")||"":"rent"===e.buttons[r].type?t+=this.render("icon_vod_rent")||"":"subscribe"===e.buttons[r].type?t+=this.render("icon_vod_subscribe")||"":t+=this.render("icon_vod")||"",t+=" </div> ";var o=e.currency,s=e.buttons[r];t+=" <p>"+this.helpers.formatVodLabel(e.translationMap,"outro_string",o,s)+"</p></a></li> "}t+=" </ul> "}(e.isPreorder||e.isComingSoon)&&(t+=" <p>"+e.strings.preRelease+"</p> ")}return t+" </div></div>"},n.templates.password=function(e){return'<div class="vp-overlay-content password form"><h1 class="header" id="vp-overlay-labelledby">'+e.strings.title+'</h1><p class="subtitle">'+e.strings.subtitle+'</p><form action="'+e.action+'" method="post" novalidate><div class="vp-validation-bubble hidden"><div class="vp-validation-bubble-arrow-clipper"><div class="vp-validation-bubble-arrow"></div></div><div class="vp-validation-bubble-message"></div></div><input class="js-password" type="password" name="password" placeholder="'+e.strings.password+'" required aria-required="true" aria-label="'+e.strings.password+'"><input type="submit" value="'+e.strings.watch+'"></form></div>'},n.templates.private_locked=function(e){return'<div class="vp-overlay-content login"><h1 id="vp-overlay-labelledby">'+e.strings.title+'</h1><p class="subtitle">'+e.strings.subtitle+'</p><a href="'+e.action+'" class="popup js-login" target="_blank" rel="noopener" role="button" aria-describedby="new-window">'+e.strings.logIn+"</a></div>"},n.templates.private_unlocked=function(e){return'<div class="vp-overlay-content form unlocked"><h1>'+e.strings.title+'</h1><p class="subtitle">'+e.strings.subtitle+'</p><button class="js-watch" type="button">'+e.strings.watch+"</button></div>"},n.templates.share=function(e){var t='<div class="vp-share-wrapper js-share"><section class="vp-share-screen vp-share-screen--share'+(e.embedOnly?" cloaked":"")+' js-share-screen"><h1 class="vp-share-title vp-share-title--share" id="vp-overlay-labelledby">'+e.strings.share+'</h1><ul class="vp-share-buttons"><li class="vp-share-buttons-item"><a class="vp-share-button vp-share-button--facebook js-facebook" href="'+e.playerShareUrl+'/facebook" target="_blank" rel="noopener" role="button" aria-describedby="new-window" > '+e.facebookIcon+' </a><li class="vp-share-buttons-item"><a class="vp-share-button vp-share-button--twitter js-twitter" href="'+e.playerShareUrl+'/twitter" target="_blank" rel="noopener" role="button" aria-describedby="new-window" > '+e.twitterIcon+' </a><li class="vp-share-buttons-item"><a class="vp-share-button vp-share-button--tumblr js-tumblr" href="'+e.playerShareUrl+'/tumblr" target="_blank" rel="noopener" role="button" aria-describedby="new-window" > '+e.tumblrIcon+" </a> ";return e.url&&(t+=' <li class="vp-share-buttons-item"><a class="vp-share-button vp-share-button--email js-email" href="mailto:?subject=',t+=encodeURIComponent(e.strings.emailSubject)||"",t+="&amp;body=",t+=encodeURIComponent(e.strings.emailBody)||"",t+='" role="button" aria-describedby="new-window" > '+e.emailIcon+" </a> "),t+=" </ul> ",e.embed&&(t+=' <ul class="vp-share-buttons"><li class="vp-share-buttons-item"><a class="vp-share-button vp-share-button--embed js-embed" href="'+e.url+'#share" target="_blank" rel="noopener" role="button" > '+e.embedIcon+" </a></li></ul> "),e.url&&(t+=' <p class="vp-share-footnote vp-share-footnote--share"><a class="clip_url" href="'+e.shareUrl+'" target="_blank" rel="noopener" aria-describedby="new-window">'+e.shareUrl+"</a></p> "),t+=" </section> ",e.embed&&(t+=' <section class="vp-share-screen vp-share-screen--embed'+(e.embedOnly?"":" cloaked")+' js-embed-screen"><div class="vp-share-embedWrapper"><h1 class="vp-share-title vp-share-title--embed">'+e.strings.embedTitle+'</h1><p class="vp-share-subtitle vp-share-subtitle--embed">'+e.strings.embedSubtitle+'</p><div class="vp-share-embedCode form"><div><input class="vp-share-embedInput js-embed-input" type="text" name="embed_code" title="Embed code" value="'+e.embedCode+'" spellcheck="false" aria-readonly="true"',e.readOnly&&(t+=" readonly"),t+="></div> ",e.copyButton&&(t+=' <button type="button" class="vp-share-embedCopy js-embedCopy" data-clipboard-text=\''+e.embedCode+"' data-label=\""+e.strings.copy+'" data-success-label="'+e.strings.copySuccess+'">'+e.strings.copy+"</button> "),t+=" </div> ",e.customizeEmbed&&(t+=' <p class="vp-share-footnote vp-share-footnote--embed">'+e.strings.customize+"</p> "),t+=" </div></section> "),t+"</div>"},n.templates.threesixty_reminder=function(e){var t='<div class="intro-wrap text-only"><div> ';return e.showArrows&&(t+=' <div class="key-wrapper"><div class="key-row"><div class="key"><div class="arrow arrow-top"></div></div></div><div class="key-row"><div class="key"><div class="arrow arrow-left"></div></div><div class="key"><div class="arrow arrow-down"></div></div><div class="key"><div class="arrow arrow-right"></div></div></div></div> '),t+" <div>"+e.text+"</div></div></div>"},n.templates.time_series_graph=function(e){return'<svg width="'+e.width+'" height="'+e.height+'" viewBox="0 0 '+e.width+" "+e.height+'"><g><polyline stroke="white" fill="none" points="'+e.points+'"></polyline></g><g> '+e.markers+" </g></svg>"},n.templates.title_byline_badge=function(e){var t="";return e.displayBadge&&(t+="&nbsp;",e.link&&(t+='<a tabindex="-1" href="'+e.link+'"',e.targetBlank&&(t+=' target="_blank" rel="noopener" aria-describedby="new-window"'),t+=">"),t+=' <span class="byline-badge '+e.cssClass+'">'+e.cssClass+"</span>",e.link&&(t+="</a>"),t+=""),t+""},n.templates.title_owner_byline=function(e){var t="";return e.linkToOwner?(t+='<a href="'+e.ownerLink+'"',e.targetBlank&&(t+=' target="_blank" rel="noopener"'),t+=' data-track-click="'+e.ClickTargets.VIDEO_BYLINE+'" aria-describedby="new-window">',t+=this.escape(e.owner)||"",t+="</a>"):(t+='<span class="user">',t+=this.escape(e.owner)||"",t+="</span>"),t+""},n.templates.title=function(e){var t='<header class="vp-title-header"> ';return e.showPortrait&&(t+=' <div class="vp-portrait" aria-hidden="true"> ',e.linkToOwner&&(t+='<a tabindex="-1" href="'+e.ownerLink+'"',e.targetBlank&&(t+=' target="_blank" rel="noopener"'),t+=">"),t+=' <img src="'+e.portraitImg+'" alt="'+e.portraitAlt+'" width="60" height="60" data-track-click="'+e.ClickTargets.VIDEO_PORTRAIT+'"> ',e.linkToOwner&&(t+="</a>"),t+=" </div> "),t+=' <div class="headers"> ',e.showTitle&&(t+=' <h1 aria-describedby="new-window"> ',e.showTitleLink&&(t+='<a href="'+e.titleLink+'"',e.targetBlank&&(t+=' target="_blank" rel="noopener"'),t+=' data-track-click="'+e.ClickTargets.VIDEO_TITLE+'">'),t+=this.escape(e.title)||"",e.showTitleLink&&(t+="</a>"),e.is360&&(t+='<div class="threesix-badge-title">360</div>'),e.hasHDR&&(t+='<div class="hashdr-badge-title">HDR</div>'),t+=" </h1> "),e.showByline&&(t+=' <div class="sub-title"><h2 class="byline-from">'+e.strings.byline+"</h2> ",e.is360&&!e.showTitle&&(t+=' <div class="threesix-badge-byline">360</div> '),e.hasHDR&&!e.showTitle&&(t+=' <div class="hashdr-badge-byline">HDR</div> '),t+=" </div> "),!e.is360||e.showByline||e.showTitle||(t+=' <div class="threesix-badge-loner">360</div> '),!e.hasHDR||e.showByline||e.showTitle||(t+=' <div class="hashdr-badge-loner">HDR</div> '),t+" </div></header>"},n.templates.unmute_button=function(e){var t='<button type="button" class="vp-unmute-button"> ';return(t+=this.render("icon_muted")||"")+' <span class="vp-unmute-button-title">'+e.title+"</span></button>"},e.exports?e.exports=n:window.Aftershave=n});var Bl,Vl=(Bl={enumerable:!0,configurable:!0,writeable:!1},function(i){for(var e=arguments.length,t=new Array(1<e?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return t.forEach(function(e){for(var t in e){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(i,t,Object.assign(n,Bl))}}),i});function Wl(){return(void 0!==window.performance&&"function"==typeof window.performance.now?window.performance:Date).now()}function $l(){return parseInt(Wl()/1e3,10)}function zl(e){return parseInt(Date.now()/1e3,10)-e}function Kl(e){var t=e.getHours(),n=e.getMinutes(),e=12<=t?"PM":"AM";return(t=t%12||12)+":"+(n=n<10?"0"+n:n)+" "+e}function Gl(e,t){var n=Math.floor(e/3600%60),i=Math.floor(e/60%60);if(e=Math.floor(e%60),t){t=e+" second"+(1===e?"":"s");return 0<i&&(t=i+" minute"+(1===i?"":"s")+", "+t),t=0<n?n+" hour"+(1===n?"":"s")+", "+t:t}return(0<n?n+":":"")+Yl(i,2)+":"+Yl(e,2)}function Yl(e,t,n){return e=String(e),new Array(t-e.length+1).join(n||"0")+e}function Jl(e,t,n){var i=!0,r=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return Ie(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),cu(e,t,{leading:i,maxWait:t,trailing:r})}function Xl(e,t){for(var n=0,i=Object.keys(t);n<i.length;n++){var r=i[n];Object.defineProperty(e,r,{value:t[r],enumerable:!1,writable:!1,configurable:!0})}return e}function Zl(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||td}var Ql=void 0!==P?P:(Object.defineProperty(ud.prototype,"size",{get:function(){return this.oh.length},enumerable:!0,configurable:!0}),ud.prototype.get=function(e){e=cd(this.oh,e),e=this.oh[e];return e&&e[1]},ud.prototype.set=function(e,t){var n=cd(this.oh,e);~n?this.oh[n][1]=t:this.oh.push([e,t])},ud.prototype.delete=function(e){var t=this.oh,e=cd(t,e);~e&&t.splice(e,1)},ud.prototype.has=function(e){return!!~cd(this.oh,e)},ud.prototype.clear=function(){this.oh.splice(0)},ud.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,i=this.oh;n<i.length;n++){var r=i[n];e.call(t,r[1],r[0])}},ud),ed="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,td="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),nd="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(td):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)},id=["top","right","bottom","left","width","height","size","weight"],rd="undefined"!=typeof MutationObserver,od=(ad.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},ad.prototype.removeObserver=function(e){var t=this.observers_,e=t.indexOf(e);~e&&t.splice(e,1),!t.length&&this.connected_&&this.disconnect_()},ad.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},ad.prototype.updateObservers_=function(){var e=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return e.forEach(function(e){return e.broadcastActive()}),0<e.length},ad.prototype.connect_=function(){ed&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),rd?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},ad.prototype.disconnect_=function(){ed&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},ad.prototype.onTransitionEnd_=function(e){var e=e.propertyName,t=void 0===e?"":e;id.some(function(e){return!!~t.indexOf(e)})&&this.refresh()},ad.getInstance=function(){return this.instance_||(this.instance_=new ad),this.instance_},ad.instance_=null,ad),sd=hd(0,0,0,0);function ad(){function e(){r&&(r=!1,i()),o&&n()}function t(){nd(e)}function n(){var e=Date.now();if(r){if(e-s<2)return;o=!0}else o=!(r=!0),setTimeout(t,20);s=e}var i,r,o,s;this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=(i=this.refresh.bind(this),o=r=!1,s=0,n)}function cd(e,n){var i=-1;return e.some(function(e,t){return e[0]===n&&(i=t,!0)}),i}function ud(){this.oh=[]}function ld(e){return parseFloat(e)||0}function dd(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.reduce(function(e,t){return e+ld(n["border-"+t+"-width"])},0)}var fd="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof Zl(e).SVGGraphicsElement}:function(e){return e instanceof Zl(e).SVGElement&&"function"==typeof e.getBBox};function hd(e,t,n,i){return{x:e,y:t,width:n,height:i}}function vd(e,t){var n,i,r,o,t=(n=t.x,i=t.y,r=t.width,o=t.height,t="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,t=Object.create(t.prototype),Xl(t,{x:n,y:i,width:r,height:o,top:i,right:n+r,bottom:o+i,left:n}),t);Xl(this,{target:e,contentRect:t})}function pd(e){if(!(this instanceof pd))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var t=od.getInstance(),t=new gd(e,t,this);bd.set(this,t)}var md=(Ed.prototype.isActive=function(){var e,t,e=(e=this.target,ed?fd(e)?hd(0,0,(t=e.getBBox()).width,t.height):function(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return sd;var i=Zl(e).getComputedStyle(e),r=function(e){for(var t={},n=0,i=["top","right","bottom","left"];n<i.length;n++){var r=i[n],o=e["padding-"+r];t[r]=ld(o)}return t}(i),o=r.left+r.right,s=r.top+r.bottom,a=ld(i.width),c=ld(i.height);return"border-box"===i.boxSizing&&(Math.round(a+o)!==t&&(a-=dd(i,"left","right")+o),Math.round(c+s)!==n&&(c-=dd(i,"top","bottom")+s)),e!==Zl(e).document.documentElement&&(t=Math.round(a+o)-t,n=Math.round(c+s)-n,1!==Math.abs(t)&&(a-=t),1!==Math.abs(n)&&(c-=n)),hd(r.left,r.top,a,c)}(e):sd);return(this.contentRect_=e).width!==this.broadcastWidth||e.height!==this.broadcastHeight},Ed.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},Ed),gd=(yd.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof Zl(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new md(e)),this.controller_.addObserver(this),this.controller_.refresh())}},yd.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof Zl(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},yd.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},yd.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(e){e.isActive()&&t.activeObservations_.push(e)})},yd.prototype.broadcastActive=function(){var e,t;this.hasActive()&&(e=this.callbackCtx_,t=this.activeObservations_.map(function(e){return new vd(e.target,e.broadcastRect())}),this.callback_.call(e,t,e),this.clearActive())},yd.prototype.clearActive=function(){this.activeObservations_.splice(0)},yd.prototype.hasActive=function(){return 0<this.activeObservations_.length},yd),bd=new(void 0!==He?He:Ql);function yd(e,t,n){if(this.activeObservations_=[],this.observations_=new Ql,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}function Ed(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=hd(0,0,0,0),this.target=e}["observe","unobserve","disconnect"].forEach(function(t){pd.prototype[t]=function(){var e;return(e=bd.get(this))[t].apply(e,arguments)}});var wd=void 0!==td.ResizeObserver?td.ResizeObserver:pd;function _d(t,n,r){var o=s()?r.parentElement:r,e=Jl(i,150);function i(){var e=tc(o),t=e.width,e=e.height;n.dispatch({type:"CONTAINER_RESIZE",payload:{width:t,height:e}})}function s(){return r.parentElement===document.body}function a(e){var t,n=e.size,i=e.ratio,e=e.bottom;s()&&(o.classList.toggle("vp-center","contain"===n),t=r,[].concat(["height","max-width","max-height","bottom"]).map(function(e){return t.style.removeProperty(e)}),"contain"!==n?0<e&&vc(r,{height:"calc(100% - ".concat(e,"px)"),bottom:"".concat(e/2,"px")}):vc(r,0<e?{maxWidth:"calc((100vh - ".concat(e,"px) / ").concat(i,")"),maxHeight:"calc(100vh - ".concat(e,"px)"),height:"calc(".concat(i," * 100vw)"),bottom:"".concat(e/2,"px")}:{maxWidth:"calc(100vh / ".concat(i,")"),height:"calc(".concat(i," * 100vw)")}))}n.watch("ui.layout.bottom",function(e){t.events.fire(Mc.uf,[{bottom:e}])}),n.watch("ui.layout.settings",a),a(n.get("ui.layout.settings")),new wd(e).observe(o),window.addEventListener("orientationchange",e),t.events.on(Mc.qc,e),t.events.on(Mc.zc,e),i()}function Td(e,t,n){this.constructorName="MessageApiError",this.message=e,this.name=t,this.source=n}function Sd(e){return e}function Ad(e){if(!e||""===e)return{};if("object"===U(e))return e;try{return JSON.parse(e)}catch(e){return{}}}function kd(e){}Td.prototype=new Error;function Ld(e,t){return Cd.captureBreadcrumb(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:"backbone",3<arguments.length&&void 0!==arguments[3]?arguments[3]:"info")}var Rd={captureException:function(e){},captureMessage:function(e){},captureBreadcrumb:function(){}},Cd=Rd;function xd(e){var n=function(){var t=document.referrer||e;try{t=decodeURIComponent(t)}catch(e){t=unescape(t)}return t}(),s={},a={},c={parseMessage:Ad,buildMessage:Sd,logError:kd},t={},i={get methods(){return s},extendMethods:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];oe.apply(void 0,[s].concat(t))},get listeners(){return t},set listeners(e){t=e},emit:function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];!function(){if(a){for(var e,t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];if(a.global&&a.global.length)for(e=0;e<a.global.length;e++)if(!(t=a.global[e]).apply(t,i))return!1;var o=i[0];if(a.event&&a.event[o]&&a.event[o].length)for(e=0;e<a.event[o].length;e++)if(!(t=a.event[o][e]).apply(t,i))return!1}return!0}.apply(void 0,[e].concat(n))||(e={event:e},n&&n[0]&&(e.data=n[0]),u(e))},filter:function(e,t){var n;t||"function"!=typeof e||(t=e,e=null),e?(n=e,e=t,a.event=a.event||{},a.event[n]=a.event[n]||[],a.event[n].push(e)):(t=t,a.global=a.global||[],a.global.push(t))},hooks:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return oe.apply(void 0,[c].concat(t))}};function u(e){if(window.postMessage&&window.parent.postMessage&&(e=c.buildMessage(e),window.parent!=window))try{var t=n&&"null"!==n?n:"*";window.parent.postMessage(e,t)}catch(e){}}return window.addEventListener("message",function(e){if(e.source===window.parent){var t=c.parseMessage(e.data),n=t.method,i=t.value;if(!(void 0===n||"string"!=typeof n||-1<n.indexOf("_")))try{var r=function(e,t){if(!e)return null;if((i=Object.getOwnPropertyDescriptor(t,e))&&"function"==typeof i.value)return i.value;if(i&&"function"==typeof i.get)return i.get;var n=e.substr(0,3),e=e.substr(3,1).toLowerCase()+e.substr(4),i=Object.getOwnPropertyDescriptor(t,e);return"get"===n&&i&&"function"==typeof i.get?i.get:"set"===n&&i&&"function"==typeof i.set?i.set:null}(n,s);if(!r)throw new Td("â€œ".concat(e,"â€ is not a valid method. Valid methods are: ").concat((o=s,Object.keys(o).reduce(function(e,t){var n=Object.getOwnPropertyDescriptor(o,t);return"function"==typeof n.value?e.push(t):("function"==typeof n.get&&e.push("get"+t.charAt(0).toUpperCase()+t.slice(1)),"function"==typeof n.set&&e.push("set"+t.charAt(0).toUpperCase()+t.slice(1))),e},[]).sort().join(", ")),"."),"TypeError",n);Ld("API message received",t,"api"),ee.resolve(r.call(e,i)).then(function(e){return u({method:n,value:null==e?i:e})}).catch(c.logError)}catch(e){c.logError(e)}}var o},!1),i}function Id(e){return e.account_type&&"basic"!==e.account_type&&!/_lapsed|_expired/.test(e.account_type)}var Od=self!==top,Dd=function(){var e,t=document.createElement("video"),n={request:["requestFullscreen","webkitRequestFullscreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"],exit:["exitFullscreen","webkitCancelFullScreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"],enabled:["fullscreenEnabled","webkitFullscreenEnabled","mozFullScreenEnabled","msFullscreenEnabled"],element:["fullscreenElement","webkitFullscreenElement","webkitCurrentFullScreenElement","mozFullScreenElement","msFullscreenElement"],change:["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],error:["fullscreenerror","webkitfullscreenerror","mozfullscreenerror","MSFullscreenError"]},i={};for(e in n)for(var r=0,o=n[e].length;r<o;r++)if(n[e][r]in t||n[e][r]in document||"on"+n[e][r].toLowerCase()in document){i[e]=n[e][r];break}return i}(),Pd={ENTER:"enter",EXIT:"exit",CHANGE:"change",ERROR:"error"},Md=[],Nd={};function Fd(){var t=Array.prototype.slice.apply(arguments),e=t.shift();Nd[e].forEach(function(e){"function"==typeof e&&e.apply(e,t)})}function qd(n){return function(e,t){-1!==Md.indexOf(e)&&n.call(this,e,t)}}function Ud(e){var t=null;return"VIDEO"===e.tagName?t=e:(e=e.getElementsByTagName("video"))[0]&&(t=e[0]),t}Object.keys(Pd).forEach(function(e){Md.push(Pd[e]),Nd[Pd[e]]=[]});function jd(){}var Hd=null,Bd=[];function Vd(t){var n=Ud(t);if(n&&n.webkitEnterFullscreen){try{n.readyState<n.HAVE_METADATA?(n.addEventListener("loadedmetadata",function e(){n.removeEventListener("loadedmetadata",e,!1);try{n.webkitEnterFullscreen()}catch(e){return zd("cannot_enter_fullscreen",t)}},!1),n.load()):n.webkitEnterFullscreen(),Hd=n}catch(n){return zd("not_supported",t)}return!0}return zd(void 0===Dd.request?"not_supported":"not_enabled",t)}function Wd(e){var t=Bd[Bd.length-1];t&&(e!==t.element&&e!==Hd||!t.hasEntered)&&("VIDEO"===e.tagName&&(Hd=e),1===Bd.length&&Kd.onenter(Kd.element),t.enter.call(t.element,e||t.element),t.hasEntered=!0,Fd(Pd.ENTER,Kd.element))}function $d(){Hd=null;var e=Bd.pop();e&&(e.exit.call(e.element),Fd(Pd.EXIT,e.element),Kd.element||(Bd.forEach(function(e){e.exit.call(e.element),Fd(Pd.EXIT,e.element)}),Bd=[],Kd.onexit()))}function zd(e,t){var n;0<Bd.length&&(n=Bd.pop(),t=t||n.element,n.error.call(t,e),Kd.onerror(t,e),Fd(Pd.ERROR,t,e))}var Kd={request:function(e,t,n,i){if(e=e||document.body,Bd.push({element:e,enter:t||jd,exit:n||jd,error:i||jd}),void 0===Dd.request)return Vd(e);if(Od&&!1===document[Dd.enabled])return Vd(e);try{e[Dd.request]()}catch(t){zd("not_enabled",e)}},exit:function(){(!document[Dd.exit]&&Kd.element?Kd.element:document)[Dd.exit]()},toggle:function(e,t,n,i){Kd.element?Kd.exit():Kd.request(e,t,n,i)},videoEnabled:function(e){if(Kd.enabled)return!0;e=Ud(e=e||document.body);return!(!e||void 0===e.webkitSupportsFullscreen)&&(e.readyState<e.HAVE_METADATA?"maybe":e.webkitSupportsFullscreen)},on:qd(function(e,t){Nd[e].push(t)}),off:qd(function(e,t){t=Nd[e].indexOf(t);-1<t&&Nd[e].splice(t,1)}),onenter:jd,onexit:jd,onchange:jd,onerror:jd};try{Object.defineProperties(Kd,{element:{enumerable:!0,get:function(){return Hd&&Hd.webkitDisplayingFullscreen?Hd:document[Dd.element]||null}},enabled:{enumerable:!0,get:function(){return document[Dd.enabled]||!1}}})}catch(e){Kd.element=null,Kd.enabled=!1}function Gd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1===t.length&&t[0]instanceof Gd){var i=t[0];return this.red=i.red,this.green=i.green,this.blue=i.blue,this.alpha=i.alpha,this.hue=i.hue,this.saturation=i.saturation,this.lightness=i.lightness,this}if(1===t.length){if("string"==typeof t[0]&&0<=t[0].indexOf("rgb"))return this.rgba=function(e){if(!(e=/rgba?\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})(,\s*([\d.]+))?\)/.exec(e)))throw new Error("Invalid rgb value");return{red:parseInt(e[1],10),green:parseInt(e[2],10),blue:parseInt(e[3],10),alpha:parseFloat(e[5])||1}}(t[0]),this;if("string"!=typeof(i=(i="".concat(t[0])).replace("#",""))||3!==i.length&&6!==i.length||isNaN(parseInt(i,16)))throw new Error("Invalid hex value");return this.hex=t[0],this}if(3!==t.length&&4!==t.length)throw new Error("Invalid color");for(var r=0;r<3;r++)if(isNaN(parseInt(t[r],10))||parseInt(t[r],10)<0||255<parseInt(t[r],10))throw new Error("Invalid rgb value");if(t[3]&&parseFloat(t[3])<0||1<parseFloat(t[3]))throw new Error("Invalid alpha value");return this.rgba={red:t[0],green:t[1],blue:t[2],alpha:parseFloat(t[3])||1},this}function Yd(e,t){switch(e.view){case 2:throw new Td("The video is private.","PrivacyError",t);case 4:throw new Td("The video is password-protected. The viewer must enter the password first.","PasswordError",t);case 7:throw new Td(e.message,"NotFoundError",t)}}function Jd(e){for(var t=[],n=0;n<e.length;n++)t.push([e.start(n),e.end(n)]);return t}function Xd(r){var i,o,s,a=r.events,c=Q(),t=!1,n=!1,u=null,e=!1,l=null,d=null;function f(e){o!==e&&(o=e,r.config.embed.api=e)}function h(){i&&i.emit("exitFullscreen"),r.events.halt()}var v={ping:function(){return r.config.video.id},fullscreenchange:function(e){r.element.classList.toggle("js-player-fullscreen-api",e),e?(r.events.prependOn(Mc.mc,h),i.listeners.exitFullscreen=!0,r.events.fire(Mc.Hc),r.events.fire(Mc.qc,!0,!0)):(r.events.off(Mc.mc,h),i.listeners.exitFullscreen=!1,r.events.fire(Mc.Wc),r.events.fire(Mc.zc,!0))},on:function(e,t){e in Uc&&(e=Uc[e]);var n=mc(qc);if(n.indexOf(e)<0)throw new Td("â€œ".concat(e,"â€ is not a valid event. Valid events are: ").concat(n.join(", "),"."),"TypeError","on");t&&c.on(e,t),i&&(i.listeners[e]=!0),e===qc.LOADED&&w()},off:function(e,t){t&&c.off(e,t),i&&(i.listeners[e]=!1)},play:function(){return new ee(function(e,t){a.once(Mc.ec,e),a.once(Mc.ic,function(e){t(new Td(e.message,e.name,"play"))}),Yd(r.config,"play"),a.fire(Nc.Lf),a.fire(Mc.wc)})},destroy:function(){a.fire(Sc.Qs)},pause:function(){Yd(r.config,"pause"),a.fire(Nc.Df),a.fire(Mc.bc)},loadVideo:function(e){var t=function(e){if(!e)return{};if(Xa(e))return{id:parseInt(e,10),params:{}};if("string"==typeof e)return 0!==e.indexOf("https://")?{}:{url:e,params:{}};if("url"in e){if(0!==e.url.indexOf("https://"))return{};var t=e.url;return delete e.url,{url:t,params:e}}if("id"in e){if(!Xa(e.id))return{};t=e.id;return delete e.id,{id:parseInt(t,10),params:e}}return{}}(e),n=t.id,i=t.url,t=t.params;if(!n&&!i)throw new Td("The video id must be an integer.","TypeError","loadVideo");if(i&&i.match(null===new RegExp("^https?://".concat(r.config.player_url,"/video/([0-9]+)/config"))))throw new Td("The config url must be a valid Vimeo url.","TypeError","loadVideo");return r.loadVideo(i||n,t).then(function(){return e}).catch(function(){throw Yd(r.config,"loadVideo"),new Td("An error occurred loading the video.","Error","loadVideo")})},unload:function(){1!==r.config.view&&3!==r.config.view||a.fire(Sc.Rs)},addCuePoint:function(e,t){if(e=parseFloat(e),isNaN(e)||e<0||e>r.config.video.duration)throw new Td("Cue point time must be positive number less than the duration of the video (".concat(uc(r.config.video.duration),")."),"RangeError","addCuePoint");try{var n=r.backbone.addCuePoint(e,t);return setTimeout(function(){a.fire(Mc.Lc,n)},0),n.id}catch(e){if("CuePointsNotSupported"===e.name)throw new Td("Cue points are not supported in the current player.","UnsupportedError","addCuePoint");throw new Td("Unable to add cue point","InvalidCuePoint","addCuePoint")}},removeCuePoint:function(t){var e=r.backbone.cuePoints.filter(function(e){return e.id===t})[0];if(!e)throw new Td("Cue point â€œ".concat(t,"â€ was not found."),"InvalidCuePoint","removeCuePoint");r.backbone.removeCuePoint(e),setTimeout(function(){a.fire(Mc.Dc,e)},0)},enableTextTrack:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=("text_tracks"in r.config.request?r.config.request.text_tracks:[]).map(function(e){return e.language=e.lang,e});if(!n.some(function(e){return e.language.toLowerCase()===t.toLowerCase()}))throw new Td("There are no tracks for â€œ".concat(t.toUpperCase(),"â€."),"InvalidTrackLanguageError","enableTextTrack");n=function(e,t){if(t=1<arguments.length&&void 0!==t?t:[],!e||"null"===e||0===t.length)return{track:null};var e=Ve(e.split("."),2),n=e[0],i=e[1],r=Ve(n.split(/[-_]/),1)[0],o=n!==r,t=t.filter(function(e){return o&&e.language===n||e.language===r}).sort(function(e,t){e=2*(e.language===r&&e.kind===i)+2*(e.language===n)+ +(e.kind===i);return 2*(t.language===r&&t.kind===i)+2*(t.language===n)+ +(t.kind===i)-e});return 0<t.length?{track:t[0],exactMatch:t[0].language===n&&t[0].kind===i}:{track:null}}(e?"".concat(t,".").concat(e):t,n).track;if(!n||e&&n.kind!==e)throw new Td("There are no ".concat(e," tracks for â€œ").concat(t.toUpperCase(),"â€."),"InvalidTrackError","enableTextTrack");return a.fire(Sc.Bs,n.id),o<3?null:new ee(function(n,e){a.once(Mc.jc,function(e,t){n({label:e.label,language:e.language,kind:e.kind})})})},disableTextTrack:function(){a.fire(Sc.Hs)},toggleFullscreen:function(r){var o={not_supported:{name:"UnsupportedError",msg:"Fullscreen is not supported at all or for this element."},not_enabled:{name:"Error",msg:"The request was made from an iframe that does not allow fullscreen."},not_allowed:{name:"NotAllowedError",msg:"The request failed, probably because it was not called from a user-initiated event."}};return new ee(function(t,i){if(!Kd.element===r)return Kd.on("enter",function e(){Kd.off("enter",e),t()}),Kd.on("error",function e(t,n){Kd.off("error",e);n=o[n]||o.not_supported;i(new Td(n.msg,n.name,"".concat(r?"request":"exit","Fullscreen")))}),void a.fire(Mc.mc);t()})},requestFullscreen:function(){return v.toggleFullscreen(!0)},exitFullscreen:function(){return v.toggleFullscreen(!1)},get fullscreen(){return!!Kd.element},requestPictureInPicture:function(){return new ee(function(e,t){a.once(un.ENTER_PICTURE_IN_PICTURE,e),"picture-in-picture"!==r.backbone.presentationMode&&(r.backbone.presentationMode="picture-in-picture")})},exitPictureInPicture:function(){return new ee(function(e,t){a.once(un.LEAVE_PICTURE_IN_PICTURE,e),"picture-in-picture"===r.backbone.presentationMode&&(r.backbone.presentationMode="inline")})},get pictureInPicture(){return"picture-in-picture"===r.backbone.presentationMode},get autopause(){return!!r.config.embed.autopause},set autopause(e){r.config.embed.autopause=!!e},get chromecasting(){return!!bu.currentSession},get color(){return r.config.embed.color.replace("#","")},set color(e){if(r.config.embed.settings.color&&!r.config.embed.on_site)throw new Td("The creator of the video has chosen to always use ".concat(new Gd(r.config.embed.color).hex,"."),"EmbedSettingsError","setColor");try{var t=new Gd(e);a.fire(Sc.Ds,t.hex)}catch(e){throw new Td("The color should be 3- or 6-digit hex value.","TypeError","setColor")}e=new Gd(30,30,30,.9);if(e.contrast(t).ratio<3){e=t.clone().lighten(5,3,e);throw new Td("".concat(t.hex," does not meet minimum contrast ratio. We recommend using brighter colors. (You could try ").concat(e.hex," instead.) See WCAG 2.0 guidelines: http://www.w3.org/TR/WCAG/#visual-audio-contrast"),"ContrastError","setColor")}},get cuePoints(){return r.backbone.cuePoints.map(function(e){return{time:e.time,data:e.data,id:e.id}})},get currentTime(){return r.currentTime},set currentTime(e){if(e=parseFloat(e),isNaN(e)||e<0||e>r.config.video.duration)throw new Td("Seconds must be a positive number less than the duration of the video (".concat(uc(r.config.video.duration),")."),"RangeError","setCurrentTime");return a.fire(Nc.Ts),a.fire(Sc.Ts,null,e),a.fire(Mc._l),o<3?null:new ee(function(t,e){a.once(un.SEEKED,function(e){e=e.currentTime;t(e)})})},get duration(){return uc(r.config.video.duration)},get ended(){return!!r.backbone.ended},get loop(){return!!r.config.embed.loop},set loop(e){a.fire(Sc.Is,e)},set muted(e){r.backbone.muted=e},get muted(){return r.backbone.muted},get paused(){return!(r.backbone&&"paused"in r.backbone&&!r.backbone.paused)},get buffered(){return Jd(r.backbone.buffered)},get played(){return Jd(r.backbone.played)},get seekable(){return Jd(r.backbone.seekable)},get seeking(){return r.backbone.seeking},get playbackRate(){return r.backbone?r.backbone.playbackRate:1},set playbackRate(e){if(!r.config.embed.settings.speed)throw new Td("Setting the playback rate is not enabled for this video.","Error","setPlaybackRate");if(isNaN(e)||2<e)throw new Td("Playback rate should be a number below or equal to ".concat(2,"."),"RangeError","setPlaybackRate");a.fire(Sc.Zs,e)},get textTracks(){return(r.backbone?r.backbone.video.textTracks:[]).map(function(e){return{label:e.label,language:e.language,kind:e.kind,mode:e===l?"showing":"disabled"}})},get videoEmbedCode(){return r.config.video.embed_code},get videoHeight(){return r.backbone.videoHeight||r.config.video.height},get videoId(){return r.config.video.id},get videoTitle(){return r.config.video.title},get videoWidth(){return r.backbone.videoWidth||r.config.video.width},get videoUrl(){if(!r.config.video.url)throw new Td("The URL is not available because of the videoâ€™s privacy settings.","PrivacyError","getVideoUrl");return r.config.video.url},get volume(){var e=uc(r.config.request.cookie.volume);return 1===o?Math.round(100*e):e},set volume(e){if(e=parseFloat(e),1===o&&(e/=100),isNaN(e)||e<0||1<e)throw new Td("Volume should be a number between 0 and 1.","RangeError","setVolume");d=e,a.fire(Sc.Ss,e,!0)},get qualities(){return r.backbone.qualities},get quality(){return r.backbone.quality},set quality(e){if(!Id(r.config.video.owner))throw new Td("Setting the quality is not enabled for this video.","Error","setQuality");e=e.toLowerCase();var t=r.backbone.qualities.map(function(e){return e.id});if(!t.includes(e))throw new Td("â€œ".concat(e,"â€ is not a valid quality. Valid qualities are: ").concat(t.join(", "),"."),"TypeError","on");r.backbone.quality=e},_loadVideo:function(e,t){return r.loadVideo(e,t)},get _like(){return!!r.config.user.liked},set _like(e){r.config.embed.on_site&&r.config.user.liked!==e&&a.fire(Mc.Gc,e)},get _watchLater(){return!!r.config.user.watch_later},set _watchLater(e){r.config.embed.on_site&&r.config.user.watch_later!==e&&a.fire(Mc.Kc,e)},get currentChapter(){var t=r.backbone.currentChapterID;if(!t)return null;var e=Be(r.backbone.chapters),n=e.findIndex(function(e){return t===e.id});return{startTime:e[n].startTime,title:e[n].text,index:n+1}},get chapters(){return Be(r.backbone.chapters).map(function(e,t){return{startTime:e.startTime,title:e.text,index:t+1}})},_addChapter:function(e,t){if(e=parseFloat(e),isNaN(e)||e<0||e>r.config.video.duration)throw new Td("Chapter timecode must be positive number less than the duration of the video (".concat(uc(r.config.video.duration),")."),"RangeError","_addChapter");try{r.backbone.addChapter(e,t)}catch(e){if("ChaptersNotSupported"===e.name)throw new Td(e.message,"UnsupportedError","_addChapter");throw new Td("Unable to add chapter","InvalidChapter","_addChapter")}},_removeChapter:function(e){var t;try{t=r.backbone.chapters.getCueById(e)}catch(e){throw new Td("Chapters are not supported in this browser.","UnsupportedError","_removeChapter")}if(!t)throw new Td("Chapter was not found.","InvalidChapter","_removeChapter");try{r.backbone.removeChapter(t)}catch(e){if("ChaptersNotSupported"===e.name)throw new Td("Chapters are not supported in this browser.","UnsupportedError","_removeChapter");throw new Td("Unable to remove chapter","InvalidChapter","_removeChapter")}},_addCard:function(e){a.fire(Sc._addCard,e)},_removeCard:function(e){a.fire(Sc._removeCard,e)},_setOutro:function(e,t){r.config.embed.outro!==e?(a.fire(Sc._hideOutro),setTimeout(function(){r.config.embed.outro=e,a.fire(Sc.Ws,e,t)},400)):a.fire(Sc.Ws,e,t)},_hideOutro:function(){a.fire(Sc._hideOutro)},_setEmailCapture:function(e){var t;e?((t=e.customFields?r.config.embed.email_capture_form||{}:r.config.embed.email||{}).position=e.position.toLowerCase(),t.timecode=e.timecode,e.nohide=!0,e.noblur=!0,e.nofocus=Ys(e,"nofocus",!0),v._showOverlay("email-capture",e)):v._unsetEmailCapture()},_updateEmailCapture:function(e){e.custom_fields?a.fire(Sc._updateEmailCapture,e):this._setEmailCapture(e)},_setActiveEmailCapturePage:function(e){a.fire(Sc.Ms,e)},_unsetEmailCapture:function(){r.config.embed.outro&&(a.fire(Sc._hideOutro),delete r.config.embed.outro),r.config.embed.email&&(a.fire(Sc._hideOverlay,{unmakeModal:!0}),delete r.config.embed.email)},_hideOverlay:function(e){a.fire(Sc._hideOverlay,{name:e,unmakeModal:!0})},_showOverlay:function(e,t){a.fire(Sc._showOverlay,e,t)},_fireEvent:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.fire.apply(null,t)},_setEmbedEditor:function(e){r.config.embed.editor=!!e},_setEmbedSettings:function(n){r.config.embed.on_site&&(Object.keys(n).forEach(function(e){var t="object"===U(t=n[e])?t:Number(t);"badge"===e&&(t?t=s:s=r.config.embed.settings.badge),r.config.embed.settings[e]=t,a.fire(Mc.Vl,e,t)}),a.fire(Mc.jl,!1,r.config))},_setEmbedSetting:function(e,t){r.config.embed.on_site&&(t="object"===U(t)?t:Number(t),"badge"===e&&(t?t=s:s=r.config.embed.settings.badge),r.config.embed.settings[e]=t,a.fire(Mc.Vl,e,t),a.fire(Mc.jl,!1,r.config))},_setOTTVideoMetadata:function(e){r.config.request.flags.ott&&(r.ottVideoMetadata=e,a.fire(Mc.Bl,e))},_toggleDebugPanel:function(){a.fire(Mc.cl)},_overrideControlbarBehavior:function(e){a.fire(Sc._overrideControlbarBehavior,e)},_setControlbarVisibility:function(e){a.fire(Sc.zs,e)},get cameraProps(){var e=r.backbone.getEffectByName("ThreeSixtyEffect");if(r.backbone&&!e)throw new Td("Camera props are not available in the current player.","UnsupportedError","getCameraProps");return e.cameraProps},set cameraProps(e){var t=r.backbone.getEffectByName("ThreeSixtyEffect");if(r.backbone&&!t)throw new Td("Camera props are not available in the current player.","UnsupportedError","setCameraProps");try{t.cameraProps=e}catch(e){throw new Td(e.message,e.name,"setCameraProps")}},get _fieldOfView(){var e=r.backbone.getEffectByName("ThreeSixtyEffect");if(r.backbone&&!e)throw new Td("Field of view is not available in the current player.","UnsupportedError","getFieldOfView");return e.fieldOfView},set _fieldOfView(e){var t=r.backbone.getEffectByName("ThreeSixtyEffect");if(r.backbone&&!t)throw new Td("Field of view is not available in the current player.","UnsupportedError","setFieldOfView");t.fieldOfView=e},get _coordinates(){var e=r.backbone.getEffectByName("ThreeSixtyEffect");if(r.backbone&&!e)throw new Td("Coordinates are not available in the current player.","UnsupportedError","getCoordinates");return e.currentCoordinates},set _coordinates(e){var t=r.backbone.getEffectByName("ThreeSixtyEffect");if(r.backbone&&!t)throw new Td("Coordinates are not available in the current player.","UnsupportedError","setCoordinates");try{t.currentCoordinates=e}catch(e){throw new Td(e.message,"RangeError","setCoordinates")}},_setChromecastUI:function(e){var t=bu.currentSession;t&&Ht(e)&&t.sendMessage("urn:x-cast:com.vimeo.cast.media",{action:"setCustomUIStyles",value:e})},get _controlSelectors(){return{details:".vp-title",sidedock:".vp-sidedock",controls:".vp-controls",customLogo:".custom-logo"}},get _controlAreas(){var t=r.element.offsetWidth,n=r.element.offsetHeight,i={get details(){var e=tc(document.querySelector(".headers > h1")),t=tc(document.querySelector(".sub-title")),n=tc(document.querySelector(".vp-portrait")),i=Math.max(e.width,t.width)+n.width,t=Math.max(n.height,e.height+t.height);return{top:10,left:10,width:Math.max(200,i),height:Math.max(60,t)}},get sidedock(){return{top:10,left:t-10-36,width:36,height:118}},get controls(){var e=i.customLogo,e=Math.max(60,e.height);return{height:e,top:n-10-e,left:10,width:t-20}},get customLogo(){var e=document.querySelector(".custom-logo"),e=e?tc(e):{width:0,height:0};return{top:n-10-e.height,left:t-10-e.width,width:e.width,height:e.height}}};return i},get _presentationDelay(){return r.backbone.presentationDelay},set _presentationDelay(e){r.backbone.presentationDelay=e},get _liveLatency(){return r.backbone.latency},get _downloadSpeed(){return r.backbone.downloadSpeed},addEventListener:function(){v.on.apply(v,arguments)},removeEventListener:function(){v.off.apply(v,arguments)},seekTo:function(e){v.currentTime=e},changeColor:function(e){v.color=e}},p={addCuePoint:function(e){var t=e.time,e=e.data;return v.addCuePoint(t,e)},enableTextTrack:function(e){var t=e.language,e=e.kind;v.enableTextTrack(t,void 0===e?null:e)}};function m(e,t){i&&i.emit(e,t),c.fire(e,t)}function g(t,n){return function(){var e=n?n.apply(void 0,arguments):void 0;m(t,e)}}var b;function y(e){var t=e.currentTime,n=e.duration,e=e.timeProgress;return{seconds:uc(t),percent:uc(e),duration:uc(n)}}function E(e){return{playbackRate:e}}function w(){m(qc.LOADED,e?null:(e=!0,{id:r.config.video.id}))}function _(e){return T(function(){switch(u){case"BrowserNotSupported":case"FilesNotPlayable":case"MediaSrcNotSupportedError":return new Td("This video is not supported in this browser.","NotSupportedError");case"FileError":return new Td("There was an error loading the files for this video.","FileError")}return new Td("An error occurred during playback.","PlaybackError")}(u=e))}function T(e){var t={message:"An error occurred.",name:"Error",method:e.source};return t="MessageApiError"===e.constructorName?{message:e.message,name:e.name,method:e.source}:t}return r.config.embed.on_site||(f(r.config.embed.api),b=r.config.request.referrer,(i=new xd(b)).listeners=mc(qc).reduce(function(e,t){return X(X({},e),{},B({},t,!1))},{}),i.listeners[qc.READY]=!0,i.listeners[qc.ERROR]=!0,i.filter(function(e){return i.listeners[e]})),i&&(p=Vl({},v,p),i.extendMethods(p),i.hooks({logError:function(e){m(qc.ERROR,T(e))},parseMessage:function(e){if(!e||""===e)return{};if(Ht(e))return f(3),e;try{var t=JSON.parse(e);return f(2),t}catch(e){return f(null),m(qc.ERROR,"The Vimeo Froogaloop v1 API is no longer supported.\n Please follow the upgrade instructions here: https://goo.gl/mueGRR"),{}}},buildMessage:function(e){var t;null!=(t=r.config.embed)&&t.player_id&&(e.player_id=r.config.embed.player_id);try{Ht(e=2===o?function(e){if(e.event){for(var t in Uc)if(Uc[t]===e.event){e.event=t;break}"cuechange"===e.event&&(e.data.text=e.data.cues[0].text,e.data.html=e.data.cues[0].html,delete e.data.cues)}return JSON.stringify(e)}(e):e)&&"ready"===e.event&&(e=JSON.stringify(e))}catch(e){}return e}})),a.on(fn.BUFFER_STARTED,g(qc.BUFFER_START)),a.on(fn.BUFFER_ENDED,g(qc.BUFFER_END)),a.on(fn.CUE_POINT,g(qc.CUEPOINT,function(e){return{time:e.time,data:e.data,id:e.id}})),a.on(zo,g(qc.CUE_CHANGE,function(e){var t=e||{},n=t.language,e=t.label,t=t.kind;return{label:void 0===e?null:e,language:void 0===n?null:n,kind:void 0===t?null:t,cues:1<arguments.length&&void 0!==arguments[1]?arguments[1]:[]}})),a.on(Mc.Sc,g(qc.CHAPTER_CHANGE,function(t){var e=Be(r.backbone.chapters).findIndex(function(e){return t===e.id});return 0<=e?{startTime:r.backbone.chapters[e].startTime,title:r.backbone.chapters[e].text,index:e+1}:null})),a.on(Mc.uc,g(qc.ENDED,function(){return n=!1,{seconds:uc(r.config.video.duration),percent:1,duration:uc(r.config.video.duration)}})),a.on(Mc.tr,g(qc.PAUSE,function(e){return n=!1,{seconds:uc(e),percent:uc(e/r.config.video.duration),duration:uc(r.config.video.duration)}})),a.on(Mc.dc,g(qc.PLAYBACK_RATE_CHANGE,E)),a.on(Mc.dc,g(qc.RATE_CHANGE,E)),a.on(Mc.jc,g(qc.TEXT_TRACK_CHANGE,function(e){var t=(l=e)||{},n=t.language,e=t.label,t=t.kind;return{label:void 0===e?null:e,language:void 0===n?null:n,kind:void 0===t?null:t}})),a.on(Mc.ac,g(qc.VOLUME_CHANGE,function(e){return{volume:uc(e)}})),a.on(Mc.Rc,g(qc.CONTROL_BAR_VISIBILITY_CHANGED,function(e){return{visible:e}})),a.on(Mc.jl,function(e){d&&setTimeout(function(){a.fire(Sc.Ss,d,!0)},0),e&&w()}),a.on(Mc.nc,function(e){e=_(e);t&&m(qc.ERROR,e)}),a.on(Mc.qc,g(qc.FULLSCREENCHANGE,function(){return{fullscreen:!0}})),a.on(Mc.zc,g(qc.FULLSCREENCHANGE,function(){return{fullscreen:!1}})),a.on(Mc.sc,g(qc.QUALITY_CHANGE,function(e){return{quality:e}})),a.on(Mc.Rf,g(qc.AD_STARTED)),a.on(Mc.Sf,g(qc.AD_COMPLETED)),a.on(Mc.Af,g(qc.AD_ERROR)),a.on(Mc.If,g(qc.AD_SKIPPED)),a.on(Mc.Of,g(qc.AD_ALL_COMPLETED)),a.on(Mc.xf,g(qc.AD_CLICKED)),a.once(Mc.be,function(){t=!0,m(qc.READY),u&&(m(qc.ERROR,_(u)),u=null)}),a.on(ts.EVENT_ENDED,g(qc.LIVE_EVENT_ENDED)),a.on(ts.EVENT_STARTED,g(qc.LIVE_EVENT_STARTED)),a.on(ts.STREAM_OFFLINE,g(qc.LIVE_STREAM_OFFLINE)),a.on(ts.STREAM_ONLINE,g(qc.LIVE_STREAM_ONLINE)),a.on(vn.CAMERA_CHANGE,g(qc.CAMERA_CHANGE,function(e){return e})),a.on(vn.MOTION_END,g(qc.MOTION_END)),a.on(vn.MOTION_START,g(qc.MOTION_START)),a.on(vn.WEBVR_HARDWARE_AVAILABLE,g(qc.WEBVR_HARDWARE_AVAILABLE)),a.on(vn.WEBVR_ENTER,g(qc.ENTER_WEBVR)),a.on(vn.WEBVR_EXIT,g(qc.EXIT_WEBVR)),a.on(vn.SPATIAL_UNSUPPORTED,g(qc.SPATIAL_UNSUPPORTED)),a.on(un.PLAY,g(qc.PLAY,function(e){return n?null:(n=!0,{seconds:uc(e),percent:uc(e/r.config.video.duration),duration:uc(r.config.video.duration)})})),a.on(un.PLAYING,g(qc.PLAYING,function(){return n?{seconds:uc(r.currentTime),percent:uc(r.currentTime/r.config.video.duration),duration:uc(r.config.video.duration)}:null})),a.on(un.PROGRESS,g(qc.PROGRESS,function(e){var t=e.loaded,n=e.duration,e=e.loadProgress,n={seconds:uc(t),percent:uc(e),duration:uc(n)};return o<3&&(n.bytesLoaded=-1,n.bytesTotal=-1),n})),a.on(un.SEEKING,g(qc.SEEKING,y)),a.on(un.SEEKED,g(qc.SEEKED,y)),a.on(un.TIME_UPDATE,g(qc.TIME_UPDATE,function(e){var t=e.currentTime,n=e.duration,e=e.timeProgress;return{seconds:uc(t),percent:uc(e),duration:uc(n)}})),a.on(un.LOADED_METADATA,g(qc.LOADED_METADATA)),a.on(un.DURATION_CHANGE,g(qc.DURATION_CHANGE,function(e){return{duration:r.backbone.duration}})),a.on(un.WAITING,g(qc.WAITING)),a.on(un.LOADED_DATA,g(qc.LOADED_DATA)),a.on(un.LOAD_START,g(qc.LOAD_START)),a.on(un.RESIZE,g(qc.RESIZE,function(){return{videoWidth:r.backbone.videoWidth,videoHeight:r.backbone.videoHeight}})),a.on(un.ENTER_PICTURE_IN_PICTURE,g(qc.ENTER_PICTURE_IN_PICTURE)),a.on(un.LEAVE_PICTURE_IN_PICTURE,g(qc.LEAVE_PICTURE_IN_PICTURE)),a.on(pu.connected,g(qc.CHROMECAST_CONNECTED)),a.on(Sc.Rs,function(){u=null,e=!1}),r.doNotTrackEnabled||(a.on(Mc.Yl,function(){m(qc.EMAIL_CAPTURE)}),a.on(Mc.Jl,function(){m(qc.EMAIL_CAPTURE_FAILED)})),a.on(Mc.uf,function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};i&&(i.listeners[qc.SPACE_CHANGE]=!0,m(qc.SPACE_CHANGE,e))}),a.fire(Mc.mf),v}Dd.change&&document.addEventListener(Dd.change,function(e){var t;Kd.onchange(Kd.element),Fd(Pd.CHANGE,Kd.element),!Kd.element||(t=Bd[Bd.length-2])&&t.element===Kd.element?$d():Wd(Kd.element)},!1),document.addEventListener("webkitbeginfullscreen",function(e){var t=!0;if(0<Bd.length)for(var n=0,i=Bd.length;n<i;n++)if(Ud(Bd[n].element)===e.srcElement){t=!1;break}t&&Bd.push({element:e.srcElement,enter:jd,exit:jd,error:jd}),Kd.onchange(e.srcElement),Fd(Pd.CHANGE,Kd.srcElement),Wd(e.srcElement)},!0),document.addEventListener("webkitendfullscreen",function(e){Kd.onchange(e.srcElement),Fd(Pd.CHANGE,e.srcElement),$d(e.srcElement)},!0),Dd.error&&document.addEventListener(Dd.error,function(e){zd("not_allowed")},!1),Gd.prototype={get complement(){var e=this.clone();return e.rgb={red:255-this.red,green:255-this.green,blue:255-this.blue},e},get hex(){return Gd.rgbToHex(this.red,this.green,this.blue)},set hex(e){return this.rgba=Gd.hexToRgb(e),this},get hsl(){return"hsl("+this.hue+","+this.saturation+"%,"+Math.round(this.lightness)+"%)"},set hsl(e){this.hue=e.hue,this.saturation=e.saturation,this.lightness=e.lightness;e=Gd.hslToRgb(e.hue,e.saturation,e.lightness);return this.red=e.red,this.green=e.green,this.blue=e.blue,this.alpha=e.alpha,this},get luminance(){function e(e){return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}return.2126*e(this.red/255)+.7152*e(this.green/255)+.0722*e(this.blue/255)},get rgb(){return"rgb("+this.red+","+this.green+","+this.blue+")"},set rgb(e){return this.rgba=e,this},get rgba(){return"rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")"},set rgba(e){this.red=e.red,this.green=e.green,this.blue=e.blue,this.alpha=e.alpha||1;e=Gd.rgbToHsl(e.red,e.green,e.blue);return this.hue=e.hue,this.saturation=e.saturation,this.lightness=e.lightness,this},get yiq(){return(299*this.red+587*this.green+114*this.blue)/1e3},clone:function(){return new Gd(this)},lighten:function(e,t,n){if(this.hsl={hue:this.hue,saturation:this.saturation,lightness:this.lightness+e},t&&n)for(var i=n.contrast(this).ratio;i<t&&(this.lighten(5),i=n.contrast(this).ratio,!(100<=this.lightness)););return this},darken:function(e,t,n){if(this.hsl={hue:this.hue,saturation:this.saturation,lightness:this.lightness-e},t&&n)for(var i=n.contrast(this).ratio;i<t&&(this.darken(5),i=n.contrast(this).ratio,!(this.lightness<=0)););return this},overlayOn:function(e){if(1<=this.alpha)return this;var t=this.clone();return t.rgba={red:t.red*this.alpha+e.red*e.alpha*(1-this.alpha),green:t.green*this.alpha+e.green*e.alpha*(1-this.alpha),blue:t.blue*this.alpha+e.blue*e.alpha*(1-this.alpha),alpha:t.alpha+e.alpha*(1-this.alpha)},t},contrast:function(e){var t=this.alpha;if(1<=t){e.alpha<1&&(e=e.overlayOn(this));var n=this.luminance+.05,i=e.luminance+.05,r=n/i;return n<i&&(r=1/r),{ratio:r=Math.round(10*r)/10,error:0,min:r,max:r}}n=this.overlayOn(Gd.white).contrast(e).ratio,i=this.overlayOn(Gd.black).contrast(e).ratio,r=Math.max(n,i),n={red:Math.min(Math.max(0,(e.red-this.red*t)/(1-t)),255),green:Math.min(Math.max(0,(e.green-this.green*t)/(1-t)),255),blue:Math.min(Math.max(0,(e.blue-this.blue*t)/(1-t)),255)},t=this.clone();t.rgb=n;e=this.overlayOn(t).contrast(e).ratio;return{ratio:Math.round((e+r)/2*10)/10,error:Math.round((r-e)/2*10)/10,min:e,max:r,closest:t,farthest:i===r?Gd.white:Gd.black}},wcagAACompliant:function(e){return 4.5<=this.contrast(e).ratio},wcagAAACompliant:function(e){return 7<=this.contrast(e).ratio},yiqContrastColor:function(){return 120<=this.yiq?new Gd(0,0,0):new Gd(255,255,255)}},Gd.hexToRgb=function(e){var t;return 3===(e=String(e)).length||4===e.length?(t=/^#?([A-Fa-f0-9])([A-Fa-f0-9])([A-Fa-f0-9])$/i.exec(e))&&(t[1]+=t[1],t[2]+=t[2],t[3]+=t[3]):t=/^#?([A-Fa-f0-9]{2})([A-Fa-f0-9]{2})([A-Fa-f0-9]{2})$/i.exec(e),t?{red:parseInt(t[1],16),green:parseInt(t[2],16),blue:parseInt(t[3],16),alpha:1}:null},Gd.rgbToHex=function(e,t,n){return"#"+((1<<24)+(Math.round(e)<<16)+(Math.round(t)<<8)+Math.round(n)).toString(16).slice(1)},Gd.rgbToHsl=function(e,t,n){e/=255,t/=255,n/=255;var i=Math.max(e,t,n),r=Math.min(e,t,n),o=(i+r)/2,s=o;if(i===r)return{hue:0,saturation:0,lightness:100*s};var a=i-r,r=.5<s?a/(2-i-r):a/(i+r);return i===e?o=(t-n)/a+(t<n?6:0):i===t?o=(n-e)/a+2:i===n&&(o=(e-t)/a+4),o/=6,{hue:Math.round(360*o),saturation:Math.round(100*r),lightness:Math.round(100*s)}},Gd.hslToRgb=function(e,t,n){function i(e,t,n){return n<0&&(n+=1),1<n&&--n,6*n<1?e+6*(t-e)*n:2*n<1?t:3*n<2?e+6*(2/3-n)*(t-e):e}if(e/=360,n/=100,0==(t/=100))return{red:Math.floor(255*n),green:Math.floor(255*n),blue:Math.floor(255*n)};t=n<.5?n*(1+t):n+t-t*n,n=2*n-t;return{red:Math.floor(255*i(n,t,e+1/3)),green:Math.floor(255*i(n,t,e)),blue:Math.floor(255*i(n,t,e-1/3))}},Gd.hslToHex=function(e,t,n){n=Gd.hslToRgb(e,t,n);return Gd.rgbToHex(n.red,n.green,n.blue)},Gd.white=new Gd("fff"),Gd.black=new Gd("000");var Zd=((Ee=rf.prototype).show=function(e){this.alertContentElement.innerHTML=e,this.alertContentElement.classList.remove("hidden"),this.alertTextElement.classList.remove("hidden")},Ee.hide=function(){this.alertContentElement.classList.add("hidden"),this.alertTextElement.classList.add("hidden")},rf),Qd=Object.prototype.hasOwnProperty,ef=sn(function(e,t){if(kt(t)||Mt(t))Jt(t,bs(t),e);else for(var n in t)Qd.call(t,n)&&Yt(e,n,t[n])}),tf=t(function(l){!function(){var i=("undefined"==typeof window||window!==this)&&null!=q?q:this,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)};function n(){n=function(){},i.Symbol||(i.Symbol=e)}var r=0;function e(e){return"jscomp_symbol_"+(e||"")+r++}function o(){n();var e=(e=i.Symbol.iterator)||(i.Symbol.iterator=i.Symbol("iterator"));"function"!=typeof Array.prototype[e]&&t(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return s(this)}}),o=function(){}}function s(e){var t,n=0;return t=function(){return n<e.length?{done:!1,value:e[n++]}:{done:!0}},o(),(t={next:t})[i.Symbol.iterator]=function(){return this},t}function d(e){o();var t=e[I.iterator];return t?t.call(e):s(e)}function f(e){if(!(e instanceof Array)){e=d(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}var h=0,v="img script iframe link audio video source".split(" ");function p(e,t){if(2<e.length)return performance.now();for(var n=[],i=(t=d(t)).next();!i.done;i=t.next())i=i.value,n.push({timestamp:i.start,type:"requestStart"}),n.push({timestamp:i.end,type:"requestEnd"});for(i=(t=d(e)).next();!i.done;i=t.next())n.push({timestamp:i.value,type:"requestStart"});for(n.sort(function(e,t){return e.timestamp-t.timestamp}),e=e.length,t=n.length-1;0<=t;t--)switch((i=n[t]).type){case"requestStart":e--;break;case"requestEnd":if(2<++e)return i.timestamp;break;default:throw Error("Internal Error: This should never happen")}return 0}function a(e){this.w=!!(e=e||{}).useMutationObserver,this.u=e.minValue||null,e=window.__tti&&window.__tti.e;var n,i,o,s,a,r,c,u,l,t=window.__tti&&window.__tti.o;this.a=e?e.map(function(e){return{start:e.startTime,end:e.startTime+e.duration}}):[],t&&t.disconnect(),this.b=[],this.f=new P,this.j=null,this.v=-1/0,this.i=!1,this.h=this.c=this.s=null,r=this.m.bind(this),c=this.l.bind(this),u=XMLHttpRequest.prototype.send,l=h++,XMLHttpRequest.prototype.send=function(e){for(var t=[],n=0;n<arguments.length;++n)t[+n]=arguments[n];var i=this;return r(l),this.addEventListener("readystatechange",function(){4===i.readyState&&c(l)}),u.apply(this,t)},o=this.m.bind(this),s=this.l.bind(this),a=fetch,fetch=function(e){for(var r=[],t=0;t<arguments.length;++t)r[+t]=arguments[t];return new ee(function(t,n){var i=h++;o(i),a.apply(null,[].concat(f(r))).then(function(e){s(i),t(e)},function(e){s(e),n(e)})})},(i=this).c=new PerformanceObserver(function(e){for(var t,n=(e=d(e.getEntries())).next();!n.done;n=e.next())"resource"===(n=n.value).entryType&&(i.b.push({start:n.fetchStart,end:n.responseEnd}),m(i,p(i.g,i.b)+5e3)),"longtask"===n.entryType&&(t=n.startTime+n.duration,i.a.push({start:n.startTime,end:t}),m(i,t+5e3))}),i.c.observe({entryTypes:["longtask","resource"]}),this.w&&(this.h=(n=this.B.bind(this),(t=new MutationObserver(function(e){for(var t=(e=d(e)).next();!t.done;t=e.next())("childList"==(t=t.value).type&&function e(t,n){for(var i=(t=d(t)).next();!i.done;i=t.next())if(i=i.value,n.includes(i.nodeName.toLowerCase())||e(i.children,n))return 1}(t.addedNodes,v)||"attributes"==t.type&&v.includes(t.target.tagName.toLowerCase()))&&n(t)})).observe(document,{attributes:!0,childList:!0,subtree:!0,attributeFilter:["href","src"]}),t))}function c(e){e.i=!0;var t=0<e.a.length?e.a[e.a.length-1].end:0,n=p(e.g,e.b);m(e,Math.max(n+5e3,t))}function m(o,e){!o.i||o.v>e||(clearTimeout(o.j),o.j=setTimeout(function(){var e=performance.timing.navigationStart,t=p(o.g,o.b),e=(window.a&&window.a.A?1e3*window.a.A().C-e:0)||performance.timing.domContentLoadedEventEnd-e,n=o.u||(performance.timing.domContentLoadedEventEnd?(n=performance.timing).domContentLoadedEventEnd-n.navigationStart:null),i=performance.now();null===n&&m(o,Math.max(t+5e3,i+1e3));var r=o.a;(t=i-t<5e3||i-(t=r.length?r[r.length-1].end:e)<5e3?null:Math.max(t,n))&&(o.s(t),clearTimeout(o.j),o.i=!1,o.c&&o.c.disconnect(),o.h&&o.h.disconnect()),m(o,performance.now()+1e3)},e-performance.now()),o.v=e)}a.prototype.getFirstConsistentlyInteractive=function(){var t=this;return new ee(function(e){t.s=e,"complete"==document.readyState?c(t):window.addEventListener("load",function(){c(t)})})},a.prototype.m=function(e){this.f.set(e,performance.now())},a.prototype.l=function(e){this.f.delete(e)},a.prototype.B=function(){m(this,performance.now()+5e3)},i.Object.defineProperties(a.prototype,{g:{configurable:!0,enumerable:!0,get:function(){return[].concat(f(this.f.values()))}}});var u={getFirstConsistentlyInteractive:function(e){return e=e||{},"PerformanceLongTaskTiming"in window?new a(e).getFirstConsistentlyInteractive():ee.resolve(null)}};l.exports?l.exports=u:window.ttiPolyfill=u}()}),nf=X(X({},Kc),{},{ALERT_DISPLAYED:"alert-displayed",ALERT_HIDDEN:"alert-hidden",CAPTIONS_ENABLED:"captions-enabled",CAPTIONS_DISABLED:"captions-disabled",CHROMECAST_CONNECTED:"chromecast-connected",CHROMECAST_DISCONNECTED:"chromecast-disconnected",DRM_KEY_SWITCH:"drm-key-switch",ERROR_LINK_PRESSED:"error-link-pressed",MEDIASESSION_PLAY:"mediasession-play",MEDIASESSION_PAUSE:"mediasession-pause",MEDIASESSION_SEEK_FORWARD:"mediasession-seekforward",MEDIASESSION_SEEK_BACKWARD:"mediasession-seekbackward",SLATE_DISPLAYED:"slate-displayed",CLICK:"click",VIDEO_DURATION_MISMATCH:"video-duration-mismatch",VIDEO_FULLSCREEN_CHANGE:"video-fullscreen-change",VIDEO_MANIFEST_LOADED:"video-manifest-loaded",VIDEO_MANIFEST_TIMEOUT:"video-manifest-timeout",VIDEO_PLAYBACK_RATE_CHANGED:"video-playback-rate-changed",VIDEO_STREAM_CHANGE:"video-stream-change",VIDEO_SWITCH_BACK_TO_AUTO:"video-switch-back-to-auto",VIDEO_SWITCH_FROM_AUTO:"video-switch-from-auto",DOWNLOAD_TIMEOUT:"video-download-timeout",AD_BUFFERING:"ad-buffering",AD_COMPLETE:"ad-complete",AD_CLICKED:"ad-clicked",AD_ERROR:"ad-error",AD_PAUSED:"ad-paused",AD_RESUMED:"ad-resumed",AD_STARTED:"ad-started",AD_SKIPPED:"ad-skipped",OUTRO_VIDEO_SELECTED:"outro-video-selected",WEBVR_HARDWARE_AVAILABLE:"webvr-hardware-available",ENTER_WEBVR:"enter-webvr",EXIT_WEBVR:"exit-webvr"});function rf(e){this.alertTextElement=e.querySelector(".vp-text-alert-wrapper"),this.alertContentElement=this.alertTextElement.querySelector(".vp-alert-text")}function of(e){return gc("av01",e)?"AV1":gc("hvc1",e)?"HEVC":gc("avc1",e)?"AVC":null}function sf(e){return gc("mp4a",e)?"AAC":gc("opus",e)?"OPUS":null}function af(e,t){var n,i;return null!=e&&null!=(n=e.request)&&null!=(i=n.ab_tests)&&i[t]?e.request.ab_tests[t]:{}}function cf(f,e,n,t){function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return ee.resolve(function(e){var a=e.identifier,t=e.data,c=t.request,u=t.response,l=t.extraContext,d=u.headers;return function(e,t,n){return e&&e.then||(e=ee.resolve(e)),t?e.then(t):e}(u.arrayBuffer(),function(e){if("video"===a.type){var t=f.backbone.representations.reverse(),n=t[a.stream];if(!n)return;var i=function(e,t,n,i,r,o){var s=n.headers;delete s[""];var a={};Object.keys(s).forEach(function(e){var t=s[e],n=e.replace(h,"_");a[n]=t});var c=o.slice();return c.forEach(function(e){e.profile=String(e.profile||"")||null,e.id=String(e.id||"")||null}),{host:pe(t.data.url),product:Zc(f),duration:t.data.duration,size:i.byteLength,index:e.segment,session_id:f.config.request.session,profile_id:String(r.profile||"")||null,quality:r.quality,streams:c,clip_id:f.config.video.id,video_file_id:String(r.id||"")||null,headers:a,buffered:uc(fe(f.backbone.currentTime,f.backbone.buffered),2),ttfb:Q(n),request_id:t.data.uuid?t.data.uuid:""}}(a,c,u,e,n,t),r=i;l&&(r=ef({extraContext:l},i)),f.events.fire(Mc.jf,{name:nf.CHUNK_DOWNLOADED,data:r});var o={ak_reference_id:i.headers.akamai_reference_id||null,akamai_edge_ip:i.headers.akamai_edge_ip||null,content_length:i.headers.content_length||null,content_type:i.headers.content_type||null,x_vim_cachebc:i.headers.x_vim_cachebc||null,x_cache:i.headers.x_cache||null,x_cache_hits:i.headers.x_cache_hits||null};i.headers=o,af(f.config,"chunk_logging").group&&f.config.request.urls.fresnel_chunk_url&&function(e,t,n){var i=Date.now(),r=[{uuid:lc(),created_at:i,event:{name:"chunk_downloads",version:5,ts_ms:i,fields:t},tracker:{name:"vimeo-player",version:n}}];new Gc(e).logRequestPromiseWithUrl(e,JSON.stringify(r),!0)}(f.config.request.urls.fresnel_chunk_url+"?beacon=1",i,Qc(f.config)),Y+=e.byteLength}"akamai-edge-ip"in d&&(N=d["akamai-edge-ip"]),"quic-version"in d&&(F=d["quic-version"]),"x-vim-cachebc"in d&&(q=d["x-vim-cachebc"]),"x-akamai-request-id"in d&&(U=d["x-akamai-request-id"]),"ak-reference-id"in d&&(j=d["ak-reference-id"]),function(e){var t=e.headers,n=e.url;if("x-cache-hits"in t){var i=t["x-cache-hits"].match(/(0|1)(?:, (0|1))?/);null!==i&&(H={url:n,servedBy:t["x-served-by"],edge:i[1]?!!parseInt(i[1],10):null,tier1:i[2]?!!parseInt(i[2],10):null,tier2:null})}else if("x-vim-cachebc"in t){var r=t["x-vim-cachebc"].match(/E:(m|h)(?:,TD0:(m|h))?(?:,TD1:(m|h))?(?:,TD2:(m|h))?/);if(null!==r)for(var o in H={url:n,edge:r[1]?r[1]:null,tier1:r[2]?r[2]:null,tier2:r[3]?r[3]:null})"edge"!==o&&"tier1"!==o&&"tier2"!==o||("h"===H[o]?H[o]=!0:"m"===H[o]&&(H[o]=!1))}}(u);var s={};N&&(s.akamai_edge_ip=N),F&&(s.quic_version=F),q&&(s.akamai_cache_debug=q),U&&(s.akamai_request_id=U),j&&(s.akamai_reference_id=j),s.manifest_load_durations=f.backbone.manifestLoadDurations,s.successful_segment_count=f.backbone.successfulSegments.length,s.failed_segment_count=f.backbone.failedSegments.length,W=s})}.apply(this,e))}catch(e){return ee.reject(e)}}var r,o,s,l,a,c,u=new He,h=new RegExp("-","g"),d=null,v=null,p=!1,m=!0,g=!1,b=!1,y="auto",E={},w={},_=null,T=null,S=null,A=[],k=null,L={},R=!1,C=!1,x="none",I=!1,O=0,D=0,P=0,M=0,N=null,F=null,q=null,U=null,j=null,H=null,B=!1,V=null,W=null,$=null,z=null,K=!1,G=!1,Y=0;function J(){var e=u.get(f.backbone.videoElement);if(e)return o=e.uh,void(s=e.ah);s=new zc,o=new Xc(f.backbone.videoElement,Z),X(),u.set(f.backbone.videoElement,{uh:o,ah:s})}function X(){var e=s;o.customizeHooks({bufferTracker:e,videoBufferCheck:function(){f.events.on(fn.BUFFER_STARTED,function(){p&&(K||B||(B=!0,e.trackBufferStart(o.logBufferStart,{lower_profile_available:f.backbone.isLowerProfileAvailable})))}),f.events.on(fn.BUFFER_ENDED,function(){p&&B&&(B=!1,e.trackBufferEnd(o.logBufferEnd,{cdn_data:H}),e.resetLastBufferTime())})},addEventData:function(e){var t=G;switch(G=!1,e){case nf.VIDEO_START_TIME:return W;case nf.VIDEO_SEEK:var n=$;return $=null,n;case nf.VIDEO_EXIT:return{tti:V};case nf.VIDEO_PLAYED:case nf.VIDEO_PAUSED:return{api_call:t}}return null}}),o.initHooks()}function Z(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};(t=Object.assign(o?o.globalProperties():{},Object.assign(function(){var e,t={autoplay:1===f.config.embed.autoplay,background:!!f.config.embed.settings.background,clip_id:f.config.video.id,context:f.config.embed.context,device_pixel_ratio:window.devicePixelRatio||1,drm:!!f.config.request.drm,embed:!f.config.embed.on_site,is_mod:!!f.config.user.mod,is_spatial:!(!An.spatialPlayback||!f.config.video.spatial),logged_in:!!f.config.user.logged_in,looping:!!f.config.embed.loop,owner_id:null==(e=f.config.video)||null==(t=e.owner)?void 0:t.id,product:Zc(f),referrer:f.config.request.referrer,session_id:f.config.request.session,stayed_on_auto:m,version:Qc(f.config),version_backend:f.config.request.build.backend,viewer_id:null==(e=f.config.user)?void 0:e.id,viewer_team_id:null==(t=f.config.user)?void 0:t.team_id,viewer_team_origin_user_id:null==(e=f.config.user)?void 0:e.team_origin_user_id,vuid:Fu("vuid")};return f.config.video.owner&&(t.account_type=f.config.video.owner.account_type),f.config.embed.api&&(t.api_version=f.config.embed.api),f.config.embed.app_id&&(t.app_id=String(f.config.embed.app_id)),f.config.video.privacy&&(t.privacy=f.config.video.privacy),n.get(Du)&&(t.live_session_id=null==(e=f.config.video.live_event)?void 0:e.id),An.webvr&&f.config.video.spatial&&(t.webvr_support=!0),An.webxr&&f.config.video.spatial&&(t.webxr_support=!0),f.config.request.drm&&f.config.request.drm.fallback_asset&&(t.has_sd_drm_fallback=!0),t}(),function(){var e,t=f.backbone.video?f.backbone.video.currentFile:{},n=function(){var e={},n=Wl(),t=la("asc"),i="MediaSourceScanner"===f.backbone.currentScannerName,r="HTMLScanner"===f.backbone.currentScannerName,o="HLSLiveScanner"===f.backbone.currentScannerName,s=[];r&&(s=Ys(f.config,"request.files.progressive")||Ys(f.config,"request.files.hls")||[]),i&&(s=Ys(f.config,"request.files.dash.streams",[])),o&&(s="video/vnd.mpeg.dash.mpd"===f.backbone.video.currentFile.mime?Ys(f.config,"request.files.dash.streams",[]):Ys(f.config,"request.files.hls.streams",[]));var a=Be(s).sort(t).map(function(e){return e.profile}),c=-1,u=0,l=null;return Object.keys(w).forEach(function(e){var t=a.indexOf(parseInt(e,10));c<t&&(c=t);t=w[e].reduce(function(e,t){return((t.end||n)-t.start)/1e3+e},0);u<t&&(u=t,l=e)}),e.highest_profile=a[c],e.highest_available_profile=a[a.length-1],e.most_used_profile=l,(i||o)&&A&&(e.max_speed=Math.round(Math.max.apply(Math,te(A)))/1e3,e.min_speed=Math.round(Math.min.apply(Math,te(A)))/1e3,o=A.reduce(function(e,t){return e+t},0),e.average_speed=Math.round(o/A.length)/1e3),e}(),i=t.id,r=void 0===i?0:i,o=t.mime,i=void 0===o?"video/mp4":o,o=t.metadata,o=(o=void 0===o?{}:o).profile,s=void 0===o?null:o,a=!1,c=!1;switch(i){case Tc:0===t.restrictedStreamIndexes.length&&(a=!0),Ys(f.config,"request.files.dash.separate_av")&&(c=!0),s=E?E.profile:null;break;case"application/vnd.apple.mpegurl":a=!0}var u,r={audio_bitrate:f.backbone.getBitrateAtTime(f.backbone.currentTime,"audio")/1e3,auto:a,average_speed:n.average_speed||0,cdn:t.metadata?t.metadata.cdn:"akamai",delivery:"live"!==Fc[i]?Fc[i]:"dash",display:f.expose.pictureInPicture?"pip":f.expose.fullscreen?"fs":null,dropped_frames:M,dropped_frame_percent:P,event_time:d+(i=v,$l()-i),ended:C,forced_embed_quality:x,fullscreen:I,highest_available_profile:n.highest_available_profile?String(n.highest_available_profile):null,highest_profile:n.highest_profile?String(n.highest_profile):null,max_speed:isFinite(n.max_speed)?n.max_speed:0,mime:t.mime||null,min_speed:isFinite(n.min_speed)?n.min_speed:0,most_used_profile:n.most_used_profile?String(n.most_used_profile):null,origin:t.metadata?t.metadata.origin:"",profile_id:s?String(s):null,codec:gs(E)?"":of(E.codecs),audio_codec:sf(null==(n=f.backbone)||null==n.getCurrentStream||null==(e=n.getCurrentStream("audio"))?void 0:e.codecs)||null,quality:E?E.quality:null,quality_downswitch_count:D,quality_upswitch_count:O,quality_switch_count:O+D,separate_av:c,target_profile_id:z,ttfb:function(){var e=-1;{var t;void 0===window.performance||"function"!=typeof window.performance.getEntriesByType||(t=window.performance.getEntriesByType("resource"))&&(t=t.filter(function(e){return null!==e.name.split("?")[0].match(/\.m4s$|\.ts$/)}),e=t.map(function(e){return e.responseStart-e.connectStart}).reduce(function(e,t){return e+t},0)/(t.length||1))}return uc(e,2)}(),video_bitrate:f.backbone.getBitrateAtTime(f.backbone.currentTime,"video")/1e3,video_duration:uc(f.config.video.duration),video_file_id:Number.isInteger(Number(r))?parseInt(r,10):null};return f.backbone.isLive&&(r.ecdn=!!f.config.video.p2p,r.ecdn&&(r.ecdn_peers=null==(u=window.Streamroot)?void 0:u.instances[0].stats.realtime.dnaSources),0<=(null==(u=f.backbone.buffered)?void 0:u.length)&&(r.latency=uc(fe(f.backbone.currentTime,f.backbone.buffered),2)),void 0!==f.backbone.lowLatencyMode&&(r.is_low_latency=f.backbone.lowLatencyMode)),f.config.request.drm&&(r.drm_mode=l),r}(),function(){var e={};if(f.config.request.ab_tests)for(var t in f.config.request.ab_tests){var n,i=f.config.request.ab_tests[t];for(n in e["".concat(t,"_test")]=1,e["".concat(t,"_group")]=i.group,i.data)e["".concat(t,"_data_").concat(n)]=i.data[n]}return e}()),t)).name=e,f.events.fire(Mc.jf,{name:e,data:t}),r.log(t).catch(function(e){})}function Q(e){var t=e.url,n=-1;return window.performance&&(!(e=window.performance.getEntriesByType("resource")).length||(e=e.filter(function(e){return e.name===t}).sort(function(e,t){return e.connectStart-t.connectStart})).length&&(n=(e=e[e.length-1]).responseStart-e.connectStart)),uc(n,2)}v=$l(),d=f.config.request.timestamp,l=f.config.request.drm?"default":null,r=new Gc((c="?beacon=1&session-id=".concat(f.config.request.session),f.config.request.urls.fresnel+c)),f.events.on(Mc.nc,function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{final:!0};o.handleExternalError({error_type:e,error_reason:2<arguments.length&&void 0!==arguments[2]?arguments[2]:null},t)}),f.events.on(Sc.Rs,function(){R=!1}),f.events.on(Sc.Ts,function(){K=!0}),f.events.on(Mc.Zl,function(e,t){Z(nf.ERROR_LINK_PRESSED,{error_type:t,error_url:e})}),f.events.on(Mc.qc,function(){I=!0,Z(nf.VIDEO_FULLSCREEN_CHANGE)}),f.events.on(Mc.zc,function(){I=!1,Z(nf.VIDEO_FULLSCREEN_CHANGE)}),f.events.on(Mc.wf,function(e,t){Z(e?nf.ALERT_DISPLAYED:nf.ALERT_HIDDEN)}),f.events.on(Mc.jl,function(){d=f.config.request.timestamp,v=$l(),b=g=!(m=!(p=!1)),y="auto",E={},w={},A=[],C=R=!(L={}),I=!(x="none"),z=V=H=q=F=N=k=S=T=_=null,Y=M=P=D=O=0,l=f.config.request.drm?"default":null,o&&(o.reset(),X())}),f.events.on(Mc.vc,function(){$={seek_type:"nudge"}}),f.events.on(Mc.xc,function(e,t){$={seek_type:t}}),f.events.on(Mc.kc,function(e){$={seek_type:"chapter-".concat(e)}}),f.events.on(Mc.Wl,function(e){Z(nf.OUTRO_VIDEO_SELECTED,{selected_video_id:e})}),f.events.on(Vo,function(){var e,t,n,i,r;R||bu.isCastConnected||(f.performDelegateAction(Pc,function(e){R=!0,a.then(function(){return o.logStartRequest()}).catch(function(){})}),af(f.config,"chunk_logging").group&&f.config.request.urls.fresnel_manifest_url&&(e=f.config.request.urls.fresnel_manifest_url+"?beacon=1",t=f.config.request.session,n=f.backbone.manifest,i=Qc(f.config),r=Date.now(),i=[{uuid:lc(),created_at:r,event:{name:"session_manifest",version:1,ts_ms:r,fields:{sessionID:t,manifest:n}},tracker:{name:"vimeo-player",version:i}}],new Gc(e).logRequestPromiseWithUrl(e,JSON.stringify(i),!0)))}),f.events.on(Mc.Qc,function(e){"email-capture"===e&&Z(nf.SLATE_DISPLAYED,{slate_type:"email"})}),f.events.on(Mc.dc,function(e,t){Z(nf.VIDEO_PLAYBACK_RATE_CHANGED,{previous_playback_rate:t})}),f.events.on(Mc.fc,function(e){Z(nf.CLICK,{click_target:e})}),f.events.on(Sc.Os,function(e){"auto"!==e&&(m=!1),f.backbone.video.currentFile.mime===Tc&&("auto"===e||g?"auto"===e&&g&&!b&&(Z(nf.VIDEO_SWITCH_BACK_TO_AUTO,{quality:y,auto:1}),b=!0):(Z(nf.VIDEO_SWITCH_FROM_AUTO,{quality:e,auto:0}),g=!0),y=e)}),f.events.on(Sc.Bs,function(e){k!==e&&(k=e,Z(nf.CAPTIONS_ENABLED,{captions_id:String(e)}))}),f.events.on(Sc.Hs,function(){k&&(k=null,Z(nf.CAPTIONS_DISABLED))}),f.events.on(pu.connected,function(){Z(nf.CHROMECAST_CONNECTED)}),f.events.on(pu.disconnected,function(){Z(nf.CHROMECAST_DISCONNECTED)}),f.events.on(fn.STREAM_CHANGE,function(e,t,n){var i=(E=e).profile||e.id,r=Wl();w[i]=w[i]||[],_&&(e=w[_].length-1,w[_][e]&&(w[_][e].end=r)),T&&(n[t].bitrate>T?O+=1:D+=1),w[i].push({start:r}),L[i]={bitrate:n[t].bitrate,width:n[t].width,height:n[t].height},Z(nf.VIDEO_STREAM_CHANGE,{previous_audio_bitrate:S/1e3,previous_video_bitrate:T/1e3,previous_profile_id:String(_)}),_=i,T=n[t].bitrate,S=n[t].audioBitrate}),f.events.on(fn.STREAM_TARGET_CHANGE,function(e){e&&(z=String(e.profile||"")||null)}),f.events.on($o,function(e){x=e}),f.events.on(un.PLAYING,function(){K=!1}),f.events.once(Mc.hc,function(){p=!0}),f.events.on(Mc.Tf,function(){Z(nf.AD_BUFFERING)}),f.events.on(Mc.Sf,function(){Z(nf.AD_COMPLETE)}),f.events.on(Mc.xf,function(){Z(nf.AD_CLICKED)}),f.events.on(Mc.Af,function(e){Z(nf.AD_ERROR,{error_type:e.errorType,error_reason:e.errorReason})}),f.events.on(Mc.Mf,function(){Z(nf.AD_PAUSED)}),f.events.on(Mc.Cf,function(){Z(nf.AD_RESUMED)}),f.events.on(Mc.Rf,function(e){Z(nf.AD_STARTED,{startup_duration:e.time?uc(e.time/1e3,2):null})}),f.events.on(Mc.If,function(){Z(nf.AD_SKIPPED)}),f.events.on(Mc.rc,function(){An.iPhone&&o.setDisplayContext(1)}),f.events.on(Mc.oc,function(){An.iPhone&&o.setDisplayContext(0)}),f.events.on(fn.DROPPED_FRAMES,function(e){var t=e.dropped/e.total*100;P=Math.round(100*t)/100,M=e.dropped}),f.events.on(fn.BANDWIDTH,function(e){e=e.speed;A.push(e),500<A.length&&A.shift()}),f.events.on(fn.MANIFEST_TIMEOUT,function(){Z(nf.VIDEO_MANIFEST_TIMEOUT)}),f.events.on(fn.MANIFEST_LOADED,function(){Z(nf.VIDEO_MANIFEST_LOADED)}),f.events.on(fn.DOWNLOAD_END,i),f.events.on(fn.DOWNLOAD_TIMEOUT,function(){Z(nf.DOWNLOAD_TIMEOUT)}),f.events.on(fn.DRM_KEY_SWITCH,function(){l="sd-fallback",Z(nf.DRM_KEY_SWITCH)}),f.events.on(fn.SCANNER_CHANGE,function(){H=null}),f.events.on(fn.AV_DURATION_MISMATCH,function(e){Z(nf.VIDEO_DURATION_MISMATCH,{duration_difference:Math.round(100*e)/100})}),f.events.on(fn.QUOTA_EXCEEDED_ERROR,function(e){var t=e.buffered,e={error_type:fn.QUOTA_EXCEEDED_ERROR};e.buffered=uc(fe(0,t),2),e.bytes_loaded=Y,Z(nf.VIDEO_PLAYBACK_ERROR,e)}),f.events.on(pn.MEDIASESSION_PLAY,function(){Z(nf.MEDIASESSION_PLAY)}),f.events.on(pn.MEDIASESSION_PAUSE,function(){Z(nf.MEDIASESSION_PAUSE)}),f.events.on(pn.MEDIASESSION_SEEK_FORWARD,function(){Z(nf.MEDIASESSION_SEEK_FORWARD)}),f.events.on(pn.MEDIASESSION_SEEK_BACKWARD,function(){Z(nf.MEDIASESSION_SEEK_BACKWARD)}),f.events.on(Nc.Ts,function(){$={seek_type:"api"}}),f.events.on(Nc.Lf,function(){G=!0}),f.events.on(Nc.Df,function(){G=!0}),f.events.on(vn.WEBVR_HARDWARE_AVAILABLE,function(e){Z(nf.WEBVR_HARDWARE_AVAILABLE,{vr_hardware:e.displayName})}),f.events.on(vn.WEBVR_ENTER,function(){Z(nf.ENTER_WEBVR,!0)}),f.events.on(vn.WEBVR_EXIT,function(){Z(nf.EXIT_WEBVR,!0)}),f.events.on(mn.BRAIN_ML_MODEL_INPUTS,function(e){var t,n,i;null!=(i=e.geolocation)&&i.length&&e.geolocation[0].length?e.geolocation=e.geolocation[0][0]:e.geolocation="",f.config.request.urls.fresnel_mimir_inputs_url&&(t=f.config.request.urls.fresnel_mimir_inputs_url+"?beacon=1",n=f.config.request.session,i=Qc(f.config),e={chunk_request_id:e.chunkRequestID,duration:e.duration,available_qualities:e.availableQualities,next_chunk_sizes:e.nextChunkSizes,last_buffer_sizes:e.lastBufferSizes,last_chunk_download_times:e.lastChunkDownloadTimes,last_chunk_sizes:e.lastChunkSizes,last_chunk_qualities:e.lastChunkQualities,num_remaining_chunks:e.numRemainingChunks,last_playback_heads:e.lastPlaybackHeads,geolocation:e.geolocation,session_id:n},n=Date.now(),i=[{uuid:lc(),created_at:n,event:{name:"mimir_inputs",version:1,ts_ms:n,fields:e},tracker:{name:"vimeo-player",version:i}}],new Gc(t).logRequestPromiseWithUrl(t,JSON.stringify(i),!0))}),(a=new ee(function(e,t){var n;null!=(n=f.backbone)&&n.video&&e(),f.events.on(Bo,e)})).then(J).catch(function(){}),f.events.on(Mc.$l,J),tf.getFirstConsistentlyInteractive().then(function(e){V=uc(e)}).catch(function(){})}var uf=((Ee=lf.prototype).fh=function(){return!!this.player.config.request.flags.ott},Ee.sh=function(){return!(this.player.doNotTrackEnabled||!this.fh()&&!this.store.get(Du))},Ee.lh=function(){var e,t=this;document.getElementById("vp-mux-client")||((e=document.createElement("script")).setAttribute("id","vp-mux-client"),e.setAttribute("src",this.player.config.request.urls.mux_url),e.onreadystatechange=e.onload=function(){t.hh(),t.store.get(Du)||t.dh()},document.getElementsByTagName("head")[0].appendChild(e))},Ee.hh=function(){var n=this;this.player.events.on(Mc.jl,function(e){var t;n.sh()&&e&&"undefined"!=typeof mux&&(t=n.player.backbone.video?n.player.backbone.video.currentFile:{},e=n.element.querySelector(".vp-telecine").getElementsByTagName("video")[0],mux.emit(e,"videochange",{video_title:n.player.config.video.title,video_id:n.player.config.video.id,video_duration:1e3*n.player.config.video.duration,video_cdn:t.metadata?t.metadata.cdn:"akamai",video_stream_type:n.store.get(Du)?"live":"vod",viewer_user_id:n.player.config.request.session,view_session_id:n.player.config.request.session}))}),this.player.events.on(ts.STREAM_ONLINE,function(){n.dh()}),this.player.events.on(ts.STREAM_OFFLINE,function(){var e=n.element.querySelector(".vp-telecine").getElementsByTagName("video")[0];mux.emit(e,"ended")})},Ee.dh=function(){var e,t,n;"undefined"!=typeof mux&&(n=this.player.backbone.video?this.player.backbone.video.currentFile:{},e=this.element.querySelector(".vp-telecine").getElementsByTagName("video")[0],null!==this.muxClient&&mux.destroyMonitor(e),t="dev"===this.player.config.request.build.js?"6eq01ih8u9u8fkk4hbindded5":"73cngs5ov03sbnck36isdkndt",n={property_key:t=this.store.get(Ou)?"dev"===this.player.config.request.build.js?"kghblrf3bb9uk33lv58ompm3k":"md0ig7ssl8unl2kpl0h6p0drn":t,player_name:"Vimeo Player",player_init_time:Date.now(),player_version:Qc(this.player.config),video_title:this.player.config.video.title,video_id:this.player.config.video.id,video_duration:1e3*this.player.config.video.duration,video_cdn:n.metadata?n.metadata.cdn:"akamai",video_stream_type:this.store.get(Du)?"live":"vod",viewer_user_id:this.player.config.request.session,view_session_id:this.player.config.request.session,sub_property_id:this.player.config.video.owner.id},this.fh()&&(n.property_key="dev"===this.player.config.request.build.js?"3tb8rggvj5m71caj9jfpiidos":"lrc6o7kvhc6npvqq2r5iks5u4",this.player.config.ott&&(n=Object.assign(n,this.player.config.ott))),this.muxClient=mux.monitor(e,{debug:!1,minimumRebufferDuration:500,data:n}))},lf);function lf(e,t,n){this.player=e,this.element=t,this.store=n,this.muxClient=null,this.sh()&&(.75<Math.random()||this.lh())}var df,ff=(df={enumerable:!0,configurable:!0,writeable:!1},function(i){for(var e=arguments.length,t=new Array(1<e?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return t.forEach(function(e){for(var t in e){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(i,t,Object.assign(n,df))}}),i});function hf(t,n){var i,r,o,s,a,c=Q();function u(e){var t=new i.AdsRenderingSettings;t.restoreCustomPlaybackStateOnAdBreakComplete=!0,t.uiElements=[],r=e.getAdsManager(n.videoPlayer,t),c.fire("ads-manager-loaded"),r.addEventListener(i.AdErrorEvent.Type.AD_ERROR,b),r.addEventListener(i.AdEvent.Type.CONTENT_PAUSE_REQUESTED,l),r.addEventListener(i.AdEvent.Type.CONTENT_RESUME_REQUESTED,d),r.addEventListener(i.AdEvent.Type.AD_BUFFERING,f),r.addEventListener(i.AdEvent.Type.STARTED,h),r.addEventListener(i.AdEvent.Type.COMPLETE,v),r.addEventListener(i.AdEvent.Type.CLICK,p),r.addEventListener(i.AdEvent.Type.SKIPPED,m),r.addEventListener(i.AdEvent.Type.ALL_ADS_COMPLETED,g)}function l(e){c.fire("content-pause-requested",e)}function d(e){c.fire("content-resume-requested",e)}function f(e){c.fire("ad-buffering",e)}function h(e){c.fire("ad-started",e)}function v(e){c.fire("ad-complete",e)}function p(e){r.pause(),c.fire("ad-click",e)}function m(e){c.fire("ad-skipped",e)}function g(e){c.fire("all-ads-completed",e)}function b(e){c.fire("ad-error",e.getError()),r&&r.destroy()}var e,y,E={start:function(e,t){return a.initialize(),r.init(e,t,i.ViewMode.NORMAL),r.start()},stop:function(){return r.stop()},pause:function(){return r.pause()},play:function(){return r.resume()},skip:function(){return r.skip()},resize:function(e,t,n){return n?r.resize(e,t,i.ViewMode.FULLSCREEN):r.resize(e,t,i.ViewMode.NORMAL)},destroy:function(){c.off(),r.destroy(),o.destroy(),a.destroy()},get volume(){return r.getVolume()},set volume(e){r.setVolume(e)},get adsManager(){return r},get adsLoader(){return o},get remainingTime(){return r.getRemainingTime()},setContentComplete:function(){o.contentComplete()},on:function(e,t){return c.on(e,t),this},off:function(e,t){return c.off(e,t),this}};return e=function(){i=google.ima;var e=An.iOS?n.videoPlayer.videoElement:n.videoPlayer;a=new i.AdDisplayContainer(t,e),(o=new i.AdsLoader(a)).addEventListener(i.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,u),o.addEventListener(i.AdErrorEvent.Type.AD_ERROR,b),s=new i.AdsRequest,n.adUrl&&(s.adTagUrl=n.adUrl),s.linearAdSlotWidth=n.width.linear,s.linearAdSlotHeight=n.height.linear,s.nonLinearAdSlotWidth=n.width.nonlinear,s.nonLinearAdSlotHeight=n.height.nonlinear,o.requestAds(s)},document.getElementById("vp-ima-sdk")?e():((y=document.createElement("script")).id="vp-ima-sdk",y.src="https://imasdk.googleapis.com/js/sdkloader/ima3.js",y.onreadystatechange=y.onload=function(){e()},document.getElementsByTagName("body")[0].appendChild(y)),ff(this,E)}function vf(i,e){var t,n,r,o,s,a,c,u,l,d,f,h,v,p=!1,m=Q();function g(){n&&(C(),n=null),o&&(o.destroy(),o=null),r&&clearInterval(r),s=null,p=d=u=l=c=a=!1,h=new ee(function(e,t){f=e}),i.events.once(Vo,function(){d=!0}),i.events.on(un.ERROR,function(e){!e||"NotAllowedError"!==e.name&&"AbortError"!==e.name||(d=!1)}),(t=document.querySelector(".vp-ads-wrapper"))||((t=document.createElement("div")).classList.add("vp-ads-wrapper"),document.querySelector(".player").appendChild(t),t.innerHTML=Hl.render("adcountdown")),n=t.querySelector(".vp-ads-tag"),v={adCode:i.config.request.ads.adcode||null,adUnit:i.config.request.ads.adunit||null,adUrl:i.config.request.ads.adurl||null,videoPlayer:i.backbone,width:{linear:488,nonlinear:488},height:{linear:252,nonlinear:150}},(o=new hf(t,v)).on("ads-manager-loaded",function(){o.on("ad-buffering",b),o.on("ad-complete",E),o.on("ad-click",y),o.on("ad-error",w),o.on("ad-started",_),o.on("ad-skipped",T),o.on("all-ads-completed",S),o.on("content-pause-requested",A),o.on("content-resume-requested",k),function(){if(!d){if(p)return;i.events.once(Vo,function(){f(),d=!0})}h.then(I).catch(function(e){}),i.events.on(un.ENDED,function(){p||(a=!0,o.setContentComplete())})}(),i.store.watch("ui.player.width",O),i.events.on(Mc.qc,O,!0),i.events.on(Mc.zc,O,!1),d&&f()})}function b(){c&&i.events.fire(Mc.Tf)}function y(){i.events.fire(Mc.xf)}function E(){An.iPhone&&i.backbone.addVideoEventListeners(),r&&clearInterval(r),c=!1,i.events.fire(Mc.Sf)}function w(e){e={errorType:e.o,errorReason:e.l};i.events.fire(Mc.Af,e),"adPlayError"===e.errorType&&i.events.fire(Mc.oc)}function _(e){An.iPhone&&i.backbone.removeVideoEventListeners();e=e.getAd();e.isLinear()&&(r=setInterval(function(){var e="AD "+function(e){if(e<0)return"00:00";var t=Math.floor(e/60),e=Math.round(e%60);return(t=t<10?"0"+t:t)+":"+(e<10?"0"+e:e)}(o.remainingTime);t.querySelector(".vp-ads-countdown").innerHTML=e},1e3),setTimeout(R,1e3)),c=!0;e={type:e.isLinear()?"linear":"nonlinear"};s&&(e.time=Date.now()-s,s=null),i.events.fire(Mc.Rf,e)}function T(e){i.events.fire(Mc.If,e)}function S(e){l=!0,An.iPhone||o.destroy(),i.events.fire(Mc.Of,e)}function A(){i.events.fire(Mc.rc),s=Date.now(),a||(u=!0,i.backbone.paused?i.events.once(un.PLAYING,function(){i.backbone.pause()}):i.backbone.pause())}function k(){C(),i.events.fire(Mc.oc),An.iPhone&&l&&o.destroy(),a||L()}function L(){u=!1,i.backbone.play()}function R(){(n=t.querySelector(".vp-ads-tag")).classList.remove("hidden"),n.removeAttribute("hidden")}function C(){n.classList.add("hidden"),n.setAttribute("hidden","")}function x(){return{width:e.getBoundingClientRect().width,height:e.getBoundingClientRect().height}}function I(){var e=x(),t=e.width,n=e.height;try{o.start(t,n)}catch(e){a&&i.events.fire(Mc.Sf),u&&L()}}function O(e){var t=x(),n=t.width,t=t.height;o.resize(n,t,e)}m={pause:function(){return i.events.fire(Mc.Mf),o.pause()},play:function(){return i.events.fire(Mc.Cf),o.play()},get volume(){return o.volume},set volume(e){o.volume=e},toggleCastingState:function(e){(p=!!e)&&o.destroy()},events:m};return g(),i.events.on(Mc.jl,g),m}function pf(e,t){return null!=e&&t in Object(e)}function mf(c,e){return function(e,t){for(var n=-1,i=t.length,r={};++n<i;){var o=t[n],s=Gs(e,o);(function(a){return null!=c&&function(e,t,n){for(var i=-1,r=(t=zs(a,e)).length,o=!1;++i<r;){var s=Ks(t[i]);if(!(o=null!=e&&n(e,s)))break;e=e[s]}return o||++i!=r?o:(r=null==e?0:e.length)&&Pt(r)&&Zt(s,r)&&(Dt(e)||Ot(e))}(c,0,pf)})(o)&&function(e,t,n,i){if(!Ie(e))return;for(var r=-1,o=(t=zs(t,e)).length,s=o-1,a=e;null!=a&&++r<o;){var c,u=Ks(t[r]),l=n;r!=s&&(c=a[u],void 0===(l=i?i(c,u,a):void 0)&&(l=Ie(c)?c:Zt(t[r+1])?[]:{})),Yt(a,u,l),a=a[u]}}(r,zs(o,e),s)}return r}(c,e)}var gf=Te?Te.isConcatSpreadable:void 0;function bf(e){return Dt(e)||Ot(e)||!!(gf&&e&&e[gf])}function yf(e){return null!=e&&e.length?function e(t,n,i,r,o){var s=-1,a=t.length;for(i=i||bf,o=o||[];++s<a;){var c=t[s];0<n&&i(c)?1<n?e(c,n-1,i,r,o):Ts(o,c):r||(o[o.length]=c)}return o}(e,1):[]}var Ef=Xe(ye(Te=function(e,t){return null==e?{}:mf(e,t)},void 0,yf),Te+""),wf=["clip_id","profile_id","player_size","dropped_frames","total_frames","bandwidth","markers","streams","files","video_dims","min_bandwidth","max_badwidth","buffer_occupancy","live_latency","scanner","vr_headset"],_f=((Te=Tf.prototype).reset=function(){this.bh(),this.gh(),this.Ff.events.fire(Mc.wl)},Te._h=function(e,t){return this.vh[e]=[t],this.Ff.events.fire(Mc.wl),this.vh[e]},Te.kh=function(e,t){return this.vh[e].push(t),300<this.vh[e].length&&this.vh[e].splice(0,25),this.Ff.events.fire(Mc.wl),this.vh[e]},Te.getCurrent=function(e){return this.vh[e].slice(-1)[0]},Te.getSeries=function(e){return this.vh[e]},Te.Eh=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.name,e=Ta({},e.data),e=this.Th(t,e);this.Sh(t,t,e)},Te.Th=function(e,t){if(e===nf.CHUNK_DOWNLOADED){var n={};n.host=t.host,n.duration=uc(t.duration,2),n.size=t.size,n.index=t.index,n.profile_id=t.profile_id,n.quality=t.quality,n.buffered=uc(t.buffered,2),n.ttfb=uc(t.ttfb,2),n.extraContext=t.extraContext,n.headers=Ef(t.headers,["x_vim_cachebc","x_cache","akamai_edge_ip","x_akamai_request_id","ak_reference_id","content_type"]);var i=0,r=0,o=0,s=n.headers.x_vim_cachebc,a=n.headers.x_cache;return s?s.split(",").forEach(function(e){var t=Ve(e.split(":"),2),e=t[0],t=t[1];"E"!==e||"h"!==t?"h"!==t||(r=1):o=1}):a&&(r="HIT"===a.substr(0,3),o="HIT"===a.substr(-3)),o?i=2:r&&(i=1),n.cache_hit=i,n}if(e===nf.VIDEO_PLAYBACK_ERROR||e===nf.VIDEO_LOAD_FAILURE||e===nf.VIDEO_START_FAILURE||e===nf.VIDEO_READY)return t;if(void 0===t.autoplay||void 0===t.looping)return t;e={};return e.cdn=t.cdn,e.quality=t.quality,e},Te.Sh=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=this.Ff.backbone.currentTime,r=Date.now(),o=uc(fe(i,this.Ff.backbone.buffered),2);this.kh("markers",{type:e,title:t,vt:i,t:r,bt:o,data:n})},Te.wh=function(){var e=this;this.Ff.events.on(Mc.jl,function(){e.reset()}),this.Ff.events.on(fn.BANDWIDTH,this.xh.bind(this)),this.Ff.events.on(fn.BUFFER_OCCUPANCY,this.Ah.bind(this)),this.Ff.events.on(fn.CURRENT_FILE_CHANGE,this.Mh.bind(this)),this.Ff.events.on(fn.DROPPED_FRAMES,this.Ch.bind(this)),this.Ff.events.on(fn.SCANNER_CHANGE,this.Rh.bind(this)),this.Ff.events.on(fn.STREAM_CHANGE,this.Ih.bind(this)),this.Ff.events.on(fn.STREAM_CHANGE_START,this.Oh.bind(this)),this.Ff.events.on(un.TIME_UPDATE,this.jh.bind(this)),this.Ff.events.on(vn.WEBVR_HARDWARE_AVAILABLE,this.Lh.bind(this)),this.Ff.events.on(Mc.jf,this.Eh.bind(this)),this.Ff.events.on(ts.BUFFER_GAP_JUMP_PREVENT,this.Dh.bind(this)),this.Ff.events.on(ts.BUFFER_GAP_JUMP,this.Ph.bind(this))},Te.Lh=function(e){e.displayName&&this._h("vr_headset",e.displayName)},Te.Nh=function(){var n=this;this.ph=setInterval(function(){var e=n.Ff.backbone.buffered,t=n.Ff.backbone.videoElement;e&&e.length&&t&&t.currentTime?(t=e.end(e.length-1)-t.currentTime,n._h("live_latency",t)):n._h("live_latency",0)},500)},Te.Fh=function(){clearInterval(this.ph)},Te.yh=function(){var n=this;this.Ff.store.watch("ui.player.boundingRect",function(e){var t=n.getCurrent("video_dims"),e=n.Uh(e);n.kh("video_dims",e);e=(t?"Resized from ".concat(t," to "):"Resized to ").concat(e);n.Sh(jc.MARKER_RESIZE,e)})},Te.Uh=function(e){var t="".concat(Math.round(e.width),"px"),n="".concat(Math.round(e.height),"px"),e=window.devicePixelRatio&&1<window.devicePixelRatio?"@".concat(uc(window.devicePixelRatio,3),"x"):"";return t&&n?"".concat(parseInt(t,10),"Ã—").concat(parseInt(n,10)," ").concat(e):""},Te.bh=function(){this.vh=wf.reduce(function(e,t){return e[t]=[],e},{})},Te.gh=function(){var e=this.Ff.backbone.currentFile;this.kh("files",e),this.kh("scanner",this.Ff.backbone.currentScannerName),"HLSLiveScanner"===this.Ff.backbone.currentScannerName&&this.Nh(),this._h("min_bandwidth",0),this._h("max_badwidth",0);e=this.Ff.store.get("ui.player.boundingRect"),e=this.Uh(e);this.kh("video_dims",e)},Te.xh=function(e){var t=Math.round(100*e.speed)/100;this.kh("bandwidth",{videoTime:this.Ff.backbone.currentTime,time:Date.now(),value:t});var n=this.getCurrent("max_badwidth"),e=this.getCurrent("min_bandwidth");(!e||t<e)&&this._h("min_bandwidth",t),(!n||n<t)&&this._h("max_badwidth",t)},Te.Ch=function(e){var t=e.dropped,e=e.total;this._h("total_frames",e),this._h("dropped_frames",t)},Te.Vu=function(){this.Sh(jc.MARKER_SEEKED,"Seeked to ".concat(this.Ff.backbone.currentTime))},Te.Vh=function(){this.Sh(jc.MARKER_ENDED,"Ended")},Te.Oh=function(e){var t=e.previousStreamIndex,n=e.index,i=e.streams,e=i[n],n=i[t],i=n?n.bitrate:null;i!==e.bitrate&&null!==i&&(t=this.Bh(n),n=this.Bh(e),e.bitrate<i?this.Sh(jc.MARKER_DOWNSWITCH,"Starting Downswitch from ".concat(t," to ").concat(n)):e.bitrate>i&&this.Sh(jc.MARKER_UPSWITCH,"Starting Upswitch from ".concat(t," to ").concat(n)))},Te.Ih=function(e,t,n){var i=n[t],r=this.Bh(i),o=of(i.codecs),t=null==(n=this.Ff.backbone)||null==n.getCurrentStream?void 0:n.getCurrentStream("audio"),n=sf(null==t?void 0:t.codecs),n="".concat(o).concat(n?" / ".concat(n):"");this.Sh(jc.MARKER_SWITCH_COMPLETE,"Completed switch to ".concat(r)),this.kh("streams",{profile:void 0!==e?e.profile:null,quality:void 0!==e?e.quality:"".concat(i.height,"p"),bitrate:i.bitrate,audioBitrate:null==t?void 0:t.bitrate,framerate:i.framerate,height:i.height,width:i.width,id:i.id,codec:n})},Te.Mh=function(){var e=this.getCurrent("files"),t=this.Ff.backbone.currentFile;this.kh("files",t);var n=t.metadata.cdn,i=e?e.metadata.cdn:null,r=e?Fc[e.mime]:null,e=Fc[t.mime],t="CDN to ".concat(n,"/").concat(e);i&&(t="CDN from ".concat(i,"/").concat(r," to ").concat(n,"/").concat(e)),this.Sh(jc.MARKER_FILE_CHANGE,t)},Te.Ah=function(e){e=Math.round(1e3*e)/1e3;this.kh("buffer_occupancy",{videoTime:this.Ff.backbone.currentTime,time:Date.now(),value:e})},Te.Rh=function(){var e=this.getCurrent("scanner"),t=this.Ff.backbone.currentScannerName;this._h("scanner",t),e&&this.Sh(jc.MARKER_SCANNER_CHANGE,"Scanner change to ".concat(t)),"HLSLiveScanner"===t?this.Nh():this.Fh()},Te.Ph=function(e){this.Sh(jc.MARKER_BUFFER_GAP_JUMP,e.msg)},Te.Dh=function(e){this.Sh(jc.MARKER_BUFFER_GAP_JUMP_PREVENT,e.msg)},Te.Hh=function(){this.Sh(jc.MARKER_STALLED,"Stalled")},Te.Bh=function(e){return"".concat(e.width,"Ã—").concat(e.height,"@").concat(Math.round(e.framerate)," ").concat(Math.round(e.bitrate/1e3).toLocaleString()," Kbps")},Te.jh=function(){this.Ff.events.fire(Mc.wl)},Tf);function Tf(e){this.Ff=e,this.vh={},this.ph=null,this.bh(),this.wh(),this.yh(),this.gh()}function Sf(e){var U=e.element,t=e.delegate,r=void 0===t?{}:t,t=e.cssLoadedPromise,n=void 0===t?ee.resolve(null):t,t=e.name,o=void 0===t?null:t;ba=Object.assign({},ga,iu);var j=Ga(ql,Ya(function(e){return function(){var a=e.apply(void 0,arguments),c=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return{get:function(e){return e?t.find(Za(e)):t},insert:function(e){return(t=t.concat(e)).slice(-1).pop()},getOrInsert:function(e){return this.get(e)||this.insert(e)},remove:function(e){return t.splice(t.findIndex(Za(e)),1).pop()}}}();function n(e,t){return(e=[].concat(e)).map(function(e){return t(a.createGetter(e))})}return X(X({},a),{},{watch:function(e,s){return n(e,function(e){var t,n,i,r,o=c.get({selector:e,listener:s});return o||(i=s,r=(n=e)(a.getState()),t=a.subscribe(function(){var e,t=n(a.getState());r!==t&&(e=r,i(r=t,e,a.getState()))}),o=c.insert({selector:e,listener:s,unsubscribe:t})),o.unsubscribe})},unwatch:function(e,t){return n(e,function(e){e=c.get({selector:e,listener:t});return e&&e.unsubscribe()})}})}},function(e){var n=0<arguments.length&&void 0!==e?e:{};return function(t){return function(){var i=t.apply(void 0,arguments);function e(){return n}var r=Hs(function(t){if(Oe(t))return t;var e=Ys(n,t);return Oe(e)?e:function(e){return Ys(e,t)}});return X(X({},i),{},{getSelectors:e,createGetter:r,get:function(e,t){var n=(e=r(e))(i.getState());return void 0!==t&&(e=t,n=null==(t=n)||t!=t?e:t),n}})}}}(Ul),function(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return function(o){return function(e,t,n){var t=o(e,t,n),i=t.dispatch,r={getState:t.getState,dispatch:function(e){return i(e)}},n=s.map(function(e){return e(r)}),i=Ya.apply(void 0,n)(t.dispatch);return Ja({},t,{dispatch:i})}}}.apply(void 0,[]))),s=new P,H=Q(),B=new ru({events:H}),i=lc();U.classList.add("player-".concat(i)),U.classList.add("loading"),U.id||(U.id="player".concat(i)),U.innerHTML=Hl.render("outer",{strings:{back:"Back",close:"Close overlay"}});var V=U.querySelector(".vp-telecine");if(An.iOS){t=document.createElement("video");V.appendChild(t);try{t.setAttribute("muted",""),t.setAttribute("playsinline",""),t.load()}catch(e){iu.captureException(e)}}var a,c,W,u,l,$=null,z=null,d=null,K=null,f=null,h=null,G=null,v={},p=new ee(function(e,t){l=e}).then(function(){return H.fire(Mc.be),null}),m={get config(){return B.config},set config(e){B.config=e},get delegate(){return r},set delegate(e){r=e},ready:function(e){if(!e)return p;p.then(function(){return e()}).catch(function(e){iu.captureException(e)})},get sessionId(){return B.config.request.session}};function g(e){var t,n,i=e.old,r=e.loaded;if(!i&&o&&"".concat(o," "),null!=(t=r.request)&&t.urls.js&&(n=r.request.urls.js,se=n.substring(0,n.lastIndexOf("/")+1)),window.parent!==window&&(n="Private Video on Vimeo",1!==r.view&&3!==r.view||(n="".concat(r.video.title," from ").concat(r.video.owner.name," on Vimeo")),document.title=n,null!=(n=history)&&n.replaceState&&r.video&&i&&history.replaceState({id:r.video.id},"","/video/".concat(r.video.id).concat(window.location.search))),1!==r.view&&3!==r.view)throw new Error("Config not authorized: ".concat(r.view));null!=i&&i.embed&&i.embed.color!==r.embed.color&&H.fire(Sc.Ds,r.embed.color),K&&K.reset();i=!i||!i.video||i.video.id!==r.video.id||i.video.version.current!==r.video.version.current;return a=null,W=$,H.fire(Sc.Rs),j.dispatch(_u(r)),H.fire(Mc.jl,i,r),e}function b(e){"opacity"!==e.propertyName||(e=document.querySelector(".vp-placeholder"))&&(Yu(e).off("transitionend",b),e.parentNode.removeChild(e))}function y(){var e;(e=document.querySelector(".vp-placeholder"))&&(Yu(e).on("transitionend",b),e.classList.add("vp-placeholder-fadeout")),U.classList.remove("loading"),l()}function E(e){return n.then(function(){if(Y(e),z&&z.resetThumbnail(),"function"!=typeof v.authorizationHandler)throw new Error("Config was not authorized.");return v.authorizationHandler(y)}).then(function(e){return B.config=e,a=null,j.dispatch(_u(B.config)),H.fire(Sc.Rs),H.fire(Mc.jl,!0,B.config),e})}function w(e){function t(){w=b.config.ott||{},y=E=!1}function n(e,t){(t=Object.assign({},t,{name:w.video_title,user_id:w.viewer_user_id,user_email:w.viewer_user_email,site_id:w.site_id,user_agent:navigator.userAgent,url:top===self?window.location.href:document.referrer,referrer:b.config.request.referrer,session_id:b.config.request.session,device:"html5",device_id:null,collection_id:w.collection_id,product_id:w.product_id,platform:w.platform,platform_id:null,platform_version:w.platform_version},{type:"video",video_id:w.video_id,current_src:b.backbone.currentFile.src,current_subtitle:"none",current_type:w.video_content_type,duration:w.video_duration,is_drm:b.config.request.drm?1:0,is_fullscreen:y?1:0,is_trailer:w.is_trailer?1:0,is_chromecast:bu.isCastConnected?1:0,is_live:b.config.video.live_event,seconds:10,timecode:b.currentTime})).name=e,void 0===t.timestamp&&(t.timestamp=Math.round(.001*Date.now()));t=ve(_,t);return T.logRequestPromiseWithUrl(t,{},!0,"GET").catch(function(e){})}function i(){b.events.on(un.ENDED,r),b.events.on(un.ERROR,o),b.events.on(un.PAUSE,s),b.events.on(un.PLAY,a),b.events.on(un.TIME_UPDATE,S),b.events.on(un.SEEKING,A),b.events.on(un.SEEKED,c),b.events.on(un.WAITING,u),b.events.on(Mc.qc,l),b.events.on(Mc.zc,d),b.events.on(Mc.Sf,f),b.events.on(Mc.xf,h),b.events.on(Mc.Af,v),b.events.on(Mc.Rf,p),b.events.on(Mc.If,m)}function r(){S.cancel(),n("ended")}function o(){S.cancel(),n("error")}function s(){S.cancel(),n("pause")}function a(){if(!E)return E=!0,void n("firstplay");n("play")}function c(){A.cancel(),n("seeked")}function u(){n("waiting")}function l(){y=!0}function d(){y=!1}function f(){n(nf.AD_COMPLETE)}function h(){n(nf.AD_CLICKED)}function v(){n(nf.AD_ERROR)}function p(){n(nf.AD_STARTED)}function m(){n(nf.AD_SKIPPED)}function g(){clearTimeout(k),L.classList.add("vp-shade-invisible"),R.classList.add("vp-spin-invisible")}var b,y,E,w,_,T,S,A,k,L,R,C,x,I,O,D,P,M,N,F,q;q=document.location.hash,D=(x=q).match(/\ba?t=([0-9hms:]+)/),P=!1,F=N=M=0,null!=(D=(x=null!==D?D[1]:x).match(/^([0-9]+)$/))&&D.length&&(P=!0,F=D[1]),!1===P&&null!==(D=x.match(/^(?:([0-9]+)h)?(?:([0-9]+)m)?(?:([0-9]+)s)?/))&&""!==D[0]&&(P=!0,M=void 0===(I=(O=Ve(D,4))[1])?0:I,N=void 0===(I=O[2])?0:I,F=void 0===(O=O[3])?0:O),!1===P&&null!==(D=x.match(/^([0-9:]+)/))&&(P=!0,F=(D=Ve(x.split(":").reverse(),3))[0],N=void 0===(x=D[1])?0:x,M=void 0===(D=D[2])?0:D),null!==(F=P?60*parseInt(M,10)*60+60*parseInt(N,10)+parseInt(F,10):null)&&(B.config.embed.time=rc(F,0,B.config.video.duration),-1!==q.indexOf("at=")&&history&&history.replaceState&&history.replaceState("","",window.location.pathname+window.location.search)),H.on(Mc.Ml,function(t){B.reload().then(function(e){if(!B.config.user.logged_in)return H.fire(Mc.Il),e;switch(H.fire(Mc.Cl,t),t){case"like":B.config.user.liked&&H.fire(Mc.El);break;case"watch-later":B.config.user.watch_later&&H.fire(Mc.Sl);break;case"private":H.fire(Mc.Dl)}return e}).catch(function(e){iu.captureException(e)})}),H.on(Mc.Rl,function(){B.reload().catch(function(e){iu.captureException(e)})}),_d(F=e,j,U),z=new Mu(F,j,U.querySelector(".vp-preview")),H.on([fn.BUFFER_ENDED,un.PLAYING],function(){z.hide()}),$=new Ma(V,B.config),W=$,G=new _f(F),Bu(F,j,U.querySelector(".vp-video-wrapper")),jl(F,j,U.querySelector(".vp-captions")),q=H,L=(e=U).querySelector(".vp-shade"),R=e.querySelector(".vp-spin"),q.on(fn.BUFFER_STARTED,function(){clearTimeout(k),k=setTimeout(function(){L.classList.remove("vp-shade-invisible"),R.classList.remove("vp-spin-invisible")},600)}),q.on([fn.BUFFER_ENDED,Mc.tr],g),bu.on(pu.buffering,function(){R.classList.remove("vp-spin-invisible")}),bu.on([pu.playing,pu.paused],function(){clearTimeout(k),R.classList.add("vp-spin-invisible")}),bu.on(pu.connected,function(){L.classList.remove("vp-shade-invisible")}),bu.on(pu.disconnected,function(){g()}),J(F),F.doNotTrackEnabled||(B.config.request.urls.test_imp&&function(e,t){if(e.config.request.ab_tests){var n,i=new Gc(t);for(n in e.config.request.ab_tests){var r=e.config.request.ab_tests[n];r.track&&(r={session_id:e.config.request.session,test_id:n,test_group:String(r.group)},i.log(r,!0,!1).catch(function(e){}))}}}(F,"".concat(B.config.request.urls.test_imp,"?beacon=1")),cf(F,0,j,B.config.request.urls.fresnel),tl(F,j),new uf(F,U,j),w=(b=F).config.ott||{},T=new Gc(_="https://collector.vhx.tv/events.gif"),S=Jl(function(){n("timeupdate")},1e4,{leading:!1}),A=Jl(function(){n("seeking")},500),b.events.on(Mc.jl,t),t(),b.config.ott?i():new ee(function(t,e){b.ottVideoMetadata?t():b.events.on(Mc.Bl,function(e){t()})}).then(function(){w=b.ottVideoMetadata,i()}).catch(function(e){})),K=new ju(F),(F.config.request.flags.ott||null!=(q=F.config.request.ab_tests)&&null!=(C=q.chromecast)&&C.group)&&((C=F).config.video.spatial||"stock"===C.config.video.privacy||(C=new mu({textAlert:new Zd(U),player:C}),bu.init({chromecastPlayer:C}),bu.on([pu.error,pu.mediaLoadedFailed],function(e){iu.captureException(e)}))),Y(F)}function Y(e){d||(d=new Xd(e),Vl(m,d),Cd=Object.assign({},Rd,iu))}function J(e){var t=B.config.request.ads;t&&(t.adcode&&t.adunit||t.adurl)&&(f=new vf(e,U.querySelector(".vp-video-wrapper")),H.on(Mc.rc,function(){W=f,H.fire(Mc.sf)}),H.on(Mc.oc,function(){W=$,H.fire(Mc.sf)}),bu&&(bu.on(pu.connected,function(){f.toggleCastingState(!0)}),bu.on(pu.disconnected,function(){f.toggleCastingState(!1)})))}function _(e,t){var n=e;return n=!isNaN(e)||"string"==typeof e?ac(sc(e),e,t):n}var T={get store(){return j},get config(){return B.config},get element(){return U},get events(){return H},get uuid(){return i},get expose(){return m},get backbone(){return $},get adHandler(){return f},get displayContext(){return W},get preview(){return z},get doNotTrackEnabled(){return B.config.embed.dnt||B.config.request.flags.dnt},get playLoggingEnabled(){return B.config.embed.log_plays&&B.config.request.flags.plays},get currentTime(){return bu.isCastConnected?bu.chromecastPlayer.lastCurrentTime:$.currentTime},get debugCollector(){return G},get ottVideoMetadata(){return h},set ottVideoMetadata(e){h=e},init:function(e,t){return c||(v=t,c=B.load(e).then(g).catch(function(e){return E(T)}).then(function(){return"function"==typeof v.initializationHandler?ee.resolve(t.initializationHandler()):null}).then(function(){return w(T),"function"==typeof v.postInitializationHandler?ee.resolve(t.postInitializationHandler()):null}).then(function(){return ee.all([z.thumbnailPromise,n])}).then(y).then(function(){return iu.setUp(T),null}).catch(function(e){iu.captureException(e)}))},loadVideo:function(e,t){if(u===e&&a)return a;if(z&&z.resetThumbnail(),null!=t&&t.video_version){var n=B.config.video.version.available;if(!n||!Array.isArray(n))return ee.reject("No available video versions");if(-1===(n=n.map(function(e){return e.id})).indexOf(t.video_version))return ee.reject("Invalid version id specified")}H.fire(Mc._loadVideo),u=e,U.classList.add("loading");var n=_(e,t),i=s.get(n);return e=i?i.qh.loaded:e,a=B.load(e,t).then(function(e){var t;return i&&(t=$.element,($=i.Wh).element.style.visibility="visible",t.parentNode.replaceChild($.element,t),H.fire(Mc.$l)),e=g(e),f||J(T),e}).catch(function(e){return E(T)}).then(function(e){var t=z.loadThumbnail();return ee.resolve(t)}).then(y)},preloadVideo:function(n,e,t){var i=_(e,t),r=s.get(i);return r?ee.resolve(r):new ru({events:H}).load(e,t).then(function(e){var t=$.element.cloneNode(!1);t.style.visibility="hidden",$.element.parentNode.insertBefore(t,$.element);t=new Ma(t,e.loaded);t.loadVideo(e.loaded),t.preload=n;e={Wh:t,qh:e};return s.set(i,e),e})},performDelegateAction:function(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){},i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];null!=r&&r[e.will]&&!1===(t=(t=r)[e.will].apply(t,[B.config.video.id].concat(te(i))))||(n.apply(void 0,[B.config.video.id].concat(te(i),[t])),null!=r&&r[e.did]&&r[e.did]())},ready:function(){return p},verifyConfig:function(){return B.verify()},updatePhpTokens:function(){return new ee(function(t,n){var e=B.config.user,i=e.vimeo_api_client_token,r=e.vimeo_api_interaction_tokens,o=e.vimeo_live_client_token,s=e.vimeo_bucketed_live_client_token,e=!1;if(i)try{e=0<=zl(JSON.parse(atob(i.split(".")[1])).exp)}catch(t){return void n(new Error("Failed to parse PHP client token expiration"))}if(r)try{var a=JSON.parse(atob(r.likes.split(".")[1])).exp,c=JSON.parse(atob(r.watch_later.split(".")[1])).exp,u=JSON.parse(atob(r.following.split(".")[1])).exp,e=0<=zl(a)||0<=zl(c)||0<=zl(u)}catch(t){return void n(new Error("Failed to parse PHP interaction tokens expiration"))}if(o)try{e=0<=zl(JSON.parse(atob(o.split(".")[1])).exp)}catch(t){return void n(new Error("Failed to parse PHP Live token expiration"))}if(s)try{e=0<=zl(JSON.parse(atob(s.split(".")[1])).exp)}catch(t){return void n(new Error("Failed to parse PHP Live token expiration"))}e?(o=(u=B.config.request).signature,s=u.session,e=u.timestamp,u=u.expires,qi("https://".concat(B.config.player_url,"/video/").concat(B.config.video.id,"/token/refresh?signature=").concat(o,"&session=").concat(s,"&time=").concat(e,"&expires=").concat(u),{withCredentials:!0}).json().then(function(e){return B.config.user.vimeo_api_client_token=e?e.vimeo_api_client_token:null,B.config.user.vimeo_api_interaction_tokens=e?e.vimeo_api_interaction_tokens:null,B.config.user.vimeo_live_client_token=e?e.vimeo_live_client_token:null,B.config.user.vimeo_bucketed_live_client_token=e?e.vimeo_bucketed_live_client_token:null,t()}).catch(function(e){iu.captureBreadcrumb("Failed to refresh JWT token",{},"auth","error"),n(e)})):t()})}};return T}function Af(e,t,r,o){var s=!1;o="function"==typeof t?r:o,r="function"==typeof t?t:r;function n(e){var t,n,i=!0;return e.changedTouches&&(t=e.changedTouches[0].pageX-window.pageXOffset,n=e.changedTouches[0].pageY-window.pageYOffset,null!==(n=document.elementFromPoint(t,n))&&this.contains(n)&&(i=r.call(this,e))),"function"==typeof o&&o.call(this,e),s=!0,i}function i(e){if(!s)return r.call(this,e);s=!1}(t="function"==typeof t?null:t)?Yu(e).on("click",t,i).on("touchend",t,n):Yu(e).on("click",i).on("touchend",n)}function kf(i,n){var r,e,t,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],s=[],a=!1;function c(){return r.classList.contains("vp-menu-fullwidth")}function u(){return r.classList.contains("vp-menu-carousel")}function l(){var t=1<s.length&&!u();s.forEach(function(e){e.setCollapsible(t),e.resetCarousel(u())})}function d(e){s.push(e),r.insertBefore(e.element,r.lastChild),l(),e.on("open",f),e.on(["open","close"],h),e.on(["openEnd","closeEnd"],v),e.on("select",g)}function f(e){s.filter(function(e){return e.isOpen()}).forEach(function(e){return e.close()})}function h(e){a=!0,_()}function v(e){a=!1}function p(){return n&&"true"===n.getAttribute("aria-expanded")}function m(t){p()||(t=t||n.contains(document.activeElement),n.setAttribute("aria-expanded","true"),r.removeAttribute("hidden"),i.events.fire(Mc.Oc,!0,e),w(),l(),r.classList.remove("vp-menu-hidden"),window.requestAnimationFrame(function(){var e;r.classList.remove("vp-menu-invisible"),t&&0<(e=T()).length&&e[0].focus()}))}function g(){u()||y()}function b(){T().some(function(e){return e===document.activeElement})&&n.focus()}function y(){p()&&setTimeout(function(){b(),n.setAttribute("aria-expanded","false"),i.events.fire(Mc.Oc,!1,e),r.classList.add("vp-menu-invisible")},100)}function E(e){i.events.fire(Mc.cl),y()}function w(){if(!c()){var e=tc(i.element),t=tc(r),n=window.getComputedStyle(r),n=parseFloat(n.fontSize),t=t.bottom-r.scrollHeight,t=Math.max(e.top,0)-t;if(0<t){t=r.scrollHeight-t-n;return r.style.height="".concat(t/n,"em"),void r.classList.add("vp-menu-scroll")}r.style.height="auto",r.classList.remove("vp-menu-scroll")}}function _(){w(),a&&requestAnimationFrame(_)}function T(){return s.reduce(function(e,t){return e.concat(t.getTabindexItems())},[])}return(t=document.createElement("div")).innerHTML=Hl.render("menu",{strings:{close:"Close menu"}}),r=t.children[0],o.forEach(d),Af(r,".js-menuClose",y),Af(r,".js-menuInfo",E),Yu(window).on("resize",w),Yu(r).on("transitionend",function(e){this===r&&"opacity"===e.propertyName&&r.classList.contains("vp-menu-invisible")&&(r.classList.add("vp-menu-hidden"),r.setAttribute("hidden",""))}),Yu(document).on("click",function(e){null!==n&&(!p()||n.contains(e.target)||r.contains(e.target)||y())}),window.addEventListener("blur",y,!1),e={element:r,button:n,isCentered:function(){return r.classList.contains("vp-menu-center")},isVisible:p,isFullwidth:c,show:m,hide:y,toggle:function(e){return p()?(y(),!1):(m(e),!0)},retargetFocusFromChild:b,setPanelModes:l,addPanel:d,getPanel:function(t){return s.find(function(e){return e.id===t})},getTabindexItems:T,destroy:function(){Yu(window).off("resize",w)}}}var Lf,Rf=(Lf={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},function(e){return null==Lf?void 0:Lf[e]}),Cf=/[&<>"']/g,xf=RegExp(Cf.source);function If(e){return(e=So(e))&&xf.test(e)?e.replace(Cf,Rf):e}function Of(i){Q(this);var r,o,s,a=this,c={x:0,y:0},u={x:0,y:0},l={x:0,y:0},d=0;function f(e){i.style["".concat(An.transitionProperty,"Duration")]=e}function h(e,t,n){t=1<arguments.length&&void 0!==t?t:0,n=2<arguments.length&&void 0!==n?n:i.children.length-1,e=-Math.round(e/v());return Math.min(Math.max(e,t),n)}function t(){return!1}function v(){var e=i.children[0],t=getComputedStyle(e);return e.offsetWidth+parseInt(t.marginLeft,10)+parseInt(t.marginRight,10)}function p(e){var t=[e.clientX,e.clientY],n=t[0],t=t[1];return e.targetTouches&&0<e.targetTouches.length&&(n=(e=[e.touches[0].pageX,e.touches[0].pageY])[0],t=e[1]),{x:n,y:t}}function n(e){e.stopImmediatePropagation();var n,t=p(e),i=t.x,t=t.y;u.x=i-c.x,u.y=t-c.y,n=e,(s=function(e){var t=e?"on":"off",e={pointerdown:["pointermove","pointerup"],MSPointerDown:["pointermove","pointerup"],touchstart:["touchmove","touchend"],mousedown:["mousemove","mouseup"]};Yu(window)[t](e[n.type][0],m),Yu(window)[t](e[n.type][1],g)})(!(r=!1)),f("0ms")}function m(e){var t=p(e),n=t.x,t=t.y;if(l.x=c.x,l.y=c.y,c.x=n-u.x,c.y=t-u.y,Math.abs(c.x-l.x)>=.15*Math.abs(c.y-l.y))return e.preventDefault(),r=!0,a.fire("touchMove"),o=Date.now(),void w(c.x);s(!1),b(h(c.x))}function g(e){if(e.stopImmediatePropagation(),s(!1),r){e.preventDefault();var t=c.x-l.x,n=Date.now()-o+1;return c.x+=50*t/n,b(h(c.x)),void a.fire("touchEnded")}!function(e){e.preventDefault();e=hc(e.target,i.children);if(-1!==e){if(e!==d)return b(e);a.fire("tap",e)}}(e)}function b(e){E(e),a.fire("slide",e)}function y(){E(d,"0ms")}function E(e,t){var n=1<arguments.length&&void 0!==t?t:"",t=v();-1!==e&&0<t&&(f(n),c.x=-e*t,w(c.x))}function w(e){var t=h(e,-1,i.children.length);t!==d&&(a.fire("focus",t),d=t),i.style[An.transformProperty]="translateX(".concat(e,"px)")}return{setUp:function(e){Yu(i).on(An.pointerEvents?"pointerdown":["touchstart","mousedown"],n),Yu(i).on("click","a",t),Yu(window).on("resize",y),y(),void 0!==e&&E(e,"0ms")},show:function(e){E(fc(e))},resize:y,destroy:function(){Yu(i).off(An.pointerEvents?"pointerdown":["touchstart","mousedown"],n),Yu(i).off("click","a",t),Yu(window).off("resize",y),i.style.removeProperty(An.transformProperty)},on:this.on}}function Df(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};e.items.forEach(function(e){void 0!==e.label&&(e.label=If(e.label))});var i,r,n,o,s,a,c,u=Q(),l=e.id,d=e.items,f=!1;function h(e){var t=Be(i.querySelectorAll(".vp-panel-item"));return t[e]||t}function v(){return i.classList.contains("vp-panel-collapsible")}function p(){return i.classList.contains("vp-panel-open")}function m(){var e,n;v()&&(u.fire("open",o),t.events.fire(Mc.Nc,!0,o),r.removeAttribute("hidden"),i.classList.add("vp-panel-open"),e=window.getComputedStyle(i),e=parseFloat(e.fontSize),i.style.height="".concat(i.scrollHeight/e,"em"),n="".concat(An.transitionProperty,"Delay"),h().forEach(function(e,t){e.style[n]="".concat(40*t+100,"ms"),e.classList.add("vp-panel-item-in")}))}function g(){v()&&(u.fire("close",o),t.events.fire(Mc.Fc,!1,o),i.classList.remove("vp-panel-open"),i.style.removeProperty("height"),T())}function b(e){return e.preventDefault(),(p()?g:m)()}function y(e){u.fire("select",d[e].id)}function E(e){u.fire("select",d[e].id)}function w(e){f||(e=hc(e.target,h()),u.fire("select",d[e].id))}function _(e){if("keypress"===e.type&&13===e.which||"keydown"===e.type&&32===e.which){e=hc(e.target,h());if(-1!==e)return u.fire("select",d[e].id),!1}return null}function T(){var e;a&&((e=h(d.findIndex(function(e){return"".concat(e.id)==="".concat(a)}))).length||e.classList.remove("vp-".concat(l,"-item-hover")))}function S(){return d.find(function(e){return e.active})}return e=Object.assign(e,{get active(){return S()?S().label:""}}),(c=document.createElement("div")).innerHTML=Hl.render("menu_list_panel",e),i=c.children[0],r=i.querySelector(".js-panelItems"),(n=new Of(r)).on("slide",y),n.on("tap",E),Af(i,".js-panelTitleButton",b),Af(i,"li",w),Yu(i).on("keydown",_),Yu(i).on("keypress",_),Yu(i).on("transitionend",function(e){e.target===i&&(p()?u.fire("openEnd",o):(r.setAttribute("hidden",""),h().forEach(function(e,t){e.classList.remove("vp-panel-item-in")}),u.fire("closeEnd",o)))}),o={id:l,element:i,setCollapsible:function(e){e!==v()&&(i.classList.toggle("vp-panel-open",!e),i.classList.toggle("vp-panel-collapsible",e),e?r.setAttribute("hidden",""):(r.removeAttribute("hidden"),i.style.removeProperty("height")))},resetCarousel:function(e){f=e,s=i.querySelector(".vp-indicator"),n.destroy(),s.classList.remove("vp-indicator-visible"),f&&(e=d.findIndex(function(e){return e.active}),n.setUp(e),n.on("touchMove",function(){s.classList.add("vp-indicator-inactive")}),n.on("touchEnded",function(){s.classList.remove("vp-indicator-inactive")}),s.classList.add("vp-indicator-visible"))},pinTitle:function(){i.classList.add("vp-panel-pinTitle")},isOpen:p,open:m,close:g,setActiveItem:function(t){var e,n=d.findIndex(function(e){return e.active});-1!==n&&(d[n].active=!1,(e=h(n)).classList.remove("vp-panel-item-on"),e.setAttribute("aria-checked","false")),-1!==(n=d.findIndex(function(e){return"".concat(e.id)==="".concat(t)}))&&(d[n].active=!0,(e=h(n)).classList.add("vp-panel-item-on"),e.setAttribute("aria-checked","true"),i.querySelector(".js-panelStatText").innerHTML=d[n].label),s.classList.remove("vp-indicator-inactive")},setHoverState:function(e){T(),(a=e)&&h(d.findIndex(function(e){return"".concat(e.id)==="".concat(a)})).classList.add("vp-".concat(l,"-item-hover"))},clearHoverState:T,setTitleStat:function(e){S()&&"auto"!==S().id||(i.querySelector(".js-panelStatText").innerHTML=e)},getTabindexItems:function(){return Be(i.querySelectorAll('.vp-panel-collapsible button[tabindex="0"], .vp-panel-open li[tabindex="0"]'))},on:u.on,off:u.off}}function Pf(o){var s,a=0,c=!1,e=null,u=null,l=null;function t(){var i,r;function t(e){var t,n;["left","right"].includes(e)&&(t="right"===e?d:f,n="right"===e?u:l,a++,clearTimeout(i),2<=a&&(v(n,e,r),2===a&&t(10),t(10*(a-2)),2<a&&(v(n,e,r+=10),a=2)))}function n(){2<=a&&o.events.fire(Mc.pc),a=0,r=10}!An.touch||o.store.get(Du)||o.config.video.spatial||(i=null,r=10,(e=o.element.querySelector(".vp-nudge-wrapper")).classList.remove("hidden"),e.innerHTML=Hl.render("nudge"),u=o.element.querySelector(".vp-nudge-forward"),l=o.element.querySelector(".vp-nudge-backward"),Af(u,function(e){e.preventDefault(),t("right"),i=setTimeout(n,250)}),Af(l,function(e){e.preventDefault(),t("left"),i=setTimeout(n,250)}),o.events.on(Mc.hc,function(){c=!0}))}function d(e){n((o.currentTime||0)+e)}function f(e){e=(o.currentTime||0)-e;n(0<=e?e:0)}function n(e){o.events.fire(Mc.vc),o.events.fire(Sc.Ts,null,e),c||o.events.fire(Mc.wc)}function h(e,t){var n=o.currentTime||0;return"right"===t&&n>o.config.video.duration-10||n<=10&&"left"===t?null:"".concat("right"===t?"+":"-"," ").concat(e)}function v(e,t,n){var i,r;["left","right"].includes(t)&&(i=o.element.querySelector(".vp-nudge-shade-".concat(t)),r=e.querySelector(".vp-nudge-seconds"),h(n,t)&&(r.innerHTML=h(n,t),clearTimeout(s),e.classList.remove("invisible"),i.classList.remove("vp-nudge-shade-invisible"),s=setTimeout(function(){i.classList.add("vp-nudge-shade-invisible"),e.classList.add("invisible")},500)))}return o.events.on(Mc.jl,function(){[u,l].forEach(function(e){e&&Yu(e).off("click").off("touchend")}),t()}),t(),{}}var Mf=/^(%20|\s)*(javascript|data)/im,Nf=/[^\x20-\x7E]/gim,Ff=/^([^:]+):/gm,qf=[".","/"];function Uf(e){e=e.match(Ff);return null==e?void 0:e[0]}function jf(n){return n?decodeURI(encodeURI((e=function(){var e=n.replace(Nf,"");if(-1<qf.indexOf(e[0]))return e;var t=Uf(e);return t&&Mf.test(t)?"":e}(),t=Uf(e=e.trim()),e=e&&!t?"http://".concat(e):e))):null;var e,t}function Hf(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];!function(t){Vf(t);for(var e=arguments.length,n=new Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];n.forEach(function(e){Wf(e),e.classList.remove(t)})}.apply(void 0,["hidden"].concat(t))}function Bf(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];!function(t){Vf(t);for(var e=arguments.length,n=new Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];n.forEach(function(e){Wf(e),e.classList.add(t)})}.apply(void 0,["hidden"].concat(t))}function Vf(e){if(""===(e=String(e)))throw new SyntaxError("An invalid string was specified");if(/\s/.test(e))throw new SyntaxError("String contains invalid character")}function Wf(e){if(!(null!=e&&e instanceof HTMLElement))throw new SyntaxError("An invalid HTMLElement was specified")}function $f(t,s){var r=null;function n(e){e=e.target.activeCues[0]?e.target.activeCues[0].id:null;t.events.fire(Mc.Sc,e)}function i(e){var n=!!e&&"menu"===e.position,i=e?e.id:null;r.forEach(function(e){var t=e.dataset.time===i;e.classList.toggle("chapter-marker-hover",t),e.classList.toggle("chapter-marker-hover-no-text",t&&n)})}function o(t){r.forEach(function(e){e.classList.toggle("chapter-marker-active",e.dataset.time===t)})}return{renderChapterMarkers:function(){var e=s.querySelector(".chapters");e.innerHTML=Hl.render("chapters",{chapters:t.backbone?t.backbone.chapters:[],duration:t.config.video.duration}),t.events.off(Mc.Ec),t.events.off(Mc.Tc),function(){for(var e=s.querySelectorAll(".chapter-title"),t=0;t<e.length;t++){var n=e[t];240===tc(n).width&&(o=tc(n.querySelector(".js-chapter-content")).width,n.style.width=o+"px");var i=tc(n),r=i.left,o=i.right,i=tc(s),r=i.left-r,i=o-i.right;0<r&&(n.style.left=r+"px"),0<i&&(n.style.right=i+"px")}}(),Yu(e).on("mouseenter",".js-chapter-marker",function(e){t.events.fire(Mc.Ec,{id:e.target.dataset.time,position:"marker"})}).on("mouseleave",".js-chapter-marker",function(e){t.events.fire(Mc.Tc)}),t.events.on([Mc.Ec,Mc.Tc],i),t.events.on(Mc.Sc,o),r=Be(s.querySelectorAll(".js-chapter-marker")),null!=(e=t.backbone)&&e.chaptersTrack&&t.backbone.chaptersTrack.addEventListener("cuechange",n)}}}function zf(f,h,v){var t,p,m,g,b,y,E,w,_,T,S,A,k,L,R,C,x,I,O,D,P,M,N,F,q,U,i,r,n,e,c,u,o=!1,j=!1,H=!1,s=!1,a=!1,l=!1,d=!1,B=!1,V=!1,W=!1,$=!1,z=!1,K=!0,G=!1,Y=!1,J=null,X=null,Z=[],Q=null,ee=null,te=null,ne=!1,ie=!1,re=[],oe=new $f(f,v),se=f.config.embed.autoplay&&f.config.request.flags.autohide_controls,ae=[{id:.5,label:"0.5x"},{id:.75,label:"0.75x"},{id:1,label:"Normal"},{id:1.25,label:"1.25x"},{id:1.5,label:"1.5x"},{id:2,label:"2x"}],ce=An.touch?300:0;function ue(){X=J=null}function le(){var e,t;return X||(e=tc(E).left,t=parseInt(window.getComputedStyle(E,"").borderLeftWidth,10),X=e+t),X}function de(){var e,t;return J||(e=tc(E).right,t=parseInt(window.getComputedStyle(E,"").borderRightWidth,10),J=e-t),J}function fe(e){var t=le();return rc((e-t)/(de()-t),0,1)}function he(e){for(var t=We(Z);!(r=t()).done;){var n=r.value,i=tc(n),r=i.left,i=i.right;if(r<=e&&e<=i)return parseFloat(n.getAttribute("data-time"))/f.config.video.duration}return fe(e)}function ve(e,t){j&&!z&&(t=t||f.config.video.duration*e||0,window.requestAnimationFrame(function(){pe(e,t),me(e,t)}))}function pe(e,t){(!h.get(Cu)||G&&0!==t)&&(h.get(Du)&&(e=100),A.style.left=Math.min(uc(100*e),100)+"%",k.innerHTML=Gl(t),A.style.display="block")}function me(e,t){h.get(Du)&&(e=100);e=Math.min(uc(100*e),100);T.style.width="".concat(e,"%"),w.setAttribute("aria-valuenow",Math.round(t)),w.setAttribute("aria-valuetext","".concat(Gl(t)," of ").concat(Gl(f.config.video.duration))),b.setAttribute("width","".concat(e,"%"))}function ge(e){h.get(Du)&&(e=100);e=Math.min(uc(100*e),100);_.style.width="".concat(e,"%"),g.setAttribute("width","".concat(e,"%"))}function be(){G=!1,p.classList.remove("state-playing"),p.classList.add("state-paused")}function ye(){G=!0,Y&&Le(),p.classList.remove("state-paused"),p.classList.add("state-playing")}function Ee(){K=!1,re.forEach(function(e){return e.retargetFocusFromChild()}),f.events.fire(Mc.Rc,K),v.classList.add("invisible")}function we(){setTimeout(function(){K=!0,f.events.fire(Mc.Rc,K),v.classList.remove("invisible")},ce)}function _e(){s||K&&(o||(j&&$||a||se)&&(H||(ne||ie)&&!a||a&&3===f.config.view||B||l||Ee()))}function Te(){s||K||a||we()}function Se(e){return re.push(e),e.button.parentNode.insertBefore(e.element,e.button.nextSibling),e}function Ae(t){re=re.filter(function(e){return e!==t}),t.destroy()}function ke(e){var n,i,r,t=0<arguments.length&&void 0!==e?e:1;I&&(e=t/(1/O.length),i=Math.ceil(e),(r=e%1)<=.33&&(n="fill1"),.33<r&&r<=.66&&(n="fill2"),O.forEach(function(e,t){e.classList.remove("fill0"),e.classList.remove("fill1"),e.classList.remove("fill2"),t===i-1&&r&&r<=.66?e.classList.add(n):i-1<t&&e.classList.add("fill0")}),I.setAttribute("aria-valuenow",t.toFixed(3)),I.setAttribute("aria-valuetext",Math.round(100*t)+"%"))}function Le(){var e,t,n,i,r,o,s,a,c,u,l,d;1!==f.config.view&&3!==f.config.view||(N&&(Ae(N),N=null),Q&&(Ae(Q),Q=null),d=f.backbone||{},t={show:(e=f.config.embed.settings).logo,showLink:!!f.config.video.logo_url,url:f.config.video.logo_url},n=function(){if(!f.config.embed.settings.custom_logo)return null;var e=f.config.embed.settings.custom_logo,t=e.img;return 2<=An.devicePixelRatio&&(t=t.replace(/(mw|mh)=(\d+)/g,function(e,t,n){return t+"="+2*parseInt(n,10)})),{showLink:null!==e.url,url:jf(e.url),img:t,sticky:e.sticky,width:e.width,height:e.height}}(),!e.watch_trailer||j||G||f.config.embed.autoplay||!f.config.embed.on_site?(i=!f.backbone||f.backbone.supportsSettingVolume,r=!f.backbone||f.backbone.supportsTextTracks,o=af(f.config,"chromecast").group&&An.browser.chrome&&(void 0===e.chromecast||e.chromecast)&&!f.config.video.spatial&&"stock"!==f.config.video.privacy,s=f.displayContext===f.backbone,a=d.supportsPlaybackRate&&e.speed,c=s&&(a||d.qualities&&0<d.qualities.length),u="disable"!==f.config.video.privacy&&(An.webvr||An.stereoscopic)&&f.config.video.spatial&&af(f.config,"webvr").group,l=!!f.backbone&&(null==(a=f.backbone.textTracks)?void 0:a.length),f.events.on(fn.TEXT_TRACKS_AVAILABLE,function(){var e;l=!!f.backbone&&(null==(e=f.backbone.textTracks)?void 0:e.length),Le()}),d={targetBlank:0===f.config.embed.on_site,playState:G?"playing":"paused",volume:i&&e.volume,ccButton:r&&l&&s,castButton:o,ccOn:null!==te,prefsButton:c,airplayButton:An.airPlay,stereoscopicButton:u,fullscreenButton:e.fullscreen,vimeoLogo:s?t:{},duration:Gl(f.config.video.duration),rawDuration:f.config.video.duration,captionsIcon:Hl.render("icon_cc",{title:"Choose captions"}),settingsIcon:Hl.render("icon_gear",{title:"Settings"}),fullscreenIcon:Hl.render("icon_fullscreen",{title:"Enter full screen"}),unfullscreenIcon:Hl.render("icon_unfullscreen",{title:"Exit full screen"}),playIcon:Hl.render("icon_play",{title:"Play"}),pauseIcon:Hl.render("icon_pause",{title:"Pause"}),replayIcon:Hl.render("icon_replay",{title:"Play"}),chaptersIcon:Hl.render("icon_chapters",{title:"Chapters"}),chapters:!!d.chapters&&d.chapters.length,strings:{loadedBar:"loaded",playedBar:"played",volume:"Volume (use up/down arrow keys to change)",airPlay:"Choose an AirPlay device",airPlayOff:"Turn off AirPlay",pipEnter:"Enter Picture-in-Picture",pipReturn:"Exit Picture-in-Picture",fullscreen:"Fullscreen",chromecast:"Cast",watchOnVimeo:"Watch on vimeo.com",stereoscopic:"Enable stereoscopic playback",stereoscopicOff:"Disable stereoscopic playback"}},n&&(d.customLogo=n),v.classList.remove("trailer"),Y=!1,v.innerHTML=Hl.render("controlbar",d),p=v.querySelector(".play"),m=p.querySelector(".buffer"),g=p.querySelector(".loaded"),b=p.querySelector(".played"),y=v.querySelector(".play-bar"),E=v.querySelector(".vp-progress"),w=y.querySelector(".focus-target"),_=y.querySelector(".loaded"),T=y.querySelector(".played"),S=y.querySelector(".cuepoints"),A=v.querySelector(".timecode"),k=A.querySelector(".box"),L=v.querySelector(".ghost-timecode"),R=L.querySelector(".box"),C=v.querySelector(".thumb-preview"),x=v.querySelector(".thumb"),(I=v.querySelector(".volume"))&&(O=Be(I.querySelectorAll("div")),f.config.embed.muted?ke(0):ke(f.config.request.cookie.volume)),M=v.querySelector(".play-bar .cc"),P=v.querySelector(".js-chapter-button"),(D=v.querySelector(".js-prefs"))&&bu.isCastConnected&&Bf(D),F=v.querySelector(".pip"),An.airPlay&&(q=v.querySelector(".airplay")),(An.webvr||An.stereoscopic)&&f.config.video.spatial&&(U=v.querySelector(".stereoscopic")),H=!1,K&&f.events.fire(Mc.Rc,K),se&&_e(),Re(),h.get(Du)&&((d=v.querySelector(".vp-live-status")).style.display="block",d=d.querySelector(".vp-live-status-circle"),h.get(Ou)?(d.classList.remove("offline"),d.classList.add("online"),D&&!bu.isCastConnected&&Hf(D)):(d.classList.add("offline"),d.classList.remove("online"),p.classList.add("hidden"),D&&Bf(D)),k.style.cursor="default",E.classList.add("disabled")),oe.renderChapterMarkers()):function(e,t){v.classList.add("trailer");e={vimeoLogo:e,text:f.config.video.vod.button_text||"Watch Trailer",strings:{watchOnVimeo:"Watch on vimeo.com"}};t&&(e.customLogo=t),v.innerHTML=Hl.render("controlbar_trailer",e),p=v.querySelector(".play"),Y=!0}(t,n))}function Re(){var e;h.get(Du)&&(e=G&&0<f.config.duration,A.style.display=e?"block":"none")}function Ce(){var n;function i(e){var t;z=!1,n===e.pointerId&&!1!==e.isPrimary&&(t=e.clientX,e.targetTouches&&0<e.targetTouches.length&&(t=e.targetTouches[0].clientX,e.preventDefault()),ve(t=he(t)),f.events.fire(Sc.Ts,t))}function r(e){var t=e.type;"pointerup"===t||"MSPointerUp"===t?Yu(v).off("pointermove",".vp-progress",i).off("pointerup",".vp-progress",r):"touchend"===e.type?Yu(v).off("touchmove",i).off("touchend",r):Yu(document).off("mousemove",i).off("mouseup",r),f.events.fire(Mc.Ac),f.element.classList.remove("scrubbing")}f.events.on(un.TIME_UPDATE,function(e){var t=e.currentTime,e=e.timeProgress;z&&(0===f.config.embed.time||0<f.config.embed.time&&t>=f.config.embed.time)&&(z=!1),l||ve(e,t)}),f.events.on(Mc.xc,function(e){l=!0,d=e}),f.events.on(Mc.Ac,function(){d=l=!1}),f.events.on(un.SEEKED,function(e){e=e.timeProgress;d&&ve(e)}),h.get(Cu)&&!h.get(Ru)||(Yu(v).on(An.pointerEvents?"pointerdown":["touchstart","mousedown"],".vp-progress",function(e){if(!(e.button&&2===e.button||e.target.classList.contains("js-chapter-marker"))){var t=e.type;if(f.element.classList.add("scrubbing"),f.events.fire(Mc.xc,!1,t),"pointerdown"===t||"MSPointerDown"===t){n=e.pointerId;try{e.target.msSetPointerCapture?e.target.msSetPointerCapture(n):e.target.setPointerCapture(n)}catch(e){}Yu(v).on("pointermove",".vp-progress",i).on("pointerup",".vp-progress",r)}else"touchstart"===t?Yu(v).on("touchmove",i).on("touchend",r):Yu(document).on("mousemove",i).on("mouseup",r);t=e.clientX;e.targetTouches&&0<e.targetTouches.length&&(t=e.targetTouches[0].clientX,e.preventDefault());e=he(t);return j?ve(e):(pe(e,t=f.config.video.duration*e),me(e,t),z=!0),f.events.fire(Sc.Ts,e,null),!1}}),f.events.on(Sc.Xs,function(e,t){e=rc(e,0,f.config.video.duration),t=t||e/f.config.video.duration,window.requestAnimationFrame(function(){pe(t,e),me(t,e)})}))}function xe(e){if(e.element.parentElement){if(e.isFullwidth())return e.element.style.right="",e.element.style.bottom="",void(e.element.style.height="");var t=tc(f.element),n=tc(e.button),i=tc(e.element.parentElement),r=tc(e.element),o=0,s=n.right-n.width/2+r.width/2;s<i.right&&(o=i.right-s);var a=window.getComputedStyle(e.element),c=parseFloat(a.fontSize);e.isCentered()?(n=t.right-i.right,s=t.bottom-i.bottom,a=(t.width-r.width)/2,r=(t.height-r.height)/2,e.element.style.right="".concat((a-n)/c,"em"),e.element.style.bottom="".concat((r-s)/c,"em")):(e.element.style.right="".concat(o/c,"em"),e.element.style.bottom="".concat(i.height/c,"em"))}}function Ie(){h.get(Cu)&&!h.get(Ru)&&(f.events.on(ts.STREAM_ONLINE,function(){Le()}),f.events.on([ts.STREAM_OFFLINE,ts.EVENT_ENDED],function(){Le()}))}return Le(),Af(v,".play, .replay",function(){return j=!0,Y&&(K=!1,v.classList.add("invisible"),Le(),Te()),p.classList.contains("state-playing")?(f.events.fire(Mc.bc),be()):(f.events.fire(Mc.wc),ye()),!An.android}),f.events.on([Mc.wc,Mc.rc,Vo,un.PLAY],ye),f.events.on([Mc.bc,Mc.oc,Mc.xf,Sc.Rs],be),f.events.on(Mc.tr,function(){(f.displayContext!==f.backbone?ye:be)()}),f.events.on(Mc.uc,function(){z=!1,be(),ve(1)}),f.events.on(Mc.Qc,function(e){"not-supported"===e&&be()}),h.get(Cu)&&!h.get(Ou)&&(p.classList.add("hidden"),f.events.once(ts.STREAM_ONLINE,function(){p.classList.remove("hidden")})),f.events.on(ts.EVENT_ENDED,function(){p.classList.add("hidden")}),Ce(),f.events.on(fn.BUFFER_STARTED,function(){m.setAttribute("class",m.getAttribute("class").replace(/\s+hidden/,"")),B=!0,se||Te()}),f.events.on(fn.BUFFER_ENDED,function(){_.classList.remove("hidden"),h.get(Du)&&T.classList.remove("hidden"),m.setAttribute("class",m.getAttribute("class")+" hidden"),B=!1}),c=null,u=!1,h.get(Cu)&&!h.get(Ru)||Yu(v).on("mouseenter",".vp-progress",function(e){W||V||(L.classList.remove("hidden"),W=!0,Ue(e),window.requestAnimationFrame(function(){window.requestAnimationFrame(function(){L.classList.remove("invisible")})}),f.config.request.thumb_preview&&c&&!u&&Ne().then(qe).catch(function(){}),Yu(y).on("click",Fe))}).on("mousemove",".play-bar",Ue).on("mouseleave",".play-bar",je).on("mouseenter",".js-chapter-marker",function(){u=!0}).on("mouseleave",".js-chapter-marker",function(){u=!1,c=null}),Yu(v).on("transitionend",".ghost-timecode",function(e){"opacity"===e.propertyName&&"0"===window.getComputedStyle(this,"").opacity&&(L.classList.add("hidden"),C.classList.add("hidden"))},!1),f.events.on(Mc.gl,je),f.events.on(Mc.jl,function(){e=null}),Yu(v).on("mousemove",".volume",function(e){var t=e.srcElement;if(-1===O.indexOf(t)){var n=tc(I),e=e.clientX,n=n.bottom-2,t=document.elementFromPoint(e,n);if(-1===O.indexOf(t))return}t.classList.add("hover"),window.requestAnimationFrame(function(){window.requestAnimationFrame(function(){t.classList.remove("hover"),t.classList.add("animate")})})}),Yu(v).on("transitionend",".volume div",function(e){"height"===e.propertyName&&this.classList.remove("animate")}),Yu(document).on("contextmenu",".volume",function(){this.blur()}),Yu(v).on(An.pointerEvents?"pointerdown":["touchstart","mousedown"],".volume",function(e){if(1===e.which){I.setAttribute("data-tabindex",I.getAttribute("tabindex")),I.removeAttribute("tabindex"),V=!0,f.element.classList.add("scrubbing"),f.events.fire(Mc.Mc);var t=e.type;if("pointerdown"===t||"MSPointerDown"===t){n=e.pointerId;try{e.target.msSetPointerCapture?e.target.msSetPointerCapture(n):e.target.setPointerCapture(n)}catch(e){}Yu(v).on("pointermove",".volume",De).on("pointerup",".volume",Pe)}else"touchstart"===t?Yu(document).on("touchmove",De).on("touchend",Pe):Yu(document).on("mousemove",De).on("mouseup",Pe);t=e.clientX,t=Me(t=e.targetTouches?e.targetTouches[0].clientX:t);f.events.fire(Sc.Ss,t),ke(t)}}),f.events.on(Mc.ac,function(e){f.backbone.muted?ke(0):!V&&O&&ke(e)}).on([Sc.Ns,Sc.Ps],function(){Le()}),Af(v,".js-chapter-marker",function(e){e=parseFloat(e.target.dataset.time)+.001;f.events.fire(Mc._c,e,"controlbar")}),f.events.on(fn.CHAPTER_CUES_UPDATED,function(){oe.renderChapterMarkers()}),Af(v,".js-chapter-button",function(){P&&(ee?(ee.toggle(),f.events.fire(Mc.Tc)):(ee=function(){var e,n,t=new Df(f,{id:"chapters",title:"Chapters",items:(e=f.backbone.chapters,n=0,Be(e).map(function(e){var t=f.currentTime;return{index:"".concat(n+=1),label:e.text,id:e.id,active:t>=e.startTime&&t<e.endTime}}))},!1);t.pinTitle();var i=new kf(f,P,[t]),r=f.element;function o(e){i.element.classList.toggle("vp-menu-fullwidth",e),f.events.fire(Mc.Uc,i.isCentered(),i),e?r.insertBefore(i.element,r.children[0]):Se(i)}return i.element.classList.add("vp-menu-chapters"),Yu(t.element).on("mouseenter",".vp-panel-item",function(e){f.events.fire(Mc.Ec,{id:e.target.dataset.time,position:"menu"})}).on("mouseleave",".vp-panel-item",function(e){f.events.fire(Mc.Tc)}),f.events.on(Mc.Ec,function(e){t.setHoverState(e.id)}),f.events.on(Mc.Tc,function(e){t.clearHoverState()}),h.watch("ui.controlbar.isPrefsMenuCentered",o),o(h.get("ui.controlbar.isPrefsMenuCentered")),t.on("select",function(e){f.events.fire(Mc.Tc),f.events.fire(Mc._c,parseFloat(e)+.001,"menu")}),f.events.on(Mc.Sc,function(e){ee&&ee.getPanel("chapters")&&ee.getPanel("chapters").setActiveItem(e)}),i}()).show())}),f.events.on(fn.CHAPTER_CUES_UPDATED,function(){ee&&(ee.destroy(),ee=null),f.backbone.chapters.length<2&&Le()}),Af(v,".cc",function(){f.events.fire(Mc.gc)}),f.events.on(Mc.gc,function(e){N?N.toggle(e):(N=Se(function(e){var n=[];f.backbone.textTracks&&(f.backbone.textTracks.forEach(function(e){var t="CC"===e.label.substring(e.label.length-2),t="captions"!==e.kind||t?"":" CC",t=f.config.video.live_event?"Display Captions":e.label+t;n.push({label:t,id:"".concat(e.id),active:te==="".concat(e.id)})}),n.push({label:"None",id:"off",active:null===te}));var t=new Df(f,{items:n,id:"cc",title:"Closed Captions"});return t.on("select",function(e){"off"!==e?f.events.fire(Sc.Bs,e):f.events.fire(Sc.Hs)}),new kf(f,e,[t])}(M))).show(e)}),f.events.on(Mc.jc,function(e){e?(e=e.id,te=e,N&&N.getPanel("cc")&&(N.getPanel("cc").setActiveItem(e),setTimeout(function(){N.hide()},100)),M&&(M.classList.add("on"),M.classList.remove("off"))):(te=null,N&&N.getPanel("cc")&&(N.getPanel("cc").setActiveItem("off"),setTimeout(function(){N.hide()},100)),M&&(M.classList.add("off"),M.classList.remove("on")))}).on([Sc.Us,Sc.Fs],function(){Le()}).on(Mc.sf,function(){Le()}),Af(v,".js-prefs",function(){f.events.fire(Mc.yc)}),f.events.on(Mc.yc,function(e){D&&(Q?Q.toggle(e):(Q=Se(function(){var e,t=[];f.backbone.qualities&&0<f.backbone.qualities.length&&((e=new Df(f,{id:"quality",title:"Quality",items:f.backbone.qualities})).on("select",function(e){f.events.fire(Sc.Os,e)}),r&&e.setTitleStat(r),e.pinTitle(),t.push(e)),f.backbone.supportsPlaybackRate&&f.config.embed.settings.speed&&(e=ae.map(function(e){return e.active=e.id===f.backbone.playbackRate,e}),(e=new Df(f,{id:"speed",title:"Speed",items:e})).on("select",function(e){f.events.fire(Sc.Zs,e)}),e.pinTitle(),t.push(e));var n=new kf(f,D,t);function i(e){n.element.classList.toggle("vp-menu-center",e),f.events.fire(Mc.Uc,n.isCentered(),n)}return h.watch("ui.controlbar.isPrefsMenuCentered",i),i(h.get("ui.controlbar.isPrefsMenuCentered")),An.touch&&n.element.classList.add("vp-menu-carousel"),n}())).show(e))}),f.events.on(Mc.sc,function(e){Q&&Q.getPanel("quality")&&Q.getPanel("quality").setActiveItem(e)}),f.events.on(fn.STREAM_CHANGE,function(e){var t=e.quality||"".concat(e.height,"p");r=t,Q&&Q.getPanel("quality")&&(e=f.backbone.qualities.find(function(e){return e.id===t}).label,Q.getPanel("quality").setTitleStat(e))}),f.events.on(Mc.dc,function(e){Q&&Q.getPanel("speed")&&Q.getPanel("speed").setActiveItem(e)}),Af(v,".pip",function(){"picture-in-picture"!==f.backbone.presentationMode?f.events.fire(Sc.Gs):f.events.fire(Sc.Ks)}),f.events.on(Yo,function(){F&&(F.classList.remove("hidden"),F.hidden=!1,ue())}).on(Jo,function(){F&&(F.classList.add("hidden"),F.hidden=!0,ue())}).on(Xo,function(){ie=!0,F&&(F.classList.add("on","return"),F.classList.remove("enter"),F.setAttribute("title",F.getAttribute("data-title-return")))}).on(Zo,function(){ie=!1,F&&(F.classList.add("enter"),F.classList.remove("on","return"),F.setAttribute("title",F.getAttribute("data-title-enter")))}),An.airPlay&&(Af(v,".airplay",function(){f.events.fire(Mc.Ef)}),f.events.on(Mc.yf,function(){q&&(q.classList.remove("hidden"),q.hidden=!1,ue())}).on(Mc.gf,function(){q&&(q.classList.add("hidden"),q.hidden=!0,ue())}).on(Mc._f,function(){ne=!0,q&&(q.classList.remove("off"),q.classList.add("on"),q.setAttribute("title",q.getAttribute("data-title-on"))),Te()}).on(Mc.kf,function(){ne=!1,q&&(q.classList.remove("on"),q.classList.add("off"),q.setAttribute("title",q.getAttribute("data-title-off")))})),Af(v,".fullscreen",function(){f.events.fire(Mc.mc)}),f.events.on(Mc.qc,function(){o=!1,v.classList.remove("tiny")}),f.events.on(Mc.zc,function(e){e||(o=!0),t&&v.classList.add("tiny")}),f.events.on([Mc._l,Mc.xc,Sc.Ss],Te).on([Mc.gl,Mc.kl],_e).on(Mc.Hc,function(){H=!1,_e()}).on(Mc.Wc,function(){H=!1}).on(Mc.cc,function(){$=!0,_e()}).on(Sc.Ss,function(e,t){t||Te()}),Yu(v).on(["pointerenter","pointerleave","mouseenter","mouseleave"],[".play",".play-bar",".custom-logo",".vp-menu"],function(e){"pointerType"in e?"mouse"!==e.pointerType&&e.pointerType!==e.MSPOINTER_TYPE_MOUSE||(H="pointerenter"===e.type||"MSPointerEnter"===e.type):An.touch||(H="mouseover"===e.type)}),f.events.on(Sc._overrideControlbarBehavior,function(e){(s=e)?f.events.on(Sc.zs,function(e){(e?we:Ee)()}):f.events.off(Sc.zs)}),f.events.on(Mc.Qc,function(e){if("not-supported"!==e&&"private-unlocked"!==e&&"help"!==e)a=!0,_e();else for(var t=v.querySelectorAll("a, button, input, [tabindex]"),n=0,i=t.length;n<i;n++){var r=t[n].getAttribute("tabindex");r&&t[n].setAttribute("data-tabindex",r),t[n].setAttribute("tabindex","-1")}}).on(Mc.tl,function(){a=!1,Te();for(var e=v.querySelectorAll("[tabindex]"),t=0,n=e.length;t<n;t++){var i=e[t].getAttribute("data-tabindex");i&&"null"!==i?e[t].setAttribute("tabindex",i):e[t].removeAttribute("tabindex"),e[t].removeAttribute("data-tabindex")}}),f.events.on(Mc.Hl,function(){v.classList.add("controls-outro")}).on(Mc.ql,function(){v.classList.remove("controls-outro")}),f.events.on([Mc.Uc,Mc.Oc],function(e,t){xe(t),t.isCentered()&&t.isVisible()&&v.classList.add("controls-centerMenu"),t.isCentered()&&t.isVisible()||v.classList.remove("controls-centerMenu")}).on(Mc.zc,Oe).on(Mc.Rc,function(e){e||Oe()}),Yu(window).on("resize",function(){re.forEach(xe)}),Pf(f),f.events.on(Mc.jl,function(e,t){Ie(),Ce(),Le(),3===f.config.view&&Te(),ue()}),f.events.on(Sc.Rs,function(){window.requestAnimationFrame(function(){Re(),pe(0,f.config.video.duration),me(0,0),ge(0)}),Te(),$=o=z=V=l=H=j=!1,N&&(Ae(N),N=null),Q&&(Ae(Q),Q=null)}),Yu(window).on("resize",function(){ue()}),f.events.on(Mc.Pl,function(){t=!0,v.classList.add("tiny")}).on(Mc.Nl,function(){t=!1,v.classList.remove("tiny")}).on(Mc.Fl,function(){t=!1,v.classList.remove("tiny")}),f.config.embed.on_site&&(i=new He,f.events.on(Mc.Lc,function(e){var t,n;e.data.visible&&((t=document.createElement("div")).setAttribute("id","cuepoint-".concat(e.id)),t.setAttribute("data-time",e.time),t.classList.add("cuepoint"),t.classList.add("out"),t.appendChild(document.createElement("div")),n=e.time/f.config.video.duration*100,t.style.left="".concat(n,"%"),i.set(e,t),S.appendChild(t),Z=Be(v.querySelectorAll(".cuepoint")),window.requestAnimationFrame(function(){return t.classList.remove("out")}))}),f.events.on(Mc.Dc,function(e){var t=i.get(e);t&&(i.delete(e),t.classList.add("out"))}),Yu(v).on("transitionend",".cuepoint",function(e){this.classList.contains("out")&&(S.removeChild(this),Z=Be(v.querySelectorAll(".cuepoint")))})),U&&(Af(v,".stereoscopic",function(){f.events.fire(Mc.Pc)}),U.classList.remove("hidden"),U.hidden=!1),Ie(),bu.on(pu.connected,function(){D&&Bf(D)}),bu.on(pu.disconnected,function(){D&&Hf(D)}),bu.on(pu.playing,ye),bu.on([pu.error,pu.idle,pu.paused,pu.ended,pu.disconnected],be),f.events.on(Vo,function(){f.events.on(un.PROGRESS,function(e){e.loaded,e.duration;var t=e.loadProgress;o||window.requestAnimationFrame(function(){ge(t)})}),j=!0;var e=f.config.embed.time||f.backbone.currentTime;ve(e/f.config.video.duration,e),z=!0}),f.events.fire(Mc.ff),{};function Oe(){re.filter(function(e){return e.isVisible()}).forEach(function(e){return e.hide()})}function De(e){var t=e.clientX;e.targetTouches&&(t=e.targetTouches[0].clientX,e.preventDefault());t=Me(t);f.events.fire(Sc.Ss,t),ke(t)}function Pe(e){V=!1,f.events.fire(Mc.Cc),f.element.classList.remove("scrubbing");var t=e.type;"pointerup"===t||"MSPointerUp"===t?Yu(v).off("pointermove",".volume",De).off("pointerup",".volume",Pe):"touchend"===e.type?Yu(document).off("touchmove",De).off("touchend",Pe):Yu(document).off("mousemove",De).off("mouseup",Pe),I.setAttribute("tabindex",I.getAttribute("data-tabindex")),I.removeAttribute("data-tabindex")}function Me(e){var t=tc(I).left;return rc((e-t)/(tc(I).right-t),0,1)}function Ne(){return(e=e||f.verifyConfig().then(function(e){return fu(e.thumb_preview.url)})).then(function(e){var t=f.config.request.thumb_preview;return x.style.backgroundImage||(x.style.width="".concat(t.frame_width/2,"px"),x.style.height="".concat(t.frame_height/2,"px"),x.style.backgroundImage="url(".concat(t.url,")"),x.style.backgroundSize="".concat(t.width/2,"px ").concat(t.height/2,"px")),e})}function Fe(e){e.target===y&&(ve(e=fe(e.clientX)),f.events.fire(Sc.Ts,e))}function qe(e){return L.classList.contains("hidden")||(C.classList.remove("hidden"),window.requestAnimationFrame(function(){window.requestAnimationFrame(function(){C.classList.remove("invisible")})})),e}function Ue(o){if(f.config.request.thumb_preview&&null===c&&!u){var e=tc(E).width,t=document.querySelector(".player").clientHeight;if(!(c=215<=t&&185<=e))return void C.classList.add("hidden");Ne().then(qe).catch(function(){})}var n,s,a;W&&(e=(t=function(e){for(var t=We(Z);!(o=t()).done;){var n=o.value,i=tc(n),r=i.left,o=i.right,i=i.width;if(r<=e&&e<=o)return{clientX:r+i/2,snappedTo:n}}return{clientX:e,snappedTo:null}}(o.clientX)).clientX,n=t.snappedTo,s=fe(e),a=f.config.video.duration*s,Z.forEach(function(e){return e.classList.toggle("active",e===n)}),f.config.request.thumb_preview&&c&&!u&&Ne().then(function(e){var t,n,n=Ve((t=f.config.video.duration/f.config.request.thumb_preview.frames,n=Math.min(f.config.request.thumb_preview.frames-1,Math.ceil(a/t)),t=n%f.config.request.thumb_preview.columns,n=Math.floor(n/f.config.request.thumb_preview.columns),[-t*f.config.request.thumb_preview.frame_width/2,-n*f.config.request.thumb_preview.frame_height/2]),2),i=n[0],r=n[1];return window.requestAnimationFrame(function(){x.style.backgroundPosition="".concat(i,"px ").concat(r,"px")}),e}).catch(function(){}),window.requestAnimationFrame(function(){R.innerHTML=Gl(a);var e,t,n,i,r=(100*s).toFixed(3);L.style.left="".concat(r,"%"),e=s,i=(n=Ve((t=tc(p).left,n=tc(y).right,i=tc(C).width,r=t+Math.ceil(i/2),t=n-Math.ceil(i/2),n=le(),i=de()-n,[(r-n)/i,(t-n)/i]),2))[0],n=n[1],e=(100*Math.max(i,Math.min(n,e))).toFixed(3),C.style.left="".concat(e,"%"),o.clientX>de()+10&&!C.contains(document.elementFromPoint(o.clientX,o.clientY))&&je()}))}function je(){L&&(L.classList.add("invisible"),C.classList.add("invisible")),W=!1,Yu(y).off("click",Fe)}}var Kf=((Te=Gf.prototype).setAngle=function(e,t){var n=this;this.va&&window.cancelAnimationFrame(this.va);var i=0;1===this.version?i=-45:2===this.version&&(i=-30);var r="".concat(i+t),o=(e+85)/170;this.va=window.requestAnimationFrame(function(){n.Gh.setAttribute("transform","rotate(".concat(r,", ").concat(18,", ").concat(18,")")),n.Kh&&n.Kh.setAttribute("d",n.Jh(o,18))})},Te.Jh=function(e,t){var n=2*t-Math.round(2*t*e),e=(2*t-2*Math.sqrt(2*n*t-Math.pow(n,2)))/2,t=2*t-e-5;return"M".concat(5+e,",").concat(n," L").concat(t,",").concat(n," z")},Te.reveal=function(){var e=this;this.zh.classList.remove("cloaked"),window.requestAnimationFrame(function(){e.zh.classList.add("in")}),this.visible=!0},Te.fade=function(){this.zh.classList.add("fade"),this.visible=!0},Te.hide=function(){var t=this;this.zh.classList.remove("in"),this.zh.classList.remove("fade"),this.zh.classList.add("leaving"),Yu(this.zh).on("transitionend",function e(){"opacity"===event.propertyName&&(t.zh.classList.remove("leaving"),t.zh.classList.add("cloaked"),t.visible=!1),Yu(t.zh).off("transitionend",e)})},Te.updatePosition=function(e){if(e){e=tc(e);return e.height<265?(this.zh.classList.remove("align-bottom"),void this.zh.classList.add("hidden")):e.height<336?(this.zh.classList.remove("hidden"),void this.zh.classList.add("align-bottom")):(this.zh.classList.remove("hidden"),void this.zh.classList.remove("align-bottom"))}},Te.getWrapper=function(){return this.zh},Gf);function Gf(e,t){var n=this,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;Q(this),this.version=i,this.visible=!1;var r=this.zh=document.createElement("div");r.classList.add("compass-wrapper"),r.innerHTML=Hl.render("compass",{version:i}),r.classList.add("cloaked"),e.appendChild(r),t&&r.addEventListener("click",t),this.Gh=r.querySelector(".compass-slice"),this.Kh=r.querySelector(".compass-line");t=function(){n.Yh=!0},r=function(e){return function(){setTimeout(function(){n.Yh||(n.fade(),n.Yh=!1)},e)}};Yu(this.zh).on("mousein",t).on("pointerin",t).on("mouseout",r(1e3)).on("pointerout",r(1e3)),r(2500)()}function Yf(h,i,v){var e,t,n,r,o,s,a=null,c=An.touch?4500:2e3,u=!0,l=!0,d=!1,p=null,m=null,g=[],b=!1,y=null,E=null,f=!0,w=!1,_=!1,T=!1,S=!1,A=!1,k=v.querySelector(".vp-target"),L=v.querySelector(".vp-sidedock"),R=v.querySelector(".vp-controls"),C=v.querySelector(".vp-title"),x=v.querySelector(".vp-video"),I=Be(v.querySelectorAll(".vp-nudge")),O=!!An.touch&&I.some(function(e){return!e.classList.contains("invisible")}),D=h.config.embed.autoplay&&h.config.request.flags.autohide_controls,P=An.touch?300:0,M=null,N=af(h.config,"webvr").group||!1;function F(){clearTimeout(a),a=null}function q(){A&&(clearTimeout(a),a=setTimeout(j,c))}function U(){Kd.element&&Kd.element.classList.contains("js-player-fullscreen")&&(d||(v.classList.add("player-cursor-hide"),d=l=!0))}function j(e){(w||f)&&(T||(F(),document.activeElement&&document.body.classList.contains("showfocus")&&(L.contains(document.activeElement)||R.contains(document.activeElement))||(h.events.fire(e?Mc.gl:Mc.kl),l=!0,An.spatialPlayback&&h.config.video.spatial||(k.classList.add("hidden"),k.setAttribute("hidden","")),u=!0,U())))}function H(){q(),O||S||w&&f||(h.events.fire(Mc._l),k.classList.remove("hidden"),k.removeAttribute("hidden"))}function B(){w||f?v.removeAttribute("tabindex"):_||v.setAttribute("tabindex","0")}function V(){h.events.on([un.TIME_UPDATE,un.SEEKED],function e(t){1.75<=t.currentTime&&null===a&&(h.events.fire(Mc.cc),h.events.off([un.TIME_UPDATE,un.SEEKED],e))})}function W(){x.classList.remove("threesixty-video"),h.element.classList.remove("grabbable"),h.element.classList.remove("grabbing"),p&&p.hide()}function $(){g.forEach(function(e){return clearTimeout(e)}),g=[]}function z(e){e&&(e.classList.remove("cloaked"),window.requestAnimationFrame(function(){e.classList.add("in")}))}function K(n){n&&(n.classList.add("leaving"),window.requestAnimationFrame(function(){Yu(n).on("transitionend",function e(t){"opacity"===t.propertyName&&(n.classList.remove("in"),n.classList.remove("leaving"),n.classList.add("cloaked"),Yu(n).off("transitionend",e))})}))}function G(e){60<tc(L).width?e.classList.add("vp-alert-bumpdown"):e.classList.remove("vp-alert-bumpdown")}return s=!0,An.pointerEvents?Yu(v).on("pointerenter",function(e){return"mouse"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE?(c=2e3,Y()):(c=4500,void Z(e))}).on("pointermove",function(e){if("mouse"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE)return J(e)}).on("pointerleave",function(e){if("mouse"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE)return X()}):Yu(v).on("touchmove",function(){c=4500,q()}).on("touchend",Z).on("mouseenter",Y).on("mousemove",J).on("mouseleave",X),h.events.on(un.PLAY,function(e){D||0===e||H()}).on(Mc.tr,H).on([fn.BUFFER_ENDED,un.SEEKED,Mc.Ac,Mc.ac,Mc.Nc],q).on(Vo,function(){A=!0}),h.events.on(Mc.Oc,function(e){e&&q()}),h.events.on(Mc.Qc,B).on(Mc.Rc,function(e){f=e,B()}).on(Mc.Ic,function(e){w=e,B()}),h.events.on(Mc.Hl,function(){T=!0,H()}).on(Mc.ql,function(){T=!1}),r=n=!1,o=0,h.events.on(Mc.Oc,function(e){r=e}),Yu(v).on(An.pointerEvents?"pointerup":"click",function(t){if(!r&&2!==t.button&&t.target.classList&&(((e=t.target).classList.contains("vp-title")||e.classList.contains("vp-target")||C.contains(e.parentNode)&&"HEADER"===e.parentNode.tagName||x.contains(e))&&!L.contains(e))){var e=("pointerup"===t.type||"MSPointerUp"===t.type)&&"mouse"!==t.pointerType&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE,n=A&&An.spatialPlayback&&h.config.video.spatial&&m;if(An.touch||e){e=-1!==h.backbone.supportedPresentationModes.indexOf("inline")&&!An.mobileAndroid;if(!n)return A&&e?void 0:void h.events.fire(Mc.wc)}1==++o&&setTimeout(function(){if(n){var e=E&&E.x===t.clientX&&E.y===t.clientY;return 1===o&&e&&!An.mobileAndroid&&h.events.fire(h.backbone.paused?Mc.wc:Mc.bc),1!==o&&h.backbone.getEffectByName("ThreeSixtyEffect").snapToCenter(),void(o=0)}if(1===o){if(i.get(Cu)&&!i.get(Ou))return;h.events.fire(h.backbone.paused?Mc.wc:Mc.bc)}else h.events.fire(Mc.mc);o=0},200)}var e}),Yu(v).on("mousedown",".vp-video-wrapper",function(e){if(!n)return k.classList.remove("hidden"),k.removeAttribute("hidden"),2!==e.button&&document.createEvent&&((e=document.createEvent("MouseEvents")).initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),k.dispatchEvent(e)),!1}).on("contextmenu",".vp-video",function(e){return k.classList.remove("hidden"),k.removeAttribute("hidden"),!1}),h.events.on(Sc.qs,function(e){return e?(n=!0,void k.classList.add("hidden")):(n=!1,void k.classList.remove("hidden"))}),An.touch||(Yu(v).on("focus","a, button, input, [tabindex]",function(){t=this,clearTimeout(e),e=null,document.activeElement===this&&H()}),Yu(v).on("blur","a, button, input, [tabindex]",function(){document.activeElement===this&&(e=setTimeout(j,50))}),v.addEventListener("focus",function(e){H(),t&&t.focus()},!1),h.events.on(Mc.Qc,function(){_=!0,v.removeAttribute("tabindex")}),h.events.on(Mc.tl,function(){_=!1})),h.events.on(Mc.qc,function(e){U(),m&&m.adjustRenderSize(),T&&H()}).on(Mc.zc,function(e){u=!0,m&&m.adjustRenderSize(),e?j():(H(),F())}),V(),h.events.on(Sc.Rs,function(){A=S=w=!(f=l=u=!0),V(),F()}),h.events.on(Sc.Ys,function(){function e(e){return function(){m&&e.apply(void 0,arguments)}}var n=e(function(e){var t=h.element.classList.contains("webvr");m&&t&&m.toggleVR()}),t=e(function(e){m.isVRPresenting?setTimeout(function(){h.events.fire(vn.WEBVR_ENTER)},100):setTimeout(function(){h.events.fire(vn.WEBVR_EXIT)},100)});h.events.on(Sc.$s,e(function(){var e=h.element.classList.contains("webvr");e||h.element.classList.add("grabbable"),p&&p.updatePosition(h.element),!p||p.visible||e||p.reveal()})),h.events.on(Mc.uc,e(function(){W(),An.webvr&&m.isVRPresenting&&N&&m.toggleVR()})),h.events.on(vn.CAMERA_UPDATE,e(function(e){p&&p.setAngle(e.pitch,e.yaw)})),h.events.on(Vo,e(function(){function t(e){y&&(y.innerHTML=Hl.render("threesixty_reminder",e))}var e,n,i;h.config.video.spatial?(i=h.backbone.getEffectByName("ThreeSixtyEffect"),h.config.embed.settings.spatial_compass?((p=p||new Kf(h.element.querySelector(".vp-controls-wrapper"),function(){i.snapToCenter()})).updatePosition(h.element),p.reveal()):p&&p.hide(),h.events.once(Mc.hc,function(){var e=h.config.embed.cards;null!=e&&e.length&&e[0].timecode<15||(g.push(setTimeout(function(){t({showArrows:!1,text:An.android?"Look around":"Click and drag to look around"}),G(y),z(y),setTimeout(function(){return K(y)},3e3)},7e3)),An.android||g.push(setTimeout(function(){t({showArrows:!1,text:An.android?"Look around":"Use arrow keys to see more"}),G(y),z(y),setTimeout(function(){return K(y)},3e3)},14e3)))}),n=v,y||((e=y=document.createElement("div")).classList.add("cloaked"),e.classList.add("vp-alert-round"),e.classList.add("vp-alert-round--top"),e.classList.add("vp-alert-round--threesixty"),n.appendChild(e))):!h.config.video.spatial&&p&&(W(),$())})),(An.webvr||An.stereoscopic||An.webxr)&&(An.webvr&&window.addEventListener("vrdisplaypresentchange",t,!1),h.events.on(Mc.Pc,e(function(){$(),An.webvr&&m.hasVRHeadset&&N?m.toggleVR():h.events.fire(Mc.ml)})),h.events.on(vn.WEBVR_HARDWARE_AVAILABLE,e(function(e){var t=v.querySelector(".stereoscopic");t&&t.classList.contains("off")&&N&&t.classList.remove("off")})),h.events.on(vn.WEBVR_ENTER,e(function(e){window.addEventListener("vrdisplaydisconnect",n,!1),window.addEventListener("vrdisplaydeactivate",n,!1);var t=v.querySelector(".stereoscopic");t&&t.classList.add("on"),p&&p.hide(),h.element.classList.remove("grabbable"),h.element.classList.add("webvr"),m.isUserInteracting=!1})),h.events.on(vn.WEBVR_EXIT,e(function(e){window.removeEventListener("vrdisplaydisconnect",n),window.removeEventListener("vrdisplaydeactivate",n);var t=v.querySelector(".stereoscopic");t&&t.classList.remove("on"),p&&p.reveal(),h.element.classList.add("grabbable"),h.element.classList.remove("webvr"),m.isUserInteracting=!0})));var i=null,r=e(function(e){var t=h.element.classList.contains("webvr");b||t||(b=!0,e.preventDefault(),h.element.classList.add("grabbing"),E={x:e.clientX,y:e.clientY},m.makeContact(E))}),o=e(function(e){var t=h.element.classList.contains("webvr");b&&!t&&($(),m.move({x:e.clientX,y:e.clientY}))}),s=e(function(e){var t=h.element.classList.contains("webvr");b&&!t&&(h.element.classList.remove("grabbing"),m.releaseContact(!1),b=!1)}),a=e(function(e){e.preventDefault(),h.element.classList.contains("webvr")||(m.isUserInteracting||(m.isUserInteracting=!0),null!==i&&clearTimeout(i),$(),i=setTimeout(function(){h.element.classList.remove("player-cursor-hide"),h.element.classList.add("grabbable"),m.isUserInteracting=!1},500),h.element.classList.add("player-cursor-hide"),h.element.classList.remove("grabbable"),m.moveWheel({x:e.deltaX,y:e.deltaY}))}),c=e(function(e){b||(b=!0,m.makeContact({x:e.touches[0].clientX,y:e.touches[0].clientY}))}),u=e(function(e){b&&(e.preventDefault(),$(),m.move({x:e.touches[0].clientX,y:e.touches[0].clientY}))}),l=e(function(e){m.releaseContact(!0),b=!1}),d=e(function(e){b||$(),m.moveDevice(e.alpha,e.beta,e.gamma,e.orientation)}),f=e(function(e){b=!1,h.element.classList.remove("grabbing"),m.abandonMotion()});h.events.on(Vo,function(){An.android&&m&&window.addEventListener("deviceorientation",d,!1)}),h.events.once(Vo,function(){h.store.watch("ui.player.boundingRect",function(){p&&p.updatePosition(h.element),m&&m.adjustRenderSize(),b=!1}),An.pointerEvents?(Yu(k).on("pointerdown",r),window.addEventListener("pointermove",o),window.addEventListener("pointerup",s),window.addEventListener("pointerleave",f)):(Yu(k).on("mousedown",r).on("wheel",a),window.addEventListener("touchstart",c,!!An.passiveEvents&&{passive:!1}),window.addEventListener("touchmove",u,!!An.passiveEvents&&{passive:!1}),window.addEventListener("touchend",l,!!An.passiveEvents&&{passive:!1}),window.addEventListener("mousemove",o),window.addEventListener("mouseup",s),window.addEventListener("mouseleave",f))})}),h.events.on(Go,function(e){W(),m=e,$()}),h.events.on(Mc.vc,function(){S=!0,clearTimeout(M),M=null}),h.events.on(Mc.pc,function(){S=!1}),{};function Y(){H()}function J(e){if(c=2e3,l)l=!1;else if(d&&(v.classList.remove("player-cursor-hide"),d=!1),0!==e.screenX&&e.screenX!==screen.width-1&&0!==e.screenY&&e.screenY!==screen.height-1){if(s=!0,An.spatialPlayback&&null!=(n=h.config.video)&&n.spatial){var t=tc(h.element),n=e.clientX-t.left,e=e.clientY-t.top,t=e>h.element.clientHeight-55,e=n>h.element.clientWidth-45&&e<180;if(b||!t&&!e)return}u&&H(),q()}else F(),U(),s&&(j(!0),s=!1)}function X(){j(!0)}function Z(e){var t=R.contains(e.target)||L.contains(e.target),e=p&&p.getWrapper().contains(e.target);w&&f||e?t||!w&&!f||j(!0):(clearTimeout(M),M=setTimeout(H,P))}}var Jf=((Te=ih.prototype).getCurrent=function(e){return this.Ff.debugCollector.getCurrent(e)},Te.getSeries=function(e){return this.Ff.debugCollector.getSeries(e)},Te.getTemplateData=function(){var e,t=this.$h.getCurrent("scanner"),n="MediaSourceScanner"===t,i="HLSLiveScanner"===t,r=this.$h.getCurrent("video_dims"),o=!(!this.Ff.config.request.files||!this.Ff.config.request.files.dash)&&this.Ff.config.request.files.dash.separate_av,s=this.$h.getCurrent("vr_headset")||null,a=this.Ff.currentTime,c=de(a,this.Ff.backbone.buffered),u=a+c,l=this.Zh(this.Ff.backbone.buffered),d=this.Ff.backbone.brainDebug,d={playerVersion:Qc(this.Ff.config),sessionId:this.Ff.config.request.session,clientIp:null==(t=this.Ff.config.request)||null==(e=t.client)?void 0:e.ip,clipId:this.Ff.config.video.id,isDash:n,isLive:i,embedSize:r,separateAudioVideo:o,isCopyDisabled:!!this.Ff.doNotTrackEnabled||this.Ff.config.embed.settings.background,isDNTEnabled:this.Ff.doNotTrackEnabled,hideCloseButton:!!this.Ff.config.embed.settings.background,vrHeadsetName:s,currentTime:uc(a,3),bufferAhead:uc(c,3),bufferEnd:uc(u,3),readyState:this.Ff.backbone.readyState,support:JSON.stringify(An),ua:null==(u=navigator)?void 0:u.userAgent,bufferedRanges:JSON.stringify(l),brainDebug:JSON.stringify(d)};return Object.assign(d,this.Qh(),this.td(),this.nd(),this.ed(),this.rd(),this.od(i),this.ud(),this.ad())},Te.Qh=function(){var e=this.$h.getCurrent("bandwidth");return{bandwidthKbps:e?"".concat(Math.floor(e.value/1e3).toLocaleString()," Kbps"):0,bandwidthMinKbps:"".concat(Math.floor(this.$h.getCurrent("min_bandwidth")/1e3).toLocaleString()," Kbps"),bandwidthMaxKbps:"".concat(Math.floor(this.$h.getCurrent("max_badwidth")/1e3).toLocaleString()," Kbps")}},Te.td=function(){var e=this.$h.getCurrent("streams");return{codec:e?e.codec:null,resolution:e?"".concat(e.width,"Ã—").concat(e.height,"@").concat(Math.round(e.framerate)," ").concat(Math.round(e.bitrate/1e3).toLocaleString()," Kbps ").concat(e.audioBitrate?" / ".concat(Math.round(e.audioBitrate/1e3).toLocaleString()," Kbps"):""):null}},Te.nd=function(){var t=this;return{testGroup:Object.keys(this.Ff.config.request.ab_tests).map(function(e){return"".concat(e,": ").concat(t.Ff.config.request.ab_tests[e].group)}).join(", ")}},Te.ed=function(){var e=this.$h.getCurrent("total_frames")||0,t=this.$h.getCurrent("dropped_frames")||0;return{totalFrames:e,droppedFrames:t,droppedFramesPercent:0!==e?"".concat((t/e*100).toFixed(2),"%"):0}},Te.rd=function(){var e=this.$h.getCurrent("files");return e?{delivery:e.mime}:null},Te.od=function(e){return e?{liveLatency:"".concat(this.$h.getCurrent("live_latency").toFixed(2)," seconds"),liveSessionID:this.Ff.config.video.live_event.id}:null},Te.ud=function(){if(!this.Ff.config.video.p2p)return null;var e=Ys(window,"Streamroot.instances[0].stats"),t=Ys(e,"realtime.dnaSources");if(void 0===t)return null;var n=Ys(e,"currentContent.cdnDownload"),e=Ys(e,"currentContent.dnaDownload");return{p2pSources:t,p2pOffload:"".concat(uc(e/(n+e)*100,1),"%")}},Te.ad=function(){var e=this.Ff.config.request.drm;return e?{drmEnabled:!!e,drmFastly:e.fastly}:null},Te.Zh=function(e){if(!e)return null;for(var t=e.length,n=0,i=[];n<t;n++){var r=e.start(n),o=e.end(n);i.push({i:n,start:r,end:o})}return i},Te.sd=function(e){var t=document.createElement("textarea");t.value=e,this.Ff.element.appendChild(t),t.select();e=document.execCommand("copy");return this.Ff.element.removeChild(t),e},Te.copyDebugPayload=function(){var r=this;return new ee(function(e,t){var n=r.getTemplateData(),i=r.getSeries("markers");delete n.bandwidthSeriesSvg;i=btoa(JSON.stringify({version:2,tpl:n,mark:i}));return(r.sd(i)?e:t)()})},H(ih,[{key:"onDataChange",set:function(e){this.Xh=e,this.Ff.debugCollector.onDataChange=this.Xh}}]),ih),Xf=((Te=nh.prototype).render=function(){if(this.J){var e={};try{e=this.vd()}catch(e){}this.Z.innerHTML=Hl.render("debug_panel",e)}},Te.pd=function(){if(this.J)try{var e=this.vd();this.Z.querySelector(".vp-stats-debug-values").innerHTML=Hl.render("debug_values",e)}catch(e){}},Te.vd=function(){var e=this.ld.getCurrent("scanner"),t="MediaSourceScanner"===e,n="HLSLiveScanner"===e,e=t||n?this.bd():null,n=t||n?this.wd(e):null,e=this.ld.getTemplateData();return e.bandwidthSeriesSvg=n,e.showSessionId=this.dd,e},Te.Rn=function(){var e=this;this.Ff.events.on(Mc.cl,function(){"tiny"!==e.Ff.store.get("ui.player.mode")&&(e.Z.classList.contains("hidden")?e.showPanel():e.hidePanel())}),Af(this.Z,".vp-copy-debug",this.yd.bind(this)),Af(this.Z,".vp-stats-debug-close",function(){return e.hidePanel(),!1}),this.Ff.store.watch("ui.player.mode",this.toggleVisibility.bind(this)),this.Ff.events.on(Mc.wl,this.pd.bind(this))},Te.hidePanel=function(){this.Z.classList.add("hidden"),this.Z.setAttribute("hidden",""),this.Z.setAttribute("aria-hidden","true"),this.J=!1},Te.showPanel=function(){this.Z.classList.remove("hidden"),this.Z.removeAttribute("hidden"),this.Z.setAttribute("aria-hidden","false"),this.J=!0,this.render()},Te.toggleVisibility=function(e){if("tiny"===e&&this.J)return this.fd=!0,void this.hidePanel();this.fd&&(this.showPanel(),this.fd=!1)},Te.yd=function(){var o=this;this.ld.copyDebugPayload().then(function(){var e=o.Z.querySelector(".vp-copy-debug-label"),t=e.getAttribute("data-original-text"),n=e.innerText,i=t;t||(e.setAttribute("data-original-text",n),i=n),e.innerHTML="Copied";var r=setTimeout(function(){e.innerHTML=i,clearTimeout(r)},1500)}).catch(function(){o.gd()})},Te.bd=function(){return{timeSeries:this.ld.getSeries("bandwidth"),max:this.ld.getCurrent("max_badwidth")}},Te._d=function(t){var e=Object.keys(jc).find(function(e){return jc[e]===t});return Hc[e]},Te.gd=function(){this.dd=!0,this.pd()},Te.wd=function(e){for(var t=e.timeSeries,n=e.max||1,i=t.length,r=i<100?0:i-100,o=t[r],e=t[i-1],s=o?o.time:0,a=e?e.time:0,c=[],u=r;u<i;u++){var l=t[u],d=(l.time-s)/(a-s)*250,f=14-14*l.value/n;isNaN(f)&&(f=0),isNaN(d)&&(d=0),c.push("".concat(d,",").concat((l=f,d=0,f=14,Math.min(Math.max(l,d),f))))}r={height:14,width:250,points:c.join(" "),markers:this.kd(s,a)};return Hl.render("time_series_graph",r)},Te.kd=function(n,i){var r=this,e=this.ld.getSeries("markers")||[];return 0===e.length?null:e.map(function(e){var t=e.t;if(t<n||i<t)return"";t=(t-n)/(i-n)*250;return isNaN(t)&&(t=0),"<g>\n                <title>".concat(e.title,'</title>\n                <line class="stats-debug-marker" x1="').concat(t,'" y1="',0,'" x2="').concat(t,'" y2="').concat(14,'" stroke-width="1" stroke="').concat(r._d(e.type),'" />\n            </g>')}).join("")},nh),Zf=((Te=th.prototype).show=function(e,t,n){this.alertContentTitle.innerHTML=e,this.alertContentTime.innerHTML=t,this.alertContentFooter.innerHTML=n,this.alertContentTitle.classList.remove("hidden"),this.alertContentTime.classList.remove("hidden"),this.alertContentFooter.classList.remove("hidden"),this.alertTextElement.classList.remove("hidden")},Te.hide=function(){this.alertContentTitle.classList.add("hidden"),this.alertContentTime.classList.add("hidden"),this.alertContentFooter.classList.add("hidden"),this.alertTextElement.classList.add("hidden")},th),Qf=((Te=eh.prototype).disable=function(){this.hide(),this.hs=!0},Te.hide=function(){this.textAlert.hide(),this.timeAlert.hide()},Te.Td=function(){(this.store.get(ku)||this.store.get(Lu))&&this.Sd(),this.store.get(Ru)&&this.xd()},Te.Ed=function(){this.player.events.on(ts.EVENT_ACTIVE,this.Sd.bind(this)),this.player.events.on(ts.STREAM_ONLINE,this.Ad.bind(this)),this.player.events.on(ts.STREAM_OFFLINE,this.Md.bind(this)),this.player.events.once(ts.EVENT_ENDED,this.xd.bind(this))},Te.Sd=function(){6e4<this.Cd()?(this.textAlert.hide(),this.Rd()):(this.timeAlert.hide(),this.textAlert.show("This event hasn't started yet"))},Te.Rd=function(){var e=this.Id();this.timeAlert.show(e[0],e[1],e[2]),!this.store.get(ku)&&!this.store.get(Lu)||this.hs||setTimeout(this.Td.bind(this),3e4)},Te.Cd=function(){return this.startTime-new Date},Te.Id=function(){var e=this.Cd(),t=(e/6e4).toFixed(0),n=(e/36e5).toFixed(0),i=(e/864e5).toFixed(0),e=(new Date).toDateString()===this.startTime.toDateString();if(1<i||!e)return["This event is scheduled for","".concat(["January","February","March","April","May","June","July","August","September","October","November","December"][this.startTime.getMonth()]," ").concat(this.startTime.getDate()),"".concat("at"," ").concat(Kl(this.startTime))];if(1<n&&e)return["This event is scheduled for","Today","".concat("at"," ").concat(Kl(this.startTime))];e=1<t?"minutes":"minute";return["This event will start in","".concat(t," ").concat(e),""]},Te.Ad=function(){this.hide()},Te.Md=function(){this.textAlert.show("Live stream offline"),An.iOS&&Kd.element&&(this.player.events.fire(Mc.Wc),Kd.exit())},Te.xd=function(){this.textAlert.show("Live event ended")},eh);function eh(e,t,n){this.textAlert=new Zd(e),this.timeAlert=new Zf(e),this.player=t,this.store=n,this.startTime=new Date(this.store.get(Au,null)),this.hs=!1,this.Ed(),this.Td()}function th(e){this.alertTextElement=e.querySelector(".vp-text-alert-wrapper"),this.alertContentTitle=this.alertTextElement.querySelector(".vp-live-start-time-title"),this.alertContentTime=this.alertTextElement.querySelector(".vp-live-start-time-body"),this.alertContentFooter=this.alertTextElement.querySelector(".vp-live-start-time-footer")}function nh(e,t){this.Z=e,this.Ff=t,this.ld=new Jf(this.Ff),this.Rn(),this.J=!1,this.fd=!1,this.dd=!1}function ih(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};this.Ff=e,this.$h=this.Ff.debugCollector,this.Xh=t}function rh(e,u){var l,d=u.querySelector(".vp-notification");function t(e,t){var n,i,r,o,s,a,c;null!==u.parentElement.offsetParent&&(u.classList.remove("hidden"),u.removeAttribute("hidden"),u.setAttribute("data-name",e),a="watchlater"===e||"unwatchlater"===e?.5:.4,c=u.clientHeight,u.clientHeight>u.clientWidth&&(c=u.clientWidth),a={height:Math.round(c*a),width:Math.round(c*a*1.6)},d.style.cssText="width:"+a.width+"px;height:"+a.height+"px",d.innerHTML=t,"watchlater"!==e&&"unwatchlater"!==e||(a="watchlater"===e,o=(n=d).querySelector(".hour-hand"),s=n.querySelector(".minute-hand"),o&&s&&(t=a?1:-1,e=new Date,a=Math.abs(e.getHours()-12),e=e.getMinutes(),i=(a=a/12*360+e/60*5)+45*t,r=(e=e/60*360-135)+540*t,o.style[An.transformProperty]="rotate("+a+"deg)",s.style[An.transformProperty]="rotate("+e+"deg)",window.requestAnimationFrame(function(){n.classList.add("animate"),An.browser.firefox||An.browser.opera||window.requestAnimationFrame(function(){o.style[An.transformProperty]="rotate("+i+"deg)",s.style[An.transformProperty]="rotate("+r+"deg)"})}))),clearTimeout(l),u.classList.remove("animate"),window.requestAnimationFrame(function(){u.classList.remove("invisible"),l=setTimeout(f,750)}))}function f(){u.classList.add("animate"),u.classList.add("invisible")}function n(){u.classList.remove("animate"),u.classList.remove("invisible"),u.classList.add("hidden"),u.setAttribute("hidden",""),u.removeAttribute("data-name"),d.innerHTML="",d.classList.remove("filled"),d.classList.remove("animate"),e.events.fire(Mc.bf)}return Yu(u).on("transitionend",function(e){d.contains(e.target)&&"height"===e.propertyName?setTimeout(f,100):e.target===u&&"opacity"===e.propertyName&&window.requestAnimationFrame(n)}),e.events.on(Mc.El,function(e){e||t("like",Hl.render("icon_heart"))}),e.events.on(Mc.Tl,function(e){e||t("unlike",Hl.render("icon_broken_heart"))}),e.events.on(Mc.Sl,function(e){e||t("watchlater",Hl.render("icon_clock"))}),e.events.on(Mc.Al,function(e){e||t("unwatchlater",Hl.render("icon_clock"))}),e.events.fire(Mc.vf),{}}function oh(o,t){var n=Q(),s=!1;function i(e){oc(e,"facebook",{width:580,height:400})}function r(e){oc(e,"twitter",{width:550,height:420})}function a(e){oc(e,"tumblr",{width:540,height:600})}var c,e={get events(){return n},setup:function(){t.classList.remove("vp-share-embed-active","vp-share-embed-only"),null!=(e=o.config.embed.settings.share)&&e.embed_only&&t.classList.add("vp-share-embed-only");var e=t.querySelector(".js-embedCopy");e&&(e.style.width=function(e,t,n){var i=2<arguments.length&&void 0!==n?n:2;t=Object.keys(t).map(function(e){return t[e]});var r=e.cloneNode();r.style.visibility="hidden",r.style.padding=0,e.parentElement.appendChild(r);var o=t.map(function(e){return r.innerText=e,r.clientWidth}),n=Math.max.apply(Math,te(o)),o=window.getComputedStyle(e),o=parseFloat(o.fontSize);return e.parentElement.removeChild(r),"".concat((n+i)/o,"em")}(e,["Copy","Copied!"])),o.events.on(Mc.el,i).on(Mc.rl,r).on(Mc.ol,a)},destroy:function(){o.events.off(Mc.el,i).off(Mc.rl,r).off(Mc.ol,a)},getShareData:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=o.config.video.title,i=o.config.video.owner.name,r=o.config.video.share_url;return s=document.queryCommandSupported&&document.queryCommandSupported("copy"),t.template=Hl.render("share",{url:o.config.video.url,shareUrl:r,playerShareUrl:"https://".concat(o.config.player_url,"/video/").concat(o.config.video.id,"/share"),title:n,owner:i,embed:"public"===o.config.video.embed_permission&&o.config.embed.settings.embed,embedOnly:null==(e=o.config.embed.settings.share)?void 0:e.embed_only,embedCode:If(o.config.video.embed_code),copyButton:s,customizeEmbed:!!o.config.video.url,readOnly:!An.touch,facebookIcon:Hl.render("icon_facebook",{title:"Share on Facebook"}),twitterIcon:Hl.render("icon_twitter",{title:"Share on Twitter"}),tumblrIcon:Hl.render("icon_tumblr",{title:"Share on Tumblr"}),emailIcon:Hl.render("icon_mail",{title:"Share via Email"}),embedIcon:Hl.render("icon_embed",{title:"Get embed code"}),strings:{share:"Share",emailSubject:"Check out â€œ"+n+"â€ from "+i+" on Vimeo",emailBody:"Check out â€œ"+n+"â€ from "+i+" on Vimeo.\n\nThe video is available for your viewing pleasure at "+r+"\n\nIf you like this video, make sure you share it, too!\n\nVimeo is filled with lots of amazing videos. See more at https://vimeo.com.",embedTitle:"Embed",embedSubtitle:"Add this video to your site with the embed code below.",copy:"Copy",copySuccess:"Copied!",customize:'<a href="'.concat(o.config.video.url,'#embed" target="_blank" rel="noopener" aria-describedby="new-window">')+"Customize this embed</a> on Vimeo"}}),t.Od=".js-facebook",null!=(r=o.config.embed.settings.share)&&r.embed_only&&(t.wrapperClass="embed-only",t.Od=".js-embed-input"),t},showShareView:function(){t.querySelector(".js-share-screen").classList.remove("cloaked"),t.classList.remove("vp-share-embed-active"),n.fire(Mc.hl)},showEmbedView:function(){o.config.embed.settings.share.embed_only||(t.querySelector(".js-embed-screen").classList.remove("cloaked"),t.classList.add("vp-share-embed-active")),n.fire(Mc.dl)}};return Yu(t).on("transitionend",".js-share-screen",function(e){"opacity"===e.propertyName&&"0"===window.getComputedStyle(this,"").opacity&&(n.fire(Mc.pl),this.classList.add("cloaked"))}).on("transitionend",".js-embed-screen",function(e){"opacity"===e.propertyName&&"0"===window.getComputedStyle(this,"").opacity&&(n.fire(Mc.vl),this.classList.add("cloaked"),cc(t))}).on("copy","input[name=embed_code]",function(){o.events.fire(Mc.al)}),Af(t,".js-facebook",function(){return o.events.fire(Mc.el,this.href),ec(),!1}),Af(t,".js-twitter",function(){return o.events.fire(Mc.rl,this.href),ec(),!1}),Af(t,".js-tumblr",function(){return o.events.fire(Mc.ol,this.href),ec(),!1}),Af(t,".js-email",function(){return o.events.fire(Mc.ul),window.top.location=this.href,ec(),!1}),Af(t,".js-embed",function(){return o.events.fire(Mc.Jc),e.showEmbedView(),ec(),!1}),Af(t,".js-embedCopy",function(){if(s){t.querySelector("input[name=embed_code]").select();try{document.execCommand("copy")&&function(){o.events.fire(Mc.al);var e=t.querySelector(".js-embedCopy");e.innerHTML=e.getAttribute("data-success-label"),clearTimeout(c),c=setTimeout(function(){e.innerHTML=e.getAttribute("data-label")},2e3)}()}catch(e){}return document.activeElement.blur(),!1}}),An.touch?Yu(t).on("focus","input[name=embed_code]",function(){var e=this;setTimeout(function(){e.setSelectionRange(0,9999),e.setAttribute("readonly","readonly")},0)}).on("blur","input",function(){this.removeAttribute("readonly")}):Yu(t).on("click","input[name=embed_code]",function(){this.setSelectionRange(0,9999)}),e}function sh(s,i,r){var o,a,e,c=r.querySelector(".vp-outro"),u=null,l=!1,d=!1,t=!1,f=!1,n=!1,h=Jl(S,250),v=null,p=s.config.request.ads instanceof Object,m=!1;function g(){return!n&&null===u&&!s.config.embed.loop}function b(){if(s.config.embed.outro===Bc.VOD)return a=Bc.VOD,u=y(a),!0===f&&_(),ee.resolve(u);n=!0;var e=s.config.embed.email_capture_form||s.config.embed.email||{};return qi("https://".concat(s.config.player_url,"/video/").concat(s.config.video.id,"/outro?on_site=").concat(s.config.embed.on_site,"&type=").concat(s.config.embed.outro,"&email=").concat(e?1:0),{withCredentials:!0}).json().then(function(e){return a=e.type,(u=y(a,e.data))&&(u.bgimage&&fu(u.bgimage),u.contexts&&u.contexts.forEach(function(e){e.videos.forEach(function(e){fu(e.thumbnail)})})),Id(s.config.video.owner)&&(t=a,e=u,[Bc.VIDEOS,Bc.THREEVIDEOS,Bc.PROMOTED].includes(t)&&e.contexts&&e.contexts.forEach(function(e){e.videos.reduce(function(e,t){return e.then((n=t,function(){return s.preloadVideo("auto",n.id,{autoplay:!0}).catch(function(e){})}));var n},ee.resolve())})),u;var t})}function y(e,t){var i=1<arguments.length&&void 0!==t?t:{},n=uu(s.element.clientWidth*An.devicePixelRatio,s.element.clientHeight*An.devicePixelRatio),r=n.width,o=n.height;return i.img_base&&(i.bgimage=lu({width:r,height:o,baseUrl:i.img_base})),e===Bc.VOD&&(t=void 0!==s.config.video.vod.is_preorder?s.config.video.vod.is_preorder:!!s.config.video.vod.date_available,n=s.config.video.vod.is_coming_soon,o=s.config.video.vod.date_available_formatted_datetime||s.config.video.vod.date_available,i={purchased:s.config.user.purchased,title:s.config.video.vod.feature_title,url:s.config.video.vod.url,currency:s.config.request.currency,countries:s.config.video.vod.countries,country:s.config.request.country,buttons:s.config.video.vod.purchase_options,translationMap:s.config.request.dynamic_translation_map,isPreorder:t,isComingSoon:n,releaseDate:o,strings:{watch:t?"Watch on "+o:"Watch Now",preRelease:t?"Pre-order now. Watch on "+o+".":n&&o?"Coming soon to Vimeo On Demand on "+o+".":"Coming soon to Vimeo On Demand."}}),[Bc.VIDEOS,Bc.THREEVIDEOS,Bc.PROMOTED].includes(e)&&(s.config.user.following=i.following,(i={contexts:Array.isArray(i)?i:[i],owner:s.config.video.owner.id,bgimage:i.bgimage,following:i.following}).contexts&&i.contexts.forEach(function(n){n.videos.forEach(function(e){var t;e.fullTitle=e.title,e.byline="",e.owner.id!==i.owner&&(e.fullTitle=e.title+" from "+e.owner.name,e.byline="from "+e.owner.name),e.thumbnail_base&&(t=Math.round(r/n.videos.length),e.thumbnail=lu({width:t,height:Math.round(t/1.778),baseUrl:e.thumbnail_base}))})})),e===Bc.LINK&&(i.url=jf(i.url),i.url2=jf(i.url2)),e===Bc.SHARE&&(i.strings={back:"Back"}),i}function E(e){c.classList.toggle("vp-outro--link-medium",e)}function w(e){c.classList.toggle("vp-outro--link-large",e)}function _(){if(l=!0,a===Bc.BEGINNING)return c.innerHTML="",void s.events.fire(Sc.Rs);var e,t,n;g()?b().then(_).catch(function(){}):(e=function(){if([Bc.VIDEOS,Bc.THREEVIDEOS,Bc.PROMOTED].includes(a)){if(0===((null==u?void 0:u.contexts)||[]).reduce(function(e,t){return e+t.videos.length},0))return null;u.showFollowButton=!s.config.user.owner&&s.config.user.logged_in,u.strings={follow:"Follow",following:"Following",unfollow:"Unfollow"}}return u&&(u.target=!s.config.embed.on_site),v=a,[Bc.THREEVIDEOS,Bc.PROMOTED].includes(a)&&(v=Bc.VIDEOS),Hl.render("outro_"+v,u)}())&&(c.innerHTML=e,c.setAttribute("data-type",v),r.classList.remove("hidden"),r.removeAttribute("hidden"),d=!0,[Bc.VIDEOS,Bc.THREEVIDEOS].includes(a)?(n=document.querySelector(".js-outro-followWrap"))&&(t=window.getComputedStyle(n),t=parseFloat(t.fontSize),n.style.width="".concat(n.clientWidth/t,"em")):a===Bc.LINK?(i.watch("ui.outro.isLinkTitleVisible",E),i.watch("ui.outro.isLinkDescriptionVisible",w),E(i.get("ui.outro.isLinkTitleVisible")),w(i.get("ui.outro.isLinkDescriptionVisible"))):a===Bc.SHARE&&(n=r.querySelector(".js-outro-content"),t=o.getShareData(),n.innerHTML=t.template,o.setup()),window.requestAnimationFrame(function(){window.requestAnimationFrame(function(){r.classList.add("in"),S()})}))}function T(){if(d)return o.destroy(),d=t=l=!1,void window.requestAnimationFrame(function(){r.classList.remove("in"),s.events.fire(Mc.ql),k()});l&&(l=!1,s.events.fire(Mc.ql))}function S(){var n;!t&&r.clientWidth&&(Yu(window).off("resize",h),t=!0,n=[],null!=u&&u.contexts&&u.contexts.forEach(function(e){e.videos&&e.videos.forEach(function(e){var t=e.id,e=c.querySelector('[data-video-id="'+t+'"]');e&&0<e.clientWidth&&n.push(t)})}),s.events.fire(Mc.Hl,n))}function A(){e=setTimeout(function(){var e=s.config.embed.email_capture_form||s.config.embed.email||{};"after-video"===e.position||"after"===e.position?(s.events.fire(Mc.bl),s.events.on(Mc.af,function(){s.events.fire(Sc.Ws)})):s.events.fire(Sc.Ws)},250)}function k(){Yu(window).off("resize",h),Yu(window).on("resize",h)}return s.events.on(un.TIME_UPDATE,function(e){var t=e.currentTime,n=e.duration;e.timeProgress,f=!1,g()&&n-10<=t&&b().catch(function(){})}),s.events.on(Vo,function(){[Bc.NOTHING,Bc.BEGINNING,Bc.EMAIL].includes(s.config.embed.outro)&&(a=s.config.embed.outro,u=!1)}),s.events.on(Mc.Of,function(){m=!0}),s.events.on(Mc.uc,function(){return p&&!m?(s.events.on(Mc.Of,A),void(p=!1)):void A()}),s.events.on(Mc._loadVideo,function(){clearTimeout(e)}),s.events.on(Sc.Ws,function(e,t){s.performDelegateAction(Dc,function(){e&&(a=e,u=null,n=!1),t&&t.data&&(u=y(e,t.data)),f=!0,_()})}),Yu(r).on("click",".js-videoLink",function(e){var t=parseInt(this.getAttribute("data-video-id"),10);s.events.fire(Mc.Wl,t),Id(s.config.video.owner)&&(e.preventDefault(),s.loadVideo(t,{autoplay:!0}))}),Yu(r).on("click",".js-cta",function(e){s.events.fire(Mc.if,this.href)}),Yu(r).on("click",".js-link",function(e){s.events.fire(Mc.Xl,this.href)}),Yu(r).on("click",".js-imageLink",function(e){s.events.fire(Mc.nf,this.href)}),Yu(r).on("transitionend",function(e){r.classList.contains("in")||(r.classList.add("hidden"),r.setAttribute("hidden",""))},!1),s.events.on([Sc._hideOutro,Sc.Rs,un.PLAY,un.SEEKED,Mc.xc],T),s.events.on(Mc.Hl,function(){s.element.classList.add("player-outroVisible")}).on(Mc.ql,function(){s.element.classList.remove("player-outroVisible")}),Af(r,".js-outro-follow",function(){s.events.fire(Mc.Zc)}),Yu(r).on("mouseleave",".js-outro-follow",function(e){var t=document.querySelector(".js-outro-follow");t&&t.classList.remove("vp-outro-follow--activated")}),s.events.on(Mc.Ql,function(){var e=document.querySelector(".js-outro-follow");e&&(e.setAttribute("aria-pressed",!0),e.classList.add("vp-outro-follow--activated"))}),s.events.on(Mc.tf,function(){var e=document.querySelector(".js-outro-follow");e&&e.setAttribute("aria-pressed",!1)}),s.events.on(Sc._showOverlay,function(){setTimeout(function(){r.classList.add("hidden")},150)}),s.events.on(Mc.tl,function(){r.classList.contains("in")&&r.classList.remove("hidden")}),s.events.on(Sc.Rs,function(){u=null,n=!1,p=s.config.request.ads instanceof Object}),Af(r,".js-vod-button",function(){var e=this.getAttribute("data-product-id");return s.events.fire(Mc.$c,e),!1}),Af(r,".js-vod-watch",function(){if(!("date_available"in s.config.video.vod))return T(),s.events.fire(Mc.$c),!1}),c&&((o=new oh(s,c)).events.on(Mc.dl,function(){s.config.embed.settings.share.embed_only||(r.querySelector(".js-back").classList.remove("cloaked"),r.classList.add("embed-active"))}).on(Mc.hl,function(){r.classList.remove("embed-active")}),Af(r,".js-back",function(){return o.showShareView(),!1}),o.events.on(Mc.vl,function(){r.querySelector(".js-back").classList.add("cloaked")})),k(),{}}function ah(e,t){return"after-video"===(t=(t=1<arguments.length&&void 0!==t?t:null)||e.position)||"after"===t}function ch(e){return lu({width:150,height:75,baseUrl:e,defaultExtension:".png"})}var uh=((Te=lh.prototype).getElement=function(e){return this.cachedElements[e]||(this.cachedElements[e]=this.element.querySelector(e)),this.cachedElements[e]},Te.removeElement=function(e){this.getElement(e)&&(this.cachedElements[e].remove(),this.cachedElements[e]=null)},Te.updateAll=function(e,t){this.updateTitle(e.text||e.custom_message),this.updateSkipBtn(e.allow_skip||e.skippable,e.position),this.updatePrivacyPolicy(e.privacy_policy),this.updateCustomLogo(e.custom_logo),this.updateFields(e.custom_fields,t)},Te.updateTitle=function(e){var t,n,i=this.getElement(".vp-email-capture-title");e&&i?i.textContent=e:e&&!i?(t=this.getElement(".vp-email-capture-title-logo-wrap"),n=Hl.render("email_capture_title",{title:e}),t.insertAdjacentHTML("beforeend",n)):!e&&i&&this.removeElement(".vp-email-capture-title")},Te.updateSkipBtn=function(e,t){var n,i=this.getElement(".vp-email-capture-form-button--cancel");e&&i?i.value=ah(null,t)?"Skip":"Skip to video":e&&!i?(n=this.getElement(".vp-email-capture-form-skip"),t=Hl.render("email_capture_skip",{position:t,skipText:"Skip",skipToVideoText:"Skip to video",positionIsAfter:ah(null,t)}),n.insertAdjacentHTML("afterbegin",t)):!e&&i&&this.removeElement(".vp-email-capture-form-button--cancel")},Te.updatePrivacyPolicy=function(e){var t,n,i=this.getElement(".vp-email-capture-privacy-policy");e&&i?i.href=encodeURI(e):e&&!i?(t=this.getElement(".vp-email-capture-disclaimer-wrapper"),n=Hl.render("email_capture_privacy_policy",{text:"Privacy policy",url:e}),t.insertAdjacentHTML("beforeend",n)):!e&&i&&this.removeElement(".vp-email-capture-privacy-policy")},Te.updateCustomLogo=function(e){var t,n,i=this.getElement(".vp-email-capture-logo");e&&i?i.src=ch(e):e&&!i?(t=this.getElement(".vp-email-capture-title-logo-wrap"),n=Hl.render("email_capture_logo",{url:ch(e)}),t.insertAdjacentHTML("afterbegin",n)):!e&&i&&this.removeElement(".vp-email-capture-logo")},Te.updateFields=function(e,n){var t,i=this;e&&((t=this.getElement(".vp-email-capture-form-fields-slider").children).length>e.length&&Be(t).forEach(function(t){e.some(function(e){return t.dataset.id===String(e.id)})||(t.remove(),n())}),e.forEach(function(e){i.updateField(e,n)}))},Te.updateField=function(e,t){var n,i=e.id,r=e.field_name,o=e.required,s=e.position_in_form,a=this.getElement(".vp-email-capture-form-fields-slider"),c=this.element.querySelector("[for=custom-field-".concat(i,"]")),u=this.element.querySelector("#custom-field-".concat(i));c&&u?(n=u.parentElement,i=a.children,c.textContent=r,u.name=r,u.toggleAttribute("required",o),n.classList.toggle("required",o),(n=Be(i).indexOf(n))!==s&&(a.insertBefore(i[n],i[s]),t())):(e=Hl.render("email_capture_field",{field:e}),s===a.children.length?a.insertAdjacentHTML("beforeend",e):a.children[s].insertAdjacentHTML("beforebegin",e),t())},Te.clearCachedElements=function(){this.cachedElements={}},lh);function lh(e){this.element=e,this.cachedElements={}}function dh(u,l,s){var r,a,c,d,f,h,v,p,m,g,b,i,e=Q(),y=_(u.config),E=new uh(s),o=!1,w="Vimeo\\Controller\\VideoSettings\\ServiceController.getInteractions"===u.config.embed.context;function _(e){var t;return l.get(ll)?e.video.webinar.registration_form:(null==(t=e.embed)?void 0:t.email_capture_form)||(null==(e=e.embed)?void 0:e.email)||{}}function n(){i.querySelector(".vp-validation-bubble-message").innerHTML=g.validationMessage||"There is an error with this input.",i.classList.remove("hidden"),i.classList.remove("vp-validation-bubble-animate"),window.requestAnimationFrame(function(){i.classList.add("vp-validation-bubble-animate")}),g.focus()}function T(){m.classList.add("vp-email-capture-input-invalid"),n()}function S(){i.classList.remove("vp-validation-bubble-animate"),m.classList.remove("vp-email-capture-input-invalid")}function A(e){e.target===d&&(d.removeEventListener("transitionend",A),g.focus())}function k(e,t){var n,i=!(1<arguments.length&&void 0!==t)||t,r=s.querySelector(".vp-email-capture-disclaimer-wrapper"),o=s.querySelector(".vp-email-capture-current-step"),t=s.querySelector(".vp-email-capture");m&&(m.setAttribute("aria-hidden",!0),g.tabIndex=-1),p&&(!c&&!w||w)&&(c=tc(a).height),m=f[(p=e)-1],g=h[p-1],m.setAttribute("aria-hidden",!1),g.tabIndex=0,window.requestAnimationFrame(function(){d.style.transform="translateY(-".concat(c*(p-1),"px)"),o.textContent=p,b.style.width="".concat(p/f.length*100,"%")}),i&&d.addEventListener("transitionend",A),t.classList.toggle("vp-email-capture-first-step",1===p),r.classList.toggle("cloaked",p<f.length),n=s.querySelector(".vp-email-capture-form-button--back"),t=s.querySelector(".vp-email-capture-form-button--next"),r=s.querySelector(".vp-email-capture-form-button--submit"),1===p&&(v.classList.remove("half"),n.classList.remove("show"),n.classList.add("hidden"),n.tabIndex=-1),1<p&&(v.classList.add("half"),n.classList.remove("hidden"),n.tabIndex=0,n.setAttribute("aria-hidden",!1),window.requestAnimationFrame(function(){n.classList.add("show")})),p<f.length?(t.tabIndex=0,t.setAttribute("aria-hidden",!1),r.tabIndex=-1,r.setAttribute("aria-hidden",!0),v.classList.remove("showSubmitBtn")):(r.tabIndex=0,r.setAttribute("aria-hidden",!1),t.tabIndex=1,t.setAttribute("aria-hidden",!0),v.classList.add("showSubmitBtn"))}function L(){return!g.required||("email"!==g.type||/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(g.value)?!g.checkValidity||g.checkValidity()||((g.validity.valueMissing||g.validity.typeMismatch)&&g.setCustomValidity("This field is required."),g.validity.typeMismatch&&g.setCustomValidity("Please enter a valid response."),0):(g.setCustomValidity("Please enter a valid email address."),0))}function R(){Yu(s).off(["click","touchend"],".vp-email-capture-form-button--cancel"),Yu(s).off(["click","keydown"],".vp-email-capture-form-button--next"),Yu(s).off(["click","keydown"],".vp-email-capture-form-button--back"),Yu(s).off(["keyup","blur"],".vp-email-capture-form-button--next-submit-wrapper"),Yu(s).off("click",".vp-email-capture-wrapper"),Yu(s).off(["keyup","input","focus","blur"],".vp-email-capture-form-input"),Yu(s).off("submit",".vp-email-capture-form"),o=!1,e.fire(Mc.af)}function C(){var t=r.querySelector("input[type=submit]");function o(e){t.classList.remove("loading"),g.setCustomValidity("Uh oh. There was a problem. Please try again."),g.setAttribute("aria-invalid","true"),u.events.fire(Mc.Jl),n()}t.classList.add("loading"),function(t){cc(s);var e=Be(h),i=new XMLHttpRequest;i.open(r.method,r.action+window.location.search,!0);var n={};e.forEach(function(e){n[e.name]=e.value});e=JSON.stringify(n);i.setRequestHeader("Content-Type","application/json"),i.withCredentials=!0,i.timeout=3e3,i.onload=function(){var e,r,t,n;try{t=JSON.parse(i.responseText)}catch(e){}e=i,!1!==t?(u.config.embed.email_capture_form=null,u.config.embed.email=null,u.events.fire(Mc.Yl),l.get(al)?(t=s.querySelector(".vp-email-capture"),n=s.querySelector(".vp-email-capture-reg-thank-you"),t.classList.add("hidden"),n.classList.remove("hidden")):(n=s.querySelector(".vp-email-capture"),r=s.querySelector(".vp-email-capture-thank-you"),n.classList.add("hidden"),r.classList.remove("hidden"),window.requestAnimationFrame(function(){var e=s.querySelector(".vp-email-capture-video-countdown-timer"),t=s.querySelector(".vp-email-capture-video-countdown-meter");r.classList.add("in"),e&&(t.classList.add("vp-email-capture-video-countdown-meter--active"),e.textContent=3);var n=2,i=setInterval(function(){n<=0?(R(),clearInterval(i)):(e&&(e.textContent=n),--n)},1e3)}))):o(e.status)},i.onerror=function(e){t(e)},i.send(e)}(o)}function x(e){return L()?(S(),k(p+1),!0):(T(),!1)}var t={get events(){return e},getData:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};y=_(u.config);var n=t.custom_logo||y.custom_logo,i=t.custom_fields||y.custom_fields||[{field_name:"Email address",required:1,position_in_form:0,id:1,locked:1},{field_name:"Name",required:0,position_in_form:1,id:2,static_field:1}];i.sort(function(e,t){return e.position_in_form-t.position_in_form});var r=t.privacy_policy||y.privacy_policy,o=u.config.request,s=o.referrer,a=o.signature,c=o.timestamp,o=o.expires;return e.template=Hl.render("email_capture",{allowSkip:t.allow_skip||y.skippable||y.allow_skip,customLogo:n?ch(n):null,text:t.text||y.custom_message||y.text,action:"https://".concat(u.config.player_url,"/video/").concat(u.config.video.id,"/submit-email?signature=").concat(a,"&time=").concat(c,"&expires=").concat(o,"&referrer=").concat(s),customFields:i,privacyPolicy:r,positionIsAfter:ah(y),strings:{skip_to_video:"Skip to video",skip:"Skip",next:"Next",back:"Back",submit:"Submit",disclaimer:"Share your email with the owner of this video",privacy_policy:"Privacy policy",thank_you:"Thank you!",video_starts:"Video starts in",successful:"Your information was successfully submitted.",step:"Step",of:"of",aria_label:"Email capture form",reg_thank_you:"Thanks for registering!",reg_thank_you_subtitle:"Please check your email for your personal webinar viewing link. Weâ€™ll also send you a reminder on the day of the webinar.",reg_skip:"Already Registered?"},isWebinar:l.get(al)}),E.clearCachedElements(),e.Od=".vp-email-capture-form-input",e.modal=!0,e.logo=!1,e.preventBackgroundClose=!0,e.noblur=t.noblur,e.nofocus=t.nofocus,e}};return u.events.on(Mc.Qc,function(e){var t,n;"email-capture"===e&&(r=s.querySelector(".vp-email-capture-form"),a=s.querySelector(".vp-email-capture-form-fields-wrapper"),d=s.querySelector(".vp-email-capture-form-fields-slider"),f=s.querySelectorAll(".vp-email-capture-form-custom-field"),h=s.querySelectorAll(".vp-email-capture-form-input"),v=s.querySelector(".vp-email-capture-form-button--next-submit-wrapper"),b=s.querySelector(".vp-email-capture-progress-meter"),i=s.querySelector(".vp-validation-bubble"),t=s.querySelector(".locked_field"),e=s.querySelectorAll(".static_field"),t&&(t.type="email",t.name="email"),e&&Be(e).forEach(function(e){"Name"===e.name&&(e.name="name")}),k(1,!1),o||(l.watch("ui.player.breakpoint",function(){c=tc(a).height,window.requestAnimationFrame(function(){d.style.transform="translateY(-".concat(c*(p-1),"px)")})}),n=!1,Af(s,".vp-email-capture-form-button--cancel",function(){R(),(ah(y)||u.config.video.live_event)&&!l.get(Ou)||u.events.fire(Mc.wc)}),Yu(s).on("click",".vp-email-capture-form-button--next",x),Yu(s).on("click",".vp-email-capture-form-button--back",function(e){S(),k(p-1)}),Yu(s).on("keyup",".vp-email-capture-form-button--next-submit-wrapper",function(e){v.classList.add("showfocus")}),Yu(s).on("blur",".vp-email-capture-form-button--next-submit-wrapper",function(e){v.classList.remove("showfocus")}),Yu(s).on("click",".vp-email-capture-wrapper",function(){v.classList.remove("showfocus"),g.classList.remove("showfocus")}),Yu(s).on("keydown",".vp-email-capture-form-button--back",function(e){n=!0}),Yu(s).on("keydown",".vp-email-capture-form-button--next",function(e){n=!0}),Yu(s).on("keyup",".vp-email-capture-form-input",function(e){"Enter"===e.key&&p<f.length&&!n&&x(),9!==e.which||g.classList.contains("showfocus")||g.classList.add("showfocus"),n=!1}),Yu(s).on("submit",".vp-email-capture-form",function(){return(function(e,t){return"before-video"===(t=(t=1<arguments.length&&void 0!==t?t:null)||e.position)||"before"===t}(y)&&!u.config.video.live_event||l.get(Ou))&&(u.events.fire(Mc.wc),u.events.fire(Mc.bc)),p===f.length&&(L()?(S(),u.events.fire(Mc.ll),C(),(ah(y)||u.config.video.live_event)&&!l.get(Ou)||u.events.fire(Mc.wc)):T(),!1)}),Yu(s).on("input",".vp-email-capture-form-input",function(){g.value.length?(m.classList.add("active"),g.setCustomValidity(""),L()&&S()):m.classList.remove("active")}),Yu(s).on("focus",".vp-email-capture-form-input",function(){m.classList.add("focus")}),Yu(s).on("blur",".vp-email-capture-form-input",function(){m.classList.remove("focus")}),l.get(al)&&Yu(s).on("click",".vp-email-capture-reg-skip",function(){}),o=!0))}),u.events.on(Sc.Ms,function(e){k(e,!1)}),u.events.on(Sc._updateEmailCapture,function(e){E.updateAll(e,function(){f=s.querySelectorAll(".vp-email-capture-form-custom-field"),h=s.querySelectorAll(".vp-email-capture-form-input"),s.querySelector(".vp-email-capture-total-steps").innerText=f.length,m=f[p-1],g=h[p-1],k(p>f.length?f.length:p,!1)})}),t}function fh(c,e,o){var t,n,i,r,s=o.querySelector(".vp-overlay-cell"),a=o.querySelector(".vp-overlay"),u=o.querySelector(".vp-overlay-icon-wrapper"),l=u.querySelector(".vp-overlay-icon"),d=o.querySelector(".vp-overlay-logo"),f=!1,h=null,v=null,p=new oh(c,a),m=new dh(c,e,a),g=!1,b=!1;function y(){var e=tc(o),t=tc(a),n=tc(d),t=t.bottom+(e.height-t.bottom)/2;return e.height-t-n.height/2+"px"}function E(){var e=tc(o),t=tc(a),n=tc(u),i=e.height/2,t=e.height-(e.bottom-t.bottom)/2;return{top:i-n.height/2+"px",transform:"translateY("+(t-i)+"px)"}}function w(e,t){o.setAttribute("data-name",e),a.innerHTML=t.template,An.iOS&&Kd.element&&(c.events.fire(Mc.Wc),Kd.exit()),t.noblur||ec(i=document.activeElement),t.modal&&(o.classList.add("modal"),o.setAttribute("data-modal","true")),t.preventBackgroundClose&&o.setAttribute("data-background-close","false"),t.wrapperClass&&o.classList.add(t.wrapperClass),t.icon.type&&(t.logo&&(d.classList.remove("hidden"),u.classList.add("cloaked"),window.requestAnimationFrame(function(){d.innerHTML=Hl.render("logo"),d.style.bottom=y()})),u.classList.remove("hidden"),l.innerHTML=t.icon.html,window.requestAnimationFrame(function(){var e=E();u.style.top=e.top,u.style[An.transformProperty]=e.transform}),o.setAttribute("data-icon",t.icon.type),u.setAttribute("data-icon",t.icon.type),l.setAttribute("data-icon",t.icon.type),"private-unlocked"===e&&l.classList.add("open")),o.classList.add("invisible"),o.classList.remove("hidden"),o.removeAttribute("hidden"),o.classList.add("in"),v=t,h=e,f=!0,c.events.fire(Mc.Qc,e),c.element.classList.add("player-overlayVisible"),window.requestAnimationFrame(function(){var e;o.classList.remove("invisible"),!t.nofocus&&c.element.contains(i)&&(!(e=t.Od)||(e=o.querySelector(e))&&e.focus()),window.requestAnimationFrame(function(){a.classList.add("in"),s.classList.add("in")})})}function _(){a.classList.remove("in"),a.classList.add("out")}function T(e){"true"!==o.getAttribute("data-modal")&&f&&(o.removeAttribute("data-background-close"),s.classList.remove("in"),s.classList.add("out"),_(),o.classList.remove("in"),o.classList.add("out"),clearTimeout(t),t=setTimeout(S,200),null!=e&&e.preventDefault&&e.preventDefault(),(e=o.querySelector(".js-back"))&&e.classList.add("cloaked"),p.destroy(),c.events.fire(Mc.tl,h),c.element.classList.remove("player-overlayVisible"),f=!1,v=h=null,window.requestAnimationFrame(function(){i&&(function(e,t){var n=0<arguments.length&&void 0!==e?e:document.activeElement,t=1<arguments.length&&void 0!==t?t:null;try{n.focus()}catch(n){t&&t(n)}}(i),i=null)}))}function S(){o.setAttribute("hidden",""),o.removeAttribute("data-name"),o.removeAttribute("data-icon"),o.classList.add("hidden"),o.classList.remove("out"),o.classList.remove("embed-active"),o.classList.remove("modal"),o.classList.remove("embed-only"),s.classList.remove("out"),s.classList.remove("in"),u.removeAttribute("data-icon"),u.classList.add("hidden"),u.classList.remove("animate"),l.removeAttribute("data-icon"),l.innerHTML="",d.classList.add("hidden"),a.classList.remove("out"),a.innerHTML="",c.events.fire(Mc.nl)}function A(){o.setAttribute("data-modal","false")}function k(e){var t,n,i;"yes"===e.form.getAttribute("data-bubble")&&(e.form.setAttribute("data-bubble","no"),(t=o.querySelector(".vp-validation-bubble")).querySelector(".vp-validation-bubble-message").innerHTML=e.validationMessage||"There is an error with this input.",n=tc(e),i=tc(e.form),t.style.left=n.left-i.left+"px",t.style.top=n.height+1+"px",t.classList.remove("hidden"),e.focus(),window.requestAnimationFrame(function(){t.classList.add("vp-validation-bubble-animate")}),L())}function L(e){var t=o.querySelector(".vp-validation-bubble");if(t){if(e)return clearTimeout(n),t.classList.remove("vp-validation-bubble-animate"),0;clearTimeout(n),n=setTimeout(function(){t.classList.remove("vp-validation-bubble-animate")},5e3)}}function R(e){var t=o.querySelector("input[type=password]");return t.form.classList.contains("submitted")&&(t.setAttribute("aria-invalid","false"),t.setCustomValidity(""),t.checkValidity&&!t.checkValidity()?(t.setAttribute("aria-invalid","true"),t.validity.valueMissing&&t.setCustomValidity("Please enter the password."),e||k(t),0):(L(!0),1))}function C(){x(),u.classList.remove("cloaked"),u.classList.add("animate"),window.requestAnimationFrame(function(){u.style[An.transformProperty]="translateY(-10px)"}),A(),_()}function x(){d.classList.add("animate")}function I(){l.classList.add("open")}function O(){l.classList.add("pulled-back")}function D(){var e,t=c.config.embed.email_capture_form||c.config.embed.email||{};c.backbone&&(e=t.timecode||0,g=c.backbone.currentTime>e),"before-video"!==t.position&&"before"!==t.position||g||P()}function P(){e.get("ui.overlay.isEmailCaptureVisible")?c.events.fire(Sc._showOverlay,"email-capture"):b=!0}return c.events.on(Sc._hideOverlay,function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};e.name&&h!==e.name||(e.unmakeModal&&A(),T())}),c.events.on(Sc._showOverlay,function(r){function e(){var e,t,n,i={modal:!1,template:null,logo:!1,icon:{type:null,html:null}};switch(r){case"share":return w(r,p.getShareData(i,o)),void p.setup();case"private-locked":return void w(r,((n=i).icon={type:"lock",html:Hl.render("icon_lock")},n.Od=".js-login",n.modal=!0,n.logo=!0,n.template=Hl.render("private_locked",{action:"https://".concat(c.config.vimeo_url,"/log_in"),strings:{title:"Private Video",subtitle:"Log in to watch (if you have permission)",logIn:"Log in"}}),n));case"password":return void w(r,((n=i).icon={type:"lock",html:Hl.render("icon_lock")},n.template=Hl.render("password",{action:"https://".concat(c.config.player_url,"/video/").concat(c.config.video.id,"/check-password?referrer=").concat(c.config.request.referrer),strings:{title:"Password Required",subtitle:"If youâ€™ve got it, enter it below.",password:"Password",watch:"Watch Video"}}),n.Od=".js-password",n.modal=!0,n.logo=!!c.config.embed.settings.logo,n));case"private-unlocked":return void w(r,((t=i).icon={type:"lock",html:Hl.render("icon_lock")},t.template=Hl.render("private_unlocked",{strings:{title:"Private Video",subtitle:"You are logged in and have permission to watch (congrats).",watch:"Watch Video"}}),t.Od=".js-watch",t));case"error":return void w(r,(t=o,(e=i).template=Hl.render("error",{title:t.title,message:t.message,aria_label:"Error"}),e.Od=".js-close",e.modal=!!t.modal,e.logo=!!t.logo,t.icon&&"lock"===t.icon&&(e.icon={type:"lock",html:Hl.render("icon_lock")}),e));case"help":return void w(r,((e=i).template=Hl.render("help",{onSite:c.config.embed.on_site,strings:{title:"Keyboard Shortcuts",volumeUp:"Volume up",volumeDown:"Volume down",scrubForward:"Scrub forward",scrubBackwards:"Scrub backwards",like:"Like",share:"Share",watchLater:"Watch Later",captions:"Toggle Captions",prefs:"Toggle Preferences Menu",fullscreen:"Toggle fullscreen",viewOnVimeo:"View on Vimeo"}}),e.Od=".js-close",e));case"email-capture":return void w(r,m.getData(i,o));case"app-redirect":return void w(r,function(e,t){var n=(a=1<arguments.length&&void 0!==t?t:{}).redirectUrl,i=a.title,r=a.buttonText,o=a.ignoreText,s=a.bottomText,t=a.newWindow,a=dc(c.config.video.privacy,["disable","unlisted"]);return e.template=Hl.render("app_redirect",{hideRedirectButton:a,redirectUrl:n,newWindow:t,strings:{title:i,buttonText:r,ignoreText:o,bottomText:s}}),e.modal=!1,e.logo=!1,e.preventBackgroundClose=!0,e}(i,o))}}var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(f&&!o.nohide)return("share"!==h&&"help"!==h||h!==r)&&(c.events.once(Mc.nl,e),A()),void T();e()}),Yu(o).on("input","input",function(){this.form.classList.add("interacted")}).on("transitionend",".vp-validation-bubble",function(e){"opacity"===e.propertyName&&"0"===window.getComputedStyle(this,"").opacity&&this.classList.add("hidden")}),c.events.on([Mc.il,un.PLAY],T),c.events.on(Mc.Dl,function(){"private-locked"===h&&(A(),T())}),c.events.on(Mc.jl,function(){"share"===h&&(v=p.getShareData({modal:!1,template:null,logo:!1,icon:{type:null,html:null}}),a.innerHTML=v.template,p.setup())}),Yu(window).on("resize",function(){var e;f&&(d.style.bottom=y(),e=E(),u.style.top=e.top,u.style[An.transformProperty]=e.transform)}),Yu(o).on("transitionend",".vp-overlay-logo",function(e){"opacity"===e.propertyName&&this.classList.contains("animate")&&(d.classList.add("hidden"),d.classList.remove("animate"))}),Yu(o).on("transitionend",".vp-overlay-icon-wrapper",function(e){-1<e.propertyName.indexOf("transform")&&(""===this.style[An.transformProperty]?(this.classList.remove("centered"),"lock"!==this.getAttribute("data-icon")||l.classList.contains("open")||l.querySelector("canvas")?O():setTimeout(I,100)):"translateY(-10px)"===this.style[An.transformProperty]&&(u.classList.add("centered"),u.style[An.transformProperty]=""))}),Yu(o).on("transitionend",".vp-overlay-icon",function(e){-1<e.propertyName.indexOf("transform")&&(this.classList.contains("out")?(A(),T()):this.classList.contains("pulled-back")?(l.classList.add("out"),l.classList.remove("pulled-back")):this.classList.contains("open")&&O())}),e.watch("ui.overlay.isEmailCaptureVisible",function(e){!e&&f&&"email-capture"===h?(b=f,A(),T()):e&&b&&(b=!1,c.events.fire(Sc._showOverlay,"email-capture"))}),c.events.on([Mc.be,Mc.jl],function(){e.get(ll)&&c.events.fire(Sc._showOverlay,"email-capture")}),c.events.on(Mc.be,D),c.events.on(Mc.jl,D),c.events.on(un.TIME_UPDATE,function(e){var t=e.currentTime,e=void 0===t?0:t,t=c.config.embed.email_capture_form||c.config.embed.email||{};"during-video"!==t.position&&"during"!==t.position||(e<t.timecode&&(g=!1),e>=t.timecode&&!g&&(g=!0,P()))}),c.events.on(Mc.bl,function(){P()}),m.events.on(Mc.af,function(){c.events.fire(Mc.af),A(),T()}),p.events.on(Mc.dl,function(){c.config.embed.settings.share.embed_only||(o.querySelector(".js-back").classList.remove("cloaked"),o.classList.add("embed-active"))}).on(Mc.hl,function(){o.classList.remove("embed-active")}),Af(o,".js-back",function(){return p.showShareView(),!1}),p.events.on(Mc.vl,function(){o.querySelector(".js-back").classList.add("cloaked")}),An.stereoscopic&&(c.events.on(Mc.ml,function(){c.events.fire(Sc._showOverlay,"app-redirect",{redirectUrl:c.doNotTrackEnabled?c.config.video.share_url:Hu(c.config.video.id,"player-spatial-redirect"),title:"Headset viewing isnâ€™t currently supported in your mobile browser.",buttonText:"Watch in the Vimeo app",ignoreText:null,bottomText:null,newWindow:!c.config.embed.on_site})}),Yu(a).on("click",".app-redirect-ignore",function(){T()}),Yu(a).on("click","[data-new-window]",function(e){return window.open(document.querySelector(".app-redirect-button").getAttribute("href")),!1})),Yu(a).on("click",".popup",function(){return c.events.fire(Sc.Cs,"login-private-locked"),!1}),Yu(a).on("click",".password input[type=submit]",function(){this.form.classList.add("submitted"),this.form.setAttribute("data-bubble","yes"),R(!0)}).on("submit",".password form",function(){return e=this,R()&&(t=e.querySelector("input[type=password]"),(n=e.querySelector("input[type=submit]")).classList.add("loading"),function(e,t){cc(o);var n=Be(e.querySelectorAll("input")).map(function(e){return e.name?encodeURIComponent(e.name)+"="+encodeURIComponent(window.btoa((t=e.value,encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode("0x"+t)})))):encodeURIComponent(e.value);var t}).join("&"),i=new XMLHttpRequest;i.open(e.method,e.action+window.location.search,!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.withCredentials=!0,i.timeout=3e3,i.onload=function(){var e;try{e=JSON.parse(i.responseText)}catch(e){}!function(e,t){if(!1!==e){if(c.events.fire(Mc.Ll,e),"icon-hidden"===window.getComputedStyle(s,":after").content)return A(),T();C()}else r(t.status)}(e,i)},i.onerror=function(e){t(e)},i.send(n)}(e,r)),!1;function r(e){n.classList.remove("loading"),t.setCustomValidity("Uh oh. There was a problem. Please try again."),t.setAttribute("aria-invalid","true"),k(t)}var e,t,n}).on(["focus","input"],[".password input[type=email]",".password input[type=password]"],function(){R()}),Af(a,".unlocked button",function(){0===tc(l).width?(x(),A(),T()):C(),An.iPad||An.iPhone||c.events.once(Mc.nl,function(){c.events.fire(Mc.wc)})}),c.events.on(Mc.nc,function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{modal:!0,final:!0};if(!1!==t.final){r=e;var n={modal:!1,template:null,logo:!1,icon:{type:null,html:null}};if(n.modal=t.modal,n.template=Hl.render("error",{title:t.title,message:t.message}),n.Od=".js-close",f)return T(),void c.events.once(Mc.nl,function(){return w(e,n)});w(e,n)}}),Yu(a).on("click",".error",function(e){c.events.fire(Mc.Zl,e.target.href,r)}),c.events.on(Mc.jl,function(){window.requestAnimationFrame(function(){A(),T()})}),Af(o,".js-close",function(){c.events.fire(Mc.il)}),Yu(o).on(["click","touchend"],[".vp-overlay-content",".js-share",".vp-overlay-logo"],function(e){e.stopPropagation()}).on(["click","touchend"],[".vp-overlay-cell","nav"],function(){return"false"===o.getAttribute("data-background-close")||(c.events.fire(Mc.il),!1)}),c.events.on(Sc.Ws,function(){o.classList.add("hidden")}),c.events.on(Mc.ql,function(){o.classList.contains("in")&&o.classList.remove("hidden")}),c.events.fire(Mc.df),{}}var hh=[".vp-title a"],vh=[".vp-title a:hover"],ph=["a",".button-link",".vp-overlay-wrapper .footnote.share a:hover",".vp-title h1",".vp-title span.user",".menu li:hover",".menu li.active",".vp-outro-link:hover",".vp-outro-videosTitle a:hover","li.vp-panel-item:hover","li.vp-panel-item-on",".vp-share-footnote a:hover",".card-link span",".vp-panel-collapsible .vp-panel-button:hover"],mh=["a:hover",".button-link:hover"],gh=[".vp-overlay-wrapper .close:hover .fill",".vp-overlay-wrapper .back:hover .fill",".stats-debug-close:hover .fill",".stats-debug-copy:hover",".card-link:hover .fill"],bh=[".play-bar .on .fill",".play-bar a:hover .fill",".play-bar button:not(.toggle):hover .fill",".tiny-bars .fill",".vp-sidedock .on .fill",".controls-outro a:hover .fill",".card-link .fill",".vp-panel-collapsible .vp-panel-button:hover .fill"],yh=[".vp-controls .play-bar .vp-cast-button"],Eh=[".vp-sidedock .on:hover .fill"],wh=[".play-bar .on .stroke",".vp-sidedock .on .stroke"],_h=[".vp-sidedock .on:hover .stroke"],Th=[".vp-sidedock button:hover",".vp-sidedock button.selected","&.touch-support .vp-sidedock button:active",".vp-controls .play:hover",".vp-controls .play-bar .played","&.no-playbar .play-bar button:not(.toggle):hover",".vp-controls.tiny .play-bar button:not(.toggle):hover",".vp-controls .volume div",".vp-overlay .buttons li",".vp-overlay .vp-overlay-content button",'.vp-overlay .vp-overlay-content input[type="submit"]','.vp-overlay .vp-overlay-content a[role="button"]',"li.vp-panel-item-on:before",".vp-controls .replay:hover",".vp-share-buttons li","button.vp-share-embedCopy",".vp-outro-button","a.vp-outro-vodButton",".vp-email-capture-checkIconWrapper",".vp-email-capture-progress-meter",".chapter-marker",".vp-chapters-active-indicator"],Sh=["li.vp-panel-item-on:before"],Ah=[".vp-overlay .vp-overlay-content button",'.vp-overlay .vp-overlay-content input[type="submit"]','.vp-overlay .vp-overlay-content a[role="button"]',".vp-sidedock button:hover",".vp-sidedock button.selected",".vp-sidedock button:hover .vod-label",".vp-sidedock button.selected .vod-label",".play:hover",".vp-share-footnote--embed a",".vp-outro-button",".vp-outro-button:hover",".vp-outro-wrapper .vp-outro-link:hover","button.vp-share-embedCopy",".vp-outro-vodWrapper a.vp-outro-vodButton",".vp-outro-vodWrapper a.vp-outro-vodButton:hover","li.vp-panel-item:hover","li.vp-panel-item-on",".vp-panel-collapsible .vp-panel-button:hover","input.vp-email-capture-form-button--next","input.vp-email-capture-form-button--submit"],kh=[".vp-controls .play:hover .fill",".vp-sidedock button:hover .fill",".vp-sidedock button.selected .fill",".play-bar a:hover .fill",".play-bar button:not(.toggle):hover .fill","&.no-playbar .play-bar button:not(.toggle):hover .fill",".vp-controls.tiny .play-bar button:not(.toggle):hover .fill",".vp-sidedock .on .fill",'.vp-share-wrapper a[role="button"] .fill',".vp-outro-vodButton .fill",".vp-email-capture-checkIconWrapper .fill",".vp-panel-collapsible .vp-panel-button:hover .fill"],Lh=[".vp-controls .play:hover .stroke",".vp-sidedock button:hover .stroke",".vp-sidedock button.selected .stroke",".vp-sidedock .on .stroke"],Rh=["li.vp-panel-item-on:before"],Ch=["li.vp-panel-item-on:before"],xh=['.vp-overlay-wrapper .vp-overlay a[role="button"]',".vp-sidedock button:hover",".vp-sidedock button.selected",".play:hover","button.vp-share-embedCopy",".vp-outro-button",".vp-outro-button:hover",".vp-outro-vodWrapper a.vp-outro-vodButton",".vp-outro-vodWrapper a.vp-outro-vodButton:hover","input.vp-email-capture-form-button--next","input.vp-email-capture-form-button--submit"],Ih=[".vp-controls .play:hover .fill",".vp-sidedock button:hover .fill",".vp-sidedock button.selected .fill",".vp-controls .play-bar .fullscreen.tiny:hover .fill",".vp-share-button .fill",".vp-outro-vodButton .fill"],Oh=[".vp-sidedock button:hover .stroke",".vp-sidedock button.selected .stroke"],Dh=["li.vp-panel-item-on:before",".vp-email-capture-form-fields-slider .vp-email-capture-form-custom-field.focus"],Ph=['.vp-overlay .vp-overlay-content input[type="submit"]:active','.vp-overlay a[role="button"]:active',".vp-sidedock button:active",".vp-outro-vodWrapper a.vp-outro-vodButton:active",".vp-email-capture-form-button--next:hover",".vp-email-capture-form-button--next:focus",".vp-email-capture-form-button--submit:hover",".vp-email-capture-form-button--submit:focus"],Mh=[".vp-email-capture-form-button--next",".vp-email-capture-form-button--submit"];function Nh(n,e){var o=e.uuid,i=e.id,r=e.isMobileDevice,s=null;function a(e,t){var n=".player-".concat(o," "),n=n+e.join(","+n);return t&&(t="".concat(i," "),n+=",".concat(t).concat(e.join(","+t))),(n=r?n.replace(/:hover/g,":active"):n).replace(/ &/g,"")}return n.events.on(Sc.Ds,function(e){try{t=new Gd(e)}catch(e){t=new Gd("00adef")}var t=function(e){s?function(){for(;0<s.cssRules.length;)s.deleteRule(0)}():((i=document.createElement("style")).setAttribute("data-player",o),document.querySelector("head").appendChild(i),s=i.sheet);var t=e.complement,n=new Gd(30,30,30,.9),i=new Gd(0,0,0,.15).overlayOn(e);n.contrast(t).ratio<3&&t.lighten(5,3,n);var r,n=e.lightness<40?e.clone().lighten(15,3,e):e.clone().darken(15,3,e);Qa(a(hh,!0),"color:"+e.hex+" !important",s),Qa(a(vh,!0),"color:"+t.hex+" !important",s),Qa(a(Dh),"border-color:"+i.hex,s),Qa(a(ph),"color:"+e.hex,s),Qa(a(bh),"fill:"+e.hex,s),Qa(a(yh),"--connected-color:"+e.hex,s),Qa(a(wh),"stroke:"+e.hex,s),Qa(a(Th),"background-color:"+e.hex,s),Qa(a(Sh),"border-color:"+e.hex,s),Qa(a(mh),"color:"+t.hex,s),Qa(a(gh),"fill:"+t.hex,s),Qa(a(Eh),"fill:"+n.hex,s),Qa(a(_h),"stroke:"+n.hex,s),Qa(a(Ph),"background-color:"+i.hex,s),.95<e.luminance&&(t=e.clone().darken(15,3,e),Qa(a(Ah),"color:"+t.hex,s),Qa(a(kh),"fill:"+t.hex,s),Qa(a(Lh),"stroke:"+t.hex,s),Qa(a(Rh),"background-color:"+t.hex,s),Qa(a(Ch),"border-color:"+t.hex,s),n=t.clone().darken(15,3,t),Qa(a(Eh),"fill:"+n.hex,s),Qa(a(_h),"stroke:"+n.hex,s)),175<e.yiq&&e.luminance<.95&&(r=n.clone().darken(15,3,n),Qa(a(Eh),"fill:"+r.hex,s),Qa(a(_h),"stroke:"+r.hex,s),Qa(a(xh),"color:"+n.hex,s),Qa(a(Ih),"fill:"+n.hex,s),Qa(a(Oh),"stroke:"+n.hex,s));i=new Gd(e.hex);return i.alpha=.8,Qa(a(Mh),"background-color:"+i.rgba,s),{main:e.hex,selected:n.hex,sidedockHover:(r?n:.95<e.luminance?t:Gd.white).hex,sidedockSelected:(.95<e.luminance?t:e).hex,sidedockSelectedHover:(r||n).hex}}(t);n.config.jd=t,n.config.embed.color=t.main.replace("#",""),n.events.fire(Mc.Ol,n.config.embed.color)}),n.events.fire(Sc.Ds,n.config.embed.color),{}}function Fh(o){var s=null;return o.events.on(Sc.Cs,function(e,t){var n="https://".concat(o.config.player_url),i="".concat(n,"/video/").concat(o.config.video.id);switch(e){case"login-like":s=oc("".concat(i,"/login/like"),"login",{width:670,height:545}),o.events.fire(Mc.sl,e);break;case"login-watch-later":s=oc("".concat(i,"/login/watch-later"),"login",{width:670,height:545}),o.events.fire(Mc.sl,e);break;case"login-private-locked":s=oc("".concat(i,"/login/private"),"login",{width:670,height:545}),o.events.fire(Mc.sl,e);break;case"purchase":var r="".concat(n,"/video/").concat(o.config.video.vod.feature_id||o.config.video.id,"/purchase/vod");null!=t&&t.productId&&(r+="/".concat(t.productId)),r+="?referrer=".concat(encodeURIComponent(o.config.request.referrer)),s=oc(r,"purchase",{width:790,height:670}),o.events.fire(Mc.sl,e)}}),window.closePopup=function(e){if(s){try{s.close(),o.events.fire(Mc.fl,e)}catch(e){}s=null}},o.config.embed.on_site||(window.confirmPurchase=function(e,t,n){t?o.loadVideo(e):n&&o.events.fire(Mc.wc)}),o.config.embed.on_site||(window.confirmLoginAction=function(e,t){o.events.fire(Mc.Ml,t)}),{}}function qh(e,t,n,i){t=i[t];return t?(t=Uh(t=Hh(e,t),n,i.prices),i.expires_in_duration_str&&(t=t.replace("{TIME}",i.expires_in_duration_str)),t=i.available_on_formatted?t.replace("{DATE}",i.available_on_formatted):t):null}function Uh(e,t,n){var i=n.USD;return t in n&&(i=n[t]),-1!==e.indexOf("${price}")?e.replace("${price}",i):-1!==e.indexOf("{PRICE}")?e.replace("{PRICE}",i):e}function jh(e,t){return!e||0===e.length||-1!==e.indexOf(t)}function Hh(e,t){return void 0!==e&&void 0!==e[t]?e[t]:t}var Bh=Object.freeze({__proto__:null,formatVodLabel:qh,getDisplayPrice:Uh,isAvailableInCountry:jh,translateFromRequest:Hh});function Vh(s,a){var c,u,l,d,f,h,v,p,m,e,t,n,g=!1,i=!1,r=!1,o=!1,b=!1,y=!1,E=!1,w=!1,_=[],T=[],S=null,A=!1,k=!1,L=null,R=s.config.embed.autoplay&&s.config.request.flags.autohide_controls;function C(){return o||E||w}function x(){g&&(k||(i&&A||C()||R)&&(r||(b||y)&&!C()||(g=!1,s.events.fire(Mc.Ic,g),(L||a).classList.add("invisible"))))}function I(){var e;g||C()||((e=L||a).classList.add("invisible"),e.classList.remove("hidden"),e.removeAttribute("hidden"),a.classList.remove("hidden"),a.removeAttribute("hidden"),a.classList.contains("vod")&&a.classList.remove("vod"),setTimeout(function(){g=!0,s.events.fire(Mc.Ic,g),e.classList.remove("invisible")},0))}function O(e,t,n){var i="data-label-"+n,n="add"!==n||s.config.user.logged_in?i:"data-label-add-logged-out";e.setAttribute("aria-label",e.getAttribute(n)),t.classList.add("hidden"),t.setAttribute("hidden",""),t.firstChild.innerHTML=e.getAttribute(i)}function D(){var e="BUTTON"===this.tagName?this:this.querySelector("button"),e=_.indexOf(e);0<=e&&T[e]&&(S&&(window.cancelAnimationFrame(S),S=null),T[e].classList.add("invisible"))}function P(){var e;c&&(e=c.parentElement,L.insertBefore(e,L.firstChild))}function M(){var e,t,n,i,r,o;1!==s.config.view&&3!==s.config.view||(e=s.config.embed.settings,r=(t=s.config.video.vod&&"purchase_options"in s.config.video.vod&&s.config.video.vod.purchase_options.length)&&s.config.video.vod.is_coming_soon,i="ondemand.main"===s.config.embed.context||"Vimeo\\Controller\\OnDemandController.main"===s.config.embed.context,o=s.config.video.vod&&s.config.user.purchased?1:0,(n=t&&e.vod&&jh(s.config.video.vod.countries,s.config.request.country))&&r&&i&&(n=!1),r=null,(i=t&&s.config.video.vod.purchase_options[0])&&(r=qh(s.config.request.dynamic_translation_map,"label_string",s.config.request.currency,i)),a.innerHTML=Hl.render("sidedock",{loggedIn:!!s.config.user.logged_in,vodButton:n,purchased:o,vodPurchaseInfo:i,vodDisplayLabel:r,likeButton:e.like,liked:s.config.user.liked,watchLaterButton:e.watch_later,addedToWatchLater:s.config.user.watch_later,collectionsButton:e.collections,shareButton:e.share,strings:{like:"Like",likeLoggedOut:"Like (this opens in a new window)",unlike:"Unlike",watchLaterAdd:"Add to Watch Later",watchLaterAddLoggedOut:"Add to Watch Later (this opens in a new window)",watchLaterRemove:"Remove from Watch Later",collections:"Add to collections",share:null!=(e=e.share)&&e.embed_only?"Embed":"Share"}}),c=a.querySelector(".vod-button"),n&&(L=a.querySelector(".sidedock-inner"),o&&P()),o=L||a,t&&n&&!s.config.embed.settings.instant_sidedock?a.classList.add("vod"):An.touch&&(g=!0,s.events.fire(Mc.Ic,g),o.classList.remove("hidden"),o.removeAttribute("hidden"),o.classList.remove("invisible")),u=a.querySelector(".like-button"),l=a.querySelector(".like-label"),d=a.querySelector(".watch-later-button"),f=a.querySelector(".watch-later-label"),h=a.querySelector(".collections-button"),v=a.querySelector(".collections-label"),p=a.querySelector(".share-button"),m=a.querySelector(".share-label"),_=[c,u,d,p,h],T=[null,l,f,m,v])}return M(),e=s.config.embed.settings.instant_sidedock,t=s.config.video.vod,n=t&&"purchase_options"in t&&t.purchase_options.length,t=t&&jh(s.config.video.vod.countries,s.config.request.country),(e||n&&t)&&(R||I()),Af(a,".vod-button",function(){var e=c.getAttribute("data-product-id");s.events.fire(Mc.$c,e)},D),s.events.on(Mc.Hl,function(){P(),a.classList.add("sidedock-outro"),"share"===s.config.embed.outro&&(s.config.embed.settings.share=0,M())}),s.events.on(Mc.ql,function(){var e;c&&(e=c.parentElement,a.insertBefore(e,L)),a.classList.remove("sidedock-outro"),"share"===s.config.embed.outro&&(s.config.embed.settings.share=1,M())}),Af(a,".like-button",function(){s.events.fire(Mc.Gc)},D),s.events.on(Mc.El,function(){u&&(u.classList.add("on"),O(u,l,"remove"))}),s.events.on(Mc.Tl,function(){u&&(u.classList.remove("on"),O(u,l,"add"))}),Af(a,".watch-later-button",function(){s.events.fire(Mc.Kc)},D),s.events.on(Mc.Sl,function(){d&&(d.classList.add("on"),O(d,f,"remove"))}),s.events.on(Mc.Al,function(){d&&(d.classList.remove("on"),O(d,f,"add"))}),Af(a,".collections-button",function(){s.events.fire(Mc.Xc)},D),Af(a,".share-button",function(){return s.events.fire(s.config.embed.settings.share.embed_only?Mc.Jc:Mc.Yc),!1},D),Yu(a).on("blur","button",D).on("mouseleave",".box",D).on(["focus","pointerdown","touchstart","mouseenter"],"button",function(){var n=_.indexOf(this);T.forEach(function(e,t){t!==n&&e&&e.classList.add("invisible")}),0<=n&&T[n]&&(T[n].classList.add("invisible"),T[n].classList.remove("hidden"),T[n].removeAttribute("hidden",""),S=window.requestAnimationFrame(function(){S=window.requestAnimationFrame(function(){T[n].classList.remove("invisible"),T[n].classList.add("visible")})}))}).on("transitionend","label",function(e){"opacity"===e.propertyName&&e.target.classList.contains("invisible")&&(e.target.classList.add("hidden"),e.target.setAttribute("hidden",""),e.target.classList.remove("visible"))}),Af(a,"label",function(){var e=T.indexOf(this);0<=e&&_[e].click()}),s.events.on([Mc.gl,Mc.kl,Mc.vc],x).on(Mc._l,I).on(Mc.cc,function(){A=!0,x()}).on(un.PLAY,function(){i=!0}),Yu(a).on(["pointerenter","pointerleave","mouseenter","mouseleave"],function(e){"pointerType"in e?"mouse"!==e.pointerType&&e.pointerType!==e.MSPOINTER_TYPE_MOUSE||(r="pointerenter"===e.type||"MSPointerEnter"===e.type):r="mouseover"===e.type}),Yu(a).on("transitionend",function(e){var t=L||a;"opacity"===e.propertyName&&t.classList.contains("invisible")&&(t.classList.add("hidden"),t.setAttribute("hidden",""),c&&t.contains(c)&&(a.classList.add("hidden"),a.setAttribute("hidden","")))}),s.events.on(Mc.Hc,function(){r=!1,x()}).on(Mc.zc,function(e){e||(k=!0)}),s.events.on([Mc._f],function(){b=!0,I()}).on([Mc.kf],function(){b=!1}),s.events.on(Xo,function(){y=!0,I()}).on(Zo,function(){y=!1}),s.events.on(Mc.Qc,function(){r=!(o=!0),x()}).on(Mc.tl,function(){o=!1,I()}),s.events.on(Mc.wf,function(e){(E=e)&&x()}),s.events.on([Mc.Uc,Mc.Oc],function(e,t){t.isCentered()&&t.isVisible()&&(r=!(w=!0),x()),t.isCentered()&&t.isVisible()||(w=!1,I())}),s.events.on(Mc.jl,function(){M()}),s.events.on(Sc.Rs,function(){A=r=!1,x(),k=r=i=!1}),s.events.fire(Mc.lf),{}}function Wh(e,t){function n(){t.classList.remove("hidden"),t.removeAttribute("hidden"),t.classList.remove("invisible")}function i(){Yu(t).on("transitionend",function(){Yu(t).off("transitionend"),t.classList.contains("invisible")&&(t.classList.add("hidden"),t.setAttribute("hidden",""))}),t.classList.add("invisible")}return(o=e.config.embed.settings.badge)?(r=1<An.devicePixelRatio?"img_2x":"img",An.svg&&o.svg&&(r="svg"),t.innerHTML=Hl.render("badge",{showPortrait:!1,targetBlank:0===e.config.embed.on_site,badge:{link:o.link,img:o[r],margin:o.margin||!1,width:o.width,height:o.height,name:o.name,shadow:o.shadow||!1}}),Af(t,".vp-badge",function(){e.events.fire(Mc.Vc,o.id)}),(e.config.embed.autoplay?i:n)()):i(),{show:n,hide:i};var r,o}var $h=((Te=Gh.prototype).renderTemplate=function(){var t=this,e=document.createElement("div");e.innerHTML=Hl.render("card",this.data),this.element=e.children[0],this.data.image&&du(this.data.image).catch(function(e){t.element.querySelector(".js-cardImageWrap").style.display="none"})},Te.isActive=function(e){return e>=this.time&&e<this.end},H(Gh,[{key:"end",get:function(){return this.time+this.displayTime}}]),Gh),zh=((Te=Kh.prototype).Nd=function(e){var t=this.Dd.length;if(0===t)this.Dd.push(e);else{for(var n=0;n<t;n++)if(this.Pd(e,this.Dd[n])){this.Dd[n-1]!==e&&this.Dd.splice(n,0,e);break}n===t&&this.Dd[n-1]!==e&&this.Dd.splice(n,0,e)}},Te.Fd=function(e,t,n,i){if(i<n)return-1;var r=parseInt(n+(i-n)/2,10);return e[r]>t?this.Fd(e,t,n,r-1):e[r]<t?this.Fd(e,t,r+1,i):r},Te.delete=function(e){var t=this.Fd(this.Dd,e,0,this.Dd.length);if(-1===t)throw new Error("key does not exist");this.Dd.splice(t,1),delete this.Ld[e]},Te.set=function(e,t){return this.Ld[e]=t,this.Nd(e),this},Te.get=function(e){return this.Ld[e]},Te.keys=function(){return this.Dd.slice()},Te.values=function(){var t=this;return this.keys().map(function(e){return t.Ld[e]})},Te.forEach=function(e){for(var t=this.Dd.length,n=0;n<t&&!1!==e(this.Ld[this.Dd[n]],this.Dd[n],this);n++);},H(Kh,[{key:"size",get:function(){return this.Dd.length}}]),Kh);function Kh(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(e,t){return e<t};this.Ld={},this.Dd=[],this.Pd=e}function Gh(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=parseInt(76*An.devicePixelRatio,10),i=parseFloat(t.timecode);if(isNaN(i))throw new TypeError("Time must be a number.");if(i<0)throw new TypeError("Time must be a positive number.");this.time=i,this.data=t,this.id=t.id,this.displayTime=t.display_time||6,t.url&&(this.data.url=jf(t.url)),t.image_url&&(t.image=lu({width:n,height:n,baseUrl:jf(t.image_url),crop:!0})),this.renderTemplate()}function Yh(i,r,t){function e(e){return function(){0<a.size&&e.apply(void 0,arguments)}}var n,o,s=t.querySelector(".vp-cards"),a=new zh,c=!1;function u(){v(),a.forEach(function(e,t){e.element.parentNode.removeChild(e.element)}),a=new zh,Array.isArray(i.config.embed.cards)&&i.config.embed.cards.length&&(i.config.video.title&&i.config.embed.settings.title&&l(-1,{className:"card--contentInfo",timecode:0,headline:i.config.video.title,teaser:i.config.embed.settings.byline?i.config.video.owner.name:"",image:i.config.video.owner[1<An.devicePixelRatio?"img_2x":"img"],id:"title-card"}),i.config.embed.cards.forEach(function(e){l(e.timecode,e)}))}function l(e,t){var n=a.get(e),t=new $h(i,t);if(a.set(e,t),n)return s.replaceChild(t.element,n.element),t;e=a.keys().indexOf(e);return s.insertBefore(t.element,s.children[e]),r.dispatch({type:"CARDS_SET_SIZE",payload:a.size}),t}function d(e){i.element.classList.toggle("player-cardsCarousel",e),i.element.classList.toggle("player-cardsCorner",!e),n.destroy(),e&&n.setUp()}function f(e,t){e&&(t?e.element.classList.add("card-animating"):e.element.classList.remove("card-animating"),e.element.classList.add("card-active"),Yu(e.element.childNodes[1]).on("mouseover",function(){c=!0}),Yu(e.element.childNodes[1]).on("mouseout",function(){c=!1}),n.show(e.element),i.events.fire(Mc.ef,e.id,e.data))}function h(e){c||e.classList.remove("card-active")}function v(){Be(t.querySelectorAll(".card-active")).forEach(h)}return n=new Of(s),r.watch("ui.cards.size",function(e){i.element.classList.toggle("player-withCards",0<e)}),r.watch("ui.cards.isCarouselVisible",d),r.watch("ui.cards.isCardsThumbVisible",function(e){t.classList.toggle("cards-wrapper--withThumbnails",e)}),d(r.get("ui.cards.isCarouselVisible")),i.events.on(Mc.jl,u),i.events.on(Sc._addCard,function(e){e=l(e.timecode,e);v(),f(e)}),i.events.on(Sc._removeCard,function(e){v();var t=a.get(e.timecode).element;t.parentNode.removeChild(t),a.delete(e.timecode)}),n.on("slide",e(function(e){e=a.values()[e];"title-card"!==e.id&&i.events.fire(Mc.ef,e.id,e.data),i.events.fire(Sc.Xs,e.time)})),n.on("tap",e(function(e){e=a.values()[e];e.data.url&&"title-card"!==e.id&&(i.events.fire(Mc.rf,e.id,e.data),i.backbone.paused||i.events.fire(Mc.bc),window.open(e.data.url))})),i.events.on(un.TIME_UPDATE,e(function(e){e=function(t){var e=a.values().filter(function(e){return e.isActive(t)}).slice(-1)[0];if(e)return e;if(r.get("ui.cards.isCarouselVisible")){e=a.values().slice(-1)[0];if(e&&t>e.end)return e}return null}(e.currentTime);e!==o&&(!e&&c||(c=!1,v(),(o=e)&&"title-card"===o.id&&!r.get("ui.cards.isCarouselVisible")||f(o,!0)))})),i.events.on(Mc.uc,e(v)),Af(document,".player-cardsCorner .card",e(function(e){e.preventDefault();e=hc(e.target,s.children),e=a.values()[e];e.data.url&&"title-card"!==e.id&&(i.events.fire(Mc.rf,e.id,e.data),i.backbone.paused||i.events.fire(Mc.bc),window.open(e.data.url))})),u(),{}}var Jh={16:"shift",27:"esc",32:"space",37:"left",38:"up",39:"right",40:"down"};function Xh(o,s,e){var n,t,i,r,a=!!o.config.embed.on_site,c=e.querySelector(".volume"),u=!1,l=null,d=o.config.video.fps/5,f=Math.max(d,.618*o.config.video.duration),h=d,v=0,p=!1,m=Jl(_,80);function g(){return!a&&(1===o.config.view||3===o.config.view)}function b(){u&&"help"===n&&o.events.fire(Mc.il)}function y(e){return"number"!=typeof e.which&&(e.which=e.keyCode),e}function E(e){if("keypress"!==e.type)return e.which in Jh?Jh[e.which]:String.fromCharCode(e.which).toLowerCase();var t=String.fromCharCode(e.which);return t=!e.shiftKey?t.toLowerCase():t}function w(e){if(o.config.embed.settings.background)return 1;e=e.target||e.srcElement;return"INPUT"===e.tagName||"SELECT"===e.tagName||"TEXTAREA"===e.tagName||e.isContentEditable}function _(e,t){var n,i,r;s.get(Cu)||(p||(t&&!o.backbone.paused&&o.events.fire(Mc.bc),o.events.fire(Mc.xc,!0,"keyboard"),p=!0),n=v,i=Math.ceil(d),r=Math.ceil(f-d),n=n,n/=100,h=r*(--n*n*n+1)+i,1==++v&&(h=5*o.config.video.fps),t=t?1:h,t="right"===e?t:-t,t=(Math["right"===e?"ceil":"floor"](o.currentTime*o.config.video.fps)+t)/o.config.video.fps,o.events.fire(Sc.Ts,null,t))}function T(e){var t=l.getTabindexItems(),n=t.indexOf(document.activeElement),e="up"===e?n-1:n+1,n=null;return!(n=e>=t.length?t[0]:e<0?t[t.length-1]:t[e])||(n.focus(),!1)}function S(){if(l)return!0;if(s.get(Cu)&&!s.get(Ou))return!0;if(!document.activeElement||document.activeElement===document.body){var e=o.backbone.paused?Mc.wc:Mc.bc;return o.events.fire(e),b(),!1}}function A(){return l?(l.element.contains(document.activeElement)&&l.button.focus(),l.hide(),!1):u?(o.events.fire(Mc.il),!1):void 0}function k(){return l?!l.element.contains(document.activeElement)||T("up"):An.spatialPlayback&&o.config.video.spatial?(o.backbone.getEffectByName("ThreeSixtyEffect").keyPress("up"),!1):!(!o.config.embed.on_site||!document.activeElement||e.contains(document.activeElement))||(b(),o.events.fire(Sc.Ss,.05,!1,!0),!1)}function L(){return l?!l.element.contains(document.activeElement)||T("down"):An.spatialPlayback&&o.config.video.spatial?(o.backbone.getEffectByName("ThreeSixtyEffect").keyPress("down"),!1):!(!o.config.embed.on_site||!document.activeElement||e.contains(document.activeElement))||(b(),o.events.fire(Sc.Ss,-.05,!1,!0),!1)}function R(e,t){return l?!l.element.contains(document.activeElement)||T("left"===t?"up":"down"):(b(),An.spatialPlayback&&o.config.video.spatial?(o.backbone.getEffectByName("ThreeSixtyEffect").keyPress(t),!1):document.activeElement&&document.activeElement===c?(o.events.fire(Sc.Ss,"left"===t?-.05:.05,!1,!0),!1):void(e.shiftKey||0===v?_:m)(t,e.shiftKey))}return o.events.on(Mc.Qc,function(e){u=!0,"not-supported"!==(n=e)&&"email-capture"!==e||(a=!0)}),o.events.on(Mc.tl,function(){u=!1,n=null}),o.events.on(Mc.Oc,function(e,t){e||l!==t?e&&(l=t):l=null}),o.events.on(Mc.jl,function(e){e&&(a=!1)}),r={l:Mc.Gc,w:Mc.Kc,s:Mc.Yc,c:[Mc.gc,!0],h:[Mc.yc,!0],f:Mc.mc,d:Mc.cl,space:S,up:k,down:L,left:R,right:R,esc:A,"?":[Sc._showOverlay,"help"]},o.config.embed.on_site||(r.v=Sc.Ls),document.addEventListener("keydown",C,!1),document.addEventListener("keypress",C,!1),document.addEventListener("keyup",function(t){var e;y(t),!w(t)&&g()&&(e=E(t),!An.spatialPlayback||!o.config.video.spatial||"left"!==e&&"right"!==e&&"up"!==e&&"down"!==e?s.get(Cu)||"left"!==e&&"right"!==e||function(){h=d,v=0;var e=t.shiftKey;o.events.fire(Mc.Ac,e),p=!1}():o.backbone.getEffectByName("ThreeSixtyEffect").keyUp(e))},!1),o.events.on(Mc.zl,function(){a=!1}).on(Mc.Gl,function(){a=!0}),o.config.embed.on_site&&document.querySelector(".player")===e&&(a=!1),i=!1,document.body.addEventListener("keyup",function(e){9!==e.which||document.body.classList.contains("showfocus")||document.body.classList.add("showfocus")}),document.body.addEventListener("keydown",function(e){32!==e.which&&13!==e.which||(i=!0,clearTimeout(t),t=setTimeout(function(){i=!1},200))}),document.body.addEventListener("click",function(e){i||document.body.classList.remove("showfocus")}),{pause:function(){a=!0},unpause:function(){a=!1}};function C(e){var t;y(e),e.ctrlKey||e.metaKey||e.altKey||(e.which in Jh?"keydown"!==e.type:"keypress"!==e.type)||w(e)||!g()||(t=E(e))in r&&("function"!=typeof r[t]?!1===function(e){if(e=Array.isArray(e)?e:[e],u&&"help"===n){if(o.events.fire(Mc.il),e[0]===Sc._showOverlay&&"help"===e[1])return!1;if(e[0]!==Sc.Ls)return setTimeout(function(){o.events.fire.apply(null,e)},250),!1}return o.events.fire.apply(null,e),!1}(r[t])&&(e.preventDefault(),e.stopPropagation()):!1===r[t](e,t)&&(e.preventDefault(),e.stopPropagation()))}}var Zh=((Te=tv.prototype).show=function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.zd;!0!==this.Vd&&(clearTimeout(this.Wd),this.Hd.classList.remove("hidden"),this.Hd.removeAttribute("hidden"),window.requestAnimationFrame(function(){t.Hd.classList.add("in")}),(this.Hd.querySelector("[data-alert-autofocus]")||this.Hd).focus(),this.Vd=!0,this.fire("show",e),0!==n&&(this.Wd=setTimeout(function(){t.hide("timeout")},n)))},Te.hide=function(e){var t=this;!1!==this.Vd&&(clearTimeout(this.Wd),this.Hd.classList.add("leaving"),window.requestAnimationFrame(function(){var n=t;t.Kd(),Yu(t.Hd).on("transitionend",function e(t){"opacity"===t.propertyName&&(n.Hd.classList.remove("leaving"),n.Hd.classList.add("hidden"),n.Hd.setAttribute("hidden",""),Yu(n.Hd).off("transitionend",e))})}),this.Vd=!1,this.fire("hide",e))},Te.Kd=function(){this.Hd.classList.remove("in")},Te.Gd=function(){this.Hd||(this.Hd=document.createElement("div"),this.Hd.classList.add("vp-alert"),this.Hd.setAttribute("role","alertdialog"),this.Hd.setAttribute("aria-atomic","true"),this.Hd.classList.add("hidden"),this.Hd.setAttribute("hidden",""),this.Ud.appendChild(this.Hd),this.Kd()),this.Bd instanceof HTMLElement?(this.Hd.innerHTML="",this.Hd.appendChild(this.Bd)):(this.Hd.textContent=this.Bd,this.Hd.innerHTML=this.Bd);var e=document.createElement("button");e.setAttribute("data-close",""),e.setAttribute("aria-label","Close alert"),e.classList.add("close"),e.innerHTML=Hl.render("icon_close"),this.Hd.appendChild(e)},Te.Rn=function(){var t=this;Yu(this.Hd).on("click","[data-close]",function(e){t.hide(e)})},H(tv,[{key:"visible",get:function(){return this.Vd}},{key:"message",get:function(){return this.Bd},set:function(e){e instanceof HTMLElement&&this.Bd&&e.textContent===this.Bd.textContent||e!==this.Bd&&(this.Bd=e,this.Gd())}}]),tv),Qh=((Te=ev.prototype).handleBufferStarted=function(){this.bufferCount+=1,this.Jd()},Te.handleBufferEnded=function(){clearTimeout(this.badPlaybackTimer),this.badPlaybackTimer=null,this.isBufferingTooLong=!1},Te.wh=function(){var t=this;this.player.events.on(Mc.yl,function(){t.$d()}),this.player.events.on(wc.ks,function(e){t.Xd(e)}),this.player.events.on(wc.Es,function(e){t.Zd(e)}),this.player.events.on(wc._s,this.handleBufferStarted.bind(this)),this.player.events.on(fn.BUFFER_ENDED,this.handleBufferEnded.bind(this)),this.player.events.on(wc.ys,function(){t.autoAlertWasDismissed||(t.showAlert("stream_studder"),iu.captureBreadcrumb("Alert shown",{message:"stream_studder"},"video"))}),this.player.events.on(Mc.sc,function(e){"auto"===e&&t.alertUI.hide("qualitymenuauto")})},Te.Xd=function(e){e||this.showAlert("warning_alert",{strings:{text:'See a <a href="https://help.vimeo.com/hc/en-us/articles/115001878167#browsers" target="_blank" rel="noopener" aria-describedby="new-window">list of browsers</a> that support 360 viewing.'}})},Te.$d=function(){this.showAlert("notice",{strings:{text:"Debug Payload Copied"}},5e3)},Te.Zd=function(e){e||this.showAlert("warning_alert",{strings:{text:'Looking to watch a 360 video? See <a href="https://help.vimeo.com/hc/en-us/articles/115001878167#browsers" target="_blank" rel="noopener" aria-describedby="new-window">supported browsers and settings</a>.'}})},Te.showAlert=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length?arguments[2]:void 0;this.alertUI&&!this.player.config.embed.settings.background&&(this.alertUI.message=Hl.render(e,t),this.alertUI.show(null,n))},Te.Yd=function(e){var i=this;this.alertUI=new Zh(e,{displayTimeout:1e3}),this.alertUI.on("show",function(e){i.player.events.fire(Mc.wf,!0,e)}),this.alertUI.on("hide",function(e){var t=e.target,n=t&&"function"==typeof t.getAttribute;n&&(e="suggestion"===t.getAttribute("data-context")?(i.player.events.fire(Sc.Os,"auto"),"suggestion"):"close"),!n&&"qualitymenuauto"!==e||(i.autoAlertWasDismissed=!0),i.player.events.fire(Mc.wf,!1,e)})},Te.Jd=function(){var e=this;null===this.badPlaybackTimer&&0!==this.bufferCount&&(this.badPlaybackTimer=setTimeout(function(){e.isBufferingTooLong=!0,e.Qd()},1e4))},Te.Qd=function(){"MediaSourceScanner"===this.backbone.currentScannerName&&(this.isBufferingTooLong||this.isBufferingTooFrequent)&&(this.backbone.video.currentFile.restrictedStreamIndexes.length<=0||(this.isBufferingTooLong,this.isBufferingTooFrequent,this.player.events.fire(wc.ys),this.bufferCount=0,this.badPlaybackTimer=null,this.isBufferingTooFrequent=!1,this.isBufferingTooLong=!1))},ev);function ev(e,t,n){this.player=e,this.backbone=t,this.isBufferingTooLong=!1,this.isBufferingTooFrequent=!1,this.autoAlertWasDismissed=!1,this.bufferCount=-1,this.badPlaybackTimer=null,this.Yd(n),this.wh()}function tv(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.displayTimeout,n=void 0===n?0:n,t=t.label,t=void 0===t?"Alert":t;Q(this),this.Ud=e,this.Vd=!1,this.Bd=null,this.Hd=null,this.qd=t;e=Math.round(n/1e3);0!==e&&(this.qd="".concat(t," Will be dismissed in ").concat(e," seconds")),this.Wd=null,this.zd=n,this.Gd(),this.Rn()}function nv(e,t,n){return n?t?t(e):e:(e&&e.then||(e=ee.resolve(e)),t?e.then(t):e)}function iv(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}function rv(){}var ov=((Te=sv.prototype).ev=function(){this.tv.get(Ou)&&(this.Ff.element.querySelector(".vp-live-viewer-status-wrapper")||(this.zh=document.createElement("div"),this.zh.classList.add("vp-live-viewer-status-wrapper","invisible"),this.zh.innerHTML=Hl.render("live_status"),this.zh.querySelector(".vp-live-status-circle").classList.remove("offline"),this.Ff.element.querySelector(".vp-controls-wrapper").appendChild(this.zh)))},Te.rv=function(){var e=this.Ff.element.querySelector(".vp-live-viewer-status-wrapper");e&&this.Ff.element.querySelector(".vp-controls-wrapper").removeChild(e)},Te.iv=function(){var n=this;this.tv.watch(Pu,function(){return n.rv()}),this.Ff.events.on(Mc.jl,function(){n.Ff.config.video.live_event?n.ev():n.rv()}),this.Ff.events.on(ts.STREAM_ONLINE,function(){n.ev(),n.ov()}),this.Ff.events.on(Mc.Rc,function(e){var t;null==(t=n.zh)||t.classList.toggle("invisible",e)})},Te.ov=function(){try{var t=this;if(!t.tv.get(Ou)||!t.Ff.config.video.live_event.show_viewer_count)return;var n=setTimeout(function(){t.ov()},3e4),e="".concat(t.Ff.config.video.id);"unlisted"===t.Ff.config.video.privacy&&(e+=":".concat(t.Ff.config.video.unlisted_hash));var i="https://".concat(t.Ff.config.vimeo_api_url,"/videos/").concat(e,"/stats/live"),r={jwt_token:t.Ff.config.user.vimeo_bucketed_live_client_token};return av(iv(function(){return nv(t.Ff.updatePhpTokens(),function(){return av(iv(function(){return nv(qi({url:i,searchParams:r}).json(),function(e){e.viewers?(t.nv=0,t.av(e.viewers.current)):t.nv++})},function(){t.nv++,t.sv()&&clearTimeout(n)}))})},function(e){iu.captureException(e),t.nv++,t.sv()&&clearTimeout(n)}))}catch(t){return ee.reject(t)}},Te.av=function(t){this.Ff.config.video.live_event.show_viewer_count&&(this.zh.querySelector(".vp-live-viewer-count")||(this.Ff.element.querySelector(".vp-live-viewer-count").style.display="block",this.zh.innerHTML+=Hl.render("live_viewer_count")),Be(this.Ff.element.querySelectorAll(".vp-live-viewer-count-value")).forEach(function(e){return e.innerHTML=(e=t,e=parseFloat(e),isNaN(e)||e<0?"0":e<1e3?e.toString():1e3<=e&&e<1e6?Math.floor(e/1e3)+"."+Math.round(e%1e3/100)+"k":Math.floor(e/1e6)+"."+Math.round(e%1e6/1e5)+"m")}))},Te.sv=function(){return 3<this.nv&&(Be(this.Ff.element.querySelectorAll(".vp-live-viewer-count")).forEach(function(e){return e.classList.add("hidden")}),!0)},sv);function sv(e,t){this.Ff=e,this.tv=t,this.nv=0,this.iv()}function av(e){if(e&&e.then)return e.then(rv)}e.BigScreen=Kd,e.VimeoPlayer=function(D,e,t,u){Hl.helpers=Bh;var t=function(n){if(!0===n)return ee.resolve(null);var i=!1;return new ee(function(t,e){n.link.addEventListener("load",function(){var e;i||(i=!0,e=(new Date).getTime()-n.startTime,setTimeout(function(){return t(e)},100))},!1)})}(t),P=new Sf({element:D,delegate:u,cssLoadedPromise:t}),M=P.store;D.classList.add("js-player-fullscreen");var N=P.expose,n=null,i=null,r=null,o=null,s=null,F=D.querySelector(".vp-controls"),q=D.querySelector(".vp-sidedock"),U=D.querySelector(".vp-title"),a=D.querySelector(".vp-cards-wrapper"),c=An.mobileAndroid||An.iPhone||An.windowsPhone||An.browser.bb10,l={tiny:Mc.Pl,mini:Mc.Nl,normal:Mc.Fl,none:Mc.Fl};function d(e){e&&void 0!==l[e]&&(P.events.fire(l[e]),D.classList.toggle("player-normal","normal"===e),D.classList.toggle("player-mini","mini"===e),D.classList.toggle("player-tiny","tiny"===e))}function f(t){Object.keys(Pl).forEach(function(e){return D.classList.toggle("player-".concat(e),t===e)})}function h(){var e=P.config.embed.settings,t=(1===P.config.view||3===P.config.view)&&e&&!e.playbar;D.classList.toggle("no-playbar",t),D.classList.toggle("with-fullscreen",!!e.fullscreen);t=e.custom_logo;D.classList.toggle("with-custom-logo",!!t),D.classList.toggle("with-sticky-custom-logo",t&&t.sticky),D.classList.toggle("hide-controls-mode",!!e.background||0===e.controls),D.classList.toggle("touch-support",An.touch)}function v(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:P.config.video.url;if(!(!t||e&&e.metaKey)){if(-1===t.indexOf("#")&&0<P.backbone.currentTime&&P.backbone.currentTime<P.config.video.duration-30&&!P.backbone.paused&&(t+="#at=".concat(Math.floor(P.backbone.currentTime))),!P.config.embed.on_site)return window.open(t),function(e){if(e&&0<e.detail)try{document.activeElement.blur()}catch(e){}}(e),P.events.fire(Mc.bc),!1;window.location=t}}function p(){!P.config.video.live_event||M.get(Ru)||M.get(Pu)?s&&(s.disable(),s=null):(s=new Qf(D,P,M),new ov(P,M))}function m(){function e(){return t=function(){var e,t,t=(e=tc(D),t=e.width,e=e.height,!c||e<=200?"10px":t<450?"12px":t<=1024?"11px":"10px");F.style.fontSize=t,q.style.fontSize=t,U.style.fontSize=t},(e=!(e=o)||!e.then?ee.resolve(e):e).then(t);var e,t}function t(r,o){return P.verifyConfig().then(function(){var e=P.config.request,t=e.signature,n=e.session,i=e.timestamp,e=e.expires;return qi("https://".concat(P.config.player_url,"/video/").concat(P.config.video.id,"/").concat(r,"?signature=").concat(t,"&session=").concat(n,"&time=").concat(i,"&expires=").concat(e),{method:o,withCredentials:!0})}).catch(function(e){iu.captureException(e,{extra:{action:r,method:o}})})}function n(r,o){return P.updatePhpTokens().then(function(){var e=("following"===r?P.config.video.owner:P.config.video).id,t=P.config.user.vimeo_api_interaction_tokens,n="";if(t)switch(n="?auth=",r){case"likes":n+=t.likes;break;case"watchlater":n+=t.watch_later;break;case"following":n+=t.following}var i=P.config.video.unlisted_hash&&"following"!==r?":".concat(P.config.video.unlisted_hash):"";return qi("https://".concat(P.config.vimeo_api_url,"/users/").concat(P.config.user.id,"/").concat(r,"/").concat(e).concat(i).concat(n),{method:o,jwt:P.config.user.vimeo_api_client_token}).catch(function(e){iu.captureException(e,{extra:{action:r,method:o}})})}).catch(function(e){iu.captureException(e)})}h(),o=new ee(function(e,t){function n(){clearTimeout(i),0<window.innerWidth&&0<window.innerHeight?e():i=setTimeout(n,250)}var i=null;P.events.once(Mc.be,n),P.events.once(Mc.nc,n)}),P.events.on(Mc.$c,function(e){return P.config.user.purchased?!P.config.video.vod.is_feature&&P.config.video.vod.feature_id?void P.loadVideo(P.config.video.vod.feature_id).then(function(){return P.events.fire(Mc.wc),P.config.video.vod.feature_id}).catch(function(e){iu.captureException(e),P.events.fire(Sc._showOverlay,"error",{title:"Sorry",message:"There was a problem. Please try again."})}):void P.events.fire(Mc.wc):void(P.config.video.vod&&P.config.video.vod.is_coming_soon?v(null,P.config.video.vod.url):P.performDelegateAction(Cc,function(){P.events.fire(Sc.Cs,"purchase",{productId:e})},[e]))}),P.events.on(Mc.Gc,function(){P.config.user.logged_in?P.config.user.id!==P.config.video.owner.id&&(P.config.user.liked?P.performDelegateAction(kc,function(){"disable"!==P.config.video.privacy?n("likes","DELETE"):t("like","DELETE"),P.config.user.liked=!1,P.events.fire(Mc.Tl)}):P.performDelegateAction(Ac,function(){"disable"!==P.config.video.privacy?n("likes","PUT"):t("like","PUT"),P.config.user.liked=!0,P.events.fire(Mc.El)})):P.performDelegateAction(Ic,function(){P.events.fire(Sc.Cs,"login-like")})}),P.events.on(Mc.Kc,function(){!P.config.video.url&&"unlisted"!==P.config.video.privacy||(P.config.user.logged_in?P.config.user.watch_later?P.performDelegateAction(Rc,function(){n("watchlater","DELETE"),P.config.user.watch_later=!1,P.events.fire(Mc.Al)}):P.performDelegateAction(Lc,function(){n("watchlater","PUT"),P.config.user.watch_later=!0,P.events.fire(Mc.Sl)}):P.performDelegateAction(Ic,function(){P.events.fire(Sc.Cs,"login-watch-later")}))}),P.events.on(Mc.Xc,function(){P.performDelegateAction(Oc,function(){P.config.video.vod&&P.config.video.vod.url?v(null,"".concat(P.config.video.vod.url,"#collections")):P.config.video.url&&v(null,"".concat(P.config.video.url,"#collections"))})}),P.events.on(Mc.Yc,function(){function e(){P.events.fire(Sc._showOverlay,"share",t)}var t=P.config.embed.settings.share&&P.config.embed.settings.share.embed_only;Kd.element?e():P.performDelegateAction(xc,e)}),P.events.on(Mc.Jc,function(){P.config.embed.settings.share.embed_only&&P.performDelegateAction(xc,function(){P.events.fire(Sc._showOverlay,"share",!0)})}),P.events.on(Mc.Zc,function(){if(P.config.user.logged_in&&P.config.user.id!==P.config.video.owner.id){if(P.config.user.following)return n("following","DELETE"),P.config.user.following=!1,void P.events.fire(Mc.tf);n("following","PUT"),P.config.user.following=!0,P.events.fire(Mc.Ql)}}),P.events.on(Mc.rc,function(){D.classList.add("player-ad")}),P.events.on([Mc.oc,Sc.Rs],function(){D.classList.remove("player-ad")}),P.events.on(Mc.qc,e),P.events.on(Mc.zc,e),window.addEventListener("orientationchange",e),c&&(D.classList.add("mobile"),e()),M.watch("ui.player.mode",d),M.watch("ui.player.breakpoint",f),function(){function n(){var e,t=D;return u&&u.getFullscreenElement&&"function"==typeof u.getFullscreenElement&&((e=u.getFullscreenElement())&&e instanceof HTMLElement&&e.contains(D)&&e.classList.contains("js-player-fullscreen")&&(t=e)),t}P.config.embed.fullscreen=!0,An.iPad&&D.classList.add("no-fullscreen-api-support");var e=P.config.embed.playsinline&&10<=An.iOS,e=An.iPad||e;Kd.enabled||e||(D.classList.add("no-fullscreen-support"),An.iOS||(P.config.embed.fullscreen=!1));var i=!1,r=!1,o=!1;P.events.on([Xo,Zo],function(){o=!0}),P.events.on(Sc.Vs,function(){Kd.enabled||Kd.videoEnabled(D)?(P.events.fire(Mc.Hc),r=!1,Kd.request(n())):P.events.fire(Sc.qs,!0)}),P.events.on(Mc.mc,function(){"picture-in-picture"===P.backbone.presentationMode&&P.events.fire(Sc.Ks),Kd.element?(P.events.fire(Mc.Wc),Kd.exit()):(P.events.fire(Mc.Hc),r=!0,Kd.request(n()))});var t,s,a=Kd.onenter,c=Kd.onexit;Kd.onenter=function(e){var t;i||(n().contains(e)?(t=e,o?o=!1:i||(i=!0,P.events.fire(Mc.qc,n()===t,r))):"function"==typeof a&&a(e))},Kd.onexit=function(){i?o?o=!1:i&&(i=!1,P.events.fire(Mc.zc,r),r||P.events.fire(Sc.qs,!1),r=!1):"function"==typeof c&&c()},Yu(D).on("click","a",function(e){Kd.element===n()&&Kd.exit()}),Yu(D).on("gestureend",function(e){1<e.scale&&P.events.fire(Mc.mc)}),"undefined"!=typeof MSGesture&&(t=1,Yu((s=new MSGesture).target=D).on("pointerdown",function(e){s.addPointer(e.pointerId)}).on(["MSGestureChange"],function(e){t*=e.scale}).on(["MSGestureEnd"],function(){(!i&&2<=t||i&&t<1)&&P.events.fire(Mc.mc),t=1}))}(),Af(D,"a[data-clip-link]",v),P.events.on(Sc.Ls,v),Af(D,"[data-track-click]",function(e){e=e.target.dataset.trackClick;P.events.fire(Mc.fc,e)}),p(),P.events.on(Mc.jl,function(){h(),p()}),P.events.on(Sc.Qs,function(){s.disable()})}function j(){n=n||new fh(P,M,D.querySelector(".vp-overlay-wrapper"))}function H(){i=i||new Nh(P,{uuid:P.uuid,id:D.id,isMobileDevice:!1})}function B(){r=r||new Fh(P)}t={initializationHandler:function(){return function(){j(),H(),B(),zf(P,M,F),Yf(P,M,D);var e=new Xh(P,M,D);rh(P,D.querySelector(".vp-notification-wrapper")),sh(P,M,D.querySelector(".vp-outro-wrapper")),Vh(P,q),E=P,w=U,_=!0,T=!1,S=!1,A=!1,k=!1,L=!1,R=!1,C=!0,x=!1,I=!1,O=!1,y(),E.events.on([Mc.gl,Mc.kl],g).on(Mc._l,b).on(Vo,function(){C=!(R=!0),g()}).on([Mc.wc,un.PLAY],function(){I=C=!1,g()}).on(Mc.tr,function(e,t){t||(C=!0,b())}).on(Mc.uc,function(){x=!0,g()}).on(Mc.xc,function(){O=C,I=!0}).on(Mc.Ac,function(){O&&(I=!1)}).on(Mc.Hc,function(){g()}).on(Mc.zc,function(e){e||b()}),Yu(w).on(["pointerenter","pointerleave","mouseenter","mouseleave"],function(e){"pointerType"in e?"mouse"!==e.pointerType&&e.pointerType!==e.MSPOINTER_TYPE_MOUSE||(T="pointerenter"===e.type||"MSPointerEnter"===e.type):T="mouseover"===e.type}),Yu(w).on("transitionend",function(e){"opacity"===e.propertyName&&w.classList.contains("invisible")&&(w.classList.add("hidden"),w.setAttribute("hidden",""))},!1),E.events.on(Mc.uc,function(e){g()}),E.events.on([Mc._f],function(){L=!0,b()}).on([Mc.kf],function(){L=!1,g()}),E.events.on(Mc.Qc,function(e){"not-supported"!==e&&"private-unlocked"!==e&&"help"!==e&&(T=!(S=!0),g())}).on(Mc.tl,function(){T=S=!1,setTimeout(b,0)}),E.events.on(Mc.Hl,function(e){T=!(A=!0),g()}).on(Mc.ql,function(){T=A=!1,setTimeout(b,0)}),E.events.on([Mc.Uc,Mc.Oc],function(e,t){t.isCentered()&&t.isVisible()&&(T=!(k=!0),g()),t.isCentered()&&t.isVisible()||(T=k=!1,b())}),E.events.on(Mc.jl,function(){y(),3===E.config.view&&b()}),E.events.on(Sc.Rs,function(){I=x=!(C=!(R=!1)),b()}),E.events.fire(Mc.cf),a=P,c=D,f=null,h=!1,t(),d=c.querySelector(".vp-unmute"),u=d,l=(d=a).events,d={title:An.touch?"Tap to Unmute":"Click to Unmute"},u.innerHTML=Hl.render("unmute_button",d),Af(u,n),Af(u,".vp-unmute-button",n),l.once(Mc.Bc,i),l.on(ts.EVENT_ENDED,o),a.events.on(Mc.jl,function(){t()}),a.events.on(Sc.Rs,function(){h=!1,t()}),Object.defineProperties(N,{pauseKeyboard:{enumerable:!0,value:e.pause},unpauseKeyboard:{enumerable:!0,value:e.unpause}});function t(){var e=c.querySelector(".vp-badge");return f=new Wh(a,e),e.innerHTML&&(16===a.config.embed.settings.badge.id?(f.show(),void a.events.on(Mc.Rc,function(e){e?f.show():f.hide()})):void a.events.on([Mc.wc,un.PLAY],function(){h&&f.hide()}).on(Vo,function(){h=!0,f.hide()}).on(Mc.uc,f.hide).on(Mc.Qc,function(e){"not-supported"!==e&&"private-unlocked"!==e&&"help"!==e&&f.hide()}).on(Mc.tl,function(){h||f.show()}))}function n(e){e.preventDefault(),l.fire(Sc.As,!1)}function i(){u.classList.add("invisible"),u.classList.remove("hidden"),u.removeAttribute("hidden"),setTimeout(function(){u.classList.remove("invisible")},0),l.once(Mc.ac,r)}function r(e){0<e&&!u.classList.contains("invisible")&&o()}function o(){Yu(u).on("transitionend",s),u.classList.add("invisible")}function s(){Yu(u).off("transitionend",s),u.classList.add("hidden"),u.setAttribute("hidden","")}var a,c,u,l,d,f,h;function v(){_=!1,w.classList.add("invisible")}function p(){w.classList.remove("hidden"),w.removeAttribute("hidden"),setTimeout(function(){_=!0,w.classList.remove("invisible")},0)}function m(){return S||A||k}function g(){_&&(m()||x?v():L||R&&(C&&T||v()))}function b(){var e;_||(!L||m()?C&&!I&&(x||(!R&&!m()||null!=(e=E.config.embed)&&e.settings.info_on_pause&&C&&!m())&&p()):p())}function y(){var e,t,n,i,r,o;1!==E.config.view&&3!==E.config.view||(i=!!E.config.embed.settings.byline,e=null!==E.config.video.owner.url,t=E.config.video.owner.url,n=0===E.config.embed.on_site,o=E.config.embed.settings.spatial_label,r=E.config.request.file_codecs||E.config.video.file_codecs,i={ClickTargets:_c,linkToOwner:e,ownerLink:t,targetBlank:n,showPortrait:!!E.config.embed.settings.portrait,portraitImg:E.config.video.owner[1<An.devicePixelRatio?"img_2x":"img"],showByline:i,portraitAlt:"Link to video owner's profile",showTitle:!!E.config.embed.settings.title,showTitleLink:null!==E.config.video.url,titleLink:E.config.video.url,title:E.config.video.title,is360:E.config.video.spatial&&o,hasHDR:void 0!==r&&0<r.hevc.hdr.length,strings:{}},E.config.embed.settings.byline&&(o="",null!=(r=E.config.embed.settings.byline_badge)&&r.type&&(o=Hl.render("title_byline_badge",{targetBlank:n,cssClass:r.type,link:r.url||!1,displayBadge:!E.config.video.live_event})),i.strings.byline="from "+Hl.render("title_owner_byline",{ClickTargets:_c,linkToOwner:e,ownerLink:t,targetBlank:n,owner:E.config.video.owner.name})+o),E.config.embed.settings.badge&&(i.showPortrait=!1),E.config.embed.autoplay&&(w.classList.add("hidden"),w.setAttribute("hidden","")),w.innerHTML=Hl.render("title",i))}var E,w,_,T,S,A,k,L,R,C,x,I,O}(),m(),ee.resolve()},postInitializationHandler:function(){return P.backbone&&(new Xf(D.querySelector(".vp-stats-debug"),P),Yh(P,M,a),new Qh(P,P.backbone,D)),ee.resolve()},authorizationHandler:function(e){e(),j(),H();var t="Error",n="Unhandled video privacy";switch(P.config.view){case 4:return new ee(function(t,e){P.events.fire(Sc._showOverlay,"password"),P.events.once(Mc.Ll,function(e){t(e)})});case 2:B();var i="private-locked",r=null;return P.config.user.logged_in&&(i="error",r={title:"Private Video",message:"Sorry, you donâ€™t have permission to watch.",modal:!0,logo:!!P.config.embed.settings.logo,icon:"lock"}),P.events.fire(Sc._showOverlay,i,r),ee.reject();case 7:t=P.config.title,n=P.config.message}return P.events.fire(Sc._showOverlay,"error",{title:t,message:n,modal:!0}),ee.reject()}};return P.init(e,t).then(function(){return 3!==P.config.view||P.config.embed.autoplay||P.events.fire(Sc._showOverlay,"private-unlocked"),!0}).catch(function(e){iu.captureException(e),j(),H(),D.classList.remove("loading"),P.events.fire(Mc.nc,Ec.id,Ec)}),N},e.requestModule=M,Object.defineProperty(e,"rh",{value:!0})}(this.window=this.window||{});
