define("modules/services/carousel/keyboardNavigationService",["jquery"],function(k){function i(t,x){var o;x=x||"a",t.on("refreshed.owl.carousel",function(t){var a;t.namespace&&((a=k(this).find(".owl-stage-outer")).off("keydown").on("keydown",function(t){if(27===t.which&&a.data("focus-active",!1),13===t.which){a.data("focus-active",!0);var e=k(t.target),i=(e.is(".owl-carousel")?e:e.parents(".owl-carousel")).data("owl.carousel"),e=(e=i&&i.settings?i.settings.items:void 0)||(i&&i.options?i.options.items:1),i=k(document.activeElement);if(1===e&&!i.is("button"))return a.find(".owl-item.active "+x).first().focus(),t.preventDefault(),void t.stopPropagation()}o=a.data("focus-active"),37!==t.which&&39!==t.which&&9===t.which&&o&&t.preventDefault(),o||a.find(".owl-item "+x).each(function(){k(this).attr("tabindex","-1")})}),a.off("keyup").on("keyup",function(t){if(9===t.which||37===t.which||39===t.which){var e=k(t.target),i=t.shiftKey,a=e.parents(".owl-carousel"),o=a.data("owl.carousel"),n=a.attr("data-cycle")&&"true"===a.attr("data-cycle").toLowerCase(),s=(s=o&&o.settings?o.settings.items:void 0)||(o&&o.options?o.options.items:1),c=k(document.activeElement),r=a.find(".owl-item.active").first();1<s&&i&&(r=a.find(".owl-item.active").last());var l,e=o.items().length,r=a.find(".owl-item").index(c.is(x)?c.parents(".owl-item"):r),d=0===r,f=r===e-1;if(a.find(".owl-stage-outer").data("focus-active")){switch(a.trigger("stop.owl.autoplay"),t.which){case 9:if(i){if(d)return a.find(".owl-stage-outer").focus(),void a.find(".owl-stage-outer").data("focus-active",!1);l="prev"}else if(d&&c.is(x))l="next";else if(d&&!c.is(x)){var u=a.find(".owl-item").first();if(!(0<u.has(x).length))return void a.find(".owl-nav button").first().focus();u.find(x).focus()}else{if(f&&!n)return a.find(".owl-nav button").first().focus(),void a.find(".owl-stage-outer").data("focus-active",!1);l="next"}break;case 37:l=d?void 0:"prev";break;case 39:l=f?void 0:"next"}"prev"===l&&(v=o,w=a,m=d,1===(p=s)?(v.prev(),w.data("direction","prev")):m||(h=k(document.activeElement),p=(g=w.find(".owl-item")).index(h.parents(".owl-item"))-1,m=!1,(m=h.parents(".owl-item").prev(".active").length<=0?!0:m)&&(w.data("direction","prev"),v.prev()),0<(p=g.eq(p)).has(x).length?p.find(x).focus():v.prev())),"next"===l&&(h=o,m=a,w=f,1===(g=s)?(h.next(),m.data("direction","next")):w?m.find(".owl-stage-outer").data("focus-active",!1):(p=k(document.activeElement),o=(v=m.find(".owl-item")).index(p.parents(".owl-item"))+1,s=v.length-1===o,w=!1,(w=p.parents(".owl-item").next(".active").length<=0&&(o%g==0||!s)||w)?(m.data("direction","next"),h.next()):0<(o=v.eq(o)).has(x).length&&o.find(x).focus()))}}var v,w,p,m,h,g}))}),t.on("translate.owl.carousel",function(t){var e,i;t.namespace&&(t=(e=(i=k(t.target)).is(".owl-carousel")?i:i.parents(".owl-carousel")).data("owl.carousel"),i=k(document.activeElement),(t&&t.settings?t.settings.items:void 0)||t&&t.options&&t.options.items,(i.is(".nfl-c-photo-album__next")||i.is(".nfl-c-photo-album__prev")||i.is(".owl-next")||i.is(".owl-prev"))&&e.data("navigation-click",!0))}),t.on("translated.owl.carousel",function(t){var e,i;t.namespace&&(t=(e=(i=k(t.target)).is(".owl-carousel")?i:i.parents(".owl-carousel")).find(".owl-stage-outer"),((i=e.data("owl.carousel"))&&i.settings?i.settings.items:void 0)||i&&i.options&&i.options.items,t.data("focus-active")&&("next"!==e.data("direction")||e.data("navigation-click")||e.find(".owl-item.active").first().find(x).focus(),"prev"!==e.data("direction")||e.data("navigation-click")||e.find(".owl-item.active "+x).focus(),e.data("navigation-click",!1)))})}return{init:function(t,e){i(t,e)}}});
