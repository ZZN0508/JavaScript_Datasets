var link,FDX=FDX||{};FDX.SECUREPAGECHECK={loginDropdownClass:"fxg-dropdown-js",loginOpenClass:"fxg-dropdown__item--open",homePageURL:"",getHomePage:function(){return window.location.origin+FDX.contextPath+("/"+FDX.DATALAYER.page.pageInfo.locale.replace("_","-")+"/")+"home.html"},checkCookie:function(e){e+="=";for(var t=document.cookie.split(";"),o=0;o<t.length;o++){for(var n=t[o];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(e))return n.substring(e.length,n.length)}return null},authenticatePageURL:function(){var e=window.location.href;sessionStorage.setItem("requestURL",e);var t=window.location.origin+FDX.contextPath,o="/"+FDX.DATALAYER.page.pageInfo.locale.replace("_","-")+"/";FDX.SECUREPAGECHECK.homePageURL=t+o+"home.html",t=FDX.DATALAYER.page.pageInfo.wlgnURL.indexOf("https://")<0?t+FDX.DATALAYER.page.pageInfo.wlgnURL:FDX.DATALAYER.page.pageInfo.wlgnURL,void 0!==FDX.DATALAYER.page.pageInfo.securePage&&null!==FDX.DATALAYER.page.pageInfo.securePage&&"true"===FDX.DATALAYER.page.pageInfo.securePage&&e!==FDX.SECUREPAGECHECK.homePageURL&&(sessionStorage.setItem("redirectURL",e),FDX.DATALAYER.page.pageInfo.wlgnURL&&"true"==FDX.DATALAYER.page.pageInfo.useWLGN&&null!==sessionStorage.getItem("requestURL")?(window.open(t,"_self"),sessionStorage.setItem("securePageRequest",!0)):null!==sessionStorage.getItem("requestURL")&&(window.open(FDX.SECUREPAGECHECK.homePageURL,"_self"),sessionStorage.setItem("securePageRequest",!0)))},clearSessionStorage:function(){null!==sessionStorage.getItem("securePageRequest")&&(sessionStorage.removeItem("redirectURL"),sessionStorage.removeItem("securePageRequest"),sessionStorage.removeItem("requestURL"),sessionStorage.removeItem("userLoginformActive"))},loginOpen:function(){$(document).width()<=FDX.BREAKPOINTS.TabletMediaQuery&&setTimeout(function(){$("input#NavLoginUserId.fxg-field__input-text.fxg-field__input--required").trigger("focus")},500)}},$(document).ready(function(e){FDX.LOGINCHECK.userAuthenticated||null===sessionStorage.getItem("securePageRequest")||"true"!==sessionStorage.getItem("securePageRequest")||sessionStorage.getItem("requestURL")!==FDX.SECUREPAGECHECK.homePageURL||null!==FDX.SECUREPAGECHECK.checkCookie("wcmmode")||($(document).width()<=FDX.BREAKPOINTS.TabletMediaQuery&&setTimeout(function(){$(".fxg-user-options__icon").trigger("click"),sessionStorage.setItem("userLoginformActive",!0),e(FDX.SECUREPAGECHECK.loginOpen)},100),$(document).width()>=FDX.BREAKPOINTS.TabletMediaQuery&&setTimeout(function(){$("."+FDX.DROPDOWN.dropdownClass).trigger("click"),sessionStorage.setItem("userLoginformActive",!0),$("input#NavLoginUserId").focus()},100))}),(FDX=FDX||{}).LOGINCHECK={userAuthenticated:!1,apiURL:"",clientID:"",apiConfigURL:"/etc/services/getapigconfigs",loginCookie:0<document.cookie.indexOf("fdx_login"),fName:0<document.cookie.indexOf("fcl_contactname"),checkCookie:function(e){e+="=";for(var t=document.cookie.split(";"),o=0;o<t.length;o++){for(var n=t[o];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(e))return n.substring(e.length,n.length)}return null},secureIsLoggedIn:function(){$.ajax({type:"GET",url:"https://"+FDX.LOGINCHECK.apiURL+"/user/v2/login",xhrFields:{withCredentials:!0},cache:!1,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+FDX.LOGINCHECK.clientID,"X-locale":"en_US","X-loggedin":"true","X-version":"1.0","X-clientid":"WCDO"},success:function(e){FDX.CLIENTLOGIN.isLoggedInResponse=e,FDX.CLIENTLOGIN.userLoggedIn=FDX.CLIENTLOGIN.isLoggedInResponse.output.userLoggedIn,FDX.CLIENTLOGIN.userLoggedIn?(FDX.LOGINCHECK.userAuthenticated=!0,localStorage.setItem("userAuthenticated",FDX.LOGINCHECK.userAuthenticated)):(FDX.LOGINCHECK.userAuthenticated=!1,localStorage.setItem("userAuthenticated",FDX.LOGINCHECK.userAuthenticated),null!==FDX.SECUREPAGECHECK.checkCookie("wcmmode")||-1!=window.top.location.href.indexOf("/editor.html/")||null!=localStorage.getItem("userAuthenticated")&&"true"===localStorage.getItem("userAuthenticated")||FDX.SECUREPAGECHECK.authenticatePageURL())},error:function(e,t,o){FDX.LOGINCHECK.userAuthenticated=!1,localStorage.setItem("userAuthenticated",FDX.LOGINCHECK.userAuthenticated),null!==FDX.SECUREPAGECHECK.checkCookie("wcmmode")||-1!=window.top.location.href.indexOf("/editor.html/")||null!=localStorage.getItem("userAuthenticated")&&"true"===localStorage.getItem("userAuthenticated")||FDX.SECUREPAGECHECK.authenticatePageURL()}})},getLogin:function(){var e=window.location.host.split(".",1),t=FDX.LOGINCHECK.apiConfigURL+".jsonp";"www"!=e[0]&&(t=FDX.LOGINCHECK.apiConfigURL+"."+e[0]+".jsonp"),$.when($.ajax(t)).then(function(e,t,o){FDX.LOGINCHECK.apiURL=e.apigURL,FDX.LOGINCHECK.clientID=e.clientID,FDX.LOGINCHECK.secureIsLoggedIn()})}},void 0!==FDX&&-1==window.top.location.href.indexOf("/editor.html/")&&null!==FDX.DATALAYER.page.pageInfo.securePage&&(("true"===FDX.DATALAYER.page.pageInfo.securePage||"true"===FDX.DATALAYER.page.pageInfo.useWLGN&&null!==sessionStorage.getItem("secureLink"))&&FDX.LOGINCHECK.loginCookie&&FDX.LOGINCHECK.fName?("true"===FDX.DATALAYER.page.pageInfo.useWLGN&&null!==sessionStorage.getItem("secureLink")&&(link=sessionStorage.getItem("secureLink"),sessionStorage.removeItem("secureLink"),window.open(link,"_self","",!0)),FDX.LOGINCHECK.getLogin()):(FDX.LOGINCHECK.userAuthenticated=!1,localStorage.setItem("userAuthenticated",FDX.LOGINCHECK.userAuthenticated),null!==FDX.SECUREPAGECHECK.checkCookie("wcmmode")||-1!=window.top.location.href.indexOf("/editor.html/")||null!=localStorage.getItem("userAuthenticated")&&"true"===localStorage.getItem("userAuthenticated")||FDX.SECUREPAGECHECK.authenticatePageURL())),$(document).ready(function(){});
