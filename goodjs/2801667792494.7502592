YUI.add("stencil-base",function(f,e){"use strict";var u,h,t,v,c,p,g,d,E,n,i,m=["click"],b="delayed-mouseleave",y=f.config.doc,N=f.one(y.documentElement),o=f.one(window),T=f.one(y.body),S=null,r="[data-plugin]",L=[],w=0,P=S,A=[],_=window.navigator.pointerEnabled||window.navigator.msPointerEnabled;f.Node.DOM_EVENTS&&(f.Node.DOM_EVENTS=f.merge(f.Node.DOM_EVENTS,{transitionend:1,webkitTransitionEnd:1,oTransitionEnd:1,otransitionend:1,pointerover:1,pointerout:1,pointerenter:1,pointerleave:1})),o.after("scroll",function(){clearTimeout(n),n=setTimeout(t,100)}),t=function(){2<(y.documentElement&&y.documentElement.scrollTop||y.body.scrollTop)?N.addClass("has-scrolled"):N.removeClass("has-scrolled")},i=function(){var e,t,n,i;N.hasClass("stencil-no-touch")&&(t=f.Node.create('<div id="MouseoverMask" class="End-0 Start-0 T-0 B-0"></div>'),n=!1,i=function(){clearTimeout(e),n||(n=!0,N.addClass("Scrolling")),e=setTimeout(function(){n=!1,N.removeClass("Scrolling")},350)},t.appendTo(y.body),window.addEventListener?window.addEventListener("scroll",i,!1):window.attachEvent&&window.attachEvent("scroll",i))},h=function(e,t){var n,i,o,r,s=[e];for(0===e.indexOf("MSPointer")?(i=e.substr(9).toLowerCase(),s.push("pointer"+i,"mouse"+i)):0===e.indexOf("pointer")?(i=e.substr(7),s.push("mouse"+i)):0===e.indexOf("mouse")&&(i=e.substr(5),s.push("pointer"+i)),s.push("default"),o=0,r=s.length;o<r&&!(n=t[s[o]]);o+=1);return n},u=function(e,t){var n,i,o,r,s,a,l,u,c=t.NS,g=e.currentTarget,d=e.type;if(g[c]||g.plug(t),(n=g[c]).shouldHandleEvent(e))if(n.handleEvent)n.handleEvent(e);else if(s=g.getData(t.PLUGIN_NAME))for(a=0,l=(s=!(s="string"==typeof s?f.JSON.parse(s):s).length?[s]:s).length;a<l;a+=1)u=S,o=s[a],r=n.getTargets(o,g),(i=h(d,o))&&(i.preventDefault&&e.preventDefault(),"number"==typeof(u="mouseleave"===d||"pointerleave"===d||"MSPointerLeave"===d?void 0===o["mouseleave-delay"]?t.MOUSELEAVE_DELAY:o["mouseleave-delay"]:u)?(r.setData(b,!0),f.later(u,n,v,[r,i,e])):("mouseenter"!==d&&"pointerenter"!==d&&"MSPointerEnter"!==d||r.clearData(b),n.execute(r,i,e)));else n.execute(S,S,e)},v=function(e,t,n){0<=f.Array.indexOf(e.getData(b),!0)&&(e.clearData(b),this.execute(e,t,n))},c=function(e,t,n){var i,o=Array.prototype.slice.call(arguments,2),r=e.NS;return this.getNodeList(n).plug(e).each(function(e){o[0]=f.Stencil.getNodeList(o[0]),e[r][t]?e[r][t].apply(e[r],o):e[r].execute&&((i={})[t]=o[1],o[1]=i,e[r].execute.apply(e[r],o))})},p=function(e){var t;return e=e||y.body,t=(e=f.one(e)).all(r),e.test(r)&&t.push(e),t},g=function(e,t,n,i){var o=t.getDOMNode(),e=e.target||e.srcElement;if(o!==e&&!o.contains(e)&&("DIV"!==e.tagName||void 0!==e.attributes.tabIndex))if(i)i.call(this,f.Stencil.getNodeList(t));else try{n.focus()}catch(e){}},f.Stencil={Plugins:{},Hosts:{},initPlugin:function(e,t){return this.initAll(t,[e])},initPlugins:function(e,t){var n,i,o,r;if(f.Lang.isArray(t)&&0!==t.length){for(n=[],i=0,o=t.length;i<o;i+=1)r="string"==typeof t[i]?t[i]:t[i].PLUGIN_NAME,n.push(r);this.initAll(e,n)}},initAll:function(e,t){var n,i,o,r,s,a,l,u,c,g,d={},h=/\s+/;if(e=e||y.body,e=f.one(e),f.Lang.isArray(t)){if(0===t.length)return;for(g={},o=0,r=t.length;o<r;o+=1)g[t[o]]=1;t=g}else t=void 0;for(o=0,r=(n=p(e)).size();o<r;o+=1)for(a=0,l=(s=(i=n.item(o)).getAttribute("data-plugin").trim().split(h)).length;a<l;a+=1)u=s[a],void 0!==t&&!t[u]||((c=this.Plugins[u])?(c.requiresInit||i.hasAttribute("data-trigger"))&&setTimeout(f.bind(i.plug,i,c),0):d["stencil-"+u]=1);if(0<L.length)for(o=0,r=L.length;o<r;o+=1)u=L[o],void 0!==t&&!t[u]||(c=this.Plugins[u],e.unplug(c).plug(c));0<(d=f.Object.keys(d)).length&&f.use(d)},registerPlugin:function(e,t){var n,i,o,r,s,a,l=t.toLowerCase();if(this.Plugins[l])return!1;if(e.PLUGIN_NAME||(e.PLUGIN_NAME=l),e.defaultTriggerEvents||(e.defaultTriggerEvents=m),this.Plugins[l]=e,!N.hasClass(s="stencil-plugin-"+l)){for(r=function(e,t,n){return!!new RegExp("\\b"+n.PLUGIN_NAME+"\\b").test(e.getAttribute("data-plugin"))&&e},n=0,i=(a=e.prototype.getDefaultTriggerEvents()).length;n<i;n+=1)o=a[n],f.delegate(s+"|"+o,u,N,r,this,e);N.addClass(s)}return this[t]=f.bind(c,this,e),e.initOnRootOnly&&L.push(l),w&&(A.push(l),P=P||f.later(0,this,function(){this.initAll(T,A),A=[],P=S})),!0},getNodeList:function(e){return"string"==typeof e?f.all(e):e instanceof f.NodeList?e:new f.NodeList(e)}},f.Stencil.BasePlugin=function(e){var t,n,i,o,r,s,a=e.host,l=this.constructor;for(this.host=a,this._node=a,this._superclass=this.constructor.superclass,r="stencil-"+l.PLUGIN_NAME,t=this.getTriggerEvents(),s=this.getDefaultTriggerEvents(),i=0,o=t.length;i<o;i+=1)n=t[i],-1===f.Array.indexOf(s,n)&&a.on(r+"|"+n,u,this,l)},f.Stencil.BasePlugin.prototype={destroy:function(){this.host=S,this._node=S},execute:function(e,t,n){if(t)if("string"==typeof t)this[t]&&this[t](e,{},n);else for(var i in t)t.hasOwnProperty(i)&&this[i]&&this[i](e,t[i],n)},normalizeEvents:function(e){var t,n,i,o,r,s,a,l=[];if(_)for(o=/^(?:mouse|pointer)(\w)(\w+)/,r=window.navigator.msPointerEnabled&&!window.navigator.pointerEnabled,s=r?"MSPointer":"pointer",i=function(e,t,n){var i=t+n;return!r||"leave"!==i&&"enter"!==i?s+(r?t.toUpperCase():t)+n:"mouse"+i},t=0,n=e.length;t<n;t+=1)a=e[t],l.push(a.replace(o,i));else if(Modernizr.touch)for(t=0,n=e.length;t<n;t+=1)"mouse"!==(a=e[t]).substr(0,5)&&l.push(a);else l=e;return l},getDefaultTriggerEvents:function(){return this.normalizeEvents(this.constructor.defaultTriggerEvents)},getTriggerEvents:function(){var e=this._node.getData("trigger");return e?"string"==typeof e&&(e=this.normalizeEvents(e.split(" ")),this._node.setData("trigger",e)):e=this.getDefaultTriggerEvents(),e},getTargets:function(e,t){var n,i=new f.NodeList;return t=t||this._node,(e=e||{}).target&&(i=i.concat(f.all(e.target)),n=!0),e["target-child"]&&(i=i.concat(t.all(e["target-child"])),n=!0),e["target-ancestor"]&&(i=i.concat(t.ancestor(e["target-ancestor"],!0)),n=!0),e["target-sibling"]&&(i=i.concat(t.get("parentNode").all(e["target-sibling"])),n=!0),t.getAttribute("data-target")&&(i=i.concat(f.all(t.getAttribute("data-target"))),n=!0),i=0===i.size()&&!n?i.concat(t):i},shouldHandleEvent:function(e){var t=this.constructor.NS,n=e.type,i=void 0!==e._event.pointerType,o="click"===e.type||"dblclick"===e.type,e=i&&(e._event.pointerType===e._event.MSPOINTER_TYPE_MOUSE||"mouse"===e._event.pointerType);return-1<f.Array.indexOf(this._node[t].getTriggerEvents(),n)&&(!i||o||i&&e)},processSources:function(e,n){return f.Stencil.Source&&f.Stencil.getNodeList(e).each(function(e){var t;e.hasAttribute("data-source-plugin")&&(t=f.Stencil.Plugins.source,e.plug(t),e[t.NS].execute(f.Stencil.getNodeList(e),n))}),this},focus:function(t,e,n,i){var o,r,s,a,l,u=[];if(t&&"BODY"!==(t=f.one(t)).get("tagName")){e=e?f.one(e):t,i=void 0===i||i,d=E?this.releaseFocus(E):document.activeElement;try{e.focus()}catch(e){}return i&&(o=f.rbind(g,this,t,e,n),r=!1,s=setTimeout(f.bind(function(){y.addEventListener?y.addEventListener("focus",o,!0):y.attachEvent&&y.attachEvent("onfocusin",o),r=!0},this),0),u.push(function(){r?y.removeEventListener?y.removeEventListener("focus",o,!0):y.detachEvent&&y.detachEvent("onfocusin",o):clearTimeout(s)})),n&&(a=f.one(y.body).on("click",function(e){t.contains(e.target)||this._node.compareTo(e.target)||this._node.contains(e.target)||n.call(this,f.Stencil.getNodeList(t))},this),l=f.one(y).on("keydown",function(e){27===e.keyCode&&n.call(this,f.Stencil.getNodeList(t))},this),u.push(function(){a.detach(),l.detach()})),t.setData("focus-mgmt-unsubscribers",u),E=t,e}},releaseFocus:function(e){var t,n;if(e!==E)return d;if(t=e.getData("focus-mgmt-unsubscribers")){for(n=0;n<t.length;n+=1)t[n].call();if(e.setData("focus-mgmt-unsubscribers",S),d&&"HTML"!==d.tagName&&"BODY"!==d.tagName)try{d.focus()}catch(e){}E=S}return d}},f.on("domready",function(){w=1,t(),i(),f.Stencil.initAll()},this)},"@VERSION@",{requires:["stencil","yui-base","event-base","event-delegate","event-mouseenter","json-parse","dom-base","node-base","node-pluginhost","selector"]});
