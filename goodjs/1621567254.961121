(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{408:function(e,t,n){"use strict";var r=n(109),o=n(2),c=[],d="@@clickoutsideContext";/(android)|(like mac os x)/i.test(navigator.userAgent)?Object(r.g)(document,"touchend",(function(e){c.forEach((function(t){return t[d].documentHandler(e,void 0)}))})):Object(r.g)(document,"click",(function(e){c.forEach((function(t){return t[d].documentHandler(e,void 0)}))})),t.a=o.default.directive("clickOutside",{bind:function(e,t,n){var r=c.push(e)-1;e[d]={id:r,documentHandler:function(r){!n.context||e.contains(r.target)||n.context.popperElm&&n.context.popperElm.contains(r.target)||(t.expression&&e[d].methodName&&n.context[e[d].methodName]?n.context[e[d].methodName]():e[d].bindingFn&&e[d].bindingFn())},methodName:t.expression,bindingFn:t.value}},update:function(e,t){e[d].methodName=t.expression,e[d].bindingFn=t.value},unbind:function(e){for(var t=c.length,i=0;i<t;i++)if(c[i][d].id===e[d].id){c.splice(i,1);break}}})},958:function(e,t,n){"use strict";(function(e){n(37),n(23),n(22),n(44),n(38);var r=n(1),o=n.n(r),c=(n(12),n(4),n(56),n(14),n(3)),d=n(448),l=n(9),f=(n(214),n(429)),h=n(18),m=n(396),v=n(456),I=n(434),y=n(398);function O(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function k(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?O(Object(source),!0).forEach((function(t){Object(l.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):O(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}function j(e){return["dianying","dianshiju","zongyi","jilupian","dongman","ertong","yule","tiyu"].indexOf(e)>=0}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"horizon";switch(e){case"horizon":return{pictype:"h284",defsize:"480_270"};case"vertical":return{pictype:"v255",defsize:"260_360"};case"carousel":return{pictype:"h480x360",defsize:"456_318"}}}t.a={props:{cacheKey:{type:String,default:""},titleInfo:{type:Object,default:function(){return{}}},videosData:{type:Array,default:function(){return[]}},itemType:{type:String,default:"vertical"},isWrap:{type:Boolean,default:!1},tonglanId:{type:String,default:""},loadNum:{type:Number,default:10},loadMore:{type:Number,default:1},areaKey:{type:String,default:""},resourceId:{type:Number,default:0},_qsRequestId:{type:String,default:""},rows:{type:Array,default:function(){return[7]}},carouselConfig:{type:Object,default:function(){return{}}},biAfter:{type:Boolean,default:!1},lazyLoad:{type:Boolean,default:!1}},data:function(){return{recConfig:{dianying:{popup:{enableVfrm:!0,needPopup:j("dianying"),rseatPrefix:"711219_home_dianying_float",popupType:"homecard",popupOffsetLeft:10,popupOffsetTop:10,block:"L",tonglanId:"dianying"}},dianshiju:{popup:{enableVfrm:!0,needPopup:j("dianshiju"),rseatPrefix:"711219_home_dianshiju_float",popupType:"homecard",popupOffsetLeft:10,popupOffsetTop:10,block:"O",tonglanId:"dianshiju"}},zongyi:{popup:function(e){return{enableVfrm:!0,needPopup:e.position>2&&j("zongyi"),rseatPrefix:"711219_home_zongyi_float",popupType:"homecard",popupOffsetLeft:10,popupOffsetTop:10,block:"G",tonglanId:"zongyi"}}},yule:{popup:{enableVfrm:!0,needPopup:j("yule"),rseatPrefix:"711219_home_yule_float",popupType:"homecard",popupOffsetLeft:10,popupOffsetTop:10,block:"J",tonglanId:"yule"}},tiyu:{popup:{enableVfrm:!0,needPopup:j("tiyu"),rseatPrefix:"711219_home_tiyu_float",popupType:"homecard",popupOffsetLeft:10,popupOffsetTop:10,block:"AW",tonglanId:"tiyu"}},dongman:{popup:function(e){return{enableVfrm:!0,needPopup:e.position>2&&j("dongman"),rseatPrefix:"711219_home_dongman_float",popupType:"homecard",popupOffsetLeft:10,popupOffsetTop:10,block:"P",tonglanId:"dongman"}}},ertong:{popup:function(e){return{enableVfrm:!0,needPopup:e.position>2&&j("ertong"),rseatPrefix:"711219_home_ertong_float",popupType:"homecard",popupOffsetLeft:10,popupOffsetTop:10,block:"Q",tonglanId:"ertong"}}},jilupian:{popup:{enableVfrm:!0,needPopup:j("jilupian"),rseatPrefix:"711219_home_jilupian_float",popupType:"homecard",popupOffsetLeft:10,popupOffsetTop:10,block:"AU",tonglanId:"jilupian"}}},videos:[],videoSize:0,timer:null,hasLoadPage:0,loadPageNum:0,swapBIVideos:[],BIPingback:{bkt:"",e:"",r_area:"",rpage:"pcw_home"},positionInfo:{isInscreen:!1,border:300},hasInit:!1,resourceSize:0,carouselVideos:[],reqLock:!1,filterList:[],totalNum:50,loadEnd:!1,unFirstScreenLegoData:[],isFirstSlide:!0}},created:function(){if(this.isServerRender){var e=this.resourceDataHandler(this.videosData[0]),t=this.recDataHandler(this.videosData[1],this.loadNum);if(!e.length||!this.biAfter&&!t.length)return void(this.videos=[]);this.initDataHandler([e,t])}else this.videos=Object(I.f)(this.rows),this.carouselVideos=Object(I.f)([1]),window&&window.scrollTo(0,window.scrollY+1),window&&window.scrollTo(0,window.scrollY-1)},computed:{isServerRender:function(){return["dianying","dianshiju","zongyi"].indexOf(this.tonglanId)>=0},videosInRow:function(){var t=this;if(this.videos.length){var n=[],r=0;this.rows.map((function(e){return r+=e})),this.videoSize=r;var o=this.videos.filter((function(e){return e}));return o.map((function(e,n){e.itemType=t.itemType;var r,o=e.rank,c=void 0===o?"":o,d=e.videoId,l=void 0===d?"":d,f=e.isVipOnly,h=void 0===f?"":f,m=e.channelId,v=void 0===m?"":m,I=e.source,source=void 0===I?"":I,y=e.originI,O=void 0===y?"":y,j=e.stype,w=void 0===j?0:j,x=e.payMark,P=e.itemId,_=void 0===P?"":P,N=e.order,T=void 0===N?"":N,L=e.list,S=void 0===L?{}:L;r=0===parseInt(S.payMark)?0:1;var D=2===w?h:r;e.isBI=!0,e.BIClickPingback=k(k({},t.BIPingback),{},{t:20,rankArr:c||T,itemListArr:l||_,isVipArr:D,channelIdArr:v||S.channelId,rSourceArr:source,rOriginlArr:O,sTypeArr:w,block:t.rseatPrefix})})),e.chunk(o,r).map((function(e){var o=0,c=e.length;c<r?t.rows.map((function(r,d){var l=c/t.rows.length;n[d]=(n[d]||[]).concat(e.slice(o,o+l)),o+=l})):t.rows.map((function(t,r){n[r]=(n[r]||[]).concat(e.slice(o,o+t)),o+=t}))})),this.biAfter||(2===n.length?n[1]=this.swapBIVideos.concat(n[1]):n[0]=[].concat(Object(d.a)(n[0].slice(0,3)),Object(d.a)(this.swapBIVideos),Object(d.a)(n[0].slice(3)))),n.map((function(e){return t.videosInRowFormatter(e)}))}},carouselNum:function(){return this.carouselConfig.carouselNum||0}},watch:{"positionInfo.isInscreen":{handler:function(){this.isServerRender||this.initData()}}},methods:{initData:function(){var e=this;return Object(c.a)(o.a.mark((function t(){var data;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([new Promise((function(t,n){try{t(e.getResourceData())}catch(e){t([])}})),new Promise((function(t,n){try{t(e.getRecData(e.loadNum))}catch(e){t([])}}))]);case 2:if((data=t.sent)[0].length&&data[1].length){t.next=6;break}return e.videos=[],t.abrupt("return");case 6:e.initDataHandler(data);case 7:case"end":return t.stop()}}),t)})))()},initDataHandler:function(data){var e=this,t=(this.carouselVideos||[]).concat(data[0]).map((function(t){var n=(t.list||"").albumId||t.itemId;return n>0&&-1===e.filterList.indexOf(n)&&e.filterList.push(n),n}));data[1]=data[1].filter((function(e){return-1===t.indexOf(e.albumId)})),data[1].length?(this.swapBIVideos=data[1].slice(0,2).map((function(t){return t.itemType=e.itemType,t})),this.biAfter?this.videos=data[0]:this.videos=data[0].concat(data[1].slice(2))):["dianying","dianshiju"].indexOf(this.tonglanId)>=0?(this.videos=data[0].slice(0,12),this.unFirstScreenLegoData=data[0].slice(12,data[0].length)):"zongyi"===this.tonglanId?(this.videos=data[0].slice(0,8),this.unFirstScreenLegoData=data[0].slice(8,data[0].length)):this.videos=data[0],this.loadPageNum=this.loadMore,this.hasInit=!0},getResourceData:function(){var e=this;return Object(c.a)(o.a.mark((function t(){var data;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.getResourceData(e.resourceId,{qsRequestId:e.qsRequestId});case 2:return data=t.sent,t.abrupt("return",e.resourceDataHandler(data));case 4:case"end":return t.stop()}}),t)})))()},resourceDataHandler:function(){var data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!(data=e.get(data,"data.items",[])).length)return this.videos=[],[];data.map((function(e){return e.stype=1,e})),this.resourceSize=data.length;var t=data.slice(this.carouselNum);return this.carouselVideos=data.slice(0,this.carouselNum),this.carouselVideos.map((function(e){return e.picSize="horizon",e})),this.carouselVideos=this.videosInRowFormatter(this.carouselVideos),t},getRecData:function(e){var t=this;return Object(c.a)(o.a.mark((function n(){var r,c,data;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=[],t.reqLock){n.next=8;break}return t.reqLock=!0,c={area_list:t.areaKey,is_vip:t.$store.state.loginUser.hasLogin&&Object(f.a)(t.$store.state.loginUser.userInfo)?1:-1,ret_num_list:e,filter_list:t.filterList.join(",")},n.next=6,v.a.getHomeChannelCardRecmdVideos(c);case 6:data=n.sent,r=t.recDataHandler(data,e);case 8:return n.abrupt("return",r);case 9:case"end":return n.stop()}}),n)})))()},recDataHandler:function(){var e=this,data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=((data=data.data&&data.data[this.areaKey]||{}).list||[]).filter((function(t){return-1===e.filterList.indexOf(t.albumId)}));if(!this.biAfter&&!n.length)return this.videos=[],[];n.map((function(e){return e.stype=2,e}));var r=data.pingback||{};if(this.BIPingback={bkt:r.bucket||"",e:r.eventId||"",r_area:r.recArea||"",rpage:"pcw_home"},t===this.totalNum){var o=n.concat(this.videos).length%this.rows.length;o>0&&(n=n.slice(0,n.length-o))}else n.map((function(t){var n=t.albumId;-1===e.filterList.indexOf(n)&&e.filterList.push(n)}));return this.reqLock=!1,n},slide:function(slot,e){var t=this;return Object(c.a)(o.a.mark((function n(){var r,c,d,l,f,m,v,data,I;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=slot.restNum,c=slot.pageSize,d=slot.next,l=slot.prev,f=slot.startIndex,m=slot.endIndex,v=slot.itemNums,t.isFirstSlide&&(t.videos=t.videos.concat(t.unFirstScreenLegoData),t.isFirstSlide=!1),!e){n.next=14;break}if(!(c>r)||t.loadEnd){n.next=9;break}return n.next=6,t.getRecData(t.totalNum);case 6:(data=n.sent).length<c&&(t.loadEnd=!0),t.videos=t.videos.concat(data);case 9:(r-c)/c<t.loadMore&&t.loadPageNum<t.loadMore&&t.loadPageNum++,d(t.loadEnd),c>r&&!t.loadEnd&&(t.loadEnd=!0),n.next=15;break;case 14:l();case 15:I=t.getBIShowPbParmas({isNext:e,startIndex:f,endIndex:m,itemNums:v}),Object(h.d)(I);case 17:case"end":return n.stop()}}),n)})))()},getBIShowPbParmas:function(){var param=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=param.isNext,t=param.startIndex,n=param.endIndex,r=param.itemNums,o=param.isInit,c=[],d=[],l=[],f=[],h=[],m=[],v=[],I=0,y=0;o?(I=0,y=r-1):(I=e?t+r:t-r,y=e?n+r:n-r);var O=this.videosInRow.map((function(e){return(e||[]).slice(I,y+1)}));return((O=O.flat())||[]).map((function(e){var t,n=e.rank,r=void 0===n?"":n,o=e.videoId,I=void 0===o?"":o,y=e.isVipOnly,O=void 0===y?"":y,k=e.channelId,j=void 0===k?"":k,w=e.source,source=void 0===w?"":w,x=e.originI,P=void 0===x?"":x,_=e.stype,N=void 0===_?0:_,T=e.payMark,L=e.itemId,S=void 0===L?"":L,D=e.order,z=void 0===D?"":D,V=e.list,A=void 0===V?{}:V;t=0===parseInt(A.payMark)?0:1;var B=2===N?O:t;c.push(r||z),d.push(I||S),l.push(B),f.push(j||A.channelId),h.push(source),m.push(P),v.push(N)})),k(k({},this.BIPingback),{},{t:21,rankArr:c.join(","),itemListArr:d.join(","),isVipArr:l.join(","),channelIdArr:f.join(","),rSourceArr:h.join(","),rOriginlArr:m.join(","),sTypeArr:v.join(","),block:this.rseatPrefix})},videosInRowFormatter:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(n.length)return n.map((function(video){var n=video.commonList,r=video.list||{},o="yule"===t.tonglanId,c="zongyi"===t.tonglanId;if(n){var d=video.imageUrl;if(!d&&r&&r.imageUrl||o){var l=w(video.picSize||t.itemType);d=Object(y.c)(r.imageUrl||n.imageUrl,l.pictype,{need2x:!0,entity:video,defsize:l.defsize})}var meta=1!==r.channelId&&Object(I.b)(r)||"",f=meta.replace("æ›´æ–°","");return{pos:video.pos,name:o&&(r.name||r.albumName)||n.name,pageUrl:n.url,imageUrl:d,description:n.description||"ä¸ºä½ æŽ¨è",isEpisode:Object(I.i)(r),tvId:r.tvId||(r.sourceId?e.get(r,"firstVideo.tvId"):e.get(r,"latestVideo.tvId")),isVideo:r.tvId,albumId:r.albumId,cornerMark:Object(I.a)(r,video),meta:meta,updateInfo:f,score:1===r.channelId&&Object(I.c)(r)||"",channelId:r.channelId,isBI:video.isBI,BIClickPingback:video.BIClickPingback,itemType:video.itemType}}var h=1!==video.channelId&&Object(I.b)(video)||"",m=h.replace("æ›´æ–°",""),v="",O=video.focus||video.albumName||"ä¸ºä½ æŽ¨è";o?v=video.name||video.albumName:c&&2===video.stype?(v=video.albumName||video.name)===(O=video.shortTitle||video.name)&&(O="ä¸ºä½ æŽ¨è"):v=video.albumName||video.shortTitle||video.name;var k=w(video.picSize||t.itemType);return{pos:video.pos,name:v,pageUrl:video.playUrl,imageUrl:Object(y.c)(video.imageUrl,k.pictype,{need2x:!0,entity:video,defsize:k.defsize}),description:O,isEpisode:Object(I.i)(video),aid:video.albumId,cornerMark:Object(I.a)(video),meta:h,updateInfo:m,score:1===video.channelId&&Object(I.c)(video)||"",albumName:video.albumName,albumId:video.albumId,tvId:video.tvId,channelId:video.channelId,isBI:video.isBI,BIClickPingback:video.BIClickPingback,itemType:video.itemType}}))}}}}).call(this,n(11))}}]);