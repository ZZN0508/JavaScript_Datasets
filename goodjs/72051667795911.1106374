function initTapPlugin(t,c){"use strict";function n(t){if(0===t.type.indexOf("touch")){t.touches=t.originalEvent.changedTouches;for(var e=t.touches[0],n=0,a=u.length;n<a;n++)t[u[n]]=e[u[n]]}t.timeStamp=Date.now?Date.now():+new Date}var e,a,i,o="._tap",r="._tapActive",u="clientX clientY screenX screenY pageX pageY".split(" "),g={count:0,event:0},s={isEnabled:!1,isTracking:!1,enable:function(){s.isEnabled||(s.isEnabled=!0,e=c(t.body).on("touchstart"+o,s.onStart).on("mousedown"+o,s.onStart).on("click"+o,s.onClick))},disable:function(){s.isEnabled&&(s.isEnabled=!1,e.off(o))},onStart:function(t){t.isTrigger||(n(t),c.tap.LEFT_BUTTON_ONLY&&!t.touches&&1!==t.which)||(t.touches&&(g.count=t.touches.length),s.isTracking)||!t.touches&&function(t){if(!i)return!1;var e=Math.abs(t.pageX-i.pageX),n=Math.abs(t.pageY-i.pageY),n=Math.max(e,n);return Math.abs(t.timeStamp-i.timeStamp)<750&&n<c.tap.POSITION_DELTA}(t)||(s.isTracking=!0,(g.event=t).touches?(i=t,e.on("touchend"+o+r,s.onEnd).on("touchcancel"+o+r,s.onCancel)):e.on("mouseup"+o+r,s.onEnd))},onEnd:function(t){var e;t.isTrigger||(n(t),function(t){if(t.isTrigger)return!1;var e=g.event,n=Math.abs(t.pageX-e.pageX),a=Math.abs(t.pageY-e.pageY),a=Math.max(n,a);return t.timeStamp-e.timeStamp<c.tap.TIME_DELTA&&a<c.tap.POSITION_DELTA&&(!e.touches||1===g.count)&&s.isTracking}(t)&&(e=function(t,e){var n,a,i=e.originalEvent,o=c.Event(i);for(o.type=t,n=0,a=u.length;n<a;n++)o[u[n]]=e[u[n]];return o}("tap",t),a=e,c(g.event.target).trigger(e)),s.onCancel(t))},onCancel:function(t){t&&"touchcancel"===t.type&&t.preventDefault(),s.isTracking=!1,e.off(r)},onClick:function(t){if(!t.isTrigger&&a&&a.isDefaultPrevented()&&a.target===t.target&&a.pageX===t.pageX&&a.pageY===t.pageY&&t.timeStamp-a.timeStamp<750)return a=null,!1}};c(t).ready(s.enable),c.tap={POSITION_DELTA:10,TIME_DELTA:400,LEFT_BUTTON_ONLY:!0}}
