System.register(["./common-chunks.system.1976d2aa.js"],function(e){"use strict";var n,t,u,a,c,i,d,r,m,l,s,f,h;return{setters:[function(e){n=e.g,t=e.D,u=e.j,a=e.x,c=e.ad,i=e.d,d=e.ae,r=e.C,m=e.a,l=e.V,s=e.u,f=e.af,h=e.r}],execute:function(){e("default",{create:function(e){var o={};return o.data=e.data,o.dom=n(e,"dom",t.create()),o.beacon=n(e,"beacon",u("Header")),o.onClose=n(e,"onClose",function(){}),o.container=o.dom.getById("header-bubble-menu-content"),o.menu=o.container.querySelector("#vh-account-menu-root"),o.menuContentReady=a.create(),o.addUserNameToHeader=function(){var e,n,t=c();t&&(e=o.menu.querySelector("[data-tl-id=header-account-menu-icon]"),n=o.menu.querySelector("[data-tl-id=header-account-menu-title]"),e&&t.initials&&(e.innerHTML=t.initials),n&&t.fullName&&(n.innerHTML=t.fullName))},o.fetch=function(e){var n;o.menu?(o.isAccountMenuHidden=o.menu.getAttribute("hidden"),o.menu.remove()):o.isAccountMenuHidden=!0,o.menu=o.dom.createElement("div"),i(o.menu,d({id:"vh-account-menu-root"},o.isAccountMenuHidden?{hidden:!0}:null)),o.menu.innerHTML=e,o.container&&(o.container.appendChild(o.menu),o.addUserNameToHeader(),"1"===r.get("hasCID")?(n=m("header-account-links-signed-out",o.menu))&&n.remove():(n=m("header-account-links-signed-in",o.menu))&&n.remove()),o.setup(),o.menuContentReady.resolve()},o.setup=function(){var e=m("GlobalAccountMenu-closeBtn",o.menu);e&&e.addEventListener("click",o.onClose);var n=o.menu.querySelector('a[title="Sign In"]');n&&n.href&&(e=n.href.replace(n.protocol+"//"+n.host,""),n.href=l(e)),o.bindClickListeners()},o.bindClickListeners=function(){o.menu&&o.menu.querySelectorAll("a").forEach(function(e){e.setAttribute("data-section-title",e.dataset.tlId),s({dom:o.dom,beacon:o.beacon,pageTitle:"account panel",moduleInfo:o.dom.getDataAttributes(e,["module-id","module-published-date","module-type","module-zone"])})(e)})},o.cleanup=function(){},o.show=function(){o.menuContentReady.then(function(){o.beacon.tagAction(f({name:"Account panel"})),h(o.menu,["hidden"])})},o.hide=function(){i(o.menu,{hidden:!0})},o}})}}});
