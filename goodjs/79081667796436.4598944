(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[10],{"01sJ":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CommentNotificationsCount"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"notificationCount"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:85}};n.loc.source={body:"query CommentNotificationsCount {\n  currentUser {\n    id\n    notificationCount\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var c={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var o=e.definitions[n];if(o.name&&o.name.value==t)return o}}n.definitions.forEach(function(e){var t;e.name&&(function t(e,n){var o;"FragmentSpread"===e.kind?n.add(e.name.value):"VariableDefinition"!==e.kind||"NamedType"===(o=e.type).kind&&n.add(o.name.value),e.selectionSet&&e.selectionSet.selections.forEach(function(e){t(e,n)}),e.variableDefinitions&&e.variableDefinitions.forEach(function(e){t(e,n)}),e.definitions&&e.definitions.forEach(function(e){t(e,n)})}(e,t=new Set),c[e.name.value]=t)}),e.exports=n,e.exports.CommentNotificationsCount=function(t,e){var n={kind:t.kind,definitions:[a(t,e)]};t.hasOwnProperty("loc")&&(n.loc=t.loc);var e=c[e]||new Set,o=new Set,r=new Set;for(e.forEach(function(e){r.add(e)});0<r.size;){var i=r,r=new Set;i.forEach(function(e){o.has(e)||(o.add(e),(c[e]||new Set).forEach(function(e){r.add(e)}))})}return o.forEach(function(e){e=a(t,e);e&&n.definitions.push(e)}),n}(n,"CommentNotificationsCount"),n.documentId="cddf552f97cad3562d9f7e3b44b679a3c23ab59782a58d59cdc4b50c9731b30b"},"5Qfx":function(e,t,n){"use strict";n.d(t,"a",function(){return w}),n.d(t,"b",function(){return a});function u(t){var n=Object(d.useRef)([]),e=Object(d.useState)(!1),o=e[0],r=e[1];return Object(d.useEffect)(function(){function e(e){e=e.key,n.current.length===t.length&&n.current.shift(),n.current.push(e),i()(n.current,t)?r(!0):r(!1)}return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}},[t]),o}var s=n("ODXe"),f=n("rePB"),d=n("q1tI"),o=n.n(d),t=n("20a2"),l=n.n(t),v=n("VnKV"),b=n("eMNQ"),O=n("X8jo"),t=n("Y+p1"),i=n.n(t),p=o.a.createElement;function r(t,e){var n,o=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,n)),o}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){Object(f.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var w=o.a.createContext(),y=(w.Consumer,function(e,t){switch(t.type){case"addControl":case"resetControls":case"toggleControl":case"queryEnabled":return m(m({},e),{},{controls:c(e.controls,t)});case"toggleMaster":return m(m({},e),{},{master:t.target.checked});case"toggleEnabled":return m(m({},e),{},{enabled:!e.enabled});case"enable":return m(m({},e),{},{enabled:!0});case"disable":return m(m({},e),{},{enabled:!1});case"restoreFromLocalStorage":return m(m({},t.localStore),{},{controls:c(e.controls,t)});default:return e}}),c=function e(t,o){switch(o.type){case"addControl":var n=o.control,r=n.label,i=n.display,c=void 0!==i&&i,a=n.showInProduction,i=void 0!==a&&a,n=Object(b.Zb)(r),a=t[n],a=void 0===a?{key:n,label:r,display:c,showInProduction:i}:a;return m(m({},t),{},Object(f.a)({},n,m(m({},a),{},{inView:!0})));case"toggleControl":var n=o.target,a=n.name,u=n.checked,n=t[a];return m(m({},t),{},Object(f.a)({},a,m(m({},n),{},{display:u})));case"resetControls":case"queryEnabled":return Object.entries(t).reduce(function(e,t){var n=Object(s.a)(t,2),t=n[0],n=n[1];return e[t]=h(n,o),e},{});case"restoreFromLocalStorage":u=e(o.localStore.controls,{type:"resetControls"});return Object.entries(t).reduce(function(e,t){var n=Object(s.a)(t,2),o=n[0],r=n[1],i=e[o]||r,t=r.inView,n=r.label,r=r.showInProduction;return e[o]=m(m({},i),{},{inView:t,label:n,showInProduction:r}),e},u);default:return t}},h=function(e,t){switch(t.type){case"resetControls":return m(m({},e),{},{inView:!1});case"queryEnabled":return t.key===e.key?m(m({},e),{},{display:!0}):e;default:return e}},a=function(e){var t=e.router,n=(t=void 0===t?{}:t).query,t=e.children,e=Object(d.useReducer)(y,{controls:{},enabled:!1,master:!0}),o=e[0],r=e[1],e=Object(O.a)("__sneak_peek__",o),e=Object(s.a)(e,2),i=e[0],c=e[1],a=u(v.KONAMI_CODE);return Object(d.useEffect)(function(){function e(){return r({type:"resetControls"})}return l.a.events.on("routeChangeStart",e),function(){l.a.events.off("routeChangeStart",e)}},[]),Object(d.useEffect)(function(){r({type:"restoreFromLocalStorage",localStore:i}),"_sneak_peek"in n&&r({type:"enable"})},[n]),Object(d.useEffect)(function(){a&&r({type:"enable"})},[a]),Object(d.useEffect)(function(){c(o)},[o,c]),Object(d.useEffect)(function(){Object.keys(n).forEach(function(e){r({type:"queryEnabled",key:e})})},[n]),p(w.Provider,{value:m(m({},o),{},{dispatch:r})},t)}},"E/qt":function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i});function s(){var e,t,n=void 0===(w=(a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).activityEvents)?E:w,o=void 0===(c=a.inactivityEvents)?g:c,r=void 0===(w=a.ignoredEventsWhenIdle)?_:w,i=void 0===(c=a.timeToIdle)?3e4:c,c=void 0===(w=a.initialState)?"active":w,a=void 0===(w=a.autoInit)||w;if(void 0!==document.hidden)e="hidden",t="visibilitychange";else for(var u=["webkit","moz","ms"],s=0;s<u.length;s++){var f=u[s];if(void 0!==document["".concat(f,"Hidden")]){e="".concat(f,"Hidden"),t="".concat(f,"visibilitychange");break}}function d(e){(b===h||r.indexOf(e.type)<0)&&m(h)}function l(){m(j)}function v(){m(document[e]?j:h)}var b,O,p=(w={},Object(y.a)(w,h,[]),Object(y.a)(w,j,[]),w),m=function e(t){clearTimeout(O),t===h&&(O=setTimeout(function(){return e(j)},i)),b!==t&&p[b=t].forEach(function(e){return e()})},w=function(){m((0<arguments.length&&void 0!==arguments[0]?arguments[0]:"active")===h?h:j),n.forEach(function(e){return window.addEventListener(e,d)}),o.filter(function(e){return"visibilitychange"!==e}).forEach(function(e){return window.addEventListener(e,l)}),0<=o.indexOf("visibilitychange")&&t&&document.addEventListener(t,v)};return a&&w(c),{on:function(t,n){return p[t].push(n),function(){var e=p[t].indexOf(n);0<=e&&p[t].splice(e,1)}},stop:function(){p.active=[],p.idle=[],clearTimeout(O),n.forEach(function(e){return window.removeEventListener(e,d)}),o.forEach(function(e){return window.removeEventListener(e,l)}),t&&document.removeEventListener(t,v)},init:w}}var o=n("o0o1"),f=n.n(o),d=n("HaE+"),l=n("q1tI"),t=n.n(l),o=n("01sJ"),v=n.n(o),o=n("VnKV"),y=n("rePB"),h="active",j="idle",E=["click","mousemove","keydown","DOMMouseScroll","mousewheel","mousedown","touchstart","touchmove","focus"],g=["blur","visibilitychange"],_=["mousemove"],b=n("p5Ga"),O=n("MCvy"),p=n("re3D"),m=n("e1TJ"),w=t.a.createElement,k=n("NOtv")("kraken:components:contexts:NotificationsContext"),C=t.a.createContext({notificationCount:0}),S=(C.Consumer,{timeToIdle:12e4}),r=o.OPEN_WEB_ACTIVE?function(e){var t=e.children,n=Object(p.e)().loggedIn,o=Object(l.useRef)(),r=Object(l.useState)(0),e=r[0],i=r[1],r=Object(m.c)(),c=r.v3Id,a=r.id,u=r.slug;return Object(l.useEffect)(function(){function t(e){k("Openweb Notification: ",e),i(e)}var e;if(n)return e=Object(d.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.b)((c||a||u||"notifications").toString(),t);case 2:o.current=e.sent;case 3:case"end":return e.stop()}},e)})),function(){e.apply(this,arguments)}(),function(){k("Unsubscribing to notificatinos",o.current),o.current=void 0}},[n,c,a,u]),w(C.Provider,{value:{notificationCount:e}},t)}:function(e){var t,n,o,r=e.children,i=Object(p.e)().loggedIn,c=(t=S,n=Object(l.useState)(!1),e=n[0],o=n[1],Object(l.useEffect)(function(){var e=s(t);return e.on("idle",function(){return o(!0)}),e.on("active",function(){return o(!1)}),function(){return e.stop()}},[t]),e),n=Object(b.a)({dataPath:"currentUser",query:v.a,pollInterval:3e4,skip:!i}),e=n.data,a=n.startPolling,u=n.stopPolling,e=(null!=e?e:{}).notificationCount,e=void 0===e?0:e;return Object(l.useEffect)(function(){i&&(c?u():a(3e4))},[i,c,a,u]),w(C.Provider,{value:{notificationCount:e}},r)},i=function(){return Object(l.useContext)(C)}},MCvy:function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"a",function(){return a});var o,t=n("o0o1"),r=n.n(t),t=n("HaE+"),i=n("NOtv")("kraken:lib:openweb"),c=(o=Object(t.a)(r.a.mark(function e(t,n){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i("subscribing to notifications with",{assetId:t}),e.abrupt("return",new Promise(function(e){"function"==typeof window.__OW_SUBSCRIBE_TO_NOTIFICATIONS__?e(window.__OW_SUBSCRIBE_TO_NOTIFICATIONS__(t,n)):document.addEventListener("ow-notifications-sdk-ready",function(){e(window.__OW_SUBSCRIBE_TO_NOTIFICATIONS__(t,n))})}));case 2:case"end":return e.stop()}},e)})),function(e,t){return o.apply(this,arguments)}),a=function(e,t){i("opening to notifications with",{assetId:t});var n={postId:t||window.location.pathname,instanceId:e};"function"==typeof window.__OW_OPEN_NOTIFICATIONS__?window.__OW_OPEN_NOTIFICATIONS__(n):document.addEventListener("ow-notifications-sdk-ready",function(){window.__OW_OPEN_NOTIFICATIONS__(n)})}},Sf1j:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return c}),n.d(t,"c",function(){return a});var o=n("rePB"),l=n("q1tI"),t=n.n(l),v=n("zlSC"),b=t.a.createElement;function r(t,e){var n,o=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,n)),o}function O(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){Object(o.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var p=t.a.createContext({}),m=t.a.createContext({}),i=function(e){function r(){d.current&&clearTimeout(d.current),f(),setTimeout(function(){c(void 0),s()},1e3)}function t(e,t){var n=void 0===(o=t.level)?"notice":o,o=void 0===(o=t.delay)?5e3:o,t=void 0!==(t=t.sticky)&&t;c(e),u(n),d.current&&clearTimeout(d.current),t||(d.current=setTimeout(r,o))}var n=e.children,o=Object(l.useState)(),i=o[0],c=o[1],a=Object(l.useState)("notice"),e=a[0],u=a[1],o=Object(v.a)(!0),a=o.display,s=o.show,f=o.hide,d=Object(l.useRef)();return b(p.Provider,{value:{notify:function(e){t(e,O(O({},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}),{},{level:"notice"}))},alert:function(e){t(e,O(O({},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}),{},{level:"alert",sticky:!0}))},flash:t}},b(m.Provider,{value:{message:i,level:e,display:a,dismiss:r}},n))},c=function(){return Object(l.useContext)(p)||{}},a=function(){return Object(l.useContext)(m)||{}}}}]);
