!function(i){var s={};function r(e){if(s[e])return s[e].exports;var t=s[e]={i:e,l:!1,exports:{}};return i[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.m=i,r.c=s,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"_",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t._)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(i,s,function(e){return t[e]}.bind(null,s));return i},r.n=function(e){var t=e&&e._?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=171)}([function(e,t,i){"use strict";var s,r=i(59),o=r.Reader,n=r.Writer,a=r.util,l=r.roots.default||(r.roots.default={});function c(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function d(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function h(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function u(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function p(e){if(this.platformCappedLineItemIdList=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function g(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function m(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function f(e){if(this.dynamicElkFieldsValues={},e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function y(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function b(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function v(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function P(e){if(this.prebids=[],this.bids=[],this.postBids=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function S(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function I(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function T(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function A(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function O(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function k(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function C(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function w(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function x(e){if(this.bids=[],this.noBids=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function E(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function L(e){if(this.billingNoticeUrlList=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function M(e){if(this.lineItemResponses=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function R(e){if(this.ignoredFloorPriceFactorIndexes=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function B(e){if(this.lineItems={},this.customMacros={},e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function j(e){if(this.keywordList=[],this.trackList=[],this.renditionList=[],this.customFields=[],this.videoIndexes=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function D(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function _(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function F(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function U(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function N(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function V(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function H(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function q(e){if(this.items=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function W(e){if(this.filters=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function $(e){if(this.items=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function G(e){if(this.trackers=[],this.renditions=[],this.floorPrices=[],this.advertiserContextualTargeting=[],this.publisherContextualTargeting=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function z(e){if(this.adBreakTargeting=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function J(e){if(this.adSlotPositions=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function K(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function Q(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function Y(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function X(e){if(this.cookieList=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function Z(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function ee(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function te(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function ie(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function se(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function re(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function ne(e){if(this.domains=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function oe(e){if(this.types=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}l.ProtoAdBreak=(oe.prototype.types=a.emptyArray,oe.prototype.maxAdPodDuration=0,oe.prototype.maxAdSlotDuration=180,oe.prototype.numberOfAdSlots=1,oe.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoAdBreak;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:if(s.types&&s.types.length||(s.types=[]),2==(7&r))for(var n=e.uint32()+e.pos;e.pos<n;)s.types.push(e.int32());else s.types.push(e.int32());break;case 2:s.maxAdPodDuration=e.int32();break;case 3:s.maxAdSlotDuration=e.int32();break;case 4:s.numberOfAdSlots=e.int32();break;default:e.skipType(7&r)}}return s},oe.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.types=[]),t.defaults&&(i.maxAdPodDuration=0,i.maxAdSlotDuration=180,i.numberOfAdSlots=1),e.types&&e.types.length){i.types=[];for(var s=0;s<e.types.length;++s)i.types[s]=t.enums===String?l.ProtoAdBreakTypeEnum[e.types[s]]:e.types[s]}return null!=e.maxAdPodDuration&&e.hasOwnProperty("maxAdPodDuration")&&(i.maxAdPodDuration=e.maxAdPodDuration),null!=e.maxAdSlotDuration&&e.hasOwnProperty("maxAdSlotDuration")&&(i.maxAdSlotDuration=e.maxAdSlotDuration),null!=e.numberOfAdSlots&&e.hasOwnProperty("numberOfAdSlots")&&(i.numberOfAdSlots=e.numberOfAdSlots),i},oe),l.ProtoPlayerPlaybackModeEnum=(s={},(i=Object.create(s))[s[0]="Autoplay"]=0,i[s[1]="ScrollToPlay"]=1,i[s[2]="ClickToPlay"]=2,i),l.ProtoPlayerCloseButtonMode=(s={},(i=Object.create(s))[s[0]="Off"]=0,i[s[1]="OnHover"]=1,i[s[2]="OnHoverAfterFirstAd"]=2,i[s[3]="AlwaysOn"]=3,i),l.ProtoPlayerFloatingMode=(s={},(i=Object.create(s))[s[0]="Off"]=0,i[s[1]="OnPageLoad"]=1,i[s[2]="AfterInView"]=2,i[s[3]="Always"]=3,i),l.ProtoPlayerSoundMode=(s={},(i=Object.create(s))[s[0]="Mute"]=0,i[s[1]="On"]=1,i[s[2]="Hover"]=2,i),l.ProtoPlayerInsertMode=(s={},(i=Object.create(s))[s[0]="WithinContainer"]=0,i[s[1]="BeforeContainer"]=1,i[s[2]="AfterContainer"]=2,i[s[3]="ReplaceContainer"]=3,i[s[4]="HideContainer"]=4,i),l.ProtoAdViewabilityPolicy=(s={},(i=Object.create(s))[s[0]="Default"]=0,i[s[1]="Strict"]=1,i),l.ProtoSharingDestination=(s={},(i=Object.create(s))[s[0]="Facebook"]=0,i[s[1]="Twitter"]=1,i[s[2]="LinkedIn"]=2,i),l.ProtoFloatingFixedPositionMode=(s={},(i=Object.create(s))[s[0]="Page"]=0,i[s[1]="Element"]=1,i),l.ProtoPositionMode=(s={},(i=Object.create(s))[s[0]="BottomRight"]=0,i[s[1]="BottomLeft"]=1,i[s[2]="TopRight"]=2,i[s[3]="TopLeft"]=3,i),l.ProtoAdPlaybackMode=(s={},(i=Object.create(s))[s[0]="Autoplay"]=0,i[s[1]="ScrollToPlay"]=1,i),l.ProtoFloatingAppendLocationEnum=(s={},(i=Object.create(s))[s[0]="Above"]=0,i[s[1]="Below"]=1,i[s[2]="Within"]=2,i),l.ProtoPlayerAdSkippability=(s={},(i=Object.create(s))[s[0]="IfLongerThan"]=0,i[s[1]="Always"]=1,i[s[2]="NoRestrictions"]=2,i),l.ProtoVideoQuality=(s={},(i=Object.create(s))[s[0]="Auto"]=0,i[s[1]="High1080p"]=1,i[s[2]="High720p"]=2,i[s[3]="Medium360p"]=3,i),l.ProtoImplementationType=(s={},(i=Object.create(s))[s[0]="Web"]=0,i[s[1]="Amp"]=1,i),l.ProtoAdBreakTypeEnum=(s={},(i=Object.create(s))[s[0]="None"]=0,i[s[1]="PreRoll"]=1,i[s[2]="MidRoll"]=2,i[s[3]="PostRoll"]=3,i),l.ProtoAdSlotAdTypeEnum=(s={},(i=Object.create(s))[s[0]="SingleAd"]=0,i[s[1]="AdPod"]=1,i),l.ProtoAdDomainBlockingResponse=(ne.prototype.domains=a.emptyArray,ne.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoAdDomainBlockingResponse;e.pos<i;){var r=e.uint32();r>>>3==1?(s.domains&&s.domains.length||(s.domains=[]),s.domains.push(e.string())):e.skipType(7&r)}return s},ne.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.domains=[]),e.domains&&e.domains.length){i.domains=[];for(var s=0;s<e.domains.length;++s)i.domains[s]=e.domains[s]}return i},ne),l.ProtoCoreTamBidRequest=(re.prototype.lineItemId="",re.prototype.code="",re.prototype.metadata=null,re.prototype.exploration=!1,re.encode=function(e,t){return t=t||n.create(),null!=e.lineItemId&&e.hasOwnProperty("lineItemId")&&t.uint32(10).string(e.lineItemId),null!=e.code&&e.hasOwnProperty("code")&&t.uint32(18).string(e.code),null!=e.metadata&&e.hasOwnProperty("metadata")&&l.MetadataModel.encode(e.metadata,t.uint32(26).fork()).ldelim(),null!=e.exploration&&e.hasOwnProperty("exploration")&&t.uint32(32).bool(e.exploration),t},re.fromObject=function(e){if(e instanceof l.ProtoCoreTamBidRequest)return e;var t=new l.ProtoCoreTamBidRequest;if(null!=e.lineItemId&&(t.lineItemId=String(e.lineItemId)),null!=e.code&&(t.code=String(e.code)),null!=e.metadata){if("object"!=typeof e.metadata)throw TypeError(".ProtoCoreTamBidRequest.metadata: object expected");t.metadata=l.MetadataModel.fromObject(e.metadata)}return null!=e.exploration&&(t.exploration=Boolean(e.exploration)),t},re.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},re),l.MetadataModel=(se.prototype.version=0,se.prototype.sessionId="",se.prototype.playerId="",se.prototype.userId="",se.prototype.browser=null,se.prototype.geo=null,se.prototype.clientAb0=0,se.prototype.clientAb1=0,se.prototype.serverAb0=0,se.prototype.serverAb1=0,se.prototype.pageUrl="",se.prototype.bundleId="",se.prototype.implementationType=0,se.prototype.trackAllRequests=!1,se.prototype.customParam1="",se.prototype.customParam2="",se.prototype.customParam3="",se.prototype.abTestId="",se.prototype.pageInFocus=!1,se.prototype.customParam4="",se.prototype.customParam5="",se.encode=function(e,t){return t=t||n.create(),null!=e.version&&e.hasOwnProperty("version")&&t.uint32(8).int32(e.version),null!=e.sessionId&&e.hasOwnProperty("sessionId")&&t.uint32(18).string(e.sessionId),null!=e.playerId&&e.hasOwnProperty("playerId")&&t.uint32(26).string(e.playerId),null!=e.userId&&e.hasOwnProperty("userId")&&t.uint32(34).string(e.userId),null!=e.browser&&e.hasOwnProperty("browser")&&l.Browser.encode(e.browser,t.uint32(42).fork()).ldelim(),null!=e.geo&&e.hasOwnProperty("geo")&&l.GeoLocation.encode(e.geo,t.uint32(50).fork()).ldelim(),null!=e.clientAb0&&e.hasOwnProperty("clientAb0")&&t.uint32(56).int32(e.clientAb0),null!=e.clientAb1&&e.hasOwnProperty("clientAb1")&&t.uint32(64).int32(e.clientAb1),null!=e.serverAb0&&e.hasOwnProperty("serverAb0")&&t.uint32(72).int32(e.serverAb0),null!=e.serverAb1&&e.hasOwnProperty("serverAb1")&&t.uint32(80).int32(e.serverAb1),null!=e.pageUrl&&e.hasOwnProperty("pageUrl")&&t.uint32(122).string(e.pageUrl),null!=e.bundleId&&e.hasOwnProperty("bundleId")&&t.uint32(138).string(e.bundleId),null!=e.implementationType&&e.hasOwnProperty("implementationType")&&t.uint32(144).int32(e.implementationType),null!=e.trackAllRequests&&e.hasOwnProperty("trackAllRequests")&&t.uint32(152).bool(e.trackAllRequests),null!=e.customParam1&&e.hasOwnProperty("customParam1")&&t.uint32(162).string(e.customParam1),null!=e.customParam2&&e.hasOwnProperty("customParam2")&&t.uint32(170).string(e.customParam2),null!=e.customParam3&&e.hasOwnProperty("customParam3")&&t.uint32(178).string(e.customParam3),null!=e.abTestId&&e.hasOwnProperty("abTestId")&&t.uint32(194).string(e.abTestId),null!=e.pageInFocus&&e.hasOwnProperty("pageInFocus")&&t.uint32(200).bool(e.pageInFocus),null!=e.customParam4&&e.hasOwnProperty("customParam4")&&t.uint32(210).string(e.customParam4),null!=e.customParam5&&e.hasOwnProperty("customParam5")&&t.uint32(218).string(e.customParam5),t},se.fromObject=function(e){if(e instanceof l.MetadataModel)return e;var t=new l.MetadataModel;if(null!=e.version&&(t.version=0|e.version),null!=e.sessionId&&(t.sessionId=String(e.sessionId)),null!=e.playerId&&(t.playerId=String(e.playerId)),null!=e.userId&&(t.userId=String(e.userId)),null!=e.browser){if("object"!=typeof e.browser)throw TypeError(".MetadataModel.browser: object expected");t.browser=l.Browser.fromObject(e.browser)}if(null!=e.geo){if("object"!=typeof e.geo)throw TypeError(".MetadataModel.geo: object expected");t.geo=l.GeoLocation.fromObject(e.geo)}switch(null!=e.clientAb0&&(t.clientAb0=0|e.clientAb0),null!=e.clientAb1&&(t.clientAb1=0|e.clientAb1),null!=e.serverAb0&&(t.serverAb0=0|e.serverAb0),null!=e.serverAb1&&(t.serverAb1=0|e.serverAb1),null!=e.pageUrl&&(t.pageUrl=String(e.pageUrl)),null!=e.bundleId&&(t.bundleId=String(e.bundleId)),e.implementationType){case"Web":case 0:t.implementationType=0;break;case"Amp":case 1:t.implementationType=1}return null!=e.trackAllRequests&&(t.trackAllRequests=Boolean(e.trackAllRequests)),null!=e.customParam1&&(t.customParam1=String(e.customParam1)),null!=e.customParam2&&(t.customParam2=String(e.customParam2)),null!=e.customParam3&&(t.customParam3=String(e.customParam3)),null!=e.abTestId&&(t.abTestId=String(e.abTestId)),null!=e.pageInFocus&&(t.pageInFocus=Boolean(e.pageInFocus)),null!=e.customParam4&&(t.customParam4=String(e.customParam4)),null!=e.customParam5&&(t.customParam5=String(e.customParam5)),t},se.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},se),l.ProtoDeviceType=(s={},(i=Object.create(s))[s[0]="Desktop"]=0,i[s[1]="Smartphone"]=1,i[s[2]="Tablet"]=2,i[s[3]="GameConsole"]=3,i[s[4]="SmartTV"]=4,i[s[5]="WearableComputer"]=5,i[s[6]="PDA"]=6,i[s[7]="Unrecognized"]=7,i),l.Browser=(ie.prototype.browserVersion="",ie.prototype.browserType="",ie.prototype.osCode="",ie.prototype.device=0,ie.encode=function(e,t){return t=t||n.create(),null!=e.browserVersion&&e.hasOwnProperty("browserVersion")&&t.uint32(10).string(e.browserVersion),null!=e.browserType&&e.hasOwnProperty("browserType")&&t.uint32(18).string(e.browserType),null!=e.osCode&&e.hasOwnProperty("osCode")&&t.uint32(26).string(e.osCode),null!=e.device&&e.hasOwnProperty("device")&&t.uint32(32).int32(e.device),t},ie.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.Browser;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.browserVersion=e.string();break;case 2:s.browserType=e.string();break;case 3:s.osCode=e.string();break;case 4:s.device=e.int32();break;default:e.skipType(7&r)}}return s},ie.fromObject=function(e){if(e instanceof l.Browser)return e;var t=new l.Browser;switch(null!=e.browserVersion&&(t.browserVersion=String(e.browserVersion)),null!=e.browserType&&(t.browserType=String(e.browserType)),null!=e.osCode&&(t.osCode=String(e.osCode)),e.device){case"Desktop":case 0:t.device=0;break;case"Smartphone":case 1:t.device=1;break;case"Tablet":case 2:t.device=2;break;case"GameConsole":case 3:t.device=3;break;case"SmartTV":case 4:t.device=4;break;case"WearableComputer":case 5:t.device=5;break;case"PDA":case 6:t.device=6;break;case"Unrecognized":case 7:t.device=7}return t},ie.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.browserVersion="",i.browserType="",i.osCode="",i.device=t.enums===String?"Desktop":0),null!=e.browserVersion&&e.hasOwnProperty("browserVersion")&&(i.browserVersion=e.browserVersion),null!=e.browserType&&e.hasOwnProperty("browserType")&&(i.browserType=e.browserType),null!=e.osCode&&e.hasOwnProperty("osCode")&&(i.osCode=e.osCode),null!=e.device&&e.hasOwnProperty("device")&&(i.device=t.enums===String?l.ProtoDeviceType[e.device]:e.device),i},ie.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},ie),l.GeoLocation=(te.prototype.countryGeoId=0,te.prototype.cityId=0,te.prototype.subdivisionId=0,te.prototype.dmaId=0,te.prototype.ip="",te.prototype.lat=0,te.prototype.lon=0,te.encode=function(e,t){return t=t||n.create(),null!=e.countryGeoId&&e.hasOwnProperty("countryGeoId")&&t.uint32(8).int32(e.countryGeoId),null!=e.cityId&&e.hasOwnProperty("cityId")&&t.uint32(16).int32(e.cityId),null!=e.subdivisionId&&e.hasOwnProperty("subdivisionId")&&t.uint32(24).int32(e.subdivisionId),null!=e.dmaId&&e.hasOwnProperty("dmaId")&&t.uint32(32).int32(e.dmaId),null!=e.ip&&e.hasOwnProperty("ip")&&t.uint32(42).string(e.ip),null!=e.lat&&e.hasOwnProperty("lat")&&t.uint32(49).double(e.lat),null!=e.lon&&e.hasOwnProperty("lon")&&t.uint32(57).double(e.lon),t},te.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.GeoLocation;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.countryGeoId=e.int32();break;case 2:s.cityId=e.int32();break;case 3:s.subdivisionId=e.int32();break;case 4:s.dmaId=e.int32();break;case 5:s.ip=e.string();break;case 6:s.lat=e.double();break;case 7:s.lon=e.double();break;default:e.skipType(7&r)}}return s},te.fromObject=function(e){if(e instanceof l.GeoLocation)return e;var t=new l.GeoLocation;return null!=e.countryGeoId&&(t.countryGeoId=0|e.countryGeoId),null!=e.cityId&&(t.cityId=0|e.cityId),null!=e.subdivisionId&&(t.subdivisionId=0|e.subdivisionId),null!=e.dmaId&&(t.dmaId=0|e.dmaId),null!=e.ip&&(t.ip=String(e.ip)),null!=e.lat&&(t.lat=Number(e.lat)),null!=e.lon&&(t.lon=Number(e.lon)),t},te.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.countryGeoId=0,i.cityId=0,i.subdivisionId=0,i.dmaId=0,i.ip="",i.lat=0,i.lon=0),null!=e.countryGeoId&&e.hasOwnProperty("countryGeoId")&&(i.countryGeoId=e.countryGeoId),null!=e.cityId&&e.hasOwnProperty("cityId")&&(i.cityId=e.cityId),null!=e.subdivisionId&&e.hasOwnProperty("subdivisionId")&&(i.subdivisionId=e.subdivisionId),null!=e.dmaId&&e.hasOwnProperty("dmaId")&&(i.dmaId=e.dmaId),null!=e.ip&&e.hasOwnProperty("ip")&&(i.ip=e.ip),null!=e.lat&&e.hasOwnProperty("lat")&&(i.lat=t.json&&!isFinite(e.lat)?String(e.lat):e.lat),null!=e.lon&&e.hasOwnProperty("lon")&&(i.lon=t.json&&!isFinite(e.lon)?String(e.lon):e.lon),i},te.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},te),l.ProtoCoreTamBidResponse=(ee.prototype.errorMessage="",ee.prototype.encryptedBidPrice="",ee.prototype.ofskp=0,ee.prototype.impressionTimeSpent=0,ee.prototype.bidRate=0,ee.prototype.successRate=0,ee.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoCoreTamBidResponse;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.errorMessage=e.string();break;case 10:s.encryptedBidPrice=e.string();break;case 12:s.ofskp=e.double();break;case 13:s.impressionTimeSpent=e.int32();break;case 14:s.bidRate=e.double();break;case 15:s.successRate=e.double();break;default:e.skipType(7&r)}}return s},ee.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.errorMessage="",i.encryptedBidPrice="",i.ofskp=0,i.impressionTimeSpent=0,i.bidRate=0,i.successRate=0),null!=e.errorMessage&&e.hasOwnProperty("errorMessage")&&(i.errorMessage=e.errorMessage),null!=e.encryptedBidPrice&&e.hasOwnProperty("encryptedBidPrice")&&(i.encryptedBidPrice=e.encryptedBidPrice),null!=e.ofskp&&e.hasOwnProperty("ofskp")&&(i.ofskp=t.json&&!isFinite(e.ofskp)?String(e.ofskp):e.ofskp),null!=e.impressionTimeSpent&&e.hasOwnProperty("impressionTimeSpent")&&(i.impressionTimeSpent=e.impressionTimeSpent),null!=e.bidRate&&e.hasOwnProperty("bidRate")&&(i.bidRate=t.json&&!isFinite(e.bidRate)?String(e.bidRate):e.bidRate),null!=e.successRate&&e.hasOwnProperty("successRate")&&(i.successRate=t.json&&!isFinite(e.successRate)?String(e.successRate):e.successRate),i},ee),l.ProtoCookieSettings=(Z.prototype.name="",Z.prototype.value="",Z.prototype.timestamp=a.Long?a.Long.fromBits(0,0,!1):0,Z.encode=function(e,t){return t=t||n.create(),null!=e.name&&e.hasOwnProperty("name")&&t.uint32(10).string(e.name),null!=e.value&&e.hasOwnProperty("value")&&t.uint32(18).string(e.value),null!=e.timestamp&&e.hasOwnProperty("timestamp")&&t.uint32(24).int64(e.timestamp),t},Z.fromObject=function(e){if(e instanceof l.ProtoCookieSettings)return e;var t=new l.ProtoCookieSettings;return null!=e.name&&(t.name=String(e.name)),null!=e.value&&(t.value=String(e.value)),null!=e.timestamp&&(a.Long?(t.timestamp=a.Long.fromValue(e.timestamp)).unsigned=!1:"string"==typeof e.timestamp?t.timestamp=parseInt(e.timestamp,10):"number"==typeof e.timestamp?t.timestamp=e.timestamp:"object"==typeof e.timestamp&&(t.timestamp=new a.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber())),t},Z.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Z),l.ProtoCookieSecureModeEnum=(s={},(i=Object.create(s))[s[0]="Secure"]=0,i[s[1]="Unsecure"]=1,i[s[2]="Auto"]=2,i),l.ProtoCookieSyncRequest=(X.prototype.cookieList=a.emptyArray,X.prototype.secureMode=0,X.prototype.browserInfo=null,X.encode=function(e,t){if(t=t||n.create(),null!=e.cookieList&&e.cookieList.length)for(var i=0;i<e.cookieList.length;++i)l.ProtoCookieSettings.encode(e.cookieList[i],t.uint32(10).fork()).ldelim();return null!=e.secureMode&&e.hasOwnProperty("secureMode")&&t.uint32(16).int32(e.secureMode),null!=e.browserInfo&&e.hasOwnProperty("browserInfo")&&l.Browser.encode(e.browserInfo,t.uint32(26).fork()).ldelim(),t},X.fromObject=function(e){if(e instanceof l.ProtoCookieSyncRequest)return e;var t=new l.ProtoCookieSyncRequest;if(e.cookieList){if(!Array.isArray(e.cookieList))throw TypeError(".ProtoCookieSyncRequest.cookieList: array expected");t.cookieList=[];for(var i=0;i<e.cookieList.length;++i){if("object"!=typeof e.cookieList[i])throw TypeError(".ProtoCookieSyncRequest.cookieList: object expected");t.cookieList[i]=l.ProtoCookieSettings.fromObject(e.cookieList[i])}}switch(e.secureMode){case"Secure":case 0:t.secureMode=0;break;case"Unsecure":case 1:t.secureMode=1;break;case"Auto":case 2:t.secureMode=2}if(null!=e.browserInfo){if("object"!=typeof e.browserInfo)throw TypeError(".ProtoCookieSyncRequest.browserInfo: object expected");t.browserInfo=l.Browser.fromObject(e.browserInfo)}return t},X.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},X),l.ProtoUserInformation=(Y.prototype.userId="",Y.prototype.lookupId="",Y.prototype.lookupResponseCode=0,Y.prototype.callFraudSensor=!1,Y.prototype.publisherAdsTxt="",Y.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoUserInformation;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.userId=e.string();break;case 3:s.lookupId=e.string();break;case 4:s.lookupResponseCode=e.int32();break;case 5:s.callFraudSensor=e.bool();break;case 6:s.publisherAdsTxt=e.string();break;default:e.skipType(7&r)}}return s},Y.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.userId="",i.lookupId="",i.lookupResponseCode=0,i.callFraudSensor=!1,i.publisherAdsTxt=""),null!=e.userId&&e.hasOwnProperty("userId")&&(i.userId=e.userId),null!=e.lookupId&&e.hasOwnProperty("lookupId")&&(i.lookupId=e.lookupId),null!=e.lookupResponseCode&&e.hasOwnProperty("lookupResponseCode")&&(i.lookupResponseCode=e.lookupResponseCode),null!=e.callFraudSensor&&e.hasOwnProperty("callFraudSensor")&&(i.callFraudSensor=e.callFraudSensor),null!=e.publisherAdsTxt&&e.hasOwnProperty("publisherAdsTxt")&&(i.publisherAdsTxt=e.publisherAdsTxt),i},Y),l.ProtoTrackerType=(s={},(i=Object.create(s))[s[0]="Image"]=0,i[s[1]="Javascript"]=1,i),l.ProtoTrackerTriggerType=(s={},(i=Object.create(s))[s[0]="Impression"]=0,i[s[1]="Complete25Pc"]=1,i[s[2]="Complete50Pc"]=2,i[s[3]="Complete75Pc"]=3,i[s[4]="ViewCompletion"]=4,i[s[5]="VideoClick"]=5,i[s[6]="Pause"]=6,i[s[7]="Resume"]=7,i[s[8]="Mute"]=8,i[s[9]="Unmute"]=9,i),l.CreativeTrackerViewModel=(Q.prototype.type=0,Q.prototype.trigger=0,Q.prototype.url="",Q.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.CreativeTrackerViewModel;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.type=e.int32();break;case 2:s.trigger=e.int32();break;case 3:s.url=e.string();break;default:e.skipType(7&r)}}return s},Q.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.type=t.enums===String?"Image":0,i.trigger=t.enums===String?"Impression":0,i.url=""),null!=e.type&&e.hasOwnProperty("type")&&(i.type=t.enums===String?l.ProtoTrackerType[e.type]:e.type),null!=e.trigger&&e.hasOwnProperty("trigger")&&(i.trigger=t.enums===String?l.ProtoTrackerTriggerType[e.trigger]:e.trigger),null!=e.url&&e.hasOwnProperty("url")&&(i.url=e.url),i},Q),l.ProtoCreativeTypeEnum=(s={},(i=Object.create(s))[s[0]="ThirdParty"]=0,i[s[1]="MediaFile"]=1,i[s[2]="Rtb"]=2,i[s[3]="External"]=3,i[s[4]="HeaderBidder"]=4,i[s[7]="Tam"]=7,i[s[8]="TamDeal"]=8,i),l.ProtoResetCapTypeEnum=(s={},(i=Object.create(s))[s[0]="TimeCapping"]=0,i[s[1]="ContentCapping"]=1,i[s[2]="OpportunityCapping"]=2,i),l.ProtoAdSlotsEnum=(s={},(i=Object.create(s))[s[0]="PreRoll"]=0,i[s[1]="MidRoll"]=1,i[s[2]="PostRoll"]=2,i),l.ProtoLineItemPriority=(s={},(i=Object.create(s))[s[0]="House"]=0,i[s[1]="Default"]=1,i[s[2]="Preferred"]=2,i[s[3]="Top"]=3,i),l.ProtoAdSkipMode=(s={},(i=Object.create(s))[s[0]="IfLongerThan31Sec"]=0,i[s[1]="Always"]=1,i[s[2]="Never"]=2,i[s[3]="NotAplicable"]=3,i),l.ProtoAdType=(s={},(i=Object.create(s))[s[0]="Video"]=0,i[s[1]="Overlay"]=1,i),l.ProtoChoiceCriteriaEnum=(s={},(i=Object.create(s))[s[0]="Only"]=0,i[s[1]="Except"]=1,i),l.ProtoLineItemAdBreakTypeEnum=(s={},(i=Object.create(s))[s[1]="All"]=1,i[s[2]="SingleAd"]=2,i[s[3]="AdPod"]=3,i),l.ProtoLineItemTargetingTypeEnum=(s={},(i=Object.create(s))[s[0]="Only"]=0,i[s[1]="Except"]=1,i),l.ProtoLineItemAdSlotTargetingTypeEnum=(s={},(i=Object.create(s))[s[1]="SpecificSlots"]=1,i[s[2]="Interval"]=2,i),l.ProtoLineItemPauseAdOutOfViewEnum=(s={},(i=Object.create(s))[s[0]="Default"]=0,i[s[1]="Strict"]=1,i),l.ProtoLineItemContextualTargetingEnum=(s={},(i=Object.create(s))[s[0]="IncludeAny"]=0,i[s[1]="IncludeAll"]=1,i[s[2]="ExcludeAny"]=2,i[s[3]="ExcludeAll"]=3,i),l.ProtoSizeChoiceCriteriaEnum=(s={},(i=Object.create(s))[s[0]="GreaterThan"]=0,i[s[1]="SmallerThan"]=1,i[s[2]="Between"]=2,i),l.ProtoLineItemAdBreakTargeting=(K.prototype.adRollType=0,K.prototype.adBreakTypeEnum=1,K.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoLineItemAdBreakTargeting;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.adRollType=e.int32();break;case 2:s.adBreakTypeEnum=e.int32();break;default:e.skipType(7&r)}}return s},K.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.adRollType=t.enums===String?"None":0,i.adBreakTypeEnum=t.enums===String?"All":1),null!=e.adRollType&&e.hasOwnProperty("adRollType")&&(i.adRollType=t.enums===String?l.ProtoAdBreakTypeEnum[e.adRollType]:e.adRollType),null!=e.adBreakTypeEnum&&e.hasOwnProperty("adBreakTypeEnum")&&(i.adBreakTypeEnum=t.enums===String?l.ProtoLineItemAdBreakTypeEnum[e.adBreakTypeEnum]:e.adBreakTypeEnum),i},K),l.ProtoLineItemAdPodTargeting=(J.prototype.targetingType=0,J.prototype.adSlotTargetingType=1,J.prototype.adSlotPositions=a.emptyArray,J.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoLineItemAdPodTargeting;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.targetingType=e.int32();break;case 2:s.adSlotTargetingType=e.int32();break;case 3:if(s.adSlotPositions&&s.adSlotPositions.length||(s.adSlotPositions=[]),2==(7&r))for(var n=e.uint32()+e.pos;e.pos<n;)s.adSlotPositions.push(e.int32());else s.adSlotPositions.push(e.int32());break;default:e.skipType(7&r)}}return s},J.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.adSlotPositions=[]),t.defaults&&(i.targetingType=t.enums===String?"Only":0,i.adSlotTargetingType=t.enums===String?"SpecificSlots":1),null!=e.targetingType&&e.hasOwnProperty("targetingType")&&(i.targetingType=t.enums===String?l.ProtoLineItemTargetingTypeEnum[e.targetingType]:e.targetingType),null!=e.adSlotTargetingType&&e.hasOwnProperty("adSlotTargetingType")&&(i.adSlotTargetingType=t.enums===String?l.ProtoLineItemAdSlotTargetingTypeEnum[e.adSlotTargetingType]:e.adSlotTargetingType),e.adSlotPositions&&e.adSlotPositions.length){i.adSlotPositions=[];for(var s=0;s<e.adSlotPositions.length;++s)i.adSlotPositions[s]=e.adSlotPositions[s]}return i},J),l.ProtoLineItemAdBreakSettings=(z.prototype.adBreakTargeting=a.emptyArray,z.prototype.adPodTargeting=null,z.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoLineItemAdBreakSettings;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.adBreakTargeting&&s.adBreakTargeting.length||(s.adBreakTargeting=[]),s.adBreakTargeting.push(l.ProtoLineItemAdBreakTargeting.decode(e,e.uint32()));break;case 2:s.adPodTargeting=l.ProtoLineItemAdPodTargeting.decode(e,e.uint32());break;default:e.skipType(7&r)}}return s},z.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.adBreakTargeting=[]),t.defaults&&(i.adPodTargeting=null),e.adBreakTargeting&&e.adBreakTargeting.length){i.adBreakTargeting=[];for(var s=0;s<e.adBreakTargeting.length;++s)i.adBreakTargeting[s]=l.ProtoLineItemAdBreakTargeting.toObject(e.adBreakTargeting[s],t)}return null!=e.adPodTargeting&&e.hasOwnProperty("adPodTargeting")&&(i.adPodTargeting=l.ProtoLineItemAdPodTargeting.toObject(e.adPodTargeting,t)),i},z),l.ProtoLineItem=(G.prototype.publisherLineItemId="",G.prototype.advertiserLineItemId="",G.prototype.adTag="",G.prototype.creativeType=0,G.prototype.sound=!1,G.prototype.viewability=!1,G.prototype.impressionTimeSpent=0,G.prototype.vendorId="",G.prototype.trackers=a.emptyArray,G.prototype.duration=0,G.prototype.renditions=a.emptyArray,G.prototype.mediaCreativeId="",G.prototype.ignoreFilledRequests=!1,G.prototype.requestCap=3,G.prototype.impressionCap=0,G.prototype.successRate=0,G.prototype.lineItemPriority=0,G.prototype.headerBidderBids="",G.prototype.headerBidderTimeout=0,G.prototype.mediaCreativeClickUrl="",G.prototype.resetRequestsCapTime=60,G.prototype.resetImpressionsCapTime=60,G.prototype.resetCapType=0,G.prototype.creativeHlsFileName="",G.prototype.timeBetweenRequests=0,G.prototype.skipMode=0,G.prototype.mediaIdTargeting=null,G.prototype.mediaKeywordsTargeting=null,G.prototype.mediaLanguageTargeting=null,G.prototype.adType=0,G.prototype.overlayTime=30,G.prototype.floorPrice=0,G.prototype.adBreakSettings=null,G.prototype.floorPrices=a.emptyArray,G.prototype.bidRate=0,G.prototype.pauseAdOutOfView=0,G.prototype.moatTrackingEnabled=!1,G.prototype.cnxCreativeId="",G.prototype.blockedDomainsRevisionNumber=0,G.prototype.advertiserContextualTargeting=a.emptyArray,G.prototype.publisherContextualTargeting=a.emptyArray,G.prototype.amazonDealId="",G.prototype.playerSizeTargetings=null,G.prototype.playerSize="",G.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoLineItem;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.publisherLineItemId=e.string();break;case 2:s.advertiserLineItemId=e.string();break;case 3:s.adTag=e.string();break;case 4:s.creativeType=e.int32();break;case 6:s.sound=e.bool();break;case 7:s.viewability=e.bool();break;case 9:s.impressionTimeSpent=e.int32();break;case 10:s.vendorId=e.string();break;case 12:s.trackers&&s.trackers.length||(s.trackers=[]),s.trackers.push(l.CreativeTrackerViewModel.decode(e,e.uint32()));break;case 13:s.duration=e.int32();break;case 14:s.renditions&&s.renditions.length||(s.renditions=[]),s.renditions.push(l.ProtoRendition.decode(e,e.uint32()));break;case 15:s.mediaCreativeId=e.string();break;case 16:s.ignoreFilledRequests=e.bool();break;case 17:s.requestCap=e.int32();break;case 18:s.impressionCap=e.int32();break;case 19:s.successRate=e.double();break;case 20:s.lineItemPriority=e.int32();break;case 21:s.headerBidderBids=e.string();break;case 22:s.headerBidderTimeout=e.int32();break;case 23:s.mediaCreativeClickUrl=e.string();break;case 24:s.resetRequestsCapTime=e.int32();break;case 25:s.resetImpressionsCapTime=e.int32();break;case 26:s.resetCapType=e.int32();break;case 27:s.creativeHlsFileName=e.string();break;case 28:s.timeBetweenRequests=e.int32();break;case 29:s.skipMode=e.int32();break;case 30:s.mediaIdTargeting=l.ProtoTargetingChoiceModel.decode(e,e.uint32());break;case 31:s.mediaKeywordsTargeting=l.ProtoTargetingChoiceModel.decode(e,e.uint32());break;case 32:s.mediaLanguageTargeting=l.ProtoTargetingChoiceModel.decode(e,e.uint32());break;case 33:s.adType=e.int32();break;case 34:s.overlayTime=e.int32();break;case 35:s.floorPrice=e.double();break;case 36:s.adBreakSettings=l.ProtoLineItemAdBreakSettings.decode(e,e.uint32());break;case 38:if(s.floorPrices&&s.floorPrices.length||(s.floorPrices=[]),2==(7&r))for(var n=e.uint32()+e.pos;e.pos<n;)s.floorPrices.push(e.double());else s.floorPrices.push(e.double());break;case 39:s.bidRate=e.double();break;case 40:s.pauseAdOutOfView=e.int32();break;case 41:s.moatTrackingEnabled=e.bool();break;case 42:s.cnxCreativeId=e.string();break;case 44:s.blockedDomainsRevisionNumber=e.int32();break;case 45:s.advertiserContextualTargeting&&s.advertiserContextualTargeting.length||(s.advertiserContextualTargeting=[]),s.advertiserContextualTargeting.push(l.ProtoContextualTargetingCaseModel.decode(e,e.uint32()));break;case 46:s.publisherContextualTargeting&&s.publisherContextualTargeting.length||(s.publisherContextualTargeting=[]),s.publisherContextualTargeting.push(l.ProtoContextualTargetingCaseModel.decode(e,e.uint32()));break;case 48:s.amazonDealId=e.string();break;case 47:s.playerSizeTargetings=l.ProtoPlayerSizeTargetings.decode(e,e.uint32());break;case 101:s.playerSize=e.string();break;default:e.skipType(7&r)}}return s},G.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.trackers=[],i.renditions=[],i.floorPrices=[],i.advertiserContextualTargeting=[],i.publisherContextualTargeting=[]),t.defaults&&(i.publisherLineItemId="",i.advertiserLineItemId="",i.adTag="",i.creativeType=t.enums===String?"ThirdParty":0,i.sound=!1,i.viewability=!1,i.impressionTimeSpent=0,i.vendorId="",i.duration=0,i.mediaCreativeId="",i.ignoreFilledRequests=!1,i.requestCap=3,i.impressionCap=0,i.successRate=0,i.lineItemPriority=t.enums===String?"House":0,i.headerBidderBids="",i.headerBidderTimeout=0,i.mediaCreativeClickUrl="",i.resetRequestsCapTime=60,i.resetImpressionsCapTime=60,i.resetCapType=t.enums===String?"TimeCapping":0,i.creativeHlsFileName="",i.timeBetweenRequests=0,i.skipMode=t.enums===String?"IfLongerThan31Sec":0,i.mediaIdTargeting=null,i.mediaKeywordsTargeting=null,i.mediaLanguageTargeting=null,i.adType=t.enums===String?"Video":0,i.overlayTime=30,i.floorPrice=0,i.adBreakSettings=null,i.bidRate=0,i.pauseAdOutOfView=t.enums===String?"Default":0,i.moatTrackingEnabled=!1,i.cnxCreativeId="",i.blockedDomainsRevisionNumber=0,i.playerSizeTargetings=null,i.amazonDealId="",i.playerSize=""),null!=e.publisherLineItemId&&e.hasOwnProperty("publisherLineItemId")&&(i.publisherLineItemId=e.publisherLineItemId),null!=e.advertiserLineItemId&&e.hasOwnProperty("advertiserLineItemId")&&(i.advertiserLineItemId=e.advertiserLineItemId),null!=e.adTag&&e.hasOwnProperty("adTag")&&(i.adTag=e.adTag),null!=e.creativeType&&e.hasOwnProperty("creativeType")&&(i.creativeType=t.enums===String?l.ProtoCreativeTypeEnum[e.creativeType]:e.creativeType),null!=e.sound&&e.hasOwnProperty("sound")&&(i.sound=e.sound),null!=e.viewability&&e.hasOwnProperty("viewability")&&(i.viewability=e.viewability),null!=e.impressionTimeSpent&&e.hasOwnProperty("impressionTimeSpent")&&(i.impressionTimeSpent=e.impressionTimeSpent),null!=e.vendorId&&e.hasOwnProperty("vendorId")&&(i.vendorId=e.vendorId),e.trackers&&e.trackers.length){i.trackers=[];for(var s=0;s<e.trackers.length;++s)i.trackers[s]=l.CreativeTrackerViewModel.toObject(e.trackers[s],t)}if(null!=e.duration&&e.hasOwnProperty("duration")&&(i.duration=e.duration),e.renditions&&e.renditions.length)for(i.renditions=[],s=0;s<e.renditions.length;++s)i.renditions[s]=l.ProtoRendition.toObject(e.renditions[s],t);if(null!=e.mediaCreativeId&&e.hasOwnProperty("mediaCreativeId")&&(i.mediaCreativeId=e.mediaCreativeId),null!=e.ignoreFilledRequests&&e.hasOwnProperty("ignoreFilledRequests")&&(i.ignoreFilledRequests=e.ignoreFilledRequests),null!=e.requestCap&&e.hasOwnProperty("requestCap")&&(i.requestCap=e.requestCap),null!=e.impressionCap&&e.hasOwnProperty("impressionCap")&&(i.impressionCap=e.impressionCap),null!=e.successRate&&e.hasOwnProperty("successRate")&&(i.successRate=t.json&&!isFinite(e.successRate)?String(e.successRate):e.successRate),null!=e.lineItemPriority&&e.hasOwnProperty("lineItemPriority")&&(i.lineItemPriority=t.enums===String?l.ProtoLineItemPriority[e.lineItemPriority]:e.lineItemPriority),null!=e.headerBidderBids&&e.hasOwnProperty("headerBidderBids")&&(i.headerBidderBids=e.headerBidderBids),null!=e.headerBidderTimeout&&e.hasOwnProperty("headerBidderTimeout")&&(i.headerBidderTimeout=e.headerBidderTimeout),null!=e.mediaCreativeClickUrl&&e.hasOwnProperty("mediaCreativeClickUrl")&&(i.mediaCreativeClickUrl=e.mediaCreativeClickUrl),null!=e.resetRequestsCapTime&&e.hasOwnProperty("resetRequestsCapTime")&&(i.resetRequestsCapTime=e.resetRequestsCapTime),null!=e.resetImpressionsCapTime&&e.hasOwnProperty("resetImpressionsCapTime")&&(i.resetImpressionsCapTime=e.resetImpressionsCapTime),null!=e.resetCapType&&e.hasOwnProperty("resetCapType")&&(i.resetCapType=t.enums===String?l.ProtoResetCapTypeEnum[e.resetCapType]:e.resetCapType),null!=e.creativeHlsFileName&&e.hasOwnProperty("creativeHlsFileName")&&(i.creativeHlsFileName=e.creativeHlsFileName),null!=e.timeBetweenRequests&&e.hasOwnProperty("timeBetweenRequests")&&(i.timeBetweenRequests=e.timeBetweenRequests),null!=e.skipMode&&e.hasOwnProperty("skipMode")&&(i.skipMode=t.enums===String?l.ProtoAdSkipMode[e.skipMode]:e.skipMode),null!=e.mediaIdTargeting&&e.hasOwnProperty("mediaIdTargeting")&&(i.mediaIdTargeting=l.ProtoTargetingChoiceModel.toObject(e.mediaIdTargeting,t)),null!=e.mediaKeywordsTargeting&&e.hasOwnProperty("mediaKeywordsTargeting")&&(i.mediaKeywordsTargeting=l.ProtoTargetingChoiceModel.toObject(e.mediaKeywordsTargeting,t)),null!=e.mediaLanguageTargeting&&e.hasOwnProperty("mediaLanguageTargeting")&&(i.mediaLanguageTargeting=l.ProtoTargetingChoiceModel.toObject(e.mediaLanguageTargeting,t)),null!=e.adType&&e.hasOwnProperty("adType")&&(i.adType=t.enums===String?l.ProtoAdType[e.adType]:e.adType),null!=e.overlayTime&&e.hasOwnProperty("overlayTime")&&(i.overlayTime=e.overlayTime),null!=e.floorPrice&&e.hasOwnProperty("floorPrice")&&(i.floorPrice=t.json&&!isFinite(e.floorPrice)?String(e.floorPrice):e.floorPrice),null!=e.adBreakSettings&&e.hasOwnProperty("adBreakSettings")&&(i.adBreakSettings=l.ProtoLineItemAdBreakSettings.toObject(e.adBreakSettings,t)),e.floorPrices&&e.floorPrices.length)for(i.floorPrices=[],s=0;s<e.floorPrices.length;++s)i.floorPrices[s]=t.json&&!isFinite(e.floorPrices[s])?String(e.floorPrices[s]):e.floorPrices[s];if(null!=e.bidRate&&e.hasOwnProperty("bidRate")&&(i.bidRate=t.json&&!isFinite(e.bidRate)?String(e.bidRate):e.bidRate),null!=e.pauseAdOutOfView&&e.hasOwnProperty("pauseAdOutOfView")&&(i.pauseAdOutOfView=t.enums===String?l.ProtoLineItemPauseAdOutOfViewEnum[e.pauseAdOutOfView]:e.pauseAdOutOfView),null!=e.moatTrackingEnabled&&e.hasOwnProperty("moatTrackingEnabled")&&(i.moatTrackingEnabled=e.moatTrackingEnabled),null!=e.cnxCreativeId&&e.hasOwnProperty("cnxCreativeId")&&(i.cnxCreativeId=e.cnxCreativeId),null!=e.blockedDomainsRevisionNumber&&e.hasOwnProperty("blockedDomainsRevisionNumber")&&(i.blockedDomainsRevisionNumber=e.blockedDomainsRevisionNumber),e.advertiserContextualTargeting&&e.advertiserContextualTargeting.length)for(i.advertiserContextualTargeting=[],s=0;s<e.advertiserContextualTargeting.length;++s)i.advertiserContextualTargeting[s]=l.ProtoContextualTargetingCaseModel.toObject(e.advertiserContextualTargeting[s],t);if(e.publisherContextualTargeting&&e.publisherContextualTargeting.length)for(i.publisherContextualTargeting=[],s=0;s<e.publisherContextualTargeting.length;++s)i.publisherContextualTargeting[s]=l.ProtoContextualTargetingCaseModel.toObject(e.publisherContextualTargeting[s],t);return null!=e.playerSizeTargetings&&e.hasOwnProperty("playerSizeTargetings")&&(i.playerSizeTargetings=l.ProtoPlayerSizeTargetings.toObject(e.playerSizeTargetings,t)),null!=e.amazonDealId&&e.hasOwnProperty("amazonDealId")&&(i.amazonDealId=e.amazonDealId),null!=e.playerSize&&e.hasOwnProperty("playerSize")&&(i.playerSize=e.playerSize),i},G),l.ProtoTargetingChoiceModel=($.prototype.choiceCriteria=0,$.prototype.items=a.emptyArray,$.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoTargetingChoiceModel;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.choiceCriteria=e.int32();break;case 2:s.items&&s.items.length||(s.items=[]),s.items.push(e.string());break;default:e.skipType(7&r)}}return s},$.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.items=[]),t.defaults&&(i.choiceCriteria=t.enums===String?"Only":0),null!=e.choiceCriteria&&e.hasOwnProperty("choiceCriteria")&&(i.choiceCriteria=t.enums===String?l.ProtoChoiceCriteriaEnum[e.choiceCriteria]:e.choiceCriteria),e.items&&e.items.length){i.items=[];for(var s=0;s<e.items.length;++s)i.items[s]=e.items[s]}return i},$),l.ProtoContextualTargetingCaseModel=(W.prototype.filters=a.emptyArray,W.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoContextualTargetingCaseModel;e.pos<i;){var r=e.uint32();r>>>3==1?(s.filters&&s.filters.length||(s.filters=[]),s.filters.push(l.ProtoContextualTargetingFilterModel.decode(e,e.uint32()))):e.skipType(7&r)}return s},W.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.filters=[]),e.filters&&e.filters.length){i.filters=[];for(var s=0;s<e.filters.length;++s)i.filters[s]=l.ProtoContextualTargetingFilterModel.toObject(e.filters[s],t)}return i},W),l.ProtoContextualTargetingFilterModel=(q.prototype.type=0,q.prototype.items=a.emptyArray,q.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoContextualTargetingFilterModel;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.type=e.int32();break;case 2:s.items&&s.items.length||(s.items=[]),s.items.push(e.string());break;default:e.skipType(7&r)}}return s},q.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.items=[]),t.defaults&&(i.type=t.enums===String?"IncludeAny":0),null!=e.type&&e.hasOwnProperty("type")&&(i.type=t.enums===String?l.ProtoLineItemContextualTargetingEnum[e.type]:e.type),e.items&&e.items.length){i.items=[];for(var s=0;s<e.items.length;++s)i.items[s]=e.items[s]}return i},q),l.ProtoPlayerSizeTargetings=(H.prototype.sizeChoiceCriteria=0,H.prototype.minWidth=0,H.prototype.maxWidth=0,H.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoPlayerSizeTargetings;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.sizeChoiceCriteria=e.int32();break;case 2:s.minWidth=e.int32();break;case 3:s.maxWidth=e.int32();break;default:e.skipType(7&r)}}return s},H.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.sizeChoiceCriteria=t.enums===String?"GreaterThan":0,i.minWidth=0,i.maxWidth=0),null!=e.sizeChoiceCriteria&&e.hasOwnProperty("sizeChoiceCriteria")&&(i.sizeChoiceCriteria=t.enums===String?l.ProtoSizeChoiceCriteriaEnum[e.sizeChoiceCriteria]:e.sizeChoiceCriteria),null!=e.minWidth&&e.hasOwnProperty("minWidth")&&(i.minWidth=e.minWidth),null!=e.maxWidth&&e.hasOwnProperty("maxWidth")&&(i.maxWidth=e.maxWidth),i},H),l.ProtoRendition=(V.prototype.height=0,V.prototype.codec="",V.prototype.file="",V.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoRendition;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.height=e.int32();break;case 2:s.codec=e.string();break;case 3:s.file=e.string();break;default:e.skipType(7&r)}}return s},V.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.height=0,i.codec="",i.file=""),null!=e.height&&e.hasOwnProperty("height")&&(i.height=e.height),null!=e.codec&&e.hasOwnProperty("codec")&&(i.codec=e.codec),null!=e.file&&e.hasOwnProperty("file")&&(i.file=e.file),i},V),l.ProtoLiveMediaMetadataResponse=(N.prototype.startDate="",N.prototype.outputUrl="",N.prototype.thumbnailUrl="",N.prototype.altText="",N.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoLiveMediaMetadataResponse;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.startDate=e.string();break;case 2:s.outputUrl=e.string();break;case 3:s.thumbnailUrl=e.string();break;case 4:s.altText=e.string();break;default:e.skipType(7&r)}}return s},N.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.startDate="",i.outputUrl="",i.thumbnailUrl="",i.altText=""),null!=e.startDate&&e.hasOwnProperty("startDate")&&(i.startDate=e.startDate),null!=e.outputUrl&&e.hasOwnProperty("outputUrl")&&(i.outputUrl=e.outputUrl),null!=e.thumbnailUrl&&e.hasOwnProperty("thumbnailUrl")&&(i.thumbnailUrl=e.thumbnailUrl),null!=e.altText&&e.hasOwnProperty("altText")&&(i.altText=e.altText),i},N),l.ProtoLoggingLevelEnum=(s={},(i=Object.create(s))[s[0]="FATAL"]=0,i[s[1]="WARNING"]=1,i[s[2]="INFO"]=2,i),l.ProtoLoggingRequest=(U.prototype.message="",U.prototype.version=0,U.prototype.level=0,U.prototype.callStack="",U.prototype.pageUrl="",U.prototype.exception="",U.prototype.sessionId="",U.encode=function(e,t){return t=t||n.create(),null!=e.message&&e.hasOwnProperty("message")&&t.uint32(10).string(e.message),null!=e.version&&e.hasOwnProperty("version")&&t.uint32(16).int32(e.version),null!=e.level&&e.hasOwnProperty("level")&&t.uint32(24).int32(e.level),null!=e.callStack&&e.hasOwnProperty("callStack")&&t.uint32(34).string(e.callStack),null!=e.pageUrl&&e.hasOwnProperty("pageUrl")&&t.uint32(42).string(e.pageUrl),null!=e.exception&&e.hasOwnProperty("exception")&&t.uint32(50).string(e.exception),null!=e.sessionId&&e.hasOwnProperty("sessionId")&&t.uint32(58).string(e.sessionId),t},U.fromObject=function(e){if(e instanceof l.ProtoLoggingRequest)return e;var t=new l.ProtoLoggingRequest;switch(null!=e.message&&(t.message=String(e.message)),null!=e.version&&(t.version=0|e.version),e.level){case"FATAL":case 0:t.level=0;break;case"WARNING":case 1:t.level=1;break;case"INFO":case 2:t.level=2}return null!=e.callStack&&(t.callStack=String(e.callStack)),null!=e.pageUrl&&(t.pageUrl=String(e.pageUrl)),null!=e.exception&&(t.exception=String(e.exception)),null!=e.sessionId&&(t.sessionId=String(e.sessionId)),t},U.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},U),l.ProtoSpriteSheet=(F.prototype.file="",F.prototype.height=0,F.prototype.count=0,F.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoSpriteSheet;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.file=e.string();break;case 2:s.height=e.int32();break;case 3:s.count=e.int32();break;default:e.skipType(7&r)}}return s},F.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.file="",i.height=0,i.count=0),null!=e.file&&e.hasOwnProperty("file")&&(i.file=e.file),null!=e.height&&e.hasOwnProperty("height")&&(i.height=e.height),null!=e.count&&e.hasOwnProperty("count")&&(i.count=e.count),i},F),l.ProtoTrack=(_.prototype.file="",_.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoTrack;e.pos<i;){var r=e.uint32();r>>>3==1?s.file=e.string():e.skipType(7&r)}return s},_.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.file=""),null!=e.file&&e.hasOwnProperty("file")&&(i.file=e.file),i},_),l.ProtoCustomField=(D.prototype.name="",D.prototype.value="",D.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoCustomField;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.name=e.string();break;case 2:s.value=e.string();break;default:e.skipType(7&r)}}return s},D.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.name="",i.value=""),null!=e.name&&e.hasOwnProperty("name")&&(i.name=e.name),null!=e.value&&e.hasOwnProperty("value")&&(i.value=e.value),i},D),l.ProtoMediaMetadataResponse=(j.prototype.title="",j.prototype.description="",j.prototype.duration=0,j.prototype.clickUrl="",j.prototype.keywordList=a.emptyArray,j.prototype.trackList=a.emptyArray,j.prototype.spriteSheet=null,j.prototype.thumbnail="",j.prototype.renditionList=a.emptyArray,j.prototype.customFields=a.emptyArray,j.prototype.hlsFilePath="",j.prototype.languageId="",j.prototype.sourceItemId="",j.prototype.altText="",j.prototype.videoIndexes=a.emptyArray,j.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoMediaMetadataResponse;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.title=e.string();break;case 2:s.description=e.string();break;case 3:s.duration=e.int32();break;case 4:s.clickUrl=e.string();break;case 5:s.keywordList&&s.keywordList.length||(s.keywordList=[]),s.keywordList.push(e.string());break;case 6:s.trackList&&s.trackList.length||(s.trackList=[]),s.trackList.push(l.ProtoTrack.decode(e,e.uint32()));break;case 7:s.spriteSheet=l.ProtoSpriteSheet.decode(e,e.uint32());break;case 8:s.thumbnail=e.string();break;case 9:s.renditionList&&s.renditionList.length||(s.renditionList=[]),s.renditionList.push(l.ProtoRendition.decode(e,e.uint32()));break;case 10:s.customFields&&s.customFields.length||(s.customFields=[]),s.customFields.push(l.ProtoCustomField.decode(e,e.uint32()));break;case 11:s.hlsFilePath=e.string();break;case 12:s.languageId=e.string();break;case 13:s.sourceItemId=e.string();break;case 14:s.altText=e.string();break;case 15:s.videoIndexes&&s.videoIndexes.length||(s.videoIndexes=[]),s.videoIndexes.push(e.string());break;default:e.skipType(7&r)}}return s},j.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.keywordList=[],i.trackList=[],i.renditionList=[],i.customFields=[],i.videoIndexes=[]),t.defaults&&(i.title="",i.description="",i.duration=0,i.clickUrl="",i.spriteSheet=null,i.thumbnail="",i.hlsFilePath="",i.languageId="",i.sourceItemId="",i.altText=""),null!=e.title&&e.hasOwnProperty("title")&&(i.title=e.title),null!=e.description&&e.hasOwnProperty("description")&&(i.description=e.description),null!=e.duration&&e.hasOwnProperty("duration")&&(i.duration=e.duration),null!=e.clickUrl&&e.hasOwnProperty("clickUrl")&&(i.clickUrl=e.clickUrl),e.keywordList&&e.keywordList.length){i.keywordList=[];for(var s=0;s<e.keywordList.length;++s)i.keywordList[s]=e.keywordList[s]}if(e.trackList&&e.trackList.length)for(i.trackList=[],s=0;s<e.trackList.length;++s)i.trackList[s]=l.ProtoTrack.toObject(e.trackList[s],t);if(null!=e.spriteSheet&&e.hasOwnProperty("spriteSheet")&&(i.spriteSheet=l.ProtoSpriteSheet.toObject(e.spriteSheet,t)),null!=e.thumbnail&&e.hasOwnProperty("thumbnail")&&(i.thumbnail=e.thumbnail),e.renditionList&&e.renditionList.length)for(i.renditionList=[],s=0;s<e.renditionList.length;++s)i.renditionList[s]=l.ProtoRendition.toObject(e.renditionList[s],t);if(e.customFields&&e.customFields.length)for(i.customFields=[],s=0;s<e.customFields.length;++s)i.customFields[s]=l.ProtoCustomField.toObject(e.customFields[s],t);if(null!=e.hlsFilePath&&e.hasOwnProperty("hlsFilePath")&&(i.hlsFilePath=e.hlsFilePath),null!=e.languageId&&e.hasOwnProperty("languageId")&&(i.languageId=e.languageId),null!=e.sourceItemId&&e.hasOwnProperty("sourceItemId")&&(i.sourceItemId=e.sourceItemId),null!=e.altText&&e.hasOwnProperty("altText")&&(i.altText=e.altText),e.videoIndexes&&e.videoIndexes.length)for(i.videoIndexes=[],s=0;s<e.videoIndexes.length;++s)i.videoIndexes[s]=e.videoIndexes[s];return i},j),l.ProtoMediaTypeEnum=(s={},(i=Object.create(s))[s[0]="Image"]=0,i[s[1]="Video"]=1,i),l.ProtoRtbRequest=(B.prototype.metadata=null,B.prototype.coppa=!1,B.prototype.refererUrl="",B.prototype.testMode=!1,B.prototype.videoWidth=0,B.prototype.videoHeight=0,B.prototype.gdprCompliant=!1,B.prototype.soundOn=!1,B.prototype.gdprConsentData="",B.prototype.explorationMode=!1,B.prototype.viewability=!1,B.prototype.outstream=!1,B.prototype.domainURL="",B.prototype.isClickToPlay=!1,B.prototype.appVersion="",B.prototype.deviceID="",B.prototype.lineItems=a.emptyObject,B.prototype.isCcpaBlockingUserInfo=!1,B.prototype.usPrivacyString="",B.prototype.adSkippability=0,B.prototype.skipAdAfter=5,B.prototype.gdprConsentMode=0,B.prototype.maxAdDuration=180,B.prototype.customMacros=a.emptyObject,B.prototype.adsMustBeSkippableIfLongerThan=31,B.encode=function(e,t){if(t=t||n.create(),null!=e.metadata&&e.hasOwnProperty("metadata")&&l.MetadataModel.encode(e.metadata,t.uint32(10).fork()).ldelim(),null!=e.coppa&&e.hasOwnProperty("coppa")&&t.uint32(32).bool(e.coppa),null!=e.refererUrl&&e.hasOwnProperty("refererUrl")&&t.uint32(42).string(e.refererUrl),null!=e.testMode&&e.hasOwnProperty("testMode")&&t.uint32(48).bool(e.testMode),null!=e.videoWidth&&e.hasOwnProperty("videoWidth")&&t.uint32(56).int32(e.videoWidth),null!=e.videoHeight&&e.hasOwnProperty("videoHeight")&&t.uint32(64).int32(e.videoHeight),null!=e.gdprCompliant&&e.hasOwnProperty("gdprCompliant")&&t.uint32(72).bool(e.gdprCompliant),null!=e.soundOn&&e.hasOwnProperty("soundOn")&&t.uint32(80).bool(e.soundOn),null!=e.gdprConsentData&&e.hasOwnProperty("gdprConsentData")&&t.uint32(90).string(e.gdprConsentData),null!=e.explorationMode&&e.hasOwnProperty("explorationMode")&&t.uint32(96).bool(e.explorationMode),null!=e.viewability&&e.hasOwnProperty("viewability")&&t.uint32(104).bool(e.viewability),null!=e.outstream&&e.hasOwnProperty("outstream")&&t.uint32(112).bool(e.outstream),null!=e.domainURL&&e.hasOwnProperty("domainURL")&&t.uint32(130).string(e.domainURL),null!=e.isClickToPlay&&e.hasOwnProperty("isClickToPlay")&&t.uint32(144).bool(e.isClickToPlay),null!=e.appVersion&&e.hasOwnProperty("appVersion")&&t.uint32(170).string(e.appVersion),null!=e.deviceID&&e.hasOwnProperty("deviceID")&&t.uint32(194).string(e.deviceID),null!=e.lineItems&&e.hasOwnProperty("lineItems"))for(var i=Object.keys(e.lineItems),s=0;s<i.length;++s)t.uint32(202).fork().uint32(10).string(i[s]),l.ProtoRtbRequestLineItemEntry.encode(e.lineItems[i[s]],t.uint32(18).fork()).ldelim().ldelim();if(null!=e.isCcpaBlockingUserInfo&&e.hasOwnProperty("isCcpaBlockingUserInfo")&&t.uint32(208).bool(e.isCcpaBlockingUserInfo),null!=e.usPrivacyString&&e.hasOwnProperty("usPrivacyString")&&t.uint32(218).string(e.usPrivacyString),null!=e.adSkippability&&e.hasOwnProperty("adSkippability")&&t.uint32(256).int32(e.adSkippability),null!=e.skipAdAfter&&e.hasOwnProperty("skipAdAfter")&&t.uint32(264).int32(e.skipAdAfter),null!=e.gdprConsentMode&&e.hasOwnProperty("gdprConsentMode")&&t.uint32(288).int32(e.gdprConsentMode),null!=e.maxAdDuration&&e.hasOwnProperty("maxAdDuration")&&t.uint32(296).int32(e.maxAdDuration),null!=e.customMacros&&e.hasOwnProperty("customMacros"))for(i=Object.keys(e.customMacros),s=0;s<i.length;++s)t.uint32(306).fork().uint32(10).string(i[s]).uint32(18).string(e.customMacros[i[s]]).ldelim();return null!=e.adsMustBeSkippableIfLongerThan&&e.hasOwnProperty("adsMustBeSkippableIfLongerThan")&&t.uint32(320).int32(e.adsMustBeSkippableIfLongerThan),t},B.fromObject=function(e){if(e instanceof l.ProtoRtbRequest)return e;var t=new l.ProtoRtbRequest;if(null!=e.metadata){if("object"!=typeof e.metadata)throw TypeError(".ProtoRtbRequest.metadata: object expected");t.metadata=l.MetadataModel.fromObject(e.metadata)}if(null!=e.coppa&&(t.coppa=Boolean(e.coppa)),null!=e.refererUrl&&(t.refererUrl=String(e.refererUrl)),null!=e.testMode&&(t.testMode=Boolean(e.testMode)),null!=e.videoWidth&&(t.videoWidth=0|e.videoWidth),null!=e.videoHeight&&(t.videoHeight=0|e.videoHeight),null!=e.gdprCompliant&&(t.gdprCompliant=Boolean(e.gdprCompliant)),null!=e.soundOn&&(t.soundOn=Boolean(e.soundOn)),null!=e.gdprConsentData&&(t.gdprConsentData=String(e.gdprConsentData)),null!=e.explorationMode&&(t.explorationMode=Boolean(e.explorationMode)),null!=e.viewability&&(t.viewability=Boolean(e.viewability)),null!=e.outstream&&(t.outstream=Boolean(e.outstream)),null!=e.domainURL&&(t.domainURL=String(e.domainURL)),null!=e.isClickToPlay&&(t.isClickToPlay=Boolean(e.isClickToPlay)),null!=e.appVersion&&(t.appVersion=String(e.appVersion)),null!=e.deviceID&&(t.deviceID=String(e.deviceID)),e.lineItems){if("object"!=typeof e.lineItems)throw TypeError(".ProtoRtbRequest.lineItems: object expected");t.lineItems={};for(var i=Object.keys(e.lineItems),s=0;s<i.length;++s){if("object"!=typeof e.lineItems[i[s]])throw TypeError(".ProtoRtbRequest.lineItems: object expected");t.lineItems[i[s]]=l.ProtoRtbRequestLineItemEntry.fromObject(e.lineItems[i[s]])}}switch(null!=e.isCcpaBlockingUserInfo&&(t.isCcpaBlockingUserInfo=Boolean(e.isCcpaBlockingUserInfo)),null!=e.usPrivacyString&&(t.usPrivacyString=String(e.usPrivacyString)),e.adSkippability){case"IfLongerThan":case 0:t.adSkippability=0;break;case"Always":case 1:t.adSkippability=1;break;case"NoRestrictions":case 2:t.adSkippability=2}switch(null!=e.skipAdAfter&&(t.skipAdAfter=0|e.skipAdAfter),e.gdprConsentMode){case"Unknown":case 0:t.gdprConsentMode=0;break;case"NoCmp":case 1:t.gdprConsentMode=1;break;case"NoConsent":case 2:t.gdprConsentMode=2;break;case"NoConnatixConsent":case 3:t.gdprConsentMode=3;break;case"NotAllDemandConsent":case 4:t.gdprConsentMode=4;break;case"AllGood":case 5:t.gdprConsentMode=5}if(null!=e.maxAdDuration&&(t.maxAdDuration=0|e.maxAdDuration),e.customMacros){if("object"!=typeof e.customMacros)throw TypeError(".ProtoRtbRequest.customMacros: object expected");for(t.customMacros={},i=Object.keys(e.customMacros),s=0;s<i.length;++s)t.customMacros[i[s]]=String(e.customMacros[i[s]])}return null!=e.adsMustBeSkippableIfLongerThan&&(t.adsMustBeSkippableIfLongerThan=0|e.adsMustBeSkippableIfLongerThan),t},B.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},B),l.ProtoRtbRequestLineItemEntry=(R.prototype.availableRequests=0,R.prototype.cachedFloorPrice=0,R.prototype.ignoredFloorPriceFactorIndexes=a.emptyArray,R.prototype.gdprConsent=!1,R.prototype.publisherLineItemId="",R.prototype.slotWidth=0,R.prototype.slotHeight=0,R.encode=function(e,t){if(t=t||n.create(),null!=e.availableRequests&&e.hasOwnProperty("availableRequests")&&t.uint32(8).int32(e.availableRequests),null!=e.cachedFloorPrice&&e.hasOwnProperty("cachedFloorPrice")&&t.uint32(17).double(e.cachedFloorPrice),null!=e.ignoredFloorPriceFactorIndexes&&e.ignoredFloorPriceFactorIndexes.length){t.uint32(26).fork();for(var i=0;i<e.ignoredFloorPriceFactorIndexes.length;++i)t.int32(e.ignoredFloorPriceFactorIndexes[i]);t.ldelim()}return null!=e.gdprConsent&&e.hasOwnProperty("gdprConsent")&&t.uint32(32).bool(e.gdprConsent),null!=e.publisherLineItemId&&e.hasOwnProperty("publisherLineItemId")&&t.uint32(42).string(e.publisherLineItemId),null!=e.slotWidth&&e.hasOwnProperty("slotWidth")&&t.uint32(48).int32(e.slotWidth),null!=e.slotHeight&&e.hasOwnProperty("slotHeight")&&t.uint32(56).int32(e.slotHeight),t},R.fromObject=function(e){if(e instanceof l.ProtoRtbRequestLineItemEntry)return e;var t=new l.ProtoRtbRequestLineItemEntry;if(null!=e.availableRequests&&(t.availableRequests=0|e.availableRequests),null!=e.cachedFloorPrice&&(t.cachedFloorPrice=Number(e.cachedFloorPrice)),e.ignoredFloorPriceFactorIndexes){if(!Array.isArray(e.ignoredFloorPriceFactorIndexes))throw TypeError(".ProtoRtbRequestLineItemEntry.ignoredFloorPriceFactorIndexes: array expected");t.ignoredFloorPriceFactorIndexes=[];for(var i=0;i<e.ignoredFloorPriceFactorIndexes.length;++i)t.ignoredFloorPriceFactorIndexes[i]=0|e.ignoredFloorPriceFactorIndexes[i]}return null!=e.gdprConsent&&(t.gdprConsent=Boolean(e.gdprConsent)),null!=e.publisherLineItemId&&(t.publisherLineItemId=String(e.publisherLineItemId)),null!=e.slotWidth&&(t.slotWidth=0|e.slotWidth),null!=e.slotHeight&&(t.slotHeight=0|e.slotHeight),t},R.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},R),l.ProtoRtbResponse=(M.prototype.lineItemResponses=a.emptyArray,M.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoRtbResponse;e.pos<i;){var r=e.uint32();r>>>3==3?(s.lineItemResponses&&s.lineItemResponses.length||(s.lineItemResponses=[]),s.lineItemResponses.push(l.ProtoRtbLineItem.decode(e,e.uint32()))):e.skipType(7&r)}return s},M.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.lineItemResponses=[]),e.lineItemResponses&&e.lineItemResponses.length){i.lineItemResponses=[];for(var s=0;s<e.lineItemResponses.length;++s)i.lineItemResponses[s]=l.ProtoRtbLineItem.toObject(e.lineItemResponses[s],t)}return i},M),l.ProtoRtbBid=(L.prototype.winNoticeUrl="",L.prototype.adQualityCheckUrl="",L.prototype.vastTag="",L.prototype.encryptedPrice="",L.prototype.creativeId="",L.prototype.seatId="",L.prototype.adomain="",L.prototype.syncedUser=!1,L.prototype.requestedFloorPrice=0,L.prototype.floorPriceFactorIndex=0,L.prototype.campaignId="",L.prototype.width=0,L.prototype.height=0,L.prototype.billingNoticeUrlList=a.emptyArray,L.prototype.mime="text/html",L.prototype.gtkpbp=0,L.prototype.successRate=0,L.prototype.impressionTimeSpent=0,L.prototype.bidRate=0,L.prototype.dspId="",L.prototype.cnxBidId="",L.prototype.logAuctionInformation=!1,L.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoRtbBid;e.pos<i;){var r=e.uint32();switch(r>>>3){case 2:s.winNoticeUrl=e.string();break;case 3:s.adQualityCheckUrl=e.string();break;case 4:s.vastTag=e.string();break;case 6:s.encryptedPrice=e.string();break;case 7:s.creativeId=e.string();break;case 8:s.seatId=e.string();break;case 9:s.adomain=e.string();break;case 10:s.syncedUser=e.bool();break;case 11:s.requestedFloorPrice=e.double();break;case 12:s.floorPriceFactorIndex=e.int32();break;case 13:s.campaignId=e.string();break;case 14:s.width=e.int32();break;case 15:s.height=e.int32();break;case 16:s.billingNoticeUrlList&&s.billingNoticeUrlList.length||(s.billingNoticeUrlList=[]),s.billingNoticeUrlList.push(e.string());break;case 17:s.mime=e.string();break;case 18:s.gtkpbp=e.double();break;case 19:s.successRate=e.double();break;case 20:s.impressionTimeSpent=e.int32();break;case 21:s.bidRate=e.double();break;case 22:s.dspId=e.string();break;case 23:s.cnxBidId=e.string();break;case 24:s.logAuctionInformation=e.bool();break;default:e.skipType(7&r)}}return s},L.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.billingNoticeUrlList=[]),t.defaults&&(i.winNoticeUrl="",i.adQualityCheckUrl="",i.vastTag="",i.encryptedPrice="",i.creativeId="",i.seatId="",i.adomain="",i.syncedUser=!1,i.requestedFloorPrice=0,i.floorPriceFactorIndex=0,i.campaignId="",i.width=0,i.height=0,i.mime="text/html",i.gtkpbp=0,i.successRate=0,i.impressionTimeSpent=0,i.bidRate=0,i.dspId="",i.cnxBidId="",i.logAuctionInformation=!1),null!=e.winNoticeUrl&&e.hasOwnProperty("winNoticeUrl")&&(i.winNoticeUrl=e.winNoticeUrl),null!=e.adQualityCheckUrl&&e.hasOwnProperty("adQualityCheckUrl")&&(i.adQualityCheckUrl=e.adQualityCheckUrl),null!=e.vastTag&&e.hasOwnProperty("vastTag")&&(i.vastTag=e.vastTag),null!=e.encryptedPrice&&e.hasOwnProperty("encryptedPrice")&&(i.encryptedPrice=e.encryptedPrice),null!=e.creativeId&&e.hasOwnProperty("creativeId")&&(i.creativeId=e.creativeId),null!=e.seatId&&e.hasOwnProperty("seatId")&&(i.seatId=e.seatId),null!=e.adomain&&e.hasOwnProperty("adomain")&&(i.adomain=e.adomain),null!=e.syncedUser&&e.hasOwnProperty("syncedUser")&&(i.syncedUser=e.syncedUser),null!=e.requestedFloorPrice&&e.hasOwnProperty("requestedFloorPrice")&&(i.requestedFloorPrice=t.json&&!isFinite(e.requestedFloorPrice)?String(e.requestedFloorPrice):e.requestedFloorPrice),null!=e.floorPriceFactorIndex&&e.hasOwnProperty("floorPriceFactorIndex")&&(i.floorPriceFactorIndex=e.floorPriceFactorIndex),null!=e.campaignId&&e.hasOwnProperty("campaignId")&&(i.campaignId=e.campaignId),null!=e.width&&e.hasOwnProperty("width")&&(i.width=e.width),null!=e.height&&e.hasOwnProperty("height")&&(i.height=e.height),e.billingNoticeUrlList&&e.billingNoticeUrlList.length){i.billingNoticeUrlList=[];for(var s=0;s<e.billingNoticeUrlList.length;++s)i.billingNoticeUrlList[s]=e.billingNoticeUrlList[s]}return null!=e.mime&&e.hasOwnProperty("mime")&&(i.mime=e.mime),null!=e.gtkpbp&&e.hasOwnProperty("gtkpbp")&&(i.gtkpbp=t.json&&!isFinite(e.gtkpbp)?String(e.gtkpbp):e.gtkpbp),null!=e.successRate&&e.hasOwnProperty("successRate")&&(i.successRate=t.json&&!isFinite(e.successRate)?String(e.successRate):e.successRate),null!=e.impressionTimeSpent&&e.hasOwnProperty("impressionTimeSpent")&&(i.impressionTimeSpent=e.impressionTimeSpent),null!=e.bidRate&&e.hasOwnProperty("bidRate")&&(i.bidRate=t.json&&!isFinite(e.bidRate)?String(e.bidRate):e.bidRate),null!=e.dspId&&e.hasOwnProperty("dspId")&&(i.dspId=e.dspId),null!=e.cnxBidId&&e.hasOwnProperty("cnxBidId")&&(i.cnxBidId=e.cnxBidId),null!=e.logAuctionInformation&&e.hasOwnProperty("logAuctionInformation")&&(i.logAuctionInformation=e.logAuctionInformation),i},L),l.ProtoRtbNoBid=(E.prototype.connatixReason=0,E.prototype.partnerReason=0,E.prototype.syncedUser=!1,E.prototype.requestedFloorPrice=0,E.prototype.floorPriceFactorIndex=0,E.prototype.partnerCustomHeaders="",E.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoRtbNoBid;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.connatixReason=e.int32();break;case 2:s.partnerReason=e.int32();break;case 3:s.syncedUser=e.bool();break;case 4:s.requestedFloorPrice=e.double();break;case 5:s.floorPriceFactorIndex=e.int32();break;case 6:s.partnerCustomHeaders=e.string();break;default:e.skipType(7&r)}}return s},E.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.connatixReason=t.enums===String?"RequestException":0,i.partnerReason=t.enums===String?"Unknown":0,i.syncedUser=!1,i.requestedFloorPrice=0,i.floorPriceFactorIndex=0,i.partnerCustomHeaders=""),null!=e.connatixReason&&e.hasOwnProperty("connatixReason")&&(i.connatixReason=t.enums===String?l.ConnatixNoBidReasonEnum[e.connatixReason]:e.connatixReason),null!=e.partnerReason&&e.hasOwnProperty("partnerReason")&&(i.partnerReason=t.enums===String?l.PartnerNoBidReasonEnum[e.partnerReason]:e.partnerReason),null!=e.syncedUser&&e.hasOwnProperty("syncedUser")&&(i.syncedUser=e.syncedUser),null!=e.requestedFloorPrice&&e.hasOwnProperty("requestedFloorPrice")&&(i.requestedFloorPrice=t.json&&!isFinite(e.requestedFloorPrice)?String(e.requestedFloorPrice):e.requestedFloorPrice),null!=e.floorPriceFactorIndex&&e.hasOwnProperty("floorPriceFactorIndex")&&(i.floorPriceFactorIndex=e.floorPriceFactorIndex),null!=e.partnerCustomHeaders&&e.hasOwnProperty("partnerCustomHeaders")&&(i.partnerCustomHeaders=e.partnerCustomHeaders),i},E),l.ProtoRtbLineItem=(x.prototype.id="",x.prototype.cachedFloorPrice=0,x.prototype.bids=a.emptyArray,x.prototype.noBids=a.emptyArray,x.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoRtbLineItem;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.id=e.string();break;case 2:s.cachedFloorPrice=e.double();break;case 3:s.bids&&s.bids.length||(s.bids=[]),s.bids.push(l.ProtoRtbBid.decode(e,e.uint32()));break;case 4:s.noBids&&s.noBids.length||(s.noBids=[]),s.noBids.push(l.ProtoRtbNoBid.decode(e,e.uint32()));break;default:e.skipType(7&r)}}return s},x.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.bids=[],i.noBids=[]),t.defaults&&(i.id="",i.cachedFloorPrice=0),null!=e.id&&e.hasOwnProperty("id")&&(i.id=e.id),null!=e.cachedFloorPrice&&e.hasOwnProperty("cachedFloorPrice")&&(i.cachedFloorPrice=t.json&&!isFinite(e.cachedFloorPrice)?String(e.cachedFloorPrice):e.cachedFloorPrice),e.bids&&e.bids.length){i.bids=[];for(var s=0;s<e.bids.length;++s)i.bids[s]=l.ProtoRtbBid.toObject(e.bids[s],t)}if(e.noBids&&e.noBids.length)for(i.noBids=[],s=0;s<e.noBids.length;++s)i.noBids[s]=l.ProtoRtbNoBid.toObject(e.noBids[s],t);return i},x),l.ConnatixNoBidReasonEnum=(s={},(i=Object.create(s))[s[0]="RequestException"]=0,i[s[1]="Timeout"]=1,i[s[2]="EmptyResponse"]=2,i[s[3]="InvalidResponse"]=3,i[s[4]="NoBid"]=4,i[s[5]="BidBelowFloor"]=5,i[s[6]="DealIdMismatch"]=6,i[s[7]="CsInvalidResponse"]=7,i[s[8]="CsRequestException"]=8,i[s[9]="CsEmptyResponse"]=9,i[s[11]="NoLibInPage"]=11,i),l.PartnerNoBidReasonEnum=(s={},(i=Object.create(s))[s[0]="Unknown"]=0,i[s[1]="TechnicalError"]=1,i[s[2]="InvalidRequest"]=2,i[s[3]="KnownWebSpider"]=3,i[s[4]="SuspectedNonHumanTraffic"]=4,i[s[5]="CloudIP"]=5,i[s[6]="UnsupportedDevice"]=6,i[s[7]="BlockedPublisher"]=7,i[s[8]="UnmatchedUser"]=8,i[s[9]="DailyReaderCapMet"]=9,i[s[10]="DailyDomainCapMet"]=10,i),l.ProtoSupplyChain=(w.prototype.businessDomain="",w.prototype.supplyChainId="",w.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoSupplyChain;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.businessDomain=e.string();break;case 3:s.supplyChainId=e.string();break;default:e.skipType(7&r)}}return s},w.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.businessDomain="",i.supplyChainId=""),null!=e.businessDomain&&e.hasOwnProperty("businessDomain")&&(i.businessDomain=e.businessDomain),null!=e.supplyChainId&&e.hasOwnProperty("supplyChainId")&&(i.supplyChainId=e.supplyChainId),i},w),l.ProtoAdBlockDetectionTypeEnum=(s={},(i=Object.create(s))[s[0]="Banner"]=0,i[s[1]="Network"]=1,i),l.ProtoAdClickTrackingRequest=(C.prototype.trackingRequestMeta=null,C.prototype.mediaGuid="",C.prototype.publisherLineItemId="",C.prototype.advertiserLineItemId="",C.prototype.type=1,C.encode=function(e,t){return t=t||n.create(),null!=e.trackingRequestMeta&&e.hasOwnProperty("trackingRequestMeta")&&l.MetadataModel.encode(e.trackingRequestMeta,t.uint32(10).fork()).ldelim(),null!=e.mediaGuid&&e.hasOwnProperty("mediaGuid")&&t.uint32(18).string(e.mediaGuid),null!=e.publisherLineItemId&&e.hasOwnProperty("publisherLineItemId")&&t.uint32(26).string(e.publisherLineItemId),null!=e.advertiserLineItemId&&e.hasOwnProperty("advertiserLineItemId")&&t.uint32(34).string(e.advertiserLineItemId),null!=e.type&&e.hasOwnProperty("type")&&t.uint32(40).int32(e.type),t},C.fromObject=function(e){if(e instanceof l.ProtoAdClickTrackingRequest)return e;var t=new l.ProtoAdClickTrackingRequest;if(null!=e.trackingRequestMeta){if("object"!=typeof e.trackingRequestMeta)throw TypeError(".ProtoAdClickTrackingRequest.trackingRequestMeta: object expected");t.trackingRequestMeta=l.MetadataModel.fromObject(e.trackingRequestMeta)}switch(null!=e.mediaGuid&&(t.mediaGuid=String(e.mediaGuid)),null!=e.publisherLineItemId&&(t.publisherLineItemId=String(e.publisherLineItemId)),null!=e.advertiserLineItemId&&(t.advertiserLineItemId=String(e.advertiserLineItemId)),e.type){case"AdClick":case 1:t.type=1;break;case"AdClickThrough":case 2:t.type=2;break;case"AdSkipClick":case 3:t.type=3;break;case"VolumeClick":case 4:t.type=4;break;case"PauseClick":case 5:t.type=5;break;case"PlayClick":case 6:t.type=6;break;case"FullScreenClick":case 7:t.type=7;break;case"MuteClick":case 8:t.type=8;break;case"UnmuteClick":case 9:t.type=9}return t},C.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},C),l.ProtoAdClickTypeEnum=(s={},(i=Object.create(s))[s[1]="AdClick"]=1,i[s[2]="AdClickThrough"]=2,i[s[3]="AdSkipClick"]=3,i[s[4]="VolumeClick"]=4,i[s[5]="PauseClick"]=5,i[s[6]="PlayClick"]=6,i[s[7]="FullScreenClick"]=7,i[s[8]="MuteClick"]=8,i[s[9]="UnmuteClick"]=9,i),l.ProtoAdOpportunityRequest=(k.prototype.sessionId="",k.prototype.trackingRequestMeta=null,k.prototype.adBreak=0,k.encode=function(e,t){return t=t||n.create(),null!=e.sessionId&&e.hasOwnProperty("sessionId")&&t.uint32(10).string(e.sessionId),null!=e.trackingRequestMeta&&e.hasOwnProperty("trackingRequestMeta")&&l.MetadataModel.encode(e.trackingRequestMeta,t.uint32(18).fork()).ldelim(),null!=e.adBreak&&e.hasOwnProperty("adBreak")&&t.uint32(24).int32(e.adBreak),t},k.fromObject=function(e){if(e instanceof l.ProtoAdOpportunityRequest)return e;var t=new l.ProtoAdOpportunityRequest;if(null!=e.sessionId&&(t.sessionId=String(e.sessionId)),null!=e.trackingRequestMeta){if("object"!=typeof e.trackingRequestMeta)throw TypeError(".ProtoAdOpportunityRequest.trackingRequestMeta: object expected");t.trackingRequestMeta=l.MetadataModel.fromObject(e.trackingRequestMeta)}switch(e.adBreak){case"None":case 0:t.adBreak=0;break;case"PreRoll":case 1:t.adBreak=1;break;case"MidRoll":case 2:t.adBreak=2;break;case"PostRoll":case 3:t.adBreak=3}return t},k.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},k),l.ProtoAdsourceTypeEnum=(s={},(i=Object.create(s))[s[0]="Unknown"]=0,i[s[1]="Vpaid"]=1,i[s[2]="VastMedia"]=2,i[s[3]="CnxMedia"]=3,i[s[4]="Jw"]=4,i[s[5]="Ima"]=5,i[s[6]="AOL"]=6,i),l.ProtoAuctionLossReasonEnum=(s={},(i=Object.create(s))[s[0]="TargetingMismatch"]=0,i[s[1]="CompetitorPriority"]=1,i[s[2]="AdOpportunityEnd"]=2,i),l.ProtoAuctionInfoRequest=(O.prototype.cnxBidId="",O.prototype.auctionInformation=null,O.prototype.auctionLossReason=0,O.encode=function(e,t){return t=t||n.create(),null!=e.cnxBidId&&e.hasOwnProperty("cnxBidId")&&t.uint32(10).string(e.cnxBidId),null!=e.auctionInformation&&e.hasOwnProperty("auctionInformation")&&l.ProtoAuctionInformation.encode(e.auctionInformation,t.uint32(18).fork()).ldelim(),null!=e.auctionLossReason&&e.hasOwnProperty("auctionLossReason")&&t.uint32(24).int32(e.auctionLossReason),t},O.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoAuctionInfoRequest;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.cnxBidId=e.string();break;case 2:s.auctionInformation=l.ProtoAuctionInformation.decode(e,e.uint32());break;case 3:s.auctionLossReason=e.int32();break;default:e.skipType(7&r)}}return s},O.fromObject=function(e){if(e instanceof l.ProtoAuctionInfoRequest)return e;var t=new l.ProtoAuctionInfoRequest;if(null!=e.cnxBidId&&(t.cnxBidId=String(e.cnxBidId)),null!=e.auctionInformation){if("object"!=typeof e.auctionInformation)throw TypeError(".ProtoAuctionInfoRequest.auctionInformation: object expected");t.auctionInformation=l.ProtoAuctionInformation.fromObject(e.auctionInformation)}switch(e.auctionLossReason){case"TargetingMismatch":case 0:t.auctionLossReason=0;break;case"CompetitorPriority":case 1:t.auctionLossReason=1;break;case"AdOpportunityEnd":case 2:t.auctionLossReason=2}return t},O.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.cnxBidId="",i.auctionInformation=null,i.auctionLossReason=t.enums===String?"TargetingMismatch":0),null!=e.cnxBidId&&e.hasOwnProperty("cnxBidId")&&(i.cnxBidId=e.cnxBidId),null!=e.auctionInformation&&e.hasOwnProperty("auctionInformation")&&(i.auctionInformation=l.ProtoAuctionInformation.toObject(e.auctionInformation,t)),null!=e.auctionLossReason&&e.hasOwnProperty("auctionLossReason")&&(i.auctionLossReason=t.enums===String?l.ProtoAuctionLossReasonEnum[e.auctionLossReason]:e.auctionLossReason),i},O.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},O),l.ProtoAuctionInformation=(A.prototype.highestObfuscatedBidPrice=0,A.prototype.secondHighestObfuscatedBidPrice=0,A.prototype.bidDensity=0,A.encode=function(e,t){return t=t||n.create(),null!=e.highestObfuscatedBidPrice&&e.hasOwnProperty("highestObfuscatedBidPrice")&&t.uint32(9).double(e.highestObfuscatedBidPrice),null!=e.secondHighestObfuscatedBidPrice&&e.hasOwnProperty("secondHighestObfuscatedBidPrice")&&t.uint32(17).double(e.secondHighestObfuscatedBidPrice),null!=e.bidDensity&&e.hasOwnProperty("bidDensity")&&t.uint32(24).int32(e.bidDensity),t},A.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoAuctionInformation;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.highestObfuscatedBidPrice=e.double();break;case 2:s.secondHighestObfuscatedBidPrice=e.double();break;case 3:s.bidDensity=e.int32();break;default:e.skipType(7&r)}}return s},A.fromObject=function(e){if(e instanceof l.ProtoAuctionInformation)return e;var t=new l.ProtoAuctionInformation;return null!=e.highestObfuscatedBidPrice&&(t.highestObfuscatedBidPrice=Number(e.highestObfuscatedBidPrice)),null!=e.secondHighestObfuscatedBidPrice&&(t.secondHighestObfuscatedBidPrice=Number(e.secondHighestObfuscatedBidPrice)),null!=e.bidDensity&&(t.bidDensity=0|e.bidDensity),t},A.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.highestObfuscatedBidPrice=0,i.secondHighestObfuscatedBidPrice=0,i.bidDensity=0),null!=e.highestObfuscatedBidPrice&&e.hasOwnProperty("highestObfuscatedBidPrice")&&(i.highestObfuscatedBidPrice=t.json&&!isFinite(e.highestObfuscatedBidPrice)?String(e.highestObfuscatedBidPrice):e.highestObfuscatedBidPrice),null!=e.secondHighestObfuscatedBidPrice&&e.hasOwnProperty("secondHighestObfuscatedBidPrice")&&(i.secondHighestObfuscatedBidPrice=t.json&&!isFinite(e.secondHighestObfuscatedBidPrice)?String(e.secondHighestObfuscatedBidPrice):e.secondHighestObfuscatedBidPrice),null!=e.bidDensity&&e.hasOwnProperty("bidDensity")&&(i.bidDensity=e.bidDensity),i},A.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},A),l.ProtoGdprConsentModeEnum=(s={},(i=Object.create(s))[s[0]="Unknown"]=0,i[s[1]="NoCmp"]=1,i[s[2]="NoConsent"]=2,i[s[3]="NoConnatixConsent"]=3,i[s[4]="NotAllDemandConsent"]=4,i[s[5]="AllGood"]=5,i),l.ProtoAuctionPostbidReasonEnum=(s={},(i=Object.create(s))[s[0]="CreativeError"]=0,i[s[1]="SDKFailure"]=1,i[s[2]="UnsupportedMedia"]=2,i[s[3]="TargetingMismatch"]=3,i[s[4]="PlayerError"]=4,i),l.ProtoPrebid=(T.prototype.publisherLineItemId="",T.prototype.advertiserLineItemId="",T.prototype.syncedUser=!1,T.prototype.timeSpent=0,T.prototype.reason=0,T.prototype.rtbRequestNumber=0,T.prototype.partnerReason=0,T.prototype.requestedFloorPrice=0,T.prototype.partnerCustomHeaders="",T.prototype.prebidJsBidderName="",T.encode=function(e,t){return t=t||n.create(),null!=e.publisherLineItemId&&e.hasOwnProperty("publisherLineItemId")&&t.uint32(10).string(e.publisherLineItemId),null!=e.advertiserLineItemId&&e.hasOwnProperty("advertiserLineItemId")&&t.uint32(18).string(e.advertiserLineItemId),null!=e.syncedUser&&e.hasOwnProperty("syncedUser")&&t.uint32(24).bool(e.syncedUser),null!=e.timeSpent&&e.hasOwnProperty("timeSpent")&&t.uint32(32).int32(e.timeSpent),null!=e.reason&&e.hasOwnProperty("reason")&&t.uint32(40).int32(e.reason),null!=e.rtbRequestNumber&&e.hasOwnProperty("rtbRequestNumber")&&t.uint32(48).int32(e.rtbRequestNumber),null!=e.partnerReason&&e.hasOwnProperty("partnerReason")&&t.uint32(56).int32(e.partnerReason),null!=e.requestedFloorPrice&&e.hasOwnProperty("requestedFloorPrice")&&t.uint32(65).double(e.requestedFloorPrice),null!=e.partnerCustomHeaders&&e.hasOwnProperty("partnerCustomHeaders")&&t.uint32(74).string(e.partnerCustomHeaders),null!=e.prebidJsBidderName&&e.hasOwnProperty("prebidJsBidderName")&&t.uint32(98).string(e.prebidJsBidderName),t},T.fromObject=function(e){if(e instanceof l.ProtoPrebid)return e;var t=new l.ProtoPrebid;switch(null!=e.publisherLineItemId&&(t.publisherLineItemId=String(e.publisherLineItemId)),null!=e.advertiserLineItemId&&(t.advertiserLineItemId=String(e.advertiserLineItemId)),null!=e.syncedUser&&(t.syncedUser=Boolean(e.syncedUser)),null!=e.timeSpent&&(t.timeSpent=0|e.timeSpent),e.reason){case"RequestException":case 0:t.reason=0;break;case"Timeout":case 1:t.reason=1;break;case"EmptyResponse":case 2:t.reason=2;break;case"InvalidResponse":case 3:t.reason=3;break;case"NoBid":case 4:t.reason=4;break;case"BidBelowFloor":case 5:t.reason=5;break;case"DealIdMismatch":case 6:t.reason=6;break;case"CsInvalidResponse":case 7:t.reason=7;break;case"CsRequestException":case 8:t.reason=8;break;case"CsEmptyResponse":case 9:t.reason=9;break;case"NoLibInPage":case 11:t.reason=11}switch(null!=e.rtbRequestNumber&&(t.rtbRequestNumber=0|e.rtbRequestNumber),e.partnerReason){case"Unknown":case 0:t.partnerReason=0;break;case"TechnicalError":case 1:t.partnerReason=1;break;case"InvalidRequest":case 2:t.partnerReason=2;break;case"KnownWebSpider":case 3:t.partnerReason=3;break;case"SuspectedNonHumanTraffic":case 4:t.partnerReason=4;break;case"CloudIP":case 5:t.partnerReason=5;break;case"UnsupportedDevice":case 6:t.partnerReason=6;break;case"BlockedPublisher":case 7:t.partnerReason=7;break;case"UnmatchedUser":case 8:t.partnerReason=8;break;case"DailyReaderCapMet":case 9:t.partnerReason=9;break;case"DailyDomainCapMet":case 10:t.partnerReason=10}return null!=e.requestedFloorPrice&&(t.requestedFloorPrice=Number(e.requestedFloorPrice)),null!=e.partnerCustomHeaders&&(t.partnerCustomHeaders=String(e.partnerCustomHeaders)),null!=e.prebidJsBidderName&&(t.prebidJsBidderName=String(e.prebidJsBidderName)),t},T.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},T),l.ProtoBid=(I.prototype.publisherLineItemId="",I.prototype.advertiserLineItemId="",I.prototype.syncedUser=!1,I.prototype.timeSpent=0,I.prototype.rtbRequestNumber=0,I.prototype.creativeId="",I.prototype.rtbSeatId="",I.prototype.rtbAdomain="",I.prototype.encryptedPrice="",I.prototype.requestedFloorPrice=0,I.prototype.prebidJsBidderName="",I.prototype.customClientPrice=0,I.prototype.dspId="",I.prototype.cnxBidId="",I.encode=function(e,t){return t=t||n.create(),null!=e.publisherLineItemId&&e.hasOwnProperty("publisherLineItemId")&&t.uint32(10).string(e.publisherLineItemId),null!=e.advertiserLineItemId&&e.hasOwnProperty("advertiserLineItemId")&&t.uint32(18).string(e.advertiserLineItemId),null!=e.syncedUser&&e.hasOwnProperty("syncedUser")&&t.uint32(24).bool(e.syncedUser),null!=e.timeSpent&&e.hasOwnProperty("timeSpent")&&t.uint32(32).int32(e.timeSpent),null!=e.rtbRequestNumber&&e.hasOwnProperty("rtbRequestNumber")&&t.uint32(40).int32(e.rtbRequestNumber),null!=e.creativeId&&e.hasOwnProperty("creativeId")&&t.uint32(50).string(e.creativeId),null!=e.rtbSeatId&&e.hasOwnProperty("rtbSeatId")&&t.uint32(58).string(e.rtbSeatId),null!=e.rtbAdomain&&e.hasOwnProperty("rtbAdomain")&&t.uint32(66).string(e.rtbAdomain),null!=e.encryptedPrice&&e.hasOwnProperty("encryptedPrice")&&t.uint32(74).string(e.encryptedPrice),null!=e.requestedFloorPrice&&e.hasOwnProperty("requestedFloorPrice")&&t.uint32(81).double(e.requestedFloorPrice),null!=e.prebidJsBidderName&&e.hasOwnProperty("prebidJsBidderName")&&t.uint32(106).string(e.prebidJsBidderName),null!=e.customClientPrice&&e.hasOwnProperty("customClientPrice")&&t.uint32(113).double(e.customClientPrice),null!=e.dspId&&e.hasOwnProperty("dspId")&&t.uint32(122).string(e.dspId),null!=e.cnxBidId&&e.hasOwnProperty("cnxBidId")&&t.uint32(130).string(e.cnxBidId),t},I.fromObject=function(e){if(e instanceof l.ProtoBid)return e;var t=new l.ProtoBid;return null!=e.publisherLineItemId&&(t.publisherLineItemId=String(e.publisherLineItemId)),null!=e.advertiserLineItemId&&(t.advertiserLineItemId=String(e.advertiserLineItemId)),null!=e.syncedUser&&(t.syncedUser=Boolean(e.syncedUser)),null!=e.timeSpent&&(t.timeSpent=0|e.timeSpent),null!=e.rtbRequestNumber&&(t.rtbRequestNumber=0|e.rtbRequestNumber),null!=e.creativeId&&(t.creativeId=String(e.creativeId)),null!=e.rtbSeatId&&(t.rtbSeatId=String(e.rtbSeatId)),null!=e.rtbAdomain&&(t.rtbAdomain=String(e.rtbAdomain)),null!=e.encryptedPrice&&(t.encryptedPrice=String(e.encryptedPrice)),null!=e.requestedFloorPrice&&(t.requestedFloorPrice=Number(e.requestedFloorPrice)),null!=e.prebidJsBidderName&&(t.prebidJsBidderName=String(e.prebidJsBidderName)),null!=e.customClientPrice&&(t.customClientPrice=Number(e.customClientPrice)),null!=e.dspId&&(t.dspId=String(e.dspId)),null!=e.cnxBidId&&(t.cnxBidId=String(e.cnxBidId)),t},I.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},I),l.ProtoPostBid=(S.prototype.publisherLineItemId="",S.prototype.advertiserLineItemId="",S.prototype.syncedUser=!1,S.prototype.timeSpent=0,S.prototype.error="",S.prototype.loaded=!1,S.prototype.creativeId="",S.prototype.rtbSeatId="",S.prototype.rtbAdomain="",S.prototype.adsourceType=0,S.prototype.vastMediaType="",S.prototype.adPodSlotPosition=0,S.prototype.prebidJsBidderName="",S.prototype.dspId="",S.prototype.cnxBidId="",S.prototype.winToAdLoadedTime=0,S.prototype.auctionInformation=null,S.prototype.auctionPostbidReason=0,S.encode=function(e,t){return t=t||n.create(),null!=e.publisherLineItemId&&e.hasOwnProperty("publisherLineItemId")&&t.uint32(10).string(e.publisherLineItemId),null!=e.advertiserLineItemId&&e.hasOwnProperty("advertiserLineItemId")&&t.uint32(18).string(e.advertiserLineItemId),null!=e.syncedUser&&e.hasOwnProperty("syncedUser")&&t.uint32(24).bool(e.syncedUser),null!=e.timeSpent&&e.hasOwnProperty("timeSpent")&&t.uint32(32).int32(e.timeSpent),null!=e.error&&e.hasOwnProperty("error")&&t.uint32(42).string(e.error),null!=e.loaded&&e.hasOwnProperty("loaded")&&t.uint32(48).bool(e.loaded),null!=e.creativeId&&e.hasOwnProperty("creativeId")&&t.uint32(58).string(e.creativeId),null!=e.rtbSeatId&&e.hasOwnProperty("rtbSeatId")&&t.uint32(66).string(e.rtbSeatId),null!=e.rtbAdomain&&e.hasOwnProperty("rtbAdomain")&&t.uint32(74).string(e.rtbAdomain),null!=e.adsourceType&&e.hasOwnProperty("adsourceType")&&t.uint32(80).int32(e.adsourceType),null!=e.vastMediaType&&e.hasOwnProperty("vastMediaType")&&t.uint32(90).string(e.vastMediaType),null!=e.adPodSlotPosition&&e.hasOwnProperty("adPodSlotPosition")&&t.uint32(96).int32(e.adPodSlotPosition),null!=e.prebidJsBidderName&&e.hasOwnProperty("prebidJsBidderName")&&t.uint32(106).string(e.prebidJsBidderName),null!=e.dspId&&e.hasOwnProperty("dspId")&&t.uint32(114).string(e.dspId),null!=e.cnxBidId&&e.hasOwnProperty("cnxBidId")&&t.uint32(122).string(e.cnxBidId),null!=e.winToAdLoadedTime&&e.hasOwnProperty("winToAdLoadedTime")&&t.uint32(128).int32(e.winToAdLoadedTime),null!=e.auctionInformation&&e.hasOwnProperty("auctionInformation")&&l.ProtoAuctionInformation.encode(e.auctionInformation,t.uint32(146).fork()).ldelim(),null!=e.auctionPostbidReason&&e.hasOwnProperty("auctionPostbidReason")&&t.uint32(152).int32(e.auctionPostbidReason),t},S.fromObject=function(e){if(e instanceof l.ProtoPostBid)return e;var t=new l.ProtoPostBid;switch(null!=e.publisherLineItemId&&(t.publisherLineItemId=String(e.publisherLineItemId)),null!=e.advertiserLineItemId&&(t.advertiserLineItemId=String(e.advertiserLineItemId)),null!=e.syncedUser&&(t.syncedUser=Boolean(e.syncedUser)),null!=e.timeSpent&&(t.timeSpent=0|e.timeSpent),null!=e.error&&(t.error=String(e.error)),null!=e.loaded&&(t.loaded=Boolean(e.loaded)),null!=e.creativeId&&(t.creativeId=String(e.creativeId)),null!=e.rtbSeatId&&(t.rtbSeatId=String(e.rtbSeatId)),null!=e.rtbAdomain&&(t.rtbAdomain=String(e.rtbAdomain)),e.adsourceType){case"Unknown":case 0:t.adsourceType=0;break;case"Vpaid":case 1:t.adsourceType=1;break;case"VastMedia":case 2:t.adsourceType=2;break;case"CnxMedia":case 3:t.adsourceType=3;break;case"Jw":case 4:t.adsourceType=4;break;case"Ima":case 5:t.adsourceType=5;break;case"AOL":case 6:t.adsourceType=6}if(null!=e.vastMediaType&&(t.vastMediaType=String(e.vastMediaType)),null!=e.adPodSlotPosition&&(t.adPodSlotPosition=0|e.adPodSlotPosition),null!=e.prebidJsBidderName&&(t.prebidJsBidderName=String(e.prebidJsBidderName)),null!=e.dspId&&(t.dspId=String(e.dspId)),null!=e.cnxBidId&&(t.cnxBidId=String(e.cnxBidId)),null!=e.winToAdLoadedTime&&(t.winToAdLoadedTime=0|e.winToAdLoadedTime),null!=e.auctionInformation){if("object"!=typeof e.auctionInformation)throw TypeError(".ProtoPostBid.auctionInformation: object expected");t.auctionInformation=l.ProtoAuctionInformation.fromObject(e.auctionInformation)}switch(e.auctionPostbidReason){case"CreativeError":case 0:t.auctionPostbidReason=0;break;case"SDKFailure":case 1:t.auctionPostbidReason=1;break;case"UnsupportedMedia":case 2:t.auctionPostbidReason=2;break;case"TargetingMismatch":case 3:t.auctionPostbidReason=3;break;case"PlayerError":case 4:t.auctionPostbidReason=4}return t},S.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},S),l.ProtoBidTrackingsRequest=(P.prototype.trackingRequestMeta=null,P.prototype.mediaGuid="",P.prototype.prebids=a.emptyArray,P.prototype.bids=a.emptyArray,P.prototype.postBids=a.emptyArray,P.prototype.logEveryting=!1,P.prototype.hasGdprConsentPayload=!1,P.prototype.gdprConsentMode=0,P.prototype.useExploration=!1,P.encode=function(e,t){if(t=t||n.create(),null!=e.trackingRequestMeta&&e.hasOwnProperty("trackingRequestMeta")&&l.MetadataModel.encode(e.trackingRequestMeta,t.uint32(10).fork()).ldelim(),null!=e.mediaGuid&&e.hasOwnProperty("mediaGuid")&&t.uint32(18).string(e.mediaGuid),null!=e.prebids&&e.prebids.length)for(var i=0;i<e.prebids.length;++i)l.ProtoPrebid.encode(e.prebids[i],t.uint32(34).fork()).ldelim();if(null!=e.bids&&e.bids.length)for(i=0;i<e.bids.length;++i)l.ProtoBid.encode(e.bids[i],t.uint32(42).fork()).ldelim();if(null!=e.postBids&&e.postBids.length)for(i=0;i<e.postBids.length;++i)l.ProtoPostBid.encode(e.postBids[i],t.uint32(50).fork()).ldelim();return null!=e.logEveryting&&e.hasOwnProperty("logEveryting")&&t.uint32(56).bool(e.logEveryting),null!=e.hasGdprConsentPayload&&e.hasOwnProperty("hasGdprConsentPayload")&&t.uint32(80).bool(e.hasGdprConsentPayload),null!=e.gdprConsentMode&&e.hasOwnProperty("gdprConsentMode")&&t.uint32(88).int32(e.gdprConsentMode),null!=e.useExploration&&e.hasOwnProperty("useExploration")&&t.uint32(96).bool(e.useExploration),t},P.fromObject=function(e){if(e instanceof l.ProtoBidTrackingsRequest)return e;var t=new l.ProtoBidTrackingsRequest;if(null!=e.trackingRequestMeta){if("object"!=typeof e.trackingRequestMeta)throw TypeError(".ProtoBidTrackingsRequest.trackingRequestMeta: object expected");t.trackingRequestMeta=l.MetadataModel.fromObject(e.trackingRequestMeta)}if(null!=e.mediaGuid&&(t.mediaGuid=String(e.mediaGuid)),e.prebids){if(!Array.isArray(e.prebids))throw TypeError(".ProtoBidTrackingsRequest.prebids: array expected");t.prebids=[];for(var i=0;i<e.prebids.length;++i){if("object"!=typeof e.prebids[i])throw TypeError(".ProtoBidTrackingsRequest.prebids: object expected");t.prebids[i]=l.ProtoPrebid.fromObject(e.prebids[i])}}if(e.bids){if(!Array.isArray(e.bids))throw TypeError(".ProtoBidTrackingsRequest.bids: array expected");for(t.bids=[],i=0;i<e.bids.length;++i){if("object"!=typeof e.bids[i])throw TypeError(".ProtoBidTrackingsRequest.bids: object expected");t.bids[i]=l.ProtoBid.fromObject(e.bids[i])}}if(e.postBids){if(!Array.isArray(e.postBids))throw TypeError(".ProtoBidTrackingsRequest.postBids: array expected");for(t.postBids=[],i=0;i<e.postBids.length;++i){if("object"!=typeof e.postBids[i])throw TypeError(".ProtoBidTrackingsRequest.postBids: object expected");t.postBids[i]=l.ProtoPostBid.fromObject(e.postBids[i])}}switch(null!=e.logEveryting&&(t.logEveryting=Boolean(e.logEveryting)),null!=e.hasGdprConsentPayload&&(t.hasGdprConsentPayload=Boolean(e.hasGdprConsentPayload)),e.gdprConsentMode){case"Unknown":case 0:t.gdprConsentMode=0;break;case"NoCmp":case 1:t.gdprConsentMode=1;break;case"NoConsent":case 2:t.gdprConsentMode=2;break;case"NoConnatixConsent":case 3:t.gdprConsentMode=3;break;case"NotAllDemandConsent":case 4:t.gdprConsentMode=4;break;case"AllGood":case 5:t.gdprConsentMode=5}return null!=e.useExploration&&(t.useExploration=Boolean(e.useExploration)),t},P.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},P),l.ProtoHeavyAdBlockTypeEnum=(s={},(i=Object.create(s))[s[0]="Global"]=0,i[s[1]="Script"]=1,i[s[2]="VpaidIframe"]=2,i[s[3]="OverlayIframe"]=3,i),l.ProtoHeavyAdTrackingRequest=(v.prototype.trackingRequestMeta=null,v.prototype.advertiserLineItemId="",v.prototype.heavyAdBlockTypeEnum=0,v.encode=function(e,t){return t=t||n.create(),null!=e.trackingRequestMeta&&e.hasOwnProperty("trackingRequestMeta")&&l.MetadataModel.encode(e.trackingRequestMeta,t.uint32(10).fork()).ldelim(),null!=e.advertiserLineItemId&&e.hasOwnProperty("advertiserLineItemId")&&t.uint32(18).string(e.advertiserLineItemId),null!=e.heavyAdBlockTypeEnum&&e.hasOwnProperty("heavyAdBlockTypeEnum")&&t.uint32(24).int32(e.heavyAdBlockTypeEnum),t},v.fromObject=function(e){if(e instanceof l.ProtoHeavyAdTrackingRequest)return e;var t=new l.ProtoHeavyAdTrackingRequest;if(null!=e.trackingRequestMeta){if("object"!=typeof e.trackingRequestMeta)throw TypeError(".ProtoHeavyAdTrackingRequest.trackingRequestMeta: object expected");t.trackingRequestMeta=l.MetadataModel.fromObject(e.trackingRequestMeta)}switch(null!=e.advertiserLineItemId&&(t.advertiserLineItemId=String(e.advertiserLineItemId)),e.heavyAdBlockTypeEnum){case"Global":case 0:t.heavyAdBlockTypeEnum=0;break;case"Script":case 1:t.heavyAdBlockTypeEnum=1;break;case"VpaidIframe":case 2:t.heavyAdBlockTypeEnum=2;break;case"OverlayIframe":case 3:t.heavyAdBlockTypeEnum=3}return t},v.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},v),l.ProtoMediaClickTrackingRequest=(b.prototype.trackingRequestMeta=null,b.prototype.mediaGuid="",b.prototype.type=0,b.prototype.clickUrl="",b.prototype.slideTitle="",b.prototype.slideNumber=0,b.prototype.slideMediaType=0,b.encode=function(e,t){return t=t||n.create(),null!=e.trackingRequestMeta&&e.hasOwnProperty("trackingRequestMeta")&&l.MetadataModel.encode(e.trackingRequestMeta,t.uint32(10).fork()).ldelim(),null!=e.mediaGuid&&e.hasOwnProperty("mediaGuid")&&t.uint32(18).string(e.mediaGuid),null!=e.type&&e.hasOwnProperty("type")&&t.uint32(24).int32(e.type),null!=e.clickUrl&&e.hasOwnProperty("clickUrl")&&t.uint32(34).string(e.clickUrl),null!=e.slideTitle&&e.hasOwnProperty("slideTitle")&&t.uint32(42).string(e.slideTitle),null!=e.slideNumber&&e.hasOwnProperty("slideNumber")&&t.uint32(48).int32(e.slideNumber),null!=e.slideMediaType&&e.hasOwnProperty("slideMediaType")&&t.uint32(56).int32(e.slideMediaType),t},b.fromObject=function(e){if(e instanceof l.ProtoMediaClickTrackingRequest)return e;var t=new l.ProtoMediaClickTrackingRequest;if(null!=e.trackingRequestMeta){if("object"!=typeof e.trackingRequestMeta)throw TypeError(".ProtoMediaClickTrackingRequest.trackingRequestMeta: object expected");t.trackingRequestMeta=l.MetadataModel.fromObject(e.trackingRequestMeta)}switch(null!=e.mediaGuid&&(t.mediaGuid=String(e.mediaGuid)),e.type){case"Click":case 0:t.type=0;break;case"UrlClick":case 1:t.type=1;break;case"VolumeClick":case 2:t.type=2;break;case"PlayClick":case 3:t.type=3;break;case"PauseClick":case 4:t.type=4;break;case"NextClick":case 5:t.type=5;break;case"PreviousClick":case 6:t.type=6;break;case"MuteClick":case 7:t.type=7;break;case"UnmuteClick":case 8:t.type=8;break;case"CloseClick":case 9:t.type=9;break;case"ScrollClick":case 10:t.type=10;break;case"GalleryClick":case 11:t.type=11;break;case"SubtitleClick":case 12:t.type=12;break;case"FullScreenClick":case 13:t.type=13;break;case"ExitFullScreenClick":case 14:t.type=14}switch(null!=e.clickUrl&&(t.clickUrl=String(e.clickUrl)),null!=e.slideTitle&&(t.slideTitle=String(e.slideTitle)),null!=e.slideNumber&&(t.slideNumber=0|e.slideNumber),e.slideMediaType){case"Image":case 0:t.slideMediaType=0;break;case"Video":case 1:t.slideMediaType=1}return t},b.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},b),l.ProtoMediaClickTypeEnum=(s={},(i=Object.create(s))[s[0]="Click"]=0,i[s[1]="UrlClick"]=1,i[s[2]="VolumeClick"]=2,i[s[3]="PlayClick"]=3,i[s[4]="PauseClick"]=4,i[s[5]="NextClick"]=5,i[s[6]="PreviousClick"]=6,i[s[7]="MuteClick"]=7,i[s[8]="UnmuteClick"]=8,i[s[9]="CloseClick"]=9,i[s[10]="ScrollClick"]=10,i[s[11]="GalleryClick"]=11,i[s[12]="SubtitleClick"]=12,i[s[13]="FullScreenClick"]=13,i[s[14]="ExitFullScreenClick"]=14,i),l.ProtoMediaTrackingRequest=(y.prototype.trackingRequestMeta=null,y.prototype.mediaGuid="",y.prototype.quartile=0,y.encode=function(e,t){return t=t||n.create(),null!=e.trackingRequestMeta&&e.hasOwnProperty("trackingRequestMeta")&&l.MetadataModel.encode(e.trackingRequestMeta,t.uint32(10).fork()).ldelim(),null!=e.mediaGuid&&e.hasOwnProperty("mediaGuid")&&t.uint32(18).string(e.mediaGuid),null!=e.quartile&&e.hasOwnProperty("quartile")&&t.uint32(32).int32(e.quartile),t},y.fromObject=function(e){if(e instanceof l.ProtoMediaTrackingRequest)return e;var t=new l.ProtoMediaTrackingRequest;if(null!=e.trackingRequestMeta){if("object"!=typeof e.trackingRequestMeta)throw TypeError(".ProtoMediaTrackingRequest.trackingRequestMeta: object expected");t.trackingRequestMeta=l.MetadataModel.fromObject(e.trackingRequestMeta)}switch(null!=e.mediaGuid&&(t.mediaGuid=String(e.mediaGuid)),e.quartile){case"Start":case 0:t.quartile=0;break;case"First":case 1:t.quartile=1;break;case"Second":case 2:t.quartile=2;break;case"Third":case 3:t.quartile=3;break;case"Fourth":case 4:t.quartile=4}return t},y.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},y),l.ProtoQuartilesEnum=(s={},(i=Object.create(s))[s[0]="Start"]=0,i[s[1]="First"]=1,i[s[2]="Second"]=2,i[s[3]="Third"]=3,i[s[4]="Fourth"]=4,i),l.ProtoSessionAdBlockerRequest=(f.prototype.trackingRequestMeta=null,f.prototype.adBlockDetectionType=0,f.prototype.dynamicElkFieldsValues=a.emptyObject,f.encode=function(e,t){if(t=t||n.create(),null!=e.trackingRequestMeta&&e.hasOwnProperty("trackingRequestMeta")&&l.MetadataModel.encode(e.trackingRequestMeta,t.uint32(10).fork()).ldelim(),null!=e.adBlockDetectionType&&e.hasOwnProperty("adBlockDetectionType")&&t.uint32(16).int32(e.adBlockDetectionType),null!=e.dynamicElkFieldsValues&&e.hasOwnProperty("dynamicElkFieldsValues"))for(var i=Object.keys(e.dynamicElkFieldsValues),s=0;s<i.length;++s)t.uint32(802).fork().uint32(10).string(i[s]).uint32(18).string(e.dynamicElkFieldsValues[i[s]]).ldelim();return t},f.fromObject=function(e){if(e instanceof l.ProtoSessionAdBlockerRequest)return e;var t=new l.ProtoSessionAdBlockerRequest;if(null!=e.trackingRequestMeta){if("object"!=typeof e.trackingRequestMeta)throw TypeError(".ProtoSessionAdBlockerRequest.trackingRequestMeta: object expected");t.trackingRequestMeta=l.MetadataModel.fromObject(e.trackingRequestMeta)}switch(e.adBlockDetectionType){case"Banner":case 0:t.adBlockDetectionType=0;break;case"Network":case 1:t.adBlockDetectionType=1}if(e.dynamicElkFieldsValues){if("object"!=typeof e.dynamicElkFieldsValues)throw TypeError(".ProtoSessionAdBlockerRequest.dynamicElkFieldsValues: object expected");t.dynamicElkFieldsValues={};for(var i=Object.keys(e.dynamicElkFieldsValues),s=0;s<i.length;++s)t.dynamicElkFieldsValues[i[s]]=String(e.dynamicElkFieldsValues[i[s]])}return t},f.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},f),l.ProtoSessionTimeTrackingRequest=(m.prototype.trackingRequestMeta=null,m.prototype.timePlayed=0,m.prototype.timePlayedInView=0,m.prototype.sessionTime=0,m.encode=function(e,t){return t=t||n.create(),null!=e.trackingRequestMeta&&e.hasOwnProperty("trackingRequestMeta")&&l.MetadataModel.encode(e.trackingRequestMeta,t.uint32(10).fork()).ldelim(),null!=e.timePlayed&&e.hasOwnProperty("timePlayed")&&t.uint32(16).int32(e.timePlayed),null!=e.timePlayedInView&&e.hasOwnProperty("timePlayedInView")&&t.uint32(24).int32(e.timePlayedInView),null!=e.sessionTime&&e.hasOwnProperty("sessionTime")&&t.uint32(32).int32(e.sessionTime),t},m.fromObject=function(e){if(e instanceof l.ProtoSessionTimeTrackingRequest)return e;var t=new l.ProtoSessionTimeTrackingRequest;if(null!=e.trackingRequestMeta){if("object"!=typeof e.trackingRequestMeta)throw TypeError(".ProtoSessionTimeTrackingRequest.trackingRequestMeta: object expected");t.trackingRequestMeta=l.MetadataModel.fromObject(e.trackingRequestMeta)}return null!=e.timePlayed&&(t.timePlayed=0|e.timePlayed),null!=e.timePlayedInView&&(t.timePlayedInView=0|e.timePlayedInView),null!=e.sessionTime&&(t.sessionTime=0|e.sessionTime),t},m.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},m),l.ProtoTrackingRequest=(g.prototype.trackingRequestMeta=null,g.prototype.hasAdBlocker=!1,g.encode=function(e,t){return t=t||n.create(),null!=e.trackingRequestMeta&&e.hasOwnProperty("trackingRequestMeta")&&l.MetadataModel.encode(e.trackingRequestMeta,t.uint32(10).fork()).ldelim(),null!=e.hasAdBlocker&&e.hasOwnProperty("hasAdBlocker")&&t.uint32(32).bool(e.hasAdBlocker),t},g.fromObject=function(e){if(e instanceof l.ProtoTrackingRequest)return e;var t=new l.ProtoTrackingRequest;if(null!=e.trackingRequestMeta){if("object"!=typeof e.trackingRequestMeta)throw TypeError(".ProtoTrackingRequest.trackingRequestMeta: object expected");t.trackingRequestMeta=l.MetadataModel.fromObject(e.trackingRequestMeta)}return null!=e.hasAdBlocker&&(t.hasAdBlocker=Boolean(e.hasAdBlocker)),t},g.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},g),l.ProtoTrackingResponse=(p.prototype.errorMessage="",p.prototype.platformCappedLineItemIdList=a.emptyArray,p.prototype.impressionRevenue=0,p.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoTrackingResponse;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.errorMessage=e.string();break;case 2:s.platformCappedLineItemIdList&&s.platformCappedLineItemIdList.length||(s.platformCappedLineItemIdList=[]),s.platformCappedLineItemIdList.push(e.string());break;case 3:s.impressionRevenue=e.double();break;default:e.skipType(7&r)}}return s},p.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.platformCappedLineItemIdList=[]),t.defaults&&(i.errorMessage="",i.impressionRevenue=0),null!=e.errorMessage&&e.hasOwnProperty("errorMessage")&&(i.errorMessage=e.errorMessage),e.platformCappedLineItemIdList&&e.platformCappedLineItemIdList.length){i.platformCappedLineItemIdList=[];for(var s=0;s<e.platformCappedLineItemIdList.length;++s)i.platformCappedLineItemIdList[s]=e.platformCappedLineItemIdList[s]}return null!=e.impressionRevenue&&e.hasOwnProperty("impressionRevenue")&&(i.impressionRevenue=t.json&&!isFinite(e.impressionRevenue)?String(e.impressionRevenue):e.impressionRevenue),i},p),l.ProtoVideoAdImpressionRequest=(u.prototype.trackingRequestMeta=null,u.prototype.mediaGuid="",u.prototype.publisherLineItemId="",u.prototype.advertiserLineItemId="",u.prototype.syncedUser=!1,u.prototype.timeSpent=0,u.prototype.encryptedPrice="",u.prototype.creativeId="",u.prototype.rtbSeatId="",u.prototype.rtbAdomain="",u.prototype.customClientPrice=0,u.prototype.adsourceType=0,u.prototype.vastMediaType="",u.prototype.adPodSlotPosition=0,u.prototype.prebidJsBidderName="",u.prototype.dspId="",u.prototype.cnxBidId="",u.prototype.winToAdLoadedTime=0,u.prototype.startAdToImpressionTime=0,u.prototype.declaredDuration=0,u.prototype.impressionDuration=0,u.prototype.useExploration=!1,u.prototype.auctionInformation=null,u.encode=function(e,t){return t=t||n.create(),null!=e.trackingRequestMeta&&e.hasOwnProperty("trackingRequestMeta")&&l.MetadataModel.encode(e.trackingRequestMeta,t.uint32(10).fork()).ldelim(),null!=e.mediaGuid&&e.hasOwnProperty("mediaGuid")&&t.uint32(26).string(e.mediaGuid),null!=e.publisherLineItemId&&e.hasOwnProperty("publisherLineItemId")&&t.uint32(42).string(e.publisherLineItemId),null!=e.advertiserLineItemId&&e.hasOwnProperty("advertiserLineItemId")&&t.uint32(50).string(e.advertiserLineItemId),null!=e.syncedUser&&e.hasOwnProperty("syncedUser")&&t.uint32(56).bool(e.syncedUser),null!=e.timeSpent&&e.hasOwnProperty("timeSpent")&&t.uint32(64).int32(e.timeSpent),null!=e.encryptedPrice&&e.hasOwnProperty("encryptedPrice")&&t.uint32(74).string(e.encryptedPrice),null!=e.creativeId&&e.hasOwnProperty("creativeId")&&t.uint32(82).string(e.creativeId),null!=e.rtbSeatId&&e.hasOwnProperty("rtbSeatId")&&t.uint32(90).string(e.rtbSeatId),null!=e.rtbAdomain&&e.hasOwnProperty("rtbAdomain")&&t.uint32(98).string(e.rtbAdomain),null!=e.customClientPrice&&e.hasOwnProperty("customClientPrice")&&t.uint32(105).double(e.customClientPrice),null!=e.adsourceType&&e.hasOwnProperty("adsourceType")&&t.uint32(112).int32(e.adsourceType),null!=e.vastMediaType&&e.hasOwnProperty("vastMediaType")&&t.uint32(122).string(e.vastMediaType),null!=e.adPodSlotPosition&&e.hasOwnProperty("adPodSlotPosition")&&t.uint32(144).int32(e.adPodSlotPosition),null!=e.prebidJsBidderName&&e.hasOwnProperty("prebidJsBidderName")&&t.uint32(154).string(e.prebidJsBidderName),null!=e.dspId&&e.hasOwnProperty("dspId")&&t.uint32(162).string(e.dspId),null!=e.cnxBidId&&e.hasOwnProperty("cnxBidId")&&t.uint32(170).string(e.cnxBidId),null!=e.winToAdLoadedTime&&e.hasOwnProperty("winToAdLoadedTime")&&t.uint32(176).int32(e.winToAdLoadedTime),null!=e.startAdToImpressionTime&&e.hasOwnProperty("startAdToImpressionTime")&&t.uint32(184).int32(e.startAdToImpressionTime),null!=e.declaredDuration&&e.hasOwnProperty("declaredDuration")&&t.uint32(193).double(e.declaredDuration),null!=e.impressionDuration&&e.hasOwnProperty("impressionDuration")&&t.uint32(201).double(e.impressionDuration),null!=e.useExploration&&e.hasOwnProperty("useExploration")&&t.uint32(208).bool(e.useExploration),null!=e.auctionInformation&&e.hasOwnProperty("auctionInformation")&&l.ProtoAuctionInformation.encode(e.auctionInformation,t.uint32(218).fork()).ldelim(),t},u.fromObject=function(e){if(e instanceof l.ProtoVideoAdImpressionRequest)return e;var t=new l.ProtoVideoAdImpressionRequest;if(null!=e.trackingRequestMeta){if("object"!=typeof e.trackingRequestMeta)throw TypeError(".ProtoVideoAdImpressionRequest.trackingRequestMeta: object expected");t.trackingRequestMeta=l.MetadataModel.fromObject(e.trackingRequestMeta)}switch(null!=e.mediaGuid&&(t.mediaGuid=String(e.mediaGuid)),null!=e.publisherLineItemId&&(t.publisherLineItemId=String(e.publisherLineItemId)),null!=e.advertiserLineItemId&&(t.advertiserLineItemId=String(e.advertiserLineItemId)),null!=e.syncedUser&&(t.syncedUser=Boolean(e.syncedUser)),null!=e.timeSpent&&(t.timeSpent=0|e.timeSpent),null!=e.encryptedPrice&&(t.encryptedPrice=String(e.encryptedPrice)),null!=e.creativeId&&(t.creativeId=String(e.creativeId)),null!=e.rtbSeatId&&(t.rtbSeatId=String(e.rtbSeatId)),null!=e.rtbAdomain&&(t.rtbAdomain=String(e.rtbAdomain)),null!=e.customClientPrice&&(t.customClientPrice=Number(e.customClientPrice)),e.adsourceType){case"Unknown":case 0:t.adsourceType=0;break;case"Vpaid":case 1:t.adsourceType=1;break;case"VastMedia":case 2:t.adsourceType=2;break;case"CnxMedia":case 3:t.adsourceType=3;break;case"Jw":case 4:t.adsourceType=4;break;case"Ima":case 5:t.adsourceType=5;break;case"AOL":case 6:t.adsourceType=6}if(null!=e.vastMediaType&&(t.vastMediaType=String(e.vastMediaType)),null!=e.adPodSlotPosition&&(t.adPodSlotPosition=0|e.adPodSlotPosition),null!=e.prebidJsBidderName&&(t.prebidJsBidderName=String(e.prebidJsBidderName)),null!=e.dspId&&(t.dspId=String(e.dspId)),null!=e.cnxBidId&&(t.cnxBidId=String(e.cnxBidId)),null!=e.winToAdLoadedTime&&(t.winToAdLoadedTime=0|e.winToAdLoadedTime),null!=e.startAdToImpressionTime&&(t.startAdToImpressionTime=0|e.startAdToImpressionTime),null!=e.declaredDuration&&(t.declaredDuration=Number(e.declaredDuration)),null!=e.impressionDuration&&(t.impressionDuration=Number(e.impressionDuration)),null!=e.useExploration&&(t.useExploration=Boolean(e.useExploration)),null!=e.auctionInformation){if("object"!=typeof e.auctionInformation)throw TypeError(".ProtoVideoAdImpressionRequest.auctionInformation: object expected");t.auctionInformation=l.ProtoAuctionInformation.fromObject(e.auctionInformation)}return t},u.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},u),l.ProtoVideoAdImpressionViewableRequest=(h.prototype.trackingRequestMeta=null,h.prototype.mediaGuid="",h.prototype.publisherLineItemId="",h.prototype.advertiserLineItemId="",h.encode=function(e,t){return t=t||n.create(),null!=e.trackingRequestMeta&&e.hasOwnProperty("trackingRequestMeta")&&l.MetadataModel.encode(e.trackingRequestMeta,t.uint32(10).fork()).ldelim(),null!=e.mediaGuid&&e.hasOwnProperty("mediaGuid")&&t.uint32(26).string(e.mediaGuid),null!=e.publisherLineItemId&&e.hasOwnProperty("publisherLineItemId")&&t.uint32(42).string(e.publisherLineItemId),null!=e.advertiserLineItemId&&e.hasOwnProperty("advertiserLineItemId")&&t.uint32(50).string(e.advertiserLineItemId),t},h.fromObject=function(e){if(e instanceof l.ProtoVideoAdImpressionViewableRequest)return e;var t=new l.ProtoVideoAdImpressionViewableRequest;if(null!=e.trackingRequestMeta){if("object"!=typeof e.trackingRequestMeta)throw TypeError(".ProtoVideoAdImpressionViewableRequest.trackingRequestMeta: object expected");t.trackingRequestMeta=l.MetadataModel.fromObject(e.trackingRequestMeta)}return null!=e.mediaGuid&&(t.mediaGuid=String(e.mediaGuid)),null!=e.publisherLineItemId&&(t.publisherLineItemId=String(e.publisherLineItemId)),null!=e.advertiserLineItemId&&(t.advertiserLineItemId=String(e.advertiserLineItemId)),t},h.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},h),l.ProtoVideoAdQuartilesRequest=(d.prototype.trackingRequestMeta=null,d.prototype.mediaGuid="",d.prototype.publisherLineItemId="",d.prototype.advertiserLineItemId="",d.prototype.quartile=0,d.encode=function(e,t){return t=t||n.create(),null!=e.trackingRequestMeta&&e.hasOwnProperty("trackingRequestMeta")&&l.MetadataModel.encode(e.trackingRequestMeta,t.uint32(10).fork()).ldelim(),null!=e.mediaGuid&&e.hasOwnProperty("mediaGuid")&&t.uint32(26).string(e.mediaGuid),null!=e.publisherLineItemId&&e.hasOwnProperty("publisherLineItemId")&&t.uint32(42).string(e.publisherLineItemId),null!=e.advertiserLineItemId&&e.hasOwnProperty("advertiserLineItemId")&&t.uint32(50).string(e.advertiserLineItemId),null!=e.quartile&&e.hasOwnProperty("quartile")&&t.uint32(56).int32(e.quartile),t},d.fromObject=function(e){if(e instanceof l.ProtoVideoAdQuartilesRequest)return e;var t=new l.ProtoVideoAdQuartilesRequest;if(null!=e.trackingRequestMeta){if("object"!=typeof e.trackingRequestMeta)throw TypeError(".ProtoVideoAdQuartilesRequest.trackingRequestMeta: object expected");t.trackingRequestMeta=l.MetadataModel.fromObject(e.trackingRequestMeta)}switch(null!=e.mediaGuid&&(t.mediaGuid=String(e.mediaGuid)),null!=e.publisherLineItemId&&(t.publisherLineItemId=String(e.publisherLineItemId)),null!=e.advertiserLineItemId&&(t.advertiserLineItemId=String(e.advertiserLineItemId)),e.quartile){case"Start":case 0:t.quartile=0;break;case"First":case 1:t.quartile=1;break;case"Second":case 2:t.quartile=2;break;case"Third":case 3:t.quartile=3;break;case"Fourth":case 4:t.quartile=4}return t},d.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},d),l.ProtoUserSyncRequest=(c.prototype.userId="",c.prototype.demandPartner=0,c.prototype.demandPartnerUserId="",c.encode=function(e,t){return t=t||n.create(),null!=e.userId&&e.hasOwnProperty("userId")&&t.uint32(10).string(e.userId),null!=e.demandPartner&&e.hasOwnProperty("demandPartner")&&t.uint32(16).int32(e.demandPartner),null!=e.demandPartnerUserId&&e.hasOwnProperty("demandPartnerUserId")&&t.uint32(26).string(e.demandPartnerUserId),t},c.fromObject=function(e){if(e instanceof l.ProtoUserSyncRequest)return e;var t=new l.ProtoUserSyncRequest;return null!=e.userId&&(t.userId=String(e.userId)),null!=e.demandPartner&&(t.demandPartner=0|e.demandPartner),null!=e.demandPartnerUserId&&(t.demandPartnerUserId=String(e.demandPartnerUserId)),t},c.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},c),e.exports=l},function(e,t,i){"use strict";function s(e){return"string"==typeof e}function r(e){return!isNaN(parseFloat(e))&&isFinite(e)}function n(e){return r(e)&&0<e}function o(e){return s(e)&&0<e.length}function a(e){return void 0!==e}function l(e){return"function"==typeof e}function c(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function d(e){try{if(e.contentWindow||e.contentDocument)return!0}catch(e){}return!1}i.d(t,"g",function(){return s}),i.d(t,"d",function(){return r}),i.d(t,"e",function(){return n}),i.d(t,"h",function(){return o}),i.d(t,"a",function(){return a}),i.d(t,"b",function(){return l}),i.d(t,"f",function(){return c}),i.d(t,"c",function(){return d})},function(e,t,i){"use strict";i.d(t,"v",function(){return p}),i.d(t,"R",function(){return g}),i.d(t,"Q",function(){return m}),i.d(t,"N",function(){return f}),i.d(t,"M",function(){return y}),i.d(t,"B",function(){return b}),i.d(t,"A",function(){return v}),i.d(t,"z",function(){return P}),i.d(t,"a",function(){return S}),i.d(t,"L",function(){return I}),i.d(t,"u",function(){return T}),i.d(t,"U",function(){return A}),i.d(t,"O",function(){return O}),i.d(t,"m",function(){return k}),i.d(t,"l",function(){return C}),i.d(t,"n",function(){return w}),i.d(t,"b",function(){return x}),i.d(t,"c",function(){return E}),i.d(t,"f",function(){return L}),i.d(t,"V",function(){return M}),i.d(t,"o",function(){return R}),i.d(t,"i",function(){return B}),i.d(t,"P",function(){return j}),i.d(t,"e",function(){return D}),i.d(t,"q",function(){return F}),i.d(t,"j",function(){return U}),i.d(t,"t",function(){return N}),i.d(t,"d",function(){return V}),i.d(t,"y",function(){return H}),i.d(t,"x",function(){return q}),i.d(t,"w",function(){return W}),i.d(t,"k",function(){return $}),i.d(t,"h",function(){return z}),i.d(t,"g",function(){return J}),i.d(t,"E",function(){return K}),i.d(t,"J",function(){return Q}),i.d(t,"T",function(){return Y}),i.d(t,"D",function(){return X}),i.d(t,"s",function(){return Z}),i.d(t,"r",function(){return ee}),i.d(t,"K",function(){return te}),i.d(t,"F",function(){return ie}),i.d(t,"W",function(){return se}),i.d(t,"p",function(){return re}),i.d(t,"G",function(){return ne}),i.d(t,"S",function(){return oe}),i.d(t,"H",function(){return ae}),i.d(t,"C",function(){return le}),i.d(t,"I",function(){return ce});var s=i(24),l=i(1),n=i(6),r=i(3),o=i(7),c=i(0),d=i(5);function a(e,t){e&&(e.style.display=t?"":"none")}function h(e,t){if(Object(l.a)(e.classList))return e.classList.add(t),0;t=`${e.getAttribute("class")} ${t}`;e.setAttribute("class",t)}function u(e,t){if(Object(l.a)(e.classList))return e.classList.remove(t),0;t=e.getAttribute("class").replace(t,"");e.setAttribute("class",t)}function p(e){a(e,!1)}function g(e){a(e,!0)}function m(e,t){for(const i in t)t.hasOwnProperty(i)&&(e.style[i]=t[i])}function f(t,...e){e.forEach(e=>{t.style[e]=""})}function y(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function b(e,t,i,s,r){if(t)try{const n=i.document.createElement("link");return n.id=e.id,n.type="text/css",n.rel="stylesheet",n.href=e.src,Object(l.b)(s)&&(n.onload=()=>{s()}),Object(l.b)(r)&&(n.onerror=e=>{t.removeChild(n),Object(l.g)(e)?r(`link_stylesheet_load_error_${e}`):r(`link_stylesheet_load_error_${function(e,t){const i=e.document.createElement("div");return i.appendChild(t),i.innerHTML}(i,n)}`)}),t.appendChild(n),n}catch(e){return null}}function v(t,i,e,s,r,n=!0,o){try{const a=e.document.createElement("script");return a.src=t.src,a.async=!0,a.type="text/javascript",t.id&&(a.id=t.id),Object(l.b)(s)&&(a.onload=()=>{s()}),a.onerror=e=>{i.removeChild(a),n&&Object(d.a)({message:o,exception:"script_load_error",callStack:t.src,level:c.ProtoLoggingLevelEnum.INFO,throttle:2,sendMaxLog:!1}),Object(l.b)(r)&&r()},i.appendChild(a),a}catch(i){return n&&Object(d.a)({message:o,exception:`script_insert_error_${i.message}_${i.stack}`,callStack:t.src,level:c.ProtoLoggingLevelEnum.FATAL,throttle:2,sendMaxLog:!1}),Object(l.b)(r)&&r(),null}}function P(e,t,i){if(e)try{const s=t.document.createElement("script"),r=t.document.createTextNode(i);return s.appendChild(r),e.appendChild(s),s}catch(e){return null}}function S(t,...e){t&&e.forEach(e=>{Object(l.h)(e)&&h(t,e)})}function I(t,...e){t&&e.forEach(e=>{Object(l.h)(e)&&u(t,e)})}function T(e,t){return e&&e.classList.contains(t)}function A(e,t,i){return!!e&&(Object(l.a)(i)?i?(S(e,t),!0):(I(e,t),!1):e.classList.toggle(t))}function O(e,t,i,s=!1){e&&(u(e,t),s&&B(e),h(e,i))}const k=(e,t)=>t.document.getElementById(e),C=(e,t,i)=>t.getComputedStyle(e,i),w=(e,t)=>t.document.getElementsByClassName(e);function x(e,t="",i){const s=i.document.getElementsByTagName("head")[0],r=i.document.createElement("style");r.setAttribute("type","text/css"),r.id=t,r.styleSheet?r.styleSheet.cssText=e:r.appendChild(i.document.createTextNode(e)),s.appendChild(r)}function E(e,t){const i=t.document.getElementsByTagName("head")[0],s=t.document.createElement("link");s.setAttribute("rel","preconnect"),s.setAttribute("link",e),i.appendChild(s)}function L(e,t){const i=t.document.createElement("div");return i.innerHTML=e,i.firstElementChild}function M(e,t){0<t?(e.removeAttribute("muted"),e.muted=!1):(e.setAttribute("muted",""),e.muted=!0)}function R(t){return s.b.find(e=>{if(e.keys.fullscreenEnabled in t)return!0})}function B(e){e.getBoundingClientRect()}function j(e,t){return(e.requestAnimationFrame||e.webkitRequestAnimationFrame||function(e){return setTimeout(e,20)})(t)}function D(e,t){return(e.cancelAnimationFrame||e.webkitCancelAnimationFrame||function(e){return clearTimeout(e)})(t)}function _(e,t,i){t=(t=function(e,i){let t=i;for(;t;){const i=t.parentNode;if(i){const t=e.reduce((e,t)=>e||i.querySelector(t),null);if(t)return t}t=i}return null}(e,t))?C(t,N(t)):null;return t?t.getPropertyValue(i):null}function F(e){return _(["h1","h2"],e,"font-family")||"inherit"}function U(e){return _(["p"],e,"font-family")||"inherit"}function N(e){try{return e.ownerDocument.defaultView}catch(e){return null}}function V(e,t){e&&t&&(Array.isArray(e)?e.forEach(e=>t.appendChild(e)):t.appendChild(e))}function H(t,e,i){let s=!1;var r=Object(n.c)(e.children);for(let e=0;e<r.length;e++)if(i-1===e||0===i){s=!0,Array.isArray(t)?q(r[e],...t):q(r[e],t);break}s||V(t,e)}function q(t,...i){if(t&&t.parentElement)for(let e=i.length;e--;)t.parentElement.insertBefore(i[e],t)}function W(t,...i){for(let e=i.length;e--;)t.parentNode.insertBefore(i[e],t.nextSibling)}function $(e,t){return Object(n.c)(t.children).indexOf(e)}function G(e){var t=N(e);t&&(t=C(e,t)["display"],"none"===t&&(e.style.display="block"))}function z(t,i=()=>{}){function s(e){"opacity"===e.propertyName&&(I(t,r.n.FadeOutBase,r.n.FadeOut),i(),t.removeEventListener("transitionend",s))}S(t,r.n.FadeOutBase),G(t),B(t),t.addEventListener("transitionend",s),S(t,r.n.FadeOut)}function J(t,i=()=>{}){function s(e){"opacity"===e.propertyName&&(I(t,r.n.FadeInBase,r.n.FadeIn),i(),t.removeEventListener("transitionend",s))}S(t,r.n.FadeInBase),G(t),B(t),t.addEventListener("transitionend",s),S(t,r.n.FadeIn)}function K(e){var t=N(e);if(!t)return!0;var{display:e,opacity:t}=C(e,t);return"none"===e||"0"===t}function Q(e,t){return null===e.firstChild?e.appendChild(t):e.insertBefore(t,e.firstChild)}function Y(e,t){const i=t.document.createElement("div");return i.innerHTML=e||"",i.innerText}function X(){var e=window.navigator&&window.navigator.doNotTrack||window.doNotTrack;return"1"===e||"yes"===e}function Z(e,t){e=Object(o.f)(e).topFrame;return e[t]?e:null}function ee(e,t){let i=e,s=null;try{for(;!s;){try{i.frames[t]&&(s=i)}catch(e){}if(!e.top||e.top===i)break;i=i.parent}}catch(e){}return s}function te(e,t){let i=[];try{i=i.slice.call(t.document.querySelectorAll(e),0)}catch(e){}return i}function ie(e){return-1!==Object(o.f)(e).topFrame.location.protocol.indexOf("https")}function se(e){ie(e)&&[window,e].forEach(e=>{if(null===e.document.querySelector("meta[content=upgrade-insecure-requests]")){const t=e.document.createElement("meta");t.setAttribute("http-equiv","Content-Security-Policy"),t.content="upgrade-insecure-requests",e.document.head.appendChild(t)}})}function re(e){return Object(o.f)(e).topFrame.document.referrer}function ne(e,t){t=Object(o.f)(t).topFrame.location.hostname,e=Object(o.g)(e);return e&&e.hostname===t}function oe(e){e.removeAttribute("href"),e.removeAttribute("target"),e.removeAttribute("download"),e.removeAttribute("ping"),e.removeAttribute("rel"),e.removeAttribute("media"),e.removeAttribute("hreflang"),e.removeAttribute("type")}function ae(e,i){try{e.onclick=e=>{var{tagName:t,className:e}=e.target;Object(d.a)({message:`${i} - click on tag:${t} class:${e}`,level:c.ProtoLoggingLevelEnum.INFO})}}catch(e){Object(d.a)({message:`${i}_Error - iframe click`,level:c.ProtoLoggingLevelEnum.WARNING,callStack:e.stack})}}function le(e){e.currentTime=e.currentTime+.01}function ce(e,t){!function(e,t){const i=e.document.createElement("link");i.rel="preload",i.href=t,i.as="script",e.document.head.appendChild(i)}(t,e)}},function(e,t,i){"use strict";var s,r,n,o,a,l,c,d,h,u,p,g,m;i.d(t,"h",function(){return s}),i.d(t,"g",function(){return r}),i.d(t,"j",function(){return n}),i.d(t,"t",function(){return f}),i.d(t,"p",function(){return y}),i.d(t,"i",function(){return o}),i.d(t,"k",function(){return a}),i.d(t,"f",function(){return l}),i.d(t,"m",function(){return c}),i.d(t,"l",function(){return d}),i.d(t,"e",function(){return h}),i.d(t,"o",function(){return u}),i.d(t,"n",function(){return b}),i.d(t,"r",function(){return p}),i.d(t,"s",function(){return g}),i.d(t,"b",function(){return v}),i.d(t,"c",function(){return P}),i.d(t,"d",function(){return S}),i.d(t,"q",function(){return I}),i.d(t,"a",function(){return T}),(t=s=s||{}).Invisible="cnx-mod-invisible",t.HoverStart="cnx-mod-hover-s",t.HoverEnd="cnx-mod-hover",t.HoverBoom="cnx-mod-boom",t.DisplayNone="cnx-mod-display-none",t.Active="cnx-mod-active",t.HideOnVolumeHover="cnx-hide-on-volume-hover",t.HideOnSingleVideo="cnx-hide-on-single-video",t.NoTransition="cnx-mod-no-transition",t.Collapsable="cnx-mod-collapsable",t.HasCustomScrollbar="cnx-mod-scrollbar",t.Show="cnx-mod-show",t.Hide="cnx-mod-hide",t.OnHold="cnx-mod-onhold",t.ForceLineBreak="cnx-mod-force-line-break",t.HideOnAdOverlay="cnx-mod-ad-overlay-none",t.HideOnPodLoadingScreen="cnx-mod-pod-loading-none",(t=r=r||{}).Fullscreen="cnx-in-fullscreen",t.Ad="cnx-in-ad",t.AdOverlayType="cnx-in-ad-overlay",t.AdFullSize="cnx-in-ad-full",t.AdShowCard="cnx-ad-show-card",t.ShowControls="cnx-in-show-controls",t.Mobile="cnx-in-mobile",t.Desktop="cnx-in-desktop",t.Muted="cnx-in-mute",t.Collapsed="cnx-in-collapse",t.GalleryPortrait="cnx-in-g-portrait",t.GalleryLandscape="cnx-in-g-landscape",t.ContextController="cnx-context-controller",t.HideUI="cnx-in-hide-ui",t.PodLoadingScreen="cnx-in-pod-loading",t.CloseOn="cnx-close-on",t.CloseOff="cnx-close-off",t.CloseHover="cnx-close-hover",t.CloseFloatOn="cnx-close-float-on",t.CloseFloatOff="cnx-close-float-off",t.CloseFloatHover="cnx-close-float-hover",t.UiInView="cnx-ui-in-view",(t=n=n||{}).Playing="cnx-is-playing",t.Paused="cnx-is-paused",t.Stopped="cnx-is-stopped",t.Preroll="cnx-is-preroll",t.Postroll="cnx-is-postroll",t.Loading="cnx-is-loading",t.LiveEnded="cnx-live-ended";const f={Xxl:"cnx-bp-xxl-v",Xl:"cnx-bp-xl-v",Lg:"cnx-bp-lg-v",Md:"cnx-bp-md-v",Sm:"cnx-bp-sm-v",Xs:"cnx-bp-xs-v",Xxs:"cnx-bp-xxs-v"},y={Xxl:"cnx-bp-xxl-st",Xl:"cnx-bp-xl-st",Lg:"cnx-bp-lg-st",Md:"cnx-bp-md-st",Sm:"cnx-bp-sm-st",Xs:"cnx-bp-xs-st",Xxs:"cnx-bp-xxs-st"};(t=o=o||{}).Responsive="cnx-size-responsive",t.Fixed="cnx-size-fixed",(t=a=a||{}).ClickOption="cnx-cm-item--click",t.ToggleOption="cnx-cm-item--toggle",t.SubmenuOption="cnx-cm-item--submenu",t.ItemIcon="cnx-cm-item__icon",t.ItemTitle="cnx-cm-item__title",t.ItemExtra="cnx-cm-item__extra",t.Items="cnx-cm-items",t.Container="cnx-cm-container",(t=l=l||{}).Icons="cnx-color-icon",t.TooltipText="cnx-color-tt-text",t.TooltipBackground="cnx-color-tt-bg",t.AccentColor="cnx-color-accent",t.PrimaryColor="cnx-color-primary",t.SecondaryColor="cnx-color-secondary",t.TitleComponent="cnx-title-component",t.TitleLink="cnx-color-title-link",t.SlideProgressBar="cnx-slides-progress-bar",t.ProgressFill="cnx-progress-fill",(t=c=c||{}).InheritTitleFontFamily="cnx-inherit-title-font-family",t.InheritBodyFontFamily="cnx-inherit-body-font-family",(t=d=d||{}).Connatix="#0099FF",t.Icons="#FFFFFF",t.PrimaryBackground="#F1F1F1",t.PrimaryForeground="#000000",t.SecondaryBackground="#000000",t.SecondaryForeground="#F1F1F1",t.AccentForeground="#FFFFFF",(h=h||{}).CaptionContainer="cnx-captions-text-holder",(t=u=u||{}).MainClass="cnx-float",t.TransitionClass="cnx-float-transition";const b={FadeOutBase:"cnx-fade-out-base",FadeOut:"cnx-fade-out",FadeInBase:"cnx-fade-in-base",FadeIn:"cnx-fade-in"};(t=p=p||{}).CurrentSlide="cnx-slide-current",t.NextSlide="cnx-slide-next",t.SlideLeft="cnx-slide-left",t.SlideRight="cnx-slide-right",(g=g||{}).OpacityInTransition="cnx-tooltip-animation-in",(m=m=m||{}).Card="cnx-g-card",m.CardSlot="cnx-g-card-slot",m.CardImage="cnx-g-card-image",m.CardText="cnx-g-card-text",m.CardTextContainer="cnx-g-card-text-container",m.CardPlaceholder="cnx-g-card-placeholder",m.CardRail="cnx-g-rail",m.StyleDetailed="cnx-g-style-detailed",m.StyleVisual="cnx-g-style-visual",m.ExploreMore="cnx-g-explore-more",m.FadeOut="cnx-g-fade-out";const v={MainContainer:"cnx-main-container",MainContainerFlex:"cnx-main-container-flex",PlayerWrapper:"cnx-player-wrapper",ImagePlaceholder:"cnx-image-placeholder"},P="cnx-ratio",S="cnx-hide-video",I={Text:"cnx-skip-ad-text",Timer:"cnx-timer-loader",Icon:"cnx-skip-ad-icon",SkipAdButton:"cnx-skip-ad-button",InTimer:"cnx-skip-ad-in-timer"},T={Icon:"cnx-pod-open-new-icon",Button:"cnx-pod-read-more-btn",ButtonContainer:"cnx-pod-read-more-container",Wrapper:"cnx-pod-read-more-wrapper",BackgroundImg:"cnx-pod-loading-background",InfoContainer:"cnx-pod-loading-info",FallbackContainer:"cnx-pod-loading-fallback",SlotCountText:"cnx-pod-slot-count-text"}},function(e,t,i){"use strict";var s,r;i.d(t,"a",function(){return s}),i.d(t,"b",function(){return r}),(t=s=s||{}).Fullscreen="fullscreen",t.Normal="normal",t.Thumbnail="thumbnail",(t=r=r||{}).AdLoaded="AdLoaded",t.AdStarted="AdStarted",t.AdStopped="AdStopped",t.AdSkipped="AdSkipped",t.AdSkippableStateChange="AdSkippableStateChange",t.AdSizeChange="AdSizeChange",t.AdLinearChange="AdLinearChange",t.AdDurationChange="AdDurationChange",t.AdExpandedChange="AdExpandedChange",t.AdRemainingTimeChange="AdRemainingTimeChange",t.AdVolumeChange="AdVolumeChange",t.AdImpression="AdImpression",t.AdVideoStart="AdVideoStart",t.AdVideoFirstQuartile="AdVideoFirstQuartile",t.AdVideoMidpoint="AdVideoMidpoint",t.AdVideoThirdQuartile="AdVideoThirdQuartile",t.AdVideoComplete="AdVideoComplete",t.AdClickThru="AdClickThru",t.AdInteraction="AdInteraction",t.AdUserAcceptInvitation="AdUserAcceptInvitation",t.AdUserMinimize="AdUserMinimize",t.AdUserClose="AdUserClose",t.AdPaused="AdPaused",t.AdPlaying="AdPlaying",t.AdLog="AdLog",t.AdError="AdError"},function(e,t,i){"use strict";var n=i(18),o=i(25),a=i(0),l=i(13),c=i(31);var d=i(38);i.d(t,"a",function(){return m});var h=function(e,t){var i={};for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(i[r[s]]=e[r[s]]);return i};const u=500;let p=window.location&&window.location.href,g=!1;try{p=window.top.location.href}catch(e){}function m(e){var{throttle:t=30,sendMaxLog:i=!0,logJsonState:s=!1}=e,e=h(e,["throttle","sendMaxLog","logJsonState"]);if(!g)if(e.playerDestroyed&&(g=!0),e.sessionId=c.a.sessionId,c.a.incrementLogCount(e.message),c.a.isMaxLogOverflow(e.message)&&m({message:"Logging_max_log_overflow_1000",exception:e.message,callStack:e.callStack,level:a.ProtoLoggingLevelEnum.FATAL,sendMaxLog:!1,throttle:100,sessionId:c.a.sessionId}),c.a.isMaxLog(e.message,t))i&&!c.a.isMaxLogSent(e.message)&&(c.a.setMaxLogSent(e.message),m({message:"Logging_max_log_sent",exception:e.message,callStack:e.callStack,level:a.ProtoLoggingLevelEnum.FATAL,sessionId:c.a.sessionId}));else{if(s&&(e.callStack=d.a.getJsonString()),void 0===e.callStack){const r=new Error(e.message);e.callStack=r.stack}if(e.callStack=e.callStack.substring(0,u),n.a.logToServer){e.pageUrl=p,e.version=n.a.version;const r={requestData:e,endpoint:l.a.endPoints.tracking.logging,ProtoRequest:a.ProtoLoggingRequest,logError:!0};e.sendBeacon?o.a.sendProtoBeaconRequest(r):o.a.sendProtoRequest(r).catch(e=>{})}n.a.logToConsole&&function(e){let t;switch(e.level){case a.ProtoLoggingLevelEnum.FATAL:t="#8B0000";break;case a.ProtoLoggingLevelEnum.WARNING:t="#FF8C00";break;case a.ProtoLoggingLevelEnum.INFO:t="#000000"}console.log(`%cConnatix Logging:\n   message: ${e.message}\n   exception: ${e.exception}\n   level: ${e.level}\n   version: ${e.version}\n   sessionId: ${e.sessionId}\n   callStack: ${e.callStack}`,`color:${t}`)}(e)}}},function(e,t,i){"use strict";i.d(t,"g",function(){return l}),i.d(t,"m",function(){return c}),i.d(t,"e",function(){return d}),i.d(t,"c",function(){return h}),i.d(t,"f",function(){return u}),i.d(t,"h",function(){return p}),i.d(t,"i",function(){return g}),i.d(t,"l",function(){return m}),i.d(t,"j",function(){return f}),i.d(t,"a",function(){return y}),i.d(t,"b",function(){return b}),i.d(t,"n",function(){return v}),i.d(t,"k",function(){return P}),i.d(t,"d",function(){return S});var s=i(32),r=i(7),n=i(1),o=i(5),a=i(0);function l(e,t){return-1<t.indexOf(e)}function c(e){return Array.isArray(e)?e:[e]}function d(t,e){const i=[],s=new Map;return e.forEach(e=>{s.has(e[t])||(s.set(e[t],!0),i.push(e))}),i}function h(e){return[].slice.call(e)}function u(e){const t=[];for(const i in e)i&&0<=parseInt(i,10)&&t.push(e[i]);return t}function p(e){return e&&0<e.length}function g(e){return e.every(e=>Object(n.d)(e))}function m(t){let i="[";for(let e=0;e<t.length;e++)i+=Object(s.c)(t[e])+(e===t.length-1?"":",");return i+="]"}function f(e,i){return!(!e||!i)&&e.length===i.length&&(e===i||0===e.length&&0===i.length||e.every((e,t)=>Object(r.i)(e,i[t])))}function y(e,t){return e.filter(e=>!t.includes(e))}function b(e,t){return e.filter(e=>t.includes(e))}function v(i){return i.filter((e,t)=>i.indexOf(e)===t)}function P(e,t){var i=e.indexOf(t);-1!==i?e.splice(i,1):Object(o.a)({message:"removeItemFromArray_error_item_not_found",exception:JSON.stringify(t),level:a.ProtoLoggingLevelEnum.WARNING})}function S(e){const t=[];return e.forEach(e=>t.push(e)),t}},function(e,t,i){"use strict";i.d(t,"c",function(){return r}),i.d(t,"d",function(){return l}),i.d(t,"e",function(){return c}),i.d(t,"g",function(){return d}),i.d(t,"f",function(){return h}),i.d(t,"m",function(){return u}),i.d(t,"l",function(){return p}),i.d(t,"b",function(){return g}),i.d(t,"a",function(){return m}),i.d(t,"i",function(){return f}),i.d(t,"h",function(){return y}),i.d(t,"j",function(){return b}),i.d(t,"k",function(){return v});var s=i(17),n=i(1),o=i(32),a=i(6);function r(){let i=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=(i+16*Math.random())%16|0;return i=Math.floor(i/16),("x"===e?t:3&t|8).toString(16)})}function l(){return r().replace(/-/g,"")}function c(e,t){let i="";if(!e.err)try{i=e.topFrame.location.href}catch(e){}if(!i||0===i.length)try{i=t.top.location.href}catch(e){}if(!i||0===i.length)try{i=e.topFrame.document.referrer}catch(e){}return i}function d(e){try{var t=e.match(/^(https?:)\/\/(([^:\/?#]*)(?::([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);return{href:e,protocol:t[1],host:t[2],hostname:t[3],port:t[4],pathname:t[5],search:t[6],hash:t[7]}}catch(e){return null}}function h(e){let t=e,i=null,s=!1;try{for(;t.parent.document!==t.document;){if(!t.parent.document){s=!0;break}i=t,t=t.parent}}catch(e){s=!0}return{topFrame:t,topChildFrame:i,err:s}}function u(e=[],t,i={}){e.forEach(e=>{Object(n.g)(e)&&((new t.Image).src=`${e}${Object(s.c)(e)}${function(i,s){const r=[];return Object.keys(i).forEach(e=>{var t=s?`${s}[${e}]`:e,e=i[e];if(Object(n.f)(e))r.push(`${encodeURIComponent(t)}=${Object(o.c)(e)}`);else if(Array.isArray(e))r.push(`${encodeURIComponent(t)}=${Object(a.l)(e)}`);else if(null!=e){const i=encodeURIComponent(e),s=encodeURIComponent(t);i&&s&&r.push(`${s}=${i}`)}}),r.join("&")}(i)}`)})}function p(t){var i=Math.floor(100*Math.random());let s=0,r=0;for(let e=0;e<t.length;e++)if(i<(r+=t[e])){s=e;break}return s}function g(){let e=!1;try{const t=document.createElement("audio");t.volume=1,t.muted=!1;const i=t.play();void 0!==i&&i.catch(()=>{}),e=!t.paused,t.pause()}catch(e){}return e}function m(e,t=0,...i){return setTimeout(()=>{e.apply(this,i)},t)}function f(e,t){return Object(n.f)(e)?Object(o.b)(e,t):Array.isArray(e)?Object(a.j)(e,t):e===t}function y(e,t,i){let s=0,r=e;for(;s<=i;){if(s++,r.classList.contains(t))return!0;if(!(r=r.parentElement))return!1}return!1}function b(s,r){try{var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(s),o=parseInt(n[1],16),a=parseInt(n[2],16),l=parseInt(n[3],16);o/=255,a/=255,l/=255;var c=Math.max(o,a,l),d=Math.min(o,a,l);let e,t,i=(c+d)/2;if(c===d)e=t=0;else{const s=c-d;switch(t=.5<i?s/(2-c-d):s/(c+d),c){case o:e=(a-l)/s+(a<l?6:0);break;case a:e=(l-o)/s+2;break;case l:e=(o-a)/s+4}e/=6}return e=Math.round(360*e),t=Math.round(100*t),i=Math.round(100*i),`hsl(${e},${t}%,${i+=r/100*(100-i)}%)`}catch(r){return s}}function v(s,r=5){return new Promise((t,i)=>{s().then(t).catch(e=>{1!==r?v(s,r-1).then(t,i):i(e)})})}},function(e,t,i){"use strict";var s,r;(r=s=s||{})[r.HoldStart=0]="HoldStart",r[r.HoldEnd=1]="HoldEnd",r[r.TapLeft=2]="TapLeft",r[r.TapRight=3]="TapRight",r[r.SwipeEnd=4]="SwipeEnd",r[r.SwipeMove=5]="SwipeMove",r[r.Scroll=6]="Scroll",r[r.Click=7]="Click",t.a=s},function(e,t,i){"use strict";var s,r=i(59),o=r.Reader,n=r.Writer,a=r.util,l=r.roots.default||(r.roots.default={});function c(e){if(this.types=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function d(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function h(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function u(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function p(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function g(e){if(this.items=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function m(e){if(this.filters=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function f(e){if(this.items=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function y(e){if(this.trackers=[],this.renditions=[],this.floorPrices=[],this.advertiserContextualTargeting=[],this.publisherContextualTargeting=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function b(e){if(this.adBreakTargeting=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function v(e){if(this.adSlotPositions=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function P(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function S(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function I(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function T(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function A(e){if(this.players=[],this.lineItems=[],this.cookieSyncUrls={},e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function O(e){if(this.sharingDestinations=[],this.floatingDeviceMode=[],this.lineItems=[],this.adBreaks=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function k(e){if(this.tokens=[],this.forceLineItemIds=[],this.queryJsTargeting={},this.reloadedPlayers={},e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function C(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function w(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function x(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function E(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function L(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function M(e){if(this.items=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function R(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function B(e){if(this.chunkList=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function j(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function D(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function _(e){if(this.capabilityList=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function F(e){if(this.slides=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function U(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function N(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function V(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function H(e){if(this.renditions=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function q(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}l.ProtoPlayspaceCodecEnum=(s={},(i=Object.create(s))[s[0]="h264"]=0,i[s[1]="hevc"]=1,i),l.ProtoPlayspaceVideoSlideRendition=(q.prototype.width=0,q.prototype.height=0,q.prototype.videoUrl="",q.prototype.codec=0,q.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoPlayspaceVideoSlideRendition;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.width=e.int32();break;case 2:s.height=e.int32();break;case 3:s.videoUrl=e.string();break;case 4:s.codec=e.int32();break;default:e.skipType(7&r)}}return s},q.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.width=0,i.height=0,i.videoUrl="",i.codec=t.enums===String?"h264":0),null!=e.width&&e.hasOwnProperty("width")&&(i.width=e.width),null!=e.height&&e.hasOwnProperty("height")&&(i.height=e.height),null!=e.videoUrl&&e.hasOwnProperty("videoUrl")&&(i.videoUrl=e.videoUrl),null!=e.codec&&e.hasOwnProperty("codec")&&(i.codec=t.enums===String?l.ProtoPlayspaceCodecEnum[e.codec]:e.codec),i},q),l.ProtoPlayspaceVideoSettings=(H.prototype.renditions=a.emptyArray,H.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoPlayspaceVideoSettings;e.pos<i;){var r=e.uint32();r>>>3==1?(s.renditions&&s.renditions.length||(s.renditions=[]),s.renditions.push(l.ProtoPlayspaceVideoSlideRendition.decode(e,e.uint32()))):e.skipType(7&r)}return s},H.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.renditions=[]),e.renditions&&e.renditions.length){i.renditions=[];for(var s=0;s<e.renditions.length;++s)i.renditions[s]=l.ProtoPlayspaceVideoSlideRendition.toObject(e.renditions[s],t)}return i},H),l.ProtoPlayerOrientationEnum=(s={},(i=Object.create(s))[s[0]="Mixed"]=0,i[s[1]="Portrait"]=1,i[s[2]="Landscape"]=2,i),l.ProtoEndOfSlideCycleMode=(s={},(i=Object.create(s))[s[0]="Loop"]=0,i[s[1]="Stop"]=1,i),l.ProtoPlayspaceColorSchemeEnum=(s={},(i=Object.create(s))[s[0]="Default"]=0,i[s[1]="Accent"]=1,i[s[2]="Primary"]=2,i[s[3]="Secondary"]=3,i),l.ProtoPlayspaceSlideTypeEnum=(s={},(i=Object.create(s))[s[0]="Default"]=0,i[s[1]="Cover"]=1,i[s[2]="Description"]=2,i[s[3]="BulletList"]=3,i[s[4]="Stock"]=4,i[s[5]="Quote"]=5,i[s[6]="Instagram"]=6,i),l.ProtoPlayspaceSlideCapabilitiesEnum=(s={},(i=Object.create(s))[s[0]="VolumeControls"]=0,i[s[1]="PlaybackControls"]=1,i[s[2]="PlaylistControls"]=2,i[s[3]="CtaButton"]=3,i[s[4]="TopStoryTitle"]=4,i[s[5]="TopSlideTitle"]=5,i),l.ProtoMediaContextEnum=(s={},(i=Object.create(s))[s[0]="None"]=0,i[s[1]="Logo"]=1,i),l.ProtoSlideCapabilityMetadata=(V.prototype.label="",V.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoSlideCapabilityMetadata;e.pos<i;){var r=e.uint32();r>>>3==1?s.label=e.string():e.skipType(7&r)}return s},V.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.label=""),null!=e.label&&e.hasOwnProperty("label")&&(i.label=e.label),i},V),l.ProtoPlayspaceSlideCapability=(N.prototype.type=0,N.prototype.metadata=null,N.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoPlayspaceSlideCapability;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.type=e.int32();break;case 2:s.metadata=l.ProtoSlideCapabilityMetadata.decode(e,e.uint32());break;default:e.skipType(7&r)}}return s},N.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.type=t.enums===String?"VolumeControls":0,i.metadata=null),null!=e.type&&e.hasOwnProperty("type")&&(i.type=t.enums===String?l.ProtoPlayspaceSlideCapabilitiesEnum[e.type]:e.type),null!=e.metadata&&e.hasOwnProperty("metadata")&&(i.metadata=l.ProtoSlideCapabilityMetadata.toObject(e.metadata,t)),i},N),l.ProtoFallbackStoryResponse=(U.prototype.storyId="",U.prototype.activeVersionId="",U.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoFallbackStoryResponse;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.storyId=e.string();break;case 2:s.activeVersionId=e.string();break;default:e.skipType(7&r)}}return s},U.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.storyId="",i.activeVersionId=""),null!=e.storyId&&e.hasOwnProperty("storyId")&&(i.storyId=e.storyId),null!=e.activeVersionId&&e.hasOwnProperty("activeVersionId")&&(i.activeVersionId=e.activeVersionId),i},U),l.ProtoPlayspaceMediaMetadataResponse=(F.prototype.slides=a.emptyArray,F.prototype.storyTitle="",F.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoPlayspaceMediaMetadataResponse;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.slides&&s.slides.length||(s.slides=[]),s.slides.push(l.ProtoPlayspaceSlideMetadata.decode(e,e.uint32()));break;case 2:s.storyTitle=e.string();break;default:e.skipType(7&r)}}return s},F.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.slides=[]),t.defaults&&(i.storyTitle=""),e.slides&&e.slides.length){i.slides=[];for(var s=0;s<e.slides.length;++s)i.slides[s]=l.ProtoPlayspaceSlideMetadata.toObject(e.slides[s],t)}return null!=e.storyTitle&&e.hasOwnProperty("storyTitle")&&(i.storyTitle=e.storyTitle),i},F),l.ProtoPlayspaceSlideMetadata=(_.prototype.mediaType=0,_.prototype.title="",_.prototype.clickUrl="",_.prototype.imageUrl="",_.prototype.slideDuration=0,_.prototype.videoRendition=null,_.prototype.type=0,_.prototype.coverMetadata=null,_.prototype.descriptionMetadata=null,_.prototype.bulletListMetadata=null,_.prototype.quoteMetadata=null,_.prototype.instagramMetadata=null,_.prototype.capabilityList=a.emptyArray,_.prototype.portraitImageUrl="",_.prototype.mediaContext=0,_.prototype.altText="",_.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoPlayspaceSlideMetadata;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.mediaType=e.int32();break;case 2:s.title=e.string();break;case 3:s.clickUrl=e.string();break;case 4:s.imageUrl=e.string();break;case 5:s.slideDuration=e.int32();break;case 6:s.videoRendition=l.ProtoPlayspaceVideoSettings.decode(e,e.uint32());break;case 7:s.type=e.int32();break;case 8:s.coverMetadata=l.ProtoPlayspaceCoverMetadata.decode(e,e.uint32());break;case 9:s.descriptionMetadata=l.ProtoPlayspaceDescriptionMetadata.decode(e,e.uint32());break;case 10:s.bulletListMetadata=l.ProtoPlayspaceBulletListMetadata.decode(e,e.uint32());break;case 12:s.quoteMetadata=l.ProtoPlayspaceQuoteMetadata.decode(e,e.uint32());break;case 16:s.instagramMetadata=l.ProtoPlayspaceInstagramMetadata.decode(e,e.uint32());break;case 13:s.capabilityList&&s.capabilityList.length||(s.capabilityList=[]),s.capabilityList.push(l.ProtoPlayspaceSlideCapability.decode(e,e.uint32()));break;case 14:s.portraitImageUrl=e.string();break;case 15:s.mediaContext=e.int32();break;case 17:s.altText=e.string();break;default:e.skipType(7&r)}}return s},_.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.capabilityList=[]),t.defaults&&(i.mediaType=t.enums===String?"Image":0,i.title="",i.clickUrl="",i.imageUrl="",i.slideDuration=0,i.videoRendition=null,i.type=t.enums===String?"Default":0,i.coverMetadata=null,i.descriptionMetadata=null,i.bulletListMetadata=null,i.quoteMetadata=null,i.portraitImageUrl="",i.mediaContext=t.enums===String?"None":0,i.instagramMetadata=null,i.altText=""),null!=e.mediaType&&e.hasOwnProperty("mediaType")&&(i.mediaType=t.enums===String?l.ProtoMediaTypeEnum[e.mediaType]:e.mediaType),null!=e.title&&e.hasOwnProperty("title")&&(i.title=e.title),null!=e.clickUrl&&e.hasOwnProperty("clickUrl")&&(i.clickUrl=e.clickUrl),null!=e.imageUrl&&e.hasOwnProperty("imageUrl")&&(i.imageUrl=e.imageUrl),null!=e.slideDuration&&e.hasOwnProperty("slideDuration")&&(i.slideDuration=e.slideDuration),null!=e.videoRendition&&e.hasOwnProperty("videoRendition")&&(i.videoRendition=l.ProtoPlayspaceVideoSettings.toObject(e.videoRendition,t)),null!=e.type&&e.hasOwnProperty("type")&&(i.type=t.enums===String?l.ProtoPlayspaceSlideTypeEnum[e.type]:e.type),null!=e.coverMetadata&&e.hasOwnProperty("coverMetadata")&&(i.coverMetadata=l.ProtoPlayspaceCoverMetadata.toObject(e.coverMetadata,t)),null!=e.descriptionMetadata&&e.hasOwnProperty("descriptionMetadata")&&(i.descriptionMetadata=l.ProtoPlayspaceDescriptionMetadata.toObject(e.descriptionMetadata,t)),null!=e.bulletListMetadata&&e.hasOwnProperty("bulletListMetadata")&&(i.bulletListMetadata=l.ProtoPlayspaceBulletListMetadata.toObject(e.bulletListMetadata,t)),null!=e.quoteMetadata&&e.hasOwnProperty("quoteMetadata")&&(i.quoteMetadata=l.ProtoPlayspaceQuoteMetadata.toObject(e.quoteMetadata,t)),e.capabilityList&&e.capabilityList.length){i.capabilityList=[];for(var s=0;s<e.capabilityList.length;++s)i.capabilityList[s]=l.ProtoPlayspaceSlideCapability.toObject(e.capabilityList[s],t)}return null!=e.portraitImageUrl&&e.hasOwnProperty("portraitImageUrl")&&(i.portraitImageUrl=e.portraitImageUrl),null!=e.mediaContext&&e.hasOwnProperty("mediaContext")&&(i.mediaContext=t.enums===String?l.ProtoMediaContextEnum[e.mediaContext]:e.mediaContext),null!=e.instagramMetadata&&e.hasOwnProperty("instagramMetadata")&&(i.instagramMetadata=l.ProtoPlayspaceInstagramMetadata.toObject(e.instagramMetadata,t)),null!=e.altText&&e.hasOwnProperty("altText")&&(i.altText=e.altText),i},_),l.ProtoPlayspaceCoverMetadata=(D.prototype.title="",D.prototype.subtitle="",D.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoPlayspaceCoverMetadata;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.title=e.string();break;case 2:s.subtitle=e.string();break;default:e.skipType(7&r)}}return s},D.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.title="",i.subtitle=""),null!=e.title&&e.hasOwnProperty("title")&&(i.title=e.title),null!=e.subtitle&&e.hasOwnProperty("subtitle")&&(i.subtitle=e.subtitle),i},D),l.ProtoPlayspaceDescriptionChunk=(j.prototype.text="",j.prototype.colorScheme=0,j.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoPlayspaceDescriptionChunk;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.text=e.string();break;case 2:s.colorScheme=e.int32();break;default:e.skipType(7&r)}}return s},j.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.text="",i.colorScheme=t.enums===String?"Default":0),null!=e.text&&e.hasOwnProperty("text")&&(i.text=e.text),null!=e.colorScheme&&e.hasOwnProperty("colorScheme")&&(i.colorScheme=t.enums===String?l.ProtoPlayspaceColorSchemeEnum[e.colorScheme]:e.colorScheme),i},j),l.ProtoPlayspaceDescriptionMetadata=(B.prototype.chunkList=a.emptyArray,B.prototype.label=null,B.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoPlayspaceDescriptionMetadata;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.chunkList&&s.chunkList.length||(s.chunkList=[]),s.chunkList.push(l.ProtoPlayspaceDescriptionChunk.decode(e,e.uint32()));break;case 2:s.label=l.ProtoPlayspaceDescriptionChunk.decode(e,e.uint32());break;default:e.skipType(7&r)}}return s},B.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.chunkList=[]),t.defaults&&(i.label=null),e.chunkList&&e.chunkList.length){i.chunkList=[];for(var s=0;s<e.chunkList.length;++s)i.chunkList[s]=l.ProtoPlayspaceDescriptionChunk.toObject(e.chunkList[s],t)}return null!=e.label&&e.hasOwnProperty("label")&&(i.label=l.ProtoPlayspaceDescriptionChunk.toObject(e.label,t)),i},B),l.ProtoBulletOptions=(R.prototype.title="",R.prototype.description="",R.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoBulletOptions;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.title=e.string();break;case 2:s.description=e.string();break;default:e.skipType(7&r)}}return s},R.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.title="",i.description=""),null!=e.title&&e.hasOwnProperty("title")&&(i.title=e.title),null!=e.description&&e.hasOwnProperty("description")&&(i.description=e.description),i},R),l.ProtoPlayspaceBulletListMetadata=(M.prototype.title="",M.prototype.items=a.emptyArray,M.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoPlayspaceBulletListMetadata;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.title=e.string();break;case 2:s.items&&s.items.length||(s.items=[]),s.items.push(l.ProtoBulletOptions.decode(e,e.uint32()));break;default:e.skipType(7&r)}}return s},M.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.items=[]),t.defaults&&(i.title=""),null!=e.title&&e.hasOwnProperty("title")&&(i.title=e.title),e.items&&e.items.length){i.items=[];for(var s=0;s<e.items.length;++s)i.items[s]=l.ProtoBulletOptions.toObject(e.items[s],t)}return i},M),l.ProtoPlayspaceQuoteMetadata=(L.prototype.text="",L.prototype.source="",L.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoPlayspaceQuoteMetadata;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.text=e.string();break;case 2:s.source=e.string();break;default:e.skipType(7&r)}}return s},L.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.text="",i.source=""),null!=e.text&&e.hasOwnProperty("text")&&(i.text=e.text),null!=e.source&&e.hasOwnProperty("source")&&(i.source=e.source),i},L),l.ProtoPlayspaceInstagramMetadata=(E.prototype.handle="",E.prototype.createdDate="",E.prototype.likes="",E.prototype.comments="",E.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoPlayspaceInstagramMetadata;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.handle=e.string();break;case 2:s.createdDate=e.string();break;case 3:s.likes=e.string();break;case 4:s.comments=e.string();break;default:e.skipType(7&r)}}return s},E.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.handle="",i.createdDate="",i.likes="",i.comments=""),null!=e.handle&&e.hasOwnProperty("handle")&&(i.handle=e.handle),null!=e.createdDate&&e.hasOwnProperty("createdDate")&&(i.createdDate=e.createdDate),null!=e.likes&&e.hasOwnProperty("likes")&&(i.likes=e.likes),null!=e.comments&&e.hasOwnProperty("comments")&&(i.comments=e.comments),i},E),l.ProtoMediaTypeEnum=(s={},(i=Object.create(s))[s[0]="Image"]=0,i[s[1]="Video"]=1,i),l.ProtoPlayspaceColorPrimary=(x.prototype.background="#F1F1F1",x.prototype.foreground="#000000",x.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoPlayspaceColorPrimary;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.background=e.string();break;case 2:s.foreground=e.string();break;default:e.skipType(7&r)}}return s},x.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.background="#F1F1F1",i.foreground="#000000"),null!=e.background&&e.hasOwnProperty("background")&&(i.background=e.background),null!=e.foreground&&e.hasOwnProperty("foreground")&&(i.foreground=e.foreground),i},x),l.ProtoPlayspaceColorSecondary=(w.prototype.background="#000000 ",w.prototype.foreground="#F1F1F1",w.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoPlayspaceColorSecondary;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.background=e.string();break;case 2:s.foreground=e.string();break;default:e.skipType(7&r)}}return s},w.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.background="#000000 ",i.foreground="#F1F1F1"),null!=e.background&&e.hasOwnProperty("background")&&(i.background=e.background),null!=e.foreground&&e.hasOwnProperty("foreground")&&(i.foreground=e.foreground),i},w),l.ProtoPlayspaceColorAccent=(C.prototype.background="",C.prototype.foreground="",C.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoPlayspaceColorAccent;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.background=e.string();break;case 2:s.foreground=e.string();break;default:e.skipType(7&r)}}return s},C.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.background="",i.foreground=""),null!=e.background&&e.hasOwnProperty("background")&&(i.background=e.background),null!=e.foreground&&e.hasOwnProperty("foreground")&&(i.foreground=e.foreground),i},C),l.ProtoPlayspaceRequest=(k.prototype.tokens=a.emptyArray,k.prototype.pageUrl="",k.prototype.userId="",k.prototype.forcePlayerId="",k.prototype.forceStoryId="",k.prototype.version=0,k.prototype.clientAb0=0,k.prototype.clientAb1=0,k.prototype.forceLineItemIds=a.emptyArray,k.prototype.customParam1="",k.prototype.customParam2="",k.prototype.customParam3="",k.prototype.forceExploration=!1,k.prototype.es6=!1,k.prototype.bundleId="",k.prototype.parseDomain=!1,k.prototype.implementationType=0,k.prototype.queryJsTargeting=a.emptyObject,k.prototype.isConsentConnatix=!0,k.prototype.reloadedPlayers=a.emptyObject,k.prototype.disableTracking=!1,k.prototype.referrer="",k.prototype.customParam4="",k.prototype.customParam5="",k.encode=function(e,t){if(t=t||n.create(),null!=e.tokens&&e.tokens.length)for(var i=0;i<e.tokens.length;++i)t.uint32(10).string(e.tokens[i]);if(null!=e.pageUrl&&e.hasOwnProperty("pageUrl")&&t.uint32(26).string(e.pageUrl),null!=e.userId&&e.hasOwnProperty("userId")&&t.uint32(42).string(e.userId),null!=e.forcePlayerId&&e.hasOwnProperty("forcePlayerId")&&t.uint32(58).string(e.forcePlayerId),null!=e.forceStoryId&&e.hasOwnProperty("forceStoryId")&&t.uint32(66).string(e.forceStoryId),null!=e.version&&e.hasOwnProperty("version")&&t.uint32(72).int32(e.version),null!=e.clientAb0&&e.hasOwnProperty("clientAb0")&&t.uint32(80).int32(e.clientAb0),null!=e.clientAb1&&e.hasOwnProperty("clientAb1")&&t.uint32(88).int32(e.clientAb1),null!=e.forceLineItemIds&&e.forceLineItemIds.length)for(i=0;i<e.forceLineItemIds.length;++i)t.uint32(98).string(e.forceLineItemIds[i]);if(null!=e.customParam1&&e.hasOwnProperty("customParam1")&&t.uint32(114).string(e.customParam1),null!=e.customParam2&&e.hasOwnProperty("customParam2")&&t.uint32(122).string(e.customParam2),null!=e.customParam3&&e.hasOwnProperty("customParam3")&&t.uint32(130).string(e.customParam3),null!=e.forceExploration&&e.hasOwnProperty("forceExploration")&&t.uint32(136).bool(e.forceExploration),null!=e.es6&&e.hasOwnProperty("es6")&&t.uint32(144).bool(e.es6),null!=e.bundleId&&e.hasOwnProperty("bundleId")&&t.uint32(154).string(e.bundleId),null!=e.parseDomain&&e.hasOwnProperty("parseDomain")&&t.uint32(160).bool(e.parseDomain),null!=e.implementationType&&e.hasOwnProperty("implementationType")&&t.uint32(168).int32(e.implementationType),null!=e.queryJsTargeting&&e.hasOwnProperty("queryJsTargeting"))for(var s=Object.keys(e.queryJsTargeting),i=0;i<s.length;++i)t.uint32(178).fork().uint32(10).string(s[i]).uint32(18).string(e.queryJsTargeting[s[i]]).ldelim();if(null!=e.isConsentConnatix&&e.hasOwnProperty("isConsentConnatix")&&t.uint32(184).bool(e.isConsentConnatix),null!=e.reloadedPlayers&&e.hasOwnProperty("reloadedPlayers"))for(s=Object.keys(e.reloadedPlayers),i=0;i<s.length;++i)t.uint32(202).fork().uint32(10).string(s[i]).uint32(18).string(e.reloadedPlayers[s[i]]).ldelim();return null!=e.disableTracking&&e.hasOwnProperty("disableTracking")&&t.uint32(216).bool(e.disableTracking),null!=e.referrer&&e.hasOwnProperty("referrer")&&t.uint32(226).string(e.referrer),null!=e.customParam4&&e.hasOwnProperty("customParam4")&&t.uint32(234).string(e.customParam4),null!=e.customParam5&&e.hasOwnProperty("customParam5")&&t.uint32(242).string(e.customParam5),t},k.fromObject=function(e){if(e instanceof l.ProtoPlayspaceRequest)return e;var t=new l.ProtoPlayspaceRequest;if(e.tokens){if(!Array.isArray(e.tokens))throw TypeError(".ProtoPlayspaceRequest.tokens: array expected");t.tokens=[];for(var i=0;i<e.tokens.length;++i)t.tokens[i]=String(e.tokens[i])}if(null!=e.pageUrl&&(t.pageUrl=String(e.pageUrl)),null!=e.userId&&(t.userId=String(e.userId)),null!=e.forcePlayerId&&(t.forcePlayerId=String(e.forcePlayerId)),null!=e.forceStoryId&&(t.forceStoryId=String(e.forceStoryId)),null!=e.version&&(t.version=0|e.version),null!=e.clientAb0&&(t.clientAb0=0|e.clientAb0),null!=e.clientAb1&&(t.clientAb1=0|e.clientAb1),e.forceLineItemIds){if(!Array.isArray(e.forceLineItemIds))throw TypeError(".ProtoPlayspaceRequest.forceLineItemIds: array expected");for(t.forceLineItemIds=[],i=0;i<e.forceLineItemIds.length;++i)t.forceLineItemIds[i]=String(e.forceLineItemIds[i])}switch(null!=e.customParam1&&(t.customParam1=String(e.customParam1)),null!=e.customParam2&&(t.customParam2=String(e.customParam2)),null!=e.customParam3&&(t.customParam3=String(e.customParam3)),null!=e.forceExploration&&(t.forceExploration=Boolean(e.forceExploration)),null!=e.es6&&(t.es6=Boolean(e.es6)),null!=e.bundleId&&(t.bundleId=String(e.bundleId)),null!=e.parseDomain&&(t.parseDomain=Boolean(e.parseDomain)),e.implementationType){case"Web":case 0:t.implementationType=0;break;case"Amp":case 1:t.implementationType=1}if(e.queryJsTargeting){if("object"!=typeof e.queryJsTargeting)throw TypeError(".ProtoPlayspaceRequest.queryJsTargeting: object expected");t.queryJsTargeting={};for(var s=Object.keys(e.queryJsTargeting),i=0;i<s.length;++i)t.queryJsTargeting[s[i]]=String(e.queryJsTargeting[s[i]])}if(null!=e.isConsentConnatix&&(t.isConsentConnatix=Boolean(e.isConsentConnatix)),e.reloadedPlayers){if("object"!=typeof e.reloadedPlayers)throw TypeError(".ProtoPlayspaceRequest.reloadedPlayers: object expected");for(t.reloadedPlayers={},s=Object.keys(e.reloadedPlayers),i=0;i<s.length;++i)t.reloadedPlayers[s[i]]=String(e.reloadedPlayers[s[i]])}return null!=e.disableTracking&&(t.disableTracking=Boolean(e.disableTracking)),null!=e.referrer&&(t.referrer=String(e.referrer)),null!=e.customParam4&&(t.customParam4=String(e.customParam4)),null!=e.customParam5&&(t.customParam5=String(e.customParam5)),t},k.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},k),l.ProtoPlayspace=(O.prototype.playerId="",O.prototype.playbackMode=0,O.prototype.soundMode=0,O.prototype.endOfCycleMode=0,O.prototype.containerSelector="",O.prototype.position=0,O.prototype.insertPosition=0,O.prototype.forceInsertPath=!1,O.prototype.renderInFrame=!1,O.prototype.scrollHijackingProtection=!1,O.prototype.preRollBreak=0,O.prototype.postRollBreak=0,O.prototype.midRollNumber=-1,O.prototype.slidesBetweenAds=0,O.prototype.minSlidesBeforeFirstAd=0,O.prototype.adViewabilityPolicy=0,O.prototype.casting=!1,O.prototype.sharingDestinations=a.emptyArray,O.prototype.expandButton=!1,O.prototype.closeButtonMode=0,O.prototype.floatingMode=0,O.prototype.floatingDeviceMode=a.emptyArray,O.prototype.floatingCloseButtonMode=0,O.prototype.floatingFixedPosition=0,O.prototype.floatingPageElement="",O.prototype.floatingUseElementWidth=!1,O.prototype.floatingScrollPosition=0,O.prototype.floatingGutterX=0,O.prototype.floatingGutterY=0,O.prototype.floatingWidth=0,O.prototype.html="",O.prototype.logoUrl="",O.prototype.lineItems=a.emptyArray,O.prototype.adPlaybackMode=0,O.prototype.css="",O.prototype.sessionId="",O.prototype.orientation=0,O.prototype.orientationBreakpoint=0,O.prototype.activeVersion="",O.prototype.storyId="",O.prototype.floatingAppendLocation=0,O.prototype.floatingYAxisPadding=0,O.prototype.contentTitleTextColor="",O.prototype.useAccentColorForProgressBar=!1,O.prototype.primaryColorList=null,O.prototype.secondaryColorList=null,O.prototype.accentColorList=null,O.prototype.customJsCode="",O.prototype.initializationSettingsJson="",O.prototype.publisherName="",O.prototype.adSkippability=0,O.prototype.skipAdAfter=5,O.prototype.adBreaks=a.emptyArray,O.prototype.amazonTamSlotId="",O.prototype.limitClientSideApiUse=!1,O.prototype.abTestId="",O.prototype.adsMustBeSkippableIfLongerThan=31,O.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoPlayspace;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.playerId=e.string();break;case 2:s.playbackMode=e.int32();break;case 3:s.soundMode=e.int32();break;case 4:s.endOfCycleMode=e.int32();break;case 5:s.containerSelector=e.string();break;case 6:s.position=e.int32();break;case 7:s.insertPosition=e.int32();break;case 8:s.forceInsertPath=e.bool();break;case 9:s.renderInFrame=e.bool();break;case 10:s.scrollHijackingProtection=e.bool();break;case 11:s.preRollBreak=e.int32();break;case 12:s.postRollBreak=e.int32();break;case 13:s.midRollNumber=e.int32();break;case 14:s.slidesBetweenAds=e.int32();break;case 15:s.minSlidesBeforeFirstAd=e.int32();break;case 16:s.adViewabilityPolicy=e.int32();break;case 18:s.casting=e.bool();break;case 19:if(s.sharingDestinations&&s.sharingDestinations.length||(s.sharingDestinations=[]),2==(7&r))for(var n=e.uint32()+e.pos;e.pos<n;)s.sharingDestinations.push(e.int32());else s.sharingDestinations.push(e.int32());break;case 20:s.expandButton=e.bool();break;case 21:s.closeButtonMode=e.int32();break;case 22:s.floatingMode=e.int32();break;case 23:if(s.floatingDeviceMode&&s.floatingDeviceMode.length||(s.floatingDeviceMode=[]),2==(7&r))for(n=e.uint32()+e.pos;e.pos<n;)s.floatingDeviceMode.push(e.int32());else s.floatingDeviceMode.push(e.int32());break;case 24:s.floatingCloseButtonMode=e.int32();break;case 25:s.floatingFixedPosition=e.int32();break;case 26:s.floatingPageElement=e.string();break;case 27:s.floatingUseElementWidth=e.bool();break;case 28:s.floatingScrollPosition=e.int32();break;case 29:s.floatingGutterX=e.int32();break;case 30:s.floatingGutterY=e.int32();break;case 31:s.floatingWidth=e.int32();break;case 35:s.html=e.string();break;case 36:s.logoUrl=e.string();break;case 37:s.lineItems&&s.lineItems.length||(s.lineItems=[]),s.lineItems.push(l.ProtoLineItem.decode(e,e.uint32()));break;case 38:s.adPlaybackMode=e.int32();break;case 39:s.css=e.string();break;case 40:s.sessionId=e.string();break;case 41:s.orientation=e.int32();break;case 42:s.orientationBreakpoint=e.int32();break;case 43:s.activeVersion=e.string();break;case 44:s.storyId=e.string();break;case 50:s.floatingAppendLocation=e.int32();break;case 51:s.floatingYAxisPadding=e.int32();break;case 57:s.contentTitleTextColor=e.string();break;case 58:s.useAccentColorForProgressBar=e.bool();break;case 59:s.primaryColorList=l.ProtoPlayspaceColorPrimary.decode(e,e.uint32());break;case 60:s.secondaryColorList=l.ProtoPlayspaceColorSecondary.decode(e,e.uint32());break;case 61:s.accentColorList=l.ProtoPlayspaceColorAccent.decode(e,e.uint32());break;case 62:s.customJsCode=e.string();break;case 63:s.initializationSettingsJson=e.string();break;case 64:s.publisherName=e.string();break;case 65:s.adSkippability=e.int32();break;case 66:s.skipAdAfter=e.int32();break;case 67:s.adBreaks&&s.adBreaks.length||(s.adBreaks=[]),s.adBreaks.push(l.ProtoAdBreak.decode(e,e.uint32()));break;case 68:s.amazonTamSlotId=e.string();break;case 69:s.limitClientSideApiUse=e.bool();break;case 70:s.abTestId=e.string();break;case 71:s.adsMustBeSkippableIfLongerThan=e.int32();break;default:e.skipType(7&r)}}return s},O.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.sharingDestinations=[],i.floatingDeviceMode=[],i.lineItems=[],i.adBreaks=[]),t.defaults&&(i.playerId="",i.playbackMode=t.enums===String?"Autoplay":0,i.soundMode=t.enums===String?"Mute":0,i.endOfCycleMode=t.enums===String?"Loop":0,i.containerSelector="",i.position=0,i.insertPosition=t.enums===String?"WithinContainer":0,i.forceInsertPath=!1,i.renderInFrame=!1,i.scrollHijackingProtection=!1,i.preRollBreak=0,i.postRollBreak=0,i.midRollNumber=-1,i.slidesBetweenAds=0,i.minSlidesBeforeFirstAd=0,i.adViewabilityPolicy=t.enums===String?"Default":0,i.casting=!1,i.expandButton=!1,i.closeButtonMode=t.enums===String?"Off":0,i.floatingMode=t.enums===String?"Off":0,i.floatingCloseButtonMode=t.enums===String?"Off":0,i.floatingFixedPosition=t.enums===String?"Page":0,i.floatingPageElement="",i.floatingUseElementWidth=!1,i.floatingScrollPosition=t.enums===String?"BottomRight":0,i.floatingGutterX=0,i.floatingGutterY=0,i.floatingWidth=0,i.html="",i.logoUrl="",i.adPlaybackMode=t.enums===String?"Autoplay":0,i.css="",i.sessionId="",i.orientation=t.enums===String?"Mixed":0,i.orientationBreakpoint=0,i.activeVersion="",i.storyId="",i.floatingAppendLocation=t.enums===String?"Above":0,i.floatingYAxisPadding=0,i.contentTitleTextColor="",i.useAccentColorForProgressBar=!1,i.primaryColorList=null,i.secondaryColorList=null,i.accentColorList=null,i.customJsCode="",i.initializationSettingsJson="",i.publisherName="",i.adSkippability=t.enums===String?"IfLongerThan":0,i.skipAdAfter=5,i.amazonTamSlotId="",i.limitClientSideApiUse=!1,i.abTestId="",i.adsMustBeSkippableIfLongerThan=31),null!=e.playerId&&e.hasOwnProperty("playerId")&&(i.playerId=e.playerId),null!=e.playbackMode&&e.hasOwnProperty("playbackMode")&&(i.playbackMode=t.enums===String?l.ProtoPlayerPlaybackModeEnum[e.playbackMode]:e.playbackMode),null!=e.soundMode&&e.hasOwnProperty("soundMode")&&(i.soundMode=t.enums===String?l.ProtoPlayerSoundMode[e.soundMode]:e.soundMode),null!=e.endOfCycleMode&&e.hasOwnProperty("endOfCycleMode")&&(i.endOfCycleMode=t.enums===String?l.ProtoEndOfSlideCycleMode[e.endOfCycleMode]:e.endOfCycleMode),null!=e.containerSelector&&e.hasOwnProperty("containerSelector")&&(i.containerSelector=e.containerSelector),null!=e.position&&e.hasOwnProperty("position")&&(i.position=e.position),null!=e.insertPosition&&e.hasOwnProperty("insertPosition")&&(i.insertPosition=t.enums===String?l.ProtoPlayerInsertMode[e.insertPosition]:e.insertPosition),null!=e.forceInsertPath&&e.hasOwnProperty("forceInsertPath")&&(i.forceInsertPath=e.forceInsertPath),null!=e.renderInFrame&&e.hasOwnProperty("renderInFrame")&&(i.renderInFrame=e.renderInFrame),null!=e.scrollHijackingProtection&&e.hasOwnProperty("scrollHijackingProtection")&&(i.scrollHijackingProtection=e.scrollHijackingProtection),null!=e.preRollBreak&&e.hasOwnProperty("preRollBreak")&&(i.preRollBreak=e.preRollBreak),null!=e.postRollBreak&&e.hasOwnProperty("postRollBreak")&&(i.postRollBreak=e.postRollBreak),null!=e.midRollNumber&&e.hasOwnProperty("midRollNumber")&&(i.midRollNumber=e.midRollNumber),null!=e.slidesBetweenAds&&e.hasOwnProperty("slidesBetweenAds")&&(i.slidesBetweenAds=e.slidesBetweenAds),null!=e.minSlidesBeforeFirstAd&&e.hasOwnProperty("minSlidesBeforeFirstAd")&&(i.minSlidesBeforeFirstAd=e.minSlidesBeforeFirstAd),null!=e.adViewabilityPolicy&&e.hasOwnProperty("adViewabilityPolicy")&&(i.adViewabilityPolicy=t.enums===String?l.ProtoAdViewabilityPolicy[e.adViewabilityPolicy]:e.adViewabilityPolicy),null!=e.casting&&e.hasOwnProperty("casting")&&(i.casting=e.casting),e.sharingDestinations&&e.sharingDestinations.length){i.sharingDestinations=[];for(var s=0;s<e.sharingDestinations.length;++s)i.sharingDestinations[s]=t.enums===String?l.ProtoSharingDestination[e.sharingDestinations[s]]:e.sharingDestinations[s]}if(null!=e.expandButton&&e.hasOwnProperty("expandButton")&&(i.expandButton=e.expandButton),null!=e.closeButtonMode&&e.hasOwnProperty("closeButtonMode")&&(i.closeButtonMode=t.enums===String?l.ProtoPlayerCloseButtonMode[e.closeButtonMode]:e.closeButtonMode),null!=e.floatingMode&&e.hasOwnProperty("floatingMode")&&(i.floatingMode=t.enums===String?l.ProtoPlayerFloatingMode[e.floatingMode]:e.floatingMode),e.floatingDeviceMode&&e.floatingDeviceMode.length)for(i.floatingDeviceMode=[],s=0;s<e.floatingDeviceMode.length;++s)i.floatingDeviceMode[s]=t.enums===String?l.ProtoDeviceType[e.floatingDeviceMode[s]]:e.floatingDeviceMode[s];if(null!=e.floatingCloseButtonMode&&e.hasOwnProperty("floatingCloseButtonMode")&&(i.floatingCloseButtonMode=t.enums===String?l.ProtoPlayerCloseButtonMode[e.floatingCloseButtonMode]:e.floatingCloseButtonMode),null!=e.floatingFixedPosition&&e.hasOwnProperty("floatingFixedPosition")&&(i.floatingFixedPosition=t.enums===String?l.ProtoFloatingFixedPositionMode[e.floatingFixedPosition]:e.floatingFixedPosition),null!=e.floatingPageElement&&e.hasOwnProperty("floatingPageElement")&&(i.floatingPageElement=e.floatingPageElement),null!=e.floatingUseElementWidth&&e.hasOwnProperty("floatingUseElementWidth")&&(i.floatingUseElementWidth=e.floatingUseElementWidth),null!=e.floatingScrollPosition&&e.hasOwnProperty("floatingScrollPosition")&&(i.floatingScrollPosition=t.enums===String?l.ProtoPositionMode[e.floatingScrollPosition]:e.floatingScrollPosition),null!=e.floatingGutterX&&e.hasOwnProperty("floatingGutterX")&&(i.floatingGutterX=e.floatingGutterX),null!=e.floatingGutterY&&e.hasOwnProperty("floatingGutterY")&&(i.floatingGutterY=e.floatingGutterY),null!=e.floatingWidth&&e.hasOwnProperty("floatingWidth")&&(i.floatingWidth=e.floatingWidth),null!=e.html&&e.hasOwnProperty("html")&&(i.html=e.html),null!=e.logoUrl&&e.hasOwnProperty("logoUrl")&&(i.logoUrl=e.logoUrl),e.lineItems&&e.lineItems.length)for(i.lineItems=[],s=0;s<e.lineItems.length;++s)i.lineItems[s]=l.ProtoLineItem.toObject(e.lineItems[s],t);if(null!=e.adPlaybackMode&&e.hasOwnProperty("adPlaybackMode")&&(i.adPlaybackMode=t.enums===String?l.ProtoAdPlaybackMode[e.adPlaybackMode]:e.adPlaybackMode),null!=e.css&&e.hasOwnProperty("css")&&(i.css=e.css),null!=e.sessionId&&e.hasOwnProperty("sessionId")&&(i.sessionId=e.sessionId),null!=e.orientation&&e.hasOwnProperty("orientation")&&(i.orientation=t.enums===String?l.ProtoPlayerOrientationEnum[e.orientation]:e.orientation),null!=e.orientationBreakpoint&&e.hasOwnProperty("orientationBreakpoint")&&(i.orientationBreakpoint=e.orientationBreakpoint),null!=e.activeVersion&&e.hasOwnProperty("activeVersion")&&(i.activeVersion=e.activeVersion),null!=e.storyId&&e.hasOwnProperty("storyId")&&(i.storyId=e.storyId),null!=e.floatingAppendLocation&&e.hasOwnProperty("floatingAppendLocation")&&(i.floatingAppendLocation=t.enums===String?l.ProtoFloatingAppendLocationEnum[e.floatingAppendLocation]:e.floatingAppendLocation),null!=e.floatingYAxisPadding&&e.hasOwnProperty("floatingYAxisPadding")&&(i.floatingYAxisPadding=e.floatingYAxisPadding),null!=e.contentTitleTextColor&&e.hasOwnProperty("contentTitleTextColor")&&(i.contentTitleTextColor=e.contentTitleTextColor),null!=e.useAccentColorForProgressBar&&e.hasOwnProperty("useAccentColorForProgressBar")&&(i.useAccentColorForProgressBar=e.useAccentColorForProgressBar),null!=e.primaryColorList&&e.hasOwnProperty("primaryColorList")&&(i.primaryColorList=l.ProtoPlayspaceColorPrimary.toObject(e.primaryColorList,t)),null!=e.secondaryColorList&&e.hasOwnProperty("secondaryColorList")&&(i.secondaryColorList=l.ProtoPlayspaceColorSecondary.toObject(e.secondaryColorList,t)),null!=e.accentColorList&&e.hasOwnProperty("accentColorList")&&(i.accentColorList=l.ProtoPlayspaceColorAccent.toObject(e.accentColorList,t)),null!=e.customJsCode&&e.hasOwnProperty("customJsCode")&&(i.customJsCode=e.customJsCode),null!=e.initializationSettingsJson&&e.hasOwnProperty("initializationSettingsJson")&&(i.initializationSettingsJson=e.initializationSettingsJson),null!=e.publisherName&&e.hasOwnProperty("publisherName")&&(i.publisherName=e.publisherName),null!=e.adSkippability&&e.hasOwnProperty("adSkippability")&&(i.adSkippability=t.enums===String?l.ProtoPlayerAdSkippability[e.adSkippability]:e.adSkippability),null!=e.skipAdAfter&&e.hasOwnProperty("skipAdAfter")&&(i.skipAdAfter=e.skipAdAfter),e.adBreaks&&e.adBreaks.length)for(i.adBreaks=[],s=0;s<e.adBreaks.length;++s)i.adBreaks[s]=l.ProtoAdBreak.toObject(e.adBreaks[s],t);return null!=e.amazonTamSlotId&&e.hasOwnProperty("amazonTamSlotId")&&(i.amazonTamSlotId=e.amazonTamSlotId),null!=e.limitClientSideApiUse&&e.hasOwnProperty("limitClientSideApiUse")&&(i.limitClientSideApiUse=e.limitClientSideApiUse),null!=e.abTestId&&e.hasOwnProperty("abTestId")&&(i.abTestId=e.abTestId),null!=e.adsMustBeSkippableIfLongerThan&&e.hasOwnProperty("adsMustBeSkippableIfLongerThan")&&(i.adsMustBeSkippableIfLongerThan=e.adsMustBeSkippableIfLongerThan),i},O),l.ProtoPlayspaceResponse=(A.prototype.errorMessage="",A.prototype.players=a.emptyArray,A.prototype.browser=null,A.prototype.geoLocation=null,A.prototype.lineItems=a.emptyArray,A.prototype.cookieSyncUrls=a.emptyObject,A.prototype.explorationMode=!1,A.prototype.supplyChain=null,A.prototype.secondLevelDomain="",A.prototype.userInformation=null,A.prototype.serverAb0=0,A.prototype.serverAb1=0,A.prototype.isSeoTraffic=!1,A.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i,s=void 0===t?e.len:e.pos+t,r=new l.ProtoPlayspaceResponse;e.pos<s;){var n=e.uint32();switch(n>>>3){case 1:r.errorMessage=e.string();break;case 10:r.players&&r.players.length||(r.players=[]),r.players.push(l.ProtoPlayspace.decode(e,e.uint32()));break;case 11:r.browser=l.Browser.decode(e,e.uint32());break;case 12:r.geoLocation=l.GeoLocation.decode(e,e.uint32());break;case 13:r.lineItems&&r.lineItems.length||(r.lineItems=[]),r.lineItems.push(l.ProtoLineItem.decode(e,e.uint32()));break;case 14:e.skip().pos++,r.cookieSyncUrls===a.emptyObject&&(r.cookieSyncUrls={}),i=e.int32(),e.pos++,r.cookieSyncUrls[i]=e.string();break;case 15:r.explorationMode=e.bool();break;case 17:r.supplyChain=l.ProtoSupplyChain.decode(e,e.uint32());break;case 18:r.secondLevelDomain=e.string();break;case 20:r.userInformation=l.ProtoUserInformation.decode(e,e.uint32());break;case 21:r.serverAb0=e.int32();break;case 22:r.serverAb1=e.int32();break;case 23:r.isSeoTraffic=e.bool();break;default:e.skipType(7&n)}}return r},A.toObject=function(e,t){var i,s={};if(((t=t||{}).arrays||t.defaults)&&(s.players=[],s.lineItems=[]),(t.objects||t.defaults)&&(s.cookieSyncUrls={}),t.defaults&&(s.errorMessage="",s.browser=null,s.geoLocation=null,s.explorationMode=!1,s.supplyChain=null,s.secondLevelDomain="",s.userInformation=null,s.serverAb0=0,s.serverAb1=0,s.isSeoTraffic=!1),null!=e.errorMessage&&e.hasOwnProperty("errorMessage")&&(s.errorMessage=e.errorMessage),e.players&&e.players.length){s.players=[];for(var r=0;r<e.players.length;++r)s.players[r]=l.ProtoPlayspace.toObject(e.players[r],t)}if(null!=e.browser&&e.hasOwnProperty("browser")&&(s.browser=l.Browser.toObject(e.browser,t)),null!=e.geoLocation&&e.hasOwnProperty("geoLocation")&&(s.geoLocation=l.GeoLocation.toObject(e.geoLocation,t)),e.lineItems&&e.lineItems.length)for(s.lineItems=[],r=0;r<e.lineItems.length;++r)s.lineItems[r]=l.ProtoLineItem.toObject(e.lineItems[r],t);if(e.cookieSyncUrls&&(i=Object.keys(e.cookieSyncUrls)).length)for(s.cookieSyncUrls={},r=0;r<i.length;++r)s.cookieSyncUrls[i[r]]=e.cookieSyncUrls[i[r]];return null!=e.explorationMode&&e.hasOwnProperty("explorationMode")&&(s.explorationMode=e.explorationMode),null!=e.supplyChain&&e.hasOwnProperty("supplyChain")&&(s.supplyChain=l.ProtoSupplyChain.toObject(e.supplyChain,t)),null!=e.secondLevelDomain&&e.hasOwnProperty("secondLevelDomain")&&(s.secondLevelDomain=e.secondLevelDomain),null!=e.userInformation&&e.hasOwnProperty("userInformation")&&(s.userInformation=l.ProtoUserInformation.toObject(e.userInformation,t)),null!=e.serverAb0&&e.hasOwnProperty("serverAb0")&&(s.serverAb0=e.serverAb0),null!=e.serverAb1&&e.hasOwnProperty("serverAb1")&&(s.serverAb1=e.serverAb1),null!=e.isSeoTraffic&&e.hasOwnProperty("isSeoTraffic")&&(s.isSeoTraffic=e.isSeoTraffic),s},A),l.ProtoDeviceType=(s={},(i=Object.create(s))[s[0]="Desktop"]=0,i[s[1]="Smartphone"]=1,i[s[2]="Tablet"]=2,i[s[3]="GameConsole"]=3,i[s[4]="SmartTV"]=4,i[s[5]="WearableComputer"]=5,i[s[6]="PDA"]=6,i[s[7]="Unrecognized"]=7,i),l.Browser=(T.prototype.browserVersion="",T.prototype.browserType="",T.prototype.osCode="",T.prototype.device=0,T.encode=function(e,t){return t=t||n.create(),null!=e.browserVersion&&e.hasOwnProperty("browserVersion")&&t.uint32(10).string(e.browserVersion),null!=e.browserType&&e.hasOwnProperty("browserType")&&t.uint32(18).string(e.browserType),null!=e.osCode&&e.hasOwnProperty("osCode")&&t.uint32(26).string(e.osCode),null!=e.device&&e.hasOwnProperty("device")&&t.uint32(32).int32(e.device),t},T.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.Browser;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.browserVersion=e.string();break;case 2:s.browserType=e.string();break;case 3:s.osCode=e.string();break;case 4:s.device=e.int32();break;default:e.skipType(7&r)}}return s},T.fromObject=function(e){if(e instanceof l.Browser)return e;var t=new l.Browser;switch(null!=e.browserVersion&&(t.browserVersion=String(e.browserVersion)),null!=e.browserType&&(t.browserType=String(e.browserType)),null!=e.osCode&&(t.osCode=String(e.osCode)),e.device){case"Desktop":case 0:t.device=0;break;case"Smartphone":case 1:t.device=1;break;case"Tablet":case 2:t.device=2;break;case"GameConsole":case 3:t.device=3;break;case"SmartTV":case 4:t.device=4;break;case"WearableComputer":case 5:t.device=5;break;case"PDA":case 6:t.device=6;break;case"Unrecognized":case 7:t.device=7}return t},T.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.browserVersion="",i.browserType="",i.osCode="",i.device=t.enums===String?"Desktop":0),null!=e.browserVersion&&e.hasOwnProperty("browserVersion")&&(i.browserVersion=e.browserVersion),null!=e.browserType&&e.hasOwnProperty("browserType")&&(i.browserType=e.browserType),null!=e.osCode&&e.hasOwnProperty("osCode")&&(i.osCode=e.osCode),null!=e.device&&e.hasOwnProperty("device")&&(i.device=t.enums===String?l.ProtoDeviceType[e.device]:e.device),i},T.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},T),l.GeoLocation=(I.prototype.countryGeoId=0,I.prototype.cityId=0,I.prototype.subdivisionId=0,I.prototype.dmaId=0,I.prototype.ip="",I.prototype.lat=0,I.prototype.lon=0,I.encode=function(e,t){return t=t||n.create(),null!=e.countryGeoId&&e.hasOwnProperty("countryGeoId")&&t.uint32(8).int32(e.countryGeoId),null!=e.cityId&&e.hasOwnProperty("cityId")&&t.uint32(16).int32(e.cityId),null!=e.subdivisionId&&e.hasOwnProperty("subdivisionId")&&t.uint32(24).int32(e.subdivisionId),null!=e.dmaId&&e.hasOwnProperty("dmaId")&&t.uint32(32).int32(e.dmaId),null!=e.ip&&e.hasOwnProperty("ip")&&t.uint32(42).string(e.ip),null!=e.lat&&e.hasOwnProperty("lat")&&t.uint32(49).double(e.lat),null!=e.lon&&e.hasOwnProperty("lon")&&t.uint32(57).double(e.lon),t},I.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.GeoLocation;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.countryGeoId=e.int32();break;case 2:s.cityId=e.int32();break;case 3:s.subdivisionId=e.int32();break;case 4:s.dmaId=e.int32();break;case 5:s.ip=e.string();break;case 6:s.lat=e.double();break;case 7:s.lon=e.double();break;default:e.skipType(7&r)}}return s},I.fromObject=function(e){if(e instanceof l.GeoLocation)return e;var t=new l.GeoLocation;return null!=e.countryGeoId&&(t.countryGeoId=0|e.countryGeoId),null!=e.cityId&&(t.cityId=0|e.cityId),null!=e.subdivisionId&&(t.subdivisionId=0|e.subdivisionId),null!=e.dmaId&&(t.dmaId=0|e.dmaId),null!=e.ip&&(t.ip=String(e.ip)),null!=e.lat&&(t.lat=Number(e.lat)),null!=e.lon&&(t.lon=Number(e.lon)),t},I.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.countryGeoId=0,i.cityId=0,i.subdivisionId=0,i.dmaId=0,i.ip="",i.lat=0,i.lon=0),null!=e.countryGeoId&&e.hasOwnProperty("countryGeoId")&&(i.countryGeoId=e.countryGeoId),null!=e.cityId&&e.hasOwnProperty("cityId")&&(i.cityId=e.cityId),null!=e.subdivisionId&&e.hasOwnProperty("subdivisionId")&&(i.subdivisionId=e.subdivisionId),null!=e.dmaId&&e.hasOwnProperty("dmaId")&&(i.dmaId=e.dmaId),null!=e.ip&&e.hasOwnProperty("ip")&&(i.ip=e.ip),null!=e.lat&&e.hasOwnProperty("lat")&&(i.lat=t.json&&!isFinite(e.lat)?String(e.lat):e.lat),null!=e.lon&&e.hasOwnProperty("lon")&&(i.lon=t.json&&!isFinite(e.lon)?String(e.lon):e.lon),i},I.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},I),l.ProtoTrackerType=(s={},(i=Object.create(s))[s[0]="Image"]=0,i[s[1]="Javascript"]=1,i),l.ProtoTrackerTriggerType=(s={},(i=Object.create(s))[s[0]="Impression"]=0,i[s[1]="Complete25Pc"]=1,i[s[2]="Complete50Pc"]=2,i[s[3]="Complete75Pc"]=3,i[s[4]="ViewCompletion"]=4,i[s[5]="VideoClick"]=5,i[s[6]="Pause"]=6,i[s[7]="Resume"]=7,i[s[8]="Mute"]=8,i[s[9]="Unmute"]=9,i),l.CreativeTrackerViewModel=(S.prototype.type=0,S.prototype.trigger=0,S.prototype.url="",S.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.CreativeTrackerViewModel;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.type=e.int32();break;case 2:s.trigger=e.int32();break;case 3:s.url=e.string();break;default:e.skipType(7&r)}}return s},S.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.type=t.enums===String?"Image":0,i.trigger=t.enums===String?"Impression":0,i.url=""),null!=e.type&&e.hasOwnProperty("type")&&(i.type=t.enums===String?l.ProtoTrackerType[e.type]:e.type),null!=e.trigger&&e.hasOwnProperty("trigger")&&(i.trigger=t.enums===String?l.ProtoTrackerTriggerType[e.trigger]:e.trigger),null!=e.url&&e.hasOwnProperty("url")&&(i.url=e.url),i},S),l.ProtoCreativeTypeEnum=(s={},(i=Object.create(s))[s[0]="ThirdParty"]=0,i[s[1]="MediaFile"]=1,i[s[2]="Rtb"]=2,i[s[3]="External"]=3,i[s[4]="HeaderBidder"]=4,i[s[7]="Tam"]=7,i[s[8]="TamDeal"]=8,i),l.ProtoResetCapTypeEnum=(s={},(i=Object.create(s))[s[0]="TimeCapping"]=0,i[s[1]="ContentCapping"]=1,i[s[2]="OpportunityCapping"]=2,i),l.ProtoAdSlotsEnum=(s={},(i=Object.create(s))[s[0]="PreRoll"]=0,i[s[1]="MidRoll"]=1,i[s[2]="PostRoll"]=2,i),l.ProtoLineItemPriority=(s={},(i=Object.create(s))[s[0]="House"]=0,i[s[1]="Default"]=1,i[s[2]="Preferred"]=2,i[s[3]="Top"]=3,i),l.ProtoAdSkipMode=(s={},(i=Object.create(s))[s[0]="IfLongerThan31Sec"]=0,i[s[1]="Always"]=1,i[s[2]="Never"]=2,i[s[3]="NotAplicable"]=3,i),l.ProtoAdType=(s={},(i=Object.create(s))[s[0]="Video"]=0,i[s[1]="Overlay"]=1,i),l.ProtoChoiceCriteriaEnum=(s={},(i=Object.create(s))[s[0]="Only"]=0,i[s[1]="Except"]=1,i),l.ProtoLineItemAdBreakTypeEnum=(s={},(i=Object.create(s))[s[1]="All"]=1,i[s[2]="SingleAd"]=2,i[s[3]="AdPod"]=3,i),l.ProtoLineItemTargetingTypeEnum=(s={},(i=Object.create(s))[s[0]="Only"]=0,i[s[1]="Except"]=1,i),l.ProtoLineItemAdSlotTargetingTypeEnum=(s={},(i=Object.create(s))[s[1]="SpecificSlots"]=1,i[s[2]="Interval"]=2,i),l.ProtoLineItemPauseAdOutOfViewEnum=(s={},(i=Object.create(s))[s[0]="Default"]=0,i[s[1]="Strict"]=1,i),l.ProtoLineItemContextualTargetingEnum=(s={},(i=Object.create(s))[s[0]="IncludeAny"]=0,i[s[1]="IncludeAll"]=1,i[s[2]="ExcludeAny"]=2,i[s[3]="ExcludeAll"]=3,i),l.ProtoSizeChoiceCriteriaEnum=(s={},(i=Object.create(s))[s[0]="GreaterThan"]=0,i[s[1]="SmallerThan"]=1,i[s[2]="Between"]=2,i),l.ProtoLineItemAdBreakTargeting=(P.prototype.adRollType=0,P.prototype.adBreakTypeEnum=1,P.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoLineItemAdBreakTargeting;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.adRollType=e.int32();break;case 2:s.adBreakTypeEnum=e.int32();break;default:e.skipType(7&r)}}return s},P.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.adRollType=t.enums===String?"None":0,i.adBreakTypeEnum=t.enums===String?"All":1),null!=e.adRollType&&e.hasOwnProperty("adRollType")&&(i.adRollType=t.enums===String?l.ProtoAdBreakTypeEnum[e.adRollType]:e.adRollType),null!=e.adBreakTypeEnum&&e.hasOwnProperty("adBreakTypeEnum")&&(i.adBreakTypeEnum=t.enums===String?l.ProtoLineItemAdBreakTypeEnum[e.adBreakTypeEnum]:e.adBreakTypeEnum),i},P),l.ProtoLineItemAdPodTargeting=(v.prototype.targetingType=0,v.prototype.adSlotTargetingType=1,v.prototype.adSlotPositions=a.emptyArray,v.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoLineItemAdPodTargeting;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.targetingType=e.int32();break;case 2:s.adSlotTargetingType=e.int32();break;case 3:if(s.adSlotPositions&&s.adSlotPositions.length||(s.adSlotPositions=[]),2==(7&r))for(var n=e.uint32()+e.pos;e.pos<n;)s.adSlotPositions.push(e.int32());else s.adSlotPositions.push(e.int32());break;default:e.skipType(7&r)}}return s},v.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.adSlotPositions=[]),t.defaults&&(i.targetingType=t.enums===String?"Only":0,i.adSlotTargetingType=t.enums===String?"SpecificSlots":1),null!=e.targetingType&&e.hasOwnProperty("targetingType")&&(i.targetingType=t.enums===String?l.ProtoLineItemTargetingTypeEnum[e.targetingType]:e.targetingType),null!=e.adSlotTargetingType&&e.hasOwnProperty("adSlotTargetingType")&&(i.adSlotTargetingType=t.enums===String?l.ProtoLineItemAdSlotTargetingTypeEnum[e.adSlotTargetingType]:e.adSlotTargetingType),e.adSlotPositions&&e.adSlotPositions.length){i.adSlotPositions=[];for(var s=0;s<e.adSlotPositions.length;++s)i.adSlotPositions[s]=e.adSlotPositions[s]}return i},v),l.ProtoLineItemAdBreakSettings=(b.prototype.adBreakTargeting=a.emptyArray,b.prototype.adPodTargeting=null,b.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoLineItemAdBreakSettings;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.adBreakTargeting&&s.adBreakTargeting.length||(s.adBreakTargeting=[]),s.adBreakTargeting.push(l.ProtoLineItemAdBreakTargeting.decode(e,e.uint32()));break;case 2:s.adPodTargeting=l.ProtoLineItemAdPodTargeting.decode(e,e.uint32());break;default:e.skipType(7&r)}}return s},b.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.adBreakTargeting=[]),t.defaults&&(i.adPodTargeting=null),e.adBreakTargeting&&e.adBreakTargeting.length){i.adBreakTargeting=[];for(var s=0;s<e.adBreakTargeting.length;++s)i.adBreakTargeting[s]=l.ProtoLineItemAdBreakTargeting.toObject(e.adBreakTargeting[s],t)}return null!=e.adPodTargeting&&e.hasOwnProperty("adPodTargeting")&&(i.adPodTargeting=l.ProtoLineItemAdPodTargeting.toObject(e.adPodTargeting,t)),i},b),l.ProtoLineItem=(y.prototype.publisherLineItemId="",y.prototype.advertiserLineItemId="",y.prototype.adTag="",y.prototype.creativeType=0,y.prototype.sound=!1,y.prototype.viewability=!1,y.prototype.impressionTimeSpent=0,y.prototype.vendorId="",y.prototype.trackers=a.emptyArray,y.prototype.duration=0,y.prototype.renditions=a.emptyArray,y.prototype.mediaCreativeId="",y.prototype.ignoreFilledRequests=!1,y.prototype.requestCap=3,y.prototype.impressionCap=0,y.prototype.successRate=0,y.prototype.lineItemPriority=0,y.prototype.headerBidderBids="",y.prototype.headerBidderTimeout=0,y.prototype.mediaCreativeClickUrl="",y.prototype.resetRequestsCapTime=60,y.prototype.resetImpressionsCapTime=60,y.prototype.resetCapType=0,y.prototype.creativeHlsFileName="",y.prototype.timeBetweenRequests=0,y.prototype.skipMode=0,y.prototype.mediaIdTargeting=null,y.prototype.mediaKeywordsTargeting=null,y.prototype.mediaLanguageTargeting=null,y.prototype.adType=0,y.prototype.overlayTime=30,y.prototype.floorPrice=0,y.prototype.adBreakSettings=null,y.prototype.floorPrices=a.emptyArray,y.prototype.bidRate=0,y.prototype.pauseAdOutOfView=0,y.prototype.moatTrackingEnabled=!1,y.prototype.cnxCreativeId="",y.prototype.blockedDomainsRevisionNumber=0,y.prototype.advertiserContextualTargeting=a.emptyArray,y.prototype.publisherContextualTargeting=a.emptyArray,y.prototype.amazonDealId="",y.prototype.playerSizeTargetings=null,y.prototype.playerSize="",y.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoLineItem;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.publisherLineItemId=e.string();break;case 2:s.advertiserLineItemId=e.string();break;case 3:s.adTag=e.string();break;case 4:s.creativeType=e.int32();break;case 6:s.sound=e.bool();break;case 7:s.viewability=e.bool();break;case 9:s.impressionTimeSpent=e.int32();break;case 10:s.vendorId=e.string();break;case 12:s.trackers&&s.trackers.length||(s.trackers=[]),s.trackers.push(l.CreativeTrackerViewModel.decode(e,e.uint32()));break;case 13:s.duration=e.int32();break;case 14:s.renditions&&s.renditions.length||(s.renditions=[]),s.renditions.push(l.ProtoRendition.decode(e,e.uint32()));break;case 15:s.mediaCreativeId=e.string();break;case 16:s.ignoreFilledRequests=e.bool();break;case 17:s.requestCap=e.int32();break;case 18:s.impressionCap=e.int32();break;case 19:s.successRate=e.double();break;case 20:s.lineItemPriority=e.int32();break;case 21:s.headerBidderBids=e.string();break;case 22:s.headerBidderTimeout=e.int32();break;case 23:s.mediaCreativeClickUrl=e.string();break;case 24:s.resetRequestsCapTime=e.int32();break;case 25:s.resetImpressionsCapTime=e.int32();break;case 26:s.resetCapType=e.int32();break;case 27:s.creativeHlsFileName=e.string();break;case 28:s.timeBetweenRequests=e.int32();break;case 29:s.skipMode=e.int32();break;case 30:s.mediaIdTargeting=l.ProtoTargetingChoiceModel.decode(e,e.uint32());break;case 31:s.mediaKeywordsTargeting=l.ProtoTargetingChoiceModel.decode(e,e.uint32());break;case 32:s.mediaLanguageTargeting=l.ProtoTargetingChoiceModel.decode(e,e.uint32());break;case 33:s.adType=e.int32();break;case 34:s.overlayTime=e.int32();break;case 35:s.floorPrice=e.double();break;case 36:s.adBreakSettings=l.ProtoLineItemAdBreakSettings.decode(e,e.uint32());break;case 38:if(s.floorPrices&&s.floorPrices.length||(s.floorPrices=[]),2==(7&r))for(var n=e.uint32()+e.pos;e.pos<n;)s.floorPrices.push(e.double());else s.floorPrices.push(e.double());break;case 39:s.bidRate=e.double();break;case 40:s.pauseAdOutOfView=e.int32();break;case 41:s.moatTrackingEnabled=e.bool();break;case 42:s.cnxCreativeId=e.string();break;case 44:s.blockedDomainsRevisionNumber=e.int32();break;case 45:s.advertiserContextualTargeting&&s.advertiserContextualTargeting.length||(s.advertiserContextualTargeting=[]),s.advertiserContextualTargeting.push(l.ProtoContextualTargetingCaseModel.decode(e,e.uint32()));break;case 46:s.publisherContextualTargeting&&s.publisherContextualTargeting.length||(s.publisherContextualTargeting=[]),s.publisherContextualTargeting.push(l.ProtoContextualTargetingCaseModel.decode(e,e.uint32()));break;case 48:s.amazonDealId=e.string();break;case 47:s.playerSizeTargetings=l.ProtoPlayerSizeTargetings.decode(e,e.uint32());break;case 101:s.playerSize=e.string();break;default:e.skipType(7&r)}}return s},y.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.trackers=[],i.renditions=[],i.floorPrices=[],i.advertiserContextualTargeting=[],i.publisherContextualTargeting=[]),t.defaults&&(i.publisherLineItemId="",i.advertiserLineItemId="",i.adTag="",i.creativeType=t.enums===String?"ThirdParty":0,i.sound=!1,i.viewability=!1,i.impressionTimeSpent=0,i.vendorId="",i.duration=0,i.mediaCreativeId="",i.ignoreFilledRequests=!1,i.requestCap=3,i.impressionCap=0,i.successRate=0,i.lineItemPriority=t.enums===String?"House":0,i.headerBidderBids="",i.headerBidderTimeout=0,i.mediaCreativeClickUrl="",i.resetRequestsCapTime=60,i.resetImpressionsCapTime=60,i.resetCapType=t.enums===String?"TimeCapping":0,i.creativeHlsFileName="",i.timeBetweenRequests=0,i.skipMode=t.enums===String?"IfLongerThan31Sec":0,i.mediaIdTargeting=null,i.mediaKeywordsTargeting=null,i.mediaLanguageTargeting=null,i.adType=t.enums===String?"Video":0,i.overlayTime=30,i.floorPrice=0,i.adBreakSettings=null,i.bidRate=0,i.pauseAdOutOfView=t.enums===String?"Default":0,i.moatTrackingEnabled=!1,i.cnxCreativeId="",i.blockedDomainsRevisionNumber=0,i.playerSizeTargetings=null,i.amazonDealId="",i.playerSize=""),null!=e.publisherLineItemId&&e.hasOwnProperty("publisherLineItemId")&&(i.publisherLineItemId=e.publisherLineItemId),null!=e.advertiserLineItemId&&e.hasOwnProperty("advertiserLineItemId")&&(i.advertiserLineItemId=e.advertiserLineItemId),null!=e.adTag&&e.hasOwnProperty("adTag")&&(i.adTag=e.adTag),null!=e.creativeType&&e.hasOwnProperty("creativeType")&&(i.creativeType=t.enums===String?l.ProtoCreativeTypeEnum[e.creativeType]:e.creativeType),null!=e.sound&&e.hasOwnProperty("sound")&&(i.sound=e.sound),null!=e.viewability&&e.hasOwnProperty("viewability")&&(i.viewability=e.viewability),null!=e.impressionTimeSpent&&e.hasOwnProperty("impressionTimeSpent")&&(i.impressionTimeSpent=e.impressionTimeSpent),null!=e.vendorId&&e.hasOwnProperty("vendorId")&&(i.vendorId=e.vendorId),e.trackers&&e.trackers.length){i.trackers=[];for(var s=0;s<e.trackers.length;++s)i.trackers[s]=l.CreativeTrackerViewModel.toObject(e.trackers[s],t)}if(null!=e.duration&&e.hasOwnProperty("duration")&&(i.duration=e.duration),e.renditions&&e.renditions.length)for(i.renditions=[],s=0;s<e.renditions.length;++s)i.renditions[s]=l.ProtoRendition.toObject(e.renditions[s],t);if(null!=e.mediaCreativeId&&e.hasOwnProperty("mediaCreativeId")&&(i.mediaCreativeId=e.mediaCreativeId),null!=e.ignoreFilledRequests&&e.hasOwnProperty("ignoreFilledRequests")&&(i.ignoreFilledRequests=e.ignoreFilledRequests),null!=e.requestCap&&e.hasOwnProperty("requestCap")&&(i.requestCap=e.requestCap),null!=e.impressionCap&&e.hasOwnProperty("impressionCap")&&(i.impressionCap=e.impressionCap),null!=e.successRate&&e.hasOwnProperty("successRate")&&(i.successRate=t.json&&!isFinite(e.successRate)?String(e.successRate):e.successRate),null!=e.lineItemPriority&&e.hasOwnProperty("lineItemPriority")&&(i.lineItemPriority=t.enums===String?l.ProtoLineItemPriority[e.lineItemPriority]:e.lineItemPriority),null!=e.headerBidderBids&&e.hasOwnProperty("headerBidderBids")&&(i.headerBidderBids=e.headerBidderBids),null!=e.headerBidderTimeout&&e.hasOwnProperty("headerBidderTimeout")&&(i.headerBidderTimeout=e.headerBidderTimeout),null!=e.mediaCreativeClickUrl&&e.hasOwnProperty("mediaCreativeClickUrl")&&(i.mediaCreativeClickUrl=e.mediaCreativeClickUrl),null!=e.resetRequestsCapTime&&e.hasOwnProperty("resetRequestsCapTime")&&(i.resetRequestsCapTime=e.resetRequestsCapTime),null!=e.resetImpressionsCapTime&&e.hasOwnProperty("resetImpressionsCapTime")&&(i.resetImpressionsCapTime=e.resetImpressionsCapTime),null!=e.resetCapType&&e.hasOwnProperty("resetCapType")&&(i.resetCapType=t.enums===String?l.ProtoResetCapTypeEnum[e.resetCapType]:e.resetCapType),null!=e.creativeHlsFileName&&e.hasOwnProperty("creativeHlsFileName")&&(i.creativeHlsFileName=e.creativeHlsFileName),null!=e.timeBetweenRequests&&e.hasOwnProperty("timeBetweenRequests")&&(i.timeBetweenRequests=e.timeBetweenRequests),null!=e.skipMode&&e.hasOwnProperty("skipMode")&&(i.skipMode=t.enums===String?l.ProtoAdSkipMode[e.skipMode]:e.skipMode),null!=e.mediaIdTargeting&&e.hasOwnProperty("mediaIdTargeting")&&(i.mediaIdTargeting=l.ProtoTargetingChoiceModel.toObject(e.mediaIdTargeting,t)),null!=e.mediaKeywordsTargeting&&e.hasOwnProperty("mediaKeywordsTargeting")&&(i.mediaKeywordsTargeting=l.ProtoTargetingChoiceModel.toObject(e.mediaKeywordsTargeting,t)),null!=e.mediaLanguageTargeting&&e.hasOwnProperty("mediaLanguageTargeting")&&(i.mediaLanguageTargeting=l.ProtoTargetingChoiceModel.toObject(e.mediaLanguageTargeting,t)),null!=e.adType&&e.hasOwnProperty("adType")&&(i.adType=t.enums===String?l.ProtoAdType[e.adType]:e.adType),null!=e.overlayTime&&e.hasOwnProperty("overlayTime")&&(i.overlayTime=e.overlayTime),null!=e.floorPrice&&e.hasOwnProperty("floorPrice")&&(i.floorPrice=t.json&&!isFinite(e.floorPrice)?String(e.floorPrice):e.floorPrice),null!=e.adBreakSettings&&e.hasOwnProperty("adBreakSettings")&&(i.adBreakSettings=l.ProtoLineItemAdBreakSettings.toObject(e.adBreakSettings,t)),e.floorPrices&&e.floorPrices.length)for(i.floorPrices=[],s=0;s<e.floorPrices.length;++s)i.floorPrices[s]=t.json&&!isFinite(e.floorPrices[s])?String(e.floorPrices[s]):e.floorPrices[s];if(null!=e.bidRate&&e.hasOwnProperty("bidRate")&&(i.bidRate=t.json&&!isFinite(e.bidRate)?String(e.bidRate):e.bidRate),null!=e.pauseAdOutOfView&&e.hasOwnProperty("pauseAdOutOfView")&&(i.pauseAdOutOfView=t.enums===String?l.ProtoLineItemPauseAdOutOfViewEnum[e.pauseAdOutOfView]:e.pauseAdOutOfView),null!=e.moatTrackingEnabled&&e.hasOwnProperty("moatTrackingEnabled")&&(i.moatTrackingEnabled=e.moatTrackingEnabled),null!=e.cnxCreativeId&&e.hasOwnProperty("cnxCreativeId")&&(i.cnxCreativeId=e.cnxCreativeId),null!=e.blockedDomainsRevisionNumber&&e.hasOwnProperty("blockedDomainsRevisionNumber")&&(i.blockedDomainsRevisionNumber=e.blockedDomainsRevisionNumber),e.advertiserContextualTargeting&&e.advertiserContextualTargeting.length)for(i.advertiserContextualTargeting=[],s=0;s<e.advertiserContextualTargeting.length;++s)i.advertiserContextualTargeting[s]=l.ProtoContextualTargetingCaseModel.toObject(e.advertiserContextualTargeting[s],t);if(e.publisherContextualTargeting&&e.publisherContextualTargeting.length)for(i.publisherContextualTargeting=[],s=0;s<e.publisherContextualTargeting.length;++s)i.publisherContextualTargeting[s]=l.ProtoContextualTargetingCaseModel.toObject(e.publisherContextualTargeting[s],t);return null!=e.playerSizeTargetings&&e.hasOwnProperty("playerSizeTargetings")&&(i.playerSizeTargetings=l.ProtoPlayerSizeTargetings.toObject(e.playerSizeTargetings,t)),null!=e.amazonDealId&&e.hasOwnProperty("amazonDealId")&&(i.amazonDealId=e.amazonDealId),null!=e.playerSize&&e.hasOwnProperty("playerSize")&&(i.playerSize=e.playerSize),i},y),l.ProtoTargetingChoiceModel=(f.prototype.choiceCriteria=0,f.prototype.items=a.emptyArray,f.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoTargetingChoiceModel;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.choiceCriteria=e.int32();break;case 2:s.items&&s.items.length||(s.items=[]),s.items.push(e.string());break;default:e.skipType(7&r)}}return s},f.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.items=[]),t.defaults&&(i.choiceCriteria=t.enums===String?"Only":0),null!=e.choiceCriteria&&e.hasOwnProperty("choiceCriteria")&&(i.choiceCriteria=t.enums===String?l.ProtoChoiceCriteriaEnum[e.choiceCriteria]:e.choiceCriteria),e.items&&e.items.length){i.items=[];for(var s=0;s<e.items.length;++s)i.items[s]=e.items[s]}return i},f),l.ProtoContextualTargetingCaseModel=(m.prototype.filters=a.emptyArray,m.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoContextualTargetingCaseModel;e.pos<i;){var r=e.uint32();r>>>3==1?(s.filters&&s.filters.length||(s.filters=[]),s.filters.push(l.ProtoContextualTargetingFilterModel.decode(e,e.uint32()))):e.skipType(7&r)}return s},m.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.filters=[]),e.filters&&e.filters.length){i.filters=[];for(var s=0;s<e.filters.length;++s)i.filters[s]=l.ProtoContextualTargetingFilterModel.toObject(e.filters[s],t)}return i},m),l.ProtoContextualTargetingFilterModel=(g.prototype.type=0,g.prototype.items=a.emptyArray,g.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoContextualTargetingFilterModel;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.type=e.int32();break;case 2:s.items&&s.items.length||(s.items=[]),s.items.push(e.string());break;default:e.skipType(7&r)}}return s},g.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.items=[]),t.defaults&&(i.type=t.enums===String?"IncludeAny":0),null!=e.type&&e.hasOwnProperty("type")&&(i.type=t.enums===String?l.ProtoLineItemContextualTargetingEnum[e.type]:e.type),e.items&&e.items.length){i.items=[];for(var s=0;s<e.items.length;++s)i.items[s]=e.items[s]}return i},g),l.ProtoPlayerSizeTargetings=(p.prototype.sizeChoiceCriteria=0,p.prototype.minWidth=0,p.prototype.maxWidth=0,p.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoPlayerSizeTargetings;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.sizeChoiceCriteria=e.int32();break;case 2:s.minWidth=e.int32();break;case 3:s.maxWidth=e.int32();break;default:e.skipType(7&r)}}return s},p.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.sizeChoiceCriteria=t.enums===String?"GreaterThan":0,i.minWidth=0,i.maxWidth=0),null!=e.sizeChoiceCriteria&&e.hasOwnProperty("sizeChoiceCriteria")&&(i.sizeChoiceCriteria=t.enums===String?l.ProtoSizeChoiceCriteriaEnum[e.sizeChoiceCriteria]:e.sizeChoiceCriteria),null!=e.minWidth&&e.hasOwnProperty("minWidth")&&(i.minWidth=e.minWidth),null!=e.maxWidth&&e.hasOwnProperty("maxWidth")&&(i.maxWidth=e.maxWidth),i},p),l.ProtoRendition=(u.prototype.height=0,u.prototype.codec="",u.prototype.file="",u.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoRendition;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.height=e.int32();break;case 2:s.codec=e.string();break;case 3:s.file=e.string();break;default:e.skipType(7&r)}}return s},u.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.height=0,i.codec="",i.file=""),null!=e.height&&e.hasOwnProperty("height")&&(i.height=e.height),null!=e.codec&&e.hasOwnProperty("codec")&&(i.codec=e.codec),null!=e.file&&e.hasOwnProperty("file")&&(i.file=e.file),i},u),l.ProtoPlayerPlaybackModeEnum=(s={},(i=Object.create(s))[s[0]="Autoplay"]=0,i[s[1]="ScrollToPlay"]=1,i[s[2]="ClickToPlay"]=2,i),l.ProtoPlayerCloseButtonMode=(s={},(i=Object.create(s))[s[0]="Off"]=0,i[s[1]="OnHover"]=1,i[s[2]="OnHoverAfterFirstAd"]=2,i[s[3]="AlwaysOn"]=3,i),l.ProtoPlayerFloatingMode=(s={},(i=Object.create(s))[s[0]="Off"]=0,i[s[1]="OnPageLoad"]=1,i[s[2]="AfterInView"]=2,i[s[3]="Always"]=3,i),l.ProtoPlayerSoundMode=(s={},(i=Object.create(s))[s[0]="Mute"]=0,i[s[1]="On"]=1,i[s[2]="Hover"]=2,i),l.ProtoPlayerInsertMode=(s={},(i=Object.create(s))[s[0]="WithinContainer"]=0,i[s[1]="BeforeContainer"]=1,i[s[2]="AfterContainer"]=2,i[s[3]="ReplaceContainer"]=3,i[s[4]="HideContainer"]=4,i),l.ProtoAdViewabilityPolicy=(s={},(i=Object.create(s))[s[0]="Default"]=0,i[s[1]="Strict"]=1,i),l.ProtoSharingDestination=(s={},(i=Object.create(s))[s[0]="Facebook"]=0,i[s[1]="Twitter"]=1,i[s[2]="LinkedIn"]=2,i),l.ProtoFloatingFixedPositionMode=(s={},(i=Object.create(s))[s[0]="Page"]=0,i[s[1]="Element"]=1,i),l.ProtoPositionMode=(s={},(i=Object.create(s))[s[0]="BottomRight"]=0,i[s[1]="BottomLeft"]=1,i[s[2]="TopRight"]=2,i[s[3]="TopLeft"]=3,i),l.ProtoAdPlaybackMode=(s={},(i=Object.create(s))[s[0]="Autoplay"]=0,i[s[1]="ScrollToPlay"]=1,i),l.ProtoFloatingAppendLocationEnum=(s={},(i=Object.create(s))[s[0]="Above"]=0,i[s[1]="Below"]=1,i[s[2]="Within"]=2,i),l.ProtoPlayerAdSkippability=(s={},(i=Object.create(s))[s[0]="IfLongerThan"]=0,i[s[1]="Always"]=1,i[s[2]="NoRestrictions"]=2,i),l.ProtoVideoQuality=(s={},(i=Object.create(s))[s[0]="Auto"]=0,i[s[1]="High1080p"]=1,i[s[2]="High720p"]=2,i[s[3]="Medium360p"]=3,i),l.ProtoImplementationType=(s={},(i=Object.create(s))[s[0]="Web"]=0,i[s[1]="Amp"]=1,i),l.ProtoAdBreakTypeEnum=(s={},(i=Object.create(s))[s[0]="None"]=0,i[s[1]="PreRoll"]=1,i[s[2]="MidRoll"]=2,i[s[3]="PostRoll"]=3,i),l.ProtoAdSlotAdTypeEnum=(s={},(i=Object.create(s))[s[0]="SingleAd"]=0,i[s[1]="AdPod"]=1,i),l.ProtoSupplyChain=(h.prototype.businessDomain="",h.prototype.supplyChainId="",h.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoSupplyChain;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.businessDomain=e.string();break;case 3:s.supplyChainId=e.string();break;default:e.skipType(7&r)}}return s},h.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.businessDomain="",i.supplyChainId=""),null!=e.businessDomain&&e.hasOwnProperty("businessDomain")&&(i.businessDomain=e.businessDomain),null!=e.supplyChainId&&e.hasOwnProperty("supplyChainId")&&(i.supplyChainId=e.supplyChainId),i},h),l.ProtoUserInformation=(d.prototype.userId="",d.prototype.lookupId="",d.prototype.lookupResponseCode=0,d.prototype.callFraudSensor=!1,d.prototype.publisherAdsTxt="",d.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoUserInformation;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.userId=e.string();break;case 3:s.lookupId=e.string();break;case 4:s.lookupResponseCode=e.int32();break;case 5:s.callFraudSensor=e.bool();break;case 6:s.publisherAdsTxt=e.string();break;default:e.skipType(7&r)}}return s},d.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.userId="",i.lookupId="",i.lookupResponseCode=0,i.callFraudSensor=!1,i.publisherAdsTxt=""),null!=e.userId&&e.hasOwnProperty("userId")&&(i.userId=e.userId),null!=e.lookupId&&e.hasOwnProperty("lookupId")&&(i.lookupId=e.lookupId),null!=e.lookupResponseCode&&e.hasOwnProperty("lookupResponseCode")&&(i.lookupResponseCode=e.lookupResponseCode),null!=e.callFraudSensor&&e.hasOwnProperty("callFraudSensor")&&(i.callFraudSensor=e.callFraudSensor),null!=e.publisherAdsTxt&&e.hasOwnProperty("publisherAdsTxt")&&(i.publisherAdsTxt=e.publisherAdsTxt),i},d),l.ProtoAdBreak=(c.prototype.types=a.emptyArray,c.prototype.maxAdPodDuration=0,c.prototype.maxAdSlotDuration=180,c.prototype.numberOfAdSlots=1,c.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoAdBreak;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:if(s.types&&s.types.length||(s.types=[]),2==(7&r))for(var n=e.uint32()+e.pos;e.pos<n;)s.types.push(e.int32());else s.types.push(e.int32());break;case 2:s.maxAdPodDuration=e.int32();break;case 3:s.maxAdSlotDuration=e.int32();break;case 4:s.numberOfAdSlots=e.int32();break;default:e.skipType(7&r)}}return s},c.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.types=[]),t.defaults&&(i.maxAdPodDuration=0,i.maxAdSlotDuration=180,i.numberOfAdSlots=1),e.types&&e.types.length){i.types=[];for(var s=0;s<e.types.length;++s)i.types[s]=t.enums===String?l.ProtoAdBreakTypeEnum[e.types[s]]:e.types[s]}return null!=e.maxAdPodDuration&&e.hasOwnProperty("maxAdPodDuration")&&(i.maxAdPodDuration=e.maxAdPodDuration),null!=e.maxAdSlotDuration&&e.hasOwnProperty("maxAdSlotDuration")&&(i.maxAdSlotDuration=e.maxAdSlotDuration),null!=e.numberOfAdSlots&&e.hasOwnProperty("numberOfAdSlots")&&(i.numberOfAdSlots=e.numberOfAdSlots),i},c),e.exports=l},function(e,t,i){"use strict";var s,r,n,o;i.d(t,"a",function(){return s}),i.d(t,"d",function(){return r}),i.d(t,"c",function(){return n}),i.d(t,"b",function(){return o}),(t=s=s||{})[t.Idle=0]="Idle",t[t.Loading=1]="Loading",t[t.Ready=2]="Ready",t[t.Error=3]="Error",t[t.Capped=4]="Capped",t[t.InWin=5]="InWin",t[t.Consumed=6]="Consumed",t[t.InImpression=7]="InImpression",(t=r=r||{})[t.Javascript=0]="Javascript",t[t.Video=1]="Video",(t=n=n||{}).Timeout="timeout",t.TimeoutLoaded="timeout_loaded",t.ImaError="imaError",t.ImaScriptFailure="imaScriptFailure",t.ImaObjectNotFound="imaObjectNotFound",t.ImaManagerInit="imaManagerInit",t.ImaInitSdkError="initImasdkError",t.VastVideoTagEventError="vastVideoTagEventError",t.VastUnsupportedMedia="vastUnsupportedMedia",t.VastPlayPromiseReject="playPromiseReject",t.AdStopped="adStopped",t.MuteEnforce="muteEnforce",t.VpaidOnLoad="vpaidOnLoad",t.VpaidInvalid="vpaidInvalid",t.VpaidGetVpaidAdError="vpaidGetVpaidAdError",t.CnxMediaNoRenditions="noRenditions",t.CnxMediaSrcNotSupported="srcNotSupported",t.InvalidVpaidEvent="invalidVpaidEvent",t.AdxOverlayNoFill="adxOverlayNoFill",t.AdxOverlayGptScriptLoad="adxOverlayGptScriptLoad",t.DisplayIntegratorIframeLoad="displayIntegratorIframeLoad",t.EnforcementMalware="malwareDetected",t.EnforcementVolume="volumeDetected",t.Cancelled="adManagerRemoved",t.DomainBlocked="domainBlocked",t.AdaptorStartAdError="adaptorStartAdError",t.AdaptorInitAdError="adaptorInitAdError",t.WrapperStartAdError="wrapperStartAdError",t.WrapperInitAdError="wrapperInitAdError",(t=o=o||{}).Html="text/html",t.Javascript="application/javascript"},function(e,t,i){"use strict";i.d(t,"b",function(){return s}),i.d(t,"d",function(){return r}),i.d(t,"e",function(){return n}),i.d(t,"f",function(){return o}),i.d(t,"g",function(){return a}),i.d(t,"a",function(){return l}),i.d(t,"c",function(){return c});const s=/(\d\d):(\d\d):(\d\d)(\.(\d\d\d))?/,r=36e5,n=6e4,o=1e3,a=60,l=864e5,c=60},function(e,t,i){"use strict";i=i(4).b,i=Object.assign(Object.assign({},i),{AdBreakStart:"adBreakStart",AdComplete:"adComplete",AdBreakComplete:"adBreakComplete",Pause:"pause",AdPause:"adPause",Play:"play",AdPlay:"adPlay",ContentComplete:"contentComplete",SessionStart:"sessionStart",SessionEnd:"sessionEnd",PlayerResized:"playerStateResize",OnEnterFullscreen:"onEnterFullscreen",OnExitFullscreen:"onExitFullscreen",PlayerCollapsed:"playerCollapsed",PlayerExpanded:"playerExpanded",PlayError:"playError",RenderError:"renderError",AdStateChange:"adStateChange",VolumeChange:"volumeChange",Destroy:"destroy"});t.a=i},function(e,t,i){"use strict";var s=i(18);class r{constructor(e){this.base=e,this.api={pls:e.core+"core/pls",story:e.core+"core/story",rtb:e.core+"rtb/g",vpaid:e.core+"vpaid",syncUrls:e.core+"core/us",fallbackstory:e.core+"core/fallbackstory",cookie:e.core+"core/ck",tam:e.core+"core/atam"},this.tracking={session_rendered:e.tracking+"sr",session_view:e.tracking+"sv",session_time:e.tracking+"st",session_client_error:e.tracking+"e",media_quartile:e.tracking+"mq",media_click:e.tracking+"mc",ad_impression:e.tracking+"ai",bids:e.tracking+"abt",ad_impression_viewable:e.tracking+"av",ad_quartile:e.tracking+"aq",ad_click:e.tracking+"ac",contentLoad:e.tracking+"clr",noContent:e.tracking+"nc",eventService:e.tracking+"et",tracking:e.tracking+"tr",vastWin:e.tracking+"vw",rtb:e.tracking+"g",logging:e.tracking+"e",galleryCardClick:e.tracking+"cc",playerStart:e.tracking+"ps",adOpportunity:e.tracking+"ao",sessionAdBlocker:e.tracking+"sab",heavy_ad_intervention:e.tracking+"ha",auctionInformation:e.tracking+"aucinfo"},this.assets={css:{elements:`${this.$(e.assets)}connatix.player.css`,playspace:`${this.$(e.assets)}connatix.playspace.css`}}}$(e){return"development"===s.a.env?"//cd.connatix.com/":`${e}p/${s.a.version}/`}}var n=i(17),o=i(7);i.d(t,"a",function(){return a});class a{static Z(){var e=Object(n.b)("cnxEnv",Object(o.f)(window).topFrame.location.href);return e&&(s.a.domainPrefix=`-${e}`),Object.keys(this.tt).forEach(e=>{this.tt[e]=this.tt[e].replace("{{env}}",s.a.domainPrefix)}),new r(a.tt)}static get endPoints(){return null===a.it&&(a.it=a.Z()),a.it}}a.tt={a:"//a{{env}}.connatix.com/",video:"//vid.connatix.com/",image:"//img.connatix.com/",core:"https://capi{{env}}.connatix.com/",tracking:"//capi{{env}}.connatix.com/tr/",metadata:"//vid.connatix.com/",assets:"//cds{{env}}.connatix.com/",lineItems:"//lit.connatix.com/"},a.it=null},function(e,t,i){"use strict";i.d(t,"g",function(){return r}),i.d(t,"c",function(){return n}),i.d(t,"d",function(){return o}),i.d(t,"e",function(){return a}),i.d(t,"h",function(){return l}),i.d(t,"f",function(){return c}),i.d(t,"a",function(){return d}),i.d(t,"b",function(){return h});var s=i(1);function r(e,t,i,s,r){return i+(r-e)/(t-e)*(s-i)}function n(i,e){return e.reduce((e,t)=>Math.abs(t-i)<=Math.abs(e-i)?t:e)}function o(e,t){let i=e,s=t;for(;0!==i&&0!==s;)i>s?i%=s:s%=i;return 0===i?s:i}function a(e,t){return t/100*e}function l(e,t){t=Math.pow(10,t);return Math.round(e*t)/t}function c(e){return!Object(s.e)(e.width)||!Object(s.e)(e.height)}function d(e){var t=[{value:1,symbol:""},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"}];let i;for(i=t.length-1;0<i&&!(e>=t[i].value);i--);return e/t[i].value<t[i].value/10?(Math.floor(e/t[i].value*10)/10).toFixed(1).replace(/\.0+$|(\.[0-9]*[1-9])0+$/,"$1")+t[i].symbol:Math.floor(e/t[i].value).toFixed(0)+t[i].symbol}function h(t,i){for(let e=i;1<e;e--)t%e==0&&i%e==0&&(t/=e,i/=e);return{widthRatio:t,heightRatio:i}}},function(e,t,i){function r(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return s[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}var s,n;"undefined"!=typeof window&&(e.exports=(s=[function(e,t,i){"use strict";i.d(t,"a",function(){return r}),i.d(t,"b",function(){return n});i=i(5);function o(){}var s={trace:o,debug:o,log:o,warn:o,info:o,error:o},a=s,l=Object(i.a)(),r=function(e){if(l.console&&!0===e||"object"==typeof e){!function(t){for(var e=arguments.length,i=new Array(1<e?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];i.forEach(function(e){var r,n;a[e]=t[e]?t[e].bind(t):(r=e,(n=l.console[r])?function(){for(var e,t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];i[0]&&(i[0]=(e=i[0],"["+r+"] > "+e)),n.apply(l.console,i)}:o)})}(e,"debug","log","info","warn","error");try{a.log()}catch(e){a=s}}else a=s},n=a},function(e,t,i){"use strict";t.a={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition",LIVE_BACK_BUFFER_REACHED:"hlsLiveBackBufferReached"}},function(e,t,i){"use strict";var s,r;i.d(t,"b",function(){return s}),i.d(t,"a",function(){return r}),(t=s=s||{}).NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError",(t=r=r||{}).KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.INTERNAL_EXCEPTION="internalException"},function(e,t,i){"use strict";i.d(t,"a",function(){return s});var s=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)}},function(e,t,i){"use strict";i.d(t,"b",function(){return s});var d,h=i(5),i=(a.isHeader=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},a.isFooter=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},a.getID3Data=function(e,t){for(var i=t,s=0;a.isHeader(e,t);)s+=10,s+=a.et(e,t+6),a.isFooter(e,t+10)&&(s+=10),t+=s;if(0<s)return e.subarray(i,i+s)},a.et=function(e,t){var i=0,i=(127&e[t])<<21;return i|=(127&e[t+1])<<14,(i|=(127&e[t+2])<<7)|127&e[t+3]},a.getTimeStamp=function(e){for(var t=a.getID3Frames(e),i=0;i<t.length;i++){var s=t[i];if(a.isTimeStampFrame(s))return a.st(s)}},a.isTimeStampFrame=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},a.nt=function(e){var t=String.fromCharCode(e[0],e[1],e[2],e[3]),i=a.et(e,4);return{type:t,size:i,data:e.subarray(10,10+i)}},a.getID3Frames=function(e){for(var t=0,i=[];a.isHeader(e,t);){for(var s=a.et(e,t+6),r=(t+=10)+s;t+8<r;){var n=a.nt(e.subarray(t)),o=a.rt(n);o&&i.push(o),t+=n.size+10}a.isFooter(e,t)&&(t+=10)}return i},a.rt=function(e){return"PRIV"===e.type?a.ht(e):"T"===e.type[0]?a.at(e):"W"===e.type[0]?a.ot(e):void 0},a.st=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),e=1&t[3],t=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return t/=45,e&&(t+=47721858.84),Math.round(t)}},a.ht=function(e){if(!(e.size<2)){var t=a.ct(e.data,!0),i=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:i.buffer}}},a.at=function(e){if(!(e.size<2)){if("TXXX"===e.type){var t=1,i=a.ct(e.data.subarray(1),!0);t+=i.length+1;t=a.ct(e.data.subarray(t));return{key:e.type,info:i,data:t}}t=a.ct(e.data.subarray(1));return{key:e.type,data:t}}},a.ot=function(e){if("WXXX"===e.type){if(e.size<2)return;var t=1,i=a.ct(e.data.subarray(1));t+=i.length+1;t=a.ct(e.data.subarray(t));return{key:e.type,info:i,data:t}}t=a.ct(e.data);return{key:e.type,data:t}},a.ct=function(e,t){void 0===t&&(t=!1);var i=(s=Object(h.a)(),d=d||void 0===s.TextDecoder?d:new s.TextDecoder("utf-8"));if(i){var s=i.decode(e);if(t){i=s.indexOf("\0");return-1!==i?s.substring(0,i):s}return s.replace(/\0/g,"")}for(var r,n,o,a=e.length,l="",c=0;c<a;){if(0===(r=e[c++])&&t)return l;if(0!==r&&3!==r)switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:l+=String.fromCharCode(r);break;case 12:case 13:n=e[c++],l+=String.fromCharCode((31&r)<<6|63&n);break;case 14:n=e[c++],o=e[c++],l+=String.fromCharCode((15&r)<<12|(63&n)<<6|(63&o)<<0)}}return l},a);function a(){}var s=i.ct;t.a=i},function(e,t,i){"use strict";function s(){return"undefined"==typeof window?self:window.cnxRenderWindow||window}i.d(t,"a",function(){return s})},function(e,t){e.exports=void 0},function(e,t,i){var s=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,n=/^([^\/?#]*)(.*)$/,r=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,a={buildAbsoluteURL:function(e,t,i){if(i=i||{},e=e.trim(),!(t=t.trim())){if(!i.alwaysNormalize)return e;var s=a.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");return s.path=a.normalizePath(s.path),a.buildURLFromParts(s)}s=a.parseURL(t);if(!s)throw new Error("Error trying to parse relative URL.");if(s.scheme)return i.alwaysNormalize?(s.path=a.normalizePath(s.path),a.buildURLFromParts(s)):t;t=a.parseURL(e);if(!t)throw new Error("Error trying to parse base URL.");!t.netLoc&&t.path&&"/"!==t.path[0]&&(r=n.exec(t.path),t.netLoc=r[1],t.path=r[2]),t.netLoc&&!t.path&&(t.path="/");var r,e={scheme:t.scheme,netLoc:s.netLoc,path:null,params:s.params,query:s.query,fragment:s.fragment};return s.netLoc||(e.netLoc=t.netLoc,"/"===s.path[0])||(s.path?(r=(r=t.path).substring(0,r.lastIndexOf("/")+1)+s.path,e.path=a.normalizePath(r)):(e.path=t.path,s.params||(e.params=t.params,s.query||(e.query=t.query)))),null===e.path&&(e.path=i.alwaysNormalize?a.normalizePath(s.path):s.path),a.buildURLFromParts(e)},parseURL:function(e){e=s.exec(e);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(r,"");e.length!==(e=e.replace(o,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=a},function(e,t,i){"use strict";var s=Object.prototype.hasOwnProperty,p="~";function r(){}function n(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function o(e,t,i,s,r){if("function"!=typeof i)throw new TypeError("The listener must be a function");r=new n(i,s||e,r),t=p?p+t:t;return e.ut[t]?e.ut[t].fn?e.ut[t]=[e.ut[t],r]:e.ut[t].push(r):(e.ut[t]=r,e.lt++),e}function l(e,t){0==--e.lt?e.ut=new r:delete e.ut[t]}function a(){this.ut=new r,this.lt=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(p=!1)),a.prototype.eventNames=function(){var e,t,i=[];if(0===this.lt)return i;for(t in e=this.ut)s.call(e,t)&&i.push(p?t.slice(1):t);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e){var e=p?p+e:e,t=this.ut[e];if(!t)return[];if(t.fn)return[t.fn];for(var i=0,s=t.length,r=new Array(s);i<s;i++)r[i]=t[i].fn;return r},a.prototype.listenerCount=function(e){e=p?p+e:e,e=this.ut[e];return e?e.fn?1:e.length:0},a.prototype.emit=function(e,t,i,s,r,n){var o=p?p+e:e;if(!this.ut[o])return!1;var a,l=this.ut[o],c=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),c){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,i),!0;case 4:return l.fn.call(l.context,t,i,s),!0;case 5:return l.fn.call(l.context,t,i,s,r),!0;case 6:return l.fn.call(l.context,t,i,s,r,n),!0}for(u=1,a=new Array(c-1);u<c;u++)a[u-1]=arguments[u];l.fn.apply(l.context,a)}else for(var d,h=l.length,u=0;u<h;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),c){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,i);break;case 4:l[u].fn.call(l[u].context,t,i,s);break;default:if(!a)for(d=1,a=new Array(c-1);d<c;d++)a[d-1]=arguments[d];l[u].fn.apply(l[u].context,a)}return!0},a.prototype.on=function(e,t,i){return o(this,e,t,i,!1)},a.prototype.once=function(e,t,i){return o(this,e,t,i,!0)},a.prototype.removeListener=function(e,t,i,s){e=p?p+e:e;if(!this.ut[e])return this;if(!t)return l(this,e),this;var r=this.ut[e];if(r.fn)r.fn!==t||s&&!r.once||i&&r.context!==i||l(this,e);else{for(var n=0,o=[],a=r.length;n<a;n++)(r[n].fn!==t||s&&!r[n].once||i&&r[n].context!==i)&&o.push(r[n]);o.length?this.ut[e]=1===o.length?o[0]:o:l(this,e)}return this},a.prototype.removeAllListeners=function(e){return e?(e=p?p+e:e,this.ut[e]&&l(this,e)):(this.ut=new r,this.lt=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=p,e.exports=a.EventEmitter=a},function(e,t,i){"use strict";var V=i(1),H=i(2),a=(d.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},d),l=(o.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},o),c=((P=n.prototype).uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),i=new Uint32Array(4),s=0;s<4;s++)i[s]=t.getUint32(4*s);return i},P.initTable=function(){for(var e=this.sBox,t=this.invSBox,i=this.subMix,s=i[0],r=i[1],n=i[2],o=i[3],i=this.invSubMix,a=i[0],l=i[1],c=i[2],d=i[3],h=new Uint32Array(256),u=0,p=0,g=0,g=0;g<256;g++)h[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){var m=p^p<<1^p<<2^p<<3^p<<4;e[u]=m=m>>>8^255&m^99;var f=h[t[m]=u],y=h[f],b=h[y],v=257*h[m]^16843008*m;s[u]=v<<24|v>>>8,r[u]=v<<16|v>>>16,n[u]=v<<8|v>>>24,o[u]=v,a[m]=(v=16843009*b^65537*y^257*f^16843008*u)<<24|v>>>8,l[m]=v<<16|v>>>16,c[m]=v<<8|v>>>24,d[m]=v,u?(u=f^h[h[h[b^f]]],p^=h[h[p]]):u=p=1}},P.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),i=!0,s=0;s<t.length&&i;)i=t[s]===this.key[s],s++;if(!i){this.key=t;var r=this.keySize=t.length;if(4!==r&&6!==r&&8!==r)throw new Error("Invalid aes key size="+r);for(var n,o,a,l=this.ksRows=4*(r+6+1),c=this.keySchedule=new Uint32Array(l),d=this.invKeySchedule=new Uint32Array(l),h=this.sBox,u=this.rcon,e=this.invSubMix,p=e[0],g=e[1],m=e[2],f=e[3],y=0;y<l;y++)y<r?o=c[y]=t[y]:(a=o,y%r==0?(a=h[(a=a<<8|a>>>24)>>>24]<<24|h[a>>>16&255]<<16|h[a>>>8&255]<<8|h[255&a],a^=u[y/r|0]<<24):6<r&&y%r==4&&(a=h[a>>>24]<<24|h[a>>>16&255]<<16|h[a>>>8&255]<<8|h[255&a]),c[y]=o=(c[y-r]^a)>>>0);for(n=0;n<l;n++)y=l-n,a=3&n?c[y]:c[y-4],d[n]=n<4||y<=4?a:p[h[a>>>24]]^g[h[a>>>16&255]]^m[h[a>>>8&255]]^f[h[255&a]],d[n]=d[n]>>>0}},P.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},P.decrypt=function(e,t,i,s){for(var r,n,o,a,l,c,d,h,u,p,g,m,f,y,b=this.keySize+6,v=this.invKeySchedule,P=this.invSBox,S=this.invSubMix,I=S[0],T=S[1],A=S[2],O=S[3],i=this.uint8ArrayToUint32Array_(i),k=i[0],C=i[1],w=i[2],x=i[3],E=new Int32Array(e),L=new Int32Array(E.length),M=this.networkToHostOrderSwap;t<E.length;){for(u=M(E[t]),p=M(E[t+1]),g=M(E[t+2]),m=M(E[t+3]),l=u^v[0],c=m^v[1],d=g^v[2],h=p^v[3],f=4,y=1;y<b;y++)r=I[l>>>24]^T[c>>16&255]^A[d>>8&255]^O[255&h]^v[f],n=I[c>>>24]^T[d>>16&255]^A[h>>8&255]^O[255&l]^v[f+1],o=I[d>>>24]^T[h>>16&255]^A[l>>8&255]^O[255&c]^v[f+2],a=I[h>>>24]^T[l>>16&255]^A[c>>8&255]^O[255&d]^v[f+3],l=r,c=n,d=o,h=a,f+=4;r=P[l>>>24]<<24^P[c>>16&255]<<16^P[d>>8&255]<<8^P[255&h]^v[f],n=P[c>>>24]<<24^P[d>>16&255]<<16^P[h>>8&255]<<8^P[255&l]^v[f+1],o=P[d>>>24]<<24^P[h>>16&255]<<16^P[l>>8&255]<<8^P[255&c]^v[f+2],a=P[h>>>24]<<24^P[l>>16&255]<<16^P[c>>8&255]<<8^P[255&d]^v[f+3],f+=3,L[t]=M(r^k),L[t+1]=M(a^C),L[t+2]=M(o^w),L[t+3]=M(n^x),k=u,C=p,w=g,x=m,t+=4}return s?(s=(e=(i=L.buffer).byteLength)&&new DataView(i).getUint8(e-1))?i.slice(0,e-s):i:L.buffer},P.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},n),q=i(0),r=i(5),m=((P=s.prototype).isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},P.decrypt=function(t,i,s,r){var e,n,o=this;this.disableWebCrypto&&this.config.enableSoftwareAES?(this.logEnabled&&(q.b.log("JS AES decrypt"),this.logEnabled=!1),(e=this.decryptor)||(this.decryptor=e=new c),e.expandKey(i),r(e.decrypt(t,0,s,this.removePKCS7Padding))):(this.logEnabled&&(q.b.log("WebCrypto AES decrypt"),this.logEnabled=!1),n=this.subtle,this.key!==i&&(this.key=i,this.fastAesKey=new l(n,i)),this.fastAesKey.expandKey().then(function(e){new a(n,s).decrypt(t,e).catch(function(e){o.onWebCryptoError(e,t,i,s,r)}).then(function(e){r(e)})}).catch(function(e){o.onWebCryptoError(e,t,i,s,r)}))},P.onWebCryptoError=function(e,t,i,s,r){this.config.enableSoftwareAES?(q.b.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,i,s,r)):(q.b.error("decrypting error : "+e.message),this.observer.trigger(V.a.ERROR,{type:H.b.MEDIA_ERROR,details:H.a.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))},P.destroy=function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)},s),g=i(3);function s(e,t,i){i=(void 0===i?{}:i).removePKCS7Padding,i=void 0===i||i;if(this.logEnabled=!0,this.observer=e,this.config=t,this.removePKCS7Padding=i)try{var s=Object(r.a)().crypto;s&&(this.subtle=s.subtle||s.webkitSubtle)}catch(e){}this.disableWebCrypto=!this.subtle}function n(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}function o(e,t){this.subtle=e,this.key=t}function d(e,t){this.subtle=e,this.aesIV=t}function h(e,t){return 255===e[t]&&240==(246&e[t+1])}function u(e,t){return 1&e[t+1]?7:9}function p(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function f(e,t){return t+1<e.length&&h(e,t)}function y(e,t,i,s,r){e.samplerate||(r=function(e,t,i,s){var r,n,o,a=navigator.userAgent.toLowerCase(),l=s,c=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],d=1+((192&t[i+2])>>>6);if(!((r=(60&t[i+2])>>>2)>c.length-1))return n=(1&t[i+2])<<2,n|=(192&t[i+3])>>>6,q.b.log("manifest codec:"+s+",ADTS data:type:"+d+",sampleingIndex:"+r+"["+c[r]+"Hz],channelConfig:"+n),s=/firefox/i.test(a)?6<=r?(d=5,o=new Array(4),r-3):(d=2,o=new Array(2),r):-1!==a.indexOf("android")?(d=2,o=new Array(2),r):(d=5,o=new Array(4),s&&(-1!==s.indexOf("mp4a.40.29")||-1!==s.indexOf("mp4a.40.5"))||!s&&6<=r?r-3:((s&&-1!==s.indexOf("mp4a.40.2")&&(6<=r&&1==n||/vivaldi/i.test(a))||!s&&1==n)&&(d=2,o=new Array(2)),r)),o[0]=d<<3,o[0]|=(14&r)>>1,o[1]|=(1&r)<<7,o[1]|=n<<3,5===d&&(o[1]|=(14&s)>>1,o[2]=(1&s)<<7,o[2]|=8,o[3]=0),{config:o,samplerate:c[r],channelCount:n,codec:"mp4a.40."+d,manifestCodec:l};e.trigger(V.a.ERROR,{type:H.b.MEDIA_ERROR,details:H.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+r})}(t,i,s,r),e.config=r.config,e.samplerate=r.samplerate,e.channelCount=r.channelCount,e.codec=r.codec,e.manifestCodec=r.manifestCodec,q.b.log("parsed codec:"+e.codec+",rate:"+r.samplerate+",nb channel:"+r.channelCount))}function b(e){return 9216e4/e}function v(e,r,n,o,a){var t=function(e){var t=r.length,i=u(r,n),s=p(r,n);if(0<(s-=i)&&n+i+s<=t)return{headerLength:i,frameLength:s,stamp:o+a*e}}(b(e.samplerate));if(t){var i=t.stamp,s=t.headerLength,t=t.frameLength,i={unit:r.subarray(n+s,n+s+t),pts:i,dts:i};return e.samples.push(i),{sample:i,length:t+s}}}var P,k=i(4),T=((P=U.prototype).resetInitSegment=function(e,t,i,s){this.dt={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:s,inputTimeScale:9e4}},P.resetTimeStamp=function(){},U.probe=function(e){if(!e)return!1;for(var t=(k.a.getID3Data(e,0)||[]).length,i=e.length;t<i;t++)if(function(e,t){if(f(e,t)){var i=u(e,t),i=t+(i=t+5<e.length?p(e,t):i);if(i===e.length||i+1<e.length&&h(e,i))return 1}}(e,t))return q.b.log("ADTS sync word found !"),!0;return!1},P.append=function(e,t,i,s){for(var r=this.dt,n=k.a.getID3Data(e,0)||[],o=k.a.getTimeStamp(n),a=Object(g.a)(o)?90*o:9e4*t,l=0,c=a,d=e.length,h=n.length,u=[{pts:c,dts:c,data:n}];h<d-1;)if(f(e,h)&&h+5<d){y(r,this.observer,e,h,r.manifestCodec);var p=v(r,e,h,a,l);if(!p){q.b.log("Unable to parse AAC frame");break}h+=p.length,c=p.sample.pts,l++}else k.a.isHeader(e,h)?(n=k.a.getID3Data(e,h),u.push({pts:c,dts:c,data:n}),h+=n.length):h++;this.remuxer.remux(r,{samples:[]},{samples:u,inputTimeScale:9e4},{samples:[]},t,i,s)},P.destroy=function(){},U),A=i(10),S={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(e,t,i,s,r){if(!(i+24>t.length)){var n=this.parseHeader(t,i);if(n&&i+n.frameLength<=t.length){r=s+r*(9e4*n.samplesPerFrame/n.sampleRate),r={unit:t.subarray(i,i+n.frameLength),pts:r,dts:r};return e.config=[],e.channelCount=n.channelCount,e.samplerate=n.sampleRate,e.samples.push(r),{sample:r,length:n.frameLength}}}},parseHeader:function(e,t){var i=e[t+1]>>3&3,s=e[t+1]>>1&3,r=e[t+2]>>4&15,n=e[t+2]>>2&3,o=e[t+2]>>1&1;if(1!=i&&0!=r&&15!=r&&3!=n){r=1e3*S.BitratesMap[14*(3==i?3-s:3==s?3:4)+r-1],n=S.SamplingRateMap[3*(3==i?0:2==i?1:2)+n],e=e[t+3]>>6==3?1:2,t=S.SamplesCoefficients[i][s],i=S.BytesInSlot[s],s=8*t*i;return{sampleRate:n,channelCount:e,frameLength:parseInt(t*r/n+o,10)*i,samplesPerFrame:s}}},isHeaderPattern:function(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var i=this.parseHeader(e,t),s=4,s=t+(s=i&&i.frameLength?i.frameLength:s);if(s===e.length||s+1<e.length&&this.isHeaderPattern(e,s))return!0}return!1}},I=S,C=((i=_.prototype).loadWord=function(){var e=this.data,t=this.bytesAvailable,i=e.byteLength-t,s=new Uint8Array(4),t=Math.min(4,t);if(0===t)throw new Error("no bytes available");s.set(e.subarray(i,i+t)),this.word=new DataView(s.buffer).getUint32(0),this.bitsAvailable=8*t,this.bytesAvailable-=t},i.skipBits=function(e){var t;this.bitsAvailable>e||(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord()),this.word<<=e,this.bitsAvailable-=e},i.readBits=function(e){var t=Math.min(this.bitsAvailable,e),i=this.word>>>32-t;return 32<e&&q.b.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,0<this.bitsAvailable?this.word<<=t:0<this.bytesAvailable&&this.loadWord(),0<(t=e-t)&&this.bitsAvailable?i<<t|this.readBits(t):i},i.skipLZ=function(){for(var e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},i.skipUEG=function(){this.skipBits(1+this.skipLZ())},i.skipEG=function(){this.skipBits(1+this.skipLZ())},i.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},i.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},i.readBoolean=function(){return 1===this.readBits(1)},i.readUByte=function(){return this.readBits(8)},i.readUShort=function(){return this.readBits(16)},i.readUInt=function(){return this.readBits(32)},i.skipScalingList=function(e){for(var t=8,i=8,s=0;s<e;s++)t=0===(i=0!==i?(t+this.readEG()+256)%256:i)?t:i},i.readSPS=function(){var e,t,i,s,r=0,n=0,o=0,a=0,l=this.readUByte.bind(this),c=this.readBits.bind(this),d=this.readUEG.bind(this),h=this.readBoolean.bind(this),u=this.skipBits.bind(this),p=this.skipEG.bind(this),g=this.skipUEG.bind(this),m=this.skipScalingList.bind(this);if(l(),e=l(),c(5),u(3),l(),g(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var f=d();if(3===f&&u(1),g(),g(),u(1),h())for(i=3!==f?8:12,s=0;s<i;s++)h()&&m(s<6?16:64)}g();var f=d();if(0===f)d();else if(1===f)for(u(1),p(),p(),t=d(),s=0;s<t;s++)p();g(),u(1),f=d(),g=d(),0===(c=c(1))&&u(1),u(1),h()&&(r=d(),n=d(),o=d(),a=d());var y=[1,1];if(h()&&h())switch(l()){case 1:y=[1,1];break;case 2:y=[12,11];break;case 3:y=[10,11];break;case 4:y=[16,11];break;case 5:y=[40,33];break;case 6:y=[24,11];break;case 7:y=[20,11];break;case 8:y=[32,11];break;case 9:y=[80,33];break;case 10:y=[18,11];break;case 11:y=[15,11];break;case 12:y=[64,33];break;case 13:y=[160,99];break;case 14:y=[4,3];break;case 15:y=[3,2];break;case 16:y=[2,1];break;case 255:y=[l()<<8|l(),l()<<8|l()]}return{width:Math.ceil(16*(f+1)-2*r-2*n),height:(2-c)*(g+1)*16-(c?2:4)*(o+a),pixelRatio:y}},i.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},_),O=((i=D.prototype).decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)},i.decryptAacSample=function(t,i,s,r){var n=t[i].unit,e=n.subarray(16,n.length-n.length%16),e=e.buffer.slice(e.byteOffset,e.byteOffset+e.length),o=this;this.decryptBuffer(e,function(e){e=new Uint8Array(e),n.set(e,16),r||o.decryptAacSamples(t,i+1,s)})},i.decryptAacSamples=function(e,t,i){for(;;t++){if(t>=e.length)return void i();if(!(e[t].unit.length<32)){var s=this.decrypter.isSync();if(this.decryptAacSample(e,t,i,s),!s)return}}},i.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,i=new Int8Array(t),s=0,r=32;r<=e.length-16;r+=160,s+=16)i.set(e.subarray(r,r+16),s);return i},i.getAvcDecryptedUnit=function(e,t){t=new Uint8Array(t);for(var i=0,s=32;s<=e.length-16;s+=160,i+=16)e.set(t.subarray(i,i+16),s);return e},i.decryptAvcSample=function(t,i,s,r,n,o){var a=this.discardEPB(n.data),e=this.getAvcEncryptedData(a),l=this;this.decryptBuffer(e.buffer,function(e){n.data=l.getAvcDecryptedUnit(a,e),o||l.decryptAvcSamples(t,i,s+1,r)})},i.decryptAvcSamples=function(e,t,i,s){for(;;t++,i=0){if(t>=e.length)return void s();for(var r=e[t].units;!(i>=r.length);i++){var n=r[i];if(!(n.length<=48||1!==n.type&&5!==n.type)){var o=this.decrypter.isSync();if(this.decryptAvcSample(e,t,i,s,n,o),!o)return}}}},D),w={video:1,audio:2,id3:3,text:4},x=((i=j.prototype).setDecryptData=function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new O(this.observer,this.config,e,this.discardEPB):this.sampleAes=null},j.probe=function(e){e=j.ft(e);return!(e<0||(e&&q.b.warn("MPEG2-TS detected but first sync word found @ offset "+e+", junk ahead ?"),0))},j.ft=function(e){for(var t=Math.min(1e3,e.length-564),i=0;i<t;){if(71===e[i]&&71===e[i+188]&&71===e[i+376])return i;i++}return-1},j.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:w[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:"video"===e?0:void 0,isAAC:"audio"===e||void 0,duration:"audio"===e?t:void 0}},i.resetInitSegment=function(e,t,i,s){this.pmtParsed=!1,this.pt=-1,this.bt=j.createTrack("video",s),this.dt=j.createTrack("audio",s),this.vt=j.createTrack("id3",s),this.gt=j.createTrack("text",s),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=t,this.videoCodec=i,this.yt=s},i.resetTimeStamp=function(){},i.append=function(e,t,i,s){var r,n,o,a,l,c=e.length,d=!1;this.contiguous=i;var h=this.pmtParsed,u=this.bt,p=this.dt,g=this.vt,m=u.pid,f=p.pid,y=g.pid,b=this.pt,v=u.pesData,P=p.pesData,S=g.pesData,I=this.wt,T=this.xt,A=this.St,O=this.Ot.bind(this),k=this.kt.bind(this),C=this._t.bind(this),w=this.jt.bind(this),x=j.ft(e);for(c-=(c+x)%188,r=x;r<c;r+=188)if(71===e[r]){if(n=!!(64&e[r+1]),o=((31&e[r+1])<<8)+e[r+2],1<(48&e[r+3])>>4){if((a=r+5+e[r+4])===r+188)continue}else a=r+4;switch(o){case m:n&&(v&&(l=A(v))&&O(l,!1),v={data:[],size:0}),v&&(v.data.push(e.subarray(a,r+188)),v.size+=r+188-a);break;case f:n&&(P&&(l=A(P))&&(p.isAAC?k:C)(l),P={data:[],size:0}),P&&(P.data.push(e.subarray(a,r+188)),P.size+=r+188-a);break;case y:n&&(S&&(l=A(S))&&w(l),S={data:[],size:0}),S&&(S.data.push(e.subarray(a,r+188)),S.size+=r+188-a);break;case 0:n&&(a+=e[a]+1),b=this.pt=I(e,a);break;case b:n&&(a+=e[a]+1);var E=T(e,a,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);0<(m=E.avc)&&(u.pid=m),0<(f=E.audio)&&(p.pid=f,p.isAAC=E.isAAC),0<(y=E.id3)&&(g.pid=y),d&&!h&&(q.b.log("reparse from beginning"),d=!1,r=x-188),h=this.pmtParsed=!0;break;case 17:case 8191:break;default:d=!0}}else this.observer.trigger(V.a.ERROR,{type:H.b.MEDIA_ERROR,details:H.a.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});v&&(l=A(v))?(O(l,!0),u.pesData=null):u.pesData=v,P&&(l=A(P))?((p.isAAC?k:C)(l),p.pesData=null):(P&&P.size&&q.b.log("last AAC PES packet truncated,might overlap between fragments"),p.pesData=P),S&&(l=A(S))?(w(l),g.pesData=null):g.pesData=S,null==this.sampleAes?this.remuxer.remux(p,u,g,this.gt,t,i,s):this.decryptAndRemux(p,u,g,this.gt,t,i,s)},i.decryptAndRemux=function(e,t,i,s,r,n,o){var a;e.samples&&e.isAAC?(a=this).sampleAes.decryptAacSamples(e.samples,0,function(){a.decryptAndRemuxAvc(e,t,i,s,r,n,o)}):this.decryptAndRemuxAvc(e,t,i,s,r,n,o)},i.decryptAndRemuxAvc=function(e,t,i,s,r,n,o){var a;t.samples?(a=this).sampleAes.decryptAvcSamples(t.samples,0,0,function(){a.remuxer.remux(e,t,i,s,r,n,o)}):this.remuxer.remux(e,t,i,s,r,n,o)},i.destroy=function(){this.At=this.It=void 0,this.yt=0},i.wt=function(e,t){return(31&e[t+10])<<8|e[t+11]},i.xt=function(e,t,i,s){var r,n={audio:-1,avc:-1,id3:-1,isAAC:!0},o=t+3+((15&e[t+1])<<8|e[t+2])-4;for(t+=12+((15&e[t+10])<<8|e[t+11]);t<o;){switch(r=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!s){q.b.log("unknown stream type:"+e[t]);break}case 15:-1===n.audio&&(n.audio=r);break;case 21:-1===n.id3&&(n.id3=r);break;case 219:if(!s){q.b.log("unknown stream type:"+e[t]);break}case 27:-1===n.avc&&(n.avc=r);break;case 3:case 4:i?-1===n.audio&&(n.audio=r,n.isAAC=!1):q.b.log("MPEG audio found, not supported in this browser for now");break;case 36:q.b.warn("HEVC stream type found, not supported for now");break;default:q.b.log("unknown stream type:"+e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return n},i.St=function(e){var t,i,s,r,n,o,a=0,l=e.data;if(!e||0===e.size)return null;for(;l[0].length<19&&1<l.length;){var c=new Uint8Array(l[0].length+l[1].length);c.set(l[0]),c.set(l[1],l[0].length),l[0]=c,l.splice(1,1)}if(1!==((t=l[0])[0]<<16)+(t[1]<<8)+t[2])return null;if((i=(t[4]<<8)+t[5])&&i>e.size-6)return null;if(192&(s=t[7])&&(4294967295<(r=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2)&&(r-=8589934592),64&s?(4294967295<(n=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)&&(n-=8589934592),54e5<r-n&&(q.b.warn(Math.round((r-n)/9e4)+"s delta between PTS and DTS, align them"),r=n)):n=r),o=(s=t[8])+9,e.size<=o)return null;e.size-=o;for(var d=new Uint8Array(e.size),h=0,u=l.length;h<u;h++){var p=(t=l[h]).byteLength;if(o){if(p<o){o-=p;continue}t=t.subarray(o),p-=o,o=0}d.set(t,a),a+=p}return i&&(i-=s+3),{data:d,pts:r,dts:n,len:i}},i.pushAccesUnit=function(e,t){if(e.units.length&&e.frame){var i=t.samples,s=i.length;if(isNaN(e.pts)){if(!s)return void t.dropped++;var r=i[s-1];e.pts=r.pts,e.dts=r.dts}!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(s||this.contiguous)?(e.id=s,i.push(e)):t.dropped++}e.debug.length&&q.b.log(e.pts+"/"+e.dts+":"+e.debug)},i.Ot=function(f,e){function y(e,t,i,s){return{key:e,pts:t,dts:i,units:[],debug:s}}var b,v,P,S=this,I=this.bt,t=this.Ct(f.data),T=this.avcSample,A=!1,O=this.pushAccesUnit.bind(this);f.data=null,T&&t.length&&!I.audFound&&(O(T,I),T=this.avcSample=y(!1,f.pts,f.dts,"")),t.forEach(function(e){switch(e.type){case 1:v=!0,(T=T||(S.avcSample=y(!0,f.pts,f.dts,""))).frame=!0;var t=e.data;A&&4<t.length&&(2!==(u=new C(t).readSliceType())&&4!==u&&7!==u&&9!==u||(T.key=!0));break;case 5:v=!0,(T=T||(S.avcSample=y(!0,f.pts,f.dts,""))).key=!0,T.frame=!0;break;case 6:v=!0,(b=new C(S.discardEPB(e.data))).readUByte();for(var i=0,s=0,r=!1,n=0;!r&&1<b.bytesAvailable;){for(i=0;i+=n=b.readUByte(),255===n;);for(s=0;s+=n=b.readUByte(),255===n;);if(4===i&&0!==b.bytesAvailable){if(r=!0,181===b.readUByte()&&49===b.readUShort()&&1195456820===b.readUInt()&&3===b.readUByte()){var o=b.readUByte(),a=31&o,l=[o,b.readUByte()];for(P=0;P<a;P++)l.push(b.readUByte()),l.push(b.readUByte()),l.push(b.readUByte());S.Tt(S.gt.samples,{type:3,pts:f.pts,bytes:l})}}else if(5===i&&0!==b.bytesAvailable){if(r=!0,16<s){var c=[];for(P=0;P<16;P++)c.push(b.readUByte().toString(16)),3!==P&&5!==P&&7!==P&&9!==P||c.push("-");var d=s-16,h=new Uint8Array(d);for(P=0;P<d;P++)h[P]=b.readUByte();S.Tt(S.gt.samples,{pts:f.pts,payloadType:i,uuid:c.join(""),userDataBytes:h,userData:Object(k.b)(h.buffer)})}}else if(s<b.bytesAvailable)for(P=0;P<s;P++)b.readUByte()}break;case 7:if(A=v=!0,!I.sps){var u=(b=new C(e.data)).readSPS();I.width=u.width,I.height=u.height,I.pixelRatio=u.pixelRatio,I.sps=[e.data],I.duration=S.yt;var p=e.data.subarray(1,4),g="avc1.";for(P=0;P<3;P++){var m=p[P].toString(16);g+=m=m.length<2?"0"+m:m}I.codec=g}break;case 8:v=!0,I.pps||(I.pps=[e.data]);break;case 9:v=!1,I.audFound=!0,T&&O(T,I),T=S.avcSample=y(!1,f.pts,f.dts,"");break;case 12:v=!1;break;default:v=!1,T&&(T.debug+="unknown NAL "+e.type+" ")}T&&v&&T.units.push(e)}),e&&T&&(O(T,I),this.avcSample=null)},i.Tt=function(e,t){var i=e.length;if(0<i){if(t.pts>=e[i-1].pts)e.push(t);else for(var s=i-1;0<=s;s--)if(t.pts<e[s].pts){e.splice(s,0,t);break}}else e.push(t)},i.Pt=function(){var e,t,i=this.avcSample;return t=(i=!i||0===i.units.length?(e=this.bt.samples)[e.length-1]:i)?(i=i.units)[i.length-1]:t},i.Ct=function(e){var t,i,s,r,n,o,a,l,c=0,d=e.byteLength,h=this.bt,u=h.naluState||0,p=u,g=[],m=-1;for(-1===u&&(r=31&e[m=0],u=0,c=1);c<d;)t=e[c++],u=u?1!==u?t?1===t?(0<=m?(s={data:e.subarray(m,c-u-1),type:r},g.push(s)):(n=this.Pt())&&(p&&c<=4-p&&n.state&&(n.data=n.data.subarray(0,n.data.byteLength-p)),0<(i=c-u-1))&&((o=new Uint8Array(n.data.byteLength+i)).set(n.data,0),o.set(e.subarray(0,i),n.data.byteLength),n.data=o),c<d?(r=31&e[m=c],0):-1):0:3:t?0:2:t?0:1;return 0<=m&&0<=u&&(s={data:e.subarray(m,d),type:r,state:u},g.push(s)),0===g.length&&(a=this.Pt())&&((l=new Uint8Array(a.data.byteLength+e.byteLength)).set(a.data,0),l.set(e,a.data.byteLength),a.data=l),h.naluState=u,g},i.discardEPB=function(e){for(var t=e.byteLength,i=[],s=1;s<t-2;)0===e[s]&&0===e[s+1]&&3===e[s+2]?(i.push(s+2),s+=2):s++;if(0===i.length)return e;for(var r=t-i.length,n=new Uint8Array(r),o=0,s=0;s<r;o++,s++)o===i[0]&&(o++,i.shift()),n[s]=e[o];return n},i.kt=function(e){var t,i,s,r,n,o,a=this.dt,l=e.data,c=e.pts,d=this.aacOverFlow,h=this.aacLastPTS;for(d&&((e=new Uint8Array(d.byteLength+l.byteLength)).set(d,0),e.set(l,d.byteLength),l=e),i=0,r=l.length;i<r-1&&!f(l,i);i++);if(!i||(o=i<r-1?(n="AAC PES did not start with ADTS header,offset:"+i,!1):(n="no ADTS header found in AAC PES",!0),q.b.warn("parsing error:"+n),this.observer.trigger(V.a.ERROR,{type:H.b.MEDIA_ERROR,details:H.a.FRAG_PARSING_ERROR,fatal:o,reason:n}),!o)){for(y(a,this.observer,l,i,this.audioCodec),t=0,o=b(a.samplerate),d&&h&&(o=h+o,1<Math.abs(o-c)&&(q.b.log("AAC: align PTS for overlapping frames by "+Math.round((o-c)/90)),c=o));i<r;){if(f(l,i)){if(i+5<r){var u=v(a,l,i,c,t);if(u){i+=u.length,s=u.sample.pts,t++;continue}}break}i++}d=i<r?l.subarray(i,r):null,this.aacOverFlow=d,this.aacLastPTS=s}},i._t=function(e){for(var t=e.data,i=t.length,s=0,r=0,n=e.pts;r<i;)if(I.isHeader(t,r)){var o=I.appendFrame(this.dt,t,r,n,s);if(!o)break;r+=o.length,s++}else r++},i.jt=function(e){this.vt.samples.push(e)},j),E=((i=B.prototype).resetInitSegment=function(e,t,i,s){this.dt={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:s,inputTimeScale:9e4}},i.resetTimeStamp=function(){},B.probe=function(e){var t,i,s=k.a.getID3Data(e,0);if(s&&void 0!==k.a.getTimeStamp(s))for(t=s.length,i=Math.min(e.length-1,t+100);t<i;t++)if(I.probe(e,t))return q.b.log("MPEG Audio sync word found !"),!0;return!1},i.append=function(e,t,i,s){for(var r=k.a.getID3Data(e,0),n=k.a.getTimeStamp(r),o=n?90*n:9e4*t,a=r.length,l=e.length,c=0,d=0,h=this.dt,u=[{pts:o,dts:o,data:r}];a<l;)if(I.isHeader(e,a)){var p=I.appendFrame(h,e,a,o,c);if(!p)break;a+=p.length,d=p.sample.pts,c++}else k.a.isHeader(e,a)?(r=k.a.getID3Data(e,a),u.push({pts:d,dts:d,data:r}),a+=r.length):a++;this.remuxer.remux(h,{samples:[]},{samples:u,inputTimeScale:9e4},{samples:[]},t,i,s)},i.destroy=function(){},B),F=(R.getSilentFrame=function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},R),L=Math.pow(2,32)-1,W=(M.init=function(){for(var e in M.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]})M.types.hasOwnProperty(e)&&(M.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);M.HDLR_TYPES={video:t,audio:i};var s=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),r=new Uint8Array([0,0,0,0,0,0,0,0]);M.STTS=M.STSC=M.STCO=r,M.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),M.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),M.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),M.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);t=new Uint8Array([105,115,111,109]),i=new Uint8Array([97,118,99,49]),r=new Uint8Array([0,0,0,1]);M.FTYP=M.box(M.types.ftyp,t,r,t,i),M.DINF=M.box(M.types.dinf,M.box(M.types.dref,s))},M.box=function(e){for(var t,i=Array.prototype.slice.call(arguments,1),s=8,r=i.length,n=r;r--;)s+=i[r].byteLength;for((t=new Uint8Array(s))[0]=s>>24&255,t[1]=s>>16&255,t[2]=s>>8&255,t[3]=255&s,t.set(e,4),r=0,s=8;r<n;r++)t.set(i[r],s),s+=i[r].byteLength;return t},M.hdlr=function(e){return M.box(M.types.hdlr,M.HDLR_TYPES[e])},M.mdat=function(e){return M.box(M.types.mdat,e)},M.mdhd=function(e,t){t*=e;var i=Math.floor(t/(1+L)),t=Math.floor(t%(1+L));return M.box(M.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,t>>24,t>>16&255,t>>8&255,255&t,85,196,0,0]))},M.mdia=function(e){return M.box(M.types.mdia,M.mdhd(e.timescale,e.duration),M.hdlr(e.type),M.minf(e))},M.mfhd=function(e){return M.box(M.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},M.minf=function(e){return"audio"===e.type?M.box(M.types.minf,M.box(M.types.smhd,M.SMHD),M.DINF,M.stbl(e)):M.box(M.types.minf,M.box(M.types.vmhd,M.VMHD),M.DINF,M.stbl(e))},M.moof=function(e,t,i){return M.box(M.types.moof,M.mfhd(e),M.traf(i,t))},M.moov=function(e){for(var t=e.length,i=[];t--;)i[t]=M.trak(e[t]);return M.box.apply(null,[M.types.moov,M.mvhd(e[0].timescale,e[0].duration)].concat(i).concat(M.mvex(e)))},M.mvex=function(e){for(var t=e.length,i=[];t--;)i[t]=M.trex(e[t]);return M.box.apply(null,[M.types.mvex].concat(i))},M.mvhd=function(e,t){t*=e;var i=Math.floor(t/(1+L)),t=Math.floor(t%(1+L)),t=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,t>>24,t>>16&255,t>>8&255,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return M.box(M.types.mvhd,t)},M.sdtp=function(e){for(var t,i=e.samples||[],s=new Uint8Array(4+i.length),r=0;r<i.length;r++)t=i[r].flags,s[r+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return M.box(M.types.sdtp,s)},M.stbl=function(e){return M.box(M.types.stbl,M.stsd(e),M.box(M.types.stts,M.STTS),M.box(M.types.stsc,M.STSC),M.box(M.types.stsz,M.STSZ),M.box(M.types.stco,M.STCO))},M.avc1=function(e){for(var t,i,s=[],r=[],n=0;n<e.sps.length;n++)i=(t=e.sps[n]).byteLength,s.push(i>>>8&255),s.push(255&i),s=s.concat(Array.prototype.slice.call(t));for(n=0;n<e.pps.length;n++)i=(t=e.pps[n]).byteLength,r.push(i>>>8&255),r.push(255&i),r=r.concat(Array.prototype.slice.call(t));var o=M.box(M.types.avcC,new Uint8Array([1,s[3],s[4],s[5],255,224|e.sps.length].concat(s).concat([e.pps.length]).concat(r))),a=e.width,l=e.height,c=e.pixelRatio[0],d=e.pixelRatio[1];return M.box(M.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,a>>8&255,255&a,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,M.box(M.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),M.box(M.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])))},M.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},M.mp4a=function(e){var t=e.samplerate;return M.box(M.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0]),M.box(M.types.esds,M.esds(e)))},M.mp3=function(e){var t=e.samplerate;return M.box(M.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0]))},M.stsd=function(e){return"audio"===e.type?e.isAAC||"mp3"!==e.codec?M.box(M.types.stsd,M.STSD,M.mp4a(e)):M.box(M.types.stsd,M.STSD,M.mp3(e)):M.box(M.types.stsd,M.STSD,M.avc1(e))},M.tkhd=function(e){var t=e.id,i=e.duration*e.timescale,s=e.width,r=e.height,e=Math.floor(i/(1+L)),i=Math.floor(i%(1+L));return M.box(M.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,s>>8&255,255&s,0,0,r>>8&255,255&r,0,0]))},M.traf=function(e,t){var i=M.sdtp(e),s=e.id,r=Math.floor(t/(1+L)),t=Math.floor(t%(1+L));return M.box(M.types.traf,M.box(M.types.tfhd,new Uint8Array([0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s])),M.box(M.types.tfdt,new Uint8Array([1,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,t>>24,t>>16&255,t>>8&255,255&t])),M.trun(e,i.length+16+20+8+16+8+8),i)},M.trak=function(e){return e.duration=e.duration||4294967295,M.box(M.types.trak,M.tkhd(e),M.mdia(e))},M.trex=function(e){e=e.id;return M.box(M.types.trex,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},M.trun=function(e,t){var i,s,r,n,o,a=e.samples||[],l=a.length,e=12+16*l,c=new Uint8Array(e);for(c.set([0,0,15,1,l>>>24&255,l>>>16&255,l>>>8&255,255&l,(t+=8+e)>>>24&255,t>>>16&255,t>>>8&255,255&t],0),i=0;i<l;i++)s=(o=a[i]).duration,r=o.size,n=o.flags,o=o.cts,c.set([s>>>24&255,s>>>16&255,s>>>8&255,255&s,r>>>24&255,r>>>16&255,r>>>8&255,255&r,n.isLeading<<2|n.dependsOn,n.isDependedOn<<6|n.hasRedundancy<<4|n.paddingValue<<1|n.isNonSync,61440&n.degradPrio,15&n.degradPrio,o>>>24&255,o>>>16&255,o>>>8&255,255&o],12+16*i);return M.box(M.types.trun,c)},M.initSegment=function(e){M.types||M.init();var t=M.moov(e);return(e=new Uint8Array(M.FTYP.byteLength+t.byteLength)).set(M.FTYP),e.set(t,M.FTYP.byteLength),e},M);function M(){}function R(){}function B(e,t,i){this.observer=e,this.config=i,this.remuxer=t}function j(e,t,i,s){this.observer=e,this.config=i,this.typeSupported=s,this.remuxer=t,this.sampleAes=null}function D(e,t,i,s){this.decryptdata=i,this.discardEPB=s,this.decrypter=new m(e,t,{removePKCS7Padding:!1})}function _(e){this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}function U(e,t,i){this.observer=e,this.config=i,this.remuxer=t}function N(e,t,i,s){i=e*t*(i=void 0===i?1:i);return(s=void 0===s?!1:s)?Math.round(i):i}function $(e,t){return N(e,1e3,1/9e4,t=void 0===t?!1:t)}function G(e,t){return N(e,9e4,1/(t=void 0===t?1:t))}var z,J=G(10),K=G(.2),Q=((i=Z.prototype).destroy=function(){},i.resetTimeStamp=function(e){this.At=this.It=e},i.resetInitSegment=function(){this.ISGenerated=!1},i.remux=function(e,t,i,s,r,n,o){var a,l,c,d,h,u;this.ISGenerated||this.generateIS(e,t,r),this.ISGenerated&&(u=e.samples.length,a=t.samples.length,c=l=r,u&&a&&(d=(e.samples[0].pts-t.samples[0].pts)/t.inputTimeScale,l+=Math.max(0,d),c+=Math.max(0,-d)),u?(e.timescale||(q.b.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,r)),u=this.remuxAudio(e,l,n,o),a&&(u&&(h=u.endPTS-u.startPTS),t.timescale||(q.b.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,r)),this.remuxVideo(t,c,n,h,o))):!a||(o=this.remuxVideo(t,c,n,0,o))&&e.codec&&this.remuxEmptyAudio(e,l,n,o)),i.samples.length&&this.remuxID3(i,r),s.samples.length&&this.remuxText(s,r),this.observer.trigger(V.a.FRAG_PARSED)},i.generateIS=function(e,t,i){var s,r,n=this.observer,o=e.samples,a=t.samples,l=this.typeSupported,c="audio/mp4",d={},h={tracks:d},u=void 0===this.At;u&&(s=r=1/0),e.config&&o.length&&(e.timescale=e.samplerate,q.b.log("audio sampling rate : "+e.samplerate),e.isAAC||(l.mpeg?(c="audio/mpeg",e.codec=""):l.mp3&&(e.codec="mp3")),d.audio={container:c,codec:e.codec,initSegment:!e.isAAC&&l.mpeg?new Uint8Array:W.initSegment([e]),metadata:{channelCount:e.channelCount}},u&&(s=r=o[0].pts-e.inputTimeScale*i)),t.sps&&t.pps&&a.length&&(e=t.inputTimeScale,t.timescale=e,d.video={container:"video/mp4",codec:t.codec,initSegment:W.initSegment([t]),metadata:{width:t.width,height:t.height}},u&&(s=Math.min(s,a[0].pts-e*i),r=Math.min(r,a[0].dts-e*i),this.observer.trigger(V.a.INIT_PTS_FOUND,{initPTS:s}))),Object.keys(d).length?(n.trigger(V.a.FRAG_PARSING_INIT_SEGMENT,h),this.ISGenerated=!0,u&&(this.At=s,this.It=r)):n.trigger(V.a.ERROR,{type:H.b.MEDIA_ERROR,details:H.a.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},i.remuxVideo=function(e,t,i,s,r){var n,o,a=8,l=e.timescale,c=e.samples,d=[],h=c.length,u=this.Mt,p=this.At,g=this.nextAvcDts,m=this.isSafari;if(0!==h){m&&(i|=c.length&&g&&(r&&Math.abs(t-g/l)<.1||Math.abs(c[0].pts-g-p)<l/5)),i||(g=t*l),c.forEach(function(e){e.pts=u(e.pts-p,g),e.dts=u(e.dts-p,g)}),c.sort(function(e,t){var i=e.dts-t.dts,s=e.pts-t.pts;return i||s||e.id-t.id});var f=c.reduce(function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-1*K)},0);if(f<0){q.b.warn("PTS < DTS detected in video samples, shifting DTS by "+$(f,!0)+" ms to overcome this issue");for(var y=0;y<c.length;y++)c[y].dts+=f}var r=c[0],b=Math.max(r.dts,0),v=Math.max(r.pts,0),t=b-g;i&&t&&(1<t?q.b.log("AVC: "+$(t,!0)+" ms hole between fragments detected,filling it"):t<-1&&q.b.log("AVC: "+$(-t,!0)+" ms overlapping between fragments detected"),b=g,c[0].dts=b,v=Math.max(v-t,g),c[0].pts=v,q.b.log("Video: PTS/DTS adjusted: "+$(v,!0)+"/"+$(b,!0)+", delta: "+$(t,!0)+" ms")),r=c[c.length-1],i=Math.max(r.dts,0),t=Math.max(r.pts,0,i),m&&(n=Math.round((i-b)/(c.length-1)));for(var P=0,S=0,I=0;I<h;I++){for(var T=c[I],A=T.units,O=A.length,k=0,C=0;C<O;C++)k+=A[C].data.length;S+=k,P+=O,T.length=k,T.dts=m?b+I*n:Math.max(T.dts,b),T.pts=Math.max(T.pts,T.dts)}r=S+4*P+8;try{o=new Uint8Array(r)}catch(e){return void this.observer.trigger(V.a.ERROR,{type:H.b.MUX_ERROR,details:H.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:r,reason:"fail allocating video mdat "+r})}var w=new DataView(o.buffer);w.setUint32(0,r),o.set(W.types.mdat,4);for(var x=0;x<h;x++){for(var E,L,M=c[x],R=M.units,B=0,j=void 0,D=0,_=R.length;D<_;D++){var F=R[D],U=F.data,F=F.data.byteLength;w.setUint32(a,F),a+=4,o.set(U,a),a+=F,B+=4+F}j=m?Math.max(0,n*Math.round((M.pts-M.dts)/n)):(x<h-1?n=c[x+1].dts-M.dts:(L=this.config,E=M.dts-c[0<x?x-1:x].dts,L.stretchShortVideoTrack?(L=L.maxBufferHole,Math.floor(L*l)<(L=(s?v+s*l:this.nextAudioPts)-M.pts)?((n=L-E)<0&&(n=E),q.b.log("It is approximately "+$(L,!1)+" ms to the next segment; using duration "+$(n,!1)+" ms for the last video frame.")):n=E):n=E),Math.round(M.pts-M.dts)),d.push({size:B,duration:n,cts:j,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:M.key?2:1,isNonSync:M.key?0:1}})}this.nextAvcDts=i+n;var N,i=e.dropped;e.nbNalu=0,e.dropped=0,d.length&&-1<navigator.userAgent.toLowerCase().indexOf("chrome")&&((N=d[0].flags).dependsOn=2,N.isNonSync=0),e.samples=d,N=W.moof(e.sequenceNumber++,b,e),e.samples=[];i={data1:N,data2:o,startPTS:v/l,endPTS:(t+n)/l,startDTS:b/l,endDTS:this.nextAvcDts/l,type:"video",hasAudio:!1,hasVideo:!0,nb:d.length,dropped:i};return this.observer.trigger(V.a.FRAG_PARSING_DATA,i),i}},i.remuxAudio=function(e,t,i,s){var r,n,o,a,l,c=e.inputTimeScale,d=e.timescale,h=c/d,u=(e.isAAC?1024:1152)*h,p=this.Mt,g=this.At,m=!e.isAAC&&this.typeSupported.mpeg,f=m?0:8,y=e.samples,b=[],v=this.nextAudioPts;if(i|=y.length&&v&&(s&&Math.abs(t-v/c)<.1||Math.abs(y[0].pts-v-g)<20*u),y.forEach(function(e){e.pts=e.dts=p(e.pts-g,t*c)}),0!==(y=y.filter(function(e){return 0<=e.pts})).length){if(i||(v=s?t*c:y[0].pts),e.isAAC)for(var P=this.config.maxAudioFramesDrift,S=0,I=v;S<y.length;){var T,A=y[S];if((T=A.pts-I)<=-P*u)q.b.warn("Dropping 1 audio frame @ "+$(I,!0)+" ms due to "+$(T,!0)+" ms overlap."),y.splice(S,1);else if(P*u<=T&&T<J&&I){var O=Math.round(T/u);q.b.warn("Injecting "+O+" audio frames @ "+$(I,!0)+" ms due to "+$(I,!0)+" ms gap.");for(var k=0;k<O;k++){var C=Math.max(I,0);(n=F.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(q.b.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),n=A.unit.subarray()),y.splice(S,0,{unit:n,pts:C,dts:C}),I+=u,S++}A.pts=A.dts=I,I+=u,S++}else Math.abs(T),A.pts=A.dts=I,I+=u,S++}for(var w=y.length,x=0;w--;)x+=y[w].unit.byteLength;for(var E=0,L=y.length;E<L;E++){var M=y[E],R=M.unit,M=M.pts;if(void 0!==l)r.duration=Math.round((M-l)/h);else{var B=M-v,j=0;if(i&&e.isAAC&&B){if(0<B&&B<J)j=Math.round((M-v)/u),q.b.log($(B,!0)+" ms hole between AAC samples detected,filling it"),0<j&&(x+=j*(n=!(n=F.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))?R.subarray():n).length);else if(B<-12){q.b.log("drop overlapping AAC sample, expected/parsed/delta: "+$(v,!0)+" ms / "+$(M,!0)+" ms / "+$(-B,!0)+" ms"),x-=R.byteLength;continue}M=v}if(a=M,!(0<x))return;x+=f;try{o=new Uint8Array(x)}catch(e){return void this.observer.trigger(V.a.ERROR,{type:H.b.MUX_ERROR,details:H.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:x,reason:"fail allocating audio mdat "+x})}m||(new DataView(o.buffer).setUint32(0,x),o.set(W.types.mdat,4));for(var D=0;D<j;D++)(n=F.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(q.b.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),n=R.subarray()),o.set(n,f),f+=n.byteLength,r={size:n.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},b.push(r)}o.set(R,f);B=R.byteLength;f+=B,b.push(r={size:B,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}}),l=M}var _=0;if(2<=(w=b.length)&&(_=b[w-2].duration,r.duration=_),w){this.nextAudioPts=v=l+h*_,e.samples=b,d=m?new Uint8Array:W.moof(e.sequenceNumber++,a/h,e),e.samples=[];s=a/c,_=v/c,_={data1:d,data2:o,startPTS:s,endPTS:_,startDTS:s,endDTS:_,type:"audio",hasAudio:!0,hasVideo:!1,nb:w};return this.observer.trigger(V.a.FRAG_PARSING_DATA,_),_}return null}},i.remuxEmptyAudio=function(e,t,i,s){var r=e.inputTimeScale,n=r/(e.samplerate||r),o=this.nextAudioPts,a=(void 0!==o?o:s.startDTS*r)+this.It,r=s.endDTS*r+this.It,l=1024*n,c=Math.ceil((r-a)/l),d=F.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(q.b.warn("remux empty Audio"),d){for(var h=[],u=0;u<c;u++){var p=a+u*l;h.push({unit:d,pts:p,dts:p})}e.samples=h,this.remuxAudio(e,t,i)}else q.b.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},i.remuxID3=function(e){var t,i=e.samples.length,s=e.inputTimeScale,r=this.At,n=this.It;if(i){for(var o=0;o<i;o++)(t=e.samples[o]).pts=(t.pts-r)/s,t.dts=(t.dts-n)/s;this.observer.trigger(V.a.FRAG_PARSING_METADATA,{samples:e.samples})}e.samples=[]},i.remuxText=function(e){e.samples.sort(function(e,t){return e.pts-t.pts});var t,i=e.samples.length,s=e.inputTimeScale,r=this.At;if(i){for(var n=0;n<i;n++)(t=e.samples[n]).pts=(t.pts-r)/s;this.observer.trigger(V.a.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[]},i.Mt=function(e,t){var i;if(void 0===t)return e;for(i=t<e?-8589934592:8589934592;4294967296<Math.abs(e-t);)e+=i;return e},Z),Y=((i=X.prototype).destroy=function(){},i.resetTimeStamp=function(){},i.resetInitSegment=function(){},i.remux=function(e,t,i,s,r,n,o,a){var l=this.observer,c="";e&&(c+="audio"),t&&(c+="video"),l.trigger(V.a.FRAG_PARSING_DATA,{data1:a,startPTS:r,startDTS:r,type:c,hasAudio:!!e,hasVideo:!!t,nb:1,dropped:0}),l.trigger(V.a.FRAG_PARSED)},X),i=Object(r.a)();function X(e){this.observer=e}function Z(e,t,i,s){this.observer=e,this.config=t,this.typeSupported=i;i=navigator.userAgent;this.isSafari=s&&-1<s.indexOf("Apple")&&i&&!i.match("CriOS"),this.ISGenerated=!1}try{z=i.performance.now.bind(i.performance)}catch(e){q.b.debug("Unable to use Performance API on this environment"),z=i.Date.now}(i=ee.prototype).destroy=function(){var e=this.demuxer;e&&e.destroy()},i.push=function(e,i,s,r,n,o,a,l,c,d,h,u){var t,p,g=this;0<e.byteLength&&null!=i&&null!=i.key&&"AES-128"===i.method?(null==(t=this.decrypter)&&(t=this.decrypter=new m(this.observer,this.config)),p=z(),t.decrypt(e,i.key.buffer,i.iv.buffer,function(e){var t=z();g.observer.trigger(V.a.FRAG_DECRYPTED,{stats:{tstart:p,tdecrypt:t}}),g.pushDecrypted(new Uint8Array(e),i,new Uint8Array(s),r,n,o,a,l,c,d,h,u)})):this.pushDecrypted(new Uint8Array(e),i,new Uint8Array(s),r,n,o,a,l,c,d,h,u)},i.pushDecrypted=function(e,t,i,s,r,n,o,a,l,c,d,h){if(!(S=this.demuxer)||(o||a)&&!this.probe(e)){for(var u=this.observer,p=this.typeSupported,g=this.config,m=[{demux:x,remux:Q},{demux:A.a,remux:Y},{demux:T,remux:Q},{demux:E,remux:Q}],f=0,y=m.length;f<y;f++){var b=m[f],v=b.demux.probe;if(v(e)){var P=this.remuxer=new b.remux(u,g,p,this.vendor),S=new b.demux(u,P,g,p);this.probe=v;break}}if(!S)return void u.trigger(V.a.ERROR,{type:H.b.MEDIA_ERROR,details:H.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=S}var I=this.remuxer;(o||a)&&(S.resetInitSegment(i,s,r,c),I.resetInitSegment()),o&&(S.resetTimeStamp(h),I.resetTimeStamp(h)),"function"==typeof S.setDecryptData&&S.setDecryptData(t),S.append(e,n,l,d)},i=ee;function ee(e,t,i,s){this.observer=e,this.typeSupported=t,this.config=i,this.vendor=s}t.a=i},function(e,t,i){"use strict";var n=i(0),a=i(1),o=Math.pow(2,32)-1,i=((i=u.prototype).resetTimeStamp=function(e){this.initPTS=e},i.resetInitSegment=function(e,t,i,s){var r,n;e&&e.byteLength?(null==t&&(t="mp4a.40.5"),null==i&&(i="avc1.42e01e"),n={},(r=this.initData=u.parseInitSegment(e)).audio&&r.video?n.audiovideo={container:"video/mp4",codec:t+","+i,initSegment:s?e:null}:(r.audio&&(n.audio={container:"audio/mp4",codec:t,initSegment:s?e:null}),r.video&&(n.video={container:"video/mp4",codec:i,initSegment:s?e:null})),this.observer.trigger(a.a.FRAG_PARSING_INIT_SEGMENT,{tracks:n})):(t&&(this.audioCodec=t),i&&(this.videoCodec=i))},u.probe=function(e){return 0<u.findBox({data:e,start:0,end:Math.min(e.length,16384)},["moof"]).length},u.bin2str=function(e){return String.fromCharCode.apply(null,e)},u.readUint16=function(e,t){e.data&&(t+=e.start,e=e.data);t=e[t]<<8|e[t+1];return t<0?65536+t:t},u.readUint32=function(e,t){e.data&&(t+=e.start,e=e.data);t=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return t<0?4294967296+t:t},u.writeUint32=function(e,t,i){e.data&&(t+=e.start,e=e.data),e[t]=i>>24,e[t+1]=i>>16&255,e[t+2]=i>>8&255,e[t+3]=255&i},u.findBox=function(e,t){var i,s,r,n,o,a=[];if(e.data?(n=e.start,s=e.end,e=e.data):(n=0,s=e.byteLength),!t.length)return null;for(i=n;i<s;)o=1<(r=u.readUint32(e,i))?i+r:s,u.bin2str(e.subarray(i+4,i+8))===t[0]&&(1===t.length?a.push({data:e,start:i+8,end:o}):(r=u.findBox({data:e,start:i+8,end:o},t.slice(1))).length&&(a=a.concat(r))),i=o;return a},u.parseSegmentIndex=function(e){var t=u.findBox(e,["moov"])[0],t=t?t.end:null,i=0,s=u.findBox(e,["sidx"]);if(!s||!s[0])return null;var r=[],e=(s=s[0]).data[0],i=0===e?8:16,n=u.readUint32(s,i);i+=4,i+=0===e?8:16;var o=s.end+0,a=u.readUint16(s,i+=2);i+=2;for(var l=0;l<a;l++){var c=i,d=u.readUint32(s,c);c+=4;var h=2147483647&d;if(1==(2147483648&d)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");d=u.readUint32(s,c);c+=4,r.push({referenceSize:h,subsegmentDuration:d,info:{duration:d/n,start:o,end:o+h-1}}),o+=h,i=c+=4}return{earliestPresentationTime:0,timescale:n,version:e,referencesCount:a,references:r,moovEndOffset:t}},u.parseInitSegment=function(e){var r=[];return u.findBox(e,["moov","trak"]).forEach(function(e){var t,i,s=u.findBox(e,["tkhd"])[0];s&&(i=0===s.data[s.start]?12:20,t=u.readUint32(s,i),(s=u.findBox(e,["mdia","mdhd"])[0])&&(i=0===s.data[s.start]?12:20,s=u.readUint32(s,i),!(i=u.findBox(e,["mdia","hdlr"])[0])||(i={soun:"audio",vide:"video"}[u.bin2str(i.data.subarray(i.start+8,i.start+12))])&&((e=u.findBox(e,["mdia","minf","stbl","stsd"])).length&&(e=e[0],e=u.bin2str(e.data.subarray(e.start+12,e.start+16)),n.b.log("MP4Demuxer:"+i+":"+e+" found")),r[t]={timescale:s,type:i},r[i]={timescale:s,id:t})))}),r},u.getStartDTS=function(i,e){var e=u.findBox(e,["moof","traf"]),e=[].concat.apply([],e.map(function(t){return u.findBox(t,["tfhd"]).map(function(e){var e=u.readUint32(e,4),e=i[e].timescale||9e4;return u.findBox(t,["tfdt"]).map(function(e){var t=e.data[e.start],i=u.readUint32(e,4);return 1===t&&(i*=Math.pow(2,32),i+=u.readUint32(e,8)),i})[0]/e})})),e=Math.min.apply(null,e);return isFinite(e)?e:0},u.offsetStartDTS=function(i,e,r){u.findBox(e,["moof","traf"]).map(function(t){return u.findBox(t,["tfhd"]).map(function(e){var e=u.readUint32(e,4),s=i[e].timescale||9e4;u.findBox(t,["tfdt"]).map(function(e){var t=e.data[e.start],i=u.readUint32(e,4);0===t?u.writeUint32(e,4,i-r*s):(i*=Math.pow(2,32),i+=u.readUint32(e,8),i-=r*s,i=Math.max(i,0),t=Math.floor(i/(1+o)),i=Math.floor(i%(1+o)),u.writeUint32(e,4,t),u.writeUint32(e,8,i))})})})},i.append=function(e,t,i,s){var r=this.initData;r||(this.resetInitSegment(e,this.audioCodec,this.videoCodec,!1),r=this.initData);var n,o=this.initPTS;void 0===o&&(n=u.getStartDTS(r,e),this.initPTS=o=n-t,this.observer.trigger(a.a.INIT_PTS_FOUND,{initPTS:o})),u.offsetStartDTS(r,e,o),o=u.getStartDTS(r,e),this.remuxer.remux(r.audio,r.video,null,null,o,i,s,e)},i.destroy=function(){},u);function u(e,t){this.observer=e,this.remuxer=t}t.a=i},function(e,t,u){function n(i){var s={};function r(e){if(s[e])return s[e].exports;var t=s[e]={i:e,l:!1,exports:{}};return i[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.m=i,r.c=s,r.i=function(e){return e},r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},r.r=function(e){Object.defineProperty(e,"_",{value:!0})},r.n=function(e){var t=e&&e._?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r.oe=function(e){throw console.error(e),e};var e=r(r.s=ENTRY_MODULE);return e.default||e}var p="\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)";function g(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}e.exports=function(h,e){var i={main:u.m},s=(e=e||{}).all?{main:Object.keys(i.main)}:function(e){for(var t={main:[h]},i={main:[]},s={main:{}};function(i){return Object.keys(i).reduce(function(e,t){return e||0<i[t].length},!1)}(t);)for(var r=Object.keys(t),n=0;n<r.length;n++){var o=r[n],a=t[o].pop();if(s[o]=s[o]||{},!s[o][a]&&e[o][a]){s[o][a]=!0,i[o]=i[o]||[],i[o].push(a);for(var l=function(e,t,i){var s={};s[i]=[];var r=t.toString();if(!(t=r.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/)))return s;for(var n,t=t[1],o=new RegExp("(\\\\n|\\W)"+g(t)+p,"g");n=o.exec(r);)"dll-reference"!==n[3]&&s[i].push(n[3]);for(o=new RegExp("\\("+g(t)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)'+p,"g");n=o.exec(r);)e[n[2]]||(s[i].push(n[1]),e[n[2]]=u(n[1]).m),s[n[2]]=s[n[2]]||[],s[n[2]].push(n[4]);for(var a,l=Object.keys(s),c=0;c<l.length;c++)for(var d=0;d<s[l[c]].length;d++)a=s[l[c]][d],isNaN(+a)||(s[l[c]][d]=+s[l[c]][d]);return s}(e,e[o][a],o),c=Object.keys(l),d=0;d<c.length;d++)t[c[d]]=t[c[d]]||[],t[c[d]]=t[c[d]].concat(l[c[d]])}}return i}(i),r="";Object.keys(s).filter(function(e){return"main"!==e}).forEach(function(t){for(var e=0;s[t][e];)e++;s[t].push(e),i[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",r=r+"var "+t+" = ("+n.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+s[t].map(function(e){return JSON.stringify(e)+": "+i[t][e].toString()}).join(",")+"});\n"});var r=r+"new (("+n.toString().replace("ENTRY_MODULE",JSON.stringify(h))+")({"+s.main.map(function(e){return JSON.stringify(e)+": "+i.main[e].toString()}).join(",")+"}))(self);",t=new window.Blob([r],{type:"text/javascript"});if(e.bare)return t;e=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(t),t=new window.Worker(e);return t.objectURL=e,t}},function(e,t,i){"use strict";i.r(t);var o=i(9),a=i(1),l=i(0),c=i(8);t.default=function(s){var r=new c.EventEmitter;r.trigger=function(e){for(var t=arguments.length,i=new Array(1<t?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];r.emit.apply(r,[e,e].concat(i))},r.off=function(e){for(var t=arguments.length,i=new Array(1<t?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];r.removeListener.apply(r,[e].concat(i))};function n(e,t){s.postMessage({event:e,data:t})}s.addEventListener("message",function(e){var t=e.data;switch(t.cmd){case"init":var i=JSON.parse(t.config);s.demuxer=new o.a(r,t.typeSupported,i,t.vendor),Object(l.a)(i.debug),n("init",null);break;case"demux":s.demuxer.push(t.data,t.decryptdata,t.initSegment,t.audioCodec,t.videoCodec,t.timeOffset,t.discontinuity,t.trackSwitch,t.contiguous,t.duration,t.accurateTimeOffset,t.defaultInitPTS)}}),r.on(a.a.FRAG_DECRYPTED,n),r.on(a.a.FRAG_PARSING_INIT_SEGMENT,n),r.on(a.a.FRAG_PARSED,n),r.on(a.a.ERROR,n),r.on(a.a.FRAG_PARSING_METADATA,n),r.on(a.a.FRAG_PARSING_USERDATA,n),r.on(a.a.INIT_PTS_FOUND,n),r.on(a.a.FRAG_PARSING_DATA,function(e,t){var i=[],e={event:e,data:t};t.data1&&(e.data1=t.data1.buffer,i.push(t.data1.buffer),delete t.data1),t.data2&&(e.data2=t.data2.buffer,i.push(t.data2.buffer),delete t.data2),s.postMessage(e,i)})}},function(e,t,i){"use strict";i.r(t);var p,r,s=i(7),c=i(2),A=i(3),f=i(1),O=i(0),n={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},o=((_e=a.prototype).destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},_e.onHandlerDestroying=function(){},_e.onHandlerDestroyed=function(){},_e.isEventHandler=function(){return"object"==typeof this.handledEvents&&this.handledEvents.length&&"function"==typeof this.onEvent},_e.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){if(n[e])throw new Error("Forbidden event-name: "+e);this.hls.on(e,this.onEvent)},this)},_e.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){this.hls.off(e,this.onEvent)},this)},_e.onEvent=function(e,t){this.onEventGeneric(e,t)},_e.onEventGeneric=function(e,t){try{!function(e,t){var i="on"+e.replace("hls","");if("function"!=typeof this[i])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+i+")");return this[i].bind(this,t)}.call(this,e,t).call()}catch(t){O.b.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),this.hls.trigger(f.a.ERROR,{type:c.b.OTHER_ERROR,details:c.a.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}},a);function a(e){this.hls=void 0,this.handledEvents=void 0,this.useGenericHandler=void 0,this.hls=e,this.onEvent=this.onEvent.bind(this);for(var t=arguments.length,i=new Array(1<t?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];this.handledEvents=i,this.useGenericHandler=!0,this.registerListeners()}(Re=p=p||{}).MANIFEST="manifest",Re.LEVEL="level",Re.AUDIO_TRACK="audioTrack",Re.SUBTITLE_TRACK="subtitleTrack",(je=r=r||{}).MAIN="main",je.AUDIO="audio",je.SUBTITLE="subtitle";var l=i(10);var d,k=(W=[{key:"uri",get:function(){return!this.Et&&this.reluri&&(this.Et=Object(s.buildAbsoluteURL)(this.baseuri,this.reluri,{alwaysNormalize:!0})),this.Et}}],function(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}(h.prototype,W),h);function h(e,t){this.Et=null,this.baseuri=void 0,this.reluri=void 0,this.method=null,this.key=null,this.iv=null,this.baseuri=e,this.reluri=t}(Le=d=d||{}).AUDIO="audio",Le.VIDEO="video";var C=((_e=u.prototype).setByteRange=function(e,t){var i=e.split("@",2),e=[];1===i.length?e[0]=t?t.byteRangeEndOffset:0:e[0]=parseInt(i[1]),e[1]=parseInt(i[0])+e[0],this.Rt=e},_e.addElementaryStream=function(e){this.Dt[e]=!0},_e.hasElementaryStream=function(e){return!0===this.Dt[e]},_e.createInitializationVector=function(e){for(var t=new Uint8Array(16),i=12;i<16;i++)t[i]=e>>8*(15-i)&255;return t},_e.setDecryptDataFromLevelKey=function(e,t){var i=e;return e&&e.method&&e.uri&&!e.iv&&((i=new k(e.baseuri,e.reluri)).method=e.method,i.iv=this.createInitializationVector(t)),i},_e=[{key:"url",get:function(){return!this.Lt&&this.relurl&&(this.Lt=Object(s.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this.Lt},set:function(e){this.Lt=e}},{key:"byteRange",get:function(){return this.Rt||[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){return this.levelkey||this.Bt?(!this.Bt&&this.levelkey&&("number"!=typeof(e=this.sn)&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&O.b.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),e=0),this.Bt=this.setDecryptDataFromLevelKey(this.levelkey,e)),this.Bt):null;var e}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!Object(A.a)(this.programDateTime))return null;var e=Object(A.a)(this.duration)?this.duration:0;return this.programDateTime+1e3*e}},{key:"encrypted",get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)}}],function(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}(u.prototype,_e),u);function u(){var e;this.Lt=null,this.Rt=null,this.Bt=null,this.Dt=((e={})[d.AUDIO]=!1,e[d.VIDEO]=!1,e),this.deltaPTS=0,this.rawProgramDateTime=null,this.programDateTime=null,this.title=null,this.tagList=[],this.cc=void 0,this.type=void 0,this.relurl=void 0,this.baseurl=void 0,this.duration=void 0,this.start=void 0,this.sn=0,this.urlId=0,this.level=0,this.levelkey=void 0,this.loader=void 0}var w=(Re=[{key:"hasProgramDateTime",get:function(){return!(!this.fragments[0]||!Object(A.a)(this.fragments[0].programDateTime))}}],function(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}(v.prototype,Re),v),g=/^(\d+)x(\d+)$/,m=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,x=((je=b.prototype).decimalInteger=function(e){e=parseInt(this[e],10);return e>Number.MAX_SAFE_INTEGER?1/0:e},je.hexadecimalInteger=function(e){if(this[e]){for(var t=(1&(t=(this[e]||"0x").slice(2)).length?"0":"")+t,i=new Uint8Array(t.length/2),s=0;s<t.length/2;s++)i[s]=parseInt(t.slice(2*s,2*s+2),16);return i}return null},je.hexadecimalIntegerAsNumber=function(e){e=parseInt(this[e],16);return e>Number.MAX_SAFE_INTEGER?1/0:e},je.decimalFloatingPoint=function(e){return parseFloat(this[e])},je.enumeratedString=function(e){return this[e]},je.decimalResolution=function(e){e=g.exec(this[e]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},b.parseAttrList=function(e){var t,i={};for(m.lastIndex=0;null!==(t=m.exec(e));){var s=t[2];0===s.indexOf('"')&&s.lastIndexOf('"')===s.length-1&&(s=s.slice(1,-1)),i[t[1]]=s}return i},b),y={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};function b(e){for(var t in e="string"==typeof e?b.parseAttrList(e):e)e.hasOwnProperty(t)&&(this[t]=e[t])}function v(e){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=e,this.version=null}function P(e,t){return MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}var S=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,I=/#EXT-X-MEDIA:(.*)/g,E=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),L=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,M=/\.(mp4|m4s|m4v|m4a)$/i,T=(R.findGroup=function(e,t){for(var i=0;i<e.length;i++){var s=e[i];if(s.id===t)return s}},R.convertAVC1ToAVCOTI=function(e){var t,i=e.split(".");return 2<i.length?(t=i.shift()+".",t+=parseInt(i.shift()).toString(16),t+=("000"+parseInt(i.shift()).toString(16)).substr(-4)):t=e,t},R.resolve=function(e,t){return s.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},R.parseMasterPlaylist=function(e,t){var i=[];function s(s,r){["video","audio"].forEach(function(i){var e,t=s.filter(function(e){return t=e,!!(e=y[i])&&!0===e[t.slice(0,4)];var t});t.length&&(e=t.filter(function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)}),r[i+"Codec"]=(0<e.length?e:t)[0],s=s.filter(function(e){return-1===t.indexOf(e)}))}),r.unknownCodecs=s}for(S.lastIndex=0;null!=(o=S.exec(e));){var r={},n=r.attrs=new x(o[1]);r.url=R.resolve(o[2],t);var o=n.decimalResolution("RESOLUTION");o&&(r.width=o.width,r.height=o.height),r.bitrate=n.decimalInteger("AVERAGE-BANDWIDTH")||n.decimalInteger("BANDWIDTH"),r.name=n.NAME,s([].concat((n.CODECS||"").split(/[ ,]+/)),r),r.videoCodec&&-1!==r.videoCodec.indexOf("avc1")&&(r.videoCodec=R.convertAVC1ToAVCOTI(r.videoCodec)),i.push(r)}return i},R.parseMasterPlaylistMedia=function(e,t,i,s){void 0===s&&(s=[]);var r=[],n=0;for(I.lastIndex=0;null!==(o=I.exec(e));){var o,a=new x(o[1]);a.TYPE===i&&(o={id:n++,groupId:a["GROUP-ID"],name:a.NAME||a.LANGUAGE,type:i,default:"YES"===a.DEFAULT,autoselect:"YES"===a.AUTOSELECT,forced:"YES"===a.FORCED,lang:a.LANGUAGE},a.URI&&(o.url=R.resolve(a.URI,t)),s.length&&(a=R.findGroup(s,o.groupId),o.audioCodec=(a||s[0]).codec),r.push(o))}return r},R.parseLevelPlaylist=function(e,t,i,s,r){var n,o,a,l=0,c=0,d=new w(t),h=0,u=null,p=new C,g=null;for(E.lastIndex=0;null!==(n=E.exec(e));){var m=n[1];if(m){p.duration=parseFloat(m);var f=(" "+n[2]).slice(1);p.title=f||null,p.tagList.push(f?["INF",m,f]:["INF",m])}else if(n[3])Object(A.a)(p.duration)&&(y=l++,p.type=s,p.start=c,a&&(p.levelkey=a),p.sn=y,p.level=i,p.cc=h,p.urlId=r,p.baseurl=t,p.relurl=(" "+n[3]).slice(1),m=u,(y=p).rawProgramDateTime?y.programDateTime=Date.parse(y.rawProgramDateTime):m&&m.programDateTime&&(y.programDateTime=m.endProgramDateTime),Object(A.a)(y.programDateTime)||(y.programDateTime=null,y.rawProgramDateTime=null),d.fragments.push(p),c+=(u=p).duration,p=new C);else if(n[4]){var y=(" "+n[4]).slice(1);u?p.setByteRange(y,u):p.setByteRange(y)}else if(n[5])p.rawProgramDateTime=(" "+n[5]).slice(1),p.tagList.push(["PROGRAM-DATE-TIME",p.rawProgramDateTime]),null===g&&(g=d.fragments.length);else if(n=n[0].match(L)){for(o=1;o<n.length&&void 0===n[o];o++);var b=(" "+n[o+1]).slice(1),v=(" "+n[o+2]).slice(1);switch(n[o]){case"#":p.tagList.push(v?[b,v]:[b]);break;case"PLAYLIST-TYPE":d.type=b.toUpperCase();break;case"MEDIA-SEQUENCE":l=d.startSN=parseInt(b);break;case"TARGETDURATION":d.targetduration=parseFloat(b);break;case"VERSION":d.version=parseInt(b);break;case"EXTM3U":break;case"ENDLIST":d.live=!1;break;case"DIS":h++,p.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":h=parseInt(b);break;case"KEY":var P=new x(b),S=P.enumeratedString("METHOD"),I=P.URI,P=P.hexadecimalInteger("IV");S&&(a=new k(t,I),I&&0<=["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(S)&&(a.method=S,a.key=null,a.iv=P));break;case"START":var T=new x(b).decimalFloatingPoint("TIME-OFFSET");Object(A.a)(T)&&(d.startTimeOffset=T);break;case"MAP":T=new x(b);p.relurl=T.URI,T.BYTERANGE&&p.setByteRange(T.BYTERANGE),p.baseurl=t,p.level=i,p.type=s,p.sn="initSegment",d.initSegment=p,(p=new C).rawProgramDateTime=d.initSegment.rawProgramDateTime;break;default:O.b.warn("line parsed but not handled: "+n)}}else O.b.warn("No matches on slow regex match for level playlist!")}return(p=u)&&!p.relurl&&(d.fragments.pop(),c-=p.duration),d.totalduration=c,d.averagetargetduration=c/d.fragments.length,d.endSN=l-1,d.startCC=d.fragments[0]?d.fragments[0].cc:0,d.endCC=h,!d.initSegment&&d.fragments.length&&d.fragments.every(function(e){return M.test(e.relurl)})&&(O.b.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(p=new C).relurl=d.fragments[0].relurl,p.baseurl=t,p.level=i,p.type=s,p.sn="initSegment",d.initSegment=p,d.needSidxRanges=!0),g&&function(e,t){for(var i=e[t],s=t-1;0<=s;s--){var r=e[s];r.programDateTime=i.programDateTime-1e3*r.duration,i=r}}(d.fragments,g),d},R);function R(){}var B=window.performance,j=function(t){var e;function u(e){return(e=t.call(this,e,f.a.MANIFEST_LOADING,f.a.LEVEL_LOADING,f.a.AUDIO_TRACK_LOADING,f.a.SUBTITLE_TRACK_LOADING)||this).loaders={},e}i=t,(e=u).prototype=Object.create(i.prototype),(e.prototype.constructor=e).__proto__=i,u.canHaveQualityLevels=function(e){return e!==p.AUDIO_TRACK&&e!==p.SUBTITLE_TRACK},u.mapContextToLevelType=function(e){switch(e.type){case p.AUDIO_TRACK:return r.AUDIO;case p.SUBTITLE_TRACK:return r.SUBTITLE;default:return r.MAIN}},u.getResponseUrl=function(e,t){e=e.url;return e=void 0===e||0===e.indexOf("data:")?t.url:e};var i=u.prototype;return i.createInternalLoader=function(e){var t=this.hls.config,i=t.pLoader,s=t.loader,t=new(i||s)(t);return e.loader=t,this.loaders[e.type]=t},i.getInternalLoader=function(e){return this.loaders[e.type]},i.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},i.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},i.destroy=function(){this.destroyInternalLoaders(),t.prototype.destroy.call(this)},i.onManifestLoading=function(e){this.load({url:e.url,type:p.MANIFEST,level:0,id:null,responseType:"text"})},i.onLevelLoading=function(e){this.load({url:e.url,type:p.LEVEL,level:e.level,id:e.id,responseType:"text"})},i.onAudioTrackLoading=function(e){this.load({url:e.url,type:p.AUDIO_TRACK,level:null,id:e.id,responseType:"text"})},i.onSubtitleTrackLoading=function(e){this.load({url:e.url,type:p.SUBTITLE_TRACK,level:null,id:e.id,responseType:"text"})},i.load=function(e){var t,i,s,r,n=this.hls.config;if(O.b.debug("Loading playlist of type "+e.type+", level: "+e.level+", id: "+e.id),a=this.getInternalLoader(e)){var o=a.context;if(o&&o.url===e.url)return O.b.trace("playlist request ongoing"),!1;O.b.warn("aborting previous loader for type: "+e.type),a.abort()}switch(e.type){case p.MANIFEST:t=n.manifestLoadingMaxRetry,i=n.manifestLoadingTimeOut,s=n.manifestLoadingRetryDelay,r=n.manifestLoadingMaxRetryTimeout;break;case p.LEVEL:s=r=t=0,i=n.levelLoadingTimeOut;break;default:t=n.levelLoadingMaxRetry,i=n.levelLoadingTimeOut,s=n.levelLoadingRetryDelay,r=n.levelLoadingMaxRetryTimeout}var a=this.createInternalLoader(e),l={timeout:i,maxRetry:t,retryDelay:s,maxRetryDelay:r},o={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return O.b.debug("Calling internal loader delegate for URL: "+e.url),a.load(e,l,o),!0},i.loadsuccess=function(e,t,i,s){if(void 0===s&&(s=null),i.isSidxRequest)return this.Ft(e,i),void this.$t(e,t,i,s);if(this.resetInternalLoader(i.type),"string"!=typeof e.data)throw new Error('expected responseType of "text" for PlaylistLoader');var r=e.data;t.tload=B.now(),0===r.indexOf("#EXTM3U")?0<r.indexOf("#EXTINF:")||0<r.indexOf("#EXT-X-TARGETDURATION:")?this.Ut(e,t,i,s):this.Vt(e,t,i,s):this.Nt(e,i,"no EXTM3U delimiter",s)},i.loaderror=function(e,t,i){this.Ht(t,i=void 0===i?null:i,!1,e)},i.loadtimeout=function(e,t,i){this.Ht(t,i=void 0===i?null:i,!0)},i.Vt=function(e,t,i,s){var r,n,o=this.hls,a=e.data,l=u.getResponseUrl(e,i),c=T.parseMasterPlaylist(a,l);c.length?(r=c.map(function(e){return{id:e.attrs.AUDIO,codec:e.audioCodec}}),r=T.parseMasterPlaylistMedia(a,l,"AUDIO",r),a=T.parseMasterPlaylistMedia(a,l,"SUBTITLES"),r.length&&(n=!1,r.forEach(function(e){e.url||(n=!0)}),!1===n&&c[0].audioCodec&&!c[0].attrs.AUDIO&&(O.b.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),r.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1}))),o.trigger(f.a.MANIFEST_LOADED,{levels:c,audioTracks:r,subtitles:a,url:l,stats:t,networkDetails:s})):this.Nt(e,i,"no level found in manifest",s)},i.Ut=function(e,t,i,s){var r=this.hls,n=i.id,o=i.level,a=i.type,l=u.getResponseUrl(e,i),c=Object(A.a)(n)?n:0,d=Object(A.a)(o)?o:c,h=u.mapContextToLevelType(i),c=T.parseLevelPlaylist(e.data,l,d,h,c);c.tload=t.tload,a===p.MANIFEST&&r.trigger(f.a.MANIFEST_LOADED,{levels:[{url:l,details:c}],audioTracks:[],url:l,stats:t,networkDetails:s}),t.tparsed=B.now(),c.needSidxRanges?(l=c.initSegment.url,this.load({url:l,isSidxRequest:!0,type:a,level:o,levelDetails:c,id:n,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})):(i.levelDetails=c,this.$t(e,t,i,s))},i.Ft=function(e,t){if("string"==typeof e.data)throw new Error("sidx request must be made with responseType of array buffer");var i,s=l.a.parseSegmentIndex(new Uint8Array(e.data));s&&(e=s.references,i=t.levelDetails,e.forEach(function(e,t){e=e.info;!i||0===(t=i.fragments[t]).byteRange.length&&t.setByteRange(String(1+e.end-e.start)+"@"+String(e.start))}),i&&i.initSegment.setByteRange(String(s.moovEndOffset)+"@0"))},i.Nt=function(e,t,i,s){this.hls.trigger(f.a.ERROR,{type:c.b.NETWORK_ERROR,details:c.a.MANIFEST_PARSING_ERROR,fatal:!0,url:e.url,reason:i,networkDetails:s})},i.Ht=function(e,t,i,s){var r,n;void 0===i&&(i=!1),void 0===s&&(s=null),O.b.info("A network error occured while loading a "+e.type+"-type playlist");var o=this.getInternalLoader(e);switch(e.type){case p.MANIFEST:r=i?c.a.MANIFEST_LOAD_TIMEOUT:c.a.MANIFEST_LOAD_ERROR,n=!0;break;case p.LEVEL:r=i?c.a.LEVEL_LOAD_TIMEOUT:c.a.LEVEL_LOAD_ERROR,n=!1;break;case p.AUDIO_TRACK:r=i?c.a.AUDIO_TRACK_LOAD_TIMEOUT:c.a.AUDIO_TRACK_LOAD_ERROR,n=!1;break;default:n=!1}o&&(o.abort(),this.resetInternalLoader(e.type));t={type:c.b.NETWORK_ERROR,details:r,fatal:n,url:e.url,loader:o,context:e,networkDetails:t};s&&(t.response=s),this.hls.trigger(f.a.ERROR,t)},i.$t=function(e,t,i,s){var r=i.type,n=i.level,o=i.id,a=i.levelDetails;if(a&&a.targetduration)if(u.canHaveQualityLevels(i.type))this.hls.trigger(f.a.LEVEL_LOADED,{details:a,level:n||0,id:o||0,stats:t,networkDetails:s});else switch(r){case p.AUDIO_TRACK:this.hls.trigger(f.a.AUDIO_TRACK_LOADED,{details:a,id:o,stats:t,networkDetails:s});break;case p.SUBTITLE_TRACK:this.hls.trigger(f.a.SUBTITLE_TRACK_LOADED,{details:a,id:o,stats:t,networkDetails:s})}else this.Nt(e,i,"invalid target duration",s)},u}(o),D=function(s){var e;function t(e){return(e=s.call(this,e,f.a.FRAG_LOADING)||this).loaders={},e}i=s,(e=t).prototype=Object.create(i.prototype),(e.prototype.constructor=e).__proto__=i;var i=t.prototype;return i.destroy=function(){var e,t=this.loaders;for(e in t){var i=t[e];i&&i.destroy()}this.loaders={},s.prototype.destroy.call(this)},i.onFragLoading=function(e){var t=e.frag,i=t.type,s=this.loaders,r=this.hls.config,n=r.fLoader,o=r.loader;t.loaded=0,(e=s[i])&&(O.b.warn("abort previous fragment loader for type: "+i),e.abort());var e=s[i]=t.loader=new(r.fLoader?n:o)(r),n={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1},o=t.byteRangeStartOffset,t=t.byteRangeEndOffset;Object(A.a)(o)&&Object(A.a)(t)&&(n.rangeStart=o,n.rangeEnd=t),t={timeout:r.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:r.fragLoadingMaxRetryTimeout},r={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},e.load(n,t,r)},i.loadsuccess=function(e,t,i,s){void 0===s&&(s=null);e=e.data,i=i.frag;i.loader=void 0,this.loaders[i.type]=void 0,this.hls.trigger(f.a.FRAG_LOADED,{payload:e,frag:i,stats:t,networkDetails:s})},i.loaderror=function(e,t,i){void 0===i&&(i=null);var s=t.frag,r=s.loader;r&&r.abort(),this.loaders[s.type]=void 0,this.hls.trigger(f.a.ERROR,{type:c.b.NETWORK_ERROR,details:c.a.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:i})},i.loadtimeout=function(e,t,i){void 0===i&&(i=null);var s=t.frag,r=s.loader;r&&r.abort(),this.loaders[s.type]=void 0,this.hls.trigger(f.a.ERROR,{type:c.b.NETWORK_ERROR,details:c.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:i})},i.loadprogress=function(e,t,i,s){void 0===s&&(s=null);t=t.frag;t.loaded=e.loaded,this.hls.trigger(f.a.FRAG_LOAD_PROGRESS,{frag:t,stats:e,networkDetails:s})},t}(o),_=function(t){var e;function i(e){return(e=t.call(this,e,f.a.KEY_LOADING)||this).loaders={},e.decryptkey=null,e.decrypturl=null,e}s=t,(e=i).prototype=Object.create(s.prototype),(e.prototype.constructor=e).__proto__=s;var s=i.prototype;return s.destroy=function(){for(var e in this.loaders){e=this.loaders[e];e&&e.destroy()}this.loaders={},t.prototype.destroy.call(this)},s.onKeyLoading=function(e){var t,i=e.frag,s=i.type,r=this.loaders[s];i.decryptdata?(t=i.decryptdata.uri)!==this.decrypturl||null===this.decryptkey?(e=this.hls.config,r&&(O.b.warn("abort previous key loader for type:"+s),r.abort()),t?(i.loader=this.loaders[s]=new e.loader(e),this.decrypturl=t,this.decryptkey=null,s={url:t,frag:i,responseType:"arraybuffer"},t={timeout:e.fragLoadingTimeOut,maxRetry:0,retryDelay:e.fragLoadingRetryDelay,maxRetryDelay:e.fragLoadingMaxRetryTimeout},e={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},i.loader.load(s,t,e)):O.b.warn("key uri is falsy")):this.decryptkey&&(i.decryptdata.key=this.decryptkey,this.hls.trigger(f.a.KEY_LOADED,{frag:i})):O.b.warn("Missing decryption data on fragment in onKeyLoading")},s.loadsuccess=function(e,t,i){i=i.frag;i.decryptdata?(this.decryptkey=i.decryptdata.key=new Uint8Array(e.data),i.loader=void 0,delete this.loaders[i.type],this.hls.trigger(f.a.KEY_LOADED,{frag:i})):O.b.error("after key load, decryptdata unset")},s.loaderror=function(e,t){var i=t.frag,t=i.loader;t&&t.abort(),delete this.loaders[i.type],this.hls.trigger(f.a.ERROR,{type:c.b.NETWORK_ERROR,details:c.a.KEY_LOAD_ERROR,fatal:!1,frag:i,response:e})},s.loadtimeout=function(e,t){var i=t.frag,t=i.loader;t&&t.abort(),delete this.loaders[i.type],this.hls.trigger(f.a.ERROR,{type:c.b.NETWORK_ERROR,details:c.a.KEY_LOAD_TIMEOUT,fatal:!1,frag:i})},i}(o),F="NOT_LOADED",U="APPENDING",N="PARTIAL",V=function(i){var e;function t(e){var t;return(t=i.call(this,e,f.a.BUFFER_APPENDED,f.a.FRAG_BUFFERED,f.a.FRAG_LOADED)||this).bufferPadding=.2,t.fragments=Object.create(null),t.timeRanges=Object.create(null),t.config=e.config,t}s=i,(e=t).prototype=Object.create(s.prototype),(e.prototype.constructor=e).__proto__=s;var s=t.prototype;return s.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,o.prototype.destroy.call(this),i.prototype.destroy.call(this)},s.getBufferedFrag=function(t,i){var s=this.fragments,e=Object.keys(s).filter(function(e){e=s[e];if(e.body.type!==i)return!1;if(!e.buffered)return!1;e=e.body;return e.startPTS<=t&&t<=e.endPTS});if(0===e.length)return null;e=e.pop();return s[e].body},s.detectEvictedFragments=function(s,r){var n,o,a=this;Object.keys(this.fragments).forEach(function(e){var t=a.fragments[e];if(!0===t.buffered){e=t.range[s];if(e){n=e.time;for(var i=0;i<n.length;i++)if(o=n[i],!1===a.isTimeBuffered(o.startPTS,o.endPTS,r)){a.removeFragment(t.body);break}}}})},s.detectPartialFragments=function(i){var s=this,e=this.getFragmentKey(i),r=this.fragments[e];r&&(r.buffered=!0,Object.keys(this.timeRanges).forEach(function(e){var t;i.hasElementaryStream(e)&&(t=s.timeRanges[e],r.range[e]=s.getBufferedTimes(i.startPTS,i.endPTS,t))}))},s.getBufferedTimes=function(e,t,i){for(var s,r,n=[],o=!1,a=0;a<i.length;a++){if(s=i.start(a)-this.bufferPadding,r=i.end(a)+this.bufferPadding,s<=e&&t<=r){n.push({startPTS:Math.max(e,i.start(a)),endPTS:Math.min(t,i.end(a))});break}if(e<r&&s<t)n.push({startPTS:Math.max(e,i.start(a)),endPTS:Math.min(t,i.end(a))}),o=!0;else if(t<=s)break}return{time:n,partial:o}},s.getFragmentKey=function(e){return e.type+"_"+e.level+"_"+e.urlId+"_"+e.sn},s.getPartialFragment=function(t){var i,s,r=this,n=null,o=0;return Object.keys(this.fragments).forEach(function(e){e=r.fragments[e];r.isPartial(e)&&(i=e.body.startPTS-r.bufferPadding,s=e.body.endPTS+r.bufferPadding,i<=t&&t<=s&&(s=Math.min(t-i,s-t),o<=s&&(n=e.body,o=s)))}),n},s.getState=function(e){var t=this.getFragmentKey(e),e=this.fragments[t],t=F;return t=void 0!==e?e.buffered?!0===this.isPartial(e)?N:"OK":U:t},s.isPartial=function(e){return!0===e.buffered&&(void 0!==e.range.video&&!0===e.range.video.partial||void 0!==e.range.audio&&!0===e.range.audio.partial)},s.isTimeBuffered=function(e,t,i){for(var s,r,n=0;n<i.length;n++){if(s=i.start(n)-this.bufferPadding,r=i.end(n)+this.bufferPadding,s<=e&&t<=r)return!0;if(t<=s)return!1}return!1},s.onFragLoaded=function(e){e=e.frag;Object(A.a)(e.sn)&&!e.bitrateTest&&(this.fragments[this.getFragmentKey(e)]={body:e,range:Object.create(null),buffered:!1})},s.onBufferAppended=function(e){var i=this;this.timeRanges=e.timeRanges,Object.keys(this.timeRanges).forEach(function(e){var t=i.timeRanges[e];i.detectEvictedFragments(e,t)})},s.onFragBuffered=function(e){this.detectPartialFragments(e.frag)},s.hasFragment=function(e){e=this.getFragmentKey(e);return void 0!==this.fragments[e]},s.removeFragment=function(e){e=this.getFragmentKey(e);delete this.fragments[e]},s.removeAllFragments=function(){this.fragments=Object.create(null)},t}(o),H=function(e,t){for(var i,s,r=0,n=e.length-1;r<=n;){var o=t(s=e[i=(r+n)/2|0]);if(0<o)r=1+i;else{if(!(o<0))return s;n=i-1}}return null},q=(z.isBuffered=function(e,t){try{if(e)for(var i=e.buffered,s=0;s<i.length;s++)if(t>=i.start(s)&&t<=i.end(s))return!0}catch(e){}return!1},z.bufferInfo=function(e,t,i){try{if(e){for(var s=e.buffered,r=[],n=0;n<s.length;n++)r.push({start:s.start(n),end:s.end(n)});return this.bufferedInfo(r,t,i)}}catch(e){}return{len:0,start:t,end:t,nextStart:void 0}},z.bufferedInfo=function(e,t,i){e.sort(function(e,t){return e.start-t.start||t.end-e.end});var s=[];if(i)for(var r=0;r<e.length;r++){var n,o=s.length;o?(n=s[o-1].end,e[r].start-n<i?e[r].end>n&&(s[o-1].end=e[r].end):s.push(e[r])):s.push(e[r])}else s=e;for(var a,l=0,c=t,d=t,h=0;h<s.length;h++){var u=s[h].start,p=s[h].end;if(u<=t+i&&t<p)c=u,l=(d=p)-t;else if(t+i<u){a=u;break}}return{len:l,start:c,end:d,nextStart:a}},z),W=i(8),$=i(11),G=i(9);function z(){}function J(){return window.MediaSource||window.WebKitMediaSource}var K,Q=i(5),Y=(K=W.EventEmitter,Le=K,(_e=te).prototype=Object.create(Le.prototype),(_e.prototype.constructor=_e).__proto__=Le,te.prototype.trigger=function(e){for(var t=arguments.length,i=new Array(1<t?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];this.emit.apply(this,[e,e].concat(i))},te),X=J()||{isTypeSupported:function(){return!1}},Z=((Re=ee.prototype).destroy=function(){var e=this.w;e?(e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null):(t=this.demuxer)&&(t.destroy(),this.demuxer=null);var t=this.observer;t&&(t.removeAllListeners(),this.observer=null)},Re.push=function(e,t,i,s,r,n,o,a){var l=this.w,c=Object(A.a)(r.startPTS)?r.startPTS:r.start,d=r.decryptdata,h=this.frag,u=!(h&&r.cc===h.cc),p=!(h&&r.level===h.level),h=h&&r.sn===h.sn+1,h=!p&&h;u&&O.b.log(this.id+":discontinuity detected"),p&&O.b.log(this.id+":switch detected"),this.frag=r,l?l.postMessage({cmd:"demux",data:e,decryptdata:d,initSegment:t,audioCodec:i,videoCodec:s,timeOffset:c,discontinuity:u,trackSwitch:p,contiguous:h,duration:n,accurateTimeOffset:o,defaultInitPTS:a},e instanceof ArrayBuffer?[e]:[]):(l=this.demuxer)&&l.push(e,d,t,i,s,c,u,p,h,n,o,a)},Re.onWorkerMessage=function(e){var t=e.data,i=this.hls;switch(t.event){case"init":Object(Q.a)().URL.revokeObjectURL(this.w.objectURL);break;case f.a.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,i.trigger(t.event,t.data)}},ee);function ee(i,e){var s=this;this.hls=i,this.id=e;var t=this.observer=new Y,r=i.config,n=function(e,t){(t=t||{}).frag=s.frag,t.id=s.id,i.trigger(e,t)};t.on(f.a.FRAG_DECRYPTED,n),t.on(f.a.FRAG_PARSING_INIT_SEGMENT,n),t.on(f.a.FRAG_PARSING_DATA,n),t.on(f.a.FRAG_PARSED,n),t.on(f.a.ERROR,n),t.on(f.a.FRAG_PARSING_METADATA,n),t.on(f.a.FRAG_PARSING_USERDATA,n),t.on(f.a.INIT_PTS_FOUND,n);var o,a={mp4:X.isTypeSupported("video/mp4"),mpeg:X.isTypeSupported("audio/mpeg"),mp3:X.isTypeSupported('audio/mp4; codecs="mp3"')},n=navigator.vendor;if(r.enableWorker&&"undefined"!=typeof Worker){O.b.log("demuxing in webworker");try{o=this.w=$(12),this.onwmsg=this.onWorkerMessage.bind(this),o.addEventListener("message",this.onwmsg),o.onerror=function(e){i.trigger(f.a.ERROR,{type:c.b.OTHER_ERROR,details:c.a.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:e.message+" ("+e.filename+":"+e.lineno+")"}})},o.postMessage({cmd:"init",typeSupported:a,vendor:n,id:e,config:JSON.stringify(r)})}catch(i){O.b.warn("Error in worker:",i),O.b.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),o&&Object(Q.a)().URL.revokeObjectURL(o.objectURL),this.demuxer=new G.a(t,a,r,n),this.w=void 0}}else this.demuxer=new G.a(t,a,r,n)}function te(){return K.apply(this,arguments)||this}function ie(e,t,i){switch(t){case"audio":e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds.push(i);break;case"text":e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds.push(i)}}function se(e,t,i){var s=e[t],r=e[i],e=r.startPTS;Object(A.a)(e)?t<i?(s.duration=e-s.start,s.duration<0&&O.b.warn("negative duration computed for frag "+s.sn+",level "+s.level+", there should be some duration drift between playlist and fragment!")):(r.duration=s.start-e,r.duration<0&&O.b.warn("negative duration computed for frag "+r.sn+",level "+r.level+", there should be some duration drift between playlist and fragment!")):r.start=t<i?s.start+s.duration:Math.max(s.start-r.duration,0)}function re(e,t,i,s,r,n){var o=i;Object(A.a)(t.startPTS)&&(a=Math.abs(t.startPTS-i),Object(A.a)(t.deltaPTS)?t.deltaPTS=Math.max(a,t.deltaPTS):t.deltaPTS=a,o=Math.max(i,t.startPTS),i=Math.min(i,t.startPTS),s=Math.max(s,t.endPTS),r=Math.min(r,t.startDTS),n=Math.max(n,t.endDTS));var a=i-t.start;t.start=t.startPTS=i,t.maxStartPTS=o,t.endPTS=s,t.startDTS=r,t.endDTS=n,t.duration=s-i;var l,c,i=t.sn;if(!e||i<e.startSN||i>e.endSN)return 0;for(i=i-e.startSN,(l=e.fragments)[i]=t,c=i;0<c;c--)se(l,c,c-1);for(c=i;c<l.length-1;c++)se(l,c,c+1);return e.PTSKnown=!0,a}var ne=function(e){for(var t="",i=e.length,s=0;s<i;s++)t+="["+e.start(s).toFixed(3)+","+e.end(s).toFixed(3)+"]";return t};function oe(i,e){e.fragments.forEach(function(e){var t;e&&(t=e.start+i,e.start=e.startPTS=t,e.endPTS=t+e.duration)}),e.PTSKnown=!0}function ae(e,t,i){var s,r,n,o;s=e,r=i,e=!1,(e=!!((n=t)&&n.details&&r&&(r.endCC>r.startCC||s&&s.cc<r.startCC))||e)&&(o=function(){var e=n.details.fragments,t=r.fragments;if(t.length&&e.length){t=function(e,t){for(var i=null,s=0;s<e.length;s+=1){var r=e[s];if(r&&r.cc===t){i=r;break}}return i}(e,t[0].cc);if(t&&(!t||t.startPTS))return t;O.b.log("No frag in previous level to align on")}else O.b.log("No fragments to align")}())&&(O.b.log("Adjusting PTS using last level due to CC increase within current level"),oe(o.start,r)),!i.PTSKnown&&t&&(o=i,(i=t.details)&&i.fragments.length&&o.hasProgramDateTime&&i.hasProgramDateTime&&(t=i.fragments[0].programDateTime,i=(o.fragments[0].programDateTime-t)/1e3+i.fragments[0].start,Object(A.a)(i)&&(O.b.log("adjusting PTS using programDateTime delta, sliding:"+i.toFixed(3)),oe(i,o))))}function le(e,t,i){void 0===e&&(e=0),void 0===t&&(t=0);t=Math.min(t,i.duration+(i.deltaPTS||0));return i.start+i.duration-t<=e?1:i.start-t>e&&i.start?-1:0}var ce=((je=Pe.prototype).poll=function(e){var t=this.config,i=this.media,s=this.stalled,r=i.currentTime,n=i.seeking,o=this.seeking&&!n,a=!this.seeking&&n;if(this.seeking=n,r===e){if((a||o)&&(this.stalled=null),!i.paused&&!i.ended&&0!==i.playbackRate&&i.buffered.length){e=q.bufferInfo(i,r,0),a=0<e.len,o=e.nextStart||0;if(a||o){if(n){if(2<e.len||!o||2<o-r)return;this.moved=!1}if(!this.moved&&this.stalled){var l=Math.max(o,e.start||0)-r;if(0<l&&l<=2)return void this.qt(null)}o=self.performance.now();null!==s?(l=o-s,!n&&250<=l&&this.zt(e.len),t=q.bufferInfo(i,r,t.maxBufferHole),this.Wt(t,l)):this.stalled=o}}}else this.moved=!0,null!==s&&(this.stallReported&&(s=self.performance.now()-s,O.b.warn("playback not stuck anymore @"+r+", after "+Math.round(s)+"ms"),this.stallReported=!1),this.stalled=null,this.nudgeRetry=0)},je.Wt=function(e,t){var i=this.config,s=this.fragmentTracker,r=this.media.currentTime,r=s.getPartialFragment(r);r&&this.qt(r)||e.len>i.maxBufferHole&&t>1e3*i.highBufferWatchdogPeriod&&(O.b.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this.Gt())},je.zt=function(e){var t=this.hls,i=this.media;this.stallReported||(this.stallReported=!0,O.b.warn("Playback stalling at @"+i.currentTime+" due to low buffer"),t.trigger(f.a.ERROR,{type:c.b.MEDIA_ERROR,details:c.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:e}))},je.qt=function(e){for(var t=this.config,i=this.hls,s=this.media,r=s.currentTime,n=0,o=0;o<s.buffered.length;o++){var a=s.buffered.start(o);if(r+t.maxBufferHole>=n&&r<a){a=Math.max(a+.05,s.currentTime+.1);return O.b.warn("skipping hole, adjusting currentTime from "+r+" to "+a),this.moved=!0,this.stalled=null,s.currentTime=a,e&&i.trigger(f.a.ERROR,{type:c.b.MEDIA_ERROR,details:c.a.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+r+" to "+a,frag:e}),a}n=s.buffered.end(o)}return 0},je.Gt=function(){var e=this.config,t=this.hls,i=this.media,s=i.currentTime,r=(this.nudgeRetry||0)+1;(this.nudgeRetry=r)<e.nudgeMaxRetry?(r=s+r*e.nudgeOffset,O.b.warn("Nudging 'currentTime' from "+s+" to "+r),i.currentTime=r,t.trigger(f.a.ERROR,{type:c.b.MEDIA_ERROR,details:c.a.BUFFER_NUDGE_ON_STALL,fatal:!1})):(O.b.error("Playhead still not moving while enough data buffered @"+s+" after "+e.nudgeMaxRetry+" nudges"),t.trigger(f.a.ERROR,{type:c.b.MEDIA_ERROR,details:c.a.BUFFER_STALLED_ERROR,fatal:!0}))},Pe),de="STOPPED",he="IDLE",ue="KEY_LOADING",pe="FRAG_LOADING",ge="FRAG_LOADING_WAITING_RETRY",me="PARSING",fe="PARSED",ye="BUFFER_FLUSHING",be="ERROR",ve="WAITING_LEVEL";function Pe(e,t,i,s){this.config=e,this.media=t,this.fragmentTracker=i,this.hls=s,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1}var Se=function(s){var e;function t(e,t){var i;return(i=s.call(this,e,f.a.MEDIA_ATTACHED,f.a.MEDIA_DETACHING,f.a.MANIFEST_LOADING,f.a.MANIFEST_PARSED,f.a.LEVEL_LOADED,f.a.KEY_LOADED,f.a.FRAG_LOADED,f.a.FRAG_LOAD_EMERGENCY_ABORTED,f.a.FRAG_PARSING_INIT_SEGMENT,f.a.FRAG_PARSING_DATA,f.a.FRAG_PARSED,f.a.ERROR,f.a.AUDIO_TRACK_SWITCHING,f.a.AUDIO_TRACK_SWITCHED,f.a.BUFFER_CREATED,f.a.BUFFER_APPENDED,f.a.BUFFER_FLUSHED)||this).fragmentTracker=t,i.config=e.config,i.audioCodecSwap=!1,i.Jt=de,i.stallReported=!1,i.gapController=null,i.altAudio=!1,i}i=s,(e=t).prototype=Object.create(i.prototype),(e.prototype.constructor=e).__proto__=i;var i=t.prototype;return i.startLoad=function(e){var t,i,s;this.levels?(t=this.lastCurrentTime,i=this.hls,this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,this.startFragRequested||(-1===(s=i.startLevel)&&(this.bitrateTest=!(s=0)),this.level=i.nextLoadLevel=s,this.loadedmetadata=!1),0<t&&-1===e&&(O.b.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=he,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()):(this.forceStartLoad=!0,this.state=de)},i.stopLoad=function(){this.forceStartLoad=!1,s.prototype.stopLoad.call(this)},i.doTick=function(){switch(this.state){case ye:this.fragLoadError=0;break;case he:this.Qt();break;case ve:var e=this.levels[this.level];e&&e.details&&(this.state=he);break;case ge:var t=window.performance.now(),e=this.retryDate;(!e||e<=t||this.media&&this.media.seeking)&&(O.b.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=he)}this.Xt(),this.Yt()},i.Qt=function(){var e=this.hls,t=e.config,i=this.media;if(void 0!==this.levelLastLoaded&&(i||!this.startFragRequested&&t.startFragPrefetch)){var s=this.loadedmetadata?i.currentTime:this.nextLoadPosition,r=e.nextLoadLevel,n=this.levels[r];if(n){var o=n.bitrate,o=o?Math.max(8*t.maxBufferSize/o,t.maxBufferLength):t.maxBufferLength;o=Math.min(o,t.maxMaxBufferLength);i=q.bufferInfo(this.mediaBuffer||i,s,t.maxBufferHole),t=i.len;if(!(o<=t)){O.b.trace("buffer length of "+t.toFixed(3)+" is below max of "+o.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=r;n=n.details;if(!n||n.live&&this.levelLastLoaded!==r)this.state=ve;else{if(this.Kt(i,n)){r={};return this.altAudio&&(r.type="video"),this.hls.trigger(f.a.BUFFER_EOS,r),void(this.state="ENDED")}this.Zt(s,i,n)}}}}},i.Zt=function(e,t,i){var s=this.fragPrevious,r=this.level,n=i.fragments,o=n.length;if(0!==o){var a,l=n[0].start,c=n[o-1].start+n[o-1].duration,d=t.end;if(i.initSegment&&!i.initSegment.data)a=i.initSegment;else if(i.live){t=this.config.initialLiveManifestSize;if(o<t)return void O.b.warn("Can not start playback of a level, reason: not enough fragments "+o+" < "+t);if(null===(a=this.ti(i,d,l,c,s,n,o)))return}else d<l&&(a=n[0]);(a=a||this.ii(l,s,o,n,d,c,i))&&(a.encrypted?(O.b.log("Loading key for "+a.sn+" of ["+i.startSN+" ,"+i.endSN+"],level "+r),this.ei(a)):(O.b.log("Loading "+a.sn+" of ["+i.startSN+" ,"+i.endSN+"],level "+r+", currentTime:"+e.toFixed(3)+",bufferEnd:"+d.toFixed(3)),this.si(a)))}},i.ti=function(e,t,i,s,r,n,o){var a,l=this.hls.config,c=this.media,d=void 0!==l.liveMaxLatencyDuration?l.liveMaxLatencyDuration:l.liveMaxLatencyDurationCount*e.targetduration;return t<Math.max(i-l.maxFragLookUpTolerance,s-d)&&(t=i=this.liveSyncPosition=this.computeLivePosition(i,e),c&&!c.paused&&c.readyState&&c.duration>i&&i>c.currentTime&&(O.b.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+i.toFixed(3)),c.currentTime=i),this.nextLoadPosition=i),e.PTSKnown&&s<t&&c&&c.readyState?null:(this.startFragRequested&&!e.PTSKnown&&(r&&(e.hasProgramDateTime?(O.b.log("live playlist, switching playlist, load frag with same PDT: "+r.programDateTime),a=function(e,t,i){if(null===t||!Array.isArray(e)||!e.length||!Object(A.a)(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;i=i||0;for(var s,r,n,o=0;o<e.length;++o){var a=e[o];if(s=t,r=i,n=a,r=1e3*Math.min(i,n.duration+(n.deltaPTS||0)),(n.endProgramDateTime||0)-r>s)return a}return null}(n,r.endProgramDateTime,l.maxFragLookUpTolerance)):((l=r.sn+1)>=e.startSN&&l<=e.endSN&&(e=n[l-e.startSN],r.cc===e.cc&&O.b.log("live playlist, switching playlist, load frag with next SN: "+(a=e).sn)),a||(a=H(n,function(e){return r.cc-e.cc}))&&O.b.log("live playlist, switching playlist, load frag with same CC: "+a.sn))),a||(a=n[Math.min(o-1,Math.round(o/2))],O.b.log("live playlist, switching playlist, unknown, load middle frag : "+a.sn))),a)},i.ii=function(e,r,t,i,s,n,o){var a,l=this.hls.config;return(a=s<n?function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=0);var s=r?e[r.sn-e[0].sn+1]:null;return s&&!le(t,i,s)?s:H(e,le.bind(null,t,i))}(i,s,s>n-l.maxFragLookUpTolerance?0:l.maxFragLookUpTolerance):i[t-1])&&(s=a.sn-o.startSN,n=r&&a.level===r.level,t=i[s-1],i=i[1+s],r&&a.sn===r.sn&&(n&&!a.backtracked?a.sn<o.endSN?(o=r.deltaPTS)&&o>l.maxBufferHole&&r.dropped&&s?(a=t,O.b.warn("Previous fragment was dropped with large PTS gap between audio and video. Maybe fragment is not starting with a keyframe? Loading previous one to try to overcome this")):O.b.log("Re-loading fragment with SN: "+(a=i).sn):a=null:a.backtracked&&(i&&i.backtracked?(O.b.warn("Already backtracked from fragment "+i.sn+", will not backtrack to fragment "+a.sn+". Loading fragment "+i.sn),a=i):(O.b.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),a.dropped=0,t?(a=t).backtracked=!0:s&&(a=null))))),a},i.ei=function(e){this.state=ue,this.hls.trigger(f.a.KEY_LOADING,{frag:e})},i.si=function(e){var t=this.fragmentTracker.getState(e);"initSegment"!==(this.fragCurrent=e).sn&&(this.startFragRequested=!0),Object(A.a)(e.sn)&&!e.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),e.backtracked||t===F||t===N?(e.autoLevel=this.hls.autoLevelEnabled,e.bitrateTest=this.bitrateTest,this.hls.trigger(f.a.FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new Z(this.hls,"main")),this.state=pe):t===U&&this.ni(e.duration)&&this.fragmentTracker.removeFragment(e)},i.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,r.MAIN)},i.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.endPTS+.5):null},i.Yt=function(){var e,t,i=this.media;i&&i.readyState&&!1===i.seeking&&((e=i.currentTime)>this.lastCurrentTime&&(this.lastCurrentTime=e),q.isBuffered(i,e)?t=this.getBufferedFrag(e):q.isBuffered(i,e+.1)&&(t=this.getBufferedFrag(e+.1)),t)&&((e=t)!==this.fragPlaying&&(this.hls.trigger(f.a.FRAG_CHANGED,{frag:e}),t=e.level,this.fragPlaying&&this.fragPlaying.level===t||this.hls.trigger(f.a.LEVEL_SWITCHED,{level:t}),this.fragPlaying=e))},i.immediateLevelSwitch=function(){var e;O.b.log("immediateLevelSwitch"),this.immediateSwitch||(this.immediateSwitch=!0,(e=this.media)?(t=e.paused,e.pause()):t=!0,this.previouslyPaused=t);var t=this.fragCurrent;t&&t.loader&&t.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},i.immediateLevelSwitchEnd=function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,q.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())},i.nextLevelSwitch=function(){var e,t,i=this.media;i&&i.readyState&&((e=this.getBufferedFrag(i.currentTime))&&1<e.startPTS&&this.flushMainBuffer(0,e.startPTS-1),t=i.paused?0:(t=this.hls.nextLoadLevel,e=this.levels[t],(t=this.fragLastKbps)&&this.fragCurrent?this.fragCurrent.duration*e.bitrate/(1e3*t)+1:0),(i=this.getBufferedFrag(i.currentTime+t))&&(i=this.followingBufferedFrag(i))&&((t=this.fragCurrent)&&t.loader&&t.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(i.maxStartPTS,Number.POSITIVE_INFINITY)))},i.flushMainBuffer=function(e,t){this.state=ye;t={startOffset:e,endOffset:t};this.altAudio&&(t.type="video"),this.hls.trigger(f.a.BUFFER_FLUSHING,t)},i.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);e=this.config;this.levels&&e.autoStartLoad&&this.hls.startLoad(e.startPosition),this.gapController=new ce(e,t,this.fragmentTracker,this.hls)},i.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(O.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.backtracked=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.fragmentTracker.removeAllFragments(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},i.onMediaSeeked=function(){var e=this.media,e=e?e.currentTime:void 0;Object(A.a)(e)&&O.b.log("media seeked to "+e.toFixed(3)),this.tick()},i.onManifestLoading=function(){O.b.log("trigger BUFFER_RESET"),this.hls.trigger(f.a.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},i.onManifestParsed=function(e){var t,i=!1,s=!1;e.levels.forEach(function(e){(t=e.audioCodec)&&(-1!==t.indexOf("mp4a.40.2")&&(i=!0),-1!==t.indexOf("mp4a.40.5")&&(s=!0))}),this.audioCodecSwitch=i&&s,this.audioCodecSwitch&&O.b.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.altAudio=e.altAudio,this.levels=e.levels,this.startFragRequested=!1;e=this.config;(e.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(e.startPosition)},i.onLevelLoaded=function(e){var t=e.details,i=e.level,s=this.levels[this.levelLastLoaded],r=this.levels[i],n=t.totalduration,o=0;O.b.log("level "+i+" loaded ["+t.startSN+","+t.endSN+"],duration:"+n),t.live?(e=r.details)&&0<t.fragments.length?(function(r,l){l.initSegment&&r.initSegment&&(l.initSegment=r.initSegment);var c,d=0;if(function(e,t){if(e&&t)for(var i=Math.max(e.startSN,t.startSN)-t.startSN,s=Math.min(e.endSN,t.endSN)-t.startSN,r=t.startSN-e.startSN,n=i;n<=s;n++){var o=e.fragments[r+n],a=t.fragments[n];if(!o||!a)break;a=a,d=(o=o).cc-a.cc,Object(A.a)(o.startPTS)&&(a.start=a.startPTS=o.startPTS,a.endPTS=o.endPTS,a.duration=o.duration,a.backtracked=o.backtracked,a.dropped=o.dropped,c=a),l.PTSKnown=!0}}(r,l),l.PTSKnown){if(d){O.b.log("discontinuity sliding from playlist, take drift into account");for(var e=l.fragments,t=0;t<e.length;t++)e[t].cc+=d}c?re(l,c,c.startPTS,c.endPTS,c.startDTS,c.endDTS):function(){var e=l.startSN-r.startSN,t=r.fragments,i=l.fragments;if(!(e<0||e>t.length))for(var s=0;s<i.length;s++)i[s].start+=t[e].start}(),l.PTSKnown=r.PTSKnown}}(e,t),o=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(o,e),t.PTSKnown&&Object(A.a)(o)?O.b.log("live playlist sliding:"+o.toFixed(3)):(O.b.log("live playlist - outdated PTS, unknown sliding"),ae(this.fragPrevious,s,t))):(O.b.log("live playlist - first load, unknown sliding"),t.PTSKnown=!1,ae(this.fragPrevious,s,t)):t.PTSKnown=!1,r.details=t,this.levelLastLoaded=i,this.hls.trigger(f.a.LEVEL_UPDATED,{details:t,level:i}),!1===this.startFragRequested&&(-1!==this.startPosition&&-1!==this.lastCurrentTime||(i=t.startTimeOffset,Object(A.a)(i)?(i<0&&(O.b.log("negative start time offset "+i+", count from end of last fragment"),i=o+n+i),O.b.log("start time offset found in playlist, adjust startPosition to "+i),this.startPosition=i):t.live?(this.startPosition=this.computeLivePosition(o,t),O.b.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition),this.nextLoadPosition=this.startPosition),this.state===ve&&(this.state=he),this.tick()},i.onKeyLoaded=function(){this.state===ue&&(this.state=he,this.tick())},i.onFragLoaded=function(e){var t,i,s=this.fragCurrent,r=this.hls,n=this.levels,o=this.media,a=e.frag;this.state===pe&&s&&"main"===a.type&&a.level===s.level&&a.sn===s.sn&&(i=e.stats,n=(t=n[s.level]).details,this.bitrateTest=!1,this.stats=i,O.b.log("Loaded "+s.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+s.level),a.bitrateTest&&r.nextLoadLevel?(this.state=he,this.startFragRequested=!1,i.tparsed=i.tbuffered=window.performance.now(),r.trigger(f.a.FRAG_BUFFERED,{stats:i,frag:s,id:"main"}),this.tick()):"initSegment"===a.sn?(this.state=he,i.tparsed=i.tbuffered=window.performance.now(),n.initSegment.data=e.payload,r.trigger(f.a.FRAG_BUFFERED,{stats:i,frag:s,id:"main"}),this.tick()):(O.b.log("Parsing "+s.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+s.level+", cc "+s.cc),this.state=me,this.pendingBuffering=!0,this.appended=!1,a.bitrateTest&&(a.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:a})),i=!(o&&o.seeking)&&(n.PTSKnown||!n.live),a=n.initSegment?n.initSegment.data:[],o=this.ri(t),(this.demuxer=this.demuxer||new Z(this.hls,"main")).push(e.payload,a,o,t.videoCodec,s,n.totalduration,i))),this.fragLoadError=0},i.onFragParsingInitSegment=function(e){var t=this.fragCurrent,i=e.frag;if(t&&"main"===e.id&&i.sn===t.sn&&i.level===t.level&&this.state===me){var s,r,n=e.tracks;for(s in n.audio&&this.altAudio&&delete n.audio,(r=n.audio)&&(i=this.levels[this.level].audioCodec,t=navigator.userAgent.toLowerCase(),i&&this.audioCodecSwap&&(O.b.log("swapping playlist audio codec"),i=-1!==i.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==r.metadata.channelCount&&-1===t.indexOf("firefox")&&(i="mp4a.40.5"),-1!==t.indexOf("android")&&"audio/mpeg"!==r.container&&O.b.log("Android: force audio codec to "+(i="mp4a.40.2")),r.levelCodec=i,r.id=e.id),(r=n.video)&&(r.levelCodec=this.levels[this.level].videoCodec,r.id=e.id),this.hls.trigger(f.a.BUFFER_CODECS,n),n){r=n[s],O.b.log("main track:"+s+",container:"+r.container+",codecs[level/parsed]=["+r.levelCodec+"/"+r.codec+"]");var o=r.initSegment;o&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(f.a.BUFFER_APPENDING,{type:s,data:o,parent:"main",content:"initSegment"}))}this.tick()}},i.onFragParsingData=function(t){var i=this,e=this.fragCurrent,s=t.frag;if(e&&"main"===t.id&&s.sn===e.sn&&s.level===e.level&&("audio"!==t.type||!this.altAudio)&&this.state===me){var r=this.levels[this.level],s=e;if(Object(A.a)(t.endPTS)||(t.endPTS=t.startPTS+e.duration,t.endDTS=t.startDTS+e.duration),!0===t.hasAudio&&s.addElementaryStream(d.AUDIO),!0===t.hasVideo&&s.addElementaryStream(d.VIDEO),O.b.log("Parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb+",dropped:"+(t.dropped||0)),"video"===t.type)if(s.dropped=t.dropped,s.dropped)if(s.backtracked)O.b.warn("Already backtracked on this fragment, appending with the gap",s.sn);else{e=r.details;if(!e||s.sn!==e.startSN)return O.b.warn("missing video frame(s), backtracking fragment",s.sn),this.fragmentTracker.removeFragment(s),s.backtracked=!0,this.nextLoadPosition=t.startPTS,this.state=he,this.fragPrevious=s,void this.tick();O.b.warn("missing video frame(s) on first frag, appending with gap",s.sn)}else s.backtracked=!1;var s=re(r.details,s,t.startPTS,t.endPTS,t.startDTS,t.endDTS),n=this.hls;n.trigger(f.a.LEVEL_PTS_UPDATED,{details:r.details,level:this.level,drift:s,type:t.type,start:t.startPTS,end:t.endPTS}),[t.data1,t.data2].forEach(function(e){e&&e.length&&i.state===me&&(i.appended=!0,i.pendingBuffering=!0,n.trigger(f.a.BUFFER_APPENDING,{type:t.type,data:e,parent:"main",content:"data"}))}),this.tick()}},i.onFragParsed=function(e){var t=this.fragCurrent,i=e.frag;t&&"main"===e.id&&i.sn===t.sn&&i.level===t.level&&this.state===me&&(this.stats.tparsed=window.performance.now(),this.state=fe,this.ai())},i.onAudioTrackSwitching=function(e){var t,i=!!e.url,e=e.id;i||(this.mediaBuffer!==this.media&&(O.b.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media,(t=this.fragCurrent).loader&&(O.b.log("switching to main audio track, cancel main fragment load"),t.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=he),(t=this.hls).trigger(f.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),t.trigger(f.a.AUDIO_TRACK_SWITCHED,{id:e}),this.altAudio=!1)},i.onAudioTrackSwitched=function(e){var t=e.id,e=!!this.hls.audioTracks[t].url;!e||(t=this.videoBuffer)&&this.mediaBuffer!==t&&(O.b.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=t),this.altAudio=e,this.tick()},i.onBufferCreated=function(e){var t,i,s,r=e.tracks,n=!1;for(s in r){var o=r[s];"main"===o.id?(t=o,"video"===(i=s)&&(this.videoBuffer=r[s].buffer)):n=!0}n&&t?(O.b.log("alternate track found, use "+i+".buffered to schedule main fragment loading"),this.mediaBuffer=t.buffer):this.mediaBuffer=this.media},i.onBufferAppended=function(e){var t;"main"===e.parent&&((t=this.state)!==me&&t!==fe||(this.pendingBuffering=0<e.pending,this.ai()))},i.ai=function(){var e,t;this.state!==fe||this.appended&&this.pendingBuffering||((e=this.fragCurrent)&&(t=this.mediaBuffer||this.media,O.b.log("main buffered : "+ne(t.buffered)),this.fragPrevious=e,(t=this.stats).tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*t.total/(t.tbuffered-t.tfirst)),this.hls.trigger(f.a.FRAG_BUFFERED,{stats:t,frag:e,id:"main"}),this.state=he),this.tick())},i.onError=function(e){var t=e.frag||this.fragCurrent;if(!t||"main"===t.type){var i,s=!!this.media&&q.isBuffered(this.media,this.media.currentTime)&&q.isBuffered(this.media,this.media.currentTime+.5);switch(e.details){case c.a.FRAG_LOAD_ERROR:case c.a.FRAG_LOAD_TIMEOUT:case c.a.KEY_LOAD_ERROR:case c.a.KEY_LOAD_TIMEOUT:e.fatal||(this.fragLoadError+1<=this.config.fragLoadingMaxRetry?(i=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout),O.b.warn("mediaController: frag loading failed, retry in "+i+" ms"),this.retryDate=window.performance.now()+i,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=ge):(O.b.error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=be));break;case c.a.LEVEL_LOAD_ERROR:case c.a.LEVEL_LOAD_TIMEOUT:this.state!==be&&(e.fatal?(this.state=be,O.b.warn("streamController: "+e.details+",switch to "+this.state+" state ...")):e.levelRetry||this.state!==ve||(this.state=he));break;case c.a.BUFFER_FULL_ERROR:"main"!==e.parent||this.state!==me&&this.state!==fe||(s?(this.ni(this.config.maxBufferLength),this.state=he):(O.b.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},i.ni=function(e){var t=this.config;return t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,O.b.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},i.Xt=function(){var e=this.media;e&&0!==e.readyState&&(e=(this.mediaBuffer||e).buffered,!this.loadedmetadata&&e.length?(this.loadedmetadata=!0,this.oi()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,e))},i.onFragLoadEmergencyAborted=function(){this.state=he,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},i.onBufferFlushed=function(){var e=this.mediaBuffer||this.media;e&&this.fragmentTracker.detectEvictedFragments(d.VIDEO,e.buffered),this.state=he,this.fragPrevious=null},i.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},i.oi=function(){var e=this.media,t=e.currentTime,i=e.seeking?t:this.startPosition;t!==i&&0<=i&&(O.b.log("target start position not buffered, seek to buffered.start(0) "+i+" from current time "+t+" "),e.currentTime=i)},i.ri=function(e){e=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&(O.b.log("swapping playlist audio codec"),e=e&&(-1!==e.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),e},function(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}(t.prototype,[{key:"state",set:function(e){var t;this.state!==e&&(t=this.state,this.Jt=e,O.b.log("main stream-controller: "+t+"->"+e),this.hls.trigger(f.a.STREAM_STATE_TRANSITION,{previousState:t,nextState:e}))},get:function(){return this.Jt}},{key:"currentLevel",get:function(){var e=this.media;if(e){e=this.getBufferedFrag(e.currentTime);if(e)return e.level}return-1}},{key:"nextBufferedFrag",get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null}},{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"liveSyncPosition",get:function(){return this.ci},set:function(e){this.ci=e}}]),t}(function(e){var t;function i(){return e.apply(this,arguments)||this}s=e,(t=i).prototype=Object.create(s.prototype),(t.prototype.constructor=t).__proto__=s;var s=i.prototype;return s.doTick=function(){},s.startLoad=function(){},s.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragmentTracker.removeFragment(e)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=de},s.Kt=function(e,t){var i=this.fragCurrent,s=this.fragmentTracker;if(t.live||!i||i.backtracked||i.sn!==t.endSN||e.nextStart)return!1;i=s.getState(i);return i===N||"OK"===i},s.onMediaSeeking=function(){var e,t=this.config,i=this.media,s=this.mediaBuffer,r=this.state,n=i?i.currentTime:null,o=q.bufferInfo(s||i,n,this.config.maxBufferHole);Object(A.a)(n)&&O.b.log("media seeking to "+n.toFixed(3)),r===pe?(e=this.fragCurrent,0===o.len&&e&&(s=t.maxFragLookUpTolerance,t=e.start-s,s=e.start+e.duration+s,n<t||s<n?(e.loader&&(O.b.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),e.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=he):O.b.log("seeking outside of buffer but within currently loaded fragment range"))):"ENDED"===r&&(0===o.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state=he),i&&(this.lastCurrentTime=n),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=n),this.tick()},s.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},s.onHandlerDestroying=function(){this.stopLoad(),e.prototype.onHandlerDestroying.call(this)},s.onHandlerDestroyed=function(){this.state=de,this.fragmentTracker=null},s.computeLivePosition=function(e,t){var i=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-i)},i}(function(r){var e;function t(e){for(var t=arguments.length,i=new Array(1<t?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];return(e=r.call.apply(r,[this,e].concat(i))||this).ui=void 0,e.li=null,e.di=null,e.fi=0,e.ui=e.tick.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)),e}i=r,(e=t).prototype=Object.create(i.prototype),(e.prototype.constructor=e).__proto__=i;var i=t.prototype;return i.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},i.hasInterval=function(){return!!this.di},i.hasNextTick=function(){return!!this.li},i.setInterval=function(e){return!this.di&&(this.di=self.setInterval(this.ui,e),!0)},i.clearInterval=function(){return!!this.di&&(self.clearInterval(this.di),!(this.di=null))},i.clearNextTick=function(){return!!this.li&&(self.clearTimeout(this.li),!(this.li=null))},i.tick=function(){this.fi++,1===this.fi&&(this.doTick(),1<this.fi&&(this.clearNextTick(),this.li=self.setTimeout(this.ui,0)),this.fi=0)},i.doTick=function(){},t}(o)));window.performance;var Ie,Te=function(t){var e;function i(e){return(e=t.call(this,e,f.a.MANIFEST_LOADED,f.a.LEVEL_LOADED,f.a.AUDIO_TRACK_SWITCHED,f.a.FRAG_LOADED,f.a.ERROR)||this).canload=!1,e.currentLevelIndex=null,e.manualLevelIndex=-1,e.timer=null,Ie=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),e}s=t,(e=i).prototype=Object.create(s.prototype),(e.prototype.constructor=e).__proto__=s;var s=i.prototype;return s.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},s.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},s.startLoad=function(){var e=this.pi;this.canload=!0,this.levelRetryCount=0,e&&e.forEach(function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)}),null!==this.timer&&this.loadLevel()},s.stopLoad=function(){this.canload=!1},s.onManifestLoaded=function(e){var t,i=[],s=[],r={},n=null,o=!1,a=!1;if(e.levels.forEach(function(e){var t=e.attrs;e.loadError=0,e.fragmentError=!1,o=o||!!e.videoCodec,a=a||!!e.audioCodec,Ie&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),(n=r[e.bitrate])?n.url.push(e.url):(e.url=[e.url],e.urlId=0,r[e.bitrate]=e,i.push(e)),t&&(t.AUDIO&&(a=!0,ie(n||e,"audio",t.AUDIO)),t.SUBTITLES&&ie(n||e,"text",t.SUBTITLES))}),i=(i=o&&a?i.filter(function(e){return!!e.videoCodec}):i).filter(function(e){var t=e.audioCodec,e=e.videoCodec;return(!t||P(t,"audio"))&&(!e||P(e,"video"))}),e.audioTracks&&(s=e.audioTracks.filter(function(e){return!e.audioCodec||P(e.audioCodec,"audio")})).forEach(function(e,t){e.id=t}),0<i.length){t=i[0].bitrate,i.sort(function(e,t){return e.bitrate-t.bitrate}),this.pi=i;for(var l=0;l<i.length;l++)if(i[l].bitrate===t){this.bi=l,O.b.log("manifest loaded,"+i.length+" level(s) found, first bitrate:"+t);break}this.hls.trigger(f.a.MANIFEST_PARSED,{levels:i,audioTracks:s,firstLevel:this.bi,stats:e.stats,audio:a,video:o,altAudio:s.some(function(e){return!!e.url})})}else this.hls.trigger(f.a.ERROR,{type:c.b.MEDIA_ERROR,details:c.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},s.setLevelInternal=function(e){var t,i=this.pi,s=this.hls;0<=e&&e<i.length?(this.clearTimer(),this.currentLevelIndex!==e&&(O.b.log("switching to level "+e),(t=i[this.currentLevelIndex=e]).level=e,s.trigger(f.a.LEVEL_SWITCHING,t)),(i=(t=i[e]).details)&&!i.live||(i=t.urlId,s.trigger(f.a.LEVEL_LOADING,{url:t.url[i],level:e,id:i}))):s.trigger(f.a.ERROR,{type:c.b.OTHER_ERROR,details:c.a.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})},s.onError=function(e){if(e.fatal)e.type===c.b.NETWORK_ERROR&&this.clearTimer();else{var t,i=!1,s=!1;switch(e.details){case c.a.FRAG_LOAD_ERROR:case c.a.FRAG_LOAD_TIMEOUT:case c.a.KEY_LOAD_ERROR:case c.a.KEY_LOAD_TIMEOUT:t=e.frag.level,s=!0;break;case c.a.LEVEL_LOAD_ERROR:case c.a.LEVEL_LOAD_TIMEOUT:t=e.context.level,i=!0;break;case c.a.REMUX_ALLOC_ERROR:t=e.level,i=!0}void 0!==t&&this.recoverLevel(e,t,i,s)}},s.recoverLevel=function(e,t,i,s){var r=this,n=this.hls.config,o=e.details,a=this.pi[t];if(a.loadError++,a.fragmentError=s,i){if(!(this.levelRetryCount+1<=n.levelLoadingMaxRetry))return O.b.error("level controller, cannot recover from "+o+" error"),this.currentLevelIndex=null,this.clearTimer(),void(e.fatal=!0);n=Math.min(Math.pow(2,this.levelRetryCount)*n.levelLoadingRetryDelay,n.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return r.loadLevel()},n),e.levelRetry=!0,this.levelRetryCount++,O.b.warn("level controller, "+o+", retry in "+n+" ms, current retry count is "+this.levelRetryCount)}(i||s)&&(1<(i=a.url.length)&&a.loadError<i?(a.urlId=(a.urlId+1)%i,a.details=void 0,O.b.warn("level controller, "+o+" for level "+t+": switching to redundant URL-id "+a.urlId)):-1===this.manualLevelIndex?(t=0===t?this.pi.length-1:t-1,O.b.warn("level controller, "+o+": switch to "+t),this.hls.nextAutoLevel=this.currentLevelIndex=t):s&&(O.b.warn("level controller, "+o+": reload a fragment"),this.currentLevelIndex=null))},s.onFragLoaded=function(e){e=e.frag;void 0===e||"main"!==e.type||void 0!==(e=this.pi[e.level])&&(e.fragmentError=!1,e.loadError=0,this.levelRetryCount=0)},s.onLevelLoaded=function(e){var t,i,s=this,r=e.level,n=e.details;r===this.currentLevelIndex&&((i=this.pi[r]).fragmentError||(i.loadError=0,this.levelRetryCount=0),n.live?(t=i.details,r=n,i=e.stats.trequest,n=1e3*(r.averagetargetduration||r.targetduration),e=n/2,t&&r.endSN===t.endSN&&(n=e),i&&(n=Math.max(e,n-(window.performance.now()-i))),n=Math.round(n),O.b.log("live playlist, reload in "+Math.round(n)+" ms"),this.timer=setTimeout(function(){return s.loadLevel()},n)):this.clearTimer())},s.onAudioTrackSwitched=function(e){var t=this.hls.audioTracks[e.id].groupId,i=this.hls.levels[this.currentLevelIndex];if(i&&i.audioGroupIds){for(var s=-1,r=0;r<i.audioGroupIds.length;r++)if(i.audioGroupIds[r]===t){s=r;break}s!==i.urlId&&(i.urlId=s,this.startLoad())}},s.loadLevel=function(){var e,t,i;O.b.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload&&"object"==typeof(i=this.pi[this.currentLevelIndex])&&0<i.url.length&&(e=this.currentLevelIndex,t=i.urlId,i=i.url[t],O.b.log("Attempt loading level index "+e+" with URL-id "+t),this.hls.trigger(f.a.LEVEL_LOADING,{url:i,level:e,id:t}))},s=[{key:"levels",get:function(){return this.pi}},{key:"level",get:function(){return this.currentLevelIndex},set:function(e){var t=this.pi;t&&(e=Math.min(e,t.length-1),this.currentLevelIndex===e&&t[e].details||this.setLevelInternal(e))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this.vi&&(this.vi=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this.bi},set:function(e){this.bi=e}},{key:"startLevel",get:function(){if(void 0!==this.vi)return this.vi;var e=this.hls.config.startLevel;return void 0!==e?e:this.bi},set:function(e){this.vi=e}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}],function(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}(i.prototype,s),i}(o),Ae=i(4);var Oe=function(t){var e;function i(e){return(e=t.call(this,e,f.a.MEDIA_ATTACHED,f.a.MEDIA_DETACHING,f.a.FRAG_PARSING_METADATA,f.a.LIVE_BACK_BUFFER_REACHED)||this).id3Track=void 0,e.media=void 0,e}s=t,(e=i).prototype=Object.create(s.prototype),(e.prototype.constructor=e).__proto__=s;var s=i.prototype;return s.destroy=function(){o.prototype.destroy.call(this)},s.onMediaAttached=function(e){this.media=e.media,this.media},s.onMediaDetaching=function(){!function(e){if(e&&e.cues)for(;0<e.cues.length;)e.removeCue(e.cues[0])}(this.id3Track),this.id3Track=void 0,this.media=void 0},s.getID3Track=function(e){for(var t=0;t<e.length;t++){var i=e[t];if("metadata"===i.kind&&"id3"===i.label)return function(e,t){var i;try{i=new Event("addtrack")}catch(e){(i=document.createEvent("Event")).initEvent("addtrack",!1,!1)}i.track=e,t.dispatchEvent(i)}(i,this.media),i}return this.media.addTextTrack("metadata","id3")},s.onFragParsingMetadata=function(e){var t=e.frag,i=e.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var s=this.hls.config.cnxRenderWindow.WebKitDataCue||his.hls.config.cnxRenderWindow.VTTCue||his.hls.config.cnxRenderWindow.TextTrackCue,r=0;r<i.length;r++){var n=Ae.a.getID3Frames(i[r].data);if(n){var o=i[r].pts,a=r<i.length-1?i[r+1].pts:t.endPTS;o===a?a+=1e-4:a<o&&(O.b.warn("detected an id3 sample with endTime < startTime, adjusting endTime to (startTime + 0.25)"),a=o+.25);for(var l=0;l<n.length;l++){var c,d=n[l];Ae.a.isTimeStampFrame(d)||((c=new s(o,a,"")).value=d,this.id3Track.addCue(c))}}}},s.onLiveBackBufferReached=function(e){var e=e.bufferEnd,t=this.id3Track;if(t&&t.cues&&t.cues.length){var i=function(e,t){if(t<e[0].endTime)return e[0];if(t>e[e.length-1].endTime)return e[e.length-1];for(var i=0,s=e.length-1;i<=s;){var r=Math.floor((s+i)/2);if(t<e[r].endTime)s=r-1;else{if(!(t>e[r].endTime))return e[r];i=r+1}}return e[i].endTime-t<t-e[s].endTime?e[i]:e[s]}(t.cues,e);if(i)for(;t.cues[0]!==i;)t.removeCue(t.cues[0])}},i}(o),ke=((W=xe.prototype).sample=function(e,t){var i=Math.pow(this.alpha_,e);this.estimate_=t*(1-i)+i*this.estimate_,this.totalWeight_+=e},W.getTotalWeight=function(){return this.totalWeight_},W.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_},xe),Ce=((_e=we.prototype).sample=function(e,t){e=(e=Math.max(e,this.minDelayMs_))/1e3,t=8*t/e;this.fast_.sample(e,t),this.slow_.sample(e,t)},_e.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},_e.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},_e.destroy=function(){},we);function we(e,t,i,s){this.hls=void 0,this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.hls=e,this.defaultEstimate_=s,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new ke(t),this.fast_=new ke(i)}function xe(e){this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}var Ee=window.performance,Le=function(i){var e;function t(e){var t;return(t=i.call(this,e,f.a.FRAG_LOADING,f.a.FRAG_LOADED,f.a.FRAG_BUFFERED,f.a.ERROR)||this).lastLoadedFragLevel=0,t.mi=-1,t.hls=e,t.timer=null,t.bwEstimator=null,t.onCheck=t.gi.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)),t}s=i,(e=t).prototype=Object.create(s.prototype),(e.prototype.constructor=e).__proto__=s;var s=t.prototype;return s.destroy=function(){this.clearTimer(),o.prototype.destroy.call(this)},s.onFragLoading=function(e){var t,i,s=e.frag;"main"!==s.type||(this.timer||(this.fragCurrent=s,this.timer=setInterval(this.onCheck,100)),this.bwEstimator)||(e=(i=this.hls).config,s=s.level,s=i.levels[s].details.live?(t=e.abrEwmaFastLive,e.abrEwmaSlowLive):(t=e.abrEwmaFastVoD,e.abrEwmaSlowVoD),this.bwEstimator=new Ce(i,s,t,e.abrEwmaDefaultEstimate))},s.gi=function(){var e=this.hls,t=e.media,i=this.fragCurrent;if(i){var s=i.loader,r=e.minAutoLevel;if(!s||s.stats&&s.stats.aborted)return O.b.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this.mi=-1);var n=s.stats;if(t&&n&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&i.autoLevel&&i.level){var o=Ee.now()-n.trequest,a=Math.abs(t.playbackRate);if(o>500*i.duration/a){var l=e.levels,c=Math.max(1,n.bw?n.bw/8:1e3*n.loaded/o),d=l[i.level],h=d.realBitrate?Math.max(d.realBitrate,d.bitrate):d.bitrate,d=n.total||Math.max(n.loaded,Math.round(i.duration*h/8)),h=t.currentTime,d=(d-n.loaded)/c,u=(q.bufferInfo(t,h,e.config.maxBufferHole).end-h)/a;if(u<2*i.duration/a&&u<d){for(var p=i.level-1;r<p;p--){var g=l[p].realBitrate?Math.max(l[p].realBitrate,l[p].bitrate):l[p].bitrate;if(i.duration*g/(6.4*c)<u)break}void 0<d&&(O.b.warn("loading too slow, abort fragment loading and switch to level "+p+":fragLoadedDelay["+p+"]<fragLoadedDelay["+(i.level-1)+"];bufferStarvationDelay:"+(void 0).toFixed(1)+"<"+d.toFixed(1)+":"+u.toFixed(1)),e.nextLoadLevel=p,this.bwEstimator.sample(o,n.loaded),s.abort(),this.clearTimer(),e.trigger(f.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:i,stats:n}))}}}}},s.onFragLoaded=function(e){var t,i,s=e.frag;"main"===s.type&&Object(A.a)(s.sn)&&(this.clearTimer(),this.lastLoadedFragLevel=s.level,this.mi=-1,this.hls.config.abrMaxWithRealBitrate&&(s=((t=this.hls.levels[s.level]).loaded?t.loaded.bytes:0)+e.stats.loaded,i=(t.loaded?t.loaded.duration:0)+e.frag.duration,t.loaded={bytes:s,duration:i},t.realBitrate=Math.round(8*s/i)),e.frag.bitrateTest&&((i=e.stats).tparsed=i.tbuffered=i.tload,this.onFragBuffered(e)))},s.onFragBuffered=function(e){var t=e.stats,i=e.frag;!0===t.aborted||"main"!==i.type||!Object(A.a)(i.sn)||i.bitrateTest&&t.tload!==t.tbuffered||(e=t.tparsed-t.trequest,O.b.log("latency/loading/parsing/append/kbps:"+Math.round(t.tfirst-t.trequest)+"/"+Math.round(t.tload-t.tfirst)+"/"+Math.round(t.tparsed-t.tload)+"/"+Math.round(t.tbuffered-t.tparsed)+"/"+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this.bwEstimator.sample(e,t.loaded),t.bwEstimate=this.bwEstimator.getEstimate(),i.bitrateTest?this.bitrateTestDelay=e/1e3:this.bitrateTestDelay=0)},s.onError=function(e){switch(e.details){case c.a.FRAG_LOAD_ERROR:case c.a.FRAG_LOAD_TIMEOUT:this.clearTimer()}},s.clearTimer=function(){clearInterval(this.timer),this.timer=null},s.yi=function(e,t,i,s,r,n,o,a,l){for(var c=r;s<=c;c--){var d=l[c];if(d){var h=d.details,u=h?h.totalduration/h.fragments.length:t,p=!!h&&h.live,g=c<=e?o*i:a*i,d=l[c].realBitrate?Math.max(l[c].realBitrate,l[c].bitrate):l[c].bitrate,h=d*u/g;if(O.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+c+"/"+Math.round(g)+"/"+d+"/"+u+"/"+n+"/"+h),d<g&&(!h||p&&!this.bitrateTestDelay||h<n))return c}}return-1},s=[{key:"nextAutoLevel",get:function(){var e=this.mi,t=this.bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;t=this.nextABRAutoLevel;return t=-1!==e?Math.min(e,t):t},set:function(e){this.mi=e}},{key:"nextABRAutoLevel",get:function(){var e=this.hls,t=e.maxAutoLevel,i=e.levels,s=e.config,r=e.minAutoLevel,n=e.media,o=this.lastLoadedFragLevel,a=this.fragCurrent?this.fragCurrent.duration:0,l=n?n.currentTime:0,c=n&&0!==n.playbackRate?Math.abs(n.playbackRate):1,d=this.bwEstimator?this.bwEstimator.getEstimate():s.abrEwmaDefaultEstimate,h=(q.bufferInfo(n,l,s.maxBufferHole).end-l)/c,u=this.yi(o,a,d,r,t,h,s.abrBandWidthFactor,s.abrBandWidthUpFactor,i);if(0<=u)return u;O.b.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");e=a?Math.min(a,s.maxStarvationDelay):s.maxStarvationDelay,n=s.abrBandWidthFactor,l=s.abrBandWidthUpFactor;return 0!=h||(c=this.bitrateTestDelay)&&(e=(a?Math.min(a,s.maxLoadingDelay):s.maxLoadingDelay)-c,O.b.trace("bitrate test took "+Math.round(1e3*c)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*e)+" ms"),n=l=1),u=this.yi(o,a,d,r,t,h+e,n,l,i),Math.max(u,0)}}],function(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}(t.prototype,s),t}(o),Me=J(),Re=function(t){var e;function i(e){var o;return(o=t.call(this,e,f.a.MEDIA_ATTACHING,f.a.MEDIA_DETACHING,f.a.MANIFEST_PARSED,f.a.BUFFER_RESET,f.a.BUFFER_APPENDING,f.a.BUFFER_CODECS,f.a.BUFFER_EOS,f.a.BUFFER_FLUSHING,f.a.LEVEL_PTS_UPDATED,f.a.LEVEL_UPDATED)||this).wi=null,o.xi=null,o.Si=10,o.Oi=null,o.ki=null,o._i=!1,o.ji=!1,o.config=void 0,o.audioTimestampOffset=void 0,o.bufferCodecEventsExpected=0,o.Ai=0,o.media=null,o.mediaSource=null,o.segments=[],o.parent=void 0,o.appending=!1,o.appended=0,o.appendError=0,o.flushBufferCounter=0,o.tracks={},o.pendingTracks={},o.sourceBuffer={},o.flushRange=[],o.Ii=function(){O.b.log("media source opened"),o.hls.trigger(f.a.MEDIA_ATTACHED,{media:o.media});var e=o.mediaSource;e&&e.removeEventListener("sourceopen",o.Ii),o.checkPendingTracks()},o.Ci=function(){O.b.log("media source closed")},o.Ti=function(){O.b.log("media source ended")},o.Pi=function(){o.audioTimestampOffset&&o.sourceBuffer.audio&&(t=o.sourceBuffer.audio,O.b.warn("change mpeg audio timestamp offset from "+t.timestampOffset+" to "+o.audioTimestampOffset),t.timestampOffset=o.audioTimestampOffset,delete o.audioTimestampOffset),o._i&&o.doFlush(),o.ji&&o.checkEos(),o.appending=!1;var e,i=o.parent,t=o.segments.reduce(function(e,t){return t.parent===i?e+1:e},0),s={},r=o.sourceBuffer;for(e in r){var n=r[e];if(!n)throw Error("handling source buffer update end error: source buffer for "+e+" uninitilized and unable to update buffered TimeRanges.");s[e]=n.buffered}o.hls.trigger(f.a.BUFFER_APPENDED,{parent:i,pending:t,timeRanges:s}),o._i||o.doAppending(),o.updateMediaElementDuration(),0===t&&o.flushLiveBackBuffer()},o.Mi=function(e){O.b.error("sourceBuffer error:",e),o.hls.trigger(f.a.ERROR,{type:c.b.MEDIA_ERROR,details:c.a.BUFFER_APPENDING_ERROR,fatal:!1})},o.config=e.config,o}s=t,(e=i).prototype=Object.create(s.prototype),(e.prototype.constructor=e).__proto__=s;var s=i.prototype;return s.destroy=function(){o.prototype.destroy.call(this)},s.onLevelPtsUpdated=function(e){var t=e.type,i=this.tracks.audio;if("audio"===t&&i&&"audio/mpeg"===i.container){t=this.sourceBuffer.audio;if(!t)throw Error("Level PTS Updated and source buffer for audio uninitalized");if(.1<Math.abs(t.timestampOffset-e.start)){i=t.updating;try{t.abort()}catch(e){O.b.warn("can not abort audio buffer: "+e)}i?this.audioTimestampOffset=e.start:(O.b.warn("change mpeg audio timestamp offset from "+t.timestampOffset+" to "+e.start),t.timestampOffset=e.start)}}},s.onManifestParsed=function(e){this.bufferCodecEventsExpected=this.Ai=e.altAudio?2:1,O.b.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},s.onMediaAttaching=function(e){var t=this.media=e.media;t&&Me&&((e=this.mediaSource=new Me).addEventListener("sourceopen",this.Ii),e.addEventListener("sourceended",this.Ti),e.addEventListener("sourceclose",this.Ci),t.src=window.URL.createObjectURL(e),this.ki=t.src)},s.onMediaDetaching=function(){O.b.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){O.b.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this.Ii),e.removeEventListener("sourceended",this.Ti),e.removeEventListener("sourceclose",this.Ci),this.media&&(this.ki&&this.hls.config.cnxRenderWindow.URL.revokeObjectURL(this.ki),this.media.src===this.ki?(this.media.removeAttribute("src"),this.media.load()):O.b.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this.ki=null,this.bufferCodecEventsExpected=this.Ai,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.hls.trigger(f.a.MEDIA_DETACHED)},s.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.pendingTracks,i=Object.keys(t).length;(i&&!e||2===i)&&(this.createSourceBuffers(t),this.pendingTracks={},this.doAppending())},s.onBufferReset=function(){var e,t=this.sourceBuffer;for(e in t){var i=t[e];try{i&&(this.mediaSource&&this.mediaSource.removeSourceBuffer(i),i.removeEventListener("updateend",this.Pi),i.removeEventListener("error",this.Mi))}catch(t){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},s.onBufferCodecs=function(t){var i=this;Object.keys(this.sourceBuffer).length||(Object.keys(t).forEach(function(e){i.pendingTracks[e]=t[e]}),this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},s.createSourceBuffers=function(e){var t,i=this.sourceBuffer,s=this.mediaSource;if(!s)throw Error("createSourceBuffers called when mediaSource was null");for(t in e)if(!i[t]){var r=e[t];if(!r)throw Error("source buffer exists for track "+t+", however track does not");var n=r.levelCodec||r.codec,o=r.container+";codecs="+n;O.b.log("creating sourceBuffer("+o+")");try{var a=i[t]=s.addSourceBuffer(o);a.addEventListener("updateend",this.Pi),a.addEventListener("error",this.Mi),this.tracks[t]={buffer:a,codec:n,id:r.id,container:r.container,levelCodec:r.levelCodec}}catch(e){O.b.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(f.a.ERROR,{type:c.b.MEDIA_ERROR,details:c.a.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:o})}}this.hls.trigger(f.a.BUFFER_CREATED,{tracks:this.tracks})},s.onBufferAppending=function(e){this._i||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())},s.onBufferEos=function(e){for(var t in this.sourceBuffer){var i;e.type&&e.type!==t||(i=this.sourceBuffer[t])&&!i.ended&&(i.ended=!0,O.b.log(t+" sourceBuffer now EOS"))}this.checkEos()},s.checkEos=function(){var e=this.sourceBuffer,t=this.mediaSource;if(t&&"open"===t.readyState){for(var i in e){i=e[i];if(i){if(!i.ended)return;if(i.updating)return void(this.ji=!0)}}O.b.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(e){O.b.warn("exception while calling mediaSource.endOfStream()")}this.ji=!1}else this.ji=!1},s.onBufferFlushing=function(e){e.type?this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}):(this.flushRange.push({start:e.startOffset,end:e.endOffset,type:"video"}),this.flushRange.push({start:e.startOffset,end:e.endOffset,type:"audio"})),this.flushBufferCounter=0,this.doFlush()},s.flushLiveBackBuffer=function(){if(this.Oi){var e=this.config.liveBackBufferLength;if(isFinite(e)&&!(e<0))if(this.media)for(var t=this.media.currentTime,i=this.sourceBuffer,s=Object.keys(i),r=t-Math.max(e,this.Si),n=s.length-1;0<=n;n--){var o,a=s[n],l=i[a];!l||0<(o=l.buffered).length&&r>o.start(0)&&this.removeBufferRange(a,l,0,r)&&this.hls.trigger(f.a.LIVE_BACK_BUFFER_REACHED,{bufferEnd:r})}else O.b.error("flushLiveBackBuffer called without attaching media")}},s.onLevelUpdated=function(e){e=e.details;0<e.fragments.length&&(this.xi=e.totalduration+e.fragments[0].start,this.Si=e.averagetargetduration||e.targetduration||10,this.Oi=e.live,this.updateMediaElementDuration())},s.updateMediaElementDuration=function(){var e,t=this.config;if(null!==this.xi&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var i in this.sourceBuffer){i=this.sourceBuffer[i];if(i&&!0===i.updating)return}e=this.media.duration,null===this.wi&&(this.wi=this.mediaSource.duration),!0===this.Oi&&!0===t.liveDurationInfinity?(O.b.log("Media Source duration is set to Infinity"),this.wi=this.mediaSource.duration=1/0):(this.xi>this.wi&&this.xi>e||!Object(A.a)(e))&&(O.b.log("Updating Media Source duration to "+this.xi.toFixed(3)),this.wi=this.mediaSource.duration=this.xi)}},s.doFlush=function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._i=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._i=!1;var t=0,i=this.sourceBuffer;try{for(var s in i){var r=i[s];r&&(t+=r.buffered.length)}}catch(e){O.b.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(f.a.BUFFER_FLUSHED)}},s.doAppending=function(){var e=this.config,t=this.hls,i=this.segments,s=this.sourceBuffer;if(Object.keys(s).length){if(!this.media||this.media.error)return this.segments=[],void O.b.error("trying to append although a media error occured, flush segment and abort");if(!this.appending){var r=i.shift();if(r)try{var n=s[r.type];n?n.updating?i.unshift(r):(n.ended=!1,this.parent=r.parent,n.appendBuffer(r.data),this.appendError=0,this.appended++,this.appending=!0):this.Pi()}catch(s){O.b.error("error while trying to append buffer:"+s.message),i.unshift(r);r={type:c.b.MEDIA_ERROR,parent:r.parent,details:"",fatal:!1};22===s.code?(this.segments=[],r.details=c.a.BUFFER_FULL_ERROR):(this.appendError++,r.details=c.a.BUFFER_APPEND_ERROR,this.appendError>e.appendErrorMaxRetry&&(O.b.log("fail "+e.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],r.fatal=!0)),t.trigger(f.a.ERROR,r)}}}},s.flushBuffer=function(e,t,i){var s=this.sourceBuffer;if(!Object.keys(s).length)return!0;var r="null";if(this.media&&(r=this.media.currentTime.toFixed(3)),O.b.log("flushBuffer,pos/start/end: "+r+"/"+e+"/"+t),this.flushBufferCounter>=this.appended)return O.b.warn("abort flushing too many retries"),!0;s=s[i];if(s){if(s.ended=!1,s.updating)return O.b.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(i,s,e,t))return this.flushBufferCounter++,!1}return O.b.log("buffer flushed"),!0},s.removeBufferRange=function(e,t,i,s){try{for(var r=0;r<t.buffered.length;r++){var n=t.buffered.start(r),o=t.buffered.end(r),a=Math.max(n,i),l=Math.min(o,s);if(.5<Math.min(l,o)-a){var c="null";return this.media&&(c=this.media.currentTime.toString()),O.b.log("sb remove "+e+" ["+a+","+l+"], of ["+n+","+o+"], pos:"+c),t.remove(a,l),!0}}}catch(e){O.b.warn("removeBufferRange failed",e)}return!1},i}(o);function Be(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var je=function(t){function r(e){return(e=t.call(this,e,f.a.FPS_DROP_LEVEL_CAPPING,f.a.MEDIA_ATTACHING,f.a.MANIFEST_PARSED,f.a.BUFFER_CODECS,f.a.MEDIA_DETACHING)||this).autoLevelCapping=Number.POSITIVE_INFINITY,e.firstLevel=null,e.levels=[],e.media=null,e.restrictedLevels=[],e.timer=null,e}e=t,(i=r).prototype=Object.create(e.prototype),(i.prototype.constructor=i).__proto__=e;var e,i=r.prototype;return i.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this.stopCapping())},i.onFpsDropLevelCapping=function(e){r.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)},i.onMediaAttaching=function(e){this.media=e.media instanceof this.hls.config.cnxRenderWindow.HTMLVideoElement?e.media:null},i.onManifestParsed=function(e){var t=this.hls;this.restrictedLevels=[],this.levels=e.levels,this.firstLevel=e.firstLevel,t.config.capLevelToPlayerSize&&e.video&&this.startCapping()},i.onBufferCodecs=function(e){this.hls.config.capLevelToPlayerSize&&e.video&&this.startCapping()},i.onLevelsUpdated=function(e){this.levels=e.levels},i.onMediaDetaching=function(){this.stopCapping()},i.detectPlayerSize=function(){var e,t;!this.media||(e=this.levels?this.levels.length:0)&&((t=this.hls).autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping)},i.getMaxLevel=function(i){var s=this;if(!this.levels)return-1;var e=this.levels.filter(function(e,t){return r.isLevelAllowed(t,s.restrictedLevels)&&t<=i});return r.getMaxLevelByMediaSize(e,this.mediaWidth,this.mediaHeight)},i.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},i.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},r.isLevelAllowed=function(e,t){return-1===(t=void 0===t?[]:t).indexOf(e)},r.getMaxLevelByMediaSize=function(e,t,i){if(!e||!e.length)return-1;for(var s,r=e.length-1,n=0;n<e.length;n+=1){var o=e[n];if((o.width>=t||o.height>=i)&&(!(s=e[n+1])||o.width!==s.width||o.height!==s.height)){r=n;break}}return r},e=[{key:"contentScaleFactor",get:function(){return 1}}],Be((i=r).prototype,[{key:"mediaWidth",get:function(){var e,t=this.media;return t&&(e=t.width||t.clientWidth||t.offsetWidth,e*=r.contentScaleFactor),e}},{key:"mediaHeight",get:function(){var e,t=this.media;return t&&(e=t.height||t.clientHeight||t.offsetHeight,e*=r.contentScaleFactor),e}}]),Be(i,e),r}(o),De=window.performance,W=function(t){var e;function i(e){return t.call(this,e,f.a.MEDIA_ATTACHING)||this}s=t,(e=i).prototype=Object.create(s.prototype),(e.prototype.constructor=e).__proto__=s;var s=i.prototype;return s.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},s.onMediaAttaching=function(e){var t=this.hls.config;t.capLevelOnFPSDrop&&("function"==typeof(this.video=e.media instanceof this.hls.config.cnxRenderWindow.HTMLVideoElement?e.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod))},s.checkFPS=function(e,t,i){var s,r,n,o,a=De.now();t&&(this.lastTime&&(n=a-this.lastTime,s=i-this.lastDroppedFrames,o=t-this.lastDecodedFrames,r=1e3*s/n,(n=this.hls).trigger(f.a.FPS_DROP,{currentDropped:s,currentDecoded:o,totalDroppedFrames:i}),0<r&&s>n.config.fpsDroppedMonitoringThreshold*o&&(o=n.currentLevel,O.b.warn("drop FPS ratio greater than max allowed value for currentLevel: "+o),0<o&&(-1===n.autoLevelCapping||n.autoLevelCapping>=o)&&(n.trigger(f.a.FPS_DROP_LEVEL_CAPPING,{level:--o,droppedLevel:n.currentLevel}),n.autoLevelCapping=o,n.streamController.nextLevelSwitch()))),this.lastTime=a,this.lastDroppedFrames=i,this.lastDecodedFrames=t)},s.checkFPSInterval=function(){var e,t=this.video;t&&(this.isVideoPlaybackQualityAvailable?(e=t.getVideoPlaybackQuality(),this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)):this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount))},i}(o),_e=window,Fe=_e.performance,Ue=_e.XMLHttpRequest,_e=((_e=Ne.prototype).destroy=function(){this.abort(),this.loader=null},_e.abort=function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},_e.load=function(e,t,i){this.context=e,this.config=t,this.callbacks=i,this.stats={trequest:Fe.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()},_e.loadInternal=function(){var e=this.context,t=this.loader=new Ue,i=this.stats;i.tfirst=0,i.loaded=0;var s=this.xhrSetup;try{if(s)try{s(t,e.url)}catch(i){t.open("GET",e.url,!0),s(t,e.url)}t.readyState||t.open("GET",e.url,!0)}catch(i){return void this.callbacks.onError({code:t.status,text:i.message},e,t)}e.rangeEnd&&t.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=e.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),t.send()},_e.readystatechange=function(e){var t,i=e.currentTarget,s=i.readyState,r=this.stats,n=this.context,o=this.config;!r.aborted&&2<=s&&(window.clearTimeout(this.requestTimeout),0===r.tfirst&&(r.tfirst=Math.max(Fe.now(),r.trequest)),4===s?200<=(e=i.status)&&e<300?(r.tload=Math.max(r.tfirst,Fe.now()),s="arraybuffer"===n.responseType?(t=i.response).byteLength:(t=i.responseText).length,r.loaded=r.total=s,t={url:i.responseURL,data:t},this.callbacks.onSuccess(t,r,n,i)):r.retry>=o.maxRetry||400<=e&&e<499?(O.b.error(e+" while loading "+n.url),this.callbacks.onError({code:e,text:i.statusText},n,i)):(O.b.warn(e+" while loading "+n.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,o.maxRetryDelay),r.retry++):this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),o.timeout))},_e.loadtimeout=function(){O.b.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},_e.loadprogress=function(e){var t=e.currentTarget,i=this.stats;i.loaded=e.loaded,e.lengthComputable&&(i.total=e.total);e=this.callbacks.onProgress;e&&e(i,this.context,null,t)},Ne);function Ne(e){e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}i(6),(Ve=Ve=Ve||{}).WIDEVINE="com.widevine.alpha",Ve.PLAYREADY="com.microsoft.playready";var Ve,Ve=void 0!==(Ve=window.cnxRenderWindow)&&Ve.navigator&&Ve.navigator.requestMediaKeySystemAccess?Ve.navigator.requestMediaKeySystemAccess.bind(Ve.navigator):null;var He=function(s){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},t=Object.keys(r);(t="function"==typeof Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})):t).forEach(function(e){var t,i;t=s,e=r[i=e],i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e})}return s}({cnxRenderWindow:window,autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:_e,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:Le,bufferController:Re,capLevelController:je,fpsController:W,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,requestMediaKeySystemAccessFunc:Ve},{},{subtitleStreamController:void 0,subtitleTrackController:void 0,timelineController:void 0,audioStreamController:void 0,audioTrackController:void 0,emeController:void 0});function qe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function We(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function $e(e,t,i){return t&&We(e.prototype,t),i&&We(e,i),e}i.d(t,"default",function(){return Ge});var Ge=function(g){var e;function m(e){var t;void 0===e&&(e={}),(t=g.call(this)||this).config=void 0,t.Ei=void 0,t.abrController=void 0,t.capLevelController=void 0,t.levelController=void 0,t.streamController=void 0,t.networkControllers=void 0,t.audioTrackController=void 0,t.subtitleTrackController=void 0,t.emeController=void 0,t.coreComponents=void 0,t.media=null,t.url=null;var i=m.DefaultConfig;if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");t.config=function(s){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},t=Object.keys(r);(t="function"==typeof Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})):t).forEach(function(e){var t,i;t=s,e=r[i=e],i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e})}return s}({},i,e),window.cnxRenderWindow=t.config.cnxRenderWindow;var s=qe(t).config;if(void 0!==s.liveMaxLatencyDurationCount&&s.liveMaxLatencyDurationCount<=s.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==s.liveMaxLatencyDuration&&(void 0===s.liveSyncDuration||s.liveMaxLatencyDuration<=s.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(O.a)(s.debug),t.Ei=-1;var r=t.abrController=new s.abrController(qe(t)),n=new s.bufferController(qe(t)),o=t.capLevelController=new s.capLevelController(qe(t)),a=new s.fpsController(qe(t)),l=new j(qe(t)),c=new D(qe(t)),d=new _(qe(t)),h=new Oe(qe(t)),u=t.levelController=new Te(qe(t)),i=new V(qe(t)),e=[u,t.streamController=new Se(qe(t),i)],u=s.audioStreamController;u&&e.push(new u(qe(t),i)),t.networkControllers=e;var p,a=[l,c,d,r,n,o,a,h,i];return(u=s.audioTrackController)&&(h=new u(qe(t)),t.audioTrackController=h,a.push(h)),(u=s.subtitleTrackController)&&(p=new u(qe(t)),t.subtitleTrackController=p,e.push(p)),(u=s.emeController)&&(p=new u(qe(t)),t.emeController=p,a.push(p)),(u=s.subtitleStreamController)&&e.push(new u(qe(t),i)),(u=s.timelineController)&&a.push(new u(qe(t))),t.coreComponents=a,t}t=g,(e=m).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t,m.isSupported=function(){var e=J();if(!e)return!1;var t=self.SourceBuffer||self.WebKitSourceBuffer,e=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),t=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!e&&!!t},$e(m,null,[{key:"version",get:function(){}},{key:"Events",get:function(){return f.a}},{key:"ErrorTypes",get:function(){return c.b}},{key:"ErrorDetails",get:function(){return c.a}},{key:"DefaultConfig",get:function(){return m.defaultConfig||He},set:function(e){m.defaultConfig=e}}]);var t=m.prototype;return t.destroy=function(){O.b.log("destroy"),this.trigger(f.a.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(e){e.destroy()}),this.url=null,this.removeAllListeners(),this.Ei=-1},t.attachMedia=function(e){O.b.log("attachMedia"),this.media=e,this.trigger(f.a.MEDIA_ATTACHING,{media:e})},t.detachMedia=function(){O.b.log("detachMedia"),this.trigger(f.a.MEDIA_DETACHING),this.media=null},t.loadSource=function(e){e=s.buildAbsoluteURL(this.config.cnxRenderWindow.location.href,e,{alwaysNormalize:!0}),O.b.log("loadSource:"+e),this.url=e,this.trigger(f.a.MANIFEST_LOADING,{url:e})},t.startLoad=function(t){void 0===t&&(t=-1),O.b.log("startLoad("+t+")"),this.networkControllers.forEach(function(e){e.startLoad(t)})},t.stopLoad=function(){O.b.log("stopLoad"),this.networkControllers.forEach(function(e){e.stopLoad()})},t.swapAudioCodec=function(){O.b.log("swapAudioCodec"),this.streamController.swapAudioCodec()},t.recoverMediaError=function(){O.b.log("recoverMediaError");var e=this.media;this.detachMedia(),e&&this.attachMedia(e)},$e(m,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){O.b.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){O.b.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){O.b.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){O.b.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){O.b.log("set startLevel:"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"capLevelToPlayerSize",set:function(e){e=!!e;e!==this.config.capLevelToPlayerSize&&(e?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=e)}},{key:"autoLevelCapping",get:function(){return this.Ei},set:function(e){O.b.log("set autoLevelCapping:"+e),this.Ei=e}},{key:"bandwidthEstimate",get:function(){var e=this.abrController.bwEstimator;return e?e.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var e=this.levels,t=this.config.minAutoBitrate,i=e?e.length:0,s=0;s<i;s++)if((e[s].realBitrate?Math.max(e[s].realBitrate,e[s].bitrate):e[s].bitrate)>t)return s;return 0}},{key:"maxAutoLevel",get:function(){var e=this.levels,t=this.autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"subtitleDisplay",get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}}]),m}(Y);Ge.defaultConfig=void 0}],n={},r.m=s,r.c=n,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"_",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t._)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(i,s,function(e){return t[e]}.bind(null,s));return i},r.n=function(e){var t=e&&e._?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist/",r(r.s=13).default))},function(e,t,i){"use strict";i.d(t,"c",function(){return s}),i.d(t,"d",function(){return r}),i.d(t,"b",function(){return n}),i.d(t,"a",function(){return o});const s={FullscreenChanged:"fullscreenChanged",PlayerFloatChanged:"playerFloatChanged"},r={OmidViewabilityThreshold:"OmidViewabilityThreshold"},n=Object.assign(Object.assign(Object.assign(Object.assign({Ready:"ready",Removed:"removed",SetupError:"setupError",IsViewable:"isViewable",SizeChanged:"sizeChanged",BrandingClicked:"brandingClicked",ImpressionPrice:"impressionPrice"},{Play:"play",Pause:"pause",QualityChanged:"qualityChanged",PlayError:"playError",VolumeChanged:"volumeChanged"}),s),r),{AdClick:"adClick",AdPlay:"adPlay",AdPause:"adPause",AdImpression:"adImpression",AdCompleted25:"adCompleted25",AdCompleted50:"adCompleted50",AdCompleted75:"adCompleted75",AdCompleted100:"adCompleted100",AdSkipped:"adSkipped",AdError:"adError",AdStopped:"adStopped",AdCompanion:"adCompanion"});var o;(t=o=o||{}).SetupError="SetupError",t.NoPlayer="NoPlayer",t.RenderError="RenderError"},function(e,t,i){"use strict";i.d(t,"b",function(){return n}),i.d(t,"e",function(){return o}),i.d(t,"c",function(){return a}),i.d(t,"a",function(){return l}),i.d(t,"d",function(){return d});var s=i(1);const r=".cdn.ampproject.org";function n(e,t){t=t||location.search,e=e.replace(/\[/,"\\[").replace(/]/,"\\]");t=new RegExp(`[\\?&]${e}=([^&#]*)`,"i").exec(t);return null===t?null:decodeURIComponent(t[1])}function o(e,t,i){var s=new RegExp(`([?&])${t}=.*?(&|$)`,"i"),r=-1!==e.indexOf("?")?"&":"?";return e.match(s)?i?e.replace(s,`$1${t}=${i}$2`):e.replace(s,"$1"):`${e}${r}${t}=${i}`}function a(e){return-1<e.indexOf("?")?"&":"?"}function l(e){if(Object(s.h)(e))return-1<e.indexOf("://")?e.split("/")[2]:e.split("/")[0]}function c(e,t){return`${"http"+(/(\/s\/)+/.test(e.replace(t,""))?"s":"")}://${t}`}function d(e,t=!0){return e=-1===(i=e=function(e){var t=/^https:\/\/www.google\..*?\/amp\/s*\/*/.exec(e);if(null===t)return e;t=e.replace(t[0],"");return c(e,t)}(e=function(e){if(-1<e.indexOf(r)){e=e.replace("https://","");const t=/^[^\/]+(\/[a-z]+\/)+s*\/*/,i=t.test(e)?e.replace(t.exec(e)[0],""):e;return c(e,i)}return e}(e))).indexOf(r)||-1<(i=(i=(i=(i=(i=(i=(i=i.replace(r,"")).replace("www-","www.")).replace("amp-","amp.")).cnx_replaceAll("--","=")).cnx_replaceAll("-",".")).cnx_replaceAll("=","-")).replace("www.","amp.")).indexOf("amp.")?i:(i=i.replace("http://","http://amp.")).replace("https://","https://amp."),e=t?function(e){if(-1===e.indexOf("#origin-")&&-1===e.indexOf("viewerUrl-"))return e;var t=e.split("#origin-")[1].split("viewerUrl-");return d(e=decodeURIComponent(t[1]),!1)}(e):e;var i}},function(e,t,i){"use strict";i.d(t,"a",function(){return s}),i.d(t,"b",function(){return r});const s=JSON.parse('{"version":120359,"domainPrefix":"","logToConsole":false,"logToServer":true,"env":"production"}'),r=!0},function(e,t,i){"use strict";i.d(t,"a",function(){return s});var n=i(6);class s{constructor(){this.Li={}}subscribe(e,t,i){this.Li[e]||(this.Li[e]=[]),this.Li[e].push({context:t,func:i})}unsubscribe(e,t,i){this.Li[e]&&(this.Li[e]=this.Li[e].filter(e=>!(e.context===t&&(e.func===i||!i))))}unsubscribeAll(t){Object.keys(this.Li).forEach(e=>{this.Li[e]=this.Li[e].filter(e=>e.context!==t)})}publish(t,e,i={payload:void 0}){Object.prototype.hasOwnProperty.call(this.Li,e)&&this.Li[e].forEach(e=>{e.context===t&&e.func(i)})}relay(e,i,s,r){Object(n.m)(e).forEach(t=>{this.subscribe(t,i,e=>{r.publish(s,t,e)})})}relayBulk(e,t,i){e.forEach(e=>{this.relay(e.channel,e.source,t,i)})}}},function(e,t,i){"use strict";var s,r,n,o;i.d(t,"a",function(){return s}),i.d(t,"b",function(){return r}),i.d(t,"c",function(){return n}),i.d(t,"d",function(){return o}),(t=s=s||{})[t.X=0]="X",t[t.Y=1]="Y",(t=r=r||{}).Click="click",t.InteractionStart="interactionstart",t.Interaction="interaction",t.InteractionEnd="interactionend",(t=n=n||{})[t.Swipe=0]="Swipe",t[t.Hold=1]="Hold",(t=o=o||{})[t.Left=0]="Left",t[t.Right=1]="Right"},function(e,t,i){"use strict";var s;i.d(t,"c",function(){return s}),i.d(t,"b",function(){return r}),i.d(t,"a",function(){return n}),(t=s=s||{}).SessionRendered="rendered",t.SessionView="enter_view";const r={UserInteraction:"userInteraction",GeneralUserInteraction:"generalUserInteraction",CanStart:"canStart",Destroy:"destroy"},n={StateChanged:"stateChanged"}},function(e,t,i){"use strict";i.d(t,"a",function(){return r}),i.d(t,"b",function(){return s});var s,i=i(0);const r=[i.ProtoDeviceType.Smartphone,i.ProtoDeviceType.Tablet];(i=s=s||{}).Ios="ios",i.Android="android",i.Mac="macos",i.Windows="windows",i.Linux="linux"},function(e,t,i){"use strict";var s;i.d(t,"a",function(){return s}),(t=s=s||{})[t.CmpApi=0]="CmpApi",t[t.TcfApi=1]="TcfApi"},function(e,t,i){"use strict";var s,r,n;i.d(t,"a",function(){return s}),i.d(t,"d",function(){return r}),i.d(t,"b",function(){return o}),i.d(t,"c",function(){return n}),(t=s=s||{}).Chrome="chrome",t.Firefox="firefox",t.Edge="edge",t.Safari="safari",t.Opera="opera",t.Samsung="samsung",t.Facebook="facebook",t.InternetExplorer="ie",(t=r=r||{}).Standard="standard",t.Webkit="webkit",t.Moz="moz",t.Ms="ms",t.O="o";const o=[{name:r.Standard,keys:{fullscreenEnabled:"fullscreenEnabled",fullscreenElement:"fullscreenElement",requestFullscreen:"requestFullscreen",exitFullscreen:"exitFullscreen",fullscreenchange:"fullscreenchange",fullscreenerror:"fullscreenerror"}},{name:r.Webkit,keys:{fullscreenEnabled:"webkitFullscreenEnabled",fullscreenElement:"webkitFullscreenElement",requestFullscreen:"webkitRequestFullscreen",exitFullscreen:"webkitExitFullscreen",fullscreenchange:"webkitfullscreenchange",fullscreenerror:"webkitfullscreenerror"}},{name:r.Webkit,keys:{fullscreenEnabled:"webkitSupportsFullscreen",fullscreenElement:"webkitFullscreenElement",requestFullscreen:"webkitEnterFullscreen",exitFullscreen:"webkitExitFullscreen",fullscreenchange:"webkitfullscreenchange",fullscreenerror:"webkitfullscreenerror"}},{name:r.Moz,keys:{fullscreenEnabled:"mozFullScreenEnabled",fullscreenElement:"mozFullScreenElement",requestFullscreen:"mozRequestFullScreen",exitFullscreen:"mozCancelFullScreen",fullscreenchange:"mozfullscreenchange",fullscreenerror:"mozfullscreenerror"}},{name:r.Ms,keys:{fullscreenEnabled:"msFullscreenEnabled",fullscreenElement:"msFullscreenElement",requestFullscreen:"msRequestFullscreen",exitFullscreen:"msExitFullscreen",fullscreenchange:"MSFullscreenChange",fullscreenerror:"MSFullscreenError"}}];(t=n=n||{}).Self="_self",t.Blank="_blank",t.Parent="_parent",t.Top="_top"},function(e,t,i){"use strict";i.d(t,"a",function(){return s});var s,p=i(5),g=i(0),m=i(7),f=i(1),y=i(17);function b(e,t){const s=function({requestUrl:e,requestType:t="POST",contentType:i="",responseType:s="",withCredentials:r=!1}){const n=new XMLHttpRequest;return n.open(t,e,!0),0<i.length&&n.setRequestHeader("Content-Type",i),0<s.length&&(n.responseType=s),n.timeout=3e4,n.withCredentials=r,n}(e),r=new Date;return new Promise((e,i)=>{s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE)if(200===s.status)e(s.response);else{let e="";try{e=s.responseText}catch(e){}var t=(new Date).getTime()-r.getTime();i(new Error(`Request fail. status:${s.status}, readyState:${s.readyState}, response:${e}, time:${t}`))}},s.ontimeout=()=>{var e=(new Date).getTime()-r.getTime();i(new Error(`Request timeout status:${s.status}. time:${e}`))},s.send(t)})}function v(e,t,i){try{var s=Object(m.l)([95,5]);!s||t&&0!==Object.keys(t).length||Object(p.a)({message:"empty_proto_request",callStack:"empty_function_argument",exception:i,level:g.ProtoLoggingLevelEnum.INFO,sendMaxLog:!1});var r=e.fromObject(t);!s||r&&0!==Object.keys(r).length||Object(p.a)({message:"empty_proto_request",callStack:"empty_fromObject_result",exception:i,level:g.ProtoLoggingLevelEnum.INFO,sendMaxLog:!1});var n=e.encode(r).finish();return!s||n&&0!==Object.keys(n).length||Object(p.a)({message:"empty_proto_request",callStack:"empty_encode_result",exception:i,level:g.ProtoLoggingLevelEnum.INFO,sendMaxLog:!1}),n}catch(e){throw Object(p.a)({throttle:10,sendMaxLog:!0,exception:i,level:g.ProtoLoggingLevelEnum.FATAL,callStack:JSON.stringify(t),message:"Protobuf_encode"}),Error()}}(i=s=s||{}).fetchXMLRequest=function(e,t=!0){const s=b({requestUrl:e,requestType:"GET",withCredentials:t});return new Promise((t,i)=>{s.then(e=>{t(e)}).catch(e=>{i(e)})})},i.sendProtoRequest=function({ProtoResponse:e,ProtoRequest:t,requestData:i,endpoint:s,requestType:r,withCredentials:n,queryParams:o,logError:a}){var l,c,d,h,u,i=i?v(t,i,s):null;return[e,o,r="POST",i,n]=[e,(h=s,u=o,Object(f.f)(u)&&Object.keys(u).forEach(e=>h=Object(y.e)(h,e,u[e])),s=h),r,i,n],l=e,c=b({requestUrl:o,requestType:r,withCredentials:n,contentType:"POST"===r?"multipart/form-data":"",responseType:"arraybuffer"},i),d=o,new Promise((i,s)=>{c.then(t=>{if(l){let e=null;try{const i=t?new Uint8Array(t):new Uint8Array;e=l.toObject(l.decode(i),{defaults:!0,arrays:!0,objects:!0})}catch(e){Object(p.a)({exception:`${d}__${e.message}`,message:"Protobuf_decode",callStack:e.stack,level:g.ProtoLoggingLevelEnum.WARNING,sendMaxLog:!0,throttle:100})}e&&e.errorMessage&&"500"===e.errorMessage&&s(e.errorMessage),i(e)}}).catch(e=>{s(e)})}).catch(e=>{throw a&&Object(m.l)([95,5])&&Object(p.a)({message:"Xhr_error",exception:s,callStack:`${e}`,level:g.ProtoLoggingLevelEnum.INFO}),new Error(e)})},i.sendProtoBeaconRequest=function({ProtoRequest:e,requestData:t,endpoint:i}){t=t?v(e,t,i):null;return navigator.sendBeacon(i,t)},i.trackPixel=function(e){try{(new Image).src=e}catch(e){Object(p.a)({message:"Xhr_trackPixel",exception:e.message,callStack:e.stack,level:g.ProtoLoggingLevelEnum.FATAL})}}},function(e,t,i){"use strict";var s,r=i(59),o=r.Reader,n=r.Writer,a=r.util,l=r.roots.default||(r.roots.default={});function c(e){if(this.types=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function d(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function h(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function u(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function p(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function g(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function m(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function f(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function y(e){if(this.items=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function b(e){if(this.filters=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function v(e){if(this.items=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function P(e){if(this.trackers=[],this.renditions=[],this.floorPrices=[],this.advertiserContextualTargeting=[],this.publisherContextualTargeting=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function S(e){if(this.adBreakTargeting=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function I(e){if(this.adSlotPositions=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function T(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function A(e){if(this.players=[],this.lineItems=[],this.cookieSyncUrls={},e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function O(e){if(this.sharingDestinations=[],this.floatingDeviceMode=[],this.lineItems=[],this.playlist=[],this.adBreaks=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function k(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function C(e){if(this.tokens=[],this.forceLineItemIds=[],this.queryJsTargeting={},this.reloadedPlayers={},e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}l.ProtoElementsRequest=(C.prototype.tokens=a.emptyArray,C.prototype.pageUrl="",C.prototype.userId="",C.prototype.forcePlayerId="",C.prototype.forceMediaId="",C.prototype.forcePlaylistId="",C.prototype.version=0,C.prototype.forceLineItemIds=a.emptyArray,C.prototype.clientAb0=0,C.prototype.clientAb1=0,C.prototype.customParam1="",C.prototype.customParam2="",C.prototype.customParam3="",C.prototype.forceExploration=!1,C.prototype.es6=!1,C.prototype.bundleId="",C.prototype.forceSourceItemId="",C.prototype.parseDomain=!1,C.prototype.implementationType=0,C.prototype.queryJsTargeting=a.emptyObject,C.prototype.isConsentConnatix=!0,C.prototype.reloadedPlayers=a.emptyObject,C.prototype.disableTracking=!1,C.prototype.referrer="",C.prototype.localTimestamp=a.Long?a.Long.fromBits(0,0,!1):0,C.prototype.customParam4="",C.prototype.customParam5="",C.encode=function(e,t){if(t=t||n.create(),null!=e.tokens&&e.tokens.length)for(var i=0;i<e.tokens.length;++i)t.uint32(10).string(e.tokens[i]);if(null!=e.pageUrl&&e.hasOwnProperty("pageUrl")&&t.uint32(26).string(e.pageUrl),null!=e.userId&&e.hasOwnProperty("userId")&&t.uint32(42).string(e.userId),null!=e.forcePlayerId&&e.hasOwnProperty("forcePlayerId")&&t.uint32(58).string(e.forcePlayerId),null!=e.forceMediaId&&e.hasOwnProperty("forceMediaId")&&t.uint32(66).string(e.forceMediaId),null!=e.forcePlaylistId&&e.hasOwnProperty("forcePlaylistId")&&t.uint32(74).string(e.forcePlaylistId),null!=e.version&&e.hasOwnProperty("version")&&t.uint32(80).int32(e.version),null!=e.forceLineItemIds&&e.forceLineItemIds.length)for(i=0;i<e.forceLineItemIds.length;++i)t.uint32(90).string(e.forceLineItemIds[i]);if(null!=e.clientAb0&&e.hasOwnProperty("clientAb0")&&t.uint32(96).int32(e.clientAb0),null!=e.clientAb1&&e.hasOwnProperty("clientAb1")&&t.uint32(104).int32(e.clientAb1),null!=e.customParam1&&e.hasOwnProperty("customParam1")&&t.uint32(130).string(e.customParam1),null!=e.customParam2&&e.hasOwnProperty("customParam2")&&t.uint32(138).string(e.customParam2),null!=e.customParam3&&e.hasOwnProperty("customParam3")&&t.uint32(146).string(e.customParam3),null!=e.forceExploration&&e.hasOwnProperty("forceExploration")&&t.uint32(160).bool(e.forceExploration),null!=e.es6&&e.hasOwnProperty("es6")&&t.uint32(168).bool(e.es6),null!=e.bundleId&&e.hasOwnProperty("bundleId")&&t.uint32(178).string(e.bundleId),null!=e.forceSourceItemId&&e.hasOwnProperty("forceSourceItemId")&&t.uint32(186).string(e.forceSourceItemId),null!=e.parseDomain&&e.hasOwnProperty("parseDomain")&&t.uint32(192).bool(e.parseDomain),null!=e.implementationType&&e.hasOwnProperty("implementationType")&&t.uint32(200).int32(e.implementationType),null!=e.queryJsTargeting&&e.hasOwnProperty("queryJsTargeting"))for(var s=Object.keys(e.queryJsTargeting),i=0;i<s.length;++i)t.uint32(210).fork().uint32(10).string(s[i]).uint32(18).string(e.queryJsTargeting[s[i]]).ldelim();if(null!=e.isConsentConnatix&&e.hasOwnProperty("isConsentConnatix")&&t.uint32(216).bool(e.isConsentConnatix),null!=e.reloadedPlayers&&e.hasOwnProperty("reloadedPlayers"))for(s=Object.keys(e.reloadedPlayers),i=0;i<s.length;++i)t.uint32(234).fork().uint32(10).string(s[i]).uint32(18).string(e.reloadedPlayers[s[i]]).ldelim();return null!=e.disableTracking&&e.hasOwnProperty("disableTracking")&&t.uint32(248).bool(e.disableTracking),null!=e.referrer&&e.hasOwnProperty("referrer")&&t.uint32(258).string(e.referrer),null!=e.localTimestamp&&e.hasOwnProperty("localTimestamp")&&t.uint32(264).int64(e.localTimestamp),null!=e.customParam4&&e.hasOwnProperty("customParam4")&&t.uint32(274).string(e.customParam4),null!=e.customParam5&&e.hasOwnProperty("customParam5")&&t.uint32(282).string(e.customParam5),t},C.fromObject=function(e){if(e instanceof l.ProtoElementsRequest)return e;var t=new l.ProtoElementsRequest;if(e.tokens){if(!Array.isArray(e.tokens))throw TypeError(".ProtoElementsRequest.tokens: array expected");t.tokens=[];for(var i=0;i<e.tokens.length;++i)t.tokens[i]=String(e.tokens[i])}if(null!=e.pageUrl&&(t.pageUrl=String(e.pageUrl)),null!=e.userId&&(t.userId=String(e.userId)),null!=e.forcePlayerId&&(t.forcePlayerId=String(e.forcePlayerId)),null!=e.forceMediaId&&(t.forceMediaId=String(e.forceMediaId)),null!=e.forcePlaylistId&&(t.forcePlaylistId=String(e.forcePlaylistId)),null!=e.version&&(t.version=0|e.version),e.forceLineItemIds){if(!Array.isArray(e.forceLineItemIds))throw TypeError(".ProtoElementsRequest.forceLineItemIds: array expected");for(t.forceLineItemIds=[],i=0;i<e.forceLineItemIds.length;++i)t.forceLineItemIds[i]=String(e.forceLineItemIds[i])}switch(null!=e.clientAb0&&(t.clientAb0=0|e.clientAb0),null!=e.clientAb1&&(t.clientAb1=0|e.clientAb1),null!=e.customParam1&&(t.customParam1=String(e.customParam1)),null!=e.customParam2&&(t.customParam2=String(e.customParam2)),null!=e.customParam3&&(t.customParam3=String(e.customParam3)),null!=e.forceExploration&&(t.forceExploration=Boolean(e.forceExploration)),null!=e.es6&&(t.es6=Boolean(e.es6)),null!=e.bundleId&&(t.bundleId=String(e.bundleId)),null!=e.forceSourceItemId&&(t.forceSourceItemId=String(e.forceSourceItemId)),null!=e.parseDomain&&(t.parseDomain=Boolean(e.parseDomain)),e.implementationType){case"Web":case 0:t.implementationType=0;break;case"Amp":case 1:t.implementationType=1}if(e.queryJsTargeting){if("object"!=typeof e.queryJsTargeting)throw TypeError(".ProtoElementsRequest.queryJsTargeting: object expected");t.queryJsTargeting={};for(var s=Object.keys(e.queryJsTargeting),i=0;i<s.length;++i)t.queryJsTargeting[s[i]]=String(e.queryJsTargeting[s[i]])}if(null!=e.isConsentConnatix&&(t.isConsentConnatix=Boolean(e.isConsentConnatix)),e.reloadedPlayers){if("object"!=typeof e.reloadedPlayers)throw TypeError(".ProtoElementsRequest.reloadedPlayers: object expected");for(t.reloadedPlayers={},s=Object.keys(e.reloadedPlayers),i=0;i<s.length;++i)t.reloadedPlayers[s[i]]=String(e.reloadedPlayers[s[i]])}return null!=e.disableTracking&&(t.disableTracking=Boolean(e.disableTracking)),null!=e.referrer&&(t.referrer=String(e.referrer)),null!=e.localTimestamp&&(a.Long?(t.localTimestamp=a.Long.fromValue(e.localTimestamp)).unsigned=!1:"string"==typeof e.localTimestamp?t.localTimestamp=parseInt(e.localTimestamp,10):"number"==typeof e.localTimestamp?t.localTimestamp=e.localTimestamp:"object"==typeof e.localTimestamp&&(t.localTimestamp=new a.LongBits(e.localTimestamp.low>>>0,e.localTimestamp.high>>>0).toNumber())),null!=e.customParam4&&(t.customParam4=String(e.customParam4)),null!=e.customParam5&&(t.customParam5=String(e.customParam5)),t},C.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},C),l.ProtoOutstreamInitialRenderingEnum=(s={},(i=Object.create(s))[s[0]="ExpandWithAd"]=0,i[s[1]="FullyRendered"]=1,i),l.ProtoOutstreamEndAdBreakPolicyEnum=(s={},(i=Object.create(s))[s[0]="Hide"]=0,i[s[1]="HouseScreen"]=1,i[s[2]="Loop"]=2,i),l.ProtoGalleryStyleMode=(s={},(i=Object.create(s))[s[0]="None"]=0,i[s[1]="Detailed"]=1,i[s[2]="Visual"]=2,i),l.ProtoLogoPositionMode=(s={},(i=Object.create(s))[s[0]="None"]=0,i[s[1]="ControlBar"]=1,i[s[2]="BottomRight"]=2,i[s[3]="BottomLeft"]=3,i[s[4]="TopRight"]=4,i[s[5]="TopLeft"]=5,i[s[6]="Center"]=6,i),l.ProtoGalleryOrientationEnum=(s={},(i=Object.create(s))[s[0]="Landscape"]=0,i[s[1]="Portrait"]=1,i),l.ProtoElementsTypeEnum=(s={},(i=Object.create(s))[s[0]="InStream"]=0,i[s[1]="OutStream"]=1,i[s[2]="InStreamInApp"]=2,i[s[3]="Live"]=3,i),l.ProtoPlayerUpNextMode=(s={},(i=Object.create(s))[s[0]="Loop"]=0,i[s[1]="Next"]=1,i[s[2]="Stop"]=2,i),l.ProtoPlaylistItem=(k.prototype.mediaId="",k.prototype.revisionNumber=0,k.prototype.mediaContentVersionId="",k.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoPlaylistItem;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.mediaId=e.string();break;case 2:s.revisionNumber=e.int32();break;case 3:s.mediaContentVersionId=e.string();break;default:e.skipType(7&r)}}return s},k.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.mediaId="",i.revisionNumber=0,i.mediaContentVersionId=""),null!=e.mediaId&&e.hasOwnProperty("mediaId")&&(i.mediaId=e.mediaId),null!=e.revisionNumber&&e.hasOwnProperty("revisionNumber")&&(i.revisionNumber=e.revisionNumber),null!=e.mediaContentVersionId&&e.hasOwnProperty("mediaContentVersionId")&&(i.mediaContentVersionId=e.mediaContentVersionId),i},k),l.ProtoElements=(O.prototype.playerId="",O.prototype.playbackMode=0,O.prototype.soundMode=0,O.prototype.upNextMode=1,O.prototype.containerSelector="",O.prototype.position=0,O.prototype.insertPosition=0,O.prototype.forceInsertPath=!1,O.prototype.renderInFrame=!1,O.prototype.scrollHijackingProtection=!1,O.prototype.preRollBreak=0,O.prototype.postRollBreak=0,O.prototype.midRollNumber=-1,O.prototype.timeBetweenAds=0,O.prototype.minTimeBeforeFirstAd=0,O.prototype.adViewabilityPolicy=0,O.prototype.responsive=!1,O.prototype.ratioWidth=0,O.prototype.ratioHeight=0,O.prototype.fixedWidth=0,O.prototype.fixedHeight=0,O.prototype.casting=!1,O.prototype.sharingDestinations=a.emptyArray,O.prototype.closedCaption=!1,O.prototype.muteWatermark=!1,O.prototype.expandButton=!1,O.prototype.closeButtonMode=0,O.prototype.floatingMode=0,O.prototype.floatingDeviceMode=a.emptyArray,O.prototype.floatingCloseButtonMode=0,O.prototype.floatingFixedPosition=0,O.prototype.floatingPageElement="",O.prototype.floatingUseElementWidth=!1,O.prototype.floatingScrollPosition=0,O.prototype.floatingGutterX=0,O.prototype.floatingGutterY=0,O.prototype.floatingWidth=0,O.prototype.iconsColor="",O.prototype.accentColor="",O.prototype.tooltipTextColor="",O.prototype.tooltipBackgroundColor="",O.prototype.html="",O.prototype.galleryStyle=0,O.prototype.logoPosition=0,O.prototype.logoUrl="",O.prototype.lineItems=a.emptyArray,O.prototype.adPlaybackMode=0,O.prototype.css="",O.prototype.sessionId="",O.prototype.playlistId="",O.prototype.playerType=0,O.prototype.outstreamInitialRendering=0,O.prototype.outstreamHouseBackgroundColor="",O.prototype.outstreamTotalAdBreakLength=0,O.prototype.outstreamEndAdBreakPolicy=0,O.prototype.galleryOrientation=0,O.prototype.playlist=a.emptyArray,O.prototype.floatingAppendLocation=0,O.prototype.floatingYAxisPadding=0,O.prototype.customJsCode="",O.prototype.videoQuality=0,O.prototype.initializationSettingsJson="",O.prototype.adSkippability=0,O.prototype.skipAdAfter=5,O.prototype.adBreaks=a.emptyArray,O.prototype.amazonTamSlotId="",O.prototype.midRollOnlyOnLongContent=!0,O.prototype.limitClientSideApiUse=!1,O.prototype.abTestId="",O.prototype.adsMustBeSkippableIfLongerThan=31,O.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoElements;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.playerId=e.string();break;case 2:s.playbackMode=e.int32();break;case 3:s.soundMode=e.int32();break;case 4:s.upNextMode=e.int32();break;case 5:s.containerSelector=e.string();break;case 6:s.position=e.int32();break;case 7:s.insertPosition=e.int32();break;case 8:s.forceInsertPath=e.bool();break;case 9:s.renderInFrame=e.bool();break;case 10:s.scrollHijackingProtection=e.bool();break;case 11:s.preRollBreak=e.int32();break;case 12:s.postRollBreak=e.int32();break;case 13:s.midRollNumber=e.int32();break;case 14:s.timeBetweenAds=e.int32();break;case 15:s.minTimeBeforeFirstAd=e.int32();break;case 16:s.adViewabilityPolicy=e.int32();break;case 18:s.responsive=e.bool();break;case 19:s.ratioWidth=e.int32();break;case 20:s.ratioHeight=e.int32();break;case 21:s.fixedWidth=e.int32();break;case 22:s.fixedHeight=e.int32();break;case 23:s.casting=e.bool();break;case 24:if(s.sharingDestinations&&s.sharingDestinations.length||(s.sharingDestinations=[]),2==(7&r))for(var n=e.uint32()+e.pos;e.pos<n;)s.sharingDestinations.push(e.int32());else s.sharingDestinations.push(e.int32());break;case 25:s.closedCaption=e.bool();break;case 26:s.muteWatermark=e.bool();break;case 27:s.expandButton=e.bool();break;case 28:s.closeButtonMode=e.int32();break;case 29:s.floatingMode=e.int32();break;case 30:if(s.floatingDeviceMode&&s.floatingDeviceMode.length||(s.floatingDeviceMode=[]),2==(7&r))for(n=e.uint32()+e.pos;e.pos<n;)s.floatingDeviceMode.push(e.int32());else s.floatingDeviceMode.push(e.int32());break;case 31:s.floatingCloseButtonMode=e.int32();break;case 32:s.floatingFixedPosition=e.int32();break;case 33:s.floatingPageElement=e.string();break;case 34:s.floatingUseElementWidth=e.bool();break;case 35:s.floatingScrollPosition=e.int32();break;case 36:s.floatingGutterX=e.int32();break;case 37:s.floatingGutterY=e.int32();break;case 38:s.floatingWidth=e.int32();break;case 39:s.iconsColor=e.string();break;case 40:s.accentColor=e.string();break;case 41:s.tooltipTextColor=e.string();break;case 42:s.tooltipBackgroundColor=e.string();break;case 43:s.html=e.string();break;case 45:s.galleryStyle=e.int32();break;case 46:s.logoPosition=e.int32();break;case 47:s.logoUrl=e.string();break;case 49:s.lineItems&&s.lineItems.length||(s.lineItems=[]),s.lineItems.push(l.ProtoLineItem.decode(e,e.uint32()));break;case 50:s.adPlaybackMode=e.int32();break;case 51:s.css=e.string();break;case 52:s.sessionId=e.string();break;case 53:s.playlistId=e.string();break;case 54:s.playerType=e.int32();break;case 55:s.outstreamInitialRendering=e.int32();break;case 56:s.outstreamHouseBackgroundColor=e.string();break;case 57:s.outstreamTotalAdBreakLength=e.int32();break;case 58:s.outstreamEndAdBreakPolicy=e.int32();break;case 59:s.galleryOrientation=e.int32();break;case 60:s.playlist&&s.playlist.length||(s.playlist=[]),s.playlist.push(l.ProtoPlaylistItem.decode(e,e.uint32()));break;case 61:s.floatingAppendLocation=e.int32();break;case 62:s.floatingYAxisPadding=e.int32();break;case 63:s.customJsCode=e.string();break;case 64:s.videoQuality=e.int32();break;case 65:s.initializationSettingsJson=e.string();break;case 66:s.adSkippability=e.int32();break;case 67:s.skipAdAfter=e.int32();break;case 68:s.adBreaks&&s.adBreaks.length||(s.adBreaks=[]),s.adBreaks.push(l.ProtoAdBreak.decode(e,e.uint32()));break;case 69:s.amazonTamSlotId=e.string();break;case 70:s.midRollOnlyOnLongContent=e.bool();break;case 71:s.limitClientSideApiUse=e.bool();break;case 72:s.abTestId=e.string();break;case 73:s.adsMustBeSkippableIfLongerThan=e.int32();break;default:e.skipType(7&r)}}return s},O.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.sharingDestinations=[],i.floatingDeviceMode=[],i.lineItems=[],i.playlist=[],i.adBreaks=[]),t.defaults&&(i.playerId="",i.playbackMode=t.enums===String?"Autoplay":0,i.soundMode=t.enums===String?"Mute":0,i.upNextMode=t.enums===String?"Next":1,i.containerSelector="",i.position=0,i.insertPosition=t.enums===String?"WithinContainer":0,i.forceInsertPath=!1,i.renderInFrame=!1,i.scrollHijackingProtection=!1,i.preRollBreak=0,i.postRollBreak=0,i.midRollNumber=-1,i.timeBetweenAds=0,i.minTimeBeforeFirstAd=0,i.adViewabilityPolicy=t.enums===String?"Default":0,i.responsive=!1,i.ratioWidth=0,i.ratioHeight=0,i.fixedWidth=0,i.fixedHeight=0,i.casting=!1,i.closedCaption=!1,i.muteWatermark=!1,i.expandButton=!1,i.closeButtonMode=t.enums===String?"Off":0,i.floatingMode=t.enums===String?"Off":0,i.floatingCloseButtonMode=t.enums===String?"Off":0,i.floatingFixedPosition=t.enums===String?"Page":0,i.floatingPageElement="",i.floatingUseElementWidth=!1,i.floatingScrollPosition=t.enums===String?"BottomRight":0,i.floatingGutterX=0,i.floatingGutterY=0,i.floatingWidth=0,i.iconsColor="",i.accentColor="",i.tooltipTextColor="",i.tooltipBackgroundColor="",i.html="",i.galleryStyle=t.enums===String?"None":0,i.logoPosition=t.enums===String?"None":0,i.logoUrl="",i.adPlaybackMode=t.enums===String?"Autoplay":0,i.css="",i.sessionId="",i.playlistId="",i.playerType=t.enums===String?"InStream":0,i.outstreamInitialRendering=t.enums===String?"ExpandWithAd":0,i.outstreamHouseBackgroundColor="",i.outstreamTotalAdBreakLength=0,i.outstreamEndAdBreakPolicy=t.enums===String?"Hide":0,i.galleryOrientation=t.enums===String?"Landscape":0,i.floatingAppendLocation=t.enums===String?"Above":0,i.floatingYAxisPadding=0,i.customJsCode="",i.videoQuality=t.enums===String?"Auto":0,i.initializationSettingsJson="",i.adSkippability=t.enums===String?"IfLongerThan":0,i.skipAdAfter=5,i.amazonTamSlotId="",i.midRollOnlyOnLongContent=!0,i.limitClientSideApiUse=!1,i.abTestId="",i.adsMustBeSkippableIfLongerThan=31),null!=e.playerId&&e.hasOwnProperty("playerId")&&(i.playerId=e.playerId),null!=e.playbackMode&&e.hasOwnProperty("playbackMode")&&(i.playbackMode=t.enums===String?l.ProtoPlayerPlaybackModeEnum[e.playbackMode]:e.playbackMode),null!=e.soundMode&&e.hasOwnProperty("soundMode")&&(i.soundMode=t.enums===String?l.ProtoPlayerSoundMode[e.soundMode]:e.soundMode),null!=e.upNextMode&&e.hasOwnProperty("upNextMode")&&(i.upNextMode=t.enums===String?l.ProtoPlayerUpNextMode[e.upNextMode]:e.upNextMode),null!=e.containerSelector&&e.hasOwnProperty("containerSelector")&&(i.containerSelector=e.containerSelector),null!=e.position&&e.hasOwnProperty("position")&&(i.position=e.position),null!=e.insertPosition&&e.hasOwnProperty("insertPosition")&&(i.insertPosition=t.enums===String?l.ProtoPlayerInsertMode[e.insertPosition]:e.insertPosition),null!=e.forceInsertPath&&e.hasOwnProperty("forceInsertPath")&&(i.forceInsertPath=e.forceInsertPath),null!=e.renderInFrame&&e.hasOwnProperty("renderInFrame")&&(i.renderInFrame=e.renderInFrame),null!=e.scrollHijackingProtection&&e.hasOwnProperty("scrollHijackingProtection")&&(i.scrollHijackingProtection=e.scrollHijackingProtection),null!=e.preRollBreak&&e.hasOwnProperty("preRollBreak")&&(i.preRollBreak=e.preRollBreak),null!=e.postRollBreak&&e.hasOwnProperty("postRollBreak")&&(i.postRollBreak=e.postRollBreak),null!=e.midRollNumber&&e.hasOwnProperty("midRollNumber")&&(i.midRollNumber=e.midRollNumber),null!=e.timeBetweenAds&&e.hasOwnProperty("timeBetweenAds")&&(i.timeBetweenAds=e.timeBetweenAds),null!=e.minTimeBeforeFirstAd&&e.hasOwnProperty("minTimeBeforeFirstAd")&&(i.minTimeBeforeFirstAd=e.minTimeBeforeFirstAd),null!=e.adViewabilityPolicy&&e.hasOwnProperty("adViewabilityPolicy")&&(i.adViewabilityPolicy=t.enums===String?l.ProtoAdViewabilityPolicy[e.adViewabilityPolicy]:e.adViewabilityPolicy),null!=e.responsive&&e.hasOwnProperty("responsive")&&(i.responsive=e.responsive),null!=e.ratioWidth&&e.hasOwnProperty("ratioWidth")&&(i.ratioWidth=e.ratioWidth),null!=e.ratioHeight&&e.hasOwnProperty("ratioHeight")&&(i.ratioHeight=e.ratioHeight),null!=e.fixedWidth&&e.hasOwnProperty("fixedWidth")&&(i.fixedWidth=e.fixedWidth),null!=e.fixedHeight&&e.hasOwnProperty("fixedHeight")&&(i.fixedHeight=e.fixedHeight),null!=e.casting&&e.hasOwnProperty("casting")&&(i.casting=e.casting),e.sharingDestinations&&e.sharingDestinations.length){i.sharingDestinations=[];for(var s=0;s<e.sharingDestinations.length;++s)i.sharingDestinations[s]=t.enums===String?l.ProtoSharingDestination[e.sharingDestinations[s]]:e.sharingDestinations[s]}if(null!=e.closedCaption&&e.hasOwnProperty("closedCaption")&&(i.closedCaption=e.closedCaption),null!=e.muteWatermark&&e.hasOwnProperty("muteWatermark")&&(i.muteWatermark=e.muteWatermark),null!=e.expandButton&&e.hasOwnProperty("expandButton")&&(i.expandButton=e.expandButton),null!=e.closeButtonMode&&e.hasOwnProperty("closeButtonMode")&&(i.closeButtonMode=t.enums===String?l.ProtoPlayerCloseButtonMode[e.closeButtonMode]:e.closeButtonMode),null!=e.floatingMode&&e.hasOwnProperty("floatingMode")&&(i.floatingMode=t.enums===String?l.ProtoPlayerFloatingMode[e.floatingMode]:e.floatingMode),e.floatingDeviceMode&&e.floatingDeviceMode.length)for(i.floatingDeviceMode=[],s=0;s<e.floatingDeviceMode.length;++s)i.floatingDeviceMode[s]=t.enums===String?l.ProtoDeviceType[e.floatingDeviceMode[s]]:e.floatingDeviceMode[s];if(null!=e.floatingCloseButtonMode&&e.hasOwnProperty("floatingCloseButtonMode")&&(i.floatingCloseButtonMode=t.enums===String?l.ProtoPlayerCloseButtonMode[e.floatingCloseButtonMode]:e.floatingCloseButtonMode),null!=e.floatingFixedPosition&&e.hasOwnProperty("floatingFixedPosition")&&(i.floatingFixedPosition=t.enums===String?l.ProtoFloatingFixedPositionMode[e.floatingFixedPosition]:e.floatingFixedPosition),null!=e.floatingPageElement&&e.hasOwnProperty("floatingPageElement")&&(i.floatingPageElement=e.floatingPageElement),null!=e.floatingUseElementWidth&&e.hasOwnProperty("floatingUseElementWidth")&&(i.floatingUseElementWidth=e.floatingUseElementWidth),null!=e.floatingScrollPosition&&e.hasOwnProperty("floatingScrollPosition")&&(i.floatingScrollPosition=t.enums===String?l.ProtoPositionMode[e.floatingScrollPosition]:e.floatingScrollPosition),null!=e.floatingGutterX&&e.hasOwnProperty("floatingGutterX")&&(i.floatingGutterX=e.floatingGutterX),null!=e.floatingGutterY&&e.hasOwnProperty("floatingGutterY")&&(i.floatingGutterY=e.floatingGutterY),null!=e.floatingWidth&&e.hasOwnProperty("floatingWidth")&&(i.floatingWidth=e.floatingWidth),null!=e.iconsColor&&e.hasOwnProperty("iconsColor")&&(i.iconsColor=e.iconsColor),null!=e.accentColor&&e.hasOwnProperty("accentColor")&&(i.accentColor=e.accentColor),null!=e.tooltipTextColor&&e.hasOwnProperty("tooltipTextColor")&&(i.tooltipTextColor=e.tooltipTextColor),null!=e.tooltipBackgroundColor&&e.hasOwnProperty("tooltipBackgroundColor")&&(i.tooltipBackgroundColor=e.tooltipBackgroundColor),null!=e.html&&e.hasOwnProperty("html")&&(i.html=e.html),null!=e.galleryStyle&&e.hasOwnProperty("galleryStyle")&&(i.galleryStyle=t.enums===String?l.ProtoGalleryStyleMode[e.galleryStyle]:e.galleryStyle),null!=e.logoPosition&&e.hasOwnProperty("logoPosition")&&(i.logoPosition=t.enums===String?l.ProtoLogoPositionMode[e.logoPosition]:e.logoPosition),null!=e.logoUrl&&e.hasOwnProperty("logoUrl")&&(i.logoUrl=e.logoUrl),e.lineItems&&e.lineItems.length)for(i.lineItems=[],s=0;s<e.lineItems.length;++s)i.lineItems[s]=l.ProtoLineItem.toObject(e.lineItems[s],t);if(null!=e.adPlaybackMode&&e.hasOwnProperty("adPlaybackMode")&&(i.adPlaybackMode=t.enums===String?l.ProtoAdPlaybackMode[e.adPlaybackMode]:e.adPlaybackMode),null!=e.css&&e.hasOwnProperty("css")&&(i.css=e.css),null!=e.sessionId&&e.hasOwnProperty("sessionId")&&(i.sessionId=e.sessionId),null!=e.playlistId&&e.hasOwnProperty("playlistId")&&(i.playlistId=e.playlistId),null!=e.playerType&&e.hasOwnProperty("playerType")&&(i.playerType=t.enums===String?l.ProtoElementsTypeEnum[e.playerType]:e.playerType),null!=e.outstreamInitialRendering&&e.hasOwnProperty("outstreamInitialRendering")&&(i.outstreamInitialRendering=t.enums===String?l.ProtoOutstreamInitialRenderingEnum[e.outstreamInitialRendering]:e.outstreamInitialRendering),null!=e.outstreamHouseBackgroundColor&&e.hasOwnProperty("outstreamHouseBackgroundColor")&&(i.outstreamHouseBackgroundColor=e.outstreamHouseBackgroundColor),null!=e.outstreamTotalAdBreakLength&&e.hasOwnProperty("outstreamTotalAdBreakLength")&&(i.outstreamTotalAdBreakLength=e.outstreamTotalAdBreakLength),null!=e.outstreamEndAdBreakPolicy&&e.hasOwnProperty("outstreamEndAdBreakPolicy")&&(i.outstreamEndAdBreakPolicy=t.enums===String?l.ProtoOutstreamEndAdBreakPolicyEnum[e.outstreamEndAdBreakPolicy]:e.outstreamEndAdBreakPolicy),null!=e.galleryOrientation&&e.hasOwnProperty("galleryOrientation")&&(i.galleryOrientation=t.enums===String?l.ProtoGalleryOrientationEnum[e.galleryOrientation]:e.galleryOrientation),e.playlist&&e.playlist.length)for(i.playlist=[],s=0;s<e.playlist.length;++s)i.playlist[s]=l.ProtoPlaylistItem.toObject(e.playlist[s],t);if(null!=e.floatingAppendLocation&&e.hasOwnProperty("floatingAppendLocation")&&(i.floatingAppendLocation=t.enums===String?l.ProtoFloatingAppendLocationEnum[e.floatingAppendLocation]:e.floatingAppendLocation),null!=e.floatingYAxisPadding&&e.hasOwnProperty("floatingYAxisPadding")&&(i.floatingYAxisPadding=e.floatingYAxisPadding),null!=e.customJsCode&&e.hasOwnProperty("customJsCode")&&(i.customJsCode=e.customJsCode),null!=e.videoQuality&&e.hasOwnProperty("videoQuality")&&(i.videoQuality=t.enums===String?l.ProtoVideoQuality[e.videoQuality]:e.videoQuality),null!=e.initializationSettingsJson&&e.hasOwnProperty("initializationSettingsJson")&&(i.initializationSettingsJson=e.initializationSettingsJson),null!=e.adSkippability&&e.hasOwnProperty("adSkippability")&&(i.adSkippability=t.enums===String?l.ProtoPlayerAdSkippability[e.adSkippability]:e.adSkippability),null!=e.skipAdAfter&&e.hasOwnProperty("skipAdAfter")&&(i.skipAdAfter=e.skipAdAfter),e.adBreaks&&e.adBreaks.length)for(i.adBreaks=[],s=0;s<e.adBreaks.length;++s)i.adBreaks[s]=l.ProtoAdBreak.toObject(e.adBreaks[s],t);return null!=e.amazonTamSlotId&&e.hasOwnProperty("amazonTamSlotId")&&(i.amazonTamSlotId=e.amazonTamSlotId),null!=e.midRollOnlyOnLongContent&&e.hasOwnProperty("midRollOnlyOnLongContent")&&(i.midRollOnlyOnLongContent=e.midRollOnlyOnLongContent),null!=e.limitClientSideApiUse&&e.hasOwnProperty("limitClientSideApiUse")&&(i.limitClientSideApiUse=e.limitClientSideApiUse),null!=e.abTestId&&e.hasOwnProperty("abTestId")&&(i.abTestId=e.abTestId),null!=e.adsMustBeSkippableIfLongerThan&&e.hasOwnProperty("adsMustBeSkippableIfLongerThan")&&(i.adsMustBeSkippableIfLongerThan=e.adsMustBeSkippableIfLongerThan),i},O),l.ProtoElementsResponse=(A.prototype.errorMessage="",A.prototype.players=a.emptyArray,A.prototype.browser=null,A.prototype.geoLocation=null,A.prototype.lineItems=a.emptyArray,A.prototype.cookieSyncUrls=a.emptyObject,A.prototype.explorationMode=!1,A.prototype.supplyChain=null,A.prototype.secondLevelDomain="",A.prototype.userInformation=null,A.prototype.serverAb0=0,A.prototype.serverAb1=0,A.prototype.isSeoTraffic=!1,A.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i,s=void 0===t?e.len:e.pos+t,r=new l.ProtoElementsResponse;e.pos<s;){var n=e.uint32();switch(n>>>3){case 1:r.errorMessage=e.string();break;case 10:r.players&&r.players.length||(r.players=[]),r.players.push(l.ProtoElements.decode(e,e.uint32()));break;case 11:r.browser=l.Browser.decode(e,e.uint32());break;case 12:r.geoLocation=l.GeoLocation.decode(e,e.uint32());break;case 13:r.lineItems&&r.lineItems.length||(r.lineItems=[]),r.lineItems.push(l.ProtoLineItem.decode(e,e.uint32()));break;case 14:e.skip().pos++,r.cookieSyncUrls===a.emptyObject&&(r.cookieSyncUrls={}),i=e.int32(),e.pos++,r.cookieSyncUrls[i]=e.string();break;case 15:r.explorationMode=e.bool();break;case 17:r.supplyChain=l.ProtoSupplyChain.decode(e,e.uint32());break;case 18:r.secondLevelDomain=e.string();break;case 20:r.userInformation=l.ProtoUserInformation.decode(e,e.uint32());break;case 21:r.serverAb0=e.int32();break;case 22:r.serverAb1=e.int32();break;case 23:r.isSeoTraffic=e.bool();break;default:e.skipType(7&n)}}return r},A.toObject=function(e,t){var i,s={};if(((t=t||{}).arrays||t.defaults)&&(s.players=[],s.lineItems=[]),(t.objects||t.defaults)&&(s.cookieSyncUrls={}),t.defaults&&(s.errorMessage="",s.browser=null,s.geoLocation=null,s.explorationMode=!1,s.supplyChain=null,s.secondLevelDomain="",s.userInformation=null,s.serverAb0=0,s.serverAb1=0,s.isSeoTraffic=!1),null!=e.errorMessage&&e.hasOwnProperty("errorMessage")&&(s.errorMessage=e.errorMessage),e.players&&e.players.length){s.players=[];for(var r=0;r<e.players.length;++r)s.players[r]=l.ProtoElements.toObject(e.players[r],t)}if(null!=e.browser&&e.hasOwnProperty("browser")&&(s.browser=l.Browser.toObject(e.browser,t)),null!=e.geoLocation&&e.hasOwnProperty("geoLocation")&&(s.geoLocation=l.GeoLocation.toObject(e.geoLocation,t)),e.lineItems&&e.lineItems.length)for(s.lineItems=[],r=0;r<e.lineItems.length;++r)s.lineItems[r]=l.ProtoLineItem.toObject(e.lineItems[r],t);if(e.cookieSyncUrls&&(i=Object.keys(e.cookieSyncUrls)).length)for(s.cookieSyncUrls={},r=0;r<i.length;++r)s.cookieSyncUrls[i[r]]=e.cookieSyncUrls[i[r]];return null!=e.explorationMode&&e.hasOwnProperty("explorationMode")&&(s.explorationMode=e.explorationMode),null!=e.supplyChain&&e.hasOwnProperty("supplyChain")&&(s.supplyChain=l.ProtoSupplyChain.toObject(e.supplyChain,t)),null!=e.secondLevelDomain&&e.hasOwnProperty("secondLevelDomain")&&(s.secondLevelDomain=e.secondLevelDomain),null!=e.userInformation&&e.hasOwnProperty("userInformation")&&(s.userInformation=l.ProtoUserInformation.toObject(e.userInformation,t)),null!=e.serverAb0&&e.hasOwnProperty("serverAb0")&&(s.serverAb0=e.serverAb0),null!=e.serverAb1&&e.hasOwnProperty("serverAb1")&&(s.serverAb1=e.serverAb1),null!=e.isSeoTraffic&&e.hasOwnProperty("isSeoTraffic")&&(s.isSeoTraffic=e.isSeoTraffic),s},A),l.ProtoCreativeTypeEnum=(s={},(i=Object.create(s))[s[0]="ThirdParty"]=0,i[s[1]="MediaFile"]=1,i[s[2]="Rtb"]=2,i[s[3]="External"]=3,i[s[4]="HeaderBidder"]=4,i[s[7]="Tam"]=7,i[s[8]="TamDeal"]=8,i),l.ProtoResetCapTypeEnum=(s={},(i=Object.create(s))[s[0]="TimeCapping"]=0,i[s[1]="ContentCapping"]=1,i[s[2]="OpportunityCapping"]=2,i),l.ProtoAdSlotsEnum=(s={},(i=Object.create(s))[s[0]="PreRoll"]=0,i[s[1]="MidRoll"]=1,i[s[2]="PostRoll"]=2,i),l.ProtoLineItemPriority=(s={},(i=Object.create(s))[s[0]="House"]=0,i[s[1]="Default"]=1,i[s[2]="Preferred"]=2,i[s[3]="Top"]=3,i),l.ProtoAdSkipMode=(s={},(i=Object.create(s))[s[0]="IfLongerThan31Sec"]=0,i[s[1]="Always"]=1,i[s[2]="Never"]=2,i[s[3]="NotAplicable"]=3,i),l.ProtoAdType=(s={},(i=Object.create(s))[s[0]="Video"]=0,i[s[1]="Overlay"]=1,i),l.ProtoChoiceCriteriaEnum=(s={},(i=Object.create(s))[s[0]="Only"]=0,i[s[1]="Except"]=1,i),l.ProtoLineItemAdBreakTypeEnum=(s={},(i=Object.create(s))[s[1]="All"]=1,i[s[2]="SingleAd"]=2,i[s[3]="AdPod"]=3,i),l.ProtoLineItemTargetingTypeEnum=(s={},(i=Object.create(s))[s[0]="Only"]=0,i[s[1]="Except"]=1,i),l.ProtoLineItemAdSlotTargetingTypeEnum=(s={},(i=Object.create(s))[s[1]="SpecificSlots"]=1,i[s[2]="Interval"]=2,i),l.ProtoLineItemPauseAdOutOfViewEnum=(s={},(i=Object.create(s))[s[0]="Default"]=0,i[s[1]="Strict"]=1,i),l.ProtoLineItemContextualTargetingEnum=(s={},(i=Object.create(s))[s[0]="IncludeAny"]=0,i[s[1]="IncludeAll"]=1,i[s[2]="ExcludeAny"]=2,i[s[3]="ExcludeAll"]=3,i),l.ProtoSizeChoiceCriteriaEnum=(s={},(i=Object.create(s))[s[0]="GreaterThan"]=0,i[s[1]="SmallerThan"]=1,i[s[2]="Between"]=2,i),l.ProtoLineItemAdBreakTargeting=(T.prototype.adRollType=0,T.prototype.adBreakTypeEnum=1,T.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoLineItemAdBreakTargeting;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.adRollType=e.int32();break;case 2:s.adBreakTypeEnum=e.int32();break;default:e.skipType(7&r)}}return s},T.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.adRollType=t.enums===String?"None":0,i.adBreakTypeEnum=t.enums===String?"All":1),null!=e.adRollType&&e.hasOwnProperty("adRollType")&&(i.adRollType=t.enums===String?l.ProtoAdBreakTypeEnum[e.adRollType]:e.adRollType),null!=e.adBreakTypeEnum&&e.hasOwnProperty("adBreakTypeEnum")&&(i.adBreakTypeEnum=t.enums===String?l.ProtoLineItemAdBreakTypeEnum[e.adBreakTypeEnum]:e.adBreakTypeEnum),i},T),l.ProtoLineItemAdPodTargeting=(I.prototype.targetingType=0,I.prototype.adSlotTargetingType=1,I.prototype.adSlotPositions=a.emptyArray,I.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoLineItemAdPodTargeting;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.targetingType=e.int32();break;case 2:s.adSlotTargetingType=e.int32();break;case 3:if(s.adSlotPositions&&s.adSlotPositions.length||(s.adSlotPositions=[]),2==(7&r))for(var n=e.uint32()+e.pos;e.pos<n;)s.adSlotPositions.push(e.int32());else s.adSlotPositions.push(e.int32());break;default:e.skipType(7&r)}}return s},I.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.adSlotPositions=[]),t.defaults&&(i.targetingType=t.enums===String?"Only":0,i.adSlotTargetingType=t.enums===String?"SpecificSlots":1),null!=e.targetingType&&e.hasOwnProperty("targetingType")&&(i.targetingType=t.enums===String?l.ProtoLineItemTargetingTypeEnum[e.targetingType]:e.targetingType),null!=e.adSlotTargetingType&&e.hasOwnProperty("adSlotTargetingType")&&(i.adSlotTargetingType=t.enums===String?l.ProtoLineItemAdSlotTargetingTypeEnum[e.adSlotTargetingType]:e.adSlotTargetingType),e.adSlotPositions&&e.adSlotPositions.length){i.adSlotPositions=[];for(var s=0;s<e.adSlotPositions.length;++s)i.adSlotPositions[s]=e.adSlotPositions[s]}return i},I),l.ProtoLineItemAdBreakSettings=(S.prototype.adBreakTargeting=a.emptyArray,S.prototype.adPodTargeting=null,S.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoLineItemAdBreakSettings;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.adBreakTargeting&&s.adBreakTargeting.length||(s.adBreakTargeting=[]),s.adBreakTargeting.push(l.ProtoLineItemAdBreakTargeting.decode(e,e.uint32()));break;case 2:s.adPodTargeting=l.ProtoLineItemAdPodTargeting.decode(e,e.uint32());break;default:e.skipType(7&r)}}return s},S.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.adBreakTargeting=[]),t.defaults&&(i.adPodTargeting=null),e.adBreakTargeting&&e.adBreakTargeting.length){i.adBreakTargeting=[];for(var s=0;s<e.adBreakTargeting.length;++s)i.adBreakTargeting[s]=l.ProtoLineItemAdBreakTargeting.toObject(e.adBreakTargeting[s],t)}return null!=e.adPodTargeting&&e.hasOwnProperty("adPodTargeting")&&(i.adPodTargeting=l.ProtoLineItemAdPodTargeting.toObject(e.adPodTargeting,t)),i},S),l.ProtoLineItem=(P.prototype.publisherLineItemId="",P.prototype.advertiserLineItemId="",P.prototype.adTag="",P.prototype.creativeType=0,P.prototype.sound=!1,P.prototype.viewability=!1,P.prototype.impressionTimeSpent=0,P.prototype.vendorId="",P.prototype.trackers=a.emptyArray,P.prototype.duration=0,P.prototype.renditions=a.emptyArray,P.prototype.mediaCreativeId="",P.prototype.ignoreFilledRequests=!1,P.prototype.requestCap=3,P.prototype.impressionCap=0,P.prototype.successRate=0,P.prototype.lineItemPriority=0,P.prototype.headerBidderBids="",P.prototype.headerBidderTimeout=0,P.prototype.mediaCreativeClickUrl="",P.prototype.resetRequestsCapTime=60,P.prototype.resetImpressionsCapTime=60,P.prototype.resetCapType=0,P.prototype.creativeHlsFileName="",P.prototype.timeBetweenRequests=0,P.prototype.skipMode=0,P.prototype.mediaIdTargeting=null,P.prototype.mediaKeywordsTargeting=null,P.prototype.mediaLanguageTargeting=null,P.prototype.adType=0,P.prototype.overlayTime=30,P.prototype.floorPrice=0,P.prototype.adBreakSettings=null,P.prototype.floorPrices=a.emptyArray,P.prototype.bidRate=0,P.prototype.pauseAdOutOfView=0,P.prototype.moatTrackingEnabled=!1,P.prototype.cnxCreativeId="",P.prototype.blockedDomainsRevisionNumber=0,P.prototype.advertiserContextualTargeting=a.emptyArray,P.prototype.publisherContextualTargeting=a.emptyArray,P.prototype.amazonDealId="",P.prototype.playerSizeTargetings=null,P.prototype.playerSize="",P.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoLineItem;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.publisherLineItemId=e.string();break;case 2:s.advertiserLineItemId=e.string();break;case 3:s.adTag=e.string();break;case 4:s.creativeType=e.int32();break;case 6:s.sound=e.bool();break;case 7:s.viewability=e.bool();break;case 9:s.impressionTimeSpent=e.int32();break;case 10:s.vendorId=e.string();break;case 12:s.trackers&&s.trackers.length||(s.trackers=[]),s.trackers.push(l.CreativeTrackerViewModel.decode(e,e.uint32()));break;case 13:s.duration=e.int32();break;case 14:s.renditions&&s.renditions.length||(s.renditions=[]),s.renditions.push(l.ProtoRendition.decode(e,e.uint32()));break;case 15:s.mediaCreativeId=e.string();break;case 16:s.ignoreFilledRequests=e.bool();break;case 17:s.requestCap=e.int32();break;case 18:s.impressionCap=e.int32();break;case 19:s.successRate=e.double();break;case 20:s.lineItemPriority=e.int32();break;case 21:s.headerBidderBids=e.string();break;case 22:s.headerBidderTimeout=e.int32();break;case 23:s.mediaCreativeClickUrl=e.string();break;case 24:s.resetRequestsCapTime=e.int32();break;case 25:s.resetImpressionsCapTime=e.int32();break;case 26:s.resetCapType=e.int32();break;case 27:s.creativeHlsFileName=e.string();break;case 28:s.timeBetweenRequests=e.int32();break;case 29:s.skipMode=e.int32();break;case 30:s.mediaIdTargeting=l.ProtoTargetingChoiceModel.decode(e,e.uint32());break;case 31:s.mediaKeywordsTargeting=l.ProtoTargetingChoiceModel.decode(e,e.uint32());break;case 32:s.mediaLanguageTargeting=l.ProtoTargetingChoiceModel.decode(e,e.uint32());break;case 33:s.adType=e.int32();break;case 34:s.overlayTime=e.int32();break;case 35:s.floorPrice=e.double();break;case 36:s.adBreakSettings=l.ProtoLineItemAdBreakSettings.decode(e,e.uint32());break;case 38:if(s.floorPrices&&s.floorPrices.length||(s.floorPrices=[]),2==(7&r))for(var n=e.uint32()+e.pos;e.pos<n;)s.floorPrices.push(e.double());else s.floorPrices.push(e.double());break;case 39:s.bidRate=e.double();break;case 40:s.pauseAdOutOfView=e.int32();break;case 41:s.moatTrackingEnabled=e.bool();break;case 42:s.cnxCreativeId=e.string();break;case 44:s.blockedDomainsRevisionNumber=e.int32();break;case 45:s.advertiserContextualTargeting&&s.advertiserContextualTargeting.length||(s.advertiserContextualTargeting=[]),s.advertiserContextualTargeting.push(l.ProtoContextualTargetingCaseModel.decode(e,e.uint32()));break;case 46:s.publisherContextualTargeting&&s.publisherContextualTargeting.length||(s.publisherContextualTargeting=[]),s.publisherContextualTargeting.push(l.ProtoContextualTargetingCaseModel.decode(e,e.uint32()));break;case 48:s.amazonDealId=e.string();break;case 47:s.playerSizeTargetings=l.ProtoPlayerSizeTargetings.decode(e,e.uint32());break;case 101:s.playerSize=e.string();break;default:e.skipType(7&r)}}return s},P.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.trackers=[],i.renditions=[],i.floorPrices=[],i.advertiserContextualTargeting=[],i.publisherContextualTargeting=[]),t.defaults&&(i.publisherLineItemId="",i.advertiserLineItemId="",i.adTag="",i.creativeType=t.enums===String?"ThirdParty":0,i.sound=!1,i.viewability=!1,i.impressionTimeSpent=0,i.vendorId="",i.duration=0,i.mediaCreativeId="",i.ignoreFilledRequests=!1,i.requestCap=3,i.impressionCap=0,i.successRate=0,i.lineItemPriority=t.enums===String?"House":0,i.headerBidderBids="",i.headerBidderTimeout=0,i.mediaCreativeClickUrl="",i.resetRequestsCapTime=60,i.resetImpressionsCapTime=60,i.resetCapType=t.enums===String?"TimeCapping":0,i.creativeHlsFileName="",i.timeBetweenRequests=0,i.skipMode=t.enums===String?"IfLongerThan31Sec":0,i.mediaIdTargeting=null,i.mediaKeywordsTargeting=null,i.mediaLanguageTargeting=null,i.adType=t.enums===String?"Video":0,i.overlayTime=30,i.floorPrice=0,i.adBreakSettings=null,i.bidRate=0,i.pauseAdOutOfView=t.enums===String?"Default":0,i.moatTrackingEnabled=!1,i.cnxCreativeId="",i.blockedDomainsRevisionNumber=0,i.playerSizeTargetings=null,i.amazonDealId="",i.playerSize=""),null!=e.publisherLineItemId&&e.hasOwnProperty("publisherLineItemId")&&(i.publisherLineItemId=e.publisherLineItemId),null!=e.advertiserLineItemId&&e.hasOwnProperty("advertiserLineItemId")&&(i.advertiserLineItemId=e.advertiserLineItemId),null!=e.adTag&&e.hasOwnProperty("adTag")&&(i.adTag=e.adTag),null!=e.creativeType&&e.hasOwnProperty("creativeType")&&(i.creativeType=t.enums===String?l.ProtoCreativeTypeEnum[e.creativeType]:e.creativeType),null!=e.sound&&e.hasOwnProperty("sound")&&(i.sound=e.sound),null!=e.viewability&&e.hasOwnProperty("viewability")&&(i.viewability=e.viewability),null!=e.impressionTimeSpent&&e.hasOwnProperty("impressionTimeSpent")&&(i.impressionTimeSpent=e.impressionTimeSpent),null!=e.vendorId&&e.hasOwnProperty("vendorId")&&(i.vendorId=e.vendorId),e.trackers&&e.trackers.length){i.trackers=[];for(var s=0;s<e.trackers.length;++s)i.trackers[s]=l.CreativeTrackerViewModel.toObject(e.trackers[s],t)}if(null!=e.duration&&e.hasOwnProperty("duration")&&(i.duration=e.duration),e.renditions&&e.renditions.length)for(i.renditions=[],s=0;s<e.renditions.length;++s)i.renditions[s]=l.ProtoRendition.toObject(e.renditions[s],t);if(null!=e.mediaCreativeId&&e.hasOwnProperty("mediaCreativeId")&&(i.mediaCreativeId=e.mediaCreativeId),null!=e.ignoreFilledRequests&&e.hasOwnProperty("ignoreFilledRequests")&&(i.ignoreFilledRequests=e.ignoreFilledRequests),null!=e.requestCap&&e.hasOwnProperty("requestCap")&&(i.requestCap=e.requestCap),null!=e.impressionCap&&e.hasOwnProperty("impressionCap")&&(i.impressionCap=e.impressionCap),null!=e.successRate&&e.hasOwnProperty("successRate")&&(i.successRate=t.json&&!isFinite(e.successRate)?String(e.successRate):e.successRate),null!=e.lineItemPriority&&e.hasOwnProperty("lineItemPriority")&&(i.lineItemPriority=t.enums===String?l.ProtoLineItemPriority[e.lineItemPriority]:e.lineItemPriority),null!=e.headerBidderBids&&e.hasOwnProperty("headerBidderBids")&&(i.headerBidderBids=e.headerBidderBids),null!=e.headerBidderTimeout&&e.hasOwnProperty("headerBidderTimeout")&&(i.headerBidderTimeout=e.headerBidderTimeout),null!=e.mediaCreativeClickUrl&&e.hasOwnProperty("mediaCreativeClickUrl")&&(i.mediaCreativeClickUrl=e.mediaCreativeClickUrl),null!=e.resetRequestsCapTime&&e.hasOwnProperty("resetRequestsCapTime")&&(i.resetRequestsCapTime=e.resetRequestsCapTime),null!=e.resetImpressionsCapTime&&e.hasOwnProperty("resetImpressionsCapTime")&&(i.resetImpressionsCapTime=e.resetImpressionsCapTime),null!=e.resetCapType&&e.hasOwnProperty("resetCapType")&&(i.resetCapType=t.enums===String?l.ProtoResetCapTypeEnum[e.resetCapType]:e.resetCapType),null!=e.creativeHlsFileName&&e.hasOwnProperty("creativeHlsFileName")&&(i.creativeHlsFileName=e.creativeHlsFileName),null!=e.timeBetweenRequests&&e.hasOwnProperty("timeBetweenRequests")&&(i.timeBetweenRequests=e.timeBetweenRequests),null!=e.skipMode&&e.hasOwnProperty("skipMode")&&(i.skipMode=t.enums===String?l.ProtoAdSkipMode[e.skipMode]:e.skipMode),null!=e.mediaIdTargeting&&e.hasOwnProperty("mediaIdTargeting")&&(i.mediaIdTargeting=l.ProtoTargetingChoiceModel.toObject(e.mediaIdTargeting,t)),null!=e.mediaKeywordsTargeting&&e.hasOwnProperty("mediaKeywordsTargeting")&&(i.mediaKeywordsTargeting=l.ProtoTargetingChoiceModel.toObject(e.mediaKeywordsTargeting,t)),null!=e.mediaLanguageTargeting&&e.hasOwnProperty("mediaLanguageTargeting")&&(i.mediaLanguageTargeting=l.ProtoTargetingChoiceModel.toObject(e.mediaLanguageTargeting,t)),null!=e.adType&&e.hasOwnProperty("adType")&&(i.adType=t.enums===String?l.ProtoAdType[e.adType]:e.adType),null!=e.overlayTime&&e.hasOwnProperty("overlayTime")&&(i.overlayTime=e.overlayTime),null!=e.floorPrice&&e.hasOwnProperty("floorPrice")&&(i.floorPrice=t.json&&!isFinite(e.floorPrice)?String(e.floorPrice):e.floorPrice),null!=e.adBreakSettings&&e.hasOwnProperty("adBreakSettings")&&(i.adBreakSettings=l.ProtoLineItemAdBreakSettings.toObject(e.adBreakSettings,t)),e.floorPrices&&e.floorPrices.length)for(i.floorPrices=[],s=0;s<e.floorPrices.length;++s)i.floorPrices[s]=t.json&&!isFinite(e.floorPrices[s])?String(e.floorPrices[s]):e.floorPrices[s];if(null!=e.bidRate&&e.hasOwnProperty("bidRate")&&(i.bidRate=t.json&&!isFinite(e.bidRate)?String(e.bidRate):e.bidRate),null!=e.pauseAdOutOfView&&e.hasOwnProperty("pauseAdOutOfView")&&(i.pauseAdOutOfView=t.enums===String?l.ProtoLineItemPauseAdOutOfViewEnum[e.pauseAdOutOfView]:e.pauseAdOutOfView),null!=e.moatTrackingEnabled&&e.hasOwnProperty("moatTrackingEnabled")&&(i.moatTrackingEnabled=e.moatTrackingEnabled),null!=e.cnxCreativeId&&e.hasOwnProperty("cnxCreativeId")&&(i.cnxCreativeId=e.cnxCreativeId),null!=e.blockedDomainsRevisionNumber&&e.hasOwnProperty("blockedDomainsRevisionNumber")&&(i.blockedDomainsRevisionNumber=e.blockedDomainsRevisionNumber),e.advertiserContextualTargeting&&e.advertiserContextualTargeting.length)for(i.advertiserContextualTargeting=[],s=0;s<e.advertiserContextualTargeting.length;++s)i.advertiserContextualTargeting[s]=l.ProtoContextualTargetingCaseModel.toObject(e.advertiserContextualTargeting[s],t);if(e.publisherContextualTargeting&&e.publisherContextualTargeting.length)for(i.publisherContextualTargeting=[],s=0;s<e.publisherContextualTargeting.length;++s)i.publisherContextualTargeting[s]=l.ProtoContextualTargetingCaseModel.toObject(e.publisherContextualTargeting[s],t);return null!=e.playerSizeTargetings&&e.hasOwnProperty("playerSizeTargetings")&&(i.playerSizeTargetings=l.ProtoPlayerSizeTargetings.toObject(e.playerSizeTargetings,t)),null!=e.amazonDealId&&e.hasOwnProperty("amazonDealId")&&(i.amazonDealId=e.amazonDealId),null!=e.playerSize&&e.hasOwnProperty("playerSize")&&(i.playerSize=e.playerSize),i},P),l.ProtoTargetingChoiceModel=(v.prototype.choiceCriteria=0,v.prototype.items=a.emptyArray,v.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoTargetingChoiceModel;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.choiceCriteria=e.int32();break;case 2:s.items&&s.items.length||(s.items=[]),s.items.push(e.string());break;default:e.skipType(7&r)}}return s},v.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.items=[]),t.defaults&&(i.choiceCriteria=t.enums===String?"Only":0),null!=e.choiceCriteria&&e.hasOwnProperty("choiceCriteria")&&(i.choiceCriteria=t.enums===String?l.ProtoChoiceCriteriaEnum[e.choiceCriteria]:e.choiceCriteria),e.items&&e.items.length){i.items=[];for(var s=0;s<e.items.length;++s)i.items[s]=e.items[s]}return i},v),l.ProtoContextualTargetingCaseModel=(b.prototype.filters=a.emptyArray,b.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoContextualTargetingCaseModel;e.pos<i;){var r=e.uint32();r>>>3==1?(s.filters&&s.filters.length||(s.filters=[]),s.filters.push(l.ProtoContextualTargetingFilterModel.decode(e,e.uint32()))):e.skipType(7&r)}return s},b.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.filters=[]),e.filters&&e.filters.length){i.filters=[];for(var s=0;s<e.filters.length;++s)i.filters[s]=l.ProtoContextualTargetingFilterModel.toObject(e.filters[s],t)}return i},b),l.ProtoContextualTargetingFilterModel=(y.prototype.type=0,y.prototype.items=a.emptyArray,y.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoContextualTargetingFilterModel;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.type=e.int32();break;case 2:s.items&&s.items.length||(s.items=[]),s.items.push(e.string());break;default:e.skipType(7&r)}}return s},y.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.items=[]),t.defaults&&(i.type=t.enums===String?"IncludeAny":0),null!=e.type&&e.hasOwnProperty("type")&&(i.type=t.enums===String?l.ProtoLineItemContextualTargetingEnum[e.type]:e.type),e.items&&e.items.length){i.items=[];for(var s=0;s<e.items.length;++s)i.items[s]=e.items[s]}return i},y),l.ProtoPlayerSizeTargetings=(f.prototype.sizeChoiceCriteria=0,f.prototype.minWidth=0,f.prototype.maxWidth=0,f.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoPlayerSizeTargetings;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.sizeChoiceCriteria=e.int32();break;case 2:s.minWidth=e.int32();break;case 3:s.maxWidth=e.int32();break;default:e.skipType(7&r)}}return s},f.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.sizeChoiceCriteria=t.enums===String?"GreaterThan":0,i.minWidth=0,i.maxWidth=0),null!=e.sizeChoiceCriteria&&e.hasOwnProperty("sizeChoiceCriteria")&&(i.sizeChoiceCriteria=t.enums===String?l.ProtoSizeChoiceCriteriaEnum[e.sizeChoiceCriteria]:e.sizeChoiceCriteria),null!=e.minWidth&&e.hasOwnProperty("minWidth")&&(i.minWidth=e.minWidth),null!=e.maxWidth&&e.hasOwnProperty("maxWidth")&&(i.maxWidth=e.maxWidth),i},f),l.ProtoTrackerType=(s={},(i=Object.create(s))[s[0]="Image"]=0,i[s[1]="Javascript"]=1,i),l.ProtoTrackerTriggerType=(s={},(i=Object.create(s))[s[0]="Impression"]=0,i[s[1]="Complete25Pc"]=1,i[s[2]="Complete50Pc"]=2,i[s[3]="Complete75Pc"]=3,i[s[4]="ViewCompletion"]=4,i[s[5]="VideoClick"]=5,i[s[6]="Pause"]=6,i[s[7]="Resume"]=7,i[s[8]="Mute"]=8,i[s[9]="Unmute"]=9,i),l.CreativeTrackerViewModel=(m.prototype.type=0,m.prototype.trigger=0,m.prototype.url="",m.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.CreativeTrackerViewModel;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.type=e.int32();break;case 2:s.trigger=e.int32();break;case 3:s.url=e.string();break;default:e.skipType(7&r)}}return s},m.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.type=t.enums===String?"Image":0,i.trigger=t.enums===String?"Impression":0,i.url=""),null!=e.type&&e.hasOwnProperty("type")&&(i.type=t.enums===String?l.ProtoTrackerType[e.type]:e.type),null!=e.trigger&&e.hasOwnProperty("trigger")&&(i.trigger=t.enums===String?l.ProtoTrackerTriggerType[e.trigger]:e.trigger),null!=e.url&&e.hasOwnProperty("url")&&(i.url=e.url),i},m),l.ProtoRendition=(g.prototype.height=0,g.prototype.codec="",g.prototype.file="",g.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoRendition;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.height=e.int32();break;case 2:s.codec=e.string();break;case 3:s.file=e.string();break;default:e.skipType(7&r)}}return s},g.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.height=0,i.codec="",i.file=""),null!=e.height&&e.hasOwnProperty("height")&&(i.height=e.height),null!=e.codec&&e.hasOwnProperty("codec")&&(i.codec=e.codec),null!=e.file&&e.hasOwnProperty("file")&&(i.file=e.file),i},g),l.ProtoPlayerPlaybackModeEnum=(s={},(i=Object.create(s))[s[0]="Autoplay"]=0,i[s[1]="ScrollToPlay"]=1,i[s[2]="ClickToPlay"]=2,i),l.ProtoPlayerCloseButtonMode=(s={},(i=Object.create(s))[s[0]="Off"]=0,i[s[1]="OnHover"]=1,i[s[2]="OnHoverAfterFirstAd"]=2,i[s[3]="AlwaysOn"]=3,i),l.ProtoPlayerFloatingMode=(s={},(i=Object.create(s))[s[0]="Off"]=0,i[s[1]="OnPageLoad"]=1,i[s[2]="AfterInView"]=2,i[s[3]="Always"]=3,i),l.ProtoPlayerSoundMode=(s={},(i=Object.create(s))[s[0]="Mute"]=0,i[s[1]="On"]=1,i[s[2]="Hover"]=2,i),l.ProtoPlayerInsertMode=(s={},(i=Object.create(s))[s[0]="WithinContainer"]=0,i[s[1]="BeforeContainer"]=1,i[s[2]="AfterContainer"]=2,i[s[3]="ReplaceContainer"]=3,i[s[4]="HideContainer"]=4,i),l.ProtoAdViewabilityPolicy=(s={},(i=Object.create(s))[s[0]="Default"]=0,i[s[1]="Strict"]=1,i),l.ProtoSharingDestination=(s={},(i=Object.create(s))[s[0]="Facebook"]=0,i[s[1]="Twitter"]=1,i[s[2]="LinkedIn"]=2,i),l.ProtoFloatingFixedPositionMode=(s={},(i=Object.create(s))[s[0]="Page"]=0,i[s[1]="Element"]=1,i),l.ProtoPositionMode=(s={},(i=Object.create(s))[s[0]="BottomRight"]=0,i[s[1]="BottomLeft"]=1,i[s[2]="TopRight"]=2,i[s[3]="TopLeft"]=3,i),l.ProtoAdPlaybackMode=(s={},(i=Object.create(s))[s[0]="Autoplay"]=0,i[s[1]="ScrollToPlay"]=1,i),l.ProtoFloatingAppendLocationEnum=(s={},(i=Object.create(s))[s[0]="Above"]=0,i[s[1]="Below"]=1,i[s[2]="Within"]=2,i),l.ProtoPlayerAdSkippability=(s={},(i=Object.create(s))[s[0]="IfLongerThan"]=0,i[s[1]="Always"]=1,i[s[2]="NoRestrictions"]=2,i),l.ProtoVideoQuality=(s={},(i=Object.create(s))[s[0]="Auto"]=0,i[s[1]="High1080p"]=1,i[s[2]="High720p"]=2,i[s[3]="Medium360p"]=3,i),l.ProtoImplementationType=(s={},(i=Object.create(s))[s[0]="Web"]=0,i[s[1]="Amp"]=1,i),l.ProtoAdBreakTypeEnum=(s={},(i=Object.create(s))[s[0]="None"]=0,i[s[1]="PreRoll"]=1,i[s[2]="MidRoll"]=2,i[s[3]="PostRoll"]=3,i),l.ProtoAdSlotAdTypeEnum=(s={},(i=Object.create(s))[s[0]="SingleAd"]=0,i[s[1]="AdPod"]=1,i),l.ProtoDeviceType=(s={},(i=Object.create(s))[s[0]="Desktop"]=0,i[s[1]="Smartphone"]=1,i[s[2]="Tablet"]=2,i[s[3]="GameConsole"]=3,i[s[4]="SmartTV"]=4,i[s[5]="WearableComputer"]=5,i[s[6]="PDA"]=6,i[s[7]="Unrecognized"]=7,i),l.Browser=(p.prototype.browserVersion="",p.prototype.browserType="",p.prototype.osCode="",p.prototype.device=0,p.encode=function(e,t){return t=t||n.create(),null!=e.browserVersion&&e.hasOwnProperty("browserVersion")&&t.uint32(10).string(e.browserVersion),null!=e.browserType&&e.hasOwnProperty("browserType")&&t.uint32(18).string(e.browserType),null!=e.osCode&&e.hasOwnProperty("osCode")&&t.uint32(26).string(e.osCode),null!=e.device&&e.hasOwnProperty("device")&&t.uint32(32).int32(e.device),t},p.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.Browser;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.browserVersion=e.string();break;case 2:s.browserType=e.string();break;case 3:s.osCode=e.string();break;case 4:s.device=e.int32();break;default:e.skipType(7&r)}}return s},p.fromObject=function(e){if(e instanceof l.Browser)return e;var t=new l.Browser;switch(null!=e.browserVersion&&(t.browserVersion=String(e.browserVersion)),null!=e.browserType&&(t.browserType=String(e.browserType)),null!=e.osCode&&(t.osCode=String(e.osCode)),e.device){case"Desktop":case 0:t.device=0;break;case"Smartphone":case 1:t.device=1;break;case"Tablet":case 2:t.device=2;break;case"GameConsole":case 3:t.device=3;break;case"SmartTV":case 4:t.device=4;break;case"WearableComputer":case 5:t.device=5;break;case"PDA":case 6:t.device=6;break;case"Unrecognized":case 7:t.device=7}return t},p.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.browserVersion="",i.browserType="",i.osCode="",i.device=t.enums===String?"Desktop":0),null!=e.browserVersion&&e.hasOwnProperty("browserVersion")&&(i.browserVersion=e.browserVersion),null!=e.browserType&&e.hasOwnProperty("browserType")&&(i.browserType=e.browserType),null!=e.osCode&&e.hasOwnProperty("osCode")&&(i.osCode=e.osCode),null!=e.device&&e.hasOwnProperty("device")&&(i.device=t.enums===String?l.ProtoDeviceType[e.device]:e.device),i},p.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},p),l.GeoLocation=(u.prototype.countryGeoId=0,u.prototype.cityId=0,u.prototype.subdivisionId=0,u.prototype.dmaId=0,u.prototype.ip="",u.prototype.lat=0,u.prototype.lon=0,u.encode=function(e,t){return t=t||n.create(),null!=e.countryGeoId&&e.hasOwnProperty("countryGeoId")&&t.uint32(8).int32(e.countryGeoId),null!=e.cityId&&e.hasOwnProperty("cityId")&&t.uint32(16).int32(e.cityId),null!=e.subdivisionId&&e.hasOwnProperty("subdivisionId")&&t.uint32(24).int32(e.subdivisionId),null!=e.dmaId&&e.hasOwnProperty("dmaId")&&t.uint32(32).int32(e.dmaId),null!=e.ip&&e.hasOwnProperty("ip")&&t.uint32(42).string(e.ip),null!=e.lat&&e.hasOwnProperty("lat")&&t.uint32(49).double(e.lat),null!=e.lon&&e.hasOwnProperty("lon")&&t.uint32(57).double(e.lon),t},u.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.GeoLocation;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.countryGeoId=e.int32();break;case 2:s.cityId=e.int32();break;case 3:s.subdivisionId=e.int32();break;case 4:s.dmaId=e.int32();break;case 5:s.ip=e.string();break;case 6:s.lat=e.double();break;case 7:s.lon=e.double();break;default:e.skipType(7&r)}}return s},u.fromObject=function(e){if(e instanceof l.GeoLocation)return e;var t=new l.GeoLocation;return null!=e.countryGeoId&&(t.countryGeoId=0|e.countryGeoId),null!=e.cityId&&(t.cityId=0|e.cityId),null!=e.subdivisionId&&(t.subdivisionId=0|e.subdivisionId),null!=e.dmaId&&(t.dmaId=0|e.dmaId),null!=e.ip&&(t.ip=String(e.ip)),null!=e.lat&&(t.lat=Number(e.lat)),null!=e.lon&&(t.lon=Number(e.lon)),t},u.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.countryGeoId=0,i.cityId=0,i.subdivisionId=0,i.dmaId=0,i.ip="",i.lat=0,i.lon=0),null!=e.countryGeoId&&e.hasOwnProperty("countryGeoId")&&(i.countryGeoId=e.countryGeoId),null!=e.cityId&&e.hasOwnProperty("cityId")&&(i.cityId=e.cityId),null!=e.subdivisionId&&e.hasOwnProperty("subdivisionId")&&(i.subdivisionId=e.subdivisionId),null!=e.dmaId&&e.hasOwnProperty("dmaId")&&(i.dmaId=e.dmaId),null!=e.ip&&e.hasOwnProperty("ip")&&(i.ip=e.ip),null!=e.lat&&e.hasOwnProperty("lat")&&(i.lat=t.json&&!isFinite(e.lat)?String(e.lat):e.lat),null!=e.lon&&e.hasOwnProperty("lon")&&(i.lon=t.json&&!isFinite(e.lon)?String(e.lon):e.lon),i},u.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},u),l.ProtoSupplyChain=(h.prototype.businessDomain="",h.prototype.supplyChainId="",h.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoSupplyChain;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.businessDomain=e.string();break;case 3:s.supplyChainId=e.string();break;default:e.skipType(7&r)}}return s},h.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.businessDomain="",i.supplyChainId=""),null!=e.businessDomain&&e.hasOwnProperty("businessDomain")&&(i.businessDomain=e.businessDomain),null!=e.supplyChainId&&e.hasOwnProperty("supplyChainId")&&(i.supplyChainId=e.supplyChainId),i},h),l.ProtoUserInformation=(d.prototype.userId="",d.prototype.lookupId="",d.prototype.lookupResponseCode=0,d.prototype.callFraudSensor=!1,d.prototype.publisherAdsTxt="",d.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoUserInformation;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:s.userId=e.string();break;case 3:s.lookupId=e.string();break;case 4:s.lookupResponseCode=e.int32();break;case 5:s.callFraudSensor=e.bool();break;case 6:s.publisherAdsTxt=e.string();break;default:e.skipType(7&r)}}return s},d.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.userId="",i.lookupId="",i.lookupResponseCode=0,i.callFraudSensor=!1,i.publisherAdsTxt=""),null!=e.userId&&e.hasOwnProperty("userId")&&(i.userId=e.userId),null!=e.lookupId&&e.hasOwnProperty("lookupId")&&(i.lookupId=e.lookupId),null!=e.lookupResponseCode&&e.hasOwnProperty("lookupResponseCode")&&(i.lookupResponseCode=e.lookupResponseCode),null!=e.callFraudSensor&&e.hasOwnProperty("callFraudSensor")&&(i.callFraudSensor=e.callFraudSensor),null!=e.publisherAdsTxt&&e.hasOwnProperty("publisherAdsTxt")&&(i.publisherAdsTxt=e.publisherAdsTxt),i},d),l.ProtoAdBreak=(c.prototype.types=a.emptyArray,c.prototype.maxAdPodDuration=0,c.prototype.maxAdSlotDuration=180,c.prototype.numberOfAdSlots=1,c.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,s=new l.ProtoAdBreak;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:if(s.types&&s.types.length||(s.types=[]),2==(7&r))for(var n=e.uint32()+e.pos;e.pos<n;)s.types.push(e.int32());else s.types.push(e.int32());break;case 2:s.maxAdPodDuration=e.int32();break;case 3:s.maxAdSlotDuration=e.int32();break;case 4:s.numberOfAdSlots=e.int32();break;default:e.skipType(7&r)}}return s},c.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.types=[]),t.defaults&&(i.maxAdPodDuration=0,i.maxAdSlotDuration=180,i.numberOfAdSlots=1),e.types&&e.types.length){i.types=[];for(var s=0;s<e.types.length;++s)i.types[s]=t.enums===String?l.ProtoAdBreakTypeEnum[e.types[s]]:e.types[s]}return null!=e.maxAdPodDuration&&e.hasOwnProperty("maxAdPodDuration")&&(i.maxAdPodDuration=e.maxAdPodDuration),null!=e.maxAdSlotDuration&&e.hasOwnProperty("maxAdSlotDuration")&&(i.maxAdSlotDuration=e.maxAdSlotDuration),null!=e.numberOfAdSlots&&e.hasOwnProperty("numberOfAdSlots")&&(i.numberOfAdSlots=e.numberOfAdSlots),i},c),e.exports=l},function(e,t,i){"use strict";i.d(t,"j",function(){return s}),i.d(t,"k",function(){return r}),i.d(t,"i",function(){return n}),i.d(t,"d",function(){return o}),i.d(t,"g",function(){return a}),i.d(t,"h",function(){return l}),i.d(t,"b",function(){return c}),i.d(t,"f",function(){return d}),i.d(t,"c",function(){return h}),i.d(t,"e",function(){return u}),i.d(t,"a",function(){return p});const s="1.3.13-iab2343",r="1.3.13-iab2343",n="Connatix";var o,a,l,c,d,h,u,p;(t=o=o||{}).Generic="generic",t.Video="video",(t=a=a||{}).Click="click",t.InvitationAccept="invitationAccept",(t=l=l||{}).PreRoll="preroll",t.MidRoll="midroll",t.PostRoll="postroll",t.Standalone="standalone",(t=c=c||{}).SessionStart="sessionStart",t.SessionError="sessionError",t.SessionFinish="sessionFinish",(t=d=d||{}).DefinedByJavascript="definedByJavaScript",t.BeginToRender="beginToRender",(t=h=h||{}).DefinedByJavascript="definedByJavaScript",t.Video="video",(t=u=u||{}).sessionError="sessionError",t.geometryChange="geometryChange",(t=p=p||{}).backgrounded="backgrounded",t.notFound="notFound"},function(e,t,i){"use strict";i.d(t,"f",function(){return s}),i.d(t,"g",function(){return r}),i.d(t,"h",function(){return n}),i.d(t,"d",function(){return o}),i.d(t,"b",function(){return a}),i.d(t,"a",function(){return l}),i.d(t,"e",function(){return c}),i.d(t,"c",function(){return d});const s=200,r=.9,n=1.1,o=31,a=2e3,l=1e3,c=.5,d="connatix.com"},function(e,t,i){"use strict";var s;i.d(t,"c",function(){return s}),i.d(t,"a",function(){return r}),i.d(t,"b",function(){return n}),(t=s=s||{}).Connatix="143",t.AppNexus="32",t.DistrictM="144",t.IndexExchange="10",t.Lkqd="237",t.OneVideo="25",t.Openx="69",t.Pubmatic="76",t.RhythmOne="36",t.Rubicon="52",t.Spotx="165",t.Telaria="202",t.MediaNet="142",t.AdMan="149",t.IronSource="",t.Undertone="677",t.SynacorMedia="",t.AmxRTB="737",t.Smaato="82";const r="cnx_usr_storage",n=["1YNY"]},,function(e,t,i){"use strict";i.d(t,"a",function(){return s});class s{}s.MaxLogOverflow=1e3,s.maxLogOverflowCount={},s.logCount={},s.maxLogSent={},s.sessionId="",s.pageFocus=!1,s.incrementLogCount=e=>{s.logCount[e]?(++s.maxLogOverflowCount[e],++s.logCount[e]):(s.logCount[e]=1,s.maxLogOverflowCount[e]=1)},s.isMaxLog=(e,t)=>!!(s.logCount[e]&&s.logCount[e]>t),s.isMaxLogOverflow=e=>s.maxLogOverflowCount[e]>s.MaxLogOverflow&&(s.maxLogOverflowCount[e]=1,!0),s.setMaxLogSent=e=>{s.maxLogSent[e]=!0},s.isMaxLogSent=e=>!!s.maxLogSent[e]},function(e,t,i){"use strict";i.d(t,"a",function(){return s}),i.d(t,"c",function(){return o}),i.d(t,"b",function(){return a});var r=i(7),n=i(1);const s=t=>Object.keys(t).map(e=>t[e]);function o(e){for(const t in e)e.hasOwnProperty(t)&&"string"==typeof e[t]&&(e[t]=`%22${encodeURIComponent(e[t])}%22`);return JSON.stringify(e).cnx_replaceAll('"',"")}function a(t,i){if(!Object(n.f)(t)||!Object(n.f)(i))return!1;const e=Object.getOwnPropertyNames(t),s=Object.getOwnPropertyNames(i);return e.length===s.length&&e.every(e=>Object(r.i)(t[e],i[e]))}},function(e,t,i){"use strict";i.d(t,"a",function(){return n}),i.d(t,"d",function(){return o}),i.d(t,"b",function(){return a}),i.d(t,"f",function(){return l}),i.d(t,"e",function(){return c}),i.d(t,"c",function(){return d});var r=i(1),s=i(11);function n(e){let t,i;return Object(r.g)(e)&&(t=e.match(s.b))&&(i=parseInt(t[1],10)*s.d+parseInt(t[2],10)*s.e+parseInt(t[3],10)*s.f+parseInt(t[5]||0,10)),isNaN(i)?null:i}function o(e,t){return/^\d+(\.\d+)?%$/g.test(e)?t?t*parseFloat(e.replace("%",""))/100:null:n(e)}function a(e){return Date.now()+e*s.a}function l(e,t=":"){var i=e=>10<=e?e:`0${e}`;return`${i(Math.floor(e/60))}${t}${i(Math.floor(e%60))}`}function c(t){t=Date.parse(t+" GMT");if(Object(r.d)(t)){var i=Math.floor((Date.parse(new Date(Date.now()).toUTCString())-t)/1e3);if(!Object(r.e)(i))return"just now";var s=[{value:1,symbol:"s"},{value:60,symbol:"m"},{value:3599,symbol:"h"},{value:86399,symbol:"d"}];let e;for(e=s.length-1;0<e&&!(i>=s[e].value);e--);return Math.floor(i/s[e].value).toFixed(0)+s[e].symbol+" ago"}}function d(e,t){var i=Date.now();return!(i<e||t<i)}},function(e,t,i){"use strict";i.d(t,"a",function(){return s}),i.d(t,"b",function(){return r});const s="https://connatix.com/privacy-policy/",r="v"},function(e,i,t){"use strict";function s(e){for(var t in e)i.hasOwnProperty(t)||(i[t]=e[t])}Object.defineProperty(i,"_",{value:!0}),s(t(149)),s(t(150)),s(t(151)),s(t(152))},function(e,t,i){"use strict";i.d(t,"b",function(){return n}),i.d(t,"a",function(){return o});class s{}s.clientAb0=0,s.clientAb1=0;class r{}var n;r.clientAb0=0,r.clientAb1=0,(t=n=n||{})[t.ElementsABService=0]="ElementsABService",t[t.PlayspaceABService=1]="PlayspaceABService";class o{static get clientAb0(){return this.getABValueForKey("clientAb0")}static get clientAb1(){return this.getABValueForKey("clientAb1")}static getABValueForKey(e){return(this.abServiceType!==n.PlayspaceABService?s:r)[e]}}},function(e,i,t){"use strict";function s(e){for(var t in e)i.hasOwnProperty(t)||(i[t]=e[t])}Object.defineProperty(i,"_",{value:!0}),s(t(73)),s(t(153)),s(t(74)),s(t(75)),s(t(154)),s(t(61)),s(t(76)),s(t(155)),s(t(156))},function(e,t,i){"use strict";i.d(t,"a",function(){return o});var s=i(10),r=i(4),n=i(26);class o{static Ri(){var e=o.Bi;return o.Bi++,e}static Di(e){return o.Fi[e]}static $i(e){e.forEach(e=>{o.Fi[e.advertiserLineItemId]&&o.addCustomHistoryLine("duplicate",{id:e.advertiserLineItemId}),o.Fi[e.advertiserLineItemId]=o.Ri()})}static Ui(e){return e.map(e=>({advertiserLineItemId:e.advertiserLineItemId,creativeType:e.creativeType,impressionTimeout:e.impressionTimeSpent,lineItemPriority:e.lineItemPriority,playerSize:e.playerSize,requestCap:e.requestCap,sound:e.sound,viewability:e.viewability}))}static setClientSideAdList(e){o.Vi&&(o.Ni=o.Ui(JSON.parse(JSON.stringify(e))),o.$i(o.Ni))}static setRtbAdList(e){o.Vi&&(o.Hi=o.Ui(JSON.parse(JSON.stringify(e))),o.$i(o.Hi))}static setHeaderBidderAdList(e){o.Vi&&(o.qi=o.Ui(JSON.parse(JSON.stringify(e))),o.$i(o.qi))}static setTamAdList(e){o.Vi&&(o.zi=o.Ui(JSON.parse(JSON.stringify(e))),o.$i(o.zi))}static setLineItemStatus(e,t){o.Vi&&(e=o.Di(e),o.Wi.push({type:"status",id:e,status:s.a[t]}))}static setVpaidEvent(e,t){if(o.Vi)try{var i=o.Di(e);switch(t){case r.b.AdLoaded:case r.b.AdStarted:case r.b.AdError:case r.b.AdSkipped:case r.b.AdStopped:case r.b.AdPaused:case r.b.AdPlaying:case r.b.AdImpression:o.Wi.push({type:"vpaid",id:i,event:t})}}catch(e){}}static setViewabilityState(e){o.Vi&&o.Wi.push({type:"view",inView:e})}static setFocusState(e){o.Vi&&o.Wi.push({type:"focus",inView:e})}static setAdState(e){o.Vi&&o.Wi.push({type:"adState",state:n.ProtoAdSlotsEnum[e]})}static enforcerAction(e){o.Vi&&o.Wi.push({type:"enforcer",action:e})}static addCustomHistoryLine(e,t){o.Vi&&o.Wi.push(Object.assign({type:e},t))}static getJsonString(){return o.Vi?JSON.stringify({clientAdList:o.Ni,rtbAdList:o.Hi,headerBidderAdList:o.qi,mappedAdList:o.Fi,history:o.Wi}).substring(0,o.Gi):""}static playerDestroyed(){this.Ji=!0}static isPlayerDestroyed(){return this.Ji}}o.Vi=Date.now()-1581093917537<0,o.Gi=5e4,o.Bi=0,o.Fi={},o.Ni=[],o.Hi=[],o.qi=[],o.zi=[],o.Wi=[],o.Ji=!1},function(e,t,i){"use strict";var s;i.d(t,"a",function(){return s}),(t=s=s||{})[t.P1=1]="P1",t[t.P2=2]="P2",t[t.P3=3]="P3",t[t.P4=4]="P4",t[t.P5=5]="P5",t[t.P6=6]="P6",t[t.P7=7]="P7",t[t.P8=8]="P8",t[t.P9=9]="P9",t[t.P10=10]="P10"},function(e,t,i){"use strict";i.d(t,"a",function(){return s});class s{constructor(){this.Qi=!1,this.promise=new Promise((e,t)=>{this.Xi=e,this.Yi=t})}Ki(){this.Qi||(this.Qi=!0)}resolve(e){this.Ki(),this.Xi(e)}reject(e){this.Ki(),this.Yi(e)}get isPending(){return!this.Qi}}},function(e,i,n){"use strict";!function(e){var s=i;function r(e,t,i){for(var s=Object.keys(t),r=0;r<s.length;++r)void 0!==e[s[r]]&&i||(e[s[r]]=t[s[r]]);return e}function t(e){function i(e,t){if(!(this instanceof i))return new i(e,t);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,i):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),t&&r(this,t)}return(i.prototype=Object.create(Error.prototype)).constructor=i,Object.defineProperty(i.prototype,"name",{get:function(){return e}}),i.prototype.toString=function(){return this.name+": "+this.message},i}s.asPromise=n(136),s.base64=n(137),s.EventEmitter=n(138),s.float=n(139),s.inquire=n(140),s.utf8=n(141),s.pool=n(142),s.LongBits=n(143),s.global="undefined"!=typeof window&&window||void 0!==e&&e||"undefined"!=typeof self&&self||this,s.emptyArray=Object.freeze?Object.freeze([]):[],s.emptyObject=Object.freeze?Object.freeze({}):{},s.isNode=Boolean(s.global.process&&s.global.process.versions&&s.global.process.versions.node),s.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},s.isString=function(e){return"string"==typeof e||e instanceof String},s.isObject=function(e){return e&&"object"==typeof e},s.isset=s.isSet=function(e,t){var i=e[t];return!(null==i||!e.hasOwnProperty(t))&&("object"!=typeof i||0<(Array.isArray(i)?i:Object.keys(i)).length)},s.Buffer=function(){try{var e=s.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),s.Zi=null,s.te=null,s.newBuffer=function(e){return"number"==typeof e?s.Buffer?s.te(e):new s.Array(e):s.Buffer?s.Zi(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},s.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,s.Long=s.global.dcodeIO&&s.global.dcodeIO.Long||s.global.Long||s.inquire("long"),s.key2Re=/^true|false|0|1$/,s.key32Re=/^-?(?:0|[1-9][0-9]*)$/,s.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,s.longToHash=function(e){return e?s.LongBits.from(e).toHash():s.LongBits.zeroHash},s.longFromHash=function(e,t){e=s.LongBits.fromHash(e);return s.Long?s.Long.fromBits(e.lo,e.hi,t):e.toNumber(Boolean(t))},s.merge=r,s.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},s.newError=t,s.ProtocolError=t("ProtocolError"),s.oneOfGetter=function(e){for(var i={},t=0;t<e.length;++t)i[e[t]]=1;return function(){for(var e=Object.keys(this),t=e.length-1;-1<t;--t)if(1===i[e[t]]&&void 0!==this[e[t]]&&null!==this[e[t]])return e[t]}},s.oneOfSetter=function(i){return function(e){for(var t=0;t<i.length;++t)i[t]!==e&&delete this[i[t]]}},s.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},s.ie=function(){var i=s.Buffer;i?(s.Zi=i.from!==Uint8Array.from&&i.from||function(e,t){return new i(e,t)},s.te=i.allocUnsafe||function(e){return new i(e)}):s.Zi=s.te=null}}.call(this,n(69))},function(e,t,i){"use strict";Object.defineProperty(t,"_",{value:!0});var s=i(35),i=(r.encode=function(e,t){var i;if((i=(e="string"==typeof e?parseInt(e,10):e).toString(2)).length>t||e<0)throw new s.EncodingError(e+" too large to encode into "+t);return i=i.length<t?"0".repeat(t-i.length)+i:i},r.decode=function(e,t){if(t!==e.length)throw new s.DecodingError("invalid bit length");return parseInt(e,2)},r);function r(){}t.IntEncoder=i},function(e,t,i){"use strict";var d=this&&this.ee||function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],s=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&s>=e.length?void 0:e)&&e[s++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"_",{value:!0});var s=(r.prototype.clone=function(){var i=this,s=new this.constructor;return Object.keys(this).forEach(function(e){var t=i.deepClone(i[e]);void 0!==t&&(s[e]=t)}),s},r.prototype.deepClone=function(e){var t,i,s=typeof e;if("number"==s||"string"==s||"boolean"==s)return e;if(null!==e&&"object"==s){if("function"==typeof e.clone)return e.clone();if(e instanceof Date)return new Date(e.getTime());if(void 0!==e[Symbol.iterator]){var r=[];try{for(var n=d(e),o=n.next();!o.done;o=n.next()){var a=o.value;r.push(this.deepClone(a))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}return e instanceof Array?r:new e.constructor(r)}var l,c={};for(l in e)e.hasOwnProperty(l)&&(c[l]=this.deepClone(e[l]));return c}},r);function r(){}t.Cloneable=s},function(e,t,i){"use strict";var s;(s=s=s||{}).prebid="prebid",s.bid="bid",s.win="win",s.impression="impression",s.viewableImpression="viewableImpression",s.postbid="postbid",s.initAd="initAd",s.request="request"},function(e,t,i){"use strict";i.d(t,"a",function(){return n}),i.d(t,"b",function(){return u});var t=i(53),o=i(0),a=i(13),s=i(1),l=i(5);const c=new t.a(o.ProtoAdDomainBlockingResponse,"AdDomainBlockingService"),d=2;let r;const h=new Map;function n(n){r=r||new Promise(t=>{var e=n.find(e=>e.blockedDomainsRevisionNumber);if(e){const{publisherLineItemId:i,blockedDomainsRevisionNumber:s}=e,r=`${a.a.endPoints.base.lineItems}${i}/blockedDomains_${s}.bin`;c.fetchMetadata(r,d).then(e=>{h.set(i,e.domains),t()}).catch(()=>{Object(l.a)({message:"AdDomainBlockingService_fetchBlockedDomains_endpoint_unavailable",level:o.ProtoLoggingLevelEnum.FATAL,throttle:2,sendMaxLog:!1}),t()})}else t()})}function u(t,i){return new Promise(e=>{Object(s.h)(i)?r.then(()=>{h.has(t)&&h.get(t).some(e=>i.includes(e))?e(!0):e(!1)}):e(!1)})}},function(e,t){e.exports='<svg viewBox="0 0 25 25" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd"><path d="M5 21.453c2.022 1.627 4.6 2.602 7.387 2.602 3.973 0 7.485-1.967 9.622-4.977l-4.596-3.34a3.87 3.87 0 0 0-4.548 0L5 21.453zM22 4.977A11.75 11.75 0 0 0 12.387 0 11.74 11.74 0 0 0 5 2.602l7.9 5.74a3.81 3.81 0 0 0 4.479 0l4.63-3.364zm1.563 11.395c.494-1.3.767-2.712.767-4.186S24.057 9.3 23.563 8l-3.858 2.803a1.71 1.71 0 0 0 0 2.766l3.858 2.803z" fill="#fff"></path><path d="M2.378 5c-.024-.017-.057-.012-.074.01A11.74 11.74 0 0 0 0 12.025a11.74 11.74 0 0 0 2.304 7.004c.017.023.05.028.074.01l8.013-5.822c.81-.59.81-1.797 0-2.386L2.378 5z" fill="#09f"></path></svg>'},function(e,t){e.exports="<cnx class=cnx-ui-progress-label> <cnx-span></cnx-span> </cnx> "},function(e,t,i){"use strict";Object.defineProperty(t,"_",{value:!0});var s=(r.encode=function(e){return+e+""},r.decode=function(e){return"1"===e},r);function r(){}t.BooleanEncoder=s},function(e,t,i){"use strict";i.d(t,"a",function(){return s});var s,o=i(54),a=i(2),l=i(7);!function(e){const r=["adBanner","banner-search","abc_banner","Banner_Top","ad_container","pub_300x250","pub_300x250m","pub_728x90","text-ad","text_ad","textAd","text-ad-links","text_ads","text-ads","text-ad-links"],n="cnxtestadblock",i={src:o.a};e.detectUsingCSS=function(t){try{let e=!1;t.document.body.insertAdjacentHTML("beforeend",(i=r.join(" "),`<style>.adBanner{background-color: transparent; height: 1px !important; width: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important; display:block !important; }</style><div id="${n}" class="${i}"></div>`));const s=t.document.getElementById(n);return 0!==s.getBoundingClientRect().height&&0!==s.getBoundingClientRect().width||(e=!0),t.document.body.removeChild(s),e}catch(t){return!1}var i},e.detectUsingScript=function(){return new Promise(e=>{const t=Object(l.f)(window).topFrame;t.googletag&&e(!1),Object(a.A)(i,t.document.head,t,()=>t.googletag?e(!1):e(!0),()=>e(!0))})}}(s=s||{})},function(e,t,i){"use strict";var o=i(7),s=i(29),a=i(25),n=i(0),r=i(13),l=i(1),c=i(34),d=i(18);class h{constructor(e){this.se=e,this.ne=!0,this.re="",this.he=!1,this.ae=[]}static getInstance(e){const t=s.a,i=Object(o.f)(e).topFrame;return i[t]||(i[t]=new h(i)),i[t]}get userId(){if(Object(l.h)(this.ce))return this.ce.split("_")[0]}set userId(e){this.ce=e}get isCcpaApplicable(){return this.ne}set isCcpaApplicable(e){this.ne=e}get usPrivacyString(){return this.re}set usPrivacyString(e){this.re=e}get consentPayload(){return this.ue}set consentPayload(e){this.ue||(this.ue=e)}getScope(){return this.se}syncDemandPartner(e){this.userId&&(e={userId:this.userId,demandPartner:parseInt(e.demandPartner,10),demandPartnerUserId:e.demandPartnerUserId},a.a.sendProtoRequest({ProtoRequest:n.ProtoUserSyncRequest,endpoint:r.a.endPoints.api.syncUrls,requestData:e,queryParams:{[c.b]:d.a.version},logError:!0}).then(e=>{}).catch(e=>{}))}registerPlsCall(e){return this.he?(this.ae.push(e),()=>{}):this.userId?(e(),()=>{}):(this.he=!0,e(),()=>{this.he=!1,this.ae.forEach(e=>e()),this.ae=[]})}}var u,p=i(33),g=i(5),m=i(6);(u=u||{}).USER_ID="cnx_userId";class f{constructor(e,t){this.le=e,this.de=t,this.fe={[u.USER_ID]:30},this.pe=["Facebook App","Google App","Flipboard App","Instagram App","Pinterest App"],this.be=!1}ve({name:e,value:t}){e===u.USER_ID&&(this.le.userId=this.me(t))}ge(e){let t="";var i=this.fe[e.name];i&&(t=`; expires=${new Date(Object(p.b)(i)).toUTCString()}`),this.de.document.cookie=`${e.name}=${e.value}${t}; path=/`}ye(e,t){if(Object(m.h)(e)){t={cookieList:e,secureMode:t?n.ProtoCookieSecureModeEnum.Unsecure:n.ProtoCookieSecureModeEnum.Auto,browserInfo:this.we};return a.a.sendProtoRequest({requestData:t,ProtoRequest:n.ProtoCookieSyncRequest,endpoint:r.a.endPoints.api.cookie,withCredentials:!0,queryParams:{[c.b]:d.a.version},logError:!1}).catch(e=>Object(g.a)({message:"UserCookieManager_setThirdPartyCookie",exception:e.message,callStack:e.callStack,level:n.ProtoLoggingLevelEnum.FATAL}))}}me(e){return e.split("_")[0]}xe(e){try{var t,i=e+"=";for(t of decodeURIComponent(this.de.document.cookie).split(";")){for(;" "===t.charAt(0);)t=t.substring(1);if(0===t.indexOf(i))return this.me(t.substring(i.length,t.length))}}catch(e){}return""}getUserId(){return this.le.userId}syncFirstPartyCookie(e){const t={name:e,value:"",timestamp:Object(p.b)(this.fe[e])};e===u.USER_ID&&(t.value=this.le.userId),Object(l.h)(t.value)&&this.ge(t)}syncThirdPartyCookieList(e){const t=[u.USER_ID],i=[];t.forEach(e=>{e===u.USER_ID&&Object(l.h)(this.le.userId)&&i.push({name:u.USER_ID,value:this.le.userId,timestamp:Object(p.b)(this.fe[u.USER_ID])})}),this.ye(i,e)}setBrowserInfo(e,t){this.we=e,this.be=this.pe.includes(e.browserType),this.be&&t&&this.syncThirdPartyCookieList(this.be)}setUserInformation(e){e&&this.ve({name:u.USER_ID,value:e.userId})}fetchCookies(){[u.USER_ID].map(e=>({name:e,value:this.xe(e)})).filter(({value:e})=>Object(l.h)(e)).forEach(e=>this.ve(e))}get unsecuredCookieSync(){return this.be}}var y=i(23);const b={[y.a.CmpApi]:{windowPropertyName:"__cmp",framePropertyName:"__cmpLocator",getVendorConsentDataMethodName:"getVendorConsents",getConsentDataMethodName:"getConsentData"},[y.a.TcfApi]:{windowPropertyName:"__tcfapi",framePropertyName:"__tcfapiLocator",getVendorConsentDataMethodName:"getTCData",consentUpdateMethodName:"addEventListener",removeUpdateListenerMethodName:"removeEventListener"}};class v{constructor(e,t){this.Se=e,this.Oe=t,this.apiType=y.a.CmpApi,this.ke={},this.ue=null,this._e=s=>new Promise((e,t)=>{try{var i="string"==typeof s.data?JSON.parse(s.data):s.data;if("object"==typeof i&&i.je)if(i.je.callId===this.Ae){const s=i.je.returnValue&&i.je.returnValue.vendorConsents;this.Ie(s).then(()=>e(this.Ae))}else if(i.je.callId===this.Ce){const s=i.je.returnValue&&i.je.returnValue.consentData;this.Te(s).then(()=>e(this.Ce))}}catch(e){t()}})}isApiOnPage(){return null!==this.Se||null!==this.Oe}bindToApi(){return null!==this.Se?new Promise((e,t)=>{this.Pe(this.Se).then(()=>e()).catch(e=>t(e))}):null!==this.Oe?this.Me(this.Oe):Promise.reject()}isConsentForVendor(e){return!!this.ke[e]}getConsentPayload(){return this.ue}setInAppConsentData(e){this.Ie(e),this.Te(e.consentString)}hasIvtConsent(){return this.isConsentForVendor(s.c.Connatix)}isConsentForPurposes(e){return!0}Me(r){this.Ce=Object(o.c)(),this.Ae=Object(o.c)();const n={};return new Promise(t=>{const i=e=>{this._e(e).then(e=>{n[e]=!0,n[this.Ce]&&n[this.Ae]&&(window.removeEventListener("message",i,!1),t())}).catch(e=>{})};window.addEventListener("message",i,!1);var e=b[y.a.CmpApi].getVendorConsentDataMethodName,s=b[y.a.CmpApi].getConsentDataMethodName;r.postMessage({Ee:{command:e,parameter:null,callId:this.Ae}},"*"),r.postMessage({Ee:{command:s,parameter:null,callId:this.Ce}},"*")})}Pe(e){const t=b[y.a.CmpApi].windowPropertyName,s=b[y.a.CmpApi].getVendorConsentDataMethodName,r=b[y.a.CmpApi].getConsentDataMethodName;if(e&&e[t]){var i=new Promise(i=>{e[t](s,null,(e,t)=>{if(t){const t=e["vendorConsents"];this.Ie(t).then(()=>i())}})}),n=new Promise(i=>{e[t](r,null,(e,t)=>{if(t){const t=e["consentData"];this.Te(t).then(()=>i())}})});return Promise.all([i,n])}return Promise.reject()}Ie(e){return Object(l.f)(e)?(this.ke=e,Promise.resolve()):Promise.reject()}Te(e){return Object(l.g)(e)?(this.ue=e,Promise.resolve()):Promise.reject()}}var P=i(2),S=i(84),I=i(85);const T=(e,t)=>{t=b[t].windowPropertyName;return Object(P.s)(e,t)},A=(e,t)=>{t=b[t].framePropertyName;return Object(P.r)(e,t)},O=(e,t)=>null!==T(e,t)||null!==A(e,t),k=e=>{const t=S.TCString.decode(e),i={},s={};return t.vendorConsents.forEach((e,t)=>i[t]=e),t.purposeConsents.forEach((e,t)=>s[t]=e),{vendorConsents:i,purposeConsents:s,tcString:e}},C=e=>{const t=I.decodeConsentString(e);let i="";var s=t.maxVendorId;for(let e=1;e<=s;e++)i+="0";const r=i.split("");return t.allowedVendorIds.forEach(e=>{r[e-1]="1"}),(t=>{const i={consentString:t};for(let e=0;e<t.length;e++)i[e+1]="1"===t[e];return i})(r.join(""))},w=(e,t,i)=>{let s;try{s=t(e)}catch(e){}if(Object(l.f)(s))return s;try{s=i(e)}catch(e){}return s},x=e=>{return Object(l.h)(null===e||void 0===e?void 0:e.tcString)},E=e=>{return Object(l.h)(null===e||void 0===e?void 0:e.consentString)},L=({cmpEncodedString:e,tcfEncodedString:t})=>{if(!Object(l.h)(e)&&!Object(l.h)(t))return null;let i=null;return Object(l.h)(t)&&(i=w(t,k,C)),Object(l.f)(i)?i:Object(l.h)(e)?(i=w(e,C,k),Object(l.f)(i)?i:(Object(g.a)({message:"UserManagerService_getDecodedConsentData",exception:"cmpEncodedString failed to decode",callStack:JSON.stringify({cmpEncodedString:e,tcfEncodedString:t}),level:n.ProtoLoggingLevelEnum.FATAL}),null)):(Object(g.a)({message:"UserManagerService_getDecodedConsentData",exception:"tcfEncodedString failed to decode",callStack:JSON.stringify({tcfEncodedString:t}),level:n.ProtoLoggingLevelEnum.FATAL}),null)};class M{constructor(e,t){this.Le=e,this.Re=t,this.apiType=y.a.TcfApi,this.Be=s=>new Promise((e,i)=>{try{let t=s.data;if("string"==typeof s.data)try{t=JSON.parse(s.data)}catch(e){t=void 0}if("object"==typeof t&&t.De&&t.De.callId===this.Fe){const s=t.De.returnValue.tcString;this.Ie(s).then(()=>e(this.Fe)).catch(e=>i())}}catch(e){i()}})}isApiOnPage(){return null!==this.Le||null!==this.Re}bindToApi(){return null!==this.Le?new Promise((e,t)=>{this.Pe(this.Le).then(()=>e()).catch(e=>t(e))}):null!==this.Re?this.Me(this.Re):Promise.reject()}isConsentForVendor(e){var t,i;return!(null===(t=this.$e)||void 0===t||!t.vendorConsents||null===(i=this.$e)||void 0===i||!i.vendorConsents[e])}getConsentPayload(){var e;return null===(e=this.$e)||void 0===e?void 0:e.tcString}setInAppConsentData(e){this.$e=Object.assign(Object.assign({},this.$e),e)}hasIvtConsent(){return!0}isConsentForPurposes(e){var t;return!(null===(t=this.$e)||void 0===t||!t.purposeConsents)&&e.every(e=>!!this.$e.purposeConsents[e])}Me(s){this.Fe=Object(o.c)();const r={};return new Promise(t=>{const i=e=>{this.Be(e).then(e=>{r[e]=!0,r[this.Fe]&&(window.removeEventListener("message",i,!1),t())}).catch(e=>{})};window.addEventListener("message",i,!1);var e=b[y.a.TcfApi].getVendorConsentDataMethodName;s.postMessage({Ue:{command:e,parameter:null,callId:this.Fe}},"*")})}Pe(e){const s=b[y.a.TcfApi].windowPropertyName,t=b[y.a.TcfApi].consentUpdateMethodName,r=b[y.a.TcfApi].removeUpdateListenerMethodName;return e&&e[s]?new Promise(i=>{this.Le[s](t,2,(e,t)=>{if(t&&("useractioncomplete"===e.eventStatus||"tcloaded"===e.eventStatus)){const t=e.tcString;this.Ie(t).then(()=>i()),this.Le[s](r,2,()=>{},e.listenerId)}})}):Promise.reject()}Ie(e){e=L({tcfEncodedString:e});return x(e)?(this.$e=e,Promise.resolve()):Promise.reject()}}var R=i(39);const B=[R.a.P1,R.a.P2,R.a.P4,R.a.P7,R.a.P8];class j{constructor(e,t,i={}){this.Ve=e,this.de=t;e=L({cmpEncodedString:null===(e=i.cmp)||void 0===e?void 0:e.consentString,tcfEncodedString:null===(t=i.tcf)||void 0===t?void 0:t.tcString}),t=this.Ne(e);null!==t?(this.He(t),(x(e)||E(e))&&this.qe.setInAppConsentData(e)):Object(g.a)({message:"UserManagerService_UserConsentApiManager",exception:"failed to find the right api, no consent string and no framework on page was found",callStack:JSON.stringify({_appSettings:i}),level:n.ProtoLoggingLevelEnum.FATAL})}setPageUrl(e){this.ze=e}setAmpUserConsent(t){if(this.isConsentRequired()){var i=t.consentStringTypeEnum.US_PRIVACY_STRING,s=null===(s=t.consentMetadata)||void 0===s?void 0:s.consentStringType,r=t.encodeConsentString||(null===(r=t.consentMetadata)||void 0===r?void 0:r.additionalConsent);let e;Object(l.h)(r)?s!==i?(i=L({tcfEncodedString:r,cmpEncodedString:r}),x(i)?e=new M(null,null):E(i)&&(e=new v(null,null)),e?e?(this.qe=e,this.qe.setInAppConsentData(i)):Object(g.a)({message:"UserConsentApiManager_amp_userConsentApi_not_found",level:n.ProtoLoggingLevelEnum.WARNING,callStack:r,exception:`${JSON.stringify(t)}__pageURL__${this.ze}`,throttle:2,sendMaxLog:!1}):Object(g.a)({message:"UserConsentApiManager_encoded_string_not_tcf_and_not_cmp",level:n.ProtoLoggingLevelEnum.WARNING,callStack:r,exception:`${JSON.stringify(t)}__pageURL__${this.ze}`,throttle:2,sendMaxLog:!1})):Object(g.a)({message:"UserConsentApiManager_CCPA_encoded_string_from_amp_not_used",level:n.ProtoLoggingLevelEnum.WARNING,callStack:r,exception:`${JSON.stringify(t)}__pageURL_${this.ze}`,throttle:2,sendMaxLog:!1}):Object(g.a)({level:n.ProtoLoggingLevelEnum.INFO,message:"AMP_no_consent_string_provided",callStack:JSON.stringify(t),exception:this.ze})}}isConsentRequired(){return this.Ve}isConsent(e,t=[]){return!this.isConsentRequired()||this.qe.isConsentForVendor(e)&&this.qe.isConsentForPurposes(t)}isConsentConnatix(){return this.isConsent(s.c.Connatix,B)}getConsentDataPayload(){return this.qe.getConsentPayload()}bindToConsentApi(){return this.qe.bindToApi()}isConsentApiOnPage(){return this.qe.isApiOnPage()}hasIVTConsent(){return this.qe.hasIvtConsent()}getConsentApiType(){return this.qe.apiType}He(e){var t=T(this.de,e),i=A(this.de,e);e===y.a.TcfApi?this.qe=new M(t,i):this.qe=new v(t,i)}Ne(e){return!x(e)&&(E(e)||!O(this.de,y.a.TcfApi)&&O(this.de,y.a.CmpApi))?y.a.CmpApi:y.a.TcfApi}}var D=i(17);const _="CookieSync_syncScript_not_properly_loaded",F="CookieSync_param_not_parsed_properly",U=(e,t)=>{if(!window.PubMaticSync)return V(_,"PUBMATIC"),!1;e=Number.parseInt(e,10);return Object(l.d)(e)?!!Object(l.h)(t)||(V(F,"PUBMATIC","predirect"),!1):(V(F,"PUBMATIC","p"),!1)},N=(e,t,i,s)=>{const r={pubId:Number.parseInt(e,10),url:t};i&&(r.delay=1e3,r.gdpr=1,r.gdprConsent=s),window.PubMaticSync.sync(r)},V=(e,t,i="")=>{Object(g.a)({message:e,callStack:t,exception:i,level:n.ProtoLoggingLevelEnum.FATAL,throttle:1,sendMaxLog:!1})};class H{constructor(e,t){this.We=e,this.Ve=t,this.Ge=[]}replaceuserIdMacros(e,t){let i=e;return i=(i=(i=i.replace("%5BuserId%5D",t)).replace("[userId]",t)).replace("%7bUSER_ID%7d",t)}Je(e,t){try{if(this.Qe(e)){const i=t.document.createElement("iframe");i.setAttribute("style","width:1px;height:1px;border:0px;margin:0px;padding:0px"),i.src=e.url,t.document.body.appendChild(i)}else Object(P.A)({src:e.url},t.document.head,t,null,null,1===Object(o.l)([95,5]),"UserManager_unable_to_insert_sync_url_script");return!0}catch(e){return!1}}Qe(e){switch(e.vendorId){case s.c.Rubicon:case s.c.Pubmatic:return!0;default:return-1<e.url.indexOf("yellowblue.io")}}syncUrls(t,i){this.Ge.forEach(e=>{if(this.We.isConsent(e.vendorId)&&!e.synced){if(e.vendorId===s.c.Pubmatic)return r=e.url,n=this.We.isConsentRequired(),o=this.We.getConsentDataPayload(),void new Promise((e,t)=>{const i=Object(D.b)("p",r),s=Object(D.b)("predirect",r);window.PubMaticSync?U(i,s)?(N(i,s,n,o),e(!0)):t():Object(P.A)({src:"//ads.pubmatic.com/AdServer/js/userSync.js"},window.document.head,window,()=>{U(i,s)?(N(i,s,n,o),e(!0)):t()},()=>{t()},!0,"UserThirdPartySyncManager_Pubmatic")}).then(()=>{e.synced=!0});if(-1!==e.url.indexOf("openx.net"))return e.url=`${e.url.split("r=")[0]}&r=\n                        ${encodeURIComponent(`https://capi.connatix.com/core/us?DemandPartner=8&UserId=${t}&DemandPartnerUserId=`)}`,e.url=this.replaceuserIdMacros(e.url,t),a.a.trackPixel(e.url),void(e.synced=!0);if(-1<e.url.indexOf("pixel.advertising.com")&&(e.url=e.url.replace("gdpr=",`gdpr=${this.We.isConsentRequired()?1:0}`),e.url=e.url.replace("gdpr_consent=","gdpr_consent=0")),e.url=this.replaceuserIdMacros(e.url,t),this.Ve){e.url=Object(D.e)(e.url,"gdpr","1");const t=this.We.getConsentDataPayload();e.url=Object(D.e)(e.url,"gdpr_consent",t)}this.Je(e,i)&&(e.synced=!0)}var r,n,o})}setSyncUrls(t={}){return!(0<this.Ge.length||(this.Ge=[],Object.keys(t).forEach(e=>{this.Ge.push({vendorId:e,url:t[e],synced:!1})}),0))}}var q,W,$=i(40);const G={subdivision:{California:5332921},country:{US:6252001}};class z{constructor(e,t){this.le=e,this.Xe=1,this.Ye="__uspapi",this.Ke="getUSPData",this.Ze(t)}getUsPrivacyString(){if(this.le.usPrivacyString||this.le.isCcpaApplicable)return this.le.usPrivacyString}isCcpaApplicable(){return this.le.isCcpaApplicable}isSellUserAllowed(){return!this.le.isCcpaApplicable||this.ts()}setGeoLocation(e){(this.es=e).subdivisionId!==G.subdivision.California&&(this.le.isCcpaApplicable=!1)}fetchUsPrivacyString(){return this.ss()&&this.ns(),this.isCcpaApplicable()?new Promise(e=>{this.getUsPrivacyString()?e():e(this.rs())}):Promise.resolve()}rs(){return new Promise((i,s)=>{const e=this.le.getScope()[this.Ye];e?e(this.Ke,this.Xe,(e,t)=>{t?(this.Ze(e.uspString),i()):s()}):s()})}ts(){return!this.le.usPrivacyString||Object(m.g)(this.le.usPrivacyString,s.b)}Ze(e){this.le.usPrivacyString=e}ss(){if(!Object(o.l)([95,5]))return!1;var e=new Date(2020,10,16,12,0,0).getTime(),t=new Date(2020,10,17,12,0,0).getTime();return Object(p.c)(e,t)}ns(){var{countryGeoId:e,subdivisionId:t}=this.es;e===G.country.US&&Object(g.a)({message:"UserCcpaManager_logCCPA",level:n.ProtoLoggingLevelEnum.INFO,callStack:JSON.stringify(t),exception:this.le.usPrivacyString})}}i.d(t,"a",function(){return q}),i.d(t,"b",function(){return J}),(t=q=q||{}).CCPA_INFO_RECEIVED="ccpaInfoReceived",t.CONSENT_DATA_UPDATE="consentDataUpdate",(t=W=W||{}).SYNC_URLS_RECEIVED="thirdPartySyncUrlsReceived",t.USER_INFO_RECEIVED="userInfoReceived";class J{constructor(e,t,i,s={}){this.hs=t,this.cs=i,this._appSettings=s,this.gdprConsentMode=n.ProtoGdprConsentModeEnum.Unknown,this.us={},this.ls="",this.ds=!1,this.fs=()=>{!this.We.isConsentRequired()||this.hs?this.resolveEvent(q.CONSENT_DATA_UPDATE):(this.gdprConsentMode=this.We.isConsentApiOnPage()||this.cs?n.ProtoGdprConsentModeEnum.NoConsent:n.ProtoGdprConsentModeEnum.NoCmp,this.We.bindToConsentApi().then(()=>{this.isConsentConnatix()||(this.gdprConsentMode=n.ProtoGdprConsentModeEnum.NoConnatixConsent),this.resolveEvent(q.CONSENT_DATA_UPDATE)}).catch(e=>{}))},this.ps=()=>{this.isConsentConnatix()&&(this.onEvent([W.USER_INFO_RECEIVED]).then(()=>{this.ds&&(this.bs.syncThirdPartyCookieList(),this.bs.unsecuredCookieSync&&this.bs.syncThirdPartyCookieList(this.bs.unsecuredCookieSync),this.bs.syncFirstPartyCookie(u.USER_ID))}),this.onEvent([W.SYNC_URLS_RECEIVED,q.CONSENT_DATA_UPDATE,q.CCPA_INFO_RECEIVED]).then(()=>{if(this.isConsentConnatix()&&this.vs.isSellUserAllowed())try{this.ms.syncUrls(this.le.userId,this.le.getScope())}catch(e){Object(g.a)({level:n.ProtoLoggingLevelEnum.WARNING,message:"UserManager_syncUrls",exception:e.message,callStack:e.stack})}}))};try{this.le=h.getInstance(e),this.hs||(this.bs=new f(this.le,e));const{cmp:t,tcf:i}=this._appSettings;this.We=new j(!!this.ls,e,{cmp:t,tcf:i}),this.ms=new H(this.We,this.isGDPR()),this.vs=new z(this.le,this._appSettings.usPrivacyString),this.gs()}catch(e){Object(g.a)({callStack:e.stack,exception:e.message,message:"UserManager_constructor",level:n.ProtoLoggingLevelEnum.FATAL})}}gs(){this.bs&&this.bs.fetchCookies(),this.fs(),this.onEvent([q.CONSENT_DATA_UPDATE]).then(()=>{setTimeout(()=>{try{if(this.hs)return;this.ps()}catch(e){Object(g.a)({callStack:e.stack,exception:e.message,message:"UserManager_consent_data_received",level:n.ProtoLoggingLevelEnum.FATAL})}},0)})}ys(e){return void 0===this.us[e]&&(this.us[e]=new $.a,this.us[e].promise.catch(()=>this.us[e].reject())),this.us[e]}resolveEvent(e,t){this.ys(e).resolve(t)}setAmpUserConsent(e){this.We.setAmpUserConsent(e),this.resolveEvent(q.CONSENT_DATA_UPDATE)}setPageUrl(e){this.We&&this.We.setPageUrl(e)}onEvent(e){e=e.map(e=>this.ys(e).promise);return Promise.all(e)}isConsent(e,t){return this.We.isConsent(e,t)}isConsentConnatix(){return this.We.isConsentConnatix()}getConsentPayload(){return this.We.getConsentDataPayload()}isConsentRequired(){return this.We.isConsentRequired()}setThirdPartySyncUrls(e){this.hs||this.ms.setSyncUrls(e)&&this.resolveEvent(W.SYNC_URLS_RECEIVED)}setGeoLocation(e){this.vs.setGeoLocation(e),this.vs.fetchUsPrivacyString().then(()=>{this.resolveEvent(q.CCPA_INFO_RECEIVED)}).catch(()=>{this.resolveEvent(q.CCPA_INFO_RECEIVED)})}getUserId(){if(this.isConsentConnatix()&&this.bs)return this.bs.getUserId()}ws(){return this.bs&&this.bs.getUserId()}setUserInformation(e){this.bs&&(this.bs.setUserInformation(e),this.resolveEvent(W.USER_INFO_RECEIVED),!this.hs&&this.isConsentConnatix()&&this.bs.syncFirstPartyCookie(u.USER_ID))}isGDPR(){return!!this.ls}getUsPrivacyString(){return this.vs.getUsPrivacyString()}isCcpaApplicable(){return this.vs.isCcpaApplicable()}isSellUserAllowed(){return this.hs||this.vs.isSellUserAllowed()}getDeviceId(){if(this.isConsentConnatix())return this._appSettings.deviceID}Ss(){return this._appSettings.deviceID}getTrackableUser(){return this.hs?this.getDeviceId():this.getUserId()}getForcedTrackableUser(){return this.hs?this.Ss():this.ws()}registerPlsCall(e){return this.isConsentConnatix()||(this.ds=!0),this.le.registerPlsCall(e)}setBrowserInfo(e){this.bs&&this.bs.setBrowserInfo(e,this.isConsentConnatix())}getGdprConsentApiType(){return this.We.getConsentApiType()}}},function(e,t,i){"use strict";var s,r;i.d(t,"a",function(){return n}),(t=s=s||{}).hidden="hidden",t.msHidden="msHidden",t.webkitHidden="webkitHidden",(t=r=r||{}).visibilitychange="visibilitychange",t.msvisibilitychange="msvisibilitychange",t.webkitvisibilitychange="webkitvisibilitychange";class n{constructor(e){this.Os=e,this.ks=[],this._s(),this.js()}on(e){this.ks.push(e),e(this.isDocumentVisible())}off(t){this.ks=this.ks.filter(e=>e!==t)}_s(){void 0!==this.Os.getDocumentProperty(s.hidden)?(this.As=s.hidden,this.Is=r.visibilitychange):void 0!==this.Os.getDocumentProperty(s.msHidden)?(this.As=s.msHidden,this.Is=r.msvisibilitychange):void 0!==this.Os.getDocumentProperty(s.webkitHidden)&&(this.As=s.webkitHidden,this.Is=r.webkitvisibilitychange)}js(){this.Os.addEventListenerOnGlobal(this.Is,()=>{this.ks.forEach(e=>{e(this.isDocumentVisible())})},!0,!1)}isDocumentVisible(){return!this.Os.getDocumentProperty(this.As)}}},function(e,t,i){"use strict";i.d(t,"a",function(){return s}),i.d(t,"b",function(){return r});var s,t=i(0);(i=s=s||{})[i.PreRoll=0]="PreRoll",i[i.MidRoll=1]="MidRoll",i[i.PostRoll=2]="PostRoll",i[i.Standalone=3]="Standalone";const r={[t.ProtoAdSlotsEnum.PreRoll]:s.PreRoll,[t.ProtoAdSlotsEnum.MidRoll]:s.MidRoll,[t.ProtoAdSlotsEnum.PostRoll]:s.PostRoll}},function(e,t,i){"use strict";i.d(t,"a",function(){return l});var s=i(0),n=i(7),r=i(5),o=i(1),a=i(25);class l{constructor(e,t){this.Cs=e,this.Ts=t,this.Ps=e=>new Promise((t,i)=>{a.a.sendProtoRequest({ProtoResponse:this.Cs,endpoint:e,requestType:"GET",logError:!0}).then(e=>{t(e)}).catch(e=>{i(e)})})}fetchMetadata(r,e=5){return new Promise((i,s)=>{Object(n.k)(()=>this.Ps(r),e).then(e=>{if(Object(o.f)(e))return i(e);var t=new Error("invalid metadata");return this.Es({url:r,metadata:e,e:t}),s(t)}).catch(e=>{this.Es({url:r,e:e}),s(e)})})}Es(e){var t;const i=Object(o.h)(null===(t=e.e)||void 0===t?void 0:t.message)?e.e.message:"";-1===i.indexOf("XhrUtils_XMLHttpRequest_error")&&Object(r.a)({message:"MediaMetadataHandler_fetchMetadata",exception:`${this.Ts}_${i}:${JSON.stringify(e)}`,callStack:e.e&&e.e.stack,level:s.ProtoLoggingLevelEnum.FATAL})}}},function(e,t,i){"use strict";i.d(t,"a",function(){return s});const s="//securepubads.g.doubleclick.net/tag/js/gpt.js"},function(e,t){e.exports='<cnx class="cnx-icon-button cnx-button-settings cnx-context-controller cnx-ui-btn-hoverable"> <cnx class=cnx-btn-container> <cnx class=cnx-settings-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink viewBox="0 0 22 22"><path d="M18.454 5.847l-2.642 1.05-1.03-.784c-.444-.338-.904-.603-1.39-.8l-1.205-.488-.404-2.786h-1.563l-.404 2.786-1.205.488c-.465.188-.93.46-1.413.817L6.17 6.9 3.546 5.847l-.783 1.34 2.232 1.727-.16 1.266c-.042.33-.062.59-.062.82s.02.49.062.82l.16 1.266-2.233 1.727.783 1.34 2.642-1.05 1.03.784c.444.338.904.603 1.39.8l1.205.488.404 2.786h1.563l.404-2.786 1.205-.488c.465-.188.93-.46 1.413-.817l1.025-.76 2.625 1.043.783-1.34-2.233-1.727.16-1.266c.043-.337.062-.584.062-.82s-.02-.483-.062-.82l-.16-1.266 2.233-1.727-.783-1.34zm.71 6.227l2.32 1.81c.21.164.264.46.132.702l-2.198 3.793c-.132.24-.418.34-.67.24l-2.736-1.096c-.57.427-1.187.8-1.857 1.074l-.418 2.905c-.033.263-.264.46-.538.46H8.802c-.275 0-.506-.197-.538-.46l-.418-2.905c-.67-.274-1.286-.636-1.857-1.074l-2.736 1.096c-.242.088-.538 0-.67-.24L.385 14.584c-.132-.24-.077-.537.132-.702l2.32-1.81A8.67 8.67 0 0 1 2.758 11a8.67 8.67 0 0 1 .077-1.074l-2.32-1.81a.54.54 0 0 1-.132-.702l2.198-3.793c.132-.24.418-.34.67-.24L5.99 4.478c.57-.427 1.187-.8 1.857-1.074L8.264.5c.033-.263.264-.46.538-.46h4.396c.275 0 .506.197.538.46l.418 2.905c.67.274 1.286.636 1.857 1.074l2.736-1.096c.242-.088.538 0 .67.24l2.198 3.793c.132.24.077.537-.132.702l-2.32 1.81A8.52 8.52 0 0 1 19.242 11a8.52 8.52 0 0 1-.077 1.074zM11 14.256A3.26 3.26 0 0 0 14.256 11 3.26 3.26 0 0 0 11 7.744 3.26 3.26 0 0 0 7.744 11 3.26 3.26 0 0 0 11 14.256zm0-2A1.26 1.26 0 0 1 9.744 11 1.26 1.26 0 0 1 11 9.744 1.26 1.26 0 0 1 12.256 11 1.26 1.26 0 0 1 11 12.256z"/></svg> </cnx> <cnx class=cnx-hd-flag> <svg markup-inline xmlns=http://www.w3.org/2000/svg viewBox="0 0 17 11"><g fill=none><rect class=cnx-color-accent width=17 height=11 rx=2 fill=#09F /><path class=cnx-color-icon d="M8 9L6.9 9 6.9 5.9 4.1 5.9 4.1 9 3 9 3 2 4.1 2 4.1 4.9 6.9 4.9 6.9 2 8 2 8 9ZM10 9L10 2 12 2C12.6 2 13.1 2.2 13.6 2.4 14 2.7 14.4 3.1 14.6 3.6 14.9 4.1 15 4.7 15 5.3L15 5.7C15 6.4 14.9 6.9 14.6 7.4 14.4 7.9 14 8.3 13.5 8.6 13.1 8.9 12.5 9 11.9 9L10 9ZM11 3L11 8 12.2 8C12.8 8 13.2 7.8 13.5 7.4 13.8 7 14 6.4 14 5.7L14 5.3C14 4.6 13.8 4 13.5 3.6 13.2 3.2 12.8 3 12.2 3L11 3Z"/></g></svg> </cnx> </cnx> </cnx> '},function(e,t){e.exports='<cnx class="cnx-icon-button cnx-button-caption cnx-ui-btn-hoverable"> <cnx class=cnx-btn-container> <cnx class=cnx-caption-off-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d="M20.556 5H3.444C3.163 5 3 5.15 3 5.25v13.5c0 .1.163.25.444.25h17.11c.275 0 .444-.156.444-.25V5.25c0-.094-.17-.25-.444-.25zm0-2C21.9 3 23 4.013 23 5.25v13.5c0 1.238-1.1 2.25-2.444 2.25H3.444C2.088 21 1 19.988 1 18.75V5.25C1 4.013 2.088 3 3.444 3h17.11zM11 11H9.5v-.5h-2v3h2V13H11v1c0 .55-.45 1-1 1H7c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1h3c.55 0 1 .45 1 1v1zm7 0h-1.5v-.5h-2v3h2V13H18v1c0 .55-.45 1-1 1h-3c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1h3c.55 0 1 .45 1 1v1z" fill-rule=evenodd /></svg> </cnx> <cnx class=cnx-caption-on-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><g fill=none><path d="M20.6 3C21.9 3 23 4 23 5.3L23 18.8C23 20 21.9 21 20.6 21L3.4 21C2.1 21 1 20 1 18.8L1 5.3C1 4 2.1 3 3.4 3L20.6 3Z" class=cnx-color-accent /><path d="M11 11L9.5 11 9.5 10.5 7.5 10.5 7.5 13.5 9.5 13.5 9.5 13 11 13 11 14C11 14.6 10.6 15 10 15L7 15C6.5 15 6 14.6 6 14L6 10C6 9.5 6.5 9 7 9L10 9C10.6 9 11 9.5 11 10L11 11ZM18 11L16.5 11 16.5 10.5 14.5 10.5 14.5 13.5 16.5 13.5 16.5 13 18 13 18 14C18 14.6 17.6 15 17 15L14 15C13.5 15 13 14.6 13 14L13 10C13 9.5 13.5 9 14 9L17 9C17.6 9 18 9.5 18 10L18 11Z" class=cnx-color-icon /></g></svg> </cnx> </cnx> </cnx> '},function(e,t){e.exports='<cnx class="cnx-progress-bar cnx-video-progress"> <cnx class=cnx-progress-rail-container> <cnx class=cnx-progress-rail></cnx> <cnx class="cnx-progress-fill cnx-color-accent"></cnx> <cnx class=cnx-progress-follow></cnx> </cnx> <cnx class="cnx-progress-handle cnx-color-accent"></cnx> <cnx class=cnx-progress-hitarea></cnx> </cnx> '},function(e,t){e.exports='<cnx class=cnx-ui-loader> <svg class=cnx-color-accent version=1.1 viewBox="0 0 79 90" xmlns=http://www.w3.org/2000/svg><polygon points="21 73.322 11 79 11 12 21 17.678" fill=none stroke-linecap=round stroke-linejoin=round /><polygon points="27 70 27 21 38 27.267 38 63.733" fill=transparent stroke-linecap=round stroke-linejoin=round /><polygon points="44 61 44 31 54 36.769 54 55.231" fill=none stroke-linecap=round stroke-linejoin=round /><polygon points="60 51 60 40 70 45.5" fill=none stroke-linecap=round stroke-linejoin=round /></svg> </cnx> '},function(e,t,i){"use strict";e.exports=i(135)},function(e,t,i){"use strict";Object.defineProperty(t,"_",{value:!0});var s,r,n,o,a,l,c,d,h,u,p,g,m,f,y,b,v=i(37),v=(s=v.Fields.cmpId,r=v.Fields.cmpVersion,n=v.Fields.consentLanguage,o=v.Fields.consentScreen,a=v.Fields.created,l=v.Fields.isServiceSpecific,c=v.Fields.lastUpdated,d=v.Fields.policyVersion,h=v.Fields.publisherCountryCode,u=v.Fields.publisherLegitimateInterests,p=v.Fields.publisherConsents,g=v.Fields.purposeConsents,m=v.Fields.purposeLegitimateInterests,f=v.Fields.purposeOneTreatment,y=v.Fields.specialFeatureOptins,b=v.Fields.useNonStandardStacks,i=v.Fields.vendorListVersion,v=v.Fields.version,P[s]=12,P[r]=12,P[n]=12,P[o]=6,P[a]=36,P[l]=1,P[c]=36,P[d]=6,P[h]=12,P[u]=24,P[p]=24,P[g]=24,P[m]=24,P[f]=1,P[y]=12,P[b]=1,P[i]=12,P[v]=6,P.anyBoolean=1,P.encodingType=1,P.maxId=16,P.numCustomPurposes=6,P.numEntries=12,P.numRestrictions=12,P.purposeId=6,P.restrictionType=2,P.segmentType=3,P.singleOrRange=1,P.vendorId=16,P);function P(){}t.BitLength=v},function(e,t,i){"use strict";Object.defineProperty(t,"_",{value:!0}),(t=t.RestrictionType||(t.RestrictionType={}))[t.NOT_ALLOWED=0]="NOT_ALLOWED",t[t.REQUIRE_CONSENT=1]="REQUIRE_CONSENT",t[t.REQUIRE_LI=2]="REQUIRE_LI"},function(e,t,i){"use strict";Object.defineProperty(t,"_",{value:!0});var r=i(48),n=i(35),o=i(37),i=(s.encode=function(e,t){for(var i="",s=1;s<=t;s++)i+=r.BooleanEncoder.encode(e.has(s));return i},s.decode=function(e,t){if(e.length!==t)throw new n.DecodingError("bitfield encoding length mismatch");for(var i=new o.Vector,s=1;s<=t;s++)r.BooleanEncoder.decode(e[s-1])&&i.set(s);return i.bitLength=e.length,i},s);function s(){}t.FixedVectorEncoder=i},function(e,t){e.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 21h3V3h-3v18zM3 21l14-9L3 3v18z" fill-rule="evenodd"></path></svg>'},function(e,t){e.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg"><path d="M8.6 16.6l4.58-4.6L8.6 7.4 10 6l6 6-6 6-1.4-1.4z"></path></svg>'},function(e,t){e.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4.6 3H10v2H5v5H3V4.6A1.58 1.58 0 0 1 4.6 3zM5 14v5h5v2H4.6A1.58 1.58 0 0 1 3 19.4V14h2zM19.4 3A1.58 1.58 0 0 1 21 4.6V10h-2V5h-5V3h5.4zM19 14h2v5.4a1.58 1.58 0 0 1-1.6 1.6H14v-2h5v-5z" fill-rule="evenodd"></path></svg>'},function(e,t){e.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg"><g stroke-width="3" viewBox="0 0 32 32"><circle class="cnx-svg-circle-stroke" cx="16" cy="17" r="14"></circle></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" class="cnx-color-accent cnx-quote-icon" viewBox="0 0 13 10"><path d="M7 6.9C7 6.2 7.1 5.5 7.3 4.7 7.5 4 7.9 3.4 8.4 2.8 8.8 2.2 9.5 1.7 10.2 1.2 11 0.7 11.9 0.3 13 0L13 1.5C11.8 1.9 10.9 2.3 10.4 2.8 9.8 3.4 9.5 4 9.5 4.7 9.5 4.9 9.6 5.1 9.7 5.2 9.9 5.4 10 5.5 10.2 5.7 10.4 5.8 10.6 5.9 10.9 6 11.1 6.1 11.3 6.3 11.5 6.4 11.7 6.6 11.9 6.8 12 7 12.1 7.3 12.2 7.6 12.2 7.9 12.2 8.6 12 9.1 11.5 9.5 11.1 9.8 10.5 10 9.8 10 9.5 10 9.1 9.9 8.8 9.8 8.4 9.7 8.1 9.5 7.8 9.2 7.6 9 7.4 8.6 7.2 8.2 7.1 7.9 7 7.4 7 6.9ZM0 6.9C0 6.2 0.1 5.5 0.3 4.7 0.5 4 0.9 3.4 1.4 2.8 1.8 2.2 2.5 1.7 3.2 1.2 4 0.7 4.9 0.3 6 0L6 1.5C4.8 1.9 3.9 2.3 3.4 2.8 2.8 3.4 2.5 4 2.5 4.7 2.5 4.9 2.6 5.1 2.7 5.2 2.8 5.4 3 5.5 3.2 5.7 3.4 5.8 3.6 5.9 3.9 6 4.1 6.1 4.3 6.3 4.5 6.4 4.7 6.6 4.9 6.8 5 7 5.1 7.3 5.2 7.6 5.2 7.9 5.2 8.6 5 9.1 4.5 9.5 4.1 9.8 3.5 10 2.8 10 2.4 10 2.1 9.9 1.7 9.8 1.4 9.7 1.1 9.5 0.8 9.2 0.6 9 0.4 8.6 0.2 8.2 0.1 7.9 0 7.4 0 6.9Z"></path></svg>'},function(e,t,i){"use strict";e.exports=h;var s,r=i(41),n=r.LongBits,o=r.base64,a=r.utf8;function l(e,t,i){this.fn=e,this.len=t,this.next=void 0,this.val=i}function c(){}function d(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function h(){this.len=0,this.head=new l(c,0,0),this.tail=this.head,this.states=null}function u(e,t,i){t[i]=255&e}function p(e,t){this.len=e,this.next=void 0,this.val=t}function g(e,t,i){for(;e.hi;)t[i++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;127<e.lo;)t[i++]=127&e.lo|128,e.lo=e.lo>>>7;t[i++]=e.lo}function m(e,t,i){t[i]=255&e,t[i+1]=e>>>8&255,t[i+2]=e>>>16&255,t[i+3]=e>>>24}h.create=r.Buffer?function(){return(h.create=function(){return new s})()}:function(){return new h},h.alloc=function(e){return new r.Array(e)},r.Array!==Array&&(h.alloc=r.pool(h.alloc,r.Array.prototype.subarray)),h.prototype.Ls=function(e,t,i){return this.tail=this.tail.next=new l(e,t,i),this.len+=t,this},(p.prototype=Object.create(l.prototype)).fn=function(e,t,i){for(;127<e;)t[i++]=127&e|128,e>>>=7;t[i]=e},h.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new p((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},h.prototype.int32=function(e){return e<0?this.Ls(g,10,n.fromNumber(e)):this.uint32(e)},h.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},h.prototype.int64=h.prototype.uint64=function(e){e=n.from(e);return this.Ls(g,e.length(),e)},h.prototype.sint64=function(e){e=n.from(e).zzEncode();return this.Ls(g,e.length(),e)},h.prototype.bool=function(e){return this.Ls(u,1,e?1:0)},h.prototype.sfixed32=h.prototype.fixed32=function(e){return this.Ls(m,4,e>>>0)},h.prototype.sfixed64=h.prototype.fixed64=function(e){e=n.from(e);return this.Ls(m,4,e.lo).Ls(m,4,e.hi)},h.prototype.float=function(e){return this.Ls(r.float.writeFloatLE,4,e)},h.prototype.double=function(e){return this.Ls(r.float.writeDoubleLE,8,e)};var f=r.Array.prototype.set?function(e,t,i){t.set(e,i)}:function(e,t,i){for(var s=0;s<e.length;++s)t[i+s]=e[s]};h.prototype.bytes=function(e){var t,i=e.length>>>0;return i?(r.isString(e)&&(t=h.alloc(i=o.length(e)),o.decode(e,t,0),e=t),this.uint32(i).Ls(f,i,e)):this.Ls(u,1,0)},h.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t).Ls(a.write,t,e):this.Ls(u,1,0)},h.prototype.fork=function(){return this.states=new d(this),this.head=this.tail=new l(c,0,0),this.len=0,this},h.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new l(c,0,0),this.len=0),this},h.prototype.ldelim=function(){var e=this.head,t=this.tail,i=this.len;return this.reset().uint32(i),i&&(this.tail.next=e.next,this.tail=t,this.len+=i),this},h.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),i=0;e;)e.fn(e.val,t,i),i+=e.len,e=e.next;return t},h.ie=function(e){s=e}},function(e,t){var i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t,i){"use strict";e.exports=l;var s,r=i(41),n=r.LongBits,o=r.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function l(e){this.buf=e,this.pos=0,this.len=e.length}var c,d="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new l(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new l(e);throw Error("illegal buffer")};function h(){var e=new n(0,0),t=0;if(!(4<this.len-this.pos)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,4<this.len-this.pos){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function u(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function p(){if(this.pos+8>this.len)throw a(this,8);return new n(u(this.buf,this.pos+=4),u(this.buf,this.pos+=4))}l.create=r.Buffer?function(e){return(l.create=function(e){return r.Buffer.isBuffer(e)?new s(e):d(e)})(e)}:d,l.prototype.Rs=r.Array.prototype.subarray||r.Array.prototype.slice,l.prototype.uint32=(c=4294967295,function(){if(c=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return c;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return c}),l.prototype.int32=function(){return 0|this.uint32()},l.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},l.prototype.bool=function(){return 0!==this.uint32()},l.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return u(this.buf,this.pos+=4)},l.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|u(this.buf,this.pos+=4)},l.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=r.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},l.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=r.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},l.prototype.bytes=function(){var e=this.uint32(),t=this.pos,i=this.pos+e;if(i>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,i):t===i?new this.buf.constructor(0):this.Rs.call(this.buf,t,i)},l.prototype.string=function(){var e=this.bytes();return o.read(e,0,e.length)},l.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},l.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},l.ie=function(e){s=e;var t=r.Long?"toLong":"toNumber";r.merge(l.prototype,{int64:function(){return h.call(this)[t](!1)},uint64:function(){return h.call(this)[t](!0)},sint64:function(){return h.call(this).zzDecode()[t](!1)},fixed64:function(){return p.call(this)[t](!0)},sfixed64:function(){return p.call(this)[t](!1)}})}},function(e,i,t){"use strict";function s(e){for(var t in e)i.hasOwnProperty(t)||(i[t]=e[t])}Object.defineProperty(i,"_",{value:!0}),s(t(72)),s(t(60)),s(t(157)),s(t(161)),s(t(77)),s(t(83))},function(e,t,i){"use strict";Object.defineProperty(t,"_",{value:!0});var r=i(35),i=(s.encode=function(e){if(!/^[0-1]+$/.test(e))throw new r.EncodingError("Invalid bitField");var t=e.length%this.LCM;e+=t?"0".repeat(this.LCM-t):"";for(var i="",s=0;s<e.length;s+=this.BASIS)i+=this.DICT[parseInt(e.substr(s,this.BASIS),2)];return i},s.decode=function(e){if(!/^[A-Za-z0-9\-_]+$/.test(e))throw new r.DecodingError("Invalidly encoded Base64URL string");for(var t="",i=0;i<e.length;i++){var s=this.REVERSE_DICT.get(e[i]).toString(2);t+="0".repeat(this.BASIS-s.length)+s}return t},s.DICT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",s.REVERSE_DICT=new Map([["A",0],["B",1],["C",2],["D",3],["E",4],["F",5],["G",6],["H",7],["I",8],["J",9],["K",10],["L",11],["M",12],["N",13],["O",14],["P",15],["Q",16],["R",17],["S",18],["T",19],["U",20],["V",21],["W",22],["X",23],["Y",24],["Z",25],["a",26],["b",27],["c",28],["d",29],["e",30],["f",31],["g",32],["h",33],["i",34],["j",35],["k",36],["l",37],["m",38],["n",39],["o",40],["p",41],["q",42],["r",43],["s",44],["t",45],["u",46],["v",47],["w",48],["x",49],["y",50],["z",51],["0",52],["1",53],["2",54],["3",55],["4",56],["5",57],["6",58],["7",59],["8",60],["9",61],["-",62],["_",63]]),s.BASIS=6,s.LCM=24,s);function s(){}t.Base64Url=i},function(e,t,i){"use strict";var s,r=this&&this.Bs||(s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"_",{value:!0});var n,r=(n=i(43).Cloneable,r(o,n),o.prototype.isEmpty=function(){return!this.root},o.prototype.add=function(e){var t,i={value:e,left:null,right:null};if(this.isEmpty())this.root=i;else for(t=this.root;;)if(e<t.value){if(null===t.left){t.left=i;break}t=t.left}else{if(!(e>t.value))break;if(null===t.right){t.right=i;break}t=t.right}},o.prototype.get=function(){for(var e=[],t=this.root;t;)if(t.left){for(var i=t.left;i.right&&i.right!=t;)i=i.right;t=i.right==t?(i.right=null,e.push(t.value),t.right):(i.right=t).left}else e.push(t.value),t=t.right;return e},o.prototype.contains=function(e){for(var t=!1,i=this.root;i;){if(i.value===e){t=!0;break}e>i.value?i=i.right:e<i.value&&(i=i.left)}return t},o.prototype.min=function(e){var t;for(void 0===e&&(e=this.root);e;)e=e.left||(t=e.value,null);return t},o.prototype.max=function(e){var t;for(void 0===e&&(e=this.root);e;)e=e.right||(t=e.value,null);return t},o.prototype.remove=function(e,t){void 0===t&&(t=this.root);for(var i,s=null,r="left";t;)e<t.value?(t=(s=t).left,r="left"):e>t.value?(t=(s=t).right,r="right"):(t.left||t.right?t.left?t.right?(i=this.min(t.right),this.remove(i,t.right),t.value=i):s?s[r]=t.left:this.root=t.left:s?s[r]=t.right:this.root=t.right:s?s[r]=null:this.root=null,t=null)},o);function o(){var e=null!==n&&n.apply(this,arguments)||this;return e.root=null,e}t.BinarySearchTree=r},function(e,t,i){"use strict";Object.defineProperty(t,"_",{value:!0});var s=(r.cmpId="cmpId",r.cmpVersion="cmpVersion",r.consentLanguage="consentLanguage",r.consentScreen="consentScreen",r.created="created",r.supportOOB="supportOOB",r.isServiceSpecific="isServiceSpecific",r.lastUpdated="lastUpdated",r.numCustomPurposes="numCustomPurposes",r.policyVersion="policyVersion",r.publisherCountryCode="publisherCountryCode",r.publisherCustomConsents="publisherCustomConsents",r.publisherCustomLegitimateInterests="publisherCustomLegitimateInterests",r.publisherLegitimateInterests="publisherLegitimateInterests",r.publisherConsents="publisherConsents",r.publisherRestrictions="publisherRestrictions",r.purposeConsents="purposeConsents",r.purposeLegitimateInterests="purposeLegitimateInterests",r.purposeOneTreatment="purposeOneTreatment",r.specialFeatureOptins="specialFeatureOptins",r.useNonStandardStacks="useNonStandardStacks",r.vendorConsents="vendorConsents",r.vendorLegitimateInterests="vendorLegitimateInterests",r.vendorListVersion="vendorListVersion",r.vendorsAllowed="vendorsAllowed",r.vendorsDisclosed="vendorsDisclosed",r.version="version",r);function r(){}t.Fields=s},function(e,t,i){"use strict";var s,r=this&&this.Bs||(s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"_",{value:!0});var n,o=i(43),a=i(35),l=i(61),r=(n=o.Cloneable,r(c,n),c.unHash=function(e){var t=e.split(this.hashSeparator),i=new c;if(2!==t.length)throw new a.TCModelError("hash",e);return i.purposeId=parseInt(t[0],10),i.restrictionType=parseInt(t[1],10),i},Object.defineProperty(c.prototype,"hash",{get:function(){if(!this.isValid())throw new Error("cannot hash invalid PurposeRestriction");return""+this.purposeId+c.hashSeparator+this.restrictionType},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"purposeId",{get:function(){return this.purposeId_},set:function(e){this.purposeId_=e},enumerable:!0,configurable:!0}),c.prototype.isValid=function(){return Number.isInteger(this.purposeId)&&0<this.purposeId&&(this.restrictionType===l.RestrictionType.NOT_ALLOWED||this.restrictionType===l.RestrictionType.REQUIRE_CONSENT||this.restrictionType===l.RestrictionType.REQUIRE_LI)},c.prototype.isSameAs=function(e){return this.purposeId===e.purposeId&&this.restrictionType===e.restrictionType},c.hashSeparator="-",c);function c(e,t){var i=n.call(this)||this;return void 0!==e&&(i.purposeId=e),void 0!==t&&(i.restrictionType=t),i}t.PurposeRestriction=r},function(e,t,i){"use strict";Object.defineProperty(t,"_",{value:!0}),(t=t.Segment||(t.Segment={})).CORE="core",t.VENDORS_DISCLOSED="vendorsDisclosed",t.VENDORS_ALLOWED="vendorsAllowed",t.PUBLISHER_TC="publisherTC"},function(e,i,t){"use strict";function s(e){for(var t in e)i.hasOwnProperty(t)||(i[t]=e[t])}Object.defineProperty(i,"_",{value:!0}),s(t(48)),s(t(78)),s(t(158)),s(t(62)),s(t(42)),s(t(79)),s(t(80)),s(t(82)),s(t(81))},function(e,t,i){"use strict";Object.defineProperty(t,"_",{value:!0});var s=i(42),r=i(35),i=(n.encode=function(e,t){return s.IntEncoder.encode(Math.round(e.getTime()/100),t)},n.decode=function(e,t){if(t!==e.length)throw new r.DecodingError("invalid bit length");var i=new Date;return i.setTime(100*s.IntEncoder.decode(e,t)),i},n);function n(){}t.DateEncoder=i},function(e,t,i){"use strict";Object.defineProperty(t,"_",{value:!0});var r=i(42),n=i(35),i=(s.encode=function(e,t){var i=(e=e.toUpperCase()).charCodeAt(0)-65,s=e.charCodeAt(1)-65;if(i<0||25<i||s<0||25<s)throw new n.EncodingError("invalid language code: "+e);if(t%2==1)throw new n.EncodingError("numBits must be even, "+t+" is not valid");return r.IntEncoder.encode(i,t/=2)+r.IntEncoder.encode(s,t)},s.decode=function(e,t){if(t!==e.length||e.length%2)throw new n.DecodingError("invalid bit length for language");var i=e.length/2,t=r.IntEncoder.decode(e.slice(0,i),i)+65,i=r.IntEncoder.decode(e.slice(i),i)+65;return String.fromCharCode(t)+String.fromCharCode(i)},s);function s(){}t.LangEncoder=i},function(e,t,i){"use strict";Object.defineProperty(t,"_",{value:!0});var g=i(60),m=i(48),f=i(35),y=i(42),b=i(37),i=(s.encode=function(c){var d=y.IntEncoder.encode(c.numRestrictions,g.BitLength.numRestrictions);return c.isEmpty()||c.getRestrictions().forEach(function(e){d+=y.IntEncoder.encode(e.purposeId,g.BitLength.purposeId),d+=y.IntEncoder.encode(e.restrictionType,g.BitLength.restrictionType);for(var t=c.getVendors(e),i=t.length,s=0,r=0,n="",o=0;o<i;o++){var a,l=t[o];0===r&&(s++,r=l),(o===i-1||t[o+1]>l+1)&&(n+=m.BooleanEncoder.encode(a=!(l===r)),n+=y.IntEncoder.encode(r,g.BitLength.vendorId),a&&(n+=y.IntEncoder.encode(l,g.BitLength.vendorId)),r=0)}d+=y.IntEncoder.encode(s,g.BitLength.numEntries),d+=n}),d},s.decode=function(e){var t=0,i=new b.PurposeRestrictionVector,s=y.IntEncoder.decode(e.substr(t,g.BitLength.numRestrictions),g.BitLength.numRestrictions);t+=g.BitLength.numRestrictions;for(var r=0;r<s;r++){var n=y.IntEncoder.decode(e.substr(t,g.BitLength.purposeId),g.BitLength.purposeId);t+=g.BitLength.purposeId;var o=y.IntEncoder.decode(e.substr(t,g.BitLength.restrictionType),g.BitLength.restrictionType);t+=g.BitLength.restrictionType;var a=new b.PurposeRestriction(n,o),l=y.IntEncoder.decode(e.substr(t,g.BitLength.numEntries),g.BitLength.numEntries);t+=g.BitLength.numEntries;for(var c=0;c<l;c++){var d=m.BooleanEncoder.decode(e.substr(t,g.BitLength.anyBoolean));t+=g.BitLength.anyBoolean;var h=y.IntEncoder.decode(e.substr(t,g.BitLength.vendorId),g.BitLength.vendorId);if(t+=g.BitLength.vendorId,d){var u=y.IntEncoder.decode(e.substr(t,g.BitLength.vendorId),g.BitLength.vendorId);if(t+=g.BitLength.vendorId,u<h)throw new f.DecodingError("Invalid RangeEntry: endVendorId "+u+" is less than "+h);for(var p=h;p<=u;p++)i.add(p,a)}else i.add(h,a)}}return i.bitLength=t,i},s);function s(){}t.PurposeRestrictionVectorEncoder=i},function(e,t,i){"use strict";Object.defineProperty(t,"_",{value:!0});var u=i(37),p=i(71),g=i(42),m=i(48),f=i(62),y=i(82),b=i(35),i=(s.encode=function(i){var s,r=[],n=[],e=g.IntEncoder.encode(i.maxId,p.BitLength.maxId),o="",t=p.BitLength.maxId+p.BitLength.encodingType,a=t+i.maxId,l=2*p.BitLength.vendorId+p.BitLength.singleOrRange+p.BitLength.numEntries,c=t+p.BitLength.numEntries;return i.forEach(function(e,t){o+=m.BooleanEncoder.encode(e),(s=i.maxId>l&&c<a)&&e&&(i.has(t+1)?0===n.length&&(n.push(t),c+=p.BitLength.singleOrRange,c+=p.BitLength.vendorId):(n.push(t),c+=p.BitLength.vendorId,r.push(n),n=[]))}),s?(e+=y.VectorEncodingType.RANGE+"",e+=this.buildRangeEncoding(r)):(e+=y.VectorEncodingType.FIELD+"",e+=o),e},s.decode=function(e,t){var i,s=0,r=g.IntEncoder.decode(e.substr(s,p.BitLength.maxId),p.BitLength.maxId);s+=p.BitLength.maxId;var n=g.IntEncoder.decode(e.charAt(s),p.BitLength.encodingType);if(s+=p.BitLength.encodingType,n===y.VectorEncodingType.RANGE){if(i=new u.Vector,1===t){if("1"===e.substr(s,1))throw new b.DecodingError("Unable to decode default consent=1");s++}var o=g.IntEncoder.decode(e.substr(s,p.BitLength.numEntries),p.BitLength.numEntries);s+=p.BitLength.numEntries;for(var a=0;a<o;a++){var l=m.BooleanEncoder.decode(e.charAt(s));s+=p.BitLength.singleOrRange;var c=g.IntEncoder.decode(e.substr(s,p.BitLength.vendorId),p.BitLength.vendorId);if(s+=p.BitLength.vendorId,l){var d=g.IntEncoder.decode(e.substr(s,p.BitLength.vendorId),p.BitLength.vendorId);s+=p.BitLength.vendorId;for(var h=c;h<=d;h++)i.set(h)}else i.set(c)}}else{t=e.substr(s,r);s+=r,i=f.FixedVectorEncoder.decode(t,r)}return i.bitLength=s,i},s.buildRangeEncoding=function(e){var t=e.length,i=g.IntEncoder.encode(t,p.BitLength.numEntries);return e.forEach(function(e){var t=1===e.length;i+=m.BooleanEncoder.encode(!t),i+=g.IntEncoder.encode(e[0],p.BitLength.vendorId),t||(i+=g.IntEncoder.encode(e[1],p.BitLength.vendorId))}),i},s);function s(){}t.VendorVectorEncoder=i},function(e,t,i){"use strict";Object.defineProperty(t,"_",{value:!0}),(t=t.VectorEncodingType||(t.VectorEncodingType={}))[t.FIELD=0]="FIELD",t[t.RANGE=1]="RANGE"},function(e,i,t){"use strict";function s(e){for(var t in e)i.hasOwnProperty(t)||(i[t]=e[t])}Object.defineProperty(i,"_",{value:!0}),s(t(159)),s(t(160))},function(e,t,i){"use strict";Object.defineProperty(t,"_",{value:!0});var a=i(71),l=i(37),c=i(42),d=i(162),i=(s.encode=function(s,e){var r,n="";return s=a.SemanticPreEncoder.process(s,e),(r=Array.isArray(null===e||void 0===e?void 0:e.segments)?e.segments:new a.SegmentSequence(s,e)[""+s.version]).forEach(function(e,t){var i="";t<r.length-1&&(i="."),n+=a.SegmentEncoder.encode(s,e)+i}),n},s.decode=function(e,t){var i=e.split("."),s=i.length;t=t||new d.TCModel;for(var r=0;r<s;r++){var n=i[r],o=a.Base64Url.decode(n.charAt(0)).substr(0,a.BitLength.segmentType),o=l.SegmentIDs.ID_TO_KEY[c.IntEncoder.decode(o,a.BitLength.segmentType).toString()];a.SegmentEncoder.decode(n,t,o)}return t},s);function s(){}t.TCString=i},function(e,t,i){"use strict";i=i(165).decodeConsentString;e.exports={decodeConsentString:i}},function(t,i,e){"use strict";e.d(i,"a",function(){return D});var s=e(0),n=e.n(s),r=e(5),h=e(7),a=e(2),o=e(133),c=e(129),u=e(87),l=e(88),d=e(17),f=e(18),p=e(31),b=e(1),v=e(6),m=e(16),g=e(51),y=e(36),w=e(50),x=e(89),S=e(131),O=e(130),k=e(27),_=e(24),j=e(90),A=e(19),I=e(21),C=e(3),T=e(91),P=e(132),M=e(134),E=e(45),L=e(49);const R="player_instance",B=",";class D extends A.a{constructor(e,t,i,s,r,n){super(),this.services=e,this.GLOBAL=t,this.hs=i,this.cs=s,this.Ds=r,this.readyCallback=n,this.Fs={},this.$s="<cnx-placeholder></cnx-placeholder>",this.Us=100,this.Vs=1e3,this.isServerlessMode=!1,this.Ns=!1,this.Hs=[],this.qs="{{omidVerificationClient}}",this.hs&&this.zs(),this.Ws=L.a.detectUsingCSS(this.GLOBAL),this.Gs=Object(a.p)(this.GLOBAL)}Js(){const e={playerId:this.externalAttributes.playerId,_appSettings:this.externalAttributes._appSettings,settings:{_connatixInternals:this.externalAttributes.settings._connatixInternals,advertising:{},customization:{},rendering:{},plugins:{}}};this.externalAttributes.customParam1&&(e.customParam1=this.externalAttributes.customParam1),this.externalAttributes.customParam2&&(e.customParam2=this.externalAttributes.customParam2),this.externalAttributes.customParam3&&(e.customParam3=this.externalAttributes.customParam3),this.externalAttributes.customParam4&&(e.customParam4=this.externalAttributes.customParam4),this.externalAttributes.customParam5&&(e.customParam5=this.externalAttributes.customParam5),this.externalAttributes.settings.useExternalViewabilityService&&(e.settings.useExternalViewabilityService=this.externalAttributes.settings.useExternalViewabilityService),this.externalAttributes=e}Qs(t){var i=this.GLOBAL.frameElement;if(Object(a.E)(i)){let e=i&&t?!1:!0;(e?Object(a.v):Object(a.R))(i)}}Ys(e,t){try{return this.Ks(e,t)}catch(e){return null}}Zs(t){let i;try{i=eval(t)}catch(e){i=t.replace(/\[(\d+)]/g,":nth-child($1)")}return i}tn(t,i){var e=this.Ys(t,i);return null===e?new Promise(e=>{setTimeout(()=>{e(this.tn(t,i))},this.Us)}):Promise.resolve(e)}in(e,t){e=this.Zs(e);return Promise.resolve(this.tn(e,t))}Ks(e,t){let i;return e.split(/(\.cnxEq\(\d+\))/).filter(e=>e).forEach(e=>{i=-1===e.indexOf("cnxEq")?i?i.querySelectorAll(e):Object(a.K)(e,t):this.en(i,e)}),i?(i.hasOwnProperty("length")&&(i=0<i.length?i[0]:null),i):null}en(e,t){t=/\d+/g.exec(t),t=parseInt(t[0],10);return t>e.length?Object(v.c)(e)[e.length-1]:Object(v.c)(e)[t]}nn(){return this.cs?s.ProtoImplementationType.Amp:s.ProtoImplementationType.Web}rn(t,n){const o=Object(h.f)(this.GLOBAL);let i;return i=(Object(b.a)(this.externalAttributes.settings.rendering.forceInsertPath)?this.externalAttributes.settings.rendering:n).forceInsertPath,new Promise((s,e)=>{let r=Object(a.f)(this.$s,this.GLOBAL);if(i||t.tag.parentNode===this.GLOBAL.document.head&&(!o.topChildFrame||n.renderInFrame)){let e,t,i;o.topChildFrame&&Object(a.L)(o.topChildFrame.frameElement,C.h.DisplayNone),e=(Object(b.h)(this.externalAttributes.settings.rendering.containerSelector)?this.externalAttributes.settings.rendering:n).containerSelector,t=(Object(b.a)(this.externalAttributes.settings.rendering.insertPosition)?this.externalAttributes.settings.rendering:n).insertPosition,i=(Object(b.a)(this.externalAttributes.settings.rendering.position)?this.externalAttributes.settings.rendering:n).position,this.in(e,o.topFrame).then(e=>{this.hn(e,r,t,i),s({insertContainer:r,insertWindow:o.topFrame})})}else o.topChildFrame&&!n.renderInFrame?(r=Object(a.f)(this.$s,o.topFrame),o.topChildFrame.frameElement.parentNode.insertBefore(r,o.topChildFrame.frameElement),Object(a.a)(o.topChildFrame.frameElement,C.h.DisplayNone),s({insertContainer:r,insertWindow:o.topFrame})):(t.tag.parentNode.insertBefore(r,t.tag),s({insertContainer:r}))})}an(e,t,i){Object(a.y)(t,e,i)}cn(e,t,i){switch(i){case s.ProtoPlayerInsertMode.BeforeContainer:e.parentElement.insertBefore(t,e);break;case s.ProtoPlayerInsertMode.ReplaceContainer:e.parentElement.insertBefore(t,e),Object(a.M)(e);break;case s.ProtoPlayerInsertMode.HideContainer:e.parentElement.insertBefore(t,e),Object(a.v)(e);break;case s.ProtoPlayerInsertMode.AfterContainer:e.nextElementSibling?e.parentElement.insertBefore(t,e.nextElementSibling):e.parentElement.appendChild(t)}}hn(e,t,i,r){i===s.ProtoPlayerInsertMode.WithinContainer?this.an(e,t,r):this.cn(e,t,i)}un(e,t=[]){e.lineItems=[...e.lineItems,...t];t=e.lineItems.length;e.lineItems=Object(v.e)("advertiserLineItemId",e.lineItems),t!==e.lineItems.length&&Object(r.a)({level:s.ProtoLoggingLevelEnum.WARNING,message:"Loader_duplicated_adsources",callStack:"_"})}ln(t,i){const n=t.players[i],{playerModel:o,globalDomUtilsService:a}=this.Fs[i];if(this.Ws||this.services.UserManagerService.setThirdPartySyncUrls(t.cookieSyncUrls),this.services.UserManagerService.setGeoLocation(t.geoLocation),p.a.sessionId=n.sessionId,this.dn.addPlayerSession(n.playerId,n.sessionId),o){var d=new l.a({browser:t.browser,geoLocation:t.geoLocation,pageUrl:this.pageUrl,playerId:o.playerId,explorationMode:t.explorationMode,bundleID:this.externalAttributes._appSettings.bundleID,appID:this.externalAttributes._appSettings.appID,domainURL:this.externalAttributes._appSettings.domainURL,storeURL:this.externalAttributes._appSettings.storeURL,appCategories:this.externalAttributes._appSettings.appCategories,appIsPaid:this.externalAttributes._appSettings.appIsPaid,appName:this.externalAttributes._appSettings.appName,appPrivacyPolicy:this.externalAttributes._appSettings.appPrivacyPolicy,appVersion:this.externalAttributes._appSettings.appVersion,deviceId:this.externalAttributes._appSettings.deviceID,isRecyclerViewIntegration:this.externalAttributes._appSettings.isRecyclerViewIntegration,appPageURL:this.externalAttributes._appSettings.appPageURL}),h=d.browser.browserType===_.a.InternetExplorer,f=new g.a(a),y=this.getViewabilityService(o,f,h),h=this.Ws;this.Ws=L.a.detectUsingCSS(o.global),h!==this.Ws&&Object(r.a)({message:"Loader_adBlockerDetection_changed_after_new_global",throttle:2,sendMaxLog:!1,level:s.ProtoLoggingLevelEnum.INFO,exception:`${h}`});const v=new u.a(o,t.geoLocation,d.pageUrl,d.pageDomain,this.externalAttributes._appSettings,this.Gs),S={services:{GlobalDomUtilsService:a,ViewabilityService:y,TrackingService:this.pn(o,t,i),ResizeObserver:new c.a(o.global),UserManagerService:this.services.UserManagerService,MacrosService:v,EventsStorageService:this.services.EventsStorageService,PageFocusService:f,InteractionService:new M.a(o.global,d.isMobile)},config:d};this.Ws&&S.services.TrackingService.trackSessionAdBlocker(s.ProtoAdBlockDetectionTypeEnum.Banner),S.services.UserManagerService.setPageUrl(S.config.pageUrl);f=this.nn();S.services.TrackingService.setImplementationTypeOnMeta(f),o.externalMacros&&S.services.MacrosService.addExtraMacros(o.externalMacros),S.services.UserManagerService.onEvent([w.a.CCPA_INFO_RECEIVED]).then(()=>{S.services.MacrosService.setUsPrivacyString(S.services.UserManagerService.getUsPrivacyString())}),S.services.UserManagerService.onEvent([w.a.CONSENT_DATA_UPDATE]).then(()=>{S.services.TrackingService.updateMetadataModel({userId:S.services.UserManagerService.getTrackableUser()});const e=S.services.UserManagerService.getConsentPayload();if(S.services.TrackingService.hasGdprConsentPayload=Object(b.h)(e),this.services.UserManagerService.gdprConsentMode===s.ProtoGdprConsentModeEnum.NoConsent||this.hs){const e=o.lineItemSettings.lineItems.filter(e=>Object(b.h)(e.vendorId)).every(e=>this.services.UserManagerService.isConsent(e.vendorId));this.services.UserManagerService.gdprConsentMode=e?s.ProtoGdprConsentModeEnum.AllGood:s.ProtoGdprConsentModeEnum.NotAllDemandConsent}});d={wasPlayerReloaded:this.dn.wasPlayerReloaded(n.playerId),wasPlayerInView:this.dn.getSessionInView(n.playerId)};this.renderer=this.getRendererInstance(o,S,this.Ws,d,this.externalAttributes._appSettings),this.subscribe(I.c.SessionView,this.renderer,()=>{this.dn.addSessionInView(n.playerId)}),this.subscribe(I.c.SessionRendered,this.renderer,()=>{var e;this.bn&&(e=this.services.UserManagerService.getUserId(),new P.a(v,a,this.bn,e).addFraudSensorScript())});f=this.renderer.init(),d=Object.assign({configEnums:this.getApiConfigEnums(),configEvents:this.getApiConfigEvents()},this.renderer.getApiMethods());let e=n.customJsCode;if(e){const t=`${R}_${S.config.appId}`;this.GLOBAL[t]=d,e=e.cnx_replaceAll(`"{{${R}}}"`,`window.${t}`)}f?this.registerApiSuccess(d,e):this.registerApiError(m.a.RenderError,"Player size under supported value")}else this.registerApiError(m.a.SetupError,"No playlist was provided!")}pn(e,t,i){return e.disableTracking?new x.a:new o.a({userManagerService:this.services.UserManagerService,browser:t.browser,geoLocation:t.geoLocation,playerId:e.playerId,userId:this.services.UserManagerService.getTrackableUser(),sessionId:t.players[i].sessionId,pageUrl:this.pageUrl,bundleId:this.externalAttributes._appSettings.bundleID,customParam1:this.externalAttributes.customParam1,customParam2:this.externalAttributes.customParam2,customParam3:this.externalAttributes.customParam3,customParam4:this.externalAttributes.customParam4,customParam5:this.externalAttributes.customParam5,abTestId:t.players[i].abTestId,explorationMode:t.explorationMode})}vn(t,i={useSafeMode:!0}){if(t){var{global:s,useSafeMode:i}=i,s=s||this.GLOBAL;let e;e=i?`\n        (function() {\n            "use strict";\n            try {\n                ${t}\n            }catch(e){\n                console.warn('---CnxCustomApiError---');\n                console.warn(e.message);\n            }\n          })()\n        `:t,Object(a.z)(s.document.head,s,e.trim())}}zs(){var e;this.qs.includes("{{omidVerificationClient")||(e={useSafeMode:!1,global:window},this.vn(decodeURI(this.qs),e))}mn(){var{playerId:e,parseDomain:t}=this.gn;return this.yn(e,t).catch(e=>{e=new Error(e);throw Object(r.a)({callStack:e.stack,level:s.ProtoLoggingLevelEnum.FATAL,exception:e.message,message:"Prerender_Loader_player_id_call_get_pls",throttle:1e3}),this.registerApiError(m.a.SetupError,"player data call error"),this.wn(),e})}xn(t){var{browser:e,userInformation:i}=t;if(this.services.UserManagerService.setUserInformation(i),this.services.UserManagerService.setBrowserInfo(e),i&&i.callFraudSensor){const{lookupId:t,lookupResponseCode:s,publisherAdsTxt:r}=i;this.bn={lookupId:t,lookupResponseCode:s,publisherAdsTxt:r,deviceType:e.device}}y.a.serverAb0=t.serverAb0,y.a.serverAb1=t.serverAb1,Object(v.h)(t.players)?(1<t.players.length&&(this.Js(),this.Ns=!0),Object.keys(t.players).forEach(e=>{this.Sn(t,this.gn,e)})):this.registerApiError(m.a.NoPlayer,`No player available for given player id:${this.gn.playerId}`),this.wn()}wn(){this.kn(),this._n()}_n(){setTimeout(()=>{var e;this.Ns||(e=this.Hs[0],this.readyCallback&&this.readyCallback(e.apiErrorObj,e.apiConfigObj)),this.jn()})}jn(){this.Hs.filter(e=>e.apiErrorObj).forEach(()=>{this.services.EventsStorageService.emitRenderError()}),this.Hs.filter(e=>e.customJs).forEach(e=>{this.vn(e.customJs)})}Sn(e,t,i){var s=e.players[i],r=this.Fs[i]["playerModel"];this.Qs(s.renderInFrame),this.ln(e,i),this.An(r,this.renderer.playerContainer)}yn(e,t=!1){let i={parseDomain:t,referrer:this.Gs,pageUrl:this.pageUrl,tokens:[e]};i.bundleId=this.externalAttributes._appSettings.bundleID,this.queryParams.cnxLineItemId&&(i.forceLineItemIds=this.queryParams.cnxLineItemId.split(B).filter(e=>Object(b.h)(e))),this.queryParams.cnxPlayerId?i.forcePlayerId=this.queryParams.cnxPlayerId:this.externalAttributes.settings._connatixInternals.skipServingRules&&(i.forcePlayerId=e),this.queryParams.cnxExplorationMode&&(i.forceExploration=!0);const s=this.externalAttributes.settings["queryJsTargeting"];return Object(b.f)(s)&&0<Object.keys(s).length&&(i.queryJsTargeting=Object.keys(s).reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:`${s[t]}`}),{})),i.customParam1=this.externalAttributes.customParam1,i.customParam2=this.externalAttributes.customParam2,i.customParam3=this.externalAttributes.customParam3,i.customParam4=this.externalAttributes.customParam4,i.customParam5=this.externalAttributes.customParam5,i.disableTracking=this.externalAttributes.settings._connatixInternals.disableTracking,i.version=f.a.version,i.es6=f.b,i.userId=this.services.UserManagerService.getForcedTrackableUser(),i.isConsentConnatix=this.services.UserManagerService.isConsentConnatix(),i.clientAb0=y.a.clientAb0,i.clientAb1=y.a.clientAb1,i.implementationType=this.nn(),i.reloadedPlayers=this.dn.getCookiePlayersSession(),i=Object.assign(Object.assign({},i),this.getSpecificRequestData()),this.gn.playerId?this.getPlayerResponse(i,this.gn.playerId||"serverless"):new Promise((e,t)=>{this.isServerlessMode=!0,e(this.defaultInitFromProto())})}In(){var e=Object(d.b)("cnxVideoPosition",this.pageUrl),t=parseInt(Object(d.b)("cnxStoryPosition",this.pageUrl),10);return{cnxStoryId:Object(d.b)("cnxStoryId",this.pageUrl),cnxLineItemId:Object(d.b)("cnxLineItemId",this.pageUrl),cnxPlayerId:Object(d.b)("cnxPlayerId",this.pageUrl),cnxMediaId:Object(d.b)("cnxMediaId",this.pageUrl),cnxPlaylistId:Object(d.b)("cnxPlaylistId",this.pageUrl),cnxVideoPosition:e?parseInt(e,10):null,cnxExplorationMode:"true"===Object(d.b)("cnxExplorationMode",this.pageUrl),cnxStoryPosition:Object(b.e)(t)?t:null,cnxSkipAdsFlag:"true"===Object(d.b)("cnxSkipAdsFlag",this.pageUrl),cnxReloadTime:parseInt(Object(d.b)("cnxReloadTime",this.pageUrl),10),cnxOverrideLineitems:"true"===Object(d.b)("cnxOverrideLineitems",this.pageUrl),cnxIsSeoTraffic:"true"===Object(d.b)("cnxIsSeoTraffic",this.pageUrl)}}An(e,t){var i=this.getDelegateHandler();new S.a(this.GLOBAL,this.services.EventsStorageService,i,e,t).start()}Cn(){var e=this.GLOBAL.OmidSessionClient&&this.GLOBAL.OmidSessionClient[k.j];e?this.Tn=new O.a(e,this.services.EventsStorageService,this.externalAttributes._appSettings.sdkVersion):Object(r.a)({message:"OmidSessionClient not found.",level:s.ProtoLoggingLevelEnum.FATAL})}Pn(n){const e=()=>new Promise((e,t)=>{var i=this.Mn();n.addCssStylesheetToHead(i,()=>e(),e=>t(e))});return Object(h.k)(()=>e()).catch(e=>{throw Object(r.a)({message:"Loader_add_css_link",exception:e,level:s.ProtoLoggingLevelEnum.INFO}),new Error(e)})}updateQueryParams(){this.queryParams=this.In()}loadScriptTag(e,t){let i;if(this.externalAttributes=e,t&&(i=this.GLOBAL.document.getElementById(t)),!i)return Object(r.a)({message:"Loader_no_script_id",exception:`${e.playerId}`,level:s.ProtoLoggingLevelEnum.WARNING}),this.registerApiError(m.a.SetupError,"Could not locate any script tag ids in the page"),!1;t=Object(b.f)(e.settings.plugins.adobeAnalyticsSettings);return this.Ds&&this.Cn(),this.gn={parseDomain:t,playerId:e.playerId,tag:i},!0}insertRenderer(){try{this.dn=new j.a(this.queryParams.cnxReloadTime),this.Qs();this.kn=this.services.UserManagerService.registerPlsCall(()=>{try{this.mn().then(o=>{const t=[];o.players.forEach((i,n)=>{o.players[n].limitClientSideApiUse&&this.Js();var e=this.rn(this.gn,i).then(e=>{this.un(i,o.lineItems);var t=this.getPlayerModel(e,o,n.toString()),e=new T.a(t.global);return Object(E.a)(t.lineItemSettings.lineItems),this.Fs[n]={playerModel:t,globalDomUtilsService:e},this.Pn(e)}).catch(e=>{this.registerApiError(m.a.SetupError,"rendering error"),Object(r.a)({message:"Loader_send_data_to_renderer",exception:e.message,callStack:e.stack,level:s.ProtoLoggingLevelEnum.FATAL})});t.push(e)}),Promise.all(t).then(()=>this.xn(o))})}catch(e){Object(r.a)({message:"Prerender_Loader_do_player_call",callStack:e.stack,exception:e.message,throttle:1e3})}})}catch(e){Object(r.a)({message:"Prerender_Loader_insert_renderer",exception:e.message,callStack:e.stack,level:s.ProtoLoggingLevelEnum.FATAL})}}findPageUrl(t,i,e=!1){if(t.cnx_page_url)this.pageUrl=t.cnx_page_url;else try{t["cnxAmpAd)"]?this.pageUrl=t.context.sourceUrl||t.context.location.href:this.pageUrl=i||Object(h.e)(Object(h.f)(this.GLOBAL),this.GLOBAL)}catch(t){}if(!this.pageUrl||0===this.pageUrl.length)return e||Object(r.a)({message:"Prerender_Loader_find_page_url",level:s.ProtoLoggingLevelEnum.INFO,throttle:1e3}),new Promise(e=>{setTimeout(()=>{this.findPageUrl(t,i,!0).then(()=>e())},this.Vs)});try{return this.pageUrl=Object(d.d)(this.pageUrl),Promise.resolve()}catch(t){return Object(r.a)({message:"Loader_find_page_url",exception:t.message,callStack:t.stack,level:s.ProtoLoggingLevelEnum.FATAL}),Promise.reject()}}registerApiError(e=m.a.SetupError,t=""){this.Hs.push({apiErrorObj:{type:e,message:t}})}registerApiSuccess(e,t){this.Hs.push({apiConfigObj:e,customJs:t})}destroy(){this.renderer&&this.renderer.destroy()}}},function(e,t,i){"use strict";i.d(t,"a",function(){return d});var o,a=i(0),s=i(7),r=i(2),n=i(32),l=i(28),c=i(1);(i=o=o||{}).AppUrl="APP_URL",i.AppBundle="APP_BUNDLE",i.AppName="APP_NAME",i.Uuid="UUID",i.PageUrl="PAGE_URL",i.AdPosition="AD_POSITION",i.VideoTitle="VIDEO_TITLE",i.MediaTitle="MEDIA_TITLE",i.VideoDuration="VIDEO_DURATION",i.ContentLength="CONTENT_LENGTH",i.VideoDescription="VIDEO_DESCRIPTION",i.VideoUrl="VIDEO_URL",i.VideoId="VIDEO_ID",i.VideoTime="VIDEO_TIME",i.DescriptionUrl="DESCRIPTION_URL",i.VideoKeywords="VIDEO_KEYWORDS",i.Autoplay="AUTOPLAY",i.UserAgent="UA",i.Ip="IP",i.CashBuster="CB",i.Width="WIDTH",i.Height="HEIGHT",i.Domain="DOMAIN",i.SourceReferrer="SOURCE_REFERRER",i.Gdpr="GDPR",i.GdprConsent="GDPR_CONSENT",i.Consent="CONSENT",i.Ctd="CTD",i.Publisher="PUBLISHER",i.Random="RAND",i.Site="SITE",i.SubId="SUB_ID",i.Url="URL",i.UserLat="USER_LAT",i.UserLong="USER_LONG",i.UsPrivacyString="US_PRIVACY",i.DoNotTrack="DNT",i.FraudSensorUserId="FS_USER_ID",i.PublisherId="PUBLISHER_ID",i.SessionId="SESSION_ID",i.FraudSensorDeviceType="FS_DEVICE_TYPE",i.FraudSensorLookupId="MGID",i.FraudSensorLookupResponseCode="MGTO",i.FraudSensorMediaType="FS_MEDIA_TYPE",i.CnxSupplierId="CNX_SUPPLIER_ID";class d{constructor(e,t,i,s,r,n){this.En=new Map,this.Ln="[",this.Rn="]",this.En.set(o.Autoplay,e.playbackMode===a.ProtoPlayerPlaybackModeEnum.Autoplay),this.En.set(o.UserAgent,navigator.userAgent),this.En.set(o.UserLong,t.lon),this.En.set(o.UserLat,t.lat),this.En.set(o.Ip,t.ip),this.Bn(r),this.Dn(n),this.Fn(i),this.$n(),this.En.set(o.Domain,s),this.En.set(o.CnxSupplierId,l.c),this.En.set(o.SessionId,e.sessionId)}Bn(e){this.En.set(o.AppBundle,e.bundleID),this.En.set(o.AppName,e.appName),this.En.set(o.AppUrl,e.storeURL)}Dn(e){this.En.set(o.SourceReferrer,e)}$n(){var e=Object(r.D)()?1:0;this.En.set(o.DoNotTrack,e)}Fn(e){this.En.set(o.PageUrl,e),this.En.set(o.Url,e),this.En.set(o.Publisher,e),this.En.set(o.Site,e),this.En.set(o.DescriptionUrl,e)}Un(){var e=Object(s.c)();this.En.set(o.CashBuster,e),this.En.set(o.Random,e),this.En.set(o.Ctd,e)}Vn(e){return e.split("?")[0]}Nn(e){return e.split("?").slice(1).join("?")}Hn(e,t,i){return 0===e.indexOf(t)&&e.indexOf(i,i.length)===e.length-t.length}qn(e,t){var i=this.Vn(e),t=this.zn(this.Nn(e),t);return`${i}${t?`?${t}`:""}`}zn(e,i,s=!1){let r=e;return r.split("&").forEach(e=>{const t=e.split("=");if(t[1])if(this.Hn(t[1],this.Ln,this.Rn))r=r.replace(t[1],this.Wn(t[1].toLowerCase(),i,s));else if(1<decodeURIComponent(t[1]).split("=").length){const e=this.zn(decodeURIComponent(t[1]),i,!0);r=r.replace(t[1],encodeURIComponent(e))}}),this.Gn(r)}Gn(e){return e=-1<(e=-1<e.indexOf(this.Ln)?e.cnx_replaceAll(this.Ln,encodeURIComponent(this.Ln)):e).indexOf(this.Rn)?e.cnx_replaceAll(this.Rn,encodeURIComponent(this.Rn)):e}Wn(e,t,i){let s,r=e;return t.forEach((e,t)=>{for(;-1<r.indexOf(this.Ln+t.toLowerCase()+this.Rn);)s=i?e:encodeURIComponent(e),r=r.replace(this.Ln+t.toLowerCase()+this.Rn,s)}),r}setAdWidth(e){this.En.set(o.Width,Math.floor(e))}setAdHeight(e){this.En.set(o.Height,Math.floor(e))}setSubId(e){this.En.set(o.SubId,e)}setGDPR(e){this.En.set(o.Gdpr,e)}setUUID(e){this.En.set(o.Uuid,e)}setGDPRConsent(e){this.En.set(o.GdprConsent,e)}setConsent(e){this.En.set(o.Consent,e)}setVideoId(e){this.En.set(o.VideoId,e)}setVideoTime(e){this.En.set(o.VideoTime,Math.floor(e))}setVideoUrl(e){this.En.set(o.VideoUrl,e)}setVideoDescription(e){this.En.set(o.VideoDescription,e)}setVideoDuration(e){this.En.set(o.VideoDuration,e),this.En.set(o.ContentLength,e)}setVideoTitle(e){let t;this.En.set(o.VideoTitle,e),this.En.set(o.MediaTitle,e),e&&(t=e.split(" ").join(",")),this.En.set(o.VideoKeywords,t)}setAdPosition(e="midRoll"){this.En.set(o.AdPosition,e)}setupMacros(e){return this.Un(),this.qn(e,this.En)}addExtraMacros(t){const i=Object(n.a)(o);Object.keys(t).filter(e=>!i.includes(e.toUpperCase())).forEach(e=>{this.En.set(e,t[e])})}getExtraMacros(){const i=Object(n.a)(o),s={};return this.En.forEach((e,t)=>{i.includes(t)||null==e||(s[t]=Object(c.h)(e)?e:JSON.stringify(e))}),s}setUsPrivacyString(e){this.En.set(o.UsPrivacyString,e||"")}setUserId(e){this.En.set(o.FraudSensorUserId,e)}setPublisherId(e){this.En.set(o.PublisherId,e)}setFraudSensorMacros(e){this.En.set(o.FraudSensorDeviceType,e.deviceType),this.En.set(o.FraudSensorLookupId,e.lookupId),this.En.set(o.FraudSensorLookupResponseCode,e.lookupResponseCode),this.En.set(o.FraudSensorMediaType,e.mediaType)}destroy(){}}},function(e,t,i){"use strict";i.d(t,"a",function(){return l});var r=i(22),s=i(7),n=i(24),o=i(17),a=i(1);class l{constructor(e){this.Jn=e,this.Qn=100,this.Xn=Object(s.f)(window).topFrame,this.Yn=-1<r.a.indexOf(this.Jn.browser.device),this.Kn=Object(s.d)(),this.Zn={browserType:this.tr(),browserVersion:this.Jn.browser.browserVersion},this.ir=this.er(),this.sr=this.pageUrl.substr(0,this.Qn),this.nr=Object(o.a)(this.sr)}tr(){let t;return Object.keys(n.a).forEach(e=>{-1<this.Jn.browser.browserType.toLowerCase().indexOf(n.a[e])&&(t=n.a[e])}),t}er(){let t,e=0;const i=this.Jn.browser.osCode.split("_"),s=i[0].toLowerCase();return Object.keys(r.b).forEach(e=>{-1<s.indexOf(r.b[e])&&(t=r.b[e])}),1<i.length&&(e=parseFloat(`${i[1]||0}.${i[2]||0}`)),{os:t,osVersion:e}}get device(){return this.Jn.browser.device}get browser(){return this.Zn}get os(){return this.ir}get geoLocation(){return this.Jn.geoLocation}get pageUrl(){return this.Jn.pageUrl||""}get pageUrlTrunc(){return this.sr}get pageDomain(){return this.nr}get isMobile(){return this.Yn}get isInApp(){return Object(a.h)(this.Jn.bundleID)}get isInAppAndroid(){return this.isInApp&&this.os.os===r.b.Android}get playerId(){return this.Jn.playerId}get appId(){return this.Kn}get bundleID(){return this.Jn.bundleID}get iOSAppID(){return this.Jn.appID}get domainURL(){return this.Jn.domainURL}get storeURL(){return this.Jn.storeURL}get explorationMode(){return this.Jn.explorationMode}get appName(){return this.Jn.appName}get appCategories(){return this.Jn.appCategories}get appVersion(){return this.Jn.appVersion}get appPrivacyPolicy(){return this.Jn.appPrivacyPolicy}get appIsPaid(){return this.Jn.appIsPaid}get deviceId(){return this.Jn.deviceId}get topWindow(){return this.Xn}get isRecyclerViewIntegration(){return this.Jn.isRecyclerViewIntegration}get appPageURL(){return this.Jn.appPageURL}}},function(e,t,i){"use strict";i.d(t,"a",function(){return s});class s{setNewMedia(){}updateMediaMetadata(){}setMediaStart(){}setContentStart(){}setSessionPlayback(){}setSessionViewability(){}trackSessionRendered(){}trackSessionViewability(){}trackMediaQuartile(){}trackMediaClick(){}setAdStart(){}startBidRequests(){}addPrebid(){}addPostBid(){}addBid(){}trackAuctionInfoForBid(){}trackVideoAdImpression(){}trackVideoAdImpressionViewable(){}trackVideoAdQuartile(){}trackAdClick(){}trackAdOpportunity(){}trackSessionAdBlocker(){}getMetadataModel(){}updateMetadataModel(){}setIsConsentPayload(){}destroy(){}publish(){}setImplementationTypeOnMeta(){}addPlatformCappedLineItemSubscriber(){}removePlatformCappedLineItemSubscriber(){}setImpressionRevenueSubscriber(){}unsubscribeToImpressionRevenue(){}trackHeavyAdIntervention(){}}},function(e,t,i){"use strict";i.d(t,"a",function(){return a});var s=i(7),r=i(5),n=i(0),o=i(11);class a{constructor(e){this.RELOAD_TIME=o.a,this.RELOAD_COOKIES="cnx_player_reload",this.SESSION_IN_VIEW_FLAG="_sessionWasViewed",this.rr={},this.hr={},this.ar={},this.Xn=Object(s.f)(window).topFrame,this.or(e);try{this.cr()}catch(e){Object(r.a)({message:"PlayerReloader_cookie_fetch_failed",level:n.ProtoLoggingLevelEnum.WARNING,exception:e})}}wasPlayerReloaded(e){return!!this.rr[e]}addPlayerSession(e,t){this.hr[e]=t}getCookiePlayersSession(){return this.rr}addSessionInView(e){this.hr[e]+=this.SESSION_IN_VIEW_FLAG}getSessionInView(e){return this.ar[e]}or(e){setTimeout(()=>{this.ur(),this.Xn.location.reload()},e||this.RELOAD_TIME)}cr(){decodeURIComponent(this.Xn.document.cookie).split(";").forEach(e=>{const t=e.split("=");-1<t[0].indexOf(this.RELOAD_COOKIES)&&(this.rr=JSON.parse(t[1]))}),this.lr(),this.dr()}lr(){Object.keys(this.rr).forEach(e=>{var t=this.rr[e].indexOf(this.SESSION_IN_VIEW_FLAG);-1<t&&(this.rr[e]=this.rr[e].substr(0,t),this.ar[e]=!0)})}dr(){this.Xn.document.cookie=`${this.RELOAD_COOKIES}=; expires = Thu, 01 Jan 1970 00:00:00 GMT; path=/`}ur(){Object.keys(this.ar).forEach(e=>{-1===this.hr[e].indexOf(this.SESSION_IN_VIEW_FLAG)&&this.addSessionInView(e)});const e=new Date;var t=e.getTime();t+=o.g*o.f,e.setTime(t),this.Xn.document.cookie=`${this.RELOAD_COOKIES}=${JSON.stringify(this.hr)}; expires=${e.toUTCString()}; path=/`}}},function(e,t,i){"use strict";i.d(t,"a",function(){return h});var r=i(7),n=i(2),s=i(13),o=i(6),a=i(5),l=i(0),c=i(15),d=i(1);class h{constructor(e){this.createElement=(e,t=this.de)=>t.document.createElement(e),this.de=e,this.addPreconnect()}initHls(e){return e.cnxRenderWindow=this.de,new c(e)}addCssString(e,t=""){return Object(n.b)(e,t,this.de)}addPreconnect(){Object(n.c)(s.a.endPoints.base.video,this.de),Object(n.c)(s.a.endPoints.base.core,this.de),Object(n.c)(s.a.endPoints.base.image,this.de)}getLineHeightPropertyValue(e){return Object(n.l)(e,this.de).getPropertyValue("line-height")}getFontSizePropertyValue(e){return Object(n.l)(e,this.de).getPropertyValue("font-size")}getFontWeightPropertyValue(e){return Object(n.l)(e,this.de).getPropertyValue("font-weight")}getTransformPropertyValue(e){return Object(n.l)(e,this.de).getPropertyValue("transform")}getPaddingTopPropertyValue(e){return Object(n.l)(e,this.de).getPropertyValue("padding-top")}getPaddingBottomPropertyValue(e){return Object(n.l)(e,this.de).getPropertyValue("padding-bottom")}getMarginTopPropertyValue(e){return Object(n.l)(e,this.de).getPropertyValue("margin-top")}getMarginBottomPropertyValue(e){return Object(n.l)(e,this.de).getPropertyValue("margin-bottom")}getMarginLeftPropertyValue(e){return Object(n.l)(e,this.de).getPropertyValue("margin-left")}getMarginRightPropertyValue(e){return Object(n.l)(e,this.de).getPropertyValue("margin-right")}createElementByString(e,t=this.de){return Object(n.f)(e,t)}createDocumentFragment(e=this.de){return e.document.createDocumentFragment()}isHttpsProtocolUsed(){return Object(n.F)(this.de)}isURLSameDomainToTop(e){return Object(n.G)(e,this.de)}isDetachedFromDOM(e){let t=e;for(;t.parentNode;)if((t=t.parentNode)===this.de.document.body)return!1;return!0}querySelector(e,t=this.de){let i;try{i=t.document.querySelector(e)}catch(e){}return i}addCssStylesheetToHead(e,t,i){const s=this.de.document;s.getElementById(e.id)?Object(d.b)(t)&&t():Object(n.B)(e,s.head,this.de,t,i)}getFullscreenKeys(e){return Object(n.o)(e||this.de.document)}exitFullscreen(e,t){(t||this.de.document)[e]()}getDocumentProperty(e){return this.de.document[e]}addEventListenerOnGlobal(e,t,i,s=!1){(i?this.de.document:this.de).addEventListener(e,t,s)}removeEventListenerOnGlobal(e,t,i,s=!1){(i?this.de.document:this.de).removeEventListener(e,t,s)}trackWithImages(e,t){Object(r.m)(e,this.de,t)}getElementCoordinates(e){var{top:t,left:i}=e.getBoundingClientRect(),{width:s,height:r}=e.getBoundingClientRect(),e=this.de.pageYOffset;return{clientX:i+=this.de.pageXOffset,clientY:t+=e,width:s,height:r}}requestAnimationFrameHelper(e){return Object(n.P)(this.de,e)}cancelRequestAnimationFrame(e){return Object(n.e)(this.de,e)}getGlobalLocationProperties(){var e=this.de.location;return{hostname:e.hostname,pathname:e.pathname,href:e.href,protocol:e.protocol,host:e.host,port:e.port,search:e.search,hash:e.hash}}open(e,t){this.de.open(e,t)}getComputedTranslateX(e){let t=0;const i=Object(n.l)(e,this.de).getPropertyValue("transform").match(/^matrix\((.+)\)$/);return Object(o.h)(i)&&(t=parseFloat(i[1].split(", ")[4])),t}getBodyDimensions(){try{var e=Object(r.f)(this.de).topFrame.document.body,{offsetWidth:t,offsetHeight:i}=e,s=Object(n.l)(e,this.de);return{width:t+=parseInt(s.marginLeft,10)+parseInt(s.marginRight,10),height:i+=parseInt(s.marginTop,10)+parseInt(s.marginBottom,10)}}catch(e){return Object(a.a)({message:"DomUtils_error_getting_body_dimensions",exception:e.message,callStack:e.stack,level:l.ProtoLoggingLevelEnum.FATAL}),{width:0,height:0}}}getViewportWidth(){return Object(r.f)(this.de).topFrame.innerWidth}getViewportHeight(){return Object(r.f)(this.de).topFrame.innerHeight}getGlobalClosestTop(){return Object(r.f)(this.de)}stripHtmlTags(e){return Object(n.T)(e,this.de)}getComputedStyle(e,t){return Object(n.l)(e,this.de,t)}getElementById(e){return Object(n.m)(e,this.de)}getElementsByClassName(e){return Object(n.n)(e,this.de)}insertScript(e,t,i){this.de.document.getElementById(e.id)?Object(d.b)(t)&&t():Object(n.A)(e,this.de.document.head,this.de,t,null,!0,i)}destroy(){}}},function(e,t){e.exports='<cnx class="cnx-tooltip-holder cnx-color-tt-bg"> <cnx class="cnx-tooltip-text cnx-color-tt-text">TEST</cnx> </cnx> '},function(e,t){e.exports='<cnx class="cnx-up-next-container cnx-hide-on-single-video"> <cnx class=cnx-up-next-box> <cnx class=cnx-up-next-box-image> <img/> </cnx> <cnx class=cnx-up-next-box-gradient></cnx> <cnx class=cnx-up-next-box-text></cnx> <cnx class=cnx-up-next-box-button> <cnx class=cnx-up-next-box-button-text>NEXT</cnx> </cnx> </cnx> </cnx> '},function(e,t){e.exports='<cnx class="cnx-ui-cm cnx-ui-cm-context"> <cnx class=cnx-cm-container></cnx> </cnx> '},function(e,t){e.exports='<cnx class="cnx-ui-cm cnx-ui-cm-settings"> <cnx class=cnx-cm-container></cnx> </cnx> '},function(e,t){e.exports="<cnx class=cnx-captions> <cnx class=cnx-captions-container> <cnx-span class=cnx-captions-text-holder></cnx-span> </cnx> </cnx> "},function(e,t){e.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 4v16l16-8z" fill-rule="evenodd"></path></svg>'},function(e,t){e.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 21H3V3h6v18zm12 0h-6V3h6v18z" fill-rule="evenodd"></path></svg>'},function(e,t){e.exports='<cnx class=cnx-progress-bar> <cnx class=cnx-progress-rail-container> <cnx class=cnx-progress-rail></cnx> <cnx class="cnx-progress-fill cnx-color-icon"></cnx> </cnx> <cnx class="cnx-progress-handle cnx-color-icon"></cnx> </cnx> '},function(e,t){e.exports='<cnx class="cnx-icon-button cnx-ui-btn-hoverable"> <cnx class=cnx-btn-container> <cnx class=cnx-expand-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d="M4.6 3H10v2H5v5H3V4.6A1.58 1.58 0 0 1 4.6 3zM5 14v5h5v2H4.6A1.58 1.58 0 0 1 3 19.4V14h2zM19.4 3A1.58 1.58 0 0 1 21 4.6V10h-2V5h-5V3h5.4zM19 14h2v5.4a1.58 1.58 0 0 1-1.6 1.6H14v-2h5v-5z" fill-rule=evenodd /></svg> </cnx> <cnx class=cnx-collapse-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" fill-rule=evenodd><path d="M16.6 15a1.58 1.58 0 0 0-1.6 1.6V22h2v-5h5v-2h-5.4zM17 2h-2v5.4A1.58 1.58 0 0 0 16.6 9H22V7h-5V2zM7.4 15A1.58 1.58 0 0 1 9 16.6V22H7v-5H2v-2h5.4zM7 2h2v5.4A1.58 1.58 0 0 1 7.4 9H2V7h5V2z"/></svg> </cnx> </cnx> </cnx> '},function(e,t){e.exports='<cnx class="cnx-ui-cm cnx-ui-cm-quality"> <cnx class=cnx-cm-container></cnx> </cnx> '},function(e,t){e.exports='<svg viewBox="0 0 22 22" class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M18 5.4L16.6 4 11 9.6 5.4 4 4 5.4 9.6 11 4 16.6 5.4 18l5.6-5.6 5.6 5.6 1.4-1.4-5.6-5.6z"></path></svg>'},function(e,t){e.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 22 22"><path d="M11 7c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"></path></svg>'},function(e,t){e.exports='<cnx class="cnx-ad-skip-button cnx-ui-btn"> <cnx class=cnx-icon-button> <cnx class=cnx-skip-ad-text> Skip <cnx-span></cnx-span> </cnx> <cnx class=cnx-skip-ad-icon> <svg markup-inline viewBox="0 0 24 24" class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d="M18 21h3V3h-3v18zM3 21l14-9L3 3v18z" fill-rule=evenodd /></svg> </cnx> </cnx> <cnx class=cnx-timer-loader> <svg markup-inline xmlns=http://www.w3.org/2000/svg width=36 height=36 viewBox="0 0 36 36"><circle class=cnx-svg-circle-stroke cx=18 cy=18 r=17 /></svg> </cnx> </cnx> '},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="2 2 20 20"><path d="M14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3m-2 16H5V5h7V3H5a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7h-2v7z"></path></svg>'},function(e,t){e.exports='<cnx class=cnx-pod-loading-screen-container> <img alt="Loading Pods" class=cnx-pod-loading-background /> <cnx class=cnx-pod-loading-info> <cnx class=cnx-pod-open-new-icon> </cnx> <cnx class=cnx-pod-visit-website-text> <cnx-span>Visit Advertiser website</cnx-span> </cnx> <cnx class=cnx-pod-read-more-container> <cnx-span class=cnx-pod-read-more-btn>GO TO PAGE</cnx-span> </cnx> </cnx> <cnx class=cnx-pod-loading-fallback> <cnx class=cnx-pod-loading-spinner></cnx> <cnx-span class=cnx-pod-slot-count-text></cnx-span> </cnx> </cnx>'},function(e,t){e.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 3H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm0-4v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11z" fill-rule="evenodd"></path></svg>'},function(e,t){e.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.9 12.7c.05-.23.1-.46.1-.7s-.04-.47-.1-.7l7.05-4.1c.54.5 1.25.8 2.04.8 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.1.7L8.04 9.8C7.5 9.3 6.8 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.8 0 1.5-.3 2.04-.8l7.12 4.16a2.82 2.82 0 0 0-.08.65c0 1.6 1.3 2.92 2.92 2.92s2.92-1.3 2.92-2.92-1.3-2.92-2.92-2.92z" fill-rule="evenodd"></path></svg>'},function(e,t){e.exports='<cnx class=cnx-icon-button> <cnx class=cnx-btn-container> <cnx class=cnx-unmute-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d="M0 7.913v7.913h4.946l5.935 5.045V1.978L4.946 7.913zm16.815 3.957c.03-2.078-1.12-3.994-2.967-4.946v9.9c1.847-.952 2.997-2.867 2.967-4.945zM13.848 0v2.077a10.39 10.39 0 0 1 0 19.585v2.077a12.05 12.05 0 0 0 8.9-11.87A12.05 12.05 0 0 0 13.848 0z"/></svg> </cnx> <cnx class=cnx-mute-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d="M11 2L8.25 4.25 11 7zM0 7v9h5l6 5v-6.5L3.85 7zm17 4.5c0-1.965-1.2-3.735-3-4.5v3l2.8 2.8a3.73 3.73 0 0 0 .2-1.3zm3.4 7.45l-1.85-1.85-2.65-2.6-1.9-1.95-3-3-4.15-4.1-4.95-5L1.45 0 0 1.45 17.15 18.6 19 20.4l3.55 3.6L24 22.55zM14 23a11.83 11.83 0 0 0 3.65-1.55l-1.25-1.3c-.747.498-1.553.902-2.4 1.2V23zm9-11.5A11.77 11.77 0 0 0 14 0v1.6A10.53 10.53 0 0 1 20 16l1.45 1.45A11.99 11.99 0 0 0 23 11.5z"/></svg> </cnx> </cnx> </cnx> '},function(e,t){e.exports='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="nonzero"><path d="M22 15.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13z" fill="#FFF"></path><path d="M22 18a4 4 0 110 8 4 4 0 010-8z" fill="#FF4047"></path><path d="M37.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L31 29.206c3.515-3.989 3.583-10.465.203-14.55L31 14.42l1.876-1.653z" fill="#FFF"></path><path d="M6.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L0 29.206c3.515-3.989 3.583-10.465.203-14.55L0 14.42l1.876-1.653z" fill="#FFF" transform="matrix(-1 0 0 1 12.626 0)"></path></g></svg>'},function(e,t){e.exports='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><g fill="#FFF" fill-rule="evenodd"><rect class="cnx-live-icon-svg-rectangle" transform="rotate(90 22.06 21.43)" x="20.059" y="15.929"></rect><path d="M37.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L31 29.206c3.515-3.989 3.583-10.465.203-14.55L31 14.42l1.876-1.653z" fill-rule="nonzero" opacity=".5"></path><path d="M6.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L0 29.206c3.515-3.989 3.583-10.465.203-14.55L0 14.42l1.876-1.653z" fill-rule="nonzero" opacity=".5" transform="matrix(-1 0 0 1 12.626 0)"></path></g></svg>'},function(e,t){e.exports='<cnx class="cnx-live-poster cnx-mod-active"> <cnx class=cnx-live-broadcast> <cnx class=cnx-live-icon> <svg class=cnx-live-icon-starting markup-inline viewBox="0 0 44 44" xmlns=http://www.w3.org/2000/svg><g fill=none fill-rule=nonzero><path d="M22 15.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13z" fill=#FFF /><path d="M22 18a4 4 0 110 8 4 4 0 010-8z" fill=#FF4047 /><path d="M37.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L31 29.206c3.515-3.989 3.583-10.465.203-14.55L31 14.42l1.876-1.653z" fill=#FFF /><path d="M6.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L0 29.206c3.515-3.989 3.583-10.465.203-14.55L0 14.42l1.876-1.653z" fill=#FFF transform="matrix(-1 0 0 1 12.626 0)"/></g></svg> <svg class=cnx-live-icon-ended markup-inline viewBox="0 0 44 44" xmlns=http://www.w3.org/2000/svg><g fill=#FFF fill-rule=evenodd><rect class=cnx-live-icon-svg-rectangle transform="rotate(90 22.06 21.43)" x=20.059 y=15.929 /><path d="M37.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L31 29.206c3.515-3.989 3.583-10.465.203-14.55L31 14.42l1.876-1.653z" fill-rule=nonzero opacity=.5 /><path d="M6.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L0 29.206c3.515-3.989 3.583-10.465.203-14.55L0 14.42l1.876-1.653z" fill-rule=nonzero opacity=.5 transform="matrix(-1 0 0 1 12.626 0)"/></g></svg> </cnx> <cnx class=cnx-live-message> <cnx-span></cnx-span> </cnx> </cnx> </cnx> '},function(e,t){e.exports='<cnx class="cnx-ui-live-badge-wrapper cnx-d-md-none"> <cnx class=cnx-ui-live-badge> <svg markup-inline xmlns=http://www.w3.org/2000/svg viewBox="0 0 37 9" fill-rule=nonzero><path d="M15.223 9V7.816H11.35V.47H9.868V9h5.356zm3.7 0V.47h-1.477V9h1.477zm6.555 0L28.55.47h-1.63l-2.168 6.674L22.608.47h-1.623L24.043 9h1.436zm10.6 0V7.816h-4.096V5.2h3.504V4.02h-3.504V1.664h4.055V.47H30.5V9h5.578zM3 2a3 3 0 1 0 0 6 3 3 0 1 0 0-6z" fill=#fff /><path d="M3 3a2 2 0 1 1 0 4 2 2 0 1 1 0-4z" fill=#ff4047 /></svg> </cnx> </cnx> '},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 22"><path d="M26,22H0V0H31.93L32,16A6,6,0,0,1,26,22Z" style="fill:#ffc800;fill-rule:evenodd"></path><path d="M12,5.29h0L16.45,16.7H14.83l-1.06-2.85H8.86l-1,2.85H6.21L10.6,5.31h0Zm5.89,11.42V5.29h3.63A5.52,5.52,0,0,1,26.65,11a5.33,5.33,0,0,1-4.93,5.7H17.89Zm1.46-1.36h2.17c1.77,0,3.7-1.49,3.7-4.35s-1.93-4.28-3.7-4.28H19.35Zm-8-8.16-2,5.24h3.86Z" style="fill-rule:evenodd"></path></svg>'},function(e,t){e.exports='<cnx class=cnx-progress-bar> <cnx class=cnx-progress-rail-container> <cnx class=cnx-progress-rail></cnx> <cnx class="cnx-progress-fill cnx-color-accent"></cnx> <cnx class=cnx-progress-follow></cnx> </cnx> <cnx class=cnx-progress-hitarea></cnx> </cnx> '},function(e,t){e.exports="<cnx class=cnx-slides-progress-bar> </cnx> "},function(e,t){e.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill-rule="evenodd"><path d="M16.6 15a1.58 1.58 0 0 0-1.6 1.6V22h2v-5h5v-2h-5.4zM17 2h-2v5.4A1.58 1.58 0 0 0 16.6 9H22V7h-5V2zM7.4 15A1.58 1.58 0 0 1 9 16.6V22H7v-5H2v-2h5.4zM7 2h2v5.4A1.58 1.58 0 0 1 7.4 9H2V7h5V2z"></path></svg>'},function(e,t){e.exports='<cnx class="cnx-ui-cm cnx-ui-cm-settings"> <cnx class=cnx-cm-container></cnx> </cnx> '},function(e,t){e.exports='<cnx class="cnx-icon-button cnx-ui-btn-hoverable"> <cnx class=cnx-btn-container> <cnx class=cnx-unmute-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d="M0 7.913v7.913h4.946l5.935 5.045V1.978L4.946 7.913zm16.815 3.957c.03-2.078-1.12-3.994-2.967-4.946v9.9c1.847-.952 2.997-2.867 2.967-4.945zM13.848 0v2.077a10.39 10.39 0 0 1 0 19.585v2.077a12.05 12.05 0 0 0 8.9-11.87A12.05 12.05 0 0 0 13.848 0z"/></svg> </cnx> <cnx class=cnx-mute-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d="M11 2L8.25 4.25 11 7zM0 7v9h5l6 5v-6.5L3.85 7zm17 4.5c0-1.965-1.2-3.735-3-4.5v3l2.8 2.8a3.73 3.73 0 0 0 .2-1.3zm3.4 7.45l-1.85-1.85-2.65-2.6-1.9-1.95-3-3-4.15-4.1-4.95-5L1.45 0 0 1.45 17.15 18.6 19 20.4l3.55 3.6L24 22.55zM14 23a11.83 11.83 0 0 0 3.65-1.55l-1.25-1.3c-.747.498-1.553.902-2.4 1.2V23zm9-11.5A11.77 11.77 0 0 0 14 0v1.6A10.53 10.53 0 0 1 20 16l1.45 1.45A11.99 11.99 0 0 0 23 11.5z"/></svg> </cnx> </cnx> </cnx> '},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M14.2,0A5.8,5.8,0,0,1,20,5.8v8.4A5.8,5.8,0,0,1,14.2,20H5.8A5.8,5.8,0,0,1,0,14.2V5.8A5.8,5.8,0,0,1,5.8,0ZM2,5.6v8.8A3.59,3.59,0,0,0,5.6,18h8.8A3.59,3.59,0,0,0,18,14.4V5.6A3.59,3.59,0,0,0,14.4,2H5.6A3.59,3.59,0,0,0,2,5.6Zm14.5-.8a1.3,1.3,0,1,1-1.3-1.3A1.32,1.32,0,0,1,16.5,4.8ZM15,10a5,5,0,1,1-5-5A5,5,0,0,1,15,10ZM10,7a3,3,0,0,0-3,3,3,3,0,0,0,3,3,3,3,0,0,0,3-3A3,3,0,0,0,10,7Z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 12"><polygon points="0 5 16.17 5 12.59 1.41 14 0 20 6 14 12 12.59 10.59 16.17 7 0 7 0 5"></polygon></svg>'},function(e,t){e.exports='<cnx class=cnx-ui-click-to-play-btn> <cnx class=cnx-ui-click-to-play-btn-content> <svg markup-inline class="cnx-click-to-play-btn-icon cnx-color-accent" class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><polygon points="5 1 5 23 23 11.9165764"></polygon></svg> <cnx class=cnx-onion-ring></cnx> <cnx-span class=cnx-click-to-play-btn-text>PLAY</cnx-span> </cnx> </cnx> '},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 11"><path d="M5.55,9.4h0C2.85,6.8,1.15,5,1.15,3.3a2,2,0,0,1,1.9-2.1,2.28,2.28,0,0,1,2,1.4h1a2.17,2.17,0,0,1,2-1.4A2,2,0,0,1,10,3.3c0,1.7-1.8,3.4-4.4,6.1ZM8,0a3.34,3.34,0,0,0-2.5,1.2A3.13,3.13,0,0,0,3.05,0a3.09,3.09,0,0,0-3,3.3c0,2.3,1.9,4.1,4.7,6.9l.8.8.8-.8c2.8-2.8,4.7-4.7,4.7-6.9A3.16,3.16,0,0,0,8,0Z" style="fill:#a0a0a0;opacity:0.8598999977111816"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 11"><path style="opacity:0.8598999977111816;fill:#a0a0a0" d="M3.85,11a.58.58,0,0,1-.6-.6V8.8H1.05A1.11,1.11,0,0,1,0,7.7V1.1A1.11,1.11,0,0,1,1.05,0h8.8A1.11,1.11,0,0,1,11,1.1V7.7a1.11,1.11,0,0,1-1.1,1.1H6.45l-2,2a.52.52,0,0,1-.4.2h-.2m.6-3.3V9.4l1.7-1.7H10V1.1H1.15V7.7h3.3M2.25,2.8h6.6V3.9H2.25V2.8m0,2.1h4.9V6H2.25Z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12"><path style="opacity:0.8598999977111816;fill:#a0a0a0" d="M6.05,11a5,5,0,0,0,5-5,5,5,0,0,0-5-5,5,5,0,0,0-5,5,5,5,0,0,0,5,5m0-11a5.6,5.6,0,0,1,4.2,1.8A6.37,6.37,0,0,1,12.05,6a6,6,0,0,1-12,0,6,6,0,0,1,6-6m0,3V5.9l3,1.5-.5.6L5.05,6.3V3Z"></path></svg>'},function(e,t){e.exports=" <cnx class=cnx-button-text-label>1 min. story</cnx> "},function(e,t){e.exports='<cnx class="cnx-ui-ps-image-container cnx-ui-ps-image-background"> </cnx>'},function(e,t){e.exports="<cnx class=cnx-ui-ps-video-container></cnx> "},function(e,t,i){"use strict";var o,s,r=i(5),n=i(0),a=i(2),l=[],c="ResizeObserver loop completed with undelivered notifications.";(s=o=o||{}).BORDER_BOX="border-box",s.CONTENT_BOX="content-box",s.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box";function g(e){if(I(e)){var t=e.getBBox(),i=t.width,t=t.height;return!i&&!t}return i=e.offsetWidth,t=e.offsetHeight,!(i||t||e.getClientRects().length)}function d(e){var t=null===(t=null===e||void 0===e?void 0:e.ownerDocument)||void 0===t?void 0:t.defaultView;return!!(t&&e instanceof t.Element)}function m(e){return parseFloat(e||"0")}function f(e,t,i){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=!1),Object.freeze({inlineSize:(i?t:e)||0,blockSize:(i?e:t)||0})}function h(e,t){if(void 0===t&&(t=!1),A.has(e)&&!t)return A.get(e);if(g(e))return A.set(e,w),w;var i=getComputedStyle(e),s=I(e)&&e.ownerSVGElement&&e.getBBox(),r=!C&&"border-box"===i.boxSizing,n=k.test(i.writingMode||""),o=!s&&O.test(i.overflowY||""),a=!s&&O.test(i.overflowX||""),l=s?0:m(i.paddingTop),c=s?0:m(i.paddingRight),d=s?0:m(i.paddingBottom),h=s?0:m(i.paddingLeft),u=s?0:m(i.borderTopWidth),p=s?0:m(i.borderRightWidth),t=s?0:m(i.borderBottomWidth),c=h+c,d=l+d,p=(s?0:m(i.borderLeftWidth))+p,u=u+t,t=a?e.offsetHeight-u-e.clientHeight:0,a=o?e.offsetWidth-p-e.clientWidth:0,o=r?c+p:0,r=r?d+u:0,o=s?s.width:m(i.width)-o-a,r=s?s.height:m(i.height)-r-t,p=o+c+a+p,u=r+d+t+u,r=Object.freeze({devicePixelContentBoxSize:f(Math.round(o*devicePixelRatio),Math.round(r*devicePixelRatio),n),borderBoxSize:f(p,u,n),contentBoxSize:f(o,r,n),contentRect:new S(h,l,o,r)});return A.set(e,r),r}function u(e,t,i){var s=(i=h(e,i)).borderBoxSize,r=i.contentBoxSize,n=i.devicePixelContentBoxSize;switch(t){case o.DEVICE_PIXEL_CONTENT_BOX:return n;case o.BORDER_BOX:return s;default:return r}}function p(e){if(g(e))return 1/0;for(var t=0,i=e.parentNode;i;)t+=1,i=i.parentNode;return t}function y(e){return void 0===e&&(e=0),Date.now()+e}function b(e){!R&&0<e&&_.start(),(R+=e)||_.stop()}function v(e,t){for(var i=0;i<e.length;i+=1)if(e[i].target===t)return i;return-1}var P,S=(z.prototype.toJSON=function(){return{x:this.x,y:this.y,top:this.top,right:this.right,bottom:this.bottom,left:this.left,width:this.width,height:this.height}},z.fromRect=function(e){return new z(e.x,e.y,e.width,e.height)},z),I=function(e){return e instanceof SVGElement&&"getBBox"in e},T="undefined"!=typeof window?window:{},A=new WeakMap,O=/auto|scroll/,k=/^tb|vertical/,C=/msie|trident/i.test(T.navigator&&T.navigator.userAgent),w=Object.freeze({devicePixelContentBoxSize:f(),borderBoxSize:f(),contentBoxSize:f(),contentRect:new S(0,0,0,0)}),x=function(e){var t=h(e);this.target=e,this.contentRect=t.contentRect,this.borderBoxSize=[t.borderBoxSize],this.contentBoxSize=[t.contentBoxSize],this.devicePixelContentBoxSize=[t.devicePixelContentBoxSize]},E=function(){var r=1/0,t=[];l.forEach(function(e){var s;0!==e.activeTargets.length&&(s=[],e.activeTargets.forEach(function(e){var t=new x(e.target),i=p(e.target);s.push(t),e.lastReportedSize=u(e.target,e.observedBox),i<r&&(r=i)}),t.push(function(){e.callback.call(e.observer,s,e.observer)}),e.activeTargets.splice(0,e.activeTargets.length))});for(var e=0,i=t;e<i.length;e++)(0,i[e])();return r},L=function(i){l.forEach(function(t){t.activeTargets.splice(0,t.activeTargets.length),t.skippedTargets.splice(0,t.skippedTargets.length),t.observationTargets.forEach(function(e){e.isActive()&&(p(e.target)>i?t.activeTargets:t.skippedTargets).push(e)})})},M=[],R=0,B={attributes:!0,characterData:!0,childList:!0,subtree:!0},j=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],D=!1,_=(G.prototype.run=function(t){var i,e,s,r,n,o=this;void 0===t&&(t=250),D||(D=!0,i=y(t),e=function(){var e=!1;try{e=function(){var e,t=0;for(L(t);l.some(function(e){return 0<e.activeTargets.length});)t=E(),L(t);return l.some(function(e){return 0<e.skippedTargets.length})&&("function"==typeof ErrorEvent?e=new ErrorEvent("error",{message:c}):((e=document.createEvent("Event")).initEvent("error",!1,!1),e.message=c),window.dispatchEvent(e)),0<t}()}finally{if(D=!1,t=i-y(),!R)return;e?o.run(1e3):0<t?o.run(t):o.start()}},s=function(){requestAnimationFrame(e)},P||(r=0,n=document.createTextNode(""),new MutationObserver(function(){return M.splice(0).forEach(function(e){return e()})}).observe(n,{characterData:!0}),P=function(){n.textContent=""+(r?r--:r++)}),M.push(s),P())},G.prototype.schedule=function(){this.stop(),this.run()},G.prototype.observe=function(){function e(){return t.observer&&t.observer.observe(document.body,B)}var t=this;document.body?e():T.addEventListener("DOMContentLoaded",e)},G.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),j.forEach(function(e){return T.addEventListener(e,t.listener,!0)}))},G.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),j.forEach(function(e){return T.removeEventListener(e,t.listener,!0)}),this.stopped=!0)},new G),F=($.prototype.isActive=function(){var e=u(this.target,this.observedBox,!0),t=this.target;return I(t)||function(e){switch(e.tagName){case"INPUT":if("image"!==e.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return 1}}(t)||"inline"!==getComputedStyle(t).display||(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},$),U=function(e,t){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=t},N=new WeakMap,V=(W.connect=function(e,t){t=new U(e,t);N.set(e,t)},W.observe=function(e,t,i){var s=N.get(e),e=0===s.observationTargets.length;v(s.observationTargets,t)<0&&(e&&l.push(s),s.observationTargets.push(new F(t,i&&i.box)),b(1),_.schedule())},W.unobserve=function(e,t){var i=N.get(e),e=v(i.observationTargets,t),t=1===i.observationTargets.length;0<=e&&(t&&l.splice(l.indexOf(i),1),i.observationTargets.splice(e,1),b(-1))},W.disconnect=function(t){var i=this,e=N.get(t);e.observationTargets.slice().forEach(function(e){return i.unobserve(t,e.target)}),e.activeTargets.splice(0,e.activeTargets.length)},W),H=(q.prototype.observe=function(e,t){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!d(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");V.observe(this,e,t)},q.prototype.unobserve=function(e){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!d(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");V.unobserve(this,e)},q.prototype.disconnect=function(){V.disconnect(this)},q.toString=function(){return"function ResizeObserver () { [polyfill code] }"},q);function q(e){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof e)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");V.connect(this,e)}function W(){}function $(e,t){this.target=e,this.observedBox=t||o.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}function G(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}function z(e,t,i,s){return this.x=e,this.y=t,this.width=i,this.height=s,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Object.freeze(this)}i.d(t,"a",function(){return J});class J{constructor(e){this.pr=[],this.br=(e,t)=>{e.forEach(e=>{this.vr(e.target).forEach(e=>{e&&(Object(a.i)(e.element),e.callback(e.element))})})};try{const t=e.ResizeObserver||H;this.mr=new t(this.br)}catch(e){Object(r.a)({message:"ResizeObserver_constructor",callStack:e.stack,exception:e.message,level:n.ProtoLoggingLevelEnum.FATAL})}}on(e,t){this.gr(e,t)||(this.pr.push({element:e,callback:t}),this.mr.observe(e))}off(e,t){t=this.gr(e,t);t&&(this.mr.unobserve(t.element),0<=(t=this.pr.indexOf(t))&&this.pr.splice(t,1))}destroy(){if(this.pr)for(;0<this.pr.length;)this.pr.pop();this.mr.disconnect()}vr(t){return this.pr.filter(e=>e.element===t)}gr(t,i){return this.pr.find(e=>e.element===t&&e.callback===i)}}},function(e,t,i){"use strict";var s,n,r=i(27),o=i(12),a=i(52);(c=s=s||{}).Minimized="minimized",c.Collapsed="collapsed",c.Normal="normal",c.Expanded="expanded",c.Fullscreen="fullscreen",(n=n||{}).StateChanged="stateChanged";class l{constructor(e){this.mediator=e}computeState(e){var t=this.yr(e);this.wr&&this.wr.name===t||this.mediator.publish(this,n.StateChanged,{payload:{state:t}}),this.wr={dimensions:e,name:t},this.xr||t!==s.Normal||(this.xr=Object.assign({},this.wr))}setPlayerState(e){this.wr&&this.wr.name===e||this.mediator.publish(this,n.StateChanged,{payload:{state:e}}),this.wr={name:e},this.xr||e!==s.Normal||(this.xr=Object.assign({},this.wr))}get currentState(){return this.wr&&this.wr.name}yr(e){if(!this.xr)return s.Normal;var{width:t,height:i}=this.xr.dimensions,i=t*i,e=e.width*e.height;switch(!0){case i<e:return s.Expanded;case e<i:return s.Collapsed;default:return s.Normal}}}var c=i(19),d=i(5),h=i(0);i.d(t,"a",function(){return u});class u extends c.a{constructor(e,t,i){super(),this.Sr=e,this.Or=t,this.kr=new l(this),this._r=!1,this.jr={[o.a.AdError]:()=>this.Ar(),[o.a.PlayError]:()=>this.Ir(),[o.a.RenderError]:()=>this.Cr(),[o.a.AdImpression]:()=>this.Tr(),[o.a.AdComplete]:()=>this.Pr(),[o.a.AdVideoStart]:({adVideoStartMetadata:e})=>this.Mr(e),[o.a.AdVideoFirstQuartile]:()=>this.Er(),[o.a.AdVideoMidpoint]:()=>this.Lr(),[o.a.AdVideoThirdQuartile]:()=>this.Rr(),[o.a.AdVideoComplete]:()=>this.Br(),[o.a.VolumeChange]:({volume:e})=>this.Dr(e),[o.a.AdPause]:()=>this.Fr(),[o.a.AdPlay]:()=>this.$r(),[o.a.AdSkipped]:()=>this.Ur(),[o.a.AdClickThru]:()=>this.Vr(),[o.a.AdInteraction]:()=>this.Nr(),[o.a.AdLoaded]:({adLoadedMetadata:e})=>this.Hr(e),[o.a.AdStateChange]:({adStateChangedMetadata:e})=>this.qr(e),[o.a.PlayerResized]:({playerDimensionsMetadata:e})=>this.zr(e),[o.a.OnEnterFullscreen]:()=>this.Wr(),[o.a.PlayerCollapsed]:()=>this.Gr(),[o.a.PlayerExpanded]:()=>this.Jr(),[o.a.Destroy]:()=>this.unsubscribeAll(this.kr)},this.Qr=e=>{try{const t=this.jr[e.name];if(!t)return;t(e.metadata)}catch(e){Object(d.a)({message:"SessionClientWrapper_omsdk__onEventStorageEvent",exception:e.message,callStack:e.callStack,level:h.ProtoLoggingLevelEnum.WARNING})}};try{const{AdSession:e,AdEvents:t,MediaEvents:s}=this.Sr,r=this.Xr(i);this.Yr=new e(r),this.Kr=new t(this.Yr),this.Zr=new s(this.Yr),this.Or.subscribe(this.Qr),this.subscribe(n.StateChanged,this.kr,({payload:{state:e}})=>{this.th(e)}),this.ih()}catch(e){Object(d.a)({message:"SessionClientWrapper_omsdk_classes_init_err",exception:e.message,callStack:e.callStack,level:h.ProtoLoggingLevelEnum.WARNING})}}Ar(){this.Yr.error(r.d.Video,o.a.AdError)}Ir(){this.Yr.error(r.d.Video,o.a.PlayError)}Cr(){this.Yr.error(r.d.Generic,o.a.RenderError)}Xr(e){const{Partner:t,Context:i}=this.Sr;return new i(new t(r.i,e))}Tr(){this._r=!0,this.Kr.impressionOccurred();var e=this.kr.currentState;e!==s.Normal&&this.th(e)}Pr(){this._r=!1}Mr(e){var{duration:t,mediaPlayerVolume:e}=e;this.Zr.start(t,e)}Er(){this.Zr.firstQuartile()}Lr(){this.Zr.midpoint()}Rr(){this.Zr.thirdQuartile()}Br(){this.Zr.complete()}Dr(e){this._r&&this.Zr.volumeChange(e)}Fr(){this.Zr.pause()}$r(){this.Zr.resume()}Ur(){this.Zr.skipped()}Vr(){this.Zr.adUserInteraction(r.g.Click)}Nr(){this.Zr.adUserInteraction(r.g.InvitationAccept)}Hr(e){const{isSkippable:t,skipOffset:i,isAutoPlay:s}=e,r=this.Sr["VastProperties"],n=new r(t,i,s,this.eh);this.Kr.loaded(n)}qr({state:e}){this.eh=r.h[a.a[e]]}th(e){e&&this.Zr.playerStateChange(e)}sh(e){this.kr.computeState(e)}nh(e){this.kr.setPlayerState(e)}zr(e){this.sh(e)}Wr(){this.nh(s.Fullscreen)}Gr(){this.nh(s.Minimized)}Jr(){this.nh(s.Normal)}ih(){this.Yr.registerSessionObserver(e=>{e.type===r.b.SessionStart?this.rh(e):e.type===r.b.SessionError&&Object(d.a)({message:"SessionClientWrapper_omsdk_session_error",exception:e.type,callStack:JSON.stringify(e),level:h.ProtoLoggingLevelEnum.WARNING,throttle:1,sendMaxLog:!1})})}rh(e){e.data.creativeType===r.c.DefinedByJavascript&&this.Yr.setCreativeType(r.c.Video),e.data.impressionType===r.f.DefinedByJavascript&&this.Yr.setImpressionType(r.f.BeginToRender)}}},function(e,t,i){"use strict";var s,r,n=i(2);class o{constructor(e){this.hh=[],this.ah=e=>{this.hh.push(e)},this.oh=e.subscribe(this.ah)}get cachedEvents(){return this.hh}destroy(){this.hh=null,this.oh()}}(r=s=s||{}).AdobeAnalytics="AdobeAnalytics",r.MoatAnalytics="MoatAnalytics";const a={AdobeAnalytics:{id:"cnx-adobe-analytics-plugin",src:"//cds.connatix.com/p/plugins/connatix.external.measurement.js"},MoatAnalytics:{id:"cnx-moat-analytics-plugin",src:"//cds.connatix.com/p/plugins/connatix.moat.plugin.js"}};var l=i(1),c=i(5),d=i(0),h=i(6),u=i(32),p=i(7),g=i(17),m=i(18);i.d(t,"a",function(){return f});class f{constructor(e,t,i,s,r){this.Or=t,this.uh=i,this.lh=s,this.dh=r,this.fh=[],this.ph=t=>{try{this.bh(t);const l=this.fh.find(e=>e.name===t.type);let e;if(l&&!l.started){l.started=!0;const t=l.eventsCacheHandler;e=t.cachedEvents,t.destroy()}var{adobeAnalyticsSettings:i,moatAnalyticsSettings:s,_debugLogging:r}=this.lh.apiConfig.settings.plugins,{secondLevelDomain:n,playerId:o}=this.lh,a={cachedEvents:e,adobeAnalyticsSettings:i,moatAnalyticsSettings:s,_debugLogging:r,secondLevelDomain:n,playerId:o,pageName:this.vh,pageUrl:this.ze,version:m.a.version,delegateHandlers:this.uh,playerContainer:this.dh,playerWindow:window};t.getInstance().start(this.Or,a)}catch(t){Object(c.a)({callStack:t.stack,exception:t.message,level:d.ProtoLoggingLevelEnum.FATAL,message:"PluginsHandler_initPlugin"})}};e=Object(p.f)(e);this.de=e.topFrame,this.ze=Object(p.e)(e,this.de),this.ze=Object(g.d)(this.ze),this.vh=Object(g.a)(this.ze)}start(){this.mh(),this.gh(),this.de.cnxPlugins.pluginsHandlers.push(this.ph)}mh(){let e=[];Array.isArray(this.de.cnxPlugins)&&0<this.de.cnxPlugins.length&&(e=this.de.cnxPlugins).forEach(e=>this.ph(e)),Object(l.f)(this.de.cnxPlugins)||this.yh(e)}gh(){var e=this.wh();Object(h.h)(e)&&this.xh(e)}Sh(t){const e=this.de.cnxPlugins.cachedPlugins;if(Object(h.h)(e))return e.find(e=>e.type===t)}bh(e){this.Sh(e.type)||this.de.cnxPlugins.cachedPlugins.push(e)}yh(e){this.de.cnxPlugins={cachedPlugins:e,pluginsHandlers:[],push:function(t){this.pluginsHandlers.forEach(e=>{e(t)})}}}xh(e){e.forEach(e=>{this.Sh(e)||this.fh.push({name:e,started:!1,eventsCacheHandler:new o(this.Or)})}),this.fh.forEach(({name:e})=>this.Oh(e))}kh(e){return Object(u.a)(e).every(e=>Object(l.h)(e))}wh(){const e=[];return this.lh.apiConfig.settings.plugins.adobeAnalyticsSettings&&this.kh(this.lh.apiConfig.settings.plugins.adobeAnalyticsSettings)&&e.push(s.AdobeAnalytics),this.lh.moatTrackingEnabled&&e.push(s.MoatAnalytics),e}Oh(e){e=a[e];this.de.document.getElementById(e.id)||Object(n.A)(e,this.de.document.head,this.de,null,null,!0,"PluginsHandler_unable_to_insert_plugin_script")}}},function(e,t,i){"use strict";var s,r,n=i(1),o=i(0);(r=s=s||{})[r.Desktop=2]="Desktop",r[r.SmartTV=3]="SmartTV",r[r.Smartphone=4]="Smartphone",r[r.Tablet=5]="Tablet",r[r.GameConsole=6]="GameConsole",r[r.Unrecognized=7]="Unrecognized";const a={[o.ProtoDeviceType.Desktop]:s.Desktop,[o.ProtoDeviceType.Smartphone]:s.Smartphone,[o.ProtoDeviceType.Tablet]:s.Tablet,[o.ProtoDeviceType.GameConsole]:s.GameConsole,[o.ProtoDeviceType.SmartTV]:s.SmartTV,[o.ProtoDeviceType.WearableComputer]:s.Unrecognized,[o.ProtoDeviceType.PDA]:s.Unrecognized,[o.ProtoDeviceType.Unrecognized]:s.Unrecognized},l="cnx_fraud_sensor";i.d(t,"a",function(){return c});class c{constructor(e,t,i,s){this._h=e,this.jh=t,this.bn=i,this.Ah(s)}addFraudSensorScript(){var e;this.jh.getElementById(l)||(e={id:l,src:this._h.setupMacros("https://s.srvsynd.com/2/234175/analytics.js?dt=2341751597675869250012&di=[DOMAIN]&ui=[FS_USER_ID]&md=[FS_MEDIA_TYPE]&ap=[APP_BUNDLE]&sr=[CNX_SUPPLIER_ID]&pp=[PUBLISHER_ID]&ti=[SESSION_ID]&de=[FS_DEVICE_TYPE]&to=[MGTO]&pv=[MGID]")},this.jh.insertScript(e,null,"FraudSensor_script_error"))}Ah(e){e=Object(n.h)(e)?e:"00000000-0000-0000-0000-000000000000";var{lookupId:t,lookupResponseCode:i,publisherAdsTxt:s}=this.bn,r=a[this.bn.deviceType];this._h.setPublisherId(s),this._h.setUserId(e),this._h.setFraudSensorMacros({lookupId:t,lookupResponseCode:i,deviceType:r,mediaType:2})}}},function(e,t,i){"use strict";var n=i(25),o=i(0),m=i(18),s=i(13),r=i(11);class f{constructor(){this.Ih=null,this.Ch=0}Th(){var e;null!==this.Ih&&(e=(new Date).getTime(),this.Ch=e-this.Ih)}startCountingTime(){this.Ih=(new Date).getTime()}stopCountingTime(){this.Th(),this.Ih=null}fetchTime(e){this.Th();var t=Math.round(this.Ch/r.f);return this.Ch=0,null!==this.Ih&&this.startCountingTime(),e<t?e:t}}var a=i(19),l=i(1),y=i(36),c=i(34),b=i(7),v=i(6),d=i(31);i(44),i.d(t,"a",function(){return h});class h extends a.a{constructor({userId:e,playerId:t,geoLocation:i,browser:s,sessionId:r,pageUrl:n,bundleId:o,userManagerService:a,customParam1:l,customParam2:c,customParam3:d,customParam4:h,customParam5:u,abTestId:p,explorationMode:g}){super(),this.hasGdprConsentPayload=!1,this.Mh={},this.Eh={},this.Lh=!1,this.Rh=!1,this.Bh=!1,this.Dh=!1,this.Fh=[],this.$h=[],this.Uh=[],this.Vh=5e3,this.Nh=!1,this.Ph=!1,this.Hh=[{delay:7,timesRepeatDelay:1},{delay:8,timesRepeatDelay:1},{delay:15,timesRepeatDelay:3},{delay:30,timesRepeatDelay:2},{delay:60,timesRepeatDelay:1},{delay:120,timesRepeatDelay:1},{delay:300,timesRepeatDelay:8},{delay:600,timesRepeatDelay:13},{delay:1800}],this.qh=0,this.zh=[],Object(v.g)(t,["47286b3d-90c5-4634-ac87-0061769d15a8","2a9c6007-6213-4187-9b0d-1a6e9d7826f0","dac6e2fc-472a-46e6-8a6b-b5bea57a50bc","112cdb88-91ea-452d-990c-03a7d3118d2c","075127fa-fec9-4ee7-9a4c-bfb4478a4412","2febda63-6ec9-4951-9c07-5939376b8226","55ca7ad7-f311-4854-b29a-a2d590760493","62bbbcda-024e-4769-968a-db84830f65cc","648d8d4d-fa41-496c-8415-26f3ad2d1989","6fdffbf5-b899-44ac-96a6-4eab50497b5b","b6094ff6-54a0-4ddd-b799-66193f8346c7","c81bb1f8-de80-428b-ae42-1ce0e75d3998","ddbadb2c-9e78-442a-b757-a49113a791ed","20d71b12-41ce-45db-8135-1a3cd111b25d","13e4ee65-6bed-40e6-8e41-4ef9087c294b","62d76d13-cd32-4021-a243-98b2444cd14d","b1c78103-4bb7-47ac-9cfe-dcd9b603e8a2","77a7ef56-c608-456d-8ff9-a382d139ff95","5d8eeea7-4ee0-4ad7-9023-97fbc8d97fa7","ed379095-5f46-4c1c-917d-ad063d84eaf1","0527ea2b-cb60-408e-85c1-e500bee128c3","148a0193-55d6-47a1-8a33-2c4ba9c97b5e","27937f13-f008-457b-938c-87c9fe447de8","4c2b6243-5715-4651-a27e-f6052b61af80","10efae62-af17-4d47-a65e-baabc2b60496","65d7cfb4-70a5-480a-95a7-25a713d61695","6e3ef6a1-2ccf-48b3-973c-55244487dc38","13426e00-211b-4c70-981e-d71a622543cf","728b020d-aa32-4009-ad0d-9c1b6b57b3c9","77e6bf0d-befe-4364-9f95-df37d478f297","19e14bfd-d5ef-4f82-8c9d-ea19512d0793","8c175c10-202a-4275-9e10-5ab9b216a61d","9429315c-a644-4fbf-938f-30cd23f2b098","a1bf91f8-98cb-4642-a2ec-2124782bf273","3025741e-c645-46ee-93db-c6b1c5cdb842","c32f1fb1-68d7-41cc-9a33-5f541d5b0cfd","c92ebcd4-b4c1-449e-809a-6744a0cd21d1","d0ad8360-284d-47d3-861d-6be5b09619e1","9b3b0ce6-cae5-43e0-b669-023c76e9127f","bbb6ab44-3b47-44d8-990c-642de4bb12ba","eeb97179-3486-4ca8-968c-c18f49e3be4a","ffc13c6a-6d6b-48dc-9965-d5a5adfea0f1","a8ec4044-50c7-46b1-8e8a-4da98ff95aed","ce2e36d0-8e66-4433-bb3c-47e78ad6f250","079b7e9c-6d8f-4772-b5d7-579c6f5f873b","04f884af-47ec-4754-a913-b38823f701a5","2e7b1501-840a-46f0-a3ae-015008b666d8","2ea0b3ba-66c9-46f4-a4a3-300f1bb36a93","3e1fcf24-0e7a-4aeb-9dce-a98d552dd7c7","5156a44c-a3d9-40ad-a592-b6ffb8019b2a","6b55d261-63c7-4349-804f-3d9bbd7aac85","8d95a3a5-ffa0-4932-8208-e06a8f659b55","a49d8dbb-b91f-41a3-b5a8-8a5b053af776","a585524a-2784-4b2d-924b-d872994cb7a8","225f96d6-6d58-483b-8856-ddffd61bac40","ad5efc62-db13-40f2-a76e-df9b90a2687b","08b46451-1849-433c-9019-85b2aeca87d1","bb5ad3b4-8fcd-4cb8-af70-383839db3712","e68c7376-e6c7-44ff-ad65-775691372f19","f5a3920b-15fc-4b52-8586-16091b9bedde","0c83603a-5d0c-4b62-a613-5f2db36510d3","0f3c7056-05d4-46fe-824c-32df48115369","81329826-a1f3-4f0b-86e1-2c1fb58cac85","a7b4eaad-8dea-41d5-8bd0-c8f13cd84296","c1282781-f75a-46b7-b774-5695e0a74c3d","d47819ae-be18-4054-8ffd-dc86eb6fdb5a"])?this.Mh.trackAllRequests=!0:this.Mh.trackAllRequests=1===Object(b.l)([99,1]),this.Wh=a,this.Mh.userId=e,this.Mh.playerId=t,this.Mh.geo=i,this.Mh.browser=s,this.Mh.version=m.a.version,this.Mh.sessionId=r,this.Mh.clientAb0=y.a.clientAb0,this.Mh.clientAb1=y.a.clientAb1,this.Mh.serverAb0=y.a.serverAb0,this.Mh.serverAb1=y.a.serverAb1,this.Mh.pageUrl=n,this.Mh.bundleId=o,this.Mh.customParam1=l,this.Mh.customParam2=c,this.Mh.customParam3=d,this.Mh.customParam4=h,this.Mh.customParam5=u,this.Mh.abTestId=p,this.Gh=new f,this.Jh=new f,this.Qh=g}Xh(e,t=o.ProtoTrackingRequest,i,s=!0){return this.Mh.pageInFocus=d.a.pageFocus,n.a.sendProtoBeaconRequest({endpoint:e,ProtoRequest:t,requestData:Object.assign({trackingRequestMeta:s?this.Mh:void 0},i),logError:!1})}Yh(e,t=o.ProtoTrackingRequest,i,s=!0){this.Mh.pageInFocus=d.a.pageFocus;const r=n.a.sendProtoRequest({endpoint:e,ProtoRequest:t,ProtoResponse:o.ProtoTrackingResponse,requestData:Object.assign({trackingRequestMeta:s?this.Mh:void 0},i),queryParams:{[c.b]:m.a.version},withCredentials:!0,logError:!0});return r.then(e=>{const t=e.platformCappedLineItemIdList;Object(v.h)(t)&&this.zh.forEach(e=>{e.setPlatformCappedLineItemIdList(t)}),Object(l.e)(e.impressionRevenue)&&this.Kh&&this.Kh.notifyImpressionRevenue(e.impressionRevenue)}).catch(e=>{}),r}addPlatformCappedLineItemSubscriber(e){this.zh.push(e)}removePlatformCappedLineItemSubscriber(e){e=this.zh.indexOf(e);0<=e&&this.zh.splice(e,1)}setImpressionRevenueSubscriber(e){this.Kh=e}unsubscribeToImpressionRevenue(e){this.Kh!==e&&(this.Kh=void 0)}Zh(e,t,i=o.ProtoMediaTrackingRequest){const s=Object.assign({},t);Object(l.h)(this.Eh.mediaId)&&(s.mediaGuid=this.Eh.mediaId),this.Yh(e,i,s)}ta(){this.Nh||(this.Nh=!0,this.Yh(s.a.endPoints.tracking.playerStart,o.ProtoTrackingRequest))}ia(e,t,i=o.ProtoMediaTrackingRequest){return this.Yh(e,i,Object.assign({mediaGuid:this.Eh.mediaId},t))}ea(e){this.Zh(s.a.endPoints.tracking.media_quartile,{baseMeta:this.Eh,mediaId:this.Eh.mediaId,quartile:e})}sa(){this.na(this.$h,this.Fh,this.Uh),this.$h=[],this.Fh=[],this.Uh=[]}na(e,t,i){0===e.length&&0===t.length&&0===i.length||(i.forEach(e=>{e.error&&0<e.error.length&&(e.error=e.error.substring(0,500))}),i={mediaGuid:this.Eh.mediaId,prebids:e,bids:t,postBids:i,logEveryting:this.Ph,hasGdprConsentPayload:this.hasGdprConsentPayload,gdprConsentMode:this.Wh.gdprConsentMode,useExploration:this.Qh},this.Yh(s.a.endPoints.tracking.bids,o.ProtoBidTrackingsRequest,i))}ra(e){this.Yh(s.a.endPoints.tracking.ad_click,o.ProtoAdClickTrackingRequest,Object.assign({mediaGuid:this.Eh.mediaId},e))}ha(e){this.Xh(s.a.endPoints.tracking.heavy_ad_intervention,o.ProtoHeavyAdTrackingRequest,e)}aa(){const e=this.Hh[this.qh];clearTimeout(this.oa),this.oa=setTimeout(()=>{this.ca(e.delay),Object(l.e)(e.timesRepeatDelay)&&e.timesRepeatDelay--,0===e.timesRepeatDelay&&this.qh++,this.aa()},1e3*e.delay)}ca(e){this.Yh(s.a.endPoints.tracking.session_time,o.ProtoSessionTimeTrackingRequest,{trackingRequestMeta:this.Mh,sessionTime:e,timePlayed:this.Gh.fetchTime(e),timePlayedInView:this.Jh.fetchTime(e)})}ua(e){var t=this.Mh["sessionId"];this.Yh(s.a.endPoints.tracking.adOpportunity,o.ProtoAdOpportunityRequest,{sessionId:t,adBreak:e.adBreakType})}setNewMedia(e){this.Eh=e}updateMediaMetadata(e){this.Eh=e}setImplementationTypeOnMeta(e){this.Mh.implementationType=e}setMediaStart(){this.ea(o.ProtoQuartilesEnum.Start)}setContentStart(){this.ta()}setSessionPlayback(e){this.Bh!==e&&(this.Bh=e,this.Dh&&this.Bh&&this.Jh.startCountingTime(),this.Bh?this.Gh.startCountingTime():(this.Gh.stopCountingTime(),this.Jh.stopCountingTime()))}setSessionViewability(e){this.Dh!==e&&(this.Dh=e,this.Dh&&this.Bh?this.Jh.startCountingTime():this.Dh||this.Jh.stopCountingTime())}trackSessionRendered(e){this.Lh||(this.Yh(s.a.endPoints.tracking.session_rendered,o.ProtoTrackingRequest,{hasAdBlocker:e}),this.Lh=!0,this.aa())}trackSessionViewability(){!this.Rh&&this.Nh&&(this.Yh(s.a.endPoints.tracking.session_view),this.Rh=!0)}trackMediaQuartile(e){this.ea(e)}trackMediaClick(e=o.ProtoMediaClickTypeEnum.Click){e={type:e,clickUrl:e===o.ProtoMediaClickTypeEnum.UrlClick?this.Eh.clickUrl:void 0,slideTitle:this.Eh.slideTitle,slideNumber:this.Eh.slideNumber,slideMediaType:this.Eh.slideMediaType};this.Zh(s.a.endPoints.tracking.media_click,e,o.ProtoMediaClickTrackingRequest)}setAdStart(){this.ta()}startBidRequests(){this.la=setInterval(()=>{this.sa()},this.Vh)}addPrebid(e){this.$h.push(e)}addPostBid(e){Object(l.g)(e.error)||(e.error=JSON.stringify(e.error)),this.Uh.push(e)}addBid(e){this.Fh.push(e)}trackAuctionInfoForBid(e){this.Yh(s.a.endPoints.tracking.auctionInformation,o.ProtoAuctionInfoRequest,e)}trackVideoAdImpression(e){return this.ia(s.a.endPoints.tracking.ad_impression,e,o.ProtoVideoAdImpressionRequest)}trackVideoAdImpressionViewable(e){return this.ia(s.a.endPoints.tracking.ad_impression_viewable,e,o.ProtoVideoAdImpressionViewableRequest)}trackVideoAdQuartile(e){this.Zh(s.a.endPoints.tracking.ad_quartile,e,o.ProtoVideoAdQuartilesRequest)}trackAdClick(e){this.ra(e)}trackAdOpportunity(e){this.ua(e)}trackSessionAdBlocker(e){this.Yh(s.a.endPoints.tracking.sessionAdBlocker,o.ProtoSessionAdBlockerRequest,{trackingRequestMeta:this.Mh,adBlockDetectionType:e,dynamicElkFieldsValues:{0:"12"}})}getMetadataModel(){return this.Mh}updateMetadataModel(e){this.Mh=Object.assign(Object.assign({},this.Mh),e)}trackHeavyAdIntervention(e){this.ha(e)}destroy(){clearInterval(this.oa),clearInterval(this.la)}}},function(e,t,i){"use strict";var s=i(3),r=i(8),n=i(20),o=i(6),a=i(2);const l={MAIN:0,AUXILIARY:1,SECONDARY:2,FOURTH:3,FIFTH:4};function c(e){return e.button===l.MAIN}var d=i(14),h=i(1);i.d(t,"a",function(){return u});class u{constructor(e,t,i){this.da=e,this.Yn=t,this.mediator=null,this.fa=30,this.pa=250,this.ba=25,this.va=[],this.ma={},this.ga=0,this.ya=0,this.wa=!0,this.xa=null,this.Sa=!1,this.Oa=!1,this.ka=!1,this._a=!1,this.ja=0,this.Aa=0,this.Ia=null,this.Ca=null,this.Ta=null,this.Pa=!0,this.Ma=e=>{this.Yn?(e.element.addEventListener("touchstart",this.Ea),e.element.addEventListener("touchmove",this.La),e.element.addEventListener("touchend",this.Ra),e.element.addEventListener("touchcancel",this.Ba)):(e.element.addEventListener("mousedown",this.Da),e.element.addEventListener("mouseup",this.Fa))},this.$a=e=>{this.Yn?(e.element.removeEventListener("touchstart",this.Ea),e.element.removeEventListener("touchmove",this.La),e.element.removeEventListener("touchend",this.Ra),e.element.removeEventListener("touchcancel",this.Ba)):(e.element.removeEventListener("mousedown",this.Da),e.element.removeEventListener("mouseup",this.Fa))},this.Ea=e=>{e.stopPropagation();var t=this.Ua(e);this.Ta=t,this.Oa=!1,this.Va(t,n.c.Hold)&&this.Na(e);var i=this.Ha(e);this.ya=i.eventX,this.ga=i.eventY,this.qa(e,t,n.b.InteractionStart),this.wa=!0},this.La=e=>{e.stopPropagation();const t=this.Ua(e),i=this.Ha(e);this.wa&&(Math.abs(i.deltaXFromStart)>this.ba||Math.abs(i.deltaYFromStart)>this.ba)&&(this.wa=!1),(this.Sa||this.Va(t,n.c.Swipe))&&(null===this.Ia&&this.za(t,i),this.Ia!==n.a.Y&&(e.preventDefault(),null===this.Ca&&(this.Ca=Object(a.P)(this.da,()=>{this.Ca=null,this.Wa(i.deltaXFromStart),t.mediator.publish(t.context,r.a[r.a.SwipeMove],{payload:i.deltaXFromStart})}))))},this.Ra=e=>{const t=this.Ua(e);var i;this.Ta===t&&(i=this.Ha(e),e.cancelable&&this.Va(t,n.c.Hold)&&Math.abs(i.deltaXFromStart)<this.ba&&Math.abs(i.deltaYFromStart)<this.ba&&e.preventDefault(),this.Ga(e,t,i),this.Ja(i)===n.a.Y&&Math.abs(i.deltaYFromStart)>=this.ba?this.Pa&&t.mediator.publish(t.context,r.a[r.a.Scroll]):!this.wa||this.ka||this.Oa||t.mediator.publish(t.context,r.a[r.a.Click])),this.Ta=null},this.Ba=e=>{var t=this.Ua(e);this.Ga(e,t),this.Ta=null},this.Da=e=>{var t;c(e)?(t=this.Ua(e),this.Ta=t,e.stopPropagation(),e.preventDefault(),this.Va(t,n.c.Hold)&&this.Na(e),this.qa(e,t,n.b.InteractionStart)):this.Qa(n.b.InteractionStart,e)},this.Fa=e=>{if(!c(e)||!this.Ta)return this.Qa(n.b.Interaction,e),void this.Qa(n.b.InteractionEnd,e);const t=this.Ua(e);e.stopPropagation(),e.preventDefault(),this.qa(e,this.Ta,n.b.Interaction),this.qa(e,this.Ta,n.b.InteractionEnd),(this.Sa||this.Va(t,n.c.Hold))&&this.Xa(e),this.Ta===t&&(this.qa(e,t,n.b.Click),t.mediator.publish(t.context,r.a[r.a.Click])),this.Ta=null},this.Ya=e=>{if(!c(e))return this.Qa(n.b.Interaction,e),void this.Qa(n.b.InteractionEnd,e);this.Ta=null},this.Ka=e=>{if(!c(e)||!this.Ta)return this.Qa(n.b.Interaction,e),void this.Qa(n.b.InteractionEnd,e);this.qa(e,this.Ta,n.b.Interaction),this.qa(e,this.Ta,n.b.InteractionEnd),(this.Sa||this.Va(this.Ta,n.c.Hold))&&this.Xa(e),this.Ta=null};var{leftTapSizeThreshold:e,holdTriggerDuration:t,scrollThreshold:i}=Object.assign({},i);this.fa=e||this.fa,this.pa=t||this.pa,this.ba=i||this.ba,this.da.document.addEventListener("mousedown",this.Ya),this.da.document.addEventListener("mouseup",this.Ka)}register(e,t,i,s={},r=[]){r={element:e,mediator:t,context:i,callbacks:s||{},allowedSpecialInteractions:r,disabledSpecialInteractions:[]};this.va.push(r),this.Ma(r)}unregister(t){var e=this.va.find(e=>e.element===t);e&&(this.va=this.va.filter(e=>e.element!==t),this.$a(e))}unregisterAll(t){const e=this.va.filter(e=>e.mediator===t);e.forEach(this.$a),this.va=Object(o.a)(this.va,e)}addGlobalActions(t,i){Object.keys(Object.assign({},i)).forEach(e=>{this.ma[e]=this.ma[e]||[],this.ma[e].push({initiator:t,action:i[e]})})}removeGlobalActions(t){Object.keys(this.ma).forEach(e=>{this.ma[e].some(e=>e.initiator===t)&&(this.ma[e]=this.ma[e].filter(e=>e.initiator!==t))})}disableSpecialInteractions(e){const t=this.Za(e);t.disabledSpecialInteractions=Object(o.n)(t.allowedSpecialInteractions)}enableSpecialInteractions(e){this.Za(e).disabledSpecialInteractions=[]}getNonInterruptibleInteractions(){return[r.a.HoldStart,r.a.HoldEnd,r.a.SwipeMove,r.a.SwipeEnd,r.a.Scroll]}disableScrollEvent(){this.Pa=!1}enableScrollEvent(){this.Pa=!0}destroy(){clearTimeout(this.xa),this.va.forEach(this.$a),this.da.document.removeEventListener("mousedown",this.Ya),this.da.document.removeEventListener("mouseup",this.Ka)}to(e){const t=this.Ua(e),i=t.element.getBoundingClientRect(),s=this.io(e),r=i.width,n=Object(d.g)(0,r,0,100,s);this.eo(t,this.fa,n)}eo(e,t,i){i<t?e.mediator.publish(e.context,r.a[r.a.TapLeft]):e.mediator.publish(e.context,r.a[r.a.TapRight])}Na(e){clearTimeout(this.xa),this.Sa=!1,this.ka=!1;const t=this.Ua(e);Object(a.a)(t.element,s.h.OnHold),this.xa=setTimeout(()=>{this.Sa=!0,this.wa&&(this.ka=!0,t.mediator.publish(t.context,r.a[r.a.HoldStart]))},this.pa)}Xa(e){clearTimeout(this.xa);const t=this.Ua(e);Object(a.L)(t.element,s.h.OnHold),this.Sa?(this.Sa=!1,this.ka&&(this.ka=!1,t.mediator.publish(t.context,r.a[r.a.HoldEnd]))):(this.Oa=!0,this.to(e))}Ga(e,t,i){i=i||this.Ha(e),e.stopPropagation(),this.qa(e,t,n.b.Interaction),this.qa(e,t,n.b.InteractionEnd),(this.Sa||this._a||this.wa&&this.Va(t,n.c.Hold))&&this.Xa(e),(this._a||this.Va(t,n.c.Swipe))&&this.so(t,i)}za(e,t){this.Ia=this.Ja(t),this.Ia===n.a.X&&(this._a=!0,this.Sa||(clearTimeout(this.xa),this.xa=null,this.Sa=!0,e.mediator.publish(e.context,r.a[r.a.HoldStart])))}so(e,t){this._a&&(t=this.no(t),e.mediator.publish(e.context,r.a[r.a.SwipeEnd],{payload:t})),Object(a.e)(this.da,this.Ca),this.Ca=null,this._a=!1,this.ya=null,this.ga=null,this.Ia=null,this.ja=0,this.Aa=0}Wa(e){this.Aa<this.ba?this.Aa++:(this.ja=e,this.Aa=0)}Ja(e){return Math.abs(e.deltaXFromStart)>=Math.abs(e.deltaYFromStart)?n.a.X:n.a.Y}no(e){return e.deltaXFromStart-this.ja<0?n.d.Left:n.d.Right}Ha(e){e=e.changedTouches[0];return{deltaXFromStart:e.clientX-this.ya,deltaYFromStart:e.clientY-this.ga,eventX:e.clientX,eventY:e.clientY}}Ua(e){return this.Ta||this.Za(e.currentTarget)}Za(t){return this.va.find(e=>e.element===t)}io(e){const t=this.Ua(e);return this.Yn?e.changedTouches[0].clientX-t.element.getBoundingClientRect().left:e.offsetX}Va(e,t){return e.allowedSpecialInteractions.includes(t)&&!e.disabledSpecialInteractions.includes(t)}qa(e,t,i){const s=t.callbacks[i];Object(h.b)(s)&&s(e),this.Qa(i,e)}Qa(e,t){null===(e=this.ma[e])||void 0===e||e.forEach(e=>{e.action(t)})}}},function(e,t,i){"use strict";var s=t;function r(){s.Reader.ie(s.BufferReader),s.util.ie()}s.build="minimal",s.Writer=i(68),s.BufferWriter=i(144),s.Reader=i(70),s.BufferReader=i(145),s.util=i(41),s.rpc=i(146),s.roots=i(148),s.configure=r,s.Writer.ie(s.BufferWriter),r()},function(e,t,i){"use strict";e.exports=function(e,t){for(var i=new Array(arguments.length-1),n=0,s=2,o=!0;s<arguments.length;)i[n++]=arguments[s++];return new Promise(function(s,r){i[n]=function(e){if(o)if(o=!1,e)r(e);else{for(var t=new Array(arguments.length-1),i=0;i<t.length;)t[i++]=arguments[i];s.apply(null,t)}};try{e.apply(t||null,i)}catch(e){o&&(o=!1,r(e))}})}},function(e,t,i){"use strict";t.length=function(e){var t=e.length;if(!t)return 0;for(var i=0;1<--t%4&&"="===e.charAt(t);)++i;return Math.ceil(3*e.length)/4-i};for(var c=new Array(64),l=new Array(123),s=0;s<64;)l[c[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;t.encode=function(e,t,i){for(var s,r=null,n=[],o=0,a=0;t<i;){var l=e[t++];switch(a){case 0:n[o++]=c[l>>2],s=(3&l)<<4,a=1;break;case 1:n[o++]=c[s|l>>4],s=(15&l)<<2,a=2;break;case 2:n[o++]=c[s|l>>6],n[o++]=c[63&l],a=0}8191<o&&((r=r||[]).push(String.fromCharCode.apply(String,n)),o=0)}return a&&(n[o++]=c[s],n[o++]=61,1===a&&(n[o++]=61)),r?(o&&r.push(String.fromCharCode.apply(String,n.slice(0,o))),r.join("")):String.fromCharCode.apply(String,n.slice(0,o))},t.decode=function(e,t,i){for(var s,r=i,n=0,o=0;o<e.length;){var a=e.charCodeAt(o++);if(61===a&&1<n)break;if(void 0===(a=l[a]))throw Error("invalid encoding");switch(n){case 0:s=a,n=1;break;case 1:t[i++]=s<<2|(48&a)>>4,s=a,n=2;break;case 2:t[i++]=(15&s)<<4|(60&a)>>2,s=a,n=3;break;case 3:t[i++]=(3&s)<<6|a,n=0}}if(1===n)throw Error("invalid encoding");return i-r},t.test=function(e){return/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(e)}},function(e,t,i){"use strict";function s(){this.ro={}}(e.exports=s).prototype.on=function(e,t,i){return(this.ro[e]||(this.ro[e]=[])).push({fn:t,ctx:i||this}),this},s.prototype.off=function(e,t){if(void 0===e)this.ro={};else if(void 0===t)this.ro[e]=[];else for(var i=this.ro[e],s=0;s<i.length;)i[s].fn===t?i.splice(s,1):++s;return this},s.prototype.emit=function(e){var t=this.ro[e];if(t){for(var i=[],s=1;s<arguments.length;)i.push(arguments[s++]);for(s=0;s<t.length;)t[s].fn.apply(t[s++].ctx,i)}return this}},function(e,t,i){"use strict";function s(e){return"undefined"!=typeof Float32Array?(c=new Float32Array([-0]),d=new Uint8Array(c.buffer),h=128===d[3],e.writeFloatLE=h?g:m,e.writeFloatBE=h?m:g,e.readFloatLE=h?f:y,e.readFloatBE=h?y:f):(e.writeFloatLE=u.bind(null,b),e.writeFloatBE=u.bind(null,v),e.readFloatLE=p.bind(null,P),e.readFloatBE=p.bind(null,S)),"undefined"!=typeof Float64Array?(a=new Float64Array([-0]),l=new Uint8Array(a.buffer),h=128===l[7],e.writeDoubleLE=h?s:r,e.writeDoubleBE=h?r:s,e.readDoubleLE=h?n:o,e.readDoubleBE=h?o:n):(e.writeDoubleLE=t.bind(null,b,0,4),e.writeDoubleBE=t.bind(null,v,4,0),e.readDoubleLE=i.bind(null,P,0,4),e.readDoubleBE=i.bind(null,S,4,0)),e;function t(e,t,i,s,r,n){var o,a,l=s<0?1:0;0===(s=l?-s:s)?(e(0,r,n+t),e(0<1/s?0:2147483648,r,n+i)):isNaN(s)?(e(0,r,n+t),e(2146959360,r,n+i)):17976931348623157e292<s?(e(0,r,n+t),e((l<<31|2146435072)>>>0,r,n+i)):s<22250738585072014e-324?(e((o=s/5e-324)>>>0,r,n+t),e((l<<31|o/4294967296)>>>0,r,n+i)):(1024===(a=Math.floor(Math.log(s)/Math.LN2))&&(a=1023),e(4503599627370496*(o=s*Math.pow(2,-a))>>>0,r,n+t),e((l<<31|a+1023<<20|1048576*o&1048575)>>>0,r,n+i))}function i(e,t,i,s,r){t=e(s,r+t),s=e(s,r+i),r=2*(s>>31)+1,i=s>>>20&2047,t=4294967296*(1048575&s)+t;return 2047==i?t?NaN:1/0*r:0==i?5e-324*r*t:r*Math.pow(2,i-1075)*(t+4503599627370496)}function s(e,t,i){a[0]=e,t[i]=l[0],t[i+1]=l[1],t[i+2]=l[2],t[i+3]=l[3],t[i+4]=l[4],t[i+5]=l[5],t[i+6]=l[6],t[i+7]=l[7]}function r(e,t,i){a[0]=e,t[i]=l[7],t[i+1]=l[6],t[i+2]=l[5],t[i+3]=l[4],t[i+4]=l[3],t[i+5]=l[2],t[i+6]=l[1],t[i+7]=l[0]}function n(e,t){return l[0]=e[t],l[1]=e[t+1],l[2]=e[t+2],l[3]=e[t+3],l[4]=e[t+4],l[5]=e[t+5],l[6]=e[t+6],l[7]=e[t+7],a[0]}function o(e,t){return l[7]=e[t],l[6]=e[t+1],l[5]=e[t+2],l[4]=e[t+3],l[3]=e[t+4],l[2]=e[t+5],l[1]=e[t+6],l[0]=e[t+7],a[0]}var a,l,c,d,h;function u(e,t,i,s){var r=t<0?1:0;0===(t=r?-t:t)?e(0<1/t?0:2147483648,i,s):isNaN(t)?e(2143289344,i,s):e(34028234663852886e22<t?(r<<31|2139095040)>>>0:t<11754943508222875e-54?(r<<31|Math.round(t/1401298464324817e-60))>>>0:(r<<31|(r=Math.floor(Math.log(t)/Math.LN2))+127<<23|8388607&Math.round(t*Math.pow(2,-r)*8388608))>>>0,i,s)}function p(e,t,i){e=e(t,i),t=2*(e>>31)+1,i=e>>>23&255,e&=8388607;return 255==i?e?NaN:1/0*t:0==i?1401298464324817e-60*t*e:t*Math.pow(2,i-150)*(8388608+e)}function g(e,t,i){c[0]=e,t[i]=d[0],t[i+1]=d[1],t[i+2]=d[2],t[i+3]=d[3]}function m(e,t,i){c[0]=e,t[i]=d[3],t[i+1]=d[2],t[i+2]=d[1],t[i+3]=d[0]}function f(e,t){return d[0]=e[t],d[1]=e[t+1],d[2]=e[t+2],d[3]=e[t+3],c[0]}function y(e,t){return d[3]=e[t],d[2]=e[t+1],d[1]=e[t+2],d[0]=e[t+3],c[0]}}function b(e,t,i){t[i]=255&e,t[i+1]=e>>>8&255,t[i+2]=e>>>16&255,t[i+3]=e>>>24}function v(e,t,i){t[i]=e>>>24,t[i+1]=e>>>16&255,t[i+2]=e>>>8&255,t[i+3]=255&e}function P(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function S(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=s(s)},function(t,i,e){"use strict";function s(t){try{var i=eval("quire".replace(/^/,"re"))(t);if(i&&(i.length||Object.keys(i).length))return i}catch(t){}return null}t.exports=s},function(e,t,i){"use strict";t.length=function(e){for(var t,i=0,s=0;s<e.length;++s)(t=e.charCodeAt(s))<128?i+=1:t<2048?i+=2:55296==(64512&t)&&56320==(64512&e.charCodeAt(s+1))?(++s,i+=4):i+=3;return i},t.read=function(e,t,i){if(i-t<1)return"";for(var s,r=null,n=[],o=0;t<i;)(s=e[t++])<128?n[o++]=s:191<s&&s<224?n[o++]=(31&s)<<6|63&e[t++]:239<s&&s<365?(s=((7&s)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,n[o++]=55296+(s>>10),n[o++]=56320+(1023&s)):n[o++]=(15&s)<<12|(63&e[t++])<<6|63&e[t++],8191<o&&((r=r||[]).push(String.fromCharCode.apply(String,n)),o=0);return r?(o&&r.push(String.fromCharCode.apply(String,n.slice(0,o))),r.join("")):String.fromCharCode.apply(String,n.slice(0,o))},t.write=function(e,t,i){for(var s,r,n=i,o=0;o<e.length;++o)(s=e.charCodeAt(o))<128?t[i++]=s:(s<2048?t[i++]=s>>6|192:(55296==(64512&s)&&56320==(64512&(r=e.charCodeAt(o+1)))?(++o,t[i++]=(s=65536+((1023&s)<<10)+(1023&r))>>18|240,t[i++]=s>>12&63|128):t[i++]=s>>12|224,t[i++]=s>>6&63|128),t[i++]=63&s|128);return i-n}},function(e,t,i){"use strict";e.exports=function(t,i,e){var s=e||8192,r=s>>>1,n=null,o=s;return function(e){if(e<1||r<e)return t(e);s<o+e&&(n=t(s),o=0);e=i.call(n,o,o+=e);return 7&o&&(o=1+(7|o)),e}}},function(e,t,i){"use strict";e.exports=r;var s=i(41);function r(e,t){this.lo=e>>>0,this.hi=t>>>0}var n=r.zero=new r(0,0);n.toNumber=function(){return 0},n.zzEncode=n.zzDecode=function(){return this},n.length=function(){return 1};r.zeroHash="\0\0\0\0\0\0\0\0";r.fromNumber=function(e){if(0===e)return n;var t=e<0,i=(e=t?-e:e)>>>0,e=(e-i)/4294967296>>>0;return t&&(e=~e>>>0,i=~i>>>0,4294967295<++i&&(i=0,4294967295<++e&&(e=0))),new r(i,e)},r.from=function(e){if("number"==typeof e)return r.fromNumber(e);if(s.isString(e)){if(!s.Long)return r.fromNumber(parseInt(e,10));e=s.Long.fromString(e)}return e.low||e.high?new r(e.low>>>0,e.high>>>0):n},r.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,e=~this.hi>>>0;return-(t+4294967296*(e=!t?e+1>>>0:e))}return this.lo+4294967296*this.hi},r.prototype.toLong=function(e){return s.Long?new s.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var o=String.prototype.charCodeAt;r.fromHash=function(e){return"\0\0\0\0\0\0\0\0"===e?n:new r((o.call(e,0)|o.call(e,1)<<8|o.call(e,2)<<16|o.call(e,3)<<24)>>>0,(o.call(e,4)|o.call(e,5)<<8|o.call(e,6)<<16|o.call(e,7)<<24)>>>0)},r.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},r.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},r.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},r.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,i=this.hi>>>24;return 0==i?0==t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:i<128?9:10}},function(e,t,i){"use strict";e.exports=o;var s=i(68);(o.prototype=Object.create(s.prototype)).constructor=o;var r=i(41),n=r.Buffer;function o(){s.call(this)}o.alloc=function(e){return(o.alloc=r.te)(e)};var a=n&&n.prototype instanceof Uint8Array&&"set"===n.prototype.set.name?function(e,t,i){t.set(e,i)}:function(e,t,i){if(e.copy)e.copy(t,i,0,e.length);else for(var s=0;s<e.length;)t[i++]=e[s++]};function l(e,t,i){e.length<40?r.utf8.write(e,t,i):t.utf8Write(e,i)}o.prototype.bytes=function(e){var t=(e=r.isString(e)?r.Zi(e,"base64"):e).length>>>0;return this.uint32(t),t&&this.Ls(a,t,e),this},o.prototype.string=function(e){var t=n.byteLength(e);return this.uint32(t),t&&this.Ls(l,t,e),this}},function(e,t,i){"use strict";e.exports=r;var s=i(70);(r.prototype=Object.create(s.prototype)).constructor=r;i=i(41);function r(e){s.call(this,e)}i.Buffer&&(r.prototype.Rs=i.Buffer.prototype.slice),r.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len))}},function(e,t,i){"use strict";t.Service=i(147)},function(e,t,i){"use strict";e.exports=s;var a=i(41);function s(e,t,i){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");a.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(i)}((s.prototype=Object.create(a.EventEmitter.prototype)).constructor=s).prototype.rpcCall=function e(i,t,s,r,n){if(!r)throw TypeError("request must be specified");var o=this;if(!n)return a.asPromise(e,o,i,t,s,r);if(o.rpcImpl)try{return o.rpcImpl(i,t[o.requestDelimited?"encodeDelimited":"encode"](r).finish(),function(e,t){if(e)return o.emit("error",e,i),n(e);if(null!==t){if(!(t instanceof s))try{t=s[o.responseDelimited?"decodeDelimited":"decode"](t)}catch(e){return o.emit("error",e,i),n(e)}return o.emit("data",t,i),n(null,t)}o.end(!0)})}catch(e){return o.emit("error",e,i),void setTimeout(function(){n(e)},0)}else setTimeout(function(){n(Error("already ended"))},0)},s.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(e,t,i){"use strict";e.exports={}},function(e,t,i){"use strict";var s,r=this&&this.Bs||(s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"_",{value:!0});var n,r=(n=Error,r(o,n),o);function o(e){e=n.call(this,e)||this;return e.name="DecodingError",e}t.DecodingError=r},function(e,t,i){"use strict";var s,r=this&&this.Bs||(s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"_",{value:!0});var n,r=(n=Error,r(o,n),o);function o(e){e=n.call(this,e)||this;return e.name="EncodingError",e}t.EncodingError=r},function(e,t,i){"use strict";var s,r=this&&this.Bs||(s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"_",{value:!0});var n,r=(n=Error,r(o,n),o);function o(e){e=n.call(this,e)||this;return e.name="GVLError",e}t.GVLError=r},function(e,t,i){"use strict";var s,r=this&&this.Bs||(s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"_",{value:!0});var n,r=(n=Error,r(o,n),o);function o(e,t,i){i=n.call(this,"invalid value "+t+" passed for "+e+" "+(i=void 0===i?"":i))||this;return i.name="TCModelError",i}t.TCModelError=r},function(e,t,i){"use strict";Object.defineProperty(t,"_",{value:!0});var s=(r.prototype.has=function(e){return r.langSet.has(e)},r.prototype.forEach=function(e){r.langSet.forEach(e)},Object.defineProperty(r.prototype,"size",{get:function(){return r.langSet.size},enumerable:!0,configurable:!0}),r.langSet=new Set(["BG","CA","CS","DA","DE","EL","EN","ES","ET","FI","FR","HR","HU","IT","LT","LV","MT","NL","NO","PL","PT","RO","RU","SK","SL","SV","ZH"]),r);function r(){}t.ConsentLanguages=s},function(e,t,i){"use strict";var s,r=this&&this.Bs||(s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"_",{value:!0});var n,o=i(75),a=i(73),l=i(61),r=(n=i(43).Cloneable,r(c,n),c.prototype.has=function(e){return this.map.has(e)},c.prototype.isOkToHave=function(e,t,i){var s,r=!0;if(null!==(s=this.gvl)&&void 0!==s&&s.vendors){var n=this.gvl.vendors[i];if(n)if(e===l.RestrictionType.NOT_ALLOWED)r=n.legIntPurposes.includes(t)||n.purposes.includes(t);else if(n.flexiblePurposes.length)switch(e){case l.RestrictionType.REQUIRE_CONSENT:r=n.flexiblePurposes.includes(t)&&n.legIntPurposes.includes(t);break;case l.RestrictionType.REQUIRE_LI:r=n.flexiblePurposes.includes(t)&&n.purposes.includes(t)}else r=!1;else r=!1}return r},c.prototype.add=function(e,t){this.isOkToHave(t.restrictionType,t.purposeId,e)&&(t=t.hash,this.has(t)||(this.map.set(t,new a.BinarySearchTree),this.bitLength=0),this.map.get(t).add(e))},c.prototype.getVendors=function(e){var t,i=[];return e?(e=e.hash,this.has(e)&&(i=this.map.get(e).get())):(t=new Set,this.map.forEach(function(e){e.get().forEach(function(e){t.add(e)})}),i=Array.from(t)),i},c.prototype.getRestrictionType=function(e,t){var i;return this.getRestrictions(e).forEach(function(e){e.purposeId===t&&(void 0===i||i>e.restrictionType)&&(i=e.restrictionType)}),i},c.prototype.vendorHasRestriction=function(e,t){for(var i=!1,s=this.getRestrictions(e),r=0;r<s.length&&!i;r++)i=t.isSameAs(s[r]);return i},c.prototype.getMaxVendorId=function(){var t=0;return this.map.forEach(function(e){t=Math.max(e.max(),t)}),t},c.prototype.getRestrictions=function(i){var s=[];return this.map.forEach(function(e,t){i&&!e.contains(i)||s.push(o.PurposeRestriction.unHash(t))}),s},c.prototype.getPurposes=function(){var i=new Set;return this.map.forEach(function(e,t){i.add(o.PurposeRestriction.unHash(t).purposeId)}),Array.from(i)},c.prototype.remove=function(e,t){var i=t.hash,t=this.map.get(i);t&&(t.remove(e),t.isEmpty()&&(this.map.delete(i),this.bitLength=0))},Object.defineProperty(c.prototype,"gvl",{get:function(){return this.gvl_},set:function(e){var s=this;this.gvl_||(this.gvl_=e,this.map.forEach(function(t,e){var i=o.PurposeRestriction.unHash(e);t.get().forEach(function(e){s.isOkToHave(i.restrictionType,i.purposeId,e)||t.remove(e)})}))},enumerable:!0,configurable:!0}),c.prototype.isEmpty=function(){return 0===this.map.size},Object.defineProperty(c.prototype,"numRestrictions",{get:function(){return this.map.size},enumerable:!0,configurable:!0}),c);function c(){var e=null!==n&&n.apply(this,arguments)||this;return e.bitLength=0,e.map=new Map,e}t.PurposeRestrictionVector=r},function(e,t,i){"use strict";Object.defineProperty(t,"_",{value:!0});var s=i(76),i=(r.ID_TO_KEY=[s.Segment.CORE,s.Segment.VENDORS_DISCLOSED,s.Segment.VENDORS_ALLOWED,s.Segment.PUBLISHER_TC],r.KEY_TO_ID=((i={})[s.Segment.CORE]=0,i[s.Segment.VENDORS_DISCLOSED]=1,i[s.Segment.VENDORS_ALLOWED]=2,i[s.Segment.PUBLISHER_TC]=3,i),r);function r(){}t.SegmentIDs=i},function(e,t,i){"use strict";var s,r=this&&this.Bs||(s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),n=this&&this.ho||function(i,s){var r,n,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&t[0]?n.return:t[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,t[1])).done)return o;switch(n=0,(t=o?[2&t[0],o.value]:t)[0]){case 0:case 1:o=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,n=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(o=0<(o=a.trys).length&&o[o.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){a.label=t[1];break}if(6===t[0]&&a.label<o[1]){a.label=o[1],o=t;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(t);break}o[2]&&a.ops.pop(),a.trys.pop();continue}t=s.call(i,a)}catch(e){t=[6,e],n=0}finally{r=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},o=this&&this.ee||function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],s=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&s>=e.length?void 0:e)&&e[s++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"_",{value:!0});var a,l=i(43),c=i(35),r=(a=l.Cloneable,r(d,a),d.prototype[Symbol.iterator]=function(){var t;return n(this,function(e){switch(e.label){case 0:t=1,e.label=1;case 1:return t<=this.maxId?[4,[t,this.has(t)]]:[3,4];case 2:e.sent(),e.label=3;case 3:return t++,[3,1];case 4:return[2]}})},d.prototype.values=function(){return this.set_.values()},Object.defineProperty(d.prototype,"maxId",{get:function(){return this.maxId_},enumerable:!0,configurable:!0}),d.prototype.has=function(e){return this.set_.has(e)},d.prototype.unset=function(e){var t=this;Array.isArray(e)?e.forEach(function(e){return t.unset(e)}):"object"==typeof e?this.unset(Object.keys(e).map(function(e){return+e})):(this.set_.delete(e),this.bitLength=0,e===this.maxId&&(this.maxId_=0,this.set_.forEach(function(e){t.maxId_=Math.max(t.maxId,e)})))},d.prototype.isIntMap=function(t){var i=this;return"object"==typeof t&&Object.keys(t).every(function(e){return Number.isInteger(parseInt(e,10))&&i.isValidNumber(t[e].id)&&void 0!==t[e].name})},d.prototype.isValidNumber=function(e){return 0<parseInt(e,10)},d.prototype.isSet=function(e){var t=!1;return t=e instanceof Set?Array.from(e).every(this.isValidNumber):t},d.prototype.set=function(e){var t=this;if(Array.isArray(e))e.forEach(function(e){return t.set(e)});else if(this.isSet(e))this.set(Array.from(e));else if(this.isIntMap(e))this.set(Object.keys(e).map(function(e){return+e}));else{if(!this.isValidNumber(e))throw new c.TCModelError("set()",e,"must be positive integer array, positive integer, Set<number>, or IntMap");this.set_.add(e),this.maxId_=Math.max(this.maxId,e),this.bitLength=0}},d.prototype.empty=function(){this.set_=new Set},d.prototype.forEach=function(e){var t,i;try{for(var s=o(this),r=s.next();!r.done;r=s.next()){var n=r.value;e(n[1],n[0])}}catch(e){t={error:e}}finally{try{r&&!r.done&&(i=s.return)&&i.call(s)}finally{if(t)throw t.error}}},Object.defineProperty(d.prototype,"size",{get:function(){return this.set_.size},enumerable:!0,configurable:!0}),d.prototype.setAll=function(e){this.set(e)},d);function d(){var e=null!==a&&a.apply(this,arguments)||this;return e.bitLength=0,e.maxId_=0,e.set_=new Set,e}t.Vector=r},function(e,t,i){"use strict";Object.defineProperty(t,"_",{value:!0});var s=i(72),l=i(60),c=i(77),r=i(83),d=i(35),h=i(74),u=i(37),r=(n.encode=function(r,n){var e,o=this;try{e=this.fieldSequence[""+r.version][n]}catch(e){throw new d.EncodingError("Unable to encode version: "+r.version+", segment: "+n)}var a="";return n!==u.Segment.CORE&&(a=c.IntEncoder.encode(u.SegmentIDs.KEY_TO_ID[n],l.BitLength.segmentType)),e.forEach(function(t){var e=r[t],i=c.FieldEncoderMap[t],s=l.BitLength[t];void 0===s&&o.isPublisherCustom(t)&&(s=+r[h.Fields.numCustomPurposes]);try{a+=i.encode(e,s)}catch(e){throw new d.EncodingError("Error encoding "+n+"->"+t+": "+e.message)}}),s.Base64Url.encode(a)},n.decode=function(e,r,t){var n=this,o=s.Base64Url.decode(e),a=0;return t===u.Segment.CORE&&(r.version=c.IntEncoder.decode(o.substr(a,l.BitLength[h.Fields.version]),l.BitLength[h.Fields.version])),t!==u.Segment.CORE&&(a+=l.BitLength.segmentType),this.fieldSequence[""+r.version][t].forEach(function(e){var t=c.FieldEncoderMap[e],i=l.BitLength[e];if(0!==(i=void 0===i&&n.isPublisherCustom(e)?+r[h.Fields.numCustomPurposes]:i)){var s=o.substr(a,i);if(t===c.VendorVectorEncoder?r[e]=t.decode(s,r.version):r[e]=t.decode(s,i),Number.isInteger(i))a+=i;else{if(!Number.isInteger(r[e].bitLength))throw new d.DecodingError(e);a+=r[e].bitLength}}}),r},n.isPublisherCustom=function(e){return 0===e.indexOf("publisherCustom")},n.fieldSequence=new r.FieldSequence,n);function n(){}t.SegmentEncoder=r},function(e,t,i){"use strict";Object.defineProperty(t,"_",{value:!0});var s,r,n,o,a,l,c,d,h,u,p,g,m,f,y,b,v,P,S,I,T,A,O,k,C=i(37),w=i(48),x=i(78),E=i(62),L=i(42),M=i(79),R=i(80),B=i(81),E=(s=C.Fields.version,r=C.Fields.created,n=C.Fields.lastUpdated,o=C.Fields.cmpId,a=C.Fields.cmpVersion,l=C.Fields.consentScreen,c=C.Fields.consentLanguage,d=C.Fields.vendorListVersion,h=C.Fields.policyVersion,u=C.Fields.isServiceSpecific,p=C.Fields.useNonStandardStacks,g=C.Fields.specialFeatureOptins,m=C.Fields.purposeConsents,f=C.Fields.purposeLegitimateInterests,y=C.Fields.purposeOneTreatment,b=C.Fields.publisherCountryCode,v=C.Fields.vendorConsents,P=C.Fields.vendorLegitimateInterests,S=C.Fields.publisherRestrictions,I=C.Fields.vendorsDisclosed,T=C.Fields.vendorsAllowed,A=C.Fields.publisherConsents,O=C.Fields.publisherLegitimateInterests,k=C.Fields.numCustomPurposes,i=C.Fields.publisherCustomConsents,C=C.Fields.publisherCustomLegitimateInterests,j[s]=L.IntEncoder,j[r]=x.DateEncoder,j[n]=x.DateEncoder,j[o]=L.IntEncoder,j[a]=L.IntEncoder,j[l]=L.IntEncoder,j[c]=M.LangEncoder,j[d]=L.IntEncoder,j[h]=L.IntEncoder,j[u]=w.BooleanEncoder,j[p]=w.BooleanEncoder,j[g]=E.FixedVectorEncoder,j[m]=E.FixedVectorEncoder,j[f]=E.FixedVectorEncoder,j[y]=w.BooleanEncoder,j[b]=M.LangEncoder,j[v]=B.VendorVectorEncoder,j[P]=B.VendorVectorEncoder,j[S]=R.PurposeRestrictionVectorEncoder,j.segmentType=L.IntEncoder,j[I]=B.VendorVectorEncoder,j[T]=B.VendorVectorEncoder,j[A]=E.FixedVectorEncoder,j[O]=E.FixedVectorEncoder,j[k]=L.IntEncoder,j[i]=E.FixedVectorEncoder,j[C]=E.FixedVectorEncoder,j);function j(){}t.FieldEncoderMap=E},function(e,t,i){"use strict";Object.defineProperty(t,"_",{value:!0});var s=i(37);t.FieldSequence=function(){var e;this[1]=((e={})[s.Segment.CORE]=[s.Fields.version,s.Fields.created,s.Fields.lastUpdated,s.Fields.cmpId,s.Fields.cmpVersion,s.Fields.consentScreen,s.Fields.consentLanguage,s.Fields.vendorListVersion,s.Fields.purposeConsents,s.Fields.vendorConsents],e),this[2]=((e={})[s.Segment.CORE]=[s.Fields.version,s.Fields.created,s.Fields.lastUpdated,s.Fields.cmpId,s.Fields.cmpVersion,s.Fields.consentScreen,s.Fields.consentLanguage,s.Fields.vendorListVersion,s.Fields.policyVersion,s.Fields.isServiceSpecific,s.Fields.useNonStandardStacks,s.Fields.specialFeatureOptins,s.Fields.purposeConsents,s.Fields.purposeLegitimateInterests,s.Fields.purposeOneTreatment,s.Fields.publisherCountryCode,s.Fields.vendorConsents,s.Fields.vendorLegitimateInterests,s.Fields.publisherRestrictions],e[s.Segment.PUBLISHER_TC]=[s.Fields.publisherConsents,s.Fields.publisherLegitimateInterests,s.Fields.numCustomPurposes,s.Fields.publisherCustomConsents,s.Fields.publisherCustomLegitimateInterests],e[s.Segment.VENDORS_ALLOWED]=[s.Fields.vendorsAllowed],e[s.Segment.VENDORS_DISCLOSED]=[s.Fields.vendorsDisclosed],e)}},function(e,t,i){"use strict";Object.defineProperty(t,"_",{value:!0});var s=i(37);t.SegmentSequence=function(e,t){this[1]=[s.Segment.CORE],this[2]=[s.Segment.CORE],2===e.version&&(e.isServiceSpecific?this[2].push(s.Segment.PUBLISHER_TC):((t=!(!t||!t.isForVendors))&&!0!==e[s.Fields.supportOOB]||this[2].push(s.Segment.VENDORS_DISCLOSED),t&&(e[s.Fields.supportOOB]&&0<e[s.Fields.vendorsAllowed].size&&this[2].push(s.Segment.VENDORS_ALLOWED),this[2].push(s.Segment.PUBLISHER_TC))))}},function(e,t,i){"use strict";var P=this&&this.ee||function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],s=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&s>=e.length?void 0:e)&&e[s++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},S=this&&this.ao||function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var s,r,n=i.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(s=n.next()).done;)o.push(s.value)}catch(e){r={error:e}}finally{try{s&&!s.done&&(i=n.return)&&i.call(n)}finally{if(r)throw r.error}}return o};Object.defineProperty(t,"_",{value:!0});var s=i(35),I=i(37),i=(r.process=function(e,t){var i=e.gvl;if(!i)throw new s.EncodingError("Unable to encode TCModel without a GVL");if(!i.isReady)throw new s.EncodingError("Unable to encode TCModel tcModel.gvl.readyPromise is not resolved");(e=e.clone()).consentLanguage=i.language.toUpperCase(),0<(null===t||void 0===t?void 0:t.version)&&(null===t||void 0===t?void 0:t.version)<=this.processor.length?e.version=t.version:e.version=this.processor.length;t=e.version-1;if(!this.processor[t])throw new s.EncodingError("Invalid version: "+e.version);return this.processor[t](e,i)},r.processor=[function(e){return e},function(e,t){var i,s,r,n;e.publisherRestrictions.gvl=t,e.purposeLegitimateInterests.unset(1);var o=new Map;o.set("legIntPurposes",e.vendorLegitimateInterests),o.set("purposes",e.vendorConsents);try{for(var a=P(o),l=a.next();!l.done;l=a.next()){var c=S(l.value,2),d=c[0],h=c[1];try{for(var u=(r=void 0,P(h.values())),p=u.next();!p.done;p=u.next()){var g=p.value,m=t.vendors[g];if(!m||m.deletedDate)h.unset(g);else if(0===m[d].length)if(e.isServiceSpecific)if(0===m.flexiblePurposes.length)h.unset(g);else{for(var f=e.publisherRestrictions.getRestrictions(g),y=!1,b=0,v=f.length;b<v&&!y;b++)y=f[b].restrictionType===I.RestrictionType.REQUIRE_CONSENT&&"purposes"===d||f[b].restrictionType===I.RestrictionType.REQUIRE_LI&&"legIntPurposes"===d;y||h.unset(g)}else h.unset(g)}}catch(e){r={error:e}}finally{try{p&&!p.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}}}catch(e){i={error:e}}finally{try{l&&!l.done&&(s=a.return)&&s.call(a)}finally{if(i)throw i.error}}return e.vendorsDisclosed.set(t.vendors),e}],r);function r(){}t.SemanticPreEncoder=i},function(e,t,i){"use strict";var s,r=this&&this.Bs||(s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"_",{value:!0});var n,o=i(43),a=i(35),l=i(163),c=i(37),r=(n=o.Cloneable,r(d,n),Object.defineProperty(d.prototype,"gvl",{get:function(){return this.gvl_},set:function(e){l.GVL.isInstanceOf(e)||(e=new l.GVL(e)),this.gvl_=e,this.publisherRestrictions.gvl=e},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"cmpId",{get:function(){return this.cmpId_},set:function(e){if(!(Number.isInteger(+e)&&1<e))throw new a.TCModelError("cmpId",e);this.cmpId_=+e},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"cmpVersion",{get:function(){return this.cmpVersion_},set:function(e){if(!(Number.isInteger(+e)&&-1<e))throw new a.TCModelError("cmpVersion",e);this.cmpVersion_=+e},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"consentScreen",{get:function(){return this.consentScreen_},set:function(e){if(!(Number.isInteger(+e)&&-1<e))throw new a.TCModelError("consentScreen",e);this.consentScreen_=+e},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"consentLanguage",{get:function(){return this.consentLanguage_},set:function(e){this.consentLanguage_=e},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"publisherCountryCode",{get:function(){return this.publisherCountryCode_},set:function(e){if(!/^([A-z]){2}$/.test(e))throw new a.TCModelError("publisherCountryCode",e);this.publisherCountryCode_=e.toUpperCase()},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"vendorListVersion",{get:function(){return this.gvl?this.gvl.vendorListVersion:this.vendorListVersion_},set:function(e){if((e=+e>>0)<0)throw new a.TCModelError("vendorListVersion",e);this.vendorListVersion_=e},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"policyVersion",{get:function(){return this.gvl?this.gvl.tcfPolicyVersion:this.policyVersion_},set:function(e){if(this.policyVersion_=parseInt(e,10),this.policyVersion_<0)throw new a.TCModelError("policyVersion",e)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"version",{get:function(){return this.version_},set:function(e){this.version_=parseInt(e,10)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"isServiceSpecific",{get:function(){return this.isServiceSpecific_},set:function(e){this.isServiceSpecific_=e},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"useNonStandardStacks",{get:function(){return this.useNonStandardStacks_},set:function(e){this.useNonStandardStacks_=e},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"supportOOB",{get:function(){return this.supportOOB_},set:function(e){this.supportOOB_=e},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"purposeOneTreatment",{get:function(){return this.purposeOneTreatment_},set:function(e){this.purposeOneTreatment_=e},enumerable:!0,configurable:!0}),d.prototype.setAllVendorConsents=function(){this.vendorConsents.set(this.gvl.vendors)},d.prototype.unsetAllVendorConsents=function(){this.vendorConsents.empty()},d.prototype.setAllVendorsDisclosed=function(){this.vendorsDisclosed.set(this.gvl.vendors)},d.prototype.unsetAllVendorsDisclosed=function(){this.vendorsDisclosed.empty()},d.prototype.setAllVendorsAllowed=function(){this.vendorsAllowed.set(this.gvl.vendors)},d.prototype.unsetAllVendorsAllowed=function(){this.vendorsAllowed.empty()},d.prototype.setAllVendorLegitimateInterests=function(){this.vendorLegitimateInterests.set(this.gvl.vendors)},d.prototype.unsetAllVendorLegitimateInterests=function(){this.vendorLegitimateInterests.empty()},d.prototype.setAllPurposeConsents=function(){this.purposeConsents.set(this.gvl.purposes)},d.prototype.unsetAllPurposeConsents=function(){this.purposeConsents.empty()},d.prototype.setAllPurposeLegitimateInterests=function(){this.purposeLegitimateInterests.set(this.gvl.purposes)},d.prototype.unsetAllPurposeLegitimateInterests=function(){this.purposeLegitimateInterests.empty()},d.prototype.setAllSpecialFeatureOptins=function(){this.specialFeatureOptins.set(this.gvl.specialFeatures)},d.prototype.unsetAllSpecialFeatureOptins=function(){this.specialFeatureOptins.empty()},d.prototype.setAll=function(){this.setAllVendorConsents(),this.setAllPurposeLegitimateInterests(),this.setAllSpecialFeatureOptins(),this.setAllPurposeConsents(),this.setAllVendorLegitimateInterests()},d.prototype.unsetAll=function(){this.unsetAllVendorConsents(),this.unsetAllPurposeLegitimateInterests(),this.unsetAllSpecialFeatureOptins(),this.unsetAllPurposeConsents(),this.unsetAllVendorLegitimateInterests()},Object.defineProperty(d.prototype,"numCustomPurposes",{get:function(){var e,t=this.numCustomPurposes_;return"object"==typeof this.customPurposes&&(e=Object.keys(this.customPurposes).sort(function(e,t){return+e-+t}),t=parseInt(e.pop(),10)),t},set:function(e){if(this.numCustomPurposes_=parseInt(e,10),this.numCustomPurposes_<0)throw new a.TCModelError("numCustomPurposes",e)},enumerable:!0,configurable:!0}),d.prototype.updated=function(){this.lastUpdated=new Date},d.consentLanguages=l.GVL.consentLanguages,d);function d(e){var t=n.call(this)||this;return t.isServiceSpecific_=!1,t.supportOOB_=!0,t.useNonStandardStacks_=!1,t.purposeOneTreatment_=!1,t.publisherCountryCode_="AA",t.version_=2,t.consentScreen_=0,t.policyVersion_=2,t.consentLanguage_="EN",t.cmpId_=0,t.cmpVersion_=0,t.vendorListVersion_=0,t.numCustomPurposes_=0,t.specialFeatureOptins=new c.Vector,t.purposeConsents=new c.Vector,t.purposeLegitimateInterests=new c.Vector,t.publisherConsents=new c.Vector,t.publisherLegitimateInterests=new c.Vector,t.publisherCustomConsents=new c.Vector,t.publisherCustomLegitimateInterests=new c.Vector,t.vendorConsents=new c.Vector,t.vendorLegitimateInterests=new c.Vector,t.vendorsDisclosed=new c.Vector,t.vendorsAllowed=new c.Vector,t.publisherRestrictions=new c.PurposeRestrictionVector,e&&(t.gvl=e),t.created=new Date,t.updated(),t}t.TCModel=r},function(e,t,i){"use strict";var s,r=this&&this.Bs||(s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=this&&this.oo||function(e,o,a,l){return new(a=a||Promise)(function(i,t){function s(e){try{n(l.next(e))}catch(e){t(e)}}function r(e){try{n(l.throw(e))}catch(e){t(e)}}function n(e){var t;e.done?i(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(s,r)}n((l=l.apply(e,o||[])).next())})},a=this&&this.ho||function(i,s){var r,n,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&t[0]?n.return:t[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,t[1])).done)return o;switch(n=0,(t=o?[2&t[0],o.value]:t)[0]){case 0:case 1:o=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,n=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(o=0<(o=a.trys).length&&o[o.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){a.label=t[1];break}if(6===t[0]&&a.label<o[1]){a.label=o[1],o=t;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(t);break}o[2]&&a.ops.pop(),a.trys.pop();continue}t=s.call(i,a)}catch(e){t=[6,e],n=0}finally{r=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(t,"_",{value:!0});var n,l=i(43),c=i(35),d=i(164),i=i(37),i=(n=l.Cloneable,r(h,n),Object.defineProperty(h,"baseUrl",{get:function(){return this.baseUrl_},set:function(e){if(/^https?:\/\/vendorlist\.consensu\.org\//.test(e))throw new c.GVLError("Invalid baseUrl!  You may not pull directly from vendorlist.consensu.org and must provide your own cache");0<e.length&&"/"!==e[e.length-1]&&(e+="/"),this.baseUrl_=e},enumerable:!0,configurable:!0}),h.emptyLanguageCache=function(e){var t=!1;return void 0===e&&0<h.LANGUAGE_CACHE.size?(h.LANGUAGE_CACHE=new Map,t=!0):"string"==typeof e&&this.consentLanguages.has(e.toUpperCase())&&(h.LANGUAGE_CACHE.delete(e.toUpperCase()),t=!0),t},h.emptyCache=function(e){var t=!1;return Number.isInteger(e)&&0<=e?(h.CACHE.delete(e),t=!0):void 0===e&&(h.CACHE=new Map,t=!0),t},h.prototype.cacheLanguage=function(){h.LANGUAGE_CACHE.has(this.lang_)||h.LANGUAGE_CACHE.set(this.lang_,{purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks})},h.prototype.fetchJson=function(s){return o(this,void 0,void 0,function(){var t,i;return a(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),t=this.populate,[4,d.Json.fetch(s)];case 1:return t.apply(this,[e.sent()]),[3,3];case 2:throw i=e.sent(),new c.GVLError(i.message);case 3:return[2]}})})},h.prototype.getJson=function(){return JSON.parse(JSON.stringify({gvlSpecificationVersion:this.gvlSpecificationVersion,vendorListVersion:this.vendorListVersion,tcfPolicyVersion:this.tcfPolicyVersion,lastUpdated:this.lastUpdated,purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks,vendors:this.fullVendorList}))},h.prototype.changeLanguage=function(n){return o(this,void 0,void 0,function(){var t,i,s,r;return a(this,function(e){switch(e.label){case 0:if(r=n.toUpperCase(),!h.consentLanguages.has(r))return[3,6];if(r===this.lang_)return[3,5];if(this.lang_=r,!h.LANGUAGE_CACHE.has(r))return[3,1];for(i in t=h.LANGUAGE_CACHE.get(r))t.hasOwnProperty(i)&&(this[i]=t[i]);return[3,5];case 1:s=h.baseUrl+h.languageFilename.replace("[LANG]",n),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,this.fetchJson(s)];case 3:return e.sent(),this.cacheLanguage(),[3,5];case 4:throw r=e.sent(),new c.GVLError("unable to load language: "+r.message);case 5:return[3,7];case 6:throw new c.GVLError("unsupported language "+n);case 7:return[2]}})})},Object.defineProperty(h.prototype,"language",{get:function(){return this.lang_},enumerable:!0,configurable:!0}),h.prototype.isVendorList=function(e){return void 0!==e&&void 0!==e.vendors},h.prototype.populate=function(e){this.purposes=e.purposes,this.specialPurposes=e.specialPurposes,this.features=e.features,this.specialFeatures=e.specialFeatures,this.stacks=e.stacks,this.isVendorList(e)&&(this.gvlSpecificationVersion=e.gvlSpecificationVersion,this.tcfPolicyVersion=e.tcfPolicyVersion,this.vendorListVersion=e.vendorListVersion,this.lastUpdated=e.lastUpdated,"string"==typeof this.lastUpdated&&(this.lastUpdated=new Date(this.lastUpdated)),this.vendors_=e.vendors,this.fullVendorList=e.vendors,this.mapVendors(),this.isReady_=!0,this.isLatest&&h.CACHE.set(h.LATEST_CACHE_KEY,this.getJson()),h.CACHE.has(this.vendorListVersion)||h.CACHE.set(this.vendorListVersion,this.getJson())),this.cacheLanguage()},h.prototype.mapVendors=function(e){var s=this;this.byPurposeVendorMap={},this.bySpecialPurposeVendorMap={},this.byFeatureVendorMap={},this.bySpecialFeatureVendorMap={},Object.keys(this.purposes).forEach(function(e){s.byPurposeVendorMap[e]={legInt:new Set,consent:new Set,flexible:new Set}}),Object.keys(this.specialPurposes).forEach(function(e){s.bySpecialPurposeVendorMap[e]=new Set}),Object.keys(this.features).forEach(function(e){s.byFeatureVendorMap[e]=new Set}),Object.keys(this.specialFeatures).forEach(function(e){s.bySpecialFeatureVendorMap[e]=new Set}),Array.isArray(e)||(e=Object.keys(this.fullVendorList).map(function(e){return+e})),this.vendorIds=new Set(e),this.vendors_=e.reduce(function(e,t){var i=s.vendors_[""+t];return i&&void 0===i.deletedDate&&(i.purposes.forEach(function(e){s.byPurposeVendorMap[e+""].consent.add(t)}),i.specialPurposes.forEach(function(e){s.bySpecialPurposeVendorMap[e+""].add(t)}),i.legIntPurposes.forEach(function(e){s.byPurposeVendorMap[e+""].legInt.add(t)}),i.flexiblePurposes&&i.flexiblePurposes.forEach(function(e){s.byPurposeVendorMap[e+""].flexible.add(t)}),i.features.forEach(function(e){s.byFeatureVendorMap[e+""].add(t)}),i.specialFeatures.forEach(function(e){s.bySpecialFeatureVendorMap[e+""].add(t)}),e[t]=i),e},{})},h.prototype.getFilteredVendors=function(e,t,i,s){var r=this,n=e.charAt(0).toUpperCase()+e.slice(1),o={};return("purpose"===e&&i?this["by"+n+"VendorMap"][t+""][i]:this["by"+(s?"Special":"")+n+"VendorMap"][t+""]).forEach(function(e){o[e+""]=r.vendors[e+""]}),o},h.prototype.getVendorsWithConsentPurpose=function(e){return this.getFilteredVendors("purpose",e,"consent")},h.prototype.getVendorsWithLegIntPurpose=function(e){return this.getFilteredVendors("purpose",e,"legInt")},h.prototype.getVendorsWithFlexiblePurpose=function(e){return this.getFilteredVendors("purpose",e,"flexible")},h.prototype.getVendorsWithSpecialPurpose=function(e){return this.getFilteredVendors("purpose",e,void 0,!0)},h.prototype.getVendorsWithFeature=function(e){return this.getFilteredVendors("feature",e)},h.prototype.getVendorsWithSpecialFeature=function(e){return this.getFilteredVendors("feature",e,void 0,!0)},Object.defineProperty(h.prototype,"vendors",{get:function(){return this.vendors_},enumerable:!0,configurable:!0}),h.prototype.narrowVendorsTo=function(e){this.mapVendors(e)},Object.defineProperty(h.prototype,"isReady",{get:function(){return this.isReady_},enumerable:!0,configurable:!0}),h.prototype.clone=function(){return new h(this.getJson())},h.isInstanceOf=function(e){return"object"==typeof e&&"function"==typeof e.narrowVendorsTo},h.LANGUAGE_CACHE=new Map,h.CACHE=new Map,h.LATEST_CACHE_KEY=0,h.DEFAULT_LANGUAGE="EN",h.consentLanguages=new i.ConsentLanguages,h.latestFilename="vendor-list.json",h.versionedFilename="archives/vendor-list-v[VERSION].json",h.languageFilename="purposes-[LANG].json",h);function h(e){var t=n.call(this)||this;t.isReady_=!1,t.isLatest=!1;var i=h.baseUrl;if(t.lang_=h.DEFAULT_LANGUAGE,t.isVendorList(e))t.populate(e),t.readyPromise=Promise.resolve();else{if(!i)throw new c.GVLError("must specify GVL.baseUrl before loading GVL json");0<e?h.CACHE.has(e=e)?(t.populate(h.CACHE.get(e)),t.readyPromise=Promise.resolve()):(i+=h.versionedFilename.replace("[VERSION]",e+""),t.readyPromise=t.fetchJson(i)):h.CACHE.has(h.LATEST_CACHE_KEY)?(t.populate(h.CACHE.get(h.LATEST_CACHE_KEY)),t.readyPromise=Promise.resolve()):(t.isLatest=!0,t.readyPromise=t.fetchJson(i+h.latestFilename))}return t}t.GVL=i},function(e,t,i){"use strict";Object.defineProperty(t,"_",{value:!0});var s=(r.absCall=function(e,r,n,o){return new Promise(function(t,i){var s=new XMLHttpRequest;s.withCredentials=n,s.addEventListener("load",function(){if(s.readyState==XMLHttpRequest.DONE)if(200<=s.status&&s.status<300){var e=s.response;if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}t(e)}else i(new Error("HTTP Status: "+s.status+" response type: "+s.responseType))}),s.addEventListener("error",function(){i(new Error("error"))}),s.addEventListener("abort",function(){i(new Error("aborted"))}),null===r?s.open("GET",e,!0):s.open("POST",e,!0),s.responseType="json",s.timeout=o,s.ontimeout=function(){i(new Error("Timeout "+o+"ms "+e))},s.send(r)})},r.post=function(e,t,i,s){return void 0===i&&(i=!1),void 0===s&&(s=0),this.absCall(e,JSON.stringify(t),i,s)},r.fetch=function(e,t,i){return this.absCall(e,null,t=void 0===t?!1:t,i=void 0===i?0:i)},r);function r(){}t.Json=s},function(e,t,i){"use strict";var i=i(166),y=i.decodeBitsToIds,b=i.decodeFromBase64;e.exports={decodeConsentString:function(e){var t=b(e),i=t.version,s=t.cmpId,r=t.vendorListVersion,n=t.purposeIdBitString,o=t.maxVendorId,a=t.created,l=t.lastUpdated,c=t.isRange,d=t.defaultConsent,h=t.vendorIdBitString,u=t.vendorRangeList,p=t.cmpVersion,e=t.consentScreen,t=t.consentLanguage,g={version:i,cmpId:s,vendorListVersion:r,allowedPurposeIds:y(n),maxVendorId:o,created:a,lastUpdated:l,cmpVersion:p,consentScreen:e,consentLanguage:t};if(c){var m=u.reduce(function(e,t){for(var i=t.isRange,s=t.startVendorId,t=t.endVendorId,r=i?t:s,n=s;n<=r;n+=1)e[n]=!0;return e},{});g.allowedVendorIds=[];for(var f=1;f<=o;f+=1)(d&&!m[f]||!d&&m[f])&&-1===g.allowedVendorIds.indexOf(f)&&g.allowedVendorIds.push(f)}else g.allowedVendorIds=y(h);return g}}},function(e,t,i){"use strict";var l=i(167),i=i(169),c=i.versionNumBits,d=i.vendorVersionMap;function u(e,t,i){return parseInt(e.substr(t,i),2)}function p(e){e=u(e);return String.fromCharCode(e+65).toLowerCase()}function a(e){var t=e.input,c=e.output,i=e.startPosition,s=e.field,r=s.type,n=s.numBits,o=s.decoder,e=s.validator,a=s.listCount;if("function"==typeof e&&!e(c))return{newPosition:i};if("function"==typeof o)return o(t,c,i);var l,d,h="function"==typeof n?n(c):n;switch(r){case"int":return{fieldValue:u(t,i,h)};case"bool":return{fieldValue:1===parseInt(t.substr(i,1),2)};case"date":return{fieldValue:new Date(100*u(t,i,h))};case"bits":return{fieldValue:t.substr(i,h)};case"list":return function(e,t,i,s){var r=0;"function"==typeof s?r=s(c):"number"==typeof s&&(r=s);for(var n=t,o=[],a=0;a<r;a+=1){var l=g({input:e,fields:i.fields,startPosition:n}),n=l.newPosition;o.push(l.decodedObject)}return{fieldValue:o,newPosition:n}}(t,i,s,a);case"language":return{fieldValue:(l=i,d=h,p((l=t.substr(l,d)).slice(0,d/2))+p(l.slice(d/2)))};default:throw new Error("ConsentString - Unknown field type "+r+" for decoding")}}function g(e){var n=e.input,t=e.fields,e=e.startPosition,o=void 0===e?0:e;return{decodedObject:t.reduce(function(e,t){var i=t.name,s=t.numBits,r=a({input:n,output:e,startPosition:o,field:t}),t=r.fieldValue,r=r.newPosition;return void 0!==t&&(e[i]=t),void 0!==r?o=r:"number"==typeof s&&(o+=s),e},{}),newPosition:o}}e.exports={decodeBitsToIds:function(e){return e.split("").reduce(function(e,t,i){return"1"===t&&-1===e.indexOf(i+1)&&e.push(i+1),e},[])},decodeFromBase64:function(e,t){for(var i=e;i.length%4!=0;)i+="=";for(var s,i=i.replace(/-/g,"+").replace(/_/g,"/"),r=l.decode(i),n="",o=0;o<r.length;o+=1){var a=r.charCodeAt(o).toString(2);n+=(a=8-(s=a).length,function(e,t){for(var i=1<arguments.length&&void 0!==t?t:"0",s="",r=0;r<e;r+=1)s+=i;return s}(Math.max(0,a))+s)}return function(e,t){var i=1<arguments.length&&void 0!==t?t:d,t=u(e,0,c);if("number"!=typeof t)throw new Error("ConsentString - Unknown version number in the string to decode");if(!d[t])throw new Error("ConsentString - Unsupported version "+t+" in the string to decode");return g({input:e,fields:i[t].fields}).decodedObject}(n,t)}}},function(e,o,l){!function(s,r){var n;!function(){var e=(s&&s.exports,"object"==typeof r&&r);e.global!==e&&e.window;function t(e){this.message=e}(t.prototype=new Error).name="InvalidCharacterError";function c(e){throw new t(e)}var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=/[\t\n\f\r ]/g,i={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&c("The string to be encoded contains characters outside of the Latin1 range.");for(var t,i,s,r,n=e.length%3,o="",a=-1,l=e.length-n;++a<l;)t=e.charCodeAt(a)<<16,i=e.charCodeAt(++a)<<8,s=e.charCodeAt(++a),o+=d.charAt((r=t+i+s)>>18&63)+d.charAt(r>>12&63)+d.charAt(r>>6&63)+d.charAt(63&r);return 2==n?(t=e.charCodeAt(a)<<8,i=e.charCodeAt(++a),o+=d.charAt((r=t+i)>>10)+d.charAt(r>>4&63)+d.charAt(r<<2&63)+"="):1==n&&(r=e.charCodeAt(a),o+=d.charAt(r>>2)+d.charAt(r<<4&63)+"=="),o},decode:function(e){var t=(e=String(e).replace(a,"")).length;(t=t%4==0?(e=e.replace(/==?$/,"")).length:t)%4!=1&&!/[^+a-zA-Z0-9\/]/.test(e)||c("Invalid character: the string to be decoded is not correctly encoded.");for(var i,s,r=0,n="",o=-1;++o<t;)s=d.indexOf(e.charAt(o)),i=r%4?64*i+s:s,r++%4&&(n+=String.fromCharCode(255&i>>(-2*r&6)));return n},version:"0.1.0"};void 0===(n=function(){return i}.call(o,l,o,s))||(s.exports=n)}()}.call(this,l(168)(e),l(69))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,i){"use strict";e.exports={versionNumBits:6,vendorVersionMap:{1:{version:1,metadataFields:["version","created","lastUpdated","cmpId","cmpVersion","consentScreen","vendorListVersion"],fields:[{name:"version",type:"int",numBits:6},{name:"created",type:"date",numBits:36},{name:"lastUpdated",type:"date",numBits:36},{name:"cmpId",type:"int",numBits:12},{name:"cmpVersion",type:"int",numBits:12},{name:"consentScreen",type:"int",numBits:6},{name:"consentLanguage",type:"language",numBits:12},{name:"vendorListVersion",type:"int",numBits:12},{name:"purposeIdBitString",type:"bits",numBits:24},{name:"maxVendorId",type:"int",numBits:16},{name:"isRange",type:"bool",numBits:1},{name:"vendorIdBitString",type:"bits",numBits:function(e){return e.maxVendorId},validator:function(e){return!e.isRange}},{name:"defaultConsent",type:"bool",numBits:1,validator:function(e){return e.isRange}},{name:"numEntries",numBits:12,type:"int",validator:function(e){return e.isRange}},{name:"vendorRangeList",type:"list",listCount:function(e){return e.numEntries},validator:function(e){return e.isRange},fields:[{name:"isRange",type:"bool",numBits:1},{name:"startVendorId",type:"int",numBits:16},{name:"endVendorId",type:"int",numBits:16,validator:function(e){return e.isRange}}]}]}}}},function(e,t){String.prototype.cnx_replaceAll=function(e,t){return this.split(e).join(t)}},function(e,t,i){"use strict";i.r(t);var s,g=i(5),m=i(50),f=(i(170),i(0)),r=i(86),n=i(19),o=i(21),c=i(32),p=i(6),l=i(3),a=i(38);(kt=s=s||{}).Deprecation="deprecation",kt.Intervention="intervention",kt.Crash="crash";class d{constructor(e,t,i){this.de=e,this.co=t,this.uo=i,this.do=!1,this.fo=()=>{"hidden"===this.de.document.visibilityState&&this.po()},this.po=()=>{var e;!this.do&&this.bo&&(e=this.bo.takeRecords(),this.vo(e),this.do=!0)},this.vo=e=>{e.filter(({body:e})=>{return"HeavyAdIntervention"===(null===e||void 0===e?void 0:e.id)}).forEach(()=>{this.co.trackHeavyAdIntervention(this.uo)})},this.mo()&&this.gs()}destroy(){this.de.removeEventListener("pagehide",this.po),this.de.removeEventListener("visibilitychange",this.fo)}mo(){return!!this.de.ReportingObserver}gs(){this.bo=new this.de.ReportingObserver(e=>{this.vo(e)},{buffered:!0,types:[s.Intervention]}),this.bo.observe(),this.de.addEventListener("pagehide",this.po),this.de.addEventListener("visibilitychange",this.fo)}}class h extends n.a{constructor(e,t,i,s,r,n){super(),this.mediator=e,this.playerModel=t,this.app=i,this.Ws=s,this.yo=r,this._appSettings=n,this.macroElements={player:[]},this.wo=!1,this.xo={description:"{{description}}",title:"{{title}}",player:"{{player}}"},this.So=null,this.Oo=500,this.createExperience(t,n),this.ko=new d(t.global,this.app.services.TrackingService,{heavyAdBlockTypeEnum:f.ProtoHeavyAdBlockTypeEnum.Global}),this._o=new d(window,this.app.services.TrackingService,{heavyAdBlockTypeEnum:f.ProtoHeavyAdBlockTypeEnum.Script})}subscribeToEvents(){this.subscribe(o.b.Destroy,this.experience,()=>{this.destroy()}),this.subscribe(o.b.CanStart,this.experience,()=>{this.experience.start()}),this.subscribe(o.c.SessionRendered,this.experience,()=>{this.yo.wasPlayerReloaded||this.app.services.TrackingService.trackSessionRendered(this.Ws),this.mediator.publish(this,o.c.SessionRendered)}),this.subscribe(o.c.SessionView,this.experience,()=>{this.yo.wasPlayerInView||(this.app.services.TrackingService.trackSessionViewability(),this.mediator.publish(this,o.c.SessionView))}),Object(c.a)(this.experience.events).forEach(t=>{this.subscribe(t,this.experience,e=>{this.experienceApi.trigger(t,e.payload)})})}updateMacroContent(e,t){e&&e.forEach(e=>{e.textContent=t})}Pn(){this.playerModel.css&&this.app.services.GlobalDomUtilsService.addCssString(this.playerModel.css,`cnx-custom-css-${this.app.config.appId}`)}jo(e){return`<cnx>${e}</cnx>`.replace(/{\{([^}]+)}}/g,"<cnx-span>$&</cnx-span>")}Ao(){if(this.experienceContainer=this.Io(),this.playerModel.html){var e=this.app.services.GlobalDomUtilsService.createElementByString(this.jo(this.playerModel.html));this.Co(e);const t=this.macroElements.player[0];if(!t)throw Error("player macro was not found");t.innerHTML="",t.parentNode.insertBefore(this.experienceContainer,t),t.parentNode.removeChild(t),Object(p.c)(e.children).forEach(e=>{this.playerModel.targetContainer.parentNode.insertBefore(e,this.playerModel.targetContainer)})}else this.playerModel.targetContainer.parentNode.insertBefore(this.experienceContainer,this.playerModel.targetContainer);this.playerModel.targetContainer.parentElement.removeChild(this.playerModel.targetContainer)}Io(){var e=this.app.config.isMobile?l.g.Mobile:l.g.Desktop;return this.app.services.GlobalDomUtilsService.createElementByString(`<cnx class="${l.b.MainContainer} ${e} ${this.To}"></cnx>`)}Co(e){Object(p.c)(e.children).forEach(i=>{0<i.children.length&&this.Co(i),Object.keys(this.xo).forEach(e=>{var t=this.xo[e];-1<i.textContent.indexOf(t)&&this.Po(e,i)})})}Po(e,t){this.macroElements[e]||(this.macroElements[e]=[]),this.macroElements[e].push(t),t.textContent=""}Mo(){null!==this.So&&(clearInterval(this.So),this.So=null)}init(){this.Pn(),this.Ao();var e=this.app.config.device;return this.isSupportedBreakpoint(e)?(this.subscribeToEvents(),this.experience.Eo(this.playerModel,this.app,this.experienceContainer),this.So=setInterval(()=>{this.wo?this.Mo():this.app.services.GlobalDomUtilsService.isDetachedFromDOM(this.experienceContainer)&&(this.destroy(),Object(g.a)({message:"player_removed_from_DOM",level:f.ProtoLoggingLevelEnum.INFO}))},this.Oo),!0):(this.destroy(),!1)}getApiMethods(){return this.experienceApi.getApiMethods()}get playerContainer(){return this.experienceContainer}destroy(){try{a.a.playerDestroyed(),this.wo=!0,this.Mo(),this.app.services.TrackingService.destroy(),this.app.services.ResizeObserver.destroy(),this.app.services.ViewabilityService.destroy(),this.app.services.InteractionService.destroy(),this.experienceApi.setDestroyed(),this.unsubscribeAll(this.experience),this.experience&&(this.experience.destroy(),this.experience=null),this.experienceContainer.parentNode&&this.experienceContainer.parentNode.removeChild(this.experienceContainer),this.ko.destroy(),this._o.destroy()}catch(e){Object(g.a)({callStack:e.stack,level:f.ProtoLoggingLevelEnum.WARNING,message:"Renderer_destroy",exception:e.message})}}}var u,y,b,v=i(4);(t=u=u||{}).EnterStart="enterStart",t.EnterStop="enterStop",t.ExitStart="exitStart",t.ExitStop="exitStop",(kt=y=y||{})[kt.DirectionIn=0]="DirectionIn",kt[kt.DirectionOut=1]="DirectionOut",kt[kt.FadeIn=2]="FadeIn",(t=b=b||{}).Float="float",t.Embed="embed";var P,S=i(2);class I{constructor(e,t,i,s,r,n=0){this.Lo=e,this.Jn=t,this.Ro=i,this.Bo=s,this.Os=r,this.Do=n,this.Fo=0,this.$o=void 0,this.Uo=null,this.Vo=!1,this.No=500,this.Ho=()=>{this.$o&&this.qo()},this.zo=()=>{this.Jn.width=this.Wo.clientWidth,this.Go(),this.$o&&this.Jo(!1)},this.Go=()=>{this.Qo()?!this.Xo||this.$o||this.Vo?this.Yo():this.Ko():this.$o&&this.Zo()},this.tc=e=>{if(this.ic(e.propertyName))switch(this.transitionState){case y.DirectionIn:this.transitionState=void 0,this.ec();break;case y.DirectionOut:this.transitionState=void 0,this.sc();break;case y.FadeIn:this.transitionState=void 0,this.nc()}},this.rc()}get transitionState(){return this.hc}set transitionState(e){this.hc===y.FadeIn&&this.ac(l.n.FadeInBase,l.n.FadeIn),this.hc=e}oc(...e){Object(S.a)(this.Ro,...e)}ac(...e){Object(S.L)(this.Ro,...e)}Yo(){this.Bo!==f.ProtoDeviceType.Smartphone&&(this.Ro.style.width=`${this.Jn.width}px`);var e=this.Ro.getBoundingClientRect().width;this.Ro.style.height=this.Jn.getHeight(e)}uc(){return Object(p.g)(this.Bo,this.Jn.floatingDeviceMode)}lc(){this.Os.addEventListenerOnGlobal("scroll",this.Ho)}qo(){this.Wo&&(this.dc(),this.fc<this.Jn.floatingGutterY?this.pc(this.Jn.floatingGutterY):this.pc(this.fc))}bc(){this.Wo=this.Os.querySelector(this.Jn.pageElement),this.Wo&&(clearInterval(this.Uo),this.Jn.width=this.Wo.clientWidth,this.Go(),this.Lo.on(this.Wo,this.zo),this.Lo.on(this.Os.getGlobalClosestTop().topFrame.document.body,this.zo))}dc(){switch(this.Jn.appendLocation){case f.ProtoFloatingAppendLocationEnum.Above:this.fc=this.Wo.getBoundingClientRect().top-this.Ro.offsetHeight-this.Jn.floatingYAxisPadding;break;case f.ProtoFloatingAppendLocationEnum.Below:this.fc=this.Wo.getBoundingClientRect().top+this.Wo.offsetHeight+this.Jn.floatingYAxisPadding;break;case f.ProtoFloatingAppendLocationEnum.Within:this.fc=this.Wo.getBoundingClientRect().top}}vc(){this.Uo=setInterval(()=>{this.bc()},this.No),this.bc()}mc(){return this.Jn.floatingPosition===f.ProtoFloatingFixedPositionMode.Element}ic(e){switch(this.transitionState){case y.DirectionIn:case y.DirectionOut:if("right"===e||"left"===e)return!0;break;case y.FadeIn:if("opacity"===e)return!0}return!1}gc(){this.Ro.style.top="",this.Ro.style.bottom="",this.Ro.style.left="",this.Ro.style.right="",this.Ro.style.width="",this.Ro.style.height="",this.Ro.style.transform=""}sc(){this.$o=!1,this.ac(l.o.MainClass,l.o.TransitionClass,this.Jn.positionClass),this.gc(),this.yc()}wc(){this.Jn.isPositionedTop?(this.Ro.style.top=`${this.Jn.floatingGutterY}px`,this.Ro.style.bottom="auto"):this.Jn.isPositionedBottom&&(this.Ro.style.top="auto",this.Ro.style.bottom=`${this.Jn.floatingGutterY}px`)}pc(e){this.Ro.style.transform=`translateY(${e}px)`}xc(e){e?this.oc(l.o.TransitionClass):this.ac(l.o.TransitionClass)}Sc(e,t=!1,i=!1){this.xc(t),i||this.Jn.isPositionedLeft?(this.Ro.style.left=`${e}px`,this.Ro.style.right="auto"):(this.Ro.style.left="auto",this.Ro.style.right=`${e}px`)}Qo(){return Object(S.t)(this.Ro).document.body.getBoundingClientRect().width>=this.Do}Ko(){!this.Qo()||this.mc()&&(!this.Wo||this.Wo&&0===this.Wo.clientWidth)||(this.$o=!0,this.transitionState=y.DirectionIn,this.oc(l.o.MainClass,this.Jn.positionClass),this.Go(),this.mc()?(this.Ro.style.top="0px",this.Oc(),this.Sc(this.Fo,!1,!0),this.qo()):(this.wc(),this.Sc(this.Fo)),this.kc(),Object(S.i)(this.Ro),this.Wo?this.Jo(!0):this.Sc(this.Jn.floatingGutterX,!0))}Oc(){this.Wo&&(this.Os.getElementCoordinates(this.Wo).clientX<this.Os.getBodyDimensions().width/2?(this.Jn.isPositionedLeft=!0,this.Jn.isPositionedRight=!1):(this.Jn.isPositionedLeft=!1,this.Jn.isPositionedRight=!0),this.rc())}rc(){this.mc()&&this.Jn.isPositionedRight?this.Fo=this.Os.getBodyDimensions().width+(this.Jn.floatingWidth||1e3)+20:this.Fo=-((this.Jn.floatingWidth||1e3)+20)}Jo(e){let t;this.Oc(),t=this.Os.getElementCoordinates(this.Wo).clientX,this.Jn.isPositionedLeft?t+=this.Jn.floatingGutterX:t-=this.Jn.floatingGutterX,this.Sc(t,e,!0)}Zo(e=!0){var t;e&&(this.transitionState=y.DirectionOut),this._c(),t=this.mc(),this.Sc(this.Fo,e,t),e||this.sc()}jc(){this.Ro.addEventListener("transitionend",this.tc),this.Lo.on(this.Ro,this.Go),this.mc()&&(this.vc(),this.lc())}Ac(){this.Lo.off(this.Ro,this.Go),this.Ro.removeEventListener("transitionend",this.tc),this.Wo&&(this.Lo.off(this.Wo,this.zo),this.Lo.off(this.Os.getGlobalClosestTop().topFrame.document.body,this.zo),this.Os.removeEventListenerOnGlobal("scroll",this.Ho),clearInterval(this.Uo))}get isInFloating(){return this.$o}}class T extends I{constructor(e,t,i,s,r,n,o,a=0){super(i,r,s,n,o,a),this.mediator=e,this.Ic=t,this.Cc=!0,this.Tc=!0,this.Pc=!1,this.Xo=!1,this.Mc=e=>{var t=this.Ic.getIsTabInFocus();e&&this.isInFloating&&(this.Xo=!1,this.Zo()),this.Cc&&this.Jn.floatingMode===f.ProtoPlayerFloatingMode.AfterInView&&e&&(this.Cc=!1),!e&&!this.Cc&&this.Tc&&t&&(this.Xo=!0,super.Ko())},this.Yo=()=>{this.isInFloating&&super.Yo()}}Zo(){var e=!this.Pc;super.Zo(e)}_c(){this.mediator.publish(this,u.ExitStart)}yc(){this.Ec()}kc(){this.mediator.publish(this,u.EnterStart)}Ec(){this.transitionState=y.FadeIn,this.ac(l.n.FadeIn),this.oc(l.n.FadeInBase),Object(S.i)(this.Ro),this.oc(l.n.FadeIn)}ec(){this.mediator.publish(this,u.EnterStop)}nc(){this.ac(l.n.FadeInBase,l.n.FadeIn),this.mediator.publish(this,u.ExitStop),this.Vo&&super.Ac()}Lc(){this.Ic.on(this.Ro.parentElement,this.Mc,{threshold:.5})}Rc(){this.Ic.off(this.Ro.parentElement,this.Mc)}start(){this.uc()&&(super.jc(),this.Jn.floatingMode===f.ProtoPlayerFloatingMode.OnPageLoad&&(this.Cc=!1),this.Lc(),this.Mc(this.Ic.check({element:this.Ro.parentElement,threshold:.5})))}canFloat(){return this.uc()&&this.Jn.floatingMode!==f.ProtoPlayerFloatingMode.Off}destroy(){this.isInFloating?(this.sc(),this.Vo=!0):super.Ac(),this.Rc()}get enabled(){return this.Tc}set enabled(e){this.Tc=e}fullscreenStateChange(e){(this.Pc=e)?this.Rc():this.Lc(),this.Mc(e)}}(kt=P=P||{})[kt.Play=0]="Play",kt[kt.Pause=1]="Pause",kt[kt.Replay=2]="Replay",kt[kt.Volume=3]="Volume",kt[kt.Mute=4]="Mute",kt[kt.Unmute=5]="Unmute",kt[kt.Seek=6]="Seek",kt[kt.DraggingStart=7]="DraggingStart",kt[kt.DraggingStopped=8]="DraggingStopped",kt[kt.SeekingStart=9]="SeekingStart",kt[kt.SeekingStopped=10]="SeekingStopped",kt[kt.Expand=11]="Expand",kt[kt.Collapse=12]="Collapse",kt[kt.Quality=13]="Quality",kt[kt.Close=14]="Close",kt[kt.Next=15]="Next",kt[kt.Prev=16]="Prev",kt[kt.Settings=17]="Settings",kt[kt.CaptionOn=18]="CaptionOn",kt[kt.CaptionOff=19]="CaptionOff",kt[kt.CaptionUpdate=20]="CaptionUpdate",kt[kt.VolumeHoverStart=21]="VolumeHoverStart",kt[kt.VolumeHoverStopped=22]="VolumeHoverStopped",kt[kt.OverlayClick=23]="OverlayClick",kt[kt.UIHideStart=24]="UIHideStart",kt[kt.UIShowStart=25]="UIShowStart",kt[kt.UIEndShowHide=26]="UIEndShowHide",kt[kt.AboutClick=27]="AboutClick",kt[kt.ContextClick=28]="ContextClick",kt[kt.SettingsMenu=29]="SettingsMenu",kt[kt.HoverStart=30]="HoverStart",kt[kt.HoverEnd=31]="HoverEnd",kt[kt.StateChanged=32]="StateChanged",kt[kt.RebindComponent=33]="RebindComponent",kt[kt.SkipAd=34]="SkipAd",kt[kt.LogoClicked=35]="LogoClicked",kt[kt.ContextMenuOpen=36]="ContextMenuOpen",kt[kt.ContextMenuClose=37]="ContextMenuClose";var A=i(1),O=i(16);class k extends I{constructor(e,t,i,s,r,n,o=0){super(t,s,i,r,n,o),this.mediator=e,this.Xo=!0}kc(){}ec(){this.mediator.publish(this,u.EnterStop)}_c(){}yc(){}nc(){}start(){this.uc()&&(super.jc(),super.Ko())}}const C={DetachedFromDom:"detachedFromDom",AdSlotResized:"adSlotResized"},w={DetachedFromDom:"detachedFromDom",AdsEnabled:"adsEnabled"};class x{constructor(e,t,i,s){this.Ro=e,this.Bc=s,this.Dc=this.Fc(i,t)}Fc(e,t){return Object.assign({},e[t]||e[f.ProtoDeviceType.Smartphone])}updateWidth(e){e=this.$c(e);e!==this.currentBreakpointClass&&(Object(S.L)(this.Ro,this.currentBreakpointClass),Object(S.a)(this.Ro,e),this.currentBreakpointClass=e)}$c(e){switch(!0){case e>=this.Dc.xxl:return this.Bc.Xxl;case e>=this.Dc.xl:return this.Bc.Xl;case e>=this.Dc.lg:return this.Bc.Lg;case e>=this.Dc.md:return this.Bc.Md;case e>=this.Dc.sm:return this.Bc.Sm;case e>=this.Dc.xs:return this.Bc.Xs;default:return this.Bc.Xxs}}}var E=i(26);const L={MidRollCapped:"midRollCapped",TotalAdBreakLengthExpired:"totalAdBreakLengthExpired",EnableAds:"enableAds",DisableAds:"disableAds",ForceStopAdSlot:"ForceStopAdSlot",ForceStopAdPod:"ForceStopAdPod",AdOpportunity:"adOpportunity",AdPodRemainingTime:"AdPodRemainingTime"};var M,R=i(28),B=i(11);(t=M=M||{})[t.FirstQuartile=0]="FirstQuartile",t[t.SecondQuartile=1]="SecondQuartile",t[t.ThirdQuartile=2]="ThirdQuartile",t[t.FourthQuartile=3]="FourthQuartile";var j=function(e,t){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};function D(e,t){function i(){this.constructor=e}j(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}function _(e){return"function"==typeof e}var F=!1,U={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack,F=e},get useDeprecatedSynchronousErrorHandling(){return F}};function N(e){setTimeout(function(){throw e},0)}var V={closed:!0,next:function(e){},error:function(e){if(U.useDeprecatedSynchronousErrorHandling)throw e;N(e)},complete:function(){}},H=Array.isArray||function(e){return e&&"number"==typeof e.length};function q(e){return null!==e&&"object"==typeof e}var W=(z.prototype=Object.create(Error.prototype),z),$=(G.prototype.unsubscribe=function(){var t;if(!this.closed){var e=this.Uc,i=this.Nc,s=this.oh,r=this.Vc;if(this.closed=!0,this.Uc=null,this.Vc=null,e instanceof G)e.remove(this);else if(null!==e)for(var n=0;n<e.length;++n)e[n].remove(this);if(_(s)){i&&(this.oh=void 0);try{s.call(this)}catch(e){t=e instanceof W?J(e.errors):[e]}}if(H(r))for(var n=-1,o=r.length;++n<o;){var a=r[n];if(q(a))try{a.unsubscribe()}catch(e){t=t||[],e instanceof W?t=t.concat(J(e.errors)):t.push(e)}}if(t)throw new W(t)}},G.prototype.add=function(e){var t,i=e;if(!e)return G.EMPTY;switch(typeof e){case"function":i=new G(e);case"object":if(i===this||i.closed||"function"!=typeof i.unsubscribe)return i;if(this.closed)return i.unsubscribe(),i;i instanceof G||(t=i,(i=new G).Vc=[t]);break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var s=i.Uc;if(null===s)i.Uc=this;else if(s instanceof G){if(s===this)return i;i.Uc=[s,this]}else{if(-1!==s.indexOf(this))return i;s.push(this)}s=this.Vc;return null===s?this.Vc=[i]:s.push(i),i},G.prototype.remove=function(e){var t=this.Vc;!t||-1!==(e=t.indexOf(e))&&t.splice(e,1)},G.EMPTY=((kt=new G).closed=!0,kt),G);function G(e){this.closed=!1,this.Uc=null,this.Vc=null,e&&(this.Nc=!0,this.oh=e)}function z(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}function J(e){return e.reduce(function(e,t){return e.concat(t instanceof W?t.errors:t)},[])}var K,Q,Y="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),X=(D(te,Q=$),te.prototype[Y]=function(){return this},te.create=function(e,t,i){i=new te(e,t,i);return i.syncErrorThrowable=!1,i},te.prototype.next=function(e){this.isStopped||this.Hc(e)},te.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this.qc(e))},te.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this.zc())},te.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,Q.prototype.unsubscribe.call(this))},te.prototype.Hc=function(e){this.destination.next(e)},te.prototype.qc=function(e){this.destination.error(e),this.unsubscribe()},te.prototype.zc=function(){this.destination.complete(),this.unsubscribe()},te.prototype.Wc=function(){var e=this.Uc;return this.Uc=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this.Uc=e,this},te),Z=(D(ee,K=X),ee.prototype.next=function(e){var t;!this.isStopped&&this.Hc&&(t=this.Gc,U.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.Qc(t,this.Hc,e)&&this.unsubscribe():this.Xc(this.Hc,e))},ee.prototype.error=function(e){if(!this.isStopped){var t=this.Gc,i=U.useDeprecatedSynchronousErrorHandling;if(this.qc)i&&t.syncErrorThrowable?this.Qc(t,this.qc,e):this.Xc(this.qc,e),this.unsubscribe();else if(t.syncErrorThrowable)i?(t.syncErrorValue=e,t.syncErrorThrown=!0):N(e),this.unsubscribe();else{if(this.unsubscribe(),i)throw e;N(e)}}},ee.prototype.complete=function(){var e,t,i=this;this.isStopped||(e=this.Gc,this.zc&&(t=function(){return i.zc.call(i.Jc)},U.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.Qc(e,t):this.Xc(t)),this.unsubscribe())},ee.prototype.Xc=function(e,t){try{e.call(this.Jc,t)}catch(e){if(this.unsubscribe(),U.useDeprecatedSynchronousErrorHandling)throw e;N(e)}},ee.prototype.Qc=function(e,t,i){if(!U.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this.Jc,i)}catch(t){return U.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0):N(t),!0}return!1},ee.prototype.oh=function(){var e=this.Gc;this.Jc=null,this.Gc=null,e.unsubscribe()},ee);function ee(e,t,i,s){var r,n=K.call(this)||this;n.Gc=e;e=n;return _(t)?r=t:t&&(r=t.next,i=t.error,s=t.complete,t!==V&&(_((e=Object.create(t)).unsubscribe)&&n.add(e.unsubscribe.bind(e)),e.unsubscribe=n.unsubscribe.bind(n))),n.Jc=e,n.Hc=r,n.qc=i,n.zc=s,n}function te(e,t,i){var s=Q.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=V;break;case 1:if(!e){s.destination=V;break}if("object"==typeof e){e instanceof te?(s.syncErrorThrowable=e.syncErrorThrowable,(s.destination=e).add(s)):(s.syncErrorThrowable=!0,s.destination=new Z(s,e));break}default:s.syncErrorThrowable=!0,s.destination=new Z(s,e,t,i)}return s}var ie="function"==typeof Symbol&&Symbol.observable||"@@observable";function se(e){return e}var re=(ne.prototype.lift=function(e){var t=new ne;return t.source=this,t.operator=e,t},ne.prototype.subscribe=function(e,t,i){var s=this.operator,i=function(e,t,i){if(e){if(e instanceof X)return e;if(e[Y])return e[Y]()}return e||t||i?new X(e,t,i):new X(V)}(e,t,i);if(s?i.add(s.call(i,this.source)):i.add(this.source||U.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this.Kc(i):this.Zc(i)),U.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},ne.prototype.Zc=function(t){try{return this.Kc(t)}catch(e){U.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(e){for(;e;){var t=e,i=t.closed,s=t.destination,t=t.isStopped;if(i||t)return;e=s&&s instanceof X?s:null}return 1}(t)?t.error(e):console.warn(e)}},ne.prototype.forEach=function(s,e){var r=this;return new(e=oe(e))(function(e,t){var i=r.subscribe(function(e){try{s(e)}catch(e){t(e),i&&i.unsubscribe()}},t,e)})},ne.prototype.Kc=function(e){var t=this.source;return t&&t.subscribe(e)},ne.prototype[ie]=function(){return this},ne.prototype.pipe=function(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return 0===e.length?this:(0===(t=e).length?se:1===t.length?t[0]:function(e){return t.reduce(function(e,t){return t(e)},e)})(this)},ne.prototype.toPromise=function(e){var s=this;return new(e=oe(e))(function(e,t){var i;s.subscribe(function(e){return i=e},function(e){return t(e)},function(){return e(i)})})},ne.create=function(e){return new ne(e)},ne);function ne(e){this.Yc=!1,e&&(this.Kc=e)}function oe(e){if(!(e=e||(U.Promise||Promise)))throw new Error("no Promise impl found");return e}var ae,le,ce,t=(D(me,ce=$),me.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},D(ge,le=me),ge.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var i=this.id,e=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(e,i,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(e,this.id,t),this},ge.prototype.requestAsyncId=function(e,t,i){return void 0===i&&(i=0),setInterval(e.flush.bind(e,this),i)},ge.prototype.recycleAsyncId=function(e,t,i){if(null!==(i=void 0===i?0:i)&&this.delay===i&&!1===this.pending)return t;clearInterval(t)},ge.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;t=this.tu(e,t);if(t)return t;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},ge.prototype.tu=function(e,t){var i=!1,s=void 0;try{this.work(e)}catch(e){i=!0,s=!!e&&e||new Error(e)}if(i)return this.unsubscribe(),s},ge.prototype.oh=function(){var e=this.id,t=this.scheduler,i=t.actions,s=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==s&&i.splice(s,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},ge),de=(pe.prototype.schedule=function(e,t,i){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(i,t)},pe.now=function(){return Date.now()},pe),he=(D(ue,ae=de),ue.prototype.schedule=function(e,t,i){return void 0===t&&(t=0),ue.delegate&&ue.delegate!==this?ue.delegate.schedule(e,t,i):ae.prototype.schedule.call(this,e,t,i)},ue.prototype.flush=function(e){var t,i=this.actions;if(this.active)i.push(e);else{this.active=!0;do{if(t=e.execute(e.state,e.delay))break}while(e=i.shift());if(this.active=!1,t){for(;e=i.shift();)e.unsubscribe();throw t}}},new ue(t));function ue(e,t){void 0===t&&(t=de.now);var i=ae.call(this,e,function(){return ue.delegate&&ue.delegate!==i?ue.delegate.now():t()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}function pe(e,t){void 0===t&&(t=pe.now),this.SchedulerAction=e,this.now=t}function ge(e,t){var i=le.call(this,e,t)||this;return i.scheduler=e,i.work=t,i.pending=!1,i}function me(e,t){return ce.call(this)||this}function fe(e){var t=e.subscriber,i=e.counter,e=e.period;t.next(i),this.schedule({subscriber:t,counter:i+1,period:e},e)}class ye{static setTimeout(e,t=0){return this.iu||this.eu(),this.su(e,t,!0)}static setInterval(e,t=0){return this.iu||this.eu(),this.su(e,t,!1)}static clearTimeout(e){this.nu.delete(e)}static clearInterval(e){this.nu.delete(e)}static eu(){var t,i,e;this.iu=(void 0===i&&(i=he),!H(e=t=void 0===(t=100)?0:t)&&0<=e-parseFloat(e)+1&&!(t<0)||(t=0),i&&"function"==typeof i.schedule||(i=he),new re(function(e){return e.add(i.schedule(fe,t,{subscriber:e,counter:0,period:t})),e})),this.iu.subscribe(()=>this.ru())}static hu(e){try{e.callback()}catch(e){Object(g.a)({message:"TimerService_error",callStack:e.stack,exception:e.message,throttle:1,level:f.ProtoLoggingLevelEnum.INFO})}}static ru(){const e=(new Date).getTime(),t=[];for(var[i,s]of this.nu)e-s.startTime<s.duration*(s.intervalTimesCalled+1)||(this.hu(s),s.isTimeout?t.push(i):s.intervalTimesCalled++);for(const e of t)this.nu.delete(e)}static su(e,t,i){var s=++this.au;return this.nu.set(s,{startTime:(new Date).getTime(),isTimeout:i,callback:e,duration:t,intervalTimesCalled:0}),s}}ye.nu=new Map,ye.au=0;var be,ve,Pe,Se,Ie,Te=i(14),Ae=(Re.prototype=Object.create(Error.prototype),Re),Oe=(D(Me,Ie=$),Me.prototype.unsubscribe=function(){var e,t;this.closed||(this.closed=!0,e=(t=this.subject).observers,this.subject=null,!e||0===e.length||t.isStopped||t.closed||-1!==(t=e.indexOf(this.subscriber))&&e.splice(t,1))},Me),ke=(D(Le,Se=X),Le),Ce=(D(Ee,Pe=re),Ee.prototype[Y]=function(){return new ke(this)},Ee.prototype.lift=function(e){var t=new we(this,this);return t.operator=e,t},Ee.prototype.next=function(e){if(this.closed)throw new Ae;if(!this.isStopped)for(var t=this.observers,i=t.length,s=t.slice(),r=0;r<i;r++)s[r].next(e)},Ee.prototype.error=function(e){if(this.closed)throw new Ae;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,i=t.length,s=t.slice(),r=0;r<i;r++)s[r].error(e);this.observers.length=0},Ee.prototype.complete=function(){if(this.closed)throw new Ae;this.isStopped=!0;for(var e=this.observers,t=e.length,i=e.slice(),s=0;s<t;s++)i[s].complete();this.observers.length=0},Ee.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},Ee.prototype.Zc=function(e){if(this.closed)throw new Ae;return Pe.prototype.Zc.call(this,e)},Ee.prototype.Kc=function(e){if(this.closed)throw new Ae;return this.hasError?(e.error(this.thrownError),$.EMPTY):this.isStopped?(e.complete(),$.EMPTY):(this.observers.push(e),new Oe(this,e))},Ee.prototype.asObservable=function(){var e=new re;return e.source=this,e},Ee.create=function(e,t){return new we(e,t)},Ee),we=(D(xe,ve=Ce),xe.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},xe.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},xe.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},xe.prototype.Kc=function(e){return this.source?this.source.subscribe(e):$.EMPTY},xe);function xe(e,t){var i=ve.call(this)||this;return i.destination=e,i.source=t,i}function Ee(){var e=Pe.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}function Le(e){var t=Se.call(this,e)||this;return t.destination=e,t}function Me(e,t){var i=Ie.call(this)||this;return i.subject=e,i.subscriber=t,i.closed=!1,i}function Re(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}class Be{constructor(e=0,t=1e3,i=1){this.timerDuration=e,this.ou=t,this.cu=i,this.uu=0,this.lu=null,this.du=!1,this.fu=!1,this.pu=new Ce,this.bu=new Ce,this.vu=new Ce,this.mu=[{event:M.FirstQuartile,quartile:1},{event:M.SecondQuartile,quartile:2},{event:M.ThirdQuartile,quartile:3},{event:M.FourthQuartile,quartile:4}],this.gu=null,this.yu=()=>{this.wu(),this.pu.next(),this.xu(),this.Su=(new Date).getTime()},e||this.disable()}start(){this.fu=!0,null===this.lu&&this.Ou()}stop(){this.fu=!1,null!==this.lu&&(this.wu(),this.ku())}reset(e){e&&(this.timerDuration=e),this.uu=0,this.du=!1,(this.gu=null)===this.lu&&!this.fu||(this.ku(),this.Ou())}get timeElapsed(){return this.uu}get timeRemaining(){return this.timerDuration-this.uu}disable(){this.du=!0,this.ku()}get onTimeUpdate(){return this.pu.asObservable()}get onTimeElapsed(){return this.bu.asObservable()}get onQuartile(){return this.vu.asObservable()}wu(){this.uu+=(new Date).getTime()-this.Su}Ou(){this.du||(this.xu(),this.Su=(new Date).getTime(),this.lu=ye.setInterval(this.yu,this.ou))}ku(){ye.clearInterval(this.lu),this.lu=null}_u(){this.disable(),this.bu.next(),this.ju(this.uu,this.timerDuration,this.cu),this.uu=0}xu(){this.uu/B.f>=this.timerDuration/B.f&&this._u()}ju(e,t,i){i=Object(Te.h)(e/B.f,i);this.Au(i,t)}Au(e,t){const i=Math.floor(Object(Te.g)(0,t,0,4,e));this.gu<=i&&(this.mu.forEach(({event:e,quartile:t})=>{t===i&&this.vu.next(e)}),this.gu++)}}function je(e=[]){e.forEach(e=>e.unsubscribe())}(kt=be=be||{})[kt.Unknown=0]="Unknown",kt[kt.TimeoutBetweenAds=1]="TimeoutBetweenAds";class De extends n.a{constructor(e,t,i,s){super(),this.mediator=e,this.controlData=i,this.app=s,this.Iu=0,this.Cu=0,this.Tu=null,this.Pu=new Map,this.currentPlayerAdSlot=E.ProtoAdSlotsEnum.PreRoll,this.Mu={stopped:!1,viewability:!1,inImpression:!1,forceDisable:!1,zeroDimension:!1,isAppBackgrounded:!1,inAppRecyclerViewViewability:!1},this.firstAdBreakStarted=!1,this.Eu=!1,this.viewabilityStateChanged(t),this.onResize(this.controlData.playerDimensions.width,this.controlData.playerDimensions.height),this.controlData.totalAdBreakLength&&(this.Lu=new Be(this.controlData.totalAdBreakLength),this.Pu.set(this.Lu,[this.Lu.onTimeElapsed.subscribe(()=>{this.mediator.publish(this,L.TotalAdBreakLengthExpired)})]))}Ru(){return this.Cu>=this.controlData.numberOfMidRolls&&-1!==this.controlData.numberOfMidRolls}Bu(e){if(e)return e.stop(),je(this.Pu.get(e)),this.Pu.delete(e),null}Du(){var e;this.Eu&&(this.Eu=!1,e={[f.ProtoAdSlotsEnum.PreRoll]:f.ProtoAdBreakTypeEnum.PreRoll,[f.ProtoAdSlotsEnum.MidRoll]:f.ProtoAdBreakTypeEnum.MidRoll,[f.ProtoAdSlotsEnum.PostRoll]:f.ProtoAdBreakTypeEnum.PostRoll},this.mediator.publish(this,L.AdOpportunity,{payload:{adBreakType:e[this.currentPlayerAdSlot]}})),this.mediator.publish(this,L.EnableAds),this.Lu&&this.Lu.start()}canEnableAds(){return this.Mu.stopped||this.Mu.viewability||this.Mu.inImpression||this.Mu.forceDisable||this.Mu.zeroDimension||this.Mu.isAppBackgrounded||this.Mu.inAppRecyclerViewViewability||this.currentPlayerAdSlot===E.ProtoAdSlotsEnum.MidRoll&&this.Ru()||this.currentPlayerAdSlot!==E.ProtoAdSlotsEnum.MidRoll&&0<this.Iu?{enableAds:!1,disableReason:be.Unknown}:{enableAds:!0,disableReason:be.Unknown}}toggleEnableAds(){var e=this.canEnableAds();e.enableAds?this.Du():(this.mediator.publish(this,L.DisableAds,{payload:e.disableReason}),this.Lu&&!this.Mu.inImpression&&this.Lu.stop())}startAds(){this.Mu.stopped=!1,this.toggleEnableAds()}forceRecheck(){this.toggleEnableAds()}onAdImpression(e){this.currentPlayerAdSlot===E.ProtoAdSlotsEnum.MidRoll&&(this.firstAdBreakStarted||(this.firstAdBreakStarted=!0)),this.Mu.inImpression=!0,this.toggleEnableAds(),this.Fu(),this.$u();e=this.Uu(e.payload.adSkipMode,e.payload.adDuration);0<e&&(this.Tu=setTimeout(()=>{this.mediator.publish(this,L.ForceStopAdSlot)},e*B.f))}$u(){this.controlData.maxAdPodDuration&&!this.Vu&&(this.Vu=new Be(this.controlData.maxAdPodDuration),this.Vu.start(),this.Pu.set(this.Vu,[this.Vu.onTimeElapsed.subscribe(()=>{this.mediator.publish(this,L.ForceStopAdPod)}),this.Vu.onTimeUpdate.subscribe(()=>{var e=this.Vu.timeRemaining;this.mediator.publish(this,L.AdPodRemainingTime,{payload:{remainingTime:e}})})]))}Fu(){this.controlData.maxAdSlotDuration&&!this.Nu&&(this.Nu=new Be(this.controlData.maxAdSlotDuration),this.Nu.start(),this.Pu.set(this.Nu,[this.Nu.onTimeElapsed.subscribe(()=>{this.mediator.publish(this,L.ForceStopAdSlot)})]))}Uu(e,t){switch(this.controlData.playerAdsSkippability){case f.ProtoPlayerAdSkippability.IfLongerThan:if((e===f.ProtoAdSkipMode.Never||e===f.ProtoAdSkipMode.IfLongerThan31Sec)&&!t)return this.controlData.adsMustBeSkippableIfLongerThan;if(e===f.ProtoAdSkipMode.Never&&t>this.controlData.adsMustBeSkippableIfLongerThan)return this.controlData.adsMustBeSkippableIfLongerThan;break;case f.ProtoPlayerAdSkippability.NoRestrictions:if(e===f.ProtoAdSkipMode.IfLongerThan31Sec&&!t)return R.d}return 0}onAdFinished(e,t=!1){this.Nu=this.Bu(this.Nu),t||(this.Vu=this.Bu(this.Vu),this.currentPlayerAdSlot===E.ProtoAdSlotsEnum.MidRoll?this.Cu++:this.Iu++),this.Ru()&&!t&&this.mediator.publish(this,L.MidRollCapped),e&&(this.Eu=!0),this.Mu.inImpression=!1,t?this.Du():this.toggleEnableAds(),clearTimeout(this.Tu)}onAdPause(){this.Vu&&this.Vu.stop(),this.Nu&&this.Nu.stop(),this.Lu&&this.Lu.stop()}onAdPlay(){this.Vu&&this.Vu.start(),this.Nu&&this.Nu.start(),this.Lu&&this.Lu.start()}onStop(){this.currentPlayerAdSlot=null,this.Mu.stopped=!0,this.toggleEnableAds()}onAdStateChange(e,t,i){this.controlData.maxAdSlotDuration=t.maxAdSlotDuration,this.controlData.maxAdPodDuration=t.maxAdPodDuration,e===this.currentPlayerAdSlot&&e===E.ProtoAdSlotsEnum.MidRoll||(null===e&&this.Hu===E.ProtoAdSlotsEnum.MidRoll||(this.Eu=!0),e!==E.ProtoAdSlotsEnum.MidRoll&&(this.Iu=0,this.firstAdBreakStarted=!1),this.currentPlayerAdSlot=e,this.Hu=e,this.startAds())}contentChanged(){this.Cu=0,this.firstAdBreakStarted=!1,this.toggleEnableAds()}viewabilityStateChanged(e,t=0,i=!1){this.qu=e,this.controlData.viewabilityPolicy===E.ProtoAdViewabilityPolicy.Strict&&(this.Mu.viewability=!e),i||this.toggleEnableAds()}setToggleAdsReason(e){this.Mu.isAppBackgrounded=e.isAppBackgrounded,this.Mu.inAppRecyclerViewViewability=e.inAppRecyclerViewViewability,this.toggleEnableAds()}disableAdvertising(){this.Mu.forceDisable=!0,this.toggleEnableAds()}enableAdvertising(){this.Mu.forceDisable=!1,this.toggleEnableAds()}destroy(){this.Lu&&this.Lu.disable(),clearTimeout(this.Tu),this.Nu=this.Bu(this.Nu),this.Vu=this.Bu(this.Vu)}get inView(){return this.qu}onResize(e,t){this.Mu.zeroDimension=0===e||0===t,this.toggleEnableAds()}}(t=Lt=Lt||{})[t.Portrait=0]="Portrait",t[t.Landscape=1]="Landscape";var _e=Lt;class Fe{constructor(){this.zu={},this.Wu=[]}getImage(e,t,i,s,r="",n=!1){return this.Gu=e,this.Ju=Object(A.h)(t)?t:"",this.Qu=i,this.Xu=s,this.Yu=r,this.Ku=n,this.Zu()}Zu(){var e=this.tl();if(e)return e;const t=this.Gu+this.Yu,i=new Image;return i.src=t,i.alt=this.Ju,this.zu[this.Gu]=this.zu[this.Gu]||{},this.zu[this.Gu][this.Qu]=this.zu[this.Gu][this.Qu]||{},this.zu[this.Gu][this.Qu][this.Xu]=this.zu[this.Gu][this.Qu][this.Xu]||{},this.zu[this.Gu][this.Qu][this.Xu][this.Yu]=i,i}tl(){var e=this.il();if(e)return e;if(this.Ku){this.el();e=this.sl();return e?e:this.nl()||void 0}}el(){const s=[];if(this.zu[this.Gu]){const r=this.zu[this.Gu],n=this.Qu>this.Xu?_e.Landscape:_e.Portrait;Object.keys(r).forEach(t=>{const i=parseInt(t,10);Object.keys(r[t]).filter(e=>!!r[t][e]).forEach(e=>{e=parseInt(e,10);(i>e?_e.Landscape:_e.Portrait)===n&&(e={area:i*e,img:this.rl(this.Gu,i,e)},s.push(e))})}),this.Wu=[...s]}else this.Wu=[]}rl(e,t,i){if(this.zu[e]&&this.zu[e][t]&&this.zu[e][t][i])return this.zu[e][t][i][Object.keys(this.zu[e][t][i])[0]]}il(){return this.zu[this.Gu]&&this.zu[this.Gu][this.Qu]&&this.zu[this.Gu][this.Qu][this.Xu]&&this.zu[this.Gu][this.Qu][this.Xu][this.Yu]}sl(){if(0!==this.Wu.length){const t=this.Qu*this.Xu,e=this.Wu.filter(({area:e})=>e>t).sort((e,t)=>e.area-t.area);return 0!==e.length?e[0].img:void 0}}nl(){if(0!==this.Wu.length){const t=this.Qu*this.Xu,e=this.Wu.filter(({area:e})=>e<t&&t/e<=1.3).sort((e,t)=>t.area-e.area);return 0!==e.length?e[0].img:void 0}}}var Ue,Ne,Ve,He=i(52);const qe={Play:"play",Pause:"pause",Mute:"mute",Unmute:"unmute",Canplay:"canplay",Ended:"ended",Timeupdate:"timeupdate",Seeking:"seeking",Seeked:"seeked",Volumechange:"volumechange",Durationchange:"durationchange",Fullscreen:"fullscreen",LoadedData:"loadeddata",LoadedMetadata:"loadedmetadata",Error:"error"};(kt=Ue=Ue||{})[kt.Auto=0]="Auto",kt[kt.Strict=1]="Strict",(t=Ne=Ne||{})[t.PlayingState=0]="PlayingState",t[t.PausedState=1]="PausedState",t[t.PrerollState=2]="PrerollState",t[t.PostrollState=3]="PostrollState",t[t.StoppedState=4]="StoppedState",t[t.ReplayState=5]="ReplayState",t[t.HiddenState=6]="HiddenState",t[t.BufferingState=7]="BufferingState",t[t.LiveStreamStarting=8]="LiveStreamStarting",t[t.LiveStreamEnded=9]="LiveStreamEnded",t[t.LiveStreamStopped=10]="LiveStreamStopped",t[t.LiveStreamNotSupported=11]="LiveStreamNotSupported",(Lt=Ve=Ve||{}).H264="h264",Lt.Hevc="hevc";const We={PlayError:"playError",NewVideo:"newVideo",Buffering:"buffering",Buffered:"buffered",LevelSwitching:"levelSwitching",EndOfStream:"endOfStream",LiveStreamNotPlayable:"liveNotPlayable"},$e={Change:"VideoQualityChanged",CurrentQuality:"CurrentQuality",Loaded:"QualityListLoaded"};(kt=Hc=Hc||{})[kt.Low144p=144]="Low144p",kt[kt.Low240p=240]="Low240p",kt[kt.Medium360p=360]="Medium360p",kt[kt.Medium480p=480]="Medium480p",kt[kt.High720p=720]="High720p",kt[kt.High1080p=1080]="High1080p";function Ge(e,t){e=e.length-1;return{currentIndex:t,nextIndex:t===e?0:t+1,prevIndex:0===t?e:t-1,firstIndex:0,lastIndex:e}}class ze{constructor(e){this.hl=e,this.al={breakType:f.ProtoAdBreakTypeEnum.None,currentPodNumber:0,maxAdSlotDuration:0,maxAdPodDuration:0,totalNumberOfAdSlots:0},this.ol=null}setNewBreak(t){this.hl.forEach(e=>{e.types.forEach(i=>{!function(e){let t=!1;switch(i){case f.ProtoAdBreakTypeEnum.PreRoll:t=e===f.ProtoAdSlotsEnum.PreRoll;break;case f.ProtoAdBreakTypeEnum.MidRoll:t=e===f.ProtoAdSlotsEnum.MidRoll;break;case f.ProtoAdBreakTypeEnum.PostRoll:t=e===f.ProtoAdSlotsEnum.PostRoll}return t}(t)||(this.al.currentPodNumber=e.numberOfAdSlots,this.al.maxAdSlotDuration=e.maxAdSlotDuration,this.al.maxAdPodDuration=e.maxAdPodDuration,this.al.totalNumberOfAdSlots=e.numberOfAdSlots)})})}adStarted(){this.cl(),0===this.al.currentPodNumber&&(this.al.currentPodNumber=this.al.totalNumberOfAdSlots),this.al.currentPodNumber--}endPod(){this.cl(),this.al.currentPodNumber=0}enterPodTimeout(e){this.cl(),this.ol=setTimeout(()=>{this.cl(),e()},5e3)}isInAdPod(){return 0<this.al.currentPodNumber}isCurrentBreakInPod(){return 1<this.al.totalNumberOfAdSlots}getMaxAdSlotDuration(){return this.al.maxAdSlotDuration}getMaxAdPodDuration(){return this.al.maxAdPodDuration}getMaxAdSlotPossibleDuration(){let t=0;for(let e=0;e<this.hl.length;e++){if(0===this.hl[e].maxAdSlotDuration)return 0;t=Math.max(t,this.hl[e].maxAdSlotDuration)}return t}getCurrentSlotIndex(){return this.al.totalNumberOfAdSlots-this.al.currentPodNumber}getNextSlotIndex(){var e=this.getCurrentSlotIndex();return this.al.totalNumberOfAdSlots>e?e+1:1}getTotalNumberOfSlots(){return this.al.totalNumberOfAdSlots}isInPodTimeout(){return!!this.ol}cl(){clearTimeout(this.ol),this.ol=null}}var Je=i(7),Ke=i(49),Qe=i(22);const Ye=["com.accuweather.android"],Xe=.05*B.f;class Ze extends n.a{constructor(e,t,i){super(),this.mediator=e,this.Ws=t,this._appSettings=i,this.ul=.01,this.ll=.5,this.dl=2e3,this.fl=0,this.pl=!1,this.bl=!1,this.vl=!1,this.ml=!1,this.gl=!1,this.yl=!1,this.qu=!1,this.eh=f.ProtoAdSlotsEnum.PreRoll,this.wl=!1,this.Sl=!1,this.Ol=!1,this.kl=!1,this._l=!1,this.jl=!1,this.Al=!1,this.Il={[v.b.AdRemainingTimeChange]:e=>{var t;this._l&&this.app.config.isInAppAndroid&&(null===(t=this.adHandler)||void 0===t||t.pause())},[v.b.AdImpression]:e=>{this.Cl.onAdImpression(e),this.Tl(),this.mediator.publish(this,O.b.AdImpression,e);var{adSourceData:t,customAdData:e}=e.payload;this.Pl(t,e)},[v.b.AdStopped]:e=>{this.mediator.publish(this,O.b.AdStopped,e),this.Ml(),this.El(),this.app.services.EventsStorageService.emitAdStopped(),this.qu&&this.Ll()},[v.b.AdError]:e=>{this.adHandler.inImpression&&this.Ml(),this.mediator.publish(this,O.b.AdError,e),this.app.services.EventsStorageService.emitAdError()},[v.b.AdSkipped]:e=>{this.mediator.publish(this,O.b.AdSkipped,e),this.app.services.EventsStorageService.emitAdSkipped(),this.floatingModule&&(this.floatingModule.enabled=!0),this.Ml(!0),this.El(),this.qu&&this.Ll()},[v.b.AdPaused]:e=>{this.Cl.onAdPause(),this.app.services.TrackingService.setSessionPlayback(!1),this.app.services.EventsStorageService.emitAdPaused(),this.mediator.publish(this,O.b.AdPause,e)},[v.b.AdPlaying]:e=>{this.Cl.onAdPlay(),this.app.services.TrackingService.setSessionPlayback(!0),this.app.services.EventsStorageService.emitAdPlaying(),this.mediator.publish(this,O.b.AdPlay,e)},[v.b.AdVideoFirstQuartile]:e=>{this.mediator.publish(this,O.b.AdCompleted25,e),this.app.services.EventsStorageService.emitAdVideoFirstQuartile()},[v.b.AdVideoMidpoint]:e=>{this.mediator.publish(this,O.b.AdCompleted50,e),this.app.services.EventsStorageService.emitAdVideoMidpoint()},[v.b.AdVideoThirdQuartile]:e=>{this.mediator.publish(this,O.b.AdCompleted75,e),this.app.services.EventsStorageService.emitAdVideoThirdQuartile()},[v.b.AdVideoComplete]:e=>{this.mediator.publish(this,O.b.AdCompleted100,e),this.app.services.EventsStorageService.emitAdVideoComplete()},[v.b.AdClickThru]:e=>{this.mediator.publish(this,O.b.AdClick,e),this.app.services.EventsStorageService.emitAdClickThru()},[v.b.AdInteraction]:()=>{this.app.services.EventsStorageService.emitAdInteraction()},[v.b.AdUserAcceptInvitation]:()=>{this.app.services.EventsStorageService.emitAdInteraction()},[v.b.AdUserClose]:()=>{this.app.services.EventsStorageService.emitAdInteraction()},[v.b.AdUserMinimize]:()=>{this.app.services.EventsStorageService.emitAdInteraction()},[v.b.AdVideoStart]:e=>{var e=e.payload["adSourceData"],e={duration:e&&e.length,mediaPlayerVolume:this.getVolume()};this.app.services.EventsStorageService.emitAdVideoStart(e)},[v.b.AdLoaded]:e=>{const t=e.payload["adLoadedData"];(null===(e=t)||void 0===e?void 0:e.skipOffset)<0&&(t.skipOffset=void 0);e=this.Rl(t);this.app.services.EventsStorageService.emitAdLoaded(e)},[v.b.AdVolumeChange]:()=>{this.app.services.EventsStorageService.emitAdVolumeChange()}},this.Bl=i=>e=>{const t=this.Il[i];t&&t(e)},this.Dl=e=>{(this.Sl=e)&&(this.app.services.ViewabilityService.off(this.$playerContainer,this.Dl),this.Fl())},this.$l=e=>{e&&this.adHandler&&!this.kl&&setTimeout(()=>{this.adHandler.resumeWithoutUserInteraction()},Xe)},this.Ul=()=>{!this.bl&&this.Vl()&&(this.mediator.publish(this,o.b.CanStart),this.app.services.ResizeObserver.off(this.$experienceContainer,this.Ul))},this.Nl=({payload:{playback:e,isFullscreenClose:t}})=>{this.floatingModule&&Object(A.a)(e)&&!t&&(this.floatingModule.enabled=e)},this.Hl=()=>{this.ql(1)},this.zl=()=>{this.ql(0)},this.Wl=e=>{this.Nl(e);var e=e.payload["playback"];Object(A.a)(e)&&(e?(this.app.services.EventsStorageService.emitAdPlay(),this.kl=!1):(this.app.services.EventsStorageService.emitAdPause(),this.kl=!0))},this.Gl=new Fe}Jl(){}Pl(e,t){this.app.services.EventsStorageService.emitAdImpression(e,t)}El(){this.app.services.EventsStorageService.emitAdComplete()}Ql(){}Ll(){}Yl(){}Kl(){}Zl(){}td(){}ed(){}sd(e){this.app.services.EventsStorageService.emitAdStateChange({state:e})}nd(){var{clientWidth:e,clientHeight:t}=this.$playerContainer;this.app.services.EventsStorageService.emitPlayerResized({width:e,height:t})}rd(){this.app.services.EventsStorageService.emitOnEnterFullscreen()}hd(){this.app.services.EventsStorageService.emitOnExitFullscreen()}od(){this.app.services.EventsStorageService.emitOnPlayerCollapsed()}ud(){this.app.services.EventsStorageService.emitOnPlayerExpanded()}ld(e){this.dd(e),this.fd(e),this.pd(e),this.eh=e,this.bd(e)}fd(e){this.adHandler&&this.adHandler.adStateChange(e,this.vd.getMaxAdSlotDuration())}pd(e){this.Cl.onAdStateChange(e,{maxAdPodDuration:this.vd.getMaxAdPodDuration(),maxAdSlotDuration:this.vd.getMaxAdSlotDuration()})}dd(e){this.vd.setNewBreak(e)}bd(e){this.sd(He.b[e])}gd(){this.adHandler&&this.adHandler.contentChanged(),this.Cl.contentChanged()}yd(){this.adHandler=this.wd(),this.xd(),this.relay(O.b.ImpressionPrice,this.adHandler,this,this.mediator),this.subscribe(o.b.UserInteraction,this.adHandler,this.Wl),this.subscribe(C.DetachedFromDom,this.adHandler,()=>{this.app.services.GlobalDomUtilsService.isDetachedFromDOM(this.$experienceContainer)?this.triggerDestroy():(this.unsubscribeAll(this.adHandler),this.adHandler.destroy(),this.adHandler=null,Object(g.a)({level:f.ProtoLoggingLevelEnum.FATAL,message:"only_adHandler_destroyed",sendMaxLog:!1,throttle:1}))});const e=()=>{this.app.services.TrackingService.setAdStart(),this.Ol=!0,this.kl=!1,this.Fl(),this.unsubscribe(w.AdsEnabled,this.adHandler,e)};this.subscribe(w.AdsEnabled,this.adHandler,e),this.subscribe(C.AdSlotResized,this.adHandler,({payload:{width:e,height:t}})=>{this.Cl.onResize(e,t)})}xd(){Object.keys(v.b).forEach(i=>{this.subscribe(v.b[i],this.adHandler,e=>{var t=v.b[i];this.Bl(t)(e),this.mediator.publish(this,t,e)})})}Ml(e=!1){let t=this.vd.isInAdPod();e&&(t=!1,this.vd.endPod()),this.Cl.onAdFinished(this.adHandler.inImpression,t),this.Sd(),this.Od.isCloseButton&&this.adHandler&&this.adHandler.firstAdShown&&(this.Od.closeButtonMode!==f.ProtoPlayerCloseButtonMode.OnHoverAfterFirstAd||Object(S.u)(this.$playerContainer,l.g.CloseHover)||Object(S.a)(this.$playerContainer,l.g.CloseHover),this.Od.floatingSettings.floatingCloseButtonMode!==f.ProtoPlayerCloseButtonMode.OnHoverAfterFirstAd||Object(S.u)(this.$playerContainer,l.g.CloseFloatHover)||Object(S.a)(this.$playerContainer,l.g.CloseFloatHover))}Tl(){this.vd.adStarted(),this.adHandler.show()}Sd(){this.adHandler.hide()}kd(e){this.adHandler.enterAdPodLoadingState(),this.vd.enterPodTimeout(()=>{this.vd.endPod(),e()})}_d(){Object(S.i)(this.$playerContainer),this.Cl=this.jd(),this.subscribe(L.EnableAds,this.Cl,()=>{this.adHandler&&this.adHandler.enableAds()}),this.subscribe(L.DisableAds,this.Cl,e=>{this.adHandler&&this.adHandler.disableAds(e.payload)}),this.subscribe(L.ForceStopAdSlot,this.Cl,()=>{this.adHandler&&this.adHandler.stopAd("forceStopAdSlot")}),this.subscribe(L.ForceStopAdPod,this.Cl,()=>{this.adHandler&&(this.adHandler.inImpression?(this.vd.endPod(),this.adHandler.stopAd("forceStopAdPod")):this.Ml(!0))}),this.subscribe(L.AdPodRemainingTime,this.Cl,e=>{this.adHandler&&this.adHandler.updatePodRemainingTime(e.payload.remainingTime)}),this.subscribe(L.AdOpportunity,this.Cl,e=>{e=e.payload;this.app.services.TrackingService.trackAdOpportunity(e),this.adHandler&&this.adHandler.newAdOpportunity()})}Id(){this.app.services.ViewabilityService.on(this.$playerContainer,this.Dl,{threshold:this.ll,callbackDelay:this.dl}),this.app.services.ViewabilityService.on(this.$playerContainer,(e,t)=>this.Mc(e,t),{threshold:this.ul}),this.app.services.ViewabilityService.subscribe(O.d.OmidViewabilityThreshold,e=>{this.mediator.publish(this,O.d.OmidViewabilityThreshold,{payload:{threshold:e}})}),this.app.config.os.os===Qe.b.Ios&&this.app.services.PageFocusService.on(this.$l)}Fl(){this.Sl&&this.Ol&&this.mediator.publish(this,o.c.SessionView)}Mc(e,t=!1){var i=this.app.config["isRecyclerViewIntegration"];this.Cl.setToggleAdsReason({isAppBackgrounded:t,inAppRecyclerViewViewability:i&&!e}),this.app.config.isInApp&&(t?(this._l=!0,this.Al?this.jl=!0:this.jl=!1,this.Cd=this.getVolume(),this.setVolume(0),null===(t=this.adHandler)||void 0===t||t.disableAds(be.Unknown),this.pause()):(this.Cd&&(this.setVolume(this.Cd),this.Cd=null),this._l&&(this._l=!1,this.jl||this.play()))),this.qu=e,this.mediator.publish(this,O.b.IsViewable,{payload:e}),this.Cl.viewabilityStateChanged(this.checkFloatingViewability(e),this.vd.isInAdPod(),this.vd.isInPodTimeout()),this.app.services.TrackingService.setSessionViewability(e)}checkFloatingViewability(e){var t=this.app.services.ViewabilityService.getIsTabInFocus();return!(e||!this.floatingModule||!this.floatingModule.isInFloating||!t)||e}zr(){const e=this.$playerContainer.clientWidth,t=this.$playerContainer.clientHeight;var i;this.adHandler?(i=this.wl?v.a.Fullscreen:v.a.Normal,this.adHandler.resizeAd(e,t,i)):this.Cl.onResize(e,t),this.breakPointsHandler.updateWidth(e),setTimeout(()=>{this.mediator.publish(this,O.b.SizeChanged,{payload:{width:e,height:t}}),this.Td()})}Td(){this.wl||this.nd()}Pd(){this.app.services.ResizeObserver.on(this.$playerContainer,()=>{this.zr()})}Ed(){this.wl=!0,this.app.services.InteractionService.disableScrollEvent(),this.rd(),this.adHandler&&this.adHandler.setVastViewMode(v.a.Fullscreen)}Ld(){this.wl=!1,this.app.services.InteractionService.enableScrollEvent(),this.hd(),this.adHandler&&this.adHandler.setVastViewMode(v.a.Normal)}Rd(){var e=`<cnx class='${l.c}'></cnx>`,e=this.app.services.GlobalDomUtilsService.createElementByString(e);return this.Bd(e),e}Bd(e){Object(S.Q)(e,{"padding-bottom":`${this.Dd()}%`})}Dd(){return this.Od.playerSize.ratioHeight/this.Od.playerSize.ratioWidth*100}Fd(){this.subscribe(u.EnterStart,this.floatingModule,()=>{this.mediator.publish(this,O.c.PlayerFloatChanged,{payload:b.Float})}),this.subscribe(u.ExitStop,this.floatingModule,()=>{this.mediator.publish(this,O.c.PlayerFloatChanged,{payload:b.Embed})}),this.subscribe(u.EnterStop,this.floatingModule,()=>{this.Mc(!0)})}$d(){this.floatingModule=new T(this,this.app.services.ViewabilityService,this.app.services.ResizeObserver,this.$playerContainer,this.Od.floatingSettings,this.app.config.device,this.app.services.GlobalDomUtilsService,this.Ud),this.Fd(),this.floatingModule.start()}Vd(){const e=new k(this,this.app.services.ResizeObserver,this.$experienceContainer,this.Od.floatingSettings,this.app.config.device,this.app.services.GlobalDomUtilsService);this.subscribe(u.EnterStop,e,()=>{this.app.services.ViewabilityService.triggerRecheck(this.$playerContainer)}),e.start()}setNewVolume(e){this.adHandler&&this.adHandler.setVolume(e)}Nd(){this.Hd(),this.adHandler&&this.qd(this.adHandler)}qd(e){this.subscribe(o.b.UserInteraction,e,({payload:{volume:e}})=>{e&&this.zd()})}Dr(e){this.mediator.publish(this,O.b.VolumeChanged,{payload:e}),this.app.services.EventsStorageService.emitVolumeChange(e)}ql(e){this.getVolume()!==e&&this.setNewVolume(e)}Hd(){this.pl=!0,this.$playerContainer.addEventListener("mouseover",this.Hl),this.$playerContainer.addEventListener("mouseout",this.zl)}zd(){this.pl&&(this.pl=!1,this.$playerContainer.removeEventListener("mouseover",this.Hl),this.$playerContainer.removeEventListener("mouseout",this.zl))}Wd(){this.breakPointsHandler=new x(this.$playerContainer,this.app.config.device,this.Gd,this.Jd),this.breakPointsHandler.updateWidth(this.$playerContainer.clientWidth)}Qd(){if(this.Od.isCloseButton){switch(this.subscribe(P[P.Close],this.adHandler,()=>{this.handleClose()}),this.Od.closeButtonMode){case f.ProtoPlayerCloseButtonMode.AlwaysOn:Object(S.a)(this.$playerContainer,l.g.CloseOn);break;case f.ProtoPlayerCloseButtonMode.Off:Object(S.a)(this.$playerContainer,l.g.CloseOff);break;case f.ProtoPlayerCloseButtonMode.OnHover:Object(S.a)(this.$playerContainer,l.g.CloseHover)}switch(this.Od.floatingSettings.floatingCloseButtonMode){case f.ProtoPlayerCloseButtonMode.AlwaysOn:Object(S.a)(this.$playerContainer,l.g.CloseFloatOn);break;case f.ProtoPlayerCloseButtonMode.Off:Object(S.a)(this.$playerContainer,l.g.CloseFloatOff);break;case f.ProtoPlayerCloseButtonMode.OnHover:Object(S.a)(this.$playerContainer,l.g.CloseFloatHover)}}}Rl(e){var e=e["skipOffset"];return{isAutoPlay:this.Od.playbackMode===f.ProtoPlayerPlaybackModeEnum.Autoplay,skipOffset:e,isSkippable:Object(A.d)(e)}}Xd(){this.Ol=!0,this.app.services.TrackingService.setContentStart(),this.Fl()}Vl(){var{clientWidth:e,clientHeight:t}=this.$experienceContainer;return!Object(Te.f)({width:e,height:t})||this.Yd()}Yd(){return Ye.includes(this.app.config.bundleID)}Kd(e){try{var{display:t,width:i,height:s,flex:r,maxWidth:n,minWidth:o}=this.app.services.GlobalDomUtilsService.getComputedStyle(e),{width:a,height:l}=e.getBoundingClientRect(),c={display:t,compWidth:i,boundWidth:a,compHeight:s,boundHeight:l,flex:r,maxWidth:n,minWidth:o};return{type:e.nodeName,styles:JSON.stringify(c)}}catch(e){return{err:"BaseExperience_getElementInfo_error"}}}Zd(){var e;Object(Je.l)([95,5])&&(e={parent:this.Kd(this.$experienceContainer.parentElement),main:this.Kd(this.$experienceContainer)},Object(g.a)({message:"BaseExperience_invalid_dimensions",level:f.ProtoLoggingLevelEnum.INFO,exception:JSON.stringify(e)}))}tf(){this.vd=new ze(this.Od.adBreaks)}Eo(e,t,i){this.Od=e,this.app=t,this.$experienceContainer=i,this.Jl(),this.app.services.ViewabilityService.setViewableThreshold(this.fl),this.generateHTML(),this.tf(),this.app.services.ResizeObserver.on(this.$experienceContainer,this.Ul),this.Vl()?this.mediator.publish(this,o.b.CanStart):this.Zd()}start(){this.bl=!0,Object(S.a)(this.$experienceContainer,l.b.MainContainerFlex),this.mediator.publish(this,o.c.SessionRendered),this.Wd(),this.Pd(),this.Od.floatingSettings.floatingMode===f.ProtoPlayerFloatingMode.Always?this.Vd():(this.nd(),this.$d()),this.Id(),0<this.Od.lineItemSettings.lineItems.length&&!this.Od.disableAdvertising&&!this.Ws&&this.yd(),this.app.config.isMobile||this.Od.soundMode!==f.ProtoPlayerSoundMode.Hover||this.Nd(),this.Od.isCloseButton&&this.Qd(),this._d(),this.Ws||Ke.a.detectUsingScript().then(e=>{e&&(this.app.services.TrackingService.trackSessionAdBlocker(f.ProtoAdBlockDetectionTypeEnum.Network),this.Cl.disableAdvertising())})}play(){this.adHandler&&this.adHandler.inImpression&&this.adHandler.play()}pause(){this.adHandler&&this.adHandler.inImpression&&this.adHandler.pause()}setVolume(e){this.setNewVolume(e),this.zd()}getSize(){return{width:this.$experienceContainer.clientWidth,height:this.$experienceContainer.clientHeight}}setSize(e,t){Object(Te.f)({width:e,height:t})||Object(S.Q)(this.$experienceContainer,{width:`${e}px`,height:`${t}px`})}setCustomMacros(e){this.app.services.MacrosService.addExtraMacros(e)}isViewable(){return this.app.services.ViewabilityService.check({element:this.$playerContainer,threshold:this.ul})}setViewableThreshold(e){this.app?this.app.services.ViewabilityService.setViewableThreshold(e):this.fl=e}setAmpUserConsent(e){this.app.services.UserManagerService.setAmpUserConsent(e)}triggerDestroy(){this.app.services.EventsStorageService.destroy(),this.mediator.publish(this,o.b.Destroy)}disableAdvertising(){this.Cl.disableAdvertising()}enableAdvertising(){this.Cl.enableAdvertising()}destroy(){this.adHandler&&this.adHandler.destroy(),this.Cl&&this.Cl.destroy(),this.floatingModule&&(this.floatingModule.destroy(),this.floatingModule=null)}}var et,tt,it=i(13);class st{static getScaledImageUrl(e,t,i,s){if(e&&!Object(Te.f)({width:t,height:i}))return Object(A.e)(s)&&(t=Object(Te.e)(t,s),i=Object(Te.e)(i,s)),`${e}${st.getScaledImageQueryParams(t,i)}`.trim()}static getScaledImageQueryParams(e,t){return Object(Te.f)({width:e,height:t})?"":`?width=${e}&height=${t}&fit=bounds`}static getSmartCroppedImageUrl(e,t,i){return Object(A.h)(e)||(e=it.a.endPoints.base.image),Object(Te.f)({width:t,height:i})&&(t=140,i=80),`${e}${st.getSmartCroppedImageQueryParams(t,i)}`}static getSmartCroppedImageQueryParams(e,t){return Object(Te.f)({width:e,height:t})?"":`?crop=${e}:${t},smart&width=${e}&height=${t}&format=jpeg&quality=60&fit=crop`}}class rt{constructor(e){this.context=e}onClick(){}canTransitionToState(e){return!0}enterState(){this.initState(),this.context.currentState=this}}function nt(s,e,r,n){s.style.top=`${function(e,t){let i=e-r.clientY;e=r.clientY+r.height-e;return n.alignTop&&i>s.offsetHeight?i-=s.offsetHeight:!n.alignTop&&e<s.offsetHeight?i-=s.offsetHeight-e:(i+=t)+s.offsetHeight>r.height&&(i=r.height-s.offsetHeight),i}(e.clientY,e.height)}px`,s.style.left=`${function(e,t,i,s){var r=s.distanceFromMargin||0;let n=Math.ceil(t)-Math.ceil(i.clientX),o=t,a=o+e.offsetWidth;t=i.clientX+i.width;if(s.alignMiddle){const l=e.offsetWidth/2;n-=Math.ceil(l),o-=l,a-=l}return s.alignMiddle||s.forceRight?i.clientX>o?n=0+r:t<a&&(n-=Math.ceil(a)-Math.ceil(t)+r):a>t&&(n-=e.offsetWidth),n}(s,e.clientX,r,n)}px`}(t=et=et||{})[t.PlayButton=0]="PlayButton",t[t.BigPlayButton=1]="BigPlayButton",t[t.VolumeButton=2]="VolumeButton",t[t.VolumeProgress=3]="VolumeProgress",t[t.VolumeControls=4]="VolumeControls",t[t.ExpandButton=5]="ExpandButton",t[t.SettingsButton=6]="SettingsButton",t[t.CaptionButton=7]="CaptionButton",t[t.CaptionComponent=8]="CaptionComponent",t[t.CastButton=9]="CastButton",t[t.ShareButton=10]="ShareButton",t[t.UpNextButton=11]="UpNextButton",t[t.UpNextBox=12]="UpNextBox",t[t.PreviousButton=13]="PreviousButton",t[t.LogoComponent=14]="LogoComponent",t[t.LogoOutstream=15]="LogoOutstream",t[t.MoreButton=16]="MoreButton",t[t.ElapsedTimeLabel=17]="ElapsedTimeLabel",t[t.TotalDurationLabel=18]="TotalDurationLabel",t[t.ProgressBar=19]="ProgressBar",t[t.QualityMenu=20]="QualityMenu",t[t.QueStateOverlay=21]="QueStateOverlay",t[t.Loader=22]="Loader",t[t.ContextMenu=23]="ContextMenu",t[t.ElementsSettingsMenu=24]="ElementsSettingsMenu",t[t.CloseButton=25]="CloseButton",t[t.SkipAdButton=26]="SkipAdButton",t[t.AdLoadingScreen=27]="AdLoadingScreen",t[t.CtaButton=28]="CtaButton",t[t.PlayspaceProgressBar=29]="PlayspaceProgressBar",t[t.PlayspaceSettingsMenu=30]="PlayspaceSettingsMenu",t[t.ClickToPlayButton=31]="ClickToPlayButton",t[t.SlideTitle=32]="SlideTitle",t[t.SkipAd=33]="SkipAd",t[t.TopTitle=34]="TopTitle",t[t.TopLogo=35]="TopLogo",t[t.TopSlideTitle=36]="TopSlideTitle",t[t.TopStoryTitle=37]="TopStoryTitle",t[t.TextLabel=38]="TextLabel",t[t.LivePoster=39]="LivePoster",t[t.LiveIcon=40]="LiveIcon",(Lt=tt=tt||{})[Lt.Top=1]="Top",Lt[Lt.Bottom=2]="Bottom",Lt[Lt.Right=4]="Right",Lt[Lt.Left=8]="Left",Lt[Lt.Middle=16]="Middle";class ot extends n.a{constructor(e,t,i,s,r){super(),this.mediator=e,this.Os=t,this.if=i,this.Yn=r,this.ef=t.createElementByString(s)}getContainer(){return this.ef}getCoordinates(e){const t=this.Os.getElementCoordinates(this.ef);return this.Yn&&e?((e&tt.Top)===tt.Top&&(t.clientY-=this.ef.clientHeight),(e&tt.Right)===tt.Right&&(t.clientX+=this.ef.clientWidth)):t.clientX+=t.width/2,t}showComponent(e=!1){var t;this.ef&&this.ef.parentElement&&(t=Object(S.u)(this.ef.parentElement,"cnx-ui-btn")?this.ef.parentElement:this.ef,(e&&Object(S.E)(t)?Object(S.g):Object(S.R))(t))}hideComponent(e=!1){if(this.ef&&this.ef.parentElement){const t=Object(S.u)(this.ef.parentElement,"cnx-ui-btn")?this.ef.parentElement:this.ef;e&&!Object(S.E)(t)?Object(S.h)(t,()=>Object(S.v)(t)):Object(S.v)(t)}}destroy(){this.ef.innerHTML="",this.ef.style.display="none",this.if.unregisterAll(this)}}var at,lt=i(8);class ct extends ot{constructor(e,t,i,s,r){super(e,t,i,s,r),this.eventList=[lt.a[lt.a.Scroll],lt.a[lt.a.Click]],this.sf=e=>{this.onInteractionHandler(e)},this.onBeforeClick=e=>{e.stopPropagation()},this.onClick=e=>{this.onInteractionHandler(e),this.onClickHandler(e)}}onInteractionHandler(e){e.stopPropagation()}onClickHandler(e){}initComponent(){var e={interactionstart:this.onBeforeClick,interaction:this.sf,click:this.onClick};this.if.register(this.ef,this,this.if,e),this.Yn&&(this.subscribe(lt.a[lt.a.Click],this.if,()=>{this.onClickHandler()}),this.relay(lt.a[lt.a.Scroll],this.if,this,this.mediator))}destroy(){this.unsubscribeAll(this.if),super.destroy()}}class dt extends ct{constructor(){super(...arguments),this.onClick=e=>{this.onInteractionHandler(e),this.onClickHandler(),this.addBoomEffect()}}addBoomEffect(){Object(S.a)(this.ef,"cnx-boom"),this.ef.getClientRects(),Object(S.a)(this.ef,"cnx-boom-anim");const t=e=>{"transform"===e.propertyName&&(Object(S.L)(this.ef,"cnx-boom"),Object(S.L)(this.ef,"cnx-boom-anim"),this.ef.removeEventListener("transitionend",t))};this.ef.addEventListener("transitionend",t)}initComponent(){super.initComponent(),this.ef.appendChild(this.Os.createElementByString('<cnx class="cnx-boom-elem"></cnx>'))}}class ht extends dt{constructor(){super(...arguments),this.eventList=[P[P.HoverStart],P[P.HoverEnd],...this.eventList],this.onStartHover=()=>{Object(S.a)(this.ef,l.h.HoverStart),Object(S.a)(this.ef,l.h.HoverEnd),this.mediator.publish(this,P[P.HoverStart])},this.onEndHover=()=>{Object(S.L)(this.ef,l.h.HoverEnd),this.mediator.publish(this,P[P.HoverEnd])}}initComponent(){super.initComponent(),this.Yn?(this.ef.addEventListener("touchstart",this.onStartHover),this.ef.addEventListener("touchend",this.onEndHover),this.ef.addEventListener("touchcancel",this.onEndHover)):(this.ef.addEventListener("mouseenter",this.onStartHover),this.ef.addEventListener("mouseleave",this.onEndHover))}destroy(){this.Yn?(this.ef.removeEventListener("touchstart",this.onStartHover),this.ef.removeEventListener("touchend",this.onEndHover),this.ef.removeEventListener("touchcancel",this.onEndHover)):(this.ef.removeEventListener("mouseenter",this.onStartHover),this.ef.removeEventListener("mouseleave",this.onEndHover)),super.destroy()}onInteractionHandler(e){this.onEndHoverClick()}onEndHoverClick(){Object(S.L)(this.ef,l.h.HoverEnd),Object(S.L)(this.ef,l.h.HoverStart)}}(kt=at=at||{})[kt.Play=0]="Play",kt[kt.Pause=1]="Pause";class ut extends ht{constructor(e,t,i,s,r){super(e,t,i,s,r),this.nf=!1,this.eventList=[P[P.Play],P[P.Pause],P[P.Replay],P[P.StateChanged],...this.eventList],this.rf="Play",this.hf="Pause",this.setState(at.Pause)}onClickHandler(){this.Jt===at.Pause?this.mediator.publish(this,P[P.Pause]):this.nf?this.mediator.publish(this,P[P.Replay]):this.mediator.publish(this,P[P.Play])}af(){}toggleReplay(e){this.nf=e}setState(e){this.Jt!==e&&(this.Jt=e,this.af(),this.mediator.publish(this,P[P.StateChanged]))}get tooltip(){return this.Jt===at.Play?this.rf:this.hf}}class pt extends rt{initState(){this.context.$uiContainer.classList.add(l.j.Playing);const e=this.context.getComponent(et.PlayButton);e&&e.setState(at.Pause);const t=this.context.getComponent(et.BigPlayButton);t&&t.setState(at.Pause)}exitState(){this.context.$uiContainer.classList.remove(l.j.Playing)}}class gt extends pt{constructor(){super(...arguments),this.cf=100}uf(){if(!this.elapsedTimeoutId&&this.context.duration){const t=Date.now();this.elapsedTimeoutId=setTimeout(()=>{this.context.elapsedTime+=(Date.now()-t)/1e3;const e=this.context.getComponent(et.ProgressBar);e&&e.setProgress(Object(Te.g)(0,this.context.duration,0,100,this.context.elapsedTime)),this.elapsedTimeoutId=null,this.uf()},this.cf)}}initState(){super.initState(),this.context.duration&&this.uf()}exitState(){super.exitState(),this.context.duration&&(clearTimeout(this.elapsedTimeoutId),this.elapsedTimeoutId=null)}}class mt extends rt{initState(){this.context.$uiContainer.classList.add(l.j.Paused);const e=this.context.getComponent(et.PlayButton);e&&e.setState(at.Play);const t=this.context.getComponent(et.BigPlayButton);t&&t.setState(at.Play)}exitState(){this.context.$uiContainer.classList.remove(l.j.Paused)}}class ft extends mt{initState(){super.initState()}exitState(){super.exitState()}}class yt{constructor(e,t){this.lf=e,this.Os=t,this.df=/\[\[([0-9]+)]]/g,this.ff=[],this.pf=[],this.bf=this.Os.createElementByString(this.vf(this.lf))}mf(e){return`<cnx class="pl_${e}"></cnx>`}vf(e){return e.replace(this.df,(e,t)=>(this.ff.push(parseInt(t,10)),this.mf(t)))}gf(t,i){return this.pf.some(e=>e.slotName===t)||this.pf.some(e=>e.component===i)?null:this.bf.getElementsByClassName(`pl_${t}`)[0]}getComponentList(){return this.ff}getRenderedDom(){return this.bf}registerSlot(e,t){const i=this.gf(e,t);if(null===i)return!1;var s=t.getContainer();return i.parentNode.replaceChild(s,i),this.pf.push({component:t,slotName:e}),!0}initComponents(){this.pf.forEach(e=>e.component.initComponent())}}class bt extends n.a{constructor(e,t,i){super(),this.globalDomUtilsService=e,this.templateString=t,this.componentFactory=i,this.yf={},this.wf=new yt(t,e),this.addComponents()}addComponents(){this.wf.getComponentList().forEach(e=>{var t=this.componentFactory.createComponent(e,this);this.registerComponent(e,t)})}registerComponent(e,t){this.wf.registerSlot(e,t),this.yf[e]=t,this.xf(t)}xf(i){i.eventList.forEach(t=>{this.subscribe(t,i,e=>{t===P[P.RebindComponent]&&this.rebindComponentEvents(i),this.handleComponentEvent(t,e,i)})})}rebindComponentEvents(e){e&&(this.unsubscribeAll(e),this.xf(e))}getComponent(e){return this.yf[e]}destroy(){Object.keys(this.yf).forEach(e=>{this.yf[e].destroy()})}}class vt extends bt{constructor(e,t,i,s,r){super(i,s,r),this.mediator=e,this.$container=t,this.componentFactory=r,this.$uiContainer=this.wf.getRenderedDom(),t.appendChild(this.$uiContainer),this.wf.initComponents()}changeState(e){const t=this.Sf[e];t!==this.currentState&&this.currentState.canTransitionToState(t)&&(this.currentState.exitState(t),t.enterState())}hide(){Object(S.a)(this.$uiContainer,l.h.DisplayNone)}show(){Object(S.L)(this.$uiContainer,l.h.DisplayNone)}destroy(){super.destroy(),this.$uiContainer.parentNode.removeChild(this.$uiContainer)}}var Pt,t=i(92),St=i.n(t);class It{constructor(e,t){this.Of=e,this.Os=t,this.kf=[],this._f={top:12,bottom:24,margin:4},this.jf=!1}Af(){this.If=this.Os.getElementCoordinates(this.Of.parentElement)}Cf(e,t){e.getElementsByClassName("cnx-tooltip-text")[0].innerHTML=t}Tf(t){if(t&&t.tooltip&&!this.jf&&!this.kf.find(e=>e.component===t)){var i=this.Os.createElementByString(St.a);this.Cf(i,t.tooltip),this.Af();const a=t.getCoordinates();let e=!1;var{clientY:s,height:r}=a,{clientY:n,height:o}=this.Os.getElementCoordinates(this.Of);s<=n+o/2-r?a.clientY+=this._f.top:(a.clientY-=this._f.bottom,e=!0),this.Of.appendChild(i),nt(i,a,this.If,{alignMiddle:!0,alignTop:e,forceRight:!0,distanceFromMargin:this._f.margin}),Object(S.i)(i),Object(S.a)(i,l.s.OpacityInTransition),this.kf.push({component:t,domElement:i})}}Pf(t){var e;!t.tooltip||(e=this.kf.find(e=>e.component===t))&&(e=e.domElement,this.Of.removeChild(e),this.kf=this.kf.filter(e=>e.component!==t))}Mf(e){var t;!e.tooltip||(t=this.kf.find(e=>e.component===this.Ef))&&this.Cf(t.domElement,e.tooltip)}Lf(){this.Ef=null,this.kf.forEach(e=>this.Pf(e.component))}setDistanceValues(e){this._f=Object.assign(Object.assign({},this._f),e)}hoverStart(e){this.Ef=e,this.Tf(e)}hoverEnd(e){this.Ef=null,this.Pf(e)}stateChanged(e){this.Ef===e&&this.Mf(e)}disableTooltips(){this.jf=!0,this.Lf()}enableTooltips(){this.jf=!1,this.Tf(this.Ef)}}(Lt=Pt=Pt||{})[Lt.expand=0]="expand",Lt[Lt.collapse=1]="collapse";class Tt extends ht{constructor(){super(...arguments),this.eventList=[P[P.Expand],P[P.Collapse],...this.eventList],this.Rf="Full Screen",this.Bf="Exit Full Screen"}onClickHandler(){switch(this.Jt){case Pt.collapse:this.mediator.publish(this,P[P.Expand]);break;case Pt.expand:this.mediator.publish(this,P[P.Collapse]);break;default:this.mediator.publish(this,P[P.Expand])}}af(){this.ef&&(this.Jt===Pt.expand?this.ef.classList.add(l.h.Active):this.ef.classList.remove(l.h.Active))}setState(e){this.Jt!==e&&(this.Jt=e,this.af())}get tooltip(){return this.Jt===Pt.expand?this.Bf:this.Rf}}class At extends vt{constructor(e,t,i,s,r){super(e,t,i,s,r),this.Df=new It(this.$uiContainer,i)}handleComponentEvent(e,t,i){let s=i;switch(t.payload&&t.payload.targetComponent&&(s=t.payload.targetComponent),e){case P[P.HoverStart]:this.Df.hoverStart(s);break;case P[P.HoverEnd]:this.Df.hoverEnd(s);break;case P[P.StateChanged]:this.Df.stateChanged(s)}}updateDuration(e,t){if(Object(S.u)(this.$uiContainer,l.g.ShowControls)){const i=this.getComponent(et.ElapsedTimeLabel),s=this.getComponent(et.TotalDurationLabel),r=this.getComponent(et.ProgressBar);if(i&&i.setTime(e),s&&s.setTime(t),r){const i=0,s=t;r.setProgress(Object(Te.g)(0,s,0,100,e))}}}updateVolume(e){}expand(){this.getComponent(et.ExpandButton).setState(Pt.expand)}collapse(){this.getComponent(et.ExpandButton).setState(Pt.collapse)}}class Ot extends ht{constructor(){super(...arguments),this.eventList=[P[P.Settings],...this.eventList],this.Ff="Settings"}onClickHandler(){this.mediator.publish(this,P[P.Settings])}toggleHDFlag(e){(e?Object(S.a):Object(S.L))(this.ef,l.h.Active)}get tooltip(){return this.Ff}}var kt=i(55),Ct=i.n(kt);class wt extends ht{constructor(e,t,i,s,r,n=!1,o){super(e,t,i,s,o),this.$f=r,this.isActive=n}onClickHandler(){this.isActive=!this.isActive,this.onStateChange()}get isActive(){return this.Jt}set isActive(e){this.Jt=e,(this.Jt?Object(S.a):Object(S.L))(this.ef,this.$f)}}class xt extends wt{constructor(){super(...arguments),this.eventList=[P[P.CaptionOn],P[P.CaptionOff],P[P.StateChanged],...this.eventList],this.Uf="Subtitles On",this.Vf="Subtitles Off"}onStateChange(){this.mediator.publish(this,this.isActive?P[P.CaptionOn]:P[P.CaptionOff]),this.mediator.publish(this,P[P.StateChanged])}get tooltip(){return this.isActive?this.Vf:this.Uf}}var t=i(56),Et=i.n(t),Lt=i(93),Mt=i.n(Lt);class Rt extends ct{constructor(){super(...arguments),this.qu=!1,this.eventList=[P[P.Next]]}onClickHandler(){this.mediator.publish(this,P[P.Next])}show(){this.qu=!0,this.ef.classList.add("cnx-fade-in-up-next")}hide(){this.qu=!1,this.ef.classList.remove("cnx-fade-in-up-next")}isInView(){return this.qu}updateCard(e,t){const i=this.ef.getElementsByTagName("img")[0];i.setAttribute("src",e),i.style.display="none",i.onload=()=>{i.style.display="block"},this.ef.getElementsByClassName("cnx-up-next-box-text")[0].innerHTML=Object(A.h)(t)?t:""}}class Bt extends ot{constructor(e,t,i,s,r){super(e,t,i,s),this.settings=r,this.eventList=[],this.Nf=144,this.Hf=36}createLogo(){let e=this.Os.createElement("img");e.onload=()=>{e=this.resizeLogo(e),this.ef.appendChild(e)},e.src=this.settings.logoUrl,e.alt=""}resizeLogo(e){var t=e.naturalWidth,i=e.naturalHeight;return t&&i&&(this.settings.logoPosition===E.ProtoLogoPositionMode.ControlBar?(e.style.setProperty("height",`${this.Hf}px`,"important"),e.style.setProperty("width",`${this.Hf}px`,"important")):this.Hf*(t/i)>this.Nf?(e.style.setProperty("width",`${this.Nf}px`,"important"),e.style.setProperty("height","auto","important")):(e.style.setProperty("width","auto","important"),e.style.setProperty("height",`${this.Hf}px`,"important"))),e}initComponent(){try{this.createLogo()}catch(e){Object(g.a)({message:"LogoComponent_createLogo",exception:e.message,callStack:e.stack,level:f.ProtoLoggingLevelEnum.FATAL})}}}var jt=i(33);class Dt extends ot{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.qf=this.ef.getElementsByTagName("cnx-span")[0]}setTime(e){isNaN(e)||"number"!=typeof e?Object(S.a)(this.ef,l.h.Invisible):(this.qf.innerHTML=Object(jt.f)(e),Object(S.L)(this.ef,l.h.Invisible))}}var kt=i(47),_t=i.n(kt);class Ft extends ot{constructor(e,t,i,s,r=!1){super(e,t,i,s,r),this.zf=0,this.Wf=null,this.Gf=0,this.Jf=0,this.Qf=100,this.cacheDomElements()}cacheDomElements(){this.Xf=this.ef.getElementsByClassName("cnx-progress-fill")[0],this.Yf=this.ef.getElementsByClassName("cnx-progress-rail")[0]}cacheWidths(){this.zf=this.fixedRailWidth||this.Yf.getBoundingClientRect().width,this.Wf=this.Yf.getBoundingClientRect().left}updateUi(e){e=this.getComputedTranslation(e);this.Gf=e,this.Xf.style.transform=`translateX(${e}px)`}isValidTranslation(){return 0<=this.Gf&&this.Gf<=this.zf}getComputedTranslation(e){return e<0?0:e>this.zf?this.zf:e}setProgress(e){this.cacheWidths();e=this.getComputedTranslation(Object(Te.g)(0,100,0,this.zf,e));this.updateUi(e)}disableTransition(){Object(S.a)(this.ef,l.h.NoTransition)}enableTransition(){Object(S.L)(this.ef,l.h.NoTransition)}Kf(e){this.disableTransition(),this.setProgress(e),Object(S.i)(this.Xf),this.enableTransition()}forceStartState(){this.Kf(this.Jf)}forceEndState(){this.Kf(this.Qf)}initComponent(){this.cacheWidths()}destroy(){super.destroy()}}class Ut extends Ft{constructor(e,t,i,s,r=!1){super(e,t,i,s,r),this.Zf=0,this.Ca=null,this.tp=!1,this.eventList=[P[P.DraggingStart],P[P.DraggingStopped]],this.ep=e=>{this.cacheWidths(),this.sp(this.np(e)),this.Yn?this.ef.addEventListener(this.rp,this.ap):this.Os.addEventListenerOnGlobal(this.rp,this.ap),this.onDragStart()},this.ap=t=>{null===this.Ca&&(this.tp||(this.tp=!0,this.disableTransition()),this.Ca=this.Os.requestAnimationFrameHelper(()=>{var e=this.op+(this.np(t)-this.cp);this.isValidTranslation()&&this.up(e),this.Ca=null}))},this.lp=e=>{e.stopPropagation(),this.Yn?this.ef.removeEventListener(this.rp,this.ap):this.Os.removeEventListenerOnGlobal(this.rp,this.ap),this.tp=!1,this.enableTransition(),this.onDragEnd()},this.rp=r?"touchmove":"mousemove"}cacheDomElements(){super.cacheDomElements(),this.dp=this.ef.getElementsByClassName("cnx-progress-handle")[0]}cacheWidths(){super.cacheWidths(),this.Zf=this.dp.getBoundingClientRect().width/2}updateUi(e){super.updateUi(e);e=this.getComputedTranslation(e);this.dp.style.transform=`translateX(${e-this.Zf}px)`}onDragEnd(){this.mediator.publish(this,P[P.DraggingStopped])}onDragStart(){this.mediator.publish(this,P[P.DraggingStart])}np(e){return(this.Yn?e.touches.item(0):e).clientX}sp(e){this.op=e-this.Wf,this.cp=e,this.up(this.op)}up(e){var t;this.isValidTranslation()&&(t=this.getComputedTranslation(e),e=this.zf,this.updateUi(t),this.onProgressChange(Object(Te.g)(0,e,0,100,t)))}setProgress(e){super.setProgress(e)}initComponent(){super.initComponent();var e={interactionstart:this.ep,interactionend:this.lp};this.if.register(this.ef,this,this.if,e)}destroy(){super.destroy()}}class Nt extends Ut{constructor(e,t,i,s,r=!1){super(e,t,i,s,r),this.fp=!1,this.pp=e=>{Object(S.a)(this.ef,l.h.HoverEnd),this.fp=!0},this.bp=e=>{e=this.getComputedTranslation(e.clientX-this.Wf);this.vp.style.transform=`translateX(${e}px)`},this.mp=e=>{this.vp.style.transform="translateX(0)",this.fp=!1,this.gp()},this.eventList=this.eventList.concat([P[P.Seek],P[P.SeekingStart],P[P.SeekingStopped]])}onProgressChange(e){this.mediator.publish(this,P[P.Seek],{payload:e-.1})}onDragEnd(){super.onDragEnd(),this.mediator.publish(this,P[P.SeekingStopped]),this.gp()}onDragStart(){super.onDragStart(),this.mediator.publish(this,P[P.SeekingStart])}gp(){this.fp||this.tp||Object(S.L)(this.ef,l.h.HoverEnd)}initComponent(){super.initComponent(),this.ef.addEventListener("mousemove",this.bp),this.ef.addEventListener("mouseenter",this.pp),this.ef.addEventListener("mouseleave",this.mp),this.vp=this.ef.getElementsByClassName("cnx-progress-follow")[0]}hide(){Object(S.v)(this.ef)}show(){Object(S.R)(this.ef)}destroy(){super.destroy(),this.ef.removeEventListener("mousemove",this.bp),this.ef.removeEventListener("mouseenter",this.pp),this.ef.removeEventListener("mouseleave",this.mp)}}var t=i(57),Vt=i.n(t);class Ht extends ot{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.hide()}show(){Object(S.R)(this.ef)}hide(){Object(S.v)(this.ef)}}var qt,Lt=i(94),Wt=i.n(Lt),kt=i(58),$t=i.n(kt),t=i(95),Gt=i.n(t);(Lt=qt=qt||{})[Lt.SimpleMenuItem=0]="SimpleMenuItem",Lt[Lt.ToggleMenuItem=1]="ToggleMenuItem",Lt[Lt.SubmenuMenuItem=2]="SubmenuMenuItem";class zt extends ot{constructor(e,t,i,s,r,n,o,a){super(e,t,i,s,a),this.eventName=r,this.yp=n,this.wp=o,this.xp=[],this.eventList=[P[P.RebindComponent],lt.a[lt.a.HoldStart],lt.a[lt.a.HoldEnd],P[P.ContextMenuOpen],P[P.ContextMenuClose]],this.Sp=!1,this.Op=10,this.kp=e=>{this._p.removeChild(e.target),this._p.style.width=`${this.ef.clientWidth}px`},this.close=e=>{e&&Object(Je.h)(e.target,l.g.ContextController,this.Op)||!1!==this.isOpen&&(this.Sp&&(this.mediator.publish(this,lt.a[lt.a.HoldEnd]),Object(S.L)(this.wp,l.h.OnHold),this.Sp=!1),this.isOpen=!1,this.mediator.publish(this,P[P.ContextMenuClose]),Object(S.a)(this.ef,l.h.Invisible),this.if.removeGlobalActions(this.ef),this.closeAllSubmenuItems())},this.close(),this.cacheCoordinates(),this.eventList.push(this.eventName),this._p=this.ef.getElementsByClassName(l.k.Container)[0],this.jp=this.Os.createElementByString(`<cnx class="${l.k.Items}"></cnx>`),this._p.appendChild(this.jp),Object(S.a)(this._p,l.g.ContextController)}addNewItemsEvent(e){e=e.filter(e=>!Object(p.g)(e,this.eventList));0<e.length&&(this.eventList=[...this.eventList,...e],this.mediator.publish(this,P[P.RebindComponent],{payload:this.yp}))}cacheCoordinates(){this.If=this.Os.getElementCoordinates(this.wp)}positionContextMenu(e){this.cacheCoordinates(),nt(this.ef,e,this.If,{alignMiddle:this.alignMiddle,alignTop:this.alignTop,forceRight:this.forceRight})}Ap(e){switch(e.type){case qt.SimpleMenuItem:this.close();break;case qt.SubmenuMenuItem:this.Cp(e)}}sendEvent(e,t){this.mediator.publish(this,e,t)}Cp(e){var t=this.ef.clientWidth;e.isOpen?(e.$menuContainer.addEventListener("transitionend",this.kp),this.jp.style.left="0px",e.$menuContainer.style.left="0px"):(e.$menuContainer.removeEventListener("transitionend",this.kp),this._p.style.width=`${2*t}px`,this._p.appendChild(e.$menuContainer),Object(S.i)(this._p),this.jp.style.left=`${-t}px`,e.$menuContainer.style.left=`${-t}px`),e.isOpen=!e.isOpen}closeAllSubmenuItems(){this.xp.forEach(e=>{e.type===qt.SubmenuMenuItem&&e.isOpen&&this.Cp(e)})}buildContextMenu(e){let t=[];this.jp.innerHTML="",this._p.style.width=`${this.ef.clientWidth}px`,this.xp.forEach(e=>this.unsubscribeAll(e)),this.xp=e,this.xp.forEach(i=>{t=[...t,...i.eventList],i.eventList.forEach(t=>this.subscribe(t,i,e=>{this.Ap(i),this.sendEvent(t,e)})),i.initComponent(),this.jp.appendChild(i.getContainer())}),this.addNewItemsEvent(t)}getAnchorCoordinatesTo(e){return null===e||void 0===e?void 0:e.getCoordinates()}open(e,t=!1){t&&(this.Sp=t,this.mediator.publish(this,lt.a[lt.a.HoldStart]),Object(S.a)(this.wp,l.h.OnHold)),this.isOpen=!0,this.mediator.publish(this,P[P.ContextMenuOpen]),this.positionContextMenu(e);e={interactionend:this.close};this.if.addGlobalActions(this.ef,e),Object(S.L)(this.ef,l.h.Invisible)}}class Jt extends ct{constructor(e,t,i,s,r){super(e,t,i,Jt.getTemplate(r),s),this.mediator=e,this.Tp=!1,this.type=qt.SimpleMenuItem,this.eventList=[],this.event=r.activeEvent,this.name=r.name,r.eventList?this.eventList=r.eventList:this.eventList.push(this.event),this.Pp=this.ef.getElementsByClassName(l.k.ItemTitle)[0],this.Mp=this.ef.getElementsByClassName(l.k.ItemIcon)[0]}static getTemplate(e){var t=`<cnx class="${l.k.ItemIcon}">${e.icon}</cnx>`,i=`<cnx class="${l.k.ItemExtra}">${e.label}</cnx>`;return`<cnx class="${l.k.ClickOption}">\n                    ${e.icon?t:""}\n                    <cnx class="${l.k.ItemTitle}">${e.name}</cnx>\n                    ${e.label?i:""}\n                </cnx>`}onClickHandler(e){this.mediator.publish(this,this.event)}changeItemName(e){this.Pp.innerHTML=e}changeItemIcon(e){this.Mp.innerHTML=e}get isActive(){return this.Tp}set isActive(e){this.Tp=e,(this.Tp?Object(S.a):Object(S.L))(this.ef,l.h.Active,l.f.AccentColor)}}var kt=i(46),Kt=i.n(kt),Qt=i(18);class Yt extends zt{constructor(){super(...arguments),this.alignMiddle=!1,this.alignTop=!1,this.forceRight=!0}Ep(){var e=Qt.a.version?`V${Qt.a.version}`:"dev",e=[new Jt(this,this.Os,this.if,this.Yn,{activeEvent:P[P.AboutClick],name:"About Connatix",icon:Kt.a,label:e})];this.buildContextMenu(e)}initComponent(){this.Ep()}onResize(){this.cacheCoordinates(),this.close()}}class Xt extends wt{constructor(e,t,i,s,r){super(e,t,i,Xt.getTemplate(r),l.h.Active,r.defaultState,s),this.mediator=e,this.eventList=[],this.type=qt.ToggleMenuItem,{eventOn:this.Lp,eventOff:this.Rp}=r,this.eventList.push(this.Lp,this.Rp)}static getTemplate(e){var t=`<cnx class="${l.k.ItemIcon}">${e.icon}</cnx>`;return`<cnx class="${l.k.ToggleOption} ${e.defaultState?l.h.Active:""}">\n                    ${e.icon?t:""}\n                    <cnx class="${l.k.ItemTitle}">${e.name}</cnx>\n                    <cnx class="${l.k.ItemExtra}">\n                        <cnx class="cnx-cm-toggle-switch">\n                            <cnx class="cnx-cm-slider ${l.f.AccentColor}"></cnx>\n                        </cnx>\n                    </cnx>\n                </cnx>`}onStateChange(){this.mediator.publish(this,this.isActive?this.Lp:this.Rp)}get tooltip(){return""}}const Zt={ContextAbout:"About Connatix",ContextQuality:"Video Settings",ContextCaption:"Closed Caption"};class ei extends zt{constructor(e,t,i,s,r,n,o,a,l,c=!0){super(e,t,i,s,r,n,o,l),this.alignMiddle=!1,this.alignTop=!1,this.forceRight=!1,this.Bp=[new Jt(this,this.Os,this.if,this.Yn,{activeEvent:P[P.AboutClick],name:Zt.ContextAbout,icon:Kt.a,label:Qt.a.version?`V${Qt.a.version}`:"dev"})],this.Dp=new Xt(this,this.Os,this.if,this.Yn,{eventOff:P[P.CaptionOff],eventOn:P[P.CaptionOn],defaultState:c,name:Zt.ContextCaption,icon:Et.a}),this.Fp=[this.Dp],this.$p=a}Up(){let e=this.Bp;this.$p===l.t.Lg&&(e=[...this.Fp,...this.Bp]),this.buildContextMenu(e)}initComponent(){this.Up()}onResize(e,t){this.isOpen&&this.positionContextMenu(e),this.$p!==t?(this.$p=t,this.closeAllSubmenuItems(),this.Up()):this.$p=t}toggleCaptionState(e){this.Dp.isActive!==e&&(this.Dp.isActive=e)}hideCaptionOption(){this.Dp.hideComponent()}showCaptionOption(){this.Dp.showComponent()}getAnchorCoordinatesTo(e){let t=tt.Right;return this.$p!==l.t.Xl&&this.$p!==l.t.Xxl&&(t|=tt.Top),e.getCoordinates(t)}}function ti(e){return e.replace(/[-]/g,"&#x2011;")}function ii(i){try{return Object.keys(i).reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:Object(A.h)(i[t])&&i[t].includes("%%")?void 0:i[t]}),{})}catch(e){return Object(g.a)({message:"sanitizeDfpMacros_error",exception:e.message,callStack:e.stack,level:f.ProtoLoggingLevelEnum.WARNING}),Object.keys(i).reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:Object(A.h)(i[t])&&-1<i[t].indexOf("%%")?void 0:i[t]}),{})}}function si(e){return/<[a-z\/][\s\S]*>/i.test(e)}class ri extends ot{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.Vp=this.ef.getElementsByClassName(l.e.CaptionContainer)[0]}updateCaptions(e){this.Vp.innerHTML=e&&e.text?e.text.replace(/(?:\r\n|\r|\n)/g,"<br>"):""}}var t=i(96),ni=i.n(t);class oi extends Bt{constructor(){super(...arguments),this.Np="cnx-logo-height",this.Hp="cnx-logo-width"}createLogo(){this.ef.onload=()=>{this.ef.style.visibility="visible",this.resizeLogo(this.ef)},this.ef.style.visibility="hidden",this.ef.src=this.settings.logoUrl}resizeLogo(e){var t=e.naturalWidth,i=e.naturalHeight;return t&&i&&(i<t?Object(S.a)(e,this.Hp):Object(S.a)(e,this.Np)),e}}var Lt=i(97),ai=i.n(Lt),kt=i(98),li=i.n(kt);class ci extends Ut{constructor(e,t,i,s,r=!1){super(e,t,i,s,r),this.qp=80,this.fixedRailWidth=this.qp,this.eventList.push(P[P.Volume])}onProgressChange(e){this.mediator.publish(this,P[P.Volume],{payload:e})}}var t=i(99),di=i.n(t),Lt=i(100),hi=i.n(Lt);function ui(e,t,i){const s=i?Ue[Ue.Auto]:t.height.toString();e.forEach(e=>-1<e.name.indexOf(s)?e.isActive=!0:e.isActive=!1);const r=e.find(e=>Ue[e.event]===Ue.Auto);if(i){const i=e.find(e=>e.event===t.height.toString());if(i){const e=`${r.name} (${i.name})`;r.changeItemName(e)}}else r.changeItemName(r.name)}class pi extends zt{constructor(){super(...arguments),this.alignMiddle=!0,this.alignTop=!0,this.forceRight=!1,this.zp=[],this.Wp={height:360,quality:Ue.Auto},this.Gp=!0}sendEvent(e){this.Gp=Ue[e]===Ue.Auto,this.mediator.publish(this,this.eventName,{payload:{height:this.Gp?this.Wp.height:parseInt(e,10),quality:this.Gp?Ue.Auto:Ue.Strict}})}initComponent(){}createQualityMenu(e){this.zp=[],this.Jp=e,this.Jp.forEach(e=>{this.zp.push(new Jt(this,this.Os,this.if,this.Yn,{name:`${e.videoHeight}p`,activeEvent:e.videoHeight.toString(),label:e.isHD?"HD":void 0}))}),this.zp.push(new Jt(this,this.Os,this.if,this.Yn,{name:Ue[Ue.Auto],activeEvent:Ue[Ue.Auto]})),ui(this.zp,this.Wp,this.Gp),this.buildContextMenu(this.zp)}onResize(e){this.cacheCoordinates(),this.isOpen&&this.positionContextMenu(e)}updateQuality(e){Object(p.h)(this.Jp)&&(this.Gp=e.quality===Ue.Auto,this.Wp.quality=e.quality,this.Wp.height=Object(Te.c)(e.height,this.Jp.map(e=>e.videoHeight)),ui(this.zp,this.Wp,this.Gp))}}var kt=i(101),gi=i.n(kt);class mi extends ot{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.hide()}show(){Object(S.R)(this.ef),Object(S.i)(this.ef),Object(S.a)(this.ef,l.h.Active)}hide(){Object(S.L)(this.ef,l.h.Active),Object(S.v)(this.ef)}}class fi extends ht{constructor(e,t,i,s,r,n,o){super(e,t,i,s,r),this.tooltip=o,this.Qp=et[n],this.eventList.push(this.Qp)}onClickHandler(){this.mediator.publish(this,this.Qp)}}class yi extends ct{constructor(e,t,i,s,r,n,o){super(e,t,i,s,r),this.tooltip=o,this.eventList=[],this.Qp=et[n],this.eventList.push(this.Qp)}onClickHandler(){this.mediator.publish(this,this.Qp)}}class bi{constructor(e,t,i,s){this.Os=e,this.if=t,this.Yn=i,this.Xp=new Map,Object.keys(s).forEach(e=>this.Yp(et[e],s[e]))}getButton(e,t){var{isHoverable:i,template:s,tooltip:r}=this.Kp(e);return new(i?fi:yi)(t,this.Os,this.if,s,this.Yn,e,r)}isGeneralComponent(e){return this.Xp.has(e)}Kp(e){return this.Xp.get(e)}Yp(e,t){this.Xp.set(e,t)}}t=i(102),Lt=i.n(t);function vi(e,t,i=!0){return i?`\n            <cnx class="cnx-icon-button cnx-button-${et[e].toLowerCase()} cnx-ui-btn-hoverable">\n                <cnx class="cnx-btn-container">\n                    ${t}\n                </cnx>\n            </cnx>\n        `.trim():`<cnx class="cnx-button-${et[e].toLowerCase()}">${t}</cnx>`}var kt=i(63),t=i.n(kt),kt=i(103),kt=i.n(kt),Pi={[et[et.MoreButton]]:{template:vi(et.MoreButton,kt.a),tooltip:"More",isHoverable:!0},[et[et.CloseButton]]:{template:vi(et.CloseButton,Lt.a),tooltip:"Close Player",isHoverable:!0},[et[et.UpNextButton]]:{template:vi(et.UpNextButton,t.a),tooltip:"Next",isHoverable:!0},[et[et.PreviousButton]]:{template:vi(et.PreviousButton,t.a),tooltip:"Previous",isHoverable:!0}};class Si extends ht{constructor(){super(...arguments),this.eventList=[P[P.SkipAd],...this.eventList],this.Zp=-1,this.tb=-1}initComponent(){super.initComponent(),this.hideComponent(),this.ib=this.ef.getElementsByTagName("cnx-span")[0],this.ib.innerHTML="Ad",this.eb=this.ef.querySelectorAll(`.${l.q.Timer} svg`)[0]}setSecondsUntilSkip(e){this.Zp=Math.ceil(e),this.tb=-1,0<this.Zp&&Object(S.Q)(this.eb,{"animation-duration":this.Zp+"s"})}tickDown(e){var t=this.Zp-Math.floor(e);t<0||0===this.tb||(e=Object(S.u)(this.ef,l.q.InTimer),this.tb=t,0===this.tb?(e&&Object(S.L)(this.ef,l.q.InTimer),this.ib.innerHTML="Ad"):(e||Object(S.a)(this.ef,l.q.InTimer),this.ib.innerHTML=`in ${this.tb}s`))}get tooltip(){}onClickHandler(){0===this.tb&&this.mediator.publish(this,P[P.SkipAd])}}var Lt=i(104),Ii=i.n(Lt),t=i(105),Ti=i.n(t),Ai=i(24);class Oi extends ot{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.sb=this.ef.getElementsByClassName(l.a.BackgroundImg)[0],this.rb=this.ef.getElementsByClassName(l.a.Icon)[0],this.rb.innerHTML=Ti.a,this.hb=this.ef.getElementsByClassName(l.a.ButtonContainer)[0];var e=this.ef.getElementsByClassName(l.a.Button)[0];this.ab=this.Os.createElementByString(`<a class="${l.a.Wrapper}" href="#">`),this.ab.target=Ai.c.Blank,this.ab.appendChild(e),this.hb.innerHTML="",this.hb.appendChild(this.ab),this.ob=this.ef.getElementsByClassName(l.a.InfoContainer)[0],this.cb=this.ef.getElementsByClassName(l.a.FallbackContainer)[0],this.ub=this.ef.getElementsByClassName(l.a.SlotCountText)[0]}setBackgroundImg(e){Object(A.h)(e)?(Object(S.L)(this.sb,l.h.DisplayNone),this.sb.src=e):Object(S.a)(this.sb,l.h.DisplayNone)}setClickUrl(e){if(!Object(A.h)(e))return Object(S.R)(this.cb),void Object(S.v)(this.ob);Object(S.R)(this.ob),Object(S.v)(this.cb),this.ab.href=e}setFallbackText(e,t){this.ub.innerHTML=`Loading ad ${e||1}/${t||1}`}}var ki,Lt=i(106),Ci=i.n(Lt);class wi{constructor(e,t,i,s={},r={}){this.Os=e,this.if=t,this.ef=i,this.Jn=s,this.lb={[et.PlayButton]:e=>this.fb(!1,e),[et.BigPlayButton]:e=>this.fb(!0,e),[et.VolumeProgress]:e=>new ci(e,this.Os,this.if,di.a),[et.ExpandButton]:e=>new Tt(e,this.Os,this.if,hi.a,this.Jn.isMobile),[et.QualityMenu]:e=>new pi(e,this.Os,this.if,gi.a,P[P.Quality],et.QualityMenu,this.ef,this.Jn.isMobile),[et.Loader]:e=>new mi(e,this.Os,this.if,$t.a),[et.SkipAdButton]:e=>new Si(e,this.Os,this.if,Ii.a,this.Jn.isMobile),[et.AdLoadingScreen]:e=>new Oi(e,this.Os,this.if,Ci.a)},this.fb=(e,t)=>new ut(t,this.Os,this.if,function(e=!1){return`\n    <cnx class="cnx-icon-button cnx-ui-btn-hoverable ${e?"cnx-button-big-play":""}">\n        <cnx class="cnx-btn-container">\n            <cnx class="cnx-play-icon">${ai.a}</cnx>\n            <cnx class="cnx-pause-icon">${li.a}</cnx>\n        </cnx>\n    </cnx>\n`.trim()}(e),this.Jn.isMobile),this.pb=i=>e=>{const t=this.lb[i];if(t)return t(e)},this.bb=new bi(this.Os,this.if,this.Jn.isMobile,Object.assign(Object.assign({},Pi),r))}createComponent(e,t){return this.pb(e)(t)||(this.bb.isGeneralComponent(e)?this.bb.getButton(e,t):void 0)}}(t=ki=ki||{})[t.Mute=0]="Mute",t[t.Unmute=1]="Unmute";class xi extends ht{constructor(e,t,i,s,r,n){super(e,t,i,s,n),this.eventList=[P[P.Mute],P[P.Unmute],P[P.StateChanged],...this.eventList],this.vb="Mute",this.mb="Unmute",this.Jt=r}onClickHandler(){this.Jt===ki.Mute?(this.mediator.publish(this,P[P.Unmute]),this.setState(ki.Unmute)):(this.mediator.publish(this,P[P.Mute]),this.setState(ki.Mute))}af(){this.Jt===ki.Mute?Object(S.O)(this.ef,"cnx-sound-on","cnx-sound-off"):Object(S.O)(this.ef,"cnx-sound-off","cnx-sound-on")}get tooltip(){return this.Jt===ki.Mute?this.mb:this.vb}initComponent(){super.initComponent(),this.af()}setState(e){this.Jt!==e&&(this.Jt=e,this.af(),this.mediator.publish(this,P[P.StateChanged]))}setVolume(e){0<e?this.setState(ki.Unmute):this.setState(ki.Mute)}}class Ei extends bt{constructor(e,t,i,s){super(t,i,s),this.mediator=e,this.ef=this.wf.getRenderedDom()}getContainer(){return this.ef}initComponent(){this.wf.initComponents()}showComponent(){Object(S.R)(this.ef)}hideComponent(){Object(S.v)(this.ef)}}class Li extends Ei{constructor(e,t,i,s){super(e,t,i,s),this.gb=null,this.eventList=[P[P.Volume],P[P.VolumeHoverStart],P[P.VolumeHoverStopped],P[P.DraggingStopped],P[P.DraggingStart],P[P.HoverStart],P[P.HoverEnd],P[P.StateChanged]],this.yb=.2,this.wb=600,this.xb=!1,this.Sb=e=>{clearTimeout(this.gb),Object(S.a)(this.ef,"cnx-mod-hover"),this.mediator.publish(this,P[P.VolumeHoverStart])},this.Ob=()=>{this.xb||(null!==this.gb&&clearTimeout(this.gb),this.gb=setTimeout(()=>{Object(S.L)(this.ef,"cnx-mod-hover"),this.mediator.publish(this,P[P.VolumeHoverStopped])},this.wb))},this.kb=this.yb,this._b=this.getComponent(et.VolumeButton),this.jb=this.getComponent(et.VolumeProgress)}handleComponentEvent(e,t,i){let s;switch(e){case P[P.Volume]:s=t.payload/100,this.Ab(s),this.Ib(t.payload);break;case P[P.Mute]:s=0,this.setVolumeProgress(0);break;case P[P.Unmute]:s=this.kb,this.setVolumeProgress(100*this.kb);break;case P[P.DraggingStopped]:this.xb=!1,this.mediator.publish(this,P[P.DraggingStopped]),this.Ob();break;case P[P.DraggingStart]:this.xb=!0,this.mediator.publish(this,P[P.DraggingStart]);break;case P[P.HoverStart]:this.mediator.publish(this,P[P.HoverStart],{payload:{targetComponent:i}});break;case P[P.HoverEnd]:this.mediator.publish(this,P[P.HoverEnd],{payload:{targetComponent:i}});break;case P[P.StateChanged]:this.mediator.publish(this,P[P.StateChanged],{payload:{targetComponent:i}})}void 0!==s&&this.Cb(s)}Ab(e){e<this.yb?this.kb=this.yb:this.kb=e}Cb(e){this.mediator.publish(this,P[P.Volume],{payload:e})}Ib(e){0===e?this._b.setState(ki.Mute):this._b.setState(ki.Unmute)}setVolumeProgress(e){this.jb.setProgress(e)}initComponent(){super.initComponent(),this.ef.addEventListener("mouseenter",this.Sb),this.ef.addEventListener("mouseleave",this.Ob)}setVolume(e){e*=100;this.Ib(e),this.setVolumeProgress(e)}destroy(){super.destroy(),this.ef.removeEventListener("mouseenter",this.Sb),this.ef.removeEventListener("mouseleave",this.Ob)}}var Mi=`\n    <cnx class="cnx-volume-container">\n        <cnx class="cnx-ui-btn cnx-volume-btn">\n            [[${et.VolumeButton}]]\n        </cnx>\n        <cnx class="cnx-volume-bar">\n            [[${et.VolumeProgress}]]\n        </cnx>\n    </cnx>\n`.trim(),Lt=i(107),t=i.n(Lt),Lt=i(108),Lt=i.n(Lt),Ri={[et[et.ShareButton]]:{template:vi(et.ShareButton,Lt.a),tooltip:"Share",isHoverable:!0},[et[et.CastButton]]:{template:vi(et.CastButton,t.a),tooltip:"Cast",isHoverable:!0}},Lt=i(109),Bi=i.n(Lt),t=i(110),ji=i.n(t),Lt=i(111),Di=i.n(Lt);const _i=90*B.g,Fi="This live stream will start shortly";class Ui extends ot{constructor(){super(...arguments),this.eventList=[],this.Tb=null}initComponent(){this.Pb=this.Os.createElementByString("<img/>"),this.ef.appendChild(this.Pb),this.Mb=this.ef.getElementsByTagName("cnx-span")[0],this.Eb=this.ef.getElementsByClassName("cnx-live-message")[0],this.Lb=this.ef.getElementsByClassName("cnx-live-icon")[0]}setPosterSrc(e){Object(A.h)(e)&&(this.Pb.src=e)}setPosterAltText(e){this.Pb.alt=e}setIconToStarting(){this.Lb.innerHTML=`${ji.a}`}setIconToEnded(){this.Lb.innerHTML=`${Di.a}`}setMessageToStarting(){this.Rb(Fi)}setMessageToEnded(){this.Rb("This live stream is not currently available. Please check again shortly")}setMessageToNotSupported(){this.Rb("Live stream not supported by browser")}handleDelayedStart(e){Object(A.e)(Date.parse(e))&&(this.Bb=new Date(e),0<this.Db()&&(this.Fb(),clearInterval(this.Tb),this.Tb=setInterval(()=>{this.Fb()},B.f*B.g)))}showMessage(){Object(S.R)(this.Lb),Object(S.R)(this.Eb)}hideMessage(){Object(S.v)(this.Lb),Object(S.v)(this.Eb)}show(){Object(S.R)(this.ef),Object(S.a)(this.ef,l.h.Active)}hide(){Object(S.L)(this.ef,l.h.Active),Object(S.v)(this.ef)}destroy(){super.destroy(),clearInterval(this.Tb)}Fb(){var e=this.Db();0<e?(e=this.$b(e),this.Rb(`Live in ${e}`)):(this.Rb(Fi),clearInterval(this.Tb),this.Tb=null)}Db(){return(Math.max(this.Bb.getTime(),Date.now())-Date.now())/B.f}$b(e){var t=e>=_i?Math.round(e/(B.g*B.c)):Math.ceil(e/B.g);return`${t} ${e>=_i?"hours":`minute${1===t?"":"s"}`}`}Rb(e){this.Mb.innerHTML=e}}var t=i(112),Ni=i.n(t);class Vi extends ot{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.hideComponent()}}var Hi,Lt=i(113),qi=i.n(Lt);class Wi extends wi{constructor(e,t,i,s,r){super(e,t,i,s,Ri),this.Os=e,this.ef=i,this.Jn=s,this.Ub=r,this.Vb={[et.VolumeControls]:e=>new Li(e,this.Os,Mi,this),[et.VolumeButton]:e=>new xi(e,this.Os,this.if,Bi.a,ki.Mute,this.Jn.isMobile),[et.SettingsButton]:e=>new Ot(e,this.Os,this.if,Ct.a,this.Jn.isMobile),[et.CaptionButton]:e=>new xt(e,this.Os,this.if,Et.a,l.h.Active,this.Jn.closedCaptionDefault,this.Jn.isMobile),[et.UpNextBox]:e=>new Rt(e,this.Os,this.if,Mt.a,this.Jn.isMobile),[et.LogoComponent]:e=>{if(!Object(A.a)(this.Jn.logoUrl)&&!Object(A.a)(this.Jn.logoPosition))throw new Error("custom logo is undefined");return new Bt(e,this.Os,this.if,'<cnx class="cnx-logo"></cnx>',{logoUrl:this.Jn.logoUrl,logoPosition:this.Jn.logoPosition})},[et.LogoOutstream]:e=>{if(!Object(A.a)(this.Jn.logoUrl)&&!Object(A.a)(this.Jn.logoPosition))throw new Error("outstream logo undefined");return new oi(e,this.Os,this.if,'<img class="cnx-home-screen-logo" />',{logoUrl:this.Jn.logoUrl})},[et.LivePoster]:e=>new Ui(e,this.Os,this.if,Ni.a),[et.LiveIcon]:e=>new Vi(e,this.Os,this.if,qi.a),[et.ElapsedTimeLabel]:e=>new Dt(e,this.Os,this.if,_t.a),[et.TotalDurationLabel]:e=>new Dt(e,this.Os,this.if,_t.a),[et.ProgressBar]:e=>new Nt(e,this.Os,this.if,Vt.a,this.Jn.isMobile),[et.QueStateOverlay]:e=>new Ht(e,this.Os,this.if,$t.a),[et.ContextMenu]:e=>new Yt(e,this.Os,this.if,Wt.a,P[P.ContextClick],et.ContextMenu,this.ef,this.Jn.isMobile),[et.ElementsSettingsMenu]:e=>new ei(e,this.Os,this.if,Gt.a,P[P.SettingsMenu],et.ElementsSettingsMenu,this.ef,this.Ub,this.Jn.isMobile,this.Jn.closedCaptionDefault),[et.CaptionComponent]:e=>new ri(e,this.Os,this.if,ni.a)},this.Nb=i=>e=>{const t=this.Vb[i];if(t)return t(e)}}createComponent(e,t){return this.Nb(e)(t)||super.createComponent(e,t)}}(t=Hi=Hi||{}).InPod="cnx-ad-in-pod",t.AdMarkerInPodTextContainer="cnx-ad-marker-text",t.CardImage="cnx-ad-card-image",t.CardTitle="cnx-ad-card-title",t.AdUiContent="cnx-ui-ad-content";class $i extends At{constructor(e,t,i,s,r,n,o={},a){super(e,r,t,n,a||new Wi(t,s,r,o)),this.mediator=e,this.globalDomUtilsService=t,this.Ic=i,this.$container=r,this.settings=o,this.Sf={[Ne.PlayingState]:new gt(this),[Ne.PausedState]:new ft(this)},this.Hb=0,this.Ca=null,this.qb=e=>{Object(S.U)(this.$uiContainer,l.g.UiInView,e)},this.Df.setDistanceValues({top:4,bottom:4}),this.Sf[Ne.PausedState].enterState(),this.zb=this.$container.querySelector(`.${Hi.CardImage}`),this.Wb=this.$container.querySelector(`.${Hi.CardTitle}`),this.Gb=this.$container.querySelector(`.${Hi.AdUiContent}`)}handleComponentEvent(e,t,i){switch(super.handleComponentEvent(e,t,i),e){case P[P.Volume]:this.mediator.publish(this,P[P.Volume],t);break;case P[P.Mute]:this.mediator.publish(this,P[P.Mute]);break;case P[P.Unmute]:this.mediator.publish(this,P[P.Unmute]);break;case et[et.CloseButton]:this.mediator.publish(this,P[P.Close]);break;case P[P.Expand]:this.mediator.publish(this,P[P.Expand]);break;case P[P.Collapse]:this.mediator.publish(this,P[P.Collapse]);break;default:this.mediator.publish(this,e,t)}}updateDuration(e){const t=this.getComponent(et.ProgressBar),i=this.getComponent(et.TotalDurationLabel),s=this.getComponent(et.SkipAdButton);!e&&s&&(s.setSecondsUntilSkip(0),s.tickDown(0)),e||!t?(this.elapsedTime=0,this.duration=e,t&&t.setProgress(Object(Te.g)(0,e,0,100,0)),i&&i.setTime(e),this.Jb(this.Hb)):t.setProgress(100)}updateVolume(e){const t=this.getComponent(et.VolumeControls),i=this.getComponent(et.VolumeButton);t&&t.setVolume(e),i&&i.setVolume(e)}get elapsedTime(){return this.Hb}set elapsedTime(e){this.Hb=e,this.Jb(this.Hb)}showSkipAdButton(e){const t=this.getComponent(et.SkipAdButton);t&&(t.showComponent(),t.setSecondsUntilSkip(e))}hideSkipAdButton(){const e=this.getComponent(et.SkipAdButton);e&&e.hideComponent()}addPodAdMarker(t,i){Object(S.a)(this.$uiContainer,Hi.InPod),Object(p.c)(this.$uiContainer.getElementsByClassName(Hi.AdMarkerInPodTextContainer)).forEach(e=>{e.innerHTML=`${t+1}/${i}`})}removeAddPodAdMarker(){Object(S.L)(this.$uiContainer,Hi.InPod)}Jb(e){const t=this.getComponent(et.ElapsedTimeLabel);t&&t.setTime(e);const i=this.getComponent(et.SkipAdButton);i&&i.tickDown(e)}hideAdLoadingScreen(){const e=this.getComponent(et.AdLoadingScreen);e&&e.hideComponent(),Object(S.L)(this.$container,l.g.PodLoadingScreen)}showAdLoadingScreen(e,t,i,s){const r=this.getComponent(et.AdLoadingScreen);r&&(r.showComponent(),r.setBackgroundImg(e),r.setClickUrl(t),r.setFallbackText(i,s),Object(S.a)(this.$container,l.g.PodLoadingScreen))}hideAdMarker(){var e=this.$container.querySelector(".cnx-ad-marker");Object(S.v)(e)}hideProgressBar(){this.getComponent(et.ProgressBar).hideComponent()}setContinueReadingCard(e){this.zb.style.backgroundImage=`url("${e.imageSrc}")`,this.Wb.innerHTML=e.title}cardHasData(){return Object(A.h)(this.zb.style.backgroundImage)&&Object(A.h)(this.Wb.innerHTML)}showContinueReadingCard(e){Object(S.a)(this.$container,l.g.AdShowCard),null===this.Ca&&(this.Ca=this.globalDomUtilsService.requestAnimationFrameHelper(()=>{this.Ca=null,Object(S.Q)(e,{height:`${this.Gb.clientHeight}px`})}))}hideContinueReadingCard(e){Object(S.L)(this.$container,l.g.AdShowCard),Object(S.N)(e,"height")}show(){super.show(),this.Ic.on(this.$uiContainer,this.qb,{threshold:.5})}hide(){super.hide(),Object(S.U)(this.$uiContainer,l.g.UiInView,!1),this.Ic.off(this.$uiContainer,this.qb)}expand(){this.getComponent(et.ExpandButton).setState(Pt.expand)}collapse(){this.getComponent(et.ExpandButton).setState(Pt.collapse)}}var Lt=i(114),Gi=i.n(Lt);class zi{constructor(e){this.showExpandButton=e}get template(){return`\n            <cnx class="cnx-ui cnx-ui-ad">\n                <cnx class="cnx-ui-ad-content ${this.showExpandButton?"cnx-ad-fs":""}">\n                    <cnx class="cnx-ad-marker">\n                        <cnx class="cnx-ad-marker-svg">${Gi.a}</cnx>\n                        <cnx class="cnx-ad-marker-text">1/1</cnx>\n                    </cnx>\n                    <cnx class="cnx-ad-close-button cnx-ui-btn">[[${et.CloseButton}]]</cnx>\n                    <cnx class="cnx-ad-buttons">\n                        <cnx class="cnx-ad-play-button cnx-ui-btn">[[${et.PlayButton}]]</cnx>\n                        <cnx class="cnx-ad-volume-controls">[[${et.VolumeControls}]]</cnx>\n                        <cnx class="cnx-ad-volume-button cnx-ui-btn">[[${et.VolumeButton}]]</cnx>\n                    </cnx>\n                    [[${et.SkipAdButton}]]\n                    ${this.getExpandTemplate()}\n                    <cnx class="cnx-ad-progress-bar">[[${et.ProgressBar}]]</cnx>\n                </cnx>\n                <cnx class="cnx-ad-card">\n                    <svg class="${Hi.CardImage}" viewBox="0 0 16 9" />\n                    <cnx class="cnx-ad-card-text">\n                        <cnx>Continue watching</cnx>\n                        <cnx class="${Hi.CardTitle}"></cnx>\n                        <cnx>after the ad</cnx>\n                    </cnx>\n                </cnx>\n                [[${et.AdLoadingScreen}]]\n            </cnx>\n        `.trim()}getExpandTemplate(){return this.showExpandButton?`<cnx class="cnx-ad-expand-button cnx-ui-btn cnx-hide-on-volume-hover cnx-d-sm-none">[[${et.ExpandButton}]]</cnx>`:""}}var Ji=i(17);class Ki extends n.a{constructor(e,t,i,s,r,n){super(),this.mediator=e,this.lh=t,this.Qb=i,this.Xb=s,this.Yb=r,this.Kb=n,this.Zb=[],this.firstAdShown=!1,this._r=!1,this.tv=0,this.ev=!0,this.sv=!1,this.nv=!1,this.rv=v.a.Normal,this.hv=this.getNewAdManager(),this.subscribe(w.AdsEnabled,this.hv,()=>{this.mediator.publish(this,w.AdsEnabled)})}av(e,t,i){this.hv.initAd(e,t,this.rv,1,i,[{container:this.ov,width:e,height:t,type:f.ProtoAdType.Video}])}cv(){this.uv.showSkipAdButton(this.lh.skipAdAfter)}lv(e){var t=this.hv.getCurrentAdClickTrackingProperties();t&&this.Kb.services.TrackingService.trackAdClick(Object.assign(Object.assign({},t),{type:e}))}dv(e){if(e.payload.adLoadedData.skipOffset&&0<=e.payload.adLoadedData.skipOffset)return!1;var t=this.hv.getAdDuration();switch(this.lh.adSkippability){case f.ProtoPlayerAdSkippability.IfLongerThan:if(e.payload.adSkipMode===f.ProtoAdSkipMode.IfLongerThan31Sec&&(t<this.lh.adsMustBeSkippableIfLongerThan||!t)||e.payload.adSkipMode===f.ProtoAdSkipMode.Never)return!1;break;case f.ProtoPlayerAdSkippability.NoRestrictions:if(e.payload.adSkipMode===f.ProtoAdSkipMode.Never||e.payload.adSkipMode===f.ProtoAdSkipMode.IfLongerThan31Sec&&(t<R.d||!t))return!1}return!0}fv(t){this.Zb.filter(e=>e!==t).forEach(e=>{Object(S.a)(e,l.h.Hide)})}pv(){this.Zb.forEach(e=>{Object(S.L)(e,l.h.Hide)})}updateFilterConfig(e){this.hv.updateFilterConfig(e)}bv(){this.nv=!1,this.uv.hideAdLoadingScreen()}vv(){this.uv.hideSkipAdButton()}mv(){let s;Object.keys(v.b).forEach(i=>{this.subscribe(v.b[i],this.hv,e=>{switch(s=!1,v.b[i]){case v.b.AdLoaded:const t=e;this.sv=this.dv(e),this.sv&&(t.payload.adLoadedData.skipOffset=this.lh.skipAdAfter);break;case v.b.AdPaused:this.uv.changeState(Ne.PausedState);break;case v.b.AdPlaying:this.uv.changeState(Ne.PlayingState);break;case v.b.AdImpression:this.gv(e);break;case v.b.AdSkipped:this.lv(f.ProtoAdClickTypeEnum.AdSkipClick),this.pv(),s=!0;break;case v.b.AdStopped:case v.b.AdError:this.pv(),s=!0;break;case v.b.AdClickThru:this.lv(f.ProtoAdClickTypeEnum.AdClickThrough)}this.ev&&this.mediator.publish(this,v.b[i],e),this.ev=!0,s&&(this._r=!1,this.uv.changeState(Ne.PausedState))})}),this.subscribe(P[P.Volume],this.uv,({payload:e})=>{this.setVolume(e),this.lv(f.ProtoAdClickTypeEnum.VolumeClick)}),this.subscribe(P[P.Play],this.uv,()=>{this.lv(f.ProtoAdClickTypeEnum.PlayClick),this.play()}),this.subscribe(P[P.Pause],this.uv,()=>{this.lv(f.ProtoAdClickTypeEnum.PauseClick),this.pause()}),this.subscribe(P[P.Close],this.uv,()=>{this.mediator.publish(this,o.b.UserInteraction,{payload:{playback:!1}}),this.mediator.publish(this,P[P.Close])}),this.subscribe(P[P.Mute],this.uv,()=>{this.setVolume(0),this.lv(f.ProtoAdClickTypeEnum.MuteClick)}),this.subscribe(P[P.Unmute],this.uv,()=>{this.setVolume(1),this.lv(f.ProtoAdClickTypeEnum.UnmuteClick)}),this.subscribe(w.DetachedFromDom,this.hv,()=>{this.mediator.publish(this,C.DetachedFromDom)}),this.relay(O.b.ImpressionPrice,this.hv,this,this.mediator)}gv(e){this.vv(),this.updateContinueReadingCard(),e.payload.adDuration=this.hv.getAdDuration(),e.payload.adDuration||this.firstAdShown||this.show(),this.firstAdShown=!0,this._r=!0,this.sv&&this.cv(),this.uv.updateDuration(e.payload.adDuration),this.uv.changeState(Ne.PlayingState),this.yv=e.payload.clickThroughUrl,this.fv(e.payload.selectedAdSlot),1<this.Yb.getTotalNumberOfSlots()?this.uv.addPodAdMarker(this.Yb.getCurrentSlotIndex(),this.Yb.getTotalNumberOfSlots()):this.uv.removeAddPodAdMarker()}wv(e){this.Qb.appendChild(e)}xv(e=""){return this.Kb.services.GlobalDomUtilsService.createElementByString(`<div class= "cnx-ad-container cnx-full-height ${e}"></div>`)}Sv(){this.ov=this.xv(),this.wv(this.ov),this.Zb.push(this.ov)}Ov(e=!1){var t,i,t=(t=this.lh,i=this.Kb.config,{logoUrl:t.logoUrl,isMobile:i.isMobile,closeButtonMode:t.closeButtonMode,floatingCloseButtonMode:t.floatingSettings.floatingCloseButtonMode,isCloseButton:t.isCloseButton,uiComponentsVisibility:t.uiComponentsVisibility,sharingDestinations:t.sharingDestinations});this.uv=new $i(this,this.Kb.services.GlobalDomUtilsService,this.Kb.services.ViewabilityService,this.Kb.services.InteractionService,this.Qb,new zi(e).template,t),this.uv.hide()}start(e,t,i,s=!1){try{this.Ov(s),this.Sv(),this.av(e,t,i),this.setVolume(i),this.mv()}catch(e){Object(g.a)({callStack:e.stack,level:f.ProtoLoggingLevelEnum.FATAL,exception:e.message,message:"adhandler_start"})}}getVolume(){return this.tv}hide(){Object(S.L)(this.Qb,l.g.Ad,l.g.AdOverlayType),this.uv.hide()}show(){const e=[l.g.Ad],t=this.hv.getCurrentAdType();t===f.ProtoAdType.Overlay&&e.push(l.g.AdOverlayType),this.kv=t,Object(S.a)(this.Qb,...e),this.uv.show(),this.uv.updateVolume(this.tv),this.bv()}setVolume(e){this.tv=e,this.hv.setAdVolume(e),this.uv&&this.uv.updateVolume(e),this.mediator.publish(this,o.b.UserInteraction,{payload:{volume:!0}}),this.mediator.publish(this,P[P.Volume],{payload:{volume:e}})}resizeAd(e,t,i){this.setVastViewMode(i),this.updateContinueReadingCard(),this.mediator.publish(this,C.AdSlotResized,{payload:{width:e,height:t}})}adStateChange(e,t){this.hv.onAdStateChange(e,t)}contentChanged(){this.hv.onContentChange()}get inImpression(){return this._r}get adInWin(){return this.hv.adInWin}get inAdPodLoadingState(){return this.nv}resumeWithoutUserInteraction(){this.hv.resumeAd(!1)}play(){this.hv.resumeAd(!0),this.mediator.publish(this,o.b.UserInteraction,{payload:{playback:!0}})}_v(e){if(Object(Ji.b)("cnxShowAdCard",this.Kb.config.pageUrl))return!0;let t=!1;var i;return e.adType===f.ProtoAdType.Video&&(i=this.Qb.clientWidth*(e.heightRatio/e.widthRatio),t=76<=this.Qb.clientHeight-i),e.adType===f.ProtoAdType.Overlay&&(t=76<=this.Qb.clientHeight-e.height),t}updateContinueReadingCard(){var e=this.hv.getAdMediaSize();Object(A.a)(e)&&(this._v(this.hv.getAdMediaSize())?this.uv.showContinueReadingCard(this.ov):this.uv.hideContinueReadingCard(this.ov))}setContinueReadingCard(e){this.uv.setContinueReadingCard({imageSrc:st.getSmartCroppedImageUrl(e.imageSrc,270,150),title:e.title})}pause(){this.hv.pauseAd(!0),this.mediator.publish(this,o.b.UserInteraction,{payload:{playback:!1}})}stopAd(e){var t=()=>{this.mediator.publish(this,v.b.AdStopped),this.ev=!1};this.hv&&this.inImpression?(t(),this.hv.stopAd(e)):this.inAdPodLoadingState&&t()}skipAd(){this.hv&&this.inImpression?this.hv.skipAd():this.nv&&(this.mediator.publish(this,v.b.AdSkipped),this.bv())}userInteraction(e){this.hv.userInteraction(e)}enableAds(){this.hv.enableAds()}enterAdPodLoadingState(){this.nv=!0;var{width:e,height:t}=this.hv.getLastAdSlot(this.kv);this.uv.showAdLoadingScreen(st.getSmartCroppedImageUrl(this.jv,e,t),this.yv,this.Yb.getNextSlotIndex(),this.Yb.getTotalNumberOfSlots())}setAdLoadingBackgroundUrl(e){this.jv=e}updatePodRemainingTime(e){this.hv.updatePodRemainingTime(e)}newAdOpportunity(){this.hv.newAdOpportunity()}disableAds(e){this.hv.disableAds(e)}setVastViewMode(e){this.rv=e,this.hv.setVastViewMode(e)}destroy(){var e;null===(e=this.hv)||void 0===e||e.disableAds(be.Unknown),null===(e=this.uv)||void 0===e||e.destroy(),null===(e=this.hv)||void 0===e||e.destroy()}}var Qi,t=i(29);(Lt=Hn=Hn||{}).AppNexus="appnexus",Lt.DistrictM="districtm",Lt.IndexExchange="ix",Lt.Lkqd="lkqd",Lt.OneVideo="oneVideo",Lt.OpenX="openx",Lt.Pubmatic="pubmatic",Lt.RhythmOne="rhythmone",Lt.Rubicon="rubicon",Lt.SpotX="spotx",Lt.Telaria="telaria",Lt.MediaNet="medianet",Lt.Adman="adman",Lt.IronSource="ironsource",Lt.Undertone="undertone",Lt.SynacorMedia="synacormedia",Lt.AmxRTB="amx",Lt.Smaato="smaato",Lt.SmartAdServer="smartadserver";const Yi={[Hn.Lkqd]:t.c.Lkqd,[Hn.RhythmOne]:t.c.RhythmOne,[Hn.Telaria]:t.c.Telaria,[Hn.IronSource]:t.c.IronSource,[Hn.Undertone]:t.c.Undertone,[Hn.SynacorMedia]:t.c.SynacorMedia},Xi=[Hn.AppNexus,Hn.DistrictM,Hn.IndexExchange,Hn.OneVideo,Hn.OpenX,Hn.Pubmatic,Hn.RhythmOne,Hn.Rubicon,Hn.SpotX,Hn.Telaria,Hn.MediaNet,Hn.Adman,Hn.IronSource,Hn.Undertone,Hn.AmxRTB,Hn.Smaato,Hn.SmartAdServer],Zi=[Hn.AppNexus,Hn.DistrictM,Hn.IndexExchange,Hn.OneVideo,Hn.OpenX,Hn.Pubmatic,Hn.RhythmOne,Hn.Rubicon,Hn.SpotX,Hn.Telaria,Hn.MediaNet,Hn.Adman,Hn.AmxRTB,Hn.Smaato,Hn.SmartAdServer],es=[Hn.OneVideo,Hn.IndexExchange,Hn.Rubicon,Hn.Pubmatic,Hn.SpotX,Hn.AppNexus,Hn.DistrictM,Hn.OpenX,Hn.MediaNet,Hn.Adman,Hn.IronSource,Hn.Undertone,Hn.SynacorMedia,Hn.AmxRTB,Hn.Smaato,Hn.SmartAdServer],ts="https://prebid.adnxs.com/pbc/v1/cache",is=["video/mp4","video/webm","application/javascript","video/ogg","video/mpeg"],ss={VAST_1:1,VAST_2:2,VAST_3:3,VAST_1_WRAPPER:4,VAST_2_WRAPPER:5,VAST_3_WRAPPER:6,VAST_4:7,VAST_4_WRAPPER:8},rs={VPAID_1:1,VPAID_2:2};function ns(e){return 2*(e+41)}class os{constructor(){this.Av=Date.now(),this.Iv={advertiser:{}}}addPrebid(e){Object(A.a)(this.Iv.advertiser[e])||this.Cv(e),this.Iv.advertiser[e].prebidData.push({timestamp:Date.now()})}addBid(e,t){Object(A.a)(this.Iv.advertiser[e])||this.Cv(e),this.Iv.advertiser[e].bidsFloorPriceList.push({timestamp:Date.now(),floorPrice:t})}addImpression(e,t){Object(A.a)(this.Iv.advertiser[e])||this.Cv(e),this.Iv.advertiser[e].impressionRevenueList.push({timestamp:Date.now(),obfuscatedPrice:t})}shouldRequestLineItem(e){var t=Date.now();return!(this.Tv(t,3)&&this.Pv(e,t,5)<-.5&&11.5<=this.Mv(e,t,3)&&this.Ev(e,t,10,.1)<.35)}Tv(e,t){return e-this.Av>=t*B.e}Pv(e,t,i){e=this.Iv.advertiser[e];if(!Object(A.a)(e))return-1;const s=this.Lv(e.impressionRevenueList,t,i).map(e=>e.obfuscatedPrice);let r=0;return Object(p.h)(s)&&(r=s.reduce((e,t)=>e+ns(t))),this.Rv(r)}Mv(e,t,i){e=this.Iv.advertiser[e];if(!Object(A.a)(e))return-1;i=this.Lv(e.prebidData,t,i).length;return this.Rv(i)}Ev(e,t,i,s){e=this.Iv.advertiser[e];if(!Object(A.a)(e))return-1;i=this.Lv(e.impressionRevenueList,t,i).map(e=>e.floorPrice),s=this.Bv(i,s);return this.Rv(s)}Lv(t,e,i){const s=e-B.f,r=e-i*B.e,n=[];for(let e=t.length-1;0<=e&&t[e].timestamp>=r;e--)t[e].timestamp<=s&&n.push(t[e]);return n}Rv(e){return 0===e?-1:e}Cv(e){this.Iv.advertiser[e]={prebidData:[],bidsFloorPriceList:[],impressionRevenueList:[]}}Bv(e,t){if(0===e.length)return 0;if(t<=0)return e[0];if(1<=t)return e[e.length-1];var i=((e=e.sort((e,t)=>e-t)).length-1)*t,s=Math.floor(i),t=s+1,i=i%1;return t>=e.length?e[s]:e[s]*(1-i)+e[t]*i}}class as{constructor(){this.Dv=new Set}addPlatformCappedLineItemIdList(e){e.forEach(e=>{this.Dv.add(e)})}isLineItemPlatformCapped(e){return this.Dv.has(e)}}class ls{constructor(){this.Fv=new Ce,this.$v=new Ce,this.Uv=new Ce,this.Vv=new Ce,this.Nv=new Ce,this.Hv=new Ce,this.callingLineItems=[],this.bids=[],this.bidsLoading=[],this.bidsReady=[],this.bidStarted=null}get onBid(){return this.Fv.asObservable()}get onBidConsumed(){return this.$v.asObservable()}get onBidLoadingConsumed(){return this.Uv.asObservable()}get onBidReady(){return this.Vv.asObservable()}get onBidStarted(){return this.Nv.asObservable()}get onBidReadyConsumed(){return this.Hv.asObservable()}getAllBids(){var e=this.bidStarted?[this.bidStarted]:[];return[...this.bids,...this.bidsLoading,...this.bidsReady,...e]}addBid(e){this.bids.push(e),this.Fv.next(e)}moveBidToLoading(e){this.bidsLoading.push(e),this.consumeBid(e)}moveBidToReady(e){this.bidsReady.push(e),this.consumeBidLoading(e),this.Vv.next(e)}moveBidToStarted(e){this.bidStarted=e,this.consumeBidReady(e),this.Nv.next(e)}consumeBid(e){Object(p.k)(this.bids,e),this.$v.next(e)}consumeBidLoading(e){Object(p.k)(this.bidsLoading,e),this.Uv.next(e)}consumeBidReady(e){Object(p.k)(this.bidsReady,e)}consumeBidStarted(e){this.bidStarted=null,this.Hv.next(e)}}class cs{constructor(){this.creativeView=[],this.start=[],this.firstQuartile=[],this.midpoint=[],this.thirdQuartile=[],this.impression=[],this.complete=[],this.mute=[],this.unmute=[],this.pause=[],this.rewind=[],this.resume=[],this.fullscreen=[],this.exitFullscreen=[],this.expand=[],this.collapse=[],this.close=[],this.closeLinear=[],this.acceptInvitationLinear=[],this.acceptInvitation=[],this.skip=[],this.progress=[],this.playerExpand=[],this.playerCollapse=[],this.adExpand=[],this.adCollapse=[],this.fullScreen=[],this.canPlayThrough=[],this.stalled=[],this.waiting=[],this.otherAdInteraction=[]}}class ds{constructor(e){this.clickTrackings=[],this.customClicks=[],this.errorUrls=[],this.impressions=[],this.trackingEvents=new cs,e.inLine?this.qv(e.inLine):this.zv(e.wrapper)}qv(e){this.Wv(e.errors),this.Gv(e.impressions),this.Jv(e.creatives)}zv(e){this.Wv(e.errors),this.Gv(e.impressions),this.Jv(e.creatives)}Qv(e){this.Xv(e.trackingEvents),this.Yv(e.videoClicks)}Yv(e){e&&(this.Kv(e.clickTrackings),this.Zv(e.customClicks))}Kv(e){this.clickTrackings.push(...e)}Zv(e){this.customClicks.push(...e)}Xv(e){e.forEach(t=>{try{this.trackingEvents[t.name].push(t.uri)}catch(e){Object(g.a)({message:"AdManager_VastResponse_tracker",exception:`${t.name}`,callStack:e.stack,level:f.ProtoLoggingLevelEnum.INFO})}})}Jv(e){e.forEach(e=>{e.linear&&this.Qv(e.linear)})}Wv(e){this.errorUrls.push(...e)}Gv(e){this.impressions.push(...e)}}const hs={[f.ProtoTrackerTriggerType.Impression]:"adImpression",[f.ProtoTrackerTriggerType.Complete25Pc]:"adQuartileFirst",[f.ProtoTrackerTriggerType.Complete50Pc]:"adQuartileSecond",[f.ProtoTrackerTriggerType.Complete75Pc]:"adQuartileThird",[f.ProtoTrackerTriggerType.ViewCompletion]:"adQuartileFourth",[f.ProtoTrackerTriggerType.VideoClick]:"adClick",[f.ProtoTrackerTriggerType.Pause]:"adPause",[f.ProtoTrackerTriggerType.Resume]:"adResume",[f.ProtoTrackerTriggerType.Mute]:"adMute",[f.ProtoTrackerTriggerType.Unmute]:"adUnmute"};class us{constructor(){this.adError=[],this.adWin=[],this.adImpression=[],this.adStarted=[],this.adVideoStart=[],this.adQuartileFirst=[],this.adQuartileSecond=[],this.adQuartileThird=[],this.adQuartileFourth=[],this.adClick=[],this.adPause=[],this.adResume=[],this.adSkip=[],this.adMute=[],this.adUnmute=[],this.adUserClose=[],this.adUserAcceptInvitation=[],this.adUserMinimize=[]}static track(e,i,s,t){if(Array.isArray(e)){const{width:r,height:n}=t.adContainerState.get(s.adType),o=t.adBreakState["adBreakType"],{mediaDescription:a,mediaDuration:l,mediaId:c,mediaUrl:d,mediaTitle:h}=t.media;e.forEach(e=>{if(e.url)try{var t=i.replace(e.url,s.vendorId,{adMacros:{adWidth:r,adHeight:n,adPostion:o},mediaMacros:{mediaDescription:a,mediaDuration:l,mediaId:c,mediaUrl:d,mediaTitle:h}});switch(e.type){case f.ProtoTrackerType.Image:Object(Je.m)([t],window);break;case f.ProtoTrackerType.Javascript:Object(S.A)({src:t},window.document.head,window)}}catch(e){}})}}}function ps(e,t){e.forEach(e=>function(e,t){var i;i=e.trigger,t[hs[i]].push({type:e.type,url:e.url})}(e,t))}function gs(e){return{type:f.ProtoTrackerType.Image,url:e}}function ms(e){return e.map(e=>gs(e))}(t=Qi=Qi||{})[t.HandlingSdkUrl=0]="HandlingSdkUrl",t[t.NetworkRequestUrl=1]="NetworkRequestUrl",t[t.XmlInvalidString=2]="XmlInvalidString",t[t.XmlParseGeneral=3]="XmlParseGeneral",t[t.XmlInvalidTree=4]="XmlInvalidTree",t[t.XmlInvalidAd=5]="XmlInvalidAd",t[t.XmlAdaptorWrapperLimit=6]="XmlAdaptorWrapperLimit",t[t.HTMLUnknownMimeType=7]="HTMLUnknownMimeType",t[t.ImaAdsManagerInit=8]="ImaAdsManagerInit",t[t.ImaVastEmptyResponse=9]="ImaVastEmptyResponse",t[t.ImaRequestException=10]="ImaRequestException",t[t.ImaTimeout=11]="ImaTimeout",t[t.ImaInvalidResponse=12]="ImaInvalidResponse";const fs={[Qi.HandlingSdkUrl]:f.ConnatixNoBidReasonEnum.CsRequestException,[Qi.NetworkRequestUrl]:f.ConnatixNoBidReasonEnum.CsRequestException,[Qi.XmlInvalidString]:f.ConnatixNoBidReasonEnum.CsEmptyResponse,[Qi.XmlParseGeneral]:f.ConnatixNoBidReasonEnum.CsInvalidResponse,[Qi.XmlInvalidTree]:f.ConnatixNoBidReasonEnum.CsInvalidResponse,[Qi.XmlInvalidAd]:f.ConnatixNoBidReasonEnum.CsInvalidResponse,[Qi.XmlAdaptorWrapperLimit]:f.ConnatixNoBidReasonEnum.CsInvalidResponse,[Qi.HTMLUnknownMimeType]:f.ConnatixNoBidReasonEnum.CsInvalidResponse,[Qi.ImaAdsManagerInit]:f.ConnatixNoBidReasonEnum.CsRequestException,[Qi.ImaVastEmptyResponse]:f.ConnatixNoBidReasonEnum.CsInvalidResponse,[Qi.ImaRequestException]:f.ConnatixNoBidReasonEnum.CsRequestException,[Qi.ImaTimeout]:f.ConnatixNoBidReasonEnum.Timeout,[Qi.ImaInvalidResponse]:f.ConnatixNoBidReasonEnum.CsInvalidResponse};var ys,bs,vs,Ps,Ss=i(10);(t=ys=ys||{}).VOLUME_DETECTED="volume_detected",t.MALWARE_DETECTED="malware_detected",t.BADURI_DETECTED="baduri_detected",(t=bs=bs||{})[t.None=0]="None",t[t.Mute=1]="Mute",t[t.ScrollHijack=2]="ScrollHijack",t[t.MemoryLeak=4]="MemoryLeak",t[t.Malware=8]="Malware",t[t.All=15]="All";class Is{constructor(){this.tm=new Ce}get onVpaidEvent(){return this.tm.asObservable()}handshakeVersion(e=0){return"2.0"}}(t=vs=vs||{})[t.Win=0]="Win",t[t.AdLoaded=1]="AdLoaded",t[t.AdStarted=2]="AdStarted",t[t.AdImpression=3]="AdImpression";class Ts{constructor(e){this.im=e,this.em=new Map,Object(A.a)(this.im.settings.bidLifecycle)||(this.im.settings.bidLifecycle={})}onTrackingLifecycleEvent(e){switch(this.em.set(e,Date.now()),e){case vs.AdLoaded:this.nm();break;case vs.AdImpression:this.rm()}}nm(){this.im.settings.bidLifecycle.winToAdLoadedTime=this.hm}rm(){this.im.settings.bidLifecycle.startAdToImpressionTime=this.am}get am(){return this.em.get(vs.AdImpression)&&this.em.get(vs.AdStarted)?this.em.get(vs.AdImpression)-this.em.get(vs.AdStarted):0}get hm(){return this.em.get(vs.AdLoaded)&&this.em.get(vs.Win)?this.em.get(vs.AdLoaded)-this.em.get(vs.Win):0}}(t=Ps=Ps||{}).IMPRESSION_TIMEOUT="IMPRESSION_TIMEOUT",t.VIEWABLE_IMPRESSION_TIMEOUT="VIEWABLE_IMPRESSION_TIMEOUT",t.SKIP_AD_TIMEOUT="SKIP_AD_TIMEOUT",t.STOP_AD_TIMEOUT="STOP_AD_TIMEOUT",t.AD_LOADED_TIMEOUT="AD_LOADED_TIMEOUT";const As="cnx-ad-bid-slot-selected",Os="Connatix Ad";class ks extends Is{constructor(e){super(),this.settings=e,this.om=null,this.cm=null,this.um=null,this.lm=null,this.dm=void 0,this.fm=!1,this.Vo=!1,this.pm=!1,this.bm=!1,this.vm=null,this.Vc=[],this.mm=new Ce,this.gm=()=>{this.ym({type:v.b.AdError,payload:{errorMessage:Ss.c.Timeout}}),this.wm()},this.xm=()=>{this.Om(),this.km(Ps.VIEWABLE_IMPRESSION_TIMEOUT).clearTimeout(),this.settings.viewabilityService.off(this.om,this._m)},this._m=e=>{const t=this.km(Ps.VIEWABLE_IMPRESSION_TIMEOUT);e?t.timeoutHandle.timeoutId||t.setTimeout():t.clearTimeout()},this.jm=()=>{this.ym({type:v.b.AdSkipped}),this.wm()},this.Am=()=>{this.ym({type:v.b.AdStopped,payload:{shouldTrackPostBid:!0}}),this.wm()},this.Im=()=>{this.ym({type:v.b.AdError,payload:{errorMessage:Ss.c.TimeoutLoaded}}),this.wm()},this.km=e=>{const t=this.Cm[e];return{timeoutHandle:t,setTimeout:()=>{t.timeoutId=ye.setTimeout(()=>{t.callback()},t.timeout)},clearTimeout:()=>{null!==t.timeoutId&&(ye.clearTimeout(t.timeoutId),t.timeoutId=null)}}},this.creativeId=this.settings.externalCreativeId,this.Tm=`cnx-ad-bid-slot-id-${this.settings.requestMetadata.data.cnxBidId}`,this.Pm=`cnx-ad-slot-${this.settings.id}`;var e=this.settings.adManagerLineItem.protoLineItem["adType"];this.Cm={[Ps.IMPRESSION_TIMEOUT]:{callback:this.gm,timeout:25e3,timeoutId:null},[Ps.VIEWABLE_IMPRESSION_TIMEOUT]:{callback:this.xm,timeout:e===E.ProtoAdType.Video?R.b:R.a,timeoutId:null},[Ps.SKIP_AD_TIMEOUT]:{callback:this.jm,timeout:500,timeoutId:null},[Ps.STOP_AD_TIMEOUT]:{callback:this.Am,timeout:500,timeoutId:null},[Ps.AD_LOADED_TIMEOUT]:{callback:this.Im,timeout:25e3,timeoutId:null}}}skipAd(){this.km(Ps.SKIP_AD_TIMEOUT).setTimeout()}stopAd(e){this.km(Ps.STOP_AD_TIMEOUT).setTimeout()}startAd(){this.bm&&Object(g.a)({message:"AdManager_ABaseBidAdaptor_samebid",exception:"startAd",callStack:`adv:${this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId} bidid: ${this.Pm}`,level:f.ProtoLoggingLevelEnum.FATAL}),this.bm=!0,this.km(Ps.IMPRESSION_TIMEOUT).setTimeout()}initAd(e,t,i,s,r,n,o){this.pm&&Object(g.a)({message:"AdManager_ABaseBidAdaptor_samebid",exception:"initAd",callStack:`adv:${this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId} bidid: ${this.Pm}`,level:f.ProtoLoggingLevelEnum.FATAL}),this.pm=!0,this.km(Ps.AD_LOADED_TIMEOUT).setTimeout(),this.Mm(o),this.Em=new Ts(this),this.Em.onTrackingLifecycleEvent(vs.Win)}setAdVolume(e){this.cm.volume=e,Object(S.V)(this.cm,e),e<=0?this.settings.adEnforcer.start(bs.Mute):this.settings.adEnforcer.stop(bs.Mute)}get impressionStarted(){return this.fm}get creativeId(){return this.dm}set creativeId(e){Object(A.h)(this.creativeId)||(this.dm=e)}get onAdViewableImpression(){return this.mm.asObservable()}Lm(e){let t;Object(A.d)(e.payload.skipOffset)&&(t=e.payload.skipOffset);e={type:v.b.AdLoaded,payload:{adLoadedData:{skipOffset:t},adSkipMode:this.settings.adManagerLineItem.protoLineItem.skipMode}};return this.settings.adLoadedPayload=e}Rm(e){return{type:v.b.AdImpression,payload:{adSkipMode:this.settings.adManagerLineItem.protoLineItem.skipMode,adSourceData:{moatTrackingEnabled:this.settings.adManagerLineItem.protoLineItem.moatTrackingEnabled,creativeId:this.settings.adManagerLineItem.protoLineItem.cnxCreativeId,adId:this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,length:this.getAdDuration(),adVideoUrl:this.adVideoUrl,name:Os},customAdData:{ADVERTISER:this.settings.requestMetadata.data.rtbAdomain,CREATIVE_ID:this.creativeId,CAMPAIGN_ID:this.settings.requestMetadata.data.rtbCampainId}}}}Bm(e){return{type:v.b.AdVideoStart,payload:{adSkipMode:this.settings.adManagerLineItem.protoLineItem.skipMode,adSourceData:{moatTrackingEnabled:this.settings.adManagerLineItem.protoLineItem.moatTrackingEnabled,creativeId:this.settings.adManagerLineItem.protoLineItem.cnxCreativeId,adId:this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,length:this.getAdDuration(),name:Os},customAdData:{ADVERTISER:this.settings.requestMetadata.data.rtbAdomain,CREATIVE_ID:this.creativeId,CAMPAIGN_ID:this.settings.requestMetadata.data.rtbCampainId}}}}ym(e){if(this.Dm(e))switch(e.type){case v.b.AdLoaded:this.Em.onTrackingLifecycleEvent(vs.AdLoaded),this.km(Ps.AD_LOADED_TIMEOUT).clearTimeout(),this.tm.next(this.Lm(e));break;case v.b.AdImpression:this.Em.onTrackingLifecycleEvent(vs.AdImpression),this.km(Ps.IMPRESSION_TIMEOUT).clearTimeout(),this.Fm(),Object(S.a)(this.um,As),this.tm.next(this.Rm(e)),this.fm=!0;break;case v.b.AdVideoStart:this.Em.onTrackingLifecycleEvent(vs.AdStarted),this.tm.next(this.Bm(e));break;case v.b.AdStopped:case v.b.AdSkipped:case v.b.AdError:this.Vo&&Object(g.a)({message:"AdManager_ABaseBidAdaptor_double_destroy",exception:this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,level:f.ProtoLoggingLevelEnum.WARNING}),this.Ac(),this.tm.next(e);break;default:this.tm.next(e)}else this.ym({type:v.b.AdError,payload:{errorMessage:Ss.c.InvalidVpaidEvent}})}Mm(e){this.lm=this.$m(),this.um=this.lm.slotsContainer,Object(S.a)(this.um,this.Tm),this.om=this.lm.adSlot,this.om.id=this.Pm,this.um.id=this.settings.bidSlotId,this.cm=this.lm.videoSlot,this.cm.volume=e,Object(S.V)(this.cm,e),this.settings.adEnforcer.registerContainer(this.um,this.Pm),this.Vc.push(this.settings.adEnforcer.onEnforcerEvent.subscribe(e=>{this.Um(e)})),this.settings.adEnforcer.start(bs.All)}$m(){return this.settings.adSlotContainerRecycler.requestAdSlot(this.settings.adContainer)}Ac(){this.Vo=!0,Object(S.L)(this.um,As),Object(S.L)(this.um,this.Tm),this.om.removeAttribute("id"),this.um.removeAttribute("id"),je(this.Vc),this.wm(),this.settings.adEnforcer.deregisterContainer(this.um),this.settings.viewabilityService.off(this.om,this._m),null!==this.vm&&ye.clearTimeout(this.vm),this.Vm()}Vm(){this.vm=ye.setTimeout(()=>{this.settings.adSlotContainerRecycler.destroyAdSlot(this.lm)},500)}Om(){var{advertiserLineItemId:e,publisherLineItemId:t}=this.settings.adManagerLineItem.protoLineItem;this.mm.next({advertiserLineItemId:e,publisherLineItemId:t})}Fm(){var e=R.e,t=this.om;this.settings.viewabilityService.on(t,this._m,{threshold:e}),this._m(this.settings.viewabilityService.check({threshold:e,element:t}))}wm(){Object.keys(this.Cm).forEach(e=>{this.km(e).clearTimeout()})}Dm(e){return!(!this.fm&&(e.type===v.b.AdStopped||e.type===v.b.AdSkipped))}Um(t){if(t.detectedContainer===this.um){let e;switch(t.type){case ys.BADURI_DETECTED:e="AdManager_enforcer_BadUri";break;case ys.MALWARE_DETECTED:e="AdManager_enforcer_malware",this.ym({type:v.b.AdError,payload:{errorMessage:Ss.c.EnforcementMalware}});break;case ys.VOLUME_DETECTED:e="AdManager_enforcer_soundBlock",this.ym({type:v.b.AdError,payload:{errorMessage:Ss.c.EnforcementVolume}})}Object(g.a)({message:e,exception:t.message,level:f.ProtoLoggingLevelEnum.WARNING})}}Nm(e,t,i){var s=this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,r=this.creativeId;Object(g.a)({message:`AdManager_${e}_${t}`,exception:`advertiserLineItemId:${s}_creativeId:${r}_errorMessage:${null===(r=i)||void 0===r?void 0:r.message}`,callStack:null===i||void 0===i?void 0:i.stack,throttle:5,level:f.ProtoLoggingLevelEnum.WARNING,sendMaxLog:!0})}}var Cs=i(45);class ws extends Is{constructor(e,t,i,s,r,n,o){super(),this.Hm=e,this.ir=t,this.qm=i,this.zm=s,this.Wm=r,this.Gm=n,this.Jm=o,this.Qm=new Ce,this.Xm=t=>{if(this.Ym(t)){let e="";try{e=t.getError().getMessage()+"_"+t.getError().getErrorCode()+"_"+t.getError().getVastErrorCode()}catch(t){}this.tm.next({type:v.b.AdError,payload:{errorMessage:Ss.c.ImaError+"_"+e}})}},this.Km=e=>{var t=this.Hm.AdEvent.Type;switch(e.type){case t.CLICK:this.tm.next({type:v.b.AdClickThru,payload:{}});break;case t.LOADED:this.Hr(e);break;case t.IMPRESSION:var i={adsManager:this.Wm,adContainer:this.Zm,viewMode:this.tg(this.ig),adTag:this.zm};this.tm.next({type:v.b.AdVideoStart}),this.tm.next({type:v.b.AdImpression,payload:{imaMetadata:i}});break;case t.STARTED:this.tm.next({type:v.b.AdStarted});break;case t.FIRST_QUARTILE:this.tm.next({type:v.b.AdVideoFirstQuartile});break;case t.MIDPOINT:this.tm.next({type:v.b.AdVideoMidpoint});break;case t.THIRD_QUARTILE:this.tm.next({type:v.b.AdVideoThirdQuartile});break;case t.COMPLETE:this.tm.next({type:v.b.AdVideoComplete}),this.tm.next({type:v.b.AdStopped,payload:{shouldTrackPostBid:!0}});break;case t.ALL_ADS_COMPLETED:break;case t.DURATION_CHANGE:this.tm.next({type:v.b.AdDurationChange});break;case t.PAUSED:this.tm.next({type:v.b.AdPaused});break;case t.RESUMED:this.tm.next({type:v.b.AdPlaying});break;case t.LINEAR_CHANGED:this.tm.next({type:v.b.AdLinearChange});break;case t.SKIPPABLE_STATE_CHANGED:this.tm.next({type:v.b.AdSkippableStateChange});break;case t.SKIPPED:this.tm.next({type:v.b.AdSkipped});break;case t.VOLUME_CHANGED:this.tm.next({type:v.b.AdVolumeChange});break;case t.USER_CLOSE:this.tm.next({type:v.b.AdUserClose});break;case t.LOG:this.tm.next({type:v.b.AdLog})}},this.eg()}get onCreativeReceived(){return this.Qm.asObservable()}initAd(e,t,i,s,r,n){this.Zm=n.slot,this.sg=n.videoSlot,this.ig=i||v.a.Normal;try{this.Wm.setVolume(0),this.Wm.init(e,t,this.tg(this.ig))}catch(e){this.tm.next({type:v.b.AdError,payload:{errorMessage:Ss.c.ImaManagerInit}})}}startAd(){try{this.Wm.start()}catch(e){this.tm.next({type:v.b.AdError,payload:{errorMessage:Ss.c.WrapperStartAdError+`_${e.message}`}})}}stopAd(e){this.Wm.stop(),this.tm.next({type:v.b.AdStopped,payload:{shouldTrackPostBid:!0}})}resizeAd(e,t,i){this.Wm.resize(e,t,this.tg(i))}pauseAd(){this.Wm.pause()}resumeAd(){this.Wm.resume(),this.ir===Qe.b.Ios&&Object(S.C)(this.sg)}expandAd(){this.Wm.expand()}collapseAd(){this.Wm.collapse()}skipAd(){this.Wm.skip()}getAdRemainingTime(){return this.Wm.getRemainingTime()||0}getAdDuration(){return this.ng?this.ng.getDuration():0}getAdVolume(){return this.Wm.getVolume()}getAdMediaWidth(){return this.ng?this.ng.getVastMediaWidth():0}getAdMediaHeight(){return this.ng?this.ng.getVastMediaHeight():0}setAdVolume(e){this.Wm.setVolume(e)}getMediaFile(){return this.ng?this.ng.getMediaUrl():void 0}eg(){this.qm.addEventListener(this.Hm.AdErrorEvent.Type.AD_ERROR,this.Xm),this.Wm.addEventListener(this.Hm.AdErrorEvent.Type.AD_ERROR,this.Xm),Object.keys(this.Hm.AdEvent.Type).forEach(e=>{this.Wm.addEventListener(this.Hm.AdEvent.Type[e],this.Km,!1)})}rg(){this.qm.removeEventListener(this.Hm.AdErrorEvent.Type.AD_ERROR,this.Xm),this.Wm.removeEventListener(this.Hm.AdErrorEvent.Type.AD_ERROR,this.Xm),Object.keys(this.Hm.AdEvent.Type).forEach(e=>{this.Wm.removeEventListener(this.Hm.AdEvent.Type[e],this.Km,!1)})}tg(e){return e===v.a.Fullscreen?this.Hm.ViewMode.FULLSCREEN:this.Hm.ViewMode.NORMAL}Ym(e){e=e.getUserRequestContext();return!e||e.id===this.Gm.id}Hr(e){this.ng=e.getAd(),this.Qm.next(this.ng.getCreativeId());let t=-1,i="";try{t=this.ng.getSkipTimeOffset();var s=e.getAdData().clickThroughUrl;i=Object(A.h)(s)?s:void 0}catch(e){}Object(Cs.b)(this.Jm,i).then(e=>{e?this.tm.next({type:v.b.AdError,payload:{errorMessage:Ss.c.DomainBlocked}}):this.tm.next({type:v.b.AdLoaded,payload:{skipOffset:t}})})}destroy(){try{this.rg(),setTimeout(()=>{this.Wm.destroy()})}catch(e){}}}const xs={ImaObjectNotFound:Ss.c.ImaObjectNotFound,ImaScriptFailure:Ss.c.ImaScriptFailure},Es="//imasdk.googleapis.com/js/sdkloader/ima3.js";class Ls{static preloadImaSdk(e){Object(S.I)(Es,e)}static fetchImaSdk(r,n){return new Promise((t,i)=>{var e=Ls.hg(r);if(e)t(e);else{const s=n&&1===Object(Je.l)([95,5]);Object(S.A)({src:Es},r.document.head,r,()=>{var e=Ls.hg(r);e?t(e):(s&&Object(g.a)({message:"AdManager_ImaIntegrator_no_image_object_found_after_loading_script",level:f.ProtoLoggingLevelEnum.FATAL,throttle:2,sendMaxLog:!1}),i(xs.ImaObjectNotFound))},()=>{i(xs.ImaScriptFailure)},s,"AdManager_ImaIntegrator_unable_to_insert_ima_sdk_script")}})}static hg(e){return e.google&&e.google.ima}}class Ms extends ks{constructor(e){super(e),this.settings=e,this.lm=null,this.adMediaType="ima",this.adSourceType=f.ProtoAdsourceTypeEnum.Ima,this.ag=[],this.lm=this.settings.imaAdSlotContainer,this.og=new ws(this.settings.imaSdk,this.settings.os,this.settings.imaAdsLoader,this.settings.url,this.settings.imaAdsManager,this.settings.requestAdsContext,this.settings.adManagerLineItem.protoLineItem.publisherLineItemId)}initAd(e,t,i,s,r,n,o){try{super.initAd(e,t,i,s,r,n,o),this.settings.adManagerLineItem.protoLineItem.moatTrackingEnabled&&this.cg(),this.ag.push(this.og.onVpaidEvent.subscribe(e=>{this.ym(e)}),this.og.onCreativeReceived.subscribe(e=>{this.creativeId=e})),this.og.initAd(e,t,i,s,r,{slot:this.om,videoSlot:this.cm})}catch(e){this.tm.next({type:v.b.AdError,payload:{errorMessage:Ss.c.AdaptorInitAdError+`_${e.message}`}})}}startAd(){try{super.startAd(),this.og.startAd()}catch(e){this.tm.next({type:v.b.AdError,payload:{errorMessage:Ss.c.AdaptorStartAdError+`_${e.message}`}})}}stopAd(e){try{super.stopAd(e),this.og.stopAd(e)}catch(e){this.Nm("ImaBidAdaptor","stopAd",e)}}resizeAd(e,t,i){try{this.og.resizeAd(e,t,i)}catch(e){this.Nm("ImaBidAdaptor","resizeAd",e)}}pauseAd(){try{this.og.pauseAd()}catch(e){this.Nm("ImaBidAdaptor","pauseAd",e)}}resumeAd(){try{this.og.resumeAd()}catch(e){this.Nm("ImaBidAdaptor","resumeAd",e)}}expandAd(){try{this.og.expandAd()}catch(e){this.Nm("ImaBidAdaptor","expandAd",e)}}collapseAd(){try{this.og.collapseAd()}catch(e){this.Nm("ImaBidAdaptor","collapseAd",e)}}skipAd(){try{super.skipAd(),this.og.skipAd()}catch(e){this.Nm("ImaBidAdaptor","skipAd",e)}}getAdRemainingTime(){try{return this.og.getAdRemainingTime()}catch(e){return this.Nm("ImaBidAdaptor","getAdRemainingTime",e),0}}getAdDuration(){try{return this.og&&this.og.getAdDuration()||this.settings.adManagerLineItem.protoLineItem.duration}catch(e){return this.Nm("ImaBidAdaptor","getAdDuration",e),0}}getAdVolume(){try{return this.og.getAdVolume()}catch(e){return this.Nm("ImaBidAdaptor","getAdVolume",e),0}}getAdMediaSize(){return{width:this.og.getAdMediaWidth(),height:this.og.getAdMediaHeight()}}setAdVolume(e){try{super.setAdVolume(e),this.og.setAdVolume(e)}catch(e){this.Nm("ImaBidAdaptor","setAdVolume",e)}}get adVideoUrl(){return this.og.getMediaFile()}get declaredDurationInSeconds(){return this.og.getAdDuration()}Rm(e){const t=super.Rm(e);return t.payload.adSourceData.imaMetadata=e.payload.imaMetadata,t}$m(){return this.lm}Vm(){this.settings.adSlotContainerRecycler.recycleAdSlot(this.lm)}cg(){Ls.fetchImaSdk(this.settings.globalDomUtilsService.getGlobalClosestTop().topFrame,!1)}Ac(){try{super.Ac(),je(this.ag),this.og.destroy()}catch(e){this.Nm("ImaBidAdaptor","_destroy",e)}}}class Rs{constructor(e,t,i,s,r,n,o){this.Hm=e,this.qm=t,this.Qu=i,this.Xu=s,this.zm=r,this.sg=n,this.ze=o,this.ug=new Ce,this.dg=new Ce,this.fg={id:Object(Je.c)()},this.Wm=null,this.Xm=e=>{if(this.Ym(e))switch(e.getError().getErrorCode()){case this.Hm.AdError.ErrorCode.VAST_EMPTY_RESPONSE:this.pg(Qi.ImaVastEmptyResponse);break;case this.Hm.AdError.ErrorCode.VAST_WRAPPER_ERROR:case this.Hm.AdError.ErrorCode.VAST_MALFORMED_RESPONSE:this.pg(Qi.ImaInvalidResponse);break;default:this.pg(Qi.ImaRequestException)}},this.bg=e=>{this.Ym(e)&&(this.Wm=e.getAdsManager(this.sg,{loadVideoTimeout:25*B.f}),this.vg(),this.ug.next({imaAdsManager:this.Wm,requestAdsContext:this.fg}))},this.qm.addEventListener(this.Hm.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.bg),this.qm.addEventListener(this.Hm.AdErrorEvent.Type.AD_ERROR,this.Xm)}get onSuccess(){return this.ug.asObservable()}get onError(){return this.dg.asObservable()}loadAd(){const e=new this.Hm.AdsRequest;e.adTagUrl=this.zm,e.linearAdSlotWidth=e.nonLinearAdSlotWidth=this.Qu,e.linearAdSlotHeight=e.nonLinearAdSlotHeight=this.Xu,e.pageUrl=this.ze,this.qm.requestAds(e,this.fg)}pg(e){this.dg.next(e)}vg(){this.qm.removeEventListener(this.Hm.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.bg),this.qm.removeEventListener(this.Hm.AdErrorEvent.Type.AD_ERROR,this.Xm)}Ym(e){e=e.getUserRequestContext();return!e||e.id===this.fg.id}destroy(){var e;try{this.vg(),null===(e=this.Wm)||void 0===e||e.destroy()}catch(e){}}}class Bs{constructor(e){this.settings=e,this.mg=!1,this.gg=[],this.metrics={created:(new Date).getTime()}}fetchBid(){this.metrics.fetchStart=(new Date).getTime(),this.yg=this.settings.adSlotContainerRecycler.requestAdSlotIma(this.settings.adContainer);var e=new Promise((e,t)=>{setTimeout(()=>{t(Qi.ImaTimeout)},25e3)}),t=this.wg(this.yg);return Promise.race([t,e]).then(e=>(this.metrics.fetchEnd=(new Date).getTime(),this.mg=!0,this.xg&&je(this.gg),e)).catch(e=>{throw this.metrics.fetchEnd=(new Date).getTime(),this.mg=!0,this.xg&&(je(this.gg),this.xg.destroy(),this.settings.adSlotContainerRecycler.recycleAdSlot(this.yg)),e})}wg(e){return e.fetchImaDependencies().then(e=>(this.Sg=e,this.Og(e))).then(e=>this.kg(e)).catch(e=>{throw Object(A.a)(e)?e:Qi.ImaRequestException})}Og(s){return this.mg?Promise.reject():new Promise((t,i)=>{var e=this._g();this.xg=new Rs(s.imaSdk,s.imaAdsLoader,e.width,e.height,this.settings.url,this.yg.videoSlot,this.settings.pageUrl),this.gg.push(this.xg.onSuccess.subscribe(e=>{t(e)}),this.xg.onError.subscribe(e=>{i(e)})),this.xg.loadAd()})}_g(){return this.settings.callingState.adContainerState.get(this.settings.adManagerLineItem.protoLineItem.adType)}kg(e){return new Ms({id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackers:this.settings.trackersInformation,url:this.settings.url,requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,adContainer:this.settings.adContainer,globalDomUtilsService:this.settings.globalDomUtilsService,viewabilityService:this.settings.viewabilityService,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,successRate:this.settings.successRate,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,externalCreativeId:this.settings.creativeId,imaSdk:this.Sg.imaSdk,imaAdsLoader:this.Sg.imaAdsLoader,imaAdsManager:e.imaAdsManager,requestAdsContext:e.requestAdsContext,imaAdSlotContainer:this.yg,bidSlotId:this.settings.bidSlotId,pageUrl:this.settings.pageUrl})}}function js(t,i){t.sort((e,t)=>e.width===t.width?e.bitrate-t.bitrate:e.width-t.width);for(let e=0;e<t.length;e++)if(t[e].width>=i)return t[e-1]||t[e];return t[t.length-1]}const Ds=()=>`cnx_bid_slot_${Object(Je.c)()}`;var _s=i(15);const Fs=_s&&_s.isSupported(),Us={enableWorker:!1,capLevelToPlayerSize:!0,cnxRenderWindow:window,maxBufferSize:5e6,maxBufferLength:5,maxMaxBufferLength:10,liveBackBufferLength:0};class Ns{constructor(e,t,i,s=!1){this.jg=e,this.Ag=t,this.Ig=i,this.Cg=s,this.Tg=(e,t)=>{if(t.fatal)switch(t.type){case _s.ErrorTypes.NETWORK_ERROR:if(t.details===_s.ErrorDetails.MANIFEST_PARSING_ERROR||t.details===_s.ErrorDetails.MANIFEST_LOAD_ERROR)return void this.Pg();this.Mg.startLoad();break;case _s.ErrorTypes.MEDIA_ERROR:this.Mg.recoverMediaError();break;default:this.Pg()}},this.Eg=()=>{this.Mg.off(_s.Events.MEDIA_ATTACHED,this.Eg),this.Mg.loadSource(this.jg),this.Mg.once(_s.Events.MANIFEST_PARSED,this.Rg)},this.Rg=()=>{this.Mg.off(_s.Events.MANIFEST_PARSED,this.Rg),this.Cg&&this.Bg(),this.Dg()}}start(e,t){this.Dg=e,this.Pg=t,Fs?(this.Mg=this.Ig.initHls(Us),this.Fg()):this.Pg()}destroy(){this.Mg&&(this.Mg.destroy(),this.Mg=null)}Fg(){this.Mg.on(_s.Events.ERROR,this.Tg),this.Mg.attachMedia(this.Ag),this.Mg.once(_s.Events.MEDIA_ATTACHED,this.Eg)}Bg(){this.Mg.currentLevel=this.Mg.levels.length-1}}var Vs,Hs,qs,Ws,$s=i(51);class Gs extends Is{constructor(e,t,i,s,r,n,o,a,l=!1){super(),this.Os=e,this.$g=t,this.sg=i,this.ir=s,this.Ug=r,this.Vg=n,this.Ng=o,this.Hg=a,this.qg=l,this.zg=!1,this.pageFocus=new $s.a(this.Os),this.Wg=Object(c.a)(qe),this.Gg=!1,this.Jg=!0,this.Qg=!1,this.Xg=[{event:v.b.AdVideoStart,position:0},{event:v.b.AdVideoFirstQuartile,position:25},{event:v.b.AdVideoMidpoint,position:50},{event:v.b.AdVideoThirdQuartile,position:75},{event:v.b.AdVideoComplete,position:100}],this.Yg=this.Xg[0],this.Kg=e=>{try{switch(e.type){case qe.Pause:if(this.Vg&&!this.Jg)return void(this.Jg=!0);this.Gg=!1;break;case qe.Play:if(!this.Gg&&this.qg)return void this.sg.pause();break;case qe.Canplay:case qe.Durationchange:this.Zg();break;case qe.Timeupdate:this.ty();break;case qe.Error:this.tm.next({type:v.b.AdError,payload:{errorMessage:Ss.c.VastVideoTagEventError}});break;case"click":this.tm.next({type:v.b.AdClickThru,payload:{}})}}catch(e){Object(g.a)({level:f.ProtoLoggingLevelEnum.FATAL,callStack:e.stack,message:"AdManager_VastIntegrator_onVideoEvent",exception:e.message,throttle:10,sendMaxLog:!1})}}}initAd(e,t,i,s,r,n){try{this.sg=n.videoSlot,this.width=e,this.height=t,this.iy(this.Ug,this.sg.parentElement),this.resizeAd(e,t,i),this.addVideoEvents(this.sg),this.Hg&&Fs?this.ey():(this.sg.setAttribute("src",this.$g),this.sg.setAttribute("preload","metadata"),this.sg.load()),this.pageFocus.isDocumentVisible()||this.Zg()}catch(e){this.tm.next({type:v.b.AdError,payload:{errorMessage:Ss.c.WrapperInitAdError+`_${e.message}`}})}}startAd(){try{Object(S.a)(this.sg,"cnx-ad-video-slot"),this.Gg=!0,this.pageFocus.isDocumentVisible()?this.sg.play().then(()=>{this.tm.next({type:v.b.AdStarted}),this.tm.next({type:v.b.AdImpression,payload:{}})}).catch(e=>{this.tm.next({type:v.b.AdError,payload:{errorMessage:Ss.c.VastPlayPromiseReject}})}):(this.tm.next({type:v.b.AdStarted}),this.tm.next({type:v.b.AdImpression,payload:{}}),this.sg.play())}catch(e){this.tm.next({type:v.b.AdError,payload:{errorMessage:Ss.c.WrapperStartAdError+`_${e.message}`}})}}stopAd(e){this.qg&&this.sg.pause(),"videoComplete"===e&&this.Vg?this.tm.next({type:v.b.AdStopped,payload:{shouldTrackPostBid:!1}}):this.tm.next({type:v.b.AdStopped,payload:{shouldTrackPostBid:!0}})}resizeAd(e,t,i){Object(S.Q)(this.sg,{width:`${e}px`,height:`${t}px`}),this.tm.next({type:v.b.AdSizeChange})}pauseAd(){this.Gg=!1,this.Ng&&void 0===this.Yg&&(this.Yg=this.Xg[0]),this.sg.pause(),this.tm.next({type:v.b.AdPaused})}resumeAd(){this.Vg&&void 0===this.Yg&&(this.Yg=this.Xg[0]),this.Gg=!0,this.sg.play(),this.ir===Qe.b.Ios&&Object(S.C)(this.sg),this.tm.next({type:v.b.AdPlaying})}expandAd(){}collapseAd(){}skipAd(){this.tm.next({type:v.b.AdSkipped})}getAdRemainingTime(){return this.sg.duration-this.sg.currentTime}getAdDuration(){return this.sg.duration||0}getAdVolume(){return this.sg.volume}setAdVolume(e){this.sg.volume=e}getAdMediaWidth(){return this.sg.videoWidth}getAdMediaHeight(){return this.sg.videoHeight}destroy(){if(!this.Ng&&!this.Vg)try{Object(S.L)(this.sg,"cnx-ad-video-slot"),this.sy(this.sg),this.sg.removeAttribute("src"),this.ny&&(this.ny.destroy(),this.ny=null)}catch(e){Object(g.a)({level:f.ProtoLoggingLevelEnum.WARNING,message:"AdManager_VastIntegrator_destroyAd",exception:e.message,callStack:e.stack})}}ey(){this.ny=new Ns(this.$g,this.sg,this.Os,!0),this.ny.start(()=>{this.Zg()},()=>{this.tm.next({type:v.b.AdError,payload:{errorMessage:Ss.c.CnxMediaSrcNotSupported}})})}iy(e,t){this.hy=this.Os.createElement("a"),e&&(this.hy.href=e,this.hy.target="_blank"),Object(S.a)(this.hy,"cnx-ad-slot"),t.appendChild(this.hy),this.hy.addEventListener("click",this.Kg)}addVideoEvents(t){this.Wg.forEach(e=>{t.addEventListener(e,this.Kg)}),this.hy&&this.hy.addEventListener("click",this.Kg)}sy(t){this.Wg.forEach(e=>{t.removeEventListener(e,this.Kg)}),this.hy&&this.hy.removeEventListener("click",this.Kg)}Zg(){this.zg||(this.zg=!0,this.tm.next({type:v.b.AdLoaded,payload:{}}))}ty(){this.tm.next({type:v.b.AdRemainingTimeChange});const e=Object(Te.g)(0,this.sg.duration,0,100,this.sg.currentTime);if(this.Yg&&e>=this.Yg.position){this.Qg||this.tm.next({type:this.Yg.event});const e=this.Yg;this.Yg=this.Xg[this.Xg.indexOf(this.Yg)+1],e.event===v.b.AdVideoComplete&&(this.Jg=!1,this.stopAd("videoComplete"),this.Qg=!0)}}}(Vs=Vs||{}).errorIframe="Error creating iframe";const zs="cnxProxyTask";zs;class Js{constructor(e,t,i){this.Os=e,this.co=t,this.da=i}ly(t,i,s){let r=!1;return e=>{e.contentWindow&&!r&&(r=!0,this.py(e,this.by(t,i),s))}}vy(e,t,i,s,r){return this.my(e,this.ly(t,i,s),r)}my(e,t,i){const s=this.Os.createElement("iframe",i);return s.allow="autoplay",s.src="javascript:false",s.srcdoc="",s.width="100%",s.height="100%",s.style.position="absolute",s.style.left="0",s.style.top="0",s.style.margin="0px",s.style.padding="0px",s.style.border="0px",s.style.width="100%",s.style.height="100%",s.setAttribute("SCROLLING","NO"),s.onload=()=>{t(s)},e.appendChild(s),t(s),s}py(t,e,i){var s=Object(S.t)(t);(class{static executeAsync(e,t){this.ay(e)(t)}static oy(e){return!!e[zs]}static ay(e){return this.oy(e)||this.uy(e),e[zs]}static uy(e){var t=e.document.head;Object(S.z)(t,e,"\n    window.cnxProxyTask = function(task) {\n        setTimeout(function(){\n            task();\n        }, 0);\n    }\n")}}).executeAsync(s,()=>{try{const i=t.contentWindow&&t.contentWindow.document;i.open(),i.write(e)}catch(e){this.gy(t,e),t=null}i(t)})}by(i,s){return Object.keys(s).forEach(function(e){var t=s[e];i=i.replace(new RegExp(`{{${e}}}`,"g"),t)}),i}loadIframe(e){const t='<!DOCTYPE html><html lang="en"><head>'+(e.customHead||"")+'<meta charset="UTF-8"></head><body style="margin:0;padding:0">'+(e.customHtml||"")+'<script type="text/javascript">window.postMessage(\'{"event": "ready", "id": "{{iframeID}}"}\', \'*\');<\/script></body></html>',o="cnx-iframe_"+Object(Je.c)();return new Promise((r,n)=>{this.yy=this.vy(e.container,t,{iframeID:o},i=>{if(null!==i){const s=e=>{let t;try{t=JSON.parse(e.data)}catch(e){return}t.id===o&&(i.contentWindow?(i.contentWindow.document.close(),i.contentWindow.removeEventListener("message",s),r({iframe:i})):n("The Iframe is no longer in the DOM"))};try{i.contentWindow.addEventListener("message",s);const{advertiserLineItemId:o,heavyAdBlockTypeEnum:r}=e.customReportingLog;this.wy=new d(this.yy.contentWindow,this.co,{advertiserLineItemId:o,heavyAdBlockTypeEnum:r})}catch(e){this.gy(i,e),n("Iframe callback error")}}else n(Vs.errorIframe)},this.da)})}get iframe(){return this.yy}destroy(){this.wy.destroy(),this.yy=null}gy(e,t){this.Os.isDetachedFromDOM(e)?Object(g.a)({message:"iframeLoader_(inDom_false)",exception:t.message,callStack:t.stack,level:f.ProtoLoggingLevelEnum.WARNING,sendMaxLog:!1,throttle:1}):Object(g.a)({message:"iframeLoader_(inDom_true)",exception:t.message,callStack:t.stack,level:f.ProtoLoggingLevelEnum.WARNING,logJsonState:!0,sendMaxLog:!1,throttle:1}),Object(S.M)(e)}}class Ks{constructor(e,t,i,s,r){this.xy=e,this.Os=t,this.co=i,this.Kn=s,this.Sy=r,this.Oy={bodyTamplate:`<div class="ad-element" id="cnx-ad-element"></div><script type="text/javascript" src="${this.xy}"><\/script>'\n        <script type="text/javascript">\n            window.Object.defineProperty(Object.prototype, 'cnxInnerTag', { enumerable: !1, writable: !0, value: '${this.Kn}' });\n            window.Object.defineProperty(Function.prototype, 'cnxInnerTag',\n            { enumerable: !1, writable: !0, value: '${this.Kn}' });\n            cnxtimeouts = [];\n            cnxintervals = [];\n            oldSetTimeout = setTimeout;\n            setTimeout = function (e, t) { var n = oldSetTimeout.apply(null, arguments); return cnxtimeouts.push(n), n };\n            oldSetInterval = setInterval;\n            setInterval = function (e, t) { var n = oldSetInterval.apply(null, arguments); return cnxintervals.push(n), n };\n            clearAll = function () {\n                setTimeout = function () { };\n                setInterval = function () { };\n                for (var e = 0; e < cnxtimeouts.length; e++) {\n                    clearTimeout(cnxtimeouts[e]);\n                }\n                for (e = 0; e < cnxintervals.length; e++) {\n                    clearInterval(cnxintervals[e]);\n                }\n            };\n        <\/script>`,headTamplate:" <style>\n            html,\n            body,\n            .ad-element {\n                width: 100%;\n                height: 100%;\n            }\n            </style>"},this.ky=new Js(this.Os,this.co)}_y(e){return this.ky.loadIframe({customHead:this.Oy.headTamplate,customHtml:this.Oy.bodyTamplate,container:e,customReportingLog:{heavyAdBlockTypeEnum:f.ProtoHeavyAdBlockTypeEnum.VpaidIframe,advertiserLineItemId:this.Sy}})}loadAdUnitIframe(e){return new Promise((t,i)=>{this._y(e).then(e=>{e.adContainer=e.iframe.contentWindow.document.querySelector(".ad-element"),t(e)}).catch(e=>{i(e)})})}destroyAdUnit(){try{const e=this.ky.iframe.contentWindow.clearAll;e&&e()}catch(e){Object(g.a)({message:"AdManager_VPAIClient_destroyAdUnit",exception:null===e||void 0===e?void 0:e.message,callStack:null===e||void 0===e?void 0:e.stack,level:f.ProtoLoggingLevelEnum.WARNING,throttle:2,sendMaxLog:!0})}this.ky.destroy(),this.ky=null}}(t=Hs=Hs||{})[t.handshakeVersion=0]="handshakeVersion",t[t.initAd=1]="initAd",t[t.startAd=2]="startAd",t[t.stopAd=3]="stopAd",t[t.skipAd=4]="skipAd",t[t.resizeAd=5]="resizeAd",t[t.pauseAd=6]="pauseAd",t[t.resumeAd=7]="resumeAd",t[t.expandAd=8]="expandAd",t[t.collapseAd=9]="collapseAd",t[t.subscribe=10]="subscribe",t[t.unsubscribe=11]="unsubscribe";class Qs extends Is{constructor(e,t,i,s,r,n,o){super(),this.$g=e,this.Os=t,this.co=i,this.jy=s,this.Sy=r,this.dm=n,this.ir=o,this.Ay=[],this.Iy=new Set,this.Cy=new Set,this.Ty=(e,t,i)=>{this.Py(v.b.AdClickThru,{url:e,playerHandles:i})},this.Py=(e,t)=>{if(this.Cy.add(e),!this.Iy.has(e))return e!==v.b.AdImpression||this.Cy.has(v.b.AdLoaded)?void this.My(e,t):(Object(g.a)({message:"AdManager_AdVpaidWrapper_ImpressionBeforeAdLoaded",exception:`advertiserLineItemId:${this.Sy}_creativeId:${this.dm}_vpaidSrc:${this.$g}`,callStack:JSON.stringify(Object(p.d)(this.Cy)),throttle:1e3,level:f.ProtoLoggingLevelEnum.WARNING,sendMaxLog:!0}),this.Iy.add(v.b.AdLoaded),void this.My(v.b.AdLoaded,t))},this.My=(e,t)=>{switch(e){case v.b.AdError:this.tm.next({type:v.b.AdError,payload:{errorMessage:Object(A.g)(t)?t:JSON.stringify(t)}});break;case v.b.AdLoaded:this.tm.next({type:v.b.AdLoaded,payload:{skipOffset:Object(A.f)(t)?t.skipOffset:void 0}});break;case v.b.AdImpression:this.tm.next({type:v.b.AdImpression,payload:{}});break;case v.b.AdClickThru:this.tm.next({type:v.b.AdClickThru,payload:Object(A.f)(t)?t:{}});break;default:this.tm.next({type:v.b[e]})}}}initAd(e,t,i,s,r,n){try{this.Qu=e,this.Xu=t,this.ig=i,this.Ey=s,this.Ly=r,this.Ry=n,this.By=new Ks(this.$g,this.Os,this.co,this.jy,this.Sy),this.Dy=this.By.loadAdUnitIframe(n.slot).then(e=>{this.Fy(e)}).catch(e=>{this.tm.next({type:v.b.AdError,payload:{errorMessage:Ss.c.VpaidOnLoad}})})}catch(e){this.tm.next({type:v.b.AdError,payload:{errorMessage:Ss.c.VpaidOnLoad}})}}startAd(){try{this.Cy.has(v.b.AdImpression)&&!this.Iy.has(v.b.AdImpression)&&(Object(g.a)({message:"AdManager_AdVpaidWrapper_brokenImpressionHandle",exception:`advertiserLineItemId:${this.Sy}_creativeId:${this.dm}_vpaidSrc:${this.$g}`,callStack:JSON.stringify(Object(p.d)(this.Cy)),throttle:1e3,level:f.ProtoLoggingLevelEnum.WARNING,sendMaxLog:!0}),this.Iy.add(v.b.AdImpression),this.tm.next({type:v.b.AdImpression,payload:{}})),this.$y.startAd()}catch(e){this.tm.next({type:v.b.AdError,payload:{errorMessage:Ss.c.WrapperStartAdError}})}}stopAd(e){var t;null===(t=this.Dy)||void 0===t||t.then(()=>{this.$y?this.$y.stopAd(e):Object(g.a)({message:"stopAd",exception:e,level:f.ProtoLoggingLevelEnum.WARNING})})}resizeAd(e,t,i){this.$y.resizeAd(e,t,i)}pauseAd(){this.$y.pauseAd()}resumeAd(){this.$y.resumeAd(),this.ir===Qe.b.Ios&&Object(S.C)(this.Ry.videoSlot)}expandAd(){this.$y.expandAd()}collapseAd(){this.$y.collapseAd()}skipAd(){this.$y.skipAd()}getAdRemainingTime(){return this.$y.getAdRemainingTime()}getAdDuration(){var e;return null===(e=this.$y)||void 0===e?void 0:e.getAdDuration()}getAdVolume(){return this.$y.getAdVolume()}setAdVolume(e){this.$y.setAdVolume(e)}destroy(){var e;this.Uy(),this.Ay.length=0,(this.$y=null)===(e=this.By)||void 0===e||e.destroyAdUnit()}Fy(e){const t=e.iframe.contentWindow.getVPAIDAd;if("function"==typeof t){const i=t();this.$y=i,this.xd(),this.Vy(i)?i.initAd(this.Qu,this.Xu,this.ig,this.Ey,this.Ly,{slot:e.adContainer,videoSlot:this.Ry.videoSlot}):this.tm.next({type:v.b.AdError,payload:{errorMessage:Ss.c.VpaidInvalid}})}else this.tm.next({type:v.b.AdError,payload:{errorMessage:Ss.c.VpaidGetVpaidAdError}})}xd(){Object.keys(v.b).forEach(e=>{let t=this.Py.bind(this,v.b[e]);v.b[e]===v.b.AdClickThru&&(t=this.Ty),this.Ay.push({handler:t,event:e}),this.$y.subscribe(t,e)})}Uy(){this.Ay.forEach(e=>{this.$y.unsubscribe(e.handler,e.event)})}Vy(t){return Object.keys(Object(p.f)(Hs)).every(e=>Object(A.b)(t[Hs[e]]))}}class Ys extends ks{constructor(e){super(e),this.settings=e,this.adSourceType=f.ProtoAdsourceTypeEnum.Unknown,this.Ny=[],this.creativeId=e.vastResponse.creativeId}initAd(t,i,s,r,e,n,o){try{super.initAd(t,i,s,r,e,n,o),Object(Cs.b)(this.settings.adManagerLineItem.protoLineItem.publisherLineItemId,this.settings.vastResponse.clickThrough).then(e=>{e?this.ym({type:v.b.AdError,payload:{errorMessage:Ss.c.DomainBlocked}}):(this.Hy=this.qy(t,this.cm),null!==this.Hy?(this.adMediaType=this.Hy.type,this.Hy.getMediaFileType()===Ss.d.Video?(this.zy=new Gs(this.settings.globalDomUtilsService,this.Hy.src,this.cm,this.settings.os,this.settings.vastResponse.clickThrough,this.settings.loopAdWhenFinished),this.adSourceType=f.ProtoAdsourceTypeEnum.VastMedia):(this.zy=new Qs(this.Hy.src,this.settings.globalDomUtilsService,this.settings.trackingService,this.Pm,this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,this.creativeId,this.settings.os),this.adSourceType=f.ProtoAdsourceTypeEnum.Vpaid),this.Ny.push(this.zy.onVpaidEvent.subscribe(e=>{var t;e.type===v.b.AdLoaded&&(e.payload.skipOffset=this.settings.vastResponse.skipoffset),e.type===v.b.AdClickThru&&(this.Wy=e.payload.url,(t=e.payload.url||this.settings.vastResponse.clickThrough)&&e.payload.playerHandles&&this.settings.globalDomUtilsService.open(t,Ai.c.Blank)),this.ym(e)})),e={AdParameters:this.settings.vastResponse.adParameters,adParameters:this.settings.vastResponse.adParameters},this.zy.initAd(t,i,s,r,e,{slot:this.om,videoSlot:this.cm})):this.ym({type:v.b.AdError,payload:{errorMessage:Ss.c.VastUnsupportedMedia}}))}).catch(e=>this.Gy(e))}catch(t){this.Gy(t)}}startAd(){try{super.startAd(),this.zy.startAd()}catch(e){this.tm.next({type:v.b.AdError,payload:{errorMessage:Ss.c.AdaptorStartAdError+`_${e.message}`}})}}stopAd(e){super.stopAd(e),this.zy?this.zy.stopAd(e):Object(g.a)({message:"stopAd",exception:e,level:f.ProtoLoggingLevelEnum.WARNING})}resizeAd(e,t,i){try{this.zy.resizeAd(e,t,i)}catch(e){this.Nm("VastBidAdaptor","resizeAd",e)}}pauseAd(){try{this.zy.pauseAd()}catch(e){this.Nm("VastBidAdaptor","pauseAd",e)}}resumeAd(){try{this.zy.resumeAd()}catch(e){this.Nm("VastBidAdaptor","resumeAd",e)}}expandAd(){try{this.zy.expandAd()}catch(e){this.Nm("VastBidAdaptor","expandAd",e)}}collapseAd(){try{this.zy.collapseAd()}catch(e){this.Nm("VastBidAdaptor","collapseAd",e)}}skipAd(){try{super.skipAd(),this.zy.skipAd()}catch(e){this.Nm("VastBidAdaptor","skipAd",e)}}getAdRemainingTime(){try{return this.zy.getAdRemainingTime()}catch(e){return this.Nm("VastBidAdaptor","getAdRemainingTime",e),0}}getAdDuration(){try{return this.zy&&this.zy.getAdDuration()||Math.round(this.settings.vastResponse.duration/B.f)}catch(e){return this.Nm("VastBidAdaptor","getAdDuration",e),0}}getAdVolume(){try{return this.zy.getAdVolume()}catch(e){return this.Nm("VastBidAdaptor","getAdVolume",e),0}}getAdMediaSize(){let e=0,t=0;return t=this.zy instanceof Gs?(e=this.zy.getAdMediaWidth(),this.zy.getAdMediaHeight()):(e=this.Hy.width,this.Hy.height),{width:e,height:t}}setAdVolume(e){try{super.setAdVolume(e),this.zy.setAdVolume(e)}catch(e){this.Nm("VastBidAdaptor","setAdVolume",e)}}get adVideoUrl(){var e;return null===(e=this.Hy)||void 0===e?void 0:e.src}get declaredDurationInSeconds(){return this.settings.vastResponse.duration/B.f}Bm(e){e=super.Bm(e);return this.Jy(e)}Rm(e){e=super.Rm(e);return this.Jy(e)}Ac(){var e;if(!this.settings.loopAdWhenFinished)try{super.Ac(),je(this.Ny),null===(e=this.zy)||void 0===e||e.destroy()}catch(e){this.Nm("VastBidAdaptor","_destroy",e)}}Jy(e){var t;return e.payload.adSourceData.name=null===(t=this.settings.vastResponse)||void 0===t?void 0:t.adTitle,e.payload.clickThroughUrl=this.Wy||this.settings.vastResponse.clickThrough,e}Qy(e,t){return e.filter(e=>e.getMediaFileType()===Ss.d.Video&&t.canPlayType(e.type))}qy(e,t){const i=this.Qy(this.settings.vastResponse.mediaFiles,t),s=i.filter(e=>"video/mp4"===e.type);if(s.length)return js(s,e);if(i.length)return js(i,e);t=this.settings.vastResponse.mediaFiles.filter(e=>e.getMediaFileType()===Ss.d.Javascript);return t.length?js(t,e):null}Gy(e){this.tm.next({type:v.b.AdError,payload:{errorMessage:Ss.c.AdaptorInitAdError+`_${e.message}`}})}}function Xs(e){return/^\s*$/.test(e)?null:/^(?:true|false)$/i.test(e)?"true"===e.toLowerCase():isFinite(e)?parseFloat(e):isFinite(Date.parse(e))?new Date(e):"string"==typeof e?e.trim():e}(t=qs=qs||{}).JXONTree=function r(n){let t=0,o="";if(this.keyAttributes||(this.keyAttributes={}),n.hasChildNodes()){for(let e,t,i,s=0;s<n.childNodes.length;s++)((e=n.childNodes.item(s)).nodeType-1|1)===Node.TEXT_NODE?o+=e.nodeType===Node.TEXT_NODE?e.nodeValue.trim():e.nodeValue:1!==e.nodeType||e.prefix||(t=e.nodeName.toLowerCase(),i=new r(e),this.hasOwnProperty(t)?(this[t].constructor!==Array&&(this[t]=[this[t]]),this[t].push(i)):this[t]=i);this.keyValue=o?Xs(o):null}if(void 0===n.hasAttributes?0<n.attributes.length:n.hasAttributes()){let e;for(;t<n.attributes.length;t++)e=n.attributes.item(t),this.keyAttributes[e.name.toLowerCase()]=Xs(e.value.trim())}},t.getKeyValue=function(e){if(e&&e.keyValue)return e.keyValue},t.decodeXMLText=function(e){if("string"==typeof e)return e.replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&")};class Zs{constructor(e){this.Xy=["text/javascript","text/javascript1.0","text/javascript1.2","text/javascript1.4","text/jscript","application/javascript","application/x-javascript","text/ecmascript","text/ecmascript1.0","text/ecmascript1.2","text/ecmascript1.4","text/livescript","application/ecmascript","application/x-ecmascript"],this.Yy="VPAID",this.delivery=void 0,this.type=void 0,this.width=0,this.height=0,this.codec=void 0,this.id=void 0,this.bitrate=void 0,this.minBitrate=void 0,this.maxBitrate=void 0,this.scalable=void 0,this.maintainAspectRatio=void 0,this.apiFramework=void 0,this.src=void 0,this.delivery=e.keyAttributes.delivery,this.type=e.keyAttributes.type,this.width=e.keyAttributes.width,this.height=e.keyAttributes.height,this.codec=e.keyAttributes.codec,this.id=e.keyAttributes.id,this.bitrate=e.keyAttributes.bitrate,this.minBitrate=e.keyAttributes.minbitrate,this.maxBitrate=e.keyAttributes.maxbitrate,this.scalable=e.keyAttributes.scalable,this.maintainAspectRatio=e.keyAttributes.maintainaspectratio,this.apiFramework=e.keyAttributes.apiframework,this.src=qs.getKeyValue(e)}isSupported(){return!("application/x-shockwave-flash"===this.type||"video/x-flv"===this.type)}getMediaFileType(){return this.apiFramework===this.Yy||Object(p.g)(this.type,this.Xy)?Ss.d.Javascript:Ss.d.Video}}class er{constructor(e,t){this.name=e.keyAttributes.event,this.uri=qs.getKeyValue(e),"progress"===this.name&&(this.offset=Object(jt.d)(e.keyAttributes.offset,t))}}class tr{constructor(e){this.clickThrough=void 0,this.clickTrackings=[],this.customClicks=[],this.clickThrough=qs.getKeyValue(e.clickthrough),this.clickTrackings=this.Ky(Object(p.m)(e.clicktracking)),this.customClicks=this.Ky(Object(p.m)(e.customclick))}Ky(e){const t=[];return void 0!==e[0]&&e.forEach(e=>{t.push(qs.getKeyValue(e))}),t}}class ir{constructor(e){this.duration=void 0,this.mediaFiles=[],this.trackingEvents=[],this.skipoffset=void 0,this.videoClicks=void 0,this.duration=Object(jt.a)(qs.getKeyValue(e.duration)),this.skipoffset=Object(jt.d)(e.keyAttributes.skipoffset,this.duration),e.mediafiles&&(this.mediaFiles=this.Zy(Object(p.m)(e.mediafiles.mediafile))),e.trackingevents&&(this.trackingEvents=this.tw(Object(p.m)(e.trackingevents.tracking))),e.videoclicks&&(this.videoClicks=new tr(e.videoclicks)),e.adparameters&&(this.adParameters=qs.getKeyValue(e.adparameters),e.adparameters["@xmlEncoded"]&&(this.adParameters=qs.decodeXMLText(this.adParameters)))}tw(e){const t=[];return void 0!==e[0]&&e.forEach(e=>{t.push(new er(e,this.duration))}),t}Zy(e){const i=[];return void 0!==e[0]&&e.forEach(e=>{const t=new Zs(e);t.isSupported()&&i.push(t)}),i}isSupported(){return!0}}class sr{constructor(e){this.id=void 0,this.sequence=void 0,this.adId=void 0,this.linear=void 0,this.id=e.keyAttributes.id,this.sequence=e.keyAttributes.sequence,this.adId=e.keyAttributes.adid,e.linear&&(this.linear=new ir(e.linear))}isSupported(){return!0}}function rr(e){const t=[];return void 0!==e[0]&&e.forEach(e=>{t.push(qs.getKeyValue(e))}),t}(t=Ws=Ws||{}).parseImpressions=rr,t.parseCretives=function(e){const t=[];return e.forEach(e=>{t.push(new sr(e))}),t},t.parseErrors=rr;class nr{constructor(e){this.description=void 0,this.advertiser=void 0,this.surveys=void 0,this.errors=void 0,this.pricing=void 0,this.extensions=void 0,this.adTitle=qs.getKeyValue(e.adtitle),this.adSystem=qs.getKeyValue(e.adsystem),this.impressions=Ws.parseImpressions(Object(p.m)(e.impression)),this.creatives=Ws.parseCretives(Object(p.m)(e.creatives.creative)),this.description=qs.getKeyValue(e.description),this.advertiser=qs.getKeyValue(e.advertiser),this.surveys=qs.getKeyValue(e.survey),this.errors=Ws.parseErrors(Object(p.m)(e.error)),this.pricing=qs.getKeyValue(e.pricing),this.extensions=qs.getKeyValue(e.extensions)}isSupported(){return!0}}class or{constructor(e){this.adSystem=void 0,this.impressions=[],this.VASTAdTagURI=void 0,this.creatives=[],this.errors=void 0,this.extensions=void 0,this.fallowAdditionalWrappers=void 0,this.allowMultipleAds=void 0,this.fallbackOnNoAd=void 0,this.adSystem=qs.getKeyValue(e.adSystem),this.impressions=Ws.parseImpressions(Object(p.m)(e.impression)),this.VASTAdTagURI=qs.getKeyValue(e.vastadtaguri),this.creatives=e.creatives.creative?Ws.parseCretives(Object(p.m)(e.creatives.creative)):[],this.errors=Ws.parseErrors(Object(p.m)(e.error)),this.extensions=e.extensions,this.fallowAdditionalWrappers=!e.keyAttributes.followadditionalwrappers||e.keyAttributes.followadditionalwrappers,this.allowMultipleAds=e.keyAttributes.allowmultipleads,this.fallbackOnNoAd=e.keyAttributes.fallbackonnoad}}class ar{constructor(e){Array.isArray(e)?this.iw(e):this.ew(e)}isSupported(){return!0}ew(e){this.id=e.keyAttributes.id,this.sequence=e.keyAttributes.sequence,e.inline?this.inLine=new nr(e.inline):e.wrapper&&(this.wrapper=new or(e.wrapper))}iw(e){e=e.filter(e=>{e=this.sw(e).filter(e=>e.linear);return!!Object(p.h)(e)});Object(p.h)(e)&&this.ew(e[0])}sw(e){return e.inline?Object(p.m)(e.inline.creatives.creative):e.wrapper?Object(p.m)(e.wrapper.creatives.creative):[]}}class lr{constructor(e=2){this.nw=e}parseVastXml(e){try{if(!this.rw(e))return{error:!0,errorReason:Qi.XmlInvalidString};var t=(new DOMParser).parseFromString(e,"application/xml"),i=new qs.JXONTree(t.documentElement);if(!this.hw(i,this.nw))return{error:!0,errorReason:Qi.XmlInvalidTree};var s=new ar(i.ad);return this.aw(s)?{error:!1,result:s}:{error:!0,errorReason:Qi.XmlInvalidAd}}catch(e){return{error:!0,errorReason:Qi.XmlParseGeneral}}}rw(e){return Object(A.h)(e)}hw(e,t){if(!e.ad)return!1;e=parseInt(e.keyAttributes.version,10);return!(e&&e<t)}aw(e){var t=e.wrapper,e=e.inLine;return!(!e&&!t)&&(!(t&&!t.VASTAdTagURI)&&!(!t&&![...e.creatives].filter(e=>{return null===(e=null===e||void 0===e?void 0:e.linear)||void 0===e?void 0:e.mediaFiles.length}).length))}}class cr{constructor(e){this.mediaFiles=[],this.adTitle=void 0,this.adParameters=void 0,this.clickThrough=void 0,this.creativeId=void 0,e.forEach(e=>{e.inLine?(this.adTitle=e.inLine.adTitle,this.Jv(e.inLine.creatives)):e.wrapper&&this.Jv(e.wrapper.creatives)})}Qv(e){this.duration=e.duration,this.ow(e.mediaFiles),this.cw(e.skipoffset),this.uw(e.adParameters),e.videoClicks&&e.videoClicks.clickThrough&&this.iy(e.videoClicks.clickThrough)}uw(e){this.adParameters=e}cw(e){this.skipoffset=e}ow(e){this.mediaFiles=[...this.mediaFiles,...e]}iy(e){this.clickThrough=e}Jv(e){e.forEach(e=>{e.linear&&(this.creativeId=e.id,this.Qv(e.linear))})}}class dr{constructor(e){this.settings=e,this.metrics={created:(new Date).getTime()},this.settings.vastAdsChain||(this.settings.vastAdsChain=[]),void 0===this.settings.maxWrapperLimit&&(this.settings.maxWrapperLimit=10)}fetchBid(){return this.metrics.fetchStart=(new Date).getTime(),this.lw(this.settings.xml).then(e=>(this.metrics.fetchEnd=(new Date).getTime(),e)).catch(e=>{throw this.metrics.fetchEnd=(new Date).getTime(),e})}lw(s){return new Promise((e,t)=>{var i=new lr(2).parseVastXml(s);!0!==i.error?(this.dw(i.result),e(this.fw(i.result))):t(i.errorReason)})}fw(i){return new Promise((e,t)=>{i.wrapper?(this.settings.maxWrapperLimit<=0&&t(Qi.XmlAdaptorWrapperLimit),t=this.settings.maxWrapperLimit-1,e(new gr({id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackersInformation:this.settings.trackersInformation,maxWrapperLimit:t,url:i.wrapper.VASTAdTagURI,replaceTrackingMacros:!1,requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,adMacroReplacer:this.settings.adMacroReplacer,adContainer:this.settings.adContainer,globalDomUtilsService:this.settings.globalDomUtilsService,viewabilityService:this.settings.viewabilityService,trackingService:this.settings.trackingService,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,requestWithCredentials:this.settings.requestWithCredentials,successRate:this.settings.successRate,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,creativeId:this.settings.creativeId,bidSlotId:this.settings.bidSlotId,loopAdWhenFinished:this.settings.loopAdWhenFinished,pageUrl:this.settings.pageUrl}).fetchBid())):e(new Ys({id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackers:this.settings.trackersInformation,vastResponse:new cr(this.settings.vastAdsChain),requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,adContainer:this.settings.adContainer,globalDomUtilsService:this.settings.globalDomUtilsService,trackingService:this.settings.trackingService,viewabilityService:this.settings.viewabilityService,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,successRate:this.settings.successRate,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,externalCreativeId:this.settings.creativeId,bidSlotId:this.settings.bidSlotId,loopAdWhenFinished:this.settings.loopAdWhenFinished}))})}dw(e){!function(e,t){e=new ds(e);t.adError.push(...ms(e.errorUrls)),t.adImpression.push(...ms(e.impressions)),t.adClick.push(...ms(e.clickTrackings)),t.adMute.push(...ms(e.trackingEvents.mute)),t.adPause.push(...ms(e.trackingEvents.pause)),t.adQuartileFirst.push(...ms(e.trackingEvents.firstQuartile)),t.adQuartileSecond.push(...ms(e.trackingEvents.midpoint)),t.adQuartileThird.push(...ms(e.trackingEvents.thirdQuartile)),t.adQuartileFourth.push(...ms(e.trackingEvents.complete)),t.adResume.push(...ms(e.trackingEvents.resume)),t.adSkip.push(...ms(e.trackingEvents.skip)),t.adStarted.push(...ms(e.trackingEvents.creativeView)),t.adVideoStart.push(...ms([...e.trackingEvents.start])),t.adUnmute.push(...t.adUnmute,...ms(e.trackingEvents.unmute)),t.adUserAcceptInvitation.push(...ms([...e.trackingEvents.acceptInvitation,...e.trackingEvents.acceptInvitationLinear])),t.adUserClose.push(...ms(e.trackingEvents.close)),t.adUserMinimize.push(...t.adUserMinimize,...ms([...e.trackingEvents.collapse,...e.trackingEvents.playerCollapse,...e.trackingEvents.adCollapse]))}(e,this.settings.trackersInformation),this.settings.vastAdsChain.push(e)}}var hr,ur=i(25);(t=hr=hr||{})[t.None=0]="None",t[t.Ima=1]="Ima";const pr={[hr.Ima]:".g.doubleclick.net"};class gr{constructor(e){this.settings=e,void 0===this.settings.requestWithCredentials&&(this.settings.requestWithCredentials=!0),this.metrics={created:(new Date).getTime()}}fetchBid(){return this.metrics.fetchStart=(new Date).getTime(),this.pw(this.settings.url).then(e=>e.fetchBid()).then(e=>(this.metrics.fetchEnd=(new Date).getTime(),e)).catch(e=>{throw this.metrics.fetchEnd=(new Date).getTime(),e})}vw(t){let i=hr.None;return Object.keys(pr).forEach(e=>{-1!==t.indexOf(pr[e])&&(i=parseInt(e,10))}),i}pw(e){var t=this.mw(e);switch(this.vw(e)){case hr.None:return this.gw(t);case hr.Ima:return this.yw(t);default:return Promise.reject(Qi.HandlingSdkUrl)}}yw(e){return Promise.resolve(new Bs({url:e,id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackersInformation:this.settings.trackersInformation,replaceTrackingMacros:!1,requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,adContainer:this.settings.adContainer,globalDomUtilsService:this.settings.globalDomUtilsService,viewabilityService:this.settings.viewabilityService,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,successRate:this.settings.successRate,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,creativeId:this.settings.creativeId,bidSlotId:this.settings.bidSlotId,pageUrl:this.settings.pageUrl}))}gw(e){return ur.a.fetchXMLRequest(e,this.settings.requestWithCredentials).catch(e=>Promise.reject(Qi.NetworkRequestUrl)).then(e=>new dr({id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackersInformation:this.settings.trackersInformation,vastAdsChain:this.settings.vastAdsChain,xml:e,replaceTrackingMacros:!1,requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,adMacroReplacer:this.settings.adMacroReplacer,adContainer:this.settings.adContainer,globalDomUtilsService:this.settings.globalDomUtilsService,viewabilityService:this.settings.viewabilityService,trackingService:this.settings.trackingService,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,requestWithCredentials:this.settings.requestWithCredentials,successRate:this.settings.successRate,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,creativeId:this.settings.creativeId,bidSlotId:this.settings.bidSlotId,loopAdWhenFinished:this.settings.loopAdWhenFinished,pageUrl:this.settings.pageUrl}))}mw(e){var{width:t,height:i}=this.settings.callingState.adContainerState.get(this.settings.adManagerLineItem.protoLineItem.adType),i={adHeight:i,adWidth:t,adPostion:this.settings.callingState.adBreakState.adBreakType},t={mediaDescription:this.settings.callingState.media.mediaDescription,mediaDuration:this.settings.callingState.media.mediaDuration,mediaId:this.settings.callingState.media.mediaId,mediaTitle:this.settings.callingState.media.mediaTitle,mediaUrl:this.settings.callingState.media.mediaUrl};return this.settings.adMacroReplacer.replace(e,this.settings.adManagerLineItem.protoLineItem.vendorId,{adMacros:i,mediaMacros:t})}}class mr{constructor(e={}){this.data=e,Object(A.h)(this.data.cnxBidId)||(this.data.cnxBidId=Object(Je.c)())}}var fr=i(34);function yr(e,t){return e.find(e=>e.adManagerLineItem.protoLineItem.advertiserLineItemId===t).adManagerLineItem}function br(e){const t=[];return e.callers.forEach(e=>{e=e.settings.requestMetadata.data.requestedFloorPriceIndex;void 0===e||Object(p.g)(e,t)||t.push(e)}),e.bids.forEach(e=>{e=e.settings.requestMetadata.data.requestedFloorPriceIndex;void 0===e||Object(p.g)(e,t)||t.push(e)}),t}function vr(e){return[f.ProtoCreativeTypeEnum.Tam,f.ProtoCreativeTypeEnum.TamDeal,f.ProtoCreativeTypeEnum.Rtb,f.ProtoCreativeTypeEnum.HeaderBidder].includes(e)}class Pr{constructor(e,t,i,s,r){this.ww=e,this.xw=t,this.Sy=i,this.Os=s,this.co=r,this.Sw="div-cnx-display",this.Ow=new Ce,this.dg=new Ce}get onDisplayAd(){return this.Ow.asObservable()}get onError(){return this.dg.asObservable()}initializeAd(t,i){try{this.om=t,this.ky=new Js(this.Os,this.co);let e="";this.ww===Ss.b.Html&&(e=this.xw);var s=this.kw(this.om,i);this.ky.loadIframe({customHead:"<style>html, body {position:relative;width:100%;height:100%}#"+this.Sw+"{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}#"+this.Sw+"{border:3px solid white}#"+this.Sw+" iframe{display:block}</style>",customHtml:'<div id="'+this.Sw+'">'+e+"</div>",container:s,customReportingLog:{heavyAdBlockTypeEnum:f.ProtoHeavyAdBlockTypeEnum.OverlayIframe,advertiserLineItemId:this.Sy}}).then(e=>{this._w=e.iframe;const t=this._w.contentWindow;if(this.jw=t.document.getElementById(this.Sw),this.ww===Ss.b.Javascript&&Object(S.z)(this.jw,t,this.xw),""===this._w.contentWindow.document.head.innerHTML){const e="html, body {position:relative;width:100%;height:100%;margin:0;border:0}";this.Aw("html, body {position:relative;width:100%;height:100%;margin:0;border:0}")}Object(S.H)(this._w.contentWindow,"AdHtmlWrapper"),this.Ow.next()}).catch(e=>{this.dg.next(Ss.c.DisplayIntegratorIframeLoad)})}catch(t){this.dg.next(Ss.c.WrapperInitAdError)}}getAdMediaWidth(){return this.jw.clientWidth}getAdMediaHeight(){return this.jw.clientHeight}destroy(){this._w&&this.om&&Object(S.M)(this._w),this.ky&&(this.ky.destroy(),this.ky=null)}kw(e,t){if(!t.width||!t.height)return e;t=this.Os.createElementByString(`<div class="cnx-iframe-container" style="width: ${t.width}px; height: ${t.height}px"></div>`);return this.om.appendChild(t),t}Aw(e){const t=this._w.contentWindow.document.createElement("style"),i=this._w.contentWindow.document.createTextNode(e);t.appendChild(i),this._w.contentWindow.document.head.appendChild(t)}}const Sr={[M.FirstQuartile]:v.b.AdVideoFirstQuartile,[M.SecondQuartile]:v.b.AdVideoMidpoint,[M.ThirdQuartile]:v.b.AdVideoThirdQuartile,[M.FourthQuartile]:v.b.AdVideoComplete};class Ir extends ks{constructor(e){super(e),this.settings=e,this.adMediaType="displayHtml",this.adSourceType=f.ProtoAdsourceTypeEnum.Unknown,this.Iw="html",this.ou=500,this.cu=1,this.Cw=[];e=this.settings.adManagerLineItem.protoLineItem.overlayTime*B.f;this.Tw=new Be(e,this.ou,this.cu),this.Cw.push(this.Tw.onTimeUpdate.subscribe(()=>{this.ym({type:v.b.AdRemainingTimeChange})}),this.Tw.onTimeElapsed.subscribe(()=>{this.stopAd("htmlTimerElapsed")}),this.Tw.onQuartile.subscribe(e=>{this.ym({type:Sr[e],payload:{}})}))}get adVideoUrl(){return this.Iw}get declaredDurationInSeconds(){return this.settings.adManagerLineItem.protoLineItem.overlayTime}initAd(e,t,i,s,r,n,o){try{super.initAd(e,t,i,s,r,n,o),this.Qu=e,this.Xu=t,this.ym({type:v.b.AdLoaded,payload:{}})}catch(e){this.ym({type:v.b.AdError,payload:{errorMessage:Ss.c.AdaptorInitAdError+`_${e.message}`}})}}startAd(){try{super.startAd(),this.Tw.start(),this.Pw=new Pr(this.settings.mime,this.settings.html,this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,this.settings.globalDomUtilsService,this.settings.trackingService),this.Cw.push(this.Pw.onDisplayAd.subscribe(()=>{this.ym({type:v.b.AdStarted}),this.ym({type:v.b.AdVideoStart}),this.ym({type:v.b.AdImpression,payload:{}})}),this.Pw.onError.subscribe(e=>{this.ym({type:v.b.AdError,payload:{errorMessage:e}}),this.Tw.stop()})),this.Pw.initializeAd(this.om,{width:this.Qu,height:this.Xu})}catch(e){this.ym({type:v.b.AdError,payload:{errorMessage:Ss.c.AdaptorStartAdError+`_${e.message}`}})}}stopAd(e){try{super.stopAd(e),this.Tw.stop(),this.ym({type:v.b.AdStopped,payload:{shouldTrackPostBid:!0}})}catch(e){this.Nm("HtmlBidAdaptor","stopAd",e)}}skipAd(){try{super.skipAd(),this.ym({type:v.b.AdSkipped})}catch(e){this.Nm("HtmlBidAdaptor","skipAd",e)}}pauseAd(){try{this.Tw.stop(),this.ym({type:v.b.AdPaused})}catch(e){this.Nm("HtmlBidAdaptor","pauseAd",e)}}resumeAd(){try{this.Tw.start(),this.ym({type:v.b.AdPlaying})}catch(e){this.Nm("HtmlBidAdaptor","resumeAd",e)}}collapseAd(){}expandAd(){}getAdDuration(){return this.Tw.timerDuration/B.f}getAdRemainingTime(){return this.Tw.timeRemaining/B.f}getAdVolume(){return 0}getAdMediaSize(){return{width:this.Pw.getAdMediaWidth(),height:this.Pw.getAdMediaHeight()}}setAdVolume(e){}resizeAd(e,t,i){this.Qu=e,this.Xu=t}Ac(){var e;try{super.Ac(),this.Tw.stop(),je(this.Cw),null===(e=this.Pw)||void 0===e||e.destroy()}catch(e){this.Nm("HtmlBidAdaptor","_destroy",e)}}}class Tr{constructor(e){this.settings=e,this.metrics={created:(new Date).getTime()}}fetchBid(){if(this.metrics.fetchStart=(new Date).getTime(),!this.Mw(this.settings.mime))return Promise.reject(Qi.HTMLUnknownMimeType);var e=new Ir({id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackers:this.settings.trackersInformation,html:this.settings.html,mime:this.settings.mime,minDimensions:this.settings.dimensions,requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,globalDomUtilsService:this.settings.globalDomUtilsService,trackingService:this.settings.trackingService,viewabilityService:this.settings.viewabilityService,adContainer:this.settings.adContainer,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,successRate:this.settings.successRate,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,externalCreativeId:this.settings.creativeId,bidSlotId:this.settings.bidSlotId});return this.metrics.fetchEnd=(new Date).getTime(),Promise.resolve(e)}Mw(t){return Object.keys(Ss.b).some(e=>Ss.b[e]===t)}}class Ar{constructor(e,t,i,s,r,n,o,a){this.Ew=e,this.Lw=t,this.Kb=i,this.Rw=s,this.Bw=r,this.Dw=n,this.Fw=o,this.$w=a,this.Uw=0,this.Vw=new Map}request(t){var{width:e,height:i}=t.callingState.adContainerState.get(f.ProtoAdType.Video),e=this.Nw(e,i),i=this.Hw(t);return!e||Object.keys(i.lineItems).length<=0?Promise.resolve({bids:[],noBids:[]}):this.qw(i).then(e=>this.zw(e,t)).catch(e=>(Object(g.a)({message:"RtbCallAggregator",exception:e.message,level:f.ProtoLoggingLevelEnum.FATAL,sendMaxLog:!0}),{bids:[],noBids:[]}))}destroy(){}zw(i,s){const r={bids:[],noBids:[]};return i.lineItemResponses.forEach(e=>{const t=yr(s.lineItemRequestDataList,e.id);Object(A.d)(e.cachedFloorPrice)&&this.Vw.set(e.id,e.cachedFloorPrice),e.bids.forEach(e=>{e=this.Ww(e,t,i,s.callingState);e&&r.bids.push(e)}),e.noBids.forEach(e=>{r.noBids.push(this.Gw(e,t,i))})}),r}Gw(e,t,i){return{lineItem:t,requestMetadata:new mr({requestedFloorPrice:e.requestedFloorPrice,requestedFloorPriceIndex:e.floorPriceFactorIndex,rtbRequestNumber:this.Uw,syncedUser:e.syncedUser,partnerCustomHeaders:e.partnerCustomHeaders,partnerReason:e.partnerReason,requestTrackingHandledByServer:!0}),reason:e.connatixReason}}Ww(e,t,i,s){var r=e,n=this.Jw(r,t),o=new mr({requestedFloorPrice:r.requestedFloorPrice,requestedFloorPriceIndex:r.floorPriceFactorIndex,syncedUser:r.syncedUser,rtbRequestNumber:this.Uw,encryptedPrice:r.encryptedPrice,dspId:r.dspId,rtbAdomain:r.adomain,rtbSeatId:r.seatId,rtbCampainId:r.campaignId,cnxBidId:r.cnxBidId,requestTrackingHandledByServer:!0,logAuctionInformation:r.logAuctionInformation}),a=Ds();switch(t.protoLineItem.adType){case f.ProtoAdType.Video:return new dr({id:Object(Je.c)(),adManagerLineItem:t,replaceTrackingMacros:!0,trackersInformation:n,xml:r.vastTag,bidSlotId:a,requestMetadata:o,callingState:s,adMacroReplacer:this.Rw,adContainer:this.Bw.get(t.protoLineItem.adType),globalDomUtilsService:this.Kb.services.GlobalDomUtilsService,viewabilityService:this.Kb.services.ViewabilityService,trackingService:this.Kb.services.TrackingService,obfuscatedPrice:r.gtkpbp,adEnforcer:this.Fw,creativeId:r.creativeId,successRate:r.successRate,os:this.Kb.config.os.os,adSlotContainerRecycler:this.$w,pageUrl:this.Kb.config.pageUrl});case f.ProtoAdType.Overlay:return new Tr({id:Object(Je.c)(),adManagerLineItem:t,dimensions:{width:r.width,height:r.height},html:r.vastTag,mime:r.mime,bidSlotId:a,replaceTrackingMacros:!0,requestMetadata:o,trackersInformation:n,callingState:s,adContainer:this.Bw.get(t.protoLineItem.adType),globalDomUtilsService:this.Kb.services.GlobalDomUtilsService,viewabilityService:this.Kb.services.ViewabilityService,trackingService:this.Kb.services.TrackingService,obfuscatedPrice:r.gtkpbp,adEnforcer:this.Fw,creativeId:r.creativeId,successRate:r.successRate,os:this.Kb.config.os.os,adSlotContainerRecycler:this.$w})}}Jw(e,t){const i=new us;ps(t.protoLineItem.trackers,i);t=[...e.billingNoticeUrlList,e.adQualityCheckUrl].filter(e=>Object(A.h)(e)).map(e=>gs(e));return i.adImpression.push(...t),Object(A.h)(e.winNoticeUrl)&&i.adWin.push(gs(e.winNoticeUrl)),i}Qw(e,t){if(e.protoLineItem.adType===f.ProtoAdType.Overlay){var i=t.adContainerState.get(f.ProtoAdType.Video),e=t.adContainerState.get(e.protoLineItem.adType);if(i.height!==e.height||i.width!==e.width)return{width:e.width,height:e.height}}return null}Xw(e,r){const n={};return e.filter(e=>this.Dw.shouldRequestLineItem(e.adManagerLineItem.protoLineItem.advertiserLineItemId)).forEach(e=>{var t=e.adManagerLineItem,i=this.Qw(t,r),s=this.Vw.get(t.protoLineItem.advertiserLineItemId);n[t.protoLineItem.advertiserLineItemId]={availableRequests:e.maxAvailableRequests,gdprConsent:this.Kb.services.UserManagerService.isConsent(t.protoLineItem.vendorId),cachedFloorPrice:s||void 0,ignoredFloorPriceFactorIndexes:br(t),publisherLineItemId:t.protoLineItem.publisherLineItemId,slotHeight:null===i||void 0===i?void 0:i.height,slotWidth:null===i||void 0===i?void 0:i.width}}),n}Hw(e){var{width:t,height:i,viewability:s}=e.callingState.adContainerState.get(f.ProtoAdType.Video);return{metadata:this.Kb.services.TrackingService.getMetadataModel(),gdprCompliant:this.Kb.services.UserManagerService.isGDPR(),gdprConsentData:this.Kb.services.UserManagerService.getConsentPayload(),soundOn:e.callingState.sound,videoHeight:i,videoWidth:t,testMode:"true"===Object(Ji.b)("cnxRtbTest",this.Kb.config.pageUrl),explorationMode:this.Kb.config.explorationMode,viewability:s,outstream:this.Ew,domainURL:this.Kb.config.domainURL,isClickToPlay:e.callingState.clickToPlay,appVersion:this.Kb.config.appVersion,deviceID:this.Kb.services.UserManagerService.getDeviceId(),isCcpaBlockingUserInfo:!this.Kb.services.UserManagerService.isSellUserAllowed(),usPrivacyString:this.Kb.services.UserManagerService.getUsPrivacyString(),adSkippability:this.Lw.adSkippability,skipAdAfter:this.Lw.skipAdAfter,gdprConsentMode:this.Kb.services.UserManagerService.gdprConsentMode,customMacros:this.Kb.services.MacrosService.getExtraMacros(),maxAdDuration:e.maxAdDuration,lineItems:this.Xw(e.lineItemRequestDataList,e.callingState),adsMustBeSkippableIfLongerThan:this.Lw.adsMustBeSkippableIfLongerThan}}qw(e){return this.Uw++,ur.a.sendProtoRequest({endpoint:it.a.endPoints.api.rtb,ProtoRequest:f.ProtoRtbRequest,ProtoResponse:f.ProtoRtbResponse,requestData:e,queryParams:{[fr.b]:Qt.a.version},logError:!1})}Nw(e,t){return 0!==e&&0!==t||(Object(g.a)({message:"AdManager_BidderCaller_dimensions",exception:`width:${e}_height:${t}_destroyed:${a.a.isPlayerDestroyed()}`,throttle:5,level:f.ProtoLoggingLevelEnum.FATAL,sendMaxLog:!0}),!1)}}var Or=i(23),t=i(39);const kr=[t.a.P1,t.a.P2,t.a.P4,t.a.P7,t.a.P8];class Cr{constructor(e){this.Wh=e}Yw(e,t){let i=[];switch(t){case Or.a.CmpApi:i=Xi;break;case Or.a.TcfApi:i=Zi}return Object(p.g)(e,i)}Kw(e){var t=this.Wh.getGdprConsentApiType();if(this.Yw(e,t))return!0;e=Yi[e]||"";return this.Wh.isConsent(e,kr)}Zw(e){return!!Object(p.g)(e,es)||!!this.Wh.isSellUserAllowed()}isBidderCallable(e){return this.Wh.isGDPR()?this.Kw(e):!this.Wh.isCcpaApplicable()||this.Zw(e)}}const wr=[...is],xr=[ss.VAST_2_WRAPPER,ss.VAST_2,ss.VAST_3,ss.VAST_3_WRAPPER],Er=[rs.VPAID_1,rs.VPAID_2],Lr={[Hn.Telaria]:(e,t)=>{const i=Object.assign({},e);return e.srcPageUrl||(i.srcPageUrl=t.pageUrl),i},[Hn.OneVideo]:(e,t)=>{Object(A.h)(e.pubId)||Object(g.a)({message:"AdManager_HeaderBidder_OneVideo_pubId_missing",level:f.ProtoLoggingLevelEnum.FATAL,throttle:2,sendMaxLog:!1});const i=Object.assign(Object.assign({},e),{pubId:e.pubId,video:{playerWidth:Math.floor(t.playerWidth),playerHeight:Math.floor(t.playerHeight),mimes:wr,protocols:xr,api:Er},site:{page:t.pageUrl}}),s=t.floorPrice;return Object(A.e)(s)&&(i.bidfloor=s),i},[Hn.IndexExchange]:(e,t)=>{var i=e.siteId;if(Object(A.h)(i)){const s=Object.keys(ss).map(e=>ss[e]),r={siteId:i,size:[Math.floor(t.playerWidth),Math.floor(t.playerHeight)],video:{mimes:is,minduration:0,maxduration:t.maxDuration,protocols:s}};Object(A.d)(e.minduration)&&(r.video.minduration=e.minduration),Object(A.d)(e.maxduration)&&e.maxduration<=t.maxDuration&&(r.video.maxduration=e.maxduration),Object(A.h)(e.id)&&(r.id=e.id);e=t.floorPrice;return Object(A.e)(e)&&(r.bidFloor=e,r.bidFloorCur="USD"),r}Object(g.a)({level:f.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_IX_adapter_missing_siteId",callStack:t.lineItemId})},[Hn.Rubicon]:(e,t)=>{const i=Object.assign({},e),s=t.floorPrice;return Object(A.e)(s)&&(i.floor=s),i},[Hn.RhythmOne]:(e,t)=>{const i=Object.assign({},e),s=t.floorPrice;return Object(A.e)(s)&&(i.floor=s),i},[Hn.Pubmatic]:(e,t)=>{const i=Object.assign({},e),s=t.floorPrice;return Object(A.e)(s)&&(i.kadfloor=String(s)),i},[Hn.SpotX]:(e,t)=>{const i=Object.assign({},e),s=t.floorPrice;return Object(A.e)(s)&&(i.price_floor=s),t.isOutstream&&(i.outstream_options={slot:t.bidSlotId}),i},[Hn.MediaNet]:(e,t)=>{const i=Object.assign({},e);Object(A.h)(i.cid)||Object(g.a)({level:f.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_MediaNet_adapter_missing_cid",callStack:t.lineItemId}),Object(A.h)(i.crid)||Object(g.a)({level:f.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_MediaNet_adapter_missing_crid",callStack:t.lineItemId});e=t.floorPrice;return Object(A.e)(e)&&(i.bidFloor=e),i.video={api:Object.keys(rs).map(e=>rs[e]),mimes:Object.keys(is).map(e=>is[e]),protocols:Object.keys(ss).map(e=>ss[e]),maxDuration:t.maxDuration,w:t.playerWidth,h:t.playerHeight},i},[Hn.Adman]:(e,t)=>{e=Object.assign({},e);return Object(A.h)(e.placementId)||Object(g.a)({level:f.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_Adman_adapter_missing_placementId",callStack:t.lineItemId}),e},[Hn.IronSource]:(e,t)=>{const i=Object.assign({},e);Object(A.h)(i.isOrg)||Object(g.a)({level:f.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_IronSource_adapter_missing_isOrg_string",callStack:t.lineItemId});var t=t["floorPrice"];return Object(A.e)(t)&&(i.floorPrice=t),i},[Hn.Undertone]:(e,t)=>{e=Object.assign({},e);return Object(A.h)(e.placementId)||Object(g.a)({level:f.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_Undertone_adapter_missing_placementId",callStack:t.lineItemId}),Object(A.d)(e.publisherId)||Object(g.a)({level:f.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_Undertone_adapter_missing_publisherId",callStack:t.lineItemId}),e},[Hn.SynacorMedia]:(e,t)=>{const i=Object.assign({},e);Object(A.h)(i.seatId)||Object(g.a)({level:f.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_SynacorMedia_adapter_missing_seatId",callStack:t.lineItemId}),Object(A.h)(i.tagId)||Object(g.a)({level:f.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_SynacorMedia_adapter_missing_tagId",callStack:t.lineItemId});e=t.floorPrice;return Object(A.e)(e)&&(i.bidfloor=e),i.video={api:Object.keys(rs).map(e=>rs[e]),mimes:Object.keys(is).map(e=>is[e]),protocols:Object.keys(ss).map(e=>ss[e]),maxduration:t.maxDuration},i},[Hn.AmxRTB]:(e,t)=>{const i=Object.assign({},e),s=t.floorPrice;return Object(A.e)(s)&&(i.floor=s),i},[Hn.Smaato]:(e,t)=>{e=Object.assign({},e);return Object(A.h)(e.publisherId)||Object(g.a)({level:f.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_Smaato_adapter_missing_publisherId",callStack:t.lineItemId}),Object(A.h)(e.adspaceId)||Object(g.a)({level:f.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_Smaato_adapter_missing_adspaceId",callStack:t.lineItemId}),e},[Hn.SmartAdServer]:(e,t)=>{const i=Object.assign({},e),s=t["floorPrice"];Object(A.e)(s)&&(i.bidfloor=s);e=Object.assign(Object.assign({},e.video),{protocol:ss.VAST_3_WRAPPER});return i.video=e,Object(A.e)(i.networkId)||Object(g.a)({level:f.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_SmartAdServer_adapter_missing_networkId_integer",callStack:t.lineItemId}),Object(A.e)(i.formatId)||Object(g.a)({level:f.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_SmartAdServer_adapter_missing_formatId_integer",callStack:t.lineItemId}),Object(A.e)(i.pageId)||Object(g.a)({level:f.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_SmartAdServer_adapter_missing_pageId_integer",callStack:t.lineItemId}),Object(A.e)(i.siteId)||Object(g.a)({level:f.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_SmartAdServer_adapter_missing_siteId_integer",callStack:t.lineItemId}),i}},Mr=(t,i)=>{try{var e=JSON.parse(t);return 1<e.length&&Object(g.a)({message:"AdManager_AdSourceWrappe_multiple_bidders",level:f.ProtoLoggingLevelEnum.WARNING,callStack:i,exception:t,throttle:1,sendMaxLog:!1}),e[0].bidder}catch(e){Object(g.a)({message:"AdManager_AdSourceWrapper_cannot_get_bidder",level:f.ProtoLoggingLevelEnum.WARNING,callStack:i,exception:t,throttle:2,sendMaxLog:!1})}};class Rr{constructor(e,t,i,s,r){this.tx=e,this.ze=t,this.Ew=i,this.ex=s,this.sx=r}requestHeaderBidder(s,r,n){return new Promise((t,i)=>{this.nx().then(()=>{var e=s.map(e=>this.hx(e,r,n).then(e=>e));Promise.all(e).then(e=>{t(e)})}).catch(e=>{i(f.ConnatixNoBidReasonEnum.NoBid)})})}hx(n,s,o){return new Promise(r=>{let e=[];const t=n.lineItem.floorPrices;if(Object(p.h)(t))e=this.ax(t,n.ignoredFloorPriceIndexes,n.availableRequests).map(e=>this.ox(n.lineItem,e.floorPrice,e.floorPriceIndex,s,o,t,n.maxAdDuration));else if(!Object(p.h)(n.ignoredFloorPriceIndexes)&&0<n.availableRequests){const r=0,i=this.ox(n.lineItem,n.lineItem.floorPrice,0,s,o,t,n.maxAdDuration);e.push(i)}Promise.all(e).then(e=>{const t=[],i=[],s=n.lineItem.advertiserLineItemId;e.forEach(e=>{(e.reason?i:t).push(e)}),r({bids:t,noBids:i,lineItemId:s})})})}ox(e,i,s,r,n,o,a){return new Promise(t=>{this.ux(e,i,s,r,n,o,a).then(e=>{t(e)}).catch(e=>{t(e)})})}nx(){return new Promise((e,t)=>{window.pbjs?(this.lx=window.pbjs,e()):Object(S.A)({src:"//cds.connatix.com/p/plugins/prebid4.36.0-2.js"},window.document.head,window,()=>{this.lx=window.pbjs,this.px(),e()},()=>{t(f.ConnatixNoBidReasonEnum.NoBid)},!0,"AdManager_HeaderBidder_unable_to_insert_prebidJs_script")})}px(){var e=((e,t,i,s)=>{const r={usePrebidCache:!0,cache:{url:ts},userSync:{iframeEnabled:!0,filterSettings:{iframe:{bidders:"*",filter:"include"}}},ix:{timeout:900}};return i&&(r.schain={validation:"strict",config:{ver:"1.0",complete:1,nodes:[{asi:(i=i).businessDomain,hp:1,sid:i.supplyChainId||null}]}}),(e||t)&&(r.consentManagement=e?{gdpr:{cmpApi:"iab",timeout:2e3,defaultGdprScope:!0,allowAuctionWithoutConsent:!1,rules:[{purpose:"storage",enforcePurpose:!0,enforceVendor:!0},{purpose:"basicAds",enforcePurpose:!0,enforceVendor:!0},{purpose:"measurement",enforcePurpose:!0,enforceVendor:!0}]}}:t?{usp:{cmpApi:"iab",timeout:2e3}}:{}),Object(A.h)(s)&&(r.pageUrl=s),r})(this.ex,this.sx,this.tx,this.ze);window.pbjs.setConfig(e)}ux(c,d,h,t,i,u,s){return new Promise((n,o)=>{const a=((e,t,i,s,r)=>{const n={code:Object(Je.c)(),mediaTypes:{video:{playerSize:[Math.floor(e),Math.floor(t)],context:i?"outstream":"instream",mimes:wr,protocols:xr,linearity:1,api:Er,frameworks:[rs.VPAID_1,rs.VPAID_2],maxduration:s,minDuration:0}},bids:[]};return Object(A.e)(r)&&(n.floors={currency:"USD",schema:{fields:["mediaType"]},values:{video:r}}),n})(t,i,this.Ew,s,d);try{const t=c.headerBidderBids;a.bids=JSON.parse(t)}catch(e){return Object(g.a)({message:"AdManager_HeaderBidder_unable_to_parse_header_bidder",exception:e.message,callStack:e.stack,level:f.ProtoLoggingLevelEnum.WARNING}),void o({reason:f.ConnatixNoBidReasonEnum.NoBid,floorPrice:d,floorPriceIndex:h})}const l=Ds();a.bids.forEach(e=>this.bx(e,t,i,d,c.advertiserLineItemId,s,l)),this.lx.que.push(()=>{this.lx.addAdUnits(a);var e={timeout:c.headerBidderTimeout,adUnits:[a],bidsBackHandler:()=>{try{var e;if(!(e=this.lx.getHighestCpmBids(a.code)[0]))return void o({reason:f.ConnatixNoBidReasonEnum.CsEmptyResponse,floorPrice:d,floorPriceIndex:h});if(!this.vx(e))return Object(g.a)({level:f.ProtoLoggingLevelEnum.WARNING,message:"AdManager_HeaderBidder_no_content",exception:JSON.stringify(e)}),void o({reason:f.ConnatixNoBidReasonEnum.CsInvalidResponse,floorPrice:d,floorPriceIndex:h});var t=this.mx(e),i=e.cpm||e.adResponse.ad.cpm,s=c["advertiserLineItemId"],r={adTag:t,lineItemId:s,floorPrice:d,floorPriceIndex:h,cpm:i,slotId:l};Object(A.e)(d)&&i<d&&Object(g.a)({message:"AdManager_HeaderBidderRequester_cpm_lower_than_floorprice",level:f.ProtoLoggingLevelEnum.WARNING,sendMaxLog:!1,throttle:5,exception:`floorPrices_${u}_index_${h}_cpm_${i}_li_${c.advertiserLineItemId}`,callStack:Mr(c.headerBidderBids,c.advertiserLineItemId)}),n(r)}catch(e){Object(g.a)({level:f.ProtoLoggingLevelEnum.WARNING,message:"AdManager_HeaderBidder_Prebidjs_error",exception:e.message,callStack:e.stack}),o({reason:f.ConnatixNoBidReasonEnum.NoBid,floorPrice:d,floorPriceIndex:h})}}};this.lx.requestBids(e)})})}bx(e,t,i,s,r,n,o){const a=Lr[e.bidder];a&&(e.params=a(e.params,{playerWidth:t,playerHeight:i,maxDuration:n,pageUrl:this.ze,floorPrice:s,lineItemId:r,isOutstream:this.Ew,bidSlotId:o}))}vx(e){return e.adserverTargeting&&Object(A.h)(e.adserverTargeting.hb_cache_id)}mx(e){return`${ts}?uuid=${e.adserverTargeting.hb_cache_id}`}ax(t,i,s){const r=[];let n=0;for(let e=0;e<t.length;e++)-1===i.indexOf(e)&&n<s&&(r.push({floorPrice:t[e],floorPriceIndex:e}),n++);return r}}class Br{constructor(e,t,i,s,r,n,o,a){this.Ew=e,this.tx=t,this.Kb=i,this.Rw=s,this.Bw=r,this.Fw=n,this.$w=o,this.Vg=a,this.gx=new Map,this.yx=new Rr(this.tx,this.Kb.config.pageUrl,this.Ew,this.Kb.services.UserManagerService.isGDPR(),this.Kb.services.UserManagerService.isCcpaApplicable()),this.wx=new Cr(this.Kb.services.UserManagerService)}request(t){var{width:e,height:i}=t.callingState.adContainerState.get(f.ProtoAdType.Video),e=this.Nw(e,i),i=this.xx(t.lineItemRequestDataList);return Object(p.h)(i)&&e?(t.lineItemRequestDataList=i,this.Sx(t).then(e=>Promise.resolve(this.Ox(e,t))).catch(()=>Promise.resolve({bids:[],noBids:[]}))):Promise.resolve({bids:[],noBids:[]})}destroy(){}Ox(e,r){const n={bids:[],noBids:[]};return e.forEach(e=>{const s=yr(r.lineItemRequestDataList,e.lineItemId);e.bids.forEach(e=>{var t=new us,i=new mr({requestedFloorPrice:e.floorPrice,requestedFloorPriceIndex:e.floorPriceIndex,prebidJsBidderName:this.kx(s)});ps(s.protoLineItem.trackers,t),n.bids.push(new gr({id:Object(Je.c)(),adManagerLineItem:s,replaceTrackingMacros:!0,requestMetadata:i,trackersInformation:t,url:e.adTag,callingState:r.callingState,adMacroReplacer:this.Rw,adContainer:this.Bw.get(s.protoLineItem.adType),globalDomUtilsService:this.Kb.services.GlobalDomUtilsService,viewabilityService:this.Kb.services.ViewabilityService,trackingService:this.Kb.services.TrackingService,cpm:e.cpm,adEnforcer:this.Fw,os:this.Kb.config.os.os,adSlotContainerRecycler:this.$w,bidSlotId:e.slotId,loopAdWhenFinished:this.Vg,pageUrl:this.Kb.config.pageUrl}))}),e.noBids.forEach(e=>{var t=new mr({requestedFloorPrice:e.floorPrice,requestedFloorPriceIndex:e.floorPriceIndex});n.noBids.push({lineItem:s,requestMetadata:t,reason:e.reason})})}),n}Sx(t){var{width:e,height:i}=t.callingState.adContainerState.get(f.ProtoAdType.Video),s=t.lineItemRequestDataList.map(e=>this._x(e,t.maxAdDuration));return this.yx.requestHeaderBidder(s,e,i)}_x(e,t){var i=e.adManagerLineItem;return{availableRequests:e.maxAvailableRequests,lineItem:i.protoLineItem,ignoredFloorPriceIndexes:br(i),maxAdDuration:t}}xx(e){return e.filter(e=>{e=this.kx(e.adManagerLineItem);return this.jx(e)})}Nw(e,t){return 0!==e&&0!==t||(Object(g.a)({message:"AdManager_PrebidAggregator_dimensions",exception:`width:${e}_height:${t}_destroyed:${a.a.isPlayerDestroyed()}`,throttle:5,level:f.ProtoLoggingLevelEnum.FATAL,sendMaxLog:!0}),!1)}jx(e){return this.wx.isBidderCallable(e)}kx(e){var t=this.gx.get(e);return Object(A.h)(t)?t:Mr(e.protoLineItem.headerBidderBids,e.protoLineItem.advertiserLineItemId)||""}}const jr={libPropertyName:"apstag",mediaType:"video"},Dr="https://aax.amazon-adsystem.com/e/dtb/vast";class _r{constructor(e,t){this.Kb=e,this.Ax=t,this.Ix=()=>{this.Cx||this.Tx(),this.Px&&clearInterval(this.Px),this.Cx||Object(g.a)({message:"TamRequester_TAM_lib_not_found_on_page_loaded",level:f.ProtoLoggingLevelEnum.WARNING})};t=this.Kb.config.topWindow;this.Mx=Object(Je.f)(t).topFrame,this.Tx()}requestBids(e){e=e.map(e=>this.Ex(e));return Promise.all(e)}destroy(){this.Px&&clearInterval(this.Px),this.Mx.removeEventListener("load",this.Ix)}Ex(t){return this.Lx(this.Ax,jr.mediaType,t.amazonDealId).then(e=>t.amazonDealId?this.Rx(t,e):this.Bx(t,e)).then(e=>({bids:[e],lineItemId:t.advertiserLineItemId,noBids:[]})).catch(e=>({bids:[],lineItemId:t.advertiserLineItemId,noBids:[{reason:e}]}))}Lx(e,s,r){return new Promise((t,i)=>{this.Cx?this.Cx.fetchBids({slots:[{slotID:e,mediaType:s}]},e=>{Object(p.h)(e)?Object(A.h)(r)?t(this.Dx(e,r)):t(this.Fx(e)):i(f.ConnatixNoBidReasonEnum.EmptyResponse)}):i(f.ConnatixNoBidReasonEnum.NoLibInPage)})}Fx(s){return new Promise((e,t)=>{var i=this.$x(s);if(!Object(p.h)(i))return this.Ux(),void t(f.ConnatixNoBidReasonEnum.InvalidResponse);e(i[0])})}Dx(s,r){return new Promise((e,t)=>{var i=this.Vx(s);if(!Object(p.h)(i))return this.Ux(),void t(f.ConnatixNoBidReasonEnum.InvalidResponse);i=s.find(e=>e.targeting.amzndeals.includes(r));i?e(i):t(f.ConnatixNoBidReasonEnum.DealIdMismatch)})}$x(e){return e.filter(e=>{return!!(e.amznbid||null!==(e=e.targeting)&&void 0!==e&&e.amzniid)})}Vx(e){return e.filter(e=>{return Object(p.h)(null===(e=e.targeting)||void 0===e?void 0:e.amzndeals)})}Ux(){Object(g.a)({message:"TamRequester_FetchBids_CreativeType_Mismatch",throttle:1,level:f.ProtoLoggingLevelEnum.FATAL})}Bx(e,s){const r={lineItemId:e.advertiserLineItemId,code:s.amznbid||(null===(e=s.targeting)||void 0===e?void 0:e.amznbid),metadata:this.Kb.services.TrackingService.getMetadataModel(),exploration:this.Kb.config.explorationMode};return new Promise((t,i)=>{ur.a.sendProtoRequest({endpoint:it.a.endPoints.api.tam,ProtoRequest:f.ProtoCoreTamBidRequest,ProtoResponse:f.ProtoCoreTamBidResponse,requestData:r,queryParams:{[fr.b]:Qt.a.version},logError:!0}).then(e=>{Object(A.h)(e.errorMessage)?i(f.ConnatixNoBidReasonEnum.RequestException):e.encryptedBidPrice?t({encryptedPrice:e.encryptedBidPrice,vastTag:this.Nx(s),ofskp:e.ofskp,successRate:e.successRate,slotId:Ds()}):i(f.ConnatixNoBidReasonEnum.InvalidResponse)}).catch(()=>{i(f.ConnatixNoBidReasonEnum.RequestException)})})}Rx(e,t){return{encryptedPrice:null,vastTag:this.Hx(t),ofskp:e.floorPrice/2-41,successRate:e.successRate,slotId:Ds()}}Nx(e){var t=e.amzniid||(null===(t=e.targeting)||void 0===t?void 0:t.amzniid),i=e.amznbid||(null===(i=e.targeting)||void 0===i?void 0:i.amznbid);return`${Dr}?b=${t}&pp=${i}&rnd=${Object(Je.c)()}`}Hx(e){var t=e.helpers.targetingKeys[0];return`${Dr}?b=${e.targeting[t]}&rnd=${Object(Je.c)()}`}Tx(){this.Mx[jr.libPropertyName]?this.Cx=this.Mx[jr.libPropertyName]:this.Px||"complete"!==this.Mx.document.readyState&&(this.Mx.addEventListener("load",this.Ix),this.Px=setInterval(()=>{this.Tx()},B.f)),this.Cx&&clearInterval(this.Px)}}class Fr{constructor(e,t,i,s,r,n){this.Kb=e,this.qx=t,this.Rw=i,this.Bw=s,this.Fw=r,this.$w=n,this.zx=new _r(this.Kb,this.qx)}request(t){var{width:e,height:i}=t.callingState.adContainerState.get(f.ProtoAdType.Video);return this.Nw(e,i)?this.Wx(t).then(e=>Promise.resolve(this.Gx(e,t))).catch(()=>Promise.resolve({bids:[],noBids:[]})):Promise.resolve({bids:[],noBids:[]})}destroy(){this.zx.destroy()}Wx(e){e=e.lineItemRequestDataList.map(e=>e.adManagerLineItem.protoLineItem);return this.zx.requestBids(e)}Gx(e,r){const n={bids:[],noBids:[]};return e.forEach(e=>{const s=yr(r.lineItemRequestDataList,e.lineItemId);e.bids.forEach(e=>{var t=new us,i=new mr({encryptedPrice:e.encryptedPrice});ps(s.protoLineItem.trackers,t),n.bids.push(new gr({id:Object(Je.c)(),adManagerLineItem:s,replaceTrackingMacros:!0,requestMetadata:i,trackersInformation:t,url:e.vastTag,bidSlotId:e.slotId,callingState:r.callingState,adMacroReplacer:this.Rw,adContainer:this.Bw.get(s.protoLineItem.adType),globalDomUtilsService:this.Kb.services.GlobalDomUtilsService,viewabilityService:this.Kb.services.ViewabilityService,trackingService:this.Kb.services.TrackingService,adEnforcer:this.Fw,requestWithCredentials:!1,successRate:e.successRate,obfuscatedPrice:e.ofskp,os:this.Kb.config.os.os,adSlotContainerRecycler:this.$w,pageUrl:this.Kb.config.pageUrl}))}),e.noBids.forEach(e=>{n.noBids.push({lineItem:s,requestMetadata:new mr,reason:e.reason})})}),n}Nw(e,t){return 0!==e&&0!==t||(Object(g.a)({message:"AdManager_PrebidAggregator_dimensions",exception:`width:${e}_height:${t}_destroyed:${a.a.isPlayerDestroyed()}`,throttle:5,level:f.ProtoLoggingLevelEnum.FATAL,sendMaxLog:!0}),!1)}}const Ur=[[88,31],[120,20],[120,30],[120,60],[120,90],[125,125],[168,28],[168,42],[180,150],[200,200],[200,446],[216,36],[216,54],[220,90],[234,60],[240,133],[250,250],[250,360],[292,30],[300,31],[300,50],[300,75],[300,100],[300,250],[320,50],[320,100],[320,240],[336,280],[400,350],[468,60],[480,320]];class Nr{constructor(e,t,i){this.Jx=e,this.Qx=t,this.Xx=i,this.Sw=`div-gpt-ad-1589549806211-${Object(Je.c)()}`,this.Ow=new Ce,this.dg=new Ce,this.Qm=new Ce}get onCreativeReceived(){return this.Qm.asObservable()}get onDisplayAd(){return this.Ow.asObservable()}get onError(){return this.dg.asObservable()}getAdMediaHeight(){return this.Yx?this.Yx.clientHeight:0}getAdMediaWidth(){return this.Yx?this.Yx.clientWidth:0}initializeAd(e,t){try{this.Kx=e,this.Mm(e);const i=this.Zx(t.width,t.height);this.Jx.cmd.push(()=>{this.tS=this.Jx.defineSlot(this.Xx,i,this.Sw).addService(this.Jx.pubads()).setTargeting("domains",this.Qx),this.Jx.enableServices(),this.iS(this.tS),this.Jx.pubads().isInitialLoadDisabled()&&this.Jx.pubads().refresh([this.tS]),this.Jx.display(this.Sw)})}catch(e){this.dg.next(Ss.c.WrapperInitAdError)}}destroy(){this.Jx.cmd.push(()=>{this.Jx.destroySlots&&this.tS&&this.Jx.destroySlots([this.tS])})}iS(s){this.Jx.pubads().addEventListener("slotOnload",e=>{var t,i;if(e.slot===s){try{const s=null===(i=null===(t=null===e||void 0===e?void 0:e.slot)||void 0===t?void 0:t.getResponseInformation())||void 0===i?void 0:i.creativeId;s&&this.Qm.next(s.toString())}catch(e){Object(g.a)({message:"AdManager_GptWrapper_creativeId",level:f.ProtoLoggingLevelEnum.WARNING,exception:e.message,callStack:e.stack})}this.Ow.next()}}),this.Jx.pubads().addEventListener("slotRenderEnded",e=>{var t;if(e.slot===this.tS){try{this.Yx=null===(t=this.Kx)||void 0===t?void 0:t.getElementsByTagName("iframe")[0],Object(A.a)(this.tS)&&Object(S.H)(this.Yx.contentWindow,"GPTWrapper")}catch(e){}e.isEmpty&&this.dg.next(Ss.c.AdxOverlayNoFill)}})}Mm(e){e.id=this.Sw}Zx(t,i){return Ur.filter(e=>!Array.isArray(e)||!Object(p.i)(e)||Object(p.h)(e)&&e[0]<=t&&e[1]<=i)}}var Vr,Hr,qr,Wr=i(54);class $r extends ks{constructor(e){super(e),this.settings=e,this.adMediaType="displayAdx",this.adSourceType=f.ProtoAdsourceTypeEnum.Unknown,this.Iw="adx",this.eS={[M.FirstQuartile]:v.b.AdVideoFirstQuartile,[M.SecondQuartile]:v.b.AdVideoMidpoint,[M.ThirdQuartile]:v.b.AdVideoThirdQuartile,[M.FourthQuartile]:v.b.AdVideoComplete},this.sS=[];e=this.settings.adManagerLineItem.protoLineItem.overlayTime*B.f;this.Tw=new Be(e,500),this.sS.push(this.Tw.onTimeUpdate.subscribe(()=>{this.ym({type:v.b.AdRemainingTimeChange})}),this.Tw.onTimeElapsed.subscribe(()=>{this.stopAd("adxTimerElapsed")}),this.Tw.onQuartile.subscribe(e=>{this.ym({type:this.eS[e],payload:{}})}))}initAd(e,t,i,s,r,n,o){try{super.initAd(e,t,i,s,r,n,o),this.nS={width:e,height:t},this.rS().then(e=>{this.hS=new Nr(e,this.settings.domain,this.settings.adxAdUnitPath),this.sS.push(this.hS.onCreativeReceived.subscribe(e=>{this.creativeId=e})),this.ym({type:v.b.AdLoaded,payload:{skipOffset:0}})}).catch(e=>{this.ym({type:v.b.AdError,payload:{errorMessage:Ss.c.AdxOverlayGptScriptLoad+`_${e.message}`}})})}catch(e){this.ym({type:v.b.AdError,payload:{errorMessage:Ss.c.AdaptorInitAdError+`_${e.message}`}})}}startAd(){try{super.startAd(),this.sS.push(this.hS.onDisplayAd.subscribe(()=>{this.ym({type:v.b.AdStarted}),this.ym({type:v.b.AdVideoStart}),this.ym({type:v.b.AdImpression,payload:{}}),this.Tw.start()}),this.hS.onError.subscribe(e=>{this.ym({type:v.b.AdError,payload:{errorMessage:e}}),this.Tw.stop()})),this.hS.initializeAd(this.om,this.nS)}catch(e){this.ym({type:v.b.AdError,payload:{errorMessage:Ss.c.AdaptorStartAdError+`_${e.exception}`}})}}stopAd(e){try{super.stopAd(e),this.Tw.stop(),this.ym({type:v.b.AdStopped,payload:{shouldTrackPostBid:!0}})}catch(e){this.Nm("AdxBidAdaptor","stopAd",e)}}resizeAd(e,t,i){this.nS&&(this.nS.width=e,this.nS.height=t)}pauseAd(){try{this.Tw.stop(),this.ym({type:v.b.AdPaused})}catch(e){this.Nm("AdxBidAdaptor","pauseAd",e)}}resumeAd(){try{this.Tw.start(),this.ym({type:v.b.AdPlaying})}catch(e){this.Nm("AdxBidAdaptor","resumeAd",e)}}expandAd(){}collapseAd(){}skipAd(){try{super.skipAd(),this.ym({type:v.b.AdSkipped})}catch(e){this.Nm("AdxBidAdaptor","skipAd",e)}}getAdRemainingTime(){return this.Tw.timeRemaining/B.f}getAdDuration(){return this.Tw.timerDuration/B.f}getAdVolume(){return 0}getAdMediaSize(){return{width:this.hS.getAdMediaWidth(),height:this.hS.getAdMediaHeight()}}setAdVolume(e){}get adVideoUrl(){return this.Iw}get declaredDurationInSeconds(){return this.settings.adManagerLineItem.protoLineItem.duration}rS(){const i=Object(Je.f)(window).topFrame;return i.googletag?Promise.resolve(i.googletag):(i.googletag=window.googletag||{cmd:[]},new Promise((e,t)=>{Object(S.A)({src:Wr.a},i.document.head,i,()=>{e(i.googletag)},()=>{t()})}))}Ac(){var e;try{super.Ac(),this.Tw.stop(),je(this.sS),null===(e=this.hS)||void 0===e||e.destroy()}catch(e){this.Nm("AdxBidAdaptor","_destroy",e)}}}class Gr{constructor(e){this.settings=e,this.metrics={created:(new Date).getTime()}}fetchBid(){this.metrics.fetchStart=(new Date).getTime();var e=new $r({id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackers:this.settings.trackersInformation,adxAdUnitPath:this.aS(this.settings.url),requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,domain:this.settings.pageDomain,adContainer:this.settings.adContainer,globalDomUtilsService:this.settings.globalDomUtilsService,viewabilityService:this.settings.viewabilityService,cpm:this.settings.cpm,successRate:this.settings.successRate,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,bidSlotId:this.settings.bidSlotId});return this.metrics.fetchEnd=(new Date).getTime(),Promise.resolve(e)}aS(e){return e.substr("https://adx.connatix.com".length)}}class zr extends ks{constructor(e){super(e),this.settings=e,this.adMediaType="cnxMedia",this.adSourceType=f.ProtoAdsourceTypeEnum.CnxMedia,this.oS=[]}initAd(i,s,r,n,o,a,l){try{let e;super.initAd(i,s,r,n,o,a,l);let t=!1;if(Object(A.h)(this.settings.externalMediaFile))e=this.settings.externalMediaFile;else if(Object(A.h)(this.settings.externalHlsFile))e=this.settings.externalHlsFile,t=!0;else{if(!Object(p.h)(this.settings.renditions))return void this.ym({type:v.b.AdError,payload:{errorMessage:Ss.c.CnxMediaNoRenditions}});e=this.cS(this.settings.renditions,s,this.settings.mediaId)}this.uS=e,this.lS=new Gs(this.settings.globalDomUtilsService,this.uS,this.cm,this.settings.os,this.settings.clickUrl,this.settings.loopAdWhenFinished,this.settings.pauseAdWhenFinished,t,this.settings.inApp),this.oS.push(this.lS.onVpaidEvent.subscribe(e=>{this.ym(e)})),this.lS.initAd(i,s,r,n,o,{slot:this.om,videoSlot:this.cm})}catch(i){this.ym({type:v.b.AdError,payload:{errorMessage:Ss.c.AdaptorInitAdError+`_${i.message}`}})}}startAd(){try{super.startAd(),this.lS.startAd()}catch(e){this.ym({type:v.b.AdError,payload:{errorMessage:Ss.c.AdaptorStartAdError+`_${e.message}`}})}}stopAd(e){super.stopAd(e),this.lS?this.lS.stopAd(e):Object(g.a)({message:"stopAd",exception:e,level:f.ProtoLoggingLevelEnum.WARNING})}resizeAd(e,t,i){try{this.lS.resizeAd(e,t,i)}catch(e){this.Nm("CnxMediaBidAdaptor","resizeAd",e)}}pauseAd(){try{this.lS.pauseAd()}catch(e){this.Nm("CnxMediaBidAdaptor","pauseAd",e)}}resumeAd(){try{this.lS.resumeAd()}catch(e){this.Nm("CnxMediaBidAdaptor","resumeAd",e)}}expandAd(){try{this.lS.expandAd()}catch(e){this.Nm("CnxMediaBidAdaptor","expandAd",e)}}collapseAd(){try{this.lS.collapseAd()}catch(e){this.Nm("CnxMediaBidAdaptor","collapseAd",e)}}skipAd(){try{super.skipAd(),this.lS.skipAd()}catch(e){this.Nm("CnxMediaBidAdaptor","skipAd",e)}}getAdRemainingTime(){try{return this.lS.getAdRemainingTime()}catch(e){return this.Nm("CnxMediaBidAdaptor","getAdRemainingTime",e),0}}getAdDuration(){try{return this.lS?this.lS.getAdDuration():this.settings.adManagerLineItem.protoLineItem.duration}catch(e){return this.Nm("CnxMediaBidAdaptor","getAdDuration",e),0}}getAdVolume(){try{return this.lS.getAdVolume()}catch(e){return this.Nm("CnxMediaBidAdaptor","getAdVolume",e),0}}getAdMediaSize(){return{width:this.lS.getAdMediaWidth(),height:this.lS.getAdMediaHeight()}}setAdVolume(e){try{super.setAdVolume(e),this.lS.setAdVolume(e)}catch(e){this.Nm("CnxMediaBidAdaptor","setAdVolume",e)}}get adVideoUrl(){return this.uS}get declaredDurationInSeconds(){return this.settings.adManagerLineItem.protoLineItem.duration}Ac(){var e;if(!this.settings.pauseAdWhenFinished&&!this.settings.loopAdWhenFinished)try{super.Ac(),je(this.oS),null===(e=this.lS)||void 0===e||e.destroy()}catch(e){this.Nm("CnxMediaBidAdaptor","_destroy",e)}}cS(e,t,i){let s,r;return r=e.filter(e=>e.codec===Ve.H264),s=Object(Te.c)(t,r.map(e=>e.height)),0<(r=r.filter(e=>e.height===s)).length?`${it.a.endPoints.base.video}${i}/${r[0].file}`:null}}class Jr{constructor(e){this.settings=e,this.metrics={created:(new Date).getTime()}}fetchBid(){this.metrics.fetchStart=(new Date).getTime();var e=new zr({id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackers:this.settings.trackersInformation,mediaId:this.settings.mediaId,renditions:this.settings.renditions,clickUrl:this.settings.clickUrl,requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,globalDomUtilsService:this.settings.globalDomUtilsService,viewabilityService:this.settings.viewabilityService,adContainer:this.settings.adContainer,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,externalMediaFile:this.settings.adManagerLineItem.protoLineItem.externalMediaFile,externalHlsFile:this.settings.adManagerLineItem.protoLineItem.externalHlsFile,pauseAdWhenFinished:this.settings.pauseAdWhenFinished,loopAdWhenFinished:this.settings.loopAdWhenFinished,inApp:this.settings.inApp,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,bidSlotId:this.settings.bidSlotId});return this.metrics.fetchEnd=(new Date).getTime(),Promise.resolve(e)}}(Hn=Vr=Vr||{})[Hn.IDLE=0]="IDLE",Hn[Hn.RUNNING=1]="RUNNING",Hn[Hn.STOPPING=2]="STOPPING";class Kr{constructor(e){this.dS=e,this.Jt=Vr.IDLE,this.fS=Promise.resolve()}start(){this.Jt!==Vr.IDLE&&this.Jt!==Vr.STOPPING||(this.Jt=Vr.RUNNING,this.pS())}stop(){this.Jt=Vr.STOPPING}setPromiseNotifier(e){return this.bS=e,this}setIdleNotifier(e){return this.vS=e,this}getState(){return this.Jt}mS(){const e=this.dS();void 0!==e?this.fS=e.then(e=>{this.bS&&this.bS(e)}).then(()=>{this.Jt===Vr.STOPPING&&(this.Jt=Vr.IDLE)}):this.Jt=Vr.IDLE}pS(){this.Jt===Vr.IDLE?this.vS&&this.vS():this.Jt===Vr.RUNNING&&(this.mS(),this.fS.then(()=>{this.pS()}))}}class Qr{constructor(e,t=1){this.dS=e,this.gS=t,this.yS=[],this.wS(t)}start(){return this.yS.forEach(e=>{e.start()}),this}stop(){return this.yS.forEach(e=>{e.stop()}),this}setPromiseNotifier(t){return this.yS.forEach(e=>{e.setPromiseNotifier(t)}),this}setAllThreadsIdleNotifier(e){return this.xS=e,this.SS(),this}setNumberOfThreads(e){e<=0||(0<(e=(this.gS=e)-this.gS)?this.wS(e):e<0&&this.OS(e))}getState(){return this.yS.reduce((e,t)=>(e[t.getState()]++,e),{[Vr.IDLE]:0,[Vr.RUNNING]:0,[Vr.STOPPING]:0})}wS(t){for(let e=0;e<t;e++){const t=new Kr(this.dS).setPromiseNotifier(this.bS);this.yS.push(t)}}OS(t){t=Math.min(t,this.yS.length);for(let e=0;e<t;e++)this.yS.pop().stop()}SS(){const t=()=>{this.getState()[Vr.IDLE]===this.yS.length&&this.xS()};this.yS.forEach(e=>{e.setIdleNotifier(t)})}}class Yr{constructor(){this.kS=[]}canCall(t,i){return this.kS.every(e=>e.canCall(t,i))}registerRequestForLineItem(t,i){return this.kS.forEach(e=>{e.registerRequestForLineItem(t,i)}),this}registerImpressionForLineItem(t,i){return this.kS.forEach(e=>{e.registerImpressionForLineItem(t,i)}),this}registerCallingValidator(e){return this.kS.push(e),this}registerCallingValidators(e){return e.forEach(e=>{this.registerCallingValidator(e)}),this}destroy(){this.kS.forEach(e=>{e.destroy()})}}i(44);class Xr{constructor(){this.initialized=!1,this.logged=!1,this.startTime=0,this.winIds=[]}}class Zr{constructor(){this.adSlotType=f.ProtoAdBreakTypeEnum[f.ProtoAdBreakTypeEnum.PreRoll],this.timeToFirstBid=-1,this.timeToFirstWin=-1,this.timeToFirstStartAd=-1,this.timeToFirstAdImpression=-1,this.numberOfBids=0,this.numberOfWins=0,this.numberOfPostBids=0,this.indexOfWinThatGaveImpression=-1}}class en{constructor(){this.metadata=new Xr,this.metrics=new Zr}}const tn=new Map;function sn(e){return tn.has(e)||tn.set(e,new en),tn.get(e)}function rn(e){if(tn.has(e)&&Object(Je.l)([95,5])){const t=tn.get(e);t.metadata.initialized&&!t.metadata.logged&&(t.metadata.logged=!0,Object(g.a)({message:"Preroll_Problem_Logs",exception:JSON.stringify(t.metrics),level:f.ProtoLoggingLevelEnum.INFO}))}}(Hn=Hr=Hr||{}).initialize=function(e){const t=sn(e);t.metadata.initialized=!0,t.metadata.startTime=(new Date).getTime()},Hn.log=rn,Hn.trackBid=function(e){const t=sn(e);0===t.metrics.numberOfBids&&(t.metrics.timeToFirstBid=(new Date).getTime()-t.metadata.startTime),t.metrics.numberOfBids++},Hn.trackStartAd=function(e){const t=sn(e);-1===t.metrics.timeToFirstStartAd&&(t.metrics.timeToFirstStartAd=(new Date).getTime()-t.metadata.startTime)},Hn.trackAdImpression=function(e,t){const i=sn(e);-1===i.metrics.timeToFirstAdImpression&&(i.metrics.timeToFirstAdImpression=(new Date).getTime()-i.metadata.startTime),i.metrics.indexOfWinThatGaveImpression=i.metadata.winIds.indexOf(t.settings.id),rn(e)},Hn.trackPostBid=function(e){sn(e).metrics.numberOfPostBids++},Hn.trackWin=function(e,t){const i=sn(e);i.metadata.winIds.push(t.settings.id),0===i.metrics.numberOfWins&&(i.metrics.timeToFirstWin=(new Date).getTime()-i.metadata.startTime),i.metrics.numberOfWins++};(Hn=qr=qr||{})[Hn.Rtb=1]="Rtb",Hn[Hn.HeaderBidder=2]="HeaderBidder",Hn[Hn.Tam=3]="Tam";const nn={[f.ProtoCreativeTypeEnum.Rtb]:qr.Rtb,[f.ProtoCreativeTypeEnum.HeaderBidder]:qr.HeaderBidder,[f.ProtoCreativeTypeEnum.Tam]:qr.Tam,[f.ProtoCreativeTypeEnum.TamDeal]:qr.Tam};class on{constructor(e){this.settings=e,this._S=new Map,this.Vc=[],this.jS=!1,this.AS=new Ce,this.IS=()=>{const e=this.CS();if(e)return this.TS(e.lineItemList),this.PS(e.lineItemList,e.state).then(()=>{this.MS(e.lineItemList),this.ES()}).catch(()=>{this.MS(e.lineItemList),this.ES()})},this.LS=(e,t)=>this.settings.adCallerYo.getWinningYoScore(t.settings.id)-this.settings.adCallerYo.getWinningYoScore(e.settings.id),this.settings.lineItemList.forEach(e=>{vr(e.protoLineItem.creativeType)?e.protoLineItem.timeBetweenRequests=10:e.protoLineItem.timeBetweenRequests=6}),this.Vc.push(this.settings.lineItemServices.lineItemServicesTimer.onTimer().subscribe(()=>{this.RS()}),this.settings.adBidPool.onBidConsumed.subscribe(()=>{this.RS()}),this.settings.adBidPool.onBidLoadingConsumed.subscribe(()=>{this.RS()}),this.settings.adBidPool.onBidReadyConsumed.subscribe(()=>{this.RS()})),this.BS=(new Yr).registerCallingValidators([this.settings.lineItemServices.requestCapsService,this.settings.lineItemServices.impressionCapsService,this.settings.lineItemServices.timeBetweenRequestsService]),this.DS=new Qr(this.IS,4),this.settings.lineItemList.find(e=>e.protoLineItem.creativeType===f.ProtoCreativeTypeEnum.Rtb)&&this._S.set(qr.Rtb,{auctionPending:!1,caller:new Ar(this.settings.isOutstream,this.settings.skipAdSettings,this.settings.app,this.settings.adMacroReplacer,this.settings.adContainerMap,this.settings.adRequestGatekeeper,this.settings.adEnforcer,this.settings.adSlotContainerRecycler)}),this.settings.lineItemList.find(e=>e.protoLineItem.creativeType===f.ProtoCreativeTypeEnum.HeaderBidder)&&this._S.set(qr.HeaderBidder,{auctionPending:!1,caller:new Br(this.settings.isOutstream,this.settings.schainSettings,this.settings.app,this.settings.adMacroReplacer,this.settings.adContainerMap,this.settings.adEnforcer,this.settings.adSlotContainerRecycler,this.settings.loopAdWhenFinished)}),this.settings.lineItemList.find(e=>e.protoLineItem.creativeType===f.ProtoCreativeTypeEnum.Tam||e.protoLineItem.creativeType===f.ProtoCreativeTypeEnum.TamDeal)&&this._S.set(qr.Tam,{auctionPending:!1,caller:new Fr(this.settings.app,this.settings.amazonSlotId,this.settings.adMacroReplacer,this.settings.adContainerMap,this.settings.adEnforcer,this.settings.adSlotContainerRecycler)}),this.DS.setAllThreadsIdleNotifier(()=>{this.settings.lineItemServices.lineItemServicesTimer.start()})}get onFirstAggregatedBatchFinished(){return this.AS.asObservable()}call(e){this.DS.setNumberOfThreads(e.maxParallelCalls),this.FS=e,this.jS=!0,this.RS()}stop(){this.jS=!1,this.DS.stop()}destroy(){this.stop(),this.BS.destroy(),this._S.forEach(e=>{e.caller.destroy()}),je(this.Vc)}ES(){let t=!0;this._S.forEach(e=>{e.auctionPending&&(t=!1)}),t&&this.AS.next()}$S(e){return e.filter(e=>!(0<e.aggregators.size)&&!(!vr(e.protoLineItem.creativeType)&&(0<e.bids.size||0<e.callers.size))&&this.BS.canCall(e,this.VS())).filter(e=>!this.settings.platformCappedLineItemRepo.isLineItemPlatformCapped(e.protoLineItem.advertiserLineItemId))}RS(){this.jS&&this.DS.start()}CS(){var e=this.$S(this.settings.lineItemList),e=this.settings.adCallerYo.getBestCallable(e,this.FS.stateSettings);if(e&&this.NS(e.lineItemList[0],e.state))return e}NS(e,t){if(vr(e.protoLineItem.creativeType))return!0;const i=this.settings.adBidPool.bids.filter(e=>this.settings.adCallerYo.isBidTargetingAllowed(e,t,this.settings.lineItemServices.impressionCapsService,this.settings.platformCappedLineItemRepo)),s=this.settings.adBidPool.callingLineItems,r=[...i.map(e=>this.settings.adCallerYo.getWinningYoScore(e.settings.id)),...s.map(e=>this.settings.adCallerYo.getCallingYoScore(e.protoLineItem.advertiserLineItemId))],n=this.settings.adCallerYo.getCallingYoScore(e.protoLineItem.advertiserLineItemId);for(let e=0;e<r.length;e++)if(n<r[e])return!1;return!0}TS(e){this.settings.adBidPool.callingLineItems=[...this.settings.adBidPool.callingLineItems,...e]}MS(t){this.settings.adBidPool.callingLineItems=this.settings.adBidPool.callingLineItems.filter(e=>!Object(p.g)(e,t))}PS(e,t){return vr(e[0].protoLineItem.creativeType)?this.HS(e,t):this.qS(e[0],t)}qS(e,t){this.BS.registerRequestForLineItem(e,this.VS());t=this.zS(e,t);return this.WS(t),this.GS(t)}HS(t,i){const s=this._S.get(nn[t[0].protoLineItem.creativeType]);t.forEach(e=>e.aggregators.add(s.caller)),s.auctionPending=!0;var e={lineItemRequestDataList:t.map(e=>({adManagerLineItem:e,maxAvailableRequests:this.settings.lineItemServices.requestCapsService.getAvailableRequestsForLineItem(e,this.VS())})),callingState:i,maxAdDuration:i.adBreakState.maxAdDuration};return s.caller.request(e).then(e=>{e.bids.length||e.noBids.length||t.forEach(e=>{this.BS.registerRequestForLineItem(e,this.VS())}),t.forEach(e=>e.aggregators.delete(s.caller)),e.noBids.forEach(e=>{this.BS.registerRequestForLineItem(e.lineItem,this.VS()),this.JS(i,e.lineItem,e.reason,e.requestMetadata)}),e.bids.forEach(e=>this.WS(e)),e.bids.sort(this.LS);e=e.bids.map(e=>(this.BS.registerRequestForLineItem(e.settings.adManagerLineItem,this.VS()),this.GS(e)));return Promise.all(e)}).catch().then(()=>{s.auctionPending=!1})}GS(t){return t.settings.adManagerLineItem.callers.add(t),t.fetchBid().catch(e=>{t.settings.adManagerLineItem.callers.delete(t),this.settings.adCallerYo.registerPreBid(t.settings.id);e=fs[e]||f.ConnatixNoBidReasonEnum.RequestException;return this.JS(t.settings.callingState,t.settings.adManagerLineItem,e,t.settings.requestMetadata,t.settings.trackersInformation,Date.now()-t.metrics.fetchStart),Promise.reject()}).then(e=>{t.settings.adManagerLineItem.callers.delete(t),this.QS(e,Date.now()-t.metrics.fetchStart)}).catch(e=>{void 0!==e&&Object(g.a)({message:"AdManager_AdCallerController_handleCallAdaptorRequest",exception:e.message,callStack:e.stack,level:f.ProtoLoggingLevelEnum.FATAL,throttle:5,sendMaxLog:!0})})}QS(e,t){var i=e.settings.adManagerLineItem,s=e.settings.requestMetadata;if(e.settings.requestMetadata.data.requestTrackingHandledByServer||this.settings.trackingService.addBid({advertiserLineItemId:i.protoLineItem.advertiserLineItemId,publisherLineItemId:i.protoLineItem.publisherLineItemId,requestedFloorPrice:s.data.requestedFloorPrice,rtbRequestNumber:s.data.rtbRequestNumber,syncedUser:s.data.syncedUser,prebidJsBidderName:s.data.prebidJsBidderName,customClientPrice:e.settings.cpm,timeSpent:t,dspId:s.data.dspId,encryptedPrice:s.data.encryptedPrice,rtbAdomain:s.data.rtbAdomain,creativeId:e.creativeId,rtbSeatId:s.data.rtbSeatId,cnxBidId:e.settings.requestMetadata.data.cnxBidId}),this.settings.adRequestGatekeeper.addBid(i.protoLineItem.advertiserLineItemId,s.data.requestedFloorPrice),!this.settings.adCallerYo.isBidTargetingAllowedEverInSession(e,e.settings.callingState))return this.settings.adCallerYo.registerPreBid(e.settings.id),void this.settings.auctionInfoLogging.bidIsNotWinnableEverInSession(e);Hr.trackBid(this.settings.app.config.playerId),e.settings.adManagerLineItem.bids.add(e),this.settings.adBidPool.addBid(e)}JS(e,t,i,s,r,n){r&&us.track(r.adError,this.settings.adMacroReplacer,t.protoLineItem,e),s.data.requestTrackingHandledByServer||this.settings.trackingService.addPrebid({advertiserLineItemId:t.protoLineItem.advertiserLineItemId,publisherLineItemId:t.protoLineItem.publisherLineItemId,partnerCustomHeaders:s.data.partnerCustomHeaders,partnerReason:s.data.partnerReason,requestedFloorPrice:s.data.requestedFloorPrice,rtbRequestNumber:s.data.rtbRequestNumber,syncedUser:s.data.syncedUser,prebidJsBidderName:s.data.prebidJsBidderName,reason:i,timeSpent:n}),this.settings.adRequestGatekeeper.addPrebid(t.protoLineItem.advertiserLineItemId)}zS(e,t){var i=new us;ps(e.protoLineItem.trackers,i);var s={id:Object(Je.c)(),adManagerLineItem:e,replaceTrackingMacros:!0,requestMetadata:new mr,trackersInformation:i,callingState:t,adContainer:this.settings.adContainerMap.get(e.protoLineItem.adType),globalDomUtilsService:this.settings.app.services.GlobalDomUtilsService,viewabilityService:this.settings.app.services.ViewabilityService,cpm:e.protoLineItem.floorPrice||e.protoLineItem.customCpm,adEnforcer:this.settings.adEnforcer,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,bidSlotId:Ds()};switch(e.protoLineItem.creativeType){case f.ProtoCreativeTypeEnum.External:case f.ProtoCreativeTypeEnum.ThirdParty:return e.protoLineItem.adType===f.ProtoAdType.Overlay?new Gr(Object.assign(Object.assign({},s),{url:e.protoLineItem.adTag,pageDomain:this.settings.app.config.pageDomain})):new gr(Object.assign(Object.assign({},s),{url:e.protoLineItem.adTag,adMacroReplacer:this.settings.adMacroReplacer,trackingService:this.settings.trackingService,loopAdWhenFinished:this.settings.loopAdWhenFinished,pageUrl:this.settings.app.config.pageUrl}));case f.ProtoCreativeTypeEnum.MediaFile:return new Jr(Object.assign(Object.assign({},s),{clickUrl:e.protoLineItem.mediaCreativeClickUrl,mediaId:e.protoLineItem.mediaCreativeId,renditions:e.protoLineItem.renditions,pauseAdWhenFinished:this.settings.pauseAdWhenFinished,loopAdWhenFinished:this.settings.loopAdWhenFinished,inApp:this.settings.app.config.isInApp}))}}WS(e){var{creativeType:t,floorPrice:i,successRate:s,advertiserLineItemId:r,lineItemPriority:n}=e.settings.adManagerLineItem.protoLineItem;this.settings.adCallerYo.registerBiddingInformation({creativeType:t,floorPrice:i,lineItemId:r,priority:n,bidId:e.settings.id,cpm:e.settings.cpm,obfuscatedPrice:e.settings.obfuscatedPrice,successRate:e.settings.successRate||s})}VS(){return(this.FS.stateSettings.currentState||this.FS.stateSettings.predictedState).adOpportunity.id}}const an="uncategorized";class ln{resetCapsBasedOnExternalEvent(e){for(const t of this.XS.keys())this.YS(t,e)&&this.KS(t,an)}YS(e,t){return e.protoLineItem.resetCapType===t}ZS(e){return this.YS(e,f.ProtoResetCapTypeEnum.TimeCapping)&&0<this.tO(e)}}class cn{constructor(e){this.iO=e,this.eO=new Map}setNumberOfImpressions({value:e,categoryId:t}){Object(A.a)(t)&&this.iO===f.ProtoResetCapTypeEnum.OpportunityCapping||(t=an),this.eO.set(t,e)}getNumberOfImpressions({categoryId:e}){return Object(A.a)(e)&&this.iO===f.ProtoResetCapTypeEnum.OpportunityCapping||(e=an),this.eO.get(e)||0}}class dn extends ln{constructor(e=Date.now()){super(),this.sO=e,this.XS=new Map}canCall(e,t){this.nO(e);const i=this.XS.get(e);return void 0===i||0===e.protoLineItem.impressionCap||i.getNumberOfImpressions({categoryId:t})<e.protoLineItem.impressionCap}registerImpressionForLineItem(e,t){let i=this.XS.get(e);return void 0===i&&(this.XS.set(e,new cn(e.protoLineItem.resetCapType)),i=this.XS.get(e),this.ZS(e)&&(i.nextImpressionCapResetTimestamp=this.rO(this.tO(e)))),i.setNumberOfImpressions({value:i.getNumberOfImpressions({categoryId:t})+1,categoryId:t}),this}registerRequestForLineItem(e,t){return this}destroy(){this.XS.clear()}KS(e,t){this.XS.get(e).setNumberOfImpressions({value:0,categoryId:t})}tO(e){return e.protoLineItem.resetImpressionsCapTime*B.f}nO(e,t=Date.now()){if(this.ZS(e)){const i=this.XS.get(e);void 0!==i&&this.hO(e,t)&&(i.setNumberOfImpressions({value:0}),i.nextImpressionCapResetTimestamp=this.rO(this.tO(e),t))}}hO(e,t){return t>=this.XS.get(e).nextImpressionCapResetTimestamp}rO(e,t=Date.now()){e=Math.ceil((t-this.sO)/e)*e;return this.sO+e}}class hn{constructor(e){this.iO=e,this.aO=new Map}setNumberOfRequests({value:e,categoryId:t}){Object(A.a)(t)&&this.iO===f.ProtoResetCapTypeEnum.OpportunityCapping||(t=an),this.aO.set(t,e)}getNumberOfRequests({categoryId:e}){return Object(A.a)(e)&&this.iO===f.ProtoResetCapTypeEnum.OpportunityCapping||(e=an),this.aO.get(e)||0}}class un extends ln{constructor(e=Date.now()){super(),this.sO=e,this.allowResetOnTime=!0,this.XS=new Map}canCall(e,t){this.nO(e);const i=this.XS.get(e);return void 0===i||0===e.protoLineItem.requestCap||i.getNumberOfRequests({categoryId:t})<e.protoLineItem.requestCap}registerRequestForLineItem(e,t,i=Date.now()){let s=this.XS.get(e);return void 0===s&&(this.XS.set(e,new hn(e.protoLineItem.resetCapType)),s=this.XS.get(e),this.ZS(e)&&(s.nextRequestCapResetTimestamp=this.rO(this.tO(e)))),s.setNumberOfRequests({value:s.getNumberOfRequests({categoryId:t})+1,categoryId:t}),this}registerImpressionForLineItem(e){return this}getAvailableRequestsForLineItem(e,t){const i=this.XS.get(e);return void 0===i?e.protoLineItem.requestCap:e.protoLineItem.requestCap-i.getNumberOfRequests({categoryId:t})}restoreOneCapForLineItem(e,t){if(e.protoLineItem.ignoreFilledRequests){const i=this.XS.get(e);void 0!==i&&(0<(e=i.getNumberOfRequests({categoryId:t}))&&i.setNumberOfRequests({value:e-1,categoryId:t}))}}destroy(){this.XS.clear()}KS(e,t){this.XS.get(e).setNumberOfRequests({value:0,categoryId:t})}tO(e){return e.protoLineItem.resetRequestsCapTime*B.f}nO(e,t=Date.now()){if(this.ZS(e)){const i=this.XS.get(e);void 0!==i&&this.hO(e,t)&&(i.setNumberOfRequests({value:0}),i.nextRequestCapResetTimestamp=this.rO(this.tO(e),t))}}hO(e,t){return t>=this.XS.get(e).nextRequestCapResetTimestamp&&this.allowResetOnTime}rO(e,t=Date.now()){e=Math.ceil((t-this.sO)/e)*e;return this.sO+e}}class pn{constructor(){this.XS=new Map}registerRequestForLineItem(e,t,i=Date.now()){let s=this.XS.get(e);return void 0===s&&(this.XS.set(e,{}),s=this.XS.get(e)),s.lastRequestTimestamp=i,this}registerImpressionForLineItem(e){return this}canCall(e,t,i=Date.now()){var s=this.XS.get(e);return void 0===s||0===e.protoLineItem.timeBetweenRequests||i>=s.lastRequestTimestamp+e.protoLineItem.timeBetweenRequests*B.f}destroy(){this.XS.clear()}}class gn{constructor(){this.oO=null,this.cO=new Ce}start(){return this.uO(),this}stop(){return this.lO(),this}onTimer(){return this.cO.asObservable()}destroy(){this.lO()}uO(){null===this.oO&&(this.oO=ye.setInterval(()=>{this.cO.next()},500))}lO(){ye.clearInterval(this.oO),this.oO=null}}class mn extends n.a{constructor(e,t,i,s){super(),this.dO=e,this.fO=t,this.Ic=i,this.pO=s,this.bO=new Ce,this.forceTriggerUpdateState=()=>{[...this.dO.keys()].forEach(e=>this.vO(e))},this.vO=(e,t)=>{this.mO.set(e,this.gO(this.dO.get(e),t))},this.yO=e=>{this.wO([f.ProtoAdType.Video],e)},this.xO=e=>{this.wO([f.ProtoAdType.Overlay],e)},this.br=()=>{this.wO([f.ProtoAdType.Overlay,f.ProtoAdType.Video])},this.wO=(e,t)=>{e.forEach(e=>this.vO(e,t)),this.bO.next()},this.mO=new Map,this.SO={[f.ProtoAdType.Video]:this.yO,[f.ProtoAdType.Overlay]:this.xO},this.forceTriggerUpdateState(),this.dO.forEach((e,t)=>{this.fO.on(e,this.br),this.Ic.on(e,this.SO[t],{threshold:this.pO})})}get onContainerStateUpdate(){return this.bO.asObservable()}getContainerMap(){return this.dO}getContainerStateMap(){return this.mO}destroy(){this.dO.forEach((e,t)=>{this.fO.off(e,this.br),this.Ic.off(e,this.SO[t])})}gO(e,t){let i=t;return void 0===i&&(i=this.Ic.check({element:e,threshold:this.pO})),{width:e.clientWidth,height:e.clientHeight,viewability:i}}}const fn="cnxpl-rf";class yn{constructor(){this.OO=!0,this.kO=new Ce,this._O=[],this.jO=e=>{if(!this.OO){const t=e.target;if(0<t.volume&&(t.volume=0,!t.paused)){const e=t.getAttribute(fn);this.kO.next(e)}e.preventDefault?e.preventDefault():e.returnValue=!1}}}get onVolumeDetected(){return this.kO.asObservable()}enforce(e,t){let i=e;Object(A.c)(e)&&(i=e.contentDocument||e.contentWindow.document),this.OO=!1,Object(p.c)(i.getElementsByTagName("video")).forEach(e=>{this.AO(e,t)})}stopEnforce(){this.OO=!0}clearEnforce(t){try{const i=[];this._O=this._O.filter(e=>e.getAttribute(fn)!==t||(i.push(e),!1)),i.forEach(e=>{e.removeAttribute("cnxpl-vl"),e.removeAttribute(fn),e.removeEventListener("volumechange",this.jO)})}catch(t){}}AO(e,t){e&&!e.getAttribute("cnxpl-vl")&&(e.volume=0,e.setAttribute("cnxpl-vl","true"),e.setAttribute(fn,t),e.addEventListener("volumechange",this.jO),this._O.push(e))}}class bn{constructor(){}IO(e){function t(){}e.Element.prototype.scrollIntoView=t,e.Element.prototype.scrollIntoViewIfNeeded=t,e.scroll=t,e.scrollTo=t,e.scrollBy=t}enforce(e){Object(A.c)(e)&&this.IO(e.contentWindow)}stopEnforce(){}clearEnforce(){}}class vn{constructor(e){this.CO=e=>e.cnxEnfStorage||null,this.de=e;try{this.CO(this.de)||this.TO(this.de)}catch(e){Object(g.a)({message:"AdManager_EnforcerMemory_bind_enforcement",exception:e.message,callStack:e.stack,level:f.ProtoLoggingLevelEnum.FATAL})}}TO(e){Object(S.z)(e.document.head,e,'!function(){function n(n){window["cnx"+n]||(window["cnx"+n]=window[n],window[n]=function(e){var t="";try{e&&(t=function n(e,t){try{if(!e)return"";if(e.cnxInnerTag)return e.cnxInnerTag;if(t<2){var r=t+1;return n(e.caller,r)}}catch(n){return""}return""}(e))}catch(n){}var r=window["cnx"+n].apply(null,arguments);if(t){var i=window.cnxEnfStorage;i[n][t]=i[n][t]||[],i[n][t].push(r)}return r})}window.cnxEnfStorage={setTimeout:{},setInterval:{},eventListeners:{},errors:[]};var e=window.location.hostname.split("."),t=window.btoa(e[e.length-2]+"."+e[e.length-1]);-1===["dG16LmNvbQ==","YmlsbGJvYXJkLmNvbQ==","aG9sbHl3b29kcmVwb3J0ZXIuY29t","dmliZS5jb20=","aG9yb3Njb3BlLmNvbQ==","YXN0cm9sb2d5LmNvbQ==","YWhvcmFtaXNtby5jb20="].indexOf(t)&&(!function(){const n=window.EventTarget?window.EventTarget.prototype:window.document;n.cnxAddEventListener||(n.cnxAddEventListener=n.addEventListener,n.addEventListener=function(n,e,t){var r=this||window;if(e&&e.cnxInnerTag){var i=window.cnxEnfStorage;i.eventListeners[e.cnxInnerTag]=i.eventListeners[e.cnxInnerTag]||[],i.eventListeners[e.cnxInnerTag].push({element:r,type:n,handler:e,options:t})}try{r.cnxAddEventListener(n,e,t)}catch(n){n.message="adlstn_"+n.message,i.errors.push(n)}})}(),n("setTimeout"),n("setInterval"))}();')}enforce(e,t){if(Object(A.c)(e))try{e.contentWindow.self===top||e.contentWindow.Function.prototype.cnxInnerTag||e.contentWindow.Object.defineProperty(e.contentWindow.Function.prototype,"cnxInnerTag",{enumerable:!1,writable:!0,value:t}),e.contentWindow.self===top||e.contentWindow.Object.prototype.cnxInnerTag||e.contentWindow.Object.defineProperty(e.contentWindow.Object.prototype,"cnxInnerTag",{enumerable:!1,writable:!0,value:t})}catch(e){}}stopEnforce(){}clearEnforce(e){try{const t=this.CO(this.de);t.eventListeners[e]&&(t.eventListeners[e].forEach(e=>{e.element.removeEventListener(e.type,e.handler,e.options)}),t.eventListeners[e]=[]),t.setInterval[e]&&(t.setInterval[e].forEach(e=>this.de.clearInterval(e)),t.setInterval[e]=[]),t.setTimeout[e]&&(t.setTimeout[e].forEach(e=>this.de.clearTimeout(e)),t.setTimeout[e]=[])}catch(e){}}}class Pn{constructor(){this.PO=["viralgains","serving-sys.com","commercialadsdistributor"],this.MO=["beachfrontmedia","commercialadsdistributor"],this.EO=["commercialadsdistributor"],this.LO=["pixel.clearstream.tv","pixel.clrstm.com"],this.RO=new Ce,this.BO=new Ce}get onMalwareDetected(){return this.RO.asObservable()}get onBadUriDetected(){return this.BO.asObservable()}enforce(e,t){if(Object(A.c)(e)){this.DO=t;try{this.FO(e),this.$O(e),this.UO(e),this.VO(e)}catch(e){}}}stopEnforce(){}clearEnforce(){}NO(e,t,i,s){e.every(e=>-1===i.indexOf(e))&&!t.getAttribute("cnx")&&(t.setAttribute("cnx","true"),this.BO.next({referenceId:this.DO,enforcementMessage:`${s}-${t}`}))}FO(e){const t=e.getAttribute("src");t&&(this.PO.forEach(e=>{-1<t.indexOf(e)&&this.RO.next({referenceId:this.DO,enforcementMessage:`malware-${e}`})}),this.NO(["//","about:blank","about:self","javascript:"],e,t,"iframe"))}$O(e){Object(p.c)(e.contentDocument.getElementsByTagName("script")).forEach(e=>{const t=e.getAttribute("src");t&&(this.MO.forEach(e=>{-1<t.indexOf(e)&&this.RO.next({referenceId:this.DO,enforcementMessage:`malware-${e}`})}),this.NO(["//"],e,t,"script"))})}UO(e){Object(p.c)(e.contentDocument.getElementsByTagName("a")).forEach(e=>{const t=e.getAttribute("href");t&&this.EO.forEach(e=>{-1<t.indexOf(e)&&this.RO.next({referenceId:this.DO,enforcementMessage:`malware-${e}`})})})}VO(e){Object(p.c)(e.contentDocument.getElementsByTagName("img")).forEach(e=>{const t=e.getAttribute("src");t&&this.LO.forEach(e=>{-1<t.indexOf(e)&&this.RO.next({referenceId:this.DO,enforcementMessage:`malware-${e}`})})})}}class Sn{constructor(e,t,i){if(this.HO=i,this.qO=null,this.zO=new Map,this.WO=bs.None,this.GO=300,this.Vc=[],this.JO=new Map,this.Um=new Ce,this.zO.set(bs.MemoryLeak,new vn(t)),i||this.zO.set(bs.ScrollHijack,new bn),!e){const e=new yn;this.zO.set(bs.Mute,e),this.Vc.push(e.onVolumeDetected.subscribe(e=>{this.QO(ys.VOLUME_DETECTED,e,"")}))}const s=new Pn;this.Vc.push(s.onBadUriDetected.subscribe(e=>{this.QO(ys.BADURI_DETECTED,e.referenceId,e.enforcementMessage)}),s.onMalwareDetected.subscribe(e=>{this.QO(ys.MALWARE_DETECTED,e.referenceId,e.enforcementMessage)})),this.zO.set(bs.Malware,s)}get onEnforcerEvent(){return this.Um.asObservable()}registerContainer(e,t){this.JO.get(e)||this.JO.set(e,t)}deregisterContainer(t){this.JO.get(t)&&(this.zO.forEach(e=>{e.clearEnforce(this.JO.get(t))}),this.JO.delete(t),this.JO.size||this.stop(bs.All))}start(e){this.HO&&(e^=bs.ScrollHijack),this.WO|=e,null===this.qO&&(this.qO=setInterval(()=>{try{this.JO.forEach((e,t)=>{this.XO(t,e)})}catch(e){}},this.GO))}stop(i){this.WO&=~i,this.WO===bs.None&&(clearInterval(this.qO),this.qO=null),this.zO.forEach((e,t)=>{i&t&&e.stopEnforce()})}destroy(){this.stop(bs.All),je(this.Vc),this.JO.forEach((e,t)=>{this.deregisterContainer(t)})}XO(i,s){Object(p.c)(i.getElementsByTagName("iframe")).forEach(e=>{try{this.XO(e,s)}catch(e){}}),this.zO.forEach((e,t)=>{this.WO&t&&e.enforce(i,s)})}QO(e,i,t){let s;this.JO.forEach((e,t)=>{e===i&&(s=t)}),this.Um.next({message:t,type:e,detectedContainer:s})}}class In{constructor(e){this.Jn=e,this.YO=!1,this.KO=void 0,this.ZO=[],this.Vc=[],this.tk=!1,this.ik=new Ce,this.ek=new Ce,this.sk=[],this.Vc.push(this.Jn.adBidPool.onBidReady.subscribe(()=>{this.nk()}),this.Jn.impressionCapsTimer.onTimer().subscribe(()=>{this.nk()}))}get onAdSelected(){return this.ik.asObservable()}get onAdFinished(){return this.ek.asObservable()}start(e){this.rk=e,this.YO=!0,this.nk()}stop(){this.YO=!1}destroy(){this.stop(),je(this.Vc),this.KO||this.hk()}nk(){var e,t;!this.YO||this.tk||(e=this.ak(this.rk))&&(t=this.ck(e),this.KO&&this.Jn.removeBidIfHigherYoScore&&t?(this.hk(),this.KO.stopAd("removeStartedBid"),this.uk(e)):this.KO||this.uk(e))}uk(e){this.KO=e,this.sk=[],this.Jn.adBidPool.moveBidToStarted(e),this.ik.next(e),this.lk(e),Hr.trackStartAd(this.Jn.playerId),e.startAd()}hk(){this.KO&&(je(this.ZO),this.ZO=[],this.Jn.adBidPool.consumeBidStarted(this.KO),this.KO=void 0,this.sk=[])}dk(e){e=e.settings.adManagerLineItem;return this.Jn.impressionCapsService.canCall(e,this.rk.adOpportunity.id)}ak(e){var t=this.Jn.adBidPool.bidsReady.filter(e=>this.dk(e));return this.Jn.adImpressionerYo.getBestBid(t,e)}ck(e){return!!this.KO&&this.Jn.adImpressionerYo.getBetterBid(e,this.KO)!==this.KO}fk(e,t){this.tk&&Object(g.a)({message:"AdManager_ABaseBidAdaptor_multipleImpressions",exception:`advertiserLineItemId:${e.settings.adManagerLineItem.protoLineItem.advertiserLineItemId}_creativeId:${e.creativeId}`,callStack:`${e.adMediaType}`,throttle:1e3,level:f.ProtoLoggingLevelEnum.FATAL,sendMaxLog:!0}),this.Jn.adImpressionerYo.registerImpression(e.settings.id,e.settings.adManagerLineItem.protoLineItem.creativeType),Hr.trackAdImpression(this.Jn.playerId,e),this.tk=!0,this.Jn.adRequestGatekeeper.addImpression(e.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,e.settings.obfuscatedPrice),this.Jn.impressionCapsService.registerImpressionForLineItem(e.settings.adManagerLineItem,this.rk.adOpportunity.id),this.Jn.requestCapsService.restoreOneCapForLineItem(e.settings.adManagerLineItem,this.rk.adOpportunity.id),e.settings.adManagerLineItem.bids.delete(e);var i=this.Jn.auctionInfoLogging.onImpression(e);this.pk(e,t,i)}bk(e,t,i,s=!0){this.vk(e,t,i,s),this.Jn.loopAdWhenFinished?e.resumeAd():this.Jn.pauseAdWhenFinished?e.pauseAd():(this.ek.next(e),this.hk(),this.nk())}vk(e,t,i,s=!0){this.tk?this.tk=!1:s&&(this.Jn.adImpressionerYo.registerPostBid(e.settings.id,e.settings.adManagerLineItem.protoLineItem.creativeType,i),s=this.Jn.auctionInfoLogging.onPostBid(e),this.mk(e,i,t,s),e.settings.adManagerLineItem.bids.delete(e))}pk(e,t,i){const s=this.rk.adBreakState,r=Object(A.d)(Object(Te.h)(e.getAdDuration(),2))?Object(Te.h)(e.getAdDuration(),2):0,n=Object(A.d)(Object(Te.h)(e.declaredDurationInSeconds,2))?Object(Te.h)(e.declaredDurationInSeconds,2):0,o=r-n,a={adPodSlotPosition:s.adPodSlotIndex,adsourceType:e.adSourceType,advertiserLineItemId:e.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:e.settings.adManagerLineItem.protoLineItem.publisherLineItemId,customClientPrice:e.settings.cpm,encryptedPrice:e.settings.requestMetadata.data.encryptedPrice,prebidJsBidderName:e.settings.requestMetadata.data.prebidJsBidderName,rtbAdomain:e.settings.requestMetadata.data.rtbAdomain,creativeId:e.creativeId,rtbSeatId:e.settings.requestMetadata.data.rtbSeatId,syncedUser:e.settings.requestMetadata.data.syncedUser,timeSpent:t,vastMediaType:e.adMediaType,dspId:e.settings.requestMetadata.data.dspId,cnxBidId:e.settings.requestMetadata.data.cnxBidId,winToAdLoadedTime:null===(t=e.settings.bidLifecycle)||void 0===t?void 0:t.winToAdLoadedTime,startAdToImpressionTime:null===(e=e.settings.bidLifecycle)||void 0===e?void 0:e.startAdToImpressionTime,impressionDuration:o,declaredDuration:n,useExploration:this.Jn.explorationMode};Object(A.a)(i)&&(a.auctionInformation=i),this.Jn.trackingService.trackVideoAdImpression(a)}mk(e,t,i,s){var r=this.rk.adBreakState;Hr.trackPostBid(this.Jn.playerId);const n={adPodSlotPosition:r.adPodSlotIndex,adsourceType:e.adSourceType,advertiserLineItemId:e.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:e.settings.adManagerLineItem.protoLineItem.publisherLineItemId,error:t,loaded:!0,prebidJsBidderName:e.settings.requestMetadata.data.prebidJsBidderName,vastMediaType:e.adMediaType,syncedUser:e.settings.requestMetadata.data.syncedUser,rtbSeatId:e.settings.requestMetadata.data.rtbSeatId,rtbAdomain:e.settings.requestMetadata.data.rtbAdomain,creativeId:e.creativeId,timeSpent:i,dspId:e.settings.requestMetadata.data.dspId,cnxBidId:e.settings.requestMetadata.data.cnxBidId,winToAdLoadedTime:null===(e=e.settings.bidLifecycle)||void 0===e?void 0:e.winToAdLoadedTime};Object(A.a)(s)&&(n.auctionInformation=s,n.auctionPostbidReason=this.Jn.auctionInfoLogging.getGeneralPostbidReason(t)),this.Jn.trackingService.addPostBid(n)}gk(e,t){0<=this.sk.indexOf(t)&&!this.Jn.pauseAdWhenFinished&&!this.Jn.loopAdWhenFinished?1===Object(Je.l)([99,1])&&Object(g.a)({message:"AdManager_AdImpressionerController_handleQuartilesTracking_track_same_quartile_twice",level:f.ProtoLoggingLevelEnum.WARNING,exception:e.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,callStack:e.adMediaType}):(this.sk.push(t),this.Jn.trackingService.trackVideoAdQuartile({advertiserLineItemId:e.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:e.settings.adManagerLineItem.protoLineItem.publisherLineItemId,quartile:t}))}lk(r){const n=Date.now();this.ZO.push(r.onVpaidEvent.subscribe(e=>{var t,i=function(e,t){switch(e){case v.b.AdImpression:return t.adImpression;case v.b.AdClickThru:return t.adClick;case v.b.AdStarted:return t.adStarted;case v.b.AdVideoStart:return t.adVideoStart;case v.b.AdVideoFirstQuartile:return t.adQuartileFirst;case v.b.AdVideoMidpoint:return t.adQuartileSecond;case v.b.AdVideoThirdQuartile:return t.adQuartileThird;case v.b.AdVideoComplete:return t.adQuartileFourth;case v.b.AdPaused:return t.adPause;case v.b.AdPlaying:return t.adResume;case v.b.AdSkipped:return t.adSkip;case v.b.AdUserClose:return t.adUserClose;case v.b.AdUserAcceptInvitation:return t.adUserAcceptInvitation;case v.b.AdUserMinimize:return t.adUserMinimize;case v.b.AdError:return t.adError}}(e.type,r.settings.trackers),s=Date.now()-n;switch(i||e.type!==v.b.AdImpression||(this.yk("AdManager_AdImpressionController_tracker_impression_not_found"),Object(g.a)({sendMaxLog:!1,message:"AdManager_AdImpressionController_tracker_impression_not_found",level:f.ProtoLoggingLevelEnum.FATAL})),us.track(i,this.Jn.adMacroReplacer,r.settings.adManagerLineItem.protoLineItem,r.settings.callingState),e.type){case v.b.AdError:this.bk(r,s,e.payload.errorMessage);break;case v.b.AdSkipped:this.bk(r,s,Ss.c.AdStopped);break;case v.b.AdStopped:this.bk(r,s,Ss.c.AdStopped,null===(t=e.payload)||void 0===t?void 0:t.shouldTrackPostBid);break;case v.b.AdImpression:this.fk(r,s);break;case v.b.AdVideoFirstQuartile:this.gk(r,f.ProtoQuartilesEnum.First);break;case v.b.AdVideoMidpoint:this.gk(r,f.ProtoQuartilesEnum.Second);break;case v.b.AdVideoThirdQuartile:this.gk(r,f.ProtoQuartilesEnum.Third);break;case v.b.AdVideoComplete:this.gk(r,f.ProtoQuartilesEnum.Fourth)}})),this.ZO.push(r.onAdViewableImpression.subscribe(e=>{this.Jn.trackingService.trackVideoAdImpressionViewable(e)}))}yk(e,t){Object(g.a)({message:e,level:f.ProtoLoggingLevelEnum.FATAL,sendMaxLog:!1,exception:null===t||void 0===t?void 0:t.message,callStack:null===t||void 0===t?void 0:t.stack})}}const Tn={[f.ProtoAdBreakTypeEnum.PreRoll]:"preRoll",[f.ProtoAdBreakTypeEnum.MidRoll]:"midRoll",[f.ProtoAdBreakTypeEnum.PostRoll]:"postRoll"};class An{constructor(e,t){this.wk=e,this.Wh=t}replace(e,t,i){this.wk.setAdWidth(i.adMacros.adWidth),this.wk.setAdHeight(i.adMacros.adHeight),this.wk.setAdPosition(Tn[i.adMacros.adPostion]),i.mediaMacros.mediaDescription&&this.wk.setVideoDescription(i.mediaMacros.mediaDescription),i.mediaMacros.mediaDuration&&this.wk.setVideoDuration(i.mediaMacros.mediaDuration),i.mediaMacros.mediaId&&this.wk.setVideoId(i.mediaMacros.mediaId),i.mediaMacros.mediaTitle&&this.wk.setVideoTitle(i.mediaMacros.mediaTitle),i.mediaMacros.mediaUrl&&this.wk.setVideoUrl(i.mediaMacros.mediaUrl);i=this.Wh.isConsent(t);this.wk.setGDPR(this.Wh.isConsentRequired()?1:0),this.wk.setConsent(i?1:0),this.wk.setGDPRConsent(this.Wh.getConsentPayload());t=this.Wh.getTrackableUser(),t=this.Wh.isConsentConnatix()&&i?t:void 0;return this.wk.setUUID(t),this.wk.setupMacros(e)}}const On=30*B.f;class kn{constructor(){this.xk=null}onAdRemoved(){this.xk=null,this.Sk()}pauseViaUserInteraction(){this.xk&&(this.xk.pausedWithUserInteraction=!0)}resumeViaUserInteraction(){this.xk&&(this.xk.pausedWithUserInteraction=!1,this.Sk())}Ok(e){this.xk={currentAd:e,isPaused:!1,pausedWithUserInteraction:!1,remainingTimeForAdToBePaused:On,lastAdPausedStartedTimestamp:void 0},this.Sk()}checkPauseAd(e,t){e&&(null===this.xk&&this.Ok(e),t?this.kk(e):this._k(e))}_k(e){this.jk(e)&&(this.xk.isPaused=!0,this.xk.lastAdPausedStartedTimestamp=Date.now(),e.pauseAd(),this.Sk(),this.Ak=setTimeout(()=>{e.stopAd("pauseOutOfView"),this.xk=null,this.Sk()},this.xk.remainingTimeForAdToBePaused))}kk(e){e.settings.adManagerLineItem.protoLineItem.pauseAdOutOfView&&e.impressionStarted&&this.xk.isPaused&&!this.xk.pausedWithUserInteraction&&(this.Sk(),this.xk.isPaused=!1,this.xk.remainingTimeForAdToBePaused=this.xk.remainingTimeForAdToBePaused-(Date.now()-this.xk.lastAdPausedStartedTimestamp),e.resumeAd())}Sk(){clearTimeout(this.Ak),this.Ak=void 0}jk(e){return e.settings.adManagerLineItem.protoLineItem.pauseAdOutOfView&&e.impressionStarted&&!this.xk.isPaused&&!this.xk.pausedWithUserInteraction}}function Cn(t,i){return function(e){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return e.lift(new En(t,i))}}function wn(s){return function(e){for(var t=0,i=s.length;t<i&&!e.closed;t++)e.next(s[t]);e.complete()}}var xn,En=(Rn.prototype.call=function(e,t){return t.subscribe(new Ln(e,this.project,this.thisArg))},Rn),Ln=(D(Mn,xn=X),Mn.prototype.Hc=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},Mn);function Mn(e,t,i){e=xn.call(this,e)||this;return e.project=t,e.count=0,e.thisArg=i||e,e}function Rn(e,t){this.project=e,this.thisArg=t}function Bn(e){return e&&"number"==typeof e.length&&"function"!=typeof e}var jn="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function Dn(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var _n=function(e){if(e&&"function"==typeof e[ie])return r=e,function(e){var t=r[ie]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(Bn(e))return wn(e);if(Dn(e))return i=e,function(t){return i.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,N),t};if(e&&"function"==typeof e[jn])return s=e,function(t){for(var e=s[jn]();;){var i=void 0;try{i=e.next()}catch(e){return t.error(e),t}if(i.done){t.complete();break}if(t.next(i.value),t.closed)break}return"function"==typeof e.return&&t.add(function(){e.return&&e.return()}),t};var s,i,r,e=q(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function Fn(s,r){return new re(function(e){var t=new $,i=0;return t.add(r.schedule(function(){i!==s.length?(e.next(s[i++]),e.closed||t.add(this.schedule())):e.complete()})),t})}var Un,Nn,Vn=(D(Wn,Nn=X),Wn.prototype.Hc=function(e){this.parent.notifyNext(e)},Wn.prototype.qc=function(e){this.parent.notifyError(e),this.unsubscribe()},Wn.prototype.zc=function(){this.parent.notifyComplete(),this.unsubscribe()},Wn),Hn=(D(qn,Un=X),qn.prototype.notifyNext=function(e){this.destination.next(e)},qn.prototype.notifyError=function(e){this.destination.error(e)},qn.prototype.notifyComplete=function(){this.destination.complete()},qn);function qn(){return null!==Un&&Un.apply(this,arguments)||this}function Wn(e){var t=Nn.call(this)||this;return t.parent=e,t}function $n(t,r,i){return void 0===i&&(i=Number.POSITIVE_INFINITY),"function"==typeof r?function(e){return e.pipe($n(function(i,s){return((e=t(i,s))instanceof re?e:new re(_n(e))).pipe(Cn(function(e,t){return r(i,e,s,t)}));var e},i))}:("number"==typeof r&&(i=r),function(e){return e.lift(new zn(t,i))})}var Gn,zn=(Qn.prototype.call=function(e,t){return t.subscribe(new Jn(e,this.project,this.concurrent))},Qn),Jn=(D(Kn,Gn=Hn),Kn.prototype.Hc=function(e){this.active<this.concurrent?this.Ik(e):this.buffer.push(e)},Kn.prototype.Ik=function(e){var t,i=this.index++;try{t=this.project(e,i)}catch(e){return void this.destination.error(e)}this.active++,this.Ck(t)},Kn.prototype.Ck=function(e){var t=new Vn(this),i=this.destination;i.add(t);e=function(e,t){if(!t.closed)return e instanceof re?e.subscribe(t):_n(e)(t)}(e,t);e!==t&&i.add(e)},Kn.prototype.zc=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},Kn.prototype.notifyNext=function(e){this.destination.next(e)},Kn.prototype.notifyComplete=function(){var e=this.buffer;this.active--,0<e.length?this.Hc(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},Kn);function Kn(e,t,i){void 0===i&&(i=Number.POSITIVE_INFINITY);e=Gn.call(this,e)||this;return e.project=t,e.concurrent=i,e.hasCompleted=!1,e.buffer=[],e.active=0,e.index=0,e}function Qn(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}function Yn(t,i){return function(e){return e.lift(new Zn(t,i))}}var Xn,Zn=(io.prototype.call=function(e,t){return t.subscribe(new eo(e,this.predicate,this.thisArg))},io),eo=(D(to,Xn=X),to.prototype.Hc=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},to);function to(e,t,i){e=Xn.call(this,e)||this;return e.predicate=t,e.thisArg=i,e.count=0,e}function io(e,t){this.predicate=e,this.thisArg=t}function so(t,i){return void 0===i&&(i=!1),function(e){return e.lift(new no(t,i))}}var ro,no=(lo.prototype.call=function(e,t){return t.subscribe(new oo(e,this.predicate,this.inclusive))},lo),oo=(D(ao,ro=X),ao.prototype.Hc=function(e){var t,i=this.destination;try{t=this.predicate(e,this.index++)}catch(e){return void i.error(e)}this.nextOrComplete(e,t)},ao.prototype.nextOrComplete=function(e,t){var i=this.destination;Boolean(t)?i.next(e):(this.inclusive&&i.next(e),i.complete())},ao);function ao(e,t,i){e=ro.call(this,e)||this;return e.predicate=t,e.inclusive=i,e.index=0,e}function lo(e,t){this.predicate=e,this.inclusive=t}function co(){}function ho(t,i,s){return function(e){return e.lift(new fo(t,i,s))}}var uo,po,go,mo,fo=(vo.prototype.call=function(e,t){return t.subscribe(new yo(e,this.nextOrObserver,this.error,this.complete))},vo),yo=(D(bo,uo=X),bo.prototype.Hc=function(e){try{this.Tk.call(this.Jc,e)}catch(e){return void this.destination.error(e)}this.destination.next(e)},bo.prototype.qc=function(e){try{this.Pk.call(this.Jc,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)},bo.prototype.zc=function(){try{this.Mk.call(this.Jc)}catch(e){return void this.destination.error(e)}return this.destination.complete()},bo);function bo(e,t,i,s){e=uo.call(this,e)||this;return e.Tk=co,e.Pk=co,e.Mk=co,e.Pk=i||co,e.Mk=s||co,_(t)?(e.Jc=e).Tk=t:t&&(e.Jc=t,e.Tk=t.next||co,e.Pk=t.error||co,e.Mk=t.complete||co),e}function vo(e,t,i){this.nextOrObserver=e,this.error=t,this.complete=i}class Po{constructor(e){this.bid=e,this.cancelled=!1,this.Ek=new Ce,this.Lk=!1,this.ug=this.bid.onVpaidEvent.pipe(Yn(e=>e.type===v.b.AdLoaded),so(()=>!this.Lk),ho(()=>{this.Lk=!0})),this.dg=this.bid.onVpaidEvent.pipe(Yn(e=>e.type===v.b.AdError),Cn(e=>e.payload.errorMessage),so(()=>!this.Lk),ho(()=>{this.Lk=!0}))}get onSuccess(){return this.ug}get onFailure(){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=Number.POSITIVE_INFINITY,s=null,r=e[e.length-1];return r&&"function"==typeof r.schedule?(s=e.pop(),1<e.length&&"number"==typeof e[e.length-1]&&(i=e.pop())):"number"==typeof r&&(i=e.pop()),null===s&&1===e.length&&e[0]instanceof re?e[0]:$n(se,i=void 0===(i=i)?Number.POSITIVE_INFINITY:i)((i=e,s?Fn(i,s):new re(wn(i))))}(this.Ek,this.dg)}loadBid(e,t,i,s,r){this.bid.initAd(e,t,i,s,void 0,void 0,r)}}class So{constructor(e){this.Jn=e,this.Rk=new Set,this.Bk=new Map,this.Vc=[],this.Tc=!1,this.Dk=()=>{if(!this.Fk()){const s=this.$k();if(s.selectedBid){const r=Date.now();return this.Jn.auctionInfoLogging.winBid(s.selectedBid),this.Uk(s,this.Vk.vastViewMode).catch(e=>{var t=s["selectedBid"],i=this.Jn.auctionInfoLogging.onPostBid(s.selectedBid);throw this.Nk(t,r,e,i),this.Hk(),s}).then(()=>{this.Hk()}).catch(t=>{if(t!==s){let e="";try{e=JSON.stringify(t)}catch(e){}Object(g.a)({message:"AdManager_winBid_failed",level:f.ProtoLoggingLevelEnum.FATAL,exception:t,callStack:e,throttle:3,sendMaxLog:!1})}})}}},this.DS=new Qr(this.Dk,1),this.Vc.push(this.Jn.adBidPool.onBid.subscribe(e=>{var t=this.$k();this.Jn.auctionInfoLogging.newBidAdded(e,t),this.Hk()}),this.Jn.adBidPool.onBidStarted.subscribe(()=>{this.Hk()}),this.Jn.adBidPool.onBidReadyConsumed.subscribe(()=>{this.Hk()}),this.Jn.impressionCapsTimer.onTimer().subscribe(()=>{this.Hk()}))}isLoadingBids(){return 0<this.Rk.size}win(e){this.Vk=e,this.DS.setNumberOfThreads(e.maxParallelWins),this.Tc=!0,this.Hk()}stop(){this.Tc=!1,this.DS.stop()}destroy(){this.stop(),je(this.Vc),this.Bk.forEach(e=>e())}Hk(){this.Tc&&this.DS.start()}$k(){var e=this.qk(),t=this.zk();return this.Wk(e,t)}Wk(e,t){const i=Object.assign({},e);return e.selectedBid&&t.selectedBid&&this.Gk(t.selectedBid,e.selectedBid)&&(i.selectedBid=void 0,i.unselectedBidList.push({bid:e.selectedBid,lossReason:f.ProtoAuctionLossReasonEnum.CompetitorPriority})),i}Fk(){return-1!==this.Jn.maxNumberOfWins&&this.Jn.adBidPool.bidsReady.length+this.Rk.size+(this.Jn.adBidPool.bidStarted?1:0)>=this.Jn.maxNumberOfWins}qk(){return this.Jk(this.Jn.adBidPool.bids)}zk(){var e=[...Object(p.d)(this.Rk).map(e=>e.bid),...this.Jn.adBidPool.bidsReady];return this.Jk(e)}Jk(e){return this.Jn.adWinnerYo.selectBestBid(e,this.Vk.stateSettings,this.Jn.impressionCapsService,this.Jn.platformCappedLineItemRepo)}Gk(e,t){return!(this.Jn.adWinnerYo.getWinningYoScore(e.settings.id)<=this.Jn.adWinnerYo.getWinningYoScore(t.settings.id))}Uk(a,l){return new Promise((e,t)=>{const{selectedBid:i,state:s}=a,r=new Po(i);this.Rk.add(r),this.Jn.adBidPool.moveBidToLoading(i),r.onSuccess.subscribe(()=>{this.Rk.delete(r),this.Jn.adBidPool.moveBidToReady(i),e()}),r.onFailure.subscribe(e=>{this.Rk.delete(r),this.Jn.adBidPool.consumeBidLoading(i),a.selectedBid.settings.adManagerLineItem.bids.delete(i),t(e)});var{width:n,height:o}=s.adContainerState.get(i.settings.adManagerLineItem.protoLineItem.adType);r.loadBid(n,o,l,this.Jn.desiredBitRateForWins,s.soundValue),us.track(i.settings.trackers.adWin,this.Jn.adMacroReplacer,i.settings.adManagerLineItem.protoLineItem,s),Hr.trackWin(this.Jn.playerId,i)})}Nk(e,t,i,s){this.Qk(e,Date.now()-t,i,s),this.Jn.adWinnerYo.registerPostBid(e.settings.id,e.settings.adManagerLineItem.protoLineItem.creativeType,i)}Qk(e,t,i,s){var r,n=(null===(r=null===(r=this.Vk.stateSettings)||void 0===r?void 0:r.currentState)||void 0===r?void 0:r.adBreakState)||(null===(n=null===(n=this.Vk.stateSettings)||void 0===n?void 0:n.predictedState)||void 0===n?void 0:n.adBreakState);us.track(e.settings.trackers.adError,this.Jn.adMacroReplacer,e.settings.adManagerLineItem.protoLineItem,e.settings.callingState),Hr.trackPostBid(this.Jn.playerId);const o={adPodSlotPosition:n.adPodSlotIndex,adsourceType:e.adSourceType,advertiserLineItemId:e.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:e.settings.adManagerLineItem.protoLineItem.publisherLineItemId,error:i,loaded:!1,prebidJsBidderName:e.settings.requestMetadata.data.prebidJsBidderName,vastMediaType:e.adMediaType,syncedUser:e.settings.requestMetadata.data.syncedUser,rtbSeatId:e.settings.requestMetadata.data.rtbSeatId,rtbAdomain:e.settings.requestMetadata.data.rtbAdomain,creativeId:e.creativeId,timeSpent:t,dspId:e.settings.requestMetadata.data.dspId,cnxBidId:e.settings.requestMetadata.data.cnxBidId,winToAdLoadedTime:null===(e=e.settings.bidLifecycle)||void 0===e?void 0:e.winToAdLoadedTime};Object(A.a)(s)&&(o.auctionInformation=s,o.auctionPostbidReason=this.Jn.auctionInfoLogging.getGeneralPostbidReason(i)),this.Jn.trackingService.addPostBid(o)}}function Io(e,t){if(Object(p.h)(t.items)&&Array.isArray(e)){const i=Object(p.b)(e,t.items).length;return t.choiceCriteria===f.ProtoChoiceCriteriaEnum.Only?0<i:0===i}const i=Object(p.g)(e,t.items);return t.choiceCriteria===f.ProtoChoiceCriteriaEnum.Only?i:!i}function To(e,t){return e.some(e=>function(t,i){for(let e=0;e<t.filters.length;e++){const s=t.filters[e],r=i.filter(e=>s.items.includes(e)).length;switch(s.type){case f.ProtoLineItemContextualTargetingEnum.IncludeAny:if(0===r)return!1;break;case f.ProtoLineItemContextualTargetingEnum.IncludeAll:if(r!==s.items.length)return!1;break;case f.ProtoLineItemContextualTargetingEnum.ExcludeAny:if(0<r)return!1;break;case f.ProtoLineItemContextualTargetingEnum.ExcludeAll:if(r===s.items.length)return!1}}return!0}(e,t))}(Hn=po=po||{}).isAllowedBySound=function(e,t){return!e.protoLineItem.sound||t.sound},Hn.isAllowedByViewability=function(e,t){t=t.adContainerState.get(e.protoLineItem.adType).viewability;return!e.protoLineItem.viewability||t},Hn.isAllowedByAdBreakType=function(e,t){return!e.protoLineItem.adBreakSettings||e.protoLineItem.adBreakSettings.adBreakTargeting.some(e=>{if(e.adRollType===t.adBreakState.adBreakType)return function(e,t){switch(e){case f.ProtoLineItemAdBreakTypeEnum.All:return!0;case f.ProtoLineItemAdBreakTypeEnum.AdPod:return t;case f.ProtoLineItemAdBreakTypeEnum.SingleAd:return!t}}(e.adBreakTypeEnum,t.adBreakState.isAdPodBreak)})},Hn.isAllowedByMediaTargeting=function(e,t){return!(e.protoLineItem.mediaIdTargeting&&!Io(t.media.mediaId,e.protoLineItem.mediaIdTargeting)||e.protoLineItem.mediaKeywordsTargeting&&!Io(t.media.mediaKeywords,e.protoLineItem.mediaKeywordsTargeting)||e.protoLineItem.mediaLanguageTargeting&&!Io(t.media.mediaLanguage,e.protoLineItem.mediaLanguageTargeting))},Hn.isAllowedByContextualTargeting=function(e,t){var{advertiserContextualTargeting:i,publisherContextualTargeting:e}=e.protoLineItem,t=t.media.videoIndexes||[];return!(Object(p.h)(i)&&!To(i,t)||Object(p.h)(e)&&!To(e,t))},Hn.isAllowedByPlayerSizeTargeting=function(e,t){var i=e.protoLineItem["playerSizeTargetings"],e=t.adContainerState.get(e.protoLineItem.adType)["width"];return!Object(A.f)(i)||!Object(A.d)(e)||(i.sizeChoiceCriteria===f.ProtoSizeChoiceCriteriaEnum.GreaterThan?!Object(A.d)(i.minWidth)||e>=i.minWidth:i.sizeChoiceCriteria===f.ProtoSizeChoiceCriteriaEnum.SmallerThan?!Object(A.d)(i.maxWidth)||e<=i.maxWidth:i.sizeChoiceCriteria!==f.ProtoSizeChoiceCriteriaEnum.Between||!Object(A.d)(i.maxWidth)||!Object(A.d)(i.minWidth)||e>=i.minWidth&&e<=i.maxWidth)},Hn.isAllowedByPodTargeting=function(e,t){const i=null===(e=e.protoLineItem.adBreakSettings)||void 0===e?void 0:e.adPodTargeting;if(!i)return!0;if(!t.adBreakState.isAdPodBreak)return!0;var s=t.adBreakState.adPodSlotIndex;let r=!0;switch(i.adSlotTargetingType){case f.ProtoLineItemAdSlotTargetingTypeEnum.Interval:(s<i.adSlotPositions[0]||s>i.adSlotPositions[1])&&(r=!1);break;case f.ProtoLineItemAdSlotTargetingTypeEnum.SpecificSlots:-1===i.adSlotPositions.indexOf(s)&&(r=!1)}return i.targetingType===f.ProtoLineItemTargetingTypeEnum.Except&&(r=!r),r},Hn.isAllowedRegardingDuration=function(e,t){return!e||0===t||e<=t},Hn.isAllowedRegardingSkippability=function(e,t,i){switch(i.adSkippability){case f.ProtoPlayerAdSkippability.IfLongerThan:if(t===f.ProtoAdSkipMode.Never&&e>i.adsMustBeSkippableIfLongerThan||t===f.ProtoAdSkipMode.IfLongerThan31Sec&&e<R.d&&e>i.adsMustBeSkippableIfLongerThan||t===f.ProtoAdSkipMode.Always&&e<i.adsMustBeSkippableIfLongerThan)return!1;break;case f.ProtoPlayerAdSkippability.Always:if(t===f.ProtoAdSkipMode.IfLongerThan31Sec&&e&&e<R.d)return!1}return!0};class Ao{constructor(e,t){this.Xk=e,this.Yk=t}getCallingYoScore(e){return this.Xk.getCallingYoScore(e)}getWinningYoScore(e){return this.Xk.getWinningYoScore(e)}getImpressionYoScore(e){return this.Xk.getImpressionYoScore(e)}registerBiddingInformation(e){this.Xk.registerBiddingInformation(e)}registerPreBid(e){this.Xk.registerPreBid(e)}registerImpression(e,t){this.Xk.registerImpression(e,t)}registerPostBid(e,t,i){this.Xk.registerPostBid(e,t,i)}Kk(e,t){return po.isAllowedByViewability(e,t)&&po.isAllowedBySound(e,t)&&po.isAllowedByAdBreakType(e,t)&&po.isAllowedByMediaTargeting(e,t)&&po.isAllowedByPodTargeting(e,t)&&po.isAllowedByContextualTargeting(e,t)&&po.isAllowedByPlayerSizeTargeting(e,t)}Zk(e,t){var i=e.getAdDuration(),e=e.settings.adManagerLineItem.protoLineItem.skipMode,t=t.adBreakState.sessionMaxAdDuration;return po.isAllowedRegardingDuration(i,t)&&po.isAllowedRegardingSkippability(i,e,this.Yk)}t_(e,t){e=e.getAdDuration(),t=t.adBreakState.remainingAdDuration;return po.isAllowedRegardingDuration(e,t)}i_(e,t,i,s){return!s.isLineItemPlatformCapped(e.settings.adManagerLineItem.protoLineItem.advertiserLineItemId)&&i.canCall(e.settings.adManagerLineItem,t.adOpportunity.id)&&this.Kk(e.settings.adManagerLineItem,t)&&this.Zk(e,t)&&this.t_(e,t)}}class Oo extends Ao{getBestCallable(e,t){return this.e_(e,t.currentState||t.predictedState)}isBidTargetingAllowed(e,t,i,s){return this.i_(e,t,i,s)}isBidTargetingAllowedEverInSession(e,t){return this.Zk(e,t)}e_(e,t){if(t){var i=this.s_(e,t),e=this.n_(i);return e?{state:t,lineItemList:this.r_(e,i)}:void 0}}n_(e){let t=e;return e.some(e=>vr(e.protoLineItem.creativeType))&&(t=t.filter(e=>vr(e.protoLineItem.creativeType))),this.h_(t)[0]}h_(e=[]){return e.sort((e,t)=>this.getCallingYoScore(t.protoLineItem.advertiserLineItemId)-this.getCallingYoScore(e.protoLineItem.advertiserLineItemId))}s_(e,t){return e.filter(e=>this.Kk(e,t))}r_(e,t){const i=e.protoLineItem["creativeType"];return vr(i)?this.h_(t.filter(e=>i===e.protoLineItem.creativeType)):[e]}}class ko extends Ao{getBestBid(e,t){return this.a_(e,t)}getBetterBid(e,t){return this.getImpressionYoScore(e.settings.id)>this.getImpressionYoScore(t.settings.id)?e:t}a_(e,t){return[...e].sort((e,t)=>this.getImpressionYoScore(t.settings.id)-this.getImpressionYoScore(e.settings.id))[0]}}class Co extends Ao{constructor(){super(...arguments),this.o_=(e,t,i,s)=>{const r=[],n=[];for(const o of e)(this.i_(o,t.currentState||t.predictedState,i,s)?r:n).push(o);return{allowedBidList:r,notAllowedBidList:n}}}selectBestBid(e,t,i,s){const r=this.o_(e,t,i,s),{allowedBidList:n,notAllowedBidList:o}=r,a=t.currentState||t.predictedState,l=this.c_(n),c=o.map(e=>({bid:e,lossReason:this.u_(e,a)})),d=n.filter(e=>e!==l).map(e=>({bid:e,lossReason:f.ProtoAuctionLossReasonEnum.CompetitorPriority}));return{state:a,selectedBid:l,unselectedBidList:[...c,...d]}}isBetterBid(e,t){return this.getWinningYoScore(e.settings.id)>this.getWinningYoScore(t.settings.id)}c_(e){if(Object(p.h)(e))return[...e].sort((e,t)=>this.getWinningYoScore(t.settings.id)-this.getWinningYoScore(e.settings.id))[0]}u_(e,t){return this.t_(e,t)?f.ProtoAuctionLossReasonEnum.AdOpportunityEnd:f.ProtoAuctionLossReasonEnum.TargetingMismatch}}class wo{constructor(e){this.Jn=e,this.l_=new Ce,this.d_=!1,this.f_=!1,this.p_=null,this.b_=!1,this.v_=(e,t)=>this.Jn.yoScoreManager.getCallingYoScore(t.protoLineItem.advertiserLineItemId)-this.Jn.yoScoreManager.getCallingYoScore(e.protoLineItem.advertiserLineItemId),this.d_=e.locked,e.adBidPool.onBid.subscribe(()=>{this.d_||this.m_()})}get onAuctionEnd(){return this.l_.asObservable()}startAuction(e){this.f_=!1,0!==e||this.d_||null!==this.p_?this.m_()||(this.b_=!1,this.g_(),this.p_=setTimeout(()=>{this.b_=!0,this.d_||this.l_.next()},e)):this.l_.next()}lock(){this.d_=!0}unlock(){this.d_=!1,this.f_||(this.b_?this.l_.next():this.m_())}cancel(){this.f_=!0,this.g_()}g_(){clearTimeout(this.p_),this.p_=null}m_(){if(this.f_)return!1;this.Jn.adBidPool.bids.sort((e,t)=>this.Jn.yoScoreManager.getWinningYoScore(t.settings.id)-this.Jn.yoScoreManager.getWinningYoScore(e.settings.id));var e=this.Jn.adBidPool.bids[0];if(!e)return!1;this.Jn.adBidPool.callingLineItems.sort(this.v_);var t=this.Jn.adBidPool.callingLineItems[0],i=this.Jn.yoScoreManager.getWinningYoScore(e.settings.id),e=this.Jn.yoScoreManager.getCallingYoScore(null===t||void 0===t?void 0:t.protoLineItem.advertiserLineItemId);return(!t||e<=i)&&(this.l_.next(),this.g_(),!0)}}class xo{constructor(e){this.protoLineItem=e,this.allowedSlots=[],this.bids=new Set,this.callers=new Set,this.aggregators=new Set}}const Eo="cnx-ad-slot";class Lo{constructor(e,t){this.parentContainer=e,this.Ig=t,this.isImaSlot=!1,this.slotsContainer=this.Ig.createElementByString('<div class= "cnx-ad-bid-slot"></div>'),this.adSlot=this.Ig.createElementByString(`<div class="${Eo}"></div>`),this.videoSlot=this.Ig.createElementByString(`<video class="${Eo} cnx-ad-video-slot"></video>`),this.videoSlot.setAttribute("playsinline",""),this.videoSlot.setAttribute("webkit-playsinline",""),this.slotsContainer.appendChild(this.videoSlot),this.slotsContainer.appendChild(this.adSlot),this.parentContainer.appendChild(this.slotsContainer)}destroy(){this.parentContainer.removeChild(this.slotsContainer)}sanitize(){}}class Mo extends Lo{constructor(){super(...arguments),this.isImaSlot=!0,this.y_=!1,this.w_={imaAdDisplayContainer:void 0,imaAdsLoader:void 0,imaSdk:void 0}}fetchImaDependencies(){return Ls.fetchImaSdk(window,!0).then(e=>this.x_(e))}destroy(){this.w_.imaAdsLoader&&this.w_.imaAdsLoader.destroy(),this.w_.imaAdDisplayContainer&&this.w_.imaAdDisplayContainer.destroy(),super.destroy()}sanitize(){this.w_.imaAdsLoader.contentComplete(),super.sanitize()}x_(e){if(this.y_)return this.w_;e.settings.setDisableCustomPlaybackForIOS10Plus(!0);var t=this.S_(e),i=this.O_(e,t);return this.w_={imaSdk:e,imaAdDisplayContainer:t,imaAdsLoader:i},this.y_=!0,this.w_}S_(e){const t=new e.AdDisplayContainer(this.adSlot,this.videoSlot);return t.initialize(),t}O_(e,t){const i=new e.AdsLoader(t);return i.getSettings().setVpaidMode(e.ImaSdkSettings.VpaidMode.INSECURE),i}}class Ro{constructor(t){this.settings=t,this.k_=new Set,this.__=new Set,this.j_=[10,15,20],this.A_=0,Ls.preloadImaSdk(window);for(let e=1;e<=3;e++){const i=new Mo(t.slot,this.settings.globalDomUtilsService);i.fetchImaDependencies(),this.k_.add(i)}}requestAdSlot(e){e=new Lo(e,this.settings.globalDomUtilsService);return this.I_(e),this.C_(),e}requestAdSlotIma(e){let t=this.T_();return t=t||new Mo(e,this.settings.globalDomUtilsService),this.I_(t),this.C_(),t}destroyAdSlot(e){this.__.delete(e),e.destroy()}recycleAdSlot(e){this.__.delete(e),this.P_(e)?(e.sanitize(),this.k_.add(e)):this.destroyAdSlot(e)}P_(e){return e.isImaSlot}T_(){let t=null;return this.k_.forEach(e=>{this.P_(e)&&null===t&&(t=e)}),t}I_(e){this.k_.delete(e),this.__.add(e)}C_(){var e=this.k_.size+this.__.size;e===this.j_[this.A_]&&(this.M_(this.j_[this.A_]),e===this.j_[this.j_.length-1]&&this.j_.push(this.j_[this.j_.length-1]+20),this.A_++)}M_(e){Object(g.a)({message:"AdSlotContainerRecycler_slotcount",exception:`${e}`,callStack:"",level:f.ProtoLoggingLevelEnum.INFO,throttle:20,sendMaxLog:!0})}}function Bo(e){return[e-(e-e%100),e-e%100]}function jo(e,t=!1){if(t)return Math.random();var{successRate:i,cpm:t,priority:e}=e;0===i&&Math.random();return+t+R.f*e}class Do{constructor(e,t){this.E_=t,this.L_=this.R_(e)}registerBiddingInformation(e){var t=function(e){switch(e.creativeType){case f.ProtoCreativeTypeEnum.Tam:case f.ProtoCreativeTypeEnum.TamDeal:case f.ProtoCreativeTypeEnum.Rtb:return ns(e.obfuscatedPrice);case f.ProtoCreativeTypeEnum.HeaderBidder:return e.cpm;default:return e.floorPrice}}(e),{priority:i,successRate:s,lineItemId:r,bidId:n}=e,o=vr(e.creativeType)?jo({cpm:t,priority:i,successRate:s},this.E_):this.getCallingYoScore(e.lineItemId);this.B_(r,n,o)}registerPreBid(e){this.D_(e)}registerImpression(e,t){this.D_(e),vr(t)||this.F_(e)}registerPostBid(e,t,i){this.D_(e),vr(t)||i===Ss.c.Cancelled||this.U_(e)}getCallingYoScore(e){e=this.V_(e);return e?e.yoScore:0}getWinningYoScore(e){const t=this.N_(e);return t?t.bidMap.get(e):(Object(g.a)({message:"YoScoreManager_getWinningYoScore_error",exception:`bid was not yet registered: ${e}`,level:f.ProtoLoggingLevelEnum.WARNING}),0)}getImpressionYoScore(e){return this.getWinningYoScore(e)}U_(e){var t=this.N_(e);t&&(e=(e=Bo(t.yoScore))[1]+e[0]*R.g,this.H_(t,e))}F_(e){var t=this.N_(e);t&&(e=(e=Bo(t.yoScore))[1]+e[0]*R.h,this.H_(t,e))}H_(e,t){e&&(e.yoScore=t)}B_(e,t,i){const s=this.V_(e);s&&(e=this.q_(s),!this.E_||s.bidMap.has(t)||-1===e?this.z_(s,t)&&s.bidMap.set(t,i):s.bidMap.set(t,e))}q_(e){e=[...e.bidMap.values()];return Object(p.h)(e)?e[0]:-1}z_(e,t){return!this.E_||!e.bidMap.has(t)}R_(e){return e.map(e=>{var{floorPrice:t,lineItemPriority:i,successRate:s,advertiserLineItemId:r,creativeType:e}=e;return{lineItemId:r,yoScore:vr(e)?Math.random():jo({cpm:t,priority:i,successRate:s},this.E_),bidMap:new Map}})}V_(t){return this.L_.find(e=>e.lineItemId===t)}N_(t){return this.L_.find(e=>e.bidMap.has(t))}D_(e){if(e){const t=this.N_(e);t&&0!==t.bidMap.size&&t.bidMap.delete(e)}}}(Hn=go=go||{})[Hn.Default=0]="Default",Hn[Hn.Prefetch=1]="Prefetch";class _o{constructor(e,t){this.W_=e,this.co=t,this.G_=new Map}bidIsNotWinnableEverInSession(e){var t;this.J_(e)&&(t=[...this.Q_(),this.X_(e)],t=this.Y_(t),this.K_(e.settings.requestMetadata.data.cnxBidId,t,f.ProtoAuctionLossReasonEnum.TargetingMismatch))}newBidAdded(e,t){this.J_(e)&&(!t.selectedBid||t.selectedBid!==e?this.Z_(e,t):this.tj(e))}winBid(e){var t;this.J_(e)&&(t=this.Q_(),t=this.Y_(t),this.G_.set(e,t))}onPostBid(e){return this.ij(e)}onImpression(e){return this.ij(e)}J_(e){return e.settings.requestMetadata.data.logAuctionInformation}tj(e){var t=e.settings.requestMetadata.data["cnxBidId"],e=this.Q_(),e=this.Y_(e);this.K_(t,e,f.ProtoAuctionLossReasonEnum.CompetitorPriority)}ij(e){var t=this.ej(e);return this.sj(e),t}Z_(e,t){var i=e.settings.requestMetadata.data["cnxBidId"],s=this.Q_(),r=this.nj(e,t),s=this.Y_(s);Object(A.a)(r)?this.K_(i,s,r):this.rj("AdManager_AuctionInfoLogging_lossReason_cannot_be_found",e.settings.requestMetadata.data.cnxBidId,null===(t=null===(t=null===(t=null===(t=t.selectedBid)||void 0===t?void 0:t.settings)||void 0===t?void 0:t.requestMetadata)||void 0===t?void 0:t.data)||void 0===t?void 0:t.cnxBidId)}ej(e){if(this.G_.has(e))return this.G_.get(e);this.J_(e)&&this.rj("AdManager_AuctionInfoLogging_cannot_find_win_bid_snapshot",e.settings.requestMetadata.data.cnxBidId)}sj(e){this.G_.has(e)&&this.G_.delete(e)}nj(t,e){return null===(e=e.unselectedBidList.find(e=>e.bid===t))||void 0===e?void 0:e.lossReason}getGeneralPostbidReason(e){switch(e){case Ss.c.ImaScriptFailure:case Ss.c.ImaObjectNotFound:case Ss.c.ImaManagerInit:case Ss.c.ImaInitSdkError:case Ss.c.AdxOverlayGptScriptLoad:case Ss.c.DisplayIntegratorIframeLoad:return f.ProtoAuctionPostbidReasonEnum.SDKFailure;case Ss.c.VastUnsupportedMedia:case Ss.c.CnxMediaSrcNotSupported:return f.ProtoAuctionPostbidReasonEnum.UnsupportedMedia;case Ss.c.DomainBlocked:return f.ProtoAuctionPostbidReasonEnum.TargetingMismatch;case Ss.c.AdaptorInitAdError:case Ss.c.AdaptorStartAdError:case Ss.c.WrapperInitAdError:case Ss.c.WrapperStartAdError:return f.ProtoAuctionPostbidReasonEnum.TargetingMismatch;default:return f.ProtoAuctionPostbidReasonEnum.CreativeError}}Q_(){return this.W_.getAllBids().map(e=>this.X_(e)).sort((e,t)=>t-e)}X_(e){switch(e.settings.adManagerLineItem.protoLineItem.creativeType){case f.ProtoCreativeTypeEnum.Rtb:case f.ProtoCreativeTypeEnum.Tam:case f.ProtoCreativeTypeEnum.TamDeal:return ns(e.settings.obfuscatedPrice);case f.ProtoCreativeTypeEnum.HeaderBidder:return e.settings.cpm;default:return e.settings.adManagerLineItem.protoLineItem.floorPrice||e.settings.adManagerLineItem.protoLineItem.customCpm}}Y_(e){var t=e[0]?e[0]/2-41:void 0,i=e[1]?e[1]/2-41:void 0;return t||this.rj("AdManager_AuctionInfoLogging_highestBidPrice_missing",`${t}`),{bidDensity:e.length,highestObfuscatedBidPrice:t,secondHighestObfuscatedBidPrice:i}}K_(e,t,i){this.co.trackAuctionInfoForBid({cnxBidId:e,auctionInformation:t,auctionLossReason:i})}rj(e,t="",i=""){Object(g.a)({message:e,level:f.ProtoLoggingLevelEnum.FATAL,throttle:5,callStack:t,exception:i})}}class Fo{constructor(e){this.Jn=e,this.hj=!1,this.aj=!1,this.Vc=[],this.oj=null,this.cj=!1,this.tm=new Ce,this.uj=new Ce,this.lj=!1,this.dj=new as,this.fj=new kn,this.Jn.app.services.TrackingService.addPlatformCappedLineItemSubscriber(this),this.Jn.app.services.TrackingService.setImpressionRevenueSubscriber(this),this.Jn.app.services.TrackingService.startBidRequests();var t=this.Jn.lineItemList.map(e=>new xo(e)),i=new Do(this.Jn.lineItemList,this.Jn.app.config.explorationMode);this.pj=new gn,this.bj=new dn,this.vj=new un,this.mj=new pn,this.ov=new mn(this.Jn.adContainerMap,this.Jn.app.services.ResizeObserver,this.Jn.app.services.ViewabilityService,R.e);e=new Ro({globalDomUtilsService:this.Jn.app.services.GlobalDomUtilsService,recycleAdSlots:!0,slot:this.ov.getContainerMap().get(f.ProtoAdType.Video)});this.W_=new ls,this.gj=new _o(this.W_,this.Jn.app.services.TrackingService),this.yj=new wo({adBidPool:this.W_,locked:!0,yoScoreManager:i}),this.Dw=new os,this.Rw=new An(this.Jn.app.services.MacrosService,this.Jn.app.services.UserManagerService),this.wj=new on({adBidPool:this.W_,adCallerYo:new Oo(i,this.Jn.skipPlayerSettings),auctionInfoLogging:this.gj,adContainerMap:this.ov.getContainerMap(),adMacroReplacer:this.Rw,amazonSlotId:this.Jn.amazonTamSlotId,app:this.Jn.app,isOutstream:this.Jn.outstream,lineItemList:t,schainSettings:this.Jn.pbjsSchainSettings,skipAdSettings:this.Jn.skipPlayerSettings,trackingService:this.Jn.app.services.TrackingService,lineItemServices:{impressionCapsService:this.bj,lineItemServicesTimer:this.pj,requestCapsService:this.vj,timeBetweenRequestsService:this.mj},adRequestGatekeeper:this.Dw,platformCappedLineItemRepo:this.dj,adEnforcer:new Sn(this.Jn.app.config.isMobile,Object(S.t)(this.Jn.adContainerMap.get(f.ProtoAdType.Video)),this.Jn.disableScrollHijackEnforcement),pauseAdWhenFinished:this.Jn.pauseAdWhenFinished,loopAdWhenFinished:this.Jn.loopAdWhenFinished,os:this.Jn.app.config.os.os,adSlotContainerRecycler:e}),this.xj=new So({adBidPool:this.W_,adWinnerYo:new Co(i,this.Jn.skipPlayerSettings),auctionInfoLogging:this.gj,desiredBitRateForWins:1,maxNumberOfWins:-1,trackingService:this.Jn.app.services.TrackingService,impressionCapsService:this.bj,impressionCapsTimer:this.pj,platformCappedLineItemRepo:this.dj,adMacroReplacer:this.Rw,playerId:this.Jn.app.config.playerId}),this.Sj=new In({adBidPool:this.W_,adImpressionerYo:new ko(i,this.Jn.skipPlayerSettings),auctionInfoLogging:this.gj,impressionCapsService:this.bj,impressionCapsTimer:this.pj,requestCapsService:this.vj,playerSkippability:this.Jn.skipPlayerSettings.adSkippability,removeBidIfHigherYoScore:!1,trackingService:this.Jn.app.services.TrackingService,adRequestGatekeeper:this.Dw,pauseAdWhenFinished:this.Jn.pauseAdWhenFinished,loopAdWhenFinished:this.Jn.loopAdWhenFinished,adMacroReplacer:this.Rw,explorationMode:this.Jn.app.config.explorationMode,playerId:this.Jn.app.config.playerId}),this.Vc.push(this.yj.onAuctionEnd.subscribe(()=>{this.hj=!0,this.Oj()}),this.ov.onContainerStateUpdate.subscribe(()=>{var e,t,i;this.oj&&({width:e,height:t,viewability:i}=this.kj(),this._j(i),this.oj.resizeAd(e,t,this.jj)),this.aj&&this.Aj(),this.hj&&this.Oj()}),this.Sj.onAdSelected.subscribe(e=>{this.oj=e,this.Ij(),e.setAdVolume(this.Cj.sound)}),this.Sj.onAdFinished.subscribe(e=>{this.Tj()}),this.W_.onBidReady.subscribe(e=>{this.lj&&(this.wj.stop(),this.aj=!1)}));const s=this.wj.onFirstAggregatedBatchFinished.subscribe(()=>{this.yj.unlock(),s.unsubscribe()})}get onVpaidEvent(){return this.tm.asObservable()}get onImpressionRevenueEvent(){return this.uj.asObservable()}setAdVolume(e){this.oj&&(this.Pj(e),this.oj.setAdVolume(e))}setAdViewMode(e){var t,i;this.oj&&(this.jj=e,{width:t,height:i}=this.kj(),this.oj.resizeAd(t,i,e))}stopAd(e){this.oj&&this.oj.stopAd(e)}pauseAd(e){this.oj&&this.oj.pauseAd(),e&&this.fj.pauseViaUserInteraction()}resumeAd(e){this.oj&&this.oj.resumeAd(),e&&this.fj.resumeViaUserInteraction()}skipAd(){this.oj&&(this.oj.setAdVolume(0),this.oj.skipAd())}getCurrentAdMetadata(){if(this.oj)return{advertiserLineItemId:this.oj.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:this.oj.settings.adManagerLineItem.protoLineItem.publisherLineItemId,adType:this.oj.settings.adManagerLineItem.protoLineItem.adType,duration:this.oj.getAdDuration(),adSkipMode:this.oj.settings.adManagerLineItem.protoLineItem.skipMode,moatTrackingEnabled:this.oj.settings.adManagerLineItem.protoLineItem.moatTrackingEnabled}}enableImpressions(e){this.disablePredict(),this.lj=!1,this.Mj(e),this.Cj=e,this.Ej||(this.Ej=this.Cj),this.vj.allowResetOnTime=!0,this.ov.forceTriggerUpdateState(),this.Lj(e),this.aj=!0,this.Aj(),e.adOpportunity&&!e.adOpportunity.startedAuctionWithTimeout&&e.adOpportunity.startAuctionWithTimeout(),this.yj.startAuction(0)}disableImpressions(){this.hj&&(this.yj.cancel(),this.Sj.stop(),this.wj.stop(),this.hj=!1,this.aj=!1,this.oj&&!this.cj&&this.Jn.app.config.isInApp&&this.oj.stopAd("inApp_disable"))}enablePredict(e,t){if(!(0<this.W_.bidsReady.length)){switch(this.Cj=null,this.lj=!0,this.Ej=e,this.Ej.predictType=t){case go.Prefetch:this.vj.allowResetOnTime=!1;break;case go.Default:this.vj.allowResetOnTime=!0}this.aj=!0,this.Aj()}}disablePredict(){this.lj&&(this.wj.stop(),this.aj=!1)}setPlatformCappedLineItemIdList(e){this.dj.addPlatformCappedLineItemIdList(e)}notifyImpressionRevenue(e){this.uj.next(e)}getAdMediaSize(){if(this.oj){var e=this.oj.getAdMediaSize().width,t=this.oj.getAdMediaSize().height,{widthRatio:i,heightRatio:s}=Object(Te.b)(e,t);return{width:e,height:t,widthRatio:i,heightRatio:s,adType:this.oj.settings.adManagerLineItem.protoLineItem.adType}}}destroy(){this.disableImpressions(),je(this.Vc),this.wj.destroy(),this.xj.destroy(),this.Sj.destroy(),this.pj.destroy(),this.oj&&(this.Rj(),this.oj.stopAd("adManagerDestroy"),this.Tj()),this.Jn.app.services.TrackingService.removePlatformCappedLineItemSubscriber(this),this.Jn.app.services.TrackingService.unsubscribeToImpressionRevenue(this)}isLoadingAds(){return!!this.oj||!!this.xj.isLoadingBids()}Oj(){(this.Cj||this.Ej)&&this.Cj&&this.Sj.start(this.Bj(this.Cj))}Aj(){this.wj.call(this.Dj()),this.xj.win(this.Fj())}Dj(){return{maxParallelCalls:5,stateSettings:{currentState:this.Bj(this.Cj),predictedState:this.$j(this.Ej)}}}Fj(){return{desiredBitRate:1,maxParallelWins:10,vastViewMode:(this.Cj||this.Ej).vastViewMode,stateSettings:{currentState:this.Bj(this.Cj),predictedState:this.$j(this.Ej)}}}$j(e){if(e){let i;return e.predictType===go.Prefetch?(i=new Map,this.ov.getContainerStateMap().forEach((e,t)=>{i.set(t,Object.assign(Object.assign({},e),{viewability:!0}))})):i=this.ov.getContainerStateMap(),{clickToPlay:e.clickToPlay,media:e.mediaMetada,sound:!!e.sound,soundValue:e.sound,adContainerState:i,adBreakState:e.adBreakState,adOpportunity:e.adOpportunity}}}Bj(e){if(e)return{clickToPlay:e.clickToPlay,media:e.mediaMetada,sound:!!e.sound,soundValue:e.sound,adContainerState:this.ov.getContainerStateMap(),adBreakState:e.adBreakState,adOpportunity:e.adOpportunity}}Ij(){var e;this.tm.next({type:v.b.AdLoaded,payload:null===(e=this.oj.settings.adLoadedPayload)||void 0===e?void 0:e.payload}),this.Uj=this.oj.onVpaidEvent.subscribe(e=>{if(e.type===v.b.AdImpression){this.cj=!0;const e=this.kj()["viewability"];this._j(e)}this.tm.next(e)})}kj(){return this.ov.getContainerStateMap().get(this.oj.settings.adManagerLineItem.protoLineItem.adType)}Rj(){this.Uj&&(this.Uj.unsubscribe(),this.Uj=null)}Tj(){this.cj=!1,this.fj.onAdRemoved(),this.oj=null,this.Rj()}_j(e){this.fj.checkPauseAd(this.oj,e)}Lj(e){const t=[this.bj,this.vj];e.newContent&&t.forEach(e=>{e.resetCapsBasedOnExternalEvent(f.ProtoResetCapTypeEnum.ContentCapping)})}Pj(e){var t=this.oj.getAdVolume();let i=null;0===t&&0<e?i=this.oj.settings.trackers.adUnmute:0<t&&0===e&&(i=this.oj.settings.trackers.adMute),i&&us.track(i,this.Rw,this.oj.settings.adManagerLineItem.protoLineItem,this.Bj(this.Cj||this.Ej))}Mj(e){var t=this.Jn.app.config["playerId"],i=e["adOpportunity"],e=e.adBreakState["adBreakType"];i&&e===f.ProtoAdBreakTypeEnum.PreRoll&&Hr.initialize(t),e!==f.ProtoAdBreakTypeEnum.PreRoll&&Hr.log(t)}}class Uo{constructor(){this.Vj=Object(Je.c)(),this.Nj=!1}get id(){return this.Vj}get startedAuctionWithTimeout(){return this.Nj}startAuctionWithTimeout(){this.Nj=!0}}const No={[f.ProtoAdSlotsEnum.PreRoll]:f.ProtoAdBreakTypeEnum.PreRoll,[f.ProtoAdSlotsEnum.MidRoll]:f.ProtoAdBreakTypeEnum.MidRoll,[f.ProtoAdSlotsEnum.PostRoll]:f.ProtoAdBreakTypeEnum.PostRoll};class Vo extends n.a{constructor(e,t,i,s,r,n=!1,o,a,l,c,d,h,u,p,g){super(),this.mediator=e,this.Hj=t,this.qj=i,this.Yk=s,this.Kb=r,this.zj=n,this.Yb=a,this.Ax=l,this.Wj=d,this.Ng=h,this.Gj=u,this.hl=p,this.Vg=g,this.Vc=[],this.Jj=!1,this.Qj=!1,this.Bw=new Map,this.Xj=!1;let m=f.ProtoAdBreakTypeEnum.MidRoll;this.hl.forEach(e=>{e.types.some(e=>e===f.ProtoAdBreakTypeEnum.PreRoll)&&(m=f.ProtoAdBreakTypeEnum.PreRoll)});g=this.Yj(this.Yb.getMaxAdSlotDuration(),m);this.Cj={mediaMetada:{},clickToPlay:!1,adOpportunity:new Uo,newContent:!1,sound:0,vastViewMode:v.a.Normal,adBreakState:g}}get adInWin(){return this.hv.isLoadingAds()}enableAds(){this.Jj=!0,this.Kj(),this.mediator.publish(this,w.AdsEnabled)}disableAds(e){this.Jj=!1,this.hv&&(this.hv.disableImpressions(),this.Xj||e!==be.TimeoutBetweenAds||this.hv.enablePredict(this.Cj,go.Default))}updateFilterConfig(e){this.Cj.mediaMetada.mediaId=e.mediaId,this.Cj.mediaMetada.mediaLanguage=e.mediaLanguage,this.Cj.mediaMetada.mediaKeywords=e.mediaKeywords;e=Object.assign(this.Cj.mediaMetada,e);this.Kj({mediaMetada:e})}userInteraction(e){this.Kj({clickToPlay:!0})}newAdOpportunity(){this.Kj({adOpportunity:this.Xj?this.Cj.adOpportunity:new Uo}),this.Zj()}initAd(e,t,i,s,r,n){n.forEach(e=>{this.Bw.set(e.type,e.container),this.Bw.get(f.ProtoAdType.Overlay)||this.Bw.set(f.ProtoAdType.Overlay,this.Bw.get(f.ProtoAdType.Video))}),this.av(),this.Qj=!0,this.Kj({sound:r})}setAdVolume(e){var t;null===(t=this.hv)||void 0===t||t.setAdVolume(e),this.Kj({sound:e})}resizeAd(e,t,i){var s;this.tA!==i&&(this.setVastViewMode(i),null===(s=this.hv)||void 0===s||s.setAdViewMode(i))}stopAd(e){var t;null===(t=this.hv)||void 0===t||t.stopAd(e)}pauseAd(e){var t;null===(t=this.hv)||void 0===t||t.pauseAd(e)}resumeAd(e){var t;null===(t=this.hv)||void 0===t||t.resumeAd(e)}skipAd(){var e;null===(e=this.hv)||void 0===e||e.skipAd()}getAdMediaSize(){var e;return null===(e=this.hv)||void 0===e?void 0:e.getAdMediaSize()}getCurrentAdClickTrackingProperties(){var{publisherLineItemId:e,advertiserLineItemId:t}=null===(t=this.hv)||void 0===t?void 0:t.getCurrentAdMetadata();return{publisherLineItemId:e,advertiserLineItemId:t}}getAdDuration(){return this.hv.getCurrentAdMetadata().duration}getCurrentAdType(){return this.hv.getCurrentAdMetadata().adType}getLastAdSlot(e){e=this.Bw.get(e);return{height:e.clientHeight,width:e.clientWidth}}updatePodRemainingTime(e){var t;e<=0||(t=this.Cj.adBreakState,Math.round(e/B.f)>t.remainingAdDuration||this.Kj({adBreakState:this.Yj(e,t.adBreakType)}))}onAdStateChange(e,t){e=No[e];this.Kj({adBreakState:this.Yj(t,e)})}onContentChange(){this.Kj({newContent:!0})}setVastViewMode(e){this.tA=e,this.iA({vastViewMode:e})}destroy(){je(this.Vc)}Kj(e){this.iA(e),this.Jj&&this.Qj&&(this.hv.enableImpressions(this.Cj),this.eA())}iA(e){Object.assign(this.Cj,e),this.Cj.adBreakState=this.Yj(this.Cj.adBreakState.remainingAdDuration,this.Cj.adBreakState.adBreakType)}eA(){this.iA({clickToPlay:!1,newContent:!1})}Yj(e,t){return{isAdPodBreak:this.Yb.isCurrentBreakInPod(),adPodSlotIndex:this.Yb.isCurrentBreakInPod()?this.Yb.getNextSlotIndex():0,maxAdDuration:Math.round(this.Yb.getMaxAdSlotDuration()/B.f||180),remainingAdDuration:Math.round(e/B.f),sessionMaxAdDuration:Math.round(this.Yb.getMaxAdSlotPossibleDuration()/B.f),adBreakType:t}}av(){this.hv=new Fo({adBreakHelper:this.Yb,adContainerMap:this.Bw,amazonTamSlotId:this.Ax,app:this.Kb,lineItemList:this.Hj.lineItems,outstream:this.zj,pbjsSchainSettings:this.qj,prerollTimeMs:this.Wj,skipPlayerSettings:this.Yk,disableScrollHijackEnforcement:!this.Hj.disableScrollHijackEnforcement,pauseAdWhenFinished:this.Ng,loopAdWhenFinished:this.Vg}),this.Vc.push(this.hv.onVpaidEvent.subscribe(e=>{switch(e.type){case v.b.AdLoaded:this.sA(e);break;case v.b.AdImpression:this.nA(e);break;case v.b.AdVideoStart:case v.b.AdError:this.mediator.publish(this,e.type,{payload:e.payload});break;default:this.mediator.publish(this,e.type,{payload:{}})}})),this.hv.onImpressionRevenueEvent.subscribe(e=>{this.mediator.publish(this,O.b.ImpressionPrice,{payload:e})}),this.Gj===f.ProtoAdPlaybackMode.ScrollToPlay&&this.rA()}rA(){this.Xj=!0,this.hv.enablePredict(this.Cj,go.Prefetch)}Zj(){this.Xj=!1}sA(e){var t={payload:{adSkipMode:e.payload.adSkipMode,adLoadedData:{skipOffset:e.payload.adLoadedData.skipOffset}}};this.mediator.publish(this,e.type,t)}nA(e){var{adId:t,adVideoUrl:i,creativeId:s,name:r,length:n,imaMetadata:o,moatTrackingEnabled:a}=e.payload.adSourceData,l=this.hv.getCurrentAdMetadata(),l={payload:{adSkipMode:e.payload.adSkipMode,adSourceData:{moatTrackingEnabled:a,adId:t,length:n,imaMetadata:o,adVideoUrl:i,creativeId:s,name:r},clickThroughUrl:e.payload.clickThroughUrl,customAdData:{ADVERTISER:null===(r=e.payload.customAdData)||void 0===r?void 0:r.ADVERTISER,CAMPAIGN_ID:null===(r=e.payload.customAdData)||void 0===r?void 0:r.CAMPAIGN_ID,CREATIVE_ID:e.payload.customAdData.CREATIVE_ID},adDuration:e.payload.adSourceData.length,selectedAdSlot:this.Bw.get(l.adType)}};this.mediator.publish(this,e.type,l)}}const Ho={OrientationPortrait:"cnx-in-ps-portrait",OrientationLandscape:"cnx-in-ps-landscape"},qo={Container:"cnx-playspace-container",Content:"cnx-playspace-content",Footer:"cnx-playspace-footer",Slider:"cnx-playspace-slider",Slide:"cnx-playspace-slide-container",Overlay:"cnx-ui-click-to-play-overlay",ImageWrapper:"cnx-ui-ps-image-wrapper",ImageBackground:"cnx-ui-ps-image-background",MediaLogo:"cnx-is-media-logo"},Wo={VideoSizeSlot:"cnx-ad-video-size-slot"},$o={Main:"cnx-top-title",LogoContainer:"cnx-top-title-logo-container",Logo:"cnx-top-title-logo",LogoPortrait:"cnx-top-title-logo-portrait",LogoLandscape:"cnx-top-title-logo-landscape",LogoAnimation:"cnx-top-title-logo-animation",TitlesContainer:"cnx-top-title-text-container",TopStoryTitle:"cnx-top-title-story-text",TopSlideTitle:"cnx-top-title-slide-text",TextPlaceholder:"cnx-top-title-highlight-text-placeholder",Text:"cnx-top-title-highlight-text",TextOuterContainer:"cnx-top-title-highlight-text-outer-container",TextInnerContainer:"cnx-top-title-highlight-text-inner-container",SlideIn:"cnx-top-title-slide-in",SlideOut:"cnx-top-title-slide-out",SlideDown:"cnx-top-title-slide-down",SlideInitial:"cnx-top-title-slide-initial"};class Go extends Ki{constructor(e,t,i,s,r,n){super(e,t,i,s,r,n)}getNewAdManager(){var e={adSkippability:this.lh.adSkippability,skipAdAfter:this.lh.skipAdAfter,adsMustBeSkippableIfLongerThan:this.lh.adsMustBeSkippableIfLongerThan};return new Vo(this,this.lh.lineItemSettings,this.lh.supplyChainSettings,e,this.Kb,!1,this.lh.adSkippability,this.Yb,this.lh.amazonTamSlotId,this.lh.global,this.lh.preRollBreak,this.lh.pauseAdWhenFinished,this.lh.adPlaybackMode,this.lh.adBreaks,this.lh.loopAdWhenFinished)}av(e,t,i){this.hv.initAd(e,t,this.rv,1,i,[{container:this.ov,width:this.ov.offsetWidth,height:this.ov.offsetHeight,type:f.ProtoAdType.Overlay},{container:this.hA,width:this.hA.offsetWidth,height:this.hA.offsetHeight,type:f.ProtoAdType.Video}])}Ov(){this.uv=new $i(this,this.Kb.services.GlobalDomUtilsService,this.Kb.services.ViewabilityService,this.Kb.services.InteractionService,this.Qb,(new zi).template),this.uv.hide()}aA(){this.hA=this.xv(Wo.VideoSizeSlot),this.wv(this.hA),this.Zb.push(this.hA)}Sv(){super.Sv(),this.aA()}fv(e){super.fv(e),e===this.hA&&Object(S.a)(this.Qb,l.g.AdFullSize)}mv(){super.mv(),this.subscribe(P[P.SkipAd],this.uv,()=>this.oA())}oA(){this.skipAd(),this.userInteraction(!0)}updateContinueReadingCard(){var e=this.hv.getAdMediaSize();Object(A.a)(e)&&(this._v(this.hv.getAdMediaSize())?this.uv.showContinueReadingCard(this.ov):this.uv.hideContinueReadingCard(this.ov))}}const zo={ProgressBarItemClicked:"progressBarItemClicked",CallToAction:"callToAction",CloseButtonClicked:"closeButtonClicked",GeneralClickInteraction:"generalClickInteraction"},Jo={ChangeSlide:"changeSlide",ContentStart:"contentStart",ContentComplete:"contentComplete",LayoutChanged:"layoutChanged"},Ko=Object.assign(Object.assign({},o.a),{ContentHandlerReady:"contentHandlerReady",NewStory:"newStory",ContentStart:"ContentStart",ContentEnd:"ContentEnd"}),Qo={SlideTransitionStart:"slideTransitionStart",SlideChanged:"slideChanged",SlideTransitionEnd:"slideTransitionEnd",SlideTimeUpdate:"slideTimeUpdate",SlideCycleEnd:"slideCycleEnd"},Yo=Object.assign(Object.assign({},Jo),zo);class Xo{constructor(e,t=0){this.cA=e,this.setCurrentSlide(t)}uA(e=this.cA.indexOf(this.lA)){return Ge(this.cA,e)}get currentSlide(){return this.lA}getCurrentThumbnailUrlParams(e,t){return this.lA.media.getThumbnailUrlParams(e,t)}getCurrentMetadata(){return this.lA.metadata}setCurrentSlide(e){this.lA=this.cA[e]}get currentSlideIndex(){return this.uA().currentIndex}get nextSlideIndex(){return this.uA().nextIndex}get prevSlideIndex(){return this.uA().prevIndex}get firstSlideIndex(){return this.uA().firstIndex}get lastSlideIndex(){return this.uA().lastIndex}get slides(){return this.cA}get nextSlide(){return this.slides[this.nextSlideIndex]}get prevSlide(){return this.slides[this.prevSlideIndex]}getAdjacentSlides(s=this.uA().currentIndex){const r=[];for(let e=0,t=s,i=s;e<2;e++)t=this.uA(t).nextIndex,i=this.uA(i).prevIndex,r.push(this.cA[i],this.cA[t]);return Object(p.n)(r)}}(Hn=mo=mo||{})[Hn.Right=0]="Right",Hn[Hn.Left=1]="Left";class Zo extends n.a{constructor(e,t){super(),this.mediator=e,this.dA=t,this.inTransition=!1,this.fA=0,this.pA=null,this.bA=!1,this.vA=400,this.mA=!0,this.gA=()=>{clearTimeout(this.pA),this.pA=null,this.bA=!1,this.yA(),this.fA=this.wA(this.xA),this.mediator.publish(this,Qo.SlideTransitionEnd),this.SA()},this.OA=e=>{e.stopPropagation(),e.target.parentElement===this.dA&&this.kA()&&(this.pA=setTimeout(()=>{this.bA&&this._A()},this.vA))},this.jA=e=>{e.stopPropagation(),e.target.parentElement===this.dA&&this.inTransition&&this.bA&&this.kA()&&this._A()},this.AA=Object(p.c)(this.dA.childNodes),this.dA.addEventListener("transitionstart",this.OA),this.dA.addEventListener("transitionend",this.jA)}destroy(){clearTimeout(this.pA),this.pA=null,this.dA.removeEventListener("transitionend",this.jA),this.dA.removeEventListener("transitionstart",this.OA)}setCurrentSlide(e,t,i=!0){this.xA=e,(i=!this.mA?!1:i)&&!this.IA(this.xA)&&this.CA()&&this.mA?this.inTransition||(this.fA<this.wA(this.xA)?this.TA(t):this.TA(mo.Left)):this.PA()}offsetSlides(e,t){this.inTransition||(Object(S.a)(t,l.r.NextSlide),this.yA(),this.MA(e))}removeNextClass(e){e.forEach(e=>{Object(S.L)(e,l.r.NextSlide)})}cleanLastSlide(e,t){Object(S.N)(e,"transform"),Object(S.L)(t,l.r.NextSlide)}setAnimationAllowed(e){this.mA=e}MA(e){Object(S.Q)(this.EA(),{transform:`translate(${e}px)`})}PA(){Object(S.L)(this.EA(),l.r.CurrentSlide,l.r.SlideLeft,l.r.SlideRight),this.LA(this.wA(this.xA)),Object(S.a)(this.xA,l.r.CurrentSlide),this.gA()}TA(e){this.LA(this.wA(this.xA)),this.RA(),Object(S.a)(this.xA,l.r.NextSlide),e===mo.Right?(Object(S.a)(this.xA,l.r.CurrentSlide),Object(S.a)(this.EA(),l.r.SlideLeft)):e===mo.Left&&(Object(S.a)(this.xA,l.r.CurrentSlide),Object(S.a)(this.EA(),l.r.SlideRight)),Object(S.N)(this.EA(),"transform")}IA(e){return e===this.EA()}SA(){this.mediator.publish(this,Qo.SlideChanged)}LA(e){this.bA=!0,this.mediator.publish(this,Qo.SlideTransitionStart,{payload:{nextIndex:e}})}CA(){return Object(A.a)(this.EA())}wA(e){return Object(S.k)(e,this.dA)}EA(){return this.AA[this.fA]}RA(){this.BA(),this.DA()}yA(){this.FA(),this.$A()}$A(){Object(S.a)(this.dA,l.h.NoTransition)}BA(){Object(S.L)(this.dA,l.h.NoTransition)}FA(){this.inTransition=!1}DA(){this.inTransition=!0}UA(){Object(S.L)(this.EA(),l.r.CurrentSlide,l.r.SlideLeft,l.r.SlideRight),Object(S.O)(this.xA,l.r.NextSlide,l.r.CurrentSlide)}_A(){this.UA(),this.gA()}kA(){return Object(S.u)(this.EA(),l.r.SlideLeft)||Object(S.u)(this.EA(),l.r.SlideRight)}}class ea extends n.a{constructor(e,t,i,s,r,n){super(),this.mediator=e,this.Ig=t,this.VA=i,this.NA=s,this.HA=r,this.qA=n,this.zA=!1,this.WA=[],this.GA=!1,this.JA=()=>{this.goToNextSlide()},this.QA=()=>{this.mediator.publish(this,Qo.SlideTimeUpdate,{payload:{elapsedTime:this.Tw.timeElapsed,duration:this.XA.currentSlide.media.duration}})},this.YA=this.Ig.createElementByString(`<cnx class="${qo.Slider}"></cnx>`),this.NA.appendChild(this.YA),this.KA()}ZA(){this.VA.on(e=>{this.GA=e,this.tI.setAnimationAllowed(e)})}iI(e=mo.Right){this.tI.setCurrentSlide(this.XA.currentSlide.$container,e)}eI(){let e;this.XA.currentSlide.load(),(e=this.qA?[...this.XA.slides]:[...this.XA.getAdjacentSlides()]).forEach(e=>e.load())}sI(){this.tI=new Zo(this,this.YA),this.subscribe(Qo.SlideTransitionStart,this.tI,({payload:{nextIndex:e}})=>{this.GA&&this.Tw.disable(),this.mediator.publish(this,Qo.SlideTransitionStart,{payload:{nextSlide:this.XA.slides[e]}})}),this.subscribe(Qo.SlideChanged,this.tI,()=>{this.Tw.reset(this.XA.currentSlide.media.duration),this.XA.slides.forEach(e=>e.media.reset());var e={payload:{index:this.XA.currentSlideIndex}};this.mediator.publish(this,Qo.SlideChanged,e),this.zA?this.XA.currentSlide.media.play():this.pause()}),this.subscribe(Qo.SlideTransitionEnd,this.tI,()=>{this.mediator.publish(this,Qo.SlideTransitionEnd)})}KA(){this.Tw=new Be(0,100),this.Tw.onTimeElapsed.subscribe(this.JA),this.Tw.onTimeUpdate.subscribe(this.QA)}nI(e){this.WA=e;const t=this.rI(e),i=e.map(e=>{e=this.HA.getSlide(e,this,t);return this.subscribe(zo.CallToAction,e,()=>{this.mediator.publish(this,zo.CallToAction)}),this.relay(zo.GeneralClickInteraction,e,this,this.mediator),this.subscribe(P[P.Next],e,()=>{this.mediator.publish(this,P[P.Next])}),e});this.XA=new Xo(i),this.Tw.reset(this.XA.currentSlide.media.duration),this.YA.innerHTML="",this.XA.slides.forEach(e=>{Object(S.d)(e.$container,this.YA),this.relay($e.Change,e.media,this,this.mediator)})}rI(e){e=e.map(e=>e.slideDuration).reduce((e,t)=>e+t,0);return Object(A.e)(e)?Math.ceil(e/B.g):1}hI(){var e=this.XA.getAdjacentSlides().map(e=>e.$container);this.tI.removeNextClass(e)}aI(e){return(0<e?this.XA.prevSlide:this.XA.nextSlide).$container}getNextSlide(){return this.XA.nextSlide}setCurrentSlide(e,t){this.tI.inTransition||(this.XA.currentSlide&&this.XA.currentSlide.media.pause(),this.XA.setCurrentSlide(e),this.eI(),this.iI(t))}getCurrentSlide(){if(this.XA)return this.XA.currentSlide}getCurrentThumbnailUrlParams(e,t){if(this.XA)return this.XA.getCurrentThumbnailUrlParams(e,t)}getCurrentMetadata(){if(this.XA)return this.XA.getCurrentMetadata()}goToNextSlide(){if(this.XA.currentSlideIndex===this.XA.lastSlideIndex)return this.tI.cleanLastSlide(this.getCurrentSlide().$container,this.getNextSlide().$container),void this.mediator.publish(this,Qo.SlideCycleEnd);this.setCurrentSlide(this.XA.nextSlideIndex,mo.Right)}goToPrevSlide(){this.setCurrentSlide(this.XA.prevSlideIndex,mo.Left)}resetSlider(){this.setCurrentSlide(this.XA.firstSlideIndex)}setVolume(t){this.XA&&this.XA.slides.forEach(e=>{e.media.type===f.ProtoMediaTypeEnum.Video&&(e.media.volume=t)})}play(){this.zA=!0,this.Tw.start(),this.XA.currentSlide.media.play()}pause(){this.zA=!1,this.Tw.stop(),this.XA.currentSlide.media.pause()}stop(){this.XA.setCurrentSlide(this.XA.firstSlideIndex),this.eI(),this.pause(),this.tI.setCurrentSlide(this.XA.currentSlide.$container,null,!1)}get remainingTime(){return this.Tw.timeRemaining}setQuality(i){this.XA.slides.forEach(e=>{var t;e.media.type===f.ProtoMediaTypeEnum.Video&&(t={height:e.media.getClosestSourceQuality(i.height).videoHeight,quality:i.quality},e.media.setQuality(t))})}getQuality(){var e=this.XA["currentSlide"];if(e.media.type!==f.ProtoMediaTypeEnum.Image){const{getClosestSourceQuality:t,currentQuality:i}=e.media;return t(i.height).videoHeight}}start(e){try{this.nI(e),this.sI(),this.ZA()}catch(e){Object(g.a)({message:"SlidesManager_start",exception:e.message,callStack:e.stack,level:f.ProtoLoggingLevelEnum.FATAL})}}offsetSlides(e){var t;this.hI(),0!==e&&(t=this.aI(e),this.tI.offsetSlides(e,t))}destroy(){this.Tw.disable(),this.tI&&this.tI.destroy()}get isPlaying(){return this.zA}onPlayerContainerResize(){Object(A.a)(this.XA)&&Object(p.h)(this.XA.slides)&&this.XA.slides.forEach(e=>e.media.onSlideResizeCallback())}get slides(){return Object(A.a)(this.XA)&&Object(p.h)(this.XA.slides)?this.XA.slides:[]}get currentSlideIndex(){return Object(A.a)(this.XA)?this.XA.currentSlideIndex:0}updateCapabilityMetadata(e,t){if(Object(A.a)(this.XA)&&Object(p.h)(this.XA.slides)){const i=this.XA.slides[e];i&&i.updateCapabilityMetadata(t)}}get slidesMetadata(){return this.WA}}var ta=i(9);class ia{constructor(e){this.oI=e}get template(){return`\n        <cnx class="cnx-ui cnx-ui-ps">\n            <cnx class="cnx-ui-click-to-play-overlay"></cnx>\n            <cnx class="${qo.Content}">\n                [[${et.ClickToPlayButton}]]\n                <cnx class="cnx-ui-ratio-container">\n                    <cnx class="cnx-ui-ps-head">\n                    <cnx class="cnx-ui-ps-nav">\n                        ${this.cI()}\n                    </cnx>\n                    <cnx class="cnx-ui-ps-subhead cnx-ui-ps-side-mg">\n                        <cnx class="cnx-ui-ps-branding">\n                            [[${et.TopTitle}]]\n                        </cnx>\n                        <cnx class="cnx-ui-ps-btns">\n                            <cnx class="cnx-ui-btn ${l.g.ContextController}">[[${et.MoreButton}]]</cnx>\n                            <cnx class="cnx-ui-btn cnx-close-button">[[${et.CloseButton}]]</cnx>\n                        </cnx>\n                    </cnx>\n                </cnx>\n                <cnx class="cnx-ui-ps-controls--wrapper cnx-ui-ps-side-mg">\n                    <cnx class="cnx-ui-ps-controls">\n                        <cnx class="cnx-ui-btn cnx-ui-ps-nav-btn">[[${et.PreviousButton}]]</cnx>\n                        <cnx class="cnx-ui-btn">[[${et.PlayButton}]]</cnx>\n                        <cnx class="cnx-ui-btn cnx-ui-ps-nav-btn">[[${et.UpNextButton}]]</cnx>\n                        <cnx class="cnx-ui-btn">[[${et.VolumeButton}]]</cnx>\n                    </cnx>\n                </cnx>\n                <cnx class="cnx-ui-ps-footer cnx-ui-ps-side-mg"></cnx>\n                [[${et.PlayspaceSettingsMenu}]]\n                </cnx>\n            </cnx>\n            <cnx class="${qo.Footer}">\n                <cnx class="cnx-ui-ps-content cnx-ui-ps-side-mg">\n                    ${this.uI()}\n                </cnx>\n            </cnx>\n            [[${et.Loader}]]\n        </cnx>\n        `.trim()}cI(){return this.oI.disableStoryProgressBarRendering?"":`[[${et.PlayspaceProgressBar}]]`}uI(){return this.oI.disableTitleRendering?"":`[[${et.SlideTitle}]]`}}class sa extends Ft{constructor(){super(...arguments),this.lI=100,this.eventList=[lt.a[lt.a.Scroll]],this.isEndState=!1,this.dI=()=>{this.mediator.publish(this,zo.ProgressBarItemClicked,{payload:this.ef})},this.fI=e=>{e.stopPropagation()}}pI(){var e=this.Os.getComputedTranslateX(this.Xf),t=this.zf;return Object(Te.g)(0,t,0,100,e)}bI(e){Object(S.Q)(this.Xf,{transition:`transform ${e}ms linear`})}vI(){Object(S.Q)(this.Xf,{transition:"none"})}startProgress(e){this.bI(e),this.setProgress(this.lI)}pauseProgress(){this.setProgress(this.pI()),this.vI()}forceEndState(){this.vI(),super.forceEndState(),this.isEndState=!0}forceStartState(){this.vI(),super.forceStartState(),this.isEndState=!1}initComponent(){super.initComponent();var e={click:this.dI,interactionstart:this.fI};this.if.register(this.ef,this,this.if,e),this.Yn&&(this.subscribe(lt.a[lt.a.Click],this.if,()=>{this.dI()}),this.relay(lt.a[lt.a.Scroll],this.if,this,this.mediator))}destroy(){super.destroy()}onResize(e,t){this.setProgress(this.pI()),this.vI(),t&&(this.setProgress(this.lI),this.bI(e))}}var Hn=i(115),ra=i.n(Hn);class na extends ot{constructor(){super(...arguments),this.eventList=[zo.ProgressBarItemClicked,lt.a[lt.a.Scroll]],this.cA=[],this.mI=({payload:e})=>{e=Object(S.k)(e,this.ef);this.mediator.publish(this,zo.ProgressBarItemClicked,{payload:e})}}gI(e){const t=this.cA[e];t.forceStartState(),t.startProgress(this.yt)}startProgress(){if(Object(A.a)(this.fA)){for(let e=0;e<this.cA.length;e++)e<this.fA?this.cA[e].forceEndState():e===this.fA&&!this.cA[e].isEndState||this.cA[e].forceStartState();this.cA[this.fA].startProgress(this.yt)}}pauseProgress(){this.cA[this.fA]&&this.cA[this.fA].pauseProgress()}resetProgress(){Object(A.a)(this.fA)&&this.cA.forEach(e=>e.forceStartState())}setSlides(t){if(!t)throw new Error("PlayspaceProgressBar: no slides provided");for(let e=0;e<t;e++){const t=new sa(this,this.Os,this.if,ra.a,this.Yn);this.subscribe(zo.ProgressBarItemClicked,t,this.mI),this.relay(lt.a[lt.a.Scroll],t,this,this.mediator),this.cA.push(t),t.initComponent(),this.ef.appendChild(t.getContainer())}}setDuration(e){this.yt=e}setCurrentIndex(e){e===this.fA&&this.gI(e),this.fA=e}initComponent(){}destroy(){super.destroy(),this.cA.forEach(e=>e.destroy())}resizeProgressBar(i,s){this.cA.forEach((e,t)=>{t<this.fA&&e.forceEndState(),t===this.fA&&e.onResize(i,s)})}}var Hn=i(116),oa=i.n(Hn),Hn=i(64),aa=i.n(Hn);class la extends ct{constructor(e,t,i,s,r){super(e,t,i,la.getTemplate(r),s),this.mediator=e,this.xp=[],this.Tp=!1,this.type=qt.SubmenuMenuItem,this.eventList=[],this.isOpen=!1,this.event=r.event,this.eventList.push(this.event),this.yI=new Jt(this,t,i,s,{activeEvent:r.event,name:r.name.toUpperCase(),icon:""}),this.$menuContainer=this.Os.createElementByString(`<cnx class="${l.k.Items}"></cnx>`),this.wI=this.ef.getElementsByClassName(l.k.ItemExtra)[0]}static getTemplate(e){var t=`<cnx class="${l.k.ItemIcon}">${e.icon}</cnx>`;return`<cnx class="${l.k.SubmenuOption}">\n                    ${e.icon?t:""}\n                    <cnx class="${l.k.ItemTitle}">${e.name}</cnx>\n                    <cnx class="${l.k.ItemExtra} ${l.f.AccentColor}">${e.label||""}${aa.a}</cnx>\n                </cnx>`}onClickHandler(e){this.mediator.publish(this,this.event)}handleItemsEvents(e){this.mediator.publish(this,this.event,{payload:e===this.event?void 0:e})}buildContextMenu(e){this.$menuContainer.innerHTML="",this.xp.forEach(e=>this.unsubscribeAll(e)),this.xp=[this.yI,...e],this.xp.forEach(t=>{t.eventList.forEach(e=>this.subscribe(e,t,()=>this.handleItemsEvents(e))),t.initComponent(),this.$menuContainer.appendChild(t.getContainer())})}changeLabel(e){this.wI.innerHTML=`${e}${aa.a}`}get isActive(){return this.Tp}set isActive(e){this.Tp=e,(this.Tp?Object(S.a):Object(S.L))(this.ef,l.h.Active)}}class ca extends la{constructor(e,t,i,s,r){super(e,t,i,s,{event:P[P.Quality],name:r,icon:Ct.a,options:[]}),this.mediator=e,this.Wp={height:360,quality:Ue.Auto},this.Gp=!0}handleItemsEvents(e){e!==P[P.Quality]&&(this.Gp=e===Ue[Ue.Auto],e={height:this.Gp?this.Wp.height:parseInt(e,10),quality:this.Gp?Ue.Auto:Ue.Strict},this.mediator.publish(this,this.event,{payload:e}))}xI(){let e=null;var t;this.Gp?e=Ue[Ue.Auto]:(t=this.SI.find(e=>e.event===this.Wp.height.toString()))&&(e=t.name),e&&this.changeLabel(e)}updateQuality(e,t=!1){Object(p.h)(this.Jp)&&(this.Gp=e.quality===Ue.Auto,this.Wp.quality=e.quality,this.Wp.height=Object(Te.c)(e.height,this.Jp.map(e=>e.videoHeight)),this.xI(),ui(this.SI,this.Wp,this.Gp),this.isActive=t)}updateAvailableQualities(e){this.SI=[],this.Jp=e,this.SI=this.Jp.map(e=>new Jt(this,this.Os,this.if,this.Yn,{name:`${e.videoHeight}p`,activeEvent:e.videoHeight.toString(),label:e.isHD?"HD":void 0})),this.SI.push(new Jt(this,this.Os,this.if,this.Yn,{name:Ue[Ue.Auto],activeEvent:Ue[Ue.Auto]})),this.xI(),ui(this.SI,this.Wp,this.Gp),this.buildContextMenu(this.SI)}}var Hn=i(65),da=i.n(Hn),Hn=i(117),ha=i.n(Hn);const ua={ContextAbout:"About Connatix",ContextQuality:"Video Settings",ContextExpand:"Full Screen"};class pa extends zt{constructor(e,t,i,s,r,n,o,a){super(e,t,i,s,r,n,o,a),this.alignMiddle=!1,this.alignTop=!1,this.forceRight=!1}initComponent(){this.OI=new Jt(this,this.Os,this.if,this.Yn,{activeEvent:P[P.Expand],eventList:[P[P.Expand],P[P.Collapse]],icon:da.a,name:ua.ContextExpand}),this.kI=new ca(this,this.Os,this.if,this.Yn,ua.ContextQuality),this.buildContextMenu([this.kI,this.OI,new Jt(this,this.Os,this.if,this.Yn,{activeEvent:P[P.AboutClick],name:ua.ContextAbout,icon:Kt.a,label:Qt.a.version?`V${Qt.a.version}`:"dev"})])}setExpand(){this.OI.event=P[P.Collapse],this.OI.changeItemIcon(ha.a)}setCollapse(){this.OI.event=P[P.Expand],this.OI.changeItemIcon(da.a)}showExpandButton(){this.OI.showComponent()}hideExpandButton(){this.OI.hideComponent()}updateQualityMenu(e){Object(p.h)(e)?(this.kI.updateAvailableQualities(e),this.kI.showComponent()):this.kI.hideComponent()}updateQuality(e,t=!1){this.kI.updateQuality(e,t)}}var ga,ma,Hn=i(118),fa=i.n(Hn),Hn=i(119),ya=i.n(Hn);(Hn=ga=ga||{})[Hn.VolumeControls=0]="VolumeControls",Hn[Hn.PlaybackControls=1]="PlaybackControls",Hn[Hn.PlaylistControls=2]="PlaylistControls",Hn[Hn.CtaButton=3]="CtaButton",Hn[Hn.SlideTitle=4]="SlideTitle",Hn[Hn.TopLogo=5]="TopLogo",Hn[Hn.TopStoryTitle=6]="TopStoryTitle",Hn[Hn.TopSlideTitle=7]="TopSlideTitle",Hn[Hn.TextLabel=8]="TextLabel",(Hn=ma=ma||{})[Hn.Default=0]="Default",Hn[Hn.Description=1]="Description",Hn[Hn.Quote=2]="Quote",Hn[Hn.Bullet=3]="Bullet",Hn[Hn.Cover=4]="Cover",Hn[Hn.Instagram=5]="Instagram";const ba={TimerLabel:"cnx-cta-btn-timer-label",TimerLoader:"cnx-svg-circle-stroke",TextLabel:"cnx-cta-btn-text",TextContainer:"cnx-cta-btn-content",AlignWithContent:"cnx-cta-align-with-content"};class va extends ct{constructor(e,t,i,s,r,n,o){super(e,t,i,r.template,n),this.mr=s,this._I=r,this.jI=o,this.eventList=[zo.CallToAction,lt.a[lt.a.Scroll]],this.AI=!1,this.II=!1,this.CI=!1,this.br=()=>{this.TI()},this.pu=()=>{const e=Math.round(this.Tw.timeRemaining/B.f);this.MI(e.toString())},this.EI=this.ef.querySelector(".cnx-ui-ps-cta")}startProgress(){this.AI=!0,this.Tw&&(this.Tw.start(),this.pu())}pauseProgress(){this.AI=!1,this.Tw&&(this.Tw.stop(),this.pu())}changeLabel(e){Object(A.h)(e)&&(this.qf.innerHTML=e.substring(0,16))}initComponent(){super.initComponent(),this.qf=this.ef.querySelector(`.${ba.TextLabel}`),this.wI=this.ef.querySelector(`.${ba.TextContainer}`)}onSlideTimeUpdate(){}onSlideTransitionEnd(){}onSlideTransitionStart(e){var t,i,s,r,n;!Object(p.h)(e)||(r=e.find(({type:e})=>e===ga.CtaButton))&&r.metadata&&({url:t,label:n,duration:i,ctaAlignToContent:s,ctaAlignToFooter:e,title:r}=r.metadata,this.II=e,this.LI(t,r),this.changeLabel(n),n=Object(A.e)(i),this.RI(n),this.BI(n,i),this.DI(s),this.FI())}setFooterElement(e){this.$I=e,this.FI()}handleCapabilities(e){this.onSlideTransitionStart(e)}hideComponent(){super.hideComponent(),this.UI()}DI(e){(e?Object(S.a):Object(S.L))(this.EI,ba.AlignWithContent)}onClickHandler(){const e={payload:null};Object(A.h)(this.Lt)&&(e.payload=this.Lt),this.mediator.publish(this,zo.CallToAction,e)}FI(){this.CI||this.$I&&this.II&&(this.mr.on(this.$I,this.br),this.CI=!0)}TI(){var e;this.$I?(e=(this.$I.clientHeight-this.ef.clientHeight)/2*-1,Object(S.Q)(this.ef,{bottom:`${e}px`})):Object(S.N)(this.ef,"bottom")}RI(e){e?this.VI||this.NI():this.HI()}NI(){this.VI=this.Os.createElementByString(this._I.getTimerTemplate()),Object(S.x)(this.wI,this.VI),this.qI(this.VI)}qI(e){this.zI=e.querySelector(`.${ba.TimerLabel}`),this.WI=e.querySelector(`.${ba.TimerLoader}`)}HI(){Object(S.M)(this.VI),this.VI=null,this.zI=null,this.WI=null}BI(e,t){e?(this.GI(),this.Tw.reset(t*B.f),this.MI(t.toString()),this.AI&&this.Tw.start(),this.JI(),Object(S.Q)(this.WI,{"animation-duration":`${t}s`})):this.UI()}GI(){this.Tw||(this.Tw=new Be,this.QI=this.Tw.onTimeUpdate.subscribe(this.pu))}UI(){this.Tw&&(this.QI.unsubscribe(),this.Tw.disable(),this.Tw=null)}JI(){Object(S.O)(this.WI,ba.TimerLoader,ba.TimerLoader,!0)}MI(e){this.zI&&Object(A.h)(e)&&(this.zI.innerText=e)}LI(e,t){if((this.Lt=e)&&(this.EI.title=t,!this.jI)){this.EI.href=e;const t=this.Os.isURLSameDomainToTop(e);this.EI.target=t?Ai.c.Top:Ai.c.Blank,this.EI.rel="nofollow"}}}var Hn=i(66),Pa=i.n(Hn),Hn=i(120),Sa=i.n(Hn),Hn=i(121),Ia=i.n(Hn);class Ta{get template(){return`\n        <cnx class="cnx-ui-ps-cta-placeholder">\n            <a class="cnx-ui-ps-cta">\n                <cnx class="cnx-cta-btn cnx-color-accent">\n                    <cnx class="cnx-cta-btn-container">\n                        <cnx class="cnx-cta-btn-content">\n                            <cnx-span class="cnx-cta-btn-instagram">\n                                ${Sa.a}\n                            </cnx-span>\n                            <cnx-span class="cnx-cta-btn-text">\n                                READ MORE\n                            </cnx-span>\n                            <cnx-span class="cnx-cta-btn-arrow">\n                                ${Ia.a}\n                            </cnx-span>\n                        </cnx>\n                    </cnx>\n                </cnx>\n            </a>\n        </cnx>\n        `.trim()}getTimerTemplate(){return`\n            <cnx class="cnx-cta-btn-timer-container">\n                <cnx class="cnx-cta-btn-timer-loader-wrapper">\n                    ${Pa.a}\n                    ${Pa.a}\n                </cnx>\n                <cnx class="cnx-cta-btn-timer-label-wrapper">\n                    <cnx class="${ba.TimerLabel}">\n                    </cnx>\n                </cnx>\n            </cnx>\n        `.trim()}}class Aa extends ct{constructor(){super(...arguments),this.eventList=[P[P.Play]]}onClickHandler(){this.mediator.publish(this,P[P.Play])}}var Oa,ka,Ca,wa,Hn=i(122),xa=i.n(Hn);(Hn=Oa=Oa||{})[Hn.TopLogo=0]="TopLogo",Hn[Hn.TopSlideTitle=1]="TopSlideTitle",Hn[Hn.TopStoryTitle=2]="TopStoryTitle";const Ea={[ga.TopLogo]:Oa.TopLogo,[ga.TopSlideTitle]:Oa.TopSlideTitle,[ga.TopStoryTitle]:Oa.TopStoryTitle},La={[Oa.TopLogo]:ga.TopLogo,[Oa.TopSlideTitle]:ga.TopSlideTitle,[Oa.TopStoryTitle]:ga.TopStoryTitle},Ma=[Oa.TopLogo,Oa.TopStoryTitle,Oa.TopSlideTitle];class Ra extends Ei{constructor(e,t,i,s){super(e,t,i,s),this.eventList=[P[P.LogoClicked],lt.a[lt.a.Scroll]],this.XI=[],this.YI={},this.KI=this.ef.querySelector(`.${$o.TitlesContainer}`)}triggerLogoAnimation(){const e=this.getComponent(et.TopLogo);e&&e.triggerLogoAnimation()}onSlideTransitionStart(e){var t=this.ZI(e);this.YI=Object.assign({},t),this.tC(e)}onSlideTransitionEnd(){}onSlideTimeUpdate(e,t){}handleComponentEvent(e,t,i){this.mediator.publish(this,e,t)}iC(e){return e.map(({type:e})=>Ea[e]).filter(e=>Object(A.a)(e))}ZI(e){return e.reduce((e,{type:t,metadata:i})=>{switch(t){case La[Oa.TopStoryTitle]:if(!i.label&&!i.useFallbackLabel)return e;var s=i.label||"Top Articles";return Object.assign(Object.assign({},e),{[Oa[Oa.TopStoryTitle]]:this.eC(s,i.useTransition)});case La[Oa.TopSlideTitle]:return Object.assign(Object.assign({},e),{[Oa[Oa.TopSlideTitle]]:this.eC(i.label,i.useTransition)});case La[Oa.TopLogo]:return Object.assign(Object.assign({},e),{[Oa[Oa.TopLogo]]:Object.assign({},i)});default:return e}},{})}eC(e,t=!1){return{useTransition:t,label:this.sC(e)}}sC(e){if(e)return 36<e.length?`${e.substring(0,36)}...`:e}tC(e,t=!1){const i=this.iC(e),s=Object(p.a)(Ma,i),r=Object(p.a)(i,this.XI),n=Object(p.b)(i,this.XI);this.XI=i,this.nC(i),Object(S.i)(this.KI),s.forEach(e=>this.rC(e,t)),r.forEach(e=>this.hC(e,t)),n.forEach(e=>this.aC(e,t))}nC(e){switch(!0){case this.oC(e):this.cC();break;case this.uC(e):this.lC();break;default:this.dC()}}oC(e){return e.includes(Oa.TopSlideTitle)&&e.includes(Oa.TopStoryTitle)}uC(e){var t=e.includes(Oa.TopSlideTitle)&&!e.includes(Oa.TopStoryTitle),e=!e.includes(Oa.TopSlideTitle)&&e.includes(Oa.TopStoryTitle);return t||e}cC(){Object(S.L)(this.KI,$o.SlideDown),Object(S.a)(this.KI,$o.SlideInitial)}lC(){Object(S.L)(this.KI,$o.SlideInitial),Object(S.a)(this.KI,$o.SlideDown)}dC(){Object(S.L)(this.KI,$o.SlideInitial,$o.SlideDown)}rC(e,t=!1){const i=this.fC(e);if(i){const s=this.pC(e);t&&(s.useTransition=!1),i.hide(s)}}hC(e,t=!1){const i=this.fC(e);if(i){const s=this.pC(e);t&&(s.useTransition=!1),i.show(s)}}aC(e,t=!1){const i=this.fC(e);if(i){const s=this.pC(e);t&&(s.useTransition=!1),i.update(s)}}fC(e){return this.getComponent(et[Oa[e]])}pC(e){return this.YI[Oa[e]]||{}}}(Hn=ka=ka||{}).Wrapper="cnx-ui-ps__wrapper",Hn.Container="cnx-ui-ps__container",Hn.Placeholder="cnx-ui-ps__placeholder",Hn.Text="cnx-ui__span--text",Hn.Label="cnx-ui__span--label",Hn.Title="cnx-ui__span--title",Hn.VerticalLine="cnx-ui-ps__vertical-line",Hn.Instagram="cnx-ui-ps__slide--instagram",Hn.Cover="cnx-ui-ps__slide--cover",Hn.HighlightInner="cnx-top-title-highlight-text-inner-container",Hn.HighlightText="cnx-ui-ps-highlight-text",(Hn=Ca=Ca||{}).Default="cnx-ui-ps__sliding--default",Hn.Basic="cnx-ui-ps__sliding--basic",Hn.Cover="cnx-ui-ps__sliding--cover",Hn.SlideIn="cnx-title-slide-in",Hn.SlideOut="cnx-title-slide-out",(Hn=wa=wa||{}).Cover="cnx-ui-ps__title--cover",Hn.Quote="cnx-ui-ps__title--quote",Hn.Bullet="cnx-ui-ps__title--bullet",Hn.Default="cnx-ui-ps__title--default",Hn.Description="cnx-ui-ps__title--description",Hn.Instagram="cnx-ui-ps__title--instagram";class Ba{constructor(e,t=0,i=!0){if(this.bC=e,this.vC=i,!Object(p.h)(this.bC))throw new Error("PlaylistManager: list was not supplied");this.setCurrentItem(t)}setCurrentItem(e){this.mC=this.bC[e]}get currentItem(){return this.mC}goToNextItem(){this.uA().nextIndex===this.uA().firstIndex&&this.vC?this.setCurrentItem(this.uA().firstIndex):this.setCurrentItem(this.uA().nextIndex)}get listLength(){return this.bC.length}get previousItem(){return this.bC[this.uA().prevIndex]}get currentItemIndex(){return this.uA().currentIndex}uA(e=this.bC.indexOf(this.mC)){return Ge(this.bC,e)}}const ja="cnx-aux",Da="cnx-aux-container",_a="cnx-ui-lines";class Fa{constructor(e){this.Os=e}gC(e,t){const{maxLineWidth:i,maxLines:s,minLines:r}=t,n=[...e],o=[];if(!n.length||!Object(A.e)(i))return o;let a=0,l=-1,c=0;for(;0<n.length;){if(a=0,o[++l]=[],250<=++c){Object(g.a)({message:"Split text base line wrap infinite loop",level:f.ProtoLoggingLevelEnum.INFO,throttle:1,sendMaxLog:!1});break}for(;n[0]&&a+n[0].width<=i;)if(a+=n[0].width,o[l].push(n.shift()),250<=++c){Object(g.a)({message:"Split text base line wrap infinite loop",level:f.ProtoLoggingLevelEnum.INFO,throttle:1,sendMaxLog:!1});break}if(n[0]&&o.length>=s){o[l].push(...n);break}}return o.length<r&&4<o[0].length&&(o[1]=o[0].splice(-2,2)),o[l].length<2&&1<o.length&&o[l].unshift(o[l-1].pop()),o}yC(e){return e.map(e=>({innerHTML:e.nodeName.toLowerCase()===ja?e.innerHTML:e.outerHTML,width:e.getBoundingClientRect().width,height:e.getBoundingClientRect().height}))}getWordsHtml(e){if(!Object(A.h)(e))return"";let t=[];if(si(e))try{t=function(e){const t=document.createElement("cnx");t.innerHTML=e;const i=[];return Object(p.c)(t.childNodes).forEach(e=>{e.outerHTML?i.push(e.outerHTML):" "===e.nodeValue?i.push(" "):e.nodeValue.split(" ").forEach(e=>i.push(e))}),i}(e.trim())}catch(t){return Object(g.a)({message:"MultilinePadded_getRows_html_split",exception:t.message,level:f.ProtoLoggingLevelEnum.INFO,callStack:t.stack,throttle:1,sendMaxLog:!1}),e}else t=e.trim().split(" ");return t.map(e=>{let t=" ";return!si(e)&&" "!==e||(t=""),`<${ja}>${e}${t}</${ja}>`}).join("")}wC(e,t){const i=e.querySelectorAll(t),u=e.clientWidth||e.getBoundingClientRect().width;Object(p.c)(i).forEach(s=>{const e=Object(p.c)(s.querySelectorAll(ja)),t=s.parentElement;if(e.length&&s.nodeType===Node.ELEMENT_NODE){const i=this.Os.getComputedStyle(s),r=parseInt(this.Os.getComputedStyle(s,"before").getPropertyValue("width"),10),n=parseInt(i.getPropertyValue("--max-title-lines"),10),o=parseInt(i.getPropertyValue("--min-title-lines"),10),a=parseInt(i.getPropertyValue("font-size"),10),l={maxLineWidth:r||s.getBoundingClientRect().width-20,maxLines:n||15,minLines:o||1},c=this.yC(e),d=this.gC(c,l),h=this.Os.createElementByString(`<cnx class='${_a}'></cnx>`);h.dataset.split=u.toString(),h.dataset.split+=","+a,d.forEach(e=>{const t=s.cloneNode();Object(S.L)(t,Da);var i=e.map(e=>e.innerHTML.trim());t.innerHTML+=this.xC(i).replace(/\s\s+/g," "),h.dataset.split+=","+e.length,Object(S.d)(t,h)}),this.SC(h).lines!==this.SC(t).lines?s.classList.contains(Da)?this.Os.requestAnimationFrameHelper(()=>{null!==t.parentNode&&Object(S.w)(t,h),Object(S.M)(t)}):this.Os.requestAnimationFrameHelper(()=>{null!==s.parentNode&&Object(S.w)(s,h),Object(S.M)(s)}):Object(S.M)(s)}})}brakeLongLines(e,r){var t,i=e.querySelectorAll(r);i.length&&(t=e.clientWidth||e.getBoundingClientRect().width,i=this.SC(i[0].parentElement),isNaN(i.width)?this.wC(e,r):i.width&&0===Math.abs(i.width-t)||(t=e.querySelectorAll(`.${_a}[data-split]`),Object(p.c)(t).forEach(e=>{const t=e.querySelectorAll(r),i=t[0].cloneNode(!1),s=Object(p.c)(t).map(e=>e.innerHTML).join("");i.innerHTML=this.getWordsHtml(s),Object(S.a)(i,Da),e.prepend(i)}),this.wC(e,r)))}SC(e){const t=e.dataset.split?e.dataset.split.split(","):[],i=t.shift();return{width:parseInt(i,10),lines:t.join("")}}xC(e){return e.reduce((e,t,i)=>Object(p.g)("<",t)&&si(t)?e+t:" "===e?e:e+`${t} `,"")}}class Ua extends ct{constructor(e,t,i,s,r,n){super(e,t,i,n.template,r),this.mediator=e,this.Os=t,this.mr=s,this.Yn=r,this.OC=n,this.splitTextSelector=`.${ka.Text}`,this.br=()=>{this.Os.requestAnimationFrameHelper(()=>{this.kC.brakeLongLines(this.ef,this.splitTextSelector)})},this._C=t.createDocumentFragment(),this.kC=new Fa(t)}get $templateFragment(){return this._C}jC(e,t){t=this.OC.titleTemplate(e,t);return this.Os.createElementByString(t)}AC(e,t){t=this.OC.labelTemplate(e,t);return this.Os.createElementByString(t)}IC(e,t){t=this.OC.textTemplate(e,t);return this.Os.createElementByString(t)}CC(){var e=this.OC.placeholderTemplate();return this.Os.createElementByString(e)}TI(){}TC(){this.resetAnimation(),Object(S.a)(this.ef,Ca.SlideIn)}PC(){this.resetAnimation(),Object(S.a)(this.ef,Ca.SlideOut)}onSlideTransitionStart(e){this.MC(e),this.resetAnimation(),this.render()}onSlideTransitionEnd(){this.TC()}onSlideTimeUpdate(e,t){}resetAnimation(){var e=[Ca.SlideIn,Ca.SlideOut];Object(S.L)(this.ef,...e)}initComponent(e){super.initComponent(),this.EC=e,this.mr.on(this.EC,this.br)}render(){Object(S.J)(this.ef,this._C),Object(S.d)(this.ef,this.EC)}setFooterElement(e){return this.$I=e,this.TI(),this.$I}destroy(){this.mr.off(this.EC,this.br),Object(S.M)(this.ef),this.ef=this.Os.createElementByString(this.OC.template),this.unsubscribeAll(this.if),this.if.unregisterAll(this)}}function Na(e,t){return e=ti(e),t=(i=t).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),t=new RegExp(`<${t}>(.*?)</${t}>`,"g"),e.replace(t,(e,t)=>t.split(" ").map(e=>`<${i}>${e}</${i}>`).join(" "));var i}const Va={[ta.ProtoPlayspaceColorSchemeEnum.Accent]:l.f.AccentColor,[ta.ProtoPlayspaceColorSchemeEnum.Primary]:l.f.PrimaryColor,[ta.ProtoPlayspaceColorSchemeEnum.Secondary]:l.f.SecondaryColor};class Ha extends Ua{constructor(e,t,i,s,r,n){super(e,t,i,s,r,n),this.mediator=e,this.Os=t,this.Yn=r,this.OC=n,this.eventList=[],this.className=wa.Description}LC(e){return e/this.RC.listLength*(this.RC.currentItemIndex+1)}BC(e){e=e.map((e,t)=>{var i=this.DC(e);return Object(S.d)(i,this.$templateFragment),0===t&&Object(S.a)(i,"active"),Object.assign(Object.assign({},e),{shown:!1,element:i})});this.RC=new Ba(e)}FC(e){return this.AC(e.text,Va[e.colorScheme])}DC(e){return this.IC(this.kC.getWordsHtml(Na(e.text,"em")),Va[e.colorScheme])}MC(e){var{descriptionChunkList:t,label:i,labelColorScheme:e}=e,e={text:i,colorScheme:e};Object(A.h)(e.text)&&Object(S.d)(this.FC(e),this.$templateFragment),Object(p.h)(t)&&this.BC(t)}$C(){this.RC.currentItem.shown=!0,Object(S.L)(this.RC.currentItem.element,"active"),this.RC.goToNextItem(),this.Os.requestAnimationFrameHelper(()=>{this.resetAnimation(),this.Os.requestAnimationFrameHelper(()=>{Object(S.a)(this.RC.currentItem.element,"active"),this.TC()})})}onSlideTimeUpdate(e,t){t<=e||e>=this.LC(t)&&!this.RC.currentItem.shown&&this.$C()}}class qa{get template(){return`<cnx class="${l.f.TitleComponent}"></cnx>`}titleTemplate(e,t){return`<cnx class="${ka.Title} ${t}">${e}</cnx>`}labelTemplate(e,t){return`<cnx class="${ka.Label} ${t} ">${e}</cnx>`}textTemplate(e,t){return`<cnx class="${ka.Text} ${t}">${e}</cnx>`}containerTemplate(){return`<cnx class="${ka.Container}"></cnx>`}placeholderTemplate(){return`<cnx class="${ka.Placeholder}"></cnx>`}wrapeprTemplate(){return`<cnx class="${ka.Wrapper}"></cnx>`}}class Wa extends qa{get template(){return`<cnx class="${Ca.Basic} ${l.f.TitleComponent}"></cnx>`}textTemplate(e,t){return`<cnx class="${ka.Placeholder}">\n            <cnx class="${ka.Text} ${t}">${e}</cnx>\n        </cnx>`}}class $a extends qa{get template(){return`<cnx class="${Ca.Default} ${l.f.TitleComponent}">\n            <cnx class="${ka.VerticalLine} ${l.f.AccentColor}"></cnx>\n        </cnx>`.trim()}textTemplate(e){return`<cnx class="${l.m.InheritBodyFontFamily} ${ka.Text} ${l.f.PrimaryColor} ${ka.HighlightInner} ${ka.HighlightText}">${e}</cnx>`.trim()}}class Ga extends Ua{constructor(e,t,i,s,r,n){super(e,t,i,s,r,n),this.mediator=e,this.Os=t,this.Yn=r,this.OC=n,this.className=wa.Default,this.UC=!0,this.eventList=[...this.eventList,zo.CallToAction]}MC(e){var{url:t,label:e}=e;if(t?(this.ef.setAttribute("title",t),Object(S.a)(this.ef,l.f.TitleLink)):(this.ef.removeAttribute("title"),Object(S.L)(this.ef,l.f.TitleLink)),Object(A.h)(e)){const i=this.kC.getWordsHtml(Na(e,"em"));Object(S.d)(this.IC(i),this.$templateFragment)}}onClickHandler(){this.mediator.publish(this,zo.CallToAction)}onSlideTransitionEnd(){super.onSlideTransitionEnd(),this.UC=!0}onSlideTimeUpdate(e,t){this.UC&&t-e<1200&&(this.PC(),this.UC=!1)}destroy(){super.destroy(),this.unsubscribeAll(this.if),this.if.unregisterAll(this)}}class za extends Ua{constructor(e,t,i,s,r,n){super(e,t,i,s,r,n),this.mediator=e,this.Os=t,this.Yn=r,this.OC=n,this.eventList=[],this.className=wa.Bullet}BC(e){e=e.map(e=>{if(Object(A.h)(e.title)){const t=this.VC(e);return Object(S.d)(t,this.$templateFragment),Object.assign(Object.assign({},e),{activated:!1,element:t,titleElement:t.firstChild,containerElement:t.querySelector(`.${ka.Container}`)})}});this.NC=new Ba(e)}HC(e){const t=e.element.querySelector(`.${ka.Container}`),i=t.querySelectorAll(`.${ka.Text}`),s=Object(A.a)(i)?i.length:0,r=Object(A.a)(i[0])?i[0].clientHeight:0;Object(S.Q)(t,{"max-height":`${s*r}px`}),e.activated=!0,Object(S.O)(e.titleElement,l.f.PrimaryColor,l.f.SecondaryColor),Object(S.a)(e.element,"active")}qC(e){var t=e.element.querySelector(`.${ka.Container}`);Object(S.N)(t,"max-height"),Object(S.O)(e.titleElement,l.f.SecondaryColor,l.f.PrimaryColor),Object(S.L)(e.element,"active")}zC(e){e=this.OC.labelTemplate(e);return this.Os.createElementByString(e)}VC(e){var t=this.zC(e.title),i=this.IC(this.kC.getWordsHtml(e.description)),e=this.CC();return Object(S.d)([t,i],e),e}MC(e){const{label:t,bulletChunkList:i}=e;Object(A.h)(t)&&Object(S.d)(this.jC(t),this.$templateFragment),Object(p.h)(i)&&this.BC(i.slice(0,3))}onSlideTimeUpdate(e,t){const i=this.NC;i&&!i.currentItem.activated&&(0===i.currentItemIndex?1e3<=e&&(this.HC(i.currentItem),i.goToNextItem()):(t-1e3)/i.listLength*i.currentItemIndex+1e3<e&&(this.qC(i.previousItem),this.HC(i.currentItem),i.goToNextItem()))}}class Ja extends qa{get template(){return`<cnx class="${Ca.Basic} ${l.f.TitleComponent}"></cnx>`}titleTemplate(e){return`<cnx class="${ka.Title} ${l.f.AccentColor}">${e}</cnx>`}labelTemplate(e){return`<cnx class="${ka.Label} ${l.f.PrimaryColor}">\n            <cnx class="${ka.VerticalLine} ${l.f.AccentColor}"></cnx>\n            ${e}\n        </cnx>`.trim()}textTemplate(e){return`<cnx class="${ka.Container}">\n                    <cnx class="${ka.Text}  ${l.f.SecondaryColor}">${e}</cnx>\n                </cnx>\n        `.trim()}}class Ka extends Ua{constructor(e,t,i,s,r,n){super(e,t,i,s,r,n),this.mediator=e,this.Os=t,this.Yn=r,this.OC=n,this.eventList=[],this.className=wa.Cover,this.splitTextSelector=`.${ka.Text}, .${ka.Title}`,this.br=()=>{this.Os.requestAnimationFrameHelper(()=>{var e;this.kC.brakeLongLines(this.ef,this.splitTextSelector),this.$I&&(e=this.$I.clientHeight/2*-1,Object(S.Q)(this.labelElement,{bottom:`${e}px`,position:"absolute"}))})}}MC(e){var{coverChunk:{title:t,subtitle:i}}=e,e=e["label"];if(Object(A.h)(t)&&(t=Na(t,"em"),Object(S.d)(this.jC(this.kC.getWordsHtml(t)),this.$templateFragment)),Object(A.h)(i)&&(i=Na(i,"em"),Object(S.d)(this.IC(this.kC.getWordsHtml(i)),this.$templateFragment)),Object(A.h)(e)){if(this.labelElement=this.AC(e),this.$I){const s=(this.$I.clientHeight-this.ef.clientHeight)/2*-1;Object(S.Q)(this.labelElement,{bottom:`${s}px`,position:"absolute"})}Object(S.d)(this.labelElement,this.$templateFragment)}}}class Qa extends qa{get template(){return`<cnx class="${Ca.Cover} ${l.f.TitleComponent}"></cnx>`}titleTemplate(e){return`<cnx class="${ka.Placeholder}">\n            <cnx class="${ka.Title} ${l.f.PrimaryColor}">${e}</cnx>\n        </cnx>`}textTemplate(e){return`<cnx class="${ka.Placeholder}">\n            <cnx class="${ka.Text} ${l.f.SecondaryColor}">${e}</cnx>\n        </cnx>`}labelTemplate(e){return`<cnx class="${ka.Placeholder}">\n            <cnx class="${ka.Label}">${e}</cnx>\n        </cnx>`}}var Hn=i(67),Ya=i.n(Hn);class Xa extends Ua{constructor(e,t,i,s,r,n){super(e,t,i,s,r,n),this.mediator=e,this.Os=t,this.Yn=r,this.OC=n,this.eventList=[],this.className=wa.Quote}MC(e){var{quote:t,source:e}=e;if(Object(A.h)(t)){const i=this.kC.getWordsHtml(`${Ya.a}${ti(t)}${Ya.a}`);Object(S.d)(this.IC(i),this.$templateFragment)}Object(A.h)(e)&&Object(S.d)(this.AC(e),this.$templateFragment)}}class Za extends qa{get template(){return`\n            <cnx class="${Ca.Basic} ${l.f.TitleComponent}"></cnx>\n        `.trim()}textTemplate(e){return`\n        <cnx class="${ka.Text} ${l.f.PrimaryColor}"> ${e}</cnx>`.trim()}labelTemplate(e){return`<cnx class="${ka.Label}">${e}</cnx>`.trim()}}class el extends Ua{constructor(e,t,i,s,r,n){super(e,t,i,s,r,n),this.mediator=e,this.Os=t,this.Yn=r,this.OC=n,this.eventList=[],this.className=wa.Instagram}MC(e){var{instagramMetadata:{createdDate:t,comments:i,likes:s},label:e}=e;this.WC({createdDate:t,comments:i,likes:s}),Object(A.h)(e)&&Object(S.d)(this.jC(e),this.$templateFragment)}WC(e){const{createdDate:t,comments:i,likes:s}=e,r=this.Os.createElementByString(this.OC.instagramMetaTemplate(t,s,i));if(this.GC(i)&&this.GC(s)){const e=r.querySelector(`.${ka.Instagram}-date cnx-span`);Object(S.a)(e,l.h.Show)}Object(S.d)(r,this.$templateFragment)}GC(e){return!Object(A.h)(e)||"0"===e}}var Hn=i(123),tl=i.n(Hn),Hn=i(124),il=i.n(Hn),Hn=i(125),sl=i.n(Hn);class rl extends qa{get template(){return`<cnx class="${Ca.Basic} ${l.f.TitleComponent}"></cnx>`.trim()}instagramMetaTemplate(e,t,i){e=Object(A.h)(e)?`\n            <cnx-span class="cnx-ui-ps-instagram-title-date ${l.m.InheritBodyFontFamily}">\n                ${sl.a}\n                <cnx-span class="cnx-date-label ${l.m.InheritBodyFontFamily}">Posted </cnx-span>${Object(jt.e)(e)}\n            </cnx-span>`.trim():"",t=Object(A.h)(t)?`\n            <cnx-span class="cnx-ui-ps-instagram-title-likes ${l.m.InheritBodyFontFamily}">\n                ${tl.a} ${Object(Te.a)(parseInt(t,10))}\n            </cnx-span>`.trim():"",i=Object(A.h)(i)?`\n            <cnx-span class="cnx-ui-ps-instagram-title-comments ${l.m.InheritBodyFontFamily}">\n                ${il.a} ${Object(Te.a)(parseInt(i,10))}\n            </cnx-span>`.trim():"";return`\n            <cnx class="cnx-ui-ps-instagram-title-row ${l.m.InheritBodyFontFamily}">\n                ${e}\n                ${t}\n                ${i}\n            </cnx>\n        `.trim()}titleTemplate(e){return`\n            <cnx class="cnx-ui-ps-instagram-title-row ${ka.Instagram}-title ${l.m.InheritBodyFontFamily}">\n                ${e}\n            </cnx>\n        `.trim()}}class nl extends ot{constructor(e,t,i,s,r,n,o){super(e,t,i,s,n),this.mediator=e,this.Os=t,this.mr=r,this.Yn=n,this.jI=o,this.eventList=[],this.JC=new Map,this.QC()}setFooterElement(t){this.JC.forEach(e=>{e.setFooterElement(t)})}onSlideTransitionStart(e){Object(S.S)(this.ef),this.ef.removeAttribute("title");const t=e.find(({type:e})=>e===ga.SlideTitle),i=e.find(({type:e})=>e===ga.CtaButton);if(i&&i.metadata&&i.metadata.url){if(this.XC=i.metadata.url,!this.jI){this.ef.href=this.XC;const s=this.Os.isURLSameDomainToTop(this.XC);this.ef.target=s?Ai.c.Top:Ai.c.Blank}this.ef.title=t.metadata.label,i.metadata.title=t.metadata.label}Object(A.f)(t)&&Object(A.f)(t.metadata)&&((e=this.JC.get(t.metadata.titleType))&&(this.YC(e),this.KC.onSlideTransitionStart(t.metadata)))}onSlideTransitionEnd(){this.KC&&this.KC.onSlideTransitionEnd()}onSlideTimeUpdate(e,t){this.KC&&this.KC.onSlideTimeUpdate(e,t)}initComponent(){}YC(e){this.KC?(this.KC.destroy(),Object(S.O)(this.ef,this.ZC,e.className)):Object(S.a)(this.ef,e.className),this.ZC=e.className,this.ef.innerHTML="",this.KC=e,this.KC.initComponent(this.ef)}QC(){this.JC.set(ma.Default,new Ga(this,this.Os,this.if,this.mr,this.Yn,new $a)),this.JC.set(ma.Description,new Ha(this,this.Os,this.if,this.mr,this.Yn,new Wa)),this.JC.set(ma.Quote,new Xa(this,this.Os,this.if,this.mr,this.Yn,new Za)),this.JC.set(ma.Bullet,new za(this,this.Os,this.if,this.mr,this.Yn,new Ja)),this.JC.set(ma.Cover,new Ka(this,this.Os,this.if,this.mr,this.Yn,new Qa)),this.JC.set(ma.Instagram,new el(this,this.Os,this.if,this.mr,this.Yn,new rl)),this.JC.forEach(e=>{e.eventList.forEach(t=>{this.subscribe(t,e,()=>{const e={payload:null};t===zo.CallToAction&&(e.payload=this.XC),this.mediator.publish(this,t,e)})})})}destroy(){super.destroy(),this.KC&&this.KC.destroy()}}var ol={[et[et.SkipAd]]:{template:vi(et.SkipAd,"Skip Ad",!1),tooltip:"Skip Ad",isHoverable:!1}};class al{constructor(e){this.tT=e}get template(){return`\n            <cnx class="${$o.Main}">\n                ${this.iT()}\n                <cnx class="${$o.TitlesContainer}">\n                    [[${et.TopStoryTitle}]]\n                    [[${et.TopSlideTitle}]]\n                </cnx>\n            </cnx>\n        `.trim()}iT(){return this.tT?`[[${et.TopLogo}]]`:""}}class ll{get template(){return`<a class="${ka.Wrapper}"></a>`}}class cl extends ct{constructor(e,t,i,s,r,n){super(e,t,i,s,r),this.mediator=e,this.Yn=r,this.eventList=[...this.eventList,P[P.LogoClicked]],this.hideComponent(!1),this.eT=this.ef.querySelector(`.${$o.Logo}`),this.eT.src=`${n}`,this.eT.alt="",this.eT.onload=()=>{this.sT()}}show(e){this.showComponent(e.useTransition)}hide(e){this.hideComponent(e.useTransition)}update(e){this.showComponent(e.useTransition)}triggerLogoAnimation(){Object(S.a)(this.ef,$o.LogoAnimation)}onClickHandler(){this.mediator.publish(this,P[P.LogoClicked])}sT(){this.eT.naturalHeight>this.eT.naturalWidth?this.eT.naturalWidth>this.eT.parentElement.clientWidth&&.8<=this.eT.naturalWidth/this.eT.naturalHeight?Object(S.a)(this.eT,$o.LogoLandscape):Object(S.a)(this.eT,$o.LogoPortrait):this.eT.naturalHeight>this.eT.parentElement.clientHeight&&.8<=this.eT.naturalHeight/this.eT.naturalWidth?Object(S.a)(this.eT,$o.LogoPortrait):Object(S.a)(this.eT,$o.LogoLandscape)}}class dl{get template(){return`\n            <cnx class="${$o.LogoContainer}">\n                <img class="${$o.Logo}" />\n            </cnx>\n        `.trim()}}class hl{get template(){return`\n            <cnx class="${$o.TopSlideTitle} ${l.m.InheritTitleFontFamily}">\n                <cnx class="${$o.TextPlaceholder}">\n                    <cnx class="${$o.Text} ${l.f.SecondaryColor}">\n                        <cnx class="${$o.TextOuterContainer}">\n                            <cnx class="${$o.TextInnerContainer}"></cnx>\n                        </cnx>\n                    </cnx>\n                </cnx>\n            </cnx>\n        `.trim()}}class ul{get template(){return`\n            <cnx class="${$o.TopStoryTitle} ${l.m.InheritTitleFontFamily}">\n                <cnx class="${$o.TextPlaceholder}">\n                    <cnx class="${$o.Text} ${l.f.SecondaryColor}">\n                        <cnx class="${$o.TextOuterContainer}">\n                            <cnx class="${$o.TextInnerContainer}"></cnx>\n                        </cnx>\n                    </cnx>\n                </cnx>\n            </cnx>\n        `.trim()}}class pl extends ot{constructor(e,t,i,s,r){super(e,t,i,s,r),this.mediator=e,this.eventList=[],this.nT=this.ef.querySelector(`.${$o.TextInnerContainer}`)}show(e){var t;this.nT&&({label:t,useTransition:e}=e,Object(A.h)(t)&&t!==this.FC&&(clearTimeout(this.rT),this.FC=t,this.hT(t),this.TC(e)))}initComponent(){}hide(e){var e=e["useTransition"];clearTimeout(this.rT),this.PC(e),this.FC=null}update(e){if(this.nT){const{label:t,useTransition:i}=e;Object(A.h)(t)&&t!==this.FC&&(clearTimeout(this.rT),this.PC(i),this.FC=t,this.rT=setTimeout(()=>{this.hT(t),this.TC(i)},600))}}hT(e){this.nT.innerHTML=e}TC(e=!1){e?Object(S.u)(this.ef,$o.SlideIn)||(this.aT(),Object(S.L)(this.ef,l.h.Hide,l.h.Active),Object(S.i)(this.ef),Object(S.O)(this.ef,$o.SlideOut,$o.SlideIn)):(Object(S.O)(this.ef,l.h.Hide,l.h.Active),Object(S.L)(this.ef,$o.SlideIn,$o.SlideOut))}PC(e=!1){e?(Object(S.L)(this.ef,l.h.Hide,l.h.Active),Object(S.O)(this.ef,$o.SlideIn,$o.SlideOut)):(Object(S.O)(this.ef,l.h.Active,l.h.Hide),Object(S.L)(this.ef,$o.SlideIn,$o.SlideOut))}aT(){var e=[$o.SlideIn,$o.SlideOut];Object(S.L)(this.nT,...e),Object(S.i)(this.nT)}}class gl extends ot{constructor(){super(...arguments),this.eventList=[]}initComponent(){}onSlideTimeUpdate(){}onSlideTransitionEnd(){}onSlideTransitionStart(e){e=this.oT(e);e&&this.cT(e.metadata.label)}oT(e){return e.find(({type:e,metadata:t})=>e===ga.TextLabel&&Object(A.f)(t))}cT(e){Object(A.h)(e)&&(this.ef.innerText=e)}}var Hn=i(126),ml=i.n(Hn);class fl extends wi{constructor(e,t,i,s,r){super(e,t,s,r,ol),this.Os=e,this.if=t,this.Lo=i,this.ef=s,this.Jn=r,this.Vb={[et.VolumeButton]:e=>new xi(e,this.Os,this.if,ya.a,ki.Mute,this.Jn.isMobile),[et.PlayspaceProgressBar]:e=>new na(e,this.Os,this.if,oa.a,this.Jn.isMobile),[et.PlayspaceSettingsMenu]:e=>new pa(e,this.Os,this.if,fa.a,P[P.SettingsMenu],et.PlayspaceSettingsMenu,this.ef,this.Jn.isMobile),[et.CtaButton]:e=>new va(e,this.Os,this.if,this.Lo,new Ta,this.Jn.isMobile,this.Jn.disableClickUrl),[et.ClickToPlayButton]:e=>new Aa(e,this.Os,this.if,xa.a,this.Jn.isMobile),[et.TopTitle]:e=>new Ra(e,this.Os,new al(this.Jn.logoUrl).template,this),[et.TopLogo]:e=>new cl(e,this.Os,this.if,(new dl).template,this.Jn.isMobile,this.Jn.logoUrl),[et.TopSlideTitle]:e=>new pl(e,this.Os,this.if,(new hl).template,this.Jn.isMobile),[et.TopStoryTitle]:e=>new pl(e,this.Os,this.if,(new ul).template,this.Jn.isMobile),[et.SlideTitle]:e=>new nl(e,this.Os,this.if,(new ll).template,this.Lo,this.Jn.isMobile,this.Jn.disableClickUrl),[et.ElapsedTimeLabel]:e=>new Dt(e,this.Os,this.if,_t.a),[et.TotalDurationLabel]:e=>new Dt(e,this.Os,this.if,_t.a),[et.VolumeControls]:e=>new Li(e,this.Os,Mi,this),[et.ProgressBar]:e=>new Nt(e,this.Os,this.if,Vt.a,this.Jn.isMobile),[et.TextLabel]:e=>new gl(e,this.Os,this.if,ml.a)},this.Nb=i=>e=>{const t=this.Vb[i];if(t)return t(e)}}createComponent(e,t){return this.Nb(e)(t)||super.createComponent(e,t)}}class yl{constructor(e){this.uT=e}lT(t){return this.uT.filter(e=>t.instance!==e.instance)}dT(t){return this.uT.find(({name:e})=>t===e)}fT(e){e.forEach(({instance:e})=>{e.isOpen&&e.close()})}toggleContextMenu(e,t={}){const i=this.dT(e);if(i.instance.isOpen)return i.instance.close(),!1;{const{targetCoordinates:e,holdPause:s}=t,r=e||i.instance.getAnchorCoordinatesTo(i.linkedComponent);return i.instance.open(r,s),this.fT(this.lT(i)),!0}}isAnyContextMenuOpen(){return!!this.uT.find(({instance:e})=>e.isOpen)}closeContextMenu(e){const t=this.dT(e).instance;t.isOpen&&t.close()}closeAllContextMenus(){this.fT(this.uT)}}class bl extends pt{enterState(){super.enterState();const e=this.context.getComponent(et.PlayspaceProgressBar);e&&e.startProgress();const t=this.context.getComponent(et.CtaButton);t&&t.startProgress(),this.context.interactionService.enableSpecialInteractions(this.context.$container),this.context.autoHideHandler&&this.context.autoHideHandler.startAutoHide()}exitState(){super.exitState(),this.context.autoHideHandler&&this.context.autoHideHandler.showUi()}updateDuration(){const e=this.context.getComponent(et.PlayspaceProgressBar);e&&e.startProgress()}}class vl extends mt{enterState(){super.enterState();const e=this.context.getComponent(et.PlayspaceProgressBar);e&&e.pauseProgress();const t=this.context.getComponent(et.CtaButton);t&&t.pauseProgress(),this.context.interactionService.disableSpecialInteractions(this.context.$container)}exitState(){super.exitState()}updateDuration(){}}class Pl extends vl{enterState(){super.enterState(),this.context.interactionService.disableSpecialInteractions(this.context.$container)}exitState(){super.exitState()}}class Sl extends vl{enterState(){super.enterState(),Object(S.a)(this.context.$uiContainer,l.j.Preroll);const e=this.context.getComponent(et.Loader);e&&e.show(),this.context.interactionService.disableSpecialInteractions(this.context.$container)}exitState(){super.exitState(),Object(S.L)(this.context.$uiContainer,l.j.Preroll);const e=this.context.getComponent(et.Loader);e&&e.hide()}}class Il extends vl{enterState(){super.enterState(),this.context.interactionService.disableSpecialInteractions(this.context.$container)}exitState(){super.exitState()}updateDuration(){const e=this.context.getComponent(et.PlayspaceProgressBar);e&&e.resetProgress()}}var Tl={[ga.PlaybackControls]:[et.PlayButton],[ga.VolumeControls]:[et.VolumeButton],[ga.CtaButton]:[et.CtaButton],[ga.PlaylistControls]:[et.UpNextButton,et.PreviousButton],[ga.SlideTitle]:[et.SlideTitle],[ga.TextLabel]:[et.TextLabel]};class Al{constructor(){this.pT=Object.keys(Tl).reduce((e,t)=>[...e,...Tl[t]],[])}setCapabilityList(e){this.bT=e.map(e=>Tl[e.type]).filter(e=>Array.isArray(e)).reduce((e,t)=>[...e,...t],[])}getComponentList(){return{excludedComponents:Object(p.a)(this.pT,this.bT),includedComponents:Object(p.b)(this.pT,this.bT)}}}class Ol{constructor(e){this.ef=e,this.vT=!1}isUIHidden(){return this.vT}startAutoHide(){this.mT=setTimeout(()=>{this.gT()},3e3)}showUi(){clearTimeout(this.mT),this.yT()}resetAutoHideTimer(){clearTimeout(this.mT),this.yT(),this.startAutoHide()}gT(){Object(S.a)(this.ef,l.g.HideUI),this.vT=!0}yT(){Object(S.L)(this.ef,l.g.HideUI),this.vT=!1}}var kl=i(20);class Cl extends vt{constructor(e,t,i,s,r,n,o,a,l){super(e,t,i,r,new fl(i,l,s,t,n)),this.mediator=e,this.$container=t,this.globalDomUtilsService=i,this.settings=n,this.Kn=o,this.interactionService=l,this.wT=80,this.xT=[et.SlideTitle,et.CtaButton,et.TopTitle,et.TextLabel],this.Sf={[Ne.PlayingState]:new bl(this),[Ne.PausedState]:new vl(this),[Ne.StoppedState]:new Pl(this),[Ne.HiddenState]:new Il(this),[Ne.PrerollState]:new Sl(this),[Ne.PostrollState]:new Sl(this)},this.ST=new Al,this.OT=()=>{this.mediator.publish(this,P[P.Play]),this.kT(P[P.Play])},this.$I=this.$container.querySelector(`.${qo.Footer}`),this._T(),this.jT(),this.AT(),this.IT(),this.Sf[a].enterState(),this.CT(),this.TT(!1),this.PT(),this.MT=this.$uiContainer.querySelector(`.${qo.Content}`),this.ET=this.$uiContainer.querySelector(`.${qo.Overlay}`),this.interactionService.register(this.ET,this,this.interactionService),this.subscribe(lt.a[lt.a.Click],this.interactionService,()=>{this.OT()})}_T(){const e=this.getComponent(et.SlideTitle);e&&e.setFooterElement(this.footer)}LT(e,t){const i=this.getComponent(et.PlayspaceProgressBar);i&&i.resizeProgressBar(e,t)}handleComponentEvent(e,t,i){switch(this.kT(e),e){case P[P.Mute]:this.mediator.publish(this,P[P.Volume],{payload:0});break;case P[P.Unmute]:this.mediator.publish(this,P[P.Volume],{payload:1});break;case et[et.CloseButton]:this.mediator.publish(this,P[P.Close]);break;case et[et.MoreButton]:const i={holdPause:!0};this.RT.toggleContextMenu(et.PlayspaceSettingsMenu,i);break;case P[P.AboutClick]:this.globalDomUtilsService.open(fr.a,Ai.c.Blank);break;case P[P.Quality]:t.payload&&this.mediator.publish(this,P[P.Quality],{payload:t.payload});break;case et[et.UpNextButton]:this.mediator.publish(this,P[P.Next]);break;case et[et.PreviousButton]:this.mediator.publish(this,P[P.Prev]);break;case zo.CallToAction:Object(A.h)(t.payload)?this.mediator.publish(this,zo.CallToAction,t):this.mediator.publish(this,P[P.Next]);break;default:this.mediator.publish(this,e,t)}}kT(e){switch(e){case zo.CallToAction:this.mediator.publish(this,zo.GeneralClickInteraction,{payload:f.ProtoMediaClickTypeEnum.UrlClick});break;case lt.a[lt.a.Scroll]:this.mediator.publish(this,zo.GeneralClickInteraction,{payload:f.ProtoMediaClickTypeEnum.ScrollClick});break;case et[et.VolumeButton]:case et[et.VolumeProgress]:case et[et.VolumeControls]:this.mediator.publish(this,zo.GeneralClickInteraction,{payload:f.ProtoMediaClickTypeEnum.VolumeClick});break;case et[et.PlayButton]:case et[et.BigPlayButton]:case et[et.ClickToPlayButton]:case P[P.Play]:this.mediator.publish(this,zo.GeneralClickInteraction,{payload:f.ProtoMediaClickTypeEnum.PlayClick});break;case P[P.Pause]:this.mediator.publish(this,zo.GeneralClickInteraction,{payload:f.ProtoMediaClickTypeEnum.PauseClick});break;case P[P.Next]:case et[et.UpNextButton]:case et[et.UpNextBox]:case lt.a[lt.a.TapRight]:this.mediator.publish(this,zo.GeneralClickInteraction,{payload:f.ProtoMediaClickTypeEnum.NextClick});break;case P[P.Prev]:case et[et.PreviousButton]:case lt.a[lt.a.TapLeft]:this.mediator.publish(this,zo.GeneralClickInteraction,{payload:f.ProtoMediaClickTypeEnum.PreviousClick});break;case P[P.Mute]:this.mediator.publish(this,zo.GeneralClickInteraction,{payload:f.ProtoMediaClickTypeEnum.MuteClick});break;case P[P.Unmute]:this.mediator.publish(this,zo.GeneralClickInteraction,{payload:f.ProtoMediaClickTypeEnum.UnmuteClick});break;case P[P.Close]:case et[et.CloseButton]:this.mediator.publish(this,zo.GeneralClickInteraction,{payload:f.ProtoMediaClickTypeEnum.CloseClick})}}AT(){const e=[],t=this.BT();t&&e.push({instance:t,linkedComponent:this.getComponent(et.MoreButton),name:et.PlayspaceSettingsMenu}),this.RT=new yl(e)}IT(){this.settings.isMobile&&this.DT(),this.interactionService.register(this.$container,this,this.interactionService,{},[kl.c.Hold,kl.c.Swipe]);const s=this.interactionService.getNonInterruptibleInteractions();Object.keys(lt.a).filter(e=>isNaN(parseInt(e,10))).forEach(i=>{this.subscribe(i,this.interactionService,e=>{var t=!s.includes(lt.a[i]);if(this.autoHideHandler&&t){if(this.autoHideHandler.isUIHidden())return void this.autoHideHandler.resetAutoHideTimer();this.autoHideHandler.resetAutoHideTimer()}this.kT(i),this.mediator.publish(this,i,e)})})}DT(){this.autoHideHandler=new Ol(this.$container)}jT(){var e=`id_${this.Kn}`;this.$uiContainer.id=e;var{bodyFontFamily:t,titleFontFamily:i}=this.FT(),t=`\n            #${e} .${l.f.AccentColor} {\n                fill: ${this.settings.accentColorList.background};\n                background-color: ${this.settings.accentColorList.background};\n                color: ${this.settings.accentColorList.foreground};\n                stroke: ${this.settings.accentColorList.background};\n            }\n            #${e} .${l.f.AccentColor} .cnx-cta-btn-arrow svg{\n                fill: ${this.settings.accentColorList.foreground};\n            }\n            @keyframes ${e}-bar {\n                1% {\n                  fill: transparent; transform: scaleY(1)\n                }\n                30% {fill: ${this.settings.accentColorList.background}; transform: scaleY(1.1)}\n                60% {fill: transparent; transform: scaleY(1)}\n                100% {fill: transparent; transform: scaleY(1)}\n            }\n            #${e} .cnx-ui-loader polygon {\n                animation-name: ${e}-bar;\n            }\n            #${e} .${l.f.PrimaryColor} {\n                background: ${this.settings.primaryColorList.background};\n                color: ${this.settings.primaryColorList.foreground};\n            }\n            #${e} .${l.f.SecondaryColor} {\n                background: ${this.settings.secondaryColorList.background};\n                color: ${this.settings.secondaryColorList.foreground};\n            }\n            #${e} .${l.f.TitleComponent}.${l.f.TitleLink}:${this.settings.isMobile?"active":"hover"} .${ka.Text} {\n                background-color: ${Object(Je.j)(this.settings.accentColorList.background,this.wT)}\n            }\n            #${e} .${l.f.SlideProgressBar} .${l.f.ProgressFill}.${l.f.AccentColor} {\n                background-color: ${this.settings.useAccentColorForProgressBar?this.settings.accentColorList.background:l.l.Icons}\n            }\n            #${e} em {\n                color: ${this.settings.accentColorList.background};\n            }\n            #${e} .${l.m.InheritTitleFontFamily} {\n                font-family: ${i} !important;\n            }\n            #${e} .${l.m.InheritBodyFontFamily} {\n                font-family: ${t} !important;\n            }\n        `.trim();this.globalDomUtilsService.addCssString(t)}FT(){var{bodyFontFamily:e,titleFontFamily:t}=this.settings.fontFamilySettings;return Object(A.h)(e)&&Object(A.h)(t)?this.settings.fontFamilySettings:{titleFontFamily:Object(S.q)(this.$container),bodyFontFamily:Object(S.j)(this.$container)}}PT(){this.$T()&&this.hideExpandButton()}$T(){return this.UT()||!this.VT()}UT(){return this.settings.os===Qe.b.Ios}VT(){return!0===this.settings.expandButtonEnabled}NT(e={}){const t=this.getComponent(et.CtaButton);t&&Object(A.h)(e.label)&&t.changeLabel(e.label)}hideExpandButton(){this.BT().hideExpandButton()}showExpandButton(){this.BT().showExpandButton()}BT(){return this.getComponent(et.PlayspaceSettingsMenu)}CT(e=[]){this.ST.setCapabilityList(e)}TT(t=!0){const{excludedComponents:e,includedComponents:i}=this.ST.getComponentList();e.map(e=>this.getComponent(e)).forEach(e=>e&&e.hideComponent(t)),i.map(e=>this.getComponent(e)).forEach(e=>e&&e.showComponent(t))}updateQualityMenu(e){const t=this.getComponent(et.PlayspaceSettingsMenu);t&&t.updateQualityMenu(e)}updateQuality(e){const t=this.getComponent(et.PlayspaceSettingsMenu);t&&t.updateQuality(e)}setTotalSlides(e){const t=this.getComponent(et.PlayspaceProgressBar);t&&t.setSlides(e)}setDuration(e){const t=this.getComponent(et.PlayspaceProgressBar);t&&(t.setDuration(e),this.currentState.updateDuration())}setCurrentIndex(e){const t=this.getComponent(et.PlayspaceProgressBar);t&&t.setCurrentIndex(e)}updateVolume(e){const t=this.getComponent(et.VolumeButton);t&&t.setState(0<e?ki.Unmute:ki.Mute)}expand(){this.BT().setExpand()}collapse(){this.BT().setCollapse()}onResizeUi(e,t){this.RT.closeAllContextMenus(),this.LT(e,t)}onFirstTimeInView(){const e=this.getComponent(et.TopTitle);e&&e.triggerLogoAnimation()}hide(){super.hide()}setMediaContainerRatio(e){Object(S.J)(this.MT,e)}get $mediaContainer(){return this.MT}onSlideTransitionStart(i){const e=this.getComponent(et.PlayspaceProgressBar);e&&e.pauseProgress(),this.CT(i),this.TT(),this.xT.forEach(e=>{const t=this.getComponent(e);t&&t.onSlideTransitionStart&&t.onSlideTransitionStart(i)})}onSlideTransitionEnd(){this.xT.forEach(e=>{const t=this.getComponent(e);t&&t.onSlideTransitionEnd&&t.onSlideTransitionEnd()})}onSlideTimeUpdate(i,s){this.xT.forEach(e=>{const t=this.getComponent(e);t&&t.onSlideTimeUpdate&&t.onSlideTimeUpdate(i,s)})}updateCapabilityMetadata(e){e.type===ga.CtaButton&&this.NT(e.metadata)}get footer(){return this.$I}destroy(){this.interactionService.unregisterAll(this),this.unsubscribeAll(this),super.destroy()}}const wl={StateChanged:"stateChanged",ContentReset:"contentReset",ContentStart:"contentStart",ContentEnd:"contentEnd"};class xl{constructor(e,t,i,s,r,n,o){this.mediator=e,this.HT=t,this.qT=i,this.zT=s,this.WT=r,this.GT=n,this.JT=o,this.QT=!1,this.XT=!1,this.YT=!1,this.qu=!1,this.KT=!1,this.ZT=!0,this.tP=()=>{this.QT=!0,this.iP===Ne.PlayingState?this.play(!1):this.pause(!1)},this.eP=()=>{switch(this.XT=!0,this.GT){case ta.ProtoEndOfSlideCycleMode.Loop:this.reset();break;case ta.ProtoEndOfSlideCycleMode.Stop:this.stop()}},this.sP=null,this.nP=null,this.JT&&(this.QT=!0)}rP(e){this.sP!==e&&(this.nP=this.sP,this.sP=e,this.mediator.publish(this,wl.StateChanged,{payload:this.sP}))}hP(e){return this.sP===e}resume(){this.nP&&this.rP(this.nP)}stop(){this.HT.stop(),this.rP(Ne.StoppedState)}handleSlidesEnd(){this.aP()}oP(){this.rP(Ne.PrerollState)}aP(){this.mediator.publish(this,Ko.ContentEnd),this.WT?this.rP(Ne.PostrollState):this.eP()}cP(e){return e===Ne.PrerollState||e===Ne.PostrollState}uP(e){return e===Ne.PrerollState&&this.QT||e===Ne.PostrollState&&this.XT}setViewabilityState(e){this.qu=e}play(e){if(this.iP=Ne.PlayingState,!(this.hP(Ne.PlayingState)||this.hP(Ne.HiddenState)&&this.YT||this.cP(this.sP)&&!this.uP(this.sP)||this.hP(Ne.StoppedState)&&!e))if(!this.zT||this.QT){if(this.hP(Ne.StoppedState))return this.QT=!1,void this.reset();this.qT.setDuration(this.HT.remainingTime),this.HT.play(),this.rP(Ne.PlayingState),this.ZT&&(this.ZT=!1,this.mediator.publish(this,Ko.ContentStart))}else this.oP()}reset(){this.mediator.publish(this,wl.ContentReset),this.sP=null,this.XT=!1,this.ZT=!0,this.HT.resetSlider(),this.play(!1)}pause(e){this.iP=Ne.PausedState,this.hP(Ne.PausedState)||this.hP(Ne.HiddenState)||this.cP(this.sP)&&!this.uP(this.sP)||this.hP(Ne.StoppedState)&&!e||(this.HT.pause(),this.rP(Ne.PausedState))}pauseToggle(){if(this.hP(Ne.PausedState)||this.hP(Ne.PlayingState))return this.hP(Ne.PausedState)&&this.KT?(this.KT=!1,void this.play(!1)):this.hP(Ne.PlayingState)?(this.KT=!0,void this.pause(!1)):void 0}hide(){this.HT.pause(),this.YT=!0,this.rP(Ne.HiddenState)}show(){this.hP(Ne.HiddenState)&&(this.YT=!1,this.nP!==Ne.PostrollState?this.nP!==Ne.PrerollState?this.qu?this.goToNextSlide():this.iP===Ne.PlayingState?this.play(!1):this.pause(!1):this.tP():this.eP())}setCurrentSlide(e){this.cP(this.sP)&&!this.uP(this.sP)||this.HT.setCurrentSlide(e)}goToNextSlide(){this.cP(this.sP)&&!this.uP(this.sP)||(this.HT.goToNextSlide(),this.hP(Ne.StoppedState)||this.play(!1))}goToPrevSlide(){this.cP(this.sP)||(this.play(!1),this.HT.goToPrevSlide())}exitRollBreak(){this.sP!==Ne.PostrollState?this.tP():this.eP()}}class El extends n.a{constructor(e,t,i,s){super(),this.mediator=e,this.lP=t,this.Ig=i,this.Lo=s,this.Tp=!1,this.dP=!1,Object(A.h)(t.imageUrl)||(t.imageUrl=it.a.endPoints.base.image),this.Gl=new Fe,this.MT=this.Ig.createElementByString(this.fP()),this.pP()}set isLoaded(e){this.dP=e}get isLoaded(){return this.dP}bP(e,t){var i=t<e?_e.Landscape:_e.Portrait;return{imageUrl:this.vP[i],altText:Object(A.a)(this.lP.altText)?this.lP.altText:"",queryParams:this.lP.mediaContext===ta.ProtoMediaContextEnum.Logo?st.getScaledImageQueryParams(e,t):st.getSmartCroppedImageQueryParams(e,t),width:e,height:t}}pP(){var{imageUrl:e,portraitImageUrl:t}=this.lP;this.vP={[_e.Landscape]:e,[_e.Portrait]:Object(A.h)(t)?t:e}}get duration(){return this.lP.slideDuration*B.f}getThumbnailUrlParams(e,t){return this.bP(e,t)}destroy(){}}var Hn=i(127),Ll=i.n(Hn);class Ml extends El{constructor(e,t,i,s){super(e,t,i,s),this.type=f.ProtoMediaTypeEnum.Image,this.mP=e=>{e.preventDefault()},this.gP()}gP(){this.lP.mediaContext===ta.ProtoMediaContextEnum.Logo&&Object(S.a)(this.MT,qo.MediaLogo)}yP(){this.wP=this.MT.clientWidth,this.xP=this.MT.clientHeight}SP(){this.OP=setTimeout(()=>{var{clientWidth:e,clientHeight:t}=this.MT.parentElement,{imageUrl:i,altText:s,width:r,height:e,queryParams:t}=this.bP(e,t),t=this.Gl.getImage(i,s,r,e,t,!0);this.Pb&&this.MT.removeChild(this.Pb),t&&(this.MT.appendChild(t),this.Pb=t,this.kP(this.Pb))},0)}_P(){this.Pb&&Object(A.h)(this.lP.imageUrl)&&this.SP()}jP(){return Object(A.a)(this.MT)&&Object(A.a)(this.wP)&&Object(A.a)(this.xP)}AP(e){return!!this.jP()&&Math.abs(this.wP-this.MT.clientWidth)>=this.wP/e}IP(e){return!!this.jP()&&Math.abs(this.xP-this.MT.clientHeight)>=this.xP/e}kP(e){e.addEventListener("mousedown",this.mP)}CP(e){e.removeEventListener("mousedown",this.mP)}fP(){return Ll.a}reset(){this.isLoaded&&(this.MT.style.transitionDuration="",this.MT.style.transform="matrix(1.1, 0, 0, 1.1, 0, 0)")}onSlideResizeCallback(){(this.AP(10)||this.IP(10))&&(this._P(),this.yP())}play(){this.isLoaded&&(this.MT.style.transform="",this.MT.style.transitionDuration=`${this.lP.slideDuration}s`,Object(S.O)(this.MT,l.j.Paused,l.j.Playing))}pause(){this.isLoaded&&(this.MT.style.transitionDuration="",this.MT.style.transform=this.Ig.getTransformPropertyValue(this.MT),Object(S.O)(this.MT,l.j.Playing,l.j.Paused))}load(e){this.isLoaded||(this.isLoaded=!0,e.appendChild(this.MT),this.yP(),this.pause(),this.SP())}destroy(){this.Pb&&this.CP(this.Pb),clearTimeout(this.OP),super.destroy()}}var Rl,Hn=i(128),Bl=i.n(Hn);class jl{constructor(t){this.TP=[{id:Ve.H264,extension:"mp4",type:"video/mp4"},{id:Ve.Hevc,extension:"mp4",type:"video/mp4"}],this.PP=this.TP.find(e=>e.id===t)}get type(){var e=this.PP.codecs?`codecs=${this.PP.codecs}`:"";return`${this.PP.type}; ${e}`}get id(){return this.PP.id}}class Dl{constructor(e,t,i){this.mediator=e,this.Lo=t,this.MP=i,this.EP={quality:Ue.Auto,height:360},this.resizeObserverBinded=!1,this.LP=30,this.Go=()=>{var e=this.MP.clientHeight;this.RP(e)&&this.currentQualitySettings.quality===Ue.Auto&&(e={height:e,quality:Ue.Auto},this.setCurrentQualitySettings(e),this.mediator.publish(this,$e.CurrentQuality,{payload:e}))}}setCurrentQualitySettings(e){this.EP.quality=e.quality,this.EP.height!==e.height&&(this.EP.height=e.height,this.mediator.publish(this,$e.Change))}RP(e){return!this.EP.height||e/this.EP.height*100-100>this.LP}addResizeObserver(){this.resizeObserverBinded=!0,this.Lo.on(this.MP,this.Go)}removeResizeObserver(){this.resizeObserverBinded=!1,this.Lo.off(this.MP,this.Go)}setQuality(e){e.quality===Ue.Auto?this.resizeObserverBinded||(this.setCurrentQualitySettings({height:e.height,quality:e.quality}),this.addResizeObserver(),this.Go()):(this.resizeObserverBinded&&this.removeResizeObserver(),this.setCurrentQualitySettings(e)),this.mediator.publish(this,$e.CurrentQuality,{payload:this.EP})}get currentQualitySettings(){return this.EP}destroy(){this.removeResizeObserver()}}const _l={TrackLoaded:"trackLoaded"},Fl={height:0,quality:Ue.Auto};class Ul extends n.a{constructor(e,t,i){super(),this.mediator=e,this.Ig=t,this.Ag=i,this.BP=[],this.DP=()=>{this.mediator.publish(this,_l.TrackLoaded)}}FP(e){this.$P=e,this.UP()}VP(e){this.Ag.innerHTML="",e.forEach(e=>{this.Ag.appendChild(e)})}NP(){return this.BP}UP(){if(this.BP=[],this.$P&&this.$P.subtitle){const e=this.Ig.createElement("track");e.src=this.$P.subtitle,e.srclang="en",e.kind="subtitle",e.default=!0,e.addEventListener("load",this.DP,!1),e.addEventListener("loaded",this.DP,!1),this.BP.push(e)}}}class Nl extends Ul{constructor(e,t,i,s,r,n={},o){super(e,t,r),this.Lo=i,this.Qb=s,this.HP=o,this.qP=null,this.zP=10.13,this.WP=this.GP(n)}start(){try{this.JP=new Dl(this,this.Lo,this.Qb),this.QP(),this.setQuality(this.HP)}catch(e){Object(g.a)({message:"Mp4SourceHandler_start",exception:e.message,callStack:e.stack,level:f.ProtoLoggingLevelEnum.FATAL})}}onQualityChanged(){return this.attachMedia()}setSource(e,t=!1){this.FP(e),this.XP(this.YP(),t)}setQuality(e){this.JP.setQuality(e)}get currentQualitySettings(){return this.JP.currentQualitySettings}attachMedia(){return new Promise(e=>{this.KP(),e()})}detachMedia(){this.Ag.removeAttribute("src"),this.XP(null)}destroy(){this.JP.destroy()}QP(){this.relay($e.CurrentQuality,this.JP,this,this.mediator),this.subscribe($e.Change,this.JP,()=>{this.ZP()})}ZP(){this.XP(this.YP()),this.mediator.publish(this,$e.Change,{payload:this.JP.currentQualitySettings.height})}tM(e){this.VP(e),this.Ag.load()}YP(){return[...this.iM(),...this.NP()]}iM(){if(!this.Ag||!this.$P)return[];const i=[];return this.$P.getSources(this.JP.currentQualitySettings.height,this.WP).forEach(e=>{const t=this.Ig.createElement("source");t.src=e.src,t.type=e.type,i.push(t)}),i}KP(){this.qP&&(this.tM(this.qP),this.qP=null)}XP(e,t=!1){this.qP=e,t&&this.KP()}GP(e){let t;switch(e.os){case Qe.b.Ios:t=[Ve.Hevc,Ve.H264];break;case Qe.b.Mac:t=e.osVersion>this.zP&&e.browser===Ai.a.Safari?[Ve.Hevc,Ve.H264]:[Ve.H264];break;default:t=[Ve.H264]}return t.map(e=>new jl(e))}}const Vl={UnexpectedError:"unexpectedError",BufferingError:"bufferingError",FragBuffered:"fragBuffered",ManifestLoaded:"manifestLoaded",LevelSwitching:"levelSwitching",StreamEnded:"streamEnded"};(Hn=Rl=Rl||{}).Http="http",Hn.Https="https";var Hl,ql=i(40);const Wl={enableWorker:!1,capLevelToPlayerSize:!0,cnxRenderWindow:window,maxBufferSize:5e6,maxBufferLength:5,maxMaxBufferLength:10,liveBackBufferLength:0};class $l extends Ul{constructor(e,t,i,s,r,n){super(e,t,i),this.eM=s,this.HP=r,this.sM=n,this.nM=[],this.rM=Ue.Auto,this.hM=320,this.aM=!1,this.oM=!1,this.cM=!1,this.Eg=()=>{this.Mg.off(_s.Events.MEDIA_ATTACHED,this.Eg);var e=this.uM(this.lM);this.Mg.loadSource(e),this.Mg.once(_s.Events.MANIFEST_PARSED,this.Rg)},this.Rg=()=>{this.Mg.off(_s.Events.MANIFEST_PARSED,this.Rg),this.Mg.on(_s.Events.LEVEL_SWITCHING,this.dM),this.Mg.on(_s.Events.LEVEL_SWITCHED,this.fM),this.Mg.on(_s.Events.FRAG_BUFFERED,this.pM),this.Mg.on(_s.Events.FRAG_LOADING,this.bM),this.Mg.on(_s.Events.FRAG_LOADED,this.vM),this.Mg.on(_s.Events.BUFFER_APPENDING,this.mM),this.Mg.on(_s.Events.BUFFER_APPENDED,this.gM),this.Mg.on(_s.Events.BUFFER_EOS,this.yM),this.lM=null,this.wM(),this.xM(),this.SM(),this.OM.resolve()},this.kM=()=>{this.lM=null,this.Ag.removeEventListener(qe.LoadedMetadata,this.kM),this._M.resolve()},this.xM=()=>{var e=this.nM.map(e=>({videoHeight:e.height,isHD:720<=e.height,label:e.level.toString()}));this.mediator.publish(this,Vl.ManifestLoaded,{payload:{qualityList:e}})},this.pM=()=>{this.mediator.publish(this,Vl.FragBuffered)},this.bM=()=>{this.aM=!0},this.vM=()=>{this.aM=!1},this.mM=()=>{this.oM=!0},this.gM=()=>{this.oM=!1},this.yM=()=>{this.mediator.publish(this,Vl.StreamEnded)},this.Tg=(e,t)=>{if(t.details===_s.ErrorDetails.BUFFER_STALLED_ERROR&&(this.aM||this.oM?this.mediator.publish(this,Vl.BufferingError):(this.cM||(this.Mg.recoverMediaError(),this.Ag.play().then(()=>{this.cM=!1}).catch(()=>{this.cM=!1})),this.cM=!0)),t.fatal)switch(t.type){case _s.ErrorTypes.NETWORK_ERROR:if(t.details===_s.ErrorDetails.MANIFEST_PARSING_ERROR)return void this.jM("hls_network_error_manifest_parsing_error_FATAL");if(t.details===_s.ErrorDetails.MANIFEST_LOAD_ERROR)return void this.mediator.publish(this,Vl.UnexpectedError);this.Mg.startLoad();break;case _s.ErrorTypes.MEDIA_ERROR:this.Mg.recoverMediaError();break;default:this.jM("hls_unexpected_error_FATAL",`type_${t.type}_details_${t.details}`)}else t.type===_s.ErrorTypes.MEDIA_ERROR&&t.details===_s.ErrorDetails.BUFFER_APPENDING_ERROR&&this.jM("hls_media_error_buffer_appending_error"),t.type===_s.ErrorTypes.NETWORK_ERROR&&t.details===_s.ErrorDetails.MANIFEST_PARSING_ERROR&&this.jM("hls_network_error_manifest_parsing_error")},this.AM=()=>{this.jM("hls_video_tag_error",`code_${this.Ag.error.code}_message_${this.Ag.error.message}`)},this.fM=(e,t)=>{this.hM=this.nM.find(e=>e.level===t.level).height,this.mediator.publish(this,$e.Change,{payload:this.currentQualitySettings.height}),this.mediator.publish(this,$e.CurrentQuality,{payload:this.currentQualitySettings})},this.dM=()=>{this.mediator.publish(this,Vl.LevelSwitching)},Fs&&(this.Mg=this.Ig.initHls(Wl),this.sM&&(this.Mg.autoLevelCapping=1)),this.hM=this.HP.height,this.rM=this.HP.quality}start(){}get liveSyncPosition(){if(this.Mg)return this.Mg.liveSyncPosition}setSource(e,t=!1){this.IM=e.id,this.FP(e),this.lM=e,t&&this.attachMedia()}attachMedia(){return new Promise(e=>{var t;this.Mg?this.Mg.on(_s.Events.ERROR,this.Tg):this.Ag.addEventListener(qe.Error,this.AM),this.lM?(t=this.NP(),this.VP(t),(this.Mg?this.CM():this.TM()).then(()=>{e()})):e()})}detachMedia(){this.nM=[],this.Mg?(this.Mg.detachMedia(),this.PM()):(this.Ag.removeAttribute("src"),this.Ag.removeEventListener(qe.LoadedMetadata,this.kM),this.Ag.removeEventListener(qe.Error,this.AM))}setQuality(e){this.rM=e.quality,this.hM=e.height,this.Mg&&this.SM(),this.mediator.publish(this,$e.Change,{payload:this.currentQualitySettings.height}),this.mediator.publish(this,$e.CurrentQuality,{payload:this.currentQualitySettings})}get currentQualitySettings(){return{quality:this.rM,height:this.hM}}onQualityChanged(){return new Promise(()=>{})}destroy(){this.Mg?(this.PM(),this.Mg.destroy(),this.Mg=null):(this.Ag.removeEventListener(qe.LoadedMetadata,this.kM),this.Ag.removeEventListener(qe.Error,this.AM))}CM(){return this.OM=new ql.a,this.Mg.attachMedia(this.Ag),this.Mg.once(_s.Events.MEDIA_ATTACHED,this.Eg),this.OM.promise}TM(){return this._M=new ql.a,this.Ag.src=this.uM(this.lM),this.Ag.addEventListener(qe.LoadedMetadata,this.kM),this._M.promise}PM(){this.Mg.off(_s.Events.MEDIA_ATTACHED,this.Eg),this.Mg.off(_s.Events.MANIFEST_PARSED,this.Rg),this.Mg.off(_s.Events.ERROR,this.Tg),this.Mg.off(_s.Events.LEVEL_SWITCHING,this.dM),this.Mg.off(_s.Events.LEVEL_SWITCHED,this.fM),this.Mg.off(_s.Events.FRAG_BUFFERED,this.pM),this.Mg.off(_s.Events.FRAG_LOADING,this.bM),this.Mg.off(_s.Events.FRAG_LOADED,this.vM),this.Mg.off(_s.Events.BUFFER_APPENDING,this.mM),this.Mg.off(_s.Events.BUFFER_APPENDED,this.gM),this.Mg.off(_s.Events.BUFFER_EOS,this.yM)}wM(){this.Mg.levels.forEach((e,t)=>{this.sM&&1<t||this.nM.push({level:t,height:e.height})})}jM(e,t){Object(g.a)({message:e,exception:this.IM,level:f.ProtoLoggingLevelEnum.WARNING,callStack:t}),this.mediator.publish(this,Vl.UnexpectedError)}SM(){if(this.rM===Ue.Auto)this.Mg.currentLevel=-1;else try{this.Mg.currentLevel=this.nM.find(e=>e.height===this.hM).level}catch(e){Object(g.a)({message:"HlsSourceHandler_quality_not_present_in_hls_manifest",exception:e.message,callStack:e.stack,level:f.ProtoLoggingLevelEnum.FATAL})}}uM(e){try{var t=e.getHlsSource(),i=Object(Je.g)(t);return i&&i.protocol?t:`${this.eM}:${t}`}catch(e){Object(g.a)({exception:e.message,message:"HlsSourceHandler_undefined_sourceMeta",level:f.ProtoLoggingLevelEnum.FATAL,callStack:e.stack,throttle:5,sendMaxLog:!1})}}}(Hn=Hl=Hl||{}).Disabled="disabled",Hn.Hidden="hidden",Hn.Showing="showing";class Gl{constructor(e,t,i,s,r){this.mediator=e,this.Ag=t,this.Wg=i,this.Kb=r,this.MM=!1,this.EM=!1,this.LM=Hl.Hidden,this.RM=0,this.Gg=!1,this.BM=null,this.DM=e=>{switch(e.type){case qe.Play:if(!this.Gg&&this.Kb.config.isInAppAndroid)return void this.pause();this.MM=!0;break;case qe.Timeupdate:this.mediator.publish(this,e.type,{payload:this.MM});break;case qe.Error:var t=this.Ag.error?this.Ag.error.message:"";this.mediator.publish(this,We.PlayError,{payload:t});break;case qe.LoadedMetadata:this.EM=!0,Object(A.d)(this.FM)&&(this.currentTime=this.FM,this.FM=null),this.mediator.publish(this,e.type);break;default:this.mediator.publish(this,e.type)}},this.play=()=>(this.Gg=!0,this.BM=this.Ag.play(),null!==this.BM?(this.RM++,this.BM.then(()=>{this.MM=!0,this.Kb.config.os.os===Qe.b.Ios&&Object(S.C)(this.Ag),this.RM--,this.$M(),this.BM=null}).catch(e=>{throw this.mediator.publish(this,We.PlayError,{payload:e}),this.MM=!1,this.RM--,this.BM=null,e})):Promise.resolve()),this.pause=()=>{null!==this.BM?this.BM.then(this.UM).catch(this.UM):this.VM()},this.UM=()=>{1<this.RM||this.VM()},this.volume=s,this.QP()}QP(){this.Wg.forEach(e=>{this.Ag.addEventListener(e,this.DM)})}$M(){this.Ag.textTracks&&0!==this.Ag.textTracks.length&&Object.keys(this.Ag.textTracks).forEach(e=>{this.Ag.textTracks[e].mode=this.LM})}set poster(e){Object(A.h)(e)&&(this.Ag.poster=e)}get poster(){return this.Ag.poster}VM(){this.Ag.pause(),this.MM=!1,this.Gg=!1}get volume(){return this.Cd}set volume(e){this.Cd=e<=1?e:e/100,this.Ag.volume=this.Cd,Object(S.V)(this.Ag,this.Cd)}get currentTime(){return this.Ag.currentTime}set currentTime(e){this.EM?this.Ag.currentTime=e:this.FM=e}get duration(){return this.Ag.duration}get playing(){return this.MM}destroy(){this.Wg.forEach(e=>{this.Ag.removeEventListener(e,this.DM)})}setTrackModes(e){this.LM=e,this.$M()}setMetaLoaded(e){this.EM=e}setCrossOriginAttribute(){this.Ag.getAttribute("crossorigin")||this.Ag.setAttribute("crossorigin","anonymous")}setPoster(e){this.poster=e.getThumbnailUrl(this.Ag.clientWidth,this.Ag.clientHeight)}getCurrentTrack(){return this.Ag.textTracks&&0!==this.Ag.textTracks.length?this.Ag.textTracks[0]:null}isPlayPending(){return 0<this.RM}}class zl extends n.a{constructor(e,t,i,s,r,n,o={},a,l){if(super(),this.mediator=e,this.Kb=t,this.Ig=i,this.Qb=s,this.Lo=r,this.NM=n,this.PP=o,this.HM=a,this.HP=l,this.qM=!0,this.zM=!1,this.WM=!1,this.GM=()=>{let e;this.currentTrack.activeCues&&0<this.currentTrack.activeCues.length&&(e=this.currentTrack.activeCues[0]),this.mediator.publish(this,P[P.CaptionUpdate],{payload:e})},this.DP=()=>{this.currentTrack&&(this.currentTrack.mode=this.JM?Hl.Hidden:Hl.Disabled,this.currentTrack.oncuechange=this.GM)},this.QM(),this.XM.appendChild(this.Ag),this.Qb.appendChild(this.XM),this.HP=this.HP||Fl,this.YM=new Nl(this,i,this.Lo,this.Qb,this.Ag,this.PP,this.HP),Fs||this.Ag.canPlayType("application/vnd.apple.mpegurl")){const e=this.Ig.isHttpsProtocolUsed()?Rl.Https:Rl.Http,t=Object(A.h)(this.Kb.config.bundleID);this.ny=new $l(this,this.Ig,this.Ag,e,this.HP,t),this.KM()}else this.qM=!1,Object(g.a)({message:"Hls_not_supported",level:f.ProtoLoggingLevelEnum.INFO})}start(){try{this.Wg=Object(c.a)(qe),this.ZM=new Gl(this,this.Ag,this.Wg,this.NM,this.Kb),this.tE(),this.iE(),this.eE()}catch(e){Object(g.a)({message:"VideoHandler_start",exception:e.message,callStack:e.stack,level:f.ProtoLoggingLevelEnum.FATAL})}}sE(){const e=this.currentTime;this.setSource(this.nE,!0,this.YM),this.rE.attachMedia().then(()=>{this.ZM.play().then(()=>{this.WM=!1,this.hE.resolve(),this.ZM.currentTime=e}).catch(e=>{this.hE&&this.hE.isPending&&(this.WM=!1,this.hE.reject(),Object(g.a)({message:"VideoHandler_hls_error_content_player_play",exception:e.message,callStack:e.callStack,level:f.ProtoLoggingLevelEnum.FATAL}))})}).catch(e=>{this.hE&&this.hE.isPending&&(this.WM=!1,this.hE.reject()),Object(g.a)({message:"VideoHandler_hls_error_attach_media",exception:e.message,callStack:e.callStack,level:f.ProtoLoggingLevelEnum.FATAL})})}KM(){this.subscribe(Vl.UnexpectedError,this.ny,()=>{this.WM=!0,this.sE()}),this.subscribe(Vl.ManifestLoaded,this.ny,({payload:e})=>{this.mediator.publish(this,$e.Loaded,{payload:{qualityList:e,videoMeta:this.nE}}),this.ZM.setMetaLoaded(!0)}),this.subscribe(Vl.BufferingError,this.ny,()=>{this.mediator.publish(this,We.Buffering)}),this.subscribe(Vl.FragBuffered,this.ny,()=>{this.mediator.publish(this,We.Buffered)}),this.subscribe(Vl.StreamEnded,this.ny,()=>{this.mediator.publish(this,We.EndOfStream)}),this.subscribe(Vl.LevelSwitching,this.ny,()=>{this.mediator.publish(this,We.LevelSwitching)})}tE(){this.aE(this.YM)}iE(){this.ny&&this.aE(this.ny)}aE(e){e.start(),this.oE(e)}eE(){this.Wg.forEach(t=>{this.subscribe(t,this.ZM,e=>{t===qe.Canplay&&this.HM&&(this.currentTime=this.HM,this.HM=null),this.mediator.publish(this,t,e)})}),this.relay(We.PlayError,this.ZM,this,this.mediator)}oE(e){this.relay([$e.CurrentQuality,We.NewVideo],e,this,this.mediator),this.subscribe($e.Change,e,({payload:e})=>{this.onQualityChanged(e)}),this.subscribe(_l.TrackLoaded,e,()=>{this.DP()})}get width(){return this.XM.getBoundingClientRect().width}get height(){return this.XM.getBoundingClientRect().height}get currentTime(){return this.ZM.currentTime}set currentTime(e){this.ZM.currentTime=e}forceCurrentTime(e){this.ZM.currentTime=e,this.HM=e}get duration(){return this.ZM.duration}get volume(){return this.ZM.volume}set volume(e){this.ZM.volume=e}get playing(){return this.ZM.playing}get isIosFullscreen(){return this.zM}set isIosFullscreen(e){this.zM=e,this.zM&&this.JM?this.cE():this.uE()}get currentQualitySettings(){return this.rE.currentQualitySettings}hide(){Object(S.a)(this.XM,l.d)}show(){Object(S.L)(this.XM,l.d)}setSource(i,s=!1,r){return this.HM=null,new Promise((e,t)=>{try{this.nE=i,this.rE&&this.rE.detachMedia(),r?this.lE(r):Object(A.h)(i.hlsFilePath)&&this.ny?this.rE=this.ny:this.lE(this.YM),i&&i.subtitle&&this.ZM.setCrossOriginAttribute(),this.ZM.setPoster(i),this.ZM.setTrackModes(this.JM?Hl.Hidden:Hl.Disabled),s&&this.ZM.setMetaLoaded(!1),this.rE.setSource(i,s),this.mediator.publish(this,We.NewVideo),e()}catch(e){Object(g.a)({message:"VideoHandler_set_video_source",exception:e.message,callStack:e.stack,level:f.ProtoLoggingLevelEnum.FATAL}),t()}})}setQuality(e){this.rE.setQuality(e)}pause(){this.ZM.pause()}play(){return this.hE=new ql.a,this.rE.attachMedia().then(()=>{this.ZM.play().then(()=>{this.hE.resolve()}).catch(e=>{!this.WM&&this.hE&&this.hE.isPending&&(this.hE.reject(),Object(g.a)({message:"VideoHandler_public_play_content_player_play",exception:e.message,callStack:e.callStack,level:f.ProtoLoggingLevelEnum.FATAL}))})}).catch(e=>{this.hE&&this.hE.isPending&&this.hE.reject(e),Object(g.a)({message:"VideoHandler_public_play_attach_media_error",exception:e.message,callStack:e.callStack,level:f.ProtoLoggingLevelEnum.FATAL})}),this.hE.promise}isPlayPending(){return this.ZM.isPlayPending()}showCaptions(){this.JM=!0,this.ZM.setTrackModes(Hl.Hidden)}hideCaptions(){this.JM=!1,this.ZM.setTrackModes(Hl.Disabled),this.currentTrack&&this.mediator.publish(this,P[P.CaptionUpdate])}destroy(){this.rE.destroy(),this.XM.parentNode.removeChild(this.XM)}QM(){this.XM=this.Ig.createElementByString('<cnx class="cnx-video-wrapper"></cnx>'),this.Ag=this.Ig.createElementByString('<video class="cnx-video-tag"></video>'),this.PP.os===Qe.b.Ios&&(this.Ag.setAttribute("playsinline",""),this.Ag.setAttribute("webkit-playsinline",""))}lE(e){this.rE=e,this.rE.setQuality({quality:Ue.Auto,height:0})}onQualityChanged(e){var t=this.ZM.playing;this.HM=this.currentTime,t&&this.rE.onQualityChanged&&this.rE.onQualityChanged().then(()=>{this.ZM.setMetaLoaded(!1),this.ZM.play().catch(e=>{Object(g.a)({message:"VideoHandler_quality_changed",exception:e.message,callStack:e.stack,level:f.ProtoLoggingLevelEnum.FATAL})})}),this.mediator.publish(this,$e.Change,{payload:e})}get currentTrack(){return this.ZM.getCurrentTrack()}cE(){this.currentTrack&&(this.currentTrack.oncuechange=null,this.mediator.publish(this,P[P.CaptionUpdate]),this.currentTrack.mode=Hl.Showing)}uE(){if(this.currentTrack){switch(this.currentTrack.mode){case Hl.Showing:case Hl.Hidden:this.JM=!0;break;case Hl.Disabled:this.JM=!1}this.mediator.publish(this,this.JM?P[P.CaptionOn]:P[P.CaptionOff])}this.DP()}}class Jl extends class{constructor(e,t,i){this.Vj=e,this.dE=t,this.fE=[],this.pE=[],this.bE=[],this.vE=[],this.mE=[],this.Jp=[],this.gE=i.title,this.Ju=i.altText,this.yE=i.description,this.Ug=i.clickUrl,this.fE=i.keywordList,this.wE=i.languageId,this.pE=i.trackList,this.xE=i.thumbnail,this.yt=i.duration,this.vE=i.customFields,this.SE=i.hlsFilePath,this.OE=i.sourceItemId,this.mE=i.videoIndexes,Object(p.h)(i.renditionList)&&(this.bE=this.kE(i.renditionList),this._E(i.renditionList))}kE(e){return e.sort((e,t)=>e.height-t.height)}setAvailableQualities(e){this.Jp=e}_E(e){Object(p.e)("height",e).forEach((e,t)=>{this.Jp.push({videoHeight:e.height,label:`${e.height}p`,isHD:720<=e.height})})}jE(t,i){return this.bE.find(e=>e.codec===t&&e.height===i)}AE(e,t){let i=`${e}${this.Vj}/`;return Object(A.h)(this.dE)?i+=`${this.dE}/${t}`:i+=t,i}IE(e,t){e=Object(Te.c)(e,this.Jp.map(e=>e.videoHeight));return this.jE(t,e)}get hlsFilePath(){return this.SE}getAvailableQualities(){return this.Jp}getClosestSourceQuality(e){let t;const i=Object(Te.c)(e,this.Jp.map(e=>e.videoHeight));return this.Jp.forEach(e=>{e.videoHeight===i&&(t=e)}),t}getSources(i,e){const s=[];return e.forEach(e=>{var t=this.IE(i,e.id);Object(p.h)(s)||t&&s.push({src:this.AE(it.a.endPoints.base.video,t.file),type:e.type})}),s}getHlsSource(){return this.AE(it.a.endPoints.base.video,this.SE)}getThumbnailUrl(e,t){var i=this.AE(it.a.endPoints.base.image,this.xE);return st.getSmartCroppedImageUrl(i,e,t)}get title(){return this.gE}get altText(){return Object(A.a)(this.Ju)?this.Ju:""}get description(){return this.yE}get clickUrl(){return this.Ug}get keywords(){return this.fE}get languageId(){return this.wE}get sourceItemId(){return this.OE}get subtitle(){if(this.pE&&this.pE[0])return this.AE(it.a.endPoints.base.video,this.pE[0].file)}get spriteSheet(){return this.CE}get duration(){return this.yt}get id(){return this.Vj}get customFields(){return this.vE}get videoIndexes(){return this.mE}}{constructor(e){super(null,null,e)}getSources(i,e){return e.map(({id:e,type:t})=>{e=this.IE(i,e);if(e)return{type:t,src:`${e.file}`}}).filter(e=>e)}getThumbnailUrl(e,t){return st.getSmartCroppedImageUrl(this.xE,e,t)}}class Kl extends El{constructor(e,t,i,s,r,n=0,o={}){super(e,t,s,r),this.Kb=i,this.NM=n,this.PP=o,this.TE=.1,this.type=f.ProtoMediaTypeEnum.Video,this.PE={[_e.Landscape]:{renditionList:[],videoSourceMeta:void 0},[_e.Portrait]:{renditionList:[],videoSourceMeta:void 0}},this.ME=null,this.getClosestSourceQuality=e=>(this.EE||this.LE(),this.PE[this.EE].videoSourceMeta.getClosestSourceQuality(e)),this.RE(),this.BE()}RE(){this.lP.videoRendition.renditions.forEach(({codec:e,height:t,width:i,videoUrl:s})=>{s={codec:ta.ProtoPlayspaceCodecEnum[e],height:t,file:s};(t<i?this.PE[_e.Landscape]:this.PE[_e.Portrait]).renditionList.push(s)});var e=this.PE[_e.Landscape].renditionList,t=this.PE[_e.Portrait].renditionList;Object(p.h)(e)||Object(p.h)(t)?(Object(p.h)(e)||(this.PE[_e.Landscape].renditionList=t),Object(p.h)(t)||(this.PE[_e.Portrait].renditionList=e)):Object(g.a)({message:"SlideVideo_no_renditions",level:f.ProtoLoggingLevelEnum.FATAL})}BE(){Object.keys(this.PE).forEach(e=>{const t=this.PE[e];t.videoSourceMeta=new Jl({title:this.lP.title,altText:this.lP.altText,clickUrl:this.lP.clickUrl,renditionList:t.renditionList,thumbnail:this.lP.imageUrl})})}DE(e){this.FE=new zl(this,this.Kb,this.Ig,e,this.Lo,this.NM,this.PP,this.TE)}$E(){this.subscribe($e.Change,this.FE,({payload:e})=>{e=this.getClosestSourceQuality(e);this.mediator.publish(this,$e.Change,{payload:e.videoHeight})})}LE(){var{clientHeight:e,clientWidth:t}=this.MT;this.EE=e<t?_e.Landscape:_e.Portrait}UE(e){let t;this.FE&&(e&&(t=this.FE.currentTime),this.FE.setSource(this.PE[this.EE].videoSourceMeta,!0).then(()=>{e&&this.FE.forceCurrentTime(t),this.FE.playing&&this.VE()}))}fP(){return Bl.a}VE(){this.FE.play().catch(()=>{})}play(){this.isLoaded&&this.VE()}pause(){this.isLoaded&&this.FE.pause()}reset(){this.dP&&(this.FE.currentTime=this.TE)}load(e){this.isLoaded||(e.appendChild(this.MT),this.isLoaded=!0,this.DE(this.MT),this.$E(),this.FE.start(),this.LE(),this.UE(),this.ME&&this.setQuality(this.ME),this.pause())}getAvailableQualities(){return this.PE[this.EE].videoSourceMeta.getAvailableQualities()}get currentQuality(){return this.FE.currentQualitySettings}get volume(){return this.isLoaded?this.FE.volume:this.NM}set volume(e){this.isLoaded?this.FE.volume=e:this.NM=e}setQuality(e){this.FE?this.FE.setQuality(e):this.ME=e}onSlideResizeCallback(){const e=this.EE;this.Ig.cancelRequestAnimationFrame(this.NE),this.NE=this.Ig.requestAnimationFrameHelper(()=>{if(this.LE(),e!==this.EE){const e=!0;this.UE(!0)}})}}class Ql{constructor(e){this.oI=e}get template(){return`\n        <cnx class="cnx-ui-ps-slide-wrapper">\n            <cnx class="cnx-ui-ps-slide"></cnx>\n            <cnx class="cnx-ui-ps-slide-bg"></cnx>\n            <cnx class="cnx-ui-ps-cta-wrapper">\n                ${this.HE()}\n            </cnx>\n        </cnx>\n        `.trim()}HE(){return this.oI.disableCTARendering?"":`[[${et.CtaButton}]]`}}class Yl extends pt{enterState(){super.enterState();const e=this.context.getComponent(et.PlayspaceProgressBar);e&&e.startProgress();const t=this.context.getComponent(et.CtaButton);t&&t.startProgress()}exitState(){super.exitState()}updateDuration(){const e=this.context.getComponent(et.PlayspaceProgressBar);e&&e.startProgress()}}class Xl extends mt{enterState(){super.enterState();const e=this.context.getComponent(et.PlayspaceProgressBar);e&&e.pauseProgress();const t=this.context.getComponent(et.CtaButton);t&&t.pauseProgress()}exitState(){super.exitState()}updateDuration(){}}class Zl extends Xl{enterState(){super.enterState()}exitState(){super.exitState()}}class ec extends Xl{enterState(){super.enterState()}exitState(){super.exitState()}}class tc extends Xl{enterState(){super.enterState()}exitState(){super.exitState()}}class ic extends vt{constructor(e,t,i,s,r,n,o,a,l){super(e,t,i,r,new fl(i,l,s,t,{isMobile:n})),this.mediator=e,this.$container=t,this.Ig=i,this.$I=o,this.pT=[et.CtaButton],this.ST=new Al,this.Sf={[Ne.PlayingState]:new Yl(this),[Ne.PausedState]:new Xl(this),[Ne.StoppedState]:new Zl(this),[Ne.HiddenState]:new ec(this),[Ne.PrerollState]:new tc(this),[Ne.PostrollState]:new tc(this)},this.qE(),this.Sf[a].enterState(),this.CT(),this.TT(!1)}qE(){const e=this.getComponent(et.CtaButton);e&&e.setFooterElement(this.$I)}CT(e=[]){this.ST.setCapabilityList(e)}TT(t=!0){const{excludedComponents:e,includedComponents:i}=this.ST.getComponentList();e.map(e=>this.getComponent(e)).forEach(e=>e&&e.hideComponent(t)),i.map(e=>this.getComponent(e)).forEach(e=>e&&e.showComponent(t))}kT(e){switch(e){case zo.CallToAction:this.mediator.publish(this,zo.GeneralClickInteraction,{payload:f.ProtoMediaClickTypeEnum.UrlClick});break;case lt.a[lt.a.Scroll]:this.mediator.publish(this,zo.GeneralClickInteraction,{payload:f.ProtoMediaClickTypeEnum.ScrollClick})}}handleComponentEvent(e,t,i){this.kT(e),e===zo.CallToAction?Object(A.h)(t.payload)?this.mediator.publish(this,zo.CallToAction,t):this.mediator.publish(this,P[P.Next]):this.mediator.publish(this,e,t)}handleCapabilityList(i){this.CT(i),this.TT(),this.pT.forEach(e=>{const t=this.getComponent(e);t&&t.handleCapabilities(i)})}}class sc extends n.a{constructor(e,t,i,s,r,n,o,a,l,c){super(),this.mediator=e,this.lP=t,this.Ig=i,this.if=s,this.Lo=r,this.zE=n,this.Yn=o,this.oI=a,this.$I=l,this.Od=c,this.WE=[{type:ga.TopLogo,metadata:{}}],this.ef=this.Ig.createElementByString(`<cnx class="${qo.Slide}"></cnx>`),this.GE(),this.JE=this.ef.querySelector(".cnx-ui-ps-slide")}get $container(){return this.ef}get slideCapabilityList(){return this.WE}get metadata(){return this.lP}get media(){return this.zE}load(){this.zE.load(this.JE)}get clickUrl(){return this.lP.clickUrl}updateCapabilityMetadata(t){if(Object(p.h)(this.WE)){const e=this.WE.find(({type:e})=>e===t.type);e&&(e.metadata=Object.assign(Object.assign({},e.metadata),t.metadata))}}changeState(e){this.qT.changeState(e)}GE(){this.qT=new ic(this,this.ef,this.Ig,this.Lo,this.fP(),this.Yn,this.$I,this.Od.playbackMode===ta.ProtoPlayerPlaybackModeEnum.ClickToPlay?Ne.StoppedState:Ne.PausedState,this.if),this.subscribe(zo.CallToAction,this.qT,({})=>{this.mediator.publish(this,zo.CallToAction)}),this.relay(zo.GeneralClickInteraction,this.qT,this,this.mediator),this.subscribe(P[P.Next],this.qT,()=>{this.mediator.publish(this,P[P.Next])})}fP(){return new Ql(this.oI).template}QE(e,t){this.WE.push({type:e,metadata:t})}XE(){var e=this.YE(this.lP);e&&this.QE(ga.TopSlideTitle,{label:e,useTransition:!0})}YE(e){var t=e.publisherName||e.title,t=this.Ig.stripHtmlTags(t).trim();return e.publisherName?`by <em>${t}</em>`:t}onSlideTransitionStart(e){this.qT&&this.qT.handleCapabilityList(e)}}class rc extends sc{constructor(e,t,i,s,r,n,o,a,l,c){super(e,t,i,s,r,n,o,a,l,c),this.type=ta.ProtoPlayspaceSlideTypeEnum.BulletList,Object(A.f)(t.bulletListMetadata)&&Object(p.h)(this.metadata.bulletListMetadata.items)?(this.KE(),this.onSlideTransitionStart(this.WE)):Object(g.a)({message:"BulletSlide_no_metadata",level:f.ProtoLoggingLevelEnum.FATAL})}KE(){this.ZE(),this.XE(),this.tL()}ZE(){const{title:e,items:t}=this.lP.bulletListMetadata;4<t.length&&(t.length=4);const i=ga.SlideTitle,s={bulletChunkList:t,titleType:ma.Bullet};Object(A.h)(e)&&(s.label=e),this.QE(i,s)}tL(){var e={label:this.lP.storyTitle,useFallbackLabel:!0};this.QE(ga.TopStoryTitle,e)}}class nc extends sc{constructor(e,t,i,s,r,n,o,a,l,c){super(e,t,i,s,r,n,o,a,l,c),this.type=ta.ProtoPlayspaceSlideTypeEnum.Description,Object(A.f)(t.descriptionMetadata)&&Object(p.h)(this.metadata.descriptionMetadata.chunkList)?(this.iL(),this.eL(),this.onSlideTransitionStart(this.WE)):Object(g.a)({message:"DescriptionSlide_no_metadata",level:f.ProtoLoggingLevelEnum.FATAL})}iL(){const{chunkList:e,label:t}=this.lP.descriptionMetadata;let i=!1;const s=e=>Object(A.e)(e);Object(A.f)(t)&&Object(A.h)(t.text)&&(i=!0,t.colorScheme=s(t.colorScheme)?t.colorScheme:ta.ProtoPlayspaceColorSchemeEnum.Primary),Object(p.h)(e)&&e.forEach((e,t)=>{e.colorScheme=0!==t||i?s(e.colorScheme)?e.colorScheme:ta.ProtoPlayspaceColorSchemeEnum.Secondary:s(e.colorScheme)?e.colorScheme:ta.ProtoPlayspaceColorSchemeEnum.Primary})}eL(){this.sL(),this.tL(),this.XE()}sL(){const{chunkList:e,label:t}=this.lP.descriptionMetadata,i=ga.SlideTitle,s={descriptionChunkList:e,titleType:ma.Description};Object(A.f)(t)&&(s.label=t.text,s.labelColorScheme=t.colorScheme),this.QE(i,s)}tL(){var e={label:this.lP.storyTitle,useFallbackLabel:!0};this.QE(ga.TopStoryTitle,e)}}const oc={[f.ProtoMediaTypeEnum.Image]:"Read more",[f.ProtoMediaTypeEnum.Video]:"Continue video"};class ac extends sc{constructor(e,t,i,s,r,n,o,a,l,c){super(e,t,i,s,r,n,o,a,l,c),this.type=ta.ProtoPlayspaceSlideTypeEnum.Default,this.eL(),this.onSlideTransitionStart(this.WE)}eL(){this.nL(),this.rL(),this.hL(),this.aL(),this.oL(),this.tL(),this.lP.publisherName&&this.XE()}nL(){var{clickUrl:e,title:t}=this.lP,t={url:e,label:t,titleType:ma.Default};this.QE(ga.SlideTitle,t)}rL(){this.QE(ga.PlaybackControls)}hL(){this.QE(ga.PlaylistControls)}oL(){var{clickUrl:e,title:t}=this.lP;Object(A.h)(e)&&(t={url:e,label:this.cL(this.lP),title:t,ctaAlignToContent:!0},this.QE(ga.CtaButton,t))}aL(){this.lP.mediaType===f.ProtoMediaTypeEnum.Video&&this.QE(ga.VolumeControls)}tL(){var e=this.Ig.stripHtmlTags(this.lP.storyTitle).trim();e&&this.QE(ga.TopStoryTitle,{label:e,useFallbackLabel:!0})}cL(e){const{capabilityList:t,mediaType:i}=e;if(!Object(p.h)(t))return oc[i];e=t.find(({type:e})=>e===ta.ProtoPlayspaceSlideCapabilitiesEnum.CtaButton);return e&&e.metadata?e.metadata.label:oc[i]}}class lc extends sc{constructor(e,t,i,s,r,n,o,a,l,c,d){super(e,t,i,s,r,n,a,l,c,d),this.uL=o,this.type=ta.ProtoPlayspaceSlideTypeEnum.Cover,this.lL(),this.eL(),this.onSlideTransitionStart(this.WE)}lL(){Object(S.a)(this.ef,ka.Cover)}eL(){this.nL(),this.oL()}nL(){var e=ga.SlideTitle,t={titleType:ma.Cover,coverChunk:this.lP.coverMetadata,label:`${this.uL} min. story`};this.QE(e,t)}oL(){var e={label:"START",duration:this.lP.slideDuration,ctaAlignToContent:!1,ctaAlignToFooter:!0};this.QE(ga.CtaButton,e)}}class cc extends sc{constructor(e,t,i,s,r,n,o,a,l,c){super(e,t,i,s,r,n,o,a,l,c),this.type=ta.ProtoPlayspaceSlideTypeEnum.Quote,Object(A.f)(t.quoteMetadata)?(this.eL(),this.onSlideTransitionStart(this.WE)):Object(g.a)({message:"QuoteSlide_no_metadata",level:f.ProtoLoggingLevelEnum.FATAL})}eL(){this.tL(),this.XE(),this.dL()}tL(){var e={label:this.lP.storyTitle,useFallbackLabel:!0};this.QE(ga.TopStoryTitle,e)}dL(){var{text:e,source:t}=this.lP.quoteMetadata,i=ga.SlideTitle,t={quote:e,source:t,titleType:ma.Quote};this.QE(i,t)}}class dc extends sc{constructor(e,t,i,s,r,n,o,a,l,c){super(e,t,i,s,r,n,o,a,l,c),this.type=ta.ProtoPlayspaceSlideTypeEnum.Instagram,this.lL(),this.eL(),this.onSlideTransitionStart(this.WE)}lL(){Object(S.a)(this.ef,ka.Instagram)}eL(){this.fL(),this.tL(),this.XE(),this.oL()}fL(){var{createdDate:e,comments:t,likes:i}=this.lP.instagramMetadata,i={label:this.lP.title,instagramMetadata:{createdDate:e,comments:t,likes:i},titleType:ma.Instagram};this.QE(ga.SlideTitle,i)}tL(){var e={label:this.lP.storyTitle,useFallbackLabel:!0};this.QE(ga.TopStoryTitle,e)}oL(){var{clickUrl:e,title:t}=this.lP;Object(A.h)(e)&&this.QE(ga.CtaButton,{url:e,label:"VISIT POST",title:t,ctaAlignToContent:!1,ctaAlignToFooter:!0})}pL(e){var t=this.metadata.instagramMetadata.handle||e.publisherName,t=this.Ig.stripHtmlTags(t).trim();return e.publisherName?`by <em>${t}</em>`:t}XE(){var e=this.pL(this.lP);e&&this.QE(ga.TopSlideTitle,{label:e,useTransition:!0})}}class hc{constructor(e,t,i,s,r,n,o,a,l,c){this.Kb=e,this.Ig=t,this.if=i,this.Lo=s,this.NM=r,this.PP=n,this.Yn=o,this.bL=a,this.$I=l,this.Od=c,this.vL={[ta.ProtoPlayspaceSlideTypeEnum.Description]:nc,[ta.ProtoPlayspaceSlideTypeEnum.Default]:ac,[ta.ProtoPlayspaceSlideTypeEnum.Quote]:cc,[ta.ProtoPlayspaceSlideTypeEnum.BulletList]:rc,[ta.ProtoPlayspaceSlideTypeEnum.Instagram]:dc}}getSlide(e,t,i){const s=this.vL[e.type]||ac,r=this.mL(e,t);return e.type!==ta.ProtoPlayspaceSlideTypeEnum.Cover?new s(t,e,this.Ig,this.if,this.Lo,r,this.Yn,this.bL,this.$I,this.Od):new lc(t,e,this.Ig,this.if,this.Lo,r,i,this.Yn,this.bL,this.$I,this.Od)}mL(e,t){if(e.mediaType===f.ProtoMediaTypeEnum.Video)return new Kl(t,e,this.Kb,this.Ig,this.Lo,this.NM,this.PP);if(e.mediaType===f.ProtoMediaTypeEnum.Image)return new Ml(t,e,this.Ig,this.Lo);throw new Error("Slide not found")}}var uc,pc,gc,mc=i(53);class fc extends n.a{constructor(e,t,i,s,r,n,o){super(),this.mediator=e,this.Ig=t,this.Lo=i,this.Od=s,this.Kb=r,this.NA=n,this.gL=o,this.yL=new mc.a(ta.ProtoPlayspaceMediaMetadataResponse,"PlayspaceContentHandler"),this.wL=0,this.xL=!1,this.SL=e=>{e&&(this.qT.onFirstTimeInView(),this.Kb.services.ViewabilityService.off(this.NA,this.SL))},this.OL(),this.GE(),this.kL(),this._L(),this.volume=this.Od.soundMode===f.ProtoPlayerSoundMode.On?1:0,this.mv(),this.Kb.services.ViewabilityService.on(this.NA,this.SL,{threshold:.5})}jL(e){return new Promise((t,i)=>{this.yL.fetchMetadata(e).then(e=>{window.parent.cnx_ps_slide_list&&Object(Ji.b)("cnx_ps_slide_list",this.Kb.config.pageUrl)&&(e.slides=[...window.parent.cnx_ps_slide_list,...e.slides]),e.slides=this.AL(e.slides),e.slides=this.IL(e.slides),2<=e.slides.length?t(e):this.xL?i({message:"fallbackstory_already_used"}):(this.xL=!0,this.CL().then(e=>{e=`${it.a.endPoints.base.metadata}${e.storyId}/${e.activeVersionId}.bin`;t(this.jL(e))}).catch(e=>{Object(g.a)({level:f.ProtoLoggingLevelEnum.FATAL,message:"PlayspaceContentH_error_getting_default_story"}),i(e)}))}).catch(e=>{i(e)})})}CL(){return new Promise((t,i)=>{ur.a.sendProtoRequest({ProtoResponse:ta.ProtoFallbackStoryResponse,endpoint:it.a.endPoints.api.fallbackstory,logError:!0}).then(e=>{t(e)}).catch(e=>{i(e)})})}AL(e){let t;if(Object(A.h)(this.Kb.config.appPageURL)){const{hostname:e,pathname:i}=Object(Je.g)(this.Kb.config.appPageURL);t=`${e}${i}`}else{const{hostname:e,pathname:s}=this.Ig.getGlobalLocationProperties();t=`${e}${s}`}return e.filter(e=>{e=Object(Je.g)(e.clickUrl);return!(e&&e.hostname+e.pathname===t)})}IL(e){return e.filter(e=>e.type!==ta.ProtoPlayspaceSlideTypeEnum.Stock)}kL(){var e=this.Kb.config.browser["browserType"],{os:t,osVersion:i}=this.Kb.config.os,s={disableCTARendering:this.Od.disableCTARendering};this.HT=new ea(this,this.Ig,this.Kb.services.PageFocusService,this.qT.$mediaContainer,new hc(this.Kb,this.Ig,this.Kb.services.InteractionService,this.Lo,this.Od.soundMode===f.ProtoPlayerSoundMode.On?1:0,{browser:e,os:t,osVersion:i},this.Kb.config.isMobile,s,this.qT.footer,this.Od),this.Od.isSeoTraffic)}OL(){this.TL={logoUrl:this.Od.logoUrl,isMobile:this.Kb.config.isMobile,closeButtonMode:this.Od.closeButtonMode,floatingCloseButtonMode:this.Od.floatingSettings.floatingCloseButtonMode,isCloseButton:this.Od.isCloseButton,sharingDestinations:this.Od.sharingDestinations,os:this.Kb.config.os.os,expandButtonEnabled:this.Od.uiComponentsVisibility.expandButton,primaryColorList:{background:this.Od.primaryColorList.background||l.l.PrimaryBackground,foreground:this.Od.primaryColorList.foreground||l.l.PrimaryForeground},secondaryColorList:{background:this.Od.secondaryColorList.background||l.l.SecondaryBackground,foreground:this.Od.secondaryColorList.foreground||l.l.SecondaryForeground},accentColorList:{background:this.Od.accentColorList.background,foreground:this.Od.accentColorList.foreground||l.l.AccentForeground},useAccentColorForProgressBar:this.Od.useAccentColorForProgressBar,disableClickUrl:this.Od.disableClickUrl,fontFamilySettings:this.Od.fontFamilySettings}}GE(){var e=new ia({disableStoryProgressBarRendering:this.Od.disableStoryProgressBarRendering,disableTitleRendering:this.Od.disableTitleRendering});this.qT=new Cl(this,this.NA,this.Kb.services.GlobalDomUtilsService,this.Kb.services.ResizeObserver,e.template,this.TL,this.Kb.config.appId,this.Od.playbackMode===f.ProtoPlayerPlaybackModeEnum.ClickToPlay?Ne.StoppedState:Ne.PausedState,this.Kb.services.InteractionService),this.qT.setMediaContainerRatio(this.gL.getContentRatioContainer()),this.qT.show()}mv(){this.subscribe(Qo.SlideTransitionStart,this.HT,({payload:{nextSlide:e}})=>{const t=e;let i=[];t.media.type===f.ProtoMediaTypeEnum.Video&&(i=t.media.getAvailableQualities(),this.qT.updateQuality(t.media.currentQuality)),this.qT.updateQualityMenu(i),this.qT.onSlideTransitionStart(t.slideCapabilityList),t.onSlideTransitionStart(t.slideCapabilityList)}),this.subscribe(Qo.SlideTransitionEnd,this.HT,()=>{this.qT.onSlideTransitionEnd()}),this.subscribe(Qo.SlideTimeUpdate,this.HT,({payload:{elapsedTime:e,duration:t}})=>{this.qT.onSlideTimeUpdate(e,t)}),this.subscribe(Qo.SlideChanged,this.HT,({payload:{index:e}})=>{this.qT.setCurrentIndex(e),this.qT.setDuration(this.HT.remainingTime),this.mediator.publish(this,Jo.ChangeSlide)}),this.subscribe(Qo.SlideCycleEnd,this.HT,()=>{this.PL.handleSlidesEnd()}),this.subscribe($e.Change,this.HT,({payload:e})=>{var t=this.HT.getCurrentSlide();t&&t.media.type===f.ProtoMediaTypeEnum.Video&&this.qT.updateQuality(t.media.currentQuality),this.mediator.publish(this,$e.Change,{payload:e})}),this.subscribe(P[P.Play],this.qT,()=>{this.mediator.publish(this,o.b.UserInteraction,{payload:{playback:!0}}),this.play(!0)}),this.subscribe(P[P.Pause],this.qT,()=>{this.mediator.publish(this,o.b.UserInteraction,{payload:{playback:!1}}),this.pause(!0)}),this.subscribe(P[P.Volume],this.qT,({payload:e})=>{this.volume=e,this.mediator.publish(this,o.b.UserInteraction,{payload:{volume:!0}}),this.mediator.publish(this,P[P.Volume],{payload:{volume:e}})}),this.subscribe(P[P.Close],this.qT,()=>{this.mediator.publish(this,o.b.UserInteraction,{payload:{playback:!1}}),this.mediator.publish(this,P[P.Close])}),this.subscribe(P[P.LogoClicked],this.qT,()=>{this.mediator.publish(this,P[P.LogoClicked])}),this.subscribe(zo.ProgressBarItemClicked,this.qT,({payload:e})=>{this.mediator.publish(this,o.b.UserInteraction,{payload:{playback:!0}}),this.setSlide(e),this.mediator.publish(this,zo.ProgressBarItemClicked,{payload:e})}),this.subscribe(zo.CallToAction,this.HT,()=>{this.mediator.publish(this,zo.CallToAction)}),this.subscribe(P[P.Expand],this.qT,()=>{this.mediator.publish(this,P[P.Expand])}),this.subscribe(P[P.Collapse],this.qT,()=>{this.mediator.publish(this,P[P.Collapse])}),this.subscribe(lt.a[lt.a.HoldStart],this.qT,()=>{this.PL.pauseToggle()}),this.subscribe(lt.a[lt.a.HoldEnd],this.qT,()=>{this.PL.pauseToggle()}),this.subscribe(lt.a[lt.a.TapLeft],this.qT,()=>{this.ML(),this.goToPrevSlide()}),this.subscribe(lt.a[lt.a.TapRight],this.qT,()=>{this.ML(),this.goToNextSlide()}),this.subscribe(lt.a[lt.a.SwipeEnd],this.qT,({payload:e})=>{e===kl.d.Left?this.PL.goToNextSlide():this.PL.goToPrevSlide()}),this.subscribe(lt.a[lt.a.SwipeMove],this.qT,({payload:e})=>{this.HT.offsetSlides(e)}),this.subscribe(P[P.Quality],this.qT,({payload:e})=>{this.HT.setQuality(e)}),this.subscribe(P[P.Next],this.qT,()=>{this.ML(),this.goToNextSlide()}),this.subscribe(P[P.Next],this.HT,()=>{this.ML(),this.goToNextSlide()}),this.subscribe(P[P.Prev],this.qT,()=>{this.ML(),this.goToPrevSlide()}),this.relay(zo.GeneralClickInteraction,this.qT,this,this.mediator),this.relay(zo.GeneralClickInteraction,this.HT,this,this.mediator)}EL(){if(Object(A.a)(this.Od.storyMetadata)){var i=this.Od.storyMetadata;this.LL(i)}else{let{storyId:e,activeVersion:t}=this.Od;i=Object(Ji.b)("cnx_force_fallback",this.Kb.config.pageUrl);i&&(e="00000000-0000-0000-0000-000000000002",t=i);i=`${it.a.endPoints.base.metadata}${e}/${t}.bin`;Object(A.h)(t)?this.jL(i).then(e=>{this.LL(e)}).catch(()=>{this.RL()}):this.RL()}}RL(){this.CL().then(e=>{e=`${it.a.endPoints.base.metadata}${e.storyId}/${e.activeVersionId}.bin`;return this.jL(e)}).then(e=>{this.LL(e)})}LL(t){t.slides=t.slides.map(e=>Object.assign(Object.assign({},e),{storyTitle:t.storyTitle,publisherName:this.Od.publisherName})),this.HT.start(t.slides),this.qT.setTotalSlides(t.slides.length);var e=this.Od.storyPosition&&this.Od.storyPosition<t.slides.length?this.Od.storyPosition:0;this.HT.setCurrentSlide(e),this.mediator.publish(this,Ko.ContentHandlerReady)}_L(){var{preRollBreak:e,postRollBreak:t}=this.Od,e=Object(A.e)(e),t=Object(A.e)(t);this.PL=new xl(this,this.HT,this.qT,e,t,this.Od.endOfSlideCycleMode,null!==this.Od.storyPosition),this.BL()}BL(){this.subscribe(wl.StateChanged,this.PL,({payload:e})=>{this.qT.changeState(e);const t=this.HT.getCurrentSlide();t&&t.changeState(e),this.mediator.publish(this,Ko.StateChanged,{payload:e})}),this.subscribe(wl.ContentReset,this.PL,()=>{this.mediator.publish(this,Ko.NewStory)}),this.relay([Ko.ContentStart,Ko.ContentEnd],this.PL,this,this.mediator)}ML(){this.mediator.publish(this,o.b.UserInteraction,{payload:{playback:!0}})}setViewabilityState(e){this.PL.setViewabilityState(e)}goToNextSlide(){this.PL.goToNextSlide()}goToPrevSlide(){this.PL.goToPrevSlide()}getNextSlide(){return this.HT.getNextSlide()}getCurrentThumbnailUrlParams(e,t){return this.HT.getCurrentThumbnailUrlParams(e,t)}getCurrentMetadata(){return this.HT.getCurrentMetadata()}start(){this.EL()}get volume(){return this.wL}set volume(e){this.wL=e,this.HT.setVolume(e),this.qT.updateVolume(e)}play(e){this.PL.play(e)}pause(e){this.PL.pause(e)}show(){this.PL.show()}hide(){this.PL.hide()}enterFullscreen(){this.qT.expand()}exitFullscreen(){this.qT.collapse()}setSlide(e){this.play(!1),this.PL.setCurrentSlide(e)}onResize(){this.HT.onPlayerContainerResize(),this.qT.onResizeUi(this.HT.remainingTime,this.HT.isPlaying)}get currentSlideIndex(){return this.HT.currentSlideIndex}get slides(){return this.HT.slides}updateCtaLabel(e,t){t={type:ga.CtaButton,metadata:{label:t}};this.HT.updateCapabilityMetadata(e,t),e===this.HT.currentSlideIndex&&this.qT.updateCapabilityMetadata(t)}get slidesMetadata(){return this.HT.slidesMetadata}toggleExpandButton(e){e?this.qT.showExpandButton():this.qT.hideExpandButton()}getQuality(){return this.HT.getQuality()}setQuality(e){e={height:e,quality:Ue.Strict};this.HT.setQuality(e)}stop(){this.PL&&this.PL.stop()}resume(){this.PL&&this.PL.resume()}startContent(){this.PL.exitRollBreak()}destroy(){this.HT&&this.HT.destroy(),this.qT&&this.qT.destroy()}}const yc={lg:630,md:400,sm:320,xs:0},bc={[f.ProtoDeviceType.Desktop]:Object.assign({},yc),[f.ProtoDeviceType.Tablet]:Object.assign({},yc),[f.ProtoDeviceType.Smartphone]:Object.assign({},yc)};(Hn=uc=uc||{})[Hn.Play=0]="Play",Hn[Hn.Pause=1]="Pause";class vc{constructor(e,t){switch(this.mediator=e,this.inView=!1,this.DL=!1,this.FL=!1,this.$L=()=>{},t){case f.ProtoPlayerPlaybackModeEnum.Autoplay:this.UL(this.VL);break;case f.ProtoPlayerPlaybackModeEnum.ClickToPlay:this.UL(this.NL);break;case f.ProtoPlayerPlaybackModeEnum.ScrollToPlay:this.UL(this.HL)}}UL(e){this.$L=()=>{this.DL||e.call(this)}}VL(){!this.FL&&this.inView&&(this.FL=!0,this.mediator.publish(this,uc[uc.Play]))}HL(){this.inView?this.mediator.publish(this,uc[uc.Play]):this.mediator.publish(this,uc[uc.Pause])}NL(){}setViewability(e){this.inView=e,this.$L()}setUserPlayback(e){!this.FL&&e&&(this.FL=e),this.DL=!e}}(Hn=pc=pc||{}).enter="enterFullscreen",Hn.exit="exitFullscreen";class Pc{constructor(e,t,i,s){if(this.mediator=e,this.Ig=t,this.ir=s,this.qL=!1,this.zL=1e3,this.WL=!0,this.wl=!1,this.GL=()=>{this.qL&&this.JL()},this.QL=e=>{this.qL?null!==this.fullscreenElement?this.JL():this.XL():this.mediator.publish(this,pc.exit)},this.XL=()=>{this.wl=!1,this.YL.reject(),this.qL=!1,clearTimeout(this.KL)},this.MP=s&&s===Qe.b.Ios?i.getElementsByTagName("video")[0]:i,!this.MP)throw new Error("element is missing");try{const e=this.ZL();if(null==e)return void(this.WL=!1);this.tR=e.keys,this.iR=e.name,this.QP()}catch(e){this.WL=!1,Object(g.a)({message:"Fullscreen init failed",exception:e.message,callStack:e.stack,level:f.ProtoLoggingLevelEnum.FATAL})}}ZL(){return this.ir===Qe.b.Ios?this.Ig.getFullscreenKeys(this.MP):this.Ig.getFullscreenKeys()}get fullscreenElement(){return this.Ig.getDocumentProperty(this.tR.fullscreenElement)}get fullscreenEnabled(){return this.Ig.getDocumentProperty(this.tR.fullscreenEnabled)}enterFullScreen(){if(this.WL){this.YL=new ql.a,this.qL=!0,clearTimeout(this.KL),this.KL=setTimeout(this.XL,this.zL);try{this.MP[this.tR.requestFullscreen]()}catch(e){this.XL()}return this.YL.promise}}exitFullScreen(){try{this.Ig.exitFullscreen(this.tR.exitFullscreen,this.ir===Qe.b.Ios?this.MP:void 0)}catch(e){Object(g.a)({message:"fullscreen_exit",exception:e.message,callStack:e.stack,level:f.ProtoLoggingLevelEnum.WARNING})}this.wl=!1}QP(){this.iR===Ai.d.Moz||this.iR===Ai.d.Ms?(this.Ig.addEventListenerOnGlobal(this.tR.fullscreenchange,this.QL),this.Ig.addEventListenerOnGlobal(this.tR.fullscreenerror,this.XL)):(this.MP.addEventListener(this.tR.fullscreenchange,this.QL),this.MP.addEventListener(this.tR.fullscreenerror,this.XL)),this.ir===Qe.b.Ios&&(this.MP.addEventListener("webkitbeginfullscreen",this.GL),this.MP.addEventListener("webkitendfullscreen",this.QL))}eR(){this.iR===Ai.d.Moz||this.iR===Ai.d.Ms?(this.Ig.removeEventListenerOnGlobal(this.tR.fullscreenchange,this.QL),this.Ig.removeEventListenerOnGlobal(this.tR.fullscreenerror,this.XL)):(this.MP.removeEventListener(this.tR.fullscreenchange,this.QL),this.MP.removeEventListener(this.tR.fullscreenerror,this.XL)),this.ir===Qe.b.Ios&&(this.MP.removeEventListener("webkitbeginfullscreen",this.GL),this.MP.removeEventListener("webkitendfullscreen",this.QL))}JL(){this.wl=!0,this.mediator.publish(this,pc.enter),this.YL.resolve(),this.qL=!1,clearTimeout(this.KL)}get isFullscreen(){return this.wl}destroy(){this.isFullscreen&&this.exitFullScreen(),this.eR(),this.YL&&this.YL.isPending&&this.YL.reject()}}const Sc={xl:720,lg:320,md:204,sm:142,xs:0},Ic={[f.ProtoDeviceType.Desktop]:{xl:468,lg:388,md:248,sm:142,xs:0},[f.ProtoDeviceType.Tablet]:Object.assign({},Sc),[f.ProtoDeviceType.Smartphone]:Object.assign({},Sc)},Tc={xl:720,lg:320,md:204,sm:142,xs:0},Ac=(Object.assign({},Tc),Object.assign({},Tc),{xl:Tc.xl+176,lg:Tc.lg+160,md:Tc.md+144,sm:Tc.sm+112}),Oc=(Object.assign({},Ac),Object.assign({},Ac),{lg:320,md:204,sm:0}),kc=(Object.assign({},Oc),Object.assign({},Oc),{xxl:1080,xl:0}),Cc=(Object.assign({},kc),Object.assign({},kc),Object.assign(Object.assign({},O.b),Yo));(Hn=gc=gc||{})[Hn.PlayerOrientationChange=0]="PlayerOrientationChange",Hn[Hn.MainOrientationChange=1]="MainOrientationChange";class wc{constructor(e,t,i,s){this.mediator=e,this.Jn=t,this.sR=i,this.Os=s,this.nR={current:null,previous:null},this.rR={current:null,previous:null},this.hR=!1}setFloatingModule(e){this.aR=e}start(e){this.dh=e,this.oR(this.Jn.orientation),this.cR(this.Jn.orientation)}forceOrientation(e){this.hR=!1,this.setMainOrientation(e),this.setPlayerClassByOrientation(e),this.hR=!0}setPlayerClassByOrientation(e=this.Jn.orientation){this.oR(e),this.nR.previous&&this.nR.current===this.nR.previous||(this.uR(this.sR),this.nR.previous=this.nR.current,this.mediator.publish(this,gc[gc.PlayerOrientationChange],{payload:this.nR.current}))}setMainOrientation(e=this.Jn.orientation){this.cR(e),this.rR.previous&&this.rR.previous===this.rR.current||(this.rR.previous=this.rR.current,this.mediator.publish(this,gc[gc.MainOrientationChange],{payload:this.rR.current}))}get playerOrientation(){return this.nR.current}get mainOrientation(){return this.rR.current}shouldChangeMainOrientation(){return!this.$o()}oR(e){this.nR.current=this.lR(e)}cR(e){this.rR.current=this.dR(e)}lR(e){return this.$o()?ta.ProtoPlayerOrientationEnum.Landscape:this.hR?this.rR.current:e!==ta.ProtoPlayerOrientationEnum.Mixed?e:this.fR()}dR(e){return this.hR?this.rR.current:e!==ta.ProtoPlayerOrientationEnum.Mixed?e:this.fR()}$o(){return this.aR&&this.aR.isInFloating}fR(){return this.Os.getViewportWidth()<this.Jn.orientationBreakpoint?ta.ProtoPlayerOrientationEnum.Portrait:ta.ProtoPlayerOrientationEnum.Landscape}uR(e){this.nR.previous?Object(S.O)(this.dh,e(this.nR.previous),e(this.nR.current)):Object(S.a)(this.dh,e(this.nR.current))}}class xc{constructor(e){this.Ig=e,this.pR=[]}createRatioContainer(e){var t=this.bR();return this.pR.push(t),this.setRatio(e),t}setRatio(e){this.vR=e,this.mR()}bR(){return this.Ig.createElementByString(`<cnx class='${l.c}'></cnx>`)}mR(){this.pR.forEach(e=>{Object(S.Q)(e,{"padding-bottom":`${this.vR}%`})})}}class Ec{constructor(e,t){this.gR={width:1,height:1},this.yR=e,this.wR=t}start(e){this.xR(e)}getComputedPlayspaceRatio(e){return this.SR(e)/this.OR(e)*100}getComputedContentRatio(e){return this.kR(e)/this._R(e)*100}xR(e){this.jR=e}OR(e){if(e!==ta.ProtoPlayerOrientationEnum.Landscape)return this.wR.width;{if(!this.jR.clientWidth)return this.yR.width;const e=this.AR();return this.jR.clientWidth/e}}SR(e){return e===ta.ProtoPlayerOrientationEnum.Landscape?this.jR.clientWidth?this.IR()/this.AR():this.yR.height:this.wR.height}IR(){return this.yR.height/this.yR.width*this.jR.clientWidth+72}AR(){var e=this.IR();return Object(Te.d)(this.jR.clientWidth,e)}_R(e){return(e===ta.ProtoPlayerOrientationEnum.Landscape?this.yR:this.gR).width}kR(e){return(e===ta.ProtoPlayerOrientationEnum.Landscape?this.yR:this.gR).height}}class Lc extends n.a{constructor(e,t,i,s,r){super(),this.mediator=e,this.Jn=t,this.Ig=r,this.CR(),this.TR=new Ec(i,s),this.PR=new xc(r),this.MR=new xc(r)}setFloatingModule(e){this.ER.setFloatingModule(e),this.setRatio()}start(e,t){this.ER.start(e),this.TR.start(t)}getPlayspaceRatioContainer(){return this.PR.createRatioContainer(this.LR())}getContentRatioContainer(){return this.MR.createRatioContainer(this.RR())}setRatio(e=!1){this.ER.setPlayerClassByOrientation(),(e||this.ER.shouldChangeMainOrientation())&&(this.ER.setMainOrientation(),this.PR.setRatio(this.LR())),this.MR.setRatio(this.RR())}getOrientation(){return this.ER.playerOrientation}setOrientation(e){this.ER.forceOrientation(e),this.PR.setRatio(this.LR()),this.MR.setRatio(this.RR())}CR(){this.ER=new wc(this,this.Jn,this.sR,this.Ig),this.subscribe(gc[gc.PlayerOrientationChange],this.ER,({payload:e})=>{this.mediator.publish(this,gc[gc.PlayerOrientationChange],{payload:e})}),this.subscribe(gc[gc.MainOrientationChange],this.ER,({payload:e})=>{this.mediator.publish(this,gc[gc.MainOrientationChange],{payload:e})})}LR(){var e=this.ER.mainOrientation;return this.TR.getComputedPlayspaceRatio(e)}RR(){var e=this.ER.playerOrientation;return this.TR.getComputedContentRatio(e)}sR(e){return e===ta.ProtoPlayerOrientationEnum.Portrait?Ho.OrientationPortrait:Ho.OrientationLandscape}}const Mc={PlaybackModeEnum:{AutoPlay:f.ProtoPlayerPlaybackModeEnum.Autoplay,ScrollToPlay:f.ProtoPlayerPlaybackModeEnum.ScrollToPlay,ClickToPlay:f.ProtoPlayerPlaybackModeEnum.ClickToPlay},DefaultSoundModeEnum:{On:f.ProtoPlayerSoundMode.On,Off:f.ProtoPlayerSoundMode.Mute,OnHover:f.ProtoPlayerSoundMode.Hover},InsertPositionEnum:{WithinContainer:f.ProtoPlayerInsertMode.WithinContainer,BeforeContainer:f.ProtoPlayerInsertMode.BeforeContainer,AfterContainer:f.ProtoPlayerInsertMode.AfterContainer,ReplaceContainer:f.ProtoPlayerInsertMode.ReplaceContainer,HideContainer:f.ProtoPlayerInsertMode.HideContainer},CloseButtonModeEnum:{Off:f.ProtoPlayerCloseButtonMode.Off,On:f.ProtoPlayerCloseButtonMode.OnHover,OnAfterFirstAd:f.ProtoPlayerCloseButtonMode.OnHoverAfterFirstAd,OnHover:f.ProtoPlayerCloseButtonMode.OnHover,OnHoverAfterFirstAd:f.ProtoPlayerCloseButtonMode.OnHoverAfterFirstAd,AlwaysOn:f.ProtoPlayerCloseButtonMode.AlwaysOn},QualityEnum:Hc,LineItemExcludedSlotsEnum:{PreRoll:f.ProtoAdSlotsEnum.PreRoll,MidRoll:f.ProtoAdSlotsEnum.MidRoll,PostRoll:f.ProtoAdSlotsEnum.PostRoll},ErrorTypesEnum:{SetupError:O.a.SetupError,NoPlayer:O.a.NoPlayer},FloatingModeEnum:{Off:f.ProtoPlayerFloatingMode.Off,OnPageLoad:f.ProtoPlayerFloatingMode.OnPageLoad,AfterInView:f.ProtoPlayerFloatingMode.AfterInView,Always:f.ProtoPlayerFloatingMode.Always},FloatingDevicesEnum:{Desktop:f.ProtoDeviceType.Desktop,Smartphone:f.ProtoDeviceType.Smartphone,Tablet:f.ProtoDeviceType.Tablet,Other:f.ProtoDeviceType.GameConsole},FloatingFixedPositionModeEnum:{Page:f.ProtoFloatingFixedPositionMode.Page,Element:f.ProtoFloatingFixedPositionMode.Element},FloatingScrollPositionEnum:{BottomRight:f.ProtoPositionMode.BottomRight,BottomLeft:f.ProtoPositionMode.BottomLeft,TopRight:f.ProtoPositionMode.TopRight,TopLeft:f.ProtoPositionMode.TopLeft},FloatingStatesEnum:{Float:b.Float,Embed:b.Embed},ImplementationTypeEnum:{Amp:f.ProtoImplementationType.Amp,Web:f.ProtoImplementationType.Web}},Rc=Object.assign(Object.assign({},Mc),{EndOfSlideCycleEnum:{Loop:ta.ProtoEndOfSlideCycleMode.Loop,Stop:ta.ProtoEndOfSlideCycleMode.Stop},LayoutEnum:{Portrait:_e.Portrait,Landscape:_e.Landscape},OrientationEnum:{Mixed:ta.ProtoPlayerOrientationEnum.Mixed,Portrait:ta.ProtoPlayerOrientationEnum.Portrait,Landscape:ta.ProtoPlayerOrientationEnum.Landscape}});class Bc extends De{constructor(e,t,i,s){super(e,t,i,s),this.mediator=e,this.controlData=i,this.BR=0,this.DR=0,this.onStop(),this.Mu.slides=!1,this.FR()}$R(){this.controlData.minSlidesBeforeFirstAd&&this.DR<=this.controlData.minSlidesBeforeFirstAd&&(this.Mu.slides=!0)}UR(){this.controlData.slidesBetweenAds&&this.BR<=this.controlData.slidesBetweenAds&&(this.Mu.slides=!0)}FR(){this.Mu.slides=!1,this.firstAdBreakStarted?this.UR():this.$R(),this.toggleEnableAds()}canEnableAds(){var e=super.canEnableAds();return e.enableAds&&this.currentPlayerAdSlot===f.ProtoAdSlotsEnum.MidRoll&&this.Mu.slides&&this.qu?{enableAds:!1,disableReason:be.TimeoutBetweenAds}:e}contentPlaybackStateChanged(e){}slideChanged(){this.BR++,this.DR++,this.FR()}onAdImpression(e){this.BR=0,super.onAdImpression(e)}onAdFinished(e,t=!1){t||this.FR(),super.onAdFinished(e,t)}contentChanged(){this.FR(),super.contentChanged()}}class jc{constructor(e,t,i,s,r=1200){this.VR=e,this.NR=t,this.HR=i,this.qR=s,this.zR=r,this.WR=null,this.GR=!1,this.JR=()=>{if(this.g_(),!this.GR&&this.NR&&this.NR.adInWin)return this.GR=!0,void this.QR(this.zR);this.VR.startContent()}}destroy(){this.g_()}changeState(e){switch(e){case Ne.PrerollState:this.GR=!1,this.QR(this.HR);break;case Ne.PostrollState:this.GR=!1,this.QR(this.qR);break;default:this.WR&&this.g_()}}g_(){clearTimeout(this.WR),this.WR=null}QR(e){this.g_(),this.WR=setTimeout(this.JR,e)}}class Dc extends Ze{constructor(){super(...arguments),this.Gd=bc,this.Jd=l.p,this.Ud=288,this.yR={width:16,height:9},this.wR={width:4,height:5},this.events=Object.assign({},Cc),this.XR=()=>{this.YR(),this.KR(),this.Od.adPlaybackMode===ta.ProtoAdPlaybackMode.Autoplay&&this.Od.playbackMode!==ta.ProtoPlayerPlaybackModeEnum.ClickToPlay&&0===this.Od.preRollBreak&&this.ld(ta.ProtoAdSlotsEnum.MidRoll),this.mediator.publish(this,Cc.Ready)},this.ZR=()=>{this.tB.enterFullScreen().then(()=>{this.iB()}).catch(()=>{Object(g.a)({message:"PlayspaceExperience_enterFullscreen",level:f.ProtoLoggingLevelEnum.WARNING})})},this.Ld=()=>{this.VR.exitFullscreen(),this.floatingModule&&this.floatingModule.fullscreenStateChange(!1),this.mediator.publish(this,Cc.FullscreenChanged,{payload:!1}),super.Ld()},this.Ed=()=>{this.mediator.publish(this,Cc.FullscreenChanged,{payload:!0}),super.Ed()}}Jl(){var e={orientation:this.Od.orientation,orientationBreakpoint:this.Od.orientationBreakpoint};this.eB=new Lc(this,e,this.yR,this.wR,this.app.services.GlobalDomUtilsService),this.subscribe(gc[gc.PlayerOrientationChange],this.eB,({payload:e})=>{this.mediator.publish(this,Cc.LayoutChanged,{payload:Rc.LayoutEnum[ta.ProtoPlayerOrientationEnum[e]]})}),this.subscribe(gc[gc.MainOrientationChange],this.eB,({payload:e})=>{switch(e){case ta.ProtoPlayerOrientationEnum.Landscape:Object(S.N)(this.$experienceContainer,"maxWidth");break;case ta.ProtoPlayerOrientationEnum.Portrait:Object(S.Q)(this.$experienceContainer,{maxWidth:`${bc[this.app.config.device].lg-1}px`})}})}sB(e){this.eB.setFloatingModule(e)}generateHTML(){this.$playerWrapper=this.app.services.GlobalDomUtilsService.createElementByString(`<cnx class="${l.b.PlayerWrapper}"></cnx>`),this.$playerContainer=this.app.services.GlobalDomUtilsService.createElementByString(`<cnx class="${qo.Container}"></cnx>`),this.eB.start(this.$playerContainer,this.$playerWrapper),this.addPlayerSize(),this.$experienceContainer.appendChild(this.$playerWrapper),this.$playerWrapper.appendChild(this.$playerContainer),this.eB.setRatio(),this.nB()}nB(){this.rB=this.app.services.GlobalDomUtilsService.createElementByString(`<cnx class="${qo.ImageWrapper} ${qo.ImageBackground}"></cnx>`),this.$playerWrapper.appendChild(this.rB)}hB(){return this.VR.getCurrentThumbnailUrlParams(this.$experienceContainer.clientWidth,this.$experienceContainer.clientHeight)}aB(){var e=this.hB();if(e){const{imageUrl:t,altText:i,width:s,height:r,queryParams:n}=e,o=this.Gl.getImage(t,i,s,r,n,!0);o&&(o.className=l.b.ImagePlaceholder,this.oB&&this.rB.removeChild(this.oB),this.rB.appendChild(o),this.oB=o,this.adHandler&&this.adHandler.setAdLoadingBackgroundUrl(t))}}cB(){this.floatingModule&&this.floatingModule.canFloat()&&this.aB()}uB(e=!1){this.rB&&(e?Object(S.a):Object(S.L))(this.rB,qo.MediaLogo)}addPlayerSize(){var e=this.eB.getPlayspaceRatioContainer();this.$playerWrapper.appendChild(e),Object(S.a)(this.$playerWrapper,l.i.Responsive)}handleClose(){this.mediator.publish(this,Cc.CloseButtonClicked),this.$o()?(this.floatingModule.destroy(),this.pause()):this.tB&&this.tB.isFullscreen?this.tB.exitFullScreen():this.triggerDestroy()}getVolume(){return this.VR.volume}setNewVolume(e){super.setNewVolume(e),this.VR.volume=e,this.Dr(e)}destroy(){var e;super.destroy(),null===(e=this.lB)||void 0===e||e.destroy(),this.VR&&this.VR.destroy(),this.tB&&this.tB.destroy()}dB(){this.VR=new fc(this,this.app.services.GlobalDomUtilsService,this.app.services.ResizeObserver,this.Od,this.app,this.$playerContainer,this.eB),this.subscribe(Ko.ContentHandlerReady,this.VR,this.XR),this.Od.isCloseButton&&this.subscribe(P[P.Close],this.VR,()=>this.handleClose()),this.subscribe(P[P.Volume],this.VR,({payload:{volume:e}})=>{this.Dr(e),this.adHandler&&this.adHandler.setVolume(e)}),this.subscribe(Ko.StateChanged,this.VR,({payload:e})=>{var t;null===(t=this.lB)||void 0===t||t.changeState(e),this.fB(e),e===Ne.PlayingState&&this.Xd(),this.pB(e)}),this.subscribe(Jo.ChangeSlide,this.VR,()=>{this.Cl.slideChanged();var e,t=this.bB();this.aB(),this.floatingModule&&this.floatingModule.canFloat()&&(e=t&&t.mediaContext===ta.ProtoMediaContextEnum.Logo,this.uB(e)),this.app.services.TrackingService.updateMediaMetadata(this.vB()),this.mediator.publish(this,Cc.ChangeSlide,{payload:t})}),this.subscribe(Ko.NewStory,this.VR,()=>{this.gd(),this.YR()}),this.subscribe(Ko.ContentStart,this.VR,()=>{this.app.services.TrackingService.setMediaStart(),this.mediator.publish(this,Cc.ContentStart,{payload:this.getStoryMetadata()})}),this.subscribe(Ko.ContentEnd,this.VR,()=>{this.app.services.TrackingService.trackMediaQuartile(f.ProtoQuartilesEnum.Fourth),this.mediator.publish(this,Cc.ContentComplete,{payload:this.getStoryMetadata()})}),this.floatingModule&&this.subscribe(o.b.UserInteraction,this.VR,this.Nl),this.subscribe(zo.ProgressBarItemClicked,this.VR,({payload:e})=>{this.mediator.publish(this,Cc.ProgressBarItemClicked,{payload:this.mB(e)})}),this.subscribe(P[P.Volume],this.adHandler,({payload:{volume:e}})=>{this.Dr(e),this.VR.volume=e}),this.subscribe(zo.CallToAction,this.VR,()=>{this.mediator.publish(this,Cc.CallToAction,{payload:this.bB()})}),this.subscribe(P[P.LogoClicked],this.VR,()=>{this.mediator.publish(this,Cc.BrandingClicked)}),this.subscribe($e.Change,this.VR,({payload:e})=>{this.ME!==e&&(this.ME=e,this.mediator.publish(this,Cc.QualityChanged,{payload:e}))}),this.subscribe(zo.GeneralClickInteraction,this.VR,({payload:e})=>{this.app.services.TrackingService.trackMediaClick(e)}),this.VR.start()}gB(e,t){var{preRollBreak:i,postRollBreak:s}=this.Od;this.lB=new jc(e,t,i,s)}fB(e){switch(e){case Ne.PlayingState:this.ld(ta.ProtoAdSlotsEnum.MidRoll);break;case Ne.PrerollState:this.ld(ta.ProtoAdSlotsEnum.PreRoll);break;case Ne.PostrollState:this.ld(ta.ProtoAdSlotsEnum.PostRoll);break;case Ne.PausedState:this.Od.adViewabilityPolicy===f.ProtoAdViewabilityPolicy.Default&&!this.yB.inView||this.Cl.onStop();break;case Ne.StoppedState:this.Cl.onStop()}}pB(e){switch(e){case Ne.PlayingState:this.app.services.TrackingService.setSessionPlayback(!0),this.mediator.publish(this,Cc.Play,{payload:this.bB()});break;case Ne.PausedState:this.mediator.publish(this,Cc.Pause,{payload:this.bB()}),this.app.services.TrackingService.setSessionPlayback(!1);break;case Ne.StoppedState:this.mediator.publish(this,Cc.ContentComplete,{payload:this.getStoryMetadata()}),this.app.services.TrackingService.setSessionPlayback(!1);break;default:this.app.services.TrackingService.setSessionPlayback(!0)}}KR(){this.yB=new vc(this,this.Od.playbackMode),this.subscribe(uc[uc.Play],this.yB,()=>{this.VR.play(!1)}),this.subscribe(uc[uc.Pause],this.yB,()=>{this.VR.pause(!1)}),this.subscribe(o.b.UserInteraction,this.VR,({payload:{playback:e}})=>{Object(A.a)(e)&&this.yB.setUserPlayback(e)}),this.yB.setViewability(this.app.services.ViewabilityService.check({element:this.$playerContainer,threshold:this.ul}))}wB(){this.adHandler&&(this.adHandler.start(this.$playerContainer.clientWidth,this.$playerContainer.clientHeight,this.Od.soundMode===ta.ProtoPlayerSoundMode.On?1:0),this.Cl.forceRecheck())}Tl(){var e=this.getNextSlide();this.adHandler.setContinueReadingCard({imageSrc:e.metadata.imageUrl,title:e.metadata.title}),super.Tl(),this.VR.hide()}Sd(){this.vd.isInAdPod()?this.kd(()=>{this.Cl.onAdFinished(this.adHandler.inImpression,this.vd.isInAdPod()),super.Sd(),this.VR.show()}):(super.Sd(),this.VR.show())}wd(){return new Go(this,this.Od,this.$playerContainer,this.checkFloatingViewability(this.isViewable()),this.vd,this.app)}jd(){return new Bc(this,this.isViewable(),{minSlidesBeforeFirstAd:this.Od.minSlidesBeforeFirstAd,slidesBetweenAds:this.Od.slidesBetweenAds,numberOfMidRolls:this.Od.midRollNumber,viewabilityPolicy:this.Od.adViewabilityPolicy,maxAdSlotDuration:this.vd.getMaxAdSlotDuration(),maxAdPodDuration:this.vd.getMaxAdPodDuration(),playerDimensions:{width:this.$playerContainer.offsetWidth,height:this.$playerContainer.offsetHeight},playerAdsSkippability:this.Od.adSkippability,adsMustBeSkippableIfLongerThan:this.Od.adsMustBeSkippableIfLongerThan},this.app)}zr(){super.zr(),this.VR&&this.VR.onResize(),this.eB.setRatio(),this.cB(),this.xB.updateWidth(this.$playerContainer.clientWidth)}$o(){return this.floatingModule&&this.floatingModule.isInFloating}Mc(e,t=!1){super.Mc(e,t),this.yB&&this.yB.setViewability(e),this.VR&&this.VR.setViewabilityState(e)}SB(){var e=this.app.services.GlobalDomUtilsService.getGlobalClosestTop().topFrame.document.body;this.app.services.ResizeObserver.on(e,()=>{this.eB.setRatio(!0)})}Rl(){return{isAutoPlay:this.Od.playbackMode===ta.ProtoPlayerPlaybackModeEnum.Autoplay,isSkippable:!0,skipOffset:0}}start(){try{super.start(),this.sB(this.floatingModule),this.dB(),this.wB(),this.gB(this.VR,this.adHandler),this.qd(this.VR),this.OB(),this.SB(),this.xB=new x(this.$playerContainer,this.app.config.device,Ic,l.t),this.kB(this.$playerContainer)}catch(e){Object(g.a)({message:"PlayspaceExperience_start",exception:e.message,callStack:e.stack,level:f.ProtoLoggingLevelEnum.FATAL})}}setSlide(e){this.VR.setSlide(e)}getNextSlide(){return this.VR.getNextSlide()}play(){super.play(),this.VR.play(!1)}pause(){super.pause(),this.VR.pause(!1)}getStoryId(){return this.Od.storyId}getStoryPosition(){return this.VR.currentSlideIndex}getStoryTimeline(){return this.VR.slides.map(e=>e.media.duration/B.f)}updateCtaLabel(e,t){Object(A.d)(e)&&Object(A.h)(t)&&this.VR.updateCtaLabel(e,t)}getStoryMetadata(){return this.VR.slidesMetadata.map(({title:e,clickUrl:t,slideDuration:i})=>({title:e,clickUrl:t,duration:i}))}toggleFullscreenButton(e){this.VR.toggleExpandButton(e)}toggleFullscreen(e){Object(A.a)(e)||(e=!this.tB.isFullscreen),this.tB.isFullscreen!==e&&(e?this.ZR():this.tB.exitFullScreen())}getQuality(){return this.VR.getQuality()}setQuality(e){this.VR.setQuality(e)}getOrientation(){return this.eB.getOrientation()}setOrientation(e){this.eB.setOrientation(e)}OB(){this.app.config.os.os!==Qe.b.Ios&&(this.tB=new Pc(this,this.app.services.GlobalDomUtilsService,this.$playerContainer,this.app.config.os.os),this._B())}_B(){this.subscribe(P[P.Expand],this.VR,this.ZR),this.subscribe(P[P.Collapse],this.VR,()=>this.tB.exitFullScreen()),this.subscribe(pc.exit,this.tB,this.Ld),this.subscribe(pc.enter,this.tB,this.Ed)}iB(){this.VR.enterFullscreen(),this.floatingModule&&this.floatingModule.fullscreenStateChange(!0)}bB(){return this.VR.getCurrentMetadata()}mB(e){if(!(e<0||this.VR.slidesMetadata.length<e))return this.VR.slidesMetadata[e]}YR(){this.app.services.TrackingService.setNewMedia(this.vB())}vB(){var e=this.VR.getCurrentMetadata(),t=e.title||e.coverMetadata&&e.coverMetadata.title;return{mediaId:this.Od.storyId,clickUrl:e.clickUrl,slideTitle:t,slideNumber:this.VR.currentSlideIndex+1,slideMediaType:e.mediaType}}kB(e){var t;!Object(A.h)(this.Od.sdkVersion)&&Object(A.h)(this.app.config.bundleID)&&(t=this.app.services.GlobalDomUtilsService.querySelector("body"),Object(S.Q)(t,{margin:"0"}),300<=e.clientWidth&&(Object(S.Q)(e,{"min-height":"250px"}),Object(S.i)(e)),Object(Je.l)([95,5])&&Object(g.a)({message:"PlayspaceExperience_start",exception:"IN_APP_RENDER_PLAYER_SIZE",callStack:`width: ${this.$playerContainer.clientWidth}: height: ${this.$playerContainer.clientHeight} `,level:f.ProtoLoggingLevelEnum.INFO}))}jB(){}}class _c{constructor(){this.Vc={}}on(e,t){if(this.Vc[e]=this.Vc[e]||[],!Object(A.b)(t))throw new Error(`${e} event callback is not a function`);return this.Vc[e].push(t),()=>this.Vc[e]=this.Vc[e].filter(e=>e!==t)}once(e,t){const i=this.on(e,e=>{try{t(e)}catch(e){}i()})}remove(e,t){this.Vc[e]&&(this.Vc[e]=this.Vc[e].filter(e=>e!==t))}removeAll(){this.Vc={}}trigger(e,t){this.Vc[e]&&this.Vc[e].forEach(e=>{try{e(t)}catch(e){}})}}class Fc extends class{constructor(e){this.experience=e,this.AB=(e,t)=>this.bo.on(e,t),this.IB=(e,t)=>{this.bo.remove(e,t)},this.CB=()=>{this.bo.removeAll()},this.TB=(e,t)=>{this.bo.once(e,t)},this.PB=()=>this.experience.isViewable(),this.MB=e=>{this.experience.setViewableThreshold(e)},this.EB=()=>{this.experience.play()},this.LB=()=>{this.experience.pause()},this.RB=()=>this.experience.getVolume(),this.BB=e=>{this.experience.setVolume(e)},this.Ac=()=>{this.experience.triggerDestroy()},this.DB=()=>{this.experience.disableAdvertising()},this.FB=()=>{this.experience.enableAdvertising()},this.$B=e=>{this.experience.setCustomMacros(e)},this.UB=e=>{this.experience.setAmpUserConsent(e)},this.bo=new _c}trigger(e,t){this.bo.trigger(e,t)}setDestroyed(){this.trigger(O.b.Removed)}getApiMethods(){return{on:this.AB,remove:this.IB,removeAll:this.CB,once:this.TB,isViewable:this.PB,setViewableThreshold:this.MB,play:this.EB,pause:this.LB,getVolume:this.RB,setVolume:this.BB,disableAdvertising:this.DB,enableAdvertising:this.FB,setMacros:this.$B,setAmpUserConsent:this.UB,destroy:this.Ac}}}{constructor(){super(...arguments),this.VB=()=>this.experience.getStoryPosition(),this.NB=()=>this.experience.getStoryId(),this.HB=()=>this.experience.getStoryTimeline(),this.qB=e=>{this.experience.setSlide(e)},this.zB=(e,t)=>{this.experience.updateCtaLabel(e,t)},this.WB=()=>this.experience.getStoryMetadata(),this.GB=e=>{this.experience.toggleFullscreenButton(e)},this.JB=e=>{this.experience.toggleFullscreen(e)},this.QB=()=>this.experience.getQuality(),this.XB=e=>{this.experience.setQuality(e)},this.YB=()=>{var e=this.experience.getOrientation();return Rc.LayoutEnum[ta.ProtoPlayerOrientationEnum[e]]},this.KB=t=>{var e=Object.keys(Rc.LayoutEnum).find(e=>Rc.LayoutEnum[e]===t);e&&ta.ProtoPlayerOrientationEnum[e]&&this.experience.setOrientation(ta.ProtoPlayerOrientationEnum[e])},this.ZB=()=>this.experience.getSize()}getApiMethods(){return Object.assign(Object.assign({},super.getApiMethods()),{getStoryPosition:this.VB,setStoryPosition:this.qB,getStoryId:this.NB,getStoryTimeline:this.HB,setCtaLabel:this.zB,getStoryMetadata:this.WB,toggleFullscreen:this.JB,toggleFullscreenButton:this.GB,getQuality:this.QB,setQuality:this.XB,getLayout:this.YB,setLayout:this.KB,getPlayerSize:this.ZB})}}class Uc extends h{constructor(){super(...arguments),this.To="cnx-ps"}createExperience(e,t){this.experience=new Dc(this,this.Ws,t),this.experienceApi=new Fc(this.experience)}getApiMethods(){return this.experienceApi.getApiMethods()}isSupportedBreakpoint(e){return!(this.experienceContainer.clientWidth<bc[e].xs)}}var Nc,Vc,Hc,qc=i(31);(Hc=Nc=Nc||{})[Hc.none=0]="none",Hc[Hc.friendly=1]="friendly",Hc[Hc.safe=2]="safe";class Wc{constructor(e,t,i){this.de=e,this.VA=t,this.tD=[],this.iD=Nc.none,this.eD={intersectionObserver:!1,fallbackImplementation:!1},this.sD=null,this.nD=[0,.01,.1,.2,.5],this.rD=250,this.hD=!1,this.aD=e=>{this.hD=e,this.oD(),a.a.setFocusState(e),qc.a.pageFocus=e},this.oD=()=>{this.tD.forEach(e=>{var t=this.cD(e.element);this.onViewHandle(e,t)})},this.uD=()=>{null===this.sD&&(this.sD=setTimeout(()=>{this.oD(),clearTimeout(this.sD),this.sD=null},this.rD))},this.lD(i),this.dD(),this.fD()}fD(){this.VA.on(this.aD),qc.a.pageFocus=this.VA.isDocumentVisible()}lD(e){this.de.IntersectionObserver&&!e?this.eD.intersectionObserver=!0:this.eD.fallbackImplementation=!0,this.de.self!==this.de.top?(this.pD=this.bD(this.de),null!==this.pD?this.iD=Nc.friendly:this.iD=Nc.safe):this.pD=this.de.frameElement}bD(e){let t;try{if((t=e.parent)===this.de.top)return e.frameElement}catch(e){return null}return this.bD(t)}dD(){this.eD.intersectionObserver?this.vD=new this.de.IntersectionObserver(this.onObserverEnter.bind(this),{root:null,rootMargin:"0px",threshold:this.nD}):(this.de.addEventListener("scroll",this.uD),this.de.addEventListener("load",this.oD),this.de.addEventListener("resize",this.oD))}mD(t){return this.tD.find(e=>e.element===t)}cD(e){if(this.iD===Nc.safe){const t=this.mD(e);return t?t.cachedPercentInView:0}let t=1;const i=e.getBoundingClientRect(),s={bottomRatio:i.bottom/i.height,topRatio:(this.de.top.innerHeight-i.top)/i.height,leftRatio:(this.de.top.innerWidth-i.left)/i.width,rightRatio:i.right/i.width};return Object.keys(s).forEach(e=>{s[e]<=0&&(t=0),0<s[e]&&s[e]<1&&(t*=s[e])}),t}onObserverEnter(e){e.forEach(t=>{this.tD.filter(e=>e.element===t.target).forEach(e=>{this.onViewHandle(e,t.intersectionRatio)})})}onViewHandle(e,t){e.cachedPercentInView=t,e.list.forEach(e=>{!e.callbackSent&&e.threshold<=t&&this.hD?(e.callbackSent=!0,e.timeout=Object(Je.a)(e.callback,e.callbackDelay,!0)):e.callbackSent&&(e.threshold>t||!this.hD)&&(e.callbackSent=!1,clearTimeout(e.timeout),e.timeout=Object(Je.a)(e.callback,0,!1))})}on(t,e,i={}){let s=!1;if(this.eD.fallbackImplementation)if(this.iD===Nc.friendly&&t.ownerDocument.defaultView!==this.de.top)t=this.pD;else if(this.iD===Nc.safe)return void Object(Je.a)(e,0,!1);let r=this.tD.find(e=>e.element===t);r?s=!0:(r={element:t,list:[],cachedPercentInView:0},this.tD.push(r)),r.list.push({threshold:i.threshold,callbackSent:!1,callbackDelay:i.callbackDelay,timeout:null,callback:e}),this.eD.intersectionObserver?(s&&this.vD.unobserve(t),this.vD.observe(t)):this.eD.fallbackImplementation&&this.oD()}off(t,i){const s=this.tD.find(e=>e.element===t);if(s){let e=s.list.length;for(;e;)e--,s.list[e].callback===i&&s.list.splice(e,1);0===s.list.length&&(this.vD&&this.vD.unobserve(t),this.tD.splice(this.tD.indexOf(s),1))}}check(e={threshold:.1}){if(!e.element)return!1;let t=e.element;return this.iD===Nc.friendly&&(t=this.pD),this.cD(t)>=e.threshold&&this.hD}triggerRecheck(t){this.eD.fallbackImplementation&&t&&this.tD.forEach(e=>{if(e.element===t){const t=this.cD(e.element);this.onViewHandle(e,t)}})}setViewableThreshold(e){}getIsTabInFocus(){return this.hD}subscribe(e,t){}destroy(){this.de.removeEventListener("scroll",this.uD),this.de.removeEventListener("load",this.oD),this.de.removeEventListener("resize",this.oD),[].slice.call(this.tD).forEach(t=>{[].slice.call(t.list).forEach(e=>{this.off(t.element,e.callback),this.de.clearTimeout(e.timeout)})}),this.VA.off(this.aD),clearTimeout(this.sD)}}class $c{constructor(){this.tD=[],this.cD=0,this.gD=!1,this.oD=t=>{this.tD.forEach(e=>{t&&t!==e.element||this.yD(e,this.cD)})}}wD(t){let e=this.tD.find(e=>e.element===t);return e||(e={element:t,list:[],cachedPercentInView:0},this.tD.push(e)),e.list}yD(e,t){e.list.forEach(e=>{!e.callbackSent&&e.threshold<=t?(e.callbackSent=!0,e.timeout=Object(Je.a)(e.callback,e.callbackDelay,!0,this.gD)):e.callbackSent&&e.threshold>t&&(e.callbackSent=!1,clearTimeout(e.timeout),e.timeout=Object(Je.a)(e.callback,0,!1,this.gD))})}on(e,t,i){this.wD(e).push({threshold:i.threshold,callbackSent:!1,callbackDelay:i.callbackDelay,timeout:null,callback:t}),this.oD()}off(t,i){const s=this.tD.find(e=>e.element===t);if(s){for(let e=s.list.length;e--;)s.list[e].callback===i&&s.list.splice(e,1);0===s.list.length&&this.tD.splice(this.tD.indexOf(s))}}check(e={threshold:.1}){return this.cD>=e.threshold}triggerRecheck(e){this.oD(e)}xD(e){this.gD=e}setViewableThreshold(e){this.cD=e,this.triggerRecheck()}getIsTabInFocus(){return!0}subscribe(e,t){}destroy(){for(let e=this.tD.length;e--;){var t=this.tD[e];for(let e=t.list.length;e--;)clearTimeout(t.list[e].timeout),this.off(t.element,t.list[e].callback)}}}class Gc{constructor(e=0){this.SD=e,this.OD=16,this.kD=9}getHeightByRatio(e){return Math.round(e/this.OD*this.kD)+this.SD}}class zc{constructor(e,t,i={}){this.floatingMode=Object(A.a)(i.mode)?i.mode:e.floatingMode,Object(p.h)(i.devices)?this.floatingDeviceMode=i.devices:this.floatingDeviceMode=Object(p.h)(e.floatingDeviceMode)?e.floatingDeviceMode:[f.ProtoDeviceType.Desktop],Object(A.a)(i.closeButton)?this.floatingCloseButtonMode=i.closeButton:Object(A.a)(e.floatingCloseButtonMode)?this.floatingCloseButtonMode=e.floatingCloseButtonMode:this.floatingCloseButtonMode=f.ProtoPlayerCloseButtonMode.OnHover,this.floatingPosition=Object(A.a)(i.fixedPosition)?i.fixedPosition:e.floatingFixedPosition,this.floatingScrollPosition=Object(A.a)(i.scrollPosition)?i.scrollPosition:e.floatingScrollPosition,this.floatingWidth=Object(A.a)(i.floatingWidth)?i.floatingWidth:e.floatingWidth||400,this.floatingGutterX=(Object(A.a)(i.floatingGutterX)?i:e).floatingGutterX,this.floatingGutterY=(Object(A.a)(i.floatingGutterY)?i:e).floatingGutterY,this.pageElement=e.floatingPageElement,this.appendLocation=e.floatingAppendLocation,this.floatingYAxisPadding=e.floatingYAxisPadding,this._D=this.floatingScrollPosition===f.ProtoPositionMode.BottomLeft||this.floatingScrollPosition===f.ProtoPositionMode.TopLeft,this.jD=this.floatingScrollPosition===f.ProtoPositionMode.BottomRight||this.floatingScrollPosition===f.ProtoPositionMode.TopRight,this.AD=this.floatingScrollPosition===f.ProtoPositionMode.TopLeft||this.floatingScrollPosition===f.ProtoPositionMode.TopRight,this.ID=this.floatingScrollPosition===f.ProtoPositionMode.BottomRight||this.floatingScrollPosition===f.ProtoPositionMode.BottomLeft,this.CD=new Gc(t)}get isPositionedLeft(){return this._D}get isPositionedRight(){return this.jD}get isPositionedTop(){return this.AD}get isPositionedBottom(){return this.ID}set isPositionedLeft(e){this._D=e}set isPositionedRight(e){this.jD=e}set isPositionedBottom(e){this.ID=e}get positionClass(){switch(this.floatingScrollPosition){case f.ProtoPositionMode.BottomLeft:return"bottom-left";case f.ProtoPositionMode.TopLeft:return"top-left";case f.ProtoPositionMode.TopRight:return"top-right";default:return"bottom-right"}}set width(e){this.floatingWidth=e}get width(){return this.floatingWidth}getHeight(e){return`${this.CD.getHeightByRatio(e)}px`}}function Jc(e){return Object(A.f)(e)&&"[object RegExp]"!==Object.prototype.toString.call(e)&&"[object Date]"!==Object.prototype.toString.call(e)}function Kc(e){return Jc(e)?Qc({},e):e}function Qc(e,t){return function(t,i){const s={};return Jc(t)&&Object.keys(t).forEach(e=>{s[e]=Kc(t[e])}),Object.keys(i).forEach(e=>{Jc(i[e])&&t[e]?s[e]=Qc(t[e],i[e]):s[e]=Kc(i[e])}),s}(e,t)}(Hc=Vc=Vc||{})[Hc.Normal=0]="Normal",Hc[Hc.Buzzfeed=1]="Buzzfeed";class Yc extends class{constructor(i,e,t,s,r,n,o,a,l,c,d=0){if(this.global=i,this.targetContainer=e,this.TD=t,this.Bo=s,this.secondLevelDomain=r,this.apiConfig=n,this.supplyChainSettings=a,this.isSeoTraffic=l,this.videoPosition=c,this.sharingDestinations=[],this.disableAdvertising=!1,this.adBreaks=[],this.disableClickUrl=!1,this.moatTrackingEnabled=!1,this.pauseAdWhenFinished=!1,this.loopAdWhenFinished=!1,this.adsMustBeSkippableIfLongerThan=R.d,Object(A.h)(t.initializationSettingsJson))try{const i=JSON.parse(t.initializationSettingsJson);this.apiConfig=Qc(this.apiConfig,i)}catch(i){Object(g.a)({message:"invalid_init_json",exception:i.message,callStack:i.callStack,level:f.ProtoLoggingLevelEnum.FATAL})}this.apiConfig.playerMode!==Vc.Buzzfeed&&!this.apiConfig.settings.pauseAdWhenFinished||(this.pauseAdWhenFinished=!0),this.PD(this.TD.lineItems);const h=[];this.soundMode=Object(A.a)(this.apiConfig.settings.defaultSoundMode)?this.apiConfig.settings.defaultSoundMode:t.soundMode,this.playbackMode=(Object(A.a)(this.apiConfig.settings.playbackMode)?this.apiConfig.settings:t).playbackMode,this.playbackMode===f.ProtoPlayerPlaybackModeEnum.ClickToPlay||this.soundMode===f.ProtoPlayerSoundMode.Mute||Object(Je.b)()||(this.soundMode=f.ProtoPlayerSoundMode.Mute),this.html=t.html,this.css=t.css,this.floatingSettings=new zc(t,d,this.apiConfig.settings.customization.floating),this.logoUrl=(Object(A.h)(this.apiConfig.settings.customization.logoUrl)?this.apiConfig.settings.customization:t).logoUrl;l=t.amazonTamSlotId;if(Object(A.h)(l)&&(this.amazonTamSlotId=l),Object(A.a)(this.apiConfig.settings.advertising.macros)&&(this.externalMacros=this.apiConfig.settings.advertising.macros),Object(A.a)(this.apiConfig.settings.disableAdvertising)&&(this.disableAdvertising=this.apiConfig.settings.disableAdvertising),this.MD(),this.ED(),Object(p.h)(this.apiConfig.settings.advertising.lineItems)){const i=t.lineItems.filter(e=>e.creativeType===f.ProtoCreativeTypeEnum.External);this.apiConfig.settings.advertising.lineItems.forEach(t=>{if(this.LD(t),o){const i=this.RD(),e=this.BD(t,i);h.push(e)}else i.forEach(e=>{t.id===e.advertiserLineItemId&&(t.url||t.headerBidderBids||t.externalMediaFile||t.externalHlsFile)&&(e=this.BD(t,e),h.push(e))})})}!0!==this.apiConfig.settings.advertising.blockConnatixDemand&&h.push(...t.lineItems.filter(e=>e.creativeType!==f.ProtoCreativeTypeEnum.External)),h.forEach(e=>{e.creativeType===f.ProtoCreativeTypeEnum.External&&(e.headerBidderBids&&"[]"!==e.headerBidderBids?e.creativeType=f.ProtoCreativeTypeEnum.HeaderBidder:e.externalMediaFile||e.externalHlsFile?e.creativeType=f.ProtoCreativeTypeEnum.MediaFile:e.creativeType=f.ProtoCreativeTypeEnum.ThirdParty)});c=this.DD(h),d=(Object(A.a)(this.apiConfig.settings.rendering.scrollHijackingProtection)?this.apiConfig.settings.rendering:t).scrollHijackingProtection;this.lineItemSettings={lineItems:c,disableScrollHijackEnforcement:d},this.midRollNumber=Object(A.a)(this.apiConfig.settings.advertising.maxNumberOfMidRolls)?this.apiConfig.settings.advertising.maxNumberOfMidRolls:t.midRollNumber,this.adViewabilityPolicy=t.adViewabilityPolicy,this.preRollBreak=(Object(A.a)(this.apiConfig.settings.advertising.preRollBreak)?this.apiConfig.settings.advertising:t).preRollBreak*B.f,this.postRollBreak=(Object(A.a)(this.apiConfig.settings.advertising.postRollBreak)?this.apiConfig.settings.advertising:t).postRollBreak*B.f,this.playerId=t.playerId,this.floatingSettings.floatingMode===f.ProtoPlayerFloatingMode.Always?this.closeButtonMode=this.floatingSettings.floatingCloseButtonMode:this.closeButtonMode=(Object(A.a)(this.apiConfig.settings.customization.closeButtonMode)?this.apiConfig.settings.customization:t).closeButtonMode,this.isCloseButton=!!this.closeButtonMode||!!this.floatingSettings.floatingCloseButtonMode,this.uiComponentsVisibility={casting:!1,expandButton:Object(A.a)(this.apiConfig.settings.customization.showExpandButton)?this.apiConfig.settings.customization.showExpandButton:t.expandButton},this.sharingDestinations=void 0,this.adPlaybackMode=t.adPlaybackMode,Object(A.a)(this.apiConfig.settings.disableClickUrl)&&(this.disableClickUrl=this.apiConfig.settings.disableClickUrl);var l=(n.settings.advertising.skipAdSettings||{})["skipAdAfter"],c=(n.settings.advertising.skipAdSettings||{})["adSkippability"],d=(n.settings.advertising.skipAdSettings||{})["adsMustBeSkippableIfLongerThan"];this.skipAdAfter=Object(A.a)(l)?l:t.skipAdAfter,this.adSkippability=Object(A.a)(c)?c:t.adSkippability,Object(A.a)(d)?0<d&&d<=R.d&&(this.adsMustBeSkippableIfLongerThan=d):Object(A.a)(c)||t.adsMustBeSkippableIfLongerThan&&(this.adsMustBeSkippableIfLongerThan=t.adsMustBeSkippableIfLongerThan);var n=n.settings._connatixInternals["disableTracking"];(n||o||this.isSeoTraffic)&&(this.disableTracking=!0),this.sessionId=this.TD.sessionId,this.moatTrackingEnabled=this.lineItemSettings.lineItems.some(e=>e.moatTrackingEnabled)}FD(e,t){t.adTag=Object(A.a)(e.url)?e.url:t.adTag,t.requestCap=Object(A.a)(e.contentRequestCap)?e.contentRequestCap:t.requestCap,t.impressionCap=Object(A.a)(e.contentImpressionCap)?e.contentImpressionCap:t.impressionCap,t.viewability=(Object(A.a)(e.viewability)?e:t).viewability,t.sound=(Object(A.a)(e.sound)?e:t).sound,t.ignoreFilledRequests=(Object(A.a)(e.ignoreFilledRequests)?e:t).ignoreFilledRequests,t.headerBidderBids=(Object(A.a)(e.headerBidderBids)?e:t).headerBidderBids,t.headerBidderTimeout=(Object(A.a)(e.headerBidderTimeout)?e:t).headerBidderTimeout,t.resetRequestsCapTime=(Object(A.a)(e.resetRequestsCapTime)?e:t).resetRequestsCapTime,t.resetImpressionsCapTime=(Object(A.a)(e.resetImpressionsCapTime)?e:t).resetImpressionsCapTime,t.resetCapType=(Object(A.a)(e.resetCapType)?e:t).resetCapType,t.timeBetweenRequests=(Object(A.a)(e.timeBetweenRequests)?e:t).timeBetweenRequests,t.skipMode=(Object(A.a)(e.skipMode)?e:t).skipMode,t.floorPrice=(Object(A.a)(e.floorPrice)?e:t).floorPrice,t.adBreakSettings=(Object(A.a)(e.adBreakSettings)?e:t).adBreakSettings,t.pauseAdOutOfView=(Object(A.a)(e.pauseAdOutOfView)?e:t).pauseAdOutOfView}MD(){this.$D(this.apiConfig.settings.advertising.preRollBreak,f.ProtoAdBreakTypeEnum.PreRoll),this.$D(this.apiConfig.settings.advertising.postRollBreak,f.ProtoAdBreakTypeEnum.PostRoll),this.$D(this.apiConfig.settings.advertising.maxNumberOfMidRolls,f.ProtoAdBreakTypeEnum.MidRoll)}$D(e,t){var i=this.UD(this.apiConfig.settings.advertising.adBreaks,t),s=this.UD(this.TD.adBreaks,t),t={maxAdPodDuration:0,maxAdSlotDuration:0,numberOfAdSlots:1,types:[t]};i?this.adBreaks.push(i):!Object(A.a)(e)||i||s?!i&&s&&this.adBreaks.push(s):this.adBreaks.push(t)}UD(e,i){if(e){let t;return e.forEach(e=>{e.types.includes(i)&&((t=Object.assign({},e)).types=[i])}),t}}DD(e){const t=this["adBreaks"];let i=e;const s=[];return t.forEach(t=>{t.types.forEach(e=>s.push(Object.assign(Object.assign({},t),{types:[e]})))}),s.forEach(e=>{i=this.removeCompatibleLineItems(e,i)}),e.filter(e=>!i.includes(e))}removeCompatibleLineItems(e,t){const i=e.types[0],s=1<e.numberOfAdSlots?f.ProtoLineItemAdBreakTypeEnum.AdPod:f.ProtoLineItemAdBreakTypeEnum.SingleAd;return t.filter(e=>!e.adBreakSettings.adBreakTargeting.some(e=>e.adRollType===i&&(e.adBreakTypeEnum===f.ProtoLineItemAdBreakTypeEnum.All||e.adBreakTypeEnum===s)))}PD(e){e.forEach(e=>{e.adBreakSettings||this.VD(e),this.LD(e)})}VD(e){e.adBreakSettings={adBreakTargeting:[{adRollType:f.ProtoAdBreakTypeEnum.PreRoll,adBreakTypeEnum:f.ProtoLineItemAdBreakTypeEnum.All},{adRollType:f.ProtoAdBreakTypeEnum.MidRoll,adBreakTypeEnum:f.ProtoLineItemAdBreakTypeEnum.All},{adRollType:f.ProtoAdBreakTypeEnum.PostRoll,adBreakTypeEnum:f.ProtoLineItemAdBreakTypeEnum.All}]}}LD(e){0===e.requestCap&&(e.requestCap=20)}ED(){this.adBreaks.forEach(e=>{e.maxAdSlotDuration*=B.f,e.maxAdPodDuration*=B.f,e.numberOfAdSlots<=1?e.maxAdPodDuration=0:e.maxAdSlotDuration>e.maxAdPodDuration&&(e.maxAdSlotDuration=e.maxAdPodDuration)})}BD(e,t){const i=Object.assign({},t);return this.FD(e,i),Object(A.a)(e.externalMediaFile)&&(i.externalMediaFile=e.externalMediaFile),Object(A.a)(e.externalHlsFile)&&(i.externalHlsFile=e.externalHlsFile),i.customCpm=e.cpm,i}RD(){return f.ProtoLineItem.toObject(f.ProtoLineItem.fromObject({}),{defaults:!0,arrays:!0,objects:!0})}}{constructor(e,t,i,s,r,n,o,a,l,c,d){super(e,t,i,s,r,n,o,a,d,l,72),this.global=e,this.targetContainer=t,this.TD=i,this.videoPosition=l,this.storyPosition=c,this.fontFamilySettings={},this.primaryColorList={},this.secondaryColorList={},this.accentColorList={},this.disableCTARendering=!1,this.disableStoryProgressBarRendering=!1,this.disableTitleRendering=!1,this.activeVersion=this.TD.activeVersion,this.storyId=this.TD.storyId,this.storyMetadata=this.apiConfig.settings.story,this.sdkVersion=this.apiConfig._appSettings.sdkVersion,this.minSlidesBeforeFirstAd=Object(A.a)(this.apiConfig.settings.advertising.slidesBeforeFirstAd)?this.apiConfig.settings.advertising.slidesBeforeFirstAd:this.TD.minSlidesBeforeFirstAd,this.slidesBetweenAds=(Object(A.a)(this.apiConfig.settings.advertising.slidesBetweenAds)?this.apiConfig.settings.advertising:this.TD).slidesBetweenAds,this.TD.floatingMode===ta.ProtoPlayerFloatingMode.Always?this.orientation=ta.ProtoPlayerOrientationEnum.Landscape:this.orientation=(Object(A.a)(this.apiConfig.settings.customization.orientation)?this.apiConfig.settings.customization:this.TD).orientation,this.orientationBreakpoint=(Object(A.a)(this.apiConfig.settings.customization.orientationBreakpoint)?this.apiConfig.settings.customization:this.TD).orientationBreakpoint,Object(A.f)(this.apiConfig.settings.customization.fontFamilySettings)&&(this.fontFamilySettings=this.apiConfig.settings.customization.fontFamilySettings),this.ND(),this.HD(),this.qD(),this.zD(),this.WD(),this.GD(),this.useAccentColorForProgressBar=(Object(A.a)(this.apiConfig.settings.customization.useAccentColorForProgressBar)?this.apiConfig.settings.customization:this.TD).useAccentColorForProgressBar,this.endOfSlideCycleMode=Object(A.a)(this.apiConfig.settings.endOfSlideCycleMode)?this.apiConfig.settings.endOfSlideCycleMode:this.TD.endOfCycleMode,this.uiComponentsVisibility.expandButton=!1,this.disableCTARendering=Object(A.a)(this.apiConfig.settings.disableCTARendering)&&this.apiConfig.settings.disableCTARendering,this.disableStoryProgressBarRendering=Object(A.a)(this.apiConfig.settings.disableStoryProgressBarRendering)&&this.apiConfig.settings.disableStoryProgressBarRendering,this.disableTitleRendering=Object(A.a)(this.apiConfig.settings.disableTitleRendering)&&this.apiConfig.settings.disableTitleRendering,this.publisherName=(Object(A.h)(this.apiConfig.settings.customization.publisherName)?this.apiConfig.settings.customization:this.TD).publisherName}ND(){this.apiConfig.settings.customization.primaryColorList&&Object(A.h)(this.apiConfig.settings.customization.primaryColorList.background)?this.primaryColorList.background=this.apiConfig.settings.customization.primaryColorList.background:this.TD.primaryColorList&&Object(A.h)(this.TD.primaryColorList.background)&&(this.primaryColorList.background=this.TD.primaryColorList.background)}HD(){this.apiConfig.settings.customization.primaryColorList&&Object(A.h)(this.apiConfig.settings.customization.primaryColorList.foreground)?this.primaryColorList.foreground=this.apiConfig.settings.customization.primaryColorList.foreground:this.TD.primaryColorList&&Object(A.h)(this.TD.primaryColorList.foreground)&&(this.primaryColorList.foreground=this.TD.primaryColorList.foreground)}qD(){this.apiConfig.settings.customization.secondaryColorList&&Object(A.h)(this.apiConfig.settings.customization.secondaryColorList.background)?this.secondaryColorList.background=this.apiConfig.settings.customization.secondaryColorList.background:this.TD.secondaryColorList&&Object(A.h)(this.TD.secondaryColorList.background)&&(this.secondaryColorList.background=this.TD.secondaryColorList.background)}zD(){this.apiConfig.settings.customization.secondaryColorList&&Object(A.h)(this.apiConfig.settings.customization.secondaryColorList.foreground)?this.secondaryColorList.foreground=this.apiConfig.settings.customization.secondaryColorList.foreground:this.TD.secondaryColorList&&Object(A.h)(this.TD.secondaryColorList.foreground)&&(this.secondaryColorList.foreground=this.TD.secondaryColorList.foreground)}WD(){this.apiConfig.settings.customization.accentColorList&&Object(A.h)(this.apiConfig.settings.customization.accentColorList.background)?this.accentColorList.background=this.apiConfig.settings.customization.accentColorList.background:this.TD.accentColorList&&Object(A.h)(this.TD.accentColorList.background)&&(this.accentColorList.background=this.TD.accentColorList.background)}GD(){this.apiConfig.settings.customization.accentColorList&&Object(A.h)(this.apiConfig.settings.customization.accentColorList.foreground)?this.accentColorList.foreground=this.apiConfig.settings.customization.accentColorList.foreground:this.TD.accentColorList&&Object(A.h)(this.TD.accentColorList.foreground)&&(this.accentColorList.foreground=this.TD.accentColorList.foreground)}}var Xc=i(27);class Zc extends $c{constructor(e,t){super(),this.de=e;try{this.bo=new _c,this.gs()}catch(e){Object(g.a)({message:"omid_verification_client_error",exception:e.message,callStack:e.callStack,level:t?f.ProtoLoggingLevelEnum.FATAL:f.ProtoLoggingLevelEnum.INFO})}}subscribe(e,t){return this.bo.on(e,t)}gs(){const e=this.JD();if(this.QD=new e,!this.QD.isSupported())throw new Error("omid_not_implemented");this.XD(),this.mv()}JD(){if(!this.de.OmidVerificationClient)throw new Error("omid_verification_client_not_found");if(!this.de.OmidVerificationClient[Xc.k])throw new Error("omid_verification_client_wrong_version");return this.de.OmidVerificationClient[Xc.k]}XD(){this.QD.registerSessionObserver(e=>{e&&e.type===Xc.e.sessionError&&Object(g.a)({message:"omid_verification_client_session_error",exception:e.data.message,level:f.ProtoLoggingLevelEnum.WARNING})})}mv(){this.QD.addEventListener(Xc.e.geometryChange,e=>{try{const{percentageInView:i,reasons:s}=e.data.adView,r=[Xc.a.backgrounded,Xc.a.notFound].some(e=>s.includes(e));this.xD(r);var t=i/100;this.setViewableThreshold(t),this.bo.trigger(O.d.OmidViewabilityThreshold,t)}catch(e){Object(g.a)({message:"omid_verification_client_geometry_change_error",exception:e.message,callStack:e.callStack,level:f.ProtoLoggingLevelEnum.FATAL,throttle:1})}})}}const ed=`cnx-playspace-css-${Qt.a.version}`,td={src:it.a.endPoints.assets.css.playspace,id:ed};class id extends r.a{Mn(){return td}getDelegateHandler(){return{getCurrentVolume:()=>this.renderer.getApiMethods().getVolume()}}getRendererInstance(e,t,i,s,r){return new Uc(this,e,t,i,s,r)}getViewabilityService(e,t,i=!1){return this.externalAttributes.settings.useExternalViewabilityService?new $c:this.hs?new Zc(window,this.Ds):new Wc(e.global,t,i)}getPlayerResponse(e,t){return new Promise((t,i)=>{ur.a.sendProtoRequest({ProtoResponse:ta.ProtoPlayspaceResponse,ProtoRequest:ta.ProtoPlayspaceRequest,requestData:e,endpoint:it.a.endPoints.api.story,withCredentials:!0,queryParams:{[fr.b]:Qt.a.version},logError:!0}).then(e=>{window.parent.connatixDummy&&Object(Ji.b)("connatixDummy",this.pageUrl)&&(e.players[0]=Object.assign(Object.assign({},e.players[0]),window.parent.connatixDummy)),t(e)}).catch(e=>{this.GLOBAL.cnxDummyResponse?t(this.GLOBAL.cnxDummyResponse):i(e)})})}getPlayerModel(e,t,i){return new Yc(e.insertWindow||this.GLOBAL,e.insertContainer,t.players[i],t.browser.device,t.secondLevelDomain,this.externalAttributes,this.isServerlessMode,t.supplyChain,this.queryParams.cnxVideoPosition,this.queryParams.cnxStoryPosition,t.isSeoTraffic||this.queryParams.cnxIsSeoTraffic)}getApiConfigEnums(){return Rc}getApiConfigEvents(){return Cc}getSpecificRequestData(){const e={};return this.queryParams.cnxStoryId?e.forceStoryId=this.queryParams.cnxStoryId:this.externalAttributes.storyId&&(e.forceStoryId=this.externalAttributes.storyId),e}defaultInitFromProto(){return function(e,t){const i=e.toObject({},{defaults:!0,arrays:!0,objects:!0}),s=t.toObject({},{defaults:!0,arrays:!0,objects:!0});return i.players.push(s),i.browser=f.Browser.toObject(f.Browser.fromObject({}),{defaults:!0,arrays:!0,objects:!0}),i.geoLocation=f.GeoLocation.toObject(f.GeoLocation.fromObject({}),{defaults:!0,arrays:!0,objects:!0}),i}(ta.ProtoPlayspaceResponse,ta.ProtoPlayspace)}Js(){super.Js(),this.externalAttributes.settings.story=void 0}}var r=i(36),sd=i(12);class rd{constructor(e=!1){this._debugLogging=e,this.YD="eventEmitted",this.bo=new _c}subscribe(e){return this.bo.on(this.YD,e)}unsubscribe(e){this.bo.remove(this.YD,e)}emitSessionStart(e){this.KD({metadata:{videoMetadata:e},name:sd.a.SessionStart})}emitContentComplete(){this.KD({name:sd.a.ContentComplete})}emitSessionEnd(){this.KD({name:sd.a.SessionEnd})}emitPlay(){this.KD({name:sd.a.Play})}emitPause(){this.KD({name:sd.a.Pause})}emitAdPlay(){this.KD({name:sd.a.AdPlay})}emitAdPause(){this.KD({name:sd.a.AdPause})}emitAdPlaying(){this.KD({name:sd.a.AdPlaying})}emitAdPaused(){this.KD({name:sd.a.AdPaused})}emitAdImpression(e,t){this.KD({metadata:{adMetadata:e,customAdMetadata:t},name:sd.a.AdImpression})}emitAdComplete(){this.KD({name:sd.a.AdComplete})}emitAdStopped(){this.KD({name:sd.a.AdStopped})}emitAdBreakStart(e){this.KD({metadata:{adBreakMetadata:e},name:sd.a.AdBreakStart})}emitAdBreakComplete(){this.KD({name:sd.a.AdBreakComplete})}emitPlayerResized(e){this.KD({metadata:{playerDimensionsMetadata:e},name:sd.a.PlayerResized})}emitOnEnterFullscreen(){this.KD({name:sd.a.OnEnterFullscreen})}emitOnExitFullscreen(){this.KD({name:sd.a.OnExitFullscreen})}emitOnPlayerCollapsed(){this.KD({name:sd.a.PlayerCollapsed})}emitOnPlayerExpanded(){this.KD({name:sd.a.PlayerExpanded})}emitAdError(){this.KD({name:sd.a.AdError})}emitPlayError(){this.KD({name:sd.a.PlayError})}emitRenderError(){this.KD({name:sd.a.RenderError})}emitAdClickThru(){this.KD({name:sd.a.AdClickThru})}emitAdInteraction(){this.KD({name:sd.a.AdInteraction})}emitAdVideoStart(e){this.KD({metadata:{adVideoStartMetadata:e},name:sd.a.AdVideoStart})}emitAdLoaded(e){this.KD({metadata:{adLoadedMetadata:e},name:sd.a.AdLoaded})}emitAdStateChange(e){this.KD({metadata:{adStateChangedMetadata:e},name:sd.a.AdStateChange})}emitAdVideoFirstQuartile(){this.KD({name:sd.a.AdVideoFirstQuartile})}emitAdVideoMidpoint(){this.KD({name:sd.a.AdVideoMidpoint})}emitAdVideoThirdQuartile(){this.KD({name:sd.a.AdVideoThirdQuartile})}emitAdVideoComplete(){this.KD({name:sd.a.AdVideoComplete})}emitVolumeChange(e){this.KD({name:sd.a.VolumeChange,metadata:{volume:e}})}emitAdVolumeChange(){this.KD({name:sd.a.AdVolumeChange})}emitAdSkipped(){this.KD({name:sd.a.AdSkipped})}KD(e){this._debugLogging&&console.log("Connatix Player Elements debugging: ",e),this.bo.trigger(this.YD,e)}destroy(){this.KD({name:sd.a.Destroy}),this.bo.removeAll()}}const nd=window.parent,od=[];window.addEventListener("unload",function(e){od.forEach(e=>e.destroy())});const ad=Object(Je.f)(nd).topFrame;r.a.abServiceType=r.b.PlayspaceABService;try{!function(){if(-1!==navigator.userAgent.toLowerCase().indexOf("msie"))return Object(g.a)({message:"Prerender_Playspace_main_IE_check",level:f.ProtoLoggingLevelEnum.INFO,throttle:1e3});let e=[];function t(i){var e;return i.settings=i.settings||{},i._appSettings=i._appSettings||{},i._appSettings.cmp=i._appSettings.cmp||{},i._appSettings.tcf=i._appSettings.tcf||{},i.settings.customization=i.settings.customization||{},i.settings.rendering=i.settings.rendering||{},i.settings.advertising=i.settings.advertising||{},i.settings._connatixInternals=i.settings._connatixInternals||{},i.settings.plugins=i.settings.plugins||{},i.settings.advertising.skipAdSettings=i.settings.advertising.skipAdSettings||{},["602660809","com.thomsonreuters.reuters","12345","com.cnx.androidsdkapp"].includes(null===(e=null===i||void 0===i?void 0:i._appSettings)||void 0===e?void 0:e.bundleID)&&Object(g.a)({level:f.ProtoLoggingLevelEnum.INFO,message:"CNX_REUTERS_APPSETTINGS",exception:JSON.stringify(i._appSettings)}),i=(e=>{const t=Object.assign({},e),i=null===(r=t._appSettings)||void 0===r?void 0:r.cmp;(Object(A.h)(null===(n=t._appSettings)||void 0===n?void 0:n.gdprConsentString)||Object(A.h)(null===(o=t._appSettings)||void 0===o?void 0:o.gdprParsedVendorString))&&(t._appSettings.cmp={consentString:Object(A.h)(null===i||void 0===i?void 0:i.consentString)?i.consentString:t._appSettings.gdprConsentString,parsedVendorConsents:Object(A.h)(null===i||void 0===i?void 0:i.parsedVendorConsents)?i.parsedVendorConsents:t._appSettings.gdprParsedVendorString});var s=Object.assign({},ii(Object.assign({},t._appSettings.cmp))),e=Object.assign({},ii(Object.assign({},t._appSettings.tcf))),{usPrivacyString:r,deviceID:n,appPageURL:o}=ii({usPrivacyString:t._appSettings.usPrivacyString,deviceID:t._appSettings.deviceID,appPageURL:t._appSettings.appPageURL});return t._appSettings=Object.assign(Object.assign({},t._appSettings),{cmp:s,tcf:e,usPrivacyString:r,deviceID:n,appPageURL:o}),t})(i),{render:function(e,t){try{!function(e,t,i){var s,r=Object(A.h)(e._appSettings.bundleID),n=Object(A.h)(e._appSettings.sdkVersion);if(n){const t=parseInt(e._appSettings.sdkVersion.substr(0,1),10);e.settings.useExternalViewabilityService=!(3<=t)}const{cmp:o,tcf:a,usPrivacyString:l,deviceID:c}=e._appSettings,d=(s=e,nd.AMP_CONTEXT_DATA||s.settings.implementationType===f.ProtoImplementationType.Amp),h={UserManagerService:new m.b(nd,r,d,{cmp:o,tcf:a,usPrivacyString:l,deviceID:c}),EventsStorageService:new rd(e.settings.plugins._debugLogging)},u=new id(h,nd,r,d,n,i);od.push(u);function p(){Object(Je.k)(()=>new Promise((e,t)=>{if(Object(S.m)(td.id,ad))return e();Object(S.B)(td,ad.document.head,ad,()=>e(),e=>t(e))||t()})).catch(e=>{throw Object(g.a)({message:"Prerender_Playspace_Loader_add_css_link",exception:e.message,callStack:e.stack,level:f.ProtoLoggingLevelEnum.INFO,throttle:1e3}),e}).then(()=>{try{Object(S.W)(nd),u.updateQueryParams(),u.loadScriptTag(e,t)?u.insertRenderer():Object(g.a)({message:"Prerender_Playspace_main_no_script_tag",level:f.ProtoLoggingLevelEnum.INFO,throttle:1e3})}catch(e){Object(g.a)({message:"Prerender_Playspace_main_insertRenderer",exception:e.message,callStack:e.stack,level:f.ProtoLoggingLevelEnum.INFO,throttle:1e3})}}).catch(()=>{})}r?p():u.findPageUrl(nd,null===(r=null===e||void 0===e?void 0:e.settings)||void 0===r?void 0:r.ampUrl).then(()=>p()).catch(e=>{Object(g.a)({message:"Prerender_Playspace_main_init",exception:e.message,callStack:e.stack,level:f.ProtoLoggingLevelEnum.INFO,throttle:1e3}),u.registerApiError()})}(i,e,t)}catch(e){Object(g.a)({message:"Prerender_Playspace_main_initPlayer",exception:e.message,callStack:e.stack,level:f.ProtoLoggingLevelEnum.INFO,throttle:1e3})}}}}nd.cnxps&&(e=nd.cnxps.cmd),nd.cnxps=(t.cmd={push:function(e){try{e()}catch(e){Object(g.a)({message:"Prerender_Playspace_main_push_callback",level:f.ProtoLoggingLevelEnum.INFO,exception:e.message,callStack:e.stack,throttle:1e3})}}},t.configEnums=Rc,t.configEvents=Cc,t),e.forEach(e=>{try{e()}catch(e){Object(g.a)({message:"Prerender_Playspace_main_commands_callback",exception:e.message,callStack:e.stack,level:f.ProtoLoggingLevelEnum.INFO,throttle:1e3})}})}()}catch(e){Object(g.a)({message:"Prerender_Playspace_main",exception:e.message,callStack:e.stack,level:f.ProtoLoggingLevelEnum.INFO,throttle:1e3})}}]);
