!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("wafer-autocomplete",[],t):"object"==typeof exports?exports["wafer-autocomplete"]=t():(e.wafer=e.wafer||{},e.wafer.wafers=e.wafer.wafers||{},e.wafer.wafers["wafer-autocomplete"]=t())}("undefined"!=typeof self?self:this,function(){return function(o){function l(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return o[e].call(t.exports,t,t.exports,l),t.l=!0,t.exports}var u=window.webpackJsonpwafer_wafers_wafer_autocomplete;window.webpackJsonpwafer_wafers_wafer_autocomplete=function(e,t,i){for(var a,n,r=0,s=[];r<e.length;r++)n=e[r],c[n]&&s.push(c[n][0]),c[n]=0;for(a in t)Object.prototype.hasOwnProperty.call(t,a)&&(o[a]=t[a]);for(u&&u(e,t,i);s.length;)s.shift()()};var i={},c={1:0,2:0};return l.e=function(i){function e(){r.onerror=r.onload=null,clearTimeout(s);var e=c[i];0!==e&&(e&&e[1](new Error("Loading chunk "+i+" failed.")),c[i]=void 0)}var a=c[i];if(0===a)return new Promise(function(e){e()});if(a)return a[2];var t=new Promise(function(e,t){a=c[i]=[e,t]});a[2]=t;var n=document.getElementsByTagName("head")[0],r=document.createElement("script");r.type="text/javascript",r.charset="utf-8",r.async=!0,r.timeout=12e4,l.nc&&r.setAttribute("nonce",l.nc),r.src=l.p+"wf-autocomplete-1.24.8-"+{0:"05d5f5642a"}[i]+".chunk.js";var s=setTimeout(e,12e4);return r.onerror=r.onload=e,n.appendChild(r),t},l.m=o,l.c=i,l.d=function(e,t,i){l.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="https://s.yimg.com/aaq/wf/",l.oe=function(e){throw e},l(l.s="./src/entry.js")}({"./src/assist.js":function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}Object.defineProperty(t,"__esModule",{value:!0});var n,p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i,a=arguments[t];for(i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},r=function(e,t,i){return t&&l(e.prototype,t),i&&l(e,i),e},s=window.wafer,o=s.constants,s=s.utils,v=o.ATTR_PREFIX,m=s.findAncestor,y=s.getTemplateContent,b=void 0,r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(g,(n||function(){return n=a(i("./src/assistBase.js"))}()).default),r(g,[{key:"renderClearButton",value:function(){var e=this._util,t=e.clearButtonText,i=e.elem,a=document.createElement("div"),e=document.createElement("div");a.classList.add("wafer-autocomplete-input-wrapper"),Object.assign(a.style,{position:"relative"}),e.innerHTML=t;e=e.children[0];e&&(e.style.visibility="hidden",i.parentNode.insertBefore(a,i),a.appendChild(i),a.appendChild(e),this._util.clearButton=e)}}]),g);function g(e){var t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).selector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g);var i=h(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,e,{selector:t})),a=e.getAttribute(v+"ac-target"),n=e.getAttribute(v+"ac-url"),r=e.getAttribute(v+"ac-template"),s=e.getAttribute(v+"ac-placeholder-template"),o=e.getAttribute(v+"ac-number-of-placeholders")||0,l=e.getAttribute(v+"ac-sync-on-search");if(!a||!n)return h(i);var u=e.getAttribute(v+"ac-boundary"),c=e.getAttribute(v+"ac-submit-on-enter"),d=e.getAttribute(v+"ac-clear-button-enabled"),f=e.getAttribute(v+"ac-timeout"),t=e.getAttribute(v+"ac-type")||"gossip",e=u&&m(e,u);return b||(u=document.getElementById("wafer-autocomplete-clear-button"),b="true"===d&&u&&y(u)),i._util=p({},i._util,{boundaryElem:e,clearButtonText:b,submitOnEnter:null==c?1:Number(c),numPlaceholders:o,placeholder:s,syncOnSearch:l,target:a,template:r,type:t,url:n,timeout:null==f?6e3:Number(f)}),b&&i.renderClearButton(),i.createListElem(),i.addEventListeners(),i}function l(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}t.default=r,e.exports=t.default},"./src/assistBase.js":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],a=!0,n=!1,r=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(i.push(s.value),!t||i.length!==t);a=!0);}catch(e){n=!0,r=e}finally{try{!a&&o.return&&o.return()}finally{if(n)throw r}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(e,t,i){return t&&L(e.prototype,t),i&&L(e,i),e},n=window.wafer,f=n.base,r=n.constants,n=n.utils,l=r.ATTR_PREFIX,o=n.bindEvent,u=n.convertNodeListToArray,h=n.fetchWithCache,c=n.findAncestor,d=n.getConfigFromJSONScriptNode,p=n.getTemplateContent,v=n.getWaferInstanceForElem,m=n.unbindEvent,y=["handleClearButtonClick","handleInputChange","handleListClick","handleListKeyDown"],b=void 0,g=0,_=void 0,a=(a(w,[{key:"addAriaRolesToInput",value:function(){var e=this._util,t=e.elem,e=(e.type,e.id);t.hasAttribute("aria-controls")||e&&t.setAttribute("aria-controls",e+"-list"),t.hasAttribute("aria-expanded")||t.setAttribute("aria-expanded","false")}},{key:"addEventListeners",value:function(){var t=this,e=this._util,i=e.clearButton,a=e.savedLocationTarget,n=e.targetElem,r=e.type;f.__assist=f.__assist||{};e=f.__assist[r];e?(e=e.getListMarkup,this.getListMarkup=e.bind(this)):new Promise(function(t){s.e(0).then(function(e){t(s("./src/types recursive ^\\.\\/.*$")("./"+r))}.bind(null,s)).catch(s.oe)}).then(function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).getListMarkup;f.__assist[r]={getListMarkup:e},t.getListMarkup=e.bind(t)}).catch(function(e){}),a&&o(a,"click",this.handleListClick,{passive:!1}),o(n,"click",this.handleListClick,{passive:!1}),o(n,"keydown",this.handleListKeyDown,{passive:!1}),i&&o(i,"click",this.handleClearButtonClick,{passive:!1})}},{key:"renderClearButton",value:function(){var e=this._util,t=e.clearButtonText,i=e.elem,a=document.createElement("div"),e=document.createElement("div");a.classList.add("wafer-autocomplete-input-wrapper"),Object.assign(a.style,{position:"relative"}),e.innerHTML=t;e=e.children[0];e&&(i.parentNode.insertBefore(a,i),a.appendChild(i),a.appendChild(e),this._util.clearButton=e)}},{key:"removeEventListeners",value:function(){var e=this._util,t=e.clearButton,i=e.savedLocationTarget,e=e.targetElem;i&&m(i,"click",this.handleListClick,{passive:!1}),m(e,"click",this.handleListClick,{passive:!1}),m(e,"keydown",this.handleListKeyDown,{passive:!1}),t&&m(t,"click",this.handleClearButtonClick,{passive:!1})}},{key:"updateInputValue",value:function(e){var t=e.getAttribute("id");t&&this._util.elem.setAttribute("aria-activedescendant",t),this._util.elem.value=e.getAttribute("data-display-value")||e.innerText||e.textContent,this.handleClearButtonVisibility()}},{key:"getPlaceholders",value:function(){for(var e=this._util,t=e.listElem,i=e.placeholderElem,a=e.numPlaceholders,n=document.createDocumentFragment(),r=0;r<a;r++){var s=document.createElement("li");s.setAttribute("tabindex",0),s.setAttribute("role","option"),s.innerHTML=i.innerHTML,n.appendChild(s)}return t.appendChild(n),t}},{key:"getSuggestions",value:function(){var a=this,e=this._util,t=e.ariaConfig,i=e.elem,n=e.targetElem,r=e.numPlaceholders,s=this._util,o=s.url,e=s.syncOnSearch,l=void 0!==e&&e;if(!(o&&n&&this.getListMarkup&&this._state.active))return!1;var s=this._util,u=s.errorClass,e=s.timeout,s=s.type,c=i.value.toLowerCase();if(i.classList.remove(u),!c)return this.clear(),!1;c!==this._state.term.toLowerCase()&&this.clearAttributes();var d=t&&t.resultsMessage,t=this._state.woeid;t&&(o=o+"&woeid="+t),0<r&&!this._state.listOpen&&(r=this.getPlaceholders(),this._state.listOpen=!0,this._state.placeholdersVisible=!0,this.showList(),n.appendChild(r));e={cache:1,cacheStrategy:"cacheFirst",timeout:e,useRid:0};"astra-cards"!==s&&"mail-assist"!==s||(e.credentials="include"),h(o.replace("{term}",c),e).then(function(e){var t=a._util.listElem;f.destroy(t);var i=a.getListMarkup(e,c),t=i.children.length;return t?(a._state.placeholdersVisible=!1,a._state.listOpen=!0,a.showList()):(a._state.listOpen=!1,a.hideList()),d&&(t=d.replace("{0}",t),f.liveAriaRegion.innerHTML=t),n.appendChild(i),f.syncAssets(e.assets),l&&f.sync(n),!0}).catch(function(e){return a._state.placeholdersVisible&&a.clear(),f.emitError({name:w.name,elem:i,meta:{url:o},stack:e.stack}),i.classList.add(u),!1})}},{key:"createListElem",value:function(){var e=this._util,t=e.boundaryElem,i=e.target,a=e.placeholder,e=e.numPlaceholders,t=i&&(t||document.body).querySelector(i),i=u(t.getElementsByClassName("wafer-autocomplete-list"))[0];i||(i=document.createElement("ul")).classList.add("wafer-autocomplete-list"),this._util.targetElem=t,this._util.listElem=i,a&&e&&(this._util.placeholderElem=document.getElementById(a))}},{key:"showList",value:function(e){var t=this._util,i=t.boundaryElem,a=t.elem,t=t.listElem;(e=e||t).style.opacity="1",e.classList.add("wafer-autocomplete-list-active"),i&&i.classList.add("wafer-autocomplete-active"),a.setAttribute("aria-expanded","true")}},{key:"hideList",value:function(e){var t=this._util,i=t.boundaryElem,a=t.elem,t=t.listElem;(e=e||t).style.opacity="0",e.classList.remove("wafer-autocomplete-list-active"),i&&i.classList.remove("wafer-autocomplete-active"),a.setAttribute("aria-expanded","false")}},{key:"clearAttributes",value:function(){var e=this._util.elem;e.setAttribute("aria-activedescendant",""),e.setAttribute("data-assist-src",""),e.setAttribute("data-display-value",""),e.setAttribute("data-user-input",""),e.setAttribute("data-value","")}},{key:"clear",value:function(){var t=this,e=this._util.elem;this._state.active=!1,this._state.listOpen=!1,this._state.placeholdersVisible=!1,e.classList.remove("wafer-autocomplete-did-submit"),this.hideList(),setTimeout(function(){var e=t._util.listElem;f.destroy(e),e.innerHTML=""},100)}},{key:"submit",value:function(){var e,t=this._util,i=t.elem,t=t.formElem;i.classList.add("wafer-autocomplete-did-submit"),this.hideList(),t&&(e=this._util.formInstance||v(t,"wafer-form"))&&(this._util.formInstance=e).instance.submitForm(),this.didComplete(null,i.getAttribute("data-value")||i.value.toLowerCase())}},{key:"handleListItemSelect",value:function(e,t){var i=this._util.savedLocationTarget;if(e.classList.contains("delete-button")){var a=c(e,"wafer-autocomplete-item"),n=a.getAttribute("data-value"),r=this._util,s=r.assistData,o=r.listElem,l=r.saveLocationUrl,r=r.unifiedGeo,o=u(o.children);return t&&t.preventDefault(),a.parentNode.removeChild(a),o.length<=1&&this.clear(!0),void(n&&s&&r&&(s.removeSavedLocation(n),h(l,{body:JSON.stringify({requests:{g0:{resource:"WeatherLocationService.favoriteLocation",operation:"delete",params:{woeid:n,term:this._state.term}}}})}).catch(function(e){})))}e.classList.contains("wafer-autocomplete-item")&&(this.updateInputValue(e),o=(a=this._util).assistData,r=a.elem,s=a.saveLocationUrl,l=a.unifiedGeo,n=this._state.term,this._state.term=this._state.originalTerm=r.value,(a=e.getAttribute("data-value"))&&(e.classList.contains("wafer-autocomplete-currentlocaton-item")&&r.setAttribute("data-assist-src","assistCurrentLocation"),r.setAttribute("data-user-input",n),r.setAttribute("data-value",a),l&&o&&(o.isSavedLocation(a)||(o.addSavedLocationUsingwoeid(a),i&&this.renderSavedLocation()),h(s,{body:JSON.stringify({requests:{g0:{resource:"WeatherLocationService.favoriteLocation",operation:"create",params:{woeid:a,term:n}}}})}).catch(function(e){}))),this.clear(!0),this.submit())}},{key:"stateDidUpdate",value:function(){}},{key:"destroy",value:function(){this.removeEventListeners()}},{key:"handleSelect",value:function(){this.getSuggestions()}},{key:"handleListClick",value:function(e){this.handleListItemSelect(e.target)}},{key:"handleInputKeydown",value:function(){var e=this._util.listElem,e=u(e.children),e=i(e,1)[0];e&&(this.updateInputValue(e),e.focus())}},{key:"handleListDown",value:function(e){e.preventDefault();var t=this._util,i=t.elem,t=t.listElem,t=u(t.children),e=t.indexOf(e.target);if(e===t.length-1)return i.value=this._state.originalTerm,void i.focus();e=t[e+1];this.updateInputValue(e),e.focus()}},{key:"handleInputKeyup",value:function(){var e=this._util.listElem,e=u(e.children),e=e[e.length-1];e&&(this.updateInputValue(e),e.focus())}},{key:"handleListUp",value:function(e){e.preventDefault();var t=this._util,i=t.elem,t=t.listElem,t=u(t.children),e=t.indexOf(e.target);if(0===e)return i.value=this._state.originalTerm,void i.focus();e=t[e-1];this.updateInputValue(e),e.focus()}},{key:"handleListKeyDown",value:function(e){switch(e.which||e.code){case 13:this.handleListItemSelect(e.target,e);break;case 27:this._state.active=!1,this._util.elem.value=this._state.originalTerm||"",this.clearAttributes(),this.clear(),this._util.elem.focus();break;case 38:this.handleListUp(e);break;case 40:this.handleListDown(e)}}},{key:"handleKeyup",value:function(e){}},{key:"handleKeydown",value:function(e){var t=e.which||e.code,i=this._util,a=i.elem,n=i.submitOnClear,r=i.submitOnEnter;switch(a.classList.remove("wafer-autocomplete-did-submit"),this._state.active=!0,this._state.term=a.value,this.handleClearButtonVisibility(),t){case 13:this._state.originalTerm=this._state.term,r&&this.submit();break;case 27:this._state.active=!1,this.clearAttributes(),this.clear();break;case 8:this._state.originalTerm=this._state.term,this.getSuggestions();break;case 38:this.handleInputKeyup(e);break;case 40:this.handleInputKeydown(e);break;default:this._state.originalTerm=this._state.term,this.getSuggestions()}!this._state.term&&n&&this.submit()}},{key:"handleClearButtonVisibility",value:function(){var e=this._util.clearButton;e&&(this._util.elem.value?e.style.visibility="":e.style.visibility="hidden")}},{key:"handleClearButtonClick",value:function(e){var t=this._util,i=t.elem,t=t.submitOnClear;i.value="",this.clearAttributes(),this._state.term=this._state.originalTerm="",this.clear(),i.focus(),this.handleClearButtonVisibility(),t&&this.submit()}},{key:"handleInputChange",value:function(e){""===e.target.value&&this.submit()}},{key:"handleOnfocus",value:function(e){this._state.active=!0,this.clearOthers()}},{key:"handleOnfocusOut",value:function(e){this._state.active=!1}},{key:"handleClickOutside",value:function(e){var t,i;this._state.listOpen&&(t=(i=this._util).elem,i=i.listElem,(e=e.waferComposedMap()).get(t)||e.get(i)||(this._state.active=!1,this.clear(!1,{source:"clickOutside"})))}}]),w);function w(e){var t=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=i.errorClass,n=i.successClass,r=i.selector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,w);var s=e.getAttribute("id");b||(o=document.getElementById("wafer-autocomplete-clear-button"),b=o&&p(o));var i=e.getAttribute(l+"submit-on-clear"),o=e.getAttribute(l+"trigger");_=_||d(document.getElementById("wafer-autocomplete-config")),g++,this._util={ariaConfig:_,clearButtonText:b,elem:e,errorClass:a,id:s,idIndex:g,selector:r,submitOnClear:Number(i)||0,successClass:n},"select"===o&&(this._util.formElem=c(e,"wafer-form")),this._state={active:!1,listOpen:!1,originalTerm:"",placeholdersVisible:!1,term:""},b&&this.renderClearButton(),y.forEach(function(e){t[e]=t[e].bind(t)}),this.addAriaRolesToInput()}function L(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}t.default=a,e.exports=t.default},"./src/base.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});function l(e,t,i){null===e&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,t);return void 0!==a?"value"in a?a.value:void 0!==(a=a.get)?a.call(i):void 0:null===(e=Object.getPrototypeOf(e))?void 0:l(e,t,i)}var u,c,i=function(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e},d=["lp-woeid"],a=window.wafer,n=a.WaferBaseClass,f=a.utils.debounce,h=["handleSelect","handleOnfocus","handleOnfocusOut"],p=["handleKeydown","handleKeyup"],i=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(v,n),i(v,[{key:"stateDidUpdate",value:function(){this._instance.stateDidUpdate(this._util)}},{key:"destroy",value:function(){this._instance.destroy()}},{key:"clear",value:function(e,t){this._instance.clear(e,t)}},{key:"removeEventListeners",value:function(){this._instance.removeEventListeners()}},{key:"handleSelect",value:function(e){this._instance.handleSelect.call(this._instance,e)}},{key:"handleKeydown",value:function(e){this._instance.handleKeydown.call(this._instance,e)}},{key:"handleKeyup",value:function(e){this._instance.handleKeyup.call(this._instance,e)}},{key:"handleOnfocus",value:function(e){this._instance.handleOnfocus.call(this._instance,e)}},{key:"handleOnfocusOut",value:function(e){this._instance.handleOnfocusOut.call(this._instance,e)}},{key:"handleClickOutside",value:function(e){this._instance.handleClickOutside.call(this._instance,e)}}]),v);function v(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=t.errorClass,a=t.successClass,t=t.selector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,e,{selector:t},{STATE_ATTRS:d}));e.classList.contains("wafer-location-picker")?n._instance=new(c=c||o(s("./src/locationPicker.js"))).default(e,{errorClass:i,successClass:a,selector:t}):n._instance=new(u=u||o(s("./src/assist.js"))).default(e,{errorClass:i,successClass:a,selector:t}),h.forEach(function(e){n[e]=n[e].bind(n)}),p.forEach(function(e){n[e+"Debounce"]=f(n[e],300,n)});var r=n;return n._instance.clearOthers=function(){r.clearOthers.call(this)},n._instance.didComplete=function(e,t){n.didComplete(e,t)},l(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"addEventListeners",n).call(n),n}function r(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}i.events={click:[["wafer-autocomplete","handleSelect"]],focusin:[["_self","handleOnfocus"]],focusout:[["_self","handleOnfocusOut"]],keydown:[["_self","handleKeydownDebounce"]],keyup:[["_self","handleKeyupDebounce"]]},t.default=i,e.exports=t.default},"./src/controller.js":function(e,t,i){"use strict";function n(){return e=i("./src/base.js"),r=e&&e.__esModule?e:{default:e};var e}Object.defineProperty(t,"__esModule",{value:!0});var r,d=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],a=!0,n=!1,r=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(i.push(s.value),!t||i.length!==t);a=!0);}catch(e){n=!0,r=e}finally{try{!a&&o.return&&o.return()}finally{if(n)throw r}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=window.wafer.controllers.WaferBaseController,a=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,a),s);function s(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.errorClass,i=void 0===t?"wafer-autocomplete-error":t,a=e.root,t=void 0===a?document:a,a=e.selector,a=void 0===a?"wafer-autocomplete":a,e=e.successClass,e=void 0===e?"wafer-autocomplete-complete":e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,{root:t,selector:a,props:{errorClass:i,selector:a,successClass:e},WaferClass:(r||n()).default})),c=e;return(r||n()).default.prototype.clearOthers=function(){var e=this._util.elem,t=c._state.elementInstances,i=!0,a=!1,n=void 0;try{for(var r,s=t.entries()[Symbol.iterator]();!(i=(r=s.next()).done);i=!0){var o=d(r.value,2),l=o[0],u=o[1];l!==e&&u.instance.clear(!1,{source:"clearOthers"})}}catch(e){a=!0,n=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw n}}},e.sync(),e}t.default=a,e.exports=t.default},"./src/data.js":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=(function(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}(n,[{key:"addLocation",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.woeid;this.locations[t+""]=e}},{key:"addSavedLocation",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.woeid;this.savedLocationsUuidMapping[t+=""]=e,this.savedLocationsUuids.push(t)}},{key:"isSavedLocation",value:function(e){return this.savedLocationsUuidMapping[e]}},{key:"removeSavedLocation",value:function(e){this.savedLocationsUuidMapping[e]={},delete this.savedLocationsUuidMapping[e];e=this.savedLocationsUuids.indexOf(e);-1!==e&&this.savedLocationsUuids.splice(e,1)}},{key:"addSavedLocationUsingwoeid",value:function(e){var t=this.locations[e];this.savedLocationsUuidMapping[e]=t,this.savedLocationsUuids.unshift(e)}}]),n);function n(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,n),this.locations=[],this.savedLocationsUuidMapping={},this.savedLocationsUuids=[]}function r(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}t.default=a,e.exports=t.default},"./src/entry.js":function(e,t,i){"use strict";var a,n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=new(a||(n=i("./src/controller.js"),a=n&&n.__esModule?n:{default:n})).default({selector:".wafer-autocomplete"}),e.exports=t.default},"./src/locationPicker.js":function(e,t,p){"use strict";function v(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}Object.defineProperty(t,"__esModule",{value:!0});function n(e,t,i){null===e&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,t);return void 0!==a?"value"in a?a.value:void 0!==(a=a.get)?a.call(i):void 0:null===(e=Object.getPrototypeOf(e))?void 0:n(e,t,i)}var i,y,b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i,a=arguments[t];for(i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},a=function(e,t,i){return t&&u(e.prototype,t),i&&u(e,i),e},r=window.wafer,f=r.base,s=r.constants,r=r.utils,g=s.ATTR_PREFIX,l=r.fetchWithCache,_=r.findAncestor,w=r.getTemplateContent,o=r.getWaferInstanceForElem,L=void 0,a=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(O,(i||function(){return i=v(p("./src/assistBase.js"))}()).default),a(O,[{key:"fetchAndRenderSavedLocations",value:function(){var t=this,e=this._util,i=e.assistData,a=e.elem,n=e.savedLocationTarget,r=e.saveLocationUrl,s=e.timeout,o=e.trigger;r&&l(r,{cache:1,cacheStrategy:"networkFirst",timeout:s,useRid:0}).then(function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).data,e=void 0===e?[]:e;return i&&Array.isArray(e)&&e.forEach(function(){i.addSavedLocation(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}),"input"===o&&!n||t.renderSavedLocation(),!0}).catch(function(e){return f.emitError({name:"WaferAutoComplete",elem:a,meta:{url:r},stack:e.stack}),!1})}},{key:"renderSavedLocation",value:function(){var e=this._util,t=e.ariaConfig,r=e.assistData,i=e.currentLocationTemplate,s=e.deleteButtonText,o=e.idIndex,a=e.listElem,l=e.savedLocationTarget,n=e.targetElem;if(r.savedLocationsUuids.length){var u=void 0,c=void 0;l?c=document.createDocumentFragment():u=document.createDocumentFragment();e=t&&t.resultsMessage;if(u&&i&&((t=document.createElement("li")).innerHTML=i,(t=t.children[0]).classList.add("wafer-autocomplete-currentlocaton-item","wafer-autocomplete-item"),t.setAttribute("tabindex",0),t.setAttribute("role","option"),t.setAttribute("id","wf-autocomplete-saved-result-"+o+"-0"),u.appendChild(t)),r.savedLocationsUuids.forEach(function(e,t){var i,a,n=(r.savedLocationsUuidMapping[e]||{}).qualifiedName;n&&(i=document.createElement("li"),a=c||u,i.classList.add("wafer-autocomplete-item","wafer-autocomplete-saved-item"),l||(i.setAttribute("tabindex",0),i.setAttribute("role","option")),i.setAttribute("data-value",e),i.setAttribute("id","wf-autocomplete-saved-result-"+o+"-"+(t+1)),i.innerHTML=n,s&&(i.innerHTML+=s),a.appendChild(i))}),c){var d=document.createElement("ul");return f.destroy(l),l.innerHTML="",d.appendChild(c),void l.appendChild(d)}f.destroy(a),a.innerHTML="",a.appendChild(u),this._state.active=!0,this.showList(),e&&(d=a.children.length,d=e.replace("{0}",d),f.liveAriaRegion.innerHTML=d),n.appendChild(a)}else l?(f.destroy(l),l.innerHTML=""):this.clear(!0)}},{key:"getSuggestions",value:function(){var e=this._util,t=e.elem,i=e.savedLocationTarget,e=e.trigger,t=t.value;("input"===e&&!t||i)&&this.renderSavedLocation(),n(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"getSuggestions",this).call(this)}},{key:"submit",value:function(){var e,t=this._util,i=t.elem,a=t.formElem,t=i.getAttribute("data-value")||i.value.toLowerCase();i.classList.add("wafer-autocomplete-did-submit"),this._state.woeid=t,this.hideList(),a&&(e=this._util.formInstance||o(a,"wafer-form"))&&(this._util.formInstance=e).instance.submitForm(),this.didComplete(null,t)}},{key:"stateDidUpdate",value:function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})["lp-woeid"];e&&(this._state.woeid=e)}},{key:"clear",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).source,i=void 0===t?"":t,a=this._util,t=a.skipReRenderOnOnFocusOthers;"input"===a.trigger&&"clickOutside"===i||e?n(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"clear",this).call(this,e,{source:i}):t&&"clearOthers"===i||this.renderSavedLocation()}}]),O);function O(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=(t.errorClass,t.successClass,t.selector);!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,O);var a=m(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,e,{selector:i})),n=e.getAttribute(g+"lp-target"),r=e.getAttribute(g+"lp-url"),s=e.getAttribute(g+"lp-currentlocation-template-target-id")||"wafer-autocomplete-currentlocation-item",o=e.getAttribute(g+"lp-saved-target");if(!n||!r)return m(a);var l=o&&document.getElementById(o.replace("#","")),u=document.getElementById(s);L||(h=document.getElementById("wafer-autocomplete-delete-button"),L=h&&w(h));var c=u&&w(u),d=e.getAttribute(g+"lp-boundary"),f=e.getAttribute(g+"lp-saved-url"),t=e.getAttribute(g+"lp-submit-on-enter"),i=e.getAttribute(g+"lp-trigger")||"default",o=d&&_(e,d),s=e.getAttribute(g+"lp-timeout"),h=e.getAttribute(g+"lp-type")||"weather",u=e.getAttribute(g+"lp-unified-geo"),d=e.getAttribute(g+"lp-skip-rerender-on-focus-others"),e=e.getAttribute(g+"lp-woeid");return a._util=b({},a._util,{assistData:new(y=y||v(p("./src/data.js"))).default,boundaryElem:o,currentLocationTemplate:c,deleteButtonText:L,saveLocationUrl:f,savedLocationTarget:l,submitOnEnter:null==t?1:Number(t),target:n,trigger:i,type:h,unifiedGeo:null==u?0:Number(u),url:r,skipReRenderOnOnFocusOthers:null==d?0:Number(d),timeout:null==s?6e3:Number(s)}),a._state=b({},a._state,{woeid:e}),a.createListElem(),a.addEventListeners(),a.fetchAndRenderSavedLocations(),a}function u(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}t.default=a,e.exports=t.default}})});
