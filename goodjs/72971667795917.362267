var usumShareSession="https://services.users.elpais.com/serviceLogin.html?tokenARC={token}",cookiesToPasteValue=["ArcId.USER_INFO"],_setItem=Storage.prototype.setItem;function updateCookie(e,t){var o=new Date;o.setDate(o.getDate()+365);e=[e,btoa(t)].join("="),t=["expires",o].join("="),o=["domain",".elpais.com"].join("=");document.cookie=[e,t,o,"path=/","samesite=none","Secure"].join(";")}function deleteCookie(e){document.cookie=e+"=;Path=/;domain=.elpais.com;Expires=Thu, 01 Jan 1970 00:00:01 GMT;"}Storage.prototype.setItem=function(e,t){cookiesToPasteValue.includes(e)&&updateCookie(e,t),_setItem.apply(localStorage,[e,t])},function(){function e(e){e=document.cookie.match(new RegExp("(^| )"+e+"=([^;]+)"));return e?e[2]:void 0}for(var t in cookiesToPasteValue){var o=cookiesToPasteValue[t],t=e(o);t&&_setItem.apply(localStorage,[o,atob(t)])}var s,a;deleteCookie("P.USER_INFO"),s=e("uid_ns"),a=localStorage.getItem("ArcId.USER_INFO"),s&&1!==s.split("#").filter(e=>""!==e.trim()).length||!a||!JSON.parse(a).accessToken||(s=usumShareSession.replace("{token}",JSON.parse(a).accessToken),(a=new XMLHttpRequest).onreadystatechange=function(){var e;4==this.readyState&&200==this.status&&(console.log("Cookies setted"),(e=document.createEvent("HTMLEvents")).initEvent("oncookiessetted",!0,!0),document.dispatchEvent(e))},a.open("GET",s,!0),a.withCredentials=!0,a.responseType="document",a.send())}();
