(window.webpackJsonp=window.webpackJsonp||[]).push([[420],{1297:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var c=n(228),a=n.n(c),o=n(232),r=n.n(o),s=n(18);var i=n(20),u=n.n(i);async function d(t,e={}){const n=(new Date).getTime(),{responseHeaders:c,...o}=t,i=r.a.format(o),d=Object(s.createLogger)("dal",{url:i});try{const t=await fetch(i,e),o=await async function(t){const{ok:e,status:n,statusText:c}=t,a={ok:e,status:n,statusText:c};let o="";try{if(o=await t.text(),!e)return{...a,data:{text:o}};const n=JSON.parse(o);return{...a,data:n}}catch(t){return{...a,data:{text:o}}}}(t);if(c){const e=function(t,e){return u()(e).call(e,(e,n)=>({...e,[n]:t.headers.get(n)}),{})}(t,c);o.data={...o.data,responseHeaders:e}}return d.info({responseTime:a()()-n+"ms",fetchOptions:e},"dal request"),o}catch(t){switch(!0){case"FetchError"===t.name&&"request-timeout"===t.type:throw new Error("Timeout exceeded for "+i);case"FetchError"===t.name&&"invalid-json"===t.type:throw new Error("Got non-JSON or invalid JSON response for "+i);default:throw t}}}},2021:function(t,e,n){"use strict";n.r(e),n.d(e,"clientLoader",(function(){return l}));var c=n(5),a=n(96),o=n(1297),r=n(749);const s=Object(r.a)("UPS2","HOST","PURCHASE"),i=Object(r.a)("UPS2","PROTOCOL","PURCHASE","https");var u=n(94);function*d(){yield Object(c.c)(f),yield Object(c.c)(O)}function*O(){const t=yield Object(c.i)(a.g),e=yield Object(c.i)(a.f),n=Object(a.d)(e),o=Object(a.b)(e);t&&(n&&!o)&&(yield Object(c.c)(b))}function*f(){const t=yield Object(c.i)(a.g),{SubsSdk:e}=window;if(t&&e){const t=yield Object(c.i)(a.f),n=Object(a.b)(t),o=Object(u.getEnv)("PIANO_APP_ID"),r=Object(u.getEnv)("PIANO_TINYPASS_HOST"),s=Object(u.getEnv)("PIANO_WX_API_HOST"),i=n;yield Object(c.c)([e,e.init],{pianoAppID:o,tinyPassHost:r,pianoKeyHost:s,disableAdBlocker:i})}}function*b(){const t={host:s,protocol:i,pathname:"/purchase/token"};yield Object(c.c)(o.a,t,{credentials:"include"})}async function l(t){await t.runSaga(d)}},749:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var c=n(94);const a=(t,e,n,a)=>{const o=n?n+"_":"",r=t+"_"+e;return c.env[""+o+r+"_CLIENT"]||c.env[r+"_CLIENT"]||a}}}]);
//# sourceMappingURL=420.subscription.7f1e24e7de415eb6bc0e.js.map