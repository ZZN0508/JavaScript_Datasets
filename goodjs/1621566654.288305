define("dropbox/proto/js_init_data/checkout/checkout_page",["require","exports","tslib","protobufjs/minimal"],(function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.checkout_page=void 0;var n,o,i,s=(a=r.__importStar(a)).Reader,l=a.Writer,u=a.util,c=a.roots.default||(a.roots.default={});t.default=c,t.checkout_page=c.checkout_page=((n=c.checkout_page||{}).Offering=(function(e){function e(e){if(this.licenseOfferingIds={},this.addonOfferingIds={},e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.planOfferingId="",e.prototype.licenseOfferingIds=u.emptyObject,e.prototype.addonOfferingIds=u.emptyObject,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=l.create()),null!=e.planOfferingId&&Object.hasOwnProperty.call(e,"planOfferingId")&&t.uint32(10).string(e.planOfferingId),null!=e.licenseOfferingIds&&Object.hasOwnProperty.call(e,"licenseOfferingIds"))for(var r=Object.keys(e.licenseOfferingIds),a=0;a<r.length;++a)t.uint32(18).fork().uint32(10).string(r[a]).uint32(16).int32(e.licenseOfferingIds[r[a]]).ldelim();if(null!=e.addonOfferingIds&&Object.hasOwnProperty.call(e,"addonOfferingIds"))for(r=Object.keys(e.addonOfferingIds),a=0;a<r.length;++a)t.uint32(26).fork().uint32(10).string(r[a]).uint32(16).int32(e.addonOfferingIds[r[a]]).ldelim();return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r,a,n=void 0===t?e.len:e.pos+t,o=new c.checkout_page.Offering;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:o.planOfferingId=e.string();break;case 2:o.licenseOfferingIds===u.emptyObject&&(o.licenseOfferingIds={});var l=e.uint32()+e.pos;for(r="",a=0;e.pos<l;)switch((d=e.uint32())>>>3){case 1:r=e.string();break;case 2:a=e.int32();break;default:e.skipType(7&d)}o.licenseOfferingIds[r]=a;break;case 3:for(o.addonOfferingIds===u.emptyObject&&(o.addonOfferingIds={}),l=e.uint32()+e.pos,r="",a=0;e.pos<l;){var d;switch((d=e.uint32())>>>3){case 1:r=e.string();break;case 2:a=e.int32();break;default:e.skipType(7&d)}}o.addonOfferingIds[r]=a;break;default:e.skipType(7&i)}}return o},e.getTypeUrl=function(){return"type.googleapis.com/checkout_page.Offering"},e})(n.Offering||{}),n.CheckoutRevenueApiPathwayEnum=(o={},(i=Object.create(o))[o[0]="LEGACY_READ_WRITE"]=0,i[o[1]="DUAL_READ_LEGACY_WRITE"]=1,i[o[2]="DUAL_READ_DUAL_WRITE"]=2,i[o[3]="DUAL_READ_REVAPI_WRITE"]=3,i[o[4]="REVAPI_READ_WRITE"]=4,i),n.CheckoutExperimentProps=(function(e){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.proBizMve="",e.prototype.paymentPayPalV2Flow="",e.prototype.checkoutRevenueApiPathway=0,e.prototype.checkoutNewOrderSummary="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=l.create()),null!=e.proBizMve&&Object.hasOwnProperty.call(e,"proBizMve")&&t.uint32(18).string(e.proBizMve),null!=e.paymentPayPalV2Flow&&Object.hasOwnProperty.call(e,"paymentPayPalV2Flow")&&t.uint32(26).string(e.paymentPayPalV2Flow),null!=e.checkoutRevenueApiPathway&&Object.hasOwnProperty.call(e,"checkoutRevenueApiPathway")&&t.uint32(40).int32(e.checkoutRevenueApiPathway),null!=e.checkoutNewOrderSummary&&Object.hasOwnProperty.call(e,"checkoutNewOrderSummary")&&t.uint32(58).string(e.checkoutNewOrderSummary),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,a=new c.checkout_page.CheckoutExperimentProps;e.pos<r;){var n=e.uint32();switch(n>>>3){case 2:a.proBizMve=e.string();break;case 3:a.paymentPayPalV2Flow=e.string();break;case 5:a.checkoutRevenueApiPathway=e.int32();break;case 7:a.checkoutNewOrderSummary=e.string();break;default:e.skipType(7&n)}}return a},e.getTypeUrl=function(){return"type.googleapis.com/checkout_page.CheckoutExperimentProps"},e})(n.CheckoutExperimentProps||{}),n.MonthlyPrice=(function(e){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.price="",e.prototype.duration="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=l.create()),null!=e.price&&Object.hasOwnProperty.call(e,"price")&&t.uint32(10).string(e.price),null!=e.duration&&Object.hasOwnProperty.call(e,"duration")&&t.uint32(18).string(e.duration),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,a=new c.checkout_page.MonthlyPrice;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:a.price=e.string();break;case 2:a.duration=e.string();break;default:e.skipType(7&n)}}return a},e.getTypeUrl=function(){return"type.googleapis.com/checkout_page.MonthlyPrice"},e})(n.MonthlyPrice||{}),n.AnnualPrice=(function(e){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.price="",e.prototype.priceAsMonthly="",e.prototype.duration="",e.prototype.savings="",e.prototype.withoutSavings="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=l.create()),null!=e.price&&Object.hasOwnProperty.call(e,"price")&&t.uint32(10).string(e.price),null!=e.priceAsMonthly&&Object.hasOwnProperty.call(e,"priceAsMonthly")&&t.uint32(18).string(e.priceAsMonthly),null!=e.duration&&Object.hasOwnProperty.call(e,"duration")&&t.uint32(26).string(e.duration),null!=e.savings&&Object.hasOwnProperty.call(e,"savings")&&t.uint32(34).string(e.savings),null!=e.withoutSavings&&Object.hasOwnProperty.call(e,"withoutSavings")&&t.uint32(42).string(e.withoutSavings),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,a=new c.checkout_page.AnnualPrice;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:a.price=e.string();break;case 2:a.priceAsMonthly=e.string();break;case 3:a.duration=e.string();break;case 4:a.savings=e.string();break;case 5:a.withoutSavings=e.string();break;default:e.skipType(7&n)}}return a},e.getTypeUrl=function(){return"type.googleapis.com/checkout_page.AnnualPrice"},e})(n.AnnualPrice||{}),n.FeatureItem=(function(e){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.text="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=l.create()),null!=e.text&&Object.hasOwnProperty.call(e,"text")&&t.uint32(10).string(e.text),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,a=new c.checkout_page.FeatureItem;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:a.text=e.string();break;default:e.skipType(7&n)}}return a},e.getTypeUrl=function(){return"type.googleapis.com/checkout_page.FeatureItem"},e})(n.FeatureItem||{}),n.IncludedFeaturesContents=(function(e){function e(e){if(this.items=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.title="",e.prototype.items=u.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=l.create()),null!=e.title&&Object.hasOwnProperty.call(e,"title")&&t.uint32(10).string(e.title),null!=e.items&&e.items.length)for(var r=0;r<e.items.length;++r)c.checkout_page.FeatureItem.encode(e.items[r],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,a=new c.checkout_page.IncludedFeaturesContents;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:a.title=e.string();break;case 2:a.items&&a.items.length||(a.items=[]),a.items.push(c.checkout_page.FeatureItem.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return a},e.getTypeUrl=function(){return"type.googleapis.com/checkout_page.IncludedFeaturesContents"},e})(n.IncludedFeaturesContents||{}),n.PageUrl=(function(e){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.buyLink="",e.prototype.trialLink="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=l.create()),null!=e.buyLink&&Object.hasOwnProperty.call(e,"buyLink")&&t.uint32(10).string(e.buyLink),null!=e.trialLink&&Object.hasOwnProperty.call(e,"trialLink")&&t.uint32(18).string(e.trialLink),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,a=new c.checkout_page.PageUrl;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:a.buyLink=e.string();break;case 2:a.trialLink=e.string();break;default:e.skipType(7&n)}}return a},e.getTypeUrl=function(){return"type.googleapis.com/checkout_page.PageUrl"},e})(n.PageUrl||{}),n.TrialInfo=(function(e){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.trialDuration=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=l.create()),null!=e.trialDuration&&Object.hasOwnProperty.call(e,"trialDuration")&&t.uint32(8).int32(e.trialDuration),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,a=new c.checkout_page.TrialInfo;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:a.trialDuration=e.int32();break;default:e.skipType(7&n)}}return a},e.getTypeUrl=function(){return"type.googleapis.com/checkout_page.TrialInfo"},e})(n.TrialInfo||{}),n.AdditionalTermsOfService=(function(e){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.tosTitle="",e.prototype.tosLink="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=l.create()),null!=e.tosTitle&&Object.hasOwnProperty.call(e,"tosTitle")&&t.uint32(10).string(e.tosTitle),null!=e.tosLink&&Object.hasOwnProperty.call(e,"tosLink")&&t.uint32(18).string(e.tosLink),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,a=new c.checkout_page.AdditionalTermsOfService;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:a.tosTitle=e.string();break;case 2:a.tosLink=e.string();break;default:e.skipType(7&n)}}return a},e.getTypeUrl=function(){return"type.googleapis.com/checkout_page.AdditionalTermsOfService"},e})(n.AdditionalTermsOfService||{}),n.TeamInfo=(function(e){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.companySize="",e.prototype.teamName="",e.prototype.teamNumUsers=0,e.prototype.phone="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=l.create()),null!=e.companySize&&Object.hasOwnProperty.call(e,"companySize")&&t.uint32(10).string(e.companySize),null!=e.teamName&&Object.hasOwnProperty.call(e,"teamName")&&t.uint32(18).string(e.teamName),null!=e.teamNumUsers&&Object.hasOwnProperty.call(e,"teamNumUsers")&&t.uint32(24).int32(e.teamNumUsers),null!=e.phone&&Object.hasOwnProperty.call(e,"phone")&&t.uint32(34).string(e.phone),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,a=new c.checkout_page.TeamInfo;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:a.companySize=e.string();break;case 2:a.teamName=e.string();break;case 3:a.teamNumUsers=e.int32();break;case 4:a.phone=e.string();break;default:e.skipType(7&n)}}return a},e.getTypeUrl=function(){return"type.googleapis.com/checkout_page.TeamInfo"},e})(n.TeamInfo||{}),n.MultiLicensePlanInfo=(function(e){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.teamInfo=null,e.prototype.minLicenseCount=0,e.prototype.maxLicenseCount=0,e.prototype.eligibleForTrial=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=l.create()),null!=e.teamInfo&&Object.hasOwnProperty.call(e,"teamInfo")&&c.checkout_page.TeamInfo.encode(e.teamInfo,t.uint32(10).fork()).ldelim(),null!=e.minLicenseCount&&Object.hasOwnProperty.call(e,"minLicenseCount")&&t.uint32(16).int32(e.minLicenseCount),null!=e.maxLicenseCount&&Object.hasOwnProperty.call(e,"maxLicenseCount")&&t.uint32(24).int32(e.maxLicenseCount),null!=e.eligibleForTrial&&Object.hasOwnProperty.call(e,"eligibleForTrial")&&t.uint32(32).bool(e.eligibleForTrial),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,a=new c.checkout_page.MultiLicensePlanInfo;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:a.teamInfo=c.checkout_page.TeamInfo.decode(e,e.uint32());break;case 2:a.minLicenseCount=e.int32();break;case 3:a.maxLicenseCount=e.int32();break;case 4:a.eligibleForTrial=e.bool();break;default:e.skipType(7&n)}}return a},e.getTypeUrl=function(){return"type.googleapis.com/checkout_page.MultiLicensePlanInfo"},e})(n.MultiLicensePlanInfo||{}),n.Addon=(function(e){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.id=0,e.prototype.displayName="",e.prototype.displayPrice="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=l.create()),null!=e.id&&Object.hasOwnProperty.call(e,"id")&&t.uint32(8).int32(e.id),null!=e.displayName&&Object.hasOwnProperty.call(e,"displayName")&&t.uint32(18).string(e.displayName),null!=e.displayPrice&&Object.hasOwnProperty.call(e,"displayPrice")&&t.uint32(26).string(e.displayPrice),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,a=new c.checkout_page.Addon;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:a.id=e.int32();break;case 2:a.displayName=e.string();break;case 3:a.displayPrice=e.string();break;default:e.skipType(7&n)}}return a},e.getTypeUrl=function(){return"type.googleapis.com/checkout_page.Addon"},e})(n.Addon||{}),n.SingleAddonSelectorInfo=(function(e){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.title="",e.prototype.description="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=l.create()),null!=e.title&&Object.hasOwnProperty.call(e,"title")&&t.uint32(10).string(e.title),null!=e.description&&Object.hasOwnProperty.call(e,"description")&&t.uint32(18).string(e.description),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,a=new c.checkout_page.SingleAddonSelectorInfo;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:a.title=e.string();break;case 2:a.description=e.string();break;default:e.skipType(7&n)}}return a},e.getTypeUrl=function(){return"type.googleapis.com/checkout_page.SingleAddonSelectorInfo"},e})(n.SingleAddonSelectorInfo||{}),n.AddonSelector=(function(e){function e(e){if(this.addons=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var t;return e.prototype.id=0,e.prototype.type=0,e.prototype.addons=u.emptyArray,e.prototype.singleSelectorInfo=null,Object.defineProperty(e.prototype,"selectorInfo",{get:u.oneOfGetter(t=["singleSelectorInfo"]),set:u.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=l.create()),null!=e.id&&Object.hasOwnProperty.call(e,"id")&&t.uint32(8).int32(e.id),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(16).int32(e.type),null!=e.addons&&e.addons.length)for(var r=0;r<e.addons.length;++r)c.checkout_page.Addon.encode(e.addons[r],t.uint32(26).fork()).ldelim();return null!=e.singleSelectorInfo&&Object.hasOwnProperty.call(e,"singleSelectorInfo")&&c.checkout_page.SingleAddonSelectorInfo.encode(e.singleSelectorInfo,t.uint32(34).fork()).ldelim(),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,a=new c.checkout_page.AddonSelector;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:a.id=e.int32();break;case 2:a.type=e.int32();break;case 3:a.addons&&a.addons.length||(a.addons=[]),a.addons.push(c.checkout_page.Addon.decode(e,e.uint32()));break;case 4:a.singleSelectorInfo=c.checkout_page.SingleAddonSelectorInfo.decode(e,e.uint32());break;default:e.skipType(7&n)}}return a},e.getTypeUrl=function(){return"type.googleapis.com/checkout_page.AddonSelector"},e.AddonSelectorId=(function(){var e={},t=Object.create(e);return t[e[0]="UNKNOWN_SELECTOR_ID"]=0,t[e[1]="PLUS_EXTENDED_VERSION_HISTORY_180_DAYS"]=1,t})(),e.AddonSelectorType=(function(){var e={},t=Object.create(e);return t[e[0]="UNKNOWN_SELECTOR_TYPE"]=0,t[e[1]="SINGLE_SELECTOR"]=1,t[e[2]="MULTI_SELECTOR"]=2,t})(),e})(n.AddonSelector||{}),n.UiProduct=(function(e){function e(e){if(this.addonSelectorsForMonthlyBilling=[],this.addonSelectorsForAnnualBilling=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.productPlan="",e.prototype.name="",e.prototype.namePrefixedWithDropbox="",e.prototype.priceMonthly=null,e.prototype.priceAnnual=null,e.prototype.quota="",e.prototype.pageUrl=null,e.prototype.included=null,e.prototype.paymentSchedule="",e.prototype.showYearlyPricePerMonth=!1,e.prototype.vatEnabled=!1,e.prototype.trialInfo=null,e.prototype.planColor="",e.prototype.additionalTermsOfService=null,e.prototype.multiLicensePlanInfo=null,e.prototype.addonSelectorsForMonthlyBilling=u.emptyArray,e.prototype.addonSelectorsForAnnualBilling=u.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=l.create()),null!=e.productPlan&&Object.hasOwnProperty.call(e,"productPlan")&&t.uint32(10).string(e.productPlan),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(18).string(e.name),null!=e.namePrefixedWithDropbox&&Object.hasOwnProperty.call(e,"namePrefixedWithDropbox")&&t.uint32(26).string(e.namePrefixedWithDropbox),null!=e.priceMonthly&&Object.hasOwnProperty.call(e,"priceMonthly")&&c.checkout_page.MonthlyPrice.encode(e.priceMonthly,t.uint32(34).fork()).ldelim(),null!=e.priceAnnual&&Object.hasOwnProperty.call(e,"priceAnnual")&&c.checkout_page.AnnualPrice.encode(e.priceAnnual,t.uint32(42).fork()).ldelim(),null!=e.quota&&Object.hasOwnProperty.call(e,"quota")&&t.uint32(50).string(e.quota),null!=e.pageUrl&&Object.hasOwnProperty.call(e,"pageUrl")&&c.checkout_page.PageUrl.encode(e.pageUrl,t.uint32(58).fork()).ldelim(),null!=e.included&&Object.hasOwnProperty.call(e,"included")&&c.checkout_page.IncludedFeaturesContents.encode(e.included,t.uint32(66).fork()).ldelim(),null!=e.paymentSchedule&&Object.hasOwnProperty.call(e,"paymentSchedule")&&t.uint32(74).string(e.paymentSchedule),null!=e.showYearlyPricePerMonth&&Object.hasOwnProperty.call(e,"showYearlyPricePerMonth")&&t.uint32(80).bool(e.showYearlyPricePerMonth),null!=e.vatEnabled&&Object.hasOwnProperty.call(e,"vatEnabled")&&t.uint32(88).bool(e.vatEnabled),null!=e.trialInfo&&Object.hasOwnProperty.call(e,"trialInfo")&&c.checkout_page.TrialInfo.encode(e.trialInfo,t.uint32(98).fork()).ldelim(),null!=e.planColor&&Object.hasOwnProperty.call(e,"planColor")&&t.uint32(106).string(e.planColor),null!=e.additionalTermsOfService&&Object.hasOwnProperty.call(e,"additionalTermsOfService")&&c.checkout_page.AdditionalTermsOfService.encode(e.additionalTermsOfService,t.uint32(114).fork()).ldelim(),null!=e.multiLicensePlanInfo&&Object.hasOwnProperty.call(e,"multiLicensePlanInfo")&&c.checkout_page.MultiLicensePlanInfo.encode(e.multiLicensePlanInfo,t.uint32(122).fork()).ldelim(),null!=e.addonSelectorsForMonthlyBilling&&e.addonSelectorsForMonthlyBilling.length)for(var r=0;r<e.addonSelectorsForMonthlyBilling.length;++r)c.checkout_page.AddonSelector.encode(e.addonSelectorsForMonthlyBilling[r],t.uint32(130).fork()).ldelim();if(null!=e.addonSelectorsForAnnualBilling&&e.addonSelectorsForAnnualBilling.length)for(r=0;r<e.addonSelectorsForAnnualBilling.length;++r)c.checkout_page.AddonSelector.encode(e.addonSelectorsForAnnualBilling[r],t.uint32(138).fork()).ldelim();return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,a=new c.checkout_page.UiProduct;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:a.productPlan=e.string();break;case 2:a.name=e.string();break;case 3:a.namePrefixedWithDropbox=e.string();break;case 4:a.priceMonthly=c.checkout_page.MonthlyPrice.decode(e,e.uint32());break;case 5:a.priceAnnual=c.checkout_page.AnnualPrice.decode(e,e.uint32());break;case 6:a.quota=e.string();break;case 7:a.pageUrl=c.checkout_page.PageUrl.decode(e,e.uint32());break;case 8:a.included=c.checkout_page.IncludedFeaturesContents.decode(e,e.uint32());break;case 9:a.paymentSchedule=e.string();break;case 10:a.showYearlyPricePerMonth=e.bool();break;case 11:a.vatEnabled=e.bool();break;case 12:a.trialInfo=c.checkout_page.TrialInfo.decode(e,e.uint32());break;case 13:a.planColor=e.string();break;case 14:a.additionalTermsOfService=c.checkout_page.AdditionalTermsOfService.decode(e,e.uint32());break;case 15:a.multiLicensePlanInfo=c.checkout_page.MultiLicensePlanInfo.decode(e,e.uint32());break;case 16:a.addonSelectorsForMonthlyBilling&&a.addonSelectorsForMonthlyBilling.length||(a.addonSelectorsForMonthlyBilling=[]),a.addonSelectorsForMonthlyBilling.push(c.checkout_page.AddonSelector.decode(e,e.uint32()));break;case 17:a.addonSelectorsForAnnualBilling&&a.addonSelectorsForAnnualBilling.length||(a.addonSelectorsForAnnualBilling=[]),a.addonSelectorsForAnnualBilling.push(c.checkout_page.AddonSelector.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return a},e.getTypeUrl=function(){return"type.googleapis.com/checkout_page.UiProduct"},e})(n.UiProduct||{}),n)})),define("modules/clean/auth/common/captcha",["require","exports","tslib","classnames","react","modules/clean/react/components/css","modules/clean/abuse/captcha_helper"],(function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Captcha=t.CaptchaComponent=t.clear_captcha_response=t.handle_captcha_errors=t.get_captcha_responses=void 0,a=r.__importDefault(a),n=r.__importDefault(n),t.get_captcha_responses=function(e){var t=e.getWrappedComponent();return{"g-recaptcha-response":t.recaptcha_response,"funcaptcha-response":t.funcaptcha_response}},t.handle_captcha_errors=function(e,t){return e.getWrappedComponent().handle_captcha_errors(t)},t.clear_captcha_response=function(e){return e.getWrappedComponent().clear_captcha_response()};var s=(function(t){function o(e){return t.call(this,e)||this}return r.__extends(o,t),o.prototype.handle_captcha_errors=function(t){var a=this;return!(!t||!t.funcaptcha_response)&&(new Promise((function(t,r){e(["modules/clean/abuse/funcaptcha_modal"],t,r)})).then(r.__importStar).then((function(e){(0,e.openFuncaptchaModal)(a.props.email||"",a.props.source,(function(e){a.funcaptcha_response=e,a.props.onSubmit()}),a.props.onReady)})),!0)},o.prototype.clear_captcha_response=function(){this.funcaptcha_response=void 0},o.prototype.componentDidMount=function(){i.LoadRecaptcha(void 0,!0)},o.prototype.render=function(){return n.default.createElement("div",{ref:"container_div",className:a.default({"recaptcha-v2-challenge-container":!0,"recaptcha-v2-challenge-container--invisible":!0})},n.default.createElement("div",{ref:"captcha_div",className:"recaptcha_v2_challenge"}))},o.prototype.submit=function(){this.clear_captcha_response(),this.props.onSubmit()},o})(n.default.Component);t.CaptchaComponent=s,t.Captcha=o.requireCssWithComponent(s,["/static/css/recaptcha-vflIN6j39.css"])})),define("modules/clean/auth/common/utils",["require","exports","tslib","modules/constants/page_load","modules/core/i18n","modules/core/notify","modules/core/uri","modules/clean/form_util/name_parser"],(function(e,t,r,a,n,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.notifyCaptchaNotLoaded=t.twoFactorRecoveryUrl=t.isGoogleGrowthExperimentOn=t.getFormattedName=t.lastNameGoesFirst=t.generateId=void 0,s=r.__importDefault(s),t.generateId=function(e){return e+Math.random().toString().slice(2)};var l=["ja","ko","zh"];t.lastNameGoesFirst=function(){return l.includes(a.USER_LOCALE.slice(0,2))},t.getFormattedName=function(e,r,a){if(!a)return[e,r];var n=s.default.splitFullName(e),o=n[0],i=n[1];return t.lastNameGoesFirst()?i?[i,o]:[e,r]:[o,i]},t.isGoogleGrowthExperimentOn=function(e){return["GOOGLE2","GOOGLE3","MULTISTEP"].includes(e)},t.twoFactorRecoveryUrl=function(e,t){var r=new i.URI({path:"/twofactor_recovery"});return e&&r.updateQuery({remember_me:e.toString()}),t&&!["/",""].includes(t)&&r.updateQuery({cont:t}),r.toString()},t.notifyCaptchaNotLoaded=function(){o.Notify.warning(n.intl.formatMessage({id:"977N0X",defaultMessage:"Your browser appears to be blocking dropboxcaptcha.com, which is required for authentication. To resolve this issue, please update any anti-virus or ad-blocking software settings to allow connections to dropboxcaptcha.com."}))}})),define("modules/clean/components/password_strength_meter",["require","exports","tslib","react","classnames","modules/core/i18n","modules/clean/react/components/css","modules/clean/react/bubble_dropdown_v2","modules/clean/web_timing_logger","modules/core/cancelable_promise","modules/clean/react/sticky_position"],(function(e,t,r,a,n,o,i,s,l,u,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PasswordStrengthMeter=void 0,a=r.__importDefault(a),n=r.__importDefault(n);var d=(function(t){function i(a){var n=t.call(this,a)||this;return n.setZxcvbn=function(e){var t=e.default;n.setState({zxcvbn:t})},n.getPasswordScore=function(e){return n.state.zxcvbn?n.state.zxcvbn(e).score:0},n.state={},a.zxcvbnPostTti?l.waitForTTI().then((function(){n.zxcvbnPromise=u.makeCancelable(new Promise((function(t,r){e(["zxcvbn"],t,r)})).then(r.__importStar)),n.zxcvbnPromise.then(n.setZxcvbn)})):(n.zxcvbnPromise=u.makeCancelable(new Promise((function(t,r){e(["zxcvbn"],t,r)})).then(r.__importStar)),n.zxcvbnPromise.then(n.setZxcvbn)),n}return r.__extends(i,t),i.prototype.componentWillUnmount=function(){this.zxcvbnPromise&&this.zxcvbnPromise.cancel()},i.prototype.render=function(){var e=this.props.password,t=e.length?Math.max(1,this.getPasswordScore(e)):0,r=["",o.intl.formatMessage({id:"i/ragh",defaultMessage:"Weak"}),o.intl.formatMessage({id:"GwYES8",defaultMessage:"So-so"}),o.intl.formatMessage({id:"Yd7c8F",defaultMessage:"Good"}),o.intl.formatMessage({id:"kbsmZh",defaultMessage:"Great!"})],i=this.props.bubbleDescription;return i||(i=o.intl.formatMessage({id:"6SDr7W",defaultMessage:"Passwords must be 6 characters or more. Good passwords are hard to guess and use uncommon words, numbers, symbols, and uppercase letters."})),a.default.createElement("div",{className:"password-input-meter "+this.props.className,tabIndex:-1,"aria-label":o.intl.formatMessage({id:"7h/xn+",defaultMessage:"Password strength"})},[4,3,2,1].map((function(e){var r=n.default({"password-input-dot":!0,"password-input-dot-selected--weak":t>=e&&t<=2,"password-input-dot-selected":t>=e});return a.default.createElement("div",{key:"password-input-dot-"+e,className:r})})),a.default.createElement(s.BubbleDropdown,{position:this.props.bubblePosition||c.StickyPosition.RIGHT,targetButton:a.default.createElement("button",{className:"password-bubble__button"}),className:this.props.bubbleClassName},a.default.createElement("div",{className:"password-bubble__content"},a.default.createElement("div",{className:"password-bubble__title"},r[t]||""),a.default.createElement("div",{className:"password-bubble__desc"},i))))},i})(a.default.Component);t.PasswordStrengthMeter=i.requireCssWithComponent(d,["/static/css/components/password_strength_meter-vfljnpJyO.css"])})),define("modules/clean/react/payments/buy/components/buy_component",["require","exports","tslib","react","modules/core/i18n","modules/clean/web_timing_logger","modules/clean/payments/skus/constants","modules/clean/react/payments/buy/components/buy_purchase_form","modules/clean/react/payments/buy/components/headline","modules/clean/react/payments/buy/components/buy_navigation","react-intl","modules/clean/react/payments/buy/components/payments/async_sox_compliance_warning","modules/clean/react/rebrand/elements/rebrand_arbor_footer_components_lazy","modules/clean/react/payments/buy/components/promos/promo_banner","modules/clean/react/payments/buy/helpers/product_plan_helpers","modules/clean/react/payments/buy/components/order_summary_redesign/order_summary","modules/clean/react/payments/buy/components/promos/promo_utils","modules/clean/react/payments/buy/components/order_summary_redesign/order_summary_utils","classnames"],(function(e,t,r,a,n,o,i,s,l,u,c,d,p,m,f,y,h,g,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BuyComponent=void 0,a=r.__importDefault(a),_=r.__importDefault(_);var v=(function(e){function t(t){var r=e.call(this,t)||this;return r.orderSummaryRedesignRef=a.default.createRef(),r}return r.__extends(t,e),t.prototype.componentDidMount=function(){o.mark_time_to_interactive()},t.prototype.renderCheckOutForm=function(){var e=this.props,t=e.actions,r=e.checkoutFormProps,n=e.experiments,o=e.formData,i=e.pageState,l=e.pricingState,u=e.productPlanType,c=e.showTrialVersion,d=e.useAUTaxInclusivePricing,p=e.userIsEligibleForProfessionalTrial,m=r.braintreeClientToken,f=r.ccIframeUrl,y=r.continueURI,h=r.countryCode,g=r.countryList,_=r.currencyToFormatMap,v=r.defaultPlan,P=r.hideNavigationSteps,b=r.idealBanks,S=r.locale,C=r.localeNumberFormat,E=r.productOfferings,T=r.serializedPaymentFormSpec,k=r.showMarketingOptInIfNewAccount,N=r.supportedProducts,w=r.taxNamesByCountry,F=r.userInfo;return a.default.createElement(s.BuyPurchaseForm,{defaultPlan:v,supportedProducts:N,actions:t,braintreeClientToken:m,ccIframeUrl:f,continueURI:y,countryCode:h,countryList:g,currencyToFormatMap:_,experiments:n,formData:o,hideNavigationSteps:P,idealBanks:b,locale:S,localeNumberFormat:C,pageState:i,productPlanType:u,productOfferings:E,pricingState:l,taxNamesByCountry:w,userInfo:F,serializedPaymentFormSpec:T,showMarketingOptInIfNewAccount:k,showTrialVersion:c,useAUTaxInclusivePricing:!!d,userIsEligibleForProfessionalTrial:p,submitFormSuccess:i.submitFormSuccess,orderSummaryRedesignRef:this.orderSummaryRedesignRef})},Object.defineProperty(t.prototype,"selectedPlanBasePrice",{get:function(){var e=this.props,t=e.pricingState,r=e.formData,a=t.displayPrices,n=a.baseYearlyPrice,o=a.baseMonthlyPrice,s=r.scheduleId.formattedValue;return s===i.ScheduleId.YEARLY&&n?n.formatCurrency():s===i.ScheduleId.MONTHLY&&o?o.formatCurrency():void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedDiscountAmount",{get:function(){var e=this.props,t=e.pricingState,r=e.formData,a=t.displayPrices,n=a.yearlyDiscountAmount,o=a.monthlyDiscountAmount,s=r.scheduleId.formattedValue;return s===i.ScheduleId.YEARLY&&n?n.formatCurrency():s===i.ScheduleId.MONTHLY&&o?o.formatCurrency():void 0},enumerable:!1,configurable:!0}),t.prototype.renderCheckoutPageContent=function(){var e=this.props,t=e.checkoutFormProps,o=t.hideNavigationSteps,i=t.supportedProducts,s=t.defaultPlan,c=t.taxNamesByCountry,d=e.purchaseHeadline,v=e.pageState.promoSpec,P=e.experiments,b=e.productPlanType,S=e.formData,C=e.pricingState,E=e.showTrialVersion,T=C.currentTransitionPrices,k=T.taxAmount,N=T.taxCountryCode,w=T.currency,F=T.totalPrice,I=T.withheldTaxAmount,M=T.taxPlanId,x=f.getSelectedUiProduct(i,b),D=x.namePrefixedWithDropbox,A=x.name,O=S.scheduleId.formattedValue,V="ON"===P.checkoutNewOrderSummary,B=f.getProductPlanType(s),L=f.getSelectedUiProduct(i,B).namePrefixedWithDropbox,U=_.default("DropboxBuyPage__promo-banner",{"DropboxBuyPage__promo-banner--redesign":V}),R=V?n.intl.formatMessage({id:"zV8ze+",defaultMessage:"Checkout"}):d,j=a.default.createElement(a.default.Fragment,null,a.default.createElement(l.DropboxBuyHeadlineWeb,{isOrderSummaryRedesign:V,headlineText:R}),a.default.createElement(u.BuyNavigation,{hideSteps:o,currentStep:2}),V&&v&&a.default.createElement("div",{className:U},a.default.createElement(m.PromoBanner,{promoSpec:v,fullPlanName:L})),a.default.createElement("section",{className:"DropboxBuyPage__form grid__container"},this.renderCheckOutForm())),q=v&&h.shouldShowPromoInOrderSummary(O,v)?r.__assign(r.__assign({},v),{discountAmount:this.selectedDiscountAmount}):void 0,H=g.getOrderSummaryTaxesSpec(k,I,N,c,M);return V?a.default.createElement("div",null,a.default.createElement("div",{className:"grid__item--medium--11-24"},j),a.default.createElement(y.OrderSummary,{planSchedule:S.scheduleId.formattedValue,planName:D,basePrice:this.selectedPlanBasePrice,currency:w,totalPrice:null==F?void 0:F.toString(),isTrial:!!E,trialEndDate:S.trialEndDate.formattedValue,orderSummaryPromoSpec:q,orderSummaryTaxSpec:H,selectedPlanNameNoDropbox:A,containerRef:this.orderSummaryRedesignRef})):a.default.createElement("div",null,j,a.default.createElement(p.LazyRebrandArborMinimalFooter,{localeSelectorWithoutCss:!0}))},t.prototype.render=function(){var e=this.props,t=e.checkoutFormProps,r=t.defaultPlan,o=t.supportedProducts,i=e.SOXComplianceMessage,s=e.pageState.promoSpec,l=e.experiments,u=f.getProductPlanType(r),p=f.getSelectedUiProduct(o,u).namePrefixedWithDropbox,y="ON"===l.checkoutNewOrderSummary;return a.default.createElement("main",{className:"DropboxBuyPage__content grid__container grid--x-left"},a.default.createElement(c.RawIntlProvider,{value:n.intl},a.default.createElement("div",{className:"DropboxBuyPage__header-placeholder"}),s&&!y&&a.default.createElement("div",{className:"DropboxBuyPage__promo-banner"},a.default.createElement(m.PromoBanner,{promoSpec:s,fullPlanName:p})),i&&a.default.createElement(d.AsyncSOXComplianceBanner,{message:i}),this.renderCheckoutPageContent()))},t})(a.default.Component);t.BuyComponent=v})),define("modules/clean/react/payments/buy/components/checkout_page",["require","exports","tslib","react","modules/clean/deprecated_ajax/ajax_jquery","modules/core/exception","modules/core/notify","modules/core/browser","modules/clean/payments/skus/pricing_data","modules/clean/payments/skus/subscription_change_plan","proto_utils/unpack","modules/clean/web_timing_logger","modules/clean/web_timing_logger","modules/clean/analytics","modules/clean/react/payments/common/adapters/setup_cash","modules/clean/react/payments/buy/state/checkout_store_creator","modules/clean/react/payments/buy/actions/buy_actions_creator","modules/clean/react/payments/buy/reducers/reducers","modules/clean/react/payments/buy/components/buy_component","modules/clean/react/payments/buy/helpers/product_plan_helpers","dropbox/proto/js_init_data/checkout/checkout_page"],(function(e,t,r,a,n,o,i,s,l,u,c,d,p,m,f,y,h,g,_,v,P){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RootComponent=t.CheckoutPage=void 0,a=r.__importDefault(a),n=r.__importStar(n),o=r.__importStar(o),s=r.__importStar(s),d=r.__importStar(d);var b=P.checkout_page.CheckoutRevenueApiPathwayEnum,S=P.checkout_page.CheckoutExperimentProps,C=P.checkout_page.UiProduct,E=P.checkout_page.Offering,T=(function(t){function c(a){var n,o=t.call(this,a)||this,i=a.checkoutFormProps,s=a.webTimingLoggerServerContext;f.setupCash(i.localeNumberFormat,i.currencyToFormatMap),s&&d.initialize_module(r.__assign({log_time_to_interactive:!0,log_time_to_view:!0,ttv_at_dom_interactive:!0,tti_at_dom_interactive:!0},s));var l=o.getStoreProps();return o.store=y.configureStore(l,g.proBuyReducer),o.state={checkoutStoreState:o.store.getState()},o.store.subscribe((function(){o.setState({checkoutStoreState:o.store.getState()})})),(null===(n=o.state.checkoutStoreState.pageState.marketingTracker)||void 0===n?void 0:n.initData)&&p.waitForTTI().then((function(){new Promise((function(t,r){e(["modules/clean/marketing_tracker"],t,r)})).then(r.__importStar).then((function(e){var t,r=e.MarketingTracker;(null===(t=o.state.checkoutStoreState.pageState.marketingTracker)||void 0===t?void 0:t.initData)&&r.push(o.state.checkoutStoreState.pageState.marketingTracker.initData)}))})),o}return r.__extends(c,t),c.prototype.getStoreProps=function(){var e,t,r,a=this.props,n=a.checkoutFormProps,o=a.requestId,i=a.showTrialVersion,s=a.promoSpec,l=a.marketingTracker,u=n.defaultPlan,c=v.getProductPlanType(u),d={productPlanType:c,showTrialVersion:Boolean(i)},p=v.getSelectedUiProduct(n.supportedProducts,c);return{countryCode:n.countryCode,locale:n.locale,userInfo:n.userInfo,trialLength:p.trialInfo?p.trialInfo.trialDuration:0,serializedPaymentFormSpec:n.serializedPaymentFormSpec,serializedSubChangePlans:void 0,baseSubChangePlans:null===(t=null===(e=this.state)||void 0===e?void 0:e.checkoutStoreState)||void 0===t?void 0:t.pricingState.baseSubChangePlans,productPlanType:c,navState:d,showMarketingOptInIfNewAccount:n.showMarketingOptInIfNewAccount,showTrialVersion:d.showTrialVersion,requestId:o,marketingTracker:l,promoSpec:s,multiLicensePlanInfo:null!==(r=p.multiLicensePlanInfo)&&void 0!==r?r:null}},Object.defineProperty(c.prototype,"actions",{get:function(){return h.bindCheckoutActions(this.store)},enumerable:!1,configurable:!0}),c.prototype.componentDidMount=function(){var e=this.props,t=e.checkoutFormProps.defaultPlan;e.experiments.checkoutRevenueApiPathway;b.LEGACY_READ_WRITE;var a="buy_"+t;n.SilentBackgroundRequest({url:"/growth/log_visit_ajax",type:"POST",data:r.__assign({endpoint:a,log_preauth:!0,additional_preauth_types:"preauth_pro_upgrade"},this.props.loggingProps)}),this.fetchInitialPlansData()},c.prototype.fetchInitialPlansData=function(){var e=this,t=Object.keys(this.props.checkoutFormProps.supportedProducts);n.WebRequest({url:"/pro/ajax_fetch_sub_change_plans",type:"POST",data:{product_plans:JSON.stringify(t)},success:function(t){var r=JSON.parse(t);if(0===r.length)i.Notify.error(l.PricingDataException.notifyErrorMessagePersonal,20),o.reportException({err:new Error("/pro/ajax_fetch_sub_change_plans returned 0 Subscription Change Plans"),severity:o.SEVERITY.NONCRITICAL});else{var a=r.map((function(e){return u.SubscriptionChangePlan.deserialize(e)}));e.actions.loadSubChangePlans(a)}},error:function(e,t,r){if("CurrencyMismatch"===r)m.ProEventsLogger.log("checkout_page_currency_mismatch"),s.redirect("/account/billing?modal=billing_info&reason=auto_convert");else if(0!==e.status){i.Notify.error(l.PricingDataException.notifyErrorMessagePersonal,20);var a="/pro/ajax_fetch_sub_change_plans failed to return Subscription Change Plans (status: "+e.status+")";o.reportException({err:new Error(a),severity:o.SEVERITY.CRITICAL})}}})},c.prototype.render=function(){var e=this.props,t=e.checkoutFormProps,n=e.experiments,o=e.purchaseHeadline,i=e.SOXComplianceMessage,s=e.useAUTaxInclusivePricing,l=e.userIsEligibleForProfessionalTrial,u=this.state.checkoutStoreState,c=u.navState,d=c.productPlanType,p=c.showTrialVersion,m=u.formData,f=u.pageState,y=u.pricingState,h={actions:this.actions,experiments:n,formData:m,pageState:f,productPlanType:d,showTrialVersion:p,SOXComplianceMessage:i,checkoutFormProps:t,purchaseHeadline:o,pricingState:y,useAUTaxInclusivePricing:s,userIsEligibleForProfessionalTrial:l};return a.default.createElement(_.BuyComponent,r.__assign({},h))},c})(a.default.Component);t.CheckoutPage=T,t.RootComponent=function(e){var t=r.__assign({},e),n=e.checkoutFormProps,o=n.productOfferings,i=n.supportedProducts;return t.experiments=c.unpackProto(e.experiments,S),t.checkoutFormProps.productOfferings=null==o?void 0:o.map((function(e){return c.unpackProto(e,E)})),t.checkoutFormProps.supportedProducts=Object.keys(i).reduce((function(e,t){var a;return r.__assign(r.__assign({},e),((a={})[t]=c.unpackProto(i[t],C),a))}),{}),a.default.createElement(T,r.__assign({},t))}})),define("modules/clean/react/payments/buy/components/headline",["require","exports","tslib","classnames","react"],(function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DropboxBuyHeadlineWeb=void 0,a=r.__importDefault(a),n=r.__importDefault(n),t.DropboxBuyHeadlineWeb=function(e){var t=e.headlineText,r=e.subheadlineText,o=a.default({DropboxBuyPage__headline:!0,grid__container:!0,"DropboxBuyPage__headline--redesign":e.isOrderSummaryRedesign}),i=a.default({DropboxBuyPage__subheadline:!0,grid__container:!0}),s=r?n.default.createElement("h2",{className:i},r):null;return n.default.createElement(n.default.Fragment,null,n.default.createElement("h1",{className:o},t),s)}})),define("modules/clean/react/payments/buy/components/included_features",["require","exports","tslib","classnames","react"],(function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IncludedFeatures=void 0,a=r.__importDefault(a),n=r.__importDefault(n),t.IncludedFeatures=function(e){var t=e.content,r=a.default({"included-features":!0,grid__container:!0});return n.default.createElement("div",{className:r},n.default.createElement("p",{className:"included-features__title grid__item"},t.title),n.default.createElement("ul",{className:"included-features__list grid__container"},t.items.map((function(e,t){return n.default.createElement("li",{className:"included-features__feature grid__item--1-2",key:"included-"+t},e.text)}))))}})),define("modules/clean/react/payments/buy/components/buy_navigation",["require","exports","tslib","classnames","react","react-intl","spectrum-arbor/atoms/arbor_link/index"],(function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BuyNavigation=void 0,a=r.__importDefault(a),n=r.__importDefault(n);var s=o.defineMessages({step:{id:"HfKKgw",defaultMessage:"Step {step}"},axLabel:{id:"cYlduc",defaultMessage:"Current step is {current_step} of {total_steps}"}});t.BuyNavigation=function(e){var t=e.currentStep,l=e.hideSteps,u=a.default("DropboxBuyPage__steps","grid__container"),c=a.default("DropboxBuyPage__step",{"DropboxBuyPage__step--currentStep":1===t,"DropboxBuyPage__step--clickable":2===t}),d=a.default("DropboxBuyPage__step",{"DropboxBuyPage__step--currentStep":2===t});return n.default.createElement("div",{className:u},l?null:n.default.createElement(n.default.Fragment,null,n.default.createElement("span",{className:"ax-visually-hidden"},n.default.createElement(o.FormattedMessage,r.__assign({},s.axLabel,{values:{current_step:t,total_steps:2}}))),n.default.createElement("span",{"aria-hidden":"true"},1===t?n.default.createElement("span",{className:c,"data-testid":"step",key:"step-1"},n.default.createElement(o.FormattedMessage,r.__assign({},s.step,{values:{step:1}}))):n.default.createElement(i.ArborLink,{className:c,"data-testid":"step",key:"step-1",href:"/buy"},n.default.createElement(o.FormattedMessage,r.__assign({},s.step,{values:{step:1}}))),n.default.createElement("span",{className:d,"data-testid":"step",key:"step-2"},n.default.createElement(o.FormattedMessage,r.__assign({},s.step,{values:{step:2}}))))))}})),define("modules/clean/react/payments/common/middleware/pro_buy_logger",["require","exports","modules/clean/analytics","modules/clean/payments/skus/constants","modules/clean/payments/payment_form/payment_form_spec"],(function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.proBuyLogger=void 0,t.proBuyLogger=function(e){var t,o,i,s,l,u=["UpdateFirstName","UpdateLastName","UpdateEmail","UpdatePassword","UpdateZipCode","UpdateAccountHolderName","UpdateIBAN"];return function(c){return function(d){try{var p=c(d),m=d.type,f=e.getState(),y=f.pageState,h=f.pricingState,g=f.formData,_=f.navState,v=void 0;if(-1!==u.indexOf(m)&&o===m)return p;"UpdateTransitionsStart"===m?t=(new Date).getTime():"UpdateTransitionsSuccess"!==m&&"UpdateTransitionsError"!==m||(v=(((new Date).getTime()-t)/1e3).toFixed(1));var P={type:m,submitButtonState:y.submitting||h.loadingPrices?"disabled":"enabled"};if(void 0!==v&&(P.roundtrip=v),"UpdateSchedule"===m){var b="Unknown";g.scheduleId.rawValue===a.ScheduleId.MONTHLY?b="SelectMonthly":g.scheduleId.rawValue===a.ScheduleId.YEARLY&&(b="SelectYearly"),P.event=b}else if("UpdatePaymentMethod"===m){var S="Unknown";g.paymentMethod.rawValue===n.PaymentMethod.CreditCard?S="SelectCredit":g.paymentMethod.rawValue===n.PaymentMethod.PayPal?S="SelectPaypal":g.paymentMethod.rawValue===n.PaymentMethod.DirectDeposit?S="SelectDebit":g.paymentMethod.rawValue===n.PaymentMethod.Ideal&&(S="SelectIdeal"),P.event=S}else if("UpdateNonce"===m){var C=!1,E=g.nonce,T=E.isCCNValid,k=E.isCCodeValid,N=E.isCCExpValid;if(null!==i&&null!==l&&null!==s&&i===T&&l===k&&s===N&&(C=!0),i=T,l=k,s=N,C)return p;P.UpdateCC=T?"Valid":"Invalid",P.UpdateCVV=k?"Valid":"Invalid",P.UpdateExp=N?"Valid":"Invalid",o=m}return g.productPlanType.rawValue&&(P.productPlanType=g.productPlanType.rawValue,P.showTrialVersion=_&&_.showTrialVersion?"true":"false"),"UpdateHistory"===m&&y.promoSpec&&(P.promoId=y.promoSpec.id),r.ProEventsLogger.log(r.ProEventNames.BUY_TRY_PAGE_CHECKOUT,P),-1!==u.indexOf(m)&&(o=m),p}catch(e){throw r.ProEventsLogger.log(r.ProEventNames.BUY_TRY_PAGE_CHECKOUT_CRASH,{action:d.type,error:e.stack||e.toString()}),e}}}}})),define("modules/clean/react/payments/buy/actions/buy_actions_creator",["require","exports","tslib","redux","modules/clean/react/payments/buy/actions/page_actions","modules/clean/react/payments/buy/actions/page_actions_with_dbmodal","modules/clean/react/payments/buy/actions/buy_form_actions","modules/clean/react/payments/common/form/actions/actions","modules/clean/react/payments/checkout/components/payment_method_form/apple_pay"],(function(e,t,r,a,n,o,i,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SHARED_FORM_ACTIONS=t.bindCheckoutActions=void 0,a=r.__importStar(a),n=r.__importStar(n),i=r.__importStar(i),s=r.__importStar(s),t.bindCheckoutActions=function(e){return a.bindActionCreators(r.__assign(r.__assign({},t.SHARED_FORM_ACTIONS),{loadSubChangePlans:n.loadSubChangePlans,updateHistory:n.updateHistory,updateSelectedPlan:n.updateSelectedPlan}),e.dispatch)},t.SHARED_FORM_ACTIONS={showFormFieldErrors:s.showFormFieldErrors,submitCaptcha:s.submitCaptcha,submitProBuyForm:i.submitProBuyFormToServer,updateNonce:s.updateNonce,updatePayPalNonce:s.updatePayPalNonce,blurCCField:s.blurCCField,updateAdyenEncryptedCard:s.updateAdyenEncryptedCard,updateEncryptedCardForNetworkToken:s.updateEncryptedCardForNetworkToken,updateApplePayToken:s.updateApplePayToken,updateBrowserInfo:s.updateBrowserInfo,updateThreeDsData:s.updateThreeDsData,triggerThreeDsChallenge:s.triggerThreeDsChallenge,triggerThreeDsFingerprint:s.triggerThreeDsFingerprint,updateBIN:s.updateBIN,toggleExistingAccount:o.toggleSignInModal,updateCurrentPage:n.updateCurrentPage,updateFirstName:s.updateFirstName,updateLastName:s.updateLastName,updateEmail:s.updateEmail,updatePassword:s.updatePassword,updateSchedule:i.updateSchedule,updatePaymentMethod:s.updatePaymentMethod,updateCountryCode:i.updateCountryCode,updateZipCode:i.updateZipCode,blurZipCode:s.blurZipCode,updateVat:i.updateVat,blurVat:s.blurVat,updateCpf:s.updateCpf,blurCpf:s.blurCpf,updateCpfName:s.updateCpfName,updateAccountHolderName:s.updateAccountHolderName,blurAccountHolderName:s.blurAccountHolderName,updateIBAN:s.updateIBAN,blurIBAN:s.blurIBAN,updateMandateSigned:s.updateMandateSigned,updateMarketingOptIn:s.updateMarketingOptIn,updateIdealBank:i.updateIdealBank,updateTermsAndService:s.updateTermsAndService,paymentBannerError:s.paymentBannerError,applePayAction:l.applePayAction}})),define("modules/clean/react/payments/buy/actions/buy_form_actions",["require","exports","tslib","modules/clean/analytics","modules/clean/payments/payment_form/payment_form_spec","modules/clean/payments/skus/constants","modules/core/exception","modules/clean/react/payments/buy/actions/pricing_actions","modules/core/notify","modules/clean/web_register_logging_data","modules/clean/payments/skus/pricing_data","modules/clean/react/payments/common/form/actions/actions","modules/clean/react/payments/common/form/actions/actions","modules/clean/react/payments/common/form/actions/actions","modules/clean/react/payments/buy/helpers/product_plan_helpers","modules/clean/react/payments/buy/types/types"],(function(e,t,r,a,n,o,i,s,l,u,c,d,p,m,f,y){"use strict";function h(e,t,r,a,o,i,s){void 0===o&&(o=!1),void 0===i&&(i=!0),void 0===s&&(s="OFF");var l=e.countryCode.formattedValue,u=["scheduleId","paymentMethod","countryCode"];return o||u.push("termsAndService"),r||(u.push("firstName","lastName","email","password"),a&&u.push("marketingOptIn")),t.allow_zip_code_for_country(l)&&u.push("zipCode"),t.should_show_vat_for_country(l)&&""!==e.vat.formattedValue&&u.push("vat"),t.should_require_cpf(l,e.paymentMethod.formattedValue)&&u.push("cpf"),e.paymentMethod.formattedValue===n.PaymentMethod.CreditCard?(u.push("nonce"),u.push("adyenEncryptedCard"),u.push("encryptedCardForNetworkToken"),u.push("browserInfo"),u.push("threeDsData"),i&&u.push("bin")):e.paymentMethod.formattedValue===n.PaymentMethod.PayPal?"ON"===s&&u.push("payPalNonce"):e.paymentMethod.formattedValue===n.PaymentMethod.DirectDeposit?u.push("accountHolderName","iban","mandateSigned"):e.paymentMethod.formattedValue===n.PaymentMethod.Ideal?u.push("idealBankId","idealBankName"):e.paymentMethod.formattedValue===n.PaymentMethod.ApplePay&&u.push("applePayToken"),u}var g;function _(e,t,a){return r.__awaiter(this,void 0,void 0,(function(){var n,i,s,l,c,d,p,m,y;return r.__generator(this,(function(r){return n=a.pageState,i=n.existingAccountShowing,s=n.requestId,l=n.submitSeq,c=e&&e.getScheduleId()===o.ScheduleId.MONTHLY?"monthly":"yearly",t.account_info_type=i?"existing":"new",t.billing_schedule=c,t.currency=e&&e.getCurrency(),t.expected_price=e&&e.getExpectedPriceToken(),t.plan_id=e&&e.transition.state.plan.id,t.tos_version="3",t.packrat=e&&e.hasPackrat(),t.request_id=s,t.submit_seq=l,a.navState?(d=a.navState,p=d.showTrialVersion,m=d.productPlanType,y=f.getCheckoutPageProductPlan(m),t.expected_price_amount=e&&e.getTotalPrice().amount,t.product=v(y),t.signup_type=p?"trial":"purchase",t.signup_tag=P(y,p),[2,u.setWebRegisterLoggingData(t)]):[2,u.setWebRegisterLoggingData(t)]}))}))}function v(e){switch(e){case y.CheckoutPageProductPlan.PROFESSIONAL:return"pro";default:return e}}function P(e,t){switch(e){case y.CheckoutPageProductPlan.PLUS:return t?g.PLUS_TRY:g.PLUS_BUY;case y.CheckoutPageProductPlan.PROFESSIONAL:return t?g.PRO_TRY:g.PRO_BUY;default:return}}function b(e){return function(t){t(d.updateCountryCode(e)),t(s.updatePrice())}}function S(e){return function(t){t(d.updateZipCode(e)),t(s.updatePrice())}}function C(e){return function(t){t(d.updateVat(e)),t(s.updatePrice())}}function E(e){return function(t){t((function(e){return{type:p.FormActionEnum.UpdateSchedule,value:e}})(e)),t(s.updateCurrentTransitionPrices())}}function T(e){return function(t){t(d.updateIdealBank(e))}}function k(e){return{type:p.FormActionEnum.UpdateProductPlanType,value:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.actionCreators=t.updateProductPlanType=t.updateIdealBank=t.updateSchedule=t.updateVat=t.updateZipCode=t.updateCountryCode=t.getAdditionalDataSignupTagField=t.getAdditionalDataProductTagField=t.fillAdditionalData=t.SignupTags=t.submitProBuyFormToServer=t.getFieldNamesToValidate=void 0,i=r.__importStar(i),s=r.__importStar(s),d=r.__importStar(d),t.getFieldNamesToValidate=h,t.submitProBuyFormToServer=function(e){var t=e.additionalData,r=void 0===t?{}:t,n=e.allowSubmitWithoutTOS,o=e.captchaComponentRef,s=e.handle3DsMessage,u=e.enableBinRouting,d=e.prepareForSubmission,p=e.trigger,f=e.url,y=e.paymentPayPalV2Flow,g=void 0===y?"OFF":y;return function(e,t){var y,v=t(),P=v.formData,b=v.pageState.paymentFormSpec,S=v.pageState.existingAccountShowing,C=v.pageState.showMarketingOptInIfNewAccount,E=v.pricingState.subChangePlans;if(E){var T=P.scheduleId.formattedValue,k=P.evh.rawValue,N=E.filter((function(e){return!!e.finalSubState.plan&&(e.finalSubState.plan.billingSchedule.id===T&&!!e.finalSubState.addons.skus.length===k)})).pop();if(N){if(N.finalSubState.planSku.productType!==P.productPlanType.rawValue)return l.Notify.error(c.PricingDataException.notifyErrorMessagePersonal,20),void i.reportException({err:new Error("Intended product type to purchase does not match subscription change plan"),severity:i.SEVERITY.CRITICAL});y=N.tvm,r.sub_change_plan=JSON.stringify(N)}}var w=h(P,b,S,C,n,u,g);_(y,r,v).then((function(t){e(m.submitForm(f,w,d,t,o,s,p)),""!==v.formData.vat.formattedValue&&a.ProEventsLogger.log("vat_provided_on_initial_purchase",{})}))}},(function(e){e.PRO_BUY="pro_buy_register",e.PRO_TRY="pro_try_register",e.PLUS_BUY="plus_buy_register",e.PLUS_TRY="plus_try_register"})(g=t.SignupTags||(t.SignupTags={})),t.fillAdditionalData=_,t.getAdditionalDataProductTagField=v,t.getAdditionalDataSignupTagField=P,t.updateCountryCode=b,t.updateZipCode=S,t.updateVat=C,t.updateSchedule=E,t.updateIdealBank=T,t.updateProductPlanType=k,t.actionCreators={updateCountryCode:b,updateZipCode:S,updateVat:C,updateSchedule:E,updateIdealBank:T,updateProductPlanType:k}})),define("modules/clean/react/payments/buy/actions/page_actions",["require","exports","tslib","modules/clean/react/payments/buy/actions/pricing_actions","modules/clean/react/payments/buy/actions/buy_form_actions","modules/clean/react/payments/buy/actions/page_action_types"],(function(e,t,r,a,n,o){"use strict";function i(e,t){return{type:o.PageActionEnum.UpdateCurrentPage,productPlanType:e,showTrialVersion:Boolean(t)}}function s(e,t){return{type:o.PageActionEnum.UpdateTrialEndDate,trialDuration:e,locale:t}}function l(e){return function(t){t({type:o.PageActionEnum.LoadSubChangePlans,baseSubChangePlans:e}),t(a.updatePrice())}}Object.defineProperty(t,"__esModule",{value:!0}),t.loadSubChangePlans=t.updateSelectedPlan=t.updateHistory=t.updateTrialEndDate=t.updateCurrentPage=t.LoadExtraCheckoutFormAction=t.LoadSubChangePlansAction=t.PaymentBannerErrorAction=t.UpdateTrialEndDate=t.UpdateCurrentPageAction=t.ToggleSignInModalAction=t.Action=t.PageActionType=t.GetStateFunction=t.PageActionEnum=void 0,a=r.__importStar(a),Object.defineProperty(t,"PageActionEnum",{enumerable:!0,get:function(){return o.PageActionEnum}}),Object.defineProperty(t,"PageActionType",{enumerable:!0,get:function(){return o.PageActionType}}),Object.defineProperty(t,"Action",{enumerable:!0,get:function(){return o.Action}}),Object.defineProperty(t,"ToggleSignInModalAction",{enumerable:!0,get:function(){return o.ToggleSignInModalAction}}),Object.defineProperty(t,"UpdateCurrentPageAction",{enumerable:!0,get:function(){return o.UpdateCurrentPageAction}}),Object.defineProperty(t,"UpdateTrialEndDate",{enumerable:!0,get:function(){return o.UpdateTrialEndDate}}),Object.defineProperty(t,"PaymentBannerErrorAction",{enumerable:!0,get:function(){return o.PaymentBannerErrorAction}}),Object.defineProperty(t,"LoadSubChangePlansAction",{enumerable:!0,get:function(){return o.LoadSubChangePlansAction}}),Object.defineProperty(t,"LoadExtraCheckoutFormAction",{enumerable:!0,get:function(){return o.LoadExtraCheckoutFormAction}}),Object.defineProperty(t,"GetStateFunction",{enumerable:!0,get:function(){return o.GetStateFunction}}),t.updateCurrentPage=i,t.updateTrialEndDate=s,t.updateHistory=function(){return{type:o.PageActionEnum.UpdateHistory}},t.updateSelectedPlan=function(e,t,r,a){return function(o,u){o(i(e,a)),o(n.updateProductPlanType(e)),o(s(t,r));var c=u().pricingState;c.baseSubChangePlans&&o(l(c.baseSubChangePlans))}},t.loadSubChangePlans=l})),define("modules/clean/react/payments/buy/actions/page_actions_with_dbmodal",["require","exports","tslib","modules/clean/dbmodal","modules/clean/react/payments/buy/actions/page_action_types"],(function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toggleSignInModal=void 0,a=r.__importStar(a),t.toggleSignInModal=function(e){return function(t,r){r().pageState.userInfo.existingAccount?t({type:n.PageActionEnum.ToggleSignInModal,show:e}):new a.DBModal({element_id:"sign-in-modal",focus:"input[name='login_email']"}).show()}}})),define("modules/clean/react/payments/buy/actions/page_action_types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PageActionEnum=void 0,(function(e){e.LoadSubChangePlans="LoadSubChangePlans",e.ToggleSignInModal="ToggleSignInModal",e.UpdateCurrentPage="UpdateCurrentPage",e.LoadCheckoutFormProps="LoadCheckoutFormProps",e.UpdateHistory="UpdateHistory",e.PaymentBannerError="PaymentBannerError",e.UpdateTrialEndDate="UpdateTrialEndDate"})(t.PageActionEnum||(t.PageActionEnum={}))})),define("modules/clean/react/payments/buy/actions/pricing_actions",["require","exports","modules/clean/payments/skus/subscription_diff","modules/clean/payments/skus/subscription_service","modules/clean/react/payments/buy/types/types"],(function(e,t,r,a,n){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0}),t.actionCreators=t.updateCurrentTransitionPrices=t.updateDisplayPrices=t.updateTransitionsError=t.updateTransitionsSuccess=t.updateTransitionsStart=t.updatePrice=t.PricingActionEnum=void 0,(function(e){e.UpdateCurrentTransitionPrices="UpdateCurrentTransitionPrices",e.UpdateDisplayPrices="UpdateDisplayPrices",e.UpdateTransitionsStart="UpdateTransitionsStart",e.UpdateTransitionsSuccess="UpdateTransitionsSuccess",e.UpdateTransitionsError="UpdateTransitionsError"})(o=t.PricingActionEnum||(t.PricingActionEnum={}));var i=new a.SubscriptionService;function s(){return function(e,t){var a=t(),o=a.formData,s=a.pricingState,m=a.pageState,f={countryCode:o.countryCode.formattedValue,zipCode:o.zipCode.formattedValue,vat:o.vat.errorState?"":o.vat.formattedValue};if(e(l()),s.subChangePlans){var y=s.subChangePlans.map((function(e){return r.SubscriptionDiff.fromSubscriptionStatus(e)})),h=m.promoSpec&&m.promoSpec.cashCode&&m.promoSpec.id!==n.PromoSpecType.TRIAL?{cashCode:m.promoSpec.cashCode}:void 0;i.priceSet(y,f,h,!0).then((function(t){e(u(t)),e(d(t)),e(p(t))})).catch((function(t){e(c(t))}))}}}function l(){return{type:o.UpdateTransitionsStart}}function u(e){return{type:o.UpdateTransitionsSuccess,subChangePlans:e}}function c(e){return{type:o.UpdateTransitionsError,error:e}}function d(e){return{type:o.UpdateDisplayPrices,subChangePlans:e}}function p(e){return{type:o.UpdateCurrentTransitionPrices,subChangePlans:e}}t.updatePrice=s,t.updateTransitionsStart=l,t.updateTransitionsSuccess=u,t.updateTransitionsError=c,t.updateDisplayPrices=d,t.updateCurrentTransitionPrices=p,t.actionCreators={updatePrice:s,updateTransitionsStart:l,updateTransitionsSuccess:u,updateTransitionsError:c,updateDisplayPrices:d,updateCurrentTransitionPrices:p}})),define("modules/clean/react/payments/buy/state/checkout_store_creator",["require","exports","tslib","redux","redux-thunk","modules/clean/payments/payment_form/payment_form_spec","modules/clean/redux/unsupported","modules/clean/redux/devtools","modules/clean/react/payments/buy/actions/pricing_actions","modules/clean/react/payments/buy/actions/buy_form_actions","modules/clean/react/payments/buy/helpers/pricing_value_helper","modules/clean/payments/skus/subscription_change_plan","modules/clean/payments/skus/constants","modules/clean/react/payments/common/middleware/pro_buy_logger","modules/clean/react/payments/common/form_value_factory","modules/core/browser","modules/core/notify","modules/clean/react/payments/common/middleware/payments_ux_logger","modules/clean/react/payments/common/form/middleware/middleware","modules/clean/logging/hive/schemas/web-payments_ux_analytics"],(function(e,t,r,a,n,o,i,s,l,u,c,d,p,m,f,y,h,g,_,v){"use strict";function P(e){return function(e){return function(t){if("SubmitFormError"!==t.type)return e(t);var r=e(t);return t.data&&t.data.error_message&&h.Notify.error(t.data.error_message),t.data.redirect&&y.redirect(t.data.redirect),r}}}function b(e){var t=S(e),r=C(e,t);return{pageState:t,pricingState:E(e,r),formData:r,navState:(function(e){var t=e.navState;return t||{productPlanType:0,showTrialVersion:!1}})(e)}}function S(e){var t=e.locale,r=e.userInfo,a=e.serializedPaymentFormSpec,n=e.showMarketingOptInIfNewAccount,i=e.requestId,s=e.promoSpec,l=e.marketingTracker;return{locale:t,userInfo:r,existingAccountShowing:r.existingAccount,paymentFormSpec:new o.PaymentFormSpec(a),submitFormSuccess:!1,showMarketingOptInIfNewAccount:n,requestId:i,submitSeq:0,submitting:!1,promoSpec:s,showBuyClickError:!1,marketingTracker:l,paypalEmail:""}}function C(e,t){var a=e.countryCode,n=e.userInfo,o=e.vat,i=e.trialLength,s=e.showTrialVersion,l=e.locale,u=e.multiLicensePlanInfo,c=n.fname||"",d=n.lname||"",m="";n.existingAccount||(m=n.email||"");var y,h=n.password||"",g=p.ScheduleId.YEARLY,_=e.productPlanType||p.ProductPlanType.STANDARD;y=s?t.paymentFormSpec.default_payment_method():t.paymentFormSpec.default_payment_method_for_country(a);var v=o||"",P={};if(u){var b=u.teamInfo,S=u.minLicenseCount,C=u.maxLicenseCount,E=b.teamNumUsers.toString(),T={minNumUsers:Math.max(S,b.teamNumUsers),maxNumUsers:C};P={numberOfUsers:f.FormValueFactory.createNumberOfUsers(E,T,void 0,S,0),teamPhone:f.FormValueFactory.createTeamPhone(b.phone),teamName:f.FormValueFactory.createInput(b.teamName),companySize:f.FormValueFactory.createInput(b.companySize)}}return r.__assign(r.__assign({},P),{city:f.FormValueFactory.createCity(""),phone:f.FormValueFactory.createPhone(""),name:f.FormValueFactory.createName(""),address:f.FormValueFactory.createAddress(""),nonce:f.FormValueFactory.createNonce(""),payPalNonce:f.FormValueFactory.createPayPalNonce("",""),adyenEncryptedCard:f.FormValueFactory.createAdyenEncryptedCard(""),encryptedCardForNetworkToken:f.FormValueFactory.createEncryptedCardForNetworkToken("",""),applePayToken:f.FormValueFactory.createApplePayToken(""),bin:f.FormValueFactory.createBIN(""),browserInfo:f.FormValueFactory.createBrowserInfo(""),threeDsData:f.FormValueFactory.createThreeDsData(""),firstName:f.FormValueFactory.createInput(c),lastName:f.FormValueFactory.createInput(d),email:f.FormValueFactory.createEmail(m),password:f.FormValueFactory.createPassword(h),productPlanType:f.FormValueFactory.createProductPlanType(_),scheduleId:f.FormValueFactory.createSchedule(g),paymentMethod:f.FormValueFactory.createPaymentMethod(y,a,t.paymentFormSpec),countryCode:f.FormValueFactory.createCountryCode(a),zipCode:f.FormValueFactory.createZipCode("",a,t.paymentFormSpec),vat:f.FormValueFactory.createVat(v,a),cpf:f.FormValueFactory.createCpf("",void 0,!0),cpfName:f.FormValueFactory.createCpfNamePrefill("","",n.displayName,void 0,!0),accountHolderName:f.FormValueFactory.createInput(""),iban:f.FormValueFactory.createIBAN(""),mandateSigned:f.FormValueFactory.createCheckbox(!1),idealBankId:f.FormValueFactory.createIdealBankId(""),idealBankName:f.FormValueFactory.createIdealBankName(""),marketingOptIn:f.FormValueFactory.createCheckbox(!1,null,!0),termsAndService:f.FormValueFactory.createCheckbox(!1),evh:f.FormValueFactory.createCheckbox(!1),trialEndDate:f.FormValueFactory.createTrialEndDate(i,l)})}function E(e,t){var r,a=e.baseSubChangePlans,n=e.serializedSubChangePlans;return a?r=a.filter((function(t){return t.subState.planSku&&e.navState&&t.subState.planSku.productType===e.navState.productPlanType})):n&&(r=n.map((function(e){return d.SubscriptionChangePlan.deserialize(e)}))),{loadingPrices:void 0===r,requestToken:-1,subChangePlans:r,baseSubChangePlans:a,displayPrices:c.getDisplayPrices(r,t,e.promoSpec),currentTransitionPrices:c.getCurrentTransitionPrices(r,t)}}Object.defineProperty(t,"__esModule",{value:!0}),t.createPricingState=t.createFormState=t.createPageState=t.createState=t.configureStore=t.submitFormErrorMiddleware=void 0,n=r.__importDefault(n),o=r.__importStar(o),t.submitFormErrorMiddleware=P,t.configureStore=function(e,t){var r=b(e),o=a.applyMiddleware(n.default,m.proBuyLogger,new g.PaymentsUXLogger(e.requestId,v.PaymentsUxPlatform.Legacy).reduxMiddleware,_.marketingEventMiddleware,P);return i.createStore(t,r,a.compose(o))},t.createState=b,t.createPageState=S,t.createFormState=C,t.createPricingState=E})),define("modules/clean/react/payments/buy/reducers/form_value_reducers",["require","exports","tslib","lodash","modules/clean/react/payments/common/form_values","modules/clean/react/payments/common/form_value_helpers","modules/clean/react/payments/common/form_value_factory","modules/clean/react/payments/common/payments/reducers/reducers","modules/clean/react/payments/buy/actions/page_actions","modules/clean/react/payments/common/form/actions/actions","modules/clean/react/payments/buy/actions/buy_form_actions"],(function(e,t,r,a,n,o,i,s,l,u,c){"use strict";function d(e,t){var r=a.assignIn({},e.formData,t),n=c.getFieldNamesToValidate(r,e.pageState.paymentFormSpec,e.pageState.existingAccountShowing,e.pageState.showMarketingOptInIfNewAccount),o=e.pageState.showBuyClickError&&!u.isValidSubmitState(r,n),i=a.assignIn({},e.pageState,{showBuyClickError:o});return a.assignIn({},e,{formData:r,pageState:i})}function p(e,t){return"UpdateFirstName"!==t.type?e:d(e,{firstName:i.FormValueFactory.createInput(t.value,e.formData.firstName)})}function m(e,t){return"UpdateLastName"!==t.type?e:d(e,{lastName:i.FormValueFactory.createInput(t.value,e.formData.lastName)})}function f(e,t){if("EmailTakenError"!==t.type)return e;var r=e.formData.email;return r.errorState=n.EmailErrorState.TakenError,r.showError=!0,d(e,{email:r})}function y(e,t){return"UpdateEmail"!==t.type?e:d(e,{email:i.FormValueFactory.createEmail(t.value,e.formData.email)})}function h(e,t){return"UpdatePassword"!==t.type?e:d(e,{password:i.FormValueFactory.createPassword(t.value,e.formData.password)})}function g(e,t){var r=e.formData.firstName.rawValue,a=e.formData.lastName.rawValue,n=e.pageState.userInfo.displayName;switch(t.type){case"UpdateCpfName":return d(e,{cpfName:i.FormValueFactory.createCpfName(t.value,e.formData.cpfName,!0)});case"UpdateFirstName":return e.formData.cpfName.manuallyEdited?e:d(e,{cpfName:i.FormValueFactory.createCpfNamePrefill(t.value,a,n,void 0,!0)});case"UpdateLastName":return e.formData.cpfName.manuallyEdited?e:d(e,{cpfName:i.FormValueFactory.createCpfNamePrefill(r,t.value,n,void 0,!0)});default:return e}}function _(e,t){if(t.type!==l.PageActionEnum.PaymentBannerError)return e;var r,n=a.assignIn({},e.pageState,{paymentBannerError:t.msg});e=a.assignIn({},e,{pageState:n});var o=document.getElementById("payment-info");if(!o)return e;var i=o.getBoundingClientRect().top;return void 0===r?r=i:i<r&&(r=i),void 0!==r&&scrollBy({top:r-150,behavior:"smooth"}),e}function v(e,t){return"UpdateProductPlanType"!==t.type?e:d(e,{productPlanType:i.FormValueFactory.createProductPlanType(t.value)})}function P(e,t){return"UpdateSchedule"!==t.type?e:d(e,{scheduleId:i.FormValueFactory.createSchedule(t.value)})}function b(e,t){if(t.type!==u.FormActionEnum.UpdatePaymentMethod&&t.type!==u.FormActionEnum.UpdateCountryCode)return e;var r=e.formData,a=e.pageState,n=t.type===u.FormActionEnum.UpdatePaymentMethod?t.value:r.paymentMethod.rawValue,o=r.countryCode.formattedValue;return d(e,{paymentMethod:i.FormValueFactory.createPaymentMethod(n,o,a.paymentFormSpec,r.paymentMethod)})}function S(e,t){return t.type!==u.FormActionEnum.UpdateCountryCode?e:d(e,{countryCode:i.FormValueFactory.createCountryCode(t.value,e.formData.countryCode)})}function C(e,t){if(t.type!==u.FormActionEnum.UpdateZipCode&&t.type!==u.FormActionEnum.UpdateCountryCode)return e;var r=t.type===u.FormActionEnum.UpdateZipCode?t.value:e.formData.zipCode.rawValue,a=e.formData.countryCode.formattedValue;return d(e,{zipCode:i.FormValueFactory.createZipCode(r,a,e.pageState.paymentFormSpec,e.formData.zipCode)})}function E(e,t){if(t.type!==u.FormActionEnum.UpdateVat&&t.type!==u.FormActionEnum.UpdateCountryCode)return e;var r=t.type===u.FormActionEnum.UpdateVat?t.value.toUpperCase():e.formData.vat.rawValue,a=e.formData.countryCode.formattedValue;return d(e,{vat:i.FormValueFactory.createVat(r,a,e.formData.vat)})}function T(e,t){if(t.type!==u.FormActionEnum.UpdateCpf)return e;return d(e,{cpf:i.FormValueFactory.createCpf(t.value,e.formData.cpf,!0)})}function k(e,t){if(t.type!==u.FormActionEnum.UpdateNonce)return e;return d(e,{nonce:i.FormValueFactory.createNonce(t.value,t.creditCardIframeFields,e.formData.nonce,!0)})}function N(e,t){return t.type!==u.FormActionEnum.UpdateBIN?e:d(e,{bin:i.FormValueFactory.createBIN(t.value,e.formData.bin)})}function w(e,t){return t.type!==u.FormActionEnum.UpdateAccountHolderName?e:d(e,{accountHolderName:i.FormValueFactory.createInput(t.value,e.formData.accountHolderName)})}function F(e,t){return t.type!==u.FormActionEnum.UpdateIBAN?e:d(e,{iban:i.FormValueFactory.createIBAN(t.value,e.formData.iban)})}function I(e,t){return t.type!==u.FormActionEnum.UpdateMandateSigned?e:d(e,{mandateSigned:i.FormValueFactory.createCheckbox(t.value,e.formData.mandateSigned)})}function M(e,t){return t.type!==u.FormActionEnum.UpdateMarketingOptIn?e:d(e,{marketingOptIn:i.FormValueFactory.createCheckbox(t.value,e.formData.marketingOptIn,!0)})}function x(e,t){return t.type!==u.FormActionEnum.UpdateTermsAndService?e:d(e,{termsAndService:i.FormValueFactory.createCheckbox(t.value,e.formData.termsAndService)})}function D(e,t){return t.type!==l.PageActionEnum.UpdateTrialEndDate?e:d(e,{trialEndDate:i.FormValueFactory.createTrialEndDate(t.trialDuration,t.locale)})}function A(e,t){if(t.type!==u.FormActionEnum.UpdateIdealBank)return e;var r=t.value,a=r.bankId,n=r.bankName;return d(e,{idealBankId:i.FormValueFactory.createIdealBankId(a,e.formData.idealBankId),idealBankName:i.FormValueFactory.createIdealBankName(n,e.formData.idealBankName)})}Object.defineProperty(t,"__esModule",{value:!0}),t.submitFormError=t.submitFormSuccess=t.applePayClosedByFailure=t.submitFormStart=t.showFormFieldErrors=t.updateIdealBank=t.updateTrialEndDate=t.updateTOS=t.updateMarketingOptIn=t.updateMandateSigned=t.updateIBAN=t.updateAccountHolderName=t.updateBIN=t.updateNonce=t.updateCpf=t.updateVat=t.updateZipCode=t.updateCountryCode=t.updatePaymentMethod=t.updateSchedule=t.updateProductPlanType=t.paymentBannerError=t.updateCpfName=t.updatePassword=t.updateEmail=t.emailAlreadyTakenError=t.updateLastName=t.updateFirstName=t.FormInputReducers=t.OrderSummaryReducers=t.PaymentReducers=t.PlanReducers=t.AccountReducers=void 0,a=r.__importStar(a),n=r.__importStar(n),t.AccountReducers=[p,m,y,h,g,f],t.PlanReducers=[v,P],t.PaymentReducers=[S,b,C,E,T,g,k,s.updatePayPalNonce,s.updateAdyenEncryptedCard,s.updateEncryptedCardForNetworkToken,s.updateApplePayToken,N,s.updateBrowserInfo,s.updateThreeDsData,w,F,I,A,_],t.OrderSummaryReducers=[x,M,D],t.FormInputReducers=[V,B,U,R,L],t.updateFirstName=p,t.updateLastName=m,t.emailAlreadyTakenError=f,t.updateEmail=y,t.updatePassword=h,t.updateCpfName=g,t.paymentBannerError=_,t.updateProductPlanType=v,t.updateSchedule=P,t.updatePaymentMethod=b,t.updateCountryCode=S,t.updateZipCode=C,t.updateVat=E,t.updateCpf=T,t.updateNonce=k,t.updateBIN=N,t.updateAccountHolderName=w,t.updateIBAN=F,t.updateMandateSigned=I,t.updateMarketingOptIn=M,t.updateTOS=x,t.updateTrialEndDate=D,t.updateIdealBank=A;var O={firstName:"fname",lastName:"lname",email:"account-email",password:"password",name:"name",nonce:"iframe-holder",countryCode:"country_code",address:"address",zipCode:"zip",city:"city",accountHolderName:"owner_name",iban:"iban",mandateSigned:"mandate_signed",idealBankId:"ideal_bank",vat:"vat",cpf:"cpf"};function V(e,t){if(t.type!==u.FormActionEnum.ShowFormFieldErrors)return e;var n=r.__assign({},e.formData);e=a.assignIn({},e,{formData:n});for(var i,s=[],l=0,c=t.fieldNames;l<c.length;l++){var d=c[l],p=n[d];p&&!o.FormValueHelper.isValid(p)&&(n[d]=a.assignIn({},n[d],{showError:!0}),s.push(d))}var m=e.pageState.showBuyClickError;if("SubmitForm"===t.origin){m=!0;for(var f=0,y=s;f<y.length;f++){var h=y[f];if(O[h]){var g=document.getElementById(O[h]);if(g){var _=g.getBoundingClientRect().top;void 0===i?i=_:_<i&&(i=_)}}}void 0!==i&&scrollBy({top:i-150,behavior:"smooth"})}var v=a.assignIn({},e.pageState,{showBuyClickError:m});return e=a.assignIn({},e,{pageState:v})}function B(e,t){if(t.type!==u.FormActionEnum.SubmitFormStart)return e;var r=a.assignIn({},e.pageState,{submitting:!0,submitSeq:e.pageState.submitSeq+1});return a.assignIn({},e,{pageState:r})}function L(e,t){if(t.type!==u.FormActionEnum.ApplePayClosedByFailure)return e;var r=a.assignIn({},e.pageState,{submitSeq:e.pageState.submitSeq+1});return a.assignIn({},e,{pageState:r})}function U(e,t){return t.type!==u.FormActionEnum.SubmitFormSuccess?e:r.__assign(r.__assign({},e),{pageState:r.__assign(r.__assign({},e.pageState),{submitFormSuccess:!0,submitting:!1})})}function R(e,t){if(t.type!==u.FormActionEnum.SubmitFormError)return e;var r=a.assignIn({},e.pageState,{submitting:!1});return a.assignIn({},e,{pageState:r})}t.showFormFieldErrors=V,t.submitFormStart=B,t.applePayClosedByFailure=L,t.submitFormSuccess=U,t.submitFormError=R})),define("modules/clean/react/payments/buy/reducers/page_reducers",["require","exports","modules/clean/react/payments/buy/actions/page_actions"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.existingAccountShowing=void 0;t.existingAccountShowing=function(e,t){switch(void 0===e&&(e=!1),t.type){case r.PageActionEnum.ToggleSignInModal:return(function(e,t){return void 0!==t.show?t.show:!e})(e,t);default:return e}}})),define("modules/clean/react/payments/buy/reducers/pricing_reducers",["require","exports","tslib","lodash","modules/clean/react/payments/buy/helpers/pricing_value_helper","modules/clean/react/payments/buy/actions/pricing_actions"],(function(e,t,r,a,n,o){"use strict";function i(e,t){if(t.type!==o.PricingActionEnum.UpdateTransitionsStart)return e;var r=a.assignIn({},e.pricingState,{loadingPrices:!0});return a.assignIn({},e,{pricingState:r})}function s(e,t){if(t.type!==o.PricingActionEnum.UpdateTransitionsSuccess)return e;var r=a.assignIn({},e.pricingState,{loadingPrices:!1,subChangePlans:t.subChangePlans});return a.assignIn({},e,{pricingState:r})}function l(e,t){if(t.type!==o.PricingActionEnum.UpdateDisplayPrices)return e;var r=e.pageState.promoSpec,i=t.subChangePlans,s=n.getDisplayPrices(i,e.formData,r),l=a.assignIn({},e.pricingState,{displayPrices:s});return a.assignIn({},e,{pricingState:l})}function u(e,t){if(t.type!==o.PricingActionEnum.UpdateCurrentTransitionPrices)return e;var r=t.subChangePlans||e.pricingState.subChangePlans,i=n.getCurrentTransitionPrices(r,e.formData),s=a.assignIn({},e.pricingState,{currentTransitionPrices:i});return a.assignIn({},e,{pricingState:s})}Object.defineProperty(t,"__esModule",{value:!0}),t.updateCurrentTransitionPrices=t.updateDisplayPrices=t.updateTransitionsSuccess=t.updateTransitionsStart=t.PricingManagementReducers=t.TransitionManagementReducers=void 0,a=r.__importStar(a),t.TransitionManagementReducers=[i,s],t.PricingManagementReducers=[l,u],t.updateTransitionsStart=i,t.updateTransitionsSuccess=s,t.updateDisplayPrices=l,t.updateCurrentTransitionPrices=u})),define("modules/clean/react/payments/buy/reducers/nav_reducer",["require","exports","modules/clean/react/payments/buy/actions/page_actions"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.navReducer=void 0,t.navReducer=function(e,t){return t.type!==r.PageActionEnum.UpdateCurrentPage?e:{productPlanType:t.productPlanType,showTrialVersion:t.showTrialVersion}}})),define("modules/clean/react/payments/buy/reducers/reducers",["require","exports","tslib","redux","modules/clean/react/payments/buy/reducers/form_value_reducers","modules/clean/react/payments/buy/reducers/pricing_reducers","modules/clean/react/payments/buy/reducers/page_reducers","modules/clean/react/payments/buy/reducers/nav_reducer","modules/clean/react/payments/buy/actions/page_actions"],(function(e,t,r,a,n,o,i,s,l){"use strict";function u(e){return function(t,r){return Object.assign({},t,e(t,r))}}function c(e,t){if(t.type!==l.PageActionEnum.LoadSubChangePlans)return e;var a=r.__assign({},e.pricingState);return a.baseSubChangePlans=t.baseSubChangePlans,a.subChangePlans=t.baseSubChangePlans.filter((function(t){var r;return(null===(r=t.subState.planSku)||void 0===r?void 0:r.productType)===e.navState.productPlanType})),r.__assign(r.__assign({},e),{pricingState:r.__assign({},a)})}Object.defineProperty(t,"__esModule",{value:!0}),t.proBuyReducer=t.loadSubChangePlans=void 0,n=r.__importStar(n),o=r.__importStar(o),t.loadSubChangePlans=c,t.proBuyReducer=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce((function(e,t){return function(r,a){return t(e(r,a),a)}}))}.apply(void 0,r.__spreadArrays([a.combineReducers({formData:function(e,t){return void 0===e&&(e={}),e},pageState:u(a.combineReducers({existingAccountShowing:i.existingAccountShowing})),pricingState:function(e,t){return void 0===e&&(e={}),e},navState:u(s.navReducer)}),c],n.AccountReducers,n.PlanReducers,n.PaymentReducers,n.OrderSummaryReducers,n.FormInputReducers,o.TransitionManagementReducers,o.PricingManagementReducers))})),define("modules/clean/react/payments/buy/types/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromoSpecType=t.CheckoutPageProductPlan=void 0,(function(e){e.PLUS="plus",e.PROFESSIONAL="professional",e.FAMILY="family",e.TRANSFER="transfer",e.BACKUP="backup",e.HELLOSIGN_DBX_PRO="hellosign_dbx_pro",e.PASSWORDS="passwords",e.STANDARD="standard",e.ADVANCED="advanced"})(t.CheckoutPageProductPlan||(t.CheckoutPageProductPlan={})),(function(e){e[e.NOT_APPLICABLE=0]="NOT_APPLICABLE",e[e.EXTRA_TIME_MONTHS=1]="EXTRA_TIME_MONTHS",e[e.EXPERIMENTAL_PLAN=2]="EXPERIMENTAL_PLAN",e[e.PERCENT_DISCOUNT_PRETAX=3]="PERCENT_DISCOUNT_PRETAX",e[e.TRIAL=4]="TRIAL"})(t.PromoSpecType||(t.PromoSpecType={}))})),define("modules/clean/react/payments/buy/components/buy_purchase_form",["require","exports","tslib","react","react-intl","classnames","ts-key-enum","modules/core/i18n","modules/clean/raf_throttle","modules/clean/auth/common/captcha","modules/clean/web_timing_logger","modules/clean/analytics","modules/clean/react/payments/buy/components/account/new_account_input","modules/clean/react/payments/buy/components/plan/schedule_selection","modules/clean/react/payments/buy/components/payments/buy_payment_info_section","modules/clean/react/payments/buy/components/payments/order_summary/order_summary","modules/clean/react/payments/buy/components/payments/worldpay_entity_info","modules/clean/react/payments/buy/components/plan/plan_selection","modules/clean/react/payments/buy/components/payments/submit_payment_form_section","modules/clean/react/rebrand/elements/rebrand_arbor_footer_components_lazy","modules/clean/react/payments/buy/types/types","modules/clean/payments/payment_form/payment_form_spec","modules/clean/react/payments/common/form/actions/actions","modules/core/exception","modules/clean/react/payments/buy/components/included_features","modules/clean/react/payments/buy/helpers/product_plan_helpers","modules/clean/react/payments/buy/components/account/new_account_input_utils","modules/clean/react/payments/buy/components/payment_form_utils","modules/clean/payments/skus/constants","modules/clean/react/payments/buy/components/addons/addon_selector"],(function(e,t,r,a,n,o,i,s,l,u,c,d,p,m,f,y,h,g,_,v,P,b,S,C,E,T,k,N,w,F){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BuyPurchaseForm=void 0,a=r.__importDefault(a),o=r.__importDefault(o),c=r.__importStar(c),C=r.__importStar(C);var I=(function(e){function t(t){var r=e.call(this,t)||this;r.paymentSectionRef=a.default.createRef(),r.orderSummaryRef=a.default.createRef(),r.paymentFormRef=a.default.createRef(),r.submitSectionAndFooterRef=a.default.createRef(),r.setCaptchaComponent=function(e){r.captchaComponent=e},r.submitForm=function(e){var t,a=((t={})[b.PaymentMethod.CreditCard]="/pro/ajax_buy",t[b.PaymentMethod.PayPal]="/pro/ajax_paypal_buy",t[b.PaymentMethod.DirectDeposit]="/payments/ajax_sepa_buy",t[b.PaymentMethod.Ideal]="/payments/ajax_ideal_buy",t[b.PaymentMethod.ApplePay]="/pro/ajax_buy",t);r.onSubmitProBuyForm({trigger:e,url:a[r.props.formData.paymentMethod.formattedValue]})},r.handleSubmitTryForm=function(e){e.preventDefault(),r.onSubmitFormWithCaptchaScore()},r.submitTryForm=function(e){var t,a=r.state.selectedProduct;d.ProEventsLogger.log("clicked_start_free_trial_cta_"+a.name.toLowerCase());var n=((t={})[b.PaymentMethod.CreditCard]="/pro/ajax_try",t[b.PaymentMethod.PayPal]="/pro/ajax_paypal_try",t[b.PaymentMethod.TokenConnect]="/pro/ajax_try",t);r.onSubmitProBuyForm({trigger:e,url:n[r.props.formData.paymentMethod.formattedValue]})},r.onSubmitProBuyForm=function(e){var t,a=e.trigger,n=e.url,o=r.props,i=o.actions,s=o.continueURI,l=o.experiments,u=o.pageState.promoSpec,c=r.state.selectedProduct,d={cont:s,is_pro_buy_form:!0,send_conversion_data:!0};r.saveState(),u&&(d.is_pro_buy_form=!1,d.promo_ids=u.id,u.cashCode&&(d.code=u.cashCode)),"professional"===c.productPlan&&void 0!==(null===(t=c.trialInfo)||void 0===t?void 0:t.trialDuration)&&(d.offered_trial_duration=c.trialInfo.trialDuration),i.submitProBuyForm({additionalData:d,allowSubmitWithoutTOS:!1,captchaComponentRef:r.captchaComponent,handle3DsMessage:r.paymentInfoSection.getCreditCardFrame().handle3DsMessage,enableBinRouting:!0,prepareForSubmission:r.prepareForSubmission.bind(r),trigger:a,url:n,paymentPayPalV2Flow:l.paymentPayPalV2Flow})},r.onSubmitFormWithCaptchaScore=function(){r.captchaComponent&&r.captchaComponent.getWrappedComponent().submit()},r.resubmitForm=function(e){void 0===e&&(e=S.SubmitFormTriggerType.ButtonClick),r.props.showTrialVersion?r.submitTryForm(e):r.submitForm(e)},r.handleResize=function(){var e,t,a,n,o,i=null===(e=r.orderSummaryRef)||void 0===e?void 0:e.current,s=null===(t=r.paymentFormRef)||void 0===t?void 0:t.current,l=null===(a=r.paymentSectionRef)||void 0===a?void 0:a.current,u=null===(n=r.submitSectionAndFooterRef)||void 0===n?void 0:n.current,c=null===(o=r.props.orderSummaryRedesignRef)||void 0===o?void 0:o.current;if(u&&c&&u.style.setProperty("--order-summary-height",Math.round(c.getBoundingClientRect().height)+"px"),i&&s&&l){var d=i.getBoundingClientRect().height,p=s.getBoundingClientRect().top,m=d+(l.getBoundingClientRect().top+window.pageYOffset)-(p+window.pageYOffset);s.style.setProperty("--sticky-form-height",Math.round(m)+"px"),i.style.setProperty("--window-width",document.documentElement.clientWidth+"px")}},r.onLoginClick=function(){d.GrowthEventsLogger.log("buy_checkout_sign_in_modal",{action:"click",location:"in_product"}),r.props.actions.toggleExistingAccount()},r.toggleExistingAccount=function(){r.props.actions.toggleExistingAccount(!1)},r.handlePress=function(e){e.key===i.Key.Enter&&e.target instanceof Element&&("INPUT"===e.target.tagName||"SELECT"===e.target.tagName)&&(e.preventDefault(),r.onSubmitFormWithCaptchaScore())},r.resizeThrottle=new l.RafThrottle(r.handleResize);var n=T.getSelectedUiProduct(r.props.supportedProducts,r.props.productPlanType);if(r.state={hasLoadedSubChangePlans:!1,selectedProduct:n},r.props.showTrialVersion){var o=r.props.pageState.paymentFormSpec;r.props.actions.updatePaymentMethod(o.default_payment_method())}return r}return r.__extends(t,e),t.prototype.prepareForSubmission=function(){return this.paymentInfoSection.prepareForSubmission()},t.prototype.getValue=function(e,t){var r=this.props.pageState.paymentFormSpec.get_token_connect_data(e);if(null!=r)return r;if(void 0!==sessionStorage){var a=sessionStorage.getItem(e);if(null!=a)return a}return t},t.prototype.loadState=function(){try{if(void 0===sessionStorage&&void 0===this.props.pageState.paymentFormSpec.spec.token_connect_prefill_data)return;this.props.actions.updateFirstName(this.getValue("firstName",this.props.formData.firstName.rawValue)),this.props.actions.updateLastName(this.getValue("lastName",this.props.formData.lastName.rawValue)),this.props.actions.updateEmail(this.getValue("email",this.props.formData.email.rawValue)),this.props.actions.updateZipCode(this.getValue("zipCode",this.props.formData.zipCode.rawValue));var e=this.getValue("countryCode",this.props.formData.countryCode.rawValue);this.props.actions.updateCountryCode(e);var t=Number(this.getValue("paymentMethod",""+this.props.formData.paymentMethod.rawValue));this.props.pageState.paymentFormSpec.available_payment_methods_for_country(e).includes(t)&&this.props.actions.updatePaymentMethod(t)}catch(e){C.reportException({err:new Error("Error loading payment state"+e.message),severity:C.SEVERITY.NONCRITICAL})}},t.prototype.saveState=function(){try{if(void 0===sessionStorage)return;sessionStorage.setItem("firstName",this.props.formData.firstName.rawValue),sessionStorage.setItem("lastName",this.props.formData.lastName.rawValue),sessionStorage.setItem("email",this.props.formData.email.rawValue),sessionStorage.setItem("zipCode",this.props.formData.zipCode.rawValue),sessionStorage.setItem("countryCode",this.props.formData.countryCode.rawValue),sessionStorage.setItem("paymentMethod",""+this.props.formData.paymentMethod.rawValue)}catch(e){C.reportException({err:new Error("Error saving payment state"+e.message),severity:C.SEVERITY.NONCRITICAL})}},t.prototype.componentDidMount=function(){c.mark_time_to_interactive(),this.handleResize(),window.addEventListener("resize",this.resizeThrottle.request),"orientation"in window&&window.addEventListener("orientationchange",this.resizeThrottle.request),this.loadState()},t.prototype.componentDidUpdate=function(e,t){var r=this.props,a=r.pricingState,n=r.productPlanType,o=r.supportedProducts;!this.state.hasLoadedSubChangePlans&&a.currentTransitionPrices.totalPrice&&(this.handleResize(),this.setState({hasLoadedSubChangePlans:!0})),e.productPlanType!==n&&this.setState({selectedProduct:T.getSelectedUiProduct(o,n)})},t.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.resizeThrottle.request),"orientation"in window&&window.removeEventListener("orientationchange",this.resizeThrottle.request)},t.prototype.renderPaymentForm=function(){var e,t,r,o,i,l,u,c=this,d=this.props,y=d.actions,h=d.ccIframeUrl,b=d.countryList,S=d.experiments,C=d.idealBanks,E=d.locale,T=d.formData,I=d.pageState,M=d.pricingState,x=d.showTrialVersion,D=d.showMarketingOptInIfNewAccount,A=d.useAUTaxInclusivePricing,O=d.userIsEligibleForProfessionalTrial,V=d.braintreeClientToken,B=d.defaultPlan,L=d.supportedProducts,U=I.userInfo,R=I.promoSpec,j=I.paymentFormSpec,q=I.paymentBannerError,H=this.state.selectedProduct,z=function(e){return void 0===e&&(e=!0),e?n.defineMessage({id:"uR6YMd",defaultMessage:"{index}. Choose your space"}):s.intl.formatMessage({id:"ix4+1x",defaultMessage:"Choose your space"})},Y=function(e){return void 0===e&&(e=!0),e?n.defineMessage({id:"xs62vu",defaultMessage:"{index}. Choose your billing cycle"}):s.intl.formatMessage({id:"r4whCV",defaultMessage:"Choose your billing cycle"})},W=function(e){return void 0===e&&(e=!0),e?n.defineMessage({id:"DcuOhc",defaultMessage:"{index}. Create your account"}):s.intl.formatMessage({id:"QEa1gY",defaultMessage:"Create your account"})},G=function(e){return void 0===e&&(e=!0),e?n.defineMessage({id:"2/IxPb",defaultMessage:"{index}. Enter payment details"}):s.intl.formatMessage({id:"yxgpXI",defaultMessage:"Enter payment details"})},Z=void 0,K="ON"===S.checkoutNewOrderSummary,X=B===P.CheckoutPageProductPlan.PLUS,J=H.productPlan===P.CheckoutPageProductPlan.PLUS&&x;!X||J||R||(Z=function(e,t){return a.default.createElement(N.SectionWrapperWithTitle,{index:e,key:"choose-space-section-"+e,modifier:"plan-selection",title:z(t),isOrderSummaryRedesign:K},a.default.createElement(g.PlanSelection,{actions:y,locale:E,productPlanType:T.productPlanType.rawValue,showPlanNameUnderRadio:!1,defaultPlan:B,supportedProducts:L,userIsEligibleForProfessionalTrial:O}))});var Q=M.subChangePlans?void 0:{monthlyPrice:null===(e=null==H?void 0:H.priceMonthly)||void 0===e?void 0:e.price,annualPriceAsMonthly:null===(t=null==H?void 0:H.priceAnnual)||void 0===t?void 0:t.priceAsMonthly,yearlyPrice:null===(r=null==H?void 0:H.priceAnnual)||void 0===r?void 0:r.price,yearlyWithoutSavings:null===(o=null==H?void 0:H.priceAnnual)||void 0===o?void 0:o.withoutSavings,yearlySavings:null===(i=null==H?void 0:H.priceAnnual)||void 0===i?void 0:i.savings},$=a.default.createElement(m.ScheduleSelection,{actions:y,displayPrices:M.displayPrices,formData:T,initialPricingStrings:Q,locale:E,useAUTaxInclusivePricing:A,showTrialVersion:x,paymentSchedule:H.paymentSchedule,showYearlyPricePerMonth:Boolean(H.showYearlyPricePerMonth),isOrderSummaryRedesign:K}),ee=void 0;if(!I.userInfo.existingAccount){var te=a.default.createElement(N.AccountToggleLink,{onClick:this.onLoginClick,linkKey:"existing_account",linkText:n.defineMessage({id:"jofRGL",defaultMessage:"or <existing_account>use existing Dropbox account</existing_account>"})});ee=function(e,t){return a.default.createElement(N.SectionWrapperWithTitleAndLink,{index:e,key:"create-account-section-"+e,link:te,title:W(t),isOrderSummaryRedesign:K},a.default.createElement(p.NewAccountInput,{actions:y,autocomplete:!0,formData:T,firstNameError:k.firstNameErrorMessage(T.firstName),lastNameError:k.lastNameErrorMessage(T.lastName),emailError:k.emailErrorMessage(T.email,c.toggleExistingAccount),passwordError:k.passwordErrorMessage(T.password)}))}}var re=a.default.createElement(f.PaymentInfoSection,{paymentSpec:j,iframeUrl:h,idealBanks:C,countryList:b,formData:T,vatEnabled:Boolean(H.vatEnabled),actions:y,ref:function(e){c.paymentInfoSection=e},showTrialVersion:x,userInfo:U,submitForm:this.resubmitForm,paymentPayPalV2Flow:S.paymentPayPalV2Flow,braintreeClientToken:V,paymentBannerError:q,planNamePrefixedWithDropbox:H.namePrefixedWithDropbox,price:M.currentTransitionPrices}),ae=T.scheduleId.formattedValue,ne=ae===w.ScheduleId.YEARLY?H.addonSelectorsForAnnualBilling:H.addonSelectorsForMonthlyBilling,oe=s.intl.formatMessage({id:"KKqy5i",defaultMessage:"Add ons"}),ie=[Z,function(e,t){return a.default.createElement(N.SectionWrapperWithTitle,{index:e,key:"billing-schedule-section-"+e,modifier:"schedule-selection",title:Y(t),isOrderSummaryRedesign:K},$)},ne.length>0?function(){return a.default.createElement(N.SectionWrapperWithTitle,{key:"addons-section",modifier:"addons",title:oe,isOrderSummaryRedesign:K},a.default.createElement("div",{className:"grid__item grid__item--large--11-12"},ne.map((function(e){var t=e.id,r=e.type,n=e.addons,o=e.singleSelectorInfo;return a.default.createElement(F.AddonSelector,{id:t,key:t,type:r,addons:n,singleSelectorInfo:o,scheduleId:ae,onSelect:function(e){return console.log(e)}})}))))}:void 0,ee,function(e,t){var r=K?"billing-redesign":"billing";return a.default.createElement(N.SectionWrapperWithTitle,{forwardRef:c.paymentSectionRef,index:e,key:"payment-section-"+e,modifier:r,title:G(t),isOrderSummaryRedesign:K},re)}],se=!K,le=[],ue=1;ie.forEach((function(e){e&&(le.push(e(ue,se)),ue+=1)}));var ce=x?this.handleSubmitTryForm:this.onSubmitFormWithCaptchaScore,de=a.default.createElement("section",{className:"payment-form-container__section grid__item"},a.default.createElement(N.Divider,null),a.default.createElement(_.SubmitPaymentForm,{actions:y,additionalTermsOfService:null!==(l=H.additionalTermsOfService)&&void 0!==l?l:null,buyLink:null===(u=null==H?void 0:H.pageUrl)||void 0===u?void 0:u.buyLink,currentTransitionPrices:M.currentTransitionPrices,formData:T,isLoadingPrices:M.loadingPrices,onClick:ce,pageState:I,planNamePrefixedWithDropbox:H.namePrefixedWithDropbox,showMarketingOptInIfNewAccount:D,showTrialVersion:x,showPromoLegalCopy:Boolean(R)})),pe=a.default.createElement("div",{className:"payment-form-container__submit-and-footer",ref:this.submitSectionAndFooterRef},de,a.default.createElement("div",{className:"grid__item"},this.renderWorldpayEntityText()),a.default.createElement(v.LazyRebrandArborMinimalFooter,{localeSelectorWithoutCss:!0}));return a.default.createElement("div",{className:"grid__container payment-form-container"},a.default.createElement("form",{method:"post",className:"payment-form",onKeyPress:this.handlePress},le),K&&pe)},t.prototype.renderWorldpayEntityText=function(){return-1===t.excludeWorldpayEntityTextForCountry.indexOf(this.props.formData.countryCode.formattedValue)?a.default.createElement(h.WorldPayEntityInfo,null):null},t.prototype.render=function(){var e,t,r=this.props,n=r.actions,i=r.formData,s=r.pageState,l=r.pricingState,c=r.showMarketingOptInIfNewAccount,d=r.showTrialVersion,p=r.taxNamesByCountry,m=r.experiments,f=this.state.selectedProduct,h=f.included,g=d?this.handleSubmitTryForm:this.onSubmitFormWithCaptchaScore,_="ON"===m.checkoutNewOrderSummary;return a.default.createElement("div",{className:o.default("PurchaseForm","grid__container")},a.default.createElement("div",{className:o.default("grid__item","PurchaseForm__payment-col","PurchaseForm__payment-col--desktopSticky",{"grid__item--medium--11-24":!_}),ref:this.paymentFormRef},this.renderPaymentForm()),a.default.createElement("div",{className:"grid__item--medium--1-12"}),_||a.default.createElement("div",{className:"PurchaseForm__summary-col PurchaseForm__summary-col--desktopSticky grid__item--medium--11-24 grid__item",ref:this.orderSummaryRef},a.default.createElement("div",{className:"grid__item"},a.default.createElement("div",{className:"grid__item"},a.default.createElement(y.OrderSummary,{actions:n,additionalTermsOfService:null!==(e=f.additionalTermsOfService)&&void 0!==e?e:null,buyLink:null===(t=null==f?void 0:f.pageUrl)||void 0===t?void 0:t.buyLink,formData:i,currentTransitionPrices:l.currentTransitionPrices,isLoadingPrices:l.loadingPrices,onClick:g,pageState:s,planColor:f.planColor,planName:f.name,planNamePrefixedWithDropbox:f.namePrefixedWithDropbox,taxNamesByCountry:p,showMarketingOptInIfNewAccount:c,showTrialVersion:d})),h&&a.default.createElement(E.IncludedFeatures,{content:h}))),_||a.default.createElement("div",{className:"grid__item"},this.renderWorldpayEntityText()),a.default.createElement(u.Captcha,{ref:this.setCaptchaComponent,source:"BUY_PURCHASE_FORM",onSubmit:this.resubmitForm,email:this.props.pageState.userInfo.email||this.props.formData.email.formattedValue}))},t.excludeWorldpayEntityTextForCountry=["US","CA","MX"],t})(a.default.Component);t.BuyPurchaseForm=I})),define("modules/clean/react/payments/buy/components/payment_form_utils",["require","exports","tslib","react","modules/core/i18n","classnames"],(function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccountToggleLink=t.SectionWrapperWithTitleAndLink=t.SectionWrapperWithTitle=t.Divider=void 0,a=r.__importDefault(a),o=r.__importDefault(o),t.Divider=function(){return a.default.createElement("hr",{"aria-hidden":"true",className:"payment-form-container__divider grid__item payment-form-container__divider"})},t.SectionWrapperWithTitle=function(e){var i=e.children,s=e.forwardRef,l=e.index,u=e.modifier,c=e.title,d=e.isOrderSummaryRedesign,p=r.__assign({className:o.default("payment-form-container__section payment-form-container__section--"+u+" grid__item",{"payment-form-container__section--order-summary-redesign":d})},s?{ref:s}:{}),m=o.default("payment-form-container__header grid__item",{"payment-form-container__header--order-summary-redesign":d});return a.default.createElement("section",r.__assign({},p),!d&&a.default.createElement(t.Divider,null),a.default.createElement("div",{className:m},"string"==typeof c?c:n.intl.formatMessage(c,{index:l})),i)},t.SectionWrapperWithTitleAndLink=function(e){var r=e.index,i=e.link,s=e.title,l=e.children,u=e.isOrderSummaryRedesign,c=o.default("payment-form-container__section grid__item",{"payment-form-container__section--order-summary-redesign-link":u}),d=o.default("payment-form-container__header grid__container grid--x-bookend",{"payment-form-container__header--order-summary-redesign":u});return a.default.createElement("section",{className:c},!u&&a.default.createElement(t.Divider,null),a.default.createElement("div",{className:d},a.default.createElement("div",{className:"payment-form-container__header--account"},"string"==typeof s?s:n.intl.formatMessage(s,{index:r})),i),l)},t.AccountToggleLink=function(e){var t,o=e.linkText,i=e.linkKey,s=e.onClick,l=e.otherFormatters,u=void 0===l?{}:l;return a.default.createElement("div",{className:"payment-form-container__login"},n.intl.formatMessage(o,r.__assign(((t={})[i]=function(e){return a.default.createElement("button",{"aria-label":"",key:"account-toggle",className:"account-toggle button--as-link",onClick:s,type:"button"},e)},t),u)))}})),define("modules/clean/react/payments/buy/components/account/new_account_input",["require","exports","tslib","react","modules/clean/react/payments/buy/components/inputs/inputs","modules/clean/components/password_strength_meter","modules/clean/react/payments/buy/components/account/new_account_input_utils","modules/clean/auth/common/utils","classnames"],(function(e,t,r,a,n,o,i,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NewAccountInput=void 0,a=r.__importDefault(a),l=r.__importDefault(l);var u=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onFirstNameChanged=function(e){t.props.actions.updateFirstName(e.value)},t.onFirstNameBlur=function(e){t.props.actions.showFormFieldErrors(["firstName"],"FirstNameBlur")},t.onLastNameChanged=function(e){t.props.actions.updateLastName(e.value)},t.onLastNameBlur=function(e){t.props.actions.showFormFieldErrors(["lastName"],"LastNameBlur")},t.onEmailChanged=function(e){t.props.actions.updateEmail(e.value)},t.onEmailBlur=function(e){t.props.actions.showFormFieldErrors(["email"],"EmailBlur")},t.onPasswordChanged=function(e){t.props.actions.updatePassword(e.value)},t.onPasswordBlur=function(e){t.props.actions.showFormFieldErrors(["password"],"PasswordBlur")},t}return r.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.autocomplete,r=e.emailError,u=e.firstNameError,c=e.formData,d=e.lastNameError,p=e.passwordError,m=s.lastNameGoesFirst(),f=a.default.createElement(n.LabeledTextInput,{name:"fname",autocomplete:t?"given-name":"off",labelText:i.accountLabels.firstName,containerClassName:l.default("grid__item--fluid",{"grid__item--margin-right--1-24":!m}),value:c.firstName.rawValue,onBlur:this.onFirstNameBlur,onChange:this.onFirstNameChanged,errorText:u}),y=a.default.createElement(n.LabeledTextInput,{name:"lname",autocomplete:t?"family-name":"off",labelText:i.accountLabels.lastName,containerClassName:l.default("grid__item--fluid",{"grid__item--margin-right--1-24":m}),value:c.lastName.rawValue,onBlur:this.onLastNameBlur,onChange:this.onLastNameChanged,errorText:d});return a.default.createElement("div",{className:"grid__item account-info grid__item--large--11-12"},a.default.createElement("div",{className:"account-info__name grid__container grid--x-bookend grid--y-top"},m?a.default.createElement(a.default.Fragment,null,y,f):a.default.createElement(a.default.Fragment,null,f,y)),a.default.createElement("div",{className:"account-info__cred grid__container grid--x-bookend grid--y-top"},a.default.createElement(n.LabeledTextInput,{name:"account-email",autocomplete:t?"email":"off",type:"email",labelText:i.accountLabels.email,containerClassName:"grid__item--fluid grid__item--margin-right--1-24",value:c.email.rawValue,onBlur:this.onEmailBlur,onChange:this.onEmailChanged,errorText:r}),a.default.createElement("div",{className:"account-info__password grid__item--fluid"},a.default.createElement(o.PasswordStrengthMeter,{password:c.password.rawValue}),a.default.createElement(n.LabeledTextInput,{name:"password",type:"password",autocomplete:"new-password",labelText:i.accountLabels.password,containerClassName:"grid__item",value:c.password.rawValue,onChange:this.onPasswordChanged,onBlur:this.onPasswordBlur,errorText:p}))))},t})(a.default.Component);t.NewAccountInput=u})),define("modules/clean/react/payments/buy/components/account/new_account_input_utils",["require","exports","tslib","react","modules/core/i18n","modules/clean/react/payments/common/form_value_helpers","modules/clean/react/payments/common/form_values"],(function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.emailErrorMessage=t.passwordErrorMessage=t.lastNameErrorMessage=t.firstNameErrorMessage=t.accountLabels=void 0,a=r.__importDefault(a),i=r.__importStar(i),t.accountLabels={firstName:n.intl.formatMessage({id:"MF/EZ0",defaultMessage:"First name"}),lastName:n.intl.formatMessage({id:"o/EyS0",defaultMessage:"Last name"}),email:n.intl.formatMessage({id:"ycH5zr",defaultMessage:"Email"}),password:n.intl.formatMessage({id:"Dj00Xc",defaultMessage:"Password"})},t.firstNameErrorMessage=function(e){return e.showError&&!o.FormValueHelper.isValid(e)?n.intl.formatMessage({id:"first name",defaultMessage:"Please enter a valid first name."}):""},t.lastNameErrorMessage=function(e){return e.showError&&!o.FormValueHelper.isValid(e)?n.intl.formatMessage({id:"last name",defaultMessage:"Please enter a valid last name."}):""},t.passwordErrorMessage=function(e){return e.showError?n.intl.formatMessage({id:"y53jZ7",defaultMessage:"Passwords must be 6 characters or more."}):""},t.emailErrorMessage=function(e,t){if(!e.showError)return"";switch(e.errorState){case i.EmailErrorState.Empty:return n.intl.formatMessage({id:"uRA/73",defaultMessage:"Please enter an email address."});case i.EmailErrorState.NoAt:return n.intl.formatMessage({id:"JfCj3L",defaultMessage:"An email address must contain a single @"});case i.EmailErrorState.BadUsername:var r=e.formattedValue.split("@")[0];return n.intl.formatMessage({id:"YkS8kL",defaultMessage:"The username portion of the email address is invalid (the portion before the @: {username})."},{username:r});case i.EmailErrorState.BadDomain:var o=e.formattedValue.split("@")[1];return""===o?n.intl.formatMessage({id:"9wdsbq",defaultMessage:"The domain portion of the email address is invalid (the portion after the @)."}):n.intl.formatMessage({id:"HwUfO2",defaultMessage:"The domain portion of the email address is invalid (the portion after the @: {domain})."},{domain:o});case i.EmailErrorState.TakenWarning:return a.default.createElement("span",null,n.intl.formatMessage({id:"KP0Yzf",defaultMessage:"This e-mail is already taken."}));case i.EmailErrorState.TakenError:return a.default.createElement("span",null,n.intl.formatMessage({id:"KANDIa",defaultMessage:"This e-mail is already taken. <a_signin>Sign in</a_signin> or <a_forgot>reset your password</a_forgot>."},{a_signin:function(e){return a.default.createElement("a",{key:"a-signin",className:"login-register-switch-link",onClick:t},e)},a_forgot:function(e){return a.default.createElement("a",{key:"a-forgot",href:"/forgot"},e)}}));default:return""}}})),define("modules/clean/react/payments/buy/components/addons/addon_utils",["require","exports","tslib","react","modules/clean/payments/skus/constants","react-intl"],(function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFormattedPrice=void 0,a=r.__importDefault(a);var i=o.defineMessages({yearlyPrice:{id:"9x2Fy/",defaultMessage:"{price} / year"},monthlyPrice:{id:"Jycu7P",defaultMessage:"{price} / month"}});t.getFormattedPrice=function(e,t){return e===n.ScheduleId.YEARLY?a.default.createElement(o.FormattedMessage,r.__assign({},i.yearlyPrice,{values:{price:t}})):a.default.createElement(o.FormattedMessage,r.__assign({},i.monthlyPrice,{values:{price:t}}))}})),define("modules/clean/react/payments/buy/components/addons/addon_selector",["require","exports","tslib","react","modules/clean/react/payments/buy/components/addons/single_addon_selector","modules/clean/ts_utils","dropbox/proto/js_init_data/checkout/checkout_page"],(function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AddonSelector=void 0,a=r.__importDefault(a);var s=i.checkout_page.AddonSelector.AddonSelectorType;t.AddonSelector=function(e){var t=e.type,r=e.addons,i=e.singleSelectorInfo,l=e.onSelect,u=e.scheduleId;switch(t){case s.SINGLE_SELECTOR:return a.default.createElement(n.SingleAddonSelector,{title:i.title,description:i.description,addons:r,onSelect:l,scheduleId:u});case s.MULTI_SELECTOR:throw new Error("Not implemented yet.");case s.UNKNOWN_SELECTOR_TYPE:throw new Error("Unknown selector type specified.");default:o.enforceExhaustive(t)}}})),define("modules/clean/react/payments/buy/components/addons/single_addon_selector",["require","exports","tslib","react","modules/clean/react/components/css","dig-components/controls","dig-components/typography","modules/clean/react/payments/buy/components/addons/addon_utils"],(function(e,t,r,a,n,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SingleAddonSelector=void 0,a=r.__importStar(a),t.SingleAddonSelector=n.requireCssWithComponent((function(e){var t=e.title,r=e.description,n=e.addons,l=e.scheduleId,u=e.onSelect,c=n[0],d=c.id,p=c.displayPrice,m=a.useState(!1),f=m[0],y=m[1],h=a.useCallback((function(){y((function(e){return!e}))}),[y]);return a.useEffect((function(){u(f?d:null)}),[f,u,d]),a.default.createElement("div",{className:"single-addon-selector"},a.default.createElement("div",{className:"single-addon-selector__title-container"},a.default.createElement(i.Title,{className:"single-addon-selector__title",size:"small"},t),a.default.createElement(o.Checkbox,{checked:f,onChange:h})),a.default.createElement(i.Text,{className:"single-addon-selector__price",tagName:"div",color:"faint"},s.getFormattedPrice(l,p)),a.default.createElement(i.Text,{className:"single-addon-selector__description",tagName:"div",color:"faint"},r))}),["/static/css/buy/components/single_addon_selector-vflbdaWeG.css","/static/css/dig-components/index.web-vfl12MBWX.css"])})),define("modules/clean/react/payments/buy/components/plan/schedule_selection",["require","exports","tslib","react","classnames","modules/core/i18n","modules/clean/payments/skus/constants","react-intl","modules/clean/react/payments/buy/components/plan/schedule_selection_utils","dig-components/typography","modules/clean/react/payments/buy/components/inputs/inputs"],(function(e,t,r,a,n,o,i,s,l,u,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScheduleSelection=void 0,a=r.__importDefault(a),n=r.__importDefault(n);var d=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onScheduleChange=function(e,r,a){var n=e.currentTarget;a=a||n.value;var o=parseInt(a,10);o!==t.props.formData.scheduleId.formattedValue&&t.props.actions.updateSchedule(o)},t.onPlanLabelClick=function(e){e!==t.props.formData.scheduleId.formattedValue&&t.props.actions.updateSchedule(e)},t}return r.__extends(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.actions,r=e.paymentSchedule;r&&"monthly"===r&&t.updateSchedule(i.ScheduleId.MONTHLY)},t.prototype.getPricingStrings=function(e,t,n){var o,i,u,c,d,p,m,f;if(n)o=a.default.createElement(s.FormattedMessage,r.__assign({},l.ScheduleSelectionPricingStrings.yearlyPrice,{values:{price:n.yearlyPrice}})),c=a.default.createElement(s.FormattedMessage,r.__assign({},l.ScheduleSelectionPricingStrings.yearlyPriceAx,{values:{price:n.yearlyPrice,savings:n.yearlySavings}})),i=a.default.createElement(s.FormattedMessage,r.__assign({},l.ScheduleSelectionPricingStrings.monthlyPrice,{values:{price:n.monthlyPrice}})),d=a.default.createElement(s.FormattedMessage,r.__assign({},l.ScheduleSelectionPricingStrings.monthlyPriceAx,{values:{price:n.monthlyPrice}})),u=a.default.createElement(s.FormattedMessage,r.__assign({},l.ScheduleSelectionPricingStrings.yearlyPrice,{values:{price:n.yearlyWithoutSavings}})),p=a.default.createElement(s.FormattedMessage,r.__assign({},l.ScheduleSelectionPricingStrings.monthlyPrice,{values:{price:n.annualPriceAsMonthly}})),m=a.default.createElement(s.FormattedMessage,r.__assign({},l.ScheduleSelectionPricingStrings.yearlyPricePerMonthAx,{values:{price:n.annualPriceAsMonthly}})),f=a.default.createElement(s.FormattedMessage,r.__assign({},l.ScheduleSelectionPricingStrings.yearlyPricePerMonthSubText,{values:{price:n.annualPriceAsMonthly}}));else{var y=e.yearlyPrice,h=e.monthlyPrice,g=e.yearlySavings,_=e.taxInclusiveYearlyPrice,v=e.taxInclusiveMonthlyPrice,P=e.taxInclusiveYearlySavings;t?(o=a.default.createElement(s.FormattedMessage,r.__assign({},l.ScheduleSelectionPricingStrings.yearlyPrice,{values:{price:_?_.formatCurrency():""}})),c=a.default.createElement(s.FormattedMessage,r.__assign({},l.ScheduleSelectionPricingStrings.pricePerYearGST,{values:{price:_?_.formatCurrency():"",savings:P?P.formatCurrency():""}})),i=a.default.createElement(s.FormattedMessage,r.__assign({},l.ScheduleSelectionPricingStrings.monthlyPrice,{values:{price:v?v.formatCurrency():""}})),d=a.default.createElement(s.FormattedMessage,r.__assign({},l.ScheduleSelectionPricingStrings.pricePerMonthGST,{values:{price:v?v.formatCurrency():""}})),u=a.default.createElement(s.FormattedMessage,r.__assign({},l.ScheduleSelectionPricingStrings.yearlyPrice,{values:{price:v?v.multiply(12).formatCurrency():""}})),p=a.default.createElement(s.FormattedMessage,r.__assign({},l.ScheduleSelectionPricingStrings.monthlyPrice,{values:{price:_?_.divide(12).formatCurrency():""}})),m=a.default.createElement(s.FormattedMessage,r.__assign({},l.ScheduleSelectionPricingStrings.yearlyPricePerMonthAx,{values:{price:_?_.divide(12).formatCurrency():""}}))):(o=a.default.createElement(s.FormattedMessage,r.__assign({},l.ScheduleSelectionPricingStrings.yearlyPrice,{values:{price:y?y.formatCurrency():""}})),c=a.default.createElement(s.FormattedMessage,r.__assign({},l.ScheduleSelectionPricingStrings.yearlyPriceAx,{values:{price:y?y.formatCurrency():"",savings:g?g.formatCurrency():""}})),i=a.default.createElement(s.FormattedMessage,r.__assign({},l.ScheduleSelectionPricingStrings.monthlyPrice,{values:{price:h?h.formatCurrency():""}})),d=a.default.createElement(s.FormattedMessage,r.__assign({},l.ScheduleSelectionPricingStrings.monthlyPriceAx,{values:{price:h?h.formatCurrency():""}})),u=a.default.createElement(s.FormattedMessage,r.__assign({},l.ScheduleSelectionPricingStrings.yearlyPrice,{values:{price:h?h.multiply(12).formatCurrency():""}})),p=a.default.createElement(s.FormattedMessage,r.__assign({},l.ScheduleSelectionPricingStrings.monthlyPrice,{values:{price:y?y.divide(12).formatCurrency():""}})),m=a.default.createElement(s.FormattedMessage,r.__assign({},l.ScheduleSelectionPricingStrings.yearlyPriceAx,{values:{price:y?y.divide(12).formatCurrency():""}}))),f=a.default.createElement(s.FormattedMessage,r.__assign({},l.ScheduleSelectionPricingStrings.yearlyPricePerMonthSubText,{values:{price:t?null==_?void 0:_.divide(12).formatCurrency():null==y?void 0:y.divide(12).formatCurrency()}}))}return{yearlyPrice:o,yearlyPriceAx:c,monthlyPrice:i,monthlyPriceAx:d,yearlyPriceNoSavings:u,yearlyGstIncluded:a.default.createElement(s.FormattedMessage,r.__assign({},l.ScheduleSelectionPricingStrings.pricesIncludeGST)),monthlyGstIncluded:a.default.createElement(s.FormattedMessage,r.__assign({},l.ScheduleSelectionPricingStrings.includesGST)),yearlyPricePerMonth:p,yearlyPricePerMonthAx:m,yearlyPricePerMonthSubText:f}},t.prototype.renderYearlyPlanBlock=function(){var e=this,t=this.props,r=t.locale,s=t.showYearlyPricePerMonth,l=t.isOrderSummaryRedesign,d=t.displayPrices,p=t.useAUTaxInclusivePricing,m=t.initialPricingStrings,f=this.props.formData.scheduleId.formattedValue,y=this.getPricingStrings(d,p,m),h=y.yearlyPrice,g=y.yearlyPriceAx,_=y.yearlyPriceNoSavings,v=y.yearlyGstIncluded,P=y.yearlyPricePerMonth,b=y.yearlyPricePerMonthAx,S=y.monthlyGstIncluded,C=y.yearlyPricePerMonthSubText,E=n.default({"plan-info__savings":!0,"plan-info__savings--strike":"en"===r}),T="en"===r?_:o.intl.formatMessage({id:"rOFcNI",defaultMessage:"(includes 2 free months)"}),k=a.default.createElement("span",{id:"plan-info__label--yearly",className:"plan-info__label plan-info__label--yearly",onClick:function(){return e.onPlanLabelClick(i.ScheduleId.YEARLY)},"aria-hidden":"true"},o.intl.formatMessage({id:"VeKS9s",defaultMessage:"Billed Yearly"})),N=a.default.createElement(a.default.Fragment,null,a.default.createElement(u.Text,{className:"plan-info__schedule-subtitle",tagName:"div",color:"faint"},h),a.default.createElement("span",{className:"ax-visually-hidden"},g),a.default.createElement(u.Text,{className:"plan-info__schedule-subtitle",size:"small",tagName:"div",color:"faint"},C),a.default.createElement("span",{className:"ax-visually-hidden"},b)),w=a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{className:"plan-info__subtitle","aria-hidden":"true"},s?P:h),a.default.createElement("span",{className:"ax-visually-hidden"},s?b:g),!s&&a.default.createElement("div",{"aria-hidden":"true",className:E},T),p&&a.default.createElement("div",{className:"plan-info__subtitle","aria-hidden":"true"},s?S:v));return a.default.createElement("div",{className:"plan-info__choice plan-info__yearly"},a.default.createElement(c.LabeledRadioInput,{name:"schedule_id",inputId:"plan-info__radio--yearly",ariaLabelId:"plan-info__label--yearly",className:"plan-info__radio",labelClassName:"plan-info__container",value:i.ScheduleId.YEARLY.toString(),checked:f===i.ScheduleId.YEARLY,labelSpan:k,onClickOrChange:this.onScheduleChange}),l?N:w)},t.prototype.renderMonthlyPlanBlock=function(){var e=this,t=this.props,r=t.formData,n=t.isOrderSummaryRedesign,s=t.displayPrices,l=t.useAUTaxInclusivePricing,d=t.initialPricingStrings,p=r.scheduleId.formattedValue,m=this.getPricingStrings(s,l,d),f=m.monthlyPrice,y=m.monthlyPriceAx,h=m.monthlyGstIncluded,g=a.default.createElement("span",{id:"plan-info__label--monthly",className:"plan-info__label plan-info__label--monthly",onClick:function(){return e.onPlanLabelClick(i.ScheduleId.MONTHLY)},"aria-hidden":"true"},o.intl.formatMessage({id:"Fb6V6v",defaultMessage:"Billed Monthly"})),_=n?a.default.createElement(a.default.Fragment,null,a.default.createElement(u.Text,{className:"plan-info__schedule-subtitle",tagName:"div",color:"faint"},f),a.default.createElement("span",{className:"ax-visually-hidden"},y)):a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{className:"plan-info__subtitle","aria-hidden":"true"},f),a.default.createElement("span",{className:"ax-visually-hidden"},y),l&&a.default.createElement("div",{className:"plan-info__subtitle","aria-hidden":"true"},h));return a.default.createElement("div",{className:"plan-info__choice plan-info__monthly"},a.default.createElement(c.LabeledRadioInput,{name:"schedule_id",inputId:"plan-info__radio--monthly",ariaLabelId:"plan-info__label--monthly",className:"plan-info__radio",labelClassName:"plan-info__container",value:i.ScheduleId.MONTHLY.toString(),checked:p===i.ScheduleId.MONTHLY,labelSpan:g,onClickOrChange:this.onScheduleChange}),_)},t.prototype.render=function(){var e=this.props.paymentSchedule;return e&&"yearly"===e?a.default.createElement("div",{className:"grid__container plan-info"},this.renderYearlyPlanBlock()):e&&"monthly"===e?a.default.createElement("div",{className:"grid__container plan-info"},this.renderMonthlyPlanBlock()):a.default.createElement("div",{className:"grid__container plan-info"},this.renderYearlyPlanBlock(),a.default.createElement("div",{className:"plan-info__spacer"}),this.renderMonthlyPlanBlock())},t})(a.default.Component);t.ScheduleSelection=d})),define("modules/clean/react/payments/buy/components/plan/schedule_selection_utils",["require","exports","react-intl"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScheduleSelectionPricingStrings=void 0,t.ScheduleSelectionPricingStrings=r.defineMessages({yearlyPrice:{id:"apg6vF",defaultMessage:"{price} / year"},yearlyPriceAx:{id:"87seMW",defaultMessage:"{price} per year. Save {savings}"},monthlyPrice:{id:"x8/3yY",defaultMessage:"{price} / month"},monthlyPriceAx:{id:"4CkvFg",defaultMessage:"{price} per month"},yearlyPricePerMonthAx:{id:"Drd5tk",defaultMessage:"{price} per month when billed yearly"},yearlyPricePerMonthSubText:{id:"ACfKQX",defaultMessage:"({price} / month)"},pricePerYearGST:{id:"zik2vk",defaultMessage:"{price} per year. Save {savings}. Prices include GST"},pricePerMonthGST:{id:"iG2E95",defaultMessage:"{price} per month. Includes GST"},pricesIncludeGST:{id:"fH6B8y",defaultMessage:"(prices include GST)"},includesGST:{id:"EMZH/l",defaultMessage:"(includes GST)"}})}));var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding(t,e,r);return __setModuleDefault(t,e),t};define("modules/clean/react/payments/buy/components/payments/async_sox_compliance_warning",["require","exports","modules/clean/react/async/loadable","modules/clean/web_timing_logger"],(function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncSOXComplianceBanner=void 0,t.AsyncSOXComplianceBanner=r.Loadable({loader:function(){return a.waitForTTI().then((function(){return new Promise((function(t,r){e(["modules/clean/react/payments/buy/components/payments/sox_compliance_warning"],t,r)})).then(__importStar).then((function(e){return e.SOXComplianceBanner}))}))}})})),define("modules/clean/react/payments/buy/components/payments/buy_payment_info_section",["require","exports","tslib","react","classnames","modules/clean/react/tooltip","modules/clean/react/image","modules/clean/static_urls","modules/clean/payments/payment_form/payment_form_spec","modules/clean/payments/validation","modules/core/i18n","modules/clean/react/payments/buy/components/inputs/inputs","modules/clean/react/payments/common/form_value_helpers","modules/clean/react/payments/buy/components/payments/ideal_form","modules/clean/react/payments/buy/components/payments/payment_method_selector","modules/clean/react/payments/buy/components/payments/cpf_tooltip","modules/clean/react/payments/checkout/components/payment_method_form/credit_card_frame","modules/clean/react/payments/checkout/components/payment_method_form/direct_debit_form","modules/clean/react/payments/checkout/components/payment_method_form/address_form","modules/core/exception","dig-components/icons/src","dig-components/icons"],(function(e,t,r,a,n,o,i,s,l,u,c,d,p,m,f,y,h,g,_,v,P,b){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentInfoSection=void 0,a=r.__importDefault(a),n=r.__importDefault(n),v=r.__importStar(v);var S=(function(t){function S(){var a=null!==t&&t.apply(this,arguments)||this;return a.createPaypalBtn=function(){var t=a.props.braintreeClientToken?a.props.braintreeClientToken:"",n=a.props.actions.updatePayPalNonce;Promise.all([new Promise((function(t,r){e(["braintree-web"],t,r)})).then(r.__importStar),new Promise((function(t,r){e(["paypal-api-checkout"],t,r)})).then(r.__importStar)]).then((function(e){var r=e[0],a=e[1].default,o=r.client,i=r.paypalCheckout;o.create({authorization:t},(function(e,t){if(e)v.reportException({err:new Error("Error creating Braintree client: "+e),severity:v.SEVERITY.CRITICAL});else{var r=a;i.create({client:t},(function(e,t){e?v.reportException({err:new Error("Error creating PayPal Checkout: "+e),severity:v.SEVERITY.CRITICAL}):r.Button.render({env:"production",style:{color:"gold",height:35,label:"paypal",shape:"rect",size:"responsive",tagline:!1},funding:{allowed:[r.FUNDING.CARD],disallowed:[r.FUNDING.CREDIT]},payment:function(){return t.createPayment({flow:"vault",enableShippingAddress:!1})},onAuthorize:function(e,r){return t.tokenizePayment(e,(function(e,t){n(t.nonce,t.details.email)}))},onCancel:function(e){},onError:function(e){v.reportException({err:new Error("PayPal Checkout error: "+e),severity:v.SEVERITY.CRITICAL})}},"#paypal-button").then((function(){}))}))}}))}))},a.clearPayPalNonce=function(e){e.preventDefault(),a.props.actions.updatePayPalNonce("","")},a.onVatBlur=function(e){a.props.actions.showFormFieldErrors(["vat"],"VatBlur"),a.props.actions.blurVat(e.value)},a.onVatChange=function(e){a.props.actions.updateVat(e.value)},a.onCpfBlur=function(e){a.props.actions.showFormFieldErrors(["cpf"],"CpfBlur"),a.props.actions.blurCpf(e.value)},a.onCpfChange=function(e){a.props.actions.updateCpf(e.value)},a}return r.__extends(S,t),S.prototype.componentDidMount=function(){this.props.actions.updateHistory&&this.props.actions.updateHistory(),"ON"===this.props.paymentPayPalV2Flow&&this.props.braintreeClientToken&&this.createPaypalBtn(),this.props.price&&this.props.planNamePrefixedWithDropbox||this.props.paymentSpec.hide_apple_pay()},S.prototype.prepareForSubmission=function(){var e=this.props.formData.paymentMethod;if(e.formattedValue===l.PaymentMethod.CreditCard)return this.creditCardFrame.tokenize();if(e.formattedValue===l.PaymentMethod.ApplePay&&this.props.planNamePrefixedWithDropbox&&this.props.price){var t={planName:this.props.planNamePrefixedWithDropbox,price:this.props.price};return this.props.actions.applePayAction(t)}return Promise.resolve(!0)},S.prototype.getCreditCardFrame=function(){return this.creditCardFrame},S.prototype.vatErrorString=function(){var e=this.props.formData.vat;return!p.FormValueHelper.isValid(e)&&e.showError?c.intl.formatMessage({id:"iRjYtd",defaultMessage:"Please enter a valid VAT number (ex: {examples})."},{examples:u.getVatExamples(this.props.formData.countryCode.formattedValue).join(", ")}):""},S.prototype.cpfErrorString=function(){var e=this.props.formData.cpf;return!p.FormValueHelper.isValid(e)&&e.showError?c.intl.formatMessage({id:"MQDRWx",defaultMessage:"Please enter a valid CPF number."}):""},S.prototype.renderLocationFields=function(){return a.default.createElement("div",{className:"grid__item"},a.default.createElement(_.AddressForms,{paymentSpec:this.props.paymentSpec,formData:this.props.formData,actions:this.props.actions,countryList:this.props.countryList}),this.renderVatFields(),this.renderCpfInput())},S.prototype.renderVatFields=function(){var e=this.props,t=e.formData,r=e.paymentSpec,o=e.vatEnabled,i=null;if(r.should_show_vat_for_country(t.countryCode.formattedValue)&&o){var s=t.vat.errorState&&t.vat.showError,l=u.getVatPrefix(t.countryCode.formattedValue),m=n.default({"payment-info__vat-input":!0,"payment-info__vat-input--valid":""!==t.vat.formattedValue&&p.FormValueHelper.isValid(t.vat)});i=a.default.createElement(d.LabeledTextInput,{className:"payment-info__vat",inputClassName:m,containerClassName:"grid__item vat-container",name:"vat",labelText:c.intl.formatMessage({id:"eZAuK1",defaultMessage:"VAT number (optional)"}),placeholder:l,hasError:Boolean(s),value:t.vat.rawValue,onBlur:this.onVatBlur,onChange:this.onVatChange,errorText:this.vatErrorString()})}return i},S.prototype.renderCpfInput=function(){var e=null;if(this.props.paymentSpec.should_require_cpf(this.props.formData.countryCode.formattedValue,this.props.formData.paymentMethod.formattedValue)){var t=this.props.formData.cpf.errorState&&this.props.formData.cpf.showError,r=n.default({"payment-info__cpf-input":!0,"payment-info__cpf-input--valid":""!==this.props.formData.cpf.formattedValue&&p.FormValueHelper.isValid(this.props.formData.cpf)}),l=a.default.createElement("span",null,c.intl.formatMessage({id:"Z1BdZ2",defaultMessage:"CPF/CNPJ"}),a.default.createElement(o.Tooltip,{position:o.TooltipPosition.RIGHT,tooltip_contents:a.default.createElement(y.CPFTooltip,null),is_focusable:!0},a.default.createElement(i.Image,{className:"cpf-tooltip-icon",src:s.static_url("/static/images/payments/buy/rebrand-info-vflRPzJtZ.png"),srcHiRes:s.static_url("/static/images/payments/buy/rebrand-info@2x-vflc1SGxi.png"),alt:c.intl.formatMessage({id:"+SX5vq",defaultMessage:"More information"}),width:15,height:15}))),u=c.intl.formatMessage({id:"+9XYcz",defaultMessage:"e.g. 100.001.101-00"});e=a.default.createElement("div",{className:"grid__item"},a.default.createElement(d.LabeledTextInput,{className:"",inputClassName:r,containerClassName:"grid__item payment-info__cpf",name:"cpf",labelText:l,hasError:Boolean(t),value:this.props.formData.cpf.rawValue,onBlur:this.onCpfBlur,onChange:this.onCpfChange,placeholder:u,errorText:this.cpfErrorString()}))}return e},S.prototype.renderPaymentMethodSelector=function(){var e=this.props,t=e.paymentSpec,r=e.formData,n=e.showTrialVersion;return a.default.createElement(f.PaymentMethodSelector,{paymentSpec:t,paymentMethod:r.paymentMethod.rawValue,updatePaymentMethod:this.props.actions.updatePaymentMethod,countryCode:r.countryCode.rawValue,zipCode:r.zipCode.rawValue,showTrialVersion:n,fullWidth:!1})},S.prototype.paymentTokenConnectDetailsText=function(){return c.intl.formatMessage({id:"dIi5ZR",defaultMessage:"Your payment method has been pre-configured through your bank."})},S.prototype.renderPaymentTokenConnectDetailsText=function(){var e=null;return null!=this.props.paymentSpec.spec.token_connect_prefill_data&&(e=a.default.createElement("p",null,a.default.createElement("small",null,this.paymentTokenConnectDetailsText()))),e},S.prototype.render=function(){var e=this,t=this.props,r=t.actions,n=t.formData,o=t.idealBanks,i=this.renderLocationFields(),s=i;n.paymentMethod.formattedValue===l.PaymentMethod.DirectDeposit?s=a.default.createElement(g.DirectDebitForm,{locationFields:i,formData:n,actions:r}):n.paymentMethod.formattedValue===l.PaymentMethod.Ideal&&(s=a.default.createElement(m.IdealForm,{locationFields:i,formData:n,actions:r,idealBanks:o}));var u,d;return"ON"===this.props.paymentPayPalV2Flow&&(u=a.default.createElement("span",{className:"paypal-button-container",hidden:n.paymentMethod.formattedValue!==l.PaymentMethod.PayPal},a.default.createElement("span",{className:"paypal-button-start",hidden:""!==n.payPalNonce.formattedValue},a.default.createElement("label",{className:"input__label"},c.intl.formatMessage({id:"Xkz5XK",defaultMessage:"Sign into PayPal to continue with this payment method:"})),a.default.createElement("div",{id:"paypal-button"})),a.default.createElement("span",{className:"paypal-button-end",hidden:""===n.payPalNonce.formattedValue},a.default.createElement("span",{id:"paypal-button-account-email"},n.payPalNonce.email),a.default.createElement("br",null),a.default.createElement("a",{href:"#",onClick:this.clearPayPalNonce},c.intl.formatMessage({id:"TFnOYM",defaultMessage:"Change PayPal account"}))),a.default.createElement("span",{hidden:!1===n.payPalNonce.showError},a.default.createElement("label",{className:"input__label--error"},c.intl.formatMessage({id:"3z459e",defaultMessage:"Please select your PayPal account."}))))),this.props.paymentBannerError&&(d=a.default.createElement("div",{className:"payment-error-div payment-info grid__container inline-errors"},a.default.createElement("div",{className:"grid__item--fluid",style:{maxWidth:"30px",marginRight:"5px",marginLeft:"5px"}},a.default.createElement(b.UIIcon,{src:P.WarningLine,size:"large"})),a.default.createElement("div",{className:"grid__item--fluid grid__item--margin-right--1-24 payment-error-text"},this.props.paymentBannerError))),a.default.createElement("div",{id:"payment-info",className:"payment-info grid__container inline-errors"},this.renderPaymentTokenConnectDetailsText(),d,this.renderPaymentMethodSelector(),a.default.createElement("div",{className:"grid__item grid__item--large--11-12"},a.default.createElement(h.CreditCardFrame,{iframeUrl:this.props.iframeUrl,hidden:n.paymentMethod.formattedValue!==l.PaymentMethod.CreditCard,actions:this.props.actions,ref:function(t){e.creditCardFrame=t},nonce:n.nonce,bin:n.bin,submitForm:this.props.submitForm,getHeightFromIframe:!0}),u,s))},S})(a.default.Component);t.PaymentInfoSection=S})),define("modules/clean/react/payments/buy/components/payments/cpf_tooltip",["require","exports","tslib","react","modules/core/i18n"],(function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CPFTooltip=void 0;var o=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){var e=n.intl.formatMessage({id:"1ONP6O",defaultMessage:"The Cadastro de Pessoas FÃ­sicas (CPF) is the the Brazilian individual taxpayer registry identification number. It has 11 digits and can be found on your CPF card. It consists of numbers, dots and a dash, as in the following example: 100.001.101-00."}),t=n.intl.formatMessage({id:"VsWgR6",defaultMessage:"The Cadastro Nacional da Pessoa JurÃ­dica, or most commonly known as CNPJ, is a number that identifies legal entities and other legal arrangements at the Federal Revenue Service of Brazil. It has functions similar to those of the CPF, the only difference being that it is unique to the use of legal entities. It is a 14-digit number with a certain format, like in the following example: 00.000.000/0001-00"});return a.default.createElement("div",{className:"cpf-tooltip-contents"},a.default.createElement("p",{className:"cpf-tooltip-contents__header"},n.intl.formatMessage({id:"b1XaAp",defaultMessage:"What is CPF?"})),a.default.createElement("p",null,e),a.default.createElement("p",{className:"cpf-tooltip-contents__header"},n.intl.formatMessage({id:"grlpui",defaultMessage:"What is CNPJ?"})),a.default.createElement("p",null,t))},t})((a=r.__importDefault(a)).default.Component);t.CPFTooltip=o})),define("modules/clean/react/payments/buy/components/payments/marketing_opt_in",["require","exports","tslib","react","modules/core/i18n","modules/clean/react/payments/buy/components/inputs/inputs"],(function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MarketingOptIn=void 0;var i=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.toggleMarketingOptIn=function(e){var r=t.props.formData.marketingOptIn.rawValue;t.props.actions.updateMarketingOptIn(!r)},t}return r.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.formData,r=e.isCreatingNewAccount,i=e.showMarketingOptInIfNewAccount,s=n.intl.formatMessage({id:"vRE9NS",defaultMessage:"Iâ€™d like to receive direct marketing email updates from Dropbox"}),l=a.default.createElement("span",{className:"type--copy-small"},s);return i&&r?a.default.createElement(o.LabeledCheckboxInput,{checked:t.marketingOptIn.rawValue,containerClassName:"grid__item marketing_opt_in",className:"billing-marketing-opt-in",labelText:l,name:"marketing_opt_in",onClick:this.toggleMarketingOptIn}):null},t})((a=r.__importDefault(a)).default.Component);t.MarketingOptIn=i})),define("modules/clean/react/payments/buy/components/promos/promo_banner",["require","exports","tslib","react","dig-components/banner","modules/clean/react/payments/buy/types/types","modules/core/i18n","modules/clean/react/components/css","modules/clean/ts_utils","modules/clean/react/payments/buy/components/promos/promo_utils"],(function(e,t,r,a,n,o,i,s,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromoBanner=void 0,a=r.__importDefault(a);var c=function(e,t,r){return i.intl.formatMessage({id:"jyiB1b",defaultMessage:"{count, plural, one{<strong>Try {dropbox_plan} for free for {count} day</strong> when you sign up by {expiration_date}*.} other{<strong>Try {dropbox_plan} for free for {count} days</strong> when you sign up by {expiration_date}*.}}"},{count:e.trialLength||0,dropbox_plan:t,expiration_date:r,strong:function(e){return a.default.createElement("strong",{key:"important-message-snippet"},e)}})},d=function(e,t,r){return i.intl.formatMessage({id:"iXgIdV",defaultMessage:"Get <strong>{free_months} months free</strong> with your first year of {dropbox_plan}*. This offer expires on {expiration_date}."},{dropbox_plan:t,free_months:e.freeMonths,expiration_date:r,strong:function(e){return a.default.createElement("strong",{key:"important-message-snippet"},e)}})},p=function(e,t,r){var n=e.monthsToUse,o={dropbox_plan:t,discount:e.discountPercentage/100,numMonths:n,expiration_date:r,strong:function(e){return a.default.createElement("strong",{key:"important-message-snippet"},e)}};return e.disallowMonthly?i.intl.formatMessage({id:"eWHzIE",defaultMessage:"<strong>Get {discount, number, ::percent .##} off</strong> {numMonths, plural, one{# month} other{# months}} of {dropbox_plan} when billed yearly*. This offer expires on {expiration_date}."},o):i.intl.formatMessage({id:"V3Sp4n",defaultMessage:"<strong>Get {discount, number, ::percent .##} off</strong> {numMonths, plural, one{# month} other{# months}} of {dropbox_plan}*. This offer expires on {expiration_date}."},o)},m=function(e,t,r){var n=e.monthsToUse,o={dropbox_plan:t,discount:e.discountPercentage/100,numYears:n?n/12:0,expiration_date:r,strong:function(e){return a.default.createElement("strong",{key:"important-message-snippet"},e)}};return e.disallowMonthly?i.intl.formatMessage({id:"kzTnND",defaultMessage:"<strong>Get {discount, number, ::percent .##} off</strong> {numYears, plural, one{# year} other{# years}} of {dropbox_plan} when billed yearly*. This offer expires on {expiration_date}."},o):i.intl.formatMessage({id:"TAK0SD",defaultMessage:"<strong>Get {discount, number, ::percent .##} off</strong> {numYears, plural, one{# year} other{# years}} of {dropbox_plan}*. This offer expires on {expiration_date}."},o)};t.PromoBanner=s.requireCssWithComponent((function(e){var t=(function(e,t){var r=u.getPromoExpirationDate(e.expirationDate),a=c,n=d,i=p,s=m;switch(e.id){case o.PromoSpecType.EXTRA_TIME_MONTHS:return n(e,t,r);case o.PromoSpecType.PERCENT_DISCOUNT_PRETAX:return e.monthsToUse&&e.monthsToUse%12==0?s(e,t,r):i(e,t,r);case o.PromoSpecType.TRIAL:return a(e,t,r);case o.PromoSpecType.EXPERIMENTAL_PLAN:case o.PromoSpecType.NOT_APPLICABLE:return null;default:l.enforceExhaustive(e.id)}})(e.promoSpec,e.fullPlanName);return t?a.default.createElement("div",{className:"promo-banner","data-testid":"promo-banner"},a.default.createElement(n.Banner,{type:"attention"},a.default.createElement(n.Banner.Message,null,t))):null}),["/static/css/dig-components/index.web-vfl12MBWX.css"])})),define("modules/clean/react/payments/buy/components/promos/promo_utils",["require","exports","tslib","react","react-intl","modules/clean/react/payments/buy/types/types","modules/clean/ts_utils","modules/core/i18n","modules/clean/react/payments/buy/components/order_summary_redesign/order_summary_utils","modules/clean/payments/skus/constants"],(function(e,t,r,a,n,o,i,s,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shouldShowPromoInOrderSummary=t.getOrderSummaryPromoMessage=t.getOrderSummaryPercentDiscountMessage=t.getPromoExpirationDate=t.isYearlyBasedPromo=t.promoTermsOfServiceMessages=void 0,a=r.__importDefault(a),t.promoTermsOfServiceMessages=n.defineMessages({monthsDiscountTermsOfService:{id:"c8c56M",defaultMessage:"For the first {promo_time_span, plural, one{month} other{# months}} of your subscription, youâ€™ll be charged a monthly price of {total_price} after that and until you <link_cancel>cancel</link_cancel> your subscription, youâ€™ll be charged {base_price} monthly plus applicable taxes. Previous charges <link_refund>wonâ€™t be refunded</link_refund> when you cancel <link_required>unless itâ€™s legally required</link_required>. Your payment data is encrypted and secure. All amounts shown are in {currency}"},yearlyDiscountTermsOfService:{id:"zDBJs2",defaultMessage:"For the first {promo_time_span, plural, one{year} other{# years}} of your subscription, youâ€™ll be charged an annual price of {total_price} after that and until you <link_cancel>cancel</link_cancel> your subscription, youâ€™ll be charged {base_price} yearly plus applicable taxes. Previous charges <link_refund>wonâ€™t be refunded</link_refund> when you cancel <link_required>unless itâ€™s legally required</link_required>. Your payment data is encrypted and secure. All amounts shown are in {currency}"}}),t.isYearlyBasedPromo=function(e){return!(!e||e%12!=0)},t.getPromoExpirationDate=function(e){var t=e.replace(/-/g,"/");return t&&s.intl.formatDate(new Date(t),{year:"numeric",month:"long",day:"numeric"})},t.getOrderSummaryPercentDiscountMessage=function(e,o,i,s){var u={planName:i,discount:s/100,numYears:o?o/12:0,numMonths:o},c=t.isYearlyBasedPromo(o)?l.orderSummaryMessages.percentDiscountYearly:l.orderSummaryMessages.percentDiscountMonthly;return a.default.createElement(n.FormattedMessage,r.__assign({},c,{values:r.__assign({},u)}))},t.getOrderSummaryPromoMessage=function(e,s,u,c,d,p,m){switch(e){case o.PromoSpecType.EXTRA_TIME_MONTHS:return a.default.createElement(n.FormattedMessage,r.__assign({},l.orderSummaryMessages.promoFreeMonths,{values:{freeMonths:d,planName:m}}));case o.PromoSpecType.PERCENT_DISCOUNT_PRETAX:return t.getOrderSummaryPercentDiscountMessage(c,s,m,u);case o.PromoSpecType.TRIAL:case o.PromoSpecType.EXPERIMENTAL_PLAN:case o.PromoSpecType.NOT_APPLICABLE:return null;default:i.enforceExhaustive(e)}},t.shouldShowPromoInOrderSummary=function(e,t){if(!t)return!1;var r=t.id,a=t.supportedScheduleIds,n=t.disallowMonthly;return r!==o.PromoSpecType.TRIAL&&((!(n||r===o.PromoSpecType.EXTRA_TIME_MONTHS)||e!==u.ScheduleId.MONTHLY)&&!(a&&!a.includes(e)))}})),define("modules/clean/react/payments/buy/components/payments/order_summary/order_summary",["require","exports","tslib","react","classnames","modules/core/i18n","modules/clean/react/payments/buy/components/payments/marketing_opt_in","modules/clean/react/payments/buy/components/payments/tos","modules/clean/react/rebrand/elements/rebrand_buttons","modules/core/browser","modules/clean/analytics","modules/clean/payments/skus/constants","modules/clean/react/payments/buy/components/payments/order_summary/order_summary_utils","modules/clean/payments/payment_form/payment_form_spec"],(function(e,t,r,a,n,o,i,s,l,u,c,d,p,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OrderSummarySubmitButton=t.TrialGoToBuyLink=t.OrderSummaryErrors=t.OrderSummaryFreeMonths=t.OrderSummaryTotalPrice=t.OrderSummaryWithheldTaxes=t.OrderSummaryTaxes=t.CardTop=t.OrderSummary=void 0,a=r.__importStar(a),n=r.__importDefault(n),u=r.__importStar(u),t.OrderSummary=function(e){var r=e.actions,n=e.additionalTermsOfService,l=e.currentTransitionPrices,d=e.formData,p=e.isLoadingPrices,f=e.onClick,y=e.pageState,h=e.planColor,g=e.planNamePrefixedWithDropbox,_=e.showMarketingOptInIfNewAccount,v=e.showTrialVersion,P=e.taxNamesByCountry,b=e.buyLink,S=a.useCallback((function(){c.ProEventsLogger.log("clicked_buy_directly_cta",{}),u.redirect(b)}),[b]),C=v?o.intl.formatMessage({id:"ymP1f5",defaultMessage:"Start your free trial"}):o.intl.formatMessage({id:"4oMxy9",defaultMessage:"Buy now"}),E=l.totalPrice,T=l.currency;return a.default.createElement("div",{className:"order-summary grid__container"},a.default.createElement(t.CardTop,{planColor:h}),a.default.createElement("div",{className:"grid__item order-summary__card"},a.default.createElement("div",{className:"order-summary__plan-name grid__item"},g),a.default.createElement("div",{className:"order-summary__line-items grid__item"},a.default.createElement(t.OrderSummaryTaxes,{showTrialVersion:v,taxNamesByCountry:P,currentTransitionPrices:l}),a.default.createElement(t.OrderSummaryWithheldTaxes,{taxNamesByCountry:P,currentTransitionPrices:l}),E&&a.default.createElement(t.OrderSummaryTotalPrice,{totalPrice:E,showTrialVersion:v}),a.default.createElement(t.OrderSummaryFreeMonths,{promoSpec:y.promoSpec,scheduleId:d.scheduleId.formattedValue})),E&&T&&a.default.createElement(s.TermsOfService,{actions:r,currency:T,formData:d,totalPrice:E.formatCurrency(),showTrialVersion:v,showPromoLegalCopy:Boolean(y.promoSpec),additionalTermsOfService:n}),a.default.createElement(i.MarketingOptIn,{formData:d,actions:r,showMarketingOptInIfNewAccount:_,isCreatingNewAccount:!y.existingAccountShowing}),a.default.createElement(t.OrderSummarySubmitButton,{isProcessing:p||y.submitting,buttonText:C,onClick:f,isApplePay:d.paymentMethod.rawValue===m.PaymentMethod.ApplePay}),v&&a.default.createElement(t.TrialGoToBuyLink,{isLoading:p,isSubmitting:y.submitting,planNamePrefixedWithDropbox:g,onClickRedirectToBuy:S}),y.showBuyClickError&&a.default.createElement(t.OrderSummaryErrors,null)))},t.CardTop=function(e){var t=e.planColor;return a.default.createElement("div",{className:n.default("card-top","grid__item",p.getCardTopColorClassName(t))})},t.OrderSummaryTaxes=function(e){var t=e.showTrialVersion,r=e.currentTransitionPrices,i=e.taxNamesByCountry,s=r.taxPercentage,l=r.taxAmount,u=r.taxCountryCode,c=r.taxPlanId;if(!(l&&l.amount&&s&&s>0))return null;var d=p.getTaxNameForCountry(c||u,i);return a.default.createElement("div",{key:d,"data-testid":"order-summary-tax",className:"order-summary__tax grid__item"},o.intl.formatMessage({id:"uyZR7V",defaultMessage:"{tax_name} ({tax_percent}):{space}<span>{tax_amount}</span>"},{space:"Â ",span:function(e){return a.default.createElement("span",{className:n.default("order-summary__tax_amount",{"order-summary__strike":t})},e)},tax_name:d,tax_percent:o.intl.formatNumber(s/100,{style:"percent",maximumFractionDigits:2}),tax_amount:l.toString()}))},t.OrderSummaryWithheldTaxes=function(e){var t=e.taxNamesByCountry,r=e.currentTransitionPrices,n=r.withheldTaxAmount,i=r.withheldTaxPercentage,s=r.taxCountryCode,l=r.taxPlanId;return n&&n.amount&&i&&i>0?a.default.createElement("div",{className:"order-summary__withheld_tax grid__item"},o.intl.formatMessage({id:"E8kLRO",defaultMessage:"Withheld {tax_name} ({tax_percent, number, ::percent .##}): {tax_amount}"},{tax_name:p.getTaxNameForCountry(l||s,t),tax_percent:i/100,tax_amount:n.toString()})):null},t.OrderSummaryTotalPrice=function(e){var t=e.totalPrice,n=e.showTrialVersion,i=t.toString(),s=o.intl.formatMessage({id:"QgQyq4",defaultMessage:"Billed Now: {total_price}"},{total_price:i}),l={strike:function(e){return a.default.createElement("span",{className:"order-summary__strike order-summary__padding-left"},e)},free:function(e){return a.default.createElement("span",{className:"order-summary__free-price order-summary__padding-left"},e)}},u=o.intl.formatMessage({id:"/tcn5z",defaultMessage:"Charged Now: <strike>{total_price}</strike> <free>FREE</free>"},r.__assign(r.__assign({},l),{total_price:i}));return a.default.createElement("div",{"data-testid":"order-summary-final-price",className:"order-summary__price grid__item"},n?u:s)},t.OrderSummaryFreeMonths=function(e){var t=e.promoSpec,r=e.scheduleId;return t&&Boolean(t.freeMonths)&&r===d.ScheduleId.YEARLY?a.default.createElement("div",{className:"promo-highlight"},o.intl.formatMessage({id:"UVyMNH",defaultMessage:"<span>+ {free_months} months free</span> with your first year"},{free_months:t.freeMonths,span:function(e){return a.default.createElement("span",null,e)}})):null},t.OrderSummaryErrors=function(){return a.default.createElement("p",{className:"form-error form-error--enabled","aria-live":"assertive"},o.intl.formatMessage({id:"Ftg4vm",defaultMessage:"Please correct the form errors and try again"}))},t.TrialGoToBuyLink=function(e){var t=e.isLoading,r=e.isSubmitting,i=e.planNamePrefixedWithDropbox,s=e.onClickRedirectToBuy,l=t||r;return a.default.createElement("button",{className:n.default("button-as-link","order-summary__button","order-summary__buy-button","grid__item",{"order-summary__buy-button-disabled":l}),onClick:s,"data-uxa-log":"order-summary-go-to-buy"},o.intl.formatMessage({id:"bg2sx0",defaultMessage:"Or buy {plan} now"},{plan:i}))},t.OrderSummarySubmitButton=function(e){var t=e.isProcessing,r=e.buttonText,o=e.onClick,i=e.isApplePay,s=n.default("button--submit","order-summary__button","grid__item",{"button--loading":t}),u=r;if(t)u=a.default.createElement("div",{className:"loader"},a.default.createElement("span",{className:"loader__dot"}),a.default.createElement("span",{className:"loader__dot"}),a.default.createElement("span",{className:"loader__dot"}));else if(i)return a.default.createElement("button",{className:"apple-pay-button-with-text apple-pay-button-black-with-text",onClick:o,"data-uxa-log":"order-summary-submit-button","aria-label":"Buy now",type:"submit"},a.default.createElement("span",{className:"text"},u),a.default.createElement("span",{className:"logo"}));return a.default.createElement(l.RebrandButton,{ariaLabel:r,importance:"primary",size:"medium",type:"submit",className:s,onClick:o,disabled:t,"data-uxa-log":"order-summary-submit-button","data-testid":"submit-payment-form-button"},u)}})),define("modules/clean/react/payments/buy/components/payments/order_summary/order_summary_utils",["require","exports","tslib","modules/core/i18n","modules/core/exception"],(function(e,t,r,a,n){"use strict";var o,i;Object.defineProperty(t,"__esModule",{value:!0}),t.getCardTopColorClassName=t.PlanColor=t.CardTopClassName=t.getTaxNameForCountry=void 0,n=r.__importStar(n),t.getTaxNameForCountry=function(e,t){return t&&e&&t[e]?t[e]:a.intl.formatMessage({id:"dytYFt",defaultMessage:"Tax"})},(function(e){e.BLUE="card-top--blue",e.BLACK="card-top--black"})(o=t.CardTopClassName||(t.CardTopClassName={})),(function(e){e.BLUE="blue",e.BLACK="black"})(i=t.PlanColor||(t.PlanColor={}));var s=new Map([[i.BLACK,o.BLACK],[i.BLUE,o.BLUE]]);t.getCardTopColorClassName=function(e){return s.has(e)?s.get(e):(n.reportException({err:new Error("Unsupported checkout page plan color "+e),severity:n.SEVERITY.CRITICAL}),o.BLACK)}})),define("modules/clean/react/payments/buy/components/order_summary_redesign/order_summary",["require","exports","tslib","react","modules/clean/payments/skus/constants","dig-components/icons/src","dig-components/icons","modules/clean/react/components/css","modules/clean/react/payments/buy/components/payments/order_summary/order_summary_utils","modules/clean/payments/cash","classnames","dig-components/typography","react-intl","modules/clean/react/payments/buy/types/types","modules/clean/react/payments/buy/components/promos/promo_utils","modules/clean/react/payments/buy/components/order_summary_redesign/order_summary_utils"],(function(e,t,r,a,n,o,i,s,l,u,c,d,p,m,f,y){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OrderSummary=t.OrderSummaryFinalPrice=t.OrderSummarySubtotal=t.OrderSummaryBasePrice=void 0,a=r.__importDefault(a),c=r.__importDefault(c);var h=function(){return a.default.createElement("hr",{"aria-hidden":"true",className:"checkout-order-summary-divider"})};t.OrderSummaryBasePrice=function(e){var t=e.planName,s=e.planSchedule,l=e.basePrice,u=e.isTrial,c={strike:function(e){return a.default.createElement("span",{className:"checkout-order-summary-strike checkout-order-summary-small-label"},e)},free:function(e){return a.default.createElement("span",{className:"checkout-order-summary-free"},e)}},m=a.default.createElement(p.FormattedMessage,r.__assign({},y.orderSummaryMessages.trialPrice,{values:r.__assign(r.__assign({},c),{basePrice:l})})),f=s===n.ScheduleId.YEARLY?"Yearly":"Monthly";return a.default.createElement("div",{className:"checkout-order-summary-price-component"},a.default.createElement("div",{className:"checkout-order-summary-price-item"},a.default.createElement("div",{className:"checkout-order-summary-plan-details-icon"},a.default.createElement(i.UIIcon,{size:"large",src:o.DropboxLine}),a.default.createElement("div",{className:"checkout-order-summary-plan-name-container"},a.default.createElement(d.Title,{size:"small",className:"checkout-order-summary-plan-name"},t),a.default.createElement(d.Text,{className:"checkout-order-summary-xsmall-text",variant:"label",tagName:"div",color:"faint"},a.default.createElement(p.FormattedMessage,r.__assign({},y.orderSummaryMessages.planSchedule,{values:{planSchedule:f}}))))),a.default.createElement(d.Text,{className:"checkout-order-summary-base-price",variant:"label",tagName:"div"},u?m:l)))},t.OrderSummarySubtotal=function(e){var t=e.basePrice,n=e.isTrial,o=e.trialPrice,i=e.selectedPlanNameNoDropbox,s=e.orderSummaryPromoSpec,u=e.orderSummaryTaxSpec,h=s||{},g=h.id,_=h.monthsToUse,v=h.discountPercentage,P=h.disallowMonthly,b=h.freeMonths,S=h.trialLength,C=h.discountAmount,E=u||{},T=E.withheldTaxAmount,k=E.taxAmount,N=E.taxCountryCode,w=E.taxNamesByCountry,F=E.taxPlanId,I=l.getTaxNameForCountry(F||N,w),M=s&&g&&f.getOrderSummaryPromoMessage(g,_,v,P,b,S,i),x=s&&g===m.PromoSpecType.EXTRA_TIME_MONTHS,D=x?"inherit":"faint",A=c.default({"checkout-order-summary-free":x}),O=y.getTaxPrice(n,o,T,k),V=a.default.createElement(p.FormattedMessage,r.__assign({},y.orderSummaryMessages.withheldTaxName,{values:{taxName:I}}));return a.default.createElement("div",{className:"checkout-order-summary-price-component"},a.default.createElement("div",{className:"checkout-order-summary-price-item"},a.default.createElement(d.Text,{variant:"label",tagName:"div",color:"faint"},a.default.createElement(p.FormattedMessage,r.__assign({},y.orderSummaryMessages.subtotalPrice))),a.default.createElement(d.Text,{variant:"label"},n?o:t)),s&&a.default.createElement("div",{className:"checkout-order-summary-price-item checkout-order-summary-small-text"},a.default.createElement(d.Text,{variant:"label",tagName:"div",className:A,color:D},M),C&&!x&&a.default.createElement(d.Text,{className:"checkout-order-summary-free",variant:"label",color:"inherit"},a.default.createElement(p.FormattedMessage,r.__assign({},y.orderSummaryMessages.priceBeingSubtracted,{values:{subtractedPrice:C}})))),u&&a.default.createElement("div",{className:"checkout-order-summary-price-item checkout-order-summary-small-text"},a.default.createElement(d.Text,{variant:"label",tagName:"div",color:"faint"},T?V:I),a.default.createElement(d.Text,{"data-testid":"order-summary-tax",variant:"label"},O)))},t.OrderSummaryFinalPrice=function(e){var t=e.totalPrice,n=e.isTrial,o=e.trialEndDate,i=e.trialPrice,s=e.promoExpirationDate,l=e.showPromo,u=e.discountAmount,m=c.default("checkout-order-summary-final-price",{"checkout-order-summary-free":n||l&&u});return a.default.createElement("div",{className:"checkout-order-summary-price-component"},a.default.createElement("div",{className:"checkout-order-summary-price-item"},a.default.createElement("div",{className:"checkout-order-summary-xsmall-text"},a.default.createElement(d.Text,{variant:"label",tagName:"div"},a.default.createElement(p.FormattedMessage,r.__assign({},y.orderSummaryMessages.billedNowPrice))),a.default.createElement(d.Text,{className:"checkout-order-summary-xsmall-text",size:"small",tagName:"div",color:"faint"},n?a.default.createElement(p.FormattedMessage,r.__assign({},y.orderSummaryMessages.trialEndsDate,{values:{trialEndDate:o}})):l&&s?a.default.createElement(p.FormattedMessage,r.__assign({},y.orderSummaryMessages.promoExpirationDate,{values:{promoExpirationDate:f.getPromoExpirationDate(s)}})):void 0)),a.default.createElement("div",null,a.default.createElement("span",{"data-testid":"order-summary-final-price",className:m},n?i:t))))},t.OrderSummary=s.requireCssWithComponent((function(e){var n=e.planName,o=e.planSchedule,i=e.basePrice,s=e.isTrial,l=e.trialEndDate,c=e.currency,m=e.totalPrice,f=e.orderSummaryPromoSpec,g=e.selectedPlanNameNoDropbox,_=e.orderSummaryTaxSpec,v=e.containerRef,P=c&&new u.Cash("0.00",c).formatCurrency();return a.default.createElement("div",{className:"checkout-order-summary-container",ref:v},a.default.createElement("div",{className:"checkout-order-summary-content"},a.default.createElement(d.Title,null,a.default.createElement(p.FormattedMessage,r.__assign({},y.orderSummaryMessages.header))),a.default.createElement(t.OrderSummaryBasePrice,{planName:n,planSchedule:o,basePrice:i,isTrial:s}),a.default.createElement(h,null),a.default.createElement(t.OrderSummarySubtotal,{basePrice:i,isTrial:s,trialPrice:P,selectedPlanNameNoDropbox:g,orderSummaryPromoSpec:f,orderSummaryTaxSpec:_}),a.default.createElement(h,null),a.default.createElement(t.OrderSummaryFinalPrice,{totalPrice:m,isTrial:s,trialEndDate:l,trialPrice:P,promoExpirationDate:f&&f.expirationDate,showPromo:!!f})))}),["/static/css/buy/components/order_summary-vflgLhiMC.css","/static/css/dig-components/index.web-vfl12MBWX.css"])})),define("modules/clean/react/payments/buy/components/order_summary_redesign/order_summary_utils",["require","exports","tslib","react","react-intl"],(function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOrderSummaryTaxesSpec=t.getTaxPrice=t.orderSummaryMessages=void 0,a=r.__importDefault(a),t.orderSummaryMessages=n.defineMessages({header:{id:"m+ZGp8",defaultMessage:"Order Summary"},subtotalPrice:{id:"2dRYCe",defaultMessage:"Subtotal"},trialPrice:{id:"RFDTxf",defaultMessage:"<strike>{basePrice}</strike> <free>FREE</free>"},planSchedule:{id:"hz+qUq",defaultMessage:"{planSchedule} subscription"},billedNowPrice:{id:"XYyI20",defaultMessage:"Billed now"},trialEndsDate:{id:"AM9xOF",defaultMessage:"Trial ends {trialEndDate}"},promoFreeMonths:{id:"EDzII1",defaultMessage:"+ {freeMonths, plural, one{# month} other{# months}} free with your first year"},percentDiscountMonthly:{id:"QXsb2b",defaultMessage:"{planName} discount ({discount, number, ::percent .##} off {numMonths, plural, one{# month} other{# months}})"},percentDiscountYearly:{id:"TuiQ5u",defaultMessage:"{planName} discount ({discount, number, ::percent .##} off {numYears, plural, one{# year} other{# years}})"},promoExpirationDate:{id:"P3DEnh",defaultMessage:"Must claim by {promoExpirationDate}"},priceBeingSubtracted:{id:"ZE382A",defaultMessage:"-{subtractedPrice}"},withheldTaxName:{id:"p620Oo",defaultMessage:"Withheld {taxName}"}});var o=function(e){return e&&e.amount>0};t.getTaxPrice=function(e,o,i,s){return e?o:i?a.default.createElement(n.FormattedMessage,r.__assign({},t.orderSummaryMessages.priceBeingSubtracted,{values:{subtractedPrice:i}})):s||void 0},t.getOrderSummaryTaxesSpec=function(e,t,r,a,n){var i=o(e),s=o(t);return i||s?{taxAmount:i?null==e?void 0:e.formatCurrency():void 0,withheldTaxAmount:s?null==t?void 0:t.formatCurrency():void 0,taxCountryCode:r,taxNamesByCountry:a,taxPlanId:n}:void 0}})),define("modules/clean/react/payments/buy/components/payments/worldpay_entity_info",["require","exports","tslib","react"],(function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorldPayEntityInfo=void 0;var n=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){return a.default.createElement("div",{className:"grid__container payment-entity-info__text"},a.default.createElement("p",null,"Dropbox International Unlimited Company",a.default.createElement("br",null),"One Park Place / Hatch Street Upper / Dublin 2 / Ireland"))},t})((a=r.__importDefault(a)).default.Component);t.WorldPayEntityInfo=n})),define("modules/clean/react/payments/buy/components/plan/plan_selection",["require","exports","tslib","react","modules/clean/react/payments/buy/types/types","modules/clean/react/payments/buy/components/plan/plan_block"],(function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlanSelection=void 0;var i=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handlePlanChange=function(e,r,a){var n=t.props,o=n.locale,i=n.productPlanType,s=n.actions.updateSelectedPlan;i!==e&&s(e,r,o,a)},t}return r.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.defaultPlan,r=e.supportedProducts,i=e.productPlanType,s=e.showPlanNameUnderRadio,l=e.userIsEligibleForProfessionalTrial;return t===n.CheckoutPageProductPlan.PLUS?a.default.createElement("div",{className:"grid__container plan-info"},a.default.createElement(o.PlusPlanBlock,{showTrialVersion:!1,showPlanNameUnderRadio:s,supportedProducts:r,handlePlanChange:this.handlePlanChange,selectedProductPlanType:i}),a.default.createElement("div",{className:"plan-info__spacer"}),a.default.createElement(o.ProfessionalPlanBlock,{showTrialVersion:l,showPlanNameUnderRadio:s,supportedProducts:r,handlePlanChange:this.handlePlanChange,selectedProductPlanType:i})):null},t})((a=r.__importDefault(a)).default.Component);t.PlanSelection=i})),define("modules/clean/react/payments/buy/components/plan/plan_block",["require","exports","tslib","react","modules/core/i18n","modules/clean/payments/skus/constants","modules/clean/react/payments/buy/components/inputs/inputs","modules/constants/trademark","modules/clean/react/payments/buy/types/types"],(function(e,t,r,a,n,o,i,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlusPlanBlock=t.ProfessionalPlanBlock=t.getTrialDurationString=t.PlanBlock=void 0,a=r.__importDefault(a);t.PlanBlock=function(e){var r=e.planName,n=e.productPlanType,o=e.selectedProductPlanType,s=e.ariaLabelId,l=e.inputId,u=e.quotaString,c=e.showTrialVersion,d=e.showPlanNameUnderRadio,p=e.trialDuration,m=e.advertisedTrialDuration,f=e.planInfoChoiceClass,y=e.planInfoLabelClass,h=e.planInfoSubtitleClass,g=e.handlePlanChange,_=a.default.createElement("span",{id:s,className:"plan-info__label plan-info__label--bold "+y,onClick:function(){g(n,p||0,c)},"aria-hidden":"true"},u),v=d&&r;return a.default.createElement("div",{className:"plan-info__choice "+f},a.default.createElement(i.LabeledRadioInput,{name:"plan_id",inputId:l,ariaLabelId:s+(v?" plan-info-subtitle-plan-name":"")+(c?" plan-info-subtitle-trial":""),className:"plan-info__radio",labelClassName:"plan-info__container",value:n.toString(),checked:n===o,labelSpan:_,onClickOrChange:function(e,t,r){var a=e.currentTarget;r=r||a.value;var n=parseInt(r,10);g(n,p||0,c)}}),v&&a.default.createElement("div",{id:"plan-info-subtitle-plan-name",className:"plan-info__subtitle "+h},r),c&&a.default.createElement("div",{id:"plan-info-subtitle-trial",className:"plan-info__subtitle plan-info__subtitle--green"},t.getTrialDurationString(m||p)))},t.getTrialDurationString=function(e){return void 0!==e?n.intl.formatMessage({id:"H8xyuK",defaultMessage:"Try free for {pro_trial_days} days"},{pro_trial_days:e}):""},t.ProfessionalPlanBlock=function(e){var r,n,i=e.supportedProducts,u=e.selectedProductPlanType,c=e.showTrialVersion,d=e.showPlanNameUnderRadio,p=e.handlePlanChange,m=null===(n=null===(r=i[l.CheckoutPageProductPlan.PROFESSIONAL])||void 0===r?void 0:r.trialInfo)||void 0===n?void 0:n.trialDuration;return a.default.createElement(t.PlanBlock,{planName:"Dropbox "+s.TRADEMARK_PROFESSIONAL,productPlanType:o.ProductPlanType.PROFESSIONAL,selectedProductPlanType:u,ariaLabelId:"plan-info__label--pro",inputId:"plan-info__radio--pro",quotaString:i[l.CheckoutPageProductPlan.PROFESSIONAL].quota,showTrialVersion:c,showPlanNameUnderRadio:d,trialDuration:m,advertisedTrialDuration:31===m?30:void 0,planInfoChoiceClass:"plan-info__pro",planInfoLabelClass:"plan-info__label--pro",planInfoSubtitleClass:"plan-info__subtitle--pro",handlePlanChange:p})},t.PlusPlanBlock=function(e){var r,n,i=e.supportedProducts,u=e.selectedProductPlanType,c=e.showTrialVersion,d=e.showPlanNameUnderRadio,p=e.handlePlanChange,m=null===(n=null===(r=i[l.CheckoutPageProductPlan.PLUS])||void 0===r?void 0:r.trialInfo)||void 0===n?void 0:n.trialDuration;return a.default.createElement(t.PlanBlock,{planName:"Dropbox "+s.TRADEMARK_PLUS,productPlanType:o.ProductPlanType.PLUS,selectedProductPlanType:u,ariaLabelId:"plan-info__label--plus",inputId:"plan-info__radio--plus",quotaString:i[l.CheckoutPageProductPlan.PLUS].quota,showTrialVersion:c,showPlanNameUnderRadio:d,trialDuration:m,planInfoChoiceClass:"plan-info__plus",planInfoLabelClass:"plan-info__label--plus",planInfoSubtitleClass:"plan-info__subtitle--plus",handlePlanChange:p})}})),define("modules/clean/react/payments/buy/helpers/pricing_value_helper",["require","exports","modules/clean/payments/skus/constants"],(function(e,t,r){"use strict";function a(e,t,r){if(!(e<0||e>100))return r&&r.discount.amount>0?r.discount:t.multiply(e/100)}function n(e,t,r,a){return e.filter((function(e){var n=e.finalSubState.plan,o=e.finalSubState.billingSchedule,i=!!e.finalSubState.addons.skus.length;return n&&n.productType===t&&o&&o.id===r&&i===a})).pop()}Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentTransitionPrices=t.getDiscountPriceAmount=t.getDisplayPrices=void 0,t.getDisplayPrices=function(e,t,o){var i,s,l,u,c,d,p,m,f,y;if(e){var h=n(e,t.productPlanType.formattedValue,r.ScheduleId.MONTHLY,!1),g=n(e,t.productPlanType.formattedValue,r.ScheduleId.YEARLY,!1),_=void 0,v=void 0;if(p=g.nextBillingSummary.base,m=h.nextBillingSummary.base,o){var P=o.discountPercentage;P&&(f=a(P,p,null==g?void 0:g.nextBillingSummary),y=a(P,m,null==h?void 0:h.nextBillingSummary)),g&&(i=(_=g.tvm).getTotalPrice(),u=_.getBilledPrice()),h&&(s=(v=h.tvm).getTotalPrice(),c=v.getBilledPrice())}else g&&(i=g.nextBillingSummary.base,u=g.nextBillingSummary.total),h&&(s=h.nextBillingSummary.base,c=h.nextBillingSummary.total);if(i&&s){var b=s.multiply(12).subtract(i);l=b.amount>0?b:void 0}if(u&&c){var S=c.multiply(12).subtract(u);d=S.amount>0?S:void 0}}return{yearlyPrice:i,monthlyPrice:s,yearlySavings:l,taxInclusiveYearlyPrice:u,taxInclusiveMonthlyPrice:c,taxInclusiveYearlySavings:d,baseYearlyPrice:p,baseMonthlyPrice:m,yearlyDiscountAmount:f,monthlyDiscountAmount:y}},t.getDiscountPriceAmount=a,t.getCurrentTransitionPrices=function(e,t){var r,a,o,i,s,l,u,c,d;if(e&&(r=n(e,t.productPlanType.formattedValue,t.scheduleId.formattedValue,!!t.evh.rawValue)),r&&r.tvm){var p=r.tvm;a=p.getTotalPrice(),o=p.getTaxCountryCode(),i=p.getTaxPercentage(),s=p.getTaxPrice(),l=p.getCurrency(),u=p.getTotalTaxWithheld(),c=p.getWithheldTaxPercentage(),d=p.getTaxPlanId()}return{totalPrice:a,taxCountryCode:o,taxPercentage:i,taxAmount:s,currency:l,withheldTaxAmount:u,withheldTaxPercentage:c,taxPlanId:d}}})),define("modules/clean/react/payments/buy/components/payments/ideal_form",["require","exports","tslib","react","modules/clean/react/payments/buy/components/inputs/inputs","modules/core/i18n","modules/clean/react/payments/common/form_value_helpers"],(function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IdealForm=void 0;var s=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onIdealBankChange=function(e){var r=e.value,a=t.props.idealBanks[r];t.props.actions.updateIdealBank({bankId:r,bankName:a})},t.onIdealBankBlur=function(e){t.props.actions.showFormFieldErrors(["idealBankId"],"IdealBankBlur")},t.idealErrorString=function(){var e=t.props.formData.idealBankId;return!i.FormValueHelper.isValid(e)&&e.showError?o.intl.formatMessage({id:"Lly4lc",defaultMessage:"Please select your bank."}):""},t}return r.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.formData,r=e.idealBanks,i=o.intl.formatMessage({id:"4MQHjO",defaultMessage:"Note: Weâ€™ll use your bank information provided by iDEAL for all future billing cycles. If your bank is not listed, then please select a different payment method."}),s=t.idealBankId.errorState&&t.idealBankId.showError,l=this.idealErrorString();return a.default.createElement("div",{className:"ideal-container"},a.default.createElement("div",{className:"ideal-fields"},a.default.createElement(n.LabeledSelectInput,{name:"ideal_bank",labelText:o.intl.formatMessage({id:"nomYjM",defaultMessage:"Bank"}),value:t.idealBankId.rawValue,onChange:this.onIdealBankChange,onBlur:this.onIdealBankBlur,hasError:Boolean(s),errorText:l},a.default.createElement("option",{value:"",key:"default","aria-selected":""===t.idealBankId.rawValue},o.intl.formatMessage({id:"EYb0mR",defaultMessage:"Select your bank..."})),Object.keys(r).map((function(e){return a.default.createElement("option",{value:e,key:e,"aria-selected":t.idealBankId.rawValue===e},r[e])})))),this.props.locationFields,a.default.createElement("div",{className:"ideal-note"},i))},t})((a=r.__importDefault(a)).default.Component);t.IdealForm=s})),define("modules/clean/react/payments/buy/components/payments/payment_method_input",["require","exports","tslib","react","classnames","modules/clean/payments/payment_form/payment_form_spec","modules/clean/react/payments/buy/components/inputs/inputs"],(function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentMethodInput=void 0,a=r.__importDefault(a),n=r.__importDefault(n);var s=(function(e){function t(t){var r=e.call(this,t)||this;return r.focus=function(){null!==r.labeledRadioInput.current&&r.labeledRadioInput.current.focus()},r.onChange=function(){r.props.onSelected(r.props.paymentMethod)},r.getPaymentMethodId=function(e){switch(e){case o.PaymentMethod.CreditCard:return"creditcard";case o.PaymentMethod.PayPal:return"paypal";case o.PaymentMethod.Ideal:return"ideal";case o.PaymentMethod.DirectDeposit:return"debit";case o.PaymentMethod.TokenConnect:return"token_connect";case o.PaymentMethod.ApplePay:return"applepay";default:return e}},r.labeledRadioInput=a.default.createRef(),r}return r.__extends(t,e),t.prototype.render=function(){var e=this.getPaymentMethodId(this.props.paymentMethod);return a.default.createElement("div",{className:n.default({"payment-info__option":!0,"full-width":this.props.fullWidth,"no-margin-bottom":this.props.noMarginBottom,"grid__item--expand":this.props.fullWidth,"grid__item--shrink":!this.props.fullWidth,"grid--y-middle":!0,"cc-payment-radio-selenium":this.props.paymentMethod===o.PaymentMethod.CreditCard})},a.default.createElement(i.LabeledRadioInput,{ref:this.labeledRadioInput,name:this.props.name,className:"payment-info__payment",inputId:"payment-method-radio#"+e,ariaLabelId:"payment-method-label#"+e,value:this.props.paymentMethod.toString(),checked:this.props.selected,onClickOrChange:this.onChange,labelSpan:a.default.createElement(l,{id:e,textTitle:this.props.textTitle,title:this.props.title,icons:this.props.icons,onClick:this.onChange,cc_last4:this.props.cc_last4})}))},t})(a.default.Component);t.PaymentMethodInput=s;var l=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.renderCCLast4=function(){var e=null;return null!=this.props.cc_last4&&(e=a.default.createElement("span",null,a.default.createElement("b",null,this.props.cc_last4))),e},t.prototype.render=function(){var e,t=this;return a.default.createElement("span",{className:"payment-info__method-label",onClick:this.props.onClick},a.default.createElement("span",{id:"payment-method-label#"+this.props.id,"aria-hidden":"true",className:n.default((e={"ax-visually-hidden":this.props.icons},e[this.props.id]=!this.props.icons,e)),title:this.props.textTitle},this.props.title),this.props.icons&&this.props.icons.map((function(e){return a.default.createElement("span",{key:"payment-method-icon#"+e,className:e,title:t.props.icons&&t.props.icons.length>1?e:t.props.title})})),this.renderCCLast4())},t})(a.default.Component)})),define("modules/clean/react/payments/buy/components/payments/payment_method_selector",["require","exports","tslib","react","modules/core/i18n","modules/clean/payments/payment_form/payment_form_spec","modules/clean/react/payments/buy/components/payments/payment_method_input"],(function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentMethodSelector=void 0;var s=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onPaymentMethodSelected=function(e){t.props.updatePaymentMethod(e)},t}return r.__extends(t,e),t.prototype.getLabelForMethodId=function(e){if(e===o.PaymentMethod.TokenConnect){var t=this.props.paymentSpec.supported_credit_cards_for_country(""),r=void 0;return this.props.paymentSpec.spec.token_connect_prefill_data&&"cc_last4"in this.props.paymentSpec.spec.token_connect_prefill_data&&(r="****-"+this.props.paymentSpec.spec.token_connect_prefill_data.cc_last4),a.default.createElement(i.PaymentMethodInput,{name:"payment_method",key:"payment-method#"+e,paymentMethod:o.PaymentMethod.TokenConnect,selected:this.props.paymentMethod===o.PaymentMethod.TokenConnect,onSelected:this.onPaymentMethodSelected,icons:t,fullWidth:this.props.fullWidth,title:n.intl.formatMessage({id:"7u/Z5D",defaultMessage:"Credit card"},{payment_methods:"mastercard"}),cc_last4:r})}if(e===o.PaymentMethod.CreditCard){t=this.props.paymentSpec.supported_credit_cards_for_country(this.props.countryCode);return a.default.createElement(i.PaymentMethodInput,{name:"payment_method",key:"payment-method#"+e,paymentMethod:o.PaymentMethod.CreditCard,selected:this.props.paymentMethod===o.PaymentMethod.CreditCard,onSelected:this.onPaymentMethodSelected,icons:t,fullWidth:this.props.fullWidth,title:n.intl.formatMessage({id:"2NPQhg",defaultMessage:"Credit card. We accept {payment_methods}."},{payment_methods:t.join(", ").replace("_","-")})})}return e===o.PaymentMethod.PayPal?a.default.createElement(i.PaymentMethodInput,{name:"payment_method",key:"payment-method#"+e,paymentMethod:o.PaymentMethod.PayPal,selected:this.props.paymentMethod===o.PaymentMethod.PayPal,onSelected:this.onPaymentMethodSelected,icons:["paypal"],fullWidth:this.props.fullWidth,title:n.intl.formatMessage({id:"RxvBVG",defaultMessage:"Paypal"})}):e===o.PaymentMethod.DirectDeposit?a.default.createElement(i.PaymentMethodInput,{name:"payment_method",key:"payment-method#"+e,paymentMethod:o.PaymentMethod.DirectDeposit,selected:this.props.paymentMethod===o.PaymentMethod.DirectDeposit,onSelected:this.onPaymentMethodSelected,title:n.intl.formatMessage({id:"H1vHwe",defaultMessage:"Direct Debit"}),fullWidth:this.props.fullWidth}):e===o.PaymentMethod.Ideal?a.default.createElement(i.PaymentMethodInput,{name:"payment_method",key:"payment-method#"+e,paymentMethod:o.PaymentMethod.Ideal,selected:this.props.paymentMethod===o.PaymentMethod.Ideal,onSelected:this.onPaymentMethodSelected,icons:["ideal"],fullWidth:this.props.fullWidth,title:n.intl.formatMessage({id:"DgNBM/",defaultMessage:"iDEAL"})}):e===o.PaymentMethod.ApplePay?a.default.createElement(i.PaymentMethodInput,{name:"payment_method",key:"payment-method#"+e,paymentMethod:o.PaymentMethod.ApplePay,selected:this.props.paymentMethod===o.PaymentMethod.ApplePay,onSelected:this.onPaymentMethodSelected,icons:["applepay"],fullWidth:this.props.fullWidth,title:n.intl.formatMessage({id:"ZoO+/M",defaultMessage:"ApplePay"})}):null},t.prototype.render=function(){var e=this,t=this.props,r=t.countryCode,o=t.paymentSpec,i=(t.showTrialVersion?o.only_default_payment_methods():o.available_payment_methods_for_country(r)).map((function(t){return e.getLabelForMethodId(t)}));return a.default.createElement("div",{className:"payment-info__selector grid__container"},a.default.createElement("span",{className:"ax-visually-hidden"},n.intl.formatMessage({id:"WrPpf6",defaultMessage:"Select a payment method"})),i)},t})((a=r.__importDefault(a)).default.Component);t.PaymentMethodSelector=s})),define("modules/clean/react/payments/buy/components/payments/tos",["require","exports","tslib","react","modules/core/i18n","modules/clean/react/payments/buy/components/inputs/inputs","modules/clean/payments/skus/constants","modules/clean/react/payments/common/form_value_helpers"],(function(e,t,r,a,n,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TermsOfService=void 0;var l=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onTermsAndServiceChange=function(e){t.props.actions.updateTermsAndService(Boolean(!e.checked))},t.onTermsAndServiceBlur=function(e){t.props.actions.showFormFieldErrors(["termsAndService"],"TermsAndServiceBlur")},t.onTOSLabelClick=function(e){var r=t.props.formData.termsAndService.formattedValue;t.props.actions.updateTermsAndService(Boolean(!r))},t.onTOSLinkClick=function(e){var r=t.props.formData.termsAndService.formattedValue;r||t.props.actions.updateTermsAndService(Boolean(!r)),e.stopPropagation()},t}return r.__extends(t,e),t.prototype.termsAndServiceErrorString=function(){var e=this.props.formData.termsAndService;return!s.FormValueHelper.isValid(e)&&e.showError?n.intl.formatMessage({id:"a2NBnL",defaultMessage:"Please agree to the terms of service."}):""},t.prototype.renderLegalTermsBuy=function(){var e=this.props,t=e.currency,r=e.formData,o={total_price:e.totalPrice,schedule:r.scheduleId.rawValue===i.ScheduleId.MONTHLY?n.intl.formatMessage({id:"dF0ZGK",defaultMessage:"monthly"}):n.intl.formatMessage({id:"yvyyXC",defaultMessage:"yearly"}),currency:t,link_cancel:function(e){return a.default.createElement("a",{className:"terms-info__link","aria-label":"cancel-article",key:"tos-cancel",href:"/help/158",target:"_blank",rel:"noopener noreferrer"},e)},link_refund:function(e){return a.default.createElement("a",{className:"terms-info__link","aria-label":"refund-article",key:"tos-refund",href:"/terms",target:"_blank",rel:"noopener noreferrer"},e)},link_required:function(e){return a.default.createElement("a",{className:"terms-info__link","aria-label":"requirements-article",key:"tos-required",href:"/help/9069",target:"_blank",rel:"noopener noreferrer"},e)}};return n.intl.formatMessage({id:"iwdwdQ",defaultMessage:"Youâ€™ll be charged {total_price} {schedule} until you <link_cancel>cancel</link_cancel> your subscription. Previous charges <link_refund>wonâ€™t be refunded</link_refund> when you cancel <link_required>unless itâ€™s legally required</link_required>. Your payment data is encrypted and secure. All amounts shown are in {currency}."},o)},t.prototype.renderLegalTermsTrial=function(){var e=this.props,t=e.currency,r=e.formData,o=e.totalPrice;return n.intl.formatMessage({id:"iPVwvJ",defaultMessage:"Your free trial ends on {trial_end_date}. If you donâ€™t <link_cancel>cancel</link_cancel> your free trial by that date, weâ€™ll charge you {total_price} {schedule} (taxes included) until you cancel your plan. Charges <link_refund>wonâ€™t be refunded</link_refund> when you cancel, <link_required>unless itâ€™s legally required</link_required>. Your payment data is encrypted and secure. All amounts shown are in {currency}."},{trial_end_date:r.trialEndDate.rawValue,total_price:o,schedule:r.scheduleId.rawValue===i.ScheduleId.MONTHLY?n.intl.formatMessage({id:"dF0ZGK",defaultMessage:"monthly"}):n.intl.formatMessage({id:"yvyyXC",defaultMessage:"yearly"}),link_cancel:function(e){return a.default.createElement("a",{className:"terms-info__link","aria-label":"cancel-article",key:"tos-cancel",href:"/help/space/cancel-plus",target:"_blank",rel:"noopener noreferrer","data-uxa-log":"chkout_disc_text_cancel"},e)},link_refund:function(e){return a.default.createElement("a",{className:"terms-info__link","aria-label":"refund-article",key:"tos-refund",href:"/help/billing/plus-refund",target:"_blank",rel:"noopener noreferrer","data-uxa-log":"chkout_disc_text_refund"},e)},link_required:function(e){return a.default.createElement("a",{className:"terms-info__link","aria-label":"requirements-article",key:"tos-required",href:"/terms",target:"_blank",rel:"noopener noreferrer","data-uxa-log":"chkout_disc_text_legalreq"},e)},currency:t})},t.prototype.render=function(){var e=this,t=this.props,i=t.formData,s=t.showPromoLegalCopy,l=t.showTrialVersion,u=t.additionalTermsOfService,c=l?this.renderLegalTermsTrial():this.renderLegalTermsBuy(),d={link:function(t){return a.default.createElement("a",{className:"terms-info__tos--terms-link","aria-label":"terms",key:"link_dbx",href:"/terms",target:"_blank",rel:"noopener noreferrer",onClick:e.onTOSLinkClick},t)},br:a.default.createElement("br",{key:"link_br"}),strong:function(e){return a.default.createElement("span",{className:"font-strong",key:"link_strong"},e)}},p=n.intl.formatMessage({id:"Q4Jjko",defaultMessage:"I agree to the <link>Dropbox Terms</link>{br}and the <strong>Automatic Renewal Terms</strong> above"},d);u&&(p=n.intl.formatMessage({id:"6/NfP1",defaultMessage:"I agree to the <link>Dropbox Terms</link>, <alink>{tosTitle}</alink>,{br}and the <strong>Automatic Renewal Terms</strong> above"},r.__assign({alink:function(t){return a.default.createElement("a",{className:"terms-info__tos--terms-link","aria-label":"terms",key:"link_additional",href:u.tosLink,target:"_blank",rel:"noopener noreferrer",onClick:e.onTOSLinkClick},t)},tosTitle:u.tosTitle},d)));var m=a.default.createElement("span",{className:"type--copy-small",onClick:this.onTOSLabelClick},p),f=a.default.createElement(o.LabeledCheckboxInput,{checked:i.termsAndService.rawValue,containerClassName:"grid__item terms-info__tos",className:"billing-terms-and-service",errorText:this.termsAndServiceErrorString(),labelText:m,name:"tos_agree",onClick:this.onTermsAndServiceChange,onBlur:this.onTermsAndServiceBlur});return a.default.createElement("div",{className:"terms-info"},a.default.createElement("p",{className:"terms-info__legal"},c),s&&a.default.createElement("p",{className:"terms-info__promo-legal-copy"},n.intl.formatMessage({id:"TlRCFw",defaultMessage:"* You can only use the offer if you received it from Dropbox. Dropbox reserves the right to cancel, suspend, and/or modify the offer for any reason, including for fraud, technical limitations and failures, or causes that impact the integrity of the offer."})),f)},t})((a=r.__importDefault(a)).default.Component);t.TermsOfService=l})),define("modules/clean/react/payments/buy/components/payments/submit_payment_form_section",["require","exports","tslib","react","modules/core/i18n","modules/clean/react/payments/buy/components/payments/marketing_opt_in","modules/clean/react/payments/buy/components/payments/tos","modules/clean/react/components/css","dig-components/buttons","dig-components/icons","dig-components/icons/src","modules/core/browser","modules/clean/analytics","modules/clean/payments/payment_form/payment_form_spec","classnames"],(function(e,t,r,a,n,o,i,s,l,u,c,d,p,m,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TrialGoToBuyLink=t.SubmitPaymentFormButton=t.SubmitPaymentFormErrors=t.SubmitPaymentForm=void 0,a=r.__importStar(a),d=r.__importStar(d),f=r.__importDefault(f);t.SubmitPaymentForm=s.requireCssWithComponent((function(e){var r=e.actions,s=e.buyLink,l=e.currentTransitionPrices,u=e.formData,c=e.isLoadingPrices,f=e.onClick,y=e.pageState,h=e.planNamePrefixedWithDropbox,g=e.showTrialVersion,_=e.showPromoLegalCopy,v=e.showMarketingOptInIfNewAccount,P=e.additionalTermsOfService,b=a.useCallback((function(){p.ProEventsLogger.log("clicked_buy_directly_cta",{}),d.redirect(s)}),[s]),S=g?n.intl.formatMessage({id:"oAN1do",defaultMessage:"Start free trial"}):n.intl.formatMessage({id:"6tM1v1",defaultMessage:"Purchase"}),C=l.totalPrice,E=l.currency;return a.default.createElement("div",{className:"grid__container submit-payment-section"},C&&E&&a.default.createElement(i.TermsOfService,{actions:r,currency:E,formData:u,totalPrice:C.formatCurrency(),showTrialVersion:g,showPromoLegalCopy:_,additionalTermsOfService:P}),a.default.createElement(o.MarketingOptIn,{formData:u,actions:r,showMarketingOptInIfNewAccount:v,isCreatingNewAccount:!y.existingAccountShowing}),a.default.createElement(t.SubmitPaymentFormButton,{isProcessing:c||y.submitting,buttonText:S,onClick:f,isApplePay:u.paymentMethod.rawValue===m.PaymentMethod.ApplePay}),g&&a.default.createElement(t.TrialGoToBuyLink,{isProcessing:c||y.submitting,planNamePrefixedWithDropbox:h,onClickRedirectToBuy:b}),y.showBuyClickError&&a.default.createElement(t.SubmitPaymentFormErrors,null))}),["/static/css/buy/pages/submit_payment_form_section-vflzyT5wL.css","/static/css/dig-components/index.web-vfl12MBWX.css"]),t.SubmitPaymentFormErrors=function(){return a.default.createElement("p",{className:"form-error form-error--enabled","aria-live":"assertive"},n.intl.formatMessage({id:"Ftg4vm",defaultMessage:"Please correct the form errors and try again"}))},t.SubmitPaymentFormButton=function(e){var t=e.isProcessing,r=e.buttonText,n=e.onClick,o=e.isApplePay,i=f.default("button--submit","submit-payment-section__button",{"button--loading":t});return o?a.default.createElement("button",{className:"apple-pay-button-with-text apple-pay-button-black-with-text",onClick:n,"data-uxa-log":"submit-payment-form-button","data-testid":"submit-payment-form-button","aria-label":"Buy now",type:"submit"},a.default.createElement("span",{className:"text"},r),a.default.createElement("span",{className:"logo"})):a.default.createElement(l.Button,{variant:"primary",size:"xlarge",withIconLeft:a.default.createElement(u.UIIcon,{src:c.LockLine}),onClick:n,isLoading:t,className:i,type:"submit","data-uxa-log":"submit-payment-form-button","data-testid":"submit-payment-form-button"},r)},t.TrialGoToBuyLink=function(e){var t=e.isProcessing,r=e.planNamePrefixedWithDropbox,o=e.onClickRedirectToBuy;return a.default.createElement("button",{className:f.default("button-as-link","trial-to-buy-link__buy-button","grid__item",{"trial-to-buy-link__buy-button-disabled":t}),onClick:o,"data-uxa-log":"trial-to-buy-link"},n.intl.formatMessage({id:"bg2sx0",defaultMessage:"Or buy {plan} now"},{plan:r}))}})),define("modules/clean/react/payments/buy/helpers/product_plan_helpers",["require","exports","tslib","modules/clean/payments/skus/constants","modules/clean/react/payments/buy/types/types","modules/core/exception"],(function(e,t,r,a,n,o){"use strict";var i,s;Object.defineProperty(t,"__esModule",{value:!0}),t.getProductPlanType=t.getSelectedUiProduct=t.getCheckoutPageProductPlan=t.isProductPlanTypeSupportedByCheckoutPage=t.supportedPlanTypeToCheckoutPagePlan=void 0,o=r.__importStar(o),t.supportedPlanTypeToCheckoutPagePlan=((i={})[a.ProductPlanType.PLUS]=n.CheckoutPageProductPlan.PLUS,i[a.ProductPlanType.PROFESSIONAL]=n.CheckoutPageProductPlan.PROFESSIONAL,i[a.ProductPlanType.TRANSFER]=n.CheckoutPageProductPlan.TRANSFER,i[a.ProductPlanType.FAMILY_PAYER]=n.CheckoutPageProductPlan.FAMILY,i[a.ProductPlanType.SYNC_EVERYTHING]=n.CheckoutPageProductPlan.BACKUP,i[a.ProductPlanType.HS_DBX_PRO_BUNDLE]=n.CheckoutPageProductPlan.HELLOSIGN_DBX_PRO,i[a.ProductPlanType.PASSWORDS]=n.CheckoutPageProductPlan.PASSWORDS,i[a.ProductPlanType.STANDARD]=n.CheckoutPageProductPlan.STANDARD,i[a.ProductPlanType.ADVANCED]=n.CheckoutPageProductPlan.ADVANCED,i);var l=((s={})[n.CheckoutPageProductPlan.PLUS]=a.ProductPlanType.PLUS,s[n.CheckoutPageProductPlan.PROFESSIONAL]=a.ProductPlanType.PROFESSIONAL,s[n.CheckoutPageProductPlan.TRANSFER]=a.ProductPlanType.TRANSFER,s[n.CheckoutPageProductPlan.FAMILY]=a.ProductPlanType.FAMILY_PAYER,s[n.CheckoutPageProductPlan.BACKUP]=a.ProductPlanType.SYNC_EVERYTHING,s[n.CheckoutPageProductPlan.HELLOSIGN_DBX_PRO]=a.ProductPlanType.HS_DBX_PRO_BUNDLE,s[n.CheckoutPageProductPlan.PASSWORDS]=a.ProductPlanType.PASSWORDS,s[n.CheckoutPageProductPlan.STANDARD]=a.ProductPlanType.STANDARD,s[n.CheckoutPageProductPlan.ADVANCED]=a.ProductPlanType.ADVANCED,s);function u(e){var r=t.supportedPlanTypeToCheckoutPagePlan[e];return r||o.reportException({err:new Error("Unsupported product plan type "+e),severity:o.SEVERITY.CRITICAL}),r}t.isProductPlanTypeSupportedByCheckoutPage=function(e){return void 0!==u(e)},t.getCheckoutPageProductPlan=u,t.getSelectedUiProduct=function(e,t){var r=u(t),a=e[r];return a||o.reportException({err:new Error("supportedProducts does not include selected checkout page product plan "+r),severity:o.SEVERITY.CRITICAL}),a},t.getProductPlanType=function(e){var t=l[e];return t||o.reportException({err:new Error("Unsupported checkout page product plan type "+e),severity:o.SEVERITY.CRITICAL}),t}})),define("modules/clean/react/payments/common/middleware/captcha_visibility_checker",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CaptchaVisibilityChecker=void 0;var r=(function(){function e(e){var t=this;this.POLLING_FREQUENCY_MS=500,this.checkCaptchaVisibility=function(){t.isCheckingCaptchaVisibility&&(t.isCaptchaVisible=t.getCaptchaVisibility(),t.isCaptchaVisible?(t.isCheckingCaptchaVisibility=!1,t.onCaptchaVisibility(!0)):setTimeout(t.checkCaptchaVisibility,t.POLLING_FREQUENCY_MS))},this.isCaptchaVisible=!1,this.isCheckingCaptchaVisibility=!1,this.onCaptchaVisibility=e,this.wasLastCaptchaSubmitVisible=!1}return e.prototype.triggerCaptcha=function(){this.isCheckingCaptchaVisibility=!0,this.checkCaptchaVisibility()},e.prototype.submitCaptcha=function(){this.isCaptchaVisible||this.onCaptchaVisibility(!1),this.wasLastCaptchaSubmitVisible=this.isCaptchaVisible,this.isCaptchaVisible=!1,this.isCheckingCaptchaVisibility=!1},e.prototype.getCaptchaVisibility=function(){var e=document.querySelector('iframe[src^="https://www.google.com/recaptcha/api2/bframe"]');return null!==e&&null!==e.parentElement&&null!==e.parentElement.parentElement&&"visible"===e.parentElement.parentElement.style.visibility},e})();t.CaptchaVisibilityChecker=r})),define("modules/clean/react/payments/common/middleware/payments_ux_logger",["require","exports","tslib","modules/clean/payments/three_ds_helper","modules/clean/payments/payment_form/payment_form_spec","modules/clean/logging/telemetry","modules/core/exception","modules/clean/logging/hive/schemas/web-payments_ux_analytics","modules/clean/react/payments/common/form_values","modules/clean/react/payments/common/form/actions/actions","modules/clean/react/payments/common/middleware/captcha_visibility_checker","modules/clean/react/payments/buy/actions/page_actions"],(function(e,t,r,a,n,o,i,s,l,u,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentsUXLogger=void 0,o=r.__importStar(o),i=r.__importStar(i);var p=new Set(["BlurAccountHolderName","BlurCpf","BlurIBAN","BlurVat","BlurZipCode","UpdateCountryCode","UpdateIdealBank","UpdateMandateSigned","UpdatePaymentMethod"]),m=(function(){function e(e,t){var r=this;void 0===t&&(t=s.PaymentsUxPlatform.Legacy),this.reduxMiddleware=function(e){return function(t){return function(a){var n=e.getState(),o=t(a);try{var s=e.getState();r.handleAction(a,s,n)}catch(e){i.reportException({err:e,severity:i.SEVERITY.CRITICAL,tags:["payments_ux_logger","payment"]})}return o}}},this.onCaptchaVisibility=function(e){var t={challenge_type:e?s.ChallengeType.ShownCaptcha:s.ChallengeType.SuppressedCaptcha,origin_submit_seq:r.originSubmitSeq.toString()};r.actionSeq++,r.logChallengeStart(t)},this.requestSeq=-1,this.actionSeq=-1,this.originSubmitSeq=0,this.requestId=e,this.logger=new o.HiveLogger,this.captchaVisibilityChecker=new c.CaptchaVisibilityChecker(this.onCaptchaVisibility),this.platform=t}return e.prototype.handleAction=function(e,t,r){var o;if(this.isPageView(e)){var i=((o={})[s.FormFields.CountryCode]=t.formData.countryCode.rawValue,o[s.FormFields.PaymentMethod]=n.PaymentMethod[t.formData.paymentMethod.rawValue],o);this.requestSeq++,this.actionSeq=0,this.logPageView(i)}else if(this.isFormFieldChange(e)){null!==(i=this.getFormFieldChangeDetails(e.type,t.formData,r.formData))&&(this.actionSeq++,this.logFormFieldChange(i))}else if(this.isCCFormFieldChange(e)){null!==(i=this.getCCFormFieldChangeDetails(e.creditCardIframeFields))&&(this.actionSeq++,this.logFormFieldChange(i))}else if(this.isShowFormFieldErrors(e)){if(this.isErrorFromSubmitForm(e)){i=this.getFormValidationErrorDetails(t.formData);this.actionSeq++,this.logFormValidationError(i)}}else if(this.isSubmitFormSuccess(e)){i=this.getFormSubmitEventDetails(u.SubmitFormTriggerType.ButtonClick,t.formData,r.pageState.submitSeq);this.actionSeq++,this.logFormSubmitSuccess(i)}else if(this.isSubmitFormStart(e)){i=this.getFormSubmitEventDetails(e.trigger,t.formData,r.pageState.submitSeq);this.actionSeq++,this.logFormSubmit(i)}else if(this.isTriggerCaptcha(e))this.captchaVisibilityChecker.triggerCaptcha();else if(this.isSubmitCaptcha(e)){this.captchaVisibilityChecker.submitCaptcha();i={challenge_type:this.captchaVisibilityChecker.wasLastCaptchaSubmitVisible?s.ChallengeType.ShownCaptcha:s.ChallengeType.SuppressedCaptcha,origin_submit_seq:this.originSubmitSeq.toString()};this.actionSeq++,this.logChallengeSubmit(i)}else if(this.isTriggerThreeDsChallenge(e)){i={challenge_type:s.ChallengeType.ThreeDsChallenge,origin_submit_seq:this.originSubmitSeq.toString()};this.actionSeq++,this.logChallengeStart(i)}else if(this.isTriggerThreeDsFingerprint(e)){i={challenge_type:s.ChallengeType.ThreeDsFingerprint,origin_submit_seq:this.originSubmitSeq.toString()};this.actionSeq++,this.logChallengeStart(i)}else if(this.isUpdateThreeDsData(e)){if(""!==e.value){var l=JSON.parse(e.value),c=void 0;if(l.resultType===a.ThreeDsResultType.IdentifyShopper)c=s.ChallengeType.ThreeDsFingerprint;else{if(l.resultType!==a.ThreeDsResultType.ChallengeShopper)return;c=s.ChallengeType.ThreeDsChallenge}i={challenge_type:c,origin_submit_seq:this.originSubmitSeq.toString()};this.actionSeq++,this.logChallengeSubmit(i)}}else this.isApplePayError(e)?this.log(s.PaymentsUXEvent.ApplePayError,this.applePayData(r)):this.isApplePayClosedBySuccess(e)?this.log(s.PaymentsUXEvent.ApplePayClosedBySuccess,this.applePayData(r)):this.isApplePayClosedByFailure(e)?this.log(s.PaymentsUXEvent.ApplePayClosedByFailure,this.applePayData(r)):this.isApplePayPopupShown(e)?this.log(s.PaymentsUXEvent.ApplePayPopupShown,this.applePayData(r)):this.isApplePayStartup(e)&&this.log(s.PaymentsUXEvent.ApplePayStartup,this.applePayData(r))},e.prototype.applePayData=function(e){return{submit_seq:e.pageState.submitSeq.toString(),origin_submit_seq:this.originSubmitSeq.toString(),trigger:s.FormSubmitTrigger.ButtonClick}},e.prototype.logPageView=function(e){this.log(s.PaymentsUXEvent.PageView,e)},e.prototype.logFormFieldChange=function(e){this.log(s.PaymentsUXEvent.FormFieldChange,e)},e.prototype.logFormValidationError=function(e){this.log(s.PaymentsUXEvent.FormValidationError,e)},e.prototype.logFormSubmitSuccess=function(e){this.log(s.PaymentsUXEvent.FormSubmitSuccess,e)},e.prototype.logFormSubmit=function(e){this.log(s.PaymentsUXEvent.FormSubmit,e)},e.prototype.logChallengeStart=function(e){this.log(s.PaymentsUXEvent.ChallengeStart,e)},e.prototype.logChallengeSubmit=function(e){this.log(s.PaymentsUXEvent.ChallengeSubmit,e)},e.prototype.log=function(e,t){this.logger.log(new s.PaymentsUXAnalyticsRow({event_name:e,event_details:t,request_id:this.requestId,request_seq:this.requestSeq,action_seq:this.actionSeq,platform:this.platform}))},e.prototype.isPageView=function(e){return e.type===d.PageActionEnum.UpdateHistory},e.prototype.isFormFieldChange=function(e){return p.has(e.type)},e.prototype.isShowFormFieldErrors=function(e){return"ShowFormFieldErrors"===e.type},e.prototype.isErrorFromSubmitForm=function(e){return"SubmitForm"===e.origin},e.prototype.isSubmitFormStart=function(e){return"SubmitFormStart"===e.type},e.prototype.isSubmitFormSuccess=function(e){return"SubmitFormSuccess"===e.type},e.prototype.isTriggerCaptcha=function(e){return"TriggerCaptcha"===e.type},e.prototype.isSubmitCaptcha=function(e){return"SubmitCaptcha"===e.type},e.prototype.isTriggerThreeDsChallenge=function(e){return"TriggerThreeDsChallenge"===e.type},e.prototype.isTriggerThreeDsFingerprint=function(e){return"TriggerThreeDsFingerprint"===e.type},e.prototype.isUpdateThreeDsData=function(e){return"UpdateThreeDsData"===e.type},e.prototype.isCCFormFieldChange=function(e){return"BlurCCField"===e.type},e.prototype.isApplePayStartup=function(e){return"ApplePayStartup"===e.type},e.prototype.isApplePayPopupShown=function(e){return"ApplePayPopupShown"===e.type},e.prototype.isApplePayError=function(e){return"ApplePayError"===e.type},e.prototype.isApplePayClosedBySuccess=function(e){return"ApplePayClosedBySuccess"===e.type},e.prototype.isApplePayClosedByFailure=function(e){return"ApplePayPopupCloseByFailure"===e.type},e.prototype.getFormFieldChangeDetails=function(e,t,r){switch(e){case"BlurAccountHolderName":return{field:s.FormFields.SepaAccountHolderName,value:t.accountHolderName.rawValue,error_state:l.InputErrorState[t.accountHolderName.errorState],show_error:t.accountHolderName.showError.toString()};case"BlurCpf":return{field:s.FormFields.Cpf,value:t.cpf.rawValue,error_state:l.InputErrorState[t.cpf.errorState],show_error:t.cpf.showError.toString()};case"BlurIBAN":return{field:s.FormFields.Iban,value:t.iban.rawValue,error_state:l.InputErrorState[t.iban.errorState],show_error:t.iban.showError.toString()};case"BlurVat":return{field:s.FormFields.Vat,value:t.vat.rawValue,error_state:l.InputErrorState[t.vat.errorState],show_error:t.vat.showError.toString()};case"BlurZipCode":return{field:s.FormFields.ZipCode,value:t.zipCode.rawValue,error_state:l.InputErrorState[t.zipCode.errorState],show_error:t.zipCode.showError.toString()};case"UpdateCountryCode":return r.countryCode.rawValue!==t.countryCode.rawValue?{field:s.FormFields.CountryCode,value:t.countryCode.rawValue,error_state:l.InputErrorState[t.countryCode.errorState],show_error:t.countryCode.showError.toString()}:null;case"UpdateIdealBank":return r.idealBankId.rawValue!==t.idealBankId.rawValue?{field:s.FormFields.IdealBankId,value:t.idealBankId.rawValue,error_state:l.InputErrorState[t.idealBankId.errorState],show_error:t.idealBankId.showError.toString()}:null;case"UpdateMandateSigned":return r.mandateSigned.rawValue!==t.mandateSigned.rawValue?{field:s.FormFields.SepaMandateSigned,value:t.mandateSigned.rawValue.toString(),error_state:l.InputErrorState[t.mandateSigned.errorState],show_error:t.mandateSigned.showError.toString()}:null;case"UpdatePaymentMethod":return r.paymentMethod.rawValue!==t.paymentMethod.rawValue?{field:s.FormFields.PaymentMethod,value:n.PaymentMethod[t.paymentMethod.rawValue],error_state:l.InputErrorState[t.paymentMethod.errorState],show_error:t.paymentMethod.showError.toString()}:null;default:return null}},e.prototype.getCCFormFieldChangeDetails=function(e){return e.ccn?{field:s.FormFields.CreditCardNumber,error_state:l.InputErrorState[e.ccn.isValid?l.InputErrorState.Valid:l.InputErrorState.Invalid],show_error:e.ccn.showError.toString()}:e.ccode?{field:s.FormFields.CreditCardCode,error_state:l.InputErrorState[e.ccode.isValid?l.InputErrorState.Valid:l.InputErrorState.Invalid],show_error:e.ccode.showError.toString()}:e.ccexp?{field:s.FormFields.CreditCardExpDate,error_state:l.InputErrorState[e.ccexp.isValid?l.InputErrorState.Valid:l.InputErrorState.Invalid],show_error:e.ccexp.showError.toString()}:null},e.prototype.getFormValidationErrorDetails=function(e){var t={};return e.countryCode.showError&&(t[s.FormFields.CountryCode]=l.InputErrorState[e.countryCode.errorState]),e.paymentMethod.showError&&(t[s.FormFields.PaymentMethod]=l.InputErrorState[e.paymentMethod.errorState]),e.zipCode.showError&&(t[s.FormFields.ZipCode]=l.InputErrorState[e.zipCode.errorState]),e.vat.showError&&(t[s.FormFields.Vat]=l.InputErrorState[e.vat.errorState]),e.paymentMethod.formattedValue===n.PaymentMethod.CreditCard?(e.nonce.showError&&(e.nonce.isCCNValid||(t[s.FormFields.CreditCardNumber]=l.InputErrorState[l.InputErrorState.Invalid]),e.nonce.isCCodeValid||(t[s.FormFields.CreditCardCode]=l.InputErrorState[l.InputErrorState.Invalid]),e.nonce.isCCExpValid||(t[s.FormFields.CreditCardExpDate]=l.InputErrorState[l.InputErrorState.Invalid])),e.cpf.showError&&(t[s.FormFields.Cpf]=l.InputErrorState[e.cpf.errorState])):e.paymentMethod.formattedValue===n.PaymentMethod.DirectDeposit?(e.mandateSigned.showError&&(t[s.FormFields.SepaMandateSigned]=l.InputErrorState[e.mandateSigned.errorState]),e.accountHolderName.showError&&(t[s.FormFields.SepaAccountHolderName]=l.InputErrorState[e.accountHolderName.errorState]),e.iban.showError&&(t[s.FormFields.Iban]=l.InputErrorState[e.iban.errorState])):e.paymentMethod.formattedValue===n.PaymentMethod.Ideal&&e.idealBankId.showError&&(t[s.FormFields.IdealBankId]=l.InputErrorState[e.idealBankId.errorState]),t},e.prototype.getFormSubmitEventDetails=function(e,t,r){var a;switch(e){case u.SubmitFormTriggerType.ButtonClick:a=s.FormSubmitTrigger.ButtonClick,this.originSubmitSeq=r;break;case u.SubmitFormTriggerType.RecaptchaV2:a=this.captchaVisibilityChecker.wasLastCaptchaSubmitVisible?s.FormSubmitTrigger.ShownCaptcha:s.FormSubmitTrigger.SuppressedCaptcha;break;case u.SubmitFormTriggerType.ThreeDsFingerprint:a=s.FormSubmitTrigger.ThreeDsFingerprint;break;case u.SubmitFormTriggerType.ThreeDsChallenge:a=s.FormSubmitTrigger.ThreeDsChallenge;break;default:a=s.FormSubmitTrigger.Unknown}var o={origin_submit_seq:this.originSubmitSeq.toString(),submit_seq:r.toString(),trigger:a};return a===s.FormSubmitTrigger.ButtonClick&&(o[s.FormFields.CountryCode]=t.countryCode.rawValue,o[s.FormFields.PaymentMethod]=n.PaymentMethod[t.paymentMethod.rawValue],t.paymentMethod.rawValue===n.PaymentMethod.CreditCard&&(o.bin=t.bin.rawValue)),o},e})();t.PaymentsUXLogger=m})),define("modules/clean/logging/hive/schemas/web-payments_ux_analytics",["require","exports","tslib","modules/core/browser"],(function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentsUXAnalyticsRow=t.PaymentsUxPlatform=t.FormSubmitTrigger=t.ChallengeType=t.FormFields=t.PaymentsUXEvent=void 0,a=r.__importStar(a),(function(e){e.PageView="page_view",e.FormFieldChange="form_field_change",e.FormValidationError="form_validation_error",e.FormSubmit="form_submit",e.ChallengeStart="challenge_start",e.ChallengeSubmit="challenge_submit",e.FormSubmitSuccess="form_submit_success",e.ApplePayStartup="apple_pay_startup",e.ApplePayPopupShown="apple_pay_popup_shown",e.ApplePayClosedByFailure="apple_pay_closed_by_failure",e.ApplePayError="apple_pay_error",e.ApplePayClosedBySuccess="apple_pay_closed_by_success"})(t.PaymentsUXEvent||(t.PaymentsUXEvent={})),(function(e){e.CountryCode="country_code",e.Cpf="cpf",e.CreditCardCode="cc_code",e.CreditCardExpDate="cc_exp_date",e.CreditCardNumber="cc_number",e.Iban="iban",e.IdealBankId="bank_id",e.PaymentMethod="payment_method",e.SepaAccountHolderName="owner_name",e.SepaMandateSigned="mandate_signed",e.Vat="vat",e.ZipCode="zip_code"})(t.FormFields||(t.FormFields={})),(function(e){e.SuppressedCaptcha="suppressed_captcha",e.ShownCaptcha="shown_captcha",e.ThreeDsChallenge="three_ds_challenge",e.ThreeDsFingerprint="three_ds_fingerprint"})(t.ChallengeType||(t.ChallengeType={})),(function(e){e.ButtonClick="button_click",e.SuppressedCaptcha="suppressed_captcha",e.ShownCaptcha="shown_captcha",e.ThreeDsChallenge="three_ds_challenge",e.ThreeDsFingerprint="three_ds_fingerprint",e.Unknown="unknown"})(t.FormSubmitTrigger||(t.FormSubmitTrigger={})),(function(e){e.Legacy="legacy",e.RevenueAPI="revenue_api"})(t.PaymentsUxPlatform||(t.PaymentsUxPlatform={}));var n=function(e){this.category="web-payments_ux_analytics",this.session_id=null,this.user_id=null,this.team_id=null,this.anon_ip=null,this.country=null,this.locale_user_selected=null,this.locale_browser_header=null,this.user_agent=null,this.ua_browser_name=null,this.ua_browser_version=null,this.ua_os_name=null,this.ua_os_version=null,this.ua_dist_name=null,this.ua_dist_version=null,this.event_name=e.event_name,this.event_details=e.event_details,this.url=a.get_href(),this.request_id=e.request_id,this.request_seq=e.request_seq,this.action_seq=e.action_seq,this.platform=e.platform,Object.seal(this)};t.PaymentsUXAnalyticsRow=n})),define("modules/clean/payments/skus/subscription_change_plan_set",["require","exports","modules/clean/payments/skus/constants","modules/clean/payments/skus/subscription_change_plan"],(function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptionChangePlanSet=void 0;var n=(function(){function e(e){this._subChangePlans=e}return e.deserialize=function(t){return new e(t.map(a.SubscriptionChangePlan.deserialize))},Object.defineProperty(e.prototype,"plans",{get:function(){return this._subChangePlans.slice()},enumerable:!1,configurable:!0}),e.prototype.filter=function(t){return new e(this._subChangePlans.filter(t))},e.prototype.withProductPlanType=function(e){return this.filter((function(t){var r=t.finalSubState.plan;return!!r&&r.productType===e}))},e.prototype.withSchedule=function(e){return this.filter((function(t){var r=t.finalSubState.billingSchedule;return!!r&&r.id===e}))},e.prototype.withSku=function(e){return this.filter((function(t){return t.finalSubState.plan===e}))},e.prototype.monthly=function(){return this.withSchedule(r.ScheduleId.MONTHLY)},e.prototype.yearly=function(){return this.withSchedule(r.ScheduleId.YEARLY)},e})();t.SubscriptionChangePlanSet=n})),define("modules/clean/react/payments/common/form/middleware/middleware",["require","exports","tslib","lodash","modules/core/browser","modules/core/notify","modules/clean/marketing_tracker"],(function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.marketingEventMiddleware=t.submitFormErrorMiddleware=void 0,a=r.__importStar(a),t.submitFormErrorMiddleware=function(e){return function(e){return function(t){if("SubmitFormError"!==t.type)return e(t);var r=e(t);return t.data.error_message&&o.Notify.error(t.data.error_message),t.data.redirect&&n.redirect(t.data.redirect),r}}};var s={};t.marketingEventMiddleware=function(e){return function(t){return function(r){var n=r.additionalData;switch(r.type){case"SubmitFormStart":if(!n||!n.send_conversion_data)return t(r);var o={event:"conversionDataReady",tealium_event:"conversionDataReady",product:n.product,licenses:n.licenses||1,billing_cycle:n.billing_schedule,purchase_price:n.expected_price_amount,currency:n.currency,type:n.signup_type};if(a.isEqual(s,o))return t(r);i.MarketingTracker.pushWithDefaults(o),s=o;break;case"SubmitFormSuccess":var l=e.getState().pageState;if(l&&l.marketingTracker){var u=l.marketingTracker.onSubmitFormSuccess;u&&i.MarketingTracker.pushEvent(u)}}return t(r)}}}})),define("modules/clean/react/payments/common/form/reducers/reducers",["require","exports","tslib","redux","modules/clean/react/payments/common/form_values","modules/clean/payments/skus/constants","modules/clean/react/payments/business/state/business_state","modules/clean/react/payments/common/form_value_factory","modules/clean/react/payments/common/form_value_helpers"],(function(e,t,r,a,n,o,i,s,l){"use strict";function u(e,t){var a=i.fieldsToServerProps[e];return a?function(n,o){switch(o.type){case"ShowFormFieldErrors":var i=o;if(n&&!l.FormValueHelper.isValid(n))for(var s=0,u=i.fieldNames;s<u.length;s++){var c=u[s];if(e===c)return r.__assign(r.__assign({},n),{showError:!0})}return n;case"SubmitFormError":var d=o;return d.data instanceof Object&&d.data.error_fields instanceof Object&&d.data.error_fields.hasOwnProperty(a)?n?r.__assign(r.__assign({},n),{showError:!0,serverError:d.data.error_fields[a]}):{showError:!0,serverError:d.data.error_fields[a]}:n;default:return t(n,o)}}:t}function c(e){return function(t,a){return t?r.__assign(r.__assign({},t),e(t,a)):e(t,a)}}function d(e,t){var a=t;switch(a.type){case"SubmitFormError":var o=a;if(o.data instanceof Object&&o.data.hasOwnProperty("error_fields")&&o.data.error_fields.hasOwnProperty("email")){var i=o.data.error_fields.email,u=void 0;switch(i){case"empty":u=n.EmailErrorState.Empty;break;case"account":case"email-taken":u=n.EmailErrorState.TakenError;break;default:u=e?e.errorState:n.EmailErrorState.Valid}return r.__assign(r.__assign({},e),{showError:!0,serverError:i,errorState:u})}return o.data instanceof Object&&o.data.hasOwnProperty("error_type")&&"capturable_user"===o.data.error_type.toString()?r.__assign(r.__assign({},e),{showError:!1,isCapturable:!0}):e;case"ShowFormFieldErrors":var c=a;if(e&&!l.FormValueHelper.isValid(e))for(var d=0,p=c.fieldNames;d<p.length;d++){if("email"===p[d])return r.__assign(r.__assign({},e),{showError:!0})}return e;case"UpdateEmail":var m=a;return s.FormValueFactory.createEmail(m.value,e||void 0);default:return e||null}}function p(e,t){if(void 0===e&&(e=null),"SubmitFormSuccess"!==t.type)return null;var r=t;return r.data&&r.data.next_url?r.data.next_url:null}function m(e,t){switch(void 0===e&&(e=null),t.type){case"SubmitFormStart":return"submitting";case"SubmitFormSuccess":return"success";case"SubmitFormError":return"error";default:return e}}function f(e,t){return void 0===e&&(e=null),"SubmitFormStart"===t.type&&"number"==typeof e?e+1:e}function y(e,t){switch(void 0===e&&(e=!1),t.type){case"SubmitFormStart":return!0;case"SubmitFormSuccess":case"SubmitFormError":return!1;default:return e}}function h(e,t){e=e||{};var a=t;switch(a.type){case"UpdateCpfName":return r.__assign(r.__assign({},e),{formData:r.__assign(r.__assign({},e.formData),{cpfName:s.FormValueFactory.createCpfName(a.value,e.formData.cpfName)})});case"UpdateFirstName":return e.formData.cpfName.manuallyEdited?e:r.__assign(r.__assign({},e),{formData:r.__assign(r.__assign({},e.formData),{cpfName:s.FormValueFactory.createCpfNamePrefill(a.value,e.formData.lastName.rawValue,e.pageState.userInfo.displayName)})});case"UpdateLastName":return e.formData.cpfName.manuallyEdited?e:r.__assign(r.__assign({},e),{formData:r.__assign(r.__assign({},e.formData),{cpfName:s.FormValueFactory.createCpfNamePrefill(e.formData.firstName.rawValue,a.value,e.pageState.userInfo.displayName)})});default:return e}}function g(e,t){e=e||{};var a=t;switch(a.type){case"SubmitFormError":var n=a,i="";return n.data&&n.data.error_fields&&(i=n.data.error_fields.product_plan_type),r.__assign(r.__assign({},e),{formData:r.__assign(r.__assign({},e.formData),{productPlanType:r.__assign(r.__assign({},e.formData.productPlanType),{serverError:i,showError:!0})})});case"ShowFormFieldErrors":var u=a;if(e.formData.productPlanType&&!l.FormValueHelper.isValid(e.formData.productPlanType))for(var c=0,d=u.fieldNames;c<d.length;c++){if("productPlanType"===d[c])return r.__assign(r.__assign({},e),{formData:r.__assign(r.__assign({},e.formData),{productPlanType:r.__assign(r.__assign({},e.formData.productPlanType),{showError:!0})})})}return e;case"UpdateProductPlanType":var p=a,m=p.value,f=m===o.ProductPlanType.ADVANCED?e.pageState.advancedMinNumUsers:e.pageState.standardMinNumUsers,y=m===o.ProductPlanType.ADVANCED?e.pageState.advancedMaxNumUsers:e.pageState.standardMaxNumUsers;return void 0!==e.pageState.teamNumUsers&&(f=Math.max(f,e.pageState.teamNumUsers)),r.__assign(r.__assign({},e),{pageState:r.__assign(r.__assign({},e.pageState),{minNumUsers:f,maxNumUsers:y}),formData:r.__assign(r.__assign({},e.formData),{productPlanType:s.FormValueFactory.createProductPlanType(p.value,e.pricingState.subChangePlans,e.formData.productPlanType)})});default:return e}}function _(e,t){e=e||{};var a=t;switch(a.type){case"SubmitFormError":var n=a,o="";return n.data&&n.data.error_fields&&(o=n.data.error_fields.team_num_users),r.__assign(r.__assign({},e),{formData:r.__assign(r.__assign({},e.formData),{numberOfUsers:r.__assign(r.__assign({},e.formData.numberOfUsers),{serverError:o,showError:!0})})});case"ShowFormFieldErrors":var i=a;if(e.formData.numberOfUsers&&!l.FormValueHelper.isValid(e.formData.numberOfUsers))for(var u=0,c=i.fieldNames;u<c.length;u++){if("numberOfUsers"===c[u])return r.__assign(r.__assign({},e),{formData:r.__assign(r.__assign({},e.formData),{numberOfUsers:r.__assign(r.__assign({},e.formData.numberOfUsers),{showError:!0})})})}return e;case"UpdateNumberOfUsers":var d=a;return r.__assign(r.__assign({},e),{formData:r.__assign(r.__assign({},e.formData),{numberOfUsers:s.FormValueFactory.createNumberOfUsers(d.value,e.pageState,e.formData.numberOfUsers,e.formData.numberOfUsers.minLicenseLimit,e.formData.emailsToInvite?e.formData.emailsToInvite.rawValue.length:0)})});default:return e}}function v(e,t){e=e||{};var a=t;return"UpdateMarketingOptIn"!==a.type?e:r.__assign(r.__assign({},e),{formData:r.__assign(r.__assign({},e.formData),{marketingOptIn:s.FormValueFactory.createCheckbox(a.value,e.formData.marketingOptIn,!0)})})}Object.defineProperty(t,"__esModule",{value:!0}),t.FormReducer=t.updateMarketingOptIn=t.updateNumberOfUsers=t.updateProductPlanType=t.updateCpfName=t.teamPhone=t.teamName=t.submitting=t.submitSeq=t.submitState=t.schedule=t.password=t.nextUrl=t.lastName=t.firstName=t.emailsToInvite=t.email=t.companySize=void 0,t.companySize=u("companySize",(function(e,t){return"UpdateCompanySize"===t.type?s.FormValueFactory.createInput(t.value,e||void 0):e||null})),t.email=d,t.emailsToInvite=u("emailsToInvite",(function(e,t){return"UpdateEmailsToInvite"===t.type?s.FormValueFactory.createEmailsToInvite(t.value,e||void 0):e||null})),t.firstName=u("firstName",(function(e,t){return"UpdateFirstName"===t.type?s.FormValueFactory.createInput(t.value,e||void 0):e||null})),t.lastName=u("lastName",(function(e,t){return"UpdateLastName"===t.type?s.FormValueFactory.createInput(t.value,e||void 0):e||null})),t.nextUrl=p,t.password=u("password",(function(e,t){return"UpdatePassword"===t.type?s.FormValueFactory.createPassword(t.value,e||void 0):e||null})),t.schedule=u("schedule",(function(e,t){return"UpdateSchedule"===t.type?s.FormValueFactory.createSchedule(t.value):e||null})),t.submitState=m,t.submitSeq=f,t.submitting=y,t.teamName=u("teamName",(function(e,t){return"UpdateTeamName"===t.type?s.FormValueFactory.createInput(t.value,e||void 0):e||null})),t.teamPhone=u("teamPhone",(function(e,t){return"UpdateTeamPhone"===t.type?s.FormValueFactory.createTeamPhone(t.value,e||void 0):e||null})),t.updateCpfName=h,t.updateProductPlanType=g,t.updateNumberOfUsers=_,t.updateMarketingOptIn=v;var P=c(a.combineReducers({nextUrl:p,submitState:m,submitting:y,submitSeq:f})),b=c(a.combineReducers({companySize:t.companySize,email:d,emailsToInvite:t.emailsToInvite,firstName:t.firstName,lastName:t.lastName,password:t.password,schedule:t.schedule,teamName:t.teamName,teamPhone:t.teamPhone}));t.FormReducer=(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce((function(e,t){return function(r,a){return t(e(r,a),a)}}))})(h,g,_,v,a.combineReducers({pricingState:function(e){return e||{}},pageState:P,formData:b}))})),define("modules/clean/react/payments/common/payments/reducers/reducers",["require","exports","tslib","modules/clean/react/payments/business/state/business_state","modules/clean/react/payments/common/form_value_helpers","modules/clean/react/payments/common/form_value_factory"],(function(e,t,r,a,n,o){"use strict";function i(e,t){return r.__assign(r.__assign({},e),{formData:r.__assign(r.__assign({},e.formData),t)})}function s(e){var t=a.fieldsToServerProps[e];return t?function(a){return function(o,s){var l=o.formData[e];switch(s.type){case"ShowFormFieldErrors":for(var u=0,c=s.fieldNames;u<c.length;u++){if(c[u]===e&&void 0!==l&&!n.FormValueHelper.isValid(l)){var d={};return d[e]=r.__assign(r.__assign({},l),{showError:!0}),i(o,d)}}return o;case"SubmitFormError":var p=s;if(!p.data||!p.data.error_fields||!p.data.error_fields[t]||void 0===l)return o;var m={};return m[e]=r.__assign(r.__assign({},l),{showError:!0,serverError:p.data.error_fields[t]}),i(o,m);default:return a(o,s)}}}:function(e){return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TermsAndServiceReducers=t.PaymentMethodReducers=t.updateIdealBank=t.updateTermsAndService=t.updateMandateSigned=t.updateIBAN=t.updateAccountHolderName=t.updateThreeDsData=t.updateBrowserInfo=t.updateBIN=t.updateApplePayToken=t.updateEncryptedCardForNetworkToken=t.updateAdyenEncryptedCard=t.updatePayPalNonce=t.updateNonce=t.updateCpfName=t.updateCpf=t.updateVat=t.updateZipCode=t.updateCountryCode=t.updatePaymentMethod=void 0,t.updatePaymentMethod=s("paymentMethod")((function(e,t){if("UpdatePaymentMethod"!==t.type&&"UpdateCountryCode"!==t.type)return e;var r=e.formData,a=e.pageState,n="UpdatePaymentMethod"===t.type?t.value:r.paymentMethod.rawValue,s=r.countryCode.formattedValue;return i(e,{paymentMethod:o.FormValueFactory.createPaymentMethod(n,s,a.paymentFormSpec,r.paymentMethod)})})),t.updateCountryCode=s("countryCode")((function(e,t){return"UpdateCountryCode"!==t.type?e:i(e,{countryCode:o.FormValueFactory.createCountryCode(t.value,e.formData.countryCode)})})),t.updateZipCode=s("zipCode")((function(e,t){return"UpdateZipCode"!==t.type&&"UpdateCountryCode"!==t.type?e:i(e,{zipCode:o.FormValueFactory.createZipCode("UpdateZipCode"===t.type?t.value:e.formData.zipCode.rawValue,e.formData.countryCode.formattedValue,e.pageState.paymentFormSpec,e.formData.zipCode)})})),t.updateVat=s("vat")((function(e,t){return"UpdateVat"!==t.type&&"UpdateCountryCode"!==t.type?e:i(e,{vat:o.FormValueFactory.createVat("UpdateVat"===t.type?t.value.toUpperCase():e.formData.vat.rawValue,e.formData.countryCode.formattedValue,e.formData.vat)})})),t.updateCpf=s("cpf")((function(e,t){return"UpdateCpf"!==t.type&&"UpdateCountryCode"!==t.type?e:i(e,{cpf:o.FormValueFactory.createCpf("UpdateCpf"===t.type?t.value.toUpperCase():e.formData.cpf.rawValue,e.formData.cpf)})})),t.updateCpfName=s("cpfName")((function(e,t){return"UpdateCpfName"!==t.type?e:i(e,{cpfName:o.FormValueFactory.createCpfName(t.value,e.formData.cpfName)})})),t.updateNonce=s("nonce")((function(e,t){return"UpdateNonce"!==t.type?e:i(e,{nonce:o.FormValueFactory.createNonce(t.value,t.creditCardIframeFields,e.formData.nonce)})})),t.updatePayPalNonce=s("nonce")((function(e,t){return"UpdatePayPalNonce"!==t.type?e:i(e,{payPalNonce:o.FormValueFactory.createPayPalNonce(t.value,t.email,e.formData.payPalNonce)})})),t.updateAdyenEncryptedCard=s("adyenEncryptedCard")((function(e,t){return"UpdateAdyenEncryptedCard"!==t.type?e:i(e,{adyenEncryptedCard:o.FormValueFactory.createAdyenEncryptedCard(t.value,e.formData.adyenEncryptedCard)})})),t.updateEncryptedCardForNetworkToken=s("encryptedCardForNetworkToken")((function(e,t){return"UpdateEncryptedCardForNetworkToken"!==t.type?e:i(e,{encryptedCardForNetworkToken:o.FormValueFactory.createEncryptedCardForNetworkToken(t.cardType,t.encryptedCard)})})),t.updateApplePayToken=s("applePayToken")((function(e,t){return"UpdateApplePayToken"!==t.type?e:i(e,{applePayToken:o.FormValueFactory.createApplePayToken(t.value,e.formData.applePayToken)})})),t.updateBIN=s("bin")((function(e,t){return"UpdateBIN"!==t.type?e:i(e,{bin:o.FormValueFactory.createBIN(t.value,e.formData.bin)})})),t.updateBrowserInfo=s("browserInfo")((function(e,t){return"UpdateBrowserInfo"!==t.type?e:i(e,{browserInfo:o.FormValueFactory.createBrowserInfo(t.value,e.formData.browserInfo)})})),t.updateThreeDsData=s("threeDsData")((function(e,t){return"UpdateThreeDsData"!==t.type?e:i(e,{threeDsData:o.FormValueFactory.createThreeDsData(t.value)})})),t.updateAccountHolderName=s("accountHolderName")((function(e,t){return"UpdateAccountHolderName"!==t.type?e:i(e,{accountHolderName:o.FormValueFactory.createInput(t.value,e.formData.accountHolderName)})})),t.updateIBAN=s("iban")((function(e,t){return"UpdateIBAN"!==t.type?e:i(e,{iban:o.FormValueFactory.createIBAN(t.value,e.formData.iban)})})),t.updateMandateSigned=s("mandateSigned")((function(e,t){return"UpdateMandateSigned"!==t.type?e:i(e,{mandateSigned:o.FormValueFactory.createCheckbox(t.value,e.formData.mandateSigned)})})),t.updateTermsAndService=s("termsAndService")((function(e,t){return"UpdateTermsAndService"!==t.type?e:i(e,{termsAndService:o.FormValueFactory.createCheckbox(t.value,e.formData.termsAndService)})})),t.updateIdealBank=(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce((function(e,t){return function(r,a){return t(e(r,a),a)}}))})(s("idealBankId")((function(e,t){return"UpdateIdealBank"!==t.type?e:i(e,{idealBankId:o.FormValueFactory.createIdealBankId(t.value.bankId,e.formData.idealBankId)})})),s("idealBankName")((function(e,t){return"UpdateIdealBank"!==t.type?e:i(e,{idealBankName:o.FormValueFactory.createIdealBankName(t.value.bankName,e.formData.idealBankName)})}))),t.PaymentMethodReducers=[t.updateCountryCode,t.updatePaymentMethod,t.updateZipCode,t.updateVat,t.updateCpf,t.updateCpfName,t.updateNonce,t.updateAdyenEncryptedCard,t.updateEncryptedCardForNetworkToken,t.updateBIN,t.updateBrowserInfo,t.updateThreeDsData,t.updateAccountHolderName,t.updateIBAN,t.updateMandateSigned,t.updateIdealBank,t.updatePayPalNonce,t.updateApplePayToken],t.TermsAndServiceReducers=[t.updateTermsAndService]})),define("modules/clean/react/payments/common/payments/state/store_creator",["require","exports","modules/clean/payments/payment_form/payment_form_spec","modules/clean/react/payments/common/form_value_factory"],(function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPaymentFormData=t.createPaymentPageState=t.createPaymentPricingState=void 0,t.createPaymentPricingState=function(e){return{countryCode:a.FormValueFactory.createCountryCode(e.countryCode).formattedValue,countryCodeLoading:void 0,hasCurrencyChanged:!1,hasTaxChangedWithinCountry:!1,loadingPrices:!1,recentLoadEvent:!1,requestToken:-1}},t.createPaymentPageState=function(e){return{paymentFormSpec:new r.PaymentFormSpec(e.serializedPaymentFormSpec),requestId:e.requestId,submitSeq:0,paypalEmail:""}},t.createPaymentFormData=function(e,t,r){var n=e.countryCode,o=e.userInfo,i=e.vat,s=t.paymentFormSpec.default_payment_method_for_country(n);return{city:a.FormValueFactory.createCity(""),phone:a.FormValueFactory.createPhone(""),name:a.FormValueFactory.createName(""),address:a.FormValueFactory.createAddress(""),paymentMethod:a.FormValueFactory.createPaymentMethod(s,n,t.paymentFormSpec),countryCode:a.FormValueFactory.createCountryCode(n),zipCode:a.FormValueFactory.createZipCode("",n,t.paymentFormSpec),vat:a.FormValueFactory.createVat(i||"",n),cpf:a.FormValueFactory.createCpf(""),cpfName:a.FormValueFactory.createCpfNamePrefill("","",o.displayName),nonce:a.FormValueFactory.createNonce(""),payPalNonce:a.FormValueFactory.createPayPalNonce("",""),adyenEncryptedCard:a.FormValueFactory.createAdyenEncryptedCard(""),encryptedCardForNetworkToken:a.FormValueFactory.createEncryptedCardForNetworkToken("",""),applePayToken:a.FormValueFactory.createApplePayToken(""),bin:a.FormValueFactory.createBIN(""),browserInfo:a.FormValueFactory.createBrowserInfo(""),threeDsData:a.FormValueFactory.createThreeDsData(""),accountHolderName:a.FormValueFactory.createInput(""),iban:a.FormValueFactory.createIBAN(""),mandateSigned:a.FormValueFactory.createCheckbox(!1),termsAndService:a.FormValueFactory.createCheckbox(!1),idealBankId:a.FormValueFactory.createIdealBankId(""),idealBankName:a.FormValueFactory.createIdealBankName("")}}})),define("modules/clean/react/payments/common/pricing/reducers/reducers",["require","exports","tslib","modules/clean/payments/skus/subscription_change_plan_set"],(function(e,t,r,a){"use strict";function n(e,t){if("PrepareToUpdateTransitions"!==t.type)return e;var a=r.__assign(r.__assign({},e.pricingState),{loadingPrices:!0,recentLoadEvent:!0});return r.__assign(r.__assign({},e),{pricingState:a})}function o(e,t){if("UpdateRecentLoadEventStatus"!==t.type)return e;var a=r.__assign(r.__assign({},e.pricingState),{recentLoadEvent:t.recentLoadEventStatus});return r.__assign(r.__assign({},e),{pricingState:a})}function i(e,t){if("UpdateTransitionsStart"!==t.type)return e;var a=r.__assign(r.__assign({},e.pricingState),{countryCodeLoading:e.formData.countryCode.formattedValue,loadingPrices:!0,recentLoadEvent:!0});return r.__assign(r.__assign({},e),{pricingState:a})}function s(e,t){if("UpdateTransitionsSuccess"!==t.type)return e;var n,o="N/A",i=!1,s=!1;if(t.subChangePlans&&(n=t.subChangePlans,e.pricingState.subChangePlans.plans.length>0)){var l=e.pricingState.subChangePlans.plans[0],u=n[0],c=l.tvm,d=u.tvm,p=c&&c.getCurrency(),m=d&&d.getCurrency();i=(o="N/A"===e.pricingState.originalCurrency?p:e.pricingState.originalCurrency)!==m;var f=l.nextBillingSummary.taxRate,y=f===u.nextBillingSummary.taxRate&&(0===f||p===m);s=e.pricingState.hasTaxChangedWithinCountry||!y,e.pricingState.countryCode!==e.pricingState.countryCodeLoading&&(s=!1)}var h=r.__assign(r.__assign({},e.pricingState),{countryCode:e.pricingState.countryCodeLoading,countryCodeLoading:void 0,hasCurrencyChanged:i,hasTaxChangedWithinCountry:s,loadingPrices:!1,originalCurrency:o,recentLoadEvent:!0,subChangePlans:new a.SubscriptionChangePlanSet(t.subChangePlans),baseSubChangePlans:new a.SubscriptionChangePlanSet(t.subChangePlans)});return r.__assign(r.__assign({},e),{pricingState:h})}Object.defineProperty(t,"__esModule",{value:!0}),t.updateTransitionsSuccess=t.updateTransitionsStart=t.updateRecentLoadEventStatus=t.prepareToUpdateTransitions=t.TransitionManagementReducers=void 0,t.TransitionManagementReducers=[n,o,i,s],t.prepareToUpdateTransitions=n,t.updateRecentLoadEventStatus=o,t.updateTransitionsStart=i,t.updateTransitionsSuccess=s})),define("modules/clean/react/payments/pro/components/inputs/inputs",["require","exports","tslib","react","react-dom","classnames","ts-key-enum"],(function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LabeledInputRow=t.LabeledSelectInput=t.LabeledRadioInput=t.LabeledCheckboxInput=t.LabeledTextInput=t.LabeledInput=void 0,a=r.__importDefault(a),n=r.__importDefault(n),o=r.__importDefault(o);var s=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){var e=o.default({input__label:!0,"input__label--before":Boolean(!this.props.labelAfterElement),"input__label--errormodal":Boolean(this.props.errorText)},this.props.className),t=this.props.containerClassName,r=a.default.createElement("label",{className:e,htmlFor:this.props.htmlFor},this.props.labelText),n=null;this.props.labelAfterElement&&(n=r,r=null);var i,s=null;this.props.secondaryLabel&&(s=a.default.createElement("label",{className:"input__label input__label--secondary",htmlFor:this.props.htmlFor},this.props.secondaryLabel)),this.props.errorText&&(i=this.props.errorText);var l=a.default.createElement("label",{className:"input__label--error",htmlFor:this.props.htmlFor},i);return a.default.createElement("div",{className:t},r,this.props.children,n,s,l)},t})(a.default.Component);t.LabeledInput=s;var l=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onChange=function(e){t.props.onChange&&t.props.onChange(n.default.findDOMNode(t.input))},t.onBlur=function(e){t.props.onBlur&&t.props.onBlur(n.default.findDOMNode(t.input))},t}return r.__extends(t,e),t.prototype.componentDidMount=function(){if(this.props.onChange){var e=n.default.findDOMNode(this.input),t=e.value;t&&t!==this.props.value&&this.props.onChange(e)}},t.prototype.render=function(){var e=this,t=this.props,r=t.name,n=t.autocomplete,i=t.className,l=t.disabled,u=t.labelText,c=t.secondaryLabel,d=t.errorText,p=t.hasError,m=t.value,f=t.maxLength,y=t.containerClassName,h=t.placeholder,g=this.props.type||"text",_=o.default({input__text:!0,"input__text--error":Boolean(d)||p},this.props.inputClassName);return a.default.createElement(s,{className:i,containerClassName:y,labelText:u,htmlFor:r,errorText:d,secondaryLabel:c},a.default.createElement("input",{className:_,type:g,autoComplete:n,placeholder:h,name:r,id:r,ref:function(t){e.input=t},value:m,disabled:l,onChange:this.onChange,onBlur:this.onBlur,maxLength:f}))},t})(a.default.Component);t.LabeledTextInput=l;var u=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleCheckboxChange=function(e){t.props.onClick&&("click"!==e.type&&e.key!==i.Key.Enter&&13!==e.charCode||(t.props.onClick(n.default.findDOMNode(t.input)),e.preventDefault()))},t}return r.__extends(t,e),t.prototype.componentDidMount=function(){if(this.props.onClick){var e=n.default.findDOMNode(this.input),t=e.checked;t&&t!==this.props.checked&&this.props.onClick(e)}},t.prototype.render=function(){var e=this,t=this.props,r=t.name,n=t.className,i=t.containerClassName,l=t.disabled,u=t.labelText,c=t.labelClassName,d=t.errorText,p=t.checked,m=o.default({input__checkbox:!0,"input__checkbox--valid":p,"input__checkbox--disabled":Boolean(l)},n);return a.default.createElement(s,{containerClassName:i,className:c,errorText:d,htmlFor:r,labelAfterElement:!0,labelText:u},a.default.createElement("div",{"aria-labelledby":r,tabIndex:0,role:"checkbox",className:m,onClick:this.handleCheckboxChange,onKeyUp:this.handleCheckboxChange}),a.default.createElement("input",{tabIndex:-1,checked:p,disabled:l,id:r,name:r,ref:function(t){e.input=t},type:"checkbox"}))},t})(a.default.Component);t.LabeledCheckboxInput=u;var c=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleRadioChange=function(e){t.props.disabled?e.stopPropagation():t.props.onClick&&("click"!==e.type&&e.key!==i.Key.Enter&&13!==e.charCode||(t.props.onClick(e,t.props.name,t.props.value),e.preventDefault()))},t}return r.__extends(t,e),t.prototype.render=function(){var e,t=this.props,r=t.id,n=t.name,i=t.ariaLabel,l=t.disabled,u=t.value,c=t.checked,d=t.onChange,p=t.labelText,m=t.labelClassName,f=o.default({input__radio:!0,"input__radio--valid":Boolean(c),"input__radio--disabled":Boolean(l)},this.props.className),y=o.default(((e={})[this.props.containerClassName+"--valid"]=!!this.props.containerClassName&&Boolean(c),e),this.props.containerClassName);return a.default.createElement(s,{containerClassName:y,className:m,labelText:p,htmlFor:n,labelAfterElement:!0},a.default.createElement("div",{"aria-label":i||n,role:"radio",tabIndex:0,className:f,onClick:this.handleRadioChange,onKeyUp:this.handleRadioChange}),a.default.createElement("input",{id:r,tabIndex:-1,ref:"radio",type:"radio",name:n,value:u,checked:c,onChange:d,disabled:l}))},t})(a.default.Component);t.LabeledRadioInput=c;var d=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onChange=function(e){t.props.onChange&&t.props.onChange(n.default.findDOMNode(t.input))},t}return r.__extends(t,e),t.prototype.componentDidMount=function(){if(this.props.onChange){var e=n.default.findDOMNode(this.input),t=e.value;t&&t!==this.props.value&&this.props.onChange(e)}},t.prototype.render=function(){var e=this,t=this.props,r=t.name,n=t.className,i=t.containerClassName,l=t.labelClassName,u=t.labelText,c=t.errorText,d=o.default({input__select:!0},n);return a.default.createElement(s,{containerClassName:i,className:l,errorText:c,htmlFor:r,labelText:u},a.default.createElement("select",{className:d,id:r,name:r,onChange:this.onChange,value:this.props.value,ref:function(t){e.input=t}},this.props.children))},t})(a.default.Component);t.LabeledSelectInput=d;var p=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){return a.default.createElement("div",{className:this.props.className},this.props.children,this.props.errors&&this.props.errors.map((function(e){return a.default.createElement("div",{className:e.className},a.default.createElement("label",{className:"input__label--error",htmlFor:e.name},e.text))})))},t})(a.default.Component);t.LabeledInputRow=p})),define("modules/clean/payments/cvv_hint",["require","exports","tslib","react","modules/core/i18n","modules/clean/static_urls"],(function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CvvHint=void 0,a=r.__importStar(a),t.CvvHint=function(){return a.createElement("div",{className:"cvv-hint-view","aria-live":"assertive"},a.createElement("div",null,a.createElement("p",null,n.intl.formatMessage({id:"tx+fwq",defaultMessage:"Your card code is a 3 or 4 digit number that is found in these locations:"})),a.createElement("img",{src:o.static_url("/static/images/cvv2-vflQL_5Od.png"),alt:""}),a.createElement("h5",null,n.intl.formatMessage({id:"e9l+ET",defaultMessage:"Visa/Mastercard"})),a.createElement("p",null,n.intl.formatMessage({id:"arXhRE",defaultMessage:"The security code is a 3 digit number on the back of your credit card. It immediately follows your main card number."})),a.createElement("h5",null,n.intl.formatMessage({id:"t6hm3E",defaultMessage:"American Express"})),a.createElement("p",null,n.intl.formatMessage({id:"yxdGmm",defaultMessage:"The security code is a 4 digit number on the front of your card, just above and to the right of your main card number."}))))}})),define("modules/clean/payments/cvv_hint_container",["require","exports","tslib","react","modules/clean/payments/cvv_hint","modules/clean/react/components/css","modules/clean/react/tooltip"],(function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CvvHintContainer=t.CvvHintContainerView=void 0;var s=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setTooltipRef=function(e){t.tooltipRef=e},t.showTooltip=function(){t.spectrumTooltipRef?t.spectrumTooltipRef.showTooltip():t.tooltipRef._show()},t.hideTooltip=function(){t.spectrumTooltipRef?t.spectrumTooltipRef.hideTooltip():t.tooltipRef._hide()},t}return r.__extends(t,e),t.prototype.render=function(){var e=this.props.targetDimensions;return a.createElement("div",{className:"cvv-hint-container"},a.createElement("div",{style:{left:e.left,top:e.top}},a.createElement(i.Tooltip,{position:i.TooltipPosition.BOTTOM_RIGHT,tooltip_contents:a.createElement(n.CvvHint,null),ref:this.setTooltipRef,is_focusable:!1},a.createElement("div",{style:{width:e.width,height:e.height}}))))},t})((a=r.__importStar(a)).Component);t.CvvHintContainerView=s,t.CvvHintContainer=o.requireCssWithComponent(s,["/static/css/payments/cvv_hint_container-vflDN68mD.css"])})),define("modules/clean/payments/skus/pricing_data",["require","exports","tslib","modules/clean/payments/cash","modules/clean/payments/skus/constants","modules/clean/payments/skus/sku_content","modules/core/exception","modules/core/i18n"],(function(e,t,r,a,n,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PricingDataFromPlan=t.PricingDataOrion=t.PricingDataException=t.PricingDataFactory=void 0;var l=(function(){function e(){}return e.createFromState=function(e,t){var r=e.formData,a=e.pricingState,o=n.ProductPlanType.NEW_STANDARD,i=r.productPlanType.formattedValue||t.productPlanType||o,s=a.discountInfo&&a.discountInfo.discountPercentage;if(0!==a.subChangePlans.plans.length){var l=a.subChangePlans.withProductPlanType(i),c=l.yearly().plans.pop(),m=l.monthly().plans.pop(),f=Math.min(c&&c.nextBillingSummary.totalLicenses,m&&m.nextBillingSummary.totalLicenses);return m&&c?isNaN(f)||f<=0?u.NO_LICENSES:new d(a.subChangePlans,i,s):u.NO_PRODUCT_TYPE}switch(i){case n.ProductPlanType.NEW_STANDARD:return new p(t.orionPlanInfo.standard,s);case n.ProductPlanType.ADVANCED:return new p(t.orionPlanInfo.advanced,s);default:return void u.reportException({cause:u.NO_PRODUCT_TYPE,message:"Unable to calculate pricing data for unsupported product type",extra:{productPlanType:i}})}},e})();t.PricingDataFactory=l;var u=(function(){function e(){}return e.reportException=function(e){var t=e.cause,r=e.message,a=e.extra;i.reportStack(t+": "+r,{tags:["BusinessPaymentPages","PricingData"],severity:i.SEVERITY.CRITICAL,exc_extra:a})},e.NO_DATA_SOURCE="No data source",e.NO_LICENSES="No licenses",e.NO_TRANSITION="No transition",e.NO_PRODUCT_TYPE="No product type",e.INCOMPLETE_DATA_SOURCE="Incomplete data source",e.notifyErrorMessage=s.intl.formatMessage({id:"0UBmAV",defaultMessage:"Weâ€™re having some trouble right now. Please try again later or contact sales."}),e.notifyErrorMessagePersonal=s.intl.formatMessage({id:"KyRk6M",defaultMessage:"Weâ€™re having some trouble right now. Please try again later."}),e})();t.PricingDataException=u;var c=(function(){function e(e){this.promoDiscountPercentage=e||0}return Object.defineProperty(e.prototype,"doesTaxApply",{get:function(){var e,t;return Boolean(null===(t=null===(e=this.getYearlyPlanData())||void 0===e?void 0:e.tvm)||void 0===t?void 0:t.doesTaxApply)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baseMonthlyPrice",{get:function(){var e,t;return null===(t=null===(e=this.getMonthlyPlanData())||void 0===e?void 0:e.nextBillingSummary)||void 0===t?void 0:t.base},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baseYearlyPrice",{get:function(){var e,t;return null===(t=null===(e=this.getYearlyPlanData())||void 0===e?void 0:e.nextBillingSummary)||void 0===t?void 0:t.base},enumerable:!1,configurable:!0}),e.prototype.getPromoDiscount=function(){return this.promoDiscountPercentage},e.prototype.getTotalYearlyDiscountWithPromoInPercent=function(){var e=this.getMonthlyPerUserPrice();this.promoDiscountPercentage>0&&(e=this.baseMonthlyPrice.divide(this.getNumLicenses()));var t=e.subtract(this.getYearlyPerUserPrice());return Math.round(100*t.divide(e.amount).amount)},e.prototype.getYearlyPerUserPrice=function(e){void 0===e&&(e=!1);var t=this.getYearlyPrice(e),r=this.getNumLicenses();return r>0?t.divide(12).divide(r):t},e.prototype.getMonthlyPerUserPrice=function(e){void 0===e&&(e=!1);var t=this.getMonthlyPrice(e),r=this.getNumLicenses();return r>0?t.divide(r):t},Object.defineProperty(e.prototype,"monthlyPromoDiscount",{get:function(){return this.getMonthlyPriceWithoutPromo(!0).multiply(this.promoDiscountPercentage).divide(100)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"yearlyPromoDiscount",{get:function(){return this.getYearlyPriceWithoutPromo(this.doesTaxApply).multiply(this.promoDiscountPercentage).divide(100)},enumerable:!1,configurable:!0}),e.prototype.getMonthlyPriceWithoutPromo=function(e){return void 0===e&&(e=!1),this.promoDiscountPercentage>0?this.baseMonthlyPrice:this.getMonthlyPrice(e)},e.prototype.getYearlyPriceWithoutPromo=function(e){return void 0===e&&(e=!1),this.promoDiscountPercentage>0?this.baseYearlyPrice:this.getYearlyPrice(e)},e.prototype.getYearlySavingsWithoutPromo=function(){var e=this.getMonthlyPriceWithoutPromo(!0),t=this.getYearlyPriceWithoutPromo(!0);return e.multiply(12).subtract(t)},e.prototype.getYearlySavingsPercentage=function(){var e=this.getYearlySavingsWithoutPromo(),t=this.getMonthlyPriceWithoutPromo(!0).multiply(12),r=e.divide(t.amount).multiply(100);return Math.round(r.amount)},e.prototype.getTotalLicensePriceData=function(e){var t=this.getNumLicenses(),r=this.getMonthlyPriceWithoutPromo(!0);return e&&(r=r.multiply(12)),{numLicenses:t,totalLicensePrice:r}},e.prototype.getAnnualDiscountData=function(){return{savingsPercentage:this.getYearlySavingsPercentage(),savingsAmount:this.getYearlySavingsWithoutPromo()}},e.prototype.getPromoDiscountData=function(e){return{discountPercentage:this.promoDiscountPercentage,discountAmount:e?this.yearlyPromoDiscount:this.monthlyPromoDiscount}},e})(),d=(function(e){function t(t,r,a){var n=e.call(this,a)||this,o=t.withProductPlanType(r),i=o.yearly().plans.pop(),s=o.monthly().plans.pop();if(n.yearlySubChangePlan=i,n.monthlySubChangePlan=s,n.numLicenses=Math.min(i&&i.nextBillingSummary.totalLicenses,s&&s.nextBillingSummary.totalLicenses),!n.monthlySubChangePlan||!n.yearlySubChangePlan){var l=n.monthlySubChangePlan?"yearly":"monthly";u.reportException({cause:u.NO_TRANSITION,message:"Unable to find a "+l+" subChangePlan in PricingDataOrion",extra:{subChangePlans:t}})}return(isNaN(n.numLicenses)||n.numLicenses<=0)&&u.reportException({cause:u.NO_LICENSES,message:"Number of licenses is 0 in PricingDataOrion",extra:{yearlySubChangePlan:n.yearlySubChangePlan}}),n}return r.__extends(t,e),t.prototype.getPlanDisplayName=function(){var e=this.yearlySubChangePlan||this.monthlySubChangePlan;if(!e)return"";var t=e.finalSubState.plan;return t?t.displayName():""},t.prototype.getPlanDisplaySpace=function(){var e=this.yearlySubChangePlan||this.monthlySubChangePlan;if(!e)return"";var t=e.finalSubState.plan;return t?t.displaySpace():""},t.prototype.getMonthlyPlanData=function(){return this.monthlySubChangePlan},t.prototype.getYearlyPlanData=function(){return this.yearlySubChangePlan},t.prototype.getMinLicensesLimit=function(e){return void 0===e&&(e=3),this.yearlySubChangePlan?this.yearlySubChangePlan.finalSubState.minLicenseLimitForPlan||e:this.monthlySubChangePlan&&this.monthlySubChangePlan.finalSubState.minLicenseLimitForPlan||e},t.prototype.getNumLicenses=function(){return this.numLicenses},t.prototype.getYearlyPrice=function(e){var t;void 0===e&&(e=!1);var r=new a.Cash(0,"USD");if(null===(t=this.yearlySubChangePlan)||void 0===t?void 0:t.tvm){var n=this.yearlySubChangePlan,o=n.tvm,i=n.nextBillingSummary;if(r=this.yearlySubChangePlan.isOnTrial?(null==i?void 0:i.total)||r:o.getBilledPrice(),e&&o.doesTaxApply){var s=o.getTaxPrice();r=r.subtract(s)}}return r},t.prototype.getMonthlyPrice=function(e){var t;void 0===e&&(e=!1);var r=new a.Cash(0,"USD");if(null===(t=this.monthlySubChangePlan)||void 0===t?void 0:t.tvm){var n=this.monthlySubChangePlan,o=n.tvm,i=n.nextBillingSummary;if(r=this.monthlySubChangePlan.isOnTrial?(null==i?void 0:i.total)||r:o.getBilledPrice(),e&&o.doesTaxApply){var s=o.getTaxPrice();r=r.subtract(s)}}return r},t})(c);t.PricingDataOrion=d;var p=(function(e){function t(t,r){var a=e.call(this,r)||this;return a.planInfo=t,a}return r.__extends(t,e),t.prototype.getPlanDisplayName=function(){return this.planInfo.skuContent.name},t.prototype.getPlanDisplaySpace=function(){return o.SkuContentClient.deserialize(this.planInfo.skuContent).spaceShortFormTb()},t.prototype.getMonthlyPlanData=function(){},t.prototype.getYearlyPlanData=function(){},t.prototype.getMinLicensesLimit=function(e){return void 0===e&&(e=3),this.planInfo.minLicenseCount||e},t.prototype.getNumLicenses=function(){return this.getMinLicensesLimit()},t.disallowTaxCalculations=function(e){e||u.reportException({cause:u.INCOMPLETE_DATA_SOURCE,message:"Cannot calculate price with tax from plan info",extra:{}})},t.prototype.getYearlyPrice=function(e){return void 0===e&&(e=!1),t.disallowTaxCalculations(e),a.Cash.fromObject(this.planInfo.yearlyPrice)},t.prototype.getMonthlyPrice=function(e){return void 0===e&&(e=!1),t.disallowTaxCalculations(e),a.Cash.fromObject(this.planInfo.monthlyPrice)},t})(c);t.PricingDataFromPlan=p})),define("modules/clean/react/payments/business/state/business_state",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BillingFormSteps=t.BuyFormSteps=t.TryFormSteps=t.PAYMENT_INFO_STEP=t.PLAN_SELECTION_STEP=t.ACCOUNT_INFO_OR_CHECKOUT_STEP=t.SKU_SELECTION_STEP=t.TEAM_RESTORE_STEP=t.serverPropsToFields=t.fieldsToServerProps=void 0,t.fieldsToServerProps={accountHolderName:"owner_name",adyenEncryptedCard:"adyen_encrypted_card",encryptedCardForNetworkToken:"encrypted_card_for_network_token",bin:"bin",browserInfo:"browser_info",threeDsData:"three_ds_data",captcha:"recaptcha_response",companySize:"company_size",countryCode:"country_code",cpf:"cpf",cpfName:"cpf_name",email:"email",emailsToInvite:"emails_to_invite",firstName:"fname",iban:"iban",idealBankId:"bank_id",idealBankName:"bank_name",lastName:"lname",mandateSigned:"mandate_signed",marketingOptIn:"marketing_opt_in",nonce:"nonce",numberOfUsers:"team_num_users",password:"password",paymentMethod:"payment_method",payPalNonce:"paypal_nonce",schedule:"schedule_id",scheduleId:"schedule_id",selectedUser:"selected_user",teamName:"team_name",teamPhone:"team_phone",termsAndService:"tos_agree",vat:"vat",zipCode:"zip",city:"city",phone:"phone",name:"name",address:"address",applePayToken:"apple_pay_token"},t.serverPropsToFields={};for(var r=0,a=Object.keys(t.fieldsToServerProps);r<a.length;r++){var n=a[r],o=t.fieldsToServerProps[n];o&&(t.serverPropsToFields[o]=n)}t.TEAM_RESTORE_STEP=-1,t.SKU_SELECTION_STEP=0,t.ACCOUNT_INFO_OR_CHECKOUT_STEP=1,t.PLAN_SELECTION_STEP=2,t.PAYMENT_INFO_STEP=3,t.TryFormSteps=function(){return{skuSelectionStep:t.SKU_SELECTION_STEP,accountInfoStep:t.ACCOUNT_INFO_OR_CHECKOUT_STEP,planSelectionStep:t.PLAN_SELECTION_STEP,paymentInfoStep:t.PAYMENT_INFO_STEP}},t.BuyFormSteps=function(){return{skuSelectionStep:t.SKU_SELECTION_STEP,checkoutStep:t.ACCOUNT_INFO_OR_CHECKOUT_STEP}},t.BillingFormSteps=function(){return{teamRestoreStep:t.TEAM_RESTORE_STEP,skuSelectionStep:t.SKU_SELECTION_STEP,checkoutStep:t.ACCOUNT_INFO_OR_CHECKOUT_STEP}}})),define("modules/clean/react/payments/buy/components/inputs/inputs",["require","exports","tslib","react","react-dom","classnames","ts-key-enum"],(function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LabeledInputRow=t.LabeledSelectInput=t.LabeledRadioInput=t.LabeledCheckboxInput=t.LabeledTextInput=t.LabeledInput=void 0,a=r.__importDefault(a),n=r.__importDefault(n),o=r.__importDefault(o);var s=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){var e=o.default({input__label:!0,"input__label--before":Boolean(!this.props.labelAfterElement)},this.props.className),t=this.props.containerClassName,r=a.default.createElement("label",{className:e,htmlFor:this.props.htmlFor},this.props.labelText),n=null;this.props.labelAfterElement&&(n=r,r=null);var i,s=null;return this.props.secondaryLabel&&(s=a.default.createElement("label",{className:"input__label input__label--secondary",htmlFor:this.props.htmlFor},this.props.secondaryLabel)),this.props.errorText&&(i=a.default.createElement("label",{className:"input__label--error",htmlFor:this.props.htmlFor},this.props.errorText)),a.default.createElement("div",{className:t},r,this.props.children,n,s,i)},t})(a.default.Component);t.LabeledInput=s;var l=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onChange=function(e){t.props.onChange&&t.props.onChange(n.default.findDOMNode(t.input))},t.onBlur=function(e){t.props.onBlur&&t.props.onBlur(n.default.findDOMNode(t.input))},t.onFocus=function(e){t.props.onFocus&&t.props.onFocus(t.input)},t}return r.__extends(t,e),t.prototype.componentDidMount=function(){if(this.props.onChange){var e=n.default.findDOMNode(this.input),t=e.value;t&&t!==this.props.value&&this.props.onChange(e)}},t.prototype.render=function(){var e=this,t=this.props,r=t.name,n=t.autocomplete,i=t.className,l=t.disabled,u=t.labelText,c=t.secondaryLabel,d=t.errorText,p=t.hasError,m=t.value,f=t.maxLength,y=t.containerClassName,h=t.placeholder,g=this.props.type||"text",_=o.default({input__text:!0,"input__text--error":Boolean(d)||p},this.props.inputClassName);return a.default.createElement(s,{className:i,containerClassName:y,labelText:u,htmlFor:r,errorText:d,secondaryLabel:c},a.default.createElement("input",{autoComplete:n,className:_,type:g,placeholder:h,name:r,id:r,ref:function(t){e.input=t},value:m,disabled:l,onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus,maxLength:f}))},t})(a.default.Component);t.LabeledTextInput=l;var u=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleCheckboxChange=function(e){t.props.onClick&&("click"!==e.type&&e.key!==i.Key.Enter&&13!==e.charCode&&" "!==e.key&&32!==e.charCode||(t.props.onClick(n.default.findDOMNode(t.input)),e.preventDefault()))},t.onBlur=function(){t.props.onBlur&&t.props.onBlur(n.default.findDOMNode(t.input))},t.preventSpacebarScrolling=function(e){" "!==e.key&&32!==e.charCode||e.preventDefault()},t}return r.__extends(t,e),t.prototype.componentDidMount=function(){if(this.props.onClick){var e=n.default.findDOMNode(this.input),t=e.checked;t&&t!==this.props.checked&&this.props.onClick(e)}},t.prototype.render=function(){var e=this,t=this.props,r=t.name,n=t.className,i=t.containerClassName,l=t.disabled,u=t.labelText,c=t.labelClassName,d=t.errorText,p=t.checked,m=o.default({input__checkbox:!0,"input__checkbox--valid":p,"input__checkbox--disabled":Boolean(l)},n);return a.default.createElement(s,{containerClassName:i,className:c,errorText:d,htmlFor:r,labelAfterElement:!0,labelText:u},a.default.createElement("div",{"aria-checked":p,"aria-labelledby":r,tabIndex:0,role:"checkbox",className:m,onClick:this.handleCheckboxChange,onKeyDown:this.preventSpacebarScrolling,onKeyUp:this.handleCheckboxChange,onBlur:this.onBlur}),a.default.createElement("input",{readOnly:!0,"aria-hidden":!0,tabIndex:-1,checked:p,disabled:l,id:r,name:r,ref:function(t){e.input=t},type:"checkbox"}))},t})(a.default.Component);t.LabeledCheckboxInput=u;var c=(function(e){function t(t){var r=e.call(this,t)||this;return r.focus=function(){null!==r.radio.current&&r.radio.current.focus()},r.handleClick=function(e){r.props.disabled?e.stopPropagation():r.focus()},r.handleRadioChange=function(e){r.props.disabled?e.stopPropagation():r.props.onClickOrChange&&(r.props.onClickOrChange(e,r.props.inputId,r.props.value),e.preventDefault())},r.handleRadioKeyUp=function(e){if(r.props.disabled)e.stopPropagation();else{(["Tab","ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(e.key)||[9,37,38,39,40].includes(e.keyCode))&&r.props.onClickOrChange&&(e.preventDefault(),r.focus(),r.props.onClickOrChange(e,r.props.inputId,r.props.value))}},r.radio=a.default.createRef(),r}return r.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.name,r=e.inputId,n=e.ariaLabelId,i=e.disabled,s=e.value,l=e.checked,u=e.labelSpan,c=e.labelClassName,d=o.default({input__radio:!0,"input__radio--valid":Boolean(l),"input__radio--disabled":Boolean(i)},this.props.className),p=l?0:-1;return a.default.createElement("label",{htmlFor:s,className:c},a.default.createElement("span",{className:d,onClick:this.handleClick},a.default.createElement("input",{"aria-labelledby":n,ref:this.radio,type:"radio",name:t,id:r,value:s,tabIndex:p,"aria-checked":Boolean(l),checked:Boolean(l),onChange:this.handleRadioChange,onKeyUp:this.handleRadioKeyUp,disabled:i}),u))},t})(a.default.Component);t.LabeledRadioInput=c;var d=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onChange=function(e){t.props.onChange&&t.props.onChange(n.default.findDOMNode(t.input))},t.onBlur=function(){t.props.onBlur&&t.props.onBlur(n.default.findDOMNode(t.input))},t}return r.__extends(t,e),t.prototype.componentDidMount=function(){if(this.props.onChange){var e=n.default.findDOMNode(this.input),t=e.value;t&&t!==this.props.value&&this.props.onChange(e)}},t.prototype.render=function(){var e=this,t=this.props,r=t.name,n=t.className,i=t.containerClassName,l=t.hasError,u=t.labelClassName,c=t.labelText,d=t.errorText,p=t.autoComplete,m=o.default({input__select:!0,"input__select--error":Boolean(d)||l},n);return a.default.createElement(s,{containerClassName:i,className:u,errorText:d,htmlFor:r,labelText:c},a.default.createElement("select",{className:m,id:r,name:r,onChange:this.onChange,onBlur:this.onBlur,value:this.props.value,autoComplete:p,ref:function(t){e.input=t}},this.props.children))},t})(a.default.Component);t.LabeledSelectInput=d;var p=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){return a.default.createElement("div",{className:this.props.className},this.props.children,this.props.errors&&this.props.errors.map((function(e,t){return a.default.createElement("div",{className:e.className,key:e.name+"-"+t},a.default.createElement("label",{className:"input__label--error",htmlFor:e.name},e.text))})))},t})(a.default.Component);t.LabeledInputRow=p})),define("modules/clean/react/payments/checkout/components/inputs/labeled_checkbox_input",["require","exports","tslib","react","react-dom","modules/clean/react/payments/checkout/components/inputs/labeled_input"],(function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LabeledCheckboxInput=void 0,a=r.__importDefault(a),n=r.__importStar(n);var i=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onBlur=function(){t.props.onBlur&&t.props.onBlur(n.findDOMNode(t.input))},t}return r.__extends(t,e),t.prototype.onChange=function(e){this.props.onChange&&this.props.onChange(n.findDOMNode(this.input))},t.prototype.componentDidMount=function(){if(this.props.onChange){var e=n.findDOMNode(this.input),t=e.checked;t&&t!==this.props.checked&&this.props.onChange(e)}},t.prototype.render=function(){var e=this,t=this.props,r=t.name,n=t.className,i=t.labelText,s=t.errorText,l=t.errorHTML,u=t.checked,c=t.disabled;return a.default.createElement(o.LabeledInput,{className:n,errorHTML:l,errorText:s,htmlFor:r,labelAfterElement:!0,labelText:i},a.default.createElement("input",{checked:u,disabled:c,id:r,name:r,onChange:this.onChange.bind(this),onBlur:this.onBlur,ref:function(t){e.input=t},type:"checkbox"}))},t})(a.default.Component);t.LabeledCheckboxInput=i})),define("modules/clean/react/payments/checkout/components/inputs/labeled_input",["require","exports","tslib","classnames","dompurify","react","modules/core/browser_detection","modules/clean/react/tooltip","modules/clean/react/sprite"],(function(e,t,r,a,n,o,i,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LabeledInput=void 0,a=r.__importDefault(a),n=r.__importStar(n),o=r.__importDefault(o),i=r.__importStar(i);var u=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){var e=a.default({"input__label--errormodal":Boolean(this.props.errorText),"input-with-inline-tooltip":Boolean(this.props.inlineTooltipText)},this.props.className,"label-input","input__label"),t=o.default.createElement("label",{className:"label "+(this.props.labelClass?this.props.labelClass:""),htmlFor:this.props.htmlFor},this.props.labelText),r=null;this.props.labelAfterElement&&(r=t,t=null);var u=null;u=this.props.rightLabelElement?o.default.createElement("div",{className:"grid__item grid--x-bookend"},t,o.default.createElement("div",null,this.props.rightLabelElement)):t;var c=null;this.props.errorText?c=this.props.errorText:this.props.errorHTML&&(c=o.default.createElement("span",{dangerouslySetInnerHTML:{__html:n.sanitize(this.props.errorHTML)}}));var d=o.default.createElement("label",{className:"error-message",htmlFor:this.props.htmlFor},c),p=null;if(this.props.inlineTooltipText){var m=i.is_supported_mobile_browser()?s.TooltipPosition.BOTTOM:s.TooltipPosition.RIGHT,f=o.default.createElement(s.Tooltip,{tooltip_classname:"input__inline-tooltip-bubble",position:m,tooltip_contents:this.props.inlineTooltipText},o.default.createElement(l.Sprite,{group:"web",name:"info",alt:""}));p=o.default.createElement("span",{className:"grid__item grid--y-middle input__tooltip--inline"},f)}return o.default.createElement("div",{className:e},u,p,this.props.children,r,d)},t})(o.default.Component);t.LabeledInput=u})),define("modules/clean/react/payments/checkout/components/inputs/labeled_text_input",["require","exports","tslib","classnames","react","react-dom","modules/clean/react/payments/checkout/components/inputs/labeled_input"],(function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BizLabeledTextInput=void 0,a=r.__importDefault(a),n=r.__importDefault(n),o=r.__importStar(o);var s=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onBlur=function(e){t.props.onBlur&&t.props.onBlur(o.findDOMNode(t.input))},t.onFocus=function(e){t.props.onFocus&&t.props.onFocus(o.findDOMNode(t.input))},t.onChange=function(e){t.props.onChange&&t.props.onChange(o.findDOMNode(t.input))},t}return r.__extends(t,e),t.prototype.componentDidMount=function(){if(this.props.onChange){var e=o.findDOMNode(this.input),t=e.value;t&&t!==this.props.value&&this.props.onChange(e)}},t.prototype.render=function(){var e=this,t=this.props,r=t.autoComplete,o=t.className,s=t.disabled,l=t.errorHTML,u=t.errorText,c=t.inlineTooltipText,d=t.labelAfterElement,p=t.labelClass,m=t.labelText,f=t.maxLength,y=t.name,h=t.placeholder,g=t.value,_=this.props.type||"text",v=a.default({input__text:!0,"input__text--errormodal":Boolean(u)},this.props.inputClassName);return n.default.createElement(i.LabeledInput,{className:o,errorHTML:l,errorText:u,htmlFor:y,inlineTooltipText:c,labelAfterElement:d,labelClass:p,labelText:m},n.default.createElement("input",{autoComplete:r,className:v,type:_,name:y,id:y,ref:function(t){e.input=t},value:null===g?"":g,disabled:s,onBlur:this.onBlur,onChange:this.onChange,onFocus:this.onFocus,maxLength:f,placeholder:h}))},t})(n.default.Component);t.BizLabeledTextInput=s})),define("modules/clean/react/payments/checkout/components/inputs/labeled_select_input",["require","exports","tslib","react","react-dom","modules/clean/react/payments/checkout/components/inputs/labeled_input"],(function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BizLabeledSelectInput=void 0,a=r.__importDefault(a),n=r.__importStar(n);var i=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.onChange=function(e){this.props.onChange&&this.props.onChange(n.findDOMNode(this.input))},t.prototype.onClick=function(e){this.props.onClick&&this.props.onClick(n.findDOMNode(this.input))},t.prototype.componentDidMount=function(){if(this.props.onChange){var e=n.findDOMNode(this.input),t=e.value;t&&t!==this.props.value&&this.props.onChange(e)}},t.prototype.render=function(){var e=this,t=this.props,r=t.name,n=t.className,i=t.labelClass,s=t.labelText,l=t.rightLabelElement,u=t.errorText,c=t.errorHTML,d=t.autoComplete;return a.default.createElement(o.LabeledInput,{className:n,errorHTML:c,errorText:u,labelClass:i,htmlFor:r,labelText:s,rightLabelElement:l},a.default.createElement("select",{autoComplete:d,className:"option-selector",id:r,name:r,onChange:this.onChange.bind(this),onClick:this.onClick.bind(this),value:this.props.value,ref:function(t){e.input=t}},this.props.children))},t})(a.default.Component);t.BizLabeledSelectInput=i})),define("modules/clean/react/payments/checkout/components/payment_method_form/address_form",["require","exports","tslib","react","modules/core/i18n","modules/clean/react/payments/buy/components/inputs/inputs","modules/clean/react/payments/checkout/components/inputs/labeled_text_input","modules/clean/react/payments/common/form_value_helpers","modules/clean/react/payments/checkout/components/inputs/labeled_select_input","modules/clean/react/payments/common/constants"],(function(e,t,r,a,n,o,i,s,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AddressForms=void 0;var c=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onCountryCodeChange=function(e){t.props.actions.updateCountryCode(e.value)},t.onZipCodeBlur=function(e){t.props.actions.showFormFieldErrors(["zipCode"],"ZipCodeBlur"),t.props.actions.blurZipCode(e.value)},t.onZipCodeChange=function(e){t.props.actions.updateZipCode(e.value)},t}return r.__extends(t,e),t.prototype.renderCountrySelector=function(e){var t=this,r="grid__item--2-3";e?r="grid__item":this.props.isInModal||(r="grid__item--fluid grid__item--margin-right--1-24");var i=this.props.countryList.map((function(e){var r=e[0],n=e[1];return a.default.createElement("option",{key:"location-"+r,value:r,"aria-selected":r===t.props.formData.countryCode.formattedValue},n)}));return 1==this.props.businessStyling?a.default.createElement(l.BizLabeledSelectInput,{autoComplete:"country",className:r,labelText:n.intl.formatMessage({id:"1SPrvR",defaultMessage:"Country"}),name:"country_code",onChange:this.onCountryCodeChange.bind(this),value:this.props.formData.countryCode.rawValue},i):a.default.createElement(o.LabeledSelectInput,{autoComplete:"country",className:"payment-info__country",containerClassName:r,labelText:n.intl.formatMessage({id:"1SPrvR",defaultMessage:"Country"}),name:"country_code",onChange:this.onCountryCodeChange,value:this.props.formData.countryCode.rawValue},i)},t.prototype.zipCodeErrorString=function(){var e=this.props.formData.zipCode;return!s.FormValueHelper.isValid(e)&&e.showError?"US"===this.props.formData.countryCode.formattedValue?n.intl.formatMessage({id:"kWjJlf",defaultMessage:"Please enter a valid billing ZIP code."}):u.ZipCodeErrorMessage:""},t.prototype.renderBillingFields=function(){return!0===this.props.businessStyling?a.default.createElement(a.default.Fragment,null,this.renderCountrySelector(!1),this.renderZipCodeInput()):a.default.createElement(o.LabeledInputRow,{className:"payment-info__location grid__item grid--x-bookend grid--y-top"},this.renderCountrySelector(!1),this.renderZipCodeInput())},t.prototype.renderZipCodeInput=function(e){void 0===e&&(e=!1);var t=n.intl.formatMessage({id:"5kJrVX",defaultMessage:"Postal Code"}),r="US"===this.props.formData.countryCode.formattedValue?n.intl.formatMessage({id:"ciLB6A",defaultMessage:"Billing ZIP"}):t,s=!this.props.paymentSpec.allow_zip_code_for_country(this.props.formData.countryCode.formattedValue),l=this.props.formData.zipCode.errorState&&this.props.formData.zipCode.showError;if(!0===this.props.businessStyling)return a.default.createElement(i.BizLabeledTextInput,{autoComplete:"postal-code",className:"billing-zip payment-info__zip grid__item grid__item--7-24",disabled:s,errorText:this.zipCodeErrorString(),errorHTML:this.props.formData.zipCode.serverError,labelText:r,name:"zip",onChange:this.onZipCodeChange.bind(this),value:this.props.formData.zipCode.rawValue,onBlur:this.onZipCodeBlur.bind(this)});var u=e?"grid__item--fluid grid__item--margin-right--1-24":"grid__item--fluid",c=this.zipCodeErrorString();return a.default.createElement(o.LabeledTextInput,{className:"payment-info__zip",containerClassName:u,name:"zip",autocomplete:"postal-code",labelText:r,value:this.props.formData.zipCode.rawValue,hasError:Boolean(l),disabled:s,onBlur:this.onZipCodeBlur,onChange:this.onZipCodeChange,errorText:c})},t.prototype.render=function(){return this.renderBillingFields()},t})((a=r.__importDefault(a)).default.Component);t.AddressForms=c})),define("modules/clean/react/payments/checkout/components/payment_method_form/credit_card_frame",["require","exports","tslib","react","react-dom","modules/clean/deprecated_ajax/ajax_jquery","classnames","modules/core/exception","modules/core/notify","modules/core/i18n","modules/clean/payments/cvv_hint_container","modules/clean/react/payments/common/form/actions/actions","modules/clean/payments/payment_form/iframe_rpc","modules/clean/payments/three_ds_helper","modules/clean/metrics/index","apex-metrics/index"],(function(e,t,r,a,n,o,i,s,l,u,c,d,p,m,f,y){"use strict";function h(){var e={};return e.promise=new Promise((function(t,r){e.resolve=t,e.reject=r})),e}Object.defineProperty(t,"__esModule",{value:!0}),t.CreditCardFrame=void 0,a=r.__importDefault(a),n=r.__importStar(n),o=r.__importStar(o),i=r.__importDefault(i),s=r.__importStar(s);var g=(function(e){function t(t){var a=e.call(this,t)||this;return a.timeInitialized=null,a.timeBeforeFetchBraintreeToken=null,a.timeBeforeFetchAdyenKey=null,a.timeBeforeTokenize=null,a.setCvvHintContainerRef=function(e){a.cvvHintContainerRef=e},a.setIframeRef=function(e){a.iframeRef=e},a.submitThreeDsChallenge=function(){a.props.submitForm(d.SubmitFormTriggerType.ThreeDsChallenge)},a.submitThreeDsFingerprint=function(){a.props.submitForm(d.SubmitFormTriggerType.ThreeDsFingerprint)},a.showTooltip=function(e,t){if("cvv"===e){var o=a.iframeRef.getBoundingClientRect(),i=n.findDOMNode(a.cvvHintContainerRef).getBoundingClientRect(),s=o.left-i.left,l=o.top-i.top,u={left:t.left+s,top:t.top+l,width:t.width,height:t.height};a.setState((function(e){return r.__assign(r.__assign({},e),{cvvHintDimensions:u})})),a.cvvHintContainerRef&&a.cvvHintContainerRef.getWrappedComponent().showTooltip()}},a.hideTooltip=function(e){"cvv"===e&&a.cvvHintContainerRef&&a.cvvHintContainerRef.getWrappedComponent().hideTooltip()},a.handle3DsMessage=function(e){a.threeDsHandler&&a.threeDsHandler.handle3DsMessage(e)},a.iframeReady=!1,a.state={cvvHintDimensions:{left:0,top:0,width:0,height:0},iframeFormHeight:null},a.timeInitialized=Date.now(),a}return r.__extends(t,e),t.prototype.componentDidMount=function(){if(this.logLatency(this.timeInitialized,"componentDidMount"),this.isSeleniumChangesTest())return this.props.actions.updateNonce("fake-valid-nonce",{ccn:{error:!1},ccode:{error:!1},ccexp:{error:!1}}),void this.props.actions.updateBIN("457173");this.braintreeTokenLoaded=h(),this.adyenKeyLoaded=h(),this.iFrameRpcListener=new p.IFrameRpcListener(this.getCCIframeOrigin(),this);var e=frames.cc_iframe.window;this.iframeMessageTransport=new p.IFrameRpcTransport(this.props.iframeUrl,e),this.pingIframe()},t.prototype.componentWillUnmount=function(){this.isSeleniumChangesTest()||this.iFrameRpcListener.removeMessageListener()},t.prototype.componentWillReceiveProps=function(e){e.nonce.showError&&this.showFormErrors()},t.prototype.render=function(){var e=this.props,t=e.hidden,r=e.iframeUrl,n=i.default({grid__item:!0,hidden:t}),o=i.default("iframe-holder iframe-holder--full-width",{"iframe-holder--responsive":this.props.isResponsive}),s={};return this.props.getHeightFromIframe&&(s={height:this.state.iframeFormHeight}),a.default.createElement("div",{id:"iframe-holder",className:n},a.default.createElement(c.CvvHintContainer,{targetDimensions:this.state.cvvHintDimensions,ref:this.setCvvHintContainerRef}),a.default.createElement("div",{className:o,style:s,ref:this.setIframeRef},a.default.createElement("iframe",{src:r,name:"cc_iframe",frameBorder:"0",title:u.intl.formatMessage({id:"ljVFCM",defaultMessage:"Form for entering credit card information"})})))},t.prototype.isSeleniumChangesTest=function(){return""===this.props.iframeUrl&&!1},t.prototype.getCCIframeOrigin=function(){var e=this.props.iframeUrl.split("/");return e[0]+"//"+e[2]},t.prototype.startServerTimeUpdate=function(){var e=this,t=function(t,r,a){var n=JSON.parse(t);if(n&&n.hasOwnProperty("server_time")){var o={serverTime:n.server_time};e.iframeMessageTransport.sendMessage(p.IFrameRpc.SET_SERVER_TIME,o)}e.startServerTimeUpdate()},r=function(t,r,a){e.startServerTimeUpdate()};setTimeout((function(){o.BackgroundRequest({url:"/credit_card_secrets/server_time",type:"GET",success:t,error:r})}),216e5)},t.prototype.encryptWithAdyen=function(){var e=this;return this.adyenEncrypting?this.adyenEncryptionDeferred.promise:(this.adyenEncrypting=!0,this.adyenEncryptionDeferred=h(),this.isSeleniumChangesTest()?this.submitEncryptedAdyenCard("brisket"):this.adyenKeyLoaded.promise.then((function(t){e.iframeMessageTransport.sendMessage(p.IFrameRpc.ENCRYPT_WITH_ADYEN)})),this.adyenEncryptionDeferred.promise)},t.prototype.encryptForNetworkToken=function(){return this.networkTokenEncrypting?this.networkTokenEncryptionDeferred.promise:(this.networkTokenEncrypting=!0,this.networkTokenEncryptionDeferred=h(),this.isSeleniumChangesTest()?this.submitEncryptedCardForNetworkToken("mastercard","test_for_network_token"):this.iframeMessageTransport.sendMessage(p.IFrameRpc.ENCRYPT_FOR_NETWORK_TOKEN),this.networkTokenEncryptionDeferred.promise)},t.prototype.tokenizeWithBraintree=function(){var e=this;return this.braintreeTokenizing?this.braintreeTokenizingDeferred.promise:(this.braintreeTokenizing=!0,this.braintreeTokenizingDeferred=h(),this.isSeleniumChangesTest()?this.submitTokenized("fake-valid-nonce","457173"):this.braintreeTokenLoaded.promise.then((function(t){e.iframeMessageTransport.sendMessage(p.IFrameRpc.TOKENIZE)})),this.braintreeTokenizingDeferred.promise)},t.prototype.tokenize=function(){return this.timeBeforeTokenize=Date.now(),this.encryptWithAdyen(),this.encryptForNetworkToken(),Promise.all([this.tokenizeWithBraintree()]).then((function(e){for(var t=!0,r=0,a=e;r<a.length;r++){var n=a[r];t=t&&n}return t}))},t.prototype.submitTokenized=function(e,t){this.props.actions.updateNonce(e),this.props.actions.updateBIN(t),this.braintreeTokenizing=!1,this.braintreeTokenizingDeferred.resolve(!0),this.logLatency(this.timeBeforeTokenize,"BrainTreeEncryption")},t.prototype.submitEncryptedAdyenCard=function(e){var t=m.collectBrowserInfo();t&&this.props.actions.updateBrowserInfo(t),this.props.actions.updateAdyenEncryptedCard(e),this.adyenEncrypting=!1,this.adyenEncryptionDeferred.resolve(!0),this.logLatency(this.timeBeforeTokenize,"AdyenEncryption")},t.prototype.submitEncryptedCardForNetworkToken=function(e,t){this.props.actions.updateEncryptedCardForNetworkToken(e,t),this.networkTokenEncrypting=!1,this.networkTokenEncryptionDeferred.resolve(!0),this.logLatency(this.timeBeforeTokenize,"NetworkTokenEncryption")},t.prototype.logLatency=function(e,t){if(e)try{var r=Date.now()-e;f.getMetricsReporter().createStats({ns:"payments_frontend",name:"iframe_latency"},{category:t}).recordDuration(r,y.TimeUnit.MILLISECONDS)}catch(e){}},t.prototype.originReady=function(e){var t=this;this.iframeReady||(this.iframeReady=!0,this.logLatency(this.timeInitialized,"iframeReady"),this.isSeleniumChangesTest()||(this.iframeMessageTransport.sendMessage(p.IFrameRpc.READY),this.iframeMessageTransport.sendMessage(p.IFrameRpc.INIT_NETWORK_TOKEN,{isProd:!0}),this.timeBeforeFetchBraintreeToken=Date.now(),this.fetchBraintreeToken().then((function(e){t.iframeMessageTransport.sendMessage(p.IFrameRpc.INIT_BRAINTREE,{token:e}),t.braintreeTokenLoaded.resolve(!0),t.logLatency(t.timeBeforeFetchBraintreeToken,"fetchBraintreeToken")})).catch((function(){l.Notify.error(u.intl.formatMessage({id:"K2YdqW",defaultMessage:"Unable to connect to our servers - Refresh page"})),t.logLatency(t.timeBeforeFetchBraintreeToken,"fetchBraintreeTokenError")})),this.timeBeforeFetchAdyenKey=Date.now(),this.fetchAdyenKey().then((function(e){t.iframeMessageTransport.sendMessage(p.IFrameRpc.INIT_ADYEN,e),t.adyenKeyLoaded.resolve(!0),t.logLatency(t.timeBeforeFetchAdyenKey,"fetchAdyenKey")})).catch((function(){l.Notify.error(u.intl.formatMessage({id:"K2YdqW",defaultMessage:"Unable to connect to our servers - Refresh page"})),t.logLatency(t.timeBeforeFetchAdyenKey,"fetchAdyenKeyError")})),this.threeDsHandler=new m.ThreeDsHandler({updateThreeDsData:this.props.actions.updateThreeDsData,submitThreeDsChallenge:this.submitThreeDsChallenge,triggerThreeDsChallenge:this.props.actions.triggerThreeDsChallenge,submitThreeDsFingerprint:this.submitThreeDsFingerprint,triggerThreeDsFingerprint:this.props.actions.triggerThreeDsFingerprint,isDesktop:!1,isSeleniumChangesTest:this.isSeleniumChangesTest()})))},t.prototype.fetchAdyenKey=function(e,t){var r=this;void 0===e&&(e=2),void 0===t&&(t=h());return o.BackgroundRequest({url:"/credit_card_secrets/adyen_key",type:"GET",success:function(e,a,n){var o=JSON.parse(e);if(o&&o.hasOwnProperty("key")&&o.hasOwnProperty("server_time")){var i={key:o.key,serverTime:o.server_time};t.resolve(i)}else t.reject(u.intl.formatMessage({id:"K2YdqW",defaultMessage:"Unable to connect to our servers - Refresh page"}));r.startServerTimeUpdate()},error:function(a,n,o){r.tokenErrorHandler(e,r.fetchAdyenKey,t,a,"get adyen key failed:",["fetch_adyen_key_failed"],o)}}),t.promise},t.prototype.fetchBraintreeToken=function(e,t){var r=this;void 0===e&&(e=2),void 0===t&&(t=h());return o.BackgroundRequest({url:"/payments/braintree_token",success:function(e,r,a){try{var n=JSON.parse(e);if(!n||!n.hasOwnProperty("token"))throw new Error("Invalid response from server");t.resolve(n.token)}catch(e){t.reject(u.intl.formatMessage({id:"K2YdqW",defaultMessage:"Unable to connect to our servers - Refresh page"}))}},error:function(a,n,o){r.tokenErrorHandler(e,r.fetchBraintreeToken,t,a,"ajax /braintree_token failed:",["fetch_braintree_token_failed"],o)}}),t.promise},t.prototype.tokenErrorHandler=function(e,t,r,a,n,o,i){if(--e>0)setTimeout((function(){t(e,r)}),2e3);else{var l=n+" "+(JSON.stringify(a.status)+", "+a.statusText+", "+a.readyState);s.reportException({err:new Error(l),severity:s.SEVERITY.CRITICAL,tags:o}),r.reject(i)}},t.prototype.pingIframe=function(){var e=this;this.iframeReady||(this.pingTimeoutLogged||(this.firstPing?(new Date).getTime()-this.firstPing>12e4&&(s.reportException({err:new Error("PCI iFrame timeout"),severity:s.SEVERITY.NONCRITICAL,tags:["iframe_ping_timeout"]}),this.pingTimeoutLogged=!0):this.firstPing=(new Date).getTime()),this.iframeMessageTransport.sendMessage(p.IFrameRpc.READY),setTimeout((function(){e.pingIframe()}),250))},t.prototype.showCvvModal=function(){},t.prototype.showFormErrors=function(){this.isSeleniumChangesTest()||this.iframeMessageTransport.sendMessage(p.IFrameRpc.SHOW_FORM_ERRORS)},t.prototype.focusOutsideIframe=function(){},t.prototype.handleValidationFailure=function(e){this.braintreeTokenizing=!1,this.braintreeTokenizingDeferred.resolve(!1),this.adyenEncrypting=!1,this.adyenEncryptionDeferred.resolve(!1),this.networkTokenEncrypting=!1,this.networkTokenEncryptionDeferred.resolve(!1)},t.prototype.handleDataStatusUpdate=function(e){},t.prototype.handleValidationUpdate=function(e){this.props.actions.updateNonce(this.props.nonce.rawValue,e),this.props.actions.updateBIN(this.props.bin.rawValue)},t.prototype.handleSizeUpdate=function(e){this.setState({iframeFormHeight:e})},t.prototype.handleBlurField=function(e){this.props.actions.blurCCField(e)},t.defaultProps={isResponsive:!1},t})(a.default.Component);t.CreditCardFrame=g})),define("modules/clean/react/payments/checkout/components/payment_method_form/direct_debit_form",["require","exports","tslib","react","modules/clean/react/payments/common/form_value_helpers","modules/clean/react/payments/checkout/components/inputs/labeled_text_input","modules/clean/react/payments/checkout/components/inputs/labeled_checkbox_input","modules/core/i18n","modules/clean/react/sprite_div","modules/clean/react/tooltip"],(function(e,t,r,a,n,o,i,s,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DirectDebitForm=void 0,a=r.__importDefault(a),l=r.__importDefault(l);var c=(u=r.__importStar(u)).Tooltip,d=u.TooltipPosition,p=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onAccountHolderNameBlur=function(e){t.props.actions.showFormFieldErrors(["accountHolderName"],"AccountHolderNameBlur"),t.props.actions.blurAccountHolderName(e.value)},t.onIBANBlur=function(e){t.props.actions.showFormFieldErrors(["iban"],"IBANBlur"),t.props.actions.blurIBAN(e.value)},t}return r.__extends(t,e),t.prototype.onAccountHolderNameChange=function(e){this.props.actions.updateAccountHolderName(e.value)},t.prototype.onIBANChange=function(e){this.props.actions.updateIBAN(e.value)},t.prototype.onMandateSignedChange=function(e){this.props.actions.updateMandateSigned(e.checked)},t.prototype.onMandateSignedBlur=function(e){this.props.actions.showFormFieldErrors(["mandateSigned"],"MandateSignedBlur")},t.prototype.accountHolderNameErrorString=function(){var e=this.props.formData.accountHolderName;return!n.FormValueHelper.isValid(e)&&e.showError?s.intl.formatMessage({id:"lVEpBU",defaultMessage:"Please enter the account holderâ€™s name."}):""},t.prototype.ibanErrorString=function(){var e=this.props.formData.iban;return!n.FormValueHelper.isValid(e)&&e.showError?s.intl.formatMessage({id:"jqBL8f",defaultMessage:"Please enter a valid bank account number."}):""},t.prototype.mandateSignedErrorString=function(){var e=this.props.formData.mandateSigned;return!n.FormValueHelper.isValid(e)&&e.showError?s.intl.formatMessage({id:"X6vQlG",defaultMessage:"Please agree to the SEPA mandate terms by clicking on this check box."}):""},t.prototype.renderIBANLabel=function(){var e=a.default.createElement(l.default,{group:"web",name:"info"}),t=s.intl.formatMessage({id:"yIGH7D",defaultMessage:"An International Bank Account Number (IBAN) is a unique identification code for a bank account. Itâ€™s made up of a two-letter country code and up to 30 alphanumeric characters. Check your bank statements or ask your bank for your IBAN."}),r=a.default.createElement(c,{tooltip_classname:"iban-label-tooltip-bubble",position:d.RIGHT,tooltip_contents:t},e);return a.default.createElement("span",{className:"grid__item grid--y-middle"},s.intl.formatMessage({id:"6BVmpd",defaultMessage:"IBAN"}),r)},t.prototype.render=function(){var e=this.props.formData,t=s.intl.formatMessage({id:"Pb48Th",defaultMessage:"I hereby authorize Dropbox International Unlimited Company, and its payment service provider, Adyen Client Management, to collect payments from my account via direct debit. At the same time, I instruct my bank to honor the direct debits drawn on my account. Notice: Within eight weeks, beginning with the debit date, I am entitled to claim a refund of the debited amount. In this case the terms and conditions agreed with my bank shall apply."});return a.default.createElement("div",{id:"sepa-direct-debit-form",className:"direct-debit-container"},a.default.createElement("div",{className:"direct-debit-fields"},a.default.createElement(o.BizLabeledTextInput,{name:"owner_name",labelText:s.intl.formatMessage({id:"vj7NTF",defaultMessage:"Account holder name"}),value:e.accountHolderName.rawValue,errorText:this.accountHolderNameErrorString(),errorHTML:e.accountHolderName.serverError,onBlur:this.onAccountHolderNameBlur,onChange:this.onAccountHolderNameChange.bind(this)}),a.default.createElement(o.BizLabeledTextInput,{name:"iban",labelText:this.renderIBANLabel(),value:e.iban.rawValue,errorText:this.ibanErrorString(),errorHTML:e.iban.serverError,onBlur:this.onIBANBlur,onChange:this.onIBANChange.bind(this)})),this.props.locationFields,a.default.createElement(i.LabeledCheckboxInput,{checked:e.mandateSigned.rawValue,className:"billing-mandate-signed",errorHTML:e.mandateSigned.serverError,errorText:this.mandateSignedErrorString(),labelText:t,name:"mandate_signed",onBlur:this.onMandateSignedBlur.bind(this),onChange:this.onMandateSignedChange.bind(this)}))},t})(a.default.Component);t.DirectDebitForm=p})),define("modules/clean/react/payments/checkout/components/payment_method_form/apple_pay",["require","exports","tslib","modules/clean/react/payments/common/form/actions/actions","modules/clean/deprecated_ajax/ajax_as_promised_jquery","modules/core/notify","modules/core/i18n","modules/core/exception","modules/clean/react/payments/buy/components/payments/order_summary/order_summary_utils"],(function(e,t,r,a,n,o,i,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMerchantIdentifier=t.processPaymentResponse=t.fetchPaymentSession=t.applePayAction=void 0,s=r.__importStar(s);var u=i.intl.formatMessage({id:"OVUDyw",defaultMessage:"We weren't able to process your payment. Double check the payment info and try again. If that doesn't work, try another payment method or contact your bank"});function c(e,t){return n.BackgroundRequest({url:"/payments/apple_pay_session",type:"GET",data:{session_url:t}}).then((function(t){var r=JSON.parse(t);return r&&r.hasOwnProperty("session")?JSON.parse(r.session):(s.reportStack("Apple Pay Error (No Payment Session from Server Response)",{severity:s.SEVERITY.CRITICAL,tags:["applepay","payments"]}),o.Notify.error(u),e(a.applePayError("Step 1 - Blocked by No Payment Session")),e(a.paymentBannerError(u)),Promise.reject("No payment session from server response"))})).catch((function(t){return s.reportException({err:new Error("Apple Pay Error (No Payment Session from Server Response) "+t),severity:s.SEVERITY.CRITICAL,tags:["applepay","payments"]}),o.Notify.error(u),e(a.applePayError("Step 1 - Blocked by ERROR getting Payment Session")),e(a.paymentBannerError(u)),Promise.reject("error in getting payment session from server")}))}function d(e,t){var r=t.details,n=btoa(JSON.stringify(r.token.paymentData));e(a.updateApplePayToken(n))}function p(){return"merchant.dropbox.com"}t.applePayAction=function(e){var t=this,n=e.planName,i=e.price;return function(e){return r.__awaiter(t,void 0,void 0,(function(){var t,m,f,y,h,g,_,v,P;return r.__generator(this,(function(r){switch(r.label){case 0:if(!window.PaymentRequest)return[3,5];if(t={supportedMethods:"https://apple.com/apple-pay",data:{version:3,merchantIdentifier:p(),merchantCapabilities:["supports3DS","supportsCredit","supportsDebit"],supportedNetworks:["amex","discover","masterCard","visa"],countryCode:i.taxCountryCode}},e(a.applePayStartup("Step 0 - Trying to Initialize")),void 0===i.taxAmount||void 0===i.totalPrice||void 0===i.currency)return o.Notify.error(u),s.reportException({err:new Error("Apple Pay Error transition prices are undefined "),severity:s.SEVERITY.OPERATIONAL,tags:["applepay","payments"],exc_extra:{prices:i}}),e(a.paymentBannerError(u)),[2,Promise.resolve(!1)];m=i.taxAmount.amount,f=i.totalPrice.amount,y=i.currency,h=[t],g={total:{label:n,amount:{value:f.toString(),currency:y}},displayItems:[{label:n,amount:{value:(f-m).toString(),currency:y}}]},m>0&&g.displayItems.push({label:l.getTaxNameForCountry(i.taxCountryCode,void 0),amount:{value:m.toString(),currency:y}}),(_=new PaymentRequest(h,g,{})).onmerchantvalidation=function(t){var r=c(e,t.validationURL);t.complete(r)},r.label=1;case 1:return r.trys.push([1,3,,4]),e(a.applePayPopupShown("Step 2 - Payment Session OK - Showing")),[4,_.show()];case 2:return v=r.sent(),d(e,v),e(a.applePayClosedBySuccess("Step 3 - Payment response processed - closing")),v.complete("success"),[2,Promise.resolve(!0)];case 3:return(P=r.sent())&&"AbortError"===P.name?(s.reportException({err:new Error("Apple Pay User Aborted Most Likely: "+P),severity:s.SEVERITY.NONCRITICAL,tags:["applepay","payments"]}),[2,Promise.resolve(!1)]):(s.reportException({err:new Error("Apple Pay Error (Most Likely NOT User Abort) "+P),severity:s.SEVERITY.CRITICAL,tags:["applepay","payments"]}),o.Notify.error(u),e(a.applePayError("Step 2 - User Failed to Pay or Display")),e(a.paymentBannerError(u)),[2,Promise.resolve(!1)]);case 4:return[3,6];case 5:return[2,Promise.resolve(!1)];case 6:return[2]}}))}))}},t.fetchPaymentSession=c,t.processPaymentResponse=d,t.getMerchantIdentifier=p})),define("modules/clean/react/payments/common/constants",["require","exports","modules/core/i18n"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NameErrorMessage=t.CityErrorMessage=t.AddressErrorMessage=t.ZipCodeErrorMessage=t.PricingToggleAnnual=t.PricingToggleMonthly=t.PricingToggleCookie=void 0,t.PricingToggleCookie="pricing-schedule",t.PricingToggleMonthly="monthly",t.PricingToggleAnnual="annual",t.ZipCodeErrorMessage=r.intl.formatMessage({id:"CAxLNf",defaultMessage:"Please enter a valid postal code."}),t.AddressErrorMessage=r.intl.formatMessage({id:"0Mt769",defaultMessage:"Please enter a valid address."}),t.CityErrorMessage=r.intl.formatMessage({id:"RF+x3N",defaultMessage:"Please enter a valid city/town."}),t.NameErrorMessage=r.intl.formatMessage({id:"OSqOkI",defaultMessage:"Please enter the card holder name."})})),define("modules/clean/react/payments/common/form_value_factory",["require","exports","tslib","modules/clean/react/payments/common/form_values","modules/clean/payments/validation","modules/clean/datetime/datetime"],(function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormValueFactory=void 0,a=r.__importStar(a);var i=(function(){function e(){}return e.createInput=function(e,t){var r=e&&!!e.trim();return{rawValue:e,formattedValue:e,errorState:r?a.InputErrorState.Valid:a.InputErrorState.Invalid,showError:!(!r||!t)&&t.showError,serverError:""}},e.createCheckbox=function(e,t,r){var n=r||e?a.InputErrorState.Valid:a.InputErrorState.Invalid;return{rawValue:e,formattedValue:e,errorState:n,showError:!(n===a.InputErrorState.Valid||!t)&&t.showError,serverError:""}},e.createProductPlanType=function(e,t,r){var n=!1;return e&&t&&(n=0===t.plans.length||t.withProductPlanType(e).plans.length>0),{rawValue:e,formattedValue:e,errorState:n?a.InputErrorState.Valid:a.InputErrorState.Invalid,showError:!1,serverError:""}},e.createSchedule=function(e){return{rawValue:e,formattedValue:e,errorState:a.InputErrorState.Valid,showError:!1,serverError:""}},e.createTrialEndDate=function(e,t){var r="";if(t&&e){var n=t.replace("_","-");r=o.daysAfterToday(e).toLocaleDateString(n,{weekday:"long",year:"numeric",month:"long",day:"numeric"})}return{rawValue:r,formattedValue:r,errorState:a.InputErrorState.Valid,showError:!1,serverError:""}},e.createNumberOfUsers=function(e,t,r,n,o){var i,s,l,u,c=t.minNumUsers,d=t.maxNumUsers,p=e,m=parseInt(p,10),f=!isNaN(m);f?(i=m<n,s=m<c,u=m>d,l=0!==o&&m<o+1,m=Math.min(Math.max(m,n),d)):(i=!1,s=!1,u=!1,l=!1,m=c);var y=f&&!s&&!l&&!u;return{rawValue:p,formattedValue:m,errorState:y?a.InputErrorState.Valid:a.InputErrorState.Invalid,showError:!(y||!r)&&r.showError,isUnderLicenseLimit:i,isUnderLimit:s,isOverLimit:u,minLicenseLimit:n,minNumUsers:c,maxNumUsers:d,serverError:""}},e.createEmail=function(e,t){var r=e.trim(),n=a.EmailErrorState.Valid;if(r){var o=r.split("@");if(2!==o.length)n=a.EmailErrorState.NoAt;else{var i=o[0],s=o[1],l=new RegExp("^([a-z0-9][a-z0-9\\-]*\\.)+([a-z]+|xn--[a-z0-9\\-]+)$","i");/^[\w!#$%&'*+\-\/=?^`{|}~.]+$/.test(i)?(!s||/^[\x00-\x7f]*$/.test(s)&&!l.test(s))&&(n=a.EmailErrorState.BadDomain):n=a.EmailErrorState.BadUsername}}else n=a.EmailErrorState.Empty;return{rawValue:e,formattedValue:r,errorState:n,showError:n!==a.EmailErrorState.Valid&&!!t&&t.showError,serverError:"",isCapturable:!1}},e.createTeamPhone=function(e,t){var r=a.TeamPhoneErrorState.Valid;return e||(r=a.TeamPhoneErrorState.Empty),{rawValue:e,formattedValue:e,errorState:r,showError:!(r===a.TeamPhoneErrorState.Valid||!t)&&t.showError,serverError:""}},e.createPassword=function(e,t){var r=a.PasswordErrorState.Valid;return e&&e.length<6?r=a.PasswordErrorState.TooShort:e||(r=a.PasswordErrorState.Empty),{rawValue:e,formattedValue:e,errorState:r,showError:!(r===a.PasswordErrorState.Valid||!t)&&t.showError,serverError:""}},e.createPaymentMethod=function(e,t,r,n){return r.available_payment_methods_for_country(t).indexOf(e)<0&&(e=r.default_payment_method_for_country(t)),{rawValue:e,formattedValue:e,errorState:a.InputErrorState.Valid,showError:!1,serverError:""}},e.createCountryCode=function(e,t){var r=e?a.InputErrorState.Valid:a.InputErrorState.Invalid;return{rawValue:e,formattedValue:e,errorState:r,showError:!(r===a.InputErrorState.Valid||!t)&&t.showError,serverError:""}},e.createAddress=function(e,t){var r=e&&!!e.trim()&&e.trim().length>=1;return{rawValue:e,formattedValue:e,errorState:r?a.InputErrorState.Valid:a.InputErrorState.Invalid,showError:!(r||!t)&&t.showError,serverError:""}},e.createPhone=function(e,t){var r=e&&!!e.trim()&&e.trim().length>=1;return{rawValue:e,formattedValue:e,errorState:r?a.InputErrorState.Valid:a.InputErrorState.Invalid,showError:!(r||!t)&&t.showError,serverError:""}},e.createCity=function(e,t){var r=e&&!!e.trim()&&e.trim().length>=1;return{rawValue:e,formattedValue:e,errorState:r?a.InputErrorState.Valid:a.InputErrorState.Invalid,showError:!(r||!t)&&t.showError,serverError:""}},e.createName=function(e,t){var r=e&&e.trim().length>=1;return{rawValue:e,formattedValue:e,errorState:r?a.InputErrorState.Valid:a.InputErrorState.Invalid,showError:!(r||!t)&&t.showError,serverError:""}},e.createZipCode=function(e,t,r,n){var o=!0,i=/\s+$/gi;if(r.allow_zip_code_for_country(t))if("US"===t){/(^\d{5}$)|(^\d{5}-\d{4}$)/.test(e.replace(i,""))||(o=!1)}else(!e||e.length>15||""===e.trim())&&(o=!1);else e="";var s=o?a.InputErrorState.Valid:a.InputErrorState.Invalid,l=!(o||!n)&&n.showError,u=o?e.replace(i,"").replace(".",""):"";return{rawValue:e,formattedValue:u,errorState:s,showError:l,serverError:""}},e.createVat=function(e,t,r){var o=a.InputErrorState,i=o.Valid,s=o.Invalid,l=e.replace(/\s+/gi,""),u=n.validateVat(t,l)?i:s;return{rawValue:e,formattedValue:l,errorState:u,showError:!(u===i||!r)&&r.showError,serverError:""}},e.createCpf=function(e,t,r){var o,i=a.InputErrorState,s=i.Valid,l=i.Invalid,u=e.replace(/[^\d]+/g,"");return{rawValue:e,formattedValue:u,errorState:o=""===e&&r?s:n.validateCpf(u)?s:l,showError:!(o===s||!t)&&t.showError,serverError:""}},e.createCpfName=function(e,t,r){var n=e&&!!e.trim()||""===e&&r;return{rawValue:e,formattedValue:e,errorState:n?a.InputErrorState.Valid:a.InputErrorState.Invalid,showError:!(!n||!t)&&t.showError,serverError:"",manuallyEdited:!0}},e.createCpfNamePrefill=function(e,t,r,n,o){var i="",s=(i=r||(e&&t?e+" "+t:e||t))&&!!i.trim()||""===i&&o;return{rawValue:i,formattedValue:i,errorState:s?a.InputErrorState.Valid:a.InputErrorState.Invalid,showError:!(!s||!n)&&n.showError,serverError:"",manuallyEdited:!1}},e.createNonce=function(e,t,r,n){var o=a.InputErrorState,i=o.Valid,s=o.Invalid,l=!!r&&r.isCCNValid,u=!!r&&r.isCCodeValid,c=!!r&&r.isCCExpValid;t&&(l=t.ccn?!t.ccn.error:l,u=t.ccode?!t.ccode.error:u,c=t?t.ccexp?!t.ccexp.error:t.ccexpyr&&t.ccexpmo?!t.ccexpyr.error&&!t.ccexpmo.error:c:c);var d=e||(r?r.rawValue:""),p=l&&u&&c?i:s;return{rawValue:d,formattedValue:d,errorState:p,showError:!(p===i||!r)&&r.showError&&!n,serverError:"",isCCNValid:l,isCCodeValid:u,isCCExpValid:c}},e.createPayPalNonce=function(e,t,r){var n=e,o=""!==e?a.InputErrorState.Valid:a.InputErrorState.Invalid;return{rawValue:n,email:t,formattedValue:n,errorState:o,showError:!(o===a.InputErrorState.Valid||!r)&&r.showError,serverError:""}},e.createAdyenEncryptedCard=function(e,t){var r=e||(t?t.rawValue:"");return{rawValue:r,formattedValue:r,errorState:a.InputErrorState.Valid,showError:!1,serverError:""}},e.createEncryptedCardForNetworkToken=function(e,t,r){var n=t||(r?r.encryptedCard:""),o=e||(r?r.cardType:"");return{rawValue:{cardType:o,encryptedCard:n},formattedValue:JSON.stringify({cardType:o,encryptedCard:n}),cardType:o,encryptedCard:n,errorState:a.InputErrorState.Valid,showError:!1,serverError:""}},e.createBIN=function(e,t){var r=e||(t?t.rawValue:"");return{rawValue:r,formattedValue:r,errorState:a.InputErrorState.Valid,showError:!1,serverError:""}},e.createBrowserInfo=function(e,t){var r=e||(t?t.rawValue:"");return{rawValue:r,formattedValue:r,errorState:a.InputErrorState.Valid,showError:!1,serverError:""}},e.createThreeDsData=function(e){return{rawValue:e,formattedValue:e,errorState:a.InputErrorState.Valid,showError:!1,serverError:""}},e.createApplePayToken=function(e,t){var r=e||(t?t.value:"");return{value:r,rawValue:r,formattedValue:r,errorState:a.InputErrorState.Valid,showError:!1,serverError:""}},e.createIBAN=function(e,t){var r=a.InputErrorState,o=r.Valid,i=r.Invalid,s=e.replace(/\s+/gi,""),l=n.validIBANForCountry(s)?o:i;return{rawValue:e,formattedValue:s,errorState:l,showError:!(l===o||!t)&&t.showError,serverError:""}},e.createIdealBankId=function(e,t){var r=e?a.InputErrorState.Valid:a.InputErrorState.Invalid;return{rawValue:e,formattedValue:e,errorState:r,showError:!(r===a.InputErrorState.Valid||!t)&&t.showError,serverError:""}},e.createIdealBankName=function(e,t){return{rawValue:e,formattedValue:e,errorState:e?a.InputErrorState.Valid:a.InputErrorState.Invalid,showError:!1,serverError:""}},e.createEmailsToInvite=function(e,t){return{rawValue:e=e||[],formattedValue:JSON.stringify(e),errorState:a.InputErrorState.Valid,showError:!1,serverError:""}},e})();t.FormValueFactory=i})),define("modules/clean/react/payments/common/form_value_helpers",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormValueHelper=void 0,(function(e){e.isValid=function(e){return 0===e.errorState},e.hasServerError=function(e){return!!e.serverError}})(t.FormValueHelper||(t.FormValueHelper={}))})),define("modules/clean/react/payments/common/form_values",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TeamPhoneErrorState=t.PasswordErrorState=t.EmailErrorState=t.InputErrorState=void 0,(function(e){e[e.Valid=0]="Valid",e[e.Invalid=1]="Invalid"})(t.InputErrorState||(t.InputErrorState={})),(function(e){e[e.Valid=0]="Valid",e[e.Empty=1]="Empty",e[e.NoAt=2]="NoAt",e[e.BadUsername=3]="BadUsername",e[e.BadDomain=4]="BadDomain",e[e.TakenError=5]="TakenError",e[e.TakenWarning=6]="TakenWarning"})(t.EmailErrorState||(t.EmailErrorState={})),(function(e){e[e.Valid=0]="Valid",e[e.Empty=1]="Empty",e[e.TooShort=2]="TooShort"})(t.PasswordErrorState||(t.PasswordErrorState={})),(function(e){e[e.Valid=0]="Valid",e[e.Empty=1]="Empty"})(t.TeamPhoneErrorState||(t.TeamPhoneErrorState={}))})),define("modules/clean/react/payments/common/form/actions/actions",["require","exports","tslib","modules/clean/react/payments/common/constants","modules/clean/react/payments/common/pricing/actions/actions","lodash","modules/clean/react/payments/common/form_value_helpers","modules/clean/auth/common/captcha","modules/clean/payments/payment_form/payment_form_spec","modules/clean/payments/skus/constants","modules/clean/react/payments/business/state/business_state","modules/core/cookies","modules/clean/payments/payments_web_request"],(function(e,t,r,a,n,o,i,s,l,u,c,d,p){"use strict";var m,f;function y(e,t,r,a,n,i,l,u,d){for(var m={},y=0,b=a;y<b.length;y++){var C=b[y],E=r[C];m[c.fieldsToServerProps[C]]=E.formattedValue}o.assignIn(m,n);var T=function(t){for(var r=0,a=t;r<a.length;r++){var n=a[r];if(n.length>=3){var o=n[0],i=n[2];switch(o){case"notifyError":"emailTaken"===i&&e(S())}}}};if(l){var k=s.get_captcha_responses(l);k["g-recaptcha-response"]&&(m["g-recaptcha-response"]=k["g-recaptcha-response"],d=f.RecaptchaV2,e(P()))}e(h(d,n));var N=new p.PaymentsWebRequest({url:t,data:m,success:function(t,r,a){var o;e(g(t,n)),(null===(o=null==t?void 0:t.actions)||void 0===o?void 0:o.length)&&T(t.actions)},error:function(t,r,a){var n=null;try{n=JSON.parse(a)}catch(e){}finally{if(e(_(n||a)),u&&n&&u(n),n&&n.error_type&&n.msg&&"Payment"===n.error_type&&e(w(n.msg)),l)s.handle_captcha_errors(l,n)&&e(v())}}});i?N.request():new p.PaymentsWebRequest({url:"/checkout/create_user",type:"POST",data:{fname:m.fname,lname:m.lname,email:m.email,is_trial:"trial"===m.signup_type,password:m.password,plan_id:m.plan_id,marketing_opt_in:m.marketing_opt_in,tos_agree:m.tos_agree,schedule_id:m.schedule_id,signup_url:m.signup_url,signup_tag:m.signup_tag,signup_referrer:m.signup_referrer,tracking_params:m.tracking_params},success:function(t){var r;if(null===(r=null==t?void 0:t.actions)||void 0===r?void 0:r.length)return T(t.actions),void e(_(t));N.request()},error:function(t,r,a){e(_(a))}}).request(),l&&s.clear_captcha_response(l),d!==f.ThreeDsChallenge&&d!==f.ThreeDsFingerprint||e(I(""))}function h(e,t){return void 0===e&&(e=f.ButtonClick),{type:m.SubmitFormStart,trigger:e,additionalData:t}}function g(e,t){return{type:m.SubmitFormSuccess,data:e,additionalData:t}}function _(e){return{type:m.SubmitFormError,data:e}}function v(){return{type:m.TriggerCaptcha}}function P(){return{type:m.SubmitCaptcha}}function b(e,t){return{type:m.ShowFormFieldErrors,fieldNames:e,origin:t}}function S(){return{type:m.EmailTakenError}}function C(e,t){return function(r){r(n.prepareToUpdatePrice()),r(E(e)),r(n.updatePrice(t))}}function E(e){return{type:m.UpdateNumberOfUsers,value:e}}function T(e){return{type:m.UpdateCountryCode,value:e}}function k(e){return{type:m.UpdateZipCode,value:e}}function N(e){return{type:m.UpdateVat,value:e}}function w(e){return{type:m.PaymentBannerError,msg:e}}function F(e){return{type:m.ApplePayClosedByFailure,msg:e}}function I(e){return{type:m.UpdateThreeDsData,value:e}}function M(e,t){for(var r=0,a=t;r<a.length;r++){var n=e[a[r]];if(!i.FormValueHelper.isValid(n))return!1}return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.isValidSubmitState=t.updateEmailsToInvite=t.updateIdealBank=t.updateTermsAndService=t.updateMarketingOptIn=t.updateMandateSigned=t.blurIBAN=t.updateIBAN=t.blurAccountHolderName=t.updateAccountHolderName=t.updateBIN=t.triggerThreeDsFingerprint=t.triggerThreeDsChallenge=t.updateThreeDsData=t.updateBrowserInfo=t.updateApplePayToken=t.updateEncryptedCardForNetworkToken=t.updateAdyenEncryptedCard=t.blurCCField=t.updatePayPalNonce=t.updateNonce=t.updateCpfName=t.applePayClosedByFailure=t.applePayClosedBySuccess=t.applePayError=t.applePayPopupShown=t.applePayStartup=t.paymentBannerError=t.blurCpf=t.updateCpf=t.blurVat=t.updateVat=t.updateVatAndPrice=t.blurZipCode=t.updateZipCode=t.updateZipCodeAndPrice=t.updateCountryCode=t.updateCountryCodeAndPrice=t.updatePaymentMethod=t.updateCompanySize=t.updateTeamPhone=t.updateTeamName=t.updatePassword=t.updateEmail=t.clickGoogleSignup=t.blurEmail=t.updateLastName=t.updateFirstName=t.updateNumberOfUsers=t.updateProductPlanType=t.updateSchedule=t.showEmailTakenWarning=t.showEmailTakenError=t.showFormFieldErrors=t.submitCaptcha=t.triggerCaptcha=t.submitFormError=t.submitFormSuccess=t.submitFormStart=t.submitFormData=t.submitForm=t.SubmitFormTriggerType=t.FormActionEnum=void 0,a=r.__importStar(a),n=r.__importStar(n),o=r.__importStar(o),(function(e){e.BlurEmail="BlurEmail",e.ClickGoogleSignup="ClickGoogleSignup",e.SubmitFormStart="SubmitFormStart",e.SubmitFormSuccess="SubmitFormSuccess",e.SubmitFormError="SubmitFormError",e.ShowFormFieldErrors="ShowFormFieldErrors",e.SubmitCaptcha="SubmitCaptcha",e.TriggerCaptcha="TriggerCaptcha",e.UpdateTransitions="UpdateTransitions",e.UpdateSchedule="UpdateSchedule",e.UpdateProductPlanType="UpdateProductPlanType",e.UpdateNumberOfUsers="UpdateNumberOfUsers",e.UpdateFirstName="UpdateFirstName",e.UpdateLastName="UpdateLastName",e.UpdateEmail="UpdateEmail",e.UpdatePassword="UpdatePassword",e.UpdateTeamName="UpdateTeamName",e.UpdateTeamPhone="UpdateTeamPhone",e.UpdateCompanySize="UpdateCompanySize",e.UpdatePaymentMethod="UpdatePaymentMethod",e.UpdateCountryCode="UpdateCountryCode",e.UpdateZipCode="UpdateZipCode",e.BlurZipCode="BlurZipCode",e.UpdateVat="UpdateVat",e.BlurVat="BlurVat",e.UpdateCpf="UpdateCpf",e.BlurCpf="BlurCpf",e.UpdateCpfName="UpdateCpfName",e.UpdateNonce="UpdateNonce",e.UpdatePayPalNonce="UpdatePayPalNonce",e.BlurCCField="BlurCCField",e.UpdateAdyenEncryptedCard="UpdateAdyenEncryptedCard",e.UpdateEncryptedCardForNetworkToken="UpdateEncryptedCardForNetworkToken",e.UpdateBrowserInfo="UpdateBrowserInfo",e.UpdateThreeDsData="UpdateThreeDsData",e.TriggerThreeDsChallenge="TriggerThreeDsChallenge",e.TriggerThreeDsFingerprint="TriggerThreeDsFingerprint",e.UpdateBIN="UpdateBIN",e.UpdateAccountHolderName="UpdateAccountHolderName",e.BlurAccountHolderName="BlurAccountHolderName",e.UpdateIBAN="UpdateIBAN",e.BlurIBAN="BlurIBAN",e.UpdateMandateSigned="UpdateMandateSigned",e.UpdateIdealBank="UpdateIdealBank",e.UpdateMarketingOptIn="UpdateMarketingOptIn",e.UpdateTermsAndService="UpdateTermsAndService",e.UpdateEmailsToInvite="UpdateEmailsToInvite",e.EmailTakenError="EmailTakenError",e.EmailTakenWarning="EmailTakenWarning",e.PaymentBannerError="PaymentBannerError",e.UpdateApplePayToken="UpdateApplePayToken",e.ApplePayStartup="ApplePayStartup",e.ApplePayPopupShown="ApplePayPopupShown",e.ApplePayClosedByFailure="ApplePayPopupCloseByFailure",e.ApplePayError="ApplePayError",e.ApplePayClosedBySuccess="ApplePayClosedBySuccess"})(m=t.FormActionEnum||(t.FormActionEnum={})),(function(e){e.ButtonClick="button_click",e.RecaptchaV2="recaptcha_v2",e.ThreeDsChallenge="three_ds_challenge",e.ThreeDsFingerprint="three_ds_fingerprint"})(f=t.SubmitFormTriggerType||(t.SubmitFormTriggerType={})),t.submitForm=function(e,t,r,a,n,o,i){return void 0===a&&(a={}),a.time_on_page_ms=window.performance.now(),function(s,u){var c=u();M(c.formData,t)?r().then((function(r){var d,p,m,f=null===(m=null!==(d=c.pageState.existingAccountShowing)&&void 0!==d?d:null===(p=c.pageState.userInfo)||void 0===p?void 0:p.existingAccount)||void 0===m||m;r?y(s,e,u().formData,t,a,f,n,o,i):u().formData.paymentMethod.formattedValue===l.PaymentMethod.ApplePay&&s(F("Step 2 - User Closed Most Likely"))})):s(b(t,"SubmitForm"))}},t.submitFormData=y,t.submitFormStart=h,t.submitFormSuccess=g,t.submitFormError=_,t.triggerCaptcha=v,t.submitCaptcha=P,t.showFormFieldErrors=b,t.showEmailTakenError=S,t.showEmailTakenWarning=function(){return{type:m.EmailTakenWarning}},t.updateSchedule=function(e){return d.Cookies.create(a.PricingToggleCookie,e===u.ScheduleId.MONTHLY?a.PricingToggleMonthly:a.PricingToggleAnnual,30),{type:m.UpdateSchedule,value:e}},t.updateProductPlanType=function(e){var t={type:m.UpdateProductPlanType,value:e};return function(e,r){var a=r();e(t),e(E(a.formData.numberOfUsers.rawValue))}},t.updateNumberOfUsers=C,t.updateFirstName=function(e){return{type:m.UpdateFirstName,value:e}},t.updateLastName=function(e){return{type:m.UpdateLastName,value:e}},t.blurEmail=function(e){return{type:m.BlurEmail,value:e}},t.clickGoogleSignup=function(){return{type:m.ClickGoogleSignup}},t.updateEmail=function(e){return{type:m.UpdateEmail,value:e}},t.updatePassword=function(e){return{type:m.UpdatePassword,value:e}},t.updateTeamName=function(e){return{type:m.UpdateTeamName,value:e}},t.updateTeamPhone=function(e){return{type:m.UpdateTeamPhone,value:e}},t.updateCompanySize=function(e){return{type:m.UpdateCompanySize,value:e}},t.updatePaymentMethod=function(e){return{type:m.UpdatePaymentMethod,value:e}},t.updateCountryCodeAndPrice=function(e){return function(t){t(n.prepareToUpdatePrice()),t(T(e)),t(n.updatePrice())}},t.updateCountryCode=T,t.updateZipCodeAndPrice=function(e,t){return function(r){r(n.prepareToUpdatePrice()),r(k(e)),r(n.updatePrice(t))}},t.updateZipCode=k,t.blurZipCode=function(e){return{type:m.BlurZipCode,value:e}},t.updateVatAndPrice=function(e,t){return function(r){r(n.prepareToUpdatePrice()),r(N(e)),r(n.updatePrice(t))}},t.updateVat=N,t.blurVat=function(e){return{type:m.BlurVat,value:e}},t.updateCpf=function(e){return{type:m.UpdateCpf,value:e}},t.blurCpf=function(e){return{type:m.BlurCpf,value:e}},t.paymentBannerError=w,t.applePayStartup=function(e){return{type:m.ApplePayStartup,msg:e}},t.applePayPopupShown=function(e){return{type:m.ApplePayPopupShown,msg:e}},t.applePayError=function(e){return{type:m.ApplePayError,msg:e}},t.applePayClosedBySuccess=function(e){return{type:m.ApplePayClosedBySuccess,msg:e}},t.applePayClosedByFailure=F,t.updateCpfName=function(e){return{type:m.UpdateCpfName,value:e}},t.updateNonce=function(e,t){return{type:m.UpdateNonce,value:e,creditCardIframeFields:t}},t.updatePayPalNonce=function(e,t){return{type:m.UpdatePayPalNonce,value:e,email:t}},t.blurCCField=function(e){return{type:m.BlurCCField,creditCardIframeFields:e}},t.updateAdyenEncryptedCard=function(e){return{type:m.UpdateAdyenEncryptedCard,value:e}},t.updateEncryptedCardForNetworkToken=function(e,t){return{type:m.UpdateEncryptedCardForNetworkToken,cardType:e,encryptedCard:t}},t.updateApplePayToken=function(e){return{type:m.UpdateApplePayToken,value:e}},t.updateBrowserInfo=function(e){return{type:m.UpdateBrowserInfo,value:e}},t.updateThreeDsData=I,t.triggerThreeDsChallenge=function(){return{type:m.TriggerThreeDsChallenge}},t.triggerThreeDsFingerprint=function(){return{type:m.TriggerThreeDsFingerprint}},t.updateBIN=function(e){return{type:m.UpdateBIN,value:e}},t.updateAccountHolderName=function(e){return{type:m.UpdateAccountHolderName,value:e}},t.blurAccountHolderName=function(e){return{type:m.BlurAccountHolderName,value:e}},t.updateIBAN=function(e){return{type:m.UpdateIBAN,value:e}},t.blurIBAN=function(e){return{type:m.BlurIBAN,value:e}},t.updateMandateSigned=function(e){return{type:m.UpdateMandateSigned,value:e}},t.updateMarketingOptIn=function(e){return{type:m.UpdateMarketingOptIn,value:e}},t.updateTermsAndService=function(e){return{type:m.UpdateTermsAndService,value:e}},t.updateIdealBank=function(e){return{type:m.UpdateIdealBank,value:e}},t.updateEmailsToInvite=function(e,t){return function(r){r((function(e){return{type:m.UpdateEmailsToInvite,value:e}})(e)),r(C(Math.max(e.length+1,t)+""))}},t.isValidSubmitState=M})),define("modules/clean/react/payments/common/pricing/actions/actions",["require","exports","tslib","lodash","modules/core/i18n","modules/clean/payments/skus/subscription_diff","modules/clean/payments/skus/subscription_service","modules/clean/payments/dfb_util","modules/core/notify"],(function(e,t,r,a,n,o,i,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateRenewTransitionsError=t.updateRenewTransitionsSuccess=t.updateRenewTransitionsStart=t.updateTransitionsError=t.updateTransitionsSuccess=t.updateTransitionsStart=t.updatePrice=t.prepareToUpdatePrice=void 0;var u=(a=r.__importStar(a)).debounce((function(e,t){e((function(e){return{type:"UpdateRecentLoadEventStatus",recentLoadEventStatus:e}})(t))}),400),c=new i.SubscriptionService,d=a.debounce((function(e,t,r,a,n,i){var s,l={discountPercentage:100*n,discountAllowMonthly:i};if(t.currentPlanSku){var u=new o.SubscriptionDiff;u.setPlan(t.currentPlanSku),u.setTotalLicenses(r),s=[u]}else s=t.subChangePlans.plans.map((function(e){var t=o.SubscriptionDiff.fromSubscriptionStatus(e);return t.setTotalLicenses(r),t}));c.priceSet(s,a,l).then((function(t){f(e,t)})).catch((function(t){e(y(t))}))}),400),p=a.debounce((function(e,t,r,a,o){var i=t().pageState.transition,u=new s.DfBTransitionInfoFetcher([i]),c={total_users:a,country_code:o.countryCode,zip_code:o.zipCode,vat_id:o.vat,renew:!0};u.get((function(t){var r=t[0].transition_view_model;e(g(r))}),c,(function(t){l.Notify.error(n.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."})),e(_(t))}))}),400);function m(){return{type:"UpdateTransitionsStart"}}function f(e,t){e({type:"UpdateTransitionsSuccess",subChangePlans:t}),u(e,!1)}function y(e){return{type:"UpdateTransitionsError",error:e}}function h(){return{type:"UpdateRenewTransitionsStart"}}function g(e){return{type:"UpdateRenewTransitionsSuccess",transition:e}}function _(e){return{type:"UpdateRenewTransitionsError",error:e}}t.prepareToUpdatePrice=function(){return{type:"PrepareToUpdateTransitions"}},t.updatePrice=function(e){return void 0===e&&(e=!1),function(t,r){var a,n=r(),o=n.formData,i=n.pricingState,s=i.discountInfo,l=o.numberOfUsers.formattedValue,u=!0;s&&(a=s.discountRatio,u=s.allowMonthly);var c={countryCode:o.countryCode.formattedValue,zipCode:o.zipCode.formattedValue,vat:o.vat.errorState?"":o.vat.formattedValue};e?(t({type:"UpdateRenewTransitionsStart"}),p(t,r,i,l,c)):(t({type:"UpdateTransitionsStart"}),d(t,i,l,c,a,u))}},t.updateTransitionsStart=m,t.updateTransitionsSuccess=f,t.updateTransitionsError=y,t.updateRenewTransitionsStart=h,t.updateRenewTransitionsSuccess=g,t.updateRenewTransitionsError=_})),define("modules/clean/payments/dfb_util",["require","exports","tslib","lodash","modules/clean/deprecated_ajax/ajax_jquery","modules/clean/payments/validation","modules/clean/payments/cash","modules/core/exception"],(function(e,t,r,a,n,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DfBTransitionInfoFetcher=t.DfBTransitionInfo=t.DfbTransitionSpaceParams=void 0,a=r.__importStar(a),n=r.__importStar(n),o=r.__importStar(o);var l=(function(){function e(e,t,r,a,n,o,i){this.plan_ids=e,this.schedule_ids=t,this.license_ids_and_counts=r,this.currencies=a,this.country_code=n,this.zip_code=o,this.vat_id=i,this.renew=!1,this.discount_ratio=0,this.discount_allow_monthly=!1}return e.prototype.set_only_license_count=function(e){var t=Object.keys(this.license_ids_and_counts)[0];this.license_ids_and_counts[t]=e},e.prototype.get_only_license_count=function(){var e=Object.keys(this.license_ids_and_counts)[0];return this.license_ids_and_counts[e]},e.prototype.set_country_code=function(e){this.country_code=e},e.prototype.set_zip_code=function(e){this.zip_code=e},e.prototype.set_currencies=function(e){this.currencies=e},e.prototype.set_renew=function(e){this.renew=e},e.prototype.set_discount_ratio=function(e){this.discount_ratio=e},e.prototype.set_discount_allow_monthly=function(e){this.discount_allow_monthly=e},e.prototype.set_vat_id=function(e){""!==e&&o.validateVat(this.country_code||"",e)?this.vat_id=e:this.vat_id=""},e.prototype.cache_key=function(e){var t;return void 0===e&&(e=!1),this.currencies&&!e&&(t=this.currencies.join(",")),[this.plan_ids.join(","),this.schedule_ids.join(","),this.get_only_license_count(),t,this.country_code,this.zip_code,this.vat_id,this.renew,this.discount_ratio].join(":")},e.prototype.to_json=function(){var e=this.renew?{renew:1}:{};return r.__assign(r.__assign({},e),{plan_ids:JSON.stringify(this.plan_ids),schedule_ids:JSON.stringify(this.schedule_ids),license_ids_and_counts:JSON.stringify(this.license_ids_and_counts),currencies:this.currencies?JSON.stringify(this.currencies):"",country_code:this.country_code,zip_code:this.zip_code,vat_id:this.vat_id,discount_percentage:JSON.stringify(100*this.discount_ratio),discount_allow_monthly:this.discount_allow_monthly})},e.from_transition_view_models=function(t){for(var r,n=[],o=[],i=[],l=null,u=null,c=null,d=0,p=t;d<p.length;d++){var m=p[d],f=void 0;if(n.push(m.state.plan.id),o.push(m.state.schedule.id),i.push(m.state.currency),void 0===r){r={};for(var y=0,h=m.state.allocated_licenses;y<h.length;y++)r[(f=h[y]).license_id]=f.license_count;a.isObject(m.read_only_invoice)&&(l=m.read_only_invoice.tax_country_code||null,u=m.read_only_invoice.tax_exclusion_id||null,c=m.read_only_invoice.tax_zip_code||null)}else{s.assert(m.state.allocated_licenses.length===Object.keys(r).length,"License sets differ");for(var g=0,_=m.state.allocated_licenses;g<_.length;g++)f=_[g],s.assert(r.hasOwnProperty(""+f.license_id),"License sets differ"),s.assert(r[f.license_id]===f.license_count,"License count must match");s.assert(l===(m.read_only_invoice&&m.read_only_invoice.tax_country_code||null),"country code must match"),s.assert(c===(m.read_only_invoice&&m.read_only_invoice.tax_zip_code||null),"zip code must match"),s.assert(u===(m.read_only_invoice&&m.read_only_invoice.tax_exclusion_id||null),"VAT ID must match")}}return new e(a.uniq(n),a.uniq(o),r||{},a.uniq(i),l,c,u)},e})();t.DfbTransitionSpaceParams=l;var u=function(e){if(this.transition_view_model=e,this.transition_view_model.read_only_invoice?this.current_total=i.Cash.fromObject(this.transition_view_model.read_only_invoice.total):this.current_total=new i.Cash(0,this.transition_view_model.state.currency),this.price_token=this.transition_view_model.expected_price,this.transition_view_model.state.per_license_prices.length?this.per_license_price=i.Cash.fromObject(this.transition_view_model.state.per_license_prices[0].price):this.per_license_price=new i.Cash(0,this.transition_view_model.state.currency),this.recurring_total=i.Cash.fromObject(this.transition_view_model.state.total_recurring_price),this.transition_view_model.prices?this.tax=i.Cash.fromObject(this.transition_view_model.prices.tax):this.tax=new i.Cash(0,this.recurring_total.currency),this.transition_view_model.total_recurring_taxes?this.recurring_tax=i.Cash.fromObject(this.transition_view_model.total_recurring_taxes):this.recurring_tax=new i.Cash(0,this.recurring_total.currency),this.recurring_total_tax=this.recurring_total.add(this.recurring_tax),this.tax_percentage=0,this.transition_view_model.read_only_invoice){var t=this.transition_view_model.read_only_invoice.line_items,r=t.length>0?t[0]:void 0;r&&!a.isEmpty(r.country_tax_percentage)?this.tax_percentage=parseFloat(r.country_tax_percentage):r&&!a.isEmpty(r.state_tax_percentage)&&(this.tax_percentage=parseFloat(r.state_tax_percentage))}};t.DfBTransitionInfo=u;var c=(function(){function e(e){var t=this;this.has_inflight_request=function(){return Object.keys(t.transition_view_model_requests).length>0},this.add_to_cache=function(e,r){void 0===r&&(r=!1);var a=l.from_transition_view_models(e).cache_key(r),n=e.map((function(e){return new u(e)}));return t.transition_info_cache[a]=n,n},this.get_transition_info_for=function(e){return t.transition_info_cache.hasOwnProperty(e)?t.transition_info_cache[e]:null},this.default_transition_view_models=e,this.transition_view_model_requests={},this.transition_info_cache={},this.add_to_cache(this.default_transition_view_models)}return e.prototype.get=function(e,t,r){var o=this,i=l.from_transition_view_models(this.default_transition_view_models);t.total_users&&i.set_only_license_count(t.total_users),t.country_code&&i.set_country_code(t.country_code),t.currency&&i.set_currencies([t.currency]),!0===t.remove_currency&&i.set_currencies([]),t.zip_code&&i.set_zip_code(t.zip_code),a.isBoolean(t.renew)&&i.set_renew(t.renew),(t.vat_id||""===t.vat_id)&&i.set_vat_id(t.vat_id),t.discount_ratio&&i.set_discount_ratio(t.discount_ratio),a.isBoolean(t.discount_allow_monthly)&&i.set_discount_allow_monthly(t.discount_allow_monthly);var s=i.cache_key(),u=this.get_transition_info_for(s);if(u)e(u);else if(!this.transition_view_model_requests[s])return this.transition_view_model_requests[s]=!0,n.SilentBackgroundRequest({url:"/business/transition-model",type:"GET",dataType:"json",data:i.to_json(),success:function(r){delete o.transition_view_model_requests[s];var a=o.add_to_cache(r,t.remove_currency);e(a)},error:function(e){a.isFunction(r)&&r(e),delete o.transition_view_model_requests[s]}})},e})();t.DfBTransitionInfoFetcher=c}));
//# sourceMappingURL=pkg-checkout.min.js-vfl7Tm4Xt.map