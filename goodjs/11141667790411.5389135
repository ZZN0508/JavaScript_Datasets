define("modules/clean/deprecated_pyxl/controllers/tooltip",["require","exports","tslib","lodash","modules/clean/deprecated_pyxl/controller_helpers","modules/clean/analytics"],function(t,e,o,i,a,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InfoTooltip=e.DBTooltip=void 0,i=o.__importStar(i),a=o.__importStar(a);var u=[],r=(n.initClass=function(){this.prototype.tooltip_shown=!1,this.prototype.position_global=!1},n.prototype.listen=function(){var n=this;return function(){for(var t=[],e=0,o=[n.hover_target,n.tooltip];e<o.length;e++){var r=o[e];r.mouseenter(function(){return clearTimeout(n.tooltip.data("timeout_id")),n.show_tooltip()}),r.mouseleave(function(){var t=setTimeout(function(){return n.hide_tooltip()},200);return n.tooltip.data("timeout_id",t)}),n.is_focusable()?(r.focusin(function(){return clearTimeout(n.tooltip.data("timeout_id")),n.show_tooltip()}),t.push(r.focusout(function(){var t=setTimeout(function(){return n.hide_tooltip()},200);return n.tooltip.data("timeout_id",t)}))):t.push(void 0)}return t}()},n.prototype.find_hover_target=function(){return this.prompt},n.prototype.is_focusable=function(){return!1},n.prototype.show_tooltip=function(t){var e,o;if(!this.tooltip_shown){for(var r=this.position_global?this.hover_target.offset():this.hover_target.position(),n=0,i=Array.from(u);n<i.length;n++)i[n].hide_tooltip();return u.push(this),r="top"===this.tooltip_location?(o=r.top-this.tooltip.outerHeight()-this.hover_target.height()/2,e=r.left-this.tooltip.outerWidth()/2,{top:"-=7"}):"left"===this.tooltip_location?(o=r.top-this.tooltip.outerHeight()/2+this.hover_target.outerHeight()/2,e=r.left-this.tooltip.outerWidth()-2,{left:"-=7"}):"bottom"===this.tooltip_location?(o=r.top+this.hover_target.outerHeight(),e=r.left-this.tooltip.outerWidth()/2+this.hover_target.outerWidth()/2,{top:"+=7"}):(o=r.top-this.tooltip.outerHeight()/2+this.hover_target.outerHeight()/2,e=r.left+this.hover_target.width()+2,{left:"+=7"}),this.tooltip.css({top:o,left:e}).show().animate(r,50),this.hover_log_event_name&&l.TeamsWebActionsLogger.log(this.hover_log_event_name),this.tooltip_shown=!0}},n.prototype.hide_tooltip=function(){if(this.tooltip_shown){clearTimeout(this.tooltip.data("timeout_id")),this.tooltip.hide(),this.tooltip_shown=!1;var t=u.indexOf(this);return-1!==t?u.splice(t,1):void 0}},n);function n(t,e,o,r,n){this.$wrapper=t,this.prompt=this.$wrapper.find(".tooltip-prompt"),this.tooltip=this.$wrapper.find(".tooltip-tooltip"),this.hover_target=this.find_hover_target(),this.hover_log_event_name=n,this.position_global=e,this.tooltip_location=o,this.listen();e=a.clone_element(this.tooltip).appendTo("body");e.css({position:"static",display:"inline-block"});o=r||500,r=e.width()+1;this.tooltip.css({width:r=o<r?o:r,position:"absolute",display:"none"}),e.remove(),this.position_global&&this.tooltip.remove().appendTo("body"),this.is_focusable()&&(e=i.uniqueId("tooltip-tooltip-"),this.tooltip.attr({role:"tooltip",id:e}),this.hover_target.attr({tabindex:0,"aria-describedby":e}))}(e.DBTooltip=r).initClass();var s,o=(s=r,o.__extends(c,s),c.prototype.find_hover_target=function(){return this.prompt.find(".sprite")},c.prototype.is_focusable=function(){return!0},c);function c(){return null!==s&&s.apply(this,arguments)||this}e.InfoTooltip=o}),define("modules/clean/legacy_ui_button",["require","exports","tslib","jquery"],function(t,e,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),r=o.__importDefault(r),e.default=function(){var o=r.default(document);return r.default(document).on("mouseover.ui-button",".ui-button",function(){return r.default(this).addClass("over")}).on("mouseout.ui-button",".ui-button",function(){return r.default(this).removeClass("over")}).on("mousedown.ui-button",".ui-button",function(){return r.default(this).addClass("down")}).on("click.ui-button",".ui-button",function(){var t=r.default(this);return t.hasClass("ui-button-dropdown")&&(t.hasClass("active")?o.trigger("dropdownClosed",[1]):o.trigger("dropdownOpened",[1])),t.toggleClass("active")}),o.on("click.ui-button",function(t){var t=r.default(t.target).closest(".ui-button.active"),e=0;r.default(".ui-button.active").not(t).each(function(){var t=r.default(this);t.hasClass("active")&&t.hasClass("ui-button-dropdown")&&(e+=1),t.removeClass("active")}),o.trigger("dropdownClosed",[e])}).on("mouseup.ui-button",function(){return r.default(".ui-button.down").removeClass("down")})}}),define("modules/clean/photos/legacy_thumb_loader",["require","exports","tslib","jquery","modules/clean/photos/batch_thumb_loader","modules/clean/sprite"],function(t,e,o,f,g,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LegacyBatchThumbLoader=void 0,f=o.__importDefault(f),h=o.__importDefault(h),e.LegacyBatchThumbLoader={MAX_THUMB_BATCH_REQUESTS:24,batch_load_thumbs:function(t,e,n,o){for(var t=t.filter(function(t){return f.default(t).data("src")}),i={},r=0,a=t;r<a.length;r++){var l=a[r],u=String(f.default(l).data("src"));i[u]||(i[u]=[]),i[u].push(l)}this.instance?this.instance.reset({batch_size:e,batch_logger:o}):this.instance=new g.BatchThumbLoader({batch_size:e,max_parallel_requests:this.MAX_THUMB_BATCH_REQUESTS,on_batch:function(t){for(var e=0,o=t;e<o.length;e++){var r=o[e],n=f.default(i[r]);n.data("src",null),[].push(n.data("loading-src",r))}},batch_logger:o});for(var s=0,c=t;s<c.length;s++){var p=c[s],d=f.default(p),p=d.data("src");this.instance.queue_thumb(p,function(t,e,o,r){if(r||e.data("loading-src")){if(e.data("loading-src",null),0===o.indexOf("data:image"))return e.attr("src",o),"function"==typeof n?n(e[0]):void 0;e.error(function(){return e.attr("src",e.data("fail-src")||h.default.SPACER)}),e.load(function(){return"function"==typeof n?n(e[0]):void 0}),e.attr("src",o)}}.bind(this,p,d))}return this.instance.flush(),t.length},clear_all_pending_batches:function(){this.instance&&this.instance.clear()}}}),define("modules/clean/marketing_tracker",["require","exports","tslib","modules/core/exception","proto_utils/unpack","dropbox/proto/js_init_data/marketing_tracker/marketing_tracker"],function(t,a,l,u,r,n){"use strict";var s,e;Object.defineProperty(a,"__esModule",{value:!0}),a.moduleInit=a.MarketingTracker=a.getGAViewData=a.getGAEventData=a.EventTypeEnum=a.MARKETING_REGISTER_EVENT=a.MARKETING_LOGIN_EVENT=a.MARKETING_URI=void 0,u=l.__importStar(u),a.MARKETING_URI="https://marketing.dropbox.com",a.MARKETING_LOGIN_EVENT="user_login",a.MARKETING_REGISTER_EVENT="user_register",(e=s=a.EventTypeEnum||(a.EventTypeEnum={})).Link="link",e.View="view";a.getGAEventData=function(t,e,o,r){t={ga_eventaction:e,ga_eventCategory:t};return o&&(t.ga_eventLabel=o),r&&(t.ga_eventValue=r),t},a.getGAViewData=function(t,e,o){var r={};return u.assert(!o||o.startsWith("/virtual"),"virtual pageview page should start with virtual"),t&&(r.title=t),e&&(r.ga_pageview_location=e),o&&(r.ga_pageview_page=o),r},a.MarketingTracker=new function(){var i=this;return this.el=null,this.ready=!1,this.readyTimeout=null,this.push=function(t){var e=t.src,o=t.dataLayer,r=t.config,t=t.eventType,n=l.__assign(l.__assign({},o),{_config:r||{},_eventType:t||s.Link});u.assert(!!e,"MarketingTracker.push requires src"),i.ready?i.el&&i.el.contentWindow&&i.el.contentWindow.postMessage(n,a.MARKETING_URI):(i.el||(i.el=i.load(e),i.src=e,r&&(i.config=r),i.readyTimeout=setTimeout(function(){u.reportException({err:new Error("Timed-out while waiting for marketing_tracker iframe load event"),severity:"non-critical"})},3e4)),i.el.addEventListener("load",function(){null!==i.readyTimeout&&(clearTimeout(i.readyTimeout),i.readyTimeout=null),i.el&&i.el.contentWindow?(i.ready=!0,i.el.contentWindow.postMessage(n,a.MARKETING_URI)):u.reportException({err:new Error("Could not find contentWindow on marketing_tracker iframe element"),severity:"non-critical"})}))},this.load=function(t){var e=document.createElement("iframe");return e.style.display="none",e.hidden=!0,e.src=t,e.setAttribute("sandbox","allow-scripts allow-same-origin"),document.body.appendChild(e),e},this.pushWithDefaults=function(t,e){var o=i.config,r=i.src;o?(e={config:o,dataLayer:l.__assign(l.__assign({},i.config.default_marketing_data),t),src:r,eventType:e},i.push(e)):u.reportStack("MarketingTracker.pushWithDefaults requires config, which is undefined. This probably           means there is no MarketingTracker instance on the page.")},this.pushEvent=function(t,e,o){o=l.__assign({event:t,tealium_event:t},o);i.pushWithDefaults(o,e)},this.tryPushEvent=function(t,e,o){var r=i.config,n=i.src,t={event:t,tealium_event:t};o=o||{},r&&(e={config:r,dataLayer:l.__assign(l.__assign(l.__assign({},i.config.default_marketing_data),t),o),src:n,eventType:e||s.Link},i.push(e))},a.MarketingTracker||this};function i(t){for(var e={},o=t.fields,r=0,n=Object.keys(o);r<n.length;r++){var i=n[r],a=o[i];e[i]=a[a.kind]}return e}a.moduleInit=function(t){var e=r.unpackProto(t,n.marketing_tracker.MarketingTrackerData),o=e.src,t={tealium_enabled:e.config.tealiumEnabled,tealium_env:e.config.tealiumEnv,tealium_profile:e.config.tealiumProfile,default_marketing_data:i(e.config.defaultMarketingData),privacy_consent_enabled:e.config.privacyConsentEnabled},e=i(e.dataLayer);a.MarketingTracker.push({src:o,config:t,dataLayer:e})}}),define("dropbox/proto/js_init_data/marketing_tracker/marketing_tracker",["require","exports","tslib","protobufjs/minimal","google/protobuf/struct"],function(t,e,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.marketing_tracker=void 0;var i=(r=o.__importStar(r)).Reader,n=r.Writer,a=(r.util,r.roots.default||(r.roots.default={}));e.default=a,e.marketing_tracker=a.marketing_tracker=((e=a.marketing_tracker||{}).Config=function(e){function e(t){if(t)for(var e=Object.keys(t),o=0;o<e.length;++o)null!=t[e[o]]&&(this[e[o]]=t[e[o]])}return e.prototype.tealiumEnabled=!1,e.prototype.tealiumEnv="",e.prototype.tealiumProfile="",e.prototype.defaultMarketingData=null,e.prototype.privacyConsentEnabled=!1,e.create=function(t){return new e(t)},e.encode=function(t,e){return e=e||n.create(),null!=t.tealiumEnabled&&Object.hasOwnProperty.call(t,"tealiumEnabled")&&e.uint32(24).bool(t.tealiumEnabled),null!=t.tealiumEnv&&Object.hasOwnProperty.call(t,"tealiumEnv")&&e.uint32(34).string(t.tealiumEnv),null!=t.tealiumProfile&&Object.hasOwnProperty.call(t,"tealiumProfile")&&e.uint32(42).string(t.tealiumProfile),null!=t.defaultMarketingData&&Object.hasOwnProperty.call(t,"defaultMarketingData")&&a.google.protobuf.Struct.encode(t.defaultMarketingData,e.uint32(50).fork()).ldelim(),null!=t.privacyConsentEnabled&&Object.hasOwnProperty.call(t,"privacyConsentEnabled")&&e.uint32(56).bool(t.privacyConsentEnabled),e},e.decode=function(t,e){t instanceof i||(t=i.create(t));for(var o=void 0===e?t.len:t.pos+e,r=new a.marketing_tracker.Config;t.pos<o;){var n=t.uint32();switch(n>>>3){case 3:r.tealiumEnabled=t.bool();break;case 4:r.tealiumEnv=t.string();break;case 5:r.tealiumProfile=t.string();break;case 6:r.defaultMarketingData=a.google.protobuf.Struct.decode(t,t.uint32());break;case 7:r.privacyConsentEnabled=t.bool();break;default:t.skipType(7&n)}}return r},e.getTypeUrl=function(){return"type.googleapis.com/marketing_tracker.Config"},e}(e.Config||{}),e.MarketingTrackerData=function(e){function e(t){if(t)for(var e=Object.keys(t),o=0;o<e.length;++o)null!=t[e[o]]&&(this[e[o]]=t[e[o]])}return e.prototype.src="",e.prototype.config=null,e.prototype.dataLayer=null,e.create=function(t){return new e(t)},e.encode=function(t,e){return e=e||n.create(),null!=t.src&&Object.hasOwnProperty.call(t,"src")&&e.uint32(10).string(t.src),null!=t.config&&Object.hasOwnProperty.call(t,"config")&&a.marketing_tracker.Config.encode(t.config,e.uint32(18).fork()).ldelim(),null!=t.dataLayer&&Object.hasOwnProperty.call(t,"dataLayer")&&a.google.protobuf.Struct.encode(t.dataLayer,e.uint32(26).fork()).ldelim(),e},e.decode=function(t,e){t instanceof i||(t=i.create(t));for(var o=void 0===e?t.len:t.pos+e,r=new a.marketing_tracker.MarketingTrackerData;t.pos<o;){var n=t.uint32();switch(n>>>3){case 1:r.src=t.string();break;case 2:r.config=a.marketing_tracker.Config.decode(t,t.uint32());break;case 3:r.dataLayer=a.google.protobuf.Struct.decode(t,t.uint32());break;default:t.skipType(7&n)}}return r},e.getTypeUrl=function(){return"type.googleapis.com/marketing_tracker.MarketingTrackerData"},e}(e.MarketingTrackerData||{}),e)}),define("google/protobuf/struct",["require","exports","tslib","protobufjs/minimal"],function(t,e,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.google=void 0;var n,s=(r=o.__importStar(r)).Reader,i=r.Writer,c=r.util,p=r.roots.default||(r.roots.default={});e.default=p,e.google=p.google=((n=p.google||{}).protobuf=((o=n.protobuf||{}).Struct=function(e){function e(t){if(this.fields={},t)for(var e=Object.keys(t),o=0;o<e.length;++o)null!=t[e[o]]&&(this[e[o]]=t[e[o]])}return e.prototype.fields=c.emptyObject,e.create=function(t){return new e(t)},e.encode=function(t,e){if(e=e||i.create(),null!=t.fields&&Object.hasOwnProperty.call(t,"fields"))for(var o=Object.keys(t.fields),r=0;r<o.length;++r)e.uint32(10).fork().uint32(10).string(o[r]),p.google.protobuf.Value.encode(t.fields[o[r]],e.uint32(18).fork()).ldelim().ldelim();return e},e.decode=function(t,e){t instanceof s||(t=s.create(t));for(var o=void 0===e?t.len:t.pos+e,r=new p.google.protobuf.Struct;t.pos<o;){var n=t.uint32();if(n>>>3==1){r.fields===c.emptyObject&&(r.fields={});for(var i=t.uint32()+t.pos,a="",l=null;t.pos<i;){var u=t.uint32();switch(u>>>3){case 1:a=t.string();break;case 2:l=p.google.protobuf.Value.decode(t,t.uint32());break;default:t.skipType(7&u)}}r.fields[a]=l}else t.skipType(7&n)}return r},e.getTypeUrl=function(){return"type.googleapis.com/google.protobuf.Struct"},e}(o.Struct||{}),o.Value=function(e){function e(t){if(t)for(var e=Object.keys(t),o=0;o<e.length;++o)null!=t[e[o]]&&(this[e[o]]=t[e[o]])}var t;return e.prototype.nullValue=0,e.prototype.numberValue=0,e.prototype.stringValue="",e.prototype.boolValue=!1,e.prototype.structValue=null,e.prototype.listValue=null,Object.defineProperty(e.prototype,"kind",{get:c.oneOfGetter(t=["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]),set:c.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(t,e){return e=e||i.create(),null!=t.nullValue&&Object.hasOwnProperty.call(t,"nullValue")&&e.uint32(8).int32(t.nullValue),null!=t.numberValue&&Object.hasOwnProperty.call(t,"numberValue")&&e.uint32(17).double(t.numberValue),null!=t.stringValue&&Object.hasOwnProperty.call(t,"stringValue")&&e.uint32(26).string(t.stringValue),null!=t.boolValue&&Object.hasOwnProperty.call(t,"boolValue")&&e.uint32(32).bool(t.boolValue),null!=t.structValue&&Object.hasOwnProperty.call(t,"structValue")&&p.google.protobuf.Struct.encode(t.structValue,e.uint32(42).fork()).ldelim(),null!=t.listValue&&Object.hasOwnProperty.call(t,"listValue")&&p.google.protobuf.ListValue.encode(t.listValue,e.uint32(50).fork()).ldelim(),e},e.decode=function(t,e){t instanceof s||(t=s.create(t));for(var o=void 0===e?t.len:t.pos+e,r=new p.google.protobuf.Value;t.pos<o;){var n=t.uint32();switch(n>>>3){case 1:r.nullValue=t.int32();break;case 2:r.numberValue=t.double();break;case 3:r.stringValue=t.string();break;case 4:r.boolValue=t.bool();break;case 5:r.structValue=p.google.protobuf.Struct.decode(t,t.uint32());break;case 6:r.listValue=p.google.protobuf.ListValue.decode(t,t.uint32());break;default:t.skipType(7&n)}}return r},e.getTypeUrl=function(){return"type.googleapis.com/google.protobuf.Value"},e}(o.Value||{}),o.NullValue=(r={},(e=Object.create(r))[r[0]="NULL_VALUE"]=0,e),o.ListValue=function(e){function e(t){if(this.values=[],t)for(var e=Object.keys(t),o=0;o<e.length;++o)null!=t[e[o]]&&(this[e[o]]=t[e[o]])}return e.prototype.values=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(t,e){if(e=e||i.create(),null!=t.values&&t.values.length)for(var o=0;o<t.values.length;++o)p.google.protobuf.Value.encode(t.values[o],e.uint32(10).fork()).ldelim();return e},e.decode=function(t,e){t instanceof s||(t=s.create(t));for(var o=void 0===e?t.len:t.pos+e,r=new p.google.protobuf.ListValue;t.pos<o;){var n=t.uint32();n>>>3==1?(r.values&&r.values.length||(r.values=[]),r.values.push(p.google.protobuf.Value.decode(t,t.uint32()))):t.skipType(7&n)}return r},e.getTypeUrl=function(){return"type.googleapis.com/google.protobuf.ListValue"},e}(o.ListValue||{}),o),n)});
