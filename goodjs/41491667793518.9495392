YUI.add("pjax-base-patched",function(a,e){function t(){}var o=a.config.win,i=a.ClassNameManager.getClassName("pjax");t.prototype={initializer:function(){this.publish("navigate",{defaultFn:this._defNavigateFn}),this.get("html5")&&this._pjaxBindUI()},destructor:function(){this._pjaxEvents&&this._pjaxEvents.detach()},navigate:function(e,t){return e=this._resolveURL(e),!(!this._navigate(e,t)&&(this._hasSameOrigin(e)?!this.get("allowFallThrough")||(o.location=e,0):(a.error("Security error: The new URL must be of the same origin as the current URL."),1)))},_isLinkSameOrigin:function(e){var t=a.getLocation(),i=t.protocol,r=t.hostname,t=parseInt(t.port,10)||null;return e.get("protocol")===i&&e.get("hostname")===r&&(e=parseInt(e.get("port"),10)||null,"http:"===i?(t=t||80,e=e||80):"https:"===i&&(t=t||443,e=e||443),e===t)},_navigate:function(e,t){if(e=this._upgradeURL(e),!this.hasRoute(e))return!1;t=a.merge(t,{url:e});var r,i=this._getURL(),n=e.replace(/(#.*)$/,function(e,t,i){return r=t,e.substring(i)});if(r&&n===i.replace(/#.*$/,"")){if(!this.get("navigateOnHash"))return!1;t.hash=r}return"replace"in t||(t.replace=e===i),this.get("html5")||t.force?this.fire("navigate",t):o&&(t.replace?o.location.replace(e):o.location=e),!0},_pjaxBindUI:function(){this._pjaxEvents||(this._pjaxEvents=a.one("body").delegate("click",this._onLinkClick,this.get("linkSelector"),this))},_defNavigateFn:function(e){this[e.replace?"replace":"save"](e.url),o&&this.get("scrollToTop")&&setTimeout(function(){o.scroll(0,0)},1)},_onLinkClick:function(e){var t,i;1!==e.button||e.ctrlKey||e.metaKey||"A"===(t=e.currentTarget).get("tagName").toUpperCase()&&this._isLinkSameOrigin(t)&&(i=t.get("href"))&&this._navigate(i,{originEvent:e})&&e.preventDefault()}},t.ATTRS={linkSelector:{value:"a."+i,writeOnce:"initOnly"},navigateOnHash:{value:!1},scrollToTop:{value:!0},allowFallThrough:{value:!0}},a.PjaxBase=t},"@VERSION@",{requires:["classnamemanager","node-event-delegate","router"],condition:{name:"pjax-base-patched",trigger:"pjax-base",when:"instead"}}),YUI.add("view",function(s,e){function t(){t.superclass.constructor.apply(this,arguments)}s.View=s.extend(t,s.Base,{containerTemplate:"<div/>",events:{},template:"",_allowAdHocAttrs:!0,initializer:function(e){(e=e||{}).containerTemplate&&(this.containerTemplate=e.containerTemplate),e.template&&(this.template=e.template),this.events=e.events?s.merge(this.events,e.events):this.events,this.after("containerChange",this._afterContainerChange)},destroy:function(e){return e&&(e.remove||e.delete)&&this.onceAfter("destroy",function(){this._destroyContainer()}),t.superclass.destroy.call(this)},destructor:function(){this.detachEvents(),delete this._container},attachEvents:function(e){var t,i,r,n,a=this.get("container"),o=s.Object.owns;for(n in this.detachEvents(),e=e||this.events)if(o(e,n))for(r in i=e[n])o(i,r)&&(t="string"==typeof(t=i[r])?this[t]:t)&&this._attachedViewEvents.push(a.delegate(r,t,n,this));return this},create:function(e){return e?s.one(e):s.Node.create(this.containerTemplate)},detachEvents:function(){return s.Array.each(this._attachedViewEvents,function(e){e&&e.detach()}),this._attachedViewEvents=[],this},remove:function(){var e=this.get("container");return e&&e.remove(),this},render:function(){return this},_destroyContainer:function(){var e=this.get("container");e&&e.remove(!0)},_getContainer:function(e){return this._container||(e?(this._container=e,this.attachEvents()):(e=this._container=this.create(),this._set("container",e))),e},_afterContainerChange:function(){this.attachEvents(this.events)}},{NAME:"view",ATTRS:{container:{getter:"_getContainer",setter:s.one,writeOnce:!0}},_NON_ATTRS_CFG:["containerTemplate","events","template"]})},"3.16.0",{requires:["base-build","node-event-delegate"]}),YUI.add("app-base",function(o,e){var a=o.Lang,r=o.Object,i=o.PjaxBase,n=o.Router,s=o.View,t=o.ClassNameManager.getClassName,c=o.config.win,u=o.Base.create("app",o.Base,[s,n,i],{views:{},initializer:function(e){function t(e,t){i[t]=o.merge(i[t],e)}e=e||{};var i={};r.each(this.views,t),r.each(e.views,t),this.views=i,this._viewInfoMap={},this.after("activeViewChange",o.bind("_afterActiveViewChange",this)),this.get("serverRouting")||this._pjaxBindUI()},createView:function(e,t){var i=this.getViewInfo(e),e=i&&i.type||s,t=new(a.isString(e)?r.getValue(o,e.split(".")):e)(t);return this._viewInfoMap[o.stamp(t,!0)]=i,t},getViewInfo:function(e){return a.isString(e)?this.views[e]:e&&this._viewInfoMap[o.stamp(e,!0)]},render:function(){var e=o.App.CLASS_NAMES,t=this.get("container"),i=this.get("viewContainer"),r=this.get("activeView"),n=r&&r.get("container"),a=t.compareTo(i);return t.addClass(e.app),i.addClass(e.views),r&&!i.contains(n)&&i.appendChild(n),t.contains(i)||a||t.appendChild(i),this},showView:function(e,t,i,r){var n;return i=i||{},r?i=o.merge(i,{callback:r}):a.isFunction(i)&&(i={callback:i}),a.isString(e)&&((r=this.getViewInfo(e))&&r.preserve&&r.instance?(e=r.instance,this._viewInfoMap[o.stamp(e,!0)]=r):(e=this.createView(e,t),n=!0)),i.update&&!n&&e.setAttrs(t),"render"in i?i.render&&e.render():n&&e.render(),this._set("activeView",e,{options:i})},_attachView:function(e,t){var i,r;e&&(i=this.getViewInfo(e),r=this.get("viewContainer"),e.addTarget(this),i&&(i.instance=e),r[t?"prepend":"append"](e.get("container")))},_destroyContainer:function(){var e=o.App.CLASS_NAMES,t=this.get("container"),i=this.get("viewContainer"),r=t.compareTo(i);if(o.one("body").compareTo(t))return this.detachEvents(),t.removeClass(e.app),void(r?t.removeClass(e.views):i.remove(!0));i.remove(!0),r||t.remove(!0)},_detachView:function(e){var t;e&&((t=this.getViewInfo(e)||{}).preserve?e.remove():(e.destroy({remove:!0}),delete this._viewInfoMap[o.stamp(e,!0)],e===t.instance&&delete t.instance),e.removeTarget(this))},_getRequest:function(){var e=n.prototype._getRequest.apply(this,arguments);return e.app=this,e},_getViewContainer:function(e){return e||this._viewContainer||(e=this._viewContainer=this.create(),this._set("viewContainer",e)),e},_initHtml5:function(){return!1!==this.get("serverRouting")&&n.html5},_isChildView:function(e,t){e=this.getViewInfo(e),t=this.getViewInfo(t);return!(!e||!t)&&this.getViewInfo(e.parent)===t},_isParentView:function(e,t){e=this.getViewInfo(e),t=this.getViewInfo(t);return!(!e||!t)&&this.getViewInfo(t.parent)===e},_navigate:function(e,t){return this.get("serverRouting")||(t=o.merge({force:!0},t)),i.prototype._navigate.call(this,e,t)},_save:function(e,t){var i;return this.get("serverRouting")&&!this.get("html5")?(this._hasSameOrigin(e)?c&&(i=this._joinURL(e||""),t?c.location.replace(i):c.location=i):o.error("Security error: The new URL must be of the same origin as the current URL."),this):n.prototype._save.apply(this,arguments)},_uiSetActiveView:function(e,t,i){var r=(i=i||{}).callback,n=!this._isChildView(e,t)&&this._isParentView(e,t),n=!!i.prepend||n;if(e===t)return r&&r.call(this,e);this._attachView(e,n),this._detachView(t),r&&r.call(this,e)},_afterActiveViewChange:function(e){this._uiSetActiveView(e.newVal,e.prevVal,e.options)}},{ATTRS:{activeView:{value:null,readOnly:!0},container:{valueFn:function(){return o.one("body")}},html5:{valueFn:"_initHtml5"},linkSelector:{value:"a"},serverRouting:{valueFn:function(){return o.App.serverRouting},writeOnce:"initOnly"},viewContainer:{getter:"_getViewContainer",setter:o.one,writeOnce:!0}},_NON_ATTRS_CFG:["views"]});o.namespace("App").Base=u,o.App=o.mix(o.Base.create("app",u,[]),o.App,!0),o.App.CLASS_NAMES={app:t("app"),views:t("app","views")}},"3.16.0",{requires:["classnamemanager","pjax-base","router","view"]}),YUI.add("querystring-stringify-simple",function(s,e){var t=s.namespace("QueryString"),c=encodeURIComponent;t.stringify=function(e,t){var i,r,n,a=[],o=!(!t||!t.arrayKey);for(i in e)if(e.hasOwnProperty(i))if(s.Lang.isArray(e[i]))for(r=0,n=e[i].length;r<n;r++)a.push(c(o?i+"[]":i)+"="+c(e[i][r]));else a.push(c(i)+"="+c(e[i]));return a.join("&")}},"3.16.0",{requires:["yui-base"]}),YUI.add("io-base",function(d,e){function r(e){this._uid="io:"+t++,this._init(e),d.io._map[this._uid]=this}var u=["start","complete","end","success","failure","progress"],p=["status","statusText","responseText","responseXML"],a=d.config.win,t=0;r.prototype={_id:0,_headers:{"X-Requested-With":"XMLHttpRequest"},_timeout:{},_init:function(e){var t,i;for(this.cfg=e||{},d.augment(this,d.EventTarget),t=0,i=u.length;t<i;++t)this.publish("io:"+u[t],d.merge({broadcast:1},e)),this.publish("io-trn:"+u[t],e)},_create:function(t,e){var r=this,i={id:d.Lang.isNumber(e)?e:r._id++,uid:r._uid},n=t.xdr?t.xdr.use:null,e=t.form&&t.form.upload?"iframe":null;return"native"===n&&(n=d.UA.ie&&!h?"xdr":null,r.setHeader("X-Requested-With")),(i=(e=n||e)?d.merge(d.IO.customTransport(e),i):d.merge(d.IO.defaultTransport(),i)).notify&&(t.notify=function(e,t,i){r.notify(e,t,i)}),e||a&&a.FormData&&t.data instanceof a.FormData&&(i.c.upload.onprogress=function(e){r.progress(i,e,t)},i.c.onload=function(e){r.load(i,e,t)},i.c.onerror=function(e){r.error(i,e,t)},i.upload=!0),i},_destroy:function(e){!a||e.notify||e.xdr||(i&&!e.upload?e.c.onreadystatechange=null:e.upload?(e.c.upload.onprogress=null,e.c.onload=null,e.c.onerror=null):d.UA.ie&&!e.e&&e.c.abort()),e.c=null},_evt:function(e,t,i){var r,n=this,a=i.arguments,o=n.cfg.emitFacade,s="io:"+e,c="io-trn:"+e;this.detach(c),t.e&&(t.c={status:0,statusText:t.e}),r=[o?{id:t.id,data:t.c,cfg:i,arguments:a}:t.id],o||(e===u[0]||e===u[2]||(t.evt?r.push(t.evt):r.push(t.c)),a&&r.push(a)),r.unshift(s),n.fire.apply(n,r),i.on&&(r[0]=c,n.once(c,i.on[e],i.context||d),n.fire.apply(n,r))},start:function(e,t){this._evt(u[0],e,t)},complete:function(e,t){this._evt(u[1],e,t)},end:function(e,t){this._evt(u[2],e,t),this._destroy(e)},success:function(e,t){this._evt(u[3],e,t),this.end(e,t)},failure:function(e,t){this._evt(u[4],e,t),this.end(e,t)},progress:function(e,t,i){e.evt=t,this._evt(u[5],e,i)},load:function(e,t,i){e.evt=t.target,this._evt(u[1],e,i)},error:function(e,t,i){e.evt=t,this._evt(u[4],e,i)},_retry:function(e,t,i){return this._destroy(e),i.xdr.use="flash",this.send(t,i,e.id)},_concat:function(e,t){return e+=(-1===e.indexOf("?")?"?":"&")+t},setHeader:function(e,t){t?this._headers[e]=t:delete this._headers[e]},_setHeaders:function(i,r){r=d.merge(this._headers,r),d.Object.each(r,function(e,t){"disable"!==e&&i.setRequestHeader(t,r[t])})},_startTimeout:function(e,t){var i=this;i._timeout[e.id]=setTimeout(function(){i._abort(e,"timeout")},t)},_clearTimeout:function(e){clearTimeout(this._timeout[e]),delete this._timeout[e]},_result:function(e,t){var i;try{i=e.c.status}catch(e){i=0}200<=i&&i<300||304===i||1223===i?this.success(e,t):this.failure(e,t)},_rS:function(e,t){var i=this;4===e.c.readyState&&(t.timeout&&i._clearTimeout(e.id),setTimeout(function(){i.complete(e,t),i._result(e,t)},0))},_abort:function(e,t){e&&e.c&&(e.e=t,e.c.abort())},send:function(t,i,e){var r,n,a,o,s,c=this,u=t,l={};if(i=i?d.Object(i):{},r=c._create(i,e),n=i.method?i.method.toUpperCase():"GET",e=i.sync,s=i.data,d.Lang.isObject(s)&&!s.nodeType&&!r.upload&&d.QueryString&&d.QueryString.stringify&&(i.data=s=d.QueryString.stringify(s)),i.form){if(i.form.upload)return c.upload(r,t,i);s=c._serialize(i.form,s)}if(s=s||"")switch(n){case"GET":case"HEAD":case"DELETE":u=c._concat(u,s),s="";break;case"POST":case"PUT":i.headers=d.merge({"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},i.headers)}if(r.xdr)return c.xdr(u,r,i);if(r.notify)return r.c.send(r,t,i);e||r.upload||(r.c.onreadystatechange=function(){c._rS(r,i)});try{if(r.c.open(n,u,!e,i.username||null,i.password||null),c._setHeaders(r.c,i.headers||{}),c.start(r,i),i.xdr&&i.xdr.credentials&&h&&(r.c.withCredentials=!0),r.c.send(s),e){for(a=0,o=p.length;a<o;++a)l[p[a]]=r.c[p[a]];return l.getAllResponseHeaders=function(){return r.c.getAllResponseHeaders()},l.getResponseHeader=function(e){return r.c.getResponseHeader(e)},c.complete(r,i),c._result(r,i),l}}catch(e){if(r.xdr)return c._retry(r,t,i);c.complete(r,i),c._result(r,i)}return i.timeout&&c._startTimeout(r,i.timeout),{id:r.id,abort:function(){return!!r.c&&c._abort(r,"abort")},isInProgress:function(){return!!r.c&&r.c.readyState%4},io:c}}},d.io=function(e,t){var i=d.io._map["io:0"]||new r;return i.send.apply(i,[e,t])},d.io.header=function(e,t){(d.io._map["io:0"]||new r).setHeader(e,t)},d.IO=r,d.io._map={};var i=a&&a.XMLHttpRequest,n=a&&a.XDomainRequest,o=a&&a.ActiveXObject,h=i&&"withCredentials"in new XMLHttpRequest;d.mix(d.IO,{_default:"xhr",defaultTransport:function(e){if(!e)return{c:d.IO.transports[d.IO._default](),notify:"xhr"!==d.IO._default};d.IO._default=e},transports:{xhr:function(){return i?new XMLHttpRequest:o?new ActiveXObject("Microsoft.XMLHTTP"):null},xdr:function(){return n?new XDomainRequest:null},iframe:function(){return{}},flash:null,nodejs:null},customTransport:function(e){var t={c:d.IO.transports[e]()};return t["xdr"===e||"flash"===e?"xdr":"notify"]=!0,t}}),d.mix(d.IO.prototype,{notify:function(e,t,i){switch(e){case"timeout":case"abort":case"transport error":t.c={status:0,statusText:e},e="failure";default:this[e].apply(this,[t,i])}}})},"3.16.0",{requires:["event-custom-base","querystring-stringify-simple"]}),YUI.add("pjax-content",function(n,e){function t(){}t.prototype={getContent:function(e){var t={},i=this.get("contentSelector"),r=n.Node.create(e||""),e=this.get("titleSelector");return t.node=i&&r?r.all(i).toFrag():r,e&&r&&((e=r.one(e))&&(t.title=e.get("text"))),t},loadContent:function(e,t,i){var r=e.url;this._request&&this._request.abort(),this.get("addPjaxParam")&&(r=r.replace(/([^#]*)(#.*)?$/,function(e,t,i){return(t+=(-1<t.indexOf("?")?"&":"?")+"pjax=1")+(i||"")})),this._request=n.io(r,{arguments:{route:{req:e,res:t,next:i},url:r},context:this,headers:{"X-PJAX":"true"},timeout:this.get("timeout"),on:{complete:this._onPjaxIOComplete,end:this._onPjaxIOEnd}})},_onPjaxIOComplete:function(e,t,i){var r=this.getContent(t.responseText),n=i.route,a=n.req,o=n.res;a.ioURL=i.url,o.content=r,o.ioResponse=t,n.next()},_onPjaxIOEnd:function(){this._request=null}},t.ATTRS={addPjaxParam:{value:!0},contentSelector:{value:null},titleSelector:{value:"title"},timeout:{value:3e4}},n.PjaxContent=t},"3.16.0",{requires:["io-base","node-base","router"]}),YUI.add("app-content",function(s,e){function t(){i.apply(this,arguments)}var i=s.PjaxContent;t.route=["loadContent","_contentRoute"],t.prototype={showContent:function(e,t,i){e=s.one(e),"function"==typeof t&&(t={callback:t},i=null);var r,n=(t=s.merge({render:!1},t)).view||"",a="string"==typeof n?n:n.name,o="string"!=typeof n?n.config:{},n=this.getViewInfo(a);return delete t.view,(e=e&&e.isFragment()&&1===e.get("childNodes").size()?e.get("firstChild"):e)&&1===e.get("nodeType")?r=e:(n=("string"==typeof(n=n&&n.type||s.View)?s.Object.getValue(s,n.split(".")):n).prototype.containerTemplate,(r=s.Node.create(n)).append(e)),o=s.merge(o,{container:r}),this.showView(a,o,t,i)},_contentRoute:function(e,t,i){var r,n=t.content,a=s.config.doc;if(!n||!n.node)return i();n.title&&a&&(r=this.onceAfter("activeViewChange",function(){a.title=n.title})),this.showContent(n.node),r&&r.detach(),i()}},t.ATTRS=s.Attribute.protectAttrs(i.ATTRS),s.mix(t,i,!1,null,1),s.App.Content=t,s.Base.mix(s.App,[t])},"3.16.0",{requires:["app-base","pjax-content"]}),YUI.add("timers",function(e,t){function i(e){this.capacity=this.snap(e),this.length=0,this.front=0,this.initialize()}function a(e,t,i,r,n){for(var a=0;a<n;++a)i[a+r]=e[a+t]}function r(){for(;0<p.length;){var e=p.shift();try{e.call()}catch(e){if(y)throw f(),e;setTimeout(function(){throw e},0)}}h=!1}function n(e){y&&g.domain&&(e=g.domain.bind(e)),p.push(e),h||(f(),h=!0)}function o(e){var t;return o._asynchronizer(function(){t||e()}),{cancel:function(){t=1}}}var s={},c=e.config.global;(s.exports=i).prototype.push=function(e){var t=this.length;this.capacity<=t&&this.grow(this.snap(this.capacity*this.growFactor)),this[this.front+t&this.capacity-1]=e,this.length=t+1},i.prototype.shift=function(){var e=this.front,t=this[e];return this[e]=void 0,this.front=e+1&this.capacity-1,this.length--,t},i.prototype.grow=function(e){var t=this.front,i=this.capacity,r=new Array(i),n=this.length;a(this,0,r,0,i),this.capacity=e,this.initialize(),this.front=0,t+n<=i?a(r,t,this,0,n):(a(r,t,this,0,i=n-(t+n&i-1)),a(r,0,this,i,n-i))},i.prototype.initialize=function(){for(var e=this.capacity,t=0;t<e;++t)this[t]=void 0},i.prototype.snap=function(e){return"number"!=typeof e?this.minCapacity:(e=Math.min(this.maxCapacity,Math.max(this.minCapacity,e)),e>>>=0,--e,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,(e|=e>>16)+1)},i.prototype.maxCapacity=1<<30|0,i.prototype.minCapacity=16,i.prototype.growFactor=8;var i,u,l,d,p=new(i=i)(1024),h=!1,f=void 0,m="function"==typeof setImmediate,g=c.process,y=!!g&&"[object process]"==={}.toString.call(g);f=y?function(){var e=g.domain;e&&((u=u||i).active=g.domain=null),h&&m?setImmediate(r):g.nextTick(r),e&&(u.active=g.domain=e)}:m?function(){setImmediate(r)}:"undefined"!=typeof MessageChannel?((l=new MessageChannel).port1.onmessage=function(){f=d,(l.port1.onmessage=r)()},d=function(){l.port2.postMessage(0)},function(){setTimeout(r,0),d()}):function(){setTimeout(r,0)},s.exports=n,o._asynchronizer=n,o._impl="asap",e.soon=o},"3.16.0",{requires:["yui-base"]}),YUI.add("promise",function(e,t){function a(e){if(!(this instanceof a))return new a(e);var t=new a.Resolver(this);this._resolver=t;try{e.call(this,function(e){t.resolve(e)},function(e){t.reject(e)})}catch(e){t.reject(e)}}function i(e){this._callbacks=[],this._errbacks=[],this.promise=e,this._status="pending",this._result=null}var c=e.Lang,r=[].slice;e.mix(a.prototype,{then:function(i,r){var e=this.constructor,n=this._resolver;return new e(function(e,t){n._addCallbacks("function"==typeof i?a._wrap(e,t,i):e,"function"==typeof r?a._wrap(e,t,r):t)})},catch:function(e){return this.then(void 0,e)},getStatus:function(){return this._resolver.getStatus()}}),a._wrap=function(i,r,n){return function(e){var t;try{t=n(e)}catch(e){return void r(e)}i(t)}},a.isPromise=function(e){var t;try{t=e.then}catch(e){}return"function"==typeof t},a.resolve=function(t){return a.isPromise(t)&&t.constructor===this?t:new this(function(e){e(t)})},a.reject=function(i){return new this(function(e,t){t(i)})},a.all=function(o){var s=this;return new s(function(i,e){if(c.isArray(o)){var r=o.length,t=0,n=o.length,a=[];if(n<1)return i(a);for(;t<n;t++)s.resolve(o[t]).then(function(t){return function(e){a[t]=e,--r||i(a)}}(t),e)}else e(new TypeError("Promise.all expects an array of values or promises"))})},a.race=function(n){var a=this;return new a(function(e,t){if(c.isArray(n))for(var i=0,r=n.length;i<r;i++)a.resolve(n[i]).then(e,t);else t(new TypeError("Promise.race expects an array of values or promises"))})},e.Promise=a,e.mix(i.prototype,{fulfill:function(e){"pending"===this._status&&(this._result=e,this._status="fulfilled"),"fulfilled"===this._status&&(this._notify(this._callbacks,this._result),this._callbacks=[],this._errbacks=null)},reject:function(e){"pending"===this._status&&(this._result=e,this._status="rejected"),"rejected"===this._status&&(this._notify(this._errbacks,this._result),this._callbacks=null,this._errbacks=[])},resolve:function(e){var t=this;a.isPromise(e)?e.then(function(e){t.resolve(e)},function(e){t.reject(e)}):this.fulfill(e)},then:function(e,t){return this.promise.then(e,t)},_addCallbacks:function(e,t){var i=this._callbacks,r=this._errbacks,n=this._status,a=this._result;i&&"function"==typeof e&&i.push(e),r&&"function"==typeof t&&r.push(t),"fulfilled"===n?this.fulfill(a):"rejected"===n&&this.reject(a)},getStatus:function(){return this._status},_notify:function(i,r){i.length&&e.soon(function(){for(var e=0,t=i.length;e<t;++e)i[e](r)})}},!0),e.Promise.Resolver=i,e.when=function(e,t,i){return e=a.resolve(e),t||i?e.then(t,i):e},e.batch=function(){return a.all(r.call(arguments))}},"3.16.0",{requires:["timers"]}),YUI.add("flickr-promise",function(n,e){"use strict";var a=require("hermes-core/flog")(e);n.FlickrPromise=function(t){"object"!=typeof t&&a.error("Incorrect use of Y.FlickrPromise. You should only be using Y.FlickrPromise as a wrapper for Y.Promise.all.");var i=Object.keys(t),e=i.map(function(e){return t[e]}),r={};return n.Promise.all(e).then(function(e){for(;e.length;)r[i.shift()]=e.shift();return r})},n.RetryablePromise=function(t,i,r){return r=r||0,t(r+=1,i=i||1).catch(function(e){if(r<i)return n.RetryablePromise(t,i,r);throw e})},n.PromiseCatcher=function(t){return t=t||"unnamed module",function(e){throw a.warn("Uncaught Promise exception",{module:t,err:e}),e}},n.FetcherErrorLogger=function(t){return t=t||"unnamed module",function(e){throw e.fatal?a.error("failed getting or processing API response",{module:t,err:e}):a.log("failed getting or processing API response",{module:t,err:e}),e}},n.PromiseChainDestroyer=function(){return new n.Promise(function(){})}},"@VERSION@",{requires:["promise"]}),YUI.add("list-proxy",function(m){function e(e,t,i){this.registry=e,this.attrName=i,this.attrDef=this.registry.attributes[i],this.id=t,this.isListProxy=!0}function a(e){return c[e]}function o(e){delete c[e]}function g(e,t,i,r){if(!r||!m.Lang.isFunction(r.run))return m.Promise.reject("[list-proxy] `_cacheFetches` fetchFcn.run is not a function");var n=e+JSON.stringify(t);return a(n)||(e=n,i=r.run.call(r,t,i).then(function(e){return o(n),e},function(e){throw o(n),e}),c[e]=i,a(n))}function s(e,t,i){for(var r,n=t;n<i;n++)if(void 0===(r=e[n])||!r.registry.exists(r.id))return;return 1}var c,i="hasMaxBoundary",r="hasMinBoundary";e.prototype={getPage:function(e){e=m.merge({page:1,perPage:20},e,this.attrDef.pageFetch);return e.id=this.id,m.ListProxyStatic.fetchListByPage(e,this.registry,this.attrName)},getRange:function(e){e=m.merge({offset:0,limit:10},e,this.attrDef.rangeFetch);return e.id=this.id,m.ListProxyStatic.fetchListByRange(e,this.registry,this.attrName)},getContext:function(e){var t=m.merge({numPrev:10,numNext:10},e,this.attrDef.contextFetch);return t.id=this.id,t.listItemId=e[t.listItemIdField],m.ListProxyStatic.fetchListByContext(t,this.registry,this.attrName)},getList:function(){return this.registry._data[this.id][this.attrName]||[]},appendToListMulti:function(e){var t=m.clone(this.registry._data[this.id][this.attrName])||[];e.forEach(function(e){t.push(e)}),t.hasMinBoundary=this.hasMinBoundary(),t.hasMaxBoundary=this.hasMaxBoundary(),this.registry.setValue(this.id,this.attrName,t,!1)},appendToList:function(e){var t=m.clone(this.registry._data[this.id][this.attrName])||[];t.push(e),t.hasMinBoundary=this.hasMinBoundary(),t.hasMaxBoundary=this.hasMaxBoundary(),this.registry.setValue(this.id,this.attrName,t,!1)},prependToList:function(e){(this.registry._data[this.id][this.attrName]||[]).unshift(e)},getFromListByID:function(t,i){var e=this.registry._data[this.id][this.attrName]||[],r=!1;return m.Array.some(e,function(e){e[i||"id"]===t&&(r=e)}),r||!1},removeFromList:function(t,i){var e=this.registry._data[this.id][this.attrName]||[],r=0;0!==e.length&&(m.Array.some(e,function(e){return r++,e[i||"id"]===t}),r===e.length&&e[r-1][i||"id"]!==t||0<r&&((e=e.slice(0,r-1).concat(e.slice(r))).hasMinBoundary=this.hasMinBoundary(),e.hasMaxBoundary=this.hasMaxBoundary(),this.registry.setValue(this.id,this.attrName,e)))},setMinBoundary:function(){this.getList()[r]=!0},hasMinBoundary:function(){return!!this.getList()[r]},setMaxBoundary:function(){this.getList()[i]=!0},hasMaxBoundary:function(){return!!this.getList()[i]},toJSON:function(){var t=[];return m.Array.each(this.getList(),function(e){t.push(e.toJSON())}),t}},c={},m.ListProxy=e,m.ListProxyStatic={setBoundary:function(e,t){e["min"===t?r:i]=!0},fetchListByContext:function(e,t,i){var r,n,a,o,s=m.merge({},e),e=t.getValue(s.id,i),c=e.getList(),u=-1,l=e.hasMinBoundary&&e.hasMinBoundary(),d=e.hasMaxBoundary&&e.hasMaxBoundary(),p=t.attributes[i].contextFetch.listFetcher,h=s.numNext,f=s.numPrev;return s.refetchAt=void 0!==s.refetchAt?s.refetchAt:5,c.some(function(e,t){return e.getValue("id")===s.listItemId&&(u=t+1),!e.registry.exists(e.id)})||1===u&&!l||u===c.length&&!d||-1===u?(s.numPrev=s.numPrev+s.refetchAt,s.numNext=s.numNext+s.refetchAt,g("context",s,t.appContext,p)):(e=u+s.numNext,i=c.length,r=c[0].getValue("id"),n=c[i-1].getValue("id"),a=c.slice(0,1===u?0:u-1).reverse().slice(0,s.numPrev),o=c.slice(u,e),i<e&&u<s.numPrev&&!l&&!d?g("context",s,t.appContext,p):i<e&&!d?(s.photoId=n,s.numPrev=0,s.numNext=e-i,g("context",s,t.appContext,p).then(function(e){return{previous:a,next:o.concat(e.next).slice(0,h)}})):u<=s.numPrev&&!l?(s.photoId=r,s.numNext=0,s.numPrev=s.numPrev-u+1,g("context",s,t.appContext,p).then(function(e){return{previous:a.concat(e.previous).slice(0,f),next:o}})):new m.Promise(function(e){e({previous:a,next:o}),u>=c.length-s.numNext&&0<s.refetchAt&&!d&&(s.photoId=n,s.numPrev=0,s.numNext=s.refetchAt,g("context",s,t.appContext,p)),u-1<=s.numPrev&&0<s.refetchAt&&!l&&(s.photoId=r,s.numPrev=s.refetchAt,s.numNext=0,g("context",s,t.appContext,p))}))},fetchListByPage:function(e,t,i){var r=m.merge({},e),n=t.getValue(r.id,i),a=n.getList(),o=r.perPage*(r.page-1),e=r.perPage*(r.page-1)+r.perPage;return!(n.hasMinBoundary&&n.hasMinBoundary()&&a.length>=e||n.hasMaxBoundary&&n.hasMaxBoundary()&&n.hasMinBoundary&&n.hasMinBoundary())||!s(a,o,e)&&t.attributes[i].pageFetch?g("page",r,t.appContext,t.attributes[i].pageFetch.listFetcher):m.Promise.resolve(a.slice(o,e))},fetchListByRange:function(e,t,i){var r=t.getValue(e.id,i).getList(),n=e.offset,a=e.offset+e.limit;return r.length>=a&&s(r,n,a)?m.Promise.resolve(r.slice(n,a)):g("range",e,t.appContext,t.attributes[i].rangeFetch.listFetcher)}}},"@VERSION@"),YUI.add("api-helper",function(m){function r(e){return e&&"string"==typeof e?e.replace(/(?:c|farm)\d\.static\.?flickr\.com/,m.config.flickr.xmen.host):e}function o(e){var t,i=/^https?:/;if("string"==typeof e)return r(e.replace(i,""));for(t in e)e[t]=e[t]?e[t].replace(i,""):null,e[t]=r(e[t]);return e}function n(i,e){var a={};return!e&&i.id?m.Object.each(i,function(e,t){var t=/^url_([a-z0-9]+)$/.exec(t);t&&(t=t[1],a[t]={displayUrl:o(i["url_"+t]),width:parseInt(i["width_"+t],10),height:parseInt(i["height_"+t],10)},i["url_"+t+"_cdn"]?(YUI.Env.isServer||(m.config.flickr.cdnUrls=!0),a[t].url=o(i["url_"+t+"_cdn"])):(YUI.Env.isServer||(m.config.flickr.cdnUrls=!1),a[t].url=o(i["url_"+t])))}):i&&i[0]&&i[0].location?m.Object.each(i,function(e,t){var i,r,n=/_[a-z0-9]+_([a-z])\./.exec(e.location);n&&0<e.width&&0<e.width&&"o"!==n[1]&&(r=i=n[1],n=new RegExp("_("+i+")\\.$"),r="m"===i?"s":i,a[r="l"===i?"m":i]={displayUrl:o(e.location),width:parseInt(e.width,10),height:parseInt(e.height,10),url:o(e.location.replace(n,"_"+r+".")),key:r})}):m.Array.each(i,function(e,t,i){var r;"video"===e.media||(r=/sizes\/(\w+)\/?$/.exec(e.url)[1])&&(a[r]={displayUrl:o(e.source),width:parseInt(e.width,10),height:parseInt(e.height,10)},e.source_cdn?(YUI.Env.isServer||(m.config.flickr.cdnUrls=!0),a[r].url=o(e.source_cdn)):(YUI.Env.isServer||(m.config.flickr.cdnUrls=!1),a[r].url=o(e.source)))}),a}function g(t,e){var i={id:t.id,title:t.title,description:t.description&&t.description.content||"",sizes:n(t),needsInterstitial:t.needsInterstitial,canComment:t.canComment,canPublicComment:t.publiceditability?t.publiceditability.cancomment:0,canAddMeta:t.canAddMeta||t.canAddmeta,canPrint:t.canPrint||0,safetyLevel:t.safetyLevel,license:t.license,mediaType:t.media,secret:t.secret,rotation:t.rotation,oWidth:t.oWidth?parseInt(t.oWidth,10):0,oHeight:t.oHeight?parseInt(t.oHeight,10):0,isVideoPending:t.video?t.video.pending:0,isVideoFailed:t.video?t.video.failed:0,systemModerated:t.system_moderated||0};return"processing"===t.mediaStatus?i.isVideoPending=1:"failed"===t.mediaStatus&&(i.isVideoFailed=1),i.owner={pathAlias:t.pathalias||t.pathAlias,username:t.ownername,realname:t.realname,id:e||t.owner,buddyicon:o(t.iconurls),isAdFree:t.isAdFree,isPro:t.ispro,proBadge:t.proBadge,dateCreated:t.ownerDatecreate},i.engagement={id:t.id,ownerNsid:e||t.owner,isFaved:t.isfavorite||!1,canShare:t.canShare,canDownload:t.canDownload,canPrint:t.canPrint,commentCount:t.countComments,faveCount:t.countFaves,viewCount:t.countViews},i.stats={id:t.id,dateTaken:t.datetaken,datePosted:t.dateupload,takenGranularity:t.datetakengranularity,isDateTakenUnknown:t.datetakenunknown||"1"===t.datetakenunknown||1===t.datetakenunknown},["ispublic","isfriend","isfamily","permissions"].every(function(e){return t.hasOwnProperty(e)})&&(i.privacy={id:t.id,isPublic:t.ispublic,isVisibleByFriends:t.isfriend,isVisibleByFamily:t.isfamily,permAddMeta:t.permissions?t.permissions.permaddmeta:0,permComment:t.permissions?t.permissions.permcomment:0,permPrint:t.permissions?t.permissions.permprint:0}),i}function a(e){e={id:e.id,pageNumber:e.pageNumber,template:parseInt(e.template,10),countPhotos:e.countPhotos,backgroundColor:e.backgroundColor};return m.Lang.isNumber(e.backgroundColor)&&(e.backgroundColor=""+e.backgroundColor,e.backgroundColor=e.backgroundColor.match(/.{1,3}/g).join(",")),e}function i(e){return{id:e.nsid||e.user,username:e.username,realname:e.realname,iconfarm:e.iconfarm,iconserver:e.iconserver,pathAlias:e.pathAlias,buddyicon:e.iconUrls||e.iconurls||{}}}function s(e){var i=m.Lang.isObject(e)&&e.primaryPhotoExtras,r={};return m.Lang.isObject(i)&&(m.Object.each(i,function(e,t){var t=/^url_([a-z]+)$/.exec(t);t&&(t=t[1],r[t]={displayUrl:o(e),width:parseInt(i["width_"+t],10),height:parseInt(i["height_"+t],10)},i["url_"+t+"_cdn"]?(YUI.Env.isServer||(m.config.flickr.cdnUrls=!0),r[t].src=o(i["url_"+t+"_cdn"])):(YUI.Env.isServer||(m.config.flickr.cdnUrls=!1),r[t].src=o(i["url_"+t])))}),delete e.primaryPhotoExtras),r}var e=["can_addmeta","can_comment","can_download","can_print","can_share","contact","count_comments","count_faves","count_views","date_taken","date_upload","description","icon_urls_deep","isfavorite","ispro","license","media","needs_interstitial","owner_name","owner_datecreate","path_alias","perm_print","realname","rotation","safety_level","secret_k","secret_h","url_sq","url_q","url_t","url_s","url_n","url_w","url_m","url_z","url_c","url_l","url_h","url_k","url_3k","url_4k","url_f","url_5k","url_6k","url_o","visibility","visibility_source","o_dims","publiceditability","system_moderation"],t=["datecreate","date_activity","eighteenplus","invitation_only","needs_interstitial","non_members_privacy","pool_pending_count","privacy","member_pending_count","icon_urls","date_activity_detail","muted"],c=["url_sq","url_q","url_t","url_s","url_n","url_w","url_m","url_z","url_c","url_l","url_h","url_k","url_3k","url_4k","url_5k","url_6k","url_o","path_alias","owner_name"],u=["can_comment","can_print","count_comments","count_faves","description","isfavorite","license","media","needs_interstitial","owner_name","path_alias","realname","rotation","url_sq","url_q","url_t","url_s","url_n","url_w","url_m","url_z","url_c","url_l"],l=["owner_name","path_alias","realname","sizes","url_sq","url_q","url_t","url_s","url_n","url_w","url_m","url_z","url_c","url_l","url_h","url_k","url_3k","url_4k","url_5k","url_6k","needs_interstitial"],d=["icon_urls","safe_search","galleries_view_layout_pref"],p={fave:function(e){return{id:m.guid(),type:e.type,owner:i(e),timestamp:e.dateadded}},comment:function(e){return{id:e.commentid,type:e.type,owner:i(e),content:e._content,timestamp:e.dateadded}},contacted:function(e){return{id:m.guid(),type:e.type,owner:i(e),timestamp:e.dateadded}},gallery:function(e,t){return{id:m.guid(),type:e.type,owner:i(e),gallery:t,timestamp:e.dateadded}},people:function(e,t){return{id:m.guid(),type:e.type,owner:i(e),timestamp:e.dateadded,personTagged:t.personTagged,tagger:t.tagger}},tag:function(e){return{id:m.guid(),type:e.type,owner:i(e),timestamp:e.dateadded}},photo_comment_mention:function(e){return{id:m.guid(),type:e.type,owner:i(e),timestamp:e.dateadded}},group_invite:function(e,t){return{id:m.guid(),type:e.type,owner:i(e),group:t.toJSON(),timestamp:e.dateadded}},group_user_invite:function(e){return{id:m.guid(),type:e.type,owner:i(e),timestamp:e.dateadded}},note:function(e){return{id:m.guid(),type:e.type,owner:i(e),timestamp:e.dateadded}},share:function(e){return{id:m.guid(),type:e.type,owner:i(e),timestamp:e.dateadded}},upload:function(e,t){return{id:m.guid(),type:e.type,owner:i(t.owner),title:t.title,timestamp:e.dateupload,photo:t.photo}},reply_reply:function(e){return{id:m.guid(),type:e.type,owner:i(e),timestamp:e.dateadded,replyId:e.reply_id}},topic_reply:function(e){return{id:m.guid(),type:e.type,owner:i(e),timestamp:e.dateadded,replyId:e.reply_id}},friend_join:function(e){return{id:m.guid(),type:e.type,owner:i(e),timestamp:e.dateadded,service:e.service}},group_topic_new:function(e){return{id:m.guid(),type:e.type,owner:i(e),timestamp:e.dateadded}},flickrmail:function(e,t){return{id:m.guid(),type:e.type,owner:i(t.owner),timestamp:e.dateadded,mail:t.mail}},testimonial:function(e,t){return{id:m.guid(),type:e.type,owner:i(t.owner),timestamp:e.dateadded,url:t.url}},photo_bot_moderated:function(e,t){return{id:m.guid(),type:e.type,photo:t.photo,owner:i(t.owner),timestamp:e.audit_date,toSafetyLevel:e.to_safety_level,fromSafetyLevel:e.from_safety_level,moderatedBy:e.moderated_by}}};m.APIHelper={request:{getRebootPhotoExtras:function(){return e.join(",")},getRebootGroupExtras:function(){return t.join(",")},getRebootSearchSetsExtras:function(){return c.join(",")},getRebootPhotoLiteExtras:function(){return u.join(",")},getRebootAlbumsListExtras:function(){return l.join(",")},getRebootPeopleExtras:function(){return d.join(",")},addStaticMapsParams:function(e){e.extras?e.extras=e.extras+",static_maps":e.extras="static_maps",e.static_map_zoom="3,6,14",e.static_map_width="245",e.static_map_height="100"}},response:{addOrReplaceListByContext:function(e){var t,i=0,r=e.model,n=e.next,a=e.prev,o=e.hasMin,s=e.hasMax,c=e.current,u=e.numNext,l=e.numPrev,d=r.getValue("id"),p=c.some(function(e){return i++,e.getValue("id")===d})?1===i&&0===n.length?a.concat(c):i===c.length&&0===a.length?c.concat(n):i<a.length&&c.length-i<n.length?a.concat([r],n):(p=c,(t=a.slice(0)).some(function(t){return!p.some(function(e){return e.getValue("id")===t.getValue("id")})})?p=p.slice(i-1):t=[],(e=n.slice(0)).every(function(t){return p.some(function(e){return e.getValue("id")===t.getValue("id")})})?e=[]:p=p.slice(0,i),t.concat(p,e)):0===n.length&&0===u?a.concat([r],c):(0===a.length&&0===l?c:a).concat([r],n);return(s||0<u&&n.length<u)&&m.ListProxyStatic.setBoundary(p,"max"),(o||0<l&&a.length<l)&&m.ListProxyStatic.setBoundary(p,"min"),p},addOrReplaceListByPage:function(e){var t=e.current,i=e.newPages,r=e.perPage,n=e.pageNum,a=e.hasMin,o=e.hasMax,s=e.totalItems,c=[],u=[],e=[];return 0===t.length?(e=i,1===n&&m.ListProxyStatic.setBoundary(e,"min"),void 0!==s&&s<=n*r&&m.ListProxyStatic.setBoundary(e,"max")):(a&&1!==n&&(c=t.slice(0,n*r),u=t.slice(n*r)),i.length<r||s===r*n?u=[]:s&&s>t.length&&o?(c=0===c.length?t.slice(0,-1*(n-1)*r):c,u=t.slice(-1*(n-1)*r)):o&&(u=0===u.length?t:u),e=c.concat(i,u),!a&&1!==n||m.ListProxyStatic.setBoundary(e,"min"),(o||i.length<r||s===r*n)&&m.ListProxyStatic.setBoundary(e,"max")),e},parsePhoto:g,parsePhotoLite:function(e){return e.owner&&e.owner.accountId?{id:e.id,pathAlias:e.owner.accountIdAlias||e.owner.accountId,username:e.owner.accountIdAlias,realname:e.owner.name,nsid:e.owner.accountId,ownerNsid:e.owner.accountId,isFaved:!1,faveCount:e.stats.favesCount,commentCount:e.stats.commentsCount,title:e.title,description:e.description,mediaType:void 0,license:void 0,sizes:m.APIHelper.response.parsePhotoSize(e.sizes),needsInterstitial:e.needsInterstitial||void 0,canComment:void 0,oWidth:parseInt(e.sizes[0].width,10),oHeight:parseInt(e.sizes[0].height,10),isPublic:!0,isVisibleByFriends:!1,isVisibleByFamily:!1}:{id:e.id,pathAlias:e.pathalias||e.owner,username:e.ownername,realname:e.realname,nsid:e.owner,ownerNsid:e.owner,isFaved:e.isfavorite||!1,faveCount:e.countFaves,commentCount:e.countComments,title:e.title,description:e.description&&e.description.content||"",mediaType:e.media,license:e.license,sizes:m.APIHelper.response.parsePhotoSize(e),needsInterstitial:e.needsInterstitial,canComment:e.canComment,oWidth:e.oWidth?parseInt(e.oWidth,10):0,oHeight:e.oHeight?parseInt(e.oHeight,10):0,isPublic:!!e.ispublic,isVisibleByFriends:!!e.isfriend,isVisibleByFamily:!!e.isfamily}},parsePhotos:function(e){var r=[],t=e.photos,n=e.photoModelRegistry,a=e.personModelRegistry,o=e.photoEngagementModelRegistry,s=e.photoStatsModelRegistry,c=e.photoPrivacyModelRegistry,u=e.ownerID,l=e.existingPerson,d={},p={},h={},f={};return t.length&&m.Array.each(t,function(e){var t=g(e,u),i=t.owner.id;d[i]||(l?d[i]=l:(a.addOrUpdate(t.owner),d[i]=a.proxy(i))),p[e.id]||(o.addOrUpdate(t.engagement),p[e.id]=o.proxy(e.id)),h[e.id]||(s.addOrUpdate(t.stats),h[e.id]=s.proxy(e.id)),c&&t.privacy&&(f[e.id]||(c.addOrUpdate(t.privacy),f[e.id]=c.proxy(e.id)),t.privacy=f[e.id]),t.owner=d[i],t.engagement=p[e.id],t.stats=h[e.id],n.addOrUpdate(t),r.push(n.proxy(e.id))}),r},parsePage:a,parsePages:function(e){var i=[],t=e.pages,r=e.pageModelRegistry;return t.length&&m.Array.each(t,function(e){var t=a(e);r.addOrUpdate(t),i.push(r.proxy(e.id))}),i},parsePhotoSize:n,parsePerson:function(e){var t={id:e.nsid,isDeleted:e.isDeleted,pathAlias:e.pathAlias,username:e.username,realname:e.realname,isAdFree:e.isAdFree,isPro:e.ispro,proBadge:e.proBadge,buddyicon:o(e.iconurls),location:e.location};return e.datecreate&&(t.dateCreated=e.datecreate),t},parsePlaces:function(e){var i=[],t=e.places,r=e.placeRegistry;return t.length&&t.forEach(function(e){var t=e.woeid||e.place_id,e={id:e.woeid||e.place_id,woeId:e.woeid,woeName:e.woe_name,placeId:e.place_id,placeType:e.place_type,placeTypeId:e.place_type_id,placeUrl:e.place_url,latitude:e.latitude,longitude:e.longitude};r.addOrUpdate(e),i.push(r.proxy(t))}),i},parseContact:i,parseNotificationsEvents:p,removeProtocolFromURL:o,camelCaseProperties:function i(r){return m.each(r,function(e,t){m.Lang.isObject(e)&&"appContext"!==t&&(e=i(e)),t="string"!=typeof t?t:(t="_"===t[0]?t.slice(1):t).replace(/_([a-zA-Z0-9])/g,function(e,t,i){return t.toUpperCase()}),r[t]=e}),r},addContextToRegistry:function(e,t,i,r){var n;"gallery-models"===t.name&&(e.compoundId=e.id,e.id=e.compoundId.split("-").pop()),e.owner&&(n=m.APIHelper.response.parsePerson(e.owner),e.owner=i.addOrUpdate(n)),"group-pool-models"===t.name&&(e.title=m.Escape.html(e.title),n=r.parseGroupModel(e.id,e.pathAlias,e),e={id:e.id,pathAlias:e.pathAlias,group:r.addOrUpdate(n)}),"set-models"!==t.name&&"gallery-models"!==t.name||(e.primaryPhotoSizes=s(e)),t.addOrUpdate(e)},parsePrimaryPhotoSizes:s,parsePhotoSetMeta:function(e){var t={};return t.title=e.title.content,t.id=e.id,t.photoCount=parseInt(e.photos,10),t.primary=e.primary,t.videoCount=parseInt(e.videos,10),t.totalCount=t.photoCount+t.videoCount,t.primaryPhotoSizes=s({primaryPhotoExtras:e}),t},parsePhotoMeta:function(e){return{id:e.photo_id,title:e.HTMLMETA["og:title"],keywords:e.HTMLMETA.keywords,"og:title":e.HTMLMETA["og:title"],"og:description":e.HTMLMETA["og:description"],"og:type":e.HTMLMETA["og:type"],"og:url":e.HTMLMETA["og:url"],"og:image":e.HTMLMETA["og:image"],"og:image:width":e.HTMLMETA["og:image:width"],"og:image:height":e.HTMLMETA["og:image:height"],"twitter:card":e.HTMLMETA["twitter:card"],"twitter:player":e.HTMLMETA["twitter:player"],"twitter:player:width":e.HTMLMETA["twitter:player:width"],"twitter:player:height":e.HTMLMETA["twitter:player:height"],"twitter:image":e.HTMLMETA["twitter:image"],"twitter:description":e.HTMLMETA["twitter:description"],"twitter:app:url:iphone":e.HTMLMETA["twitter:app:url:iphone"],"twitter:app:url:ipad":e.HTMLMETA["twitter:app:url:ipad"],"twitter:app:url:googleplay":e.HTMLMETA["twitter:app:url:googleplay"],"twitter:creator":e.HTMLMETA["twitter:creator"]}}}}},"@VERSION@",{requires:["flickr-promise","list-proxy"]}),YUI.add("flickr-api",function(h){"use strict";function e(e,t){this.transport=h.transportFactory(e,t?t.flipper:null),void 0!==t&&(this.appContext=t),YUI.Env.isServer?this.api_url=YUI.Env.config.api.hostname_server:this.api_url=h.config.flickr.api.hostname_client}function f(e){return e&&e.message&&e.message.indexOf&&(-1<e.message.indexOf("Photo not found")||-1<e.message.indexOf("not found (invalid ID)")||-1<e.message.indexOf("not found (inactive member)")||-1<e.message.indexOf("Login Failed"))}var m=require("hermes-core/fletrics"),g=require("hermes-core/flog")("API"),y=[96,97,98,99,100,105,106,111,112,114,115,116,117,118,119],_=["flickr.activity.getNotificationsCount","flickr.interestingness.getList","flickr.favorites.add","flickr.photos.addView","flickr.photos.getExif","flickr.photos.getInfo","flickr.photos.search","flickr.photos.upload","flickr.people.search","flickr.photosets.addView","flickr.photosets.getPhotos","flickr.photosets.search","flickr.groups.pools.add","flickr.groups.search","flickr.people.addView","flickr.people.getInfo","flickr.people.getPhotos","flickr.groups.pools.getPhotos","flickr.groups.getInfo","flickr.groups.getTopContributors","flickr.products.books.getBook","flickr.products.orders.getOrder","flickr.site.getBucketTestConfig","flickr.cameraroll.getMap","flickr.cameraroll.getPhotosByOffset","flickr.stats.getGraphData","flickr.stats.getTotalViewsForDateRange","flickr.stats.getMiscStats","flickr.stats.getPopularPhotos","flickr.stats.getReferrerCategoriesForDate","flickr.stats.getTotalViews","flickr.tags.getListPhoto"];e.prototype.callMethod=function(a,o,e,s){var t,i,r,n,c=0,u=null,l=null,d=null,p="";return o=o||{},s=s||{},this.appContext&&this.appContext.request&&(this.appContext.request.UA.isBot||this.appContext.request.UA.isSharingBot)&&(p=m.getBotString()),-1!==_.indexOf(a)&&(u=m.createStopwatch("api."+a+".latency"+p),m.increment("api."+a+".calls"+p)),-1!==["flickr.photos.getInfo"].indexOf(a)&&(l=m.createStopwatch("api."+a+".latency.histogram"+p)),d=m.createStopwatch("api.latency"),m.increment("api.calls.initiated"+p),this.appContext&&this.appContext.random_slice&&(o.random_slice=this.appContext.random_slice),!YUI.Env.isServer&&h.config.flickr.random_slice&&(o.random_slice=h.config.flickr.random_slice),this.appContext&&this.appContext.flipper.isFlipped("enable-viewer-nsid-check")&&!YUI.Env.isServer&&(i=this.appContext.getViewer(),o.viewerNSID=i.signedIn?i.nsid:""),h.config.flickr.cameraroll.suppress_logging&&("flickr.cameraroll.getPhotosByOffset"===a||"flickr.cameraroll.getMapVersion"===a)||g.info("params",{method:a,config:o}),(t={flickr:!0,data:o}).data.method=a,s.timeout&&(t.timeout=s.timeout),r=this.api_url+"/services/rest",u&&u.start(),l&&l.start(),d&&d.start(),(n=function(){return m.increment("api.call.attempt"),this.transport.makeRequest(r,t,e).then(function(t){var e,i="";t&&t.headers&&(t.headers["x-served-by"]&&(i=t.headers["x-served-by"]),t.headers["x-account-nsid"]&&this.appContext.setPreliminaryViewerNsid(t.headers["x-account-nsid"])),m.increment("api.calls"+p),m.increment("api.calls.responded"+p),u&&u.stop(),l&&l.stop(),d&&d.stop(),YUI.Env.isServer&&t.debug&&YUI.Env.config.api.log_urls&&!t.debug.wasBatched&&g.info("url",{method:a,url:t.debug.url});try{if(!(e=t.responseText?JSON.parse(t.responseText):t))throw g.error("returned an empty response",{method:a}),new Error("Empty response")}catch(e){var r,n="";throw t&&t.responseText&&-1<t.responseText.toLowerCase().indexOf("502 bad gateway")&&(e.flickrApiError="502 in response text"),t&&t.responseText||(e.flickrApiError="empty response"),t&&t.responseText&&(n=-1<(r=t.responseText.toLowerCase().indexOf("<body>"))?t.responseText.slice(r,100):t.responseText.slice(0,100)),g.error("responded with unparseable JSON",{method:a,err:e,servedBy:i,headers:t&&t.headers,response:n}),e.fatal=!0,e}try{void 0!==s.camelCase&&!s.camelCase||(e=h.APIHelper.response.camelCaseProperties(e))}catch(e){throw g.error("failed camelCase parsing",{method:a,err:e,servedBy:i}),e.fatal=!0,e}if("ok"===e.stat)return m.increment("api.call.success"),-1!==_.indexOf(a)&&m.increment("api."+a+".call.success"),g.log("successfully returned",{method:a,response:e}),e;if("fail"!==e.stat)throw g.error('responded without a known "stat"',{method:a,response:e,servedBy:i}),e.fatal=!0,e;if(e.fatal=!0,f(e)&&(e.is404=!0),!e.code)throw g.error('responded with "stat: fail" but no error code',{method:a,response:e,servedBy:i}),e;if(-1!==y.indexOf(e.code))throw g.error('responded with "stat: fail" and fatal error code',{method:a,response:e,servedBy:i,headers:t&&t.headers,config:o}),e;throw g.info('responded with "stat: fail" and non-fatal error code',{method:a,response:e,servedBy:i}),e.fatal=!1,m.increment("api.call.success.stat_fail"),-1!==_.indexOf(a)&&m.increment("api."+a+".call.success.stat_fail"),e}.bind(this),function(e){throw e.fatal=!0,503===e.code&&(h.config.win.location="https://www.flickr.com/error/500"),"ECONNRESET"===e.code&&(e.flickrApiError="ECONNRESET"),e.code&&-1!==["ECONNRESET","ECONNREFUSED","ECONNABORTED","EHOSTUNREACH","ENETDOWN","ENETUNREACH","ETIMEDOUT"].indexOf(e.code)&&(e.timeout=!0),e.resp&&0===e.resp.status&&"timeout"===e.resp.statusText&&(e.clientTimeout=!0),f(e)&&(e.is404=!0),g.error("failed in an unexpected way",{method:a,err:e}),e}.bind(this)).then(void 0,function(e){throw e.fatal?m.increment("api.failures"+p):m.increment("api.warnings"+p),e}).then(void 0,function(e){if(!e.fatal||2<=++c)throw e;return e.flickrApiError=e.flickrApiError||"unknown",g.error("fatal api failure retry",{err:e,attempts:c}),n()})}.bind(this))()},e.prototype.fetchSiteKey=function(){return this.transport.makeSiteKeyRequest(this.api_url+"/services/rest")},e.prototype.fetchCsrf=function(){return this.transport.makeCsrfRequest(this.api_url+"/services/rest")},h.namespace("FlickrAPI"),h.FlickrAPI=e},"@VERSION@",{requires:["promise","oop","api-helper"]}),YUI.add("cycle",function(e,t){var i=require("cyclical-json");e.decycle=function(e){return JSON.parse(i.stringify(e))},e.retrocycle=function(e){return i.parse(JSON.stringify(e))}},"@VERSION@");
