(window["webpackJsonp-ae-fe/home-ui-2"]=window["webpackJsonp-ae-fe/home-ui-2"]||[]).push([[2],{362:function(e,t,o){"use strict";var n=o(22);t.__esModule=!0,t.getAffCookieData=r,t.parseUrl=s,t.getParameterByName=p,t.isRuDomain=c,t.isFunction=function(e){return"function"===(typeof e).toLowerCase()},t.serializeParams=l,t.addUrlParams=d,t.createRedirectUrl=function(e,t){return void 0===t&&(t={}),(e=void 0===e?"":e)?d(e,{fromPageCode:t.pageCode,m_page_id:t.pageId||"",spm:t.spm||"",isAutoCall:t.isAutoCall||"","spm-url":t["spm-url"]||"",isFromSmb:!0,abId:t.abId||"",bktId:t.bktId||"",activityId:t.activityId||""}):""},t.createCallAppUrl=function(e,t){if(!(e=void 0===e?"":e))return"";var o=(t=void 0===t?{}:t).cookieInfo,n=void 0===o?{}:o,i=r(),o={};i.aeuCid&&(o.aff_trace_key=t.aeuCid||i.aeuCid||"",o.aff_platform=t.aff_platform||"msite",o.browser_id=t.browserId||i.browserId||"");i=t.accountId||i.accountId||"";return i&&(o.accountId=i),d(e,(0,a.default)({fromPageCode:t.pageCode,m_page_id:t.pageId||"",spm:t.spm||"",isAutoCall:t.isAutoCall||"","spm-url":t["spm-url"]||"",abId:t.abId||"",bktId:t.bktId||"",activityId:t.activityId||""},o,n))},t.createAppStoreUrl=function(e,t){if(!(e=void 0===e?"":e))return"";var o=(t=void 0===t?{}:t).cookieInfo;return d(e,(0,a.default)({m_page_id:t.pageId,fromPageCode:t.pageCode||"",spm:t.spm||"",isAutoCall:t.isAutoCall||"","spm-url":t["spm-url"]||"",abId:t.abId||"",bktId:t.bktId||"",activityId:t.activityId||""},void 0===o?{}:o))},t.jsonParse=function(e){void 0===e&&(e="");var t="";try{t=JSON.parse(e)||{}}catch(e){t=""}return t},t.getPageCode=function(){return(""+document.querySelector("body").getAttribute("data-spm")||"").trim()},t.getDay=function(e){void 0===e&&(e=0);var t=new Date;return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t.setDate(t.getDate()+e),+t},t.getProductId=u,t.getDomain=m,t.getDefaultTargetUrl=function(){return"//"+m()+"/download-landing.html"},t.isAndroid=f,t.removeSmbUrlKey=g,t.fixCallUrlParams=function(e){var t=(e=void 0===e?"":e).trim(),o=s(e),e=window.location.href,n=g(s((e=e.replace(/https:\/\/(.*?).aliexpress.com\/campaign/,"https://campaign.aliexpress.com").replace(/https:\/\/(.*?).aliexpress.com\/pre-campaign/,"https://pre-wormhole.aliexpress.com"))||"")||{});if(-1<t.indexOf(h.DETAIL)){var i=o.productId||u(e),r=(0,a.default)({},o,{productId:i});return["gps-id","pvid","scm","scm-url","scm_id"].forEach(function(e){n[e]&&(r[e]=n[e])}),d(h.DETAIL,r)}return-1<t.indexOf(h.STORE)?t=f()?d(h.GOTO,{url:e}):(i=(0,a.default)({},o,{sellerAdminSeq:o.sellerId||n.sellerId||"",shopId:o.shopId||n.sellerId||""}),d(h.STORE,i)):!(-1<t.indexOf(h.GOTO))||o.url?t:d(t,(0,a.default)({},o,{url:e}))},t.SCHEME_MAP=t.isSmbLog=t.isDebug=t.getPageSpm=void 0;var a=n(o(2)),i=n(o(4));function r(){return{aeuCid:i.default.getAeucid(),browserId:i.default.getACS_RT(),lang:i.default.getLocale()||"",shipToCountry:i.default.getRegion()||"",currency:i.default.getCurrency()||"",accountId:i.default.getMemberSeq()||""}}function s(e){var t={},o=e.match(/\?[^#]*/);return o&&1!==o[0].length&&o[0].slice(1).split("&").forEach(function(e){o=e.split("="),t[o[0]]=decodeURIComponent(o[1]||"")}),t}function p(e,t){t=t||window.location.href,e=e.replace(/[[\]]/g,"\\$&");t=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return t?t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"":null}function c(){return/aliexpress\.ru/.test(window.location.host)}function l(t){return void 0===t&&(t={}),Object.keys(t).map(function(e){return e+"="+encodeURIComponent(t[e])}).join("&")}function d(e,t){return void 0===t&&(t={}),-1<(e=void 0===e?"":e).indexOf("?")?e+"&"+l(t):e+"?"+l(t)}o=function(){var e="",t="";try{var o=document.querySelector('meta[name="data-spm"]'),e=o?o.getAttribute("content"):"a2g0n",t=document.querySelector("body").getAttribute("data-spm")||"unknow"}catch(o){t=e=""}var n=[e,t].join(".");return function(){return n}}();t.getPageSpm=o;o=/true/.test(p("isSmbDebug"));t.isDebug=o;o=/true/.test(p("isSmbLog"));function u(e){return(((e=void 0===e?"":e).split("?")[0]||"").match(/aliexpress\.(com|ru)\/(item|i)\/(.*)\.htm(l?)/)||[])[3]||""}function m(){return c()?"m.aliexpress.ru":"m.aliexpress.com"}function f(){var e=window.navigator.userAgent;return-1<e.indexOf("Android")||-1<e.indexOf("Linux")}function g(e){var t,o={};for(t in e=void 0===e?{}:e)-1<"cancleSmbFatigueCrtl,isSmbDebug,isSMBLog,isSmbAutoCall,needSmbRedirect,smbTargetUrl,smbCallAppScheme,isSmbShow,needSmbHouyi,smbThemes,isSmbActive,needSmbAutoCallRedirect".indexOf(t)||(o[t]=e[t]);return o}t.isSmbLog=o;var h={HOME:"aliexpress://home",DETAIL:"aliexpress://product/detail",STORE:"aliexpress://store/home",LOGIN:"aliexpress://member/signin",ACCOUNT:"aliexpress://account",SHOPCART:"aliexpress://cart",PROFILE:"aliexpress://profile",WISHLIST:"aliexpress://wishlist",WISHSTORELIST:"aliexpress://wishstorelist",SEARCHLIST:"aliexpress://search/list",CATEGORYLIST:"aliexpress://native/goto/category",GOTO:"aliexpress://goto"};t.SCHEME_MAP=h},378:function(e,t,o){"use strict";var n=o(22);t.__esModule=!0,t.sendPoint=function(e,t){void 0===t&&(t={}),"exposure"===(e=void 0===e?"click":e)?a({path:"/ae.pc_ctr.statweb_ae_ctr",event:"EXP",params:t}):"click"===e&&a({path:"/ae.pc_click.statweb_ae_click",event:"CLK",params:t})};var i=n(o(2)),r=o(362);function a(e){try{var t=(0,i.default)({st_page_id:window.dmtrack_pageid||""},e.params),o=(0,r.serializeParams)(t);r.isSmbLog&&console.log("åŸ‹ç‚¹ï¼š","path:"+e.path+", event:"+e.event+", å‚æ•°ï¼š",t),window.goldlog.record(e.path,e.event,o,"GET")}catch(e){}}},415:function(e,t,o){"use strict";var n=o(22);t.__esModule=!0,t.execCallApp=function(e){void 0===e&&(e={}),(p=p||new i.default).execCallApp(e)},t.getAppStoreUrl=function(e){return(0,r.createAppStoreUrl)((e=void 0===e?{}:e).APPSTORE_URL||"//s.click.aliexpress.com/i/_bFomh7?aff_platform=msite&channel=in_msite_top",e)},t.Log=t.Utils=void 0;var i=n(o(416)),r=s(o(362)),o=s(o(378));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(a=function(e){return e?o:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=a(t);if(t&&t.has(e))return t.get(e);var o,n,i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&((n=r?Object.getOwnPropertyDescriptor(e,o):null)&&(n.get||n.set)?Object.defineProperty(i,o,n):i[o]=e[o]);return i.default=e,t&&t.set(e,i),i}var p=null;t.Utils=r,t.Log=o},416:function(e,t,o){"use strict";var n=o(22);t.__esModule=!0,t.default=t.DEFAULT_TIMEOUT=t.SMB_VERSION=void 0;var i=n(o(2)),n=n(o(417)),r=o(362),a=o(378),s=n.default.version;t.SMB_VERSION=s,t.DEFAULT_TIMEOUT=3e3;var p=window.location.host,n=((n=c.prototype).init=function(e){void 0===e&&(e={}),this.version=s,this.hasBindEvent=!1,this.redirectTimer=null,this.hasRedirectTimer=!1,this.isAutoCallRedirect=!1,this.autoRedirectStart=null,this.autoRedirectEnd=null;e=Object.assign({pageCode:(0,r.getPageCode)(),callAppUrl:"aliexpress://home",targetUrl:"",needRedirect:!0,callAppCallback:null,isAutoCall:!1,sendPoint:!0,spm:[(0,r.getPageSpm)(),"smartbanner","0"].join("."),pageId:window.dmtrack_pageid||"",timeout:3e3,activityId:"","spm-url":(0,r.getParameterByName)("spm"),cookieInfo:{},extParams:{}},e);e.cookieInfo=e.cookieInfo||{},e.extParams=e.extParams||{},e.redirectUrl=(0,r.createRedirectUrl)(e.targetUrl||(0,r.getDefaultTargetUrl)(),e)||"",e.callAppUrl=(0,r.createCallAppUrl)(e.callAppUrl,e)||"",this.options=e},n.getCommonPointParams=function(){var e=this.options,e=void 0===e?{}:e;return(0,i.default)({host:p,fromPageCode:e.pageCode||"",m_page_id:e.pageId||"","spm-url":e["spm-url"]||"","spm-cnt":e.spm||"",abId:e.abId||"",bktId:e.bktId||"",version:this.version,isAutoCall:e.isAutoCall||"",activityId:e.activityId||"",needRedirect:e.needRedirect},e.cookieInfo)},n.exposurePoint=function(){var e;this.hasExposure||(this.hasExposure=!0,e=this.options,(0,a.sendPoint)("exposure",(0,i.default)({exp_page_area:"smartbanner_core",exp_type:"in_download_bar_core",exp_page:e.pageCode||""},this.getCommonPointParams())))},n.bindEvent=function(){var o=this;this.hasBindEvent||(this.hasBindEvent=!0,document.addEventListener("visibilitychange",function(){var e,t;document.hidden&&o.redirectTimer&&o.hasRedirectTimer&&(e=o.options,o.autoRedirectEnd=+new Date,t=(0,i.default)({cost_t:o.autoRedirectEnd-o.autoRedirectStart,has_app:!0,redirectUrl:encodeURIComponent(e.redirectUrl),callAppUrl:encodeURIComponent(e.callAppUrl)},o.getCommonPointParams()),e.sendPoint&&(0,a.sendPoint)("click",t,e),(0,r.isFunction)(e.callAppCallback)&&e.callAppCallback(!0,t),o.clearRedirectTimer(),o.clearRedirectField())}))},n.clearRedirectField=function(){this.autoRedirectStart=null,this.autoRedirectEnd=null,this.isAutoCallRedirect=!1},n.clearRedirectTimer=function(){this.hasRedirectTimer=!1,window.clearTimeout(this.redirectTimer)},c);function c(){var o=this;this.execCallApp=function(e){o.init(e=void 0===e?{}:e);var t=o.options;o.exposurePoint(),setTimeout(function(){o.autoRedirectStart=+new Date,window.location.href=t.callAppUrl},0);e=(0,r.isAndroid)()?3500:3e3;o.redirectTimer=setTimeout(function(){o.autoRedirectEnd=+new Date;var e=(0,i.default)({cost_t:o.autoRedirectEnd-o.autoRedirectStart,has_app:!1,redirectUrl:encodeURIComponent(t.redirectUrl),callAppUrl:encodeURIComponent(t.callAppUrl)},o.getCommonPointParams());t.sendPoint&&(0,a.sendPoint)("click",e,t),(0,r.isFunction)(t.callAppCallback)&&t.callAppCallback(!1,e,t),t.needRedirect&&(window.location.href=t.redirectUrl),o.clearRedirectField()},e),o.hasRedirectTimer=!0},this.bindEvent(),this.hasExposure=!1}t.default=n},417:function(e){e.exports=JSON.parse('{"_args":[["@alife/heaven-smart-banner-core@0.1.9","/cloud/source_code"]],"_from":"@alife/heaven-smart-banner-core@0.1.9","_id":"@alife/heaven-smart-banner-core@0.1.9","_inBundle":false,"_integrity":"sha1-60QS9Pmu6gfZpLPPQa3gukFeVO4=","_location":"/@alife/heaven-smart-banner-core","_phantomChildren":{},"_requested":{"type":"version","registry":true,"raw":"@alife/heaven-smart-banner-core@0.1.9","name":"@alife/heaven-smart-banner-core","escapedName":"@alife%2fheaven-smart-banner-core","scope":"@alife","rawSpec":"0.1.9","saveSpec":null,"fetchSpec":"0.1.9"},"_requiredBy":["/@ali/poplayer-web-container"],"_resolved":"https://registry.npm.alibaba-inc.com/@alife/heaven-smart-banner-core/download/@alife/heaven-smart-banner-core-0.1.9.tgz","_spec":"0.1.9","_where":"/cloud/source_code","author":{"name":"è€é‚¬"},"componentConfig":{"name":"@alife/heaven-smart-banner-core","title":"","desc":""},"dependencies":{"@alife/zoro-cookie":"^2.0.10","prop-types":"^15.5.8"},"description":"å”¤ç«¯æ‰§è¡Œæ–¹æ³•","devDependencies":{"@alib/build-scripts":"^0.1.20","@types/classnames":"^2.2.10","@types/enzyme":"^3.10.5","@types/enzyme-adapter-react-16":"^1.0.6","@types/jest":"^25.1.4","@types/react":"^16.9.33","@types/react-dom":"^16.9.6","@typescript-eslint/eslint-plugin":"^2.26.0","@typescript-eslint/parser":"^2.26.0","build-plugin-component":"^0.2.15","build-plugin-fusion":"^0.1.2","build-plugin-moment-locales":"^0.1.0","enzyme":"^3.11.0","enzyme-adapter-react-16":"^1.15.2","eslint":"^6.8.0","eslint-plugin-react":"^7.19.0","identity-obj-proxy":"^3.0.0","jest":"^25.2.4","react":"^16.13.1","react-dom":"^16.13.1","ts-jest":"^25.3.0","typescript":"^3.8.3"},"heavenConfig":{"authors":"è€é‚¬","createdDate":"1588735826157","updatedDate":"1588735826157","version":"0.0.1","category":"åŸºç¡€ç»„ä»¶","biz":"åŸºç¡€é“¾è·¯","framework":"React","platform":"PC","tags":"a,b,c"},"homepage":"https://unpkg.alibaba-inc.com/@alife/heaven-smart-banner-core@0.1.9/build/index.html","keywords":[],"license":"MIT","main":"lib/index.js","module":"es/index.js","name":"@alife/heaven-smart-banner-core","publishConfig":{"registry":"https://registry.npm.alibaba-inc.com"},"scripts":{"build":"build-scripts build","start":"build-scripts start","test":"build-scripts test"},"types":"es/index.d.ts","version":"0.1.9"}')},418:function(e,t,o){"use strict";var n={},l=decodeURIComponent,a=encodeURIComponent;function d(e){return"string"==typeof e}function s(e){return d(e)&&""!==e}function p(e){if(!s(e))throw new TypeError("Cookie name must be a non-empty string")}function u(e){return e}n.get=function(e,t){p(e),t="function"==typeof t?{converter:t}:t||{};var o=function(e,t){var o={};if(d(e)&&0<e.length)for(var n,i,r,a=t?l:u,s=e.split(/;\s/g),p=0,c=s.length;p<c;p++){if((r=s[p].match(/([^=]+)=/i))instanceof Array)try{n=l(r[1]),i=a(s[p].substring(r[1].length+1))}catch(e){}else n=l(s[p]),i="";n&&(o[n]=i)}return o}(document.cookie,!t.raw);return(t.converter||u)(o[e])},n.set=function(e,t,o){p(e);var n=(o=o||{}).expires,i=o.domain,r=o.path,e=e+"="+(t=!o.raw?a(String(t)):t),t=n;return"number"==typeof t&&(t=new Date).setDate(t.getDate()+n),t instanceof Date&&(e+="; expires="+t.toUTCString()),s(i)&&(e+="; domain="+i),s(r)&&(e+="; path="+r),o.secure&&(e+="; secure"),document.cookie=e},n.remove=function(e,t){return(t=t||{}).expires=new Date(0),this.set(e,"",t)},t.default=n},419:function(e,t,o){"use strict";t.getFixedDomainUrl=function(){return n};var n="aliexpress.com";[{reg:/aliexpress.ru/,domain:"aliexpress.ru"},{reg:/tmall.ru/,domain:"tmall.ru"}].forEach(function(e){e.reg.test(window.location.host)&&(n=e.domain)})},420:function(e,t){"undefined"==typeof window&&(window={ctrl:{},lib:{}}),window.ctrl||(window.ctrl={}),window.lib||(window.lib={}),function(u,v){function _(){var o={},e=new s(function(e,t){o.resolve=e,o.reject=t});return o.promise=e,o}function n(e,t){for(var o in t)void 0===e[o]&&(e[o]=t[o]);return e}function m(e){var t,o=[];for(t in e)e[t]&&o.push(t+"="+encodeURIComponent(e[t]));return o.join("&")}function a(e){return"[object Object]"=={}.toString.call(e)}function f(e){e=new RegExp("(?:^|;\\s*)"+e+"\\=([^;]+)(?:;\\s*|$)").exec(document.cookie);return e?e[1]:void 0}function i(e,t,o){var n=new Date;n.setTime(n.getTime()-864e5),document.cookie=e+"=;path=/;domain=."+t+";expires="+n.toGMTString(),document.cookie=e+"=;path=/;domain=."+o+"."+t+";expires="+n.toGMTString()}function e(e,t){for(var o=e.split("."),n=t.split("."),i=0;i<3;i++){var r=Number(o[i]),a=Number(n[i]);if(a<r)return 1;if(r<a)return-1;if(!isNaN(r)&&isNaN(a))return 1;if(isNaN(r)&&!isNaN(a))return-1}return 0}function r(e){this.id=""+(new Date).getTime()+ ++g,this.params=n(e||{},{v:"*",data:{},type:"get",dataType:"jsonp"}),this.params.type=this.params.type.toLowerCase(),"object"==typeof this.params.data&&(this.params.data=JSON.stringify(this.params.data)),this.middlewares=t.slice(0)}var s=u.Promise,p=(s||{resolve:function(){}}).resolve();String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")});var c={useJsonpResultType:!1,safariGoLogin:!0,useAlipayJSBridge:!1},t=[],l={ERROR:-1,SUCCESS:0,TOKEN_EXPIRED:1,SESSION_EXPIRED:2};(function(){var e=u.location.hostname;e||(o=u.parent.location.hostname)&&~o.indexOf("zebra.alibaba-inc.com")&&(e=o);var t=new RegExp("([^.]*?)\\.?((?:"+["taobao.net","taobao.com","tmall.com","tmall.hk","alibaba-inc.com"].join(")|(?:").replace(/\./g,"\\.")+"))","i"),o=e.match(t)||[],e=o[2]||"taobao.com",t=o[1]||"m";"taobao.net"!==e||"x"!==t&&"waptest"!==t&&"daily"!==t?"taobao.net"===e&&"demo"===t?t="demo":"alibaba-inc.com"===e&&"zebra"===t?t="zebra":"waptest"!==t&&"wapa"!==t&&"m"!==t&&(t="m"):t="waptest";o="taobao.net"===e&&"waptest"===t?"acs":"h5api";c.mainDomain=e,c.subDomain=t,c.prefix=o})(),function(){var e=u.navigator.userAgent,t=e.match(/WindVane[\/\s]([\d\.\_]+)/);t&&(c.WindVaneVersion=t[1]);t=e.match(/AliApp\(([^\/]+)\/([\d\.\_]+)\)/i);t&&(c.AliAppName=t[1],c.AliAppVersion=t[2]);e=e.match(/AMapClient\/([\d\.\_]+)/i);e&&(c.AliAppName="AMAP",c.AliAppVersion=e[1])}();var o=/[Android|Adr]/.test(u.navigator.userAgent),d="AP"===c.AliAppName&&0<=e(c.AliAppVersion,"10.1.2")||"KB"===c.AliAppName&&0<=e(c.AliAppVersion,"7.1.62")||o&&"AMAP"===c.AliAppName&&0<=e(c.AliAppVersion,"1.0.1"),g=0;r.prototype.use=function(e){if(!e)throw new Error("middleware is undefined");return this.middlewares.push(e),this},r.prototype.__processRequestMethod=function(e){var t=this.params,o=this.options;"get"===t.type&&"jsonp"===t.dataType?o.getJSONP=!0:"get"===t.type&&"originaljsonp"===t.dataType?o.getOriginalJSONP=!0:"get"===t.type&&"json"===t.dataType?o.getJSON=!0:"post"===t.type&&(o.postJSON=!0),e()},r.prototype.__processRequestType=function(e){var t=this,o=this.params,n=this.options;if(!0===c.H5Request&&(n.H5Request=!0),!0===c.WindVaneRequest&&(n.WindVaneRequest=!0),!1===n.H5Request&&!0===n.WindVaneRequest){if(!d&&(!v.windvane||parseFloat(n.WindVaneVersion)<5.4))throw new Error("WINDVANE_NOT_FOUND::ç¼ºå°‘WindVaneçŽ¯å¢ƒ");if(d&&!u.AlipayJSBridge)throw new Error("ALIPAY_NOT_READY::æ”¯ä»˜å®é€šé“æœªå‡†å¤‡å¥½ï¼Œæ”¯ä»˜å®è¯·è§ https://lark.alipay.com/mtbsdkdocs/mtopjssdkdocs/pucq6z")}else if(!0===n.H5Request)n.WindVaneRequest=!1;else if(void 0===n.WindVaneRequest&&void 0===n.H5Request){if(v.windvane&&5.4<=parseFloat(n.WindVaneVersion)?n.WindVaneRequest=!0:n.H5Request=!0,d){if(n.WindVaneRequest=n.H5Request=void 0,u.AlipayJSBridge)if(a(o.data))n.WindVaneRequest=!0;else try{a(JSON.parse(o.data))?n.WindVaneRequest=!0:n.H5Request=!0}catch(e){n.H5Request=!0}else n.H5Request=!0;"AMAP"!==c.AliAppName||o.useNebulaJSbridgeWithAMAP||(n.WindVaneRequest=n.H5Request=void 0,n.H5Request=!0)}window.self!==window.top&&(n.H5Request=!0)}var i=u.navigator.userAgent.toLowerCase();return-1<i.indexOf("youku")&&n.mainDomain.indexOf("youku.com")<0&&(n.WindVaneRequest=!1,n.H5Request=!0),-1<n.mainDomain.indexOf("youku.com")&&i.indexOf("youku")<0&&(n.WindVaneRequest=!1,n.H5Request=!0),e?e().then(function(){var e=n.retJson.ret;if(e instanceof Array&&(e=e.join(",")),!0===n.WindVaneRequest&&d&&n.retJson.error||!e||-1<e.indexOf("PARAM_PARSE_ERROR")||-1<e.indexOf("HY_FAILED")||-1<e.indexOf("HY_NO_HANDLER")||-1<e.indexOf("HY_CLOSED")||-1<e.indexOf("HY_EXCEPTION")||-1<e.indexOf("HY_NO_PERMISSION")){if(!d||!isNaN(n.retJson.error)||-1!==n.retJson.error.indexOf("FAIL_SYS_ACCESS_DENIED"))return d&&a(o.data)&&(o.data=JSON.stringify(o.data)),c.H5Request=!0,t.__sequence([t.__processRequestType,t.__processToken,t.__processRequestUrl,t.middlewares,t.__processRequest]);void 0===n.retJson.api&&void 0===n.retJson.v&&(n.retJson.api=o.api,n.retJson.v=o.v,n.retJson.ret=[n.retJson.error+"::"+n.retJson.errorMessage],n.retJson.data={})}}):void 0};var h="_m_h5_c",y="_m_h5_tk";r.prototype.__getTokenFromAlipay=function(){var t=_(),o=this.options,e=(u.navigator.userAgent,!!location.protocol.match(/^https?\:$/));return!0===o.useAlipayJSBridge&&!e&&d&&u.AlipayJSBridge&&u.AlipayJSBridge.call?u.AlipayJSBridge.call("getMtopToken",function(e){e&&e.token&&(o.token=e.token),t.resolve()},function(){t.resolve()}):t.resolve(),t.promise},r.prototype.__getTokenFromCookie=function(){var e=this.options;return e.CDR&&f(h)?e.token=f(h).split(";")[0]:e.token=e.token||f(y),e.token&&(e.token=e.token.split("_")[0]),s.resolve()},r.prototype.__waitWKWebViewCookie=function(e){var t=this.options;t.waitWKWebViewCookieFn&&t.H5Request&&u.webkit&&u.webkit.messageHandlers?t.waitWKWebViewCookieFn(e):e()},r.prototype.__processToken=function(e){var o=this,n=this.options;return this.params,n.token&&delete n.token,!0!==n.WindVaneRequest?p.then(function(){return o.__getTokenFromAlipay()}).then(function(){return o.__getTokenFromCookie()}).then(e).then(function(){var e=n.retJson,t=e.ret;if(-1<(t=t instanceof Array?t.join(","):t).indexOf("TOKEN_EMPTY")||(!0===n.CDR||!0===n.syncCookieMode)&&-1<t.indexOf("ILLEGAL_ACCESS")||-1<t.indexOf("TOKEN_EXOIRED")){if(n.maxRetryTimes=n.maxRetryTimes||5,n.failTimes=n.failTimes||0,n.H5Request&&++n.failTimes<n.maxRetryTimes){t=[o.__waitWKWebViewCookie,o.__processToken,o.__processRequestUrl,o.middlewares,o.__processRequest];return!0===n.syncCookieMode&&o.constructor.__cookieProcessorId!==o.id&&(o.constructor.__cookieProcessor?t=[function(e){function t(){o.constructor.__cookieProcessor=null,o.constructor.__cookieProcessorId=null,e()}o.constructor.__cookieProcessor?o.constructor.__cookieProcessor.then(t).catch(t):e()},o.__waitWKWebViewCookie,o.__processToken,o.__processRequestUrl,o.middlewares,o.__processRequest]:(o.constructor.__cookieProcessor=o.__requestProcessor,o.constructor.__cookieProcessorId=o.id)),o.__sequence(t)}0<n.maxRetryTimes&&(i(h,n.pageDomain,"*"),i(y,n.mainDomain,n.subDomain),i("_m_h5_tk_enc",n.mainDomain,n.subDomain)),e.retType=l.TOKEN_EXPIRED}}):void e()},r.prototype.__processRequestUrl=function(e){var t,y,v,o,n,_=this.params,w=this.options;w.hostSetting&&w.hostSetting[u.location.hostname]&&((t=w.hostSetting[u.location.hostname]).prefix&&(w.prefix=t.prefix),t.subDomain&&(w.subDomain=t.subDomain),t.mainDomain&&(w.mainDomain=t.mainDomain)),!0===w.H5Request&&(t="//"+(w.prefix?w.prefix+".":"")+(w.subDomain?w.subDomain+".":"")+w.mainDomain+"/h5/"+_.api.toLowerCase()+"/"+_.v.toLowerCase()+"/",y=_.appKey||("waptest"===w.subDomain?"4272":"12574478"),v=(new Date).getTime(),o={jsv:"2.6.1",appKey:y,t:v,sign:function(){function s(e,t){return e<<t|e>>>32-t}function p(e,t){var o=2147483648&e,n=2147483648&t,i=(1073741823&e)+(1073741823&t);return(e=1073741824&e)&(t=1073741824&t)?2147483648^i^o^n:e|t?1073741824&i?3221225472^i^o^n:1073741824^i^o^n:i^o^n}function e(e,t,o,n,i,r,a){return e=p(e,p(p(t&o|~t&n,i),a)),p(s(e,r),t)}function t(e,t,o,n,i,r,a){return e=p(e,p(p(t&n|o&~n,i),a)),p(s(e,r),t)}function o(e,t,o,n,i,r,a){return e=p(e,p(p(t^o^n,i),a)),p(s(e,r),t)}function n(e,t,o,n,i,r,a){return e=p(e,p(p(o^(t|~n),i),a)),p(s(e,r),t)}function i(e){for(var t="",o="",n=0;n<=3;n++)t+=(o="0"+(e>>>8*n&255).toString(16)).substr(o.length-2,2);return t}for(var r,a,c,l,d=function(e){for(var t,o=e.length,n=o+8,n=16*((n-n%64)/64+1),i=new Array(n-1),r=0,a=0;a<o;)r=a%4*8,i[t=(a-a%4)/4]=i[t]|e.charCodeAt(a)<<r,a++;return i[t=(a-a%4)/4]=i[t]|128<<(r=a%4*8),i[n-2]=o<<3,i[n-1]=o>>>29,i}(function(e){e=e.replace(/\r\n/g,"\n");for(var t="",o=0;o<e.length;o++){var n=e.charCodeAt(o);n<128?t+=String.fromCharCode(n):(127<n&&n<2048?t+=String.fromCharCode(n>>6|192):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128)),t+=String.fromCharCode(63&n|128))}return t}(w.token+"&"+v+"&"+y+"&"+_.data)),u=1732584193,m=4023233417,f=2562383102,g=271733878,h=0;h<d.length;h+=16)u=e(r=u,a=m,c=f,l=g,d[h+0],7,3614090360),g=e(g,u,m,f,d[h+1],12,3905402710),f=e(f,g,u,m,d[h+2],17,606105819),m=e(m,f,g,u,d[h+3],22,3250441966),u=e(u,m,f,g,d[h+4],7,4118548399),g=e(g,u,m,f,d[h+5],12,1200080426),f=e(f,g,u,m,d[h+6],17,2821735955),m=e(m,f,g,u,d[h+7],22,4249261313),u=e(u,m,f,g,d[h+8],7,1770035416),g=e(g,u,m,f,d[h+9],12,2336552879),f=e(f,g,u,m,d[h+10],17,4294925233),m=e(m,f,g,u,d[h+11],22,2304563134),u=e(u,m,f,g,d[h+12],7,1804603682),g=e(g,u,m,f,d[h+13],12,4254626195),f=e(f,g,u,m,d[h+14],17,2792965006),u=t(u,m=e(m,f,g,u,d[h+15],22,1236535329),f,g,d[h+1],5,4129170786),g=t(g,u,m,f,d[h+6],9,3225465664),f=t(f,g,u,m,d[h+11],14,643717713),m=t(m,f,g,u,d[h+0],20,3921069994),u=t(u,m,f,g,d[h+5],5,3593408605),g=t(g,u,m,f,d[h+10],9,38016083),f=t(f,g,u,m,d[h+15],14,3634488961),m=t(m,f,g,u,d[h+4],20,3889429448),u=t(u,m,f,g,d[h+9],5,568446438),g=t(g,u,m,f,d[h+14],9,3275163606),f=t(f,g,u,m,d[h+3],14,4107603335),m=t(m,f,g,u,d[h+8],20,1163531501),u=t(u,m,f,g,d[h+13],5,2850285829),g=t(g,u,m,f,d[h+2],9,4243563512),f=t(f,g,u,m,d[h+7],14,1735328473),u=o(u,m=t(m,f,g,u,d[h+12],20,2368359562),f,g,d[h+5],4,4294588738),g=o(g,u,m,f,d[h+8],11,2272392833),f=o(f,g,u,m,d[h+11],16,1839030562),m=o(m,f,g,u,d[h+14],23,4259657740),u=o(u,m,f,g,d[h+1],4,2763975236),g=o(g,u,m,f,d[h+4],11,1272893353),f=o(f,g,u,m,d[h+7],16,4139469664),m=o(m,f,g,u,d[h+10],23,3200236656),u=o(u,m,f,g,d[h+13],4,681279174),g=o(g,u,m,f,d[h+0],11,3936430074),f=o(f,g,u,m,d[h+3],16,3572445317),m=o(m,f,g,u,d[h+6],23,76029189),u=o(u,m,f,g,d[h+9],4,3654602809),g=o(g,u,m,f,d[h+12],11,3873151461),f=o(f,g,u,m,d[h+15],16,530742520),u=n(u,m=o(m,f,g,u,d[h+2],23,3299628645),f,g,d[h+0],6,4096336452),g=n(g,u,m,f,d[h+7],10,1126891415),f=n(f,g,u,m,d[h+14],15,2878612391),m=n(m,f,g,u,d[h+5],21,4237533241),u=n(u,m,f,g,d[h+12],6,1700485571),g=n(g,u,m,f,d[h+3],10,2399980690),f=n(f,g,u,m,d[h+10],15,4293915773),m=n(m,f,g,u,d[h+1],21,2240044497),u=n(u,m,f,g,d[h+8],6,1873313359),g=n(g,u,m,f,d[h+15],10,4264355552),f=n(f,g,u,m,d[h+6],15,2734768916),m=n(m,f,g,u,d[h+13],21,1309151649),u=n(u,m,f,g,d[h+4],6,4149444226),g=n(g,u,m,f,d[h+11],10,3174756917),f=n(f,g,u,m,d[h+2],15,718787259),m=n(m,f,g,u,d[h+9],21,3951481745),u=p(u,r),m=p(m,a),f=p(f,c),g=p(g,l);return(i(u)+i(m)+i(f)+i(g)).toLowerCase()}()},n={data:_.data,ua:_.ua},Object.keys(_).forEach(function(e){void 0===o[e]&&void 0===n[e]&&"headers"!==e&&"ext_headers"!==e&&"ext_querys"!==e&&(o[e]=_[e])}),_.ext_querys&&Object.keys(_.ext_querys).forEach(function(e){o[e]=_.ext_querys[e]}),w.getJSONP?o.type="jsonp":w.getOriginalJSONP?o.type="originaljsonp":(w.getJSON||w.postJSON)&&(o.type="originaljson"),void 0!==_.valueType&&("original"===_.valueType?w.getJSONP||w.getOriginalJSONP?o.type="originaljsonp":(w.getJSON||w.postJSON)&&(o.type="originaljson"):"string"===_.valueType&&(w.getJSONP||w.getOriginalJSONP?o.type="jsonp":(w.getJSON||w.postJSON)&&(o.type="json"))),!0===w.useJsonpResultType&&"originaljson"===o.type&&delete o.type,w.dangerouslySetProtocol&&(t=w.dangerouslySetProtocol+":"+t),w.querystring=o,w.postdata=n,w.path=t),e()},r.prototype.__processUnitPrefix=function(e){e()};var w=0;r.prototype.__requestJSONP=function(e){function t(e){if(s&&clearTimeout(s),p.parentNode&&p.parentNode.removeChild(p),"TIMEOUT"===e)window[a]=function(){window[a]=void 0;try{delete window[a]}catch(e){}};else{window[a]=void 0;try{delete window[a]}catch(e){}}}var o=_(),n=this.params,i=this.options,r=n.timeout||2e4,a="mtopjsonp"+(n.jsonpIncPrefix||"")+ ++w,s=setTimeout(function(){e(i.timeoutErrMsg||"TIMEOUT::æŽ¥å£è¶…æ—¶"),t("TIMEOUT")},r);i.querystring.callback=a;var p=document.createElement("script");return p.src=i.path+"?"+m(i.querystring)+"&"+m(i.postdata),p.async=!0,p.onerror=function(){t("ABORT"),e(i.abortErrMsg||"ABORT::æŽ¥å£å¼‚å¸¸é€€å‡º")},window[a]=function(){i.results=Array.prototype.slice.call(arguments),t(),o.resolve()},r=p,(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]||document.firstElementChild||document).appendChild(r),o.promise},r.prototype.__requestJSON=function(o){function n(e){s&&clearTimeout(s),"TIMEOUT"===e&&a.abort()}var i=_(),e=this.params,r=this.options,a=new u.XMLHttpRequest,t=e.timeout||2e4,s=setTimeout(function(){o(r.timeoutErrMsg||"TIMEOUT::æŽ¥å£è¶…æ—¶"),n("TIMEOUT")},t);r.CDR&&f(h)&&(r.querystring.c=decodeURIComponent(f(h))),a.onreadystatechange=function(){if(4==a.readyState){var e,t=a.status;if(200<=t&&t<300||304==t){n(),e=a.responseText,t=a.getAllResponseHeaders()||"";try{(e=/^\s*$/.test(e)?{}:JSON.parse(e)).responseHeaders=t,r.results=[e],i.resolve()}catch(e){o("PARSE_JSON_ERROR::è§£æžJSONå¤±è´¥")}}else n("ABORT"),o(r.abortErrMsg||"ABORT::æŽ¥å£å¼‚å¸¸é€€å‡º")}};var p,c,t=r.path+"?"+m(r.querystring);r.getJSON?(p="GET",t+="&"+m(r.postdata)):r.postJSON&&(p="POST",c=m(r.postdata)),a.open(p,t,!0),a.withCredentials=!0,a.setRequestHeader("Accept","application/json"),a.setRequestHeader("Content-type","application/x-www-form-urlencoded");var l=e.ext_headers||e.headers;if(l)for(var d in l)a.setRequestHeader(d,l[d]);return a.send(c),i.promise},r.prototype.__requestWindVane=function(e){function t(e){i.results=[e],o.resolve()}var o=_(),n=this.params,i=this.options,r=n.data,a=n.api,s=n.v,p=i.postJSON?1:0,c=i.getJSON||i.postJSON||i.getOriginalJSONP?"originaljson":"";void 0!==n.valueType&&("original"===n.valueType?c="originaljson":"string"===n.valueType&&(c="")),!0===i.useJsonpResultType&&(c="");var l,d="https"===location.protocol?1:0,u=n.isSec||0,m=n.sessionOption||"AutoLoginOnly",f=n.ecode||0,g=n.ext_headers||{},h=n.ext_querys||{},y=2*(l=void 0!==n.timer?parseInt(n.timer):void 0!==n.timeout?parseInt(n.timeout):2e4);!0===n.needLogin&&void 0===n.sessionOption&&(m="AutoLoginAndManualLogin"),void 0!==n.secType&&void 0===n.isSec&&(u=n.secType);g={api:a,v:s,post:String(p),type:c,isHttps:String(d),ecode:String(f),isSec:String(u),param:JSON.parse(r),timer:l,sessionOption:m,ext_headers:g,ext_querys:h};n.ttid&&!0===i.dangerouslySetWVTtid&&(g.ttid=n.ttid),Object.assign&&n.dangerouslySetWindvaneParams&&Object.assign(g,n.dangerouslySetWindvaneParams);h="MtopWVPlugin";return"string"==typeof n.customWindVaneClassName&&(h=n.customWindVaneClassName),v.windvane.call(h,"send",g,t,t,y),o.promise},r.prototype.__requestAlipay=function(e){var t=_(),o=this.params,n=this.options,i={apiName:o.api,apiVersion:o.v,needEcodeSign:"1"===String(o.ecode),headers:o.ext_headers||{},usePost:!!n.postJSON};a(o.data)||(o.data=JSON.parse(o.data)),i.data=o.data,o.ttid&&!0===n.dangerouslySetWVTtid&&(i.ttid=o.ttid),(n.getJSON||n.postJSON||n.getOriginalJSONP)&&(i.type="originaljson"),void 0!==o.valueType&&("original"===o.valueType?i.type="originaljson":"string"===o.valueType&&delete i.type),!0===n.useJsonpResultType&&delete i.type,Object.assign&&o.dangerouslySetAlipayParams&&Object.assign(i,o.dangerouslySetAlipayParams);var r="mtop";return"string"==typeof o.customAlipayJSBridgeApi&&(r=o.customAlipayJSBridgeApi),u.AlipayJSBridge.call(r,i,function(e){n.results=[e],t.resolve()}),t.promise},r.prototype.__processRequest=function(e,t){var r=this;return p.then(function(){var e=r.options;if(e.H5Request&&(e.getJSONP||e.getOriginalJSONP))return r.__requestJSONP(t);if(e.H5Request&&(e.getJSON||e.postJSON))return r.__requestJSON(t);if(e.WindVaneRequest)return d?r.__requestAlipay(t):r.__requestWindVane(t);throw new Error("UNEXCEPT_REQUEST::é”™è¯¯çš„è¯·æ±‚ç±»åž‹")}).then(e).then(function(){var e=r.options,t=(r.params,e.results[0]),o=t&&t.ret||[];(t.ret=o)instanceof Array&&(o=o.join(","));var n,i=t.c;e.CDR&&i&&(n=i,i={domain:e.pageDomain,path:"/",secure:e.secure,sameSite:e.sameSite},document.cookie=h.replace(/[^+#$&^`|]/g,encodeURIComponent).replace("(","%28").replace(")","%29")+"="+n.replace(/[^+#$&\/:<-\[\]-}]/g,encodeURIComponent)+(i.domain?";domain="+i.domain:"")+(i.path?";path="+i.path:"")+(i.secure?";secure":"")+(i.httponly?";HttpOnly":"")+(i.sameSite?";Samesite="+i.sameSite:"")),-1<o.indexOf("SUCCESS")?t.retType=l.SUCCESS:t.retType=l.ERROR,e.retJson=t})},r.prototype.__sequence=function(e){var r=this,a=[],s=[];e.forEach(function e(t){var o,n,i;t instanceof Array?t.forEach(e):(n=_(),i=_(),a.push(function(){return n=_(),(o=t.call(r,function(e){return n.resolve(e),i.promise},function(e){return n.reject(e),i.promise}))&&(o=o.catch(function(e){n.reject(e)})),n.promise}),s.push(function(e){return i.resolve(e),o}))});for(var t,o=p;t=a.shift();)o=o.then(t);for(;t=s.pop();)o=o.then(t);return o};function b(e){e()}var x=function(e){e()};r.prototype.request=function(e){var o=this;if(this.options=n(e||{},c),!s){var t="å½“å‰æµè§ˆå™¨ä¸æ”¯æŒPromiseï¼Œè¯·åœ¨windowså¯¹è±¡ä¸ŠæŒ‚è½½Promiseå¯¹è±¡";throw v.mtop={ERROR:t},new Error(t)}t=s.resolve([x,b]).then(function(e){var t=e[0],e=e[1];return o.__sequence([t,o.__processRequestMethod,o.__processRequestType,o.__processToken,o.__processRequestUrl,o.middlewares,o.__processRequest,e])}).then(function(){var e=o.options.retJson;return e.retType!==l.SUCCESS?s.reject(e):o.options.successCallback?void o.options.successCallback(e):s.resolve(e)}).catch(function(e){e=e instanceof Error?(console.error(e.stack),{ret:[e.message],stack:[e.stack],retJson:l.ERROR}):"string"==typeof e?{ret:[e],retJson:l.ERROR}:void 0!==e?e:o.options.retJson;return v.mtop.errorListener&&v.mtop.errorListener({api:o.params.api,data:o.params.data,v:o.params.v,retJson:e}),o.options.failureCallback?void o.options.failureCallback(e):s.reject(e)});return this.__processRequestType(),o.options.H5Request&&(o.constructor.__firstProcessor||(o.constructor.__firstProcessor=t),x=function(e){o.constructor.__firstProcessor.then(e).catch(e)}),("get"===this.params.type&&"json"===this.params.dataType||"post"===this.params.type)&&(e.pageDomain=e.pageDomain||function(t){try{return".com"!==t.substring(t.lastIndexOf("."))?(t.split(".")||[]).length<=3?t:t.split(".").slice(1).join("."):t.substring(t.lastIndexOf(".",t.lastIndexOf(".")-1)+1)}catch(e){return t.substring(t.lastIndexOf(".",t.lastIndexOf(".")-1)+1)}}(u.location.hostname),e.mainDomain!==e.pageDomain&&(e.maxRetryTimes=4,e.CDR=!0)),this.__requestProcessor=t},v.mtop=function(e){return new r(e)},v.mtop.request=function(e,t,o){t={H5Request:e.H5Request,WindVaneRequest:e.WindVaneRequest,LoginRequest:e.LoginRequest,AntiCreep:e.AntiCreep,AntiFlood:e.AntiFlood,successCallback:t,failureCallback:o||t};return new r(e).request(t)},v.mtop.H5Request=function(e,t,o){t={H5Request:!0,successCallback:t,failureCallback:o||t};return new r(e).request(t)},v.mtop.middlewares=t,v.mtop.config=c,v.mtop.RESPONSE_TYPE=l,v.mtop.CLASS=r}(window,window.lib||(window.lib={})),function(m,a){function c(e){return e.preventDefault(),!1}function f(e,t){var o=this,n=m.dpr||1,i=document.createElement("div"),r=document.documentElement.getBoundingClientRect(),a=Math.max(r.width,window.innerWidth)/n,s=Math.max(r.height,window.innerHeight)/n;i.style.cssText=["-webkit-transform:scale("+n+") translateZ(0)","-ms-transform:scale("+n+") translateZ(0)","transform:scale("+n+") translateZ(0)","-webkit-transform-origin:0 0","-ms-transform-origin:0 0","transform-origin:0 0","width:"+a+"px","height:"+s+"px","z-index:2147483647","position:"+(800<a?"fixed":"absolute"),"left:0","top:0px","background:"+(800<a?"rgba(0,0,0,.5)":"#FFF"),"display:none"].join(";");var p=document.createElement("div");p.style.cssText=["width:100%","height:52px","background:#EEE","line-height:52px","text-align:left","box-sizing:border-box","padding-left:20px","position:absolute","left:0","top:0","font-size:16px","font-weight:bold","color:#333"].join(";"),p.innerText=e;n=navigator.userAgent.match(/.*(iPhone|iPad|Android|ios|SymbianOS|Windows Phone).*/i),s=document.createElement("img");s.style.cssText=["display:block","position:absolute","margin-top:15px","right:0","top:0","height:15px","line-height:52px","padding:0 20px","color:#999"].join(";"),s.src="https://gw.alicdn.com/tfs/TB1QZN.CYj1gK0jSZFuXXcrHpXa-200-200.png";e=document.createElement("iframe");e.style.cssText=["width:100%","height:100%","border:0","overflow:hidden"].join(";"),n?(p.appendChild(s),i.appendChild(p)):(s.style.cssText=["position:absolute","width:15px","height:15px","top:102px","left:"+(a/2-185+390)+"px","cursor: pointer","border:0","z-index:1","overflow:hidden"].join(";"),i.appendChild(s),e.style.cssText=["position:absolute","top:92px","left:"+(a/2-185)+"px","width:420px","height:320px","border:0","background:#FFF","overflow:hidden"].join(";")),i.appendChild(e),i.className="J_MIDDLEWARE_FRAME_WIDGET",document.body.appendChild(i),e.src=t,s.addEventListener("click",function(){o.hide();var e=document.createEvent("HTMLEvents");e.initEvent("close",!1,!1),i.dispatchEvent(e)},!1),this.addEventListener=function(){i.addEventListener.apply(i,arguments)},this.removeEventListener=function(){i.removeEventListener.apply(i,arguments)},this.show=function(){document.addEventListener("touchmove",c,!1),i.style.display="block",window.scrollTo(0,0)},this.hide=function(){document.removeEventListener("touchmove",c),window.scrollTo(0,-r.top),i.parentNode&&i.parentNode.removeChild(i)}}if(!a||!a.mtop||a.mtop.ERROR)throw new Error("Mtop åˆå§‹åŒ–å¤±è´¥ï¼");var r=m.Promise,n=a.mtop.CLASS,s=a.mtop.config,p=a.mtop.RESPONSE_TYPE;a.mtop.middlewares.push(function(e){var n=this,i=this.options,r=this.params;return e().then(function(){var e=i.retJson,t=e.ret,o=navigator.userAgent.toLowerCase(),o=-1<o.indexOf("safari")&&o.indexOf("chrome")<0&&o.indexOf("qqbrowser")<0;if((-1<(t=t instanceof Array?t.join(","):t).indexOf("SESSION_EXPIRED")||-1<t.indexOf("SID_INVALID")||-1<t.indexOf("AUTH_REJECT")||-1<t.indexOf("NEED_LOGIN"))&&(e.retType=p.SESSION_EXPIRED,!i.WindVaneRequest&&(!0===s.LoginRequest||!0===i.LoginRequest||!0===r.needLogin))){if(!a.login)throw new Error("LOGIN_NOT_FOUND::ç¼ºå°‘lib.login");if(!0!==i.safariGoLogin||!o||"taobao.com"===i.pageDomain)return a.login.goLoginAsync().then(function(e){return n.__sequence([n.__processToken,n.__processRequestUrl,n.__processUnitPrefix,n.middlewares,n.__processRequest])}).catch(function(e){throw"CANCEL"===e?new Error("LOGIN_CANCEL::ç”¨æˆ·å–æ¶ˆç™»å½•"):new Error("LOGIN_FAILURE::ç”¨æˆ·ç™»å½•å¤±è´¥")});a.login.goLogin()}})}),a.mtop.loginRequest=function(e,t,o){t={LoginRequest:!0,H5Request:!0,successCallback:t,failureCallback:o||t};return new n(e).request(t)},a.mtop.antiFloodRequest=function(e,t,o){t={AntiFlood:!0,successCallback:t,failureCallback:o||t};return new n(e).request(t)},a.mtop.middlewares.push(function(e){var o=this.options;return this.params,!0!==o.H5Request||!0!==s.AntiFlood&&!0!==o.AntiFlood?void e():e().then(function(){var e=o.retJson,t=e.ret;-1<(t=t instanceof Array?t.join(","):t).indexOf("FAIL_SYS_USER_VALIDATE")&&e.data.url&&(o.AntiFloodReferer?location.href=e.data.url.replace(/(http_referer=).+/,"$1"+o.AntiFloodReferer):location.href=e.data.url)})}),a.mtop.antiCreepRequest=function(e,t,o){t={AntiCreep:!0,successCallback:t,failureCallback:o||t};return new n(e).request(t)},a.mtop.middlewares.push(function(e){var l=this,d=this.options,u=this.params;return!1!==d.AntiCreep&&(d.AntiCreep=!0),!0!==u.forceAntiCreep&&!0!==d.H5Request||!0!==s.AntiCreep&&!0!==d.AntiCreep?void e():e().then(function(){var e=d.retJson,t=e.ret;if((-1<(t=t instanceof Array?t.join(","):t).indexOf("RGV587_ERROR::SM")||-1<t.indexOf("ASSIST_FLAG"))&&e.data.url){var c="_m_h5_smt",o=(t=new RegExp("(?:^|;\\s*)_m_h5_smt\\=([^;]+)(?:;\\s*|$)").exec(document.cookie))?t[1]:void 0,n=!1;if(!0===d.saveAntiCreepToken&&o)for(var i in o=JSON.parse(o))u[i]&&(n=!0);if(!0!==d.saveAntiCreepToken||!o||n)return new r(function(i,r){function a(){p.removeEventListener("close",a),m.removeEventListener("message",s),r("USER_INPUT_CANCEL::ç”¨æˆ·å–æ¶ˆè¾“å…¥")}function s(e){var t,o;try{t=JSON.parse(e.data)||{}}catch(e){}if(t&&"child"===t.type){p.removeEventListener("close",a),m.removeEventListener("message",s),p.hide();try{for(var n in o="string"==typeof(o=JSON.parse(decodeURIComponent(t.content)))?JSON.parse(o):o)u[n]=o[n];!0===d.saveAntiCreepToken?(document.cookie=c+"="+JSON.stringify(o)+";",m.location.reload()):l.__sequence([l.__processToken,l.__processRequestUrl,l.__processUnitPrefix,l.middlewares,l.__processRequest]).then(i)}catch(e){r("USER_INPUT_FAILURE::ç”¨æˆ·è¾“å…¥å¤±è´¥")}}}var p=new f("",e.data.url);p.addEventListener("close",a,!1),m.addEventListener("message",s,!1),p.show()});for(i in o)u[i]=o[i];return l.__sequence([l.__processToken,l.__processRequestUrl,l.__processUnitPrefix,l.middlewares,l.__processRequest])}})})}(window,window.lib||(window.lib={})),e.exports=window.lib.mtop},431:function(e,t,o){"use strict";o.r(t);var n=o(33),i=o.n(n),n=o(78),w=o.n(n),n=o(2),b=o.n(n),n=o(17),a=o.n(n),x=o(415),r=1,S=((n=c.prototype).init=function(e){var t,o;this.isInit||(this.isInit=!0,this.copyId="copy_textarea_"+r,this.containerId="copy_box_"+r,t=this.getCopyBoxHtml(e.text),o=document.getElementsByTagName("body")[0],(e=document.createElement("div")).setAttribute("style","position: relative"),e.setAttribute("id",this.containerId),e.innerHTML=t,o.appendChild(e),this.isDestory=!1,r+=1)},n.copy=function(e){if(!this.isDestory){var t=document.getElementById(this.copyId);if(t)try{t.focus(),t.select();var o=!1;document.queryCommandSupported("copy")&&(o=document.execCommand("copy",!1,null)),e&&e(o)}catch(t){e&&e(!1)}}},n.destory=function(){if(!this.isDestory){var e=document.getElementById(this.containerId);try{e&&e.remove(),this.isDestory=!0}catch(e){}}},n.getCopyBoxHtml=function(e){void 0===e&&(e="");var t=this.getCopyTextStyle();return['<textarea id="'+this.copyId+'" readOnly style="'+t+'" value="'+e+'" >'+e+"</textarea>"].join("")},n.getCopyTextStyle=function(){return["font-size: 12px;","border: 0;","padding: 0;","margin: 0;","position: absolute;","left: -9999px;","top: "+(window.pageYOffset||document.documentElement.scrollTop)+"px;"].join("")},c),s=o(418),p=o(419),R=function(e,t){var o=s.default.get(e,{domain:(0,p.getFixedDomainUrl)(),path:"/",raw:!0})||"",n=new RegExp("(.*&?"+t+"=)(.*?)(&.*|$)");o.match(n);e=RegExp.$2;return n.test(o)&&(n=t,o={b_localeFormat:/^[a-z]{2}_[A-Z]{2}$/,c_tpFormat:/^[A-Z]{3}$/,regionFormat:/^[A-Z]{2,3}$/,signFormat:/^(y|n)$/,x_as_iFormat:/^([A-Za-z0-9]|(%))+/,acs_rtFormat:/^[A-Za-z0-9]+$/},!/(&|=)/.test(t=e)&&t&&o[n+"Format"]&&o[n+"Format"].test(t))?e:""};function c(e){this.copyId=void 0,this.containerId=void 0,this.isDestory=void 0,this.isInit=void 0,this.isInit=!1,this.init(e)}window.__getCookie=R;var m="poplayer-web-container-cachetimes",n=location.href.substring(0,location.href.indexOf("#")<0?location.href.length:location.href.indexOf("#")),n=n.substr(n.indexOf("?")),O={};n&&n.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(e,t,o,n){return O[t]=decodeURIComponent(n),""});var l=o(7),n=o(166),d=o.n(n);function A(e,t){d.a.error(new Error(e),{filename:t}),Object(l.c)(new Error(e))}function u(e,t,o,n){if(void 0===o&&(o=""),void 0===n&&(n=""),t)return d.a.api.success(e,o,"200"),Object(l.b)({url:e,rtype:"mtop"}),0;try{"object"==typeof n&&(n=JSON.stringify(n))}catch(e){}d.a.api.error(e,o,"ERROR",n),Object(l.a)({url:e,rtype:"mtop",msg:n})}function C(e,t,o){var n,i,r;"detail"===(null===(n=window)||void 0===n||null===(i=n.g_SPM)||void 0===i||null===(r=i._current_spm)||void 0===r?void 0:r.b)&&"poplayerShow"===e&&d.a.report({t10:Promise.resolve(o)}),Object(l.h)(e,{et:t,xpath:"html/body/div",c1:o})}var f=!1;window.lib&&window.lib.mtop||(f=!0,o(420));var g,h=(g=i()(a.a.mark(function e(n,t){var o,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),f&&((o=window.lib.mtop.config).H5Request=!0,o.prefix=O.__prefix||"acs",o.subDomain="",o.mainDomain=0<=location.hostname.indexOf("aliexpress")?location.hostname.substr(location.hostname.indexOf("aliexpress")):"aliexpress.com"),o=b()({},n,{v:n.v||"1.0",encode:"1",ecode:1,appKey:24815441,data:n.data}),i=Date.now(),e.abrupt("return",window.lib.mtop.request(o).then(function(e){var t,o;return null!=e&&null!==(t=e.data)&&void 0!==t&&t.success?u(n.api,!0,""+(Date.now()-i)):u(n.api,!1,""+(Date.now()-i),null==e||null===(o=e.ret)||void 0===o?void 0:o[0]),e}).catch(function(e){throw u(n.api,!1,""+(Date.now()-i),""+e),e}));case 5:case"end":return e.stop()}},e)})),function(e,t){return g.apply(this,arguments)});function E(e){throw e}var y={},v="";var _,T,k=(_={reducer:function(e){switch((e=void 0===e?{}:e).type){case"add":return e.payload;case"reduceTime":return o=e.payload.key,0<(i=y[o]).times-i.showTimes?b()({},y,((n={})[o]=b()({},i,{showTimes:i.showTimes+1}),n)):y;case"addTime":return t=e.payload.key,o=e.payload.times,i=y[t],b()({},y,((n={})[t]=b()({},i,{showTimes:i.showTimes-o}),n));default:E("action should has type property")}var t,o,n,i},afterProcess:[function(e){y=e;e=v?m+"-"+v:m;localStorage.setItem(e,JSON.stringify(y))}]},function(e){var t,o=_.reducer(e=void 0===e?{}:e);null==_||null===(t=_.afterProcess)||void 0===t||t.forEach(function(e){e(o)})}),I=["https://campaign.aliexpress.com","http://campaign.aliexpress.com","https://pre-wormhole.aliexpress.com","http://pre-wormhole.aliexpress.com"],P=(T="postMessage"in window,N.prototype.send=T?function(e){this.target.postMessage(this.prefix+"|"+this.name+"__Messenger__"+e,"*")}:function(e){var t=window.navigator[this.prefix+this.name];if("function"!=typeof t)throw new Error("target callback function is not defined");t(this.prefix+e,window)},q.prototype.addTarget=function(e,t){e=new N(e,t,this.prefix);this.targets[t]=e},q.prototype.initListen=function(){function e(e){if((-1!==I.indexOf(e.origin)||e.origin===window.location.origin)&&"object"==typeof e&&e.data&&e.data.indexOf&&0<=e.data.indexOf("__Messenger__"))for(var t=(e=e.data).split("__Messenger__"),o=(t=(e=t[1],t[0].split("|")))[0],n=t[1],i=0;i<r.listenFunc.length;i++)o+n===r.prefix+r.name&&r.listenFunc[i](e)}var r=this;T?"addEventListener"in document?window.addEventListener("message",e,!1):"attachEvent"in document&&window.attachEvent("onmessage",e):window.navigator[this.prefix+this.name]=e},q.prototype.listen=function(e){for(var t=0,o=this.listenFunc.length,n=!1;t<o;t++)if(this.listenFunc[t]==e){n=!0;break}n||this.listenFunc.push(e)},q.prototype.clear=function(){this.listenFunc=[]},q.prototype.send=function(e){var t,o=this.targets;for(t in o)o.hasOwnProperty(t)&&o[t].send(e)},q);function N(e,t,o){var n="";if(arguments.length<2?n="target error - target and name are both required":"object"!=typeof e?n="target error - target itself must be window object":"string"!=typeof t&&(n="target error - target name must be string type"),n)throw new Error(n);this.target=e,this.name=t,this.prefix=o}function q(e,t){this.targets={},this.name=e,this.listenFunc=[],this.prefix=t||"[PROJECT_NAME]",this.initListen()}function U(e,t,o){var n=e.indexOf("?");return 0<=n&&(n<e.indexOf("#")||e.indexOf("#")<0)?e.replace(/\?/,"?"+t+"="+encodeURIComponent(o)+"&"):0<=e.indexOf("#")?e.replace("#","?"+t+"="+encodeURIComponent(o)+"#"):e+"?"+t+"="+encodeURIComponent(o)}var D=o(36),J=["type"];function L(){return j.apply(this,arguments)}function j(){return(j=i()(a.a.mark(function e(n){var t,i,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{t=n.type,i=w()(n,J),Object.keys(i||{}).reduce(function(e,t){var o=i[t];return(n[t]=o)?e+"&"+t+"="+o:e},""),o=[""+n.log_key,"click"===t?"CLK":"EXP"],"click"===t?n.ae_page_type="poplayer":n.exp_type="poplayer",n.spm_cnt=n.spm_cnt||"a2g0n.poplayer",("CLK"===o[1]?Object(D.a):Object(D.b))(n)}catch(e){A("poplayer æ‰“ç‚¹ä¸ŠæŠ¥å‡ºé”™:"+e,"src/util/log.ts")}case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var M=window.navigator.userAgent;function F(){return M.match(/(phone|pad|pod|iPhone|iPod|iPad|ios|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)}var n=o(0),H=o.n(n),n=o(48),W=o.n(n),V=["callAppUrl","targetUrl","pageCode","needRedirect","isAutoCall","spm","pageId"],B=(F(),F()?"a2g0n":"a2g0o"),z=F()?"msite":"pc",G=Date.now(),$="postMessage"in window;function K(e){return"number"==typeof e||/^\d+$/.test(""+e)?e+"px":e}function X(m,f,g,h,y,v,_){void 0===_&&(_=!1);var e=m.split(/_/)&&m.split(/_/)[2],t=new P(e+"parent",void 0);t.addTarget(f.contentWindow||window,e),t.listen(function(e){var t=JSON.parse(e);switch(t.type){case"load":L({log_key:"/ae.pc_ctr.statweb_ae_ctr",spm_cnt:B+"."+v+".poplayer.loadsuccess",type:"expose",exp_page:h,positionSign:y,exp_type:"poplayer",houyiTrack:g,isNewModule:_,clientType:z,extend:JSON.stringify(null!==(s=null==t?void 0:t.extend)&&void 0!==s?s:{})});break;case"resizeWidthPosition":t.payload&&t.payload.width&&(f.style.width=K(t.payload.width)),t.payload&&t.payload.height&&(f.style.height=K(t.payload.height)),t.payload&&t.payload.top&&(f.style.top=K(t.payload.top)),t.payload&&t.payload.bottom&&(f.style.bottom=K(t.payload.bottom)),t.payload&&t.payload.left&&(f.style.left=K(t.payload.left)),t.payload&&t.payload.right&&(f.style.right=K(t.payload.right));break;case"show":L({log_key:"/ae.pc_ctr.statweb_ae_ctr",spm_cnt:B+"."+v+".poplayer.display",type:"expose",positionSign:y,exp_page:h,exp_type:"poplayer",houyiTrack:g,clientType:z,isNewModule:_,timeToShow:""+(Date.now()-G),extend:JSON.stringify(null!=t&&t.extend?b()({m_page_id:window.dmtrack_pageid||"","spm-url":O.spm||""},t.extend):{})}),f.style.display="block",f.style.zIndex="1000000",f.style.transform="translate3d(0, 0, 10000)",k({type:"reduceTime",payload:{key:m}}),C("poplayerShow","EXP",""+(Date.now()-G));break;case"addTime":k({type:"addTime",payload:{key:m,times:t.payload}});break;case"link":L({log_key:"/ae.pc_click.statweb_ae_click",spm_cnt:B+"."+v+".poplayer.jump",type:"click",positionSign:y,exp_page:h,exp_type:"poplayer",houyiTrack:g,clientType:z,isNewModule:_,extend:JSON.stringify(null!==(p=null==t?void 0:t.extend)&&void 0!==p?p:{})});var o=(o=t.payload).replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;");window.location.href=o;break;case"close":document.body.removeChild(f),L({log_key:"/ae.pc_click.statweb_ae_click",spm_cnt:B+"."+v+".poplayer.close",type:"click",positionSign:y,exp_page:h,exp_type:"poplayer",houyiTrack:g,clientType:z,isNewModule:_,extend:JSON.stringify(null!=t&&t.extend?{m_page_id:window.dmtrack_pageid||"","spm-url":O.spm||""}:{})});break;case"failed":document.body.removeChild(f),L({log_key:"/ae.pc_ctr.statweb_ae_ctr",spm_cnt:B+"."+v+".poplayer.hidden",type:"expose",positionSign:y,exp_page:h,houyiTrack:g,isNewModule:_,exp_type:"poplayer",clientType:z,extend:JSON.stringify(null!==(c=null==t?void 0:t.extend)&&void 0!==c?c:{})});break;case"callApp":var n,i=t.payload,r=i.callAppUrl,a=i.targetUrl,s=(i.pageCode,i.needRedirect),p=i.isAutoCall,o=i.spm,c=void 0===o?B+"."+v+".poplayer.callapp":o,o=i.pageId,i=w()(i,V);if(r)try{var l,d=x.Utils.fixCallUrlParams(r),u=R("xman_us_f","acs_rt");u&&((l=new S({text:["$",u||"","$"].join("")})).copy(function(){}),setTimeout(function(){l.destory()},150)),Object(x.execCallApp)(b()({callAppUrl:d,callAppCallback:function(){},targetUrl:a,pageCode:v,needRedirect:void 0!==s?s:!!a,isAutoCall:p,spm:c,pageId:o||window.dmtrack_pageid||"",extParams:b()({track:g,fromAction:"poplayer"},i)},i)),L({log_key:"/ae.pc_click.statweb_ae_click",spm_cnt:B+"."+v+".poplayer.callapp",type:"click",positionSign:y,exp_page:h,exp_type:"poplayer",houyiTrack:g,clientType:z,isNewModule:_,extend:JSON.stringify(null!=t&&t.extend?b()({m_page_id:window.dmtrack_pageid||"","spm-url":O.spm||""},t.extend):{})})}catch(e){A("poplayer "+m+" callAppUrl error: "+e,"src/page/index/index.ts"),console.log(e);try{s&&a&&(n=x.Utils.createRedirectUrl(a,{pageCode:v,isAutoCall:p,spm:c,pageId:o||window.dmtrack_pageid||"","spm-url":O.spm||""}),window.location.href=n)}catch(e){A("poplayer "+m+" callAppUrl redirect error: "+e,"src/page/index/index.ts"),console.error(e)}}document.body.removeChild(f);break;default:document.body.removeChild(f),A("poplayer "+m+":never unknown message happen, auto close poplayer","src/page/index/index.ts"),E("never unknown message happen, auto close poplayer")}})}function Y(){return(Y=i()(a.a.mark(function e(l){var t,d,o,i,n,u,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return function(e){v=e;var t=localStorage.getItem(m+"-"+e)||localStorage.getItem(m)||"";try{t&&(y=JSON.parse(t)||{})}catch(e){y={}}}(l.positionSign),d=document.body.getAttribute("data-spm")||"0",L({log_key:"/ae.pc_ctr.statweb_ae_ctr",spm_cnt:B+"."+d+".poplayer.trigger",type:"expose",positionSign:l.positionSign,exp_page:l.positionSign,exp_type:"poplayer",clientType:z}),o=Date.now(),e.next=6,function(e,t){var o;void 0===t&&(t="pc");var n=R("aep_usuc_f","b_locale"),i=R("aep_usuc_f","region"),r=n&&(null==n||null===(a=n.split("_"))||void 0===a?void 0:a[0])+"_"+i,n=R("aep_usuc_f","c_tp"),a=R("xman_us_f","acs_rt"),i=R("xman_us_f","x_as_i");return h({type:"POST",api:"mtop.aliexpress.usertouch.poplayer.get",v:"2.0",data:{_currency:n,_lang:r,clientType:t,positionSign:e,ext:JSON.stringify({pullTrafficRuleParam:{originalUrl:null===(e=window)||void 0===e||null===(o=e.location)||void 0===o?void 0:o.href,appAffiParameters:decodeURIComponent(i||"")||"",acsRt:a,referUrl:null===(a=document)||void 0===a?void 0:a.referrer}})}})}(l.positionSign,z);case 6:r=e.sent,C("poplayerMtopTiming","OTHER",""+(Date.now()-o)),i=y,n=null==r||null===(t=r.data)||void 0===t?void 0:t.popLayerRuleMap,u=Object.keys(n).reduce(function(e,t){return b()({},e,((e={})[t]=JSON.parse(n[t]),e))},{}),r=Object.keys(u).reduce(function(e,t){var o,n=u[t];return b()({},e,((o={})[n.uuid]=b()({times:n.times,type:n.type,priority:n.priority},(t=n.times,e=null===(e=i[n.uuid])||void 0===e?void 0:e.showTimes,void 0===(null===(n=i[n.uuid])||void 0===n?void 0:n.startTime)&&0,{showTimes:0===t?-1:e||0})),o))},{}),k({type:"add",payload:r}),(r=function(e){var t,o=[];for(t in e)o.push(b()({},e[t],{uuid:t}));var n={smallImage:!1,other:!1},i=o.sort(function(e,t){return t.priority-e.priority}).filter(function(e){return e.times>e.showTimes});return i.length?i.filter(function(e){if("smallImage"===e.type){if(!n.smallImage)return n.smallImage=!0}else if(!n.other)return n.other=!0;return!1}).map(function(e){return e.uuid}):[]}(r)).length&&r.forEach(function(t){var e,o,n,i,r,a,s,p=null===(c=u[t])||void 0===c||null===(p=c.params)||void 0===p?void 0:p.extGcpOutputPageUrl,c=null===(c=u[t])||void 0===c||null===(e=c.params)||void 0===e?void 0:e.jsComboUrl;p&&$&&(L({log_key:"/ae.pc_ctr.statweb_ae_ctr",spm_cnt:B+"."+d+".poplayer.openurl",type:"expose",positionSign:l.positionSign,houyiTrack:null===(e=u[t])||void 0===e||null===(o=e.params)||void 0===o?void 0:o.track,exp_page:p,exp_type:"poplayer",clientType:z}),c?(s=null===(i=u[t])||void 0===i||null===(r=i.params)||void 0===r?void 0:r.track,a=function(o,n,i){var e,r=document.createElement("div");document.body.appendChild(r);var t=null==n||null===(s=n.params)||void 0===s?void 0:s.jsComboUrl,a=null===(s=t.match(/@ali\/gmod-(poplayer|pop)-[a-z]+/))||void 0===s?void 0:s[0],s=document.createElement("script");return s.src=t,null===(t=document.getElementsByTagName("head"))||void 0===t||null===(e=t[0])||void 0===e||e.appendChild(s),s.onload=function(){var e,t=document.body.getAttribute("data-spm")||"0";null!==(e=window)&&void 0!==e&&e[a]?(t=H.a.createElement(window[a],{popInfo:n,positionSign:o.positionSign,parentSpmB:t,uuid:i.split(/_/)&&i.split(/_/)[2]}))&&W.a.render(t,r):A("poplayer module not found: "+a,"src/page/index/new.ts")},r}(l,u[t],t),X(t,a,s,window.location.href,l.positionSign,d,!0)):(c=p,(s=(i=c+=0<=c.indexOf("?")?"&parentSpmB="+d:"?parentSpmB="+d,r=t,a=l.positionSign,s=document.createElement("iframe"),(c=r.split(/_/)&&r.split(/_/)[2])&&(s.src=U(U(U(i,"__poplayer_preserve_uuid",c),"__prefix",O.__prefix||""),"__poplayer_position_sign",a),s.name=r,s.style.width="100%",s.style.height="100%",s.style.border="none",s.style.display="none",s.style.position="fixed",s.style.zIndex="-100",s.style.left="0",s.style.top="0",s.style.transform="translate3d(0, 0, -100)",document.body.appendChild(s)),s)).onerror=function(e){A(t+" poplayer iframe on error","src/page/index/index.ts")},X(t,s,null===(s=u[t])||void 0===s||null===(n=s.params)||void 0===n?void 0:n.track,p,l.positionSign,d)))});case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}t.default=function(e){return Y.apply(this,arguments)}}}]);
