function strHtml(s){return'<div class="edit-section" id="editSection"><div class="ds-head"></div > <div class="edit-scroll"><div class="hd"><span class="next btnOpacity"><i></i></span><span class="prev btnOpacity"><i></i></span></div><div class="bd"><ul class="'+s+' clearfix"></ul></div></div></div></div>'}!function(){var t=$(".author-wrap");isLock=0,""==userid&&"undefined"==userid||$.ajax({url:"//m.zol.com.cn/Mbase/index.php?c=Author_Spread&a=MainPageSubscribe&callback=editor",type:"get",dataType:"jsonp",jsonp:"callback",success:function(s){var a="";2==s.status?(t.html(strHtml("ds-picList")),t.find(".ds-head").html("<h2>推荐关注</h2>"),$.each(s.data,function(s,t){a+='<li class="ds-item"><a href="'+t.pcUrl+'"><span class="head"><img width="68" height="68" src="'+t.img+'" alt="'+t.title+'"><i class="v"></i></span><span class="name">'+t.title+'</span><span class="tag">'+t.desc+'</span></a><p class="text"><a href="'+t.mUrl+'">最新文章：'+t.docTitle+'</a></p><span rel="'+t.userToken+'" class="subscribe btn-add"><em></em>关注</span></li>'}),t.find(".ds-picList").html(a)):(t.html(strHtml("edit-section my-attention")),t.find(".ds-head").html('<h2>我的关注</h2><a href="https://my.zol.com.cn/subscribe/" class="more">查看更多&gt;</a>'),$.each(s.data,function(s,t){var e=0==t.docComment?'<span class="commit">'+t.date+"</span>":'<a href="'+t.docComUrl+'" class="commit"><em>'+t.docComment+"</em>评论</a>";a+='<li class="attention-item"><a href="'+t.docUrl+'"><img width="233" height="174" src="'+t.docPic+'"><span class="title">'+t.docTitle+'</span></a><div class="ma-foot"><a href="'+t.pcUrl+'" class="tag">'+t.title+"</a>"+e+"</div></li>"}),t.find(".my-attention").html(a)),jQuery(".edit-section").slide({titCell:".hd ul",mainCell:".bd ul",autoPage:!0,effect:"left",autoPlay:!1,scroll:4,vis:4})}}),t.delegate(".subscribe","click",function(){if(""==userid||"undefined"==userid)return!(location.href="//service.zol.com.cn/user/login.php?backUrl=https://www.zol.com.cn");if(1==isLock||10<i)return!1;var s=$(this),t="editorSubscribe"==s.attr("id");e.config.token=s.attr("rel"),e.config.selector=s,e.config.refresh=t,console.log(e.config.token),$(this).hasClass("btn-add")?e.add():$(this).hasClass("btn-has")&&e.del(),i++});var e={config:{selector:"",token:""},add:function(s){var t=$(".subscribe");$.ajax({url:"//author.zol.com.cn/api/subscribe.php?op=1&token="+e.config.token,type:"get",cache:!1,dataType:"jsonp",success:function(s){console.log(s),"ok"==s.status?(e.config.selector.removeClass("btn-add").addClass("btn-has").html("已关注"),e.config.refresh&&(s=t.find("em").html()- -1,t.find("em").html(s))):isLock=1}})},del:function(s){var t=$(".subscribe");$.ajax({url:"//author.zol.com.cn/api/subscribe.php?op=2&token="+e.config.token,type:"get",cache:!1,dataType:"jsonp",success:function(s){"ok"==s.status?(e.config.selector.removeClass("btn-has").addClass("btn-add").html("<em></em>关注"),e.config.refresh&&(s=t.find("em").html()-1,t.find("em").html(s))):isLock=1}})}}}();
