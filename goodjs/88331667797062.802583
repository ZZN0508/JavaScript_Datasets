!function(){var STK=(a={},b=[],a.inc=function(e,t){return!0},a.register=function(e,t){for(var n,o=e.split("."),r=a;n=o.shift();)if(o.length)void 0===r[n]&&(r[n]={}),r=r[n];else if(void 0===r[n])try{r[n]=t(a)}catch(e){b.push(e)}},a.regShort=function(e,t){if(void 0!==a[e])throw"["+e+"] : short : has been register";a[e]=t},a.IE=/msie/i.test(navigator.userAgent),a.E=function(e){return"string"==typeof e?document.getElementById(e):e},a.C=function(e){return"TEXT"==(e=e.toUpperCase())?document.createTextNode(""):"BUFFER"==e?document.createDocumentFragment():document.createElement(e)},a.log=function(e){b.push("["+(new Date).getTime()%1e5+"]: "+e)},a.getErrorLogInformationList=function(e){return b.splice(0,e||b.length)},a),a,b,USER_STATUS;$Import=STK.inc,STK.register("core.str.trim",function(e){return function(e){if("string"!=typeof e)throw"trim need a string as parameter";for(var t=e.length,n=0,o=/(\u3000|\s|\t|\u00A0)/;n<t&&o.test(e.charAt(n));)n+=1;for(;n<t&&o.test(e.charAt(t-1));)--t;return e.slice(n,t)}}),STK.register("core.evt.addEvent",function(o){return function(e,t,n){e=o.E(e);return null!=e&&(t=t||"click","function"==(typeof n).toLowerCase()?(e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n,!0):void 0)}}),STK.register("core.obj.parseParam",function(e){return function(e,t,n){var o,r={};for(o in t=t||{},e)r[o]=e[o],null==t[o]||n&&!e.hasOwnProperty[o]||(r[o]=t[o]);return r}}),STK.register("core.arr.isArray",function(e){return function(e){return"[object Array]"===Object.prototype.toString.call(e)}}),STK.register("core.json.queryToJson",function(l){return function(e,t){function n(e){return t?decodeURIComponent(e):e}for(var o,r,s,i=l.core.str.trim(e).split("&"),a={},c=0,u=i.length;c<u;c++)i[c]&&(r=(o=i[c].split("="))[0],s=o[1],o.length<2&&(s=r,r="$nullName"),a[r]?(1!=l.core.arr.isArray(a[r])&&(a[r]=[a[r]]),a[r].push(n(s))):a[r]=n(s));return a}}),STK.register("core.obj.isEmpty",function(e){return function(e,t){var n,o=!0;for(n in e){if(t){o=!1;break}if(e.hasOwnProperty(n)){o=!1;break}}return o}}),STK.register("core.util.cookie",function(r){var n={set:function(e,t,n){var o=[],n=r.core.obj.parseParam({expire:null,path:"/",domain:null,secure:null,encode:!0},n);1==n.encode&&(t=escape(t)),o.push(e+"="+t),null!=n.path&&o.push("path="+n.path),null!=n.domain&&o.push("domain="+n.domain),null!=n.secure&&o.push(n.secure),null!=n.expire&&(n=(t=new Date).getTime()+36e5*n.expire,t.setTime(n),o.push("expires="+t.toGMTString())),document.cookie=o.join(";")},get:function(e){e=e.replace(/([\.\[\]\$])/g,"\\$1");e=new RegExp(e+"=([^;]*)?;","i"),e=(document.cookie+";").match(e);return e&&e[1]||""},remove:function(e,t){(t=t||{}).expire=-10,n.set(e,"",t)}};return n}),STK.register("core.str.parseURL",function(e){return function(e){for(var t=["url","scheme","slash","host","port","path","query","hash"],n=/^(?:([A-Za-z]+):(\/{0,3}))?([0-9.\-A-Za-z]+\.[0-9A-Za-z]+)?(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/.exec(e),o={},r=0,s=t.length;r<s;r+=1)o[t[r]]=n[r]||"";return o}}),STK.register("core.json.jsonToQuery",function(n){function i(e,t){return e=n.core.str.trim((e=null==e?"":e).toString()),t?encodeURIComponent(e):e}return function(e,t){var n=[];if("object"==typeof e)for(var o in e)if("$nullName"!==o)if(e[o]instanceof Array)for(var r=0,s=e[o].length;r<s;r++)n.push(o+"="+i(e[o][r],t));else"function"!=typeof e[o]&&n.push(o+"="+i(e[o],t));else n=n.concat(e[o]);return n.length?n.join("&"):""}}),STK.register("core.util.URL",function(a){return function(e,t){var o=a.core.obj.parseParam({isEncodeQuery:!1,isEncodeHash:!1},t||{}),n={},r=a.core.str.parseURL(e),s=a.core.json.queryToJson(r.query),i=a.core.json.queryToJson(r.hash);return n.setParam=function(e,t){return s[e]=t,this},n.getParam=function(e){return s[e]},n.setParams=function(e){for(var t in e)n.setParam(t,e[t]);return this},n.setHash=function(e,t){return i[e]=t,this},n.getHash=function(e){return i[e]},n.valueOf=n.toString=function(){var e=[],t=a.core.json.jsonToQuery(s,o.isEncodeQuery),n=a.core.json.jsonToQuery(i,o.isEncodeQuery);return""!=r.scheme&&(e.push(r.scheme+":"),e.push(r.slash)),""!=r.host&&(e.push(r.host),""!=r.port&&(e.push(":"),e.push(r.port))),e.push("/"),e.push(r.path),""!=t&&e.push("?"+t),""!=n&&e.push("#"+n),e.join("")},n}}),STK.register("core.util.browser",function(e){function t(e){var t=0;return parseFloat(e.replace(/\./g,function(){return 1==t++?"":"."}))}var n,o,r,s,i,a=navigator.userAgent.toLowerCase(),c=window.external||"";try{/windows|win32/i.test(a)?i="windows":/macintosh/i.test(a)?i="macintosh":/rhino/i.test(a)&&(i="rhino"),(o=a.match(/applewebkit\/([^\s]*)/))&&o[1]?(n="webkit",s=t(o[1])):(o=a.match(/presto\/([\d.]*)/))&&o[1]?(n="presto",s=t(o[1])):(o=a.match(/msie\s([^;]*)/))?(n="trident",s=1,(o=a.match(/trident\/([\d.]*)/))&&o[1]&&(s=t(o[1]))):/gecko/.test(a)&&(n="gecko",s=1,(o=a.match(/rv:([\d.]*)/))&&o[1]&&(s=t(o[1]))),/world/.test(a)?r="world":/360se/.test(a)?r="360":/maxthon/.test(a)||"number"==typeof c.max_version?r="maxthon":/tencenttraveler\s([\d.]*)/.test(a)?r="tt":/se\s([\d.]*)/.test(a)&&(r="sogou")}catch(e){}return{OS:i,CORE:n,Version:s,EXTRA:r||!1,IE:/msie/.test(a),OPERA:/opera/.test(a),MOZ:/gecko/.test(a)&&!/(compatible|webkit)/.test(a),IE5:/msie 5 /.test(a),IE55:/msie 5.5/.test(a),IE6:/msie 6/.test(a),IE7:/msie 7/.test(a),IE8:/msie 8/.test(a),IE9:/msie 9/.test(a),SAFARI:!/chrome\/([\d.]*)/.test(a)&&/\/([\d.]*) safari/.test(a),CHROME:/chrome\/([\d.]*)/.test(a),IPAD:/\(ipad/i.test(a),IPHONE:/\(iphone/i.test(a),ITOUCH:/\(itouch/i.test(a),MOBILE:/mobile/i.test(a)}}),STK.register("core.dom.isNode",function(e){return function(e){return null!=e&&Boolean(e.nodeName)&&Boolean(e.nodeType)}}),STK.register("core.util.hideContainer",function(t){var n;return{appendChild:function(e){t.core.dom.isNode(e)&&(n||((n=t.C("div")).style.cssText="position:absolute;top:-9999px;left:-9999px;",document.getElementsByTagName("head")[0].appendChild(n)),n.appendChild(e))},removeChild:function(e){t.core.dom.isNode(e)&&n&&n.removeChild(e)}}}),window.WB2=window.WB2||{},WB2._config=WB2._config||{},WB2._config.host=("https:"==window.location.protocol?"https:":"http:")+"//js.t.sinajs.cn",WB2._config.cssHost=("https:"==window.location.protocol?"https:":"http:")+"//img.t.sinajs.cn",WB2._config.cdn_version="20150130.02",window.WB2=window.WB2||{},WB2.Module={loginButton:{versions:{"1.0":{js:"loginButton{ver}.js?version=20140327",css:"/t3/style/css/common/card.css?version=20140327"},latest:{js:"loginButton.js?version=20140327",css:"/t4/appstyle/widget/css/loginButton/loginButton.css"}}},followButton:{versions:{"1.0":{js:"followButton{ver}.js",css:"/t3/style/css/common/card.css?version=20140327"},latest:{js:"followButton.js?version=20140327",css:"/t4/appstyle/widget/css/followButton/followButtonSdk.css"}}},publish:{versions:{"1.0":{js:"publish{ver}.js?version=20170720",css:"/t3/style/css/thirdpart/rlsbox.css?version=20140327"},1.1:{js:"publish{ver}.js?version=20170720",css:"/t35/appstyle/opent/css/widgets/js_weibo_send/js_weibo_send.css"},latest:{js:"publish.js?version=20170720",css:"/t4/appstyle/widget/css/weiboPublish/weiboPublish.css"}}},hoverCard:{versions:{"1.0":{js:"hoverCard{ver}.js?version=20141124",css:"/t3/style/css/common/card.css?version=20140327"},latest:{js:"hoverCard.js?version=20141124",css:"/t4/appstyle/widget/css/weiboCard/weiboCard.css"}}},recommend:{versions:{"1.0":{js:"recommend{ver}.js"},latest:{js:"recommend.js",css:"/t3/style/css/thirdpart/interested.css"}}},selector:{versions:{"1.0":{js:"selector{ver}.js?version=20140327",css:"/t3/style/css/thirdpart/csuser.css"},latest:{js:"selector.js?version=20140327",css:"/t4/appstyle/widget/css/selector/selector.css?version=20150714"}}},shareRecommend:{versions:{"1.0":{js:"shareRecommend{ver}.js?version=20140327"},latest:{js:"shareRecommend.js?version=20140327",css:"/t4/appstyle/widget/css/weiboFamous/weiboFamous.css"}}},like:{versions:{"1.0":{js:"like{ver}.js?version=20140327"},latest:{js:"like.js?version=20140327",css:"/t4/appstyle/widget/css/praiseButton/praiseButton.css?version=20140327"}}},iframeWidget:{versions:{latest:{js:"iframeWidget.js?version=20140327"}}},invite:{versions:{"1.0":{js:"invite{ver}.js?version=20140327"},latest:{js:"invite.js?version=20140327",css:("https:"==window.location.protocol?"https:":"http:")+"//img.t.sinajs.cn/t4/appstyle/V5_invite/css/module/frame/layer_frame.css"}}},quote:{versions:{"1.0":{js:"quote{ver}.js?version=20140327"},latest:{js:"quote.js?version=20140327"}}}},STK.register("core.func.getType",function(e){return function(e){var t;return("object"==(t=typeof e)?null==e?"null":Object.prototype.toString.call(e).slice(8,-1):t).toLowerCase()}}),STK.register("core.dom.ready",function(e){function t(){return!r&&"complete"===document.readyState||r}function n(){if(1!=r){r=!0;for(var e=0,t=o.length;e<t;e++)if("function"===s(o[e]))try{o[e].call()}catch(e){}o=[]}}var o=[],r=!1,s=e.core.func.getType,i=(e.core.util.browser,e.core.evt.addEvent);return t()||(e.IE&&window===window.top&&function(){if(t())n();else{try{document.documentElement.doScroll("left")}catch(e){return setTimeout(arguments.callee,25)}n()}}(),i(document,"DOMContentLoaded",n),function(){t()?n():setTimeout(arguments.callee,25)}(),i(window,"load",n)),function(e){t()?"function"===s(e)&&e.call():o.push(e)}}),STK.register("conf.api.wbml",function(t){window.WB2=window.WB2||{};var s={widgetCache:{},loadCss:function(e){css=document.createElement("link"),css.href=e,css.type="text/css",css.rel="stylesheet",document.getElementsByTagName("head")[0].appendChild(css),s.widgetCache[e]=1},getWidgetFile:function(e,t){var n=window.WB2._config.host+"/open/api",o=window.WB2._config.cssHost,r=WB2.Module,s=r[e];if(!s)throw"Module "+e+" can not be found!";t=(s=(s=r[e].versions[t])||r[e].versions.latest).js.replace("{ver}",t),r=(null!=s.css?s:r[e].versions.latest).css||"";return{js:n+"/js/widget/"+e+"/"+t,css:""!=r?/^http:\/\/|https:\/\/|\/\//.test(r)?r:o+r:""}},loadWidget:function(e,t){var n=e.module,o=e.version,e=e.loadcss,r=this.getWidgetFile(n,o);s._init(r.js,function(){t&&t(r),queue.next()}),e&&r.css&&!this.widgetCache[r.css]&&this.loadCss(r.css)},_init:function(e,t){var n,o,r;s.widgetCache[e]?t&&t():(n=e,o=function(){s.widgetCache[e]=1,t&&t()},(r=parent.document.createElement("script")).charset="UTF-8",/msie/i.test(navigator.userAgent)?r.onreadystatechange=function(){"complete"!=r.readyState.toLowerCase()&&"loaded"!=r.readyState.toLowerCase()||(o(),r.onreadystatechange=null)}:r.onload=function(){o(),r.onload=null},r.src=n,parent.document.getElementsByTagName("head")[0].appendChild(r))}},p=function(){var e,o={load:function(n,e){var t,o=n.module||"",r=!0;if(""==o)throw"no availiable module found.";"string"==typeof e?t=e||"latest":"object"==typeof e&&(t=e.version||"latest",r=e.loadcss);r={module:o,version:t,loadcss:r};return"connectButton"==o&&(o="loginButton"),s.loadWidget(r,function(t){try{WB2.widget[o].call(window,n.params)}catch(e){throw STK.common.log.monitor({from:"jssdk",url:t.js,param:n.params,title:o,error:e.toString()}),e.toString()}}),this}},t=WB2.Module;for(e in t)e&&t[e]&&("loginButton"==e&&(o.connectButton=function(n){return function(e,t){o.load({module:n,params:e},t)}}(e)),o[e]=function(n){return function(e,t){o.load({module:n,params:e},t)}}(e));return o}();return function(){function e(){for(var o=[],t=0,e=l.length;t<e;t++)for(var n=l[t],r=n.tagName,s=n.widgetName,i=function(e,t){t=t||"wb";navigator.userAgent.toLowerCase();var n=t+":"+e;if(u.IE){try{var o=document.namespaces;if(o&&o[t])return 0==document.getElementsByTagName(e).length?document.getElementsByTagName(n):document.getElementsByTagName(e)}catch(e){}return document.getElementsByTagName(n)}return u.MOZ?document.getElementsByTagNameNS(document.body.namespaceURI,n):document.getElementsByTagName(n)}(r),a=0,c=i.length;a<c;a++)i[a].innerHTML='<span style="background:url('+("https:"==window.location.protocol?"https:":"http:")+'//timg.sjs.sinajs.cn/t4/appstyle/widget/images/library/base/loading1.gif) no-repeat;height:18px;padding:0 0 2px 20px;">Loading...</span>',o.push({tag:r,widget:s,params:function(e,t){for(var n=e.attributes,o={},r=n.length-1;0<=r;r--)n[r].specified&&(o[n[r].name]=n[r].value);return o.dom=e,o.tagName=t,o}(i[a],r)});if(0<(e=o.length))if(/weibo|ucbrowser/i.test(navigator.userAgent))for(t=0,e=o.length;t<e;t++)!function(e){setTimeout(function(){p[e.widget](e.params)},50*t)}(o[t]);else WB2.anyWhere(function(t){for(var n=0,e=o.length;n<e;n++)!function(e){setTimeout(function(){t.widget[e.widget](e.params)},50*n)}(o[n])})}var u=t.core.util.browser,l=[{tagName:"login-button",widgetName:"loginButton"},{tagName:"publish",widgetName:"publish"},{tagName:"share-recommend",widgetName:"shareRecommend"},{tagName:"like",widgetName:"like"},{tagName:"follow-button",widgetName:"iframeWidget"},{tagName:"share-button",widgetName:"iframeWidget"},{tagName:"list",widgetName:"iframeWidget"},{tagName:"show",widgetName:"iframeWidget"},{tagName:"topic",widgetName:"iframeWidget"},{tagName:"comments",widgetName:"iframeWidget"},{tagName:"livestream",widgetName:"iframeWidget"},{tagName:"bulkfollow",widgetName:"iframeWidget"},{tagName:"hotlist",widgetName:"iframeWidget"},{tagName:"invite",widgetName:"invite"},{tagName:"quote",widgetName:"quote"}];!function(){try{document.namespaces&&!document.namespaces.item.wb&&document.namespaces.add("wb")}catch(e){}}(),WB2.initCustomTag=e,t.core.dom.ready(function(){e()})}}),STK.register("core.json.jsonToStr",function(e){function t(e){return e<10?"0"+e:e}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+t(this.getUTCMonth()+1)+"-"+t(this.getUTCDate())+"T"+t(this.getUTCHours())+":"+t(this.getUTCMinutes())+":"+t(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var l,p,d,n=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function g(e){return n.lastIndex=0,n.test(e)?'"'+e.replace(n,function(e){var t=o[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}return function(e,t,n){var o;if(p=l="","number"==typeof n)for(o=0;o<n;o+=1)p+=" ";else"string"==typeof n&&(p=n);if((d=t)&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return function e(t,n){var o,r,s,i,a,c=l,u=n[t];switch(u&&"object"==typeof u&&"function"==typeof u.toJSON&&(u=u.toJSON(t)),typeof(u="function"==typeof d?d.call(n,t,u):u)){case"string":return g(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(l+=p,a=[],"[object Array]"===Object.prototype.toString.apply(u)){for(i=u.length,o=0;o<i;o+=1)a[o]=e(o,u)||"null";return s=0===a.length?"[]":l?"[\n"+l+a.join(",\n"+l)+"\n"+c+"]":"["+a.join(",")+"]",l=c,s}if(d&&"object"==typeof d)for(i=d.length,o=0;o<i;o+=1)"string"==typeof(r=d[o])&&(s=e(r,u))&&a.push(g(r)+(l?": ":":")+s);else for(r in u)Object.hasOwnProperty.call(u,r)&&(s=e(r,u))&&a.push(g(r)+(l?": ":":")+s);return s=0===a.length?"{}":l?"{\n"+l+a.join(",\n"+l)+"\n"+c+"}":"{"+a.join(",")+"}",l=c,s}}("",{"":e})}}),STK.register("common.util.date",function(){return function(e,t){return function(e,t){var n,o={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours()%12==0?12:e.getHours()%12,"H+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(n in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(t)&&(t=t.replace(RegExp.$1,(1<RegExp.$1.length?2<RegExp.$1.length?"/u661f/u671f":"/u5468":"")+{0:"/u65e5",1:"/u4e00",2:"/u4e8c",3:"/u4e09",4:"/u56db",5:"/u4e94",6:"/u516d"}[e.getDay()+""])),o)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?o[n]:("00"+o[n]).substr((""+o[n]).length)));return t}(e=e||new Date,t=t||"yyyy-MM-dd hh:mm:ss")}}),STK.register("conf.api.log",function($){var isConsoleEnable="object"==typeof window.console&&("function"==typeof window.console.log||"object"==typeof window.console.log),panelId="weibo_jssdk_console_panel",minHeight=30,maxHeight=90,Icon={info:"#0088CC",warn:"#D2D128",error:"#F50A0A"},cPanel={init:function(){var pos="position:fixed;";$.core.util.browser.IE6&&(pos="position:absolute;");var title=$.C("h5");title.innerHTML='Sina Weibo JSSDK Console Panel<a href="http://jssdk.sinaapp.com/help.php" target="_blank" style="position:absolute;right:0;margin-right:5px;color:#0088CC;font-size:12px;font-weight:normal;">Help?</a>',title.style.cssText="margin: 8px;font-size:13px;border-bottom:1px solid #ccc;";var logDiv=$.C("div");logDiv.id=panelId+"_logdiv",logDiv.style.cssText="background:#000; color:#FFF; margin:5px; border:1px solid #ccc; height:150px; max-height:150px; overflow-x:hidden; overflow-y: auto; word-break:nowrap; padding:5px 5px;border-radius:5px;";var textArea=$.C("textarea");textArea.value='WB2.console.log("test");',textArea.style.cssText="line-height:20px;font-size:12px;width:380px;height:30px;overflow-y:auto;margin:3px;padding:5px; border-radius:5px;border:1px solid #ccc;",textArea.onfocus=function(){textArea.select()},textArea.ondblclick=function(){parseInt(textArea.style.height)<maxHeight?textArea.style.height=maxHeight+"px":textArea.style.height=minHeight+"px"};var clear=$.C("input");clear.type="button",clear.value="Clear",clear.style.cssText="width:60px;height: 30px;border:1px solid #ccc; padding:2px 15px;border-radius:5px 0 0 5px;",clear.onclick=function(){logDiv.innerHTML=""};var run=$.C("input");run.type="button",run.value="Run",run.style.cssText="width:60px;height: 30px;border:1px solid #ccc; border-right:0;border-left:0; padding:2px 15px;",run.onclick=function(){var val=textArea.value;val&&eval(val)};var close=$.C("input");close.type="button",close.value="Close",close.style.cssText="width:60px;height: 30px;border:1px solid #ccc; padding:2px 15px;border-radius:0 5px 5px 0;",close.onclick=function(){cPanel.hide()};var bar=$.C("p");bar.appendChild(clear),bar.appendChild(run),bar.appendChild(close),bar.style.cssText="margin:5px 3px;";var panel=document.createElement("div");panel.id=panelId,panel.style.cssText=pos+"z-index:9999;left:0;top:0;width:400px;background:#eee;padding:5px;border-radius:5px;border:1px solid #bbb;",panel.appendChild(title),panel.appendChild(logDiv),panel.appendChild(textArea),panel.appendChild(bar),cPanel.output=logDiv,cPanel.close=close,cPanel.panel=panel,document.body.appendChild(panel)},show:function(){$.E(panelId)||cPanel.init(),cPanel.output=cPanel.output||$.E(panelId+"_logdiv"),cPanel.panel&&(cPanel.panel.style.display="block")},hide:function(){cPanel.panel&&(cPanel.panel.style.display="none")},setLog:function(e,t){if("string"==typeof e){new Date;var n=$.common.util.date(new Date),o="";switch(t){case"info":o=Icon.info;break;case"warn":o=Icon.warn;break;case"error":o=Icon.error}e='<p style="line-height:18px;margin:0;padding:0;"><span style="font-size:12px;color:#2EBC2C;">'+n+'</span><span style="font-size:12px;font-family: Verdana;padding-left:5px;'+(o="color:"+o)+'">'+e;""!=cPanel.output.innerHTML&&(e=e+"\r\n"+cPanel.output.innerHTML),cPanel.output.innerHTML=e+"</span></p>",cPanel.output.scrollTop=0}},log:function(e,t){cPanel.show();var n="",n="object"==typeof e||"[object Array]"===Object.prototype.toString.call(e)?"object"==typeof e.parent?e.toString():$.core.json.jsonToStr(e,null,"\t"):void 0===e?"undefined":e.toString();cPanel.setLog(n,t)}},debugLevel=["log","info","warn","error","dir"];return function(){window.WB2=window.WB2||{},window.WB2.console=window.WB2.console||{},window.WB2.console.init=function(){WB2._config.debug=!0,isConsoleEnable=!1},function(){for(var e=0,t=debugLevel.length;e<t;e++){var n=debugLevel[e];WB2.console[n]=function(t){return function(e){if(WB2._config.debug)if(isConsoleEnable)window.console[t](e);else try{cPanel.log(e,t)}catch(e){cPanel.log(e.message,t)}}}(n)}}();var t={"USE_X-UA-Compatible":function(){if($.core.util.browser.IE11){var e=document.getElementsByTagName("meta");if(e&&0<e.length)for(var t=0,n=e.length;t<n;t++)if("X-UA-Compatible"==e[t].getAttribute("http-equiv")){e[t],e[t].getAttribute("content").indexOf("IE7");break}return{output:!0,reason:"Use X-UA-Compatible Model In Current Page. "}}}};$.core.dom.ready(function(){for(var e in t){e=t[e]();e&&e.output&&WB2.console.warn(e.reason)}})}});var APPKEY_AVAILABLE=!0,LOGIN_FUNC_LIST=[],API_VERSION=2,OAUTH_QUERY_URL="https://api.weibo.com/"+API_VERSION+"/oauth2/query",OAUTH_LOGIN_WINDOW,OAUTH_LOGIN_URL="https://api.weibo.com/"+API_VERSION+"/oauth2/authorize",JS_CACHE={},$=STK,parseParam=$.core.obj.parseParam,addEvent=$.core.evt.addEvent,trim=$.core.str.trim,browser=$.core.util.browser,CookieUtil=$.core.util.cookie,queryToJson=$.core.json.queryToJson,jsonp=function(e){var t={url:"",charset:"UTF-8",timeout:3e4,args:{},onComplete:null,onTimeout:null,responseName:null,varkey:"callback"},n=-1,e=(t=parseParam(t,e)).responseName||"STK_"+Math.floor(1e3*Math.random())+(new Date).getTime().toString();t.args[t.varkey]=e;var o=t.onComplete,r=t.onTimeout;return window[e]=function(e){2!=n&&null!=o&&(n=1,o(e))},t.onComplete=null,t.onTimeout=function(){1!=n&&null!=r&&(n=2,r())},loadJs(t)},loadJs=function(e){var t,n,o={url:"",charset:"UTF-8",timeout:3e4,args:{},onComplete:null,onTimeout:null,uniqueID:null};if(""==(o=parseParam(o,e)).url)throw"url is null";(t=document.createElement("script")).charset="UTF-8";e=/msie/i.test(navigator.userAgent);null!=o.onComplete&&(e?t.onreadystatechange=function(){"complete"!=t.readyState.toLowerCase()&&"loaded"!=t.readyState.toLowerCase()||(clearTimeout(n),o.onComplete(),t.onreadystatechange=null)}:t.onload=function(){clearTimeout(n),o.onComplete(),t.onload=null});e=function(e){if(e){var t,n=[];for(t in e)n.push(t+"="+encodeURIComponent(trim(e[t])));return n.length?n.join("&"):""}}(o.args);return-1==o.url.indexOf("?")?""!=e&&(e="?"+e):""!=e&&(e="&"+e),t.src=o.url+e,document.getElementsByTagName("head")[0].appendChild(t),0<o.timeout&&null!=o.onTimeout&&(n=setTimeout(function(){o.onTimeout()},o.timeout)),t},Queue=function(){this.started=1,this.taskList=[],this.setStatue=function(e){this.started=e},this.start=function(){this.setStatue(0);var e=this.taskList.shift(),t=e[0],n=e[1],e=e[2];t.apply(e,n)},this.next=function(){this.setStatue(1),0<this.taskList.length&&this.start()},this.add=function(e,t){var n={args:[],pointer:window,top:!1};(n=parseParam(n,t)).top?this.taskList.unshift([e,n.args,n.pointer]):this.taskList.push([e,n.args,n.pointer]),this.started&&this.start()}},queue=new Queue;function initCommunicate(e){var t=WB2._config.version,t=WB2.anyWhere._instances[t];t?t.contentWindow._ready?t.contentWindow.request(e):WB2.addToCallbacks(t.contentWindow,e):WB2.delayCall(e)}function anyWhere(e){regIframeRequest({requestType:"anywhere",callback:e})}function regIframeRequest(e){var t=e||{};queue.add(function(e){JS_CACHE.bundle?e&&e():loadJs({url:WB2._config.host+"/open/api/js/api/bundle.js?version="+WB2._config.cdn_version,onComplete:function(){JS_CACHE.bundle=1,e&&e()}})},{args:[function(){initCommunicate(t),queue.next()}]})}function clientInfo(){var e,t=document.getElementsByTagName("script"),n=0;if(0<t.length)for(e=t[n++];e;){if(-1!=e.src.indexOf("api/js/wb.js")){o=e.src.split("?").pop();break}e=t[n++]}var o=o.toLowerCase(),r=queryToJson(o),s=r.appkey||"",i=r.secret||"";return debug=r.debug||!1,r=r.version||1,{appkey:s,secret:i,debug:debug,version:r}}function loginReady(e,t){var n,o;if(null!=e&&(1==t?LOGIN_FUNC_LIST.unshift(e):LOGIN_FUNC_LIST.push(e)),WB2.checkLogin()){for(n=0,o=LOGIN_FUNC_LIST.length;n<o;n++)LOGIN_FUNC_LIST[n].call();LOGIN_FUNC_LIST=[]}}function showLogin(e){var t=$.core.util.URL(OAUTH_LOGIN_URL);t.setParam("client_id",e.appkey),t.setParam("response_type","token"),t.setParam("display","js"),t.setParam("transport","html5"),t.setParam("referer",encodeURI(document.location.href)),(OAUTH_LOGIN_WINDOW=window.open(t,"oauth_login_window","width=600,height=455,toolbar=no,menubar=no,resizable=no,status=no,left="+(screen.width-600)/2+",top="+(screen.height-455)/2))&&OAUTH_LOGIN_WINDOW.focus()}function messageHandler(e){/\api.weibo\.com$/.test(e.origin)&&(e=e.data,e=unescape(e),(e=queryToJson(e)).error_code?(e.success=-1,e.status=-1):(e.success=1,e.status=1),loginCallBack(e))}function loginCallBack(e){WB2.console.log(e),loginStatus(e.status),1==e.success?(Cookie.save(e),loginReady()):LOGIN_FUNC_LIST.pop()}function login(e){APPKEY_AVAILABLE&&(loginReady(e,!0),WB2.checkLogin()||(window.postMessage&&!browser.IE?showLogin({appkey:WB2._config.appkey}):regIframeRequest({appkey:WB2._config.appkey,requestType:"login",callback:loginCallBack})))}function logout(t){if(WB2.checkLogin()&&null!=WB2._config.appkey){Cookie.del(),loginStatus(-1),WB2._config.access_token=null,delete WB2._config.access_token;try{jsonp({url:"https://api.weibo.com/2/account/end_session.json?source="+WB2._config.appkey,onComplete:function(e){t&&t(e.data)}})}catch(e){throw"JavaScript SDK: logout error"}}}function loginStatus(e){null!=e&&(USER_STATUS=e)}function checkLogin(){return 1==USER_STATUS}var Cookie={load:function(){if($.core.obj.isEmpty(WB2.oauthData)){var e=CookieUtil.get("weibojs_"+WB2._config.appkey),e=unescape(e);return queryToJson(e)}return WB2.oauthData},save:function(e){e="access_token="+((WB2.oauthData=e).access_token||"")+"&refresh_token="+(e.refresh_token||"")+"&expires_in="+(e.expires_in||0)+"&uid="+(e.uid||"")+"&status="+(e.status||USER_STATUS||-1);CookieUtil.set("weibojs_"+WB2._config.appkey,e,{path:"/",domain:document.domain})},del:function(){WB2.oauthData={},CookieUtil.remove("weibojs_"+WB2._config.appkey,{path:"/",domain:document.domain})}};function getLoginStatus(e){var t=e||Cookie.load(),e=t.access_token||"";t.expires_in;""!=e&&(USER_STATUS=1),jsonp({url:OAUTH_QUERY_URL,onComplete:function(e){if(WB2.console.log(e),1==(e=e||{}).status&&e.access_token&&(Cookie.save(e),WB2._config.access_token=e.access_token,WB2._config.uid=e.uid),e.error)return APPKEY_AVAILABLE=!1,WB2.console.warn(e.error),void("xd2.jsp has not Referer!"==e.error&&WB2.console.warn("鎮ㄤ娇鐢ㄧ殑appkey鏈拰鍩熷悕杩涜缁戝畾锛岃缁戝畾鍚庝娇鐢ㄣ€�"));USER_STATUS=e.status,loginReady()},args:{source:WB2._config.appkey}})}var init=function(e){var t;e.access_token&&(APPKEY_AVAILABLE=!0,t={status:USER_STATUS=1,access_token:e.access_token},e.uid&&(t.uid=e.uid),Cookie.save(t))};window.WB2=window.WB2||{},WB2.widget={};var sdkClient=clientInfo();WB2._config=WB2._config||{},WB2._config.version=sdkClient.version,WB2._config.appkey=sdkClient.appkey,WB2._config.secret=sdkClient.secret,WB2._config.debug=sdkClient.debug,WB2.oauthData={},WB2.init=init,WB2.login=login,WB2.logout=logout,WB2.checkLogin=checkLogin,WB2.anyWhere=anyWhere,WB2.anyWhere._instances={},WB2.Cookie=Cookie,WB2.regIframeRequest=regIframeRequest,$.conf.api.log(),$.conf.api.wbml(),WB2._config.appkey&&getLoginStatus(),window.postMessage&&!browser.IE&&$.core.evt.addEvent(window,"message",messageHandler)}();
