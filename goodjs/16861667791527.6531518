var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(Fe){var e=!0;try{var t=new Array("test1","test2","test3");t.forEach(function(e){}),t.indexOf("test");var a=JSON.stringify({fname:"Bob",lname:"Lee",address:{street:"123 test",city:"NY",state:"NY"}});JSON.parse(a);(new Image).src="",Fe.addEventListener||(e=!1),Fe.postMessage||(e=!1),Date.now();Fe.navigator.userAgent.match(/(ANTGalio\/3.3)|(ANTGalio\/3.4)|(HbbTV\/1\.1\.1(;Samsung;SmartTV2012;;;)\s+WebKit)/i)&&(e=!1)}catch(Fe){Fe.message,e=!1}try{e?(function(A,M){if(!A.isBuilt||!A.isBuilt()){var F=-1!==M.location.protocol.indexOf("https")?"https:":"http:",N="//secure-",R="glcfg510.js",v=0,g=0,_=0,y=!1,V="cgi-bin/gn?prd=session&c9=devid,&c13=asid,",B="600",G="600",n=[".imrworldwide.com",".nmrodam.com"],r=A.getInstances?A.getInstances():{},e=!1,x="bj.6.0.0",j="594";Date.now=Date.now||function(){return+new Date};var o,U={Promise:(c=function(e){try{new Promise(function(e,t){});return new Promise(e)}catch(e){}return new function(a){function n(e){i&&i(e)}function r(e){o&&o(e)}var i=null,o=null;return{then:function(e,t){i=e,o=t,a(n,r)}}}(e)},d.toString=function(){return c.toString()},d)};A.sdkvForConfig=function(){return x},A.isBuilt=function(){return e},A.getInstance=function(e,t){e=void 0!==e&&("string"==typeof e||"object"==(void 0===e?"undefined":_typeof(e))&&e.constructor===String)?e:"default";return r.hasOwnProperty(e)||(r[e]=t?u(e,A[e]||M[e]):u(e)),r[e]},A.setTotalNumAssetsAllowed=function(e){isNaN(e)||parseInt(e,10)},A.getAddress=function(){return q},A.getConfigAddress=function(){return z},A.getAddressProtocol=function(){return F},A.getInstances=function(){return r},A.loadXmlString=function(t){var e=null;try{return(e=new ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t),e}catch(e){try{return(new DOMParser).parseFromString(t,"text/xml")}catch(t){}}return null},A.isNielsenTag=function(e){var t,a=!1;return void 0!==e&&(t=e.indexOf("?"),-1<(e=-1!==e.indexOf(n[0])?e.indexOf(n[0]):e.indexOf(n[1]))&&e<t&&(a=!0)),a},A.getVersion=function(){return B},A.getVersionOverride=function(){return G},A.send=function(e){e&&M.console&&M.console.log&&console.log(e.parentNode)},A.browserSafeAddEventListener=function(e){void 0!==e.element&&(e.element.addEventListener?e.element.addEventListener(e.eventType,e.func,e.useCapture):e.element.attachEvent&&e.element.attachEvent("on"+e.eventType,e.func))},A.browserSafeRemoveEventListener=function(e){null!=e&&null!==e.element&&void 0!==e.element&&(e.element.removeEventListener?e.element.removeEventListener(e.eventType,e.func,e.useCapture):e.element.detachEvent&&e.element.detachEvent("on"+e.eventType,e.func))},A.controllers={util:(o=A,"function"!=typeof M.CustomEvent&&(l.prototype=M.Event.prototype,M.CustomEvent=l),{fireCustomEvent:function(e,t,a){try{a=a||M,e&&a&&a.dispatchEvent(new CustomEvent(e,{detail:t}))}catch(e){o&&o._listeners&&o._listeners.fireEvent("error",{type:"error",msg:"Browser error attempting to call element.dispatchEvent()."})}},queryParam:function(t){try{t=t.toString().toLowerCase();var e=M.location.search.substr(1).split("&"),a="";if(e.find)a=e.find(function(e){return 0===e.toLowerCase().indexOf(t+"=")});else for(var n=0,r=e.length;n<r;n++)if(0===e[n].toLowerCase().indexOf(t+"=")){a=e[n];break}if(a){var i=a.split("=");if(i&&1<i.length)return i[1]}}catch(e){o&&o._listeners&&o._listeners.fireEvent("error",{type:"error",msg:"Browser error attempting to retrieve query string parameter."})}return""},Promise:U.Promise})};var N=N||"//secure-",F=F||(-1!==M.location.protocol.indexOf("https")?"https:":"http:"),A=A||M.NOLBUNDLE||{},R=R||"glcfg510.js",B=B||"600",x=x||"bj.6.0.0",j=j||"",z="",y=y||!1,r=r||A.getInstances?A.getInstances():{},v=v||0,g=g||0,_=_||0,q=Q(".nmrodam.com/"),G=G||"600",V=V||"cgi-bin/gn?prd=session&c9=devid,&c13=asid,",J="IMRID",i={};if(A.loadLib=function(e,t,a,n){null!=e&&"string"==typeof e&&null!=t&&"string"==typeof t?i[e]?i[e].body?n(i[e].body(a)):i[e].callbacks.push({func:n,arg:a}):(i[e]={callbacks:[]},i[e].callbacks.push({func:n,arg:a})):null==t&&A.initLib(e,a)},A.registerLib=function(e,t){try{if(i){i.hasOwnProperty(e)||A.initLib(e,A,t);var a=i[e];a.body=t;for(var n=a.callbacks.shift();n;)n.func(a.body(n.arg)),n=a.callbacks.shift()}}catch(e){}},A.initLib=function(e,t,a){i[e]||(i[e]={handle:null,callbacks:[]}),i[e].body=a,i[e].body&&(a=i[e].body(t),t[e]=a,i[e].handle=a)},A.getLib=function(e){return i[e]?i[e].handle:null},M.gg_nol_FlashCallBack){for(var t,a=0,s=M.gg_nol_FlashCallBack.length;a<s;a+=1)M.gg_nol_FlashCallBack[a].hasOwnProperty("callBack")&&(t=document.getElementById(M.gg_nol_FlashCallBack[a].swfId))&&t[M.gg_nol_FlashCallBack[a].callBack]();M.gg_nol_FlashCallBack=void 0}e||(e=!0,v=g=Date.now(),A.BUILDVERSION="6.0.0.16")}function l(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var a=document.createEvent("CustomEvent");return a.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),a}function d(e){return c.apply(this,arguments)}var c;function Q(e){return void 0!==F&&void 0!==e&&void 0!==N?F+"//cdn-gl"+e:"https://sdk.imrworldwide.com/"}function h(e){e&&e.hasOwnProperty("target")&&(y="true"===String(e.target).toLowerCase())}function P(e){if(e&&e.hasOwnProperty("target")&&!isNaN(e.target))for(var t in r)a=void 0,void 0!==(a=r[t])&&a.hasOwnProperty("staticPage")&&a.staticPage.hasOwnProperty("evtParams")&&"static"===a.staticPage.evtParams.param1.type&&a.ggPM("48",e.target,"","","");var a}function u(e,t){var S,b,i={},o=[],n=[],s={},T=String(Date.now())+Math.round(1e4*Math.random()),a=!1,C=t||{};if(C.id=T,C.name=e,C.initialized=!1,C.staticPage={},C.modules={allModInit:!1},C.configLoaded=!1,C.apid="",C.sdkv=B,C.sdkvForConfig=x,C.useCachedConfig=null!=t,C.sessionId="",C.sivt=null,C.state=null,C._pauseTimeoutEnabled=!1,C.isAdobe=!1,t){if(t.q){for(var r,l=0;l<t.q.length;l++)(r=t.q[l])&&0<r.length&&o.push({eventType:r[0],param1:1<r.length?r[1]:void 0,param2:2<r.length?r[2]:void 0,param3:3<r.length?r[3]:void 0,param4:4<r.length?r[4]:void 0});delete t.q}else t.getEventQue&&(o=t.getEventQue());n=t.te||[]}function d(e,t){if((e="string"==typeof e?{type:e}:e).target||(e.target=t),!e.type)throw new Error("Event object missing 'type' property.");if(i[e.type]instanceof Array)for(var a=i[e.type],n=0,r=a.length;n<r;n++)a[n].call(C,t)}function c(e){try{var t="Error in retrieveMeta";if(e&&e.hasOwnProperty("fData")&&e.hasOwnProperty("ad")&&e.hasOwnProperty("content")&&e.hasOwnProperty("plid")){var a,n=function(e){try{if(!e||!e.hasOwnProperty("cmsMap"))return[];var t,a=[];for(t in e.cmsMap)e.cmsMap.hasOwnProperty(t)&&-1!==e.cmsMap[t].indexOf("nol_")&&a.push(e.cmsMap[t].replace(/[{(\[\])}]/g,""));return a}catch(e){}}({cmsMap:A.GLCFG.PLDPR.getCmsMap(e.plid)});for(a in e.fData)if(e.fData.hasOwnProperty(a)&&"count"!==a){var r=e.fData[a][Object.keys(e.fData[a]).splice(-1,1)];if(null!=r&&"object"===(void 0===r?"undefined":_typeof(r)))for(var i in r){var o=String(i);-1!==o.indexOf("nol_")&&-1===n.indexOf(o)||(e[a][i]=r[i])}}return e}return e&&e.hasOwnProperty("err")?(e.err=t+": Missing passedFdata, Ad, content or static properties",e):{err:t}}catch(e){}}function O(e){e&&(e.registerListener("ggPM",C),e._listeners&&(e._listeners.addListener("updateCmbStaticPage",C.handleUpdateOfStatic),e._listeners.addListener("removeCmbAssetId",C.removeAsset),e._listeners.addListener("tick",function(){g=Date.now(),_=Math.ceil((g-v)/1e3),a=!1,d("globalTick",{time:g,seconds:_})}),e._listeners.addListener("dcrHeartbeat",P),e._listeners.addListener("flushQueue",C.emptyQueue),e._listeners.addListener("handleSessionReset",C.handleSessionReset),e._listeners.addListener("flushPauseEventQueue",C.flushPauseEventQueue),e._listeners.addListener("sendOptOutStatus",h)),A.GLCFG=e)}function L(e,t){S&&S.ggParams&&S.ggParams.nol_sdkDebug&&-1<["debug","info","warn","true"].indexOf(S.ggParams.nol_sdkDebug.toString().toLowerCase())&&console&&console.log&&console.log("Nielsen Log: "+e,t||"")}var u,p,w={_queueEventLog:!1,_eventLog:[],init:function(){try{var e,t=A.controllers.util.queryParam("nol_eventHookDelay");w._queueEventLog=!1,t&&"NaN"!==(e=parseInt(t)).toString()&&(w._queueEventLog=!0,setTimeout(function(){w._queueEventLog=!1},1e3*(e<=20?e:20)))}catch(e){w._queueEventLog=!1}},trigger:function(e,t){try{var a;t&&((a=JSON.parse(JSON.stringify(t))).name=e.name,a.sdkv=x,w._queueEventLog?w._eventLog.push(a):(w._eventLog&&0<w._eventLog.length&&(A.controllers.util.fireCustomEvent("NSDK_EventHook",w._eventLog),w._eventLog=[]),A.controllers.util.fireCustomEvent("NSDK_EventHook",[a])))}catch(e){}}},E={_enabled:!0,_activated:!1,mode:null,isHybrid:function(){return this._enabled&&(void 0!==M.NielsenAppSDK||M.webkit&&M.webkit.messageHandlers&&M.webkit.messageHandlers.NielsenSDKMsg||M.NielsenAppSDKJSHandler&&M.ReactNativeWebView)},isAsync:function(){return this._enabled&&(M.webkit&&M.webkit.messageHandlers&&M.webkit.messageHandlers.NielsenSDKMsg||M.NielsenAppSDKJSHandler&&M.ReactNativeWebView)},intType:function(){return this._enabled&&M.NielsenAppSDKJSHandler&&M.ReactNativeWebView?"ReactWebview":"HybridWebview"},state:{},eMap:function(e){return{3:"loadMetadata",14:"staticstart",15:"loadMetadata",5:"play",55:"sendID3",49:"setPlayheadPosition",playheadposition:"setPlayheadPosition",setplayheadposition:"setPlayheadPosition",6:"stop",7:"stop",30:"onPaginate",35:"updateMetadata",56:"staticend",57:"end",oncomplete:"end",900:"optoutstatus",901:"optouturl",902:"meterversion",903:"demographicid"}[(e=e||"").toString()]||e},send:function(e,t,a){var n=this;if(n.isHybrid()){if(!a&&n.state[t.id]&&!n.state[t.id].enabled)return n.state[t.id].que||(n.state[t.id].que=[]),void n.state[t.id].que.push({action:e,payload:t});if(a||n._activated&&n.state[t.id]&&n.state[t.id].enabled){if(!M.NielsenAppSDK)return M.webkit&&M.webkit.messageHandlers&&M.webkit.messageHandlers.NielsenSDKMsg?M.webkit.messageHandlers.NielsenSDKMsg.postMessage(JSON.stringify({owner:"NielsenAppSDKJSHandler",action:e,payload:t})):M.NielsenAppSDKJSHandler&&M.ReactNativeWebView?M.ReactNativeWebView.postMessage(JSON.stringify({owner:"NielsenAppSDKJSHandler",action:e,payload:t})):void 0;t=M.NielsenAppSDK.postMessage(JSON.stringify({owner:"NielsenAppSDKJSHandler",action:e,payload:t}));try{t=t&&JSON.parse(t)}catch(e){}finally{return t&&n.processMsg(t),t}}}},enableSDK:function(){C.initialized=!0,C.modules.allModInit=!0,C.modules.PLCMB=2},processMsg:function(e){var t,a,n,r=this;if(e&&e.payload&&(!e.payload.id||r.state[e.payload.id]))switch(e.action){case"enabled":e.payload.id&&r.state[e.payload.id]&&(r.state[e.payload.id].enabled="true"==e.payload.value.toString());break;case"updateott":case"optoutstatus":case"optouturl":case"demographicid":case"meterversion":r.state[e.payload.id][e.action]=e.payload.value,(t=document.getElementById("nielsen.bsdk.native."+e.action))&&(t.innerHTML=e.payload.value);break;case"init-ggPM":case"init-trackEvent":if(clearTimeout(r.timeout),r.state[e.payload.id].enabled=e.payload.result,r._activated="true"==e.payload.result.toString(),r._activated){for(r.enableSDK(),r.mode="init-trackEvent"==e.action?1:0,C.emptyQueue(),n=r.state[e.payload.id].que,a=0;a<n.length;a++)r.send(n[a].action,n[a].payload);r.state[e.payload.id].que.length=0}else r.start&&(r.start(),r.start=null)}},onMessage:function(){var e,t,a,n=this;t="message",a=function(e){var t;if(e)try{(t=JSON.parse(e.data)||{}).action&&t.payload&&n.processMsg(t)}catch(e){}},(e=M).addEventListener?e.addEventListener(t,a,!1):e.attachEvent&&e.attachEvent("on"+t,a)},trackEvent:function(e,t,a){null===this.mode&&(this.mode=1),a=this.eMap(a),this.send("trackEvent",{id:T,data:{event:a||"",param1:e,queue_call:t}})},ggPM:function(e,t,a,n,r){var i=this;null===i.mode&&(i.mode=0),e=i.eMap(e),i.mode?i.send("trackEvent",{id:T,data:{event:e||"",param1:t,queue_call:!1}}):i.send("ggPM",{id:T,data:{event:e,param1:t,param2:a,param3:n,param4:r}})},urlParms:function(t){return((M.location.href.split("?")[1]||"").split("&")||[]).forEach(function(e){-1<e.indexOf("=")&&e.split("=")[0]&&(t[e.split("=")[0]]=e.split("=")[1])}),t},ggInitialize:function(e,t,a,n,r,i,o){var s=this,l=JSON.parse(JSON.stringify(e)),d=A.configs[e.apid].nol_GLOBALS||{},e=d.nol_hybrid_timeout||2e3;s.isHybrid()&&(d.nol_droid_appid||d.nol_ios_appid)?(s.start=o,s.state[T]={},s.state[T].que=[],s.timeout=setTimeout(function(){s.send("timeout",{id:T,data:{ggParams:l,instanceName:t,uid:a,flashDetect:n,detectBrowser:r,container:i}},!0),delete s.state[T],s.start&&s.start(),s.start=null},e),s.onMessage(),s.send("init",{id:T,intType:s.intType(),bsdkid:l.apid,droidid:d.nol_droid_appid||"",iosid:d.nol_ios_appid||"",timeout:e,data:{ggParams:s.urlParms(l),instanceName:t,uid:a,flashDetect:n,detectBrowser:r,container:i}},!0)):o&&o()}},m={localcid:{index:0,key:"nol_fpid"},createdOn:{index:1,key:"nol_fpidCreateTime"},lastAccessed:{index:2,key:"nol_fpidAccessTime"},lastEMMPing:{index:3,key:"nol_fpidLastEMMPingTime"}},k={allowCookies:!1,cookieTTL:"",firstCreated:!1,fpidParams:[],_domainSplit:document.domain.split(".").reverse(),_set:function(e,t){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"180",n=arguments[3],r=arguments[4],i=new Date;if(i.setTime(i.getTime()+24*Number(a)*60*60*1e3),i="expires="+i.toUTCString(),void 0!==this._domainSplit[r]&&(n=this._domainSplit[r]+"."+n,document.cookie=e+"="+t+";"+i+";path=/;SameSite=Lax;domain=."+n,this.get(e)!==t))return this._set(e,t,a,n,++r)},_evalCookieMap:function(e,t){var a,n;for(n in m)a=e[m[n].index]||"",t.set?t.set(m[n].key,a):t[m[n].key]=a},get:function(e){try{var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]+)"));return t?t[2]:""}catch(e){}return""},create:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"180",t=arguments[1],a=arguments[2],n=Date.now(),r="";navigator.cookieEnabled&&this.allowCookies&&A.GLCFG&&A.GLCFG.generateGUID&&(r+=A.GLCFG.generateGUID()+"|",r+=n+"|",r+=n+"|",-1<a.indexOf(t.toLowerCase())&&(r+=n),this._set("nol_fpid",r,e,this._domainSplit[0],1),this.firstCreated=!0)},update:function(e,t,a){var n="";this.allowCookies&&1<(n=this.get("nol_fpid").split("|")).length&&m[e]&&(n[m[e].index]=t,this._set("nol_fpid",n.join("|"),a,this._domainSplit[0],1))},appendfData:function(e){1!==this.fpidParams.length&&this._evalCookieMap(this.fpidParams,e)},appendSessParams:function(e){var t=this;t.fpidParams=t.get("nol_fpid").split("|"),1!==t.fpidParams.length&&t._evalCookieMap(t.fpidParams,e)}},I={metadataURL:"",metadataPing:"",pageURL:"",pageTitle:"",hasMetaPingFired:!1,_isWithinIFrame:function(){try{return M.self!=M.top}catch(e){return!0}},_isWithinFriendlyIFrame:function(){try{return!!M.top.document}catch(e){return!1}},_isReferrerAvailable:function(){try{return""!==M.document.referrer}catch(e){return!1}},evalPageData:function(){if(this._isWithinIFrame()){if(this._isWithinFriendlyIFrame())return{pageUrl:M.top.location.href,pageTitle:M.top.document.title};if(!this._isWithinFriendlyIFrame())return{pageUrl:this._isReferrerAvailable()?M.document.referrer:M.location.href,pageTitle:M.document.title}}return{pageUrl:M.top.location.href,pageTitle:M.top.document.title}},handleMetadataPingReset:function(){this.hasMetaPingFired&&(this.hasMetaPingFired=!1)}},D=(u=C.name,p=A,function(t,a){try{p.browserSafeAddEventListener({element:M,eventType:"NSDK_Initialized",func:function(e){try{e.detail.instanceName===u&&t(e.detail.instance)}catch(e){a&&a(e.message)}}})}catch(t){a&&a(t.message)}});function f(e){!a&&e&&("blur"===e.type||"scroll"===e.type||"touchstart"===e.type||"blur"!==e.type&&A.GLCFG.browser.hidden())&&(C.ggPM("flush","0"),a=!0,L("Data flushed on "+e.type+" event"))}return C.isHybrid=E.isHybrid,C.fpSession=k,C.metadataCtrl=I,C.getOptOutStatus=function(){return y},C.getId=function(){return T},C.GetName=function(){return C.name},C.Initialized=function(e){if(void 0===e)return C.initialized;C.initialized=e},C.getPauseQueueCount=function(){return Object&&Object.keys?Object.keys(s).length:0},C.disablePauseTimeout=function(){C._pauseTimeoutEnabled&&(C._pauseTimeoutEnabled=!1,L("Player "+C.id+" pause timeout disabled"))},C.enablePauseTimeout=function(){C._pauseTimeoutEnabled||(C._pauseTimeoutEnabled=!0,L("Player "+C.id+" pause timeout enabled"))},C.removeAsset=function(e){void 0!==e&&e.target.param1.hasOwnProperty("assetid")&&(C.staticPage={})},C.handleUpdateOfStatic=function(e){var t;e&&e.target&&(t=e.target.evtInfo,A.GLCFG&&A.GLCFG.PLDCR&&void 0!==t&&t.param1.hasOwnProperty("assetid")&&C.getId()===e.target.plid&&(e=A.GLCFG.PLDCR.latestDcrTick(),0!==Object.keys(C.staticPage).length&&C.staticPage.hasOwnProperty("id")&&C.staticPage.id===t.param1.assetid&&C.staticPage.hasOwnProperty("lastTimeStamp")?C.staticPage.lastTimeStamp=e:C.staticPage={id:t.param1.assetid,evtParams:t,startTimeStamp:e,lastTimeStamp:e}))},C.addListener=function(e,t){t&&(void 0===i[e]&&(i[e]=[]),i[e].push(t))},C.removeListener=function(e,t){if(C._listeners[e]instanceof Array)for(var a=i[e],n=0,r=a.length;n<r;n++)if(a[n]===t){a.splice(n,1);break}},C.handleSessionReset=function(e){var t,a,n,r;e&&e.target&&e.target.hasOwnProperty("plid")&&T===e.target.plid&&e.target.hasOwnProperty("passedFdata")&&e.target.passedFdata.hasOwnProperty("_dataArrObj")&&e.target.passedFdata._dataArrObj&&(0===c(t={plid:e.target.plid,fData:e.target.passedFdata._dataArrObj,content:{},ad:{},err:0}).err&&e.target.passedFdata.hasOwnProperty("_currVidType")&&(a=e.target.passedFdata._currVidType,n=0<Object.keys(t.content).length,r=0<Object.keys(t.ad).length,(n||r)&&("sessionreset"!==e.target.passedFdata.get("nolPriv_prevEventState")&&C.ggPM("57","1","sessionReset","",""),n&&!s.hasOwnProperty("content")&&(s.content={evt:"pauseloadmeta",meta:t.content,plid:e.target.plid}),"ad"===a&&r&&!s.hasOwnProperty("ad")&&(s.ad={evt:"pauseloadmeta",meta:t.ad,plid:e.target.plid})))),C._listeners&&C._listeners.fireEvent&&C._listeners.fireEvent("debug",{type:"debug",msg:"Fired handleSessionReset from ggcmb."})},C.flushPauseEventQueue=function(){if(!(Object.keys(s).length<=0)){if(C.modules.PLDPR){for(var e in s)d("ggPM",{evtInfo:{eventType:s[e].evt,param1:s[e].meta},id:T});s={}}C._listeners&&C._listeners.fireEvent&&C._listeners.fireEvent("debug",{type:"debug",msg:"Fired flushPauseEventQueue from ggcmb."})}},C.cloneObj=function(e){return e&&"object"===(void 0===e?"undefined":_typeof(e))?JSON.parse(JSON.stringify(e)):e},C.ggPM=function(e,t,a,n,r){var i;C.initialized&&(null!=e&&""!==e?((i={}).eventType=e,i.param1=C.cloneObj(t),i.param2=C.cloneObj(a),i.param3=C.cloneObj(n),i.param4=C.cloneObj(r),!C.modules.allModInit||2!=C.modules.PLCMB&&2!=C.modules.PLDPR?o.push(i):(C.emptyQueue(),E._activated&&E.isHybrid()?E.ggPM(e,t,a,n,r):(r=JSON.parse(JSON.stringify(i)),d("ggPM",{evtInfo:i,id:T}),w.trigger(C,r)))):A&&A.GLCFG&&A.GLCFG._listeners&&A.GLCFG._listeners.fireEvent("sendError",{data:{type:17,msg:"Error in ggPM() - Missing event type param in ggPM"},id:T,timeStamp:Date.now()}))},C.trackEvent=function(e,t,a){e&&"object"===(void 0===e?"undefined":_typeof(e))?C.initialized&&C.state&&(e=Array.isArray(n)&&0<n.length?(t||n.push(C.cloneObj(e)),n.splice(0,1)[0]||{}):e)&&(E._activated&&E.isHybrid()?E.trackEvent(e,t,a):(C.state.transition(e,function(e,t,a,n,r){var i={inferred:!0};i.eventType=e,i.param1=C.cloneObj(t),i.param2=C.cloneObj(a),i.param3=C.cloneObj(n),i.param4=C.cloneObj(r);r=JSON.parse(JSON.stringify(i));d("ggPM",{evtInfo:i,id:T}),w.trigger(C,r)}),w.trigger(C,{eventType:"trackEvent",param1:e}))):A&&A.GLCFG&&A.GLCFG._listeners&&A.GLCFG._listeners.fireEvent("sendError",{data:{type:17,msg:"Error in trackEvent() - Missing trackEvent metadata object"},id:T,timeStamp:Date.now()})},C.getConfigParams=function(){return S},C.emptyQueue=function(){if(!(o.length<=0&&n.length<=0)&&C.modules.allModInit&&C.configLoaded&&(C.modules.PLCMB||C.modules.PLDPR)){for(var e=0,t=o.length;e<t;e+=1){var a=JSON.parse(JSON.stringify(o[e]));E._activated&&E.isHybrid()?E.ggPM(a.eventType,a.param1,a.param2,a.param3,a.param4):(d("ggPM",{evtInfo:o[e],id:T}),w.trigger(C,a))}for(o=[];0<n.length;)n[0]&&C.trackEvent(n[0],!0)}},C.getContainer=function(){return b},C.getClientConfig=function(){return A.configs?A.configs[C.apid]:null},C.getBaseDomain=function(e){return e.nol_GLOBALS&&void 0!==e.nol_GLOBALS.enableCookielessDomain&&"true"===e.nol_GLOBALS.enableCookielessDomain.toString().toLowerCase()?".nmrodam.com/":".imrworldwide.com/"},C.ggInitialize=function(e,t,a,n,r,i){if(C.initialized)return U.Promise(function(e,t){e(C)});w.init();var o,s,m="us";if(b=i,S={ggParams:e,uid:a,oldFlashDetect:n,detectBrowser:r,nol_playerId:T},(void 0===e?"undefined":_typeof(e))==_typeof(String())){for(o=A.loadXmlString("<vi>"+e+"</vi>").firstChild.firstChild,s=0,e={};o&&void 0!==o&&s<20;)null!==o.firstChild&&(e[o.nodeName]=o.firstChild.nodeValue),o=o.nextSibling,s++;S.ggParams=e}S.ggParams.nol_sdkDebug=A.controllers.util.queryParam("nol_sdkDebug")||S.ggParams.nol_sdkDebug,C.Initialized(!0),C.apid=S.ggParams.apid;var f=C.getClientConfig(),l=C.getBaseDomain(f);B=(e.nsdkv?e.nsdkv.toString():"")||B,G=(e.nsdkvOverride?e.nsdkvOverride.toString():"")||G,m=e.sfcode||m,q=e.coreaddress?F+"//"+e.coreaddress+"/":Q(l),x=e.sdkconfigver||x,C.nsdkvOverride=S.ggParams.nsdkvOverride,C.sdkv=B,C.sdkvForConfig=C.useCachedConfig&&C.sdkv&&3===C.sdkv.length?"bj."+C.sdkv[0]+"."+C.sdkv[1]+"."+C.sdkv[2]:x,z=A.GLCFG.getPrefProtocol(f)+":"+(e.coreaddress?N+m:"//secure-"+m)+l;var d=S&&S.ggParams,c=d.optout,v=d.nol_sdkDebug,u=d.enableFpid,p=f&&f.nol_GLOBALS,l=p.nol_useroptout,g=p.enableCookielessDomain,d=p.enableFpid,_=p.nol_emmsfcodelist,y=p.nol_tagMap.nol_defaults,h=void 0!==l&&"true"===l.toString().toLowerCase()||void 0!==c&&-1<["true","1","t","y","yes"].indexOf(c.toString().toLowerCase());void 0!==d&&(d=d.toString().toLowerCase(),k.allowCookies="true"===d),void 0!==u&&(u=u.toString().toLowerCase(),-1<["true","1","yes"].indexOf(u)&&(k.allowCookies=!0),-1<["false","0","no"].indexOf(u)&&(k.allowCookies=!1));try{C.optout=h}catch(e){}function P(){C.sessionId=A.GLCFG&&A.GLCFG.generateGUID?A.GLCFG.generateGUID():C.id,k.cookieTTL=y.nol_fpid_ttl,g=void 0!==g&&"true"===g.toString().toLowerCase(),h=h||A.GLCFG.getOptoutCookie(),k.get("nol_fpid")||k.create(y.nol_fpid_ttl,m,_);var e,t=f&&f.nol_GLOBALS,a=t.syncPingFlagList,n=t.nol_appid,r=t.nol_metadataURL,i=void 0!==v&&-1<["debug","info","warn","true"].indexOf(v.toString().toLowerCase()),o=[];if(a&&Array.isArray(a))for(var s=0;s<a.length;s++)f.nol_GLOBALS.hasOwnProperty(a[s])?(e=f.nol_GLOBALS[a[s]],e=A.GLCFG.evalTemplate(e,{nol_prefProtocol:A.GLCFG.getPrefProtocol(f),nol_appid:n}),o.push(e)):L("Info - Sync ping url key "+a[s]+" not present in config.");var l,d,c,u="",p=I.evalPageData(),t=p.pageUrl,p=p.pageTitle;I.pageURL=t,I.pageTitle=p,r&&(I.metadataURL=r);try{l={nol_prefProtocol:A.GLCFG.getPrefProtocol(f),nol_sfcode:m,nol_userSessionId:C.sessionId,nol_appid:f.nol_GLOBALS.nol_appid,nol_sdkDelimiter:f.nol_GLOBALS.nol_sdkDelimiter,nol_sdkv:C.sdkvForConfig,nol_bldv:A.GLCFG.getBaseBuildVer()+j,nol_useroptout:C.optout?"true":""},k.allowCookies&&(k.appendSessParams(l),k.firstCreated||k.update("lastAccessed",Date.now().toString(),y.nol_fpid_ttl)),u=A.GLCFG.evalTemplate(f.nol_GLOBALS.nol_tagMap.nol_defaults.nol_sessionURL.replace("&retry=|![nol_retry]!|",""),l)}catch(e){}return u=u||z+V+(f&&f.nol_GLOBALS&&f.nol_GLOBALS.nol_dfltAppid?f.nol_GLOBALS.nol_dfltAppid:S.ggParams.apid)+"&sessionId="+C.sessionId+"&c16=sdkv,"+C.sdkvForConfig,C.useCachedConfig&&A.getLib("GLCFG")?A.GLCFG&&(A.GLCFG.sfCode=m,A.GLCFG.browser.ready(function(){O(A.getLib("GLCFG")),A.GLCFG.loadChildren(C.sdkv),A.GLCFG.waitForLS(function(){var e;A.GLCFG.lsController.maskedRequestWithRetry(u),g||h||!o.length||A.GLCFG.queryCookie(J,o,i),A.GLCFG.queryCookies(),A.GLCFG.PLDCR&&f.nol_GLOBALS&&(f.nol_GLOBALS.nol_idleTimeout&&(A.GLCFG.PLDCR.nol_idleTimeout=f.nol_GLOBALS.nol_idleTimeout),f.nol_GLOBALS.nol_maxTickDelta&&(A.GLCFG.PLDCR.nol_maxTickDelta=f.nol_GLOBALS.nol_maxTickDelta)),A.GLCFG.PLDPR&&(e=A.GLCFG.PLDPR.initFromConfig(f,C.id,!0),A.PLSIVT&&(C.sivt=new A.PLSIVT(C,e)))})})):(L("Firing ping "+(d={url:u,currRetry:-1,maxRetry:5,retryDelay:1e3}).url),void 0!==d&&(!d||d.hasOwnProperty("url")&&0!==d.url.length)&&d.hasOwnProperty("retryDelay")&&d.hasOwnProperty("currRetry")&&d.hasOwnProperty("maxRetry")&&{requestUrl:function(){try{++d.currRetry>d.maxRetry?(this.logErr("maxRetry reached"),c&&c()):this.sendUrlRequest(d.url)}catch(e){this.logErr("Error in fireToUrl requestUrl: "+e),c&&c()}},sendUrlRequest:function(e){var t=this;try{if(void 0===e)return;var a=new Image;a.onerror=function(e){M.setTimeout(function(){t.requestUrl()},d.retryDelay)},a.onload=function(e){c&&c()},a.src=e+"&retry="+d.currRetry}catch(e){t.logErr("Error in fireToUrl sendUrlRequest: "+e),c&&c()}},logErr:function(e){e&&M.console&&M.console.log&&console.log("Error: ",e)}}.requestUrl(),A.loadLib("GLCFG",q+"novms/js/2/configs/"+R,A,O)),U.Promise(D)}A.GLCFG.initLS(q),C.state=A.PLSTM?new A.PLSTM.stateMachine(C.id,f):null,E.isHybrid()?E.ggInitialize(e,t,a,n,r,i,P):P()},C.isViewable=function(){return!1},A.browserSafeAddEventListener({element:M,eventType:"beforeunload",useCapture:!1,func:function(e){C&&C.staticPage&&(C.staticPage,C.staticPage.hasOwnProperty("evtParams")&&C.ggPM("56",C.staticPage.evtParams.param1,C.staticPage.evtParams.param2,C.staticPage.evtParams.param3,C.staticPage.evtParams.param4))}}),A.GLCFG.flushEvent=f,A.GLCFG.browser.addEventListener({element:M,eventType:"blur",useCapture:!1,func:f}),A.GLCFG.browser.addEventListener({element:M.document,eventType:A.GLCFG.browser.visibilityEvent,useCapture:!1,func:f}),A.GLCFG.browser.addEventListener({element:M,eventType:"pagehide",useCapture:!1,func:f}),C}}(Fe.NOLBUNDLE=Fe.NOLBUNDLE||{},Fe),Fe.NOLBUNDLE.registerLib("GLCFG",function(e){var n,t,E=e.GLCFG&&e.GLCFG.getBaseBuildVer?e.GLCFG:{},s=0,a=0,r=(f=Fe.NOLBUNDLE).getAddress(),i=f.getVersion();E.sfCode=E.sfCode||"",E.optoutCookie=E.optoutCookie||"",E.gotOptoutCookie=E.gotOptoutCookie||!1;var o={PLDPR:{path:r+"novms/js/2/pldpr"+(v={600:{PLVBL:600,PLSIVT:600,PLSTM:600,PLDPR:600,PLDCR:600,PLLOG:600,CONFIG:300,BASEVER:"6.0.0",LSID:!0},"600_rc":{PLVBL:600,PLSIVT:600,PLSTM:600,PLDPR:600,PLDCR:600,PLLOG:600,CONFIG:300,BASEVER:"6.0.0.rc",LSID:!0},601:{PLVBL:600,PLSIVT:600,PLSTM:600,PLDPR:600,PLDCR:600,PLCMB:600,PLLOG:600,CONFIG:300,BASEVER:"6.0.1",LSID:!0},"601_rc":{PLVBL:600,PLSIVT:600,PLSTM:600,PLDPR:600,PLDCR:600,PLCMB:600,PLLOG:600,CONFIG:300,BASEVER:"6.0.1.rc",LSID:!0},501:{PLVBL:600,PLSIVT:600,PLSTM:600,PLDPR:600,PLDCR:600,PLCMB:600,PLLOG:600,CONFIG:300,BASEVER:"6.1.0",LSID:!1,FORCEFOCUS:!0,CADENCEOVERRIDE:30},615:{PLVBL:600,PLSIVT:600,PLSTM:600,PLDPR:600,PLDCR:600,PLLOG:600,CONFIG:300,BASEVER:"6.1.5",LSID:!1,FORCEFOCUS:!0,CADENCEOVERRIDE:30}})[i].PLDPR+".js",status:0},PLDCR:{path:r+"novms/js/2/pldcr"+v[i].PLDCR+".js",status:0},PLVBL:{path:r+"novms/js/2/plvbl"+v[i].PLVBL+".js",status:0},PLSIVT:{path:r+"novms/js/2/plsivt"+v[i].PLSIVT+".js",status:0},PLCMB:{path:r+"novms/js/2/plcmb"+v[i].PLCMB+".js",status:0},PLLOG:{path:r+"novms/js/2/pllog"+v[i].PLLOG+".js",status:0},PLSTM:{path:r+"novms/js/2/plstm"+v[i].PLSTM+".js",status:0}};E.gIframe=E.gIframe||E.getLS?E.getLS():null,E.gIframeReady=E.gIframeReady||!1,E.thirdPartyData=E.thirdPartyData||{cookiesEnabled:!0,localStorageEnabled:!0},E.postMsgAvail=E.postMsgAvail||"function"==typeof Fe.postMessage,E.availModules=E.availModules||{},E._players=E._players||{},E.id=E.id||"0",E.childGlobal=E.childGlobal||!!Fe&&Fe.top!==Fe.self,E.parentFound=E.parentFound||!1,E.loadChildren=function(e){var t,a=h(e||i);for(t in o)o.hasOwnProperty(t)&&a.hasOwnProperty(t)&&!E[t]&&function(e,t){var a;e&&t&&(a=t.path,Fe.NOLBUNDLE.loadLib(e,a,E,function(){t.status=1}))}(t,o[t])};var l,d,c,u,p,m,E=E||(e.GLCFG&&e.GLCFG.getBaseBuildVer?e.GLCFG:{}),f=f||Fe.NOLBUNDLE,v=v||{},i=i||f.getVersion(),g="nol_lsid",_="OPT_OUT",y="nol_emmURL";function h(e){return v[e]||v[i]||{}}function P(e){return void 0!==E.gIframe&&E.postMsgAvail&&(void 0===e?void E.lsController.store.get(g):void E.lsController.store.set(g,e))}function S(){for(var e=0;e<E.onLSReady.length;e++)E.onLSReady[e]();E.onLSReady=[]}function b(e){if(void 0!==E.gIframe&&E.postMsgAvail)return void 0===e?void E.lsController.store.get(y):void E.lsController.store.set(y,e)}function T(e){if(e){for(var t in E.availModules)E.availModules.hasOwnProperty(t)&&1==e.init&&(e.modules[t]||(e[t]=new E.availModules[t].init(e),e.modules[t]=1));var a=e.getConfigParams().nol_playerId;E._players[a]=e,E._listeners.addListener("tick",function(){!function(e){try{if(!e.modules.allModInit){var t=!0,a=h(e.sdkv);for(n in o)if(o.hasOwnProperty(n)&&a.hasOwnProperty(n)&&!E[n]&&"PLLOG"!==n&&2!==e.modules[n]){t=!1;break}t&&(e.modules.allModInit=!0,E._listeners.fireEvent("flushQueue"))}}catch(e){}}(E._players[a])})}}if(E.EMMURL=E.EMMURL||"",E.gotCookies=E.gotCookies||!1,E.gotEMMURL=E.gotEMMURL||!1,E.onLSReady=E.onLSReady||[],E.localStorageId=E.localStorageId||"-1",E.gotLSID=E.gotLSID||!1,E.queryCookie=function(e){E.gIframe.contentWindow.postMessage(JSON.stringify({nolSentFromBsdk:!0,key:e,eventType:"get",storageType:"cookie",data:1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],debug:2<arguments.length&&void 0!==arguments[2]&&arguments[2]}),E.gIframe.src)},E.initLS=function(e,t,a,n){try{a=a||1,E.gIframe||(E.gIframe=Fe.document.createElement("iframe"),E.gIframe.src=e+"novms/html/ls.html",E.gIframe.height=0,E.gIframe.width=0,E.gIframe.style.display="none",E.gIframe.id="lsframe",E.gIframe.onload=function(){P(),E.getEmmUrl(),E.queryCookie(_),E.queryCookies(),E.gIframeReady=!0,E.thirdPartyData.cookiesEnabled=navigator.cookieEnabled,n&&n(),E.browser.localStorageSupported()||(E.thirdPartyData.localStorageEnabled=!1,S())},Fe&&Fe.document&&Fe.document.body?Fe.document.body.appendChild(E.gIframe):a<=15&&setTimeout(function(){E._listeners.fireEvent("debug",{type:"debug",msg:"document.body not ready - delaying to add ls.html"}),E.initLS(e,t,a++,n)},a<=1?0:300))}catch(e){Fe.console&&Fe.console.error&&Fe.console.error("Unable to register ls.html - "+e.message)}},E.getEmmUrl=function(){return b()},E.setEmmUrl=function(e){e&&(E.EMMURL=e,b(E.EMMURL))},E.queryCookies=function(){E.gIframe.contentWindow.postMessage(JSON.stringify({nolSentFromBsdk:!0,key:"cookieall",eventType:"get",storageType:"cookie"}),E.gIframe.src)},E.getOptoutCookie=function(){return E.optoutCookie},E.isOptout=function(){return E.optoutCookie&&"true"===E.optoutCookie.toLowerCase()||"OPTOUT"===E.localStorageId},E.cookie=E.cookie||(l={cookie:""},{cache:(d={setCache:function(e){l.cookie=e},getCookies:function(){if(l.cookie)try{var e=l.cookie.split(";"),t=null,a={};return e.forEach(function(e){t=e.trim().split("="),a[t[0].trim()]=t[1].trim()}),a}catch(e){}return{}},get:function(e){return e?d.getCookies()[e]:""}}).setCache,get:d.get,all:d.getCookies}),E.getIfLsidShouldSend=function(){var e=h(i);if(e.hasOwnProperty("LSID"))return e.LSID},E.lsReady=function(){return E.gIframeReady},E.getLS=function(){return E.gIframe},E.getLsId=function(){return"string"!=typeof E.localStorageId?E.localStorageId.toString():E.localStorageId},E.setLsId=function(e,t,a,n){var r,i;a&&(r=a.sessionId,i=a.fpSession);n=-1<(n=n&&Array.isArray(n)?n.concat(["secure-eu","eu","eu-uat","eu-cert"]):["secure-eu","eu","eu-uat","eu-cert"]).indexOf(E.sfCode.toLowerCase());null!=e&&e!==E.getLsId()&&(E.localStorageId=e,P(E.localStorageId)),t&&(E.postMsgAvail&&n&&(E.userAgent.isAndroid()&&E.userAgent.androidVersion().major<6?(e="",E.userAgent.isChrome()?(E.lsController.request(e="intent://nuid/"+r+"/#Intent;action=android.intent.action.VIEW;scheme=nielsenwebid;component=com.nielsen.odm/.NielsenMobileMeter;end"),E._listeners.fireEvent("info",{type:"info",msg:"Firing EMM intent "+e})):(E.lsController.request(e="nielsenwebid://nuid/"+r),E._listeners.fireEvent("info",{type:"info",msg:"Firing EMM deep link "+e})),E.setEmmUrl(e)):(E.lsController.maskedRequest(t),E._listeners.fireEvent("info",{type:"info",msg:"Firing EMM link "+t}),E.setEmmUrl(t)),i&&!i.firstCreated&&i.update("lastEMMPing",Date.now().toString(),i.cookieTTL)),n||""===i.get("nol_fpid").split("|")[3]||i.update("lastEMMPing","",i.cookieTTL))},E.waitForLS=function(e){E.thirdPartyData.localStorageEnabled?e&&(E.gIframeReady&&"-1"!==E.localStorageId?e():E.onLSReady.push(e)):e&&e()},E.lsController={store:{get:function(e){E.gIframe.contentWindow.postMessage(JSON.stringify({nolSentFromBsdk:!0,key:e,eventType:"get",storageType:"local"}),0===Fe.location.protocol.indexOf("http")?E.gIframe.src:"*")},set:function(e,t){E.gIframe.contentWindow.postMessage(JSON.stringify({nolSentFromBsdk:!0,key:e,eventType:"set",storageType:"local",data:t}),0===Fe.location.protocol.indexOf("http")?E.gIframe.src:"*")}},request:function(e){E.gIframe.contentWindow.postMessage(JSON.stringify({nolSentFromBsdk:!0,eventType:"reqUsingFrame",data:{url:e}}),0===Fe.location.protocol.indexOf("http")?E.gIframe.src:"*")},maskedRequest:function(e){E.gIframe.contentWindow.postMessage(JSON.stringify({nolSentFromBsdk:!0,eventType:"maskref",data:{url:e}}),0===Fe.location.protocol.indexOf("http")?E.gIframe.src:"*")},maskedRequestWithRetry:function(e){E.gIframe.contentWindow.postMessage(JSON.stringify({nolSentFromBsdk:!0,eventType:"maskrefretry",data:{url:e}}),0===Fe.location.protocol.indexOf("http")?E.gIframe.src:"*")}},(E=E||(e.GLCFG&&e.GLCFG.getBaseBuildVer?e.GLCFG:{})).checkUserAgent=function(e){var t=Fe?Fe.navigator.userAgent.toLowerCase():null;return t=void 0!==e&&0<e.length?-1!==t.search(e):t},E.userAgent=function(e){var t=null,a="";try{t=e&&e.navigator?e.navigator.userAgent:null,a=t?t.toLowerCase():""}catch(e){}return{get:function(){return t},isInstagram:function(){return-1!==a.search(/(?=.*instagram).*/)},isFB:function(){return-1!==a.search(/(?=.*\[fb).*/)},isChrome:function(){return-1!==a.search(/(?=.*chrome).*/)||-1!==a.search(/(?=.*crios).*/)},isMac:function(){return-1!==a.search(/(?=.*macintosh).*/)},isIOS:function(){return-1!==a.search(/(?=.*iphone).*/)||-1!==a.search(/(?=.*ipad).*/)},isIpad:function(){return/iPad/.test(navigator.userAgent)||"iPad"===navigator.platform||"MacIntel"===navigator.platform&&void 0!==Fe.DeviceMotionEvent&&void 0!==document.webkitFullscreenElement&&void 0!==navigator.maxTouchPoints&&1<navigator.maxTouchPoints},isIpadOS:function(){return E.userAgent.isIpad()&&!1===/iPad/.test(navigator.userAgent)},iosVersion:function(){var e=new RegExp(/os\s([0-9_]*?)\s/gi).exec(a),t=e&&1<e.length?e[1].split("_"):[];return{version:e&&0<e.length?e[1].replace(/_/gi,"."):"",major:t&&0<t.length?parseInt(t[0]):0,minor:t&&1<t.length?parseInt(t[1]):0,patch:t&&2<t.length?parseInt(t[2]):0}},isAndroid:function(){return-1!==a.search(/(?=.*android).*/)},androidVersion:function(){var e=new RegExp(/android (.*?);/gi).exec(a),t=e&&1<e.length?e[1].split("."):[];return{version:e&&0<e.length?e[1]:"",major:t&&0<t.length?parseInt(t[0]):0,minor:t&&1<t.length?parseInt(t[1]):0,patch:t&&2<t.length?parseInt(t[2]):0}}}}(Fe),E.browser=function(){var a={ready:!1},e=["webkit","moz","ms","o"],t="hidden",n="visibilitychange",r="visibilityState";function i(e){void 0!==e.element&&(e.element.addEventListener?e.element.addEventListener(e.eventType,e.func,e.useCapture):e.element.attachEvent&&e.element.attachEvent("on"+e.eventType,e.func))}function o(e){null!=e&&null!=e.element&&null!=e.element&&(e.element.removeEventListener?e.element.removeEventListener(e.eventType,e.func,e.useCapture):e.element.detachEvent&&e.element.detachEvent("on"+e.eventType,e.func))}if(void 0===document[t])for(var s=0;s<e.length;s++)if(e[s]+"Hidden"in document){t=e[s]+"Hidden",n=e[s]+"visibilitychange",r=e[s]+"visibilityState";break}return{addEventListener:i,removeEventListener:o,ready:function(e){function t(){o({element:document,eventType:"DOMContentLoaded",func:t}),o({element:Fe,eventType:"load",func:t}),a.ready=!0,e&&e()}a.ready?e&&e():"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?Fe.setTimeout(t):(i({element:document,eventType:"DOMContentLoaded",func:t}),i({element:Fe,eventType:"load",func:t}))},localStorageSupported:function(){try{if(null!=Fe.localStorage)return!0}catch(e){return!1}return!1},hidden:function(){return document[t]||"hidden"===document[r]},isWithinIFrame:function(){try{return Fe.self!=Fe.top}catch(e){return!0}},isWithinFriendlyIFrame:function(){try{return!!Fe.top.document}catch(e){return!1}},visibilityEvent:n}}(),E.getBaseBuildVer=function(){var e=h(i);if(e.hasOwnProperty("BASEVER"))return e.BASEVER+"."},E.getConfigVer=function(){var e=h(i);if(e.hasOwnProperty("CONFIG"))return e.CONFIG},E.globalHasFocus=function(){var t=h(f.getVersionOverride());if(t&&t.hasOwnProperty("FORCEFOCUS")&&(!Fe.document||void 0===Fe.document.visibilityState||"visible"===Fe.document.visibilityState))return t.FORCEFOCUS;if(Fe.top!=Fe.self)return!1;t=!1;try{t=Fe.top.document.hasFocus()}catch(e){t=!0}return t},E.getSdkvGlobal=function(e,t){if(e&&t){e=h(e);return!(!e||!e.hasOwnProperty(t))&&e[t]}},E.isValidJson=function(e){var t;try{t=JSON.parse(e)}catch(e){return!1}return"Object"==typeof t},E.getPrefProtocol=function(e){try{return E.userAgent.isIOS()&&9<=E.userAgent.iosVersion().major||0===Fe.location.protocol.indexOf("https")?"https":e.nol_GLOBALS.hasOwnProperty("nol_prefProtocol")&&-1!==["http","https"].indexOf(e.nol_GLOBALS.nol_prefProtocol)?e.nol_GLOBALS.nol_prefProtocol:e.nol_GLOBALS.nol_tagMap&&e.nol_GLOBALS.nol_tagMap.nol_defaults&&e.nol_GLOBALS.nol_tagMap.nol_defaults.nol_prefProtocol&&-1!==["http","https"].indexOf(e.nol_GLOBALS.nol_tagMap.nol_defaults.nol_prefProtocol)?e.nol_GLOBALS.nol_tagMap.nol_defaults.nol_prefProtocol:"https"}catch(e){return"https"}},E.generateGUID=function(){for(var e="",t=0;t<29;t++)e+="0123456789abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz".charAt(function(){for(var e;61<(e=Math.floor(992*Math.random())););return e}());return e+Math.floor((new Date).getTime()/1e3)},E.evalTemplate=function(e,t){if(e&&t){var a=e.match(/\|\![\w\W]*?(\!\|)/g),n="";if(a)for(var r=0;r<a.length;r++)(n=a[r].match(/\w+/gi))&&0<n.length&&"nol_imrid"!==n[0].toLowerCase()&&(e=e.replace(a[r],t[n[0]]||""))}return e},E.bindPlayers=function(e,t){if(t)for(var a in E.availModules[t]=e,E._players)E._players.hasOwnProperty(a)&&1==E._players[a].init&&(E._players[a].modules[t]||(E._players[a][t]=new e.init(E._players[a]),E._players[a].modules[t]=2))},E.enablePlayer=function(e,t){e&&t&&(E._players[e].modules[t]=2)},E.registerListener=function(t,e){e&&(e.addListener(t,function(e){E._listeners.fireEvent(t,e)}),e.init||(e.init=1,T(e)))},E.updateReceiver=function(e){(e=e)&&E._listeners.fireEvent(e.eventTrigger,e)},E._listeners=E._listeners||new function e(){if(!(this instanceof e))return new e;E._listeners={},this.addListener=function(e,t,a,n){a=a||!1,void 0===E._listeners[e]&&(E._listeners[e]=[]),E._listeners[e].push({cb:t,remove:a,player:n,single:!1})},this.addListenerSingle=function(e,t,a,n){var r,a=a||!1;void 0===E._listeners[e]&&(E._listeners[e]=[]);for(var i=!1,o=0,s=(r=E._listeners[e]).length;o<s;o++)if(r[o].single){i=!0;break}i||E._listeners[e].push({cb:t,remove:a,player:n,single:!0})},this.fireEvent=function(e,t){if(e){var a,n,r;if((e="string"==typeof e?{type:e}:e).target||(e.target=t),!e.type)throw new Error("Event object missing 'type' property.");if(E._listeners[e.type]instanceof Array){for(n=0,r=(a=E._listeners[e.type]).length;n<r;n++)a[n]&&a[n].cb.call(this,e);for(n=0;n<a.length;n++)a[n]&&a[n].remove&&(!e.target||!a[n].player||e.target&&a[n].player&&(e.target.nol_playerId===a[n].player.id||e.target.id===a[n].player.id))&&(a.splice(n,1),n--)}}},this.removeListener=function(e,t){var a,n,r;if(E._listeners[e]instanceof Array)for(n=0,r=(a=E._listeners[e]).length;n<r;n++)if(a[n]&&a[n].cb===t){a[n].remove=!0;break}}},E.configController={_keys:{cmsKey:"nol_clientCMSmap",cmsMapRegex:/[\[\{<\(\}\]>\)]/g},getGlobal:function(e,t){return e&&t&&t.nol_GLOBALS&&t.nol_GLOBALS[e]||""},cmsMap:function(e,t){t=this.getGlobal(this._keys.cmsKey,t);return t&&t[e]?t[e].replace(this._keys.cmsMapRegex,"").toString():""}},E.scriptController={inject:function(e,t,a,n){if(e){var r=document.createElement("script");r.setAttribute("type","text/javascript"),r.async=!0,r.onload=a,r.onerror=n,r.src=e;e=null;if("script"===(t=t||"")){if((e=document.getElementsByTagName("script"))&&0<e.length)return void e[0].parentNode.insertBefore(r,e[0])}else if("head"===t){if((e=document.getElementsByTagName("header"))&&0<e.length)return void e[0].appendChild(r)}else if(t&&"string"==typeof t){if((t=document.getElementById(t))&&"function"==typeof t.insertBefore)return void t.parentNode.insertBefore(r,t)}else if(t&&"object"===(void 0===t?"undefined":_typeof(t))&&t.appendChild&&"function"==typeof t.appendChild)return void t.appendChild(r);document.body.appendChild(r)}}},!E.built){try{f.browserSafeAddEventListener({element:Fe,eventType:"message",func:function(e){var t,a;if(e.data&&"nolInit"==e.data&&Fe.self===Fe.top)for(a=(t=Fe.document.getElementsByTagName("iframe")).length-1;0<=a;a--)t[a].contentWindow==e.source&&E.postMsgAvail&&e.source.postMessage({nolSentFromBsdk:!0,key:"nolChildReg",parentID:E.id},0===Fe.location.protocol.indexOf("http")?e.origin:"*");else e.data&&e.data.key&&"nolChildReg"==e.data.key&&(E.parentFound=!0,Fe.clearInterval(s));if(e.origin&&-1<e.origin.indexOf("imrworldwide.com")&&e.data||e.data&&e.data.nolSentFromLs){var n=""!==e.data.val&&E.isValidJson(e.data.val)?JSON.parse(e.data.val):e.data.val,r=""!==e.data.key&&E.isValidJson(e.data.key)?JSON.parse(e.data.key):e.data.key;if(e.data&&"lsget"===e.data.type)switch(r){case g:var i="OPTOUT"===String(n).toUpperCase();E.setLsId(n),E.gotLSID=!0,E._listeners.fireEvent("sendOptOutStatus",i);break;case y:E.EMMURL=n,E.gotEMMURL=!0}else if(e.data&&"lsbroadcast"===e.data.type){var o=String(e.data.newValue).toUpperCase().replace(/"/gi,"");switch(r){case g:o&&"-1"!==o||P(o=E.generateGUID()),E.localStorageId=o,E._listeners.fireEvent("sendOptOutStatus","OPTOUT"===o);break;case y:E.EMMURL=n}}else if(e.data&&"cookieget"===e.data.type)switch(r){case _:E.optoutCookie=n,E.gotOptoutCookie=!0;break;case"cookieall":E.cookie.cache(n),E.gotCookies=!0,E._listeners.fireEvent("debug",{type:"debug",msg:"Got cookie value ='"+n+"'"})}else if(e.data&&"lsdisabled"===e.data.type&&1==e.data.val)switch(E.thirdPartyData.localStorageEnabled=!1,e.data.key){case g:E.gotLSID=!0;break;case y:E.gotEMMURL=!0}else e.data&&"cookiedisabled"===e.data.type&&1==e.data.val&&(E.thirdPartyData.cookiesEnabled=!1,e.data.key===_&&(E.gotOptoutCookie=!0,E.gotCookies=!0));E.gotLSID&&E.gotEMMURL&&E.gotOptoutCookie&&E.gotCookies&&S()}},useCapture:!1}),void 0===u&&(u=Fe.setInterval(function(e){E._listeners.fireEvent("tick",e)},1e3)),E.childGlobal&&(s=Fe.setInterval(function(){void 0!==Fe.document.referrer&&0<Fe.document.referrer.length&&E.postMsgAvail&&Fe.parent.postMessage("nolInit",0===Fe.location.protocol.indexOf("http")?Fe.document.referrer:"*"),30<a?Fe.clearInterval(s):a+=1},500))}catch(e){}E.CryptoJS=E.CryptoJS||function(s){function a(){}var e={},t=e.lib={},n=t.Base={extend:function(e){a.prototype=this;var t=new a;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=t.WordArray=n.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||i).stringify(this)},concat:function(e){var t=this.words,a=e.words,n=this.sigBytes;if(e=e.sigBytes,this.clamp(),n%4)for(var r=0;r<e;r++)t[n+r>>>2]|=(a[r>>>2]>>>24-r%4*8&255)<<24-(n+r)%4*8;else if(65535<a.length)for(r=0;r<e;r+=4)t[n+r>>>2]=a[r>>>2];else t.push.apply(t,a);return this.sigBytes+=e,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=s.ceil(t/4)},clone:function(){var e=n.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],a=0;a<e;a+=4)t.push(4294967296*s.random()|0);return new l.init(t,e)}}),r=e.enc={},i=r.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var a=[],n=0;n<e;n++){var r=t[n>>>2]>>>24-n%4*8&255;a.push((r>>>4).toString(16)),a.push((15&r).toString(16))}return a.join("")},parse:function(e){for(var t=e.length,a=[],n=0;n<t;n+=2)a[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new l.init(a,t/2)}},o=r.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var a=[],n=0;n<e;n++)a.push(String.fromCharCode(t[n>>>2]>>>24-n%4*8&255));return a.join("")},parse:function(e){for(var t=e.length,a=[],n=0;n<t;n++)a[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new l.init(a,t)}},d=r.Utf8={stringify:function(e){try{return decodeURIComponent(escape(o.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return o.parse(unescape(encodeURIComponent(e)))}},c=t.BufferedBlockAlgorithm=n.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,a=t.words,n=t.sigBytes,r=this.blockSize,i=n/(4*r);if(e=(i=e?s.ceil(i):s.max((0|i)-this._minBufferSize,0))*r,n=s.min(4*e,n),e){for(var o=0;o<e;o+=r)this._doProcessBlock(a,o);o=a.splice(0,e),t.sigBytes-=n}return new l.init(o,n)},clone:function(){var e=n.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});t.Hasher=c.extend({cfg:n.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){c.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(a){return function(e,t){return new a.init(t).finalize(e)}},_createHmacHelper:function(a){return function(e,t){return new u.HMAC.init(a,t).finalize(e)}}});var u=e.algo={};return e}(Math),r=E.CryptoJS,c=r.lib.WordArray,r.enc.Base64={stringify:function(e){var t=e.words,a=e.sigBytes,n=this._map;e.clamp(),e=[];for(var r=0;r<a;r+=3)for(var i=(t[r>>>2]>>>24-r%4*8&255)<<16|(t[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|t[r+2>>>2]>>>24-(r+2)%4*8&255,o=0;o<4&&r+.75*o<a;o++)e.push(n.charAt(i>>>6*(3-o)&63));if(t=n.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var t=e.length,a=this._map;(i=a.charAt(64))&&-1!=(i=e.indexOf(i))&&(t=i);for(var n,r,i=[],o=0,s=0;s<t;s++)s%4&&(n=a.indexOf(e.charAt(s-1))<<s%4*2,r=a.indexOf(e.charAt(s))>>>6-s%4*2,i[o>>>2]|=(n|r)<<24-o%4*8,o++);return c.create(i,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(i){function T(e,t,a,n,r,i,o){return((e=e+(t&a|~t&n)+r+o)<<i|e>>>32-i)+t}function C(e,t,a,n,r,i,o){return((e=e+(t&n|a&~n)+r+o)<<i|e>>>32-i)+t}function O(e,t,a,n,r,i,o){return((e=e+(t^a^n)+r+o)<<i|e>>>32-i)+t}function L(e,t,a,n,r,i,o){return((e=e+(a^(t|~n))+r+o)<<i|e>>>32-i)+t}for(var e=E.CryptoJS,t=(n=e.lib).WordArray,a=n.Hasher,n=e.algo,w=[],r=0;r<64;r++)w[r]=4294967296*i.abs(i.sin(r+1))|0;n=n.MD5=a.extend({_doReset:function(){this._hash=new t.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var a=0;a<16;a++){var n=e[r=t+a];e[r]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}var a=this._hash.words,r=e[t+0],n=e[t+1],i=e[t+2],o=e[t+3],s=e[t+4],l=e[t+5],d=e[t+6],c=e[t+7],u=e[t+8],p=e[t+9],m=e[t+10],f=e[t+11],v=e[t+12],g=e[t+13],_=e[t+14],y=e[t+15],h=T(a[0],b=a[1],S=a[2],P=a[3],r,7,w[0]),P=T(P,h,b,S,n,12,w[1]),S=T(S,P,h,b,i,17,w[2]),b=T(b,S,P,h,o,22,w[3]),h=T(h,b,S,P,s,7,w[4]),P=T(P,h,b,S,l,12,w[5]),S=T(S,P,h,b,d,17,w[6]),b=T(b,S,P,h,c,22,w[7]),h=T(h,b,S,P,u,7,w[8]),P=T(P,h,b,S,p,12,w[9]),S=T(S,P,h,b,m,17,w[10]),b=T(b,S,P,h,f,22,w[11]),h=T(h,b,S,P,v,7,w[12]),P=T(P,h,b,S,g,12,w[13]),S=T(S,P,h,b,_,17,w[14]),h=C(h,b=T(b,S,P,h,y,22,w[15]),S,P,n,5,w[16]),P=C(P,h,b,S,d,9,w[17]),S=C(S,P,h,b,f,14,w[18]),b=C(b,S,P,h,r,20,w[19]),h=C(h,b,S,P,l,5,w[20]),P=C(P,h,b,S,m,9,w[21]),S=C(S,P,h,b,y,14,w[22]),b=C(b,S,P,h,s,20,w[23]),h=C(h,b,S,P,p,5,w[24]),P=C(P,h,b,S,_,9,w[25]),S=C(S,P,h,b,o,14,w[26]),b=C(b,S,P,h,u,20,w[27]),h=C(h,b,S,P,g,5,w[28]),P=C(P,h,b,S,i,9,w[29]),S=C(S,P,h,b,c,14,w[30]),h=O(h,b=C(b,S,P,h,v,20,w[31]),S,P,l,4,w[32]),P=O(P,h,b,S,u,11,w[33]),S=O(S,P,h,b,f,16,w[34]),b=O(b,S,P,h,_,23,w[35]),h=O(h,b,S,P,n,4,w[36]),P=O(P,h,b,S,s,11,w[37]),S=O(S,P,h,b,c,16,w[38]),b=O(b,S,P,h,m,23,w[39]),h=O(h,b,S,P,g,4,w[40]),P=O(P,h,b,S,r,11,w[41]),S=O(S,P,h,b,o,16,w[42]),b=O(b,S,P,h,d,23,w[43]),h=O(h,b,S,P,p,4,w[44]),P=O(P,h,b,S,v,11,w[45]),S=O(S,P,h,b,y,16,w[46]),h=L(h,b=O(b,S,P,h,i,23,w[47]),S,P,r,6,w[48]),P=L(P,h,b,S,c,10,w[49]),S=L(S,P,h,b,_,15,w[50]),b=L(b,S,P,h,l,21,w[51]),h=L(h,b,S,P,v,6,w[52]),P=L(P,h,b,S,o,10,w[53]),S=L(S,P,h,b,m,15,w[54]),b=L(b,S,P,h,n,21,w[55]),h=L(h,b,S,P,u,6,w[56]),P=L(P,h,b,S,y,10,w[57]),S=L(S,P,h,b,d,15,w[58]),b=L(b,S,P,h,g,21,w[59]),h=L(h,b,S,P,s,6,w[60]),P=L(P,h,b,S,f,10,w[61]),S=L(S,P,h,b,i,15,w[62]),b=L(b,S,P,h,p,21,w[63]);a[0]=a[0]+h|0,a[1]=a[1]+b|0,a[2]=a[2]+S|0,a[3]=a[3]+P|0},_doFinalize:function(){var e=this._data,t=e.words,a=8*this._nDataBytes,n=8*e.sigBytes;t[n>>>5]|=128<<24-n%32;var r=i.floor(a/4294967296);for(t[15+(64+n>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t[14+(64+n>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),e.sigBytes=4*(t.length+1),this._process(),t=(e=this._hash).words,a=0;a<4;a++)n=t[a],t[a]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8);return e},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}}),e.MD5=a._createHelper(n),e.HmacMD5=a._createHmacHelper(n)}(Math),e=E.CryptoJS,r=(u=e.lib).Base,p=u.WordArray,m=(u=e.algo).EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:u.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var a=(o=this.cfg).hasher.create(),n=p.create(),r=n.words,i=o.keySize,o=o.iterations;r.length<i;){s&&a.update(s);var s=a.update(e).finalize(t);a.reset();for(var l=1;l<o;l++)s=a.finalize(s),a.reset();n.concat(s)}return n.sigBytes=4*i,n}}),e.EvpKDF=function(e,t,a){return m.create(a).compute(e,t)},E.CryptoJS.lib.Cipher||function(){var e=(p=E.CryptoJS).lib,t=e.Base,o=e.WordArray,a=e.BufferedBlockAlgorithm,n=p.enc.Base64,r=p.algo.EvpKDF,i=e.Cipher=a.extend({cfg:t.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,a){this.cfg=this.cfg.extend(a),this._xformMode=e,this._key=t,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(n){return{encrypt:function(e,t,a){return("string"==typeof t?m:u).encrypt(n,e,t,a)},decrypt:function(e,t,a){return("string"==typeof t?m:u).decrypt(n,e,t,a)}}}});e.StreamCipher=i.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});function s(e,t,a){var n=this._iv;n?this._iv=void 0:n=this._prevBlock;for(var r=0;r<a;r++)e[t+r]^=n[r]}var l=p.mode={},d=(e.BlockCipherMode=t.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();d.Encryptor=d.extend({processBlock:function(e,t){var a=this._cipher,n=a.blockSize;s.call(this,e,t,n),a.encryptBlock(e,t),this._prevBlock=e.slice(t,t+n)}}),d.Decryptor=d.extend({processBlock:function(e,t){var a=this._cipher,n=a.blockSize,r=e.slice(t,t+n);a.decryptBlock(e,t),s.call(this,e,t,n),this._prevBlock=r}}),l=l.CBC=d,d=(p.pad={}).Pkcs7={pad:function(e,t){for(var a,n=(a=(a=4*t)-e.sigBytes%a)<<24|a<<16|a<<8|a,r=[],i=0;i<a;i+=4)r.push(n);a=o.create(r,a),e.concat(a)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},e.BlockCipher=i.extend({cfg:i.cfg.extend({mode:l,padding:d}),reset:function(){i.reset.call(this);var e,t=(a=this.cfg).iv,a=a.mode;this._xformMode==this._ENC_XFORM_MODE?e=a.createEncryptor:(e=a.createDecryptor,this._minBufferSize=1),this._mode=e.call(a,this,t&&t.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4});var c=e.CipherParams=t.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),l=(p.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return((e=e.salt)?o.create([1398893684,1701076831]).concat(e).concat(t):t).toString(n)},parse:function(e){var t,a=(e=n.parse(e)).words;return 1398893684==a[0]&&1701076831==a[1]&&(t=o.create(a.slice(2,4)),a.splice(0,4),e.sigBytes-=16),c.create({ciphertext:e,salt:t})}},u=e.SerializableCipher=t.extend({cfg:t.extend({format:l}),encrypt:function(e,t,a,n){n=this.cfg.extend(n);var r=e.createEncryptor(a,n);return t=r.finalize(t),r=r.cfg,c.create({ciphertext:t,key:a,iv:r.iv,algorithm:e,mode:r.mode,padding:r.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,a,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(a,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),p=(p.kdf={}).OpenSSL={execute:function(e,t,a,n){return n=n||o.random(8),e=r.create({keySize:t+a}).compute(e,n),a=o.create(e.words.slice(t),4*a),e.sigBytes=4*t,c.create({key:e,iv:a,salt:n})}},m=e.PasswordBasedCipher=u.extend({cfg:u.cfg.extend({kdf:p}),encrypt:function(e,t,a,n){return a=(n=this.cfg.extend(n)).kdf.execute(a,e.keySize,e.ivSize),n.iv=a.iv,(e=u.encrypt.call(this,e,t,a.key,n)).mixIn(a),e},decrypt:function(e,t,a,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),a=n.kdf.execute(a,e.keySize,e.ivSize,t.salt),n.iv=a.iv,u.decrypt.call(this,e,t,a.key,n)}})}(),function(){for(var e=E.CryptoJS,t=e.lib.BlockCipher,a=e.algo,o=[],n=[],r=[],i=[],s=[],l=[],d=[],c=[],u=[],p=[],m=[],f=0;f<256;f++)m[f]=f<128?f<<1:f<<1^283;for(var v=0,g=0,f=0;f<256;f++){var _=(_=g^g<<1^g<<2^g<<3^g<<4)>>>8^255&_^99;o[v]=_;var y=m[n[_]=v],h=m[y],P=m[h],S=257*m[_]^16843008*_;r[v]=S<<24|S>>>8,i[v]=S<<16|S>>>16,s[v]=S<<8|S>>>24,l[v]=S,d[_]=(S=16843009*P^65537*h^257*y^16843008*v)<<24|S>>>8,c[_]=S<<16|S>>>16,u[_]=S<<8|S>>>24,p[_]=S,v?(v=y^m[m[m[P^y]]],g^=m[m[g]]):v=g=1}var b=[0,1,2,4,8,16,32,64,128,27,54],a=a.AES=t.extend({_doReset:function(){for(var e,t=(n=this._key).words,a=n.sigBytes/4,n=4*((this._nRounds=a+6)+1),r=this._keySchedule=[],i=0;i<n;i++)i<a?r[i]=t[i]:(e=r[i-1],i%a?6<a&&4==i%a&&(e=o[e>>>24]<<24|o[e>>>16&255]<<16|o[e>>>8&255]<<8|o[255&e]):(e=o[(e=e<<8|e>>>24)>>>24]<<24|o[e>>>16&255]<<16|o[e>>>8&255]<<8|o[255&e],e^=b[i/a|0]<<24),r[i]=r[i-a]^e);for(t=this._invKeySchedule=[],a=0;a<n;a++)i=n-a,e=a%4?r[i]:r[i-4],t[a]=a<4||i<=4?e:d[o[e>>>24]]^c[o[e>>>16&255]]^u[o[e>>>8&255]]^p[o[255&e]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,r,i,s,l,o)},decryptBlock:function(e,t){var a=e[t+1];e[t+1]=e[t+3],e[t+3]=a,this._doCryptBlock(e,t,this._invKeySchedule,d,c,u,p,n),a=e[t+1],e[t+1]=e[t+3],e[t+3]=a},_doCryptBlock:function(e,t,a,n,r,i,o,s){for(var l=this._nRounds,d=e[t]^a[0],c=e[t+1]^a[1],u=e[t+2]^a[2],p=e[t+3]^a[3],m=4,f=1;f<l;f++)var v=n[d>>>24]^r[c>>>16&255]^i[u>>>8&255]^o[255&p]^a[m++],g=n[c>>>24]^r[u>>>16&255]^i[p>>>8&255]^o[255&d]^a[m++],_=n[u>>>24]^r[p>>>16&255]^i[d>>>8&255]^o[255&c]^a[m++],p=n[p>>>24]^r[d>>>16&255]^i[c>>>8&255]^o[255&u]^a[m++],d=v,c=g,u=_;v=(s[d>>>24]<<24|s[c>>>16&255]<<16|s[u>>>8&255]<<8|s[255&p])^a[m++],g=(s[c>>>24]<<24|s[u>>>16&255]<<16|s[p>>>8&255]<<8|s[255&d])^a[m++],_=(s[u>>>24]<<24|s[p>>>16&255]<<16|s[d>>>8&255]<<8|s[255&c])^a[m++],p=(s[p>>>24]<<24|s[d>>>16&255]<<16|s[c>>>8&255]<<8|s[255&u])^a[m++],e[t]=v,e[t+1]=g,e[t+2]=_,e[t+3]=p},keySize:8});e.AES=t._createHelper(a)}(),E.built=!0}if(Fe.gg_nol_CallBack)for(n=0,t=Fe.gg_nol_CallBack.length;n<t;n+=1)Fe.gg_nol_CallBack[n]&&Fe.gg_nol_CallBack[n].callBack&&Fe.gg_nol_CallBack[n].callBack(E);return E}),Fe.NOLBUNDLE.registerLib("PLSTM",function(e){if(!e.PLSTM){var l=e.GLCFG||e;e.PLSTM={},ns=Fe.NOLBUNDLE,paramsPassed={},stateObject={current:null,static:null,content:null,state:null},BUILDVERSION="6.0.0.5",stateEvents={playhead:["playhead","loadmetadata"],pause:["pause","6"],complete:["complete","oncomplete","56","57","staticend","end"],adstop:["adstop"]};function d(e,t){var a=c.clone(t);delete a.prevState;t=function(e){if(this.state&&e){if("string"==typeof e)return this.state.toLowerCase()===e.toLowerCase();if("object"===(void 0===e?"undefined":_typeof(e)))return-1<e.indexOf(this.state)}return!1};return{transitionType:e,event:"",state:a.state||"idle",prevState:a,hasPrevStatic:a.hasNewStatic||!1,hasNewStatic:!1,isNewStatic:!1,hasPrevContent:a.hasNewContent||!1,hasNewContent:!1,isNewContentAsset:!1,contentMetaChangedButThereIsNoAssetId:!1,isContentAfterComplete:!1,hasPrevAd:a.hasNewAd||!1,hasNewAd:!1,isNewAdAsset:!1,hasId3:!1,scroll:!1,isVA:!1,lastPh:a.lastPh,isState:t}}var c={clone:function(e){return JSON.parse(JSON.stringify(e))},essentialKeys:function(e){if(e&&"object"===(void 0===e?"undefined":_typeof(e)))for(var t=["type","event","playheadPosition","metadata","id3Data","content","ad","static","assetid"],a=Object.keys(e),n=0;n<a.length;n++)for(var r=0;r<t.length;r++)a[n].toLowerCase()===t[r].toLowerCase()&&a[n]!==t[r]&&(e[t[r]]=this.clone(e[a[n]]),delete e[a[n]])},parseType:function(e){return e&&"string"==typeof e.type?(e.type||"").toLowerCase():e.type},parseEvent:function(e){if(e&&e.event&&"string"==typeof e.event.toString())for(var t=Object.keys(stateEvents),a=0,n=t.length;a<n;a++)if(-1<stateEvents[t[a]].indexOf(e.event.toLowerCase()))return t[a];return null},hasData:function(e,t){if(e&&e.metadata&&t){t=e.metadata[t];return!(!t||null==t||"{}"===JSON.stringify(t))}return!1},copyData:function(e,t,a){return a&&!a.metadata&&(a.metadata={}),e&&t&&c.hasData(t,e)&&a&&(a.metadata[e]=JSON.parse(JSON.stringify(t.metadata[e]))),a},objDiff:function(e,t){var a={},n={};if(e&&(a=Object.keys(e).sort()),t&&(n=Object.keys(t).sort()),JSON.stringify(a)!==JSON.stringify(n))return!0;for(var r=0,i=n.length;r<i;r++)if(e[n[r]]!==t[n[r]])return!0;return!1},getDataKey:function(e,t,a){return e&&t&&e.metadata&&e.metadata[t]&&e.metadata[t][a]||""},getData:function(e,t){if(e&&e.metadata&&t)return e.metadata[t]},isValid:function(e){return null!=e&&""!==e},isSame:function(e,t){var a=Object.keys(e).sort();if(a!==Object.keys(t).sort())return!1;for(var n=0,r=a.length;n<r;n++)if(e[a[n]]!==t[a[n]])return!1;return!0},mergeState:function(e,t){t=JSON.parse(JSON.stringify(t));return e&&(c.hasData(t,"content")||c.copyData("content",e,t),c.hasData(t,"ad")||c.copyData("ad",e,t),c.hasData(t,"static")||c.copyData("static",e,t)),t},evalMiddlewares:function(t,a,n){var e=Object.keys(t),r=a.state;return e.forEach(function(e){r=t[e](r,a.prevStateEvent,a.curStateEvent,a.config,n)}),a.state=r,a}},r={start:function(e,t,a,n){try{var r=new d(c.parseType(a),e),i=Object.keys(u),o=t,s=a;r.isVA=n&&n.nol_GLOBALS&&"601"===n.nol_GLOBALS.nol_nsdkv,r.transitionType=c.parseType(a),r.event=c.parseEvent(a);i.map(function(e){r[e]=u[e]&&u[e](r,o,s,n)||!1}).filter(function(e){return!(""===e||null==e)});return r}catch(e){l._listeners.fireEvent("warn",{type:"warn",msg:"TrackEvent transition start error - "+e.message})}return e},preTransitionEvents:function(e,t,a,n,r){try{var i=e.lastPh;(e.isStaticChange||e.isStaticComplete)&&r("staticend",c.getData(t||{},"static")||0),(e.isAdChange||e.isAdComplete)&&(e&&"complete"===e.event?r("57",i):r("stop",i)),e.isContentChange||e.isContentComplete?r("end",i):("pause"===e.event||e.contentToAdTransition||e.adToContentTransition)&&r("pause",i)}catch(e){l._listeners.fireEvent("warn",{type:"warn",msg:"TrackEvent pre-transition error - "+e.message})}return e},transition:function(e,t,a,n){try{"static"!==e.transitionType&&("pause"===e.event?e.state="ad"===e.transitionType?"adpaused":"contentpaused":"ad"===e.transitionType&&-1<["adstop","complete"].indexOf(e.event)?e.state="adcomplete":"content"===e.transitionType&&"complete"===e.event?e.state="contentcomplete":"playhead"===e.event&&(e.state="ad"===e.transitionType?"ad":"content"))}catch(e){l._listeners.fireEvent("warn",{type:"warn",msg:"TrackEvent transition error - "+e.message})}return e},postTransitionEvents:function(e,t,a,n,r){try{var i=c.getData(a,"content")||c.getData(t,"content"),o=c.getData(a,"static")||c.getData(t,"static"),s=e.lastPh;e.isNewStaticAsset&&r("staticstart",c.getData(a,"static")),e.scroll&&(e.hasPrevStatic||e.hasNewStatic)&&r("onpaginate",o),e.inAdContentMetaUpdate&&"playhead"===e.event&&a.playheadPosition&&r("setplayheadposition",a.playheadPosition),(e.isNewContentAsset||e.inAdContentMetaUpdate||e.adToContentTransition||e.isContentAfterComplete||e.contentMetaChangedButThereIsNoAssetId&&e.hasId3)&&r("loadmetadata",i),e.contentMetaChanged&&!e.isNewContentAsset&&r("updatemetadata",i),"ad"===e.transitionType&&(e.isNewAdAsset||e.contentToAdTransition)?r("loadmetadata",c.getData(a,"ad")):!e.isNewContentAsset&&e.inAdContentMetaUpdate&&r("changecontext","ad"),e.hasId3&&r("sendid3",a.id3Data),null!==a.volume&&void 0!==a.volume&&r("volume",a.volume),e.isOtt&&r("updateott",a.ottData),e.isBuffering&&r("buffering",s),a.buttonEvent&&r("buttonevent",a.buttonEvent),"playhead"===e.event&&a.playheadPosition&&!e.inAdContentMetaUpdate&&("content"===e.transitionType&&(e.hasNewContent||e.hasPrevContent)||"ad"===e.transitionType&&(e.hasNewAd||e.hasPrevAd))&&r("setplayheadposition",a.playheadPosition)}catch(e){l._listeners.fireEvent("warn",{type:"warn",msg:"TrackEvent post-transition error - "+e.message})}return e},end:function(e,t,a,n){try{a.metadata||(a.metadata={}),e.isNewAdAsset||!e.isAdComplete&&!e.isContentChange?!e.hasNewAd&&e.hasPrevAd&&c.copyData("ad",t,a):a.metadata.ad={},(!e.isNewContentAsset&&e.isContentComplete||!e.hasNewContent&&e.hasPrevContent)&&c.copyData("content",t,a),e.isStaticComplete?a.metadata.static={}:!e.hasNewStatic&&e.hasPrevStatic&&c.copyData("static",t,a)}catch(e){l._listeners.fireEvent("warn",{type:"warn",msg:"TrackEvent transition end error - "+e.message})}return e}},u={hasPrevStatic:function(e,t,a,n){return c.hasData(t,"static")},hasPrevContent:function(e,t,a,n){return c.hasData(t,"content")},hasPrevAd:function(e,t,a,n){return c.hasData(t,"ad")},hasNewStatic:function(e,t,a,n){return c.hasData(a,"static")},hasNewContent:function(e,t,a,n){return c.hasData(a,"content")},hasNewAd:function(e,t,a,n){return c.hasData(a,"ad")},isNewStaticAsset:function(e,t,a,n){if(!1===e.hasNewStatic)return!1;n=l.configController.cmsMap("nol_assetid",n),t=c.getDataKey(t,"static",n),n=c.getDataKey(a,"static",n);return null!=n&&""!==n&&(!e.hasPrevStatic||n!==t)},isNewContentAsset:function(e,t,a,n){if(!1===e.hasNewContent)return!1;n=l.configController.cmsMap("nol_assetid",n),t=c.getDataKey(t,"content",n),n=c.getDataKey(a,"content",n);return null!=n&&""!==n&&(!e.hasPrevContent||n!==t)},isContentAfterComplete:function(e,t,a,n){try{return t&&"complete"===t.event&&a&&"playhead"===a.event&&"content"===a.type}catch(e){return!1}},isNewAdAsset:function(e,t,a,n){if(!1===e.hasNewAd)return!1;var r=l.configController.cmsMap("nol_assetid",n),i=c.getDataKey(t,"ad",r),o=c.getDataKey(a,"ad",r),r=l.configController.cmsMap("nol_adIdx",n)||"adIdx",n=c.getDataKey(t,"ad",r),r=c.getDataKey(a,"ad",r);return null!=o&&""!==o&&(!e.hasPrevAd||o!==i)||e.hasPrevAd&&r!==n||c.getDataKey(t,"ad","type")!==c.getDataKey(a,"ad","type")},contentMetaChanged:function(e,t,a,n){return!1!==e.hasNewContent&&!1!==e.hasPrevContent&&c.objDiff(c.getData(t,"content"),c.getData(a,"content"))},hasNewContentEx:function(e,t,a,n){return!1!==e.hasNewContent&&c.objDiff(c.getData(t,"content"),c.getData(a,"content"))},contentMetaChangedButThereIsNoAssetId:function(e,t,a,n){n=l.configController.cmsMap("nol_assetid",n),n=c.getDataKey(a,"content",n);return e.hasNewContentEx&&(null==n||""===n)},adMetaChanged:function(e,t,a,n){return!1!==e.hasNewAd&&!1!==e.hasPrevAd&&c.objDiff(c.getData(t,"ad"),c.getData(a,"ad"))},hasId3:function(e,t,a,n){return null!==a.id3Data&&void 0!==a.id3Data&&""!==a},scroll:function(e,t,a,n){return"static"===e.transitionType&&a.scroll&&-1<["true","1","y","yes"].indexOf(a.scroll.toString().toLowerCase())},isStaticChange:function(e){return e.isNewStaticAsset&&e.hasPrevStatic},isStaticComplete:function(e){return"static"===e.transitionType&&"complete"===e.event},isContentChange:function(e){return e.isNewContentAsset&&e.hasPrevContent&&!e.isState("contentcomplete")&&"playhead"===e.event},adToContentTransition:function(e){return e.isState(["ad","adpaused","adcomplete"])&&"content"===e.transitionType&&"playhead"===e.event&&(e.hasPrevContent||e.hasNewContent)},contentToAdTransition:function(e,t,a){return e.isState(["content","contentpaused"])&&"ad"===e.transitionType&&"playhead"===e.event&&e.hasNewAd},isContentComplete:function(e,t,a){return"content"===e.transitionType&&e.isState(["content","contentpaused"])&&"complete"===e.event},isAdChange:function(e){return e.isNewAdAsset&&e.hasPrevAd&&e.isState(["ad","adpaused"])&&!e.isState("adcomplete")&&"playhead"===e.event},isAdComplete:function(e){return e.isState(["ad","adpaused"])&&("complete"===e.event||e.isAdChange)||"adstop"===e.event&&e.hasPrevAd},inAdContentMetaUpdate:function(e){return(e.contentMetaChanged||e.isNewContentAsset)&&"ad"===e.transitionType},isOtt:function(e,t,a){return null!==a.ottData&&void 0!==a.ottData&&""!==a.ottData},isBuffering:function(e,t,a){return null!==a.buffering&&void 0!==a.buffering&&""!==a.buffering&&["1","true","t","y","yes"].indexOf(a.buffering.toString().toLowerCase())},lastPh:function(e,t,a){return c.isValid(t.playheadPosition)?t.playheadPosition:e.lastPh||0}};return e.PLSTM.stateMachine=function(i,e){var o={config:e,curStateEvent:{metadata:{}},prevStateEvent:{medata:{}},state:{}};return{transition:function(e,a){try{if(e&&"object"===(void 0===e?"undefined":_typeof(e))&&(e=c.clone(e),c.essentialKeys(e)),l._listeners.fireEvent("debug",{type:"debug",msg:"TrackEvent called pli="+i+" transitioning type "+e.type+" for event "+e.event+" state object: "+JSON.stringify(e)}),e&&"object"===(void 0===e?"undefined":_typeof(e))){e.type&&"string"==typeof e.type&&(e.type=e.type.toLowerCase()),e.event&&"string"==typeof e.event&&(e.event=e.event.toLowerCase());var t=c.parseType(e),n=c.parseEvent(e);if(e.metadata&&c.essentialKeys(e.metadata),!t)return"playhead"===n&&void 0===c.getData(e,"content")&&void 0===c.getData(e,"ad")||l._listeners.fireEvent("sendError",{data:{type:17,msg:'Error in trackEvent() - Missing "type" parameter in trackEvent metadata object'},id:i,timeStamp:Date.now()}),void this.checkID3(e,a);if(-1===["","content","ad","static"].indexOf(t))return l._listeners.fireEvent("sendError",{data:{type:17,msg:'Error in trackEvent() - Invalid "type" parameter "'+JSON.stringify(t)+'" in trackEvent metadata object'},id:i,timeStamp:Date.now()}),void this.checkID3(e,a);if(!n)return l._listeners.fireEvent("sendError",{data:{type:17,msg:'Error in trackEvent() - Missing "event" parameter in trackEvent metadata object'},id:i,timeStamp:Date.now()}),void this.checkID3(e,a);if(!this.checkMetadata(e,a))return;o.prevStateEvent=o.curStateEvent?c.clone(o.curStateEvent):{metadata:{content:null,ad:null,static:null}},o.curStateEvent=c.clone(e),o=c.evalMiddlewares(r,o,function(e,t){l._listeners.fireEvent("debug",{type:"debug",msg:"TrackEvent pli="+i+' firing event "'+e+'"'}),a&&"function"==typeof a&&a(e,t)})}}catch(e){l._listeners.fireEvent("warn",{type:"warn",msg:"TrackEvent pli="+i+" error - "+e.message})}},getState:function(){return o.state},checkID3:function(e,t){return!!e.id3Data&&(t&&"function"==typeof t&&t("55",e.id3Data),!0)},checkMetadata:function(e,t){""===e.id3Data&&delete e.id3Data;var a=c.getData(e,"content"),n=c.getData(e,"ad"),r=c.getData(e,"static");if(a&&"object"===(void 0===a?"undefined":_typeof(a))){if(c.essentialKeys(a),a.type&&"string"==typeof a.type&&-1!==["preroll","midroll","postroll","ad"].indexOf(a.type.toLowerCase())&&"content"===e.type)return l._listeners.fireEvent("sendError",{data:{type:17,msg:'Error in trackEvent() - Valid ad type "'+a.type+'" parameter in content trackEvent metadata object'},id:i,timeStamp:Date.now()}),this.checkID3(e,t),!1;a.type="content",a.assetid||l._listeners.fireEvent("warn",{type:17,msg:"Warning in trackEvent() - no assetId in content metadata, will not be credited",id:i,timeStamp:Date.now()})}if(n&&"object"===(void 0===n?"undefined":_typeof(n))){if(c.essentialKeys(n),"content"===n.type&&"ad"===e.type)return l._listeners.fireEvent("sendError",{data:{type:17,msg:'Error in trackEvent() - Valid content type "'+n.type+'" parameter in ad trackEvent metadata object'},id:i,timeStamp:Date.now()}),this.checkID3(e,t),!1;n.type&&"string"==typeof n.type&&-1!==["preroll","midroll","postroll","ad"].indexOf(n.type.toLowerCase())||(n.type="ad"),n.assetid||l._listeners.fireEvent("warn",{type:17,msg:"Warning in trackEvent() - no assetId in ad metadata, will not be credited",id:i,timeStamp:Date.now()})}return r&&"object"===(void 0===r?"undefined":_typeof(r))&&(c.essentialKeys(r),r.type="static",r.assetid||l._listeners.fireEvent("warn",{type:17,msg:"Warning in trackEvent() - no assetId in static metadata, will not be credited",id:i,timeStamp:Date.now()})),!(o&&o.curStateEvent&&o.curStateEvent.metadata&&!c.getData(e,e.type)&&!o.curStateEvent.metadata[e.type]&&(l._listeners.fireEvent("sendError",{data:{type:17,msg:"Error in trackEvent() - Have not recieved "+e.type+" metadata and an event was called for "+e.type},id:i,timeStamp:Date.now()}),this.checkID3(e,t),1))}}},e.PLSTM}}),Fe.NOLBUNDLE.registerLib("PLVBL",function(l){if(!l.PLVBL){function i(){return[Fe.screen.width,Fe.screen.height]}function o(e,t){return e?"width"===t?e.clientWidth:"height"===t?e.clientHeight:[e.clientWidth,e.clientHeight]:""}var d="nol_vsData",c="nol_scrnSize",u="nol_vidSize",p="nol_winSize",m="nol_volume",f="nol_auData",v="nol_viTickOffset",g=l.GLCFG||l;return l.PLVBL=function(a,e,t){var n={initialized:!1,_defaults:{nol_viewability:"[0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0]",nol_auThreshold:"[0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0]",nol_volume:l.configController.getGlobal(m,e.getClientConfig())||"100",nol_viTickOffset:2},viReadyQueue:[],clientConfig:e.getClientConfig(),globals:e.getConfigParams().ggParams,cmsMap:null,nodeId:"",node:null,viewAPI:null,viewRatios:null,vizuURL:"",viewParams:null,volume:null,auThresholds:[],intervalGap:2,state:"idle",queueTicks:t||!1,ticker:null,tickerInterval:1e3,screenSeries:"",viewSeries:[],elementSeries:"",viewportSeries:"",audibilitySeries:[]},s={log:function(e,t){g._listeners.fireEvent(e,{type:e,msg:a.get("nol_comment")+" - "+t})},incrementSeries:function(e,t){var a=null;e?a=e[e.length-1]:e=[],a&&2===a.length&&a[0]===t?a[1]++:e.push([t,1])},clearSeries:function(e){n.viewSeries=[],n.screenSeries="",n.elementSeries=[],n.viewportSeries=[],n.audibilitySeries=[],e?s.registerVIDataReady(function(){n.viewAPI&&n.viewAPI.resetMeasurement()},"clear"):n.viewAPI&&n.viewAPI.resetMeasurement()},setDataSeries:function(e,t){e&&"function"==typeof e.set&&(e.set(d,t?"[]":JSON.stringify(n.viewSeries)),e.set(p,t?"[]":JSON.stringify(n.viewportSeries)),e.set(u,t?"[]":JSON.stringify(n.elementSeries)),e.set(c,t?"":n.screenSeries),e.set(f,t?"[]":JSON.stringify(n.audibilitySeries)))},getDataSeries:function(){var e={};return e[d]=n.viewSeries,e[p]=n.viewportSeries,e[u]=n.elementSeries,e[c]=n.screenSeries,e[f]=n.audibilitySeries,e},getNodeId:function(){var e=g.configController.cmsMap("nol_nodeId",n.clientConfig);return n.globals?n.globals[e]:""},getVolumeParam:function(){var e=g.configController.cmsMap(m,n.clientConfig)||m;return n.globals?n.globals[e]:""},evalUpperThreshold:function(e,t){if(null!=e&&""!==e&&0<=e&&t&&0<t.length)for(var a=0,n=t.length;a<n;a++){if(e<t[a]&&0==a)return 0;if(a==n-1&&e>=t[a])return parseFloat(t[a]);if(e<t[a])return parseFloat(t[a-1])}return 0},evalVolume:function(e){if(null!=e&&e.toString().match(/^\d*\.?\d*$/gi)&&"NaN"!==parseFloat(e).toString()&&"NaN"!==parseInt(e).toString()){e=e;return!e.toString().match(/\d*\.\d+/i)&&(1<parseFloat(e)||"1"===e.toString())&&(e=parseFloat(e)/100),Math.round(100*s.evalUpperThreshold(parseFloat(e),n.auThresholds))}return null},getThreshold:function(t,e){if(t&&e){try{var a=l.configController.getGlobal(t,e.clientConfig),n="string"==typeof a?JSON.parse(a):a,r=!0;if(n&&"object"===(void 0===n?"undefined":_typeof(n))&&0<n.length){for(var i=0,o=n.length;i<o;i++)if(!n[i].toString().match(/^\d*\.?\d*$/gi)){r=!1;break}if(r)return n}}catch(e){s.log("warn","Viewabilty config theshold for "+t+" is invalid. Default threshold will be used")}t=e._defaults?e._defaults[t]:[];return"string"==typeof t?JSON.parse(t):t}return[]},registerVIDataReady:function(e,t){e&&"function"==typeof e&&(n.viReadyQueue||(n.viReadyQueue=[]),n.viReadyQueue.push({name:t,cb:e}))},flushVIDataReadyQueue:function(){if(n.viReadyQueue&&0<n.viReadyQueue.length)for(var e=null,t=0;t<n.viReadyQueue.length;t++)if("function"==typeof(e=n.viReadyQueue[t].cb))try{e(),n.viReadyQueue.splice(0,1)}catch(e){}}},r={init:function(e){try{var t;e&&(s.log("debug","Initializing viewability module"),n.nodeId=e,n.node=document.getElementById(e),n.viewRatios=s.getThreshold("nol_viewability",n),n.vizuURL=g.PLDPR.resolveExpression(g.configController.getGlobal("nol_vizuURL",n.clientConfig),a),n.auThresholds=s.getThreshold("nol_auThreshold",n),t=l.configController.getGlobal(m,n.clientConfig),n._defaults[m]=t&&"NaN"!==parseInt(t).toString()?t:n._defaults[m],n.volume=s.evalVolume(s.getVolumeParam()||parseInt(n._defaults[m])),n.intervalGap=a.isProductOf("mtvr")?l.configController.getGlobal("nol_id3IntrvlGp",n.clientConfig):l.configController.getGlobal(v,n.clientConfig)||n._defaults[v],n.viewParams={externalTick:1,instantOn:0,node:n.node,width:o(n.node,"width"),height:o(n.node,"height"),ratio:n.viewRatios,tickOffset:parseInt(n.intervalGap),ffThreshold:parseInt(n.intervalGap)},n.vizuURL&&n.node?(g.scriptController.inject(n.vizuURL,n.nodeId,function(){"function"==typeof getVIAPI&&(n.viewAPI=getVIAPI(),n.viewAPI?(n.viewAPI.initVI(n.viewParams),n.initialized=!0,n.viewAPI.subscribe(s.flushVIDataReadyQueue,"VIExternalDataReady",this),s.log("debug","Viewability module successfully initialized")):s.log("warn","Viewability API not instantiated by viewability library. Unable to initialize viewability module."))}),s.log("info","Viewabilty module injected")):s.log("warn","Viewabilty library URL not defined in config. Unable to initialize viewability module."))}catch(e){s.log("warn","Failed to initialize viewability module."),n.initialized=!1}},start:function(e){"running"!==n.state&&n.initialized&&(n.viewAPI.startVI(),n.state="running")},stop:function(){"stopped"!==n.state&&n.initialized&&(n.viewAPI.stopVI(),n.state="stopped")},tick:function(e,t,a){n.initialized&&null!=e&&""!==e&&"NaN"!==Math.floor(e).toString()&&("running"!==n.state&&r.start(),n.viewAPI&&n.viewAPI.updateTick(Math.floor(e),n.volume),n.screenSeries=i().join("x")),s.registerVIDataReady(a,"tick_"+e)},setData:function(e){n.initialized&&(n.viewSeries=n.viewAPI&&n.viewAPI.getVideoSeries?n.viewAPI.getVideoSeries():[],n.audibilitySeries=n.viewAPI&&n.viewAPI.getAudioSeries?n.viewAPI.getAudioSeries():[],n.viewportSeries=n.viewAPI&&n.viewAPI.getViewportSeries?n.viewAPI.getViewportSeries():[],n.elementSeries=n.viewAPI&&n.viewAPI.getElementSizeSeries?n.viewAPI.getElementSizeSeries():[],n.screenSeries=i().join("x"),s.setDataSeries(e))},setVolume:function(e){var t;n.initialized&&e&&(null!=(t=s.evalVolume(e))&&""!==t&&"NaN"!==parseInt(e).toString()?(n.volume=t,s.log("debug","Audibiliy volume set to "+t)):s.log("debug",'Volume "'+e+'" is invalid. Volume set will be ignored.'))},clear:function(e,t){n.initialized&&s.clearSeries(t),e&&(s.log("debug","Viewability resetting"),s.setDataSeries(e,!0),setTimeout(function(){s.setDataSeries(e,!0)}))}};return-1<a.get("nol_url").indexOf(d)&&(s.log("debug","Viewability module loaded"),r.init(s.getNodeId())),{initialized:function(){return n.initialized},start:r.start,stop:r.stop,tick:r.tick,setData:r.setData,getData:s.getDataSeries,setVolume:r.setVolume,clear:r.clear}},l.PLVBL}}),Fe.NOLBUNDLE.registerLib("PLSIVT",function(e){if(!e.PLSIVT){var n=e.GLCFG||e;return e.PLSIVT=function(e,t){var a={initialized:!1,sivtURL:"",clientConfig:e.getClientConfig(),globals:e.getConfigParams().ggParams,uaid:e.sessionId,apid:e.apid,dataObj:t};return a.sivtURL=n.configController.getGlobal("nol_sivtURL",a.clientConfig),a.sivtURL?(t=n.PLDPR.resolveExpression(a.sivtURL,a.dataObj),n.scriptController.inject(t,document.body)):n._listeners.fireEvent("debug",{type:"debug",msg:"SIVT library URL not defined in config. Unable to initialize SIVT module."}),a.initialized=!0,{initialized:function(){return a.initialized}}},e.PLSIVT}}),Fe.NOLBUNDLE.registerLib("PLDPR",function(ee){"use strict";var e=ee.PLDPR=ee.PLDPR||{},l=(X=Fe.NOLBUNDLE).sdkvForConfig?X.sdkvForConfig():"bj.6.0.0",P=ee.getBaseBuildVer?ee.getBaseBuildVer()+"594":"6.0.0.594",d="cgi-bin/",c=X.getAddressProtocol?X.getAddressProtocol():X.getAddress(),u="error",t=ee.getLS(),p=ee.getConfigVer?ee.getConfigVer():300,m=5,C={"[":{end:"]",count:0},"{":{end:"}",count:0},"<":{end:/\.\d+,\d+\>/g,count:0}},T={regex:/\|\![\w\W]*?(\!\|)/g,length:2},S=/[\[\{<\(\}\]>\)]/g,O=new RegExp(/(.*?)(_content|_ad|_static)?$/i),te=e.dataObj||{},b=0,a=0,L=5,w=5,s=[],f=!1,v=[],g="false",ae={},E={},k={},ne=ne||{},_=!1,y={send:function(e,t,a){var n,r=e,i=-1!==r.url.indexOf("&c62=")?h(r.url,"c62=")+"&c62=sendTime,"+(void 0!==t?t:re()/1e3>>0):r.url,o=this,s="",s=-1!==i.indexOf("prd=metadata")?i:h(i,"rnd=")+"&rnd="+Math.round(1e6*Math.random());a=a||"GET",e&&e.uoo&&(s=se.nuidOverride(s,e.uoo)),ee.postMsgAvail&&r.hasOwnProperty("maskRefUrl")&&-1!==r.maskRefUrl&&"true"===r.maskRefUrl?A.sendMaskedPing(s):"POST"===a?(n=s.indexOf("?"),t=ee.cookie.all(),e=s.substr(0,n)+(t.IMRID?"?"+A.param({IMRID:t.IMRID},"ckk"):""),n=s.substr(n+1),delete t.IMRID,t&&0<Object.keys(t).length&&(n+="&"+A.param(t,"ckk")),n=se.optoutOverride(n),A.request(e,{method:"POST",data:n},!_).then(function(e){400<parseInt(e.status)&&o.onError({target:{src:i}},r,a)})):_?navigator.sendBeacon(s):((n=new Image).onerror=function(e){o.onError(e,r,a)},n.onload=function(){ee.queryCookies()},n.src=s)},setup:function(e){var t=e.hasOwnProperty("url")?e.url:"",a=e.params||{url:t,uoo:"true"===e.uoo?1:0,errorDelay:1e3*(e.delay||w),retry:0,maskRefUrl:e.hasOwnProperty("maskRefUrl")&&0<String(e.maskRefUrl).length?e.maskRefUrl:-1};t&&0<t.length&&this.send(a,e.pingSendTime,e.method)},onError:function(e,t,a){var n=this,e=e.target.src;t&&t.retry<L&&e&&0<e.length&&(t.retry+=1,t.url=e,Fe.setTimeout(function(){n.send(t,null,a)},t.errorDelay))}},re=X.getTIme||function(){return(new Date).getTime()},ie={},a=a||0,L=L||5;function h(e,t){for(var a=[],n=e.split("&"),r=0,i=n.length;r<i;r++)0!==n[r].indexOf(t)&&a.push(n[r]);return a.join("&")}function I(e){var t;void 0!==e&&0!==e.length&&((t=Fe.document.createElement("script")).type="text/javascript",t.src=h(e,"rnd=")+"&rnd="+Math.round(1e6*Math.random()),t.onerror=function(e){var t=e.target.src;(Fe.document.head||Fe.document.getElementsByTagName("head")[0]).removeChild(e.target),a<L&&(a++,Fe.setTimeout(function(){I(t)},5e3))},t.onload=function(e){a=0,(Fe.document.head||Fe.document.getElementsByTagName("head")[0]).removeChild(e.target)},(Fe.document.head||Fe.document.getElementsByTagName("head")[0]).appendChild(t))}var n,r,i,o,D,oe=oe||{},se=se||{},le=le||function(){},de=(n="nol_eventData",r={delimiter:"",eventsList:[]},i={play:{name:"play",abbrv:"PL"},pause:{name:"pause",abbrv:"PU"},rewind:{name:"rewind",abbrv:"RW"},forward:{name:"forward",abbrv:"FW"},stop:{name:"stop",abbrv:"ST"},resume:{name:"resume",abbrv:"RE"},mute:{name:"mute",abbrv:"MT"}},{get:(o={get:function(e,t){var a="";return a=e?le({data:e,param:n,vidType:t||e._currVidType}):a},set:function(e,t,a){return e&&le({data:e,param:n,val:t,vidType:a||e._currVidType}),e},clear:function(e){e&&(le({data:e,param:n,val:"",vidType:"ad"}),le({data:e,param:n,val:"",vidType:"content"}))},clone:function(e){try{return{content:o.get(e,"content"),ad:o.get(e,"ad")}}catch(e){return null}},bind:function(e,t){try{if(e&&t)for(var a in t)o.set(e,t[a],a)}catch(e){}},append:function(e,t){var a,n;e&&t&&(a=o.get(e),n=o.delimiter(e),t=o.parseEventData(t),o.set(e,a?[a,t].join(n):t))},delimiter:function(e){return e?(r.delimiter||(r.delimiter=le({data:e,param:"nol_eventDataDelimiter"})),r.delimiter):""},isEnabled:function(e){return!!e&&"true"===le({data:e,param:"nol_eventDataEnabled"})},isEventEnabled:function(e,t){if(t&&e){e=o.lookupEvent(e.toLowerCase());if(e)return-1<o.eventsList(t).indexOf(e.name)}return!1},eventsList:function(e){if(e)return r.eventsList&&0!=r.eventsList.length||(e=le({data:e,param:"nol_eventDataEvents"}))&&(r.eventsList=e.split(",")),r.eventsList},clearCache:function(){r.delimiter="",r.eventsList=[]},lookupEvent:function(e){return e?i[e.toLowerCase()]:null},parseEventData:function(e){var t,a="";return!e||(t=o.lookupEvent(e.event))&&(t=[t.abbrv,e.timestamp,e.curPos],void 0!==e.prevPos&&null!==e.prevPos&&e.curPos!=e.prevPos&&t.push(e.prevPos),void 0!==e.p1&&null!==e.p1&&t.push(e.p1),a=t.join(":")),a},handleEvent:function(e,t){e&&t&&o.isEventEnabled(t.event,e)&&o.append(e,t)},setNextTick:function(e,t,a){var n=o.get(e,a);return e=n&&-1<n.indexOf("{{nextTick}}")?t&&t.event===oe.events.playhead?o.set(e,n.replace(/{{nextTick}}/gi,1==t.curPos?"0":t.curPos),a):(t=se.state.position.current(e,a)||"0",o.set(e,n.replace(/{{nextTick}}/gi,t),a)):e},preProcess:function(e,t){try{e&&t&&t.event&&t.event!==oe.events.play&&-1===t.event.indexOf("event_")&&(o.setNextTick(e,t),t.event===oe.events.stop&&"content"!==se.type.current(e)&&o.setNextTick(e,t,"content"),o.handleEvent(e,t))}catch(e){}},postProcess:function(e,t){try{e&&t&&t.event&&t.event===oe.events.play&&o.handleEvent(e,t)}catch(e){}}}).get,set:o.set,clone:o.clone,bind:o.bind,clear:o.clear,append:o.append,isEnabled:o.isEnabled,isEventEnabled:o.isEventEnabled,preProcess:o.preProcess,postProcess:o.postProcess,setNextTick:o.setNextTick}),ee=ee||Fe.NOLBUNDLE||{},A=A||{},ae=ae||{},E=E||{},ce=ce||function(){},ue=ue||function(){},h=h||function(){},M=M||function(){},le=le||function(){},se={_keys:{currentPosition:"nolPriv_currPos",currentTimestamp:"nolPriv_now",stateCurrentPosition:"nolPriv_stateCurrentPH",stateCurrentTimestamp:"nolPriv_stateCurrentTS",stateCurrentStatus:"nolPriv_stateCurrentStatus",stateCurrentAsset:"nolPriv_stateCurrentAsset",stateCurrentType:"nolPriv_stateCurrentType",statePreviousPosition:"nolPriv_statePreviousPH",statePreviousTimestamp:"nolPriv_statePreviousTS",statePreviousStatus:"nolPriv_statePreviousStatus",statePreviousAsset:"nolPriv_statePreviousAsset",statePreviousType:"nolPriv_statePreviousType",tagName:"nol_comment",localTimer:"nol_timer",assetId:"nol_assetid"},_params:{optout:"uoo",nuid:"c1"},states:{loaded:"LOADED",playing:"PLAYING",paused:"PAUSED",stopped:"STOPPED"},findPlayer:function(e){if(e){if("string"==typeof e)return ee._players[e];e=le({data:e,param:"nol_playerId"});return se.findPlayer(e)}return null},currentPosition:function(e){return ue(le({data:e,param:se._keys.currentPosition}),"num")},currentTimestamp:function(e){return ue(le({data:e,param:se._keys.currentTimestamp}),"num")},asset:{current:function(e){return e?e._currAssetid:null},parse:function(e,t){e=ae[e.get("nol_playerId")]&&ae[e.get("nol_playerId")].nol_assetid?ae[e.get("nol_playerId")].nol_assetid.clientField:"nol_assetid";return t?t[e]:null}},type:{isCurrentlyContent:function(e){return"content"===e._currVidType},isCurrentlyAd:function(e){return"ad"===e._currVidType},isCurrentlyStatic:function(e){return"static"===e._currVidType},current:function(e){return e._currVidType},parse:function(e,t){var a=ae[e.get("nol_playerId")]||{},a=a.nol_vidtype?a.nol_vidtype.clientField:"nol_vidtype",t=t[a]?t[a].toString().toLowerCase():"",a=","+le({data:e,param:"nol_contentType"});return t&&-1!==a.indexOf(","+t)?"content":"dcrstatic"===le({data:e,param:"nol_product"})?"static":"ad"}},tagName:function(e,t){return le({data:e,param:se._keys.tagName,vidType:t||e._currVidType})},localTimer:function(e,t){return le({data:e,param:se._keys.localTimer,vidType:t||e._currVidType})||"nol_fdoffset"},isInitialized:function(e,t){try{return t=t||e._currVidType,"{}"!==JSON.stringify(e._dataArrObj[t])}catch(e){return!1}},updateMetadata:function(e,t,n,a){try{var r={nolParams:["nol_assetid","nol_assetName","nol_title","nol_vcTitle","nol_category","nol_channelName","nol_clientid","nol_vcid","nol_vidtype","nol_adLoadType"]};n=n||ae[e.get("nol_playerId")]||{};if(!e||!t)return;var i,o=void 0!==n&&"object"===(void 0===n?"undefined":_typeof(n))&&n;for(i in t)t.hasOwnProperty(i)&&(o&&function(e){var t,a=!0;for(t in r.nolParams)if(n&&n.hasOwnProperty(r.nolParams[t])&&e===n[r.nolParams[t]].clientField){a=!1;break}return a}(i)?le({data:e,param:String(i),val:String(t[i])}):a&&a.inferred||ee._listeners.fireEvent("warn",{type:"warn",msg:"Attempt to update metadata field "+i+" is not allowed. Please remove "+i+" from your metadata parameter."}))}catch(e){ee._listeners.fireEvent("error",{type:"error",msg:"Failed to update metadata"})}},extendfData:function(e){"function"!=typeof e.get&&(e.isProductOf=function(e){return!!e&&("object"===(void 0===e?"undefined":_typeof(e))?-1<e.indexOf(le({data:this,param:"nol_product"})):le({data:this,param:"nol_product"})===e)},e.get=function(e,t){return le({data:this,param:e,vidType:t})},e.set=function(e,t,a){return le({data:this,param:e,val:t,vidType:a})},e.del=function(e,t){e&&t&&this&&this._dataArrObj&&this._dataArrObj[t]&&delete this._dataArrObj[t][e]})},state:{position:{current:function(e,t){return ue(le({data:e,param:se._keys.stateCurrentPosition,vidType:t||e._currVidType}),"num")},previous:function(e,t){return ue(le({data:e,param:se._keys.statePreviousPosition,vidType:t||e._currVidType}),"num")},set:function(e,t,a){var n=se.state.position.current(e);le({data:e,param:se._keys.statePreviousPosition,val:n,vidType:a||e._currVidType}),le({data:e,param:se._keys.stateCurrentPosition,val:t,vidType:a||e._currVidType})}},timeStamp:{current:function(e,t){return ue(le({data:e,param:se._keys.stateCurrentTimestamp,vidType:t||e._currVidType}),"num")},previous:function(e,t){return ue(le({data:e,param:se._keys.statePreviousTimestamp,vidType:t||e._currVidType}),"num")},set:function(e,t,a){var n=se.state.timeStamp.current(e);le({data:e,param:se._keys.statePreviousTimestamp,val:n,vidType:a||e._currVidType}),le({data:e,param:se._keys.stateCurrentTimestamp,val:t,vidType:a||e._currVidType})}},asset:{current:function(e,t){return le({data:e,param:se._keys.stateCurrentAsset,vidType:t||e._currVidType})},previous:function(e,t){return le({data:e,param:se._keys.statePreviousAsset,vidType:t||e._currVidType})},set:function(e,t,a){var n=se.state.asset.current(e);le({data:e,param:se._keys.statePreviousAsset,val:n,vidType:a||e._currVidType}),le({data:e,param:se._keys.stateCurrentAsset,val:t,vidType:a||e._currVidType})}},status:{current:function(e,t){return le({data:e,param:se._keys.stateCurrentStatus,vidType:t||e._currVidType})},previous:function(e,t){return le({data:e,param:se._keys.statePreviousStatus,vidType:t||e._currVidType})},set:function(e,t,a){var n=se.state.status.current(e,a);le({data:e,param:se._keys.statePreviousStatus,val:n,vidType:a||e._currVidType}),le({data:e,param:se._keys.stateCurrentStatus,val:t,vidType:a||e._currVidType})}},type:{current:function(e,t){return le({data:e,param:se._keys.stateCurrentType,vidType:t||e._currVidType})},previous:function(e,t){return le({data:e,param:se._keys.statePreviousType,vidType:t||e._currVidType})},set:function(e,t,a){var n=se.state.type.current(e,a);le({data:e,param:se._keys.statePreviousType,val:n,vidType:a||e._currVidType}),le({data:e,param:se._keys.stateCurrentType,val:t,vidType:a||e._currVidType})}},set:function(e,t){var a=se.findPlayer(e);switch(t.event){case"LOAD":se.state.asset.set(e,t.assetId,t.contentType),se.state.type.set(e,t.contentType),se.state.timeStamp.set(e,t.timestamp);break;case"PLAY":case"RESUME":se.state.status.set(e,se.states.playing),se.state.asset.set(e,t.assetId,t.contentType),se.state.type.set(e,t.contentType),se.state.timeStamp.set(e,t.timestamp),"PLAY"===t.event&&se.state.position.set(e,0),"RESUME"===t.event&&null!=t.currentPos&&null!=t.currentPos&&"{{nextTick}}"!=t.currentPos&&(se.state.position.set(e,t.curPos),se.state.timeStamp.set(e,t.timestamp)),a.pauseObj.eventPauseTime=0;break;case"PAUSE":se.state.status.set(e,se.states.paused);break;case"STOP":se.state.resetAsset(e),se.state.status.set(e,se.states.stopped);break;case"PLAYHEAD":se.state.position.set(e,t.curPos),se.state.timeStamp.set(e,t.timestamp),a.pauseObj.eventPauseTime=0;break;case"REWIND":case"FORWARD":se.state.position.set(e,t.curPos),se.state.timeStamp.set(e,t.timestamp),a.pauseObj.eventPauseTime=0;break;case"MUTE":break;case"event_play":a.pauseObj.eventPauseTime=0}},get:function(e,t){try{if(e)return{position:{current:se.state.position.current(e,t),previous:se.state.position.previous(e,t)},timeStamp:{current:se.state.timeStamp.current(e,t),previous:se.state.timeStamp.previous(e,t)},asset:{current:se.state.asset.current(e,t),previous:se.state.asset.previous(e,t)},status:{current:se.state.status.current(e,t),previous:se.state.status.previous(e,t)},type:{current:se.state.type.current(e,t),previous:se.state.type.previous(e,t)}}}catch(e){}return null},resetAsset:function(e){se.state.position.set(e,null),se.state.timeStamp.set(e,null),se.state.asset.set(e,null)},bind:function(e,t){try{if(e&&t)for(var a in t)le({data:e,param:se._keys.statePreviousPosition,val:t[a].position?t[a].position.previous:null,vidType:a}),le({data:e,param:se._keys.stateCurrentPosition,val:t[a].position?t[a].position.current:null,vidType:a}),le({data:e,param:se._keys.statePreviousTimestamp,val:t[a].timeStamp?t[a].timeStamp.current:null,vidType:a}),le({data:e,param:se._keys.stateCurrentTimestamp,al:t[a].timeStamp?t[a].timeStamp.current:null,vidType:a}),le({data:e,param:se._keys.statePreviousAsset,val:t[a].asset?t[a].asset.current:null,vidType:a}),le({data:e,param:se._keys.stateCurrentAsset,val:t[a].asset?t[a].asset.current:null,vidType:a}),le({data:e,param:se._keys.statePreviousStatus,val:t[a].status?t[a].status.current:null,vidType:a}),le({data:e,param:se._keys.stateCurrentStatus,val:t[a].status?t[a].status.current:null,vidType:a}),le({data:e,param:se._keys.statePreviousType,val:t[a].type?t[a].type.current:null,vidType:a}),le({data:e,param:se._keys.stateCurrentType,val:t[a].type?t[a].type.current:null,vidType:a})}catch(e){}},clone:function(e){try{return{content:se.state.get(e,"content"),ad:se.state.get(e,"ad")}}catch(e){}}},cms:{parse:function(e,t,a){var n={metadata:(a?a.metadata:null)||{},defaultKey:(a?a.defaultKey:"")||"",silent:(a?a.silent:null)||!1,noClone:(a?a.noClone:null)||!1,vidType:a?a.vidType:"",noEncode:!(!a||!0!==a.noEncode)},r=e&&e.clientField?e.clientField:n.defaultKey;if(r&&t){if(n.metadata&&n.metadata.hasOwnProperty(r)&&n.metadata[r])return n.metadata[r];if(e&&e.clientField){if(n.end)return t.get(e.clientField,a?a.vidType:"");a=t;!0!==n.noClone&&(a=JSON.parse(JSON.stringify(t)),ce(a,"loadmetadata",n.metadata,null,!0));t=[];return!0===n.noEncode?t=[r]:(t=(e.encoding||"").split("")).splice(t.length/2,0,r),n.end=!0,M(a,"|!"+t.join("")+"!|",null,n)}}return""}},getRequestMethod:function(e){return e&&e.hasOwnProperty("get")&&"function"==typeof e.get?e.get("nol_prefRequestMethod")||e.get("nol_requestMethod"):"GET"},mtvr:{isTransPing:function(e){return!!e&&"id3"===le({data:e,param:"nol_product"})},isPCTag:function(e){return!!e&&e.isProductOf("mtvr")&&""!==le({data:e,param:"nol_subTag"})},pcChanged:function(e,t){return!!e&&t!==le({data:e,param:"nol_pccid"})},isFDTag:function(e){return!!e&&e.isProductOf("mtvr")&&""===le({data:e,param:"nol_subTag"})},fdChanged:function(e,t){return!!e&&t!==le({data:e,param:"nol_fdcid"})},resetTagSession:function(e,t){e&&e.set("nol_sessionId",t||ee.generateGUID(),"content")},clearTagSession:function(e){if(e)return e.del("nol_sessionId","content")},isNullPCCid:function(e){return e.get("nol_pccid")===e.get("nol_cidNull")},isNullFDCid:function(e){return e.get("nol_fdcid")===e.get("nol_cidNull")}},nuidOverride:function(e,t){return e=t?A.paramOverride(e,se._params.nuid,"nuid,OPTOUT"):e},optoutOverride:function(e){return e&&(e=h(e,se._params.optout+"=")+(ee.isOptout()?"&"+se._params.optout+"=1":""),e=A.paramOverride(e,se._params.nuid,"nuid,"+ee.getLsId())),e},getEventsFilter:function(e){return e.get("nol_eventFilter")||E[e.get("nol_playerId")]||{}}},ee=ee||Fe.NOLBUNDLE||{},oe=oe||{},de=de||{},se=se||{},re=re||function(){},ue=ue||function(){},le=le||function(){},oe={events:D={load:"LOAD",play:"PLAY",pause:"PAUSE",stop:"STOP",resume:"RESUME",rewind:"REWIND",forward:"FORWARD",playhead:"PLAYHEAD",mute:"MUTE",unmute:"UNMUTE"},inferEvent:function(t,e,a,n,r){var i=null;try{if(i={event:"event_"+t,curPos:se.state.position.current(e),prevPos:null,timestamp:n},t&&e)switch(t.toLowerCase()){case"3":case"15":case"loadmetadata":case"pauseloadmeta":var o=se.asset.parse(e,r),s=se.state.asset.current(e),l=se.state.asset.previous(e),d=se.state.type.current(e),c=se.type.parse(e,r),u=se.state.asset.current(e,c);if(i.event=D.load,i.assetId=o,i.contentType=c,se.state.status.current(e,c)==se.states.paused&&(s==o&&null!==o||d!==c)){i.event=D.resume,i.assetId=o,i.contentType=c,i.curPos="{{nextTick}}";break}if(u!=o||se.state.status.current(e,c)===se.states.stopped&&l==o&&null!==o||null===s){i.event=D.play,i.curPos="{{nextTick}}";break}break;case"5":case"play":i.event="event_play";break;case"7":case"stop":i.event="event_stop";break;case"57":case"end":case"oncomplete":i.event=D.stop;break;case"49":case"setplayheadposition":case"playheadposition":if(-1<a){var p=function(e,t){if(e&&null!=t&&"stream"!==le({data:e,param:"nol_cadence"})&&"impression"!==le({data:e,param:"nol_cadence"})){t=Math.floor(ue(t,"num")),e=se.state.position.current(e);return{match:t-e<0,currentPos:t,previousPos:e}}return!1}(e,a);if(p.match){i.event=D.rewind,i.curPos=p.currentPos,i.prevPos=p.previousPos,i.p1=i.prevPos-i.curPos;break}if(-1===de.get(e).indexOf("{{nextTick}}")){var m=function(e,t){if(e&&null!=t&&"stream"!==le({data:e,param:"nol_cadence"})&&"impression"!==le({data:e,param:"nol_cadence"})){var a=Math.floor(ue(t,"num")),n=se.state.position.current(e),r=se.state.timeStamp.current(e),i=ue(le({data:e,param:"nol_cmsIntrvlGp"}),"num")||2,r=Math.ceil(re()/1e3-r)||1;0==n&&86400<a&&"nol_cmsoffset"===se.localTimer(e)&&((o=Math.round(re()/1e3).toString().substr(0,t.toString().length))&&(n=parseInt(o)));var o=a-n;return{match:i<o&&o>Math.ceil(1.5*r),currentPos:a,previousPos:n}}return!1}(e,a);if(m.match){i.event=D.forward,i.curPos=m.currentPos,i.prevPos=m.previousPos,i.p1=i.curPos-i.prevPos;break}}if(se.state.status.current(e)===se.states.paused){i.event=D.resume,i.assetId=se.state.asset.current(e),i.contentType=se.type.current(e),i.curPos=a;break}i.event=D.playhead,i.curPos=a}break;case"55":var f=le({data:e,param:le({data:e,param:"nol_timer"})})||le({data:e,param:"nol_fdoffset"});"daypart"===le({data:e,param:"nol_cadence"})&&(ue(f,"num")+le({data:e,param:"nol_timer"})=="nol_pcoffset"?ue(le({data:e,param:"nol_pcTimeCode"}),"num"):ue(le({data:e,param:"nol_fdTimeCode"}),"num")),i.event=D.playhead;break;case"9":case"mute":i.event=D.mute,i.p1=a}}catch(e){ee._listeners.fireEvent("error",{type:"error",msg:"Error in eventsController. Error inferring event - "+t})}return i}},ee=ee||{},L=L||5,t=t||ee.getLS();function ue(e,t){var a;if("num"==t)a=parseInt(e,10),e=isNaN(a)?0:a;else if("bin"==t)e=isNaN(Number(e))?"0":Number(e).toString(2);else if("bool"==t)switch(e.toString().toLowerCase()){case"false":case"no":case"0":case"":e=!1;break;default:e=!0}else"b2n"==t&&(a=parseInt(e,2),e=isNaN(a)?0:a);return e}var F,N,R,V,A=(F=ee,N=t,R={maxRetry:L},t={param:function(e,t){var a="";if(e&&"object"===(void 0===e?"undefined":_typeof(e))&&0<Object.keys(e).length)for(var n in t=t||"",e)e.hasOwnProperty(n)&&(a=a+(""!==a?"&":"")+(t?t+"-":"")+n+"="+e[n]);return a},paramOverride:function(e,t,a){if(e&&t){var t=new RegExp("([&?]+"+t+"=)([^&$]*)","gi"),n=e.match(t);if(n)for(var r,i=0,o=n.length;i<o;i++)r=n[i].substr(0,n[i].indexOf("=")+1)+(a||""),e=e.replace(n[i],r)}return e}},{sendMaskedPing:(V={sendMaskedPing:function(e,t){F.lsReady()?N.contentWindow.postMessage(JSON.stringify({nolSentFromBsdk:!0,eventType:"maskref",data:{url:e}}),N.src):(t=t||0)<R.maxRetry&&setTimeout(function(){V.sendMaskedPing(e,t+1)},300)},request:function(n,r,i){return Fe.NOLBUNDLE.controllers.util.Promise(function(e,t){(r=r||{}).method=r.method||"GET",r.data=r.data||"";var a=new(Fe.XMLHttpRequest||ActiveXObject("MSXML2.XMLHTTP.3.0"));a.open(r.method,n,null==i||i),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.onreadystatechange=function(){3<a.readyState&&e&&e(a)},a.send(r.data)})}}).sendMaskedPing,request:V.request,param:t.param,paramOverride:t.paramOverride}),C={"[":{end:"]",count:0},"{":{end:"}",count:0},"<":{end:/\.\d+,\d+\>/g,count:0}},T={regex:/\|\![\w\W]*?(\!\|)/g,length:2},O=new RegExp(/(.*?)(_content|_ad|_static)?$/i),ae=ae||{},te=te||{},B=B||function(){},G=G||function(){},pe=pe||function(){},x=x||function(){},j=j||function(){},me=me||function(){},U=U||function(){},z=z||function(){},q=q||function(){},ee=ee||Fe.NOLBUNDLE||{},oe=oe||{},de=de||{},se=se||{},re=re||function(){};function fe(e){var t;try{if(null===e||"object"!==(void 0===e?"undefined":_typeof(e))||"isActiveClone"in e)return e;for(var a in t=e instanceof Date?new e.constructor:e.constructor(),e)Object.prototype.hasOwnProperty.call(e,a)&&(e.isActiveClone=null,t[a]=fe(e[a]),delete e.isActiveClone);return t}catch(e){return!1}}function J(e,t,a,n,r){-1===a.indexOf("[")&&-1===a.indexOf("]")&&(!n.val||n.val.length<=0)?r||(ve(e,{type:"100",msg:a+" missing -- "+le({data:e,param:"nol_comment"})}),n.state=!1,n.val=""):"{"===t||"}"===t?n.val=ee.CryptoJS.MD5(n.val.toString()).toString():"<"===t||">"===t?(a=a.match(C["<"].end))?(a=a[0].match(/[\d]+/g),n.val=String(n.val).substr(a[0],a[1])):n.val=function(e,t){var a,n,r,i,o="";if(!e||!t)return e;for(i=t.length,n=0,r=e.length;n<r;n++)o+=0==(a=e.charCodeAt(n)^t.charCodeAt(n%i))?e.charAt(n):String.fromCharCode(a);return o}(String(n.val),le({data:e,param:"nol_xorSeed"})):"("!==t&&")"!==t||(n.val=q(n.val))}function Q(e,t,a){var n,r,i,o,s,l=t.match(/[\[\{<\(]/g),d=le({data:e,param:"nol_xorSeed"})||"",l=l?l.reverse():[],c=t.match(/[\}\]\>\)]/g)||[],u={start:l.length?t.lastIndexOf(String(l[0])):-1,end:c.length?t.indexOf(String(c[0])):t.length};c&&">"===c[0]&&(u.end=t.search(C["<"].end)||t.indexOf(">"));for(var p,m,f,v,g,_,y=(r=t.substring(u.start+1,u.end)).split("||"),u=O.exec(r),h=u&&1<u.length?u[1]:r,P=null,S=ae[e.get("nol_playerId")]||{},b=0,T=y.length;b<T&&(r=y[b],p=(P=O.exec(y[b]))&&2<P.length&&P[2]?P[2].replace("_",""):"",m=e,f=r,v=S[h],g={vidType:(a?a.vidType:null)||p,silent:!0,noClone:!0,end:!!a&&a.end,noEncode:!0},_="",!((i=v&&v.clientField!==f&&!0!==g.end&&(_=se.cms.parse(v,m,g))?_:le({data:m,param:f,vidType:g?g.vidType:""}))&&0<i.length));b++);if(i&&0<i.length&&(s=S[o=(s="string"==typeof r?r.split("_"):r)[0]?s.splice(0,2).join("_"):s]?S[o].encoding:"")&&(l=l.reverse().concat(s.match(/[\[\{<\(]/g)).reverse(),c=c.reverse().concat(s.match(/[\}\]>\)]/g)).reverse()),n={val:i,state:le({data:e,param:"nolPriv_sendData"})},o=l?l.length:0,s=c?c.length:0,0<(s=Math.min(o,s)))for(b=0,T=s;b<T;b++)J(e,l[0]||c[0],t,n,d),l.shift(),c.shift();else!0!==(!!a&&a.silent)&&(!n.val||n.val&&n.val.length<=0)&&(n.state=!1,n.val="",ve(e,{type:100,msg:r+" missing "+le({data:e,param:"nol_comment"})}));return{val:n.val,strManipulate:l,strManiEnd:c}}function M(e,t,a,n){var r,i,o,s,l,d,c,u,p,m,f,v,g,_={val:"",state:le({data:e,param:"nolPriv_sendData"})},y=[],h=[],P=[],S="",b=le({data:e,param:"nol_xorSeed"});if(n=n||{},null!==(l=(t=t||le({data:e,param:"nol_url"})||"").match(T.regex)))for(p=0,m=l.length;p<m;p++)if(r=l[p]){if(y=[],S="",s=0,(o=(i=r.substr(T.length,r.length-2*T.length)).split("+"))&&1<o.length){for(f=0,v=o.length;f<v;f++)if(S=o[f],n.silent=!0,0<(d=Q(e,S,n)).strManipulate.length&&(s=y.length,h=[].concat(d.strManipulate,h)),y[s]=y[s]?y[s]+d.val:d.val,0<d.strManiEnd.length&&d.strManiEnd.length!==h.length){for(P=[].concat(P,d.strManiEnd),_={val:y[s],state:le({data:e,param:"nolPriv_sendData"})},c=0,g=d.strManiEnd.length;c<g;c++)J(e,h[0],S,_,b),h.shift(),P.shift();y[s]=_.val}for(_.val=y.join(""),c=0,g=(u=h.length>=P.length?h:P).length;c<g;c++)J(e,u[0],S,_,b),h.shift(),P.shift()}else _={val:(d=Q(e,i,n)).val,state:le({data:e,param:"nolPriv_sendData"})};t=t.replace(r,_.val)}return t}function ve(e,t,a,n){var r=le({data:e,param:"nolPriv_errorSent"});if(!0!==n&&le({data:e,param:"nolPriv_sendData",val:!1}),!a&&-1!==(!t||r.indexOf(t.type.toString())))return!1;a=t.type+","+q(t.msg),le({data:e,param:"nol_errorMessage",val:a}),ee._listeners.fireEvent("error",{type:"error",msg:a});var a=e.get("nol_errorURL");return a&&(t.msg&&(t.msg=encodeURIComponent(t.msg)),17===t.type&&(a=a.replace("|!(nol_errorMessage)!|",t.msg)),a=M(e,a),j({serverTimeOffset:le({data:e,param:"nolPriv_serverTimeOffset"}),url:a,uoo:le({data:e,param:"nol_useroptout"}),maskRef:le({data:e,param:"nol_rfrmsk"}),method:se.getRequestMethod(e)})),r+=t.type.toString()+",",le({data:e,param:"nolPriv_errorSent",val:r}),!0}function ge(e,t,a,n){var r,i,o,s=!1,l=se.findPlayer(e),d=l.fpSession,c=l.metadataCtrl;n||(u=""===e.get("nol_fdcid")||se.mtvr.isNullFDCid(e)?e.get("nol_pccid"):e.get("nol_fdcid"),e.isProductOf("mtvr")&&-1<["true","1"].indexOf(e.get("nol_rtvodEnabled").toString().toLowerCase())&&"interval"===e.get("nol_cadence")&&""===e.get("nol_rtvod")&&"true"!==e.get("nol_disabled")&&e.get("nol_tsvURL")&&(!G(e,null,!0)||(S=fe(e))&&(p=e,r=t,i=a,me(o=S,{service:"tsv",key:u,url:o.get("nol_tsvURL")},function(){ge(o,r,i,!0)}),me(p,{service:"tsv",key:u,url:p.get("nol_tsvURL")},function(){}),s=!0))),d&&d.allowCookies&&d.appendfData(e);var u,p,m,f=le({data:e,param:"nol_url"})||"",v=le({data:e,param:"nol_playerId"}),g=ue(le({data:e,param:"nol_maxPingCount"}),"num"),_=ue(le({data:e,param:"nol_pingCount"}),"num"),y=!!t&&t.returnLength,h=le({data:e,param:"nol_cadence"}),P=e.isProductOf("mtvr"),l=e.isProductOf(["dcrvideo","dcrstatic"]),n=se.getEventsFilter(e),S=ue(le({data:e,param:"nol_maxLength"}),"num");if(le({data:e,param:"nol_pingCreationTime",val:z(le({data:e,param:"nolPriv_serverTimeOffset"}))}),u=le({data:e,param:"nol_timeSpentViewing"}).content,p=le({data:e,param:"nol_timeSpentViewing"}).ad,d=le({data:e,param:"nol_timeSpentViewing"}).static,U(le({data:e,param:"nol_segmentTimeSpent"})),(!e.isProductOf(["dcrvideo","vrivideo"])||"1"===le({data:e,param:"nol_forceFireOnClose_content"})||!(e.isProductOf(["dcrvideo","vrivideo"])&&0===u.nol_segmentTimeSpent||"dcrstatic"===le({data:e,param:"nol_product"})&&0===d.nol_segmentTimeSpent)||"interval"!==h&&"streamduration"!==h||0!==p.nol_count||0!==p.nol_segmentTimeSpent)&&"false"===le({data:e,param:"nol_disabled"})&&(0===g||_<g)){if(de.setNextTick(e,null,"content"),t=G(e,t)||"stream"===h||"impression"===h||"id3"===le({data:e,param:"nol_product"}),le({data:e,param:"nol_random",val:Math.round(1e9*Math.random())}),(m=(f=M(e,f)).length)<10)return null;if(le({data:e,param:"nolPriv_sendData"})&&t&&!y||0<S&&S<m){if(le({data:e,param:"nol_id3Data"})&&le({data:e,param:"nol_id3Data",val:!1}),B(le({data:e,param:"nol_comment"})," -queued @"+Math.floor(re()/1e3)+", timeOffset == "+le({data:e,param:"nolPriv_serverTimeOffset"})+", DU == "+le({data:e,param:"nol_segmentTimeSpent"})+" -- ",f),n.onSendPing&&(pe(e,n.onSendPing),"true"===le({data:e,param:"nol_disabled"})))return;s||j({serverTimeOffset:le({data:e,param:"nolPriv_serverTimeOffset"}),url:f,prod:le({data:e,param:"nol_product"}),uoo:le({data:e,param:"nol_useroptout"}),maskRef:le({data:e,param:"nol_rfrmsk"}),method:se.getRequestMethod(e)}),a&&a(e),c.metadataURL&&("impression"===h&&l||"episode"===h&&P)&&(c.metadataPing=M(e,c.metadataURL),c.hasMetaPingFired||(j({serverTimeOffset:le({data:e,param:"nolPriv_serverTimeOffset"}),url:c.metadataPing,prod:le({data:e,param:"nol_product"}),maskRef:le({data:e,param:"nol_rfrmsk"}),method:se.getRequestMethod(e)}),B("Metadata Ping -queued @"+Math.floor(re()/1e3)+", timeOffset == "+le({data:e,param:"nolPriv_serverTimeOffset"})+" -- "+c.metadataPing),c.hasMetaPingFired=!0)),le({data:e,param:"nol_viewCount_"+e._currVidType.toLowerCase(),val:"0"}),de.clear(e),te&&te.hasOwnProperty(v)&&te[v].hasOwnProperty("debug")&&"logging"===te[v].debug&&(c=(c=!(c=le({data:e,param:"nol_debugUrl"}))?le({data:e,param:"nol_prefProtocol"})+"://nielsen.guru/validation/query_string.php?":c)+"pli="+v+"&sendPing="+le({data:e,param:"nol_product"})+"&"+f.substring(f.indexOf("?")+1),x(c)),_++,u.nol_segmentTimeSpent=0,u.nol_count=0,p.nol_segmentTimeSpent=0,p.nol_count=0,d.nol_segmentTimeSpent=0,d.nol_count=0,le({data:e,param:"nol_pingStartTimeUTC",val:Math.round(re()/1e3)}),le({data:e,param:"nolPriv_priority",val:0}),le({data:e,param:"nol_pingCount",val:_.toString()}),le({data:e,param:"nol_forceFireOnClose_content",val:"0"});_=De(le({data:e,param:"nol_segmentLength"}));le({data:e,param:"nol_duration",val:new Array(_.length+1).join("0")})}else if(y)return{len:m,fData:f};return null}}var A=A||{},W=[];function H(e,t,a,n){a&&!a.serviceSending[t]?(a.serviceSending[t]=!0,A.request(e.replace("fmt=jsonp","fmt=json"),{method:"GET"}).then(function(e){if(200===parseInt(e.status)){var t={};try{t=JSON.parse(e.response)}catch(e){}t.nol_playerId=a.id,ee._listeners.fireEvent("tsvupdate",t)}else ee._listeners.fireEvent("tsvupdate",{nol_playerId:a.id,nol_rtvodEnabled:!1});n&&n(),function(){try{W.length&&(W.forEach(function(e){e&&e()}),W=[])}catch(e){}}()})):n&&W.push(n)}te=te||{},q=q||function(){},ue=ue||function(){}||function(){},le=le||function(){}||function(){};function K(e,t,a){e=le({data:e,param:"iag_"+t});return void 0!==e&&""!==e?a="&pr=iag."+t+","+q(e):a&&0<a.length&&-1===a.indexOf("&pr=iag")?a="&pr=iag."+t+","+q(a):null==a&&(a=""),a}function _e(e,t){var a,n,r,i,o,s,l,d,c,u,p,m,f,v,g=le({data:e,param:"nol_vidtype"});0<=le({data:e,param:"nol_prod"}).indexOf("iag")&&(a="",n=K(e,"sid",le({data:e,param:"nol_sid",vidType:"content"})),r=K(e,"tfid",le({data:e,param:"nol_tfid",vidType:"content"})),i=K(e,"bcr",le({data:e,param:"nol_clientid",vidType:"content"})),s=K(e,"epi",le({data:e,param:"nol_title"})||le({data:e,param:"nol_title",vidType:"content"})),(o=K(e,"pgm",le({data:e,param:"nol_censuscategory"})||le({data:e,param:"nol_category"})||le({data:e,param:"nol_iagcategory"})))||(o=K(e,"pgm",le({data:e,param:"nol_censuscategory",vidType:"content"})||le({data:e,param:"nol_category",vidType:"content"})||le({data:e,param:"nol_iagcategory",vidType:"content"})))||(o="&pr=iag.pgm,general"),l="&pr=iag.seg,",1<ue(le({data:e,param:"nol_chapter",vidType:"content"}),"num")?l+=le({data:e,param:"iag_seg"})||le({data:e,param:"nol_chapter",vidType:"content"}):l+="1",d=K(e,"pd",d),c=K(e,"oad",c),p=K(e,"fp",p),v=K(e,"cust1",v),a="ad"===t?(u="&pr=iag.brn,"+le({data:e,param:"nol_clientid"}),t="&pr=iag.cte,"+q(le({data:e,param:"nol_adURL"})),g="midroll"===g?"&pr=iag.ap,mid":"postroll"===g?"&pr=iag.ap,post":"&pr=iag.ap,pre",n=K(e,"sid",n),r=K(e,"tfid",r),i=K(e,"bcr",i),u=K(e,"brn",u),t=K(e,"cte",t),n+r+i+(o=K(e,"pgm",o))+(s=K(e,"epi",s))+(l=K(e,"seg",l))+(d=K(e,"pd",d))+u+g+t+(c=K(e,"oad",c))+p+(m=K(e,"pod",m))+(f=K(e,"apt",f))+v):n+r+i+o+s+l+d+c+p+v,le({data:e,param:"nol_iagData",val:a+="&pr=iag.cp,soc"}))}var e=(ee=ee||{}||{}).PLDPR=ee.PLDPR||{},X=X||Fe.NOLBUNDLE,oe=oe||{},de=de||{},se=se||{},E=E||{},k=k||{},re=re||function(){},ue=ue||function(){},le=le||function(){},ye=ye||function(){},Y=Y||function(){},$=$||function(){},he=he||function(){},te=te||{},ie=ie||{},ae=ae||{},m=m||5,Z=Z||null,Pe=Pe||null,B=B||function(){},G=G||function(){},Se=Se||function(){},_e=_e||function(){},be=be||function(){},pe=pe||function(){},x=x||function(){},ve=ve||function(){},j=j||function(){},U=U||function(){},z=z||function(){},q=q||function(){},H=H||function(){},M=M||function(){},I=I||function(){},ge=ge||function(){},fe=fe||function(){},d=d||"cgi-bin/",Te=Te||X.getConfigAddress?X.getConfigAddress():X.getAddress(),u=u||"error";function Ce(e,t){try{var a=le({data:e,param:"nol_playerId"});te&&te.hasOwnProperty(a)&&(!te[a].hasOwnProperty("nol_sessionId")||te[a].hasOwnProperty("forceStreamRegen")&&!0===te[a].forceStreamRegen)&&(t=t||ee.generateGUID(),te[a].nol_sessionId=t,te[a].forceStreamRegen=!1)}catch(e){ee._listeners.fireEvent("error",{type:"error",msg:"Error in calcStreamId - "+e.message})}}function ce(e,t,a,n,r){se.extendfData(e);var i,o=e.get("nol_useroptout"),s="",l=le({data:e,param:{}});if(function(e){var t,a,n,r=null,i="content"==e._currVidType?ue(le({data:e,param:"nol_chnlCountThrshld"}),"num")||m:ue(le({data:e,param:"nol_staticCountThrshld"}),"num")||m,o=e._dataArrObj[e._currVidType],s=e._dataArrObj.count;if(!e._dataArrObj[e._currVidType].hasOwnProperty(e._currAssetid)){if(s[e._currVidType]>=i){for(a in o)if(o.hasOwnProperty(a)){if((n=o[a].nolPriv_priority)<=0){t=a;break}(null===r||n<r)&&(r=n,t=a)}o.hasOwnProperty(t)&&(delete o[t],s[e._currVidType]--)}e._dataArrObj[e._currVidType][e._currAssetid]={nolPriv_priority:0},s[e._currVidType]++}}(e),E=se.getEventsFilter(e),"ad"===e._currVidType.toLowerCase()&&(s="st,a",le({data:e,param:"nol_currSeg",val:"0"})),""===le({data:e,param:"nol_errorURL"})&&le({data:e,param:"nol_errorURL",val:Te+d+u+"?message=|![nol_errorMessage]!|"}),"loadMetadata"===t)for(i in l)l.hasOwnProperty(i)&&-1==="nol_minutes, nol_tagPresence, nol_pingCount, nol_currSeg, nol_segmentTimeSpent, nol_cumeTimeSpent, nol_count".indexOf(i)&&le({data:e,param:i,val:$({data:e,param:i})||""});for(i in a)a.hasOwnProperty(i)&&le({data:e,param:String(i),val:String(a[i])});e.set("nol_useroptout",o),le({data:e,param:"nolPriv_sendData",val:!0}),le({data:e,param:"nol_davState",val:"0"}),le({data:e,param:"nol_highWM",val:"0"}),le({data:e,param:"nol_iagData",val:""}),le({data:e,param:"nol_disabled",val:"false"}),le({data:e,param:"nol_sendQual",val:$({data:e,param:"nol_sendQual"})||""}),le({data:e,param:"nolPriv_assetid",val:""}),e.set("nolPriv_prevEvent",""),"S"===$({data:e,param:"nol_segmentPrefix"})&&le({data:e,param:"nol_segmentPrefix",val:"S"}),le({data:e,param:"nol_c3"})||le({data:e,param:"nol_c3",val:s}),r||("content"===e._currVidType.toLowerCase()&&Ce(e),le({data:e,param:"nol_applyViewInc",val:"1"}),(!le({data:e,param:"nol_minutes"})||"daypart"!==le({data:e,param:"nol_cadence"})&&"dcrstatic"!==le({data:e,param:"nol_product"})||"dcrstatic"===le({data:e,param:"nol_product"})&&"stream"===le({data:e,param:"nol_cadence"}))&&(Y(e),le({data:e,param:"nol_pingCount",val:0})),""!==(r=le({data:e,param:"nol_adLoadType",vidType:"content"}))&&null!=r&&pe(e,E.onAdLoadFlag),function(e){try{var t=le({data:e,param:"nol_playerId"});if(t&&ee._players&&ee._players.hasOwnProperty(t)){var a,n=ee._players[t];if(n&&0<Object.keys(n.ottStatusObj).length)for(a in n.ottStatusObj)le({data:e,param:a,val:n.ottStatusObj[a],vidType:"content"})}}catch(e){ee._listeners.fireEvent("error",{type:"error",msg:"Error in populateOttStatus"+e})}}(e),n&&n.resetViewability&&n.resetViewability(e))}function Oe(e,t){te[t].bReInit||(te[t].bReInit=!0,te[t].eventQueue=[],e&&te[t].eventQueue.push(e),I(Z))}function Le(e,t,a){(t&&!0===t.flush||!("dcrstatic"===le({data:e,param:"nol_product"})&&"stream"!==le({data:e,param:"nol_cadence"})||e.isProductOf("vrivideo")))&&("content"===le({data:e,param:"nol_ac"})&&"interval"===e.get("nol_cadence")&&0<le({data:e,param:"nol_segmentTimeSpent"})||"streamduration"===le({data:e,param:"nol_cadence"})&&0<e.get("nol_segmentTimeSpent","ad")||"id3"===le({data:e,param:"nol_product"})&&le({data:e,param:"nol_id3Data"})||"dcrstatic"===le({data:e,param:"nol_product"})&&"stream"===le({data:e,param:"nol_cadence"})||"postroll"===le({data:e,param:"nol_vidtype"})&&"interval"===le({data:e,param:"nol_cadence"})||t&&!0===t.flush&&e.isProductOf("dcrvideo")&&"interval"===e.get("nol_cadence")&&0<e.get("nol_segmentTimeSpent")||t&&!0===t.flush&&e.isProductOf("dcrvideo")&&"streamduration"===e.get("nol_cadence")&&"ad"===e.get("nol_ac")&&0<e.get("nol_segmentTimeSpent","ad")||t&&!0===t.flush&&e.isProductOf("dcrstatic")&&"interval"===e.get("nol_cadence")&&0<e.get("nol_segmentTimeSpent","static"))&&("content"===le({data:e,param:"nol_ac"})||t&&!0===t.save?ge(e,{save:!0},a&&a.onPingFired?a.onPingFired:null):ge(e,null,a&&a.onPingFired?a.onPingFired:null),le({data:e,param:"nolPriv_now",val:0}))}function me(t,a,e){var n,r=se.findPlayer(t),i=se.getEventsFilter(t),o=r.oServiceCall[a.service],s=a.url,l=a.key;if(a.evntCB=le({data:t,param:t.serviceFlag[a.service].callback}),a.callBack=function(e){!function(e,t,a){var n,r={},i=se.getEventsFilter(e);if(le({data:e,param:"nol_playerId"})===t.target.nol_playerId){for(n in t.target)t.target.hasOwnProperty(n)&&(le({data:e,param:n,val:t.target[n]}),r[n]=t.target[n]);var o,s=se.findPlayer(e);s&&(o=void 0!==s.oServiceCall[a.service]&&s.oServiceCall[a.service].hasOwnProperty("status")?s.oServiceCall[a.service].status:"undefined",s.oServiceCall[a.service]={status:"complete",prevStatus:o,station:a.key,data:r},s.serviceSending[a.service]=!1);s=e.get("nol_serviceFilter");pe(e,s?s[a.service]:i),"true"===le({data:e,param:"nol_disabled"})||e.serviceFlag[a.service].need&&(le({data:e,param:"nol_davState",val:"1"}),e.serviceFlag[a.service].need=!1,t.target.hasOwnProperty("nol_fdTimeCode")&&"daypart"===le({data:e,param:"nol_cadence"})&&(i=ue(t.target.nol_fdTimeCode,"num"),a=ue(le({data:e,param:"nol_queueTime"}),"num"),le({data:e,param:"nol_queueTime",val:a+i})),Se(le({data:e,param:"nol_queueTime"}),e))}}(t,e,a)},e)return ee._listeners.addListener(a.evntCB,a.callBack,!0,r),void H(M(t,s),a.service,r,e);if(!o&&l&&s&&0<s.length)"stnupdate"===a.evntCB&&(void 0===r.oServiceCall[a.service]||void 0===r.oServiceCall[a.service].status||"init"!==r.oServiceCall[a.service].status&&"complete"!==r.oServiceCall[a.service].status)&&(r.oServiceCall[a.service]={status:"init",station:null,data:null}),ee._listeners.addListener(a.evntCB,a.callBack,!0,r),H(M(t,s),a.service,r);else if(!o||"init"!==o.status)if(o&&"complete"===o.status&&l!==o.station)ee._listeners.addListener(a.evntCB,a.callBack,!0,r),H(M(t,s),a.service,r);else if(o&&"complete"===o.status&&l===o.station){for(n in o.data)o.data.hasOwnProperty(n)&&le({data:t,param:n,val:o.data[n]});k&&k[r.id]&&k[r.id][a.service]?pe(t,k[r.id][a.service]):pe(t,i),"true"===le({data:t,param:"nol_disabled"})||t.serviceFlag[a.service].need&&(le({data:t,param:"nol_davState",val:"1"}),t.serviceFlag[a.service].need=!1,Se(le({data:t,param:"nol_queueTime"}),t))}else ee._listeners.fireEvent(a.evntCB,a),Fe.setTimeout(function(){me(t,a)},1e3)}function we(e,t,a){var n,r,i,o;return e.staticIFrameFlag||(ee._listeners.fireEvent("error",{type:"error",msg:"Error in "+t+' event - enableStaticInIframe flag not set to "true" in config.'}),n=!0),ee.browser.isWithinIFrame()||(ee._listeners.fireEvent("error",{type:"error",msg:"Error in "+t+" event - DCR Static implementation is not within an iframe."}),r=!0),ee.PLDCR&&ee.PLDCR.dcrTimer?void 0===ee.PLDCR.dcrTimer.isActive&&"stoptimer"===t&&(ee._listeners.fireEvent("error",{type:"error",msg:"Error in "+t+' event - Timer not activated, please call ggPM event "starttimer" before calling "'+t+'".'}),i=!0):(ee._listeners.fireEvent("error",{type:"error",msg:"Error in "+t+' event - Timer not instantiated, please call ggPM event "staticstart" before calling "'+t+'".'}),i=!0),-1===["focus","touchstart","blur"].indexOf(a)&&(ee._listeners.fireEvent("error",{type:"error",msg:"Error in "+t+" event - Invalid event type: "+a+"."}),o=!0),n||r||i||o}var ee=ee||{},le=le||function(){},se=se||{},ae=ae||{},ge=ge||function(){},pe=pe||function(){},ce=ce||function(){},ie=ie||{},ve=ve||function(){},ue=ue||function(){},te=te||{},H=H||function(){},me=me||function(){},Se=Se||function(){},re=re||function(){},he=he||function(){},be=be||function(){},Y=Y||function(){},Oe=Oe||function(){},_e=_e||function(){},Pe=Pe||null,ne={dtvr:(new function(){return this.Dtvr=function(){var B={current:{metaData:[]},new:null,index:0};return this.preHandleGgpm=null,this.postHandleGgpm=null,this.preQueueGgpm=function(){},this.postQueueGgpm=function(){B.new&&("object"===_typeof(B.new._param3)&&null!==B.new._param3&&(B.current.metaData[B.index]=B.new._param3,B.index++),"string"==typeof B.new._param3&&-1!==B.new._param3.indexOf("www.nielsen.com")&&(B.current.id3=B.new._param3),B.current.prevEvent=B.new.prevEvent,B.new=null)},this.handleGgpm=function(a,e,n){var t,r,i,o,s,l,d,c=e.evtInfo,u=c.param1,p=c.param3||(u.hasOwnProperty("param3")?u.param3:u),m=c.param2||"",f=le({data:a,param:"nol_playerId"}),v=ae[f]||{},g=le({data:a,param:"nol_enableFilterMap"}),_=c.eventType.toString().toLowerCase(),y=se.getEventsFilter(a),h=se.findPlayer(a),P=ue(le({data:a,param:"nolPriv_id3Count"}),"num"),S=le({data:a,param:"nolPriv_serverTimeOffset"}),b=le({data:a,param:"nol_prod"}),T={filters:{onId3PcCidChanged:!1,onId3FdCidChanged:!1},count:0,filterType:"old"},C="nol_assetid",O={},L={onCalcStart:function(e,t){a.isProductOf(["mtvr","id3"])&&n&&n.tickViewability&&"function"==typeof n.tickViewability?n.tickViewability(a,e,t):t&&t()},onPingFired:function(e){n&&n.resetViewability&&n.resetViewability(e),e.isProductOf(["mtvr","id3"])&&n&&n.tickViewability&&"function"==typeof n.tickViewability&&n.tickViewability(e,e.get("nolPriv_currPos"))}};switch(B.new||(B.new={},B.new._param3=p),_){case"3":case"15":case"loadmetadata":var w=String(se.cms.parse(v.nol_assetid,a,{metadata:p,defaultKey:"nol_assetid",silent:!0})),E=!0===le({data:a,param:"nol_onCompleteFired"});if(p.nol_ac=a._currVidType,ue(le({data:a,param:"nol_serverTime"}),"num")+86400<Math.round(re()/1e3)+S){he(a,L.onPingFired),Oe(e,le({data:a,param:"nol_playerId"}));break}if(("15"===_||"loadmetadata"===_)&&"id3"===le({data:a,param:"nol_product"})&&le({data:a,param:"nol_id3Data"})){ge(a,null,L.onPingFired||null);break}if(a&&a._dataArrObj&&a._dataArrObj.content&&"object"===_typeof(a._dataArrObj.content)&&!a._dataArrObj.content[0]&&!a._dataArrObj.content[a._currAssetid]){ce(a,"loadMetadata",p,n),le({data:a,param:"nol_disabled",val:"true"});break}var k=w!==le({data:a,param:C});if(B.assetIdChanged=k,"false"!==le({data:a,param:"nol_disabled"})||E||k||B.new.noEndErr||(B.current.metaData.length?(F=function(e,t){for(var a=Object.getOwnPropertyNames(e),n=Object.getOwnPropertyNames(t),r=[],i=(a.length>n.length?a:n).slice(),o=0;o<i.length;o++){var s=i[o];e[s]!==t[s]&&r.push(s)}return r.length?"End event must be called before loading new metadata. The following parameters will not be updated: "+r.join():""}(B.current.metaData[B.index-1],p))&&ve(a,{type:17,msg:F},!0,!0):ve(a,{type:17,msg:"End event must be called before loading new metadata."},!0,!0),B.new.noEndErr=!0),k)for(d in"ad"!==le({data:a,param:"nol_ac"})&&he(a,L.onPingFired),p)p.hasOwnProperty(d)&&le({data:a,param:String(d),val:String(p[d])});le({data:a,param:"nol_pingStartTimeUTC",val:Math.round(re()/1e3)}),-1!==b.indexOf("iag")&&_e(a,a._currVidType,v);break;case"5":case"play":if(p[N=v.nol_channelName?v.nol_channelName.clientField:"nol_channelName"]&&0<p[N].length)for(d in p)p.hasOwnProperty(d)&&le({data:a,param:d,val:p[d]});break;case"55":case"sendid3":var I=u.toString().split("/"),D=I[1],A=I[2],M=se.mtvr.fdChanged(a,A),w=se.mtvr.pcChanged(a,D),E=A===le({data:a,param:"nol_cidNull"}),F=se.mtvr.isPCTag(a),k=!0===le({data:a,param:"nol_onCompleteFired"}),N="1"===a.get("nol_fdrtvod");if("15"===B.current.prevEvent||"loadmetadata"===B.current.prevEvent){var R=B.current.metaData[B.index-1];if(k){if(M||w&&E||w&&!E&&(N||F))le({data:a,param:C,val:-1}),Y(a),be({data:a,savedVals:["nol_nielsenAdSupportFlg"],savedReplayParams:{}},n);else if(!B.assetIdChanged)for(d in R)R.hasOwnProperty(d)&&le({data:a,param:String(d),val:String(R[d])});le({data:a,param:"nol_onCompleteFired",val:!1})}a&&a._dataArrObj&&a._dataArrObj.content&&"object"===_typeof(a._dataArrObj.content)&&!a._dataArrObj.content[0]&&!a._dataArrObj.content[a._currAssetid]&&(ce(a,"loadMetadata",R,n),le({data:a,param:"nol_disabled",val:"true"}))}"57"!==B.current.prevEvent&&"end"!==B.current.prevEvent&&"oncomplete"!==B.current.prevEvent||(M||w&&E||w&&!E&&(N||F))&&Y(a);var I=!1,D=!1;if(("object"===(void 0===u?"undefined":_typeof(u))&&0<Object.keys(u).length||"string"==typeof u&&0<u.length)&&((!0===le({data:a,param:"nol_onCompleteFired"})&&h&&h.getPauseQueueCount&&0<h.getPauseQueueCount()||!0===le({data:a,param:"nol_onCompleteFired"})&&h&&!h.getPauseQueueCount)&&ee._listeners.fireEvent("flushPauseEventQueue"),"object"===(void 0===u?"undefined":_typeof(u))))for(l=0;l<u.length;l+=1)if(u[l].key&&"PRIV"===u[l].key){u=u[l].info;break}if(249!==(A=u.toString()).length&&(B.id3LengthErr||(ve(a,{type:17,msg:"ID3 tag length is not 249. ID3 Tag: "+A},!0,!0),Fe.console&&Fe.console.warn&&Fe.console.warn("Warning: ID3 tag length is not 249."),B.id3LengthErr=!0)),u={},(r=A.split("/")).length<ue(Pe.nol_breakout,"num"))return;for(d in(86400<parseInt(r[4])||86400<parseInt(r[5]))&&(B.offsetErr||(ve(a,{type:17,msg:"Invalid offset value, offsets received - PC: "+r[4]+", FD: "+r[5]},!0,!0),B.offsetErr=!0)),Pe)Pe.hasOwnProperty(d)&&(u[d]=r[Pe[d]],"nol_breakout"===d&&(u[d]=r[ue(Pe[d],"num")].substr(0,2)),O[d]=u[d]);if(!u||le({data:a,param:"nol_tsvBreakoutMap"})&&-1===le({data:a,param:"nol_tsvBreakoutMap"}).enable.indexOf(u.nol_breakout)||-1===u.nol_nWebAddress.indexOf("nielsen.com")||u.nol_fdcid===le({data:a,param:"nol_cidNull"})&&u.nol_pccid===le({data:a,param:"nol_cidNull"}))return;for(a._currVidType="content",s=0,l=g.length;s<l;s+=1)t=v[g[s]]?v[g[s]].clientField:g[s],O[g[s]]=u[t]||le({data:a,param:g[s]});if(O.nol_vidtype="content",pe(a,y.onId3Detected,O),"false"!==O.nol_disabled||"nol_cmsoffset"===le({data:a,param:"nol_timer"}))return;"daypart"===le({data:a,param:"nol_cadence"})&&(!(k=le({data:a,param:"nol_assetid"})||a._currAssetid)&&u.nol_fdcid&&u.nol_fdcid!==le({data:a,param:"nol_cidNull"})?a._currAssetid=u.nol_fdcid:!a._currAssetid&&k&&(a._currAssetid=k)),u.nol_ac=a._currVidType,u.nol_assetid=le({data:a,param:"nol_assetid"})||a._currAssetid,0<P&&(-1!==le({data:a,param:"nol_product"}).indexOf("id3")||-1!==le({data:a,param:"nol_product"}).indexOf("mtvr"))&&(u.nol_pccid!==le({data:a,param:"nol_cidNull"})&&u.nol_pccid!==le({data:a,param:"nol_pccid"})||u.nol_fdcid!==le({data:a,param:"nol_cidNull"})&&u.nol_fdcid!==le({data:a,param:"nol_fdcid"}))&&(M||w&&E||w&&!E&&(N||F))&&ge(a,null,L.onPingFired,!0);var V,E=se.mtvr.pcChanged(a,u.nol_pccid),N=se.mtvr.fdChanged(a,u.nol_fdcid);if(E&&(se.mtvr.isPCTag(a)||se.mtvr.isTransPing(a))&&(T.filters.onId3PcCidChanged=!0,T.count+=1,n&&n.startViewability(a),(N||se.mtvr.isNullFDCid(a))&&a.set("nol_id3Seq",0)),N&&(se.mtvr.isFDTag(a)||se.mtvr.isTransPing(a))&&(T.filters.onId3FdCidChanged=!0,T.count+=1,n&&n.startViewability(a),a.set("nol_id3Seq",0)),N&&se.mtvr.isPCTag(a)&&(I=!0),""===a.get("nol_fdrtvod")||"0"===a.get("nol_fdrtvod")||!se.mtvr.isPCTag(a)&&!se.mtvr.isFDTag(a)||se.mtvr.isNullPCCid(a)||""===a.get("nol_pccid")||se.mtvr.isNullFDCid(a)||""===a.get("nol_fdcid")||!E||(D=!0,se.mtvr.isFDTag(a)&&y&&y.onId3FdCidChanged&&pe(a,y.onId3FdCidChanged)),T.count){if(ce(a,"sendID3",u,n),!T.filters.onId3FdCidChanged&&le({data:a,param:"nol_fdcid"})!=le({data:a,param:"nol_cidNull"})||-1===le({data:a,param:"nol_tsvBreakoutMap"}).enable.indexOf(u.nol_breakout)||(a.serviceFlag.tsv.need=!0),0<T.count)for(d in T.filters)if(T.filters[d]&&(pe(a,y[d]),"true"===le({data:a,param:"nol_disabled"})))return;if(y.onComplete&&(pe(a,y.onComplete),"true"===le({data:a,param:"nol_disabled"})))return}else{for(d in u)u.hasOwnProperty(d)&&le({data:a,param:d,val:u[d]});"true"===le({data:a,param:"nolPriv_enableDtvr"})&&("true"===le({data:a,param:"nol_disabled"})&&le({data:a,param:"nol_disabled",val:"false"}),le({data:a,param:"nolPriv_enableDtvr",val:"false"}),a&&a._dataArrObj&&a._dataArrObj.content&&"object"===_typeof(a._dataArrObj.content)&&a._dataArrObj.content[a._currAssetid]&&void 0!==a._dataArrObj.content[a._currAssetid].nol_davty)&&(null!=(F=le({data:a,param:"nol_defaults"}).nol_davty)&&le({data:a,param:"nol_davty",val:F}))}if((N&&se.mtvr.isFDTag(a)||E&&se.mtvr.isPCTag(a))&&a.isProductOf("mtvr")&&"impression"===a.get("nol_cadence")&&"false"===a.get("nol_disabled")&&(V=te[f].nolPriv_newMTVRStreamId,te[f].nolPriv_newMTVRStreamId=V&&te[f].restEvtTimestamp==e.timeStamp?V:ee.generateGUID(),se.mtvr.resetTagSession(a,te[f].nolPriv_newMTVRStreamId),te[f].restEvtTimestamp=e.timeStamp,ee._listeners.fireEvent("debug",{type:"debug",msg:a.get("nol_comment")+" new mtvr session is "+V})),!a.isProductOf("mtvr")&&!a.isProductOf("id3")||"false"!==a.get("nol_disabled")||te[f].restEvtTimestamp==e.timeStamp||(V=te[f].nolPriv_newMTVRStreamId)&&V!==a.get("nol_sessionId","content")&&se.mtvr.resetTagSession(a,V),le({data:a,param:"nol_id3Raw",val:A}),(a.serviceFlag.tsv.need||I||D)&&-1!=="|mtvr|,|dprid3|,|id3|".indexOf("|"+le({data:a,param:"nol_product"})+"|")&&"false"===a.get("nol_disabled")&&(-1<["true","1"].indexOf(a.get("nol_rtvodEnabled").toString().toLowerCase())&&a.set("nol_rtvod",""),i=!D&&(I||!0!==T.filters.onId3PcCidChanged||se.mtvr.isNullPCCid(a))?le({data:a,param:"nol_fdcid"}):le({data:a,param:"nol_pccid"}),a.get("nol_tsvURL")&&me(a,{service:"tsv",key:i,url:le({data:a,param:"nol_tsvURL"})})),(a.isProductOf("id3")||a.isProductOf("mtvr")&&"interval"===a.get("nol_cadence")&&"false"===a.get("nol_disabled"))&&u.nol_watermark&&0<String(u.nol_watermark).length&&(I=le({data:a,param:"nol_id3Data"}),i=Math.round(re()/1e3+S),o=le({data:a,param:"nol_id3Seq"})||0,I?le({data:a,param:"nol_id3Data",val:I+="|"+i+","+le({data:a,param:"nol_id3Raw"})}):(le({data:a,param:"nol_id3Data",val:o+":"+le({data:a,param:"nol_clocksrc"})+":"+le({data:a,param:"nol_tsvFlag"})+":"+i+","+le({data:a,param:"nol_id3Raw"})}),le({data:a,param:"nol_id3Seq",val:ue(o,"num")+1,vidType:"content"})),a.isProductOf("id3")))return 0<P&&ge(a,{returnLength:!0},L.onPingFired),le({data:a,param:"nolPriv_id3Count",val:P+=1}),le({data:a,param:"nol_davState",val:"1"}),void(B.new.prevEvent=_);if(le({data:a,param:"nolPriv_id3Count",val:P+=1}),o=le({data:a,param:le({data:a,param:"nol_timer"})})||le({data:a,param:"nol_fdoffset"}),"daypart"===le({data:a,param:"nol_cadence"})&&(o=ue(o,"num"),o+="nol_pcoffset"==le({data:a,param:"nol_timer"})?ue(le({data:a,param:"nol_pcTimeCode"}),"num"):ue(le({data:a,param:"nol_fdTimeCode"}),"num")),a.serviceFlag.tsv.need)le({data:a,param:"nol_queueTime",val:o});else{if("true"===le({data:a,param:"nol_disabled"}))return;Se(o,a,L),le({data:a,param:"nol_davState",val:"1"})}(N&&se.mtvr.isFDTag(a)||E&&se.mtvr.isPCTag(a))&&(se.mtvr.isPCTag(a)&&"false"===a.get("nol_disabled")?n&&n.tickViewability(a,u.nol_pcoffset):se.mtvr.isFDTag(a)&&"false"===a.get("nol_disabled")&&n&&n.tickViewability(a,u.nol_fdoffset));break;case"57":case"end":case"oncomplete":"static"!==le({data:a,param:"nol_ac"})&&(a._currVidType="content"),y.onEndDetected&&"false"===a.get("nol_disabled")&&pe(a,y.onEndDetected),le({data:a,param:"nol_forceFireOnClose_content",val:"1"}),"false"!==le({data:a,param:"nol_disabled"})&&"id3"!==le({data:a,param:"nol_product"})||he(a,L.onPingFired),le({data:a,param:"nol_onCompleteFired",val:!0}),te[f].forceStreamRegen=!0,"sessionReset"!==m&&h.disablePauseTimeout()}B.new.prevEvent=_},this},this}).Dtvr()};function Ee(a,e,n){var t=le({data:a,param:"nol_playerId"});if(t===e.id)if(e.evtInfo&&void 0!==e.evtInfo.eventType&&null!==e.evtInfo.eventType&&""!==e.evtInfo.eventType&&(!e.evtInfo.hasOwnProperty("param1")||null!==e.evtInfo.param1&&void 0!==e.evtInfo.param1)){var r,i,o,s,l,d,c,u=e.evtInfo,p=u.param1,m=u.param3||(p.hasOwnProperty("param3")?p.param3:p),f=u.param2||"",v=ue(le({data:a,param:"nolPriv_id3Count"}),"num"),g=le({data:a,param:"nol_enableFilterMap"}),_={filters:{onId3PcCidChanged:!1,onId3FdCidChanged:!1},count:0,filterType:"old"},y=se.getEventsFilter(a),h=le({data:a,param:"nol_prod"}),P={},S=u.eventType.toString(),b=le({data:a,param:"nolPriv_serverTimeOffset"}),T=ae[t]||{},C=T.nol_vidtype?T.nol_vidtype.clientField:"nol_vidtype",O=T.nol_tagSrc?T.nol_tagSrc.clientField:"nol_tagSrc",L=T.nol_ac?T.nol_ac.clientField:"nol_ac",w=T.nol_linearAdLoadFlag?T.nol_linearAdLoadFlag.clientField:"nol_linearAdLoadFlag",E=m[C]?m[C].toString().toLowerCase():m.type?m.type.toString().toLowerCase():"",k="nol_assetid",I=se.findPlayer(a),D=I.metadataCtrl,A={};E&&e.timeStamp&&!ie[e.timeStamp]&&-1==["static","content","ad","preroll","postroll","midroll"].indexOf(E.toLowerCase())&&(ee._listeners.fireEvent("error",{type:"error",msg:"Error in handleGgpm - Invalid content type param"}),ie[e.timeStamp]=ve(a,{type:101,msg:"Invalid content type param in ggPM"},!0,!0));var M={onTick:function(e){!a.isProductOf(["mtvr","id3"])&&n&&n.tickViewability&&"function"==typeof n.tickViewability&&n.tickViewability(a,e)},onCalcStart:function(e,t){a.isProductOf(["mtvr","id3"])&&n&&n.tickViewability&&"function"==typeof n.tickViewability?n.tickViewability(a,e,t):t&&t()},onPingFired:function(e){n&&n.resetViewability&&n.resetViewability(e),e.isProductOf(["mtvr","id3"])&&n&&n.tickViewability&&"function"==typeof n.tickViewability&&n.tickViewability(e,e.get("nolPriv_currPos"))}},S=S.toLowerCase(),F=function(e,t,a,n,r){var i=null,o=Math.round(re(e)/1e3);try{e&&(de.isEnabled(e)&&(i=oe.inferEvent(t.currEvtType,e,t._param1,o,t._param3))&&(i.event!==oe.events.play&&se.state.set(e,i),de.preProcess(e,i)),t.currEvtType&&("5"===t.currEvtType.toString()&&"6"===e.get("nolPriv_prevEvent")&&"st,a"===e.get("nol_c3")&&"false"===e.get("nol_disabled")&&"dcrvideo"===e.get("nol_product")&&"streamduration"===e.get("nol_cadence")&&(ie[a.timeStamp]=ve(e,{type:18,msg:"Event 6 -> 5 detected in ad."},!0,!0)),e.set("nolPriv_prevEvent",t.currEvtType.toString().toLowerCase()),e.set("nolPriv_prevEventState",t.eventState?t.eventState.toString().toLowerCase():"")),""===se.cms.parse(r.nol_adobeId,e,{metadata:t._param1,defaultKey:"nol_adobeId",silent:!0})&&""===se.cms.parse(r.nol_adobeSessionId,e,{metadata:t._param1,defaultKey:"nol_adobeSessionId",silent:!0})&&!n.isAdobe||(n.disablePauseTimeout(),n.isAdobe=!0))}catch(e){ee._listeners.fireEvent("error",{type:"error",msg:"Error in ggpmPreProc(). Error preprocessing event - "+e.message})}return{inferredEvent:i,timestamp:o}}(a,{currEvtType:S,_param1:p,eventState:f,_param3:m},e,I,T),N=le({data:a,param:"nol_linearAdLoadFlag",vidType:a._currVidType});"object"===_typeof(e.evtInfo.param1)&&e.evtInfo.param1.adModel&&-1==["0","1","2"].indexOf(e.evtInfo.param1.adModel)&&(-1<["0","1","2"].indexOf(N)?e.evtInfo.param1.adModel=N:e.evtInfo.param1.adModel=le({data:a,param:"nol_linearAdLoadFlag"})),S="3"===S.toLowerCase()?"15":S.toLowerCase();var R=fe(e),V=D.pageURL,B=D.pageTitle,G=D.evalPageData(),N=G.pageUrl,G=G.pageTitle;switch(N===V&&G===B||(D.pageURL=N,D.pageTitle=G,D.handleMetadataPingReset(),te[t].nol_pageURLmeta=D.pageURL,te[t].nol_pageTitle=D.pageTitle),S){case"3":case"14":case"15":case"loadmetadata":case"staticstart":case"pauseloadmeta":if("object"===_typeof(e.evtInfo.param1)&&-1==["0","1","2"].indexOf(e.evtInfo.param1.adModel)&&(e.evtInfo.param1.adModel=le({data:a,param:"nol_linearAdLoadFlag"})),("14"===S||"staticstart"===S)&&"dcrstatic"!==le({data:a,param:"nol_product"}))return;if("14"!==S&&"staticstart"!==S&&"dcrstatic"===le({data:a,param:"nol_product"}))return;if("pauseloadmeta"===S&&a.isProductOf("vrivideo"))return;"14"!==S&&"staticstart"!==S||"dcrstatic"!==le({data:a,param:"nol_product"})||!I.staticIFrameFlag||ee.browser.isWithinIFrame()||e.timeStamp&&!ie[e.timeStamp]&&(ee._listeners.fireEvent("error",{type:"error",msg:"DCR Static not in iFrame, but enableStaticInIframe is set to true in config"}),ie[e.timeStamp]=ve(a,{type:17,msg:"DCR Static not in iFrame, but enableStaticInIframe is set to true in config"},!0,!0));var x=","+le({data:a,param:"nol_contentType"}),j=a._currVidType,U=(le({data:a,param:"nolPriv_prevEvent"}),le({data:a,param:"nol_currPos"}),E&&-1!==x.indexOf(","+E.toLowerCase())?"content":"dcrstatic"===le({data:a,param:"nol_product"})?"static":"ad");if(a._currVidType=U,j===a._currVidType&&!a.get("nolPriv_forcedContent")||(n&&n.resetViewability(a),a.set("nolPriv_forcedContent",!1)),ne.dtvr&&("15"===S||"loadmetadata"===S)&&a.isProductOf(["mtvr","id3"])&&"content"===a._currVidType){ne.dtvr.handleGgpm(a,R,n);break}"ad"===j&&"content"===a._currVidType&&a.isProductOf("dcrvideo")&&"interval"===a.get("nol_cadence")&&a.set("nolPriv_currPos","");var x=null,z=null,U=String(se.cms.parse(T.nol_assetid,a,{metadata:m,defaultKey:"nol_assetid",silent:!0}));("ad"===le({data:a,param:"nol_ac"})&&0<le({data:a,param:"nol_segmentTimeSpent"})&&"streamduration"===le({data:a,param:"nol_cadence"})||"stream"===le({data:a,param:"nol_cadence"})&&"dcrstatic"===le({data:a,param:"nol_product"})||"dcrstatic"===le({data:a,param:"nol_product"})&&String(a._currAssetid)!==U)&&he(a,M.onPingFired);j=!0===a.get("nol_onCompleteFired");if(!0===le({data:a,param:"nol_onCompleteFired"})?("content"!==a._currVidType&&"static"!==a._currVidType||("content"===a._currVidType.toLowerCase()&&te[t].hasOwnProperty("forceStreamRegen")&&!0===te[t].forceStreamRegen&&Ce(a),le({data:a,param:k,val:-1}),"content"===a._currVidType?(x=se.state.clone(a),z=de.clone(a),be({data:a,savedVals:["nol_nielsenAdSupportFlg"],savedReplayParams:A},n)):be({data:a,resetStatic:!0},n)),le({data:a,param:"nol_onCompleteFired",val:!1})):"14"!==S&&"staticstart"!==S||"stream"!==le({data:a,param:"nol_cadence"})||(le({data:a,param:k,val:-1}),be({data:a},n)),"ad"===a._currVidType&&a._dataArrObj[a._currVidType].hasOwnProperty(a._currAssetid)&&(q=De(le({data:a,param:"nol_segmentLength"})),le({data:a,param:"nol_minutes",val:q}),le({data:a,param:k,val:-1}),le({data:a,param:C,val:E}),"1"!==le({data:a,param:"nol_nielsenAdSupportFlg",vidType:"content"})&&le({data:a,param:"nol_nielsenAdSupportFlg",val:"1",vidType:"content"})),a._currAssetid=U&&"daypart"===le({data:a,param:"nol_cadence"})||"stream"!==le({data:a,param:"nol_cadence"})&&"dcrstatic"===le({data:a,param:"nol_product"})?U:a._currAssetid,m.nol_ac=a._currVidType,ue(le({data:a,param:"nol_serverTime"}),"num")+86400<Math.round(re()/1e3)+b)return he(a,M.onPingFired),void Oe(e,le({data:a,param:"nol_playerId"}));for(l=0,d=g.length;l<d;l+=1)r=T[g[l]]?T[g[l]].clientField:g[l],P[g[l]]=String(m[r]||"");q=U||le({data:a,param:"nolPriv_assetid"}),"15"!==S&&"loadmetadata"!==S||"id3"!==le({data:a,param:"nol_product"})||!le({data:a,param:"nol_id3Data"})||ge(a,null,M.onPingFired||null);U=q!==le({data:a,param:k})||a&&a._dataArrObj&&a._dataArrObj.content&&"object"===_typeof(a._dataArrObj.content)&&!a._dataArrObj.content[0];if(pe(a,y.onCmsDetected,P),"false"!==P.nol_disabled||!m)return void("cms"!==a._currTagSrc&&(U?(ce(a,"loadMetadata",m,n),le({data:a,param:"nol_disabled",val:"true"})):se.updateMetadata(a,m,T,{inferred:!0}),"15"!==S&&"loadmetadata"!==S||"id3"!==le({data:a,param:O,vidType:"content"})&&!a.isProductOf("mtvr")||!0===le({data:a,param:"nolPriv_dtvrHybrid",vidType:"content"})||le({data:a,param:"nolPriv_dtvrHybrid",val:!0,vidType:"content"})));if("static"===a._currVidType&&"dcrstatic"===le({data:a,param:"nol_product"})&&ee._listeners.fireEvent("updateCmbStaticPage",{evtInfo:u,plid:t}),q!==le({data:a,param:k})){"ad"!==le({data:a,param:"nol_ac"})&&he(a,M.onPingFired);var q=le({data:a,param:k});if(ce(a,"loadMetadata",m,n),q&&!j&&"content"===a._currVidType.toLowerCase()&&a.isProductOf("dcrvideo")&&"impression"===a.get("nol_cadence")&&a.set("nolPriv_resetSession",!0),0<Object.keys(A).length){for(var J in A)A.hasOwnProperty(J)&&""!==A[J]&&le({data:a,param:J,val:A[J]});A={}}if(le({data:a,param:"nolPriv_assetid",val:le({data:a,param:k})}),"15"!==S&&"loadmetadata"!==S||"id3"!==le({data:a,param:O,vidType:"content"})&&!a.isProductOf("mtvr")||!0===le({data:a,param:"nolPriv_dtvrHybrid",vidType:"content"})||le({data:a,param:"nolPriv_dtvrHybrid",val:!0,vidType:"content"}),pe(a,y.onAssetIdChanged),"true"===le({data:a,param:"nol_disabled"}))return;if("drm"===le({data:a,param:"nol_product"}))a.serviceFlag.stn.need=!0;else if(a.serviceFlag.stn.need=!1,"true"===le({data:a,param:"nol_disabled"}))return;if(pe(a,y.onComplete),x&&se.state.bind(a,x),z&&de.bind(a,z),"true"===le({data:a,param:"nol_disabled"}))return}"ad"===a._currVidType&&a.isProductOf(["dcrvideo","vrivideo"])&&"impression"!==le({data:a,param:"nol_cadence"})&&le({data:a,param:"nol_timeSpentViewing"})[a._currVidType].nol_count++,a.isProductOf("vrivideo")&&"impression"===a.get("nol_cadence")&&(a.set("nol_vriEvent","start"),a.set("nol_startPos","")),le({data:a,param:"nol_pingStartTimeUTC",val:Math.round(re()/1e3)}),-1!==h.indexOf("iag")&&_e(a,a._currVidType,T),("ad"!==a._currVidType||a.isProductOf(["dcrvideo","vrivideo"]))&&"stream"!==le({data:a,param:"nol_cadence"})||(le({data:a,param:"nol_pingCount",val:0}),le({data:a,param:"nolPriv_sendData",val:!0}),le({data:a,param:"nol_davState",val:"0"}),a.serviceFlag.stn.need||"content"===a._currVidType||"nol_cmsoffset"!==le({data:a,param:"nol_timer"})&&"nol_pageoffset"!==le({data:a,param:"nol_timer"})||Se(0,a,M)),"14"!==S&&"staticstart"!==S||"dcrstatic"!==le({data:a,param:"nol_product"})||!0===I.static.started||(ee.PLDCR.start(!0),I.static.started=!0);break;case"5":case"play":if("mtvr"===le({data:a,param:"nol_product"})){if(ne.dtvr){ne.dtvr.handleGgpm(a,R,n);break}if(m[z=T.nol_channelName?T.nol_channelName.clientField:"nol_channelName"]&&0<m[z].length)for(c in m)m.hasOwnProperty(c)&&le({data:a,param:c,val:m[c]})}else a.isProductOf(["dcrvideo","vrivideo"])&&1==a.get("nolPriv_adStop")&&(a.set("nolPriv_adStop",!1),"ad"===a._currVidType&&a.isProductOf("dcrvideo")&&"interval"===a.get("nol_cadence")&&a.set("nolPriv_currPos","","content"),a._currVidType="content",P={nol_vidtype:le({data:a,param:C,vidType:a._currVidType}),nol_tagSrc:le({data:a,param:O,vidType:a._currVidType}),nol_linearAdLoadFlag:le({data:a,param:w,vidType:a._currVidType}),nol_ac:le({data:a,param:L,vidType:a._currVidType})},pe(a,y.onCmsDetected,P));break;case"6":case"pause":Le(a,null,M);break;case"7":case"stop":Le(a,null,M),"ad"===a._currVidType&&a.isProductOf("dcrvideo")&&a.set("nolPriv_adStop",!0);break;case"flush":var Q=a.get("nol_cadence");!a.isProductOf(["dcrvideo","dcrstatic"])||"interval"!==Q&&"streamduration"!==Q||(Le(a,{flush:!0,save:!0},M),a.isProductOf("dcrstatic")&&I.static.started&&(ee.PLDCR.dcrTimer.reset(),a.set("nolPriv_currPos","0")));break;case"changecontext":p&&-1<["content","ad"].indexOf(p)&&(a._currVidType=p);break;case"updateott":if(Le(a,null,M),p&&p.hasOwnProperty("ottStatus")&&0<p.ottStatus.length){for(k in p.hasOwnProperty("kGCKMetadataNlsKeyOptout")&&p.hasOwnProperty("kGCKMetadataNlsKeyDeviceID")&&(Q=p.kGCKMetadataNlsKeyOptout.toString().toLowerCase(),le({data:a,param:"nol_userSessionId",val:p.kGCKMetadataNlsKeyDeviceID,vidType:"content"}),le({data:a,param:"nol_useroptout",val:"1"===Q||"true"===Q?"true":"false",vidType:"content"}),-1===[1,"1","true",0,"0","false"].indexOf(Q)&&ee._listeners.fireEvent("warn",{type:"warn",msg:"Warning: Invalid kGCKMetadataNlsKeyOptout value."})),p)p.hasOwnProperty(k)&&(le({data:a,param:k,val:p[k],vidType:"content"}),I.ottStatusObj[k]=p[k]);y.onOTTDetected&&pe(a,y.onOTTDetected)}break;case"57":case"56":case"end":case"oncomplete":case"staticend":if(("56"===S||"staticend"===S)&&"dcrstatic"!==le({data:a,param:"nol_product"}))return;if("56"!==S&&"staticend"!==S&&"dcrstatic"===le({data:a,param:"nol_product"}))return;if(a.isProductOf("vrivideo")&&("57"===S||"end"===S)&&("sessionReset"===f||"modcadence"!=a.get("nol_cadence")))return;if(ne.dtvr&&("57"===S||"end"===S||"oncomplete"===S)&&a.isProductOf(["mtvr","id3"])){ne.dtvr.handleGgpm(a,R,n);break}if("ad"===a._currVidType&&("streamduration"===le({data:a,param:"nol_cadence"})?ge(a,null,M.onPingFired):a.isProductOf(["dcrvideo"])&&"interval"===le({data:a,param:"nol_cadence"})&&(""===le({data:a,param:"nol_dataDate",vidType:"content"})&&""!==le({data:a,param:"nol_dataDate"})&&(le({data:a,param:"nol_dataDate",val:le({data:a,param:"nol_dataDate"}),vidType:"content"}),le({data:a,param:"nol_hourCode",val:le({data:a,param:"nol_hourCode"}),vidType:"content"}),le({data:a,param:"nol_dayId",val:le({data:a,param:"nol_dayId"}),vidType:"content"})),a._currVidType="content",y.onEndDetected&&pe(a,y.onEndDetected),ge(a,null,M.onPingFired))),a.isProductOf("dcrvideo")&&a.set("nolPriv_currPos",""),a.isProductOf("vrivideo")&&"modcadence"===a.get("nol_cadence")){var W=a.get("nol_length")||se.cms.parse(T.nol_length,a,{defaultKey:"nol_length",silent:!0});if("NaN"===parseInt(W).toString())return;if(!(parseInt(a.get("nol_currPos"))>=parseInt(a.get("nol_length"))))return;a.set("nol_vriEvent","ended")}"static"!==le({data:a,param:"nol_ac"})&&(a._currVidType="content"),y.onEndDetected&&pe(a,y.onEndDetected),le({data:a,param:"nol_forceFireOnClose_content",val:"1"}),"false"!==le({data:a,param:"nol_disabled"})&&"id3"!==le({data:a,param:"nol_product"})||("static"===le({data:a,param:"nol_ac"})&&ee._listeners.fireEvent("removeCmbAssetId",u),he(a,M.onPingFired)),le({data:a,param:"nol_onCompleteFired",val:!0}),te[t].forceStreamRegen=!0,"56"!=S&&"staticend"!=S||"dcrstatic"!==le({data:a,param:"nol_product"})||(ee.PLDCR.stop(),I.static.started=!1),"sessionReset"!==f&&I.disablePauseTimeout();break;case"48":case"setpageduration":case"pageduration":case"staticposition":if("true"===le({data:a,param:"nol_disabled"})||!p||"nol_pageoffset"!==le({data:a,param:"nol_timer"}))return;"1"===le({data:a,param:"nol_onPaginateFired_static"})&&(le({data:a,param:"nol_onPaginateFired",val:"0",vidType:"static"}),"impression"!==le({data:a,param:"nol_cadence"})&&ye(a,{vidType:"static"})),ue(le({data:a,param:"nol_highWM"}),"num")<ue(p,"num")&&le({data:a,param:"nol_highWM",val:p}),Se(p,a,M),le({data:a,param:"nol_davState",val:"1"});var H=a.get("nol_cadenceOverrideEnabled")&&a.get("nol_cadenceOverride")?a.get("nol_cadenceOverride"):!(!ee.PLDCR.cadenceOverrideEnabled||!ee.PLDCR.cadenceOverride)&&ee.PLDCR.cadenceOverride,K=60*parseInt(a.get("nol_segmentLength")||0);"dcrstatic"===a.get("nol_product")&&H&&0<H&&H<=p&&(!K||H<K)&&(Le(a,{flush:!0,save:!0},M),ee.PLDCR.dcrTimer.reset(),a.set("nolPriv_currPos","0"));break;case"49":case"setplayheadposition":case"playheadposition":if(-1<p){if(!0===le({data:a,param:"nol_onCompleteFired"})&&ee._listeners.fireEvent("flushPauseEventQueue"),"true"===le({data:a,param:"nol_disabled"})||!p||"nol_cmsoffset"!==le({data:a,param:"nol_timer"})||"ad"===a._currVidType&&a.isProductOf(["dcrvideo","vrivideo"])&&"impression"===le({data:a,param:"nol_cadence"}))return;if("number"!=typeof p){if("string"!=typeof p)return;p=ue(p,"num")}else p=Math.floor(p);!0===a.get("nolPriv_resetSession")&&(a.set("nolPriv_resetSession",!1),te[t].forceStreamRegen=!0,Ce(a)),a.isProductOf("vrivideo")&&(Y=Math.floor(p),"impression"===a.get("nol_cadence")&&1===Y&&Y<a.get("nolPriv_prevPos")&&(a.set("nol_pingCount",0),a.set("nol_currPos","")),"modcadence"===a.get("nol_cadence")&&a.set("nol_vriEvent","loop")),le({data:a,param:"nol_isLive",val:(86400<p).toString()}),ue(le({data:a,param:"nol_highWM"}),"num")<p&&le({data:a,param:"nol_highWM",val:p}),a.serviceFlag.stn.need?(le({data:a,param:"nol_queueTime",val:p}),me(a,{service:"stn",key:le({data:a,param:"nol_assetid"}),url:le({data:a,param:"nol_stationURL"}),nol_playerId:le({data:a,param:"nol_playerId"})})):Se(p,a,M),le({data:a,param:"nol_davState",val:"1"}),"content"!==a._currVidType||I.isAdobe||I._pauseTimeoutEnabled||I.enablePauseTimeout()}else e.timeStamp&&!ie[e.timeStamp]&&(ie[e.timeStamp]=ve(a,{type:15,msg:"A negative playhead position was sent and will be ignored."},void 0,!0),ie[e.timeStamp]&&ee._listeners.fireEvent("warn",{type:"warn",msg:"Warning: A negative playhead position was sent and will be ignored."}));break;case"55":case"sendid3":if("nol_cmsoffset"===a.get("nol_timer")||"nol_pageoffset"===a.get("nol_timer"))return;if(ne.dtvr){ne.dtvr.handleGgpm(a,R,n);break}var W=!1,H=!1;if(("object"===(void 0===p?"undefined":_typeof(p))&&0<Object.keys(p).length||"string"==typeof p&&0<p.length)&&((!0===le({data:a,param:"nol_onCompleteFired"})&&I&&I.getPauseQueueCount&&0<I.getPauseQueueCount()||!0===le({data:a,param:"nol_onCompleteFired"})&&I&&!I.getPauseQueueCount)&&ee._listeners.fireEvent("flushPauseEventQueue"),"object"===(void 0===p?"undefined":_typeof(p))))for(d=0;d<p.length;d+=1)if(p[d].key&&"PRIV"===p[d].key){p=p[d].info;break}if(249!==(K=p.toString()).length&&e.timeStamp&&!ie[e.timeStamp]&&(ie[e.timeStamp]=ve(a,{type:17,msg:"ID3 tag length is not 249. ID3 Tag: "+K},!0,!0),Fe.console&&Fe.console.warn&&Fe.console.warn("Warning: ID3 tag length is not 249.")),p={},(i=K.split("/")).length<ue(Pe.nol_breakout,"num"))return;for(c in Pe)Pe.hasOwnProperty(c)&&(p[c]=i[Pe[c]],"nol_breakout"===c&&(p[c]=i[ue(Pe[c],"num")].substr(0,2)),P[c]=p[c]);if(!p||le({data:a,param:"nol_tsvBreakoutMap"})&&-1===le({data:a,param:"nol_tsvBreakoutMap"}).enable.indexOf(p.nol_breakout)||-1===p.nol_nWebAddress.indexOf("nielsen.com")||p.nol_fdcid===le({data:a,param:"nol_cidNull"})&&p.nol_pccid===le({data:a,param:"nol_cidNull"}))return;for(a._currVidType="content",l=0,d=g.length;l<d;l+=1)r=T[g[l]]?T[g[l]].clientField:g[l],P[g[l]]=p[r]||le({data:a,param:g[l]});if(P.nol_vidtype="content",pe(a,y.onId3Detected,P),"false"!==P.nol_disabled||"nol_cmsoffset"===le({data:a,param:"nol_timer"}))return;"daypart"===le({data:a,param:"nol_cadence"})&&(!($=le({data:a,param:"nol_assetid"})||a._currAssetid)&&p.nol_fdcid&&p.nol_fdcid!==le({data:a,param:"nol_cidNull"})?a._currAssetid=p.nol_fdcid:!a._currAssetid&&$&&(a._currAssetid=$)),p.nol_ac=a._currVidType,p.nol_assetid=le({data:a,param:"nol_assetid"})||a._currAssetid,0<v&&(-1!==le({data:a,param:"nol_product"}).indexOf("id3")||-1!==le({data:a,param:"nol_product"}).indexOf("mtvr"))&&(p.nol_pccid!==le({data:a,param:"nol_cidNull"})&&p.nol_pccid!==le({data:a,param:"nol_pccid"})||p.nol_fdcid!==le({data:a,param:"nol_cidNull"})&&p.nol_fdcid!==le({data:a,param:"nol_fdcid"}))&&ge(a,null,M.onPingFired,!0);var X,Y=se.mtvr.pcChanged(a,p.nol_pccid),$=se.mtvr.fdChanged(a,p.nol_fdcid);if(Y&&(se.mtvr.isPCTag(a)||se.mtvr.isTransPing(a))&&(_.filters.onId3PcCidChanged=!0,_.count+=1,n&&n.startViewability(a),($||se.mtvr.isNullFDCid(a))&&a.set("nol_id3Seq",0)),$&&(se.mtvr.isFDTag(a)||se.mtvr.isTransPing(a))&&(_.filters.onId3FdCidChanged=!0,_.count+=1,n&&n.startViewability(a),a.set("nol_id3Seq",0)),$&&se.mtvr.isPCTag(a)&&(W=!0),""===a.get("nol_fdrtvod")||"0"===a.get("nol_fdrtvod")||!se.mtvr.isPCTag(a)&&!se.mtvr.isFDTag(a)||se.mtvr.isNullPCCid(a)||""===a.get("nol_pccid")||se.mtvr.isNullFDCid(a)||""===a.get("nol_fdcid")||!Y||(H=!0,se.mtvr.isFDTag(a)&&y&&y.onId3FdCidChanged&&pe(a,y.onId3FdCidChanged)),_.count){if(ce(a,"sendID3",p,n),!_.filters.onId3FdCidChanged&&le({data:a,param:"nol_fdcid"})!=le({data:a,param:"nol_cidNull"})||-1===le({data:a,param:"nol_tsvBreakoutMap"}).enable.indexOf(p.nol_breakout)||(a.serviceFlag.tsv.need=!0),0<_.count)for(c in _.filters)if(_.filters[c]&&(pe(a,y[c]),"true"===le({data:a,param:"nol_disabled"})))return;if(y.onComplete&&(pe(a,y.onComplete),"true"===le({data:a,param:"nol_disabled"})))return}else for(c in p)p.hasOwnProperty(c)&&le({data:a,param:c,val:p[c]});if(($&&se.mtvr.isFDTag(a)||Y&&se.mtvr.isPCTag(a))&&a.isProductOf("mtvr")&&"impression"===a.get("nol_cadence")&&"false"===a.get("nol_disabled")&&(X=te[t].nolPriv_newMTVRStreamId,te[t].nolPriv_newMTVRStreamId=X&&te[t].restEvtTimestamp==e.timeStamp?X:ee.generateGUID(),se.mtvr.resetTagSession(a,te[t].nolPriv_newMTVRStreamId),te[t].restEvtTimestamp=e.timeStamp,ee._listeners.fireEvent("debug",{type:"debug",msg:a.get("nol_comment")+" new mtvr session is "+X})),!a.isProductOf("mtvr")&&!a.isProductOf("id3")||"false"!==a.get("nol_disabled")||te[t].restEvtTimestamp==e.timeStamp||(X=te[t].nolPriv_newMTVRStreamId)&&X!==a.get("nol_sessionId","content")&&se.mtvr.resetTagSession(a,X),le({data:a,param:"nol_id3Raw",val:K}),(a.serviceFlag.tsv.need||W||H)&&-1!=="|mtvr|,|dprid3|,|id3|".indexOf("|"+le({data:a,param:"nol_product"})+"|")&&"false"===a.get("nol_disabled")&&(-1<["true","1"].indexOf(a.get("nol_rtvodEnabled").toString().toLowerCase())&&a.set("nol_rtvod",""),o=!H&&(W||!0!==_.filters.onId3PcCidChanged||se.mtvr.isNullPCCid(a))?le({data:a,param:"nol_fdcid"}):le({data:a,param:"nol_pccid"}),a.get("nol_tsvURL")&&me(a,{service:"tsv",key:o,url:le({data:a,param:"nol_tsvURL"})})),(a.isProductOf("id3")||a.isProductOf("mtvr")&&"interval"===a.get("nol_cadence")&&"false"===a.get("nol_disabled"))&&p.nol_watermark&&0<String(p.nol_watermark).length&&(W=le({data:a,param:"nol_id3Data"}),o=Math.round(re()/1e3+b),s=le({data:a,param:"nol_id3Seq"})||0,W?le({data:a,param:"nol_id3Data",val:W+="|"+o+","+le({data:a,param:"nol_id3Raw"})}):(le({data:a,param:"nol_id3Data",val:s+":"+le({data:a,param:"nol_clocksrc"})+":"+le({data:a,param:"nol_tsvFlag"})+":"+o+","+le({data:a,param:"nol_id3Raw"})}),le({data:a,param:"nol_id3Seq",val:ue(s,"num")+1,vidType:"content"})),a.isProductOf("id3")))return 0<v&&ge(a,{returnLength:!0},M.onPingFired),le({data:a,param:"nolPriv_id3Count",val:v+=1}),void le({data:a,param:"nol_davState",val:"1"});if(le({data:a,param:"nolPriv_id3Count",val:v+=1}),s=le({data:a,param:le({data:a,param:"nol_timer"})})||le({data:a,param:"nol_fdoffset"}),"daypart"===le({data:a,param:"nol_cadence"})&&(s=ue(s,"num"),s+="nol_pcoffset"==le({data:a,param:"nol_timer"})?ue(le({data:a,param:"nol_pcTimeCode"}),"num"):ue(le({data:a,param:"nol_fdTimeCode"}),"num")),a.serviceFlag.tsv.need)le({data:a,param:"nol_queueTime",val:s});else{if("true"===le({data:a,param:"nol_disabled"}))return;Se(s,a,M),le({data:a,param:"nol_davState",val:"1"})}($&&se.mtvr.isFDTag(a)||Y&&se.mtvr.isPCTag(a))&&(se.mtvr.isPCTag(a)&&"false"===a.get("nol_disabled")?n&&n.tickViewability(a,p.nol_pcoffset):se.mtvr.isFDTag(a)&&"false"===a.get("nol_disabled")&&n&&n.tickViewability(a,p.nol_fdoffset));break;case"60":case"mute":break;case"61":case"volume":n&&n.viewability&&n.viewability.setVolume(p);break;case"30":case"onpaginate":"dcrstatic"===le({data:a,param:"nol_product"})&&y.onPaginateDetected&&"stream"!==le({data:a,param:"nol_cadence"})&&pe(a,y.onPaginateDetected),le({data:a,param:"nol_onPaginateFired",val:"1",vidType:"static"});break;case"35":case"updatemetadata":a.isProductOf(["dcrvideo","vrivideo"])&&(se.updateMetadata(a,m,T,e.evtInfo),""!==(Z=le({data:a,param:"nol_adLoadType",vidType:"content"}))&&null!=Z&&pe(a,y.onAdLoadFlag));break;case"buffer":case"buttonevent":break;case"starttimer":if(a.isProductOf("dcrstatic")&&"impression"===a.get("nol_cadence")){if(we(I,S,p="string"==typeof p?p.toLowerCase():""))break;var Z="touchstart"===p;ee.PLDCR.dcrTimer.isActive||("focus"===p&&(ee.PLDCR.dcrTimer.play(ee.PLDCR._reset),ee.PLDCR._reset=!1),Z&&ee.PLDCR.safeFocus({type:p}))}break;case"stoptimer":if(a.isProductOf("dcrstatic")&&"interval"===a.get("nol_cadence")){if(we(I,S,p="string"==typeof p?p.toLowerCase():""))break;ee.PLDCR.dcrTimer.isActive&&"blur"===p&&(Le(a,{flush:!0,save:!0},M),ee.PLDCR.dcrTimer.reset(),a.set("nolPriv_currPos","0"),ee.PLDCR.dcrTimer.pause(),ee.PLDCR.safeFocusOn&&(ee.PLDCR.safeFocusOn=!1))}}!function(e,t){try{e&&t.inferredEvent&&(t.inferredEvent.event===oe.events.play&&se.state.set(e,t.inferredEvent),de.postProcess(e,t.inferredEvent))}catch(e){ee._listeners.fireEvent("error",{type:"error",msg:"Error in ggpmPostProc(). Error postprocessing event - "+e.message})}}(a,F)}else e.timeStamp&&!ie[e.timeStamp]&&"true"!==a.get("nol_disabled")&&(e.evtInfo&&!e.evtInfo.eventType&&(ee._listeners.fireEvent("error",{type:"error",msg:"Error in handleGgpm - Invalid event type param"}),ie[e.timeStamp]=ve(a,{type:17,msg:"Missing event type param in ggPM"},!0,!0)),!e.evtInfo||null!==e.evtInfo.param1&&void 0!==e.evtInfo.param1||(ee._listeners.fireEvent("error",{type:"error",msg:"Error in handleGgpm - Invalid Param1 passed"}),ie[e.timeStamp]=ve(a,{type:17,msg:"Missing param1 detected on event "+e.evtInfo.eventType},!0,!0)))}var ke=ke||null,te=te||{},ie=ie||{},oe=oe||{},de=de||{},Ee=Ee||function(){},x=x||function(){},ve=ve||function(){},j=j||function(){},Y=Y||function(){};function pe(e,t,a,n){var r,i,o,s,l,d,c,u,p,m,f,v,g,_,y=t||e.get("nol_finalFilter",n),h=a||{};if(y&&void 0!==y)for(r=0,i=y.length;r<i;r++){if((d=y[r]).tagVar.length)for(o=0,s=d.tagVar.length;o<s&&(u=e.get(d.tagVar[o].name,n));o++);else u=e.get(d.tagVar.name,n);if(u&&d.tagVar.value===u){for(o=0,s=d.cond.length;o<s;o++){if(_=h[d.cond[o]]||e.get(d.cond[o],n),v=0===d.is.value.indexOf("nol_")&&e.get(d.is.value,n)?e.get(d.is.value,n):d.is.value,void 0===_||void 0===v||(m=d.is.type,f=_,_=g=void 0,g=!1,_=(v=v).toString().toLowerCase().indexOf(f.toString().toLowerCase()),!(g=!!("-"===m&&-1===_||"+"===m&&(v===f||-1!==_&&v&&f)||"--"===m&&-1===f.toString().toLowerCase().indexOf(v.toString().toLowerCase())||"++"===m&&-1!==f.toString().toLowerCase().indexOf(v.toString().toLowerCase()))||g))){c=!1;break}c=!0}if(void 0!==c&&void 0!==(p=c?d.then:d.else))for(l in p)p.hasOwnProperty(l)&&(void 0!==h.nol_vidtype?h[l]=p[l]:e.set(l,p[l],n))}}}function be(e,t){try{if(!e||!e.hasOwnProperty("data"))return;if(e.hasOwnProperty("savedVals")&&e.hasOwnProperty("savedReplayParams"))if(Array.isArray(e.savedVals))for(var a in e.savedVals)e.savedVals.hasOwnProperty(a)&&(e.savedReplayParams[e.savedVals[a]]=le({data:e.data,param:e.savedVals[a]}));else"string"==typeof e.savedVals&&(e.savedReplayParams[e.savedVals]=le({data:e.data,param:e.savedVals}));e.hasOwnProperty("resetStatic")&&!0===e.resetStatic&&(e.data._dataArrObj.static={}),e.data._dataArrObj.ad={},e.data._dataArrObj.content={},e.data._dataArrObj.count={content:0,ad:0,static:0},e.data._currAssetid="0"}catch(e){ee._listeners.fireEvent("error",{type:"error",msg:"Error in resetDataObj"+e})}}function he(e,t,a,n){n=n||"";"id3"===le({data:e,param:"nol_product"})&&le({data:e,param:"nol_id3Data"})?ge(e,null,t||null,a):e.isProductOf("vrivideo")&&"ended"!==e.set("nol_vriEvent")||"true"!==le({data:e,param:"nol_disabled"})&&("1"===le({data:e,param:"nol_davState"})||"onbeforeunload"===n&&"1"===e.get("nol_davState","ad"))&&(le({data:e,param:"nol_davState",val:"2"}),"daypart"===le({data:e,param:"nol_cadence"})?ge(e,{save:!0},t||null,a):ge(e,null,t||null,a),e.isProductOf(["mtvr","id3"])?le({data:e,param:"nolPriv_enableDtvr",val:"true"}):Y(e),le({data:e,param:"nol_disabled",val:"true"}))}function Ie(e,t){var a,n,r,i=t.id||t.getId?t.getId():"0",o=te[i].nol_tagMap.nol_url,s=o?o[e.nol_url]||e.nol_url||"":e.nol_url||"",l={nol_disabled:"true",nol_errorMessage:"none",nol_vidtype:"",nol_muteState:"0",nol_volumeLevel:"100",nol_clockSource:"D",nol_aggregate:"1",nol_pingCount:"0",nol_intrvlThrshld:"90",nol_id3IntrvlGp:"15",nolPriv_sendData:!0,nol_timer:"nol_fdoffset",nol_isLive:"false",nolPriv_errorSent:"",nolPriv_id3Count:0,nolPriv_cmsMap:{},nol_timeSpentViewing:{ad:{nol_cumeTimeSpent:0,nol_segmentTimeSpent:0,nol_count:0},content:{nol_cumeTimeSpent:0,nol_segmentTimeSpent:0,nol_count:0},static:{nol_cumeTimeSpent:0,nol_segmentTimeSpent:0,nol_count:0}},nol_enableFilterMap:["nol_vidtype","nol_tagSrc","nol_linearAdLoadFlag","nol_ac"],nol_xorSeed:"N!3ls3nBL",nol_currSeg:"0",nol_minWonOverride:"0",nol_customExtension:["nol_legacyCustom"],nol_pingCreationTime:"0",nol_pingSendTime:"0",nol_clientUrl:Fe.location.href,nol_sendTime:"0",nol_pageURL:Fe.location.href.replace(/\"/g,"").replace(/\'/g,"").replace(/%27/g,"").replace(/%22/g,""),nol_referrerURL:Fe.document.referrer.replace(/\"/g,"").replace(/\'/g,"").replace(/%27/g,"").replace(/%22/g,""),nol_random:Math.round(1e9*Math.random()),nol_ottStatus:"0",nol_ottType:"none",nol_ottDevice:"NA",nol_ottDeviceName:"NA",nol_ottDeviceID:"NA",nol_ottDeviceManufacturer:"NA",nol_ottDeviceModel:"NA",nol_ottDeviceVersion:"NA",nol_onPaginateFired:"0",nol_forceFireOnClose:"0",nol_applyViewInc:"0",nol_viVersion:"",nol_omidsdkVersion:""},d=e;d.nol_playerId=i;var c=this,u={_dataArrObj:{ad:{},content:{},static:{},count:{content:0,static:0}},_settings:d,_currVidType:"ad",_currAssetid:"0",serviceFlag:{stn:{need:!1,callback:"nol_stnevt"},tsv:{need:!1,callback:"nol_tsvevt"}}};for(r in se.extendfData(u),this.name=u.get("nol_comment"),this.playerId=i,this.resetViewability=function(e,t){c&&c.viewability&&c.viewability.initialized&&c.viewability.initialized()&&c.viewability.clear(e,t)},this.startViewability=function(e){c&&c.viewability&&c.viewability.initialized&&c.viewability.initialized()&&"function"==typeof c.viewability.start&&c.viewability.start(e)},this.stopViewability=function(){c&&c.viewability&&c.viewability.initialized&&c.viewability.initialized()&&"function"==typeof c.viewability.stop&&c.viewability.stop()},this.tickViewability=function(e,t,a){c&&c.viewability&&c.viewability.initialized&&c.viewability.initialized()?c.viewability.tick(t,e,function(){c.viewability.setData(e),a&&a()}):a&&a()},ee._listeners.addListener("tick",function(){var e;t.pauseObj.eventPauseTime>=t.pauseObj.cmsPauseTime&&se.state.status.current(u)!==se.states.stopped&&se.state.status.current(u)!==se.states.paused&&de.isEnabled(u)&&(e={event:oe.events.pause,curPos:se.state.position.current(u),prevPos:null,timestamp:se.state.timeStamp.current(u)},se.state.set(u,e),de.preProcess(u,e),t.pauseObj.eventPauseTime=0),t.pauseObj.pauseTime>t.pauseObj.maxPauseTime&&"dcrstatic"!==le({data:u,param:"nol_product"})&&"vrivideo"!==le({data:u,param:"nol_product"})&&(t.pauseObj.pauseTime=0,ee._listeners.fireEvent("handleSessionReset",{plid:i,passedFdata:u}),ee._listeners.fireEvent("debug",{type:"debug",msg:"Max pause time reached. Just fired handleSessionReset."}))}),be({data:u},c),l)e.hasOwnProperty(r)?d[r]=e[r]:d[r]=te[i][r]||l[r];if(d.nol_customExtension&&s){for(a=0,n=d.nol_customExtension.length;a<n;a++)s=s.replace("|!["+d.nol_customExtension[a]+"]!|",te[i][d.nol_customExtension[a]]||"");d.nol_url=s}if(ee.PLVBL&&u.get("nol_vizuURL")&&("interval"===u.get("nol_cadence")||"streamduration"===u.get("nol_cadence"))&&(this.viewability=new ee.PLVBL(u,t)),"true"!==le({data:u,param:"nol_fireStop"})&&-1==="interval,episode,streamduration".indexOf(le({data:u,param:"nol_cadence"}))||function(e,t){var a,n,r,i=e.split("||");if(i[0],Fe)for(a=0,n=i.length;a<n;a++)r=i[a],void 0!==Fe["on"+r]&&(Fe.addEventListener?Fe.addEventListener(r,t,!1):Fe.attachEvent&&Fe.attachEvent("on"+r,t))}("pagehide||beforeunload",function(){ke&&(Fe.clearInterval(ke),ke=0,j({serverTimeOffset:le({data:u,param:"nolPriv_serverTimeOffset"}),url:"__sendIt",maskRef:le({data:u,param:"nol_rfrmsk"}),uoo:le({data:u,param:"nol_useroptout"}),method:se.getRequestMethod(u)})),"sendBeacon"in navigator&&(_=!0),le({data:u,param:"nol_forceFireOnClose_content",val:"1"});var e=se.getEventsFilter(u);e&&e.onEndDetected&&(pe(u,e.onEndDetected,null,"ad"),pe(u,e.onEndDetected,null,"content")),de.setNextTick(u,null,"content"),he(u,!1,!0,"onbeforeunload")}),this.eventListener=function(e){Ee(u,e,c)},0<te[i].eventQueue.length)for(a=0;a<te[i].eventQueue.length;a++)te[i]&&te[i].eventQueue&&(te[i].eventQueue[a].timeStamp="queued"+a),Ee(u,te[i].eventQueue[a]),0;ee._listeners.addListener("sendError",function(e){var t;e.target&&i!==e.target.id||(t=e.target.id+"_"+e.target.timeStamp,ie[t]||(ee._listeners.fireEvent("error",{type:"error",msg:e.target.data?e.target.data.msg:""}),ie[t]=ve(u,e.target.data,!0,!0)))})}var _=_||!1||!1,ee=ee||{}||{},se=se||{}||{},ue=ue||function(){},re=re||function(){},ge=ge||function(){}||function(){},pe=pe||function(){},le=le||function(){}||function(){};function De(e){for(var t=[],a=0;a<ue(e,"num");a++)t.push({tsv:0,save:!1,updated:!1});return t}function G(e,t,a){for(var n=!1,r=0,i=!1,o=ue(le({data:e,param:"nol_unQualSegmentValue"}),"num"),s=le({data:e,param:"nol_minutes"}),l=[],d=!!t&&t.save,c=ue(le({data:e,param:"nol_segmentTimeSpent"}),"num"),u=ue(le({data:e,param:"nol_sendQual"}),"num"),t=le({data:e,param:"nol_cadence"}),p=0,m=s.length;p<m;p++)i=1<=Math.floor(s[p].tsv/le({data:e,param:"nol_creditValue"}))?(s[p].save&&"daypart"!==le({data:e,param:"nol_cadence"})?l.push(0):(l.push(le({data:e,param:"nol_creditFlag"})),r++,n=!0),!0):(l.push(0),!1),!0!==a&&(d?s[p].save=i:(s[p].tsv=0,s[p].save=!1,s[p].updated=!1));return u&&(n=u<=r),!0===ue(le({data:e,param:"nol_minWonOverride"}),"bool")&&(n=!0),!0===a||(le({data:e,param:"nol_duration",val:l.join("")}),n||"interval"!==t&&"streamduration"!==t||d||("S"===le({data:e,param:"nol_segmentPrefix"})&&o&&le({data:e,param:"nol_duration",val:(o=(o=o)||6,Math.ceil(c/o)*o||"0")}),n=1<c)),n}function z(e){return void 0!==e?(re()/1e3>>0)+e:re()/1e3>>0}function U(e){Number(e)===e&&e%1!=0&&Fe.console&&Fe.console.warn&&Fe.console.warn("Warning: nol_segmentTimeSpent is a float - should be an integer.")}function ye(e,t){try{var a,n;"1"===le({data:e,param:"nol_unifiedEnabled"})&&(a=t&&t.hasOwnProperty("vidType")?t.vidType:e._currVidType.toLowerCase(),n=ue(le({data:e,param:"nol_viewCount_"+a}),"num"),le({data:e,param:"nol_viewCount_"+a,val:n++}),"1"===le({data:e,param:"nol_applyViewInc"})&&le({data:e,param:"nol_applyViewInc",val:"0"}))}catch(e){ee._listeners.fireEvent("error",{type:"error",msg:"Error in incViewCnt"+e})}}function Y(e){try{if(void 0===e)return;var t=De(le({data:e,param:"nol_segmentLength"}));le({data:e,param:"nol_minutes",val:t}),le({data:e,param:"nol_duration",val:new Array(t.length+1).join("0")})}catch(e){ee._listeners.fireEvent("error",{type:"error",msg:"Error in resetMinutes(). Error - "+e.message})}}function Se(e,t,a){var n,r,i,o,s,l,d,c,u,p,m,f,v,g,_,y=le({data:t,param:"nol_tagSrc"}),e=""!==e?e:"id3"===y&&le({data:t,param:"nol_fdcid"})!==le({data:t,param:"nol_cidNull"})?le({data:t,param:"nol_fdoffset"}):"id3"===y&&le({data:t,param:"nol_pccid"})!==le({data:t,param:"nol_cidNull"})?le({data:t,param:"nol_pcoffset"}):e,h=se.getEventsFilter(t),P=le({data:t,param:"nol_minutes"}),S=ue(le({data:t,param:"nol_pingCount"}),"num"),b=le({data:t,param:"nol_playerId"}),T=ee._players&&ee._players.hasOwnProperty(b)?ee._players[b]:-1,C=le({data:t,param:"nol_localDay"}),O=le({data:t,param:"nol_dayQhr"}),L=le({data:t,param:"nol_weekQhr"}),w=le({data:t,param:"nol_wmDay"}),E=le({data:t,param:"nol_wmDayQhr"}),k=ue(le({data:t,param:"nol_weekEndUTC"}),"num"),I=k-ue(le({data:t,param:"nol_weekStartUTC"}),"num"),D=ue(le({data:t,param:"nolPriv_serverTimeOffset"}),"num"),A=le({data:t,param:"nol_timer"})||"nol_fdoffset",M=ue(le({data:t,param:"nolPriv_currMin"}),"num"),F=ue(le({data:t,param:"nol_maxPingCount"}),"num"),N=ue(le({data:t,param:"nol_creditValue"}),"num"),R=ue(e,"num"),V=ue(le({data:t,param:"nol_intrvlThrshld"}),"num")||86400,B="nol_cmsoffset"===A||"nol_pageoffset"===A?ue(le({data:t,param:"nol_cmsIntrvlGp"}),"num")||2:ue(le({data:t,param:"nol_id3IntrvlGp"}),"num"),G=ue(le({data:t,param:"nol_segmentLength"}),"num")*ue(le({data:t,param:"nol_segmentValue"}),"num"),x=ue(le({data:t,param:"nol_currSeg"}),"num"),j=ue(le({data:t,param:"nolPriv_now"}),"num"),U=le({data:t,param:"nol_timeSpentViewing"})[t._currVidType],z=t.get("nolPriv_currPos"),q=""===z,y=!1,b=!1;t.set("nolPriv_prevPos",t.get("nol_currPos")),1===e?t.set("nol_currPos","0"):t.set("nol_currPos",e),"modcadence"===t.get("nol_cadence")?e%t.get("nol_segmentValue")==0&&(e<t.get("nol_length")||!t.get("nol_length"))&&ge(t,null,a&&a.onPingFired?a.onPingFired:null):(g=Math.floor(R/86400)+1,w||le({data:t,param:"nol_wmDay",val:g}),c=Math.floor(R%86400/900)+1,E||le({data:t,param:"nol_wmDayQhr",val:c}),86400<R&&"nol_cmsoffset"===A?o=(R+=D)+ue(le({data:t,param:"nol_startDayTimeOffset"}),"num")+ue(le({data:t,param:"nol_GMTOffset"}),"num"):o=R,s=Math.floor(o/86400)+1,C&&C!=s&&(ge(t,null,a&&a.onPingFired?a.onPingFired:null),C=null),C||le({data:t,param:"nol_localDay",val:s}),k<R&&(h.onWeekEndUTC?pe(t,h.onWeekEndUTC):(le({data:t,param:"nol_week",val:le({data:t,param:"nol_nextWeek"})}),le({data:t,param:"nol_period",val:le({data:t,param:"nol_nextPeriod"})}),le({data:t,param:"nol_weekStartUTC",val:k+1}),le({data:t,param:"nol_weekEndUTC",val:k+1+I}))),l=Math.floor((R-ue(le({data:t,param:"nol_weekStartUTC"}),"num"))/900)+1,L&&l===L||le({data:t,param:"nol_weekQhr",val:l}),"nol_cmsoffset"===A&&(R=o%86400),d=Math.floor(R/900)+1,O||le({data:t,param:"nol_dayQhr",val:d}),R=Math.floor(R),"1"===le({data:t,param:"nol_applyViewInc"})&&(ye(t),le({data:t,param:"nol_applyViewInc",val:"0"})),"true"===le({data:t,param:"nol_disabled"})||void 0===R||0<F&&F<=S&&"daypart"!==le({data:t,param:"nol_cadence"})||("stream"!==le({data:t,param:"nol_cadence"})&&"impression"!==le({data:t,param:"nol_cadence"})?(z=q?R:ue(z,"num"),j=j||re(),F=Math.ceil((re()-j)/1e3)||1,S=(_=t).isProductOf(["mtvr","id3","dcrvideo"])?z:R,j=ue(le({data:_,param:"nol_segmentLength"}),"num")*ue(le({data:_,param:"nol_segmentValue"}),"num"),_=(u={segmentEnd:0===Math.floor(S%j),segment:Math.floor(S/j+1),minute:Math.floor(S%j/le({data:_,param:"nol_segmentValue"})),seconds:S%le({data:_,param:"nol_segmentValue"})}).segment,p=u.minute,m=u.seconds,y=R-z<0,f=!t.isProductOf("mtvr")&&(q&&0!==z||y)?1:R-z,z=(q||y)&&x!==_,le({data:t,param:"nolPriv_currPos",val:R}),(x&&void 0!==_&&x!==_&&"dcrvideo"===t.get("nol_product")&&0<t.get("nol_segmentTimeSpent")||x&&void 0!==_&&(!t.isProductOf(["mtvr","id3"])&&z||t.isProductOf(["mtvr","id3"])&&(x!==_||y&&t.get("nol_segmentTimeSpent")>t.get("nol_segmentValue")&&"daypart"!==le({data:t,param:"nol_cadence"}))))&&(("dcrvideo"!==le({data:t,param:"nol_product"})||"dcrvideo"===le({data:t,param:"nol_product"})&&0<le({data:t,param:"nol_segmentTimeSpent"}))&&ge(t,{save:!0},a&&a.onPingFired?a.onPingFired:null),"episode"!==le({data:t,param:"nol_cadence"})&&le({data:t,param:"nol_pingCount",val:0}),P=De(le({data:t,param:"nol_segmentLength"})),le({data:t,param:"nol_minutes",val:P}),O&&O!==d&&(le({data:t,param:"nol_dayQhr",val:d}),le({data:t,param:"nol_weekQhr",val:l}),C&&C!==s&&le({data:t,param:"nol_localDay",val:s})),E&&E!==c&&le({data:t,param:"nol_wmDayQhr",val:c}),w&&w!==g&&le({data:t,param:"nol_wmDay",val:g})),x=_,void 0!==p&&0<f&&(M===p||u.segmentEnd||P[p].save||"daypart"===le({data:t,param:"nol_cadence"})||(P[p].tsv>=N?ge(t,null,a&&a.onPingFired?a.onPingFired:null):(P[p].tsv=0,P[p].updated=!1)),f<B||f<=Math.ceil(1.5*F)&&f<V?(V=function(){for(n=0;n<f;n+=1){if(t.isProductOf(["mtvr","id3"])&&(m+n)%le({data:t,param:"nol_segmentValue"})!=0||!t.isProductOf(["mtvr","id3"])&&0!==m){if("daypart"!==le({data:t,param:"nol_cadence"})&&P[p].tsv>=le({data:t,param:"nol_segmentValue"})&&(P[p].save?(P[p].tsv=0,P[p].save=!1,P[p].updated=!1):t.isProductOf(["dcrstatic"])||ge(t,null,a&&a.onPingFired?a.onPingFired:null)),P[p].tsv+=1,U.nol_cumeTimeSpent+=1,U.nol_segmentTimeSpent+=1,P[p].tsv>=N&&v){for(P[p].updated||(le({data:t,param:"nolPriv_priority",val:re()}),P[p].updated=!0),i=r=0;r<P.length;r+=1)if((i+=P[r].tsv>=N?1:0)>=v){v="send";break}"send"===v&&le({data:t,param:"nol_sendQual"})&&(h.onViewWon&&pe(t,h.onViewWon),t.isProductOf(["dcrstatic"])||ge(t,{save:!0},a&&a.onPingFired?a.onPingFired:null),v=0,"daypart"!==le({data:t,param:"nol_cadence"})&&le({data:t,param:"nol_sendQual",val:"0"}))}}else 0!==n&&(p+=1),P.length<=p?(ge(t,{save:!0},a&&a.onPingFired?a.onPingFired:null),p=0,le({data:t,param:"nol_currSeg",val:x+=1}),le({data:t,param:"nol_pingCount",val:0}),P=De(le({data:t,param:"nol_segmentLength"})),le({data:t,param:"nol_minutes",val:P}),O&&O!==d&&(le({data:t,param:"nol_dayQhr",val:d}),le({data:t,param:"nol_weekQhr",val:l}),C&&C!==s&&le({data:t,param:"nol_localDay",val:s})),E&&E!==c&&le({data:t,param:"nol_wmDayQhr",val:c}),w&&w!==g&&le({data:t,param:"nol_wmDay",val:g})):"daypart"!==le({data:t,param:"nol_cadence"})&&!P[p].save&&P[p].tsv>=N&&(!u.segmentEnd||t.isProductOf(["mtvr","id3"]))?ge(t,null,a&&a.onPingFired?a.onPingFired:null):P[p].save||u.segmentEnd&&t.isProductOf(["dcrvideo"])||(P[p].tsv=1,P[p].updated=!1),U.nol_cumeTimeSpent+=1,U.nol_segmentTimeSpent+=1;t.set("nolPriv_currMin",p),a&&a.onTick&&a.onTick(R-(f-n)+1,U.nol_cumeTimeSpent)}},v=ue(le({data:t,param:"nol_sendQual"}),"num"),a&&a.onCalcStart&&"function"==typeof a.onCalcStart?a.onCalcStart(R,V):V()):(t.isProductOf("dcrvideo")&&(U.nol_cumeTimeSpent+=1,U.nol_segmentTimeSpent+=1),b=!0),t.isProductOf(["mtvr","id3"])||!u.segmentEnd||q||b||y||(("dcrvideo"!==le({data:t,param:"nol_product"})||"dcrvideo"===le({data:t,param:"nol_product"})&&1<le({data:t,param:"nol_segmentTimeSpent"}))&&ge(t,{save:!0},a&&a.onPingFired?a.onPingFired:null),"episode"!==le({data:t,param:"nol_cadence"})&&le({data:t,param:"nol_pingCount",val:0}),P=De(le({data:t,param:"nol_segmentLength"})),le({data:t,param:"nol_minutes",val:P}),O&&O!==d&&(le({data:t,param:"nol_dayQhr",val:d}),le({data:t,param:"nol_weekQhr",val:l}),C&&C!==s&&le({data:t,param:"nol_localDay",val:s})),E&&E!==c&&le({data:t,param:"nol_wmDayQhr",val:c}),w&&w!==g&&le({data:t,param:"nol_wmDay",val:g})),le({data:t,param:"nolPriv_now",val:re()}),-1!==T&&"dcrstatic"!==le({data:t,param:"nol_product"})&&(T.pauseObj.pauseTime=0))):(_=Math.floor(R/G+1),"content"===le({data:t,param:"nol_ac"})&&le({data:t,param:"nol_currSeg",val:x=_}),ge(t,null,a&&a.onPingFired?a.onPingFired:null)),le({data:t,param:"nol_currSeg",val:x})))}function Ae(e){return{tags:[],eventQueue:e&&e.eventQueue?e.eventQueue:[],tagSize:1,bReInit:!1,debug:g,eventQueueIndex:0}}function B(){var e=Array.prototype.slice.call(arguments);ee._listeners.fireEvent("info",{type:"info",msg:e.join(" ")})}function q(e){return encodeURIComponent(e).replace("'","%27")}function j(e){var t,a,n=0===c.indexOf("https")?"https":"http",r=e.url,i=e.hasOwnProperty("maskRef")?e.maskRef:-1,o=e.method||"GET";if("__sendIt"!==r&&"https"==n&&-1===r.indexOf("https")&&(r=n+r.substr(r.indexOf("://"))),e.prod&&"ocr"===e.prod&&-1!==r.indexOf("&ty=js"))I(r);else if(ke||"__sendIt"===r)if(r&&ke&&f)v.push(r);else if("__sendIt"!==r||f)r&&ke&&!f&&s.push(r);else{for(f=!0,t=0,a=s.length;t<a;t+=1)y.setup({pingSendTime:z(e.serverTimeOffset),url:s.shift(),uoo:e.uoo,maskRefUrl:i,method:o});s=s.concat(v),f=!1,v=[]}else y.setup({pingSendTime:z(e.serverTimeOffset),url:r,uoo:e.uoo,maskRefUrl:i,method:o})}function x(e){}function $(e,t){var a,n=e.data._settings,e=e.param;return null==t?void 0===(a=n.hasOwnProperty(e)&&te[n.nol_playerId].nol_tagMap.hasOwnProperty(e)&&("object"===_typeof(te[n.nol_playerId].nol_tagMap[e])||"array"==typeof te[n.nol_playerId].nol_tagMap[e])?te[n.nol_playerId].nol_tagMap[e][n[e]]:n.hasOwnProperty("nol_defaults")&&n.nol_defaults.hasOwnProperty(e)?n.nol_defaults[e]:te[n.nol_playerId].nol_tagMap.nol_defaults[e]||te[n.nol_playerId][e])&&(a=(n.hasOwnProperty(e)?n:te[n.nol_playerId].nol_tagMap)[e]):n.hasOwnProperty("nol_defaults")&&n.nol_defaults.hasOwnProperty(e)?n.nol_defaults[e]=t:n[e]=t,a}function le(e){try{if(e){if("string"==typeof e.param&&-1===e.param.indexOf("nol_")&&-1===e.param.indexOf("nolPriv_")&&1<e.param.split("_").length-1)return;var t,a="string"==typeof e.param?e.param.split("_"):e.param,n=a[0]?a.splice(0,2).join("_"):a,r=e.vidType||a[0]||e.data._currVidType,i=e.data._currAssetid?String(e.data._currAssetid):"0",o=void 0!==e.data._dataArrObj[r][i]?e.data._dataArrObj[r][i]:e.data._dataArrObj[r][Object.keys(e.data._dataArrObj[r]).splice(-1,1)],s=ae[e.data._settings.nol_playerId]||{},l=s&&s[n]?s[n].clientField:n;return"object"===(void 0===l?"undefined":_typeof(l))?t=o:"nol_segmentTimeSpent"===l||"nol_cumeTimeSpent"===l||"nol_count"===l?t=le({data:e.data,param:"nol_timeSpentViewing"})[r][l]:void 0===e.val||null===e.val?void 0!==(t=(o&&o.hasOwnProperty(l)?o:te[e.data._settings.nol_playerId])[l])&&""!==t||""!==(t=$(e)||"")||(0===l.indexOf("nol_")?e.param=l:e.param=n,t=$(e)||""):o&&(o[l]=e.val),t}return null}catch(e){Fe.console&&Fe.console.error&&Fe.console.error("Error in Data(): "+e.message+" __param: "+a),ee._listeners.fireEvent("error",{type:"error",msg:"Error in Data(): "+e.message})}}function Me(e){e&&e.hasOwnProperty("configReq")&&e.hasOwnProperty("player")&&0<e.configReq.length&&void 0!==e.player?(I(e.configReq),Fe.clearInterval(e.player.lsPopulatedInterval),e.player.lsPopulatedInterval=0):ee._listeners.fireEvent("error",{type:"error",msg:"Error in handleConfigRequest. Args is null or missing configReq or player."})}return e.initFromConfig=function(e,t,a){ee._listeners.fireEvent("info",{type:"info",msg:"Recieved config response."});try{if(e&&e.nol_GLOBALS){var n,r,i,o,s,l,d,c,u,p=re(),m="localhost",f=(e.nol_GLOBALS.debugSfcode,e.nol_GLOBALS.nol_appid,e.nol_GLOBALS.nol_lsid||""),v=e.nol_GLOBALS.nol_emmURL||(e.nol_GLOBALS.nol_tagMap&&e.nol_GLOBALS.nol_tagMap.nol_defaults?e.nol_GLOBALS.nol_tagMap.nol_defaults.nol_emmURL:"")||"",g=e.nol_GLOBALS.enableStaticInIframe&&"true"===e.nol_GLOBALS.enableStaticInIframe.toString().toLowerCase();if(g&&ee.browser.isWithinIFrame()&&ee.PLDCR.removeListeners(),a&&(ee.optoutCookie&&"TOTAL"===ee.optoutCookie&&"OPTOUT"!==ee.localStorageId&&(f="OPTOUT",ee._listeners.fireEvent("debug",{type:"debug",msg:'Optout cookie was set but lsid was "'+ee.localStorageId+'". Setting lsid to OPTOUT'})),""===f&&("-1"===ee.localStorageId?f="999":""===ee.localStorageId?f=ee.generateGUID():ee.localStorageId&&(f=ee.localStorageId))),ee._listeners.fireEvent("debug",{type:"debug",msg:"Cached lsid: "+ee.localStorageId+"; config lsid: "+f}),ee._listeners.fireEvent("sendOptOutStatus","OPTOUT"==f),void 0!==e.nol_GLOBALS.nol_maxRetry&&null!==e.nol_GLOBALS.nol_maxRetry&&""!==e.nol_GLOBALS.nol_maxRetry&&-1<(u=parseInt(e.nol_GLOBALS.nol_maxRetry))&&(L=u),e&&e.hasOwnProperty("nol_GLOBALS")){var _=t||e.nol_GLOBALS.nol_playerId||0;if(!(r=ee._players[_]))return;for(i in m=e.nol_GLOBALS.nol_sfcode||m,ee._listeners.fireEvent("debug",{type:"debug",msg:'SDK instance "'+r.name+'" initialized with globals '+JSON.stringify(r.getConfigParams().ggParams)}),r.pauseObj={pauseTime:0,eventPauseTime:0,maxPauseTime:parseInt(e.nol_GLOBALS.nol_pauseTimeout)||1800,cmsPauseTime:parseInt(e.nol_GLOBALS.nol_pauseEventTimeoutPlayhead)||15},r.staticIFrameFlag=g,a&&(e.nol_GLOBALS.nol_serverTime=re()/1e3>>0),(ee.localStorage?te[_]?te[_].nol_serverTime||ee.localStorage.getItem("nol_serverTime"):ee.localStorage.getItem("nol_serverTime")||0:te[_]?te[_].nol_serverTime:0)===e.nol_GLOBALS.nol_serverTime?b=te[_]?te[_].nolPriv_serverTimeOffset:e.nol_GLOBALS.nol_serverTime-Math.round(p/1e3):(b=e.nol_GLOBALS.nol_serverTime-Math.round(p/1e3),ee.localStorage&&ee.localStorage.setItem("nol_serverTime",e.nol_GLOBALS.nol_serverTime)),w=e.nol_GLOBALS.nol_errorWait||w,n=r.getConfigParams().ggParams||{},te[_]=Ae(te[_]),te[_].nolPriv_serverTimeOffset=b,te&&te.hasOwnProperty(_)?te[_].nol_nielsenAdSupportFlg=0:ee._listeners.fireEvent("error",{type:"error",msg:"Error in initFromConfig. Invalid data object or playerId."}),ke&&(Fe.clearInterval(ke),ke=0),e.nol_GLOBALS.nol_sendTimer&&(ke=Fe.setInterval(function(){j({serverTimeOffset:te[_].nolPriv_serverTimeOffset,url:"__sendIt",uoo:le({data:fData,param:"nol_useroptout"}),method:te[_].nol_requestMethod})},1e3*e.nol_GLOBALS.nol_sendTimer)),n)n.hasOwnProperty(i)&&(te[_][i]=n[i]);for(i in e.nol_GLOBALS)e.nol_GLOBALS.hasOwnProperty(i)&&(te[_][i]=e.nol_GLOBALS[i]);for(i in E[_]=te[_].nol_eventFilter||{},k[_]=te[_].nol_serviceFilter||{},Pe=te[_].nol_id3Map||{},ae[_]=ae[_]||{},te[_].nol_clientCMSmap)te[_].nol_clientCMSmap.hasOwnProperty(i)&&(l=(s=te[_].nol_clientCMSmap[i].toString()||"").replace(S,""),c=s.match(S)||[],d={clientField:l.toString(),encoding:c.join("")},ae[_][i]=d);if(n&&n.hasOwnProperty("nol_override")&&0<Object.keys(n.nol_override).length)for(i in n.nol_override)0<n.nol_override[i].length&&(te[_][i]=n.nol_override[i]);e.nol_GLOBALS.hasOwnProperty("nol_maxStaticInstances")&&X.hasOwnProperty("setTotalNumAssetsAllowed")&&X.setTotalNumAssetsAllowed(e.nol_GLOBALS.nol_maxStaticInstances),r.configLoaded=!0,a&&(te[_].nol_prefProtocol=ee.getPrefProtocol(e),te[_].nol_playerId=_,te[_].nol_nuid=f,te[_].nol_lsid=f,te[_].nol_bldv=P,te[_].nol_sdkv=r.sdkvForConfig,te[_].nol_assetName=e.nol_GLOBALS.hasOwnProperty("nol_assetName")&&0<e.nol_GLOBALS.nol_assetName.length?e.nol_GLOBALS.nol_assetName:"defChnAsset",te[_].nol_sfcode=n.sfcode,te[_].nol_dcrsfcode=n.sfcode,te[_].nol_apn=n.apn||(e.nol_GLOBALS.hasOwnProperty("nol_apn")&&0<e.nol_GLOBALS.nol_apn.length?e.nol_GLOBALS.nol_apn:""),te[_].nol_nmspc="NOLBUNDLE"),te[_].nol_lstrg="",te[_].nol_userSessionId=r.sessionId,te[_].nol_pageURLmeta=r.metadataCtrl.pageURL,te[_].nol_pageTitle=r.metadataCtrl.pageTitle,!0===r.optout||"true"===te[_].nol_useroptout?te[_].nol_useroptout="true":te[_].nol_useroptout="",ee.userAgent.isAndroid()?te[_].nol_vriDeviceTypeId="0003":ee.userAgent.isIOS()?te[_].nol_vriDeviceTypeId="0002":te[_].nol_vriDeviceTypeId="0001",ee.userAgent.isIpadOS()&&(te[_].nol_devGroup="TAB",te[_].nol_platform="MBL",te[_].nol_osGroup="IOS",te[_].nol_phtype="Tablet",te[_].nol_dvcnm="Apple iPad"),f&&"999"!==f&&!ee.userAgent.isFB()&&(te[_].nol_lstrg="lstrg-"+f),ee._listeners.fireEvent("debug",{type:"debug",msg:"Cached emm: "+ee.EMMURL+"; config emm: "+v}),v=ee.evalTemplate(v,te[_]),te[_].nol_emmURL=v;var y=e.nol_GLOBALS.hasOwnProperty("nol_emmsfcodelist")?e.nol_GLOBALS.nol_emmsfcodelist:[];ee.setLsId(f,v,r,y)}if(e&&e.hasOwnProperty("nol_TAGS"))for(te[_].tagSize=e.nol_TAGS.length,te[_].tags=[],ee._listeners.fireEvent("debug",{type:"debug",msg:"NIELSEN TAGS EXPECTED TO FIRE:"}),i=0;i<te[_].tagSize;i+=1)ee._listeners.fireEvent("debug",{type:"debug",msg:String(e.nol_TAGS[i].nol_comment)}),te[_].tags.push(new Ie(JSON.parse(JSON.stringify(e.nol_TAGS[i])),r));void 0!==ee.enablePlayer&&ee.enablePlayer(_,"PLDPR"),te[_].bReInit=!1,n.nol_hybridCfg&&Fe&&Fe.JSON&&((o=Fe.document.createElement("script")).text="(function() {if (typeof "+n.nol_hybridCfg+" === 'function'){"+n.nol_hybridCfg+"('"+JSON.stringify(e)+"')}}())",Fe.document.head?(Fe.document.head.appendChild(o),Fe.document.head.removeChild(o)):(Fe.document.getElementsByTagName("head")[0].appendChild(o),Fe.document.getElementsByTagName("head")[0].removeChild(o))),te[_].forceStreamRegen=!1;var h=ee.getSdkvGlobal(te[_].nsdkvOverride,"CADENCEOVERRIDE");te[_].hasOwnProperty("nsdkvOverride")&&h&&(te[_].nol_cadenceOverride||(te[_].nol_cadenceOverride=h),te[_].nol_cadenceOverrideEnabled=!0),ee._listeners.addListener("tick",function(){r&&r.hasOwnProperty("pauseObj")&&r.pauseObj.hasOwnProperty("pauseTime")&&(!0===r._pauseTimeoutEnabled?r.pauseObj.pauseTime+=1:r.pauseObj.pauseTime=0,r.pauseObj.eventPauseTime+=1)}),r&&r.configLoaded&&Fe.NOLBUNDLE&&Fe.NOLBUNDLE.controllers&&Fe.NOLBUNDLE.controllers.util&&Fe.NOLBUNDLE.controllers.util.fireCustomEvent&&Fe.NOLBUNDLE.controllers.util.fireCustomEvent("NSDK_Initialized",{instanceName:r.name,instance:r}),ee._listeners.fireEvent("flushQueue")}else Fe.console&&Fe.console.warn&&Fe.console.warn("Warning: CMS config response is not valid. Please ensure NOL global parameter values are correct."),ee._listeners.fireEvent("warn",{type:"warn",msg:"Warning in initFromConfig. NOL global parameters are not valid."});return te[_]}catch(e){Fe.console&&Fe.console.error&&Fe.console.error("Error initializing CMS config response. Please ensure NOL global parameter values are correct. "+e.message),ee._listeners.fireEvent("error",{type:"error",msg:"Error in initFromConfig. Error parsing config response. "+e.message})}},e.getCmsMap=function(e){try{if(void 0!==e&&"string"==typeof e||ee._listeners.fireEvent("error",{type:"error",msg:"Error in getCmsMap. PlayerID must be passed as string data type."}),te&&te.hasOwnProperty(e)&&void 0!==te[e].nol_clientCMSmap)return te[e].nol_clientCMSmap}catch(e){ee._listeners.fireEvent("error",{type:"error",msg:"Error in getCmsMap."})}},e.resolveExpression=function(e,t){return t?(t._dataArrObj||(t={_dataArrObj:{content:{0:t}},_settings:t,_currVidType:"content"}),se.extendfData(t),M(t,e,null,{vidType:"content",silent:!0,noClone:!0})):e},e.init=function(e){var t,a,n=e.getConfigParams()||{},r=ee.getIfLsidShouldSend()?ee.getLsId():void 0,i="",o=0===c.indexOf("https")?"https":"http",s={pli:{val:n.nol_playerId||0,protect:!0},nmspc:{val:"NOLBUNDLE",protect:!0},sdkv:{val:l,protect:!0},fmt:{val:"jsonp",protect:!0},apn:{val:"Tester",protect:!1},fbtag:{val:"true",protect:!1},cfgv:{val:p,protect:!0},bldv:{val:P,protect:!0},prefprotocol:{val:o,protect:!1}};for(t in e.addListener("ggPM",function(e){!function(e){var t;if(te[e.id]&&te[e.id].tags.length===te[e.id].tagSize){if(ee._listeners.fireEvent("debug",{type:"debug",msg:"pli="+e.id+"&ggpm="+JSON.stringify(e)}),te[e.id].debug!==g&&"logging"===te[e.id].debug){if((t=te[e.id].nol_debugUrl)||(t=te[e.id].nol_prefProtocol+"://nielsen.guru/validation/query_string.php?"),te[e.id].eventQueue.length>te[e.id].eventQueueIndex+1)for(var a=te[e.id].eventQueueIndex;a<te[e.id].eventQueue.length;a++)x(t+"pli="+e.id+"&ggpm="+JSON.stringify(te[e.id].eventQueue[a])),te[e.id].eventQueueIndex=a;t+="pli="+e.id+"&ggpm="+JSON.stringify(e),x(t)}e.timeStamp=re();for(var a=0,n=te[e.id].tags.length;a<n;a+=1)te.hasOwnProperty(e.id)&&te[e.id].tags[a].eventListener(e)}else te[e.id]&&te[e.id].eventQueue||(te[e.id]=Ae(te[e.id])),te[e.id].eventQueue.push(e);ne.dtvr&&ne.dtvr.postQueueGgpm&&ne.dtvr.postQueueGgpm()}(e)}),e.lsPopulatedInterval=0,e.lsCurrentRetry=0,e.serviceSending={tsv:!1,stn:!1},e.ottStatusObj={},e.oServiceCall={},e.static={started:!1},n.ggParams)!n.ggParams.hasOwnProperty(t)||s[t]&&s[t].protect||0==t.indexOf("nol_")||(s[t]={val:q(n.ggParams[t])});for(t in s)s.hasOwnProperty(t)&&(i+=t+"="+s[t].val+"&");i=i.substr(0,i.length-1),a=c.replace(/[\w\W]*?:\/\//g,""),e.useCachedConfig||(void 0===r||e.lsPopulatedInterval?void 0===r&&Me({configReq:Z=o+"://"+a+d+"cfg?"+i+"&sendTime="+Math.floor(re()/1e3),player:e}):e.lsPopulatedInterval=Fe.setInterval(function(){"-1"!==(r=ee.getLsId())?Me({configReq:Z=o+"://"+a+d+"cfg?"+i+"&lsid="+r+"&sendTime="+Math.floor(re()/1e3),player:e}):2===e.lsCurrentRetry?Me({configReq:Z=o+"://"+a+d+"cfg?"+i+"&lsid=999&sendTime="+Math.floor(re()/1e3),player:e}):e.lsCurrentRetry+=1},1e3))},e.built||(e.built=!0,e.BUILDVERSION=P,e.dataObj=te,ee.bindPlayers(e,"PLDPR"),ee._listeners.fireEvent("flushQueue")),e}),Fe.NOLBUNDLE.registerLib("PLDCR",function(a){"use strict";var t,n=a.PLDCR=a.PLDCR||{dcrTimer:void 0,startDcrTime:0,latestDcrTickVal:0,_reset:!1,nol_idleTimeout:1800,nol_maxTickDelta:10,cadenceOverrideEnabled:!1,cadenceOverride:30,safeFocusOn:!1},r=Fe.NOLBUNDLE,e=a.getBaseBuildVer?a.getBaseBuildVer()+"1":"6.0.01";function i(e,t){var a={set:function(e,t){return a.init=!0,a.elapsed=0,a.startTimeStamp=0,"function"==typeof e&&(a.funcCall=e),isNaN(t)||(a.intervalTime=t),a},play:function(e){return a.isActive||(e?(a.startTimeStamp=0,a.elapsed=0,a.setTimer()):a.setTimer(a.remaining),a.isActive=!0),a},pause:function(){return a.isActive&&(a.isActive=!1,a.remaining=a.remaining-(Date.now()-a.last),a.clearTimer()),a},stop:function(){return a.isActive=!1,a.remaining=a.intervalTime,a.clearTimer(),a},clearTimer:function(){Fe.clearTimeout(a.timeoutObject)},setTimer:function(e){var t=a;"function"==typeof a.funcCall&&(isNaN(e)&&(e=a.intervalTime),a.remaining=e,a.last=Date.now(),a.clearTimer(),a.timeoutObject=Fe.setTimeout(function(){t.tick()},e))},tick:function(){var e;a.isActive&&(e=a.last,a.remaining<a.intervalTime&&(e-=a.intervalTime-a.remaining),a.setTimer(),(e=(a.last-e)/1e3)<n.nol_maxTickDelta&&0<=e?a.elapsed=a.elapsed+e:a.elapsed++,a.funcCall())},reset:function(){a.startTimeStamp=0,a.elapsed=0,a.remaining=a.intervalTime}};return a.init||a.set(e,t),a}function o(){n.dcrTimer&&(n.latestDcrTickVal=n.dcrTimer.elapsed,a._listeners.fireEvent("dcrHeartbeat",n.dcrTimer.elapsed))}function s(e){t&&clearTimeout(t),document.hasFocus&&!document.hasFocus()&&(t=setTimeout(function(){n.safeFocusOn&&n.dcrTimer&&(n.safeFocusOn=!1,document.hasFocus&&!document.hasFocus()&&(a._listeners.fireEvent("info",{type:"info",msg:"Safe Focus timeout"}),n.dcrTimer.pause(),a.flushEvent(e))),clearTimeout(t)},1e3*n.nol_idleTimeout),!n.safeFocusOn&&n.dcrTimer&&(a._listeners.fireEvent("info",{type:"info",msg:"Safe Focus initiated"}),n.dcrTimer.play(n._reset),n._reset=!1,n.safeFocusOn=!0))}function l(e){(self===top||self!==top&&a.globalHasFocus&&!a.globalHasFocus())&&(a._listeners.fireEvent("info",{type:"info",msg:JSON.stringify(e,["type","isTrusted"])}),n.dcrTimer&&n.dcrTimer.pause(),n.safeFocusOn&&(n.safeFocusOn=!1))}function d(e){a._listeners.fireEvent("info",{type:"info",msg:JSON.stringify(e,["type","isTrusted"])}),n.dcrTimer&&n.dcrTimer.play(n._reset),n._reset=!1}function c(e){s(e)}(r.GLCFG.userAgent.isAndroid()||r.GLCFG.userAgent.isIOS())&&(r.GLCFG.userAgent.isFB()||r.GLCFG.userAgent.isInstagram())&&(a.PLDCR.cadenceOverrideEnabled=!0),(n=n||{}).startDcrTick=function(){},n.latestDcrTick=function(){return n.latestDcrTickVal};function u(e){!document.hidden&&a.globalHasFocus&&a.globalHasFocus()?(a._listeners.fireEvent("info",{type:"info",msg:"Page visibilityApi - VISIBLE"}),n.dcrTimer&&n.dcrTimer.play(n._reset),n._reset=!1):(a._listeners.fireEvent("info",{type:"info",msg:"Page visibilityApi - HIDDEN"}),n.dcrTimer&&n.dcrTimer.pause(),n.safeFocusOn&&(n.safeFocusOn=!1))}function p(e){n.dcrTimer&&n.dcrTimer.stop()}return n.start=function(e){var t=!a.globalHasFocus||a.globalHasFocus();n._reset=e,null!==n.dcrTimer&&void 0!==n.dcrTimer&&!e||(t?(n.dcrTimer=i(o,1e3).play(!0),n._reset=!1):n.dcrTimer=i(o,1e3))},n.stop=function(){n.dcrTimer&&n.dcrTimer.stop()},n.init=function(e){r.browserSafeAddEventListener({element:Fe,eventType:"blur",func:l,useCapture:!1}),r.browserSafeAddEventListener({element:Fe,eventType:"focus",func:d,useCapture:!1}),r.browserSafeAddEventListener({element:Fe,eventType:"touchstart",func:c,useCapture:!1}),r.browserSafeAddEventListener({element:Fe,eventType:"beforeunload",func:p,useCapture:!1}),r.browserSafeAddEventListener({element:Fe,eventType:"pagehide",func:p,useCapture:!1}),document.addEventListener&&document.addEventListener("visibilitychange",u)},n.removeListeners=function(){r.browserSafeRemoveEventListener({element:Fe,eventType:"blur",func:l,useCapture:!1}),r.browserSafeRemoveEventListener({element:Fe,eventType:"focus",func:d,useCapture:!1}),r.browserSafeRemoveEventListener({element:Fe,eventType:"touchstart",func:c,useCapture:!1}),r.browserSafeRemoveEventListener({element:Fe,eventType:"pagehide",func:p,useCapture:!1}),a.browser.removeEventListener({element:Fe,eventType:"blur",useCapture:!1,func:a.flushEvent}),a.browser.removeEventListener({element:Fe,eventType:"pagehide",useCapture:!1,func:a.flushEvent}),a.userAgent.isFB()||a.userAgent.isInstagram()||(a.browser.removeEventListener({element:Fe.document,eventType:a.browser.visibilityEvent,useCapture:!1,func:a.flushEvent}),document.removeEventListener&&document.removeEventListener("visibilitychange",u))},n.safeFocus=s,n.built||(n.built=!0,n.BUILDVERSION=e,a.bindPlayers(n,"PLDCR")),n}),Fe.NOLBUNDLE.registerLib("PLLOG",function(n){"use strict";var e=n.PLLOG=n.PLLOG||{},t=(Fe.NOLBUNDLE,n.getBaseBuildVer?n.getBaseBuildVer()+"0":"6.0.0"+_localBuildVer),r={INFO:{info:i},DEBUG:{info:i,debug:function(e){Fe.console&&console.log("Nielsen Log: Debug - ",a(e))},warn:o,error:s},WARN:{info:i,warn:o},ERROR:{info:i,error:s},CONSOLE:{info:i},TRUE:{info:i},LOGGER:{logger:function(e){Fe.console&&console.log("Nielsen Log: Logger - ",a(e))}}};function a(e){return e&&e.target&&e.target.hasOwnProperty("msg")?e.target.msg:""}function i(e){Fe.console&&console.info("Nielsen Log: Info - ",a(e))}function o(e){Fe.console&&console.warn("Nielsen Log: Warn - ",a(e))}function s(e){Fe.console&&console.error("Nielsen Log: Error - ",a(e))}return e.init=function(e){var t;e&&e.getConfigParams&&(t=e.getConfigParams()).hasOwnProperty("ggParams")&&t.ggParams.hasOwnProperty("nol_sdkDebug")&&function(e){if(e){var t=String(e).toUpperCase();if(r.hasOwnProperty(t))for(var a in r[t]){a=String(a).toLowerCase();n._listeners.addListenerSingle(a,r[t][a])}}}(t.ggParams.nol_sdkDebug)},e.built||(e.built=!0,e.BUILDVERSION=t,n.bindPlayers(e,"PLLOG")),e})):console&&console.warn&&console.warn("Warning: Your current browser environment does not sufficiently support ECMA5 standards. Nielsen SDK will not be initialized.")}catch(Fe){Fe.message}}(window);
