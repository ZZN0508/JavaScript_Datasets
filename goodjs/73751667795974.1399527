void 0===_etmc&&(_etmc=[]),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)});var _etmc,_etmc_temp=_etmc;(_etmc={debug:!1,setup:function(t){for(var i=t.length,e=0;e<i;e++)this.callFunc(t[e])},push:function(t){this.tracking_disabled||this.callFunc(t)},callFunc:function(t){func_name=t[0],args=t.slice(1,3),this[func_name](args)},setOrgId:function(t){!0===Array.isArray(t[0])?this.org_id=t[0]:this.org_id=[t[0]]},setUserInfo:function(t){t=t[0];this.user_info&&this.user_info.email&&(t.email=this.user_info.email),this.user_info=t},setFirstParty:function(t){this.first_party=t[0]},setInsecure:function(t){this.insecure=t[0]},doNotTrack:function(){this.tracking_disabled=!0},setConversionTrackingInfoFromUrl:function(){this.email_job_id=this.getURLParameter("sfmc_j")||this.getURLParameter("j"),this.email=this.getURLParameter("sfmc_e")||this.getURLParameter("e"),null!=this.email&&(this.user_info?this.user_info.email=this.email:this.user_info={email:this.email}),this.email_list_id=this.getURLParameter("sfmc_l")||this.getURLParameter("l"),this.email_landing_url_id=this.getURLParameter("sfmc_u")||this.getURLParameter("u"),this.email_job_batch_id=this.getURLParameter("sfmc_jb")||this.getURLParameter("jb"),this.email_subscriber_id=this.getURLParameter("sfmc_s")||this.getURLParameter("s")||this.getURLParameter("sfmc_sub"),this.mid=this.getURLParameter("sfmc_mid")||this.getURLParameter("mid")},isEtConversionTracking:function(){return null!=this.email_job_id&&(null!=this.email||null!=this.email_subscriber_id)&&null!=this.email_list_id&&null!=this.email_landing_url_id&&null!=this.email_job_batch_id&&null!=this.mid},getCurrentLocation:function(){return window.location.href},trackPageView:function(t){this.setConversionTrackingInfoFromUrl();t=t[0]||{};this.org_id&&(t.title=t.title||document.title,t.url=t.url||this.getCurrentLocation(),t.referrer=document.referrer,this.isEtConversionTracking()&&(t.et_email={},t.et_email.job_id=this.email_job_id,t.et_email.list_id=this.email_list_id.replace(/\D+/,""),t.et_email.landing_url_id=this.email_landing_url_id,t.et_email.job_batch_id=this.email_job_batch_id,t.et_email.subscriber_id=this.email_subscriber_id,t.et_email.mid=this.mid),this.sendDataWithImage("track_page_view",t))},trackCart:function(t){var i=t[0]||{};this.org_id&&(t=this.standardizeCart(i),"clear_cart"in i&&(t.clear_cart=i.clear_cart),t.url=this.getCurrentLocation(),this.sendDataWithImage("track_cart",t))},trackConversion:function(t){var i=t[0]||[],e=t[1];this.org_id&&(t=this.standardizeCart(i),i.details?t.details=i.details:e&&("details"in e&&(t.details=e.details),"currency_code"in e&&(t.currency_code=e.currency_code)),t.url=this.getCurrentLocation(),this.sendDataWithImage("track_conversion",t))},trackEvent:function(t){var i=t[0]||{},e=i.name,t={};this.org_id&&null!==e&&(t.event_name=e,i.details&&(t.details=i.details),this.sendDataWithImage("track_event",t))},trackWishlist:function(t){t=t[0]||[];this.org_id&&t!=[]&&this.sendDataWithImage("track_wishlist",t)},trackRating:function(t){t=t[0]||{};this.org_id&&null!=t.rating&&this.sendDataWithImage("track_rating",t)},sendDataWithImage:function(t,i){this.user_info&&(i.user_info=this.user_info),1<this.org_id.length&&(temp_org_id=[this.org_id.shift()],i.child_ids=this.org_id,this.org_id=temp_org_id);var e=encodeURIComponent(JSON.stringify(i)),r="https";!0===this.insecure&&"http:"===document.location.protocol&&(r="http"),collect_url=this.first_party||"nova.collect.igodigital.com";t=r+"://"+collect_url+"/c2/"+this.org_id+"/"+t+"?payload="+e,e=document.createElement("img");e.src=t,e.style.display="none",e.width="0",e.height="0",e.title="blank image",e.alt="",e.setAttribute("aria-hidden","true"),this.debug?(console.log(i),console.log(e.outerHTML)):((i=document.createElement("div")).style.display="none",i.innerHTML=e.outerHTML,document.body.appendChild(i))},standardizeCart:function(t){var i={};return!0===Array.isArray(t)?i={cart:t}:"cart"in t?i=t:"item"in t&&(i={cart:[t]}),i},updateItem:function(t){var i=t[0];if(null!==i){var e,t=null,r=[];for(e in i=!Array.isArray(i)?[i]:i)i.hasOwnProperty(e)&&(this.setDefaultItemValues(i[e]),this.hasRequiredFields(i[e])?r.push(i[e]):console.log("ETMC update_rec_item error: required fields were missing from "+JSON.stringify(i[e])));null!==(t=0<r.length?r:t)&&this.sendDataWithImage("update_item",t)}},getURLParameter:function(t){t=(new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)").exec(window.location.search)||[,""])[1].replace(/\+/g,"%20");return decodeURIComponent(t)||null},hasRequiredFields:function(t){var i,e=void 0!==t.item&&void 0!==t.url;return e&&(i=t.item_type,this.shouldValidateName(i)?e=null!=t.name:"banner"===i&&(e=void 0!==t.image_url&&(void 0!==t.banner_size||void 0!==t.location_size))),e},shouldValidateName:function(t){return null==t||"product"===t||"content"===t||"asset"===t},setDefaultItemValues:function(t){null==t.item_type&&(t.item_type="content"),null==t.url&&(t.url=window.location.href),"banner"!==t.item_type&&"asset"!==t.item_type&&null==t.name&&(t.name=document.title)}}).setup(_etmc_temp);
