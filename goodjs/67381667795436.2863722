(window["tmg.build"]=window["tmg.build"]||[]).push([[25,10,11,12,15,17,18,21,26,27,28],[,,function(t,e,n){function d(){for(var t=0,e={};t<arguments.length;t++){var n,a=arguments[t];for(n in a)e[n]=a[n]}return e}e.a=function t(l){function u(t,e,n){if(1<arguments.length){"number"==typeof(n=d({path:"/"},u.defaults,n)).expires&&((i=new Date).setMilliseconds(i.getMilliseconds()+864e5*n.expires),n.expires=i);try{var a=JSON.stringify(e);/^[\{\[]/.test(a)&&(e=a)}catch(t){}return e=(e=encodeURIComponent(String(e))).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape),document.cookie=[t,"=",e,n.expires&&"; expires="+n.expires.toUTCString(),n.path&&"; path="+n.path,n.domain&&"; domain="+n.domain,n.secure?"; secure":""].join("")}t||(a={});for(var i=document.cookie?document.cookie.split("; "):[],r=/(%[0-9A-Z]{2})+/g,o=0;o<i.length;o++){var s=i[o].split("="),c=s[0].replace(r,decodeURIComponent);'"'===(s=s.slice(1).join("=")).charAt(0)&&(s=s.slice(1,-1));try{if(s=l&&l(s,c)||s.replace(r,decodeURIComponent),this.json)try{s=JSON.parse(s)}catch(t){}if(t===c){a=s;break}t||(a[c]=s)}catch(t){}}return a}return(u.get=u.set=u).getJSON=function(){return u.apply({json:!0},[].slice.call(arguments))},u.defaults={},u.remove=function(t,e){u(t,"",d(e,{expires:-1}))},u.withConverter=t,u}()},function(t,e,n){n.r(e);var a,i=n(0);function r(){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");i.default.create("tmg.page"),tmg.page={getMetaTag:this.getMetaTag,getMetaContent:this.getMetaContent,getPageType:this.getPageType,getPageTitle:this.getPageTitle,getChannel:this.getChannel,getBusinessSegment:this.getBusinessSegment,getCategory:this.getCategory,getContentType:this.getContentType,getArticleId:this.getArticleId,getPublishDate:this.getPublishDate,getKeywords:this.getKeywords,getLocation:this.getLocation,getLeadAssetLayout:this.getLeadAssetLayout,isArticle:this.isArticle,isSponsored:this.isSponsored,isGallery:this.isGallery,isPremium:this.isPremium,isApp:this.isApp.bind(this)}}t=n(1),a=[{key:"getPageType",value:function(){return window.dataLayer&&window.dataLayer.pageType}},{key:"getPageTitle",value:function(){return document.title}},{key:"getChannel",value:function(){return this.getMetaContent("tmgads.channel")}},{key:"getCategory",value:function(){return this.getMetaContent("DCSext.Category")}},{key:"getBusinessSegment",value:function(){return this.getMetaContent("tmgads.businessSegment")}},{key:"getContentType",value:function(){return this.getMetaContent("DCSext.Content_Type")}},{key:"getArticleId",value:function(){return this.getMetaContent("tmgads.articleid")}},{key:"getPublishDate",value:function(){return this.getMetaContent("DCSext.articleFirstPublished")}},{key:"getKeywords",value:function(){return this.getMetaContent("keywords").split(",").map(function(t){return t.trim()})}},{key:"getLocation",value:function(){return document.location}},{key:"getMetaContent",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"content",n=this.getMetaTag(t),a="generic";return a=n&&n.getAttribute(e)?n.getAttribute(e):a}},{key:"getMetaTag",value:function(t){return document.querySelector("meta[name='".concat(t,"']"))}},{key:"isArticle",value:function(){var e=this,n=!1;return["articleRenderer","articleRenderer2","longFormRenderer"].forEach(function(t){e.getPageType()===t&&(n=!0)}),n}},{key:"isGallery",value:function(){return"galleryRenderer"===this.getPageType()}},{key:"isSponsored",value:function(){return"sponsored"===this.getBusinessSegment()}},{key:"isPremium",value:function(){return"true"===this.getMetaContent("tmg.premium.state")}},{key:"isApp",value:function(){return"true"===this.getMetaContent("tmg.app")}},{key:"isAuthor",value:function(){return document.documentElement.hasAttribute("data-is-author")}},{key:"getLeadAssetLayout",value:function(){return this.isArticle()&&document.querySelector("[data-lead-asset-layout]")?document.querySelector("[data-lead-asset-layout]").dataset.leadAssetLayout:this.isArticle()?"hidden":void 0}}],function(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}(r.prototype,a),t.a.subscribe({topic:"tmg.page.ready",func:new(n=r),runIfAlreadyPublished:!0}),e.default=new n},function(t,e,n){t=n(7),t=n.n(t),n(0).default.create("tmg.store"),tmg.store=t.a,e.a=t.a},function(t,e,n){n.r(e),t=n(0),n={};function a(t){var e={};return e="string"==typeof t?i(t.replace(/'/g,'"')):e}function i(t,e){e=e||{};var a=t,n=[],i=[],r=/[{?,\s]\s*"([^"]|\\")+"\s*:(\s*"([^"]|\\")+"|(.+))\s*[},]/gi,o=/^\s*{?\s*'|'\s*}?\s*$/i;if(!t)return e;if("[object Object]"===Object.prototype.toString.call(t))return t;if(s(a)||((a.match(r)||[]).forEach(function(t){var e,n;t.includes('"label"')&&(e=(n=t.replace(/^\s*[{\s]|[,}]\s*$/gi,"").split(":")[1].replace(/\s*"([^]+|\\")"\s*$/gi,"$1")).replace(/"/gi,'\\"'),n=t.replace(n,e),a=a.replace(t,n))}),n=a.replace(r,"").split(/,(?=(?:[^"]*"[^"]*")*[^"]*$)/)),n.forEach(function(t){t=t.replace(/^\s*{|}\s*$/gi,""),s("{".concat(t,"}"))||i.push(t)}),i.forEach(function(t){var e=!1,n=t;!0===o.test(t)&&(n=t.replace(/^\s*'([^']+|\\')':/,'"$1":').replace(/:\s*('')\s*$/,': ""').replace(/:\s*'([^']+|\\')'\s*$/,': "$1"'),e=s("{".concat(n,"}"))),e||!0!==/[^"']\w+[^"']:/.test(n)||(n=n.replace(/^\s*(.*?):/,'"$1":'),e=s("{".concat(n,"}"))),e&&(a=a.replace(t,n))}),s(a))e=s(a);else try{JSON.parse(a)}catch(t){console.log("tmg.json.tryParse failed:",t)}return e}var s=function(t){var e=!1;try{e=JSON.parse(t)}catch(t){}return e};n={parseFromAem:a,tryParse:i,simpleTryParse:s},t.default.create("tmg.json"),tmg.json=n,e.default=n,tmg.parseAemJson=a},function(t,e,n){n.r(e);var a=n(2),i=n(5);t=n(0);var r=n(4),o=n(3);n=n(1);function s(){return!!a.a.get(p.session)}function c(){return"true"===g.subscriber}function l(){try{var t=!!localStorage.getItem("ACCESS_TOKEN"),e=localStorage.getItem("validAppUser")||"{}",n="TMG"===JSON.parse(e).subscriptionType;return t&&n}catch(t){return!1}}function u(){return window.sessionStorage.removeItem("id_token"),window.sessionStorage.removeItem("access_token"),window.localStorage.removeItem("validAppUser"),window.localStorage.removeItem("ACCESS_TOKEN"),a.a.remove(p.session),d(),!0}function d(){return g=v(),m(f),g}var h={pId:"",firstName:"",lastName:"",username:"",email:"",readerType:"",subscriber:"",subButton:"",subscriptionType:""},p={livefyreToken:"livefyre-token",pianoRefToken:"user_ref_token",meterCount:"tmg_meter_count",personalisation:"tmg_p13n",publicId:"tmg_pid",registrationSuccess:"tmg_registration_success",rememberMe:"tmg_rem",session:"tmg_session",refreshToken:"tmg_refresh",subscriptionConfirmation:"tmg_subscription_confirmation"},f=document.querySelector("html"),g={},m=function(t,e){if(e||(n=document.querySelectorAll('[class*="'.concat("logged-in--",'"], [class*="').concat("is-subscriber--",'"], [class*="').concat("app-tmg-subscriber--",'"]')),(n=Array.prototype.slice.call(n)).forEach(function(t){m(t,!0)})),t)return e="\\b(?:".concat("logged-in--","|").concat("is-subscriber--","|").concat("app-tmg-subscriber--",").+\\b"),t.className=t.className.replace(new RegExp(e,"g"),""),t.classList&&(t.classList.add("".concat("logged-in--").concat(s())),t.classList.add("".concat("is-subscriber--").concat(c())),t.classList.add("".concat("app-tmg-subscriber--").concat(l()))),t.classList;var n},v=function(){var t=a.a.get(p.personalisation);return i.default.tryParse(t,h)},y={applyStatusCssClasses:m,clearAllData:function(){for(var t in u(),p)a.a.remove(p[t]);r.a.remove("fyre-auth"),r.a.remove("fyre-authentication-creds"),r.a.remove("COMMENTING_TOKEN"),d()},getLiveFyreToken:function(){return a.a.get(p.livefyreToken)||!1},getLiveFyreDetails:function(){var t=r.a.get("fyre-auth")||"{}";return i.default.tryParse(t)},getPianoRefToken:function(){return a.a.get(p.pianoRefToken)||!1},getMeterCount:function(){return!1},getMyTelegraphToken:function(){var t=r.a.storage.read("tmg.user.mytelegraph.token");return"undefined"!==t&&null!==t&&t},getProfile:v,getSessionId:function(){return a.a.get(p.session)||""},getRefreshToken:function(){return a.a.get(p.refreshToken)||""},isLoggedIn:s,isRegistered:function(){return!!g.pId},isSubscriber:c,isAdLite:function(){return"true"===o.default.getMetaContent("tmg.isAdLite")},canComment:function(){return s()&&c()},canCommentInApp:function(){var t=!!localStorage.getItem("COMMENTING_TOKEN"),e=!!a.a.get(p.livefyreToken);return l()&&t&&e},isMyTelegraphOnboarded:function(){return!!r.a.storage.read("tmg.user.mytelegraph.onboarded.status")},login:function(){return d(),!1},logout:u,setMyTelegraphToken:function(t){return r.a.storage.write("tmg.user.mytelegraph.token",t.token)},setMyTelegraphOnboarded:function(t){return r.a.storage.write("tmg.user.mytelegraph.onboarded.status",t.status)},updateState:d};t.default.create("tmg.user"),window.tmg.user=y,g=d(),n.a.publish({topic:"tmg.user.ready"}),e.default=y},function(t,e,n){!function(n){t.exports=function n(a,i,r){function o(e,t){if(!i[e]){if(!a[e])throw(t=Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",t;t=i[e]={exports:{}},a[e][0].call(t.exports,function(t){return o(a[e][1][t]||t)},t,t.exports,n,a,i,r)}return i[e].exports}for(var t=0;t<r.length;t++)o(r[t]);return o}({1:[function(t,e,n){n=t("../src/store-engine"),t=[t("../storages/localStorage"),t("../storages/sessionStorage"),t("../storages/cookieStorage"),t("../storages/memoryStorage")],e.exports=n.createStore(t,[])},{"../src/store-engine":2,"../storages/cookieStorage":4,"../storages/localStorage":5,"../storages/memoryStorage":6,"../storages/sessionStorage":7}],2:[function(t,e,n){function a(t,e,n){n=n||"",t&&!d(t)&&(t=[t]),e&&!d(e)&&(e=[e]);var a=n?"__storejs_"+n+"_":"",i=n?new RegExp("^"+a):null;if(!/^[a-zA-Z0-9_\-]*$/.test(n))throw Error("store.js namespaces can only have alphanumerics + underscores and dashes");var r=u({_namespacePrefix:a,_namespaceRegexp:i,_testStorage:function(t){try{t.write("__storejs__test__","__storejs__test__");var e="__storejs__test__"===t.read("__storejs__test__");return t.remove("__storejs__test__"),e}catch(t){return!1}},_assignPluginFnProp:function(a,t){var i=this[t];this[t]=function(){var n=o(arguments,0),t=this,e=[function(){if(i)return c(arguments,function(t,e){n[e]=t}),i.apply(t,n)}].concat(n);return a.apply(t,e)}},_serialize:function(t){return JSON.stringify(t)},_deserialize:function(e,t){if(!e)return t;var n="";try{n=JSON.parse(e)}catch(t){n=e}return void 0!==n?n:t},_addStorage:function(t){this.enabled||this._testStorage(t)&&(this.storage=t,this.enabled=!0)},_addPlugin:function(n){var a=this;if(d(n))c(n,function(t){a._addPlugin(t)});else if(!s(this.plugins,function(t){return n===t})){if(this.plugins.push(n),!h(n))throw Error("Plugins must be function values that return objects");var t=n.call(this);if(!p(t))throw Error("Plugins must return an object of function properties");c(t,function(t,e){if(!h(t))throw Error("Bad plugin property: "+e+" from plugin "+n.name+". Plugins should only return functions.");a._assignPluginFnProp(t,e)})}},addStorage:function(t){!function(){var t="undefined"==typeof console?null:console;t&&(t.warn||t.log).apply(t,arguments)}("store.addStorage(storage) is deprecated. Use createStore([storages])"),this._addStorage(t)}},f,{plugins:[]});return r.raw={},c(r,function(t,e){h(t)&&(r.raw[e]=l(r,t))}),c(t,function(t){r._addStorage(t)}),c(e,function(t){r._addPlugin(t)}),r}var o=(t=t("./util")).slice,s=t.pluck,c=t.each,l=t.bind,u=t.create,d=t.isList,h=t.isFunction,p=t.isObject,f={version:"2.0.12",enabled:!(e.exports={createStore:a}),get:function(t,e){return t=this.storage.read(this._namespacePrefix+t),this._deserialize(t,e)},set:function(t,e){return void 0===e?this.remove(t):(this.storage.write(this._namespacePrefix+t,this._serialize(e)),e)},remove:function(t){this.storage.remove(this._namespacePrefix+t)},each:function(n){var a=this;this.storage.each(function(t,e){n.call(a,a._deserialize(t),(e||"").replace(a._namespaceRegexp,""))})},clearAll:function(){this.storage.clearAll()},hasNamespace:function(t){return this._namespacePrefix=="__storejs_"+t+"_"},createStore:function(){return a.apply(this,arguments)},addPlugin:function(t){this._addPlugin(t)},namespace:function(t){return a(this.storage,this.plugins,t)}}},{"./util":3}],3:[function(t,a,e){!function(t){function o(t,e){return Array.prototype.slice.call(t,e||0)}function r(t,n){e(t,function(t,e){return n(t,e),0})}function e(t,e){if(i(t)){for(var n=0;n<t.length;n++)if(e(t[n],n))return t[n]}else for(n in t)if(t.hasOwnProperty(n)&&e(t[n],n))return t[n]}function i(t){return null!=t&&"function"!=typeof t&&"number"==typeof t.length}var s=Object.assign||function(n,t,e,a){for(var i=1;i<arguments.length;i++)r(Object(arguments[i]),function(t,e){n[e]=t});return n},n=function(){if(Object.create)return function(t,e,n,a){var i=o(arguments,1);return s.apply(this,[Object.create(t)].concat(i))};function r(){}return function(t,e,n,a){var i=o(arguments,1);return r.prototype=t,s.apply(this,[new r].concat(i))}}();a.exports={assign:s,create:n,trim:String.prototype.trim?function(t){return String.prototype.trim.call(t)}:function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},bind:function(t,e){return function(){return e.apply(t,Array.prototype.slice.call(arguments,0))}},slice:o,each:r,map:function(t,n){var a=i(t)?[]:{};return e(t,function(t,e){return a[e]=n(t,e),0}),a},pluck:e,isList:i,isFunction:function(t){return t&&"[object Function]"==={}.toString.call(t)},isObject:function(t){return t&&"[object Object]"==={}.toString.call(t)},Global:"undefined"!=typeof window?window:t}}.call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(t,e,n){function a(t){for(var e,n,a=s.cookie.split(/; ?/g),i=a.length-1;0<=i;i--)o(a[i])&&(e=a[i].split("="),n=unescape(e[0]),t(unescape(e[1]),n))}function i(t){t&&r(t)&&(s.cookie=escape(t)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/")}function r(t){return new RegExp("(?:^|;\\s*)"+escape(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(s.cookie)}n=(t=t("../src/util")).Global;var o=t.trim;e.exports={name:"cookieStorage",read:function(t){return t&&r(t)?(t="(?:^|.*;\\s*)"+escape(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*",unescape(s.cookie.replace(new RegExp(t),"$1"))):null},write:function(t,e){t&&(s.cookie=escape(t)+"="+escape(e)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/")},each:a,remove:i,clearAll:function(){a(function(t,e){i(e)})}};var s=n.document},{"../src/util":3}],5:[function(t,e,n){function a(t){return i.localStorage.getItem(t)}var i=t("../src/util").Global;e.exports={name:"localStorage",read:a,write:function(t,e){return i.localStorage.setItem(t,e)},each:function(t){for(var e=i.localStorage.length-1;0<=e;e--){var n=i.localStorage.key(e);t(a(n),n)}},remove:function(t){return i.localStorage.removeItem(t)},clearAll:function(){return i.localStorage.clear()}}},{"../src/util":3}],6:[function(t,e,n){e.exports={name:"memoryStorage",read:function(t){return a[t]},write:function(t,e){a[t]=e},each:function(t){for(var e in a)a.hasOwnProperty(e)&&t(a[e],e)},remove:function(t){delete a[t]},clearAll:function(t){a={}}};var a={}},{}],7:[function(t,e,n){function a(t){return i.sessionStorage.getItem(t)}var i=t("../src/util").Global;e.exports={name:"sessionStorage",read:a,write:function(t,e){return i.sessionStorage.setItem(t,e)},each:function(t){for(var e=i.sessionStorage.length-1;0<=e;e--){var n=i.sessionStorage.key(e);t(a(n),n)}},remove:function(t){return i.sessionStorage.removeItem(t)},clearAll:function(){return i.sessionStorage.clear()}}},{"../src/util":3}]},{},[1])(1)}.call(this,n(13))},function(t,e,n){n.r(e);var a,i=n(0);function r(){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");i.default.create("tmg.utils"),tmg.utils={injectScript:this.injectScript,getRandomInt:this.getRandomInteger}}t=n(1),a=[{key:"injectScript",value:function(n){var a=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];return new Promise(function(t,e){n?((e=document.createElement("script")).setAttribute("src",n),e.addEventListener("load",t,!1),a&&e.setAttribute("defer","true"),document.querySelector("head").appendChild(e)):e(Error("No src supplied"))})}},{key:"getRandomInteger",value:function(t,e){if(t&&e)return t=Math.ceil(t),Math.floor(Math.random()*(Math.floor(e)-t)+t)}}],function(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}(r.prototype,a),t.a.subscribe({topic:"tmg.page.ready",func:new(n=r),runIfAlreadyPublished:!0}),e.default=n},function(t,e,n){var a;n.r(e),t=n(0);function r(t,e){return(t=c(e).exec(t))&&decodeURIComponent(t[2])}function i(t,e,n){var a,i;return void 0===t&&(t=o.default.getLocation().search),null===r(t,e)?(a="".concat(e,"=").concat(encodeURIComponent(n)),i=s.exec(t)[0],t.replace(s,(i.length?i+"&":"?")+a)):t.replace(c(e),"$1=".concat(encodeURIComponent(n)))}var o=n(3),s=new RegExp(/\?[^#]*|(?=#)|$/),c=(a={},function(t){return a[t]||(a[t]=new RegExp("([?&;]".concat(t,"(?=[=&;#]|$))=?([^&;#]*)")))});n=function(t,e){if(null===r(e,t))return e;for(var n=e.split("?")[0],a=(e=(-1!==e.indexOf("?")?e.split("?")[1]:"").split("&")).length-1;0<=a;--a)e[a].split("=")[0]===t&&e.splice(a,1);return n+(0<e.length?"?":"")+e.join("&")};function l(t,e){return null!==r(t,"redirectTo")?i(t,"redirectTo",e):t}t.default.create("tmg.GET_PARAM"),tmg.getQuerystringParam=r,tmg.setQuerystringParam=i,tmg.removeQuerystringParam=n,tmg.updateRedirectParam=l,location.search.substr(1).split("&").forEach(function(t){1<(t=t.split("=")).length?tmg.GET_PARAM[t[0]]=decodeURIComponent(t[1]):tmg.GET_PARAM[t[0]]=""}),e.default={matchParam:c,matchQuerystring:s,getQuerystringParam:r,removeQuerystringParam:n,setQuerystringParam:i,updateRedirectParam:l}},function(t,e,n){function a(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}n.r(e);var i=n(0);t=n(1);var r,o=n(2),s=n(6),c=n(3),l=n(9),u=n(5),d=(r=[{key:"addPropertyValue",value:function(t,e){t&&e&&(window.dataLayer[t]=e)}}],n=[{key:"update",value:function(){this.cookieStatus.registrationSuccess.value?(this.onRegistrationSuccess(),this.removeCookie(this.cookieStatus.registrationSuccess.name)):this.cookieStatus.registrationUpdate.value?(this.onRegistrationUpdate(),this.removeCookie(this.cookieStatus.registrationUpdate.name)):this.cookieStatus.subscriptionConfirmation.value?(this.onSubscriptionConfirmation(),this.removeCookie(this.cookieStatus.subscriptionConfirmation.name)):this.isPaymentRenderer&&this.updateSubscription(),this.updateUserStatus()}},{key:"updateUserStatus",value:function(){s.default.isLoggedIn()?window.dataLayer.userStatus=s.default.isSubscriber()?"subscribed":"registered":window.dataLayer.userStatus="anonymous"}},{key:"onRegistrationSuccess",value:function(){var t=this.checkCookie(this.cookieStatus.registrationSuccess,"success_facebook"),e=this.checkCookie(this.cookieStatus.registrationSuccess,"success_emailoffers-true");window.dataLayer.event=["registrationComplete"],window.dataLayer.registration={registrationType:t?"facebook":"email",emailOptIn:e?"true":"false"}}},{key:"onRegistrationUpdate",value:function(){"1"!==this.cookieStatus.registrationUpdate.value?(window.dataLayer.event=["registrationUpdate","newsletterSignup"],window.dataLayer.newsletterType=this.cookieStatus.registrationUpdate.value):window.dataLayer.event=["registrationUpdate"],window.dataLayer.registration={registrationType:"email"}}},{key:"onSubscriptionConfirmation",value:function(){window.dataLayer.event=["subscriptionConfirmation"],window.dataLayer.subscription=u.default.tryParse(JSON.stringify(this.cookieStatus.subscriptionConfirmation.value))}},{key:"updateSubscription",value:function(){window.dataLayer.event=["subscriptionCheckout"],window.dataLayer.subscription={productID:l.default.getQuerystringParam(c.default.getLocation().search,"productId")}}},{key:"checkCookie",value:function(t,e){return!(!t||!e)&&t.value===e}},{key:"removeCookie",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;t&&o.a.remove(t,{domain:".telegraph.co.uk"})}},{key:"initListeners",value:function(t){var e=this;(t=document.querySelectorAll(t))&&t.forEach(function(t){return e.bindListeners(t)})}},{key:"bindListeners",value:function(e){var n=this;this.listenerEvents.forEach(function(t){e.addEventListener(t,function(t){n.addEvent(t.target.dataset.layerEvent)})})}},{key:"addEvent",value:function(t){window.dataLayer.event!==t&&(window.dataLayer.event=t)}},{key:"getCookies",value:function(){return{registrationSuccess:{name:"tmg_registration_success",value:o.a.get("tmg_registration_success")},registrationUpdate:{name:"tmg_registration_update",value:o.a.get("tmg_registration_update")},subscriptionConfirmation:{name:"tmg_subscription_confirmation",value:o.a.get("tmg_subscription_confirmation")}}}}],a(h.prototype,n),a(h,r),h);function h(){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");i.default.create("tmg.dataLayerUtils"),window.dataLayer=window.dataLayer||{},this.cookieStatus=this.getCookies(),this.isPaymentRenderer=window.dataLayer.pageType&&"paymentRenderer"===window.dataLayer.pageType,this.listenerEvents=["click","input"],this.initListeners("[data-layer-event]"),tmg.dataLayerUtils={cookieStatus:this.cookieStatus,update:this.update,isPaymentRenderer:this.isPaymentRenderer,onRegistrationSuccess:this.onRegistrationSuccess,onRegistrationUpdate:this.onRegistrationUpdate,onSubscriptionConfirmation:this.onSubscriptionConfirmation,updateSubscription:this.updateSubscription,updateUserStatus:this.updateUserStatus,checkCookie:this.checkCookie,removeCookie:this.removeCookie,addPropertyValue:this.addPropertyValue},this.update()}t.a.subscribe({topic:"tmg.page.ready",func:function(){new d},runIfAlreadyPublished:!0}),e.default=d},function(t,e,n){n.r(e),t=n(1);var a=n(0),i=n(3);function r(){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");this.params={local:"local",qa:"qa",ci:"ci",staging:"staging",prod:"prod"},this.currentEnv=this.determineEnvironment(),a.default.create("tmg.environment"),tmg.environment={currentEnv:this.currentEnv,getEnvironment:this.getEnvironment,getList:this.getList,getTld:this.getTld,isCommentingTurnedOn:this.isCommentingTurnedOn,isHttps:this.isHttps,isLocal:this.isLocal,isProd:this.isProd}}(function(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}})(r.prototype,[{key:"determineEnvironment",value:function(){var t=i.default.getLocation().hostname.split(".");return t.some(function(t){return"local"===t||"127"===t||"localhost"===t})?this.getList().local:t.some(function(t){return/(^|-)ci[0-9]+(-app)?$/i.test(t)})?this.getList().ci:t.some(function(t){return/(^|-)qa[0-9]+(-app)?$/i.test(t)})?this.getList().qa:t.some(function(t){return/(^|-)staging(.*)$/i.test(t)})?this.getList().staging:this.getList().prod}},{key:"getList",value:function(){return this.params}},{key:"getEnvironment",value:function(){return this.currentEnv}},{key:"getTld",value:function(){return"telegraph.co.uk"}},{key:"isCommentingTurnedOn",value:function(){var t=!1;try{void 0!==tmg.COMMENTING_STATUS&&(t=!!tmg.COMMENTING_STATUS)}catch(t){console.log(t)}return t}},{key:"isHttps",value:function(){return"https:"===i.default.getLocation().protocol||this.isLocal()}},{key:"isLocal",value:function(){return this.getEnvironment()===this.getList().local}},{key:"isProd",value:function(){return this.getEnvironment()===this.getList().prod}}]),t.a.subscribe({topic:"tmg.page.ready",func:new(n=r),runIfAlreadyPublished:!0}),e.default=n},,function(t,e){e=function(){return this}();try{e=e||new Function("return this")()}catch(t){"object"==typeof window&&(e=window)}t.exports=e},,,,function(t,e,n){e.a={throttle:function(a,i){var r,o;return i=i||200,function(){var t=this,e=+new Date,n=arguments;r&&e<r+i?(clearTimeout(o),o=setTimeout(function(){r=e,a.apply(t,n)},i)):(r=e,a.apply(t,n))}}}},,,,,function(t,e,n){var a=n(0),i=n(9);function r(){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");this.redirectSelector="[data-redirect-current]"}t=n(1),function(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}(r.prototype,[{key:"init",value:function(){var t=document.querySelectorAll(this.redirectSelector);t.length&&this.setRedirects(t),a.default.create("tmg.redirect"),window.tmg.redirect={getAmendedHref:this.getAmendedHref}}},{key:"setRedirects",value:function(t){var n=this;t.forEach(function(t){var e=t.getAttribute("href");e&&t.setAttribute("href",n.getAmendedHref(e))})}},{key:"getAmendedHref",value:function(t){return-1<t.indexOf("redirectTo")?i.default.updateRedirectParam(t,window.location.href):i.default.setQuerystringParam(t,"redirectTo",window.location.href)}}]),t.a.subscribe({topic:"tmg.page.ready",func:(new(n=r)).init(),runIfAlreadyPublished:!0}),e.a=new n},,function(t,e,n){n.r(e),t=n(1);var a=n(17),i=(function(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}(r.prototype,[{key:"init",value:function(){this.options.scrollableBar&&(""!==this.params.defaultPositionSelector&&this.scrollToCurrentItem(),this.isTouchDevice()||this.bindListeners())}},{key:"bindListeners",value:function(){var e=this;this.options.scrollableBar.addEventListener("mousedown",function(t){e.onMouseDown(t)}),window.addEventListener("mouseup",function(t){e.options.isDragging&&e.onMouseUp(t)}),window.addEventListener("mousemove",a.a.throttle(function(t){e.options.isDragging&&e.onDrag(t)},10)),this.handleDragLinkClick()}},{key:"setStartPosition",value:function(t){this.options.startMousePosition=t.pageX-this.options.scrollableBar.offsetLeft,this.options.startScrollPosition=this.options.scrollableBar.scrollLeft}},{key:"onMouseDown",value:function(t){this.options.isDragging=!0,t.preventDefault(),this.options.startScrollItem=t.target,this.options.endScrollItem=null,this.setStartPosition(t),this.toggleActiveClass(!0)}},{key:"onMouseUp",value:function(t){this.options.isDragging=!1,this.toggleActiveClass(!1),this.options.endScrollItem=t.target}},{key:"onDrag",value:function(t){this.options.scrollableBar.scrollLeft=this.options.startScrollPosition-(t.pageX-this.options.scrollableBar.offsetLeft-this.options.startMousePosition)}},{key:"handleDragLinkClick",value:function(){var e=this;this.options.scrollableBar.querySelectorAll("a").forEach(function(t){t.addEventListener("click",function(t){e.hasScrolled()&&e.options.startScrollItem===e.options.endScrollItem&&(t.preventDefault(),e.options.startScrollItem=null,e.options.endScrollItem=null)})})}},{key:"hasScrolled",value:function(){return this.options.startScrollPosition!==this.options.scrollableBar.scrollLeft}},{key:"scrollToCurrentItem",value:function(){var t=this.options.scrollableBar.querySelector(this.params.defaultPositionSelector);t&&t.offsetLeft>this.options.scrollableBar.offsetWidth-100&&(this.options.scrollableBar.scrollLeft=t.offsetLeft/2)}},{key:"toggleActiveClass",value:function(t){(t&&!this.options.scrollableBar.classList.contains(this.params.activeClass)||!t&&this.options.scrollableBar.classList.contains(this.params.activeClass))&&this.options.scrollableBar.classList.toggle(this.params.activeClass)}},{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints}}]),r);function r(t){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");this.params=Object.assign({scrollableBarSelector:"[data-drag-scroll]",activeClass:"is-dragging",defaultPositionSelector:""},t),this.options={scrollableBar:document.querySelector(this.params.scrollableBarSelector),isDragging:!1,startMousePosition:0,startScrollPosition:0,startScrollItem:null,endScrollItem:null}}t.a.subscribe({topic:"tmg.page.ready",func:function(){new i({defaultPositionSelector:"[data-current-navigation-item]"}).init()},runIfAlreadyPublished:!0}),e.default=i},function(t,e,n){n.r(e);var a=n(0);t=function(){a.default.create("tmg.guid"),window.tmg.guid="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})},n(1).a.subscribe({topic:"tmg.page.ready",func:t,runIfAlreadyPublished:!0}),e.default={guid:t}},function(t,e,n){n.r(e);var a=n(21);function i(t){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this.params=Object.assign({openTriggerSelector:"[data-modal-open-button]",contentUrl:"/all-sections.modal/"},t),this.openButton=document.querySelector(this.params.openTriggerSelector),this.modal="",this.keydownActions=this.keydownActions.bind(this),this.options={hasContent:!1,keyboardNavigation:!1,firstFocusableElement:"",lastFocusableElement:""}}n=[{key:"init",value:function(){this.bindButtonClick(this.openButton)}},{key:"bindButtonClick",value:function(t){var e=this;t&&t.addEventListener("click",function(t){t.preventDefault(),e.modal||e.createModalContainer(),e.toggleModal()})}},{key:"createModalContainer",value:function(){var t=document.createElement("div");t.classList.add("all-sections-modal","all-sections-modal--hidden"),t.setAttribute("aria-hidden","true"),t.setAttribute("role","dialog"),t.setAttribute("aria-label","Navigation modal containing links for all sections of the site"),t.setAttribute("data-all-sections-modal",""),document.body.appendChild(t),this.modal=t}},{key:"toggleModal",value:function(){this.modal.classList.toggle("all-sections-modal--hidden"),document.querySelector("html").classList.toggle("all-sections-modal--is-open"),this.options.hasContent?this.toggleFocusableElement():(this.setModalHeaderContent(),this.setModalContentWrapper(),this.getModalContent()),this.bindKeydownEventListeners(),this.modal.classList.contains("all-sections-modal--hidden")?this.modal.setAttribute("aria-hidden",!0):this.modal.setAttribute("aria-hidden",!1)}},{key:"bindKeydownEventListeners",value:function(){this.modal.classList.contains("all-sections-modal--hidden")?document.removeEventListener("keydown",this.keydownActions):document.addEventListener("keydown",this.keydownActions)}},{key:"setModalHeaderContent",value:function(){this.modal.insertAdjacentHTML("beforeend",'\n\t\t\t<header class="site-header all-sections-modal__header-wrapper">\n\t\t\t\t<div class="site-header__container site-header__primary-content all-sections-modal__header-content">\n\n\t\t\t\t\t<div class="site-header__logo">\n\t\t\t\t\t\t<div class="e-site-logo__award">\n\t\t\t\t\t\t\tNews website of the year\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<a href="https://www.telegraph.co.uk" class="e-site-logo">\n\t\t\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg"\n\t\t\t\t\t\t\t\taria-labelledby="site-logo-title"\n\t\t\t\t\t\t\t\tclass="e-site-logo__image">\n\t\t\t\t\t\t\t\t<use xlink:href="#site-logo"></use>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t'.concat(this.hasPoppyLogo()?this.getPoppyMarkup():"",'\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class="all-sections-modal__button">\n\t\t\t\t\t\t<div class="e-site-header-button e-site-header-button--close">\n\t\t\t\t\t\t\t<a href=""\n\t\t\t\t\t\t\t\tclass="e-site-header-button__link"\n\t\t\t\t\t\t\t\taria-label="Close all sections navigation menu"\n\t\t\t\t\t\t\t\tdata-modal-close-button>\n\t\t\t\t\t\t\t\t<span class="all-sections-modal__button-text">Close Menu</span>\n\t\t\t\t\t\t\t\t<svg id="global-close" class="e-site-header-button__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1792 1792">\n\t\t\t\t\t\t\t\t\t<polygon points="1792,1712.8 975.2,896 1792,79.2 1712.8,0 896,816.8 79.2,0 0,79.2 816.8,896 0,1712.8 79.2,1792 896,975.2\n\t\t\t\t\t\t\t\t\t\t1712.8,1792"/>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</header>')),this.bindButtonClick(document.querySelector("[data-modal-close-button]"))}},{key:"setModalContentWrapper",value:function(){this.modal.insertAdjacentHTML("beforeend",'<div class="container all-sections__container" data-modal-content-wrapper></div>')}},{key:"getModalContent",value:function(){var e=this;return fetch(this.params.contentUrl,{cache:"no-cache"}).then(function(t){if(t.ok)return t.text();throw Error("Please refresh and try again.")}).then(function(t){e.setModalContent(t),e.initAccordionForModal()}).catch(function(t){e.setModalContent('\n\t\t\t\t\t<div class="all-sections-modal__error-message">\n\t\t\t\t\t\t<h2 class="all-sections__main-heading u-heading-2">Something went wrong</h2>\n\t\t\t\t\t\t<p class="all-sections__body-text">'.concat(t.message,"</p>\n\t\t\t\t\t</div>"))})}},{key:"setModalContent",value:function(t){document.querySelector("[data-modal-content-wrapper]").insertAdjacentHTML("beforeend",t),this.defineFocusableElements(),this.toggleFocusableElement(),this.options.hasContent=!0}},{key:"keydownActions",value:function(t){this.bindEscapeKey(t),this.trapFocusWithinModal(t)}},{key:"bindEscapeKey",value:function(t){27===t.keyCode&&(this.resetScrollPosition(),this.toggleModal())}},{key:"trapFocusWithinModal",value:function(t){this.options.hasContent&&(9===t.keyCode||t.shiftKey&&9===t.keyCode)&&(this.options.keyboardNavigation||this.setFocusPosition(t,!0,!0),t.shiftKey&&9===t.keyCode?t.target===this.options.firstFocusableElement&&this.setFocusPosition(t,!1):9===t.keyCode&&t.target===this.options.lastFocusableElement&&this.setFocusPosition(t,!0))}},{key:"setFocusPosition",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];t.preventDefault(),n&&(this.options.keyboardNavigation=!0),(e?this.options.firstFocusableElement:this.options.lastFocusableElement).focus()}},{key:"defineFocusableElements",value:function(){var t=this.modal.querySelectorAll("a, button");this.options.firstFocusableElement=t[0],this.options.lastFocusableElement=t[t.length-1]}},{key:"toggleFocusableElement",value:function(){this.options.keyboardNavigation&&(this.modal.classList.contains("all-sections-modal--hidden")?this.openButton:this.options.firstFocusableElement).focus()}},{key:"resetScrollPosition",value:function(){this.modal.classList.contains("all-sections-modal--hidden")||0===this.modal.scrollTop||(this.modal.scrollTop=0)}},{key:"initAccordionForModal",value:function(){new a.default({accordionSelector:"[data-accordion-modal]",hideClasses:["accordion--is-collapsed","accordion--is-expanded"]}).init()}},{key:"hasPoppyLogo",value:function(){var t=document.querySelector("[data-has-poppy-logo]");return t&&"true"===t.getAttribute("data-has-poppy-logo")}},{key:"getPoppyMarkup",value:function(){return'<div class="e-site-logo__poppy">\n\t\t\t<svg viewbox="0 0 17 32">\n\t\t\t\t<use xlink:href="#poppy"></use>\n\t\t\t</svg>\n\t\t</div>'}}],function(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}(i.prototype,n),(new(t=i)).init(),e.default=t},,function(t,e,n){function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var a,i;a=function(i){function r(t,e,n,a){u?t.addEventListener(e,n,!!a):t.attachEvent("on"+e,n)}function e(t,e,n,a){u?t.removeEventListener(e,n,!!a):t.detachEvent("on"+e,n)}function o(t,e){return-1!==(" "+t.className+" ").indexOf(" "+e+" ")}function d(t,e){o(t,e)||(t.className=""===t.className?e:t.className+" "+e)}function h(t,e){t.className=(e=(" "+t.className+" ").replace(" "+e+" "," ")).trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function g(t){return/Array/.test(Object.prototype.toString.call(t))}function x(t){return/Date/.test(Object.prototype.toString.call(t))&&!isNaN(t.getTime())}function P(t,e){return[31,0==t%4&&0!=t%100||0==t%400?29:28,31,30,31,30,31,31,30,31,30,31][e]}function M(t){x(t)&&t.setHours(0,0,0,0)}function O(t,e){return t.getTime()===e.getTime()}function s(t,e,n){var a,i;for(a in e)(i=void 0!==t[a])&&"object"===m(e[a])&&null!==e[a]&&void 0===e[a].nodeName?x(e[a])?n&&(t[a]=new Date(e[a].getTime())):g(e[a])?n&&(t[a]=e[a].slice(0)):t[a]=s({},e[a],n):!n&&i||(t[a]=e[a]);return t}function c(t,e,n){var a;p.createEvent?((a=p.createEvent("HTMLEvents")).initEvent(e,!0,!1),a=s(a,n),t.dispatchEvent(a)):p.createEventObject&&(a=p.createEventObject(),a=s(a,n),t.fireEvent("on"+e,a))}function n(t){return t.month<0&&(t.year-=Math.ceil(Math.abs(t.month)/12),t.month+=12),11<t.month&&(t.year+=Math.floor(Math.abs(t.month)/12),t.month-=12),t}function j(t,e,n){for(e+=t.firstDay;7<=e;)e-=7;return(n?t.i18n.weekdaysShort:t.i18n.weekdays)[e]}function t(t){var n=this,a=n.config(t);n._onMouseDown=function(t){if(n._v){var e=(t=t||window.event).target||t.srcElement;if(e)if(o(e,"is-disabled")||(!o(e,"pika-button")||o(e,"is-empty")||o(e.parentNode,"is-disabled")?o(e,"pika-prev")?n.prevMonth():o(e,"pika-next")&&n.nextMonth():(n.setDate(new Date(e.getAttribute("data-pika-year"),e.getAttribute("data-pika-month"),e.getAttribute("data-pika-day"))),a.bound&&f(function(){n.hide(),a.blurFieldOnSelect&&a.field&&a.field.blur()},100))),o(e,"pika-select"))n._c=!0;else{if(!t.preventDefault)return t.returnValue=!1;t.preventDefault()}}},n._onChange=function(t){t=(t=t||window.event).target||t.srcElement;t&&(o(t,"pika-select-month")?n.gotoMonth(t.value):o(t,"pika-select-year")&&n.gotoYear(t.value))},n._onKeyChange=function(t){if(t=t||window.event,n.isVisible())switch(t.keyCode){case 13:case 27:a.field&&a.field.blur();break;case 37:t.preventDefault(),n.adjustDate("subtract",1);break;case 38:n.adjustDate("subtract",7);break;case 39:n.adjustDate("add",1);break;case 40:n.adjustDate("add",7)}},n._onInputChange=function(t){var e;t.firedBy!==n&&(e=a.parse?a.parse(a.field.value,a.format):l?(e=i(a.field.value,a.format,a.formatStrict))&&e.isValid()?e.toDate():null:new Date(Date.parse(a.field.value)),x(e)&&n.setDate(e),n._v||n.show())},n._onInputFocus=function(){n.show()},n._onInputClick=function(){n.show()},n._onInputBlur=function(){var t=p.activeElement;do{if(o(t,"pika-single"))return}while(t=t.parentNode);n._c||(n._b=f(function(){n.hide()},50)),n._c=!1},n._onClick=function(t){var e=(t=t||window.event).target||t.srcElement;if(t=e){!u&&o(e,"pika-select")&&(e.onchange||(e.setAttribute("onchange","return;"),r(e,"change",n._onChange)));do{if(o(t,"pika-single")||t===a.trigger)return}while(t=t.parentNode);n._v&&e!==a.trigger&&t!==a.trigger&&n.hide()}},n.el=p.createElement("div"),n.el.className="pika-single"+(a.isRTL?" is-rtl":"")+(a.theme?" "+a.theme:""),r(n.el,"mousedown",n._onMouseDown,!0),r(n.el,"touchend",n._onMouseDown,!0),r(n.el,"change",n._onChange),a.keyboardInput&&r(p,"keydown",n._onKeyChange),a.field&&(a.container?a.container.appendChild(n.el):a.bound?p.body.appendChild(n.el):a.field.parentNode.insertBefore(n.el,a.field.nextSibling),r(a.field,"change",n._onInputChange),a.defaultDate||(l&&a.field.value?a.defaultDate=i(a.field.value,a.format).toDate():a.defaultDate=new Date(Date.parse(a.field.value)),a.setDefaultDate=!0)),t=a.defaultDate,x(t)?a.setDefaultDate?n.setDate(t,!0):n.gotoDate(t):n.gotoDate(new Date),a.bound?(this.hide(),n.el.className+=" is-bound",r(a.trigger,"click",n._onInputClick),r(a.trigger,"focus",n._onInputFocus),r(a.trigger,"blur",n._onInputBlur)):this.show()}var l="function"==typeof i,u=!!window.addEventListener,p=window.document,f=window.setTimeout,a={field:null,bound:void 0,ariaLabel:"Use the arrow keys to pick a date",position:"bottom left",reposition:!0,format:"YYYY-MM-DD",toString:null,parse:null,defaultDate:null,setDefaultDate:!1,firstDay:0,formatStrict:!1,minDate:null,maxDate:null,yearRange:10,showWeekNumber:!1,pickWholeWeek:!1,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,yearSuffix:"",showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,enableSelectionDaysInNextAndPreviousMonths:!1,numberOfMonths:1,mainCalendar:"left",container:void 0,blurFieldOnSelect:!0,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:"January February March April May June July August September October November December".split(" "),weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysShort:"Sun Mon Tue Wed Thu Fri Sat".split(" ")},theme:null,events:[],onSelect:null,onOpen:null,onClose:null,onDraw:null,keyboardInput:!0};return t.prototype={config:function(t){this._o||(this._o=s({},a,!0)),(t=s(this._o,t,!0)).isRTL=!!t.isRTL,t.field=t.field&&t.field.nodeName?t.field:null,t.theme="string"==typeof t.theme&&t.theme?t.theme:null,t.bound=!!(void 0!==t.bound?t.field&&t.bound:t.field),t.trigger=t.trigger&&t.trigger.nodeName?t.trigger:t.field,t.disableWeekends=!!t.disableWeekends,t.disableDayFn="function"==typeof t.disableDayFn?t.disableDayFn:null;var e=parseInt(t.numberOfMonths,10)||1;return t.numberOfMonths=4<e?4:e,x(t.minDate)||(t.minDate=!1),x(t.maxDate)||(t.maxDate=!1),t.minDate&&t.maxDate&&t.maxDate<t.minDate&&(t.maxDate=t.minDate=!1),t.minDate&&this.setMinDate(t.minDate),t.maxDate&&this.setMaxDate(t.maxDate),g(t.yearRange)?(e=(new Date).getFullYear()-10,t.yearRange[0]=parseInt(t.yearRange[0],10)||e,t.yearRange[1]=parseInt(t.yearRange[1],10)||e):(t.yearRange=Math.abs(parseInt(t.yearRange,10))||a.yearRange,100<t.yearRange&&(t.yearRange=100)),t},toString:function(t){return t=t||this._o.format,x(this._d)?this._o.toString?this._o.toString(this._d,t):l?i(this._d).format(t):this._d.toDateString():""},getMoment:function(){return l?i(this._d):null},setMoment:function(t,e){l&&i.isMoment(t)&&this.setDate(t.toDate(),e)},getDate:function(){return x(this._d)?new Date(this._d.getTime()):null},setDate:function(t,e){if(!t)return this._d=null,this._o.field&&(this._o.field.value="",c(this._o.field,"change",{firedBy:this})),this.draw();var n,a;"string"==typeof t&&(t=new Date(Date.parse(t))),x(t)&&(n=this._o.minDate,a=this._o.maxDate,x(n)&&t<n?t=n:x(a)&&a<t&&(t=a),this._d=new Date(t.getTime()),M(this._d),this.gotoDate(this._d),this._o.field&&(this._o.field.value=this.toString(),c(this._o.field,"change",{firedBy:this})),e||"function"!=typeof this._o.onSelect||this._o.onSelect.call(this,this.getDate()))},gotoDate:function(t){var e,n,a=!0;x(t)&&(this.calendars&&(a=new Date(this.calendars[0].year,this.calendars[0].month,1),e=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),n=t.getTime(),e.setMonth(e.getMonth()+1),e.setDate(e.getDate()-1),a=n<a.getTime()||e.getTime()<n),a&&(this.calendars=[{month:t.getMonth(),year:t.getFullYear()}],"right"===this._o.mainCalendar&&(this.calendars[0].month+=1-this._o.numberOfMonths)),this.adjustCalendars())},adjustDate:function(t,e){var n,a=this.getDate()||new Date;e=864e5*parseInt(e),"add"===t?n=new Date(a.valueOf()+e):"subtract"===t&&(n=new Date(a.valueOf()-e)),this.setDate(n)},adjustCalendars:function(){this.calendars[0]=n(this.calendars[0]);for(var t=1;t<this._o.numberOfMonths;t++)this.calendars[t]=n({month:this.calendars[0].month+t,year:this.calendars[0].year});this.draw()},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(t){isNaN(t)||(this.calendars[0].month=parseInt(t,10),this.adjustCalendars())},nextMonth:function(){this.calendars[0].month++,this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--,this.adjustCalendars()},gotoYear:function(t){isNaN(t)||(this.calendars[0].year=parseInt(t,10),this.adjustCalendars())},setMinDate:function(t){t instanceof Date?(M(t),this._o.minDate=t,this._o.minYear=t.getFullYear(),this._o.minMonth=t.getMonth()):(this._o.minDate=a.minDate,this._o.minYear=a.minYear,this._o.minMonth=a.minMonth,this._o.startRange=a.startRange),this.draw()},setMaxDate:function(t){t instanceof Date?(M(t),this._o.maxDate=t,this._o.maxYear=t.getFullYear(),this._o.maxMonth=t.getMonth()):(this._o.maxDate=a.maxDate,this._o.maxYear=a.maxYear,this._o.maxMonth=a.maxMonth,this._o.endRange=a.endRange),this.draw()},setStartRange:function(t){this._o.startRange=t},setEndRange:function(t){this._o.endRange=t},draw:function(t){if(this._v||t){var e=this._o,n=e.minYear,a=e.maxYear,i=e.minMonth,r=e.maxMonth;for(t="",this._y<=n&&(this._y=n,!isNaN(i)&&this._m<i&&(this._m=i)),this._y>=a&&(this._y=a,!isNaN(r)&&this._m>r&&(this._m=r)),n="pika-title-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2),a=0;a<e.numberOfMonths;a++)t+='<div class="pika-lendar">'+function(t,e,n,a,i,r){var o,s,c=t._o,l=n===c.minYear,u=n===c.maxYear,d='<div id="'+r+'" class="pika-title" role="heading" aria-live="assertive">',h=!0,p=!0,f=[];for(r=0;r<12;r++)f.push('<option value="'+(n===i?r-e:12+r-e)+'"'+(r===a?' selected="selected"':"")+(l&&r<c.minMonth||u&&r>c.maxMonth?'disabled="disabled"':"")+">"+c.i18n.months[r]+"</option>");for(i='<div class="pika-label">'+c.i18n.months[a]+'<select class="pika-select pika-select-month" tabindex="-1">'+f.join("")+"</select></div>",o=g(c.yearRange)?(r=c.yearRange[0],c.yearRange[1]+1):(r=n-c.yearRange,1+n+c.yearRange),f=[];r<o&&r<=c.maxYear;r++)r>=c.minYear&&f.push('<option value="'+r+'"'+(r===n?' selected="selected"':"")+">"+r+"</option>");return s='<div class="pika-label">'+n+c.yearSuffix+'<select class="pika-select pika-select-year" tabindex="-1">'+f.join("")+"</select></div>",c.showMonthAfterYear?d+=s+i:d+=i+s,l&&(0===a||c.minMonth>=a)&&(h=!1),u&&(11===a||c.maxMonth<=a)&&(p=!1),0===e&&(d+='<button class="pika-prev'+(h?"":" is-disabled")+'" type="button">'+c.i18n.previousMonth+"</button>"),e===t._o.numberOfMonths-1&&(d+='<button class="pika-next'+(p?"":" is-disabled")+'" type="button">'+c.i18n.nextMonth+"</button>"),d+"</div>"}(this,a,this.calendars[a].year,this.calendars[a].month,this.calendars[0].year,n)+this.render(this.calendars[a].year,this.calendars[a].month,n)+"</div>";this.el.innerHTML=t,e.bound&&"hidden"!==e.field.type&&f(function(){e.trigger.focus()},1),"function"==typeof this._o.onDraw&&this._o.onDraw(this),e.bound&&e.field.setAttribute("aria-label",e.ariaLabel)}},adjustPosition:function(){var t,e,n,a,i,r,o,s,c;if(!this._o.container){if(this.el.style.position="absolute",e=t=this._o.trigger,n=this.el.offsetWidth,a=this.el.offsetHeight,i=window.innerWidth||p.documentElement.clientWidth,r=window.innerHeight||p.documentElement.clientHeight,o=window.pageYOffset||p.body.scrollTop||p.documentElement.scrollTop,c=s=!0,"function"==typeof t.getBoundingClientRect)var l=(e=t.getBoundingClientRect()).left+window.pageXOffset,u=e.bottom+window.pageYOffset;else for(l=e.offsetLeft,u=e.offsetTop+e.offsetHeight;e=e.offsetParent;)l+=e.offsetLeft,u+=e.offsetTop;(this._o.reposition&&i<l+n||-1<this._o.position.indexOf("right")&&0<l-n+t.offsetWidth)&&(l=l-n+t.offsetWidth,s=!1),(this._o.reposition&&r+o<u+a||-1<this._o.position.indexOf("top")&&0<u-a-t.offsetHeight)&&(u=u-a-t.offsetHeight,c=!1),this.el.style.left=l+"px",this.el.style.top=u+"px",d(this.el,s?"left-aligned":"right-aligned"),d(this.el,c?"bottom-aligned":"top-aligned"),h(this.el,s?"right-aligned":"left-aligned"),h(this.el,c?"top-aligned":"bottom-aligned")}},render:function(t,e,n){var a=this._o,i=new Date,r=P(t,e),o=new Date(t,e,1).getDay(),s=[],c=[];M(i),0<a.firstDay&&(o-=a.firstDay)<0&&(o+=7);for(var l=0===e?11:e-1,u=11===e?0:e+1,d=0===e?t-1:t,h=11===e?t+1:t,p=P(d,l),f=r+o,g=f;7<g;)g-=7;f+=7-g;for(var m,v,g=!1,y=0,b=0;y<f;y++){var k=new Date(t,e,y-o+1),w=!!x(this._d)&&O(k,this._d),S=O(k,i),_=-1!==a.events.indexOf(k.toDateString()),C=y<o||r+o<=y,E=y-o+1,I=e,D=t,L=a.startRange&&O(a.startRange,k),T=a.endRange&&O(a.endRange,k),A=a.startRange&&a.endRange&&a.startRange<k&&k<a.endRange;C&&(D=y<o?(E=p+E,I=l,d):(E-=r,I=u,h)),k={day:E,month:I,year:D,hasEvent:_,isSelected:w,isToday:S,isDisabled:(S=!(S=a.minDate&&k<a.minDate||a.maxDate&&k>a.maxDate)&&(S=a.disableWeekends)?0===(S=k.getDay())||6===S:S)||a.disableDayFn&&a.disableDayFn(k),isEmpty:C,isStartRange:L,isEndRange:T,isInRange:A,showDaysInNextAndPreviousMonths:a.showDaysInNextAndPreviousMonths,enableSelectionDaysInNextAndPreviousMonths:a.enableSelectionDaysInNextAndPreviousMonths},a.pickWholeWeek&&w&&(g=!0),c.push(function(t){var e=[],n="false";if(t.isEmpty){if(!t.showDaysInNextAndPreviousMonths)return'<td class="is-empty"></td>';e.push("is-outside-current-month"),t.enableSelectionDaysInNextAndPreviousMonths||e.push("is-selection-disabled")}return t.isDisabled&&e.push("is-disabled"),t.isToday&&e.push("is-today"),t.isSelected&&(e.push("is-selected"),n="true"),t.hasEvent&&e.push("has-event"),t.isInRange&&e.push("is-inrange"),t.isStartRange&&e.push("is-startrange"),t.isEndRange&&e.push("is-endrange"),'<td data-day="'+t.day+'" class="'+e.join(" ")+'" aria-selected="'+n+'"><button class="pika-button pika-day" type="button" data-pika-year="'+t.year+'" data-pika-month="'+t.month+'" data-pika-day="'+t.day+'">'+t.day+"</button></td>"}(k)),7==++b&&(a.showWeekNumber&&c.unshift((m=y-o,w=e,k=t,v=void 0,v=new Date(k,0,1),'<td class="pika-week">'+Math.ceil(((new Date(k,w,m)-v)/864e5+v.getDay()+1)/7)+"</td>")),s.push((m=c,v=a.isRTL,'<tr class="pika-row'+(a.pickWholeWeek?" pick-whole-week":"")+(g?" is-selected":"")+'">'+(v?m.reverse():m).join("")+"</tr>")),b=0,g=!(c=[]))}for(e=[],a.showWeekNumber&&e.push("<th></th>"),t=0;t<7;t++)e.push('<th scope="col"><abbr title="'+j(a,t)+'">'+j(a,t,!0)+"</abbr></th>");return'<table cellpadding="0" cellspacing="0" class="pika-table" role="grid" aria-labelledby="'+n+'">'+(a="<thead><tr>"+(a.isRTL?e.reverse():e).join("")+"</tr></thead>")+"<tbody>"+s.join("")+"</tbody></table>"},isVisible:function(){return this._v},show:function(){this.isVisible()||(this._v=!0,this.draw(),h(this.el,"is-hidden"),this._o.bound&&(r(p,"click",this._onClick),this.adjustPosition()),"function"==typeof this._o.onOpen&&this._o.onOpen.call(this))},hide:function(){var t=this._v;!1!==t&&(this._o.bound&&e(p,"click",this._onClick),this.el.style.position="static",this.el.style.left="auto",this.el.style.top="auto",d(this.el,"is-hidden"),this._v=!1,void 0!==t&&"function"==typeof this._o.onClose&&this._o.onClose.call(this))},destroy:function(){var t=this._o;this.hide(),e(this.el,"mousedown",this._onMouseDown,!0),e(this.el,"touchend",this._onMouseDown,!0),e(this.el,"change",this._onChange),t.keyboardInput&&e(p,"keydown",this._onKeyChange),t.field&&(e(t.field,"change",this._onInputChange),t.bound&&(e(t.trigger,"click",this._onInputClick),e(t.trigger,"focus",this._onInputFocus),e(t.trigger,"blur",this._onInputBlur))),this.el.parentNode&&this.el.parentNode.removeChild(this.el)}},t},i=null,"object"===m(e)?t.exports=a(i):void 0===(e=function(t){try{i=n(29)("moment")}catch(t){}return a(i)}.call(e,n,e,t))||(t.exports=e)},function(t,e){function n(t){throw(t=Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},(t.exports=n.resolve=n).id=29},,,,,,function(t,e,n){function a(){this.setAttribute("aria-pressed","true"===this.getAttribute("aria-pressed")?"false":"true"),this.setAttribute("aria-expanded","true"===this.getAttribute("aria-expanded")?"false":"true")}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=Array(e);n<e;n++)a[n]=t[n];return a}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=Array(e);n<e;n++)a[n]=t[n];return a}n.r(e),t=n(4);function r(){var t=document.querySelectorAll('[data-js="accordion-item"]');if(0<t.length)for(var e=0,n=t.length;e<n;e++)t[e].addEventListener("click",a)}var o=n(0),c=n(1),l=[],u=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return r(),t=t.selector,l=Array.from(document.querySelectorAll("".concat(void 0===t?"":t,'.u-accordion__tab [type="checkbox"]')))},d={init:u,closeAll:function(){(0<arguments.length&&void 0!==arguments[0]?arguments[0]:l).forEach(function(t){t.checked=!1})},openAll:function(){(0<arguments.length&&void 0!==arguments[0]?arguments[0]:l).forEach(function(t){t.checked=!0})},selectItem:r};o.default.create("tmg.utils.accordion"),tmg.utils.accordion=d,c.a.subscribe({topic:"tmg.page.ready",func:u,runIfAlreadyPublished:!0});var u=n(2),h=n(5),p=n(22),f=n(17),g=n(9),m=(function(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}(v.prototype,[{key:"init",value:function(){this.input&&(this.bindPlusCounter(),this.bindMinusCounter(),this.event.initEvent("change",!1,!0))}},{key:"bindPlusCounter",value:function(){var e=this;this.plusBtn.addEventListener("click",function(t){t.preventDefault(),e.addCounter()})}},{key:"bindMinusCounter",value:function(){var e=this;this.minusBtn.addEventListener("click",function(t){t.preventDefault(),e.minusCounter()})}},{key:"minusCounter",value:function(){var t=parseInt(this.input.value,10)-1;this.updateValue(t,this.minusBtn,t<=this.params.min),this.plusBtn.classList.remove(this.params.disabledSelector)}},{key:"addCounter",value:function(){var t=parseInt(this.input.value,10)+1;this.updateValue(t,this.plusBtn,t>=this.params.max),this.minusBtn.classList.remove(this.params.disabledSelector)}},{key:"updateValue",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];!e.classList.contains(this.params.disabledSelector)&&0<=t&&(this.input.value=t,this.input.dispatchEvent(this.event)),e.classList.toggle(this.params.disabledSelector,n)}}]),v);function v(t){if(!(this instanceof v))throw new TypeError("Cannot call a class as a function");this.params=Object.assign({identifier:t.counter.getAttribute("data-counter-id"),max:t.counter.querySelector("[data-counter-max]").getAttribute("data-counter-max"),min:0,minusSelector:"[data-counter-minus]",plusSelector:"[data-counter-plus]",disabledSelector:"counter__button--disabled"},t),this.event=document.createEvent("HTMLEvents"),this.input=document.getElementById(this.params.identifier),this.minusBtn=this.params.counter.querySelector(this.params.minusSelector),this.plusBtn=this.params.counter.querySelector(this.params.plusSelector)}c.a.subscribe({topic:"tmg.page.ready",func:function(){document.querySelectorAll("[data-counter-id]").forEach(function(t){t&&new m({counter:t}).init()})},runIfAlreadyPublished:!0});var y=n(28),b=n.n(y),k=(Z=[{key:"init",value:function(){var e=this;this.hasCalendar&&(this.occupancyContainer.querySelectorAll("input").forEach(function(t){e.bindOccupancyInput(t),e.setOccupancyToLocal(t)}),this.updateOccupancyValue(),this.buildDatePickers(),this.setTransactionId()),this.params.bookingElement&&(this.observer=new IntersectionObserver(this.observerCallback.bind(this),{threshold:[.9,1]}),this.observer.observe(this.params.bookingElement))}},{key:"observerCallback",value:function(t){var e=t[0].boundingClientRect.y?t[0].boundingClientRect.y<0:!t[0].isIntersecting;t[0].intersectionRatio<1&&e?this.availabilityBanner.classList.remove("calendar-availability__banner--hidden"):this.availabilityBanner.classList.add("calendar-availability__banner--hidden")}},{key:"setCalendarElements",value:function(){this.datepickerContainer=document.querySelector(this.params.datepicker),this.datepickerClear=document.querySelector(this.params.clearPicker),this.checkInInputs=document.querySelectorAll("[data-calendar-checkin]"),this.checkOutInputs=document.querySelectorAll("[data-calendar-checkout]"),this.childContainer=document.querySelector(this.params.childTarget),this.childWrapper=document.querySelector(this.params.childSelector),this.occupancyInput=document.querySelector(this.params.occupancyInput),this.occupancyContainer=document.querySelector(this.params.occupancyContainer),this.product=document.querySelector('[data-js="package-json"]')?JSON.parse(document.querySelector('[data-js="package-json"]').dataset.options):{},this.providerProduct=this.product.hotel}},{key:"toggleRequiredValidation",value:function(t,e){t.forEach(function(t){e?t.setAttribute("data-required",""):t.removeAttribute("data-required")})}},{key:"setOccupancyToLocal",value:function(t){t.value=localStorage.getItem(t.id)||t.value,this.updateOccupancyValues(t,!0)}},{key:"bindOccupancyInput",value:function(t){var e=this;t.addEventListener("change",function(){e.updateOccupancyValues(t)})}},{key:"updateOccupancyValues",value:function(t,e){switch(localStorage.setItem(t.id,t.value),t.id){case"numberOfRooms":this.params.rooms=parseInt(t.value,10);break;case"numberOfAdults":this.params.adults=parseInt(t.value,10);break;case"numberOfChildren":this.updateChildren(t,e),this.params.children=parseInt(t.value,10);break;default:this.storeChildAges(t)}this.updateOccupancyValue(),this.updateBookingReferences()}},{key:"updateOccupancyValue",value:function(){var t;this.occupancyInput&&(t="".concat(this.params.rooms," room(s), ").concat(this.params.adults," adult(s), ").concat(this.params.children," child(ren)"),this.occupancyInput.value=t)}},{key:"storeChildAges",value:function(t){this.params.childAges[t.id]=t.value}},{key:"removeChildAge",value:function(t){delete this.params.childAges[t.id],localStorage.removeItem(t.id)}},{key:"updateChildren",value:function(t,e){if(e)for(e=1;e<=t.value;e++)this.addChildElement(e,localStorage.getItem("child-".concat(e)));else this.params.children<parseInt(t.value,10)?this.addChildElement(t.value):this.removeChildElement(this.params.children)}},{key:"addChildElement",value:function(t,e){1===parseInt(t,10)&&(this.childWrapper.style.display="block");var n=document.createElement("div");n.classList.add("calendar-people__occupancy","u-separator-bottom"),n.setAttribute("data-child-id",t),n.innerHTML='\n\t\t<div class="calendar-availability__occupany-title">\n\t\t\t<span class="calendar-people__mix-title">Child '.concat(t,'</span>\n\t\t</div>\n\t\t<div class="calendar-people__mix calendar-availability__counter">\n\t\t\t<div class="counter" data-counter-id="child-').concat(t,'">\n\t\t\t\t<a class="counter__button" data-counter-minus>\n\t\t\t\t\t<span class="counter__symbol counter__minus"></span>\n\t\t\t\t</a>\n\t\t\t\t<input class="counter__input" name="child-').concat(t,'" id="child-').concat(t,'" type="text" value="1">\n\t\t\t\t<a class="counter__button" data-counter-plus data-counter-max="17">\n\t\t\t\t\t<span class="counter__symbol">+</span>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>'),t=n.querySelector("input"),this.childContainer.appendChild(n),this.bindOccupancyInput(t),t.value=e||0,this.storeChildAges(t),new m({counter:n.querySelector("[data-counter-id]")}).init()}},{key:"removeChildElement",value:function(t){1===parseInt(t,10)&&(this.childWrapper.style.display="none"),t=this.childContainer.querySelector('[data-child-id="'.concat(t,'"]')),this.childContainer.removeChild(t),t=t.querySelector("input"),this.removeChildAge(t)}},{key:"buildDatePickers",value:function(){var t,e,n,a=this;this.datepickerContainer&&((t=new Date).setHours(0,0,0,0),this.checkOutPicker=new b.a({bound:!1,container:this.datepickerContainer,field:this.checkOutInputs[0],firstDay:1,theme:"date-picker__wrapper",minDate:t,onSelect:function(){a.updateCheckOutDate(a.checkOutPicker.getDate())}}),this.checkInPicker=new b.a({bound:!1,container:this.datepickerContainer,field:this.checkInInputs[0],firstDay:1,minDate:t,theme:"date-picker__wrapper",onSelect:function(){a.updateCheckInDate(a.checkInPicker.getDate())}}),(e=new Date(localStorage.getItem("checkInDate")||t))<=t&&e.setDate(t.getDate()+1),(n=new Date(localStorage.getItem("checkOutDate")||t))<=e&&n.setDate(t.getDate()+3),this.checkInPicker.setDate(e),this.checkOutPicker.setDate(n),this.bindDatePickerMoveEvent(),this.bindDatePickerClear())}},{key:"updateCheckInDate",value:function(t){var e=this;this.params.checkInDate=t,localStorage.setItem("checkInDate",t),this.checkInInputs.forEach(function(t){t.value=e.buildDateString(e.params.checkInDate)}),this.checkInPicker.hide(),this.checkOutPicker.setMinDate(this.params.checkInDate),this.checkOutPicker.setStartRange(this.params.checkInDate),this.checkOutPicker.gotoDate(this.params.checkInDate),this.setEndRange(this.params.checkInDate),this.checkOutPicker.show(),this.toggleRequiredValidation(this.checkInInputs,!t)}},{key:"updateCheckOutDate",value:function(t){var e=this;this.params.checkOutDate=t,localStorage.setItem("checkOutDate",t),this.checkOutInputs.forEach(function(t){t.value=e.buildDateString(e.params.checkOutDate)}),this.setEndRange(this.params.checkOutDate),this.toggleRequiredValidation(this.checkOutInputs,!t),this.updateBookingReferences(),t&&(document.getElementById("modal-dropdown-datepicker").classList.add("modal-dropdown--hidden"),document.querySelector("[data-modal-dropdown-close]").classList.add("modal-dropdown--hidden"))}},{key:"buildDateString",value:function(t){return t?"".concat(t.getDate()," ").concat(this.params.months[t.getMonth()]," ").concat(t.getFullYear()):null}},{key:"bindDatePickerMoveEvent",value:function(){var e=this,t=this.datepickerContainer.parentElement;this.target=!1,t.addEventListener("mousemove",function(t){t.target.classList.contains("pika-button")?(e.target=!0,e.setEndRangeToButton(t)):!0===e.target&&(e.target=!1,e.setEndRange(e.params.checkOutDate))})}},{key:"bindDatePickerClear",value:function(){var e=this;this.datepickerClear.addEventListener("click",function(t){t.preventDefault(),e.checkOutPicker.setDate(null),e.updateCheckOutDate(null),e.checkInPicker.setDate(null),e.updateCheckInDate(null),e.checkOutPicker.hide(),e.checkInPicker.show()})}},{key:"setEndRangeToButton",value:function(t){t=t.target,t=new Date(t.getAttribute("data-pika-year"),t.getAttribute("data-pika-month"),t.getAttribute("data-pika-day")),this.setEndRange(t)}},{key:"setEndRange",value:function(t){t&&(this.checkOutPicker.setEndRange(t),this.checkOutPicker.draw())}},{key:"setTransactionId",value:function(){var n=this;new Promise(function(t,e){t(n.params.transactionId=n.generateTransactionId()),e(Error("Failed to generate transactionID"))}).then(this.addIDToDataLayer(this.params.transactionId)).then(this.updateBookingReferences())}},{key:"generateTransactionId",value:function(){for(var t=(new Date).getTime(),e=[],n=0;n<32;n++){var a=(t+16*Math.random())%16|0,t=Math.floor(t/16);e.push(a.toString(16))}return"booking-".concat(e.join(""))}},{key:"addIDToDataLayer",value:function(t){window.dataLayer.bookingTransactionId="".concat(t)}},{key:"buildBookingCta",value:function(){var e=this;if(!this.providerProduct||!this.providerProduct.source)return!1;var t=this.providerProduct.baseUrl.split(";")[0],n=Object.keys(this.params.childAges).map(function(t){return e.params.childAges[t]}),a=this.params.checkInDate?"".concat(this.params.checkInDate.getFullYear(),"-").concat(this.params.checkInDate.getMonth()+1,"-").concat(this.params.checkInDate.getDate()):"",i=this.params.checkOutDate?"".concat(this.params.checkOutDate.getFullYear(),"-").concat(this.params.checkOutDate.getMonth()+1,"-").concat(this.params.checkOutDate.getDate()):"",r="";return"Booking.com"===this.providerProduct.source?(n=n.length?"&age=".concat(n.join("&age=")):"",r="".concat(r,";checkin=").concat(a,";checkout=").concat(i,";no_rooms=").concat(this.params.rooms,";group_adults=").concat(this.params.adults,";group_children=").concat(this.params.children+n)):"Expedia"===this.providerProduct.source&&(n=n.length?"&".concat(n.join("&")):"",r="".concat(r).concat(a,"/").concat(i,"?FromAirport=").concat(this.params.airport,"&Destination=").concat(this.params.destination,"&NumRoom=").concat(this.params.rooms,"&NumAdult=").concat(this.params.adults,"&numChild=").concat(this.params.children).concat(n,"&HotelID=").concat(this.params.hotelId,"&siteid=").concat(this.params.telegraphSiteId)),this.params.transactionId&&("Booking.com"===this.providerProduct.source?t=t.concat(";label=".concat(this.params.transactionId)):"Expedia"===this.providerProduct.source&&t.replace("TELEGRAPH_REF",this.params.transactionId)),t.concat(r)}},{key:"updateBookingReferences",value:function(){var e=this.buildBookingCta();e&&this.params.partnerLinks.forEach(function(t){t.href=e})}}],function(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}(w.prototype,Z),w);function w(t){if(!(this instanceof w))throw new TypeError("Cannot call a class as a function");this.params=Object.assign({occupancyContainer:'[data-js="calendar-availability__people-mix"]',occupancyInput:'[data-js="calendar-availability__occupancy"]',childSelector:'[data-js="calendar-availability__child-ages"]',childTarget:'[data-js="calendar-availability__child-ages-target"]',datepicker:"[data-datepicker]",clearPicker:"[data-datepicker-clear]",datesSelector:"[data-calendar-dates]",months:"Jan Feb Mar Apr May June July Aug Sep Oct Nov Dec".split(" "),rooms:1,adults:2,children:0,childAges:{},checkInDate:new Date,checkOutDate:new Date},t),this.hasCalendar=this.params.partnerLinks&&0<this.params.partnerLinks.length,this.availabilityBanner=document.getElementById("calendar-availability-banner"),this.hasCalendar&&this.setCalendarElements()}c.a.subscribe({topic:"tmg.page.ready",func:function(){var t=document.querySelector("[data-booking-availability]"),e=document.querySelectorAll('[data-js="calendar-availability"]');t&&new k({partnerLinks:e,bookingElement:t}).init()},runIfAlreadyPublished:!0});var S=(tt=[{key:"init",value:function(){this.elem.addEventListener("click",this.toggle),this.createObservers(),this.addAnchorItems()}},{key:"createObservers",value:function(){this.observer=new IntersectionObserver(function(t,e){var n,a=this;t.forEach(function(e){var t=a.sections.find(function(t){return t.identifier===e.target.id});0<e.intersectionRatio?a.visibleElements.push(t):-1<(t=a.visibleElements.indexOf(t))&&a.visibleElements.splice(t,1)}),0!==this.visibleElements.length&&(n=1===this.visibleElements.length?this.visibleElements[0]:this.visibleElements.reduce(function(t,e){return t.index<e.index?t:e}),this.sections.map(function(t){t.identifier===n.identifier?t.navItem.classList.add("content-nav__item--selected"):t.navItem.classList.remove("content-nav__item--selected")}))}.bind(this),{root:null,rootMargin:"-60px"}),this.observerSticky=new IntersectionObserver(function(t){(t=t[0]).intersectionRatio<1&&t.boundingClientRect.y<0?this.elem.classList.add("".concat(this.className,"--sticky")):this.elem.classList.remove("".concat(this.className,"--sticky"))}.bind(this),{threshold:[.9,1]}),this.observerSticky.observe(this.elem)}},{key:"addAnchorItems",value:function(){var n=this;Array.from(this.elem.getElementsByTagName("li")).forEach(function(t,e){n.addAnchorItem(t,e)})}},{key:"addAnchorItem",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=t.getElementsByTagName("a");0===n.length||(e={identifier:n=n[0].dataset.navitemId,index:e,navItem:t,target:document.getElementById(n),visible:!1}).target&&(this.sections.push(e),this.observer.observe(e.target))}},{key:"toggle",value:function(){(this.isOpen=!this.isOpen)?this.elem.classList.add("".concat(this.className,"--open")):this.elem.classList.remove("".concat(this.className,"--open"))}}],function(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}(_.prototype,tt),_);function _(t){if(!(this instanceof _))throw new TypeError("Cannot call a class as a function");this.className="content-nav",this.elem=t,this.visibleElements=[],this.isOpen=this.elem.classList.contains("".concat(this.className,"--open")),this.sections=[],this.toggle=this.toggle.bind(this),this.observerSticky=this.observer=null}c.a.subscribe({topic:"tmg.page.ready",func:function(){var t=document.querySelector('[data-js="content-nav"]');t&&new S(t).init()},runIfAlreadyPublished:!0});var C=(function(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}(E.prototype,[{key:"init",value:function(){1<this.itemCount&&(this.setItemSizes(),this.bindControls(),this.showControls(),this.updateCurrentThumbnail(this.currentSlideIndex)),this.setItemSizesOnResize()}},{key:"setItemSizesOnResize",value:function(){var e=this;["orientationchange","resize"].forEach(function(t){window.addEventListener(t,function(){e.elementWidth=e.element.offsetWidth,e.setItemSizes()},!1)})}},{key:"setItemSizes",value:function(){this.itemViewport.style.width=this.elementWidth+"px",this.itemWrapper.style.width=this.elementWidth*this.itemCount+"px";for(var t=0,e=this.itemCount;t<e;t++)this.item[t].style.width=this.elementWidth+"px"}},{key:"bindControls",value:function(){this.controlForPrevious.addEventListener("click",this.goToPreviousSlide.bind(this)),this.controlForNext.addEventListener("click",this.goToNextSlide.bind(this)),this.thumbnailsContainer&&this.thumbnailsContainer.addEventListener("click",this.goToSelectedSlide.bind(this))}},{key:"showControls",value:function(){this.controlForPrevious.classList.add("carousel__control--visible"),this.controlForNext.classList.add("carousel__control--visible")}},{key:"showSlide",value:function(t){this.itemWrapper.style.left=-this.elementWidth*t+"px"}},{key:"goToPreviousSlide",value:function(){this.currentSlideIndex<=0||(this.currentSlideIndex--,this.showSlide(this.currentSlideIndex),this.updateCurrentThumbnail(this.currentSlideIndex))}},{key:"goToNextSlide",value:function(){this.currentSlideIndex>=this.itemCount-1||(this.currentSlideIndex++,this.showSlide(this.currentSlideIndex),this.updateCurrentThumbnail(this.currentSlideIndex))}},{key:"goToSelectedSlide",value:function(t){(t=t.target.closest("li"))&&(t=t.dataset.thumbnailId,this.currentSlideIndex=0<t?t-1:1,this.showSlide(this.currentSlideIndex),this.updateCurrentThumbnail(this.currentSlideIndex))}},{key:"updateCurrentThumbnail",value:function(n){var t,e;this.thumbnailsContainer&&(t=this.thumbnailsContainer.getElementsByClassName("carousel__thumbnail--is-active"),e=Array.from(this.thumbnailsContainer.querySelectorAll('[data-js="carousel__thumbnail"]')),0<t.length&&(this.prevCurrentIndex=t[0].dataset.thumbnailId,t[0].classList.remove("carousel__thumbnail--is-active")),e.forEach(function(t,e){e!==n||t.classList.contains("carousel__thumbnail--is-active")||t.classList.add("carousel__thumbnail--is-active")}))}}]),E);function E(t){if(!(this instanceof E))throw new TypeError("Cannot call a class as a function");this.element=t,this.elementWidth=this.element.offsetWidth,this.thumbnailsContainer=this.element.querySelector('[data-js="carousel__thumbnails-container"]'),this.itemViewport=this.element.querySelector('[data-js="carousel__viewport"]'),this.itemWrapper=this.element.querySelector('[data-js="carousel__items"]'),this.item=Array.from(this.element.querySelectorAll('[data-js="carousel__item"]')),this.itemCount=this.item.length,this.controlForPrevious=this.element.querySelector('[data-js="carousel__control--previous"]'),this.controlForNext=this.element.querySelector('[data-js="carousel__control--next"]'),this.currentSlideIndex=0}c.a.subscribe({topic:"tmg.page.ready",func:function(){var t=Array.from(document.querySelectorAll('[data-js="carousel"]'));0<t.length&&t.forEach(function(t){new C(t).init()})},runIfAlreadyPublished:!0});var I={className:"overlay-continuation",overlayTimeout:5e3},D=(function(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}(L.prototype,[{key:"hasAllHtmlElements",value:function(){return null!==this.overlayClickElem&&null!==this.overlayContainer&&null!==this.overlayClose}},{key:"init",value:function(){var e=this;this.hasAllHtmlElements()&&(this.overlayClickElem.addEventListener("click",function(t){t.preventDefault(),e.showOverlay()},!1),this.overlayClose.addEventListener("click",function(){clearTimeout(e.overlayTimeout),e.overlayContainer.classList.remove("".concat(e.options.className,"__visible"))}))}},{key:"showOverlay",value:function(){var t=this;void 0!==this.overlayContainer&&this.overlayContainer.classList.add("".concat(this.options.className,"__visible")),this.overlayTimeout=setTimeout(function(){t.closeAndRedirect()},this.options.overlayTimeout)}},{key:"closeAndRedirect",value:function(){window.location.href=this.overlayAnchor}}]),L);function L(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(!(this instanceof L))throw new TypeError("Cannot call a class as a function");this.options=Object.assign(I,t),this.overlayClickElem=document.querySelector('[data-js="'.concat(this.options.className,'__handler"]')),this.overlayContainer=document.querySelector('[data-js="'.concat(this.options.className,'"]')),this.overlayClose=document.querySelector('[data-js="'.concat(this.options.className,'__close"]')),this.overlayTimeout=null,this.overlayClickElem&&(this.overlayAnchor=this.overlayClickElem.href)}c.a.subscribe({topic:"tmg.page.ready",func:function(){(new D).init()},runIfAlreadyPublished:!0});var T,A,x,P,M={overlayContinuation:D},O=!1,j=!1,R=[],N=function(){0<Array.from(document.querySelectorAll('[data-js="navigation"]')).length&&(R=d.init({selector:"".concat('[data-js="navigation"]'," ")}),T=document.querySelector('[data-js="navigation"]'),A=T.querySelector(".navigation__menu-control"),P=T.querySelector(".navigation__item--more .navigation__label-text"),x=T.querySelector(".navigation__menu--main"),T.setAttribute("data-js",T.getAttribute("data-js").replace("navigation","")),A.addEventListener("click",function(){B(),d.closeAll(R),event.preventDefault()}),P.addEventListener("click",function(t){"none"===window.getComputedStyle(A).display&&(B(),t.preventDefault())}),x.addEventListener("mouseenter",function(){j=!1}),T.addEventListener("mouseleave",function(t){j=!0;var e=setTimeout(function(){j&&q(),clearTimeout(e)},300)}),document.addEventListener("keyup",function(t){"Escape"!==t.key&&27!==t.keyCode||q()}),T.classList.add("navigation--js-active"))},q=function(){T.classList.remove("navigation--opened"),d.closeAll(R),O=!1},B=function(){O?q():(T.classList.add("navigation--opened"),d.openAll(R),O=!0)},y={initializeAfterContentExists:N,toggleExpandedMenu:B};o.default.create("tmg.components.navigation"),window.tmg.components.navigation=y,c.a.subscribe({topic:"tmg.page.ready",func:N,runIfAlreadyPublished:!0});var F=(function(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}(U.prototype,[{key:"init",value:function(){this.hideOptions(),this.bindEvents()}},{key:"hideOptions",value:function(){this.element.classList.remove("product-sort--visible","product-sort--no-js")}},{key:"bindEvents",value:function(){var t=this;this.element.addEventListener("click",function(){t.element.classList.toggle("product-sort--visible")})}}]),U);function U(t){if(!(this instanceof U))throw new TypeError("Cannot call a class as a function");this.element=t}c.a.subscribe({topic:"tmg.page.ready",func:function(){var t=document.querySelector('[data-js="product-sort"]');t&&new F(t).init()},runIfAlreadyPublished:!0});var H=(function(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}(W.prototype,[{key:"init",value:function(){this.bindCloseButtons(),this.bindOpenButtons()}},{key:"bindCloseButtons",value:function(){var e=this;document.querySelectorAll("[".concat(this.params.closeAttribute,"]")).forEach(function(t){t.addEventListener("click",function(t){t.preventDefault(),e.toggleModalDropdown(!0)})})}},{key:"bindOpenButtons",value:function(){var e=this;document.querySelectorAll("[data-modal-dropdown-open=".concat(this.params.id,"]")).forEach(function(t){t.addEventListener("click",function(){e.toggleModalDropdown()})})}},{key:"toggleModalDropdown",value:function(t){this.params.modal.classList.toggle(this.params.hidden,t),this.background.classList.toggle(this.params.hidden,t)}},{key:"createModalBackground",value:function(){var t=this;this.background=document.createElement("div"),this.background.classList.add("modal-dropdown__background",this.params.hidden),this.background.setAttribute(this.params.closeAttribute,""),this.background.addEventListener("click",function(){t.toggleModalDropdown(!0)}),this.params.modal.parentNode.insertBefore(this.background,this.params.modal.parentNode.childNodes[0])}},{key:"createModalHeading",value:function(){var t=document.createElement("h4");t.classList.add("modal-dropdown__heading","calendar-availability__hidden"),t.setAttribute(this.params.closeAttribute,""),t.innerHTML=this.params.heading,this.params.modal.insertBefore(t,this.params.modal.firstChild)}},{key:"createModalSaveButton",value:function(){var t=document.createElement("a");t.classList.add("modal-dropdown__button","calendar-availability__hidden","call-to-action__link","call-to-action__link--full-width"),t.setAttribute(this.params.closeAttribute,""),t.innerHTML=this.params.save,this.params.modal.appendChild(t)}}]),W);function W(t){if(!(this instanceof W))throw new TypeError("Cannot call a class as a function");this.params=Object.assign({closeAttribute:"data-modal-dropdown-close",heading:t.modal.getAttribute("data-modal-dropdown"),id:t.modal.id,hidden:"modal-dropdown--hidden",save:"Save"},t),this.createModalBackground(),this.createModalHeading(),this.createModalSaveButton()}c.a.subscribe({topic:"tmg.page.ready",func:function(){document.querySelectorAll("[data-modal-dropdown]").forEach(function(t){new H({modal:t}).init()})},runIfAlreadyPublished:!0});var Y=n(10),N=n(11),V=n(3),$=(ht=[{key:"init",value:function(){var e=this;this.params.trackingItems.map(function(t){return t.selector}).forEach(function(t){e.setClickListener(t)}),document.querySelectorAll(this.params.icidSelector).forEach(function(t){e.setICID(t)})}},{key:"setClickListener",value:function(e){var n=this;document.querySelectorAll(e).forEach(function(t){t.addEventListener("click",function(){n.setLocalStorage(e,t)})})}},{key:"setLocalStorage",value:function(t,e){t=this.lookupTrackingItem(t);var n=this.getComponentName(e),a=e.getAttribute(this.params.indexSelector)||null;e=e.getAttribute(this.params.destinationSelector)||e.textContent,localStorage.setItem(this.params.storageName,JSON.stringify({componentName:n?this.cleanString(n):null,destination:this.cleanString(e),linkType:t?t.type:"",pageOfUse:this.getCurrentPagePath(),index:a}))}},{key:"getComponentName",value:function(t){if(t=t.closest(this.params.wrapperSelector))return t.getAttribute(this.params.wrapperSelector.replace("[","").replace("]",""))}},{key:"getCurrentPagePath",value:function(){return document.location.pathname.replace(/\//g," ").trim().replace(/\s/g,"_")||"portal"}},{key:"lookupTrackingItem",value:function(t){var e,n=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t){if(t){if("string"==typeof t)return s(t,void 0);var e=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(e="Object"===e&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?s(t,void 0):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0;return{s:e=function(){},n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r=!0,o=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){o=!0,i=t},f:function(){try{r||null==n.return||n.return()}finally{if(o)throw i}}}}(this.params.trackingItems);try{for(n.s();!(e=n.n()).done;){var a=e.value;if(a.selector===t)return a}}catch(t){n.e(t)}finally{n.f()}}},{key:"cleanString",value:function(t){return t.trim().replace(/[,\s]+/g,"-").toLowerCase()}},{key:"getICIDValue",value:function(t){return t=Object.assign({brand:V.default.getChannel(),product:"generic",mediaType:"generic",contentType:V.default.getContentType(),contentLocation:"generic"},t),"".concat(t.brand,"_").concat(t.product,"_").concat(t.mediaType,"_").concat(t.contentType,"_").concat(t.contentLocation)}},{key:"setICID",value:function(t){var e=this.getICIDValue(h.default.tryParse(t.dataset.icid)),n=t.getAttribute("href");n&&t.setAttribute("href",g.default.setQuerystringParam(n,"ICID",e))}}],function(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}(J.prototype,ht),J);function J(t){if(!(this instanceof J))throw new TypeError("Cannot call a class as a function");this.params=Object.assign({icidSelector:"[data-icid]",indexSelector:"data-track-index",destinationSelector:"data-track-destination",storageName:"tmgComponentTracking",trackingItems:[{type:"txt",selector:"[data-track-txt]"},{type:"block",selector:"[data-track-block]"},{type:"img",selector:"[data-track-img]"}],wrapperSelector:"[data-track-wrapper]"},t)}["tmg.page.ready","tmg.lightbox.ready"].forEach(function(t){c.a.subscribe({topic:t,func:function(){(new $).init()},runIfAlreadyPublished:!0})});function K(t){(t=/.*social-share_(\w*)/i.exec(t.target.className))&&0<t.length&&"_satellite"in window&&(_satellite.setVar("shareprovider",t[1]),_satellite.track("share"))}var G=n(8);c.a.subscribe({topic:"tmg.page.ready",func:z=function(){var t=document.querySelectorAll("[class*='social-share_']");[].slice.call(t).forEach(function(t){t.addEventListener("click",K)})},runIfAlreadyPublished:!0});var z={trackSocialShare:K,attachSocialShareClicks:z},Q=n(6),X=function(){var t=document.body,e=".".concat("viewport--breakpoint");return!(!window.getComputedStyle||!t)&&((e=document.querySelector(e))||((e=document.createElement("div")).classList.add("viewport--breakpoint"),t.appendChild(e)),window.getComputedStyle(e,"::after").content.replace(/[^a-z]/gi,"")||"xs")},Z=function(t){return(t=void 0===t?!0:t)&&0<=document.documentElement.clientWidth?document.documentElement.clientWidth:t&&document.body&&0<=document.body.clientWidth?document.body.clientWidth:0<=window.innerWidth?window.innerWidth:0},tt={getBreakpointLabel:X,getWidth:Z};function et(t){if(!(this instanceof et))throw new TypeError("Cannot call a class as a function");this.params=Object.assign({triggerSelector:'[data-js="caption-trigger"]',imageSelector:'[data-js="article-body-image"]',captionSelector:'[data-js="caption"]',toggleClassName:"e-caption--visible",selectedClassName:"e-caption-trigger--selected"},t),this.captionTrigger=document.querySelectorAll(this.params.triggerSelector),this.captionTrigger.length&&this.activateCaptionTrigger()}o.default.create("tmg.utils.viewport"),tmg.utils.viewport=tt,tmg.getMediaQuery=X,tmg.getViewportWidth=Z,o=n(24),X=n(25),n=n(26),function(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}(et.prototype,[{key:"activateCaptionTrigger",value:function(){var e=this;this.captionTrigger.forEach(function(t){t.addEventListener("click",function(){e.toggleCaption(t)})})}},{key:"toggleCaption",value:function(t){var e=t.closest(this.params.imageSelector).querySelector(this.params.captionSelector);e.classList.toggle(this.params.toggleClassName),this.toggleTriggerStyle(t),this.updateAriaLabel(t,e)}},{key:"updateAriaLabel",value:function(t,e){t.setAttribute("aria-label",e.classList.contains(this.params.toggleClassName)?t.dataset.ariaClose:t.dataset.ariaOpen)}},{key:"toggleTriggerStyle",value:function(t){t.classList.toggle(this.params.selectedClassName)}}]),c.a.subscribe({topic:"tmg.page.ready",func:new(Z=et)});var nt=(ht=[{key:"loadScript",value:function(t){var e=this,n=new G.default;window.$igniter_var=t,window[t]=window[t]||function(){(window[t].q=window[t].q||[]).push(arguments)},window[t].l=+new Date,n.injectScript("//cdn.petametrics.com/".concat(this.key,".js")).then(function(){e.initialise(),c.a.publish({topic:"tmg.liftigniter.ready"})})}},{key:"getConfiguration",value:function(){return window.liftIgniterPageKeywords=tmg.page.getKeywords(),{inventory:{features:[this.getFeature("pageType","tmg.page.getPageType()"),this.getFeature("businessSegment","tmg.page.getBusinessSegment()"),this.getFeature("channel","tmg.page.getChannel()"),this.getFeature("keywords","window.liftIgniterPageKeywords"),this.getFeature("displayDate","tmg.page.getPublishDate()")]}}}},{key:"getFeature",value:function(t,e){return{name:t,type:"var",variable:e}}},{key:"initialise",value:function(){liftigniter("init",this.key,{config:this.getConfiguration()}),Q.default.isLoggedIn()&&liftigniter("setUserId",this.userId),liftigniter("send","pageview")}}],function(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}(at.prototype,ht),at);function at(){if(!(this instanceof at))throw new TypeError("Cannot call a class as a function");this.userId=Q.default.getProfile().pId,this.key="fb6cjraf9cejut2a",this.loadScript("liftigniter")}c.a.subscribe({topic:"tmg.page.ready",func:function(){V.default.isAuthor()||new nt},runIfAlreadyPublished:!0});var it=(ht=[{key:"register",value:function(){liftigniter("setRequestFields",["title","url","image"]),liftigniter("register",{max:this.params.maxStories,widget:this.params.widget,callback:this.parseData.bind(this)})}},{key:"parseData",value:function(t){var n="column"===this.params.layout;t.items.forEach(function(t,e){t.isRow=!n,t.image&&(t.image=t.image.replace("?impolicy=logo-overlay","?impolicy=utilities-thumbnail"),t.image=t.image.replace("?imwidth=1200","?impolicy=utilities-thumbnail"),t.image=t.image.replace("https://www.telegraph.co.uk","")),t.url&&(t.url=t.url.replace("https://www.telegraph.co.uk","")),t.className="u-separator-top",t.index=e,n&&(t.className="card--feature-switch grid-col grid-col-12 grid-col-sm-4 grid-col-md-2",t.image&&(t.image=t.image.replace("?impolicy=utilities-thumbnail","?imwidth=210")))}),this.render(t)}},{key:"render",value:function(t){var e='\n\t\t\t{{#items}}\n\t\t\t\t<article class="card u-clickable-area {{className}}" data-card data-track-wrapper="'.concat(this.params.trackingName,'">\n\t\t\t\t\t<div class="card__content">\n\t\t\t\t\t\t<h3 class="list-headline u-heading-7">\n\t\t\t\t\t\t\t<a class="list-headline__link u-clickable-area__link" href="{{url}}" data-track-txt data-track-index="{{index}}">\n\t\t\t\t\t\t\t\t<span class="list-headline__text">\n\t\t\t\t\t\t\t\t\t{{title}}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t</div>\n\t\t\t\t\t{{#image}}\n\t\t\t\t\t\t<div class="card__thumbnail {{#isRow}}card__thumbnail--square{{/isRow}} u-order-first">\n\t\t\t\t\t\t\t<figure class="card__figure">\n\t\t\t\t\t\t\t\t<img src="{{image}}" class="card__image" alt="Image of {{title}}" />\n\t\t\t\t\t\t\t</figure>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{{/image}}\n\t\t\t\t</article>\n\t\t\t{{/items}}');this.element.innerHTML=liftigniter("render",e,t),this.track()}},{key:"track",value:function(){liftigniter("track",{elements:this.element.querySelectorAll("[data-card]"),name:this.params.widget,source:"LI"}),(new $).init()}}],function(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}(rt.prototype,ht),rt);function rt(t,e){if(!(this instanceof rt))throw new TypeError("Cannot call a class as a function");this.element=t,this.params=e,this.register()}c.a.subscribe({topic:"tmg.liftigniter.ready",func:function(){V.default.isAuthor()||(function(t){var e;if(!(t=(e=!(e=function(t){if(Array.isArray(t))return i(t)}(t))?"undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"]?Array.from(t):void 0:e)||function(t){if(t){if("string"==typeof t)return i(t,void 0);var e=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(e="Object"===e&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?i(t,void 0):void 0}}(t)))throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return t}(document.querySelectorAll("[data-liftigniter]")).forEach(function(t){new it(t,h.default.tryParse(t.dataset.liftigniter))}),liftigniter("fetch"))},runIfAlreadyPublished:!0});var ot=(function(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}(st.prototype,[{key:"toggleList",value:function(){this.container.parentNode.classList.toggle("destinations-selector--open")}},{key:"addOpenButton",value:function(){this.openButton=this.container.parentNode.querySelector("[data-button-open]"),this.openButton.addEventListener("click",this.toggleList.bind(this))}},{key:"addBackButton",value:function(){this.backBt=this.container.parentNode.querySelector("[data-button-back]"),this.backBt.addEventListener("click",function(){this.setCurrentLevel(this.currentLevel-1)}.bind(this))}},{key:"attachDomEvents",value:function(t){this.container.parentNode.querySelector("[data-selector-overlay]").addEventListener("click",this.toggleList.bind(this)),t.addEventListener("click",function(t){var e=this.structure.indexOf(t.target.dataset.childrenType);this.setCurrentLevel(e),this.currentList=t=document.getElementById(t.target.dataset.showChildren),t.classList.add("destinations__list--active")}.bind(this),!1)}},{key:"setCurrentLevel",value:function(t){if(0<t?(this.backBt.classList.remove("destinations-selector__back-bt--label-close"),this.backBt.classList.add("destinations-selector__back-bt--label-back")):(this.backBt.classList.add("destinations-selector__back-bt--label-close"),this.backBt.classList.remove("destinations-selector__back-bt--label-back")),t<0)this.toggleList();else{for(var e=(this.currentLevel=t)+1;e<this.structure.length;e++){var n=document.querySelectorAll("#destination-".concat(this.structure[e]," .destinations__list--active"));0<n.length&&Array.from(n).forEach(function(t){setTimeout(function(){t.classList.remove("destinations__list--active")},500)})}this.container.style.transform="translateX(-".concat(100*t,"%)")}}}]),st);function st(t){var e=this;if(!(this instanceof st))throw new TypeError("Cannot call a class as a function");this.container=t,this.structure=["continent","country","city","poi"],this.currentLevel=0,this.currentList=null,this.addOpenButton(),this.addBackButton(),this.container.querySelectorAll("[data-has-children]").forEach(function(t){return e.attachDomEvents(t)})}c.a.subscribe({topic:"tmg.page.ready",func:function(){var t=document.querySelector('[data-js="destinations-selector__container"]');t&&new ot(t)},runIfAlreadyPublished:!0});var ct=(function(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}(lt.prototype,[{key:"bindEvents",value:function(){var t=this;this.element.addEventListener("click",function(){t.addBackToTopEvent()})}},{key:"addBackToTopEvent",value:function(){Y.default.addPropertyValue("event",["backToTheTop"])}}]),lt);function lt(t){if(!(this instanceof lt))throw new TypeError("Cannot call a class as a function");this.element=t}c.a.subscribe({topic:"tmg.page.ready",func:function(){var t=document.querySelector("[data-back-to-top-event]");t&&new ct(t).bindEvents()},runIfAlreadyPublished:!0});var ut=(ht=[{key:"init",value:function(){this.checkUser()}},{key:"checkUser",value:function(){var t={"api-path":this.apiPathUrl()+"accounts/me?subscription=true&paymentMethod=true"},t=Object.assign({},this.commonHeaderContent,t);t={method:"POST",headers:new Headers(t)};var e=this;this.accessToken&&this.idToken?fetch(this.proxyServletUrl,t).then(function(t){return t.json()}).then(function(t){t.subscriptions&&(t=t.subscriptions.filter(function(t){return"Active"===t.status})[0])&&t["@id"]?e.getSubscriptions(t["@id"]):(sessionStorage.setItem("upgradeErrorType","error-no-upgrade"),window.location.href="/secure/upgrade/error")}).catch(function(){sessionStorage.setItem("upgradeErrorType","error-technical"),window.location.href="/secure/upgrade/error"}):window.location.href="/secure/login/?redirect=../upgrade"}},{key:"getSubscriptions",value:function(t){this.subIdUrl=t.slice(t.indexOf(".co.uk/")+7,t.length),t=Object.assign({},this.commonHeaderContent,{"api-path":this.subIdUrl+"/upgrade-offers"}),t={method:"POST",headers:new Headers(t)};var e=this;fetch(this.proxyServletUrl,t).then(function(t){return t.json()}).then(function(t){e.prepareResponse(t)}).catch(function(){sessionStorage.setItem("upgradeErrorType","error-technical"),window.location.href="/secure/upgrade/error"})}},{key:"prepareResponse",value:function(t){var e,r,o,n,s;!t||1===(e=t.priceChange).length&&0===Object.keys(e[0]).length&&e[0].constructor===Object||!e[0].alternatives?(sessionStorage.setItem("upgradeErrorType","error-no-upgrade"),window.location.href="/secure/upgrade/error"):(e=document.querySelector("#entry-template").innerHTML,e=Handlebars.compile(e)(t),r=t["@id"],o=this,n=t.productFriendlyName,s=t.priceChange[0].number,document.querySelector(".subscription-list").innerHTML=e,o.disableSpinner(),document.querySelector(".site-header-subs__subscription").innerHTML="You currently have ".concat("Annually"===t.frequencyDescription?"an annual":"Monthly"===t.frequencyDescription?"a monthly":"a periodic"," subscription to ").concat(n),document.querySelectorAll(".call-to-action").forEach(function(i){i.addEventListener("click",function(t){t.preventDefault();var e=t.target.dataset.id;t=t.target.dataset.frequency;var n=i.querySelector("button"),a=i.closest(".subscription__options").dataset.productName;n.innerHTML="Loading...",n.setAttribute("disabled",!0),n.classList.add("call-to-action__link--disabled"),o.upgradeSubscription(e,r,t,a,s)},!1)}))}},{key:"upgradeSubscription",value:function(t,e,n,a,i){e=Object.assign({},this.commonHeaderContent,{"api-path":this.subIdUrl+"/upgrade","api-method":"POST"}),e=new Headers(e);var r=(new Date).toISOString().slice(0,16)+"Z";t={body:JSON.stringify(i?{offerCode:t,priceChangeNumber:i,effectiveDate:r}:{offerCode:t}),method:"POST",headers:e},sessionStorage.setItem("productDetails",JSON.stringify({productName:a,frequency:n})),fetch(this.proxyServletUrl,t).then(function(t){308<t.status?(sessionStorage.setItem("upgradeErrorType","error-technical"),window.location.href="/secure/upgrade/error"):(sessionStorage.removeItem("upgradeErrorType"),window.location.href="/secure/upgrade/"+("Premium"===a?"confirmation-premium":"confirmation-premium-digital"))}).catch(function(){sessionStorage.setItem("upgradeErrorType","error-technical"),window.location.href="/secure/upgrade/error"})}}],function(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}(dt.prototype,ht),dt);function dt(t){var e=this;if(!(this instanceof dt))throw new TypeError("Cannot call a class as a function");this.element=t,this.accessToken=sessionStorage.getItem("access_token"),this.idToken=sessionStorage.getItem("id_token"),this.host=location.host,this.apiHost=function(){return"secure.telegraph.co.uk"===e.host?"api.telegraph.co.uk":"api-preprod.telegraph.co.uk"},this.proxyServletUrl="https://"+this.host+"/bin/core/proxyservlet",this.commonHeaderContent={access_token:this.accessToken,id_token:this.idToken,acccept:"application/json","api-auth":!0,"api-strip-cookies":!0,"content-type":"application/json","api-method":"GET","api-host":this.apiHost(),"api-protocol":"HTTPS",origin:"https://"+this.host,referer:"https://"+this.host+"/secure/personal/",dataType:"JSON","x-requested-with":"XMLHttpRequest"},this.apiPathUrl=function(){return"secure.telegraph.co.uk"===e.host?"/commerce/":"secure-staging-ams64.telegraph.co.uk"===e.host?"/commerce-api-qa/commerce/":"/commerce-api-uat/commerce/"},this.subIdUrl="",this.disableSpinner=function(){var t=document.querySelector(".lds-spinner");return t?t.classList.add("hidden"):null}}c.a.subscribe({topic:"tmg.page.ready",func:function(){var t=document.querySelectorAll('[data-js="SubscriptionUpgrade"]');0<t.length&&new ut(t).init()},runIfAlreadyPublished:!0});var ht={subscriptionUpgrade:ut},pt=(function(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}(ft.prototype,[{key:"init",value:function(){sessionStorage.upgradeErrorType?this.errorPage():this.confirmationPage()}},{key:"confirmationPage",value:function(){var t=JSON.parse(sessionStorage.productDetails);document.querySelector(".site-header-subs__subscription").innerHTML="We have updated your subscription to ".concat(t.productName," [").concat(t.frequency,"]")}},{key:"errorPage",value:function(){var t=document.querySelector(".subscription--error"),e=t.querySelector(".subscription__title"),n=t.querySelector(".subscription__error-msg");t.removeAttribute("hidden"),t.removeAttribute("aria-hidden"),"error-technical"===sessionStorage.upgradeErrorType?(e.innerHTML="We're sorry, there seems to have been a technical error processing your upgrade.",n.innerHTML='To complete the transaction please contact our contact center \nUK calls: <a href="tel:08003163500">0800 316 3500</a> \nInternational calls: <a href="tel:+441622335007">+44 (0) 1622 33 50 07</a>'):(e.innerHTML="We're sorry, we don't have an upgrade available for you at the moment.",n.innerHTML='To find more about your subscription or talk to one of our team members please call our contact center on <a href="tel:08003163500">0800 316 3500</a> and quote your subscriber number.'),setTimeout(function(){sessionStorage.removeItem("upgradeErrorType")},1e3)}}]),ft);function ft(t){if(!(this instanceof ft))throw new TypeError("Cannot call a class as a function");this.element=t,this.accessToken=sessionStorage.getItem("access_token"),this.idToken=sessionStorage.getItem("id_token")}c.a.subscribe({topic:"tmg.page.ready",func:function(){var t=document.querySelectorAll('[data-js="subscription-confirmation"]');0<t.length&&new pt(t).init()},runIfAlreadyPublished:!0}),e.default={dataLayer:Y.default,environment:N.default,tracking:$,utils:G.default,socialTracking:z,user:Q.default,store:t.a,accordion:d,cookies:u.a,redirect:p.a,json:h.default,throttle:f.a,url:g.default,calendarAvail:k,contentNav:S,counter:m,carousel:C,overlayContinuation:M,navigation:y,page:V.default,productSort:void 0,modalDropdown:H,subscriptionUpgrade:ht,subscriptionConfirmation:{subscriptionConfirmation:pt},viewport:tt,dragScroll:o.default,guid:X.default,modal:n.default,captionTrigger:Z,liftIgniter:nt,moreStories:it,destinationsSelector:ot,siteFooter:ct}}],[[35,0,1]]]);
