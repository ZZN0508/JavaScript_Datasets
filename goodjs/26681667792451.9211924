(self.AMP=self.AMP||[]).push({n:"amp-analytics",ev:"0.1",l:!0,v:"2106030132000",m:0,f:function(e,t){"use strict";function l(t){var e,n,i="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return i?i.call(t):{next:(e=t,n=0,function(){return n<e.length?{done:!1,value:e[n++]}:{done:!0}})}}var r="function"==typeof Object.create?Object.create:function(t){function e(){}return e.prototype=t,new e};var n,i=function(t){for(var e=["object"==typeof globalThis&&globalThis,t,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global],n=0;n<e.length;++n){var i=e[n];if(i&&i.Math==Math)return i}return function(){throw Error("Cannot find global object")}()}(this);if("function"==typeof Symbol&&Symbol("x"),"function"==typeof Object.setPrototypeOf)I=Object.setPrototypeOf;else{t:{var o={};try{o.__proto__={a:!0},n=o.a;break t}catch(t){}n=!1}I=n?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var a,s=I;function c(t,e){if(t.prototype=r(e.prototype),t.prototype.constructor=t,s)s(t,e);else for(var n in e){var i;"prototype"!=n&&(Object.defineProperties?(i=Object.getOwnPropertyDescriptor(e,n))&&Object.defineProperty(t,n,i):t[n]=e[n])}t.nd=e.prototype}function h(){return a=a||Promise.resolve(void 0)}function f(){var n=this;this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}var p=Array.isArray;function d(t,e){var n=t.length-e.length;return 0<=n&&t.indexOf(e,n)==n}var u=Object.prototype,m=u.hasOwnProperty,g=u.toString;function v(t){return"[object Object]"===g.call(t)}function b(t){return t||{}}function y(t,e){return m.call(t,e)}function E(t,e,n){var i=void 0===n?10:n,r=[],o=[];for(o.push({t:t,s:e,d:0});0<o.length;){var a=(e=o.shift()).d;t=e.s;var s=e.t;if(r.includes(t))throw Error("Source object has a circular reference.");if(r.push(t),s!==t)if(i<a)Object.assign(s,t);else for(n=(e=l(Object.keys(t))).next();!n.done;n=e.next()){var c=t[n=n.value];if(y(s,n)){var u=s[n];if(v(c)&&v(u)){o.push({t:u,s:c,d:a+1});continue}}s[n]=c}}}function A(t){return"number"==typeof t&&isFinite(t)}function w(){var n=function(t){for(var e=null,n="",i=l(arguments),r=i.next();!r.done;r=i.next())if((r=r.value)instanceof Error&&!e){var o=e=void 0;if(null!=(o=Object.getOwnPropertyDescriptor(r,"message"))&&o.writable)e=r;else{var o=r.stack,a=Error(r.message);for(e in r)a[e]=r[e];a.stack=o,e=a}}else n&&(n+=" "),n+=r;return e?n&&(e.message=n+": "+e.message):e=Error(n),e}.apply(null,arguments);setTimeout(function(){var t,e;throw null==(e=(t=self).__AMP_REPORT_ERROR)||e.call(t,n),n})}var T=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function S(t,e){e=e=void 0===e?"":e;try{return decodeURIComponent(t)}catch(t){return e}}function R(t){var e=Object.create(null);if(!t)return e;for(;i=T.exec(t);){var n=S(i[1],i[1]),i=i[2]?S(i[2].replace(/\+/g," "),i[2]):"";e[n]=i}return e}var _="";function P(t){var e,n=t||self;return e=n.__AMP_MODE||(e=R(n.location.originalHash||n.location.hash),_=_||(n.AMP_CONFIG&&n.AMP_CONFIG.v?n.AMP_CONFIG.v:"012106030132000"),t=R(n.location.originalHash||n.location.hash),t=!(!["1","actions","amp","amp4ads","amp4email"].includes(t.development)&&!n.AMP_DEV_MODE),n.__AMP_MODE={localDev:!1,development:t,examiner:"2"==e.development,esm:!1,geoOverride:e["amp-geo"],minified:!0,test:!1,log:e.log,version:"2106030132000",rtvVersion:_})}var I=self.AMP_CONFIG||{},M=("string"==typeof I.cdnProxyRegex?new RegExp(I.cdnProxyRegex):I.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function O(t){if(!self.document||!self.document.head||self.location&&M.test(self.location.origin))return null;t=self.document.head.querySelector('meta[name="'+t+'"]');return t&&t.getAttribute("content")||null}var C={thirdParty:I.thirdPartyUrl||"https://3p.ampproject.net",thirdPartyFrameHost:I.thirdPartyFrameHost||"ampproject.net",thirdPartyFrameRegex:("string"==typeof I.thirdPartyFrameRegex?new RegExp(I.thirdPartyFrameRegex):I.thirdPartyFrameRegex)||/^d-\d+\.ampproject\.net$/,cdn:I.cdnUrl||O("runtime-host")||"https://cdn.ampproject.org",cdnProxyRegex:M,localhostRegex:/^https?:\/\/localhost(:\d+)?$/,errorReporting:I.errorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r",betaErrorReporting:I.betaErrorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r-beta",localDev:I.localDev||!1,trustedViewerHosts:[/(^|\.)google\.(com?|[a-z]{2}|com?\.[a-z]{2}|cat)$/,/(^|\.)gmail\.(com|dev)$/],geoApi:I.geoApiUrl||O("amp-geo-api")};self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var N,x,k=self.__AMP_LOG;function D(){if(!k.user)throw Error("failed to call initLogConstructor");return k.user}function L(){if(k.dev)return k.dev;throw Error("failed to call initLogConstructor")}function j(t,e,n,i,r,o){return D().assert(t,e,n,i,r,o,void 0,void 0,void 0,void 0,void 0)}function U(t,e){return z(t=F(t),e)}function V(t,e){return z(W(G(t)),e)}function H(t,e){return X(t=W(t=G(t)),e)?z(t,e):null}function q(t,e){return K(W(t),e)}function F(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}function B(t,e){t=(t.ownerDocument||t).defaultView,e=e||F(t);if(t&&t!=e&&F(t)==e)try{return t.frameElement}catch(t){}return null}function G(t){return t.nodeType?U((t.ownerDocument||t).defaultView,"ampdoc").getAmpDoc(t):t}function W(t){return(t=G(t)).isSingleDoc()?t.win:t}function z(t,e){return X(t,e),(t=J(t)[e]).obj||(t.obj=new t.ctor(t.context),t.context=null,t.resolve&&t.resolve(t.obj)),t.obj}function $(t,e,n,i){var r=J(t),o=r[n];(o=o||(r[n]={obj:null,promise:null,resolve:null,reject:null,context:null,ctor:null,sharedInstance:!1})).ctor||(o.ctor=i,o.context=e,o.sharedInstance=!1,o.resolve&&z(t,n))}function Y(t,e){var n,i,r=K(t,e);return r||((t=J(t))[e]=(n=new f,i=n.promise,r=n.reject,n=n.resolve,i.catch(function(){}),{obj:null,promise:i,resolve:n,reject:r,context:null,ctor:null}),t[e].promise)}function K(t,e){var n=J(t)[e];return n?n.promise||(z(t,e),n.promise=Promise.resolve(n.obj)):null}function J(t){return t.__AMP_SERVICES||(t.__AMP_SERVICES={})}function X(t,e){return(t=t.__AMP_SERVICES&&t.__AMP_SERVICES[e])&&t.ctor}function Z(t){try{var e=t.ownerDocument,n=e.createElement("div"),i=e.createElement("div");return n.appendChild(i),n.querySelector(":scope div")===i}catch(t){return!1}}function Q(t,e){t.classList.add("i-amphtml-scoped");e=e.replace(/^|,/g,"$&.i-amphtml-scoped "),e=t.querySelectorAll(e);return t.classList.remove("i-amphtml-scoped"),e}function tt(t,e){var n=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector;return!!n&&n.call(t,e)}function et(t,e){return t.closest?t.closest(e):function(t,e){for(;t&&void 0!==t;t=t.parentElement)if(e(t))return t;return null}(t,function(t){return tt(t,e)})}function nt(t,e,n){for(var i in t=t.createElement(e),n)t.setAttribute(i,n[i]);return t}function it(t,e){var n=t.dataset;t={};var i,r=e||/^param(.+)/;for(i in n){var o=i.match(r);o&&(t[o[1][0].toLowerCase()+o[1].substr(1)]=n[i])}return t}function rt(e,n,i,r){var t=q(e,n);if(t)return t;var o=G(e);return o.whenExtensionsKnown().then(function(){var t=o.getExtensionVersion(i);return t?U(o.win,"extensions").waitForExtension(i,t):null}).then(function(t){return t?r?q(e,n):Y(W(e),n):null})}function ot(t){return U(t,"performance")}function at(t){return H(t,"url-replace")}function st(t){return rt(t,"consentPolicyManager","amp-consent")}function ct(t){return V(t,"viewport")}function ut(t,e,n,i){function r(e){try{return a(e)}catch(t){var n;throw null==(e=(n=self).__AMP_REPORT_ERROR)||e.call(n,t),t}}var o=t,a=n,s=function(){if(void 0!==x)return x;x=!1;try{var t={get capture(){x=!0}};self.addEventListener("test-options",null,t),self.removeEventListener("test-options",null,t)}catch(t){}return x}(),c=!(null==i||!i.capture);return o.addEventListener(e,r,s?i:c),function(){null==o||o.removeEventListener(e,r,s?i:c),r=o=a=null}}function lt(t,e,n,i){var r=n,o=ut(t,e,function(t){try{r(t)}finally{r=null,o()}},i);return o}function ht(n){var i,r,t;if((t=n).complete||"complete"==t.readyState||ft(t)&&0<t.readyState||t.document&&"complete"==t.document.readyState)return Promise.resolve(n);var o=ft(n);return o&&n.__AMP_MEDIA_LOAD_FAILURE_SRC===n.currentSrc?Promise.reject(n):new Promise(function(t,e){if(i=o?lt(n,"loadedmetadata",t,{capture:!0}):lt(n,"load",t),n.tagName){t=n;if(o&&!n.hasAttribute("src")&&!(t=function(t,e){for(t=t.lastElementChild;t;t=t.previousElementSibling)if(e(t))return t;return null}(n,function(t){return"SOURCE"===t.tagName})))return e(Error("Media has no source."));r=lt(t,"error",e)}}).then(function(){return r&&r(),n},function(){i&&i(),ft(n)&&(n.__AMP_MEDIA_LOAD_FAILURE_SRC=n.currentSrc||!0);var t=n;throw t&&t.src&&(t=t.src),D().createError("Failed to load:",t)})}function ft(t){return"AUDIO"===t.tagName||"VIDEO"===t.tagName}function pt(t,e){var n=0;return"active"===t.type&&(n=5),Math.min(e-t.time,n)}function dt(){this.Kb=0,this.ra=void 0}dt.prototype.push=function(t){this.ra&&this.ra.time<t.time&&(this.Kb+=pt(this.ra,t.time)),this.ra=t},dt.prototype.getTotalEngagedTime=function(t){var e=0;return e=void 0!==this.ra?this.Kb+pt(this.ra,t):e};var mt=["mousedown","mouseup","mousemove","keydown","keyup"],gt=["mouseleave"];function vt(t){this.ampdoc=t,this.Bc=this.hd.bind(this),this.Sb=this.xb.bind(this),this.zc=this.$b.bind(this),this.Ac=this.Qc.bind(this),this.Ha={},this.Ia=[],this.Wa=this.Va=!1,this.Ob=new dt,this.T=ct(this.ampdoc),this.ampdoc.whenFirstVisible().then(this.gd.bind(this))}function bt(t){t=Date.now()-t.X;return 0<t?t:0}function yt(t,e,n,i){for(var r=0;r<n.length;r++){var o=t.Ia,a=o.push,s=ut(e,n[r],i,void 0);a.call(o,s)}}function Et(t,e){var n=bt(t),i=Math.floor(n/1e3);setTimeout(t.Bc,1e3-n%1e3),t.Ob.push({type:e,time:i})}function At(t,e){try{return JSON.parse(t)}catch(t){return null==e||e(t),null}}(ui=vt.prototype).gd=function(){this.X=Date.now(),this.xb(),yt(this,this.ampdoc.getRootNode(),mt,this.Sb),yt(this,this.ampdoc.getRootNode(),gt,this.zc),this.Ia.push(this.ampdoc.onVisibilityChanged(this.Ac)),this.T.onScroll(this.Sb)},ui.hd=function(){this.Wa=this.Va=!1},ui.xb=function(){this.Va||(this.Va=!0,this.Wa=!1,Et(this,"active"))},ui.$b=function(){this.Wa||(this.Wa=!0,this.Va=!1,Et(this,"inactive"))},ui.Qc=function(){this.ampdoc.isVisible()?this.xb():this.$b()},ui.Mb=function(){for(var t=0;t<this.Ia.length;t++){var e=this.Ia[t];"function"==typeof e&&e()}this.Ia=[]},ui.md=function(){this.Mb()},ui.getTotalEngagedTime=function(){var t=Math.floor(bt(this)/1e3);return this.Ob.getTotalEngagedTime(t)},ui.getIncrementalEngagedTime=function(t,e){var n=void 0===e||e;if(!y(this.Ha,t))return n&&(this.Ha[t]=this.getTotalEngagedTime()),this.getTotalEngagedTime();e=this.Ha[t];return!1===n?this.getTotalEngagedTime()-e:(this.Ha[t]=this.getTotalEngagedTime(),this.Ha[t]-e)};var wt=JSON.parse('{"transport":{"beacon":true,"xhrpost":true,"image":true},"vars":{"accessReaderId":"ACCESS_READER_ID","ampGeo":"AMP_GEO","ampState":"AMP_STATE","ampVersion":"AMP_VERSION","ampdocHost":"AMPDOC_HOST","ampdocHostname":"AMPDOC_HOSTNAME","ampdocMeta":"AMPDOC_META","ampdocUrl":"AMPDOC_URL","authdata":"AUTHDATA","availableScreenHeight":"AVAILABLE_SCREEN_HEIGHT","availableScreenWidth":"AVAILABLE_SCREEN_WIDTH","backgroundState":"BACKGROUND_STATE","browserLanguage":"BROWSER_LANGUAGE","canonicalHost":"CANONICAL_HOST","canonicalHostname":"CANONICAL_HOSTNAME","canonicalPath":"CANONICAL_PATH","canonicalUrl":"CANONICAL_URL","clientId":"CLIENT_ID","consentState":"CONSENT_STATE","consentString":"CONSENT_STRING","contentLoadTime":"CONTENT_LOAD_TIME","cookie":"COOKIE","counter":"COUNTER","cumulativeLayoutShift":"CUMULATIVE_LAYOUT_SHIFT","documentCharset":"DOCUMENT_CHARSET","documentReferrer":"DOCUMENT_REFERRER","domInteractiveTime":"DOM_INTERACTIVE_TIME","domainLookupTime":"DOMAIN_LOOKUP_TIME","experimentBranches":"EXPERIMENT_BRANCHES","externalReferrer":"EXTERNAL_REFERRER","firstContentfulPaint":"FIRST_CONTENTFUL_PAINT","firstInputDelay":"FIRST_INPUT_DELAY","firstViewportReady":"FIRST_VIEWPORT_READY","fragmentParam":"FRAGMENT_PARAM","htmlAttr":"HTML_ATTR","incrementalEngagedTime":"INCREMENTAL_ENGAGED_TIME","largestContentfulPaint":"LARGEST_CONTENTFUL_PAINT","makeBodyVisible":"MAKE_BODY_VISIBLE","navRedirectCount":"NAV_REDIRECT_COUNT","navTiming":"NAV_TIMING","navType":"NAV_TYPE","pageDownloadTime":"PAGE_DOWNLOAD_TIME","pageLoadTime":"PAGE_LOAD_TIME","pageViewId":"PAGE_VIEW_ID","pageViewId64":"PAGE_VIEW_ID_64","queryParam":"QUERY_PARAM","random":"RANDOM","redirectTime":"REDIRECT_TIME","resourceTiming":"RESOURCE_TIMING","screenColorDepth":"SCREEN_COLOR_DEPTH","screenHeight":"SCREEN_HEIGHT","screenWidth":"SCREEN_WIDTH","scrollHeight":"SCROLL_HEIGHT","scrollLeft":"SCROLL_LEFT","scrollTop":"SCROLL_TOP","scrollWidth":"SCROLL_WIDTH","serverResponseTime":"SERVER_RESPONSE_TIME","sourceHost":"SOURCE_HOST","sourceHostname":"SOURCE_HOSTNAME","sourcePath":"SOURCE_PATH","sourceUrl":"SOURCE_URL","tcpConnectTime":"TCP_CONNECT_TIME","timestamp":"TIMESTAMP","timezone":"TIMEZONE","timezoneCode":"TIMEZONE_CODE","title":"TITLE","totalEngagedTime":"TOTAL_ENGAGED_TIME","userAgent":"USER_AGENT","viewer":"VIEWER","viewportHeight":"VIEWPORT_HEIGHT","viewportWidth":"VIEWPORT_WIDTH"}}');function Tt(){this.Ec=100,this.ob=this.Jb=0,this.Ma=Object.create(null)}Tt.prototype.has=function(t){return!!this.Ma[t]},Tt.prototype.get=function(t){t=this.Ma[t];if(t)return t.access=++this.ob,t.payload},Tt.prototype.put=function(t,e){if(this.has(t)||this.Jb++,this.Ma[t]={payload:e,access:this.ob},!(this.Jb<=this.Ec)){t=this.Ma;var n,i=this.ob+1;for(n in t){var r,o=t[n].access;o<i&&(i=o,r=n)}void 0!==r&&(delete t[r],this.Jb--)}};var St,Rt,_t={c:!0,v:!0,a:!0,ad:!0},Pt=/[?&]amp_js[^&]*/,It=/[?&]amp_gsa[^&]*/,Mt=/[?&]amp_r[^&]*/,Ot=/[?&]amp_kit[^&]*/,Ct=/[?&]usqp[^&]*/;function Nt(t){St||(St=self.document.createElement("a"),Rt=self.__AMP_URL_CACHE||(self.__AMP_URL_CACHE=new Tt));var e,n=Rt,i=St;return t=n&&n.has(t)?n.get(t):(i.href=t,i.protocol||(i.href=i.href),"/"!==(e={href:i.href,protocol:i.protocol,host:i.host,hostname:i.hostname,port:"0"==i.port?"":i.port,pathname:i.pathname,search:i.search,hash:i.hash,origin:null}).pathname[0]&&(e.pathname="/"+e.pathname),("http:"==e.protocol&&80==e.port||"https:"==e.protocol&&443==e.port)&&(e.port="",e.host=e.hostname),e.origin=i.origin&&"null"!=i.origin?i.origin:"data:"!=e.protocol&&e.host?e.protocol+"//"+e.host:e.href,n&&n.put(t,e),e)}function xt(t,e,n){if(!e)return t;var i=t.split("#",2),t=i[0].split("?",2);return t[0]+(t[1]?n?"?"+e+"&"+t[1]:"?"+t[1]+"&"+e:"?"+e)+(i[1]?"#"+i[1]:"")}function kt(t){var e,n=[];for(e in t){var i=t[e];if(null!=i)if(p(i))for(var r=0;r<i.length;r++){var o=i[r];n.push(encodeURIComponent(e)+"="+encodeURIComponent(o))}else n.push(encodeURIComponent(e)+"="+encodeURIComponent(i))}return n.join("&")}function Dt(t,e){var n=void 0===n?"source":n;j(null!=t,"%s %s must be available",e,n);var i=t;j((i="https:"==(i="string"==typeof i?Nt(i):i).protocol||"localhost"==i.hostname||"127.0.0.1"==i.hostname||d(i.hostname,".localhost"))||/^(\/\/)/.test(t),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',e,n,t)}function Lt(t){return"string"==typeof t&&(t=Nt(t)),C.cdnProxyRegex.test(t.origin)}function jt(t){return"undefined"!=typeof TextEncoder?new TextEncoder("utf-8").encode(t):Ut(unescape(encodeURIComponent(t)))}function Ut(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++){var i=t.charCodeAt(n);e[n]=i}return e}function Vt(t){for(var e=Array(t.length),n=0;n<t.length;n++)e[n]=String.fromCharCode(t[n]);return e.join("")}var Ht={"-":"+",_:"/",".":"="},qt={"+":"-","/":"_","=":"."};function Ft(t){return t=jt(t),t=Vt(t=t),btoa(t).replace(/[+/=]/g,function(t){return qt[t]})}function Bt(t,e){try{var n=t.document.cookie}catch(t){n=""}if(!n)return null;var i=n.split(";");for(t=0;t<i.length;t++){var r=i[t].trim(),o=r.indexOf("=");if(-1!=o&&S(r.substring(0,o).trim())==e)return S(e=r.substring(o+1).trim(),e)}return null}function Gt(t){var e=t.document.head&&t.document.head.querySelector("meta[name='amp-cookie-scope']");if(e){var n,i,r,e=e.getAttribute("content")||"";return"string"==typeof(t=t.location.href)&&(t=Nt(t)),d(t=Nt(t=Lt(t)?(n=t.pathname.split("/"),j(_t[n[1]],"Unknown path prefix in url %s",t.href),j(0<(r="s"==(i=n[2])?"https://"+decodeURIComponent(n[3]):"http://"+decodeURIComponent(i)).indexOf("."),"Expected a . in origin %s",r),n.splice(1,"s"==i?3:2),(n=r+n.join("/"))+(i=(i=t.search)&&"?"!=i&&(i=i.replace(Pt,"").replace(It,"").replace(Mt,"").replace(Ot,"").replace(Ct,"").replace(/^[?&]/,""))?"?"+i:"")+(t.hash||"")):t.href).origin,"."+e)?e:t.split("://")[1]}if(!Lt(t.location.href)){for(i=(n=t.location.hostname.split("."))[n.length-1],r="-test-amp-cookie-tmp";Bt(t,r);)r="-test-amp-cookie-tmp0";for(var o=n.length-2;0<=o;o--)if(i=n[o]+"."+i,Wt(t,r,"delete",Date.now()+1e3,i),"delete"==Bt(t,r))return Wt(t,r,"delete",Date.now()-1e3,i),i}return null}function Wt(t,e,n,i,r,o,a){"ampproject.org"==r&&(n="delete",i=0),e=encodeURIComponent(e)+"="+encodeURIComponent(n)+"; path=/"+(r?"; domain="+r:"")+"; expires="+new Date(i).toUTCString()+(o?"; SameSite="+o:"")+(a?"; Secure":"");try{t.document.cookie=e}catch(t){}}function zt(t){return"string"==typeof t&&0==t.indexOf("amp-")&&-1!=t.indexOf("{")}var $t,Yt="Webkit webkit Moz moz ms O o".split(" "),Kt={getPropertyPriority:function(){return""},getPropertyValue:function(){return""}};function Jt(t){var e=!1;(e=void 0===e?t.hasAttribute("hidden"):e)?t.removeAttribute("hidden"):t.setAttribute("hidden","")}function Xt(t,e,n){var i=t.listeningFors;if(!(t=(i=!i&&n?t.listeningFors=Object.create(null):i)||null))return t;i=t[e];return(i=!i&&n?t[e]=[]:i)||null}function Zt(t){for(var e={sentinel:"unlisten"},n=t.length-1;0<=n;n--){var i=t[n];if(!i.frame.contentWindow)for(var r in t.splice(n,1),i=i.events)i[r].splice(0,1/0).forEach(function(t){t(e)})}}function Qt(h){h.listeningFors||h.addEventListener("message",function(t){if(t.data){var e=l="string"==typeof(l=t.data)?"{"==l.charAt(0)?At(l,function(t){L().warn("IFRAME-HELPER","Postmessage could not be parsed. Is it in a valid JSON format?",t)})||null:zt(l)?function(e){if(!zt(e))return null;var t=e.indexOf("{");return At(e.substr(t),function(t){return L().error("MESSAGING","Failed to parse message: "+e,t)})}(l):null:l;if(e&&e.sentinel){var n=t.source,i=Xt(h,e.sentinel);if(i){for(var r,o=0;o<i.length;o++){var a,s=i[o],c=s.frame.contentWindow;if(c){if(!(a=n==c))t:{for(a=n;a&&a!=a.parent;a=a.parent)if(a==c){a=!0;break t}a=!1}if(a){r=s;break}}else setTimeout(Zt,0,i)}n=r?r.events:null}else n=i;if(n){var u=n[e.type];if(u)for(u=u.slice(),n=0;n<u.length;n++)(0,u[n])(e,t.source,t.origin,t)}}}var l})}function te(r,o,t,a){function e(t,e,n,i){if("amp"==t.sentinel){if(e!=r.contentWindow)return;if(c!=n&&!("null"==n&&void 0))return}!a&&e!=r.contentWindow||("unlisten"==t.sentinel?s():o(t,e,n,i))}var n=r.ownerDocument.defaultView;Qt(n),t=function(t,e,n){var i=n?e.getAttribute("data-amp-3p-sentinel"):"amp";for(t=Xt(t,i,!0),i=0;i<t.length;i++){var r=t[i];if(r.frame===e){var o=r;break}}return o||(o={frame:e,events:Object.create(null)},t.push(o)),o.events}(n,r,t);var s,c=Nt(r.src).origin,i=t["send-iframe-transport-events"]||(t["send-iframe-transport-events"]=[]);return i.push(e),s=function(){var t;e&&(-1<(t=i.indexOf(e))&&i.splice(t,1),o=i=e=null)}}function ee(t,i){var r=this;this.bc=t,this.zb=!0,this.xa=[],this.Mb=te(this.bc,function(t,e,n){r.xa.some(function(t){return t.win==e})||r.xa.push({win:e,origin:n}),i(t,e,n)},this.zb,this.zb)}function ne(t){return t.classList.contains("i-amphtml-fie")||!!et(t,".i-amphtml-fie")}function ie(t,e){return!ne(e)&&!Lt(t.location)&&"inabox"!=P(t).runtime}ee.prototype.send=function(t,e){!function(t,e){for(var n=[],i=0,r=0;r<t.length;r++){var o=t[r];e(o,r,t)?n.push(o):(i<r&&(t[i]=o),i++)}i<t.length&&(t.length=i)}(this.xa,function(t){return!t.win.parent}),function(t,e,n,i,r){if(t.contentWindow)for(i.type=n,i.sentinel=r?t.getAttribute("data-amp-3p-sentinel"):"amp",t=i,r&&(t="amp-"+JSON.stringify(i)),i=0;i<e.length;i++)(r=e[i]).win.postMessage(t,r.origin)}(this.bc,this.xa,t,e,this.zb)},ee.prototype.destroy=function(){this.Mb(),this.xa.length=0};var re=null,oe=/^[a-zA-Z0-9\-_.]+$/;function ae(t){var e,t=(e=t)?Object.keys(e).filter(function(t){var e=oe.test(t);return e||D().error("amp-analytics/linker","Invalid linker key: "+t),e}).map(function(t){return t+"*"+Ft(String(e[t]))}).join("*"):"";return""===t?"":["1",se(t),t].join("*")}function se(t,e){var n=(new Date).getTimezoneOffset(),i=window,n=[window.navigator.userAgent,n,i.navigator.userLanguage||i.navigator.language].join("*"),i=e||0;if(t=[n,i=Math.floor(Date.now()/6e4)-i,t].join("*"),!re){for(n=Array(256),i=0;i<256;i++){for(var r=i,o=0;o<8;o++)r=1&r?r>>>1^3988292384:r>>>1;n[i]=r}re=n}for(t=jt(t),n=4294967295,i=0;i<t.length;i++)n=n>>>8^re[255&(n^t[i])];return((-1^n)>>>0).toString(36)}function ce(t){this.o=t,this.Aa={}}ce.prototype.get=function(t,e){if(!t||!e)return D().error("amp-analytics/linker-reader","LINKER_PARAM requires two params, name and id"),null;if(!y(this.Aa,t)){var n=this.Aa;if(y(r=R(this.o.location.search),t)){var i,r=r[t],o=this.o.location;if(this.o.history.replaceState&&(i=(i=o.search)&&"?"!=i&&(i=i.replace(new RegExp("[?&]"+t+"=[^&]*","g"),"").replace(/^[?&]/,""))?"?"+i:"",this.o.history.replaceState(null,"",o.origin+o.pathname+i+(o.hash||""))),i=0==(o=r.split("*")).length%2,r=o.length<4||!i?(D().error("amp-analytics/linker","Invalid linker_param value "+r),null):1!==(r=Number(o.shift()))?(D().error("amp-analytics/linker","Invalid version number "+r),null):{checksum:r=o.shift(),serializedIds:o=o.join("*")}){o=r.serializedIds;t:{for(r=r.checksum,i=0;i<=1;i++)if(se(o,i)==r){r=!0;break t}r=!1}if(r)for(r={},o=o.split("*"),i=0;i<o.length;i+=2){var a=o[i];oe.test(a)?(s=String(o[i+1]),s=Ut(atob(s.replace(/[-_.]/g,function(t){return Ht[t]}))),s="undefined"!=typeof TextDecoder?new TextDecoder("utf-8").decode(s):(s=Vt(new Uint8Array(s.buffer||s)),decodeURIComponent(escape(s))),r[a]=s):D().error("amp-analytics/linker","Invalid linker key "+a+", value ignored")}else D().error("amp-analytics/linker","LINKER_PARAM value checksum not valid"),r=null}else r=null}else r=null;n[t]=r}var s;return this.Aa[t]&&this.Aa[t][e]?this.Aa[t][e]:null};var ue=/^(?:([^\s]*)(\([^)]*\))|[^]+)$/,le={1:"sufficient",2:"insufficient",3:"not_required",4:"unknown"};function he(t,e,n){this.vars=t,this.iterations=void 0===e?2:e,this.noEncode=!!n,this.freezeVars={}}function fe(t,e,n){e=Number(e);var i=t.length;return j(A(e),"Start index "+e+"in substr macro should be a number"),n&&j(A(i=Number(n)),"Length "+i+" in substr macro should be a number"),t.substr(e,i)}function pe(t,e){return t&&t.length?t:e}function de(t,e,n){return e||D().warn("amp-analytics/variables","REPLACE macro must have two or more arguments"),n=n||"",t.replace(new RegExp(e,"g"),n)}function me(t,e,n){e||D().warn("amp-analytics/variables","MATCH macro must have two or more arguments");var i=0;return n&&(0!=(i=parseInt(n,10))&&!i||i<0)&&(D().error("amp-analytics/variables","Third argument in MATCH macro must be a number >= 0"),i=0),(t=t.match(new RegExp(e)))&&t[i]?t[i]:""}function ge(t,e,n,i){var r=Number(t),o=Number(e);j(!isNaN(r),"CALC macro - left operand must be a number"),j(!isNaN(o),"CALC macro - right operand must be a number");var a=0;switch(n){case"add":a=r+o;break;case"subtract":a=r-o;break;case"multiply":a=r*o;break;case"divide":j(o,"CALC macro - cannot divide by 0"),a=r/o;break;default:D().error("amp-analytics/variables","CALC macro - Invalid operation")}return Se(i)?Math.round(a):a}function ve(t,e){if(e)return(t.__AMP_EXPERIMENT_BRANCHES?t.__AMP_EXPERIMENT_BRANCHES[e]:null)||"";var n=((t=F(t=t)).__AMP_EXPERIMENT_BRANCHES||(t.__AMP_EXPERIMENT_BRANCHES={}),Object.assign({},t.__AMP_EXPERIMENT_BRANCHES));return Object.keys(n).map(function(t){return t+":"+n[t]}).join(",")}function be(t){var n=this;this.A=t,this.ea={},this.Uc=U(this.A.win,"amp-analytics-linker-reader"),this.ea.$DEFAULT=pe,this.ea.$SUBSTR=fe,ye(this,"$TRIM",function(t){return t.trim()}),ye(this,"$TOLOWERCASE",function(t){return t.toLowerCase()}),ye(this,"$TOUPPERCASE",function(t){return t.toUpperCase()}),ye(this,"$NOT",function(t){return String(!t)}),ye(this,"$BASE64",Ft),ye(this,"$HASH",this.Rc.bind(this)),ye(this,"$IF",function(t,e,n){return Se(t)?e:n}),this.ea.$REPLACE=de,this.ea.$MATCH=me,this.ea.$CALC=ge,ye(this,"$EQUALS",function(t,e){return t===e}),ye(this,"LINKER_PARAM",function(t,e){return n.Uc.get(t,e)}),ye(this,"TIMEZONE_CODE",function(){var t="";return t="Intl"in n.A.win&&"DateTimeFormat"in n.A.win.Intl?(new n.A.win.Intl.DateTimeFormat).resolvedOptions().timeZone:t}),ye(this,"SCROLL_TOP",function(){return Math.round(ct(n.A).getScrollTop())}),ye(this,"SCROLL_LEFT",function(){return Math.round(ct(n.A).getScrollLeft())}),ye(this,"EXPERIMENT_BRANCHES",function(t){return ve(n.A.win,t)}),ye(this,"AMPDOC_META",function(t,e){e=void 0===e?"":e;return null!=(t=n.A.getMetaByName(t))?t:e})}function ye(t,e,n){t.ea[e]=n}function Ee(e,t,n,i,r,o,a,s){return e.expandTemplate(t,new he(n.vars,n.iterations-1,!0),i,o,a).then(function(t){return r.expandStringAsync(s?t+s:t,o||e.getMacros(i),a)})}function Ae(t){if(null==t)return"";if(p(t))return t.map(Ae).join(",");var e=we(String(t)),t=e.argList;return encodeURIComponent(e.name)+t}function we(t){if(!t)return{name:"",argList:""};var e=t.match(ue);return j(e,"Variable with invalid format found: "+t),{name:e[1]||e[0],argList:e[2]||""}}function Te(t){return V(t,"amp-analytics-variables")}function Se(t){return"false"!==t&&""!==t&&"0"!==t&&"null"!==t&&"NaN"!==t&&"undefined"!==t}function Re(t){this.j=t,this.o=null,this.Kc=wt||{},this.lb={},this.h={},this.sa={},this.V=!1,this.I=Te(t)}function _e(t,e){var n={vars:{requestCount:0}};return Pe(Ie(t.Kc),n),Pe(Ie(t.lb),n,!0),Pe(Ie(e),n,!0),n}function Pe(t,e,n){for(var i in null==e&&(e={}),j(n||!t||!t.optout||"_gaUserPrefs.ioo"==t.optout||"__gaOptOutExtension"==t.optoutElementId,"optout property is only available to vendor config."),t)j(n||"iframePing"!=i,"iframePing config is only available to vendor config."),y(t,i)&&(p(t[i])?(p(e[i])||(e[i]=[]),e[i]=Pe(t[i],e[i],n)):v(t[i])?(v(e[i])||(e[i]={}),e[i]=Pe(t[i],e[i],n)):e[i]=t[i]);return e}function Ie(t){if(!t.requests)return t;for(var e in t.requests){var n,i;y(t.requests,e)&&(n=t.requests,i=v(i=t.requests[e])?i:{baseUrl:i},n[e]=i)}if(y(t,"requests")&&y(t,"requestOrigin"))for(var r in e=t.requestOrigin,t.requests)y(t.requests[r],"origin")||(t.requests[r].origin=e);return t}function Me(){this.O=null}he.prototype.freezeVar=function(t){this.freezeVars[t]=!0},he.prototype.getVar=function(t){return t=null==(t=this.vars[t])?"":t},be.prototype.getMacros=function(i){var n=this,t={COOKIE:function(t){var e=n.A.win;return ie(e,i)?Bt(e,t):null},CONSENT_STATE:function(t){var e=void 0===e?"default":e;return st(t).then(function(t){return t?t.whenPolicyResolved(e):null})}(i).then(function(t){return t?le[t]:null}),CONSENT_STRING:st(i).then(function(t){return t?t.getConsentStringInfo("default"):null}),CONSENT_METADATA:function(t){return e=i,n=j(t,"CONSENT_METADATA macro must contain a key"),function(t){return st(t).then(function(t){return t?t.getConsentMetadataInfo("default"):null})}(e).then(function(t){return t?t[n]:null});var e,n}},e=ne(i)?{}:{FIRST_CONTENTFUL_PAINT:function(){return ot(n.A.win).getMetric("fcpv")},FIRST_VIEWPORT_READY:function(){return ot(n.A.win).getMetric("pc")},MAKE_BODY_VISIBLE:function(){return ot(n.A.win).getMetric("mbv")},LARGEST_CONTENTFUL_PAINT:function(){return ot(n.A.win).getMetric("lcpv")},FIRST_INPUT_DELAY:function(){return ot(n.A.win).getMetric("fid")},CUMULATIVE_LAYOUT_SHIFT:function(){return ot(n.A.win).getMetric("cls")}};return Object.assign({},this.ea,t,e)},be.prototype.expandTemplate=function(t,r,o,a,s){var c=this;return function(n,i){var t=/\${([^}]*)}/g;if("string"==typeof i)return Promise.resolve(n.replace(t,i));var r=[],o=0;return n.replace(t,function(t){var e=arguments[arguments.length-2];r.push(n.slice(o,e)),o=e+t.length;t=i.apply(null,arguments);r.push(t)}),r.push(n.slice(o)),Promise.all(r).then(function(t){return t.join("")})}(t,function(t,e){if(r.iterations<0)return D().error("amp-analytics/variables","Maximum depth reached while expanding variables. Please ensure that the variables are not recursive."),t;if(!e)return"";var n=we(e);if(e=n.argList,n=n.name,r.freezeVars[n])return t;t=r.getVar(n);var i=at(o);if("string"==typeof t)t=Ee(c,t,r,o,i,a,s,e);else if(p(t)){for(e=0;e<t.length;e++)t[e]="string"==typeof t[e]?Ee(c,t[e],r,o,i,a,s):t[e];t=Promise.all(t)}return Promise.resolve(t).then(function(t){return r.noEncode?t:Ae(t)})})},be.prototype.Rc=function(t){return U(this.A.win,"crypto").sha384Base64(t)},(ui=Re.prototype).loadConfig=function(){var t=this;return this.o=this.j.ownerDocument.defaultView,this.V=this.j.hasAttribute("sandbox"),Promise.all([function(e){var n=e.j.getAttribute("config");if(!n||e.V)return h();Dt(n,e.j);var i=e.C();L().fine(i,"Fetching remote config",n);var r={};return e.j.hasAttribute("data-credentials")&&(r.credentials=e.j.getAttribute("data-credentials")),at(e.j).expandUrlAsync(n,e.I.getMacros(e.j)).then(function(t){return n=t,U(e.o,"xhr").fetchJson(n,r)}).then(function(t){return t.json()}).then(function(t){e.sa=t,L().fine(i,"Remote config loaded",n)},function(t){D().error(i,"Error loading remote config: ",n,t)})}(this),function(e){var n=e.j.getAttribute("type");if(!n)return h();var i=function(t){var e,n=C.cdn;(i="bg"===t)&&(i=!(null==(e=self.AMP_CONFIG)||!e.canary));var i=i?".canary":"";return n+"/rtv/"+P().rtvVersion+"/v0/analytics-vendors/"+t+i+".json"}(n),r=e.C();return L().fine(r,"Fetching vendor config",i),U(e.o,"xhr").fetchJson(i,{ampCors:!1}).then(function(t){return t.json()}).then(function(t){e.lb=t||{},L().fine(r,"Vendor config loaded for "+n,t)},function(t){D().error(r,"Error loading vendor config: ",i,t)})}(this)]).then(this.cd.bind(this)).then(this.Fc.bind(this)).then(function(){return t.h})},ui.cd=function(){var t=(this.lb.configRewriter||{}).url,e={};if(this.j.CONFIG)var n=this.j.CONFIG;else{var n={},i=this.C();try{var r=this.j.children;if(1==r.length){var o=this.j;/^[\w-]+$/.test("script");var a=(void 0!==N?N:N=Z(o))?o.querySelectorAll("> script".replace(/^|,/g,"$&:scope ")):Q(o,"> script");if(1!==a.length)throw Error("Found "+a.length+" <script> children. Expected 1.");var s=a[0];if("SCRIPT"!=s.tagName||!s.hasAttribute("type")||"APPLICATION/JSON"!=s.getAttribute("type").toUpperCase())throw Error('<script> child must have type="application/json"');try{n=JSON.parse(s.textContent)}catch(t){throw Error("Failed to parse <script> contents. Is it valid JSON?")}}else 1<r.length&&D().error(i,"The tag should contain only one <script> child.")}catch(t){D().error(i,t.message)}}i=n;return this.j.getAttribute("type")&&(i.transport||this.sa.transport)&&(n=this.C(),D().error(n,"Inline or remote config should not overwrite vendor transport settings")),i.transport&&i.transport.iframe&&(D().error("amp-analytics/config","Inline configs are not allowed to specify transport iframe"),i.transport.iframe=void 0),this.sa.transport&&this.sa.transport.iframe&&(D().error("amp-analytics/config","Remote configs are not allowed to specify transport iframe"),this.sa.transport.iframe=void 0),Pe(i,e),Pe(this.sa,e),!t||this.V?(this.h=_e(this,e),h()):function(n,t,i){Dt(i,n.j);var r=n.C();return L().fine(r,"Rewriting config",i),function(e,t){var n=t.configRewriter,i=n&&n.varGroups,r=(e.lb.configRewriter||{}).varGroups;if(!i&&!r)return h();if(i&&!r){n=e.C();return D().warn(n,"This analytics provider does not currently support varGroups"),h()}t.configRewriter=t.configRewriter||{};var o=t.configRewriter;o.vars={};var a=[],s=i||{};return E(s,r),Object.keys(s).forEach(function(t){t=s[t];t.enabled&&(t=e.shallowExpandObject(e.j,t).then(function(t){delete t.enabled,Object.assign(o.vars,t)}),a.push(t))}),Promise.all(a).then(function(){return Object.keys(o.vars).length?void(i&&delete o.varGroups):delete t.configRewriter})}(n,t).then(function(){var e={method:"POST",body:t};return n.j.hasAttribute("data-credentials")&&(e.credentials=n.j.getAttribute("data-credentials")),at(n.j).expandUrlAsync(i).then(function(t){return U(n.o,"xhr").fetchJson(t,e)}).then(function(t){return t.json()}).then(function(t){n.h=_e(n,t),L().fine(r,"Configuration re-written",i)},function(t){D().error(r,"Error rewriting configuration: ",i,t)})})}(this,e,t)},ui.Fc=function(){var t,e,n;this.h.warningMessage&&(t=this.C(),e=this.j.getAttribute("type"),n=this.j.getAttribute("config"),D().warn(t,"Warning from analytics vendor%s%s: %s",e?" "+e:"",n?" with remote config url "+n:"",String(this.h.warningMessage)),delete this.h.warningMessage)},ui.C=function(){return"AmpAnalytics "+(this.j.getAttribute("id")||"<unknown id>")},ui.shallowExpandObject=function(t,e){var i={},r=[],n=[],o=at(t),a=Te(t).getMacros(t);return Object.keys(e).forEach(function(t){r.push(t);t=o.expandStringAsync(e[t],a);n.push(t)}),Promise.all(n).then(function(n){return r.forEach(function(t,e){return i[t]=n[e]}),i})},(ui=Me.prototype).add=function(t){var e=this;return this.O||(this.O=[]),this.O.push(t),function(){e.remove(t)}},ui.remove=function(t){var e;!this.O||-1!=(t=(e=this.O).indexOf(t))&&e.splice(t,1)},ui.removeAll=function(){this.O&&(this.O.length=0)},ui.fire=function(t){if(this.O)for(var e=l(this.O),n=e.next();!n.done;n=e.next())(n=n.value)(t)},ui.getHandlerCount=function(){var t;return null!=(t=null==(t=this.O)?void 0:t.length)?t:0};var Oe={ENDED:"video-ended",PAUSE:"video-pause",PLAY:"video-play",SESSION:"video-session",SESSION_VISIBLE:"video-session-visible",SECONDS_PLAYED:"video-seconds-played",CUSTOM:"video-hosted-custom",PERCENTAGE_PLAYED:"video-percentage-played",AD_START:"video-ad-start",AD_END:"video-ad-end"},Ce=/^vars(.+)/;function Ne(){}var u=["ampdoc","embed"],I={},xe=Object.freeze((I.click={name:"click",allowedFor:u.concat(["timer"]),klass:function(t){return new qe(t)}},I.custom={name:"custom",allowedFor:u.concat(["timer"]),klass:function(t){return new Ue(t)}},I.hidden={name:"visible",allowedFor:u.concat(["timer"]),klass:function(t){return new Xe(t)}},I["ini-load"]={name:"ini-load",allowedFor:u.concat(["timer","visible"]),klass:function(t){return new ze(t)}},I["render-start"]={name:"render-start",allowedFor:u.concat(["timer","visible"]),klass:function(t){return new We(t)}},I.scroll={name:"scroll",allowedFor:u.concat(["timer"]),klass:function(t){return new Fe(t)}},I.story={name:"story",allowedFor:u,klass:function(t){return new Ve(t)}},I.timer={name:"timer",allowedFor:u,klass:function(t){return new Ye(t)}},I.video={name:"video",allowedFor:u.concat(["timer"]),klass:function(t){return new Je(t)}},I.visible={name:"visible",allowedFor:u.concat(["timer"]),klass:function(t){return new Xe(t)}},I));function ke(t){return t.startsWith("video")?"video":t.startsWith("story")?"story":"click"===t||"custom"===t||"hidden"===t||"ini-load"===t||"render-start"===t||"scroll"===t||"story"===t||"timer"===t||"video"===t||"visible"===t?y(xe,t)?xe[t].name:t:"custom"}function De(e){var n={};return Object.keys(xe).forEach(function(t){y(xe,t)&&-1!=xe[t].allowedFor.indexOf(e)&&(n[t]=xe[t].klass)}),n}function Le(t,e,n,i){n=n=void 0===n?{}:n,i=i=void 0===i||i;this.target=t,this.type=e,i?E(t=it(t,Ce),n,0):t=n,this.vars=t}function je(t){this.root=t}function Ue(t){this.root=t;var e=this;this.P={},this.G={},this.ia={},setTimeout(function(){e.G=void 0},1e4)}function Ve(t){Ue.call(this,t)}function He(t,e,n,i){var r=t.type;t=t.vars;var o=n.storySpec||{},a=void 0===o.repeat||o.repeat,o=t.eventDetails;(n=n.tagName)&&o.tagName&&n.toLowerCase()!==o.tagName||!1===a&&o.repeated||i(new Le(e,r,t))}function qe(t){this.root=t,this.Na=new Me,this.Tb=this.Na.fire.bind(this.Na),this.root.getRoot().addEventListener("click",this.Tb)}function Fe(t){this.H=this.root=t,this.wa=null}function Be(t){var e={};if(!t||!Array.isArray(t))return e;for(var n=0;n<t.length;n++){var i=t[n];if("number"!=typeof i||!isFinite(i)){D().error("amp-analytics/events","Scroll trigger boundaries must be finite.");break}e[i=Math.min(5*Math.round(i/5),100)]=!1}return e}function Ge(t,e,n,i,r){if(n)for(var o in e){var a;y(e,o)&&(n<(a=parseInt(o,10))||e[a]||(e[a]=!0,(a={})[i]=o,r(new Le(t.H.getRootElement(),"scroll",a,!1))))}}function We(t){this.root=t}function ze(t){this.root=t}function $e(t,e,n){this.Ya=void 0,j("interval"in t,"Timer interval specification required"),this.hc=Number(t.interval)||0,j(.5<=this.hc,"Bad timer interval specification"),this.kc="maxTimerLength"in t?Number(t.maxTimerLength):7200,j(0<this.kc,"Bad maxTimerLength specification"),this.Vc="maxTimerLength"in t,this.Dc=!("immediate"in t)||!!t.immediate,this.ja=this.$=this.yb=null,this.Ga=e||null,this.ib=n||null,this.Za=this.X=void 0}function Ye(t){this.root=t,this.F={},this.kd=1}function Ke(t,e){e=ke(e=D().assertString(e.on));return t.root.getTrackerForAllowlist(e,De("timer"))}function Je(t){this.root=t;var e=this;this.hb=new Me,this.tb=this.hb.fire.bind(this.hb),Object.keys(Oe).forEach(function(t){e.root.getRoot().addEventListener(Oe[t],e.tb)})}function Xe(t){this.root=t,this.wc={}}je.prototype.dispose=function(){},je.prototype.add=function(){},c(Ue,je),Ue.prototype.dispose=function(){for(var t in this.ia=this.G=void 0,this.P)this.P[t].removeAll()},Ue.prototype.add=function(t,i,e,r){var o,a=this,n=(n=e.selector)||":root",s=this.root.getElement(t,n,e.selectionMethod||null),c=i.startsWith("sandbox-"),u=c?this.ia&&this.ia[i]:this.G&&this.G[i];return u&&(o=u.length,s.then(function(n){setTimeout(function(){for(var t=0;t<o;t++){var e=u[t];n.contains(e.target)&&r(e)}c&&(a.ia[i]=void 0)},1)})),(e=this.P[i])||(e=new Me,this.P[i]=e),this.P[i].add(function(e){s.then(function(t){t.contains(e.target)&&r(e)})})},Ue.prototype.trigger=function(t){var e=t.type,n=e.startsWith("sandbox-"),i=this.P[e];i&&(i.fire(t),n)||(n?(this.ia[e]=this.ia[e]||[],this.ia[e].push(t)):this.G&&(this.G[e]=this.G[e]||[],this.G[e].push(t)))},c(Ve,Ue),Ve.prototype.add=function(t,e,n,i){var r=this.root.getRootElement();if(t=this.G&&this.G[e])for(var o=t.length,a=0;a<o;a++)He(t[a],r,n,i);return(t=this.P[e])||(t=new Me,this.P[e]=t),this.P[e].add(function(t){He(t,r,n,i)})},Ve.prototype.trigger=function(t){var e=t.type,n=this.P[e];n&&n.fire(t),this.G&&(this.G[e]=this.G[e]||[],this.G[e].push(t))},c(qe,je),qe.prototype.dispose=function(){this.root.getRoot().removeEventListener("click",this.Tb),this.Na.removeAll()},qe.prototype.add=function(t,e,n,i){return e=j(n.selector,"Missing required selector on click trigger"),n=n.selectionMethod||null,this.Na.add(this.root.createSelectiveListener(this.Nc.bind(this,i),t.parentElement||t,e,n))},qe.prototype.Nc=function(t,e){t(new Le(e,"click"))},c(Fe,je),Fe.prototype.dispose=function(){null!==this.wa&&(this.H.getScrollManager().removeScrollHandler(this.wa),this.wa=null)},Fe.prototype.add=function(t,e,n,i){if(!n.scrollSpec)return D().error("amp-analytics/events","Missing scrollSpec on scroll trigger."),Ne;if(!Array.isArray(n.scrollSpec.verticalBoundaries)&&!Array.isArray(n.scrollSpec.horizontalBoundaries))return D().error("amp-analytics/events","Boundaries are required for the scroll trigger to work."),Ne;var r=Be(n.scrollSpec.verticalBoundaries),o=Be(n.scrollSpec.horizontalBoundaries);return this.wa=this.fd.bind(this,o,r,!!n.scrollSpec.useInitialPageSize,i),this.H.getScrollManager().addScrollHandler(this.wa)},Fe.prototype.fd=function(t,e,n,i,r){var o=(n=n?r.initialSize:r).scrollWidth;Ge(this,e,100*(r.top+r.height)/n.scrollHeight,"verticalScrollBoundary",i),Ge(this,t,100*(r.left+r.width)/o,"horizontalScrollBoundary",i)},c(We,je),We.prototype.dispose=function(){},We.prototype.add=function(t,e,n,i){var r,o=this,a=n.selector||":root",n=":root"==a||":host"==a?(r=this.root.getRootElement(),this.getRootSignal(e)):this.root.getAmpElement(t.parentElement||t,a,n.selectionMethod).then(function(t){return r=t,o.getElementSignal(e,r)});return n.then(function(){i(new Le(r,e))}),Ne},We.prototype.getRootSignal=function(t){return this.root.signals().whenSignal(t)},We.prototype.getElementSignal=function(t,e){return"function"!=typeof e.signals?h():e.signals().whenSignal(t)},c(ze,je),ze.prototype.dispose=function(){},ze.prototype.add=function(t,e,n,i){var r,o=this,a=n.selector||":root";return(t=":root"==a||":host"==a?(r=this.root.getRootElement(),this.getRootSignal()):this.root.getAmpElement(t.parentElement||t,a,n.selectionMethod).then(function(t){return r=t,o.getElementSignal("ini-load",r)})).then(function(){i(new Le(r,e))}),Ne},ze.prototype.getRootSignal=function(){return this.root.whenIniLoaded()},ze.prototype.getElementSignal=function(t,e){if("function"!=typeof e.signals)return h();e=e.signals();return Promise.race([e.whenSignal("ini-load"),e.whenSignal("load-end")])},(ui=$e.prototype).init=function(t){this.Ga?this.Ga&&(this.$=this.Ga()):t()},ui.dispose=function(){this.ja&&(this.ja(),this.ja=null),this.$&&(this.$(),this.$=null)},ui.isRunning=function(){return!!this.Ya},ui.startIntervalInWindow=function(t,e,n){if(!this.isRunning()&&(this.X=Date.now(),this.Za=void 0,this.yb=e,this.Ya=t.setInterval(function(){e()},1e3*this.hc),(!this.ib||this.ib&&this.Vc)&&t.setTimeout(function(){n()},1e3*this.kc),this.$&&(this.$(),this.$=null),this.Dc&&e(),this.ib))try{this.ja=this.ib()}catch(t){throw this.dispose(),t}},ui.jb=function(t){this.isRunning()&&(this.yb(),this.yb=null,t.clearInterval(this.Ya),this.Za=this.Ya=void 0,this.ja&&(this.ja(),this.ja=null),this.Ga&&(this.$=this.Ga()))},ui.getTimerVars=function(){var t=0;return this.isRunning()&&(t=this.X?Date.now()-(this.Za||this.X):0,this.Za=Date.now()),b({timerDuration:t,timerStart:this.X||0})},c(Ye,je),(ui=Ye.prototype).getTrackedTimerKeys=function(){return Object.keys(this.F)},ui.dispose=function(){var e=this;this.getTrackedTimerKeys().forEach(function(t){e.Fb(t)})},ui.add=function(t,e,n,i){var r=this;j((n=n.timerSpec)&&"object"==typeof n,"Bad timer specification");var o="startSpec"in n?n.startSpec:null;j(!o||"object"==typeof o,"Bad timer start specification");var a="stopSpec"in n?n.stopSpec:null;j(!o&&!a||"object"==typeof a,"Bad timer stop specification");var s,c=++this.kd;o&&(j(s=Ke(this,o),"Cannot track timer start"),s=s.add.bind(s,t,o.on,o,this.ac.bind(this,c,e,i))),a&&(j(u=Ke(this,a),"Cannot track timer stop"),u=u.add.bind(u,t,a.on,a,this.ac.bind(this,c,e,i)));var u=new $e(n,s,u);return(this.F[c]=u).init(this.tc.bind(this,c,e,i)),function(){r.Fb(c)}},ui.ac=function(t,e,n){var i=this.F[t];i&&(i.isRunning()?this.jb(t):this.tc(t,e,n))},ui.tc=function(e,n,i){var r=this;this.F[e].startIntervalInWindow(this.root.ampdoc.win,function(){var t=new Le(r.root.getRootElement(),n,r.F[e].getTimerVars(),!1);i(t)},this.Fb.bind(this,e))},ui.jb=function(t){this.F[t].jb(this.root.ampdoc.win)},ui.Fb=function(t){this.F[t]&&(this.jb(t),this.F[t].dispose(),delete this.F[t])},c(Je,je),Je.prototype.dispose=function(){var e=this,n=this.root.getRoot();Object.keys(Oe).forEach(function(t){n.removeEventListener(Oe[t],e.tb)}),this.hb=this.tb=null},Je.prototype.add=function(t,e,n,c){var i=n.videoSpec||{},u=this.root.getElement(t,n.selector||i.selector,n.selectionMethod||null),l=i["end-session-when-invisible"],h=i["exclude-autoplay"],f=i.interval,p=i.percentages,d=n.on,m=0,g=0;return this.hb.add(function(t){var n,e=t.type,i=t.data,r="video-session-visible"==e?"video-session":"video-hosted-custom"==e?i["__amp:eventType"]:e;if(r===d)if("video-seconds-played"!==r||f){if("video-seconds-played"!==r||0==++m%f){if("video-percentage-played"===r){if(!p)return void D().error("amp-analytics/events","video-percentage-played requires percentages spec.");for(var o=0;o<p.length;o++){var a=p[o];if(a<=0||0!=a%5)return void D().error("amp-analytics/events","Percentages must be set in increments of %s with non-zero values",5)}var s=parseInt(i.normalizedPercentage,10);if(A(s),g==s&&1<p.length||p.indexOf(s)<0)return;g=s}"video-session-visible"===e&&!l||h&&"playing_auto"===i.state||(n=t.target,u.then(function(t){var e;t.contains(n)&&(i?delete(e=Object.assign({},i))["__amp:eventType"]:e={},c(new Le(t,r,e)))}))}}else D().error("amp-analytics/events","video-seconds-played requires interval spec with non-zero value")})},c(Xe,je),(ui=Xe.prototype).dispose=function(){},ui.add=function(t,i,e,r){var o=this,a=e.visibilitySpec||{},n=e.selector||a.selector,s=a.waitFor,c=a.reportWhen,u=null;c&&j(!a.repeat,"reportWhen and repeat are mutually exclusive."),"hidden"===i&&(c&&D().error("amp-analytics/events",'ReportWhen should not be defined when eventType is "hidden"'),c="documentHidden");var l=this.root.getVisibilityManager();if("documentHidden"==c?u=this.Hc.bind(this):"documentExit"==c?u=this.Gc.bind(this):j(!c,'reportWhen value "%s" not supported.',c),!n||":root"==n||":host"==n)return l.listenRoot(a,this.getReadyPromise(s||(n?"ini-load":"none")),u,this.lc.bind(this,i,r,this.root.getRootElement()));e=e.selectionMethod||a.selectionMethod,function(t){if(p(t))for(var e={},n=0;n<t.length;n++)j(!e[t[n]],"Cannot have duplicate selectors in selectors list: %s",t),e[t[n]]=t[n]}(n);var h=this.root.getElements(t.parentElement||t,n,e).then(function(t){for(var e=[],n=0;n<t.length;n++)e.push(l.listenElement(t[n],a,o.getReadyPromise(s,t[n]),u,o.lc.bind(o,i,r,t[n])));return e});return function(){h.then(function(t){for(var e=0;e<t.length;e++)t[e]()})}},ui.Hc=function(){var e=this.root.ampdoc;return e.isVisible()?new Promise(function(t){e.onVisibilityChanged(function(){e.isVisible()||t()})}):h()},ui.Gc=function(){var t,e,n=new f,i=this.root.ampdoc.win;return"onpagehide"in this.root.ampdoc.win||i.addEventListener("unload",t=function(){i.removeEventListener("unload",t),n.resolve()}),i.addEventListener("pagehide",e=function(){i.removeEventListener("pagehide",e),n.resolve()}),n.promise},ui.getReadyPromise=function(t,e){if(e&&((n=e.tagName).startsWith("AMP-")&&"AMP-STICKY-AD-TOP-PADDING"!=n&&"AMP-BODY"!=n?t=t||"ini-load":j(!t||"none"==t,"waitFor for non-AMP elements must be none or null. Found %s",t)),!t||"none"==t)return null;var n=De("visible");j(void 0!==n[t],"waitFor value %s not supported",t);n=this.wc[t]||this.root.getTrackerForAllowlist(t,n);return n?(this.wc[t]=n,e?n.getElementSignal(t,e):n.getRootSignal(t)):null};var Ze=!(ui.lc=function(t,e,n,i){var r,o=it(n,Ce);for(r in o)i[r]=o[r];e(new Le(n,t,i,!1))});function Qe(){this.ha=[]}Qe.prototype.peek=function(){var t=this.length;return t?this.ha[t-1].item:null},Qe.prototype.enqueue=function(t,e){if(isNaN(e))throw Error("Priority must not be NaN.");for(var n=-1,i=0,r=this.length;i<=r&&(n=Math.floor((i+r)/2))!==this.length;)if(this.ha[n].priority<e)i=n+1;else{if(!(0<n&&this.ha[n-1].priority>=e))break;r=n-1}this.ha.splice(n,0,{item:t,priority:e})},Qe.prototype.forEach=function(t){for(var e=this.length;e--;)t(this.ha[e].item)},Qe.prototype.dequeue=function(){return this.length?this.ha.pop().item:null},i.Object.defineProperties(Qe.prototype,{length:{configurable:!0,enumerable:!0,get:function(){return this.ha.length}}});var tn=/nochunking=1/.test(self.location.hash),en=h();function nn(t,e,n){var i,r;tn?en.then(e):(i=an,$(W(r=G(t)),r,"chunk",i),V(t,"chunk").run(e,n))}function rn(t){this.state="not_run",this.wb=t}function on(t,e,n){rn.call(this,t),this.Ub=n}function an(t){var e=this;this.ampdoc=t,this.o=t.win,this.ua=new Qe,this.Rb=this.Yb.bind(this),this.oa=0,this.jd=!(!this.o.navigator.scheduling||!this.o.navigator.scheduling.isInputPending),this.gb=!1,this.yc=this.o.document.documentElement.hasAttribute("i-amphtml-no-boilerplate"),this.o.addEventListener("message",function(t){"amp-macro-task"==t.data&&e.Yb(null)}),this.Wb=!1,Y(W(t),"viewer").then(function(){e.Wb=!0}),t.onVisibilityChanged(function(){t.isVisible()&&cn(e)})}function sn(t,e){for(var n=t.ua.peek();n&&"not_run"!==n.state;)t.ua.dequeue(),n=t.ua.peek();return n&&e&&t.ua.dequeue(),n}function cn(t){var e,i,r,o,n;t.gb||(e=sn(t))&&(e.cc()?(t.gb=!0,(n=t).yc&&(n.jd?n.o.navigator.scheduling.isInputPending():5<n.oa)?(n.oa=0,un(n)):en.then(function(){n.Rb(null)})):e.vc()&&t.o.requestIdleCallback?(i=t.o,r=t.Rb,o=Date.now(),i.requestIdleCallback(function t(e){var n;e.timeRemaining()<15?(n=2e3-(Date.now()-o))<=0||e.didTimeout?(L().fine("CHUNK","Timed out",2e3,e.didTimeout),r(e)):(L().fine("CHUNK","Rescheduling with",n,e.timeRemaining()),i.requestIdleCallback(t,{timeout:n})):(L().fine("CHUNK","Running idle callback with ",15),r(e))},{timeout:2e3})):un(t))}function un(t){t.o.postMessage("amp-macro-task","*")}rn.prototype.C=function(){return this.wb.displayName||this.wb.name},rn.prototype.mc=function(){},rn.prototype.cc=function(){return!1},rn.prototype.vc=function(){return!1},c(on,rn),on.prototype.mc=function(){var t=self.document;if(!Ze){Ze=!0;var e,t=t.body,n={opacity:1,visibility:"visible",animation:"none"};for(e in n){var i=t,r=n[e],o=i.style,a=e;if(a.startsWith("--"))o=a;else{var s=($t=$t||Object.create(null))[a];if(!s){if(void 0===o[s=a]){var c=(c=a).charAt(0).toUpperCase()+c.slice(1);t:{for(var u=0;u<Yt.length;u++){var l=Yt[u]+c;if(void 0!==o[l]){c=l;break t}}c=""}void 0!==o[c]&&(s=c)}$t[a]=s}o=s}o&&(o.startsWith("--")?i.style.setProperty(o,r):i.style[o]=r)}}},on.prototype.cc=function(){return this.Ub.ampdoc.isVisible()},on.prototype.vc=function(){return this.Ub.Wb},an.prototype.run=function(t,e){t=new rn(t),this.ua.enqueue(t,e),cn(this)},an.prototype.runForStartup=function(t){t=new on(t,this.o,this),this.ua.enqueue(t,Number.POSITIVE_INFINITY),cn(this)},an.prototype.Yb=function(t){var e=this,n=sn(this,!0);if(!n)return this.gb=!1,this.oa=0,!1;try{var i=Date.now();!function(e,t){if("run"!=e.state){e.state="run";try{e.wb(t)}catch(t){throw e.mc(),t}}}(n,t)}finally{en.then().then().then().then().then().then().then().then().then(function(){e.gb=!1,e.oa+=Date.now()-i,L().fine("CHUNK",n.C(),"Chunk duration",Date.now()-i,e.oa),cn(e)})}return!0};var ln={referrerDomains:!0,enabled:!0,cookiePath:!0,cookieMaxAge:!0,cookieSecure:!0,cookieDomain:!0,sameSite:!0,SameSite:!0,secure:!0};function hn(t,e,n){this.o=t,this.j=e,this.kb=at(e),this.mb=null,this.h=n,this.xc=Te(e).getMacros(e)}function fn(t){this.T=ct(t.ampdoc),this.Wc=V(t.ampdoc,"mutator"),this.ma=null,this.ta=new Me,this.H=t.getRootElement(),this.Xa=null}function pn(t){var e=t.Wc.measureElement(function(){return t.T.getLayoutRect(t.H)});return t.Xa=t.Xa||e,e}function dn(t,e,n,i){return{left:t,top:e,width:n,height:i,bottom:e+i,right:t+n,x:t,y:e}}function mn(t,e,n){return n={top:n,bottom:n+e.getHeight(),left:0,right:e.getWidth()},n=dn(Number(n.left),Number(n.top),Number(n.width),Number(n.height)),t.top<=n.bottom&&n.top<=t.bottom&&t.left<=n.right&&n.left<=t.right?"inside":t.top<n.top?"top":t.bottom>n.bottom?"bottom":"inside"}function gn(t,e){var n=this;this.Cc=e,this.N=b({visiblePercentageMin:Number(t.visiblePercentageMin)/100||0,visiblePercentageMax:Number(t.visiblePercentageMax)/100||1,totalTimeMin:Number(t.totalTimeMin)||0,totalTimeMax:Number(t.totalTimeMax)||1/0,continuousTimeMin:Number(t.continuousTimeMin)||0,continuousTimeMax:Number(t.continuousTimeMax)||1/0}),"0"===String(t.visiblePercentageMax).trim()&&(this.N.visiblePercentageMax=0),this.Sc=void 0!==t.reportWhen,this.pc=!0===t.repeat,this.ga=new Me;t=new f;this.Pa=t.promise,this.pa=t.resolve,this.Pa.then(function(){n.ga.fire()}),this.ka=[],this.Ic=Date.now(),this.Gb=this.nc=!0,this.L=this.Oa=null,this.vb=this.qa=!1,this.ec=this.ya=this.ab=this.Ba=this.Db=this.$a=this.Sa=this.Bb=this.Ra=this.S=this.W=this.U=0,this.Nb=this.dc=!1,this.fb=null}function vn(t,e){return 1==t.N.visiblePercentageMin?1==e:0==t.N.visiblePercentageMax?0==e:e>t.N.visiblePercentageMin&&e<=t.N.visiblePercentageMax}function bn(t,e){return e<=t?t-e:0}function yn(t){var e=t.parentElement,n=[];if(e){var i=e;n.push(i);for(var r=0;r<50;r++)if((e=i.parentNode||i.parentElement)&&1==e.nodeType)i=e,n.push(i);else{if(!e||9!=e.nodeType)break;if(!(e=i.ownerDocument.defaultView.frameElement)||1!=e.nodeType)break;i=e,n.push(i)}}n.push(t);var o=1;for(t=0;t<n.length;t++){var a=(e=n[t])?(i=(e=window.getComputedStyle(e)||Kt).opacity,"hidden"===e.visibility?0:(e=""===i?1:parseFloat(i),isNaN(e)?1:e)):1;if(0===(o=a<o?a:o))break}return o}hn.prototype.write=function(){var t=this;return this.mb||(this.mb=new f,nn(this.j,function(){t.mb.resolve(function(t){if(!ie(t.o,t.j)||!y(t.h,"cookies"))return h();if(!v(t.h.cookies))return D().error("amp-analytics/cookie-writer","cookies config must be an object"),h();var e,n=t.h.cookies;if(!1===n.enabled)return h();y(n,"cookieMaxAge")?(e=Number(n.cookieMaxAge))||0===e?(e<=0&&D().warn("amp-analytics/cookie-writer","cookieMaxAge %s less than or equal to 0, cookie will immediately expire",n.cookieMaxAge),e*=1e3):(D().error("amp-analytics/cookie-writer","invalid cookieMaxAge %s, falling back to default value (1 year)",n.cookieMaxAge),e=31536e6):e=31536e6;var i=e;e=Object.keys(n);for(var r=[],o=0;o<e.length;o++){var a=e[o],s=n[a];t:{switch(s.sameSite||s.SameSite||n.sameSite||n.SameSite){case"Strict":var c="Strict";break t;case"Lax":c="Lax";break t;case"None":c="None";break t}c=void 0}var u=s;(u=!ln[a]&&(v(u)?!!y(u,"value")||(D().error("amp-analytics/cookie-writer","value is required in the cookieValue object"),!1):(D().error("amp-analytics/cookie-writer","cookieValue must be configured in an object"),!1)))&&r.push(function(a,s,t,c,u){return a.kb.expandStringAsync(t,a.xc).then(function(t){var e,n,i,r,o;t&&(e=Date.now()+c,n=a.o,(o=void 0===(o={highestAvailableDomain:!0,sameSite:u,secure:"None"===u})?{}:o).allowOnProxyOrigin?j(!o.highestAvailableDomain,"Could not support highestAvailable Domain on proxy origin, specify domain explicitly"):(j(!Lt(n.location.href),"Should never attempt to set cookie on proxy origin: "+s),j(!((i=Nt(n.location.href).hostname.toLowerCase())==(r=Nt(C.cdn).hostname.toLowerCase())||d(i,"."+r)),"Should never attempt to set cookie on proxy origin. (in depth check): "+s)),i=void 0,o.domain?i=o.domain:o.highestAvailableDomain&&(i=Gt(n)),Wt(n,s,t,e,i,o.sameSite,o.secure))}).catch(function(t){D().error("amp-analytics/cookie-writer","Error expanding cookie string",t)})}(t,a,s.value,i,c))}return Promise.all(r)}(t))},10)),this.mb.promise},fn.prototype.dispose=function(){this.ta.removeAll(),this.ma&&(this.ma(),this.ma=null)},fn.prototype.removeScrollHandler=function(t){this.ta.remove(t),this.ta.getHandlerCount()<=0&&this.ma&&(this.ma(),this.ma=null)},fn.prototype.addScrollHandler=function(r){var o=this,a=this.T.getSize();return(this.Xa||pn(this)).then(function(t){var e=t.height,n=t.left,i=t.top,t=t.width,t={top:o.T.getScrollTop()-i,left:o.T.getScrollLeft()-n,width:a.width,height:a.height,scrollHeight:e,scrollWidth:t,initialSize:{scrollHeight:e,scrollWidth:t}};r(t)}),0===this.ta.getHandlerCount()&&(this.ma=this.T.onChanged(this.Zc.bind(this))),this.ta.add(r)},fn.prototype.Zc=function(n){var i=this;return Promise.all([this.Xa||pn(this),pn(this)]).then(function(t){var e=t[0],t=t[1];i.ta.fire({top:n.top-t.top,left:n.left-t.left,width:n.width,height:n.height,scrollWidth:t.width,scrollHeight:t.height,initialSize:{scrollHeight:e.height,scrollWidth:e.width}})})},(ui=gn.prototype).cb=function(){var t=this,e=new f;this.Pa=e.promise,this.pa=e.resolve,this.Pa.then(function(){t.ga.fire()}),this.fb=null,this.qa=this.vb=!1,this.ya=this.ab=this.Ba=this.$a=this.Bb=this.Ra=this.Sa=this.S=this.W=this.U=0,this.Nb=!1},ui.maybeDispose=function(){this.pc||this.dispose()},ui.dispose=function(){this.L&&(clearTimeout(this.L),this.L=null),this.fb&&(clearTimeout(this.fb),this.fb=null),this.ka.forEach(function(t){t()}),this.ka.length=0,this.pa=null,this.ga&&(this.ga.removeAll(),this.ga=null)},ui.unsubscribe=function(t){this.ka.push(t)},ui.onTriggerEvent=function(t){this.ga&&this.ga.add(t),this.Pa&&!this.pa&&t()},ui.setReady=function(t){this.nc=t,this.update()},ui.setReportReady=function(t){this.Gb=!1,this.Oa=t},ui.update=function(){!function(t,e){{var n;t.Nb?vn(t,e)||t.cb():t.pa&&(function(t,e){var n=Date.now();0<e&&(t.Ra=t.Ra||n,t.Bb=n,!t.Db&&n-t.Ic<300&&(t.Db=e));var i=t.qa,r=t.ya?n-t.ya:0;return t.qa=vn(t,e),t.qa?(t.vb=!0,i?(t.S+=r,t.U+=r,t.W=Math.max(t.W,t.U)):t.Sa=t.Sa||n,t.ya=n,t.Ba=0<t.Ba?Math.min(t.Ba,e):e,t.ab=Math.max(t.ab,e),t.$a=n):i&&(t.W=Math.max(t.W,t.U+r),t.ya=0,t.S+=r,t.U=0,t.$a=n),t.vb&&t.S>=t.N.totalTimeMin&&t.S<=t.N.totalTimeMax&&t.W>=t.N.continuousTimeMin&&t.W<=t.N.continuousTimeMax}(t,e)||t.Sc?(t.L&&(clearTimeout(t.L),t.L=null),t.Gb?(t.pa(),t.pa=null,t.pc&&(t.Nb=!0,t.U=0)):t.Oa&&(n=t.Oa(),t.Oa=null,n.then(function(){t.Gb=!0,t.update()}))):t.qa&&!t.L?0<(n=function(t){var e=Math.max(t.N.continuousTimeMin-t.U,0),t=Math.max(t.N.totalTimeMin-t.S,0);return Math.min(Math.max(e,t),e||1/0,t||1/0)}(t))&&(t.L=setTimeout(function(){t.L=null,t.update()},n)):!t.qa&&t.L&&(clearTimeout(t.L),t.L=null))}}(this,this.nc?this.Cc():0)},ui.getState=function(t){return b({firstSeenTime:bn(this.Ra,t),lastSeenTime:bn(this.Bb,t),lastVisibleTime:bn(this.$a,t),firstVisibleTime:bn(this.Sa,t),maxContinuousVisibleTime:this.W,totalVisibleTime:this.S,loadTimeVisibility:100*this.Db||0,minVisiblePercentage:100*this.Ba,maxVisiblePercentage:100*this.ab})},ui.maybeSetInitialScrollDepth=function(t){this.dc||(this.ec=t,this.dc=!0)},ui.getInitialScrollDepth=function(){return this.ec};var En=[0,.05,.1,.15,.2,.25,.3,.35,.4,.45,.5,.55,.6,.65,.7,.75,.8,.85,.9,.95,1],An=1;function wn(t){var e=t.__AMP_VIS_ID;return e||(e=++An,t.__AMP_VIS_ID=e),e}function Tn(t,e){var n=this;this.parent=t,this.ampdoc=e,this.Ib=0,this.fa=[],this.J=null,this.ka=[],this.Eb=0,this.parent&&(t=this.parent,e=this,t.J||(t.J=[]),t.J.push(e));var i=ct(this.ampdoc);i.onChanged(function(){n.maybeUpdateMaxScrollDepth(i.getScrollTop())})}function Sn(t){for(var e=0;e<t.fa.length;e++)t.fa[e].update()}function Rn(t,e,n,i,r,o,a){if(n.visiblePercentageThresholds&&null==n.visiblePercentageMin&&null==n.visiblePercentageMax){var s=[],c=n.visiblePercentageThresholds;if(!c||!p(c))return D().error("amp-analytics/visibility-manager","invalid visiblePercentageThresholds"),function(){};for(var u=0;u<c.length;u++){var l,h,f=c[u];p(f)&&2==f.length?A(f[0])&&A(f[1])?(l=Number(f[0]),h=Number(f[1]),l<0||100<h||h<l||l==h&&100!=l&&0!=h?D().error("amp-analytics/visibility-manager","visiblePercentageThresholds entry invalid min/max value"):((f=n).visiblePercentageMin=l,f.visiblePercentageMax=h,f=new gn(f,e,ct(t.ampdoc)),s.push(_n(t,f,i,r,o,a)))):D().error("amp-analytics/visibility-manager","visiblePercentageThresholds entry is not valid number"):D().error("amp-analytics/visibility-manager","visiblePercentageThresholds entry length is not 2")}return function(){s.forEach(function(t){return t()})}}return _n(t,new gn(n,e,ct(t.ampdoc)),i,r,o,a)}function _n(r,o,t,e,a,s){e&&o.setReportReady(e);var c=ct(r.ampdoc),n=c.getScrollTop();return r.maybeUpdateMaxScrollDepth(n),t?(o.setReady(!1),t.then(function(){o.setReady(!0),o.maybeSetInitialScrollDepth(n)})):o.maybeSetInitialScrollDepth(n),o.onTriggerEvent(function(){var t,e,n=r.getStartTime(),i=o.getState(n);i.backgrounded=r.isBackgrounded()?1:0,i.backgroundedAtStart=r.isBackgroundedAtStart()?1:0,i.totalTime=Date.now()-n,s?(i.elementId=s.id,i.opacity=yn(s),n=c.getLayoutRect(s),t=r.getElementVisibility(s),e=r.getElementIntersectionRect(s),Object.assign(i,b({intersectionRatio:t,intersectionRect:JSON.stringify(e)}))):(i.opacity=r.getRootMinOpacity(),i.intersectionRatio=r.getRootVisibility(),n=r.getRootLayoutBox()),o.maybeDispose(),n&&(Object.assign(i,b({elementX:n.left,elementY:n.top,elementWidth:n.width,elementHeight:n.height})),i.initialScrollDepth=mn(n,c,o.getInitialScrollDepth()),i.maxScrollDepth=mn(n,c,r.getMaxScrollDepth())),a(i)}),r.fa.push(o),o.unsubscribe(function(){var t=r.fa.indexOf(o);-1!=t&&r.fa.splice(t,1)}),s&&o.unsubscribe(r.observe(s,function(){return o.update()})),o.update(),function(){o.dispose()}}function Pn(t){Tn.call(this,null,t);var e,n,i=this;this.T=ct(t),this.Qb=!t.isVisible(),this.qb=this.isBackgrounded(),this.Y=Object.create(null),this.ca=null,"inabox"==P(this.ampdoc.win).runtime?(e=(t=this.ampdoc.getRootNode()).documentElement||t.body||t,this.unsubscribe(this.observe(e,this.setRootVisibility.bind(this))),this.ampdoc.win.addEventListener("resize",n=function(){var t=wn(e),t=i.Y[t];t&&(t.isVisible=!(i.ampdoc.win.innerHeight<1||i.ampdoc.win.innerWidth<1),i.setRootVisibility(t.isVisible?t.intersectionRatio:0))}),this.unsubscribe(function(){i.ampdoc.win.removeEventListener("resize",n)})):(this.setRootVisibility(this.ampdoc.isVisible()?1:0),this.unsubscribe(this.ampdoc.onVisibilityChanged(function(){var t=i.ampdoc.isVisible();t||(i.Qb=!0),i.setRootVisibility(t?1:0)})))}function In(t,e){Tn.call(this,t,t.ampdoc),this.embed=e,this.qb=this.parent.isBackgrounded(),this.unsubscribe(this.parent.observe(e.host,this.setRootVisibility.bind(this)))}(ui=Tn.prototype).dispose=function(){this.setRootVisibility(0);for(var t,e,n=this.fa.length-1;0<=n;n--)this.fa[n].dispose();if(this.ka.forEach(function(t){t()}),this.ka.length=0,this.parent&&(t=this.parent,e=this,!t.J||-1!=(e=t.J.indexOf(e))&&t.J.splice(e,1)),this.J)for(n=0;n<this.J.length;n++)this.J[n].dispose()},ui.unsubscribe=function(t){this.ka.push(t)},ui.getStartTime=function(){},ui.isBackgrounded=function(){},ui.isBackgroundedAtStart=function(){},ui.getRootMinOpacity=function(){},ui.getRootLayoutBox=function(){},ui.getRootVisibility=function(){return!this.parent||0<this.parent.getRootVisibility()?this.Ib:0},ui.setRootVisibility=function(t){if(this.Ib=t,Sn(this),this.J)for(t=0;t<this.J.length;t++)Sn(this.J[t])},ui.maybeUpdateMaxScrollDepth=function(t){t>this.Eb&&(this.Eb=t)},ui.getMaxScrollDepth=function(){return this.Eb},ui.listenRoot=function(t,e,n,i){var r=this.getRootVisibility.bind(this);return Rn(this,r,t,e,n,i)},ui.listenElement=function(t,e,n,i,r){var o=this.getElementVisibility.bind(this,t);return Rn(this,o,e,n,i,r,t)},ui.observe=function(){},ui.getElementVisibility=function(){},ui.getElementIntersectionRect=function(){},c(Pn,Tn),(ui=Pn.prototype).dispose=function(){Tn.prototype.dispose.call(this),this.ca&&(this.ca.disconnect(),this.ca=null)},ui.getStartTime=function(){return this.ampdoc.getFirstVisibleTime()},ui.isBackgrounded=function(){return this.Qb},ui.isBackgroundedAtStart=function(){return this.qb},ui.getRootMinOpacity=function(){var t=this.ampdoc.getRootNode();return yn(t.documentElement||t.body||t)},ui.getRootLayoutBox=function(){var t=this.ampdoc.getRootNode();return this.T.getLayoutRect(t.documentElement||t.body||t)},ui.observe=function(n,i){var r=this,o=wn(n),t=this.Y[o];return t?0<t.intersectionRatio&&t.isVisible&&i(t.intersectionRatio):this.Y[o]=t={element:n,intersectionRatio:0,intersectionRect:null,isVisible:!1,boundingClientRect:null,listeners:[]},t.listeners.push(i),this.ca||(this.ca=new this.ampdoc.win.IntersectionObserver(this.Yc.bind(this),{threshold:En})),this.ca.observe(n),function(){var t,e=r.Y[o];e&&(-1!=(t=e.listeners.indexOf(i))&&e.listeners.splice(t,1),0==e.listeners.length&&(r.ca.unobserve(n),delete r.Y[o]))}},ui.getElementVisibility=function(t){return 0==this.getRootVisibility()?0:(t=wn(t),(t=this.Y[t])&&t.isVisible&&t.intersectionRatio||0)},ui.getElementIntersectionRect=function(t){return this.getElementVisibility(t)<=0?null:(t=wn(t),(t=this.Y[t])?t.intersectionRect:null)},ui.Yc=function(t){var o=this;t.forEach(function(t){var e=t.intersectionRect,e=dn(Number(e.left),Number(e.top),Number(e.width),Number(e.height)),n=(n=t.boundingClientRect)&&dn(Number(n.left),Number(n.top),Number(n.width),Number(n.height)),i=t.intersectionRatio,r=e,e=n,i=Math.min(Math.max(i,0),1);t=wn(t.target),t=o.Y[t];n=!0;if((e.width<1||e.height<1)&&(n=!1),t)for(t.isVisible=n,t.intersectionRatio=i,t.intersectionRect=r,t.boundingClientRect=e,r=0;r<t.listeners.length;r++)t.listeners[r](t.isVisible?i:0)})},c(In,Tn),(ui=In.prototype).getStartTime=function(){return this.embed.getStartTime()},ui.isBackgrounded=function(){return this.parent.isBackgrounded()},ui.isBackgroundedAtStart=function(){return this.qb},ui.getRootMinOpacity=function(){return yn(this.embed.iframe)},ui.getRootLayoutBox=function(){var t=this.embed.iframe;return ct(this.ampdoc).getLayoutRect(t)},ui.observe=function(t,e){return this.parent.observe(t,e)},ui.getElementVisibility=function(t){return 0==this.getRootVisibility()?0:this.parent.getElementVisibility(t)},ui.getElementIntersectionRect=function(t){return 0==this.getRootVisibility()?null:this.parent.getElementIntersectionRect(t)};var Mn=["AMP-AD","AMP-ANALYTICS","AMP-PIXEL","AMP-AD-EXIT"];var On=/^vars(.+)/;function Cn(t){this.ampdoc=t,this.F=Object.create(null),this.Fa=this.Ja=null}function Nn(a,s){return a.ampdoc.whenReady().then(function(){for(var n=[],t=0;t<s.length;t++){var e=void 0,i=[],r=s[t];try{e=a.getRoot().querySelectorAll(r)}catch(t){j(!1,"Invalid query selector "+r)}for(var o=0;o<e.length;o++)a.contains(e[o])&&i.push(e[o]);j((i=function(t,e){for(var n=0,i=[],r=0;r<t.length;r++)Object.keys(it(t[r],On)).length?i.push(t[r]):n++;return n&&D().warn("amp-analytics/analytics-root",'%s element(s) ommited from selector "%s" because no data-vars-* attribute was found.',n,e),i}(i,r)).length,'Element "'+r+'" not found'),n=n.concat(i)}return n.filter(function(t,e){return n.indexOf(t)===e})})}function xn(t){Cn.call(this,t)}function kn(t,e){Cn.call(this,t),this.embed=e}function Dn(t,e){this.H=t,this.Pb=e,this.jc=[],this.Lb=0,this.o=e.ownerDocument.defaultView}function Ln(t){this.ampdoc=t,this.H=jn(this,t.getRootNode())}function jn(t,e){var n,i=G(e),r=(e=B(e))&&e.__AMP_EMBED__;return i==t.ampdoc&&!r&&t.H?t.H:(n=function(){return r?new kn(i,r):new xn(i)},(t=(e=r||i).__AMP_AN_ROOT)||(t=n(),e.__AMP_AN_ROOT=t),t)}function Un(t,e,n,i){this.A=t,this.h=e.linkers,this.ld=e.vars||{},this.M=n,this.j=i,this.eb={},this.la=H(this.j,"url"),this.Lc=Y(W(t),"form-submit-service"),this.Ta=null,this.I=Te(this.A),this.Ua=null}function Vn(t,e){var n,i=t.h;for(n in i)if(t.eb[n]){var r=t,o=n,a=i[n].destinationDomains,s=r.la.parse(e);if(Hn(r,s,o,a)&&("https:"===s.protocol||"http:"===s.protocol)&&(a=ae(r.eb[o]))){(r={})[o]=a;for(var o=r,r=R((r=Nt(e)).search),a={},s=Object.keys(o),c=0;c<s.length;c++)y(r,s[c])||(a[s[c]]=o[s[c]]);e=xt(e,kt(a))}}return e}function Hn(t,e,n,i){var r=e.hostname;if(t.A.win.location.hostname!==r){if(i&&!Array.isArray(i))return D().warn("amp-analytics/linker-manager","%s destinationDomains must be an array.",n),0;if(i)return qn(i,r);n=(e=V(t.A,"documentInfo").get()).sourceUrl;e=Fn(t.la.parse(e.canonicalUrl).hostname)===Fn(r);return t.Ua?qn([t.Ua,"*"+t.Ua],r)||e:Fn(t=t.la.parse(n).hostname)===Fn(r)||e}}function qn(t,e){for(var n=0;n<t.length;n++){var i,r=t[n];if(!(i=r===e)&&(i=-1!==r.indexOf("*"))&&(i=e,r=r.replace(/[-\/\\^$+?.()|[\]{}]/g,"\\$&").replace(/\*/g,".*"),i=new RegExp("^"+r+"$").test(i)),i)return!0}return!1}function Fn(t){return t.replace(/^(?:www\.|m\.|amp\.)+/,"")}function Bn(){}(ui=Cn.prototype).dispose=function(){for(var t in this.F)this.F[t].dispose(),delete this.F[t];this.Ja&&this.Ja.dispose(),this.Fa&&this.Fa.dispose()},ui.getType=function(){},ui.getRoot=function(){},ui.getViewer=function(){return V(this.ampdoc,"viewer")},ui.getRootElement=function(){var t=this.getRoot();return t.host||t.documentElement||t.body||t},ui.getHostElement=function(){},ui.signals=function(){},ui.contains=function(t){return this.getRoot().contains(t)},ui.getElementById=function(){},ui.getTrackerForAllowlist=function(t,e){e=e[t];return e?this.getTracker(t,e):null},ui.getTracker=function(t,e){var n=this.F[t];return n||(n=new e(this),this.F[t]=n),n},ui.getTrackerOptional=function(t){return this.F[t]||null},ui.getElement=function(i,r,t){var e,o=this,a=void 0===t?null:t;return":root"==r?(e=function(){return o.getRootElement()},new Promise(function(t){t(e())})):":host"==r?new Promise(function(t){t(D().assertElement(o.getHostElement(),'Element "'+r+'" not found'))}):this.ampdoc.whenReady().then(function(){var t=null;try{var e,n="scope"==a?(void 0!==N?N:N=Z(i))?i.querySelector(r.replace(/^|,/g,"$&:scope ")):void 0===(e=Q(i,r))[0]?null:e[0]:"closest"==a?et(i,r):o.getRoot().querySelector(r)}catch(t){j(!1,"Invalid query selector "+r)}return n&&o.contains(n)&&(t=n),D().assertElement(t,'Element "'+r+'" not found')})},ui.getAmpElement=function(t,i,e){return this.getElement(t,i,e).then(function(t){for(var e=[t],n=0;n<e.length;n++)j(e[n].classList.contains("i-amphtml-element"),'Element "%s" is required to be an AMP element',i);return t})},ui.getElements=function(t,e,n){return function(t){if(t.__AMP__EXPERIMENT_TOGGLES)var e=t.__AMP__EXPERIMENT_TOGGLES;else{if(t.__AMP__EXPERIMENT_TOGGLES=Object.create(null),e=t.__AMP__EXPERIMENT_TOGGLES,t.AMP_CONFIG)for(var n in t.AMP_CONFIG){var i=t.AMP_CONFIG[n];"number"==typeof i&&0<=i&&i<=1&&(e[n]=Math.random()<i)}var r,n=null==(r=t.AMP_CONFIG)?void 0:r["allow-doc-opt-in"];if(p(n)&&n.length&&(r=t.document.head.querySelector('meta[name="amp-experiments-opt-in"]')))for(r=(i=l(r=r.getAttribute("content").split(","))).next();!r.done;r=i.next())r=r.value,n.includes(r)&&(e[r]=!0);r=(n=Object).assign,i="";try{"localStorage"in t&&(i=t.localStorage.getItem("amp-experiment-toggles"))}catch(t){L().warn("EXPERIMENTS","Failed to retrieve experiments from localStorage.")}i=(null==(a=i)?void 0:a.split(/\s*,\s*/g))||[];for(var o,a=Object.create(null),s=(i=l(i)).next();!s.done;s=i.next())(s=s.value)&&("-"==s[0]?a[s.substr(1)]=!1:a[s]=!0);if(r.call(n,e,a),a=null==(o=t.AMP_CONFIG)?void 0:o["allow-url-opt-in"],p(a)&&a.length)for(t=R(t.location.originalHash||t.location.hash),r=(o=l(a)).next();!r.done;r=o.next())"1"==(n=t["e-"+(a=r.value)])&&(e[a]=!0),"0"==n&&(e[a]=!1)}return e["visibility-trigger-improvements"]}(this.ampdoc.win)&&p(e)?(j(!n,"Cannot have selectionMethod %s defined with an array selector.",n),Nn(this,e)):this.getElement(t,e,n).then(function(t){return[t]})},ui.createSelectiveListener=function(s,c,u,t){var l=this,h=void 0===t?null:t;return function(t){if(":host"!=u)for(var e=l.getRootElement(),n="*"==u,i=":root"==u,r=t.target;r&&l.contains(r)&&("scope"!=h||i||c.contains(r));){if("closest"!=h||r.contains(c)){var o;if(!(o=n||i&&r==e)){var a=u;try{o=tt(r,a)}catch(t){D().error("amp-analytics/analytics-root","Bad query selector.",a,t),o=!1}}if(o){s(r,t);break}}r=r.parentElement}}},ui.whenIniLoaded=function(){},ui.getVisibilityManager=function(){return this.Ja||(this.Ja=function t(e){if(!e.__AMP_VIS){var n,i=G(e),r=B(e),o=r&&r.__AMP_EMBED__;if(n=r)if(Node.prototype.getRootNode)n=r.getRootNode()||r;else{for(;r.parentNode&&(!r||"I-AMPHTML-SHADOW-ROOT"!=r.tagName&&(11!=r.nodeType||"[object ShadowRoot]"!==Object.prototype.toString.call(r)));r=r.parentNode);n=r}r=n,i=o&&r?new In(t(r),o):new Pn(i),e.__AMP_VIS=i}return e.__AMP_VIS}(this.getRoot())),this.Ja},ui.getScrollManager=function(){return this.Fa||(this.Fa=new fn(this)),this.Fa},c(xn,Cn),(ui=xn.prototype).getType=function(){return"ampdoc"},ui.getRoot=function(){return this.ampdoc.getRootNode()},ui.getHostElement=function(){return null},ui.signals=function(){return this.ampdoc.signals()},ui.getElementById=function(t){return this.ampdoc.getElementById(t)},ui.whenIniLoaded=function(){var n,t=ct(this.ampdoc);return"inabox"==P(this.ampdoc.win).runtime?t.getLayoutRect(this.getRootElement()):dn(0,0,(t=t.getSize()).width,t.height),t=this.ampdoc,(n=G(t)).signals().whenSignal("ready-scan").then(function(){var e=V(n,"resources").get().filter(function(t){return!Mn.includes(t.element.tagName)}).map(function(t){return t.element});return 0===e.length?Promise.resolve([]):new Promise(function(o){for(var a=new(t=n.win).IntersectionObserver(function(t){a.disconnect();for(var e=[],n=0;n<t.length;n++){var i=t[n],r=i.target;i.isIntersecting&&e.push(r)}o(e)},{root:t.parent&&t.parent!=t?t.document:null,threshold:.01}),t=0;t<Math.min(e.length,100);t++)a.observe(e[t])}).then(function(t){return Promise.all(t.map(function(t){return t.whenLoaded()}))})})},c(kn,Cn),(ui=kn.prototype).getType=function(){return"embed"},ui.getRoot=function(){return this.embed.win.document},ui.getHostElement=function(){return this.embed.iframe},ui.signals=function(){return this.embed.signals()},ui.getElementById=function(t){return this.embed.win.document.getElementById(t)},ui.whenIniLoaded=function(){return this.embed.whenIniLoaded()},Dn.prototype.dispose=function(){this.jc.forEach(function(t){t()})},Dn.prototype.addTrigger=function(t,e){function n(){c=s.add(i.Pb,r,t,e),i.jc.push(c),u.resolve()}var i=this,r=t.on,o=ke(r),a=De(this.H.getType()),s=this.H.getTrackerForAllowlist(o,a);j(!!s,'Trigger type "%s" is not allowed in the %s',r,this.H.getType());var c,u=new f;return this.Lb<1||"inabox"==P(this.o).runtime?n():nn(this.Pb,n,this.Lb<3?20:10),this.Lb++,u.promise},Ln.prototype.dispose=function(){this.H.dispose()},Ln.prototype.getAnalyticsRoot=function(t){return jn(this,t)},Ln.prototype.createAnalyticsGroup=function(t){return new Dn(jn(this,t),t)},Ln.prototype.triggerEventForTarget=function(t,e,n,i){n=new Le(t,e,n=void 0===n?{}:n,void 0===i||i),t=jn(this,t),e=ke(e);t:{var r;r="story"===e?Ve:Ue}(i=t.getTracker).call(t,e,r).trigger(n)},Un.prototype.init=function(){var i,n,r,o,a=this;if(!v(this.h))return h();this.Ua=Gt(this.A.win),this.h=(i=(s=this).h,n={},r={enabled:function(t){return"googleanalytics"===t.M&&"googleanalytics"===t.A.getMetaByName("amp-google-client-id-api")&&t.A.registerSingleton(2)}(s)&&function(t){return(t=U(t.A.win,"platform")).isSafari()&&12<=t.getMajorVersion()}(s)},t=Object.keys(i).filter(function(t){var e=i[t],n=v(e);return n||(r[t]=e),n}),o=s.la.isProxyOrigin(s.A.win.location),t.forEach(function(t){var e=Object.assign({},r,i[t]);!0!==e.enabled?D().info("amp-analytics/linker-manager","linker config for %s is not enabled and will be ignored.",t):!o&&!1!==e.proxyOnly||(e.ids?n[t]=e:D().error("amp-analytics/linker-manager",'"ids" is a required field for use of "linkers".'))}),n);var t,e,s=Object.keys(this.h).map(function(e){var n=a.h[e].ids,i=Object.keys(n),t=i.map(function(t){var e=new he(a.ld,void 0,!0);return a.Qa(n[t],e)});return Promise.all(t).then(function(t){var n={};return t.forEach(function(t,e){t&&(n[i[e]]=t)}),a.eb[e]=n})});return s.length&&((t=V(this.A,"navigation")).registerAnchorMutator(function(t,e){t.href&&"click"===e.type&&(t.href=Vn(a,t.href))},2),t.registerNavigateToMutator(function(t){return Vn(a,t)},2)),(e=this).Ta||e.Lc.then(function(t){e.Ta=t.beforeSubmit(e.Pc.bind(e))}),Promise.all(s)},Un.prototype.dispose=function(){this.Ta&&this.Ta()},Un.prototype.Qa=function(t,e){var n=this,i=this.I.getMacros(this.j);return this.I.expandTemplate(t,e,this.j).then(function(t){return at(n.j).expandUrlAsync(t,i)})},Un.prototype.Pc=function(t){var e,n=t.actionXhrMutator;for(e in t=t.form,this.h){var i,r=this.h[e].destinationDomains,o=t.getAttribute("action-xhr")||t.getAttribute("action"),o=this.la.parse(o);Hn(this,o,e,r)&&(r=e,o=this.eb[r])&&(i=ae(o),(o=t.getAttribute("action-xhr"))?n(r=xt(o,r=encodeURIComponent(r)+"="+encodeURIComponent(i),void 0)):(r=nt(t.ownerDocument,"input",r={type:"hidden",name:r,value:i}),t.appendChild(r)))}},Bn.prototype.generateRequest=function(t,e,n){return(n=void 0!==n&&n)?{url:t.replace("${extraUrlParams}",""),payload:JSON.stringify(e.extraUrlParams)}:{url:Wn(t,[e])}},Bn.prototype.generateBatchRequest=function(t,e,n){return void 0!==n&&n?{url:t.replace("${extraUrlParams}",""),payload:JSON.stringify(e.map(function(t){return t.extraUrlParams}))}:{url:Wn(t,e)}};var Gn={default:new Bn};function Wn(t,e){e=e.map(function(t){return kt(t.extraUrlParams)}).filter(Boolean).join("&");return 0<=t.indexOf("${extraUrlParams}")?t.replace("${extraUrlParams}",e):xt(t,e)}var zn={AMPDOC_HOST:!0,AMPDOC_HOSTNAME:!0,AMPDOC_URL:!0,AMP_VERSION:!0,AVAILABLE_SCREEN_HEIGHT:!0,AVAILABLE_SCREEN_WIDTH:!0,BACKGROUND_STATE:!0,BROWSER_LANGUAGE:!0,CANONICAL_HOST:!0,CANONICAL_HOSTNAME:!0,CANONICAL_PATH:!0,CANONICAL_URL:!0,DOCUMENT_CHARSET:!0,FIRST_CONTENTFUL_PAINT:!0,FIRST_VIEWPORT_READY:!0,MAKE_BODY_VISIBLE:!0,RANDOM:!0,SCREEN_COLOR_DEPTH:!0,SCREEN_HEIGHT:!0,SCREEN_WIDTH:!0,SOURCE_HOST:!0,SOURCE_HOSTNAME:!0,SOURCE_PATH:!0,SOURCE_URL:!0,TIMESTAMP:!0,TIMEZONE:!0,TIMEZONE_CODE:!0,USER_AGENT:!0,VIEWPORT_HEIGHT:!0,VIEWPORT_WIDTH:!0};function $n(t,e){var n=t.name;for(t=0;t<e.length;++t){var i=e[t],r=i.resources;if(i.hostPattern.test(n.host)&&-1!=(i=function(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n,t))return n;return-1}(r,function(t){return t.pathPattern.test(n.pathname)&&t.queryPattern.test(n.search)})))return r[i].name}return null}function Yn(t,e){var n=function(t){var e,n={};for(e in t){var i=t[e].host||"",r={name:e,pathPattern:new RegExp(t[e].path||""),queryPattern:new RegExp(t[e].query||"")};n[i]?n[i].resources.push(r):n[i]={hostPattern:new RegExp(i),resources:[r]}}var o,a=[];for(o in n)a.push(n[o]);return a}(e),i=[];return t.forEach(function(t){var e=$n(t,n);e&&i.push({entry:t,name:e})}),i}function Kn(a,s){var t,e=a.getAmpDoc().win;if(s.done||!e.performance||!e.performance.now||!e.performance.getEntriesByType||!(v((t=s).resources)?t.encoding&&t.encoding.entry&&t.encoding.delim?t.encoding.base<2||36<t.encoding.base?(D().warn("ANALYTICS","resource timing variables only supports bases between 2 and 36"),0):null==t.responseAfter||"number"==typeof t.responseAfter||(D().warn("ANALYTICS",'resourceTimingSpec["responseAfter"] must be a number'),0):(D().warn("ANALYTICS","resourceTimingSpec is missing or has incomplete encoding options"),0):(D().warn("ANALYTICS",'resourceTimingSpec missing "resources" field'),0)))return s.done=!0,Promise.resolve("");var c=e.performance.getEntriesByType("resource");150<=c.length&&(s.done=!0);var n,i=s.responseAfter||0;return s.responseAfter=Math.max(i,e.performance.now()),(c=c.filter(function(t){return t.startTime+t.duration>=i})).length?(n=function(){return t=c,e=a,i=s.resources,r=s.encoding,o=Te(e),t=Yn(t,i).map(function(t){var e=t.entry;return new he(e={key:t.name,startTime:n(e.startTime),redirectTime:n(e.redirectEnd,e.redirectStart),domainLookupTime:n(e.domainLookupEnd,e.domainLookupStart),tcpConnectTime:n(e.connectEnd,e.connectStart),serverResponseTime:n(e.responseStart,e.requestStart),networkTransferTime:n(e.responseEnd,e.responseStart),transferSize:n(e.transferSize||0),encodedBodySize:n(e.encodedBodySize||0),decodedBodySize:n(e.decodedBodySize||0),duration:n(e.duration),initiatorType:e.initiatorType},1)}).map(function(t){return o.expandTemplate(r.entry,t,e)}),Promise.all(t).then(function(t){return t.join(r.delim)});function n(t,e){return e=void 0===e?0:e,Math.round(t-e).toString(r.base||10)}var t,e,i,r,o},new Promise(function(t){setTimeout(function(){return t(n())})})):Promise.resolve("")}function Jn(t,e,n,i,r){var o;if(this.j=t,this.A=t.getAmpDoc(),this.win=this.A.win,this.sc=e.origin,this.baseUrl=e.baseUrl,this.D=e.batchInterval,this.rc=Number(e.reportWindow)||null,this.rb=null,this.I=Te(t),this.kb=at(t),this.la=H(t,"url"),this.Hb=this.La=null,this.sb=[],this.bd=n,this.Z=i,this.pb=r?zn:void 0,this.bb=this.aa=null,this.qc=!0,this.Cb=null,this.Da=0,this.X=Date.now(),(o=this).rc&&(o.bb=o.win.setTimeout(function(){0!=o.Da&&Zn(o),o.qc=!1,o.aa&&(o.win.clearTimeout(o.aa),o.aa=null)},1e3*o.rc)),this.D){for(this.D=p(this.D)?this.D:[this.D],t=0;t<this.D.length;t++)j(A(e=this.D[t]),"Invalid batchInterval value: %s",this.D),j(200<=(e=1e3*Number(e)),"Invalid batchInterval value: %s, interval value must be greater than %s ms.",this.D,200),this.D[t]=e;this.rb=0,function t(e){var n=e.rb<e.D.length?e.D[e.rb++]:e.D[e.D.length-1];e.aa=e.win.setTimeout(function(){0!=e.Da&&Zn(e),t(e)},n)}(this)}}function Xn(t,e,n,i){return t.I.expandTemplate(e,n,t.j,i,t.pb).then(function(e){return t.kb.expandUrlAsync(e,i,t.pb).catch(function(t){return j(!1,'Could not expand URL "'+e+'": '+t.message)})})}function Zn(i){var t=i.La,e=i.sb,n=i.Hb,r=i.Cb;i.cb(),(n||t).then(function(t){i.bd.url(i.A,t,!0)}),Promise.all([t,Promise.all(e),n]).then(function(t){var e=t[0],n=t[2],e=n?i.la.parse(n).origin+e:e;0!==(t=t[1]).length&&(r.iframePing?(j("visible"==r.on,"iframePing is only available on page view requests."),i.Z.sendRequestUsingIframe(e,t[0])):i.Z.sendRequest(e,t,!!i.D))})}function Qn(a,s,t,e,c,u,l){var n={},h=[],f=new he(e.vars,e.iterations,!0),i=Object.keys(t);for(e=0;e<i.length;e++)!function t(e,n,i){if("string"==typeof(e=e[n]))i[n]=void 0,e=a.expandTemplate(e,f,u).then(function(t){return s.expandStringAsync(t,c,l)}).then(function(t){i[n]=t}),h.push(e);else if(p(e)){i[n]=[];for(var r=0;r<e.length;r++)t(e,r,i[n])}else if(v(e)&&null!==e){i[n]={};for(var o=Object.keys(e),r=0;r<o.length;r++)t(e,o[r],i[n])}else i[n]=e}(t,i[e],n);return Promise.all(h).then(function(){return n})}function ti(t){var e=this;this.Mc=t,this.ic=!1,this.Ca=[],this.$c=new ee(this.Mc,function(){e.setIsReady()})}function ei(t){t.isReady()&&t.queueSize()&&(t.$c.send("iframe-transport-events",{events:t.Ca}),t.Ca=[])}function ni(t,e,n,i){this.va=t,this.M=e,this.Xb=i,this.Zb=n.iframe,this.Xc=0,this.processCrossDomainIframe()}Jn.prototype.send=function(t,e,n){var i,r,o,a,s,c=!0===e.important;(this.qc||c)&&(this.Da++,this.Cb=e,(r=this.I.getMacros(this.j)).RESOURCE_TIMING=(o=this.j,a=e.resourceTimingSpec,s=this.X,a&&Date.now()<s+6e4?Kn(o,a):Promise.resolve("")),this.La||(n.freezeVar("extraUrlParams"),this.La=Xn(this,this.baseUrl,n,r)),!this.Hb&&this.sc&&(a=new he(n.vars,n.iterations,!0),this.Hb=Xn(this,this.sc,a,r)),t=Object.assign({},t,e.extraUrlParams),i=this.win.Date.now(),r=Qn(this.I,this.kb,t,n,r,this.j,this.pb).then(function(t){return b({trigger:e.on,timestamp:i,extraUrlParams:t})}),this.sb.push(r),0==this.Da||!c&&this.D||Zn(this))},Jn.prototype.dispose=function(){this.cb(),this.aa&&(this.win.clearTimeout(this.aa),this.aa=null),this.bb&&(this.win.clearTimeout(this.bb),this.bb=null)},Jn.prototype.cb=function(){this.Da=0,this.La=null,this.sb=[],this.Cb=null},ti.prototype.isReady=function(){return this.ic},ti.prototype.setIsReady=function(){this.ic=!0,ei(this)},ti.prototype.queueSize=function(){return this.Ca.length},ti.prototype.enqueue=function(t){this.Ca.push(t),100<=this.queueSize()&&(L().warn("amp-analytics/iframe-transport-message-queue","Exceeded maximum size of queue for: "+t.creativeId),this.Ca.shift()),ei(this)},(ui=ni.prototype).detach=function(){var t=this.va.document,e=this.M,n=ii[e];--n.usageCount||(t.body.removeChild(n.frame),delete ii[e],oi[e]&&(oi[e].disconnect(),oi[e]=null))},ui.processCrossDomainIframe=function(){var t,e;y(ii,this.M)?++(t=ii[this.M]).usageCount:(t=this.createCrossDomainIframe(),this.va.document.body.appendChild(t.frame),function(t){return!!t.PerformanceObserver&&!!t.TaskAttributionTiming&&"containerName"in t.TaskAttributionTiming.prototype}((e=this).va)&&(oi[e.M]=new e.va.PerformanceObserver(function(t){t&&t.getEntries().forEach(function(t){t&&"longtask"==t.entryType&&"cross-origin-descendant"==t.name&&t.attribution&&t.attribution.forEach(function(t){e.Zb==t.containerSrc&&0==++e.Xc%5&&D().error("amp-analytics/iframe-transport",'Long Task: Vendor: "'+e.M+'"')})})}),oi[e.M].observe({entryTypes:["longtask"]})))},ui.createCrossDomainIframe=function(){var t=String(++ri),e=JSON.stringify({scriptSrc:C.thirdParty+"/2106030132000/iframe-transport-client-v0.js",sentinel:t,type:this.M}),e=nt(this.va.document,"iframe",{sandbox:"allow-scripts allow-same-origin",name:e,"data-amp-3p-sentinel":t});return e.sentinel=t,Jt(e),e.src=this.Zb,t={frame:e,usageCount:1,queue:new ti(e)},ii[this.M]=t},ui.sendRequest=function(t){ii[this.M].queue.enqueue({creativeId:this.Xb,message:t})},ui.getCreativeId=function(){return this.Xb},ui.getType=function(){return this.M};var ii={},ri=0,oi={};function ai(t,e,n){return n&&"no-referrer"!==n&&D().error("pixel","Unsupported referrerPolicy: %s",n),("no-referrer"===n?function(t,e){if("referrerPolicy"in Image.prototype)return si(t,e,!0);var n=nt(t.document,"iframe",{src:"about:blank",style:"display:none"});return n.onload=function(){si(n.contentWindow,e)},t.document.body.appendChild(n),n}:si)(t,e)}function si(t,e,n){n=n=void 0!==n&&n;return t=new t.Image,n&&(t.referrerPolicy="no-referrer"),t.src=e,t}function ci(t,e){e=void 0===e?{}:e,this.A=t,this.o=t.win,this.K=e,this.oc=this.K.referrerPolicy,"no-referrer"===this.oc&&(this.K.beacon=!1,this.K.xhrpost=!1),this.uc=!!this.K.useBody,this.ba=null,this.da="inabox"==P(this.o).runtime}ci.prototype.sendRequest=function(n,i,r){var o,t,e,a,s,c,u,l,h,f;n&&0!==i.length?(o=Gn.default,h=function(t){var e;return(t=r?o.generateBatchRequest(n,i,t):o.generateRequest(n,i[0],t)).url.startsWith("amp-script:")||(Dt(t.url,"amp-analytics request"),j(!("__amp_source_origin"in R(Nt(e=t.url).search)),"Source origin is not allowed in %s",e)),t},f={},t=function(t){var e=String(t);return void 0===f[e]&&(f[e]=h(t)),f[e]},this.K.iframe?this.ba?this.ba.sendRequest(t(!1).url):L().error("amp-analytics/transport","iframe transport was inadvertently deleted"):this.K["amp-script"]?(u=this.A,l={url:n,payload:t(!0).payload},function(t){var e=H(t,"amp-script");return e?Promise.resolve(e):rt(t,"amp-script","amp-script")}(u).then(function(t){j(t,"AMP-SCRIPT is not installed"),t.fetch(l.url,JSON.parse(l.payload))})):this.K.beacon&&(s=this.o,c=t(this.uc),(s=s.navigator.sendBeacon?s.navigator.sendBeacon.bind(s.navigator):void 0)&&((s=s(c.url,c.payload||""))&&L().fine("amp-analytics/transport","Sent beacon request",c),s))||this.K.xhrpost&&function(t,e){if(!(t=t.XMLHttpRequest))return!1;var n=new t;return"withCredentials"in n&&(n.open("POST",e.url,!0),n.withCredentials=!0,n.setRequestHeader("Content-Type","text/plain"),n.onreadystatechange=function(){4==n.readyState&&L().fine("amp-analytics/transport","Sent XHR request",e.url)},n.send(e.payload||""),!0)}(this.o,t(this.uc))||((c=this.K.image)?(s="object"==typeof c&&c.suppressWarnings,c=this.o,e=t(!1),a=s,s=this.oc,c&&ht(c=ai(c,e.url,s)).then(function(){L().fine("amp-analytics/transport","Sent image request",e.url)}).catch(function(){a||D().warn("amp-analytics/transport","Response unparseable or failed to send image request",e.url)})):D().warn("amp-analytics/transport","Failed to send request",n,this.K))):L().info("amp-analytics/transport","Empty request not sent: ",n)},ci.prototype.maybeInitIframeTransport=function(t){if(this.K.iframe&&!this.ba){var e=F(t.ownerDocument.defaultView),n=t.getAttribute("type");if(this.da)t="1";else{var i=D(),r=i.assertString;t:{try{var o=B(t,e).parentElement;if("AMP-AD"==o.nodeName){var a=String(o.getResourceId());break t}}catch(t){}a=null}t=r.call(i,a,"No friendly amp-ad ancestor element was found for amp-analytics tag with iframe transport.")}this.ba=new ni(e,n,this.K,t)}},ci.prototype.deleteIframeTransport=function(){this.ba&&(this.ba.detach(),this.ba=null)},ci.prototype.sendRequestUsingIframe=function(t,e){var n,i=this;(t=Wn(t,[e]))?(Dt(t,"amp-analytics request"),j(Nt(t).origin!=Nt(this.o.location.href).origin,"Origin of iframe request must not be equal to the document origin. See https://github.com/ampproject/amphtml/blob/main/docs/spec/amp-iframe-origin-policy.md for details."),Jt(n=this.o.document.createElement("iframe")),n.onload=n.onerror=function(){z(i.o,"timer").delay(function(){n.parentElement&&n.parentElement.removeChild(n)},5e3)},n.setAttribute("amp-analytics",""),n.setAttribute("sandbox","allow-scripts allow-same-origin"),n.src=t,this.o.document.body.appendChild(n)):D().error("amp-analytics/transport","Request not sent. Contents empty.")};var ui,li=["visible","hidden","ini-load","render-start"];function hi(t){return(t=e.BaseElement.call(this,t)||this).Vb=h(),t.ub=null,t.V=!1,t.Ea={},t.h={},t.fc=null,t.na=null,t.I=null,t.Jc=U(t.win,"crypto"),t.R=null,t.Z=null,t.da="inabox"==P(t.win).runtime,t.za=null,t.Ab=null,t}function fi(i){if(i.R)return i.R;var t=i.getAmpDoc();return i.R=t.whenFirstVisible().then(function(){return z(i.win,"timer").promise(1)}).then(function(){return i.Vb}).then(function(){return Promise.all([Y(W(t),"amp-analytics-instrumentation"),Y(W(t),"amp-analytics-variables")])}).then(function(t){function e(){var t=new Re(i.element).loadConfig();n.resolve(t)}i.fc=t[0],i.I=t[1];var n=new f;return i.da?e():nn(i.element,e,20),n.promise}).then(function(t){return i.h=t,new hn(i.win,i.element,i.h).write()}).then(function(){i.Z=new ci(i.getAmpDoc(),i.h.transport||{})}).then(i.ed.bind(i)).then(i.Tc.bind(i)),i.R.then(function(){i.collapse()}),i.R}function pi(t){return!!t.da||(null==t.Ab&&(t.Ab=ne(t.element)),t.Ab)}function di(e,n){if(!e.na)return h();try{return e.na.addTrigger(n,e.Oc.bind(e,n))}catch(t){return w(e=e.C(),'Failed to process trigger "'+n.on+'"',t),h()}}function mi(t,e,n){if(e&&n){var i,r=0;for(i in n){if(16<++r){e=t.C(),t.user().error(e,"More than 16 extraUrlParamsReplaceMap rules aren't allowed; Skipping the rest");break}for(var o in e){var a,s=o.replace(i,n[i]);o!=s&&(a=e[o],delete e[o],e[s]=a)}}}}function gi(t,e,n){return void 0===e?Promise.resolve(!0):"boolean"==typeof e?Promise.resolve(e):t.Qa(e,n).then(Se)}function vi(t,e,n,i,r){var o={};return Pe(t.h.vars,o),Pe(n.vars,o),Pe(e.vars,o),new he(o,i,r)}c(hi,e.BaseElement),(ui=hi.prototype).getLayoutPriority=function(){return this.da?0:1},ui.isAlwaysFixed=function(){return!ne(this.element)},ui.isLayoutSupported=function(){return!0},ui.buildCallback=function(){var e=this;this.V=this.element.hasAttribute("sandbox"),this.element.setAttribute("aria-hidden","true"),this.ub=this.element.getAttribute("data-consent-notification-id"),null!=this.ub&&(this.Vb=rt(this.element,"userNotificationManager","amp-user-notification",void 0).then(function(t){return j(t,"Service %s was requested to be provided through %s, but %s is not loaded in the current page. To fix this problem load the JavaScript file for %s in this page.","userNotificationManager","amp-user-notification","amp-user-notification","amp-user-notification")}).then(function(t){return t.get(e.ub)})),"immediate"==this.element.getAttribute("trigger")&&fi(this)},ui.layoutCallback=function(){return fi(this)},ui.detachedCallback=function(){for(var t in this.na&&(this.na.dispose(),this.na=null),this.za&&(this.za.dispose(),this.za=null),this.Ea)this.Ea[t].dispose(),delete this.Ea[t]},ui.resumeCallback=function(){var t=this;this.R&&this.R.then(function(){t.Z.maybeInitIframeTransport(t.element)})},ui.unlayoutCallback=function(){var t=this;return!this.getAmpDoc().isVisible()&&(this.R&&this.R.then(function(){t.Z.deleteIframeTransport()}),e.BaseElement.prototype.unlayoutCallback.call(this))},ui.ed=function(){var n=this;if(function(t){var e=t.h.optoutElementId;if(e&&t.win.document.getElementById(e))return!0;if(!t.h.optout)return!1;var n=t.h.optout.split(".");t=t.win;for(var i=0;i<n.length;i++){if(!t)return!1;t=t[n[i]]}return t()}(this)){var t=this.C();return D().fine(t,"User has opted out. No hits will be sent."),h()}if(!function(n){if(n.h.requests){if(n.h.requests){for(var t in n.h.requests)y(n.h.requests,t)&&!n.h.requests[t].baseUrl&&(n.user().error("amp-analytics","request must have a baseUrl"),delete n.h.requests[t]);for(var e in n.h.requests)n.h.requests[e].baseUrl=function(t,i){for(var e={},n=0;n<5&&(e.Ka=0,t=t.replace(/\${([^}]*)}/g,function(n){return function(t,e){return n.Ka++,i(e)}}(e)),e.Ka);e={Ka:e.Ka},n++);return t}(n.h.requests[e].baseUrl,function(t){var e=n.h.requests[t];return e&&e.baseUrl||"${"+t+"}"});for(var i in t={},n.h.requests)y(n.h.requests,i)&&(t[i]=new Jn(n.element,n.h.requests[i],U(n.win,"preconnect"),n.Z,n.V));n.Ea=t}}else pi(n)||(i=n.C(),n.user().warn(i,"No request strings defined. Analytics data will not be sent from this page."))}(this),!this.h.triggers)return t=this.C(),this.user().warn(t,"No triggers were found in the config. No analytics data will be sent."),h();mi(this,this.h.extraUrlParams,this.h.extraUrlParamsReplaceMap),this.na=this.fc.createAnalyticsGroup(this.element),this.Z.maybeInitIframeTransport(this.element);var e,t=[],i={};for(e in this.h.triggers){t:if(y(this.h.triggers,e)){i.B=this.h.triggers[e],i.nb=vi(this,{},i.B,void 0,!0);var r=this.C();if(i.B){var o=i.B.request||i.B.parentPostMessage&&pi(this);if(i.B.on&&o){if(this.V){var a=i.B.on;if(("click"===a||"custom"===a||"hidden"===a||"ini-load"===a||"render-start"===a||"scroll"===a||"story"===a||"timer"===a||"video"===a||"visible"===a)&&!li.includes(a)){this.user().error(r,a+" is not supported for amp-analytics in scope");break t}}mi(this,i.B.extraUrlParams,this.h.extraUrlParamsReplaceMap),t.push(function(e,n){var t=n.sampleSpec,i=e.C();if(!t)return Promise.resolve(!0);var r=t.sampleOn;if(!r)return e.user().error(i,"Invalid sampleOn value."),Promise.resolve(!0);var o=parseFloat(t.threshold);if(0<=o&&o<=100){var a=new f,t=function(){var t=vi(e,{},n),t=e.Qa(r,t).then(function(t){return e.Jc.uniform(t)}).then(function(t){return 100*t<o});a.resolve(t)};return e.da?t():nn(e.element,t,10),a.promise}return D().error(i,"Invalid threshold for sampling."),Promise.resolve(!0)}(this,i.B).then(function(e){return function(t){if(t)return n.V?n.element.parentElement?(e.B.selector=n.element.parentElement.tagName,e.B.selectionMethod="closest",di(n,e.B)):void 0:e.B.selector&&!p(e.B.selector)?n.I.expandTemplate(e.B.selector,e.nb,n.element).then(function(t){return e.B.selector=t,di(n,e.B)}):di(n,e.B)}}(i)))}else{a=pi(this)?'/"parentPostMessage"':"";this.user().error(r,'"on" and "request"'+a+" attributes are required for data to be collected.")}}else this.user().error(r,"Trigger should be an object: ",e)}i={B:i.B,nb:i.nb}}return Promise.all(t)},ui.preload=function(t,e){U(this.win,"preconnect").preload(this.getAmpDoc(),t,e)},ui.Tc=function(){function t(){e.za.init()}var e=this,n=this.element.getAttribute("type");this.za=new Un(this.getAmpDoc(),this.h,n,this.element),this.da?t():nn(this.element,t,10)},ui.Oc=function(t,e){for(var n=p(t.request)?t.request:[t.request],i=0;i<n.length;i++)!function(r,t,o,a){r.element.ownerDocument.defaultView||(e=r.C(),L().warn(e,"request against destroyed embed: ",o.on));var s=r.Ea[t],e=pi(r)&&o.parentPostMessage;(null==t||s||(t=r.C(),r.user().error(t,"Ignoring request for event. Request string not found: ",o.request),e))&&!function(t,e,n){n=vi(t,n,e);var i=gi(t,t.h.enabled,n),n=gi(t,e.enabled,n);return Promise.all([i,n]).then(function(t){return t[0]&&t[1]})}(r,o,a).then(function(t){var e,n,i=r.element.ownerDocument&&r.element.ownerDocument.defaultView;t&&i&&(s&&(r.h.vars.requestCount++,t=vi(r,a,o),s.send(r.h.extraUrlParams,o,t)),(t=(t=o.parentPostMessage&&pi(r))?(t=r.win).parent&&t.parent!=t:t)&&(e=r,n=a,t=(i=o).parentPostMessage,n=vi(e,a,i),function(t,e,n,i,r,o){var a=Te(t),s=at(o),c=a.getMacros(o);return r.freezeVar("extraUrlParams"),t=a.expandTemplate(e,r,o).then(function(t){return s.expandStringAsync(t,c)}),e.indexOf("${extraUrlParams}")<0?t:t.then(function(e){var t=Object.assign({},n,i.extraUrlParams);return Qn(a,s,t,r,c,o).then(function(t){return Wn(e,[{extraUrlParams:t}])})})}(e.getAmpDoc(),t,e.h.extraUrlParams,i,n,e.element).then(function(t){e.win.parent.postMessage(t,"*")})))})}(this,n[i],t,e)},ui.Qa=function(t,e){var n=this;return this.I.expandTemplate(t,e,this.element).then(function(t){return at(n.element).expandUrlAsync(t,n.I.getMacros(n.element))})},ui.C=function(){return"AmpAnalytics "+(this.element.getAttribute("id")||"<unknown id>")},(i=self.AMP).registerServiceForDoc("amp-analytics-instrumentation",Ln),i.registerServiceForDoc("activity",vt),$(ui=F(ui=i.win),ui,"amp-analytics-linker-reader",ce),i.registerServiceForDoc("amp-analytics-variables",be),i.registerElement("amp-analytics",hi)}});
