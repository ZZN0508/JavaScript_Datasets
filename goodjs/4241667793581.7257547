!function(n){var i={};function r(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.m=n,r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,n){"use strict";n.r(t);function i(e){!function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),this.type=e}var o="dev",r="childFrame",a="prod",s="placement",c="floating",d="default",u="expand",l="expand",h="contract",f="show",p="hide",g="close",v="MRAID",m="VPAID";function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var w=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),b(e,t)}(C,i),C);function C(e,t){var n;return function(e){if(!(e instanceof C))throw new TypeError("Cannot call a class as a function")}(this),n=this,(e=!(e=A(C).call(this,e))||"object"!==y(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n):e).meta=t,e}w.topic={INIT:"init",CLICK:"click",QUALIFIED_CLICK:"qualifiedClick",EVENT:"event",CONTAINER_EVENT:"containerEvent",TIMER:"timer",INIT_COMPLETE:"initComplete",CONTAINER_EVENT_COMPLETE:"containerEventComplete",GLOBAL_RELAY_EVENT:"globalRelayEvent"};var E=w,S={AdAPI:{version:"1.4.2"},configuration:{AdServer:{clickRedirect:""},Publisher:{clickRedirect:""},ThirdParty:[],Creative:{clicks:{},events:{},content:{}},User:{geolocation:{}}},configurationLoaded:!1,container:{id:"",state:"default"},containerViewable:!1,domLoaded:!1,environment:null,environmentReady:!1,hostPageLoaded:!1,ready:!1,readyCallbacks:[],mode:null},O=/\.$/,L=/\[]/,k=/\[/g,P=/\]/g,T={evaluateNameAndLabel:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n="",i=t.path,r=void 0===i?"":i;r&&!O.test(r)&&(r+=".");var o,a=t.reportingLabelKey,i=t.reportingLabel,a=this.asArray(a),i=this.asArray(i);return t.hasOwnProperty("index")?(o=t.index,(o=this.asArray(o)).forEach(function(e){r=r.replace(L,"[".concat(e,"]"))}),n=this.evaluateReportingLabel(i,a,o,r,t.path)):t.hasOwnProperty("item")&&(o=t.item,(o=this.asArray(o)).forEach(function(e){r=r.replace(L,"[".concat(e._index,"]"))}),o=o.map(function(e){return e._index}),n=this.evaluateReportingLabel(i,a,o,r,t.path)),{name:r+e,reportingLabel:n?"".concat(n,".").concat(e):""}},addIndexToCollectionItems:function(e){this.findItemsInArrays(e,function(e,t){e._index=t})},findItemsInArrays:function(e,n){var i=this;if(Array.isArray(e))e.forEach(function(e,t){n(e,t),i.findItemsInArrays(e,n)});else if("string"!=typeof e)for(var t in e)e.hasOwnProperty(t)&&this.findItemsInArrays(e[t],n)},checkForImpliedContentPrefix:function(e,t){var n="content."+e;return t[n]?n:e},get:function(e,t){return(t=(t=t.replace(k,".")).replace(P,"")).split(".").reduce(function(e,t){if(e){t=e[t];if(t)return t}},e)},evaluateReportingLabel:function(e,n,t,i,r){var o=this;if(0<e.length&&e[0])return this.fillReportingPath(t,e,r);var a=S.configuration.Creative.content,s=[],c=i.split("].");return c.pop(),(c=(c=c.map(function(e){return e+"]"})).map(function(e,t){return c.slice(0,t+1).reduce(function(e,t){return e+"."+t})})).forEach(function(e,t){e=o.get(a,e);!e||(e=e[n[t]]||e.reportingLabel)&&s.push(e)}),this.fillReportingPath(t,s,r)},fillReportingPath:function(e,i,r){return e.forEach(function(e,t){var n="";i[t]&&(n=" - ".concat(i[t])),r=r.replace(L,"[".concat(e).concat(n,"]"))}),r},asArray:function(e){return Array.isArray(e)?e:[e]}};function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),R(e,t)})(V,i),n=V;function V(e,t){var n,i;if(function(e){if(!(e instanceof V))throw new TypeError("Cannot call a class as a function")}(this),i=this,n=!(e=D(V).call(this,e))||"object"!==I(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(i):e,t)for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}n.READY="ready";var M=n,_="[$AD]",x={log:function(e){for(var t,n=arguments.length,i=new Array(1<n?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(t=console).log.apply(t,[_,e].concat(i))},warn:function(e){for(var t,n=arguments.length,i=new Array(1<n?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(t=console).warn.apply(t,[_,e].concat(i))}};var N="https://ad-formats.advertising.aol.com/v1/types/v1/schema.json",j="https://ad-formats.advertising.aol.com/v1/types/json-schema/draft-04/schema.json",z={CUSTOM_TYPES_URL:N,DRAFT_04_URL:j,getDefaults:function(l){var t=this,h=document.querySelectorAll("script[".concat("data-craft-content","]"));h&&0!==h.length?this.all([function(e){return t.loadJSON(N,e)},function(e){return t.loadJSON(j,e)},function(e){return t.loadAjv(e)}],function(e){var t,n,e=(n=3,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()),t=e[0],n=e[1],i=new e[2]({allErrors:!0,useDefaults:!0,extendRefs:!0,schemaId:"auto"});i.addMetaSchema(n),i.addSchema(t,N);for(var r={},o=0;o<h.length;o++){var a=h[o],s=a.getAttribute("data-craft-content");if(s&&0!==s.length)if(r[s])x.warn("ContentScripts",'Duplicate "'.concat(s,'" ').concat("data-craft-content"," scripts defined. Names must be unique."));else{var c=void 0;try{c=JSON.parse(a.innerText)}catch(e){x.warn("ContentScripts",'JSON parse error in "'.concat(s,'" ').concat("data-craft-content",":"),e.message);continue}var d=void 0,u={};if(c.$schema)d=c;else{if(!c.schema){x.warn("ContentScripts",'Missing "'.concat(s,'" schema.'));continue}d=c.schema,u=c.default||{}}a=void 0;try{a=i.compile(d)}catch(e){x.warn("ContentScripts",'In "'.concat(s,'" schema:'),e.message);continue}a(u),a.errors?x.warn("ContentScripts",'In "'.concat(s,'":'),a.errors):(c.form&&!Array.isArray(c.form)&&x.warn("ContentScripts",'The optional "form" key for "'.concat(s,'" ').concat("data-craft-content"," must be an array.")),r[s]=u)}else x.warn("ContentScripts","Content name missing from ".concat("data-craft-content"," attribute."))}l(r)},function(e){x.warn("ContentScripts",e.message),l({})}):l({})},all:function(i,r,o){var a=0,s=[],c=!1;i.forEach(function(e,n){e(function(e,t){return e&&!c?(o(e),void(c=!0)):(a++,s[n]=t,void(a===i.length&&r(s)))})})},loadAjv:function(t){var e=document.createElement("script");e.src="https://cdn.cmp.advertising.com/libraries/ajv-6.1.0.js",e.addEventListener("load",function(){t(null,window.Ajv)}),e.addEventListener("error",function(e){t(e)}),document.head.appendChild(e)},loadJSON:function(e,t){var n=new XMLHttpRequest;n.addEventListener("load",function(){if(n.status<200||299<n.status)t(new Error("".concat(n.status," - ").concat(n.responseText)));else{var e;try{e=JSON.parse(n.responseText)}catch(e){return void t(e)}t(null,e)}}),n.addEventListener("error",function(e){t(e)}),n.addEventListener("abort",function(e){t(e)}),n.open("GET",e),n.send()}},G=function(e){function t(){return e()}if("complete"===document.readyState)return e();document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",t),window.attachEvent("onload",t))};function H(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var F=(t=[{key:"cleanup",value:function(){this.eventTypes={}}},{key:"on",value:function(e,t,n){this.eventTypes[e]=this.eventTypes[e]||[];for(var i=0;i<this.eventTypes[e].length;i++)if(this.eventTypes[e][i].handler===t)return;this.eventTypes[e].push({thisArg:n,handler:t})}},{key:"off",value:function(n,i,r){var o=this;this.eventTypes[n]&&this.eventTypes[n].forEach(function(e,t){e.handler===i&&e.thisArg===r&&o.eventTypes[n].splice(t,1)})}},{key:"hasEventListener",value:function(e,t,n){if(!this.eventTypes[e]||0===this.eventTypes[e].length)return!1;var i=!0,r=!1,o=void 0;try{for(var a,s=this.eventTypes[e][Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var c=a.value;if(c.handler===t&&c.thisArg===n)return!0}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return!1}},{key:"trigger",value:function(e){var t;"string"==typeof e&&(e=new i(e)),this.eventTypes[e.type]&&(e.target||(e.target=this.target),e.currentTarget=this.target,t=e.callbackArguments||[e],this.eventTypes[e.type].forEach(function(e){e.thisArg?e.handler.apply(e.thisArg,t):e.handler.apply(e,t)}))}}],H(U.prototype,t),U);function U(e){!function(e){if(!(e instanceof U))throw new TypeError("Cannot call a class as a function")}(this),this.target=e,this.cleanup()}function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),W(e,t)})(Q,i),w=Q;function Q(e,t){var n;return function(e){if(!(e instanceof Q))throw new TypeError("Cannot call a class as a function")}(this),n=this,e=!(e=J(Q).call(this,e))||"object"!==$(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n):e,t&&(e.offsetX=t.offsetX,e.offsetY=t.offsetY,e.width=t.width,e.height=t.height),e}w.DOM_LOAD="DOMLoad",w.FOCUS="focus",w.BLUR="blur",w.LOAD="pageLoad",w.SCROLL="pageScroll",w.RESIZE="pageResize",w.ORIENTATION_CHANGE="orientationChange";var K=w;function Y(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var t=(n=[{key:"handlePostMessage",value:function(e){e.data&&e.data.topic&&this.eventDispatcher.trigger(new E(e.data.topic,e.data.meta))}},{key:"send",value:function(e,t){this.postMessage({topic:e,meta:t},"*")}},{key:"on",value:function(e,t,n){return this.eventDispatcher.on(e,t,n)}},{key:"off",value:function(e,t,n){return this.eventDispatcher.off(e,t,n)}},{key:"postMessage",value:function(){if(this.targetFrameOrWindow)try{var e=this.targetFrameOrWindow;try{e.nodeName&&"IFRAME"===e.nodeName&&(e=this.targetFrameOrWindow.contentWindow)}catch(e){}e.postMessage.apply(e,arguments)}catch(e){}}},{key:"cleanup",value:function(){window.removeEventListener("message",this.handlePostMessage)}}],Y(de.prototype,n),de),q="audioVolumeChange",B="exposureChange",X={currentPosition:{x:0,y:0,width:0,height:0},defaultPosition:{x:0,y:0,width:0,height:0},env:null,exposure:{exposedPercentage:0,visibleRectangle:{x:0,y:0,width:0,height:0},occlusionRectangles:[]},location:{lat:0,lon:0,type:0,accuracy:0,lastfix:0,ipservice:""},maxSize:{width:0,height:0},orientation:{orientation:"",locked:!1},orientationProperties:{allowOrientationChange:!0,forceOrientation:""},placementType:"",screenSize:{width:0,height:0},state:"loading",supports:{sms:!1,tel:!1,calendar:!1,storePicture:!1,inlineVideo:!1,vpaid:!1,location:!1},viewable:!1,volumePercentage:100},Z="mraid.ready",ee="mraid.audioVolumeChange",te="mraid.error",ne="mraid.exposureChange",ie="mraid.locationChange",re="mraid.orientationChange",oe="mraid.positionChange",ae="mraid.sizeChange",se="mraid.stateChange",ce="mraid.viewableChange";function de(e){!function(e){if(!(e instanceof de))throw new TypeError("Cannot call a class as a function")}(this),this.eventDispatcher=new F,this.targetFrameOrWindow=e,window.addEventListener("message",this.handlePostMessage.bind(this))}function ue(){return(ue=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}var le=new t(window.parent),he=new F,fe={get delivrMessenger(){return le},get eventDispatcher(){return he},init:function(e){var t=this,n=e.mode,e=e.ready;this.readyCallback=e,n===a?(le.on(Z,this.handleReady,this),le.on(te,this.handleError,this),le.on(ee,this.handleAudioVolumeChange,this),le.on(ne,this.handleExposureChange,this),le.on(ie,this.handleLocationChange,this),le.on(re,this.handleOrientationChange,this),le.on(oe,this.handlePositionChange,this),le.on(ae,this.handleSizeChange,this),le.on(se,this.handleStateChange,this),le.on(ce,this.handleViewableChange,this),le.send("mraid.init",{AdAPI:S.AdAPI})):(setTimeout(function(){t.handleReady({meta:{env:{appId:"",coppa:!1,ifa:"",sdk:"$AD mock SDK",sdkVersion:"0.0.0-dev",version:"3.0",limitAdTracking:!1},screenSize:{width:window.innerWidth,height:window.innerHeight},state:"default"}})},1e3),window.addEventListener("resize",function(){t.handleSizeChange({meta:{width:window.innerWidth,height:window.innerHeight}})}))},cleanup:function(){le.off(Z,this.handleReady,this),le.off(te,this.handleError,this),le.off(ee,this.handleAudioVolumeChange,this),le.off(ne,this.handleExposureChange,this),le.off(ie,this.handleLocationChange,this),le.off(re,this.handleOrientationChange,this),le.off(oe,this.handlePositionChange,this),le.off(ae,this.handleSizeChange,this),le.off(se,this.handleStateChange,this),le.off(ce,this.handleViewableChange,this),he.cleanup(),delete window.MRAID_ENV},handleReady:function(e){e=e.meta;ue(X,e),window.MRAID_ENV=X.env,this.eventDispatcher.trigger("ready"),this.readyCallback()},handleError:function(e){e=e.meta;this.eventDispatcher.trigger(new M("error",e))},handleAudioVolumeChange:function(e){e=e.meta;X.volumePercentage=e.volumePercentage,this.eventDispatcher.trigger(new M(q,{callbackArguments:[e.volumePercentage]}))},handleExposureChange:function(e){e=e.meta;X.exposure=e,this.eventDispatcher.trigger(new M(B,{callbackArguments:[e.exposedPercentage,e.visibleRectangle,e.occlusionRectangles]}))},handleLocationChange:function(e){e=e.meta;X.location=e},handleOrientationChange:function(e){e=e.meta;X.orientation=e},handlePositionChange:function(e){e=e.meta;X.currentPosition.x=e.x,X.currentPosition.y=e.y},handleSizeChange:function(e){e=e.meta;X.currentPosition.width=e.width,X.currentPosition.height=e.height,this.eventDispatcher.trigger(new M("sizeChange",{callbackArguments:[e.width,e.height]}))},handleStateChange:function(e){e=e.meta;X.state=e.state,this.eventDispatcher.trigger(new M("stateChange",{callbackArguments:[e.state]}))},handleViewableChange:function(e){e=e.meta;X.viewable=e.isViewable,this.eventDispatcher.trigger(new M("viewableChange",{callbackArguments:[e.isViewable]}))}},pe={addEventListener:function(e,t){fe.eventDispatcher.on(e,t),e===B?window.$AD.ready(function(){fe.handleExposureChange({meta:X.exposure})}):e===q&&window.$AD.ready(function(){fe.handleAudioVolumeChange({meta:{volumePercentage:X.volumePercentage}})})},removeEventListener:function(e,t){fe.eventDispatcher.off(e,t)},open:function(e){window.$AD.click("default",{url:e})},close:function(){window.$AD.close()},unload:function(){fe.delivrMessenger.send("mraid.unload")},playVideo:function(e){fe.delivrMessenger.send("mraid.playVideo",{url:e})},storePicture:function(e){fe.delivrMessenger.send("mraid.storePicture",{url:e})},createCalendarEvent:function(e){fe.delivrMessenger.send("mraid.createCalendarEvent",e)},useCustomClose:function(){return!1},isViewable:function(){return X.viewable},getVersion:function(){return X.version},supports:function(e){return X.supports[e]},getPlacementType:function(){return X.placementType},getOrientationProperties:function(){return X.orientationProperties},setOrientationProperties:function(e){X.orientationProperties=e,fe.delivrMessenger.send("mraid.setOrientationProperties",e)},getCurrentAppOrientation:function(){return X.orientation},getCurrentPosition:function(){return X.currentPosition},getDefaultPosition:function(){return X.defaultPosition},getState:function(){return X.state},getMaxSize:function(){return X.maxSize},getScreenSize:function(){return X.screenSize},getLocation:function(){return X.location}},ge={};["unload","playVideo","storePicture","createCalendarEvent","setOrientationProperties"].forEach(function(i){ge[i]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return x.log.apply(x,[i].concat(t))}}),["addEventListener","removeEventListener","open","close","getVersion","supports","getPlacementType","getOrientationProperties","getCurrentAppOrientation","getCurrentPosition","getDefaultPosition","getState","getMaxSize","getScreenSize","getLocation","isViewable"].forEach(function(e){ge[e]=function(){return pe[e].apply(pe,arguments)}});var ve=ge,me=function(e){var t=e.mode,e=e.ready;window.mraid=t===o?ve:pe,fe.init({mode:t,ready:e})},ye="vpaid.callMethod";function Ae(e){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var be=new t(window.parent),we={AdCompanions:"",AdDuration:15,AdExpanded:!1,AdHeight:1,AdIcons:!1,AdLinear:!0,AdRemainingTime:0,AdSkippableState:!1,AdVolume:1,AdWidth:1},Ce={AdLoaded:"AdLoaded",AdStarted:"AdStarted",AdImpression:"AdImpression",AdStopped:"AdStopped",AdSizeChange:"AdSizeChange",AdUserClose:"AdUserClose",AdSkipped:"AdSkipped",AdSkippableStateChange:"AdSkippableStateChange",AdVideoStart:"AdVideoStart",AdVideoFirstQuartile:"AdVideoFirstQuartile",AdVideoMidpoint:"AdVideoMidpoint",AdVideoThirdQuartile:"AdVideoThirdQuartile",AdVideoComplete:"AdVideoComplete",AdError:"AdError",AdLinearChange:"AdLinearChange",AdExpandedChange:"AdExpandedChange",AdRemainingTimeChange:"AdRemainingTimeChange",AdDurationChange:"adDurationChange",AdVolumeChange:"AdVolumeChange",AdUserMinimize:"AdUserMinimize",AdPaused:"AdPaused",AdPlaying:"AdPlaying",AdLog:"AdLog"},Ee={init:function(e){var n=this,e=e.ready;this.readyCallback=void 0===e?null:e,this.vpaidAd=null,Object.keys(we).forEach(function(e){var t="get".concat(e);n[t]=function(){return n.debugLog("".concat(t," -> ").concat(we[e])),n.invokeVpaidGetterInAd(t)}}),be.on(ye,function(e){return n.handleEvent(e)}),G(function(){n.vpaidAd||(n.vpaidAd=window.getVPAIDAd(),n.subscribeToEventsFromAd(),n.preventAutoTrigger([]),n.debug(),n.debugLog("Sending Ready to Delivr"),n.delivrMessenger.send("vpaid.ready"))})},handleEvent:function(e){e=e.meta;e&&e.methodName&&this[e.methodName]&&(this.debugLog("Calling ".concat(e.methodName," with "),e.params),this[e.methodName].apply(this,e.params))},cleanup:function(){var t=this;this.debugLog("CleanUP"),be.off(ye,function(e){return t.handleEvent(e)})},initAd:function(e,t,n,i,r,o){this.invokeVpaidMethodInAd("initAd",arguments),this.autoDispatchEvent(Ce.AdLoaded),this.readyCallback&&this.readyCallback()},startAd:function(){this.invokeVpaidMethodInAd("startAd"),this.autoDispatchEvent(Ce.AdStarted),clearInterval(this.sendStateInterval),this.sendStateInterval=setInterval(this.sendStateOfChangedGetters.bind(this),500)},stopAd:function(){clearInterval(this.sendStateInterval),this.invokeVpaidMethodInAd("stopAd"),this.autoDispatchEvent(Ce.AdStopped)},skipAd:function(){clearInterval(this.sendStateInterval),this.invokeVpaidMethodInAd("skipAd"),this.autoDispatchEvent(Ce.AdSkipped)},resizeAd:function(e,t,n){this.invokeVpaidMethodInAd("resizeAd",arguments),this.sendStateOfChangedGetters(),this.autoDispatchEvent(Ce.AdSizeChange)},pauseAd:function(){this.invokeVpaidMethodInAd("pauseAd"),clearInterval(this.sendStateInterval),this.sendStateOfChangedGetters(),this.autoDispatchEvent(Ce.AdPaused)},resumeAd:function(){this.invokeVpaidMethodInAd("resumeAd"),this.sendStateInterval=setInterval(this.sendStateOfChangedGetters.bind(this),500),this.autoDispatchEvent(Ce.AdPlaying)},expandAd:function(){this.invokeVpaidMethodInAd("expandAd"),this.sendStateOfChangedGetters(),this.autoDispatchEvent(Ce.AdExpandedChange)},collapseAd:function(){this.invokeVpaidMethodInAd("collapseAd"),this.sendStateOfChangedGetters(),this.autoDispatchEvent(Ce.AdExpandedChange)},setAdVolume:function(e){this.invokeVpaidMethodInAd("setAdVolume",[e]),this.sendStateOfChangedGetters(),this.autoDispatchEvent(Ce.AdVolumeChange)},get delivrMessenger(){return be},debugLog:function(e){var t;this.debugConsoleLogsEnabled&&!this.debugLogTemporarilySuppressed&&((t=[].slice.call(arguments)).unshift("[$AD VPAID]"),console.log.apply(console,t))},suppressDebugLog:function(){this.debugLogTemporarilySuppressed=!0},enableDebugLog:function(){this.debugLogTemporarilySuppressed=!1},debug:function(){this.debugConsoleLogsEnabled=!0},debugWarn:function(e){console.warn("[$AD VPAID]",e)},subscribeToEventsFromAd:function(){if("function"==typeof this.vpaidAd.subscribe)for(var e in Ce)Ce.hasOwnProperty(e)&&(e=Ce[e],this.vpaidAd.subscribe(this.handleVPAIDEventFromAd,e,this));else this.debugWarn("Ad did not implement the subscribe() VPAID method. To trigger its own events it must call $AD.vpaid.trigger('Ad...')")},handleVPAIDEventFromAd:function(e){var t;"string"==typeof e?t=e:"object"===Ae(e)&&"string"==typeof e.type&&(t=e.type),Ce.hasOwnProperty(t)&&this.trigger(t)},trigger:function(e){this.debugLog("trigger event",[e]),this.delivrMessenger.send("vpaid.event",{type:e})},invokeVpaidMethodInAd:function(e,t){t?this.debugLog(e,t):this.debugLog(e),"function"==typeof this.vpaidAd[e]?this.vpaidAd[e].apply(this.vpaidAd,t):this.debugWarn("Ad did not implement "+e+"().")},invokeVpaidGetterInAd:function(e){this.debugLog(e);var t=e.substring(3),t=we[t];return"function"==typeof this.vpaidAd[e]?this.vpaidAd[e]():(this.debugWarn("Ad did not implement "+e+"(). Using default of "+t+"."),t)},autoDispatchEvent:function(e){this.isEventPreventedAutoTrigger(e)?this.debugLog("Suppressing autoTriggerEvent",[e]):(this.debugLog("autoTriggerEvent",[e]),this.trigger(e))},preventAutoTrigger:function(e){this.preventedAutoTriggeredEvents=e},getSuppressedEvents:function(){return this.preventedAutoTriggeredEvents},isEventPreventedAutoTrigger:function(e){return 0<=this.preventedAutoTriggeredEvents.indexOf(e)},sendStateOfChangedGetters:function(){var e=this.getStateOfChangedGetters();e&&(this.debugLog("sendStateOfChangedGetters",e),this.delivrMessenger.send("vpaid.syncState",e))},getStateOfChangedGetters:function(){var t,n=this,i=this.getStateOfGetters();return this.previousStateOfGetters?Object.keys(i).forEach(function(e){n.previousStateOfGetters[e]!==i[e]&&((t=t||{})[e]=i[e])}):t=i,this.previousStateOfGetters=i,t},getStateOfGetters:function(){var t=this,n={};return this.suppressDebugLog(),this.vpaidAd.suppressDebugLog&&this.vpaidAd.suppressDebugLog(),Object.keys(we).forEach(function(e){n[e]=t["get".concat(e)]()}),this.enableDebugLog(),this.vpaidAd.enableDebugLog&&this.vpaidAd.enableDebugLog(),n}},Se={init:function(){return this},preventAutoTrigger:function(e){Ee.preventAutoTrigger(e)},getSuppressedEvents:function(){return Ee.getSuppressedEvents()},trigger:function(e){Ee.trigger(e)},stopAd:function(){Ee.stopAd()}},Oe=function(e){var t=e.mode,e=e.ready;return Ee.init({ready:e}),t===o&&(setTimeout(function(){Ee.initAd(window.innerWidth,window.innerHeight,"normal",1200)},1e3),window.addEventListener("resize",function(){Ee.resizeAd(window.innerWidth,window.innerHeight,"normal")})),Se.init()};function Le(){return(Le=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}var ke=new F,Pe=new t(window.parent),Te=0,Ie={get eventDispatcher(){return ke},get delivrMessenger(){return Pe},init:function(e){var t,n=this;switch(S.mode=e.mode,S.mode){case a:G(function(){return n.domLoadHandler()}),Pe.on(E.topic.GLOBAL_RELAY_EVENT,function(e){ke.trigger(new M(e.meta.name,e.meta))}),Pe.on(E.topic.INIT_COMPLETE,function(e){n.setInitState(e.meta)}),Pe.send(E.topic.INIT,{AdAPI:S.AdAPI});break;case o:G(function(){n.domLoadHandler(),z.getDefaults(function(e){var t=S.configuration;t.Creative.content=e;e=window.getVPAIDAd?m:v;n.setInitState({environment:e,container:{id:"placement"},configuration:t}),n.pageLoadTimeoutHandle=setTimeout(function(){ke.trigger(K.LOAD)},1500)})});break;case r:G(function(){return n.domLoadHandler()}),(t=window.parent.$AD).ready(function(){n.setInitState({environment:t.environment,container:t.container,configuration:t.config})})}window.addEventListener("click",this.clickEventHandler)},clickEventHandler:function(){Pe.send(E.topic.QUALIFIED_CLICK)},cleanup:function(){this.pageLoadTimeoutHandle&&clearTimeout(this.pageLoadTimeoutHandle)},setInitState:function(e){var t=this;if(Le(S,e),S.configuration.Creative&&S.configuration.Creative.content&&T.addIndexToCollectionItems(S.configuration.Creative.content),this.adConfigLoadHandler(),S.mode===r)parent.mraid&&(window.mraid=parent.mraid,window.MRAID_ENV=parent.MRAID_ENV),parent.$AD&&parent.$AD.vpaid&&(window.$AD.vpaid=parent.$AD.vpaid),this.environmentReadyHandler();else{var n={mode:S.mode,ready:function(){return t.environmentReadyHandler()}};switch(S.environment){case v:me(n);break;case m:window.$AD.vpaid=Oe(n);break;default:this.environmentReadyHandler()}}},domLoadHandler:function(){S.domLoaded=!0,this.checkIfReady()},adConfigLoadHandler:function(){S.adConfigurationLoaded=!0,this.checkIfReady()},environmentReadyHandler:function(){S.environmentReady=!0,this.checkIfReady()},checkIfReady:function(){S.adConfigurationLoaded&&S.domLoaded&&S.environmentReady&&this.triggerReadyEvent()},queueOrCallReadyCallback:function(e){S.ready?e():S.readyCallbacks.push(e)},callQueuedReadyCallbacks:function(){S.readyCallbacks.forEach(function(e){return e()}),S.readyCallbacks=[]},triggerReadyEvent:function(){S.ready||(S.ready=!0,this.callQueuedReadyCallbacks(),ke.trigger(new M({type:M.READY})))},sendContainerEvent:function(e){var n,i,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=E.topic.CONTAINER_EVENT_COMPLETE;S.mode!==o?((n=Le(e,t)).uid=S.container.id+Te++,n.callback&&(i=n.callback,delete n.callback,e=function e(t){t.meta.uid===n.uid&&(Pe.off(r,e),i(t))},Pe.on(r,e)),Pe.send(E.topic.CONTAINER_EVENT,JSON.parse(JSON.stringify(n)))):t.callback&&setTimeout(function(){t.callback(new E(r,Le({status:"success"},t)))},250)}};function De(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Re(e,t,n){var i=(o=S.configuration).Format.library.config.GENERIC_CLICK_KEY,r=o.Creative.clicks[e]||o.Creative.clicks[i],o=o.Format.library.config.CLICK_URL_PLACEHOLDER;if(r&&r.redirect&&r.redirect.length&&r.redirectCount&&o){for(var a=t,s=e,c=n,d="en=",u=1;u<r.redirectCount;u++)a=encodeURIComponent(a),s=encodeURIComponent(s),c&&(d=encodeURIComponent(d),c=encodeURIComponent(c),r.redirect=r.redirect.replace(d+s,d+c));return r.redirect.replace(o,a).replace(i,c||s)}return t}var Ve=(w=[{key:"start",value:function(){this.startTime=Date.now(),this.sendTimerAction("start")}},{key:"stop",value:function(){var e;this.startTime?(this.sendTimerAction("stop"),this.isInDevMode&&(e=Date.now()-this.startTime,x.log("timer ".concat(this.name),"duration: ".concat(e/1e3," seconds"))),this.startTime=null):x.warn("timer ".concat(this.name),"Timer not started. Please call start() before stop().")}},{key:"sendTimerAction",value:function(e){e={name:this.name,action:e,video:this.video};this.isInDevMode?x.log("timer",e):Ie.delivrMessenger.send(E.topic.TIMER,e)}}],De(Me.prototype,w),Me);function Me(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,Me),this.name=e,this.isInDevMode=t.mode===o,this.video=!!t.video}function _e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function xe(){return(xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function Ne(e,t){e="".concat(this.label,".").concat(e),t=xe({video:!0,interaction:!1},t),je?x.log("event",e,t):Ie.delivrMessenger.send(E.topic.EVENT,{name:e,overrides:t})}var je=!1,ze=(_e(Ge.prototype,[{key:"play",value:function(){Ne.call(this,"play",{interaction:!0})}},{key:"start",value:function(){Ne.call(this,"start",{durationPercentage:0}),this.timer.start()}},{key:"firstQuartile",value:function(){Ne.call(this,"firstQuartile",{durationPercentage:25})}},{key:"midpoint",value:function(){Ne.call(this,"midpoint",{durationPercentage:50})}},{key:"thirdQuartile",value:function(){Ne.call(this,"thirdQuartile",{durationPercentage:75})}},{key:"complete",value:function(){Ne.call(this,"complete",{durationPercentage:100}),this.timer.stop()}},{key:"mute",value:function(){Ne.call(this,"mute")}},{key:"unmute",value:function(){Ne.call(this,"unmute",{interaction:!0})}},{key:"pause",value:function(){Ne.call(this,"pause"),this.timer.stop()}},{key:"resume",value:function(){Ne.call(this,"resume",{interaction:!0}),this.timer.start()}},{key:"replay",value:function(){Ne.call(this,"replay",{interaction:!0})}},{key:"seek",value:function(){Ne.call(this,"seek",{interaction:!0})}},{key:"fullscreen",value:function(){Ne.call(this,"fullscreen",{interaction:!0})}},{key:"skip",value:function(){Ne.call(this,"skip")}}]),Ge),n={get config(){return JSON.parse(JSON.stringify(S.configuration))},get environment(){return S.environment},get container(){return JSON.parse(JSON.stringify(S.container))},get content(){return JSON.parse(JSON.stringify(S.configuration.Creative.content||null))},get geolocation(){return JSON.parse(JSON.stringify(S.configuration.User.geolocation||null))},click:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n="";t.path&&(e=(a=T.evaluateNameAndLabel(e,t)).name,n=a.reportingLabel);var i=t.overrides||{},r=S.configuration.Creative.clicks;-1<(e=T.checkForImpliedContentPrefix(e,r)).toString().indexOf("content.")&&n&&(n="content."+n);var o,a=r[e]||{},r={name:e};n&&n!==e&&(r.reportingLabel=n),i.url&&(r.overrides=i),i&&i.url?o=Re(e,i.url,r.reportingLabel):a.url&&(o=Re(e,a.url,r.reportingLabel));i=a.target||i.target||t.target||"_blank";S.environment===v&&(r.url=t.url),Ie.delivrMessenger.send(E.topic.CLICK,r),S.environment!==v&&o&&0<o.length&&window.open(o,i)},close:function(e){var t={name:g,state:d,container:{id:c}};Ie.sendContainerEvent(t,e)},contract:function(){var e={name:h,state:d,container:{id:S.container.id||s}};Ie.sendContainerEvent(e,0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})},event:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n="";t.path&&(e=(i=T.evaluateNameAndLabel(e,t)).name,n=i.reportingLabel);var i=S.configuration.Creative.events;-1<(e=T.checkForImpliedContentPrefix(e,i)).toString().indexOf("content.")&&n&&(n="content."+n);i={name:e};n&&n!==e&&(i.reportingLabel=n),t.overrides&&(i.overrides=t.overrides),t.suppressTracking&&(i.suppressTracking=!0),t.global&&(i.global=!0),t.meta&&(i.meta=t.meta),Ie.delivrMessenger.send(E.topic.EVENT,i)},expand:function(){var e={name:l,state:u,container:{id:S.container.id||s}};Ie.sendContainerEvent(e,0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})},off:function(e,t){Ie.eventDispatcher.off(e,t)},on:function(e,t){Ie.eventDispatcher.on(e,t)},ready:function(e){Ie.queueOrCallReadyCallback(e)},show:function(){var e={name:f,state:d,container:{id:c}};Ie.sendContainerEvent(e,0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})},hide:function(){var e={name:p,state:d,container:{id:c}};Ie.sendContainerEvent(e,0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})},getTimer:function(e){return new Ve(e,{mode:S.mode})},getVideoLogger:function(e){return new ze(e)}};function Ge(e,t){!function(e){if(!(e instanceof Ge))throw new TypeError("Cannot call a class as a function")}(this),this.label=e?"".concat(e,".video"):"video",this.timer=new Ve(this.label,{video:!0}),je=t}n.collapse=n.contract;var He=n,Fe={get config(){return He.config},get environment(){return He.environment},get container(){return He.container},get content(){return He.content},get geolocation(){return He.geolocation},click:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};t.path&&(e=T.evaluateName(e,t));var n=t.overrides||{},i=n.url||t.url;if(!n.url&&t.path)try{var r=T.get(S.configuration.Creative.content,e);r&&r.url&&(i=r.url)}catch(t){return void x.warn("click","path not found:"+e)}i&&0<i.length&&window.open(i,"_blank"),x.log("click",t)},getVideoLogger:function(e){return new ze(e,!0)}};["close","collapse","contract","event","expand","hide","show"].forEach(function(i){Fe[i]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return x.log.apply(x,[i].concat(t))}}),["getTimer","off","on","ready"].forEach(function(e){Fe[e]=function(){return He[e].apply(He,arguments)}});t=Fe,w=window===window.parent?o:a,n=document.querySelector('meta[name="ad.frame"]');w!==o&&n&&"child"===n.getAttribute("content")&&(w=r),window.$AD=w===r?function(){var t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:window.parent).$AD,n={ready:He.ready,get config(){return t.config},get environment(){return t.environment},get container(){return t.container},get content(){return t.content},get geolocation(){return t.geolocation}};return["click","close","contract","collapse","event","expand","off","on","show","hide","getTimer","getVideoLogger"].forEach(function(e){return n[e]=t[e]}),n}():w===o?t:He,Ie.init({mode:w})}]);
