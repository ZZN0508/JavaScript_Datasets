(window.QJP=window.QJP||[]).push([["grader"],{KvL4:function(e,t,n){var r;n("JfAA"),n("4mDm"),n("3bBZ"),r=[t,n("cW0E"),n("uV3b"),n("jGfb"),n("ZzqC")],void 0===(n="function"==typeof(n=function(e,g,t,n,r){"use strict";var i=g.Kind.CLASS,u=g.kotlin.Pair,o=g.Kind.INTERFACE,s=g.kotlin.Triple,a=g.equals,l=g.Kind.OBJECT,d=g.throwCCE,c=g.kotlin.toList_z6mquf$,p=g.kotlin.collections.copyToArray,h=t.kotlinx.serialization.internal.PluginGeneratedSerialDescriptor,f=t.kotlinx.serialization.UnknownFieldException,m=t.kotlinx.serialization.internal,_=t.kotlinx.serialization.internal.GeneratedSerializer,v=g.kotlin.collections.setOf_i5x0yv$,S=g.kotlin.collections.union_q4559j$,$=g.kotlin.text.RegexOption,w=g.kotlin.text.Regex_init_61zpoe$,y=g.kotlin.text.Regex_init_sb3q2$,A=t.kotlinx.serialization.internal.NullableSerializer,b=t.kotlinx.serialization.MissingFieldException_init_61zpoe$,C=g.kotlin.Enum,x=g.throwISE,P=g.defineInlineFunction,t=g.wrapFunction,N=g.kotlin.collections.ArrayList_init_ww73n8$,E=g.ensureNotNull,z=g.kotlin.to_ujzrz7$,O=g.getCallableRef,k=g.kotlin.collections.sorted_exjks8$,R=g.kotlin.collections.collectionSizeOrDefault_ba2ldo$,I=g.kotlin.text.trim_gw00vp$,T=g.kotlin.collections.ArrayList_init_287e2$,q=n,L=r.text.removeTextInParentheses_61zpoe$,F=g.kotlin.collections.joinToString_fmv235$,j=g.kotlin.sequences.count_veqyi0$,G=g.kotlin.sequences.map_z5avom$,W=g.kotlin.sequences.toList_veqyi0$,M=r.text.levenshtein_puj7f4$,D=g.kotlin.collections.firstOrNull_2p1efm$,n=g.toBoxedChar,r=g.kotlin.collections.mapOf_qfcya0$,B=g.kotlin.text.toList_gw00vp$,U=g.unboxChar,J=g.kotlin.text.StringBuilder_init_za3lpa$,V=g.kotlin.Error_init_pdl1vj$;function K(e){this.rules_0=e}function H(n){return function(e,t){return new u(n(e),n(t))}}function Q(e,t,n,r){void 0===n&&(n=null),this.name=e=void 0===e?null:e,this.condition=t,this.conditionalSetting=n,this.transform=r}function Z(e,t,n,r,i){return void 0===e&&(e=null),void 0===t&&(t=!0),void 0===n&&(n=null),void 0===r&&(r=et().DO_NOTHING_TRANSFORM),i=i||Object.create(Q.prototype),Q.call(i,e,Qe().toCondition_1v8dcc$(t),n,r),i}function Y(e,t,n,r,i){return void 0===e&&(e=null),void 0===n&&(n=null),i=i||Object.create(Q.prototype),Q.call(i,e,t,n,H(r)),i}function X(e,t,n,r,i){return void 0===e&&(e=null),void 0===t&&(t=!0),void 0===n&&(n=null),i=i||Object.create(Q.prototype),Q.call(i,e,Qe().toCondition_1v8dcc$(t),n,H(r)),i}function ee(e,t){this.isCorrect=e,this.suggestion=t}function te(){}function ne(e,t,n,r){oe(),void 0===t&&(t="en"),void 0===n&&(n="en"),void 0===r&&(r=[]),this.name=e,this.answerLanguage=t,this.promptLanguage=n,this.clauses=r}function re(){ie=this}g.kotlin.collections.toList_abgq59$,g.kotlin.js.json_pyyo18$,(ze.prototype=Object.create(C.prototype)).constructor=ze,(je.prototype=Object.create(C.prototype)).constructor=je,K.prototype.grade_ley05m$=function(e,t,n){return this.gradeWithSuggestions_ley05m$(e,t,n).isCorrect},K.prototype.gradeWithSuggestions_ley05m$=function(e,t,n){return this.evaluateRules_0(this.preProcess_0(e),this.preProcess_0(t),n)},K.prototype.preProcess_0=function(e){return vn(_n(e))},K.prototype.evaluateRules_0=function(e,t,n){for(var r=null,i=this.rules_0,o=0;o!==i.length;++o){var a=i[o].matchResult(e,t,n);if(a.isCorrect)return a;r=null!=(a=a.suggestion)?a:r}return new ee(!1,r)},K.$metadata$={kind:i,simpleName:"Grader",interfaces:[]},Q.prototype.isSettingEnabled_rz2xda$=function(e){return null==this.conditionalSetting||e.isGradingSettingEnabled_hg5hv4$(this.conditionalSetting)},Q.$metadata$={kind:i,simpleName:"GradingClause",interfaces:[]},ee.$metadata$={kind:i,simpleName:"GradingResult",interfaces:[]},te.$metadata$={kind:o,simpleName:"IGradingRule",interfaces:[]},re.prototype.applyClause_hnyuv8$=function(e,t,n){var r=t.component1(),i=t.component2(),o=e.condition(r,i,n)?e.transform(r,i):new u(r,i),a=o.component1(),t=o.component2(),o=this.checkForGradingSuggestion_0(e,r,i,a,t,n);return e.isSettingEnabled_rz2xda$(n)||(a=r,t=i),new s(a,t,o)},re.prototype.checkForGradingSuggestion_0=function(e,t,n,r,i,o){return null!=e.conditionalSetting&&!a(t,n)&&a(r,i)?kn((e.isSettingEnabled_rz2xda$(o)?Me:We)(),e.conditionalSetting):null},re.$metadata$={kind:l,simpleName:"Companion",interfaces:[]};var ie=null;function oe(){return null===ie&&new re,ie}function ae(e,t){ue(),void 0===t&&(t=!1),this.acceptsPartialAnswer=e=void 0===e?!1:e,this.levenshteinPlus=t}function se(){le=this}ne.prototype.appendClause_604tbm$=function(e){return this.appendClauses_p1oe23$([e])},ne.prototype.appendClauses_p1oe23$=function(e){return new ne(this.name,this.answerLanguage,this.promptLanguage,this.clauses.concat(e))},ne.prototype.copyWithPrefixes_p1oe23$=function(e){return new ne("(Prefixed) "+this.name,this.answerLanguage,this.promptLanguage,e.concat(this.clauses))},ne.prototype.isMatch=function(e,t,n){return this.matchResult(e,t,n).isCorrect},ne.prototype.matchResult=function(e,t,n){n=new $e(this.answerLanguage,this.promptLanguage,"",new ae).merge_pq2uh7$(n);return this.evaluateClauses_0(e,t,n)},ne.prototype.applyClauses_ley05m$=function(e,t,n){for(var r=this.clauses,i=new s(e,t,null==null||g.isType(null,On)?null:d()),o=0;o!==r.length;++o)i=function(i){return function(e,t){var n=oe().applyClause_hnyuv8$(t,e,i),r=n.component1(),t=n.component2(),n=n.component3();return new s(r,t,null!=(e=e.third)?e:n)}}(n)(i,r[o]);return i},ne.prototype.applyClausesAsArray=function(e,t,n){return p(c(this.applyClauses_ley05m$(e,t,n)))},ne.prototype.evaluateClauses_0=function(e,t,n){e=this.applyClauses_ley05m$(e,t,n),t=e.component1(),n=e.component2(),e=e.component3();return new ee(a(t,n),e)},ne.$metadata$={kind:i,simpleName:"GradingRule",interfaces:[te]},ae.prototype.isGradingSettingEnabled_44pqz7$=function(e){var t;switch(e.name){case"ACCEPT_PARTIAL_ANSWERS":t=this.acceptsPartialAnswer;break;case"LEVENSHTEIN_PLUS":t=this.levenshteinPlus;break;default:t=g.noWhenBranchMatched()}return t},ae.prototype.merge_3tm35q$=function(e){return new ae(this.acceptsPartialAnswer||e.acceptsPartialAnswer,this.levenshteinPlus||e.levenshteinPlus)},se.prototype.serializer=fe,se.$metadata$={kind:l,simpleName:"Companion",interfaces:[]};var le=null;function ue(){return null===le&&new se,le}function ce(){this.descriptor_x4rrpj$_0=new h("grading.core.GradingSettings",this,2),this.descriptor.addElement_ivxn3r$("acceptsPartialAnswer",!0),this.descriptor.addElement_ivxn3r$("levenshteinPlus",!0),de=this}Object.defineProperty(ce.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_x4rrpj$_0}}),ce.prototype.serialize_55azsf$=function(e,t){e=e.beginStructure_24f42q$(this.descriptor);a(t.acceptsPartialAnswer,!1)&&!e.shouldEncodeElementDefault_szpzho$(this.descriptor,0)||e.encodeBooleanElement_qh7jdn$(this.descriptor,0,t.acceptsPartialAnswer),a(t.levenshteinPlus,!1)&&!e.shouldEncodeElementDefault_szpzho$(this.descriptor,1)||e.encodeBooleanElement_qh7jdn$(this.descriptor,1,t.levenshteinPlus),e.endStructure_24f42q$(this.descriptor)},ce.prototype.deserialize_bq71mq$=function(e){var t,n,r,i=0,o=e.beginStructure_24f42q$(this.descriptor);e:for(;;)switch(t=o.decodeElementIndex_24f42q$(this.descriptor)){case 0:n=o.decodeBooleanElement_szpzho$(this.descriptor,0),i|=1;break;case 1:r=o.decodeBooleanElement_szpzho$(this.descriptor,1),i|=2;break;case-1:break e;default:throw new f(t)}return o.endStructure_24f42q$(this.descriptor),me(i,n,r,null)},ce.prototype.childSerializers=function(){return[m.BooleanSerializer,m.BooleanSerializer]},ce.$metadata$={kind:l,simpleName:"$serializer",interfaces:[_]};var pe,he,ge,de=null;function fe(){return null===de&&new ce,de}function me(e,t,n,r){r=r||Object.create(ae.prototype);return r.acceptsPartialAnswer=0!=(1&e)&&t,r.levenshteinPlus=0!=(2&e)&&n,r}function _e(){(ve=this).whitespaceRegex=w("[\\s\\uFEFF\\xA0\\u3000\\u200B-\\u200D]+"),this.punctuationRegex=w('[.,;!Â¿#$/:\\[\\]_\\\\"Â¡]'),this.markdownMatcher=w("\\*([^*]+)\\*"),this.trimRegex=w("^[\\s\\uFEFF\\xA0\\u3000\\u200B-\\u200D]+|[\\s\\uFEFF\\u0240\\u3000\\u200B-\\u200D]+$"),this.infixSpacedDashesRegex=w("(\\s+-+\\s+)"),this.parensRegex=w("[()]"),this.parensAndBracketsRegex=w("[(\\[)\\]]"),this.fragmentSeparatorRegex=w("[,;/]"),this.plusAmpersandRegex=w("([+&])"),this.englishArticleWithSpace=y("^(the|a|an) ",$.IGNORE_CASE),this.frenchArticlesWithSpace=y("^(la|une|un|le) ",$.IGNORE_CASE),this.spanishArticlesWithSpace=y("^(una|la|un|el) ",$.IGNORE_CASE),this.frenchSwappableArticles=[y("^(la|une) ",$.IGNORE_CASE),y("^(le|un) ",$.IGNORE_CASE)],this.spanishSwappableArticles=[y("^(el|un) ",$.IGNORE_CASE),y("^(la|una) ",$.IGNORE_CASE)],this.germanSharpSRegex=w("ÃŸ"),this.spaceDashRegex=w("\\s-"),this.dashSpaceRegex=w("-\\s"),this.spaceEqualsRegex=w("\\s="),this.equalsSpaceRegex=w("=\\s"),this.numbersRegex=w("\\d+"),this.leadingDashRegex=w("(?!\\b)-\\b"),this.trailingDashRegex=w("\\b-(?!\\b)")}ae.$metadata$={kind:i,simpleName:"GradingSettings",interfaces:[]},ae.prototype.component1=function(){return this.acceptsPartialAnswer},ae.prototype.component2=function(){return this.levenshteinPlus},ae.prototype.copy_dqye30$=function(e,t){return new ae(void 0===e?this.acceptsPartialAnswer:e,void 0===t?this.levenshteinPlus:t)},ae.prototype.toString=function(){return"GradingSettings(acceptsPartialAnswer="+g.toString(this.acceptsPartialAnswer)+", levenshteinPlus="+g.toString(this.levenshteinPlus)+")"},ae.prototype.hashCode=function(){return 31*(0+g.hashCode(this.acceptsPartialAnswer)|0)+g.hashCode(this.levenshteinPlus)|0},ae.prototype.equals=function(e){return this===e||null!==e&&"object"==typeof e&&Object.getPrototypeOf(this)===Object.getPrototypeOf(e)&&g.equals(this.acceptsPartialAnswer,e.acceptsPartialAnswer)&&g.equals(this.levenshteinPlus,e.levenshteinPlus)},_e.$metadata$={kind:l,simpleName:"RegexDefinitions",interfaces:[]};var ve=null;function Se(){return null===ve&&new _e,ve}function $e(e,t,n,r){Ae(),this.answerLanguage=e,this.promptLanguage=t,this.promptText=n,this.gradingSettings_0=r}function we(){ye=this}$e.prototype.merge_pq2uh7$=function(e){return new $e((0===e.answerLanguage.length?this:e).answerLanguage,(null==e.promptLanguage||0===e.promptLanguage.length?this:e).promptLanguage,(null==e.promptText||0===e.promptText.length?this:e).promptText,this.gradingSettings_0.merge_3tm35q$(e.gradingSettings_0))},$e.prototype.isGradingSettingEnabled_hg5hv4$=function(e){return this.gradingSettings_0.isGradingSettingEnabled_44pqz7$(e)},we.prototype.serializer=Ne,we.$metadata$={kind:l,simpleName:"Companion",interfaces:[]};var ye=null;function Ae(){return null===ye&&new we,ye}function be(){this.descriptor_5x2ib$_0=new h("grading.core.SubmissionContext",this,4),this.descriptor.addElement_ivxn3r$("answerLanguage",!1),this.descriptor.addElement_ivxn3r$("promptLanguage",!1),this.descriptor.addElement_ivxn3r$("promptText",!1),this.descriptor.addElement_ivxn3r$("gradingSettings",!1),Pe=this}Object.defineProperty(be.prototype,"descriptor",{configurable:!0,get:function(){return this.descriptor_5x2ib$_0}}),be.prototype.serialize_55azsf$=function(e,t){e=e.beginStructure_24f42q$(this.descriptor);e.encodeStringElement_iij8qq$(this.descriptor,0,t.answerLanguage),e.encodeNullableSerializableElement_qw92s8$(this.descriptor,1,m.StringSerializer,t.promptLanguage),e.encodeNullableSerializableElement_qw92s8$(this.descriptor,2,m.StringSerializer,t.promptText),e.encodeSerializableElement_r4qlx7$(this.descriptor,3,fe(),t.gradingSettings_0),e.endStructure_24f42q$(this.descriptor)},be.prototype.deserialize_bq71mq$=function(e){var t,n,r,i,o,a=0,s=e.beginStructure_24f42q$(this.descriptor);e:for(;;)switch(t=s.decodeElementIndex_24f42q$(this.descriptor)){case 0:n=s.decodeStringElement_szpzho$(this.descriptor,0),a|=1;break;case 1:r=s.decodeNullableSerializableElement_8viuyw$(this.descriptor,1,m.StringSerializer,r),a|=2;break;case 2:i=s.decodeNullableSerializableElement_8viuyw$(this.descriptor,2,m.StringSerializer,i),a|=4;break;case 3:o=s.decodeSerializableElement_12e8id$(this.descriptor,3,fe(),o),a|=8;break;case-1:break e;default:throw new f(t)}return s.endStructure_24f42q$(this.descriptor),Ee(a,n,r,i,o,null)},be.prototype.childSerializers=function(){return[m.StringSerializer,new A(m.StringSerializer),new A(m.StringSerializer),fe()]},be.$metadata$={kind:l,simpleName:"$serializer",interfaces:[_]};var Ce,xe,Pe=null;function Ne(){return null===Pe&&new be,Pe}function Ee(e,t,n,r,i,o){o=o||Object.create($e.prototype);if(0==(1&e))throw b("answerLanguage");if(o.answerLanguage=t,0==(2&e))throw b("promptLanguage");if(o.promptLanguage=n,0==(4&e))throw b("promptText");if(o.promptText=r,0==(8&e))throw b("gradingSettings");return o.gradingSettings_0=i,o}function ze(e,t,n){C.call(this),this.value=n,this.name$=e,this.ordinal$=t}function Oe(){Oe=function(){},Ce=new ze("ACCEPT_PARTIAL_ANSWERS",0,"accept_partial_answers"),xe=new ze("LEVENSHTEIN_PLUS",1,"levenshtein_plus"),Fe()}function ke(){return Oe(),Ce}function Re(){return Oe(),xe}function Ie(){Le=this}$e.$metadata$={kind:i,simpleName:"SubmissionContext",interfaces:[]},$e.prototype.component1=function(){return this.answerLanguage},$e.prototype.component2=function(){return this.promptLanguage},$e.prototype.component3=function(){return this.promptText},$e.prototype.component4_0=function(){return this.gradingSettings_0},$e.prototype.copy_k5f9hs$=function(e,t,n,r){return new $e(void 0===e?this.answerLanguage:e,void 0===t?this.promptLanguage:t,void 0===n?this.promptText:n,void 0===r?this.gradingSettings_0:r)},$e.prototype.toString=function(){return"SubmissionContext(answerLanguage="+g.toString(this.answerLanguage)+", promptLanguage="+g.toString(this.promptLanguage)+", promptText="+g.toString(this.promptText)+", gradingSettings="+g.toString(this.gradingSettings_0)+")"},$e.prototype.hashCode=function(){return 31*(31*(31*(0+g.hashCode(this.answerLanguage)|0)+g.hashCode(this.promptLanguage)|0)+g.hashCode(this.promptText)|0)+g.hashCode(this.gradingSettings_0)|0},$e.prototype.equals=function(e){return this===e||null!==e&&"object"==typeof e&&Object.getPrototypeOf(this)===Object.getPrototypeOf(e)&&g.equals(this.answerLanguage,e.answerLanguage)&&g.equals(this.promptLanguage,e.promptLanguage)&&g.equals(this.promptText,e.promptText)&&g.equals(this.gradingSettings_0,e.gradingSettings_0)},Ie.prototype.fromValue_pdl1vj$=function(e){var t,n=ze.values();e:do{for(var r=0;r!==n.length;++r){var i=n[r];if(a(i.value,e)){t=i;break e}}}while(t=null,0);return t},Ie.$metadata$={kind:l,simpleName:"Companion",interfaces:[]};var Te,qe,Le=null;function Fe(){return Oe(),null===Le&&new Ie,Le}function je(e,t,n){C.call(this),this.value=n,this.name$=e,this.ordinal$=t}function Ge(){Ge=function(){},Te=new je("ENABLE_ONE_TO_MAKE_ANSWER_CORRECT",0,"enable_one_to_make_answer_correct"),qe=new je("DISABLE_ONE_TO_MAKE_ANSWER_INCORRECT",1,"disable_one_to_make_answer_incorrect"),Ue()}function We(){return Ge(),Te}function Me(){return Ge(),qe}function De(){Be=this}ze.$metadata$={kind:i,simpleName:"GradingSetting",interfaces:[C]},ze.values=function(){return[ke(),Re()]},ze.valueOf_61zpoe$=function(e){switch(e){case"ACCEPT_PARTIAL_ANSWERS":return ke();case"LEVENSHTEIN_PLUS":return Re();default:x("No enum constant grading.core.enums.GradingSetting."+e)}},De.prototype.fromValue_pdl1vj$=function(e){var t,n=je.values();e:do{for(var r=0;r!==n.length;++r){var i=n[r];if(a(i.value,e)){t=i;break e}}}while(t=null,0);return t},De.$metadata$={kind:l,simpleName:"Companion",interfaces:[]};var Be=null;function Ue(){return Ge(),null===Be&&new De,Be}function Je(){(He=this).TRUE_CONDITION_0=Ve,this.FALSE_CONDITION_0=Ke}function Ve(e,t,n){return!0}function Ke(e,t,n){return!1}je.$metadata$={kind:i,simpleName:"GradingSettingsSuggestionAction",interfaces:[C]},je.values=function(){return[We(),Me()]},je.valueOf_61zpoe$=function(e){switch(e){case"ENABLE_ONE_TO_MAKE_ANSWER_CORRECT":return We();case"DISABLE_ONE_TO_MAKE_ANSWER_INCORRECT":return Me();default:x("No enum constant grading.core.enums.GradingSettingsSuggestionAction."+e)}},Je.prototype.toCondition_1v8dcc$=function(e){return e?this.TRUE_CONDITION_0:this.FALSE_CONDITION_0},Je.prototype.negate_g7xbko$=P("quizlet-shared-kotlin-grader.grading.core.utils.Conditions.negate_g7xbko$",t(function(){return function(e){return r=e,function(e,t,n){return!r(e,t,n)};var r}})),Je.$metadata$={kind:l,simpleName:"Conditions",interfaces:[]};var He=null;function Qe(){return null===He&&new Je,He}function Ze(){(Xe=this).DO_NOTHING_TRANSFORM=Ye}function Ye(e,t){return new u(e,t)}Ze.prototype.combineTransforms_r6n7ug$=P("quizlet-shared-kotlin-grader.grading.core.utils.Transforms.combineTransforms_r6n7ug$",t(function(){var s=g.kotlin.Pair;return function(e){return a=e,function(e,t){for(var n=a,r=new s(e,t),i=0;i!==n.length;++i)var o=r,r=(0,n[i])(o.component1(),o.component2());return r};var a}})),Ze.prototype.combine_vvdkw4$=P("quizlet-shared-kotlin-grader.grading.core.utils.Transforms.combine_vvdkw4$",t(function(){var s=g.kotlin.Pair;return function(e){return a=e.slice(),function(e,t){for(var n=a,r=new s(e,t),i=0;i!==n.length;++i)var o=r,r=(0,n[i])(o.component1(),o.component2());return r};var a}})),Ze.prototype.toTransform_owibzl$=P("quizlet-shared-kotlin-grader.grading.core.utils.Transforms.toTransform_owibzl$",t(function(){var r=g.kotlin.Pair;return function(e){return n=e,function(e,t){return new r(n(e),n(t))};var n}})),Ze.prototype.lambdaToTransform_v9wleo$=P("quizlet-shared-kotlin-grader.grading.core.utils.Transforms.lambdaToTransform_v9wleo$",t(function(){var r=g.kotlin.Pair;return function(e){return n=e,function(e,t){return new r(n(e),n(t))};var n}})),Ze.$metadata$={kind:l,simpleName:"Transforms",interfaces:[]};var Xe=null;function et(){return null===Xe&&new Ze,Xe}function tt(){nt=this;var e=[At().AlwaysStripMarkdownClause,At().AlwaysUnicodeNormalizeCharactersClause,At().AlwaysNormalizeSimilarCharactersClause],t=At().IgnoreForeignLangArticlesClauses;this.learningModeClauses_0=e.concat(t)}tt.prototype.create=function(){for(var e=gn().rules,t=N(e.length),n=0;n!==e.length;++n){var r=e[n];t.add_11rb$(r.copyWithPrefixes_p1oe23$(this.learningModeClauses_0.slice()))}return new K(p(t))},tt.$metadata$={kind:l,simpleName:"GraderFactory",interfaces:[]};var nt=null;function rt(){return null===nt&&new tt,nt}function it(a){return function(e,t){for(var n=a,r=new u(e,t),i=0;i!==n.length;++i)var o=r,r=(0,n[i])(o.component1(),o.component2());return r}}function ot(r){return function(e,t,n){return!r(e,t,n)}}function at(){var e,n,r,s,l,i;(yt=this).AlwaysStripMarkdownClause=X("AlwaysStripMarkdownClause",!0,void 0,O("stripMarkdown",vn)),this.CorrectOrderMismatchClause=new Q("Reorder fragments if they match answer fragments",kt().isAnswerInDifferentOrder,void 0,Yt().transformUserInputIntoAnswer),this.AlwaysUnicodeNormalizeCharactersClause=Z("AlwaysUnicodeNormalizeCharactersClause",!0,void 0,(i=st,function(e,t){return new u(i(e),i(t))})),this.AlwaysNormalizeSimilarCharactersClause=X("AlwaysNormalizeSimilarCharactersClause",!0,void 0,O("normalizeSimilarCharacters",_n)),this.NormalizeSharpSInAnswerForGerman=Y("NormalizeSharpSInAnswerForGerman",lt,void 0,ut),this.NoArticleOnEnglishPromptForFrench=new Q("NoArticleOnEnglishPromptForFrench",ct,void 0,(l=this,function(e,t){var n,r=Se().frenchSwappableArticles;e:do{for(var i=0;i!==r.length;++i){var o=r[i];if(o.containsMatchIn_6bul2c$(e)&&o.containsMatchIn_6bul2c$(t)){n=o;break e}}}while(n=null,0);var a=n;return null!=a?l.swapParts_0(a,e,t):z(e,t)})),this.NoArticleOnEnglishPromptForSpanish=new Q("NoArticleOnEnglishPromptForSpanish",pt,void 0,(s=this,function(e,t){var n,r=Se().spanishSwappableArticles;e:do{for(var i=0;i!==r.length;++i){var o=r[i];if(o.containsMatchIn_6bul2c$(e)&&o.containsMatchIn_6bul2c$(t)){n=o;break e}}}while(n=null,0);var a=n;return null!=a?s.swapParts_0(a,e,t):z(e,t)})),this.NoArticleOnEnglishAnswerForFrench=Y("NoArticleOnEnglishAnswerForFrench",ht,void 0,gt),this.NoArticleOnEnglishAnswerForSpanish=new Q("NoArticleOnEnglishAnswerForSpanish",dt,void 0,ft),this.NoArticleOnFrenchPrompt=new Q("NoArticleOnFrenchPrompt",mt,void 0,(r=this,function(e,t){return r.swapParts_0(Se().englishArticleWithSpace,e,t)})),this.NoArticleOnSpanishPrompt=new Q("NoArticleOnSpanishPrompt",_t,void 0,(n=this,function(e,t){return n.swapParts_0(Se().englishArticleWithSpace,e,t)})),this.NoArticlesAnywhereForFrench=new Q("NoArticlesAnywhereForFrench",vt,void 0,St),this.NoArticlesAnywhereForSpanish=new Q("NoArticlesAnywhereForSpanish",$t,void 0,wt),this.IgnoreForeignLangArticlesClauses=[this.NoArticleOnEnglishPromptForFrench,this.NoArticleOnEnglishPromptForSpanish,this.NoArticleOnEnglishAnswerForFrench,this.NoArticleOnEnglishAnswerForSpanish,this.NoArticleOnFrenchPrompt,this.NoArticleOnSpanishPrompt,this.NoArticlesAnywhereForFrench,this.NoArticlesAnywhereForSpanish],e=ke(),this.FillInMissingPartialAnswersClause=new Q("Insert missing answer fragments",kt().isSubsetOfCorrectAnswer,e,Yt().transformUserInputIntoAnswer),this.baseNonScientificContentTransform_0=it([Yt().normalizePlusAndAmpersand,Yt().removeTrailingDashes,Yt().removeInfixSpacedDashes]),this.NonScientificParenStrippingClause=new Q("Normalize and remove irrelevant characters, including parentheses",ot(kt().isScientific),void 0,it([this.baseNonScientificContentTransform_0,Yt().removeParens])),this.NonScientificParenAndContentStrippingClause=new Q("Normalize and remove irrelevant characters, including parentheses and content in parentheses",ot(kt().isScientific),void 0,it([this.baseNonScientificContentTransform_0,Yt().removeParensAndContents,Yt().removeParens]))}function st(e){return Rn(e)}function lt(e,t,n){return a(n.answerLanguage,"de")}function ut(e){return Se().germanSharpSRegex.replace_x2uqeu$(e,"ss")}function ct(e,t,n){var r=n.component1(),i=n.component2(),n=n.component3();return a(i,"en")&&a(r,"fr")&&!dn(Se().englishArticleWithSpace,n)}function pt(e,t,n){var r=n.component1(),i=n.component2();return n.component3(),a(i,"en")&&a(r,"es")&&!Se().englishArticleWithSpace.containsMatchIn_6bul2c$(e)}function ht(e,t,n){var r=n.component1(),i=n.component2(),n=n.component3();return a(i,"fr")&&a(r,"en")&&dn(Se().frenchArticlesWithSpace,n)&&Se().englishArticleWithSpace.containsMatchIn_6bul2c$(t)&&!Se().englishArticleWithSpace.containsMatchIn_6bul2c$(e)}function gt(e){return Se().englishArticleWithSpace.replace_x2uqeu$(e," ")}function dt(e,t,n){var r=n.component1(),i=n.component2(),n=n.component3();return a(i,"es")&&a(r,"en")&&dn(Se().spanishArticlesWithSpace,n)&&Se().englishArticleWithSpace.containsMatchIn_6bul2c$(t)&&!Se().englishArticleWithSpace.containsMatchIn_6bul2c$(e)}function ft(e,t){return z(e,Se().englishArticleWithSpace.replace_x2uqeu$(t," "))}function mt(e,t,n){var r=n.component1(),i=n.component2(),n=n.component3(),t=Se().englishArticleWithSpace.find_905azu$(t),e=Se().englishArticleWithSpace.find_905azu$(e);return a(i,"fr")&&a(r,"en")&&!dn(Se().frenchArticlesWithSpace,n)&&null!=t&&null!=e&&!a(t.groups.get_za3lpa$(1),e.groups.get_za3lpa$(1))}function _t(e,t,n){var r=n.component1(),i=n.component2(),n=n.component3(),t=Se().englishArticleWithSpace.find_905azu$(t),e=Se().englishArticleWithSpace.find_905azu$(e);return a(i,"es")&&a(r,"en")&&!dn(Se().spanishArticlesWithSpace,n)&&null!=t&&null!=e&&!a(t.groups.get_za3lpa$(1),e.groups.get_za3lpa$(1))}function vt(e,t,n){var r=n.component1(),i=n.component2(),n=n.component3();return a(i,"fr")&&a(r,"en")&&!dn(Se().frenchArticlesWithSpace,n)&&Se().englishArticleWithSpace.containsMatchIn_6bul2c$(t)&&!Se().englishArticleWithSpace.containsMatchIn_6bul2c$(e)}function St(e,t){return z(e,Se().englishArticleWithSpace.replace_x2uqeu$(t,""))}function $t(e,t,n){var r=n.component1(),i=n.component2(),n=n.component3();return a(i,"es")&&a(r,"en")&&!dn(Se().spanishArticlesWithSpace,n)&&Se().englishArticleWithSpace.containsMatchIn_6bul2c$(t)&&!Se().englishArticleWithSpace.containsMatchIn_6bul2c$(e)}function wt(e,t){return z(e,Se().englishArticleWithSpace.replace_x2uqeu$(t,""))}at.prototype.swapParts_0=function(e,t,n){var r=E(fn(t,e)),r=e.replace_x2uqeu$(n,r);return z(t,r)},at.$metadata$={kind:l,simpleName:"ClauseImpls",interfaces:[]};var yt=null;function At(){return null===yt&&new at,yt}function bt(){var r,i;(Ot=this).isCaseSensitive=Ct,this.isWhitespaceInsensitive=xt,this.isScientific=Pt,this.containsParens=Nt,this.isPinyin=Et,this.hasAnswerFragments=zt,this.isAnswerInDifferentOrder=(i=this,function(e,t,n){e=i.getAnswerFragments_0(e),t=i.getAnswerFragments_0(t);return!t.isEmpty()&&a(k(e),k(t))}),this.isSubsetOfCorrectAnswer=(r=this,function(e,t,n){e=r.getAnswerFragments_0(e),t=r.getAnswerFragments_0(t);return!t.isEmpty()&&e.containsAll_brywnq$(t)})}function Ct(e,t,n){n=n.component1();return pe.contains_11rb$(n)}function xt(e,t,n){n=n.component1();return ge.contains_11rb$(n)}function Pt(e,t,n){n=n.component1();return he.contains_11rb$(n)}function Nt(e,t,n){return Se().parensAndBracketsRegex.containsMatchIn_6bul2c$(e)||Se().parensAndBracketsRegex.containsMatchIn_6bul2c$(t)}function Et(e,t,n){n=n.component1();return a(n,"zh-pi")}function zt(e,t,n){return Se().fragmentSeparatorRegex.containsMatchIn_6bul2c$(e)||Se().fragmentSeparatorRegex.containsMatchIn_6bul2c$(t)}bt.prototype.getAnswerFragments_0=function(e){for(var e=Se().fragmentSeparatorRegex.split_905azu$(e,0),t=N(R(e,10)),n=e.iterator();n.hasNext();){var r=n.next();t.add_11rb$($n(r))}for(var i=N(R(t,10)),o=t.iterator();o.hasNext();){var a=o.next();i.add_11rb$(I(g.isCharSequence(a=a)?a:d()).toString())}for(var s=N(R(i,10)),l=i.iterator();l.hasNext();){var u=l.next();s.add_11rb$(wn(u))}for(var c=T(),p=s.iterator();p.hasNext();){var h=p.next();0<h.length&&c.add_11rb$(h)}return c},bt.$metadata$={kind:l,simpleName:"ConditionImpls",interfaces:[]};var Ot=null;function kt(){return null===Ot&&new bt,Ot}function Rt(n){return function(e,t){return new u(n(e),n(t))}}function It(){(Zt=this).convertPinyin=Rt(Tt),this.removeParensAndContents=Rt(qt),this.convertToLowerCase=Rt(Lt),this.normalizePlusAndAmpersand=Rt(Ft),this.removeTrailingDashes=Rt(jt),this.removeInfixSpacedDashes=Rt(Gt),this.reorderAndTrimFragments=Rt(Wt),this.removePunctuation=Rt(Mt),this.removeParens=Rt(Dt),this.removeAllWhitespace=Rt(Bt),this.trimWhitespace=Rt(Ut),this.transformUserInputIntoAnswer=Jt,this.postProcess=Rt(Vt)}function Tt(e){return q.PinyinConverter.convert(e)}function qt(e){return L(e)}function Lt(e){return e.toLowerCase()}function Ft(e){return Se().plusAmpersandRegex.replace_x2uqeu$(e,"and")}function jt(e){e=Se().leadingDashRegex.replace_x2uqeu$(e,"");return Se().trailingDashRegex.replace_x2uqeu$(e,"")}function Gt(e){return Se().infixSpacedDashesRegex.replace_x2uqeu$(e," ")}function Wt(e){for(var e=Se().fragmentSeparatorRegex.split_905azu$(e,0),t=N(R(e,10)),n=e.iterator();n.hasNext();){var r=n.next();t.add_11rb$(Sn(r))}return F(k(t),",")}function Mt(e){return $n(e)}function Dt(e){return Se().parensRegex.replace_x2uqeu$(e,"")}function Bt(e){return Se().whitespaceRegex.replace_x2uqeu$(e,"")}function Ut(e){return Sn(e)}function Jt(e,t){return new u(e,e)}function Vt(e){e=wn(e),e=Se().spaceDashRegex.replace_x2uqeu$(e,"-"),e=Se().dashSpaceRegex.replace_x2uqeu$(e,"-"),e=Se().spaceEqualsRegex.replace_x2uqeu$(e,"=");return Se().equalsSpaceRegex.replace_x2uqeu$(e,"=")}It.$metadata$={kind:l,simpleName:"TransformImpls",interfaces:[]};var Kt,Ht,Qt,Zt=null;function Yt(){return null===Zt&&new It,Zt}function Xt(e){return 5<e.length}function en(e){return e.value}function tn(e){return e.value}function nn(e,t){e=Se().numbersRegex.findAll_905azu$(e),t=Se().numbersRegex.findAll_905azu$(t);if(j(e)!==j(t))return!1;e=W(G(e,en)),t=W(G(t,tn));return a(e,t)}function rn(e,t){t=M(e,t);return 1===t||t/e.length<=Kt}function on(e){return Se().englishArticleWithSpace.replace_x2uqeu$(e,"")}function an(){(sn=this).transformsToApply_0=[Yt().convertToLowerCase,Yt().removeParens,Yt().removePunctuation,Yt().normalizePlusAndAmpersand,Yt().removeTrailingDashes,Yt().postProcess];for(var e=this.transformsToApply_0,t=N(e.length),n=0;n!==e.length;++n){var r=e[n];t.add_11rb$(Z("Basic grading rule clause",!0,null,r))}this.rule_8be2vx$=new ne("grading rule that can be run with no submission context",void 0,void 0,p(t))}an.$metadata$={kind:l,simpleName:"BasicGradingRule",interfaces:[]};var sn=null;function ln(){return null===sn&&new an,sn}function un(r){return function(e,t,n){return!r(e,t,n)}}function cn(){(hn=this).coreGradingClauses_0=[new Q("Convert to lower case",un(kt().isCaseSensitive),void 0,Yt().convertToLowerCase),new Q("Convert pinyin",kt().isPinyin,void 0,Yt().convertPinyin),new Q("Remove whitespace if we do not care about it",kt().isWhitespaceInsensitive,void 0,Yt().removeAllWhitespace),At().CorrectOrderMismatchClause,At().NormalizeSharpSInAnswerForGerman,new Q("Convert to lower case if not case sensitive",un(kt().isCaseSensitive),void 0,Yt().convertToLowerCase),At().FillInMissingPartialAnswersClause,Z("Always remove punctuation",void 0,void 0,Yt().removePunctuation),Z("Trim leading and trailing whitespace regardless of language",void 0,void 0,Yt().trimWhitespace),Z("postProcess",void 0,void 0,Yt().postProcess),Qt,Ht];var e=[At().NonScientificParenStrippingClause],t=this.coreGradingClauses_0;this.IncludeParenContentsRule_0=new ne("Include content in parentheses",void 0,void 0,e.concat(t));e=[At().NonScientificParenAndContentStrippingClause],t=this.coreGradingClauses_0;this.IgnoreParenContentsRule_0=new ne("Ignore content in parentheses",void 0,void 0,e.concat(t)),this.rules=[this.IncludeParenContentsRule_0,this.IgnoreParenContentsRule_0]}cn.$metadata$={kind:l,simpleName:"StudyModeRules",interfaces:[]};var pn,hn=null;function gn(){return null===hn&&new cn,hn}function dn(e,t){return null!=(t=null!=t&&null!=e?e.containsMatchIn_6bul2c$(t):null)&&t}function fn(e,t){var n;return null!=e&&null!=t&&null!=(n=null!=(n=t.find_905azu$(e))?n.groupValues:null)?D(n):null}function mn(e){var t;return null!=(t=pn.get_11rb$(e))?t:String.fromCharCode(U(e))}function _n(e){return F(B(e),"",void 0,void 0,void 0,void 0,mn)}function vn(e){var t,n=Se().markdownMatcher;e:do{var r=n.find_905azu$(e);if(null==r){t=e.toString();break e}var i=0,o=e.length,a=J(o);do{var s=E(r)}while(a.append_ezbsdh$(e,i,s.range.start),a.append_gw00v9$(s.groupValues.get_za3lpa$(1)),i=s.range.endInclusive+1|0,r=s.next(),i<o&&null!=r)}while(i<o&&a.append_ezbsdh$(e,i,o),t=a.toString(),0);return t}function Sn(e){return null!=(e=null!=e?Se().trimRegex.replace_x2uqeu$(e,""):null)?e:""}function $n(e){return Se().punctuationRegex.replace_x2uqeu$(e,"")}function wn(e){return Se().whitespaceRegex.replace_x2uqeu$(e," ")}function yn(){An=this}yn.prototype.create=function(){return new bn(rt().create())},yn.$metadata$={kind:l,simpleName:"DefaultGraderFactoryJs",interfaces:[]};var An=null;function bn(e){Pn(),this.grader_0=e}function Cn(){xn=this}Cn.prototype.toGradingSettings_mptmy8$=function(e){if(null==e)throw V("GradingSettings are required.");e="boolean"==typeof(e=e[ke().value])?e:null;return null==e?new ae:new ae(e)},Cn.prototype.toSubmissionContext_mptmy8$=function(e){var t;if(null==e)throw V("SubmissionContext is required.");return new $e(null!=(t="string"==typeof(t=e.answerLanguage)?t:null)?t:"",null!=(t="string"==typeof(t=e.promptLanguage)?t:null)?t:"",null!=(t="string"==typeof(t=e.promptText)?t:null)?t:"",null!=(e=null!=(e=g.isType(e=e.gradingSettings,Object)?e:null)?this.toGradingSettings_mptmy8$(e):null)?e:new ae)},Cn.$metadata$={kind:l,simpleName:"JsonDeserializer",interfaces:[]};var xn=null;function Pn(){return null===xn&&new Cn,xn}function Nn(){zn=this}bn.prototype.grade=function(e,t,n){return this.grader_0.grade_ley05m$(e,t,Pn().toSubmissionContext_mptmy8$(n=void 0===n?null:n))},bn.prototype.gradeWithSuggestions=function(e,t,n){return this.grader_0.gradeWithSuggestions_ley05m$(e,t,Pn().toSubmissionContext_mptmy8$(n=void 0===n?null:n))},bn.$metadata$={kind:i,simpleName:"GraderJs",interfaces:[]},Nn.prototype.create=function(){return new bn(rt().create())},Nn.$metadata$={kind:l,simpleName:"LearnModeGraderFactoryJs",interfaces:[]};var En,zn=null;function On(e,t){this.action=e,this.suggestedSetting=t,this.actionEnum=E(Ue().fromValue_pdl1vj$(this.action)),this.suggestedSettingEnum=E(Fe().fromValue_pdl1vj$(this.suggestedSetting))}function kn(e,t,n){return n=n||Object.create(On.prototype),On.call(n,e.value,t.value),n}function Rn(e){return e=e,"string"==typeof(e="function"==typeof"".normalize?e.normalize():e)?e:d()}On.$metadata$={kind:i,simpleName:"GradingSettingsSuggestion",interfaces:[]},On.prototype.component1=function(){return this.action},On.prototype.component2=function(){return this.suggestedSetting},On.prototype.copy_puj7f4$=function(e,t){return new On(void 0===e?this.action:e,void 0===t?this.suggestedSetting:t)},On.prototype.toString=function(){return"GradingSettingsSuggestion(action="+g.toString(this.action)+", suggestedSetting="+g.toString(this.suggestedSetting)+")"},On.prototype.hashCode=function(){return 31*(0+g.hashCode(this.action)|0)+g.hashCode(this.suggestedSetting)|0},On.prototype.equals=function(e){return this===e||null!==e&&"object"==typeof e&&Object.getPrototypeOf(this)===Object.getPrototypeOf(e)&&g.equals(this.action,e.action)&&g.equals(this.suggestedSetting,e.suggestedSetting)};t=e.grading||(e.grading={});t.Grader=K;l=t.core||(t.core={});l.GradingClause_init_4socs9$=Z,l.GradingClause_init_jqxdfq$=Y,l.GradingClause_init_mwgvtg$=X,l.GradingClause=Q,l.GradingResult=ee,l.IGradingRule=te,Object.defineProperty(ne,"Companion",{get:oe}),l.GradingRule=ne,Object.defineProperty(ae,"Companion",{get:ue}),Object.defineProperty(ae,"$serializer",{get:fe}),l.GradingSettings_init_4gfeh5$=me,l.GradingSettings=ae,Object.defineProperty(l,"RegexDefinitions",{get:Se}),Object.defineProperty($e,"Companion",{get:Ae}),Object.defineProperty($e,"$serializer",{get:Ne}),l.SubmissionContext_init_p8r0vl$=Ee,l.SubmissionContext=$e,Object.defineProperty(ze,"ACCEPT_PARTIAL_ANSWERS",{get:ke}),Object.defineProperty(ze,"LEVENSHTEIN_PLUS",{get:Re}),Object.defineProperty(ze,"Companion",{get:Fe});i=l.enums||(l.enums={});i.GradingSetting=ze,Object.defineProperty(je,"ENABLE_ONE_TO_MAKE_ANSWER_CORRECT",{get:We}),Object.defineProperty(je,"DISABLE_ONE_TO_MAKE_ANSWER_INCORRECT",{get:Me}),Object.defineProperty(je,"Companion",{get:Ue}),i.GradingSettingsSuggestionAction=je;i=l.utils||(l.utils={});Object.defineProperty(i,"Conditions",{get:Qe}),Object.defineProperty(i,"Transforms",{get:et});i=t.factories||(t.factories={});Object.defineProperty(i,"GraderFactory",{get:rt});i=t.impls||(t.impls={});Object.defineProperty(i,"ClauseImpls",{get:At}),Object.defineProperty(i,"ConditionImpls",{get:kt}),Object.defineProperty(i,"TransformImpls",{get:Yt});i=i.levenshteinplus||(i.levenshteinplus={});i.isLongerThanFiveCharacters_y4putb$=Xt,i.areNumbersCorrect_wdz5eb$=nn,i.isUnderLevenshteinThreshold_wdz5eb$=rn,i.removeEnglishArticles_7efafi$=on;t=t.rules||(t.rules={});Object.defineProperty(t,"BasicGradingRule",{get:ln}),Object.defineProperty(t,"StudyModeRules",{get:gn});t=e.util||(e.util={});return t.containsMatchIn_w5wyu7$=dn,t.firstMatchingGroup_p0lye5$=fn,t.normalizeSimilarCharacters_7efafi$=_n,t.stripMarkdown_7efafi$=vn,t.trim_7efafy$=Sn,t.removePunctuation_pdl1vz$=$n,t.reduceWhitespace_pdl1vz$=wn,Object.defineProperty(e,"DefaultGraderFactoryJs",{get:function(){return null===An&&new yn,An}}),Object.defineProperty(bn,"JsonDeserializer",{get:Pn}),e.GraderJs=bn,Object.defineProperty(e,"LearnModeGraderFactoryJs",{get:function(){return null===zn&&new Nn,zn}}),e.isCaseSensitive=function(e,t,n){return n=Pn().toSubmissionContext_mptmy8$(n),kt().isCaseSensitive(e,t,n)},Object.defineProperty(e,"BasicGradingRule",{get:function(){return En}}),l.GradingSettingsSuggestion_init_d1jx27$=kn,l.GradingSettingsSuggestion=On,t.normalize_7efafi$=Rn,ce.prototype.typeParametersSerializers=_.prototype.typeParametersSerializers,be.prototype.typeParametersSerializers=_.prototype.typeParametersSerializers,pe=v(["de","chem","math"]),_=S(he=v(["chem","math"]),v(["photo","??"])),S(_,v(["akk","ja","ja-ka","zh-CN","zh-TW"])),ge=v(["ja","ja-ka","zh-CN","zh-TW"]),Kt=.15,Ht=new Q("LevenshteinPlus",function(e,t,n){return Xt(e)&&nn(e,t)&&rn(e,t)},Re(),Yt().transformUserInputIntoAnswer),Qt=Y("NoArticlesForEnglishForLevenshteinPlus",function(e,t,n){var r=n.component1(),n=n.component2();return a(n,"en")&&a(r,"en")&&(Se().englishArticleWithSpace.containsMatchIn_6bul2c$(e)||Se().englishArticleWithSpace.containsMatchIn_6bul2c$(t))},Re(),O("removeEnglishArticles",on)),pn=r([z(n(8217),"'"),z(n(8217),"'"),z(n(8216),"'"),z(n(180),"'"),z(n(8221),'"'),z(n(8220),'"'),z(n(8230),"..."),z(n(9)," "),z(n(8194)," "),z(n(0),""),z(n(8211),"-"),z(n(173),""),z(n(12305),"] "),z(n(12304)," ["),z(n(215),"x"),z(n(537),"ÅŸ"),z(n(339),"oe"),z(n(230),"ae"),z(n(198),"AE"),z(n(1072),"a"),z(n(1040),"A"),z(n(1077),"e"),z(n(1045),"E"),z(n(1089),"c"),z(n(1057),"C"),z(n(1091),"y"),z(n(1059),"Y"),z(n(12288)," "),z(n(12289),","),z(n(12290),"."),z(n(12316),"~"),z(n(65292),", "),z(n(65294),". "),z(n(65281),"! "),z(n(65311),"? "),z(n(65307),"; "),z(n(65306),": "),z(n(65288)," ("),z(n(65289),") "),z(n(65374),"~ ")]),En=ln().rule_8be2vx$,e})?n.apply(t,r):n)||(e.exports=n)}}]);
