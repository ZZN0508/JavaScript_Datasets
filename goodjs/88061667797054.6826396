!function(){"use strict";function e(){for(;n.length;)n[0](),n.shift()}function r(e){this.a=d,this.b=void 0,this.f=[];var t=this;try{e(function(e){!function t(n,e){if(n.a===d){if(e===n)throw new TypeError("Promise settled with itself.");var i=!1;try{var a=e&&e.then;if(null!==e&&"object"==typeof e&&"function"==typeof a)return void a.call(e,function(e){i||t(n,e),i=!0},function(e){i||o(n,e),i=!0})}catch(e){return void(i||o(n,e))}n.a=0,n.b=e,l(n)}}(t,e)},function(e){o(t,e)})}catch(e){o(t,e)}}function s(t){return new r(function(e){e(t)})}function o(e,t){if(e.a===d){if(t===e)throw new TypeError("Promise settled with itself.");e.a=1,e.b=t,l(e)}}function l(a){n.push(function(){if(a.a!==d)for(;a.f.length;){var e=(i=a.f.shift())[0],t=i[1],n=i[2],i=i[3];try{0===a.a?n("function"==typeof e?e.call(void 0,a.b):a.b):1===a.a&&("function"==typeof t?n(t.call(void 0,a.b)):i(a.b))}catch(e){i(e)}}}),1===n.length&&i()}var t,n=[],i=window.MutationObserver?(t=document.createElement("div"),new MutationObserver(e).observe(t,{attributes:!0}),function(){t.setAttribute("x",0)}):function(){setTimeout(e)},d=2;r.prototype.g=function(e){return this.c(void 0,e)},r.prototype.c=function(n,i){var a=this;return new r(function(e,t){a.f.push([n,i,e,t]),l(a)})},window.Promise||(window.Promise=r,window.Promise.resolve=s,window.Promise.reject=function(n){return new r(function(e,t){t(n)})},window.Promise.race=function(i){return new r(function(e,t){for(var n=0;n<i.length;n+=1)s(i[n]).c(e,t)})},window.Promise.all=function(o){return new r(function(n,e){var i=0,a=[];0===o.length&&n(a);for(var t=0;t<o.length;t+=1)s(o[t]).c(function(t){return function(e){a[t]=e,(i+=1)===o.length&&n(a)}}(t),e)})},window.Promise.prototype.then=r.prototype.c,window.Promise.prototype.catch=r.prototype.g)}(),function adClosure(){function executeHymnal(){!function($){var HymnalLib={version:11,info:function(){window.console&&window.console.log&&HymnalLib.ads.forEach(function(e){console.log(e.design_template+", id: "+e.id,e.getElement().get(0))})}},settings,qh,e6,n6,o6,p6,q6,r6,s6,t6,p5,B4,_e,ze,Ae,Ce,we,F3,y3,v3,e3,f3,e1,d1,Vb,Xb,Qa,ia,ha;function g6(){var e;t6.length&&(e=t6.shift(),s6.className="feedback-questions "+e,s6.dataset.activeQuestion=e,t6.length<1&&(window.addEventListener("click",m6),q6.addEventListener("click",m6),n6=setTimeout(function(){p6||q6.classList.remove("is-active"),o6&&o6()},3e3)))}function h6(e){e.preventDefault();var t=document.getElementById("count"),n=s6.getAttribute("data-active-question"),i=e.currentTarget,a=i.getAttribute("data-answer"),n=i.getAttribute("data-event-"+n);n&&r6.log("feedback",n),i.classList.add("active"),1==t6.length?(i.classList.add("stay"),i.removeEventListener("click",h6),answers.forEach(function(e){e.className+=" beGone"}),setTimeout(function(){i.classList.add("slideOver-"+a),t.innerHTML="All done!",window.requestAnimationFrame(g6)},2e3)):setTimeout(function(){i.classList.remove("active"),window.requestAnimationFrame(g6),t.innerHTML="2 of 2"},1500)}function m6(e){e.stopPropagation(),clearTimeout(n6),q6.classList.remove("is-active"),o6&&o6()}function C4(e){this.opts=e,this.initial=this.opts.current,this.eventBase=this.opts.newVal,this.eventCurrent=0}function a4(e){this.opts=e,this.parent=this.opts.parent;var t=this.parent.getElementsByClassName(this.opts.slides);return this.slides=Array.prototype.slice.call(t),this.totalSlides=e.slidesPresent||this.slides.length,this.scrollElement=this.parent.querySelector("."+this.opts.scrollElement),this.wrapper=this.parent.getElementsByClassName(this.slides[0].parentNode.classList)[0],this.wrapperScroll=this.wrapper.scrollLeft,this.activeSlide=0,this.slideWidth=this.opts.width,this._initSlides(),this._initListeners(),this._initSlides.bind(this)}function d3(e){this.message=e}function Rb(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}function Ra(e){this.type=(e=e||{}).type,this.id=e.id,this.design_template=e.design_template||"",this.brand=e.brand,this.campaignId=e.campaignId,this.campaignName=e.campaignName,this.adName=e.adName,this.slug=e.slug,this.fields=e.fields||{},this.adUnitID=0,this.siteID="",this.network="",this.entryType="",this.adServerVariables={},this.libraryVersion=Qa.version,this.aspect_ratio=e.aspect_ratio,this.renderInIframe=e.renderInIframe,this.preambleEnabled=e.preambleEnabled,this.preambleMarkup=e.preambleMarkup,this.preambleOverlay=e.preambleOverlay,this.showFeedbackForm=e.showFeedbackForm,this.userFeedbackHidden=!1,this.disableSlotRefresh=e.disableSlotRefresh,this.trackedURLs=[],this.clickthroughUrl=e.clickthroughUrl,this.trackers=e.trackers||[],this.viewRecorded=!1,this.enable_log=!1,this.data=this.data||{},this._elementToReplace=e.elementToReplace&&$(e.elementToReplace),this._designSetupFunction=e.designSetupFunction,this._element=e.element,this.manual_view_impression=!1,this.automatic_clickthrough=!0,this.breakpoints={small:[0,727],medium:[728,949],large:[950,1e6],mobile:[0,727],desktop:[728,1e7]},this.content={all_html:e.html,all_css:e.css},this.settings={testMode:!0===e.testMode,window:e.testWindow||window},this._lifecycleEventListeners=[],this._loggers=[],window.Hymnal&&window.Hymnal.ads&&window.Hymnal.ads.push(this)}void 0!==window.Hymnal&&!window.Hymnal.settings.inPreview||(settings={},window.Hymnal&&(settings=Hymnal.settings||{}),window.Hymnal=HymnalLib,window.Hymnal.settings=settings),ha=HymnalLib,ha.defaultSettings=ha.defaultSettings||{},ha.settings?ha.settings=$.extend(_.clone(ha.defaultSettings),ha.settings):ha.settings=ha.defaultSettings,ha.settings=ha.settings||{},window.console=window.console||{log:function(){}},ha.loggers=ha.loggers||{push:function(){}},ha.ConsoleLogger=ha.ConsoleLogger||function(){},ha.ads=ha.ads||[],!ha.settings.userCanViewMetrics&&0<$("#network-bar a[title='Network Admin Dashboard']").length&&(ha.settings.userCanViewMetrics=!0),ha.ChorusEvents=ha.ChorusEvents||{AdResponseWithHTML:"Vox.Ad.ResponseWithHTML",AdRequest:"Hymnal.requestAd"},ia=HymnalLib,ia.util={},ia.util.UserAgentProfiler=function(){var e="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch||0<navigator.msMaxTouchPoints,t=window.innerWidth;isInIframe()&&window.frameElement&&(t=window.frameElement.parentElement.ownerDocument.body.clientWidth);var n=window.navigator.userAgent,i=e&&t<728||0<window.location.href.indexOf("mobile=true")||document.body.classList.contains("is-small"),a=e&&728<=t,o=!i&&!a,r=i?"mobile":a?"tablet":"desktop",s=!1;if(0<n.indexOf("Android"))for(var l=n.split(";"),d=0,c=l.length;d<c;d++)if(0<l[d].indexOf("Android")){var g=l[d].split(" ");if(parseInt(g[g.length-1].split(".")[0])<3){s=!0;break}}return{screenWidth:function(){return t},profile:function(){return r},isTablet:function(){return a},isMobile:function(){return i},isDesktop:function(){return o},isAndroidLt3:function(){return s}}}(),ia.util.inViewport=function(){var e,t,n,i=ia.Events.data();return!!i.inViewport||(-1!==i.frameTopPos||-1!==i.windowHeight)&&(e=i.scrollOffset+i.windowHeight,t=i.scrollOffset,n=i.framePosOnPage,i=i.framePosOnPage+i.frameHeight,t<=n&&i<=e||n<=t&&t<=i||n<=e&&e<=i)},ia.util.isPrelude=function(e){var t=-1!==e.design_template.toLowerCase().indexOf("prelude"),e=-1!==e.design_template.toLowerCase().indexOf("apex");return t&&!e},ia.util.isAthena=function(e){return-1!==e.design_template.toLowerCase().indexOf("athena")},ia.util.isSafeFrame=!!window.$sf,ia.util.randomFrom=function(e){return e[Math.floor(Math.random()*e.length)]},ia.util.throttle=function(e,t,n){var i=null,a=!1,o=function(){i?a=!0:(n=n||this,e.call(n),i=setTimeout(function(){var e=a;i=null,a=!1,e&&o.call(n)},t))};return o},ia.util.complete=function(e,t){var n=t||this;"complete"===document.readyState?e.call(n):window.addEventListener("load",function(){e.call(n)})},Qa=HymnalLib,Qa.Ad=(Ra.cssClasses={viewed:"hymnal-ad-viewed"},Ra.prototype.addLifecycleEventListener=function(e){this._lifecycleEventListeners.push(e)},Ra.prototype.addLogger=function(){this.enable_log=!0,this.log("Call to deprecated function. Use 'ad.enable_log = true' to log to console.log (if it exists)")},Ra.prototype.requestMoatJavascript=function(){this.log("Moat support is removed")},window.console=window.console||{log:function(){}},Ra.prototype.log=function(e){for(var t="",n=1;n<arguments.length;n++)t+=" "+argument[n];this.enable_log&&window.console.log("HYMNAL | "+this.getSlug()+" | ",e,t)},Ra.prototype.render=function(){if(adCallbacks.performBeforeRender(this),this._triggerLifecycleEvent("initializing"),this._elementToReplace||(this._elementToReplace=this.findElement()),this._elementToReplace){var e=_.isString(this._elementToReplace)?$(this._elementToReplace).first():this._elementToReplace;this.getConfigurationFromDataAttributes(e),this.determineClickthroughUrl(),this.selectVariant(this.variantID),this.addClassesToHtmlElement(),Qa.Events.whenLive(this.defineBreakpoint.bind(this)),this.disableSlotRefresh&&Qa.Events.whenLive(function(){Qa.Events.requestRefreshEligibility("disable")}),this.addImpressionTrackers(),this.replaceAdServerVariablesInDesignHtml();var t=$(this.content.html);t.attr("data-hymnal-id",this.id);for(var n,i=e[0],a=0;a<i.attributes.length;a++){var o=i.attributes[a];o.specified&&o.name.startsWith("data-hymnal")&&t.attr(o.name,o.value)}e.replaceWith(t),this._element=t,this.content.css&&(this._head=this._head||$("head"),d=$('<style type="text/css" data-for-hymnal-ad="'+this.getSlug()+'">'+this.content.css+"</style>"),this._head.append(d)),this._designSetupFunction&&this._designSetupFunction(this.variantID),this.automatic_clickthrough&&$((n=this)._element).find("#athena-click, .athena-click").click(function(e){e.stopPropagation(),e.preventDefault(),n.clickthrough()})}var r=!1,s=(Qa.ConcertConfig.get("partner",null),Qa.ConcertConfig.get("preambleHidden",!1)),l=Qa.ConcertConfig.get("preambleTextHidden",!1),e=Qa.ConcertConfig.get("preambleLogoHidden",!1),d=Qa.ConcertConfig.get("preambleLogoLink");this.userFeedbackHidden=Qa.ConcertConfig.get("feedbackEnabled",!1),this._element&&this._element.get(0)&&this._element.get(0).classList&&(r=this._element.get(0).classList.contains("ad__has-preamble")),this.preambleEnabled&&r&&!s&&(this._addConcertPreamble(e,l,this.preambleOverlay),this._concertLogoClickThrough(d)),this.renderInIframe&&Qa.Moat.trackElement(this._element[0]),this._triggerLifecycleEvent("render"),this._configureStandardEngagementDetection(),this._wrapUrlsWithClickthroughHandler(),adCallbacks.performAfterRender(this)},Ra.prototype.trackElement=function(e){Qa.Moat.trackElement(e)},Ra.prototype.windowIsLandscape=function(){return Qa.Events.get("windowWidth")>Qa.Events.get("windowHeight")},Ra.prototype.defineBreakpoint=function(){if(document.body.classList.contains("in-hymnal-preview"))return this.listenForFakeBreakpointChange();Qa.Events.onChange("windowWidth",this.updateBreakpoint.bind(this));var e,t=Qa.Events.get("windowWidth"),n=[];for(e in this.breakpoints)t>=this.breakpoints[e][0]&&t<=this.breakpoints[e][1]&&n.push("is-"+e);var i=this.windowIsLandscape()?"is-landscape":"is-portrait";n.push(i),n.forEach(function(e){document.body.classList.add(e)})},Ra.prototype.updateBreakpoint=function(e,t){var n,i=[],a=[];for(n in this.breakpoints)(e>=this.breakpoints[n][0]&&e<=this.breakpoints[n][1]?i:a).push("is-"+n);var o=["is-landscape","is-portrait"],t="string"==typeof t?Math.max(0,o.indexOf(t)):this.windowIsLandscape()?0:1;i.push(o.splice(t,1)[0]),a.push(o[0]);for(var r=Math.max(i.length,a.length),s=0;s<r;s++)a[s]&&document.body.classList.remove(a[s]),i[s]&&document.body.classList.add(i[s])},Ra.prototype.listenForFakeBreakpointChange=function(){try{var t=window.frameElement.parentElement}catch(e){t=document.body}t.addEventListener("previewResize",function(e){var t;e&&e.detail&&this.breakpoints[e.detail.breakpoint]&&(t=this.breakpoints[e.detail.breakpoint][0],e="mobile"===e.detail.breakpoint?"is-portrait":"is-landscape",this.updateBreakpoint(t,e))}.bind(this))},Ra.prototype.getConfigurationFromDataAttributes=function(e){this.legacyDfpCombinedUrls=$.trim(e.attr("data-hymnal-ad-config-click-through-url")),this.legacyDfpClickUrl=$.trim(e.attr("data-hymnal-click-through-prefix")),this.dfpClickUrl=$.trim(e.attr("data-hymnal-dfp-click-url")),this.dfpDestUrl=$.trim(e.attr("data-hymnal-dfp-dest-url")),this.adUnitID=e.attr("data-hymnal-ad-unit-id"),this.siteID=e.attr("data-hymnal-site-id"),this.variantID=e.attr("data-hymnal-design-variant-id"),this.lineItemID=e.attr("data-hymnal-dfp-line-item-id"),this.creativeID=e.attr("data-hymnal-dfp-creative-id"),this.configData=e.data(),void 0!==this.variantID&&void 0!==this.fields[this.variantID]||(this.variantID=Object.keys(this.fields)[0]),this.network=e.attr("data-hymnal-network"),this.entryType=e.attr("data-hymnal-entry-type"),!this.getTestMode()&&""!==this.network||(this.network=this.guessNetworkFromURL()),this.adServerVariables.clickthrough_url=this.clickthroughUrl,this.adServerVariables.ad_unit_id=this.adUnitID,this.adServerVariables.site_id=this.siteID,this.adServerVariables.network=this.network,this.adServerVariables.entry_type=this.entryType},Ra.prototype._combineUrlsSafely=function(e,t,n){return""===$.trim(e)?t:-1!==e.indexOf(t)||-1!==e.indexOf(encodeURI(t))?e:e+(t=n&&"function"==typeof encodeURI?encodeURI(t):t)},Ra.prototype.determineClickthroughUrl=function(){var e,t=this.clickthroughUrl;""!==this.legacyDfpCombinedUrls&&(t=this.legacyDfpCombinedUrls,""!==this.legacyDfpClickUrl)&&(e=this.legacyDfpCombinedUrls.substring(this.legacyDfpClickUrl.length,this.legacyDfpCombinedUrls.length),t=this._combineUrlsSafely(this.legacyDfpClickUrl,e,!0)),""!==this.dfpClickUrl&&""!==this.dfpDestUrl&&(t=this._combineUrlsSafely(this.dfpClickUrl,this.dfpDestUrl,!1)),window.clickTag&&(t=window.clickTag),this.clickthroughUrl=t,this.adServerVariables.clickthrough_url=this.clickthroughUrl},Ra.prototype.selectVariant=function(e){var t=(this.content.all_html[e]||"").trim(),n=(this.content.all_css[e]||"").trim();this.content.html=t.replace(/\\"/g,'"').replace(/\\'/g,"'").replace(/\\\//g,"/"),this.content.css=n.replace(/\\"/g,'"').replace(/\\'/g,"'").replace(/\\\//g,"/"),this.fields=this.fields[e]},Ra.prototype.guessNetworkFromURL=function(){for(var e=["verge","polygon","eater","racked","vox","curbed"],t=0;t<e.length;t++)if(-1<location.host.indexOf(e[t]))return e[t];return"sbn"},Ra.prototype.replaceAdServerVariablesInDesignHtml=function(){for(var e in this.adServerVariables){var t=new RegExp("\\$AD_SERVER\\["+e+"\\]","g");this.content.html=this.content.html.replace(t,this.adServerVariables[e])}},Ra.prototype._wrapUrlsWithClickthroughHandler=function(){for(var e=$(this._element).find("a[data-wrap-url], a[wrap-url]"),t=0;t<e.length;t++){var n=e.get(t);n.href=this.wrapUrlWithClickTracker(n.href)}},Ra.prototype.addClassesToHtmlElement=function(){for(var e="",t=["harmony-","hymnal-"],n=[this.network,this.entryType],i=0;i<n.length;i++)if(void 0!==n[i]&&0<n[i].length)for(var a=0;a<t.length;a++)e+=t[a]+n[i]+" ";this.log("adding classes to html "+e),$("html").addClass(e)},Ra.prototype.popUp=function(e){var t,n,i=this.getElement();i?(0===(t=i.find(".hymnal-popup-message-container")).length&&(t=$("<div>").addClass("hymnal-popup-message-container").css({position:"absolute",top:"0",left:"0","z-index":"1000"}).appendTo(i)),n=$("<span>").addClass("hymnal-popup-message").css({display:"none","border-radius":"5px","background-color":"white",color:"#333",float:"left",margin:"8px","margin-bottom":"0px",padding:"3px",clear:"both","user-select":"none",opacity:"0.75"}).text(e),t.append(n),n.fadeIn(),_.delay(function(){n.slideUp(500,function(){n.remove()})},4e3),_.delay(function(){0===t.find(".hymnal-popup-message").length&&t.remove()},5e3)):window.console&&console.log&&console.log("Ad["+this.getSlug()+"] - "+e+" (pop up message not available)")},Ra.prototype.addImpressionTrackers=function(){var e=this.trackers.filter(function(e){return"impression"===e.event})[0];if(e)for(var t=e.urls,n=0;n<t.length;n++)this.addTrackerImage(t[n])},Ra.prototype.addTrackerImage=function(e){var t,n;0<=this.trackedURLs.indexOf(e)||(this.trackedURLs.push(e),t={pattern:/%%CACHEBUSTER%%|%25%25CACHEBUSTER%25%25/,replace:Math.ceil(1e11*Math.random())},this.log("Replacing cachebuster macro with"+t.replace+"in"+e),n=e.replace(t.pattern,t.replace),(t=document.createElement("img")).setAttribute("src",n),t.setAttribute("height","1"),t.setAttribute("width","1"),t.setAttribute("data-tracker-hymnal-ad-id",this.id),t.setAttribute("style","position:absolute; top:0; left:0; visibility:hidden;"),(n=document.body).insertBefore(t,n.firstChild),console&&console.log&&console.log("adding image ",e,this.trackedURLs))},Ra.prototype.findElement=function(){var e,t=$('[data-hymnal-ad-id="'+this.id+'"]');return 0===t.length&&"string"==typeof this.type&&(e='[data-cb-ad-id="'+(this.type.charAt(0).toUpperCase()+this.type.slice(1))+'"],[data-cb-ad-id="'+(this.design_template.charAt(0).toUpperCase()+this.design_template.toLowerCase().slice(1))+'"]',-1!==this.type.toLowerCase().indexOf("athena")&&(e+=',[data-cb-ad-id="Mid body"]'),0<(e=$(e).first()).length&&(t=$("<div>").attr("data-hymnal-ad-id",this.id),e.append(t))),0<t.length?t.first():null},Ra.prototype.getElement=function(){return this._element},Ra.prototype.getSlug=function(){if(this.slug)return this.slug;var e=[];return this.brand&&e.push((this.brand||"").toLowerCase().replace(" ","_")),this.id&&e.push(this.id),this.slug=e.join("_"),this.slug},Ra.prototype.getTestMode=function(){var e=this.settings.window;return!(!e.Hymnal||!e.Hymnal.settings||!0!==e.Hymnal.settings.testMode)||this.settings.testMode},Ra.prototype.setTestMode=function(e){this.settings.testMode=e},Ra.prototype.engage=function(t){this.log("Engagement: "+t),this.getTestMode()?this.popUp("Engagement: "+t):_.each(this._engagementEventListeners,function(e){_.isFunction(e)&&e(t)})},Ra.prototype.clickThrough=Ra.prototype.clickthrough=function(e){this.engage("clickthrough");var t=this.clickthroughUrl;(t="string"==typeof e?this.wrapUrlWithClickTracker(e):t)&&(this.getTestMode()?this.popUp("Open URL: "+t):(this.log("Opening URL in new window: "+t),this.settings.window.open(t,"_blank")))},Ra.prototype.wrapUrlWithClickTracker=function(e){var t,n=this.dfpClickUrl,i=!1;return n&&this.dfpDestUrl&&(-1!=(t=n.indexOf(this.dfpDestUrl))&&(n=n.substr(0,t))),n||(i=!0,n=this.legacyDfpClickUrl),0<n.length?this._combineUrlsSafely(n,e,i):e},Ra.prototype._addConcertPreamble=function(e,t){if(!this.preambleMarkup)return this.log("Preamble markup unavailable, Concert Preamble will not be added."),!1;var n=document.createElement("div");n.innerHTML=this.preambleMarkup;n=n.firstElementChild;this.getElement().get(0)&&((i=this.getElement().get(0)).insertBefore(n,i.firstElementChild),this.preambleOverlay||(i.style.paddingTop="20px",i.querySelector(".ad__content").style.top="20px"));var i=i.querySelector(".ad__feedback");i&&Qa.FeedbackForm&&this.showFeedbackForm&&!this.userFeedbackHidden?Qa.FeedbackForm.InitForm(i):i.classList.add("ad__feedback-disabled"),e&&this._hideConcertLogo(),t&&this._hidePreambleText()},Ra.prototype._concertLogoClickThrough=function(e){var t=this.getElement().get(0);if(!t||!t.querySelector(".ad__concert-link"))return!1;var n=t.querySelector(".ad__concert-link");e&&(n.href=e),n.addEventListener("click",function(e){e.stopPropagation(),e.preventDefault(),this.settings.window.open(n.href,"_blank")}.bind(this))},Ra.prototype._hideConcertLogo=function(){this._hidePreambleElement(".ad__concert-link")},Ra.prototype._hidePreambleText=function(){this.getElement().get(0).querySelector(".ad__callout-wrapper").classList.add("hide-preamble-after"),this._hidePreambleElement(".ad__callout-wrapper p")},Ra.prototype._hidePreambleElement=function(e){var t=this.getElement().get(0),e=t.querySelector(e);if(!t||!e)return!1;e.style.display="none"},Ra.prototype._triggerLifecycleEvent=function(t){this.log("Lifecycle: "+t);var n=this;_.each(this._lifecycleEventListeners,function(e){e(t,n)})},Ra.prototype._configureStandardEngagementDetection=function(){var e=this.getElement(),t=(this.getSlug(),this),n=function(){t.viewRecorded||(t.engage("view"),e.addClass(Ra.cssClasses.viewed),t.viewRecorded=!0)};t.manual_view_impression&&(t.log("Suppressing automatic view setup"),n=function(){}),e&&0<e.length&&Qa.Events.whenLive(function(){Qa.util.inViewport()?n():Qa.Events.onScroll(function(){Qa.util.inViewport()&&!t.viewRecorded&&n()})})},Ra),"function"!=typeof window.CustomEvent&&(Rb.prototype=window.Event.prototype,window.CustomEvent=Rb),Vb=HymnalLib,Vb.DefaultEvents||(Vb.DefaultEvents=(Xb=function(e,t){t=new CustomEvent("hymnal_"+e,{bubbles:!0,detail:{ad:t}});document.dispatchEvent(t)},function(e){return this._name=(e=e||{}).name,Xb})),d1=HymnalLib,d1.Prefix||(d1.Prefix=(d1=window.getComputedStyle(document.documentElement,""),{css:"-"+(d1=(Array.prototype.slice.call(d1).join("").match(/-(moz|webkit|ms)-/)||""===d1.OLink&&["","o"])[1])+"-",js:d1[0].toUpperCase()+d1.substr(1)})),e1=HymnalLib,"object"!=typeof e1&&window.PreviewErrorHandling?window.PreviewErrorHandling.javascriptError(new Error("Hymnal must be the Hymnal library")):e1.Video=function(){"use strict";function t(){if(u)for(var e=u.textTracks(),t=0;t<e.length;t++){var n=e[t];if("english"===n.label)return n}}function n(e){B?e.call(this):C.push(["load",e])}function i(e){I?e.call(this):C.push(["playbackReady",e])}function a(){var e=!1;if(W)return!0;h.querySelector(".vjs-control-bar").addEventListener(g,function(){e=!0});var t=!1;"touchend"===g&&u.on("touchmove",function(){t=!0}),u.on(g,function(){return t?!(t=!1):e?!(e=!1):u.paused()&&G?G():!u.paused()&&"touchend"===g&&G?(this.pause(),G()):void 0}),W=!0}function o(){return new Promise(function(e,t){if(!V.getCurrentVideo())return t("There is no video to load.");n(function(){u.src([{type:"application/x-mpegURL",src:V.getCurrentVideo().hls},{type:"video/mp4",src:V.getCurrentVideo().mp4}]),V.getCurrentVideo().vtt&&u.addRemoteTextTrack({kind:"captions",src:V.getCurrentVideo().vtt,srclang:"en",label:"english",default:!0},!1),setTimeout(function(){I=!0,l("playbackReady")},0)}),e()})}function r(){s()&&i(function(){var e={id:p,adTagUrl:H,debug:k,adWillPlayMuted:!0,adsRenderingSettings:{}};u.ima(e)})}function s(){return Boolean(H)}function l(t,e,n){e=e||this;for(var i=C.filter(function(e){return e[0]===t&&"function"==typeof e[1]}).map(function(e){return e[1]}),a=0;a<i.length;a++)try{i[a].apply(e,n)}catch(t){window.PreviewErrorHandling&&window.PreviewErrorHandling.javascriptError(t)}}function d(){m.style.paddingTop=f+"%"}function c(){u.on("loadedmetadata",function(){var e=u.currentSrc(),t=m.closest("[data-hymnal-id]"),t={level1:t.getAttribute("data-hymnal-dfp-advertiser-id")||"",level2:t.getAttribute("data-hymnal-dfp-order-id")||"",level3:t.getAttribute("data-hymnal-dfp-line-item-id")||"",level4:t.getAttribute("data-hymnal-dfp-creative-id")||"",slicer1:t.getAttribute("data-hymnal-ad-id")||"",slicer2:t.getAttribute("data-hymnal-design-variant-id")||""};e1.MoatAnalytics.init(L,m,t,v,e)})}function e(e,t,n){return n=void 0!==n?n:{},!e&&window.PreviewErrorHandling&&window.PreviewErrorHandling.javascriptError(new Error("First Hymnal.Video argument must be an HTML element.")),h=e,V=new e1.VideoPlaylist(t),n&&n.autoplay&&(w=n.autoplay,Z=!0),n&&n.playsInline&&(Z=n.playsInline),n&&n.prerollEnabled&&n.prerollEnabled,n&&n.vastUrl&&(H=n.vastUrl),s()&&(n.controlSettings=n.controlSettings||{},n.controlSettings.hideControlsWrapper=!0),n&&n.vastDebuggingEnabled&&(k=!0),p="hialisha"+Math.random().toString(36).substring(5),function(){if(h.querySelector(p+"_sizing"))return;(m=document.createElement("div")).id=p+"_sizing",m.style.position="relative",h.appendChild(m),d()}(),t=new e1.VideoJsLoader(s()),e1.VideoController.init(this,m,n.controlSettings),new Promise(function(e){if(u)return e();var t=document.createElement("video");t.setAttribute("class","video-js"),t.setAttribute("data-setup","{}"),t.setAttribute("preload","auto"),(w||Z)&&(t.playsInline=!0),w&&(t.autoplay=!0,i(function(){u&&u.muted(!0)})),t.controls=b,t.classList.add("video-js"),t.id=p,m.appendChild(t),e()}).then(t.loadFiles).then(function(){B=!0,new Promise(function(e){(u=videojs(p)).ready(function(){l("load"),u.tech_.hls}),u.on("loadedmetadata",function(){l("metadataloaded")}),u.on("ended",function(){l("played"),l("quartile",this,["100"]),A=0}),u.on("play",function(){R=!1,l("play")}),u.on("timeupdate",function(){l("timeupdate",this,[u.currentTime()]);var e=[.25,.5,.75];u.currentTime()/v>=e[A]&&(e=(100*e[A]).toString(),A++,l("quartile",this,[e]))}),u.on("pause",function(){l("pause")}),u.on("fullscreenchange",function(){l("fullscreenChanged",this,[u.isFullscreen()])}),u.on("volumechange",function(){l("volumechange"),l(u.muted()?"mute":"unmute")}),u.on("durationchange",function(){v=u.duration(),l("durationchange")}),e()})}).then(c).then(function(){return!!V.hasMultipleVideos()||void o()}).then(r).catch(function(e){window.PreviewErrorHandling&&window.PreviewErrorHandling.javascriptError(e)}),L}var g="ontouchend"in document.documentElement?"touchend":"click",u=!1,h=!1,m=!1,p="",C=[],I=!1,f=56.25,b=!1,A=0,y=1,v=0,w=!1,Z=!1,G=null,W=!1,R=!1,V=null,k=!1,H=null,B=!1,L=e.prototype={};return L.addSource=function(e,t){V.addSource(e,t)},L.setInitialVideo=function(e){V.getVideo(e)?(V.setCurrentVideo(e),n(o)):window.PreviewErrorHandling&&window.PreviewErrorHandling.javascriptError(new Error("The video "+e+" has not been registered with the player."))},L.play=function(e){e&&V.hasMultipleVideos()&&!V.isSameAsCurrentVideo(e)&&(V.setCurrentVideo(e),o()),i(function(){u.play()}.bind(this))},L.pause=function(){u.pause()},L.pauseOnExitViewport=function(e){var t;t=e||0,e1.Events.onChange("scrollPercent",function(e){!(e<=-.3||1.3<=e)||u.paused()||R||(R=!0,setTimeout(function(){u.pause()},t))})},L.isPlaying=function(){return u&&!u.paused()},L.onPlayerLoad=function(e){n(e)},L.onVideoLoad=function(e){i(e)},L.onMetadataLoad=function(e){C.push(["metadataloaded",e])},L.onPause=function(e){C.push(["pause",e])},L.onPlay=function(e){C.push(["play",e])},L.onQuartile=function(e){C.push(["quartile",e])},L.onTimeUpdate=function(e){C.push(["timeupdate",e])},L.getDuration=function(){return v},L.onComplete=function(e){C.push(["played",e])},L.onDone=L.onComplete,L.onFullscreenChanged=function(e){C.push(["fullscreenchange",e])},L.onVolumeChange=function(e){C.push(["volumechange",e])},L.onMute=function(e){C.push(["mute",e])},L.onUnmute=function(e){C.push(["unmute",e])},L.onDurationChange=function(e){C.push(["durationchange",e])},L.toggleFullscreen=function(e){e?u.requestFullscreen():u.exitFullscreen()},L.setVolume=function(e){i(function(){u.volume(e)}.bind(this))},L.getVolume=function(){return I&&!u.muted()?u.volume():0},L.mute=function(){i(function(){y=u.volume(),u.muted(!0)}.bind(this))},L.unMute=function(){i(function(){u.muted(!1),u.volume(y)}.bind(this))},L.unmute=L.unMute,L.replay=function(){i(function(){u.currentTime(0),this.play()}.bind(this))},L.addClickThrough=function(e){G=e,i(a)},L.addClickthrough=L.addClickThrough,L.isVerticalVideo=function(){f=16/9*100,d()},L.controls=function(e){i(function(){u.controls=e||!u.controls})},L.getVideoId=function(){return V.getCurrentVideoId()},L.isMuted=function(){return u.muted()},L.hasCaptions=function(){return!!V.getCurrentVideo().vtt},L.hasCaptionsOn=function(){var e=t();return!!e&&"showing"===e.mode},L.showCaptions=function(){var e=t();e&&(e.mode="showing")},L.hideCaptions=function(){var e=t();e&&(e.mode="hidden")},e}(),HymnalLib.VideoController={init:function(n,e,t){t=void 0!==t?t:{};var i=document.createElement("div");i.id="ad__video-controller-v2",i.innerHTML=['<div id="ad__video-cover-v2"></div>','<div id="ad__controls-left-v2">','<svg id="ad__progress-bar-v2" width="100px" height="100px" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path id="progress-circle" d="M 50,50 m 0,-47 a 47,47 0 1 1 0,94 a 47,47 0 1 1 0,-94" stroke="#FFFFFF" stroke-width="4" fill-opacity="0" stroke-dasharray="295.416" stroke-dashoffset="0"></path></svg>','<button id="ad__play-pause-v2" type="button">','<svg id="play-icon" width="23px" height="28px" viewBox="0 0 23 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Play Icon</title><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(0.554429, -0.385476)" fill="#FFFFFF"><path d="M12.417663,4.21689931 L24.6382793,24.2936262 C24.9254381,24.765387 24.7757885,25.3806129 24.3040277,25.6677717 C24.1473619,25.7631334 23.9674875,25.8135731 23.7840808,25.8135731 L-0.65715193,25.8135731 C-1.20943668,25.8135731 -1.65715193,25.3658579 -1.65715193,24.8135731 C-1.65715193,24.6301663 -1.60671227,24.450292 -1.51135049,24.2936262 L10.7092659,4.21689931 C10.9964246,3.74513847 11.6116505,3.59548893 12.0834114,3.8826477 C12.2199396,3.96575182 12.3345588,4.0803711 12.417663,4.21689931 Z" transform="translate(11.563464, 14.313573) rotate(-270.000000) translate(-11.563464, -14.313573)"></path></g></g></svg>','<svg id="pause-icon" width="24px" height="25px" viewBox="0 0 24 25" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Pause Icon</title><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="pause-button" fill="#FFFFFF" fill-rule="nonzero"><rect x="0" y="0" width="8" height="25" rx="1"></rect><rect x="16" y="0" width="8" height="25" rx="1"></rect></g></g></svg>',"</button>","</div>",'<div id="ad__controls-right-v2">','<button id="ad__volume-v2" type="button">','<svg id="volume-icon" width="36px" height="28px" viewBox="0 0 36 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Volume Icon</title><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(-0.053082, -0.754685)" fill="#FFFFFF"><g id="sound-on-icon" transform="translate(23.000000, 2.620742)" fill-rule="nonzero"><path d="M0,2.82107198 C5.2523271,2.82107198 9.51017949,7.07892437 9.51017949,12.3312515 C9.51017949,17.5835786 5.2523271,21.841431 0,21.841431 L0,23.841431 C6.3568966,23.841431 11.5101795,18.6881481 11.5101795,12.3312515 C11.5101795,5.97435487 6.3568966,0.821071975 0,0.821071975 L0,2.82107198 Z"></path><path d="M0,16.421491 C2.25897691,16.421491 4.09023952,14.5902284 4.09023952,12.3312515 C4.09023952,10.0722746 2.25897691,8.24101195 0,8.24101195 L0,16.421491 Z"></path></g><g id="sound-off-icon" transform="translate(23.000000, 8.120742)"><path d="M6.43394777,5.30148101 L10.6279044,1.10752437 C11.0184287,0.717000083 11.6515937,0.717000083 12.042118,1.10752437 C12.4326423,1.49804867 12.4326423,2.13121365 12.042118,2.52173794 L7.84816133,6.71569457 L12.042118,10.9096512 C12.4326423,11.3001755 12.4326423,11.9333405 12.042118,12.3238648 C11.6515937,12.7143891 11.0184287,12.7143891 10.6279044,12.3238648 L6.43394777,8.12990814 L2.23999113,12.3238648 C1.84946684,12.7143891 1.21630186,12.7143891 0.825777569,12.3238648 C0.435253278,11.9333405 0.435253278,11.3001755 0.825777569,10.9096512 L5.01973421,6.71569457 L0.825777569,2.52173794 C0.435253278,2.13121365 0.435253278,1.49804867 0.825777569,1.10752437 C1.21630186,0.717000083 1.84946684,0.717000083 2.23999113,1.10752437 L6.43394777,5.30148101 Z"></path></g><g><path d="M5.87942128,4.62074207 L14.3338651,4.62074207 C14.8861499,4.62074207 15.3338651,5.06845732 15.3338651,5.62074207 L15.3338651,11.3246204 C15.3338651,11.5390699 15.4028042,11.7478391 15.5305084,11.9201185 L23.7623207,23.0252439 C24.0912052,23.4689256 23.9981438,24.0952142 23.5544622,24.4240988 C23.3821827,24.551803 23.1734135,24.6207421 22.958964,24.6207421 L-2.71945424,24.6207421 C-3.27173899,24.6207421 -3.71945424,24.1730268 -3.71945424,23.6207421 C-3.71945424,23.4062926 -3.65051521,23.1975234 -3.52281093,23.0252439 L4.68277797,11.9554952 C4.81048225,11.7832157 4.87942128,11.5744465 4.87942128,11.359997 L4.87942128,5.62074207 C4.87942128,5.06845732 5.32713653,4.62074207 5.87942128,4.62074207 Z" transform="translate(10.119832, 14.620742) rotate(-90.000000) translate(-10.119832, -14.620742)"></path></g></g></g></svg>',"</button>",'<button id="ad__captions-v2" type="button">','<svg id="captions-icon" width="33px" height="26px" viewBox="0 0 33 26" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Captions Icon</title><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(-0.083802, 0.745315)" fill="#FFFFFF" fill-rule="nonzero"><path d="M2.82314732,3.0493135 L2.82314732,22.1921706 C2.82314732,22.7444554 3.27086257,23.1921706 3.82314732,23.1921706 L29.8231473,23.1921706 C30.3754321,23.1921706 30.8231473,22.7444554 30.8231473,22.1921706 L30.8231473,3.0493135 C30.8231473,2.49702875 30.3754321,2.0493135 29.8231473,2.0493135 L3.82314732,2.0493135 C3.27086257,2.0493135 2.82314732,2.49702875 2.82314732,3.0493135 Z M2.82314732,0.0493134971 L30.8231473,0.0493134971 C31.9277168,0.0493134971 32.8231473,0.944743997 32.8231473,2.0493135 L32.8231473,23.1921706 C32.8231473,24.2967401 31.9277168,25.1921706 30.8231473,25.1921706 L2.82314732,25.1921706 C1.71857782,25.1921706 0.823147316,24.2967401 0.823147316,23.1921706 L0.823147316,2.0493135 C0.823147316,0.944743997 1.71857782,0.0493134971 2.82314732,0.0493134971 Z"></path><g transform="translate(8.823147, 7.120742)"><path d="M7.06928874,7.00321119 C7.06928874,8.79266386 5.48677455,10.2433019 3.53464437,10.2433019 C1.58251419,10.2433019 0,8.79266386 0,7.00321119 C0,6.99684677 2.00181633e-05,3.75039597 5.99999215e-05,3.74404018 C0.0112615005,1.96336744 1.58945719,0.52302984 3.53464437,0.52302984 C5.47995576,0.52302984 7.05822879,1.96355139 7.06923087,3.74438129 L5.5692595,3.75364821 C5.56353485,2.82703996 4.68174532,2.02302984 3.53464437,2.02302984 C2.3876223,2.02302984 1.5058588,2.82693817 1.50003032,3.75347589 C1.50003745,4.15229232 1.50003745,4.15229232 1.50001501,5.3736409 C1.5000025,6.59344039 1.5000025,6.59344039 1.5,7.00321119 C1.5,7.93369376 2.38320884,8.74330186 3.53464437,8.74330186 C4.6860799,8.74330186 5.56928874,7.93369376 5.56928874,7.00321119 L7.06928874,7.00321119 Z"></path><path d="M15.9058997,6.9627818 C15.9058997,8.75223447 14.3233855,10.2028725 12.3712553,10.2028725 C10.4191251,10.2028725 8.83661093,8.75223447 8.83661093,6.9627818 C8.83661093,6.95641739 8.83663095,3.70996658 8.83667093,3.70361079 C8.84787243,1.92293805 10.4260681,0.482600453 12.3712553,0.482600453 C14.3165667,0.482600453 15.8948397,1.923122 15.9058418,3.7039519 L14.4058704,3.71321882 C14.4001458,2.78661058 13.5183562,1.98260045 12.3712553,1.98260045 C11.2242332,1.98260045 10.3424697,2.78650878 10.3366413,3.7130465 C10.3366484,4.11186294 10.3366484,4.11186294 10.3366259,5.33321151 C10.3366134,6.553011 10.3366134,6.553011 10.3366109,6.9627818 C10.3366109,7.89326437 11.2198198,8.70287248 12.3712553,8.70287248 C13.5226908,8.70287248 14.4058997,7.89326437 14.4058997,6.9627818 L15.9058997,6.9627818 Z"></path></g></g></g></svg>',"</button>",'<button id="ad__minmax-v2" type="button">','<svg id="minmax-icon" width="28px" height="29px" viewBox="0 0 28 29" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Minmax Icon</title><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(0.030119, 0.745315)" fill="#FFFFFF" fill-rule="nonzero"><g id="max-icon" transform="translate(-0.000000, 0.000000)"><path d="M3.44278989,19.0571526 L10.6785305,26.2928932 C11.0690547,26.6834175 11.0690547,27.3165825 10.6785305,27.7071068 C10.2880062,28.0976311 9.65484119,28.0976311 9.26431689,27.7071068 L2.02857632,20.4713662 L2.02857632,27 C2.02857632,27.5522847 1.58086107,28 1.02857632,28 C0.476291575,28 0.028576325,27.5522847 0.028576325,27 L0.028576325,18.9610479 C0.028576325,17.9095556 0.880979247,17.0571526 1.93247154,17.0571526 L9.97142368,17.0571526 C10.5237084,17.0571526 10.9714237,17.5048679 10.9714237,18.0571526 C10.9714237,18.6094374 10.5237084,19.0571526 9.97142368,19.0571526 L3.44278989,19.0571526 Z" transform="translate(5.500000, 22.528576) rotate(-90.000000) translate(-5.500000, -22.528576)"></path><path d="M20.3541815,2.15006988 L27.5899221,9.38581045 C27.9804464,9.77633474 27.9804464,10.4094997 27.5899221,10.800024 C27.1993978,11.1905483 26.5662328,11.1905483 26.1757086,10.800024 L18.939968,3.56428344 L18.939968,10.0929172 C18.939968,10.645202 18.4922527,11.0929172 17.939968,11.0929172 C17.3876832,11.0929172 16.939968,10.645202 16.939968,10.0929172 L16.939968,2.05396509 C16.939968,1.0024728 17.7923709,0.150069876 18.8438632,0.150069876 L26.8828153,0.150069876 C27.4351001,0.150069876 27.8828153,0.597785126 27.8828153,1.15006988 C27.8828153,1.70235463 27.4351001,2.15006988 26.8828153,2.15006988 L20.3541815,2.15006988 Z" transform="translate(22.411392, 5.621494) rotate(-270.000000) translate(-22.411392, -5.621494)"></path></g><g id="min-icon" transform="translate(-0.000000, 0.000000)"><path d="M3.44278989,19.0571526 L10.6785305,26.2928932 C11.0690547,26.6834175 11.0690547,27.3165825 10.6785305,27.7071068 C10.2880062,28.0976311 9.65484119,28.0976311 9.26431689,27.7071068 L2.02857632,20.4713662 L2.02857632,27 C2.02857632,27.5522847 1.58086107,28 1.02857632,28 C0.476291575,28 0.028576325,27.5522847 0.028576325,27 L0.028576325,18.9610479 C0.028576325,17.9095556 0.880979247,17.0571526 1.93247154,17.0571526 L9.97142368,17.0571526 C10.5237084,17.0571526 10.9714237,17.5048679 10.9714237,18.0571526 C10.9714237,18.6094374 10.5237084,19.0571526 9.97142368,19.0571526 L3.44278989,19.0571526 Z" transform="translate(5.500000, 22.528576) rotate(-270.000000) translate(-5.500000, -22.528576)"></path><path d="M20.3541815,2.15006988 L27.5899221,9.38581045 C27.9804464,9.77633474 27.9804464,10.4094997 27.5899221,10.800024 C27.1993978,11.1905483 26.5662328,11.1905483 26.1757086,10.800024 L18.939968,3.56428344 L18.939968,10.0929172 C18.939968,10.645202 18.4922527,11.0929172 17.939968,11.0929172 C17.3876832,11.0929172 16.939968,10.645202 16.939968,10.0929172 L16.939968,2.05396509 C16.939968,1.0024728 17.7923709,0.150069876 18.8438632,0.150069876 L26.8828153,0.150069876 C27.4351001,0.150069876 27.8828153,0.597785126 27.8828153,1.15006988 C27.8828153,1.70235463 27.4351001,2.15006988 26.8828153,2.15006988 L20.3541815,2.15006988 Z" transform="translate(22.411392, 5.621494) rotate(-90.000000) translate(-22.411392, -5.621494)"></path></g></g></g></svg>',"</button>","</div>"].join(""),e.appendChild(i);var a=document.getElementById("ad__video-cover-v2"),o=document.getElementById("ad__controls-left-v2"),r=document.getElementById("ad__controls-right-v2"),s=document.getElementById("progress-circle"),l=document.getElementById("ad__play-pause-v2"),d=document.getElementById("play-icon"),c=document.getElementById("pause-icon"),e=document.getElementById("ad__volume-v2"),g=document.getElementById("sound-on-icon"),u=document.getElementById("sound-off-icon"),h=document.getElementById("ad__captions-v2");t.enableCover&&a.addEventListener("click",function(){n.isPlaying()?(n.pause(),t.enableClickThrough&&t.enableClickThrough()):n.play()}),l.addEventListener("click",function(){n.isPlaying()?n.pause():n.play()}),e.addEventListener("click",function(){n.isMuted()?n.unmute():n.mute()}),h.addEventListener("click",function(){n.hasCaptionsOn()?(n.hideCaptions(),h.style.opacity="0.5"):(n.showCaptions(),h.style.opacity="1")}),n.onPlay(function(){i.style.display="block",d.style.display="none",c.style.display="block",n.isMuted()?(g.style.display="none",u.style.display="block"):(g.style.display="block",u.style.display="none"),n.hasCaptions()||(h.style.display="none"),t.hideControlsWrapper&&(i.style.display="none"),t.hideControls&&(o.style.display="none",r.style.display="none",n.hasCaptionsOn()&&n.hideCaptions())}),n.onPause(function(){d.style.display="block",c.style.display="none"}),n.onTimeUpdate(function(e){var t=s.getAttribute("stroke-dasharray"),e=t/n.getDuration()*e;s.style.strokeDashoffset=t-e,n.isPlaying()||(s.style.strokeDashoffset=getComputedStyle(s).strokeDashoffset)}),n.onMute(function(){g.style.display="none",u.style.display="block"}),n.onUnmute(function(){g.style.display="block",u.style.display="none"})}},function(n){function t(e){if(G.connectionEstablished)try{e()}catch(e){u(e)}else G.subs.connectionEstablished.push(e);return w()}function i(){return G.data.current}function a(e,t,n){return G.connectionEstablished?n?G.subs[e].push(function(e,t){var n=Math.max(e[0],e[1]),i=Math.min(e[0],e[1]);return function(e){if(i<=e&&e<=n)try{t.call(this,e)}catch(e){u(e)}}.bind(this)}(n,t)):G.subs[e].push(t):w(a,[e,t,n]),this}function o(e){return"function"==typeof e&&a("scrollOffset",e)}function r(e){if(!G.connectionEstablished)return w(r,[e]),this;if(v(e))return G.data.current[e];e="<code>"+e+"</code> is not a known Hymnal.Events property. You can get the following data: <code>"+Object.keys(G.data.current).join(", ")+"</code>";u(new Error(e))}function s(){var e=3!==arguments.length||Array.isArray(arguments[2]),t="";return 0!==t.length||v(arguments[0])||(t+="<code>"+arguments[0]+"</code> is not a known Hymnal.Events property. You can subscribe to changes on: <code>"+Object.keys(G.data.current).join(", ")+"</code> \n"),"function"!=typeof arguments[1]&&(t+="The second argument to Hymnal.Events.onChange should be the function that you want executed when the value changes. \n"),e||(t+="The third argument to Hymnal.Events.onChange should be an array with two values: the floor of the range and the celing of the range. \n"),0<t.length?u(new Error(t)):a.apply(this,arguments)}function l(e,t){if((!e||!t)&&window.console&&window.console.error)return console.error("ShallowQueue requires an event name and a callback to fire"),!1;v(e)&&(G.subs[e+"Shallow"]=t)}function d(){for(var e=["windowWidth","windowHeight","documentHeight","scrollOffset","frameHeight","frameWidth","frameTopPos","framePosOnPage","scrollPercent","unisonTabBarVisibility","isUnison","scrollDirection"],t=G.data.current={},n=0;n<e.length;n++)t[e[n]]=Z}function c(e){e.token&&(G.token=e.token,window.addEventListener("message",function(e){var t=e.data.token&&e.data.token===G.token,n=e.data.sender&&"parent"===e.data.sender;if(!t||!n)return!1;e.data.type&&"turbo"===e.data.type?function(e){var t=G.data.turbo;if(t.previous=t.current,t.current=e,t.previous!==t.current)try{t.cb(t.current)}catch(e){u(e)}}(e.data.params):((n=G.data).previous?n.previous=n.current:(n.previous=n.current,m()),n.current=e.data.params,A())}))}function g(t){G.subs[t]&&G.subs[t].length&&G.subs[t].forEach(function(e){try{e(G.data.current[t])}catch(e){u(e)}}),G.subs[t+"Shallow"]&&"function"==typeof G.subs[t+"Shallow"]&&(G.subs[t+"Shallow"](),G.subs[t+"Shallow"]=null)}function u(e){G.throwErrorsToPreview?window.PreviewErrorHandling.javascriptError(e):window.console&&window.console.error&&console.log(e)}function h(){if(0<G.subs.connectionEstablished.length){var e=G.subs.connectionEstablished;do{try{e.shift()()}catch(e){u(e)}}while(e.length)}}function m(){for(var e in G.data.current)G.data.current.hasOwnProperty(e)&&(G.subs[e]=[]);G.connectionEstablished=!0,Date.now()>G.timeout&&w(null,null,!0)}function p(e){var t={sender:"child",token:G.token};e&&(t.func=e),n.settings.inPreview&&(t.inIframe=!0),parent.postMessage(t,(t=window.location).origin||t.protocol+"//"+t.hostname+(t.port?":"+t.port:""))}function C(){if(G.connectionEstablished)return!0;try{parent&&parent.frameElement}catch(e){return console.log("This hymnal ad is in a sandboxed iframe that is not a safeframe. We can't finish rendering."),function(){G.data.previous={};var e,t={windowWidth:window.outerWidth,windowHeight:window.outerHeight,frameHeight:window.innerHeight,frameWidth:window.innerWidth,unisonTabBarVisibility:Z,isUnison:Z,inViewport:!0,scrollOffset:0};for(e in t)G.data.previous[e]!==t[e]&&(G.data.current[e]=t[e],g(e),G.data.previous[e]=t[e]);m(),h()}()}return p(),Date.now()<G.timeout?setTimeout(C,50):void 0}function I(e){if(!G.connectionEstablished)return w(I,[e]),this;G.data.turbo={cb:e,current:G.data.current.scrollPercent||0,previous:G.data.current.scrollPercent||0},p("turboMode")}function f(e){n.util.isSafeFrame||p(e+"RefreshEligibility")}function b(e,t){var n;switch(e){case"show":n="showUnisonTabBar";break;case"hide":n="hideUnisonTabBar";break;case"reset":n="resetToDefaultUnisonTabBar";break;default:return console.error('Allowed values for requestUnisonTabBar are "show", "hide", "reset".'),!1}t&&l("unisonTabBarVisibility",t),p(n)}function A(){var e,t=G.data;for(e in t.current)t.current.hasOwnProperty(e)&&t.previous.hasOwnProperty(e)&&t.current[e]!==t.previous[e]&&g(e)}function y(){var e,t=$sf.ext.geom().win,n=$sf.ext.geom().self,i=($sf.ext.geom().exp,{windowWidth:t.w,windowHeight:t.h,frameHeight:n.h,frameWidth:n.w,unisonTabBarVisibility:Z,isUnison:Z,inViewport:0<n.iv,scrollOffset:n.t});for(e in i)G.data.previous[e]!==i[e]&&(G.data.current[e]=i[e],g(e),G.data.previous[e]=i[e])}function v(e){return G.data.current.hasOwnProperty(e)}function w(e,t,n){function i(){if(a=!1,Date.now()>=G.timeout&&!n)return!1;if(G.connectionEstablished){if(h(),0<W.length)do{var e=W.shift()}while(e&&e[0].apply(this,e[1]),0<W.length);return!0}return setTimeout(i,50)}var a=!0;!G.connectionEstablished&&e&&W.push([e,t]),!G.connectionEstablished&&a&&(G.clearQueue=i()),n&&i()}if(n&&!n.util)return window.console&&window.console.error&&console.error("Hymnal must be the Hymnal library");var Z=-1,G={token:null,connectionEstablished:!1,throwErrorsToPreview:!1,events:["resize","scroll"],subs:{connectionEstablished:[]},data:{},timeout:Date.now()+3e3},W=[];n.IframeEventLib=function(e){return e=e,n.util.isSafeFrame||(window.PreviewErrorHandling&&(G.throwErrorsToPreview=!0),d(),c(e),(e.inIframe||n.settings.inPreview)&&C(),n.settings.inPreview&&window.addEventListener("resize",function(){var e=G.data,t={};for(key in e.current)e.current.hasOwnProperty(key)&&(t[key]=e.current[key]);e.previous=t,e.current.frameWidth=window.innerWidth||document.documentElement.clientWidth,e.current.frameHeight=window.innerHeight||document.documentElement.clientHeight,A()})),n.util.isSafeFrame&&(d(),G.data.previous={},y(),m(),$sf.ext.register(1,1,function(e){"geom-update"===e&&y()})),{data:i,get:r,once:l,onChange:s,onScroll:o,requestUnisonTabBar:b,requestRefreshEligibility:f,whenLive:t,turboMode:I}}}(HymnalLib),e3="undefined"!=typeof exports?exports:self,f3="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",(d3.prototype=new Error).name="InvalidCharacterError",e3.btoa||(e3.btoa=function(e){for(var t,n,i=String(e),a=0,o=f3,r="";i.charAt(0|a)||(o="=",a%1);r+=o.charAt(63&t>>8-a%1*8)){if(255<(n=i.charCodeAt(a+=.75)))throw new d3("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");t=t<<8|n}return r}),e3.atob||(e3.atob=function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new d3("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,i,a=0,o=0,r="";i=t.charAt(o++);~i&&(n=a%4?64*n+i:i,a++%4)&&(r+=String.fromCharCode(255&n>>(-2*a&6))))i=f3.indexOf(i);return r}),v3=window.Element.prototype,"function"!=typeof v3.closest&&(v3.closest=function(e){var t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(e))return t}while(null!==(t=t.parentElement||t.parentNode)&&1===t.nodeType);return null}),y3=window.Element.prototype,"function"!=typeof y3.matches&&(y3.matches=y3.msMatchesSelector||y3.mozMatchesSelector||y3.webkitMatchesSelector||y3.oMatchesSelector||y3.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=0;t[n]&&t[n]!==this;)++n;return Boolean(t[n])}),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)===e}),F3=HymnalLib,F3.IframeStyleHelper||(F3.IframeStyleHelper={addStyles:function(e,t,n){F3.settings.inPreview||(e='<style type="text/css" data-for-hymnal-ad="'+e.getSlug()+'">'+t+"</style>",t=null,t=(n?parent.document:document).getElementsByTagName("head"),$(t).append(e))}}),function(t){"use strict";if("object"!=typeof t)return console.error("Hymnal must be the Hymnal library");var n,i,a,o;t.MetricsReporting=(n="hymnal_event",i=window.location.hostname,o=a=null,function(){void 0===window.phonographEvents&&(window.phonographEvents=[],(e=document.createElement("script")).src="https://phonograph2.voxmedia.com/pickup.js",e.type="text/javascript",e.async=!0,document.body.appendChild(e)),adCallbacks.afterRender(function(){a=this.id,o=this.variantID});var e={};return e.log=function(e){e&&(e=e,a&&(e={action:e,ad_id:a,network:i},o&&(e.variant_id=o),t.settings.inPreview?console.log("[fake] Logging to Phonograph",e):window.phonographEvents.push([n,e])))},e.trackVideo=function(e){e.onPlay(function(){this.log("play")}.bind(this)),e.onQuartile(function(e){this.log(e+"pct_played")}.bind(this)),e.onPause(function(){this.log("pause")}.bind(this))},e})}(HymnalLib),function(e){"use strict";if("object"!=typeof e)return console.error("Hymnal must be the Hymnal library");function t(){}var n,i;e.MetricPixels=(n=[],i=[],(e=t.prototype={}).add=function(e,t){n.push([e,t])},e.log=function(e){var t;i.push(e),t=e,n.filter(function(e){return e[0]==t}).map(function(e){return e[1]}).forEach(function(e){!function(e){e+=(-1==e.indexOf("?")?"?":"&")+"mp_uniq="+Math.floor(1e4*Math.random());var t=document.createElement("img");t.setAttribute("src",encodeURI(e)),t.setAttribute("height","1"),t.setAttribute("width","1"),t.setAttribute("data-metric-pixels",!0),t.setAttribute("style","position:absolute; top:0; left:0; visibility:hidden;");e=document.body;e.insertBefore(t,e.firstChild)}(e)}.bind(this))},e.logNonRepeatable=function(e){-1==i.indexOf(e)&&this.log(e)},e.addVideoTrackers=function(e){e&&e.forEach(function(t){t.urls.forEach(function(e){this.add(t.event,e),this.add(t.event.replace(/_/g,"-"),e)}.bind(this))}.bind(this))},e.trackVideo=function(e){e&&"function"==typeof e.onPlay&&(e.onPlay(function(){this.log("video-start")}.bind(this)),e.onQuartile(function(e){this.log("video-"+e)}.bind(this)),e.onPause(function(){this.log("video-pause")}.bind(this)))},t)}(HymnalLib),we=HymnalLib,we.Data||(we.Data=function(e,t){$.getJSON(e).done(t)}),ze=HymnalLib,ze.ConcertConfig||(ze.ConcertConfig=(Ae="VoxConcertAd",{get:function(e,t){return Ce(e)?window[Ae][e]:t},has:Ce=function(e){return window[Ae]&&window[Ae].hasOwnProperty(e)}})),function(n){function e(e){var t=!!e.data&&e.data;try{t=JSON.parse(t)}catch(e){return!0}if(t.key===r.concertKey&&t.token){if("ad"===t.sender)return!1;r.origin=e.origin,r.source=e.source,a||(a=!0,r.token=t.token,t.response.api,n.AdSetup.deferToConcierge(),i(),function(){for(;0<o.length;){var e=o.shift();i(e[0],e[1])}}()),t.response&&t.response.type&&(t=t.response,console.log("received message",t))}}function i(e,t){if(!a)return o.push([e,t]),!0;t={key:r.concertKey,token:r.token,sender:"ad",func:e,args:t};try{r.source.postMessage(JSON.stringify(t),r.origin)}catch(e){throw new Error("Tried to postMessage to parent window, got error.")}return!0}if(n&&!n.util)return window.console&&window.console.error&&console.error("Hymnal must be the Hymnal library");var a=!1,o=[],r={safeFrameKey:"nullValueUntilOverridden",origin:!1,concertKey:"concertAdConfig",token:null,source:null};window.addEventListener("message",e),n.Messenger={registerRatiosWithConcierge:function(e){e={mobile:{query:"(max-width: 727px)",ratio:e.aspectRatios.defaultSmall,heightAdjustment:e.preambleEnabled?20:0},desktop:{query:"(min-width: 728px)",ratio:e.aspectRatios.defaultLarge,heightAdjustment:e.preambleEnabled?20:0}},n.settings.inPreview?i("previewRatios",e):i("registerAspectRatios",e)},sendMessage:i}}(HymnalLib),_e=HymnalLib,_e.Swiper||(a4.prototype={_initSlides:function(e){e&&(this.slideWidth=e);e=(this.slideWidth*this.totalSlides).toString()+"px";this.wrapper.style.width=e},_initListeners:function(){var t=this,e="ontouchstart"in window,n=e?"touchmove":"mousemove",i=e?"touchend":"mouseup";this.scrollElement.addEventListener(e?"touchstart":"mousedown",function(e){t.updatePos(e,"start")}),this.scrollElement.addEventListener(n,function(e){t.updatePos(e,"move")}),this.scrollElement.addEventListener(i,function(e){t.updatePos(e,"end")}),this.scrollElement.addEventListener("fakeTouch",function(e){t.updatePos(e,"fake")})},toggleTransition:function(e){this.transitionOn=!!e;e=e?"transform .2s ease-out":"";_e.Prefix&&_e.Prefix.js&&(this.wrapper.style[_e.Prefix.js+"Transition"]=_e.Prefix.css+e),this.wrapper.style.transition=e},setTransform:function(e){_e.Prefix&&_e.Prefix.js&&(this.wrapper.style[_e.Prefix.js+"Transform"]="translate3D("+e+"px,0,0)"),this.wrapper.style.transform="translate3D("+e+"px,0,0)"},validSwipe:function(e){e=0<e?e:-1*e;return e-=this.activeSlide*this.slideWidth,Math.floor(this.slideWidth/e)<3},findSlide:function(e){var t=this.totalSlides-1,n=this.activeSlide;if(this.validSwipe(e.x))switch(e.direction){case"right":n=0===n?n:n-1;break;case"left":n=n===t?n:n+1}return n},snapToSlide:function(e){e=this.findSlide(e);this.setTransform(-1*e*this.slideWidth),this.activeSlide=e},triggerUpdateEvent:function(){var e=new CustomEvent("slideChange",{detail:this.activeSlide+1});this.parent.dispatchEvent(e)},updatePos:function(e,t){var n="fake"===t?e.detail.x:e.pageX||e.changedTouches[0].pageX;switch(t){case"start":this.toggleTransition(),this.onMove=new _e.MoveEvent({current:this.activeSlide*this.slideWidth*-1,newVal:n});break;case"move":this.onMove&&(this.preventDefault=!0,this.setTransform(this.onMove.update(n)));break;case"end":this.preventDefault&&(e.preventDefault(),this.preventDefault=!1),this.toggleTransition(!0),this.snapToSlide(this.onMove.end(n)),this.onMove=null,this.triggerUpdateEvent();break;case"fake":this.toggleTransition(!0),this.snapToSlide(e.detail),this.triggerUpdateEvent()}}},_e.Swiper=a4),B4=HymnalLib,B4.MoveEvent||(C4.prototype={update:function(e){return this.eventCurrent=this.eventBase-e,this.initial-this.eventCurrent},end:function(e){e={x:this.update(e),direction:""};return this.initial===this.eventCurrent||(0<=this.initial?e.direction=e.x<this.initial?"left":"right":e.direction=e.x>this.initial?"right":"left"),e}},B4.MoveEvent=C4),function(r){function s(){return y.frame}function i(){y.conciergePresent=!0}function l(e){var t="activeSmall",e=e||r.Events.get("windowWidth");if(r.settings.inPreview)try{t=y.parent.classList.contains("small-active")?"activeSmall":"activeLarge"}catch(e){t="activeLarge"}else t=727<e?"activeLarge":"activeSmall";return t}function a(e){var t=l(e),e=y.aspectRatios[t];if(0===y.frame.clientWidth)return!(y.timeout&&!(y.timeout&&Date.now()>y.timeout))&&(y.timeout=y.timeout||Date.now()+1e3,setTimeout(a,300));"activeLarge"===t&&(y.maxHeights.active=y.maxHeights.large,y.maxWidths.active=y.maxWidths.large),"activeSmall"===t&&(y.maxHeights.active=y.maxHeights.small,y.maxWidths.active=y.maxWidths.small),n({width:y.widthOverridden?y.width:"100%",ratio:e})}function d(){return window.parent!==window.top}function n(o){return new Promise(function(e,t){var n,i,a;s()&&(a=r.ConcertConfig.get("selectorClassMutation",!1),Array.isArray(a)&&a.forEach(function(e){var t=y.parent.closest(e.selector);t&&(e.addClass&&t.classList.add.apply(t.classList,e.addClass.replace(/\s/g,"").split(",")),e.removeClass&&t.classList.remove.apply(t.classList,e.removeClass.replace(/\s/g,"").split(",")))}),c("before"),(y.maxHeights.active||y.maxWidths.active)&&(a=(i=o).ratio||y.aspectRatios[l()],y.maxHeights.active&&y.parent.clientWidth/a>=y.maxHeights.active&&(i.height=y.maxHeights.active,i.width=i.height*a),y.maxWidths.active&&y.parent.clientWidth>=y.maxWidths.active&&(i.width=y.maxWidths.active,i.height=i.width/a),o=i),o.width||(o.width=y.frame.width),y.frame.width=o.width,d()&&(parent.window.frameElement.width=o.width,parent.window.frameElement.style.width=o.width),!o.height&&o.ratio?o.height=y.frame.clientWidth/o.ratio:o.height||(o.height=y.frame.height),y.preambleEnabled&&!y.preambleOverlay&&(o.height=o.height+y.preambleHeight),d()&&(parent.window.frameElement.height=o.height+"px",parent.window.frameElement.style.height=o.height+"px"),r.ConcertConfig.get("forceIframeHeight",!1)&&(y.frame.style.height=o.height+"px"),r.ConcertConfig.get("resizeParentDiv",!1)&&(n=o,y.parent.style.height=n.height+"px"),y.frame.height=o.height,o.ratio||function(){var e=l();{var t;y.preambleOverlay?y.aspectRatios[e]=y.frame.clientWidth/y.frame.clientHeight:(t=y.frame.clientHeight-y.preambleHeight,y.aspectRatios[e]=y.frame.clientWidth/t)}}(),"sticky"===y.activePositioning&&(n={width:o.width,height:o.height},y.stickyCentered&&(n.width=null),m(n)),y.frame.height==o.height&&y.frame.width==o.width?(y.width=o.width,y.height=o.height,c("after"),A.forEach(function(e){e.call(null,{width:y.width,height:y.height,iframe:y.frame})}),e()):t("Frame sizing was unsuccessful."))})}function c(t){var e=r.ConcertConfig.get("selectorStyles",!1);Array.isArray(e)&&e.filter(function(e){return(e.when||"after")===t}).forEach(function(e){var t=y.parent.closest(e.selector);if(t)for(var n in e.styles)t.style[n]=function(e){return"function"==typeof e?e.call(this,y):e}(e.styles[n])})}function o(e,t){e=n({height:e="number"==typeof e?e.toString()+"px":e});y.heightOverridden=!0,t&&e.then(t)}function g(e,t){e=n({width:e="number"==typeof e?e.toString()+"px":e});y.widthOverridden=!0,t&&e.then(t)}function u(e){s()&&(y.frame.style.transition=e||"height 0.5s ease")}function h(){s()&&(y.frame.style.transition="")}function m(a){return new Promise(function(e,t){var n,i=!1;for(n in s()&&!r.settings.inPreview||(i="Frame cannot be modified."),y.parent.style.cssText=y.parentInlineStyles,a)!i&&a.hasOwnProperty(n)&&(y.parent.style[n]=a[n]);i?t(i):(y.activePositioning="fixed"===y.parent.display?"sticky":"standard",e())})}function p(e){"function"==typeof e&&A.push(e)}function C(e,t){var n={position:"fixed",height:y.height,zIndex:6000100};(e=e||{}).vertical?n[e.vertical]="0":n.bottom="0",e.horizontal?(n[e.horizontal]="0",n.width=y.frame.clientWidth.toString()+"px",y.stickyCentered=!1):(r.Events.get("windowWidth"),y.frame.clientWidth,n.left=0,n.right=0,n.margin=0,y.stickyCentered=!0),e.background&&(n.backgroundColor=e.background),e.margin&&(n.margin=e.margin),e.padding&&(n.padding=e.padding),e.timeout&&"number"==typeof e.timeout&&(y.timeout=setTimeout(I,e.timeout)),0<!Object.keys(y.cachedCSS).length&&function(e){if(s())for(var t in e){var n;e.hasOwnProperty(t)&&(n=window.getComputedStyle(y.parent),y.cachedCSS[t]=n[t])}}(n);n=m(n);t&&n.then(t)}function I(e){var t=m(y.cachedCSS);y.timeout&&clearTimeout(y.timeout),e&&t.then(e)}function f(){return"sticky"===y.activePositioning}function b(){y.parent.style.display="none"}if(r&&!r.util)return window.console&&window.console.error&&console.error("Hymnal must be the Hymnal library");var A=[],y={frame:null,parent:null,parentInlineStyles:"",height:0,heightOverridden:!1,width:"100%",widthOverridden:!1,activePositioning:"standard",stickyCentered:!1,cachedCSS:{},conciergePresent:!1,aspectRatios:{defaultSmall:0,activeSmall:0,defaultLarge:0,activeLarge:0},maxHeights:{small:!1,large:!1,active:!1},maxWidths:{small:!1,large:!1,active:!1},preambleOverlay:!1,preambleHeight:20,isLandscape:!1};r.AdDimensionsAndPositioning=function(e){if(!(r.settings.inPreview||renderInIframe&&isInIframe()))return!1;!e.aspectRatios&&console&&console.error&&console.error("Ad cannot be rendered without aspect ratios");try{y.frame=window.frameElement,y.parent=y.frame.parentElement,y.parentInlineStyles=y.parent.style.cssText}catch(e){y.frame=!1,y.parent=!1,y.parentInlineStyles=!1}e.conciergePresent&&(y.conciergePresent=e.conciergePresent),y.preambleOverlay=e.preambleOverlay,y.preambleEnabled=e.preambleEnabled,y.aspectRatios={defaultLarge:e.aspectRatios.desktop,activeLarge:e.aspectRatios.desktop,defaultSmall:e.aspectRatios.mobile,activeSmall:e.aspectRatios.mobile},y.maxHeights.large=e.maxHeights.desktop||r.ConcertConfig.get("maxHeightLarge",!1),y.maxHeights.small=e.maxHeights.mobile||r.ConcertConfig.get("maxHeightSmall",!1),y.maxWidths.large=r.ConcertConfig.get("maxWidthLarge",!1),y.maxWidths.small=r.ConcertConfig.get("maxWidthSmall",!1),y.preambleOverlay=e.preambleOverlay;var t=r.ConcertConfig.get("setGrandparentStyle",{});if(y.parent&&y.parent.parentElement)for(var n in t)y.parent.parentElement.style[n]=t[n];return r.Messenger.registerRatiosWithConcierge(y),r.Events.whenLive(function(){a(),r.Events.onChange("windowWidth",a),r.settings.inPreview&&window.frameElement&&window.frameElement.parentElement.addEventListener("previewResize",function(e){e&&e.detail&&e.detail.triggerSizeUpdate&&a()})}),{requestHeightChange:o,requestWidthChange:g,enableSizingAnimation:u,disableSizingAnimation:h,requestStickyPositioning:C,requestStandardPositioning:I,sizeDidChange:p,isSticky:f,hideAd:b,deferToConcierge:i}}}(HymnalLib),function(e){"use strict";if("object"!=typeof e)return console.error("Hymnal must be the Hymnal library");var a;e.Moat||(a=[],e.Moat={trackElement:function(e){if(e&&e.parentNode){for(var t,n=0;n<a.length&&!t;n++)e==a[n].elementToTrack&&(t=a[n]);if(!t){(t=document.createElement("div")).className="voxAdData",t.style.display="none";var i=e.parentNode&&e.parentNode.querySelector("script[src*=moat]");return null!==i?i.parentNode.insertBefore(t,i.nextSibling):e.parentNode.appendChild(t),t.elementToTrack=e,a.push(t),t}}}})}(HymnalLib),p5=HymnalLib,"object"!=typeof p5&&window.PreviewErrorHandling?window.PreviewErrorHandling.javascriptError(new Error("Hymnal must be the Hymnal library")):p5.MoatAnalytics=function(){"use strict";function n(){r=function(e,t,n,i,a){var o,r,s=document.createElement("script"),l=[];t={adData:{ids:t,duration:n,url:a},dispatchEvent:function(e){this.sendEvent?(l&&(l.push(e),e=l,l=!1),this.sendEvent(e)):l.push(e)}},n="_moatApi"+Math.floor(1e8*Math.random());try{o=e.ownerDocument,r=o.defaultView||o.parentWindow}catch(e){o=document,r=window}return r[n]=t,s.type="text/javascript",e&&e.insertBefore(s,e.childNodes[0]||null),s.src="https://z.moatads.com/"+i+"/moatvideo.js#"+n,t}(d,c,g,"voxvidint960547728228",u)}function o(e){r||n();var t=s.getVolume();r?r.dispatchEvent({type:e,adVolume:t}):console.error("ERROR: Something went wrong calling initMoatTracking()")}var r=!1,s=!1,l=!1,e={},d=!1,c=!1,g=!1,u=!1;return e.init=function(e,t,n,i,a){d=t,c=n,g=i,u=a,(s=e)?(s.onQuartile(function(e){"25"==e?o("AdVideoFirstQuartile"):"50"==e?o("AdVideoMidpoint"):"75"==e?o("AdVideoThirdQuartile"):"100"==e?(o("AdVideoComplete"),r=l=!1):console.error("Moat Analytics: Invalid quartile: "+e)}),s.onVolumeChange(function(){o("AdVolumeChange")}),s.onPlay(function(){l||(l=!0,o("AdVideoStart")),o("AdPlaying")}),s.onTimeUpdate(function(){l||(l=!0,o("AdVideoStart"),o("AdPlaying"))}),s.onPause(function(){o("AdPaused")})):console.error("No videoPlayer?")},e}(),function(C){"use strict";if("object"!=typeof C)return console.error("Hymnal must be the Hymnal library");var I={AD_FORMAT:"dimension3",ADVERTISER:"dimension18",BRIGHTCOVE_ID:"dimension1",DURATION:"dimension2",HYMNAL_ORDER:"dimension19",TEST_VARIANT:"dimension4",SITE:"dimension11",KRUX_USER_ID:"dimension20",LINE_ITEM_ID:"dimension21",CREATIVE_ID:"dimension22"};C.MetricGoogleAnalyticsAccountID="UA-96398693-1",C.MetricGoogleAnalytics=function(){function e(e){t=e||C.MetricGoogleAnalyticsAccountID,C.settings&&C.settings.inPreview?(console.log("Using Fake GA in Preview"),window.__ga=function(){for(var e=["Fake GA"],t=0;t<arguments.length;t++)e.push(arguments[t]);console.log.apply(null,e)}):function(e,t,n,i,a){e.GoogleAnalyticsObject=n,e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},e[n].l=+new Date,i=t.createElement("script"),a=t.getElementsByTagName("script")[0],i.async=1,i.src="https://www.google-analytics.com/analytics.js",a.parentNode.insertBefore(i,a)}(window,document,"__ga"),__ga("create",t,"auto"),__ga("set","location",function(){try{return C.util.isSafeFrame?document.referrer:window.location.host}catch(e){return document.referrer}}()),a()}function a(e){var t,n={};for(t in n[I.AD_FORMAT]=d,n[I.ADVERTISER]=l,n[I.HYMNAL_ORDER]=s,n[I.SITE]=function(){try{return C.util.isSafeFrame?document.referrer:window.ChorusAds&&window.ChorusAds.getVariable("network")?window.ChorusAds.getVariable("network")[0]:parent&&parent.ChorusAds&&parent.ChorusAds.getVariable("network")?parent.ChorusAds.getVariable("network")[0]:window.location.host}catch(e){return document.referrer}}(),n[I.KRUX_USER_ID]=function(){if(window.Krux&&window.Krux.user)return window.Krux.user;try{return parent.Krux.user}catch(e){return""}}(),n[I.LINE_ITEM_ID]=c,n[I.CREATIVE_ID]=g,e)I[t]&&(n[I[t]]=e[t]);__ga("set",n)}function i(e,t,n){var i=n||{};n={},h&&h.getVideoId()&&(n[I.BRIGHTCOVE_ID]=h.getVideoId(),__ga("set",n)),i.dimensions&&a(i.dimensions);i={eventCategory:e,eventAction:"ad:"+t,eventLabel:[r,o].filter(function(e){return 0<e.length}).join(" | "),eventValue:"number"==typeof i.value?parseInt(i.value):void 0,nonInteraction:!!i.nonInteraction};u&&function(e){var t=document.querySelector("#eventList");t||((t=document.createElement("ul")).id="eventList",t.style.cssText="position:absolute;left:0;right:0;top:20px;bottom:50%;background-color:rgba(0,0,0,.4);overflow:scroll;padding-left:30px;z-index:10000;font-size:14px;",document.querySelector(".ad__content").appendChild(t));var n=document.createElement("li");n.innerHTML="<strong>Sending event:</strong> "+JSON.stringify(e),n.style.color="white",t.appendChild(n)}(i),__ga("send","event",i)}var t=null,o=null,r=null,s=null,l=null,d=null,c=null,g=null,u=!1,h=null,m=[],p=!1;window.HymnalMetricsSetup?(o=HymnalMetricsSetup.adId||"",r=HymnalMetricsSetup.adName||"",HymnalMetricsSetup.variantId,HymnalMetricsSetup.adSlug,l=HymnalMetricsSetup.clientName||"",s=HymnalMetricsSetup.campaignName||"",d=HymnalMetricsSetup.adFormat||"",c=HymnalMetricsSetup.lineItemId||"",g=HymnalMetricsSetup.creativeId||""):adCallbacks.beforeRender(function(){o=this.id,r=this.adName,this.variantID,this.slug,l=this.brand,s=this.campaignName,d=this.design_template,c=this.lineItemId,g=this.creativeId});var n=e.prototype={};return n.debug=function(){u=!0},n.log=function(e,t,n){n=n||{},!h||p?i(e,t,n):m.push([e,t,n])},n.trackVideo=function(n){var t=[3,6,10,15,20,25,30];n&&"function"==typeof n.onPlay&&h!==n&&((h=n).onPlay(function(){this.log("video","start")}.bind(this)),n.onQuartile(function(e){this.log("video","quartile-"+e)}.bind(this)),n.onPause(function(){this.log("video","pause")}.bind(this)),n.onMute(function(){this.log("video","mute")}.bind(this)),n.onUnmute(function(){this.log("video","unmute")}.bind(this)),n.onTimeUpdate(function(e){e>=t[0]&&(e=t.shift(),this.log("video","time-"+e+"sec"))}.bind(this)),n.onDurationChange(function(){var e,t=n.getDuration();isNaN(t)||((e={})[I.DURATION]=Math.floor(t).toString(),__ga("set",e)),p=!0,0<m.length&&(m.forEach(function(e){i.apply(this,e)}),m=[])}))},e}()}(HymnalLib),e6=HymnalLib,o6=!1,p6=!1,q6=!1,r6=!1,s6=!1,t6=["question-1-active","question-2-active","question-3-active"],e6.FeedbackForm={InitForm:function(e){if(!e)return!1;var t,n;e.addEventListener("click",function(e){e.stopPropagation()}),r6=new e6.MetricGoogleAnalytics,p6=!!e.querySelector(".branded-content__feedback"),q6=e.querySelector(".feedback-form"),s6=e.querySelector(".feedback-questions"),formAnswers=e.querySelector(".feedback-answers"),p6||(t=e.querySelector(".ad__feedback__toggle-button"),e=e.querySelector(".feedback-form__close-button"),n=!1,t.addEventListener("click",function(){q6.classList.toggle("is-active"),n||(n=!0,window.requestAnimationFrame(g6))}),e.addEventListener("click",function(){q6.classList.toggle("is-active")})),answers=[].slice.call(formAnswers.querySelectorAll(".feedback-answer")),answers.forEach(function(e){e.addEventListener("click",h6)}),document.addEventListener("keyup",function(e){var t;e.defaultPrevented||("Escape"!==(t=e.key||e.keyCode)&&"Esc"!==t&&27!==t||m6(e))})},registerExitCallback:function(e){o6=e},showNextQuestion:function(){window.requestAnimationFrame(g6)}},HymnalLib.VideoPlaylist=function(){"use strict";function e(e){return e&&e.hasOwnProperty("mp4")?(n.default=e,t="default"):n=e,i}var n={},t="",i=e.prototype={};return i.addSource=function(e,t){if(!n[e])return t.hasOwnProperty("hls")&&t.hasOwnProperty("mp4")&&t.hasOwnProperty("vtt")&&t.hasOwnProperty("volume_id")?void(n[e]=t):void console.error("Invalid video source format: missing required fields")},i.hasMultipleVideos=function(){return 1<Object.keys(n).length},i.getCurrentVideo=function(){return n[t]},i.setCurrentVideo=function(e){n[e]&&(t=e)},i.isSameAsCurrentVideo=function(e){return n[t]&&n[e].volume_id===n[t].volume_id},i.getVideo=function(e){return n[e]},i.getCurrentVideoId=function(){return t&&n[t]?n[t].volume_id:null},e}(),HymnalLib.VideoJsLoader=function(){"use strict";function e(){if(d)return n(o,!1),n(l,!1),t(a).then(function(){return t(s)}).then(function(){return t(r)});Promise.resolve()}function t(i){return new Promise(function(e,t){var n=document.createElement("script");n.src=i,n.async=!0,n.onload=function(){e(i)},n.onerror=function(){t(i)},document.body.appendChild(n)})}function n(e,t){var n=document.createElement("link");return n.href=e,n.rel="stylesheet",n.type="text/css",t&&document.head.prepend?document.head.prepend(n):t?document.head.insertBefore(n,document.head.children[0]):document.head.appendChild(n),1}function i(e){return d=e,c}var a="https://hymnal-prod.vox-cdn.com/libraries/videojs/videojs-contrib-ads-6.3.0.min.js",o="https://hymnal-prod.vox-cdn.com/libraries/videojs/videojs-contrib-ads-5.1.6.min.css",r="https://hymnal-prod.vox-cdn.com/libraries/videojs/videojs-ima-pre-1.5.0.min.js",s="https://imasdk.googleapis.com/js/sdkloader/ima3.js",l="https://hymnal-prod.vox-cdn.com/libraries/videojs/videojs-ima-1.0.4.vox.css",d=!1,c=i.prototype={};return c.loadFiles=function(){return n("https://hymnal-prod.vox-cdn.com/libraries/videojs/video-6.6.0.min.css",!0),t("https://hymnal-prod.vox-cdn.com/libraries/videojs/video-6.6.0.min.js").then(e).then(function(){return t("https://hymnal-prod.vox-cdn.com/libraries/videojs/videojs-contrib-hls-5.12.2.min.js")}).catch(function(e){window.PreviewErrorHandling&&window.PreviewErrorHandling.javascriptError(e)})},i}(),qh=HymnalLib,qh.Poll||(qh.Poll=function(){"use strict";function t(e,t,n,i){var a=new XMLHttpRequest;a.onreadystatechange=function(){4===a.readyState&&i(a.responseText,a.status)},"GET"===t?(a.open("GET",e,!0),a.send()):(a.open("POST",e,!0),a.setRequestHeader("Content-type","application/json"),a.send(JSON.stringify(n)))}function e(e){if(t=e,new RegExp(/[^a-zA-Z0-9_-]/).test(t))throw new Error('Poll name is invalid. Must not contain special characters other than "-" or "_".');var t;return a=n+e+".json",o=i+e,r}var n="https://hymnal-prod.vox-cdn.com/polls/",i="https://plink.voxmedia.com/polls/",a=null,o=null,r=e.prototype={};return r.getResponses=function(n,i){t(a,"GET",!1,function(e,t){200===t?n(JSON.parse(e)):i(e)})},r.sendResponse=function(e,n){t(o+"/new_response","POST",{pollResponse:e},function(e,t){200!==t&&n(e)})},e}()),function(Hymnal){Hymnal.Events=Hymnal.IframeEventLib({inIframe:!1,token:eventAPIToken.toString()}),Hymnal.AdSetup=Hymnal.AdDimensionsAndPositioning({aspectRatios:{mobile:.6666666666666666,desktop:1.6898954703832754},maxHeights:{mobile:null,desktop:null},preambleOverlay:!1,preambleEnabled:!1,conciergePresent:window.concertConcierge||concertConciergeLikely});var setupConfig={id:"b302176a-5550-482a-8d62-e9be0489394e",slug:"house_promotions_covid_19_content_link_promo_b302176a-5550-482a-8d62-e9be0489394e",adName:"COVID 19 Content Link Promo",type:"Native Ad",campaign:"house_promotions_vox_com_covid_19_coverage_house_ads_3490",campaignName:"Vox.com COVID 19 Coverage House Ads",brand:"House Promotions",design_template:"Native Ad Content Link",disableSlotRefresh:!1,enableSlotReveal:!1,showFeedbackForm:!1,preambleEnabled:!1,preambleMarkup:'<div class="m-adbar">\n  <div class="ad__callout-wrapper">\n    <a href="http://www.voxmedia.com/pages/concert" class="ad__concert-link">\n      <svg viewBox="0 0 11 16" class="ad__concert-logo"><title>Concert</title><path d="M11,16H5.49A5.47,5.47,0,0,1,.64,8,5.48,5.48,0,0,1,5.49,0H11V5.9H5.49A4.62,4.62,0,0,0,1.63,8a4.62,4.62,0,0,0,3.86,2.1H11V16ZM1.19,8.87a4.48,4.48,0,0,0-.31,1.65,4.6,4.6,0,0,0,4.61,4.59h4.61V11H5.49A5.47,5.47,0,0,1,1.19,8.87Zm4.3-8a4.62,4.62,0,0,0-4.3,6.29,5.45,5.45,0,0,1,4.3-2.09h4.61V0.88H5.49Z"></path></svg>\n    </a>\n    <p>From Our Sponsor</p>\n  </div>\n  <div class="ad__feedback">\n    <button class="ad__feedback__toggle-button">Feedback</button>\n\n    <div class="feedback-form">\n      <div class="feedback-form__positioner">\n\n          <button class="feedback-form__close-button">\n            <p>Close</p>\n            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n               viewBox="0 0 50 50" xml:space="preserve">\n              <g>\n                <path d="M45.3,47.6c-2,2.3-5.6,2.3-7.8,0l-12.4-14l-12.5,14c-2,2.3-5.6,2.3-7.8,0c-2.3-2-2.3-5.6,0-7.8L17.6,25\n                  L4.7,10.2c-2.3-2-2.3-5.6,0-7.8s5.8-2.3,7.8,0l12.5,14.2L37.5,2.4c2.3-2.3,5.8-2.3,7.8,0c2.3,2.3,2.3,5.8,0,7.8L32.4,25l12.9,14.8\n                  C47.6,42.1,47.6,45.6,45.3,47.6z"/>\n              </g>\n            </svg>\n          </button>\n\n        <div class="feedback-form__content">\n\n          <ul class="feedback-questions" data-active-question="">\n            <li class="feedback-question question-1">How do you feel about this ad?</h3>\n            <li class="feedback-question question-2">How do you feel about this advertiser?</h3>\n            <li class="feedback-question question-3">Thanks for helping us improve your experience!</h3>\n          </ul>\n\n          <ul class="feedback-answers">\n            <li class="feedback-answer bad question-1" data-answer="bad" data-event-question-1-active="ad-bad" data-event-question-2-active="brand-bad">\n              <svg viewBox="0 0 156.14 156.14">\n                <g>\n                  <circle class="base" cx="78.07" cy="78.07" r="78.07"/>\n                  <path class="mouth" d="M77.84,93.35c11.29.29,21,4.23,28.69,12.5a7.21,7.21,0,1,1-10.38,10,24.47,24.47,0,0,0-9.9-6.54,26.45,26.45,0,0,0-12.4-1.06,24.74,24.74,0,0,0-14.08,7.4A7.15,7.15,0,0,1,52,117.43a6.54,6.54,0,0,1-4.71-6.06,6.87,6.87,0,0,1,1.92-5.48A39.35,39.35,0,0,1,66.16,95.18,48.1,48.1,0,0,1,77.84,93.35Z"/>\n                  <path class="right_eye" d="M96.32,56.82,105.55,53a5.12,5.12,0,0,1,7,3.46,10.26,10.26,0,0,1-.51,6.29,10.37,10.37,0,0,1-13.34,5.63,10.08,10.08,0,0,1-4.83-4.2A5.14,5.14,0,0,1,96.32,56.82Z"/>\n                  <path class="left_eye" d="M58.88,56.82,49.65,53a5.12,5.12,0,0,0-7,3.46,10.26,10.26,0,0,0,.51,6.29,10.37,10.37,0,0,0,13.34,5.63,10.08,10.08,0,0,0,4.83-4.2A5.14,5.14,0,0,0,58.88,56.82Z"/>\n                  <path class="check" d="M116.47,49a7.19,7.19,0,0,0-10.41,0L66.69,90.81,50.08,72A7.36,7.36,0,1,0,39.67,82.38L62.43,107.6a5.47,5.47,0,0,0,8,.12l46-48.34A7.19,7.19,0,0,0,116.47,49Z"/>\n                </g>\n              </svg>\n              <span>Bad</span>\n            </li>\n            <li class="feedback-answer not_good question-1" data-answer="not-good" data-event-question-1-active="ad-not-good" data-event-question-2-active="brand-not-good">\n              <svg viewBox="0 0 156.14 156.14">\n                <g>\n                  <circle class="base" cx="78.07" cy="78.07" r="78.07"/>\n                  <path class="mouth" d="M77.84,93.35c11.29.29,21,4.23,28.69,12.5a7.21,7.21,0,1,1-10.38,10,24.47,24.47,0,0,0-9.9-6.54,26.45,26.45,0,0,0-12.4-1.06,24.74,24.74,0,0,0-14.08,7.4A7.15,7.15,0,0,1,52,117.43a6.54,6.54,0,0,1-4.71-6.06,6.87,6.87,0,0,1,1.92-5.48A39.35,39.35,0,0,1,66.16,95.18,48.1,48.1,0,0,1,77.84,93.35Z"/>\n                  <path class="right_eye" d="M109.71,59.67l-7.07-7.07a5.12,5.12,0,0,0-7.76.54,10.26,10.26,0,0,0-1.92,6,10.37,10.37,0,0,0,10.19,10.28,10.08,10.08,0,0,0,6.06-2A5.14,5.14,0,0,0,109.71,59.67Z"/>\n                  <path class="left_eye" d="M53.17,52.64,46.1,59.71a5.12,5.12,0,0,0,.54,7.76,10.26,10.26,0,0,0,6,1.92A10.37,10.37,0,0,0,62.93,59.21a10.08,10.08,0,0,0-2-6.06A5.14,5.14,0,0,0,53.17,52.64Z"/>\n                  <path class="check" d="M116.47,49a7.19,7.19,0,0,0-10.41,0L66.69,90.81,50.08,72A7.36,7.36,0,1,0,39.67,82.38L62.43,107.6a5.47,5.47,0,0,0,8,.12l46-48.34A7.19,7.19,0,0,0,116.47,49Z"/>\n                </g>\n              </svg>\n              <span>Not Good</span>\n            </li>\n            <li class="feedback-answer okay question-1" data-answer="okay" data-event-question-1-active="ad-okay" data-event-question-2-active="brand-okay">\n              <a class="action" href="#">\n                <svg viewBox="0 0 156.14 156.14">\n                  <g>\n                    <circle class="base" cx="78.07" cy="78.07" r="78.07"/>\n                    <path class="mouth" d="M51.45,70.47A10.24,10.24,0,1,1,51.6,50a10.24,10.24,0,1,1-.14,20.47Z"/>\n                    <path class="right_eye" d="M104.41,70.47A10.21,10.21,0,1,1,114.7,60.29,10.37,10.37,0,0,1,104.41,70.47Z"/>\n                    <path class="left_eye" d="M102.06,98.88H55.2a6.87,6.87,0,1,0,0,13.74h46.86a6.87,6.87,0,1,0,0-13.74Z"/>\n                    <path class="check" d="M116.47,49a7.19,7.19,0,0,0-10.41,0L66.69,90.81,50.08,72A7.36,7.36,0,1,0,39.67,82.38L62.43,107.6a5.47,5.47,0,0,0,8,.12l46-48.34A7.19,7.19,0,0,0,116.47,49Z"/>\n                  </g>\n                </svg>\n                <span>Okay</span>\n              </a>\n            </li>\n            <li class="feedback-answer good question-1" data-answer="good" data-event-question-1-active="ad-good" data-event-question-2-active="brand-good">\n              <svg viewBox="0 0 156.14 156.14">\n                <g>\n                  <circle class="base" cx="78.07" cy="78.07" r="78.07"/>\n                  <path class="mouth" d="M78.45,118.15c-11.29-.29-21-4.23-28.69-12.5a7.21,7.21,0,1,1,10.38-10,24.47,24.47,0,0,0,9.9,6.54,26.45,26.45,0,0,0,12.4,1.06,24.74,24.74,0,0,0,14.08-7.4,7.15,7.15,0,0,1,7.74-1.78,6.54,6.54,0,0,1,4.71,6.06A6.87,6.87,0,0,1,107,105.6a39.35,39.35,0,0,1-16.92,10.72A47.74,47.74,0,0,1,78.45,118.15Z"/>\n                  <path class="right_eye" d="M51.92,70.47A10.24,10.24,0,1,1,52.06,50a10.24,10.24,0,1,1-.14,20.47Z"/>\n                  <path class="left_eye" d="M104.88,70.47a10.21,10.21,0,1,1,10.28-10.19A10.37,10.37,0,0,1,104.88,70.47Z"/>\n                  <path class="check" d="M116.47,49a7.19,7.19,0,0,0-10.41,0L66.69,90.81,50.08,72A7.36,7.36,0,1,0,39.67,82.38L62.43,107.6a5.47,5.47,0,0,0,8,.12l46-48.34A7.19,7.19,0,0,0,116.47,49Z"/>\n                </g>\n              </svg>\n              <span>Good</span>\n            </li>\n            <li class="feedback-answer great question-1" data-answer="great" data-event-question-1-active="ad-great" data-event-question-2-active="brand-great">\n              <svg viewBox="0 0 156.14 156.14">\n                <g>\n                  <circle class="base" cx="78.07" cy="78.07" r="78.07"/>\n                  <path class="mouth" d="M61.79,60.33a10.28,10.28,0,1,0-20.57-.1A10.21,10.21,0,0,0,51.45,70.47,10.34,10.34,0,0,0,61.79,60.33Z"/>\n                  <path class="right_eye" d="M104.32,50A10.21,10.21,0,1,0,114.7,60.29,10.28,10.28,0,0,0,104.32,50Z"/>\n                  <path class="left_eye" d="M105.36,97.36h-55a3.15,3.15,0,0,0-3.15,3.17,7.26,7.26,0,0,0,2.05,5.12c7.74,8.27,17.4,12.21,28.69,12.5a47.74,47.74,0,0,0,11.68-1.83,39.35,39.35,0,0,0,16.92-10.72,6.86,6.86,0,0,0,1.94-5.08A3.16,3.16,0,0,0,105.36,97.36Z"/>\n                  <path class="check" d="M116.47,49a7.19,7.19,0,0,0-10.41,0L66.69,90.81,50.08,72A7.36,7.36,0,1,0,39.67,82.38L62.43,107.6a5.47,5.47,0,0,0,8,.12l46-48.34A7.19,7.19,0,0,0,116.47,49Z"/>\n                </g>\n              </svg>\n              <span>Great</span>\n            </li>\n          </ul>\n\n          <div class="counter">\n            <span id="count">1 of 2</span>\n          </div>\n\n        </div>\n      </div>\n    </div>\n\n  </div>\n</div>\n',preambleOverlay:!1,aspect_ratio:{mobile:.6666666666666666,desktop:1.6898954703832754},max_height:{mobile:null,desktop:null},renderInIframe:!1,html:{"3db9972df5bfa0ec8ff2a1e0fae3942f":'<div class=\\"m-entry-box native-ad-content-link\\" data-native-ad-id=\\"container\\"><header class=\\"m-block-header\\"><span class=\\"m-block-header__tag preamble\\" data-native-ad-id=\\"preamble_text\\"><a href=\\"$AD_SERVER[clickthrough_url]\\">FROM VOX.COM<\\/a><\\/span><\\/header><div class=\\"m-entry-box__thumb m-entry-box__image--native-ad native-ad-thumbnail\\"><a href=\\"$AD_SERVER[clickthrough_url]\\" data-native-ad-id=\\"thumbnail\\"><img src=\\"https://hymnal-prod.vox-cdn.com/thumbor/61Zkv7zmS91LwBeYGCFuI-W33iE=/fit-in/600x600/hymnal-prod.vox-cdn.com/uploads/asset/file/100962/justvox.jpg\\" alt=\\"\\" /><\\/a><\\/div><div class=\\"m-entry-box__body\\"><h3><a data-analytics-link=\\"placeableadunit\\" data-native-ad-id=\\"headline\\" href=\\"$AD_SERVER[click_through_url]\\">The Vox guide to Covid-19 coronavirus<\\/a><\\/h3><p class=\\"m-entry-box__byline p-byline\\" data-native-ad-id=\\"byline\\"><\\/p><p class=\\"m-entry-box__blurb\\" data-native-ad-id=\\"body_text\\"><\\/p><div class=\\"m-entry-box__native-logo\\"><img data-native-ad-id=\\"logo\\" src=\\"\\" alt=\\"\\"><\\/div><\\/div><\\/div>'},css:"",fields:{"3db9972df5bfa0ec8ff2a1e0fae3942f":{html:'<div class="m-entry-box native-ad-content-link" data-native-ad-id="container">\n  <header class="m-block-header">\n    <span class="m-block-header__tag preamble" data-native-ad-id="preamble_text">\n      <a href="$AD_SERVER[clickthrough_url]">$TEMPLATE_TEXT[preamble]</a>\n    </span>\n  </header>\n\n  <div class="m-entry-box__thumb m-entry-box__image--native-ad native-ad-thumbnail">\n    <a href="$AD_SERVER[clickthrough_url]" data-native-ad-id="thumbnail">\n      <img src="$TEMPLATE_IMAGE[thumbnail]" alt="" />\n    </a>\n  </div>\n  <div class="m-entry-box__body">\n    <h3>\n      <a data-analytics-link="placeableadunit" data-native-ad-id="headline" href="$AD_SERVER[click_through_url]">$TEMPLATE_TEXT[title]</a>\n    </h3>\n    <p class="m-entry-box__byline p-byline" data-native-ad-id="byline">$TEMPLATE_TEXT[byline]</p>\n\n    <p class="m-entry-box__blurb" data-native-ad-id="body_text">$TEMPLATE_TEXT[description]</p>\n    <div class="m-entry-box__native-logo">\n      <img data-native-ad-id="logo" src="$TEMPLATE_IMAGE[logo]" alt="$TEMPLATE_TEXT[description]">\n    </div>\n  </div>\n</div>\n',eyebrow:"",preamble_text:"FROM VOX.COM",preamble:"FROM VOX.COM",css:"\n/* all styled on publisher's site, the below is FOR PREVIEW ONLY */\n.m {\n\n  &-entry-box {\n    width: 342px;\n    border:1px solid rgb(224, 224, 224);\n    padding: 10px;\n    overflow: hidden;\n    font-family: Helvetica, Arial, sans-serif;\n    line-height: 1.2;\n\n    * {\n      box-sizing: border-box;\n    }\n  }\n\n  &-block-header {\n    display: table;\n    width: 100%;\n    font-size: 11px;\n    border-bottom: 0;\n    font-weight: 400;\n    font-style: normal;\n  }\n\n  &-block-header__tag {\n    font-weight: normal;\n    color: $TEMPLATE_COLOR[brand_color];\n    border-color: $TEMPLATE_COLOR[brand_color];\n    display: table-cell;\n    text-align: left;\n\n    a {\n      color: #ff3200;\n      text-transform: uppercase;\n      display: inline-block;\n      padding-bottom: 2px;\n      font-size: 11px;\n      text-decoration: none;\n    }\n  }\n\n  &-entry-box__thumb {\n    float: none;\n    width: 100%;\n    margin-right: 0;\n    margin-top: 0;\n    display: block;\n    max-height: 195px;\n    overflow: hidden;\n    position: relative;\n\n    a {\n      text-decoration: none;\n    }\n\n    img {\n      height: auto;\n      display: inline;\n      width: 100%;\n    }\n  }\n\n  &-entry-box__body {\n    float: none;\n    width: 100%;\n    padding: 10px 0 0;\n    font-size: 14px;\n\n    h3 {\n      font-weight: normal;\n      font-size: 22px;\n      margin: 0 0 10px 0;\n      display: block;\n    }\n\n    a {\n      color: #333;\n      text-decoration: none;\n    }\n  }\n\n  &-entry-box__byline{\n    margin: 0;\n    margin-top: 8px;\n    font-size: 11px;\n    font-weight: 400;\n    font-style: normal;\n    line-height: 1.5;\n  }\n\n  &-entry-box__blurb {\n    margin: 8px 0 0 0;\n    font-size: 13px;\n    font-weight: 400;\n    font-style: normal;\n    line-height: 1.5;\n  }\n\n  &-entry-box__native-logo {\n    margin-top: 10px;\n\n    img {\n    max-width: 100px;\n    max-height: 33px;\n    }\n  }\n\n}\n",js:"// This value intentionally left blank\n",brand_color:"#80c0c0",logo:null,byline:"",tooltip:"",description:"",pull_quote:"",title:"The Vox guide to Covid-19 coronavirus",click_through_url:"https://www.vox.com/coronavirus-covid19?utm_source=vm_housead&utm_medium=vm_housead&utm_campaign=vm_coronavirus_native",thumbnail:"https://hymnal-prod.vox-cdn.com/thumbor/61Zkv7zmS91LwBeYGCFuI-W33iE=/fit-in/600x600/hymnal-prod.vox-cdn.com/uploads/asset/file/100962/justvox.jpg"}},clickthroughUrl:"https://www.vox.com/coronavirus-covid19?utm_source=vm_housead&utm_medium=vm_housead&utm_campaign=vm_coronavirus_native",trackers:[],designSetupFunction:function(variant){var all_variants={"3db9972df5bfa0ec8ff2a1e0fae3942f":"// This value intentionally left blank\n"};try{eval(all_variants[variant])}catch(e){window.PreviewErrorHandling&&window.PreviewErrorHandling.javascriptError(e)}}},ad;isInIframe()?(ad=new Hymnal.Ad(setupConfig),ad.addLifecycleEventListener(new Hymnal.DefaultEvents),ad.render()):$(function(){(ad=new Hymnal.Ad(setupConfig)).addLifecycleEventListener(new Hymnal.DefaultEvents),ad.render()})}(HymnalLib)}(jQuery)}function execHymnal(){var t=adPromises.getBeforeRender();decideAdContext().then(function(e){if(!e)throw bustIframe(),ERROR_ESCAPE_STRING;t.push(loadAdDependencies()),Promise.all(t).then(setupEventsAPI).then(executeHymnal)}).catch(function(e){"undefined"!=typeof console&&"function"==typeof console.log&&e!==ERROR_ESCAPE_STRING&&(console.log("Ad failed to render: "),console.error(e))})}var renderInIframe=!1,ERROR_ESCAPE_STRING="Silence Error on Rejected Promise to Please Winston",adPromises=function(){"use strict";function t(e){n.push(e)}var n=[];return{resolveBeforeRender:t,getBeforeRender:function(){return n},stop:function(e){void 0!==e&&(t(new Promise(function(e,t){return t()})),"undefined"!=typeof console&&"function"==typeof console.error&&console.error("An error prevented the rendering of Hymnal ads",e))}}}(),adCallbacks=function(){"use strict";var n=[],i=[],a=!1,o=null;return{afterRender:function(e){a?e.call(o):n.push(e)},beforeRender:function(e){a?e.call(o):i.push(e)},performAfterRender:function(e){if(a=!0,o=e,n.length)do{var t=n.shift()}while("function"==typeof t&&t.call(e||null),0<n.length)},performBeforeRender:function(e){if(o=e,i.length)do{var t=i.shift()}while("function"==typeof t&&t.call(e||null),0<i.length)}}}(),isInIframe=function(){"use strict";var t=!1;try{window.frameElement&&"object"==typeof window.frameElement&&(t=!0)}catch(e){t=!1}return t},decideAdContext=function(){return new Promise(function(e){var t=!0;isInIframe()&&(renderInIframe||(t=!1)),e(t)})},movedHymnalToMainFrame=!1,bustIframe=function l(){return new Promise(function(e){function t(e){var t=window.frameElement.ownerDocument.createElement("script");t.innerHTML=e.innerHTML;for(var n=0;n<e.attributes.length;n++)t.setAttribute(e.attributes[n].name,e.attributes[n].value);return t}if(movedHymnalToMainFrame||!window.frameElement)return!1;if("loading"===document.readyState)return document.addEventListener("readystatechange",l),!1;movedHymnalToMainFrame=!0;for(var n=window.frameElement.parentElement,i=2*document.body.childNodes.length;0<document.body.childNodes.length&&0<i--;){var a=document.body.childNodes[0];if("SCRIPT"===a.nodeName)n.appendChild(t(a)),document.body.removeChild(a);else{n.appendChild(a);for(var o=[],r=0;r<a.childNodes.length;r++){var s=a.childNodes[r];s&&"SCRIPT"===s.nodeName&&o.push(s)}o&&o.forEach(function(e){a.appendChild(t(e)),a.removeChild(e)})}}frameElement.style.display="none",e(!0)})},eventAPIToken="b302176a-5550-482a-8d62-e9be0489394e_"+Math.ceil(1e3*Math.random()),offplatformAMP=function(){"use strict";function e(){var e=parent.document.querySelector("iframe"),t=parent.window.context.initialIntersection.boundingClientRect;e.width=t.width,e.height=t.height}adCallbacks.beforeRender(function(){try{if(!parent.window.context||!parent.window.context.pageViewId)return;Hymnal.Events.whenLive(e)}catch(e){}})}(),loadAdDependencies=function(){return new Promise(function(e,t){function n(){return!0}var i={_:{src:"https://hymnal-prod.vox-cdn.com/libraries/underscore-1.5.1.min.js",test:function(){return"undefined"!=typeof _&&!!_.VERSION}},jQuery:{src:"https://hymnal-prod.vox-cdn.com/libraries/jquery-1.10.2.min.gz.js"}},a=document.getElementsByTagName("head"),o=[];if(0<a.length)for(var r in i)i.hasOwnProperty(r)&&(i[r].test&&(n=i[r].test),void 0!==window[r]&&window[r]&&n.call(this)||function(n){var e=new Promise(function(e){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.setAttribute("data-for","hymnal"),a[0].appendChild(t),t.onload=function(){e(t)},t.src=n});e.catch(adPromises.stop),o.push(e)}(i[r].src));else t("Cannot get head element");o.length?Promise.all(o).then(e):e(!0)})},eventsAPIData={scriptDigest:"7f5203b12e1e12222beeb6d2d63e5917",parentLibString:"Ly8gVGhpcyBmaWxlIGlzIGluc2VydGVkIGlubGluZSBhbmQgdGhlbiAudG9TdHJpbmcoKSBpcyBjYWxsZWQgb24gaXQKLy8gYW5kIG9ubHkgaWYgd2UgbmVlZCB0byBsaXN0ZW4gdG8gdGhpbmdzIG91dHNpZGUgb2YgYW4gaWZyYW1lCi8vIGRvIHdlIGV2YWwgYW5kIGluc3RhbnRpYXRlIHRoZSBjb2RlCgooZnVuY3Rpb24od2luZG93KSB7CiAgInVzZSBzdHJpY3QiOwogIHZhciBIeW1uYWxQYXJlbnQgPSB7CiAgICBhZHM6IHt9LAogICAgbGlzdGVuaW5nRm9yTWVzc2FnZXM6IGZhbHNlLAogICAgZ2xvYmFsRGF0YToge30sCiAgICBxdWV1ZVJ1bm5pbmc6IGZhbHNlLAogICAgY2FuY2VsV2F0Y2g6IGZhbHNlLCAvLyBJZiB0aGlzIGlzIHRydWUgdGhlIHNldFRpbWVvdXQgd2lsbCBzdG9wCiAgICB0aHJvdHRsZUludDogMTAwLAogICAgdHVyYm9JbnQ6IDE2LAogICAgLy8gQnkgdG9nZ2xpbmcgYm9vbGVhbnMgd2UgY2FuIGFzc3VyZSB0aGF0IG91ciBldmVudCBoYW5kbGVycwogICAgLy8gZG9uJ3QgYmxvY2sgdGhlIG1haW4gcmVuZGVyIHRocmVhZCBpbiB0aGUgYnJvd3NlcgogICAgLy8gdGh1cyBtYWtpbmcgb3VyIGFkIHZpZXdlcnMgYSBsaXR0bGUgYml0IGhhcHBpZXIKICAgIGV2OiB7CiAgICAgIHNjcm9sbDogZmFsc2UsCiAgICAgIHJlc2l6ZTogZmFsc2UsCiAgICAgIHVuaXNvblRhYkJhclZpc2liaWxpdHk6IGZhbHNlCiAgICB9LAogICAgLy8gQ29uc3RydWN0b3IgZnVuY3Rpb24gdG8gYnVpbGQgYSBuZXcgYWQgb2JqZWN0LCBjYWxsZWQgYnkgSW5pdAogICAgY2hpbGRBZDogZnVuY3Rpb24ob3B0cykgewogICAgIHJldHVybiB7CiAgICAgIHNlY3VyZVRva2VuOiBvcHRzLnRva2VuLAogICAgICBtZXNzYWdlVGFyZ2V0OiBudWxsLAogICAgICBpc0Nvbm5lY3RlZDogZmFsc2UsCiAgICAgIGlmcmFtZWQ6IG9wdHMuaW5JZnJhbWUsCiAgICAgIGNvbnRhaW5lckVsOiBudWxsLAogICAgICBkYXRhOiB7fSwKICAgICAgdHVyYm9PbjogZmFsc2UsCiAgICAgIG9yaWdpbjogbnVsbAogICAgIH07CiAgICB9LAoKICAgIC8vIFRoaXMgZnVuY3Rpb24gaXMgdGhlIG9ubHkgZnVuY3Rpb24gZXhwb3NlZCBwdWJsaWNseQogICAgLy8gT3B0cyBpcyBhbiBvYmplY3QgdGhhdCBjb250YWlucyBhIHRva2VuIChhZElkLXJhbmRvbU51bWJlcikgYW5kCiAgICAvLyBhIGluSWZyYW1lIGJvb2xlYW4uCiAgICAvLyBDYWxsaW5nIHRoaXMgd2lsbCByZWdpc3RlciBhbiBhZCB0byByZWNlaXZlIG1lc3NhZ2VzIGFzIHRoaXMgbGliIGRpc3BhdGNoZXMgdGhlbQogICAgaW5pdDogZnVuY3Rpb24ob3B0cykgewogICAgICAvLyB3ZSdsbCB1c2UgdGhlIHRva2VuIGFzIHRoZSBrZXkKICAgICAgLy8gc2luY2UgZXZlcnkgbWVzc2FnZSBmcm9tIHRoZSBjaGlsZCB3aWxsIGluY2x1ZGUgdGhlIHRva2VuCiAgICAgIHRoaXMuYWRzW29wdHMudG9rZW5dID0gdGhpcy5jaGlsZEFkKG9wdHMpOwoKICAgICAgaWYgKCF0aGlzLmxpc3RlbmluZ0Zvck1lc3NhZ2VzKSB7CiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCB0aGlzLm1lc3NhZ2VIYW5kbGVyLmJpbmQodGhpcykpOwogICAgICAgIHRoaXMubGlzdGVuaW5nRm9yTWVzc2FnZXMgPSB0cnVlOwogICAgICB9CgogICAgICAvLyBpZiB0aGVyZSdzIG5vIGlmcmFtZSB0aGUgcGFyZW50IGNhbiBpbml0aWF0ZSB0aGUgbWVzc2FnZXMKICAgICAgLy8gb3RoZXJ3aXNlIHdlIHdhaXQgZm9yIGEgbWVzc2FnZSBmcm9tIHRoZSBmcmFtZSB0byBnZXQgdGhlIHRhcmdldAogICAgICBpZiAoIW9wdHMuaW5JZnJhbWUpIHsKICAgICAgICAvLyB0aGlzIFRpbWVvdXQgaXMgdG8gaGVscCBhdm9pZCBhIHJhY2UgY29uZGl0aW9uIHdoZXJlIHdlIHF1ZXJ5IHRoZSBkb20gYmVmb3JlCiAgICAgICAgLy8gdGhlIGlmcmFtZSBidXN0aW5nIGpzIGlzIGZpbmlzaGVkLgogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsKICAgICAgICAgIHZhciBpZCA9IG9wdHMudG9rZW4uc3BsaXQoJ18nKVswXTsKICAgICAgICAgIHRoaXMuYWRzW29wdHMudG9rZW5dLmNvbnRhaW5lckVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtaHltbmFsLWlkPSInICsgaWQgKyAnIl0nKTsKICAgICAgICAgIGlmICh0aGlzLmFkc1tvcHRzLnRva2VuXS5jb250YWluZXJFbCkgewogICAgICAgICAgICB0aGlzLmFkc1tvcHRzLnRva2VuXS5tZXNzYWdlVGFyZ2V0ID0gdGhpcy53aW5kb3dMb2NhdGlvbigpOwogICAgICAgICAgICB0aGlzLmFkc1tvcHRzLnRva2VuXS5pc0Nvbm5lY3RlZCA9IHRydWU7CiAgICAgICAgICAgIHRoaXMuZGVmYXVsdFBhcmFtcyhvcHRzLnRva2VuKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuYWRzW29wdHMudG9rZW5dLmNvbnRhaW5lckVsID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfS5iaW5kKHRoaXMpLCAwKTsKICAgICAgfQoKICAgICAgaWYgKCF0aGlzLnF1ZXVlUnVubmluZykgewogICAgICAgIHRoaXMuY3JlYXRlUXVldWUoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQgPSBmYWxzZTsKICAgICAgfQogICAgfSwKCiAgICBhZERpbWVuc2lvbnM6IGZ1bmN0aW9uKCkgewoKICAgICAgdmFyIGVsZW1lbnRUb01lYXN1cmU7CgogICAgICBpZiAodGhpcy5jb250YWluZXJFbGVtZW50KSB7CiAgICAgICAgZWxlbWVudFRvTWVhc3VyZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5jb250YWluZXJFbGVtZW50KVswXTsKICAgICAgfSBlbHNlIHsKICAgICAgICBlbGVtZW50VG9NZWFzdXJlID0gdGhpcy5mcmFtZVRhcmdldC5mcmFtZUVsZW1lbnQKICAgICAgfQoKICAgICAgLy8gTGV0cyBtYWtlIHN1cmUgd2UgY2FuIHJlYWxseSBjYWxsIHRoaXMgaGVyZQogICAgICBpZihlbGVtZW50VG9NZWFzdXJlICYmIHR5cGVvZiBlbGVtZW50VG9NZWFzdXJlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCA9PT0gJ2Z1bmN0aW9uJyl7CiAgICAgICAgcmV0dXJuIGVsZW1lbnRUb01lYXN1cmUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHsgaGVpZ2h0OiAwLCB3aWR0aDogMCwgdG9wOjAgfTsKICAgICAgfQogICAgfSwKCiAgICBjaGVja0ZvckNoYW5nZTogZnVuY3Rpb24oKSB7CiAgICAgIGlmICghdGhpcy52aXNPYnNlcnZlcikgewogICAgICAgIHRoaXMudmlzT2JzZXJ2ZXIgPSB0aGlzLm9ic2VydmVQYWdlVmlzaWJpbGl0eSgpOwogICAgICB9CgogICAgICB0aGlzLndhdGNoZXIgPSBmYWxzZTsKICAgICAgdmFyIGhhbmRsZXIgPSAnJzsKICAgICAgZm9yICh2YXIgZXZUeXBlIGluIHRoaXMuZXYpIHsKICAgICAgICBpZiAodGhpcy5ldi5oYXNPd25Qcm9wZXJ0eShldlR5cGUpICYmIHRoaXMuZXZbZXZUeXBlXSkgewogICAgICAgICAgLy8gSGFuZGxlciBmdW5jdGlvbnMgYXJlICdvbnNjcm9sbCcsICdvbnJlc2l6ZScsIG9uICd1bmlzb25UYWJCYXJWaXNpYmlsaXR5JwogICAgICAgICAgaGFuZGxlciA9ICdvbicgKyBldlR5cGU7CiAgICAgICAgICAvLyB0aGlzLmV2W2V2VHlwZV0gaXMgZWl0aGVyIGEgYm9vbGVhbiBvciB0aGUgZGV0YWlsIGF0dHJpYnV0ZSBmcm9tIGEgY3VzdG9tIGV2ZW50CiAgICAgICAgICB0aGlzW2hhbmRsZXJdKCB0aGlzLmV2W2V2VHlwZV0gKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmNhbmNlbFdhdGNoKSB7CiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMud2F0Y2hlcik7CiAgICAgICAgdGhpcy53YXRjaGVyID0gdW5kZWZpbmVkOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMudGhyb3R0bGVkV2F0Y2hlcih0aGlzLmNoZWNrRm9yQ2hhbmdlLCB0aGlzLnRocm90dGxlSW50KTsKICAgICAgfQogICAgfSwKCiAgICBjcmVhdGVRdWV1ZTogZnVuY3Rpb24oKSB7CiAgICAgIGZvciAodmFyIGV2bnQgaW4gdGhpcy5ldikgewogICAgICAgIGlmICh0aGlzLmV2Lmhhc093blByb3BlcnR5KGV2bnQpKSB7CiAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihldm50LCB0aGlzLmV2ZW50SGFuZGxlci5iaW5kKHRoaXMpKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgdGhpcy50aHJvdHRsZWRXYXRjaGVyKHRoaXMuY2hlY2tGb3JDaGFuZ2UsIHRoaXMudGhyb3R0bGVJbnQpOwogICAgICB0aGlzLnF1ZXVlUnVubmluZyA9IHRydWU7CiAgICB9LAoKICAgIGN1cnJlbnREYXRhOiBmdW5jdGlvbihrZXkpIHsKICAgICAgdmFyIGRhdGEgPSB0aGlzLmFkc1trZXldLmRhdGE7CiAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLmdsb2JhbERhdGEpIHsKICAgICAgICBpZiAodGhpcy5nbG9iYWxEYXRhLmhhc093blByb3BlcnR5KGtleSkpIHsKICAgICAgICAgIGRhdGFba2V5XSA9IHRoaXMuZ2xvYmFsRGF0YVtrZXldOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gZGF0YTsKICAgIH0sCgogICAgZGVmYXVsdFBhcmFtczogZnVuY3Rpb24oa2V5KSB7CiAgICAgIHZhciBkID0gdGhpcy5hZHNba2V5XS5kYXRhOwogICAgICB2YXIgZyA9IHRoaXMuZ2xvYmFsRGF0YTsKICAgICAgLy8gR2xvYmFsIHByb3BlcnRpZXMgYXJlIHNldHVwIG9uY2UgYW5kIHRoZW4gdXBkYXRlZCBvbiBzY3JvbGwvcmVzaXplCiAgICAgIGlmICghZy53aW5kb3dXaWR0aCkgewogICAgICAgIGcud2luZG93V2lkdGggPSB0aGlzLmdldFdpbmRvd1dpZHRoKCk7CiAgICAgIH0KICAgICAgaWYgKCFnLndpbmRvd0hlaWdodCkgewogICAgICAgIGcud2luZG93SGVpZ2h0ID0gdGhpcy5nZXRXaW5kb3dIZWlnaHQoKTsKICAgICAgfQogICAgICBpZiAoIWcuZG9jdW1lbnRIZWlnaHQpIHsKICAgICAgICBnLmRvY3VtZW50SGVpZ2h0ID0gZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQ7CiAgICAgIH0KICAgICAgaWYgKCFnLnNjcm9sbE9mZnNldCkgewogICAgICAgIGcuc2Nyb2xsT2Zmc2V0ID0gd2luZG93LnNjcm9sbFkgfHwgd2luZG93LnBhZ2VZT2Zmc2V0OwogICAgICB9CgogICAgICBpZiAoIWcuc2Nyb2xsRGlyZWN0aW9uKSB7CiAgICAgICAgZy5zY3JvbGxEaXJlY3Rpb24gPSAiZG93biI7CiAgICAgIH0KICAgICAgLy8gZG9lcyBub3QgbmVlZCB0byBiZSBjaGFuZ2VkIGFmdGVyIHRoaXMgY2FsbAogICAgICBpZiAoIWcuaXNVbmlzb24pIHsKICAgICAgICB2YXIgdW5pc29uID0gZmFsc2U7CiAgICAgICAgaWYgKHdpbmRvdy5DaG9ydXNBZHMgJiYgd2luZG93LkNob3J1c0Fkcy5pc191bmlzb24pIHsKICAgICAgICAgIHVuaXNvbiA9IHRydWU7CiAgICAgICAgfQogICAgICAgIGcuaXNVbmlzb24gPSB1bmlzb247CiAgICAgIH0KCiAgICAgIGlmICghZy51bmlzb25UYWJCYXJWaXNpYmlsaXR5KSB7CiAgICAgICAgZy51bmlzb25UYWJCYXJWaXNpYmlsaXR5ID0gZmFsc2U7CiAgICAgIH0KCiAgICAgIHZhciBmcmFtZURpbXMgPSB0aGlzLmdldEZyYW1lRGltZW5zaW9ucyhrZXkpOwogICAgICBkLmZyYW1lSGVpZ2h0ID0gZnJhbWVEaW1zLmhlaWdodDsKICAgICAgZC5mcmFtZVdpZHRoID0gZnJhbWVEaW1zLndpZHRoOwogICAgICBkLmZyYW1lVG9wUG9zID0gZnJhbWVEaW1zLnRvcDsKICAgICAgZC5mcmFtZVBvc09uUGFnZSA9IHRoaXMuZ2V0ZnJhbWVQb3NPblBhZ2UoZnJhbWVEaW1zLnRvcCk7CiAgICAgIGQuc2Nyb2xsUGVyY2VudCA9IHRoaXMuZ2V0U2Nyb2xsUGVyY2VudGFnZShrZXkpOwoKICAgICAgdGhpcy5kaXNwYXRjaENoYW5nZShrZXksICJpbml0aWFsIik7CiAgICAgIHJldHVybiBkOwogICAgfSwKCiAgICBkaXNwYXRjaENoYW5nZTogZnVuY3Rpb24oa2V5LCBldlR5cGUpIHsKICAgICAgdmFyIGRhdGE7CiAgICAgIGlmIChldlR5cGUgJiYgZXZUeXBlID09PSAidHVyYm8iKSB7CiAgICAgICAgZGF0YSA9IHRoaXMuZ2V0U2Nyb2xsUGVyY2VudGFnZShrZXkpOwogICAgICB9IGVsc2UgewogICAgICAgIGRhdGEgPSB0aGlzLmN1cnJlbnREYXRhKGtleSk7CiAgICAgIH0KCiAgICAgIHZhciBwYXJhbXMgPSB7CiAgICAgICAgdHlwZTogZXZUeXBlIHx8ICcnLAogICAgICAgIHBhcmFtczogZGF0YSwKICAgICAgICB0b2tlbjogdGhpcy5hZHNba2V5XS5zZWN1cmVUb2tlbiwKICAgICAgICBzZW5kZXI6ICJwYXJlbnQiCiAgICAgIH07CiAgICAgIGlmICh0aGlzLmFkc1trZXldLmlmcmFtZWQgJiYgdGhpcy5hZHNba2V5XS5tZXNzYWdlVGFyZ2V0ICYmIHRoaXMuYWRzW2tleV0ubWVzc2FnZVRhcmdldC5wb3N0TWVzc2FnZSkgewogICAgICAgIHRoaXMuYWRzW2tleV0ubWVzc2FnZVRhcmdldC5wb3N0TWVzc2FnZShwYXJhbXMsIHRoaXMuYWRzW2tleV0ub3JpZ2luKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB3aW5kb3cucG9zdE1lc3NhZ2UocGFyYW1zLCB0aGlzLndpbmRvd0xvY2F0aW9uKCkpOwogICAgICB9CiAgICB9LAoKICAgIHR1cmJvTW9kZTogZnVuY3Rpb24oa2V5KSB7CiAgICAgIHZhciBkID0gdGhpcy5jdXJyZW50RGF0YShrZXkpOwogICAgICB2YXIgZSA9IHRoaXMuZXY7CiAgICAgIHRoaXMuYWRzW2tleV0udHVyYm9PbiA9IHRydWU7CiAgICAgIGlmIChlLnNjcm9sbCB8fCBlLnJlc2l6ZSkgewogICAgICAgIGQuc2Nyb2xsUGVyY2VudCA9IHRoaXMuZ2V0U2Nyb2xsUGVyY2VudGFnZShrZXkpOwoKICAgICAgICB0aGlzLmRpc3BhdGNoQ2hhbmdlKGtleSwgInR1cmJvIik7CiAgICAgIH0KICAgICAgdGhpcy50aHJvdHRsZWRXYXRjaGVyKHRoaXMudHVyYm9Nb2RlLCB0aGlzLnR1cmJvSW50LCBrZXkpOwogICAgfSwKCiAgICBldmVudEhhbmRsZXI6IGZ1bmN0aW9uKGV2KSB7CiAgICAgIC8vIHNjcm9sbCBhbmQgcmVzaXplIGV2ZW50cyBoYXZlIG5vIGRldGFpbCBrZXkKICAgICAgdGhpcy5ldltldi50eXBlXSA9IGV2LmRldGFpbCA/IGV2LmRldGFpbCA6IHRydWU7CiAgICB9LAoKICAgIGdldEZyYW1lRGltZW5zaW9uczogZnVuY3Rpb24oa2V5KSB7CiAgICAgIGlmICh0aGlzLmFkc1trZXldLmNvbnRhaW5lckVsKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuYWRzW2tleV0uY29udGFpbmVyRWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gSUYgdGhlIGNvbnRhaW5lciBlbCBkb2Vzbid0IGV4aXN0CiAgICAgICAgcmV0dXJuICB7aGVpZ2h0OiAwLCB3aWR0aDogMCwgdG9wOiAwfQogICAgICB9CiAgICB9LAoKICAgIGdldGZyYW1lUG9zT25QYWdlOiBmdW5jdGlvbih0b3ApIHsKICAgICAgcmV0dXJuIE1hdGguYWJzKGRvY3VtZW50LmJvZHkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wIC0gdG9wKTsKICAgIH0sCgogICAgZ2V0QWRNaWRwb2ludDogZnVuY3Rpb24oa2V5KSB7CiAgICAgIHZhciBmcmFtZSA9IHRoaXMuZ2V0RnJhbWVEaW1lbnNpb25zKGtleSk7CiAgICAgIHZhciB5ID0gd2luZG93LnNjcm9sbFkgfHwgd2luZG93LnBhZ2VZT2Zmc2V0OwogICAgICByZXR1cm4gZnJhbWUudG9wICsgKGZyYW1lLmhlaWdodCAvIDIpICsgeTsKICAgIH0sCgogICAgZ2V0U2Nyb2xsUmFuZ2U6IGZ1bmN0aW9uKGtleSkgewogICAgICB2YXIgZnJhbWUgPSB0aGlzLmN1cnJlbnREYXRhKGtleSk7CiAgICAgIHZhciBsb3dlciA9IE1hdGguZmxvb3IoZnJhbWUuZnJhbWVQb3NPblBhZ2UgLSB3aW5kb3cuaW5uZXJIZWlnaHQpOwogICAgICB2YXIgdXBwZXIgPSBNYXRoLmNlaWwoZnJhbWUuZnJhbWVQb3NPblBhZ2UgKyBmcmFtZS5mcmFtZUhlaWdodCk7CiAgICAgIHJldHVybiBbbG93ZXIsIHVwcGVyXTsKICAgIH0sCgogICAgLy8gZm9ybXVsYSBmcm9tIHRoZSBtYWduaWZpY2VudCBzdGFja2V4Y2hhbmdlCiAgICAvL2h0dHA6Ly9tYXRoLnN0YWNrZXhjaGFuZ2UuY29tL3F1ZXN0aW9ucy81MTUwOS9ob3ctdG8tY2FsY3VsYXRlLXBlcmNlbnRhZ2Utb2YtdmFsdWUtaW5zaWRlLWFyYml0cmFyeS1yYW5nZQogICAgZ2V0U2Nyb2xsUGVyY2VudGFnZTogZnVuY3Rpb24oa2V5KSB7CiAgICAgIHZhciBib3VuZHMgPSB0aGlzLmdldFNjcm9sbFJhbmdlKGtleSk7CiAgICAgIHZhciB5ID0gd2luZG93LnNjcm9sbFkgfHwgd2luZG93LnBhZ2VZT2Zmc2V0OwoKICAgICAgdmFyIHBjdCA9ICh5IC0gYm91bmRzWzBdKSAvIChib3VuZHNbMV0gLSBib3VuZHNbMF0pOwogICAgICByZXR1cm4gcGN0OwogICAgfSwKCiAgICBnZXRXaW5kb3dXaWR0aDogZnVuY3Rpb24oKSB7CiAgICAgIHZhciB3ID0gd2luZG93LnRvcC5pbm5lcldpZHRoIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aDsKICAgICAgLy8gdGhpcyBtYXkgYmUgdHJ1ZSBvbiBtb2JpbGUgZGV2aWNlcyB3aXRoIGhpZ2ggRFBJIHNjcmVlbnMKICAgICAgaWYgKHcgPiBzY3JlZW4ud2lkdGgpIHsKICAgICAgICB3ID0gc2NyZWVuLndpZHRoOwogICAgICB9CiAgICAgIHJldHVybiB3OwogICAgfSwKCiAgICBnZXRXaW5kb3dIZWlnaHQ6IGZ1bmN0aW9uKCkgewogICAgICB2YXIgaCA9IHdpbmRvdy50b3AuaW5uZXJIZWlnaHQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDsKCiAgICAgIGlmIChoID4gc2NyZWVuLmhlaWdodCkgewogICAgICAgIGggPSBzY3JlZW4uaGVpZ2h0OwogICAgICB9CiAgICAgIHJldHVybiBoOwogICAgfSwKCiAgICBvYnNlcnZlUGFnZVZpc2liaWxpdHk6IGZ1bmN0aW9uKCkgewogICAgICBpZiAodGhpcy52aXNPYnNlcnZlcikgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICB2YXIgcHJlZml4ZXMgPSBbJ2gnLCAnbW96SCcsICdtc0gnLCAnd2Via2l0SCddOwogICAgICB2YXIgaGlkZGVuLCB2aXNpYmlsaXR5Q2hhbmdlCiAgICAgIHByZWZpeGVzLmZvckVhY2goZnVuY3Rpb24ocHJlZml4KSB7CiAgICAgICAgaWYgKHR5cGVvZiBkb2N1bWVudFtwcmVmaXggKyAnaWRkZW4nXSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICBoaWRkZW4gPSBwcmVmaXggKyAnaWRkZW4nOwogICAgICAgICAgaWYgKHByZWZpeCA9PT0gJ2gnKSB7CiAgICAgICAgICAgIHZpc2liaWxpdHlDaGFuZ2UgPSAndmlzaWJpbGl0eWNoYW5nZSc7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB2aXNpYmlsaXR5Q2hhbmdlID0gcHJlZml4LnNsaWNlKDAsIC0xKSArICd2aXNpYmlsaXR5Y2hhbmdlJzsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgICBpZiAodHlwZW9mIGRvY3VtZW50W2hpZGRlbl0gPT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKHZpc2liaWxpdHlDaGFuZ2UsIGZ1bmN0aW9uKCkgewogICAgICAgIHRoaXMudmlzT2JzZXJ2ZXIgPSB0cnVlOwogICAgICAgIGlmIChkb2N1bWVudFtoaWRkZW5dKSB7CiAgICAgICAgICB0aGlzLmNhbmNlbFdhdGNoID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5jYW5jZWxXYXRjaCA9IGZhbHNlOwogICAgICAgICAgdGhpcy5jaGVja0ZvckNoYW5nZSgpOwogICAgICAgIH0KICAgICAgfS5iaW5kKHRoaXMpKQogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0sCgogICAgdGhyb3R0bGVkV2F0Y2hlcjogZnVuY3Rpb24oY2IsIGludCwga2V5KSB7CiAgICAgIHNldFRpbWVvdXQoY2IuYmluZCh0aGlzKSwgaW50LCBrZXkpOwogICAgfSwKCiAgICBtZXNzYWdlSGFuZGxlcjogZnVuY3Rpb24oZXYpIHsKICAgICAgdmFyIGlzQ2hpbGQgPSBldi5kYXRhLnNlbmRlciAmJiBldi5kYXRhLnNlbmRlciA9PT0gImNoaWxkIjsKICAgICAgdmFyIGFkID0gZXYuZGF0YS50b2tlbiAmJiB0aGlzLmFkc1tldi5kYXRhLnRva2VuXTsKICAgICAgaWYgKCFpc0NoaWxkIHx8ICFhZCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBhZC5tZXNzYWdlVGFyZ2V0ID0gZXYuc291cmNlOwogICAgICBhZC5jb250YWluZXJFbCA9IGV2LnNvdXJjZS5mcmFtZUVsZW1lbnQ7CgogICAgICBpZiAoZXYuZGF0YS5pbklmcmFtZSkgewogICAgICAgIGFkLmlmcmFtZWQgPSB0cnVlOwogICAgICB9CgogICAgICAvLyBUaGlzIHdpbGwgYWxyZWFkeSBleGlzdCBpZiB0aGUgYWQgaXMgbm90IGluIGFuIGlmcmFtZQogICAgICBpZiAoIWFkLm9yaWdpbikgewogICAgICAgIGFkLm9yaWdpbiA9IGV2Lm9yaWdpbjsKICAgICAgfQoKICAgICAgLy8gSWYgdGhlIGFkIGlzIGluIGFuIGlmcmFtZSBidXQgd2UgZG9uJ3QgaGF2ZSBhIGNvbnRhaW5lciBlbGVtZW50CiAgICAgIC8vIHRoYXQgcHJvYmFibHkgbWVhbnMgd2UncmUgc2FuZGJveGVkLCBtb3N0IGxpa2VseSBvbiBhIHBhcnRuZXIgbmV0d29yawogICAgICAvLyBsZXQncyBwcmV0ZW5kIHRoYXQgd2UncmUgbm90IGluIGEgaWZyYW1lIGluIHRoYXQgY2FzZS4KICAgICAgaWYgKGFkLmlmcmFtZWQgJiYgIWFkLmNvbnRhaW5lckVsKSB7CiAgICAgICAgYWQuY29udGFpbmVyRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1oeW1uYWwtaWRdJyk7CiAgICAgICAgYWQuaWZyYW1lZCA9IGZhbHNlOwogICAgICAgIGFkLm9yaWdpbiA9IHRoaXMud2luZG93TG9jYXRpb24oKTsKICAgICAgfQoKICAgICAgaWYgKGV2LmRhdGEuZnVuYyAmJiBldi5kYXRhLmZ1bmMgaW4gdGhpcykgewogICAgICAgIHRoaXNbZXYuZGF0YS5mdW5jXShldi5kYXRhLnRva2VuKTsKICAgICAgfQoKICAgICAgaWYgKGV2LmRhdGEuaW50ZXJ2YWwpIHsKICAgICAgICB0aGlzLnRocm90dGxlSW50ID0gZXYuZGF0YS5pbnRlcnZhbDsKICAgICAgfQoKICAgICAgaWYgKCFhZC5pc0Nvbm5lY3RlZCkgewogICAgICAgIHRoaXMuZGVmYXVsdFBhcmFtcyhhZC5zZWN1cmVUb2tlbik7CiAgICAgICAgYWQuaXNDb25uZWN0ZWQgPSB0cnVlOwogICAgICB9CgogICAgICBpZiAoIXRoaXMucXVldWVSdW5uaW5nKSB7CiAgICAgICAgdGhpcy5jcmVhdGVRdWV1ZSgpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiB0aGlzLmRpc3BhdGNoQ2hhbmdlKGFkLnNlY3VyZVRva2VuLCAicmVjZWlwdCIpOwogICAgICB9CiAgICB9LAoKICAgIC8vIGxvb3BzIHRocm91Z2ggYWxsIHJlZ2lzdGVyZWQgYWRzIGFuZCB1cGRhdGVzIGFsbCByZXF1ZXN0ZWQgYXR0cmlidXRlcwogICAgLy8gdGhlbiBkaXNwYXRjaGVzIGNoYW5nZSBtZXNzYWdlcyBmb3IgZXZlcnkgYWQKICAgIC8vIGV2IGlzIHJlcXVpcmVkLCBhdHRycyBpcyBvcHRpb25hbAogICAgdXBkYXRlUmVnaXN0ZXJlZEFkczogZnVuY3Rpb24oZXYsIGF0dHJzKSB7CiAgICAgIHZhciBmcmFtZURpbXM7CiAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLmFkcykgewogICAgICAgIGlmICghdGhpcy5hZHMuaGFzT3duUHJvcGVydHkoa2V5KSApewogICAgICAgICAgY29udGludWU7CiAgICAgICAgfQoKICAgICAgICAvLyB3ZSBkb24ndCBuZWVkIHRvIHRvdWNoIHRoZSBkb20gaWYgdGhpcyBpcyBqdXN0IGFuIGV2ZW50IGRpc3BhdGNoCiAgICAgICAgaWYgKGF0dHJzLmxlbmd0aCA+IDApIHsKICAgICAgICAgIGZyYW1lRGltcyA9IHRoaXMuZ2V0RnJhbWVEaW1lbnNpb25zKGtleSk7CiAgICAgICAgfQoKICAgICAgICBpZiAoYXR0cnMuaW5kZXhPZignZnJhbWVIZWlnaHQnKSA+IC0xICYmCiAgICAgICAgICBmcmFtZURpbXMuaGVpZ2h0ICE9PSB0aGlzLmFkc1trZXldLmRhdGEuZnJhbWVIZWlnaHQpIHsKICAgICAgICAgIHRoaXMuYWRzW2tleV0uZGF0YS5mcmFtZUhlaWdodCA9IGZyYW1lRGltcy5oZWlnaHQ7CiAgICAgICAgfQoKICAgICAgICBpZiAoYXR0cnMuaW5kZXhPZignZnJhbWVXaWR0aCcpID4gLTEgJiYKICAgICAgICAgIGZyYW1lRGltcy53aWR0aCAhPT0gdGhpcy5hZHNba2V5XS5kYXRhLmZyYW1lV2lkdGgpIHsKICAgICAgICAgIHRoaXMuYWRzW2tleV0uZGF0YS5mcmFtZVdpZHRoID0gZnJhbWVEaW1zLndpZHRoOwogICAgICAgIH0KCiAgICAgICAgaWYgKGF0dHJzLmluZGV4T2YoJ2ZyYW1lVG9wUG9zJykgPiAtMSkgewogICAgICAgICAgdGhpcy5hZHNba2V5XS5kYXRhLmZyYW1lVG9wUG9zID0gZnJhbWVEaW1zLnRvcDsKICAgICAgICB9CgogICAgICAgIGlmIChhdHRycy5pbmRleE9mKCdmcmFtZVBvc09uUGFnZScpID4gLTEpIHsKICAgICAgICAgIHRoaXMuYWRzW2tleV0uZGF0YS5mcmFtZVBvc09uUGFnZSA9IHRoaXMuZ2V0ZnJhbWVQb3NPblBhZ2UoZnJhbWVEaW1zLnRvcCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoYXR0cnMuaW5kZXhPZignc2Nyb2xsUGVyY2VudCcpID4gLTEpIHsKICAgICAgICAgIHRoaXMuYWRzW2tleV0uZGF0YS5zY3JvbGxQZXJjZW50ID0gdGhpcy5nZXRTY3JvbGxQZXJjZW50YWdlKGtleSk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLmRpc3BhdGNoQ2hhbmdlKGtleSwgZXYpOwogICAgICB9CiAgICB9LAoKICAgIG9uc2Nyb2xsOiBmdW5jdGlvbigpIHsKICAgICAgdGhpcy5ldi5zY3JvbGwgPSBmYWxzZTsKICAgICAgdmFyIGcgPSB0aGlzLmdsb2JhbERhdGE7CiAgICAgIGcuZG9jdW1lbnRIZWlnaHQgPSBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodDsKICAgICAgdmFyIGN1cnJlbnRTY3JvbGwgPSB3aW5kb3cuc2Nyb2xsWSB8fCB3aW5kb3cucGFnZVlPZmZzZXQ7CiAgICAgIGcuc2Nyb2xsRGlyZWN0aW9uID0gY3VycmVudFNjcm9sbCA+IGcuc2Nyb2xsT2Zmc2V0ICA/ICJkb3duIiA6ICJ1cCI7CiAgICAgIGcuc2Nyb2xsT2Zmc2V0ID0gY3VycmVudFNjcm9sbDsKCiAgICAgIHRoaXMudXBkYXRlUmVnaXN0ZXJlZEFkcygnc2Nyb2xsJywgWydmcmFtZUhlaWdodCcsICdmcmFtZVdpZHRoJywgJ2ZyYW1lVG9wUG9zJywgJ2ZyYW1lUG9zT25QYWdlJywgJ3Njcm9sbFBlcmNlbnQnXSk7CiAgICB9LAoKICAgIG9ucmVzaXplOiBmdW5jdGlvbigpIHsKICAgICAgdGhpcy5ldi5yZXNpemUgPSBmYWxzZTsKICAgICAgdmFyIGcgPSB0aGlzLmdsb2JhbERhdGE7CiAgICAgIGcud2luZG93V2lkdGggPSB0aGlzLmdldFdpbmRvd1dpZHRoKCk7CiAgICAgIGcud2luZG93SGVpZ2h0ID0gdGhpcy5nZXRXaW5kb3dIZWlnaHQoKTsKICAgICAgZy5kb2N1bWVudEhlaWdodCA9IGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0OwoKICAgICAgdGhpcy51cGRhdGVSZWdpc3RlcmVkQWRzKCdyZXNpemUnLCBbJ2ZyYW1lSGVpZ2h0JywgJ2ZyYW1lV2lkdGgnLCAnZnJhbWVUb3BQb3MnLCAnZnJhbWVQb3NPblBhZ2UnLCAnc2Nyb2xsUGVyY2VudCddKTsKICAgIH0sCgogICAgLyoKICAgICogVGhpcyBmdW5jdGlvbiBnaXZlcyBhbiBhZCB0aGUgb3B0aW9uIHRvIHVwZGF0ZSBpdHMgcmVmcmVzaCBhYmlsaXR5IGluc2lkZSBpdHMgc2xvdC4KICAgICogVGhlIGRpc3BhdGNoZWQgY3VzdG9tIEV2ZW50IHdpbGwgYmUgdXNlZCBpbiB0aGUgQ2hvcnVzQWRzIG9iamVjdCBmb3VuZCBoZXJlOgogICAgKiBzYm4vYXBwX3VuaXNvbi9mcm9udGVuZC9jb21wb25lbnRzL2FwcHMvY2hvcnVzX2Fkcy9saWIvc2xvdC5qcwogICAgKi8KCiAgICByZWZyZXNoRWxpZ2liaWxpdHlFdmVudDogZnVuY3Rpb24oa2V5LCBkZXRhaWwpIHsKICAgICAgdGhpcy5hZHNba2V5XS5jb250YWluZXJFbC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgncmVmcmVzaEVsaWdpYmlsaXR5VG9nZ2xlJywgewogICAgICAgIGJ1YmJsZXM6dHJ1ZSwKICAgICAgICBkZXRhaWw6IGRldGFpbAogICAgICB9KSk7CiAgICB9LAoKICAgIGVuYWJsZVJlZnJlc2hFbGlnaWJpbGl0eTogZnVuY3Rpb24oa2V5KSB7CiAgICAgIHRoaXMucmVmcmVzaEVsaWdpYmlsaXR5RXZlbnQoa2V5LCB7cmVmcmVzaDogdHJ1ZX0pOwogICAgfSwKCiAgICBkaXNhYmxlUmVmcmVzaEVsaWdpYmlsaXR5OiBmdW5jdGlvbihrZXkpIHsKICAgICAgdGhpcy5yZWZyZXNoRWxpZ2liaWxpdHlFdmVudChrZXksIHtyZWZyZXNoOiBmYWxzZX0pOwogICAgfSwKCiAgICAvLyB1bmlzb24gdGFiIGJhciBBUEkKCiAgICBvbnVuaXNvblRhYkJhclZpc2liaWxpdHk6IGZ1bmN0aW9uKGRldGFpbCkgewogICAgICAvLyByZXNldCB0aGUgZXZlbnQgY2hlY2tlcgogICAgICB0aGlzLmV2LnVuaXNvblRhYkJhclZpc2liaWxpdHkgPSBmYWxzZTsKICAgICAgdGhpcy5nbG9iYWxEYXRhLnVuaXNvblRhYkJhclZpc2liaWxpdHkgPSBkZXRhaWwudmlzaWJsZTsKICAgICAgdGhpcy51cGRhdGVSZWdpc3RlcmVkQWRzKCd1bmlzb25UYWJCYXJWaXNpYmlsaXR5JywgW10pOwogICAgfSwKCiAgICB1bmlzb25UYWJCYXJFdmVudDogZnVuY3Rpb24oZGV0YWlsKSB7CiAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCd1bmlzb25UYWJCYXJPdmVycmlkZScsIHtkZXRhaWw6IGRldGFpbH0pKTsKICAgIH0sCgogICAgc2hvd1VuaXNvblRhYkJhcjogZnVuY3Rpb24oKSB7CiAgICAgIHRoaXMudW5pc29uVGFiQmFyRXZlbnQoe3Zpc2liaWxpdHk6IHRydWV9KTsKICAgIH0sCgogICAgaGlkZVVuaXNvblRhYkJhcjogZnVuY3Rpb24oKSB7CiAgICAgIHRoaXMudW5pc29uVGFiQmFyRXZlbnQoe3Zpc2liaWxpdHk6IGZhbHNlfSk7CiAgICB9LAoKICAgIHJlc2V0VG9EZWZhdWx0VW5pc29uVGFiQmFyOiBmdW5jdGlvbigpIHsKICAgICAgdGhpcy51bmlzb25UYWJCYXJFdmVudCh7cmVzZXQ6IHRydWV9KTsKICAgIH0sCgogICAgd2luZG93TG9jYXRpb246IGZ1bmN0aW9uKCkgewogICAgICB2YXIgbCA9IHdpbmRvdy5sb2NhdGlvbjsKICAgICAgaWYgKCFsLm9yaWdpbil7CiAgICAgICAgd2luZG93LmxvY2F0aW9uLm9yaWdpbiA9IGwucHJvdG9jb2wgKyAiLy8iICsgbC5ob3N0bmFtZSArIChsLnBvcnQgPyAnOicgKyBsLnBvcnQ6ICcnKTsKICAgICAgfQogICAgICByZXR1cm4gd2luZG93LmxvY2F0aW9uLm9yaWdpbjsKICAgIH0KCiAgfTsKICByZXR1cm4gSHltbmFsUGFyZW50LmluaXQuYmluZChIeW1uYWxQYXJlbnQpOwp9KSh3aW5kb3cpOwo=",inIframe:renderInIframe},setupEventsAPI=function(){return new Promise(function(e,t){var n="window.RegisterHymnalAd"+eventsAPIData.scriptDigest,i=eventsAPIData.parentLibString,a="hymnal__iframe-events-"+eventsAPIData.scriptDigest,o=window.document,r=(o=(isInIframe()&&renderInIframe||"object"==typeof Hymnal&&Hymnal.settings&&Hymnal.settings.inPreview)&&window.frameElement&&window.frameElement.ownerDocument?window.frameElement.ownerDocument:o).createElement("script"),s=n+"({inIframe: "+eventsAPIData.inIframe+', token: "'+eventAPIToken+'"});';o.getElementById(a)?r.innerHTML=s:(r.innerHTML=n+"="+atob(i)+" "+s,r.id=a);try{o.body.appendChild(r)}catch(e){t(e)}e()})},concertConciergeLikely=function(){var e=!!window.$sf,t=!0;try{parent&&parent.frameElement}catch(e){t=!1}return!e&&!t}();execHymnal()}();
