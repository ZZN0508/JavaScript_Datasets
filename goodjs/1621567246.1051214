define("liveProgram",[],function(){return function(){function seedfn(e,t,i){window.setInterval(function(){SetRemainTime(e,t,i)},1e3)}function SetRemainTime(nowTime,obj,data){var saveNowTime=nowTime,datas=null;seed++,nowTime+=seed,datas=obj;var showTime=timestampToTime(nowTime);timestampToTime(saveNowTime)!=showTime&&(datas=eval(data[Number(showTime.replace(/\./g,""))])),$.each(datas,function(e,t){nowTime>=t.timeU&&(nNextIndex=e)}),(nNextIndex>nThisIndex||0==nNextIndex)&&(templatefn(showTime,datas[nNextIndex]),nThisIndex=nNextIndex)}function templatefn(e,t){var i='<ul><li class="fl"><span>'+e+"</span><em>"+t.time+'</em></li>       <li class="fl cctv6-live-title">'+t.title+'</li>       <li class="fr ctv6-live-right"><i></i><b>鐩存挱涓�</b></li></ul>';$(".module-cctv6-item").empty().append(i)}function timestampToTime(e){var t=new Date(1e3*e),i=t.getFullYear()+".",l=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+".",n=(t.getDate()<10?"0"+t.getDate():t.getDate())+" ";(t.getHours()<10?"0"+t.getHours():t.getHours())+":",(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":",t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();return i+l+n}var nThisIndex=0,nNextIndex=0,seed=0;$.ajax({type:"GET",url:"/inc/2020/getEpginfo.json",jsonpCallback:"epginfo2020",dataType:"jsonp",success:function(data,status,xhr){if(data){var servertime=xhr.getResponseHeader("Date"),nowTime=Date.parse(servertime)/1e3,curDate=timestampToTime(nowTime).replace(/\./g,""),showTime=timestampToTime(nowTime),datas_current=eval(data[Number(curDate)]),defaultList="",thisIndex=0,nextIndex=0;$.each(datas_current,function(e,t){nowTime>=datas_current[e].timeU&&(nextIndex=e)}),(nextIndex>thisIndex||0==nextIndex)&&(defaultList='<ul><li class="fl"><span>'+showTime+"</span><em>"+datas_current[nextIndex].time+'</em></li>          <li class="fl cctv6-live-title">'+datas_current[nextIndex].title+'</li>          <li class="fr ctv6-live-right"><i></i><b>鐩存挱涓�</b></li></ul>',$(".module-cctv6-item").empty().append(defaultList),thisIndex=nextIndex),seedfn(nowTime,datas_current,data)}else $(".module-cctv6-item").empty().append('<ul><li class="cctv6-live-title">鑺傜洰鍗曡幏鍙栧け璐�</li></ul>')},error:function(e){$(".module-cctv6-item").empty().append('<ul><li class="cctv6-live-title">鑺傜洰鍗曡幏鍙栧け璐�</li></ul>')}})}}),define("liveVideo",["//js.static.m1905.cn/player/2.0.0/liveplayer.min.js"],function(e){return function(t){return new e({container:$(".live-common"),cid:t.cid,live:0==t.live?t.live:!0,flash:{configUrl:t.configUrl},video:{url:t.video,pic:t.pic}})}}),define("mvideo",["liveVideo"],function(e){return function(){function t(){$.ajax({type:"GET",url:"/api/content/?m=Live&a=m1905HomeLive",dataType:"jsonp",success:function(t,i,l){if(200==t.code){var o=t.info,a=l.getResponseHeader("Date");Date.parse(a)/1e3;switch(localStorage.setItem("mvideo_status",JSON.stringify({status:o.status})),o.status){case 1:r=e({cid:o.cid,live:!0,configUrl:o.live_xml_url,video:o.live_rtmp_url}),r.init(),$(".live-module-left h3 span.active").removeClass("active").siblings().addClass("active"),$(".infosWrap").eq(1).show().siblings().hide(),$(".m-live-notice,.m_back,.m_notice,.icon_yg").hide(),$(".m_live .cctv6-live-title").html(o.title),$(".m_live,.live-common,.m_live .ctv6-live-right,.icon_live").show(),s=!s,u=setInterval(function(){n(!1,!0)},6e4);break;case 2:$(".live-module-left h3 span.active").removeClass("active").siblings().addClass("active"),$(".infosWrap").eq(1).show().siblings().hide(),$(".live-common").css("background-image","url(//static.m1905.cn/homepage2020/PC/images/m_nodata.jpg)"),$(".m_back,.m-live-notice,.m_notice,.m_live .ctv6-live-right,.icon_yg").hide(),$(".live-common,.m_live,.icon_live").show(),$(".m_live .cctv6-live-title").html(o.title),s=!s,_=setInterval(function(){n(!0,!1)},6e4);break;case 3:v.init(),$(".icon_yg").show(),$(".icon_live").hide();break;default:v.init()}}},error:function(e){console.log(e)}})}function i(){$.ajax({type:"GET",url:"/api/content/?m=Live&a=m1905HomeLive",dataType:"jsonp",success:function(e,t,i){if(200==e.code){var n=e.info,o=i.getResponseHeader("Date"),a=Date.parse(o)/1e3;localStorage.setItem("mvideo_status",JSON.stringify({status:n.status})),l({cid:n.cid,live:n.live,status:n.status,targetTime:n.start_time,stime:a,title:n.title,start_time_info:n.start_time_info,live_xml_url:n.live_xml_url,live_rtmp_url:n.live_rtmp_url,lookback_xml_url:n.lookback_xml_url,lookback_rtmp_url:n.lookback_rtmp_url})}},error:function(e){console.log(e)}})}function l(t){switch(r&&r.destroy(),v&&v.destroy(),t.status){case 0:r=e({cid:t.cid,live:!1,configUrl:t.lookback_xml_url,video:t.lookback_rtmp_url}),r.init(),$(".m-live-notice,.m_live,.m_notice,.icon_live,.icon_yg").hide(),$(".m_back").find("strong").html(t.title),$(".live-common,.m_back").show();break;case 1:r=e({cid:t.cid,live:!0,configUrl:t.live_xml_url,video:t.live_rtmp_url}),r.init(),$(".m-live-notice,.m_back,.m_notice,.icon_yg").hide(),$(".m_live .cctv6-live-title").html(t.title),$(".m_live,.live-common,.m_live .ctv6-live-right,.icon_live").show(),u=setInterval(function(){n(!1,!0)},6e4);break;case 2:$(".live-common").css("background-image","url(//static.m1905.cn/homepage2020/PC/images/m_nodata.jpg)"),$(".m_back,.m-live-notice,.m_notice,.m_live .ctv6-live-right,.icon_yg").hide(),$(".live-common,.m_live,icon_live").show(),$(".m_live .cctv6-live-title").html(t.title),_=setInterval(function(){n(!0,!1)},6e4);break;case 3:$(".live-common,.m_live,.m_back,.icon_live").hide(),$(".notice-first").html(t.title),$(".m-live-notice,.m_notice,.icon_yg").show(),$(".leftTime").find("em").html(t.start_time_info),c(t.targetTime,t.stime,function(e,t,i,l){0==e&&0==t&&0==i&&0==l?(clearInterval(d),n(!0,!0)):($(".m_day").html(e),$(".m_hour").html(t),$(".m_mins").html(i),$(".m_secs").html(l))})}}function n(t,i){$.ajax({type:"GET",url:"/api/content/?m=Live&a=m1905HomeLive&type=live",dataType:"jsonp",cache:!1,success:function(l){if(200==l.code){var n=l.info.status;$(".icon_live").show(),$(".icon_yg").hide(),1!==n?(clearInterval(u),localStorage.setItem("mvideo_status",JSON.stringify({status:n})),o(i,l.info)):(clearInterval(_),localStorage.setItem("mvideo_status",JSON.stringify({status:n})),o(t,l.info))}else if(300==l.code){var n=l.info.status;clearInterval(u),clearInterval(_),localStorage.setItem("mvideo_status",JSON.stringify({status:n})),r&&r.destroy(),r=e({status:l.info.status,cid:l.info.cid,live:!1,configUrl:l.info.lookback_xml_url,video:l.info.lookback_rtmp_url}),r.init(),$(".m_live,.m_notice,.m-live-notice,.icon_live,.icon_yg").hide(),$(".live-common,.m_back").show(),$(".m_back").find("strong").html(l.info.title)}else clearInterval(u),clearInterval(_),localStorage.setItem("mvideo_status",JSON.stringify({status:n})),$(".m_back,.m-live-notice,.m_notice,.icon_yg,.icon_live").hide(),$(".live-common,.m_live").show(),$(".m_live .cctv6-live-title").html(l.info.title),$(".live-common").css("background-image","url(//static.m1905.cn/homepage2020/PC/images/m_nodata.jpg)")},error:function(e){clearInterval(u),clearInterval(_),$(".m_back,.m-live-notice,.m_notice").hide(),$(".live-common,.m_live").show(),$(".m_live .cctv6-live-title").html(window.liveObj.mvideo.title),$(".live-common").css("background-image","url(//static.m1905.cn/homepage2020/PC/images/m_nodata.jpg)")}})}function o(e,t){e&&l({cid:t.cid,live:t.live,status:t.status,title:t.title,start_time_info:t.start_time_info,live_xml_url:t.live_xml_url,live_rtmp_url:t.live_rtmp_url,lookback_xml_url:t.lookback_xml_url,lookback_rtmp_url:t.lookback_rtmp_url})}function a(){$.ajax({type:"GET",url:"/inc/2020/getEpginfo.json",jsonpCallback:"epginfo2020",dataType:"jsonp",success:function(e,t,i){if(e){var l=i.getResponseHeader("Date"),o=Date.parse(l)/1e3;$(".live-common,.m_live").hide(),$(".m-live-notice,.m_notice").show(),$(".notice-first").html(window.liveObj.mvideo.title),$(".leftTime").find("em").html(window.liveObj.mvideo.start_time_info),c(window.liveObj.mvideo.start_time,o,function(e,t,i,l){0==e&&0==t&&0==i&&0==l?(clearInterval(d),n(!0,!0)):($(".m_day").html(e),$(".m_hour").html(t),$(".m_mins").html(i),$(".m_secs").html(l))})}},error:function(e){console.log(e)}})}function c(e,t,i){var l=e-t;d=setInterval(function(){if(l--,l>0){var e=Math.floor(l%60),t=Math.floor(l/60%60),n=Math.floor(l/3600%24),o=Math.floor(l/3600/24);9>=o&&(o="0"+o),9>=n&&(n="0"+n),9>=t&&(t="0"+t),9>=e&&(e="0"+e),i(o,n,t,e)}else i(0,0,0,0),clearInterval(d)},1e3)}var s=!0,m=JSON.parse(localStorage.getItem("mvideo_status")),r=null,v=e(window.liveObj.cctv6),d=null,u=null,_=null,f=null,g=null;clearInterval(g),t(),$(".live-module-left h3 span").click(function(){m=JSON.parse(localStorage.getItem("mvideo_status"));var t=$(this).index(),n=$(".live-module-left span.active").index();t!=n&&($("video").each(function(){$(this).attr("src",""),$(this).remove()}),s?(clearInterval(g),v.destroy(),m&&m.status==window.liveObj.mvideo.status?3==m.status?a():l(window.liveObj.mvideo):i()):(clearInterval(d),clearTimeout(f),clearInterval(u),clearInterval(_),r&&r.destroy(),v=e(window.liveObj.cctv6),v.init(),$(".live-common").show(),$(".m-live-notice,.m_notice").hide()),s=!s,$(this).addClass("active").siblings().removeClass("active"),$(".infosWrap").eq(t).show().siblings().hide())})}}),require.config({baseUrl:"js"}),require(["liveProgram","mvideo"],function(e,t){$(function(){e(),t()})}),define("index",function(){});