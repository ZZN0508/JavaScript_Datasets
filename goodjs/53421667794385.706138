!function e(){if("undefined"!=typeof firebase)if(void 0!==firebase.firestore){var p=[];firebase.initializeApp({projectId:"firestore-realtime-push"});var t=firebase.firestore();try{t.collection("stage.ndtv.com").doc("ndtv_homepage").onSnapshot(function(e){for(;0<p.length;){var t=p.pop();$(t).unbind("click"),$(t).removeClass("unwatched")}e=e.data(),e=$.grep(e.experiments,function(e){return e.siteid==__siteid});$.each(e,function(e,t){var i,n=t.Experimentvariant.length,o="expr_"+t.experimentId,r=getCookie(o),a="";""==r||null==r?(n=n,i=Math.ceil(0),n=Math.floor(n),a=Math.floor(Math.random()*(n-i)+i),setCookie(o,a,1,"")):a=r;var s,c=t.Experimentvariant[a],a=t.catid,a=$("[class*=-"+a+"]");0<a.length&&(t.exptype,0<(s=$(a).find("a").filter(function(){return $(this).html().trim()===t.Experimentvariant[0].name.replace(new RegExp(/\bRs(\.\s|\s\b)/,"g"),"â‚¹").trim()})).length&&""!=c.name&&(s=s[0],$(s).html(c.name.replace(new RegExp(/\bRs(\.\s|\s\b)/,"g"),"â‚¹")),$(s).addClass("unwatched"),p.push(s),$(s).on("click",function(e){e.preventDefault();e=t.masterKey+"_deleted";l(c.variantkey+"_click",$(this).attr("href"),e,!0)}),$(s).isInViewport()&&d(s,t.masterkey,c.variantkey),$(window).on("scroll",function(){$(s).isInViewport()&&d(s,t.masterkey,c.variantkey)})))})})}catch(e){console.log(e)}$.fn.isInViewport=function(){var e=$(this).offset().top,t=e+$(this).outerHeight(),i=$(window).scrollTop(),n=i+$(window).height();return i<t&&e<n}}else setTimeout(e,10);else setTimeout(e,10);function l(n,e,t,i=!1){!function(e,t,i){e={url:"https://hpcms.ndtv.com/sportsredisapi/webapi/ndtv-trc?q="+n,method:"POST",timeout:0,headers:{"Content-Type":"application/json"},contentType:"application/json",data:JSON.stringify(e)};$.ajax(e).done(function(e){console.log(e),i&&(window.location=t)})}(JSON.stringify({key:n,type:"incr",deletedkey:t}),e,i)}function d(n,o,r){setTimeout(function(){var e,t,i="expr_variant_img_impr_"+r;__echImprssCount&&setCookie(i,r+"_view",-1,""),$(n).isInViewport()&&$(n).hasClass("unwatched")&&""==getCookie(i)&&(e=r+"_view",l(o,"",t=o+"_deleted"),l(e,"",t),$(n).removeClass("unwatched"),setCookie(i,r+"_view",1,""))},3e3)}}();
