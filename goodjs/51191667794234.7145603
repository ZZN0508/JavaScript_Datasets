!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.SupportChat=e():t.SupportChat=e()}("undefined"!=typeof self?self:this,function(){return n={"/9aa":function(t,e,n){var r=n("NykK"),o=n("ExA7");t.exports=function(t){return"symbol"==typeof t||o(t)&&"[object Symbol]"==r(t)}},"6BTq":function(t,r,o){"use strict";!function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}o.d(r,"a",function(){return n});var n="object"===("undefined"==typeof window?"undefined":e(window))&&window.window===window&&window||"object"===(void 0===t?"undefined":e(t))&&t.global===t&&t||"object"===("undefined"==typeof self?"undefined":e(self))&&self.self===self&&self}.call(this,o("yLpj"))},AP2z:function(t,e,n){var r=n("nmnc"),n=Object.prototype,i=n.hasOwnProperty,a=n.toString,c=r?r.toStringTag:void 0;t.exports=function(t){var e=i.call(t,c),n=t[c];try{var r=!(t[c]=void 0)}catch(t){}var o=a.call(t);return r&&(e?t[c]=n:delete t[c]),o}},DzJC:function(t,e,n){var i=n("sEfC"),a=n("GoyQ");t.exports=function(t,e,n){var r=!0,o=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return a(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),i(t,e,{leading:r,maxWait:e,trailing:o})}},ExA7:function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},GoyQ:function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},KfNM:function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},Kz5y:function(t,e,n){var r=n("WFqU"),n="object"==typeof self&&self&&self.Object===Object&&self,n=r||n||Function("return this")();t.exports=n},NykK:function(t,e,n){var r=n("nmnc"),o=n("AP2z"),i=n("KfNM"),a=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":(a&&a in Object(t)?o:i)(t)}},QIyF:function(t,e,n){var r=n("Kz5y");t.exports=function(){return r.Date.now()}},WFqU:function(e,t,n){!function(t){t="object"==typeof t&&t&&t.Object===Object&&t;e.exports=t}.call(this,n("yLpj"))},nmnc:function(t,e,n){n=n("Kz5y").Symbol;t.exports=n},sEfC:function(t,e,n){var b=n("GoyQ"),g=n("QIyF"),v=n("tLB3"),O=Math.max,E=Math.min;t.exports=function(r,n,t){var o,i,a,c,u,s,d=0,f=!1,l=!1,e=!0;if("function"!=typeof r)throw new TypeError("Expected a function");function p(t){var e=o,n=i;return o=i=void 0,d=t,c=r.apply(n,e)}function w(t){var e=t-s;return void 0===s||n<=e||e<0||l&&a<=t-d}function y(){var t,e=g();if(w(e))return h(e);u=setTimeout(y,(t=n-(e-s),l?E(t,a-(e-d)):t))}function h(t){return u=void 0,e&&o?p(t):(o=i=void 0,c)}function m(){var t=g(),e=w(t);if(o=arguments,i=this,s=t,e){if(void 0===u)return d=e=s,u=setTimeout(y,n),f?p(e):c;if(l)return clearTimeout(u),u=setTimeout(y,n),p(s)}return void 0===u&&(u=setTimeout(y,n)),c}return n=v(n)||0,b(t)&&(f=!!t.leading,a=(l="maxWait"in t)?O(v(t.maxWait)||0,n):a,e="trailing"in t?!!t.trailing:e),m.cancel=function(){void 0!==u&&clearTimeout(u),o=s=i=u=void(d=0)},m.flush=function(){return void 0===u?c:h(g())},m}},tLB3:function(t,e,n){var r=n("GoyQ"),o=n("/9aa"),i=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,u=/^0o[0-7]+$/i,s=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return NaN;if(r(t)&&(e="function"==typeof t.valueOf?t.valueOf():t,t=r(e)?e+"":e),"string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var e=c.test(t);return e||u.test(t)?s(t.slice(2),e?2:8):a.test(t)?NaN:+t}},tjUo:function(t,e,n){"use strict";n.r(e);function i(t){return{customEventName:"chat_is_closed",properties:{chat_id:t}}}function a(t,e){return{customEventName:"chat_account_status_changed",properties:{status:t,chat_id:e}}}function c(t){if(!window.appboy)throw new Error("No Braze appboy");if(!t.customEventName)throw new Error("No payload custom event name");window.appboy.logCustomEvent(t.customEventName,t.properties)}function u(){var t=document.querySelector("body");return!(!t||!t.getAttribute)&&"true"===t.getAttribute("data-logged-in")}var s={OPEN:"OPEN",SHOWN:"SHOWN",HIDDEN:"HIDDEN",EMPTY:"EMPTY"},d="supportchat:initialized",f="SUPPORT.CHAT.STATE",r=n("DzJC"),l=n.n(r);function p(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function w(r){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?p(Object(o),!0).forEach(function(t){var e,n;e=r,t=o[n=t],n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):p(Object(o)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(o,t))})}return r}function o(t){var e=t.tags,n=t.department,r=t.state,o=t.chat_id;!function(){switch(r){case s.OPEN:case s.SHOWN:return window.zE("webWidget","show");default:window.zE("webWidget","hide")}}(),function t(){var e=document.getElementById("launcher");if(!e)return setTimeout(function(){10!==t.retries&&(t.retries=(t.retries||0)+1,t())},1e3);setTimeout(function(){return y(e)},500),document.onscroll=l()(function(){return y(e)},50)}(),(t=document.createElement("style")).innerHTML="\n        #launcher {\n            margin: 10px !important;\n            z-index: 1000 !important;\n        }\n    ",document.head.appendChild(t),function t(){var e=document.getElementById("launcher");if(!e)return setTimeout(function(){10!==t.retries?(t.retries=(t.retries||0)+1,t()):console.error("Did not find launcher")},1e3);var n=e.contentDocument.createElement("style"),r=e.contentDocument.querySelector("button");if(!r)return setTimeout(function(){10!==t.retriesForButton?(t.retriesForButton=(t.retriesForButton||0)+1,t()):console.error("Did not find button in launcher")},1e3);n.innerHTML="\n        button {\n            padding: 1rem !important;\n        }\n        button span:nth-child(1) {\n            padding-right: 0 !important;\n        }\n        button span.u-inlineBlock, button span {\n            display: none !important;\n        }\n    ",e.contentDocument.head.appendChild(n),r.innerHTML='\n    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <g clip-path="url(#clip0)">\n            <path d="M1.59978 0.599609H18.3998C19.0622 0.599609 19.5998 1.13721 19.5998 1.79961V14.9996C19.5998 15.662 19.0622 16.1996 18.3998 16.1996H11.1998L5.19978 19.7996V16.1996H1.59978C0.93738 16.1996 0.39978 15.662 0.39978 14.9996V1.79961C0.39978 1.13721 0.93738 0.599609 1.59978 0.599609Z"\n                  fill="white"/>\n        </g>\n        <path d="M6.75011 13.8H9.48354V8.3324H12.0832V13.8H14.8V6.31063H9.48354V5.8465C9.48354 5.3373 9.88385 5.0226 10.5173 5.0226H12.0841V3H10.0668C8.08292 3 6.75011 4.09352 6.75011 5.69625V6.31063H5.19995V8.33323H6.75011V13.8Z"\n              fill="#1E1692" style="fill: #1E1692;"/>\n        <defs>\n            <clipPath id="clip0">\n                <rect width="19.2" height="19.2" fill="white" transform="translate(0.39978 0.599609)"/>\n            </clipPath>\n        </defs>\n    </svg>\n'}(),setInterval(function(){var e,t;window.zE("webWidget:get","chat:isChatting")&&(e=D(),function(){if(!e||!e.createdAt)return 1;var t=new Date(e.createdAt),t=new Date(t.getTime()+864e5-9e5);return new Date>t}()&&(t=new Date(Date.now()-864e5+9e5),T(w(w({},e),{},{createdAt:t}))))},6e4),window.zE("webWidget:on","chat:departmentStatus",function(t){console.info("Department ".concat(t.name,", ").concat(t.id," is ").concat(t.status)),t.name===n&&"online"===t.status&&(window.zE("webWidget","chat:addTags",e),function(t){switch(t){case s.OPEN:window.zE("webWidget","show"),setTimeout(function(){window.zE("webWidget","open")},500);break;case s.SHOWN:window.zE("webWidget","show");break;default:s.HIDDEN;window.zE("webWidget","hide")}}(r))}),window.zE("webWidget:on","chat:connected",function(){console.log("Successfully connected to Zendesk Chat!")}),window.zE("webWidget:on","chat:end",function(){var t,e;t=D(),e=new Date(Date.now()-864e5+6e4),T(w(w({},t),{},{state:s.SHOWN,createdAt:e})),c(i(o))}),window.zE("webWidget:on","close",function(){T(w(w({},D()),{},{state:s.SHOWN}))}),window.zE("webWidget:on","chat:status",function(t){return c(a(t,o))}),window.zE("webWidget:on","chat:unreadMessages",function(){window.zE("webWidget","open")}),window.dispatchEvent(new CustomEvent(d))}function y(t){window.innerHeight+window.scrollY>document.body.clientHeight-20?t.classList.add("invisible-element"):t.classList.remove("invisible-element")}function h(t){var e,n;t&&"EMPTY"!==t.state&&t.chat_id&&t.department&&(n=(e=t).tags,e=e.department,window.zESettings={launcher:{label:{"*":"Business Chat"},chatLabel:{"*":"Business Chat"}},webWidget:{zIndex:9999999999,offset:{horizontal:0,vertical:"2px"},chat:{tags:n,departments:{enabled:[e],select:e}},authenticate:{chat:{jwtFn:function(e){window.axios.get("/zendesk/chat_authentication").then(function(t){return t.data}).then(function(t){console.log("Successfuly authenticated into Zendesk chat"),e(t.jwt)})}}}}},function(t){var e,n,r;document.getElementById("ze-snippet")&&(e=document.getElementById("launcher"),n=document.getElementById("webWidget"),r=document.querySelector('[data-product="web_widget"]'),o=document.getElementById("ze-snippet"),e&&e.parentElement.removeChild(e),n&&n.parentElement.removeChild(n),r&&r.parentElement.removeChild(r),o.parentElement.removeChild(o),delete window.$zopim,delete window.zEmbed,delete window.zE,delete window.zEACLoaded,delete window.zEWebpackACJsonp);var o=document.createElement("script");o.onload=t,o.type="application/javascript",o.id="ze-snippet",o.src="https://static.zdassets.com/ekr/snippet.js?key=".concat("dbd69753-3b8a-468d-b704-8a1ed2887899","&cors=1"),(t=document.getElementsByTagName("script")[0]).parentNode.insertBefore(o,t)}(function(){return o(t)}))}e=n("6BTq");function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var b=Symbol(),r=(m(O.prototype,[{key:"on",value:function(t,e){var n=this[b].get(t);n||(this[b].set(t,new Set),n=this[b].get(t)),n.add(e)}},{key:"once",value:function(e,n){var r=this;this.on(e,function t(){r.off(e,t),n.apply(void 0,arguments)})}},{key:"one",value:function(t,e){this.has(t)||this.on(t,e)}},{key:"has",value:function(t){return this[b].has(t)}},{key:"off",value:function(t,e){var n;this[b].has(t)&&(void 0!==e?((n=this[b].get(t)).delete(e),0===n.size&&this[b].delete(t)):this[b].delete(t))}},{key:"emit",value:function(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];t=this[b].get(t);t&&t.forEach(function(t){t.apply(void 0,n)})}},{key:"deferred",value:function(t){for(var e=this,n=arguments.length,r=new Array(1<n?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return Promise.resolve().then(function(){e.emit.apply(e,[t].concat(r))})}}]),O),n=Symbol.for("globalEventBus"),g=e.a[n]=e.a[n]||new r,v=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];g.deferred("OBS::BIG_QUERY",{events:e})};function O(){!function(t){if(!(t instanceof O))throw new TypeError("Cannot call a class as a function")}(this),this[b]=new Map}function E(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function j(r){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?E(Object(o),!0).forEach(function(t){var e,n;e=r,t=o[n=t],n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):E(Object(o)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(o,t))})}return r}function S(t){t=j(j({},{group:"user_actions",platform:"web",user:{id:window.dataLayer&&window.dataLayer.length&&window.dataLayer[0]&&window.dataLayer[0].user_id},feature:{name:"support_chat"},reason:"support_chat_to_vibs",sub_group:"website_actions",action:{type:"click"},domain:{name:"buyers"},publisher:{domain:"buyers",sub_domain:"grizzlies"}}),{},{type:"chat_triggered",reason:P(t)}),v(t)}var P=function(){var n="reason_";return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).filter(function(t){return-1!==t.indexOf(n)}).reduce(function(t,e){return e.slice(n.length)},"")};function _(t){return function(t){if(Array.isArray(t))return A(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t){if(t){if("string"==typeof t)return A(t,void 0);var e=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(e="Object"===e&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?A(t,void 0):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function x(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function z(r){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?x(Object(o),!0).forEach(function(t){var e,n;e=r,t=o[n=t],n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):x(Object(o)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(o,t))})}return r}function D(){var t=window.localStorage.getItem(f);if(t)try{return JSON.parse(t)}catch(t){window.localStorage.removeItem(f)}}function T(t){t=JSON.stringify(z(z({},t),{},{createdAt:t.createdAt||new Date}));return window.localStorage.setItem(f,t)}function C(t){var e=Object.assign({},t);return"true"===new URLSearchParams(window.location.search).get("openSupportChat")&&(t=new URLSearchParams(window.location.search).get("utm_source"),t="reason_".concat(t||"url_triggered_chat"),Object.assign(e,{state:s.OPEN,tags:[].concat(_(e.tags),[t])}),t=[].concat(_(e.tags),["user_type-".concat(window.dataLayer&&window.dataLayer[0].user_type)]),S(t)),e}function N(){if(!window.axios)return setTimeout(function(){10!==N.retries&&(N.retries=(N.retries||0)+1,N())},500);var t=D();return function(t){if(!t)return 1;t=new Date(t),t=new Date(t.getTime()+864e5);return new Date>t}(t&&t.createdAt)?window.axios.get("/zendesk/chat/state").then(function(t){return t.data}).then(function(t){if(t&&(void 0===t.success||!1!==t.success)){t=z(z({},t),{},{tags:[].concat(_(t.tags||[]),["user_type-".concat(window.dataLayer&&window.dataLayer[0].user_type)])});return T(t),t}}).catch(function(t){throw t}).then(function(t){if(t)return h(C(t))}):h(C(t))}function W(t){return function(t){if(Array.isArray(t))return H(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t){if(t){if("string"==typeof t)return H(t,void 0);var e=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(e="Object"===e&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?H(t,void 0):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}window.addEventListener("supportchat:init",function(t){var e,n,r,o,i;u()?(e=D(),function(t,e){e=1<arguments.length&&void 0!==e?e:{};if(!t)throw new Error('"detail" payload is not defined for event. Please, fire event like new CustomEvent("supportchat:init", { detail: { ...your properties } })');if(!t.chat_id&&!e.chat_id)throw new Error('Missing param "chat_id" needed to initiate support chat');if(!t.department&&!e.department)throw new Error('Missing param "department" needed to initiate support chat');if(!t.tags)throw new Error('Missing param "tags" needed to initiate support chat');var n=t.state||e.state;if(!n)throw new Error('Missing param "state" needed to initiate support chat');if(n&&!Object.values(s).find(function(t){return t===n}))throw new Error('"state" property has to have one of these values: '.concat(Object.values(s).toString()));if(t.createdAt&&!(t.createdAt instanceof Date))throw new Error('"createdAt" param has to be of type Date')}(t.detail,e),n=(i=t.detail).chat_id,r=i.department,o=i.tags,t=i.state,i=i.createdAt,i={chat_id:n,department:r,tags:o=[].concat(W(o),["user_type-".concat(window.dataLayer&&window.dataLayer[0].user_type)]),state:t,createdAt:i},S(o),h(function(t,e){e=1<arguments.length&&void 0!==e?e:{};return{chat_id:t.chat_id||e.chat_id,department:t.department||e.department,tags:t.tags?[].concat(W(e.tags||[]),W(t.tags)):e.tags,state:t.state||e.state,createdAt:t.createdAt||e.createdAt}}(i,e))):window.localStorage.removeItem(f)}),function(t){if(u())return"LIVE"!==t&&N();window.localStorage.removeItem(f)}(window.SUPPORT_CHAT_TYPE)},yLpj:function(t,e){var n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n}},r={},o.m=n,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="https://npm-assets.fiverrcdn.com/assets/@fiverr-private/support_chat/",o(o.s="tjUo");function o(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}var n,r});
