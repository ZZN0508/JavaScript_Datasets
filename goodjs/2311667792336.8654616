!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("wafer-tabs",[],e):"object"==typeof exports?exports["wafer-tabs"]=e():(t.wafer=t.wafer||{},t.wafer.wafers=t.wafer.wafers||{},t.wafer.wafers["wafer-tabs"]=e())}("undefined"!=typeof self?self:this,function(){return a={"./src/base.js":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e,a){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,e);return void 0!==o?"value"in o?o.value:void 0!==(o=o.get)?o.call(a):void 0:null===(t=Object.getPrototypeOf(t))?void 0:s(t,e,a)}var T=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var a=[],o=!0,s=!1,i=void 0;try{for(var n,r=t[Symbol.iterator]();!(o=(n=r.next()).done)&&(a.push(n.value),!e||a.length!==e);o=!0);}catch(t){s=!0,i=t}finally{try{!o&&r.return&&r.return()}finally{if(s)throw i}}return a}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(t,e,a){return e&&h(t.prototype,e),a&&h(t,a),t},i=window.wafer,w=i.base,n=i.constants,r=i.utils,i=i.WaferBaseClass,u=r.bindEvent,l=r.clearTimeout,E=r.convertNodeListToArray,A=r.findAncestor,_=r.setTimeout,c=r.unbindEvent,O=n.ATTR_PREFIX,S=["handleKeyDown","handleTargetFocusIn","handleTargetFocusOut","handleTargetMouseLeave","handleTargetMouseOver","tabChange","tabClick","tabFocusIn","tabMouseOver"],o=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(k,i),o(k,[{key:"addEventListeners",value:function(){var t=this._util,e=t.shouldAutoSwitch,t=t.targetElem;e&&(u(t,"focusin",this.handleTargetFocusIn,{passive:!1}),u(t,"focusout",this.handleTargetFocusOut,{passive:!1}),u(t,"mouseleave",this.handleTargetMouseLeave,{passive:!1}),u(t,"mouseover",this.handleTargetMouseOver,{passive:!1})),s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"addEventListeners",this).call(this)}},{key:"removeEventListeners",value:function(){var t=this._util,e=t.shouldAutoSwitch,t=t.targetElem;e&&(c(t,"focusin",this.handleTargetFocusIn,{passive:!1}),c(t,"focusout",this.handleTargetFocusOut,{passive:!1}),c(t,"mouseleave",this.handleTargetMouseLeave,{passive:!1}),c(t,"mouseover",this.handleTargetMouseOver,{passive:!1})),s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"removeEventListeners",this).call(this)}},{key:"setTimeoutForTabChange",value:function(){var t=this,e=this._util.autoSwitchTimeout,a=this._util.autoSwitchRotationInterval;a&&this._util.switchTabTimeout&&(e=a),this.pauseSwitching(),this._util.switchTabTimeout=_(function(){t.switchTab("next"),t.setTimeoutForTabChange()},e,this)}},{key:"switchTab",value:function(t){var e=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).focus,a=void 0!==e&&e,o=this._util.tabsElems,s=this._state.activeIndex,e="next"===t?s+1:s-1;s===o.length-1&&"next"===t?this.activateTab(o[0].tabElem,{focus:a,force:!0}):0===s&&"prev"===t?this.activateTab(o[o.length-1].tabElem,{focus:a,force:!0}):this.activateTab(o[e].tabElem,{focus:a,force:!0})}},{key:"handleKeyDown",value:function(t){switch((t=t||window.event).keyCode){case 37:this.switchTab("prev",{focus:!0});break;case 39:this.switchTab("next",{focus:!0});break;case 40:this.focusActiveTab()}}},{key:"pauseSwitching",value:function(){this._util.switchTabTimeout&&l(this._util.switchTabTimeout,this)}},{key:"activateTab",value:function(r){var u,l,c,h,d,f,t,e,v,b,a,p=this,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},s=o.focus,y=void 0!==s&&s,i=o.force,n=o.skipScroll,g=void 0!==n&&n,m=this._state.activeTabElem;void 0!==i&&i||r!==m?(a=r.classList.contains("wafer-fetch")||r.getElementsByClassName("wafer-fetch")[0],t=this._util,u=t.activeClass,e=t.boundary,l=t.elem,c=t.inactiveClass,s=t.shouldAutoSwitch,h=t.shouldScrollRestore,d=t.shouldUseAria,o=t.tabsElems,f=t.targetElems,i=(n=this._state).activeIndex,m=n.tabsTopStyleInPixel,s&&this.pauseSwitching(),b=v=0,h&&(t=window.pageYOffset||document.documentElement.scrollTop,n=window.pageXOffset||document.documentElement.scrollLeft,e=(s=e.getBoundingClientRect()).top,s=s.left,v=e+t-m,b=s+n,m<e?g=!0:this._state.scrollPositions[i]={top:t,lef:n}),a&&(!(a=T(f||[],1)[0])||(a=a.parentNode).style&&(a.style.minHeight="",a.style.minHeight=a.offsetHeight+"px")),o.forEach(function(){var t,e,a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=a.tabElem,s=a.hasTrigger,i=arguments[1],n=f&&f[i];o===r?(o.classList.add("active"),o.setAttribute("aria-selected",!0),d&&(o.setAttribute("tabindex",0),y&&o.focus()),p._state.activeIndex=i,p._state.activeTabElem=o,n&&(h&&!g&&(i=(a=(void 0===(a=(p._state||{}).scrollPositions)?{}:a)[i]||{}).top,t=void 0===i?v:i,a=a.left,e=void 0===a?b:a,_(function(){window.scrollTo(e,t)},2)),c&&n.classList.remove(c),n.classList.add(u),n.setAttribute("aria-hidden",!1),d&&n.removeAttribute("hidden"),w.unlock(o),w.sync(n),w.syncUI(n),s&&w.trigger(o),w.emitWaferEvent("tab:selected",{elem:l,meta:{targetElem:n}}))):(w.lock(o),o.classList.remove("active"),o.setAttribute("aria-selected",!1),d&&(n&&n.removeAttribute("hidden"),o.setAttribute("tabindex",-1)),n&&(n.classList.remove(u),c&&n.classList.add(c),n.setAttribute("aria-hidden",!0),d&&(n.setAttribute("hidden","hidden"),n.setAttribute("tabindex",-1))))})):r.classList.add("active")}},{key:"focusActiveTab",value:function(){var t=this._util,e=t.targetElems,t=t.shouldDisableFocus,e=e&&e[this._state.activeIndex];e&&!t&&(e.setAttribute("tabIndex",-1),e.focus())}},{key:"deactivateTab",value:function(a){var o=this,t=this._util,s=t.activeClass,i=t.inactiveClass,e=t.tabsElems,n=t.targetElems;this._state.activeTabElem=null,e.some(function(){var t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).tabElem,e=n&&n[arguments[1]];if(t===a)return t.classList.remove("active"),t.setAttribute("aria-selected",!1),e&&(e.classList.remove(s),i&&e.classList.add(i),e.setAttribute("aria-hidden",!0)),!(o._state.activeIndex=0)})}},{key:"tabClick",value:function(t){this._util.shouldAllowDefault||t.preventDefault(),this.activateTab(t.eventTarget),this.focusActiveTab()}},{key:"handleTargetFocusIn",value:function(t){this._util.shouldAutoSwitch&&this.pauseSwitching()}},{key:"tabFocusIn",value:function(t){var e=this._util,a=e.shouldHandleFocus,e=e.focusOutTimeout;a&&(e&&l(e,this),this.activateTab(t.currentTarget))}},{key:"focusIn",value:function(t){this._util.shouldUseAria&&u(document,"keydown",this.handleKeyDown)}},{key:"handleTargetFocusOut",value:function(t){this._util.shouldAutoSwitch&&this.setTimeoutForTabChange()}},{key:"focusOut",value:function(){var t=this,e=this._util,a=e.shouldHandleFocus,e=e.shouldUseAria,o=this._state.activeTabElem;o&&a&&(this._util.focusOutTimeout=_(function(){t.deactivateTab(o)},1,this)),e&&c(document,"keydown",this.handleKeyDown)}},{key:"handleTargetMouseOver",value:function(t){this._util.shouldAutoSwitch&&this.pauseSwitching()}},{key:"tabMouseOver",value:function(t){var e=this._util,a=e.shouldAutoSwitch,e=e.shouldHandleHover;a&&this.pauseSwitching(),e&&this.activateTab(t.currentTarget)}},{key:"handleTargetMouseLeave",value:function(t){this._util.shouldAutoSwitch&&this.setTimeoutForTabChange()}},{key:"mouseover",value:function(){this._util.shouldAutoSwitch&&this.pauseSwitching()}},{key:"mouseleave",value:function(){var t=this._util,e=t.shouldAutoSwitch,a=t.shouldHandleHover,o=t.isCollapsable,t=this._state.activeTabElem;e&&this.setTimeoutForTabChange(),a&&o&&t&&this.deactivateTab(t)}},{key:"tabChange",value:function(t){t.preventDefault();var e=t.eventTarget.selectedIndex||0;this.activateTab(t.eventTarget.options[e])}},{key:"destroy",value:function(){this.pauseSwitching(),this.removeEventListeners(),s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"destroy",this).call(this)}},{key:"config",get:function(){return{shouldAutoSwitch:this._util.shouldAutoSwitch}}}]),k);function k(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,k);for(var e,a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,t,{},{})),o=t.getAttribute(O+"active-class")||"wafer-tab-active",s=t.getAttribute(O+"inactive-class"),i=Number(t.getAttribute(O+"scroll-restore"))||0,n=t.hasAttribute(O+"collapsable"),r=t.hasAttribute(O+"handle-hover"),u=t.hasAttribute(O+"handle-focus"),l=t.hasAttribute(O+"tabs-allowdefault"),c=t.hasAttribute(O+"disable-focus"),h=t.hasAttribute(O+"aria"),d=Number(t.getAttribute(O+"auto-switch"))||0,f=Number(t.getAttribute(O+"auto-switch-timeout"))||2e3,v=Number(t.getAttribute(O+"auto-switch-rotation-interval"))||0,b=Number(t.getAttribute(O+"active-index"))||(n?null:0),p=A(t,t.getAttribute(O+"boundary"))||document.body,y=t.getAttribute(O+"target"),g=[],m=0,w=t.getElementsByClassName("tab");e=w[m];++m)g.push({tabElem:e,hasTrigger:"tabActivate"===e.getAttribute(O+"trigger")});var _=E(p.getElementsByClassName(y)),y=T(_,1)[0],_=y&&y.children,_=a._util={activeClass:o,autoSwitchTimeout:f,autoSwitchRotationInterval:v,boundary:p,elem:t,inactiveClass:s,isCollapsable:n,shouldAllowDefault:l,shouldAutoSwitch:d,shouldDisableFocus:c,shouldHandleFocus:u,shouldHandleHover:r,shouldScrollRestore:i,shouldUseAria:h,tabsElems:g,targetElem:y,targetElems:_&&E(_)};return y&&y.classList.add("wafer-tabs-target"),a._state={activeIndex:0,activeTabElem:null,tabsTopStyleInPixel:0},i&&(a._state.scrollPositions=a._state.scrollPositions||{},a._state.tabsTopStyleInPixel=parseInt(window.getComputedStyle(t).top)||0),null!==b&&(a._state.activeIndex=b,(b=_.tabsElems[b])&&a.activateTab(b.tabElem,{skipScroll:!0})),S.forEach(function(t){a[t]=a[t].bind(a)}),d&&a.setTimeoutForTabChange(),a.addEventListeners(),a}function h(t,e){for(var a=0;a<e.length;a++){var o=e[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}o.events={change:[["tabs","tabChange"]],click:[["tab","tabClick"]],focusin:[["tab","tabFocusIn"],["_self","focusIn"]],focusout:[["_self","focusOut"]],mouseleave:[["_self","mouseleave"]],mouseover:[["tab","tabMouseOver"],["_self","mouseover"]]},e.default=o,t.exports=e.default},"./src/controller.js":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e,a){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,e);return void 0!==o?"value"in o?o.value:void 0!==(o=o.get)?o.call(a):void 0:null===(t=Object.getPrototypeOf(t))?void 0:s(t,e,a)}var i,a=function(t,e,a){return e&&c(t.prototype,e),a&&c(t,a),t},n=window.wafer,r=n.controllers,u=n.utils.findAncestor,r=r.WaferBaseController,a=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,r),a(l,[{key:"handleTabTargetFetchUpdate",value:function(t){var e=t.elem;e&&"tab"===e.getAttribute("role")&&(e=t.meta.targetElem||e,(e=u(e,"wafer-tabs-target"))&&e.style&&(e.style.minHeight=""))}},{key:"handleFetchSuccessEvent",value:function(t){this.handleTabTargetFetchUpdate(t)}},{key:"handleErrorEvent",value:function(t){"wafer-fetch"===t.name&&this.handleTabTargetFetchUpdate(t)}},{key:"addEventListeners",value:function(){var t=this;window.wafer.ready(function(){window.wafer.on("fetch:success",t.handleFetchSuccessEvent),window.wafer.on("error",t.handleErrorEvent)}),s(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"addEventListeners",this)&&s(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"addEventListeners",this).call(this)}},{key:"handleVisibilityChange",value:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],e=this._state.elementInstances,a=!0,o=!1,s=void 0;try{for(var i,n=e.values()[Symbol.iterator]();!(a=(i=n.next()).done);a=!0){var r=i.value.instance;r.config.shouldAutoSwitch&&(t?r.setTimeoutForTabChange():r.pauseSwitching())}}catch(t){o=!0,s=t}finally{try{!a&&n.return&&n.return()}finally{if(o)throw s}}}}]),l);function l(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.root,e=void 0===e?document:e,t=t.selector,t=void 0===t?".wafer-tabs":t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);var a,a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,{root:e,selector:t,WaferClass:(i||(a=o("./src/base.js"),i=a&&a.__esModule?a:{default:a})).default}));return a.sync(),a.handleFetchSuccessEvent=a.handleFetchSuccessEvent.bind(a),a.handleErrorEvent=a.handleErrorEvent.bind(a),a.addEventListeners(),a}function c(t,e){for(var a=0;a<e.length;a++){var o=e[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}e.default=a,t.exports=e.default},"./src/entry.js":function(t,e,a){"use strict";var o,s;Object.defineProperty(e,"__esModule",{value:!0}),e.default=new(o||(s=a("./src/controller.js"),o=s&&s.__esModule?s:{default:s})).default({selector:".wafer-tabs"}),t.exports=e.default}},s={},o.m=a,o.c=s,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:a})},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="https://s.yimg.com/aaq/wf/",o(o.s="./src/entry.js");function o(t){if(s[t])return s[t].exports;var e=s[t]={i:t,l:!1,exports:{}};return a[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}var a,s});
