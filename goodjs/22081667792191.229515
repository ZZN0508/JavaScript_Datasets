!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(v){"use strict";var P="tinyscrollbar",k={axis:"y",wheel:!0,wheelSpeed:40,wheelLock:!0,touchLock:!0,trackSize:!1,thumbSize:!1,thumbSizeMin:20};function e(i,t){this.options=v.extend({},k,t),this._defaults=k,this._name=P;var n=this,o=i.find(".viewport"),s=i.find(".overview"),h=i.find(".scrollbar"),c=h.find(".track"),u=h.find(".thumb"),a="ontouchstart"in document.documentElement,e="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",r="x"===this.options.axis,d=r?"width":"height",m=r?"left":"top",l=0;function p(){return 0<n.contentPosition}function S(){return n.contentPosition<=n.contentSize-n.viewportSize-5}function f(t,e){n.hasContentToSroll&&(v("body").addClass("noSelect"),l=e?u.offset()[m]:r?t.pageX:t.pageY,a&&(document.ontouchmove=function(t){(n.options.touchLock||p()&&S())&&t.preventDefault(),t.touches[0][P+"Touch"]=1,z(t.touches[0])},document.ontouchend=b),v(document).bind("mousemove",z),v(document).bind("mouseup",b),u.bind("mouseup",b),c.bind("mouseup",b),z(t))}function w(t){var e,o;n.hasContentToSroll&&(o=-((e=t||window.event).deltaY||e.detail||-1/3*e.wheelDelta)/40,t=1===e.deltaMode?n.options.wheelSpeed:1,n.contentPosition-=o*t*n.options.wheelSpeed,n.contentPosition=Math.min(n.contentSize-n.viewportSize,Math.max(0,n.contentPosition)),n.thumbPosition=n.contentPosition/n.trackRatio,i.trigger("move"),u.css(m,n.thumbPosition),s.css(m,-n.contentPosition),(n.options.wheelLock||p()&&S())&&(e=v.event.fix(e)).preventDefault())}function z(t){var e;n.hasContentToSroll&&(e=r?t.pageX:t.pageY,e=t[P+"Touch"]?l-e:e-l,e=Math.min(n.trackSize-n.thumbSize,Math.max(0,n.thumbPosition+e)),n.contentPosition=e*n.trackRatio,i.trigger("move"),u.css(m,e),s.css(m,-n.contentPosition))}function b(){n.thumbPosition=parseInt(u.css(m),10)||0,v("body").removeClass("noSelect"),v(document).unbind("mousemove",z),v(document).unbind("mouseup",b),u.unbind("mouseup",b),c.unbind("mouseup",b),document.ontouchmove=document.ontouchend=null}return this.contentPosition=0,this.viewportSize=0,this.contentSize=0,this.contentRatio=0,this.trackSize=0,this.trackRatio=0,this.thumbSize=0,this.thumbPosition=0,this.hasContentToSroll=!1,this.update=function(t){var e=d.charAt(0).toUpperCase()+d.slice(1).toLowerCase();switch(this.viewportSize=o[0]["offset"+e],this.contentSize=s[0]["scroll"+e],this.contentRatio=this.viewportSize/this.contentSize,this.trackSize=this.options.trackSize||this.viewportSize,this.thumbSize=Math.min(this.trackSize,Math.max(this.options.thumbSizeMin,this.options.thumbSize||this.trackSize*this.contentRatio)),this.trackRatio=(this.contentSize-this.viewportSize)/(this.trackSize-this.thumbSize),this.hasContentToSroll=this.contentRatio<1,h.toggleClass("disable",!this.hasContentToSroll),t){case"bottom":this.contentPosition=Math.max(this.contentSize-this.viewportSize,0);break;case"relative":this.contentPosition=Math.min(Math.max(this.contentSize-this.viewportSize,0),Math.max(0,this.contentPosition));break;default:this.contentPosition=parseInt(t,10)||0}return this.thumbPosition=this.contentPosition/this.trackRatio,u.css(m,n.thumbPosition),s.css(m,-n.contentPosition),h.css(d,n.trackSize),c.css(d,n.trackSize),u.css(d,n.thumbSize),n},n.update(),function(){a&&(o[0].ontouchstart=function(t){1===t.touches.length&&(t.stopPropagation(),f(t.touches[0]))});u.bind("mousedown",function(t){t.stopPropagation(),f(t)}),c.bind("mousedown",function(t){f(t,!0)}),v(window).resize(function(){n.update("relative")}),n.options.wheel&&window.addEventListener?i[0].addEventListener(e,w,!1):n.options.wheel&&(i[0].onmousewheel=w)}(),n}v.fn[P]=function(t){return this.each(function(){v.data(this,"plugin_"+P)||v.data(this,"plugin_"+P,new e(v(this),t))})}});
