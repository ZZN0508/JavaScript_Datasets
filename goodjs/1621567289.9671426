!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return o}),n.d(t,"f",function(){return i}),n.d(t,"e",function(){return r}),n.d(t,"d",function(){return a}),n.d(t,"h",function(){return c}),n.d(t,"i",function(){return l}),n.d(t,"b",function(){return d}),n.d(t,"c",function(){return f}),n.d(t,"g",function(){return h});var o=window||e,i=window?window.navigator:{},r=window?window.location:{},a=window?window.document:{},s=Array.prototype,u=Object.prototype,c=s.slice,l=u.toString,d=(u.hasOwnProperty,s.forEach,s.indexOf,Array.isArray,"https:"===a.location.protocol?"https://":"http://"),f={log:function(){h.showLog&&window.console&&window.console.log.apply(window.console,arguments)},error:function(){h.showLog&&window.console&&window.console.error.apply(window.console,arguments)}},h={imp:!0,hashtag:!1,touch:!1,bot:!0,showLog:!0,dataCollect:!1,pathCaseSensitive:!0,exposure:!1,visualTrack:!1,scheme:d,elementThreshold:50,host:"ma.logsss.com",visualConfigHost:"dap.logsss.com",failReTryTime:3,impCtrlDua:6e4,visual_track_config:[]}}).call(t,n(1))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=/^(\.br\.|\.co\.|\.com\.|\.org\.|\.edu\.|\.net\.)/,r={getItem:function(e){for(var t=e+"=",n=o.d.cookie.split(";"),i=0;i<n.length;i++){for(var r=n[i];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(t))return decodeURIComponent(r.substring(t.length,r.length))}return null},setItem:function(e,t,n,i,r,a){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var s="";if(n){switch(o.i.call(n)){case"[object Number]":var u=(new Date).getTime();s=n===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; expires="+new Date(u+1e3*n).toUTCString();break;case"[object String]":s="; expires="+n;break;case"[object Date]":s="; expires="+n.toUTCString()}r=r?"; domain="+r:"",i=i?"; path="+i:"",a=a?"; secure"+i:"",o.d.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+s+r+i+a}},removeItem:function(e,t,n){var i=!1;return this.hasItem(e)&&(i=!0,o.d.cookie=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(n?"; domain="+n:"")+(t?"; path="+t:"")),i},hasItem:function(e){var t=!1;return e&&(t=new RegExp("(?:^|;\\s*)"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(o.d.cookie||"")),t},keys:function(){var e=o.d.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/);return e.forEach(function(e,t,n){n[t]=decodeURIComponent(e)}),e}},a={getItem:r.getItem,hasItem:r.hasItem,keys:r.keys,setItem:function(e,t,n,o,a,s){if("string"==typeof a)r.setItem(e,t,n,o,a,s);else for(var u=0;u<a.length;u++)if(!i.test(a[u])){r.setItem(e,t,n,o,a[u],s);break}},removeItem:function(e,t,n){if("string"==typeof n)r.removeItem(e,t,n);else for(var o=0;o<n.length;o++)if(!i.test(n[o])){r.removeItem(e,t,n[o]);break}}},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return s(e,null,[{key:"get",value:function(e){try{return o.a.localStorage?this._readFromLocalStorage(e):this._readFromCookie(e)}catch(e){return o.c.log(e),null}}},{key:"set",value:function(e,t,n){n||(n=864e5);try{o.a.localStorage?this._setInLocalStorage(e,t,n):this._setInCookie(e,t,n)}catch(e){o.c.log(e)}}},{key:"removeItem",value:function(e){try{return o.a.localStorage?this.removeInLocalStorage(e):this.removeInCookie(e)}catch(e){return o.c.log(e),null}}},{key:"_readFromLocalStorage",value:function(e){var t=o.a.localStorage.getItem(e);if(t){var n=JSON.parse(t);if(n.expiredAt&&n.expiredAt>=+Date.now())return n.value}return null}},{key:"_readFromCookie",value:function(e){return a.getItem(e)}},{key:"_setInLocalStorage",value:function(e,t,n){var i=JSON.stringify({expiredAt:Date.now()+n,value:t});o.a.localStorage.setItem(e,i)}},{key:"_setInCookie",value:function(e,t,n){a.setItem(e,t,n/1e3,"/",o.a.location.hostname)}},{key:"removeInCookie",value:function(e){a.removeItem(e,"/",o.a.location.hostname)}},{key:"removeInLocalStorage",value:function(e){o.a.localStorage.removeItem(e)}}]),e}();function c(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-axxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)})}o.a.GlobalegrowLocalStore=u;var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function d(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];o.d.addEventListener?e.addEventListener(t,n,i):o.d.attachEvent?(t="on"+t,e.attachEvent(t,function(){var t=o.a.event;t.currentTarget=e,t.target=t.srcElement,n.call(e,t)})):e["on"+t]=n}function f(){var e=function(e){var t=e.length;return t>1&&"/"===e.charAt(t-1)?e.slice(0,t-1):e}(o.e.pathname);if(o.a.gds.hashtag){var t=o.e.hash;-1!==t.indexOf("?")?e+=t.split("?")[0]:e+=t}return o.a.gds&&o.a.gds.pathCaseSensitive?e:e.toLowerCase()}function h(){var e=c(),t=function(){var e=o.a.name?o.a.name:o.a.self.name;if(e&&o.a.nameStorage){var t=e.split(/[:?]/);3===t.length&&"nameStorage"===t[0]&&(e=t[1])}return e}();t&&"grcw"===t&&(t="grcw-inner-iframe"),o.a.grSource={name:t,id:e}}function p(){var e=o.f.userAgent;if(!o.a.ActiveXObject)return!1;var t=e.indexOf("MSIE");if(t>0){var n=e.indexOf(".",t),i=e.substring(t+5,n);return parseInt(i,10)}if(e.indexOf("Trident/")>0){var r=e.indexOf("rv:");return parseInt(e.substring(r+3,e.indexOf(".",r)),10)}var a=e.indexOf("Edge/");return a>0?parseInt(e.substring(a+5,e.indexOf(".",a)),10):void 0}function g(e,t,n){var i,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"GET",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(o.a.XMLHttpRequest){(i=new o.a.XMLHttpRequest).open(r,e,!0),"POST"===r&&i.setRequestHeader("Content-Type","application/json"),i.onreadystatechange=function(){4===i.readyState&&(i.status>=200&&i.status<300||304===i.status?"function"==typeof t&&t(i):"function"==typeof n&&n(i))};var s=v(a);i.send(s)}else if(o.a.XDomainRequest){i=new o.a.XDomainRequest,"http:"===o.e.protocol&&(e=e.replace("https://","http://")),i.open(r,e),"POST"===r&&i.setRequestHeader&&i.setRequestHeader("Content-Type","application/json"),i.onload=function(){"function"==typeof t&&t(i)},i.onerror=function(){"function"==typeof n&&n(i)},i.onprogress=function(){return{}},i.ontimeout=function(){return{}};var u=v(a);i.send(u)}}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="";try{t=JSON.stringify(e)}catch(e){}return t}function m(e,t){for(var n in t)e[n]=t[n];return e}function y(e){return e&&"string"==typeof e&&e.constructor===String}function b(e,t){return null!=Array.prototype.indexOf?e.indexOf(t):(e.forEach(function(e,n,o){if(e===t)return n}),-1)}function w(e){var t="",n=e.childNodes;if(!n)return t;for(var o=0;o<n.length;o++){var i=n[o],r="";3===i.nodeType&&(null!=i.textContent?r=i.textContent.trim():null!=i.data&&(r=i.data.trim()),r.length>0&&(t+=r+" "))}return(t=t.replace(/[\n \t]+/g," ").trim()).length>0&&t.length<50?t:void 0}function k(e,t){return e.hasAttribute?e.hasAttribute(t):!!e[t]}function S(e){var t=e||o.d.referrer,n=o.a.gds;return n&&n.pathCaseSensitive?t:t.toLowerCase()}function _(){var e=o.a.location.search;return e.length>1&&"?"===e.charAt(0)?e=e.slice(1):o.a.gds.hashtag&&o.a.location.hash.indexOf("?")&&(e=o.a.location.hash.split("?")[1]),o.a.gds&&o.a.gds.pathCaseSensitive?e:e.toLowerCase()}function x(){var e="pc",t=window.location.host||window.gds.accountId;return/^([a-z]{1,}-m\.|m-[a-z]{1,}\.|m\.|loginm\.|userm\.|orderm\.|cartm\.)/i.test(t)&&(e="m"),e}function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ubcd",t="-1";try{t=o.d.querySelector("meta[name='GLOBEL:"+e+"']").getAttribute("content")}catch(e){}return t}function O(){return a.getItem("od")}function T(){var e="";try{e=o.d.querySelector("meta[name='GLOBEL:ubci']").getAttribute("content")}catch(t){e=""}return""===e?a.getItem("AKAM_CLIENTID")||"":a.getItem(e)}function C(){return a.hasItem("WEBF-user_id")?a.getItem("WEBF-user_id"):a.hasItem("guid")?a.getItem("guid"):""}function E(){var e=o.a.location.hostname.split(".");return e.length>=3?["."+e.slice(-2).join("."),"."+e.slice(-3).join(".")]:[o.a.location.hostname]}function P(e){var t=a.getItem("gb_pf")||"";if(""!==t)try{t=JSON.parse(t)}catch(e){t={}}else t={};return t[e]||""}function j(e,t){var n=a.getItem("gb_pf")||"";if(""!==n)try{n=JSON.parse(n)}catch(e){n={}}else n={};n[e]=t,a.setItem("gb_pf",JSON.stringify(n),"Session","/",E())}function A(){var e=E(),t=o.d.referrer,n=o.e.href||"";t=t.slice(0,255),n=n.slice(0,255);var i=P("lp"),r=P("rp");if(t){var a=t.split("/");a=a[2]?a[2]:"";for(var s=!1,u=0;u<e.length;u++)if(-1!==a.indexOf(e[u])){s=!0;break}if(!s)return j("lp",n),j("rp",t),{rp:t,lp:n}}return i&&r&&""!==t?{lp:i,rp:r}:(j("rp",t="originalurl"),j("lp",n),{rp:t,lp:n})}var N=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var D=function(){function e(t,n,o,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.launcher=t,this.observer=n,this.sender=o,this.gruser=i,this.send=this.sender.send}return N(e,[{key:"set",value:function(){throw new Error("这是一个接口方法")}},{key:"pageChange",value:function(){this.reset()}},{key:"reset",value:function(){}},{key:"buildMessage",value:function(){}}]),e}();var L=function(e){function t(e,n,o,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,o,i))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,D),t}();var M=function(e){function t(e,n,o,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,o,i))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,D),t}();var R=function(e){function t(e,n,o,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,o,i))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,D),t}();var V=function(e){function t(e,n,o,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,o,i))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,D),t}();var q=function(e){function t(e,n,o,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,o,i))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,D),t}(),B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var U=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.defaultOptions=o.g,this.options=m({},this.defaultOptions),this.started=!1,this.ready=!1,this.tryCount=0,this._setup(),this.identityWindow(),this.commond_stack=[],this.version="2.0.0",this.circleHost=("https:"===o.d.location.protocol?"https://":"http://")+"glsdk.logsss.com",this.endpoint="/events"}return H(e,[{key:"_setup",value:function(){this.app={},this.people={},this.page={},this.evar={},this.system={}}},{key:"pushToStack",value:function(){this.commond_stack.push.apply(this.commond_stack,arguments)}},{key:"setTrackerScheme",value:function(e){if(e&&y(e)){var t=e.toLocaleLowerCase();"http"!==t&&"https"!==t||(this.options.scheme=e+"://")}}},{key:"setZone",value:function(e){e&&"string"==typeof e&&e.trim().length>0&&(this.options.zone=e)}},{key:"setTrackerHost",value:function(e){e&&(this.options.host=e)}},{key:"setAccountId",value:function(e){this.options.accountId=e}},{key:"setImp",value:function(e){this.options.imp=e}},{key:"setSampling",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,t=arguments[1];t||(t=this.defaultSamplingFunc),this.options.sampling=!0,this.options.sampling_ratio=e,this.options.sampling_func=t}},{key:"setImpCtrlDua",value:function(e){this.options.impCtrlDua="number"==typeof e?e:void 0}},{key:"pathCaseSensitive",value:function(e){this.options.pathCaseSensitive=!!e}},{key:"trackBot",value:function(e){this.options.bot=e}},{key:"enableHT",value:function(e){this.options.hashtag=e}},{key:"enableTouch",value:function(e){this.options.touch=e}},{key:"enableExposure",value:function(e){window.gds.exposure=e,this.options.exposure=e}},{key:"enableVisualTrack",value:function(e){window.gds.visualTrack=e,this.options.visualTrack=e}},{key:"dataCollect",value:function(e){this.options.dataCollect=e}},{key:"defaultSamplingFunc",value:function(){throw new Error("这是一个接口方法")}},{key:"setUserId",value:function(e){e&&e.length<=1e3&&this.people&&this.people.setId(""+e)}},{key:"clearUserId",value:function(){this.people&&this.people.clearUserId()}},{key:"setPageGroup",value:function(e){this.page.setName(e)}},{key:"track",value:function(){this.system.track.apply(this.system,arguments)}},{key:"setAppId",value:function(e){e&&(this.options.appId=e)}},{key:"getVisitUserId",value:function(){return this.user.vid()}},{key:"addRealTimeMessageCallBack",value:function(e,t){this.sender.addRealTimeMessageCallBack(e,t)}},{key:"config",value:function(e){var t={imp:"setImp",hashtag:"enableHT",touch:"enableTouch",bot:"trackBot",dataCollect:"dataCollect",pathCaseSensitive:"pathCaseSensitive",scheme:"setTrackerScheme",host:"setTrackerHost",sampling:"setSampling",zone:"setZone",origin:"setOrigin",impCtrlDua:"setImpCtrlDua",exposure:"enableExposure",visualTrack:"enableVisualTrack"};for(var n in e){var i=e[n];n in t&&(n=t[n]),"object"===(void 0===i?"undefined":B(i))?this.apply.apply(this,[n].concat(o.h.call(i))):this.apply(n,i)}var r=[];for(var a in this.options)o.a.gds[a]=this.options[a],r.push(o.a.gds[a]);return r}},{key:"init",value:function(e,t,n){var i,r=["app","people","page","evar","system"];if(e&&y(e)&&0!==e.trim().length){this.setAccountId(e),y(t)&&null!==t.trim()?this.setAppId(t):(i=t)&&"object"==(void 0===i?"undefined":l(i))&&i.constructor===Object&&(n=t),o.a.gds={origin:this.circleHost,version:this.version},this.config(n);for(var a=0;a<r.length;a++){var s=r[a];this[s]=this.initDimensions(s)}this.afterInitialize(),this.ready=!0}}},{key:"afterInitialize",value:function(){throw new Error("这是一个接口方法")}},{key:"apply",value:function(){var e=arguments[0],t=arguments.length>=2?o.h.call(arguments,1):[];if(y(e))try{if(-1===e.indexOf(".")){if(this[e])return this[e].apply(this,t);throw new Error("没有找到 "+e+" 方法")}var n=e.split(".");if(this[n[0]]&&n[0][n[1]])return this[n[0]][n[1]].apply(this.arg[0],t);throw new Error("没有找到 "+e+" 方法")}catch(e){console.log("err:",e)}}},{key:"setOrigin",value:function(e){e&&(this.options.origin=e)}},{key:"set",value:function(e,t){this.options[e]=t}},{key:"setGioIdByTouch",value:function(){return!1}},{key:"getVisualTarckConfig",value:function(){var e={domain:this.options.scheme+o.a.location.host,page:f()};this.options.visualTrack&&this.options.scheme&&this.options.visualConfigHost&&g(this.options.scheme+this.options.visualConfigHost+"/datav/pick/search",this.getVisualTarckConfigSuccessCallback(),this.getVisualTarckConfigFailCallback(),"POST",e)}},{key:"getVisualTarckConfigSuccessCallback",value:function(){var e=this;return function(t){var n;if(200===t.status&&t.response)try{0===(n=JSON.parse(t.response)).code&&(e.tryCount=0,o.a.gds.visual_track_config.data=n.data,o.a.gds.visual_track_config.domain=n.domain,o.a.gds.visual_track_config.page=n.page)}catch(e){}}}},{key:"getVisualTarckConfigFailCallback",value:function(){var e=this;return function(t){if(e.tryCount>=e.options.failReTryTime)return!1;console.log(t),e.tryCount++,e.getVisualTarckConfig()}}},{key:"send",value:function(){if(!this.started)try{this.ready&&this.verify()&&this.connect()}catch(e){console.log(e)}finally{this.started=!0;for(var e=this.commond_stack,t=0;t<e.length;t++){var n=e[t];this.apply.apply(this,n)}}}},{key:"verify",value:function(){return!!o.a._gds_hybrid||-1===b(["","localhost","127.0.0.1"],o.a.location.hostname)}},{key:"initSystemConfig",value:function(e){for(var t=[],n=0;n<e.length;n++){var o=e[n];t.push(this.apply.apply(this,o))}return t}},{key:"identityWindow",value:function(){return h()}},{key:"beforeConnect",value:function(){throw new Error("这是一个接口方法")}},{key:"connect",value:function(){if(o.a.navigator.userAgent.toLowerCase().match(/(bot|crawler|spider|scrapy|jiankongbao|slurp|transcoder|networkbench|oneapm)/i)){if(!this.options.bot)return!1;o.a.gds.imp=!1,this.options.isBot=!0}this.beforeConnect(),this.getVisualTarckConfig(),this.sender.connect({isBot:!!this.options.isBot})}},{key:"callback",value:function(){var e=this;return function(){return e.observer.observe()}}},{key:"initDimensions",value:function(e){switch(e){case"people":return new L(this,this.observer,this.sender,this.user);case"app":return new M(this,this.observer,this.sender,this.user);case"page":return new R(this,this.observer,this.sender,this.user);case"evar":return new V(this,this.observer,this.sender,this.user);case"system":return new q(this,this.observer,this.sender,this.user)}}}]),e}();var G=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.userId=null,this.sessionId="",this.lastSessionId="",this.cookie=a,this.guid=c,this.cookieDomain(),this.isHybrid=!1},X=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var J=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.duration10year=31536e4,e.duration30min=1800,e.duration15min=900,e.duration1min=60,e.grcookieDomain="",e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,G),X(t,[{key:"cookieDomain",value:function(){if(!this.grcookieDomain){var e=o.a.location.hostname.split(".");e.length>=3?this.grcookieDomain=["."+e.slice(-2).join("."),"."+e.slice(-3).join(".")]:this.grcookieDomain=[o.a.location.hostname]}return this.grcookieDomain}},{key:"vid",value:function(){return this.userId?this.userId:(this.userId=this.cookie.getItem("globalegrow_user_id"),this.userId?this.cookie.setItem("globalegrow_user_id",this.userId,this.duration10year,"/",this.cookieDomain()):(this.userId=this.guid(),this.cookie.setItem("globalegrow_user_id",this.userId,this.duration10year,"/",this.cookieDomain())),this.userId)}},{key:"hasSid",value:function(){var e=Date.now();if(this.sessionId&&this.lastUpdated&&e-this.lastUpdated<1e3*this.duration30min)return!0;var t=this.currentSessionId(),n=t[0],o=t[1];return n&&(!this.lastSessionId||o===this.lastSessionId)}},{key:"sid",value:function(){var e=this.currentSessionId();this.sessionId=e[0];var t=e[1],n=Date.now();return this.sessionId&&this.lastUpdated&&n-this.lastUpdated<this.duration1min?this.sessionId:(this.sessionId||(this.sessionId=this.guid(),t=!1),this.updateSessionId(this.sessionId,t),this.sessionId)}},{key:"getCs1",value:function(){return this.cookie.getItem(window.gds.accountId+"_gr_cs1")}},{key:"last_sent_sid_with_cs1",value:function(){return this.cookie.getItem(window.gds.accountId+"_gr_last_sent_sid_with_cs1")}},{key:"last_sent_cs1",value:function(){return this.cookie.getItem(window.gds.accountId+"_gr_last_sent_cs1")}},{key:"currentSessionId",value:function(e){e||(e=o.a.gds.accountId);var t=this.cookie.getItem(e+"_globalegrow_session_id")||"",n="true"===this.cookie.getItem(e+"_globalegrow_session_id_"+t);if(t&&t.indexOf("_")>=0){var i=t.split("_");t=i[0],n="true"===(n=i[1]),this.updateSessionId(t,n)}return t&&"null"===t&&(t="",n=!1),[t,n]}},{key:"updateSessionId",value:function(e,t,n){e?(n||(n=o.a.gds.accountId),this.lastUpdated=Date.now(),this.lastSessionId=e,this.updateSessionIdSendStatus(e,t,n),this.cookie.setItem(n+"_globalegrow_session_id",e,this.duration30min,"/",this.cookieDomain())):(console.log("sid 不能为空"),this.sessionId=this.guid(),this.updateSessionId(this.sessionId,t,n))}},{key:"updateSessionIdSendStatus",value:function(e,t,n){null==n&&(n=o.a.gds.accountId);for(var i=this.cookie.keys(),r=0;r<i.length;r++){var a=i[r];if(a.match(/.*_globalegrow_session_id_/)&&a.slice(a.lastIndexOf("_")+1)!==t){this.cookie.removeItem(a,"/",this.cookieDomain());break}}return this.cookie.setItem(n+"_globalegrow_session_id_"+e,t,this.duration30min,"/",this.cookieDomain())}},{key:"isSendNewVisit",value:function(){var e=!1;return null==this.cookie.getItem("globalegrow_user_id")&&(e=!0),e}},{key:"getSidSendSuccess",value:function(e){return e||(e=o.a.gds.accountId),!0===this.currentSessionId(e)[1]}},{key:"setGioId",value:function(e){e&&this.cookie.setItem("globalegrow_user_id",e,this.duration10year,"/",this.cookieDomain())}},{key:"resetUserId",value:function(){this.userId&&this.cookie.setItem("globalegrow_user_id",this.userId,this.duration10year,"/",this.cookieDomain())}}]),t}(),F=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();p();var z=/(^| )(clear|clearfix|active|hover|enabled|hidden|display|focus|disabled|ng-|chook-)[^\. ]*/g,Q=function(){function e(t){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.node=t,this.name=t.tagName.toLowerCase(),k(t,"id")&&null===t.getAttribute("id").match(/^[0-9]/)&&(this.id=t.getAttribute("id")),this.isIgnore=k(t,"chook-ignore")||k(t,"data-chook-ignore"),k(t,"href")){var o=t.getAttribute("href");o&&o.indexOf("javascript")&&(this.href=o.slice(0,320))}k(t,"data-chook-info")&&(this.grObj=t.getAttribute("data-chook-info")),k(t,"data-chook-idx")&&(this.grIdx=parseInt(t.getAttribute("data-chook-idx")));var i=function(e){return(p()||NaN)<8?e.className:e.getAttribute("class")}(t);(n=i?i.replace(z,"").trim():"").length>0&&(this.klass=n.split(/\s+/).sort())}return F(e,[{key:"path",value:function(){var e="";e="/"+this.name;(this.id&&/^[\w|-]+$/.test(this.id)&&(e+="#"+this.id),this.klass)&&this.klass.forEach(function(t){e+="."+t});return e}},{key:"hasObj",value:function(){return null!=this.grObj}},{key:"hasIdx",value:function(){return null!=this.grIdx}},{key:"isContainer",value:function(){return k(this.node,"data-chook-container")}}]),e}(),W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var K=["TR","LI","DL"],Y=["A","BUTTON"],Z=["I","SPAN","EM","svg"],ee=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return $(e,[{key:"path",value:function(e){var t,n,i,r,a,s,u=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c="",l={},d=[],f=!1,h=0,p=[],g=!1,v=!1;if(e===o.d)return{isIgnore:!0};for(t=new Q(e);"html"!==t.name&&"body"!==t.name&&e&&e.tagName;)l={x:t.path()||"",h:t.href||"",v:this.containerElemContent(t.node)||"",attr:[]},p.push(l.x),t.isIgnore&&(f=!0),!g&&t.hasObj()&&(g=!0,n=t.grObj),v||(t.hasIdx()?(v=!0,i=t.grIdx):(a=t.path(),-1===a.indexOf("/li")&&-1===a.indexOf("/dl")&&-1===a.indexOf("/tr")||(v=!0,i=this.index(t.node)))),u&&""!==c&&(-1!==b(Y,t.node.tagName)||t.isContainer())&&(g?l.obj=n:k(t.node.parentNode,"data-chook-info")&&(l.obj=t.node.parentNode.getAttribute("data-chook-info")),l.x=h,d.push(l)),c=t.path()+c,h++,e=t.node.parentNode,t=new Q(e),1===h&&(r=t.node);p.reverse();for(var m=0;m<d.length;m++)(s=d[m]).x=p.slice(0,h-s.x).join(""),s.idx=0,v&&(s.idx=i),g&&(s.obj=n);var y={xpath:c,containerMessage:d,isIgnore:f};return g&&(y.obj=n),v&&(y.idx=i),r&&(y.pnode=r),y}},{key:"index",value:function(e){for(var t,n,o=e;o&&"BODY"!==o&&-1===b(K,o.tagName);)o=o.parentNode;if(o){t=1,n=o.parentNode.childNodes;for(var i=0;i<n.length;i++){var r=n[i];if(r.tagName===o.tagName){if(k(r,"data-chook-idx")&&(t=parseInt(r.getAttribute("data-chook-idx"))),r===o)return t;t++}}}}},{key:"isLeaf",value:function(e){var t;if(e.hasChildNodes()&&"svg"!==e.tagName){t=e.childNodes;for(var n=0;n<t.length;n++)if(1===t[n].nodeType)return!1}return!0}},{key:"isParentOfLeaf",value:function(e){if(!e.childNodes)return!1;if("svg"===e.tagName)return!1;for(var t=e.childNodes,n=0;n<t.length;n++)if(!this.isLeaf(t[n]))return!1;return!0}},{key:"depthInside",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(e.hasChildNodes()){if(t<n)return!1;for(var o=e.childNodes,i=0;i<o.length;i++){var r=o[i];if(1===r.nodeType&&!this.depthInside(r,t,n+1))return!1}}return t>=n}},{key:"onlyContainsChildren",value:function(e,t){if(0===!e.children.length)return!1;for(var n=e.children,o=0;o<n.length;o++){if(-1===b(t,n[o].tagName))return!1}return!0}},{key:"containerElemContent",value:function(e){var t;if(k(e,"data-chook-title")&&e.getAttribute("data-chook-title").length>0)return e.getAttribute("data-chook-title");if(k(e,"title")&&e.title.length>0)return e.getAttribute("title");if("BUTTON"===e.tagName){if(e.name.length>0)return e.name;if(this.onlyContainsChildren(e,Z)&&null!=e.textContent&&(t=e.textContent.replace(/[\n \t]+/g," ").trim()).length>0&&t.length<50)return t}else if("A"===e.tagName){if(this.onlyContainsChildren(e,Z)&&null!=e.textContent){if((t=e.textContent.replace(/[\n \t]+/g," ").trim()).length>0)return t<=50?t:t.slice(0,50)}else if(k(e,"href")&&e.getAttribute("href").length>0)return e.getAttribute("href")}else if("LABEL"===e.tagName&&null!=e.textContent&&(t=e.textContent.replace(/[\n \t]+/g," ").trim()).length>0&&t.length<50)return t}},{key:"isDOM",value:function(e){return"HTMLElement"in o.a?e&&e instanceof HTMLElement:!(!e||"object"!=(void 0===e?"undefined":W(e))||1!==e.nodeType||!e.nodeName)}}]),e}(),te=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var ne=new(function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,ee),te(t,[{key:"user",value:function(){return new J}}]),t}()),oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ie=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var re=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sendVisitTimeout=0,this.user=t,this.callback=n,this.isBot=!1,this.IEVersion=p(),this.typeListReceivedValid=[],this.XDomainRequestArray=[],this.XMLHttpRequestArray=[],this.xhrData=[],this.isbuffer=!0}return ie(e,[{key:"setUrlMap",value:function(e){this.urlMap=this.getUrlMap(e)}},{key:"getUrlMap",value:function(e){var t="";return{pv:t=e.zone&&"api.growingio.com"===e.host?e.scheme+"api-"+e.zone+".growingio.com":e.scheme+e.host,action:t,cstm:t,pvar:t,ppl:t,evar:t,gif:o.b+"s.logsss.com/_ubc.gif"}}},{key:"connect",value:function(e){this.isBot=e.isBot,"function"==typeof this.callback&&this.callback(this.user,this.send)}},{key:"send",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"action";if(!window.gds.dataCollect&&!window.grBlind)try{if(t="pv"===n&&2===e.length?e[0].s:"",o.a.XMLHttpRequest&&!this.isBot&&"gif"!==n&&(this.xhrData=e.concat(this.xhrData).slice(0,50),e=this.xhrData.splice(0,10)),this.sendRemote(JSON.stringify(e),n,t),this.typeListReceivedValid.length>=0&&this.setRealTimeMessageCallBack){for(var i=[],r=0;r<e.length;r++){var a,s=e[r],u=s.t;[].indexOf.call(this.typeListReceivedValid,u)>=0&&(a=this.setRealTimeMessageCallBack(s)),i.push(a)}return i}}catch(e){o.c.log(e)}}},{key:"sendRemote",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=this.urlMap[t];if(o.a.grWaitTime=Date.now()+1e3,""!==i&&(this.sendVisitTimeout+=1e3),o.a.XMLHttpRequest&&!this.isBot&&"gif"!==t){var a=new o.a.XMLHttpRequest;if("withCredentials"in a)return a.open("POST",r+"?stm="+Date.now(),!0),a.onreadystatechange=function(){if(4===a.readyState)if(""!==i&&(n.sendVisitTimeout-=1e3),n.removeAjax(a),o.a.grWaitTime=Date.now()+10,200===a.status)i&&""!==i&&n.user.updateSessionIdSendStatus(i,!0);else try{n.xhrData=JSON.parse(e).concat(n.xhrData)}catch(e){o.c.log(e)}},a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),"undefined"==typeof ArrayBuffer||null===ArrayBuffer||this.isbuffer?a.send(e):a.send(e.buffer),void this.XMLHttpRequestArray.push(a)}if(void 0!==o.a.XDomainRequest&&!this.isBot&&"gif"!==t){var s=new o.a.XDomainRequest;return r="http:"===document.location.protocol?r.replace("https://","http://"):r,s.open("POST",r+"?stm="+Date.now()),s.onload=function(){n.removeXDR(s,i),n.xhrData.splice(0,10),""!==i&&n.user.updateSessionIdSendStatus(!0,i)},s.onerror=function(){n.removeXDR(s,i)},s.onprogress=function(){},s.ontimeout=function(){},s.send(e),void this.XDomainRequestArray.push(s)}r="http:"===document.location.protocol?r.replace("https://","http://"):r;var u="";if("gif"===t)try{var c=JSON.parse(e);for(var l in c)"object"===oe(c[l])&&(c[l]=JSON.stringify(c[l])),u+="&"+encodeURIComponent(l)+"="+encodeURIComponent(c[l]);u=r+(u=u.replace("&","?"))+"&stm="+ +Date.now()}catch(e){o.c.log(e)}else u=r+"?data="+e+"&stm="+ +Date.now();u.length<=2036&&this.imgSend(u,i)}},{key:"removeAjax",value:function(e){var t=this.XMLHttpRequestArray.indexOf(e);-1!==t&&this.XMLHttpRequestArray.splice(t,1)}},{key:"removeXDR",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.XDomainRequestArray.indexOf(e);-1!==n&&this.XDomainRequestArray.splice(n,1),o.a.grWaitTime=Date.now()+10,""!==t&&(this.sendVisitTimeout-=300)}},{key:"imgSend",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=document.createElement("img");o.width=1,o.height=1,o.onload=function(){e.imgSendClear(o,n),""!==n&&e.user.updateSessionIdSendStatus(!0,n)},o.onerror=o.onabort=function(){e.imgSendClear(o,n)},o.src=t,this.XDomainRequestArray.push(o)}},{key:"imgSendClear",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e.onload=null,e.onerror=null,e.onabort=null,this.removeXDR(e,t)}}]),e}(),ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},se=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var ue=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sender=t,this.gruser=n,this.launcher=o,this.properties={},this.messages=[],this.defaultOptions={sendVisit:!0,addPreProps:!1,useNewTime:!0,gioId:!1}}return se(e,[{key:"replaceProps",value:function(e){e&&(this.properties=e)}},{key:"reduceProps",value:function(e){if(e){var t=[];for(var n in e)this.properties[n]=e[n],t.push(e[n]);return t}}},{key:"sendPV",value:function(e,t){var n,o=this;if(t||(t=function(){return{}}),this.sender.sendVisitTimeout&&this.sender.sendVisitTimeout>0)setTimeout(function(){return o.sendPV(e,t)},this.sender.sendVisitTimeout);else{if(this.messages=[],this.options=this.defaultOptions,e)for(var i in e)this.options[i]=e[i];if(this.options.addPreProps||this.options.gioId)for(var r in this.preProperties)(n=this.properties)[r]||(n[r]=this.preProperties[r]);this.options.useNewTime&&(this.pageLoaded=Date.now()),this.pageLoaded&&(this.pageLoaded=Date.now()),(this.options.gioId||this.options.sendVisit&&this.gruser.isSendNewVisit())&&this.messages.push(this._buildVisitMessage()),this.options.gioId||this.messages.push(this._buildPageMessage());var a=window.name,s=void 0;if(""!==a)try{var u=JSON.parse(a);s=u.bigdata,delete u.bigdata;var c=JSON.stringify(u);window.name="{}"===c?"":c}catch(e){if(-1!==a.indexOf("#########globalegrow-bigdata##########")){var l=a.split("#########globalegrow-bigdata##########"),d=l.splice(1,1);if(window.name=l.join("#########globalegrow-bigdata##########"),d.length>0)try{d=d[0],s=JSON.parse(d)}catch(e){}}}s&&"object"===(void 0===s?"undefined":ae(s))&&this.messages.push(s);var f=GlobalegrowLocalStore._readFromLocalStorage("globalegrow_bigdata");f&&(this.messages.push(JSON.parse(f)),GlobalegrowLocalStore.removeInLocalStorage("globalegrow_bigdata")),this.sender.send(this.messages,"pv"),this.sender.send(this._buildPageMessage(),"gif"),this.preProperties=this.properties,this.properties={},this.options.gioId&&(this.options.gioId=!1),t(this)}}},{key:"setPageGroup",value:function(e,t){var n=this;if(!e)return!1;this.reduceProps({pg:e}),this.pageLoaded&&Date.now()-this.pageLoaded<4e3&&this.launcher.started&&setTimeout(function(){n.sendPV({sendVisit:!1,addPreProps:!0,useNewTime:!1},t)})}},{key:"setDeferSendWithPage",value:function(e,t,n){if(t)return!1;e&&(this.reduceProps(e),t(this)&&this.sendPV({addPreProps:!0,useNewTime:!1},n))}},{key:"_buildPageMessage",value:function(){var e,t,n,o=A(),i={et:"page",ak:window.gds.accountId,av:window.gds.version,dt:x()||"pc",vid:this.gruser.vid(),sid:this.gruser.sid(),oi:T(),uid:C(),cid:O()||this.gruser.vid(),sh:window.screen.height,sw:window.screen.width,ti:document.title.slice(0,255),tm:this.pageLoaded,lp:o.lp||"",rp:o.rp||"",wt:(e=(new Date).getTime(),t=P("wt")||e,n=(new Date).getTime()-t,j("wt",e),n||0),ptm:0,pt:window.location.protocol.substring(0,window.location.protocol.length-1),d:window.location.host||window.gds.accountId,p:f(),l:null!=navigator.language?navigator.language.toLowerCase():void 0,rf:S(),dc:I(),cc:I("dc")},r=_();if(i.q=r.length>0?r:"",i.e=[{x:"",v:"",h:"",idx:0,attr:[]}],i.appId=window.gds.appId,this.properties)for(var a in this.properties)i[a]=this.properties[a];return i}},{key:"_buildVisitMessage",value:function(){var e=A(),t={et:"visit",ak:window.gds.accountId,av:window.gds.version,sh:window.screen.height,sw:window.screen.width,dt:x()||"pc",vid:this.gruser.vid(),sid:this.gruser.sid(),oi:T(),uid:C(),cid:O()||this.gruser.vid(),lp:e.lp||"",rp:e.rp||"",wt:0,tm:Date.now(),ptm:0,d:window.location.host||window.gds.accountId,p:f(),rf:S(),l:null!=navigator.language?navigator.language.toLowerCase():void 0,pt:window.location.protocol.substring(0,window.location.protocol.length-1),isfirst:"Y",dc:I(),cc:I("dc")},n=_();return t.q=n.length>0?n:"",t.e=[{x:"",v:"",h:"",idx:0,attr:[]}],t.appId=window.gds.appId,t}},{key:"sendPVOnSidChanged",value:function(){var e=this.gruser.currentSessionId()[0];this.gruser.lastSessionId!==e&&(e||(e=this.gruser.guid(),this.gruser.resetUserId()),this.gruser.updateSessionId(e,!1),this.sendPV({sendVisit:!0,useNewTime:!0}))}}]),e}(),ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},le=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var de="/static/glsdk_plugins.js",fe=["view-model","heatmap-model","load-heatmap","vtrack-model","vtrack-view-model","vtrack-close-model","vtrack-pick-model"],he=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.allowOrigin=window.gds.origin,this.bindEvents(),this.glsdkPluginsLoaded=!1,this.loadGlsdkPlugins()}return le(e,[{key:"bindEvents",value:function(){var e=this;d(window,"message",function(t){var n=t.data,o=n.model||n.heatmapModel;if(n.ai===window.gds.accountId&&e.isSdkEvent(o))switch(o){case"view-model":e.drawHeatmap("stop",n);break;case"heatmap-model":e.drawHeatmap("start",n);break;case"vtrack-model":e.initVtrack("start",n);break;case"vtrack-view-model":e.initVtrack("stop");break;case"vtrack-close-model":e.removeSelectedEle();break;case"vtrack-pick-model":e.initPickRule()}}),d(window,"beforeunload",function(t){var n;e.canPostRegisterMessage()&&(n={circleMode:"page-unload",url:o.a.location.toString(),ak:o.a.gds.accountId,sna:o.a.grSource.name,sid:o.a.grSource.id,dc:I(),cc:I("dc"),tna:"",fsna:"sdk",tArr:[o.a.grSource.id]},o.a.parent.postMessage(n,"*"))})}},{key:"isSdkEvent",value:function(e){return-1!==b(fe,e)}},{key:"loadHeatmap",value:function(){this.heatmapLoaded=!1;for(var e=document.getElementsByTagName("script"),t=0;t<e.length;t++){var n=e[t].getAttribute("src");if(null!=n&&-1!==n.indexOf(de)){this.heatmapLoaded=!0;break}}if(!this.heatmapLoaded){var o=document.createElement("script");o.type="text/javascript",o.charset="UTF-8",o.src=this.allowOrigin+de,document.head.appendChild(o)}}},{key:"loadGlsdkPlugins",value:function(){this.glsdkPluginsLoaded=!1;for(var e=document.getElementsByTagName("script"),t=0;t<e.length;t++){var n=e[t].getAttribute("src");if(null!=n&&-1!==n.indexOf(de)){this.glsdkPluginsLoaded=!0;break}}if(!this.glsdkPluginsLoaded){var o=document.createElement("script");o.type="text/javascript",o.charset="UTF-8",o.src=this.allowOrigin+de,document.head.appendChild(o)}}},{key:"drawHeatmap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.glsdkPluginsLoaded||this.loadGlsdkPlugins(),this.glsdkPluginsLoaded&&"object"===ce(o.a.glsdkmap)&&null!==o.a.glsdkmap)try{if(o.a.glsdkmap.destroyHeatmap(),"start"===e)t.data.forEach(function(e){o.a.glsdkmap.parseNode(e)}),o.a.glsdkmap.loadHeatmap()}catch(e){console.log(e)}}},{key:"sendPageLoad",value:function(e){var t={};this.canPostRegisterMessage()&&(t={circleMode:"page-load",url:o.a.location.toString(),ak:o.a.gds.accountId,sna:o.a.grSource.name,sid:o.a.grSource.id,dc:I(),cc:I("dc"),tna:"",fsna:"sdk",tArr:[o.a.grSource.id]},o.a.parent.postMessage(t,"*"))}},{key:"canPostRegisterMessage",value:function(){return o.a.parent&&"function"==typeof o.a.parent.postMessage&&o.a.self!==o.a.top&&o.a.self!==o.a.parent}},{key:"initVtrack",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.glsdkPluginsLoaded||this.loadGlsdkPlugins(),this.glsdkPluginsLoaded&&"object"===ce(o.a.glsdkvtrack)&&null!==o.a.glsdkvtrack&&(o.a.glsdkvtrack.destroyVtrak(),"start"===e))try{var n=t.data;o.a.glsdkvtrack.initVtrack(n)}catch(e){console.log(e)}}},{key:"removeSelectedEle",value:function(){o.a.glsdkvtrack.removeCoveredEle()}},{key:"initPickRule",value:function(){o.a.glsdkvtrack.initPickRuleMode()}}]),e}(),pe=("https:"===document.location.protocol?"https://":"http://")+"dap.logsss.com/heatmap/subcribe",ge="www.gearbest.com",ve="/",me="https://uidesign.gbtcdn.com/GB/image/promotion/20181206_6427/680x312a.jpg?imbypass=true";function ye(){}function be(){}var we=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var ke=[".js_lazyimg",".js_gbexp_lazy",".js_lazy",".js_lazySliderImg",".js_gdexp_lazy",".js-lazyload",".js-buyerShowImgLazyLoad",".js_load_ingimg"];var Se=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=[],this.timer=null,this.sender=t}return we(e,[{key:"add",value:function(e){this.options.push(e)}},{key:"cleanAll",value:function(){this.options=[]}},{key:"start",value:function(){var e=this;this.timer=setTimeout(function(){var t=[];if(e.options.length>0){e.options.forEach(function(e){t=t.concat(e.e)});var n=e.options.length;e.options[n-1].e=t,e.sender.send([e.options[n-1]]),e.cleanAll()}e.start()},500)}},{key:"executeImmediately",value:function(){this.sender.send(this.options),this.stop()}},{key:"stop",value:function(){this.timer=null,this.options=[]}}]),e}(),_e=n(3),xe=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var Ie=["zaful","rosegal","dresslily","gearbest","rosewholesale"],Oe=["TEXTAREA","HTML","BODY"],Te=["button","submit"],Ce=["A","BUTTON","INPUT","IMG"],Ee=["I","SPAN","EM","svg"],Pe=["radio","checkbox"],je=["A","BUTTON"],Ae=null,Ne=[],De=3,Le=null,Me={},Re=0,Ve=!1,qe={tspan:1,text:1,g:1,rect:1,path:1,defs:1,clipPath:1,desc:1,title:1},Be=function(){function e(t,n,o,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sender=t,this.gruser=n,this.launcher=o,this.TreeMirror=i,this.content={},this.messagingObserver=null,this.pageService=new ue(this.sender,this.gruser,this.launcher),this.imgExposure=new Se(this.sender),this.timer=null,this.currentData=null}return xe(e,[{key:"sendPageCallback",value:function(){var e=this;return function(t){e.pageLoaded=t.pageLoaded,e.prevPageAttrs=m({},t.preProperties),e.lastActionTime=Date.now()}}},{key:"setPageGroup",value:function(e){var t=this;return this.pageService.setPageGroup(e,function(n){t.sendPageCallback()(n),t.messagingObserver&&t.messagingObserver.sendPageCallback({pg:e})})}},{key:"setDeferSendWithPage",value:function(e,t){t&&this.pageService.setDeferSendWithPage(e,t,this.sendPageCallback())}},{key:"setPSForActionMessage",value:function(e){this.prevPageAttrs.pg&&(e.pg=this.prevPageAttrs.pg)}},{key:"registerDomObserver",value:function(){var e=this;if(o.a.gds.imp){Ae&&Ae.disconnect();var t={initialize:function(t){var n=[],i={u:e.gruser.vid(),s:e.gruser.sid(),t:"imp",tm:Date.now(),ptm:e.pageLoaded,d:o.a.location.host||o.a.gds.accountId,p:e.currentPath};e.currentQuery.length>0&&(i.q=e.currentQuery);var r=e.gruser.getCs1();r&&(i.cs1=r),e.setPSForActionMessage(i),t.forEach(function(o){"use"!==o.tagName&&(n=n.concat(e.getLeafNodes(o,t.length)))}),i.e=n,e.sender.send([i])},applyChanged:function(t){var n,i,r=[];t.length>0&&!document.body.className.match(/\bgds-entrytext\b/)&&(e.gruser.hasSid()||e.pageService.sendPV({sendVisit:!1,addPreProps:!0,useNewTime:!1},e.sendPageCallback()),i={u:e.gruser.vid(),s:e.gruser.sid(),t:Ae.snapshoting?"snap":"imp",tm:Date.now(),ptm:e.pageLoaded,d:o.a.location.host||o.a.gds.accountId,p:e.currentPath},(n=e.gruser.getCs1())&&(i.cs1=n),e.currentQuery.length>0&&(i.q=e.currentQuery),e.setPSForActionMessage(i),t.forEach(function(n){"use"!==n.tagName&&(r=r.concat(e.getLeafNodes(n,t.length)))}),i.e=r,r.length>0&&e.sendPolicy(i))}};this.TreeMirror&&(this.client=Ae=new this.TreeMirror.client(document.body,t))}}},{key:"sendPolicy",value:function(e){var t=this;Ne.push(e),De<0?this.sendQueue():(this.queueTimeout&&clearTimeout(this.queueTimeout),this.queueTimeout=setTimeout(function(){t.sendQueue()},3e3),this.checkingBlance())}},{key:"deregisterDomObserver",value:function(){Ae&&Ae.disconnect()}},{key:"idle",value:function(){if(this.lastSentTime=this.lastSentTime||Date.now(),this.lastSentTime)return(Date.now()-this.lastSentTime)/Ne.length>300}},{key:"checkingBlance",value:function(){return this.idle()?De--:void 0}},{key:"sendQueue",value:function(){Ne.length>0&&Date.now()-this.lastActionTime<12e4&&this.sender.send(Ne),this.queueTimeout=null,this.lastSentTime=Date.now(),Ne=[],De=3}},{key:"getLeafNodes",value:function(e,t){var n,o,i=this,r=[],a=!0;if(e.leaf&&1===e.nodeType){null==((o=e.attributes)?o.href:void 0)&&null==e.text&&null==e.obj||(n=this.nodeMessage(e,!0),t>1&&(n.idx=e.idx),r.push(n))}else{if(0===e.childNodes.length&&-1!==b(Ce,e.tagName))return!1;var s=e.childNodes;Array.prototype.forEach.call(s,function(e,t,n){e.leaf||(a=!1),"use"!==e.tagName&&(r=r.concat(i.getLeafNodes(e,n.childNodes.length)))});var u=(o=e.attributes)?o.any:void 0;if(-1!==b(je,e.tagName)||a&&(u||e.text)){if(!e.text){var c=e.dom;e.text=c?this.info.containerElemContent(c):w(e)}n=this.nodeMessage(e,!0),r.push(n)}"SPAN"===e.tagName&&(s=e.childNodes,Array.prototype.forEach.call(s,function(t,o,a){if("svg"===t.tagName){var s=t.childNodes;Array.prototype.forEach.call(s,function(t){1===t.nodeType&&"use"===t.tagName&&k(t,"xlink:href")&&(n=i.nodeMessage(e,!0),r.push(n))})}}))}return r}},{key:"nodeMessage",value:function(e){var t={x:e.path,v:e.text};"A"===e.tagName&&e.text&&0===e.text.length&&(t.v=void 0),e.text&&e.text.length>50&&(t.v="A"===e.tagName?e.text.slice(0,50):void 0),e.attributes&&e.attributes.href&&0!==e.attributes.href.indexOf("javascript")&&(t.h=e.attributes.href.slice(0,320),delete e.attributes.href),e.idx&&(t.idx=e.idx),e.obj&&(t.obj=e.obj),this.appendMessageAttrs(Ae,t,e)}},{key:"appendEventAttrs",value:function(){throw new Error("这是一个接口方法")}},{key:"appendMessageAttrs",value:function(){throw new Error("这是一个接口方法")}},{key:"registerEventListener",value:function(){var e={click:"click",change:"change",submit:"submit",snapshot:"snapshot",load:"exposure"},t=this,n=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!0):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},i=function(e){e.which>1||Le===Date.now()||(Le=Date.now(),Me={time:Le,target:e.target||e.srcElement,x:s("x",e),y:s("y",e)},Re=setTimeout(function(){e={target:Me.target,type:"click"},u(e)},600))},r=function(e){var t=Math.abs(s("x",e)-Me.x),n=Math.abs(s("y",e)-Me.y);(t>10||n)&&clearTimeout(Re)},a=function(e){Date.now()-Me.time<1e3&&clearTimeout(Re)},s=function(e,t){return(Ve?t.touches[0]:t)["page"+e.toUpperCase()]},u=function(n){var i,r;if(!document.body.className.match(/\bgds-entrytext\b/)){for(t.lastActionTime=Date.now(),i=n.target||n.srcElement;i&&qe[i.tagName]&&i.parentNode;)i=i.parentNode;if((r=t.info.path(i,!0)).isIgnore)return!1;o.a.gds.impCtrlDua&&(o.a.grImpCtrl=Date.now());var a=i.tagName;if("click"===n.type){if(-1!==b(Oe,a))return;if("INPUT"===a&&-1!==b(Te,i.type))return;if(-1===b(Ce,a)&&!t.info.depthInside(i,4))return}t.gruser.hasSid()?"click"===n.type&&t.pageService.sendPVOnSidChanged():t.pageService.sendPV({sendVisit:!0,addPreProps:!0,useNewTime:!0},t.sendPageCallback());var s=A(),u={};u.et=e[n.type],u.vid=t.gruser.vid(),u.sid=t.gruser.sid(),u.oi=T(),u.uid=C(),u.cid=O()||t.gruser.vid(),u.tm=Date.now(),u.dt=x()||"pc",u.ak=window.gds.accountId,u.av=window.gds.version,u.sh=window.screen.height,u.ti=document.title.slice(0,255),u.sw=window.screen.width,u.lp=s.lp||"",u.rp=s.rp||"",u.wt=0,u.ptm=t.pageLoaded,u.d=o.a.location.host||o.a.gds.accountId,u.p=t.currentPath,u.l=null!=o.f.language?o.f.language.toLowerCase():void 0,u.q=t.currentQuery.length>0?t.currentQuery:"",u.pt=window.location.protocol.substring(0,window.location.protocol.length-1),u.rf=S(),u.dc=I(),u.cc=I("dc"),t.setPSForActionMessage(u);var c="snapshot"===n.type,l="load"===n.type;c&&(n.type="click");var d=t.compute(n.type,i);if(t.appendElemAttrs(d,c,i,r),d.x=r.xpath,r.obj&&(d.obj=r.obj),d.idx=0,r.idx?d.idx=r.idx:-1===d.x.indexOf("dl")&&-1===d.x.indexOf("tr")&&-1===d.x.indexOf("li")||(d.idx=t.info.index(i)),0===r.containerMessage.length||l?u.e=[d]:-1!==b(je,r.pnode.tagName)&&t.info.onlyContainsChildren(r.pnode,Ee)?u.e=r.containerMessage:u.e=[d].concat(r.containerMessage),u.e&&u.e.length>0)for(var f=u.e,h=0;h<f.length;h++)f[h].idx||(f[h].idx=0);if(l){var p=n.target.attributes,v=[];for(var m in p){var y=p[m].name;/^data-logsss-/.test(y)&&v.push(n.target.getAttribute(y))}u.e[0].attr=v,Object(_e.a)(u,n),t.imgExposure.add(u)}else Object(_e.a)(u,n),c?t.snapshotCallback(n,u):(t.currentData=u,t.timer=setTimeout(function(){t.currentData=null,t.sender.send([u])},5));!function(e,t){if("click"===t.type&&e.d===ge&&e.p===ve&&t.target.src&&t.target.src===me){var n={name:"Double-Twelve"};n.domain=e.d,n.page=e.vid,g(pe,ye,be,"POST",n)}}(u,n)}};for(var c in e)"load"!==c&&n(document,c,u);n(document,"scroll",function(e){o.a.gds.impCtrlDua&&(o.a.grImpCtrl=Date.now())}),o.a.gds.touch&&function(){var e,t,s,u=o.f.userAgent,c=/chrome/i.exec(u),l=/android/i.exec(u);(Ve="ontouchstart"in o.a&&c&&!l)?(e=["touchstart"],t=["touchmove"],s=["touchend","touchcancel"]):(e=["mousedown"],t=["mousemove"],s=["mouseup","mouseleave"]),e.forEach(function(e){n(document,e,i)}),t.forEach(function(e){n(document,e,r)});var d=[];s.forEach(function(e){d.push(n(document,e,a))})}(),o.a.gds.exposure&&(!function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=document.querySelectorAll(ke.join(","));if(n.length>0)for(var o=function(o){var i=n[o];document.addEventListener?i.addEventListener("load",e,t):document.attachEvent&&i.attachEvent("onload",function(){var t=window.event;t.currentTarget=i,t.target=t.srcElement,e.call(i,t)})},i=0;i<n.length;i++)o(i)}(u),this.imgExposure.start())}},{key:"snapshotCallback",value:function(){throw new Error("这是一个接口方法")}},{key:"exposureCallback",value:function(e,t){throw new Error("这是一个接口方法")}},{key:"appendElemAttrs",value:function(){throw new Error("这是一个接口方法")}},{key:"checkJumpByATage",value:function(e){var t=!0;if(e.e||e.e.length>0){var n=e.e,o=/^a(\.|#|$)/,i=n[0].x.split("/");n.forEach(function(e){var n=i[i.length-1];if(o.test(n)&&e.h&&(-1!==e.h.indexOf("http://")||-1!==e.h.indexOf("https://"))){var r=e.h.match(/^http(s)?:\/\/.*?(\.(com|net|cn|org))/);r=r?r[0]:"";for(var a=!1,s=0;s<Ie.length;s++)if(new RegExp(Ie[s]).test(r)){a=!0;break}t=a}})}return t}},{key:"compute",value:function(e,t){var n=this,o={h:"",v:"",attr:[]},i=t.tagName;if("IMG"===i)t.src&&t.src.length>0&&-1===t.src.indexOf("data:image")&&(o.h=t.src);else if(k(t,"href")){var r=t.getAttribute("href");r&&0!==r.indexOf("javascript")&&(o.h=r.slice(0,320))}if(k(t,"data-chook-title")&&t.getAttribute("data-chook-title").length>0?o.v=t.getAttribute("data-chook-title"):k(t,"title")&&t.getAttribute("title").length>0&&(o.v=t.getAttribute("title")),"click"===e)if(this.info.isLeaf(t))switch(i){case"IMG":if(t.alt&&!o.v){o.v=t.alt;break}if(o.h){var a=o.h.split("?")[0].split("/");a.length>0&&(o.v=a[a.length-1]);break}case"INPUT":-1!==b(Te,t.type)&&(o.v=t.value);break;case"svg":var s=t.childNodes;Array.prototype.forEach.call(s,function(e){1===e.nodeType&&"use"===e.tagName&&k(e,"xlink:href")&&(o.v=e.getAttribute("xlink:href"))});break;default:var u="";t.textContent?u=t.textContent.replace(/[\n \t]+/g," ").trim():t.innerText&&(u=t.innerText.replace(/[\n \t]+/g," ").trim()),u.length>0&&(u.length<50?o.v=u:"A"===i&&(o.v=u.slice(0,50)))}else if(-1!==b(je,i)){var c=this.info.containerElemContent(t);if(this.info.isParentOfLeaf(t)&&!this.info.onlyContainsChildren(t,Ee)){var l=w(t);l===c?o.v=c:(o.v=l||c,o.obj=c||"")}else o.v=c}else this.info.isParentOfLeaf(t)&&(o.v=w(t));else if("change"===e){var d;if("TEXTAREA"!==i)if("INPUT"===i)if(-1!==b(Pe,t.type)){o.v=t.value;var f=t.parentNode;if("LABEL"===f.tagName)d=f;else{if("BODY"!==f.tagName)if("LABEL"===(f=f.parentNode).tagName)d=f;else if(t.id){var h=f.getElementsByTagName("label");Array.prototype.forEach.call(h,function(e){d=e})}if(null!=d){var p=this.info.containerElemContent(d);p&&p.length>0&&(o.v=p+" ("+t.checked+")")}}}else"password"!==t.type&&(o.v=t.value);else"SELECT"===i&&(o.v=t.value,1===t.selectedOptions.length&&t.selectedOptions[0]&&(o.v=t.selectedOptions[0].label))}else if("submit"===e){var g=t.getElementsByTagName("input");Array.prototype.forEach.call(g,function(e){("search"===e.type||"text"===e.type&&("q"===e.id||-1!==e.id.indexOf("search")||-1!==e.className.indexOf("search")&&"q"===e.name||-1!==e.name.indexOf("search")))&&(o.x=n.info.path(e),o.v=e.value.trim())})}return o}},{key:"bindEvent",value:function(){var e=this,t={};return this.canPostRegisterMessage()&&(t={circleMode:"page-load",url:o.a.location.toString(),ak:o.a.gds.accountId,sna:o.a.grSource.name,sid:o.a.grSource.id,dc:I(),cc:I("dc"),tna:"",fsna:"sdk",tArr:[o.a.grSource.id]},o.a.parent.postMessage(t,"*")),d(o.a,"message",function(t){try{var n=t.data,i=n.model||n.circleMode;if(o.a.self===o.a.top||n.ai!==o.a.gds.accountId)return!1;switch(i){case"gbdata-register-SDK-heatmap":case"gbdata-register-SDK-vtrack":e.registerGlsdkHandler()}}catch(e){console.log(e)}})}},{key:"registerGlsdkHandler",value:function(){if(!this.messagingObserver)try{this.messagingObserver=new he}catch(e){console.log(e)}}},{key:"canPostRegisterMessage",value:function(){return o.a.parent&&"function"==typeof o.a.parent.postMessage&&o.a.self!==o.a.top&&o.a.self!==o.a.parent}},{key:"observe",value:function(){var e=this;if(this.currentPath=f(),this.currentQuery=_(),this.pageService.sendPV({},this.sendPageCallback()),this.bindEvent(),document.addEventListener)"interactive"===document.readyState||"complete"===document.readyState?this.domLoadedHandler():d(document,"DOMContentLoaded",function(){e.domLoadedHandler()});else if(document.attachEvent){d(document,"onreadystatechange",function(){e.domLoadedHandler()});var t=!1;try{t=null===o.a.frameElement}catch(e){console.log(e)}if(document.documentElement.doScroll&&t){!function t(){try{document.documentElement.doScroll("left")}catch(e){setTimeout(t,1)}return e.domLoadedHandler()}()}}d(o.a,"load",function(){e.queueTimeout&&e.sendQueue()}),d(o.a,"beforeunload",function(t){if(clearTimeout(e.timer),e.currentData){var n=void 0;if(console.log(e.checkJumpByATage(e.currentData)),e.checkJumpByATage(e.currentData)){var o=window.name||"{}";try{(n=JSON.parse(o)).bigdata=e.currentData,window.name=JSON.stringify(n)}catch(t){window.name+="#########globalegrow-bigdata##########"+JSON.stringify(e.currentData)}}else GlobalegrowLocalStore._setInLocalStorage("globalegrow_bigdata",JSON.stringify(e.currentData),2592e6)}e.queueTimeout&&e.sendQueue()}),d(o.a,"unload",function(){})}},{key:"domLoadedHandler",value:function(){var e=this;this.domLoadedHandler.done||(this.domLoadedHandler.done=!0,this.registerEventListener(),null!=this.TreeMirror&&o.a.gds.imp&&(this.initServerImpSetting(),o.a.gds.impCtrlDua&&(o.a.grImpCtrl=Date.now()),setTimeout(function(){e.registerDomObserver()},1500)))}}]),e}(),He=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var Ue=function(e){function t(e,n,o,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,o,i));return r.info=ne,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Be),He(t,[{key:"snapshotCallback",value:function(){}},{key:"appendMessageAttrs",value:function(e,t){return t}},{key:"initServerImpSetting",value:function(){}},{key:"appendElemAttrs",value:function(e){return e}}]),t}(),Ge=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var Xe=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.user=ne.user(),e.sender=new re(e.user,e.callback()),e.observer=new Ue(e.sender,e.user,e,null),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,U),Ge(t,[{key:"afterInitialize",value:function(){}},{key:"defaultSamplingFunc",value:function(){var e=this.user.vid(),t=o.a.gds.sampling_ratio;return 0===parseInt(e.slice(-2),16)%t}},{key:"beforeConnect",value:function(){this.sender.setUrlMap(this.options)}}]),t}();!function(){var e=arguments,t=o.a.globalegrowbigdatasdk2018;if(o.a._gr_support_circle_pop_out=!0,!o.a._disable_js_gds&&("boolean"!=typeof o.a.webViewRequestSend||o.a.webViewRequestSend||!o.a._gds_ios||o.a._gds_bridge)){if(o.a.globalegrowSdkInstalled)return o.c.log("globalegrowSdkInstalled:","重复加载global SDK"),!1;var n=new Xe;o.a.globalegrowSdkInstalled=!0;var i=o.a[t];(i&&i.q?i.q:[]).forEach(function(e){n.apply.apply(n,e)});var r=function(){var e=arguments.length>=1?o.h.call(arguments,0):[];return n.apply.apply(n,e),e};r.push=function(){return e.length>1?n.apply.apply(n,e):n.apply.apply(n,e[0])},r.track=function(){var e=r.system;return e.track.apply(e,arguments)},r.platform="web",o.a.globalegrowArray=o.a.globalegrowArray||[],o.a.globalegrowArray.push(r),o.a[t]=function(){for(var e=o.a.globalegrowArray,t=[],n=0;n<e.length;n++){var i,r=arguments[0];"init"===r||"send"===r?"web"===e[n].platform&&(i=e[n].apply(null,arguments)):i=e[n].apply(null,arguments),t.push(i)}return o.c.log("array:",t),t},o.a._gds={push:function(){for(var e=[],t=o.a.globalegrowArray,n=0;n<t.length;n++){var i=t[n].push.apply(t[n],arguments);e.push(i)}return e},track:function(){for(var e=[],t=o.a.globalegrowArray,n=0;n<t.length;n++){var i=t[n].track.apply(t[n],arguments);e.push(i)}return e}}}}()},function(module,__webpack_exports__,__webpack_require__){"use strict";function visualInfo(e,t){if(window.gds&&window.gds.visual_track_config&&window.gds.visual_track_config.domain===("https"===e.pt?"https://":"http://")+e.d&&window.gds.visual_track_config.page===e.p&&window.gds.visual_track_config.data&&window.gds.visual_track_config.data.length>0)for(var n=window.gds.elementThreshold||50,o=window.gds.visual_track_config.data||[],i=t.target,r=0;r<o.length;r++){var a=o[r];if(a.xpath&&""!==a.xpath&&e.et===a.eventName)for(var s=document.querySelectorAll(a.xpath),u=0;u<s.length;u++)if(u<=n&&i===s[u]){setOptions(a.ruleProList,e.e[0]);break}}}function setOptions(e,t){for(var n={},o=0;o<e.length;o++){var i=e[o];switch(i.ruleType){case 1:n[i.shortName]=getElementAttr(i.pickRule);break;case 2:n[i.shortName]=getGlobalVar(i.pickRule);break;default:n[i.shortName]=""}}t.attr=n}function getGlobalVar(rule){var value=null;try{value=eval(rule)}catch(e){value=""}return value}function getElementAttr(e){var t="";if("string"!=typeof e)return t;if(""!==e)try{var n=document.querySelector(e);t=null===n?"":"string"==typeof n.textContent?n.textContent:n.innerText,n&&""==t&&(t=n.value?n.value:"")}catch(e){}return t}__webpack_exports__.a=visualInfo}]);