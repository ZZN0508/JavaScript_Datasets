define("modules/clean/flux/base_store",["require","exports","modules/clean/flux/dispatcher","modules/core/exception"],function(e,t,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Store=void 0;var r,i,s=(r=!1,i=[],o.Dispatcher.dispatch_begin=function(){return r=!0},o.Dispatcher.dispatch_end=function(){r=!1;try{return Array.from(i).map(function(e){return e()})}finally{i.length=0}},function(e){return r?Array.from(i).includes(e)?void 0:i.push(e):e()}),a=(l.prototype.destructor=function(){this._dispatcher.unregister(this.dispatchToken),this.remove_all_change_listeners()},l.prototype.emit_change=function(){for(var e=0,t=this._change_listeners;e<t.length;e++){var o=t[e];s(o)}},l.prototype.add_change_listener=function(e){n.assert(!this._change_listeners.includes(e),"adding duplicate change listener not allowed"),this._change_listeners.push(e)},l.prototype.remove_change_listener=function(t){this._change_listeners=this._change_listeners.filter(function(e){return e!==t})},l.prototype.remove_all_change_listeners=function(){this._change_listeners.length=0},l.prototype._new_payload_wrapper=function(e){var t;(null===(t=null===e||void 0===e?void 0:e.action)||void 0===t?void 0:t.type)===this.constructor.WIPE_TYPE&&"function"==typeof this._init&&this._init(),this._new_payload(e)},l.prototype._new_payload=function(e){throw new Error("Abstract method - must be implemented")},l.WIPE_TYPE="WIPE_ALL",l);function l(e){"function"==typeof this._init&&this._init(),this._change_listeners=[],this._dispatcher=e||o.Dispatcher,this.dispatchToken=this._dispatcher.register(this._new_payload_wrapper.bind(this))}t.Store=a}),define("modules/clean/downloads",["require","exports","tslib","api_v2/user_client","modules/clean/filepath/filepath","modules/clean/metrics/index","modules/clean/react/snackbar","modules/constants/browse_zip_downloads","modules/core/browser_detection","modules/core/exception","modules/core/html","modules/core/i18n","modules/core/notify","modules/core/uri"],function(e,f,m,b,c,a,t,y,l,u,r,i,d,p){"use strict";Object.defineProperty(f,"__esModule",{value:!0}),f.get_zip=f.zip_batch_by_ns_id=f.get_blockserver_link=f.get=void 0,c=m.__importStar(c),l=m.__importStar(l);var _=["dl-web.dropbox.com","dl.dropboxusercontent.com"],h=i.intl.formatMessage({id:"L64bdq",defaultMessage:"There was an error downloading your file."}),g=!1,v={};function w(e){var t=e.source,e=e.type;a.getMetricsReporter().createStats({ns:"web_file_actions",name:"download/failed"},{source:t,type:e}).record(1)}f.get=function(e){var t=e.url,o=e.error,n=e.source,r=void 0===n?"unknown":n,i=p.URI.parse(t),e=i.getAuthority();n={source:r}.source,a.getMetricsReporter().createStats({ns:"web_file_actions",name:"download/attempt"},{source:n}).record(1);n=_.includes(e)||e.endsWith(".dropboxusercontent.com")||"www.dropbox.com"===e;n||w({source:r,type:"download_non_block_server"}),u.assert(n,"attempt to download from a non-blockserver domain",{exc_extra:{domain:e,url:t}}),g||(g=!0,v={},window.addEventListener("message",k));var s=function(){for(var e="",t=1;t<=4;t++)e+=String(Math.random()).split(".")[1];return e}();return i.updateQuery(((t={})._download_id=s,t._notify_domain=window.location.host,t)),T({downloadUri:i,downloadId:s,error:o,downloadDomain:e,onLoad:function(){setTimeout(function(){var e=v[s];null!=e&&(l.chrome&&(d.Notify.error(h),e.error&&(e.error(),w({source:e.source,type:"download_failed"}))),P(s))},100)},source:r}),!1};var T=function(e){var t=e.downloadUri,o=e.downloadId,n=e.error,r=e.downloadDomain,i=e.onLoad,s=e.source,e=document.createElement("iframe");e.setAttribute("src",String(t)),e.style.display="none",i&&e.addEventListener("load",i),v[o]={origin:r,error:n,iframe:e,source:s},document.body.appendChild(e),window.setTimeout(function(){return P(o)},9e4)};f.get_blockserver_link=function(e){var t=e.url,o=e.ns_id,n=e.ns_path,r=e.inside_admin_console,i=e.legal_hold_export_gid,s=e.revision_id,a=e.error,e=p.URI.parse(t);return e.setScheme("https"),r?(e.updateQuery({dl:"1",inside_admin_console:"true"}),i&&e.updateQuery({legal_hold_export_gid:i})):e.updateQuery({dl:"1"}),null!=o&&(u.assert("string"==typeof n,"Namespace ID was passed with invalid path, got: "+n),e.updateQuery({nsid:String(o),path:n})),null!=s&&e.updateQuery({revision_id:s}),u.assert("dl-web.dropbox.com"===e.getAuthority(),"download_blockserver_url expects a blockserver resource, got: "+t),f.get({url:e.toString(),error:a,source:"get_blockserver_link"})},f.zip_batch_by_ns_id=function(e){var t=e.parent_ns_id,o=e.parent_ns_path,n=e.files,r=e.subject_uid,i=e.block_hash,e=new p.URI({scheme:"https",authority:"dl-web.dropbox.com",path:"/zip_batch_by_ns_id",query:((e={})._subject_uid=String(r),e.parent_ns_id=String(t),e.parent_ns_path=o||"/",e)}).toString(),s=document.createElement("form");s.setAttribute("action",e),s.setAttribute("method","post");for(var a=0,l=n;a<l.length;a++){var u=l[a],d=o+"/"+c.filename(u.fq_path),u=document.createElement("input");u.setAttribute("name","ns_paths"),u.setAttribute("value",d),s.appendChild(u)}n=document.createElement("input");n.setAttribute("name","w"),n.setAttribute("value",i),s.appendChild(n),document.body.appendChild(s),s.submit(),s.remove()};function S(e){e="too_many_files"===e[".tag"]?i.intl.formatMessage({id:"ZvH26K",defaultMessage:"Attempted to zip too many files."}):"too_much_data"===e[".tag"]?i.intl.formatMessage({id:"Qq4R12",defaultMessage:"Attempted to zip too much data."}):"file_not_found"===e[".tag"]?i.intl.formatMessage({id:"XSR4O8",defaultMessage:"File not found."}):"unauthorized_user"===e[".tag"]?i.intl.formatMessage({id:"tUjhJf",defaultMessage:"Unauthorized user."}):"unauthorized_namespace"===e[".tag"]?i.intl.formatMessage({id:"zR9JV2",defaultMessage:"Unauthorized namespace."}):i.intl.formatMessage({id:"ItwtZa",defaultMessage:"Zip download failed."}),t.Snackbar.fail(e,"zip-download-status")}f.get_zip=function(e){var u=e.fq_paths,d=e.subject_uid,c=e.block_hash,p=e.parent_path,_=e.flat_zip_mode,e=e.source,h=void 0===e?"unknown":e;return m.__awaiter(this,void 0,Promise,function(){var a,l;return m.__generator(this,function(e){switch(e.label){case 0:return""===p&&(p="/"),y.BROWSE_ZIP_DOWNLOADS_USE_URL_ROUTE?[4,(t={block_hash:c,fq_paths:m.__spreadArrays(u),parent_path:p,flat_mode:!!_,subjectUserId:d},o=t.block_hash,n=t.fq_paths,r=t.parent_path,i=t.flat_mode,s=t.subjectUserId,m.__awaiter(void 0,void 0,Promise,function(){return m.__generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,(new b.UserApiV2Client).ns("browse_zip_downloads").rpc("get_zip_download_url",{block_hash:o,unnormalized_files:m.__spreadArrays(n),parent_path:r,flat_mode:i},{subjectUserId:s})];case 1:return[2,{result:e.sent(),isError:!1}];case 2:return e.sent(),[2,{isError:!0,error:{".tag":"undefined_error"}}];case 3:return[2]}})}))]:[3,2];case 1:return(a=e.sent()).isError?(S(a.error),w({source:h,type:"zip_download_error"})):(l=a.result.url,f.get({url:l,source:h})),[3,4];case 2:return[4,function(e){var t=e.block_hash,o=e.fq_paths,n=e.parent_path,r=e.flat_mode,i=e.subjectUserId;return m.__awaiter(this,void 0,Promise,function(){return m.__generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,(new b.UserApiV2Client).ns("browse_zip_downloads").rpc("create_zip_token",{block_hash:t,unnormalized_files:m.__spreadArrays(o),parent_path:n,flat_mode:r},{subjectUserId:i})];case 1:return[2,{result:e.sent(),isError:!1}];case 2:return e.sent(),[2,{isError:!0,error:{".tag":"undefined_error"}}];case 3:return[2]}})})}({block_hash:c,fq_paths:m.__spreadArrays(u),parent_path:p,flat_mode:!!_,subjectUserId:d})];case 3:(a=e.sent()).isError?(S(a.error),w({source:h,type:"zip_token_error"})):(l=a.result.token,O({token:l,source:h})),e.label=4;case 4:return[2]}var t,o,n,r,i,s})})};var O=function(e){var t=e.token,e=e.source,t=new p.URI({scheme:"https",authority:"dl-web.dropbox.com",path:"/zip_download_get/"+t}).toString();f.get({url:t,source:e})};function k(e){var t,o,n=p.URI.parse(e.origin);if("https"===n.getScheme()&&(_.includes(n.getAuthority())||n.getAuthority().endsWith(".dropboxusercontent.com"))){try{t=JSON.parse(e.data)}catch(e){return}t&&t.download_id&&(null!=(o=v[t.download_id])&&n.getAuthority()===o.origin&&e.source===o.iframe.contentWindow&&("failed"===t.status&&(n=(t.message||h)+'<a target="_blank" rel="noreferrer" href="/help/desktop-web/download-entire-folders">'+i.intl.formatMessage({id:"WYQtmB",defaultMessage:"More info"})+"</a>",d.Notify.error(new r.HTML(n)),o.error&&(o.error(),w({source:o.source,type:"download_failed"}))),P(t.download_id)))}}function P(e){var t=v[e];null!=t&&(t.iframe.remove(),delete v[e])}}),define("modules/clean/deprecated_ajax/ajax_as_promised_jquery",["require","exports","tslib","modules/clean/deprecated_ajax/ajax_jquery"],function(e,t,o,n){"use strict";function r(o){return function(t){return new Promise(function(e,n){return o(t).then(e,function(e,t,o){return n({jqXHR:e,textStatus:t,errorThrown:o})})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.WebProgressRequest=t.FormWebRequest=t.WebRequestOref=t.WebRequest=t.SilentBackgroundRequest=t.BackgroundRequest=void 0,n=o.__importStar(n),t.BackgroundRequest=r(n.BackgroundRequest),t.SilentBackgroundRequest=r(n.SilentBackgroundRequest),t.WebRequest=r(n.WebRequest),t.WebRequestOref=r(n.WebRequestOref),t.FormWebRequest=r(n.FormWebRequest),t.WebProgressRequest=r(n.WebProgressRequest)}),define("modules/clean/browse_interface",["require","exports","tslib","modules/clean/viewer","modules/core/i18n","modules/core/uri","modules/clean/browse_uri_interface","modules/clean/browse_uri_interface"],function(e,t,n,o,r,i,s,a){"use strict";function l(e){return o.Viewer.get_viewer().is_paired?o.Viewer.get_root_name(e):r.intl.formatMessage({id:"bObFEu",defaultMessage:"Files"})}Object.defineProperty(t,"__esModule",{value:!0}),t.getFileHistoryUrl=t.get_all_browse_roots=t.get_browse_root_name=t.browse_uri_for_fq_path=t.preview_uri_for_fq_path=t.href_for_file=t.get_browse_root=void 0,Object.defineProperty(t,"get_browse_root",{enumerable:!0,get:function(){return s.get_browse_root}}),Object.defineProperty(t,"href_for_file",{enumerable:!0,get:function(){return s.href_for_file}}),Object.defineProperty(t,"preview_uri_for_fq_path",{enumerable:!0,get:function(){return s.preview_uri_for_fq_path}}),Object.defineProperty(t,"browse_uri_for_fq_path",{enumerable:!0,get:function(){return s.browse_uri_for_fq_path}}),t.get_browse_root_name=l,t.get_all_browse_roots=function(){return o.Viewer.get_viewer().get_users().map(function(e){return{name:l(e),path:a.get_browse_root(e)}})},t.getFileHistoryUrl=function(e,t){var o=e.fqPath,e=e.userId,t=n.__assign(n.__assign({},null==t?{}:t),((t={undelete:"1"})._subject_uid=String(e),t)),o=o.replace(/^[/]/,"");return new i.URI({path:"/history/"+o}).updateQuery(t).toString()}}),define("modules/clean/bolt/bolt",["require","exports","tslib","lodash","modules/clean/bolt/bolt_nodeps","modules/core/exception"],function(e,t,o,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelPayloads=t.Payload=t.SignedChannelState=t.ChannelId=t.ThunderClient=t.BoltClient=void 0,n=o.__importStar(n),i=o.__importStar(i),Object.defineProperty(t,"ChannelId",{enumerable:!0,get:function(){return r.ChannelId}}),Object.defineProperty(t,"ChannelPayloads",{enumerable:!0,get:function(){return r.ChannelPayloads}}),Object.defineProperty(t,"Payload",{enumerable:!0,get:function(){return r.Payload}}),Object.defineProperty(t,"SignedChannelState",{enumerable:!0,get:function(){return r.SignedChannelState}});var s,a=(s=r.BoltClient,o.__extends(l,s),l);function l(e,t,o){return s.call(this,e,t,o,"bolt.dropbox.com",n,i)||this}t.BoltClient=a;var u,o=(u=r.ThunderClient,o.__extends(d,u),d);function d(e,t,o){return u.call(this,e,t,o,"thunder.dropbox.com",n,i)||this}t.ThunderClient=o}),define("modules/clean/bolt/bolt_nodeps",["require","exports","tslib"],function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelPayloads=t.Payload=t.ChannelId=t.ThunderClient=t.BoltClient=t.SignedChannelState=void 0;function n(e,t){this.app_id=e,this.unique_id=t}t.ChannelId=n;function r(e,t,o,n){this.app_id=e,this.unique_id=t,this.revision=o,this.token=n}t.SignedChannelState=r;function _(e,t){this.revision=e,this.payload=t}t.Payload=_;function h(e,t){this.channel_state=e,this.payloads=t}t.ChannelPayloads=h;function s(e){return JSON.stringify(e)}var a,i=(d.prototype._encode_channel_state=function(e){return{channel_id:{app_id:e.app_id,unique_id:e.unique_id},revision:e.revision,token:e.token}},d.prototype._decode_channel_state=function(e){return new r(e.channel_id.app_id,e.channel_id.unique_id,e.revision,e.token)},d.prototype._decode_channel_id=function(e){return new n(e.app_id,e.unique_id)},d.prototype._compare_revisions=function(e,t){var o=Math.max(e.length,t.length),e=Array(o-e.length+1).join("0")+e,t=Array(o-t.length+1).join("0")+t;return e<t?-1:t<e?1:0},d.prototype._find_state=function(e){return this._signed_channel_states[s(e)]},d.prototype.update_states=function(e){for(var t=0,o=e;t<o.length;t++){var n=o[t],r=this._encode_channel_state(n),i=this._find_state(r.channel_id);null==i?(n=s(r.channel_id),this._signed_channel_states[n]=r,this._signed_channel_states_keys.push(n)):0<=this._compare_revisions(r.revision,i.revision)&&(i.revision=r.revision,i.token=r.token)}},d.prototype.start=function(){this._started||(this._started=!0,this._long_poll())},d.prototype.unsubscribe=function(){this._started=!1,null!=this._long_poll_xhr&&this._long_poll_xhr.abort(),this._long_poll_xhr=null,window.clearTimeout(this._timeout_id),this._timeout_id=null},d.prototype._long_poll=function(){var t=this;this._sequence_num++;var o=this._sequence_num,n=new XMLHttpRequest;n.open("POST",this._subscribe_url(),!0),n.setRequestHeader("Content-Type","application/json; charset=utf-8"),Object.keys(this._additional_headers).forEach(function(e){n.setRequestHeader(e,t._additional_headers[e])}),n.timeout=12e4,n.withCredentials=!0,n.responseType="json";function e(){return t._handle_poll_error(o)}n.addEventListener("load",function(){var e=n.status;200<=e&&e<300||304===e?t._handle_poll_success(o,n):t._handle_poll_error(o)}),n.addEventListener("timeout",e),n.addEventListener("error",e),n.addEventListener("abort",e),n.send(JSON.stringify({channel_states:this._signed_channel_states_keys.map(function(e){return t._signed_channel_states[e]})}))},d.prototype._must_find_state=function(e){var t=this._find_state(e);return null==t&&null!=this._exclog&&this._exclog.reportStack("Bolt returned unknown channel id "+e),t},d.prototype._handle_poll_data=function(e,t){return null!=this._exclog?this._exclog.reportStack("Method must be implemented."):void 0},d.prototype._subscribe_url=function(){return"https://"+this._hostname+this._subscribe_endpoint()},d.prototype._subscribe_endpoint=function(){return null!=this._exclog?this._exclog.reportStack("Method must be implemented."):void 0},d.prototype._handle_poll_success=function(e,t){var o=this;e===this._sequence_num&&(this._long_poll_xhr=null,this._started)&&(e=t.response,0<(t=this._handle_poll_data(e,t)).length&&this._lodash.defer(this._update_callback,t),0<(null!=e.invalid_channels?e.invalid_channels.length:void 0)?this._lodash.defer(this._refresh_callback,Array.from(e.invalid_channels).map(function(e){return o._decode_channel_id(e)})):(this._backoff_window=1e3,this._timeout_id=window.setTimeout(this._long_poll,0)))},d.prototype._handle_poll_error=function(e){e===this._sequence_num&&(this._long_poll_xhr=null,this._started)&&(e=Math.random()*this._backoff_window,this._backoff_window=Math.min(2*this._backoff_window,3e5),this._timeout_id=window.setTimeout(this._long_poll,e))},d),l=(a=i,o.__extends(u,a),u.prototype._subscribe_endpoint=function(){return"/2/notify/subscribe"},u.prototype._handle_poll_data=function(e,t){var o=[];if(null!=e.channel_states)for(var n=0,r=Array.from(e.channel_states);n<r.length;n++){var i=r[n],s=this._must_find_state(i.channel_id);0<this._compare_revisions(i.revision,s.revision)&&(s.revision=i.revision,s.token=i.token,o.push(this._decode_channel_state(i)))}return o},u);function u(e,t,o,n,r,i){i=a.call(this,e,t,o,n,r,i=void 0===i?null:i)||this;return i._handle_poll_data=i._handle_poll_data.bind(i),i}function d(e,t,o,n,r,i){void 0===i&&(i=null),this._find_state=this._find_state.bind(this),this._long_poll=this._long_poll.bind(this),this._must_find_state=this._must_find_state.bind(this),this._handle_poll_success=this._handle_poll_success.bind(this),this._handle_poll_error=this._handle_poll_error.bind(this),this._update_callback=t,this._refresh_callback=o,this._hostname=n,this._lodash=r,this._exclog=i,this._signed_channel_states={},this._signed_channel_states_keys=[],this._started=!1,this._sequence_num=0,this._backoff_window=1e3,this._additional_headers={},this._timeout_id=null,this.update_states(e)}t.BoltClient=l;var c,o=(c=i,o.__extends(p,c),p.prototype.unsubscribe=function(){return delete this._additional_headers["X-Bolt-Session"],c.prototype.unsubscribe.call(this)},p.prototype._subscribe_endpoint=function(){return"/2/payloads/subscribe"},p.prototype._handle_poll_data=function(e,t){var o=[];this._additional_headers={};t=t.getResponseHeader("X-Bolt-Session");if(t&&(this._additional_headers["X-Bolt-Session"]=t),null!=e.channel_payloads)for(var n=0,r=Array.from(e.channel_payloads);n<r.length;n++){for(var i=r[n],s=i.channel_state,a=this._must_find_state(s.channel_id),l=this._decode_channel_state(i.channel_state),u=[],d=0,c=Array.from(i.payloads);d<c.length;d++){var p=c[d];0<this._compare_revisions(p.revision,a.revision)&&u.push(new _(p.revision,p.payload))}0<u.length&&o.push(new h(l,u)),0<this._compare_revisions(s.revision,a.revision)&&(a.revision=s.revision,a.token=s.token)}return o},p);function p(e,t,o,n,r,i){i=c.call(this,e,t,o,n,r,i=void 0===i?null:i)||this;return i._handle_poll_data=i._handle_poll_data.bind(i),i}t.ThunderClient=o}),define("modules/clean/event_handler",["require","exports","tslib","jquery"],function(e,n,t,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.EventHandler=n.EventHandlerMixin=n.eventHandler=void 0,i=t.__importDefault(i),n.eventHandler=function(e){var t=e.prototype.componentWillMount,o=e.prototype.componentWillUnmount;e.prototype.componentWillMount=function(){n.EventHandlerMixin.componentWillMount.apply(this),t&&"function"==typeof t&&t.apply(this)},e.prototype.componentWillUnmount=function(){o&&"function"==typeof o&&o.apply(this),n.EventHandlerMixin.componentWillUnmount.apply(this)}},n.EventHandlerMixin={componentWillMount:function(){this.events=new o},componentWillUnmount:function(){this.events.removeAll()}};var o=(r.prototype.on=function(e,t,o,n,r){"string"!=typeof o&&(r=n,n=o,o=void 0),r&&(n=i.default.proxy(n,r)),this.handlers||(this.handlers=[]),e=i.default(e),o?e.on(t,o,n):e.on(t,n),this.handlers.push({element:e,event:t,selector:o,callback:n})},r.prototype.removeAll=function(){this.handlers&&(this.handlers.forEach(function(e){e.selector?e.element.off(e.event,e.selector,e.callback):e.element.off(e.event,e.callback)}),this.handlers=null)},r);function r(){}n.EventHandler=o}),define("modules/clean/fuzzy",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={simpleFilter:function(t,e){return e.filter(function(e){return s.test(t,e)})},test:function(e,t){return null!==s.match(e,t)},match:function(e,t,o){var n=0,r=[],i=t.length,s=0,a=0,l=(o=o||{}).pre||"",u=o.post||"",d=o.caseSensitive&&t||t.toLowerCase(),c=void 0;e=o.caseSensitive&&e||e.toLowerCase();for(var p=0,_=[],h=0,f=0;p<i;)c=t[p],d[p]===e[n]?(c=l+c+u,f?f+=1:(h=p,f=1),n+=1,a+=1+a):(a=0,f&&(_.push([h,f]),f=0)),s+=a,r[r.length]=c,p++;return f&&_.push([h,f]),n===e.length?{highlighted:_,rendered:r.join(""),score:s}:null},filter:function(e,t,o){o=this._reduce.bind(this,e,o=void 0===o?{}:o);return t.reduce(o,[]).sort(this._sort)},_reduce:function(e,t,o,n,r){var i=n;t.extract&&(i=t.extract(n));t=s.match(e,i,t);return null!=t&&o.push({string:t.rendered,score:t.score,index:r,original:n}),o},_sort:function(e,t){return t.score-e.score||e.index-t.index}};t.default=s}),define("modules/clean/pagelet_logger",["require","exports","tslib","modules/core/browser","modules/clean/js_client_stopwatch","modules/clean/web_timing_logger"],function(e,t,o,i,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PageletLogger=void 0,n=o.__importStar(n);r.prototype.componentReady=function(e){if(!this.ttiMarked){for(var t=!1,o=0;o<this.ttiComponents.length;++o)this.ttiComponents[o].name!==e||this.ttiComponents[o].isReady?this.ttiComponents[o].isReady||(t=!0):(this.ttiComponents[o].isReady=!0,s.JSStopwatch.recordTrace(e+"_since_start",{stopwatchName:this.stopwatchName}),console.timeStamp&&console.timeStamp(e+" TTI"));t||(n.mark_time_to_interactive(this.extraColumns),this.ttiMarked=!0)}},Object.defineProperty(r.prototype,"ttiLogged",{get:function(){return this.ttiMarked},enumerable:!1,configurable:!0}),o=r;function r(e,t,o,n){var r=this;void 0===t&&(t=[]),void 0===o&&(o=!1),void 0===n&&(n={}),this.pageletName=e,o?(o=i.performance())&&o.now&&(this.performance=o,this.stopwatchName=this.pageletName+"_client_logging",s.JSStopwatch.create_stopwatch_if_not_exist(this.stopwatchName)):this.stopwatchName=void 0,this.ttiComponents=[],t.map(function(e){r.ttiComponents.push({name:e,isReady:!1})}),this.ttiMarked=!1,this.extraColumns=n}t.PageletLogger=o}),define("modules/clean/react/bubble_dropdown_v2",["require","exports","tslib","classnames","react","react-dom","prop-types","lodash","modules/clean/react/components/css","modules/clean/react/overlay","modules/clean/react/sticky_position"],function(e,t,o,n,r,i,s,a,l,u,d){"use strict";var c;Object.defineProperty(t,"__esModule",{value:!0}),t.BubbleDropdown=t.BubbleDropdownContents=t.POSITION_TO_CSS_CLASS_MAP=void 0,n=o.__importDefault(n),r=o.__importDefault(r),i=o.__importStar(i),s=o.__importDefault(s),a=o.__importStar(a),t.POSITION_TO_CSS_CLASS_MAP=((c={})[d.StickyPosition.TOP_LEFT]="top-left",c[d.StickyPosition.TOP]="top",c[d.StickyPosition.TOP_RIGHT]="top-right",c[d.StickyPosition.LEFT_TOP]="left-top",c[d.StickyPosition.LEFT]="left",c[d.StickyPosition.LEFT_BOTTOM]="left-bottom",c[d.StickyPosition.RIGHT_TOP]="right-top",c[d.StickyPosition.RIGHT]="right",c[d.StickyPosition.RIGHT_BOTTOM]="right-bottom",c[d.StickyPosition.BOTTOM_LEFT]="bottom-left",c[d.StickyPosition.BOTTOM]="bottom",c[d.StickyPosition.BOTTOM_RIGHT]="bottom-right",c[d.StickyPosition.TOP_ALIGN_LEFT]="top-align-left",c[d.StickyPosition.TOP_ALIGN_RIGHT]="top-align-right",c[d.StickyPosition.LEFT_ALIGN_TOP]="left-align-top",c[d.StickyPosition.LEFT_ALIGN_BOTTOM]="left-align-bottom",c[d.StickyPosition.RIGHT_ALIGN_TOP]="right-align-top",c[d.StickyPosition.RIGHT_ALIGN_BOTTOM]="right-align-bottom",c[d.StickyPosition.BOTTOM_ALIGN_LEFT]="bottom-align-left",c[d.StickyPosition.BOTTOM_ALIGN_RIGHT]="bottom-align-right",c);var p,_=(p=r.default.Component,o.__extends(h,p),h.prototype.componentDidMount=function(){return this._adjustArrowPosition()},h.prototype.componentDidUpdate=function(){return this._adjustArrowPosition(!0)},h.prototype.render=function(){return r.default.createElement("div",{className:this.props.isMaestroDesign?"maestro":""},r.default.createElement("div",{ref:"dropdown",className:n.default("bubble-dropdown-v2","bubble-dropdown-v2--"+this._getArrowStyleFromPosition(),this.props.className),"aria-labelledby":this.props.targetNode.id},this.props.children,this.props.shouldShowArrow?r.default.createElement("div",{ref:"bubbleArrowContainer",className:"bubble-arrow-container"},r.default.createElement("div",{className:"bubble-arrow-border"}),r.default.createElement("div",{className:"bubble-arrow"})):null))},h.displayName="BubbleDropdownContents",h.propTypes={targetNode:s.default.instanceOf(HTMLElement).isRequired,position:s.default.oneOf([d.StickyPosition.TOP_LEFT,d.StickyPosition.TOP,d.StickyPosition.TOP_RIGHT,d.StickyPosition.LEFT_TOP,d.StickyPosition.LEFT,d.StickyPosition.LEFT_BOTTOM,d.StickyPosition.RIGHT_TOP,d.StickyPosition.RIGHT,d.StickyPosition.RIGHT_BOTTOM,d.StickyPosition.BOTTOM_LEFT,d.StickyPosition.BOTTOM,d.StickyPosition.BOTTOM_RIGHT,d.StickyPosition.TOP_ALIGN_LEFT,d.StickyPosition.TOP_ALIGN_RIGHT,d.StickyPosition.LEFT_ALIGN_TOP,d.StickyPosition.LEFT_ALIGN_BOTTOM,d.StickyPosition.RIGHT_ALIGN_TOP,d.StickyPosition.RIGHT_ALIGN_BOTTOM,d.StickyPosition.BOTTOM_ALIGN_LEFT,d.StickyPosition.BOTTOM_ALIGN_RIGHT]),verticalArrowOffset:s.default.number,horizontalArrowOffset:s.default.number,shouldShowArrow:s.default.bool,shouldArrowDecrement:s.default.bool,className:s.default.string,isMaestroDesign:s.default.bool},h.defaultProps={verticalArrowOffset:0,horizontalArrowOffset:0,shouldShowArrow:!0,shouldArrowDecrement:!0,className:null,isMaestroDesign:!1},h);function h(){var o=null!==p&&p.apply(this,arguments)||this;return o._getArrowStyleFromPosition=function(){return t.POSITION_TO_CSS_CLASS_MAP[o.props.position]},o._adjustArrowPosition=function(e){if(void 0===e&&(e=!1),o.props.shouldShowArrow){var t=i.findDOMNode(o.refs.bubbleArrowContainer);if(t){switch(o.props.position){case d.StickyPosition.TOP_ALIGN_LEFT:case d.StickyPosition.BOTTOM_ALIGN_LEFT:t.style.left=o.props.targetNode.offsetWidth/2+"px";break;case d.StickyPosition.TOP_ALIGN_RIGHT:case d.StickyPosition.BOTTOM_ALIGN_RIGHT:t.style.right=o.props.targetNode.offsetWidth/2+"px";break;case d.StickyPosition.LEFT_ALIGN_TOP:case d.StickyPosition.RIGHT_ALIGN_TOP:t.style.top=o.props.targetNode.offsetHeight/2+"px";break;case d.StickyPosition.LEFT_ALIGN_BOTTOM:case d.StickyPosition.RIGHT_ALIGN_BOTTOM:t.style.bottom=o.props.targetNode.offsetHeight/2+"px"}e&&!o.props.shouldArrowDecrement||!o.props.verticalArrowOffset&&!o.props.horizontalArrowOffset||(e=getComputedStyle(t),o._getArrowStyleFromPosition().match(/^(top|bottom)/)&&(t.style.left=String(parseFloat(e.left)-o.props.horizontalArrowOffset)+"px"),o._getArrowStyleFromPosition().match(/^(left|right)/)&&(t.style.top=String(parseFloat(e.top)-o.props.verticalArrowOffset)+"px"))}}},o}t.BubbleDropdownContents=_;var f,s=(f=r.default.Component,o.__extends(m,f),m.prototype.componentDidMount=function(){return this.updateTargetNode()},m.prototype.UNSAFE_componentWillUpdate=function(e,t){this.state.isVisible&&!this.props.disabled||!t.isVisible||e.disabled||(this.hasOnShowNotBeenCalledSinceLastOpened=!0)},m.prototype.componentDidUpdate=function(e,t){if(t.isVisible!==this.state.isVisible&&(this.state.isVisible||this._hasHidden()),i.findDOMNode(this.refs.bubbleDropdownContainer).childNodes[0]!==this.state.targetNode)return this.updateTargetNode()},m.prototype.render=function(){var e=this,t=this.state.targetNode;return r.default.createElement("div",{className:"bubble-dropdown-v2-container",onClick:this._handleClick,ref:"bubbleDropdownContainer"},this.props.targetButton,this.state.isVisible&&!this.props.disabled&&t?r.default.createElement(u.PositionedOverlay,{targetNode:t,isTargetPositionFixed:this.props.targetFixed,shouldTrapKeyboardFocus:this.props.shouldTrapKeyboardFocus,shouldAutoFocusOverlayContent:this.state.shouldAutoFocusDropdownContent,position:this.props.position,positionOffset:{horizontal:this.props.horizontalDisplacement,vertical:this.props.verticalDisplacement},onRendered:function(){return e._hasShown()},onBlur:function(){return e.hideDropdown()}},r.default.createElement(_,{ref:"bubbleDropdownContents",targetNode:t,position:this.props.position,verticalArrowOffset:this.props.verticalDisplacement,horizontalArrowOffset:this.props.horizontalDisplacement,shouldShowArrow:this.props.shouldShowArrow,className:this.props.className,shouldArrowDecrement:this.props.shouldArrowDecrement,isMaestroDesign:this.props.isMaestroDesign},this.props.children)):void 0)},m.displayName="BubbleDropdown",m.propTypes={targetButton:function(e,t,o){if(null==e.targetButton||"button"!==e.targetButton.type)return new Error("BubbleDropdown's targetButton must be a `<button>`")},position:s.default.oneOf([d.StickyPosition.TOP_LEFT,d.StickyPosition.TOP,d.StickyPosition.TOP_RIGHT,d.StickyPosition.LEFT_TOP,d.StickyPosition.LEFT,d.StickyPosition.LEFT_BOTTOM,d.StickyPosition.RIGHT_TOP,d.StickyPosition.RIGHT,d.StickyPosition.RIGHT_BOTTOM,d.StickyPosition.BOTTOM_LEFT,d.StickyPosition.BOTTOM,d.StickyPosition.BOTTOM_RIGHT,d.StickyPosition.TOP_ALIGN_LEFT,d.StickyPosition.TOP_ALIGN_RIGHT,d.StickyPosition.LEFT_ALIGN_TOP,d.StickyPosition.LEFT_ALIGN_BOTTOM,d.StickyPosition.RIGHT_ALIGN_TOP,d.StickyPosition.RIGHT_ALIGN_BOTTOM,d.StickyPosition.BOTTOM_ALIGN_LEFT,d.StickyPosition.BOTTOM_ALIGN_RIGHT]),targetFixed:s.default.bool,verticalDisplacement:s.default.number,horizontalDisplacement:s.default.number,className:s.default.string,disabled:s.default.bool,shouldShowArrow:s.default.bool,shouldTrapKeyboardFocus:s.default.bool,onShowDropdown:s.default.func,onHideDropdown:s.default.func,shouldArrowDecrement:s.default.bool,isMaestroDesign:s.default.bool},m.defaultProps={targetFixed:!1,verticalDisplacement:0,horizontalDisplacement:0,className:null,disabled:!1,shouldShowArrow:!0,shouldTrapKeyboardFocus:!1,onShowDropdown:a.noop,onHideDropdown:a.noop,shouldArrowDecrement:!0,isMaestroDesign:!1},m);function m(){var t=null!==f&&f.apply(this,arguments)||this;return t.state={isVisible:!1,targetNode:null,shouldAutoFocusDropdownContent:!1},t.hasOnShowNotBeenCalledSinceLastOpened=!1,t.updateTargetNode=function(){var e=i.findDOMNode(t.refs.bubbleDropdownContainer).childNodes[0];return e&&(e.setAttribute("aria-expanded",t.state.isVisible),e.hasAttribute("id")||e.setAttribute("id","bubbleDropdownTarget-"+a.uniqueId())),t.setState({targetNode:e})},t.showDropdown=function(){if(!t.props.disabled)return t.setState({isVisible:!0})},t.hideDropdown=function(){if(!t.props.disabled)return t.setState({isVisible:!1})},t._handleClick=function(e){e=!(0<e.clientX&&0<e.clientY);return t.setState({shouldAutoFocusDropdownContent:e},t._toggle)},t._toggle=function(){if(!t.props.disabled)return t.setState({isVisible:!t.state.isVisible})},t._hasShown=function(){if(t.hasOnShowNotBeenCalledSinceLastOpened)return t.state.targetNode.setAttribute("aria-expanded",!0),t.props.onShowDropdown(),t.hasOnShowNotBeenCalledSinceLastOpened=!1},t._hasHidden=function(){return t.state.targetNode.setAttribute("aria-expanded",!1),t.props.onHideDropdown()},t}t.BubbleDropdown=l.requireCssWithComponent(s,["/static/css/components/bubble_dropdown_v2-vflhhYVBe.css"])}),define("modules/clean/react/bubble_menu",["require","exports","tslib","classnames","create-react-class","react","react-dom","react-dom-factories","prop-types","lodash","jquery","ts-keycode-enum","modules/clean/react/bubble_dropdown_v2"],function(e,t,o,n,r,i,a,s,l,u,d,c,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BubbleMenu=t.BubbleMenuItemGroup=t.BubbleMenuSeparator=t.BubbleMenuItem=void 0,n=o.__importDefault(n),r=o.__importDefault(r),i=o.__importDefault(i),a=o.__importStar(a),s=o.__importDefault(s),l=o.__importDefault(l),u=o.__importStar(u),d=o.__importDefault(d);var _,h=i.default.createElement,f=function(e,t,o){var n=e[t].type;if([b,v,T].includes(n))return null;t=(null!=n?n.displayName:void 0)||e[t];return new Error("Expected menu items to be instances of BubbleMenuItem, not "+t+".")},m={DEFAULT:1,CHECKBOX:2,RADIO:3},b=(_=i.default.Component,o.__extends(y,_),y.prototype.render=function(){return s.default.li({role:"presentation",className:n.default("bubble-menu-item-wrapper",this.props.className)},this.renderContents())},y.displayName="BubbleMenuItem",y.propTypes={onClick:l.default.func,href:l.default.string,target:l.default.string,disabled:l.default.bool,closeOnClick:l.default.bool,closeFunc:l.default.func,className:l.default.string,onMouseEnter:l.default.func,onMouseLeave:l.default.func,itemType:l.default.oneOf(u.values(m)),checked:l.default.bool},y.defaultProps={onClick:u.noop,href:"#",target:null,disabled:!1,closeOnClick:!0,closeFunc:u.noop,className:null,onMouseEnter:u.noop,onMouseLeave:u.noop,itemType:m.DEFAULT,checked:null},y.TYPES=m,y);function y(){var t=null!==_&&_.apply(this,arguments)||this;return t._handleMouseEnter=function(e){if(null!=t.refs.item)return d.default(a.findDOMNode(t.refs.item)).closest(".bubble-menu").removeClass("bubble-menu--keyboard"),t.props.onMouseEnter(e)},t._handleClick=function(e){return t.props.disabled?(e.preventDefault(),e.stopPropagation()):"#"===t.props.href&&(e.preventDefault(),t.props.onClick(e),t.props.closeOnClick)?t.props.closeFunc():void 0},t._getRole=function(){switch(t.props.itemType){case m.CHECKBOX:return"menuitemcheckbox";case m.RADIO:return"menuitemradio";default:return"menuitem"}},t._getAriaChecked=function(){switch(t.props.itemType){case m.CHECKBOX:case m.RADIO:return t.props.checked||!1;default:return null}},t.renderContents=function(){var e={"bubble-menu-item":!0,"bubble-menu-item--disabled":t.props.disabled,"bubble-menu-item--checked":t.props.checked};return s.default.a({ref:"item",role:t._getRole(),className:n.default(e),href:t.props.href,target:t.props.target,onClick:t._handleClick,onMouseEnter:t._handleMouseEnter,onMouseLeave:t.props.onMouseLeave,"aria-disabled":t.props.disabled,"aria-checked":t._getAriaChecked()},t.props.children)},t}t.BubbleMenuItem=b;var g,v=(g=i.default.Component,o.__extends(w,g),w.prototype.render=function(){return s.default.li({role:"separator",className:this.props.className},this.props.children)},w.displayName="BubbleMenuSeparator",w.propTypes={className:l.default.string},w.defaultProps={className:"bubble-menu-item-separator"},w);function w(){return null!==g&&g.apply(this,arguments)||this}t.BubbleMenuSeparator=v;var T=r.default({displayName:"BubbleMenuItemGroup",props:{items:l.default.arrayOf(f).isRequired,closeFunc:l.default.func},render:function(){var o=this;return 0===this.props.items.length?null:s.default.li({className:"bubble-menu-item-group",role:"presentation"},s.default.ul({className:"bubble-menu-item-group u-unlist u-trim-padding",role:"group"},Array.from(this.props.items).map(function(e,t){return i.default.cloneElement(e,{closeFunc:o.props.closeFunc,key:null!=e.key?e.key:t})})))}});t.BubbleMenuItemGroup=T;var S,f=(S=i.default.Component,o.__extends(O,S),O.prototype.render=function(){var e,o=this;return this.props.targetButton&&(e=h(P,{ref:"targetButton",childProps:{"aria-haspopup":!0}},this.props.targetButton)),h(p.BubbleDropdown,u.assignIn({},this.props,{ref:"bubble",shouldTrapKeyboardFocus:!0,onShowDropdown:this._onShowBubbleMenu,targetButton:e}),s.default.div({},this.props.headerContent),s.default.ul({role:"menu",ref:"menu",className:"bubble-menu",onKeyDown:this._onKeyDown,onKeyPress:this._onKeyPress},Array.from(this.props.items).map(function(e,t){return i.default.cloneElement(e,{closeFunc:o.hideMenu,key:null!=e.key?e.key:t})})))},O.displayName="BubbleMenu",O.propTypes=u.assignIn({},p.BubbleDropdown.propTypes,{headerContent:l.default.element,items:l.default.arrayOf(f).isRequired,onShowDropdown:l.default.func,targetButton:function(e,t,o){if("button"!==(null!=e.targetButton?e.targetButton.type:void 0))return new Error("BubbleDropdown's targetButton must be a `<button>`, found: "+e[t].type)}}),O);function O(){var s=null!==S&&S.apply(this,arguments)||this;return s.showMenu=function(){var e;return null===(e=null===(e=s.refs.bubble)||void 0===e?void 0:e.getWrappedComponent())||void 0===e?void 0:e.showDropdown()},s.hideMenu=function(){var e;return null===(e=null===(e=s.refs.bubble)||void 0===e?void 0:e.getWrappedComponent())||void 0===e?void 0:e.hideDropdown()},s._onShowBubbleMenu=function(){if(null!=s.refs.menu&&null!=s.refs.bubble)return s.$menu=d.default(a.findDOMNode(s.refs.menu)),s.$menuitems=s.$menu.find('*[role="menuitem"],*[role="menuitemcheckbox"],*[role="menuitemradio"]'),s.$menu.addClass("bubble-menu--keyboard"),"function"==typeof s.props.onShowDropdown?s.props.onShowDropdown():void 0},s._onKeyDown=function(e){return s.$menu.addClass("bubble-menu--keyboard"),e.keyCode===c.Key.DownArrow?(s._focusNext(e.target),e.preventDefault(),e.stopPropagation()):e.keyCode===c.Key.UpArrow?(s._focusPrevious(e.target),e.preventDefault(),e.stopPropagation()):void 0},s._onKeyPress=function(r){s.$menu.addClass("bubble-menu--keyboard");var e=null!=r.which?r.which:r.keyCode,i=String.fromCharCode(e).toLowerCase();return function(){for(var e,t=[],o=0;o<s.$menuitems.length;o++){var n=s.$menuitems[o];if((null===(e=null===(e=n.textContent)||void 0===e?void 0:e[0])||void 0===e?void 0:e.toLowerCase())===i&&o>s.$menuitems.index(r.target)){n.focus(),r.stopPropagation();break}t.push(void 0)}return t}()},s._focusPrevious=function(e){e=s.$menuitems.index(e),e=[-1,0].includes(e)?s.$menuitems.length-1:e-1;return s.$menuitems.get(e).focus()},s._focusNext=function(e){e=s.$menuitems.index(e),e=[-1,s.$menuitems.length-1].includes(e)?0:e+1;return s.$menuitems.get(e).focus()},s}t.BubbleMenu=f;var k,P=(k=i.default.Component,o.__extends(M,k),M.prototype.render=function(){return i.default.cloneElement(this.props.children,this.props.childProps)},M.displayName="BubbleMenuTargetButtonWrapper",M.propTypes={childProps:l.default.object},M);function M(){return null!==k&&k.apply(this,arguments)||this}}),define("modules/clean/react/hidden",["require","exports","tslib","react","react-dom-factories","prop-types","lodash"],function(e,t,o,n,r,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HiddenSelect=t.Hidden=void 0,n=o.__importDefault(n),r=o.__importDefault(r),i=o.__importDefault(i),s=o.__importStar(s);var a,l=n.default.createElement,u=(a=n.default.Component,o.__extends(d,a),d.prototype.render=function(){return r.default.div({className:"hidden-option"},this.props.children)},d.displayName="Hidden",d);function d(){return null!==a&&a.apply(this,arguments)||this}t.Hidden=u;var c,i=(c=n.default.Component,o.__extends(p,c),p.prototype.render=function(){return l(u,{},r.default.select(s.omit(this.props,"options"),Array.from(this.props.options).map(function(e){return r.default.option({key:e,label:e,value:e})})))},p.displayName="HiddenSelect",p.propTypes={options:i.default.arrayOf(i.default.any).isRequired,value:i.default.any},p);function p(){return null!==c&&c.apply(this,arguments)||this}t.HiddenSelect=i}),define("modules/clean/react/rebrand/elements/rebrand_buttons",["require","exports","tslib","react","classnames","lodash","modules/clean/react/components/css"],function(e,t,u,d,l,c,o){"use strict";function p(e,t,o,n,r,i){void 0===r&&(r=null),void 0===i&&(i=!1);var s="button--"+(o=void 0===o?"small":o),a="";(n=void 0===n?null:n)&&(a=s+"--"+n);o="button--"+(e=void 0===e?"primary":e),n=(t=void 0!==t&&t)?o+"--disabled":"";return l.default(((t={})["button--with-border"]="secondary"===e&&i,t),"button",o,s,a,r,n)}function _(e){e.preventDefault()}function h(){}Object.defineProperty(t,"__esModule",{value:!0}),t.RebrandButton=t.RebrandButtonElement=t.RebrandButtonAnchor=t.RebrandButtonAnchorElement=void 0,d=u.__importDefault(d),l=u.__importDefault(l),c=u.__importStar(c);var n,r=(n=d.default.Component,u.__extends(i,n),i.prototype.render=function(){var e=this.props,t=e.ariaLabel,o=e.importance,n=e.disabled,r=e.size,i=e.width,s=e.className,a=e.withBorder,e=e.trackingId,a=p(o,n,r,i,s,a);return d.default.createElement("a",{href:this.props.href,className:a,onClick:n?_:h,"aria-label":t,"aria-disabled":n,"data-trackingid":e,"data-uxa-log":e},this.props.children)},i);function i(){return null!==n&&n.apply(this,arguments)||this}t.RebrandButtonAnchorElement=r,t.RebrandButtonAnchor=o.requireCssWithComponent(r,["/static/css/rebrand/elements/button-vflIddG9V.css"]);var s,r=(s=d.default.Component,u.__extends(a,s),a.prototype.render=function(){var e=this.props,t=e.importance,o=e.disabled,n=e.size,r=e.width,i=e.className,s=e.onClick,a=e.type,l=e.trackingId,e=u.__rest(e,["importance","disabled","size","width","className","onClick","type","trackingId"]),i=p(t,o,n,r,i),e=c.pickBy(e,function(e,t){return t.startsWith("data-")});return d.default.createElement("button",u.__assign({className:i,onClick:s,disabled:o,type:a||"button","data-uxa-log":l,"aria-label":this.props.ariaLabel},e),this.props.children)},a);function a(){return null!==s&&s.apply(this,arguments)||this}t.RebrandButtonElement=r,t.RebrandButton=o.requireCssWithComponent(r,["/static/css/rebrand/elements/button-vflIddG9V.css"])}),define("modules/clean/react/util",["require","exports","tslib","react"],function(e,t,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setStatePromise=t.replaceSubtree=t.mergeProps=t.getText=void 0,s=o.__importDefault(s);function n(e){if("string"==typeof e)return e;if("string"==typeof e.props)return e.props;if(e.props.text)return e.props.text;var t=[];return s.default.Children.forEach(e.props.children,function(e){return t.push(n(e))}),t.join("")}t.getText=n;function a(e,o,n){if(o(e))return n(e);var r=!1,i=[];return s.default.Children.forEach(e.props.children,function(e){var t=a(e,o,n);if(i.push(t),t!==e)return r=!0}),r?s.default.cloneElement(e,{},i):e}t.replaceSubtree=a,t.mergeProps=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var o={},n=[],r=0,i=Array.from(e);r<i.length;r++)for(var s=i[r],a=0,l=Object.keys(s||{});a<l.length;a++){var u=l[a],d=s[u];"className"===u?n.push(d):o[u]=d}return null!=n.length&&(o.className=n.join(" ")),o},t.setStatePromise=function(o,n){return new Promise(function(e,t){return o.setState(n,e)})}}),define("modules/core/user_i18n",["require","exports","tslib","modules/constants/page_load"],function(e,t,o,n){"use strict";function r(){return-1!==["zh","ja","ko"].indexOf(n.USER_LOCALE)}function i(e){for(var t=[],o=e.length,n=0;n<o;){var r=e[n];if("\ud800"<=r&&r<="\udb7f"){if(!(n<o-1))break;var i=r+e[n+1];t.push(i),n+=2}else t.push(r),n+=1}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.isCjkLocale=t.getShortName=t.getInitials=void 0,n=o.__importStar(n),t.getInitials=function(e){if(!e)return"";var t=(e=e.toUpperCase()).trim().split(" "),o=i(t[0]),n=i(t[t.length-1]);if(2<=t.length)return r()?n[0]+o[0]:o[0]+n[0];n=i(e);return r()&&!function(e){for(var t=0;t<e.length;t++)if(128<=e.charCodeAt(t))return;return 1}(e)&&1<n.length?n[0]+n[1]:n[0]},t.getShortName=function(e){if(!e)return"";var t=e.trim().split(" ");if(t.length<2)return e;e=t[0],t=i(t[t.length-1]);return r()?t[0]+" "+e:e+" "+t[0]},t.isCjkLocale=r}),define("modules/clean/react/tooltip",["require","exports","tslib","react","react-dom","react-dom-factories","prop-types","lodash"],function(e,t,o,n,l,a,r,i){"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),t.TooltipPosition=t.Tooltip=void 0,n=o.__importDefault(n),l=o.__importStar(l),a=o.__importDefault(a),r=o.__importDefault(r),i=o.__importStar(i);var u={TOP:0,BOTTOM:1,LEFT:2,RIGHT:3,BOTTOM_RIGHT:4};t.TooltipPosition=u;function d(){var e=h();l.unmountComponentAtNode(e),e.parentNode.removeChild(e)}function c(e){var t=(n=e.getBoundingClientRect()).top,o=n.left,n=t+document.body.scrollTop,t=o+document.body.scrollLeft,e=(o=function(e){if(0!==e.offsetWidth&&0!==e.offsetHeight)return{height:e.offsetHeight,width:e.offsetWidth};var t=e.style,o=t.display,n=t.position,r=t.visibility;e.style.display="block",e.style.position="absolute",e.style.visibility="hidden";var i=e.offsetWidth,t=e.offsetHeight;return e.style.display=o,e.style.position=n,e.style.visibility=r,{height:t,width:i}}(e)).width,o=o.height;return{left_x:t,right_x:t+e,top_y:n,bottom_y:n+o,width:e,height:o}}var p,_,h=function(){var e=document.getElementById("tooltip-holder");return e||((e=document.createElement("div")).id="tooltip-holder",e.style.zIndex=""+1e4,document.body.insertBefore(e,document.body.firstChild)),e},f=(_=n.default.Component,o.__extends(b,_),b.prototype.render=function(){var e=this,t=this.props.targetElementDimensions,o=window.innerHeight,n=window.innerWidth,r=document.body.scrollTop,i=document.body.scrollLeft,s=function(){switch(e.props.position){case u.TOP:return{bottom:o-t.top_y+7+r};case u.BOTTOM:return{top:t.bottom_y+7-r};case u.LEFT:return{right:n-t.left_x+7+i};case u.RIGHT:return{left:t.right_x+7-i};case u.BOTTOM_RIGHT:return{left:t.right_x-7-i,top:t.bottom_y+7-r}}}();return a.default.div({className:"tooltip-bubble "+(this.props.className||""),ref:"tooltip",style:s,onMouseMove:this.props.mouse_move_cb||void 0,onMouseLeave:this.props.mouse_out_cb||void 0,onMouseEnter:this.props.mouse_enter_cb||void 0},a.default.div({className:"tooltip-inner"},this.props.contents))},b.prototype.componentDidMount=function(){return this._centerAndShow()},b.prototype.componentDidUpdate=function(){return this._centerAndShow()},b.displayName="TooltipBubble",b.propTypes={position:r.default.oneOf(function(){var e=[];for(s in u)e.push(u[s]);return e}()),contents:r.default.oneOfType([r.default.element,r.default.string]),className:r.default.string,mouse_move_cb:r.default.func,mouse_out_cb:r.default.func,mouse_enter_cb:r.default.func,targetElementDimensions:r.default.shape({left_x:r.default.number,right_x:r.default.number,top_y:r.default.number,bottom_y:r.default.number,width:r.default.number,height:r.default.number})},b),r=(p=n.default.Component,o.__extends(m,p),m.prototype.render=function(){return a.default.div({className:"tooltip-target",onMouseEnter:this._on_mouse_enter,onFocus:this._show,onMouseLeave:this._on_mouse_leave,onBlur:this._on_mouse_leave,id:this.state.tooltip_id,ref:"tooltipTarget",tabIndex:this.props.is_focusable?0:void 0},this.props.children)},m.prototype.componentDidMount=function(){return document.addEventListener("scroll",this._scrollEventHandler)},m.prototype.componentDidUpdate=function(){if(this.state.visible)return this._render_tooltip()},m.prototype.componentWillUnmount=function(){document.removeEventListener("scroll",this._scrollEventHandler),d()},m.displayName="Tooltip",m.propTypes={position:r.default.oneOf(function(){var e=[];for(s in u)e.push(u[s]);return e}()),tooltip_contents:r.default.oneOfType([r.default.oneOfType([r.default.element,r.default.string]),r.default.arrayOf(r.default.oneOfType([r.default.element,r.default.string]))]),tooltip_classname:r.default.string,hide_delay:r.default.number,show_delay:r.default.number,interaction_enabled:r.default.bool,is_focusable:r.default.bool,on_show:r.default.func},m.defaultProps={interaction_enabled:!1,hide_delay:0,show_delay:0},m);function m(){var o=null!==p&&p.apply(this,arguments)||this;return o._scrollEventHandler=function(e){return o._hide(e)},o.state={visible:!1,event_id:i.uniqueId()},o._on_mouse_enter=function(){0<o.props.show_delay?o._scheduleShow():o._show()},o._on_mouse_leave=function(){0<o.props.hide_delay?o._scheduleHide(o.props.hide_delay):o._hide()},o._render_tooltip=function(){d();var e=h(),t=document.getElementById("tooltip-holder");if(t){t.style.position="fixed",t.style.left="0",t.style.right="0",0<o.props.hide_delay&&t.setAttribute("data-event-id",o.state.event_id),o.props.position===u.TOP?(t.style.top="auto",t.style.bottom="0"):(t.style.top="0",t.style.bottom="auto");t=n.default.createElement(f,{position:o.props.position,contents:o.props.tooltip_contents,className:o.props.tooltip_classname,mouse_move_cb:o.props.interaction_enabled?o._clear_timeout:void 0,mouse_out_cb:o.props.interaction_enabled?o._on_mouse_leave:void 0,mouse_enter_cb:o.props.interaction_enabled?o._on_mouse_enter:void 0,targetElementDimensions:c(l.findDOMNode(o.refs.tooltipTarget))});return l.render(t,e)}},o._show=function(){if(!o.state.visible||o._last_timeout)return o._render_tooltip(),o.setState({visible:!0}),o.props.on_show&&o.props.on_show(),o._clear_timeout()},o._hide=function(){if(o.state.visible){var e=h();return o._last_timeout?e.getAttribute("data-event-id")===o.state.event_id&&(d(),o._clear_timeout()):d(),o.setState({visible:!1})}},o._scheduleHide=function(e){if(o.state.visible)return o._last_timeout=setTimeout(o._hide,e)},o._clear_timeout=function(){if(o._last_timeout)return clearTimeout(o._last_timeout),o._last_timeout=null},o._scheduleShow=function(){return o._clear_timeout(),o._last_timeout=setTimeout(o._show,o.props.show_delay)},o}function b(){var a=null!==_&&_.apply(this,arguments)||this;return a._centerAndShow=function(){var e,t,o=l.findDOMNode(a.refs.tooltip),n=a.props.targetElementDimensions,r=c(o),i=document.body.scrollTop,s=document.body.scrollLeft;[u.TOP,u.BOTTOM].includes(a.props.position)?(e=window.innerWidth,(t=n.left_x+n.width/2-r.width/2-s)<0?t=0:t+r.width>e&&(t=e-r.width-7),o.style.left=t+"px"):[u.LEFT,u.RIGHT].includes(a.props.position)&&(t=window.innerHeight,(i=n.top_y+n.height/2-r.height/2-i)<0?i=0:i+r.height>t&&(i=t-r.height-7),o.style.top=i+"px"),o.style.display="block"},a}t.Tooltip=r}),define("modules/clean/portaled-snackbar",["require","exports","tslib","react","react-dom","styled-components","dig-components/snackbar","dig-components/buttons","modules/core/i18n"],function(e,t,o,r,i,n,s,a,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PortaledSnackbar=void 0,r=o.__importDefault(r),i=o.__importDefault(i);var u,d,c=(n=o.__importDefault(n)).default.div(u=u||o.__makeTemplateObject(["\n  position: fixed;\n  width: 100%;\n  bottom: 6vh;\n  margin: auto;\n  z-index: 20;\n  display: flex;\n  justify-content: center;\n"],["\n  position: fixed;\n  width: 100%;\n  bottom: 6vh;\n  margin: auto;\n  z-index: 20;\n  display: flex;\n  justify-content: center;\n"])),p=n.default(s.Snackbar)(d=d||o.__makeTemplateObject(["\n  flex-grow: 1;\n"],["\n  flex-grow: 1;\n"])),_=document.getElementsByTagName("body")[0];t.PortaledSnackbar=function(e){var t=e.children,o=e.close,n=e.isOpen,e=e.timeoutInMs;return i.default.createPortal(r.default.createElement(c,null,r.default.createElement(p,{open:void 0===n||n,timeout:void 0===e?5e3:e,onRequestClose:o},r.default.createElement(s.Snackbar.Message,null,t),r.default.createElement(s.Snackbar.Actions,null,r.default.createElement(a.Button,{variant:"transparent",inverse:!0,onClick:o},l.intl.formatMessage({id:"WxV0Sy",defaultMessage:"Dismiss"}))))),_)}}),define("modules/clean/deprecated_ajax/ajax_form_extract_errors",["require","exports","modules/core/i18n"],function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractErrors=void 0,t.extractErrors=function(t){try{return 0===t.indexOf("err:")&&(t=t.substr(4),JSON.parse(t))}catch(e){return"string"==typeof t?t:o.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."})}}});
