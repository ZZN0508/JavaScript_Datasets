(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[605],{1115:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return["email","phone","facebook","google","yolo"].includes(e)}},1117:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return!("string"!=typeof e||!e)&&/^[a-zA-Z0-9-_=+.]+(( nill | )[a-zA-Z0-9-_=+.]+( [a-zA-Z0-9-_=+.]+)?)?$/.test(e)}},3452:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"LoginMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"TokenRequest"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login_token"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"access_token"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"acc_sid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"errors"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"sq_check"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cotp_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"uid"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:134}};n.loc.source={body:"mutation LoginMutation($input:TokenRequest!){login_token(input:$input){access_token sid acc_sid errors{message}sq_check cotp_url uid}}",name:"GraphQL request",locationOffset:{line:1,column:1}};var c={};function r(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach(function(e){var t;e.name&&(function t(e,n){var i;"FragmentSpread"===e.kind?n.add(e.name.value):"VariableDefinition"!==e.kind||"NamedType"===(i=e.type).kind&&n.add(i.name.value),e.selectionSet&&e.selectionSet.selections.forEach(function(e){t(e,n)}),e.variableDefinitions&&e.variableDefinitions.forEach(function(e){t(e,n)}),e.definitions&&e.definitions.forEach(function(e){t(e,n)})}(e,t=new Set),c[e.name.value]=t)}),e.exports=n,e.exports.LoginMutation=function(t,e){var n={kind:t.kind,definitions:[r(t,e)]};t.hasOwnProperty("loc")&&(n.loc=t.loc);var e=c[e]||new Set,i=new Set,o=new Set;for(e.forEach(function(e){o.add(e)});0<o.size;){var a=o,o=new Set;a.forEach(function(e){i.has(e)||(i.add(e),(c[e]||new Set).forEach(function(e){o.add(e)}))})}return i.forEach(function(e){e=r(t,e);e&&n.definitions.push(e)}),n}(n,"LoginMutation")},3453:function(e,t,n){"use strict";var i=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.trackLogin=function(e){var t=e.provider,n=e.status,i=e.description,o=e.descriptionCode;switch(t){case"email":!function(e){var t=e.description;switch(e.status){case"click":(0,a.default)({event:"eventClickLogin",eventCategory:"pop up login page",eventAction:"click on masuk ke tokopedia",eventLabel:"click"});break;case"success":(0,a.default)({event:"eventClickLogin",eventCategory:"pop up login page",eventAction:"click on masuk ke tokopedia",eventLabel:"success"});break;case"failed":(0,a.default)({event:"eventClickLogin",eventCategory:"pop up login page",eventAction:"click on masuk ke tokopedia",eventLabel:"failed - ".concat({description:t}.description)})}}({status:n,description:i});break;case"facebook":case"google":!function(e){var t,n,i=e.provider,o=e.description;switch(e.status){case"click":(0,a.default)({event:"eventClickLogin",eventCategory:"pop up login page",eventAction:"click on masuk dengan ".concat({provider:i}.provider),eventLabel:"click"});break;case"success":(0,a.default)({event:"eventClickLogin",eventCategory:"pop up login page",eventAction:"click on masuk dengan ".concat({provider:i}.provider),eventLabel:"success"});break;case"failed":n=(t={provider:i,description:o}).description,(0,a.default)({event:"eventClickLogin",eventCategory:"pop up login page",eventAction:"click on masuk dengan ".concat(t.provider),eventLabel:"failed - ".concat(n)})}}({provider:t,status:n,description:i});break;case"yolo":!function(e){var t,n=e.description,i=e.descriptionCode;switch(e.status){case"click":(0,a.default)({event:"clickLogin",eventCategory:"login page",eventAction:"click on google YOLO",eventLabel:"click"});break;case"close":(0,a.default)({event:"clickLogin",eventCategory:"login page",eventAction:"click on close google YOLO",eventLabel:""});break;case"success":(0,a.default)({event:"clickLogin",eventCategory:"login page",eventAction:"click on google YOLO",eventLabel:"success"});break;case"failed":"TIMEOUT"===i?(0,a.default)({event:"clickLogin",eventCategory:"login page",eventAction:"click on YOLO timeout",eventLabel:"failed yolo timeout"}):(t="failed - ".concat({description:n}.description),(0,a.default)({event:"clickLogin",eventCategory:"login page",eventAction:"click on google YOLO",eventLabel:t}))}}({status:n,description:i,descriptionCode:o})}};var a=i(n(3454))},3454:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.event,n=e.eventCategory,i=e.eventAction,e=e.eventLabel;window.dataLayer&&window.dataLayer.push({event:void 0===t?"":t,eventCategory:void 0===n?"":n,eventAction:void 0===i?"":i,eventLabel:void 0===e?"":e})}},4650:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return a});var i=n(21),c=n(53),t=n(10),w=n.n(t),t=n(591),S=n.n(t),t=n(738),C=n.n(t),t=n(905),A=n.n(t),t=n(994),D=n.n(t),t=n(885),j=n.n(t),t=n(906),E=n.n(t),P=n(3453),t=n(56),r=n.n(t),N=n(211),t=n(3452),M=n.n(t),t=n(200),s=n.n(t),t=n(90),d=n.n(t);function o(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)),i}function T(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach(function(e){Object(i.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function a(e){var t,n,p=e.apolloClient,f=e.setIsLoading,g=e.tokopediaClientId,k=e.VISITED,m=e.PROVIDER,b=e.FROM_WIDGET,h=e.xdevice,y=e.pathname,L=e.search,O=e.hash,_=e.swExclude,i=e.googleId,o=(n=Object(c.a)(w.a.mark(function e(t){var n,i,o,a,c,r,s,d,l,u,v;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=C()(4),c={currentUrl:window.location.href,visited:k,provider:m,fromWidget:b},f(!0),e.prev=3,e.next=6,p.mutate({mutation:M.a,variables:{input:{grant_type:"".concat(btoa("extension")).concat(s),social_type:N.a,access_token:t,supported:"true",cotp_ld:D()(c)}},context:{headers:T(T({},S()("login")),{},{server:"go","Accounts-Authorization":"".concat(btoa(g)).concat(s),"X-Device":h})}});case 6:a=e.sent,e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(3),f(!1),Object(P.trackLogin)({provider:m,status:"failed",description:e.t0.message,descriptionCode:""}),e.abrupt("return");case 14:if(r=null===(s=a)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.login_token,s=null!==(s=null==r||null===(i=r.errors)||void 0===i||null===(o=i[0])||void 0===o?void 0:o.message)&&void 0!==s?s:"")return f(!1),Object(P.trackLogin)({provider:m,status:"failed",description:s,descriptionCode:""}),e.abrupt("return");e.next=20;break;case 20:if(d=null!==(d=null==r?void 0:r.sid)&&void 0!==d?d:""){e.next=25;break}return f(!1),Object(P.trackLogin)({provider:m,status:"failed",description:"sid empty",descriptionCode:""}),e.abrupt("return");case 25:if(v=null==r?void 0:r.sq_check,l=null==r?void 0:r.cotp_url,u=null!==(u=null==r?void 0:r.acc_sid)&&void 0!==u?u:"",u=A()(m,{sid:d,sidAccount:u}),!v){e.next=37;break}if(l){e.next=34;break}return f(!1),Object(P.trackLogin)({provider:m,status:"failed",description:"sq invalid",descriptionCode:""}),e.abrupt("return");case 34:return E()(u),window.location.assign(l),e.abrupt("return");case 37:return v={apolloClient:p,fromWidget:b,provider:m,pathname:y,search:L,hash:O,visited:k,outsides:_,onGetUserError:function(e){var e=e.error;f(!1),e=e?(null==e?void 0:e.message)||String(e):"Error getting user data",Object(P.trackLogin)({provider:m,status:"failed",description:e,descriptionCode:""})},onSuccess:function(){f(!1),Object(P.trackLogin)({provider:m,status:"success",description:"",descriptionCode:""}),window.location.reload()}},e.next=40,j()(v);case 40:case"end":return e.stop()}},e,null,[[3,9]])})),function(e){return n.apply(this,arguments)}),a=(t=Object(c.a)(w.a.mark(function e(t){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Object(P.trackLogin)({provider:m,status:"click",description:"",descriptionCode:""}),o(t.credential);case 2:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)});(e=new Date).setMinutes(e.getMinutes()+5),d()(N.c,!0,e),s()({src:"https://accounts.google.com/gsi/client",async:!0,defer:!0,callback:function(){google.accounts&&(google.accounts.id.initialize({client_id:i,callback:a,auto_select:!Boolean(r()(N.b))}),google.accounts.id.prompt(function(e){e.isSkippedMoment()&&Object(P.trackLogin)({provider:m,status:"close",description:"",descriptionCode:""})}))}})}},905:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){switch(e){case"email":return i("email",t);case"phone":return function(e){var t=0<arguments.length&&void 0!==e?e:{},n=t.sid,e=t.keyAccess,t=t.sidAccount;if(!n||!e)throw new TypeError("To get full SID of login by phone, you must pass SID and access key. Passed SID: ".concat(n,". Passed access key: ").concat(e,"."));return t?"".concat(n," ").concat(e," ").concat(t):"".concat(n," ").concat(e)}(t);case"facebook":return i("facebook",t);case"google":return i("google",t);case"yolo":return i("yolo",t);default:throw new TypeError("".concat(e," is not valid provider name."))}};var i=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.sid,t=t.sidAccount;if(!n)throw new TypeError("To get full SID of login by ".concat(e,", you must pass SID. Passed SID: ").concat(n,"."));return t?"".concat(n," nill ").concat(t):n}},906:function(e,t,n){"use strict";var i=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;(0,a.default)(e)&&((t=new Date).setMinutes(t.getMinutes()+5),(0,o.default)(c.AFTER_SQ_FULL_SID_STORAGE_KEY,e,t))};var o=i(n(90)),a=i(n(1117)),c=n(149)},994:function(e,t,n){"use strict";var i=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.currentUrl,n=e.visited,i=e.provider,o=e.fromWidget,a=void 0!==o&&o,c=new URL(t),r=c.pathname,e=c.search,o=c.hash,t=new URL("/after_sq",t),n=(0,d.default)({pathname:r,search:e,hash:o,visited:n,provider:i,fromWidget:a});t.searchParams.set("ld",n);c=c.searchParams.get("fromWidget");return(a||c)&&t.searchParams.set("fromWidget",1),(0,s.default)(i)&&t.searchParams.set("via",i),t.toString()};var s=i(n(1115)),d=i(n(1116))}}]);
