var Base,User,Page,App;function generate(t){var e="",n=new Array("b","c","d","f","g","h","j","k","l","m","n","p","r","s","t","v","w","x","y","z"),r=new Array("a","e","i","o","u");for(i=0;i<t/2;i++){var s=Math.ceil(1e3*Math.random())%20,o=Math.ceil(1e3*Math.random())%5;e+=n[s]+r[o]}return e}Base=Class.create({_timeoutCounter:0,_timeoutEvents:[],timeout:function(t,e){this._timeoutEvents[this._timeoutCounter]=setTimeout(t.bind(this),1e3*e),this._timeoutCounter+=1},destroy:function(){this._timeoutEvents.each(function(t){clearTimeout(t)}.bind(this))},getBody:function(){return $$("body")[0]},css:function(t){this.getBody().previous().insert('<style type="text/css">'+t+"</style>")},_v:function(t){switch(t.toLowerCase()){case"fqdn":return"uploaded.to";case"fqdns":return"ul.to"}},go:function(t,e){void 0!==e&&(t=top.location.href+t),top.location.href=t}}),User=Class.create(Base,{initialize:function(t){this.data=t,this.data.contact=null,this.data.traffic={hybrid:10737418240,download:214748364800,download_daily:53687091200,download_max:858993459200},this.data.traffic.sum=this.data.traffic.hybrid+this.data.traffic.download,this.data.space={},this.data.space.membership=21474836480,this.data.space.reward=5368709120,this.data.space.sum=this.data.space.membership+this.data.space.reward},onRevLoad:function(){var t=oBase._getStorage("contact");this.data.contact=t},get:function(t){return Object.isUndefined(this.data[t])?null:this.data[t]},set:function(t,e){return this.data[t]=e}}),Page=Class.create(Base,{_uri:"",initialize:function(t){t=Object.extend({header:!!$("header"),history:!0,resize:!0},arguments[0]||{});t.resize&&Event.observe(document.onresize?document:window,"resize",this.resize.bind(this)),t.header&&this.header("init"),"object"==typeof unFocus&&t.history&&(unFocus.History.addEventListener("historyChange",this.history.bind(this)),this.history(unFocus.History.getCurrent()))},history:function(t){this._uri=t},resize:function(){document.viewport.getDimensions(),document.viewport.getScrollOffsets()}}),App=Class.create(Page,{_bgOffset:0,header:function(t){"init"===t&&(this._header=$("header"),$("app").observe("mousemove",function(t){var e=Event.pointerY(t),i=document.viewport.getHeight()/2,t=(e/i-1).abs();i<e&&(t=0),this._header.select("div.left, div.right").invoke("setOpacity",t)}.bind(this)))},resize:function(t){var e,t=Object.extend({body:$$("body")[0],bg:$("senv"),center:$("center"),height:{min:500,max:700,offset:196}},arguments[0]||{}),i=document.viewport.getDimensions();document.viewport.getScrollOffsets();i.height<t.height.max?(e=i.height>t.height.min?-1*(i.height-(t.height.min+t.height.offset)):t.height.offset,[t.body,t.bg].invoke("setStyle","background-position:center -"+(e-this._bgOffset)+"px")):[t.body,t.bg].invoke("setStyle","background-position:center "+this._bgOffset+"px"),t.center&&(i.height<t.height.max&&i.height>t.height.min?t.center.setStyle("margin-top:"+(i.height-t.height.min+this._bgOffset)+"px"):i.height>t.height.max?t.center.setStyle("margin-top:"+(t.height.offset+this._bgOffset)+"px"):i.height<t.height.min&&t.center.setStyle("margin-top:"+(0+this._bgOffset)+"px"))}}),Object.extend(Event,{wheel:function(t){var e=0;return(t=t||window.event).wheelDelta?e=t.wheelDelta/120:t.detail&&(e=-t.detail/3),Math.round(e)}}),Element.prototype.appearIE=function(t){Prototype.Browser.IE?this.show():this.appear(t)},Element.prototype.fadeIE=function(t){Prototype.Browser.IE?this.hide():this.fade(t)},Number.prototype.toSizeString=function(t){"number"==typeof t&&(t={decimals:t});var t=Object.extend({decimals:2,labels:["KiB","MiB","GiB","TiB"]},arguments[0]||{}),e=this;if(e<=1024)return e.number(t.decimals)+" "+t.labels[0];for(var i=-1;1024<e;)e/=1024,i++;return e.number(t.decimals)+" "+t.labels[i]},Number.prototype.number=function(t,e,i){var n,t=isNaN(t=Math.abs(t))?2:t,e=null==e?",":e,i=null==i?".":i,r=this<0?"-":"",s=parseInt(n=Math.abs(+this||0).toFixed(t))+"",o=3<(o=s.length)?o%3:0;return r+(o?s.substr(0,o)+i:"")+s.substr(o).replace(/(\d{3})(?=\d)/g,"$1"+i)+(t?e+Math.abs(n-s).toFixed(t).slice(2):"")},String.prototype.toURL=function(){return encodeURI(this.gsub(" ","+"))},String.prototype.fromURL=function(){return decodeURI(this.gsub("+"," "))},String.prototype.isMail=function(){return/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(this)},String.prototype.parseDate=function(){var t=new Date,e=String(this).split(/[- :]/);return t.setFullYear(e[0]),t.setMonth(e[1]-1),t.setDate(e[2]),t.setHours(e[3]),t.setMinutes(e[4]),t.setSeconds(e[5]),t.setMilliseconds(0),t},Array.prototype.numerus=function(t){for(var e=t;void 0===this[t];)t--;return this[t].gsub("%n",e)},Array.prototype.shuffle=function(){for(var t,e,i=0;i<this.length;i++)e=Math.floor(Math.random()*this.length),t=this[i],this[i]=this[e],this[e]=t;return this},Effect.Transitions.Elastic=function(t){return-1*Math.pow(4,-8*t)*Math.sin((6*t-1)*(2*Math.PI)/2)+1},Effect.Transitions.BouncePast=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?2-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?2-(7.5625*(t-=2.25/2.75)*t+.9375):2-(7.5625*(t-=2.625/2.75)*t+.984375)},Element.prototype.rotate=function(t,e){var i=$H(Prototype.Browser).find(function(t){return 1==t[1]})[0],n=$(this);if("IE"==i){var r=n.degree?+n.degree:0;new Effect.Tween(n,r,r+t,e,function(t){var e=(this.degree=t)*(Math.PI/180),t=Math.cos(e),e=Math.sin(e);this.setStyle("filter: progid:DXImageTransform.Microsoft.Matrix(SizingMethod='auto expand', M11="+t+", M12="+-e+", M21="+e+", M22="+t+")")})}else{switch(i){case"Gecko":var s="-moz-transform";break;case"WebKit":s="-webkit-transform";break;case"Opera":s="-o-transform";break;default:s=!1}s&&(r=(i=n.getStyle(s))?+i.gsub(/[\(\)a-zA-Z:;\s]+/,""):0,new Effect.Tween(n,r,r+t,e,function(t){this.setStyle(s+": rotate("+t+"deg);")}))}return n},Element.prototype.cloud=function(i){var i=Object.extend({duration:2,divider:3},arguments[1]||{}),e=this,t=e.innerHTML.split(""),n=!1,r=i.duration/i.divider;return e.update().show(),t.each(function(t){return"<"==t?(e.insert("<br />"),n=!0):">"==t?n=!1:void(n||(e.insert("<span>"+t+"</span>"),t=Math.random()*(i.duration*(i.divider/10)),e.select("span").last().setOpacity(0).appear({delay:t,duration:r})))}.bind(this)),function(t){i.duration=.5*i.duration,e.select("span").each(function(t){var e=Math.random()*(i.duration*(i.divider/10));t.fade({to:.01,delay:e,duration:r})}.bind(this)),setTimeout(function(){Object.isFunction(t)&&t()}.bind(this),1e3*i.duration)}.bind(this)};
