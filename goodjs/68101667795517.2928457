(window.webpackJsonp=window.webpackJsonp||[]).push([[67,7,82],{1008:function(e,t,r){var c=r(1009),n=r(854),l=r(967),h=r(1010),p=r(155),f=r(966);e.exports=function(u){return n(function(i){var a=i.length,e=a,t=c.prototype.thru;for(u&&i.reverse();e--;){var r=i[e];if("function"!=typeof r)throw new TypeError("Expected a function");t&&!o&&"wrapper"==h(r)&&(o=new c([],!0))}for(e=o?e:a;++e<a;)var r=i[e],n=h(r),s="wrapper"==n?l(r):void 0,o=s&&f(s[0])&&424==s[1]&&!s[4].length&&1==s[9]?o[h(s[0])].apply(o,s[3]):1==r.length&&f(r)?o[n]():o.thru(r);return function(){var e=arguments,t=e[0];if(o&&1==e.length&&p(t))return o.plant(t).value();for(var r=0,n=a?i[r].apply(this,e):t;++r<a;)n=i[r].call(this,n);return n}})}},1009:function(e,t){e.exports=function(){}},1010:function(e,t){e.exports=function(){return""}},1100:function(n,e,i){"use strict";!function(e,t,r){"undefined"==typeof Promise&&i(817).polyfill(),void 0===e&&((t||window).Buffer=i(360).Buffer),void 0===r&&((t||window).process=i(362)),r.version||(r.version="");r=i(793);n.exports={JWA:i(803),JWE:i(809),JWK:i(772),JWS:r,util:i(759),parse:i(952),canYouSee:r.createVerify}}.call(this,i(360).Buffer,i(133),i(362))},1216:function(e,t,r){var n=r(968);e.exports=function(e,t,r){return null==e?e:n(e,t,r)}},1217:function(e,t,r){var n=r(853);e.exports=function(e){return n(e,5)}},1218:function(e,t,r){r=r(1008)();e.exports=r},1235:function(e,t,r){"use strict";r.r(t);var n=r(3),i=r.n(n),a=r(9),s=(r(33),r(93)),o=r.n(s),u=r(19),c=r.n(u),l=r(2),h=r.n(l),n=r(8),p=r.n(n),s=r(10),f=r.n(s),u=r(13),l=r.n(u),n=r(0),d=r.n(n),s=r(48),u=r(69),y=r(973),n=r(21),g=r.n(n),n=r(811),v=r.n(n),m=r(1099),C=r(852);function E(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function b(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?E(Object(r),!0).forEach(function(e){p()(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var S={subsPackagesData:function(){return{remote:(r=h()(d.a.mark(function e(t,r){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(g.a.userToken.isUserLoggedIn())return Object(C.a)(r),e.abrupt("return",v.a.getPackDetails(b(b({},r),{},{verbosity:2}),"UMSV2"));e.next=4;break;case 4:return e.abrupt("return",Object(m.a)(!1));case 5:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)}),local:function(){return null},success:y.a.getSubscriptionPackagesSuccess,error:y.a.getSubsPackagesFailure};var r}},T=r(7),I=r(41),A=r(23),w=r(4),k=r(174),B=r(27),_=r(18),P=r(62),N=r(1),R=r(863);function O(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function F(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?O(Object(r),!0).forEach(function(e){p()(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function L(e,t){return 0<e.length?e[0]:!(null==t||!t.length)&&t.reduce(function(e,t){return e.expiry_date>=t.expiry_date?e:t})}function U(e){var t;return e?{Subs_start_date:e.start_date,Subs_end_date:e.expiry_date,Plan_duration:null===(t=e.meta)||void 0===t?void 0:t.duration_type,Plan_price:null===(t=e.meta)||void 0===t?void 0:t.advertise_invoice,Plan_currency:null===(t=e.meta)||void 0===t?void 0:t.currency_symbol,days_to_expire:P.b.getDayDiff(e.expiry_date,Date.now())}:{}}var D,x={isSubscribed:!1,canUpgradePack:!1},V=new u.a({category:"SUBSCRIPTION",className:"getSubscriptionPacks"}),l=(l()(j,[{key:"resetStoreState",value:function(){this.packDetails={loading:!0,apiQueued:!1},this.userSubsInfo=F({},x)}},{key:"postLogout",value:function(){this.resetStoreState(),I.a.resetSubsNudgeInfo(),this.getSubsPacks()}},{key:"setInitialState",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.options=e;var t=I.a.getSubsNudgeInfo();e&&e.refreshOnMount?this.getSubsPacks():t?(this.userSubsInfo=t,this.packDetails.subsNudgeLoading=!1,t=this.userSubsInfo.upgradeConfig,B.a.setSubsribedPack({active_subs:t})):T.a.isUserLoggedIn()?this.getSubsPacks():this.packDetails.subsNudgeLoading=!1}},{key:"setUserInfo",value:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=t.active_subs,n=void 0===r?[]:r,i=t.expired_subs,a=void 0===i?[]:i,s=t.packs,o=!!n.length,u=o&&!!this.shouldUpgradePlan(n[0]),c=o&&!!this.shouldShowUpgradeNudge(u,n[0]),r=n.map(function(e){var t=e;return t.upgradePack=T.a.checkUpgradePackFamily(e,s),t}),i="";T.a.isUserLoggedIn()?(e=void 0===(e=(n=(null===(e=n[0])||void 0===e?void 0:e.meta)||{}).subscription_pack_family)?N.f.PLAN_TYPES.FREE:e,i=n.duration_type):e=N.f.PLAN_TYPES.ANONYMOUS,this.userSubsInfo={isSubscribed:o,canUpgradePack:u,upgradeConfig:r,upgradeConfigExpired:a,showHeaderUpgradeNudge:c,activePackFamily:e,activePackDuration:i},I.a.setSubsNudgeInfo(this.userSubsInfo),y.a.postDataRefresh.defer(t)}},{key:"shouldUpgradePlan",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.payment_type,r=e.meta,e=(r=void 0===r?{}:r).subscription_origin;return r.upgrade_to&&I.a.isActiveSubSupportedForUpgrade(t,e)}},{key:"shouldShowUpgradeNudge",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=w.a.configuration.SUBS_NUDGE,r=(t=void 0===t?{}:t).PACK_LIST,t=void 0===r?[]:r,r=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).meta,n=(r=void 0===r?{}:r).billing_frequency,i=r.billing_interval_unit,a=r.subscription_pack_family;return e&&t.find(function(e){return a===e.family&&n===e.frequency&&i===e.interval})}},{key:"getSubsPacks",value:(D=h()(d.a.mark(function e(t){var r,n,i;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return I.a.setSubsNudgeInfo(null),r=this.options||{},r=r.packId,e.next=4,this.cachePromise();case 4:if(n=e.sent,this.packDetails.apiQueued)return e.abrupt("return");e.next=7;break;case 7:if(n){e.next=10;break}return y.a.postDataRefresh.defer(this.packDetails.packsInfo),e.abrupt("return");case 10:if(this.packDetails.loading=!0,this.packDetails.subsNudgeLoading=!0,i=t){e.next=17;break}return e.next=16,T.a.getUserToken();case 16:i=e.sent;case 17:this.getInstance().subsPackagesData({userId:i,packId:r}),this.packDetails.apiQueued=!0;case 19:case"end":return e.stop()}},e,this)})),function(e){return D.apply(this,arguments)})},{key:"getSubsPackagesFailure",value:function(e){this.resetStoreState(),I.a.resetSubsNudgeInfo(),this.packDetails.error=!0,this.packDetails.packsInfo=null;var t=e.errorType;k.a.isServerError(t)&&(t=Object(_.d)("web__err__subs__USER_SUBSCRIPTION_ERROR"),A.a.showSnackbar.defer({text:t,snackbarClass:"get-packs-error"}),this.packDetails.errorInfo=F(F({},e),{},{packError:{isServerFailure:!0}})),this.packDetails.loading=!1,this.packDetails.subsNudgeLoading=!1,this.packDetails.apiQueued=!1}},{key:"getSubscriptionPackagesSuccess",value:function(e){this.packDetails.error=!1;var t=(this.packDetails.packsInfo=e).active_subs,r=void 0===t?[]:t,n=e.expired_subs,i=void 0===n?[]:n,t=e.packs;0===t.length&&V.error("empty pack response","get packs api",{hID:T.a.getHID()});n=c()(r,1)[0],n=void 0===n?{}:n;n.upgradePack=r.length?T.a.checkUpgradePackFamily(n,t):{},this.packDetails.currentSubscription=n,this.setUserInfo(e),B.a.setSubsribedPack(e),this.packDetails.loading=!1,this.packDetails.subsNudgeLoading=!1,this.lastRefreshedAt=P.b.getCurrentTimestamp(),this.packDetails.apiQueued=!1;i=Object(R.b)(L,U)(r,i);B.a.updateSuperProps(i)}}]),j),K=s.a.createStore(l,"subsDetailsStore"),l=function(e){var t=e.children,r=e.options;return Object(a.useEffect)(function(){y.a.setInitialState.defer(r)},[]),i()(o.a,{stores:{subsDetailsStore:K},actions:{SubsDetailsActions:y.a}},void 0,t)};function j(){var i=this;f()(this,j),this.cachePromise=function(){return new Promise(function(e){var t=w.a.configuration.SUBS_NUDGE,r=(t=void 0===t?{}:t).REFRESH_INTERVAL,n=i.options||{},t=n.enableCaching,n=n.refreshAfterInterval,n=void 0===n?void 0===r?3:r:n;(void 0===t||t)&&i.lastRefreshedAt&&(t=P.b.getCurrentTimestamp(),P.b.getTimeStampDiffInSec(i.lastRefreshedAt,t)<n&&e(!1)),e(!0)})},this.bindActions(y.a),this.exportAsync(S),this.options={},this.resetStoreState(),this.bindAction(A.a.userInitSuccess,this.getSubsPacks),this.bindAction(A.a.logOutSuccess,this.postLogout),this.lastRefreshedAt=null}l.defaultProps={options:{}},t.default=l},756:function(e,t){e.exports={options:{usePureJavaScript:!1}}},757:function(w,e,k){!function(e,t,r,n){var i,a,s,o,u,c,l=k(756),h=k(888),p=w.exports=l.util=l.util||{};function f(e){if(8!==e&&16!==e&&24!==e&&32!==e)throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}function d(e){if(this.data="",this.read=0,"string"==typeof e)this.data=e;else if(p.isArrayBuffer(e)||p.isArrayBufferView(e))if(void 0!==n&&e instanceof n)this.data=e.toString("binary");else{var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch(e){for(var r=0;r<t.length;++r)this.putByte(t[r])}}else(e instanceof d||"object"==typeof e&&"string"==typeof e.data&&"number"==typeof e.read)&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}void 0!==e&&e.nextTick&&!e.browser?(p.nextTick=e.nextTick,p.setImmediate="function"==typeof t?t:p.nextTick):"function"==typeof t?(p.setImmediate=function(){return t.apply(void 0,arguments)},p.nextTick=function(e){return t(e)}):(p.setImmediate=function(e){setTimeout(e,0)},"undefined"!=typeof window&&"function"==typeof window.postMessage&&(i="forge.setImmediate",u=[],p.setImmediate=function(e){u.push(e),1===u.length&&window.postMessage(i,"*")},window.addEventListener("message",function(e){e.source===window&&e.data===i&&(e.stopPropagation(),e=u.slice(),u.length=0,e.forEach(function(e){e()}))},!0)),"undefined"!=typeof MutationObserver&&(a=Date.now(),s=!0,o=document.createElement("div"),u=[],new MutationObserver(function(){var e=u.slice();u.length=0,e.forEach(function(e){e()})}).observe(o,{attributes:!0}),c=p.setImmediate,p.setImmediate=function(e){15<Date.now()-a?(a=Date.now(),c(e)):(u.push(e),1===u.length&&o.setAttribute("a",s=!s))}),p.nextTick=p.setImmediate),p.isNodejs=void 0!==e&&e.versions&&e.versions.node,p.globalScope=p.isNodejs?r:"undefined"==typeof self?window:self,p.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},p.isArrayBuffer=function(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer},p.isArrayBufferView=function(e){return e&&p.isArrayBuffer(e.buffer)&&void 0!==e.byteLength},p.ByteBuffer=d,p.ByteStringBuffer=d,p.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,4096<this._constructedStringLength&&(this.data.substr(0,1),this._constructedStringLength=0)},p.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},p.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},p.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))},p.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var r=this.data;0<t;)1&t&&(r+=e),0<(t>>>=1)&&(e+=e);return this.data=r,this._optimizeConstructedString(t),this},p.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this},p.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(p.encodeUtf8(e))},p.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},p.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},p.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},p.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255))},p.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))},p.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))},p.ByteStringBuffer.prototype.putInt=function(e,t){f(t);for(var r="";t-=8,r+=String.fromCharCode(e>>t&255),0<t;);return this.putBytes(r)},p.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)},p.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())},p.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},p.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e},p.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e},p.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},p.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e},p.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e},p.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e},p.ByteStringBuffer.prototype.getInt=function(e){f(e);for(var t=0;t=(t<<8)+this.data.charCodeAt(this.read++),0<(e-=8););return t},p.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),e=2<<e-2;return e<=t&&(t-=e<<1),t},p.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},p.ByteStringBuffer.prototype.bytes=function(e){return void 0===e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},p.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)},p.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this},p.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},p.ByteStringBuffer.prototype.copy=function(){var e=p.createBuffer(this.data);return e.read=this.read,e},p.ByteStringBuffer.prototype.compact=function(){return 0<this.read&&(this.data=this.data.slice(this.read),this.read=0),this},p.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},p.ByteStringBuffer.prototype.truncate=function(e){e=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,e),this.read=0,this},p.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e},p.ByteStringBuffer.prototype.toString=function(){return p.decodeUtf8(this.bytes())},p.DataBuffer=function(e,t){this.read=(t=t||{}).readOffset||0,this.growSize=t.growSize||1024;var r=p.isArrayBuffer(e),n=p.isArrayBufferView(e);if(r||n)return this.data=r?new DataView(e):new DataView(e.buffer,e.byteOffset,e.byteLength),void(this.write="writeOffset"in t?t.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!=e&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset)},p.DataBuffer.prototype.length=function(){return this.write-this.read},p.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},p.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);e=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),t=new Uint8Array(this.length()+t);return t.set(e),this.data=new DataView(t.buffer),this},p.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this},p.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var r=0;r<t;++r)this.data.setUint8(e);return this},p.DataBuffer.prototype.putBytes=function(e,t){if(p.isArrayBufferView(e)){var r=(n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)).byteLength-n.byteOffset;return this.accommodate(r),new Uint8Array(this.data.buffer,this.write).set(n),this.write+=r,this}if(p.isArrayBuffer(e)){var n=new Uint8Array(e);return this.accommodate(n.byteLength),new Uint8Array(this.data.buffer).set(n,this.write),this.write+=n.byteLength,this}if(e instanceof p.DataBuffer||"object"==typeof e&&"number"==typeof e.read&&"number"==typeof e.write&&p.isArrayBufferView(e.data))return n=new Uint8Array(e.data.byteLength,e.read,e.length()),this.accommodate(n.byteLength),new Uint8Array(e.data.byteLength,this.write).set(n),this.write+=n.byteLength,this;if(e instanceof p.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary","string"!=typeof e)throw Error("Invalid parameter: "+e);var i;if("hex"===t)return this.accommodate(Math.ceil(e.length/2)),i=new Uint8Array(this.data.buffer,this.write),this.write+=p.binary.hex.decode(e,i,this.write),this;if("base64"===t)return this.accommodate(3*Math.ceil(e.length/4)),i=new Uint8Array(this.data.buffer,this.write),this.write+=p.binary.base64.decode(e,i,this.write),this;if("utf8"===t&&(e=p.encodeUtf8(e),t="binary"),"binary"===t||"raw"===t)return this.accommodate(e.length),i=new Uint8Array(this.data.buffer,this.write),this.write+=p.binary.raw.decode(i),this;if("utf16"===t)return this.accommodate(2*e.length),i=new Uint16Array(this.data.buffer,this.write),this.write+=p.text.utf16.encode(i),this;throw new Error("Invalid encoding: "+t)},p.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this},p.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")},p.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this},p.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this},p.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this},p.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this},p.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this},p.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this},p.DataBuffer.prototype.putInt=function(e,t){for(f(t),this.accommodate(t/8);t-=8,this.data.setInt8(this.write++,e>>t&255),0<t;);return this},p.DataBuffer.prototype.putSignedInt=function(e,t){return f(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)},p.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},p.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e},p.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e},p.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e},p.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e},p.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e},p.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e},p.DataBuffer.prototype.getInt=function(e){f(e);for(var t=0;t=(t<<8)+this.data.getInt8(this.read++),0<(e-=8););return t},p.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),e=2<<e-2;return e<=t&&(t-=e<<1),t},p.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},p.DataBuffer.prototype.bytes=function(e){return void 0===e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},p.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)},p.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this},p.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},p.DataBuffer.prototype.copy=function(){return new p.DataBuffer(this)},p.DataBuffer.prototype.compact=function(){var e,t;return 0<this.read&&(e=new Uint8Array(this.data.buffer,this.read),(t=new Uint8Array(e.byteLength)).set(e),this.data=new DataView(t),this.write-=this.read,this.read=0),this},p.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},p.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this},p.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var r=this.data.getUint8(t);r<16&&(e+="0"),e+=r.toString(16)}return e},p.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if("binary"===(e=e||"utf8")||"raw"===e)return p.binary.raw.encode(t);if("hex"===e)return p.binary.hex.encode(t);if("base64"===e)return p.binary.base64.encode(t);if("utf8"===e)return p.text.utf8.decode(t);if("utf16"===e)return p.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)},p.createBuffer=function(e,t){return t=t||"raw",void 0!==e&&"utf8"===t&&(e=p.encodeUtf8(e)),new p.ByteBuffer(e)},p.fillString=function(e,t){for(var r="";0<t;)1&t&&(r+=e),0<(t>>>=1)&&(e+=e);return r},p.xorBytes=function(e,t,r){for(var n,i="",a="",s=0,o=0;0<r;--r,++s)n=e.charCodeAt(s)^t.charCodeAt(s),10<=o&&(i+=a,a="",o=0),a+=String.fromCharCode(n),++o;return i+a},p.hexToBytes=function(e){var t="",r=0;for(!0&e.length&&(r=1,t+=String.fromCharCode(parseInt(e[0],16)));r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t},p.bytesToHex=function(e){return p.createBuffer(e).toHex()},p.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)};var y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",g=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],v="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";p.encode64=function(e,t){for(var r,n,i,a="",s="",o=0;o<e.length;)r=e.charCodeAt(o++),n=e.charCodeAt(o++),i=e.charCodeAt(o++),a+=y.charAt(r>>2),a+=y.charAt((3&r)<<4|n>>4),isNaN(n)?a+="==":(a+=y.charAt((15&n)<<2|i>>6),a+=isNaN(i)?"=":y.charAt(63&i)),t&&a.length>t&&(s+=a.substr(0,t)+"\r\n",a=a.substr(t));return s+a},p.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t,r,n,i,a="",s=0;s<e.length;)t=g[e.charCodeAt(s++)-43],r=g[e.charCodeAt(s++)-43],n=g[e.charCodeAt(s++)-43],i=g[e.charCodeAt(s++)-43],a+=String.fromCharCode(t<<2|r>>4),64!==n&&(a+=String.fromCharCode((15&r)<<4|n>>2),64!==i&&(a+=String.fromCharCode((3&n)<<6|i)));return a},p.encodeUtf8=function(e){return unescape(encodeURIComponent(e))},p.decodeUtf8=function(e){return decodeURIComponent(escape(e))},p.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:h.encode,decode:h.decode}},p.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)},p.binary.raw.decode=function(e,t,r){for(var n=(n=t)||new Uint8Array(e.length),i=r=r||0,a=0;a<e.length;++a)n[i++]=e.charCodeAt(a);return t?i-r:n},p.binary.hex.encode=p.bytesToHex,p.binary.hex.decode=function(e,t,r){var n=(n=t)||new Uint8Array(Math.ceil(e.length/2)),i=0,a=r=r||0;for(1&e.length&&(i=1,n[a++]=parseInt(e[0],16));i<e.length;i+=2)n[a++]=parseInt(e.substr(i,2),16);return t?a-r:n},p.binary.base64.encode=function(e,t){for(var r,n,i,a="",s="",o=0;o<e.byteLength;)r=e[o++],n=e[o++],i=e[o++],a+=y.charAt(r>>2),a+=y.charAt((3&r)<<4|n>>4),isNaN(n)?a+="==":(a+=y.charAt((15&n)<<2|i>>6),a+=isNaN(i)?"=":y.charAt(63&i)),t&&a.length>t&&(s+=a.substr(0,t)+"\r\n",a=a.substr(t));return s+a},p.binary.base64.decode=function(e,t,r){var n,i,a,s,o=(o=t)||new Uint8Array(3*Math.ceil(e.length/4));e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var u=0,c=r=r||0;u<e.length;)n=g[e.charCodeAt(u++)-43],i=g[e.charCodeAt(u++)-43],a=g[e.charCodeAt(u++)-43],s=g[e.charCodeAt(u++)-43],o[c++]=n<<2|i>>4,64!==a&&(o[c++]=(15&i)<<4|a>>2,64!==s&&(o[c++]=(3&a)<<6|s));return t?c-r:o.subarray(0,c)},p.binary.base58.encode=function(e,t){return p.binary.baseN.encode(e,v,t)},p.binary.base58.decode=function(e,t){return p.binary.baseN.decode(e,v,t)},p.text={utf8:{},utf16:{}},p.text.utf8.encode=function(e,t,r){e=p.encodeUtf8(e);for(var n=(n=t)||new Uint8Array(e.length),i=r=r||0,a=0;a<e.length;++a)n[i++]=e.charCodeAt(a);return t?i-r:n},p.text.utf8.decode=function(e){return p.decodeUtf8(String.fromCharCode.apply(null,e))},p.text.utf16.encode=function(e,t,r){for(var n=(n=t)||new Uint8Array(2*e.length),i=new Uint16Array(n.buffer),a=r=r||0,s=r,o=0;o<e.length;++o)i[s++]=e.charCodeAt(o),a+=2;return t?a-r:n},p.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))},p.deflate=function(e,t,r){return t=p.decode64(e.deflate(p.encode64(t)).rval),r&&(r=2,32&t.charCodeAt(1)&&(r=6),t=t.substring(r,t.length-4)),t},p.inflate=function(e,t,r){t=e.inflate(p.encode64(t)).rval;return null===t?null:p.decode64(t)};function m(e,t,r){if(!e)throw new Error("WebStorage not available.");if(void 0!==(t=null===r?e.removeItem(t):(r=p.encode64(JSON.stringify(r)),e.setItem(t,r)))&&!0!==t.rval){r=new Error(t.error.message);throw r.id=t.error.id,r.name=t.error.name,r}}function C(e,t){if(!e)throw new Error("WebStorage not available.");if(t=e.getItem(t),e.init)if(null===t.rval){if(t.error){e=new Error(t.error.message);throw e.id=t.error.id,e.name=t.error.name,e}t=null}else t=t.rval;return t=null!==t?JSON.parse(p.decode64(t)):t}function E(e,t,r,n){var i=C(e,t);(i=null===i?{}:i)[r]=n,m(e,t,i)}function b(e,t,r){return t=null!==(t=C(e,t))?r in t?t[r]:null:t}function S(e,t,r){var n=C(e,t);if(null!==n&&r in n){delete n[r];var i,a=!0;for(i in n){a=!1;break}m(e,t,n=a?null:n)}}function T(e,t){m(e,t,null)}function I(e,t,r){var n,i,a=null,s=!1,o=null;for(i in r=void 0===r?["web","flash"]:r){n=r[i];try{if("flash"===n||"both"===n){if(null===t[0])throw new Error("Flash local storage not available.");a=e.apply(this,t),s="flash"===n}"web"!==n&&"both"!==n||(t[0]=localStorage,a=e.apply(this,t),s=!0)}catch(e){o=e}if(s)break}if(!s)throw o;return a}p.setItem=function(e,t,r,n,i){I(E,arguments,i)},p.getItem=function(e,t,r,n){return I(b,arguments,n)},p.removeItem=function(e,t,r,n){I(S,arguments,n)},p.clearItems=function(e,t,r){I(T,arguments,r)},p.parseUrl=function(e){var t=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;t.lastIndex=0;t=t.exec(e),t=null===t?null:{full:e,scheme:t[1],host:t[2],port:t[3],path:t[4]};return t&&(t.fullHost=t.host,t.port?(80!==t.port&&"http"===t.scheme||443!==t.port&&"https"===t.scheme)&&(t.fullHost+=":"+t.port):"http"===t.scheme?t.port=80:"https"===t.scheme&&(t.port=443),t.full=t.scheme+"://"+t.fullHost),t};var A=null;p.getQueryVariables=function(e){function t(e){for(var t={},r=e.split("&"),n=0;n<r.length;n++){var i,a=r[n].indexOf("="),a=0<a?(i=r[n].substring(0,a),r[n].substring(a+1)):(i=r[n],null);i in t||(t[i]=[]),i in Object.prototype||null===a||t[i].push(unescape(a))}return t}e=void 0===e?A=null===A?"undefined"!=typeof window&&window.location&&window.location.search?t(window.location.search.substring(1)):{}:A:t(e);return e},p.parseFragment=function(e){var t=e,r="",n=e.indexOf("?");0<n&&(t=e.substring(0,n),r=e.substring(n+1));n=t.split("/");return 0<n.length&&""===n[0]&&n.shift(),{pathString:t,queryString:r,path:n,query:""===r?{}:p.getQueryVariables(r)}},p.makeRequest=function(e){var n=p.parseFragment(e),r={path:n.pathString,query:n.queryString,getPath:function(e){return void 0===e?n.path:n.path[e]},getQuery:function(e,t){var r;return void 0===e?r=n.query:(r=n.query[e])&&void 0!==t&&(r=r[t]),r},getQueryLast:function(e,t){e=r.getQuery(e);return e?e[e.length-1]:t}};return r},p.makeLink=function(e,t,r){e=jQuery.isArray(e)?e.join("/"):e;t=jQuery.param(t||{});return e+(0<t.length?"?"+t:"")+(0<(r=r||"").length?"#"+r:"")},p.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},p.format=function(e){for(var t,r,n=/%./g,i=0,a=[],s=0;t=n.exec(e);){0<(r=e.substring(s,n.lastIndex-2)).length&&a.push(r);var s=n.lastIndex,o=t[0][1];switch(o){case"s":case"o":i<arguments.length?a.push(arguments[1+i++]):a.push("<?>");break;case"%":a.push("%");break;default:a.push("<%"+o+"?>")}}return a.push(e.substring(s)),a.join("")},p.formatNumber=function(e,t,r,n){var i=e,a=isNaN(t=Math.abs(t))?2:t,s=void 0===r?",":r,e=void 0===n?".":n,t=i<0?"-":"",r=parseInt(i=Math.abs(+i||0).toFixed(a),10)+"",n=3<r.length?r.length%3:0;return t+(n?r.substr(0,n)+e:"")+r.substr(n).replace(/(\d{3})(?=\d)/g,"$1"+e)+(a?s+Math.abs(i-r).toFixed(a).slice(2):"")},p.formatSize=function(e){return 1073741824<=e?p.formatNumber(e/1073741824,2,".","")+" GiB":1048576<=e?p.formatNumber(e/1048576,2,".","")+" MiB":1024<=e?p.formatNumber(e/1024,0)+" KiB":p.formatNumber(e,0)+" bytes"},p.bytesFromIP=function(e){return-1!==e.indexOf(".")?p.bytesFromIPv4(e):-1!==e.indexOf(":")?p.bytesFromIPv6(e):null},p.bytesFromIPv4=function(e){if(4!==(e=e.split(".")).length)return null;for(var t=p.createBuffer(),r=0;r<e.length;++r){var n=parseInt(e[r],10);if(isNaN(n))return null;t.putByte(n)}return t.getBytes()},p.bytesFromIPv6=function(e){for(var t,r=0,n=2*(8-(e=e.split(":").filter(function(e){return 0===e.length&&++r,!0})).length+r),i=p.createBuffer(),a=0;a<8;++a)e[a]&&0!==e[a].length?((t=p.hexToBytes(e[a])).length<2&&i.putByte(0),i.putBytes(t)):(i.fillWithByte(0,n),n=0);return i.getBytes()},p.bytesToIP=function(e){return 4===e.length?p.bytesToIPv4(e):16===e.length?p.bytesToIPv6(e):null},p.bytesToIPv4=function(e){if(4!==e.length)return null;for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t.join(".")},p.bytesToIPv6=function(e){if(16!==e.length)return null;for(var t,r=[],n=[],i=0,a=0;a<e.length;a+=2){for(var s,o,u=p.bytesToHex(e[a]+e[a+1]);"0"===u[0]&&"0"!==u;)u=u.substr(1);"0"===u&&(s=n[n.length-1],o=r.length,s&&o===s.end+1?(s.end=o,s.end-s.start>n[i].end-n[i].start&&(i=n.length-1)):n.push({start:o,end:o})),r.push(u)}return 0<n.length&&(0<(t=n[i]).end-t.start&&(r.splice(t.start,t.end-t.start+1,""),0===t.start&&r.unshift(""),7===t.end&&r.push(""))),r.join(":")},p.estimateCores=function(e,t){if("function"==typeof e&&(t=e,e={}),e=e||{},"cores"in p&&!e.update)return t(null,p.cores);if("undefined"!=typeof navigator&&"hardwareConcurrency"in navigator&&0<navigator.hardwareConcurrency)return p.cores=navigator.hardwareConcurrency,t(null,p.cores);if("undefined"==typeof Worker)return p.cores=1,t(null,p.cores);if("undefined"==typeof Blob)return p.cores=2,t(null,p.cores);var c=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(e){for(var t=Date.now(),r=t+4;Date.now()<r;);self.postMessage({st:t,et:r})})}.toString(),")()"],{type:"application/javascript"}));!function a(s,o,u){if(0===o){var e=Math.floor(s.reduce(function(e,t){return e+t},0)/s.length);return p.cores=Math.max(1,e),URL.revokeObjectURL(c),t(null,p.cores)}!function(r){for(var n=[],i=[],e=0;e<r;++e){var t=new Worker(c);t.addEventListener("message",function(e){if(i.push(e.data),i.length===r){for(var t=0;t<r;++t)n[t].terminate();s.push(function(e,t){for(var r,n=[],i=0;i<e;++i)for(var a=t[i],s=n[i]=[],o=0;o<e;++o)i!==o&&(r=t[o],(a.st>r.st&&a.st<r.et||r.st>a.st&&r.st<a.et)&&s.push(o));return n.reduce(function(e,t){return Math.max(e,t.length)},0)}(u,i)),a(s,o-1,u)}}),n.push(t)}for(e=0;e<r;++e)n[e].postMessage(e)}(u)}([],5,16)}}.call(this,k(362),k(868).setImmediate,k(133),k(360).Buffer)},758:function(e,t,r){"use strict";var n,i=r(756);function a(e){e=e||{},this.name="",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._blocks=this.blockSize/4,this._inBlock=new Array(this._blocks),this._outBlock=new Array(this._blocks)}r(774),r(767),r(796),r(797),r(823),r(798),r(775),r(824),r(889),r(891),r(829),r(826),r(802),r(768),r(799),r(825),r(894),r(757),a.prototype.start=function(){},a.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&0<e.length()))return!0;for(var n=0;n<this._blocks;++n)this._inBlock[n]=e.getInt32();for(this.cipher.encrypt(this._inBlock,this._outBlock),n=0;n<this._blocks;++n)t.putInt32(this._outBlock[n])},a.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&0<e.length()))return!0;for(var n=0;n<this._blocks;++n)this._inBlock[n]=e.getInt32();for(this.cipher.decrypt(this._inBlock,this._outBlock),n=0;n<this._blocks;++n)t.putInt32(this._outBlock[n])},n=a,r=function(){return new i.aes.Algorithm("AES",n)},i.cipher.registerAlgorithm("AES",r),e.exports=i},759:function(e,t,a){"use strict";!function(r){var n=a(758),i={base64url:a(782),utf8:a(898),asBuffer:function(e,t){return r.isBuffer(e)?e:"string"==typeof e?"base64url"===(t=t||"binary")?i.base64url.decode(e):r.from(e,t):(n.util.isArrayBufferView(e)?e=e instanceof Uint8Array?e:new Uint8Array(e.buffer,e.byteOffset,e.byteOffset+e.byteLength):n.util.isArrayBuffer(e)&&(e=new Uint8Array(e)),r.from(e))},randomBytes:function(e){return r.from(n.random.getBytes(e),"binary")}};e.exports=i}.call(this,a(360).Buffer)},761:function(e,a,t){"use strict";!function(r){"undefined"==typeof Promise&&t(817).polyfill(),a.int32ToBuffer=function(e,t){return(t=t||r.alloc(4))[0]=e>>>24&255,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=255&e,t};var n=Math.pow(2,32);a.int64ToBuffer=function(e,t){t=t||r.alloc(8);t=Math.floor(e/n),e%=n,t=a.int32ToBuffer(t),e=a.int32ToBuffer(e);return r.concat([t,e])};var e={};Object.defineProperty(a,"subtleCrypto",{get:function(){return"subtleCrypto"in e?e.subtleCrypto:e.subtleCrypto=function(){if("undefined"!=typeof crypto&&void 0!==crypto.subtle)return crypto.subtle}()},enumerable:!0}),Object.defineProperty(a,"nodeCrypto",{get:function(){return"nodeCrypto"in e?e.nodeCrypto:e.nodeCrypto=function(){var e;try{e=t(1101)}catch(e){return}if(Object.keys(e).length)return e}()},enumerable:!0}),a.setupFallback=function(e,n,i){return e&&a.nodeCrypto?function(){var t,r,n=arguments;try{t=Promise.resolve(e.apply(null,n))}catch(e){t=0===(r=e).message.indexOf("unsupported algorithm:")?i.apply(null,n):Promise.reject(r)}return t}:n&&a.subtleCrypto?function(){var e,t=arguments;function r(e){return e.code!==DOMException.NOT_SUPPORTED_ERR&&"Only ArrayBuffer and ArrayBufferView objects can be passed as CryptoOperationData"!==e.message&&e instanceof Error?Promise.reject(e):i.apply(null,t)}try{e=(e=n.apply(null,t)).catch(r)}catch(t){e=r(t)}return e}:i}}.call(this,t(360).Buffer)},764:function(e,t,r){var n=r(853);e.exports=function(e){return n(e,4)}},765:function(e,t,r){"use strict";e.exports={CHUNK_SIZE:1024,HASHLENGTH:{"SHA-1":160,"SHA-256":256,"SHA-384":384,"SHA-512":512},ENCLENGTH:{"AES-128-CBC":128,"AES-192-CBC":192,"AES-256-CBC":256,"AES-128-KW":128,"AES-192-KW":192,"AES-256-KW":256},KEYLENGTH:{"A128CBC-HS256":256,"A192CBC-HS384":384,"A256CBC-HS512":512,"A128CBC+HS256":256,"A192CBC+HS384":384,"A256CBC+HS512":512,A128GCM:128,A192GCM:192,A256GCM:256,A128KW:128,A192KW:192,A256KW:256,"ECDH-ES+A128KW":128,"ECDH-ES+A192KW":192,"ECDH-ES+A256KW":256},NONCELENGTH:{"A128CBC-HS256":128,"A192CBC-HS384":128,"A256CBC-HS512":128,"A128CBC+HS256":128,"A192CBC+HS384":128,"A256CBC+HS512":128,A128GCM:96,A192GCM:96,A256GCM:96}}},766:function(a,e,s){"use strict";!function(n){var e,t=s(878),r=s(974),i=(e=[],"undefined"!=typeof Uint8ClampedArray&&e.push(Uint8ClampedArray),"undefined"!=typeof Uint8Array&&e.push(Uint8Array),"undefined"!=typeof Uint16Array&&e.push(Uint16Array),"undefined"!=typeof Uint32Array&&e.push(Uint32Array),"undefined"!=typeof Float32Array&&e.push(Float32Array),"undefined"!=typeof Float64Array&&e.push(Float64Array),e);a.exports=t(r,function(e,t){var r;return t=n.isBuffer(t)?n.from(t):(r=function(e){for(var t,r=0;!t&&i.length>r;r++)e instanceof i[r]&&(t=i[r]);return t}(t))?new r(t,t.byteOffset,t.byteLength):void 0})}.call(this,s(360).Buffer)},767:function(e,t,r){var c=r(756);r(757),r(770);var m=e.exports=c.asn1=c.asn1||{};function C(e,t,r){if(t<r){var n=new Error("Too few bytes to parse DER.");throw n.available=e.length(),n.remaining=t,n.requested=r,n}}m.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},m.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},m.create=function(e,t,r,n,i){if(c.util.isArray(n)){for(var a=[],s=0;s<n.length;++s)void 0!==n[s]&&a.push(n[s]);n=a}r={tagClass:e,type:t,constructed:r,composed:r||c.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(r.bitStringContents=i.bitStringContents,r.original=m.copy(r)),r},m.copy=function(e,t){if(c.util.isArray(e)){for(var r=[],n=0;n<e.length;++n)r.push(m.copy(e[n],t));return r}return"string"==typeof e?e:(r={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:m.copy(e.value,t)},t&&!t.excludeBitStringContents&&(r.bitStringContents=e.bitStringContents),r)},m.equals=function(e,t,r){if(c.util.isArray(e)){if(!c.util.isArray(t))return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!m.equals(e[n],t[n]))return!1;return!0}if(typeof e!=typeof t)return!1;if("string"==typeof e)return e===t;var i=e.tagClass===t.tagClass&&e.type===t.type&&e.constructed===t.constructed&&e.composed===t.composed&&m.equals(e.value,t.value);return i=r&&r.includeBitStringContents?i&&e.bitStringContents===t.bitStringContents:i},m.getBerValueLength=function(e){var t=e.getByte();if(128!==t)return 128&t?e.getInt((127&t)<<3):t},m.fromDer=function(e,t){return"strict"in(t="boolean"==typeof(t=void 0===t?{strict:!0,decodeBitStrings:!0}:t)?{strict:t,decodeBitStrings:!0}:t)||(t.strict=!0),"decodeBitStrings"in t||(t.decodeBitStrings=!0),function e(t,r,n,i){C(t,r,2);var a=t.getByte();r--;var s=192&a,o=31&a;d=t.length();var u,c,l=function(e,t){var r=e.getByte();if(t--,128!==r){if((r=128&r?(C(e,t,t=127&r),e.getInt(t<<3)):r)<0)throw new Error("Negative length: "+r);return r}}(t,r);if(r-=d-t.length(),void 0!==l&&r<l){if(i.strict)throw(f=new Error("Too few bytes to read ASN.1 value.")).available=t.length(),f.remaining=r,f.requested=l,f;l=r}var h=32==(32&a);if(h)if(u=[],void 0===l)for(;;){if(C(t,r,2),t.bytes(2)===String.fromCharCode(0,0)){t.getBytes(2),r-=2;break}d=t.length(),u.push(e(t,r,n+1,i)),r-=d-t.length()}else for(;0<l;)d=t.length(),u.push(e(t,l,n+1,i)),r-=d-t.length(),l-=d-t.length();if(void 0===u&&s===m.Class.UNIVERSAL&&o===m.Type.BITSTRING&&(c=t.bytes(l)),void 0===u&&i.decodeBitStrings&&s===m.Class.UNIVERSAL&&o===m.Type.BITSTRING&&1<l){var p=t.read,f=r,a=0;if(o===m.Type.BITSTRING&&(C(t,r,1),a=t.getByte(),r--),0===a)try{var d=t.length(),y=e(t,r,n+1,{verbose:i.verbose,strict:!0,decodeBitStrings:!0}),g=d-t.length();r-=g,o==m.Type.BITSTRING&&g++;var v=y.tagClass;g!==l||v!==m.Class.UNIVERSAL&&v!==m.Class.CONTEXT_SPECIFIC||(u=[y])}catch(t){}void 0===u&&(t.read=p,r=f)}if(void 0===u){if(void 0===l){if(i.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");l=r}if(o===m.Type.BMPSTRING)for(u="";0<l;l-=2)C(t,r,2),u+=String.fromCharCode(t.getInt16()),r-=2;else u=t.getBytes(l)}return m.create(s,o,h,u,void 0===c?null:{bitStringContents:c})}(e="string"==typeof e?c.util.createBuffer(e):e,e.length(),0,t)},m.toDer=function(e){var t=c.util.createBuffer(),r=e.tagClass|e.type,n=c.util.createBuffer(),i=!1;if("bitStringContents"in e&&(i=!0,e.original&&(i=m.equals(e,e.original))),i)n.putBytes(e.bitStringContents);else if(e.composed){e.constructed?r|=32:n.putByte(0);for(var a=0;a<e.value.length;++a)void 0!==e.value[a]&&n.putBuffer(m.toDer(e.value[a]))}else if(e.type===m.Type.BMPSTRING)for(a=0;a<e.value.length;++a)n.putInt16(e.value.charCodeAt(a));else e.type===m.Type.INTEGER&&1<e.value.length&&(0===e.value.charCodeAt(0)&&0==(128&e.value.charCodeAt(1))||255===e.value.charCodeAt(0)&&128==(128&e.value.charCodeAt(1)))?n.putBytes(e.value.substr(1)):n.putBytes(e.value);if(t.putByte(r),n.length()<=127)t.putByte(127&n.length());else{for(var s=n.length(),o="";o+=String.fromCharCode(255&s),0<(s>>>=8););for(t.putByte(128|o.length),a=o.length-1;0<=a;--a)t.putByte(o.charCodeAt(a))}return t.putBuffer(n),t},m.oidToDer=function(e){var t,r,n,i,a=e.split("."),s=c.util.createBuffer();s.putByte(40*parseInt(a[0],10)+parseInt(a[1],10));for(var o=2;o<a.length;++o){for(t=!0,r=[],n=parseInt(a[o],10);i=127&n,n>>>=7,t||(i|=128),r.push(i),t=!1,0<n;);for(var u=r.length-1;0<=u;--u)s.putByte(r[u])}return s},m.derToOid=function(e){for(var t=(e="string"==typeof e?c.util.createBuffer(e):e).getByte(),r=Math.floor(t/40)+"."+t%40,n=0;0<e.length();)n<<=7,128&(t=e.getByte())?n+=127&t:(r+="."+(n+t),n=0);return r},m.utcTimeToDate=function(e){var t,r,n=new Date,i=50<=(i=parseInt(e.substr(0,2),10))?1900+i:2e3+i,a=parseInt(e.substr(2,2),10)-1,s=parseInt(e.substr(4,2),10),o=parseInt(e.substr(6,2),10),u=parseInt(e.substr(8,2),10),c=0;return 11<e.length&&("+"!==(t=e.charAt(r=10))&&"-"!==t&&(c=parseInt(e.substr(10,2),10),r+=2)),n.setUTCFullYear(i,a,s),n.setUTCHours(o,u,c,0),!r||"+"!==(t=e.charAt(r))&&"-"!==t||(r=60*parseInt(e.substr(r+1,2),10)+parseInt(e.substr(r+4,2),10),r*=6e4,"+"===t?n.setTime(+n-r):n.setTime(+n+r)),n},m.generalizedTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,4),10),n=parseInt(e.substr(4,2),10)-1,i=parseInt(e.substr(6,2),10),a=parseInt(e.substr(8,2),10),s=parseInt(e.substr(10,2),10),o=parseInt(e.substr(12,2),10),u=0,c=0,l=!1;"Z"===e.charAt(e.length-1)&&(l=!0);var h=e.length-5,p=e.charAt(h);return"+"!==p&&"-"!==p||(c=60*parseInt(e.substr(1+h,2),10)+parseInt(e.substr(4+h,2),10),c*=6e4,"+"===p&&(c*=-1),l=!0),"."===e.charAt(14)&&(u=1e3*parseFloat(e.substr(14),10)),l?(t.setUTCFullYear(r,n,i),t.setUTCHours(a,s,o,u),t.setTime(+t+c)):(t.setFullYear(r,n,i),t.setHours(a,s,o,u)),t},m.dateToUtcTime=function(e){if("string"==typeof e)return e;var t="",r=[];r.push((""+e.getUTCFullYear()).substr(2)),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+"Z"},m.dateToGeneralizedTime=function(e){if("string"==typeof e)return e;var t="",r=[];r.push(""+e.getUTCFullYear()),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+"Z"},m.integerToDer=function(e){var t=c.util.createBuffer();if(-128<=e&&e<128)return t.putSignedInt(e,8);if(-32768<=e&&e<32768)return t.putSignedInt(e,16);if(-8388608<=e&&e<8388608)return t.putSignedInt(e,24);if(-2147483648<=e&&e<2147483648)return t.putSignedInt(e,32);t=new Error("Integer too large; max is 32-bits.");throw t.integer=e,t},m.derToInteger=function(e){var t=8*(e="string"==typeof e?c.util.createBuffer(e):e).length();if(32<t)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)},m.validate=function(e,t,r,n){var i=!1;if(e.tagClass!==t.tagClass&&void 0!==t.tagClass||e.type!==t.type&&void 0!==t.type)n&&(e.tagClass!==t.tagClass&&n.push("["+t.name+'] Expected tag class "'+t.tagClass+'", got "'+e.tagClass+'"'),e.type!==t.type&&n.push("["+t.name+'] Expected type "'+t.type+'", got "'+e.type+'"'));else if(e.constructed===t.constructed||void 0===t.constructed){if(i=!0,t.value&&c.util.isArray(t.value))for(var a=0,s=0;i&&s<t.value.length;++s)i=t.value[s].optional||!1,e.value[a]&&((i=m.validate(e.value[a],t.value[s],r,n))?++a:t.value[s].optional&&(i=!0)),!i&&n&&n.push("["+t.name+'] Tag class "'+t.tagClass+'", type "'+t.type+'" expected value length "'+t.value.length+'", got "'+e.value.length+'"');if(i&&r&&(t.capture&&(r[t.capture]=e.value),t.captureAsn1&&(r[t.captureAsn1]=e),t.captureBitStringContents&&"bitStringContents"in e&&(r[t.captureBitStringContents]=e.bitStringContents),t.captureBitStringValue&&"bitStringContents"in e))if(e.bitStringContents.length<2)r[t.captureBitStringValue]="";else{if(0!==e.bitStringContents.charCodeAt(0))throw new Error("captureBitStringValue only supported for zero unused bits");r[t.captureBitStringValue]=e.bitStringContents.slice(1)}}else n&&n.push("["+t.name+'] Expected constructed "'+t.constructed+'", got "'+e.constructed+'"');return i};var l=/[^\\u0000-\\u00ff]/;m.prettyPrint=function(e,t,r){var n="";r=r||2,0<(t=t||0)&&(n+="\n");for(var i,a="",s=0;s<t*r;++s)a+=" ";switch(n+=a+"Tag: ",e.tagClass){case m.Class.UNIVERSAL:n+="Universal:";break;case m.Class.APPLICATION:n+="Application:";break;case m.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case m.Class.PRIVATE:n+="Private:"}if(e.tagClass===m.Class.UNIVERSAL)switch(n+=e.type,e.type){case m.Type.NONE:n+=" (None)";break;case m.Type.BOOLEAN:n+=" (Boolean)";break;case m.Type.INTEGER:n+=" (Integer)";break;case m.Type.BITSTRING:n+=" (Bit string)";break;case m.Type.OCTETSTRING:n+=" (Octet string)";break;case m.Type.NULL:n+=" (Null)";break;case m.Type.OID:n+=" (Object Identifier)";break;case m.Type.ODESC:n+=" (Object Descriptor)";break;case m.Type.EXTERNAL:n+=" (External or Instance of)";break;case m.Type.REAL:n+=" (Real)";break;case m.Type.ENUMERATED:n+=" (Enumerated)";break;case m.Type.EMBEDDED:n+=" (Embedded PDV)";break;case m.Type.UTF8:n+=" (UTF8)";break;case m.Type.ROID:n+=" (Relative Object Identifier)";break;case m.Type.SEQUENCE:n+=" (Sequence)";break;case m.Type.SET:n+=" (Set)";break;case m.Type.PRINTABLESTRING:n+=" (Printable String)";break;case m.Type.IA5String:n+=" (IA5String (ASCII))";break;case m.Type.UTCTIME:n+=" (UTC time)";break;case m.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case m.Type.BMPSTRING:n+=" (BMP String)"}else n+=e.type;if(n+="\n",n+=a+"Constructed: "+e.constructed+"\n",e.composed){for(var o=0,u="",s=0;s<e.value.length;++s)void 0!==e.value[s]&&(o+=1,u+=m.prettyPrint(e.value[s],t+1,r),s+1<e.value.length&&(u+=","));n+=a+"Sub values: "+o+u}else if(n+=a+"Value: ",e.type===m.Type.OID&&(n+=i=m.derToOid(e.value),c.pki&&c.pki.oids&&i in c.pki.oids&&(n+=" ("+c.pki.oids[i]+") ")),e.type===m.Type.INTEGER)try{n+=m.derToInteger(e.value)}catch(t){n+="0x"+c.util.bytesToHex(e.value)}else e.type===m.Type.BITSTRING?(1<e.value.length?n+="0x"+c.util.bytesToHex(e.value.slice(1)):n+="(none)",0<e.value.length&&(1==(i=e.value.charCodeAt(0))?n+=" (1 unused bit shown)":1<i&&(n+=" ("+i+" unused bits shown)"))):e.type===m.Type.OCTETSTRING?(l.test(e.value)||(n+="("+e.value+") "),n+="0x"+c.util.bytesToHex(e.value)):e.type===m.Type.UTF8?n+=c.util.decodeUtf8(e.value):e.type===m.Type.PRINTABLESTRING||e.type===m.Type.IA5String?n+=e.value:l.test(e.value)?n+="0x"+c.util.bytesToHex(e.value):0===e.value.length?n+="[null]":n+=e.value;return n}},768:function(h,e,t){var p=t(756);t(774),t(825),t(826),t(757),p.random&&p.random.getBytes?h.exports=p.random:function(e){var t={},r=new Array(4),n=p.util.createBuffer();function i(){var r=p.prng.create(t);return r.getBytes=function(e,t){return r.generate(e,t)},r.getBytesSync=function(e){return r.generate(e)},r}t.formatKey=function(e){var t=p.util.createBuffer(e);return(e=new Array(4))[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),p.aes._expandKey(e,!1)},t.formatSeed=function(e){var t=p.util.createBuffer(e);return(e=new Array(4))[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),e},t.cipher=function(e,t){return p.aes._updateBlock(e,t,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},t.increment=function(e){return++e[3],e},t.md=p.md.sha256;var a=i(),s=null,o=p.util.globalScope,u=o.crypto||o.msCrypto;if(u&&u.getRandomValues&&(s=function(e){return u.getRandomValues(e)}),p.options.usePureJavaScript||!p.util.isNodejs&&!s){if(a.collectInt(+new Date,32),"undefined"!=typeof navigator){var c="";for(l in navigator)try{"string"==typeof navigator[l]&&(c+=navigator[l])}catch(e){}a.collect(c),c=null}e&&(e().mousemove(function(e){a.collectInt(e.clientX,16),a.collectInt(e.clientY,16)}),e().keypress(function(e){a.collectInt(e.charCode,8)}))}if(p.random)for(var l in a)p.random[l]=a[l];else p.random=a;p.random.createInstance=i,h.exports=p.random}("undefined"!=typeof jQuery?jQuery:null)},769:function(e,t,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;t.assign=function(e){for(var t,r,n=Array.prototype.slice.call(arguments,1);n.length;){var i=n.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var a in i)t=i,r=a,Object.prototype.hasOwnProperty.call(t,r)&&(e[a]=i[a])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,r,n,i){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+n),i);else for(var a=0;a<n;a++)e[i+a]=t[r+a]},flattenChunks:function(e){for(var t,r,n,i=0,a=0,s=e.length;a<s;a++)i+=e[a].length;for(n=new Uint8Array(i),a=t=0,s=e.length;a<s;a++)r=e[a],n.set(r,t),t+=r.length;return n}},a={arraySet:function(e,t,r,n,i){for(var a=0;a<n;a++)e[i+a]=t[r+a]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,i)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,a))},t.setTyped(n)},770:function(e,t,r){r=r(756);r.pki=r.pki||{};var n=e.exports=r.pki.oids=r.oids=r.oids||{};function i(e,t){n[e]=t,n[t]=e}function a(e,t){n[e]=t}i("1.2.840.113549.1.1.1","rsaEncryption"),i("1.2.840.113549.1.1.4","md5WithRSAEncryption"),i("1.2.840.113549.1.1.5","sha1WithRSAEncryption"),i("1.2.840.113549.1.1.7","RSAES-OAEP"),i("1.2.840.113549.1.1.8","mgf1"),i("1.2.840.113549.1.1.9","pSpecified"),i("1.2.840.113549.1.1.10","RSASSA-PSS"),i("1.2.840.113549.1.1.11","sha256WithRSAEncryption"),i("1.2.840.113549.1.1.12","sha384WithRSAEncryption"),i("1.2.840.113549.1.1.13","sha512WithRSAEncryption"),i("1.3.101.112","EdDSA25519"),i("1.2.840.10040.4.3","dsa-with-sha1"),i("1.3.14.3.2.7","desCBC"),i("1.3.14.3.2.26","sha1"),i("2.16.840.1.101.3.4.2.1","sha256"),i("2.16.840.1.101.3.4.2.2","sha384"),i("2.16.840.1.101.3.4.2.3","sha512"),i("1.2.840.113549.2.5","md5"),i("1.2.840.113549.1.7.1","data"),i("1.2.840.113549.1.7.2","signedData"),i("1.2.840.113549.1.7.3","envelopedData"),i("1.2.840.113549.1.7.4","signedAndEnvelopedData"),i("1.2.840.113549.1.7.5","digestedData"),i("1.2.840.113549.1.7.6","encryptedData"),i("1.2.840.113549.1.9.1","emailAddress"),i("1.2.840.113549.1.9.2","unstructuredName"),i("1.2.840.113549.1.9.3","contentType"),i("1.2.840.113549.1.9.4","messageDigest"),i("1.2.840.113549.1.9.5","signingTime"),i("1.2.840.113549.1.9.6","counterSignature"),i("1.2.840.113549.1.9.7","challengePassword"),i("1.2.840.113549.1.9.8","unstructuredAddress"),i("1.2.840.113549.1.9.14","extensionRequest"),i("1.2.840.113549.1.9.20","friendlyName"),i("1.2.840.113549.1.9.21","localKeyId"),i("1.2.840.113549.1.9.22.1","x509Certificate"),i("1.2.840.113549.1.12.10.1.1","keyBag"),i("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag"),i("1.2.840.113549.1.12.10.1.3","certBag"),i("1.2.840.113549.1.12.10.1.4","crlBag"),i("1.2.840.113549.1.12.10.1.5","secretBag"),i("1.2.840.113549.1.12.10.1.6","safeContentsBag"),i("1.2.840.113549.1.5.13","pkcs5PBES2"),i("1.2.840.113549.1.5.12","pkcs5PBKDF2"),i("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4"),i("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4"),i("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC"),i("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC"),i("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC"),i("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC"),i("1.2.840.113549.2.7","hmacWithSHA1"),i("1.2.840.113549.2.8","hmacWithSHA224"),i("1.2.840.113549.2.9","hmacWithSHA256"),i("1.2.840.113549.2.10","hmacWithSHA384"),i("1.2.840.113549.2.11","hmacWithSHA512"),i("1.2.840.113549.3.7","des-EDE3-CBC"),i("2.16.840.1.101.3.4.1.2","aes128-CBC"),i("2.16.840.1.101.3.4.1.22","aes192-CBC"),i("2.16.840.1.101.3.4.1.42","aes256-CBC"),i("2.5.4.3","commonName"),i("2.5.4.5","serialName"),i("2.5.4.6","countryName"),i("2.5.4.7","localityName"),i("2.5.4.8","stateOrProvinceName"),i("2.5.4.9","streetAddress"),i("2.5.4.10","organizationName"),i("2.5.4.11","organizationalUnitName"),i("2.5.4.13","description"),i("2.5.4.15","businessCategory"),i("2.5.4.17","postalCode"),i("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName"),i("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName"),i("2.16.840.1.113730.1.1","nsCertType"),i("2.16.840.1.113730.1.13","nsComment"),a("2.5.29.1","authorityKeyIdentifier"),a("2.5.29.2","keyAttributes"),a("2.5.29.3","certificatePolicies"),a("2.5.29.4","keyUsageRestriction"),a("2.5.29.5","policyMapping"),a("2.5.29.6","subtreesConstraint"),a("2.5.29.7","subjectAltName"),a("2.5.29.8","issuerAltName"),a("2.5.29.9","subjectDirectoryAttributes"),a("2.5.29.10","basicConstraints"),a("2.5.29.11","nameConstraints"),a("2.5.29.12","policyConstraints"),a("2.5.29.13","basicConstraints"),i("2.5.29.14","subjectKeyIdentifier"),i("2.5.29.15","keyUsage"),a("2.5.29.16","privateKeyUsagePeriod"),i("2.5.29.17","subjectAltName"),i("2.5.29.18","issuerAltName"),i("2.5.29.19","basicConstraints"),a("2.5.29.20","cRLNumber"),a("2.5.29.21","cRLReason"),a("2.5.29.22","expirationDate"),a("2.5.29.23","instructionCode"),a("2.5.29.24","invalidityDate"),a("2.5.29.25","cRLDistributionPoints"),a("2.5.29.26","issuingDistributionPoint"),a("2.5.29.27","deltaCRLIndicator"),a("2.5.29.28","issuingDistributionPoint"),a("2.5.29.29","certificateIssuer"),a("2.5.29.30","nameConstraints"),i("2.5.29.31","cRLDistributionPoints"),i("2.5.29.32","certificatePolicies"),a("2.5.29.33","policyMappings"),a("2.5.29.34","policyConstraints"),i("2.5.29.35","authorityKeyIdentifier"),a("2.5.29.36","policyConstraints"),i("2.5.29.37","extKeyUsage"),a("2.5.29.46","freshestCRL"),a("2.5.29.54","inhibitAnyPolicy"),i("1.3.6.1.4.1.11129.2.4.2","timestampList"),i("1.3.6.1.5.5.7.1.1","authorityInfoAccess"),i("1.3.6.1.5.5.7.3.1","serverAuth"),i("1.3.6.1.5.5.7.3.2","clientAuth"),i("1.3.6.1.5.5.7.3.3","codeSigning"),i("1.3.6.1.5.5.7.3.4","emailProtection"),i("1.3.6.1.5.5.7.3.8","timeStamping")},771:function(e,t,r){r=r(756);e.exports=r.md=r.md||{},r.md.algorithms=r.md.algorithms||{}},772:function(e,t,r){"use strict";var n=r(783);Object.keys(n.KeyStore).forEach(function(e){t[e]=n.KeyStore[e]});var i=r(841);Object.keys(i).forEach(function(e){t[e]=i[e]}),r(935),r(936),r(937)},774:function(e,t,r){var s=r(756);function n(e,t){s.cipher.registerAlgorithm(e,function(){return new s.aes.Algorithm(e,t)})}r(796),r(822),r(757),e.exports=s.aes=s.aes||{},s.aes.startEncrypting=function(e,t,r,n){n=u({key:e,output:r,decrypt:!1,mode:n});return n.start(t),n},s.aes.createEncryptionCipher=function(e,t){return u({key:e,output:null,decrypt:!1,mode:t})},s.aes.startDecrypting=function(e,t,r,n){n=u({key:e,output:r,decrypt:!0,mode:n});return n.start(t),n},s.aes.createDecryptionCipher=function(e,t){return u({key:e,output:null,decrypt:!0,mode:t})},s.aes.Algorithm=function(e,t){h||i();var r=this;r.name=e,r.mode=new t({blockSize:16,cipher:{encrypt:function(e,t){return a(r._w,e,t,!1)},decrypt:function(e,t){return a(r._w,e,t,!0)}}}),r._init=!1},s.aes.Algorithm.prototype.initialize=function(e){if(!this._init){if("string"!=typeof(r=e.key)||16!==r.length&&24!==r.length&&32!==r.length){if(s.util.isArray(r)&&(16===r.length||24===r.length||32===r.length))for(var t=r,r=s.util.createBuffer(),n=0;n<t.length;++n)r.putByte(t[n])}else r=s.util.createBuffer(r);if(!s.util.isArray(r)){t=r,r=[];var i=t.length();if(16===i||24===i||32===i)for(i>>>=2,n=0;n<i;++n)r.push(t.getInt32())}if(!s.util.isArray(r)||4!==r.length&&6!==r.length&&8!==r.length)throw new Error("Invalid key parameter.");var a=this.mode.name,a=-1!==["CFB","OFB","CTR","GCM"].indexOf(a);this._w=o(r,e.decrypt&&!a),this._init=!0}},s.aes._expandKey=function(e,t){return h||i(),o(e,t)},s.aes._updateBlock=a,n("AES-ECB",s.cipher.modes.ecb),n("AES-CBC",s.cipher.modes.cbc),n("AES-CFB",s.cipher.modes.cfb),n("AES-OFB",s.cipher.modes.ofb),n("AES-CTR",s.cipher.modes.ctr),n("AES-GCM",s.cipher.modes.gcm);var C,E,g,b,S,h=!1;function i(){h=!0,g=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;for(C=new Array(256),E=new Array(256),b=new Array(4),S=new Array(4),t=0;t<4;++t)b[t]=new Array(256),S[t]=new Array(256);for(var r,n,i,a,s=0,o=0,t=0;t<256;++t){i=(i=o^o<<1^o<<2^o<<3^o<<4)>>8^255&i^99,C[s]=i,E[i]=s;for(var u=(a=e[i])<<24^i<<16^i<<8^i^a,c=((r=e[s])^(n=e[r])^(a=e[n]))<<24^(s^a)<<16^(s^n^a)<<8^s^r^a,l=0;l<4;++l)u=(b[l][s]=u)<<24|u>>>8,c=(S[l][i]=c)<<24|c>>>8;0===s?s=o=1:(s=r^e[e[e[r^a]]],o^=e[e[o]])}}function o(e,t){for(var r,n=e.slice(0),i=1,a=n.length,s=4*(a+6+1),o=a;o<s;++o)r=n[o-1],o%a==0?(r=C[r>>>16&255]<<24^C[r>>>8&255]<<16^C[255&r]<<8^C[r>>>24]^g[i]<<24,i++):6<a&&o%a==4&&(r=C[r>>>24]<<24^C[r>>>16&255]<<16^C[r>>>8&255]<<8^C[255&r]),n[o]=n[o-a]^r;if(t){for(var u,c=S[0],l=S[1],h=S[2],p=S[3],f=n.slice(0),d=(o=0,(s=n.length)-4);o<s;o+=4,d-=4)if(0===o||o===s-4)f[o]=n[d],f[o+1]=n[d+3],f[o+2]=n[d+2],f[o+3]=n[d+1];else for(var y=0;y<4;++y)u=n[d+y],f[o+(3&-y)]=c[C[u>>>24]]^l[C[u>>>16&255]]^h[C[u>>>8&255]]^p[C[255&u]];n=f}return n}function a(e,t,r,n){for(var i,a,s,o,u,c,l,h=e.length/4-1,p=n?(i=S[0],a=S[1],s=S[2],o=S[3],E):(i=b[0],a=b[1],s=b[2],o=b[3],C),f=t[0]^e[0],d=t[n?3:1]^e[1],y=t[2]^e[2],g=t[n?1:3]^e[3],v=3,m=1;m<h;++m)u=i[f>>>24]^a[d>>>16&255]^s[y>>>8&255]^o[255&g]^e[++v],c=i[d>>>24]^a[y>>>16&255]^s[g>>>8&255]^o[255&f]^e[++v],l=i[y>>>24]^a[g>>>16&255]^s[f>>>8&255]^o[255&d]^e[++v],g=i[g>>>24]^a[f>>>16&255]^s[d>>>8&255]^o[255&y]^e[++v],f=u,d=c,y=l;r[0]=p[f>>>24]<<24^p[d>>>16&255]<<16^p[y>>>8&255]<<8^p[255&g]^e[++v],r[n?3:1]=p[d>>>24]<<24^p[y>>>16&255]<<16^p[g>>>8&255]<<8^p[255&f]^e[++v],r[2]=p[y>>>24]<<24^p[g>>>16&255]<<16^p[f>>>8&255]<<8^p[255&d]^e[++v],r[n?1:3]=p[g>>>24]<<24^p[f>>>16&255]<<16^p[d>>>8&255]<<8^p[255&y]^e[++v]}function u(e){var n,t="AES-"+((e=e||{}).mode||"CBC").toUpperCase(),i=(n=e.decrypt?s.cipher.createDecipher(t,e.key):s.cipher.createCipher(t,e.key)).start;return n.start=function(e,t){var r=null;t instanceof s.util.ByteBuffer&&(r=t,t={}),(t=t||{}).output=r,t.iv=e,i.call(n,t)},n}},775:function(e,t,r){var y=r(756);r(757);e=e.exports=y.pem=y.pem||{};function a(e){function t(e,t){return" "+t}for(var r=e.name+": ",n=[],i=0;i<e.values.length;++i)n.push(e.values[i].replace(/^(\S+\r\n)/,t));r+=n.join(",")+"\r\n";for(var a,s=0,o=-1,i=0;i<r.length;++i,++s)65<s&&-1!==o?(r=","===(a=r[o])?(++o,r.substr(0,o)+"\r\n "+r.substr(o)):r.substr(0,o)+"\r\n"+a+r.substr(o+1),s=i-o-1,o=-1,++i):" "!==r[i]&&"\t"!==r[i]&&","!==r[i]||(o=i);return r}e.encode=function(e,t){t=t||{};var r,n="-----BEGIN "+e.type+"-----\r\n";if(e.procType&&(n+=a(r={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]})),e.contentDomain&&(n+=a(r={name:"Content-Domain",values:[e.contentDomain]})),e.dekInfo&&(r={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&r.values.push(e.dekInfo.parameters),n+=a(r)),e.headers)for(var i=0;i<e.headers.length;++i)n+=a(e.headers[i]);return e.procType&&(n+="\r\n"),(n+=y.util.encode64(e.body,t.maxline||64)+"\r\n")+("-----END "+e.type)+"-----\r\n"},e.decode=function(e){for(var t,r=[],n=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,i=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,a=/\r?\n/;t=n.exec(e);){var s={type:t[1],procType:null,contentDomain:null,dekInfo:null,headers:[],body:y.util.decode64(t[3])};if(r.push(s),t[2]){for(var o=t[2].split(a),u=0;t&&u<o.length;){for(var c=o[u].replace(/\s+$/,""),l=u+1;l<o.length;++l){var h=o[l];if(!/\s/.test(h[0]))break;c+=h,u=l}if(t=c.match(i)){for(var p={name:t[1],values:[]},f=t[2].split(","),d=0;d<f.length;++d)p.values.push(f[d].replace(/^\s+/,""));if(s.procType)if(s.contentDomain||"Content-Domain"!==p.name)if(s.dekInfo||"DEK-Info"!==p.name)s.headers.push(p);else{if(0===p.values.length)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');s.dekInfo={algorithm:f[0],parameters:f[1]||null}}else s.contentDomain=f[0]||"";else{if("Proc-Type"!==p.name)throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(2!==p.values.length)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');s.procType={version:f[0],type:f[1]}}}++u}if("ENCRYPTED"===s.procType&&!s.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(0===r.length)throw new Error("Invalid PEM formatted message.");return r}},776:function(e,t,r){"use strict";!function(i){var a=r(758),s=r(782);function o(e,t){t=t||{},i.isBuffer(e)?this.data=e:a.util.isArrayBuffer(e)?(e=new Uint8Array(e),this.data=i.from(e)):a.util.isArrayBufferView(e)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),this.data=i.from(e)),this.data&&(this.write=this.data.length,e=void 0),this.growSize=t.growSize||o.DEFAULT_GROW_SIZE,this.write=this.write||0,this.read=this.read||0,e?this.putBytes(e):this.data||this.accommodate(0),t.readOffset="readOffset"in t?t.readOffset:this.read,this.write="writeOffset"in t?t.writeOffset:this.write,this.read=Math.min(t.readOffset,this.write)}o.DEFAULT_GROW_SIZE=16,o.prototype.length=function(){return this.write-this.read},o.prototype.available=function(){return this.data.length-this.write},o.prototype.isEmpty=function(){return this.length()<=0},o.prototype.accommodate=function(e){var t,r;return this.data?this.available()<e&&(e=Math.max(e,this.growSize),t=this.data,r=i.alloc(t.length+e),t.copy(r,0),this.data=r):(e=Math.max(this.write+e,this.growSize),this.data=i.alloc(e)),this.data.fill(0,this.write),this},o.prototype.clear=function(){return this.read=this.write=0,this.data=i.alloc(0),this},o.prototype.truncate=function(e){return this.write=this.read+Math.max(0,this.length()-e),this.data.fill(0,this.write),this},o.prototype.compact=function(){return 0<this.read&&(this.write===this.read?this.read=this.write=0:(this.data.copy(this.data,0,this.read,this.write),this.write=this.write-this.read,this.read=0),this.data.fill(0,this.write)),this},o.prototype.copy=function(){return new o(this,{readOffset:this.read,writeOffset:this.write,growSize:this.growSize})},o.prototype.equals=function(e){if(!o.isBuffer(e))return!1;if(e.length()!==this.length())return!1;for(var t=!0,r=this.read-e.read,n=e.read;e.write>n;n++)t=t&&this.data[n+r]===e.data[n];return t},o.prototype.at=function(e){return this.data[this.read+e]},o.prototype.setAt=function(e,t){return this.data[this.read+e]=t,this},o.prototype.last=function(){return this.data[this.write-1]},o.prototype.bytes=function(e){var t;return 0===(e=void 0===e?this.length():e&&Math.min(e,this.length()))?"":(t=this.read,e=this.data.slice(t,t+e),String.fromCharCode.apply(null,e))},o.prototype.buffer=function(e){var t,r,n;return 0===(e=void 0===e?this.length():e&&Math.min(e,this.length()))?t=new ArrayBuffer(0):(r=this.read,e=this.data.slice(r,n=r+e),(t=new Uint8Array(n-r)).set(e)),t},o.prototype.native=function(e){var t;return 0===(e=void 0===e?this.length():e&&Math.min(e,this.length()))?i.alloc(0):(t=this.read,this.data.slice(t,t+e))},o.prototype.toHex=function(){return this.toString("hex")},o.prototype.toString=function(e){if(0===this.length())return"";var t=this.data.slice(this.read,this.write);switch(e=e||"utf8"){case"raw":return t.toString("binary");case"base64url":return s.encode(t);case"utf16":return t.toString("ucs2");default:return t.toString(e)}},o.prototype.fillWithByte=function(e,t){return t=t||this.available(),this.accommodate(t),this.data.fill(e,this.write,this.write+t),this.write+=t,this},o.prototype.getBuffer=function(e){e=this.buffer(e);return this.read+=e.byteLength,e},o.prototype.putBuffer=function(e){return this.putBytes(e)},o.prototype.getBytes=function(e){e=this.bytes(e);return this.read+=e.length,e},o.prototype.putBytes=function(e,t){if("string"==typeof e){switch(t=t||"binary"){case"utf16":t="ucs-2";break;case"raw":t="binary";break;case"base64url":e=s.decode(e)}i.isBuffer(e)||(e=i.from(e,t))}var r,n;if(e instanceof o?(e=(n=e).data.slice(n.read,n.write),n.read=n.write):e instanceof a.util.ByteStringBuffer&&(e=e.getBytes()),i.isBuffer(e))r=e;else if(Array.isArray(e))r=i.from(e);else if(a.util.isArrayBuffer(e))r=new Uint8Array(e),r=i.from(r);else{if(!a.util.isArrayBufferView(e))throw new TypeError("invalid source type");r=e instanceof Uint8Array?e:new Uint8Array(e.buffer,e.byteOffset,e.byteLength),r=i.from(r)}return this.accommodate(r.length),n=this.data,r.copy(n,this.write),this.write+=r.length,this},o.prototype.getNative=function(e){e=this.native(e);return this.read+=e.length,e},o.prototype.putNative=o.prototype.putBuffer,o.prototype.getByte=function(){var e=this.data[this.read];return this.read=Math.min(this.read+1,this.write),e},o.prototype.putByte=function(e){return this.accommodate(1),this.data[this.write]=255&e,this.write++,this},o.prototype.getInt16=function(){var e=this.data[this.read]<<8^this.data[this.read+1];return this.read=Math.min(this.read+2,this.write),e},o.prototype.putInt16=function(e){return this.accommodate(2),this.data[this.write]=e>>>8&255,this.data[this.write+1]=255&e,this.write+=2,this},o.prototype.getInt24=function(){var e=this.data[this.read]<<16^this.data[this.read+1]<<8^this.data[this.read+2];return this.read=Math.min(this.read+3,this.write),e},o.prototype.putInt24=function(e){return this.accommodate(3),this.data[this.write]=e>>>16&255,this.data[this.write+1]=e>>>8&255,this.data[this.write+2]=255&e,this.write+=3,this},o.prototype.getInt32=function(){var e=this.data[this.read]<<24^this.data[this.read+1]<<16^this.data[this.read+2]<<8^this.data[this.read+3];return this.read=Math.min(this.read+4,this.write),e},o.prototype.putInt32=function(e){return this.accommodate(4),this.data[this.write]=e>>>24&255,this.data[this.write+1]=e>>>16&255,this.data[this.write+2]=e>>>8&255,this.data[this.write+3]=255&e,this.write+=4,this},o.prototype.getInt16Le=function(){var e=this.data[this.read+1]<<8^this.data[this.read];return this.read=Math.min(this.read+2,this.write),e},o.prototype.putInt16Le=function(e){return this.accommodate(2),this.data[this.write+1]=e>>>8&255,this.data[this.write]=255&e,this.write+=2,this},o.prototype.getInt24Le=function(){var e=this.data[this.read+2]<<16^this.data[this.read+1]<<8^this.data[this.read];return this.read=Math.min(this.read+3,this.write),e},o.prototype.putInt24Le=function(e){return this.accommodate(3),this.data[this.write+2]=e>>>16&255,this.data[this.write+1]=e>>>8&255,this.data[this.write]=255&e,this.write+=3,this},o.prototype.getInt32Le=function(){var e=this.data[this.read+3]<<24^this.data[this.read+2]<<16^this.data[this.read+1]<<8^this.data[this.read];return this.read=Math.min(this.read+4,this.write),e},o.prototype.putInt32Le=function(e){return this.accommodate(4),this.data[this.write+3]=e>>>24&255,this.data[this.write+2]=e>>>16&255,this.data[this.write+1]=e>>>8&255,this.data[this.write]=255&e,this.write+=4,this},o.prototype.getInt=function(e){for(var t=0;t=t<<8|this.getByte(),0<(e-=8););return t},o.prototype.putInt=function(e,t){for(this.accommodate(Math.ceil(t/8));this.putByte(e>>(t-=8)&255),0<t;);return this},o.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)},o.prototype.putString=function(e){return this.putBytes(e,"utf16")},o.isBuffer=function(e){return e instanceof o},o.asBuffer=function(e){return o.isBuffer(e)?e:e?new o(e):new o},e.exports=o}.call(this,r(360).Buffer)},777:function(n,e,c){"use strict";!function(i){var a=c(764),s=c(759),e=c(758),o=c(803),t={name:"PrivateKeyInfo",tagClass:e.asn1.Class.UNIVERSAL,type:e.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:e.asn1.Class.UNIVERSAL,type:e.asn1.Type.INTEGER,constructed:!1,capture:"keyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:e.asn1.Class.UNIVERSAL,type:e.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:e.asn1.Class.UNIVERSAL,type:e.asn1.Type.OID,constructed:!1,capture:"keyOid"},{name:"AlgorithmIdentifier.parameters",captureAsn1:"keyParams"}]},{name:"PrivateKeyInfo",tagClass:e.asn1.Class.UNIVERSAL,type:e.asn1.Type.OCTETSTRING,constructed:!1,capture:"keyValue"}]},r={name:"SubjectPublicKeyInfo",tagClass:e.asn1.Class.UNIVERSAL,type:e.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:e.asn1.Class.UNIVERSAL,type:e.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:e.asn1.Class.UNIVERSAL,type:e.asn1.Type.OID,constructed:!1,capture:"keyOid"},{name:"AlgorithmIdentifier.parameters",captureAsn1:"keyParams"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:e.asn1.Class.UNIVERSAL,type:e.asn1.Type.BITSTRING,constructed:!1,capture:"keyValue"}]},e={name:"Certificate",tagClass:e.asn1.Class.UNIVERSAL,type:e.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:e.asn1.Class.UNIVERSAL,type:e.asn1.Type.SEQUENCE,constructed:!0,captureAsn1:"certificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:e.asn1.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:e.asn1.Class.UNIVERSAL,type:e.asn1.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:e.asn1.Class.UNIVERSAL,type:e.asn1.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:e.asn1.Class.UNIVERSAL,type:e.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:e.asn1.Class.UNIVERSAL,type:e.asn1.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:e.asn1.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:e.asn1.Class.UNIVERSAL,type:e.asn1.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:e.asn1.Class.UNIVERSAL,type:e.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:e.asn1.Class.UNIVERSAL,type:e.asn1.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:e.asn1.Class.UNIVERSAL,type:e.asn1.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:e.asn1.Class.UNIVERSAL,type:e.asn1.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:e.asn1.Class.UNIVERSAL,type:e.asn1.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:e.asn1.Class.UNIVERSAL,type:e.asn1.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},r,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:e.asn1.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:e.asn1.Class.UNIVERSAL,type:e.asn1.Type.BITSTRING,constructed:!1,capture:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:e.asn1.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:e.asn1.Class.UNIVERSAL,type:e.asn1.Type.BITSTRING,constructed:!1,capture:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:e.asn1.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:e.asn1.Class.UNIVERSAL,type:e.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:e.asn1.Class.UNIVERSAL,type:e.asn1.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:e.asn1.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:e.asn1.Class.UNIVERSAL,type:e.asn1.Type.BITSTRING,constructed:!1,capture:"certSignature"}]},u={THUMBPRINT_KEY:"internal\0thumbprint",THUMBPRINT_HASH:"SHA-256"};n.exports={validators:{privateKey:t,publicKey:r,certificate:e},thumbprint:function(e,t,r){if("function"!=typeof e.thumbprint)return Promise.reject(new Error("thumbprint not supported"));r=(r||u.THUMBPRINT_HASH).toUpperCase();var n=e.thumbprint(t),t="{"+(t=Object.keys(n).sort().map(function(e){var t=n[e];return i.isBuffer(t)&&(t=s.base64url.encode(t)),JSON.stringify(e)+":"+JSON.stringify(t)})).join(",")+"}";try{return o.digest(r,i.from(t,"utf8"))}catch(e){return Promise.reject(e)}},unpackProps:function(r,e){var n;e.forEach(function(e){if(e.name in r){n=n||{};var t=r[e.name];switch(e.type){case"binary":i.isBuffer(t)?r[e.name]=s.base64url.encode(t):t=s.base64url.decode(t);break;case"string":case"number":case"boolean":break;case"array":t=[].concat(t);break;case"object":t=a(t)}n[e.name]=t}});var t=n||{};return Object.keys(r).forEach(function(e){e in t||delete r[e]}),n},COMMON_PROPS:[{name:"kty",type:"string"},{name:"kid",type:"string"},{name:"use",type:"string"},{name:"alg",type:"string"},{name:"x5c",type:"array"},{name:"x5t",type:"binary"},{name:"x5u",type:"string"},{name:"key_ops",type:"array"}],INTERNALS:u}}.call(this,c(360).Buffer)},780:function(e,t,r){var i=r(1080),a=r(364);e.exports=function(n){return function(){var e=arguments;switch(e.length){case 0:return new n;case 1:return new n(e[0]);case 2:return new n(e[0],e[1]);case 3:return new n(e[0],e[1],e[2]);case 4:return new n(e[0],e[1],e[2],e[3]);case 5:return new n(e[0],e[1],e[2],e[3],e[4]);case 6:return new n(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new n(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var t=i(n.prototype),r=n.apply(t,e);return a(r)?r:t}}},781:function(e,t,r){var l,h=r(756);r(767),r(828),r(770),r(824),r(829),r(768),r(757),void 0===l&&(l=h.jsbn.BigInteger);var s=h.util.isNodejs?r(816):null,p=h.asn1,o=h.util;h.pki=h.pki||{},e.exports=h.pki.rsa=h.rsa=h.rsa||{};function c(e){if(!(e.algorithm in f.oids)){var t=new Error("Unknown message digest algorithm.");throw t.algorithm=e.algorithm,t}var r=f.oids[e.algorithm],n=p.oidToDer(r).getBytes(),t=p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[]);return(r=p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[])).value.push(p.create(p.Class.UNIVERSAL,p.Type.OID,!1,n)),r.value.push(p.create(p.Class.UNIVERSAL,p.Type.NULL,!1,"")),e=p.create(p.Class.UNIVERSAL,p.Type.OCTETSTRING,!1,e.digest().getBytes()),t.value.push(r),t.value.push(e),p.toDer(t).getBytes()}function u(e,t,r){if(r)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);var n;for(t.dP||(t.dP=t.d.mod(t.p.subtract(l.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(l.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));0<=(n=new l(h.util.bytesToHex(h.random.getBytes(t.n.bitLength()/8)),16)).compareTo(t.n)||!n.gcd(t.n).equals(l.ONE););for(var i=(e=e.multiply(n.modPow(t.e,t.n)).mod(t.n)).mod(t.p).modPow(t.dP,t.p),a=e.mod(t.q).modPow(t.dQ,t.q);i.compareTo(a)<0;)i=i.add(t.p);return(e=i.subtract(a).multiply(t.qInv).mod(t.p).multiply(t.q).add(a)).multiply(n.modInverse(t.n)).mod(t.n)}var f=h.pki,d=[6,4,2,4,2,4,6,2],y={name:"PrivateKeyInfo",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:p.Class.UNIVERSAL,type:p.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:p.Class.UNIVERSAL,type:p.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:p.Class.UNIVERSAL,type:p.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},g={name:"RSAPrivateKey",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:p.Class.UNIVERSAL,type:p.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:p.Class.UNIVERSAL,type:p.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:p.Class.UNIVERSAL,type:p.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:p.Class.UNIVERSAL,type:p.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:p.Class.UNIVERSAL,type:p.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:p.Class.UNIVERSAL,type:p.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:p.Class.UNIVERSAL,type:p.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:p.Class.UNIVERSAL,type:p.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:p.Class.UNIVERSAL,type:p.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},a={name:"RSAPublicKey",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:p.Class.UNIVERSAL,type:p.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:p.Class.UNIVERSAL,type:p.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},v=h.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:p.Class.UNIVERSAL,type:p.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:p.Class.UNIVERSAL,type:p.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]};function m(e,t,r){var n=h.util.createBuffer(),i=Math.ceil(t.n.bitLength()/8);if(e.length>i-11){t=new Error("Message is too long for PKCS#1 v1.5 padding.");throw t.length=e.length,t.max=i-11,t}n.putByte(0),n.putByte(r);var a=i-3-e.length;if(0===r||1===r)for(var s=0===r?0:255,o=0;o<a;++o)n.putByte(s);else for(;0<a;){for(var u=0,c=h.random.getBytes(a),o=0;o<a;++o)0===(s=c.charCodeAt(o))?++u:n.putByte(s);a=u}return n.putByte(0),n.putBytes(e),n}function C(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8),a=h.util.createBuffer(e),t=a.getByte(),e=a.getByte();if(0!==t||r&&0!==e&&1!==e||!r&&2!=e||r&&0===e&&void 0===n)throw new Error("Encryption block is invalid.");var s=0;if(0===e){for(var s=i-3-n,o=0;o<s;++o)if(0!==a.getByte())throw new Error("Encryption block is invalid.")}else if(1===e)for(s=0;1<a.length();){if(255!==a.getByte()){--a.read;break}++s}else if(2===e)for(s=0;1<a.length();){if(0===a.getByte()){--a.read;break}++s}if(0!==a.getByte()||s!==i-3-a.length())throw new Error("Encryption block is invalid.");return a.getBytes()}function n(e){e=e.toString(16);"8"<=e[0]&&(e="00"+e);e=h.util.hexToBytes(e);return 1<e.length&&(0===e.charCodeAt(0)&&0==(128&e.charCodeAt(1))||255===e.charCodeAt(0)&&128==(128&e.charCodeAt(1)))?e.substr(1):e}function E(e){return h.util.isNodejs&&"function"==typeof s[e]}function b(e){return void 0!==o.globalScope&&"object"==typeof o.globalScope.crypto&&"object"==typeof o.globalScope.crypto.subtle&&"function"==typeof o.globalScope.crypto.subtle[e]}function S(e){return void 0!==o.globalScope&&"object"==typeof o.globalScope.msCrypto&&"object"==typeof o.globalScope.msCrypto.subtle&&"function"==typeof o.globalScope.msCrypto.subtle[e]}function T(e){for(var t=h.util.hexToBytes(e.toString(16)),r=new Uint8Array(t.length),n=0;n<t.length;++n)r[n]=t.charCodeAt(n);return r}f.rsa.encrypt=function(e,t,r){var n=r,i=Math.ceil(t.n.bitLength()/8);!1!==r&&!0!==r?(n=2===r,a=m(e,t,r)):(a=h.util.createBuffer()).putBytes(e);for(var a=new l(a.toHex(),16),n=u(a,t,n).toString(16),s=h.util.createBuffer(),o=i-Math.ceil(n.length/2);0<o;)s.putByte(0),--o;return s.putBytes(h.util.hexToBytes(n)),s.getBytes()},f.rsa.decrypt=function(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8);if(e.length!==i){var a=new Error("Encrypted message length is invalid.");throw a.length=e.length,a.expected=i,a}e=new l(h.util.createBuffer(e).toHex(),16);if(0<=e.compareTo(t.n))throw new Error("Encrypted message is invalid.");for(var e=u(e,t,r).toString(16),s=h.util.createBuffer(),o=i-Math.ceil(e.length/2);0<o;)s.putByte(0),--o;return s.putBytes(h.util.hexToBytes(e)),!1!==n?C(s.getBytes(),t,r):s.getBytes()},f.rsa.createKeyPairGenerationState=function(e,t,r){e=(e="string"==typeof e?parseInt(e,10):e)||2048;var n=(r=r||{}).prng||h.random,i={nextBytes:function(e){for(var t=n.getBytesSync(e.length),r=0;r<e.length;++r)e[r]=t.charCodeAt(r)}},r=r.algorithm||"PRIMEINC";if("PRIMEINC"!==r)throw new Error("Invalid key generation algorithm: "+r);return(e={algorithm:r,state:0,bits:e,rng:i,eInt:t||65537,e:new l(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null}).e.fromInt(e.eInt),e},f.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var r=new l(null);r.fromInt(30);function n(e,t){return e|t}for(var i,a,s,o=0,u=+new Date,c=0;null===e.keys&&(t<=0||c<t);)0===e.state?(i=(s=null===e.p?e.pBits:e.qBits)-1,0===e.pqState?(e.num=new l(s,e.rng),e.num.testBit(i)||e.num.bitwiseTo(l.ONE.shiftLeft(i),n,e.num),e.num.dAddOffset(31-e.num.mod(r).byteValue(),0),o=0,++e.pqState):1===e.pqState?e.num.bitLength()>s?e.pqState=0:e.num.isProbablePrime((s=e.num.bitLength())<=100?27:s<=150?18:s<=200?15:s<=250?12:s<=300?9:s<=350?8:s<=400?7:s<=500?6:s<=600?5:s<=800?4:s<=1250?3:2)?++e.pqState:e.num.dAddOffset(d[o++%8],0):2===e.pqState?e.pqState=0===e.num.subtract(l.ONE).gcd(e.e).compareTo(l.ONE)?3:0:3===e.pqState&&(e.pqState=0,null===e.p?e.p=e.num:e.q=e.num,null!==e.p&&null!==e.q&&++e.state,e.num=null)):1===e.state?(e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state):2===e.state?(e.p1=e.p.subtract(l.ONE),e.q1=e.q.subtract(l.ONE),e.phi=e.p1.multiply(e.q1),++e.state):3===e.state?0===e.phi.gcd(e.e).compareTo(l.ONE)?++e.state:(e.p=null,e.q=null,e.state=0):4===e.state?(e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0)):5===e.state&&(a=e.e.modInverse(e.phi),e.keys={privateKey:f.rsa.setPrivateKey(e.n,e.e,a,e.p,e.q,a.mod(e.p1),a.mod(e.q1),e.q.modInverse(e.p)),publicKey:f.rsa.setPublicKey(e.n,e.e)}),c+=(a=+new Date)-u,u=a;return null!==e.keys},f.rsa.generateKeyPair=function(e,t,r,n){if(1===arguments.length?"object"==typeof e?(r=e,e=void 0):"function"==typeof e&&(n=e,e=void 0):2===arguments.length?"number"==typeof e?"function"==typeof t?(n=t,t=void 0):"number"!=typeof t&&(r=t,t=void 0):(r=e,n=t,t=e=void 0):3===arguments.length&&("number"==typeof t?"function"==typeof r&&(n=r,r=void 0):(n=r,r=t,t=void 0)),r=r||{},void 0===e&&(e=r.bits||2048),void 0===t&&(t=r.e||65537),!h.options.usePureJavaScript&&!r.prng&&256<=e&&e<=16384&&(65537===t||3===t))if(n){if(E("generateKeyPair"))return s.generateKeyPair("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(e,t,r){return e?n(e):void n(null,{privateKey:f.privateKeyFromPem(r),publicKey:f.publicKeyFromPem(t)})});if(b("generateKey")&&b("exportKey"))return o.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:T(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(e){return o.globalScope.crypto.subtle.exportKey("pkcs8",e.privateKey)}).then(void 0,function(e){n(e)}).then(function(e){e&&(e=f.privateKeyFromAsn1(p.fromDer(h.util.createBuffer(e))),n(null,{privateKey:e,publicKey:f.setRsaPublicKey(e.n,e.e)}))});if(S("generateKey")&&S("exportKey")){var i=o.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:T(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);return i.oncomplete=function(e){e=e.target.result,e=o.globalScope.msCrypto.subtle.exportKey("pkcs8",e.privateKey);e.oncomplete=function(e){e=e.target.result,e=f.privateKeyFromAsn1(p.fromDer(h.util.createBuffer(e)));n(null,{privateKey:e,publicKey:f.setRsaPublicKey(e.n,e.e)})},e.onerror=function(e){n(e)}},void(i.onerror=function(e){n(e)})}}else if(E("generateKeyPairSync")){var a=s.generateKeyPairSync("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:f.privateKeyFromPem(a.privateKey),publicKey:f.publicKeyFromPem(a.publicKey)}}a=f.rsa.createKeyPairGenerationState(e,t,r);if(!n)return f.rsa.stepKeyPairGenerationState(a,0),a.keys;!function(n,e,i){"function"==typeof e&&(i=e,e={});var r={algorithm:{name:(e=e||{}).algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};function a(){s(n.pBits,function(e,t){return e?i(e):(n.p=t,null!==n.q?o(e,n.q):void s(n.qBits,o))})}function s(e,t){h.prime.generateProbablePrime(e,r,t)}function o(e,t){if(e)return i(e);if(n.q=t,n.p.compareTo(n.q)<0&&(r=n.p,n.p=n.q,n.q=r),0!==n.p.subtract(l.ONE).gcd(n.e).compareTo(l.ONE))return n.p=null,void a();if(0!==n.q.subtract(l.ONE).gcd(n.e).compareTo(l.ONE))return n.q=null,void s(n.qBits,o);if(n.p1=n.p.subtract(l.ONE),n.q1=n.q.subtract(l.ONE),n.phi=n.p1.multiply(n.q1),0!==n.phi.gcd(n.e).compareTo(l.ONE))return n.p=n.q=null,void a();if(n.n=n.p.multiply(n.q),n.n.bitLength()!==n.bits)return n.q=null,void s(n.qBits,o);var r=n.e.modInverse(n.phi);n.keys={privateKey:f.rsa.setPrivateKey(n.n,n.e,r,n.p,n.q,r.mod(n.p1),r.mod(n.q1),n.q.modInverse(n.p)),publicKey:f.rsa.setPublicKey(n.n,n.e)},i(null,n.keys)}"prng"in e&&(r.prng=e.prng),a()}(a,r,n)},f.setRsaPublicKey=f.rsa.setPublicKey=function(e,t){var n={n:e,e:t,encrypt:function(e,t,r){if("string"==typeof t?t=t.toUpperCase():void 0===t&&(t="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===t)t={encode:function(e,t,r){return m(e,t,2).getBytes()}};else if("RSA-OAEP"===t||"RSAES-OAEP"===t)t={encode:function(e,t){return h.pkcs1.encode_rsa_oaep(t,e,r)}};else if(-1!==["RAW","NONE","NULL",null].indexOf(t))t={encode:function(e){return e}};else if("string"==typeof t)throw new Error('Unsupported encryption scheme: "'+t+'".');e=t.encode(e,n,!0);return f.rsa.encrypt(e,n,!0)},verify:function(e,t,r){"string"==typeof r?r=r.toUpperCase():void 0===r&&(r="RSASSA-PKCS1-V1_5"),"RSASSA-PKCS1-V1_5"===r?r={verify:function(e,t){return t=C(t,n,!0),e===p.fromDer(t).value[1].value}}:"NONE"!==r&&"NULL"!==r&&null!==r||(r={verify:function(e,t){return e===C(t,n,!0)}});t=f.rsa.decrypt(t,n,!0,!1);return r.verify(e,t,n.n.bitLength())}};return n},f.setRsaPrivateKey=f.rsa.setPrivateKey=function(e,t,r,n,i,a,s,o){var u={n:e,e:t,d:r,p:n,q:i,dP:a,dQ:s,qInv:o,decrypt:function(e,t,r){"string"==typeof t?t=t.toUpperCase():void 0===t&&(t="RSAES-PKCS1-V1_5");e=f.rsa.decrypt(e,u,!1,!1);if("RSAES-PKCS1-V1_5"===t)t={decode:C};else if("RSA-OAEP"===t||"RSAES-OAEP"===t)t={decode:function(e,t){return h.pkcs1.decode_rsa_oaep(t,e,r)}};else{if(-1===["RAW","NONE","NULL",null].indexOf(t))throw new Error('Unsupported encryption scheme: "'+t+'".');t={decode:function(e){return e}}}return t.decode(e,u,!1)},sign:function(e,t){var r=!1;void 0===(t="string"==typeof t?t.toUpperCase():t)||"RSASSA-PKCS1-V1_5"===t?(t={encode:c},r=1):"NONE"!==t&&"NULL"!==t&&null!==t||(t={encode:function(){return e}},r=1);t=t.encode(e,u.n.bitLength());return f.rsa.encrypt(t,u,r)}};return u},f.wrapRsaPrivateKey=function(e){return p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,p.integerToDer(0).getBytes()),p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.UNIVERSAL,p.Type.OID,!1,p.oidToDer(f.oids.rsaEncryption).getBytes()),p.create(p.Class.UNIVERSAL,p.Type.NULL,!1,"")]),p.create(p.Class.UNIVERSAL,p.Type.OCTETSTRING,!1,p.toDer(e).getBytes())])},f.privateKeyFromAsn1=function(e){var t,r,n,i,a,s,o,u={};if(p.validate(e,y,u,o=[])&&(e=p.fromDer(h.util.createBuffer(u.privateKey))),p.validate(e,g,u={},o=[]))return t=h.util.createBuffer(u.privateKeyModulus).toHex(),r=h.util.createBuffer(u.privateKeyPublicExponent).toHex(),n=h.util.createBuffer(u.privateKeyPrivateExponent).toHex(),i=h.util.createBuffer(u.privateKeyPrime1).toHex(),a=h.util.createBuffer(u.privateKeyPrime2).toHex(),s=h.util.createBuffer(u.privateKeyExponent1).toHex(),e=h.util.createBuffer(u.privateKeyExponent2).toHex(),c=h.util.createBuffer(u.privateKeyCoefficient).toHex(),f.setRsaPrivateKey(new l(t,16),new l(r,16),new l(n,16),new l(i,16),new l(a,16),new l(s,16),new l(e,16),new l(c,16));var c=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw c.errors=o,c},f.privateKeyToAsn1=f.privateKeyToRSAPrivateKey=function(e){return p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,p.integerToDer(0).getBytes()),p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,n(e.n)),p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,n(e.e)),p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,n(e.d)),p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,n(e.p)),p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,n(e.q)),p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,n(e.dP)),p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,n(e.dQ)),p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,n(e.qInv))])},f.publicKeyFromAsn1=function(e){var t,r={};if(p.validate(e,v,r,t=[])){var n=p.derToOid(r.publicKeyOid);if(n!==f.oids.rsaEncryption)throw(i=new Error("Cannot read public key. Unknown OID.")).oid=n,i;e=r.rsaPublicKey}if(!p.validate(e,a,r,t=[]))throw(i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.")).errors=t,i;var i=h.util.createBuffer(r.publicKeyModulus).toHex(),r=h.util.createBuffer(r.publicKeyExponent).toHex();return f.setRsaPublicKey(new l(i,16),new l(r,16))},f.publicKeyToAsn1=f.publicKeyToSubjectPublicKeyInfo=function(e){return p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.UNIVERSAL,p.Type.OID,!1,p.oidToDer(f.oids.rsaEncryption).getBytes()),p.create(p.Class.UNIVERSAL,p.Type.NULL,!1,"")]),p.create(p.Class.UNIVERSAL,p.Type.BITSTRING,!1,[f.publicKeyToRSAPublicKey(e)])])},f.publicKeyToRSAPublicKey=function(e){return p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,n(e.n)),p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,n(e.e))])}},782:function(t,e,i){"use strict";!function(r){var n=i(895),e={encode:function(e,t){return e instanceof ArrayBuffer&&(e=new Uint8Array(e)),r.isBuffer(e)||(e=r.from(e,t)),n.encode(e)},decode:n.toBuffer};t.exports=e}.call(this,i(360).Buffer)},783:function(t,e,r){"use strict";!function(l){function e(){var r={};Object.defineProperty(this,"register",{value:function(e){if(!e||"string"!=typeof e.kty||!e.kty)throw new Error("invalid Key factory");var t=e.kty;return r[t]=e,this}}),Object.defineProperty(this,"unregister",{value:function(e){if(!e||"string"!=typeof e.kty||!e.kty)throw new Error("invalid Key factory");var t=e.kty;return e===r[t]&&delete r[t],this}}),Object.defineProperty(this,"get",{value:function(e){return r[e||""]||void 0}}),Object.defineProperty(this,"all",{value:function(){return Object.keys(r).map(function(e){return r[e]})}})}var o=r(764),u=r(766),h=r(758),p=r(759),f={BaseKey:r(784),helpers:r(777)},d=new e;function c(a,i){var s={};Object.defineProperty(this,"generate",{value:function(t,e,r){var n=a.get(t);if(!n)return Promise.reject(new Error("unsupported key type"));(r=o(r||{})).kty=t;var i=this;return n.generate(e).then(function(e){return e=u(r,e,{kty:t}),i.add(e)})}}),Object.defineProperty(this,"add",{value:function(t,e,r){if(r=r||{},l.isBuffer(t)||"string"==typeof t)if("json"===(e=(e||"json").toLowerCase()))t=JSON.parse(t.toString("utf8"));else try{if(n="pem"===e?function(e){var t={};if(!h.pem.decode(e).some(function(e){switch(e.type){case"CERTIFICATE":t.form="pkix";break;case"PUBLIC KEY":t.form="spki";break;case"PRIVATE KEY":t.form="pkcs8";break;case"EC PRIVATE KEY":case"RSA PRIVATE KEY":t.form="private";break;default:return!1}return t.body=e.body,!0}))throw new Error("supported PEM type not found");return t}(t):{body:t.toString("binary"),form:e},!(t=function(e,r){var n,t,i,a={},s=[],o=r.form,u=r.body,c=null;switch(r=h.asn1.fromDer(u),o){case"private":e.all().some(function(e){if(n)return!1;if(!e.validators)return!1;var t=e.validators.oid,e=e.validators.privateKey;return!!e&&(a={},s=[],(n=h.asn1.validate(r,e,a,s))&&(a.keyOid=h.asn1.oidToDer(t),a.parsed=!0),n)}),a.type="private";break;case"pkcs8":n=h.asn1.validate(r,f.helpers.validators.privateKey,a,s),a.type="private";break;case"public":case"spki":n=h.asn1.validate(r,f.helpers.validators.publicKey,a,s),a.type="public";break;case"pkix":case"x509":(n=h.asn1.validate(r,f.helpers.validators.certificate,a,s))&&(i=a,["certIssuer","certSubject"].forEach(function(e){var t=h.pki.RDNAttributesAsArray(i[e]),r=i[e]={};t.forEach(function(e){r[e.name||e.type]=e.value})}),a=i,(t=h.md.sha1.create()).update(u),c=p.base64url.encode(l.from(t.digest().toHex(),"hex"))),a.type="public"}return n?(a.keyOid&&(a.keyOid=h.asn1.derToOid(a.keyOid)),n=null,d.all().forEach(function(e){n||e&&"function"==typeof e.import&&(n=e.import(a))}),n&&a.certSubject&&a.certSubject.commonName&&(n.kid=a.certSubject.commonName),n&&c&&(n.x5t=c),n):null}(a,n)))throw new Error("no importer for key");Object.keys(r).forEach(function(e){t[e]=r[e]})}catch(e){return Promise.reject(e)}else t=c.isKey(t)?t.toJSON(!0):o(t);var n=a.get(t.kty);if(!n)return Promise.reject(new Error("unsupported key type"));var i=this;return n.prepare(t).then(function(e){return new f.BaseKey(t.kty,i,t,e)}).then(function(e){var t=e.kid||"";return(s[t]=s[t]||[]).push(e),e})}}),Object.defineProperty(this,"remove",{value:function(e){var t,r;e&&(!(t=s[e.kid])||-1!==(r=t.indexOf(e))&&(t.splice(r,1),t.length||delete s[e.kid]))}}),Object.defineProperty(this,"all",{value:function(t,e){void 0!==(t=t||{}).kid&&null!==t.kid&&"string"!=typeof t.kid&&(t.kid=String(t.kid));function r(e){return(!t.kty||!e.kty||t.kty===e.kty)&&(!t.use||!e.use||t.use===e.use)&&(!t.alg||("dir"===t.alg||!e.alg||t.alg===e.alg)&&e.supports(t.alg))}var n=[];return Object.keys(s).forEach(function(e){t.kid&&t.kid!==e||(e=s[e].filter(r)).length&&(n=n.concat(e))}),n=!e&&i?n.concat(i.all(t)):n}}),Object.defineProperty(this,"get",{value:function(e,t,r){"boolean"==typeof e?(r=e,t=e=null):"object"==typeof e&&(r=t,t=e,e=null),t=t||{},e&&(t.kid=e),void 0!==t.kid&&null!==t.kid&&"string"!=typeof t.kid&&(t.kid=String(t.kid));e=this.all(t,!0);return(e=!e.length&&i&&!r?i.get(t,r):e)[0]||null}}),Object.defineProperty(this,"temp",{value:function(){return new c(a,this)}}),Object.defineProperty(this,"toJSON",{value:function(t){var r=[];return Object.keys(s).forEach(function(e){e=s[e].map(function(e){return e.toJSON(t)});r=r.concat(e)}),{keys:r}}})}c.isKeyStore=function(e){return!!e&&"object"==typeof e&&"function"==typeof e.get&&"function"==typeof e.all&&"function"==typeof e.generate&&"function"==typeof e.add&&"function"==typeof e.remove},c.createKeyStore=function(){return new c(d)},c.asKeyStore=function(e){if(c.isKeyStore(e))return Promise.resolve(e);var t=c.createKeyStore();if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e))r=e;else{if(!("keys"in e))return Promise.reject(new Error("invalid keystore"));r=e.keys}var r=r.map(function(e){return t.add(e)}),r=Promise.all(r);return r.then(function(){return t})},c.isKey=function(e){return!!e&&"object"==typeof e&&!!c.isKeyStore(e.keystore)&&"string"==typeof e.kty&&"number"==typeof e.length&&"function"==typeof e.algorithms&&"function"==typeof e.supports&&"function"==typeof e.encrypt&&"function"==typeof e.decrypt&&"function"==typeof e.wrap&&"function"==typeof e.unwrap&&"function"==typeof e.sign&&"function"==typeof e.verify},c.createKey=function(e,t,r){return c.createKeyStore().generate(e,t,r)},c.asKey=function(e,t,r){return c.isKey(e)?Promise.resolve(e):c.createKeyStore().add(e,t,r)},t.exports={KeyRegistry:e,KeyStore:c,registry:d}}.call(this,r(360).Buffer)},784:function(e,t,r){"use strict";!function(l){var h=r(766),p=r(899),f=r(833),d=r(764),y=r(902),g=r(907),v=r(834),m=r(835),C=r(874),E=r(803),b=r(841),S=r(777),T=r(759);e.exports=function(n,e,t,a){if(!n)throw new Error("kty cannot be null");if(!e)throw new Error("keystore cannot be null");if(!t)throw new Error("props cannot be null");if("string"==typeof t&&(t=JSON.parse(t)),!a)throw new Error("cfg cannot be null");var r,i,s=[],o={},u={};t=d(t),r=f({},t[S.INTERNALS.THUMBPRINT_KEY]||{}),delete t[S.INTERNALS.THUMBPRINT_KEY],Object.keys(r).forEach(function(e){var t=r[e];i||(i=t,l.isBuffer(i)&&(i=T.base64url.encode(i))),l.isBuffer(t)||(t=T.base64url.decode(t),r[e]=t)}),t.kty=n,t.kid=t.kid||i||p();var c=Object.keys(S.COMMON_PROPS).map(function(e){return S.COMMON_PROPS[e].name});u.base=m(t,c),s=s.concat(Object.keys(u.base)),u.public=d(t),o.public=a.publicKey(u.public),o.public&&(s=s.concat(Object.keys(u.public))),u.private=d(t),o.private=a.privateKey(u.private),o.private&&(s=s.concat(Object.keys(u.private))),u.extra=v(t,s),s=o.public&&"length"in o.public?o.public.length:o.private&&"length"in o.private?o.private.length:NaN,Object.defineProperty(this,"keystore",{value:e,enumerable:!0}),Object.defineProperty(this,"length",{value:s,enumerable:!0}),Object.defineProperty(this,"kty",{value:n,enumerable:!0}),Object.defineProperty(this,"kid",{value:u.base.kid,enumerable:!0}),Object.defineProperty(this,"use",{value:u.base.use||"",enumerable:!0}),Object.defineProperty(this,"alg",{value:u.base.alg||"",enumerable:!0}),Object.defineProperty(this,"thumbprint",{value:function(t){if(t=(t||S.INTERNALS.THUMBPRINT_HASH).toUpperCase(),r[t])return Promise.resolve(r[t]);var e=S.thumbprint(a,u,t);return e.then(function(e){return e&&(r[t]=e),e})}}),Object.defineProperty(this,"algorithms",{value:function(e){var t=[];this.use&&"sig"!==this.use||(e&&b.MODE_SIGN!==e||t.push(b.MODE_SIGN),e&&b.MODE_VERIFY!==e||t.push(b.MODE_VERIFY)),this.use&&"enc"!==this.use||(e&&b.MODE_ENCRYPT!==e||t.push(b.MODE_ENCRYPT),e&&b.MODE_DECRYPT!==e||t.push(b.MODE_DECRYPT),e&&b.MODE_WRAP!==e||t.push(b.MODE_WRAP),e&&b.MODE_UNWRAP!==e||t.push(b.MODE_UNWRAP));var r=this,e=t.map(function(e){return a.algorithms.call(r,o,e)}),e=y(e);return e=C(e),this.alg&&(t="oct"===n?[this.alg,"dir"]:[this.alg],e=g(e,t)),e}}),Object.defineProperty(this,"supports",{value:function(e,t){return-1!==this.algorithms(t).indexOf(e)}}),Object.defineProperty(this,"has",{value:function(e,t){return!!(u.base&&e in u.base)||!!(o.public&&e in o.public)||!!(u.extra&&e in u.extra)||!!(t&&o.private&&e in o.private)}}),Object.defineProperty(this,"get",{value:function(e,t){var r;return u.base&&e in u.base?r=u.base:o.public&&e in o.public?r=o.public:u.extra&&e in u.extra?r=u.extra:t&&o.private&&e in o.private&&(r=o.private),r&&r[e]||null}}),Object.defineProperty(this,"toJSON",{value:function(e,t){Array.isArray(e)&&(t=e,e=!1);var r=h(r={},u.base,u.public,"boolean"==typeof e&&e?u.private:{},u.extra);return v(r,t||[])}}),Object.defineProperty(this,"toPEM",{value:function(e){if(null===e&&(e=!1),!a.convertToPEM)throw new Error("Unsupported key type for PEM encoding");var t=e?o.private:o.public;if(!t)throw new Error("Invalid key");return a.convertToPEM.call(this,t,e)}}),Object.defineProperty(this,"toObject",{value:function(e,t){Array.isArray(e)&&(t=e,e=!1);var r=h(r={},u.base,o.public,"boolean"==typeof e&&e?o.private:{},u.extra);return v(r,(t||[]).concat("length"))}}),Object.defineProperty(this,"sign",{value:function(e,t,r){if(-1===this.algorithms("sign").indexOf(e))return Promise.reject(new Error("unsupported algorithm"));var n=a.signKey.call(this,e,o);return n?(r=r?d(r):{},a.signProps&&(r=h(r,a.signProps.call(this,e,r))),E.sign(e,n,t,r)):Promise.reject(new Error("improper key"))}}),Object.defineProperty(this,"verify",{value:function(e,t,r,n){if(-1===this.algorithms("verify").indexOf(e))return Promise.reject(new Error("unsupported algorithm"));var i=a.verifyKey.call(this,e,o);return i?(n=n?d(n):{},a.verifyProps&&(n=h(n,a.verifyProps.call(this,e,n))),E.verify(e,i,t,r,n)):Promise.reject(new Error("improper key"))}}),Object.defineProperty(this,"encrypt",{value:function(e,t,r){if(-1===this.algorithms("encrypt").indexOf(e))return Promise.reject(new Error("unsupported algorithm"));var n=a.encryptKey.call(this,e,o);return n?(r=r?d(r):{},a.encryptProps&&(r=h(r,a.encryptProps.call(this,e,r))),E.encrypt(e,n,t,r)):Promise.reject(new Error("improper key"))}}),Object.defineProperty(this,"decrypt",{value:function(e,t,r){if(-1===this.algorithms("decrypt").indexOf(e))return Promise.reject(new Error("unsupported algorithm"));var n=a.decryptKey.call(this,e,o);return n?(r=r?d(r):{},a.decryptProps&&(r=h(r,a.decryptProps.call(this,e,r))),E.decrypt(e,n,t,r)):Promise.reject(new Error("improper key"))}}),Object.defineProperty(this,"wrap",{value:function(e,t,r){if(-1===this.algorithms("wrap").indexOf(e))return Promise.reject(new Error("unsupported algorithm"));var n=a.wrapKey.call(this,e,o);return n?(r=r?d(r):{},a.wrapProps&&(r=h(r,a.wrapProps.call(this,e,r))),E.encrypt(e,n,t,r)):Promise.reject(new Error("improper key"))}}),Object.defineProperty(this,"unwrap",{value:function(e,t,r){if(-1===this.algorithms("unwrap").indexOf(e))return Promise.reject(new Error("unsupported algorithm"));var n=a.unwrapKey.call(this,e,o);return n?(r=r?d(r):{},a.unwrapProps&&(r=h(r,a.unwrapProps.call(this,e,r))),E.decrypt(e,n,t,r)):Promise.reject(new Error("improper key"))}})}}.call(this,r(360).Buffer)},785:function(e,t,r){"use strict";!function(n){var i=r(758),a=r(761),s={};["SHA-1","SHA-256","SHA-384","SHA-512"].forEach(function(e){var r,t;s[e]={digest:(r=(e=e).replace("SHA-","SHA").toLowerCase(),t={name:e},a.setupFallback(function(e){var t=a.nodeCrypto.createHash(r);return t.update(e),t.digest()},function(e){return a.subtleCrypto.digest(t,e).then(function(e){return n.from(e)})},function(e){var t=i.md[r].create();return t.update(e.toString("binary")),t=n.from(t.digest().bytes(),"binary"),Promise.resolve(t)}))}}),e.exports=s}.call(this,r(360).Buffer)},786:function(e,t,r){"use strict";!function(s){var o=r(805),u=e.exports={intToBigEndian:function(e,t,r){if("number"==typeof e)switch(arguments.length){case 1:t=s.alloc(4),u.intToBigEndian(e,t,0);break;case 3:t[r]=255&e>>>24,t[++r]=255&e>>>16,t[++r]=255&e>>>8,t[++r]=255&e;break;default:throw new TypeError("Expected 1 or 3 arguments.")}else switch(arguments.length){case 1:t=s.alloc(4*e.length),u.intToBigEndian(e,t,0);break;case 3:for(var n=0;n<e.length;++n)u.intToBigEndian(e[n],t,r),r+=4;break;default:throw new TypeError("Expected 1 or 3 arguments.")}return t},longToBigEndian:function(e,t,r){if(Array.isArray(e))switch(arguments.length){case 1:t=s.alloc(8*e.length),u.longToBigEndian(e,t,0);break;case 3:for(var n=0;n<e.length;++n)u.longToBigEndian(e[n],t,r),r+=8;break;default:throw new TypeError("Expected 1 or 3 arguments.")}else switch(arguments.length){case 1:t=s.alloc(8),u.longToBigEndian(e,t,0);break;case 3:var i=e.low,a=e.high;u.intToBigEndian(a,t,r),u.intToBigEndian(i,t,r+4);break;default:throw new TypeError("Expected 1 or 3 arguments.")}return t},bigEndianToInt:function(e,t,r){switch(arguments.length){case 2:var n=e[t]<<24;return n|=(255&e[++t])<<16,(n|=(255&e[++t])<<8)|255&e[++t];case 3:for(var i=0;i<r.length;++i)r[i]=u.bigEndianToInt(e,t),t+=4;break;default:throw new TypeError("Expected 2 or 3 arguments.")}},bigEndianToLong:function(e,t,r){switch(arguments.length){case 2:var n=u.bigEndianToInt(e,t),i=u.bigEndianToInt(e,t+4);return new o(i,n);case 3:for(var a=0;a<r.length;++a)r[a]=u.bigEndianToLong(e,t),t+=8;break;default:throw new TypeError("Expected 2 or 3 arguments.")}}}}.call(this,r(360).Buffer)},787:function(e,t){e.exports=function(e){return e}},790:function(e,t){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}},793:function(e,t,r){"use strict";r={createSign:r(877).createSign,createVerify:r(940).createVerify};e.exports=r},794:function(e,t){e.exports=function(){}},795:function(e,t){e.exports=function(){return[]}},796:function(e,t,r){var n=r(756);r(757),e.exports=n.cipher=n.cipher||{},n.cipher.algorithms=n.cipher.algorithms||{},n.cipher.createCipher=function(e,t){var r=e;if(!(r="string"==typeof r&&(r=n.cipher.getAlgorithm(r))?r():r))throw new Error("Unsupported algorithm: "+e);return new n.cipher.BlockCipher({algorithm:r,key:t,decrypt:!1})},n.cipher.createDecipher=function(e,t){var r=e;if(!(r="string"==typeof r&&(r=n.cipher.getAlgorithm(r))?r():r))throw new Error("Unsupported algorithm: "+e);return new n.cipher.BlockCipher({algorithm:r,key:t,decrypt:!0})},n.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),n.cipher.algorithms[e]=t},n.cipher.getAlgorithm=function(e){return(e=e.toUpperCase())in n.cipher.algorithms?n.cipher.algorithms[e]:null};e=n.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};e.prototype.start=function(e){var t,r={};for(t in e=e||{})r[t]=e[t];r.decrypt=this._decrypt,this._finish=!1,this._input=n.util.createBuffer(),this.output=e.output||n.util.createBuffer(),this.mode.start(r)},e.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},e.prototype.finish=function(t){!t||"ECB"!==this.mode.name&&"CBC"!==this.mode.name||(this.mode.pad=function(e){return t(this.blockSize,e,!1)},this.mode.unpad=function(e){return t(this.blockSize,e,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e)||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e)))}},797:function(e,t,r){var c=r(756);r(771),r(757),(e.exports=c.hmac=c.hmac||{}).create=function(){var a=null,s=null,o=null,u=null,e={start:function(e,t){if(null!==e)if("string"==typeof e){if(!((e=e.toLowerCase())in c.md.algorithms))throw new Error('Unknown hash algorithm "'+e+'"');s=c.md.algorithms[e].create()}else s=e;if(null===t)t=a;else{if("string"==typeof t)t=c.util.createBuffer(t);else if(c.util.isArray(t)){var r=t;t=c.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}var i;for((i=t.length())>s.blockLength&&(s.start(),s.update(t.bytes()),t=s.digest()),o=c.util.createBuffer(),u=c.util.createBuffer(),i=t.length(),n=0;n<i;++n)r=t.at(n),o.putByte(54^r),u.putByte(92^r);if(i<s.blockLength)for(r=s.blockLength-i,n=0;n<r;++n)o.putByte(54),u.putByte(92);a=t,o=o.bytes(),u=u.bytes()}s.start(),s.update(o)},update:function(e){s.update(e)},getMac:function(){var e=s.digest().bytes();return s.start(),s.update(u),s.update(e),s.digest()}};return e.digest=e.getMac,e}},798:function(t,e,r){!function(C){var E=r(756);r(797),r(771),r(757);var b,e=E.pkcs5=E.pkcs5||{};E.util.isNodejs&&!E.options.usePureJavaScript&&(b=r(816)),t.exports=E.pbkdf2=e.pbkdf2=function(e,t,r,n,i,a){if("function"==typeof i&&(a=i,i=null),E.util.isNodejs&&!E.options.usePureJavaScript&&b.pbkdf2&&(null===i||"object"!=typeof i)&&(4<b.pbkdf2Sync.length||!i||"sha1"===i))return"string"!=typeof i&&(i="sha1"),e=C.from(e,"binary"),t=C.from(t,"binary"),a?4===b.pbkdf2Sync.length?b.pbkdf2(e,t,r,n,function(e,t){return e?a(e):void a(null,t.toString("binary"))}):b.pbkdf2(e,t,r,n,i,function(e,t){return e?a(e):void a(null,t.toString("binary"))}):(4===b.pbkdf2Sync.length?b.pbkdf2Sync(e,t,r,n):b.pbkdf2Sync(e,t,r,n,i)).toString("binary");if("string"==typeof(i=null==i?"sha1":i)){if(!(i in E.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=E.md[i].create()}var s=i.digestLength;if(4294967295*s<n){var o=new Error("Derived key is too long.");if(a)return a(o);throw o}var u=Math.ceil(n/s),c=n-(u-1)*s,l=E.hmac.create();l.start(i,e);var h,p,f="";if(!a){for(var d=1;d<=u;++d){l.start(null,null),l.update(t),l.update(E.util.int32ToBytes(d));for(var y=p=l.digest().getBytes(),g=2;g<=r;++g)l.start(null,null),l.update(p),h=l.digest().getBytes(),y=E.util.xorBytes(y,h,s),p=h;f+=d<u?y:y.substr(0,c)}return f}function v(){if(u<d)return a(null,f);l.start(null,null),l.update(t),l.update(E.util.int32ToBytes(d)),y=p=l.digest().getBytes(),g=2,m()}function m(){if(g<=r)return l.start(null,null),l.update(p),h=l.digest().getBytes(),y=E.util.xorBytes(y,h,s),p=h,++g,E.util.setImmediate(m);f+=d<u?y:y.substr(0,c),++d,v()}d=1,v()}}.call(this,r(360).Buffer)},799:function(e,t,r){var l=r(756);r(771),r(757);e=e.exports=l.sha1=l.sha1||{};(l.md.sha1=l.md.algorithms.sha1=e).create=function(){n||(h=String.fromCharCode(128),h+=l.util.fillString(String.fromCharCode(0),64),n=!0);var s=null,o=l.util.createBuffer(),u=new Array(80),c={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){c.messageLength=0,c.fullMessageLength=c.messageLength64=[];for(var e=c.messageLengthSize/4,t=0;t<e;++t)c.fullMessageLength.push(0);return o=l.util.createBuffer(),s={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},c}};return c.start(),c.update=function(e,t){var r=(e="utf8"===t?l.util.encodeUtf8(e):e).length;c.messageLength+=r;for(var r=[r/4294967296>>>0,r>>>0],n=c.fullMessageLength.length-1;0<=n;--n)c.fullMessageLength[n]+=r[1],r[1]=r[0]+(c.fullMessageLength[n]/4294967296>>>0),c.fullMessageLength[n]=c.fullMessageLength[n]>>>0,r[0]=r[1]/4294967296>>>0;return o.putBytes(e),p(s,u,o),(2048<o.read||0===o.length())&&o.compact(),c},c.digest=function(){var e=l.util.createBuffer();e.putBytes(o.bytes());var t,r=c.fullMessageLength[c.fullMessageLength.length-1]+c.messageLengthSize&c.blockLength-1;e.putBytes(h.substr(0,c.blockLength-r));for(var n=8*c.fullMessageLength[0],i=0;i<c.fullMessageLength.length-1;++i)n+=(t=8*c.fullMessageLength[i+1])/4294967296>>>0,e.putInt32(n>>>0),n=t>>>0;e.putInt32(n);var a={h0:s.h0,h1:s.h1,h2:s.h2,h3:s.h3,h4:s.h4};p(a,u,e);r=l.util.createBuffer();return r.putInt32(a.h0),r.putInt32(a.h1),r.putInt32(a.h2),r.putInt32(a.h3),r.putInt32(a.h4),r},c};var h=null,n=!1;function p(e,t,r){for(var n,i,a,s,o,u,c,l=r.length();64<=l;){for(i=e.h0,a=e.h1,s=e.h2,o=e.h3,u=e.h4,c=0;c<16;++c)n=r.getInt32(),n=(i<<5|i>>>27)+(o^a&(s^o))+u+1518500249+(t[c]=n),u=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;c<20;++c)n=(n=t[c-3]^t[c-8]^t[c-14]^t[c-16])<<1|n>>>31,n=(i<<5|i>>>27)+(o^a&(s^o))+u+1518500249+(t[c]=n),u=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;c<32;++c)n=(n=t[c-3]^t[c-8]^t[c-14]^t[c-16])<<1|n>>>31,n=(i<<5|i>>>27)+(a^s^o)+u+1859775393+(t[c]=n),u=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;c<40;++c)n=(n=t[c-6]^t[c-16]^t[c-28]^t[c-32])<<2|n>>>30,n=(i<<5|i>>>27)+(a^s^o)+u+1859775393+(t[c]=n),u=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;c<60;++c)n=(n=t[c-6]^t[c-16]^t[c-28]^t[c-32])<<2|n>>>30,n=(i<<5|i>>>27)+(a&s|o&(a^s))+u+2400959708+(t[c]=n),u=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;c<80;++c)n=(n=t[c-6]^t[c-16]^t[c-28]^t[c-32])<<2|n>>>30,n=(i<<5|i>>>27)+(a^s^o)+u+3395469782+(t[c]=n),u=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;e.h0=e.h0+i|0,e.h1=e.h1+a|0,e.h2=e.h2+s|0,e.h3=e.h3+o|0,e.h4=e.h4+u|0,l-=64}}},800:function(e,t,r){var a=r(756);function n(e,t){a.cipher.registerAlgorithm(e,function(){return new a.des.Algorithm(e,t)})}r(796),r(822),r(757),e.exports=a.des=a.des||{},a.des.startEncrypting=function(e,t,r,n){n=s({key:e,output:r,decrypt:!1,mode:n||(null===t?"ECB":"CBC")});return n.start(t),n},a.des.createEncryptionCipher=function(e,t){return s({key:e,output:null,decrypt:!1,mode:t})},a.des.startDecrypting=function(e,t,r,n){n=s({key:e,output:r,decrypt:!0,mode:n||(null===t?"ECB":"CBC")});return n.start(t),n},a.des.createDecryptionCipher=function(e,t){return s({key:e,output:null,decrypt:!0,mode:t})},a.des.Algorithm=function(e,t){var r=this;r.name=e,r.mode=new t({blockSize:8,cipher:{encrypt:function(e,t){return i(r._keys,e,t,!1)},decrypt:function(e,t){return i(r._keys,e,t,!0)}}}),r._init=!1},a.des.Algorithm.prototype.initialize=function(e){if(!this._init){e=a.util.createBuffer(e.key);if(0===this.name.indexOf("3DES")&&24!==e.length())throw new Error("Invalid Triple-DES key size: "+8*e.length());this._keys=function(e){for(var t=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],a=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],o=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],u=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],c=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],l=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],h=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],p=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],f=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],d=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],y=8<e.length()?3:1,g=[],v=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],m=0,C=0;C<y;C++){var E=e.getInt32();E^=(S=252645135&(E>>>4^(T=e.getInt32())))<<4,E^=S=65535&((T^=S)>>>-16^E),E^=(S=858993459&(E>>>2^(T^=S<<-16)))<<2,E^=S=65535&((T^=S)>>>-16^E),E^=(S=1431655765&(E>>>1^(T^=S<<-16)))<<1,E^=S=16711935&((T^=S)>>>8^E),S=(E^=(S=1431655765&(E>>>1^(T^=S<<8)))<<1)<<8|(T^=S)>>>20&240,E=T<<24|T<<8&16711680|T>>>8&65280|T>>>24&240,T=S;for(var b=0;b<v.length;++b){var S,T=v[b]?(E=E<<2|E>>>26,T<<2|T>>>26):(E=E<<1|E>>>27,T<<1|T>>>27),I=t[(E&=-15)>>>28]|r[E>>>24&15]|n[E>>>20&15]|i[E>>>16&15]|a[E>>>12&15]|s[E>>>8&15]|o[E>>>4&15],A=u[(T&=-15)>>>28]|c[T>>>24&15]|l[T>>>20&15]|h[T>>>16&15]|p[T>>>12&15]|f[T>>>8&15]|d[T>>>4&15];g[m++]=I^(S=65535&(A>>>16^I)),g[m++]=A^S<<16}}return g}(e),this._init=!0}},n("DES-ECB",a.cipher.modes.ecb),n("DES-CBC",a.cipher.modes.cbc),n("DES-CFB",a.cipher.modes.cfb),n("DES-OFB",a.cipher.modes.ofb),n("DES-CTR",a.cipher.modes.ctr),n("3DES-ECB",a.cipher.modes.ecb),n("3DES-CBC",a.cipher.modes.cbc),n("3DES-CFB",a.cipher.modes.cfb),n("3DES-OFB",a.cipher.modes.ofb),n("3DES-CTR",a.cipher.modes.ctr);var y=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],g=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],v=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],m=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],C=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],E=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],b=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],S=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function i(e,t,r,n){var i=32===e.length?3:9,a=3==i?n?[30,-2,-2]:[0,32,2]:n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2],s=t[0];s^=(f=252645135&(s>>>4^(d=t[1])))<<4,s^=(f=65535&(s>>>16^(d^=f)))<<16,s^=f=858993459&((d^=f)>>>2^s),s^=f=16711935&((d^=f<<2)>>>8^s),s=(s^=(f=1431655765&(s>>>1^(d^=f<<8)))<<1)<<1|s>>>31,d=(d^=f)<<1|d>>>31;for(var o=0;o<i;o+=3){for(var u=a[o+1],c=a[o+2],l=a[o];l!=u;l+=c)var h=d^e[l],p=(d>>>4|d<<28)^e[l+1],f=s,s=d,d=f^(g[h>>>24&63]|m[h>>>16&63]|E[h>>>8&63]|S[63&h]|y[p>>>24&63]|v[p>>>16&63]|C[p>>>8&63]|b[63&p]);f=s,s=d,d=f}d=d>>>1|d<<31,d^=f=1431655765&((s=s>>>1|s<<31)>>>1^d),d^=(f=16711935&(d>>>8^(s^=f<<1)))<<8,d^=(f=858993459&(d>>>2^(s^=f)))<<2,d^=f=65535&((s^=f)>>>16^d),d^=f=252645135&((s^=f<<16)>>>4^d),r[0]=s^=f<<4,r[1]=d}function s(e){var n,t="DES-"+((e=e||{}).mode||"CBC").toUpperCase(),i=(n=e.decrypt?a.cipher.createDecipher(t,e.key):a.cipher.createCipher(t,e.key)).start;return n.start=function(e,t){var r=null;t instanceof a.util.ByteBuffer&&(r=t,t={}),(t=t||{}).output=r,t.iv=e,i.call(n,t)},n}},801:function(e,t,r){var m=r(756);r(774),r(767),r(800),r(771),r(890),r(770),r(775),r(802),r(781),r(757);var d=m.asn1,C=e.exports=m.pki=m.pki||{},y=C.oids,c={};c.CN=y.commonName,c.commonName="CN",c.C=y.countryName,c.countryName="C",c.L=y.localityName,c.localityName="L",c.ST=y.stateOrProvinceName,c.stateOrProvinceName="ST",c.O=y.organizationName,c.organizationName="O",c.OU=y.organizationalUnitName,c.organizationalUnitName="OU",c.E=y.emailAddress,c.emailAddress="E";var e=m.pki.rsa.publicKeyValidator,o={name:"Certificate",tagClass:d.Class.UNIVERSAL,type:d.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:d.Class.UNIVERSAL,type:d.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:d.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:d.Class.UNIVERSAL,type:d.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:d.Class.UNIVERSAL,type:d.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:d.Class.UNIVERSAL,type:d.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:d.Class.UNIVERSAL,type:d.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:d.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:d.Class.UNIVERSAL,type:d.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:d.Class.UNIVERSAL,type:d.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:d.Class.UNIVERSAL,type:d.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:d.Class.UNIVERSAL,type:d.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:d.Class.UNIVERSAL,type:d.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:d.Class.UNIVERSAL,type:d.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:d.Class.UNIVERSAL,type:d.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},e,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:d.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:d.Class.UNIVERSAL,type:d.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:d.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:d.Class.UNIVERSAL,type:d.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:d.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:d.Class.UNIVERSAL,type:d.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:d.Class.UNIVERSAL,type:d.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:d.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:d.Class.UNIVERSAL,type:d.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},i={name:"rsapss",tagClass:d.Class.UNIVERSAL,type:d.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:d.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:d.Class.UNIVERSAL,type:d.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:d.Class.UNIVERSAL,type:d.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:d.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:d.Class.UNIVERSAL,type:d.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:d.Class.UNIVERSAL,type:d.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:d.Class.UNIVERSAL,type:d.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:d.Class.UNIVERSAL,type:d.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:d.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:d.Class.UNIVERSAL,type:d.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:d.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:d.Class.UNIVERSAL,type:d.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},e={name:"CertificationRequestInfo",tagClass:d.Class.UNIVERSAL,type:d.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:d.Class.UNIVERSAL,type:d.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:d.Class.UNIVERSAL,type:d.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},e,{name:"CertificationRequestInfo.attributes",tagClass:d.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:d.Class.UNIVERSAL,type:d.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:d.Class.UNIVERSAL,type:d.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:d.Class.UNIVERSAL,type:d.Type.SET,constructed:!0}]}]}]},u={name:"CertificationRequest",tagClass:d.Class.UNIVERSAL,type:d.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[e,{name:"CertificationRequest.signatureAlgorithm",tagClass:d.Class.UNIVERSAL,type:d.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:d.Class.UNIVERSAL,type:d.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:d.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:d.Class.UNIVERSAL,type:d.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};function l(e,t){"string"==typeof t&&(t={shortName:t});for(var r,n=null,i=0;null===n&&i<e.attributes.length;++i)r=e.attributes[i],(t.type&&t.type===r.type||t.name&&t.name===r.name||t.shortName&&t.shortName===r.shortName)&&(n=r);return n}C.RDNAttributesAsArray=function(e,t){for(var r,n,i=[],a=0;a<e.value.length;++a)for(var s=e.value[a],o=0;o<s.value.length;++o)r=s.value[o],(n={}).type=d.derToOid(r.value[0].value),n.value=r.value[1].value,n.valueTagClass=r.value[1].type,n.type in y&&(n.name=y[n.type],n.name in c&&(n.shortName=c[n.name])),t&&(t.update(n.type),t.update(n.value)),i.push(n);return i},C.CRIAttributesAsArray=function(e){for(var t=[],r=0;r<e.length;++r)for(var n=e[r],i=d.derToOid(n.value[0].value),a=n.value[1].value,s=0;s<a.length;++s){var o={};if(o.type=i,o.value=a[s].value,o.valueTagClass=a[s].type,o.type in y&&(o.name=y[o.type],o.name in c&&(o.shortName=c[o.name])),o.type===y.extensionRequest){o.extensions=[];for(var u=0;u<o.value.length;++u)o.extensions.push(C.certificateExtensionFromAsn1(o.value[u]))}t.push(o)}return t};function h(e,t,r){var n={};if(e!==y["RSASSA-PSS"])return n;if(r&&(n={hash:{algorithmOid:y.sha1},mgf:{algorithmOid:y.mgf1,hash:{algorithmOid:y.sha1}},saltLength:20}),e={},r=[],d.validate(t,i,e,r))return void 0!==e.hashOid&&(n.hash=n.hash||{},n.hash.algorithmOid=d.derToOid(e.hashOid)),void 0!==e.maskGenOid&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=d.derToOid(e.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=d.derToOid(e.maskGenHashOid)),void 0!==e.saltLength&&(n.saltLength=e.saltLength.charCodeAt(0)),n;throw(n=new Error("Cannot read RSASSA-PSS parameter block.")).errors=r,n}function g(e){for(var t,r=d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[]),n=e.attributes,i=0;i<n.length;++i){var a=(t=n[i]).value,s=d.Type.PRINTABLESTRING;"valueTagClass"in t&&(s=t.valueTagClass)===d.Type.UTF8&&(a=m.util.encodeUtf8(a)),a=d.create(d.Class.UNIVERSAL,d.Type.SET,!0,[d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[d.create(d.Class.UNIVERSAL,d.Type.OID,!1,d.oidToDer(t.type).getBytes()),d.create(d.Class.UNIVERSAL,s,!1,a)])]),r.value.push(a)}return r}function p(e){for(var t,r,n=0;n<e.length;++n){if(void 0===(t=e[n]).name&&(t.type&&t.type in C.oids?t.name=C.oids[t.type]:t.shortName&&t.shortName in c&&(t.name=C.oids[c[t.shortName]])),void 0===t.type){if(!(t.name&&t.name in C.oids))throw(r=new Error("Attribute type not specified.")).attribute=t,r;t.type=C.oids[t.name]}if(void 0===t.shortName&&t.name&&t.name in c&&(t.shortName=c[t.name]),t.type===y.extensionRequest&&(t.valueConstructed=!0,t.valueTagClass=d.Type.SEQUENCE,!t.value&&t.extensions)){t.value=[];for(var i=0;i<t.extensions.length;++i)t.value.push(C.certificateExtensionToAsn1(a(t.extensions[i])))}if(void 0===t.value)throw(r=new Error("Attribute value not specified.")).attribute=t,r}}function a(e,t){if(t=t||{},void 0===e.name&&e.id&&e.id in C.oids&&(e.name=C.oids[e.id]),void 0===e.id){if(!(e.name&&e.name in C.oids))throw(f=new Error("Extension ID not specified.")).extension=e,f;e.id=C.oids[e.name]}if(void 0!==e.value)return e;if("keyUsage"===e.name){var r=0,n=0,i=0;e.digitalSignature&&(n|=128,r=7),e.nonRepudiation&&(n|=64,r=6),e.keyEncipherment&&(n|=32,r=5),e.dataEncipherment&&(n|=16,r=4),e.keyAgreement&&(n|=8,r=3),e.keyCertSign&&(n|=4,r=2),e.cRLSign&&(n|=2,r=1),e.encipherOnly&&(n|=1,r=0),e.decipherOnly&&(i|=128,r=7);var a=String.fromCharCode(r);0!==i?a+=String.fromCharCode(n)+String.fromCharCode(i):0!==n&&(a+=String.fromCharCode(n)),e.value=d.create(d.Class.UNIVERSAL,d.Type.BITSTRING,!1,a)}else if("basicConstraints"===e.name)e.value=d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[]),e.cA&&e.value.value.push(d.create(d.Class.UNIVERSAL,d.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in e&&e.value.value.push(d.create(d.Class.UNIVERSAL,d.Type.INTEGER,!1,d.integerToDer(e.pathLenConstraint).getBytes()));else if("extKeyUsage"===e.name){e.value=d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[]);var s,o=e.value.value;for(s in e)!0===e[s]&&(s in y?o.push(d.create(d.Class.UNIVERSAL,d.Type.OID,!1,d.oidToDer(y[s]).getBytes())):-1!==s.indexOf(".")&&o.push(d.create(d.Class.UNIVERSAL,d.Type.OID,!1,d.oidToDer(s).getBytes())))}else if("nsCertType"===e.name)n=r=0,e.client&&(n|=128,r=7),e.server&&(n|=64,r=6),e.email&&(n|=32,r=5),e.objsign&&(n|=16,r=4),e.reserved&&(n|=8,r=3),e.sslCA&&(n|=4,r=2),e.emailCA&&(n|=2,r=1),e.objCA&&(n|=1,r=0),a=String.fromCharCode(r),0!==n&&(a+=String.fromCharCode(n)),e.value=d.create(d.Class.UNIVERSAL,d.Type.BITSTRING,!1,a);else if("subjectAltName"===e.name||"issuerAltName"===e.name){e.value=d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[]);for(var u=0;u<e.altNames.length;++u){if(a=(l=e.altNames[u]).value,7===l.type&&l.ip){if(null===(a=m.util.bytesFromIP(l.ip)))throw(f=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=e,f}else 8===l.type&&(a=l.oid?d.oidToDer(d.oidToDer(l.oid)):d.oidToDer(a));e.value.value.push(d.create(d.Class.CONTEXT_SPECIFIC,l.type,!1,a))}}else if("nsComment"===e.name&&t.cert){if(!/^[\x00-\x7F]*$/.test(e.comment)||e.comment.length<1||128<e.comment.length)throw new Error('Invalid "nsComment" content.');e.value=d.create(d.Class.UNIVERSAL,d.Type.IA5STRING,!1,e.comment)}else if("subjectKeyIdentifier"===e.name&&t.cert){n=t.cert.generateSubjectKeyIdentifier();e.subjectKeyIdentifier=n.toHex(),e.value=d.create(d.Class.UNIVERSAL,d.Type.OCTETSTRING,!1,n.getBytes())}else if("authorityKeyIdentifier"===e.name&&t.cert){var c;e.value=d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[]),o=e.value.value,e.keyIdentifier&&(c=!0===e.keyIdentifier?t.cert.generateSubjectKeyIdentifier().getBytes():e.keyIdentifier,o.push(d.create(d.Class.CONTEXT_SPECIFIC,0,!1,c))),e.authorityCertIssuer&&(c=[d.create(d.Class.CONTEXT_SPECIFIC,4,!0,[g(!0===e.authorityCertIssuer?t.cert.issuer:e.authorityCertIssuer)])],o.push(d.create(d.Class.CONTEXT_SPECIFIC,1,!0,c))),e.serialNumber&&(h=m.util.hexToBytes((!0===e.serialNumber?t.cert:e).serialNumber),o.push(d.create(d.Class.CONTEXT_SPECIFIC,2,!1,h)))}else if("cRLDistributionPoints"===e.name){e.value=d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[]);for(var l,o=e.value.value,h=d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[]),p=d.create(d.Class.CONTEXT_SPECIFIC,0,!0,[]),u=0;u<e.altNames.length;++u){if(a=(l=e.altNames[u]).value,7===l.type&&l.ip){if(null===(a=m.util.bytesFromIP(l.ip)))throw(f=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=e,f}else 8===l.type&&(a=l.oid?d.oidToDer(d.oidToDer(l.oid)):d.oidToDer(a));p.value.push(d.create(d.Class.CONTEXT_SPECIFIC,l.type,!1,a))}h.value.push(d.create(d.Class.CONTEXT_SPECIFIC,0,!0,[p])),o.push(h)}var f;if(void 0===e.value)throw(f=new Error("Extension value not specified.")).extension=e,f;return e}function n(e,t){if(e!==y["RSASSA-PSS"])return d.create(d.Class.UNIVERSAL,d.Type.NULL,!1,"");e=[];return void 0!==t.hash.algorithmOid&&e.push(d.create(d.Class.CONTEXT_SPECIFIC,0,!0,[d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[d.create(d.Class.UNIVERSAL,d.Type.OID,!1,d.oidToDer(t.hash.algorithmOid).getBytes()),d.create(d.Class.UNIVERSAL,d.Type.NULL,!1,"")])])),void 0!==t.mgf.algorithmOid&&e.push(d.create(d.Class.CONTEXT_SPECIFIC,1,!0,[d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[d.create(d.Class.UNIVERSAL,d.Type.OID,!1,d.oidToDer(t.mgf.algorithmOid).getBytes()),d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[d.create(d.Class.UNIVERSAL,d.Type.OID,!1,d.oidToDer(t.mgf.hash.algorithmOid).getBytes()),d.create(d.Class.UNIVERSAL,d.Type.NULL,!1,"")])])])),void 0!==t.saltLength&&e.push(d.create(d.Class.CONTEXT_SPECIFIC,2,!0,[d.create(d.Class.UNIVERSAL,d.Type.INTEGER,!1,d.integerToDer(t.saltLength).getBytes())])),d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,e)}C.certificateFromPem=function(e,t,r){var n=m.pem.decode(e)[0];if("CERTIFICATE"!==n.type&&"X509 CERTIFICATE"!==n.type&&"TRUSTED CERTIFICATE"!==n.type){e=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw e.headerType=n.type,e}if(n.procType&&"ENCRYPTED"===n.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");r=d.fromDer(n.body,r);return C.certificateFromAsn1(r,t)},C.certificateToPem=function(e,t){e={type:"CERTIFICATE",body:d.toDer(C.certificateToAsn1(e)).getBytes()};return m.pem.encode(e,{maxline:t})},C.publicKeyFromPem=function(e){var t=m.pem.decode(e)[0];if("PUBLIC KEY"!==t.type&&"RSA PUBLIC KEY"!==t.type){e=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw e.headerType=t.type,e}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert public key from PEM; PEM is encrypted.");t=d.fromDer(t.body);return C.publicKeyFromAsn1(t)},C.publicKeyToPem=function(e,t){e={type:"PUBLIC KEY",body:d.toDer(C.publicKeyToAsn1(e)).getBytes()};return m.pem.encode(e,{maxline:t})},C.publicKeyToRSAPublicKeyPem=function(e,t){e={type:"RSA PUBLIC KEY",body:d.toDer(C.publicKeyToRSAPublicKey(e)).getBytes()};return m.pem.encode(e,{maxline:t})},C.getPublicKeyFingerprint=function(e,t){var r,n=(t=t||{}).md||m.md.sha1.create();switch(t.type||"RSAPublicKey"){case"RSAPublicKey":r=d.toDer(C.publicKeyToRSAPublicKey(e)).getBytes();break;case"SubjectPublicKeyInfo":r=d.toDer(C.publicKeyToAsn1(e)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+t.type+'".')}n.start(),n.update(r);var i=n.digest();if("hex"===t.encoding){n=i.toHex();return t.delimiter?n.match(/.{2}/g).join(t.delimiter):n}if("binary"===t.encoding)return i.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".');return i},C.certificationRequestFromPem=function(e,t,r){var n=m.pem.decode(e)[0];if("CERTIFICATE REQUEST"!==n.type){e=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw e.headerType=n.type,e}if(n.procType&&"ENCRYPTED"===n.procType.type)throw new Error("Could not convert certification request from PEM; PEM is encrypted.");r=d.fromDer(n.body,r);return C.certificationRequestFromAsn1(r,t)},C.certificationRequestToPem=function(e,t){e={type:"CERTIFICATE REQUEST",body:d.toDer(C.certificationRequestToAsn1(e)).getBytes()};return m.pem.encode(e,{maxline:t})},C.createCertificate=function(){var c={version:2,serialNumber:"00",signatureOid:null,signature:null,siginfo:{}};return c.siginfo.algorithmOid=null,c.validity={},c.validity.notBefore=new Date,c.validity.notAfter=new Date,c.issuer={},c.issuer.getField=function(e){return l(c.issuer,e)},c.issuer.addField=function(e){p([e]),c.issuer.attributes.push(e)},c.issuer.attributes=[],c.issuer.hash=null,c.subject={},c.subject.getField=function(e){return l(c.subject,e)},c.subject.addField=function(e){p([e]),c.subject.attributes.push(e)},c.subject.attributes=[],c.subject.hash=null,c.extensions=[],c.publicKey=null,c.md=null,c.setSubject=function(e,t){p(e),c.subject.attributes=e,delete c.subject.uniqueId,t&&(c.subject.uniqueId=t),c.subject.hash=null},c.setIssuer=function(e,t){p(e),c.issuer.attributes=e,delete c.issuer.uniqueId,t&&(c.issuer.uniqueId=t),c.issuer.hash=null},c.setExtensions=function(e){for(var t=0;t<e.length;++t)a(e[t],{cert:c});c.extensions=e},c.getExtension=function(e){"string"==typeof e&&(e={name:e});for(var t,r=null,n=0;null===r&&n<c.extensions.length;++n)t=c.extensions[n],(e.id&&t.id===e.id||e.name&&t.name===e.name)&&(r=t);return r},c.sign=function(e,t){c.md=t||m.md.sha1.create();var r=y[c.md.algorithm+"WithRSAEncryption"];if(!r){t=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw t.algorithm=c.md.algorithm,t}c.signatureOid=c.siginfo.algorithmOid=r,c.tbsCertificate=C.getTBSCertificate(c);r=d.toDer(c.tbsCertificate);c.md.update(r.getBytes()),c.signature=e.sign(c.md)},c.verify=function(e){var t=!1;if(!c.issued(e)){var r=e.issuer,n=c.subject;throw(o=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.")).expectedIssuer=r.attributes,o.actualIssuer=n.attributes,o}var i,a,s,o,u=e.md;if(null===u){if(e.signatureOid in y)switch(y[e.signatureOid]){case"sha1WithRSAEncryption":u=m.md.sha1.create();break;case"md5WithRSAEncryption":u=m.md.md5.create();break;case"sha256WithRSAEncryption":u=m.md.sha256.create();break;case"sha384WithRSAEncryption":u=m.md.sha384.create();break;case"sha512WithRSAEncryption":u=m.md.sha512.create();break;case"RSASSA-PSS":u=m.md.sha256.create()}if(null===u)throw(o=new Error("Could not compute certificate digest. Unknown signature OID.")).signatureOid=e.signatureOid,o;n=e.tbsCertificate||C.getTBSCertificate(e),n=d.toDer(n);u.update(n.getBytes())}if(null!==u){switch(e.signatureOid){case y.sha1WithRSAEncryption:i=void 0;break;case y["RSASSA-PSS"]:if(void 0===(a=y[e.signatureParameters.mgf.hash.algorithmOid])||void 0===m.md[a])throw(o=new Error("Unsupported MGF hash function.")).oid=e.signatureParameters.mgf.hash.algorithmOid,o.name=a,o;if(void 0===(s=y[e.signatureParameters.mgf.algorithmOid])||void 0===m.mgf[s])throw(o=new Error("Unsupported MGF function.")).oid=e.signatureParameters.mgf.algorithmOid,o.name=s,o;if(s=m.mgf[s].create(m.md[a].create()),void 0===(a=y[e.signatureParameters.hash.algorithmOid])||void 0===m.md[a])throw{message:"Unsupported RSASSA-PSS hash function.",oid:e.signatureParameters.hash.algorithmOid,name:a};i=m.pss.create(m.md[a].create(),s,e.signatureParameters.saltLength)}t=c.publicKey.verify(u.digest().getBytes(),e.signature,i)}return t},c.isIssuer=function(e){var t=!1,r=c.issuer,n=e.subject;if(r.hash&&n.hash)t=r.hash===n.hash;else if(r.attributes.length===n.attributes.length)for(var i,a,t=!0,s=0;t&&s<r.attributes.length;++s)i=r.attributes[s],a=n.attributes[s],i.type===a.type&&i.value===a.value||(t=!1);return t},c.issued=function(e){return e.isIssuer(c)},c.generateSubjectKeyIdentifier=function(){return C.getPublicKeyFingerprint(c.publicKey,{type:"RSAPublicKey"})},c.verifySubjectKeyIdentifier=function(){for(var e=y.subjectKeyIdentifier,t=0;t<c.extensions.length;++t){var r=c.extensions[t];if(r.id===e){var n=c.generateSubjectKeyIdentifier().getBytes();return m.util.hexToBytes(r.subjectKeyIdentifier)===n}}return!1},c},C.certificateFromAsn1=function(e,t){var r={},n=[];if(!d.validate(e,o,r,n))throw(a=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.")).errors=n,a;if(d.derToOid(r.publicKeyOid)!==C.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var i=C.createCertificate();i.version=r.certVersion?r.certVersion.charCodeAt(0):0;n=m.util.createBuffer(r.certSerialNumber);i.serialNumber=n.toHex(),i.signatureOid=m.asn1.derToOid(r.certSignatureOid),i.signatureParameters=h(i.signatureOid,r.certSignatureParams,!0),i.siginfo.algorithmOid=m.asn1.derToOid(r.certinfoSignatureOid),i.siginfo.parameters=h(i.siginfo.algorithmOid,r.certinfoSignatureParams,!1),i.signature=r.certSignature;var a,n=[];if(void 0!==r.certValidity1UTCTime&&n.push(d.utcTimeToDate(r.certValidity1UTCTime)),void 0!==r.certValidity2GeneralizedTime&&n.push(d.generalizedTimeToDate(r.certValidity2GeneralizedTime)),void 0!==r.certValidity3UTCTime&&n.push(d.utcTimeToDate(r.certValidity3UTCTime)),void 0!==r.certValidity4GeneralizedTime&&n.push(d.generalizedTimeToDate(r.certValidity4GeneralizedTime)),2<n.length)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(n.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(i.validity.notBefore=n[0],i.validity.notAfter=n[1],i.tbsCertificate=r.tbsCertificate,t){if(i.md=null,i.signatureOid in y)switch(y[i.signatureOid]){case"sha1WithRSAEncryption":i.md=m.md.sha1.create();break;case"md5WithRSAEncryption":i.md=m.md.md5.create();break;case"sha256WithRSAEncryption":i.md=m.md.sha256.create();break;case"sha384WithRSAEncryption":i.md=m.md.sha384.create();break;case"sha512WithRSAEncryption":i.md=m.md.sha512.create();break;case"RSASSA-PSS":i.md=m.md.sha256.create()}if(null===i.md)throw(a=new Error("Could not compute certificate digest. Unknown signature OID.")).signatureOid=i.signatureOid,a;var s=d.toDer(i.tbsCertificate);i.md.update(s.getBytes())}s=m.md.sha1.create();i.issuer.getField=function(e){return l(i.issuer,e)},i.issuer.addField=function(e){p([e]),i.issuer.attributes.push(e)},i.issuer.attributes=C.RDNAttributesAsArray(r.certIssuer,s),r.certIssuerUniqueId&&(i.issuer.uniqueId=r.certIssuerUniqueId),i.issuer.hash=s.digest().toHex();s=m.md.sha1.create();return i.subject.getField=function(e){return l(i.subject,e)},i.subject.addField=function(e){p([e]),i.subject.attributes.push(e)},i.subject.attributes=C.RDNAttributesAsArray(r.certSubject,s),r.certSubjectUniqueId&&(i.subject.uniqueId=r.certSubjectUniqueId),i.subject.hash=s.digest().toHex(),r.certExtensions?i.extensions=C.certificateExtensionsFromAsn1(r.certExtensions):i.extensions=[],i.publicKey=C.publicKeyFromAsn1(r.subjectPublicKeyInfo),i},C.certificateExtensionsFromAsn1=function(e){for(var t=[],r=0;r<e.value.length;++r)for(var n=e.value[r],i=0;i<n.value.length;++i)t.push(C.certificateExtensionFromAsn1(n.value[i]));return t},C.certificateExtensionFromAsn1=function(e){var t,r={};if(r.id=d.derToOid(e.value[0].value),r.critical=!1,e.value[1].type===d.Type.BOOLEAN?(r.critical=0!==e.value[1].value.charCodeAt(0),r.value=e.value[2].value):r.value=e.value[1].value,r.id in y)if(r.name=y[r.id],"keyUsage"===r.name){var n=0,i=0;1<(a=d.fromDer(r.value)).value.length&&(n=a.value.charCodeAt(1),i=2<a.value.length?a.value.charCodeAt(2):0),r.digitalSignature=128==(128&n),r.nonRepudiation=64==(64&n),r.keyEncipherment=32==(32&n),r.dataEncipherment=16==(16&n),r.keyAgreement=8==(8&n),r.keyCertSign=4==(4&n),r.cRLSign=2==(2&n),r.encipherOnly=1==(1&n),r.decipherOnly=128==(128&i)}else if("basicConstraints"===r.name){0<(a=d.fromDer(r.value)).value.length&&a.value[0].type===d.Type.BOOLEAN?r.cA=0!==a.value[0].value.charCodeAt(0):r.cA=!1;i=null;0<a.value.length&&a.value[0].type===d.Type.INTEGER?i=a.value[0].value:1<a.value.length&&(i=a.value[1].value),null!==i&&(r.pathLenConstraint=d.derToInteger(i))}else if("extKeyUsage"===r.name)for(var a=d.fromDer(r.value),s=0;s<a.value.length;++s){var o=d.derToOid(a.value[s].value);o in y?r[y[o]]=!0:r[o]=!0}else if("nsCertType"===r.name)n=0,1<(a=d.fromDer(r.value)).value.length&&(n=a.value.charCodeAt(1)),r.client=128==(128&n),r.server=64==(64&n),r.email=32==(32&n),r.objsign=16==(16&n),r.reserved=8==(8&n),r.sslCA=4==(4&n),r.emailCA=2==(2&n),r.objCA=1==(1&n);else if("subjectAltName"===r.name||"issuerAltName"===r.name){r.altNames=[];for(var a=d.fromDer(r.value),u=0;u<a.value.length;++u){var c={type:(t=a.value[u]).type,value:t.value};switch(r.altNames.push(c),t.type){case 1:case 2:case 6:break;case 7:c.ip=m.util.bytesToIP(t.value);break;case 8:c.oid=d.derToOid(t.value)}}}else"subjectKeyIdentifier"===r.name&&(a=d.fromDer(r.value),r.subjectKeyIdentifier=m.util.bytesToHex(a.value));return r},C.certificationRequestFromAsn1=function(e,t){var r={},n=[];if(!d.validate(e,u,r,n))throw(i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.")).errors=n,i;if(d.derToOid(r.publicKeyOid)!==C.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var i,a=C.createCertificationRequest();if(a.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,a.signatureOid=m.asn1.derToOid(r.csrSignatureOid),a.signatureParameters=h(a.signatureOid,r.csrSignatureParams,!0),a.siginfo.algorithmOid=m.asn1.derToOid(r.csrSignatureOid),a.siginfo.parameters=h(a.siginfo.algorithmOid,r.csrSignatureParams,!1),a.signature=r.csrSignature,a.certificationRequestInfo=r.certificationRequestInfo,t){if(a.md=null,a.signatureOid in y)switch(y[a.signatureOid]){case"sha1WithRSAEncryption":a.md=m.md.sha1.create();break;case"md5WithRSAEncryption":a.md=m.md.md5.create();break;case"sha256WithRSAEncryption":a.md=m.md.sha256.create();break;case"sha384WithRSAEncryption":a.md=m.md.sha384.create();break;case"sha512WithRSAEncryption":a.md=m.md.sha512.create();break;case"RSASSA-PSS":a.md=m.md.sha256.create()}if(null===a.md)throw(i=new Error("Could not compute certification request digest. Unknown signature OID.")).signatureOid=a.signatureOid,i;var s=d.toDer(a.certificationRequestInfo);a.md.update(s.getBytes())}s=m.md.sha1.create();return a.subject.getField=function(e){return l(a.subject,e)},a.subject.addField=function(e){p([e]),a.subject.attributes.push(e)},a.subject.attributes=C.RDNAttributesAsArray(r.certificationRequestInfoSubject,s),a.subject.hash=s.digest().toHex(),a.publicKey=C.publicKeyFromAsn1(r.subjectPublicKeyInfo),a.getAttribute=function(e){return l(a,e)},a.addAttribute=function(e){p([e]),a.attributes.push(e)},a.attributes=C.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),a},C.createCertificationRequest=function(){var o={version:0,signatureOid:null,signature:null,siginfo:{}};return o.siginfo.algorithmOid=null,o.subject={},o.subject.getField=function(e){return l(o.subject,e)},o.subject.addField=function(e){p([e]),o.subject.attributes.push(e)},o.subject.attributes=[],o.subject.hash=null,o.publicKey=null,o.attributes=[],o.getAttribute=function(e){return l(o,e)},o.addAttribute=function(e){p([e]),o.attributes.push(e)},o.md=null,o.setSubject=function(e){p(e),o.subject.attributes=e,o.subject.hash=null},o.setAttributes=function(e){p(e),o.attributes=e},o.sign=function(e,t){o.md=t||m.md.sha1.create();var r=y[o.md.algorithm+"WithRSAEncryption"];if(!r){t=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw t.algorithm=o.md.algorithm,t}o.signatureOid=o.siginfo.algorithmOid=r,o.certificationRequestInfo=C.getCertificationRequestInfo(o);r=d.toDer(o.certificationRequestInfo);o.md.update(r.getBytes()),o.signature=e.sign(o.md)},o.verify=function(){var e,t,r,n,i=!1,a=o.md;if(null===a){if(o.signatureOid in y)switch(y[o.signatureOid]){case"sha1WithRSAEncryption":a=m.md.sha1.create();break;case"md5WithRSAEncryption":a=m.md.md5.create();break;case"sha256WithRSAEncryption":a=m.md.sha256.create();break;case"sha384WithRSAEncryption":a=m.md.sha384.create();break;case"sha512WithRSAEncryption":a=m.md.sha512.create();break;case"RSASSA-PSS":a=m.md.sha256.create()}if(null===a)throw(n=new Error("Could not compute certification request digest. Unknown signature OID.")).signatureOid=o.signatureOid,n;var s=o.certificationRequestInfo||C.getCertificationRequestInfo(o),s=d.toDer(s);a.update(s.getBytes())}if(null!==a){switch(o.signatureOid){case y.sha1WithRSAEncryption:break;case y["RSASSA-PSS"]:if(void 0===(t=y[o.signatureParameters.mgf.hash.algorithmOid])||void 0===m.md[t])throw(n=new Error("Unsupported MGF hash function.")).oid=o.signatureParameters.mgf.hash.algorithmOid,n.name=t,n;if(void 0===(r=y[o.signatureParameters.mgf.algorithmOid])||void 0===m.mgf[r])throw(n=new Error("Unsupported MGF function.")).oid=o.signatureParameters.mgf.algorithmOid,n.name=r,n;if(r=m.mgf[r].create(m.md[t].create()),void 0===(t=y[o.signatureParameters.hash.algorithmOid])||void 0===m.md[t])throw(n=new Error("Unsupported RSASSA-PSS hash function.")).oid=o.signatureParameters.hash.algorithmOid,n.name=t,n;e=m.pss.create(m.md[t].create(),r,o.signatureParameters.saltLength)}i=o.publicKey.verify(a.digest().getBytes(),o.signature,e)}return i},o};var s=new Date("1950-01-01T00:00:00Z"),f=new Date("2050-01-01T00:00:00Z");function v(e){return s<=e&&e<f?d.create(d.Class.UNIVERSAL,d.Type.UTCTIME,!1,d.dateToUtcTime(e)):d.create(d.Class.UNIVERSAL,d.Type.GENERALIZEDTIME,!1,d.dateToGeneralizedTime(e))}C.getTBSCertificate=function(e){var t=v(e.validity.notBefore),r=v(e.validity.notAfter),r=d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[d.create(d.Class.CONTEXT_SPECIFIC,0,!0,[d.create(d.Class.UNIVERSAL,d.Type.INTEGER,!1,d.integerToDer(e.version).getBytes())]),d.create(d.Class.UNIVERSAL,d.Type.INTEGER,!1,m.util.hexToBytes(e.serialNumber)),d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[d.create(d.Class.UNIVERSAL,d.Type.OID,!1,d.oidToDer(e.siginfo.algorithmOid).getBytes()),n(e.siginfo.algorithmOid,e.siginfo.parameters)]),g(e.issuer),d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[t,r]),g(e.subject),C.publicKeyToAsn1(e.publicKey)]);return e.issuer.uniqueId&&r.value.push(d.create(d.Class.CONTEXT_SPECIFIC,1,!0,[d.create(d.Class.UNIVERSAL,d.Type.BITSTRING,!1,String.fromCharCode(0)+e.issuer.uniqueId)])),e.subject.uniqueId&&r.value.push(d.create(d.Class.CONTEXT_SPECIFIC,2,!0,[d.create(d.Class.UNIVERSAL,d.Type.BITSTRING,!1,String.fromCharCode(0)+e.subject.uniqueId)])),0<e.extensions.length&&r.value.push(C.certificateExtensionsToAsn1(e.extensions)),r},C.getCertificationRequestInfo=function(e){return d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[d.create(d.Class.UNIVERSAL,d.Type.INTEGER,!1,d.integerToDer(e.version).getBytes()),g(e.subject),C.publicKeyToAsn1(e.publicKey),function(e){var t=d.create(d.Class.CONTEXT_SPECIFIC,0,!0,[]);if(0===e.attributes.length)return t;for(var r=e.attributes,n=0;n<r.length;++n){var i=r[n],a=i.value,s=d.Type.UTF8;(s="valueTagClass"in i?i.valueTagClass:s)===d.Type.UTF8&&(a=m.util.encodeUtf8(a));var o=!1;"valueConstructed"in i&&(o=i.valueConstructed);a=d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[d.create(d.Class.UNIVERSAL,d.Type.OID,!1,d.oidToDer(i.type).getBytes()),d.create(d.Class.UNIVERSAL,d.Type.SET,!0,[d.create(d.Class.UNIVERSAL,s,o,a)])]);t.value.push(a)}return t}(e)])},C.distinguishedNameToAsn1=g,C.certificateToAsn1=function(e){var t=e.tbsCertificate||C.getTBSCertificate(e);return d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[t,d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[d.create(d.Class.UNIVERSAL,d.Type.OID,!1,d.oidToDer(e.signatureOid).getBytes()),n(e.signatureOid,e.signatureParameters)]),d.create(d.Class.UNIVERSAL,d.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},C.certificateExtensionsToAsn1=function(e){var t=d.create(d.Class.CONTEXT_SPECIFIC,3,!0,[]),r=d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[]);t.value.push(r);for(var n=0;n<e.length;++n)r.value.push(C.certificateExtensionToAsn1(e[n]));return t},C.certificateExtensionToAsn1=function(e){var t=d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[]);t.value.push(d.create(d.Class.UNIVERSAL,d.Type.OID,!1,d.oidToDer(e.id).getBytes())),e.critical&&t.value.push(d.create(d.Class.UNIVERSAL,d.Type.BOOLEAN,!1,String.fromCharCode(255)));var r=e.value;return"string"!=typeof e.value&&(r=d.toDer(r).getBytes()),t.value.push(d.create(d.Class.UNIVERSAL,d.Type.OCTETSTRING,!1,r)),t},C.certificationRequestToAsn1=function(e){var t=e.certificationRequestInfo||C.getCertificationRequestInfo(e);return d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[t,d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[d.create(d.Class.UNIVERSAL,d.Type.OID,!1,d.oidToDer(e.signatureOid).getBytes()),n(e.signatureOid,e.signatureParameters)]),d.create(d.Class.UNIVERSAL,d.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},C.createCaStore=function(e){var a={certs:{}};function s(e){return o(e),a.certs[e.hash]||null}function o(e){var t;e.hash||(t=m.md.sha1.create(),e.attributes=C.RDNAttributesAsArray(g(e),t),e.hash=t.digest().toHex())}if(a.getIssuer=function(e){return s(e.issuer)},a.addCertificate=function(e){var t;o((e="string"==typeof e?m.pki.certificateFromPem(e):e).subject),a.hasCertificate(e)||(e.subject.hash in a.certs?(t=a.certs[e.subject.hash],(t=!m.util.isArray(t)?[t]:t).push(e),a.certs[e.subject.hash]=t):a.certs[e.subject.hash]=e)},a.hasCertificate=function(e){var t=s((e="string"==typeof e?m.pki.certificateFromPem(e):e).subject);if(!t)return!1;m.util.isArray(t)||(t=[t]);for(var r=d.toDer(C.certificateToAsn1(e)).getBytes(),n=0;n<t.length;++n)if(r===d.toDer(C.certificateToAsn1(t[n])).getBytes())return!0;return!1},a.listAllCertificates=function(){var e,t=[];for(e in a.certs)if(a.certs.hasOwnProperty(e)){var r=a.certs[e];if(m.util.isArray(r))for(var n=0;n<r.length;++n)t.push(r[n]);else t.push(r)}return t},a.removeCertificate=function(e){var t;if(o((e="string"==typeof e?m.pki.certificateFromPem(e):e).subject),!a.hasCertificate(e))return null;var r=s(e.subject);if(!m.util.isArray(r))return t=a.certs[e.subject.hash],delete a.certs[e.subject.hash],t;for(var n=d.toDer(C.certificateToAsn1(e)).getBytes(),i=0;i<r.length;++i)n===d.toDer(C.certificateToAsn1(r[i])).getBytes()&&(t=r[i],r.splice(i,1));return 0===r.length&&delete a.certs[e.subject.hash],t},e)for(var t=0;t<e.length;++t){var r=e[t];a.addCertificate(r)}return a},C.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},C.verifyCertificateChain=function(e,t,r){r=(r="function"==typeof r?{verify:r}:r)||{};var n=(t=t.slice(0)).slice(0),i=r.validityCheckDate;void 0===i&&(i=new Date);var a=!0,s=null,o=0;do{var u=t.shift(),c=null,l=!1;if(null===(s=i&&(i<u.validity.notBefore||i>u.validity.notAfter)?{message:"Certificate is not valid yet or has expired.",error:C.certificateError.certificate_expired,notBefore:u.validity.notBefore,notAfter:u.validity.notAfter,now:i}:s)){if(null===(c=t[0]||e.getIssuer(u))&&u.isIssuer(u)&&(l=!0,c=u),c){var h=c;m.util.isArray(h)||(h=[h]);for(var p=!1;!p&&0<h.length;){c=h.shift();try{p=c.verify(u)}catch(e){}}p||(s={message:"Certificate signature is invalid.",error:C.certificateError.bad_certificate})}null!==s||c&&!l||e.hasCertificate(u)||(s={message:"Certificate is not trusted.",error:C.certificateError.unknown_ca})}if(null===(s=null===s&&c&&!u.isIssuer(c)?{message:"Certificate issuer is invalid.",error:C.certificateError.bad_certificate}:s))for(var f={keyUsage:!0,basicConstraints:!0},d=0;null===s&&d<u.extensions.length;++d){var y=u.extensions[d];!y.critical||y.name in f||(s={message:"Certificate has an unsupported critical extension.",error:C.certificateError.unsupported_certificate})}null!==s||a&&(0!==t.length||c&&!l)||(v=u.getExtension("basicConstraints"),null!==(g=u.getExtension("keyUsage"))&&(g.keyCertSign&&null!==v||(s={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:C.certificateError.bad_certificate})),null===(s=null===s&&null!==v&&!v.cA?{message:"Certificate basicConstraints indicates the certificate is not a CA.",error:C.certificateError.bad_certificate}:s)&&null!==g&&"pathLenConstraint"in v&&o-1>v.pathLenConstraint&&(s={message:"Certificate basicConstraints pathLenConstraint violated.",error:C.certificateError.bad_certificate}));var g=null===s||s.error,v=r.verify?r.verify(g,o,n):g;if(!0!==v)throw!0===g&&(s={message:"The application rejected the certificate.",error:C.certificateError.bad_certificate}),!v&&0!==v||("object"!=typeof v||m.util.isArray(v)?"string"==typeof v&&(s.error=v):(v.message&&(s.message=v.message),v.error&&(s.error=v.error))),s}while(s=null,a=!1,++o,0<t.length);return!0}},802:function(e,t,r){var g=r(756);r(768),r(757),(e.exports=g.pss=g.pss||{}).create=function(e){var l,h=(e=3===arguments.length?{md:arguments[0],mgf:arguments[1],saltLength:arguments[2]}:e).md,p=e.mgf,f=h.digestLength,d=e.salt||null;if("string"==typeof d&&(d=g.util.createBuffer(d)),"saltLength"in e)l=e.saltLength;else{if(null===d)throw new Error("Salt length not specified or specific salt not given.");l=d.length()}if(null!==d&&d.length()!==l)throw new Error("Given salt length does not match length of given salt.");var y=e.prng||g.random;return{encode:function(e,t){var r=t-1,n=Math.ceil(r/8),i=e.digest().getBytes();if(n<f+l+2)throw new Error("Message is too long to encrypt.");t=null===d?y.getBytesSync(l):d.bytes(),e=new g.util.ByteBuffer;e.fillWithByte(0,8),e.putBytes(i),e.putBytes(t),h.start(),h.update(e.getBytes());i=h.digest().getBytes(),e=new g.util.ByteBuffer;e.fillWithByte(0,n-l-f-2),e.putByte(1),e.putBytes(t);for(var a=e.getBytes(),s=n-f-1,o=p.generate(i,s),u="",c=0;c<s;c++)u+=String.fromCharCode(a.charCodeAt(c)^o.charCodeAt(c));r=65280>>8*n-r&255;return(u=String.fromCharCode(u.charCodeAt(0)&~r)+u.substr(1))+i+String.fromCharCode(188)},verify:function(e,t,r){var n=r-1,r=Math.ceil(n/8);if(t=t.substr(-r),r<f+l+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(188!==t.charCodeAt(r-1))throw new Error("Encoded message does not end in 0xBC.");var i=r-f-1,a=t.substr(0,i),t=t.substr(i,f),n=65280>>8*r-n&255;if(0!=(a.charCodeAt(0)&n))throw new Error("Bits beyond keysize not zero as expected.");for(var s=p.generate(t,i),o="",u=0;u<i;u++)o+=String.fromCharCode(a.charCodeAt(u)^s.charCodeAt(u));var o=String.fromCharCode(o.charCodeAt(0)&~n)+o.substr(1),c=r-f-l-2;for(u=0;u<c;u++)if(0!==o.charCodeAt(u))throw new Error("Leftmost octets not zero as expected");if(1!==o.charCodeAt(c))throw new Error("Inconsistent PSS signature, 0x01 marker not found");n=o.substr(-l),r=new g.util.ByteBuffer;return r.fillWithByte(0,8),r.putBytes(e),r.putBytes(n),h.start(),h.update(r.getBytes()),t===h.digest().getBytes()}}}},803:function(e,t,r){"use strict";var r=[r(920),r(921),r(806),r(837),r(928),r(929),r(931),r(840),r(804),r(932),r(933),r(934),r(785)],i={},a={},s={},o={},u={},c={};r.forEach(function(r){Object.keys(r).forEach(function(e){var t=r[e];"function"==typeof t.encrypt&&(u[e]=t.encrypt),"function"==typeof t.decrypt&&(c[e]=t.decrypt),"function"==typeof t.sign&&(s[e]=t.sign),"function"==typeof t.verify&&(o[e]=t.verify),"function"==typeof t.digest&&(i[e]=t.digest),"function"==typeof t.derive&&(a[e]=t.derive)})}),t.digest=function(e,t,r){var n=i[e];return n?n(t,r):Promise.reject(new Error("unsupported algorithm: "+e))},t.derive=function(e,t,r){var n=a[e];return n?n(t,r):Promise.reject(new Error("unsupported algorithm: "+e))},t.sign=function(e,t,r,n){var i=s[e];return i?i(t,r,n||{}):Promise.reject(new Error("unsupported algorithm: "+e))},t.verify=function(e,t,r,n,i){var a=o[e];return a?a(t,r,n,i||{}):Promise.reject(new Error("unsupported algorithm: "+e))},t.encrypt=function(e,t,r,n){var i=u[e];return i?i(t,r,n||{}):Promise.reject(new Error("unsupported algorithm: "+e))},t.decrypt=function(e,t,r,n){var i=c[e];return i?i(t,r,n||{}):Promise.reject(new Error("unsupported algorithm: "+e))}},804:function(e,t,n){"use strict";!function(c){var l=n(765),h=n(758),p=n(776),f=n(761);var r={};["HS1","HS256","HS384","HS512"].forEach(function(e){function a(e,t,r){e=(e||l.HASHLENGTH[o])/8;for(var n=!0,i=0;i<e;i++)n=n&&t[i]===r[i];return n}var s,o,t,n,i;function u(e,t){return(e=(e||l.HASHLENGTH[i])/8)>t.length?Promise.reject(new Error("invalid key length")):Promise.resolve(t)}r[e]={sign:(n=(t=e).replace("HS","SHA").toLowerCase(),i=t.replace("HS","SHA-"),f.setupFallback(function(t,r,e){return u((e=e||{}).length,t).then(function(){var e=f.nodeCrypto.createHmac(n,t);e.update(r);e=e.digest();return{data:r,mac:e}})},function(e,t,r){var n={name:"HMAC",hash:{name:i}};return u((r=r||{}).length,e).then(function(){return f.subtleCrypto.importKey("raw",e,n,!0,["sign"])}).then(function(e){return f.subtleCrypto.sign(n,e,t)}).then(function(e){e=c.from(e);return{data:t,mac:e}})},function(t,r,e){return u((e=e||{}).length,t).then(function(){var e=h.hmac.create();return e.start(n,t.toString("binary")),e.update(r.toString("binary")),e=c.from(e.digest().bytes(),"binary"),{data:r,mac:e}})})),verify:(s=(e=e).replace("HS","SHA").toLowerCase(),o=e.replace("HS","SHA-"),f.setupFallback(function(e,t,r,n){n=n||{};e=f.nodeCrypto.createHmac(s,e);e.update(t);e=e.digest();if(!a(n.length,r,e))throw new Error("verification failed");return{data:t,mac:e,valid:!0}},function(e,t,r,n){var i={name:"HMAC",hash:{name:o}};return((n=n||{}).length?f.subtleCrypto.importKey("raw",e,i,!0,["sign"]).then(function(e){return f.subtleCrypto.sign(i,e,t)}).then(function(e){e=c.from(e);return a(n.length,r,e)}):f.subtleCrypto.importKey("raw",e,i,!0,["verify"]).then(function(e){return f.subtleCrypto.verify(i,e,r,t)})).then(function(e){return e?{data:t,mac:r,valid:!0}:Promise.reject(new Error("verifaction failed"))})},function(e,t,r,n){n=n||{};var i=h.hmac.create();return i.start(s,new p(e)),i.update(t.toString("binary")),i=c.from(i.digest().bytes(),"binary"),a(n.length,r,i)?Promise.resolve({data:t,mac:r,valid:!0}):Promise.reject(new Error("verification failed"))}))}}),e.exports=r}.call(this,n(360).Buffer)},805:function(e,t){e.exports=n;var p=null;try{p=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function n(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function f(e){return!0===(e&&e.__isLong__)}Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=f;var a={},s={};function r(e,t){var r,n,i;return t?(i=0<=(e>>>=0)&&e<256)&&(n=s[e])?n:(r=y(e,(0|e)<0?-1:0,!0),i&&(s[e]=r),r):(i=-128<=(e|=0)&&e<128)&&(n=a[e])?n:(r=y(e,e<0?-1:0,!1),i&&(a[e]=r),r)}function d(e,t){if(isNaN(e))return t?h:m;if(t){if(e<0)return h;if(o<=e)return T}else{if(e<=-u)return I;if(u<=e+1)return S}return e<0?d(-e,t).neg():y(e%i|0,e/i|0,t)}function y(e,t,r){return new n(e,t,r)}n.fromInt=r,n.fromNumber=d,n.fromBits=y;var c=Math.pow;function l(e,t,r){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return m;if(t="number"==typeof t?(r=t,!1):!!t,(r=r||10)<2||36<r)throw RangeError("radix");var n;if(0<(n=e.indexOf("-")))throw Error("interior hyphen");if(0===n)return l(e.substring(1),t,r).neg();for(var i=d(c(r,8)),a=m,s=0;s<e.length;s+=8){var o=Math.min(8,e.length-s),u=parseInt(e.substring(s,s+o),r);a=o<8?(o=d(c(r,o)),a.mul(o).add(d(u))):(a=a.mul(i)).add(d(u))}return a.unsigned=t,a}function g(e,t){return"number"==typeof e?d(e,t):"string"==typeof e?l(e,t):y(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}n.fromString=l,n.fromValue=g;var i=4294967296,o=i*i,u=o/2,v=r(1<<24),m=r(0);n.ZERO=m;var h=r(0,!0);n.UZERO=h;var C=r(1);n.ONE=C;var E=r(1,!0);n.UONE=E;var b=r(-1);n.NEG_ONE=b;var S=y(-1,2147483647,!1);n.MAX_VALUE=S;var T=y(-1,-1,!0);n.MAX_UNSIGNED_VALUE=T;var I=y(0,-2147483648,!1);n.MIN_VALUE=I;var A=n.prototype;A.toInt=function(){return this.unsigned?this.low>>>0:this.low},A.toNumber=function(){return this.unsigned?(this.high>>>0)*i+(this.low>>>0):this.high*i+(this.low>>>0)},A.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(I)){var t=d(e),r=this.div(t),t=r.mul(t).sub(this);return r.toString(e)+t.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var n=d(c(e,6),this.unsigned),i=this,a="";;){var s=i.div(n),o=(i.sub(s.mul(n)).toInt()>>>0).toString(e);if((i=s).isZero())return o+a;for(;o.length<6;)o="0"+o;a=""+o+a}},A.getHighBits=function(){return this.high},A.getHighBitsUnsigned=function(){return this.high>>>0},A.getLowBits=function(){return this.low},A.getLowBitsUnsigned=function(){return this.low>>>0},A.getNumBitsAbs=function(){if(this.isNegative())return this.eq(I)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;0<t&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},A.isZero=function(){return 0===this.high&&0===this.low},A.eqz=A.isZero,A.isNegative=function(){return!this.unsigned&&this.high<0},A.isPositive=function(){return this.unsigned||0<=this.high},A.isOdd=function(){return 1==(1&this.low)},A.isEven=function(){return 0==(1&this.low)},A.equals=function(e){return f(e)||(e=g(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},A.eq=A.equals,A.notEquals=function(e){return!this.eq(e)},A.neq=A.notEquals,A.ne=A.notEquals,A.lessThan=function(e){return this.comp(e)<0},A.lt=A.lessThan,A.lessThanOrEqual=function(e){return this.comp(e)<=0},A.lte=A.lessThanOrEqual,A.le=A.lessThanOrEqual,A.greaterThan=function(e){return 0<this.comp(e)},A.gt=A.greaterThan,A.greaterThanOrEqual=function(e){return 0<=this.comp(e)},A.gte=A.greaterThanOrEqual,A.ge=A.greaterThanOrEqual,A.compare=function(e){if(f(e)||(e=g(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},A.comp=A.compare,A.negate=function(){return!this.unsigned&&this.eq(I)?I:this.not().add(C)},A.neg=A.negate,A.add=function(e){f(e)||(e=g(e));var t=this.high>>>16,r=65535&this.high,n=this.low>>>16,i=65535&this.low,a=e.high>>>16,s=65535&e.high,o=e.low>>>16,u=0,c=0,l=0,h=0;return l+=(h+=i+(65535&e.low))>>>16,c+=(l+=n+o)>>>16,u+=(c+=r+s)>>>16,u+=t+a,y((l&=65535)<<16|(h&=65535),(u&=65535)<<16|(c&=65535),this.unsigned)},A.subtract=function(e){return f(e)||(e=g(e)),this.add(e.neg())},A.sub=A.subtract,A.multiply=function(e){if(this.isZero())return m;if(f(e)||(e=g(e)),p)return y(p.mul(this.low,this.high,e.low,e.high),p.get_high(),this.unsigned);if(e.isZero())return m;if(this.eq(I))return e.isOdd()?I:m;if(e.eq(I))return this.isOdd()?I:m;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(v)&&e.lt(v))return d(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,r=65535&this.high,n=this.low>>>16,i=65535&this.low,a=e.high>>>16,s=65535&e.high,o=e.low>>>16,u=65535&e.low,c=0,l=0,h=0,e=0;return h+=(e+=i*u)>>>16,l+=(h+=n*u)>>>16,h&=65535,l+=(h+=i*o)>>>16,c+=(l+=r*u)>>>16,l&=65535,c+=(l+=n*o)>>>16,l&=65535,c+=(l+=i*s)>>>16,c+=t*u+r*o+n*s+i*a,y((h&=65535)<<16|(e&=65535),(c&=65535)<<16|(l&=65535),this.unsigned)},A.mul=A.multiply,A.divide=function(e){if((e=!f(e)?g(e):e).isZero())throw Error("division by zero");var t,r;if(p)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?y((this.unsigned?p.div_u:p.div_s)(this.low,this.high,e.low,e.high),p.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?h:m;if(this.unsigned){if((e=!e.unsigned?e.toUnsigned():e).gt(this))return h;if(e.gt(this.shru(1)))return E;r=h}else{if(this.eq(I))return e.eq(C)||e.eq(b)?I:e.eq(I)?C:(n=this.shr(1).div(e).shl(1)).eq(m)?e.isNegative()?C:b:(t=this.sub(e.mul(n)),n.add(t.div(e)));if(e.eq(I))return this.unsigned?h:m;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();r=m}for(t=this;t.gte(e);){for(var n=Math.max(1,Math.floor(t.toNumber()/e.toNumber())),i=Math.ceil(Math.log(n)/Math.LN2),a=i<=48?1:c(2,i-48),s=d(n),o=s.mul(e);o.isNegative()||o.gt(t);)o=(s=d(n-=a,this.unsigned)).mul(e);s.isZero()&&(s=C),r=r.add(s),t=t.sub(o)}return r},A.div=A.divide,A.modulo=function(e){return f(e)||(e=g(e)),p?y((this.unsigned?p.rem_u:p.rem_s)(this.low,this.high,e.low,e.high),p.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},A.mod=A.modulo,A.rem=A.modulo,A.not=function(){return y(~this.low,~this.high,this.unsigned)},A.and=function(e){return f(e)||(e=g(e)),y(this.low&e.low,this.high&e.high,this.unsigned)},A.or=function(e){return f(e)||(e=g(e)),y(this.low|e.low,this.high|e.high,this.unsigned)},A.xor=function(e){return f(e)||(e=g(e)),y(this.low^e.low,this.high^e.high,this.unsigned)},A.shiftLeft=function(e){return f(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?y(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):y(0,this.low<<e-32,this.unsigned)},A.shl=A.shiftLeft,A.shiftRight=function(e){return f(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?y(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):y(this.high>>e-32,0<=this.high?0:-1,this.unsigned)},A.shr=A.shiftRight,A.shiftRightUnsigned=function(e){if(f(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return e<32?y(this.low>>>e|t<<32-e,t>>>e,this.unsigned):y(32===e?t:t>>>e-32,0,this.unsigned)},A.shru=A.shiftRightUnsigned,A.shr_u=A.shiftRightUnsigned,A.toSigned=function(){return this.unsigned?y(this.low,this.high,!1):this},A.toUnsigned=function(){return this.unsigned?this:y(this.low,this.high,!0)},A.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},A.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},A.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},806:function(e,t,n){"use strict";!function(p){var f=n(761),d=n(758),y=n(776),g=p.from("a6a6a6a6a6a6a6a6","hex");function v(e,t){for(var r=Math.max(e.length,t.length),n=p.alloc(r),i=0;i<r;i++)n[i]=(e[i]||0)^(t[i]||0);return n}function m(e,t){for(var r=[],n=0;e.length>n;n+=t)r.push(e.slice(n,n+t));return r}function C(e){var t=Math.floor(e/4294967296),r=e%4294967296,e=p.alloc(8);return e[0]=255&t>>>24,e[1]=255&t>>>16,e[2]=255&t>>>8,e[3]=255&t>>>0,e[4]=255&r>>>24,e[5]=255&r>>>16,e[6]=255&r>>>8,e[7]=255&r>>>0,e}var r={};["A128KW","A192KW","A256KW"].forEach(function(e){var u,c,t=parseInt(/A(\d+)KW/g.exec(e)[1]);function l(e,t){if(u!==e.length<<3)throw new Error("invalid key size");if(0<t.length-8&&0!=t.length%8)throw new Error("invalid data length")}function h(e,t){if(c!==e.length<<3)throw new Error("invalid key size");if(0<t.length&&0!=t.length%8)throw new Error("invalid data length")}r[e]={encrypt:(c=t,f.setupFallback(function(e,t){try{h(e,t)}catch(e){return Promise.reject(e)}for(var r,n,i=m(t,8),a=p.alloc(16),s=g,o=0;o<6;o++)for(var u=0;i.length>u;u++)n=i.length*o+u+1,r=p.concat([s,i[u]]),s=v((r=f.nodeCrypto.createCipheriv("AES"+c,e,a).update(r)).slice(0,8),C(n)),i[u]=r.slice(8,16);i=[s].concat(i),t=p.concat(i);return Promise.resolve({data:t})},function(e,t){try{h(e,t)}catch(e){return Promise.reject(e)}var r={name:"AES-KW"},t=[f.subtleCrypto.importKey("raw",t,{name:"HMAC",hash:"SHA-256"},!0,["sign"]),f.subtleCrypto.importKey("raw",e,r,!0,["wrapKey"])];return(t=(t=Promise.all(t)).then(function(e){return f.subtleCrypto.wrapKey("raw",e[0],e[1],r)})).then(function(e){return{data:e=p.from(e)}})},function(e,t){try{h(e,t)}catch(e){return Promise.reject(e)}for(var r,n,i=d.cipher.createCipher("AES",new y(e)),a=m(t,8),s=g,o=0;o<6;o++)for(var u=0;a.length>u;u++)n=a.length*o+u+1,r=p.concat([s,a[u]]),i.start(),i.update(new y(r)),i.finish(),s=v((r=p.from(i.output.bytes(),"binary")).slice(0,8),C(n)),a[u]=r.slice(8,16);a=[s].concat(a),t=p.concat(a);return Promise.resolve({data:t})})),decrypt:(u=t,f.setupFallback(function(e,t){try{l(e,t)}catch(e){return Promise.reject(e)}for(var r,n=m(t,8),i=p.alloc(16),a=n[0],n=n.slice(1),s=5;0<=s;--s)for(var o=n.length-1;0<=o;--o)r=v(a,C(n.length*s+o+1)),r=p.concat([r,n[o],i]),a=(r=f.nodeCrypto.createDecipheriv("AES"+u,e,i).update(r)).slice(0,8),n[o]=r.slice(8,16);if(a.toString()!==g.toString())return Promise.reject(new Error("decryption failed"));t=p.concat(n);return Promise.resolve(t)},function(e,t){try{l(e,t)}catch(e){return Promise.reject(e)}var r={name:"AES-KW"},n=f.subtleCrypto.importKey("raw",e,r,!0,["unwrapKey"]);return(n=(n=n.then(function(e){return f.subtleCrypto.unwrapKey("raw",t,e,r,{name:"HMAC",hash:"SHA-256"},!0,["sign"])})).then(function(e){return f.subtleCrypto.exportKey("raw",e)})).then(function(e){return p.from(e)})},function(e,t){try{l(e,t)}catch(e){return Promise.reject(e)}for(var r,n=d.cipher.createDecipher("AES",new y(e)),i=(a=m(t,8))[0],a=a.slice(1),s=5;0<=s;--s)for(var o=a.length-1;0<=o;--o)r=v(i,C(a.length*s+o+1)),r=p.concat([r,a[o]]),n.start(),n.update(new y(r)),n.finish(),i=(r=p.from(n.output.bytes(),"binary")).slice(0,8),a[o]=r.slice(8,16);if(i.toString()!==g.toString())return Promise.reject(new Error("decryption failed"));t=p.concat(a);return Promise.resolve(t)}))}}),e.exports=r}.call(this,n(360).Buffer)},807:function(e,t,c){"use strict";!function(p){var n=c(764),i=c(838),a=c(758),s=c(759),t={"P-256":256,"P-384":384,"P-521":521};function r(e,t){var r=n(e);return(t?["x","y"]:["d"]).forEach(function(e){r[e]=s.asBuffer(r[e],"base64url")}),r}var o=p.from([4]),u="1.2.840.10045.2.1",f="Could not extract parameters from DER signature";function l(e,t,r){for(var n=0;t+n<r&&0===e[t+n];)++n;return 128<=e[t+n]&&--n,n}e.exports={convertToForge:function(t,e){var r=(r=e?["x","y"]:["d"]).map(function(e){return new a.jsbn.BigInteger(t[e].toString("hex"),16)});return r=[t.crv].concat(r),(e?i.asPublicKey:i.asPrivateKey).apply(i,r)},convertToJWK:function(e,t){var r=n(e);return(t?["x","y"]:["x","y","d"]).forEach(function(e){r[e]=s.base64url.encode(r[e])}),delete r.key_ops,delete r.use,delete r.alg,t&&delete r.d,r},convertToObj:r,convertToBuffer:function(e,t){return e=r(e,t),t?p.concat([o,e.x,e.y]):e.d},curveSize:function(e){return t[e||""]||NaN},derToConcat:function(e,t){var r=0;if(48!==e[r++])throw new Error(f);var n=e[r++];if((n=129===n?e[r++]:n)>e.length-r)throw new Error(f);if(2!==e[r++])throw new Error(f);var i=e[r++];if(i>e.length-r-2)throw new Error(f);if(t+1<i)throw new Error(f);var a=r;if(r+=i,2!==e[r++])throw new Error(f);var s=e[r++];if(s!==e.length-r)throw new Error(f);if(t+1<s)throw new Error(f);var o=r;if((r+=s)!==e.length)throw new Error(f);for(var u=t-i,c=t-s,l=p.alloc(u+i+c+s),r=0;r<u;++r)l[r]=0;n=Math.max(-u,0);e.copy(l,r,a+n,a+i);for(var h=r=t;r<h+c;++r)l[r]=0;t=Math.max(-c,0);return e.copy(l,r,o+t,o+s),l},concatToDer:function(e,t){var r=l(e,0,t),n=l(e,t,e.length),i=t-r,a=t-n,s=i+a+4,o=s<128,u=p.alloc((o?2:3)+s),c=0;return u[c++]=48,o?u[c++]=s:(u[c++]=129,u[c++]=255&s),u[c++]=2,u[c++]=i,r<0?(u[c++]=0,c+=e.copy(u,c,0,t)):c+=e.copy(u,c,r,t),u[c++]=2,u[c++]=a,n<0?(u[c++]=0,e.copy(u,c,t)):e.copy(u,c,t+n),u},convertToPEM:function(e,t){var r,n=e.crv,n=function(){switch(n){case"P-256":return"1.2.840.10045.3.1.7";case"P-384":return"1.3.132.0.34";case"P-521":return"1.3.132.0.35";default:return null}}();return n=a.asn1.oidToDer(n),e=t?(r="EC PRIVATE KEY",t=p.concat([p.from([0,4]),e.x,e.y]).toString("binary"),e=e.d.toString("binary"),a.asn1.create(a.asn1.Class.UNIVERSAL,a.asn1.Type.SEQUENCE,!0,[a.asn1.create(a.asn1.Class.UNIVERSAL,a.asn1.Type.INTEGER,!1,""),a.asn1.create(a.asn1.Class.UNIVERSAL,a.asn1.Type.OCTETSTRING,!1,e),a.asn1.create(a.asn1.Class.CONTEXT_SPECIFIC,0,!0,[a.asn1.create(a.asn1.Class.UNIVERSAL,a.asn1.Type.OID,!1,n.bytes())]),a.asn1.create(a.asn1.Class.CONTEXT_SPECIFIC,1,!0,[a.asn1.create(a.asn1.Class.UNIVERSAL,a.asn1.Type.BITSTRING,!1,t)])])):(r="PUBLIC KEY",e=p.concat([p.from([0,4]),e.x,e.y]).toString("binary"),a.asn1.create(a.asn1.Class.UNIVERSAL,a.asn1.Type.SEQUENCE,!0,[a.asn1.create(a.asn1.Class.UNIVERSAL,a.asn1.Type.SEQUENCE,!0,[a.asn1.create(a.asn1.Class.UNIVERSAL,a.asn1.Type.OID,!1,a.asn1.oidToDer(u).bytes()),a.asn1.create(a.asn1.Class.UNIVERSAL,a.asn1.Type.OID,!1,n.bytes())]),a.asn1.create(a.asn1.Class.UNIVERSAL,a.asn1.Type.BITSTRING,!1,e)])),e=a.asn1.toDer(e).bytes(),a.pem.encode({type:r,body:e})},EC_OID:u}}.call(this,c(360).Buffer)},808:function(e,t,r){"use strict";var n=r(764),i=r(758),a=r(759);function s(t,e){var r=(r=e?["n","e"]:["n","e","d","p","q","dp","dq","qi"]).map(function(e){return new i.jsbn.BigInteger(t[e].toString("hex"),16)});return(e?i.pki.rsa.setPublicKey:i.pki.rsa.setPrivateKey).apply(i.pki.rsa,r)}e.exports={convertToForge:s,convertToJWK:function(e,t){var r=n(e);return(t?["n","e"]:["n","e","d","p","q","dp","dq","qi"]).forEach(function(e){r[e]=a.base64url.encode(r[e])}),delete r.key_ops,delete r.use,delete r.alg,t&&(delete r.d,delete r.p,delete r.q,delete r.dp,delete r.dq,delete r.qi),r},convertToPem:function(e,t){var r=t?"__cachedPublicPem":"__cachedPrivatePem";return e[r]||(t=t?i.pki.publicKeyToPem(s(e,t)):i.pki.privateKeyToPem(s(e,t)),Object.defineProperty(e,r,{value:t}),t)}}},809:function(e,t,r){"use strict";r={createEncrypt:r(941).createEncrypt,createDecrypt:r(951).createDecrypt};e.exports=r},810:function(e,t,r){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},811:function(e,t,r){var n;e.exports=(n=r(134),webpackJsonpHotstarWebSDK__name_([7],{0:function(e,t){e.exports=n},110:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={validateCardTypePaymentMode:function(e,t){var r=e.binInfoPayload,n=(void 0===r?{}:r).cardCategory,i=!0,r="";return t&&(void 0===n?"":n).toUpperCase()!==t.toUpperCase()&&(i=!1,r="CardModeMismatch"),{isValid:i,type:r,data:e}},validateCard:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.binInfoPayload,r=!0,n="";return(void 0===t?{}:t).isRecurringSupported||(r=!1,n="ONLY_RECURRING_CARD_ALLOWED"),{isValid:r,type:n,data:e}}}},179:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(1)),a=n(r(2));r(180);var s=r(0);function o(){(0,i.default)(this,o)}t.default=((0,a.default)(o,[{key:"initiatePurchase",value:function(){return(0,s.handleOperation)("initiatePurchase",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"initiatePaytmPurchase",value:function(){return(0,s.handleOperation)("initiatePaytmPurchase",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"checkPaytmWalletBalance",value:function(){return(0,s.handleOperation)("checkPaytmWalletBalance",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"notifyOrChargePurchase",value:function(){return(0,s.handleOperation)("notifyOrChargePurchase",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"checkPaymentStatus",value:function(){return(0,s.handleOperation)("checkPaymentStatus",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"validatePromoCode",value:function(){return(0,s.handleOperation)("validatePromoCode",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"validateCardTypePaymentMode",value:function(){return(0,s.handleOperation)("validateCardTypePaymentMode",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"validateFieldsAsync",value:function(){return(0,s.handleOperation)("validateFieldsAsync",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"redeemPromoCode",value:function(){return(0,s.handleOperation)("redeemPromoCode",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"sendOtp",value:function(){return(0,s.handleOperation)("sendOtp",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"verifyOtp",value:function(){return(0,s.handleOperation)("verifyOtp",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"checkFreeTrial",value:function(){return(0,s.handleOperation)("checkFreeTrial",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"getPackages",value:function(){return(0,s.handleOperation)("getPackages",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"getCancellationOffers",value:function(){return(0,s.handleOperation)("getCancellationOffers",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"cancellationOfferPurchase",value:function(){return(0,s.handleOperation)("cancellationOfferPurchase",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"getPacks",value:function(){return(0,s.handleOperation)("getPacks",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"getPaymentOrderDetails",value:function(){return(0,s.handleOperation)("getPaymentOrderDetails",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"getPackDetails",value:function(){return(0,s.handleOperation)("getPackDetails",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"checkPincode",value:function(){return(0,s.handleOperation)("checkPincode",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"sendCODOTP",value:function(){return(0,s.handleOperation)("sendCODOTP",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"verifyCODOTP",value:function(){return(0,s.handleOperation)("verifyCODOTP",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"getBankNames",value:function(){return(0,s.handleOperation)("getBankNames",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"validateCoupon",value:function(){return(0,s.handleOperation)("validateCoupon",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"getCardDetails",value:function(){return(0,s.handleOperation)("getCardDetails",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"updateCardDetails",value:function(){return(0,s.handleOperation)("updateCardDetails",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"getBankInfo",value:function(){return(0,s.handleOperation)("getBankInfo",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"restartMembership",value:function(){return(0,s.handleOperation)("restartMembership",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"captureCharge",value:function(){return(0,s.handleOperation)("captureCharge",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"getReferralDetails",value:function(){return(0,s.handleOperation)("getReferralDetails",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"validateReferee",value:function(){return(0,s.handleOperation)("validateReferee",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"fetchSavedInstruments",value:function(){return(0,s.handleOperation)("fetchSavedInstruments",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}}]),new o)},180:function(e,t,r){"use strict";var n,n=(n=r(181))&&n.__esModule?n:{default:n};(0,r(0).registerOperations)("UMSV2",n.default)},181:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(r,n,e,t,i){var a={};return Object.keys(t).forEach(function(e){a[e]=t[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=e.slice().reverse().reduce(function(e,t){return t(r,n,e)||e},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(r,n,a),a=null),a}Object.defineProperty(t,"__esModule",{value:!0});var a,s,o,u,c,l,h,p,f,d,y,g,v,m,C,E,b,S,T,I,A,w,k,B,_,P,N,R,O,F,L,U,D,x,V,K,j,M,H,z,q,G,W,Q,Z,X,Y,J,$,ee=n(r(15)),te=n(r(56)),re=n(r(8)),ne=n(r(9)),ie=n(r(7)),ae=n(r(10)),se=n(r(1)),oe=n(r(2)),ue=r(0),ce=n(ue),le=n(r(182)),he=n(r(50)),pe=n(r(187)),fe=n(r(110)),de=r(89),ye=new he.default,ge=ce.default.config,ve=new le.default;function me(){(0,se.default)(this,me),this.apiRegistry=pe.default,this.validatonMap={validateCardTypePaymentMode:this.validateCardTypePaymentMode.bind(this),getBankInfo:this.getBankInfo.bind(this)}}t.default=(a=(0,ue.requestAdapter)(ve.initiatePurchaseRequest),s=(0,ue.responseAdapter)(ve.initiatePurchaseResponse),o=(0,ue.requestAdapter)(ve.checkPaytmWalletBalanceRequest),u=(0,ue.responseAdapter)(ve.checkPaytmWalletBalanceResponse),c=(0,ue.requestAdapter)(ve.notifyPurchaseRequest),l=(0,ue.responseAdapter)(ve.notifyPurchaseResponse),h=(0,ue.requestAdapter)(ve.chargePurchaseRequest),p=(0,ue.responseAdapter)(ve.chargePurchaseResponse),f=(0,ue.requestAdapter)(ve.sendOtp),d=(0,ue.responseAdapter)(ve.sendOtpResponse),y=(0,ue.requestAdapter)(ve.verifyOtp),g=(0,ue.responseAdapter)(ve.verfiryOtpResponse),v=(0,ue.requestAdapter)(ve.getPackageRequest),m=(0,ue.responseAdapter)(ve.getPackageResponse),C=(0,ue.requestAdapter)(ve.validateCardTypePaymentModeRequest),E=(0,ue.responseAdapter)(ve.cancellationOfferPurchaseResponse),b=(0,ue.responseAdapter)(ve.redeemPromoCodeResponse),S=(0,ue.requestAdapter)(ve.validatePromoCodeRequest),T=(0,ue.responseAdapter)(ve.validatePromoCodeResponse),I=(0,ue.responseAdapter)(ve.validateVerifyCODOTPResponse),A=(0,ue.responseAdapter)(ve.validateCouponResponse),r=(0,ue.requestAdapter)(ve.updateCardDetailsRequest),he=(0,ue.requestAdapter)(ve.getBankInfoRequest),le=(0,ue.responseAdapter)(ve.getBankInfoResponse),t=(0,ue.responseAdapter)(ve.validateReferralResponse),ve=(0,ue.responseAdapter)(ve.validateReferralResponse),(0,oe.default)(me,[{key:"initiatePurchase",value:($=(0,ae.default)(re.default.mark(function e(t){var r,n,i;return re.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,n=this.apiRegistry.getPath({},"initiatePurchase"),i=(0,ie.default)({},ye._getRequestHeaders()),i={data:t,headers:i},e.next=7,ce.default.HttpLib.post(n,i);case 7:r=e.sent,e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",ne.default.reject(e.t0));case 13:return e.abrupt("return",r);case 14:case"end":return e.stop()}},e,this,[[1,10]])})),function(e){return $.apply(this,arguments)})},{key:"initiatePaytmPurchase",value:(J=(0,ae.default)(re.default.mark(function e(t){var r,n,i;return re.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,n=this.apiRegistry.getPath({},"initiatePaytmPurchase"),i=(0,ie.default)({},ye._getRequestHeaders()),i={data:t,headers:i},e.next=7,ce.default.HttpLib.post(n,i);case 7:r=e.sent,e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",ne.default.reject(e.t0));case 13:return e.abrupt("return",r);case 14:case"end":return e.stop()}},e,this,[[1,10]])})),function(e){return J.apply(this,arguments)})},{key:"checkPaytmWalletBalance",value:function(e){var t={};try{var r=this.apiRegistry.getPath({},"checkPaytmWalletBalance"),n=(0,ie.default)({},ye._getRequestHeaders()),t=ce.default.HttpLib.post(r,{data:e,headers:n})}catch(e){return e.isError?ne.default.resolve(e):ne.default.reject(e)}return t}},{key:"_notifyPurchase",value:function(e){var t={};try{var r=this.apiRegistry.getPath({},"notifyPurchase"),n=(0,ie.default)({},ye._getRequestHeaders()),t=ce.default.HttpLib.post(r,{data:e,headers:n})}catch(e){return ne.default.reject(e)}return t}},{key:"_chargePurchase",value:function(e){var t={};try{var r={};e.apiVersion&&(r.apiVersion=e.apiVersion);var n=this.apiRegistry.getPath({pathVars:r},"chargePurchase"),i=(0,ie.default)({},ye._getRequestHeaders()),t=ce.default.HttpLib.post(n,{data:e,headers:i})}catch(e){return e.isError?ne.default.resolve(e):ne.default.reject(e)}return t}},{key:"notifyOrChargePurchase",value:function(e){var t=e.isCharge;return!0===(void 0!==t&&t)?e.v3RTInterceptor(this._chargePurchase.bind(this),e):e.v3RTInterceptor(this._notifyPurchase.bind(this),e)}},{key:"_checkPaymentStatus",value:(Y=(0,ae.default)(re.default.mark(function e(t){var r,n,i;return re.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},n=t.transactionId,i=t.userId,e.prev=2,n={chargeId:n},n=this.apiRegistry.getPath({pathVars:n},"checkPaymentStatus"),i=(0,ie.default)({},ye._getRequestHeaders(),{userId:i,"Content-Type":"application/json"}),i={headers:i,skipCache:!0},e.next=9,ce.default.HttpLib.get(n,i);case 9:r=e.sent,e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(2),e.abrupt("return",e.t0.isError?ne.default.resolve(e.t0):ne.default.reject(e.t0));case 15:return e.abrupt("return",r);case 16:case"end":return e.stop()}},e,this,[[2,12]])})),function(e){return Y.apply(this,arguments)})},{key:"checkPaymentStatus",value:function(e){return e.v3RTInterceptor(this._checkPaymentStatus.bind(this),e)}},{key:"sendOtp",value:function(e){var t=e.querystring,t=this.apiRegistry.getPath({querystring:t},"sendOtp");return ce.default.HttpLib.post(t,{type:"json",data:e.data}).then(function(e){var t=e.body.resultInfo.resultStatus,t=void 0===t?"":t;return"F"===t||"FAILURE"===t?ne.default.reject(e.body):e.body})}},{key:"verifyOtp",value:function(e){var t=e.querystring,t=this.apiRegistry.getPath({querystring:t},"verifyOtp");return ce.default.HttpLib.post(t,{type:"json",data:e.data}).then(function(e){var t=e.body.resultInfo.resultStatus,t=void 0===t?"":t;return"F"===t||"FAILURE"===t?ne.default.reject(e.body):e.body})}},{key:"getPackages",value:function(){var e={countryCode:ge.initConfig.getConfig().country},e=this.apiRegistry.getPath({pathVars:e},"getSubsPackages");return ce.default.HttpLib.get(e)}},{key:"validateCardTypePaymentMode",value:(X=(0,ae.default)(re.default.mark(function e(t){var r,n,i,a,s,o,u;return re.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,n=this.apiRegistry.getPath({},"validateCardTypePaymentMode"),i=(0,ie.default)({},ye._getRequestHeaders(),{"Content-Type":"application/json"}),a=t.commercialPackage,s=t.bankIdentificationNumber,o=t.cardModeType,u=t.userId,u={headers:i,skipCache:!0,data:{commercialPackage:a,bankIdentificationNumber:s,userId:u}},e.next=9,ce.default.HttpLib.post(n,u);case 9:u=e.sent,r=fe.default.validateCardTypePaymentMode(u,o),e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(1),e.abrupt("return",ne.default.reject(e.t0));case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}},e,this,[[1,13]])})),function(e){return X.apply(this,arguments)})},{key:"validateFieldsAsync",value:(Z=(0,ae.default)(re.default.mark(function e(l){var h,p=this;return re.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h={isValid:!0},e.prev=1,e.delegateYield(re.default.mark(function e(){var r,n,i,a,s,t,o,u,c;return re.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(o in r=l.formValues,n=l.validateCardFieldsAsync,i=l.selectedMode,a=l.showSelectiveBankPayments,s=[],t=function(t){n[t].forEach(function(e){s.push((0,p.validatonMap[e])({formData:r[t],selectedMode:i,showSelectiveBankPayments:a}))})},n)t(o);return e.next=6,ne.default.all(s).then(function(e){return e});case 6:u=e.sent,c=0;case 8:if(u.length<=c){e.next=15;break}if(u[c].isValid){e.next=12;break}return h=u[c],e.abrupt("break",15);case 12:c++,e.next=8;break;case 15:case"end":return e.stop()}},e,p)})(),"t0",3);case 3:e.next=8;break;case 5:return e.prev=5,e.t1=e.catch(1),e.abrupt("return",ne.default.reject(e.t1));case 8:return e.abrupt("return",h);case 9:case"end":return e.stop()}},e,this,[[1,5]])})),function(e){return Z.apply(this,arguments)})},{key:"getCancellationOffers",value:(Q=(0,ae.default)(re.default.mark(function e(t){var r;return re.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,ie.default)({},t),r=this.apiRegistry.getPath({pathVars:r},"getCancellationOffers"),e.next=4,ce.default.HttpLib.get(r);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}},e,this)})),function(e){return Q.apply(this,arguments)})},{key:"cancellationOfferPurchase",value:(W=(0,ae.default)(re.default.mark(function e(t){var r,n,i;return re.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.pathVars,r=t.data,n=this.apiRegistry.getPath({pathVars:i},"cancellationOfferPurchase"),i=(0,ie.default)({},ye._getRequestHeaders()),i={type:"json",data:r,headers:i},e.next=7,ce.default.HttpLib.post(n,i);case 7:return i=e.sent,e.abrupt("return",i);case 9:case"end":return e.stop()}},e,this)})),function(e){return W.apply(this,arguments)})},{key:"redeemPromoCode",value:(G=(0,ae.default)(re.default.mark(function e(t){var r,n,i;return re.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.pathVars,r=t.data,n=this.apiRegistry.getPath({pathVars:i},"redeemPromoCode"),i=(0,ie.default)({},ye._getRequestHeaders()),i={type:"json",data:r,headers:i},e.next=7,ce.default.HttpLib.post(n,i);case 7:return i=e.sent,e.abrupt("return",i);case 9:case"end":return e.stop()}},e,this)})),function(e){return G.apply(this,arguments)})},{key:"validatePromoCode",value:(q=(0,ae.default)(re.default.mark(function e(t){return re.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.v3RTInterceptor(this._validatePromoCode.bind(this),t));case 1:case"end":return e.stop()}},e,this)})),function(e){return q.apply(this,arguments)})},{key:"_validatePromoCode",value:(z=(0,ae.default)(re.default.mark(function e(t){var r,n,i,a;return re.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,n=t.userId,i=t.couponCode,a=t.commercialPack,i={userId:n,couponCode:i},a={commercialPack:a},i=this.apiRegistry.getPath({pathVars:i,querystring:a},"validatePromoCode"),a=(0,ie.default)({},ye._getRequestHeaders()),e.next=9,ce.default.HttpLib.get(i,{headers:a});case 9:r=e.sent,e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(1),e.abrupt("return",e.t0.isError?ne.default.resolve(e.t0):ne.default.reject(e.t0));case 15:return e.abrupt("return",r);case 16:case"end":return e.stop()}},e,this,[[1,12]])})),function(e){return z.apply(this,arguments)})},{key:"getPaymentOrderDetails",value:(H=(0,ae.default)(re.default.mark(function e(t){var r,n,i;return re.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,n=t.orderId,i=t.userId,n={orderId:n},n=this.apiRegistry.getPath({pathVars:n},"getPaymentOrderDetails"),i=(0,ie.default)({},ye._getRequestHeaders(),{userId:i}),e.next=8,ce.default.HttpLib.get(n,{headers:i});case 8:r=e.sent,e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",ne.default.reject(e.t0));case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}},e,this,[[1,11]])})),function(e){return H.apply(this,arguments)})},{key:"getPacks",value:(M=(0,ae.default)(re.default.mark(function e(t){var r,n,i,a,s;return re.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.tags,a=t.subscription_pack,n=void 0===a?"":a,i={},s={},(a={}).apiVersion="v1",r&&(s.tags=r),n&&(s.subscription_pack=n),e.prev=7,a=this.apiRegistry.getPath({pathVars:a,querystring:s},"getPacks"),s=(0,ie.default)({},ye._getRequestHeaders(),{"Content-Type":"application/json"}),s={headers:s},e.next=13,ce.default.HttpLib.get(a,s);case 13:i=e.sent,e.next=19;break;case 16:return e.prev=16,e.t0=e.catch(7),e.abrupt("return",e.t0);case 19:return e.abrupt("return",i);case 20:case"end":return e.stop()}},e,this,[[7,16]])})),function(e){return M.apply(this,arguments)})},{key:"getPackDetails",value:function(e){return e.v3RTInterceptor(this._getPackDetails.bind(this),e)}},{key:"_getPackDetails",value:(j=(0,ae.default)(re.default.mark(function e(t){var r,n,i,a,s,o;return re.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,n=t.packId,s=t.userId,i=t.tags,a=t.skipCache,o=void 0===a||a,a=t.verbosity,a={verbose:void 0===a?3:a},n&&(a.subscription_pack=n),i&&(a.tags=i),a=this.apiRegistry.getPath({querystring:a},"getPackDetails"),s=(0,ie.default)({},ye._getRequestHeaders(),{userId:s,"Content-Type":"application/json"}),o={data:t,headers:s,skipCache:o},e.next=11,ce.default.HttpLib.get(a,o);case 11:r=e.sent,e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(1),e.abrupt("return",e.t0);case 17:return e.abrupt("return",r);case 18:case"end":return e.stop()}},e,this,[[1,14]])})),function(e){return j.apply(this,arguments)})},{key:"checkPincode",value:(K=(0,ae.default)(re.default.mark(function e(t){var r,n,i;return re.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,n=t.zip,i={zip:n},n=this.apiRegistry.getPath({querystring:i},"checkPincode"),i={headers:ye._getRequestHeaders()},e.next=8,ce.default.HttpLib.get(n,i);case 8:r=e.sent,e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",e.t0);case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}},e,this,[[1,11]])})),function(e){return K.apply(this,arguments)})},{key:"sendCODOTP",value:function(e){return e.v3RTInterceptor(this._sendCODOTP.bind(this),e)}},{key:"_sendCODOTP",value:(V=(0,ae.default)(re.default.mark(function e(t){var r,n,i,a;return re.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,a=t.userId,n=(0,te.default)(t,["userId"]),i=this.apiRegistry.getPath({},"sendCODOTP"),a=(0,ie.default)({},ye._getRequestHeaders(),{userId:a}),a={data:n,headers:a},e.next=8,ce.default.HttpLib.post(i,a);case 8:r=e.sent,e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",e.t0);case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}},e,this,[[1,11]])})),function(e){return V.apply(this,arguments)})},{key:"verifyCODOTP",value:function(e){return e.v3RTInterceptor(this._verifyCODOTP.bind(this),e)}},{key:"_verifyCODOTP",value:(x=(0,ae.default)(re.default.mark(function e(t){var r,n,i,a;return re.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,a=t.userId,n=(0,te.default)(t,["userId"]),i=this.apiRegistry.getPath({},"verifyCODOTP"),a=(0,ie.default)({},ye._getRequestHeaders(),{userId:a}),a={data:n,headers:a},e.next=8,ce.default.HttpLib.put(i,a);case 8:r=e.sent,e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",e.t0);case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}},e,this,[[1,11]])})),function(e){return x.apply(this,arguments)})},{key:"getBankNames",value:(D=(0,ae.default)(re.default.mark(function e(){var t,r,n;return re.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},(n={}).apiVersion="v3",e.prev=3,r=this.apiRegistry.getPath({pathVars:n},"getBankNames"),n=(0,ie.default)({},ye._getRequestHeaders(),{"Content-Type":"application/json"}),n={headers:n},e.next=9,ce.default.HttpLib.get(r,n);case 9:t=e.sent,e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(3),e.abrupt("return",e.t0);case 15:return e.abrupt("return",t);case 16:case"end":return e.stop()}},e,this,[[3,12]])})),function(){return D.apply(this,arguments)})},{key:"validateCoupon",value:(U=(0,ae.default)(re.default.mark(function e(t){var r,n,i;return re.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,n=t.couponCode,i=t.packId,n={couponCode:n},n=this.apiRegistry.getPath({pathVars:n},"validateCoupon"),i={headers:ye._getRequestHeaders(),data:{packId:i}},e.next=8,ce.default.HttpLib.post(n,i);case 8:r=e.sent,e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",e.t0);case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}},e,this,[[1,11]])})),function(e){return U.apply(this,arguments)})},{key:"getCardDetails",value:function(e){return e.v3RTInterceptor(this._getCardDetails.bind(this),e)}},{key:"_getCardDetails",value:(L=(0,ae.default)(re.default.mark(function e(t){var r,n,i,a;return re.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,a=t.userId,i={onlyPrimary:!0},n={apiVersion:"v3"},i=this.apiRegistry.getPath({pathVars:n,querystring:i},"cardDetails"),a=(0,ie.default)({},ye._getRequestHeaders(),{userIdentity:a,"Content-Type":"application/json"}),a={headers:a,skipCache:!0},e.next=10,ce.default.HttpLib.get(i,a);case 10:r=e.sent,e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(1),e.abrupt("return",ne.default.reject(e.t0));case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}},e,this,[[1,13]])})),function(e){return L.apply(this,arguments)})},{key:"updateCardDetails",value:function(e){return e.v3RTInterceptor(this._updateCardDetails.bind(this),e)}},{key:"_updateCardDetails",value:(F=(0,ae.default)(re.default.mark(function e(t){var r,n,i;return re.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,n=this.apiRegistry.getPath({},"cardDetails"),i=ye._getRequestHeaders(),i={data:t,headers:i},e.next=7,ce.default.HttpLib.post(n,i);case 7:r=e.sent,e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",ne.default.reject(e.t0));case 13:return e.abrupt("return",r);case 14:case"end":return e.stop()}},e,this,[[1,10]])})),function(e){return F.apply(this,arguments)})},{key:"getBankInfo",value:(O=(0,ae.default)(re.default.mark(function e(t){var r,n,i;return re.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,n=t.cardBINNumber,i={apiVersion:"v3",cardBINNumber:n},n=this.apiRegistry.getPath({pathVars:i},"getBankInfo"),i={headers:(0,ie.default)({},ye._getRequestHeaders(),{"Content-Type":"application/json"})},e.next=8,ce.default.HttpLib.get(n,i);case 8:r=e.sent,e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",ne.default.reject(e.t0));case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}},e,this,[[1,11]])})),function(e){return O.apply(this,arguments)})},{key:"_restartMembership",value:(R=(0,ae.default)(re.default.mark(function e(t){var r,n,i;return re.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,i={apiVersion:"v1"},n=this.apiRegistry.getPath({pathVars:i},"restartMembership"),i={headers:(0,ie.default)({},ye._getRequestHeaders(),{"Content-Type":"application/json"}),data:t},e.next=7,ce.default.HttpLib.post(n,i);case 7:r=e.sent,e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",ne.default.reject(e.t0));case 13:return e.abrupt("return",r);case 14:case"end":return e.stop()}},e,this,[[1,10]])})),function(e){return R.apply(this,arguments)})},{key:"restartMembership",value:(N=(0,ae.default)(re.default.mark(function e(t){return re.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.v3RTInterceptor(this._restartMembership.bind(this),t));case 1:case"end":return e.stop()}},e,this)})),function(e){return N.apply(this,arguments)})},{key:"_captureCharge",value:(P=(0,ae.default)(re.default.mark(function e(t){var r,n,i;return re.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,n=t.chargeId,i={chargeId:n},n=this.apiRegistry.getPath({pathVars:i},"captureCharge"),i={headers:ye._getRequestHeaders(),data:t},e.next=8,ce.default.HttpLib.post(n,i);case 8:r=e.sent,e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",ne.default.reject(e.t0));case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}},e,this,[[1,11]])})),function(e){return P.apply(this,arguments)})},{key:"captureCharge",value:(_=(0,ae.default)(re.default.mark(function e(t){return re.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.v3RTInterceptor(this._captureCharge.bind(this),t));case 1:case"end":return e.stop()}},e,this)})),function(e){return _.apply(this,arguments)})},{key:"_getReferralDataByContext",value:(B=(0,ae.default)(re.default.mark(function e(t){var r,n,i;return re.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,n=t.userId,i=t.context,i={context:i},n=(0,de.getUMSPaymentHeaders)({userId:n}),i=this.apiRegistry.getPath({querystring:i},"getReferralDetails"),e.next=8,ce.default.HttpLib.get(i,{headers:n,skipCache:!0});case 8:r=e.sent,e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",ne.default.reject(e.t0));case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}},e,this,[[1,11]])})),function(e){return B.apply(this,arguments)})},{key:"getReferralDetails",value:function(e){return e.v3RTInterceptor(this._getReferralDataByContext.bind(this),e)}},{key:"_validateReferee",value:(k=(0,ae.default)(re.default.mark(function e(t){var r,n,i,a;return re.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,a=t.userId,n=t.referCode,i=this.apiRegistry.getPath({},"validateReferee"),a=(0,de.getUMSPaymentHeaders)({userId:a}),e.next=7,ce.default.HttpLib.post(i,{headers:a,data:{referral_code:n},skipCache:!0});case 7:r=e.sent,e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",ne.default.reject(e.t0));case 13:return e.abrupt("return",r);case 14:case"end":return e.stop()}},e,this,[[1,10]])})),function(e){return k.apply(this,arguments)})},{key:"validateReferee",value:function(e){return e.v3RTInterceptor(this._validateReferee.bind(this),e)}},{key:"fetchSavedInstruments",value:(w=(0,ae.default)(re.default.mark(function e(t){var r,n,i,a,s;return re.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,n=t.userId,i=t.apiTimeOut,a=this.apiRegistry.getPath({},"fetchSavedInstruments"),(s=(0,de.getUMSPaymentHeaders)({userId:n})).userIdentity=n,e.next=8,ce.default.HttpLib.post(a,{headers:s,data:t,skipCache:!0,retries:[0],apiTimeOut:i||5e3});case 8:r=e.sent,e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",ne.default.reject(e.t0));case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}},e,this,[[1,11]])})),function(e){return w.apply(this,arguments)})}]),i((ae=me).prototype,"initiatePurchase",[a,s],(0,ee.default)(ae.prototype,"initiatePurchase"),ae.prototype),i(ae.prototype,"checkPaytmWalletBalance",[o,u],(0,ee.default)(ae.prototype,"checkPaytmWalletBalance"),ae.prototype),i(ae.prototype,"_notifyPurchase",[c,l],(0,ee.default)(ae.prototype,"_notifyPurchase"),ae.prototype),i(ae.prototype,"_chargePurchase",[h,p],(0,ee.default)(ae.prototype,"_chargePurchase"),ae.prototype),i(ae.prototype,"sendOtp",[f,d],(0,ee.default)(ae.prototype,"sendOtp"),ae.prototype),i(ae.prototype,"verifyOtp",[y,g],(0,ee.default)(ae.prototype,"verifyOtp"),ae.prototype),i(ae.prototype,"getPackages",[v,m],(0,ee.default)(ae.prototype,"getPackages"),ae.prototype),i(ae.prototype,"validateCardTypePaymentMode",[C],(0,ee.default)(ae.prototype,"validateCardTypePaymentMode"),ae.prototype),i(ae.prototype,"cancellationOfferPurchase",[E],(0,ee.default)(ae.prototype,"cancellationOfferPurchase"),ae.prototype),i(ae.prototype,"redeemPromoCode",[b],(0,ee.default)(ae.prototype,"redeemPromoCode"),ae.prototype),i(ae.prototype,"validatePromoCode",[S,T],(0,ee.default)(ae.prototype,"validatePromoCode"),ae.prototype),i(ae.prototype,"_verifyCODOTP",[I],(0,ee.default)(ae.prototype,"_verifyCODOTP"),ae.prototype),i(ae.prototype,"validateCoupon",[A],(0,ee.default)(ae.prototype,"validateCoupon"),ae.prototype),i(ae.prototype,"_updateCardDetails",[r],(0,ee.default)(ae.prototype,"_updateCardDetails"),ae.prototype),i(ae.prototype,"getBankInfo",[he,le],(0,ee.default)(ae.prototype,"getBankInfo"),ae.prototype),i(ae.prototype,"_getReferralDataByContext",[t],(0,ee.default)(ae.prototype,"_getReferralDataByContext"),ae.prototype),i(ae.prototype,"_validateReferee",[ve],(0,ee.default)(ae.prototype,"_validateReferee"),ae.prototype),ae)},182:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a,s=n(r(9)),i=n(r(7)),o=n(r(3)),u=n(r(1)),c=n(r(2)),l=n(r(4)),h=n(r(5)),p=n(r(57)),f=n(r(110));function d(){var e,t;(0,u.default)(this,d);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return e=t=(0,l.default)(this,(e=d.__proto__||(0,o.default)(d)).call.apply(e,[this].concat(n))),a.call(t),(0,l.default)(t,e)}t.default=(p=p.default,(0,h.default)(d,p),(0,c.default)(d,[{key:"initiatePurchaseRequest",value:function(e){var t=e.fname,r=e.lname,n=e.paymentHash,i=e.paymentMode,a=e.paymentType,s=e.userId,o=e.subscriptionPack,u=e.cardBIN,c=e.zip,l=e.state,h=e.city,p=e.latitude,f=e.longitude,d=e.returnUrl,y=e.promoCode,g=e.bankCode,v=e.pgParams,m=e.pgName,C=e.paymentProcessor,E=e.phoneNumber,b=e.payload,e=e.referralCode;return{fname:void 0===t?"":t,lname:void 0===r?"":r,paymentHash:void 0===n?"":n,paymentType:void 0===a?"":a,paymentMode:void 0===i?"":i,userId:void 0===s?"":s,subscriptionPack:void 0===o?"":o,cardBIN:void 0===u?null:u,zip:void 0===c?"":c,state:void 0===l?"":l,city:void 0===h?"":h,latitude:void 0===p?"":p,longitude:void 0===f?"":f,returnUrl:void 0===d?"":d,promoCode:void 0===y?"":y,bankCode:void 0===g?"":g,pgParams:void 0===v?{}:v,pgName:void 0===m?"":m,paymentProcessor:void 0===C?"":C,phoneNumber:void 0===E?"":E,payload:void 0===b?null:b,referralCode:void 0===e?"":e}}},{key:"initiatePurchaseResponse",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.httpStatus,r=e.responseCode;return 400===t&&"INVALID_VPA_ID"===r&&(e.invalidVpa=!0),e}},{key:"invokePGRequest",value:function(e){}},{key:"invokePGResponse",value:function(e){e.clientCorrected=!0}},{key:"checkPaytmWalletBalanceRequest",value:function(e){var t=e.pgName,r=e.txnToken,n=e.amount,i=e.currencyCode,e=e.transactionId;return{pgName:void 0===t?"paytm":t,transactionToken:void 0===r?"":r,amount:void 0===n?"":n,currencyCode:void 0===i?"INR":i,chargeId:void 0===e?"":e}}},{key:"checkPaytmWalletBalanceResponse",value:function(e){var t="SUCCESS";return 200!==e.httpStatus&&(t="FAILURE"),(0,i.default)({state:t},e)}},{key:"notifyPurchaseRequest",value:function(e){var t=e.userId,r=e.paymentType,n=e.transactionId,i=e.transactionSignature,a=e.subscriptionPack,s=e.paymentToken,o=e.promoCode,e=e.pgParams;return{userId:void 0===t?"":t,paymentType:void 0===r?"":r,transactionId:void 0===n?"":n,transactionSignature:void 0===i?"":i,subscriptionPack:void 0===a?"":a,paymentToken:void 0===s?"":s,promoCode:void 0===o?"":o,pgParams:void 0===e?{}:e}}},{key:"notifyPurchaseResponse",value:function(e){var t="SUCCESS";return 200!==e.httpStatus&&(t="FAILURE"),(0,i.default)({state:t},e)}},{key:"chargePurchaseRequest",value:function(e){var t=e.userId,r=e.transactionId,n=e.transactionSignature,i=e.pgName,a=e.userToken,s=e.deviceId,e=e.apiVersion;return{userId:void 0===t?"":t,transactionId:void 0===r?"":r,transactionSignature:void 0===n?"":n,pgName:void 0===i?"":i,userToken:void 0===a?"":a,deviceId:void 0===s?"":s,apiVersion:void 0===e?"":e}}},{key:"chargePurchaseResponse",value:function(e){var t=!0,r="SUCCESS";return 200===e.httpStatus&&200===e.status||(t=!1,r="FAILURE"),(0,i.default)({state:r,success:t},e)}},{key:"sendOtp",value:function(e){var t=e.mobileNumber,r=e.mid,n=e.orderId,e=e.txnToken;return{data:{head:{txnToken:void 0===e?"":e},body:{mobileNumber:void 0===t?"":t}},querystring:{mid:void 0===r?"":r,orderId:void 0===n?"":n}}}},{key:"sendOtpResponse",value:function(e){return e}},{key:"verifyOtp",value:function(e){var t=e.otp,r=e.txnToken,n=e.mid,e=e.orderId;return{data:{head:{txnToken:void 0===r?"":r},body:{otp:void 0===t?"":t}},querystring:{mid:void 0===n?"":n,orderId:void 0===e?"":e}}}},{key:"verfiryOtpResponse",value:function(e){return e}},{key:"validateVerifyCODOTPResponse",value:function(e){return e&&e.httpStatus}},{key:"getPackageRequest",value:function(e){return e}},{key:"getPackageResponse",value:function(e){return e}},{key:"validateCardTypePaymentModeRequest",value:function(e){var t=e.packId,r=e.cardBINNumber,n=e.cardModeType,n=void 0===n?"":n,e=e.userId;return{commercialPackage:void 0===t?"":t,bankIdentificationNumber:(""+(void 0===r?"":r)).slice(0,6),cardModeType:n,userId:e}}},{key:"cancellationOfferPurchaseResponse",value:function(e){var t="FAILURE",r=!1;return 200!==e.httpStatus&&201!==e.httpStatus||(t="SUCCESS",r=!0),(0,i.default)({state:t,success:r},e)}},{key:"redeemPromoCodeResponse",value:function(e){var t="FAILURE",r=!1;return 200!==e.httpStatus&&201!==e.httpStatus||(t="SUCCESS",r=!0),(0,i.default)({state:t,success:r},e)}},{key:"validatePromoCodeRequest",value:function(e){var t=e.couponCode,r=e.userId,n=e.commercialPack,e=e.v3RTInterceptor;return{couponCode:void 0===t?"":t,userId:void 0===r?"":r,commercialPack:void 0===n?"":n,v3RTInterceptor:void 0===e?function(e,t){return e(t)}:e}}},{key:"validatePromoCodeResponse",value:function(e){return e}},{key:"validateCouponResponse",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,i.default)({success:!!e.details},e)}},{key:"validateReferralResponse",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.context;return(0,i.default)({success:!(void 0===t||!t)},e)}},{key:"updateCardDetailsRequest",value:function(e){var t=e.userId,r=e.paymentMode,n=e.instrumentId,i=e.returnUrl;return{userId:t,paymentMode:r,instrumentId:void 0===n?"":n,returnUrl:void 0===i?"":i,payload:e.payload}}},{key:"getBankInfoRequest",value:function(e){return{cardBINNumber:(""+e.cardBINNumber).slice(0,6)}}},{key:"getBankInfoResponse",value:function(){return f.default.validateCard(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}}]),a=function(){this.reauthenticate=function(e){return function(e,t,r){var i=r.value;r.value=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];var n=this;return new s.default(function(e,t){i.apply(n,r).then(function(){return e.apply(void 0,arguments)}).catch(function(e){"UMSP_710"===e.appCode||"UMSP_7401"===e.appCode||t(e)})})}}}},d)},187:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(11)),a=n(r(3)),s=n(r(1)),o=n(r(4)),u=n(r(5)),c=n(r(188)),r=n(r(20));function l(){(0,s.default)(this,l);var e=(0,o.default)(this,(l.__proto__||(0,a.default)(l)).call(this));return e.apiConfigs=[].concat((0,i.default)(c.default),(0,i.default)(e.apiConfigs||[])),e._defaultOptions={apiVersion:"v2"},e}t.default=(r=r.default,(0,u.default)(l,r),new l)},188:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});r=(r=r(0))&&r.__esModule?r:{default:r};t.default=[{endPoint:r.default.constants.UMS_PAYMENT_PLATFORM,apis:{initiatePurchase:{route:"/{apiVersion}/{platform}/{countryCode}/payment/initiate"},initiatePaytmPurchase:{route:"/v3/{platform}/{countryCode}/payment/initiate"},checkPaytmWalletBalance:{route:"/v3/{platform}/{countryCode}/payment/fetchBalance"},notifyPurchase:{route:"/{apiVersion}/{platform}/{countryCode}/payment/notify"},chargePurchase:{route:"/{apiVersion}/{platform}/{countryCode}/payment/charge"},checkPaymentStatus:{route:"/{apiVersion}/{countryCode}/charge/{chargeId}"},validatePromoCode:{route:"/{apiVersion}/{platform}/{countryCode}/payment/validate/user/{userId}/coupon/{couponCode}/"},cancellationOfferPurchase:{route:"/{apiVersion}/{platform}/{countryCode}/subscription/switch"},redeemPromoCode:{route:"/{apiVersion}/{platform}/{countryCode}/payment/coupon/redeem"},validateCardTypePaymentMode:{route:"/v4/{platform}/{countryCode}/subscription/validate"},getPacks:{route:"/{apiVersion}/{platform}/{countryCode}/packs"},getPackDetails:{route:"/{apiVersion}/{platform}/{countryCode}/subscription"},checkPincode:{route:"/external/{apiVersion}/{countryCode}/verify-zip"},sendCODOTP:{route:"/external/{apiVersion}/{countryCode}/send-otp"},verifyCODOTP:{route:"/external/{apiVersion}/{countryCode}/verify-otp"},getBankNames:{route:"/{apiVersion}/{platform}/{countryCode}/bankDetails"},validateCoupon:{route:"/coupon/{apiVersion}/{platform}/{countryCode}/validate/{couponCode}"},cardDetails:{route:"/{apiVersion}/{platform}/{countryCode}/payment/instruments"},getBankInfo:{route:"/{apiVersion}/{platform}/{countryCode}/payment/bank-info/{cardBINNumber}"},restartMembership:{route:"/subscription/{apiVersion}/{platform}/{countryCode}/payment/charge"},captureCharge:{route:"/payments/v3/charge/{chargeId}/capture"},getPaymentOrderDetails:{route:"/v1/{platform}/{countryCode}/order/{orderId}/"},getReferralDetails:{route:"/subscription/v1/{platform}/{countryCode}/referral"},validateReferee:{route:"/subscription/v1/{platform}/{countryCode}/referral/validate/referee"},fetchSavedInstruments:{route:"/v1/{platform}/{countryCode}/payment/provider-instruments/search"}}},{endPoint:r.default.constants.HS_PAYMENT,apis:{sendOtp:{route:"/sendOtp"},verifyOtp:{route:"/validateOtp"}}},{endPoint:r.default.constants.SECURE_MEDIA_CDN,apis:{getSubsPackages:{route:"/{tenant}/active-packages.json"},getCancellationOffers:{route:"/{tenant}/cancellation-offers.json"}}}]},56:function(e,t,r){"use strict";t.__esModule=!0,t.default=function(e,t){var r,n={};for(r in e)t.indexOf(r)<0&&Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}}},[179]))},817:function(t,e,r){!function(U,D){var e=function(){"use strict";function u(e){return"function"==typeof e}var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},n=0,t=void 0,i=void 0,o=function(e,t){h[n]=e,h[n+1]=t,2===(n+=2)&&(i?i(p):g())},e="undefined"!=typeof window?window:void 0,a=e||{},s=a.MutationObserver||a.WebKitMutationObserver,c="undefined"==typeof self&&void 0!==U&&"[object process]"==={}.toString.call(U),a="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function l(){var e=setTimeout;return function(){return e(p,1)}}var h=new Array(1e3);function p(){for(var e=0;e<n;e+=2)(0,h[e])(h[e+1]),h[e]=void 0,h[e+1]=void 0;n=0}var f,d,y,g=void 0;function v(e,t){var r=this,n=new this.constructor(E);void 0===n[C]&&N(n);var i,a=r._state;return a?(i=arguments[a-1],o(function(){return _(a,n,i,r._result)})):k(r,n,e,t),n}function m(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(E);return T(t,e),t}var g=c?function(){return U.nextTick(p)}:s?(d=0,s=new s(p),y=document.createTextNode(""),s.observe(y,{characterData:!0}),function(){y.data=d=++d%2}):a?((f=new MessageChannel).port1.onmessage=p,function(){return f.port2.postMessage(0)}):(void 0===e?function(){try{var e=Function("return this")().require("vertx");return void 0!==(t=e.runOnLoop||e.runOnContext)?function(){t(p)}:l()}catch(e){return l()}}:l)(),C=Math.random().toString(36).substring(2);function E(){}var b=void 0;function S(e,t,r){var i,a,n,s;t.constructor===e.constructor&&r===v&&t.constructor.resolve===m?(n=e,1===(s=t)._state?A(n,s._result):2===s._state?w(n,s._result):k(s,void 0,function(e){return T(n,e)},function(e){return w(n,e)})):void 0!==r&&u(r)?(i=t,a=r,o(function(r){var n=!1,e=function(e,t){try{e.call(t,function(e){n||(n=!0,i!==e?T(r,e):A(r,e))},function(e){n||(n=!0,w(r,e))})}catch(e){return e}}(a,i,r._label);!n&&e&&(n=!0,w(r,e))},e)):A(e,t)}function T(e,t){if(e===t)w(e,new TypeError("You cannot resolve a promise with itself"));else if(r=typeof t,null===t||"object"!=r&&"function"!=r)A(e,t);else{r=void 0;try{r=t.then}catch(t){return void w(e,t)}S(e,t,r)}var r}function I(e){e._onerror&&e._onerror(e._result),B(e)}function A(e,t){e._state===b&&(e._result=t,e._state=1,0!==e._subscribers.length&&o(B,e))}function w(e,t){e._state===b&&(e._state=2,e._result=t,o(I,e))}function k(e,t,r,n){var i=e._subscribers,a=i.length;e._onerror=null,i[a]=t,i[a+1]=r,i[a+2]=n,0===a&&e._state&&o(B,e)}function B(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n,i=void 0,a=e._result,s=0;s<t.length;s+=3)n=t[s],i=t[s+r],n?_(r,n,i,a):i(a);e._subscribers.length=0}}function _(e,t,r,n){var i=u(r),a=void 0,s=void 0,o=!0;if(i){try{a=r(n)}catch(e){o=!1,s=e}if(t===a)return void w(t,new TypeError("A promises callback cannot return that same promise."))}else a=n;t._state!==b||(i&&o?T(t,a):!1===o?w(t,s):1===e?A(t,a):2===e&&w(t,a))}var P=0;function N(e){e[C]=P++,e._state=void 0,e._result=void 0,e._subscribers=[]}var R=(L.prototype._enumerate=function(e){for(var t=0;this._state===b&&t<e.length;t++)this._eachEntry(e[t],t)},L.prototype._eachEntry=function(t,e){var r=this._instanceConstructor,n=r.resolve;if(n===m){var i,a=void 0,s=void 0,o=!1;try{a=t.then}catch(t){o=!0,s=t}a===v&&t._state!==b?this._settledAt(t._state,e,t._result):"function"!=typeof a?(this._remaining--,this._result[e]=t):r===O?(i=new r(E),o?w(i,s):S(i,t,a),this._willSettleAt(i,e)):this._willSettleAt(new r(function(e){return e(t)}),e)}else this._willSettleAt(n(t),e)},L.prototype._settledAt=function(e,t,r){var n=this.promise;n._state===b&&(this._remaining--,2===e?w(n,r):this._result[t]=r),0===this._remaining&&A(n,this._result)},L.prototype._willSettleAt=function(e,t){var r=this;k(e,void 0,function(e){return r._settledAt(1,t,e)},function(e){return r._settledAt(2,t,e)})},L),O=(F.prototype.catch=function(e){return this.then(null,e)},F.prototype.finally=function(t){var r=this.constructor;return u(t)?this.then(function(e){return r.resolve(t()).then(function(){return e})},function(e){return r.resolve(t()).then(function(){throw e})}):this.then(t,t)},F);function F(e){this[C]=P++,this._result=this._state=void 0,this._subscribers=[],E!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof F?function(t,e){try{e(function(e){T(t,e)},function(e){w(t,e)})}catch(e){w(t,e)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}function L(e,t){this._instanceConstructor=e,this.promise=new e(E),this.promise[C]||N(this.promise),r(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?A(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&A(this.promise,this._result))):w(this.promise,new Error("Array Methods must be provided an Array"))}return O.prototype.then=v,O.all=function(e){return new R(this,e).promise},O.race=function(i){var a=this;return r(i)?new a(function(e,t){for(var r=i.length,n=0;n<r;n++)a.resolve(i[n]).then(e,t)}):new a(function(e,t){return t(new TypeError("You must pass an array to race."))})},O.resolve=m,O.reject=function(e){var t=new this(E);return w(t,e),t},O._setScheduler=function(e){i=e},O._setAsap=function(e){o=e},O._asap=o,O.polyfill=function(){var e=void 0;if(void 0!==D)e=D;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=O},O.Promise=O};t.exports=e()}.call(this,r(362),r(133))},818:function(e,t,r){var I=r(882),A=r(883),w=r(884),k=r(780),B=r(819),_=r(794),P=r(885),N=r(795),R=r(361);e.exports=function o(u,c,l,h,p,f,d,y,g,v){var m=128&c,C=1&c,E=2&c,b=24&c,S=512&c,T=E?void 0:k(u);return function e(){for(var t,r=arguments.length,n=Array(r),i=r;i--;)n[i]=arguments[i];if(b&&(s=_(e),t=w(n,s)),h&&(n=I(n,h,p,b)),f&&(n=A(n,f,d,b)),r-=t,b&&r<v){var a=N(n,s);return B(u,c,o,e.placeholder,l,n,a,y,g,v-r)}var s=C?l:this,a=E?s[u]:u,r=n.length;return y?n=P(n,y):S&&1<r&&n.reverse(),m&&g<r&&(n.length=g),(a=this&&this!==R&&this instanceof e?T||k(a):a).apply(s,n)}}},819:function(e,t,r){var h=r(966),p=r(820),f=r(821);e.exports=function(e,t,r,n,i,a,s,o,u,c){var l=8&t;t|=l?32:64,4&(t&=~(l?64:32))||(t&=-4);c=[e,t,i,l?a:void 0,l?s:void 0,l?void 0:a,l?void 0:s,o,u,c],r=r.apply(void 0,c);return h(e)&&p(r,c),r.placeholder=n,f(r,e,t)}},820:function(e,t){e.exports=function(e){return e}},821:function(e,t){e.exports=function(e){return e}},822:function(e,t,r){var s=r(756);r(757),s.cipher=s.cipher||{};e=e.exports=s.cipher.modes=s.cipher.modes||{};function n(e,t){if("string"==typeof e&&(e=s.util.createBuffer(e)),s.util.isArray(e)&&4<e.length){var r=e;e=s.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(e.length()<t)throw new Error("Invalid IV length; got "+e.length()+" bytes and expected "+t+" bytes.");if(!s.util.isArray(e)){for(var i=[],a=t/4,n=0;n<a;++n)i.push(e.getInt32());e=i}return e}function o(e){e[e.length-1]=e[e.length-1]+1&4294967295}function a(e){return[e/4294967296|0,4294967295&e]}e.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},e.ecb.prototype.start=function(e){},e.ecb.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&0<e.length()))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();for(this.cipher.encrypt(this._inBlock,this._outBlock),n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])},e.ecb.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&0<e.length()))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();for(this.cipher.decrypt(this._inBlock,this._outBlock),n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])},e.ecb.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0},e.ecb.prototype.unpad=function(e,t){if(0<t.overflow)return!1;t=e.length(),t=e.at(t-1);return!(t>this.blockSize<<2||(e.truncate(t),0))},e.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},e.cbc.prototype.start=function(e){if(null===e.iv){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=n(e.iv,this.blockSize),this._prev=this._iv.slice(0)}},e.cbc.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&0<e.length()))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^e.getInt32();for(this.cipher.encrypt(this._inBlock,this._outBlock),n=0;n<this._ints;++n)t.putInt32(this._outBlock[n]);this._prev=this._outBlock},e.cbc.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&0<e.length()))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();for(this.cipher.decrypt(this._inBlock,this._outBlock),n=0;n<this._ints;++n)t.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)},e.cbc.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0},e.cbc.prototype.unpad=function(e,t){if(0<t.overflow)return!1;t=e.length(),t=e.at(t-1);return!(t>this.blockSize<<2||(e.truncate(t),0))},e.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=s.util.createBuffer(),this._partialBytes=0},e.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=n(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},e.cfb.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32()^this._outBlock[i],t.putInt32(this._inBlock[i]);else{var a=(this.blockSize-n)%this.blockSize;for(0<a&&(a=this.blockSize-a),this._partialOutput.clear(),i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(0<a)e.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(0<this._partialBytes&&this._partialOutput.getBytes(this._partialBytes),0<a&&!r)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},e.cfb.prototype.decrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32(),t.putInt32(this._inBlock[i]^this._outBlock[i]);else{var a=(this.blockSize-n)%this.blockSize;for(0<a&&(a=this.blockSize-a),this._partialOutput.clear(),i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(0<a)e.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(0<this._partialBytes&&this._partialOutput.getBytes(this._partialBytes),0<a&&!r)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},e.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=s.util.createBuffer(),this._partialBytes=0},e.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=n(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},e.ofb.prototype.encrypt=function(e,t,r){var n=e.length();if(0===e.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];else{var a=(this.blockSize-n)%this.blockSize;for(0<a&&(a=this.blockSize-a),this._partialOutput.clear(),i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(0<a)e.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(0<this._partialBytes&&this._partialOutput.getBytes(this._partialBytes),0<a&&!r)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},e.ofb.prototype.decrypt=e.ofb.prototype.encrypt,e.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=s.util.createBuffer(),this._partialBytes=0},e.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=n(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},e.ctr.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]);else{var a=(this.blockSize-n)%this.blockSize;for(0<a&&(a=this.blockSize-a),this._partialOutput.clear(),i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(0<a&&(e.read-=this.blockSize),0<this._partialBytes&&this._partialOutput.getBytes(this._partialBytes),0<a&&!r)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}o(this._inBlock)},e.ctr.prototype.decrypt=e.ctr.prototype.encrypt,e.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=s.util.createBuffer(),this._partialBytes=0,this._R=3774873600},e.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t,r=s.util.createBuffer(e.iv);if(this._cipherLength=0,t="additionalData"in e?s.util.createBuffer(e.additionalData):s.util.createBuffer(),this._tagLength="tagLength"in e?e.tagLength:128,this._tag=null,e.decrypt&&(this._tag=s.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);e=r.length();if(12===e)this._j0=[r.getInt32(),r.getInt32(),r.getInt32(),1];else{for(this._j0=[0,0,0,0];0<r.length();)this._j0=this.ghash(this._hashSubkey,this._j0,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(a(8*e)))}this._inBlock=this._j0.slice(0),o(this._inBlock),this._partialBytes=0,t=s.util.createBuffer(t),this._aDataLength=a(8*t.length());e=t.length()%this.blockSize;for(e&&t.fillWithByte(0,this.blockSize-e),this._s=[0,0,0,0];0<t.length();)this._s=this.ghash(this._hashSubkey,this._s,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()])},e.gcm.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^=e.getInt32());this._cipherLength+=this.blockSize}else{var a,s=(this.blockSize-n)%this.blockSize;for(0<s&&(s=this.blockSize-s),this._partialOutput.clear(),i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s<=0||r){for(r?(a=n%this.blockSize,this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a)):this._cipherLength+=this.blockSize,i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(0<this._partialBytes&&this._partialOutput.getBytes(this._partialBytes),0<s&&!r)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),o(this._inBlock)},e.gcm.prototype.decrypt=function(e,t,r){var n=e.length();if(n<this.blockSize&&!(r&&0<n))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),o(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize},e.gcm.prototype.afterFinish=function(e,t){var r=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=s.util.createBuffer();e=this._aDataLength.concat(a(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,e);var n=[];this.cipher.encrypt(this._j0,n);for(var i=0;i<this._ints;++i)this.tag.putInt32(this._s[i]^n[i]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),r=t.decrypt&&this.tag.bytes()!==this._tag?!1:r},e.gcm.prototype.multiply=function(e,t){for(var r=[0,0,0,0],n=t.slice(0),i=0;i<128;++i)e[i/32|0]&1<<31-i%32&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n);return r},e.gcm.prototype.pow=function(e,t){for(var r=1&e[3],n=3;0<n;--n)t[n]=e[n]>>>1|(1&e[n-1])<<31;t[0]=e[0]>>>1,r&&(t[0]^=this._R)},e.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],r=0;r<32;++r){var n=e[r/8|0]>>>4*(7-r%8)&15,n=this._m[r][n];t[0]^=n[0],t[1]^=n[1],t[2]^=n[2],t[3]^=n[3]}return t},e.gcm.prototype.ghash=function(e,t,r){return t[0]^=r[0],t[1]^=r[1],t[2]^=r[2],t[3]^=r[3],this.tableMultiply(t)},e.gcm.prototype.generateHashTable=function(e,t){for(var r=8/t,n=4*r,i=16*r,a=new Array(i),s=0;s<i;++s){var o=[0,0,0,0];o[s/n|0]=1<<t-1<<(n-1-s%n)*t,a[s]=this.generateSubHashTable(this.multiply(o,e),t)}return a},e.gcm.prototype.generateSubHashTable=function(e,t){var r=1<<t,n=r>>>1,i=new Array(r);i[n]=e.slice(0);for(var a=n>>>1;0<a;)this.pow(i[2*a],i[a]=[]),a>>=1;for(a=2;a<n;){for(var s=1;s<a;++s){var o=i[a],u=i[s];i[a+s]=[o[0]^u[0],o[1]^u[1],o[2]^u[2],o[3]^u[3]]}a*=2}for(i[0]=[0,0,0,0],a=1+n;a<r;++a){var c=i[a^n];i[a]=[e[0]^c[0],e[1]^c[1],e[2]^c[2],e[3]^c[3]]}return i}},823:function(e,t,r){var o=r(756);r(757),o.mgf=o.mgf||{},(e.exports=o.mgf.mgf1=o.mgf1=o.mgf1||{}).create=function(s){return{generate:function(e,t){for(var r=new o.util.ByteBuffer,n=Math.ceil(t/s.digestLength),i=0;i<n;i++){var a=new o.util.ByteBuffer;a.putInt32(i),s.start(),s.update(e+a.getBytes()),r.putBuffer(s.digest())}return r.truncate(r.length()-t),r.getBytes()}}}},824:function(e,t,r){var C=r(756);r(757),r(768),r(799);e=e.exports=C.pkcs1=C.pkcs1||{};function E(e,t,r){r=r||C.md.sha1.create();for(var n="",i=Math.ceil(t/r.digestLength),a=0;a<i;++a){var s=String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,255&a);r.start(),r.update(e+s),n+=r.digest().getBytes()}return n.substring(0,t)}e.encode_rsa_oaep=function(e,t,r){var n,i;"string"==typeof r?(u=r,n=arguments[3]||void 0,i=arguments[4]||void 0):r&&(u=r.label||void 0,n=r.seed||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md)),i?i.start():i=C.md.sha1.create();var a=a||i,s=Math.ceil(e.n.bitLength()/8),o=s-2*i.digestLength-2;if(t.length>o)throw(p=new Error("RSAES-OAEP input message length is too long.")).length=t.length,p.maxLength=o,p;i.update(u=u||"","raw");for(var u=i.digest(),c="",l=o-t.length,h=0;h<l;h++)c+="\0";var p,u=u.getBytes()+c+""+t;if(n){if(n.length!==i.digestLength)throw(p=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.")).seedLength=n.length,p.digestLength=i.digestLength,p}else n=C.random.getBytes(i.digestLength);s=E(n,s-i.digestLength-1,a),u=C.util.xorBytes(u,s,u.length),a=E(u,i.digestLength,a);return"\0"+C.util.xorBytes(n,a,n.length)+u},e.decode_rsa_oaep=function(e,t,r){var n;"string"==typeof r?(c=r,n=arguments[3]||void 0):r&&(c=r.label||void 0,n=r.md||void 0,r.mgf1&&r.mgf1.md&&(l=r.mgf1.md));var i=Math.ceil(e.n.bitLength()/8);if(t.length!==i)throw(f=new Error("RSAES-OAEP encoded message length is invalid.")).length=t.length,f.expectedLength=i,f;if(void 0===n?n=C.md.sha1.create():n.start(),l=l||n,i<2*n.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n.update(c=c||"","raw");for(var a=n.digest().getBytes(),s=t.charAt(0),o=t.substring(1,n.digestLength+1),u=t.substring(1+n.digestLength),c=E(u,n.digestLength,l),l=E(C.util.xorBytes(o,c,o.length),i-n.digestLength-1,l),h=C.util.xorBytes(u,l,u.length),p=h.substring(0,n.digestLength),f="\0"!==s,d=0;d<n.digestLength;++d)f|=a.charAt(d)!==p.charAt(d);for(var y=1,g=n.digestLength,v=n.digestLength;v<h.length;v++){var m=h.charCodeAt(v);f|=m&(y?65534:0),g+=y&=1&m^1}if(f||1!==h.charCodeAt(g))throw new Error("Invalid RSAES-OAEP padding.");return h.substring(g+1)}},825:function(e,t,r){var l=r(756);r(771),r(757);e=e.exports=l.sha256=l.sha256||{};(l.md.sha256=l.md.algorithms.sha256=e).create=function(){n||(h=String.fromCharCode(128),h+=l.util.fillString(String.fromCharCode(0),64),g=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],n=!0);var s=null,o=l.util.createBuffer(),u=new Array(64),c={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){c.messageLength=0,c.fullMessageLength=c.messageLength64=[];for(var e=c.messageLengthSize/4,t=0;t<e;++t)c.fullMessageLength.push(0);return o=l.util.createBuffer(),s={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},c}};return c.start(),c.update=function(e,t){var r=(e="utf8"===t?l.util.encodeUtf8(e):e).length;c.messageLength+=r;for(var r=[r/4294967296>>>0,r>>>0],n=c.fullMessageLength.length-1;0<=n;--n)c.fullMessageLength[n]+=r[1],r[1]=r[0]+(c.fullMessageLength[n]/4294967296>>>0),c.fullMessageLength[n]=c.fullMessageLength[n]>>>0,r[0]=r[1]/4294967296>>>0;return o.putBytes(e),p(s,u,o),(2048<o.read||0===o.length())&&o.compact(),c},c.digest=function(){var e=l.util.createBuffer();e.putBytes(o.bytes());var t,r=c.fullMessageLength[c.fullMessageLength.length-1]+c.messageLengthSize&c.blockLength-1;e.putBytes(h.substr(0,c.blockLength-r));for(var n=8*c.fullMessageLength[0],i=0;i<c.fullMessageLength.length-1;++i)n+=(t=8*c.fullMessageLength[i+1])/4294967296>>>0,e.putInt32(n>>>0),n=t>>>0;e.putInt32(n);var a={h0:s.h0,h1:s.h1,h2:s.h2,h3:s.h3,h4:s.h4,h5:s.h5,h6:s.h6,h7:s.h7};p(a,u,e);r=l.util.createBuffer();return r.putInt32(a.h0),r.putInt32(a.h1),r.putInt32(a.h2),r.putInt32(a.h3),r.putInt32(a.h4),r.putInt32(a.h5),r.putInt32(a.h6),r.putInt32(a.h7),r},c};var h=null,n=!1,g=null;function p(e,t,r){for(var n,i,a,s,o,u,c,l,h,p,f,d,y=r.length();64<=y;){for(s=0;s<16;++s)t[s]=r.getInt32();for(;s<64;++s)n=((n=t[s-2])>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=((i=t[s-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,t[s]=n+t[s-7]+i+t[s-16]|0;for(o=e.h0,u=e.h1,c=e.h2,l=e.h3,h=e.h4,p=e.h5,f=e.h6,d=e.h7,s=0;s<64;++s)a=o&u|c&(o^u),n=d+((h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))+(f^h&(p^f))+g[s]+t[s],d=f,f=p,p=h,h=l+n>>>0,l=c,c=u,o=n+(i=(((u=o)>>>2|o<<30)^(o>>>13|o<<19)^(o>>>22|o<<10))+a)>>>0;e.h0=e.h0+o|0,e.h1=e.h1+u|0,e.h2=e.h2+c|0,e.h3=e.h3+l|0,e.h4=e.h4+h|0,e.h5=e.h5+p|0,e.h6=e.h6+f|0,e.h7=e.h7+d|0,y-=64}}},826:function(t,e,r){!function(e){var p=r(756);r(757);var a=null;!p.util.isNodejs||p.options.usePureJavaScript||e.versions["node-webkit"]||(a=r(816)),(t.exports=p.prng=p.prng||{}).create=function(e){for(var c={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},t=e.md,r=new Array(32),n=0;n<32;++n)r[n]=t.create();function l(){c.reseeds=4294967295===c.reseeds?0:c.reseeds+1;var e=c.plugin.md.create();e.update(c.keyBytes);for(var t=1,r=0;r<32;++r)c.reseeds%t==0&&(e.update(c.pools[r].digest().getBytes()),c.pools[r].start()),t<<=1;c.keyBytes=e.digest().getBytes(),e.start(),e.update(c.keyBytes);var n=e.digest().getBytes();c.key=c.plugin.formatKey(c.keyBytes),c.seed=c.plugin.formatSeed(n),c.generated=0}function i(e){var t=null,r=p.util.globalScope,n=r.crypto||r.msCrypto;n&&n.getRandomValues&&(t=function(e){return n.getRandomValues(e)});var i=p.util.createBuffer();if(t)for(;i.length()<e;){var a=Math.max(1,Math.min(e-i.length(),65536)/4),s=new Uint32Array(Math.floor(a));try{t(s);for(var o=0;o<s.length;++o)i.putInt32(s[o])}catch(e){if(!("undefined"!=typeof QuotaExceededError&&e instanceof QuotaExceededError))throw e}}if(i.length()<e)for(var u,c,l,h=Math.floor(65536*Math.random());i.length()<e;)for(c=16807*(65535&h),c+=(32767&(u=16807*(h>>16)))<<16,h=4294967295&(2147483647&(c+=u>>15))+(c>>31),o=0;o<3;++o)l=h>>>(o<<3),l^=Math.floor(256*Math.random()),i.putByte(String.fromCharCode(255&l));return i.getBytes(e)}return c.pools=r,c.pool=0,c.generate=function(r,n){if(!n)return c.generateSync(r);var i=c.plugin.cipher,a=c.plugin.increment,s=c.plugin.formatKey,o=c.plugin.formatSeed,u=p.util.createBuffer();c.key=null,function e(t){if(t)return n(t);if(u.length()>=r)return n(null,u.getBytes(r));if(1048575<c.generated&&(c.key=null),null===c.key)return p.util.nextTick(function(){!function(r){if(32<=c.pools[0].messageLength)return l(),r();var e=32-c.pools[0].messageLength<<5;c.seedFile(e,function(e,t){return e?r(e):(c.collect(t),l(),void r())})}(e)});t=i(c.key,c.seed);c.generated+=t.length,u.putBytes(t),c.key=s(i(c.key,a(c.seed))),c.seed=o(i(c.key,c.seed)),p.util.setImmediate(e)}()},c.generateSync=function(e){var t=c.plugin.cipher,r=c.plugin.increment,n=c.plugin.formatKey,i=c.plugin.formatSeed;c.key=null;for(var a=p.util.createBuffer();a.length()<e;){1048575<c.generated&&(c.key=null),null===c.key&&function(){if(32<=c.pools[0].messageLength)return l();var e=32-c.pools[0].messageLength<<5;c.collect(c.seedFileSync(e)),l()}();var s=t(c.key,c.seed);c.generated+=s.length,a.putBytes(s),c.key=n(t(c.key,r(c.seed))),c.seed=i(t(c.key,c.seed))}return a.getBytes(e)},a?(c.seedFile=function(e,r){a.randomBytes(e,function(e,t){return e?r(e):void r(null,t.toString())})},c.seedFileSync=function(e){return a.randomBytes(e).toString()}):(c.seedFile=function(e,t){try{t(null,i(e))}catch(e){t(e)}},c.seedFileSync=i),c.collect=function(e){for(var t=e.length,r=0;r<t;++r)c.pools[c.pool].update(e.substr(r,1)),c.pool=31===c.pool?0:c.pool+1},c.collectInt=function(e,t){for(var r="",n=0;n<t;n+=8)r+=String.fromCharCode(e>>n&255);c.collect(r)},c.registerWorker=function(r){r===self?c.seedFile=function(e,r){self.addEventListener("message",function e(t){t=t.data;t.forge&&t.forge.prng&&(self.removeEventListener("message",e),r(t.forge.prng.err,t.forge.prng.bytes))}),self.postMessage({forge:{prng:{needed:e}}})}:r.addEventListener("message",function(e){e=e.data;e.forge&&e.forge.prng&&c.seedFile(e.forge.prng.needed,function(e,t){r.postMessage({forge:{prng:{err:e,bytes:t}}})})})},c}}.call(this,r(362))},827:function(e,t,r){var n=r(756);r(767),r(757);var i=n.asn1,r=e.exports=n.pkcs7asn1=n.pkcs7asn1||{};n.pkcs7=n.pkcs7||{},n.pkcs7.asn1=r;e={name:"ContentInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};r.contentInfoValidator=e;n={name:"EncryptedContentInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:i.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};r.envelopedDataValidator={name:"EnvelopedData",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(n)},r.encryptedDataValidator={name:"EncryptedData",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"}].concat(n)};n={name:"SignerInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:i.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};r.signedDataValidator={name:"SignedData",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},e,{name:"SignedData.Certificates",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,capture:"signerInfos",optional:!0,value:[n]}]},r.recipientInfoValidator={name:"RecipientInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:i.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter"}]},{name:"RecipientInfo.encryptedKey",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}},828:function(e,t,r){var r=r(756);function v(e,t,r){this.data=[],null!=e&&("number"==typeof e?this.fromNumber(e,t,r):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function m(){return new v(null)}function n(e,t,r,n,i,a){for(var s=16383&t,o=t>>14;0<=--a;){var u=16383&this.data[e],c=this.data[e++]>>14,l=o*u+c*s;i=((u=s*u+((16383&l)<<14)+r.data[n]+i)>>28)+(l>>14)+o*c,r.data[n++]=268435455&u}return i}e.exports=r.jsbn=r.jsbn||{},r.jsbn.BigInteger=v,r="undefined"==typeof navigator?(v.prototype.am=n,28):"Microsoft Internet Explorer"==navigator.appName?(v.prototype.am=function(e,t,r,n,i,a){for(var s=32767&t,o=t>>15;0<=--a;){var u=32767&this.data[e],c=this.data[e++]>>15,l=o*u+c*s;i=((u=s*u+((32767&l)<<15)+r.data[n]+(1073741823&i))>>>30)+(l>>>15)+o*c+(i>>>30),r.data[n++]=1073741823&u}return i},30):"Netscape"!=navigator.appName?(v.prototype.am=function(e,t,r,n,i,a){for(;0<=--a;){var s=t*this.data[e++]+r.data[n]+i;i=Math.floor(s/67108864),r.data[n++]=67108863&s}return i},26):(v.prototype.am=n,28),v.prototype.DB=r,v.prototype.DM=(1<<r)-1,v.prototype.DV=1<<r,v.prototype.FV=Math.pow(2,52),v.prototype.F1=52-r,v.prototype.F2=2*r-52;for(var i=new Array,a="0".charCodeAt(0),s=0;s<=9;++s)i[a++]=s;for(a="a".charCodeAt(0),s=10;s<36;++s)i[a++]=s;for(a="A".charCodeAt(0),s=10;s<36;++s)i[a++]=s;function u(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function c(e,t){t=i[e.charCodeAt(t)];return null==t?-1:t}function g(e){var t=m();return t.fromInt(e),t}function C(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}function E(e){this.m=e}function b(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function o(e,t){return e&t}function l(e,t){return e|t}function h(e,t){return e^t}function p(e,t){return e&~t}function f(){}function d(e){return e}function S(e){this.r2=m(),this.q3=m(),v.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}E.prototype.convert=function(e){return e.s<0||0<=e.compareTo(this.m)?e.mod(this.m):e},E.prototype.revert=function(e){return e},E.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},E.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},E.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},b.prototype.convert=function(e){var t=m();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&0<t.compareTo(v.ZERO)&&this.m.subTo(t,t),t},b.prototype.revert=function(e){var t=m();return e.copyTo(t),this.reduce(t),t},b.prototype.reduce=function(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=(n=32767&e.data[t])*this.mpl+((n*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM,n=t+this.m.t;for(e.data[n]+=this.m.am(0,r,e,t,0,this.m.t);e.data[n]>=e.DV;)e.data[n]-=e.DV,e.data[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),0<=e.compareTo(this.m)&&e.subTo(this.m,e)},b.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},b.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},v.prototype.copyTo=function(e){for(var t=this.t-1;0<=t;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s},v.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,0<e?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0},v.prototype.fromString=function(e,t){var r;if(16==t)r=4;else if(8==t)r=3;else if(256==t)r=8;else if(2==t)r=1;else if(32==t)r=5;else{if(4!=t)return void this.fromRadix(e,t);r=2}this.t=0,this.s=0;for(var n=e.length,i=!1,a=0;0<=--n;){var s=8==r?255&e[n]:c(e,n);s<0?"-"==e.charAt(n)&&(i=!0):(i=!1,0==a?this.data[this.t++]=s:a+r>this.DB?(this.data[this.t-1]|=(s&(1<<this.DB-a)-1)<<a,this.data[this.t++]=s>>this.DB-a):this.data[this.t-1]|=s<<a,(a+=r)>=this.DB&&(a-=this.DB))}8==r&&0!=(128&e[0])&&(this.s=-1,0<a&&(this.data[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),i&&v.ZERO.subTo(this,this)},v.prototype.clamp=function(){for(var e=this.s&this.DM;0<this.t&&this.data[this.t-1]==e;)--this.t},v.prototype.dlShiftTo=function(e,t){for(var r=this.t-1;0<=r;--r)t.data[r+e]=this.data[r];for(r=e-1;0<=r;--r)t.data[r]=0;t.t=this.t+e,t.s=this.s},v.prototype.drShiftTo=function(e,t){for(var r=e;r<this.t;++r)t.data[r-e]=this.data[r];t.t=Math.max(this.t-e,0),t.s=this.s},v.prototype.lShiftTo=function(e,t){for(var r=e%this.DB,n=this.DB-r,i=(1<<n)-1,a=Math.floor(e/this.DB),s=this.s<<r&this.DM,o=this.t-1;0<=o;--o)t.data[o+a+1]=this.data[o]>>n|s,s=(this.data[o]&i)<<r;for(o=a-1;0<=o;--o)t.data[o]=0;t.data[a]=s,t.t=this.t+a+1,t.s=this.s,t.clamp()},v.prototype.rShiftTo=function(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var n=e%this.DB,i=this.DB-n,a=(1<<n)-1;t.data[0]=this.data[r]>>n;for(var s=r+1;s<this.t;++s)t.data[s-r-1]|=(this.data[s]&a)<<i,t.data[s-r]=this.data[s]>>n;0<n&&(t.data[this.t-r-1]|=(this.s&a)<<i),t.t=this.t-r,t.clamp()}},v.prototype.subTo=function(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]-e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t.data[r++]=this.DV+n:0<n&&(t.data[r++]=n),t.t=r,t.clamp()},v.prototype.multiplyTo=function(e,t){var r=this.abs(),n=e.abs(),i=r.t;for(t.t=i+n.t;0<=--i;)t.data[i]=0;for(i=0;i<n.t;++i)t.data[i+r.t]=r.am(0,n.data[i],t,i,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&v.ZERO.subTo(t,t)},v.prototype.squareTo=function(e){for(var t=this.abs(),r=e.t=2*t.t;0<=--r;)e.data[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t.data[r],e,2*r,0,1);(e.data[r+t.t]+=t.am(r+1,2*t.data[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e.data[r+t.t]-=t.DV,e.data[r+t.t+1]=1)}0<e.t&&(e.data[e.t-1]+=t.am(r,t.data[r],e,2*r,0,1)),e.s=0,e.clamp()},v.prototype.divRemTo=function(e,t,r){var n=e.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t)return null!=t&&t.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=m());var a=m(),s=this.s,o=e.s,e=this.DB-C(n.data[n.t-1]);0<e?(n.lShiftTo(e,a),i.lShiftTo(e,r)):(n.copyTo(a),i.copyTo(r));var u=a.t,c=a.data[u-1];if(0!=c){var i=c*(1<<this.F1)+(1<u?a.data[u-2]>>this.F2:0),l=this.FV/i,h=(1<<this.F1)/i,p=1<<this.F2,f=r.t,d=f-u,y=null==t?m():t;for(a.dlShiftTo(d,y),0<=r.compareTo(y)&&(r.data[r.t++]=1,r.subTo(y,r)),v.ONE.dlShiftTo(u,y),y.subTo(a,a);a.t<u;)a.data[a.t++]=0;for(;0<=--d;){var g=r.data[--f]==c?this.DM:Math.floor(r.data[f]*l+(r.data[f-1]+p)*h);if((r.data[f]+=a.am(0,g,r,d,0,u))<g)for(a.dlShiftTo(d,y),r.subTo(y,r);r.data[f]<--g;)r.subTo(y,r)}null!=t&&(r.drShiftTo(u,t),s!=o&&v.ZERO.subTo(t,t)),r.t=u,r.clamp(),0<e&&r.rShiftTo(e,r),s<0&&v.ZERO.subTo(r,r)}}},v.prototype.invDigit=function(){if(this.t<1)return 0;var e=this.data[0];if(0==(1&e))return 0;var t=3&e;return 0<(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)?this.DV-t:-t},v.prototype.isEven=function(){return 0==(0<this.t?1&this.data[0]:this.s)},v.prototype.exp=function(e,t){if(4294967295<e||e<1)return v.ONE;var r,n=m(),i=m(),a=t.convert(this),s=C(e)-1;for(a.copyTo(n);0<=--s;)t.sqrTo(n,i),0<(e&1<<s)?t.mulTo(i,a,n):(r=n,n=i,i=r);return t.revert(n)},v.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var r,n=(1<<t)-1,i=!1,a="",s=this.t,o=this.DB-s*this.DB%t;if(0<s--)for(o<this.DB&&0<(r=this.data[s]>>o)&&(i=!0,a=u(r));0<=s;)o<t?(r=(this.data[s]&(1<<o)-1)<<t-o,r|=this.data[--s]>>(o+=this.DB-t)):(r=this.data[s]>>(o-=t)&n,o<=0&&(o+=this.DB,--s)),(i=0<r?!0:i)&&(a+=u(r));return i?a:"0"},v.prototype.negate=function(){var e=m();return v.ZERO.subTo(this,e),e},v.prototype.abs=function(){return this.s<0?this.negate():this},v.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(0!=(t=r-e.t))return this.s<0?-t:t;for(;0<=--r;)if(0!=(t=this.data[r]-e.data[r]))return t;return 0},v.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+C(this.data[this.t-1]^this.s&this.DM)},v.prototype.mod=function(e){var t=m();return this.abs().divRemTo(e,null,t),this.s<0&&0<t.compareTo(v.ZERO)&&e.subTo(t,t),t},v.prototype.modPowInt=function(e,t){t=new(e<256||t.isEven()?E:b)(t);return this.exp(e,t)},v.ZERO=g(0),v.ONE=g(1),f.prototype.convert=d,f.prototype.revert=d,f.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r)},f.prototype.sqrTo=function(e,t){e.squareTo(t)},S.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=m();return e.copyTo(t),this.reduce(t),t},S.prototype.revert=function(e){return e},S.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);0<=e.compareTo(this.m);)e.subTo(this.m,e)},S.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},S.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var y=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],T=(1<<26)/y[y.length-1];v.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},v.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||36<e)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=g(r),i=m(),a=m(),s="";for(this.divRemTo(n,i,a);0<i.signum();)s=(r+a.intValue()).toString(e).substr(1)+s,i.divRemTo(n,i,a);return a.intValue().toString(e)+s},v.prototype.fromRadix=function(e,t){this.fromInt(0);for(var r=this.chunkSize(t=null==t?10:t),n=Math.pow(t,r),i=!1,a=0,s=0,o=0;o<e.length;++o){var u=c(e,o);u<0?"-"==e.charAt(o)&&0==this.signum()&&(i=!0):(s=t*s+u,++a>=r&&(this.dMultiply(n),this.dAddOffset(s,0),s=a=0))}0<a&&(this.dMultiply(Math.pow(t,a)),this.dAddOffset(s,0)),i&&v.ZERO.subTo(this,this)},v.prototype.fromNumber=function(e,t,r){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(v.ONE.shiftLeft(e-1),l,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(v.ONE.shiftLeft(e-1),this);else{var n=new Array,r=7&e;n.length=1+(e>>3),t.nextBytes(n),0<r?n[0]&=(1<<r)-1:n[0]=0,this.fromString(n,256)}},v.prototype.bitwiseTo=function(e,t,r){for(var n,i=Math.min(e.t,this.t),a=0;a<i;++a)r.data[a]=t(this.data[a],e.data[a]);if(e.t<this.t){for(n=e.s&this.DM,a=i;a<this.t;++a)r.data[a]=t(this.data[a],n);r.t=this.t}else{for(n=this.s&this.DM,a=i;a<e.t;++a)r.data[a]=t(n,e.data[a]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()},v.prototype.changeBit=function(e,t){e=v.ONE.shiftLeft(e);return this.bitwiseTo(e,t,e),e},v.prototype.addTo=function(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]+e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,0<n?t.data[r++]=n:n<-1&&(t.data[r++]=this.DV+n),t.t=r,t.clamp()},v.prototype.dMultiply=function(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},v.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}},v.prototype.multiplyLowerTo=function(e,t,r){var n,i=Math.min(this.t+e.t,t);for(r.s=0,r.t=i;0<i;)r.data[--i]=0;for(n=r.t-this.t;i<n;++i)r.data[i+this.t]=this.am(0,e.data[i],r,i,0,this.t);for(n=Math.min(e.t,t);i<n;++i)this.am(0,e.data[i],r,i,0,t-i);r.clamp()},v.prototype.multiplyUpperTo=function(e,t,r){var n=r.t=this.t+e.t- --t;for(r.s=0;0<=--n;)r.data[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r.data[this.t+n-t]=this.am(t-n,e.data[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)},v.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(0<this.t)if(0==t)r=this.data[0]%e;else for(var n=this.t-1;0<=n;--n)r=(t*r+this.data[n])%e;return r},v.prototype.millerRabin=function(e){var t=this.subtract(v.ONE),r=t.getLowestSetBit();if(r<=0)return!1;for(var n,i=t.shiftRight(r),a={nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(256*Math.random())}},s=0;s<e;++s){for(;(n=new v(this.bitLength(),a)).compareTo(v.ONE)<=0||0<=n.compareTo(t););var o=n.modPow(i,this);if(0!=o.compareTo(v.ONE)&&0!=o.compareTo(t)){for(var u=1;u++<r&&0!=o.compareTo(t);)if(0==(o=o.modPowInt(2,this)).compareTo(v.ONE))return!1;if(0!=o.compareTo(t))return!1}}return!0},v.prototype.clone=function(){var e=m();return this.copyTo(e),e},v.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]},v.prototype.byteValue=function(){return 0==this.t?this.s:this.data[0]<<24>>24},v.prototype.shortValue=function(){return 0==this.t?this.s:this.data[0]<<16>>16},v.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1},v.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var r,n=this.DB-e*this.DB%8,i=0;if(0<e--)for(n<this.DB&&(r=this.data[e]>>n)!=(this.s&this.DM)>>n&&(t[i++]=r|this.s<<this.DB-n);0<=e;)n<8?(r=(this.data[e]&(1<<n)-1)<<8-n,r|=this.data[--e]>>(n+=this.DB-8)):(r=this.data[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),0!=(128&r)&&(r|=-256),0==i&&(128&this.s)!=(128&r)&&++i,(0<i||r!=this.s)&&(t[i++]=r);return t},v.prototype.equals=function(e){return 0==this.compareTo(e)},v.prototype.min=function(e){return this.compareTo(e)<0?this:e},v.prototype.max=function(e){return 0<this.compareTo(e)?this:e},v.prototype.and=function(e){var t=m();return this.bitwiseTo(e,o,t),t},v.prototype.or=function(e){var t=m();return this.bitwiseTo(e,l,t),t},v.prototype.xor=function(e){var t=m();return this.bitwiseTo(e,h,t),t},v.prototype.andNot=function(e){var t=m();return this.bitwiseTo(e,p,t),t},v.prototype.not=function(){for(var e=m(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e},v.prototype.shiftLeft=function(e){var t=m();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},v.prototype.shiftRight=function(e){var t=m();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},v.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this.data[e])return e*this.DB+function(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}(this.data[e]);return this.s<0?this.t*this.DB:-1},v.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=function(e){for(var t=0;0!=e;)e&=e-1,++t;return t}(this.data[r]^t);return e},v.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this.data[t]&1<<e%this.DB)},v.prototype.setBit=function(e){return this.changeBit(e,l)},v.prototype.clearBit=function(e){return this.changeBit(e,p)},v.prototype.flipBit=function(e){return this.changeBit(e,h)},v.prototype.add=function(e){var t=m();return this.addTo(e,t),t},v.prototype.subtract=function(e){var t=m();return this.subTo(e,t),t},v.prototype.multiply=function(e){var t=m();return this.multiplyTo(e,t),t},v.prototype.divide=function(e){var t=m();return this.divRemTo(e,t,null),t},v.prototype.remainder=function(e){var t=m();return this.divRemTo(e,null,t),t},v.prototype.divideAndRemainder=function(e){var t=m(),r=m();return this.divRemTo(e,t,r),new Array(t,r)},v.prototype.modPow=function(e,t){var r=e.bitLength(),n=g(1);if(r<=0)return n;var i=r<18?1:r<48?3:r<144?4:r<768?5:6,a=new(r<8?E:t.isEven()?S:b)(t),s=new Array,o=3,u=i-1,c=(1<<i)-1;if(s[1]=a.convert(this),1<i){var l=m();for(a.sqrTo(s[1],l);o<=c;)s[o]=m(),a.mulTo(l,s[o-2],s[o]),o+=2}for(var h,p,f=e.t-1,d=!0,y=m(),r=C(e.data[f])-1;0<=f;){for(u<=r?h=e.data[f]>>r-u&c:(h=(e.data[f]&(1<<r+1)-1)<<u-r,0<f&&(h|=e.data[f-1]>>this.DB+r-u)),o=i;0==(1&h);)h>>=1,--o;if((r-=o)<0&&(r+=this.DB,--f),d)s[h].copyTo(n),d=!1;else{for(;1<o;)a.sqrTo(n,y),a.sqrTo(y,n),o-=2;0<o?a.sqrTo(n,y):(p=n,n=y,y=p),a.mulTo(y,s[h],n)}for(;0<=f&&0==(e.data[f]&1<<r);)a.sqrTo(n,y),p=n,n=y,y=p,--r<0&&(r=this.DB-1,--f)}return a.revert(n)},v.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return v.ZERO;for(var r=e.clone(),n=this.clone(),i=g(1),a=g(0),s=g(0),o=g(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),t?(i.isEven()&&a.isEven()||(i.addTo(this,i),a.subTo(e,a)),i.rShiftTo(1,i)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);for(;n.isEven();)n.rShiftTo(1,n),t?(s.isEven()&&o.isEven()||(s.addTo(this,s),o.subTo(e,o)),s.rShiftTo(1,s)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);0<=r.compareTo(n)?(r.subTo(n,r),t&&i.subTo(s,i),a.subTo(o,a)):(n.subTo(r,n),t&&s.subTo(i,s),o.subTo(a,o))}return 0!=n.compareTo(v.ONE)?v.ZERO:0<=o.compareTo(e)?o.subtract(e):o.signum()<0?(o.addTo(e,o),o.signum()<0?o.add(e):o):o},v.prototype.pow=function(e){return this.exp(e,new f)},v.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();t.compareTo(r)<0&&(i=t,t=r,r=i);var n=t.getLowestSetBit(),i=r.getLowestSetBit();if(i<0)return t;for(0<(i=n<i?n:i)&&(t.rShiftTo(i,t),r.rShiftTo(i,r));0<t.signum();)0<(n=t.getLowestSetBit())&&t.rShiftTo(n,t),0<(n=r.getLowestSetBit())&&r.rShiftTo(n,r),0<=t.compareTo(r)?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return 0<i&&r.lShiftTo(i,r),r},v.prototype.isProbablePrime=function(e){var t,r=this.abs();if(1==r.t&&r.data[0]<=y[y.length-1]){for(t=0;t<y.length;++t)if(r.data[0]==y[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<y.length;){for(var n=y[t],i=t+1;i<y.length&&n<T;)n*=y[i++];for(n=r.modInt(n);t<i;)if(n%y[t++]==0)return!1}return r.millerRabin(e)}},829:function(e,t,r){var p,c,n,i,f=r(756);function d(e,t,r,n){var i=y(e,t),a=(s=i.bitLength())<=100?27:s<=150?18:s<=200?15:s<=250?12:s<=300?9:s<=350?8:s<=400?7:s<=500?6:s<=600?5:s<=800?4:s<=1250?3:2,s=10;(function e(t,r,n,i,a,s,o){var u=+new Date;do{if((t=t.bitLength()>r?y(r,n):t).isProbablePrime(a))return o(null,t)}while(t.dAddOffset(c[i++%8],0),s<0||+new Date-u<s);f.util.setImmediate(function(){e(t,r,n,i,a,s,o)})})(i,e,t,0,a="millerRabinTests"in r?r.millerRabinTests:a,s="maxBlockTime"in r?r.maxBlockTime:s,n)}function y(e,t){t=new p(e,t),e-=1;return t.testBit(e)||t.bitwiseTo(p.ONE.shiftLeft(e),i,t),t.dAddOffset(31-t.mod(n).byteValue(),0),t}r(757),r(828),r(768),f.prime?e.exports=f.prime:(e=e.exports=f.prime=f.prime||{},p=f.jsbn.BigInteger,c=[6,4,2,4,2,4,6,2],(n=new p(null)).fromInt(30),i=function(e,t){return e|t},e.generateProbablePrime=function(e,t,r){"function"==typeof t&&(r=t,t={});var n=(t=t||{}).algorithm||"PRIMEINC";(n="string"==typeof n?{name:n}:n).options=n.options||{};var i=t.prng||f.random,a={nextBytes:function(e){for(var t=i.getBytesSync(e.length),r=0;r<e.length;++r)e[r]=t.charCodeAt(r)}};if("PRIMEINC"===n.name)return t=e,e=a,a=n.options,r=r,("workers"in a?function(a,s,e,o){if("undefined"==typeof Worker)return d(a,s,e,o);var u=y(a,s),r=e.workers,c=e.workLoad||100,l=30*c/8,h=e.workerScript||"forge/prime.worker.js";if(-1===r)return f.util.estimateCores(function(e,t){r=(t=e?2:t)-1,n()});function n(){r=Math.max(1,r);for(var n=[],e=0;e<r;++e)n[e]=new Worker(h);for(e=0;e<r;++e)n[e].addEventListener("message",t);var i=!1;function t(e){if(!i){var t=e.data;if(t.found){for(var r=0;r<n.length;++r)n[r].terminate();return i=!0,o(null,new p(t.prime,16))}t=(u=u.bitLength()>a?y(a,s):u).toString(16);e.target.postMessage({hex:t,workLoad:c}),u.dAddOffset(l,0)}}}n()}:d)(t,e,a,r);throw new Error("Invalid prime generation algorithm: "+n.name)})},830:function(e,t,r){var n,_=r(756);r(774),r(767),r(800),r(771),r(770),r(798),r(775),r(768),r(892),r(781),r(757),void 0===n&&(n=_.jsbn.BigInteger);var v=_.asn1,m=_.pki=_.pki||{};e.exports=m.pbe=_.pbe=_.pbe||{};var C=m.oids,s={name:"EncryptedPrivateKeyInfo",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:v.Class.UNIVERSAL,type:v.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},u={name:"PBES2Algorithms",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:v.Class.UNIVERSAL,type:v.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:v.Class.UNIVERSAL,type:v.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},l={name:"pkcs-12PbeParams",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:v.Class.UNIVERSAL,type:v.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"iterations"}]};function o(e,t){return e.start().update(t).digest().getBytes()}function h(e){var t;if(e){if(!(t=m.oids[v.derToOid(e)])){var r=new Error("Unsupported PRF OID.");throw r.oid=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}}else t="hmacWithSHA1";return E(t)}function E(e){var t=_.md;switch(e){case"hmacWithSHA224":t=_.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!(t&&e in t))throw new Error("Unknown hash algorithm: "+e);return t[e].create()}m.encryptPrivateKeyInfo=function(e,t,r){(r=r||{}).saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n,i,a,s,o=_.random.getBytesSync(r.saltSize),u=r.count,c=v.integerToDer(u);if(0===r.algorithm.indexOf("aes")||"des"===r.algorithm){switch(r.algorithm){case"aes128":n=g=16,i=C["aes128-CBC"],a=_.aes.createEncryptionCipher;break;case"aes192":g=24,n=16,i=C["aes192-CBC"],a=_.aes.createEncryptionCipher;break;case"aes256":g=32,n=16,i=C["aes256-CBC"],a=_.aes.createEncryptionCipher;break;case"des":n=g=8,i=C.desCBC,a=_.des.createEncryptionCipher;break;default:throw(s=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,s}var l="hmacWith"+r.prfAlgorithm.toUpperCase(),h=E(l),p=_.pkcs5.pbkdf2(t,o,u,g,h),f=_.random.getBytesSync(n);(y=a(p)).start(f),y.update(v.toDer(e)),y.finish();var d=y.output.getBytes(),h=function(e,t,r){e=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OCTETSTRING,!1,o),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,e.getBytes())]);return"hmacWithSHA1"!=r&&e.value.push(v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,_.util.hexToBytes(t.toString(16))),v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(m.oids[r]).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.NULL,!1,"")])),e}(c,g,l),l=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(C.pkcs5PBES2).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(C.pkcs5PBKDF2).getBytes()),h]),v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(i).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.OCTETSTRING,!1,f)])])])}else{if("3des"!==r.algorithm)throw(s=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,s;var y,g=24,h=new _.util.ByteBuffer(o),p=m.pbe.generatePkcs12Key(t,h,1,u,g),f=m.pbe.generatePkcs12Key(t,h,2,u,g);(y=_.des.createEncryptionCipher(p)).start(f),y.update(v.toDer(e)),y.finish(),d=y.output.getBytes(),l=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(C["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OCTETSTRING,!1,o),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,c.getBytes())])])}return v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[l,v.create(v.Class.UNIVERSAL,v.Type.OCTETSTRING,!1,d)])},m.decryptPrivateKeyInfo=function(e,t){var r=null,n={},i=[];if(!v.validate(e,s,n,i)){var a=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}a=v.derToOid(n.encryptionOid),t=m.pbe.getCipher(a,n.encryptionParams,t),n=_.util.createBuffer(n.encryptedData);return t.update(n),r=t.finish()?v.fromDer(t.output):r},m.encryptedPrivateKeyToPem=function(e,t){e={type:"ENCRYPTED PRIVATE KEY",body:v.toDer(e).getBytes()};return _.pem.encode(e,{maxline:t})},m.encryptedPrivateKeyFromPem=function(e){var t=_.pem.decode(e)[0];if("ENCRYPTED PRIVATE KEY"!==t.type){e=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw e.headerType=t.type,e}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return v.fromDer(t.body)},m.encryptRsaPrivateKey=function(e,t,r){if(!(r=r||{}).legacy){var n=m.wrapRsaPrivateKey(m.privateKeyToAsn1(e)),n=m.encryptPrivateKeyInfo(n,t,r);return m.encryptedPrivateKeyToPem(n)}var i,a,s,o;switch(r.algorithm){case"aes128":i="AES-128-CBC",a=_.random.getBytesSync(s=16),o=_.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",s=24,a=_.random.getBytesSync(16),o=_.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",s=32,a=_.random.getBytesSync(16),o=_.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",s=24,a=_.random.getBytesSync(8),o=_.des.createEncryptionCipher;break;case"des":i="DES-CBC",a=_.random.getBytesSync(s=8),o=_.des.createEncryptionCipher;break;default:var u=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw u.algorithm=r.algorithm,u}t=o(_.pbe.opensslDeriveBytes(t,a.substr(0,8),s));t.start(a),t.update(v.toDer(m.privateKeyToAsn1(e))),t.finish();t={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:_.util.bytesToHex(a).toUpperCase()},body:t.output.getBytes()};return _.pem.encode(t)},m.decryptRsaPrivateKey=function(e,t){var r,n,i,a=null,s=_.pem.decode(e)[0];if("ENCRYPTED PRIVATE KEY"!==s.type&&"PRIVATE KEY"!==s.type&&"RSA PRIVATE KEY"!==s.type)throw(i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".')).headerType=i;if(s.procType&&"ENCRYPTED"===s.procType.type){switch(s.dekInfo.algorithm){case"DES-CBC":r=8,n=_.des.createDecryptionCipher;break;case"DES-EDE3-CBC":r=24,n=_.des.createDecryptionCipher;break;case"AES-128-CBC":r=16,n=_.aes.createDecryptionCipher;break;case"AES-192-CBC":r=24,n=_.aes.createDecryptionCipher;break;case"AES-256-CBC":r=32,n=_.aes.createDecryptionCipher;break;case"RC2-40-CBC":r=5,n=function(e){return _.rc2.createDecryptionCipher(e,40)};break;case"RC2-64-CBC":r=8,n=function(e){return _.rc2.createDecryptionCipher(e,64)};break;case"RC2-128-CBC":r=16,n=function(e){return _.rc2.createDecryptionCipher(e,128)};break;default:throw(i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+s.dekInfo.algorithm+'".')).algorithm=s.dekInfo.algorithm,i}var o=_.util.hexToBytes(s.dekInfo.parameters),e=n(_.pbe.opensslDeriveBytes(t,o.substr(0,8),r));if(e.start(o),e.update(_.util.createBuffer(s.body)),!e.finish())return a;a=e.output.getBytes()}else a=s.body;return a=null!==(a="ENCRYPTED PRIVATE KEY"===s.type?m.decryptPrivateKeyInfo(v.fromDer(a),t):v.fromDer(a))?m.privateKeyFromAsn1(a):a},m.pbe.generatePkcs12Key=function(e,t,r,n,i,a){if(null==a){if(!("sha1"in _.md))throw new Error('"sha1" hash algorithm unavailable.');a=_.md.sha1.create()}var s=a.digestLength,o=a.blockLength,u=new _.util.ByteBuffer,c=new _.util.ByteBuffer;if(null!=e){for(B=0;B<e.length;B++)c.putInt16(e.charCodeAt(B));c.putInt16(0)}var l=c.length(),h=t.length(),p=new _.util.ByteBuffer;p.fillWithByte(r,o);var f=o*Math.ceil(h/o),d=new _.util.ByteBuffer;for(B=0;B<f;B++)d.putByte(t.at(B%h));var y=o*Math.ceil(l/o),g=new _.util.ByteBuffer;for(B=0;B<y;B++)g.putByte(c.at(B%l));var v=d;v.putBuffer(g);for(var m=Math.ceil(i/s),C=1;C<=m;C++){var E=new _.util.ByteBuffer;E.putBytes(p.bytes()),E.putBytes(v.bytes());for(var b=0;b<n;b++)a.start(),a.update(E.getBytes()),E=a.digest();var S=new _.util.ByteBuffer;for(B=0;B<o;B++)S.putByte(E.at(B%s));for(var T=Math.ceil(h/o)+Math.ceil(l/o),I=new _.util.ByteBuffer,A=0;A<T;A++){for(var w=new _.util.ByteBuffer(v.getBytes(o)),k=511,B=S.length()-1;0<=B;B--)k>>=8,k+=S.at(B)+w.at(B),w.setAt(B,255&k);I.putBuffer(w)}v=I,u.putBuffer(E)}return u.truncate(u.length()-i),u},m.pbe.getCipher=function(e,t,r){switch(e){case m.oids.pkcs5PBES2:return m.pbe.getCipherForPBES2(e,t,r);case m.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case m.oids["pbewithSHAAnd40BitRC2-CBC"]:return m.pbe.getCipherForPKCS12PBE(e,t,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=e,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}},m.pbe.getCipherForPBES2=function(e,t,r){var n={},i=[];if(!v.validate(t,u,n,i))throw(o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=i,o;if((e=v.derToOid(n.kdfOid))!==m.oids.pkcs5PBKDF2)throw(o=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.")).oid=e,o.supportedOids=["pkcs5PBKDF2"],o;if((e=v.derToOid(n.encOid))!==m.oids["aes128-CBC"]&&e!==m.oids["aes192-CBC"]&&e!==m.oids["aes256-CBC"]&&e!==m.oids["des-EDE3-CBC"]&&e!==m.oids.desCBC)throw(o=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.")).oid=e,o.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],o;var a,s,i=n.kdfSalt,o=(o=_.util.createBuffer(n.kdfIterationCount)).getInt(o.length()<<3);switch(m.oids[e]){case"aes128-CBC":a=16,s=_.aes.createDecryptionCipher;break;case"aes192-CBC":a=24,s=_.aes.createDecryptionCipher;break;case"aes256-CBC":a=32,s=_.aes.createDecryptionCipher;break;case"des-EDE3-CBC":a=24,s=_.des.createDecryptionCipher;break;case"desCBC":a=8,s=_.des.createDecryptionCipher}e=h(n.prfOid),e=_.pkcs5.pbkdf2(r,i,o,a,e),n=n.encIv,e=s(e);return e.start(n),e},m.pbe.getCipherForPKCS12PBE=function(e,t,r){var n={},i=[];if(!v.validate(t,l,n,i))throw(u=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=i,u;var a,s,o,u,c=_.util.createBuffer(n.salt),t=(t=_.util.createBuffer(n.iterations)).getInt(t.length()<<3);switch(e){case m.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:a=24,s=8,o=_.des.startDecrypting;break;case m.oids["pbewithSHAAnd40BitRC2-CBC"]:a=5,s=8,o=function(e,t){e=_.rc2.createDecryptionCipher(e,40);return e.start(t,null),e};break;default:throw(u=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.")).oid=e,u}i=h(n.prfOid),n=m.pbe.generatePkcs12Key(r,c,1,t,a,i);return i.start(),o(n,m.pbe.generatePkcs12Key(r,c,2,t,s,i))},m.pbe.opensslDeriveBytes=function(e,t,r,n){if(null==n){if(!("md5"in _.md))throw new Error('"md5" hash algorithm unavailable.');n=_.md.md5.create()}for(var i=[o(n,e+(t=null===t?"":t))],a=16,s=1;a<r;++s,a+=16)i.push(o(n,i[s-1]+e+t));return i.join("").substr(0,r)}},831:function(e,t){var r,n,i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);i?(r=new Uint8Array(16),e.exports=function(){return i(r),r}):(n=new Array(16),e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n})},832:function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,t=n;return[t[e[r++]],t[e[r++]],t[e[r++]],t[e[r++]],"-",t[e[r++]],t[e[r++]],"-",t[e[r++]],t[e[r++]],"-",t[e[r++]],t[e[r++]],"-",t[e[r++]],t[e[r++]],t[e[r++]],t[e[r++]],t[e[r++]],t[e[+r]]].join("")}},833:function(e,t,r){var n=r(1020),i=r(857),a=r(1083),s=r(369),o=r(371),u=r(972),c=Object.prototype.hasOwnProperty,a=a(function(e,t){if(o(t)||s(t))i(t,u(t),e);else for(var r in t)c.call(t,r)&&n(e,r,t[r])});e.exports=a},834:function(e,t,r){var a=r(790),s=r(853),o=r(911),u=r(363),c=r(857),l=r(914),n=r(854),h=r(1084),n=n(function(t,e){var r={};if(null==t)return r;var n=!1;e=a(e,function(e){return e=u(e,t),n=n||1<e.length,e}),c(t,h(t),r),n&&(r=s(r,7,l));for(var i=e.length;i--;)o(r,e[i]);return r});e.exports=n},835:function(e,t,r){var n=r(915),r=r(854)(function(e,t){return null==e?{}:n(e,t)});e.exports=r},836:function(t,e,s){"use strict";!function(r){var e=s(805),n=s(924),i=s(786),a=3774873600,e=new e(a>>8),o=t.exports={E1:a,E1B:225,E1L:e,LOOKUP:function(){for(var e=[],t=0;t<256;++t){for(var r=0,n=7;0<=n;--n)0!=(t&1<<n)&&(r^=a>>>7-n);e.push(r)}return e}(),arrayCopy:function(e,t,r,n,i){if(t<0||n<0||i<0)throw new TypeError("Invalid input.");if(r instanceof Uint8Array){if(n>=r.length||n+i>r.length)throw new TypeError("Invalid input.");(0!==t||i<e.length)&&(e=e instanceof Uint8Array?e.subarray(t,t+i):e.slice(t,t+i)),r.set(e,n)}else for(var a=0;a<i;++a)r[n+a]=e[t+a]},arrayEqual:function(e,t){e=e||[],t=t||[];for(var r=Math.min(e.length,t.length),n=e.length===t.length,i=0;i<r;i++)n=n&&void 0!==e[i]&&void 0!==t[i]&&e[i]===t[i];return n},asBytes:function(e,t){switch(arguments.length){case 1:return t=r.alloc(16),i.intToBigEndian(e,t,0),t;case 2:i.intToBigEndian(e,t,0);break;default:throw new TypeError("Expected 1 or 2 arguments.")}},asInts:function(e,t){switch(arguments.length){case 1:return n(t=[],0,0,4),i.bigEndianToInt(e,0,t),t;case 2:i.bigEndianToInt(e,0,t);break;default:throw new TypeError("Expected 1 or 2 arguments.")}},oneAsInts:function(){for(var e=[],t=0;t<4;++t)e.push(1<<31);return e},shiftRight:function(e,t){var r,n;switch(arguments.length){case 1:return r=e[0],e[0]=r>>>1,n=r<<31,r=e[1],e[1]=r>>>1|n,n=r<<31,r=e[2],e[2]=r>>>1|n,n=r<<31,r=e[3],e[3]=r>>>1|n,r<<31&4294967295;case 2:return r=e[0],t[0]=r>>>1,n=r<<31,r=e[1],t[1]=r>>>1|n,n=r<<31,r=e[2],t[2]=r>>>1|n,n=r<<31,r=e[3],t[3]=r>>>1|n,r<<31&4294967295;default:throw new TypeError("Expected 1 or 2 arguments.")}},shiftRightN:function(e,t,r){var n,i,a;switch(arguments.length){case 2:return i=e[0],n=32-t,e[0]=i>>>t,a=i<<n,i=e[1],e[1]=i>>>t|a,a=i<<n,i=e[2],e[2]=i>>>t|a,a=i<<n,i=e[3],e[3]=i>>>t|a,i<<n;case 3:return i=e[0],n=32-t,r[0]=i>>>t,a=i<<n,i=e[1],r[1]=i>>>t|a,a=i<<n,i=e[2],r[2]=i>>>t|a,a=i<<n,i=e[3],r[3]=i>>>t|a,i<<n;default:throw new TypeError("Expected 2 or 3 arguments.")}},xor:function(e,t,r){switch(arguments.length){case 2:e[0]^=t[0],e[1]^=t[1],e[2]^=t[2],e[3]^=t[3];break;case 3:r[0]=e[0]^t[0],r[1]=e[1]^t[1],r[2]=e[2]^t[2],r[3]=e[3]^t[3];break;default:throw new TypeError("Expected 2 or 3 arguments.")}},multiply:function(e,t){for(var r=e.slice(),n=[],i=0;i<4;++i)for(var a=t[i],s=31;0<=s;--s)0!=(a&1<<s)&&o.xor(n,r),0!==o.shiftRight(r)&&(r[0]^=o.E1);o.arrayCopy(n,0,e,0,4)},multiplyP:function(e,t){switch(arguments.length){case 1:0!==o.shiftRight(e)&&(e[0]^=o.E1);break;case 2:0!==o.shiftRight(e,t)&&(t[0]^=o.E1);break;default:throw new TypeError("Expected 1 or 2 arguments.")}},multiplyP8:function(e,t){var r;switch(arguments.length){case 1:r=o.shiftRightN(e,8),e[0]^=o.LOOKUP[r>>>24];break;case 2:r=o.shiftRightN(e,8,t),t[0]^=o.LOOKUP[r>>>24];break;default:throw new TypeError("Expected 1 or 2 arguments.")}}}}.call(this,s(360).Buffer)},837:function(e,t,r){"use strict";!function(l){var h=r(765),p=r(785);var t={};["CONCAT-SHA-1","CONCAT-SHA-256","CONCAT-SHA-384","CONCAT-SHA-512"].forEach(function(e){var c;t[e]={derive:(c=(c=e).replace("CONCAT-",""),function(r,e){var n=(e=e||{}).length,t=h.HASHLENGTH[c];if(!n)return Promise.reject(new Error("invalid key length"));if(!e.otherInfo)return Promise.reject(new Error("invalid otherInfo"));var i=e.otherInfo,a=p[c].digest,s=Math.ceil(n/t),o=0,u=[];return function t(){if(s===o++)return l.concat(u).slice(0,n);var e=l.alloc(4+r.length+i.length);return e.writeUInt32BE(o,0),r.copy(e,4),i.copy(e,4+r.length),a(e).then(function(e){return u.push(e),t()})}()})}}),e.exports=t}.call(this,r(360).Buffer)},838:function(e,t,c){"use strict";!function(n){var l=c(758),h=l.jsbn.BigInteger,a=c(839),r=c(930);function i(e){return new h(e,16)}function p(e,t){t=t||Math.ceil(e.bitLength()/8),t*=2;for(var r=(r=e.toString(16)).substring(Math.max(r.length-t,0));t>r.length;)r="0"+r;return n.from(r,"hex")}function f(e){return i((e="string"==typeof e?n.from(e,"binary"):e).toString("hex"))}function d(e){return Math.ceil(e.getN().bitLength()/8)}function s(e){var t=r[e];if(!t)throw new TypeError("unsupported named curve: "+e);return t}function y(e,t){var r=e.getN().bitLength(),e=8*t.length,t=f(t);return t=r<e?t.shiftRight(e-r):t}function o(e,t,r){var n=s(e),i=n.getCurve(),i=new a.ECPointFp(i,i.fromBigInteger(t),i.fromBigInteger(r));this.curve=e,this.params=n,this.point=i;n=d(n);this.x=p(t,n),this.y=p(r,n)}function u(e,t){var r=s(e);this.curve=e;r=d(this.params=r);this.d=p(t,r)}o.prototype.isValid=function(){return this.params.curve.contains(this.point)},o.prototype.verify=function(e,t){var r=this.params.getN(),n=this.params.getG(),i=f(t.r),t=f(t.s);if(i.compareTo(h.ONE)<0||0<=i.compareTo(r))return!1;if(t.compareTo(h.ONE)<0||0<=i.compareTo(r))return!1;e=y(this.params,e),t=t.modInverse(r),e=e.multiply(t).mod(r),t=i.multiply(t).mod(r);return n.multiplyTwo(e,this.point,t).getX().toBigInteger().mod(r).equals(i)},u.prototype.toPublicKey=function(){var e=f(this.d),e=this.params.getG().multiply(e);return new o(this.curve,e.getX().toBigInteger(),e.getY().toBigInteger())},u.prototype.sign=function(e){var t,r,n,i,a=d(this.params),s=this.params.getN(),o=this.params.getG(),u=y(this.params,e),c=f(this.d);do{do{for(;(n=f(l.random.getBytes(a))).equals(h.ZERO)||0<=n.compareTo(s););}while((t=o.multiply(n).getX().toBigInteger().mod(s)).equals(h.ZERO))}while(i=c.multiply(t),i=u.add(i),(r=n.modInverse(s).multiply(i).mod(s)).equals(h.ONE));e=d(this.params);return{r:t=p(t,e),s:r=p(r,e)}},u.prototype.isValid=function(){var e=f(this.d),t=this.params.getN().subtract(h.ONE);return 0<=e.compareTo(h.ONE)&&e.compareTo(t)<0},u.prototype.computeSecret=function(e){var t=f(this.d),t=e.point.multiply(t).getX().toBigInteger();return p(t,d(this.params))},t.generateKeyPair=function(e){var t=s(e),r=t.getN(),t=f(t=l.random.getBytes(d(t))),r=r.subtract(h.ONE),t=new u(e,t.mod(r).add(h.ONE)),r=t.toPublicKey();return{private:t,public:r}},t.asPublicKey=function(e,t,r){return"string"==typeof t?t=i(t):n.isBuffer(t)&&(t=f(t)),"string"==typeof r?r=i(r):n.isBuffer(r)&&(r=f(r)),new o(e,t,r)},t.asPrivateKey=function(e,t){return"string"==typeof t?t=i(t):n.isBuffer(t)&&(t=f(t)),new u(e,t)}}.call(this,c(360).Buffer)},839:function(e,t,r){"use strict";var u=r(758).jsbn.BigInteger;function n(){return new u(null)}function i(e){this.r2=n(),this.q3=n(),u.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function a(e,t){this.x=t,this.p=e}function c(e,t,r,n){this.curve=e,this.x=t,this.y=r,this.z=n||u.ONE,this.zinv=null}function s(e,t,r){this.p=e,this.a=this.fromBigInteger(t),this.b=this.fromBigInteger(r),this.infinity=new c(this,null,null),this.reducer=new i(this.p)}i.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=n();return e.copyTo(t),this.reduce(t),t},i.prototype.revert=function(e){return e},i.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);0<=e.compareTo(this.m);)e.subTo(this.m,e)},i.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},i.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},a.prototype.equals=function(e){return e===this||this.p.equals(e.p)&&this.x.equals(e.x)},a.prototype.toBigInteger=function(){return this.x},a.prototype.negate=function(){return new a(this.p,this.x.negate().mod(this.p))},a.prototype.add=function(e){return new a(this.p,this.x.add(e.toBigInteger()).mod(this.p))},a.prototype.subtract=function(e){return new a(this.p,this.x.subtract(e.toBigInteger()).mod(this.p))},a.prototype.multiply=function(e){return new a(this.p,this.x.multiply(e.toBigInteger()).mod(this.p))},a.prototype.square=function(){return new a(this.p,this.x.pow(2).mod(this.p))},a.prototype.divide=function(e){return new a(this.p,this.x.multiply(e.toBigInteger().modInverse(this.p)).mod(this.p))},c.prototype.getX=function(){this.zinv||(this.zinv=this.z.modInverse(this.curve.p));var e=this.x.toBigInteger().multiply(this.zinv);return this.curve.reduce(e),this.curve.fromBigInteger(e)},c.prototype.getY=function(){this.zinv||(this.zinv=this.z.modInverse(this.curve.p));var e=this.y.toBigInteger().multiply(this.zinv);return this.curve.reduce(e),this.curve.fromBigInteger(e)},c.prototype.equals=function(e){return e===this||(this.isInfinity()?e.isInfinity():e.isInfinity()?this.isInfinity():!!e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.p).equals(u.ZERO)&&e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.p).equals(u.ZERO))},c.prototype.isInfinity=function(){return null==this.x&&null==this.y||this.z.equals(u.ZERO)&&!this.y.toBigInteger().equals(u.ZERO)},c.prototype.negate=function(){return new c(this.curve,this.x,this.y.negate(),this.z)},c.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.p),r=e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.p);if(u.ZERO.equals(r))return u.ZERO.equals(t)?this.twice():this.curve.getInfinity();var n=new u("3"),i=this.x.toBigInteger(),a=this.y.toBigInteger(),s=r.pow(2),o=s.multiply(r),i=i.multiply(s),s=t.pow(2).multiply(this.z),r=s.subtract(i.shiftLeft(1)).multiply(e.z).subtract(o).multiply(r).mod(this.curve.p),t=i.multiply(n).multiply(t).subtract(a.multiply(o)).subtract(s.multiply(t)).multiply(e.z).add(t.multiply(o)).mod(this.curve.p),e=o.multiply(this.z).multiply(e.z).mod(this.curve.p);return new c(this.curve,this.curve.fromBigInteger(r),this.curve.fromBigInteger(t),e)},c.prototype.twice=function(){if(this.isInfinity())return this;if(0===this.y.toBigInteger().signum())return this.curve.getInfinity();var e=new u("3"),t=this.x.toBigInteger(),r=this.y.toBigInteger(),n=r.multiply(this.z),i=n.multiply(r).mod(this.curve.p),a=this.curve.a.toBigInteger(),r=t.pow(2).multiply(e),a=(r=(r=!u.ZERO.equals(a)?r.add(this.z.pow(2).multiply(a)):r).mod(this.curve.p)).pow(2).subtract(t.shiftLeft(3).multiply(i)).shiftLeft(1).multiply(n).mod(this.curve.p),r=r.multiply(e).multiply(t).subtract(i.shiftLeft(1)).shiftLeft(2).multiply(i).subtract(r.pow(2).multiply(r)).mod(this.curve.p),n=n.pow(2).multiply(n).shiftLeft(3).mod(this.curve.p);return new c(this.curve,this.curve.fromBigInteger(a),this.curve.fromBigInteger(r),n)},c.prototype.multiply=function(e){if(this.isInfinity())return this;if(0===e.signum())return this.curve.getInfinity();for(var t=e,r=t.multiply(new u("3")),n=this.negate(),i=this,a=r.bitLength()-2;0<a;--a){var i=i.twice(),s=r.testBit(a);s!==t.testBit(a)&&(i=i.add(s?this:n))}return i},c.prototype.multiplyTwo=function(e,t,r){for(var n=e.bitLength()>r.bitLength()?e.bitLength()-1:r.bitLength()-1,i=this.curve.getInfinity(),a=this.add(t);0<=n;)i=i.twice(),e.testBit(n)?i=r.testBit(n)?i.add(a):i.add(this):r.testBit(n)&&(i=i.add(t)),--n;return i},s.prototype.getP=function(){return this.p},s.prototype.getA=function(){return this.a},s.prototype.getB=function(){return this.b},s.prototype.equals=function(e){return e===this||this.p.equals(e.p)&&this.a.equals(e.a)&&this.b.equals(e.b)},s.prototype.contains=function(e){var t=e.getX().toBigInteger(),r=e.getY().toBigInteger(),n=this.a.toBigInteger(),i=this.b.toBigInteger(),e=this.p,r=r.pow(2).mod(e),e=t.pow(3).add(n.multiply(t)).add(i).mod(e);return r.equals(e)},s.prototype.getInfinity=function(){return this.infinity},s.prototype.fromBigInteger=function(e){return new a(this.p,e)},s.prototype.reduce=function(e){this.reducer.reduce(e)},s.prototype.decodePointHex=function(e){switch(parseInt(e.substring(0,2),16)){case 0:return this.infinity;case 2:case 3:return null;case 4:case 6:case 7:var t=(e.length-2)/2,r=e.substr(2,t),t=e.substr(2+t,t);return new c(this,this.fromBigInteger(new u(r,16)),this.fromBigInteger(new u(t,16)));default:return null}},s.prototype.encodePointHex=function(e){if(e.isInfinity())return"00";var t=e.getX().toBigInteger().toString(16),r=e.getY().toBigInteger().toString(16),n=this.getP().toString(16).length;for(n%2!=0&&n++;t.length<n;)t="0"+t;for(;r.length<n;)r="0"+r;return"04"+t+r},e.exports={ECFieldElementFp:a,ECPointFp:c,ECCurveFp:s}},840:function(e,t,n){"use strict";!function(h){var p=n(765),f=n(804);function t(e){var c=e.replace("HKDF-",""),l=e.replace("HKDF-SHA-","HS");return function(e,t){var r=p.HASHLENGTH[c]/8;"string"==typeof l&&(l=f[l].sign);var n=(t=t||{}).salt;n&&0!==n.length||(n=h.alloc(r));var i=t.info||h.alloc(0),a=t.length||r,s=Math.ceil(a/r),o=[],u=0;return l(n,e,{length:8*n.length}).then(function(e){return function t(r,n){return s===u++?h.concat(o).slice(0,a):(n=n||h.alloc(0),n=h.concat([n,i,h.from([u])]),n=(n=l(r,n)).then(function(e){return n=e.mac,o.push(n),t(r,n)}))}(e.mac)})}}var r={};["HKDF-SHA-1","HKDF-SHA-256","HKDF-SHA-384","HKDF-SHA-512"].forEach(function(e){r[e]={derive:t(e)}}),e.exports=r}.call(this,n(360).Buffer)},841:function(e,t,r){"use strict";e.exports={MODE_SIGN:"sign",MODE_VERIFY:"verify",MODE_ENCRYPT:"encrypt",MODE_DECRYPT:"decrypt",MODE_WRAP:"wrap",MODE_UNWRAP:"unwrap"}},842:function(e,t,r){"use strict";function h(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}e.exports=function(e){e?"string"==typeof e&&(e=e.split(" ")):e=[];var a,s=[],o=[],u=[],c=[],l=/^(!)?([^*]*)(\*?)([^*]*)$/;e.forEach(function(e){var t,r,n,i;e&&(l.lastIndex=0,(t=l.exec(e))&&(a="("+(r=t[2],n=t[3],i=t[4],(e=[]).push("^"),r&&(r=h(r),e.push(r)),n&&e.push(r||i?".*":".+"),i&&(i=h(i),e.push(i)),e.push("$"),e.join(""))+")",t[1]?(c.push(a),o.push(t[0])):(u.push(a),s.push(t[0]))))}),u=u.length?new RegExp(u.join("|")):null,c=c.length?new RegExp(c.join("|")):null,s.length||(s=["*"]),Object.defineProperty(this,"spec",{value:s.join(" ")+" "+o.join(" "),enumerable:!0}),Object.defineProperty(this,"match",{value:function(e){var t=Boolean(e);return t&&u&&(u.lastIndex=0,t=u.test(e)),t&&c&&(c.lastIndex=0,t=!c.test(e)),t}})}},843:function(e,t,r){"use strict";var n=r(765),i=r(772);e.exports={slice:function(e,t){return Array.prototype.slice.call(e,t||0)},generateCEK:function(e){var t=i.createKeyStore(),e=n.KEYLENGTH[e];if(e)return t.generate("oct",e);throw new Error("unsupported encryption algorithm")}}},844:function(e,t,r){"use strict";var n={};(0,r(769).assign)(n,r(942),r(945),r(849)),e.exports=n},845:function(e,t,r){"use strict";e.exports=function(e,t,r,n){for(var i=65535&e|0,a=e>>>16&65535|0,s=0;0!==r;){for(r-=s=2e3<r?2e3:r;a=a+(i=i+t[n++]|0)|0,--s;);i%=65521,a%=65521}return i|a<<16|0}},846:function(e,t,r){"use strict";var o=function(){for(var e=[],t=0;t<256;t++){for(var r=t,n=0;n<8;n++)r=1&r?3988292384^r>>>1:r>>>1;e[t]=r}return e}();e.exports=function(e,t,r,n){var i=o,a=n+r;e^=-1;for(var s=n;s<a;s++)e=e>>>8^i[255&(e^t[s])];return-1^e}},847:function(e,t,r){"use strict";var u=r(769),i=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){a=!1}for(var c=new u.Buf8(256),n=0;n<256;n++)c[n]=252<=n?6:248<=n?5:240<=n?4:224<=n?3:192<=n?2:1;function l(e,t){if(t<65534&&(e.subarray&&a||!e.subarray&&i))return String.fromCharCode.apply(null,u.shrinkBuf(e,t));for(var r="",n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r}c[254]=c[254]=1,t.string2buf=function(e){for(var t,r,n,i,a=e.length,s=0,o=0;o<a;o++)55296==(64512&(r=e.charCodeAt(o)))&&o+1<a&&56320==(64512&(n=e.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(n-56320),o++),s+=r<128?1:r<2048?2:r<65536?3:4;for(t=new u.Buf8(s),o=i=0;i<s;o++)55296==(64512&(r=e.charCodeAt(o)))&&o+1<a&&56320==(64512&(n=e.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(n-56320),o++),r<128?t[i++]=r:(r<2048?t[i++]=192|r>>>6:(r<65536?t[i++]=224|r>>>12:(t[i++]=240|r>>>18,t[i++]=128|r>>>12&63),t[i++]=128|r>>>6&63),t[i++]=128|63&r);return t},t.buf2binstring=function(e){return l(e,e.length)},t.binstring2buf=function(e){for(var t=new u.Buf8(e.length),r=0,n=t.length;r<n;r++)t[r]=e.charCodeAt(r);return t},t.buf2string=function(e,t){for(var r,n,i=t||e.length,a=new Array(2*i),s=0,o=0;o<i;)if((r=e[o++])<128)a[s++]=r;else if(4<(n=c[r]))a[s++]=65533,o+=n-1;else{for(r&=2===n?31:3===n?15:7;1<n&&o<i;)r=r<<6|63&e[o++],n--;1<n?a[s++]=65533:r<65536?a[s++]=r:(r-=65536,a[s++]=55296|r>>10&1023,a[s++]=56320|1023&r)}return l(a,s)},t.utf8border=function(e,t){for(var r=(t=(t=t||e.length)>e.length?e.length:t)-1;0<=r&&128==(192&e[r]);)r--;return!(r<0||0===r)&&r+c[e[r]]>t?r:t}},848:function(e,t,r){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},849:function(e,t,r){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},855:function(e,t){e.exports=function(e,t,r){var n=-1,i=e.length;(r=i<r?i:r)<0&&(r+=i),i=r<(t=t<0?i<-t?0:i+t:t)?0:r-t>>>0,t>>>=0;for(var a=Array(i);++n<i;)a[n]=e[n+t];return a}},859:function(e,t){e.exports=function(e,t,r){return e==e&&(void 0!==r&&(e=e<=r?e:r),void 0!==t&&(e=t<=e?e:t)),e}},862:function(e,t,r){var f=r(879),d=r(880),y=r(881),g=r(818),v=r(886),m=r(967),C=r(887),E=r(820),b=r(821),S=r(787),T=Math.max;e.exports=function(e,t,r,n,i,a,s,o){var u=2&t;if(!u&&"function"!=typeof e)throw new TypeError("Expected a function");var c,l,h=n?n.length:0;h||(t&=-97,n=i=void 0),s=void 0===s?s:T(S(s),0),o=void 0===o?o:S(o),h-=i?i.length:0,64&t&&(c=n,l=i,n=i=void 0);var p=u?void 0:m(e),s=[e,t,r,n,i,c,l,a,s,o];return p&&C(s,p),e=s[0],t=s[1],r=s[2],n=s[3],i=s[4],!(o=s[9]=void 0===s[9]?u?0:e.length:T(s[9]-h,0))&&24&t&&(t&=-25),r=t&&1!=t?8==t||16==t?y(e,t,o):32!=t&&33!=t||i.length?g.apply(void 0,s):v(e,t,r,n):d(e,t,r),b((p?f:E)(r,s),e,t)}},868:function(e,i,a){!function(e){var t=void 0!==e&&e||"undefined"!=typeof self&&self||window,r=Function.prototype.apply;function n(e,t){this._id=e,this._clearFn=t}i.setTimeout=function(){return new n(r.call(setTimeout,t,arguments),clearTimeout)},i.setInterval=function(){return new n(r.call(setInterval,t,arguments),clearInterval)},i.clearTimeout=i.clearInterval=function(e){e&&e.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(t,this._id)},i.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},i.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},i._unrefActive=i.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},a(869),i.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,i.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}.call(this,a(133))},869:function(e,t,r){!function(e,f){!function(r){"use strict";var n,t,i,e,a,s,o,u,c,l;function h(e){delete s[e]}function p(e){if(o)setTimeout(p,0,e);else{var r=s[e];if(r){o=!0;try{!function(){var e=r.callback,t=r.args;switch(t.length){case 0:e();break;case 1:e(t[0]);break;case 2:e(t[0],t[1]);break;case 3:e(t[0],t[1],t[2]);break;default:e.apply(void 0,t)}}()}finally{h(e),o=!1}}}}r.setImmediate||(a=1,o=!(s={}),u=r.document,c=(c=Object.getPrototypeOf&&Object.getPrototypeOf(r))&&c.setTimeout?c:r,l="[object process]"==={}.toString.call(r.process)?function(e){f.nextTick(function(){p(e)})}:function(){if(r.postMessage&&!r.importScripts){var e=!0,t=r.onmessage;return r.onmessage=function(){e=!1},r.postMessage("","*"),r.onmessage=t,e}}()?(i="setImmediate$"+Math.random()+"$",e=function(e){e.source===r&&"string"==typeof e.data&&0===e.data.indexOf(i)&&p(+e.data.slice(i.length))},r.addEventListener?r.addEventListener("message",e,!1):r.attachEvent("onmessage",e),function(e){r.postMessage(i+e,"*")}):r.MessageChannel?((t=new MessageChannel).port1.onmessage=function(e){p(e.data)},function(e){t.port2.postMessage(e)}):u&&"onreadystatechange"in u.createElement("script")?(n=u.documentElement,function(e){var t=u.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,n.removeChild(t),t=null},n.appendChild(t)}):function(e){setTimeout(p,0,e)},c.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];return s[a]={callback:e,args:t},l(a),a++},c.clearImmediate=h)}("undefined"==typeof self?void 0===e?this:e:self)}.call(this,r(133),r(362))},875:function(e,t){e.exports=function(e){return e}},877:function(e,t,r){"use strict";!function(o){function i(e,n){var i=!1,a=e.format||"general",s=o.alloc(0);Object.defineProperty(this,"compact",{get:function(){return"compact"===a},enumerable:!0}),Object.defineProperty(this,"format",{get:function(){return a},enumerable:!0}),Object.defineProperty(this,"update",{value:function(e,t){if(i)throw new Error("already final");return null!=e&&(e=c.asBuffer(e,t),s=s.length?o.concat([s,e],s.length+e.length):e),this}}),Object.defineProperty(this,"final",{value:function(e,t){if(i)return Promise.reject(new Error("already final"));var r;switch(this.update(e,t),i=!0,r=(r=(r=Promise.all(n)).then(function(e){return s=c.base64url.encode(s),e=e.map(function(e){var r={},n=0,i=p(e.header),a=Object.keys(i).length;e.protected.forEach(function(e){e in i&&(r[e]=i[e],n++,delete i[e],a--)});var r=0<n?(r=JSON.stringify(r),c.base64url.encode(r)):"",t=o.from(r+"."+s,"ascii");return(e=e.key.sign(e.header.alg,t,e.header)).then(function(e){var t={};return 0<n&&(t.protected=r),0<a&&(t.header=i),t.signature=c.base64url.encode(e.mac),t})}),e=[Promise.resolve(s)].concat(e),Promise.all(e)})).then(function(e){return{payload:e[0],signatures:e.slice(1)}}),a){case"compact":r=r.then(function(e){e=[e.signatures[0].protected,e.payload,e.signatures[0].signature];return e.join(".")});break;case"flattened":r=r.then(function(e){var t={};t.payload=e.payload;e=e.signatures[0];return e.protected&&(t.protected=e.protected),e.header&&(t.header=e.header),t.signature=e.signature,t})}return r}})}var u=r(766),c=r(759),l=r(772),h=r(938).slice,p=r(764),f=r(874),d=r(939);e.exports={signer:i,createSign:function(e,t){var r=e,n=1,t=t;if(0===arguments.length)throw new Error("at least one signatory must be provided");r=1===arguments.length||l.isKey(e)||e&&"kty"in e||e&&"key"in e&&(l.isKey(e.key)||"kty"in e.key)?(t=e,n=0,{}):p(e),Array.isArray(t)||(t=h(arguments,n));var a=(r=u(p(d),r)).fields||{},n=r.format;if(("compact"===(n=n||(r.compact?"compact":"general"))||"flattened"===n)&&1<t.length)throw new Error("too many signatories for compact or flattened JSON serialization");var s="*"===r.protect;r.compact&&(s=!0);t=t.map(function(t,e){return(t&&"kty"in t?l.asKey(t).then(function(e){return{key:e}}):t?l.asKey(t.key).then(function(e){return{header:t.header,reference:t.reference,protect:t.protect,key:e}}):Promise.reject(new Error("missing key for signatory "+e))).then(function(e){var t=e.key,r=e.header||{},r=u(u({},a),r);(e.header=r).alg||(r.alg=t.algorithms(l.MODE_SIGN)[0]||"");var n,i=e.reference;if(delete e.reference,void 0===i?i=["kid","jku","x5c","x5t","x5u"].some(function(e){return e in r})?null:"kid":"boolean"==typeof i&&(i=i?"kid":null),i)if(n=t.toJSON(),"jwk"===i){if("oct"===t.kty)return Promise.reject(new Error("cannot embed key"));r.jwk=n}else i in n&&(r[i]=n[i]);i=e.protect;if(s||"*"===i)i=Object.keys(r);else if("string"===i)i=[i];else if(Array.isArray(i))i=i.concat();else{if(i)return Promise.reject(new Error("protect must be a list of fields"));i=[]}return i=f(i),e.protected=i,Object.freeze(e)})});return new i({format:n},t)}}}.call(this,r(360).Buffer)},878:function(e,t,r){var n=r(871),i=r(862),a=r(794),s=r(795),o=n(function(e,t){var r=s(t,a(o));return i(e,64,void 0,t,r)});o.placeholder={},e.exports=o},879:function(e,t){e.exports=function(e){return e}},880:function(e,t,r){var a=r(780),s=r(361);e.exports=function(t,e,r){var n=1&e,i=a(t);return function e(){return(this&&this!==s&&this instanceof e?i:t).apply(n?r:this,arguments)}}},881:function(e,t,r){var c=r(872),n=r(780),l=r(818),h=r(819),p=r(794),f=r(795),d=r(361);e.exports=function(a,s,o){var u=n(a);return function e(){for(var t=arguments.length,r=Array(t),n=t,i=p(e);n--;)r[n]=arguments[n];i=t<3&&r[0]!==i&&r[t-1]!==i?[]:f(r,i);return(t-=i.length)<o?h(a,s,l,e.placeholder,void 0,r,i,void 0,void 0,o-t):c(this&&this!==d&&this instanceof e?u:a,this,r)}}},882:function(e,t){var p=Math.max;e.exports=function(e,t,r,n){for(var i=-1,a=e.length,s=r.length,o=-1,u=t.length,c=p(a-s,0),l=Array(u+c),h=!n;++o<u;)l[o]=t[o];for(;++i<s;)(h||i<a)&&(l[r[i]]=e[i]);for(;c--;)l[o++]=e[i++];return l}},883:function(e,t){var d=Math.max;e.exports=function(e,t,r,n){for(var i=-1,a=e.length,s=-1,o=r.length,u=-1,c=t.length,l=d(a-o,0),h=Array(l+c),p=!n;++i<l;)h[i]=e[i];for(var f=i;++u<c;)h[f+u]=t[u];for(;++s<o;)(p||i<a)&&(h[f+r[s]]=e[i++]);return h}},884:function(e,t){e.exports=function(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}},885:function(e,t,r){var s=r(1067),o=r(873),u=Math.min;e.exports=function(e,t){for(var r=e.length,n=u(t.length,r),i=s(e);n--;){var a=t[n];e[n]=o(a,r)?i[a]:void 0}return e}},886:function(e,t,r){var p=r(872),n=r(780),f=r(361);e.exports=function(o,e,u,c){var l=1&e,h=n(o);return function e(){for(var t=-1,r=arguments.length,n=-1,i=c.length,a=Array(i+r),s=this&&this!==f&&this instanceof e?h:o;++n<i;)a[n]=c[n];for(;r--;)a[n++]=arguments[++t];return p(s,l?u:this,a)}}},887:function(e,t){e.exports=function(e){return e}},888:function(t,e,r){!function(h){var e={};t.exports=e;var p={};e.encode=function(e,t,r){if("string"!=typeof t)throw new TypeError('"alphabet" must be a string.');if(void 0!==r&&"number"!=typeof r)throw new TypeError('"maxline" must be a number.');var n="";if(e instanceof Uint8Array){for(var i=0,a=t.length,s=t.charAt(0),o=[0],i=0;i<e.length;++i){for(var u=0,c=e[i];u<o.length;++u)c+=o[u]<<8,o[u]=c%a,c=c/a|0;for(;0<c;)o.push(c%a),c=c/a|0}for(i=0;0===e[i]&&i<e.length-1;++i)n+=s;for(i=o.length-1;0<=i;--i)n+=t[o[i]]}else n=function(e,t){for(var r=0,n=t.length,i=t.charAt(0),a=[0],r=0;r<e.length();++r){for(var s=0,o=e.at(r);s<a.length;++s)o+=a[s]<<8,a[s]=o%n,o=o/n|0;for(;0<o;)a.push(o%n),o=o/n|0}var u="";for(r=0;0===e.at(r)&&r<e.length()-1;++r)u+=i;for(r=a.length-1;0<=r;--r)u+=t[a[r]];return u}(e,t);return r&&(r=new RegExp(".{1,"+r+"}","g"),n=n.match(r).join("\r\n")),n},e.decode=function(e,t){if("string"!=typeof e)throw new TypeError('"input" must be a string.');if("string"!=typeof t)throw new TypeError('"alphabet" must be a string.');if(!(r=p[t]))for(var r=p[t]=[],n=0;n<t.length;++n)r[t.charCodeAt(n)]=n;e=e.replace(/\s/g,"");for(var i=t.length,a=t.charAt(0),s=[0],n=0;n<e.length;n++){var o=r[e.charCodeAt(n)];if(void 0===o)return;for(var u=0,c=o;u<s.length;++u)c+=s[u]*i,s[u]=255&c,c>>=8;for(;0<c;)s.push(255&c),c>>=8}for(var l=0;e[l]===a&&l<e.length-1;++l)s.push(0);return void 0!==h?h.from(s.reverse()):new Uint8Array(s.reverse())}}.call(this,r(360).Buffer)},889:function(e,t,r){var p=r(756);r(774),r(767),r(800),r(770),r(775),r(827),r(768),r(757),r(801);var f=p.asn1,a=e.exports=p.pkcs7=p.pkcs7||{};function d(e){var t,r,n,i,a;return e.type===p.pki.oids.contentType?t=f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(e.value).getBytes()):e.type===p.pki.oids.messageDigest?t=f.create(f.Class.UNIVERSAL,f.Type.OCTETSTRING,!1,e.value.bytes()):e.type===p.pki.oids.signingTime&&(r=new Date("1950-01-01T00:00:00Z"),n=new Date("2050-01-01T00:00:00Z"),"string"==typeof(a=e.value)&&(i=Date.parse(a),a=isNaN(i)?13===a.length?f.utcTimeToDate(a):f.generalizedTimeToDate(a):new Date(i)),t=r<=a&&a<n?f.create(f.Class.UNIVERSAL,f.Type.UTCTIME,!1,f.dateToUtcTime(a)):f.create(f.Class.UNIVERSAL,f.Type.GENERALIZEDTIME,!1,f.dateToGeneralizedTime(a))),f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(e.type).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.SET,!0,[t])])}function n(e,t,r){var n={};if(!f.validate(t,r,n,[])){r=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw r.errors=r}if(f.derToOid(n.contentType)!==p.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(n.encryptedContent){var i="";if(p.util.isArray(n.encryptedContent))for(var a=0;a<n.encryptedContent.length;++a){if(n.encryptedContent[a].type!==f.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");i+=n.encryptedContent[a].value}else i=n.encryptedContent;e.encryptedContent={algorithm:f.derToOid(n.encAlgorithm),parameter:p.util.createBuffer(n.encParameter.value),content:p.util.createBuffer(i)}}if(n.content){if(i="",p.util.isArray(n.content))for(a=0;a<n.content.length;++a){if(n.content[a].type!==f.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");i+=n.content[a].value}else i=n.content;e.content=p.util.createBuffer(i)}return e.version=n.version.charCodeAt(0),e.rawCapture=n}function i(e){if(void 0===e.encryptedContent.key)throw new Error("Symmetric key not available.");if(void 0===e.content){var t;switch(e.encryptedContent.algorithm){case p.pki.oids["aes128-CBC"]:case p.pki.oids["aes192-CBC"]:case p.pki.oids["aes256-CBC"]:t=p.aes.createDecryptionCipher(e.encryptedContent.key);break;case p.pki.oids.desCBC:case p.pki.oids["des-EDE3-CBC"]:t=p.des.createDecryptionCipher(e.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+e.encryptedContent.algorithm)}if(t.start(e.encryptedContent.parameter),t.update(e.encryptedContent.content),!t.finish())throw new Error("Symmetric decryption failed.");e.content=t.output}}a.messageFromPem=function(e){var t=p.pem.decode(e)[0];if("PKCS7"!==t.type){e=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw e.headerType=t.type,e}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");t=f.fromDer(t.body);return a.messageFromAsn1(t)},a.messageToPem=function(e,t){e={type:"PKCS7",body:f.toDer(e.toAsn1()).getBytes()};return p.pem.encode(e,{maxline:t})},a.messageFromAsn1=function(e){var t={},r=[];if(!f.validate(e,a.asn1.contentInfoValidator,t,r)){e=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw e.errors=r,e}var n,i=f.derToOid(t.contentType);switch(i){case p.pki.oids.envelopedData:n=a.createEnvelopedData();break;case p.pki.oids.encryptedData:n=a.createEncryptedData();break;case p.pki.oids.signedData:n=a.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return n.fromAsn1(t.content.value[0]),n},a.createSignedData=function(){var h=null;return h={type:p.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(e){if(n(h,e,a.asn1.signedDataValidator),h.certificates=[],h.crls=[],h.digestAlgorithmIdentifiers=[],h.contentInfo=null,h.signerInfos=[],h.rawCapture.certificates)for(var t=h.rawCapture.certificates.value,r=0;r<t.length;++r)h.certificates.push(p.pki.certificateFromAsn1(t[r]))},toAsn1:function(){h.contentInfo||h.sign();for(var e=[],t=0;t<h.certificates.length;++t)e.push(p.pki.certificateToAsn1(h.certificates[t]));var r=[],n=f.create(f.Class.CONTEXT_SPECIFIC,0,!0,[f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,f.integerToDer(h.version).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.SET,!0,h.digestAlgorithmIdentifiers),h.contentInfo])]);return 0<e.length&&n.value[0].value.push(f.create(f.Class.CONTEXT_SPECIFIC,0,!0,e)),0<r.length&&n.value[0].value.push(f.create(f.Class.CONTEXT_SPECIFIC,1,!0,r)),n.value[0].value.push(f.create(f.Class.UNIVERSAL,f.Type.SET,!0,h.signerInfos)),f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(h.type).getBytes()),n])},addSigner:function(e){var t=e.issuer,r=e.serialNumber;e.certificate&&(t=(n="string"==typeof(n=e.certificate)?p.pki.certificateFromPem(n):n).issuer.attributes,r=n.serialNumber);var n=e.key;if(!n)throw new Error("Could not add PKCS#7 signer; no private key specified.");"string"==typeof n&&(n=p.pki.privateKeyFromPem(n));var i=e.digestAlgorithm||p.pki.oids.sha1;switch(i){case p.pki.oids.sha1:case p.pki.oids.sha256:case p.pki.oids.sha384:case p.pki.oids.sha512:case p.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+i)}var a=e.authenticatedAttributes||[];if(0<a.length){for(var s=!1,o=!1,u=0;u<a.length;++u){var c=a[u];if(s||c.type!==p.pki.oids.contentType){if(!o&&c.type===p.pki.oids.messageDigest&&(o=!0,s))break}else if(s=!0,o)break}if(!s||!o)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}h.signers.push({key:n,version:1,issuer:t,serialNumber:r,digestAlgorithm:i,signatureAlgorithm:p.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:a,unauthenticatedAttributes:[]})},sign:function(e){var t;e=e||{},"object"==typeof h.content&&null!==h.contentInfo||(h.contentInfo=f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(p.pki.oids.data).getBytes())]),"content"in h&&(h.content instanceof p.util.ByteBuffer?t=h.content.bytes():"string"==typeof h.content&&(t=p.util.encodeUtf8(h.content)),e.detached?h.detachedContent=f.create(f.Class.UNIVERSAL,f.Type.OCTETSTRING,!1,t):h.contentInfo.value.push(f.create(f.Class.CONTEXT_SPECIFIC,0,!0,[f.create(f.Class.UNIVERSAL,f.Type.OCTETSTRING,!1,t)])))),0!==h.signers.length&&function(e){var t=h.detachedContent||(t=h.contentInfo.value[1]).value[0];if(!t)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var r,n=f.derToOid(h.contentInfo.value[0].value),i=f.toDer(t);for(r in i.getByte(),f.getBerValueLength(i),i=i.getBytes(),e)e[r].start().update(i);for(var a=new Date,s=0;s<h.signers.length;++s){var o=h.signers[s];if(0===o.authenticatedAttributes.length){if(n!==p.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{o.authenticatedAttributesAsn1=f.create(f.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var u=f.create(f.Class.UNIVERSAL,f.Type.SET,!0,[]),c=0;c<o.authenticatedAttributes.length;++c){var l=o.authenticatedAttributes[c];l.type===p.pki.oids.messageDigest?l.value=e[o.digestAlgorithm].digest():l.type===p.pki.oids.signingTime&&(l.value||(l.value=a)),u.value.push(d(l)),o.authenticatedAttributesAsn1.value.push(d(l))}i=f.toDer(u).getBytes(),o.md.start().update(i)}o.signature=o.key.sign(o.md,"RSASSA-PKCS1-V1_5")}h.signerInfos=function(e){for(var t=[],r=0;r<e.length;++r)t.push(function(e){var t=f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,f.integerToDer(e.version).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[p.pki.distinguishedNameToAsn1({attributes:e.issuer}),f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,p.util.hexToBytes(e.serialNumber))]),f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(e.digestAlgorithm).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.NULL,!1,"")])]);if(e.authenticatedAttributesAsn1&&t.value.push(e.authenticatedAttributesAsn1),t.value.push(f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(e.signatureAlgorithm).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.NULL,!1,"")])),t.value.push(f.create(f.Class.UNIVERSAL,f.Type.OCTETSTRING,!1,e.signature)),0<e.unauthenticatedAttributes.length){for(var r=f.create(f.Class.CONTEXT_SPECIFIC,1,!0,[]),n=0;n<e.unauthenticatedAttributes.length;++n){var i=e.unauthenticatedAttributes[n];r.values.push(d(i))}t.value.push(r)}return t}(e[r]));return t}(h.signers)}(function(){for(var e,t={},r=0;r<h.signers.length;++r){var n=h.signers[r];(e=n.digestAlgorithm)in t||(t[e]=p.md[p.pki.oids[e]].create()),0===n.authenticatedAttributes.length?n.md=t[e]:n.md=p.md[p.pki.oids[e]].create()}for(e in h.digestAlgorithmIdentifiers=[],t)h.digestAlgorithmIdentifiers.push(f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(e).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.NULL,!1,"")]));return t}())},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(e){"string"==typeof e&&(e=p.pki.certificateFromPem(e)),h.certificates.push(e)},addCertificateRevokationList:function(e){throw new Error("PKCS#7 CRL support not yet implemented.")}}},a.createEncryptedData=function(){var t=null;return t={type:p.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:p.pki.oids["aes256-CBC"]},fromAsn1:function(e){n(t,e,a.asn1.encryptedDataValidator)},decrypt:function(e){void 0!==e&&(t.encryptedContent.key=e),i(t)}}},a.createEnvelopedData=function(){var o=null;return o={type:p.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:p.pki.oids["aes256-CBC"]},fromAsn1:function(e){e=n(o,e,a.asn1.envelopedDataValidator);o.recipients=function(e){for(var t=[],r=0;r<e.length;++r)t.push(function(e){var t={},r=[];if(f.validate(e,a.asn1.recipientInfoValidator,t,r))return{version:t.version.charCodeAt(0),issuer:p.pki.RDNAttributesAsArray(t.issuer),serialNumber:p.util.createBuffer(t.serial).toHex(),encryptedContent:{algorithm:f.derToOid(t.encAlgorithm),parameter:t.encParameter.value,content:t.encKey}};throw(t=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.")).errors=r,t}(e[r]));return t}(e.recipientInfos.value)},toAsn1:function(){return f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(o.type).getBytes()),f.create(f.Class.CONTEXT_SPECIFIC,0,!0,[f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,f.integerToDer(o.version).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.SET,!0,function(e){for(var t,r=[],n=0;n<e.length;++n)r.push((t=e[n],f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,f.integerToDer(t.version).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[p.pki.distinguishedNameToAsn1({attributes:t.issuer}),f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,p.util.hexToBytes(t.serialNumber))]),f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(t.encryptedContent.algorithm).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.NULL,!1,"")]),f.create(f.Class.UNIVERSAL,f.Type.OCTETSTRING,!1,t.encryptedContent.content)])));return r}(o.recipients)),f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,(e=o.encryptedContent,[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(p.pki.oids.data).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(e.algorithm).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.OCTETSTRING,!1,e.parameter.getBytes())]),f.create(f.Class.CONTEXT_SPECIFIC,0,!0,[f.create(f.Class.UNIVERSAL,f.Type.OCTETSTRING,!1,e.content.getBytes())])]))])])]);var e},findRecipient:function(e){for(var t=e.issuer.attributes,r=0;r<o.recipients.length;++r){var n=o.recipients[r],i=n.issuer;if(n.serialNumber===e.serialNumber&&i.length===t.length){for(var a=!0,s=0;s<t.length;++s)if(i[s].type!==t[s].type||i[s].value!==t[s].value){a=!1;break}if(a)return n}}return null},decrypt:function(e,t){if(void 0===o.encryptedContent.key&&void 0!==e&&void 0!==t)switch(e.encryptedContent.algorithm){case p.pki.oids.rsaEncryption:case p.pki.oids.desCBC:var r=t.decrypt(e.encryptedContent.content);o.encryptedContent.key=p.util.createBuffer(r);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}i(o)},addRecipient:function(e){o.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:p.pki.oids.rsaEncryption,key:e.publicKey}})},encrypt:function(e,t){if(void 0===o.encryptedContent.content){var r,n,i;switch(t=t||o.encryptedContent.algorithm,e=e||o.encryptedContent.key,t){case p.pki.oids["aes128-CBC"]:n=r=16,i=p.aes.createEncryptionCipher;break;case p.pki.oids["aes192-CBC"]:r=24,n=16,i=p.aes.createEncryptionCipher;break;case p.pki.oids["aes256-CBC"]:r=32,n=16,i=p.aes.createEncryptionCipher;break;case p.pki.oids["des-EDE3-CBC"]:r=24,n=8,i=p.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+t)}if(void 0===e)e=p.util.createBuffer(p.random.getBytes(r));else if(e.length()!=r)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+r+".");o.encryptedContent.algorithm=t,o.encryptedContent.key=e,o.encryptedContent.parameter=p.util.createBuffer(p.random.getBytes(n));e=i(e);if(e.start(o.encryptedContent.parameter.copy()),e.update(o.content),!e.finish())throw new Error("Symmetric encryption failed.");o.encryptedContent.content=e.output}for(var a=0;a<o.recipients.length;++a){var s=o.recipients[a];if(void 0===s.encryptedContent.content){if(s.encryptedContent.algorithm!==p.pki.oids.rsaEncryption)throw new Error("Unsupported asymmetric cipher, OID "+s.encryptedContent.algorithm);s.encryptedContent.content=s.encryptedContent.key.encrypt(o.encryptedContent.key.data)}}}}}},890:function(e,t,r){var n=r(756);r(823),e.exports=n.mgf=n.mgf||{},n.mgf.mgf1=n.mgf1},891:function(e,t,r){var n=r(756);r(767),r(770),r(830),r(775),r(798),r(893),r(802),r(781),r(757),r(801);var i=n.asn1,a=e.exports=n.pki=n.pki||{};a.pemToDer=function(e){e=n.pem.decode(e)[0];if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert PEM to DER; PEM is encrypted.");return n.util.createBuffer(e.body)},a.privateKeyFromPem=function(e){var t=n.pem.decode(e)[0];if("PRIVATE KEY"!==t.type&&"RSA PRIVATE KEY"!==t.type){e=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw e.headerType=t.type,e}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert private key from PEM; PEM is encrypted.");t=i.fromDer(t.body);return a.privateKeyFromAsn1(t)},a.privateKeyToPem=function(e,t){e={type:"RSA PRIVATE KEY",body:i.toDer(a.privateKeyToAsn1(e)).getBytes()};return n.pem.encode(e,{maxline:t})},a.privateKeyInfoToPem=function(e,t){e={type:"PRIVATE KEY",body:i.toDer(e).getBytes()};return n.pem.encode(e,{maxline:t})}},892:function(e,t,r){var f=r(756);r(757);var s=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],d=[1,2,3,5];e.exports=f.rc2=f.rc2||{},f.rc2.expandKey=function(e,t){t=t||128;for(var r=e="string"==typeof e?f.util.createBuffer(e):e,n=e.length(),t=t,i=Math.ceil(t/8),t=255>>(7&t),a=n;a<128;a++)r.putByte(s[r.at(a-1)+r.at(a-n)&255]);for(r.setAt(128-i,s[r.at(128-i)&t]),a=127-i;0<=a;a--)r.setAt(a,s[r.at(a+1)^r.at(a+i)]);return r};function n(e,t,a){var r,s,o,n=!1,u=null,c=null,l=null,i=[];for(e=f.rc2.expandKey(e,t),s=0;s<64;s++)i.push(e.getInt16Le());var h=a?(r=function(e){for(s=0;s<4;s++)e[s]+=i[o]+(e[(s+3)%4]&e[(s+2)%4])+(~e[(s+3)%4]&e[(s+1)%4]),e[s]=(t=e[s])<<(r=d[s])&65535|(65535&t)>>16-r,o++;var t,r},function(e){for(s=0;s<4;s++)e[s]+=i[63&e[(s+3)%4]]}):(r=function(e){for(s=3;0<=s;s--)e[s]=(65535&(t=e[s]))>>(r=d[s])|t<<16-r&65535,e[s]-=i[o]+(e[(s+3)%4]&e[(s+2)%4])+(~e[(s+3)%4]&e[(s+1)%4]),o--;var t,r},function(e){for(s=3;0<=s;s--)e[s]-=i[63&e[(s+3)%4]]}),p=null;return p={start:function(e,t){e&&"string"==typeof e&&(e=f.util.createBuffer(e)),n=!1,u=f.util.createBuffer(),c=t||new f.util.createBuffer,l=e,p.output=c},update:function(e){for(n||u.putBuffer(e);8<=u.length();)!function(e){var t=[];for(s=0;s<4;s++){var r=u.getInt16Le();null!==l&&(a?r^=l.getInt16Le():l.putInt16Le(r)),t.push(65535&r)}o=a?0:63;for(var n=0;n<e.length;n++)for(var i=0;i<e[n][0];i++)e[n][1](t);for(s=0;s<4;s++)null!==l&&(a?l.putInt16Le(t[s]):t[s]^=l.getInt16Le()),c.putInt16Le(t[s])}([[5,r],[1,h],[6,r],[1,h],[5,r]])},finish:function(e){var t,r=!0;return a&&(e?r=e(8,u,!a):(t=8===u.length()?8:8-u.length(),u.fillWithByte(t,t))),r&&(n=!0,p.update()),!a&&(r=0===u.length())&&(e?r=e(8,c,!a):(e=c.length())<(e=c.at(e-1))?r=!1:c.truncate(e)),r}}}f.rc2.startEncrypting=function(e,t,r){e=f.rc2.createEncryptionCipher(e,128);return e.start(t,r),e},f.rc2.createEncryptionCipher=function(e,t){return n(e,t,!0)},f.rc2.startDecrypting=function(e,t,r){e=f.rc2.createDecryptionCipher(e,128);return e.start(t,r),e},f.rc2.createDecryptionCipher=function(e,t){return n(e,t,!1)}},893:function(e,t,r){var g=r(756);r(767),r(797),r(770),r(827),r(830),r(768),r(781),r(799),r(757),r(801);var v=g.asn1,m=g.pki,C=e.exports=g.pkcs12=g.pkcs12||{},p={name:"ContentInfo",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:v.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},c={name:"PFX",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"version"},p,{name:"PFX.macData",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:v.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:v.Class.UNIVERSAL,type:v.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:v.Class.UNIVERSAL,type:v.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},f={name:"SafeBag",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:v.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:v.Class.UNIVERSAL,type:v.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},d={name:"Attribute",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:v.Class.UNIVERSAL,type:v.Type.SET,constructed:!0,capture:"values"}]},y={name:"CertBag",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:v.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:v.Class.UNIVERSAL,type:v.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function l(e,t,r,n){for(var i=[],a=0;a<e.length;a++)for(var s=0;s<e[a].safeBags.length;s++){var o=e[a].safeBags[s];void 0!==n&&o.type!==n||(null===t||void 0!==o.attributes[t]&&0<=o.attributes[t].indexOf(r))&&i.push(o)}return i}function E(e){if(e.composed||e.constructed){for(var t=g.util.createBuffer(),r=0;r<e.value.length;++r)t.putBytes(e.value[r].value);e.composed=e.constructed=!1,e.value=t.getBytes()}return e}function b(e,r,t){if(!r&&0===e.length)return[];if((e=v.fromDer(e,r)).tagClass!==v.Class.UNIVERSAL||e.type!==v.Type.SEQUENCE||!0!==e.constructed)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],i=0;i<e.value.length;i++){var a=e.value[i],s={},o=[];if(!v.validate(a,f,s,o))throw(h=new Error("Cannot read SafeBag.")).errors=o,h;var u,c,l={type:v.derToOid(s.bagId),attributes:function(e){var t={};if(void 0!==e)for(var r=0;r<e.length;++r){var n={},i=[];if(!v.validate(e[r],d,n,i)){var a=new Error("Cannot read PKCS#12 BagAttribute.");throw a.errors=i,a}var s=v.derToOid(n.oid);if(void 0!==m.oids[s]){t[m.oids[s]]=[];for(var o=0;o<n.values.length;++o)t[m.oids[s]].push(n.values[o].value)}}return t}(s.bagAttributes)};n.push(l);var h,p=s.bagValue.value[0];switch(l.type){case m.oids.pkcs8ShroudedKeyBag:if(null===(p=m.decryptPrivateKeyInfo(p,t)))throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case m.oids.keyBag:try{l.key=m.privateKeyFromAsn1(p)}catch(e){l.key=null,l.asn1=p}continue;case m.oids.certBag:u=y,c=function(){if(v.derToOid(s.certId)!==m.oids.x509Certificate){var e=new Error("Unsupported certificate type, only X.509 supported.");throw e.oid=v.derToOid(s.certId),e}var t=v.fromDer(s.cert,r);try{l.cert=m.certificateFromAsn1(t,!0)}catch(e){l.cert=null,l.asn1=t}};break;default:throw(h=new Error("Unsupported PKCS#12 SafeBag type.")).oid=l.type,h}if(void 0!==u&&!v.validate(p,u,s,o))throw(h=new Error("Cannot read PKCS#12 "+u.name)).errors=o,h;c()}return n}C.pkcs12FromAsn1=function(e,t,r){"string"==typeof t?(r=t,t=!0):void 0===t&&(t=!0);var n={};if(!v.validate(e,c,n,[]))throw(u=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.")).errors=u;var i={version:n.version.charCodeAt(0),safeContents:[],getBags:function(e){var t,r={};return"localKeyId"in e?t=e.localKeyId:"localKeyIdHex"in e&&(t=g.util.hexToBytes(e.localKeyIdHex)),void 0===t&&!("friendlyName"in e)&&"bagType"in e&&(r[e.bagType]=l(i.safeContents,null,null,e.bagType)),void 0!==t&&(r.localKeyId=l(i.safeContents,"localKeyId",t,e.bagType)),"friendlyName"in e&&(r.friendlyName=l(i.safeContents,"friendlyName",e.friendlyName,e.bagType)),r},getBagsByFriendlyName:function(e,t){return l(i.safeContents,"friendlyName",e,t)},getBagsByLocalKeyId:function(e,t){return l(i.safeContents,"localKeyId",e,t)}};if(3!==n.version.charCodeAt(0))throw(u=new Error("PKCS#12 PFX of version other than 3 not supported.")).version=n.version.charCodeAt(0),u;if(v.derToOid(n.contentType)!==m.oids.data)throw(u=new Error("Only PKCS#12 PFX in password integrity mode supported.")).oid=v.derToOid(n.contentType),u;var a=n.content.value[0];if(a.tagClass!==v.Class.UNIVERSAL||a.type!==v.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(a=E(a),n.mac){var s=null,o=0,e=v.derToOid(n.macAlgorithm);switch(e){case m.oids.sha1:s=g.md.sha1.create(),o=20;break;case m.oids.sha256:s=g.md.sha256.create(),o=32;break;case m.oids.sha384:s=g.md.sha384.create(),o=48;break;case m.oids.sha512:s=g.md.sha512.create(),o=64;break;case m.oids.md5:s=g.md.md5.create(),o=16}if(null===s)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+e);var u=new g.util.ByteBuffer(n.macSalt),e="macIterations"in n?parseInt(g.util.bytesToHex(n.macIterations),16):1,u=C.generateKey(r,u,3,e,o,s),e=g.hmac.create();if(e.start(s,u),e.update(a.value),e.getMac().getBytes()!==n.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return function(e,t,r,n){if((t=v.fromDer(t,r)).tagClass!==v.Class.UNIVERSAL||t.type!==v.Type.SEQUENCE||!0!==t.constructed)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var i=0;i<t.value.length;i++){var a=t.value[i],s={},o=[];if(!v.validate(a,p,s,o))throw(u=new Error("Cannot read ContentInfo.")).errors=o,u;var u,c={encrypted:!1},l=null,h=s.content.value[0];switch(v.derToOid(s.contentType)){case m.oids.data:if(h.tagClass!==v.Class.UNIVERSAL||h.type!==v.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");l=E(h).value;break;case m.oids.encryptedData:l=function(e,t){var r,n={},i=[];if(!v.validate(e,g.pkcs7.asn1.encryptedDataValidator,n,i))throw(r=new Error("Cannot read EncryptedContentInfo.")).errors=i,r;if((i=v.derToOid(n.contentType))!==m.oids.data)throw(r=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.")).oid=i,r;if(i=v.derToOid(n.encAlgorithm),t=m.pbe.getCipher(i,n.encParameter,t),n=E(n.encryptedContentAsn1),n=g.util.createBuffer(n.value),t.update(n),!t.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return t.output.getBytes()}(h,n),c.encrypted=!0;break;default:throw(u=new Error("Unsupported PKCS#12 contentType.")).contentType=v.derToOid(s.contentType),u}c.safeBags=b(l,r,n),e.safeContents.push(c)}}(i,a.value,t,r),i},C.toPkcs12Asn1=function(e,t,r,n){(n=n||{}).saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||n.encAlgorithm||"aes128","useMac"in n||(n.useMac=!0),"localKeyId"in n||(n.localKeyId=null),"generateLocalKeyId"in n||(n.generateLocalKeyId=!0);var i,a=n.localKeyId;null!==a?a=g.util.hexToBytes(a):n.generateLocalKeyId&&(a=t?("string"==typeof(s=g.util.isArray(t)?t[0]:t)&&(s=m.certificateFromPem(s)),(f=g.md.sha1.create()).update(v.toDer(m.certificateToAsn1(s)).getBytes()),f.digest().getBytes()):g.random.getBytes(20));var s=[];null!==a&&s.push(v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(m.oids.localKeyId).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.SET,!0,[v.create(v.Class.UNIVERSAL,v.Type.OCTETSTRING,!1,a)])])),"friendlyName"in n&&s.push(v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(m.oids.friendlyName).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.SET,!0,[v.create(v.Class.UNIVERSAL,v.Type.BMPSTRING,!1,n.friendlyName)])])),0<s.length&&(i=v.create(v.Class.UNIVERSAL,v.Type.SET,!0,s));var s=[],o=[];null!==t&&(o=g.util.isArray(t)?t:[t]);for(var u=[],c=0;c<o.length;++c){"string"==typeof(t=o[c])&&(t=m.certificateFromPem(t));var l=0===c?i:void 0,h=m.certificateToAsn1(t),l=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(m.oids.certBag).getBytes()),v.create(v.Class.CONTEXT_SPECIFIC,0,!0,[v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(m.oids.x509Certificate).getBytes()),v.create(v.Class.CONTEXT_SPECIFIC,0,!0,[v.create(v.Class.UNIVERSAL,v.Type.OCTETSTRING,!1,v.toDer(h).getBytes())])])]),l]);u.push(l)}0<u.length&&(p=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,u),p=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(m.oids.data).getBytes()),v.create(v.Class.CONTEXT_SPECIFIC,0,!0,[v.create(v.Class.UNIVERSAL,v.Type.OCTETSTRING,!1,v.toDer(p).getBytes())])]),s.push(p));var p=null;null!==e&&(y=m.wrapRsaPrivateKey(m.privateKeyToAsn1(e)),p=null===r?v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(m.oids.keyBag).getBytes()),v.create(v.Class.CONTEXT_SPECIFIC,0,!0,[y]),i]):v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(m.oids.pkcs8ShroudedKeyBag).getBytes()),v.create(v.Class.CONTEXT_SPECIFIC,0,!0,[m.encryptPrivateKeyInfo(y,r,n)]),i]),y=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[p]),y=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(m.oids.data).getBytes()),v.create(v.Class.CONTEXT_SPECIFIC,0,!0,[v.create(v.Class.UNIVERSAL,v.Type.OCTETSTRING,!1,v.toDer(y).getBytes())])]),s.push(y));var f,d,y=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,s);return n.useMac&&(f=g.md.sha1.create(),s=new g.util.ByteBuffer(g.random.getBytes(n.saltSize)),d=n.count,e=C.generateKey(r,s,3,d,20),(r=g.hmac.create()).start(f,e),r.update(v.toDer(y).getBytes()),r=r.getMac(),d=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(m.oids.sha1).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.NULL,!1,"")]),v.create(v.Class.UNIVERSAL,v.Type.OCTETSTRING,!1,r.getBytes())]),v.create(v.Class.UNIVERSAL,v.Type.OCTETSTRING,!1,s.getBytes()),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,v.integerToDer(d).getBytes())])),v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,v.integerToDer(3).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(m.oids.data).getBytes()),v.create(v.Class.CONTEXT_SPECIFIC,0,!0,[v.create(v.Class.UNIVERSAL,v.Type.OCTETSTRING,!1,v.toDer(y).getBytes())])]),d])},C.generateKey=g.pbe.generatePkcs12Key},894:function(e,t,r){var f=r(756);r(771),r(757);var n=e.exports=f.sha512=f.sha512||{};f.md.sha512=f.md.algorithms.sha512=n;e=f.sha384=f.sha512.sha384=f.sha512.sha384||{};e.create=function(){return n.create("SHA-384")},f.md.sha384=f.md.algorithms.sha384=e,f.sha512.sha256=f.sha512.sha256||{create:function(){return n.create("SHA-512/256")}},f.md["sha512/256"]=f.md.algorithms["sha512/256"]=f.sha512.sha256,f.sha512.sha224=f.sha512.sha224||{create:function(){return n.create("SHA-512/224")}},f.md["sha512/224"]=f.md.algorithms["sha512/224"]=f.sha512.sha224,n.create=function(u){if(i||(d=String.fromCharCode(128),d+=f.util.fillString(String.fromCharCode(0),128),_=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],(a={})["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],a["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],a["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],a["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],i=!0),!((u=void 0===u?"SHA-512":u)in a))throw new Error("Invalid SHA-512 algorithm: "+u);for(var r=a[u],c=null,l=f.util.createBuffer(),h=new Array(80),e=0;e<80;++e)h[e]=new Array(2);var t=64;switch(u){case"SHA-384":t=48;break;case"SHA-512/256":t=32;break;case"SHA-512/224":t=28}var p={algorithm:u.replace("-","").toLowerCase(),blockLength:128,digestLength:t,messageLength:0,fullMessageLength:null,messageLengthSize:16,start:function(){p.messageLength=0,p.fullMessageLength=p.messageLength128=[];for(var e=p.messageLengthSize/4,t=0;t<e;++t)p.fullMessageLength.push(0);for(l=f.util.createBuffer(),c=new Array(r.length),t=0;t<r.length;++t)c[t]=r[t].slice(0);return p}};return p.start(),p.update=function(e,t){var r=(e="utf8"===t?f.util.encodeUtf8(e):e).length;p.messageLength+=r;for(var r=[r/4294967296>>>0,r>>>0],n=p.fullMessageLength.length-1;0<=n;--n)p.fullMessageLength[n]+=r[1],r[1]=r[0]+(p.fullMessageLength[n]/4294967296>>>0),p.fullMessageLength[n]=p.fullMessageLength[n]>>>0,r[0]=r[1]/4294967296>>>0;return l.putBytes(e),y(c,h,l),(2048<l.read||0===l.length())&&l.compact(),p},p.digest=function(){var e=f.util.createBuffer();e.putBytes(l.bytes());var t,r=p.fullMessageLength[p.fullMessageLength.length-1]+p.messageLengthSize&p.blockLength-1;e.putBytes(d.substr(0,p.blockLength-r));for(var n=8*p.fullMessageLength[0],i=0;i<p.fullMessageLength.length-1;++i)n+=(t=8*p.fullMessageLength[i+1])/4294967296>>>0,e.putInt32(n>>>0),n=t>>>0;e.putInt32(n);for(var a=new Array(c.length),i=0;i<c.length;++i)a[i]=c[i].slice(0);y(a,h,e);var s=f.util.createBuffer(),o="SHA-512"===u?a.length:"SHA-384"===u?a.length-2:a.length-4;for(i=0;i<o;++i)s.putInt32(a[i][0]),i===o-1&&"SHA-512/224"===u||s.putInt32(a[i][1]);return s},p};var d=null,i=!1,_=null,a=null;function y(e,t,r){for(var n,i,a,s,o,u,c,l,h,p,f,d,y,g,v,m,C,E,b,S,T,I,A,w,k,B=r.length();128<=B;){for(T=0;T<16;++T)t[T][0]=r.getInt32()>>>0,t[T][1]=r.getInt32()>>>0;for(;T<80;++T)n=(((I=(w=t[T-2])[0])>>>19|(A=w[1])<<13)^(A>>>29|I<<3)^I>>>6)>>>0,i=((I<<13|A>>>19)^(A<<3|I>>>29)^(I<<26|A>>>6))>>>0,a=(((I=(k=t[T-15])[0])>>>1|(A=k[1])<<31)^(I>>>8|A<<24)^I>>>7)>>>0,w=t[T-7],k=t[T-16],A=i+w[1]+(s=((I<<31|A>>>1)^(I<<24|A>>>8)^(I<<25|A>>>7))>>>0)+k[1],t[T][0]=n+w[0]+a+k[0]+(A/4294967296>>>0)>>>0,t[T][1]=A>>>0;for(o=e[0][0],u=e[0][1],c=e[1][0],l=e[1][1],h=e[2][0],p=e[2][1],f=e[3][0],d=e[3][1],y=e[4][0],g=e[4][1],v=e[5][0],m=e[5][1],C=e[6][0],E=e[6][1],b=e[7][0],S=e[7][1],T=0;T<80;++T)A=S+(((y<<18|g>>>14)^(y<<14|g>>>18)^(g<<23|y>>>9))>>>0)+((E^g&(m^E))>>>0)+_[T][1]+t[T][1],n=b+(((y>>>14|g<<18)^(y>>>18|g<<14)^(g>>>9|y<<23))>>>0)+((C^y&(v^C))>>>0)+_[T][0]+t[T][0]+(A/4294967296>>>0)>>>0,i=A>>>0,a=(((o>>>28|u<<4)^(u>>>2|o<<30)^(u>>>7|o<<25))>>>0)+((o&c|h&(o^c))>>>0)+((A=(((o<<4|u>>>28)^(u<<30|o>>>2)^(u<<25|o>>>7))>>>0)+((u&l|p&(u^l))>>>0))/4294967296>>>0)>>>0,s=A>>>0,b=C,S=E,C=v,E=m,v=y,m=g,y=f+n+((A=d+i)/4294967296>>>0)>>>0,g=A>>>0,f=h,d=p,h=c,p=l,c=o,l=u,o=n+a+((A=i+s)/4294967296>>>0)>>>0,u=A>>>0;A=e[0][1]+u,e[0][0]=e[0][0]+o+(A/4294967296>>>0)>>>0,e[0][1]=A>>>0,A=e[1][1]+l,e[1][0]=e[1][0]+c+(A/4294967296>>>0)>>>0,e[1][1]=A>>>0,A=e[2][1]+p,e[2][0]=e[2][0]+h+(A/4294967296>>>0)>>>0,e[2][1]=A>>>0,A=e[3][1]+d,e[3][0]=e[3][0]+f+(A/4294967296>>>0)>>>0,e[3][1]=A>>>0,A=e[4][1]+g,e[4][0]=e[4][0]+y+(A/4294967296>>>0)>>>0,e[4][1]=A>>>0,A=e[5][1]+m,e[5][0]=e[5][0]+v+(A/4294967296>>>0)>>>0,e[5][1]=A>>>0,A=e[6][1]+E,e[6][0]=e[6][0]+C+(A/4294967296>>>0)>>>0,e[6][1]=A>>>0,A=e[7][1]+S,e[7][0]=e[7][0]+b+(A/4294967296>>>0)>>>0,e[7][1]=A>>>0,B-=128}}},895:function(e,t,r){e.exports=r(896).default,e.exports.default=e.exports},896:function(e,s,o){"use strict";!function(r){Object.defineProperty(s,"__esModule",{value:!0});var t=o(897);function e(e,t){return void 0===t&&(t="utf8"),r.isBuffer(e)?i(e.toString("base64")):i(r.from(e,t).toString("base64"))}function n(e){return e=e.toString(),t.default(e).replace(/\-/g,"+").replace(/_/g,"/")}function i(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}var a=e;a.encode=e,a.decode=function(e,t){return void 0===t&&(t="utf8"),r.from(n(e),"base64").toString(t)},a.toBase64=n,a.fromBase64=i,a.toBuffer=function(e){return r.from(n(e),"base64")},s.default=a}.call(this,o(360).Buffer)},897:function(e,t,r){"use strict";!function(s){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.length,r=t%4;if(!r)return e;var n=t,i=4-r,a=s.alloc(t+i);for(a.write(e);i--;)a.write("=",n++);return a.toString()}}.call(this,r(360).Buffer)},898:function(e,t,r){"use strict";t.encode=function(e){e=encodeURIComponent(e||"");return e.replace(/%([0-9a-fA-F]{2})/g,function(e,t){return t=parseInt(t,16),String.fromCharCode(t)})},t.decode=function(e){e=(e||"").replace(/[\u0080-\u00ff]/g,function(e){return"%"+(256|e.charCodeAt(0)).toString(16).substring(1)});return decodeURIComponent(e)}},899:function(e,t,r){var n=r(900),i=r(901),r=i;r.v1=n,r.v4=i,e.exports=r},900:function(e,t,r){var l,h,p=r(831),f=r(832),d=0,y=0;e.exports=function(e,t,r){var n=t&&r||0,i=t||[],a=(e=e||{}).node||l,s=void 0!==e.clockseq?e.clockseq:h;null!=a&&null!=s||(u=p(),null==a&&(a=l=[1|u[0],u[1],u[2],u[3],u[4],u[5]]),null==s&&(s=h=16383&(u[6]<<8|u[7])));var o=void 0!==e.msecs?e.msecs:(new Date).getTime(),r=void 0!==e.nsecs?e.nsecs:y+1,u=o-d+(r-y)/1e4;if(u<0&&void 0===e.clockseq&&(s=s+1&16383),1e4<=(r=(u<0||d<o)&&void 0===e.nsecs?0:r))throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");d=o,h=s;r=(1e4*(268435455&(o+=122192928e5))+(y=r))%4294967296;i[n++]=r>>>24&255,i[n++]=r>>>16&255,i[n++]=r>>>8&255,i[n++]=255&r;o=o/4294967296*1e4&268435455;i[n++]=o>>>8&255,i[n++]=255&o,i[n++]=o>>>24&15|16,i[n++]=o>>>16&255,i[n++]=s>>>8|128,i[n++]=255&s;for(var c=0;c<6;++c)i[n+c]=a[c];return t||f(i)}},901:function(e,t,r){var s=r(831),o=r(832);e.exports=function(e,t,r){var n=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||s)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var a=0;a<16;++a)t[n+a]=i[a];return t||o(i)}},902:function(e,t,r){var n=r(903);e.exports=function(e){return null!=e&&e.length?n(e,1):[]}},903:function(e,t,r){var c=r(904),l=r(905);e.exports=function e(t,r,n,i,a){var s=-1,o=t.length;for(n=n||l,a=a||[];++s<o;){var u=t[s];0<r&&n(u)?1<r?e(u,r-1,n,i,a):c(a,u):i||(a[a.length]=u)}return a}},904:function(e,t){e.exports=function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}},905:function(e,t,r){var n=r(906),i=r(366),a=r(155),s=n?n.isConcatSpreadable:void 0;e.exports=function(e){return a(e)||i(e)||!!(s&&e&&e[s])}},906:function(e,t,r){r=r(361).Symbol;e.exports=r},907:function(e,t,r){var n=r(790),i=r(908),a=r(871),s=r(910),a=a(function(e){var t=n(e,s);return t.length&&t[0]===e[0]?i(t):[]});e.exports=a},908:function(e,t,r){var g=r(983),v=r(1085),m=r(1086),C=r(790),E=r(909),b=r(984),S=Math.min;e.exports=function(e,t,r){for(var n=r?m:v,i=e[0].length,a=e.length,s=a,o=Array(a),u=1/0,c=[];s--;){var l=e[s];s&&t&&(l=C(l,E(t))),u=S(l.length,u),o[s]=!r&&(t||120<=i&&120<=l.length)?new g(s&&l):void 0}var l=e[0],h=-1,p=o[0];e:for(;++h<i&&c.length<u;){var f=l[h],d=t?t(f):f,f=r||0!==f?f:0;if(!(p?b(p,d):n(c,d,r))){for(s=a;--s;){var y=o[s];if(!(y?b(y,d):n(e[s],d,r)))continue e}p&&p.push(d),c.push(f)}}return c}},909:function(e,t){e.exports=function(t){return function(e){return t(e)}}},910:function(e,t,r){var n=r(1081);e.exports=function(e){return n(e)?e:[]}},911:function(e,t,r){var n=r(363),i=r(912),a=r(913),s=r(365);e.exports=function(e,t){return t=n(t,e),null==(e=a(e,t))||delete e[s(i(t))]}},912:function(e,t){e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},913:function(e,t,r){var n=r(367),i=r(855);e.exports=function(e,t){return t.length<2?e:n(e,i(t,0,-1))}},914:function(e,t,r){var n=r(1082);e.exports=function(e){return n(e)?void 0:e}},915:function(e,t,r){var n=r(916),i=r(917);e.exports=function(r,e){return n(r,e,function(e,t){return i(r,t)})}},916:function(e,t,r){var u=r(367),c=r(968),l=r(363);e.exports=function(e,t,r){for(var n=-1,i=t.length,a={};++n<i;){var s=t[n],o=u(e,s);r(o,s)&&c(a,l(s,e),o)}return a}},917:function(e,t,r){var n=r(918),i=r(919);e.exports=function(e,t){return null!=e&&i(e,t,n)}},918:function(e,t){e.exports=function(e,t){return null!=e&&t in Object(e)}},919:function(e,t,r){var o=r(363),u=r(366),c=r(155),l=r(873),h=r(372),p=r(365);e.exports=function(e,t,r){for(var n=-1,i=(t=o(t,e)).length,a=!1;++n<i;){var s=p(t[n]);if(!(a=null!=e&&r(e,s)))break;e=e[s]}return a||++n!=i?a:!!(i=null==e?0:e.length)&&h(i)&&l(s,i)&&(c(e)||u(e))}},920:function(e,t,p){"use strict";!function(g){var v=p(761),m=p(804),o=p(785),a=p(758),s=p(776),C=p(759);function u(e){if(16!==e.length)throw new Error("invalid iv")}function r(i){return v.setupFallback(function(r,e,n){try{u(n)}catch(e){return Promise.reject(e)}e=Promise.resolve(e);return e.then(function(e){var t=v.nodeCrypto.createCipheriv("AES-"+i+"-CBC",r,n);return g.concat([t.update(e),t.final()])})},function(e,t,r){try{u(r)}catch(e){return Promise.reject(e)}var n=Promise.resolve();return(n=(n=n.then(function(){return v.subtleCrypto.importKey("raw",e,{name:"AES-CBC"},!0,["encrypt"])})).then(function(e){return v.subtleCrypto.encrypt({name:"AES-CBC",iv:r},e,t)})).then(function(e){return g.from(e)})},function(t,r,n){try{u(n)}catch(t){return Promise.reject(t)}var e=Promise.resolve();return e.then(function(){var e=a.cipher.createCipher("AES-CBC",new s(t));return e.start({iv:new s(n)}),e.update(new s(r)),e.finish()?g.from(e.output.bytes(),"binary"):Promise.reject(new Error("encryption failed"))})})}function n(i){return v.setupFallback(function(t,r,n){try{u(n)}catch(e){return Promise.reject(e)}var e=Promise.resolve();return e.then(function(){var e=v.nodeCrypto.createDecipheriv("AES-"+i+"-CBC",t,n);return g.concat([e.update(r),e.final()])})},function(e,t,r){try{u(r)}catch(e){return Promise.reject(e)}var n=Promise.resolve();return(n=(n=n.then(function(){return v.subtleCrypto.importKey("raw",e,{name:"AES-CBC"},!0,["decrypt"])})).then(function(e){return v.subtleCrypto.decrypt({name:"AES-CBC",iv:r},e,t)})).then(function(e){return g.from(e)})},function(t,r,n){try{u(n)}catch(t){return Promise.reject(t)}var e=Promise.resolve();return e.then(function(){var e=a.cipher.createDecipher("AES-CBC",new s(t));return e.start({iv:new s(n)}),e.update(new s(r)),e.finish()?g.from(e.output.bytes(),"binary"):Promise.reject(new Error("encryption failed"))})})}function h(e,t){if(t<<1!=e.length<<3)throw new Error("invalid encryption key size")}var c=g.from("Encryption","utf8"),l=g.from("Integrity","utf8"),E=g.from(".","utf8");function b(e,t,r,n){var i=8*e.length,a=i/2,s=(s=(s=Promise.resolve()).then(function(){return g.concat([v.int32ToBuffer(1),e,v.int32ToBuffer(a),g.from(t,"utf8"),r,n,c])})).then(function(e){return o["SHA-"+i].digest(e).then(function(e){return e.slice(0,a/8)})});return Promise.resolve(s)}function S(e,t,r,n){var i=8*e.length,a=i,s=(s=(s=Promise.resolve()).then(function(){return g.concat([v.int32ToBuffer(1),e,v.int32ToBuffer(a),g.from(t,"utf8"),r,n,l])})).then(function(e){return o["SHA-"+i].digest(e).then(function(e){return e.slice(0,a/8)})});return Promise.resolve(s)}var i={};["A128CBC-HS256","A192CBC-HS384","A256CBC-HS512"].forEach(function(e){var u,c,o,l,t=parseInt(/A(\d+)CBC-HS(\d+)?/g.exec(e)[1]);i[e]={encrypt:(l=r(o=t),function(e,t,r){try{h(e,o)}catch(e){return Promise.reject(e)}var n=e.slice(o/8),i=e.slice(0,o/8),a=r.iv||g.alloc(0),s=r.aad||r.adata||g.alloc(0),t=l(n,t,a);return t.then(function(t){var e=g.concat([s,a,t,v.int64ToBuffer(8*s.length)]);return m["HS"+2*o].sign(i,e,{length:o}).then(function(e){e=e.mac.slice(0,o/8);return{data:t,tag:e}})})}),decrypt:(c=n(u=t),function(e,t,r){try{h(e,u)}catch(e){return Promise.reject(e)}var n=e.slice(u/8),i=e.slice(0,u/8),a=r.iv||g.alloc(0),s=r.aad||r.adata||g.alloc(0),o=r.tag||r.mac||g.alloc(0),r=Promise.resolve();return(r=r.then(function(){var e=g.concat([s,a,t,v.int64ToBuffer(8*s.length)]);return m["HS"+2*u].verify(i,e,o,{length:u}).then(function(){return t},function(){throw new Error("mac check failed")})})).then(function(){return c(n,t,a)})})}}),["A128CBC+HS256","A192CBC+HS384","A256CBC+HS512"].forEach(function(e){var h,p,f,l,d,y,t=parseInt(/A(\d+)CBC\+HS(\d+)?/g.exec(e)[1]);i[e]={encrypt:(d=e,y=r(l=t),function(e,t,r){var n,i,a=r.epu||v.int32ToBuffer(0),s=r.epv||v.int32ToBuffer(0),o=r.iv||g.alloc(0),u=r.aad||r.adata||g.alloc(0),c=r.kdata||g.alloc(0),s=[b(e,d,a,s),S(e,d,a,s)],s=Promise.all(s).then(function(e){n=e[0],i=e[1]});return(s=(s=s.then(function(){return y(n,t,o)})).then(function(e){var t=g.concat([u,E,g.from(c),E,g.from(C.base64url.encode(o),"utf8"),E,g.from(C.base64url.encode(e),"utf8")]);return Promise.all([Promise.resolve(e),m["HS"+2*l].sign(i,t,{length:l})])})).then(function(e){return{data:e[0],tag:e[1].mac}})}),decrypt:(p=e,f=n(h=t),function(e,t,r){var n,i,a=r.epu||v.int32ToBuffer(0),s=r.epv||v.int32ToBuffer(0),o=r.iv||g.alloc(0),u=r.aad||r.adata||g.alloc(0),c=r.kdata||g.alloc(0),l=r.tag||r.mac||g.alloc(0),s=[b(e,p,a,s),S(e,p,a,s)],s=Promise.all(s).then(function(e){n=e[0],i=e[1]});return(s=s.then(function(){var e=g.concat([u,E,g.from(c),E,g.from(C.base64url.encode(o),"utf8"),E,g.from(C.base64url.encode(t),"utf8")]);try{return m["HS"+2*h].verify(i,e,l,{loose:!1})}catch(e){throw new Error("mac check failed")}})).then(function(){return f(n,t,o)})})}}),e.exports=i}.call(this,p(360).Buffer)},921:function(e,t,r){"use strict";!function(p){var o=r(761),f=r(759),d=r(765),y=r(922);var u={};["A128GCM","A192GCM","A256GCM","A128GCMKW","A192GCMKW","A256GCMKW"].forEach(function(e){var n,r,i,t=/A(\d+)GCM(KW)?/g.exec(e),a=parseInt(t[1]),t="KW"===t[2];function l(e,t,r){if(n!==e.length<<3)throw new Error("invalid key size");if(12!==t.length)throw new Error("invalid iv");if(16!==r.length)throw new Error("invalid tag length")}function s(e,t){if(r!==e.length<<3)throw new Error("invalid key size");if(!t&&!i)throw new Error("invalid iv");if(t&&12!==t.length)throw new Error("invalid iv")}function h(e){var t,r;return i&&(t=f.base64url.encode(e.iv),r=f.base64url.encode(e.tag),e={data:e.data,header:{iv:t,tag:r}}),e}u[e]={encrypt:(r=a,i=t,o.setupFallback(function(e,t,r){var n=r.iv,i=r.aad||r.adata||p.alloc(0);try{s(e,n)}catch(e){return Promise.reject(e)}var a,n=n||f.randomBytes(12),r="aes-"+8*e.length+"-gcm";try{a=o.nodeCrypto.createCipheriv(r,e,n)}catch(e){throw new Error("unsupported algorithm: "+r)}if("function"!=typeof a.setAAD)throw new Error("unsupported algorithm: "+r);return i.length&&a.setAAD(i),h({data:p.concat([a.update(t),a.final()]),iv:n,tag:a.getAuthTag()})},function(e,t,r){var n=r.iv,i=r.aad||r.adata||p.alloc(0);try{s(e,n)}catch(e){return Promise.reject(e)}var n=n||f.randomBytes(12),a={name:"AES-GCM"};return o.subtleCrypto.importKey("raw",e,a,!0,["encrypt"]).then(function(e){return a.iv=n,a.tagLength=128,i.length&&(a.additionalData=i),o.subtleCrypto.encrypt(a,e,t)}).then(function(e){var t=e.byteLength-16,r=e.slice(t),r=p.from(r),t=e.slice(0,t);return h({data:p.from(t),iv:n,tag:r})})},function(e,o,t){var u,c,l=t.iv,t=t.aad||t.adata||p.alloc(0);try{s(e,l)}catch(e){return Promise.reject(e)}return l=l||f.randomBytes(12),u=y.createCipher({key:e,iv:l,additionalData:t}),c=p.alloc(o.length),new Promise(function(r,n){var i=d.CHUNK_SIZE,a=0,s=0;!function e(){var t=Math.min(i,o.length-s);a+=u.update(o,s,t,c,a),s+=t,o.length>s?setTimeout(e,0):(a+=u.finish(c,a))===o.length?(t=u.tag,r(h({data:c,iv:l,tag:t}))):n(new Error("encryption failed"))}()})})),decrypt:(n=a,o.setupFallback(function(e,t,r){var n=r.aad||r.adata||p.alloc(0),i=r.iv||p.alloc(0),a=r.tag||r.mac||p.alloc(0);try{l(e,i,a)}catch(e){return Promise.reject(e)}var s,r="aes-"+8*e.length+"-gcm";try{s=o.nodeCrypto.createDecipheriv(r,e,i)}catch(e){throw new Error("unsupported algorithm: "+r)}if("function"!=typeof s.setAAD)throw new Error("unsupported algorithm: "+r);s.setAuthTag(a),n.length&&s.setAAD(n);try{return p.concat([s.update(t),s.final()])}catch(e){throw new Error("decryption failed")}},function(e,t,r){var n=r.aad||r.adata||p.alloc(0),i=r.iv||p.alloc(0),a=r.tag||r.mac||p.alloc(0);try{l(e,i,a)}catch(e){return Promise.reject(e)}var s={name:"AES-GCM"};return o.subtleCrypto.importKey("raw",e,s,!0,["decrypt"]).then(function(e){return s.iv=i,s.tagLength=128,n.length&&(s.additionalData=n),t=p.concat([t,a],t.length+a.length),o.subtleCrypto.decrypt(s,e,t)}).then(function(e){return p.from(e)})},function(e,o,t){var u,c,r=t.aad||t.adata||p.alloc(0),n=t.iv||p.alloc(0),t=t.tag||t.mac||p.alloc(0);try{l(e,n,t)}catch(e){return Promise.reject(e)}return u=y.createDecipher({key:e,iv:n,additionalData:r,tag:t}),c=p.alloc(o.length),new Promise(function(r,n){var i=d.CHUNK_SIZE,a=0,s=0;!function e(){var t=Math.min(i,o.length-s);if(a+=u.update(o,s,t,c,a),s+=t,o.length>s)setTimeout(e,0);else{try{a+=u.finish(c,a)}catch(e){return void n(new Error("decryption failed"))}a===o.length?r(c):n(new Error("decryption failed"))}}()})}))}}),e.exports=u}.call(this,r(360).Buffer)},922:function(e,t,h){"use strict";!function(i){var r=h(805),n=h(758),a=h(923),s=h(836),o=h(786),u=h(776),c=h(927);function l(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=this.blockSize||16}e.exports={createCipher:function(e){var t=new n.aes.Algorithm("AES-GCM",l);return t.initialize({key:new u(e.key)}),t.mode.start(e),t.mode},createDecipher:function(e){var t=new n.aes.Algorithm("AES-GCM",l);return t.initialize({key:new u(e.key)}),t.mode._decrypt=!0,t.mode.start(e),t.mode}},l.prototype.start=function(e){if(this.tag=null,!("iv"in(e=e||{})))throw new Error("Gcm needs ParametersWithIV or AEADParameters");if(this.nonce=e.iv,null==this.nonce||this.nonce.length<1)throw new Error("IV must be at least 1 byte");this.tagLength=16,"tag"in e&&(this.tag=i.from(e.tag));var t=this._decrypt?this.blockSize+this.tagLength:this.blockSize;this.bufBlock=i.alloc(t);t=e.multiplier;null==t&&(t=new a["8k"]),this.multiplier=t,this.H=this.zeroBlock(),c.encrypt(this.cipher,this.H,0,this.H,0),this.multiplier.init(this.H),this.exp=null,this.J0=this.zeroBlock(),12===this.nonce.length?(this.nonce.copy(this.J0,0,0,this.nonce.length),this.J0[this.blockSize-1]=1):(this.gHASH(this.J0,this.nonce,this.nonce.length),t=this.zeroBlock(),o.longToBigEndian(new r(this.nonce.length).multiply(8),t,8),this.gHASHBlock(this.J0,t)),this.S=this.zeroBlock(),this.SAt=this.zeroBlock(),this.SAtPre=this.zeroBlock(),this.atBlock=this.zeroBlock(),this.atBlockPos=0,this.atLength=r.ZERO,this.atLengthPre=r.ZERO,this.counter=i.from(this.J0),this.bufOff=0,this.totalLength=r.ZERO,"additionalData"in e&&this.processAADBytes(e.additionalData,0,e.additionalData.length)},l.prototype.update=function(e,t,r,n,i){for(var a=0;0<r;){var s=Math.min(r,this.bufBlock.length-this.bufOff);e.copy(this.bufBlock,this.bufOff,t,t+s),r-=s,t+=s,this.bufOff+=s,this.bufOff===this.bufBlock.length&&(this.outputBlock(n,i+a),a+=this.blockSize)}return a},l.prototype.finish=function(e,t){var r=0;this._decrypt&&(r+=this.update(this.tag,0,this.tag.length,e,t)),this.totalLength.isZero()&&this.initCipher();var n=this.bufOff;if(this._decrypt){if(n<this.tagLength)throw new Error("data too short");n-=this.tagLength}0<n&&(this.gCTRPartial(this.bufBlock,0,n,e,t+r),r+=n),this.atLength=this.atLength.add(this.atBlockPos);n=this.zeroBlock();o.longToBigEndian(this.atLength.multiply(8),n,0),o.longToBigEndian(this.totalLength.multiply(8),n,8),this.gHASHBlock(this.S,n);n=i.alloc(this.blockSize);if(c.encrypt(this.cipher,this.J0,0,n,0),this.xor(n,this.S),this._decrypt){if(!s.arrayEqual(this.tag,n))throw new Error("mac check in Gcm failed")}else this.tag=i.alloc(this.tagLength),n.copy(this.tag,0,0,this.tagLength);return r},l.prototype.initCipher=function(){this.atLength.greaterThan(r.ZERO)&&(this.SAt.copy(this.SAtPre,0,0,this.blockSize),this.atLengthPre=this.atLength.add(r.ZERO)),0<this.atBlockPos&&(this.gHASHPartial(this.SAtPre,this.atBlock,0,this.atBlockPos),this.atLengthPre=this.atLengthPre.add(this.atBlockPos)),this.atLengthPre.greaterThan(r.ZERO)&&this.SAtPre.copy(this.S,0,0,this.blockSize)},l.prototype.outputBlock=function(e,t){this.totalLength.isZero()&&this.initCipher(),this.gCTRBlock(this.bufBlock,e,t),this._decrypt?(this.bufBlock.copy(this.bufBlock,0,this.blockSize,this.blockSize+this.tagLength),this.bufOff=this.tagLength):this.bufOff=0},l.prototype.processAADBytes=function(e,t,r){for(var n=0;n<r;++n)this.atBlock[this.atBlockPos]=e[t+n],++this.atBlockPos===this.blockSize&&(this.gHASHBlock(this.SAt,this.atBlock),this.atBlockPos=0,this.atLength=this.atLength.add(this.blockSize))},l.prototype.getNextCounterBlock=function(){for(var e=15;12<=e;--e){var t=this.counter[e]+1&255;if(0!=(this.counter[e]=t))break}var r=i.alloc(this.blockSize);return c.encrypt(this.cipher,this.counter,0,r,0),r},l.prototype.gCTRBlock=function(e,t,r){var n=this.getNextCounterBlock();this.xor(n,e),n.copy(t,r,0,this.blockSize),this.gHASHBlock(this.S,this._decrypt?e:n),this.totalLength=this.totalLength.add(this.blockSize)},l.prototype.gCTRPartial=function(e,t,r,n,i){var a=this.getNextCounterBlock();this.xor(a,e,t,r),a.copy(n,i,0,r),this.gHASHPartial(this.S,this._decrypt?e:a,0,r),this.totalLength=this.totalLength.add(r)},l.prototype.gHASHBlock=function(e,t){this.xor(e,t),this.multiplier.multiplyH(e)},l.prototype.gHASHPartial=function(e,t,r,n){this.xor(e,t,r,n),this.multiplier.multiplyH(e)},l.prototype.xor=function(e,t,r,n){switch(arguments.length){case 2:for(var i=15;0<=i;--i)e[i]^=t[i];break;case 4:for(;0<n--;)e[n]^=t[r+n];break;default:throw new TypeError("Expected 2 or 4 arguments.")}return e},l.prototype.zeroBlock=function(){return i.alloc(16)}}.call(this,h(360).Buffer)},923:function(e,t,r){"use strict";var i=r(836),a=r(786);function n(){this.H=[],this.M=null}n.prototype.init=function(e){var t,r,n;if(null==this.M)for(this.M=[],t=0;t<32;++t)for(this.M[t]=[],r=0;r<16;++r)for(this.M[t][r]=[],n=0;n<4;++n)this.M[t][r][n]=0;else if(i.arrayEqual(this.H,e))return;for(this.H=e.slice(),i.asInts(e,this.M[1][8]),r=4;1<=r;r>>=1)i.multiplyP(this.M[1][r+r],this.M[1][r]);for(i.multiplyP(this.M[1][1],this.M[0][8]),r=4;1<=r;r>>=1)i.multiplyP(this.M[0][r+r],this.M[0][r]);for(t=0;;){for(r=2;r<16;r+=r)for(n=1;n<r;++n)i.xor(this.M[t][r],this.M[t][n],this.M[t][r+n]);if(32==++t)return;if(1<t)for(r=8;0<r;r>>=1)i.multiplyP8(this.M[t-2][r],this.M[t][r])}},n.prototype.multiplyH=function(e){for(var t=[],r=15;0<=r;--r){var n=this.M[r+r][15&e[r]];t[0]^=n[0],t[1]^=n[1],t[2]^=n[2],t[3]^=n[3],n=this.M[r+r+1][(240&e[r])>>>4],t[0]^=n[0],t[1]^=n[1],t[2]^=n[2],t[3]^=n[3]}a.intToBigEndian(t,e,0)},e.exports={"8k":n}},924:function(e,t,r){var a=r(925),s=r(970);e.exports=function(e,t,r,n){var i=null==e?0:e.length;return i?(r&&"number"!=typeof r&&s(e,t,r)&&(r=0,n=i),a(e,t,r,n)):[]}},925:function(e,t,r){var a=r(787),s=r(926);e.exports=function(e,t,r,n){var i=e.length;for((r=a(r))<0&&(r=i<-r?0:i+r),(n=void 0===n||i<n?i:a(n))<0&&(n+=i),n=n<r?0:s(n);r<n;)e[r++]=t;return e}},926:function(e,t,r){var n=r(859),i=r(787);e.exports=function(e){return e?n(i(e),0,4294967295):0}},927:function(e,t,r){"use strict";var o=r(786);e.exports={encrypt:function(e,t,r,n,i){var a=new Array(4),s=new Array(4);o.bigEndianToInt(t,r,a),e.encrypt(a,s),o.intToBigEndian(s,n,i)}}},928:function(e,t,r){"use strict";e.exports={dir:{encrypt:function(e){return Promise.resolve({data:e,once:!0,direct:!0})},decrypt:function(e){return Promise.resolve(e)}}}},929:function(e,t,n){"use strict";!function(o){var s=n(766),u=n(759),c=n(807),l=n(840),h=n(837),r=n(806),p=n(761),f=n(765),d=n(764),y=n(834),g=n(835);function v(e){switch(e){case"P-256":return"SHA-256";case"P-384":return"SHA-384";case"P-521":return"SHA-512";default:throw new Error("unsupported curve: "+e)}}var m=e.exports={};function C(e,t,r){function n(e){return o.concat([p.int32ToBuffer(e.length),e])}var i=r.algorithm||"",a=f.KEYLENGTH[i],s=u.asBuffer(r.apu||"","base64url"),r=u.asBuffer(r.apv||"","base64url"),a={public:t,length:a/8,hash:"SHA-256",otherInfo:o.concat([n(o.from(i,"utf8")),n(s),n(r),p.int32ToBuffer(a)])};return m["ECDH-CONCAT"].derive(e,a)}["ECDH","ECDH-HKDF","ECDH-CONCAT"].forEach(function(e){var i,a,t=/^ECDH(?:-(\w+))?$/g.exec(e||"")[1],r=m[e]=m[e]||{};switch(t||""){case"CONCAT":r.derive=function(e,t){var r;t=t||{};try{if(!(r=t.hash||v(e.crv)))throw new Error("invalid hash: "+r);r.toUpperCase()}catch(e){return Promise.reject(e)}var n=["public"];return m.ECDH.derive(e,g(t,n)).then(function(e){return h["CONCAT-"+r].derive(e,y(t,n))})};break;case"HKDF":r.derive=function(e,t){var r;t=t||{};try{if(!(r=t.hash||v(e.crv)))throw new Error("invalid hash: "+r);r.toUpperCase()}catch(e){return Promise.reject(e)}var n=["public"];return m.ECDH.derive(e,g(t,n)).then(function(e){return l["HKDF-"+r].derive(e,y(t,n))})};break;case"":r.derive=(i={name:"ECDH"},a=function(e,t){var r=e&&c.convertToForge(e,!0);if(!r||!r.isValid())return Promise.reject(new Error("invalid EC public key"));switch(t){case"jwk":r=c.convertToJWK(e,!0);break;case"buffer":r=c.convertToBuffer(e,!0)}return Promise.resolve(r)},p.setupFallback(function(e,t){if("function"!=typeof p.nodeCrypto.createECDH)throw new Error("unsupported algorithm: ECDH");var r,n=(t=t||{}).length||0;switch(e.crv){case"P-256":r="prime256v1";break;case"P-384":r="secp384r1";break;case"P-521":r="secp521r1";break;default:return Promise.reject(new Error("invalid curve: "+r))}var i=c.convertToBuffer(e,!1);return a(t.public,"buffer").then(function(e){var t=p.nodeCrypto.createECDH(r);t.setPrivateKey(i);e=t.computeSecret(e);if(n){if(e.length<n)return Promise.reject(new Error("key length too large: "+n));e=e.slice(0,n)}return e})},function(e,t){e=e||{};var r=(t=t||{}).length||0,n=s(d(i),{namedCurve:e.crv}),r=r||e.d.length,e=c.convertToJWK(e,!1),e=p.subtleCrypto.importKey("jwk",e,n,!1,["deriveBits"]),t=(t=a(t.public,"jwk")).then(function(e){return p.subtleCrypto.importKey("jwk",e,n,!1,[])});return Promise.all([e,t]).then(function(e){var t=e[0],e=e[1],e=s(d(i),{public:e});return p.subtleCrypto.deriveBits(e,t,8*r)}).then(function(e){return o.from(e)})},function(e,t){var r=(t=t||{}).length||0,n=c.convertToForge(e,!1);return a(t.public,"forge").then(function(e){e=n.computeSecret(e);if(r){if(e.length<r)return Promise.reject(new Error("key length too large: "+r));e=e.slice(0,r)}return e})}));break;default:r.derive=null}}),["ECDH-ES","ECDH-ES+A128KW","ECDH-ES+A192KW","ECDH-ES+A256KW"].forEach(function(e){var i,a,t=/^ECDH-ES(?:\+(.+))?/g.exec(e||"")[1],e=m[e]=m[e]||{};t?(t=r[t])?(e.encrypt=(a=t.encrypt,function(e,t,r){if(!(r=r||{}).epk||!r.epk.d)return Promise.reject(new Error("missing ephemeral private key"));var n=c.convertToObj(r.epk,!1);return e&&e.x&&e.y?C(n,c.convertToObj(e,!0),{algorithm:r.alg,apu:r.apu,apv:r.apv}).then(function(e){return a(e,t)}):Promise.reject(new Error("missing static public key"))}),e.decrypt=(i=t.decrypt,function(e,t,r){if(!(r=r||{}).epk||!r.epk.x||!r.epk.y)return Promise.reject(new Error("missing ephemeral public key"));var n=c.convertToObj(r.epk,!0);return e&&e.d?C(c.convertToObj(e,!1),n,{algorithm:r.alg,apu:r.apu,apv:r.apv}).then(function(e){return i(e,t)}):Promise.reject(new Error("missing static private key"))})):e.ecrypt=e.decrypt=null:(e.encrypt=function(e,t,r){if(!(r=r||{}).epk||!r.epk.d)return Promise.reject(new Error("missing ephemeral private key"));var n=c.convertToObj(r.epk,!1);return e&&e.x&&e.y?C(n,c.convertToObj(e,!0),{algorithm:r.enc,apu:r.apu,apv:r.apv}).then(function(e){return{data:e,once:!0,direct:!0}}):Promise.reject(new Error("missing static public key"))},e.decrypt=function(e,t,r){if(!(r=r||{}).epk||!r.epk.x||!r.epk.y)return Promise.reject(new Error("missing ephemeral public key"));var n=c.convertToObj(r.epk,!0);return e&&e.d?C(c.convertToObj(e,!1),n,{algorithm:r.enc,apu:r.apu,apv:r.apv}).then(function(e){return e}):Promise.reject(new Error("missing static private key"))})})}.call(this,n(360).Buffer)},930:function(e,t,r){"use strict";var n=r(758).jsbn.BigInteger,i=r(839);function a(e,t,r,n){this.curve=e,this.g=t,this.n=r,this.h=n}function s(e){return new n(e,16)}a.prototype.getCurve=function(){return this.curve},a.prototype.getG=function(){return this.g},a.prototype.getN=function(){return this.n},a.prototype.getH=function(){return this.h};var o,u,c,e=e.exports={secp256r1:(u=s("FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF"),c=s("FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC"),o=s("5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B"),r=s("FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551"),e=n.ONE,c=(u=new i.ECCurveFp(u,c,o)).decodePointHex("046B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C2964FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5"),new a(u,c,r,e)),secp384r1:(o=s("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF"),u=s("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC"),c=s("B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF"),r=s("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973"),e=n.ONE,u=new i.ECCurveFp(o,u,c),c=u.decodePointHex("04AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB73617DE4A96262C6F5D9E98BF9292DC29F8F41DBD289A147CE9DA3113B5F0B8C00A60B1CE1D7E819D7A431D7C90EA0E5F"),new a(u,c,r,e)),secp521r1:(o=s("01FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF"),u=s("01FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC"),c=s("0051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00"),r=s("01FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409"),e=n.ONE,u=new i.ECCurveFp(o,u,c),c=u.decodePointHex("0400C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66011839296A789A3BC0045C8A5FB42C7D1BD998F54449579B446817AFBD17273E662C97EE72995EF42640C550B9013FAD0761353C7086A272C24088BE94769FD16650"),new a(u,c,r,e))};e["P-256"]=e.secp256r1,e["P-384"]=e.secp384r1,e["P-521"]=e.secp521r1},931:function(e,t,r){"use strict";!function(l){var h=r(807),p=r(761),f=r(785);function d(e){switch(e){case"SHA-256":return"P-256";case"SHA-384":return"P-384";case"SHA-512":return"P-521";default:throw new Error("unsupported hash: "+e)}}var y={};["ES256","ES384","ES512"].forEach(function(e){var a,t,s,o,n,r,i,u,c=e.replace(/ES(\d+)/g,function(e,t){return"SHA-"+t});y[e]={sign:(i=d(n=c),u=n.toLowerCase().replace("-",""),p.nodeCrypto&&-1<p.nodeCrypto.getHashes().indexOf(u)&&(r=function(t,r){if(i!==t.crv)return Promise.reject(new Error("invalid curve"));var n,e=(e=Promise.resolve(p.nodeCrypto.createSign(u))).then(function(e){return e.update(r),e});switch(u.slice(-3)){case"384":n=48;break;case"512":n=66;break;default:n=32}return(e=e.then(function(e){return h.derToConcat(e.sign(h.convertToPEM(t,!0)),n)})).then(function(e){return{data:r,mac:e}})}),p.setupFallback(r,function(e,t){if(i!==e.crv)return Promise.reject(new Error("invalid curve"));var e=h.convertToJWK(e,!1),r={name:"ECDSA",namedCurve:e.crv,hash:{name:n}};return p.subtleCrypto.importKey("jwk",e,r,!0,["sign"]).then(function(e){return p.subtleCrypto.sign(r,e,t)}).then(function(e){return e=l.from(e),{data:t,mac:e}})},function(e,t){if(i!==e.crv)return Promise.reject(new Error("invalid curve"));var r=h.convertToForge(e,!1);return f[n].digest(t).then(function(e){return e=r.sign(e),e=l.concat([e.r,e.s]),{data:t,mac:e}})})),verify:(s=d(a=c),o=a.toLowerCase().replace("-",""),p.nodeCrypto&&-1<p.nodeCrypto.getHashes().indexOf(o)&&(t=function(t,r,n){if(s!==t.crv)return Promise.reject(new Error("invalid curve"));var i;switch(o.slice(-3)){case"384":i=48;break;case"512":i=66;break;default:i=32}return Promise.resolve(p.nodeCrypto.createVerify(o)).then(function(e){return e.update(r),e.end(),e.verify(h.convertToPEM(t,!1),h.concatToDer(n,i))}).then(function(e){if(!e)throw new Error("verification failed");return{data:r,mac:n,valid:!0}})}),p.setupFallback(t,function(e,t,r){if(s!==e.crv)return Promise.reject(new Error("invalid curve"));var e=h.convertToJWK(e,!0),n={name:"ECDSA",namedCurve:e.crv,hash:{name:a}};return p.subtleCrypto.importKey("jwk",e,n,!0,["verify"]).then(function(e){return p.subtleCrypto.verify(n,e,r,t)}).then(function(e){return e?{data:t,mac:r,valid:!0}:Promise.reject(new Error("verification failed"))})},function(e,r,n){if(s!==e.crv)return Promise.reject(new Error("invalid curve"));var i=h.convertToForge(e,!0);return f[a].digest(r).then(function(e){var t=n.length/2,t={r:n.slice(0,t),s:n.slice(t)};return i.verify(e,t)?{data:r,mac:n,valid:!0}:Promise.reject(new Error("verification failed"))})}))}}),e.exports=y}.call(this,r(360).Buffer)},932:function(e,t,r){"use strict";!function(f){var o=r(758),d=r(766),y=r(759),l=r(761),n=r(765),g=r(806),i=f.from([0]);function v(e,t,r){r=[f.from("PBES2-"+e+"+"+t,"utf8"),i,r];return f.concat(r)}var m={};["PBKDF2-SHA-256","PBKDF2-SHA-384","PBKDF2-SHA-512"].forEach(function(e){var u,t=e.replace("PBKDF2-","");function c(e){var t=(e=e||{}).length||0,r=y.asBuffer(e.salt||f.alloc(0),"base64u4l"),n=e.iterations||0;if(t<=0)throw new Error("invalid key length");if(n<=0)throw new Error("invalid iteration count");return e.length=t,e.salt=r,e.iterations=n,e}m[e]={derive:(u=t,l.setupFallback(function(e,t){if(l.nodeCrypto.pbkdf2.length<6)throw new Error("unsupported algorithm: PBKDF2-"+u);try{t=c(t)}catch(e){return Promise.reject(e)}var i=t.length,a=t.salt,s=t.iterations,o=u.replace("-","");return new Promise(function(r,n){l.nodeCrypto.pbkdf2(e,a,s,i,o,function(e,t){e?n(e):r(t)})})},function(e,t){try{t=c(t)}catch(e){return Promise.reject(e)}var r=t.length,n=t.salt,i=t.iterations,e=Promise.resolve(e);return(e=(e=e.then(function(e){return l.subtleCrypto.importKey("raw",e,"PBKDF2",!1,["deriveBits"])})).then(function(e){var t={name:"PBKDF2",salt:new Uint8Array(n),iterations:i,hash:u};return l.subtleCrypto.deriveBits(t,e,8*r)})).then(function(e){return y.asBuffer(e)})},function(t,e){try{e=c(e)}catch(e){return Promise.reject(e)}var i=e.length,a=e.salt,s=e.iterations;return new Promise(function(r,n){var e=o.md[u.replace("-","").toLowerCase()].create();o.pkcs5.pbkdf2(t.toString("binary"),a.toString("binary"),s,i,e,function(e,t){e?n(e):(t=f.from(t,"binary"),r(t))})})}))}}),["PBES2-HS256+A128KW","PBES2-HS384+A192KW","PBES2-HS512+A256KW"].forEach(function(e){var a,s,o,u,c,l,h,p,t=/PBES2-(HS\d+)\+(A\d+KW)/g.exec(e),r=t[1],t=t[2];m[e]={encrypt:(l=t,h="PBKDF2-"+(c=r).replace("HS","SHA-"),p=n.KEYLENGTH[l]/8,function(e,t,r){r=r||{};var n=y.asBuffer(r.p2s||f.alloc(0),"base64url"),i=r.p2c||8192;if(i<=0)throw new Error("invalid iteration count");if(0===n.length)n=y.randomBytes(16);else if(n.length<8)throw new Error("salt too small");var a={p2s:y.base64url.encode(n),p2c:i},n=v(c,l,n);r=d(r,{salt:n,iterations:i,length:p});e=Promise.resolve(e);return(e=(e=e.then(function(e){return m[h].derive(e,r)})).then(function(e){return g[l].encrypt(e,t)})).then(function(e){return e.header=d(e.header||{},a),e})}),decrypt:(s=t,o="PBKDF2-"+(a=r).replace("HS","SHA-"),u=n.KEYLENGTH[s]/8,function(e,t,r){r=r||{};var n=y.asBuffer(r.p2s||f.alloc(0),"base64url"),i=r.p2c||0;if(i<=0)return Promise.reject(new Error("invalid iteration count"));if(n.length<8)return Promise.reject(new Error("salt too small"));n=v(a,s,n),r=d(r,{salt:n,iterations:i,length:u});e=Promise.resolve(e);return(e=e.then(function(e){return m[o].derive(e,r)})).then(function(e){return g[s].decrypt(e,t)})})}}),e.exports=m}.call(this,r(360).Buffer)},933:function(e,t,r){"use strict";!function(u){var c=r(758),l=r(761),h=r(776),p=r(808),f={"RSA-OAEP":"RSA_PKCS1_OAEP_PADDING",RSA1_5:"RSA_PKCS1_PADDING"};function d(e){return l.nodeCrypto&&l.nodeCrypto.constants&&-1!==Object.keys(f).indexOf(e)}var y={};["RSA-OAEP","RSA-OAEP-256","RSA1_5"].forEach(function(e){var r,t,n,i,a,s,o;y[e]={encrypt:(o={name:i=e},"RSA-OAEP-256"===i?(o.name="RSA-OAEP",o.hash={name:"SHA-256"}):"RSA-OAEP"===i?o.hash={name:"SHA-1"}:o.name="RSAES-PKCS1-v1_5",a="RSAES-PKCS1-v1_5"!==o.name?function(e,t){return e=p.convertToJWK(e,!0),l.subtleCrypto.importKey("jwk",e,o,!0,["encrypt"]).then(function(e){return l.subtleCrypto.encrypt(o,e,t)}).then(function(e){return{data:u.from(e)}})}:null,d(i)&&(s=function(e,t){return e=p.convertToPem(e,!0),{data:l.nodeCrypto.publicEncrypt({key:e,padding:l.nodeCrypto.constants[f[i]]},t)}}),l.setupFallback(s,a,function(e,t){t=new h(t).bytes();var r=p.convertToForge(e,!0),e={};"RSA-OAEP"===o.name&&(e.md=o.hash.name.toLowerCase().replace(/-/g,""),e.md=c.md[e.md].create());e=r.encrypt(t,o.name.toUpperCase(),e),e=new h(e).native();return Promise.resolve({data:e})})),decrypt:(n={name:r=e},"RSA-OAEP-256"===r?(n.name="RSA-OAEP",n.hash={name:"SHA-256"}):"RSA-OAEP"===r?n.hash={name:"SHA-1"}:n.name="RSAES-PKCS1-v1_5",e="RSAES-PKCS1-v1_5"!==n.name?function(e,t){return e=p.convertToJWK(e,!1),l.subtleCrypto.importKey("jwk",e,n,!0,["decrypt"]).then(function(e){return l.subtleCrypto.decrypt(n,e,t)}).then(function(e){return u.from(e)})}:null,d(r)?t=function(e,t){return e=p.convertToPem(e,!1),l.nodeCrypto.privateDecrypt({key:e,padding:l.nodeCrypto.constants[f[r]]},t)}:l.nodeCrypto&&"RSA-OAEP"===r&&(t=function(e,t){return e=p.convertToPem(e,!1),l.nodeCrypto.privateDecrypt(e,t)}),l.setupFallback(t,e,function(e,t){t=new h(t).bytes();var r=p.convertToForge(e,!1),e={};"RSA-OAEP"===n.name&&(e.md=n.hash.name.toLowerCase().replace(/-/g,""),e.md=c.md[e.md].create());e=r.decrypt(t,n.name.toUpperCase(),e),e=new h(e).native();return Promise.resolve(e)}))}}),e.exports=y}.call(this,r(360).Buffer)},934:function(e,t,r){"use strict";!function(h){var p=r(758),f=r(765),d=r(761),y=r(808);function g(){return d.nodeCrypto&&d.nodeCrypto.constants&&d.nodeCrypto.constants.RSA_PSS_SALTLEN_DIGEST}var v={};["PS256","PS384","PS512"].forEach(function(e){var t,s,o,n,r,i,a,u,c,l;v[e]={sign:(a=(r=e).replace("PS","SHA").toLowerCase(),u=r.replace("PS","SHA-"),c={name:"RSA-PSS",hash:{name:u},saltLength:f.HASHLENGTH[u]/8},l="RSA-"+u.replace("-",""),g()&&(i=function(e,t){var r=d.nodeCrypto.createSign(l);return r.update(t),{data:t,mac:r.sign({key:y.convertToPem(e,!1),padding:d.nodeCrypto.constants.RSA_PKCS1_PSS_PADDING,saltLength:d.nodeCrypto.constants.RSA_PSS_SALTLEN_DIGEST})}}),d.setupFallback(i,function(e,t){return e=y.convertToJWK(e,!1),d.subtleCrypto.importKey("jwk",e,c,!0,["sign"]).then(function(e){return d.subtleCrypto.sign(c,e,t)}).then(function(e){e=h.from(e);return{data:t,mac:e}})},function(e,t){var r=p.md[a].create();r.start(),r.update(t);var n=p.pss.create({md:p.md[a].create(),mgf:p.mgf.mgf1.create(p.md[a].create()),saltLength:f.HASHLENGTH[u]/8}),n=y.convertToForge(e,!1).sign(r,n),n=h.from(n,"binary");return Promise.resolve({data:t,mac:n})})),verify:(s=(e=e).replace("PS","SHA").toLowerCase(),o=e.replace("PS","SHA-"),n={name:"RSA-PSS",hash:{name:o},saltLength:f.HASHLENGTH[o]/8},g()&&(t=function(e,t,r){var n=d.nodeCrypto.createVerify(s);return n.update(t),n.end(),n.verify({key:y.convertToPem(e,!0),padding:d.nodeCrypto.constants.RSA_PKCS1_PSS_PADDING,saltLength:d.nodeCrypto.constants.RSA_PSS_SALTLEN_DIGEST},r)?{data:t,mac:r,valid:!0}:Promise.reject(new Error("verification failed"))}),d.setupFallback(t,function(e,t,r){return e=y.convertToJWK(e,!0),d.subtleCrypto.importKey("jwk",e,n,!0,["verify"]).then(function(e){return d.subtleCrypto.verify(n,e,r,t)}).then(function(e){return e?{data:t,mac:r,valid:!0}:Promise.reject(new Error("verification failed"))})},function(e,t,r){(n=p.md[s].create()).start(),n.update(t);var n=n.digest().bytes(),i=p.pss.create({md:p.md[s].create(),mgf:p.mgf.mgf1.create(p.md[s].create()),saltLength:f.HASHLENGTH[o]/8}),a=y.convertToForge(e,!0),e=r.toString("binary");return a.verify(n,e,i)?Promise.resolve({data:t,mac:r,valid:!0}):Promise.reject(new Error("verification failed"))}))}}),["RS256","RS384","RS512"].forEach(function(e){var t,a,n,r,i,s,o,u;v[e]={sign:(s=(r=e).replace("RS","SHA").toLowerCase(),o={name:"RSASSA-PKCS1-V1_5",hash:{name:r=r.replace("RS","SHA-")}},u="RSA-"+r.replace("-",""),d.nodeCrypto&&-1<d.nodeCrypto.getHashes().indexOf(u)&&(i=function(e,t){var r=d.nodeCrypto.createSign(u);return r.update(t),{data:t,mac:r.sign(y.convertToPem(e,!1))}}),d.setupFallback(i,function(e,t){return e=y.convertToJWK(e,!1),d.subtleCrypto.importKey("jwk",e,o,!0,["sign"]).then(function(e){return d.subtleCrypto.sign(o,e,t)}).then(function(e){e=h.from(e);return{data:t,mac:e}})},function(e,t){var r=p.md[s].create();r.start(),r.update(t);r=y.convertToForge(e,!1).sign(r,"RSASSA-PKCS1-V1_5"),r=h.from(r,"binary");return Promise.resolve({data:t,mac:r})})),verify:(a=(e=e).replace("RS","SHA").toLowerCase(),n={name:"RSASSA-PKCS1-V1_5",hash:{name:e.replace("RS","SHA-")}},d.nodeCrypto&&-1<d.nodeCrypto.getHashes().indexOf(a)&&(t=function(e,t,r){var n=d.nodeCrypto.createVerify(a);return n.update(t),n.end(),n.verify(y.convertToPem(e,!0),r)?{data:t,mac:r,valid:!0}:Promise.reject(new Error("verification failed"))}),d.setupFallback(t,function(e,t,r){return e=y.convertToJWK(e,!0),d.subtleCrypto.importKey("jwk",e,n,!0,["verify"]).then(function(e){return d.subtleCrypto.verify(n,e,r,t)}).then(function(e){return e?{data:t,mac:r,valid:!0}:Promise.reject(new Error("verification failed"))})},function(e,t,r){(n=p.md[a].create()).start(),n.update(t);var n=n.digest().bytes(),i=y.convertToForge(e,!0),e=r.toString("binary");return i.verify(n,e,"RSASSA-PKCS1-V1_5")?Promise.resolve({data:t,mac:r,valid:!0}):Promise.reject(new Error("verification failed"))}))}}),e.exports=v}.call(this,r(360).Buffer)},935:function(l,e,h){"use strict";!function(r){var n=h(759),i={BaseKey:h(784),helpers:h(777)},a=["HS256","HS384","HS512"],s=["A128GCM","A192GCM","A256GCM","A128CBC-HS256","A192CBC-HS384","A256CBC-HS512","A128CBC+HS256","A192CBC+HS384","A256CBC+HS512"],o=["A128KW","A192KW","A256KW","A128GCMKW","A192GCMKW","A256GCMKW","PBES2-HS256+A128KW","PBES2-HS384+A192KW","PBES2-HS512+A256KW","dir"];function e(e,t){return"iv"in t&&(t.iv=r.isBuffer(t.iv)?t.iv:n.base64url.decode(t.iv||"")),"adata"in t&&(t.adata=r.isBuffer(t.adata)?t.adata:r.from(t.adata||"","utf8")),"mac"in t&&(t.mac=r.isBuffer(t.mac)?t.mac:n.base64url.decode(t.mac||"")),"tag"in t&&(t.tag=r.isBuffer(t.tag)?t.tag:n.base64url.decode(t.tag||"")),t}function t(e,t){return"iv"in t&&(t.iv=r.isBuffer(t.iv)?t.iv:n.base64url.decode(t.iv||"")),"adata"in t&&(t.adata=r.isBuffer(t.adata)?t.adata:r.from(t.adata||"","utf8")),t}var u={publicKey:function(e){var t=i.helpers.COMMON_PROPS.concat([]);return i.helpers.unpackProps(e,t)},privateKey:function(e){var t=i.helpers.COMMON_PROPS.concat([{name:"k",type:"binary"}]);return(t=i.helpers.unpackProps(e,t))&&t.k?t.length=8*t.k.length:t=void 0,t},thumbprint:function(e){return{k:(e=e.private?e.private:e).k||"",kty:"oct"}},algorithms:function(e,t){var n=e.private&&8*e.private.k.length,i=[256,384,512];if(!n)return[];switch(t){case"encrypt":case"decrypt":return s.filter(function(e){return e==="A"+n/2+"CBC-HS"+n||e==="A"+n/2+"CBC+HS"+n||e==="A"+n+"GCM"});case"sign":case"verify":return a.filter(function(t){var r=!1;return i.forEach(function(e){n<e||(r|=t==="HS"+e)}),r});case"wrap":case"unwrap":return o.filter(function(e){return e==="A"+n+"KW"||e==="A"+n+"GCMKW"||0===e.indexOf("PBES2-")||"dir"===e})}return[]},encryptKey:function(e,t){return t.private&&t.private.k},encryptProps:t,decryptKey:function(e,t){return t.private&&t.private.k},decryptProps:e,wrapKey:function(e,t){return t.private&&t.private.k},wrapProps:t,unwrapKey:function(e,t){return t.private&&t.private.k},unwrapProps:e,signKey:function(e,t){return t.private&&t.private.k},verifyKey:function(e,t){return t.private&&t.private.k}},c={kty:"oct",prepare:function(r){var n=u,e=Promise.resolve(r);return(e=e.then(function(e){return i.helpers.thumbprint(n,e)})).then(function(e){var t={};return t[i.helpers.INTERNALS.THUMBPRINT_HASH]=e,r[i.helpers.INTERNALS.THUMBPRINT_KEY]=t,n})},generate:function(e){e=n.randomBytes(e/8);return Promise.resolve({k:e})}};l.exports=Object.freeze({config:u,factory:c}),h(783).registry.register(c)}.call(this,h(360).Buffer)},936:function(l,e,h){"use strict";!function(a){var i=h(758),r=h(808),n=h(761).nodeCrypto,s={BaseKey:h(784),helpers:h(777)},o=["RS256","RS384","RS512","PS256","PS384","PS512"],u=["RSA-OAEP","RSA-OAEP-256","RSA1_5"],t={publicKey:function(e){var t=s.helpers.COMMON_PROPS.concat([{name:"n",type:"binary"},{name:"e",type:"binary"}]);return(t=s.helpers.unpackProps(e,t))&&t.n&&t.e?t.length=8*t.n.length:(delete t.e,delete t.n),t},privateKey:function(e){var t=s.helpers.COMMON_PROPS.concat([{name:"n",type:"binary"},{name:"e",type:"binary"},{name:"d",type:"binary"},{name:"p",type:"binary"},{name:"q",type:"binary"},{name:"dp",type:"binary"},{name:"dq",type:"binary"},{name:"qi",type:"binary"}]);return(t=s.helpers.unpackProps(e,t))&&t.d&&t.n&&t.e&&t.p&&t.q&&t.dp&&t.dq&&t.qi?t.length=8*t.d.length:t=void 0,t},thumbprint:function(e){return{e:(e=e.public?e.public:e).e,kty:"RSA",n:e.n}},algorithms:function(e,t){switch(t){case"encrypt":case"decrypt":return[];case"wrap":return e.public&&u.slice()||[];case"unwrap":return e.private&&u.slice()||[];case"sign":return e.private&&o.slice()||[];case"verify":return e.public&&o.slice()||[]}return[]},wrapKey:function(e,t){return t.public},unwrapKey:function(e,t){return t.private},signKey:function(e,t){return t.private},verifyKey:function(e,t){return t.public},convertToPEM:function(e,t){e=r.convertToForge(e,!t);return t?i.pki.privateKeyToPem(e):i.pki.publicKeyToPem(e)}},c={oid:"1.2.840.113549.1.1.1",privateKey:{name:"RSAPrivateKey",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.INTEGER,constructed:!1,capture:"version"},{name:"RSAPrivateKey.modulus",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.INTEGER,constructed:!1,capture:"n"},{name:"RSAPrivateKey.publicExponent",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.INTEGER,constructed:!1,capture:"e"},{name:"RSAPrivateKey.privateExponent",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.INTEGER,constructed:!1,capture:"d"},{name:"RSAPrivateKey.prime1",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.INTEGER,constructed:!1,capture:"p"},{name:"RSAPrivateKey.prime2",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.INTEGER,constructed:!1,capture:"q"},{name:"RSAPrivateKey.exponent1",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.INTEGER,constructed:!1,capture:"dp"},{name:"RSAPrivateKey.exponent2",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.INTEGER,constructed:!1,capture:"dq"},{name:"RSAPrivateKey.coefficient",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.INTEGER,constructed:!1,capture:"qi"}]},publicKey:{name:"RSAPublicKey",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.INTEGER,constructed:!1,capture:"n"},{name:"RSAPublicKey.exponent",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.INTEGER,constructed:!1,capture:"e"}]}},e={kty:"RSA",validators:c,prepare:function(r){var n=t,e=Promise.resolve(r);return(e=e.then(function(e){return s.helpers.thumbprint(n,e)})).then(function(e){var t={};return t[s.helpers.INTERNALS.THUMBPRINT_HASH]=e,r[s.helpers.INTERNALS.THUMBPRINT_KEY]=t,n})},generate:function(e){var t;return(n?new Promise(function(r,n){i.pki.rsa.generateKeyPair({bits:e,e:65537},function(e,t){return e?n(e):void r(t.privateKey)})}):(t=i.pki.rsa.generateKeyPair({bits:e,e:65537}),Promise.resolve(t.privateKey))).then(function(n){var i={};return["e","n","d","p","q",{incoming:"dP",outgoing:"dp"},{incoming:"dQ",outgoing:"dq"},{incoming:"qInv",outgoing:"qi"}].forEach(function(e){var t,r;"string"==typeof e?r=t=e:(r=e.incoming,t=e.outgoing),r in n&&(i[t]=((r=(r=n[r]).toString(16)).length%2&&(r="0"+r),a.from(r,"hex")))}),i})},import:function(r){if(c.oid!==r.keyOid)return null;if(!r.parsed){"string"==typeof r.keyValue?r.keyValue=i.asn1.fromDer(r.keyValue):Array.isArray(r.keyValue)&&(r.keyValue=r.keyValue[0]);var e="private"===r.type?c.privateKey:c.publicKey,t={};if(!i.asn1.validate(r.keyValue,e,t,[]))return null;r=t}var n={kty:"RSA"};return["n","e","d","p","q","dp","dq","qi"].forEach(function(e){var t;e in r&&(0===(t=a.from(r[e],"binary"))[0]&&(t=t.slice(1)),n[e]=t)}),n}};l.exports=Object.freeze({config:t,factory:e}),h(783).registry.register(e)}.call(this,h(360).Buffer)},937:function(h,e,p){"use strict";!function(n){var r=p(807),i=p(758),a=p(838),s={BaseKey:p(784),helpers:p(777)},o=["ES256","ES384","ES512"],u=["ECDH-ES","ECDH-ES+A128KW","ECDH-ES+A192KW","ECDH-ES+A256KW"],e=r.EC_OID;function c(e){switch(e){case"1.2.840.10045.3.1.7":return"P-256";case"1.3.132.0.34":return"P-384";case"1.3.132.0.35":return"P-521";default:return null}}var t={publicKey:function(e){var t=s.helpers.COMMON_PROPS.concat([{name:"crv",type:"string"},{name:"x",type:"binary"},{name:"y",type:"binary"}]),t=s.helpers.unpackProps(e,t);return t&&t.crv&&t.x&&t.y?t.length=r.curveSize(t.crv):(delete t.crv,delete t.x,delete t.y),t},privateKey:function(e){var t=s.helpers.COMMON_PROPS.concat([{name:"crv",type:"string"},{name:"x",type:"binary"},{name:"y",type:"binary"},{name:"d",type:"binary"}]),t=s.helpers.unpackProps(e,t);return t&&t.crv&&t.x&&t.y&&t.d?t.length=r.curveSize(t.crv):t=void 0,t},thumbprint:function(e){return{crv:(e=e.public?e.public:e).crv,kty:"EC",x:e.x,y:e.y}},algorithms:function(e,t){var r=e.public&&e.public.length||e.private&&e.private.length||0;switch(521===r&&(r=512),t){case"encrypt":case"decrypt":return[];case"wrap":return e.public?u:[];case"unwrap":return e.private?u:[];case"sign":return e.private?o.filter(function(e){return e==="ES"+r}):[];case"verify":return e.public?o.filter(function(e){return e==="ES"+r}):[]}},encryptKey:function(e,t){return t.public},decryptKey:function(e,t){return t.private},wrapKey:function(e,t){return t.public},unwrapKey:function(e,t){return t.private},signKey:function(e,t){return t.private},verifyKey:function(e,t){return t.public}};t.convertToPEM=r.convertToPEM;var l={oid:e,privateKey:{name:"ECPrivateKey",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"ECPrivateKey.version",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.INTEGER,constructed:!1},{name:"ECPrivateKey.private",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.OCTETSTRING,constructed:!1,capture:"d"},{tagClass:i.asn1.Class.CONTEXT_SPECIFIC,name:"ECPrivateKey.parameters",constructed:!0,value:[{name:"ECPrivateKey.namedCurve",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.OID,constructed:!1,capture:"crv"}]},{name:"ECPrivateKey.publicKey",tagClass:i.asn1.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"ECPrivateKey.point",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.BITSTRING,constructed:!1,capture:"point"}]}]},embeddedPrivateKey:{name:"ECPrivateKey",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"ECPrivateKey.version",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.INTEGER,constructed:!1},{name:"ECPrivateKey.private",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.OCTETSTRING,constructed:!1,capture:"d"},{name:"ECPrivateKey.publicKey",tagClass:i.asn1.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"ECPrivateKey.point",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.BITSTRING,constructed:!1,capture:"point"}]}]}},e={kty:"EC",validators:l,prepare:function(r){var n=t,e=Promise.resolve(r);return(e=e.then(function(e){return s.helpers.thumbprint(n,e)})).then(function(e){var t={};return t[s.helpers.INTERNALS.THUMBPRINT_HASH]=e,r[s.helpers.INTERNALS.THUMBPRINT_KEY]=t,n})},generate:function(e){var t=a.generateKeyPair(e),t={crv:e,x:t.public.x,y:t.public.y,d:t.private.d};return Promise.resolve(t)},import:function(e){if(l.oid!==e.keyOid)return null;if(e.keyParams&&i.asn1.Type.OID===e.keyParams.type?r=c(r=i.asn1.derToOid(e.keyParams.value)):e.crv&&(r=c(r=i.asn1.derToOid(e.crv))),!r)return null;if(!e.parsed){var t={};if("private"===e.type){if("string"==typeof e.keyValue?e.keyValue=i.asn1.fromDer(e.keyValue):Array.isArray(e.keyValue)&&(e.keyValue=e.keyValue[0]),!i.asn1.validate(e.keyValue,l.embeddedPrivateKey,t,[]))return null}else t.point=e.keyValue;e=t}t={kty:"EC",crv:r};if(e.d&&(t.d=n.from(e.d,"binary")),e.point){var r=n.from(e.point,"binary");if(4!==r.readUInt16BE(0))return null;e=(r=r.slice(2)).length/2;t.x=r.slice(0,e),t.y=r.slice(e)}return t}};h.exports=Object.freeze({config:t,factory:e}),p(783).registry.register(e)}.call(this,p(360).Buffer)},938:function(e,t,r){"use strict";e.exports={slice:function(e,t){return Array.prototype.slice.call(e,t||0)}}},939:function(e,t,r){"use strict";e.exports={compact:!1,protect:"*"}},940:function(e,t,a){"use strict";!function(p){function r(e,t){var l,h=g.isKey(e)?(l=e).keystore:g.isKeyStore(e)?e:g.createKeyStore();t=d(i,t),Object.defineProperty(this,"defaultKey",{value:l||void 0,enumerable:!0}),Object.defineProperty(this,"keystore",{value:h,enumerable:!0}),Object.defineProperty(this,"verify",{value:function(a,s){var o=(s=d({},t,s||{})).handlers||{},u=Object.keys(o),c=new n(s.algorithms);if("string"==typeof a)a={payload:(a=a.split("."))[1],signatures:[{protected:a[0],signature:a[2]}]};else if(!a||"object"!=typeof a)throw new Error("invalid input");a.signature&&(a.signatures=[{protected:a.protected||void 0,header:a.header||void 0,signature:a.signature}]);var e=(e=a.signatures||[{}]).map(function(e){var t=f(e.header||{}),r=e.protected?JSON.parse(y.decode(e.protected,"utf8")):{},t=d(t,r),n=y.decode(e.signature);if(!c.match(t.alg))return Promise.reject(new Error("Algorithm not allowed: "+t.alg));var i=r.crit;if(i){if(!Array.isArray(i))return Promise.reject(new Error("Invalid 'crit' header"));for(var a=0;i.length>a;a++)if(-1===u.indexOf(i[a]))return Promise.reject(new Error("Critical extension is not supported: "+i[a]))}return r=Object.keys(r),Promise.resolve({protected:r,aad:e.protected||"",header:t,signature:n})}),e=Promise.all(e);return e.then(function(i){return new Promise(function(e,t){var n=function(){var r=i.shift();r?(r=d({},r,{payload:a.payload}),Promise.resolve(r).then(function(t){var e=s.allowEmbeddedKey&&t.header.jwk?g.asKey(t.header.jwk):s.allowEmbeddedKey&&t.header.x5c?(e=t.header.x5c[0],e=p.from(e,"base64"),g.asKey(e,"pkix")):Promise.resolve(l||h.get({use:"sig",alg:t.header.alg,kid:t.header.kid}));return e.then(function(e){return e?(t.key=e,t):Promise.reject(new Error("key does not match"))})}).then(function(r){var n=[];return u.forEach(function(e){var t;"function"==typeof(e=o[e])?t=e(r):"object"==typeof e&&"function"==typeof e.prepare&&(t=e.prepare(r)),t&&n.push(Promise.resolve(t))}),Promise.all(n).then(function(){return r})}).then(function(e){var t=e.aad||"",r=e.payload||"",n=p.alloc(1+t.length+r.length),i=0;return n.write(t,0,"ascii"),i+=t.length,n.write(".",i,"ascii"),i++,p.isBuffer(r)?r.copy(n,i):n.write(r,i,"binary"),e.content=n,e}).then(function(e){return e.key.verify(e.header.alg,e.content,e.signature)}).then(function(e){var t=r.payload,t=y.decode(t);return{protected:r.protected,header:r.header,payload:t,signature:e.mac,key:r.key}}).then(function(r){var n=[];return u.forEach(function(e){var t;(t="object"==typeof(e=o[e])&&"function"==typeof e.complete?e.complete(r):t)&&n.push(Promise.resolve(t))}),Promise.all(n).then(function(){return r})}).then(e,n)):t(new Error("no key found"))};n()})})}})}var f=a(764),d=a(766),y=a(782),n=a(842),g=a(772),i={algorithms:"*",allowEmbeddedKey:!1};e.exports={verifier:r,createVerify:function(e,t){return new r(e,t)}}}.call(this,a(360).Buffer)},941:function(e,t,r){"use strict";!function(f){var d=r(759),y=r(843).generateCEK,g=r(772),a=r(843).slice,v=r(844),m=r(765),C=r(833),E=r(764),o=r(950);function u(c,l,n){var i=!1,s=c.format||"general",h=!!c.protectAll,p=f.alloc(0);Object.defineProperty(this,"zip",{get:function(){return l.zip||""},enumerable:!0}),Object.defineProperty(this,"compact",{get:function(){return"compact"===s},enumerable:!0}),Object.defineProperty(this,"format",{get:function(){return s},enumerable:!0}),Object.defineProperty(this,"protected",{get:function(){return E(c.protect)},enumerable:!0}),Object.defineProperty(this,"header",{get:function(){return E(l)},enumerable:!0}),Object.defineProperty(this,"update",{value:function(e,t){if(i)throw new Error("already final");return null!=e&&(e=d.asBuffer(e,t),p=p.length?f.concat([p,e],p.length+e.length):e),this}}),Object.defineProperty(this,"final",{value:function(e,t){if(i)return Promise.reject(new Error("already final"));this.update(e,t),i=!0;var o,r=Promise.resolve({}),u=l.enc,r=(r=r.then(function(e){return c.cek&&(o=g.asKey(c.cek)),e})).then(function(t){var e=Promise.all(n);return(e=e.then(function(e){var t=1===e.length;return e=e.map(function(e){return function(n,i){var r=C(r={},l);r=C(r,n.header);var a=n.key,s=r.alg,e=0===(r.alg||"").indexOf("ECDH-ES")?(e=a.keystore.temp(),n.epk?Promise.resolve(n.epk).then(function(e){n.header.epk=e.toJSON(!1,["kid"]),r.epk=e.toObject(!0,["kid"])}):e.generate("EC",a.get("crv")).then(function(e){n.header.epk=e.toJSON(!1,["kid"]),r.epk=e.toObject(!0,["kid"])})):Promise.resolve();return(e=e.then(function(){var t,e="dir"===s&&i?(o=Promise.resolve(a)).then(function(e){return u||(r.enc=l.enc=u=e.algorithms(g.MODE_ENCRYPT)[0]),{once:!0,direct:!0}}):(o||(u||(r.enc=l.enc=u=c.contentAlg),o=y(u)),(e=o.then(function(e){return t=e.get("k",!0),a})).then(function(e){return e.wrap(s,t,r)}));return e})).then(function(e){if(e.once&&!i)return Promise.reject(new Error("cannot use 'alg':'"+s+"' with multiple recipients"));var t,r={};return e.data&&(t=e.data,t=d.base64url.encode(t)),e.direct&&t?o=g.asKey({kty:"oct",k:t}):t&&(r.encrypted_key=t),n.header&&Object.keys(n.header).length&&(r.header=E(n.header||{})),e.header&&(r.header=C(r.header||{},e.header)),r})}(e,t)}),Promise.all(e)})).then(function(e){return t.recipients=e.filter(function(e){return!!e}),t})}),a={};switch(r=(r=(r=r.then(function(e){var r,t,n,i=E(l);return h&&1===e.recipients.length||"compact"===s?(r={},r=C({},i,e.recipients[0].header),t=Object.keys(r).length,i=void 0,n=0,delete e.recipients[0].header,0===Object.keys(e.recipients[0]).length&&e.recipients.splice(0,1)):(r={},t=0,n=Object.keys(i).length,c.protect.forEach(function(e){e in i&&(r[e]=i[e],t++,delete i[e],n--)}),e.recipients=(e.recipients||[]).map(function(e){var t=(e=e||{}).header;return t&&(Object.keys(t).forEach(function(e){e in r&&delete t[e]}),Object.keys(t).length||delete e.header),e})),e.recipients&&0!==e.recipients.length||delete e.recipients,i&&0<n&&(a=C(a,i),e.unprotected=i),r&&0<t&&(a=C(a,r),r=JSON.stringify(r),e.protected=d.base64url.encode(r,"utf8")),e})).then(function(n){var i=p;return a.zip?"DEF"===a.zip?new Promise(function(e,t){try{var r=v.deflateRaw(f.from(i,"binary"));n.plaintext=r,e(n)}catch(e){t(e)}}):Promise.reject(new Error("unsupported 'zip' mode")):(n.plaintext=i,n)})).then(function(t){a.adata=t.protected,"aad"in c&&null!=c.aad&&(a.adata+="."+c.aad,a.adata=f.from(a.adata,"utf8"));var r=c.iv||d.randomBytes(m.NONCELENGTH[u]/8);"string"==typeof r&&(r=d.base64url.decode(r)),a.iv=r,"recipients"in t&&1===t.recipients.length&&(a.kdata=t.recipients[0].encrypted_key),"epu"in c&&null!=c.epu&&(a.epu=c.epu),"epv"in c&&null!=c.epv&&(a.epv=c.epv);var n=t.plaintext;return delete t.plaintext,o.then(function(e){e=e.encrypt(u,n,a);return e.then(function(e){return t.iv=d.base64url.encode(r,"binary"),"aad"in c&&null!=c.aad&&(t.aad=c.aad),t.ciphertext=d.base64url.encode(e.data,"binary"),t.tag=d.base64url.encode(e.tag,"binary"),t})})}),s){case"compact":r=r.then(function(e){var t=new Array(5);return t[0]=e.protected,e.recipients&&e.recipients[0]&&(t[1]=e.recipients[0].encrypted_key),t[2]=e.iv,t[3]=e.ciphertext,t[4]=e.tag,t.join(".")});break;case"flattened":r=r.then(function(e){var t={},r=e.recipients&&e.recipients[0];return e.protected&&(t.protected=e.protected),e.unprotected&&(t.unprotected=e.unprotected),["header","encrypted_key"].forEach(function(e){r&&e in r&&r[e]&&("object"!=typeof r[e]||Object.keys(r[e]).length)&&(t[e]=r[e])}),e.aad&&(t.aad=e.aad),t.iv=e.iv,t.ciphertext=e.ciphertext,t.tag=e.tag,t});break;case"general":r=r.then(function(e){var t=e.recipients||[];return(t=(t=t.map(function(e){if(Object.keys(e).length)return e})).filter(function(e){return!!e})).length?e.recipients=t:delete e.recipients,e})}return r}})}e.exports={encrypter:u,createEncrypt:function(e,t){var r=e,n=1,i=t;if(0===arguments.length)throw new Error("at least one recipient must be provided");r=1===arguments.length||g.isKey(e)||e&&"kty"in e||e&&"key"in e&&(g.isKey(e.key)||"kty"in e.key)?(i=e,n=0,{}):E(e),Array.isArray(i)||(i=a(arguments,n));var r=C(E(o),r),s=E(r.fields||{});switch(r.zip&&(s.zip="boolean"==typeof r.zip?!!r.zip&&"DEF":r.zip),r.format=(r.compact?"compact":r.format)||"general",r.format){case"compact":if("aad"in e)throw new Error("additional authenticated data cannot be used for compact serialization");case"flattened":if(1<i.length)throw new Error("too many recipients for compact serialization")}n=!1;if("compact"===r.format||"*"===r.protect)n=!0,r.protect=Object.keys(s).concat("enc");else if("string"==typeof r.protect)r.protect=[r.protect];else if(Array.isArray(r.protect))r.protect=r.protect.concat();else{if(r.protect)throw new Error("protect must be a list of fields");r.protect=[]}if(n&&1<i.length)throw new Error("too many recipients to protect all header parameters");i=i.map(function(r,a){var e=r&&"kty"in r?(e=g.asKey(r)).then(function(e){return{key:e}}):r?(e=g.asKey(r.key)).then(function(e){return{header:r.header,reference:r.reference,key:e}}):Promise.reject(new Error("missing key for recipient "+a));return(e=r.epk?e.then(function(t){return g.asKey(r.epk).then(function(e){return t.epk=e,t})}):e).then(function(e){var t=e.key,r=e.header||{};e.header=r;var n=C(n={},s);if((n=C(n,e.header)).alg||(n.alg=t.algorithms(g.MODE_WRAP)[0],r.alg=n.alg),!n.alg)return Promise.reject(new Error("key not valid for encrypting to recipient "+a));r.alg=n.alg;var i=e.reference;if(delete e.reference,void 0===i?i=["kid","jku","x5c","x5t","x5u"].some(function(e){return e in r})?null:"kid":"boolean"==typeof i&&(i=i?"kid":null),i)if(n=t.toJSON(),"jwk"===i){if("oct"===t.kty)return Promise.reject(new Error("cannot embed key"));r.jwk=n}else i in n&&(r[i]=n[i]);return Object.freeze(e)})});return new u({aad:"aad"in r?d.base64url.encode(r.aad||""):null,contentAlg:r.contentAlg,format:r.format,protect:r.protect,cek:r.cek,iv:r.iv,protectAll:n},s,i)}}}.call(this,r(360).Buffer)},942:function(e,t,r){"use strict";var s=r(943),o=r(769),u=r(847),n=r(810),i=r(848),c=Object.prototype.toString;function a(e){if(!(this instanceof a))return new a(e);this.options=o.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;e=s.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(0!==e)throw new Error(n[e]);if(t.header&&s.deflateSetHeader(this.strm,t.header),t.dictionary){t="string"==typeof t.dictionary?u.string2buf(t.dictionary):"[object ArrayBuffer]"===c.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary;if(0!==(e=s.deflateSetDictionary(this.strm,t)))throw new Error(n[e]);this._dict_set=!0}}function l(e,t){t=new a(t);if(t.push(e,!0),t.err)throw t.msg||n[t.err];return t.result}a.prototype.push=function(e,t){var r,n,i=this.strm,a=this.options.chunkSize;if(this.ended)return!1;n=t===~~t?t:!0===t?4:0,"string"==typeof e?i.input=u.string2buf(e):"[object ArrayBuffer]"===c.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new o.Buf8(a),i.next_out=0,i.avail_out=a),1!==(r=s.deflate(i,n))&&0!==r)return this.onEnd(r),!(this.ended=!0)}while(0!==i.avail_out&&(0!==i.avail_in||4!==n&&2!==n)||("string"===this.options.to?this.onData(u.buf2binstring(o.shrinkBuf(i.output,i.next_out))):this.onData(o.shrinkBuf(i.output,i.next_out))),(0<i.avail_in||0===i.avail_out)&&1!==r);return 4===n?(r=s.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,0===r):2!==n||(this.onEnd(0),!(i.avail_out=0))},a.prototype.onData=function(e){this.chunks.push(e)},a.prototype.onEnd=function(e){0===e&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=a,t.deflate=l,t.deflateRaw=function(e,t){return(t=t||{}).raw=!0,l(e,t)},t.gzip=function(e,t){return(t=t||{}).gzip=!0,l(e,t)}},943:function(e,t,r){"use strict";var o,h=r(769),u=r(944),p=r(845),f=r(846),n=r(810),l=-2,y=258,g=262,c=113;function d(e,t){return e.msg=n[t],t}function v(e){return(e<<1)-(4<e?9:0)}function m(e){for(var t=e.length;0<=--t;)e[t]=0}function C(e){var t=e.state,r=t.pending;0!==(r=r>e.avail_out?e.avail_out:r)&&(h.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function E(e,t){u._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,C(e.strm)}function b(e,t){e.pending_buf[e.pending++]=t}function S(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function a(e,t){var r,n,i=e.max_chain_length,a=e.strstart,s=e.prev_length,o=e.nice_match,u=e.strstart>e.w_size-g?e.strstart-(e.w_size-g):0,c=e.window,l=e.w_mask,h=e.prev,p=e.strstart+y,f=c[a+s-1],d=c[a+s];e.prev_length>=e.good_match&&(i>>=2),o>e.lookahead&&(o=e.lookahead);do{if(c[(r=t)+s]===d&&c[r+s-1]===f&&c[r]===c[a]&&c[++r]===c[a+1]){for(a+=2,r++;c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&a<p;);if(n=y-(p-a),a=p-y,s<n){if(e.match_start=t,o<=(s=n))break;f=c[a+s-1],d=c[a+s]}}}while((t=h[t&l])>u&&0!=--i);return s<=e.lookahead?s:e.lookahead}function T(e){var t,r,n,i,a,s,o,u,c,l=e.w_size;do{if(c=e.window_size-e.lookahead-e.strstart,e.strstart>=l+(l-g)){for(h.arraySet(e.window,e.window,l,l,0),e.match_start-=l,e.strstart-=l,e.block_start-=l,t=r=e.hash_size;n=e.head[--t],e.head[t]=l<=n?n-l:0,--r;);for(t=r=l;n=e.prev[--t],e.prev[t]=l<=n?n-l:0,--r;);c+=l}if(0===e.strm.avail_in)break;if(a=e.strm,s=e.window,o=e.strstart+e.lookahead,u=c,c=void 0,r=0===(c=(c=a.avail_in)>u?u:c)?0:(a.avail_in-=c,h.arraySet(s,a.input,a.next_in,c,o),1===a.state.wrap?a.adler=p(a.adler,s,c,o):2===a.state.wrap&&(a.adler=f(a.adler,s,c,o)),a.next_in+=c,a.total_in+=c,c),e.lookahead+=r,3<=e.lookahead+e.insert)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=(e.ins_h<<e.hash_shift^e.window[i+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[i+3-1])&e.hash_mask,e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<g&&0!==e.strm.avail_in)}function i(e,t){for(var r,n;;){if(e.lookahead<g){if(T(e),e.lookahead<g&&0===t)return 1;if(0===e.lookahead)break}if(r=0,3<=e.lookahead&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-g&&(e.match_length=a(e,r)),3<=e.match_length)if(n=u._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&3<=e.lookahead){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=u._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(E(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(E(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(E(e,!1),0===e.strm.avail_out)?1:2}function s(e,t){for(var r,n,i;;){if(e.lookahead<g){if(T(e),e.lookahead<g&&0===t)return 1;if(0===e.lookahead)break}if(r=0,3<=e.lookahead&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-g&&(e.match_length=a(e,r),e.match_length<=5&&(1===e.strategy||3===e.match_length&&4096<e.strstart-e.match_start)&&(e.match_length=2)),3<=e.prev_length&&e.match_length<=e.prev_length){for(i=e.strstart+e.lookahead-3,n=u._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(E(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((n=u._tr_tally(e,0,e.window[e.strstart-1]))&&E(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=u._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(E(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(E(e,!1),0===e.strm.avail_out)?1:2}function I(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}function A(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new h.Buf16(1146),this.dyn_dtree=new h.Buf16(122),this.bl_tree=new h.Buf16(78),m(this.dyn_ltree),m(this.dyn_dtree),m(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new h.Buf16(16),this.heap=new h.Buf16(573),m(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new h.Buf16(573),m(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function w(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:c,e.adler=2===t.wrap?0:1,t.last_flush=0,u._tr_init(t),0):d(e,l)}function k(e){var t=w(e);return 0===t&&((e=e.state).window_size=2*e.w_size,m(e.head),e.max_lazy_match=o[e.level].max_lazy,e.good_match=o[e.level].good_length,e.nice_match=o[e.level].nice_length,e.max_chain_length=o[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),t}function B(e,t,r,n,i,a){if(!e)return l;var s=1;if(-1===t&&(t=6),n<0?(s=0,n=-n):15<n&&(s=2,n-=16),i<1||9<i||8!==r||n<8||15<n||t<0||9<t||a<0||4<a)return d(e,l);8===n&&(n=9);var o=new A;return(e.state=o).strm=e,o.wrap=s,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=i+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new h.Buf8(2*o.w_size),o.head=new h.Buf16(o.hash_size),o.prev=new h.Buf16(o.w_size),o.lit_bufsize=1<<i+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new h.Buf8(o.pending_buf_size),o.d_buf=+o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=t,o.strategy=a,o.method=r,k(e)}o=[new I(0,0,0,0,function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(T(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,E(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-g&&(E(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(E(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(E(e,!1),e.strm.avail_out),1)}),new I(4,4,8,4,i),new I(4,5,16,8,i),new I(4,6,32,32,i),new I(4,4,16,16,s),new I(8,16,32,32,s),new I(8,16,128,128,s),new I(8,32,128,256,s),new I(32,128,258,1024,s),new I(32,258,258,4096,s)],t.deflateInit=function(e,t){return B(e,t,8,15,8,0)},t.deflateInit2=B,t.deflateReset=k,t.deflateResetKeep=w,t.deflateSetHeader=function(e,t){return!e||!e.state||2!==e.state.wrap?l:(e.state.gzhead=t,0)},t.deflate=function(e,t){var r,n,i,a;if(!e||!e.state||5<t||t<0)return e?d(e,l):l;if(r=e.state,!e.output||!e.input&&0!==e.avail_in||666===r.status&&4!==t)return d(e,0===e.avail_out?-5:l);if(r.strm=e,s=r.last_flush,r.last_flush=t,42===r.status&&(2===r.wrap?(e.adler=0,b(r,31),b(r,139),b(r,8),r.gzhead?(b(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),b(r,255&r.gzhead.time),b(r,r.gzhead.time>>8&255),b(r,r.gzhead.time>>16&255),b(r,r.gzhead.time>>24&255),b(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),b(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(b(r,255&r.gzhead.extra.length),b(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=f(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(b(r,0),b(r,0),b(r,0),b(r,0),b(r,0),b(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),b(r,3),r.status=c)):(a=8+(r.w_bits-8<<4)<<8,a|=(2<=r.strategy||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(a|=32),a+=31-a%31,r.status=c,S(r,a),0!==r.strstart&&(S(r,e.adler>>>16),S(r,65535&e.adler)),e.adler=1)),69===r.status)if(r.gzhead.extra){for(n=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>n&&(e.adler=f(e.adler,r.pending_buf,r.pending-n,n)),C(e),n=r.pending,r.pending!==r.pending_buf_size));)b(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>n&&(e.adler=f(e.adler,r.pending_buf,r.pending-n,n)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){n=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>n&&(e.adler=f(e.adler,r.pending_buf,r.pending-n,n)),C(e),n=r.pending,r.pending===r.pending_buf_size)){i=1;break}}while(i=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,b(r,i),0!==i);r.gzhead.hcrc&&r.pending>n&&(e.adler=f(e.adler,r.pending_buf,r.pending-n,n)),0===i&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){n=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>n&&(e.adler=f(e.adler,r.pending_buf,r.pending-n,n)),C(e),n=r.pending,r.pending===r.pending_buf_size)){i=1;break}}while(i=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,b(r,i),0!==i);r.gzhead.hcrc&&r.pending>n&&(e.adler=f(e.adler,r.pending_buf,r.pending-n,n)),0===i&&(r.status=103)}else r.status=103;if(103===r.status&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&C(e),r.pending+2<=r.pending_buf_size&&(b(r,255&e.adler),b(r,e.adler>>8&255),e.adler=0,r.status=c)):r.status=c),0!==r.pending){if(C(e),0===e.avail_out)return r.last_flush=-1,0}else if(0===e.avail_in&&v(t)<=v(s)&&4!==t)return d(e,-5);if(666===r.status&&0!==e.avail_in)return d(e,-5);if(0!==e.avail_in||0!==r.lookahead||0!==t&&666!==r.status){var s=2===r.strategy?function(e,t){for(var r;;){if(0===e.lookahead&&(T(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,r=u._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(E(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(E(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(E(e,!1),0===e.strm.avail_out)?1:2}(r,t):3===r.strategy?function(e,t){for(var r,n,i,a,s=e.window;;){if(e.lookahead<=y){if(T(e),e.lookahead<=y&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,3<=e.lookahead&&0<e.strstart&&(n=s[i=e.strstart-1])===s[++i]&&n===s[++i]&&n===s[++i]){for(a=e.strstart+y;n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&i<a;);e.match_length=y-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(3<=e.match_length?(r=u._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=u._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(E(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(E(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(E(e,!1),0===e.strm.avail_out)?1:2}(r,t):o[r.level].func(r,t);if(3!==s&&4!==s||(r.status=666),1===s||3===s)return 0===e.avail_out&&(r.last_flush=-1),0;if(2===s&&(1===t?u._tr_align(r):5!==t&&(u._tr_stored_block(r,0,0,!1),3===t&&(m(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),C(e),0===e.avail_out))return r.last_flush=-1,0}return 4!==t?0:r.wrap<=0?1:(2===r.wrap?(b(r,255&e.adler),b(r,e.adler>>8&255),b(r,e.adler>>16&255),b(r,e.adler>>24&255),b(r,255&e.total_in),b(r,e.total_in>>8&255),b(r,e.total_in>>16&255),b(r,e.total_in>>24&255)):(S(r,e.adler>>>16),S(r,65535&e.adler)),C(e),0<r.wrap&&(r.wrap=-r.wrap),0!==r.pending?0:1)},t.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&103!==t&&t!==c&&666!==t?d(e,l):(e.state=null,t===c?d(e,-3):0):l},t.deflateSetDictionary=function(e,t){var r,n,i,a,s,o,u,c=t.length;if(!e||!e.state)return l;if(2===(a=(r=e.state).wrap)||1===a&&42!==r.status||r.lookahead)return l;for(1===a&&(e.adler=p(e.adler,t,c,0)),r.wrap=0,c>=r.w_size&&(0===a&&(m(r.head),r.strstart=0,r.block_start=0,r.insert=0),u=new h.Buf8(r.w_size),h.arraySet(u,t,c-r.w_size,r.w_size,0),t=u,c=r.w_size),s=e.avail_in,o=e.next_in,u=e.input,e.avail_in=c,e.next_in=0,e.input=t,T(r);3<=r.lookahead;){for(n=r.strstart,i=r.lookahead-2;r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+3-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++,--i;);r.strstart=n,r.lookahead=2,T(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=o,e.input=u,e.avail_in=s,r.wrap=a,0},t.deflateInfo="pako deflate (from Nodeca project)"},944:function(e,t,r){"use strict";var i=r(769);function n(e){for(var t=e.length;0<=--t;)e[t]=0}var u=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],c=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],o=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],l=new Array(576);n(l);var h=new Array(60);n(h);var p=new Array(512);n(p);var f=new Array(256);n(f);var d=new Array(29);n(d);var y,g,v,m=new Array(30);function C(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}function a(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function E(e){return e<256?p[e]:p[256+(e>>>7)]}function b(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function S(e,t,r){e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,b(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function T(e,t,r){S(e,r[2*t],r[2*t+1])}function I(e,t){for(var r=0;r|=1&e,e>>>=1,r<<=1,0<--t;);return r>>>1}function A(e,t,r){for(var n,i=new Array(16),a=0,s=1;s<=15;s++)i[s]=a=a+r[s-1]<<1;for(n=0;n<=t;n++){var o=e[2*n+1];0!==o&&(e[2*n]=I(i[o]++,o))}}function w(e){for(var t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function k(e){8<e.bi_valid?b(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function B(e,t,r,n){var i=2*t,a=2*r;return e[i]<e[a]||e[i]===e[a]&&n[t]<=n[r]}function _(e,t,r){for(var n=e.heap[r],i=r<<1;i<=e.heap_len&&(i<e.heap_len&&B(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!B(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n}function P(e,t,r){var n,i,a,s,o=0;if(0!==e.last_lit)for(;n=e.pending_buf[e.d_buf+2*o]<<8|e.pending_buf[e.d_buf+2*o+1],i=e.pending_buf[e.l_buf+o],o++,0==n?T(e,i,t):(T(e,(a=f[i])+256+1,t),0!==(s=u[a])&&S(e,i-=d[a],s),T(e,a=E(--n),r),0!==(s=c[a])&&S(e,n-=m[a],s)),o<e.last_lit;);T(e,256,t)}function N(e,y){var t,r,n,i=y.dyn_tree,a=y.stat_desc.static_tree,s=y.stat_desc.has_stree,o=y.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=573,t=0;t<o;t++)0!==i[2*t]?(e.heap[++e.heap_len]=u=t,e.depth[t]=0):i[2*t+1]=0;for(;e.heap_len<2;)i[2*(n=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[n]=0,e.opt_len--,s&&(e.static_len-=a[2*n+1]);for(y.max_code=u,t=e.heap_len>>1;1<=t;t--)_(e,i,t);for(n=o;t=e.heap[1],e.heap[1]=e.heap[e.heap_len--],_(e,i,1),r=e.heap[1],e.heap[--e.heap_max]=t,e.heap[--e.heap_max]=r,i[2*n]=i[2*t]+i[2*r],e.depth[n]=(e.depth[t]>=e.depth[r]?e.depth[t]:e.depth[r])+1,i[2*t+1]=i[2*r+1]=n,e.heap[1]=n++,_(e,i,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e){for(var t,r,n,i,a,s=y.dyn_tree,o=y.max_code,u=y.stat_desc.static_tree,c=y.stat_desc.has_stree,l=y.stat_desc.extra_bits,h=y.stat_desc.extra_base,p=y.stat_desc.max_length,f=0,d=0;d<=15;d++)e.bl_count[d]=0;for(s[2*e.heap[e.heap_max]+1]=0,t=e.heap_max+1;t<573;t++)(d=s[2*s[2*(r=e.heap[t])+1]+1]+1)>p&&(d=p,f++),s[2*r+1]=d,o<r||(e.bl_count[d]++,i=0,h<=r&&(i=l[r-h]),a=s[2*r],e.opt_len+=a*(d+i),c&&(e.static_len+=a*(u[2*r+1]+i)));if(0!==f){do{for(d=p-1;0===e.bl_count[d];)d--}while(e.bl_count[d]--,e.bl_count[d+1]+=2,e.bl_count[p]--,0<(f-=2));for(d=p;0!==d;d--)for(r=e.bl_count[d];0!==r;)(n=e.heap[--t])>o||(s[2*n+1]!==d&&(e.opt_len+=(d-s[2*n+1])*s[2*n],s[2*n+1]=d),r--)}}(e),A(i,u,e.bl_count)}function R(e,t,r){var n,i,a=-1,s=t[1],o=0,u=7,c=4;for(0===s&&(u=138,c=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=s,s=t[2*(n+1)+1],++o<u&&i===s||(o<c?e.bl_tree[2*i]+=o:0!==i?(i!==a&&e.bl_tree[2*i]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,a=i,c=(o=0)===s?(u=138,3):i===s?(u=6,3):(u=7,4))}function O(e,t,r){var n,i,a=-1,s=t[1],o=0,u=7,c=4;for(0===s&&(u=138,c=3),n=0;n<=r;n++)if(i=s,s=t[2*(n+1)+1],!(++o<u&&i===s)){if(o<c)for(;T(e,i,e.bl_tree),0!=--o;);else 0!==i?(i!==a&&(T(e,i,e.bl_tree),o--),T(e,16,e.bl_tree),S(e,o-3,2)):o<=10?(T(e,17,e.bl_tree),S(e,o-3,3)):(T(e,18,e.bl_tree),S(e,o-11,7));a=i,c=(o=0)===s?(u=138,3):i===s?(u=6,3):(u=7,4)}}n(m);var F=!1;function L(e,t,r,n){S(e,0+(n?1:0),3),t=t,r=r,k(e=e),b(e,r),b(e,~r),i.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}t._tr_init=function(e){F||(function(){for(var e,t,r,n=new Array(16),i=0,a=0;a<28;a++)for(d[a]=i,e=0;e<1<<u[a];e++)f[i++]=a;for(f[i-1]=a,a=r=0;a<16;a++)for(m[a]=r,e=0;e<1<<c[a];e++)p[r++]=a;for(r>>=7;a<30;a++)for(m[a]=r<<7,e=0;e<1<<c[a]-7;e++)p[256+r++]=a;for(t=0;t<=15;t++)n[t]=0;for(e=0;e<=143;)l[2*e+1]=8,e++,n[8]++;for(;e<=255;)l[2*e+1]=9,e++,n[9]++;for(;e<=279;)l[2*e+1]=7,e++,n[7]++;for(;e<=287;)l[2*e+1]=8,e++,n[8]++;for(A(l,287,n),e=0;e<30;e++)h[2*e+1]=5,h[2*e]=I(e,5);y=new C(l,u,257,286,15),g=new C(h,c,0,30,15),v=new C(new Array(0),s,0,19,7)}(),F=!0),e.l_desc=new a(e.dyn_ltree,y),e.d_desc=new a(e.dyn_dtree,g),e.bl_desc=new a(e.bl_tree,v),e.bi_buf=0,e.bi_valid=0,w(e)},t._tr_stored_block=L,t._tr_flush_block=function(e,t,r,n){var i,a,s=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){for(var t=4093624447,r=0;r<=31;r++,t>>>=1)if(1&t&&0!==e.dyn_ltree[2*r])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(r=32;r<256;r++)if(0!==e.dyn_ltree[2*r])return 1;return 0}(e)),N(e,e.l_desc),N(e,e.d_desc),s=function(e){var t;for(R(e,e.dyn_ltree,e.l_desc.max_code),R(e,e.dyn_dtree,e.d_desc.max_code),N(e,e.bl_desc),t=18;3<=t&&0===e.bl_tree[2*o[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(a=e.static_len+3+7>>>3)<=i&&(i=a)):i=a=r+5,r+4<=i&&-1!==t?L(e,t,r,n):4===e.strategy||a===i?(S(e,2+(n?1:0),3),P(e,l,h)):(S(e,4+(n?1:0),3),function(e,t,r,n){var i;for(S(e,t-257,5),S(e,r-1,5),S(e,n-4,4),i=0;i<n;i++)S(e,e.bl_tree[2*o[i]+1],3);O(e,e.dyn_ltree,t-1),O(e,e.dyn_dtree,r-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),P(e,e.dyn_ltree,e.dyn_dtree)),w(e),n&&k(e)},t._tr_tally=function(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(f[r]+256+1)]++,e.dyn_dtree[2*E(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){S(e,2,3),T(e,256,l),16===(e=e).bi_valid?(b(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}},945:function(e,t,r){"use strict";var h=r(946),p=r(769),f=r(847),d=r(849),n=r(810),i=r(848),a=r(949),y=Object.prototype.toString;function s(e){if(!(this instanceof s))return new s(e);this.options=p.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;e=h.inflateInit2(this.strm,t.windowBits);if(e!==d.Z_OK)throw new Error(n[e]);if(this.header=new a,h.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=f.string2buf(t.dictionary):"[object ArrayBuffer]"===y.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(e=h.inflateSetDictionary(this.strm,t.dictionary))!==d.Z_OK))throw new Error(n[e])}function o(e,t){t=new s(t);if(t.push(e,!0),t.err)throw t.msg||n[t.err];return t.result}s.prototype.push=function(e,t){var r,n,i,a,s,o=this.strm,u=this.options.chunkSize,c=this.options.dictionary,l=!1;if(this.ended)return!1;n=t===~~t?t:!0===t?d.Z_FINISH:d.Z_NO_FLUSH,"string"==typeof e?o.input=f.binstring2buf(e):"[object ArrayBuffer]"===y.call(e)?o.input=new Uint8Array(e):o.input=e,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new p.Buf8(u),o.next_out=0,o.avail_out=u),(r=(r=h.inflate(o,d.Z_NO_FLUSH))===d.Z_NEED_DICT&&c?h.inflateSetDictionary(this.strm,c):r)===d.Z_BUF_ERROR&&!0===l&&(r=d.Z_OK,l=!1),r!==d.Z_STREAM_END&&r!==d.Z_OK)return this.onEnd(r),!(this.ended=!0)}while(o.next_out&&(0!==o.avail_out&&r!==d.Z_STREAM_END&&(0!==o.avail_in||n!==d.Z_FINISH&&n!==d.Z_SYNC_FLUSH)||("string"===this.options.to?(i=f.utf8border(o.output,o.next_out),a=o.next_out-i,s=f.buf2string(o.output,i),o.next_out=a,o.avail_out=u-a,a&&p.arraySet(o.output,o.output,i,a,0),this.onData(s)):this.onData(p.shrinkBuf(o.output,o.next_out)))),0===o.avail_in&&0===o.avail_out&&(l=!0),(0<o.avail_in||0===o.avail_out)&&r!==d.Z_STREAM_END);return(n=r===d.Z_STREAM_END?d.Z_FINISH:n)===d.Z_FINISH?(r=h.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===d.Z_OK):n!==d.Z_SYNC_FLUSH||(this.onEnd(d.Z_OK),!(o.avail_out=0))},s.prototype.onData=function(e){this.chunks.push(e)},s.prototype.onEnd=function(e){e===d.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=p.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=s,t.inflate=o,t.inflateRaw=function(e,t){return(t=t||{}).raw=!0,o(e,t)},t.ungzip=o},946:function(e,t,r){"use strict";var _=r(769),P=r(845),N=r(846),R=r(947),O=r(948),F=-2;function L(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function n(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new _.Buf16(320),this.work=new _.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function i(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new _.Buf32(852),t.distcode=t.distdyn=new _.Buf32(592),t.sane=1,t.back=-1,0):F}function a(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,i(e)):F}function s(e,t){var r,n;return e&&e.state?(n=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?F:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,a(e))):F}function o(e,t){var r;return e?(r=new n,(e.state=r).window=null,0!==(t=s(e,t))&&(e.state=null),t):F}var U,D,x=!0;function V(e,t,r,n){var i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new _.Buf8(i.wsize)),n>=i.wsize?(_.arraySet(i.window,t,r-i.wsize,i.wsize,0),i.wnext=0,i.whave=i.wsize):((e=i.wsize-i.wnext)>n&&(e=n),_.arraySet(i.window,t,r-n,e,i.wnext),(n-=e)?(_.arraySet(i.window,t,r-n,n,0),i.wnext=n,i.whave=i.wsize):(i.wnext+=e,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=e))),0}t.inflateReset=a,t.inflateReset2=s,t.inflateResetKeep=i,t.inflateInit=function(e){return o(e,15)},t.inflateInit2=o,t.inflate=function(e,t){var r,n,i,a,s,o,u,c,l,h,p,f,d,y,g,v,m,C,E,b,S,T,I,A,w=0,k=new _.Buf8(4),B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return F;12===(r=e.state).mode&&(r.mode=13),s=e.next_out,i=e.output,u=e.avail_out,a=e.next_in,n=e.input,o=e.avail_in,c=r.hold,l=r.bits,h=o,p=u,T=0;e:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;l<16;){if(0===o)break e;o--,c+=n[a++]<<l,l+=8}if(2&r.wrap&&35615===c){k[r.check=0]=255&c,k[1]=c>>>8&255,r.check=N(r.check,k,2,0),l=c=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",r.mode=30;break}if(8!=(15&c)){e.msg="unknown compression method",r.mode=30;break}if(l-=4,S=8+(15&(c>>>=4)),0===r.wbits)r.wbits=S;else if(S>r.wbits){e.msg="invalid window size",r.mode=30;break}r.dmax=1<<S,e.adler=r.check=1,r.mode=512&c?10:12,l=c=0;break;case 2:for(;l<16;){if(0===o)break e;o--,c+=n[a++]<<l,l+=8}if(r.flags=c,8!=(255&r.flags)){e.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=c>>8&1),512&r.flags&&(k[0]=255&c,k[1]=c>>>8&255,r.check=N(r.check,k,2,0)),l=c=0,r.mode=3;case 3:for(;l<32;){if(0===o)break e;o--,c+=n[a++]<<l,l+=8}r.head&&(r.head.time=c),512&r.flags&&(k[0]=255&c,k[1]=c>>>8&255,k[2]=c>>>16&255,k[3]=c>>>24&255,r.check=N(r.check,k,4,0)),l=c=0,r.mode=4;case 4:for(;l<16;){if(0===o)break e;o--,c+=n[a++]<<l,l+=8}r.head&&(r.head.xflags=255&c,r.head.os=c>>8),512&r.flags&&(k[0]=255&c,k[1]=c>>>8&255,r.check=N(r.check,k,2,0)),l=c=0,r.mode=5;case 5:if(1024&r.flags){for(;l<16;){if(0===o)break e;o--,c+=n[a++]<<l,l+=8}r.length=c,r.head&&(r.head.extra_len=c),512&r.flags&&(k[0]=255&c,k[1]=c>>>8&255,r.check=N(r.check,k,2,0)),l=c=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&((f=(f=r.length)>o?o:f)&&(r.head&&(S=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),_.arraySet(r.head.extra,n,a,f,S)),512&r.flags&&(r.check=N(r.check,n,f,a)),o-=f,a+=f,r.length-=f),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===o)break e;for(f=0;S=n[a+f++],r.head&&S&&r.length<65536&&(r.head.name+=String.fromCharCode(S)),S&&f<o;);if(512&r.flags&&(r.check=N(r.check,n,f,a)),o-=f,a+=f,S)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===o)break e;for(f=0;S=n[a+f++],r.head&&S&&r.length<65536&&(r.head.comment+=String.fromCharCode(S)),S&&f<o;);if(512&r.flags&&(r.check=N(r.check,n,f,a)),o-=f,a+=f,S)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;l<16;){if(0===o)break e;o--,c+=n[a++]<<l,l+=8}if(c!==(65535&r.check)){e.msg="header crc mismatch",r.mode=30;break}l=c=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=12;break;case 10:for(;l<32;){if(0===o)break e;o--,c+=n[a++]<<l,l+=8}e.adler=r.check=L(c),l=c=0,r.mode=11;case 11:if(0===r.havedict)return e.next_out=s,e.avail_out=u,e.next_in=a,e.avail_in=o,r.hold=c,r.bits=l,2;e.adler=r.check=1,r.mode=12;case 12:if(5===t||6===t)break e;case 13:if(r.last){c>>>=7&l,l-=7&l,r.mode=27;break}for(;l<3;){if(0===o)break e;o--,c+=n[a++]<<l,l+=8}switch(r.last=1&c,--l,3&(c>>>=1)){case 0:r.mode=14;break;case 1:if(function(e){if(x){var t;for(U=new _.Buf32(512),D=new _.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(O(1,e.lens,0,288,U,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;O(2,e.lens,0,32,D,0,e.work,{bits:5}),x=!1}e.lencode=U,e.lenbits=9,e.distcode=D,e.distbits=5}(r),r.mode=20,6!==t)break;c>>>=2,l-=2;break e;case 2:r.mode=17;break;case 3:e.msg="invalid block type",r.mode=30}c>>>=2,l-=2;break;case 14:for(c>>>=7&l,l-=7&l;l<32;){if(0===o)break e;o--,c+=n[a++]<<l,l+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&c,l=c=0,r.mode=15,6===t)break e;case 15:r.mode=16;case 16:if(f=r.length){if(0===(f=u<(f=o<f?o:f)?u:f))break e;_.arraySet(i,n,a,f,s),o-=f,a+=f,u-=f,s+=f,r.length-=f;break}r.mode=12;break;case 17:for(;l<14;){if(0===o)break e;o--,c+=n[a++]<<l,l+=8}if(r.nlen=257+(31&c),c>>>=5,l-=5,r.ndist=1+(31&c),c>>>=5,l-=5,r.ncode=4+(15&c),c>>>=4,l-=4,286<r.nlen||30<r.ndist){e.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;l<3;){if(0===o)break e;o--,c+=n[a++]<<l,l+=8}r.lens[B[r.have++]]=7&c,c>>>=3,l-=3}for(;r.have<19;)r.lens[B[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,I={bits:r.lenbits},T=O(0,r.lens,0,19,r.lencode,0,r.work,I),r.lenbits=I.bits,T){e.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;v=(w=r.lencode[c&(1<<r.lenbits)-1])>>>16&255,m=65535&w,!((g=w>>>24)<=l);){if(0===o)break e;o--,c+=n[a++]<<l,l+=8}if(m<16)c>>>=g,l-=g,r.lens[r.have++]=m;else{if(16===m){for(A=g+2;l<A;){if(0===o)break e;o--,c+=n[a++]<<l,l+=8}if(c>>>=g,l-=g,0===r.have){e.msg="invalid bit length repeat",r.mode=30;break}S=r.lens[r.have-1],f=3+(3&c),c>>>=2,l-=2}else if(17===m){for(A=g+3;l<A;){if(0===o)break e;o--,c+=n[a++]<<l,l+=8}l-=g,S=0,f=3+(7&(c>>>=g)),c>>>=3,l-=3}else{for(A=g+7;l<A;){if(0===o)break e;o--,c+=n[a++]<<l,l+=8}l-=g,S=0,f=11+(127&(c>>>=g)),c>>>=7,l-=7}if(r.have+f>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=30;break}for(;f--;)r.lens[r.have++]=S}}if(30===r.mode)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,I={bits:r.lenbits},T=O(1,r.lens,0,r.nlen,r.lencode,0,r.work,I),r.lenbits=I.bits,T){e.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,I={bits:r.distbits},T=O(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,I),r.distbits=I.bits,T){e.msg="invalid distances set",r.mode=30;break}if(r.mode=20,6===t)break e;case 20:r.mode=21;case 21:if(6<=o&&258<=u){e.next_out=s,e.avail_out=u,e.next_in=a,e.avail_in=o,r.hold=c,r.bits=l,R(e,p),s=e.next_out,i=e.output,u=e.avail_out,a=e.next_in,n=e.input,o=e.avail_in,c=r.hold,l=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;v=(w=r.lencode[c&(1<<r.lenbits)-1])>>>16&255,m=65535&w,!((g=w>>>24)<=l);){if(0===o)break e;o--,c+=n[a++]<<l,l+=8}if(v&&0==(240&v)){for(C=g,E=v,b=m;v=(w=r.lencode[b+((c&(1<<C+E)-1)>>C)])>>>16&255,m=65535&w,!(C+(g=w>>>24)<=l);){if(0===o)break e;o--,c+=n[a++]<<l,l+=8}c>>>=C,l-=C,r.back+=C}if(c>>>=g,l-=g,r.back+=g,r.length=m,0===v){r.mode=26;break}if(32&v){r.back=-1,r.mode=12;break}if(64&v){e.msg="invalid literal/length code",r.mode=30;break}r.extra=15&v,r.mode=22;case 22:if(r.extra){for(A=r.extra;l<A;){if(0===o)break e;o--,c+=n[a++]<<l,l+=8}r.length+=c&(1<<r.extra)-1,c>>>=r.extra,l-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;v=(w=r.distcode[c&(1<<r.distbits)-1])>>>16&255,m=65535&w,!((g=w>>>24)<=l);){if(0===o)break e;o--,c+=n[a++]<<l,l+=8}if(0==(240&v)){for(C=g,E=v,b=m;v=(w=r.distcode[b+((c&(1<<C+E)-1)>>C)])>>>16&255,m=65535&w,!(C+(g=w>>>24)<=l);){if(0===o)break e;o--,c+=n[a++]<<l,l+=8}c>>>=C,l-=C,r.back+=C}if(c>>>=g,l-=g,r.back+=g,64&v){e.msg="invalid distance code",r.mode=30;break}r.offset=m,r.extra=15&v,r.mode=24;case 24:if(r.extra){for(A=r.extra;l<A;){if(0===o)break e;o--,c+=n[a++]<<l,l+=8}r.offset+=c&(1<<r.extra)-1,c>>>=r.extra,l-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===u)break e;if(r.offset>(f=p-u)){if((f=r.offset-f)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=30;break}d=f>r.wnext?(f-=r.wnext,r.wsize-f):r.wnext-f,f>r.length&&(f=r.length),y=r.window}else y=i,d=s-r.offset,f=r.length;for(u-=f=u<f?u:f,r.length-=f;i[s++]=y[d++],--f;);0===r.length&&(r.mode=21);break;case 26:if(0===u)break e;i[s++]=r.length,u--,r.mode=21;break;case 27:if(r.wrap){for(;l<32;){if(0===o)break e;o--,c|=n[a++]<<l,l+=8}if(p-=u,e.total_out+=p,r.total+=p,p&&(e.adler=r.check=(r.flags?N:P)(r.check,i,p,s-p)),p=u,(r.flags?c:L(c))!==r.check){e.msg="incorrect data check",r.mode=30;break}l=c=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;l<32;){if(0===o)break e;o--,c+=n[a++]<<l,l+=8}if(c!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=30;break}l=c=0}r.mode=29;case 29:T=1;break e;case 30:T=-3;break e;case 31:return-4;default:return F}return e.next_out=s,e.avail_out=u,e.next_in=a,e.avail_in=o,r.hold=c,r.bits=l,(r.wsize||p!==e.avail_out&&r.mode<30&&(r.mode<27||4!==t))&&V(e,e.output,e.next_out,p-e.avail_out)?(r.mode=31,-4):(h-=e.avail_in,p-=e.avail_out,e.total_in+=h,e.total_out+=p,r.total+=p,r.wrap&&p&&(e.adler=r.check=(r.flags?N:P)(r.check,i,p,e.next_out-p)),e.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),T=(0==h&&0===p||4===t)&&0===T?-5:T)},t.inflateEnd=function(e){if(!e||!e.state)return F;var t=e.state;return t.window&&(t.window=null),e.state=null,0},t.inflateGetHeader=function(e,t){var r;return!e||!e.state||0==(2&(r=e.state).wrap)?F:((r.head=t).done=!1,0)},t.inflateSetDictionary=function(e,t){var r,n=t.length;return!e||!e.state||0!==(r=e.state).wrap&&11!==r.mode?F:11===r.mode&&P(1,t,n,0)!==r.check?-3:V(e,t,n,n)?(r.mode=31,-4):(r.havedict=1,0)},t.inflateInfo="pako inflate (from Nodeca project)"},947:function(e,t,r){"use strict";e.exports=function(e,t){var r,n,i,a,s,o,u=e.state,c=e.next_in,l=e.input,h=c+(e.avail_in-5),p=e.next_out,f=e.output,d=p-(t-e.avail_out),y=p+(e.avail_out-257),g=u.dmax,v=u.wsize,m=u.whave,C=u.wnext,E=u.window,b=u.hold,S=u.bits,T=u.lencode,I=u.distcode,A=(1<<u.lenbits)-1,w=(1<<u.distbits)-1;e:do{S<15&&(b+=l[c++]<<S,S+=8,b+=l[c++]<<S,S+=8),r=T[b&A];t:for(;;){if(b>>>=n=r>>>24,S-=n,0==(n=r>>>16&255))f[p++]=65535&r;else{if(!(16&n)){if(0==(64&n)){r=T[(65535&r)+(b&(1<<n)-1)];continue t}if(32&n){u.mode=12;break e}e.msg="invalid literal/length code",u.mode=30;break e}i=65535&r,(n&=15)&&(S<n&&(b+=l[c++]<<S,S+=8),i+=b&(1<<n)-1,b>>>=n,S-=n),S<15&&(b+=l[c++]<<S,S+=8,b+=l[c++]<<S,S+=8),r=I[b&w];r:for(;;){if(b>>>=n=r>>>24,S-=n,!(16&(n=r>>>16&255))){if(0==(64&n)){r=I[(65535&r)+(b&(1<<n)-1)];continue r}e.msg="invalid distance code",u.mode=30;break e}if(a=65535&r,S<(n&=15)&&(b+=l[c++]<<S,(S+=8)<n&&(b+=l[c++]<<S,S+=8)),(a+=b&(1<<n)-1)>g){e.msg="invalid distance too far back",u.mode=30;break e}if(b>>>=n,S-=n,a>(n=p-d)){if((n=a-n)>m&&u.sane){e.msg="invalid distance too far back",u.mode=30;break e}if(o=E,(s=0)===C){if(s+=v-n,n<i){for(i-=n;f[p++]=E[s++],--n;);s=p-a,o=f}}else if(C<n){if(s+=v+C-n,(n-=C)<i){for(i-=n;f[p++]=E[s++],--n;);if(s=0,C<i){for(i-=n=C;f[p++]=E[s++],--n;);s=p-a,o=f}}}else if(s+=C-n,n<i){for(i-=n;f[p++]=E[s++],--n;);s=p-a,o=f}for(;2<i;)f[p++]=o[s++],f[p++]=o[s++],f[p++]=o[s++],i-=3;i&&(f[p++]=o[s++],1<i&&(f[p++]=o[s++]))}else{for(s=p-a;f[p++]=f[s++],f[p++]=f[s++],f[p++]=f[s++],2<(i-=3););i&&(f[p++]=f[s++],1<i&&(f[p++]=f[s++]))}break}}break}}while(c<h&&p<y);c-=i=S>>3,b&=(1<<(S-=i<<3))-1,e.next_in=c,e.next_out=p,e.avail_in=c<h?h-c+5:5-(c-h),e.avail_out=p<y?y-p+257:257-(p-y),u.hold=b,u.bits=S}},948:function(e,t,r){"use strict";var F=r(769),L=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],U=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],D=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],x=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,r,n,i,a,s,o){for(var u,c,l,h,p,f,d,y,g,v=o.bits,m=0,C=0,E=0,b=0,S=0,T=0,I=0,A=0,w=0,k=0,B=null,_=0,P=new F.Buf16(16),N=new F.Buf16(16),R=null,O=0,m=0;m<=15;m++)P[m]=0;for(C=0;C<n;C++)P[t[r+C]]++;for(S=v,b=15;1<=b&&0===P[b];b--);if(b<S&&(S=b),0===b)return i[a++]=20971520,i[a++]=20971520,o.bits=1,0;for(E=1;E<b&&0===P[E];E++);for(S<E&&(S=E),m=A=1;m<=15;m++)if(A<<=1,(A-=P[m])<0)return-1;if(0<A&&(0===e||1!==b))return-1;for(N[1]=0,m=1;m<15;m++)N[m+1]=N[m]+P[m];for(C=0;C<n;C++)0!==t[r+C]&&(s[N[t[r+C]]++]=C);if(f=0===e?(B=R=s,19):1===e?(B=L,_-=257,R=U,O-=257,256):(B=D,R=x,-1),m=E,p=a,I=C=k=0,l=-1,h=(w=1<<(T=S))-1,1===e&&852<w||2===e&&592<w)return 1;for(;;){for(g=s[C]<f?(y=0,s[C]):s[C]>f?(y=R[O+s[C]],B[_+s[C]]):(y=96,0),u=1<<(d=m-I),E=c=1<<T;i[p+(k>>I)+(c-=u)]=d<<24|y<<16|g|0,0!==c;);for(u=1<<m-1;k&u;)u>>=1;if(0!==u?(k&=u-1,k+=u):k=0,C++,0==--P[m]){if(m===b)break;m=t[r+s[C]]}if(S<m&&(k&h)!==l){for(p+=E,A=1<<(T=m-(I=0===I?S:I));T+I<b&&!((A-=P[T+I])<=0);)T++,A<<=1;if(w+=1<<T,1===e&&852<w||2===e&&592<w)return 1;i[l=k&h]=S<<24|T<<16|p-a|0}}return 0!==k&&(i[p+k]=m-I<<24|64<<16|0),o.bits=S,0}},949:function(e,t,r){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},950:function(e,t,r){"use strict";e.exports={zip:!1,format:"general",contentAlg:"A128CBC-HS256",protect:"*"}},951:function(e,t,a){"use strict";!function(d){var y=a(782),r=a(842),g=a(772),v=a(766),m=a(844),n={algorithms:"*"};function i(e,t){var p,f;if(g.isKey(e))f=(p=e).keystore;else{if(!g.isKeyStore(e))throw new TypeError("Keystore must be provided");f=e}t=v(n,t),Object.defineProperty(this,"decrypt",{value:function(i,e){var a=(e=v({},t,e||{})).handlers||{},s=Object.keys(a),n=new r(e.algorithms);if("string"==typeof i)i={protected:(i=i.split("."))[0],recipients:[{encrypted_key:i[1]}],iv:i[2],ciphertext:i[3],tag:i[4]};else if(!i||"object"!=typeof i)throw new Error("invalid input");"encrypted_key"in i&&(i.recipients=[{encrypted_key:i.encrypted_key}]);var o,u,c,l,h,e=i.recipients||[{}];return Promise.resolve(e).then(function(e){if(i.protected){u=y.decode(i.protected).toString("utf8");var t=(u=JSON.parse(u)).crit;if(t){if(!Array.isArray(t))return Promise.reject(new Error("Invalid 'crit' header"));for(var r=0;t.length>r;r++)if(-1===s.indexOf(t[r]))return Promise.reject(new Error("Critical extension is not supported: "+t[r]))}o=u,u=Object.keys(u)}else o={},u=[];return o=v(i.unprotected||{},o),e=e.map(function(e){var t=Promise.resolve(),r=e.header||{},r=v(r,o);return e.header=r,e.protected=u,n.match(r.alg)||(t=t.then(function(){return Promise.reject(new Error("Algorithm not allowed: "+r.alg))})),n.match(r.enc)||(t=t.then(function(){return Promise.reject(new Error("Algorithm not allowed: "+r.enc))})),(t=r.epk?(t=t.then(function(){return g.asKey(r.epk)})).then(function(e){r.epk=e.toObject(!1)}):t).then(function(){return e})}),Promise.all(e)}).then(function(i){var a={};return new Promise(function(r,e){var n=function(){var t=i.shift();t?Promise.resolve(t).then(function(e){var t=h=e.encrypted_key||"",t=y.decode(t);return(c=p||f.get({use:"enc",alg:e.header.alg,kid:e.header.kid}))?c.unwrap(e.header.alg,t,e.header):Promise.reject()}).then(function(e){l={kty:"oct",k:y.encode(e)},l=g.asKey(l),a.key=c,a.header=t.header,a.protected=t.protected,r(a)}).catch(n):e(new Error("no key found"))};n()})}).then(function(e){return e.iv=i.iv,e.tag=i.tag,e.ciphertext=i.ciphertext,e}).then(function(r){var n=[];return s.forEach(function(e){var t;"function"==typeof(e=a[e])?t=e(r):"object"==typeof e&&"function"==typeof e.prepare&&(t=e.prepare(r)),t&&n.push(Promise.resolve(t))}),Promise.all(n).then(function(){return r})}).then(function(e){return d.isBuffer(e.ciphertext)||(e.ciphertext=y.decode(e.ciphertext)),e}).then(function(t){var e=i.protected;"aad"in i&&null!=i.aad&&(e+="."+i.aad);var r={iv:t.iv,adata:e,tag:t.tag,kdata:h,epu:t.epu,epv:t.epv},n=t.ciphertext;return delete t.iv,delete t.tag,delete t.ciphertext,l.then(function(e){return e.decrypt(t.header.enc,n,r).then(function(e){return t.payload=t.plaintext=e,t})})}).then(function(n){return"DEF"===n.header.zip?new Promise(function(e,t){try{var r=m.inflateRaw(d.from(n.plaintext));n.payload=n.plaintext=d.from(r),e(n)}catch(e){t(e)}}):n}).then(function(r){var n=[];return s.forEach(function(e){var t;(t="object"==typeof(e=a[e])&&"function"==typeof e.complete?e.complete(r):t)&&n.push(Promise.resolve(t))}),Promise.all(n).then(function(){return r})})}})}e.exports={decrypter:i,createDecrypt:function(e,t){return new i(e,t)}}}.call(this,a(360).Buffer)},952:function(i,e,a){"use strict";!function(t){var r=a(953),n=a(954),e=i.exports=function(e){if(t.isBuffer(e))return r(e.toString("ascii"));if("string"==typeof e)return r(e);if(e)return n(e);throw new TypeError("invalid input")};e.compact=r,e.json=n}.call(this,a(360).Buffer)},953:function(e,t,r){"use strict";var i={JWE:r(809),JWS:r(793),util:r(759)};e.exports=function(r){var e,t,n=r.split(".");if(3===n.length)e="JWS",t=function(e,t){return i.JWS.createVerify(e).verify(r,t)};else{if(5!==n.length)throw new TypeError("invalid jose serialization");e="JWE",t=function(e,t){return i.JWE.createDecrypt(e).decrypt(r,t)}}return n=i.util.base64url.decode(n[0],"utf8"),n=JSON.parse(n),{type:e,format:"compact",input:r,header:n,perform:t}}},954:function(e,t,r){"use strict";var a=r(766),s={JWE:r(809),JWS:r(793),util:r(759)};e.exports=function(r){var e,t,n,i;return"signatures"in r||"signature"in r?(t="JWS",n=function(e,t){return s.JWS.createVerify(e).verify(r,t)},e=(e=r.signatures||[{protected:r.protected,header:r.header,signature:r.signature}]).map(function(e){var t={};return e.header&&(t=a(t,e.header)),e.protected&&(e=e.protected,e=s.util.base64url.decode(e,"utf8"),e=JSON.parse(e),t=a(t,e)),t})):"ciphertext"in r&&(t="JWE",n=function(e,t){return s.JWE.createDecrypt(e).decrypt(r,t)},i={},r.protected&&(i.protected=r.protected,i.protected=s.util.base64url.decode(i.protected,"utf8"),i.protected=JSON.parse(i.protected)),r.unprotected&&(i.unprotected=r.unprotected),e=(e=r.recipients||[{}]).map(function(e){var t={};return e.header&&(t=a(t,e.header)),i.unprotected&&(t=a(t,i.unprotected)),t=i.protected?a(t,i.protected):t})),{type:t,format:"json",input:r,all:e,perform:n}}},971:function(e,t,r){var n=r(361);e.exports=function(){return n.Date.now()}},973:function(e,t,r){"use strict";var n=r(10),i=r.n(n),r=r(48);t.a=r.a.createActions(function e(){i()(this,e),this.generateActions("setInitialState","getSubsPackagesFailure","getSubscriptionPackagesSuccess","postDataRefresh")})},981:function(e,t,r){var m=r(364),C=r(971),E=r(875),b=Math.max,S=Math.min;e.exports=function(n,r,e){var i,a,s,o,u,c,l=0,h=!1,p=!1,t=!0;if("function"!=typeof n)throw new TypeError("Expected a function");function f(e){var t=i,r=a;return i=a=void 0,l=e,o=n.apply(r,t)}function d(e){var t=e-c;return void 0===c||r<=t||t<0||p&&s<=e-l}function y(){var e,t=C();if(d(t))return g(t);u=setTimeout(y,(e=r-(t-c),p?S(e,s-(t-l)):e))}function g(e){return u=void 0,t&&i?f(e):(i=a=void 0,o)}function v(){var e=C(),t=d(e);if(i=arguments,a=this,c=e,t){if(void 0===u)return l=t=c,u=setTimeout(y,r),h?f(t):o;if(p)return clearTimeout(u),u=setTimeout(y,r),f(c)}return void 0===u&&(u=setTimeout(y,r)),o}return r=E(r)||0,m(e)&&(h=!!e.leading,s=(p="maxWait"in e)?b(E(e.maxWait)||0,r):s,t="trailing"in e?!!e.trailing:t),v.cancel=function(){void 0!==u&&clearTimeout(u),i=c=a=u=void(l=0)},v.flush=function(){return void 0===u?o:g(C())},v}}}]);
