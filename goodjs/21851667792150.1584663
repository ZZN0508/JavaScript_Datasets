(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{"8e02":function(e,t,n){"use strict";n.r(t);var c=n("44ad"),l=n.n(c),r=n("d869"),u=n.n(r),d=n("8af1"),f=n.n(d),o=n("63f1"),i=n.n(o),a=n("0a81"),s=n("a9a1"),p=n("ea0d"),r=n("8a2d"),o=(n("0592"),n("0b3c")),m={0:"#CCCCCC",1:"#A2DB00",2:"#DA0000",3:"#DA0000"},h=o.d.div(["background:#7b0000;border-bottom:solid 1px #a60000;height:60px;line-height:60px;box-sizing:border-box;a{box-sizing:border-box;padding:0 20px;display:block;width:100%;height:100%;}&:hover{background:#a60000;}"]),g=o.d.span(["padding-left:12px;font-size:12px;color:#ed7a7a;"]),y=o.d.span(["float:right;font-size:36px;color:",";"],function(e){e=e.status;return m[e]}),C=o.d.span(["display:inline-block;vertical-align:middle;border-radius:50%;height:40px;width:40px;position:relative;i,&::before{display:block;height:40px;width:40px;background-size:cover;background-position:center;background-repeat:no-repeat;border-radius:50%;position:absolute;top:0;left:0;}"]),b=n("bb1d"),E=n("1cab");function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function S(){E.default.trackGenericEvent({eventLabel:"History model click",eventCategory:E.GA_CONST.PAGE.LISTS})}o=function(e){var t=e.id,r=e.displayName,n=e.status,o=e.profilePictureUrl,e=void 0===o?c.Config.get("newPerformerImageSmall"):o,n=(o=Object(d.useState)(n),n=2,function(e){if(Array.isArray(e))return e}(o)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}}(o,n)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}(o,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=n[0],a=n[1],s=Object(d.useCallback)(function(e){e=parseInt(e[t],10);e&&i!==e&&a(e)},[t,i]);return Object(d.useEffect)(function(){return l.a.Broadcaster.on(u.a.BasicController.GLOBALEVENT_GLOBAL_STATUS_CHANGE,s),function(){return l.a.Broadcaster.un(u.a.BasicController.GLOBALEVENT_GLOBAL_STATUS_CHANGE,s)}},[s]),f.a.createElement(h,{"data-performer-id":t,onClick:S,"data-testid":"PerformerHistoryItemItem"},f.a.createElement(b.a,{href:Object(c.getUrl)("Chat/Performer",{performerId:r},{}),to:"chat/".concat(r),trigger:!0,preventNavigateBack:!0,title:r,"data-testid":"PerformerHistoryItemRouteManagerLink"},f.a.createElement(C,{"data-testid":"PerformerHistoryItemAvatar"},f.a.createElement("i",{style:{backgroundImage:"url(".concat(e,")")}})),f.a.createElement(g,{"data-testid":"PerformerHistoryItemPerformerName"},r),f.a.createElement(y,{status:i,"data-testid":"PerformerHistoryItemStatus"},"â€¢")))};o.propTypes={id:r.number.isRequired,displayName:r.string.isRequired,status:r.number,profilePictureUrl:r.string.isRequired},o.defaultProps={status:0};var _=o;function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function P(){function e(e){e=e.isOpened,r(e)}var t=(n=(t=Object(d.useState)(!1),o=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}}(t,o)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?O(e,t):void 0}}(t,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))[0],r=n[1],n=(o=Object(p.a)()).order,o=o.collection;return Object(d.useEffect)(function(){return l.a.Broadcaster.on(u.a.PerformerHistory.TOGGLE_SIDEBAR,e),function(){l.a.Broadcaster.un(u.a.PerformerHistory.TOGGLE_SIDEBAR,e)}},[]),t?f.a.createElement(I,{order:n,collection:o,"data-testid":"PerformerHistoryComponentList"}):null}var I=f.a.memo(function(e){var t=e.order,r=e.collection;return t.map(function(e){return f.a.createElement(_,{key:"phi_".concat(e),id:r[e].id,displayName:r[e].displayName,status:r[e].status,profilePictureUrl:r[e].url,"data-testid":"PerformerHistoryComponentPerformerHistoryItem"})})}),k=n("dace"),L=n("9042"),o=n("990a"),x=n.n(o),o=n("124a"),A=n.n(o),o=n("d7c3"),B=n.n(o);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function D(e,t,r){return(D="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=M(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(r):t.value}})(e,t,r||e)}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=M(r);return e=n?(e=M(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==w(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}o=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(r,n("1e4a").default);var e,t=N(r);function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),t.apply(this,arguments)}return e=[{key:"name",get:function(){return"ListPageIndex"}},{key:"listPageComponentName",get:function(){return x.a}},{key:"hideCls",get:function(){return"hide"}},{key:"orderDropDownId",get:function(){return"order_dropdown"}},{key:"myContentDropDownId",get:function(){return"category_dropdown"}},{key:"languageDropDownId",get:function(){return"language_dropdown"}},{key:"isRandomPlayerEnabled",get:function(){return!0}},{key:"isPerformerSwapEnabled",get:function(){return!0}},{key:"sidebarCategorySel",get:function(){return".category_item"}},{key:"listpageContainerId",get:function(){return"listpage_container"}},{key:"toggleSidebarButton",get:function(){return".toggle_sidebar_button"}},{key:"init",value:function(e,t){i.a.render(f.a.createElement(a.a,{store:s.store},f.a.createElement(P,null)),document.querySelector(".sidebar_history")),this._sidebarCategories=Ext.getBody().select(".sidebar_categories").item(0),this._activeCategoryTab=this._sidebarCategories&&this._sidebarCategories.data("activetab"),this._setOrderComponent(),this._setSelectComponent(),this._setLanguageComponent(),D(M(r.prototype),"init",this).call(this,e,t),this.showMoreJson=l.a.Config.get("listPageRoutes").showMoreJson||"Index/ShowMoreJson"}},{key:"_setOrderComponent",value:function(){return this._refreshContentByOrderCmp instanceof B.a||!Ext.get(this.orderDropDownId)||(this._refreshContentByOrderCmp=new B.a(this.orderDropDownId,{hideCls:this.hideCls})),this._refreshContentByOrderCmp}},{key:"_setSelectComponent",value:function(){return this._myContentSelectCmp instanceof A.a||!Ext.get(this.myContentDropDownId)||(this._myContentSelectCmp=new A.a(this.myContentDropDownId,{})),this._myContentSelectCmp}},{key:"_setLanguageComponent",value:function(){return this._languageSelectCmp instanceof A.a||!Ext.get(this.languageDropDownId)||(this._languageSelectCmp=new A.a(this.languageDropDownId,{})),this._languageSelectCmp}},{key:"_destroyOrderComponent",value:function(){this._refreshContentByOrderCmp&&(this._refreshContentByOrderCmp.controller.destroy(),delete this._refreshContentByOrderCmp.controller,this._refreshContentByOrderCmp.destroy(),delete this._refreshContentByOrderCmp)}},{key:"onToggleSidebarButtonClick",value:function(e,t){Ext.getBody().toggleClass("sidebar-closed"),Ext.get(t).toggleClass("open"),l.a.fireEvent(u.a.IndexIndex.GLOBALEVENT_TOGGLE_SIDEBAR_BUTTON_CLICK,this)}},{key:"hasHistoryDataInStorage",value:function(){var e=JSON.parse(localStorage.getItem(u.a.PerformerHistory.PERFORMERS_HISTORY_STORAGE_KEY));return 0<(null==e?void 0:e.order.length)}},{key:"onSidebarCategoryClick",value:function(e){var t=this,r=e.getTarget(".category_item",4,!0);r.data("tabid")!==this._activeCategoryTab&&!r.hasClass("history")||e.preventDefault(),r.hasClass("history")?this.hasHistoryDataInStorage()?(Ext.getBody().toggleClass("history-open"),l.a.fireEvent(u.a.PerformerHistory.TOGGLE_SIDEBAR,{isOpened:!0}),E.default.trackGenericEvent({eventLabel:"Side menu - History Icon",eventCategory:E.GA_CONST.PAGE.LISTS})):(r=this.createHistoryPopoverContainer(r.dom),i.a.render(f.a.createElement(L.b,{content:l.a.translate("Your history is empty."),isOpen:!0,autoHideDelay:4e3,position:k.a.BOTTOM,onClosed:function(){return t.unmountHistoryPopover()},target:f.a.createElement("div",null)}),r),E.default.trackGenericEvent({eventLabel:"Side menu - History Icon - History empty",eventCategory:E.GA_CONST.PAGE.LISTS})):(Ext.getBody().removeClass("history-open"),l.a.fireEvent(u.a.PerformerHistory.TOGGLE_SIDEBAR,{isOpened:!1}))}},{key:"createHistoryPopoverContainer",value:function(e){var t=document.querySelector(".history_popover_container");if(t)return t;t=document.createElement("div");return t.className="history_popover_container",e.appendChild(t)}},{key:"unmountHistoryPopover",value:function(){var e=document.querySelector(".history_popover_container");e&&(i.a.unmountComponentAtNode(e),e.parentNode.removeChild(e))}},{key:"onLogIn",value:function(){this._destroyOrderComponent(),this._setOrderComponent()}},{key:"bind",value:function(){D(M(r.prototype),"bind",this).call(this),l.a.on([{element:l.a.Broadcaster,event:u.a.LoginComponent.GLOBALEVENT_LOG_IN,handler:this.onLogIn,scope:this},{element:this.element,event:"click",handler:this.onToggleSidebarButtonClick,options:{delegate:this.toggleSidebarButton}},{element:this.element,event:"click",handler:this.onSidebarCategoryClick,options:{delegate:this.sidebarCategorySel}}],this)}}],T(r.prototype,e),r}();t.default=o},"990a":function(e,t,r){function n(e,t){n.superclass.constructor.call(this,e,t)}var o=r("d59f").default,i=r("e91e"),a=r("fec8"),r=r("f244");e.exports=Ext.extend(n,o,{name:"IndexListPageComponent",controllerClassName:i,viewClassName:a,modelClassName:r,listPageControllerListeners:{IndexBroadcaster:{"header-logo-click":"onHeaderLogoClick","live-cams-link-click":"onHeaderLogoClick"}},_setController:function(){n.superclass._setController.call(this),this.enablePerformerSwap()}})},e91e:function(e,t,r){function n(e,t){n.superclass.constructor.call(this,e,t)}var o=r("44ad"),i=r("7ab0"),a=r("768e"),s=r("b356").default,c=r("8c4f").disableActiveCampaign,l=s.EVENT.MEMBER.FEEDBACK_LEVEL_CHANGED,u=s.EVENT.MEMBER.SMART_BUY_SUCCESS,d=s.EVENT.MEMBER.CAMPAIGN_USED,f=s.EVENT.MEMBER.CAMPAIGN_CLAIMED,p=s.EVENT.MEMBER.CAMPAIGN_DISABLED;e.exports=Ext.extend(n,a,{name:"IndexListPageController",init:function(e,t){n.superclass.init.call(this,e,t);var r=o.bind(this.ListPageModel.refreshCommercial,this.ListPageModel),t=s.getClient();t.on(l,r),t.on(u,r),t.on(d,r),t.on(f,r),t.on(p,function(){r(),c()})},onHeaderLogoClick:function(e){i.isHokkaido()||this.ListPageModel.needPageReload()||"0"!==o.getMeta("isSearchPage")||(e.preventDefault(),e={orderType:o.Config.get("listPageOrderType")},this.onRefreshListPage(e))},onLoggedIn:function(){n.superclass.onLoggedIn.call(this),this.refreshExistingCommercial()},onSignUpSuccess:function(){n.superclass.onSignUpSuccess.call(this),this.refreshExistingCommercial()},onFirstBillComplete:function(){n.superclass.onFirstBillComplete.call(this);var e=this;setTimeout(function(){e.refreshExistingCommercial()},1e3)},onLuckyWheelSpun:function(){n.superclass.onLuckyWheelSpun.call(this);var e=this;setTimeout(function(){e.refreshExistingCommercial()},4e3)},onGuestWheelOfFortuneSpun:function(){this.refreshExistingCommercial()},onCommercialCountdownEnd:function(){n.superclass.onCommercialCountdownEnd.call(this);var e=this;setTimeout(function(){e.refreshExistingCommercial()},1e3)},onAppletQuickBuySuccess:function(){this.ListPageModel.refreshCommercial()},onQuickBuySuccess:function(){n.superclass.onQuickBuySuccess.call(this),this.refreshExistingCommercial()},onListPageCommercialABTest:function(){n.superclass.onListPageCommercialABTest.call(this),this.refreshExistingCommercial()},refreshExistingCommercial:function(){document.getElementsByClassName("commercial_container").length&&this.ListPageModel.refreshCommercial()}})},f244:function(e,t,r){function n(e,t){n.superclass.constructor.call(this,e,t)}var o=r("44ad"),i=r("9810").default,a=r("d869"),r=r("b07d");e.exports=Ext.extend(n,r,{name:"IndexListPageModel",refreshCommercial:function(){this.fetch({url:o.getUrl(this.commercialRefreshRouting,{listPageId:o.getMeta(this.listPageId),isSearchPage:o.getMeta(this.isSearchPage)},{},""),method:"POST",success:o.bind(this._onRefreshCommercialSuccess,this)}),i.init()},_onRefreshCommercialSuccess:function(e){o.hasPath(e,"json.data")&&this.fireEvent(a.ListPageModelAbstract.EVENT_SWAPPED_COMMERCIAL,e.json.data)}})},fec8:function(e,t,r){function n(e,t){n.superclass.constructor.call(this,e,t)}r=r("e481").default;e.exports=Ext.extend(n,r,{name:"IndexListPageView"})}}]);
