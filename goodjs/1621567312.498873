(window.shark_home_jsonp=window.shark_home_jsonp||[]).push([["leftElevator~e2e93592"],{"2d614":function(e,t){e.exports=sdkd479d126aaa128c11834},"4aa1c":function(e,t,o){"use strict";o.r(t);o("52801");var r=o("7ca7d"),n=o("eb3e2");var a=function LeftElevatorEpics(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,LeftElevatorEpics)},i=(0,r.default.combineEpicsClass)(a);var l,c,s,u,f,d,p,h={leftElevatorData:function LeftElevatorReducer(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return arguments[1],e}},v=o("1a22b"),m=o.n(v),b=o("447d8"),g=o("7912b"),E=o("2b78b"),_=o("db47a"),y=(o("a2997"),o("cdc07")),w="/shark/live/src/pages/homePage/leftElevatorModule/components/leftElevator/leftElevator.js";function _initDefineProp(e,t,o,r){o&&Object.defineProperty(e,t,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(r):void 0})}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function _defaults(e,t){for(var o=Object.getOwnPropertyNames(t),r=0;r<o.length;r++){var n=o[r],a=Object.getOwnPropertyDescriptor(t,n);a&&a.configurable&&void 0===e[n]&&Object.defineProperty(e,n,a)}return e}(e,t))}function _applyDecoratedDescriptor(e,t,o,r,n){var a={};return Object.keys(r).forEach(function(e){a[e]=r[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=o.slice().reverse().reduce(function(o,r){return r(e,t,o)||o},a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var S=r.default.Service,D="https://shark2.douyucdn.cn/front-publish/sdk-file-master/title_default_icon_75e2a10.png",M=(l=S(n.DataCenter.common),c=S(n.DataCenter.global),s=S(n.DataCenter.event),u=function(e){function LeftElevator(){var t,o,r=this;!function leftElevator_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,LeftElevator);for(var n=arguments.length,a=Array(n),i=0;i<n;i++)a[i]=arguments[i];return t=o=_possibleConstructorReturn(this,e.call.apply(e,[this].concat(a))),_initDefineProp(o,"common",f,o),_initDefineProp(o,"globalData",d,o),_initDefineProp(o,"event",p,o),o.state={currentSort:0,hoverSort:0,currentIndex:-1,hoverIndex:-1,config:[],showElevator:!1,selectBgMap:{},hoverBgMap:{},isBigElevator:!1},o.handleResize=function(e){var t=o.innerWidth;(t>=1430&&e<1430||t<1430&&e>=1430)&&(o.innerWidth=e,o.getSelectItem(document.body.scrollTop||document.documentElement.scrollTop)),o.setState({isBigElevator:e>=1430})},o.getSelectItem=function(e){var t=o.config;if(t&&t.length>0){var r=null,n=t.find(function(t,n){var a=o.loftMap[t.sort];if(!a)return!1;var i=a.offsetTop,l=a.offsetHeight,c=i+l,s=i,u=e+o.headerHeight+l/2;return r=n,c>u&&u>=s});if(n){if(o.state.currentSort!==n.sort){var a=o.state.selectBgMap;a[r]||(a[r]=t[r].selectBg),o.setState({currentIndex:r,currentSort:n.sort,selectBgMap:a})}}else o.setState({currentSort:0,currentIndex:-1})}},o.handleSelect=function(e){e.preventDefault();var t=o.state,r=t.hoverIndex,n=t.hoverSort,a=t.selectBgMap,i=o.config;if(-1!==r){Object(_.dysub2)({action_code:"13010010C001",event_id:1,type:1,code:"13010010C001.1.1",p:r+1}),a[r]||(a[r]=i[r].selectBg),o.setState({currentIndex:r,currentSort:n,hoverIndex:-1,selectBgMap:a});var l=o.loftMap[n];if(l){document.documentElement.clientHeight,l.offsetHeight;var c=l.offsetTop,s=(void 0===c?0:c)-o.headerHeight;y.a.smoothScrollTo(s)}}},o.render=function(){var e=o.state,t=e.currentIndex,n=(e.hoverIndex,e.showElevator),a=e.selectBgMap,i=e.hoverBgMap,l=e.isBigElevator,c=o.config;return c&&c.length>0?m.a.createElement("div",{className:"Elevator "+(n?"is-show":""),__source:{fileName:w,lineNumber:271},__self:r},c.map(function(e,n){return m.a.createElement("a",{key:e.sort,className:"Elevator-item "+(n===t?"is-active":""),style:{backgroundImage:a[n]?"url("+a[n]+E.imgSuffix+")":""},onMouseEnter:function onMouseEnter(){return o.handleMouseEnter(n,e.sort)},onClick:function onClick(e){return o.handleSelect(e)},__source:{fileName:w,lineNumber:274},__self:r},m.a.createElement("i",{__source:{fileName:w,lineNumber:281},__self:r},m.a.createElement(g.b,{className:"Elevator-icon",src:e.icon,defaultSrc:D,errorSrc:D,alt:e.name,__source:{fileName:w,lineNumber:282},__self:r})),m.a.createElement("span",{style:{backgroundImage:i[n]&&l?"url("+i[n]+E.imgSuffix+")":""},__source:{fileName:w,lineNumber:290},__self:r},m.a.createElement("strong",{__source:{fileName:w,lineNumber:291},__self:r},e.name)))})):null},_possibleConstructorReturn(o,t)}return _inherits(LeftElevator,e),LeftElevator.prototype.componentDidMount=function componentDidMount(){var e=this,t=(this.globalData.get("$mainData")||[]).find(function(e){return"elevator"===e.type}),o=t&&t.ds?t.ds:[];if(o&&o.length>0){this.config=o,this.scrollDistance=0,this.loftMap={},this.configMap={},this.headerHeight=69,this.minWidth=1430,o.forEach(function(t){e.configMap[t.sort]=t,e.loftMap[t.sort]=document.getElementById("lazyModule"+t.sort)}),this.innerWidth=window.innerWidth,this.setState({isBigElevator:window.innerWidth>=1430}),this.event.register(window,"resize",{debounce:100}).subscribe(function(t){var o=document.body.scrollTop||document.documentElement.scrollTop;e.showElevator(o),e.handleResize(window.innerWidth)}),this.event.register(document,"scroll",{debounce:100}).subscribe(function(t){var o=document.body.scrollTop||document.documentElement.scrollTop;e.showElevator(o),e.getSelectItem(o)});var r=document.body.scrollTop||document.documentElement.scrollTop;this.showElevator(r),this.getSelectItem(r)}},LeftElevator.prototype.showElevator=function showElevator(e){var t=this.config,showElevator=!1;if(t&&t.length>0){var o=t[0].sort;if(!this.loftMap[o])return;var r=this.loftMap[o],n=r.offsetTop;r.offsetHeight,document.documentElement.clientHeight;e+this.headerHeight>=n&&(showElevator=!0),!this.state.showElevator&&showElevator&&Object(_.dysub2)({action_code:"13010010C",event_id:3,type:1,code:"13010010C.3.1"})}this.setState({showElevator:showElevator})},LeftElevator.prototype.handleMouseEnter=function handleMouseEnter(e,t){var o=this.state,r=o.currentSort,n=o.hoverBgMap,a=o.isBigElevator,i=this.config;if(t!==r){!n[e]&&a&&(n[e]=i[e].hoverBg),this.setState({hoverIndex:e,hoverSort:t,hoverBgMap:n})}},LeftElevator.prototype.handleMouseLeave=function handleMouseLeave(){this.setState({hoverIndex:-1})},LeftElevator}(m.a.Component),f=_applyDecoratedDescriptor(u.prototype,"common",[l],{enumerable:!0,initializer:null}),d=_applyDecoratedDescriptor(u.prototype,"globalData",[c],{enumerable:!0,initializer:null}),p=_applyDecoratedDescriptor(u.prototype,"event",[s],{enumerable:!0,initializer:null}),u),I=Object(b.connect)(function mapStateToProps(e){return{leftElevatorData:e.leftElevatorData}})(M),C=r.default.StoreFactory,B=r.default.createApp({name:"LeftElevatorApp",providers:[{name:"component",useFactory:function useFactory(){return I}},{name:"store",useFactory:function useFactory(){return C.getInstance(window.__INITIAL_STATE__,h,i)}}]});n.DataCenter.event.load().subscribe(function(e){var t=new B;window.LeftElevatorApp=t,t.push=function(e){return t.registerApp.apply(t,e)},r.default.render(t,document.getElementById("js-left-elevator"))})},99944:function(e,t){e.exports=vendor3d72ea64bdb3506ffdba},a2997:function(e,t,o){},d1db8:function(e,t){e.exports=playerSDK2da5b1f3a3deccaa435b}},[["4aa1c","common-pre~31ecd969","common~002699c4","common~31ecd969","common~253ae210","common~e45b9e48","common~db300d2f","pre-style-common-pre~c3cebbda","common-pre~002699c4","pre-style-main~31ecd969"]]]);
//# sourceMappingURL=http://sourcemap.douyucdn.cn:4567/room/online/sourcemaps/leftElevator~e2e93592_55a1ffe.js.map