"use strict";!function(){function e(e){for(var t=0,n=e.length;t<n;t++){var i=e[t].toLowerCase();this[i]=new Number(t),this[i].string=i}}var a={index:0,check:function(e){e[$.expando]||(e[$.expando]=++a.index)},make:function(e,t){return a.check(e),t.guid+"-"+e[$.expando]}},c={TYPE:new e(["onscreen","inview"]),INVIEW_STATES:new e(["none","top","bottom","left","right","both"]),registered:[],shouldReProcess:!0,register:function(e,t,n){var i=o.isLocked(),r=$(e);c.registered.push({id:a.make(e,t),data:t,$element:r,type:n,_onscreen:i?null:I.get(r).uniqueMeasurementId,_hasTriggered:!1}),c.shouldReProcess=!0},unregister:function(e,t,n){for(var i=c.registered,r=a.make(e,t),o=i.length-1;-1<o;o--){var s=i[o];s.id==r&&s.type==n&&(i.splice(o,1),c.shouldReProcess=!0)}},process:function(){var e,t=c.registered;for(c.shouldReProcess=!0;c.shouldReProcess;){if(c.shouldReProcess=!1,0==(e=t.length))return;for(var n=0;n<e;n++){var i=t[n],r=I.get(i.$element);if(void 0===i._onscreen||!i._hasTriggered||i._onscreen!=r.uniqueMeasurementId){switch(i._onscreen=r.uniqueMeasurementId,i._hasTriggered=!0,i.type){case c.TYPE.onscreen:c.processOnScreen(i,r);break;case c.TYPE.inview:c.processInView(i,r)}if(c.shouldReProcess)break}}}},processOnScreen:function(e,t){e.$element.trigger("onscreen",t)},processInView:function(e,t){var n=0<=t.percentFromTop&&t.percentFromTop<=100,i=0<=t.percentFromBottom&&t.percentFromBottom<=100,r=0<=t.percentFromLeft&&t.percentFromLeft<=100,o=0<=t.percentFromRight&&t.percentFromRight<=100,i=(n&&i?c.INVIEW_STATES.both:n?c.INVIEW_STATES.top:i?c.INVIEW_STATES.bottom:c.INVIEW_STATES.none).string,o=(r&&o?c.INVIEW_STATES.both:r?c.INVIEW_STATES.left:o?c.INVIEW_STATES.right:c.INVIEW_STATES.none).string,o=[t.onscreen,o,i];if(void 0!==e._inviewPreviousState&&s.options.allowScrollOver){i=e._measurePreviousState.percentFromBottom<=100&&100<=t.percentFromBottom;if(e._inviewPreviousState[0]==o[0]&&e._inviewPreviousState[1]==o[1]&&e._inviewPreviousState[2]==o[2]&&!i)return;i&&(o[0]=!0,o[1]="both",o[2]="both")}e._inviewPreviousState=o,e._measurePreviousState=t,e.$element.trigger("inview",o)}},i={lastStartEvent:0,timeoutHandle:null,intervalDuration:100,hasRaf:!1,start:function(){i.lastStartEvent=(new Date).getTime(),i.repeat()},repeat:function(){i.stop(),i.hasRaf?i.timeoutHandle=requestAnimationFrame(i.main):i.timeoutHandle=setTimeout(i.main,i.intervalDuration)},hasExpired:function(){if(!((new Date).getTime()-i.lastStartEvent<1500))return i.stop(),!0},isThrottled:function(){return!((new Date).getTime()-i.lastMain>i.intervalDuration)},lastMain:(new Date).getTime(),main:function(){i.isThrottled()?i.repeat():(i.lastMain=(new Date).getTime(),i.hasExpired()||(0==c.registered.length?(i.stop(),i.intervalDuration=200):(i.stop(),i.intervalDuration=100),i.repeat(),o.isLocked()||c.process()))},stop:function(){null!==i.timeoutHandle&&((i.hasRaf?cancelAnimationFrame:clearTimeout)(i.timeoutHandle),i.timeoutHandle=null)}};$.extend($.event.special,{onscreen:{noBubble:!0,add:function(e){c.register(this,e,c.TYPE.onscreen)},remove:function(e){c.unregister(this,e,c.TYPE.onscreen)}},inview:{noBubble:!0,add:function(e){c.register(this,e,c.TYPE.inview)},remove:function(e){c.unregister(this,e,c.TYPE.inview)}}}),$.extend($.fn,{onscreen:function(e){return e?(this.on("onscreen",e),this):I.get(this)},inview:function(e){return e?(this.on("inview",e),this):I.get(this)}});var o={locks:[],lock:function(e){o.isLocked(e)||o.locks.push(e)},unlock:function(e){if(o.isLocked(e)){for(var t=0,n=o.locks.length;t<n;t++)if(o.locks[t]==e){o.locks.splice(t,1);break}i.start()}},isLocked:function(e){if(!e)return 0<o.locks.length;for(var t=0,n=o.locks.length;t<n;t++)if(o.locks[t]==e)return!0;return!1}},s={options:{allowScrollOver:!0},config:function(e){"object"==typeof e&&$.extend(s.options,e)}};$.inview=$.onscreen=function(){i.start()},$.extend($.inview,o,s);var S={$el:$(window),height:null,width:null,heightRatio:null,widthRatio:null,resize:function(){S.height=window.innerHeight||S.$el.height(),S.width=window.innerWidth||S.$el.width(),S.heightRatio=100/S.height,S.widthRatio=100/S.width,i.start()}},I={featureDetect:function(){i.hasRaf=window.requestAnimationFrame&&window.cancelAnimationFrame},get:function(e){if(0!=e.length){var t=e[0];try{m=t.getBoundingClientRect()}catch(e){m={top:0,right:0,bottom:0,left:0,width:0,height:0}}var n=m.height,i=m.width,r=m.top,o=m.left,s=S.height-(r+n),a=S.width-(o+i),c=Math.round(S.heightRatio*r),u=Math.round(S.widthRatio*o),l=Math.round(S.heightRatio*s),h=Math.round(S.widthRatio*a),d=null,d=0<o+i&&a<0&&o<0?i:o<0?i+o:o+i>S.width?S.width-o:i,f=null;(f=0<r+n&&s<0&&r<0?n:r<0?n+r:r+n>S.height?S.height-r:n)<0&&(f=0),d<0&&(d=0);var g=Math.round(100/n*f),m=Math.round(100/i*d),d=Math.round(100/(n*i)*(f*d)),v=n<=0&&i<=0?!1:100<h||100<u||100<l||100<c?!1:!0;if(v=I.isElementHidden(t)?!1:v)for(var p=I.getParents(t),w=0,T=p.length-1;w<T;w++){var E=p[w];if(I.isElementHidden(E)){v=!1;break}if(I.isOutOfBounds(t,E)){v=!1;break}}return{top:r,left:o,bottom:s,right:a,percentFromTop:c,percentFromLeft:u,percentFromBottom:l,percentFromRight:h,percentInview:d,percentInviewHorizontal:m,percentInviewVertical:g,onscreen:v,uniqueMeasurementId:""+r+o+s+a+n+i+S.height+S.width+v,timestamp:(new Date).getTime()}}},getParents:function(e){for(var t,n=[];t=e.parentElement;)n.push(t),e=t;return n},isElementHidden:function(e){var t="none"==e.style.display||"hidden"==e.style.visibility;if(t)return!0;e=window.getComputedStyle(e,null);return"none"==e.display||"hidden"==e.visibility},isOutOfBounds:function(e,t){var n=t.clientWidth<t.scrollWidth,i=t.clientHeight<t.scrollHeight,r=n||i,n=$(t);if(!r||"visible"===n.css("overflow"))return!1;i=$(e).offset(),r=n.offset(),n=i.top-r.top,i=i.left-r.left,r=n+e.clientHeight,e=i+e.clientWidth;return n>=t.clientHeight||i>=t.clientWidth||r<=0||e<=0}};$(window).on({"touchmove scroll mousedown keydown":i.start,resize:S.resize}),$(I.featureDetect),S.resize()}();
