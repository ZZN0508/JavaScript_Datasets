define("pkg/@alife/refly-mbox/3.1.2/index",["jquery"],function(n){return r=[function(t,e,n){"use strict";function o(t,e,n,o,r){r=r||{};var a=c.getConfig(),i=r.type||a.type||"get",a=r.dataType||a.dataType||"jsonp",o=s.extend({namespace:t,widgetId:e,methodName:n,params:JSON.stringify(o)},o);return"post"==i&&"json"==a?p(o,r,"post"):"get"==i&&"json"==a?p(o,r,"get"):d(o,r)}var s=n(1),c=n(2),p=n(3),d=n(7);t.exports={callService:o,getData:function(t,e,n){if(!t)throw new Error("widgetId为空！");return o(t,t,"execute",e,n)}}},function(t,e){t.exports=n},function(t,e,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=n(1);t.exports={addHandler:function(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n},removeHandler:function(t,e,n){t.removeEventListener?t.removeEventListener(e,n):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null},isAliDomain:function(t,e){var n=["tmall.com","tmall.hk","taobao.com","taobaocdn.com","tbcdn.cn","1688.com","alibaba.com","aliyun.com","alipay.com","alisoft.com","alimama.com","hitao.com","aliexpress.com","laiwang.com","etao.com","kissyui.com","95095.com","taohua.com","tmall.net","tmall.com.hk","taobao.net","taobao.org","alibaba-inc.com","1688.net","alibaba.net","aliyun.net","alipay.net","alisoft.net","alimama.net","hitao.net","aliexpress.net","laiwang.net","etao.net","alicdn.com","aliimg.com"];void 0!==e&&(n=n.concat(e));n=new RegExp("^http(s)?:\\/\\/[a-z0-9-\\.]*("+n.join("|")+")","i");return!!(t+="").match(n)},isAliTestDomain:function(t){if(t=t||document.location.href,this.isAliDomain(t))return/-test\./.test(t)},parseURL:function(t){var a=document.createElement("a");return{source:a.href=t,protocol:a.protocol,host:a.hostname,port:a.port,query:a.search,params:function(){for(var t,e={},n=a.search.replace(/^\?/,"").split("&"),o=n.length,r=0;r<o;r++)n[r]&&(e[(t=n[r].split("="))[0]]=decodeURIComponent(t[1]));return e}(),file:(a.pathname.match(/\/([^\/?#]+)$/i)||[,""])[1],hash:a.hash.replace("#",""),path:a.pathname.replace(/^([^\/])/,"/$1"),relative:(a.href.match(/tps?:\/\/[^\/]+(.+)/)||[,""])[1],segments:a.pathname.replace(/^\//,"").split("/")}},getConfig:function(){var t={};return t=window._MboxConfig&&"object"==o(window._MboxConfig)?r.extend(t,window._MboxConfig):t}}},function(t,e,n){"use strict";var s=n(1),c=(n(4),n(2)),p=n(5),d={urlTpl:"//widget"+(c.isAliTestDomain()?"-test":"")+".1688.com/front/getJsonComponent.json?namespace={namespace}&widgetId={widgetId}&methodName={methodName}",dataType:"jsonp",transType:"direct",type:"get"},l={urlTpl:"//widget"+(c.isAliTestDomain()?"-test":"")+".1688.com/front/ajax/getJsonComponent.json?namespace={namespace}&widgetId={widgetId}&methodName={methodName}",csrfUrlTpl:"//widget"+(c.isAliTestDomain()?"-test":"")+".1688.com/front/ajax/getJsonComponent.json?namespace={namespace}&widgetId={widgetId}&methodName={methodName}",bridgeUrl:"//widget"+(c.isAliTestDomain()?"-test":"")+".1688.com/front/ajax/bridge.html?target={target}",dataType:"json",transType:"transport",type:"post"};t.exports=function(n,t,e){var o=c.getConfig(),r=t.transType||o.transType||l.transType||"transport";t.transType&&(r=t.transType);var a=t.urlTpl||o.urlTpl||l.urlTpl,i=!!t.csrfToken,o=(a=!i?d.urlTpl:a).replace(/\{([\w]+)\}/g,function(t,e){return n[e]||""}),o=c.parseURL(o),o="//"+o.host+(80===o.port||443===o.port?"":":"+o.port)+o.path;if("proxy"==r)return s.extend(t,{dataType:"json",type:e||"post",data:n}),s.ajax(o,t);a={urlTpl:a,csrfUrlTpl:"//widget"+(c.isAliTestDomain()?"-test":"")+".1688.com/front/ajax/getJsonComponent.json?namespace={namespace}&widgetId={widgetId}&methodName={methodName}",bridgeUrl:"//widget"+(c.isAliTestDomain()?"-test":"")+".1688.com/front/ajax/bridge.html?target={target}"},i={url:o,data:s.extend({},n,{namespace:n.namespace,widgetId:n.widgetId,methodName:n.methodName}),options:{type:e||"post",crsfToken:i}};return new p({bridgeUrl:a.bridgeUrl}).send(i)}},function(t,e){function p(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)}var n={options:{path:"",domain:"",expires:7,secure:!1,raw:!1},set:function(t,e,n){var o=null!=(n=arguments.length<3||3==arguments.length&&void 0===n?{}:n).expires?n.expires:this.options.expires||"",r=typeof o;"string"==r&&""!==o?o=new Date(o):"number"==r&&(o=new Date(+new Date+864e5*o)),""!==o&&"toUTCString"in o&&(o="; expires="+o.toUTCString());var a=(a=n.path||this.options.path)?"; path="+a:"",i=(i=n.domain||this.options.domain)?"; domain="+i:"",s=void 0===n.secure?this.options.secure?"; secure":"":n.secure?"; secure":"",c=(void 0!==n.raw?n:this.options).raw,r=c?function(t){return t}:escape;return document.cookie=!0===c?t+"="+e+o+a+i+s:r(t)+"="+r(e)+o+a+i+s,this},get:function(t,e){e=e||{};var n=function(){if(""===document.cookie)return{};for(var t=document.cookie.split("; "),e={},n=0,o=t.length;n<o;n++){var r=t[n].split("=");e[r[0]]=r[1]}return e}(),o=e.raw?function(t){return t}:unescape;if(p(t)){for(var r={},a=0,i=t.length;a<i;a++){var s,c=o(t[a]);void 0!==(s=n[c])&&(s=o(s)),r[c]=s||null}return r}return(s=void 0!==(s=n[t=o(t)])?o(s):s)||null},remove:function(t){if(p(t))for(var e=0,n=t.length;e<n;e++)this.set(t[e],"",{expires:-1});else"string"==typeof t&&this.set(t,"",{expires:-1});return this}};t.exports=n},function(t,e,n){"use strict";function r(){return"brg-"+s+++(1e4*Math.random()).toFixed(0)}function o(t){var e,n,o;this.name=r(),this.bridgeUrl=t.bridgeUrl||"//astyle.alicdn.com/pkg/@alife/refly-mbox/2.0.5/examples/bridge.html?target={target}",this.defer=a.Deferred(),this.iframe=(e=this.name,n=this.bridgeUrl,o=this.defer,t=document.createElement("iframe"),n=n.replace("{target}",e),t.name=e,t.src=n,t.style.display="none",t.onload=function(){o.resolve()},t.onerror=function(){o.reject()},document.body.appendChild(t),t),this.messenger=(e=this.name,n=this.iframe,(t=new i(e,"mbox")).addTarget(n.contentWindow,e),t),this.messenger.listen(function(t){try{var e=JSON.parse(t),n=c[e.id];c[e.id],n&&n.defer&&n.defer.resolve(e.data)}catch(t){}})}var a=n(1),i=n(6),s=0,c={};o.prototype.send=function(t){var e=this,n=r();return t.id=n,c[n]={data:t,defer:a.Deferred()},this.defer.then(function(){e.messenger.send(JSON.stringify(t))}),c[n].defer},t.exports=o},function(t,e,n){"use strict";function o(t,e){this.target=t,this.name=e}function r(t,e){this.targets={},this.name=t,this.listenFunc=[],"string"!=typeof(s=e||s)&&(s=s.toString()),this.initListen()}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=(n(1),n(2)),s="[PROJECT_NAME]",c="postMessage"in window;o.prototype.send=c?function(t){this.target.postMessage(s+t,"*")}:function(t){var e=window.navigator[s+this.name];if("function"!=typeof e)throw new Error("target callback function is not defined");e(s+t,window)},r.prototype.addTarget=function(t,e){t=new o(t,e);this.targets[e]=t},r.prototype.initListen=function(){function t(t){var e;if("object"==(void 0===t?"undefined":a(t))&&t.data){if(e=t.data,!new RegExp("^"+s).test(e))return!1;if(e=e.slice(s.length),!i.isAliDomain(t.origin))throw new Error("invalid message origin")}else e=t;for(var n=0;n<o.listenFunc.length;n++)o.listenFunc[n](e)}var o=this;c?i.addHandler(window,"message",t):window.navigator[s+this.name]=t},r.prototype.listen=function(t){this.listenFunc.push(t)},r.prototype.clear=function(){this.listenFunc=[]},r.prototype.send=function(t,e){var n,o=this.targets;if(1==arguments.length)for(n in e=t,o)o.hasOwnProperty(n)&&o[n].send(e);else{if(2!=arguments.length)throw new Error("params are lost.");if(void 0===t||""==t)throw new Error("target are invalid.");o[t].send(e)}},t.exports=r},function(t,e,n){"use strict";var o=n(1),r=n(4),a=n(2),i=(n(5),{urlTpl:"//widget"+(a.isAliTestDomain()?"-test":"")+".1688.com/front/getJsonComponent.json?namespace={namespace}&widgetId={widgetId}&methodName={methodName}",dataType:"jsonp",transType:"direct",type:"get"});t.exports=function(n,t){var e=i.urlTpl.replace(/\{([\w]+)\}/g,function(t,e){return n[e]||""});t.csrfToken&&(n._tb_token_=r.get("_tb_token_"));e=a.parseURL(e),e="//"+e.host+(80!==e.port&&443!==e.port&&e.port?":"+e.port:"")+e.path;return o.extend(t,{dataType:"jsonp",type:"GET",data:n}),o.ajax(e,t)}}],a={},o.m=r,o.c=a,o.p="",o(0);function o(t){if(a[t])return a[t].exports;var e=a[t]={exports:{},id:t,loaded:!1};return r[t].call(e.exports,e,e.exports,o),e.loaded=!0,e.exports}var r,a});
