!function(){"use strict";function u(e,t){return{name:e,value:void 0===t?-1:t,delta:0,entries:[],id:"v1-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}}function s(e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var n=new PerformanceObserver(function(e){return e.getEntries().map(t)});return n.observe({type:e,buffered:!0}),n}}catch(e){}}function p(t,n){function r(e){"pagehide"!==e.type&&"hidden"!==document.visibilityState||(t(e),n&&(removeEventListener("visibilitychange",r,!0),removeEventListener("pagehide",r,!0)))}addEventListener("visibilitychange",r,!0),addEventListener("pagehide",r,!0)}function f(e,t,n){var r;return function(){0<=t.value&&(n||h.has(t)||"hidden"===document.visibilityState)&&(t.delta=t.value-(r||0),!t.delta&&void 0!==r||(r=t.value,e(t)))}}function n(e,t){function n(e){e.hadRecentInput||(o.value+=e.value,o.entries.push(e),r())}var r,o=u("CLS",0),i=s("layout-shift",n);i&&(r=f(e,o,t),p(function(){i.takeRecords().map(n),r()}),g(function(){o=u("CLS",0),r=f(e,o,t)}))}function d(){return t<0&&(t=e(),a(),g(function(){setTimeout(function(){t=e(),a()},0)})),{get timeStamp(){return t}}}function c(e,t){l||(l=t,b=e,o=new Date,v(removeEventListener),m())}function m(){var t;0<=b&&b<o-S&&(t={entryType:"first-input",name:l.type,target:l.target,cancelable:l.cancelable,startTime:l.timeStamp,processingStart:l.timeStamp+b},w.forEach(function(e){e(t)}),w=[])}function v(t){["mousedown","keydown","touchstart","pointerdown"].forEach(function(e){return t(e,E,y)})}function r(e,t){function n(e){e.startTime<r.timeStamp&&(o.value=e.processingStart-e.startTime,o.entries.push(e),h.add(o),a())}var r=d(),o=u("FID"),i=s("first-input",n),a=f(e,o,t);i&&p(function(){i.takeRecords().map(n),i.disconnect()},!0),i&&g(function(){o=u("FID"),a=f(e,o,t),w=[],b=-1,l=null,v(addEventListener),w.push(n),m()})}function i(t,n){function e(e){var t=e.startTime;t<i.timeStamp&&(a.value=t,a.entries.push(e)),r()}var r,o,i=d(),a=u("LCP"),c=s("largest-contentful-paint",e);c&&(r=f(t,a,n),o=function(){h.has(a)||(c.takeRecords().map(e),c.disconnect(),h.add(a),r())},["keydown","click"].forEach(function(e){addEventListener(e,o,{once:!0,capture:!0})}),p(o,!0),g(function(e){a=u("LCP"),r=f(t,a,n),requestAnimationFrame(function(){requestAnimationFrame(function(){a.value=performance.now()-e.timeStamp,h.add(a),r()})})}))}var l,b,o,w,g=function(t){addEventListener("pageshow",function(e){e.persisted&&t(e)},!0)},h=new("function"==typeof WeakSet?WeakSet:Set),t=-1,e=function(){return"hidden"===document.visibilityState?0:1/0},a=function(){p(function(e){e=e.timeStamp;t=e},!0)},y={passive:!0,capture:!0},S=new Date,E=function(e){var t,n,r,o;function i(){c(n,r),o()}function a(){o()}e.cancelable&&(t=(1e12<e.timeStamp?new Date:performance.now())-e.timeStamp,"pointerdown"==e.type?(n=t,r=e,o=function(){removeEventListener("pointerup",i,y),removeEventListener("pointercancel",a,y)},addEventListener("pointerup",i,y),addEventListener("pointercancel",a,y)):c(t,e))};function O(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function L(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?O(Object(o),!0).forEach(function(e){var t,n;t=r,e=o[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):O(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}function k(e,t,n,r,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return n(e),0}c.done?t(u):Promise.resolve(u).then(r,o)}function P(c){return function(){var e=this,a=arguments;return new Promise(function(t,n){var r=c.apply(e,a);function o(e){k(r,t,n,o,i,"next",e)}function i(e){k(r,t,n,o,i,"throw",e)}o(void 0)})}}var T=Date.now(),j={"www.bbc.co.uk":"https://europe-west1-bbc-otg-traf-mgr-bq-prod-4591.cloudfunctions.net/report-endpoint","www.bbc.com":"https://europe-west1-bbc-otg-traf-mgr-bq-prod-4591.cloudfunctions.net/report-endpoint","www.int.bbc.co.uk":"https://europe-west1-bbc-otg-traf-mgr-bq-dev-4105.cloudfunctions.net/report-endpoint","www.test.bbc.co.uk":"https://europe-west1-bbc-otg-traf-mgr-bq-dev-4105.cloudfunctions.net/report-endpoint","navigation.int.api.bbc.co.uk":"https://europe-west1-bbc-otg-traf-mgr-bq-dev-4105.cloudfunctions.net/report-endpoint","navigation.test.api.bbc.co.uk":"https://europe-west1-bbc-otg-traf-mgr-bq-dev-4105.cloudfunctions.net/report-endpoint","local.dev.bbc.co.uk":"https://europe-west1-bbc-otg-traf-mgr-bq-dev-4105.cloudfunctions.net/report-endpoint"}[window.location.hostname],D=Math.random()<=.01,q=P(regeneratorRuntime.mark(function e(){var o,t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.bbcuser.allowsPerformanceCookies();case 2:t=e.sent,j&&navigator.sendBeacon&&D&&t&&(o={cls:null,fid:null,lcp:null,fcp:null,ttfb:null},n(t=function(e){var t=e.name,e=e.value,t=t.toLowerCase();o[t]=e},!0),r(t),i(t,!0),function(t,n){var r,o=d(),i=u("FCP"),a=s("paint",function(e){"first-contentful-paint"===e.name&&(a&&a.disconnect(),e.startTime<o.timeStamp&&(i.value=e.startTime,i.entries.push(e),h.add(i),r()))});a&&(r=f(t,i,n),g(function(e){i=u("FCP"),r=f(t,i,n),requestAnimationFrame(function(){requestAnimationFrame(function(){i.value=performance.now()-e.timeStamp,h.add(i),r()})})}))}(t),function(t){var n=u("TTFB"),e=function(){try{var e=performance.getEntriesByType("navigation")[0]||function(){var e,t=performance.timing,n={entryType:"navigation",startTime:0};for(e in t)"navigationStart"!==e&&"toJSON"!==e&&(n[e]=Math.max(t[e]-t.navigationStart,0));return n}();n.value=n.delta=e.responseStart,n.entries=[e],t(n)}catch(e){}};"complete"===document.readyState?setTimeout(e,0):addEventListener("pageshow",e)}(t),window.addEventListener("pagehide",P(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.bbcpage.getDestination();case 2:return t=e.sent,e.next=5,window.bbcpage.getContentType();case 5:r=e.sent,n="".concat(j,"?platform=orbit&owner=").concat(t,"&pageType=").concat(r),r=[{type:"web-vitals",url:window.location.href,age:Date.now()-T,body:L({},o)}],r=JSON.stringify(r),r=new Blob([r],{type:"application/reports+json"}),navigator.sendBeacon(n,r);case 12:case"end":return e.stop()}},e)}))));case 4:case"end":return e.stop()}},e)}));(function(){q.apply(this,arguments)})()}();
