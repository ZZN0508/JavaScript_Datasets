function AkaHTML5MediaAnalytics(c){var n="3.15.2",e=document.currentScript,r=null,a=null,u=!0,s=null,o=null,m=!1,h=null,l=!1,d="http://media-analytics.akamaized.net",t=null,p=(new Date).getTime(),f=[];f.push({api:"originUrl",value:location.protocol+"//"+location.hostname});var g=!1,y=this;function v(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function S(){return v()+v()+"-"+v()+"-"+v()+"-"+v()+"-"+v()+v()+v()}c&&(c.loaderName&&(s=c.loaderName),c.loaderVersion&&(o=c.loaderVersion)),e?r=e.src:lt("Should be Internet Explorer");var T,b,k,A,L,I,E,C,w=w||function(o){var e={},t=e.lib={},a=t.Base={extend:function(e){c.prototype=this;var t=new c;return e&&t.mixIn(e),t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.$super.extend(this)}},l=t.WordArray=a.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||n).stringify(this)},concat:function(e){var t=this.words,a=e.words,i=this.sigBytes,e=e.sigBytes;if(this.clamp(),i%4)for(var n=0;n<e;n++)t[i+n>>>2]|=(a[n>>>2]>>>24-n%4*8&255)<<24-(i+n)%4*8;else if(65535<a.length)for(n=0;n<e;n+=4)t[i+n>>>2]=a[n>>>2];else t.push.apply(t,a);return this.sigBytes+=e,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=o.ceil(t/4)},clone:function(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],a=0;a<e;a+=4)t.push(4294967296*o.random()|0);return l.create(t,e)}}),i=e.enc={},n=i.Hex={stringify:function(e){for(var t=e.words,e=e.sigBytes,a=[],i=0;i<e;i++){var n=t[i>>>2]>>>24-i%4*8&255;a.push((n>>>4).toString(16)),a.push((15&n).toString(16))}return a.join("")},parse:function(e){for(var t=e.length,a=[],i=0;i<t;i+=2)a[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return l.create(a,t/2)}},r=i.Latin1={stringify:function(e){for(var t=e.words,e=e.sigBytes,a=[],i=0;i<e;i++)a.push(String.fromCharCode(t[i>>>2]>>>24-i%4*8&255));return a.join("")},parse:function(e){for(var t=e.length,a=[],i=0;i<t;i++)a[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return l.create(a,t)}},s=i.Utf8={stringify:function(e){try{return decodeURIComponent(escape(r.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return r.parse(unescape(encodeURIComponent(e)))}},d=t.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=l.create(),this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=s.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,a=t.words,i=t.sigBytes,n=this.blockSize,r=i/(4*n),e=(r=e?o.ceil(r):o.max((0|r)-this._minBufferSize,0))*n,i=o.min(4*e,i);if(e){for(var s=0;s<e;s+=n)this._doProcessBlock(a,s);s=a.splice(0,e),t.sigBytes-=i}return l.create(s,i)},clone:function(){var e=a.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});function c(){}t.Hasher=d.extend({init:function(){this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize(),this._hash},clone:function(){var e=d.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:16,_createHelper:function(a){return function(e,t){return a.create(t).finalize(e)}},_createHmacHelper:function(a){return function(e,t){return u.HMAC.create(a,t).finalize(e)}}});var u=e.algo={};return e}(Math);function P(e,t){if(null!=e&&""!=e)try{var a=/^(\w+?:)?\/\/([^\/:]+):?([^\/]+)?(\/[^#?]*)#?([^?]+)?\??(.+)?/.exec(e);void 0===a[1]?t.protocol=location.protocol:t.protocol=a[1],t.hostName=a[2],t.port=a[3]||"80",t.path=a[4];var i=t.path.split("/"),n=i.length;t.streamName=i[n-1];var r=t.streamName.toLowerCase();-1==r.indexOf(".m3u")&&-1==r.indexOf("manifest")&&-1==r.indexOf(".f4m")&&-1==r.indexOf(".mpd")||3<=n&&(t.streamName=i[n-2]+"/"+i[n-1]),t.hash=a[5]||"",t.search=a[6]||"",t.host=t.hostName+":"+t.port}catch(e){lt("Exception,  parseStreamUrl :"+e)}}function D(e){e=null!=e?e:(new Date).getTime();return e}T=(A=(L=w).lib).WordArray,A=A.Hasher,b=[],e=L.algo.SHA1=A.extend({_doReset:function(){this._hash=T.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var a,i=this._hash.words,n=i[0],r=i[1],s=i[2],o=i[3],l=i[4],d=0;d<80;d++)d<16?b[d]=0|e[t+d]:(a=b[d-3]^b[d-8]^b[d-14]^b[d-16],b[d]=a<<1|a>>>31),a=(n<<5|n>>>27)+l+b[d],a=d<20?a+(1518500249+(r&s|~r&o)):d<40?a+(1859775393+(r^s^o)):d<60?a+((r&s|r&o|s&o)-1894007588):a+((r^s^o)-899497514),l=o,o=s,s=r<<30|r>>>2,r=n,n=a;i[0]=i[0]+n|0,i[1]=i[1]+r|0,i[2]=i[2]+s|0,i[3]=i[3]+o|0,i[4]=i[4]+l|0},_doFinalize:function(){var e=this._data,t=e.words,a=8*this._nDataBytes,i=8*e.sigBytes;t[i>>>5]|=128<<24-i%32,t[15+(64+i>>>9<<4)]=a,e.sigBytes=4*t.length,this._process()}}),L.SHA1=A._createHelper(e),L.HmacSHA1=A._createHmacHelper(e),k=(L=w).enc.Utf8,L.algo.HMAC=L.lib.Base.extend({init:function(e,t){e=this._hasher=e.create(),"string"==typeof t&&(t=k.parse(t));var a=e.blockSize,i=4*a;t.sigBytes>i&&(t=e.finalize(t));for(var e=this._oKey=t.clone(),t=this._iKey=t.clone(),n=e.words,r=t.words,s=0;s<a;s++)n[s]^=1549556828,r[s]^=909522486;e.sigBytes=t.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,e=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(e))}}),e=(A=w).lib,L=e.Base,I=e.WordArray,E=(e=A.algo).HMAC,C=e.PBKDF2=L.extend({cfg:L.extend({keySize:4,hasher:e.SHA1,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var a=this.cfg,i=E.create(a.hasher,e),n=I.create(),r=I.create([1]),s=n.words,o=r.words,l=a.keySize,a=a.iterations;s.length<l;){var d=i.update(t).finalize(r);i.reset();for(var c=d.words,u=c.length,m=d,h=1;h<a;h++){m=i.finalize(m),i.reset();for(var p=m.words,f=0;f<u;f++)c[f]^=p[f]}n.concat(d),o[0]++}return n.sigBytes=4*l,n}});var R=!(A.PBKDF2=function(e,t,a){return C.create(a).compute(e,t)});if(window)try{R=!!window.XDomainRequest}catch(e){R=!1}var N={},x={},M=null,B={eventCode:"",beaconId:"",sequenceId:"",logType:"",endOfStream:"",logVersion:"",formatVersion:"",visitId:"",errorCode:"",partNumber:"",totalParts:"",hostName:"",streamName:"",port:"",protocol:"",userAgent:"",playerType:"",os:"",format:"",connectTime:"",bufferingTime:"",startupTime:"",streamLength:"",bytesTotal:"",browser:"",browserSize:"",videoSize:"",streamUrl:"",deliveryType:"",pluginVersion:"",beaconVersion:"",serverIp:"",playerFormat:"",outlierStartupTime:"",isFirstTitle:"",rebufferSessionH:"",sequenceIdH:"",isSessionWithRebufferH:"",playerState:"",currentStreamTime:"",currentClockTime:"",playClockTime:"",playStreamTime:"",rebufferCount:"",rebufferTime:"",pauseCount:"",pauseDuration:"",pauseIntervalsAsString:"",seekCount:"",seekTime:"",seekIntervalsAsString:"",pauseSeekSession:"",resumeBufferCount:"",resumeBufferTime:"",isView:"",isSessionWithRebuffer:"",logInterval:"",rebufferSession:"",socialSharing:"",endReasonCode:"",totalPlayClockTime:"",totalPlayStreamTime:"",totalRebufferCount:"",totalRebufferTime:"",totalAdPlayClockTime:"",totalAdStartCount:"",totalAdAbandonCount:"",lastHTime:"",isVisitStart:"",isVisitEnd:"",visitAttempts:"",visitPlays:"",visitViews:"",visitErrors:"",visitInterval:"",visitPlayClockTime:"",visitPlayStreamTime:"",visitRebufferCount:"",visitRebufferTime:"",visitStartupErrors:"",visitAdPlayClockTime:"",visitAdStartCount:"",visitAdAbandonCount:"",visitUniqueTitles:"",adAbandonCount:"",adPauseTime:"",adStartupTime:"",adPlayClockTime:"",adCount:"",adSession:"",sessionId:"",attemptId:"",playerReferrer:"",ais_idpId:"",ais_idpName:"",ais_idpDisplayName:"",ais_idpUrl:"",ais_queryToken:"",ais_aisuid:"",qualityOfExperience:"",transitionStreamTimeSession:"",transitionUpSwitchCount:"",transitionDownSwitchCount:"",averagedBitRate:"",fullOs:"",longitude:"",latitude:"",connectivity:""},O={title:!1,category:!1,subCategory:!1,show:!1,contentLength:!1,contentType:!1,device:!1,deliveryType:!1,playerId:!1,eventName:!1},U={},H={};U.isBrightcoveVideo=!1,U.objectBased=!1;var V=U.videoPassed=!1,_=!1,F={},j={},q=!1,W=[],z={timer:null,queue:[],browserClose:!1,enabled:!0,time:250},X={},K=[],G={},Q={},J={seekThreshold:2e3,visitTimeout:36e5},Y={},$={},Z={},ee={},te=100,ae={},ie=!1,ne=!1,re={fastTCPFailed:!1,fastTCPEnabled:!1},se=[],oe={dataSent:{}},le=1,de=-1,ce={},ue=[],me={pageURLCsmaDebug:0,configURLCsmaDebug:0,configDebug:0,windowOpened:!1,logStoredMsg:!0,printException:!1};function he(){this.aisRetries=0,this.aisRequestLimit=3,this.aisRequestInterval=3e4,this.requestFailed=!1}var pe=new he,fe={setDataArr:["adId","adDuration","adTitle","adCategory","adPartnerId","adServer","adDaypart","adIndustryCategory","adEvent"],clearAdAnalytics:function(){this.isAdLoaded=!1,this.isAdStarted=!1,this.id="",this.type="0",this.startPos="0",this.playBucket="-1",this.endStatus="2",this.adLoadTime=null,this.adStartTime=null,this.adStartupTime="0";for(var e=0;e<this.setDataArr.length;e++)this[this.setDataArr[e]]=""}},ge={bitRateArr:[],currentBitRate:"-",currentStartPos:0,bitRateCount:{},bitRatePlayTime:{},bitRateBucketMap:{},clearBitRate:function(){this.bitRateArr=[],this.currentBitRate="-",this.bitRateCount={},this.bitRatePlayTime={}},updateBitRateArr:function(e){var t;0<this.bitRateArr.length?(t=this.bitRateArr.length,t=ge.bitRateArr[t-1],this.currentBitRate==t.bitRate?t.playTime+=e:this.pushInBitRateArr(e,this.currentBitRate,this.currentStartPos)):this.pushInBitRateArr(e,this.currentBitRate,this.currentStartPos)},pushInBitRateArr:function(e,t,a){this.bitRateArr.push({bitRate:t,playTime:e,startPos:a})},populateBitRateBucketMap:function(e,t){var a,i,n=!1,r=ee.bitRateBucketTimes;for(i in"-"!=e&&""!==e&&(e=parseInt(e/1e3)),r)if(n=!1,a=r[i],"-"==e||""===e||e<0){if(!a.max&&!a.min){n=!0;break}}else if(a.max&&a.min){if(e>=a.min&&e<a.max){n=!0;break}}else if(a.max){if(e<a.max){n=!0;break}}else if(a.min&&e>=a.min){n=!0;break}n&&(this.bitRateBucketMap[i]+=t)},findMaxPersistentBitRate:function(){try{if(this.bitRatePlayTime){var e,t=0,a=-1;for(e in this.bitRatePlayTime)this.bitRatePlayTime[e]>a&&(a=this.bitRatePlayTime[e],t=e);if(0!==t)return t}}catch(e){lt("Exception, find max persistent bit rate")}},getTransitionSession:function(e){try{var t,a,i,n=null,r="",s=0,o=0,l=0,d=!0;for(a in 0<this.bitRateArr.length&&"-"==(t=this.bitRateArr[0]).bitRate&&(d=!1,this.bitRateArr[1]&&"-"!=this.bitRateArr[1].bitRate&&(d=!0,this.bitRateArr[1].startPos=this.bitRateArr[0].startPos,this.bitRateArr[1].playTime+=this.bitRateArr[0].playTime,this.bitRateArr.shift())),this.bitRateBucketMap)this.bitRateBucketMap[a]=0;for(s=0;s<this.bitRateArr.length;s++){(t=this.bitRateArr[s]).bitRate in this.bitRateCount?0!=s&&this.bitRateCount[t.bitRate]++:this.bitRateCount[t.bitRate]=1,""!=t.bitRate&&"-"!=t.bitRate&&(t.bitRate in this.bitRatePlayTime?this.bitRatePlayTime[t.bitRate]+=t.playTime:this.bitRatePlayTime[t.bitRate]=t.playTime),i=this.bitRateCount[t.bitRate],n?n+=","+t.bitRate+":"+t.startPos+":"+t.playTime+"::"+i:n=t.bitRate+":"+t.startPos+":"+t.playTime+"::"+i,this.populateBitRateBucketMap(t.bitRate,t.playTime);try{d&&(o+=t.bitRate*t.playTime,l+=t.playTime)}catch(e){}}for(a in e.maxPersistentBitRate=this.findMaxPersistentBitRate(),e.transitionStreamTimeSession=n,this.bitRateBucketMap)r?r+=","+a+":"+this.bitRateBucketMap[a]:r=a+":"+this.bitRateBucketMap[a];e.bitRateBucketTimes=r;try{e.averagedBitRate=d&&l&&0!=l?o+":"+l:null}catch(e){}}catch(e){lt("Exception, get transition Session :"+e)}}};amaURLUtility=function(){},amaURLUtility.isURL=function(e){return!!new RegExp("((http|https)(://))?([a-zA-Z0-9]+[.]{1}){2}[a-zA-z0-9]+(/{1}[a-zA-Z0-9]+)*/?","i").test(e)},amaURLUtility.parseURLComponents=function(e){var t={};try{var a=/^(\w+?:)?\/\/([^\/:]+):?([^\/]+)?(\/[^#?]*)#?([^?]+)?\??(.+)?/.exec(e);void 0===a[1]?t.protocol=location.protocol:t.protocol=a[1],t.hostName=a[2],t.port=a[3]||"80",t.path=a[4];var i=this.path.split("/"),n=i.length;t.name=i[n-1];var r=t.name.toLowerCase();-1==r.indexOf(".m3u")&&-1==r.indexOf("manifest")&&-1==r.indexOf(".f4m")&&-1==r.indexOf(".mpd")||3<=n&&(t.name=i[n-2]+"/"+i[n-1]),t.hash=a[5]||"",t.search=a[6]||"",t.host=t.hostName+":"+t.port}catch(e){lt("Exception,  parseStreamUrl :"+e)}return t},streamError={InvalidURL:"URL is not valid",ParsingFailed:"Failed to parse stream URL",Invalid_Manifest:"Invalid manifest received",Invalid_Stream:"Stream is not valid",NoError:"success"},streamInfoBase=function(e,t){this.url=e,this.name=null,this.length=0,this.format=null,this.deliveryType="O",this.isValid=!1,this.streamType=null,this.callback=t},streamInfoBase.prototype.getStreamURL=function(){return this.url},streamInfoBase.prototype.getStreamName=function(){return this.name},streamInfoBase.prototype.getStreamLength=function(){return this.length},streamInfoBase.prototype.getStreamFormat=function(){return this.format},streamInfoBase.prototype.getDeliveryType=function(){return this.deliveryType},streamInfoBase.prototype.getStreamType=function(){return this.streamType},streamInfoBase.prototype.getCallback=function(){return this.callback},streamInfoBase.prototype.parseURL=function(){try{var e=/^(\w+?:)?\/\/([^\/:]+):?([^\/]+)?(\/[^#?]*)#?([^?]+)?\??(.+)?/.exec(this.url);void 0===e[1]?this.protocol=location.protocol:this.protocol=e[1],this.hostName=e[2],this.port=e[3]||"80",this.path=e[4];var t=this.path.split("/"),a=t.length;this.name=t[a-1];var i=this.name.toLowerCase();-1==i.indexOf(".m3u")&&-1==i.indexOf("manifest")&&-1==i.indexOf(".f4m")&&-1==i.indexOf(".mpd")||3<=a&&(this.name=t[a-2]+"/"+t[a-1]),this.hash=e[5]||"",this.search=e[6]||"",this.host=this.hostName+":"+this.port}catch(e){lt("Exception,  parseStreamUrl :"+e)}};function ye(e,t,a,i){try{e.prototype=Object.create(t.prototype,{url:{value:a,enumerable:!1},callback:{value:i,enumerable:!1}})}catch(e){lt("Exception thrown from InheritObject"+e)}}hlsStreamInfo=function(e,t){return this.recursiveDownload=!1,this.isParsed=!1,this.parse=function(e){try{if(!e)return streamError.InvalidURL;if(-1===e.search("#EXTM3U"))return streamError.ParsingFailed;this.streamType="hls",this.format="L",this.parseURL();var t,a,i=e.split("\n"),n="",r=/PROGRAM-ID=(\d+)/;if(i){for(a=0;a<i.length;a++)if(t=r.exec(i[a])){if(t[1]==n)break;n=t[1]}a!=i.length&&(this.format="L")}var s,o,l,d=this.getStreamURL();if(d&&(o=void 0===(s=/^(\w+?:)?\/\/([^\/:]+):?([^\/]+)?(\/[^#?]*)#?([^?]+)?\??(.+)?/.exec(d))[1]?location.protocol:s[1],l=s[2],s[3],s[4]),r=/^#EXT((INF)|(-X-STREAM-INF))[^\n]*\n([^\n]*)\n/m,lt("Checking"),t=r.exec(e))if(lt("Checking done "+t[4]),new RegExp(".m3u8").exec(t[4])&&o&&l)try{this.recursiveDownload=!0;var c=new XMLHttpRequest,u=amaURLUtility.isURL(t[4])?t[4]:o+"//"+l+t[4];lt("Requesting URL = "+u),c.open("GET",u,!0),c.onreadystatechange=(m=this,function(){lt("current content type from stream url is = "+this.getResponseHeader("content-type")),4===this.readyState&&(200===this.status&&this.responseText&&(/^#EXT-X-ENDLIST/m.exec(this.responseText)?m.deliveryType="O":(m.deliveryType="L",m.length="-1")),m.getCallback()&&m.getCallback()(m))}),c.overrideMimeType&&c.overrideMimeType("text/plain")}catch(e){lt("parse, Exception,  parsing play list, "+e)}else/^#EXT-X-ENDLIST/m.exec(e)&&(this.deliveryType="O")}catch(e){lt("Exception,  parse : "+e)}var m;return this.isParsed=!0,streamError.NoError},this.parse(e)===streamError.NoError?(!1===this.recursiveDownload&&this.getCallback()(this),this.streamType="hls",this.deliveryType="O",this):t?(this.streamType="hls",this.format="L",this.deliveryType="O",this.length=0,this.parseURL(),this.getCallback()(this),this):void 0},dashStreamInfo=function(e,t){this.isParsed=!1;try{this.parse=function(e){if(!e)return streamError.InvalidURL;this.parseURL(),this.format="Dash",this.streamType="dash";var t=(new DOMParser).parseFromString(e,"text/xml");if(!t)return streamError.ParsingFailed;var a,i=t.getElementsByTagName("MPD");return i&&i[0]?("dynamic"===i[0].getAttribute("type")?(this.deliveryType="L",this.length=0):(this.deliveryType="O",t=(e=i[0].getAttribute("mediaPresentationDuration").replace("PT","")).search("H"),this.length=i=0,-1!==t&&(a=Number(e.substring(0,t)),isNaN(a)||(this.length+=60*a*60*1e3,i=t+1)),-1!==(a=e.search("M"))&&(t=Number(e.substring(i,a)),isNaN(t)||(this.length+=60*t*1e3,i=a+1)),-1!==(a=e.search("S"))&&(a=Number(e.substring(i,a)),isNaN(a)||(this.length+=1e3*a)),lt("Current stream length = "+this.length)),this.getCallback()(this),this.isParsed=!0,streamError.NoError):streamError.ParsingFailed}}catch(e){lt("Exception thrown from dashStreamInfo "+e)}return this.parse(e)===streamError.NoError?this:t?(this.format="Dash",this.streamType="dash",this.deliveryType="O",this.length=0,this.parseURL(),this.getCallback()(this),this):void 0},nonAdaptiveStream=function(e,t){try{return this.format="P",this.deliveryType="O",this.streamType="nonAdaptiveStream",this.length=0,this.parseURL(),this.getCallback()(this),this}catch(e){lt("Exception thrown from nonAdaptiveStream"+e)}};var ve={FactoryWithURL:function(e,t,a){try{var i=new XMLHttpRequest;i.open("GET",t,!0),i.onreadystatechange=function(){4===this.readyState&&200===this.status&&this.responseText&&ve.FactoryWithContent(e,t,this.responseText,a,!1)},i.send(null)}catch(e){lt("Exception thrown from streamFactory.FactoryWithURL"+e)}}};ve.FactoryWithContent=function(e,t,a,i,n){var r;try{r="hls"===e?(ye(hlsStreamInfo,streamInfoBase,t,i),new hlsStreamInfo(a,n)):"dash"===e?(ye(dashStreamInfo,streamInfoBase,t,i),new dashStreamInfo(a,n)):(ye(nonAdaptiveStream,streamInfoBase,t,i),new nonAdaptiveStream(a,n))}catch(e){lt("Exception thrown from streamFactory.FactoryWithContent "+e)}return r},StreamTypeDetector=function(t,e,a,i){function n(e,t,a){lt("Mime type method didn't work. Lets apply parsers one after another - Brute force");var i=ve.FactoryWithContent("hls",e,t,a,!1);i.isParsed||(lt("not a HLS stream"),(i=ve.FactoryWithContent("dash",e,t,a,!1)).isParsed||(lt("not Dash either... Assuming Progressive download"),ve.FactoryWithContent("nonAdaptive",e,t,a,!1)))}try{if(!t||""===t)return streamError.Invalid_Stream;var r=RegExp(".m3u8"),s=RegExp(".mpd");if(a){if(r.exec(t))return lt("Found m3u8 as an extension"),void ve.FactoryWithURL("hls",t,i);if(s.exec(t))return lt("Found mpd as an extension"),void ve.FactoryWithURL("dash",t,i);lt("Couldn't find either m3u8 or Dash will try mime type");var o=new XMLHttpRequest;lt("To get mime type trying HEAD request"),o.open("HEAD",o,!0),o.overrideMimeType&&o.overrideMimeType("text/xml"),o.onreadystatechange=function(){var e;this.readyState===this.DONE&&("application/x-mpegURL"===(e=this.getResponseHeader("content-type"))||"vnd.apple.mpegURL"===e?(lt("Rceived mime type is m3u8"),ve.FactoryWithContent("hls",t,this.responseText,i)):"application/dash+xml"===e?(lt("Rceived mime type is dash"),ve.FactoryWithContent("dash",t,this.responseText,i)):n(t,this.responseText,i))},o.send(null)}else r.exec(t)?(lt("Found m3u8 as an extension"),streamObj=ve.FactoryWithContent("hls",t,e,i,!0)):s.exec(t)?(lt("Found mpd as an extension"),streamObj=ve.FactoryWithContent("dash",t,e,i,!0)):n(t,e,i);return streamError.NoError}catch(e){lt("Exception thrown from StreamTypeDetector "+e)}},fragmentState={Invalid:"Invalid",InPorgress:"InProgress",Completed:"Completed"},fragment=function(e,t){this.id=e,this.bitrate=t,this.timeStamp=(new Date).getTime(),this.state=fragmentState.InPorgress,this.downloadTime=0,this.bytesDownloaded=0},streamFragments=function(){this.fragments={},this.fragmentId=0,this.downloadStarted=function(e){e=new fragment(this.fragmentId,e);this.fragments[this.fragmentId.toString()]=e},this.cleanup=function(){for(var e in this.fragments)delete this.fragments[e]},this.downloadCompleted=function(e,t){var a,i;this.fragments[this.fragmentId.toString()]&&this.fragments[this.fragmentId.toString()].state!==fragmentState.Completed&&(a=this.fragments[this.fragmentId.toString()],i=(new Date).getTime(),a.downloadTime=i-a.timeStamp,a.state=fragmentState.Completed,t?lt("bytesDownloaded reported = "+(a.bytesDownloaded=t)):(a.bytesDownloaded=e*a.downloadTime,lt("bytesDownloaded not reported and calculated one is = "+a.bytesDownloaded)),this.fragmentId++)}},hlsStream=function(){var i=new streamFragments;this.streamFragmentDownloadStarted=function(e){i.downloadStarted(e),0!==e&&Mt(e)},this.streamFragmentDownloadCompleted=function(e){i.downloadCompleted(e,0)},this.cleanupFragments=function(){i.cleanup()},this.getBandwidthFromFragments=function(){var e=0,t=0;for(index in i.fragments){var a=i.fragments[index];a.state===fragmentState.Completed&&a.bytesDownloaded&&(e+=a.bytesDownloaded,t+=a.downloadTime)}return 0===t?0:e/t}};!function(){if("undefined"!=typeof akamaiBCVideoObject)try{var e,t=document.getElementsByTagName("script"),a=0;if(t.length)for(a=0;a<t.length;a++)null==t[a].src||-1==t[a].src.indexOf("79423.analytics.edgesuite.net")&&-1==t[a].src.indexOf("79423.analytics.edgekey.net")||(t[a].src,""!=(e=Ne("configPath",t[a].src))&&(F.url=e))}catch(e){}else c&&c.configPath?(F.url=c.configPath,U.objectBased=!0):F.url=AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH;try{var i;window&&(i=null,Se()?(i=Ne("AkamaiAnalytics_configPath",window.parent.location))&&(F.url=i):(i=Ne("AkamaiAnalytics_configPath",window.location))&&(F.url=i))}catch(e){}F.url&&(1==parseInt(Ne("enableGenericAPI",F.url))&&(U.objectBased=!0),F.beaconSent=parseInt(Ne("beaconSentNotify",F.url)),1==parseInt(Ne("setVideoObject",F.url))&&(U.videoPassed=!0),1==parseInt(Ne("subscribeVideo",F.url))&&(U.videoPassed=!0),1==parseInt(Ne("exception",F.url))&&(me.printException=!0),me.configURLCsmaDebug=parseInt(Ne("debug",F.url)))}();function Se(){var e,t,a,i,n=!1;try{window!==window.parent?(e={},t={},a=document.URL,i=null,document&&document.referrer&&(i=document.referrer),null!=a&&P(a,e),null!=i&&P(i,t),e.port===t.port&&e.protocol===t.protocol&&e.hostName===t.hostName&&(n=!0)):n=!0}catch(e){}return n}try{window&&(Se()?me.pageURLCsmaDebug=parseInt(Ne("AkamaiAnalytics_debug",window.parent.location)):me.pageURLCsmaDebug=parseInt(Ne("AkamaiAnalytics_debug",window.location)))}catch(e){}try{"undefined"!=typeof akamaiBCVideoObject&&"undefined"!=typeof brightcovePerforceVersion&&jt("std:pluginVersion","Brightcove-"+brightcovePerforceVersion)}catch(e){lt("Exception,  pluginVersion: "+e)}function Te(){me.windowOpened||1!=me.pageURLCsmaDebug&&1!=me.configURLCsmaDebug&&1!=me.configDebug||(l=!0,t=window.open("http://media-analytics.akamaized.net/library/debug/index.html","","status=0,toolbar=0,location=0,menubar=0,directories=0,height=680,width=1200"),function(){if(!r){var e=document.getElementsByTagName("script");if(e.length)for(i=0;i<e.length;i++)if(null!=e[i].src){var t=e[i].src;if(-1!=t.indexOf("akamaihtml5-min.js")||-1!=t.indexOf("csma.js")){r=t;break}}}}())}function be(e,t,a,i){_||function(a,t,e,i){a&&lt("XML Request: isXDomainRequest = "+R+":::funcCallback =  :url: "+t);var n;if(null!=t&&"undefined"!=t&&""!=t)try{if(R){n=new XDomainRequest,a&&(n.onprogress=function(){},n.ontimeout=function(){},n.onload=function(){var e,t;lt("XML Request : xmlClient.onload"),window.DOMParser?(e=(new DOMParser).parseFromString(n.responseText,"text/xml"),(t={status:"200",readyState:"4"}).responseXML=e,t.responseText=n.responseText):((e=new ActiveXObject("Microsoft.XMLDOM")).async=!1,e.loadXML(n.responseText),(t={status:"200",readyState:"4"}).responseXML=e),a(t)},n.onerror=function(e){lt("XML Request : Error, loading xml. url = :"+t),-1!=t.indexOf("serverIp")&&(ie=!0),-1!=t.indexOf("protocol-info")&&(re.fastTCPFailed=!0)}),n.open("GET",t,!e);try{i?setTimeout(function(){n.send()},100):n.send(null)}catch(e){try{n.send(null)}catch(e){}}}else(n=new XMLHttpRequest).open("GET",t,!e),a&&(n.overrideMimeType&&n.overrideMimeType("text/xml"),n.onreadystatechange=function(){lt("XML Request : xmlClient.onreadystatechange"),a(n)}),n.send(null)}catch(e){lt("Exception,  XML Request for url :"+t+",Exception:"+e)}}(e,t,a,i)}function ke(e){var t,a=X.common;null!=a&&((t={}).name=e,t.key=e,a.push(t))}function Ae(e){if(N.cdn)return N.cdn;try{for(key in ee.cdn){var t=ee.cdn[key];if(t&&t.name&&t.value)for(var a=e[t.name],i=t.value.split(","),n=0;n<i.length;n++)if(a&&-1!=a.indexOf(i[n].trim()))return key}}catch(e){lt("Exception Get CDN"+e.message)}}function Le(e){var t,a;return-1!=e.indexOf("://")&&(a=e.indexOf("://"),e=e.substring(a+3)),-1!=e.indexOf("/")?(a=e.indexOf("/"),-1!=e.indexOf("?")&&(a=a<(t=e.indexOf("?"))?a:t),e.substring(0,a)):-1!=e.indexOf("?")?(a=e.indexOf("?"),e.substring(0,a)):e}function Ie(e,t,a,i){var n=e.currentState,r=e.seekObject;"S"==i&&-1==r.seekStartStreamTime?(r.seekStartEpochTime=n.timeUpdateClockTime,r.seekEndEpochTime=t,r.seekStartStreamTime=n.timeUpdateStreamTime,r.seekEndStreamTime=a):"S"==i&&r.seekEndStreamTime==n.timeUpdateStreamTime?(r.seekEndEpochTime=t,r.seekEndStreamTime=a):-1!=r.seekStartStreamTime&&(e.seekTime+=r.seekEndEpochTime-r.seekStartEpochTime,"-"!=e.seekIntervalsAsString?e.seekIntervalsAsString+=","+r.seekStartStreamTime+":"+r.seekEndStreamTime:e.seekIntervalsAsString=r.seekStartStreamTime+":"+r.seekEndStreamTime,"-"!=e.pauseSeekSession?e.pauseSeekSession+=",S("+r.seekStartStreamTime+":"+(r.seekStartEpochTime-e.startTimer)+"-"+r.seekEndStreamTime+":"+(r.seekEndEpochTime-e.startTimer)+")":e.pauseSeekSession="S("+r.seekStartStreamTime+":"+(r.seekStartEpochTime-e.startTimer)+"-"+r.seekEndStreamTime+":"+(r.seekEndEpochTime-e.startTimer)+")",++e.seekCount,e.seekObject={seekStartEpochTime:-1,seekEndEpochTime:-1,seekStartStreamTime:-1,seekEndStreamTime:-1})}function Ee(e,t){lt("set RebufferSession : curTime = "+t);try{var a=Math.round(t-e.lastLogTime-e.curRebufferTime),i=Math.round(e.curRebufferTime);e.currRebufferEndEpoch=Math.round(t),e.currRebufferStartEpoch=Math.round(t-i),i>J.isSessionWithRebufferLimit&&(e.isSessionWithRebuffer=1),e.rebufferSession?e.rebufferSession=e.rebufferSession+";"+a+":"+i:e.rebufferSession=a+":"+i}catch(e){lt("Error, set RebufferSession"+e.message)}}function Ce(e,t){var a=1;if(e.rebufferSessionH=null,e.rebufferSessionArrayHLine&&(!e.rebufferSessionArrayHLine||0!==e.rebufferSessionArrayHLine.length)){for(;e.rebufferSessionArrayHLine[a]&&t-e.rebufferSessionArrayHLine[a]>2*J.heartBeatInterval;)e.rebufferSessionArrayHLine.shift(),e.rebufferSessionArrayHLine.shift(),1==e.isSessionWithRebufferH&&(e.sendIsSessionWithRebufferH=0,e.isSessionWithRebufferH=null);for(;e.rebufferSessionArrayHLine[a];){var i=t-e.rebufferSessionArrayHLine[a-1],n=e.rebufferSessionArrayHLine[a]-e.rebufferSessionArrayHLine[a-1];1==e.sendIsSessionWithRebufferH&&n>J.isSessionWithRebufferLimit&&(e.isSessionWithRebufferH=1),e.rebufferSessionH?e.rebufferSessionH=e.rebufferSessionH+";"+i+":"+n:e.rebufferSessionH=i+":"+n,a+=2}e.rebufferSessionArrayHLine[a-=1]&&(i=t-e.rebufferSessionArrayHLine[a],1==e.sendIsSessionWithRebufferH&&i>J.isSessionWithRebufferLimit&&(e.isSessionWithRebufferH=1),e.rebufferSessionH?e.rebufferSessionH=e.rebufferSessionH+";"+i+":"+i:e.rebufferSessionH=i+":"+i)}}function we(e){var t=e.readyState,a=e.status;4!==parseInt(a/100)&&0!==a||(lt("readServerIp: serverIpFailed request falied as status is ,in 400 series"),ie=!0),4!=t||200!=a||(e=e.responseXML)&&(e=e.documentElement||e,ae.serverip=(ne?e.getElementsByTagName("ip"):e.getElementsByTagName("serverip"))[0].childNodes[0].nodeValue,lt("readServerIp : diagnostics.serverip =  "+ae.serverip))}function Pe(e){var t="",a=e.readyState,i=e.status;4!==parseInt(i/100)&&0!==i||(lt("read fast tcp: fast tcp Failed request falied as status is 400 series"),re.fastTCPFailed=!0);try{if(4==a&&200==i){var n,r=e.responseXML;if(r)if(lt("populating fast tcp"),(n=r.documentElement||r)&&n.firstElementChild){var s=n.firstElementChild,o="",l="";if(s)for(s.hasAttribute("key")&&(t=(l=s.getAttribute("key"))+":"+(o=s.childNodes[0].nodeValue));s.nextElementSibling;)(s=s.nextElementSibling).hasAttribute("key")&&(l=s.getAttribute("key"),o=s.childNodes[0].nodeValue,t?t+=","+l+":"+o:t=l+":"+o)}}t&&(re.ftcp=t)}catch(e){lt("Exception,  read fast tcp"+e)}}function Re(e,t){try{var a=e.akamai;J&&J.logInterval&&!t&&(a.fastTCPServerIpTimer=Ue(Re,J.logInterval,[e])),ie||function(e){if(e=e.akamai,ie)lt("getting ServerIp : serverIp request failed");else if(e.hostName)try{var t=null;e.protocol&&(-1!=e.protocol.indexOf("rtmp")?(t="http://"+e.hostName+"/fcs/ident",ne=!0):t=e.protocol+"//"+e.hostName+"/serverip",lt("getting ServerIp : serverIpPath = "+t),be(we,t,!1,!0))}catch(e){ie=!0,lt("getting ServerIp: error, xmphttprequest")}}(e),!re.fastTCPFailed&&re.fastTCPEnabled&&function(e){if(e=e.akamai,re.fastTCPFailed)lt("getting fast tcp: request failed");else if(e.hostName)try{var t=e.protocol+"//"+e.hostName+"/protocol-info";lt("getting fast tcp : fastTCPPath = "+t),be(Pe,t,!1,!0)}catch(e){re.fastTCPFailed=!0,lt("getting ServerIp: error, xmphttprequest")}}(e),ie&&re.fastTCPFailed&&He(a.fastTCPServerIpTimer)}catch(e){lt("Exception get fast tcp server ip")}}function xe(e){return e.objectBased?e.errorReason||Ct[0]:e.externalError||(e.error&&e.error.code?Ct[e.error.code]:Ct[0])}function Me(e){var t="Play.End.Detected";return t=e.objectBased&&e.endReason?e.endReason:t}function Be(){ce.viewerId=N.viewerId||null,ce.viewerDiagnosticsId=N.viewerDiagnosticsId||N.viewerId||null}function De(e,t){var a=null,i="",n=50,r=32;(a=ce&&ce.viewerDiagnosticsId?ce.viewerDiagnosticsId:a)&&"-"!=a&&(t&&e.xViewerId||(function(e){var t=null;Y&&Y.viewerDiagnostics&&Y.viewerDiagnostics.salt&&Y.viewerDiagnostics.salt.version&&(t=Y.viewerDiagnostics.salt.version);e.xViewerIdVersion=t,ce.xViewerIdVersion=t}(e),lt("get Viewer DiagnosticsID"),a=encodeURIComponent(a),Y&&Y.viewerDiagnostics&&Y.viewerDiagnostics.salt&&Y.viewerDiagnostics.salt.value&&(i=Y.viewerDiagnostics.salt.value),Y&&Y.viewerDiagnostics&&Y.viewerDiagnostics.salt&&Y.viewerDiagnostics.salt.iterations&&(n=Y.viewerDiagnostics.salt.iterations),Y&&Y.viewerDiagnostics&&Y.viewerDiagnostics.salt&&Y.viewerDiagnostics.salt.bytes&&(r=Y.viewerDiagnostics.salt.bytes),n=w.PBKDF2(a,i,{keySize:r/8,iterations:n}),e.xViewerId=n,ce.xViewerId=n))}function Ne(e,t,a){null==a&&(a="");try{if(""==t||null==t)return;e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return null==i?a:i[1]}catch(e){return lt("Exception,  getValueFromQueryString :"+e),a}}function Oe(e){He(e.akamai.fastTCPServerIpTimer),u&&Re(e)}function Ue(t,a,i){try{var n=null;return n=setTimeout(function(){t.apply(void 0,i)},a)}catch(e){lt("Exception, set window timeout:"+e);try{n=window.setTimeout(function(){t.apply(void 0,i)},a)}catch(e){return null}return n}}function He(t){try{clearTimeout(t)}catch(e){lt("Exception clear window timeout:"+e);try{window.clearTimeout(t)}catch(e){}}}function Ve(e){lt("startBeaconTImer");var t=e.akamai;t.areTimerStarted||(lt("startBeaconTimer: starting beacon timer"),t.firstPLineTimer=Ue(qe,J.secondaryLogTime,[e]),t.hLineTimer=Ue(We,J.heartBeatInterval,[e]),t.fastTCPServerIpTimer=Ue(Oe,J.logInterval-5e3,[e]),e.objectBased&&(te=500),t.pollingTimer=Ue(Gt,te,[e]),t.areTimerStarted=!0)}function _e(e){e=e.akamai;e&&(e.hLineTimer&&He(e.hLineTimer),e.pollingTimer&&He(e.pollingTimer),e.fastTCPServerIpTimer&&He(e.fastTCPServerIpTimer),e.firstPLineTimer&&He(e.firstPLineTimer),pe&&pe.retryTimer&&He(pe.retryTimer))}function Fe(e){var t=e.akamai;oe.akamai={},oe.dataSent={},t.areTimerStarted=!1,t.isCLineSent=!1,t.isELineSent=!1,t.lastRebufferEndEpoch=0,t.connectTime=0,z.browserClose=!1,t.totalPlayClockTime=t.totalStreamTime=t.totalRebufferCount=t.totalRebufferTime=0,t.isVisitEnd=0,t.sequenceId="0",t.wasPutToSleep=!1,t.chasingSleep=null,t.continuousRebufferDuration=0,Zt(),t.attemptId=t.sessionId=S(),Be(),t.clientId=t.viewerId=function(){var t=ce.viewerId;if("-"!=t){if(!t)try{if(window&&window.localStorage&&window.localStorage.getItem("akamai_clientId"))t=window.localStorage.getItem("akamai_clientId");else try{t=S(),window&&window.localStorage&&window.localStorage.setItem("akamai_clientId",t)}catch(e){lt("window.localStorage Exception :"+e)}}catch(e){lt("Exception,  getting viewerId"+e),t=S()}return t}}(),Y.viewerDiagnosticsEnabled&&De(t),t.lastPLineSentTime=t.hLineSentCount=t.lastSLineSentTime=t.lastHLineSentTime=0,t.lastHTime=0,ua("HTML_LastCLineTime"),bt=[0,0,0,0,0,0,0,0,0,0,0,0];e=parseInt(ca("HTML_VisitCountCookie"));e&&""!=e||(t.isVisitStart=1,ma("HTML_VisitCountCookie",e=0));e=parseInt(ca("HTML_isPlayingCount"));e&&""!=e||ma("HTML_isPlayingCount",e=0);e=ca("HTML_VisitValueCookie");e&&""!=e||ma("HTML_VisitValueCookie","0|0|0|0|0|0|0|0|0|0|0|0|0");e=ca("HTML_BitRateBucketCsv");e&&""!=e||ma("HTML_BitRateBucketCsv","0,0,0,0,0,0,0,0");e=ca(ct);e&&""!=e?t.browserSessionId=t.visitId=ca(ct):(t.browserSessionId=t.visitId=S(),ma(ct,t.visitId))}function je(e,t){e=e.akamai;e.isILineSent=!0,++e.iLineCount,e.lastSLineSentTime=t,1==e.iLineCount&&(a=parseInt(ca("HTML_VisitCountCookie")),ma("HTML_VisitCountCookie",++a),Tt=t);var a=parseInt(ca("HTML_VisitIntervalStartTime"));a&&" "!=a||ma("HTML_VisitIntervalStartTime",a=t),bt[0]=1,e.sendVLine=!0}function qe(e){var t=D();st(e,"playing",!1,e.akamai.lastPLineSentTime=t)}function We(e){var t=e.akamai;t.hLineTimer=Ue(We,J.heartBeatInterval,[e]);var a=D();st(e,"heartBeat",!1,a),t.lastHLineSentTime=a,t.hLineSentCount++,t.hLineSentCount%(J.logInterval/J.heartBeatInterval)==0&&(st(e,"playing",!1,a),t.lastPLineSentTime=a,t.continuousRebufferDuration>=J.rebufferDurationOutlier&&(U.objectBased?(U.errorReason="Error.Continous.Rebuffer",Ot(U)):akamaiHandleError("Error.Continous.Rebuffer")))}function ze(e,t,a,i){try{lt("sendBeaconCLine : endReasonCode = "+t);var n=e.akamai;n.endReasonCode=t,st(e,"complete",a,i);var r=parseInt(ca("HTML_isPlayingCount"));ma("HTML_isPlayingCount",r-=1),n.isVisitStart=null,n.isCLineSent=!0,n.firstTimePlay=!0,_e(e),ma("HTML_LastCLineTime",i)}catch(e){lt("Exception, send beacon C Line:"+e)}}function Xe(e,t,a,i){try{var n,r=e.akamai;r.errorCode=t||"UNKNOWN",lt("sendBeaconELine : errorCode = "+r.errorCode),(bt[3]=1)==r.sequenceId&&(bt[11]=1,Be(),Y.viewerDiagnosticsEnabled&&De(r,!0)),r.playerState="E",st(e,"error",a,i),r.isSLineSent&&(n=parseInt(ca("HTML_isPlayingCount")),ma("HTML_isPlayingCount",n-=1)),r.isELineSent=!0,r.isVisitStart=null,r.firstTimePlay=!0,_e(e);var s=i;tt(r),ma("HTML_LastCLineTime",s)}catch(e){lt("Exception, send beacon E line:"+e)}}function Ke(e,t){try{lt("sendBeaconVLine");var a=e.akamai;a.isVisitEnd=1,function(e){try{var t=ca("HTML_VisitValueCookie").split("|"),a=!0,i=[];i=(a=""==t||null==t?!1:a)?t:kt;for(var n=["visitAttempts","visitPlays","visitViews","visitErrors","visitPlayClockTime","visitPlayStreamTime","visitRebufferCount","visitRebufferTime","visitAdPlayClockTime","visitAdStartCount","visitAdAbandonCount","visitStartupErrors"],r=0;r<n.length;r++)e[n[r]]=i[r]}catch(e){lt("Exception get visit value  cookie : "+e)}}(a);var i=parseInt(ca("HTML_VisitIntervalStartTime"));a.visitMaxPersistentBitRateBucket=function(){try{var e=ca("HTML_BitRateBucketCsv").split(","),t=!1;(e=null==e||""==e?At.split(","):e)[0]=parseInt(e[0]);for(var a="00",i=e[0],n=0;n<e.length;n++)e[n]=parseInt(e[n]),0<e[n]&&(t=!0),i<e[n]&&(i=e[n],a="0"+n);if(t)return a}catch(e){lt("Exception, get visit max bit rate bucket"+e)}}(),a.visitInterval=t-i,""!=i&&null!=i&&!isNaN(i)||(a.visitInterval=t-Tt),a.sessionId=null,a.attemptId=null,a.sequenceId=null,ua("HTML_BitRateBucketCsv"),ua("HTML_VisitValueCookie"),ua("HTML_VisitIntervalStartTime"),ua("HTML_LastCLineTime"),ua("HTML_VisitCountCookie"),ua("HTML_isPlayingCount"),ua(ct),st(e,"visit",!0,t),oe.akamai={},oe.dataSent={},lt("sendBeaconVLine: beacon sent"),a.sendVLine=!1,a.iLineCount=0,He(e.akamai.clearVisitTimeoutId);var n=a.isPlaylist;e.akamai=new Lt(U),"undefined"!=typeof akamaiBCVideoObject&&(e.akamai.isPlaylist=n)}catch(e){lt("Exception, send beacon V line:"+e)}}function Ge(e){lt("entered setVisitValueParameters"),bt[4]=e.totalPlayClockTime,bt[5]=e.totalPlayStreamTime,bt[6]=e.totalRebufferCount,bt[7]=e.totalRebufferTime,bt[8]=e.totalAdPlayClockTime,bt[9]=e.totalAdStartCount,bt[10]=e.totalAdAbandonCount,5e3<e.totalPlayClockTime&&(bt[2]=1),function(){try{var e,t=ca("HTML_BitRateBucketCsv"),a=At.split(","),i=t.split(","),n=0;for(e in ge.bitRatePlayTime)e=parseInt(e),i[n=7<(n=parseInt((e-1)/5e5))?7:n]=parseInt(i[n])+ge.bitRatePlayTime[e],a[n]=parseInt(a[n])+ge.bitRatePlayTime[e];ma("HTML_BitRateBucketCsv",t=i.join(",")),At=a.join(",")}catch(e){lt("Exception set bit rate bucketcsv"+e)}}(),function(){for(var e=ca("HTML_VisitValueCookie").split("|"),t=0;t<bt.length;t++)kt[t]+=bt[t];lt("setVisitValueCookie :: visit values saved"+kt);for(var a=0;a<e.length;a++)e[a]=parseInt(e[a])+bt[a];ma("HTML_VisitValueCookie",e.join("|"))}()}function Qe(t){try{return encodeURI(t).replace(/#/g,"%23")}catch(e){return lt("Exception,  encoding beacon"),t}}function Je(){try{var e;lt("send delayed beacon"),z.queue&&0<z.queue.length?(e=z.queue.shift(),z.timer=Ue(Je,z.time,[]),lt("Beacon ::"+e.url,"Beacon"),be(null,e.url,e.isSync),l&&y.processLogs({api:"reportBeaconData",value:e.url})):(lt("send delayed beacon : clear the timer"),He(z.timer),z.timer=null)}catch(e){lt(e)}}function Ye(e,t,a){if(0!=le){e=J.beaconUrl+"?"+e;try{if(z.enabled){var i={};if(z.browserClose){if(z.timer&&He(z.timer),z.queue&&0<z.queue.length)for(;0<z.queue.length;)lt("put beacon on wire, send beacon from queue::"+(i=z.queue.shift()).url,"BEACON"),lt("Beacon ::"+i.url,"Beacon"),a.wasPutToSleep||(l&&y.processLogs({api:"reportBeaconData",value:i.url}),be(null,i.url,i.isSync));lt("put beacon on wire browser close::"+e,"BEACON"),lt("Beacon ::"+e,"Beacon"),a.wasPutToSleep||(l&&y.processLogs({api:"reportBeaconData",value:e}),be(null,e,t))}else lt("put beacon on wire pushing beacon in queue::"+e),i.url=e,i.isSync=t,z.queue.push(i),z.timer?lt("put beacon on wire: timer is running"):(lt("put beacon on wire: call send delayed beacon"),a.wasPutToSleep||Je())}else lt("put beacon on wire"+e,"BEACON"),a.wasPutToSleep||be(null,e,t)}catch(e){lt("failed to send beacon"),lt(e)}}else lt("put beacon On Wire, dont send beacon isACtive is zero")}function $e(e,t,a,i){try{for(var n=0;n<t.length;n++){t[n].expiryDuration&&function(e,t){try{var a,i,n,r,s;null!=e&&null!=t&&(a=e[function(e){dimension="","viewerInterval"===e?dimension="viewerId":"viewerTitleInterval"===e&&(dimension="title");return dimension}(t.name)],i=w.SHA1(a).toString(),n=function(e){try{var t=window.localStorage.getItem(e);if(null!=t)return JSON.parse(t).value}catch(e){}}(i),r=0,s=D(),n&&(r=0<(r=(r=s-parseFloat(n))/1e3/60)?r.toFixed(2):0),function(e,t,a){try{var i,n={value:t};null!=a&&(i=new Date,0<parseInt(a)?i.setDate(i.getDate()+parseInt(a)):i.setDate(i.getDate()+parseInt(90)),n.expiryDate=i.toDateString()),window.localStorage.setItem(e,JSON.stringify(n))}catch(e){}}(i,s,t.expiryDuration),e[t.name]=r.toString())}catch(e){lt("Exception,  calculateUniqueDimension :"+e)}}(e,t[n]);var r=t[n].name,s=null;r in e&&(s=e[r]),!(s=t[n].value?t[n].value:s)&&0!=s||(t[n].sendOnce?!1===t[n].isSent&&(0!=s&&(t[n].isSent=!0),Ze(s,t,r,n,i,a)):Ze(s,t,r,n,i,a))}}catch(e){lt("Exception, assemble logs:"+e)}}function Ze(e,t,a,i,n,r){try{var s;!t[i].regExpJS||(s=new RegExp(t[i].regExpJS).exec(e))&&(e=s[s.length-1])}catch(e){lt("Exception,  evaluating regExpJS attribute for metric : "+a)}e=String(e).replace(/~/g,J.encodedParamSeparator),t[i].size&&(e=function(t,e){try{return t=t.substring(0,e)}catch(e){return lt("Exception,  getTruncatedMetric"+e),t}}(e,t[i].size)),t[i].key in n||(n[t[i].key]=t[i].key,r.push((J.useKey?t[i].key:a)+"="+e))}function et(e,t,a){try{lt("getBeaconStrings : eventCode =  "+t);var i=X.common,n=[],r=X[t];if(null==r||"undefined"==r)return void lt("getbeaconstrings, return as eventmetrics undefined");var s,o=[],l={};e.eventCode||(e.eventCode=Z[t]),$e(e,i,n,l),"error"==t&&(e.updateTerminateMetrics(),Ge(e)),"complete"==t&&(e.updateTerminateMetrics(),s=X.playing,Ge(e),$e(e,s,o,l)),$e(e,r,o,l);var d=Qe(d=n.join(J.urlParamSeparator)),c=0;try{for(var u in Q)J.useKey?c+=Q[u].length+3+J.urlParamSeparator.length:c+=u.length+3+J.urlParamSeparator.length}catch(e){c=12}c--;var m=J.maxLogLineLength-c-d.length-3-J.beaconUrl.length;m<=0&&(m=4780-c-d.length-3-J.beaconUrl.length);var h=[],p="";if(0<m){if(0<o.length){for(var f,g="",y=0;y<o.length;y++)(f=Qe(o[y])).length>=m?h.push(f):g.length+f.length<=m?g?g+=J.urlParamSeparator+f:g=f:(h.push(g),g="");""!=g&&h.push(g)}var v=h.length;if(1<v)for(var S=1;S<=v;++S)p=d+J.urlParamSeparator,p+=(J.useKey?Q.partNumber:"partNumber")+"="+S+J.urlParamSeparator,p+=(J.useKey?Q.totalParts:"totalParts")+"="+v+J.urlParamSeparator,p+=h[S-1],p+=J.urlParamSeparator,X[t]&&Ye(p,a,e);else Ye(p=d+J.urlParamSeparator+h[0]+J.urlParamSeparator,a,e)}else{var T=Qe(T=o.join(J.urlParamSeparator)),p=d+J.urlParamSeparator+T+J.urlParamSeparator;X[t]&&Ye(p,a,e)}}catch(e){lt("Exception, get beacon Strings:"+e)}}function tt(e){oe.fLineCount=0;e=ot(e);oe.akamai=e,oe.akamai.customDataPopulated=!1}function at(e){try{for(var t in X)if(X[t])for(var a=0;a<X[t].length;a++)X[t][a].fallback&&!N[X[t][a].name]&&(i=e,n=X[t][a].name,r=X[t][a].fallback,s=void 0,"viewerId"!=n&&"clientId"!=n&&"viewerDiagnosticsId"!=n&&(r&&(N[r]?s=N[r]:i[r]&&(s=i[r])),i[n]=s))}catch(e){}var i,n,r,s}function it(e,t,a,i){lt("updating metrics for playing and end events");var n=e.akamai,r=0,s=n.playerState,o=!0;switch(n.currentStreamTime=parseInt(Jt(e)),n.currentState.state){case vt.playing:n.playerState="PL",0<t-n.seekTime&&n.updatePlayClockTime(t-n.seekTime,n.currentState.lastEventClockTime,a),n.playClockTime<0&&(n.playClockTime=0),n.updatePlayed(n.currentStreamTime);break;case vt.pause:n.pauseDuration+=t,n.playerState="PS";break;case vt.rebuffering:if(!n.wasPutToSleep){n.rebufferTime+=t,n.curRebufferTime+=t,Ee(n,a),n.playerState="B",r=a-n.curRebufferTime;break}case vt.resumeBuffering:n.playerState="RB",n.resumeBufferTime+=t;break;case vt.ended:n.updatePlayed(n.currentStreamTime);break;case vt.seek:0<a-n.currentState.timeUpdateClockTime&&Ie(n,a,n.currentStreamTime,"S"),n.currentState.timeUpdateClockTime=a,n.playerState="SK";break;default:o=!1}if("B"===n.playerState?n.continuousRebufferDuration+=n.curRebufferTime:n.continuousRebufferDuration=0,ge.getTransitionSession(n),Ie(n),n.rebufferSession&&(function(e,t){var a,i;if("B"==t){var n="";if(e.rebufferSession){for(var r=e.rebufferSession.split(";"),s=0;s<r.length;s++){var o=r[s].split(":");n+=0==s?"0:"+o[1]:r[s],s!=r.length-1&&(n+=";")}lt("newRebufferSession = "+n),e.rebufferSession=n}i=1,a=0}else a=(i=0)<e.lastRebufferEndEpoch?e.firstRebufferStartEpoch-e.lastRebufferEndEpoch:-1;e.rebufferSession=i+":"+a+";"+e.rebufferSession,e.lastRebufferEndEpoch=e.currRebufferEndEpoch}(n,s),n.firstRebufferStartEpoch=r),5e3<n.playClockTime&&(n.isView=1),o&&(n.currentState.lastEventClockTime=a),n.bytesLoaded=function(e){var t=0,a=0;try{e&&e.objectBased&&c&&c.bytesLoaded&&(t=parseInt(c.bytesLoaded()),a=t-e.akamai.lastBytesLoaded)}catch(e){}if(e.akamai.lastBytesLoaded=t,0<a)return a}(e),n.played){for(var l=n.played,d=n.playStreamTime=0;d<l.length;d++)n.playStreamTime+=parseInt(l[d][1]-l[d][0]);"R"==n.logType&&(n.playStreamTime-=n.lastPlayStreamTime,n.lastPlayStreamTime+=n.playStreamTime)}i&&"Browser.Close"!=n.endReasonCode&&!n.streamTitleSwitchReason&&(n.playerState="E")}function nt(e){try{for(var t in x)"viewerId"!=t&&"clientId"!=t&&"viewerDiagnosticsId"!=t&&"pluginVersion"!=t&&(e[t]=x[t]);"pluginVersion"in x&&(e.pluginVersion=n+":"+x.pluginVersion)}catch(e){}}function rt(e,t){lt("populate custom data, eventCode = "+t);try{if(!function(e){try{var t,a="-";document&&document.referrer&&((t=(t=document.referrer).split("/",3))&&t[2]&&(a=t[2])),window==window.top?(e.pageUrl=N.pageUrl||document.URL,e.pageHost=N.pageUrl&&Le(N.pageUrl)?Le(N.pageUrl):document.location.hostname,e.pageReferrer=N.pageReferrer||document.referrer||"-",e.pageReferrerHost=N.pageReferrer&&Le(N.pageReferrer)?Le(N.pageReferrer):document.referrer?a:"-"):(e.pageUrl=N.pageUrl||document.referrer||"-",e.pageHost=N.pageUrl&&Le(N.pageUrl)?Le(N.pageUrl):document.referrer?a:"-",e.pageReferrer=N.pageReferrer||"NA",e.pageReferrerHost=N.pageReferrer&&Le(N.pageReferrer)?Le(N.pageReferrer):"NA")}catch(e){}}(e),e.deliveryType=(n=e,N.deliveryType||n.deliveryType),e.device=N.device||gt,!("playing"!=t&&"complete"!=t&&"feedback"!=t&&"error"!=t||(function(t){try{var e=null;if(null!=oe.socialSharingObj)for(var a in oe.socialSharingObj)null==e?e=a+":"+oe.socialSharingObj[a]+",":e+=a+":"+oe.socialSharingObj[a]+",";null!=e&&(t.socialSharing=e.substring(0,e.length-1))}catch(e){lt("Exception,  getFeedbackData"+e),t.socialSharing=null}oe.socialSharingObj={}}(e),null!=e.socialSharing&&""!=e.socialSharing||"feedback"!=t||e.customDataChanged)))return void--oe.fLineCount;for(var a in N)"viewerId"!=a&&"clientId"!=a&&"viewerDiagnosticsId"!=a&&(a in B||(e[a]=N[a]));if(pe&&pe.akamai)for(var i in pe.akamai)e[i]=pe.akamai[i];!function(e){try{var t=x.streamName||e.streamName}catch(e){}try{N.title?e.title=N.title:e.title=N.eventName||t,N.eventName?e.eventName=N.eventName:e.eventName=N.title||t}catch(e){lt("Exception,  getting title and eventName, "+e)}}(e),e.cdn=Ae(e)}catch(e){lt("Exception,  populate Custom Data , "+e)}var n}function st(e,t,a,i){try{lt("sendBeacon: eventCode = "+t+", clocktime = "+i);var n,r=e.akamai,s=i-r.currentState.lastEventClockTime;r.logInterval="init"==t||r.lastLogTime<=0?"0":(i-r.lastLogTime)/1e3,r.customDataPopulated||rt(r,t),r.serverIp=ae.serverip||"-",r.fastTCP=re.ftcp||"-",r.eventCode=Z[t],0<r.hLineSentCount?r.lastHTime=(i-r.lastHLineSentTime)/1e3:r.lastHTime=(i-r.lastSLineSentTime)/1e3,"heartBeat"==t&&(n=r.logInterval,r.logInterval=(i-r.lastPLineSentTime)/1e3,Ce(r,i)),r.logInterval<0&&(r.logInterval="0");var o,l=!1;if("complete"==t&&(t="playing",l=!0),r.endOfStream=l?"1":"0",r.currentClockTime=i-r.startTimer,r.currentStreamTime=parseInt(Jt(e)),"playing"!=t||r.playEndMetricsUpdated||(l&&Ce(r,i),lt("send Beacon, updating play and end metrics"),it(e,s,i,l),Zt()),r.customDataPopulated||at(r),nt(r),!q){var d={element:ot(r),code:l?"complete":t,synch:a};return W.push(d),"playing"!=t&&"playStart"!=t||r.clearRelativeMetrics(),void("heartBeat"!=t?(lt("send beacon :configurationPopulated false sequenceId = "+r.sequenceId),++r.sequenceId,r.lastLogTime=i):r.logInterval=n)}"playStart"==t&&function(){try{var e,t="";for(e in O)O[e]&&(e in N||(t?t+=", "+e:t=e));t&&(t="Following dimensons have not being set : "+t,t+="<ul style='list-style-type:circle;margin:0'>",lt(t+="<li>Please refer 'Set Custom Data' section in Integration guide for more details.</li></ul>","INTEGRATION"))}catch(e){}}(),r.populateMetricsFromConfiguration(),r.xViewerId=ce.xViewerId,r.xViewerIdVersion=ce.xViewerIdVersion,"undefined"==typeof akaMediaAnalytics||null==akaMediaAnalytics||(o=akaMediaAnalytics.getStream())&&(r.bandwidth=o.getBandwidthFromFragments(),lt("reporting bandwidth = "+r.bandwidth),o.cleanupFragments()),et(r,l?"complete":t,a),r.qualityOfExperience=null,l=!1,"playing"!=t&&"playStart"!=t||r.clearRelativeMetrics(),"heartBeat"!=t?(++r.sequenceId,r.lastLogTime=i):r.logInterval=n}catch(e){lt("Exception, send beacon:"+e)}}function ot(e,t){t=t||{};try{for(var a in e)"object"==typeof e[a]&&e[a]?(t[a]=e[a].constructor===Array?[]:{},ot(e[a],t[a])):t[a]=e[a];return t}catch(e){}}function lt(e,t){try{if(1==me.configURLCsmaDebug||1==me.pageURLCsmaDebug||1==me.configDebug){try{me.printException&&-1!=e.indexOf("Exception")&&(t="ERROR")}catch(e){}var a=[];a[0]={message:e,type:t,time:D(r)-p};var i={logMessage:a,type:"log"};try{void 0!==y?y.processLogs({api:"reportLogs",value:i}):f.push({api:"reportLogs",value:i})}catch(e){f.push({api:"reportLogs",value:i})}try{console.log(e)}catch(e){}}else{var n;q||(n={message:e,msgType:t},ue.push(n))}}catch(e){}var r}function dt(){try{if((1==me.configURLCsmaDebug||1==me.pageURLCsmaDebug||1==me.configDebug)&&me.logStoredMsg)if("function"==typeof AkamaiAnalytics_debugWindow_available&&"1"==AkamaiAnalytics_debugWindow_available()){if(me.logTimer&&He(me.logTimer),me.logStoredMsg=!1,ue.length){for(var e=0;e<ue.length;e++)lt(ue[e].message,ue[e].msgType);ue=[]}}else me.logTimer=Ue(dt,1e3,[])}catch(e){}}Te(),be(function(e){var t=e.readyState,a=e.status;lt("readConfig: readyState = "+t+":::status = "+a);try{if(4==t&&200==a){!function(){try{lt("deleteExpiredDataFromLocalStorage");for(var e=D(),t=window.localStorage.length-1;0<=t;t--){var a,i=window.localStorage.getItem(window.localStorage.key(t));null==i||-1===i.indexOf("expiryDate")||null!=(a=JSON.parse(i))&&void 0!==a.expiryDate&&null!==a.expiryDate&&Date.parse(a.expiryDate)<=e&&window.localStorage.removeItem(window.localStorage.key(t))}}catch(e){}}();var i=e.responseXML;if(i){for(var n=i.documentElement||i,r=n.getElementsByTagName("dataMetrics"),s=0;s<r.length;++s){var o=r[s],l=o.parentNode,d=l.nodeName;K[s]=d;var c=X[d]=[];(f=l.getAttribute("eventCode"))&&(Z[d]=f);for(var u=o.getElementsByTagName("data"),m=0;m<u.length;++m){var h=u[m],d=h.getAttribute("name"),p=h.getAttribute("key"),f=h.getAttribute("value"),g=h.getAttribute("sendOnce"),y=h.getAttribute("fallback"),v=h.getAttribute("size"),S=h.getAttribute("regExpJS"),T=h.getAttribute("expiry"),b={};b.name=d,b.key=p,(d in O||-1!=p.indexOf("_cd_"))&&(O[d]=!0),f&&(b.value=f),g&&(b.isSent=!1,b.sendOnce=g),y&&(b.fallback=y),v&&(b.size=v),S&&(b.regExpJS=S),T&&(b.expiryDuration=parseInt(parseInt(T)/1440)),c.push(b)}}me.configDebug=parseInt(n.getAttribute("debug")),1!=me.configDebug&&(me.configDebug=0),1==me.configDebug&&Te(),n.getElementsByTagName("isActive")[0]&&n.getElementsByTagName("isActive")[0].childNodes[0]&&(le=n.getElementsByTagName("isActive")[0].childNodes[0].nodeValue),G.beaconId=n.getElementsByTagName("beaconId")[0].childNodes[0].nodeValue,G.beaconVersion=n.getElementsByTagName("beaconVersion")[0].childNodes[0].nodeValue;var k=n.getElementsByTagName("logTo")[0];J.logType=k.getAttribute("logType"),J.logType||(J.logType="relative"),J.logInterval=1e3*k.getAttribute("logInterval"),J.logInterval||(J.loginterval=3e5),J.heartBeatInterval=1e3*k.getAttribute("heartBeatInterval"),J.heartBeatInterval||(J.heartBeatInterval=6e4),J.secondaryLogTime=1e3*k.getAttribute("secondaryLogTime"),J.secondaryLogTime||(J.secondaryLogTime=15e3),J.rebufferDurationOutlier=1e3*k.getAttribute("rebufferDurationOutlier"),J.rebufferDurationOutlier||(J.rebufferDurationOutlier=6e5),J.isSessionWithRebufferLimit=k.getAttribute("isSessionWithRebufferLimit"),J.isSessionWithRebufferLimit||(J.isSessionWithRebufferLimit=500),J.fastTCPEnabled=k.getAttribute("fastTCPEnabled"),J.fastTCPEnabled||(J.fastTCPEnabled=0),1==J.fastTCPEnabled&&(re.fastTCPEnabled=!0),J.aisRequestLimit=k.getAttribute("aisRequestLimit"),J.aisRequestLimit||(J.aisRequestLimit=3),pe&&(pe.aisRequestLimit=J.aisRequestLimit),J.aisRequestInterval=1e3*k.getAttribute("aisRequestInterval"),J.aisRequestInterval||(J.aisRequestInterval=3e4),pe&&(pe.aisRequestInterval=J.aisRequestInterval),J.startupTimeOutlierLimit=1e3*k.getAttribute("startupTimeOutlierLimit"),J.startupTimeOutlierLimit||(J.startupTimeOutlierLimit=6e5),J.visitTimeout=60*k.getAttribute("visitTimeout")*1e3,J.visitTimeout||(J.visitTimeout=36e5),J.urlParamSeparator=k.getAttribute("urlParamSeparator"),J.urlParamSeparator||(J.urlParamSeparator="~"),J.encodedParamSeparator=k.getAttribute("encodedParamSeparator"),J.encodedParamSeparator||(J.encodedParamSeparator="*@*"),J.initBrowserCloseTime=k.getAttribute("initBrowserCloseTime"),J.initBrowserCloseTime||(J.initBrowserCloseTime=9e5),J.seekThreshold=1e3*k.getAttribute("seekThreshold"),J.seekThreshold||(J.seekThreshold=2e3);var A=k.getAttribute("delayTimer");A&&(z.time=A),1==k.getAttribute("disableDelay")&&(z.enabled=!1);var L=k.getElementsByTagName("host")[0].childNodes;if(1<L.length){J.beaconUrl="";for(m=0;m<L.length;m++)J.beaconUrl+=L[m].nodeValue}else J.beaconUrl=k.getElementsByTagName("host")[0].childNodes[0].nodeValue;-1==J.beaconUrl.indexOf("http://")&&-1==J.beaconUrl.indexOf("https://")&&(J.beaconUrl="http://"+J.beaconUrl),J.beaconUrl+=k.getElementsByTagName("path")[0].childNodes[0].nodeValue,J.maxLogLineLength=k.getAttribute("maxLogLineLength"),J.maxLogLineLength||(J.maxLogLineLength=2048),J.maxLogLineLength-=J.beaconUrl.length,J.logVersion="2.0",J.formatVersion="1.1",k.getElementsByTagName("formatVersion")&&k.getElementsByTagName("formatVersion")[0]&&k.getElementsByTagName("formatVersion")[0].childNodes[0]&&(J.formatVersion=k.getElementsByTagName("formatVersion")[0].childNodes[0].nodeValue),J.useKey=parseInt(n.getElementsByTagName("statistics")[0].getAttribute("useKey"));var I=n.getElementsByTagName("feedback")[0];null!=I&&""!==I&&(oe.shouldSendFLine=!0,oe.limit=I.getAttribute("limit"),oe.limit||(oe.limit=3),oe.socialShareLimit=I.getAttribute("socialShareLimit"),oe.socialShareLimit||(oe.socialShareLimit=1));var E,C,w,P,R=n.getElementsByTagName("security")[0];null==R||""===R||null!=(E=R.getElementsByTagName("ViewerDiagnostics")[0])&&""!==E&&(Y.viewerDiagnostics={},null!=(C=E.getElementsByTagName("salt")[0])&&""!==C&&(Y.viewerDiagnostics.salt={},w=C.getAttribute("value"),P=C.getAttribute("version"),null!=w&&""!==w?(Y.viewerDiagnostics.salt.value=w,Y.viewerDiagnosticsEnabled=!0,null!=P&&""!==P&&(Y.viewerDiagnostics.salt.version=P),Y.viewerDiagnostics.salt.bytes=2*C.getAttribute("bytes"),Y.viewerDiagnostics.salt.bytes||(Y.viewerDiagnostics.salt.bytes=32),Y.viewerDiagnostics.salt.iterations=C.getAttribute("iterations"),Y.viewerDiagnostics.salt.iterations||(Y.viewerDiagnostics.salt.iterations=50)):Y.viewerDiagnosticsEnabled=!1));var x,M=n.getElementsByTagName("bucketInfo")[0];for(x in $.bucketLength=M.getElementsByTagName("bucketLength")[0].childNodes[0].nodeValue,$.bucketCount=M.getElementsByTagName("bucketCount")[0].childNodes[0].nodeValue,q=!0,N)try{"_cd_"==x.substring(0,4)&&ke(x)}catch(e){}!function(){try{for(var e=X.split,t=0;t<e.length;t++)Q[e[t].name]=e[t].key}catch(e){}}(),dt(),function(){try{var e,t=J.beaconUrl.toLowerCase();-1==t.indexOf(".edgesuite.net/")&&-1==t.indexOf(".edgekey.net/")&&(e="Beacons sent to incorrect domain : "+t,e+="<ul style='list-style-type:circle;margin:0'>",e+="<li>We have identified that the beacons are not sent to an Akamai Domain.</li>",lt(e+="<li>Kindly use the proper Beacon XML path that is provided in SOLA Anlaytics UI while provisioning.</li></ul>","ERROR"))}catch(e){}}();for(var B=n.getElementsByTagName("match"),m=0;m<B.length;m++){match=B[m];try{parentKey=match.parentNode.parentNode.getAttribute("name"),ee[parentKey]||(ee[parentKey]={}),ee[parentKey][match.getAttribute("key")]={type:match.getAttribute("type"),name:match.getAttribute("name"),value:match.getAttribute("value")}}catch(e){lt(e)}}!function(){var e,t,a,i={};try{if(ee.bitRateBucketTimes){for(a in ee.bitRateBucketTimes)if(i=ee.bitRateBucketTimes[a])if(i.key=a,i.value){e=i.value,t=e.split(";");for(var n=0;n<t.length;n++)-1!=t[n].indexOf("min:")?i.min=parseInt(t[n].split(":")[1]):-1!=t[n].indexOf("max:")&&(i.max=parseInt(t[n].split(":")[1]))}else i.category="first"}else ee.bitRateBucketTimes={},(i=ee.bitRateBucketTimes).U={key:"U",type:"range"},i.S={key:"S",max:1500,value:"max:1500",type:"range"},i.Q={key:"Q",min:1500,max:2500,value:"min:1500;max:2500",type:"range"},i.D={key:"D",min:2500,value:"min:2500",type:"range"};for(var r in ge.bitRateBucketMap={},ee.bitRateBucketTimes)ge.bitRateBucketMap[r]=0}catch(e){lt("Exception, find bit rate match rules :"+e)}}(),function(){{var e;lt("fillVideoWithConfig function"),U&&U.akamai&&((e=U.akamai).populateMetricsFromConfiguration(),e.isSLineSent&&Ve(U),Y.viewerDiagnosticsEnabled&&De(e),e.cdn=Ae(e))}}(),function(){lt("sendStoredBeacons: number of beacons to be sent = "+W.length);try{for(U.akamai;0<W.length;){var e=W.shift();lt("readConfig: sending beacon event code = "+e.code),e.element.populateMetricsFromConfiguration(),e.element.xViewerId=ce.xViewerId,e.element.xViewerIdVersion=ce.xViewerIdVersion,e.element.cdn=Ae(e.element),et(e.element,e.code,e.synch)}}catch(e){lt("Exception,  sendStoredBeacons"+e)}}()}}}catch(e){lt("Exception,  readConfig :"+e)}},F.url,!1,!0),this.getValueFromQueryString=function(){return Ne(key,searchURL)},this.logMessage=function(e,t){lt(e,t)};var ct="AkamaiAnalytics_BrowserSessionId",ut=null,mt=null,ht=null,pt=null,ft=null,gt=null,yt=null;navigator&&navigator.userAgent&&(yt=navigator.userAgent),function(){if(navigator&&navigator.userAgent){try{var e=navigator.userAgent,t=/\((\w+)/,a=t.exec(e);mt=a[1].toLowerCase(),mt=-1!=e.indexOf("Xbox")?"Xbox":-1!=mt.indexOf("compatible")||-1!=mt.indexOf("windows")||-1!=mt.indexOf("mobile")?"Windows":-1!=mt.indexOf("x11")?"Linux":-1!=mt.indexOf("macintosh")||-1!=mt.indexOf("mac os")||-1!=mt.indexOf("macos")?"Mac OS":-1!=mt.indexOf("ipad")?"iPad":-1!=mt.indexOf("iphone")?"iPhone":-1!=mt.indexOf("ipod")?"iOS":-1!=e.indexOf("Android")?"Android":-1!=e.indexOf("PlayStation 4")?"PlayStation 4":-1!=e.indexOf("PLAYSTATION 3")?"PlayStation 3":"Others"}catch(e){lt("Exception,  finding Osname"),mt="Others"}ht=mt;try{var i;(a=(t=/(NT|Phone|OS X|Linux|CPU.*?OS) ([0-9\._]+)/).exec(e))&&2<a.length&&((ft=a[2]||"")&&(ht+=" "+ft),i=null,"Windows"==mt&&(i=function(e){var t=null;e&&(t="6.3"==e||"6.2"==e?"8":"6.1"==e?"7":"6.0"==e?"Vista":"5.2"==e||"5.1"==e?"XP":(e=e.split("."),8<=parseInt(e[0])?e[0]:"Other"));return t}(ft),mt=mt+" "+i))}catch(e){lt("Exception,  OSVersion"+e)}}}(),function(){if(navigator&&navigator.userAgent){var e=navigator.userAgent,t=/(MSIE|Chrome|Version|Firefox)[ \/]([0-9]+)/;try{var a,i=t.exec(e);ut=i[1],"Version"==i[1]&&(a=(t=/(Opera|Safari)/).exec(e),ut=a[1])}catch(e){lt("Exception,  browserName"+e)}try{lt("browser version = "+i[2]);var n,r=e.indexOf("Edge");pt=-1!=r?(uagentLength=e.length,n=e.substr(r,uagentLength-r).split("/"),ut=n[0],n[1]):i[2],ut&&pt&&(ut=ut+" "+pt)}catch(e){lt("Exception,  browserVersion"+e)}}}(),function(){if(navigator&&navigator.userAgent)try{var e=(e=navigator.userAgent).toLowerCase();gt=-1!=e.indexOf("ipad")?"iPad":-1!=e.indexOf("ipod")?"iPod":-1!=e.indexOf("iphone")?"iPhone":-1!=e.indexOf("android")?"Android Device":-1!=e.indexOf("xbox")?"Xbox":-1!=e.indexOf("macintosh")||-1!=e.indexOf("windows")||-1!=e.indexOf("compatible")?"Desktop":-1!=e.indexOf("playstation 4")?"PlayStation 4":-1!=e.indexOf("playstation 3")?"PlayStation 3":"Others"}catch(e){lt("Exception,  getitng device name : "+e),gt="Others"}}();var vt={ended:0,init:1,playing:2,pause:3,seek:4,rebuffering:5,resumeBuffering:6};function St(e){try{switch(e){case vt.ended:return"ended";case vt.init:return"init";case vt.playing:return"playing";case vt.pause:return"pause";case vt.seek:return"seek";case vt.rebuffering:return"rebuffering";case vt.resumeBuffering:return"resumeBuffering";default:return"undefined"}}catch(e){}}var Tt,bt=[0,0,0,0,0,0,0,0,0,0,0,0],kt=[0,0,0,0,0,0,0,0,0,0,0,0],At="0,0,0,0,0,0,0,0";function Lt(e){if(e&&e.customMetrics)for(var t in e.customMetrics)t in B||(this[t]=e.customMetrics[t]);this.userAgent=yt,this.playerType="HTML5",null!=s&&null!=o?this.pluginVersion="JS-"+n+":"+s+"-"+o:U.objectBased?this.pluginVersion="JS-"+n:this.pluginVersion="HTML5-"+n,this.os=mt,this.fullOs=ht,this.osVersion=ft,this.browser=ut,this.browserVersion=pt,this.browserSize=window.innerWidth+"x"+window.innerHeight,this.rebufferCount=0,this.bytesLoadedCallback=0,this.lastBytesLoaded=0,this.currRebufferEndEpoch=0,this.totalPlayClockTime=0,this.totalPlayStreamTime=0,this.totalRebufferCount=0,this.totalRebufferTime=0,this.totalPauseCount=0,this.totalPauseDuration=0,this.totalSeekCount=0,this.totalSeekTime=0,this.totalResumeBufferCount=0,this.totalResumeBufferTime=0,this.totalAdPlayClockTime=0,this.totalAdStartCount=0,this.totalAdAbandonCount=0,this.updateTerminateMetrics=function(){try{this.playClockTime&&(this.totalPlayClockTime+=parseInt(this.playClockTime)),this.playStreamTime&&(this.totalPlayStreamTime+=parseInt(this.playStreamTime)),this.rebufferCount&&(this.totalRebufferCount+=parseInt(this.rebufferCount)),this.rebufferTime&&(this.totalRebufferTime+=parseInt(this.rebufferTime)),this.pauseCount&&(this.totalPauseCount+=parseInt(this.pauseCount)),this.pauseDuration&&(this.totalPauseDuration+=parseInt(this.pauseDuration)),this.seekCount&&(this.totalSeekCount+=parseInt(this.seekCount)),this.seekTime&&(this.totalSeekTime+=parseInt(this.seekTime)),this.resumeBufferCount&&(this.totalResumeBufferCount+=parseInt(this.resumeBufferCount)),this.resumeBufferTime&&(this.totalResumeBufferTime+=parseInt(this.resumeBufferTime)),this.adPlayClockTime&&(this.totalAdPlayClockTime+=parseInt(this.adPlayClockTime)),this.adCount&&(this.totalAdStartCount+=parseInt(this.adCount)),this.adAbandonCount&&(this.totalAdAbandonCount+=parseInt(this.adAbandonCount));var e=D();this.startupAbondonWaitTime=e,this.playInterval=e}catch(e){lt("Unable to update cumulative metrics")}},this.clearRelativeMetrics=function(){var e=["rebufferCount","rebufferTime","playClockTime","playStreamTime","seekCount","seekTime","pauseCount","pauseDuration","resumeBufferCount","resumeBufferTime","averagedBitRate","transitionUpSwitchCount","transitionDownSwitchCount","rebufferSession","curRebufferTime","adCount","adPlayClockTime","adStartupTime","adAbandonCount","adPauseTime"];this.updateTerminateMetrics();for(var t=0;t<e.length;++t)this[e[t]]=0;this.pauseIntervalsAsString="-",this.seekIntervalsAsString="-",this.pauseSeekSession="-",this.transitionStreamTimeSession="-",this.socialSharing=null,this.adSession=null,oe.socialSharing=null,oe.socialSharingObj={},ge.bitRateArr=[],delete this.rebufferSession},this.populateMetricsFromConfiguration=function(){for(var e in this.beaconId=G.beaconId,this.beaconVersion=G.beaconVersion,this.logType="relative"==J.logType?"R":"C",this.logVersion=J.logVersion,this.startupTimeOutlierLimit=J.startupTimeOutlierLimit,this.formatVersion=J.formatVersion,this.bucketCount=$.bucketCount,this.bucketLength=$.bucketLength,X)if(X[e])for(var t=0;t<X[e].length;t++)X[e][t].value&&(this[X[e][t].name]=X[e][t].value)},this.initPlayed=function(e){this.played.push([e,e]),this.playingIndex=0},this.updatePlayClockTime=function(e,t,a){this.playClockTime+=e,ge.updateBitRateArr(e)},this.updatePlayed=function(e,t){var a=this.played;if(a){for(var i=0;i<a.length;i++);for(i=this.playingIndex;i<a.length&&e>a[i][0];i++);if(i!=this.playingIndex?(a[this.playingIndex][1]=Math.max(e,a[i-1][1]),a.splice(this.playingIndex+1,i-this.playingIndex-1)):a[this.playingIndex][1]=Math.max(e,a[this.playingIndex][1]),null!=t){for(i=0;i<a.length;i++){if(a[i][0]<=t&&a[i][1]>=t)return void(this.playingIndex=i);if(i+1<a.length&&a[i][1]<t&&a[i+1][0]>t)return i++,this.playingIndex=i,void a.splice(i,0,[t,t])}i==a.length&&(a.push([t,t]),this.playingIndex=i)}}},this.isVisitEnd=0,this.sequenceId="0",this.isSLineSent=!1,this.sendVLine=!1,this.played=[],this.iLineCount=0,this.isPlaylist=!1,this.isFirstTitle=1,this.currentState={state:vt.ended,lastEventClockTime:0,pauseStartStreamTime:0,pauseStartClockTime:0,timeUpdateStreamTime:0,timeUpdateClockTime:0,pollingTimerStreamTime:0,seekStartStreamPos:0},this.seekObject={seekStartEpochTime:-1,seekEndEpochTime:-1,seekStartStreamTime:-1,seekEndStreamTime:-1},this.clearRelativeMetrics(),lt("value of configurationPopulated"+q),q&&this.populateMetricsFromConfiguration(),this.loadStartILine=!1,this.canPlayUpdated=!1,this.canPlayEventAutoPlay=!0,this.format="P",this.playerFormat=this.playerType+":"+this.format,this.deliveryType="O",this.firstTimeProgress=!0,this.firstTimePlay=!0,this.isILineSent=!1,this.seekFrom=0,this.lastPlayStreamTime=0,this.lastPlayLogTime=0,this.lastLogTime=0,this.curRebufferTime=0,this.sendIsSessionWithRebufferH=1}function It(){try{var e,t;for(e in X)if(X[e])for(t=0;t<X[e].length;t++)X[e][t].isSent&&!0===X[e][t].isSent&&(X[e][t].isSent=!1)}catch(e){}}function Et(e){lt("endOfTheSession");var t=e.akamai,a=t.isPlaylist,i=t.visitId,n=t.viewerId,r=t.streamName,s=t.cdn,o=t.sendVLine,l=t.iLineCount;e.akamai=null,It(),(t=e.akamai=new Lt(e)).visitId=t.browserSessionId=i,t.viewerId=t.clientId=n,t.cdn=s,de=-1,t.streamName=r,t.iLineCount=l,e.akamai.clearVisitTimeoutId=Ue(sa,J.visitTimeout,[e,1]),t.sendVLine=o,t.isPlaylist=a,e.played&&(e.played.length=0),ge.clearBitRate()}U.akamai=new Lt(U);var Ct=["UNKNOWN","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"];function wt(){return!!(H&&H.dataset&&H.dataset.isad&&"true"==H.dataset.isad)}function Pt(e,t,a,i){"playing"==t&&(se=[]);var n,r={};r.eventType=t,r.eventTime=i,a&&(r.streamUrl=a),"error"==t&&(r.errorCode=xe(e)),se&&0<se.length&&(n=se[se.length-1]).eventType==r.eventType&&n.streamUrl==r.streamUrl?("error"==t&&(n.errorCode=r.errorCode),n.eventTime=r.eventTime):se.push(r)}function Rt(e,t,a,i){try{var n,r,s=!1;0<se.length&&(lt("check error events array, previous event is : "+(n=se[se.length-1]).eventType),"error"==n.eventType&&a==n.streamUrl&&("error"==t?(r=xe(e),s=n.errorCode==r,n.eventTime=i,n.errorCode=r):"play"==t&&n.eventTime&&i-n.eventTime<=2e3&&(s=!0)))}catch(e){lt("Exception,  checkErrorEventsArray"+e),s=!1}return s}function xt(e,t){if(wt())lt("handlePauseEvent : video tag is of type AD, return");else try{lt("entered function handle Pause Event");var a=D(t),i=parseInt(Jt(e)),n=e.akamai,r=n.currentState,s=Yt(e);if(n.firstTimePlay||r.state==vt.pause)return;if(s&&0!=s&&i&&0!=i&&Math.abs(s-i)<1e3)return;var o=a-r.lastEventClockTime,l=a-n.startTimer;switch(r.state){case vt.playing:n.updatePlayClockTime(o,r.lastEventClockTime,a),++n.pauseCount,Ie(n,a,i,"P"),"-"!=n.pauseSeekSession?n.pauseSeekSession+=",P("+i+":"+l+")":n.pauseSeekSession="P("+i+":"+l+")",n.updatePlayed(i);break;case vt.rebuffering:if(!n.chasingSleep){++n.pauseCount,Ie(n,a,i,"P"),"-"!=n.pauseSeekSession?n.pauseSeekSession+=",P("+i+":"+l+")":n.pauseSeekSession="P("+i+":"+l+")",n.rebufferTime+=o,n.curRebufferTime+=o,n.rebufferSessionArrayHLine&&(lt("handlePauseEvent : pushing, rebufferSessionArrayHLine"),n.rebufferSessionArrayHLine.push(a));try{Ee(n,a),n.curRebufferTime=0}catch(e){lt("Error...Pause"+e.message)}}}r.state=vt.pause,r.pauseStartStreamTime=i,r.pauseStartClockTime=a,r.lastEventClockTime=a}catch(e){lt("Exception,  handlePauseEvent : "+e)}}function Mt(e,t){try{if(U&&U.akamai){lt("handle bit rate switch");try{e=parseInt(e)}catch(e){return void lt("Exception,bit rate to int :"+e)}isNaN(e)&&lt("handle bitrate swtich, bite rate isNaN");var a=U.akamai,i=a.currentState,n=Jt(U);"-"!=ge.currentBitRate&&(e>ge.currentBitRate?a.transitionUpSwitchCount++:e<ge.currentBitRate&&a.transitionDownSwitchCount++),i&&i.state==vt.playing&&Dt(U,t),ge.currentBitRate=e,ge.currentStartPos=n}}catch(e){lt("Exception, handle bit rate switch:"+e)}}function Bt(e,t){if(wt())lt("handle Play Event : video tag is of type AD, return");else try{var a=D(t),i=$t(e);if(e.akamai&&e.akamai.postRollTimer&&(lt("handle play event: send the C line without changing set data"),He(e.akamai.postRollTimer),delete e.akamai.postRollTimer,Ht(e,a)),Rt(e,"play",i,a))return void lt("handle play Event: play is thrown after error, return, curTime = "+a);Pt(e,"play",i,a);var n=e.akamai,r=parseInt(Jt(e)),s=n.currentState,o=a-s.lastEventClockTime,l=a-n.startTimer,d=s.state;switch(lt("entered function handle Play Event, current state = "+St(s.state)),d){case vt.ended:P(i,n),n.streamUrl=i,n.startTimer=a,n.streamLength=parseInt(Yt(e)),null!=(i=null!=i&&-1!=i.indexOf("?")?i.substring(0,i.indexOf("?")):i)&&""!=i&&/.m3u8$/.exec(i)&&(n.format="L",n.playerFormat=n.playerType+":"+n.format,n.deliveryType="L"),function(e,t,a){try{lt("send beacon I line");var i=e.akamai;i.cdn=Ae(i),u&&Re(e,!0),i.iLineSentTime||(i.iLineSentTime=a),e.videoWidth&&e.videoHeight&&(i.videoSize=e.videoWidth+"x"+e.videoHeight),i.isILineSent||(Fe(e),st(e,"init",t,a),je(e,a),i.clearVisitTimeoutId&&He(i.clearVisitTimeoutId))}catch(e){lt("Exception send I line:"+e)}}(e,!(de=-1),a),n.currentState.state=vt.init,lt(a+": handlePlayBackEvent : Setting state to init"),n.currentState.timeUpdateClockTime=a,n.currentState.timeUpdateStreamTime=0,n.currentState.lastEventClockTime=a,n.isPlaylist=!0;var c=$t(e);StreamTypeDetector(c,h,m,function(e){e&&(lt("detected stream type = "+e.getStreamType()),lt("Received steam type = "+e.getStreamType()+"\n Stream URL = "+e.getStreamURL()+"\n Stream Name = "+e.getStreamName()+"\n Stream Length = "+e.getStreamLength()+"\n Stream Format = "+e.getStreamFormat()+"\n Stream Delivery Type = "+e.getDeliveryType()),n.streamUrl=e.getStreamURL(),n.format=e.getStreamFormat(),n.deliveryType=e.getDeliveryType(),e.getStreamLength()&&(n.streamLength=e.getStreamLength()),n.streamName=e.getStreamName())})!==streamError.NoError&&lt("failed to detect stream. May be we do not have sufficient information");break;case vt.pause:n.pauseDuration+=o,"-"!=n.pauseIntervalsAsString?n.pauseIntervalsAsString+=","+s.pauseStartStreamTime+":"+(a-s.pauseStartClockTime):n.pauseIntervalsAsString=s.pauseStartStreamTime+":"+(a-s.pauseStartClockTime),"-"!=n.pauseSeekSession?n.pauseSeekSession+=",R("+s.pauseStartStreamTime+":"+l+")":n.pauseSeekSession="R("+s.pauseStartStreamTime+":"+l+")",n.updatePlayed(s.pauseStartStreamTime,r),n.currentState.lastEventClockTime=a,++n.resumeBufferCount,s.state=vt.resumeBuffering;break;case vt.init:n.iLineSentTime||(n.iLineSentTime=a),!n.loadStartILine||n.canPlayEventAutoPlay||n.canPlayUpdated||(n.iLineSentTime=a,n.canPlayUpdated=!0)}}catch(e){lt("Exception,  handle Play Event:"+e)}}function Dt(e,t){if(wt())lt("handle Playing Event : video tag is of type AD, return");else try{var a=D(t);Pt(e,"playing",$t(U),a);var i=parseInt(Jt(e)),n=e.akamai,r=n.currentState,s=a-r.lastEventClockTime,o=(n.startTimer,r.state);switch(lt("entered function handle Playing Event, current State = "+St(r.state)),o){case vt.rebuffering:if(!n.wasPutToSleep){n.rebufferTime+=s,n.curRebufferTime+=s,n.continuousRebufferDuration=0,n.rebufferSessionArrayHLine&&n.rebufferSessionArrayHLine.push(a);try{Ee(n,a),n.curRebufferTime=0}catch(e){lt("Error...Play"+e.message)}}break;case vt.pause:case vt.resumeBuffering:n.resumeBufferTime+=s,0==s&&0<n.resumeBufferCount&&--n.resumeBufferCount;break;case vt.init:!function(e,t,a){try{lt("start of the session function");var i=e.akamai;if(!i||!i.firstTimePlay)return;i.adLoadTime&&i.adLoadTime>i.iLineSentTime?(i.startupTime=i.adLoadTime-i.iLineSentTime,i.adEndTime&&(i.startupTime+=t-i.adEndTime)):i.startupTime=t-i.iLineSentTime,i.startupTime>J.startupTimeOutlierLimit&&(i.outlierStartupTime=i.startupTime,i.startupTime=0),i.bufferingTime=i.startupTime;i.startupTime;Zt();var n=$t(e);P(n,i),null!=(i.streamUrl=n)&&""!=n&&(/.m3u8$/.exec(n)?(i.format="L",i.playerFormat=i.playerType+":"+i.format):(i.format="P",i.playerFormat=i.playerType+":"+i.format,i.deliveryType="O"),lt("Creating hls stream"),i.stream=new hlsStream),StreamTypeDetector(n,h,m,function(e){e&&(lt("detected stream type = "+e.getStreamType()),lt("Received steam type = "+e.getStreamType()+"\n Stream URL = "+e.getStreamURL()+"\n Stream Name = "+e.getStreamName()+"\n Stream Length = "+e.getStreamLength()+"\n Stream Format = "+e.getStreamFormat()+"\n Stream Delivery Type = "+e.getDeliveryType()),i.streamUrl=e.getStreamURL(),i.format=e.getStreamFormat(),i.deliveryType=e.getDeliveryType(),e.getStreamLength()&&(i.streamLength=e.getStreamLength()),i.streamName=e.getStreamName())})!==streamError.NoError&&lt("failed to detect stream. May be we do not have sufficient information"),i.streamLength=parseInt(Yt(e)),i.played=[];var r=parseInt(ca("HTML_isPlayingCount"));ma("HTML_isPlayingCount",r+=1),Be(),Y.viewerDiagnosticsEnabled&&De(i,!0),st(e,"playStart",!1,i.lastSLineSentTime=t),i.rebufferSessionArrayHLine=[],i.isSLineSent=!0,q&&Ve(e),bt[1]=1,i.isFirstTitle=null,i.isVisitStart=null,i.firstTimePlay=!1,i.initPlayed(a)}catch(e){lt("Exception, send S line:"+e)}}(e,a,i),ge.currentStartPos=i;break;case vt.ended:lt("handle Playing Event : dispatch play and playing event"),Bt(e,a),Dt(e,a);break;case vt.playing:n.updatePlayClockTime(s,r.lastEventClockTime,a);break;case vt.seek:0<a-r.timeUpdateClockTime&&(Ie(n,a,i,"S"),n.updatePlayed(r.seekStartStreamPos,i))}r.state=vt.playing,r.lastEventClockTime=a}catch(e){lt("Exception,  handle Playing Event:"+e)}}function Nt(e,t){if(wt())lt("handleWaitingEvent : video tag is of type AD, return");else try{var a=e.akamai;if(a.currentState.state==vt.rebuffering)return void lt("already inside handleWaiting Event");var i=D(t),n=parseInt(Jt(e)),r=a.currentState,s=i-r.lastEventClockTime,o=(a.startTimer,r.state);switch(lt("entered function handle Waiting Event, current state = "+St(r.state)),o){case vt.playing:a.updatePlayClockTime(s,r.lastEventClockTime,i),++a.rebufferCount,1==a.rebufferCount&&"B"!=a.playerState&&(a.firstRebufferStartEpoch=Math.round(i)),a.rebufferSessionArrayHLine&&(lt("handleWaitingEvent : pushing, rebufferSessionArrayHLine"+i),a.rebufferSessionArrayHLine.push(i)),a.updatePlayed(n),r.state=vt.rebuffering;break;case vt.pause:++a.resumeBufferCount,r.state=vt.resumeBuffering;break;case vt.init:}r.lastEventClockTime=i,lt("handle waiting event, if seek starts, stream pos = "+n),r.seekStartStreamPos=n}catch(e){lt("Exception,  handleWaitingEvent:"+e)}}function Ot(e){if(wt())lt("handle Error Event : video tag is of type AD, return");else try{var t=D(),a=$t(e),i=xe(e);if(Rt(e,"error",a,t))return void lt("handle Error Event: consecutive error events thrown, return, curTime = "+t);e&&e.akamai&&!e.akamai.isILineSent&&(lt("handle Error Event: calling handle Play Event"),Bt(e,t)),Pt(e,"error",a,t);parseInt(Jt(e));var n=e.akamai,r=n.currentState,s=t-r.lastEventClockTime;n.startTimer,r.state;if(lt("entered function handle Error Event, current state = "+St(r.state)),r.state==vt.playing&&n.updatePlayClockTime(s,r.lastEventClockTime,t),n.isELineSent||n.isCLineSent)return;Xe(e,i,t),r.state=vt.ended;parseInt(ca("HTML_LastCLineTime"));Et(e),r.lastEventClockTime=t}catch(e){lt("Exception,  handleErrorEvent:"+e)}}function Ut(t,e){if(wt())lt("handle Ended Event WithDelay : video tag is of type AD, return");else try{var a=t.akamai,i=a.currentState;lt("entered function handle Ended Event WithDelay, current state"+St(i.state));var n=D(e),r=(Me(t),n-i.lastEventClockTime);if(a.pollingTimer&&He(a.pollingTimer),pe&&pe.retryTimer&&He(pe.retryTimer),a.hLineTimer&&He(a.hLineTimer),a.fastTCPServerIpTimer&&He(a.fastTCPServerIpTimer),a.firstPLineTimer&&He(a.firstPLineTimer),pe&&pe.retryTimer&&He(pe.retryTimer),a.postRollTimer)return void lt("handle Ended Event WithDelay: postRollTimer already started return");rt(a,"complete"),nt(a),at(a),a.postRollTimer=Ue(Ht,1e3,[t]),tt(a),a.customDataPopulated=!0,Ce(a,n),it(t,r,n,!0),a.playEndMetricsUpdated=!0}catch(e){lt("Exception,  handle Ended Event WithDelay"+e),Ht(t,n)}}function Ht(e,t){try{var a=e.akamai;if(a.postRollTimer&&(He(a.postRollTimer),delete a.postRollTimer),a.isELineSent||a.isCLineSent)return void lt("handle Ended Event : already sent C line, return");var i=D(t),n=(parseInt(Jt(e)),a.currentState),r=i-n.lastEventClockTime;a.startTimer,n.state;lt("entered function handle Ended Event, current state"+St(n.state)),a.playEndMetricsUpdated||(it(e,r,i,!0),a.playEndMetricsUpdated=!0),n.state=vt.ended;var s=Me(e);ze(e,s=null!=a.streamTitleSwitchReason&&""!=a.streamTitleSwitchReason?a.streamTitleSwitchReason:s,!1,i);parseInt(ca("HTML_LastCLineTime"));Et(e),n.lastEventClockTime=i}catch(e){lt("Exception,  handle Ended Event :"+e)}}function Vt(){var e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;e&&e.type&&(U.akamai.connectivity=e.type)}function _t(e){e&&e.coords&&(U.akamai.latitude=e.coords.latitude,U.akamai.longitude=e.coords.longitude)}function Ft(e){var t="";switch(e.code){case e.PERMISSION_DENIED:t="User denied the request for Geolocation.";break;case e.POSITION_UNAVAILABLE:t="Location information is unavailable.";break;case e.TIMEOUT:t="The request to get user location timed out.";break;case e.UNKNOWN_ERROR:t="An unknown error occurred."}lt("Location Error : ",t)}function jt(t,a){try{if(U&&U.akamai&&U.akamai.isSLineSent?lt("setData() API called after 'Start Of Play' for dimension -> "+t+"|All custom dimensions should be set before the play is initiated.","WARN"):lt("setData("+t+":"+a+")","API"),"customDataObject"==t)qt(a);else if("customDataFunction"==t)M=a;else{try{null!=a&&(a=a.trim())}catch(e){}"viewerId"!=t&&"viewerDiagnosticsId"!=t||null!=a&&""!=a||(a="-");try{q&&"_cd_"==t.substring(0,4)&&ke(t)}catch(e){}try{-1!=t.indexOf("std:")?x[t.substring(4)]=a:N[t]=a}catch(e){N[t]=a}-1==t.indexOf("socialShare:")&&-1==t.indexOf("feedback:")||Wt()}}catch(e){lt("Exception, Set Data :"+e)}}function qt(e){try{if("object"==typeof e)for(var t in e)jt(t,e[t])}catch(e){lt("Exception set custom data object"+e)}}function Wt(){try{var e,t,a="feedback:",i=a.length,n=!1,r=D();for(e in N)-1!=e.indexOf(a)&&(t=e.substring(i),N[t]=N[e],delete N[e],n=!0);!function(){try{var e,t="socialShare:",a=t.length,i=oe.socialSharingObj;for(e in N)-1!=e.indexOf(t)&&(e in oe.dataSent?oe.dataSent[e].count<oe.socialShareLimit&&(++oe.dataSent[e].count,null!=i&&e.substring(a)in i?i[e.substring(a)]=parseInt(i[e.substring(a)])+parseInt(N[e]):i[e.substring(a)]=N[e]):(oe.dataSent[e]={},oe.dataSent[e].value=N[e],oe.dataSent[e].count=1,i[e.substring(a)]=N[e]),delete N[e]);oe.socialSharingObj=i}catch(e){lt("Exception,  getFeedbackObj"+e),oe.socialSharing=null}}(),lt("handleFeedbackEvent"),oe&&oe.shouldSendFLine&&oe.akamai&&(oe.akamai.isCLineSent||oe.akamai.postRollTimer)&&(n&&(oe.akamai.customDataChanged=!0),oe.fLineCount<oe.limit&&st(oe,"feedback",!1,r),++oe.fLineCount,oe.akamai.customDataChanged=!1,oe.akamai.socialSharing=null)}catch(e){lt("Exception, handle feed back event :"+e)}}function zt(e){if(!wt())try{if(V)return void lt("handle time update event, return as inside background state for idevice");var t=D(null),a=parseInt(Jt(e)),i=e.akamai;if(!i)return;if(i.postRollTimer)return;var n=i.currentState,r=(n.lastEventClockTime,i.startTimer,n.state,a-n.timeUpdateStreamTime);0!=n.timeUpdateStreamTime&&(Math.abs(r)>=J.seekThreshold&&i.isSLineSent?(lt("stream diff in time update is "+r),function(e,t,a){if(wt())lt("handle Seeked Event : video tag is of type AD, return");else try{t=t||D(),a=a||parseInt(Jt(e));var i=e.akamai,n=i.currentState,r=t-n.lastEventClockTime,s=(i.startTimer,n.state);if(lt("entered function handle Seeked Event, currentstate = "+St(n.state)),s==vt.pause||s==vt.playing||s==vt.rebuffering||n.state==vt.seek)switch(0<t-n.timeUpdateClockTime&&Ie(i,t,a,"S"),s){case vt.playing:i.updatePlayed(n.timeUpdateStreamTime,a),n.lastEventClockTime=t,i.updatePlayClockTime(r,n.lastEventClockTime,t),n.state=vt.seek,n.seekStartStreamPos=a;break;case vt.rebuffering:if(i.wasPutToSleep)lt("Rejecting this event, because rebuffer was caused by system sleep");else{lt("handle seeked event, previous state is rebuffering"),i.rebufferTime+=r,i.curRebufferTime+=r,i.rebufferSessionArrayHLine&&i.rebufferSessionArrayHLine.push(t);try{Ee(i,t),i.curRebufferTime=0}catch(e){lt("Error...Play"+e.message)}n.lastEventClockTime=t,n.state=vt.seek}}}catch(e){lt("Exception,  handle Seeked Event :"+e)}}(e,t,a)):0<r&&r<=750&&(e.objectBased?n.state==vt.seek&&Dt(e):i.isSLineSent&&n.state!=vt.seek&&n.state!=vt.rebuffering||(lt("handle time update event,  dispatching playing event,  current Video state is : "+St(n.state)),Dt(e)))),n.timeUpdateClockTime=t,n.timeUpdateStreamTime=a}catch(e){lt("Exception,  handleTimeupddate :"+e)}}function Xt(t,e){try{var a=document.createElement("script");a.setAttribute("src",t),a.id=e,document.getElementsByTagName("head")[0].appendChild(a)}catch(e){lt("Exception,  loading JavaScript File "+t)}}function Kt(t){try{var e=document.getElementById(t);e.parentNode.removeChild(e)}catch(e){lt("Exception,  removing script with id "+t)}}function Gt(e){var t=e.akamai;t.pollingTimer=Ue(Gt,te,[e]);var a=Date.now();0<t.chasingSleep&&a>t.chasingSleep+5e3&&(function(e){It(),ge.clearBitRate(),akamai=e.akamai,!e.objectBased&&akamai.pollingTimer&&He(akamai.pollingTimer);pe&&pe.retryTimer&&He(pe.retryTimer);akamai.hLineTimer&&He(akamai.hLineTimer);akamai.fastTCPServerIpTimer&&He(akamai.fastTCPServerIpTimer);akamai.firstPLineTimer&&He(akamai.firstPLineTimer);pe&&pe.retryTimer&&He(pe.retryTimer);akamai.postRollTimer&&(He(akamai.postRollTimer),delete akamai.postRollTimer);akamai.currentState.state=vt.ended,akamai.isILineSent=!1,akamai.isSLineSent=!1,akamai.firstTimePlay=!0,akamai.iLineSentTime=0,akamai.lastPlayStreamTime=0}(e),t.wasPutToSleep=!0),t.chasingSleep=a,e&&(e.isBrightcoveVideo?akamaiBCVideoModule.getVideoPosition(!1,Qt):Qt(0,e))}function Qt(e,t){var a,i;D(null);null!=U&&U.isBrightcoveVideo?(U.currentTime=parseInt(e),a=parseInt(1e3*e),t=U):a=parseInt(Jt(t)),"undefined"==a||isNaN(a)||""==a||(e=(i=t.akamai).currentState).state!=vt.ended&&(t.objectBased&&!0===i.wasPutToSleep&&a===e.pollingTimerStreamTime?(i.pollingTimer&&He(i.pollingTimer),Bt(U),Dt(U)):t.objectBased?zt(t):e.state!=vt.pause&&e.state!=vt.seek&&(0!=a&&a===e.pollingTimerStreamTime&&e.state!=vt.rebuffering?(lt("check stream head position, call handle waiting event"),Nt(t)):e.pollingTimerStreamTime=a))}function Jt(e){var t=0;try{e.objectBased?c&&c.streamHeadPosition&&(t=c.streamHeadPosition(),e.currentTime=t):H.currentTime&&(t=H.currentTime,e.currentTime=t)}catch(e){}return 0!=(t=0==t&&-1!=de?de:t)&&(de=t),1e3*t}function Yt(e){var t=0;try{e&&(e.objectBased?c&&c.streamLength&&(t=c.streamLength(),e.duration=t):(t=H.duration,e.duration=t))}catch(e){}return 1e3*t}function $t(e){var t="";try{e&&(e.objectBased?c&&c.streamURL&&(t=c.streamURL(),e.currentSrc=t):N.streamURL?t=N.streamURL:-1===(t=H.currentSrc).indexOf("blob:")?e.currentSrc=t:(t="",lt("Call akamaiSetStreamURL() to set streamUrl","Error")))}catch(e){}return t}function Zt(){try{null!=M&&qt(M())}catch(e){}}function ea(e,t){try{lt("handle Ad loaded"),fe.isAdLoaded&&lt("handleAdLoaded API is called multiple times.|We have identified that 2 successive handleAdLoaded APIs are called.|Kindly ensure that sequence of Ad calls -- handleAdLoaded->handleAdStarted->handleAdComplete is maintained.","WARN");var a=U.akamai;a.isILineSent||(new Date).getTime();var i=D(t);fe.clearAdAnalytics(),fe.isAdLoaded=!0,fe.adLoadTime=i,fe.adCount=1,fe.adAbandoned=!0,a.postRollTimer?(_e(U),He(a.postRollTimer),a.postRollAd=!0,a.customDataPopulated=!1,fe.type=2):a.isILineSent&&(a.isSLineSent?(xt(U,i),fe.type=1):a.isSLineSent||a.adLoadTime||(a.adLoadTime=i)),ta(e),a.isILineSent||function(e,t){try{var a,i=U.akamai;i.clearVisitTimeoutId&&He(i.clearVisitTimeoutId),Fe(U),i.logInterval="0",q?et(i,"init",e):(a={element:ot(i),code:"init",synch:e},W.push(a)),i.lastLogTime=t,++i.sequenceId,je(U,t),i.currentState.state=vt.init,lt(": sendBeaconILineAd : Setting state to init"),i.currentState.timeUpdateClockTime=t,i.startTimer=t}catch(e){lt("Exception, send I line AD:"+e)}}(!1,i)}catch(e){lt("Exception,handle ad loaded:"+e)}}function ta(e){try{var t=fe.setDataArr;lt("populate ad metric");for(var a=0;a<t.length;a++)t[a]in e&&(fe[t[a]]=e[t[a]])}catch(e){}}function aa(e,t){try{var a=D(t),i=U.akamai;"0"!=(fe.endStatus=e)&&(fe.adAbandonCount=1),fe.isAdLoaded&&fe.isAdStarted&&(fe.adPlayClockTime=a-fe.adStartTime),fe.adSession=function(){var e="",t=["adId","type","startPos","adStartupTime","adPlayClockTime","playBucket","endStatus","adDuration","adTitle","adCategory","adPartnerId","adServer","adDaypart","adIndustryCategory","adEvent"];try{for(var a=0;a<t.length;a++)0==fe[t[a]]||null!=fe[t[a]]&&""!=fe[t[a]]?e+=fe[t[a]]+":":e+=":";e=e.substring(0,e.length-1)}catch(e){}return e}();for(var n=["adStartupTime","adCount","adPlayClockTime","adAbandonCount"],r=0;r<n.length;r++)i[n[r]]+=fe[n[r]];i.adSession?i.adSession+=","+fe.adSession:i.adSession=fe.adSession,fe.isAdStarted=!1,fe.isAdLoaded=!1,"2"!=e&&(fe.adAbandoned=!1,i&&(i.postRollAd?(i.postRollAd=null,Ht(U,a)):i.isSLineSent?(Bt(U,a),Dt(U,a)):i.isSLineSent||(i.adEndTime=a)))}catch(e){lt("Exception,populate ad end:"+e)}}function ia(e){lt("subscribeToEvents : video = "+e);H=e;try{e.addEventListener("play",j.play=function(){Bt(U)},!1),e.addEventListener("pause",j.pause=function(){xt(U)},!1),e.addEventListener("error",j.error=function(){Ot(U)},!1),e.addEventListener("ended",j.ended=function(){Ut(U)},!1),e.addEventListener("playing",j.playing=function(){Dt(U)},!1),e.addEventListener("waiting",j.waiting=function(){Nt(U)},!1),e.addEventListener("timeupdate",j.timeupdate=function(){zt(U)},!1),e.addEventListener("load",j.load=function(){!function(e){try{if(wt())return;e.akamai.firstTimeProgress}catch(e){}}(U)},!1),e.addEventListener("progress",j.progress=function(){!function(e){try{if(wt())return;var t=e.akamai;t.firstTimeProgress&&(t.firstTimeProgress=!1,akaMediaAnalytics.getShouldAnalyze()&&setTimeout(function(e){e.setDiagnoserWindowLoaded(!0),e.processLogs({api:"setConfigXML",value:AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH});var t="";t+=!0===U.objectBased?"JS-":"HTML5-",e.processLogs({api:"setCurrentVersion",value:t+=n}),e.processLogs({api:"setCustomDimension",value:x}),e.processLogs({api:"reportSetupParams",value:AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH}),e.processLogs({api:"reportSetupParams",value:J.beaconUrl.toLowerCase()}),e.processLogs({api:"reportSetupParams",value:r})},3e3,akaMediaAnalytics)),t.logType}catch(e){}}(U)},!1),e.addEventListener("durationchange",j.durationchange=function(){!function(e){try{if(wt())return;e.akamai.streamLength=parseInt(Yt(e))}catch(e){}}(U)},!1),e.addEventListener("canplay",j.canplay=function(){!function(e){try{if(wt())return;var t=e.akamai;H.autoplay?t.canPlayEventAutoPlay=!0:t.canPlayEventAutoPlay=!1}catch(e){}}(U)},!1),e.addEventListener("loadstart",j.loadstart=function(){!function(e){try{if(wt())return;var t=e.akamai;H.autoplay&&(Bt(e),t.loadStartILine=!0)}catch(e){}}(U)},!1),lt("subscribed to events completed")}catch(e){lt("Exception,  subscribeToEvents,unable to add listeners to video tag :"+e)}}function na(e){try{if("undefined"!=typeof akamaiBCVideoObject)H=akamaiBCVideoObject,U.isBrightcoveVideo=!0,initBrightcove();else if(!U.objectBased&&!U.videoPassed&&document){var t=document.getElementsByTagName("video");lt("add MediaEvent Listeners : videos.length "+t.length),t&&0==t.length&&(t=document.getElementsByTagName("audio"));for(var a=0;a<t.length;++a)ia(t[a]);document.addEventListener("DOMNodeInserted",ra,!1),document.addEventListener("DOMNodeRemoved",ra,!1),document.addEventListener("DOMAttrModified",ra,!1)}e&&("DOMContentLoaded"==e.type||"load"==e.type&&t&&0<t.length)&&document.removeEventListener("load",na,!0)}catch(e){lt("Exception,  add MediaEvent Listeners :"+e)}}function ra(e){var t=e.target;if(t.nodeType!=t.COMMENT_NODE&&null!=t.tagName&&("video"==t.tagName.toLowerCase()||"audio"==t.tagName.toLowerCase()))switch(e.type){case"DOMNodeRemoved":t.dataset&&t.dataset.isad&&"true"==t.dataset.isad||sa(U,0);break;case"DOMNodeInserted":ia(t)}}function sa(e,t){lt("handle Video Unload");var a,i,n=D(),r=e.akamai,s=parseInt(ca("HTML_VisitCountCookie"));z.browserClose=!0;try{if(r&&r.currentState.state>=vt.init&&0==t){if(r.isELineSent||r.isCLineSent)return;fe&&fe.adAbandoned?(i="Ad.Abandon",r.postRollTimer&&(He(r.postRollTimer),delete r.postRollTimer),ze(e,i,!0,n)):r.firstTimePlay?(a="Browser.Refresh.NoStart",Xe(e,a=n-r.startTimer>J.initBrowserCloseTime?"Browser.Refresh.NoStart.Late":a,!0,n)):(i="Browser.Close",r.postRollTimer&&(He(r.postRollTimer),delete r.postRollTimer),ze(e,i,!0,n))}}catch(e){}try{var o=parseInt(ca("HTML_LastCLineTime"))+J.visitTimeout-n,l=parseInt(ca("HTML_isPlayingCount"));if(lt("handle Video Unload: playing cookie =  "+l+", visit cookie :"+s),1<=s&&1==t){if(0<o)return He(r.clearVisitTimeoutId),void(e.akamai.clearVisitTimeoutId=Ue(sa,o,[e,1]));if(o<=0&&1<s&&0<l)return He(r.clearVisitTimeoutId),void(e.akamai.clearVisitTimeoutId=Ue(sa,J.visitTimeout,[e,1]))}lt("handle Video Unload: decrementing HTML_VisitCountCookie"),ma("HTML_VisitCountCookie",s-=1),(0===(s=parseInt(ca("HTML_VisitCountCookie")))||isNaN(s))&&r.sendVLine&&Ke(e,n)}catch(e){}}function oa(){try{fe.isAdLoaded&&aa("2")}catch(e){}sa(U,0)}function la(e){lt("handlePagehide"),V=!0,oa()}function da(e){lt("handlePageshow:");try{U&&U.tagName&&(lt("handlePageShow: media tag is :"+U.tagName),U.akamai&&V&&(lt("handlePageshow: send play and playing on timeupdate"),0))}catch(e){lt("Exception,  handlePagehsow : "+e)}V=!1}function ca(e){var t=e+"=",e="";try{0<document.cookie.length&&(offset=document.cookie.indexOf(t),-1!=offset&&(offset+=t.length,end=document.cookie.indexOf(";",offset),-1==end&&(end=document.cookie.length),e=document.cookie.substring(offset,end)))}catch(e){}return e}function ua(e){try{var t=location.pathname.split("/"),a=" path=";document.cookie=e+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT;";for(var i=0;i<t.length;i++)a+=("/"!=a.substr(-1)?"/":"")+t[i],document.cookie=e+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT;"+a+";"}catch(e){}}function ma(e,t,a){try{var i,n=e+"="+t+";Path=/;";a&&0<parseInt(a)&&((i=new Date).setDate(i.getDate()+parseInt(a)),null!=i&&(n+="expires="+i.toUTCString()+";")),document&&(document.cookie=n)}catch(e){}}this.getViewerId=function(){try{var e=U.akamai;return e&&e.viewerId?e.viewerId:null}catch(e){return null}},this.setData=function(e,t){var a;jt(e,t),l&&U.objectBased&&((a={methodName:"setData"})[e]=t,this.processLogs({api:"reportAPI",value:a}))},this.handleStreamSwitch=function(){var e;U.akamai.streamTitleSwitchReason="Stream.Switched",Ht(U,e),l&&U.objectBased&&(lt("handleStreamSwitch()","API"),this.processLogs({api:"reportAPI",value:{methodName:"handleStreamSwitch"}}))},this.handleTitleSwitch=function(e){!function(e,t){U.akamai.streamTitleSwitchReason="Title.Switched";var a=U.akamai.isFirstTitle;Ht(U,t);try{if(null!=e&&""!=e)for(var i in e)jt(i,e[i])}catch(e){lt("Exception, handle title switch:"+e)}U.akamai.isFirstTitle=a,Bt(U,t),Dt(U,t);try{U.akamai.currentState.timeUpdateStreamTime=parseInt(Jt(U))}catch(e){lt("Exception,  handleTitleSwitch"+e)}}(e),l&&U.objectBased&&(lt("handleTitleSwitch()","API"),this.processLogs({api:"reportAPI",value:{methodName:"handleTitleSwitch",customData:e}},d))},this.handleFeedbackEvent=function(){Wt()},this.handleApplicationExit=function(){!function(){try{U.objectBased||(lt("application exit, unsubscribe video events"),function(e){try{e.removeEventListener("play",j.play,!1),e.removeEventListener("pause",j.pause,!1),e.removeEventListener("error",j.error,!1),e.removeEventListener("ended",j.ended,!1),e.removeEventListener("playing",j.playing,!1),e.removeEventListener("waiting",j.waiting,!1),e.removeEventListener("timeupdate",j.timeupdate,!1),e.removeEventListener("load",j.load,!1),e.removeEventListener("progress",j.progress,!1),e.removeEventListener("durationchange",j.durationchange,!1),e.removeEventListener("canplay",j.canplay,!1),e.removeEventListener("loadstart",j.loadstart,!1)}catch(e){lt("Exception, unSubscribeFrom Events:"+e)}}(U))}catch(e){}oa()}(),l&&U.objectBased&&(lt("handleApplicationExit()","API"),this.processLogs({api:"reportAPI",value:{methodName:"handleApplicationExit"}}))},this.enableServerIpLookUp=function(){u=!0,l&&U.objectBased&&(lt("enableServerIpLookUp()","API"),this.processLogs({api:"reportAPI",value:{methodName:"enableServerIpLookUp"}}))},this.disableServerIpLookUp=function(){u=!1,l&&U.objectBased&&(lt("disableServerIpLookUp()","API"),this.processLogs({api:"reportAPI",value:{methodName:"disableServerIpLookUp"}},d))},this.enableLocation=function(e){!function(e){{var t;e?navigator.geolocation&&null==a&&(a=navigator.geolocation.watchPosition(_t,Ft),(t=navigator.connection||navigator.mozConnection||navigator.webkitConnection)&&t.type&&(U.akamai.connectivity=t.type,t.addEventListener("typechange",Vt))):navigator.geolocation&&null!=a&&(navigator.geolocation.clearWatch(a),a=null,t.removeEventListener("typechange",Vt))}}(e),l&&U.objectBased&&(lt("enableLocation("+e+")","API"),this.processLogs({api:"reportAPI",value:{methodName:"enableLocation",enable:e}}))},this.enableManifestRequest=function(e){m=e},this.setURLManifest=function(e){h=e},this.handleSessionInit=function(e,t){try{var a;e&&("object"!=typeof c&&(c={}),e.streamHeadPosition&&(c.streamHeadPosition=e.streamHeadPosition),e.streamLength&&(c.streamLength=e.streamLength),e.streamURL&&(c.streamURL=e.streamURL),e.bytesLoaded&&(c.bytesLoaded=e.bytesLoaded),e.customDataFunction&&(c.customDataFunction=e.customDataFunction),c.customDataFunction&&(M=c.customDataFunction),e.firstBitRate&&(c.firstBitRate=e.firstBitRate),c.firstBitRate&&Mt(c.firstBitRate,t)),l&&U.objectBased&&(setTimeout(function(e){e.setDiagnoserWindowLoaded(!0),e.processLogs({api:"setConfigXML",value:AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH});var t="";t+=!0===U.objectBased?"JS-":"HTML5-",t+=n,0!=s.length&&0!=o.length&&(t+=":",t+=s,t+="-",t+=o),e.processLogs({api:"setCurrentVersion",value:t}),e.processLogs({api:"setCustomDimension",value:x}),e.processLogs({api:"reportSetupParams",value:AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH}),e.processLogs({api:"reportSetupParams",value:J.beaconUrl.toLowerCase()}),e.processLogs({api:"reportSetupParams",value:r})},3e3,this),lt("handleSessionInit()","API"),a={methodName:"handleSessionInit",callback:e},void 0!==t&&(a.epochTime=t),self.processLogs({api:"reportAPI",value:a},d)),Bt(U,t)}catch(e){}},this.handleBitRateSwitch=function(e,t){Mt(e,t),l&&U.objectBased&&(lt("handleBitRateSwitch("+e+")","API"),e={methodName:"handleBitRateSwitch",bitRate:e},void 0!==t&&(e.epochTime=t),this.processLogs({api:"reportAPI",value:e}))},this.handlePlaying=function(e){var t;Bt(U,e),Dt(U,e),l&&U.objectBased&&(lt("handlePlaying()","API"),t={methodName:"handlePlaying"},void 0!==e&&(t.epochTime=e),this.processLogs({api:"reportAPI",value:t},d))},this.handlePlayEnd=function(e,t){U.objectBased&&(U.endReason=e),Ut(U,t),l&&U.objectBased&&(lt("handlePlayEnd("+e+")","API"),e={methodName:"handlePlayEnd",endReasonCode:e},"undefined"!=typeof bitRateSwitchEpochTime&&(e.epochTime=t),this.processLogs({api:"reportAPI",value:e}))},this.handleMediaChangedEvent=function(){Ht(U)},this.handlePause=function(e){var t;xt(U,e),l&&U.objectBased&&(lt("handlePause()","API"),t={methodName:"handlePause"},void 0!==e&&(t.epochTime=e),this.processLogs({api:"reportAPI",value:t},d))},this.handleResume=function(e){var t;Bt(U,e),Dt(U,e),l&&U.objectBased&&(lt("handleResume()","API"),t={methodName:"handleResume"},void 0!==e&&(t.epochTime=e),this.processLogs({api:"reportAPI",value:t}))},this.handleBufferStart=function(e){var t;Nt(U,e),l&&U.objectBased&&(lt("handleBufferStart()","API"),t={methodName:"handleBufferStart"},void 0!==e&&(t.epochTime=e),this.processLogs({api:"reportAPI",value:t},d))},this.handleBufferEnd=function(e){var t;Bt(U,e),Dt(U,e),l&&U.objectBased&&(lt("handleBufferEnd()","API"),t={methodName:"handleBufferEnd"},void 0!==e&&(t.epochTime=e),this.processLogs({api:"reportAPI",value:t}))},this.handleError=function(e){try{var t;U.objectBased?U.errorReason=e:U.externalError=e,Ot(U),l&&U.objectBased&&(lt("handleError("+e+")","API"),t={methodName:"handleError",errorReason:e},this.processLogs({api:"reportAPI",value:t},d))}catch(e){}},this.handleTimeupdateEvent=function(){zt(U)},this.updateAdObject=function(e){ta(e)},this.handleAdLoaded=function(e,t){try{var a;ea(e,t),l&&U.objectBased&&(lt("handleAdLoaded()","API"),a={methodName:"handleAdLoaded",adSetDataObj:e},void 0!==t&&(a.epochTime=t),this.processLogs({api:"reportAPI",value:a}))}catch(e){}},this.handleAdStarted=function(e,t){!function(e,t){try{lt("handle Ad Started");var a=D(t);fe.isAdStarted=!0,fe.isAdLoaded||(lt("handleAdLoaded API is missing.|We have identified that handleAdStarted API is called without handleAdLoaded.|Kindly ensure that handleAdLoaded API is called for every Ad and relevant adObject is passed as an argument.","WARN"),ea(e,a)),fe.playBucket="0",fe.adStartTime=a,fe.adStartupTime=a-fe.adLoadTime,fe.startPos=Jt(U),ta(e)}catch(e){lt("Exception,handle ad started:"+e)}}(e,t),l&&U.objectBased&&(lt("handleAdStarted()","API"),e={methodName:"handleAdStarted",adSetDataObj:e},void 0!==t&&(e.epochTime=t),this.processLogs({api:"reportAPI",value:e},d))},this.handleAdCompleted=function(e){var t;!function(e){try{lt("handleAdEnded"),"0"==fe.playBucket&&lt("Ad Progress related APIs not called.|We have identified that handleAdFirstQuartile,handleAdMidPoint & handleAdThirdQuartile APIs have not been called.|It will be good if these APIs are called in order to capture more accurate Ad information","WARN"),fe.playBucket="4",aa("0",e)}catch(e){lt("Exception,handle ad completed:"+e)}}(e),l&&U.objectBased&&(lt("handleAdCompleted()","API"),t={methodName:"handleAdCompleted"},void 0!==e&&(t.epochTime=e),this.processLogs({api:"reportAPI",value:t}))},this.handleAdFirstQuartile=function(){!function(){fe.isAdStarted||lt("handleAdStarted API is missing.|We have identified that handleAdFirstQuartile API is called without handleAdStarted.|Kindly ensure that handleAdStarted API is called for every Ad that starts successfully.","ERROR");fe.playBucket="1"}(),l&&U.objectBased&&(lt("handleAdFirstQuartile()","API"),this.processLogs({api:"reportAPI",value:{methodName:"handleAdFirstQuartile"}},d))},this.handleAdMidPoint=function(){fe.playBucket="2",l&&U.objectBased&&(lt("handleAdMidPoint()","API"),this.processLogs({api:"reportAPI",value:{methodName:"handleAdMidPoint"}}))},this.handleAdThirdQuartile=function(){fe.playBucket="3",l&&U.objectBased&&(lt("handleAdThirdQuartile()","API"),this.processLogs({api:"reportAPI",value:{methodName:"handleAdThirdQuartile"}},d))},this.handleAdStopped=function(e){var t;aa("1",e),l&&U.objectBased&&(lt("handleAdStopped()","API"),t={methodName:"handleAdStopped"},void 0!==e&&(t.epochTime=e),this.processLogs({api:"reportAPI",value:t}))},this.handleAdError=function(e){var t;aa("3",e),l&&U.objectBased&&(lt("handleAdError()","API"),t={methodName:"handleAdError"},void 0!==e&&(t.epochTime=e),this.processLogs({api:"reportAPI",value:t},d))},this.handleSetupAISEvent=function(e,t,a){!function(e,t,a){try{var i=pe.aisRequestLimit,n=pe.aisRequestInterval;if((pe=new he).aisRequestInterval=n,pe.aisRequestLimit=i,!e)return lt("return from ais, platform is null");pe.platform=e,pe.version=t||"1.0",a&&(pe.aisCustomDataObj=a),pe.requestUrl="http://idp.securetve.com/rest/",pe.initUrl=pe.requestUrl+pe.version+"/"+pe.platform+"/init/?format=jsonp&responsefield=akaMediaAnalytics.receiveAISInitRequest",pe.identityUrl=pe.requestUrl+pe.version+"/"+pe.platform+"/identity/?format=jsonp&responsefield=akaMediaAnalytics.receiveAISIdentityRequest",pe.initUrlId="AkamaiAISInitUrl",pe.identityUrlId="AkamaiAISIdentityUrl",Xt(pe.initUrl,pe.initUrlId)}catch(e){pe.requestFailed=!0}}(e,t,a)},this.getStream=function(){return U.akamai.stream},this.getChildWindow=function(){return t},this.setDiagnoserWindowLoaded=function(e){g=e},this.isDiagnoserWindowLoaded=function(){return g},this.getHostedUrl=function(){return d},this.pushToMessageStore=function(e){f.push(e)},this.getMessageStoreLength=function(){return f.length},this.flushMessageStore=function(){f=[]},this.getStoredMessageAt=function(e){return f[e]},this.getShouldAnalyze=function(){return l},this.processLogs=function(e){try{if(this.isDiagnoserWindowLoaded()){var t=this.getMessageStoreLength(),a=this.getChildWindow();if(a){if(0<t){for(i=0;i<t;i++)a.postMessage(this.getStoredMessageAt(i),this.getHostedUrl());this.flushMessageStore()}a.postMessage(e,this.getHostedUrl())}}else this.pushToMessageStore(e)}catch(e){}},this.receiveAISInitRequest=function(e){try{if(pe.initObj=e,Kt(pe.initUrlId),""==pe.initObj||null==pe.initObj)return void(pe.requestFailed=!0);if(pe.requestFailed)return;if(pe.initObj.authenticated){if(pe.akamai={},pe.akamai.ais_queryToken=pe.initObj.querytoken,pe.initObj.idps){var t,a=pe.initObj.idps;for(t in a)pe.akamai.ais_idpId=t,pe.akamai.ais_idpName=a[t].name,pe.akamai.ais_idpDisplayName=a[t].display_name,pe.akamai.ais_idpUrl=a[t].url}Xt(pe.identityUrl,pe.identityUrlId)}else pe.requestFailed||(lt("receiveAISInitRequest, retrying the request"),++pe.aisRetries,pe.aisRetries<pe.aisRequestLimit&&(pe.retryTimer=Ue(Xt,pe.aisRequestInterval,[pe.initUrl,pe.initUrlId])))}catch(e){pe.requestFailed=!0}},this.receiveAISIdentityRequest=function(e){try{if(pe.identityObj=e,Kt(pe.identityUrlId),null==e||""==e)return;pe.akamai||(pe.akamai={}),e.indentity&&e.identity.aisuid&&(pe.akamai.ais_aisuid=e.identity.aisuid),function(){var e,t,a={};try{if(pe&&pe.aisCustomDataObj)for(var i in pe.akamai||(pe.akamai={}),pe.aisCustomDataObj)if("INIT"==(e=pe.aisCustomDataObj[i].split("/"))[0]&&pe.initObj?a=pe.initObj:"IDENTITY"==e[0]&&pe.identityObj&&(a=pe.identityObj),a){for(t=1;t<e.length;t++)e[t]&&a[e[t]]&&(a=a[e[t]]);"object"!=typeof a&&(pe.akamai[i]=a)}}catch(e){lt("Exception,  populateAISCustomData"+e)}}()}catch(e){pe.requestFailed=!0}},this.subscribeVideoObject=function(e){try{e&&ia(e)}catch(e){}},function(){try{U.objectBased||U.videoPassed?na():(lt("adding MediaEventListeners: DOMContentLoaded"),document.addEventListener("DOMContentLoaded",na,!1),lt("adding MediaEventListeners: Load"),document.addEventListener("load",na,!0))}catch(e){lt("Exception,  Addding DOMContentLoaded and Load event listeners :"+e)}if(window)if(function(){try{if("iPad"==mt||"iPhone"==mt)return 1}catch(e){return}}())window.addEventListener("pagehide",la,!1),window.addEventListener("pageshow",da,!1);else if("undefined"!=typeof akamaiBCVideoObject&&window.addEventListener)window.addEventListener("beforeunload",oa,!1);else if(window.addEventListener)try{(Se()?window.parent:window).addEventListener("beforeunload",oa,!1)}catch(e){lt("Exception, add window document listeners : "+e),window.addEventListener("beforeunload",oa,!1)}else if(window.attachEvent)try{(Se()?window.parent:window).attachEvent("onbeforeunload",oa)}catch(e){window.attachEvent("onbeforeunload",oa)}}()}function setAkamaiMediaAnalyticsData(e,t,a){try{var i;akaMediaAnalytics&&(akaMediaAnalytics.setData(e,t),akaMediaAnalytics.getShouldAnalyze()&&((i={methodName:"setAkamaiMediaAnalyticsData"})[e]=t,akaMediaAnalytics.processLogs({api:"reportAPI",value:i})))}catch(e){}}function akamaiPlaybackCompleted(){try{var e;akaMediaAnalytics&&(akaMediaAnalytics.handlePlayEnd(),akaMediaAnalytics.getShouldAnalyze()&&(e={methodName:"akamaiPlaybackCompleted",endReasonCode:endReason},akaMediaAnalytics.processLogs({api:"reportAPI",value:e})))}catch(e){}}function akamaiGetViewerId(){try{var e=null;akaMediaAnalytics&&(e=akaMediaAnalytics.getViewerId())}catch(e){}return e}function akamaiSetStreamURL(e,t){try{null!=e&&""!=e&&setAkamaiMediaAnalyticsData("streamURL",e),akaMediaAnalytics&&void 0!==t&&akaMediaAnalytics.enableManifestRequest(t)}catch(e){}}function akamaiSetURLManifest(e){try{akaMediaAnalytics&&akaMediaAnalytics.setURLManifest(e)}catch(e){}}function akamaiSetViewerId(e){var t;null!=e&&""!=e||(e="-"),akaMediaAnalytics&&(akaMediaAnalytics.setData("viewerId",e),akaMediaAnalytics.setData("clientId",e),akaMediaAnalytics.getShouldAnalyze()&&((t={methodName:"akamaiSetViewerId"}).viewerId=e,akaMediaAnalytics.processLogs({api:"reportAPI",value:t})))}function akamaiSetViewerDiagnosticsId(e){var t;null!=e&&""!=e||(e="-"),akaMediaAnalytics&&(akaMediaAnalytics.setData("viewerDiagnosticsId",e),akaMediaAnalytics.getShouldAnalyze()&&((t={methodName:"akamaiSetViewerDiagnosticsId"}).viewerDiagnosticsId=e,akaMediaAnalytics.processLogs({api:"reportAPI",value:t})))}function akamaiUpdateAdObject(e){akaMediaAnalytics&&akaMediaAnalytics.updateAdObject(e)}function akamaiHandleAdStarted(e){akaMediaAnalytics&&(akaMediaAnalytics.handleAdStarted(e),akaMediaAnalytics.getShouldAnalyze()&&akaMediaAnalytics.processLogs({api:"reportAPI",value:{methodName:"akamaiHandleAdStarted",adSetDataObj:e}}))}function akamaiHandleAdCompleted(){akaMediaAnalytics&&(akaMediaAnalytics.handleAdCompleted(),akaMediaAnalytics.getShouldAnalyze()&&akaMediaAnalytics.processLogs({api:"reportAPI",value:{methodName:"akamaiHandleAdCompleted"}}))}function akamaiHandleAdLoaded(e){akaMediaAnalytics&&(akaMediaAnalytics.handleAdLoaded(e),akaMediaAnalytics.getShouldAnalyze()&&akaMediaAnalytics.processLogs({api:"reportAPI",value:{methodName:"akamaiHandleAdLoaded",adSetDataObj:e}}))}function akamaiHandleAdFirstQuartile(){akaMediaAnalytics&&(akaMediaAnalytics.handleAdFirstQuartile(),akaMediaAnalytics.getShouldAnalyze()&&akaMediaAnalytics.processLogs({api:"reportAPI",value:{methodName:"akamaiHandleAdFirstQuartile"}}))}function akamaiHandleAdMidPoint(){akaMediaAnalytics&&(akaMediaAnalytics.handleAdMidPoint(),akaMediaAnalytics.getShouldAnalyze()&&akaMediaAnalytics.processLogs({api:"reportAPI",value:{methodName:"akamaiHandleAdMidPoint"}}))}function akamaiHandleAdThirdQuartile(){akaMediaAnalytics&&(akaMediaAnalytics.handleAdThirdQuartile(),akaMediaAnalytics.getShouldAnalyze()&&akaMediaAnalytics.processLogs({api:"reportAPI",value:{methodName:"akamaiHandleAdThirdQuartile"}}))}function akamaiHandleAdError(){akaMediaAnalytics&&(akaMediaAnalytics.handleAdError(),akaMediaAnalytics.getShouldAnalyze()&&akaMediaAnalytics.processLogs({api:"reportAPI",value:{methodName:"akamaiHandleAdError"}}))}function akamaiHandleAdStopped(){akaMediaAnalytics&&(akaMediaAnalytics.handleAdStopped(),akaMediaAnalytics.getShouldAnalyze()&&akaMediaAnalytics.processLogs({api:"reportAPI",value:{methodName:"akamaiHandleAdStopped"}}))}function akamaiHandleStreamSwitch(){akaMediaAnalytics&&(akaMediaAnalytics.handleStreamSwitch(),akaMediaAnalytics.getShouldAnalyze()&&akaMediaAnalytics.processLogs({api:"reportAPI",value:{methodName:"akamaiHandleStreamSwitch"}}))}function akamaiHandleTitleSwitch(e){akaMediaAnalytics&&(akaMediaAnalytics.handleTitleSwitch(e),akaMediaAnalytics.getShouldAnalyze()&&akaMediaAnalytics.processLogs({api:"reportAPI",value:{methodName:"akamaiHandleTitleSwitch",customData:e}}))}function akamaiSetupAIS(e,t,a){akaMediaAnalytics&&akaMediaAnalytics.handleSetupAISEvent(e,t,a)}function akamaiHandleBitRateSwitch(e){akaMediaAnalytics&&(akaMediaAnalytics.handleBitRateSwitch(e),akaMediaAnalytics.getShouldAnalyze()&&akaMediaAnalytics.processLogs({api:"reportAPI",value:{methodName:"akamaiHandleBitRateSwitch",bitRate:e}}))}function akamaiHandleApplicationExit(){akaMediaAnalytics&&(akaMediaAnalytics.handleApplicationExit(),akaMediaAnalytics.getShouldAnalyze()&&akaMediaAnalytics.processLogs({api:"reportAPI",value:{methodName:"akamaiHandleApplicationExit"}}))}function akamaiSetVideoObject(e){akaMediaAnalytics&&akaMediaAnalytics.subscribeVideoObject(e)}function akamaiSubscribeVideoObject(e){akaMediaAnalytics&&akaMediaAnalytics.subscribeVideoObject(e)}function akamaiEnableLocation(e){akaMediaAnalytics&&(akaMediaAnalytics.enableLocation(e),akaMediaAnalytics.getShouldAnalyze()&&(e={methodName:"akamaiEnableLocation",enable:enable},akaMediaAnalytics.processLogs({api:"reportAPI",value:e})))}function akamaiDisableServerIpLookup(){try{akaMediaAnalytics&&(akaMediaAnalytics.disableServerIpLookUp(),akaMediaAnalytics.getShouldAnalyze()&&akaMediaAnalytics.processLogs({api:"reportAPI",value:{methodName:"akamaiDisableServerIpLookup"}}))}catch(e){}}function akamaiEnableServerIpLookup(){try{akaMediaAnalytics&&(akaMediaAnalytics.enableServerIpLookUp(),akaMediaAnalytics.getShouldAnalyze()&&akaMediaAnalytics.processLogs({api:"reportAPI",value:{methodName:"akamaiEnableServerIpLookup"}}))}catch(e){}}function akamaiHandleError(e){try{akaMediaAnalytics&&akaMediaAnalytics.handleError(e)}catch(e){}}function fragmentDownloadStarted(e){akamaiFragmentDownloadStarted(e)}function fragmentDownloadCompleted(e){akamaiFragmentDownloadCompleted(e)}function akamaiFragmentDownloadStarted(e){var t=akaMediaAnalytics.getStream();t&&e&&(t.streamFragmentDownloadStarted(e),akaMediaAnalytics.getShouldAnalyze()&&akaMediaAnalytics.processLogs({api:"reportAPI",value:{methodName:"akamaiFragmentDownloadStarted",bitRate:e}}))}function akamaiFragmentDownloadCompleted(e){var t=akaMediaAnalytics.getStream();t&&e&&(t.streamFragmentDownloadCompleted(e),akaMediaAnalytics.getShouldAnalyze()&&akaMediaAnalytics.processLogs({api:"reportAPI",value:{methodName:"akamaiFragmentDownloadCompleted",bitRate:e}}))}("undefined"!=typeof akamaiBCVideoObject||"undefined"!=typeof AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH&&-1==AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH.indexOf("enableGenericAPI=1")&&-1==AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH.indexOf("subscribeVideo"))&&(akaMediaAnalytics=new AkaHTML5MediaAnalytics(null));
