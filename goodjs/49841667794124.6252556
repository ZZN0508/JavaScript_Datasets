var b$=b$||{};b$.universal=b$.universal||{},b$.universal.widgets=b$.universal.widgets||{},b$.universal.widgets.StructuredContentWidgetLocale=function(s){"use strict";s(document).ready(function(){var t,e,r=s(window).width()||window.innerWidth,a=s(".guest-title").text(),n=a.length;960<=r?(t=a.substr(0,31),20<n?s(".guest-title").html(t+"..."):s(".guest-title").html(t),s(".guest-title").attr("data-text",a),s(".guest-title").parent().html(s(".guest-title").parent().attr("data-text"))):768<=r&&r<960?(e=a.substr(0,26),20<n?s(".guest-title").html(e+"..."):s(".guest-title").html(e),s(".guest-title").attr("data-text",a),s(".guest-title").parent().html(s(".guest-title").parent().attr("data-text"))):540<=r&&r<768?(e=a.substr(0,40),20<n?s(".guest-title").html(e+"..."):s(".guest-title").html(e),s(".guest-title").attr("data-text",a),s(".guest-title").parent().html(s(".guest-title").parent().attr("data-text"))):400<=r&&r<540?(e=a.substr(0,20),20<n?s(".guest-title").html(e+"..."):s(".guest-title").html(e),s(".guest-title").attr("data-text",a),s(".guest-title").parent().html(s(".guest-title").parent().attr("data-text"))):r<400&&(r=a.substr(0,18),20<n?s(".guest-title").html(r+"..."):s(".guest-title").html(r),s(".guest-title").attr("data-text",a),s(".guest-title").parent().html(s(".guest-title").parent().attr("data-text"))),s(".locate-us .search-icon-mobile").on("click",function(){s(".search-input-wrapper, .search-result-wrapper").toggleClass("mobile-search"),s(".search-input-wrapper").hasClass("mobile-search")&&s(".sfSearchWrap .searchbox").focus(),s(".search-result-wrapper").hasClass("mobile-search")||s(".sf-closebutton").click()}),s(".locate-us .help-img, .locate-us .help").on("click",function(t){gadgets.pubsub.publish("nbGap",{eventCategory:"Header",eventAction:"buttonClick",eventLabel:"HelpUs",count:0}),t.preventDefault(),toggleEvaChat()}),s(".locate-us .locate, .locate-us .locate-img").on("click",function(t){gadgets.pubsub.publish("nbGap",{eventCategory:"Header",eventAction:"buttonClick",eventLabel:"Locate",count:0})})});var t=setInterval(function(){"complete"===document.readyState&&0<s(".hdfc-mobile-brdcrm").length&&(clearInterval(t),gadgets.pubsub.publish("brdmPlcLoaded"))},500),o="cs";return{prefModified:function(t){t.refreshIncludes();var e=s(t.htmlNode);s(".bd-structured-content-widget",e).attr("data-type",t.getPreference("contentType")||"Content")},start:function(l){var t=l.getPreference("isReq");s(l.htmlNode).find(".guest-title").addClass(t);var r,e=l.getPreference("contentRef"),a=s(l.htmlNode),n=!1;try{top.bd}catch(t){n=!0}(window.be&&!n&&be.utils.module("top.bd.PageMgmtTree.selectedLink").isMasterPage||"true"===l.model.manageable||""===l.model.manageable||void 0===l.model.manageable)&&(e||a.addClass("bd-empty-structured-content"),s(".bd-structured-content-widget",a).attr("data-type",l.getPreference("contentType")||"Content"),l.addEventListener("preferences-form",function(t){for(var e=b$.portal.portalModel.filterPreferences(l.model.preferences.array),r=e.length-1;0<=r;r--)if("Template"==e[r].label)for(var a=l.getPreference("templateList").split(","),n=0,s=0;n<a.length;n++,s++)e[r].inputType.options[s]={label:a[n],value:a[n+1]},n++}),l.addEventListener("bdDrop.enter",function(t){t=t.detail.info.helper.bdDragData.fileDataArray[0];t.metaData&&t.metaData["cmis:objectTypeId"]&&"bb:structuredcontent"===t.metaData["cmis:objectTypeId"].property?(r=t,a.addClass("bd-over-structured-content")):r=void 0}),l.addEventListener("bdDrop.leave",function(t){a.removeClass("bd-over-structured-content")}),l.addEventListener("bdDrop.drop",function(t){var e;r&&(l.model.preferences.getByName("contentRef")||(e=b$.portal.portalModel.createPreference("contentRef","contentRef",void 0,""),l.model.preferences.add(e)),l.setPreference("contentRef",[o,"contentRepository"===r.repository?r.repository:"@portalRepository",r.contentUId].join(":")),l.model.save(function(){l.refreshHTML(),a.removeClass("bd-empty-structured-content")}),a.removeClass("bd-over-structured-content")),r=void 0}),window.bd&&window.bd.bindDropEvents&&window.bd.bindDropEvents(l.htmlNode))}}}(jQuery);
