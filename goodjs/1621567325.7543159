!function(e){function t(e){y&&y.length&&(n(e),y.forEach(function(t,n){try{t(e)}catch(o){}}),y.length=0)}function n(e){if(e&&e.config){var t=l(),n=t.__last_loginid__||t.__cn_logon_id__||t._nk_;n&&e.setConfig({nick:decodeURIComponent(n)});var o=d();o&&e.setConfig({spmId:o})}}function o(o,r){if(e.__WPO&&e.__WPO.log)return n(e.__WPO),void(o&&o(e.__WPO));if(2>v)return void y.push(o);var i=document.createElement("script");i.crossorigin=!0,i.src="//g.alicdn.com/retcode/log/log.js",i.onload=function(){v=2,t(e.__WPO)},i.onerror=function(){v=-1,r&&r()},v=1,document.getElementsByTagName("head")[0].appendChild(i)}function r(e){var t=e.toString();return t=t.substr("function ".length),t=t.substr(0,t.indexOf("("))}function i(){for(var e=[],t=i;t=t.caller;)e.push(t.name||r(t)||"anonymous");return e.reverse().join(">")}function u(t,n){/(-test\.|_debugMode_)/.test(e.location.href)?s(t,n):c(t,n)}function c(e,t){o(function(n){try{n[e].apply(n,t)}catch(o){}})}function s(t,n){e.console&&e.console.log.apply(e.console,n)}function a(e){return!window.__REFLY_MONITOR_&&p[e]>2?!0:window.__REFLY_MONITOR_&&p[window.__REFLY_MONITOR_.logLevel]>=p[e]?!0:window.__REFLY_MONITOR_&&window.__REFLY_MONITOR_.users&&p[window.__REFLY_MONITOR_.users[f("last_mid")]>=p[e]]?!0:!1}function f(e,t){t=t||{};var n=l(),o=t.raw?function(e){return e}:unescape;if(g(e)){for(var r={},i=0,u=e.length;u>i;i++){var c=o(e[i]),s=n[c];"undefined"!=typeof s&&(s=o(s)),r[c]=s?s:null}return r}e=o(e);var s=n[e];return"undefined"!=typeof s&&(s=o(s)),s=s?s:null}function l(){if(""===document.cookie)return{};for(var e=document.cookie.split("; "),t={},n=0,o=e.length;o>n;n++){var r=e[n].split("=");t[r[0]]=r[1]}return t}function d(){var e=document.getElementsByName("data-spm"),t=document.body;if(e&&e.length){var n=e[0].getAttribute("content")||"a262jn",o=t.getAttribute("data-spm")||"nopage";return[n,o].join(".")}}function g(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}function _(e,t){t||(t=e,e=new Date);var n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours()%12==0?12:e.getHours()%12,"H+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()},o={0:"/u65e5",1:"/u4e00",2:"/u4e8c",3:"/u4e09",4:"/u56db",5:"/u4e94",6:"/u516d"};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(t)&&(t=t.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"/u661f/u671f":"/u5468":"")+o[e.getDay()+""]));for(var r in n)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[r]:("00"+n[r]).substr((""+n[r]).length)));return t}if(!e.Monitor){var p={debug:0,info:1,warn:2,error:3},m={},h={execute:function(e,t,n){"string"!=typeof e&&(n=t,t=e,e=i()),this.reportTime(e);try{t&&t()}catch(o){n&&this.execute(function(){n(),this.report("error",o)})}this.reportTime(e)},reportState:function(e,t,n,o,r){isNaN(o),u("retCode",[{api:e,issuccess:t,delay:o,msg:n,detail:i(),traceId:r,sample:t?10:1}])},reportTime:function(e,t){if(e){if(!t){if(!m[e])return void(m[e]={time:new Date,times:1});t=new Date-m[e].time}u("custom",["time",e,t])}},reportCount:function(e){u("custom",["count",e])},report:function(e,t){"error"==e&&u("sys",[t+""])},log:function(t,n,o){return e._ENV_&&"dev"==e._ENV_||/test-.*/.test(e.location.href)?void(console[t]||console.log)(n):void(!a(t)&&p[t]<3||("error"==t&&(o=1),o||(o=.1),n=["["+t+"] ["+_("yyyy-MM-dd hh:mm:ss")+"] ["+f("last_mid")+"]",n],u("log",[n,o])))},changeSpm:function(e){o(function(t){try{t.spm(e),t.custom("count","pv-"+e)}catch(n){}})}},y=[],v=0;e.Monitor=h;try{o()}catch(w){}"function"==typeof window.define?window.define("pkg/@alife/refly-monitor/0.0.x/index",["require","module","exports"],function(e,t,n){t.exports=h}):"object"==typeof exports&&(module.exports=h)}}(this);;