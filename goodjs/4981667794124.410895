!function(p,n){"use strict";var i,t,s,a,o,r,d,l,c,u,g=p.sinaadToolkit=p.sinaadToolkit||{VERSION:"1.0.0",mode:-1!==p.location.href.indexOf("__sinaadToolkitDebug__")?"debug":"release",debug:(i="sinaadToolkitDebugContainer",t=p.console||{log:function(e){var t,n;document.body&&((t=document.getElementById(i))||((t=document.createElement("ul")).id=i,t.style.cssText="z-index:99999;overflow:auto;height:300px;position:absolute;right:0;top:0;opacity:.9;*filter:alpha(opacity=90);background:#fff;width:500px;",document.body.insertBefore(t,document.body.firstChild)),(n=document.createElement("li")).style.cssText="border-bottom:1px dotted #ccc;line-height:30px;font-size:12px;",n.innerHTML=e+Array.prototype.slice.call(arguments,1).join(" "),t.appendChild(n))}},function(e){"debug"===g.mode&&t.log(e,Array.prototype.slice.call(arguments,1))}),error:function(e,t){try{g.sio.log("//d00.sina.com.cn/a.gif?"+["type=sinaads_error","msg="+encodeURIComponent(e||(t?t.message:"unknow")),"ref="+encodeURIComponent(g.url.top),"ja="+(navigator.javaEnabled()?1:0),"ck="+(navigator.cookieEnabled?1:0),"ds="+p.screen.width+"x"+p.screen.height,"ua="+encodeURIComponent(navigator.appVersion),"pf="+navigator.platform,"ts="+g.now()].join("&"))}catch(t){}if("debug"===g.mode)throw new Error(e+(t?":"+t.message:""))},now:function(){return+new Date},rnd:function(){return Math.floor(2147483648*Math.random()).toString(36)},rand:function(e,t){return Math.floor(e+Math.random()*(t-e+1))},hash:function(e){for(var t,n=0,i=0;!isNaN(t=e.charCodeAt(i++));)n=(n<<5)-n+t,n&=n;return Math.abs(n).toString(36)},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)},isString:function(e){return"[object String]"===Object.prototype.toString.call(e)},isNull:function(e){return null==e},isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},isNumber:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&isFinite(e)},globalEval:function(e){e&&/\S/.test(e)&&(p.execScript||function(e){p.eval.call(p,e)})(e)},underPop:function(t,n,i,a){function o(){var e=p.open("about:blank",n,"width="+i+",height="+a);e.blur(),e.opener.focus(),e.location=t,g.event.un(document.body,"click",o)}try{o()}catch(e){g.debug("sinaads:Cannot pop window, use click event."),g.event.on(document.body,"click",o)}},scrollTop:function(){return document.documentElement.scrollTop||p.pageYOffset||document.body.scrollTop}};function f(e){var i=[];return g.object.map(e,function(e,t){if(null!==e){var n=[];try{(function e(t,n){var i,a,o,r="";switch(typeof t){case"string":n.push(g.string.formalString(t));break;case"number":n.push(isFinite(t)&&!isNaN(t)?t:"null");break;case"boolean":n.push(t);break;case"undefined":n.push("null");break;case"object":if(null===t){n.push("null");break}if(t instanceof Array){var s=t.length;for(n.push("["),r="",i=0;i<s;i++)n.push(r),e(t[i],n),r=",";n.push("]");break}for(o in n.push("{"),r="",t)t.hasOwnProperty(o)&&"function"!=typeof(a=t[o])&&(n.push(r),n.push(o),n.push(":"),e(a,n),r=",");n.push("}")}})(e,n),n=n.join("")}catch(e){}n&&i.push(t,"=",n,";")}}),i.join("")}function h(e,t,n){e.setAttribute("type","text/javascript"),n&&e.setAttribute("charset",n),e.setAttribute("src",t),document.getElementsByTagName("head")[0].appendChild(e)}function m(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function y(t,n,i,a){return function(){if("function"==typeof i)try{var e=i.apply(t,arguments);v.isPromise(e)?e.then(function(){n.resolve.apply(n,arguments)},function(){n.reject.apply(n,arguments)}):n.resolve.call(n,e)}catch(e){g.error("sinaadToolkit.Deferred:Error occurred in _pipe. "+e.message),n.reject(e)}else n[a].apply(n,t._args)}}function _(t){var e;"pending"!==t._state&&(e=("resolved"===t._state?t._resolves:t._rejects).slice(),setTimeout(function(){o.array.each(e,function(e){try{e.apply(t,t._args)}catch(e){g.error("sinaadToolkit.Deferred:Error occurred in _flush. "+e.message)}})},0),t._resolves=[],t._rejects=[])}function v(){this._state="pending",this._args=null,this._resolves=[],this._rejects=[]}function b(e){return e<10?"0"+e:e}g.RESOURCE_URL=g.RESOURCE_URL||["//d1.sina.com.cn/litong/zhitou/sinaads","//d2.sina.com.cn/litong/zhitou/sinaads","//d3.sina.com.cn/litong/zhitou/sinaads","//d4.sina.com.cn/litong/zhitou/sinaads","//d5.sina.com.cn/litong/zhitou/sinaads","//d6.sina.com.cn/litong/zhitou/sinaads","//d7.sina.com.cn/litong/zhitou/sinaads","//d8.sina.com.cn/litong/zhitou/sinaads","//d9.sina.com.cn/litong/zhitou/sinaads"][g.rand(0,8)],g.TOOLKIT_URL=g.RESOURCE_URL+"/release/sinaadToolkit.js",g.VPLAYER_URL=g.RESOURCE_URL+"/release/SinaWindowsPlayer.swf",g.browser=g.browser||function(e){var t={android:/(Android)(\s+([\d.]+))*/i.test(e),ipad:/(iPad).*OS\s([\d_]+)/i.test(e),webos:/(webOS|hpwOS)[\s\/]([\d.]+)/i.test(e),kindle:/Kindle\/([\d.]+)/i.test(e),silk:/Silk\/([\d._]+)/i.test(e),blackberry:/(BlackBerry).*Version\/([\d.]+)/i.test(e),bb10:/(BB10).*Version\/([\d.]+)/i.test(e),rimtabletos:/(RIM\sTablet\sOS)\s([\d.]+)/i.test(e),playbook:/PlayBook/i.test(e),chrome:/chrome\/(\d+\.\d+)/i.test(e)?+RegExp.$1:n,firefox:/firefox\/(\d+\.\d+)/i.test(e)?+RegExp.$1:n,ie:/msie (\d+\.\d+)/i.test(e)?document.documentMode||+RegExp.$1:n,isGecko:/gecko/i.test(e)&&!/like gecko/i.test(e),isStrict:"CSS1Compat"===document.compatMode,isWebkit:/webkit/i.test(e),opera:/opera(\/| )(\d+(\.\d+)?)(.+?(version\/(\d+(\.\d+)?)))?/i.test(e)?+(RegExp.$6||RegExp.$2):n};t.iphone=!t.ipad&&/(iPhone\sOS)\s([\d_]+)/i.test(e),t.touchpad=t.webos&&/TouchPad/.test(e),t.tablet=!!(t.ipad||t.playbook||t.android&&!/Mobile/.test(e)||t.firefox&&/Tablet/.test(e)),t.phone=!(t.tablet||!(t.android||t.iphone||t.webos||t.blackberry||t.bb10||t.chrome&&/Android/.test(e)||t.chrome&&/CriOS\/([\d.]+)/.test(e)||t.firefox&&/Mobile/.test(e)));try{/(\d+\.\d+)/.test(p.external.max_version)&&(t.maxthon=+RegExp.$1)}catch(e){}return t.mobile=t.tablet||t.phone||t.touchpad,t.safari=/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(e)&&!/chrome/i.test(e)?+(RegExp.$1||RegExp.$2):n,t.isSupportFixed=!t.ie||7<=t.ie,t}(navigator.userAgent),g.systemInfo={screenSize:p.screen?p.screen.width+"x"+p.screen.height:"-",language:navigator.systemLanguage||navigator.browserLanguage||navigator.language||navigator.userLanguage||"-",platform:navigator.platform||"-",flashVersion:function(){var e,t,n=0;if(g.browser.ie)try{(e=new p.ActiveXObject("ShockwaveFlash.ShockwaveFlash"))&&(t=e.GetVariable("$version"),n=parseInt(t.split(" ")[1].split(",")[0],10))}catch(e){}else if(navigator.plugins&&0<navigator.plugins.length&&(e=navigator.plugins["Shockwave Flash"]))for(var i=e.description.split(" "),a=0;a<i.length;++a)isNaN(parseInt(i[a],10))||(n=parseInt(i[a],10));return n||0}(),osVersion:"-"},g.array=g.array||{remove:function(e,t){for(var n=e.length;n--;)n in e&&e[n]===t&&e.splice(n,1);return e},each:function(e,t,n){var i,a,o=(e=g.array.ensureArray(e)).length;if("function"==typeof t)for(a=0;a<o&&(i=e[a],!1!==t.call(n||e,i,a));a++);return e},ensureArray:function(e){return g.isArray(e)?e:g.isNull(e)?[]:[e]}},g.string=g.string||(c={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},u=/\uffff/.test("锟�")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g,{encodeHTML:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},decodeHTML:function(e){return String(e).replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&#([\d]+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},formalString:function(e){var t=[];return t.push(e.replace(u,function(e){if(e in c)return c[e];var t=e.charCodeAt(0),n="\\u";return t<16?n+="000":t<256?n+="00":t<4096&&(n+="0"),c[e]=n+t.toString(16),c[e]})),'"'+t.join("")+'"'},format:function(e,t){e=String(e);var i=Array.prototype.slice.call(arguments,1),a=Object.prototype.toString;return i.length?(i=1===i.length&&null!==t&&/\[object Array\]|\[object Object\]/.test(a.call(t))?t:i,e.replace(/#\{(.+?)\}/g,function(e,t){var n=i[t];return void 0===(n="[object Function]"===a.call(n)?n(t):n)?"":n})):e},toCamelCase:function(e){return e.indexOf("-")<0&&e.indexOf("_")<0?e:e.replace(/[-_][^-_]/g,function(e){return e.charAt(1).toUpperCase()})}}),g.string.trim=g.string.trim||(l=new RegExp("(^[\\s\\t\\xa0\\u3000]+)|([\\u3000\\xa0\\s\\t]+$)","g"),function(e){return e=e||"",String(e).replace(l,"")}),g.number=g.number||{pad:function(e,t){var n="",i=e<0,e=String(Math.abs(e));return(i?"-":"")+(n=e.length<t?new Array(t-e.length+1).join("0"):n)+e}},g.date=g.date||{format:function(e,n){function t(e,t){n=n.replace(e,t)}if("string"!=typeof n)return e.toString();var i=g.number.pad,a=e.getFullYear(),o=e.getMonth()+1,r=e.getDate(),s=e.getHours(),d=e.getMinutes(),e=e.getSeconds();return t(/yyyy/g,i(a,4)),t(/yy/g,i(parseInt(a.toString().slice(2),10),2)),t(/MM/g,i(o,2)),t(/M/g,o),t(/dd/g,i(r,2)),t(/d/g,r),t(/HH/g,i(s,2)),t(/H/g,s),t(/hh/g,i(s%12,2)),t(/h/g,s%12),t(/mm/g,i(d,2)),t(/m/g,d),t(/ss/g,i(e,2)),t(/s/g,e),n}},g.object=g.object||{map:function(e,t){var n,i={};for(n in e)e.hasOwnProperty(n)&&(i[n]=t(e[n],n));return i}},g.json=g.json||{parse:function(e){return new Function("return ("+e+")")()},stringify:(d={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},function(e){switch(typeof e){case"undefined":return"undefined";case"number":return isFinite(e)?String(e):"null";case"string":return'"'+(r=/["\\\x00-\x1f]/.test(r=e)?r.replace(/["\\\x00-\x1f]/g,function(e){var t;return(t=d[e])||(t=e.charCodeAt(),"\\u00"+Math.floor(t/16).toString(16)+(t%16).toString(16))}):r)+'"';case"boolean":return String(e);default:if(null===e)return"null";if(e instanceof Array)return function(e){for(var t,n,i=["["],a=e.length,o=0;o<a;o++)switch(typeof(n=e[o])){case"undefined":case"function":case"unknown":break;default:t&&i.push(","),i.push(g.json.stringify(n)),t=1}return i.push("]"),i.join("")}(e);if(e instanceof Date)return'"'+(r=e).getFullYear()+"-"+b(r.getMonth()+1)+"-"+b(r.getDate())+"T"+b(r.getHours())+":"+b(r.getMinutes())+":"+b(r.getSeconds())+'"';var t,n,i,a=["{"],o=g.json.stringify;for(i in e)if(Object.prototype.hasOwnProperty.call(e,i))switch(typeof(n=e[i])){case"undefined":case"unknown":case"function":break;default:t&&a.push(","),t=1,a.push(o(i)+":"+o(n))}return a.push("}"),a.join("")}var r})},g.event=g.event||{on:function(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener&&e.addEventListener(t,n,!1)},un:function(e,t,n){e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener&&e.removeEventListener(t,n)}},g.cookie=g.cookie||{_isValidKey:function(e){return new RegExp('^[^\\x00-\\x20\\x7f\\(\\)<>@,;:\\\\\\"\\[\\]\\?=\\{\\}\\/\\u0080-\\uffff]+$').test(e)},_getRaw:function(e){if(g.cookie._isValidKey(e)){e=new RegExp("(^| )"+e+"=([^;]*)(;|$)").exec(document.cookie);if(e)return e[2]||null}return null},_setRaw:function(e,t,n){var i;g.cookie._isValidKey(e)&&(i=(n=n||{}).expires,"number"==typeof n.expires&&(i=new Date).setTime(i.getTime()+n.expires),document.cookie=e+"="+t+(n.path?"; path="+n.path:"")+(i?"; expires="+i.toGMTString():"")+(n.domain?"; domain="+n.domain:"")+(n.secure?"; secure":""))},get:function(e){e=g.cookie._getRaw(e);return"string"==typeof e?decodeURIComponent(e):null},set:function(e,t,n){g.cookie._setRaw(e,encodeURIComponent(t),n)},remove:function(e,t){(t=t||{}).expires=new Date(0),g.cookie._setRaw(e,"",t)}},g.storage=g.storage||function(){var a={};g.event.on(p,"beforeunload",function(){for(var e in a)try{g.storage.remove(e),delete a[e]}catch(e){}});var o={id:"sinaadToolkitUserDataContainer",name:location.hostname,init:function(){var e=document.getElementById(o.id);if(!e)try{(e=document.createElement("input")).type="hidden",e.style.display="none",e.addBehavior("#default#userData"),document.body.insertBefore(e,document.body.firstChild);var t=new Date;t.setDate(t.getDate()+365),e.expires=t.toUTCString()}catch(e){return g.debug("sinaadToolkit.storage:userData init fail, "+e.message),null}return e},setItem:function(e,t,n){var i=o.init();i&&(i.load(o.name),i.setAttribute(e,t+(n?";expires="+(g.now()+n):"")),i.save(o.name)),n||(a[e]=1)},getItem:function(e){var t=o.init();return t?(t.load(o.name),t.getAttribute(e)):null},removeItem:function(e){var t=o.init();t&&(t.load(o.name),t.removeAttribute(e),t.save(o.name))}},e={getItem:function(e){return p.localStorage.getItem(e)},setItem:function(e,t,n){p.localStorage.setItem(e,t+(n?";expires="+(g.now()+n):"")),n||(a[e]=1)},removeItem:function(e){p.localStorage.removeItem(e)}},t={getItem:function(e){return g.cookie.get(e)},setItem:function(e,t,n){g.cookie.set(e,t,{expires:n||0})},removeItem:function(e){g.cookie.remove(e)}};try{var i=p.localStorage?e:g.browser.ie&&g.browser.ie<8?o:t}catch(e){console.warn(e)}try{i.setItem("sinaads_test_ls","support")}catch(e){i=t}return{get:function(e){try{var t=i.getItem(e);return t?(g.debug("sinaadToolkit.storage.get:get value of "+e+":"+t),(t=t.split(";expires="))[1]&&g.now()>parseInt(t[1],10)?(i.removeItem(e),null):t[0]):null}catch(e){return g.debug("sinaadToolkit.storage.get:"+e.message),null}},set:function(e,t,n){try{i.setItem(e,t,n)}catch(e){g.error("sinaadToolkit.storage.set:"+e.message)}},remove:function(e){try{i.removeItem(e)}catch(e){g.error("sinaadToolkit.storage.remove:"+e.message)}}}}(),g.url=g.url||{protocol:"https:"===p.location.protocol?"https://":"http://",ensureURL:function(e){return(e=g.string.trim(e))?/^((http|https):)*\/\//.test(e)?e:"//"+e:""},createURL:function(e,t,n){return[n?"https":"http","://",e,t].join("")},top:function(){var e;try{e=p.top.location.href}catch(e){}return(e=e||(p.top===p.self?p.location.href:p.document.referrer))||g.error("sinaadToolkit:Cannot get pageurl on which ad locates."),e}(),fortp:function(e,t){t=t||p.event;for(var n,i=e,a=10;i&&i.tagName&&a;){if("INS"===i.tagName.toUpperCase()&&-1!==i.className.indexOf("sinaads")){n=i.getAttribute("data-ad-pdps");break}i=i.parentNode,a--}var o,r=document.documentElement||document,s=r.body,d=t.pageX||t.clientX+(r&&r.scrollLeft||s&&s.scrollLeft||0)-(r&&r.clientLeft||s&&s.clientLeft||0),t=t.pageY||t.clientY+(r&&r.scrollTop||s&&s.scrollTop||0)-(r&&r.clientTop||s&&s.clientTop||0),r=((r=e.getAttribute("data-ss"))||"").split("").reverse().join(""),s={left:0,top:0};return n&&(o=p._sinaadsCacheDom[n])&&(s=g.dom.getPosition(o)),-1===r.indexOf("//sax.sina.com.cn")&&-1===r.indexOf("//saxn.sina.com.cn")||(e.href=r+"&am="+encodeURIComponent("{clkx:"+(d-s.left)+",clky:"+(t-s.top)+"}")),!0}},g.dom=g.dom||{get:function(e){return e?"string"==typeof e||e instanceof String?document.getElementById(e):!e.nodeName||1!==e.nodeType&&9!==e.nodeType?null:e:null},addClass:function(e,t){e=g.dom.get(e);for(var n=t.split(/\s+/),i=e.className,a=" "+i+" ",o=0,r=n.length;o<r;o++)a.indexOf(" "+n[o]+" ")<0&&(i+=(i?" ":"")+n[o]);return e.className=i,e},getDocument:function(e){return 9===e.nodeType?e:e.ownerDocument||e.document},getComputedStyle:function(e,t){var n,i=g.dom.getDocument(e);return i.defaultView&&i.defaultView.getComputedStyle&&(n=i.defaultView.getComputedStyle(e,null))?n[t]||n.getPropertyValue(t):""},getCurrentStyle:function(e,t){return e.style[t]||(e.currentStyle?e.currentStyle[t]:"")||g.dom.getComputedStyle(e,t)},_styleFixer:{},_styleFilter:[],getStyle:function(e,t){var n,i=g.dom;e=i.get(e),t=g.string.toCamelCase(t);var a=e.style[t]||(e.currentStyle?e.currentStyle[t]:"")||i.getComputedStyle(e,t);return a&&"auto"!==a||(n=i._styleFixer[t])&&(a=n.get?n.get(e,t,a):g.dom.getStyle(e,n)),a=(n=i._styleFilter)?n.filter(t,a,"get"):a},getPosition:function(e){e=g.dom.get(e);var t,n=g.dom.getDocument(e),i=g.browser,a=g.dom.getStyle,o={left:0,top:0};if(e===(i.ie&&!i.isStrict?n.body:n.documentElement))return o;if(e.getBoundingClientRect){s=e.getBoundingClientRect(),o.left=Math.floor(s.left)+Math.max(n.documentElement.scrollLeft,n.body.scrollLeft),o.top=Math.floor(s.top)+Math.max(n.documentElement.scrollTop,n.body.scrollTop),o.left-=n.documentElement.clientLeft,o.top-=n.documentElement.clientTop;var r=n.body,s=parseInt(a(r,"borderLeftWidth"),10),r=parseInt(a(r,"borderTopWidth"),10);i.ie&&!i.isStrict&&(o.left-=isNaN(s)?2:s,o.top-=isNaN(r)?2:r)}else{t=e;do{if(o.left+=t.offsetLeft,o.top+=t.offsetTop,0<i.isWebkit&&"fixed"===a(t,"position")){o.left+=n.body.scrollLeft,o.top+=n.body.scrollTop;break}}while((t=t.offsetParent)&&t!==e);for((0<i.opera||0<i.isWebkit&&"absolute"===a(e,"position"))&&(o.top-=n.body.offsetTop),t=e.offsetParent;t&&t!==n.body;)o.left-=t.scrollLeft,i.opera&&"TR"===t.tagName||(o.top-=t.scrollTop),t=t.offsetParent}return o},fill:(r=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,function(e,t){var n,i,a,o;e&&(e.innerHTML='<i style="display:none;">Hack ie first node is script</i>'+t,i=e.getElementsByTagName("script"),a=0,o=i.length,function e(){a++<o&&(n=i[0])&&(g.browser.ie<=6&&n.defer?e():n.src?g.sio.loadScript(n.src,e,{charset:"gb2312"}):(g.globalEval((n.text||n.textContent||n.innerHTML||"").replace(r,"")),e()),n.parentNode&&n.parentNode.removeChild(n))}())}),insertHTML:function(e,t,n){var i;return e.insertAdjacentHTML&&!g.browser.opera?e.insertAdjacentHTML(t,n):(i=e.ownerDocument.createRange(),"AFTERBEGIN"===(t=t.toUpperCase())||"BEFOREEND"===t?(i.selectNodeContents(e),i.collapse("AFTERBEGIN"===t)):(i[(t="BEFOREBEGIN"===t)?"setStartBefore":"setEndAfter"](e),i.collapse(t)),i.insertNode(i.createContextualFragment(n))),e}},g.dom._styleFilter.filter=function(e,t,n){for(var i,a=0,o=g.dom._styleFilter;i=o[a];a++)(i=i[n])&&(t=i(e,t));return t},g.page=g.page||{getScrollTop:function(){var e=document;return p.pageYOffset||e.documentElement.scrollTop||e.body.scrollTop},getScrollLeft:function(){var e=document;return p.pageXOffset||e.documentElement.scrollLeft||e.body.scrollLeft},getViewHeight:function(){var e=document;return("BackCompat"===e.compatMode?e.body:e.documentElement).clientHeight},getViewWidth:function(){var e=document;return("BackCompat"===e.compatMode?e.body:e.documentElement).clientWidth},createStyleSheet:function(e){var t=e||{},n=t.document||document;if(g.browser.ie)return t.url||(t.url=""),n.createStyleSheet(t.url,t.index);if(e="<style type='text/css'></style>",t.url&&(e="<link type='text/css' rel='stylesheet' href='"+t.url+"'/>"),g.dom.insertHTML(n.getElementsByTagName("HEAD")[0],"beforeEnd",e),t.url)return null;var i=n.styleSheets[n.styleSheets.length-1],a=i.rules||i.cssRules;return{self:i,rules:i.rules||i.cssRules,addRule:function(e,t,n){return i.addRule?i.addRule(e,t,n):i.insertRule?(isNaN(n)&&(n=a.length),i.insertRule(e+"{"+t+"}",n)):void 0},removeRule:function(e){i.removeRule?i.removeRule(e):i.deleteRule&&(isNaN(e)&&(e=0),i.deleteRule(e))}}},injectStyles:function(e){var t,n=g.page.createStyleSheet();for(t in e)n.addRule(t,e[t])}},g.Deferred=g.Deferred||(o=g,v.prototype={resolve:function(){"pending"===this._state&&(this._state="resolved",this._args=[].slice.call(arguments),_(this))},reject:function(){"pending"===this._state&&(this._state="rejected",this._args=[].slice.call(arguments),_(this))},then:function(e,t){var n=new v;return this._resolves.push(y(this,n,e,"resolve")),this._rejects.push(y(this,n,t,"reject")),_(this),n},done:function(e){return this.then(e)},fail:function(e){return this.then(null,e)}},v.isPromise=function(e){return e&&"function"==typeof e.then},v),g.throttle=g.throttle||function(e,t,n,i){new Date;function a(){c=d,e.apply(r,s)}var o,r,s,d,l=0,c=0,u=null;return function(){d=+new Date,r=this,s=arguments,o=d-(i?l:c)-t,clearTimeout(u),i?n?u=setTimeout(a,t):0<=o&&a():0<=o?a():n&&(u=setTimeout(a,-o)),l=d}},g.debounce=g.debounce||function(e,t,n){return g.throttle(e,t,n,!0)},g.sio=g.sio||{IMG_1_1:"http://d00.sina.com.cn/a.gif",loadScript:function(e,t,n){var i,a=document.createElement("SCRIPT"),o=0,r=n||{},n=r.charset||"utf-8",s=t||function(){},t=r.timeout||0;a.onload=a.onreadystatechange=function(){if(!o){var e=a.readyState;if(void 0===e||"loaded"===e||"complete"===e){o=1;try{s(),clearTimeout(i)}finally{a.onload=a.onreadystatechange=null,m(a)}}}},t&&(i=setTimeout(function(){a.onload=a.onreadystatechange=null,m(a),r.onfailure&&r.onfailure()},t)),h(a,e,n)},jsonp:function(e,t,n){function i(e){return function(){try{e?s.onfailure&&s.onfailure():(t.apply(p,arguments),clearTimeout(o)),p[a]=null,delete p[a]}catch(e){}finally{m(r)}}}var a,o,r=document.createElement("SCRIPT"),s=n||{},d=s.charset||"utf-8",l=s.queryField||"callback",c=s.timeout||0,u=new RegExp("(\\?|&)"+l+"=([^&]*)");g.isString(t)?a=t:(n=u.exec(e))&&(a=n[2]),a=a||"_sinaads_cbs_"+Math.floor(2147483648*Math.random()).toString(36),g.isFunction(t)&&(p[a]=i(0)),c&&(o=setTimeout(i(1),c)),(e=e.replace(u,"$1"+l+"="+a)).search(u)<0&&(e+=(e.indexOf("?")<0?"?":"&")+l+"="+a),h(r,e,d)},log:function(e,t){var n=new Image,i="_sinaads_sio_log_"+g.rnd();(p[i]=n).onload=n.onerror=n.onabort=function(){n.onload=n.onerror=n.onabort=null,p[i]=null,n=null},n.src=e+(t?"":(0<e.indexOf("?")?"&":"?")+i)}},g.swf=g.swf||{uid:0,getMovie:function(e,t){var n,i=(t=t||p).document[e];return 9===g.browser.ie?i&&i.length?1===(n=g.array.remove(g.toArray(i),function(e){return"embed"!==e.tagName.toLowerCase()})).length?n[0]:n:i:i||t[e]},createHTML:function(e){var t,n,i={},a=g.string.encodeHTML;for(n in e=e||{})i[n]=e[n];var o=(e=i).vars;if("string"==typeof o)e.flashvars=o;else{var r=[];for(n in o)t=o[n],r.push(n+"="+encodeURIComponent(t));e.flashvars=r.join("&")}var s,d=[];for(n in e.name=e.id||"sinaadtk_swf_uid_"+g.swf.uid++,e.align=e.align||"middle",e.src=e.url||"",e.type="application/x-shockwave-flash",e.pluginspage="http://www.macromedia.com/go/getflashplayer",delete e.id,delete e.url,delete e.vars,d.push("<embed"),e)if((t=e[n])||!1===t||0===t){if(new RegExp("^salign$","i").test(n)){s=t;continue}d.push(" ",n,'="',a(t),'"')}return s&&d.push(' salign="',a(s),'"'),d.push("/>"),d.join("")},hackAutoPlay:function(e,t){e.innerHTML=t}},g.iframe=g.iframe||{uid:0,init:function(e,t,n,i){var a=i?'"':"",i=a+"0"+a;e.width=a+t+a,e.height=a+n+a,e.frameborder=i,e.marginwidth=i,e.marginheight=i,e.vspace=i,e.hspace=i,e.allowtransparency=a+"true"+a,e.scrolling=a+"no"+a,e.adTypeTurning||(e.sandbox="allow-popups allow-same-origin allow-scripts allow-top-navigation-by-user-activation")},createHTML:function(e){var n=[];return e.name=e.name||e.id||"sinaadtk_iframe_uid_"+g.iframe.uid++,g.object.map(e,function(e,t){n.push(" "+t+'="'+(null===e?"":e)+'"')}),"<iframe"+n.join("")+"></iframe>"},fill:function(e,t){var n,i=g.browser.ie;if(i){try{n=!!e.contentWindow.document}catch(e){n=!1}if(n)try{6<i?(p.frames[e.name].contents=t,e.src='javascript:window["contents"]'):(p.frames[e.name].contents=t,e.src='javascript:document.write(window["contents"]);/* document.close(); */')}catch(e){g.error("sinaadToolkit.iframe.fill: cannot fill iframe content in ie, ",e)}else try{var a="sinaads-ad-iframecontent-"+g.rnd();p[a]=t,t='var adContent = window.parent["'+a+'"];window.parent["'+a+'"] = null;document.write(adContent);',t=g.browser.ie&&g.browser.ie<=6?"window.onload = function() {document.write(\\'<sc\\' + \\'ript type=\"text/javascript\">document.domain = \""+document.domain+'";'+t+"<\\/scr\\' + \\'ipt>\\');/*document.close();*/};":'document.domain = "'+document.domain+'";'+t+"/*document.close();*/",e.src='javascript:\'<script type="text/javascript">'+t+"<\/script>'"}catch(e){p[a]=null,g.error("sinaadToolkit.iframe.fill:Cannot fill iframe in IE by modifying the document.domain. ",e)}}else try{n=e.contentWindow?e.contentWindow.document:e.contentDocument,g.browser.firefox&&n.open("text/html","replace"),n.write(t),n.close()}catch(e){g.error("sinaadToolkit.iframe.fill:Cannot fill iframe by regular method. ",e)}}},g.monitor=g.monitor||{parseTpl:(a=/\{__([a-zA-Z0-9]+(_*[a-zA-Z0-9])*)__\}/g,function(e,n){return(n=n||{}).timestamp=n.timestamp||g.now(),e?e.replace(a,function(e,t){return 0<t.indexOf("adbox_")?"{__mo"+(t=t.split("_"))[2]+"__}":n[t]||e}):""}),createImpressMonitor:function(e){var n=[];return g.array.each(e,function(e){var t={};g.iframe.init(t,1,1,!1),t.src=e,t.style="display:none;",n.push(g.iframe.createHTML(t))}),n.join("")},createTrackingMonitor:function(e,t){if(!e)return"";var n=g.url.ensureURL(e);return g.array.each(t,function(e){(e=g.url.ensureURL(e))&&(n=e+encodeURIComponent(n))}),n},stringify:function(e){var t=[];return g.array.each(e,function(e){e&&t.push(encodeURIComponent(e))}),t.join("|")},parse:function(e){var t=[],e=(e||"").split("|");return g.array.each(e,function(e){e&&t.push(decodeURIComponent(e))}),t}},g.ad=g.ad||{getTimesInRange:function(e,t,n){n=n||0;var i=(g.storage.get(e="sinaads_tc_"+e)||"").split("::"),a=g.now(),o=i[1]?parseInt(i[1],10):a+n;return 0<=o-a?i=i[0]?parseInt(i[0],10)+1:1:(i=1,o=a+n,g.storage.remove(e)),g.storage.set(e,i+"::"+o,a+n),t<i?0:i},getTypeBySrc:function(e,t){var n=t;if(!n)switch(n=e.substring(e.length-3).toLowerCase()){case"swf":n="flash";break;case"tml":n="url";break;case".js":n="js";break;case"png":case"jpg":case"gif":case"bmp":n="image";break;case"mp4":case"flv":n="video";break;default:n="html"}return n="url"===n&&0<=e.indexOf("adbox.sina.com.cn/ad/")?"adbox":n},embed:function(e,t,n,i,a){switch(t){case"text":case"image":case"url":case"adbox":case"flash":g.swf.hackAutoPlay(e,a);break;default:g.sandbox.create(e,n,i,a)}},createHTML:function(n,e,t,i,a,o,r,s,d){var l,c=[],u="",p={},f=0;if(d=d||{},e=g.array.ensureArray(e),n=g.array.ensureArray(n),a=g.array.ensureArray(a),r=g.monitor.stringify(g.array.ensureArray(r)),o=g.monitor.stringify(g.array.ensureArray(o)),t+=g.isNumber(t)?"px":"",i+=g.isNumber(i)?"px":"",g.array.each(e,function(e,t){p["src"+t]=e,p["type"+t]=n[t]||g.ad.getTypeBySrc(e,n[t]),p["link"+t]=a[t]}),p.width=t,p.height=i,p.src=p.src0||"",p.type=p.type0||"",p.link=p.link0||"",s&&"string"==typeof s)return g.string.format(s,p);for(e.length,0;f<1;f++){switch(e=p["src"+f],n=p["type"+f],a=p["link"+f],n){case"image":u='<img border="0" src="'+g.url.ensureURL(e)+'" style="width:'+t+";height:"+i+';border:0" alt="骞垮憡"/>',u=a?'<a style="display:block;line-height:0;" href="'+a+'" target="_blank" data-ss="'+(a||"").split("").reverse().join("")+'" onmousedown="return sinaadToolkit.url.fortp(this, event);">'+u+"</a>":u;break;case"text":u=a?'<a href="'+a+'" target="_blank" data-ss="'+(a||"").split("").reverse().join("")+'" onmousedown="return sinaadToolkit.url.fortp(this, event);">'+e+"</a>":e;break;case"flv":case"video":d.source=e,d.volume=d.volume||20,e=g.VPLAYER_URL;case"flash":var h,m={};for(h in d)d[h]&&d.hasOwnProperty(h)&&(m[h]=d[h]);a&&(m.clickTAG=a),u=g.swf.createHTML({url:g.url.ensureURL(e),width:t,height:i,wmode:d.wmode||"opaque",vars:m,id:d.id||""}),a&&(u=[u,'<a style="position:absolute;background:#fff;opacity:0;filter:alpha(opacity=0);width:'+t+";height:"+i+';left:0;top:0" href="'+a+'"  data-ss="'+(a||"").split("").reverse().join("")+'" target="_blank"  onmousedown="return sinaadToolkit.url.fortp(this, event);"></a>'].join(""));break;case"adbox":case"url":g.iframe.init(l={},t,i,!1),l.src=g.url.ensureURL(e),l.name=l.name?["name="+l.name]:[],o&&l.name.push("clickTAG="+o),r&&l.name.push("viewTAG="+r),l.name=l.name.join("&"),u=g.iframe.createHTML(l);break;case"js":case"extend":u=["<",'script>window.clickTAG="'+o+'";window.viewTAG="'+r+'";</',"script>","<",'script charset="utf-8" src="',g.url.ensureURL(e),'"></',"script>"].join("");break;default:u=["<",'script>window.clickTAG="'+o+'";window.viewTAG="'+r+'";</',"script>",e.replace(/\\x3c/g,"<").replace(/\\x3e/g,">")].join("")}c.push(u)}return c.join(" ")}},g.sandbox=g.sandbox||(s=0,{create:function(e,t,n,i,a){var o="sinaadtk_sandbox_id_"+s++;(a=a||{}).sinaadToolkitSandboxId=o,t+=g.isNumber(t)?"px":"",n+=g.isNumber(n)?"px":"";var r={};r.adTypeTurning=a.sinaads_ad_TypeTurning,g.iframe.init(r,t,n,0),r.src="javascript:'<html><body style=background:transparent;></body></html>'",r.id=o,r.style="float:left;",e.innerHTML=g.iframe.createHTML(r),a=f(a),g.iframe.fill(document.getElementById(o),['<!doctype html><html><body style="background:transparent">',"<","script>",a,"</","script>",i,"</body></html>"].join(""))}})}(window),function(f,i,h){"use strict";function t(e){this.id=(e=e||{}).uid||"sinaadToolkitBox"+t.uid++,this.className=e.className||"sinaad-toolkit-box",this.position=this._parsePosition(e.position),this.width=e.width||100,this.height=e.height||100,this.follow=e.follow||0,this.zIndex=e.zIndex||99999,this.autoShow=void 0===e.autoShow?0:e.autoShow,this.minViewportWidth=e.minViewportWidth||0,this.useFix=this.follow&&h.browser.isSupportFixed?1:0;e=i.createElement("div");e.id=this.id,e.className=this.className,e.style.cssText=["position:"+(this.useFix?"fixed":"absolute"),"width:"+this.width+"px","height:"+this.height+"px","z-index:"+this.zIndex,"display:"+(this.autoShow?"block":"none")].join(";"),i.body.insertBefore(e,i.body.firstChild),this.main=e,this.resetPositionHandler=this._getResetPositionHandler(),h.event.on(f,"resize",this.resetPositionHandler),this.follow&&!h.browser.isSupportFixed&&h.event.on(f,"scroll",this.resetPositionHandler),this.setPosition()}t.uid=0,t.prototype={_parseStringPosition:function(e){var t={},e=(e=(e||"").match(/^([a-zA-Z]+)*([+|-]*\d+)*(?:px)*\s+([a-zA-Z]+)*([+|-]*\d+)*(?:px)*$/))||[];return t.pos=[e[1]||"left",e[3]||"top"],t.offset=[e[2]?parseInt(e[2],10):0,e[4]?parseInt(e[4],10):0],t},_parsePosition:function(e){var t={},n=[];return"string"==typeof e?(t.of=f,t.at=e):(t.of=(e=e||{}).of||f,t.at=e.at,t.my=e.my),h.array.each(t.of,function(e){n.push("string"==typeof e?"body"===e?i.body:"window"===e?f:i.getElementById(e):e||f)}),t.of=n,t.at=this._parseStringPosition(t.at),t.my=this._parseStringPosition(t.my||t.at.pos.join(" ")),t},_getResetPositionHandler:function(){var e,t=this;return function(){e&&clearTimeout(e),e=setTimeout(function(){t.setPosition()},100)}},_getSize:function(e){return f===e||i.body===e?[h.page.getViewWidth(),h.page.getViewHeight()]:[parseInt(h.dom.getStyle(e,"width"),10),parseInt(h.dom.getStyle(e,"height"),10)]},_getPosition:function(e){return f===e||i.body===e?[0,0]:[(e=h.dom.getPosition(e)).left,e.top]},getMain:function(){return this.main},show:function(){this.getMain().style.display="block"},hide:function(){this.getMain().style.display="none"},remove:function(){try{this.main.innerHTML="",this.main.parentNode.removeChild(this.main),this.main=null}catch(e){}},setPosition:function(){var e=this.getMain(),t=this.position,n=t.of,i=t.at,a=t.my,o=this._getSize(n[0]),r=this._getPosition(n[0]),s=n[1]?this._getSize(n[1]):o,d=n[1]?this._getPosition(n[1]):r,l=this._getSize(e),t=h.page.getViewWidth(),c=Math.min(f===n[0]&&this.minViewportWidth?t/2-this.minViewportWidth/2:0,0),u=r[0]+a.offset[0]+i.offset[0]+(this.follow&&!h.browser.isSupportFixed?h.page.getScrollLeft():0);switch(a.pos[0]){case"center":u-=l[0]/2;break;case"right":u-=l[0]+c;break;default:u+=c}switch(i.pos[0]){case"center":u+=o[0]/2;break;case"right":u+=o[0];break;default:u+=0}var p=d[1]+a.offset[1]+i.offset[1]+(this.follow&&!h.browser.isSupportFixed?h.page.getScrollTop():0);switch(a.pos[1]){case"center":p-=l[1]/2;break;case"bottom":p-=l[1];break;default:p+=0}switch(i.pos[1]){case"center":p+=s[1]/2;break;case"bottom":p+=s[1];break;default:p+=0}e.style.left=u+"px",e.style.top=p+"px"}},h.Box=h.Box||t}(window,document,window.sinaadToolkit),function(e,t){"use strict";function n(e){this.uid=e||"fc-uid"+(+new Date).toString(36),this.list={}}e.FrequenceController||(n.prototype={has:function(e){return this.list[e]},register:function(e,t){t&&(this.list[e]=t)},enable:function(e){this.has(e)&&t.storage.remove(this.uid+e+"_disabled")},disable:function(e){this.has(e)&&t.storage.set(this.uid+e+"_disabled",1,1e3*this.list[e])},isDisabled:function(e){return t.storage.get(this.uid+e+"_disabled")}},e.FrequenceController=n)}((window,window.sinaadToolkit||window),window.sinaadToolkit),function(e){"use strict";function o(e){for(var t,n,i=0;t=e.order[i++];)!function(e,t){for(var n,i=0;(n=e.order[i++])&&n!==t;)if(e._state[n]!==r.DONE)return!1;return!e._state[t]||e._state[t]===r.READY}(e,t)||(e._state[t]=r.DOING,e._doneTimeoutTimer[t]=setTimeout(function(e,t){return function(){e.done(t)}}(e,t),e._timeout),"function"==typeof(n=e._callback[t])?n.apply(e._callbackThis[t]||null,e._callbackArgs[t]||[]):e.done(t));a.allDone(e)&&e._checkTimer&&clearInterval(e._checkTimer)}function a(e,t){var n,i,t=t||{},a=0;for(this._uid="oc-uid"+(+new Date).toString(36),this._state={},this._callback={},this._callbackArgs={},this._callbackThis={},this._doneTimeoutTimer={},this._frequence=t.frequence||s,this._timeout=t.timeout||d,this.order=e||[];n=this.order[a++];)this._state[n]=r.INIT;this._checkTimer=setInterval(function(){o(i)},(i=this)._frequence)}var r,s,d;e.OrderController||(r={INIT:1,READY:2,DOING:3,DONE:4},s=1e3,d=3e4,a.allDone=function(e){for(var t,n=0;t=e.order[n++];)if(e._state[t]!==r.DONE)return!1;return!0},a.prototype={has:function(e){return-1!==("|"+this.order.join("|")+"|").indexOf("|"+e+"|")},ready:function(e,t,n,i){this.has(e)?(this._state[e]=r.READY,this._callback[e]=t,this._callbackArgs[e]=n,this._callbackThis[e]=i):t.apply(i||null,n||[])},done:function(e){this.has(e)&&(this._state[e]=r.DONE,this._doneTimeoutTimer[e]&&clearTimeout(this._doneTimeoutTimer[e]),delete this._callback[e],delete this._callbackArgs[e],delete this._callbackThis[e],delete this._doneTimeoutTimer[e])}},e.OrderController=a)}((window,window.sinaadToolkit||window)),window._sinaadsIsInited=window._sinaadsIsInited||function(v,m){"use strict";m.debug("sinaads:Init sinaads!");var h=1,i="sinaads_"+m.hash(v.location.host.split(".")[0]+v.location.pathname.substring(0,v.location.pathname.lastIndexOf("/"))),b="//d00.sina.com.cn/a.gif",l=m.RESOURCE_URL+"/release/plus/Media.js",w=1e3*parseInt(v._SINAADS_CONF_SAX_REQUEST_TIMEOUT||20,10),e=v._SINAADS_CONF_PAGE_MEDIA_ORDER||[],t=1e3*(v._SINAADS_CONF_PAGE_MEDIA_DONE_TIMEOUT||40),g={PDPS000000046013:1,PDPS000000046012:1,PDPS000000016990:1,PDPS000000042133:1,PDPS000000042134:1},y=m.browser.ie<7?m.RESOURCE_URL+"/release/gx_logo.gif":m.RESOURCE_URL+"/release/gx_logo.png",_={},x={},s={PDPS000000010399:"PDPS000000010399",PDPS000000010400:"PDPS000000010400",PDPS000000010403:"PDPS000000010403",PDPS000000010419:"PDPS000000010419",PDPS000000010420:"PDPS000000010420",PDPS000000010421:"PDPS000000010421",PDPS000000010426:"PDPS000000010426",PDPS000000010430:"PDPS000000010430",PDPS000000010423:"PDPS000000010423",PDPS000000010428:"PDPS000000010428",PDPS000000010398:"PDPS000000010398",PDPS000000010401:"PDPS000000010401",PDPS000000010402:"PDPS000000010402",PDPS000000010404:"PDPS000000010404",PDPS000000010410:"PDPS000000010410",PDPS000000010418:"PDPS000000010418",PDPS000000010422:"PDPS000000010422",PDPS000000010427:"PDPS000000010427",PDPS000000010429:"PDPS000000010429",PDPS000000010417:"PDPS000000010417",PDPS000000010424:"PDPS000000010424",PDPS000000010425:"PDPS000000010425",PDPS000000010434:"PDPS000000010434",PDPS000000010440:"PDPS000000010440",PDPS000000010432:"PDPS000000010432",PDPS000000010433:"PDPS000000010433",PDPS000000010435:"PDPS000000010435",PDPS000000010437:"PDPS000000010437",PDPS000000010438:"PDPS000000010438",PDPS000000010439:"PDPS000000010439",PDPS000000010441:"PDPS000000010441",PDPS000000010436:"PDPS000000010436"},S="|PDPS000000042133|PDPS000000042138|PDPS000000036614|PDPS000000056553|PDPS000000056018|PDPS000000054727|PDPS000000055012|PDPS000000046103|PDPS000000056105|PDPS000000056034|PDPS000000065716|PDPS000000054727|PDPS000000065715|PDPS000000065717|PDPS000000055137|PDPS000000016990|PDPS000000043762|PDPS000000065755|PDPS000000058601|PDPS000000054727|PDPS000000043762|PDPS000000016990|PDPS000000055137|PDPS000000058184|PDPS000000058185|PDPS000000058601|PDPS000000054492|PDPS000000058042|PDPS000000054491|PDPS000000042135|PDPS000000056985|PDPS000000005425|PDPS000000057534|PDPS000000055148|PDPS000000056026|PDPS000000047015|PDPS000000004439|PDPS000000057947|PDPS000000005474|PDPS000000043762|PDPS000000047200|PDPS000000025256|PDPS000000045825|PDPS000000005494|PDPS000000049483|PDPS000000058096|PDPS000000051607|PDPS000000005458|",k="http://sax.sina.com.cn/click?type=7&t=UERQUzAwMDAwMDA0NjE1NA%3D%3D&url=http%3A%2F%2Fwww.sina.com.cn%2F%23a-register&sign=a70e1db1ea57de4f&id=10",n=document.createElement("script");n.src="https://d"+Math.floor(0+10*Math.random())+".sina.com.cn/litong/zhitou/wenjing28/js/postMan.js",document.head.insertBefore(n,document.head.childNodes[0]);var c,o,d,r,u,p,f,P,T,D,C,A,M,R,j,E,I,O,N,L,U,F,B,n={frequenceController:new m.FrequenceController(i),orderController:new m.OrderController(e,{timeout:t})},e=function(p,t,n){function c(e){e=n+(t.frequenceController.has(e)?e:"");return i[e]||(i[e]=parseInt(p.storage.get(e),10)||p.rand(1,100),p.storage.set(e,1e3<i[e]?1:++i[e],2592e6)),i[e]}function u(){var e,t=v.sinaadsExParams||{},n=[];for(e in t.am=t.am||"{ds:"+p.systemInfo.screenSize+",fv:"+p.systemInfo.flashVersion+",ov:"+p.systemInfo.platform+"}",t)n.push(e+"="+encodeURIComponent(t[e]));return n.join("&")}function f(r){var t,n={1:"http://d3.sina.com.cn/litong/zhitou/union/tanx.html?pid=",2:"http://d3.sina.com.cn/litong/zhitou/union/google.html?pid=",3:"http://d3.sina.com.cn/litong/zhitou/union/yihaodian.html?pid=",4:"http://d3.sina.com.cn/litong/zhitou/union/baidu.html?pid=",5:"http://js.miaozhen.com/mzad_iframe.html?_srv=MZHKY&l="},i=r.engineType;return!r.content&&r.value&&(p.debug("sinaads:Old data format, need adapter(pdps)",r.id),t=r.size.split("*"),r.content=[],p.array.each(r.value,function(e){"network"===i&&(e.content={src:[n[""+e.manageType]+e.content+"&w="+t[0]+"&h="+t[1]],type:["url"]}),"dsp"===i&&17!==parseInt(e.manageType,10)&&(e.content={src:[e.content],type:["html"]}),r.content.push(e.content)}),delete r.value),r.content=function(e){var i=[];p.array.each(e,function(e,t){var n=!0;p.array.each(e.src,function(e){if(p.string.trim(e))return n=!1}),n?p.debug("sinaads: The"+t+" Ad Content src is null, via "+r.id):i.push(e)});for(var t=0;t<i.length;t++)for(var n=i[t].src,a=i[t].type,o=0;o<n.length;o++)switch(a[o]){case"url":case"js":case"image":case"flash":case"video":n[o]=n[o].replace(/^http:|https:/,"")}return i}(r.content),p.array.each(r.content,function(e,t){var n=p.array.ensureArray(e.type);p.array.ensureArray(e.link),p.array.each(e.src,function(e,t){n[t]=p.ad.getTypeBySrc(e,n[t])}),r.content[t]=e}),r.type={lmt:"stream",kl:"couplet",sc:"videoWindow",hzh:"embed",jx:"embed",dtl:"embed",an:"embed",dan:"embed",xan:"embed",wzl:"textlink",ztwzl:"zhitoutextlink",qp:"fullscreen",fp:"embed",dl:"float",tip:"tip",bt:"bp",sx:"follow",kzdl:"coupletExt",fc1:"pop",kzan:"skyscraper",span:"leftsuspend",tuigraph:"embed",dflmt:"bottomstream",bj:"bg",motu:"magicmap",sxan:"followbutton",fd:"feed"}[r.type]||r.type||"embed","tl"===r.type&&(r.type=1<r.content.length&&"win"===r.content[0].ad_type?"shopWindow":"embed"),"embed"===r.type&&r.template&&r.logo&&(r.type="shop"),r}function d(e){var t=p.isArray(e)?e.join(","):e;return o[t]||(o[t]=0),o[t]++,function(e){for(var t in e=p.isArray(e)?e.join(","):e,a)if(-1!==(","+t+",").indexOf(","+e+","))return a[t];return}(e)||(a[t]=l(e))}function l(e,t){var a=p.now(),o=new p.Deferred,r=[],n=!1,s=[];if(p.array.each(e,function(e){(n=!!m[e])?p.debug("sinaads:current pdps data is loaded, render immedietly. ",e,m[e]):s.push(e)}),n)o.resolve();else{var i=function(){function e(){p.cookie.remove("sinaads_entry",{domain:".sina.com.cn",path:"/"}),p.storage.remove("sinaads_entry")}if(!h){var t,n,i,a,o,r=document.getElementsByTagName("head")[0].getElementsByTagName("meta"),s={},d=r.length,l=0;for(h={},s.keywords=[];l<d;l++)(n=r[l]).name&&(t=n.name.toLowerCase(),n=p.string.trim(n.content),s[t]||(s[t]=[]),n&&s[t].push(n));for(a in s)0===a.indexOf("sinaads_")&&(t=a.replace("sinaads_",""),h[t]=s[a].join(",")||s[t].join(","));(i=p.cookie.get("sinaads_entry")||p.storage.get("sinaads_entry"))&&(h.entry=i,o=setTimeout(e,5e3),p.event.on(v,"beforeunload",function(){o&&clearTimeout(o),e()})),p.debug("sinaads:Targeting init,",h)}return h}();p.debug("sinaads:current pdps data is unload, load immedietly. "+s.join(),m);r=["rotate_count="+c(1<s.length?"":s[0]),"TIMESTAMP="+y.toString(36),"referral="+encodeURIComponent(p.url.top),"adunitid="+s.join(",")],e=(e=s.join(","),g[e]);e&&r.push(e);var d,e=u();for(d in e&&r.push(e),i)r.push("tg"+d+"="+encodeURIComponent(i[d]));var l=!1;t&&t.isFeed&&(l=!0,r.push("adunit_id="+s.join(","))),p.sio.jsonp(_(s.join(","),l)+"?"+r.join("&"),function(e){if("nodata"===e)p.debug("sinaads:"+s.join()+". No register in SAX. "),o.reject();else{p.debug("sinaads:request data ready. ",r,p.now(),p.now()-a,e);try{var t,n;l&&e[0]&&e[0].templateid&&(t=[],(n=JSON.parse(JSON.stringify(e)))[0].src=[n[0].img+""],n[0].link=[n[0].url],n[0].type=[""],n[0].origin_monitor=n[0].origin_monitor,t.push({content:n,id:n[0].pdps,size:"640*145",type:"fd"}),e={ad:t});var i=!1;p.array.each(e.ad,function(e){(e=f(e)).content instanceof Array&&0<e.content.length?(m[e.id]=e,i=!0):p.debug("sinaads:"+e.id+". cannot found data. ")}),p.array.each(e.mapUrl,function(e){p.debug("sinaads:data ready, send cookie mapping. "+e,r,p.now()),e&&p.sio.log(e,1)}),i?o.resolve():o.reject()}catch(e){console.error(e)}}},{timeout:w,onfailure:function(){p.error("sinaads:request timeout, via "+s.join()),p.sio.log(b+"?type=tp_pc_timeout&pos="+s.join(",")+"&ref="+encodeURIComponent(p.url.top)),o.reject()}})}return o}var h,m={},g={},y=p.now(),i={};v.getEnterTime=function(){return y};var _=function(){var a="//sax.sina.com.cn/newimpress";try{var e=p.cookie.get("SINAGLOBAL");"debug"!==p.mode&&(p.debug("sinaads: "+e+' is in gray test, use parseInt(sinaadToolkit.hash(sinaadToolkit.cookie.get("SINAGLOBAL")), 16) to check.'),a="https://sax.sina.com.cn/newimpress")}catch(e){}return function(e,t){var n=a;if(t){n="//sax.sina.com.cn/native/impress";try{var i=p.cookie.get("SINAGLOBAL");"debug"!==p.mode&&(p.debug("sinaads: "+i+' is in gray test, use parseInt(sinaadToolkit.hash(sinaadToolkit.cookie.get("SINAGLOBAL")), 16) to check.'),n="https://sax.sina.com.cn/native/impress")}catch(t){}return n}if(g[e])switch(g[e].split("&")[0]){case"previewtype=ea":p.debug("sinaads: "+e+" is fuyi server preview slot."),n="//amp.ad.sina.com.cn/ea/api/ideaScreen!preview.action";break;case"previewtype=ly":p.debug("sinaads: "+e+" is longyuan server preview slot."),n="//amp.ad.sina.com.cn/ly/api/ideaScreen!preview.action";break;default:p.debug("sinaads: "+e+" is common server preview slot."),n="//sax.sina.com.cn/preview"}return n}}(),a={},o={};return{init:function(e){m=v._sinaadsCacheData=v._sinaadsCacheData||{};var u=(((p.url.top.split("#")[1]||"").split("?")[0]||"")+"&"+((p.url.top.split("?")[1]||"").split("#")[0]||"")).replace(/</g,"").replace(/>/g,"").replace(/"/g,"").replace(/'/g,"");!function(){for(var e,t,n=u.split("&"),i={},a=["pdps","src","size"],o=0,r=n.length;o<r;o++)(t=n[o])&&(0===(t=t.split("="))[0].indexOf("sinaads_preview_")&&(e=t[0].replace("sinaads_preview_",""))&&t[1]&&!i[e]&&(i[e]=t[1],p.array.remove(a,e)));0===a.length&&(p.debug("sinaads:Ad Unit "+i.pdps+" is for preview only. ",i),m[i.pdps]={content:[{src:decodeURIComponent(i.src),link:(decodeURIComponent(i.link)||"").split("|"),monitor:(i.monitor||"").split("|"),pv:(i.pv||"").split("|"),type:(i.type||"").split("|")}],size:i.size,id:i.pdps,type:i.adtype||"embed",highlight:i.highlight||!1})}(),g=function(){for(var e,t=u.split("&"),n={},i=0,a=p.date.format(new Date,"yyyyMMddHH"),o="",r="",s="",d="",i=0,l=t.length;i<l;i++)if((e=t[i])&&("sinaads_server_preview"===(e=e.split("="))[0]&&e[1]&&(d=(e=decodeURIComponent(e[1]).split("|"))[0]||d,a=e[1]||a,o=e[2]||o,r=e[3]||r,s=e[4]||r,d))){var c=d.split("_")[0];switch(c){case"ly":case"ea":n[d=d.split("_")[1]]=[],n[d].push("previewtype="+c),n[d].push("pdps="+encodeURIComponent(d)),a&&n[d].push("date="+encodeURIComponent(a)),o&&n[d].push("tgip="+encodeURIComponent(o)),r&&n[d].push("deid="+encodeURIComponent(r)),s&&n[d].push("deaid="+encodeURIComponent(s)),n[d]=n[d].join("&");break;default:n[d]=[],n[d].push("previewtype=default"),a&&n[d].push("date="+encodeURIComponent(a)),o&&n[d].push("tgip="+encodeURIComponent(o)),r&&n[d].push("deid="+encodeURIComponent(r)),n[d]=n[d].join("&")}}return n}();for(var t,n,i=[],a=v._SINAADS_CONF_PRELOAD||[],o=0,r=0;t=a[o++];){for(i=[],r=0;n=t[r++];)g[n]||i.push(n);0<i.length&&(p.debug("sinaads:Data preload of bulk requests. "+i.join(",")),d(i))}var s=v._SINAADS_CONF_GROUP||[];0<s.length?l(s).then(e):e()},request:l,getSeed:c,add:function(e,t){m[e]=t},get:function(e){if(e)for(var t=e.split(","),n=0,i=t.length;n<i;n++)if((e=t[n])&&m[e]&&m[e].content)return m[e];return m},getExParamsQueryString:u}}(m,n,i),z={render:function e(t,n,i,a,o,r){var s,d=c[t];(s="function"==typeof d?d(n,i,a,o,r):s)&&s.type!==t&&e(s.type,n,i,a,s.content,r)},register:function(e,t){c[e]||(c[e]=t)},handlerMap:c=v.sinaadsRenderHandler||{}};function a(e,t,n,i,a){var o=a.sinaads_ad_tpl||"",a=a.sinaads_ad_pdps,r=[];s[a]||r.push('<i style="font-style:normal;">骞垮憡:</i>'),E.array.each(i,function(e,t){r.push(E.ad.createHTML(e.type,e.src,0,0,e.link,e.origin_monitor,e.pv,E.isFunction(o)?o(t,e):o))}),e.style.cssText+=";text-decoration:none",e.innerHTML=r.join("")}m.event.on(v,"message",function(e){if("http://g.alicdn.com"===e.origin){e=m.json.parse(e.data);1!==Number(e.overtime_state)&&0!==e.content.src.length?function(e){var t,n,i,a=e.sinaads_ad_type,o=Number(e.sinaads_ad_width),r=Number(e.sinaads_ad_height),s=e.sinaads_ad_pdps,d=e.sinaads_page_url,l=Number(e.sinaads_uid),c=e.ad_id,u=(new Date).getTime();"couplet"===a&&(i=e.sinaads_couple_top,n=[{ad_id:c,link:[e.content.link[0]],src:[e.content.src[0],e.content.src[1]||e.content.src[0],e.content.src[2]||e.content.src[1]||e.content.src[0]],type:[e.content.type[0],e.content.type[1]||e.content.type[0],e.content.type[2]||e.content.type[1]||e.content.type[0]],origin_monitor:[]}],i={sinaads_ad_width:o,sinaads_ad_height:r,sinaads_ad_pdps:s,sinaads_couple_top:i,sinaads_ad_status:"done",sinaads_page_url:d,sinaads_uid:l,timestamp:u});for(var p=document.getElementsByTagName("ins"),f=0;f<p.length;f++)p[f].getAttribute("data-ad-pdps")===s&&(t=p[f]);z.render(a,t,o,r,n,i)}(e):v.sinaadsROC.done(e.sinaads_ad_pdps)}}),B=m,z.register("bp",function(e,t,n,i,a){B.debug("sinaads:Rendering bp."),i=i[0],e.style.cssText="position:absolute;top:-9999px";e=[i.type[0],i.src[0]?encodeURIComponent(i.src[0]):"",i.link[0]?encodeURIComponent(i.link[0]):"",t,n],B.monitor.stringify(i.origin_monitor);e.join("${}").length+"".length<2e3&&e.push("");B.monitor.stringify(i.pv);e.join("${}").length+"".length<2e3&&e.push(""),v.open("http://d1.sina.com.cn/litong/zhitou/sinaads/release/pbv5.html?"+e.join("${}"),"sinaads_bp_"+a.sinaads_ad_pdps,"width="+t+",height="+n);try{B.debug("Media: In building bp complete!"),v.sinaadsROC.bp=a.sinaads_ad_pdps,v.sinaadsROC.done(v.sinaadsROC.bp)}catch(e){}}),F=m,(t=z).register("couplet",function(e,t,n,i,a){F.debug("sinaads:Rendering couplet.");var o=l||"./src/plus/CoupletMedia.js";if(v.sinaadsROC.couplet=a.sinaads_ad_pdps,i=i[0],v.sinaadsCoupletClickTAG=F.monitor.stringify(F.array.ensureArray(i.origin_monitor)),v.sinaadsCoupletViewTAG=F.monitor.stringify(F.array.ensureArray(i.pv)),e.style.cssText="position:absolute;top:-9999px",1!==i.src.length||"js"!==i.type[0]&&"html"!==i.type[0]&&"postmessage"!==i.type[0]){var r={pdps:a.sinaads_ad_pdps,src:i.src,type:i.type,link:i.link,mainWidth:a.sinaads_ad_main_width,mainHeight:a.sinaads_ad_main_height,top:a.sinaads_couple_top||0,monitor:i.origin_monitor||[],pv:i.pv||[],sideWidth:a.sinaads_ad_side_width,sideHeight:a.sinaads_ad_side_height};F.CoupletMediaData?new F.CoupletMedia(r):F.sio.loadScript(o,function(){new F.CoupletMedia(r)})}else switch(i.type[0]){case"js":F.sio.loadScript(i.src[0],null,{charset:"gb2312"});break;case"html":F.dom.fill(e,i.src[0]);break;case"postmessage":if(F.browser.ie<=7)return void v.sinaadsROC.done(a.sinaads_ad_pdps);var s={sinaads_ad_pdps:a.sinaads_ad_pdps,sinaads_ad_type:"couplet",sinaads_page_url:a.sinaads_page_url,sinaads_couple_top:a.sinaads_couple_top,sinaads_ad_width:a.sinaads_ad_width,sinaads_ad_height:a.sinaads_ad_height,sinaads_uid:a.sinaads_uid,ad_id:i.ad_id},d=F.json.stringify(s),s=document.createElement("iframe");s.width="0",s.height="0",s.src=i.src[0],s.name=d,e.appendChild(s)}}),t.register("coupletExt",function(e,t,n,i,a){var o=l||F.RESOURCE_URL+"/src/plus/CoupletExtMedia.js";v.sinaadsCoupletExtClickTAG=F.monitor.stringify(F.array.ensureArray(i.origin_monitor)),v.sinaadsCoupletExtViewTAG=F.monitor.stringify(F.array.ensureArray(i.pv)),i=i[0],e.style.cssText="position:absolute;top:-9999px";var r={src:i.src,type:i.type,link:i.link,width:t,height:n,offsettop:a.sinaads_coupletext_offsettop||100,expandpos:a.sinaads_coupletext_expandpos||1200,smallsize:a.sinaads_coupletext_smallsize,bigsize:a.sinaads_coupletext_bigsize,monitor:i.origin_monitor||[],pv:i.pv||[]};F.CoupletExtMediaData?new F.CoupletExtMedia(r):F.sio.loadScript(o,function(){new F.CoupletExtMedia(r)})}),U=m,z.register("embed",function(e,t,n,i,a){i=(i=U.array.ensureArray(i))[0];var o,r=a.sinaads_uid,s=i.type||"",d=i.link||"",l=i.src||"",c=a.sinaads_ad_pdps,u=a.sinaads_ad_tpl||"",p=i.adsTypeTurning&&i.adsTypeTurning||!1;!a.sinaads_ad_fullview||"flash"!==s[0]&&"image"!==s[0]?(t+="px",n+="px"):(t="100%",n="auto"),e.style.cssText+=";display:block;overflow:hidden;text-decoration:none;",e.innerHTML='<ins style="text-decoration:none;margin:0px auto;width:'+t+';display:block;position:relative;overflow:hidden;"></ins>';var f,h,a=document.createElement("div");if(a.style.cssText='width:26px;height:13px;position:absolute;right:1px;bottom:1px;z-index:99;background:url("//d2.sina.com.cn/litong/zhitou/sinaads/release/ad_logo_update_IAB.gif") no-repeat',e=e.getElementsByTagName("ins")[0],o=l?U.ad.createHTML(s,l,t,n,d,i.origin_monitor,i.pv,U.isFunction(u)?u(0,i):u):"","ea"===function(e){var t={};switch((e=(e||"").split("_"))[0].toLowerCase()){case"sina":t.type="sina",t.id=e[1]||"";break;case"dsp":17===parseInt(e[1],10)?t.type="ea":t.type=e[1]||"",t.id=e[2]||"";break;case"bottom":t.type="bottom",t.id=e[1]||"";break;default:t.type="unknow",t.id=e[1]||""}return t}(i.ad_id).type&&g[c]&&(e.style.position="relative",o+='<a target="_blank" href="http://amp.ad.sina.com.cn/ea/privacy.html" style="position:absolute;left:0;top:0;z-index:20;"><img src="'+y+'" width="18" height="18" border="0"></a>'),h=l,!_[f=c]&&-1===h[0].indexOf("x.jd.com")&&x[f]&&(o+='<a target="_blank" href="javascript:;" style="position:absolute;'+{lb:"left:0;bottom:0",lt:"left:0;top:0",rt:"right:0;top:0",rb:"right:0;bottom:0"}[i=x[c]]+';z-index:20;"><img src="'+(i=(i=i)||"lb",m.browser.ie<7?m.RESOURCE_URL+"/release/ad_logo_"+i+".gif":m.RESOURCE_URL+"/release/ad_logo_"+i+".png")+'" width="30" height="16" border="0"></a>'),-1!==S.indexOf("|"+c+"|")&&(o+='<a target="_blank" style="position:absolute;z-index:-999;left:0;top:0;" href="'+k+"&pdps="+c+"&csits="+U.now()+'" data-link="'+k+"&pdps="+c+"&csits="+U.now()+'" onmousedown="return sinaadToolkit.url.fortp(this, event);"></a>'),u)e.innerHTML=o,e.appendChild(a);else switch(s[0]){case"text":case"image":case"url":case"adbox":case"flash":U.swf.hackAutoPlay(e,o);break;default:U.sandbox.create(e,t,n,o,{sinaads_uid:r,sinaads_ad_pdps:c,sinaads_ad_width:t,sinaads_ad_height:n,sinaads_ad_TypeTurning:p})}("image"===s[0]||"flash"===s[0]||0<=l[0].indexOf("//d3.sina.com.cn/litong/zhitou/sinaads/release/picshow_new.swf"))&&e.appendChild(a),"extend"!==s[0]&&v.sinaadsROC.done(c)}),L=m,z.register("float",function(e,t,n,i,a){L.debug("sinaads:Rendering float.");var o,r=l||"./src/plus/FloatMedia.js";v.sinaadsROC.float=a.sinaads_ad_pdps,i=i[0],v.sinaadsFloatClickTAG=L.monitor.stringify(L.array.ensureArray(i.origin_monitor)),v.sinaadsFloatViewTAG=L.monitor.stringify(L.array.ensureArray(i.pv)),e.style.cssText="position:absolute;top:-99999px",1===i.src.length&&"js"===i.type[0]?(L.sio.loadScript(i.src[0],null,{charset:"gb2312"}),v.sinaadsROC.done(v.sinaadsROC.float)):(o={type:i.type,src:i.src,top:a.sinaads_float_top||0,monitor:i.origin_monitor||[],pv:i.pv||[],link:i.link,sideWidth:t,sideHeight:n,pdps:a.sinaads_ad_pdps,contentWidth:a.sinaads_ad_contentWidth,follow:a.sinaads_ad_follow||0,showPos:a.sinaads_float_show_pos},L.FloatMedia?new L.FloatMedia(o):L.sio.loadScript(r,function(){new L.FloatMedia(o)}))}),N=m,z.register("follow",function(e,t,n,i,a){var o=l||"./src/plus/FollowMedia.js";i=i[0],v.sinaadsFollowClickTAG=N.monitor.stringify(N.array.ensureArray(i.origin_monitor)),v.sinaadsFollowViewTAG=N.monitor.stringify(N.array.ensureArray(i.pv));var r={main:{width:t,height:n,src:i.src[0]||"",type:i.type[0]||"",link:i.link[0]||"",top:a.sinaads_follow_top||0},mini:{src:i.src[1]||"",type:i.type[1]||"",link:i.link[1]||i.link[0]||"",top:a.sinaads_follow_mini_top||"bottom"},monitor:i.origin_monitor||[],pv:i.pv||[],duration:a.sinaads_ad_duration||5};N.FollowMedia?new N.FollowMedia(r):N.sio.loadScript(o,function(){new N.FollowMedia(r)})}),O=m,z.register("fullscreen",function(e,t,n,i,a){O.debug("sinaads:Rendering fullscreen");var o=l||"./src/plus/FullscreenMedia.js";switch(v.sinaadsROC.fullscreen=a.sinaads_ad_pdps,i=i[0],v.sinaadsFullscreenClickTAG=O.monitor.stringify(O.array.ensureArray(i.origin_monitor)),v.sinaadsFullscreenViewTAG=O.monitor.stringify(O.array.ensureArray(i.pv)),e.style.cssText="position:absolute;top:-9999px",v.sinaadsFullscreenMonitor=i.origin_monitor||[],i.type[0]){case"js":O.sio.loadScript(i.src[0],null,{charset:"gb2312"});break;case"html":O.dom.fill(e,i.src[0]);break;default:var r={pdps:a.sinaads_ad_pdps,type:i.type[0]||"",src:i.src[0]||"",link:i.link[0]||"",monitor:i.origin_monitor||[],pv:i.pv||[],width:t,height:n,hasClose:a.sinaads_fullscreen_close||("flash"===i.type[0]?1:0)};O.FullscreenMedia?new O.FullscreenMedia(r):O.sio.loadScript(o,function(){new O.FullscreenMedia(r)})}}),I=m,z.register("stream",function(e,t,n,i,a){I.debug("sinaads:Rendering stream.");var o=l||"./src/plus/StreamMedia.js";if(v.sinaadsROC.stream=a.sinaads_ad_pdps,i=i[0],e.style.cssText="position:absolute;top:-9999px",v.sinaadsStreamMonitor=v.sinaadsStreamMonitor&&v.sinaadsStreamMonitor.join("")?v.sinaadsStreamMonitor:i.origin_monitor||[],v.sinaadsStreamClickTAG=v.sinaadsStreamClickTAG||I.monitor.stringify(I.array.ensureArray(i.origin_monitor)),v.sinaadsStreamViewTAG=v.sinaadsStreamViewTAG||I.monitor.stringify(I.array.ensureArray(i.pv)),1===i.src.length){var r=document.createElement("div");switch(r.id="SteamMediaWrap",document.body.insertBefore(r,document.body.firstChild),i.type[0]){case"js":I.sio.loadScript(i.src[0],null,{charset:"gb2312"});break;case"html":I.dom.fill(e,i.src[0])}}else{var s={main:{type:i.type[0]||"flash",src:i.src[0]||"",link:i.link[0]||"",width:t,height:n,top:a.sinaads_top||0},mini:{src:i.src[1]||"",type:i.type[1]||"flash",link:i.link[1]||i.link[0]||""},pdps:a.sinaads_ad_pdps,monitor:i.origin_monitor||[],pv:i.pv||[]};I.StreamMedia?new I.StreamMedia(s):I.sio.loadScript(o,function(){new I.StreamMedia(s)})}}),E=m,(t=z).register("textlink",a),t.register("zhitoutextlink",a),j=m,z.register("tip",function(e,t,n,i,a){var o=l||"./src/plus/TipsMedia.js";i=i[0],v.sinaadsTipClickTAG=j.monitor.stringify(j.array.ensureArray(i.origin_monitor)),v.sinaadsTipViewTAG=j.monitor.stringify(j.array.ensureArray(i.pv));var r={width:t,height:n,src:i.src,type:i.type,link:i.link,monitor:i.origin_monitor||[],pv:i.pv||[],autoShow:1,top:a.sinaads_tip_top||0,left:a.sinaads_tip_left||0,zIndex:a.sinaads_ad_zindex||0};j.TipsMedia?new j.TipsMedia(e,r):j.sio.loadScript(o,function(){new j.TipsMedia(e,r)})}),R=m,z.register("turning",function(e,t,n,i,a){var o=[],r=[],s=i.length;return R.array.each(i,function(e){e.src&&e.src[0]&&o.push(e.src[0]),e.link&&e.link[0]&&r.push(e.link[0])}),{type:"embed",content:i=[{src:[R.swf.createHTML({id:"TurningMedia"+a.sinaads_uid,url:"//d3.sina.com.cn/litong/zhitou/sinaads/release/picshow_new.swf",width:t,height:n,wmode:"transparent",vars:{ad_num:s,pics:o.join("搂"),urls:r.join("搂"),monitor:[].join("搂"),pic_width:t-5,pic_height:n-5,flip_time:1e3*a.sinaads_turning_flip_duration||300,pause_time:1e3*a.sinaads_turning_flip_delay||4e3,wait_time:1e3*a.sinaads_turning_wait||1e3}})],type:["html"],link:[],adsTypeTurning:!0}]}}),M=m,z.register("videoWindow",function(e,t,n,i,a){M.debug("sinaads:Rendering videoWindow.");var o=l||"./src/plus/VideoWindowMedia.js";switch(v.sinaadsROC.videoWindow=a.sinaads_ad_pdps,i=i[0],e.style.cssText="position:absolute;top:-9999px",v.sinaadsVideoWindowMonitor=i.origin_monitor||[],v.sinaadsVideoWindowClickTAG=M.monitor.stringify(M.array.ensureArray(i.origin_monitor)),v.sinaadsVideoWindowViewTAG=M.monitor.stringify(M.array.ensureArray(i.pv)),i.type[0]){case"js":M.sio.loadScript(i.src[0],null,{charset:"gb2312"});break;case"html":M.dom.fill(e,i.src[0]);break;default:var r={pdps:a.sinaads_ad_pdps,src:i.src[0],type:i.type[0],width:t,height:n,link:i.link[0],monitor:i.origin_monitor||[],pv:i.pv||[],zIndex:a.sinaads_ad_zindex};M.VideoWindowMedia?new M.VideoWindowMedia(r):M.sio.loadScript(o,function(){new M.VideoWindowMedia(r)})}}),A=m,z.register("bg",function(e,t,n,i,a){A.debug("sinaads:Rendering bp.");var o=l||"./src/plus/BgMedia.js";i=i[0],v.sinaadsROC.bg=a.sinaads_ad_pdps,v.sinaadsBgClickTAG=A.monitor.stringify(A.array.ensureArray(i.origin_monitor)),v.sinaadsBgViewTAG=A.monitor.stringify(A.array.ensureArray(i.pv));var r={pdps:a.sinaads_ad_pdps,src:i.src,type:i.type,link:i.link,width:t||1600,height:n||a.sinaads_bg_height||800,midWidth:a.sinaads_bg_midWidth||1e3,headHeight:a.sinaads_bg_headHeight||80,top:void 0!==a.sinaads_bg_top?a.sinaads_bg_top:46,asideClickable:a.sinaads_bg_asideClick,monitor:i.origin_monitor||[],pv:i.pv||[]};A.BgMedia?new A.BgMedia(r):A.sio.loadScript(o,function(){new A.BgMedia(r)})}),C=m,z.register("pop",function(e,t,n,i,a){C.debug("sinaads:Rendering pop.");var o,r=l||"./src/plus/PopMedia.js";"js"===(v.sinaadsROC.pop=a.sinaads_ad_pdps,i=i[0],v.sinaadsPopClickTAG=C.monitor.stringify(C.array.ensureArray(i.origin_monitor)),v.sinaadsPopViewTAG=C.monitor.stringify(C.array.ensureArray(i.pv)),i.type[0])?C.sio.loadScript(i.src[0],null,{charset:"gb2312"}):(o={pdps:a.sinaads_ad_pdps,src:i.src,type:i.type,link:i.link,width:t||300,height:n||250,position:a.sinaads_pop_position||"center center",closetime:a.sinaads_pop_closetime||0,monitor:i.origin_monitor||[],pv:i.pv||[]},C.PopMedia?new C.PopMedia(e,o):C.sio.loadScript(r,function(){new C.PopMedia(e,o)}))}),D=m,z.register("skyscraper",function(e,t,n,i,a){var o=l||"./src/plus/SkyscraperMedia.js";i=i[0],v.sinaadsSkyscraperClickTAG=D.monitor.stringify(D.array.ensureArray(i.origin_monitor)),v.sinaadsSkyscraperViewTAG=D.monitor.stringify(D.array.ensureArray(i.pv));var r={main:{width:t,height:n,src:i.src[0]||"",type:i.type[0]||"",link:i.link[0]||""},mini:{src:i.src[1]||"",type:i.type[1]||"",link:i.link[1]||i.link[0]||"",width:a.sinaads_mini_width||t},monitor:i.origin_monitor,pv:i.pv,duration:a.sinaads_ad_duration||5,midWidth:a.sinaads_ss_mdWidth||950,top:a.sinaads_ss_top||0,left:a.sinaads_ss_left||0,pdps:a.sinaads_ad_pdps};D.SkyScraperMedia?new D.SkyScraperMedia(r):D.sio.loadScript(o,function(){new D.SkyScraperMedia(r)})}),T=m,z.register("leftsuspend",function(e,t,n,i,a){var o=l||"./src/plus/LeftSuspendMedia.js";i=i[0],v.sinaadsLeftsuspendClickTAG=T.monitor.stringify(T.array.ensureArray(i.origin_monitor)),v.sinaadsLeftsuspendViewTAG=T.monitor.stringify(T.array.ensureArray(i.pv));var r={width:t,height:n,src:i.src[0]||"",type:i.type[0]||"",link:i.link[0]||"",monitor:i.origin_monitor,pv:i.pv,cookieKey:a.sinaads_ls_cookieKey,root:a.sinaads_ls_root,pdps:a.sinaads_ad_pdps};v.sinaadToolkit.LeftSuspendMedia?new v.sinaadToolkit.LeftSuspendMedia(r):v.sinaadToolkit.sio.loadScript(o,function(){new v.sinaadToolkit.LeftSuspendMedia(r)})}),P=m,z.register("shopWindow",function(e,t,n,i,a){P.debug("sinaads:Rendering shopWindow.");var o=l||"./src/plus/ShopWindowMedia.js",r={pdps:a.sinaads_ad_pdps,width:t,height:n,content:i};P.ShopWindowMedia?new P.ShopWindowMedia(e,r):P.sio.loadScript(o,function(){new P.ShopWindowMedia(e,r)})}),f=(p=m).RESOURCE_URL+"/release/spec/fyrad.html",z.register("shop",function(e,t,n,i,a){i=p.array.ensureArray(i),e.style.cssText+=";display:block;overflow:hidden;text-decoration:none;",e.innerHTML='<ins style="text-decoration:none;margin:0px auto;display:block;overflow:hidden;width:'+t+"px;height:"+n+'px;"></ins>',e=e.getElementsByTagName("ins")[0];for(var o,r=[],s=0;o=i[s++];)r.push({exposal_url:o.link[0],image_url:o.src[0],ad_title:o.src[1],oldPrice:o.src[2],price:o.src[3]});var d=a.extForView||{},l=d.template,c=p.url.ensureURL(d.logo),d={};p.iframe.init(d,t,n,!1),d.src=f,d.name=["tid="+encodeURIComponent(l),"logo="+encodeURIComponent(c),"goods="+encodeURIComponent(p.json.stringify(r))].join("&"),e.innerHTML=p.iframe.createHTML(d);try{v.sinaadsROC.done(a.pdps)}catch(e){}}),u=m,z.register("bottomstream",function(e,t,n,i,a){u.debug("sinaads:Rendering bottomstream.");var o=l||"./src/plus/BottomStreamMedia.js";if(v.sinaadsROC.bottomstream=a.sinaads_ad_pdps,i=i[0],e.style.cssText="position:absolute;top:-9999px",v.sinaadsBottomStreamMonitor=i.origin_monitor||[],v.sinaadsBottomStreamClickTAG=u.monitor.stringify(u.array.ensureArray(i.origin_monitor)),v.sinaadsBottomStreamViewTAG=u.monitor.stringify(u.array.ensureArray(i.pv)),1===i.src.length){var r=document.createElement("div");switch(r.id="BottomSteamMediaWrap",document.body.insertBefore(r,document.body.firstChild),i.type[0]){case"js":u.sio.loadScript(i.src[0],null,{charset:"gb2312"});break;case"html":u.dom.fill(e,i.src[0])}}else{var s={main:{type:i.type[0]||"flash",src:i.src[0]||"",link:i.link[0]||"",width:t,height:n,top:a.sinaads_top||0},middle:{src:i.src[1]||"",type:i.type[1]||"flash",link:i.link[1]||i.link[0]||"",width:t},mini:{src:i.src[2]||"",type:i.type[2]||"flash",link:i.link[2]||i.link[0]||""},pdps:a.sinaads_ad_pdps,monitor:i.monitor};u.BottomStreamMedia?new u.BottomStreamMedia(s):u.sio.loadScript(o,function(){new u.BottomStreamMedia(s)})}}),r=m,z.register("magicmap",function(e,t,n,i,a){if(r.debug("sinaads:Rendering magicmap."),v.sinaadsROC.magicmap=a.sinaads_ad_pdps,i=i[0],v.sinaadsMagicMapMonitor=i.origin_monitor||[],v.sinaadsMagicMapClickTAG=r.monitor.stringify(r.array.ensureArray(i.origin_monitor)),v.sinaadsMagicMapViewTAG=r.monitor.stringify(r.array.ensureArray(i.pv)),1===i.src.length)switch(i.type[0]){case"js":r.sio.loadScript(i.src[0],null,{charset:"gb2312"});break;case"html":r.dom.fill(e,i.src[0])}}),d=m,z.register("followbutton",function(e,t,n,i,a){d.debug("sinaads:Rendering followbutton.");var o,r=l||"./src/plus/FollowButtonMedia.js";"js"===(v.sinaadsROC.followbutton=a.sinaads_ad_pdps,i=i[0],v.sinaadsFollowButtonClickTAG=d.monitor.stringify(d.array.ensureArray(i.origin_monitor)),v.sinaadsFollowButtonViewTAG=d.monitor.stringify(d.array.ensureArray(i.pv)),i.type[0])?d.sio.loadScript(i.src[0],null,{charset:"gb2312"}):(o={pdps:a.sinaads_ad_pdps,src:i.src,type:i.type,link:i.link,width:t||180,height:n||150,position:a.sinaads_followbutton_position||"center center",showPos:a.sinaads_followbutton_show_pos,monitor:i.origin_monitor||[],pv:i.pv||[]},d.FollowButtonMedia?new d.FollowButtonMedia(e,o):d.sio.loadScript(r,function(){new d.FollowButtonMedia(e,o)}))}),o=m,z.register("feed",function(e,t,n,i,a){function s(e){if("string"==typeof e){var t=e.lastIndexOf(".");return"js"===e.substring(t+1,t+3)}}function d(e){if("string"==typeof e){var t=e.lastIndexOf(".");return-1!=e.substring(t).indexOf("html")}}o.debug("sinaads:Rendering feed.");var l,c,u,i=function(e,t){var n="",i='<div  style="width:26px;height:13px;position:absolute;right:16px;bottom:16px;z-index:99;background:url(//d2.sina.com.cn/litong/zhitou/sinaads/release/ad_logo_update_IAB.gif) no-repeat;"></div>';if("02"!=e.adtype)return t;for(var a=0,o=e.pvmonitor.length;a<o;a++)(new Image).src=e.pvmonitor[a];switch(t=0,e.templateid&&(t=Number(e.templateid)),e.img&&(s(e.img)||d(e.img))&&(v.jsMotoType=s(e.img)?"js":"url",t=99),t){case 11:n=['<div class="xxl-card ty-card-type1 clearfix" data-info="'+e.info+'" data-cre="'+e.cre+'">','<div class="xxl-card-l">','<div class="xxl-card-thumb-w"><a href="'+e.url+'" target="_blank"><img src="'+e.img.u+'" alt="" class="xxl-card-thumb" width="150" height="100"></a></div>',"</div>",'<div style="margin-left:170px">','<h3 class="xxl-card-tt" style="padding-top:16px;"><a style="text-decoration-color:white;" href="'+e.url+'" target="_blank">'+e.title+"</a></h3>","</div>",i,"</div>"].join("");break;case 12:n=['<div class="xxl-card ty-card-type1 clearfix" data-info="'+e.info+'" data-cre="'+e.cre+'">','<div class="xxl-card-l">','<div class="xxl-card-thumb-w" style="width:310px;height:175px;"><a href="'+e.url+'" target="_blank"><img src="'+e.img.u+'" alt="" class="xxl-card-thumb" style="width:310px;height:175px;" width="310" height="175"><s class="ty-card-video"></s></a></div>',"</div>",'<div class="xxl-card-r" style="width: 320px; margin-left:310px;">','<h3 class="xxl-card-tt" style="padding-top:16px;padding-left: 20px;"><a style="text-decoration-color:white;" href="'+e.url+'" target="_blank">'+e.title+"</a></h3>","</div>",i,"</div>"].join("");break;case 13:n=['<div class="xxl-card ty-card-type3 clearfix" data-info="'+e.info+'" data-cre="'+e.cre+'">','<h3 class="xxl-card-tt"><a style="text-decoration-color:white;" href="'+e.url+'" target="_blank">'+e.title+"</a></h3>",'<div class="xxl-card-thumbs-w">','<div class="xxl-card-thumbs-c" style="vertical-align: middle;"><a href="'+e.url+'" target="_blank"><img width="150" height="100" src="'+e.images[0].u+'" alt="" class="xxl-card-thumb"></a></div>','<div class="xxl-card-thumbs-c" style="vertical-align: middle;"><a href="'+e.url+'" target="_blank"><img width="150" height="100" src="'+e.images[1].u+'" alt="" class="xxl-card-thumb"></a></div>','<div class="xxl-card-thumbs-c" style="vertical-align: middle;"><a href="'+e.url+'" target="_blank"><img width="150" height="100" src="'+e.images[2].u+'" alt=""  class="xxl-card-thumb"></a></div>','<div class="xxl-card-thumbs-c xxl-card-lastimg"><div class="xxl-card-thumb" style="cursor:pointer;"><a href="'+e.url+'" target="_blank" style="color:#868686;font-size: 20px; font-weight: bold;">鏇村绮惧僵</a></div></div>',"</div>",i,"</div>"].join("");break;case 14:n=['<div class="xxl-card ty-card-type1 clearfix" data-info="'+e.info+'" data-cre="'+e.cre+'">','<div class="xxl-card-l">','<div class="xxl-card-thumb-w" style="width: 310px;height: 155px;"><a href="'+e.url+'" target="_blank"><img src="'+e.img.u+'" alt="" class="xxl-card-thumb" style="width:310px;height:155px;" width="310" height="155"></a></div>',"</div>",'<div style="width:320px; margin-left:310px;">','<h3 class="xxl-card-tt" style="padding-top:16px;padding-left: 20px;"><a style="text-decoration-color:white;" href="'+e.url+'" target="_blank">'+e.title+"</a></h3>","</div>",i,"</div>"].join("");break;case 99:if((s(e.img)||d(e.img))&&(i='<div class="ins_ad_tag" style="display:none;width:26px;height:13px;position:absolute;right:16px;bottom:16px;z-index:99;background:url(//d2.sina.com.cn/litong/zhitou/sinaads/release/ad_logo_update_IAB.gif) no-repeat;"></div>',v.jsMotoSrc=e.img,v.jsMotoUuid="fake_div_"+(+new Date).toString(36),v.loadedJsMoto=!0,n='<div style="position: relative;width:100%;height:100%;"><div id="'+v.jsMotoUuid+'"></div>'+i+"</div>"),v.PDPSList)for(var a=0,r=v.PDPSList.length;a<r;a++)e.pdps==v.PDPSList[a]&&v.idList.push(v.jsMotoUuid)}return n}(i=i[0]);e.style.cssText="display:block;",e.innerHTML=i,l=v.jsMotoSrc,c=v.jsMotoUuid,u=v.loadedJsMoto,setTimeout(function(){try{var o,r=document.getElementById(c),s=v.jsMotoType;u&&r&&(o=document.getElementById(c),u=!1,r.setAttribute("class","xxl-card"),"undefined"!=typeof sinaadToolkit||sinaadTook(v),sinaadToolkit.ad.embed(o,s,"10","0",sinaadToolkit.ad.createHTML(s,l)),o.childNodes[0].onload=function(){for(var e,t,n,i=0,a=Tool.whiteList.length;i<a;i++)o.childNodes[0].parentNode.id==Tool.whiteList[i]&&Tool.postData(Tool.whiteList[i]);"url"!=s?(e=o.childNodes[0].contentWindow.document.body.scrollHeight,t=o.childNodes[0].contentWindow.document.body.scrollWidth,e<60?n=setTimeout(function(){e=o.childNodes[0].contentWindow.document.body.scrollHeight,o.childNodes[0].height=e,o.childNodes[0].width=t,e<60&&r.parent().css("display","none"),clearTimeout(n)},800):(o.childNodes[0].height=e,o.childNodes[0].width=t)):(o.childNodes[0].height=150,o.childNodes[0].width=640),o.style.height="100%",o.style.width="100%";try{o.parentElement.querySelector(".ins_ad_tag").style.display="block"}catch(e){console.error(e)}})}catch(e){console.error(e)}},100)});var H,G,V,W,q=(H=m,V=z,W=n,function(e){var t=e.element,n=e.params||{};if(t="string"==typeof t?document.getElementById(t):t){if(!$(t)&&!(t=t.id&&Y(t.id)))return void H.debug("sinaads:Rendering of this element has been done. Stop rendering.",t);if(!("innerHTML"in t))return void H.debug("sinaads:Cannot render this element.",t)}else if(!(t=Y()))return void H.debug("sinaads:Rendering of all elements in the queue is done.");t.setAttribute("data-ad-status","done"),n.sinaads_uid=h++;for(var i=t.attributes,a=i.length,o=0;o<a;o++){var r,s=i[o];/data-/.test(s.nodeName)&&(r=s.nodeName.replace("data","sinaads").replace(/-/g,"_"),n.hasOwnProperty(r)||(n[r]=s.value))}n.sinaads_page_url=H.url.top;var d=n.sinaads_ad_pdps;v._sinaadsCacheDom||(v._sinaadsCacheDom={}),v._sinaadsCacheDom[d]=t;var l,c,u,p,f=n.sinaads_ad_data,e=0;f&&(e=(f=H.array.ensureArray(f)).length<=1?0:G.getSeed(d)%f.length,G.add(d,f[e]),H.debug("sinaads: Use local data in count "+e)),W.frequenceController.register(d,n.sinaads_frequence||0),(!d||-1===S.indexOf("|"+d+"|")||(H.url.top,1))&&d&&!W.frequenceController.isDisabled(d)?G.request(d,n).done((u=t,p=n,function(){var e=p.sinaads_ad_delay;(e=e&&parseInt(e,10))?setTimeout(function(){X(u,p)},1e3*e):X(u,p)})).fail((l=t,c=n,function(){Z(l,c)})):Z(t,n)});function $(e){return/(^| )sinaads($| )/.test(e.className)&&"done"!==e.getAttribute("data-ad-status")}function Y(e){for(var t,n=document.getElementsByTagName("ins"),i=0,a=n.length,o=n[i];i<a;o=n[++i])if($(o)&&(!e&&(t=o,!/(^| )sinaads($| )/.test(t.className)||"async"!==t.getAttribute("data-ad-status"))||o.id===e))return o;return null}function K(e,t,l){if(!t)return H.debug("sinaads:"+l.sinaads_ad_pdps+", Cannot render this element because the data is unavilable."),0;var c=l.sinaads_ad_type||t.type,n=H.now(),i=t.size.split("*"),a=l.sinaads_ad_width||(l.sinaads_ad_width=Number(i[0]))||0,i=l.sinaads_ad_height||(l.sinaads_ad_height=Number(i[1]))||0,u=G.getExParamsQueryString();H.array.each(t.content,function(e,t){H.debug("sinaads:Processing the impression of the "+(t+1)+" creative of ad unit "+l.sinaads_ad_pdps),e.src=H.array.ensureArray(e.src),e.link=H.array.ensureArray(e.link),e.type=H.array.ensureArray(e.type);var n,i,a,o=[],r=[],s=e.pv;H.array.each(s,function(e,t){if(u&&e&&(-1!==e.indexOf("sax.sina.com.cn/view")||-1!==e.indexOf("sax.sina.com.cn/dsp/view"))&&(e+=(-1!==e.indexOf("?")?"&":"?")+u),s[t]=H.monitor.parseTpl(e,l),H.debug("sinaads:Recording the impression of ad unit "+l.sinaads_ad_pdps+" via url "+e),s[t])if("videoWindow"===c)setTimeout((n=s[t],function(){H.sio.log(n)}),1e3);else{if("magicmap"===c)return!1;H.sio.log(s[t])}var n}),H.array.each(e.monitor,function(e){e&&r.push(H.monitor.parseTpl(e,l))}),H.array.each(e.origin_monitor,function(e){e&&r.push(H.monitor.parseTpl(e,l))}),e.origin_monitor=r,H.array.each(e.monitor,function(e){e&&-1!==e.indexOf("sax.sina.com.cn/click")?(e=e.replace(/&url=$/,"")+(u?"&"+u:"")+"&url=",a=H.monitor.parseTpl(e,l)):e&&-1!==e.indexOf("sax.sina.com.cn/dsp/click")?(e=e.replace(/&url=$/,"")+(u?"&"+u:"")+"&url=",n=H.monitor.parseTpl(e,l)):e&&-1!==e.indexOf("sax.sina.com.cn/mfp/click")?(e=e.replace(/&url=$/,"")+(u?"&"+u:"")+"&url=",i=H.monitor.parseTpl(e,l)):(e=H.monitor.parseTpl(e,l))&&o.push(e),H.debug("sinaads:Processing the click of ad unit "+l.sinaads_ad_pdps+" via url "+e)}),a&&o.push(a),i&&o.push(i),n&&o.push(n);var d=e.link;H.array.each(d,function(e,t){d[t]=H.monitor.createTrackingMonitor(e,o)})}),t.template&&t.logo&&(l.extForView=l.extForView||{},l.extForView.template=t.template,l.extForView.logo=t.logo),V.render(c,e,a,i,t.content,l),t.highlight&&"embed"===(l.sinaads_ad_type||t.type)&&(e.style.outline="2px solid #f00"),e.getElementsByTagName("iframe")&&e.getElementsByTagName("iframe")[0]&&(e.getElementsByTagName("iframe")[0].onload=function(){for(var e=0,t=v.Tool.whiteList.length;e<t;e++)v.Tool.whiteList[e]==l.sinaads_ad_pdps&&Tool.postData(v.Tool.whiteList[e])}),H.debug("sinaads:Ads Rendering is complete. (pdps:"+l.sinaads_ad_pdps+", time elpased:"+(H.now()-n)+"ms)")}function X(e,t){var n=t.sinaads_ad_pdps;W.orderController.ready(n,function(e,t,n,i,a,o){H.dom.addClass(e,"sinaads-done"),W.frequenceController.disable(t),H.isFunction(o.sinaads_beforerender)&&!1===o.sinaads_beforerender(e,a,o)||(K(e,a,o),H.isFunction(o.sinaads_success_handler)&&o.sinaads_success_handler(e,a,o))},[e,n,t.sinaads_frequence||0,i+n+"_disabled",G.get(n),t])}function Z(e,t){var n=t.sinaads_ad_pdps;W.orderController.ready(n,function(e,t){W.orderController.done(t.sinaads_ad_pdps),H.dom.addClass(e,"sinaads-fail"),t.sinaads_cannot_empty&&H.debug("Use Default ad data."),H.isFunction(t.sinaads_fail_handler)&&t.sinaads_fail_handler(e,t)},[e,t])}return(G=e).init(function(){m.debug("sinaads:Begin to scan and render all ad placeholders."+m.now());var e=v.sinaads;if(e&&e.shift)for(var t,n=100;(t=e.shift())&&0<n--;)q(t);v.sinaads={push:q}}),v.sinaadsROC=n.orderController,v.sinaadsRFC=n.frequenceController,v._sinaadsCacheData=e.get(),v.sinaadsGetSeed=e.getSeed,v.sinaadsRenderHandler=z.handlerMap,!0}(window,window.sinaadToolkit);
