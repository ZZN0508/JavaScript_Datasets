define("modules/core/exception_tag_registry",["require","exports"],(function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.clear_all_tags=n.unregister_tag=n.register_tag=n.get_registered_tags=void 0;var t=new Set;if(window.ensemble){var r=window;r.REGISTERED_EXCEPTION_TAGS||(r.REGISTERED_EXCEPTION_TAGS=new Set),t=r.REGISTERED_EXCEPTION_TAGS}n.get_registered_tags=function(){var e=[];return t.forEach((function(n){return e.push(n)})),e},n.register_tag=function(e){t.add(e)},n.unregister_tag=function(e){t.delete(e)},n.clear_all_tags=function(){t.clear()}})),define("modules/core/exception",["require","exports","tslib","modules/shims/tracekit","modules/constants/page_load","modules/constants/request","modules/core/exception_tag_registry","modules/core/xhr"],(function(e,n,t,r,i,o,s,a){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.setEdisonExceptionExtras=n.reportStack=n.assert=n.cleanup_stack_trace=n._reportException=n.reportException=n.unregisterOnFailedAssert=n.registerOnFailedAssert=n.SEVERITY=void 0,r=t.__importDefault(r),i=t.__importStar(i),o=t.__importStar(o);var c=0,l=[],u=void 0,f=void 0;function p(e,n){for(var t=function(e){if(!e)return!1;for(var t=0,r=n;t<r.length;t++){var i=r[t];if(-1!==e.search(i))return!0}return!1};e.length>0&&t(e[0].func);)e=e.slice(1);return e}n.SEVERITY={CRITICAL:"critical",NONCRITICAL:"non-critical",USER_ERROR:"user-error",UNCAUGHT:"uncaught",OPERATIONAL:"operational"},n.registerOnFailedAssert=function(e){l.push(e)},n.unregisterOnFailedAssert=function(e){var n=l.indexOf(e);n>=0&&l.splice(n,1)},n.reportException=function(e){var i=e.err,o=e.force,s=e.tags,a=e.severity,c=e.exc_extra;if(!i.reported){var u=r.default.computeStackTrace(i),f=null!=(u&&u.stack)?u.stack:[];if(i.isAssertion){var p=i;p.assertOptions&&p.assertOptions.tags&&(s=(s||[]).concat(p.assertOptions.tags)),p.assertOptions&&p.assertOptions.exc_extra&&(c=t.__assign(t.__assign({},null!=c?c:{}),p.assertOptions.exc_extra)),l.forEach((function(e){return e(u)}))}var d=i;d.excExtra&&(c=t.__assign(t.__assign({},null!=c?c:{}),d.excExtra)),d.tags&&(s=(null!=s?s:[]).concat(d.tags)),n._reportException({msg:i.message,stack:f,force:o,tags:s,severity:a,exc_extra:c}),i.reported=!0}},n._reportException=function(e){var l=e.msg,d=e.stack,m=e.force,g=e.tags,v=e.severity,x=e.exc_extra;if(!u||m){var _=["\\b_reportException\\b","\\breportException\\b","\\bassert\\b","\\breportStack\\b"],h=[];d=p(d,_);try{throw new Error}catch(e){var E=r.default.computeStackTrace(e);null!=E&&null!=E.stack&&(h=E.stack),h=p(h,_)}var w=d.length-h.length;w<=0&&(w=1);var k=d.slice(0,w),b=d.slice(w);g||(g=[]),g=g.concat(s.get_registered_tags());var S="";S=f&&"sessionId"in f?f.sessionId:i.SESSION_ID,g.push("session-id:"+S),x=x?t.__assign({},x):{},window.DB_FRAME_BUST&&(x.DB_FRAME_BUST=!0,v=n.SEVERITY.USER_ERROR),x.client_time=(new Date).toString(),x.client_utc_time=(new Date).toUTCString(),c+=1,x.exception_number=c,f?delete(x=t.__assign(t.__assign({},x),f)).sessionId:x=t.__assign(t.__assign({},x),{page_repo_rev:i.REPO_REV,page_load_timestamp:o.PAGE_LOAD_TIME,page_load_hostname:i.HOSTNAME,yaps_project:i.YAPS_PROJECT,yaps_deployment:i.YAPS_DEPLOYMENT,user_locale:i.USER_LOCALE});var y={};for(var O in window.requireContexts)if(window.requireContexts.hasOwnProperty(O)){var T={},C=window.requireContexts[O].firstUndefinedModule;C&&(T.first_undefined_module=C),y[O]=T}x.page_alameda_failures=y;var R=window.ensemble;null!=R&&(null!=R.getExceptionInfo&&(x.dws_page_info=R.getExceptionInfo()),null!=R.getPageletInfoForExceptionReporting&&(x.pagelet_info=R.getPageletInfoForExceptionReporting()));var A={e:l,loc:window.location.href,ref:document.referrer,stack:JSON.stringify(k.reverse()),context_tb:JSON.stringify(b.reverse()),tags:JSON.stringify(g),sev:v||"",exc_extra:JSON.stringify(x||{})};a.sendXhr("/jse",A),u=l}},n.cleanup_stack_trace=p,n.assert=function(e,n,t){if(void 0===t&&(t={}),!e){0;var r=new Error("Assertion Error: "+n),i=t.tags,o=void 0===i?[]:i,s=t.exc_extra,a=void 0===s?null:s;throw r.assertOptions={tags:o.concat("module:exception","assert"),exc_extra:a},r.isAssertion=!0,r}},n.reportStack=function(e,t){void 0===t&&(t={}),t={severity:t.severity||n.SEVERITY.NONCRITICAL,tags:t.tags||[],exc_extra:t.exc_extra||{},silent:!!t.silent};var r=new Error(e);n.reportException({err:r,force:!0,tags:(t.tags||[]).concat("module:exception","reportStack"),severity:t.severity,exc_extra:t.exc_extra})},n.setEdisonExceptionExtras=function(e){f=e}})),define("modules/shims/tracekit",["require","exports","tslib","tracekit"],(function(e,n,t,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),(r=t.__importDefault(r)).default.linesOfContext=1,r.default.remoteFetching=!1,r.default.noConflict(),n.default=r.default})),define("modules/core/cookies",["require","exports","tslib"],(function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Cookies=void 0;var assert=function(e,n){if(!e)throw new Error(n)},r=/^([0-9]{1,3}\.){3}[0-9]{1,3}$/,i=["=",";"],o=function(e,n,t){void 0===t&&(t=!1),assert("string"==typeof e,n+" must be a string, but was "+typeof e),assert(t||e.length>0,n+" must not be empty"),assert(!(function(e){if(null==e)return!1;for(var n=0,t=i;n<t.length;n++){var r=t[n];if(-1!==e.indexOf(r))return!0}return!1})(e),n+" contains illegal characters")},s=function(e){return o(e,"Cookie name",!1)},a=function(e,n,t){var r,i,a;void 0===t&&(t={}),s(e),(function(e){o(e,"Cookie value",!0)})(n),t.expires&&(r=t.expires,o(r,"Cookie expiration date",!1)),t.domain&&(i=t.domain,o(i,"Cookie domain",!1)),t.path&&(a=t.path,o(a,"Cookie path",!1)),document.cookie=[e+"="+n,t.expires?"expires="+t.expires:void 0,t.domain?"domain="+t.domain:void 0,t.path?"path="+t.path:void 0].join("; ")},c=new Date(1).toUTCString();n.Cookies={create:function(e,n,t,r,i){var o;if(void 0===i&&(i="/"),null!=t){assert("number"==typeof t,"Cookie expiration must be a number");var s=new Date;s.setTime(s.getTime()+24*t*60*60*1e3),o=s.toUTCString()}a(e,n,{expires:o,path:i,domain:r})},read:function(e){s(e);for(var t=[],r=0,i=document.cookie.split(";");r<i.length;r++){var o=i[r],a=o.split("=",1)[0];a.trim()===e&&t.push(o.substring(a.length+1,o.length).trim())}for(var c=!1,l=[],u=0,f=t;u<f.length;u++){var p=f[u];""===p?c=!0:l.push(p)}return 1===l.length?l[0]:l.length>1?(n.Cookies.delete(e),null):c?"":null},delete:function(e){for(var n=t.__spreadArrays([null],(function(e){if(e.match(r))return[e];for(var n=e.split("."),t=[],i=0;i<n.length;i++)t.push(n.slice(i).join("."));return t})(window.location.hostname)),i=t.__spreadArrays([null],(function(e){for(var n=e.split("/"),t=[],r=0;r<n.length;r++){var i=n.slice(0,n.length-r).join("/");""!==i&&t.push(i),t.push(i+"/")}return t})(window.location.pathname)),o=0,s=n;o<s.length;o++)for(var l=s[o],u=0,f=i;u<f.length;u++){var p=f[u];a(e,"",{expires:c,domain:l,path:p})}},are_enabled:function(){return navigator.cookieEnabled?navigator.cookieEnabled:(document.cookie="this_is_a_test_cookie",-1!==document.cookie.indexOf("this_is_a_test_cookie"))}}})),define("modules/core/xhr",["require","exports","modules/clean/csrf"],(function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.sendXhr=void 0;var r=function(e){};n.sendXhr=function(e,n,i){var o,s;void 0===i&&(i=r),t.assertDropboxDomain(e),o=n,s=t.readCsrfToken(),o.is_xhr=!0,o.t=s;var a=(function(e){var n=[];for(var t in e)e.hasOwnProperty(t)&&void 0!==e[t]&&n.push(encodeURIComponent(t)+"="+encodeURIComponent(String(e[t])));return n.join("&")})(n),c=new XMLHttpRequest;return c.onreadystatechange=function(){c.readyState===XMLHttpRequest.DONE&&i(c.status)},c.open("POST",e),c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),c.send(a),c}})),define("modules/clean/csrf",["require","exports","modules/core/cookies"],(function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.assertDropboxDomain=n.readCsrfToken=void 0,n.readCsrfToken=function(){return t.Cookies.read("__Host-js_csrf")},n.assertDropboxDomain=function(e){var n=document.createElement("a");n.href=e;var t=n.hostname||window.location.hostname;if(-1===t.indexOf(".dropbox.com",t.length-".dropbox.com".length))throw new Error("Cannot send the CSRF token to "+t)}})),define("prod_assets_web_modules/tracekit",["./common/_commonjsHelpers"],(function(e){"use strict";return e.createCommonjsModule((function(n){!(function(e,t){if(e){var r={},i=e.TraceKit,o=[].slice;r.noConflict=function(){return e.TraceKit=i,r},r.wrap=function(e){return function(){try{return e.apply(this,arguments)}catch(e){throw r.report(e),e}}},r.report=(function(){var n,t,i=[],a=null,c=null,l=null;function u(e,n){var t=null;if(!n||r.collectWindowErrors){for(var a in i)if(s(i,a))try{i[a].apply(null,[e].concat(o.call(arguments,2)))}catch(e){t=e}if(t)throw t}}function f(e,t,i,o,s){if(l)r.computeStackTrace.augmentStackTraceWithInitialElement(l,t,i,e),p();else if(s)u(r.computeStackTrace(s),!0);else{var a={url:t,line:i,column:o};a.func=r.computeStackTrace.guessFunctionName(a.url,a.line),a.context=r.computeStackTrace.gatherContext(a.url,a.line),u({mode:"onerror",message:e,stack:[a]},!0)}return!!n&&n.apply(this,arguments)}function p(){var e=l,n=a;a=null,l=null,c=null,u.apply(null,[e,!1].concat(n))}function d(n){if(l){if(c===n)return;p()}var t=r.computeStackTrace(n);throw l=t,c=n,a=o.call(arguments,1),e.setTimeout((function(){c===n&&p()}),t.incomplete?2e3:0),n}return d.subscribe=function(r){!0!==t&&(n=e.onerror,e.onerror=f,t=!0),i.push(r)},d.unsubscribe=function(e){for(var n=i.length-1;n>=0;--n)i[n]===e&&i.splice(n,1)},d})(),r.computeStackTrace=(function(){var n={};function t(t){if("string"!=typeof t)return[];if(!s(n,t)){var i="",o="";try{o=e.document.domain}catch(e){}var a=/(.*)\:\/\/([^:\/]+)([:\d]*)\/{0,1}([\s\S]*)/.exec(t);a&&a[2]===o&&(i=(function(n){if(!r.remoteFetching)return"";try{var t=(function(){try{return new e.XMLHttpRequest}catch(n){return new e.ActiveXObject("Microsoft.XMLHTTP")}})();return t.open("GET",n,!1),t.send(""),t.responseText}catch(e){return""}})(t)),n[t]=i?i.split("\n"):[]}return n[t]}function i(e,n){var r,i=/function ([^(]*)\(([^)]*)\)/,o=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,s="",c=t(e);if(!c.length)return"?";for(var l=0;l<10;++l)if(!a(s=c[n-l]+s)){if(r=o.exec(s))return r[1];if(r=i.exec(s))return r[1]}return"?"}function o(e,n){var i=t(e);if(!i.length)return null;var o=[],s=Math.floor(r.linesOfContext/2),c=s+r.linesOfContext%2,l=Math.max(0,n-s-1),u=Math.min(i.length,n+c-1);n-=1;for(var f=l;f<u;++f)a(i[f])||o.push(i[f]);return o.length>0?o:null}function c(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function l(e){return c(e).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function u(e,n){for(var r,i,o=0,s=n.length;o<s;++o)if((r=t(n[o])).length&&(r=r.join("\n"),i=e.exec(r)))return{url:n[o],line:r.substring(0,i.index).split("\n").length,column:i.index-r.lastIndexOf("\n",i.index)-1};return null}function f(e,n,r){var i,o=t(n),s=new RegExp("\\b"+c(e)+"\\b");return r-=1,o&&o.length>r&&(i=s.exec(o[r]))?i.index:null}function p(n){if(!a(e&&e.document)){for(var t,r,i,o,s=[e.location.href],f=e.document.getElementsByTagName("script"),p=""+n,d=0;d<f.length;++d){var m=f[d];m.src&&s.push(m.src)}if(i=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(p)){var g=i[1]?"\\s+"+i[1]:"",v=i[2].split(",").join("\\s*,\\s*");t=c(i[3]).replace(/;$/,";?"),r=new RegExp("function"+g+"\\s*\\(\\s*"+v+"\\s*\\)\\s*{\\s*"+t+"\\s*}")}else r=new RegExp(c(p).replace(/\s+/g,"\\s+"));if(o=u(r,s))return o;if(i=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(p)){var x=i[1];if(t=l(i[2]),o=u(r=new RegExp("on"+x+"=[\\'\"]\\s*"+t+"\\s*[\\'\"]","i"),s[0]))return o;if(o=u(r=new RegExp(t),s))return o}return null}}function d(e,n,t,r){var s={url:n,line:t};if(s.url&&s.line){e.incomplete=!1,s.func||(s.func=i(s.url,s.line)),s.context||(s.context=o(s.url,s.line));var a=/ '([^']+)' /.exec(r);if(a&&(s.column=f(a[1],s.url,s.line)),e.stack.length>0&&e.stack[0].url===s.url){if(e.stack[0].line===s.line)return!1;if(!e.stack[0].line&&e.stack[0].func===s.func)return e.stack[0].line=s.line,e.stack[0].context=s.context,!1}return e.stack.unshift(s),e.partial=!0,!0}return e.incomplete=!0,!1}function m(e,n){for(var t,o,s,a=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,c=[],l={},u=!1,v=m.caller;v&&!u;v=v.caller)if(v!==g&&v!==r.report){if(o={url:null,func:"?",args:[],line:null,column:null},v.name?o.func=v.name:(t=a.exec(v.toString()))&&(o.func=t[1]),void 0===o.func)try{o.func=t.input.substring(0,t.input.indexOf("{"))}catch(e){}if(s=p(v)){o.url=s.url,o.line=s.line,"?"===o.func&&(o.func=i(o.url,o.line));var x=/ '([^']+)' /.exec(e.message||e.description);x&&(o.column=f(x[1],s.url,s.line))}l[""+v]?u=!0:l[""+v]=!0,c.push(o)}n&&c.splice(0,n);var _={mode:"callers",name:e.name,message:e.message,stack:c};return d(_,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description),_}function g(n,r){var c=null;r=null==r?0:+r;try{if(c=(function(e){var n=e.stacktrace;if(n){for(var t,r=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,s=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\))? in (.*):\s*$/i,a=n.split("\n"),c=[],l=0;l<a.length;l+=2){var u=null;if((t=r.exec(a[l]))?u={url:t[2],line:+t[1],column:null,func:t[3],args:[]}:(t=s.exec(a[l]))&&(u={url:t[6],line:+t[1],column:+t[2],func:t[3]||t[4],args:t[5]?t[5].split(","):[]}),u){if(!u.func&&u.line&&(u.func=i(u.url,u.line)),u.line)try{u.context=o(u.url,u.line)}catch(e){}u.context||(u.context=[a[l+1]]),c.push(u)}}return c.length?{mode:"stacktrace",name:e.name,message:e.message,stack:c}:null}})(n))return c}catch(e){}try{if(c=(function(e){if(!e.stack)return null;for(var n,t,r=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|webpack|eval).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,s=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|\[native).*?)(?::(\d+))?(?::(\d+))?\s*$/i,c=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,l=e.stack.split("\n"),u=[],p=/^(.*) is undefined$/.exec(e.message),d=0,m=l.length;d<m;++d){if(n=r.exec(l[d])){var g=n[2]&&-1!==n[2].indexOf("native");t={url:g?null:n[2],func:n[1]||"?",args:g?[n[2]]:[],line:n[3]?+n[3]:null,column:n[4]?+n[4]:null}}else if(n=c.exec(l[d]))t={url:n[2],func:n[1]||"?",args:[],line:+n[3],column:n[4]?+n[4]:null};else{if(!(n=s.exec(l[d])))continue;t={url:n[3],func:n[1]||"?",args:n[2]?n[2].split(","):[],line:n[4]?+n[4]:null,column:n[5]?+n[5]:null}}!t.func&&t.line&&(t.func=i(t.url,t.line)),t.line&&(t.context=o(t.url,t.line)),u.push(t)}return u.length?(u[0]&&u[0].line&&!u[0].column&&p?u[0].column=f(p[1],u[0].url,u[0].line):u[0].column||a(e.columnNumber)||(u[0].column=e.columnNumber+1),{mode:"stack",name:e.name,message:e.message,stack:u}):null})(n))return c}catch(e){}try{if(c=(function(n){var r=n.message.split("\n");if(r.length<4)return null;var a,c=/^\s*Line (\d+) of linked script ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,f=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,p=/^\s*Line (\d+) of function script\s*$/i,d=[],m=e&&e.document&&e.document.getElementsByTagName("script"),g=[];for(var v in m)s(m,v)&&!m[v].src&&g.push(m[v]);for(var x=2;x<r.length;x+=2){var _=null;if(a=c.exec(r[x]))_={url:a[2],func:a[3],args:[],line:+a[1],column:null};else if(a=f.exec(r[x])){_={url:a[3],func:a[4],args:[],line:+a[1],column:null};var h=+a[1],E=g[a[2]-1];if(E){var w=t(_.url);if(w){var k=(w=w.join("\n")).indexOf(E.innerText);k>=0&&(_.line=h+w.substring(0,k).split("\n").length)}}}else if(a=p.exec(r[x])){var b=e.location.href.replace(/#.*$/,""),S=u(new RegExp(l(r[x+1])),[b]);_={url:b,func:"",args:[],line:S?S.line:a[1],column:null}}if(_){_.func||(_.func=i(_.url,_.line));var y=o(_.url,_.line),O=y?y[Math.floor(y.length/2)]:null;y&&O.replace(/^\s*/,"")===r[x+1].replace(/^\s*/,"")?_.context=y:_.context=[r[x+1]],d.push(_)}}return d.length?{mode:"multiline",name:n.name,message:r[0],stack:d}:null})(n))return c}catch(e){}try{if(c=m(n,r+1))return c}catch(e){}return{mode:"failed"}}return g.augmentStackTraceWithInitialElement=d,g.guessFunctionName=i,g.gatherContext=o,g.ofCaller=function(e){e=1+(null==e?0:+e);try{throw new Error}catch(n){return g(n,e+1)}},g.getSource=t,g})(),r.extendToAsynchronousCallbacks=function(){var n=function(n){var t=e[n];e[n]=function(){var e=o.call(arguments),n=e[0];return"function"==typeof n&&(e[0]=r.wrap(n)),t.apply?t.apply(this,e):t(e[0],e[1])}};n("setTimeout"),n("setInterval")},r.remoteFetching||(r.remoteFetching=!0),r.collectWindowErrors||(r.collectWindowErrors=!0),(!r.linesOfContext||r.linesOfContext<1)&&(r.linesOfContext=11),n.exports&&e.module!==n?n.exports=r:e.TraceKit=r}function s(e,n){return Object.prototype.hasOwnProperty.call(e,n)}function a(e){return void 0===e}})("undefined"!=typeof window?window:e.commonjsGlobal)}))}));
//# sourceMappingURL=pkg-exception-reporting.min.js-vflToR1Ys.map