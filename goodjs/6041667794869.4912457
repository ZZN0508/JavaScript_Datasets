window.use_fp=!0;var url=url||{};!function(){this.l=function(o,e){try{var t=document.createElement("script");t.type="text/javascript",t[document.all?"onreadystatechange":"onload"]=function(){document.all&&"loaded"!=this.readyState&&"complete"!=this.readyState||(this[document.all?"onreadystatechange":"onload"]=null,this.parentNode.removeChild(this),e&&e())},t.src=o,document.getElementsByTagName("head")[0].appendChild(t)}catch(o){}}}.call(url),wload(function(){try{var n;Store.CookieHelper.get("SRF")?restore():(n=window.setTimeout("error_back()",5e3),tid.get(function(o,e,t){window.clearTimeout(n),incarnate(o,e,t)}))}catch(o){error_back()}});var return_back=function(o){2e7==o.retcode?back():error_back(o.msg)},back=function(){var o="https://weibo.com/";window.location.href=o},cross_domain=function(o){var e;2e7==o.retcode?(e="login.sina.com.cn",e=window.location.protocol+"//"+e+"/visitor/visitor?a=crossdomain&cb=return_back&s="+encodeURIComponent(o.data.sub)+"&sp="+encodeURIComponent(o.data.subp)+"&from=weibo&_rand="+Math.random()+"&entry=miniblog",url.l(e)):error_back(o.msg)},incarnate=function(o,e,t){t=window.location.protocol+"//"+window.location.host+"/visitor/visitor?a=incarnate&t="+encodeURIComponent(o)+"&w="+encodeURIComponent(e)+"&c="+encodeURIComponent(t)+"&gc="+encodeURIComponent("")+"&cb=cross_domain&from=weibo&_rand="+Math.random();url.l(t)},restore=function(){var o=window.location.protocol+"//"+window.location.host+"/visitor/visitor?a=restore&cb=restore_back&from=weibo&_rand="+Math.random();url.l(o)},restore_back=function(o){var e,t,n;2e7==o.retcode?(e="https://weibo.com/",t=o.data.alt,n=o.data.savestate,""!=t?(requrl="&url="+encodeURIComponent(e),n="entry=sso&alt="+encodeURIComponent(t)+"&returntype=META&gateway=1&savestate="+encodeURIComponent(n)+requrl,window.location.href="https://login.sina.com.cn/sso/login.php?"+n):cross_domain(o)):50111261==o.retcode&&isInIframe()||tid.get(function(o,e,t){incarnate(o,e,t)})},error_back=function(o){var e="https://weibo.com/";"none"!=e?(-1===e.indexOf("ssovie4c55=0")&&(e+=(-1===e.indexOf("?")?"?":"&")+"ssovie4c55=0"),window.location.href="https://weibo.com/login.php"):document.getElementById("message")&&(document.getElementById("message").innerHTML="Error occurred"+(o?": "+o:"."))},isInIframe=function(){try{return window.self!==window.top}catch(o){return!0}};
