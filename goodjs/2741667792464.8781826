YUI.add("event-custom-complex",function(y,t){var i,e,a=y.Object,s={},n=y.CustomEvent.prototype,r=y.EventTarget.prototype;for(e in y.EventFacade=function(t,e){this._event=t=t||s,this.details=t.details,this.type=t.type,this._type=t.type,this.target=t.target,this.currentTarget=e,this.relatedTarget=t.relatedTarget},y.mix(y.EventFacade.prototype,{stopPropagation:function(){this._event.stopPropagation(),this.stopped=1},stopImmediatePropagation:function(){this._event.stopImmediatePropagation(),this.stopped=2},preventDefault:function(){this._event.preventDefault(),this.prevented=1},halt:function(t){this._event.halt(t),this.prevented=1,this.stopped=t?2:1}}),n.fireComplex=function(t){var e,a,s,i,n,r,p,o,u,d,h,l,c=!0,g=this,b=g.host||g,v=g.stack,f=b._yuievt;if(v&&g.queuable&&g.type!==v.next.type)return v.queue||(v.queue=[]),v.queue.push([g,t]),!0;if(l=g.hasSubs()||f.hasTargets||g.broadcast,g.target=g.target||b,g.currentTarget=b,g.details=t.concat(),l){if(e=v||{id:g.id,next:g,silent:g.silent,stopped:0,prevented:0,bubbling:null,type:g.type,defaultTargetOnly:g.defaultTargetOnly},l=(r=g.getSubs())[0],v=r[1],g.stopped=g.type!==e.type?0:e.stopped,g.prevented=g.type!==e.type?0:e.prevented,g.stoppedFn&&(r=new y.EventTarget({fireOnce:!0,context:b}),(g.events=r).on("stopped",g.stoppedFn)),g._facade=null,a=g._createFacade(t),l&&g._procSubs(l,t,a),g.bubbles&&b.bubble&&!g.stopped&&(h=e.bubbling,e.bubbling=g.type,e.type!==g.type&&(e.stopped=0,e.prevented=0),c=b.bubble(g,t,null,e),g.stopped=Math.max(g.stopped,e.stopped),g.prevented=Math.max(g.prevented,e.prevented),e.bubbling=h),g.prevented?(h=g.preventedFn)&&h.apply(b,t):!(u=g.defaultFn)||(g.defaultTargetOnly||e.defaultTargetOnly)&&b!==a.target||u.apply(b,t),g.broadcast&&g._broadcast(t),v&&!g.prevented&&g.stopped<2)if(p=e.afterQueue,e.id===g.id||g.type!==f.bubbling){if(g._procSubs(v,t,a),p)for(;d=p.last();)d()}else o=v,e.execDefaultCnt&&(o=y.merge(o),y.each(o,function(t){t.postponed=!0})),p||(e.afterQueue=new y.Queue),e.afterQueue.add(function(){g._procSubs(o,t,a)});if(g.target=null,e.id===g.id){if(i=e.queue)for(;i.length;)n=(s=i.pop())[0],(e.next=n)._fire(s[1]);g.stack=null}c=!g.stopped,g.type!==f.bubbling&&(e.stopped=0,e.prevented=0,g.stopped=0,g.prevented=0)}else(u=g.defaultFn)&&(a=g._createFacade(t),g.defaultTargetOnly&&b!==a.target||u.apply(b,t));return g._facade=null,c},n._hasPotentialSubscribers=function(){return this.hasSubs()||this.host._yuievt.hasTargets||this.broadcast},n._createFacade=n._getFacade=function(t){var e=this.details,a=e&&e[0],s=a&&"object"==typeof a,e=(e=this._facade)||new y.EventFacade(this,this.currentTarget);return s?(function(t,e){for(var a in e)i.hasOwnProperty(a)||(t[a]=e[a])}(e,a),a.type&&(e.type=a.type),t&&(t[0]=e)):t&&t.unshift(e),e.details=this.details,e.target=this.originalTarget||this.target,e.currentTarget=this.currentTarget,e.stopped=0,e.prevented=0,this._facade=e,this._facade},n._addFacadeToArgs=function(t){var e=t[0];e&&e.halt&&e.stopImmediatePropagation&&e.stopPropagation&&e._event||this._createFacade(t)},n.stopPropagation=function(){this.stopped=1,this.stack&&(this.stack.stopped=1),this.events&&this.events.fire("stopped",this)},n.stopImmediatePropagation=function(){this.stopped=2,this.stack&&(this.stack.stopped=2),this.events&&this.events.fire("stopped",this)},n.preventDefault=function(){this.preventable&&(this.prevented=1,this.stack&&(this.stack.prevented=1))},n.halt=function(t){t?this.stopImmediatePropagation():this.stopPropagation(),this.preventDefault()},r.addTarget=function(t){var e=this._yuievt;e.targets||(e.targets={}),e.targets[y.stamp(t)]=t,e.hasTargets=!0},r.getTargets=function(){var t=this._yuievt.targets;return t?a.values(t):[]},r.removeTarget=function(t){var e=this._yuievt.targets;e&&(delete e[y.stamp(t,!0)],0===a.size(e)&&(this._yuievt.hasTargets=!1))},r.bubble=function(t,e,a,s){var i,n,r,p,o,u,d=this._yuievt.targets,h=!0,l=t&&t.type,c=a||t&&t.target||this;if(!t||!t.stopped&&d)for(r in d)if(d.hasOwnProperty(r)){if(n=(i=d[r])._yuievt.events[l],(o=i._hasSiblings?i.getSibling(l,n):o)&&!n&&(n=i.publish(l)),u=i._yuievt.bubbling,i._yuievt.bubbling=l,n){if(o&&(n.sibling=o),n.target=c,n.originalTarget=c,n.currentTarget=i,p=n.broadcast,n.broadcast=!1,n.emitFacade=!0,n.stack=s,h=h&&n.fire.apply(n,e||t.details||[]),n.broadcast=p,n.originalTarget=null,n.stopped)break}else i._yuievt.hasTargets&&i.bubble(t,e,c,s);i._yuievt.bubbling=u}return h},r._hasPotentialSubscribers=function(t){var e=this._yuievt,t=e.events[t];return!!t&&(t.hasSubs()||e.hasTargets||t.broadcast)},r=new y.EventFacade,i={},r)i[e]=!0},"3.12.0",{requires:["event-custom-base"]});
