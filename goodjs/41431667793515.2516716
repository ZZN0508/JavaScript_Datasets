require=function n(o,i,s){function a(t,e){if(!i[t]){if(!o[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(c)return c(t,!0);throw(r=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",r}r=i[t]={exports:{}},o[t][0].call(r.exports,function(e){return a(o[t][1][e]||e)},r,r.exports,n,o,i,s)}return i[t].exports}for(var c="function"==typeof require&&require,e=0;e<s.length;e++)a(s[e]);return a}({1:[function(t,e,r){!function(e){!function(){YUI.add("flickr-router",function(c,e){"use strict";var i,u=t("hermes-core/flog")(e),h=t("hermes-core/fletrics");t("hermes-core/holidays"),c.FlickrRouter=function(e,t){return this.app=e,this.setupRoutes(t),this},c.FlickrRouter.prototype={setupRoutes:function(e){var t,r,n,o,i;for(n in e.patterns)this.registerParam(n,new RegExp(e.patterns[n]));for(t=0;t<e.routes.length;t++)if((o=e.routes[t]).path instanceof Array)for(r=0;r<o.path.length;r++){for(n in i={},o)"path"!==n&&(i[n]=o[n]);i.path=o.path[r],this.registerRoute(i)}else this.registerRoute(o)},registerParam:function(e,t){this.app.param(e,t)},registerRoute:function(n){var o=this;this.route(n,[function(e,t,r){"appContext"in window?e.appContext=window.appContext:!YUI.Env.isServer&&c.config.win.beaconError&&c.config.win.beaconError("[flickr-router] No appcontext.",c.config.win.location.href),r()},t("hermes-core/normalize-params-hash")(),t("hermes-core/normalize-param")("nsid_or_path_alias"),t("hermes-core/normalize-path-params")(),t("hermes-core/set-route-config")(n),function(e,t,r){return i.bounceRoute(e,t,r,n,o)},function(e,t,r){return i.checkOptIn(e,t,r,n)},function(e,t,r){return i.checkAndKick(e,t,r,n)},function(e,t,r){return i.mixInServerRequest(e,t,r,n)},function(e,t,r){return i.checkAndInterstitial(e,t,r,n,o)},function(e,t,r){o._processRequest(n,e,t,r)}])},render:function(e,t,r){return function(r,e,n){var o,i=this;return n.redirect?(window.location=n.redirect,c.Promise.resolve()):(document.title=n.title,c.loaderBar.progress(),r.appContext.getView(n.view,n.params,n.layout).then(function(e){return c.loaderBar.progress(),(o=e)._params&&(o._params.keyEventScope=o.name+o._yuid),r.appContext.getKeyboardManager().setCurrentKeyEventScope(o.name+o._yuid),o.set("isRootView",!0),o.initialize()}).then(function(){var e,t;c.loaderBar.progress(),t=(t=(t=(e=c.one("html")).get("className").trim()).replace(/html-[\S]+-view/,"html-"+n.view)).replace(/[\S]+-layout/,n.layout+"-layout"),e.set("className",t),r.transactionId===i.currentTransactionId&&i.app.showView(o,null,{render:!0,callback:function(e){c.loaderBar.finish(),"popstate"!==r.src&&window.scroll(0,0)}})}).catch(function(e){throw u.error("Render had an error",{err:e}),e}))}.call(this,e,t,r)},route:function(e,t){var r=[];return r.push(e.path),r=r.concat(t),this.app.route.apply(this.app,r)},_processRequest:function(e,n,o,t){var i=this;n.transactionId=c.guid(),this.currentTransactionId=n.transactionId,n.appContext.startTime=Date.now(),n.appContext.getRoute(e.module).then(function(e){var t,r;return i.executingRoute=e,t=c.Promise.resolve(null),r={id:n.id,isInsecureGod:n.isInsecureGod,cookies:n.cookies,headers:n.headers,params:n.params,url:n.url.toString(),path:n.path,query:n.query,buckets:n.buckets,lang:n.lang,geo:n.geo,probableUser:n.probableUser,UA:n.UA,hasSessionCookie:n.hasSessionCookie,body:n.body},n.isGod&&(r.isGod=n.isGod),n.routeTimingStart=Date.now(),c.Promise.all([t,e.run(r,o)])}).then(function(e){return e&&e[0]&&n.appContext.flipper.isFlipped("enable-audience-tgt")&&(n.appContext.audienceTargets={signedIn:e[0].signedIn,isPro:!!e[0].user&&e[0].user.ispro}),2<=e.length&&(e[0],n.appContext.initialView=e[1].view),i._renderView(e,n,o,t)}).catch(function(e){return i._throwError.call(i,e,n,o,t)})},_renderView:function(e,t,r,n){var o,i=0<e.length?e[0]:null,e=1<e.length?e[1]:null;if(!e)throw new Error("Invalid viewConfig");if(e.params=e.params||{},i){if(i.signedIn&&i.user&&i.user.username?u.info("user is signed in",{nsid:i.user.nsid,username:i.user.username._content}):u.info("user is signed out"),i.signedIn&&i.user)for(o in i.user)void 0===YUI.Env.config.auth.whitelisted_keys[o]&&delete i.user[o];i.isInsecureGod=t.isInsecureGod,t.appContext.auth=i}return e&&void 0!==e.params&&(e.params.isOwner=t.appContext.getViewer().signedIn&&t.appContext.getViewer().nsid===e.params.nsid),e.redirect||(e.params.UA=t.UA,e.params.isMobile=t.UA.isMobileBrowser,e.layout=e.layout||c.config.flickr.rendering.default_layout,e.title=c.pageTitleHelper(e.title),t.appContext.routeTiming=Date.now()-t.routeTimingStart),this.render(t,r,e)},_throwError:function(e,t,r,n){var o,i=t&&t.UA&&(t.UA.isBot||t.UA.isSharingBot),s=i?h.getBotString():"",a=this;if(!r.headersSent){if(e.is404)return o=a.executingRoute.display404Error(t,e),a.render(t,r,o);if(t&&t.appContext&&e&&e.message&&-1<e.message.indexOf("Not enough storage is available to complete this operation"))return t.appContext.mitigateClientPanda("common.IE_STORAGE_ISSUE");if(t&&t.appContext&&e&&(e.moduleLoadingError||-1<e.message.indexOf("Loading failed: Failed to load https://combo.staticflickr.com/zz/combo?")))return!YUI.Env.isServer&&c.config.win.beaconError&&c.config.win.beaconError("[flickr-router] Module loading Issue:"+e.message,c.config.win.location.href,e),t.appContext.mitigateClientPanda("common.MODULES_BLOCKED");try{h.increment("page.failures"+s),u.error("Reboot page failure",{err:e,req:t}),e.fatal?e.timeout||e.clientTimeout?(h.increment("api.timeouts"+s),u.error("Unexpected error",{err:e,metric:"api.timeouts"+s})):"Site Auth Failed"===e.message?(h.increment("siteauth.failures"),e.type="SiteAuth",e.redirect=!0):"Session Failed"===e.message?(h.increment("sessioncookie.failures"),e.type="SiteAuth",e.redirect=!0):(h.increment("api.other"+s),u.error("Unexpected error",{err:e,metric:"api.other"+s})):(h.increment("page.failures.other"+s),u.error("Unexpected error",{err:e,metric:"page.failures.other",isBot:i}),!YUI.Env.isServer&&c.config.win.beaconError&&c.config.win.beaconError("[flickr-router] Unexpected page failure:"+e.message+" UA:"+(navigator&&navigator.userAgent||"").toString(),c.config.win.location.href,e)),YUI.Env.isServer||!c.config.win.beaconError||e.redirect&&"SiteAuth"===e.type||(e.panda=!0,t&&t.UA&&t.UA.isUnsupportedBrowser,c.config.win.beaconError("[flickr-router] "+e.message,c.config.win.location.href,e))}catch(t){i=t;void 0===a.executingRoute&&(i=e),u.info({err:e});try{!YUI.Env.isServer&&c.config.win.beaconError&&(e.panda=!0,c.config.win.beaconError("[flickr-router] _throwError failed: "+e.message,c.config.win.location.href,e),i!==e&&c.config.win.beaconError(i.message,c.config.win.location.href,i))}catch(e){u.info("Failed trying to beacon client error",{err:e})}}return o=a.executingRoute.display500Error(t,e),a.render(t,r,o)}u.info("server render called but headers have already been sent",{timeout:t.timeout})}},i={checkAndKick:function(e,t,r,n){r()},checkAndInterstitial:function(e,t,r,n,o){r()},bounceRoute:function(e,t,r,n,o){r()},checkOptIn:function(e,t,r,n){r()},mixInServerRequest:function(e,t,r,n){c.mix(e,c.namespace("config.flickr.request")),r()}}},"0.0.1",{requires:["oop","page-title-helper","moment","flickr-route","localizable","url"],langBundles:["misc"]})}.call(this)}.call(this,t("_process"))},{_process:16,"hermes-core/fletrics":"hermes-core/fletrics","hermes-core/flog":"hermes-core/flog","hermes-core/holidays":4,"hermes-core/normalize-param":8,"hermes-core/normalize-params-hash":9,"hermes-core/normalize-path-params":10,"hermes-core/set-route-config":11}],2:[function(e,t,r){function n(){}function o(){}function i(){}n.prototype.start=i,o.prototype.emit=n.prototype.end=i,o.prototype.on=i,o.prototype.increment=i,o.prototype.decrement=i,o.prototype.set=i,o.prototype.sync=i,o.prototype.timer=function(){return new n},o.prototype.use=function(e){return e(this),this},t.exports=function(){return new o},t.exports.Timer=n},{}],3:[function(e,r,t){!function(t){!function(){var e="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};r.exports=e}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(e,t,r){t.exports=function(){var e=new Date,t="";switch(e.getMonth()+1+"-"+e.getDate()){case"2-12":t="is-chinesenewyears-day";break;case"2-10":t="is-flickr-day";break;case"2-14":t="is-valentines-day";break;case"3-17":t="is-patties-day";break;case"4-22":t="is-earth-day";break;case"6-20":case"6-21":case"6-22":case"6-23":case"6-24":case"6-25":case"6-26":t="is-pride-day";break;case"7-1":t="is-canada-day";break;case"7-4":t="is-usa-day";break;case"7-14":t="is-french-day";break;case"9-19":t="is-pirate-day";break;case"10-31":t="is-halloween-day";break;case"11-28":case"11-29":case"11-30":case"12-1":case"12-2":case"12-3":case"12-4":case"12-5":case"12-6":t="is-hanukkah-day";break;case"12-24":case"12-25":t="is-xmas-day"}return t=t&&" "+t}},{}],5:[function(e,t,r){function n(e,t,r){this.topic=e,this.props=t||{},this.stack=r||[]}function o(o){return function(e,t){var r,n=Object.assign({},this.props,{lvl:o,time:new Date,topic:this.topic});"string"!=typeof e&&"number"!=typeof e||(n.msg=e),"object"==typeof e&&Object.assign(n,e),"object"==typeof t&&Object.assign(n,t);try{for(r=0;r<this.stack.length;r++)if(!1===this.stack[r].call(this,n,o))return;this.write(n,o)}catch(e){}}}(r=t.exports=function(e,t){return new n(e,t)}).LOG=10,r.INFO=20,r.WARN=30,r.ERROR=40,(n.prototype=Object.create(r)).log=o(r.LOG),n.prototype.info=o(r.INFO),n.prototype.warn=o(r.WARN),n.prototype.error=o(r.ERROR),n.prototype.write=e("./lib/server"),n.prototype.use=function(e){return this.stack.push(e),this},n.prototype.createLogger=function(e,t){return new n(e,Object.assign({},this.props,t),this.stack.concat())}},{"./lib/server":6}],6:[function(e,t,r){(r=t.exports=function(e,t){r.levels[t]in console?console[r.levels[t]](e):console.log(e)}).levels={10:"log",20:"info",30:"warn",40:"error"}},{}],7:[function(e,t,r){t.exports=function(t){var e=Object.prototype.toString.call(t);switch(e){case"[object Number]":return function(e){return e.lvl>=t};case"[object String]":return function(e){return e.topic===t};case"[object Array]":return function(e){return!!~t.indexOf(e.topic)};case"[object RegExp]":return function(e){return t.test(e.topic)};case"[object Function]":return function(e){return!!t.call(null,e)};case"[object Boolean]":return function(){return!!t};default:throw new Error("Unsupported filter type "+e+": "+t)}}},{}],8:[function(e,t,r){var i=e("hermes-core/type-validator");t.exports=function(o){return function(e,t,r){var n=e.params[o];if(!n||"string"!=typeof n)return r();i.nsid(n)||(e.params[o]=String(n).toLowerCase()),r()}}},{"hermes-core/type-validator":"hermes-core/type-validator"}],9:[function(e,t,r){t.exports=function(){return function(e,t,r){for(var n in e.params)e.params[n]=e.params[n][0];r()}}},{}],10:[function(e,t,r){t.exports=function(){return function(e,t,r){e.params instanceof Array&&e.params.shift(),r()}}},{}],11:[function(e,t,r){t.exports=function(n){return function(e,t,r){"object"==typeof e.appContext?(e.appContext.routeConfig=n,r()):r(new Error("appContext is undefined"))}}},{}],12:[function(e,t,r){t.exports=function(e){if(!e)return!1;var t=n.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)};var n=Object.prototype.toString},{}],13:[function(e,t,r){var a=e("merge");(t.exports=function(e){this.top=e.top,this.left=e.left,this.width=e.width,this.spacing=e.spacing,this.targetRowHeight=e.targetRowHeight,this.targetRowHeightTolerance=e.targetRowHeightTolerance,this.minAspectRatio=this.width/e.targetRowHeight*(1-e.targetRowHeightTolerance),this.maxAspectRatio=this.width/e.targetRowHeight*(1+e.targetRowHeightTolerance),this.edgeCaseMinRowHeight=e.edgeCaseMinRowHeight,this.edgeCaseMaxRowHeight=e.edgeCaseMaxRowHeight,this.widowLayoutStyle=e.widowLayoutStyle,this.isBreakoutRow=e.isBreakoutRow,this.items=[],this.height=0}).prototype={addItem:function(e){var t,r,n=this.items.concat(e),o=this.width-(n.length-1)*this.spacing,i=n.reduce(function(e,t){return e+t.aspectRatio},0),s=o/this.targetRowHeight;return this.isBreakoutRow&&0===this.items.length&&1<=e.aspectRatio?(this.items.push(e),this.completeLayout(o/e.aspectRatio,"justify"),!0):i<this.minAspectRatio?(this.items.push(a(e)),!0):!(i>this.maxAspectRatio)||0===this.items.length?(this.items.push(a(e)),this.completeLayout(o/i,"justify"),!0):(t=this.width-(this.items.length-1)*this.spacing,r=this.items.reduce(function(e,t){return e+t.aspectRatio},0),n=t/this.targetRowHeight,Math.abs(i-s)>Math.abs(r-n)?(this.completeLayout(t/r,"justify"),!1):(this.items.push(a(e)),this.completeLayout(o/i,"justify"),!0))},isLayoutComplete:function(){return 0<this.height},completeLayout:function(e,t){var r,n,o,i,s,a=this.left,c=this.width-(this.items.length-1)*this.spacing;(void 0===t||["justify","center","left"].indexOf(t)<0)&&(t="left"),r=e!==(n=Math.max(this.edgeCaseMinRowHeight,Math.min(e,this.edgeCaseMaxRowHeight)))?c/(this.height=n)/(c/e):(this.height=e,1),this.items.forEach(function(e){e.top=this.top,e.width=e.aspectRatio*this.height*r,e.height=this.height,e.left=a,a+=e.width+this.spacing},this),"justify"===t?(a-=this.spacing+this.left,o=(a-this.width)/this.items.length,i=this.items.map(function(e,t){return Math.round((t+1)*o)}),1===this.items.length?this.items[0].width-=Math.round(o):this.items.forEach(function(e,t){0<t?(e.left-=i[t-1],e.width-=i[t]-i[t-1]):e.width-=i[t]})):"center"===t&&(s=(this.width-a)/2,this.items.forEach(function(e){e.left+=s+this.spacing},this))},forceComplete:function(e,t){"number"==typeof t?this.completeLayout(t,this.widowLayoutStyle):this.completeLayout(this.targetRowHeight,this.widowLayoutStyle)},getItems:function(){return this.items}}},{merge:14}],14:[function(e,t,r){function n(e,t,r){var n=r[0],o=r.length;!e&&"object"===u(n)||(n={});for(var i=0;i<o;++i){var s,a=r[i];if("object"===u(a))for(var c in a)"__proto__"!==c&&(s=e?h.clone(a[c]):a[c],n[c]=t?function e(t,r){if("object"!==u(t))return r;for(var n in r)"object"===u(t[n])&&"object"===u(r[n])?t[n]=e(t[n],r[n]):t[n]=r[n];return t}(n[c],s):s)}return n}function u(e){return{}.toString.call(e).slice(8,-1).toLowerCase()}var o,h;o="object"==typeof t&&t&&"object"==typeof t.exports&&t.exports,(h=function(e){return n(!0===e,!1,arguments)}).recursive=function(e){return n(!0===e,!0,arguments)},h.clone=function(e){var t,r,n=e,o=u(e);if("array"===o)for(n=[],r=e.length,t=0;t<r;++t)n[t]=h.clone(e[t]);else if("object"===o)for(t in n={},e)n[t]=h.clone(e[t]);return n},o?t.exports=h:window.merge=h},{}],15:[function(e,t,r){function a(e){return e.replace(/^\s+|\s+$/g,"")}t.exports=function(e){if(!e)return{};for(var t={},r=a(e).split("\n"),n=0;n<r.length;n++){var o=r[n],i=o.indexOf(":"),s=a(o.slice(0,i)).toLowerCase(),o=a(o.slice(i+1));void 0===t[s]?t[s]=o:(i=t[s],"[object Array]"===Object.prototype.toString.call(i)?t[s].push(o):t[s]=[t[s],o])}return t}},{}],16:[function(e,t,r){function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(t){if(h===setTimeout)return setTimeout(t,0);if((h===n||!h)&&setTimeout)return h=setTimeout,setTimeout(t,0);try{return h(t,0)}catch(e){try{return h.call(null,t,0)}catch(e){return h.call(this,t,0)}}}function s(){d&&p&&(d=!1,p.length?f=p.concat(f):g=-1,f.length&&a())}function a(){if(!d){var e=i(s);d=!0;for(var t=f.length;t;){for(p=f,f=[];++g<t;)p&&p[g].run();g=-1,t=f.length}p=null,d=!1,function(t){if(l===clearTimeout)return clearTimeout(t);if((l===o||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(t);try{l(t)}catch(e){try{return l.call(null,t)}catch(e){return l.call(this,t)}}}(e)}}function c(e,t){this.fun=e,this.array=t}function u(){}var h,l,t=t.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:n}catch(e){h=n}try{l="function"==typeof clearTimeout?clearTimeout:o}catch(e){l=o}}();var p,f=[],d=!1,g=-1;t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];f.push(new c(e,t)),1!==f.length||d||i(a)},c.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=u,t.addListener=u,t.once=u,t.off=u,t.removeListener=u,t.removeAllListeners=u,t.emit=u,t.prependListener=u,t.prependOnceListener=u,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],17:[function(e,t,r){"use strict";function i(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function s(e){try{return encodeURIComponent(e)}catch(e){return null}}var a=Object.prototype.hasOwnProperty;r.stringify=function(e,t){var r,n,o=[];for(n in"string"!=typeof(t=t||"")&&(t="?"),e)if(a.call(e,n)){if((r=e[n])||null!=r&&!isNaN(r)||(r=""),n=s(n),r=s(r),null===n||null===r)continue;o.push(n+"="+r)}return o.length?t+o.join("&"):""},r.parse=function(e){for(var t=/([^=?#&]+)=?([^&]*)/g,r={};o=t.exec(e);){var n=i(o[1]),o=i(o[2]);null===n||null===o||n in r||(r[n]=o)}return r}},{}],18:[function(e,t,r){"use strict";t.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},{}],19:[function(e,t,r){function n(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}(t.exports=n).proto=n(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return n(this)},configurable:!0})})},{}],20:[function(e,t,r){t.exports=function(){for(var e={},t=0;t<arguments.length;t++){var r,n=arguments[t];for(r in n)o.call(n,r)&&(e[r]=n[r])}return e};var o=Object.prototype.hasOwnProperty},{}],"cyclical-json":[function(e,r,t){!function(){function c(e){return"object"!=typeof e||null===e||"function"==typeof e.toJSON||e instanceof String||e instanceof Number||e instanceof RegExp||e instanceof Date||e instanceof Boolean}function u(e){return f(e)||p(e)?"~"+e:e}function h(e){return e.slice(1)}var t={},l=(e.prototype.get=function(e){e=this.keys.indexOf(e);return this.values[e]},e.prototype.has=function(e){return 0<=this.keys.indexOf(e)},e.prototype.set=function(e,t){var r=this.keys.indexOf(e);return 0<=r?this.values[r]=t:(this.keys.push(e),this.values.push(t)),this},e),p=function(e){return"string"==typeof e&&0===e.indexOf("~~")},f=function(e){return"string"==typeof e&&0===e.indexOf("~")&&!p(e)};function e(){Object.defineProperties(this,{keys:{value:[]},values:{value:[]}})}t.stringify=function(e,t,r){var n,o,i,s,e=(o=e,i=[],s=new l,{legend:i,main:a(o,[])}),o=JSON.stringify(e.legend),r=JSON.stringify(e.main,"function"!=typeof(n=t)?n:function(e,t){return p(t)?u(n(e,h(t))):f(t)?t:n(e,t)},r);function a(r,n){var e=r;return c(r)||(e=s.has(r)?(s.get(r)instanceof Array&&(i.push(s.get(r)),s.set(r,String("~"+(i.length-1)))),s.get(r)):(s.set(r,n),Object.keys(r).reduce(function(e,t){return e[t]=a(r[t],n.concat(t)),e},r instanceof Array?[]:{}))),e="string"==typeof r?u(r):e}return void 0!==r?'{"legend":'+o+',"main":'+r+',"version":"cyclical-json@2.1.3"}':r},t.parse=function(e,t){return"object"!=typeof(s=JSON.parse(e,"function"!=typeof(r=t)?r:function(e,t){return p(t)?u(r(e,h(t))):f(t)?t:r(e,t)}))||null===s||void 0===s.main||void 0===s.legend||!(s.legend instanceof Array)||void 0===s.version||s.version.indexOf("cyclical-json")<0?s:i(s.main);function i(t,e,r){var n,o=t;return c(t)||Object.keys(t).forEach(function(e){return i(t[e],e,t)}),f(t)&&(o=s.main,n=Number(h(t)),s.legend[n].forEach(function(e){return o=o[e]})),p(t)&&(o=h(t)),r&&(r[e]=o),o}var s,r};try{r.exports=t}catch(e){window.cyclicalJSON=t}}()},{}],"hermes-core/fletrics":[function(e,t,r){var n=e("@flickr/fletrics"),e=n();e.getBotString=function(){return".bot"},e.createStopwatch=function(e){return this.timer(e)},n.Timer.prototype.stop=function(){return this.end()},t.exports=e},{"@flickr/fletrics":2}],"hermes-core/flog":[function(e,t,r){var n=e("@flickr/flog")("hermes"),e=e("@flickr/flog/lib/plugins/filter");n.use(e(YUI_config.flickr.log_level.browser)),n.use(function(e){e.err&&e.err instanceof Error&&(e.msg+="\n\nmessage:\n"+e.err.message,e.msg+="\n\nstack:\n"+e.err.stack)}),n.use(function(e){var t="["+e.topic+"] "+e.msg,r=n.write.levels[e.lvl];return delete e.msg,delete e.topic,delete e.lvl,r in console?console[r](t,e):console.log(t,e),!1}),t.exports=function(e){return n.createLogger(e)}},{"@flickr/flog":5,"@flickr/flog/lib/plugins/filter":7}],"hermes-core/type-validator":[function(e,t,r){function n(t){return function(e){return t.test(e)}}r.nsid=n(/^[0-9]+@N[0-9]+$/),r.pathAlias=n(/^[0-9a-zA-Z-_]+$/),r.photoId=n(/^[0-9]+$/),r.bookId=n(/^[0-9]+$/),r.orderId=n(/^[0-9]+$/)},{}],"html-truncate":[function(e,t,r){t.exports=function(e,u,h){function t(e,t){var r,n,o=u-p,i=o,s=o<h.slop,a=s?o:h.slop-1,c=s?0:o-h.slop,s=t||o+h.slop;if(!h.truncateLastWord){if(r=e.slice(c,s),t&&r.length<=t)i=r.length;else for(;null!==(n=v.exec(r));){if(!(n.index<a)){if(n.index===a){i=o;break}i=o+(n.index-a);break}if(i=o-(a-n.index),0===n.index&&o<=1)break}e.charAt(i-1).match(/\s$/)&&i--}return i}var r,n,o,i,s,a=u<10?u:10,c=["img"],l=[],p=0,f="",d='([\\w|-]+\\s*=\\s*"[^"]*"\\s*)*',g=new RegExp("<\\/?\\w+\\s*"+d+"\\s*\\/\\s*>"),m=new RegExp("<\\/?\\w+\\s*"+d+"\\s*\\/?\\s*>"),w=/(((ftp|https?):\/\/)[\-\w@:%_\+.~#?,&\/\/=]+)|((mailto:)?[_.\w\-]+@([\w][\w\-]+\.)+[a-zA-Z]{2,3})/g,y=new RegExp("<img\\s*"+d+"\\s*\\/?\\s*>"),v=new RegExp("\\W+","g"),b=!0;for((h=h||{}).ellipsis=void 0!==h.ellipsis?h.ellipsis:"...",h.truncateLastWord=void 0===h.truncateLastWord||h.truncateLastWord,h.slop=void 0!==h.slop?h.slop:a;b;){if(!(b=m.exec(e))){if(u<=p)break;if(!(b=w.exec(e))||b.index>=u){f+=e.substring(0,t(e));break}for(;b;)r=b[0],n=b.index,f+=e.substring(0,n+r.length-p),e=e.substring(n+r.length),b=w.exec(e);break}if(r=b[0],n=b.index,u<p+n){f+=e.substring(0,t(e,n));break}p+=n,f+=e.substring(0,n),"/"===r[1]?(l.pop(),i=null):(i=g.exec(r))||(o=function(e){var t=e.indexOf(" ");if(-1===t&&-1===(t=e.indexOf(">")))throw new Error("HTML tag is not well-formed : "+e);return e.substring(1,t)}(r),l.push(o)),f+=i?i[0]:r,e=e.substring(n+r.length)}return e.length>u-p&&h.ellipsis&&(f+=h.ellipsis),f+=(s="",l.reverse().forEach(function(e,t){-1===c.indexOf(e)&&(s+="</"+e+">")}),s),h.keepImageTag||(d=f,f=(a=y.exec(d))?(y=a.index,a=a[0].length,d.substring(0,y)+d.substring(y+a)):d),f}},{}],int:[function(e,t,r){function c(e){return e instanceof d?e:d(e)}function h(e){for(;e._d.length&&0===e._d[0];)e._d.shift();return e}function d(e){if(!(this instanceof d))return new d(e);if(e instanceof d)return this._s=e._s,void(this._d=e._d.slice());this._s="-"===(e+="").charAt(0)?1:0,this._d=[];for(var t=(e=e.replace(/[^\d]/g,"")).length,r=0;r<t;++r)this._d.push(+e[r]);h(this),0===this._d.length&&(this._s=0)}d.prototype.add=function(e){if(e=c(e),this._s!=e._s)return e._s^=1,o=this.sub(e),e._s^=1,o;var t,r;r=this._d.length<e._d.length?(t=this._d,n=e._d,d(e)):(t=e._d,n=this._d,d(this));for(var e=t.length,n=n.length,o=r._d,i=0,s=n-1,a=e-1;0<=a;--s,--a)o[s]+=i+t[a],i=0,10<=o[s]&&(o[s]-=10,i=1);for(;0<=s&&(o[s]+=i,i=0,10<=o[s]&&(o[s]-=10,i=1),0!==i);--s);return 0<i&&o.unshift(1),r},d.prototype.sub=function(e){if(e=d(e),this._s!=e._s)return e._s^=1,s=this.add(e),e._s^=1,s;var t=this._s,r=e._s;this._s=e._s=0;var n=this.lt(e),o=(n?this:e)._d,i=(n?e:this)._d;this._s=t,e._s=r;t=o.length,r=i.length,i=d(n?e:this);i._s=e._s&this._s;for(var s=i._d,a=0,c=r-1,u=t-1;0<=u;--c,--u)s[c]-=o[u]+a,s[c]<(a=0)&&(s[c]+=10,a=1);for(;0<=c&&(s[c]-=a,s[c]<(a=0)&&(s[c]+=10,a=1),0!==a);--c);return n&&(i._s^=1),h(i),0===i._d.length&&(i._s=0),i},d.prototype.mul=function(e){for(var t=this._d.length>=(e=d(e))._d.length,r=(t?this:e)._d,n=(t?e:this)._d,o=r.length,t=n.length,i=d(),s=[],a=t-1;0<=a;--a){for(var c=d(),u=c._d=c._d.concat(s),h=0,l=o-1;0<=l;--l){var p=n[a]*r[l]+h,f=p%10,h=Math.floor(p/10);u.unshift(f)}h&&u.unshift(h),i=i.add(c),s.push(0)}return i._s=this._s^e._s,i},d.prototype.div=function(e){if("0"==(e=d(e)))throw new Error("Division by 0");if("0"==this)return d();var t=this._d.slice(),r=d();r._s=this._s^e._s;var n=e._s;e._s=0;for(var o=d();t.length;){for(var i=0;t.length&&o.lt(e);)0<i++&&r._d.push(0),o._d.push(t.shift()),h(o);for(var s=0;o.gte(e)&&++s;)o=o.sub(e);if(0===s){r._d.push(0);break}r._d.push(s)}var a=o._d.length;return(1<a||r._s&&0<a)&&(o=o.add(5)),r._s&&(a!==o._d.length||5<=o._d[0])&&(r=r.sub(1)),e._s=n,h(r)},d.prototype.mod=function(e){return this.sub(this.div(e).mul(e))},d.prototype.pow=function(e){var t=d(this);if(0==(e=d(e)))return t.set(1);for(var r=Math.abs(e);--r;t.set(t.mul(this)));return e<0?t.set(d(1).div(t)):t},d.prototype.set=function(e){return this.constructor(e),this},d.prototype.cmp=function(e){if(e=c(e),this._s!=e._s)return this._s?-1:1;var t=this._d,r=e._d,n=t.length,e=r.length;if(n!=e)return e<n^this._s?1:-1;for(var o=0;o<n;++o)if(t[o]!=r[o])return t[o]>r[o]^this._s?1:-1;return 0},d.prototype.neg=function(){var e=d(this);return e._s^=1,e},d.prototype.abs=function(){var e=d(this);return e._s=0,e},d.prototype.valueOf=d.prototype.toString=function(e){if(!e||10===e)return(this._s&&this._d.length?"-":"")+(this._d.length?this._d.join(""):"0");if(e<2||36<e)throw RangeError("radix out of range: "+e);for(var t=Math.pow(e,6),r=this,n="";;){var o=r.div(t),i=(+r.sub(o.mul(t)).toString()).toString(e);if((r=o).eq(0))return i+n;for(;i.length<6;)i="0"+i;n=""+i+n}},d.prototype.gt=function(e){return 0<this.cmp(e)},d.prototype.gte=function(e){return 0<=this.cmp(e)},d.prototype.eq=function(e){return 0===this.cmp(e)},d.prototype.ne=function(e){return 0!==this.cmp(e)},d.prototype.lt=function(e){return this.cmp(e)<0},d.prototype.lte=function(e){return this.cmp(e)<=0},t.exports=d},{}],"justified-layout":[function(e,t,r){"use strict";function p(e,t){var r;return!1!==e.fullWidthBreakoutRowCadence&&(t._rows.length+1)%e.fullWidthBreakoutRowCadence==0&&(r=!0),new n({top:t._containerHeight,left:e.containerPadding.left,width:e.containerWidth-e.containerPadding.left-e.containerPadding.right,spacing:e.boxSpacing.horizontal,targetRowHeight:e.targetRowHeight,targetRowHeightTolerance:e.targetRowHeightTolerance,edgeCaseMinRowHeight:.5*e.targetRowHeight,edgeCaseMaxRowHeight:2*e.targetRowHeight,rightToLeft:!1,isBreakoutRow:r,widowLayoutStyle:e.widowLayoutStyle})}function f(e,t,r){return t._rows.push(r),t._layoutItems=t._layoutItems.concat(r.getItems()),t._containerHeight+=r.height+e.boxSpacing.vertical,r.items}var d=e("merge"),n=e("./row");t.exports=function(e,t){var r,n,o,i,s,a={},c={},u={containerWidth:1060,containerPadding:10,boxSpacing:10,targetRowHeight:320,targetRowHeightTolerance:.25,maxNumRows:Number.POSITIVE_INFINITY,forceAspectRatio:!1,showWidows:!0,fullWidthBreakoutRowCadence:!1,widowLayoutStyle:"left"},h={},l={},a=d(u,t=t||{});return h.top=isNaN(parseFloat(a.containerPadding.top))?a.containerPadding:a.containerPadding.top,h.right=isNaN(parseFloat(a.containerPadding.right))?a.containerPadding:a.containerPadding.right,h.bottom=isNaN(parseFloat(a.containerPadding.bottom))?a.containerPadding:a.containerPadding.bottom,h.left=isNaN(parseFloat(a.containerPadding.left))?a.containerPadding:a.containerPadding.left,l.horizontal=isNaN(parseFloat(a.boxSpacing.horizontal))?a.boxSpacing:a.boxSpacing.horizontal,l.vertical=isNaN(parseFloat(a.boxSpacing.vertical))?a.boxSpacing:a.boxSpacing.vertical,a.containerPadding=h,a.boxSpacing=l,c._layoutItems=[],c._awakeItems=[],c._inViewportItems=[],c._leadingOrphans=[],c._trailingOrphans=[],c._containerHeight=a.containerPadding.top,c._rows=[],c._orphans=[],a._widowCount=0,r=a,n=c,e=e.map(function(e){return e.width&&e.height?{aspectRatio:e.width/e.height}:{aspectRatio:e}}),s=[],r.forceAspectRatio&&e.forEach(function(e){e.forcedAspectRatio=!0,e.aspectRatio=r.forceAspectRatio}),e.some(function(e,t){if(isNaN(e.aspectRatio))throw new Error("Item "+t+" has an invalid aspect ratio");if(i=i||p(r,n),o=i.addItem(e),i.isLayoutComplete()){if(s=s.concat(f(r,n,i)),n._rows.length>=r.maxNumRows)return!(i=null);if(i=p(r,n),!o&&(o=i.addItem(e),i.isLayoutComplete())){if(s=s.concat(f(r,n,i)),n._rows.length>=r.maxNumRows)return!(i=null);i=p(r,n)}}}),i&&i.getItems().length&&r.showWidows&&(n._rows.length?(e=n._rows[n._rows.length-1].isBreakoutRow?n._rows[n._rows.length-1].targetRowHeight:n._rows[n._rows.length-1].height,i.forceComplete(!1,e)):i.forceComplete(!1),s=s.concat(f(r,n,i)),r._widowCount=i.getItems().length),n._containerHeight=n._containerHeight-r.boxSpacing.vertical,n._containerHeight=n._containerHeight+r.containerPadding.bottom,{containerHeight:n._containerHeight,widowCount:r._widowCount,boxes:n._layoutItems}}},{"./row":13,merge:14}],"url-parse":[function(e,n,t){!function(s){!function(){"use strict";function p(e){return(e||"").toString().replace(r,"")}function f(e){var t,r=("undefined"!=typeof window?window:void 0!==s?s:"undefined"!=typeof self?self:{}).location||{},n={},r=typeof(e=e||r);if("blob:"===e.protocol)n=new g(unescape(e.pathname),{});else if("string"==r)for(t in n=new g(e,{}),i)delete n[t];else if("object"==r){for(t in e)t in i||(n[t]=e[t]);void 0===n.slashes&&(n.slashes=o.test(e.href))}return n}function d(e){e=p(e);e=t.exec(e);return{protocol:e[1]?e[1].toLowerCase():"",slashes:!!(e[2]&&2<=e[2].length),rest:e[2]&&1===e[2].length?"/"+e[3]:e[3]}}function g(e,t,r){if(e=p(e),!(this instanceof g))return new g(e,t,r);var n,o,i,s,a,c=y.slice(),u=typeof t,h=this,l=0;for("object"!=u&&"string"!=u&&(r=t,t=null),r&&"function"!=typeof r&&(r=w.parse),t=f(t),n=!(u=d(e||"")).protocol&&!u.slashes,h.slashes=u.slashes||n&&t.slashes,h.protocol=u.protocol||t.protocol||"",e=u.rest,u.slashes||(c[3]=[/(.*)/,"pathname"]);l<c.length;l++)"function"!=typeof(i=c[l])?(o=i[0],a=i[1],o!=o?h[a]=e:"string"==typeof o?~(s=e.indexOf(o))&&(e="number"==typeof i[2]?(h[a]=e.slice(0,s),e.slice(s+i[2])):(h[a]=e.slice(s),e.slice(0,s))):(s=o.exec(e))&&(h[a]=s[1],e=e.slice(0,s.index)),h[a]=h[a]||n&&i[3]&&t[a]||"",i[4]&&(h[a]=h[a].toLowerCase())):e=i(e);r&&(h.query=r(h.query)),n&&t.slashes&&"/"!==h.pathname.charAt(0)&&(""!==h.pathname||""!==t.pathname)&&(h.pathname=function(e,t){if(""===e)return t;for(var r=(t||"/").split("/").slice(0,-1).concat(e.split("/")),n=r.length,e=r[n-1],o=!1,i=0;n--;)"."===r[n]?r.splice(n,1):".."===r[n]?(r.splice(n,1),i++):i&&(0===n&&(o=!0),r.splice(n,1),i--);return o&&r.unshift(""),"."!==e&&".."!==e||r.push(""),r.join("/")}(h.pathname,t.pathname)),"/"!==h.pathname.charAt(0)&&h.hostname&&(h.pathname="/"+h.pathname),m(h.port,h.protocol)||(h.host=h.hostname,h.port=""),h.username=h.password="",h.auth&&(i=h.auth.split(":"),h.username=i[0]||"",h.password=i[1]||""),h.origin=h.protocol&&h.host&&"file:"!==h.protocol?h.protocol+"//"+h.host:"null",h.href=h.toString()}var m=e("requires-port"),w=e("querystringify"),o=/^[A-Za-z][A-Za-z0-9+-.]*:[\\/]+/,t=/^([a-z][a-z0-9.+-]*:)?([\\/]{1,})?([\S\s]*)/i,r=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+"),y=[["#","hash"],["?","query"],function(e){return e.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],i={hash:1,query:1};g.prototype={set:function(e,t,r){var n,o=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(r||w.parse)(t)),o[e]=t;break;case"port":o[e]=t,m(t,o.protocol)?t&&(o.host=o.hostname+":"+t):(o.host=o.hostname,o[e]="");break;case"hostname":o[e]=t,o.port&&(t+=":"+o.port),o.host=t;break;case"host":o[e]=t,/:\d+$/.test(t)?(t=t.split(":"),o.port=t.pop(),o.hostname=t.join(":")):(o.hostname=t,o.port="");break;case"protocol":o.protocol=t.toLowerCase(),o.slashes=!r;break;case"pathname":case"hash":t?(n="pathname"===e?"/":"#",o[e]=t.charAt(0)!==n?n+t:t):o[e]=t;break;default:o[e]=t}for(var i=0;i<y.length;i++){var s=y[i];s[4]&&(o[s[1]]=o[s[1]].toLowerCase())}return o.origin=o.protocol&&o.host&&"file:"!==o.protocol?o.protocol+"//"+o.host:"null",o.href=o.toString(),o},toString:function(e){e&&"function"==typeof e||(e=w.stringify);var t=this,r=t.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");r+=t.slashes?"//":"";return t.username&&(r+=t.username,t.password&&(r+=":"+t.password),r+="@"),r+=t.host+t.pathname,(e="object"==typeof t.query?e(t.query):t.query)&&(r+="?"!==e.charAt(0)?"?"+e:e),t.hash&&(r+=t.hash),r}},g.extractProtocol=d,g.location=f,g.trimLeft=p,g.qs=w,n.exports=g}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{querystringify:17,"requires-port":18}],xhr:[function(e,t,r){"use strict";function o(e,t,r){var n=e;return s(t)?(r=t,"string"==typeof e&&(n={uri:e})):n=a(t,{uri:e}),n.callback=r,n}function g(e,t,r){return i(t=o(e,t,r))}function i(n){function t(e){clearTimeout(i),(e=!(e instanceof Error)?new Error(""+(e||"Unknown XMLHttpRequest Error")):e).statusCode=0,s(e,a)}function e(){var e,t,r;o||(clearTimeout(i),e=n.useXDR&&void 0===c.status?200:1223===c.status?204:c.status,t=a,r=null,0!==e?(t={body:function(){var e=void 0;if(c.response?e=c.response:"text"!==c.responseType&&c.responseType||(e=c.responseText||c.responseXML),d)try{e=JSON.parse(e)}catch(e){}return e}(),statusCode:e,method:h,headers:{},url:u,rawRequest:c},c.getAllResponseHeaders&&(t.headers=w(c.getAllResponseHeaders()))):r=new Error("Internal XMLHttpRequest Error"),s(r,t,t.body))}if(void 0===(s=n.callback))throw new Error("callback argument missing");var r,o,i,s=m(s),a={body:void 0,headers:{},statusCode:0,method:void 0,url:void 0,rawRequest:c},c=n.xhr||null,u=(c=c||new(n.cors||n.useXDR?g.XDomainRequest:g.XMLHttpRequest)).url=n.uri||n.url,h=c.method=n.method||"GET",l=n.body||n.data||null,p=c.headers=n.headers||{},f=!!n.sync,d=!1;if("json"in n&&(d=!0,p.accept||p.Accept||(p.Accept="application/json"),"GET"!==h&&"HEAD"!==h&&(p["content-type"]||p["Content-Type"]||(p["Content-Type"]="application/json"),l=JSON.stringify(n.json))),c.onreadystatechange=function(){4===c.readyState&&e()},c.onload=e,c.onerror=t,c.onprogress=function(){},c.ontimeout=t,c.open(h,u,!f,n.username,n.password),f||(c.withCredentials=!!n.withCredentials),!f&&0<n.timeout&&(i=setTimeout(function(){o=!0,c.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",t(e)},n.timeout)),c.setRequestHeader)for(r in p)p.hasOwnProperty(r)&&c.setRequestHeader(r,p[r]);else if(n.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return;return 1}(n.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in n&&(c.responseType=n.responseType),"beforeSend"in n&&"function"==typeof n.beforeSend&&n.beforeSend(c),c.send(l),c}var n=e("global/window"),m=e("once"),s=e("is-function"),w=e("parse-headers"),a=e("xtend");(t.exports=g).XMLHttpRequest=n.XMLHttpRequest||function(){},g.XDomainRequest="withCredentials"in new g.XMLHttpRequest?g.XMLHttpRequest:n.XDomainRequest,function(e){for(var t=0;t<e.length;t++)!function(n){g["delete"===n?"del":n]=function(e,t,r){return t=o(e,t,r),t.method=n.toUpperCase(),i(t)}}(e[t])}(["get","put","post","patch","head","delete"])},{"global/window":3,"is-function":12,once:19,"parse-headers":15,xtend:20}]},{},[1]);
