import{S as t,i as e,s as n,e as s,c as a,a as r,d as o,b as l,D as c,f as i,E as u,k as h,l as f,n as d,F as m,z as p,t as g,g as $,h as v,G as w,H as x,j,m as y,o as E,v as b,r as A,w as k,u as S,I as D,B as I,J as N,K as V}from"../chunks/vendor-aca2138d.js";import{a as q,b as R}from"../chunks/paths-2c73d5fe.js";import{d as M}from"../chunks/env-984c559a.js";import{n as W,T as F,p as P}from"../chunks/index-e2a33479.js";import"../chunks/index-20662748.js";import"../chunks/singletons-bb9012b7.js";function T(t){let n,h;return{c(){n=s("div"),h=s("div"),this.h()},l(t){n=a(t,"DIV",{class:!0});t=r(n);h=a(t,"DIV",{class:!0,style:!0}),r(h).forEach(o),t.forEach(o),this.h()},h(){l(h,"class","progress svelte-1wt7jrm"),c(h,"width",100*t[0]+"%"),l(n,"class","progress-container svelte-1wt7jrm")},m(t,e){i(t,n,e),u(n,h)},p(t,e){1&e&&c(h,"width",100*t[0]+"%")},d(t){t&&o(n)}}}function J(t){let n;return{c(){n=s("div"),this.h()},l(t){n=a(t,"DIV",{class:!0}),r(n).forEach(o),this.h()},h(){l(n,"class","fade svelte-1wt7jrm")},m(t,e){i(t,n,e)},d(t){t&&o(n)}}}function C(t){let s,n,a=t[1]&&T(t),r=.4<=t[0]&&J();return{c(){a&&a.c(),s=h(),r&&r.c(),n=f()},l(t){a&&a.l(t),s=d(t),r&&r.l(t),n=f()},m(t,e){a&&a.m(t,e),i(t,s,e),r&&r.m(t,e),i(t,n,e)},p(t,[e]){t[1]?a?a.p(t,e):(a=T(t),a.c(),a.m(s.parentNode,s)):a&&(a.d(1),a=null),.4<=t[0]?r||(r=J(),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i:m,o:m,d(t){a&&a.d(t),t&&o(s),r&&r.d(t),t&&o(n)}}}function H(t,e,s){let n=0,a=!1;return p(()=>{setTimeout(function t(){s(1,a=!0),s(0,n+=.1);var e=1-n;.15<e&&setTimeout(t,500/e)},250)}),[n,a]}class L extends t{constructor(t){super(),e(this,t,H,C,n,{})}}function O(n){let c,f,p,w,b,A,x=Math.round(n[1])+"";return{c(){c=s("div"),f=s("p"),p=g("fps: "),w=g(x),b=h(),A=s("canvas"),this.h()},l(t){c=a(t,"DIV",{class:!0});var e=r(c);f=a(e,"P",{class:!0});t=r(f);p=$(t,"fps: "),w=$(t,x),t.forEach(o),b=d(e),A=a(e,"CANVAS",{class:!0}),r(A).forEach(o),e.forEach(o),this.h()},h(){l(f,"class","svelte-1hlh8gs"),l(A,"class","svelte-1hlh8gs"),l(c,"class","fps-meter svelte-1hlh8gs")},m(t,e){i(t,c,e),u(c,f),u(f,p),u(f,w),u(c,b),u(c,A),n[2](A)},p(t,[e]){2&e&&x!==(x=Math.round(t[1])+"")&&v(w,x)},i:m,o:m,d(t){t&&o(c),n[2](null)}}}function U(t,e,h){let s,d,f=0;const m=Array(60).fill(0);return p(()=>{const r=s.getContext("2d"),o=s.offsetWidth*devicePixelRatio,l=s.offsetHeight*devicePixelRatio,c={x:w([0,1e3],[0,o]),y:w([0,60],[0,l])};h(0,s.width=o,s),h(0,s.height=l,s),r.fillStyle="rgba(0,200,0, 0.5)";let i=Date.now(),u=requestAnimationFrame(function t(){u=requestAnimationFrame(t);var e=Date.now(),s=e-i;d=1e3/s,m.unshift(s),m.pop(),h(1,f=function(){let t,e=0;for(t=0;t<m.length&&(e+=m[t],!(1e3<e));t+=1);return t}());var n=Math.round(c.x(s)),a=Math.round(c.y(d)),s=r.getImageData(0,0,o,l);r.putImageData(s,-n,0),r.clearRect(o-n,0,o,l),r.fillRect(o-n,l-a,n,a),i=e});return()=>{cancelAnimationFrame(u)}}),[s,f,function(t){x[t?"unshift":"push"](()=>{s=t,h(0,s)})}]}class _ extends t{constructor(t){super(),e(this,t,U,O,n,{})}}function z(t){let n,c,f,m,p,g,$=t[2]&&G();m=new F({props:{navigation:t[0]}});const v=t[5].default,w=N(v,t,t[4],null);return{c(){$&&$.c(),n=h(),c=s("main"),f=s("div"),j(m.$$.fragment),p=h(),w&&w.c(),this.h()},l(t){$&&$.l(t),n=d(t),c=a(t,"MAIN",{class:!0});var e=r(c);f=a(e,"DIV",{class:!0});t=r(f);y(m.$$.fragment,t),t.forEach(o),p=d(e),w&&w.l(e),e.forEach(o),this.h()},h(){l(f,"class","g-column"),l(c,"class","covid-tracker")},m(t,e){$&&$.m(t,e),i(t,n,e),i(t,c,e),u(c,f),E(m,f,null),u(c,p),w&&w.m(c,null),g=!0},p(t,e){t[2]?$?4&e&&b($,1):($=G(),$.c(),b($,1),$.m(n.parentNode,n)):$&&(I(),A($,1,1,()=>{$=null}),S());const s={};1&e&&(s.navigation=t[0]),m.$set(s),w&&w.p&&16&e&&V(w,v,t,t[4],e,null,null)},i(t){g||(b($),b(m.$$.fragment,t),b(w,t),g=!0)},o(t){A($),A(m.$$.fragment,t),A(w,t),g=!1},d(t){$&&$.d(t),t&&o(n),t&&o(c),k(m),w&&w.d(t)}}}function B(t){let s;const n=t[5].default,a=N(n,t,t[4],null);return{c(){a&&a.c()},l(t){a&&a.l(t)},m(t,e){a&&a.m(t,e),s=!0},p(t,e){a&&a.p&&16&e&&V(a,n,t,t[4],e,null,null)},i(t){s||(b(a,t),s=!0)},o(t){A(a,t),s=!1},d(t){a&&a.d(t)}}}function G(t){let s,n;return s=new L({}),{c(){j(s.$$.fragment)},l(t){y(s.$$.fragment,t)},m(t,e){E(s,t,e),n=!0},i(t){n||(b(s.$$.fragment,t),n=!0)},o(t){A(s.$$.fragment,t),n=!1},d(t){k(s,t)}}}function K(t){let s,n,a,r,l,c;const u=[B,z],m=[];function p(t,e){return 2&e&&(s=!(!t[1].path.startsWith("/embeds")&&!t[1].path.startsWith("/promo-images"))),s?0:1}n=p(t,-1),a=m[n]=u[n](t);let g=t[3]&&function(){let s,n;return s=new _({}),{c(){j(s.$$.fragment)},l(t){y(s.$$.fragment,t)},m(t,e){E(s,t,e),n=!0},i(t){n||(b(s.$$.fragment,t),n=!0)},o(t){A(s.$$.fragment,t),n=!1},d(t){k(s,t)}}}();return{c(){a.c(),r=h(),g&&g.c(),l=f()},l(t){a.l(t),r=d(t),g&&g.l(t),l=f()},m(t,e){m[n].m(t,e),i(t,r,e),g&&g.m(t,e),i(t,l,e),c=!0},p(t,[e]){let s=n;n=p(t,e),n===s?m[n].p(t,e):(I(),A(m[s],1,1,()=>{m[s]=null}),S(),a=m[n],a?a.p(t,e):(a=m[n]=u[n](t),a.c()),b(a,1),a.m(r.parentNode,r))},i(t){c||(b(a),b(g),c=!0)},o(t){A(a),A(g),c=!1},d(t){m[n].d(t),t&&o(r),g&&g.d(t),t&&o(l)}}}async function Q({fetch:t}){var e=e=>t(`${q}/${e}`).then(async t=>{if(t.ok)try{return t.json()}catch(t){throw new Error(`Error loading JSON (${e}): ${t.message}`)}throw new Error(`Error loading JSON (${e}): ${t.status}`)});return{props:{navigation:await e("page/navigation.json")},context:{json:e}}}function X(n,t,a){let r,o;D(n,P,t=>a(1,r=t)),D(n,W,t=>a(2,o=t));let{$$slots:e={},$$scope:s}=t,l=t["navigation"];{const n=document.querySelector("link[rel=canonical]");let e=null,s=document.querySelector('meta[name="pubp_event_id"]');if(W.subscribe(t=>{t?e=window.location.href:e&&setTimeout(()=>{n.href=window.location.href,s&&(s.remove(),s=null),dataLayer.push({event:"trackVirtualPage",asset:{url:window.location.href},referrer:{url:e}}),AdSlot4.refreshAds&&AdSlot4.refreshAds()})}),!r.path.startsWith("/embeds")){const n=document.querySelector('[id^="svelte-"]'),c=new URL(R,document.baseURI)["href"],a=document.querySelectorAll("a");for(let t=0;t<a.length;t+=1){const o=a[t];o.href.startsWith(c)&&!n.contains(o)&&(o.rel=o.rel.includes("external")?o.rel:o.rel?`${o.rel} external`:"external")}}}t=M;return n.$$set=t=>{"navigation"in t&&a(0,l=t.navigation),"$$scope"in t&&a(4,s=t.$$scope)},[l,r,o,t,s,e]}export default class extends t{constructor(t){super(),e(this,t,X,K,n,{navigation:0})}}export{Q as load};
