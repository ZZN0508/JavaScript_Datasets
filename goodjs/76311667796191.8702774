(()=>{const r=window.sophi.contexts.get.context;window.sophi.data.environment.clientConfigVersion="1.1";const a=e=>{var t=['[class*="MediaMaximizer__container"]','[class*="SpacingContainer"]','[class*="SiteFooter__content-container"]','[class*="VideoHub__container"]','[class*="NavBar__nav___"]','[class*="dianomi_wrapper"]','[class*="ArticleHeader__container"]','[class*="ArticleBody__container"]',"div"];let i,r=0;for(;!i&&r<=t.length&&(i=e.closest(t[r]),r++,!i););return i},l={},o=(e,t,i,r,a)=>{try{const a=r.className.split("__")[0];if(!e.isCurated&&(["SiteHeader","SiteFooter","NavBar","ArticleBody","ArticleHeader"].includes(a)&&(e.feature=a),"SpacingContainer"===a)){const t=r.querySelector("[class*=heading]:not([class*=MediaStoryCard])");t&&!/story/.test(t.parentElement.className)?e.feature=t.textContent:e.feature="feature"}var o=e.label.split("\n");if(2<=o.length&&(e.label=o[1]),"MediaMaximizer"===a){const i=(t.target||{}).tagName?t.target:t||{};if(l[i.href])return;const r=i.closest("[data-flip-id]");if(!r)return;{const t=r.getAttribute("data-flip-id");if(t&&/\d+-\d+/.test(t)){const[r]=t.split("-");e.position=Number(r)+1,l[i.href]=!0}}}const s=r.querySelector('[class*="step-indicator"]');s&&(e.tab=+s.textContent.split(" ")[0]),e.feature&&(e.feature=sophi.itemImpression.dedupeFeatureName(e.feature.toLowerCase(),r));const n=["feature","label","position","total","uri","top","left","height","width","tab","isCurated"],c=Object.fromEntries(Object.entries(e).filter(([e])=>n.includes(e)));if(i)return c;sophi.itemImpression.linkData.push(c)}catch(e){}};sophi.itemImpression={...sophi.itemImpression,properties:{featureProperties:sophi.itemImpression.properties.featureProperties,source:"hybrid",parentElement:a,data:o},linkData:[],linkProcessed:[]};var e=window.sophiGlobalVariable;window[e].contexts.extract.click=t=>{try{let e=sophi.itemImpression.properties.featureProperties(t,!0,!0);e=o(e,t,!0,a(t)),e.type=e.type||"A"===t.nodeName?"link":"BUTTON"===t.nodeName?"button":void 0;var i={feature:e.feature,position:e.position,linkCount:e.total,label:e.label,type:e.type,isCurated:e.isCurated};return r("click",{clickElement:t,overrideStoredContext:!0},i)}catch(e){sophi.log("Click data extraction failed","error","sophi/config.js",e,{element:t})}};e=window.sophi.settings;if(e.enableClickTracking){const r=e.trackerName,a="function"==typeof e.clickFilter?{filter:e.clickFilter}:null;window[r](`enableLinkClickTracking:${r}`,a,!0,!0,[window.sophi.contexts.extract.click])}window.sophi.startItemImpression()})();
