!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("jquery"),require("angular"),require("lodash")):"function"==typeof define&&define.amd?define(["jquery","angular","lodash"],t):"object"==typeof exports?exports.base=t(require("jquery"),require("angular"),require("lodash")):e.base=t(e.jquery,e.angular,e.lodash)}(this,function(n,o,i){return s=[function(e,t,n){e.exports=n(1)},function(e,t,r){t=function(e,o,t){"use strict";var n=r(2),i=window,n=n.NS;i[n]=i[n]||{},o.NS=n,o.$=r(3),r(4),o.ng=window.angular,o.utils=r(5),o.bus=r(10),o.Promise=r(11),o.fetch=r(12),o.log=r(13),o.error=r(14),o.queue=r(15),o.notification=r(16),o.Widget=r(19),o.portal=r(20),o.startPortal=r(21),o.getWidgetsInfo=r(25),o.createModule=r(26),o.performance=r(27),o.requireWidget=i.requireWidget||r(28),o.bootstrap=function(e,t){return o.ng.bootstrap(e,t)},o.inject=function(e,t){var n=["ng"];return o.utils.isEmpty(t)||n.push(t),o.ng.injector(n).get(e)}}.call(t,r,t,e);void 0===t||(e.exports=t)},function(e,t,n){t=function(e,t,n){"use strict";t.NS="launchpad"}.call(t,n,t,e);void 0===t||(e.exports=t)},function(e,t){e.exports=n},function(e,t){e.exports=o},function(e,t,i){t=function(e,t,n){"use strict";var o=i(6).noConflict();o.mixin(i(7)),o.mixin(i(8)),o.mixin(i(9)),n.exports=o}.call(t,i,t,e);void 0===t||(e.exports=t)},function(e,t){e.exports=i},function(e,t,s){t=function(e,t,n){"use strict";var o=s(6),i=s(2).NS,r=window;t.isMobileDevice=function(){if(r[i].mobileSDK)return!0;for(var e=[/iPhone|iPad|iPod/i,/Android/i,/BlackBerry/i,/Opera Mini/i,/IEMobile/i,/MeeGo/i],t=0,n=e.length;t<n;t++)if(navigator.userAgent.match(e[t]))return!0;return!1},t.isb$Mocked=function(){var e=r.b$;return o.isUndefined(e)||!0===Boolean(e.isMocked)||o.isUndefined(e.bdom)}}.call(t,s,t,e);void 0===t||(e.exports=t)},function(e,t,i){t=function(e,t,n){"use strict";var o=i(6);t.resolvePortalPlaceholders=function(e){if(!o.isString(e))return e;var n=o.get(window,"b$.portal.config.serverRoot","");return(e=o.reduce(["$(contextRoot)","$(contextPath)","$(servicesPath)"],function(e,t){return e.replace(t,n)},e)).replace("[BBHOST]","%5BBBHOST%5D")}}.call(t,i,t,e);void 0===t||(e.exports=t)},function(e,t,o){t=function(e,t,n){"use strict";var s=o(6);t.deprecate=function(e,t,n){function o(e){var t=s.template(e),e=window.console,t=t(n);!r&&s.isObject(e)&&(e.warn(t),r=!0)}var i=window.launchpad&&window.launchpad.config&&window.launchpad.config.usemin;if(i)return e;var r=!1;return s.isString(e)||!i?o(e):function(){return o(t),e.apply(this,arguments)}}}.call(t,o,t,e);void 0===t||(e.exports=t)},function(e,t,n){t=function(e,t,n){"use strict";n.exports=window.gadgets&&window.gadgets.pubsub||{publish:function(){},subscribe:function(){}}}.call(t,n,t,e);void 0===t||(e.exports=t)},function(e,t,r){t=function(e,t,n){"use strict";r(4);var o,i=window.angular;n.exports=window.Promise||(o=i.injector(["ng"]).get("$q"),(i=i.extend(function(e){var t=o.defer();return e(t.resolve,t.reject),t.promise},o)).resolve=function(e){return o.when(e)},i)}.call(t,r,t,e);void 0===t||(e.exports=t)},function(e,t,a){var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t=function(e,t,n){"use strict";a(4);var o,i,r=window.angular,s=(o="BBXSRF",{getToken:function(){var e="",e=("; "+document.cookie).split("; "+o+"=");if(2==e.length)return e.pop().split(";").shift()},getRequestHeaderName:function(){return"X-BBXSRF"}});n.exports=(i=r.injector(["ng"]).get("$http"),function(e,t){return!1!==(t=("object"===(void 0===e?"undefined":c(e))?e:t)||{}).xsrf&&t.method&&"GET"!==t.method.toUpperCase()&&(t.headers=t.headers||{},t.headers[s.getRequestHeaderName()]=s.getToken()),i(r.extend({url:e,method:"get",responseHeaders:{"cache-control":"no-cache"}},t))})}.call(t,a,t,e);void 0===t||(e.exports=t)},function(e,t,i){t=function(e,t,n){"use strict";i(4);var o=window.angular;n.exports=o.injector(["ng"]).get("$log")}.call(t,i,t,e);void 0===t||(e.exports=t)},function(e,t,n){t=function(e,t,n){"use strict";t.captureException=function(e,t){},t.createException=function(t){function e(e){this.name=t||"Error",this.message=e||"Unknown Message"}return(e.prototype=new Error).constructor=e}}.call(t,n,t,e);void 0===t||(e.exports=t)},function(e,t,i){t=function(e,t,n){"use strict";function o(e,t){var n=[],o=t?function(e){for(var t=0,n=[];t<a.length;)a[t].contextId===e?n.push(a.splice(t,1)[0]):t++;return n}(t):a;if("clear"===e)o.length=0;else for(;o.length;)n.push(o.shift()[e]());return r.all(n)}var r=i(11),s={__onPushCallbacks:[]},a=[];s.queue=a,s.__runPushCallbacks=function(t,n){s.__onPushCallbacks.forEach(function(e){e(t,n)})},s.push=function(o,i){return new r(function(e,t){var n={contextId:o.contextId,retry:function(){return r.resolve(i()).then(e,t)},cancel:t};a.push(n),s.__runPushCallbacks(o,n)})},s.hasMore=function(){return 0<a.length},s.onPush=function(e){s.__onPushCallbacks.push(e)},s.retry=function(e){return e.retry().then(function(){return o("clear",e.contextId)})},s.cancel=function(e){return o("cancel",e.contextId)},n.exports=s}.call(t,i,t,e);void 0===t||(e.exports=t)},function(e,t,o){t=function(e,t,n){"use strict";t.network=o(17),t.userActivity=o(18)}.call(t,o,t,e);void 0===t||(e.exports=t)},function(e,t,l){t=function(e,t,n){"use strict";function o(e){a.publish("launchpad.add-notification",c.merge({notification:{container:{template:"templates/offline.html"},id:"offline-notification",level:"info",message:"Network connection has been lost.",closable:!0}},e))}function i(){a.publish("launchpad.remove-notification",{notification:{id:"offline-notification"}})}var r=l(3),s=l(2).NS,a=l(10),c=l(5),u={offline:s+".network.offline",online:s+".network.online"};n.exports=function(){r(window).on("offline",o).on("online",i),a.subscribe(u.offline,o),a.subscribe(u.online,i)}}.call(t,l,t,e);void 0===t||(e.exports=t)},function(e,t,c){t=function(e,t,n){"use strict";function o(){s.publish(a.userActivity)}var i=c(3),r=c(2).NS,s=c(10),a={userActivity:r+".user.activity"};n.exports=function(){i(document).on("click keypress",o)}}.call(t,c,t,e);void 0===t||(e.exports=t)},function(e,t,r){t=function(e,t,n){"use strict";var o=r(5),i=window;if(i.b$,o.isb$Mocked())return!1;i=i.b$.bdom.getNamespace("http://backbase.com/2013/portalView"),i=n.exports=i.getClass("backbaseWidget");i.prototype.createDisplay=function(e){this._displayed=this._displayed||e,!bd.designMode&&!this._displayed&&"LauncherContainer"===this.parentNode.tagName&&("2"===this.getPreference("area")||"3"===this.getPreference("area"))&&-1<this.getPreference("widgetChrome").indexOf("chrome-tab")||(this._displayed=!0,this.constructor.superClass.prototype.createDisplay.call(this))},i.prototype.getPreferenceFromParents=function(e){return function e(t,n){var o;return n.getPreference&&"application"!==n.tagName&&(!(o=n.getPreference(t))&&n.parentNode&&(o=e(t,n.parentNode))),o}(e,this)}}.call(t,r,t,e);void 0===t||(e.exports=t)},function(e,t,n){t=function(e,t,n){"use strict";n.exports=function(){}}.call(t,n,t,e);void 0===t||(e.exports=t)},function(e,t,o){t=function(e,t,n){"use strict";var i=o(5),r=o(12),s=o(22),a=o(19),c=o(24),u=o(16),l=o(3);n.exports=function(e,n){var t,o=n.portalView.getElementsByTagName("page")[0];return t=[n.config.serverRoot,"portals",n.portalName+".xml?pc=false"].join("/"),r({url:t,responseType:"document",transformResponse:function(e){"string"==typeof e&&(e=l.parseXML(e));e=e,e=(window.be&&window.be.xmlToJson)({xml:e});return n.config=i.chain(e.portal.properties).mapValues("value").mapKeys(function(e,t){return i.camelCase(t)}).assign(n.config).value(),n.config}}).then(function(e){return e.data}).then(function(e){var t=window.bd&&window.bd.uiEditingOptions;return e.chromes=t&&t.widgetPreferenceSelections?t.widgetPreferenceSelections.widgetChrome:[],i.assign(a,c(e.chromes,n)),e}).then(function(e){e={logoutUrl:e.serverRoot+"/j_spring_security_logout?portalName="+n.portalName,redirectUrl:e.serverRoot+e.defaultLandingPage,sessionUrl:e.sessionEndpoint,pingUrl:e.sessionValidateEndpoint,startCountdown:e.startCountdownAt,pingInterval:e.sessionCheckInterval,notifyAfterTimeoutDuration:e.notifyAfterTimeoutDuration,userLoggedIn:!!n.loggedInUserId};JSON.parse(o.getPreference("enableTimeout")||!1)&&(u.userActivity(),s.getInstance(e).init())})}}.call(t,o,t,e);void 0===t||(e.exports=t)},function(e,t,m){t=function(e,t,n){"use strict";var o,i,r,s,a=m(5),c=m(13),u=m(12),l=m(23),f=m(2).NS,d=m(10),p={userActivity:f+".user.activity"},g={Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"};function h(e){i=a.chain(e=e||{}).defaults(s).mapValues(a.resolvePortalPlaceholders).value(),this.sessionStorage=e.store||window.sessionStorage,this.isPollingStarted=!1,this.hasSession=!1}function v(e,t){return(e=1<=e?e-1:0)<=1&&t(),e}n.exports=(s={pingUrl:"$(servicesPath)/services/rest/v1/authentication/session",logoutUrl:"$(contextRoot)/j_spring_security_logout",keepAlive:!0,startCountdown:6e4,notifyAfterInterval:5e3,pingInterval:3e4,sessionExpiredKey:"launchpad.sessionExpired",maxConsecutiveFailCount:3,userLoggedIn:!1},h.prototype.init=function(){this.validSessionExisted=!1,this.userEventsOccurred=!1,this.consecutiveFailCount=0,l.afterTimeout(i),i.userLoggedIn&&this.startPolling();var e=this;d.subscribe(p.userActivity,function(){e.userEventsOccurred=!0,r&&e.clearSessionWarning(!0)})},h.prototype.startPolling=function(e){window.setTimeout(this.ping.bind(this),e||i.pingInterval)},h.prototype.ping=function(e){this.isPollingStarted||(this.isPollingStarted=!0,this.makeSessionRequest.apply(this,e||this.userEventsOccurred?[i.pingUrl,{method:"PUT"}]:[i.pingUrl+"/validate",{}]))},h.prototype.makeSessionRequest=function(e,t){u(e,t).then(this.handleStateResponse.bind(this),this.handleNetworkError.bind(this))},h.prototype.handleStateResponse=function(e){this.isPollingStarted=!1,this.userEventsOccurred=!1,l.dataFreshness(e.data),l.checkBages(),this.validSessionExisted=!0,this.consecutiveFailCount>=i.maxConsecutiveFailCount&&l.clearOfflineWarning(),this.consecutiveFailCount=0,1e3*e.data.remainingTime>i.startCountdown?this.clearSessionWarning():this.startSessionWarning(e.data.remainingTime)},h.prototype.logError=function(e){c.error("SessionHandler: ",e)},h.prototype.handleNetworkError=function(e){e=e||{},this.isPollingStarted=!1,this.validSessionExisted&&401===e.status?(this.sessionStorage.clear(),this.sessionStorage.setItem("launchpad.sessionExpired","true"),this.clearSessionWarning(!1,!0),this.logout()):0===e.status&&"timeout"===e.statusText?(this.consecutiveFailCount++,this.consecutiveFailCount<i.maxConsecutiveFailCount?(this.clearSessionWarning(!1,!0),this.startPolling(1e3)):(l.offlineWarning(),this.startPolling())):401!==e.status&&(this.logError("Unknown error Problem validating session: "+e.statusText),this.startPolling())},h.prototype.logout=function(){var n=this;return u(i.logoutUrl,{method:"POST",headers:g}).then(function(e){var t=parseInt(e.status,10);200<=t&&t<300||304===t?window.location.href=i.redirectUrl:n.logError(e.message)})},h.prototype.startSessionWarning=function(e){var t=this;r||(l.sessionWarning(e),e=v(e,t.ping.bind(t)),r=window.setInterval(function(){l.sessionWarning(e),e=v(e,t.ping.bind(t))},1e3),t.startPolling())},h.prototype.clearSessionWarning=function(e,t){e?this.ping(!0):(r&&(window.clearInterval(r),l.removeNotification(),r=null),t||this.startPolling())},{getInstance:function(e){return o=a.isUndefined(o)?new h(e):o}})}.call(t,m,t,e);void 0===t||(e.exports=t)},function(e,t,i){t=function(e,t,n){"use strict";var o=i(10);t.checkBages=function(){o.publish("lpBadgesGetItems")},t.dataFreshness=function(e){var t="TheDataIsMostRecent",n=-1;e&&e.hasOwnProperty(t)&&(n="false"===e[t]||!1===e[t]?1:0),o.publish("lpDataFreshnessValidate",n)},t.offlineWarning=function(){o.publish("launchpad.add-notification",{notification:{id:"offline-warning",level:"WARNING",message:"Experiencing connectivity problems. Please check your internet connection",closable:!1}})},t.clearOfflineWarning=function(){o.publish("launchpad.remove-notification",{notification:{id:"offline-warning"}})},t.sessionWarning=function(e){o.publish("launchpad.add-notification",{notification:{id:"session-timeout",level:"WARNING",timeLeft:e,message:"Session is about to expire",values:{secondsLeft:e},closable:!1,links:[{rel:"/timeout/continue",uri:window.location.hash||"#"}]}})},t.removeNotification=function(){o.publish("launchpad.remove-notification",{notification:{id:"session-timeout"}})},t.afterTimeout=function(e){window.sessionStorage.getItem(e.sessionExpiredKey)&&(window.setTimeout(function(){o.publish("launchpad.add-notification",{notification:{id:"session-expired",level:"INFO",message:"Your session has expired. Please login again.",closable:!0}})},e.notifyAfterTimeoutDuration||5e3),window.sessionStorage.removeItem(e.sessionExpiredKey))}}.call(t,i,t,e);void 0===t||(e.exports=t)},function(e,t,o){t=function(e,t,n){"use strict";var i=o(5);n.exports=function(n,o){n=n||[];return{handlers:{"preferences-form":function(e){var t=e.detail.context,t=o.portalModel.filterPreferences(t.model.preferences.array);e.detail.customPrefsModel=i.each(t,function(e){var t;"widgetChrome"!==(t=e).name||t.inputType.options&&0!==t.inputType.options.length||(e.inputType.name="select-one",e.inputType.options=n)})}}}}}.call(t,o,t,e);void 0===t||(e.exports=t)},function(e,t,u){t=function(e,t,n){"use strict";var o=u(2).NS,s=u(5),i=u(11),r=u(12),a=window,c=a.b$&&a.b$.portal;a[o].getWidgetsInfo=n.exports=function(){var e=function t(e,n){var o,i=[];if(n)for(var r in e)o=t(e[r]),i=i.concat(o);else e.childNodes&&e.childNodes.length||e._children&&e._children.length?(e.childNodes||[]).concat(e._children||[]).forEach(function(e){o=t(e),i=i.concat(o)}):"widget"===e.tag&&i.push({name:e.extendedItemName,version:"x.x.x",src:e.originalItem.preferences.src.value.replace("$(contextRoot)",c.config.serverRoot).replace("index.html","")});return s.chain(i).uniq("name").sortBy("name").value()}(a.b$.portal.portalModel.all,!0),t=e.map(function(t){return r(t.src+"bower.json").then(function(e){t.version=e.data.version},function(){t.version="Can't fetch bower.json"})});i.all(t).then(function(){console.table(e)})}}.call(t,u,t,e);void 0===t||(e.exports=t)},function(e,t,o){t=function(e,t,n){"use strict";var i=o(2).NS;o(4);var r=window.angular;n.exports=function(e,t){var n,o;return!(-1<(e=[i,e].join(".")).indexOf("widget-")&&function(e){try{r.module(e)}catch(e){return!1}return!0}(o=e+".templates"))?n=r.module(e,t):(t.push(o),(n=r.module(e,t)).factory("templateCacheInjector",["$templateCache","lpCoreTemplate",function(n,o){return{put:function(e,t){return e=o.resolvePath(e),n.put(e,t)}}}])),n}}.call(t,o,t,e);void 0===t||(e.exports=t)},function(e,t,c){t=function(e,t,n){"use strict";function o(e){var t={operation:e.operation};return e.id&&(t.id=e.id),e.sender&&(t.operation="["+e.sender+"] "+t.operation),e.tags&&e.tags.length&&(t.operation=t.operation+" | "+JSON.stringify(e.tags)),t}var i=c(2).NS,r=c(10),s=c(5),a={start:i+".performance.start",end:i+".performance.end"};n.exports=function(n){return n=s.defaults(n||{},{bus:r,events:a}),{start:function(e,t){(t=t||{}).operation=e,n.bus.publish(n.events.start,o(t))},end:function(e,t){(t=t||{}).operation=e,n.bus.publish(n.events.end,o(t))}}}}.call(t,c,t,e);void 0===t||(e.exports=t)},function(e,t,n){"use strict";var o,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};o=function(){function r(e){return"function"==typeof e}function s(e){return"object"===(void 0===e?"undefined":i(e))&&!(e instanceof Array)}function n(e,t,n){try{o=n,n=String.prototype.trim?o.trim():o.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),new RegExp("^((https?|file)://|/)","i").test(n)||(n=n.replace(/.js$/,"")),n=e.replace(/[^\/]*$/,"").replace(new RegExp("^"+t),"")+n}catch(e){throw console.log("Error while normalizing module path."),e}var o;return n}function a(e,t){e.classList?e.classList.add(t):e.className+=" "+t}function c(e){var o="lp-widget-loading",i=e.body;e.loading=function(e){a(i,o=e||o)},e.loaded=function(e){var t,n;n=o,(t=i).classList?t.classList.remove(n):t.className=t.className.replace(new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi")," "),"string"==typeof e&&a(i,e)}}var t,u=(t="BBXSRF",{getToken:function(){var e="",e=("; "+document.cookie).split("; "+t+"=");if(2==e.length)return e.pop().split(";").shift()},getRequestHeaderName:function(){return"X-BBXSRF"},getCookieName:e,getFieldName:e});function e(){return t}return window.launchpad=window.launchpad||{},window.launchpad.xsrf=u,window.jQuery&&window.jQuery.ajaxPrefilter(function(e,t,n){!1!==e.xsrf&&"GET"!==e.type.toUpperCase()&&n.setRequestHeader(u.getRequestHeaderName(),e.xsrf||u.getToken())}),function(o,e){var t,i=window.requirejs;r(i)&&(e=n((t=o.myDefinition)?t.sUrl:"",i.s.contexts._.config.baseUrl,e),c(o),i([encodeURI(e)],function(n){var e;r(n)?n.call(null,o):s(e=n)&&void 0!==e._invokeQueue?i(["angular","core"],function(e){function t(e){return!1!==e.xsrf&&"GET"!==e.method&&(e.headers[u.getRequestHeaderName()]=u.getToken()),e}n.config(["lpCoreWidgetProvider","lpCoreI18nProvider","lpCoreTemplateProvider",function(e,t,n){e.useWidgetInstance(o),t.useWidgetInstance(o),n.useWidgetInstance(o)}]),n.config(["$httpProvider",function(e){e.interceptors.push(function(){return{request:t}})}]),e.bootstrap(o.body||o,[n.name])}):s(n)&&r(n.run)&&("string"==typeof o&&(o=void 0!==window.jQuery?window.jQuery(o):window.document.querySelectorAll(o)),n.run.call(null,o))}))}},"object"===i(t)?e.exports=o():(void 0).requireWidget=o()}],a={},r.m=s,r.c=a,r.p="/",r(0);function r(e){if(a[e])return a[e].exports;var t=a[e]={exports:{},id:e,loaded:!1};return s[e].call(t.exports,t,t.exports,r),t.loaded=!0,t.exports}var s,a});
