YUI.add("person-models",function(t){function i(e){i.superclass.constructor.call(this,e)}t.Models[this.name]=i,t.extend(i,t.FlickrModelRegistry,{name:this.name,remote:{read:function(e){return t.ModelFetchers["flickr-people-getInfo"].run(e,this.appContext)}},attributes:{pathAlias:t.PersonModelHelper.attributes.pathAlias,username:t.PersonModelHelper.attributes.username,realname:t.PersonModelHelper.attributes.realname,displayname:t.PersonModelHelper.attributes.displayname,nsid:t.PersonModelHelper.attributes.nsid,url:t.PersonModelHelper.attributes.url,isMe:t.PersonModelHelper.attributes.isMe,buddyicon:{},isPro:{validator:function(e){return t.AttributeHelpers.validateBoolean(e)},setter:function(e){return t.AttributeHelpers.coerceBoolean(e)}},proBadge:{validator:function(e){return t.AttributeHelpers.validateString(e)},setter:function(e){return t.AttributeHelpers.coerceString(e)}},isMinor:{validator:function(e){return t.AttributeHelpers.validateBoolean(e)},setter:function(e){return t.AttributeHelpers.coerceBoolean(e)}},proExpireDate:{validator:function(e){return t.AttributeHelpers.validateDate(e)},setter:function(e){return t.AttributeHelpers.coerceDate(e)},serialize:function(e){return e.format("X")},deserialize:function(e){return t.moment(e,"X")}},canBuyPro:{validator:function(e){return t.AttributeHelpers.validateBoolean(e)},setter:function(e){return t.AttributeHelpers.coerceBoolean(e)},defaultFn:function(){return!1}},isDeleted:{validator:function(e){return t.AttributeHelpers.validateBoolean(e)},setter:function(e){return t.AttributeHelpers.coerceBoolean(e)}},isAdFree:{validator:function(e){return t.AttributeHelpers.validateBoolean(e)},setter:function(e){return t.AttributeHelpers.coerceBoolean(e)}},isNoAds:{derivedBy:["isPro","isAdFree"],readOnly:!0,getter:function(e,t){var i=this.getValue(t,"isPro"),t=this.getValue(t,"isAdFree");return i||t}},hasStats:{validator:function(e){return t.AttributeHelpers.validateBoolean(e)},setter:function(e){return t.AttributeHelpers.coerceBoolean(e)}},hasAdfree:{validator:function(e){return t.AttributeHelpers.validateBoolean(e)},setter:function(e){return t.AttributeHelpers.coerceBoolean(e)}},has1TB:{validator:function(e){return t.AttributeHelpers.validateBoolean(e)},setter:function(e){return t.AttributeHelpers.coerceBoolean(e)}},has2TB:{validator:function(e){return t.AttributeHelpers.validateBoolean(e)},setter:function(e){return t.AttributeHelpers.coerceBoolean(e)}},hasUnlimitedStorage:{validator:function(e){return t.AttributeHelpers.validateBoolean(e)},setter:function(e){return t.AttributeHelpers.coerceBoolean(e)}},hasFreeStandardShipping:{validator:function(e){return t.AttributeHelpers.validateBoolean(e)},setter:function(e){return t.AttributeHelpers.coerceBoolean(e)}},hasFreeEducationalResources:{validator:function(e){return t.AttributeHelpers.validateBoolean(e)},setter:function(e){return t.AttributeHelpers.coerceBoolean(e)}},dateCreated:{validator:function(e){return t.AttributeHelpers.validateDate(e)},setter:function(e){return t.AttributeHelpers.coerceDate(e)},serialize:function(e){return e.format("X")},deserialize:function(e){return t.moment(e,"X")}},location:{defaultFn:function(){return""}},expiringPartner:{validator:function(e){return t.AttributeHelpers.validateBoolean(e)},setter:function(e){return t.AttributeHelpers.coerceBoolean(e)},defaultFn:function(){return!1}},uploadCount:{defaultValue:null},uploadLimit:{defaultValue:null},uploadLimitStatus:{defaultValue:null},isCognitoUser:{defaultValue:null},hasAuthorizedMobile:{defaultValue:null},hasInvalidEmail:{defaultValue:!1},subscription:{defaultValue:{isPastDue:!1,isPro:!1,isClosed:!1}}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-people-getInfo-fetcher","attribute-helpers","person-model-helper"]}),YUI.add("flickr-people-getInfo-fetcher",function(f,o){"use strict";var g=new f.SubscriptionsHelper;f.namespace("ModelFetchers")["flickr-people-getInfo"]={run:function(t,i){var n=this,e=i.getViewer();return e&&e.signedIn&&(t.id===e.nsid||t.nsid===e.nsid)&&(t.storage=1),new f.FlickrPromise({apiResponse:i.callAPI("flickr.people.getInfo",this._processParams(t,i),!0),personModelRegistry:i.getModelRegistry("person-models"),personRelationshipModelRegistry:i.getModelRegistry("person-relationship-models"),personProfileModelRegistry:i.getModelRegistry("person-profile-models"),personPreferencesModelRegistry:i.getModelRegistry("person-preferences-models"),personGroupsModelRegistry:i.getModelRegistry("person-groups-models"),personNotificationsModelRegistry:i.getModelRegistry("person-notifications-models"),photostreamModelRegistry:i.getModelRegistry("photostream-models")}).then(function(e){return n._processResponse(e,t,i)},f.FetcherErrorLogger(o))},_processParams:function(e,t){var i={datecreate:1};if(i.extras=f.APIHelper.request.getRebootPeopleExtras(),YUI.Env.isServer&&e.id===t.request.probableUser?(i.storage=1,i.extras+=", classic_user_id, timezone_dst, unified_search_view_pref, photostream_view_order_pref, photostream_view_as_pref, album_view_layout, download_pref, products_features, subscriptions",i.extras+=", is_minor"):t.getViewer().signedIn&&e.id===t.getViewer().nsid&&(i.extras+=", products_features, subscriptions"),e.extras&&"string"==typeof e.extras&&0<e.extras.length&&(i.extras=i.extras+","+e.extras),e.id)i.user_id=e.id;else{if(!e.pathAlias)throw new Error("`fetch` is missing required params.");i.path_alias=e.pathAlias}return e.storage&&(i.storage=e.storage),i.extras||(i.extras=""),i.extras+=", has_stats",i},_processResponse:function(e,t,i){var n,o=e.apiResponse,r=e.personModelRegistry,s=e.personRelationshipModelRegistry,a=e.personProfileModelRegistry,l=e.personPreferencesModelRegistry,c=e.personGroupsModelRegistry,u=e.personNotificationsModelRegistry,d=e.photostreamModelRegistry,p=o.person,h=i.getViewer(),e=p.id,i=h&&h.signedIn&&e===h.nsid,h={id:e,pathAlias:p.pathAlias,username:p.username&&p.username._content,realname:p.realname&&p.realname._content,buddyicon:f.APIHelper.response.removeProtocolFromURL(p.iconurls),isAdFree:p.isAdFree,isPro:p.ispro,proBadge:p.proBadge,isMinor:p.isMinor,canBuyPro:p.canBuyPro,hasStats:p.hasStats,location:p.location&&p.location._content,hasAdfree:p.hasAdfree,has1TB:p.has1TB,has2TB:p.has2TB,hasUnlimitedStorage:p.hasUnlimitedStorage,hasFreeStandardShipping:p.hasFreeStandardShipping,hasFreeEducationalResources:p.hasFreeEducationalResources,dateCreated:p.datecreate._content,expiringPartner:p.expiringPartner};return p.ispro&&(h.proExpireDate=p.expire),i&&(h.uploadLimit=p.uploadLimit,h.uploadCount=p.uploadCount,h.uploadLimitStatus=p.uploadLimitStatus,h.isCognitoUser=p.isCognitoUser,h.hasInvalidEmail=!1,!p.email||p.email&&(!p.email._content||""===p.email._content)||p.email._content&&-1===p.email._content.indexOf("@")?h.hasInvalidEmail=!0:h.hasInvalidEmail=!1,h.isPro&&(h.subscription=g.parseEffectiveSubscriptionData(!0,o.effectiveSubscriptions))),r.addOrUpdate(h),u.addOrUpdate({id:e,unreadFlickrMailCount:p.unreadMessages?p.unreadMessages.content:0}),s.addOrUpdate({id:e,pathAlias:p.pathAlias,isContact:p.contact,isFriend:p.friend,isFamily:p.family,isIgnored:p.ignored,isIgnoredBy:p.ignoredby,isRevContact:p.revcontact,isRevFriend:p.revfriend,isRevFamily:p.revfamily}),i&&(n={id:e},p.safeSearch&&(n.safeSearch=(p.safeSearch||1)-1),p.viewPrefs&&(n.unifiedSearchViewPref=p.viewPrefs.unifiedSearchViewPref,n.photostreamViewOrderPref=p.viewPrefs.photostreamViewOrderPref,n.photostreamViewAsPref=p.viewPrefs.photostreamViewAsPref,n.albumViewLayoutPref=p.viewPrefs.albumViewLayout,n.galleryViewLayoutPref=p.viewPrefs.galleriesViewLayoutPref),l.exists(e)?l.setValues(e,n):l.add(n)),n={id:e,coverPhotoUrls:f.APIHelper.response.removeProtocolFromURL(p.coverphoto_url),photoCount:p.photos.count.content,location:p.location?p.location.content:null,arrPhotoCount:p.all_rights_reserved_photos_count},p.storage&&(n.storageUsed=p.storage.used.content,n.storageTotal=p.storage.total.content),p.unreadMessages&&(n.unreadMessages=p.unreadMessages.content),a.addOrUpdate(n),c.addOrUpdate({id:e,memberCount:p.groupMemberships?p.groupMemberships.member:null,moderatorCount:p.groupMemberships?p.groupMemberships.moderator:null,adminCount:p.groupMemberships?p.groupMemberships.admin:null,invitedCount:p.groupMemberships?p.groupMemberships.invited:null}),d.addOrUpdate({id:e,pathAlias:p.pathAlias,owner:r.proxy(e),totalItems:p.photos.count&&p.photos.count.content}),p}}},"@VERSION@",{requires:["flickr-promise","subscriptions-helper"],optional:["person-models","person-relationship-models","person-preferences-models","person-profile-models","person-groups-models","photostream-models","api-helper"]}),YUI.add("person-relationship-models",function(o){function t(e){t.superclass.constructor.call(this,e)}o.Models[this.name]=t,o.extend(t,o.FlickrModelRegistry,{name:this.name,remote:{read:function(e){return o.ModelFetchers["flickr-people-getInfo"].run(e,this.appContext)},update:function(e,t){var i=[],n={};return o.Lang.isObject(t,!0)&&(n.user_id=e,n.friend=this.getValue(e,"isFriend"),n.family=this.getValue(e,"isFamily"),"isContact"in t&&(t.isContact.newVal?i.push(o.ModelUpdaters["flickr-contacts-add"].run(n,this.appContext)):i.push(o.ModelUpdaters["flickr-contacts-remove"].run(n,this.appContext))),("isFriend"in t||"isFamily"in t)&&("isFriend"in t&&(n.friend=t.isFriend.newVal),"isFamily"in t&&(n.family=t.isFamily.newVal),i.push(o.ModelUpdaters["flickr-contacts-edit"].run(n,this.appContext))),"isIgnored"in t&&(!0===t.isIgnored.newVal?i.push(o.ModelUpdaters["flickr-contacts-block"].run(n,this.appContext)):i.push(o.ModelUpdaters["flickr-contacts-unblock"].run(n,this.appContext)))),o.Promise.all(i)}},toggleFollowing:function(e){this.getValue(e,"isContact")?this.setValue(e,"isContact",!1):this.setValue(e,"isContact",!0)},toggleFriend:function(e){this.getValue(e,"isFriend")?this.setValue(e,"isFriend",!1):this.setValue(e,"isFriend",!0)},toggleFamily:function(e){this.getValue(e,"isFamily")?this.setValue(e,"isFamily",!1):this.setValue(e,"isFamily",!0)},toggleIgnore:function(e){this.getValue(e,"isIgnored")?this.setValue(e,"isIgnored",!1):this.setValue(e,"isIgnored",!0)},attributes:{pathAlias:{validator:function(e){return o.AttributeHelpers.validateString(e)},setter:function(e){return o.AttributeHelpers.coerceString(e)}},isContact:{validator:function(e){return o.AttributeHelpers.validateBoolean(e)},setter:function(e){return o.AttributeHelpers.coerceBoolean(e)},defaultValue:!1},isFriend:{validator:function(e){return o.AttributeHelpers.validateBoolean(e)},setter:function(e){return o.AttributeHelpers.coerceBoolean(e)},defaultValue:!1},isFamily:{validator:function(e){return o.AttributeHelpers.validateBoolean(e)},setter:function(e){return o.AttributeHelpers.coerceBoolean(e)},defaultValue:!1},isRevContact:{validator:function(e){return o.AttributeHelpers.validateBoolean(e)},setter:function(e){return o.AttributeHelpers.coerceBoolean(e)},defaultValue:!1},isRevFriend:{validator:function(e){return o.AttributeHelpers.validateBoolean(e)},setter:function(e){return o.AttributeHelpers.coerceBoolean(e)},defaultValue:!1},isRevFamily:{validator:function(e){return o.AttributeHelpers.validateBoolean(e)},setter:function(e){return o.AttributeHelpers.coerceBoolean(e)},defaultValue:!1},isIgnoredBy:{validator:function(e){return o.AttributeHelpers.validateBoolean(e)},setter:function(e){return o.AttributeHelpers.coerceBoolean(e)},defaultValue:!1},isIgnored:{validator:function(e){return o.AttributeHelpers.validateBoolean(e)},setter:function(e){return o.AttributeHelpers.coerceBoolean(e)},defaultValue:!1},isMe:{readOnly:!0,getter:function(e,t){var i=this.appContext.getViewer();return!!i&&this.getValue(t,"nsid")===i.nsid}},nsid:{readOnly:!0,defaultFn:function(e){return e}}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-people-getInfo-fetcher","flickr-contacts-add-updater","flickr-contacts-remove-updater","flickr-contacts-edit-updater","flickr-contacts-block-updater","flickr-contacts-unblock-updater","attribute-helpers"]}),YUI.add("banner-helper",function(u,e){var d=require("hermes-core/flog")(e),t=(u.mix({langBundles:["featured-banner"]},u.Localizable),new u.SubscriptionsHelper);u.BannerHelper=function(r){function i(){a=s.sort(function(e,t){return e.priority-t.priority})}var n=this,s=[],a=[],l="products-pro-view",c="pro-checkout-view",o={loginMigration:function(e){return{priority:"priority"in e?e.priority:Number.MAX_VALUE,placement:"placement"in e?e.placement:"header",load:function(){return u.Promise.resolve()},canShowBanner:function(){var e,t=!1,i=r.getViewer().isCognitoUser;return t=!(!r.getViewer().signedIn||i||(e=[l],(i=r.flapp.get("activeView").name)&&-1<e.indexOf(i)))?!0:t},viewName:"login-migration-banner-view",viewConfig:{}}},pastDue:function(e){var n;return{priority:"priority"in e?e.priority:Number.MAX_VALUE,placement:"placement"in e?e.placement:"header",load:function(){var e=r.getViewer();return e.signedIn&&e.isPro?r.getModel("person-models",e.nsid).then(function(e){e=e.getValue("subscription");n=e.isPastDue}):(n=!1,u.Promise.resolve())},canShowBanner:function(){var e,t,i=!1;return i=r.getViewer().signedIn&&r.getViewer().isPro&&(e=[l,c],!((t=r.flapp.get("activeView").name)&&-1<e.indexOf(t)))&&n?!0:i},viewName:"past-due-banner-view",viewConfig:{}}},migrateSubscription:function(e){var n=!1,o=!1;return{priority:"priority"in e?e.priority:Number.MAX_VALUE,placement:"placement"in e?e.placement:"header",load:function(){var e=r.getViewer();return e.signedIn&&e.isPro?r.getModel("effective-subscriptions-models",e.nsid).then(function(e){e&&0<e.getValue("length")&&((e=t.getEligibleSubscription(e,!0))&&(n=e.isBraintreeSubscription||e.isDigitalRiverSubscription&&r.flipper.isFlipped("enable-dr-paypal-migrate-banner"),o=e.nextBillingDate&&e.nextBillingDate.isBefore&&e.nextBillingDate.isBefore(u.moment().add(15,"days"))))}.bind(this)):(n=!1,u.Promise.resolve())},canShowBanner:function(){var e,t,i=!1;return i=r.getViewer().signedIn&&r.getViewer().isPro&&n&&(e=[l,c],!((t=r.flapp.get("activeView").name)&&-1<e.indexOf(t)))&&(!r.getCookie(u.config.flickr.banners.dismiss_braintree_migration_banner_name)||r.getCookie(u.config.flickr.banners.dismiss_braintree_migration_banner_name)&&o)?!0:i},viewName:"subscription-migrate-banner-view",viewConfig:{}}},cookie:function(e){return{priority:"priority"in e?e.priority:Number.MAX_VALUE,placement:"placement"in e?e.placement:"footer",load:function(){return u.Promise.resolve()},canShowBanner:function(){return!r.getCookie(u.config.flickr.banners.dismiss_cookie_banner_name)&&!r.requiresCookieConsent},viewName:"cookie-banner-view",viewConfig:{}}},cookieConsent:function(e){return{priority:"priority"in e?e.priority:Number.MAX_VALUE,placement:"placement"in e?e.placement:"footer",load:function(){return u.Promise.resolve()},canShowBanner:function(){return r.flipper.isFlipped("enable-cookie-consent-execution-hermes")&&r.requiresCookieConsent},viewName:"trustarc-consent-manager-view",viewConfig:{}}},uploadLimit:function(e){var n;return{priority:"priority"in e?e.priority:Number.MAX_VALUE,placement:"placement"in e?e.placement:"header",load:function(){return r.getViewer().signedIn?r.getModel("person-profile-models",r.getViewer().nsid).then(function(e){n=e}):u.Promise.resolve()},canShowBanner:function(){var e=!r.getCookie(u.config.flickr.upload_blocking.dismiss_over_upload_limit_message_cookie_name)&&u.UserLimitsHelper.isOverARRLimit(n,r)&&"products-flickrpro-route"!==r.routeConfig.module,t=!r.getCookie(u.config.flickr.upload_blocking.dismiss_at_upload_limit_message_cookie_name)&&u.UserLimitsHelper.isAtUploadLimit(n,r),i=!r.getCookie(u.config.flickr.upload_blocking.dismiss_near_upload_limit_message_cookie_name)&&u.UserLimitsHelper.isNearUploadLimit(n,r);return r.flipper.isFlipped("enable-upload-limit-messages")&&r.getViewer().signedIn&&"pro-checkout-route"!==r.routeConfig.module&&(e||t||i)},viewName:"upload-limit-banner-view",viewConfig:{}}},macroExplore:function(e){return{priority:"priority"in e?e.priority:Number.MAX_VALUE,placement:"placement"in e?e.placement:"header",load:function(){return u.Promise.resolve()},canShowBanner:function(){return"explore-route"===r.routeConfig.module&&!r.getCookie(u.config.flickr.banners.dismiss_macro_explore_banner_name)},viewName:"macro-explore-banner-view",viewConfig:{},startTime:new Date("2021-05-27T04:00:00.000Z"),endTime:new Date("2021-05-28T04:00:00.000Z")}}};return this.loadBanners=function(e){return s=[],a=[],e=e.map(function(e){return(t=new o[e.type]({priority:e.priority,placement:e.placement}))?t.load().then(function(){s.push(t),i()}).catch(function(e){d.error("Failed to load and register banner.",{err:e})}):u.Promise.resolve();var t}),u.Promise.all(e)},this.getBanners=function(e){var t=[];return e.forEach(function(e){e=function(o){var e,t=a.find(function(e,t){var i=void 0===o||e.placement===o,n=new Date,n=n<e.startTime||n>e.endTime;if(i&&!n&&e.canShowBanner())return!0});if(t)return-1!==(e=s.indexOf(t))&&(s.splice(e,1),i()),t}(e);e&&t.push(e)}),t},this.getQueue=function(){return a},this.typeObjects=o,this.renderBannerView=function(t){return r.getView(t.viewName,t.viewConfig).then(function(e){var t;return r.getView("banner-view",{subview:e}).then(function(e){return(t=e).initialize()}).then(function(){return t})}).then(function(e){n.fire("renderBanner",{placement:t.placement,bannerView:e})})},this},u.augment(u.BannerHelper,u.EventTarget)},"@VERSION@",{requires:["banner-view","event-custom","effective-subscriptions-models","person-models","subscriptions-helper","moment"]}),YUI.add("storage-helper",function(r){r.StorageHelper={setItem:function(e,t,i){i=i?"sessionStorage":"localStorage";if(r.config.win)try{r.config.win[i][e]=t}catch(e){}},getItem:function(e,t){var i,t=t?"sessionStorage":"localStorage";if(r.config.win)try{i=r.config.win[t][e]}catch(e){}return i},remove:function(e,t){t=t?"sessionStorage":"localStorage";if(r.config.win)try{r.config.win[t].removeItem(e)}catch(e){}},hasEntries:function(e,t){var i=t?"sessionStorage":"localStorage",t=!1;if(r.config.win)try{t=void 0!==r.config.win[i][e]}catch(e){}return t},isLocalStorageAvailable:function(){var e="checkLSCompat",t=!1;try{r.config.win.localStorage[e]="checkLSCompatValue",r.config.win.localStorage.removeItem(e),t=!0}catch(e){t=!1}return t}},r.Storage={Instance:{_cache:{},_hasSessionStorage:!0,_clientIdKey:"",getClientIdKey:function(){return this._clientIdKey||(this._clientIdKey=r.config.win.appContext.clientId+"_"),this._clientIdKey},get:function(e){var t,i;try{e=e||"",t=this.getClientIdKey()+e,i=this._hasSessionStorage?r.config.win.sessionStorage.getItem(t):this._cache[t]}catch(e){this._hasSessionStorage=!1}return i},set:function(e,t){var i;try{e&&(i=this.getClientIdKey()+e,this._hasSessionStorage?r.config.win.sessionStorage.setItem(i,t):this._cache[i]=t)}catch(e){this._cache[i]=t,this._hasSessionStorage=!1}},has:function(e){var t,i=!1;try{t=this.getClientIdKey()+e,i=this._hasSessionStorage?!!r.config.win.sessionStorage.getItem(t):!!this._cache[t]}catch(e){this._hasSessionStorage=!1}return i},remove:function(e){var t;try{e=e||"",t=this.getClientIdKey()+e,this._hasSessionStorage?r.config.win.sessionStorage.removeItem(t):this._cache[t]=void 0}catch(e){this._hasSessionStorage=!1}},clear:function(){this.clearByKey(this.getClientIdKey())},clearByKey:function(i){var e,t,n,o=[];try{if(i)if(this._hasSessionStorage){for(e=0,n=r.config.win.sessionStorage.length;e<n;e++)(t=r.config.win.sessionStorage.key(e))&&0===t.indexOf(i)&&o.push(t);for(e=0,n=o.length;e<n;e++)r.config.win.sessionStorage.removeItem(o[e])}else for(r.Object.each(this._cache,function(e,t){0===t.indexOf(i)&&o.push(t)}),e=0,n=o.length;e<n;e++)this._cache[o[e]]=void 0}catch(e){this._hasSessionStorage=!1}}}}},"@VERSION@",{requires:[]}),YUI.add("cookie-catcher",function(r,e){"use strict";function t(e,t){this.cookieLevelBuckets=t,this.appContext=e,this.expireTime=new Date((new Date).getTime()+864e5*r.config.flickr.cookie_consent.consent_context_expiration_days),this.cookieConsentEnabled=this.appContext.flipper.isFlipped("enable-cookie-consent-execution-hermes")}var i=require("hermes-core/flog")(e);t.prototype.getCookieLevel=function(e){return-1!==this.cookieLevelBuckets.required.indexOf(e)?0:-1!==this.cookieLevelBuckets.functional.indexOf(e)?1:-1!==this.cookieLevelBuckets.advertising.indexOf(e)?2:null},t.prototype.setCookieIfAllowed=function(e,t,i){var n,o;this.cookieConsentEnabled&&this.appContext.requiresCookieConsent?(n=this.getCookieLevel(e),o=this.appContext.cookieConsentContext?this.appContext.cookieConsentContext.info.cookieBlock.level:0,(null===n||n<=o&&!YUI.Env.isServer)&&r.Cookie.set(e,t,i)):r.Cookie.set(e,t,i)},t.prototype.getCookieConsentContext=function(){var e=this.appContext.getCookie(r.config.flickr.cookie_consent.consent_context_name),t={},t=this.appContext.flipper.isFlipped("enable-geoblock-cookie-consent")?{needsConsent:0,managed:0,changed:0,info:{cookieBlock:{level:0,blockRan:0}}}:{managed:0,changed:0,info:{cookieBlock:{level:0,blockRan:0}}};if(e)try{t=JSON.parse(e)}catch(e){this.setCookieIfAllowed(r.config.flickr.cookie_consent.consent_context_name,JSON.stringify(t),{path:"/",domain:r.config.flickr.cookies.domain,expires:this.expireTime})}else this.setCookieIfAllowed(r.config.flickr.cookie_consent.consent_context_name,JSON.stringify(t),{path:"/",domain:r.config.flickr.cookies.domain,expires:this.expireTime});return t},t.prototype.updateConsentContext=function(e){var t=this.appContext.cookieConsentContext;t.info.cookieBlock.level!==e&&(t.changed=1,t.info.cookieBlock.level=e,this.setCookieIfAllowed(r.config.flickr.cookie_consent.consent_context_name,JSON.stringify(t),{path:"/",domain:r.config.flickr.cookies.domain,expires:this.expireTime}),r.Snowplough?r.Snowplough.sendStructuredEvent({category:"cookie_consent",action:"consent_update",value:e+".0"}):i.error("Missing Y.Snowplough in CookieCatcher.prototype.updateConsentContext"),console.log("cd refresh"),r.config.win.location.reload())},t.prototype.handleConsentManagerChoice=function(){var e;try{(e=window.truste.cma.callApi("getConsentDecision","flickr.com"))&&e.consentDecision&&Number.isInteger(e.consentDecision)&&this.updateConsentContext(e.consentDecision-1)}catch(e){console.log(e)}},r.namespace("CookieCatcher"),r.CookieCatcher=t},"@VERSION@",{requires:["cookie","io-base","json-parse","storage-helper","murmurhash","url"]}),YUI.add("moola-audience-targeting",function(e,t){"use strict";function i(e,t){this.enableTargeting=e.flipper.isFlipped("enable-audience-tgt"),this.whiteListedAuthData={signedIn:!1,isPro:!1,topTags:!1,camera:!1},t&&this.updateAudienceTargets(t)}require("hermes-core/flog")(t),i.prototype.getAudienceData=function(){return this.enableTargeting?JSON.stringify(this.whiteListedAuthData,function(e,t){switch(typeof t){case"boolean":case"number":return String(t);default:return t}}):""},i.prototype.updateAudienceTargets=function(e){var t={};t.signedIn=e.signedIn||this.whiteListedAuthData.signedIn,t.isPro=e.isPro||this.whiteListedAuthData.isPro,t.topTags=e.topTags||this.whiteListedAuthData.topTags,t.camera=e.camera||this.whiteListedAuthData.camera,this.whiteListedAuthData=t},i.prototype.pullPhotoTags=function(e){var t=[];if(e)for(var i=0;i<e.length&&t.length<3;i++)t.push(e[i].tagRaw);this.updateAudienceTargets({topTags:t})},e.namespace("Audience"),e.Audience=i},"@VERSION@",{requires:[]}),YUI.add("stacking-overlay-manager",function(l,e){var t=require("hermes-core/flog")(e);l.StackingOverlayManager=function(n){var r,s,a=[],o={},e={push:function(e){var t=Object.assign({id:l.guid(),view:void 0,overlayClassList:"",hideOverlay:!1,dismissOnOverlayClick:!0,dismissOnEsc:!0,ignorePointerEvents:!1,disableBodyScroll:!0},e),i=l.one("#stacking-overlay-container");return i.setStyles({display:"block"}),a.push(t),(e=l.Node.create('<div class="fluid-modal-overlay"><div class="balls"></div></div>')).addClass("fluid-modal-overlay"),t.overlayClassList&&e.addClass(t.overlayClassList),t.hideOverlay&&e.addClass("transparent"),t.ignorePointerEvents&&e.addClass("invisible"),i.append(e),i=e.on("click",this.handleClick.bind(this)),o[t.id]={overlay:t,node:e,clickHandler:i},t.disableBodyScroll&&l.one("body").setStyles({overflow:"hidden"}),r=r||l.one("body").on("keyup",this.handleKeyPress.bind(this)),s=s||n.flapp.on("activeViewChange",this.handleActiveViewChange.bind(this)),t.id},pop:function(i){var n,o=this;i&&(n=a.length-1,a.find(function(e,t){return n=t,e.id===i})&&a.slice(n,a.length).reverse().forEach(function(e,t){e.isPopped||(e.isPopped=!0,o.closeView(e),o.findFirstDisableBodyScrollOverlay()===e&&l.one("body").setStyles({overflow:"visible"}),a.pop(),o.deleteOverlay(e))})),a.length<=0&&(l.one("#stacking-overlay-container").setStyles({display:"none"}),r&&(r.detach(),r=void 0),s&&(s.detach(),s=void 0))},deleteOverlay:function(e){var t=o[e.id];t&&(t.clickHandler.detach(),t.node.remove(),delete o[e.id])},handleClick:function(e){var t=e.target,e=a.find(function(e){return o[e.id].node===t});e.dismissOnOverlayClick&&this.pop(e.id)},handleKeyPress:function(e){27!==e.keyCode||(e=this.findLastDismissOnEscOverlay())&&this.pop(e.id)},placeViewAfterOverlay:function(e){e=o[e];e&&e.overlay.view&&e.node.insert(e.overlay.view.get("container"),"after")},findLastDismissOnEscOverlay:function(){return a.slice().reverse().find(function(e){return e.dismissOnEsc})},findFirstDisableBodyScrollOverlay:function(){return a.find(function(e){return e.disableBodyScroll})},closeView:function(e){e&&e.view&&(e.view.close?e.view.close():(t.warn("The overlay associated with the view "+e.view.name+" was popped, but the view has no close function. Consider implementing one."),e.view.destroy({remove:!0})))},handleActiveViewChange:function(e){this.popAll()},popAll:function(){var e=0<a.length?a[0]:void 0;e&&this.pop(e.id)},hasOverlay:function(){return 0<a.length}};return l.augment(e,l.EventTarget),e}},"@VERSION@",{requires:["event-custom"],langBundles:["common"]}),YUI.add("app-context",function(c,e){var n,u=require("hermes-core/flog")(e),r=require("hermes-core/fletrics"),d=YUI.Env.isServer?c.config.flickr.api.server_default_timeout:c.config.flickr.api.client_default_timeout,p=YUI.Env.isServer?c.config.flickr.api.server_retry_timeout:c.config.flickr.api.client_retry_timeout,h=[117,118,119],f=new RegExp(c.config.flickr.api.write_api_method_regex),o=c.config.flickr.model_eviction,g={};(n=c.AppContext=function(e){(e=e||{}).request&&(this.request=e.request),this.params={},this._initializeParams(e),this.viewTiming={},this.modelRegistries={},this.modelImportExport=new c.ModelImportExport(this),this.flickrAPI=new c.FlickrAPI(this.request,this),this.auth=e.auth,this.flapp=e.flapp,this.writeAPICallsMadeOnThisPage={},this._moduleInstances={},this._pendingYUIPromises={},this._loadedViews={},this._apiCalls={},this._previousLocation=null,this._uploadInProgress=!1,this._pendingUploadErrorModal=null,this._concurrentAPICalls=0,this._apiQueueOrder=[],this._apiQueueFunctions={},this._preliminaryNsid=null,this.flipper=new c.Flipper(e.flipper),this.experiments={fullscreen:new c.Experiments.Fullscreen(this),optOut:new c.Experiments.OptOut(this)},this.secure="https"===this.protocol,this.adManager=new c.AdManager(this.params.referrer,this),this.allowThirdPartyContent=!0,this.cookieCatcher=new c.CookieCatcher(this,{required:c.config.flickr.cookie_consent.cookie_level_buckets.required,functional:c.config.flickr.cookie_consent.cookie_level_buckets.functional,advertising:c.config.flickr.cookie_consent.cookie_level_buckets.advertising}),this.requiresCookieConsent=!0,this.flipper.isFlipped("enable-cookie-consent-execution-hermes")&&(YUI.Env.isServer?(this.flipper.isFlipped("enable-geoblock-cookie-consent")&&!this.request.requiresCookieConsent&&(this.requiresCookieConsent=!1),this.cookieConsentContext=this.request.cookie_consent_context):(this.cookieConsentContext=this.cookieCatcher.getCookieConsentContext(),this.flipper.isFlipped("enable-geoblock-cookie-consent")&&!this.cookieConsentContext.needsConsent&&(this.requiresCookieConsent=!1)),this.flipper.isFlipped("enable-geoblock-cookie-consent")&&!this.requiresCookieConsent||(this.allowThirdPartyContent=c.config.flickr.cookie_consent.third_party_level_consent<=this.cookieConsentContext.info.cookieBlock.level)),this.audienceTargets=new c.Audience(this,e.audienceTargets),this.viewportData=new c.ViewportData(this),this.clientId="f"+Math.round(1e4*Math.random()).toString(36),this.isCSSLoaded=!1,this.bannerManager=new c.BannerHelper(this),YUI.Env.isServer||(this.overlayManager=new c.StackingOverlayManager(this)),this.initGlobalEvictionExemptionConfig()}).getValidParams=function(){return["bucket","protocol","buckets","slice","random_slice","referrer","flipper","lang","gp_code","gp_owner","share_code"]},n.prototype={routeConfig:{},_initializeParams:function(t){var i=this;n.getValidParams().forEach(function(e){t.request&&e in t.request&&(t[e]=t.request[e]),e in t&&(i[e]=t[e],i.params[e]=t[e])})},promisedUse:function(e){var o=YUI.Env.isServer,t=o?this.request.app.yui:c;return new c.Promise(function(i,n){t.use(e,function(e,t){o?i(e):t&&"success"in t?t.success?i(e):n(t.msg):n("Y.use: no status provided")})})},instantiateYUIModule:function(t,i){if(!c.Lang.isString(t)||!c.Lang.isFunction(i))return c.Promise.reject("[app-context] `instantiateYUIModule` called without a `name` or `initializer`.");var n=this._moduleInstances,o=this._pendingYUIPromises;return o[t]||(n[t]?o[t]=c.Promise.resolve(n[t]):o[t]=this.promisedUse(t).then(function(){var e=i();return n[t]=e,delete o[t],e})),o[t]},getModelRegistry:function(t){if(!c.Lang.isString(t))return c.Promise.reject("[app-context] `getModelRegistry` called without a `name`.");var i,n=this;return this.instantiateYUIModule(t,function(e){if(!c.Models||!c.Models[t]||"function"!=typeof c.Models[t])throw u.error("There was an error loading the modelregistry",{status:e}),r.increment("appContext.getmodelregistry.failures"),(i=new Error("[app-context] - Model registry failed to load:"+t)).moduleLoadingError=!0,i;e=new c.Models[t](n);return n.modelRegistries[t]=e})},getModel:function(e,i,n){return c.Lang.isString(e)?i?this.getModelRegistry(e).then(function(t){return this._refetchExistingModels&&(c.Lang.isObject(i,!0)?t.attributeSearch(i):[i]).forEach(function(e){this.canEvictModel(t,e)&&this.evictModel(t,e)}.bind(this)),t.get(i,n)}.bind(this)):c.Promise.reject("[app-context] `getModel` ("+e+") called without `modelIdOrAttributes`."):c.Promise.reject("[app-context] `getModel` called without a `registryName`.")},markAsNewlyFetched:function(e,t){this._refetchExistingModels&&(this._refetchedModels[e]||(this._refetchedModels[e]={}),this._refetchedModels[e][t]=!0)},getRoute:function(t){var i,n=this;return this.instantiateYUIModule(t,function(e){if(!c.Routes||!c.Routes[t]||"function"!=typeof c.Routes[t])throw u.error("There was an error loading the route",{status:e}),r.increment("appContext.getroute.failures"),(i=new Error("[app-context] - Route failed to load:"+t)).moduleLoadingError=!0,i;return new c.Routes[t](n)})},getView:function(t,i,e){var n,o=this;return((i=i||{}).appContext=o).promisedUse(t).then(function(e){if(!c.Views||!c.Views[t]||"function"!=typeof c.Views[t])throw u.error("There was an error loading the view",{status:e}),r.increment("appContext.getview.failures"),(n=new Error("[app-context] - View failed to load:"+t)).moduleLoadingError=!0,n;return o._loadedViews[t]=!0,new c.Views[t](i)})},getLoadedViews:function(){return Object.keys(this._loadedViews)},setGPCredentials:function(e){null===e?(delete this.params.gp_owner,delete this.params.gp_code,delete this.params.share_code,delete g.gp_owner,delete g.gp_code,delete g.share_code,u.info("Setting GP credentials to null")):null!==e&&e.gp_code&&(this.params.gp_owner=e.gp_owner,this.params.gp_code=e.gp_code,this.params.share_code=e.share_code,g.gp_owner=e.gp_owner,g.gp_code=e.gp_code,g.share_code=e.share_code,u.info("Setting GP credentials to "+e.share_code))},getCookie:function(e){return YUI.Env.isServer?this.request.cookies[escape(e)]:c.Cookie.get(e)},setCookie:function(e){var t,i,n,o,r;YUI.Env.isServer?u.warn("You can't set a cookie from the server with AppContext -- use middleware.",e):(e.cookieName&&void 0!==e.cookieValue&&e.path||u.error("Missing important parameters to set a cookie"),t=e.cookieName,i=e.cookieValue,n=e.domain||".flickr.com",o=e.path,r=e.expiresMonthsFromNow||3,r=e.expires||c.moment().add(r,"months").toDate(),e.remove&&c.Cookie.remove(t,{domain:e.domain||".flickr.com",path:o}),this.cookieCatcher.setCookieIfAllowed(t,i,{domain:n,path:o,expires:r}))},removeCookie:function(e){YUI.Env.isServer?u.warn("You can't remove a cookie from the server with AppContext -- use middleware.",e):(e.cookieName&&e.path||u.error("Missing important parameters to remove a cookie"),c.Cookie.remove(e.cookieName,{domain:e.domain||".flickr.com",path:e.path}))},reissueCookie:function(e,t){var i;e&&t||u.error("Missing important parameters to reissue a cookie"),i=this.getCookie(e),this.setCookie({cookieName:e,path:t,cookieValue:i})},getViewer:function(){var e={},t=this;return e.getPixelRatio=function(){var e;return e=!(e=YUI.Env.isServer?t.getCookie("density"):window.devicePixelRatio)?1:e},this.auth&&this.auth.signedIn?(e.nsid=this.auth.user.nsid,e.intl=this.auth.intl,e.signedIn=this.auth.signedIn,e.isInsecureGod=this.auth.isInsecureGod,e.isMinor=this.auth.isMinor,e.isPro=this.auth.user.ispro,e.isCognitoUser=this.auth.isCognitoUser,e.prefs={timezonePref:this.auth.timezonePref,downloadAccessPref:this.auth.downloadAccessPref}):this._preliminaryNsid?(e.nsid=this._preliminaryNsid,e.signedIn=!0):(e.signedIn=!1,e.prefs={timezonePref:{name:"",dst:!1,offset:"+00:00",isDefaults:!0}}),e},setPreliminaryViewerNsid:function(e){this._preliminaryNsid=e},getKeyboardManager:function(){return this._keyboardManager||(this._keyboardManager=new c.KeyboardManager),this._keyboardManager},initGlobalEvictionExemptionConfig:function(){var e=this.getViewer().nsid;this._globalEvictionExemptionConfig={},e&&(this._globalEvictionExemptionConfig["person-preferences-models"]={exemptIds:[e]})},getPreviousURL:function(){var e="";return this._previousLocation&&(e=this._previousLocation.pathname,this._previousLocation.querystring&&(e+="?"+this._previousLocation.querystring),this._previousLocation.hash&&(e+="#"+this._previousLocation.hash)),e},getPreviousLocation:function(){return c.merge(this._previousLocation)},setPreviousLocation:function(){this._previousLocation=this.getLocation()},updateModelRefetchState:function(e,t){if(!this.flipper.isFlipped("evict-models-on-navigate")||!e||t)return this._refetchExistingModels=!1,void(this._refetchedModels=null);var i,n;this._previousLocation&&(i=c.URLHelper.getSiteSectionByURL(this._previousLocation.pathname)),e&&(e="/"+e.split("/").slice(3).join("/"),n=c.URLHelper.getSiteSectionByURL(e)),this._refetchExistingModels=void 0,n&&o.entry_refetch_exemptions[n.name]&&(this._refetchExistingModels=!1),i&&o.exit_refetch_exemptions[i.name]&&(this._refetchExistingModels=!1),void 0===this._refetchExistingModels&&n&&i&&(o.transition_refetch_exemptions[i.name]&&o.transition_refetch_exemptions[i.name][n.name]?this._refetchExistingModels=!1:this._refetchExistingModels=i.name!==n.name),void 0===this._refetchExistingModels&&(this._refetchExistingModels=!1),this._refetchedModels={}},hasClientSideRouted:function(){return!!this._clientSideRouted},setClientSideRouted:function(e){this._clientSideRouted=e},getReferrer:function(){var e;try{e=this.flapp.get("activeView").getViewDataFromHistory("referrer")}catch(e){}return e},getLocation:function(){var e;return YUI.Env.isServer?(e={protocol:this.request.protocol,hostname:this.request.hostname,pathname:this.request.path,query:this.request.query,querystring:this.request.query?c.QueryString.stringify(this.request.query):"",hash:""}).href=e.protocol+"://"+e.hostname+this.request.originalUrl:(e={protocol:c.config.win.location.protocol.split(":")[0],hostname:c.config.win.location.hostname,pathname:c.config.win.location.pathname,querystring:c.config.win.location.search.split("?")[1],href:c.config.win.location.href,hash:c.config.win.location.hash}).query=e.querystring?c.QueryString.parse(e.querystring):"",e},getViewCounter:function(){return this._viewCounter||(this._viewCounter=new c.ViewCounter({appContext:this})),this._viewCounter},getBucket:function(e){if(this.buckets)return this.buckets[e]},handleMismatchedNSID:function(){var e=c.mix({langBundles:["common"],appContext:this},c.Localizable);(e=new c.Views.FluidModal({title:e.intlMessage({intlName:"common.ERROR"}),actionButtonLabel:e.intlMessage({intlName:"common.OK"}),textMessage:e.intlMessage({intlName:"common.MISMATCHED_NSID_ERROR"}),appContext:this,dismissOnOverlayClick:!1,dismissOnActionClick:!0,actionButtonDisabled:!1,showCancelButton:!0,hideModalOverlay:!1,showCancelX:!0})).on("actionClick",function(e){c.config.win.location.reload(!0)}),e.show()},mitigateClientPanda:function(e){var t=c.mix({langBundles:["common"],appContext:this},c.Localizable);return(e=new c.Views.FluidModal({title:t.intlMessage({intlName:"common.ERROR"}),actionButtonLabel:t.intlMessage({intlName:"common.OK"}),htmlMessage:t.intlMessage({intlName:e}),appContext:this,dismissOnOverlayClick:!1,dismissOnActionClick:!0,actionButtonDisabled:!1,showCancelButton:!0,hideModalOverlay:!1,showCancelX:!0})).on("actionClick",function(e){c.config.win.location.reload(!0)}),e.show(),c.PromiseChainDestroyer()},callAPI:function(n,t,o,e){var r,s,i,a=this,l=[n,t,null,e];return o=o&&!YUI.Env.isServer,l=null!==g?[n,c.merge(t,g),null,e]:[n,t,null,e],r=n+"__"+Object.keys(t).sort().map(function(e){return encodeURIComponent(e)+"_"+encodeURIComponent(t[e])}).join("__"),this._apiCalls[r]?(c.config.flickr.cameraroll.suppress_logging&&"flickr.cameraroll.getPhotosByOffset"===n||u.log("Reusing API call",{method:n}),1<a._apiQueueOrder.length&&-1<(i=a._apiQueueOrder.indexOf(r))&&i<a._apiQueueOrder.length-1&&(a._apiQueueOrder.splice(i,1),a._apiQueueOrder.push(r)),this._apiCalls[r].then(function(e){return c.clone(e,!0)},function(e){throw c.clone(e,!0)})):(o&&(l.push(null),l.push({timeout:d})),n.match(f)&&this.cacheWriteAPICall(r,n),this._apiCalls[r]=new c.Promise(function(e,t){var i=function(){a.flickrAPI.callMethod.apply(a.flickrAPI,l).then(function(e){return a.onAPICallComplete(r,!0),e},function(e){if(a.onAPICallComplete(r,!1),a.flipper.isFlipped("enable-viewer-nsid-check")&&!YUI.Env.isServer&&-1!==h.indexOf(e.code))return a.handleMismatchedNSID(),c.PromiseChainDestroyer();if(!YUI.Env.isServer&&0===e.status&&0===e.total)return a.mitigateClientPanda("common.NETWORK_CONNECTIVITY_ISSUE");if(o&&(e.clientTimeout||0===e.status||e.transportFailure)){if(u.log("Retrying API call",{method:n}),delete a._apiCalls[r],!YUI.Env.isServer&&c.config.win.beaconError){if(c.config.win.document)try{e.domain=c.config.win.document.domain}catch(e){}c.config.win.beaconError("[app-context] Retrying API ",c.config.win.location.href,e)}return(s=l[l.length-1]).timeout&&(s.timeout=p),a._apiCalls[r]=a.flickrAPI.callMethod.apply(a.flickrAPI,l).then(function(e){return a.onAPICallComplete(r,!0),u.log("Successfully retried API call",{method:n}),c.fire("appContext:apiRetry",{apiMethod:n,code:418}),!YUI.Env.isServer&&c.config.win.beaconError&&c.config.win.beaconError("[app-context] Successful API retry ",c.config.win.location.href,{}),e},function(e){throw a.onAPICallComplete(r,!1),u.log("Failed retry of API call",{method:n}),c.fire("appContext:apiRetry",{apiMethod:n,code:408}),!YUI.Env.isServer&&c.config.win.beaconError&&c.config.win.beaconError("[app-context] Failed API retry ",c.config.win.location.href,{}),e}),a._concurrentAPICalls++,a._apiCalls[r]}throw e}).then(e,t)};YUI.Env.isServer?i():(a._apiQueueOrder.push(r),a._apiQueueFunctions[r]=i,a.callNextInQueue())}),this._apiCalls[r])},callNextInQueue:function(){var e,t=c.config.flickr.api.max_concurrent_api_calls;this._apiQueueOrder.length&&this._concurrentAPICalls<t&&(this._concurrentAPICalls++,e=this._apiQueueOrder.pop(),t=this._apiQueueFunctions[e],delete this._apiQueueFunctions[e],t())},cacheWriteAPICall:function(e,t){this.writeAPICallsMadeOnThisPage[e]={methodName:t,completed:!1,failed:!1}},onAPICallComplete:function(e,t){var i=this.writeAPICallsMadeOnThisPage[e];i&&(i.completed=!0,i.failed=!t),delete this._apiCalls[e],this._concurrentAPICalls--,this.callNextInQueue()},clearWriteAPICallCache:function(){this.writeAPICallsMadeOnThisPage={}},canEvictModel:function(e,t){var i;return!(!e||!t||!e.exists(t)||(i=e.name,(e=this._globalEvictionExemptionConfig[i])&&e.exemptIds&&-1!==e.exemptIds.indexOf(t)||(this._refetchedModels[i]||(this._refetchedModels[i]={}),this._refetchedModels[i][t])))},evictModel:function(e,t){var i=e.name;this.flipper.isFlipped("model-eviction-debugging")&&console.log("[EVICT] "+i+" ["+t+"]"),e.getOwnedModels(t).forEach(function(e){this.canEvictModel(e.registry,e.id)&&this.evictModel(e.registry,e.id)}.bind(this)),e.remove(t)},evictModels:function(e){var t,i,n,o,r=this.getViewer().nsid,s=[],a=this.modelRegistries;for(t in this.writeAPICallsMadeOnThisPage)(i=this.writeAPICallsMadeOnThisPage[t]).completed&&!i.failed&&s.push(i);s.forEach(function(e){}),this._refetchExistingModels&&(r&&(e=c.merge(e,this._globalEvictionExemptionConfig)),Object.keys(this.modelRegistries).forEach(function(t){n=a[t],(o=e[t])?o.exemptIds?(o.evictIds&&u.warn("Error in eviction config for registry: cannot specify both a whitelist (`evictIds`) and a blacklist (`exemptIds`) for model eviction. Ignoring `evictIds` and evicting all models except those listed in `exemptIds`.",{modelRegistryName:t}),n.removeAllExcept(o.exemptIds)):o.evictIds&&o.evictIds.forEach(function(e){a[t].remove(e)}):a[t].removeAll()}))},markUploadInProgress:function(e){this._uploadInProgress=e},uploadIsInProgress:function(){return this._uploadInProgress},storePendingUploadErrorModal:function(e){this._pendingUploadErrorModal=e},retrievePendingUploadErrorModal:function(e){return this._pendingUploadErrorModal},_doForcedServerRender:function(){if(!YUI.Env.isServer||!this.request||!this.request.headers)return!1;var e=!1;return e=(e=e||this.request.UA.isBot)||this.request.UA.isSharingBot,this.flipper.isFlipped("enable-server-render-for-unsupported-browsers")&&(e=e||this.request.UA.isUnsupportedBrowser),e=this.flipper.isFlipped("enable-forced-server-render")?!0:e},getUA:function(){return(YUI.Env.isServer?this:c.config.flickr).request.UA},logViewTiming:function(){var e=this.flapp.get("activeView"),s=0,a=this,l=function(o,r){s++,Object.keys(o.subviews).forEach(function(e){var t=o.subviews[e].get("container").hasClass("requiredToShowOnServer")||o.subviews[e]._params.requiredToShowOnClient,i=r&&t,n="-",n=t?"ðŸ”¹":"-";n=i?"ðŸ”·":n,console.log("| \t\t "+new Array(s).join(" |\t\t ")+" "+n+" "+e+" (initialization: "+a.viewTiming[e].initialize+"ms) (loadState: "+a.viewTiming[e].loadState+"ms)"),l(o.subviews[e],i)}),s--};console.log(this.routeConfig.module+": "+this.routeTiming+"ms"),console.log("ðŸ”· "+e.name+" (initialization: "+this.viewTiming[e.name].initialize+"ms) (loadState: "+this.viewTiming[e.name].loadState+"ms)"),l(e,!0)}}},"@VERSION@",{requires:["oop","flickr-api","flickr-promise","promise","model-import-export","cookie","view-counter","flipper","localizable","moment","experiments-fullscreen","experiments-opt-out","moola-manager","viewport-data","querystring-parse-simple","querystring-stringify-simple","url-helper","browser-support","api-helper","banner-helper","cookie-catcher","moola-audience-targeting","stacking-overlay-manager"]});
