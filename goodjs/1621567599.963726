Dell=window.Dell||{},Dell.ContactDrawer=Dell.ContactDrawer||{},Dell.ContactDrawer.contactDomain=Dell.ContactDrawer.contactDomain||{},function(e,t){(function(){"use strict";var a,n,o=!0,i=!0,r=!1,d="localStorage"in e&&null!=e.localStorage,c="sessionStorage"in e&&null!=e.sessionStorage,s="__amplify__contactDrawerIsHardClosed",l="chat__session__started",u="True"===v("data-EnableMoxieChat")&&!(-1!==navigator.appVersion.indexOf("MSIE 10")),m=!1,g=36e5,p=!1,w=e.matchMedia("(max-width: 767px)").matches,h={openTime:5e3,closedTime:7e3,transitionTime:500,popOutOnPageLoad:!1},f=["GoMoxie:widgetOpened","GoMoxie:widgetMinimized","GoMoxie:widgetClosed","GoMoxie:transactionComplete","GoMoxie:widget:chat:prechatQuestionnaireComplete","GoMoxie:widget:chat:chatSessionStarted","GoMoxie:widget:chat:agentJoinedSession","GoMoxie:widget:chat:agentLeftSession","GoMoxie:widget:chat:chatSessionEnded","GoMoxie:widget:chat:surveyLoaded"];function v(e,a){return a||(a=t.getElementsByClassName("dds__drawer-content")[0]),a.hasAttribute(e)?a.getAttribute(e):""}var S=function(){var e=new XMLHttpRequest;e.withCredentials=!0,e.dataType="json";var a=v("data-personalizedLabelWithoutCategoryName"),n=v("data-personalizationUrl");e.onreadystatechange=function(){if(e.readyState===XMLHttpRequest.DONE&&200===e.status){var n=JSON.parse(e.responseText);if(n){var o="";n.WarmState&&(void 0===(i=o=a)||null==i||i.length<=0||(o=o.replace("{0}",n.DisplayName),t.getElementById("chat-drawer-personalize-message-subtitle").innerHTML=o))}}var i},e.open("GET",n,!0),e.send()};function x(){o=!0,a.classList.add("dds__drawer-open"),n.hidden=!1}function _(){o=!1,a.classList.remove("dds__drawer-open"),setTimeout(function(){n.hidden=!0},h.transitionTime)}function T(){o?_():(x(),null!==dellmetrics_trackdata&&(e.matchMedia("(max-width: 992px)").matches?dellmetrics_trackdata("chatdrawerbottom"):dellmetrics_trackdata("chatdrawerrightrail")))}function y(){if(!m){e.MoxieData||(e.MoxieData={},e.MoxieData.country=v("data-country"),e.MoxieData.language=v("data-language"),e.MoxieData.segment=v("data-segment"));var a=t.createElement("script"),n=v("data-MoxieTenant"),o=v("data-MoxieHost");a.src=v("data-MoxieConciergeUrl"),a.type="text/javascript",a.setAttribute("data-concierge-host",o),a.setAttribute("data-client",n),a.setAttribute("concierge","1"),a.setAttribute("defer","true"),t.getElementsByTagName("body")[0].appendChild(a),m=!0}}function M(){return w?t.querySelector('ul#concierge-widgets-ul li[data-widget="chat"]')&&t.querySelector("button#concierge-tab")?t.querySelector("button#concierge-tab"):void 0:t.querySelector(".con-icon")}function L(e){w?e.dispatchEvent(new Event("touchstart")):e.click()}function D(e){var o,i;if(n=(a=e).querySelector(".dds__drawer-content"),a.querySelector(".dds__drawer-tab").addEventListener("click",function(e){e.preventDefault(),r||(r=!0),A(),T()}),a.querySelector(".dds__drawer-close-button").addEventListener("click",function(){r||(r=!0),A(),_(),null!==dellmetrics_trackdata&&dellmetrics_trackdata("chatdrawerclose")}),o=n.getAttribute("data-contact-drawer"),(i=JSON.parse(o))&&(i.OpenTimeInSeconds&&(h.openTime=1e3*i.OpenTimeInSeconds),i.CloseTimeInSeconds&&(h.closedTime=1e3*i.CloseTimeInSeconds),i.TransitionTimeInMilliseconds&&(h.transitionTime=i.TransitionTimeInMilliseconds),i.OpenTimeInSeconds&&i.CloseTimeInSeconds||(r=!0),i.PopOutOnPageLoad&&(h.popOutOnPageLoad=i.PopOutOnPageLoad)),u){(E(l)||G(l))&&y();var d=a.querySelector(".cd__drawer-displayonconciergeready");d&&d.addEventListener("click",function(e){e.stopImmediatePropagation(),e.preventDefault(),t.querySelector(".cd__drawer-shadow-box").parentNode.classList.add("cd__drawer-moxie-loading"),p=!0;var a=M();a?(t.querySelector(".cd__drawer-shadow-box").parentNode.classList.remove("cd__drawer-moxie-loading"),L(a)):(t.querySelector(".cd__drawer-shadow-box").parentNode.classList.add("cd__drawer-moxie-loading"),y())})}}function E(t){return c&&!(null===e.sessionStorage.getItem(t))}function b(){var t,a;a="1",!E(t=l)&&c&&e.sessionStorage.setItem(t,a)}function C(){O(l,"1")}function I(){var t=new Date;t.setDate(t.getDate()-100),O(l,"0",t.toUTCString()),c&&e.sessionStorage.removeItem(l)}function G(e){return"1"===function(e){for(var a=e+"=",n=t.cookie.split(";"),o=0;o<n.length;o++){var i=n[o].trim();if(0==i.indexOf(a))return i.substring(a.length,i.length)}return""}(e)}function O(e,a,n){t.cookie=e+"="+a+";expires="+n+";path=/; domain=.dell.com;"}function k(t){"function"==typeof e.dellmetrics_trackvalue&&("GoMoxie:widget:chat:chatSessionStarted"===t.type&&t.detail.sessionId?e.dellmetrics_trackvalue(t.type+"|"+t.detail.sessionId):e.dellmetrics_trackvalue(t.type))}function q(){for(var t=0;t<f.length;t++)e.removeEventListener(f[t],k)}function N(){if(e.addEventListener("GoMoxie:widget:chat:chatSessionStarted",b),e.addEventListener("GoMoxie:widget:chat:chatSessionStarted",C),e.addEventListener("GoMoxie:widget:chat:chatSessionEnded",I),function(){q();for(var t=0;t<f.length;t++)e.addEventListener(f[t],k,!1)}(),p)var a=setInterval(function(){var e=M();e&&(t.querySelector(".cd__drawer-shadow-box").parentNode.classList.remove("cd__drawer-moxie-loading"),L(e),clearInterval(a))},50)}function P(){r||(o?(_(),h.closedTime&&setTimeout(function(){return P()},h.closedTime)):(x(),h.openTime&&setTimeout(function(){return P()},h.openTime)))}function A(){try{d&&!z()&&e.localStorage.setItem(s,JSON.stringify({data:!0,expires:Date.now()+g}))}catch(e){console.error(e)}}function z(){return d&&!(null===e.localStorage.getItem(s))}function H(e){D(t.getElementById(e)),h.transitionTime>h.openTime||h.transitionTime>h.closedTime?console.warn("contact drawer transition time is too large"):a&&(a.style.transition="all "+h.transitionTime+"ms ease"),!z()&&(w?"true"===v("data-stay-open-in-mobile").toLowerCase():i)?h.popOutOnPageLoad?(x(),h.openTime&&setTimeout(function(){return P()},h.openTime)):P():o=!1}this.Init=function(e){H(e),"true"==v("data-EnabledPersonalization").toLowerCase()&&S()},e.addEventListener("Dell.ContactDrawer.CloseContactDrawer",function(e){console.log("CD closed"),_()}),u&&(e.addEventListener("GoMoxie:conciergeReady",N),e.addEventListener("unload",function(){e.removeEventListener("GoMoxie:conciergeReady",N),q(),(E(l)||G(l))&&(e.removeEventListener("GoMoxie:widget:chat:chatSessionStarted",b),e.removeEventListener("GoMoxie:widget:chat:chatSessionStarted",C),e.removeEventListener("GoMoxie:widget:chat:chatSessionEnded",I))}))}).call(Dell.ContactDrawer.contactDomain)}(window,document);