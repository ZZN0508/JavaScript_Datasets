window.$jQ111=function(s){function e(e){for(var t,n,i=e[0],r=e[1],a=0,o=[];a<i.length;a++)n=i[a],Object.prototype.hasOwnProperty.call(l,n)&&l[n]&&o.push(l[n][0]),l[n]=0;for(t in r)Object.prototype.hasOwnProperty.call(r,t)&&(s[t]=r[t]);for(u&&u(e);o.length;)o.shift()()}var n={},l={1:0};function c(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return s[e].call(t.exports,t,t.exports,c),t.l=!0,t.exports}c.e=function(i){var e,r,a,t,o,n=[],s=l[i];return 0!==s&&(s?n.push(s[2]):(e=new Promise(function(e,t){s=l[i]=[e,t]}),n.push(s[2]=e),(r=document.createElement("script")).charset="utf-8",r.timeout=120,c.nc&&r.setAttribute("nonce",c.nc),r.src=c.p+"v3/js/"+({0:"liveEventController",2:"vendors~hls",3:"vendors~liveEventController",4:"vendors~three"}[i]||i)+"."+{0:"10c18a5b68fc2b40c260",2:"f84b6e3e53094b0dbbb0",3:"3d4e6b2281432be6ee8e",4:"2a4b95be255e5322f588"}[i]+".min.js",a=new Error,t=function(e){r.onerror=r.onload=null,clearTimeout(o);var t,n=l[i];0!==n&&(n&&(t=e&&("load"===e.type?"missing":e.type),e=e&&e.target&&e.target.src,a.message="Loading chunk "+i+" failed.\n("+t+": "+e+")",a.name="ChunkLoadError",a.type=t,a.request=e,n[1](a)),l[i]=void 0)},o=setTimeout(function(){t({type:"timeout",target:r})},12e4),r.onerror=r.onload=t,document.head.appendChild(r))),Promise.all(n)},c.m=s,c.c=n,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)c.d(n,i,function(e){return t[e]}.bind(null,i));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="https://video-api.wsj.com/api-video/player/",c.oe=function(e){throw console.error(e),e};var t=(i=window.webpackJsonp$jQ111=window.webpackJsonp$jQ111||[]).push.bind(i);i.push=e;for(var i=i.slice(),r=0;r<i.length;r++)e(i[r]);var u=t;return c(c.s=87)}([function(e,t,n){"use strict";n.d(t,"s",function(){return i}),n.d(t,"z",function(){return r}),n.d(t,"y",function(){return a}),n.d(t,"q",function(){return o}),n.d(t,"p",function(){return s}),n.d(t,"v",function(){return l}),n.d(t,"m",function(){return c}),n.d(t,"h",function(){return u}),n.d(t,"g",function(){return d}),n.d(t,"O",function(){return h}),n.d(t,"N",function(){return p}),n.d(t,"P",function(){return _}),n.d(t,"I",function(){return f}),n.d(t,"M",function(){return g}),n.d(t,"R",function(){return v}),n.d(t,"K",function(){return m}),n.d(t,"L",function(){return y}),n.d(t,"Q",function(){return S}),n.d(t,"J",function(){return E}),n.d(t,"G",function(){return b}),n.d(t,"H",function(){return T}),n.d(t,"F",function(){return A}),n.d(t,"r",function(){return w}),n.d(t,"i",function(){return C}),n.d(t,"u",function(){return I}),n.d(t,"l",function(){return P}),n.d(t,"f",function(){return k}),n.d(t,"b",function(){return M}),n.d(t,"e",function(){return D}),n.d(t,"d",function(){return O}),n.d(t,"c",function(){return R}),n.d(t,"a",function(){return N}),n.d(t,"t",function(){return L}),n.d(t,"k",function(){return x}),n.d(t,"w",function(){return F}),n.d(t,"n",function(){return V}),n.d(t,"E",function(){return B}),n.d(t,"A",function(){return U}),n.d(t,"B",function(){return j}),n.d(t,"D",function(){return H}),n.d(t,"C",function(){return K}),n.d(t,"x",function(){return Y}),n.d(t,"o",function(){return q}),n.d(t,"j",function(){return G});var i="RESIZE",r="THUMBNAIL_SHOW",a="THUMBNAIL_HIDE",o="MORE_VIDEOS_SLIDE_SHOW",s="MORE_VIDEOS_SLIDE_HIDE",l="SHOW_ENDSCREEN",c="HIDE_ENDSCREEN",u="CONTROLS_SHOW",d="CONTROLS_HIDE",h="VIDEO_PLAY",p="VIDEO_PAUSE",_="VIDEO_PROGRESS",f="VIDEO_DURATION",g="VIDEO_MUTE",v="VIDEO_UNMUTE",m="VIDEO_ENTER_FULLSCREEN",y="VIDEO_EXIT_FULLSCREEN",S="VIDEO_START_PLAYBACK_INIT",E="VIDEO_END_PLAYBACK_INIT",b="VIDEO_BUFFERING",T="VIDEO_CAN_PLAY",A="UPDATE_VIDEO_DATA",w="REPLACE_PLAYLIST",C="DEQUEUE_PLAYLIST",I="SHOW_COUNTDOWN",P="HIDE_COUNTDOWN",k="AD_STARTED",M="AD_COMPLETE",D="AD_PROGRESS",O="AD_PLAY",R="AD_PAUSE",N="AD_BUFFERING",L="SHOW_CLICK_FOR_SOUND",x="HIDE_CLICK_FOR_SOUND",F="SHOW_LOADING_SPINNER",V="HIDE_LOADING_SPINNER",B="UPDATE_VIDEO_API_LOAD_STATE",U="UPDATE_AD_ERROR_STATE",j="UPDATE_AD_INIT_STATE",H="UPDATE_IMA_LOAD_STATE",K="UPDATE_HLS_JS_LOAD_STATE",Y="SHOW_SAVED_MODAL",q="HIDE_SAVED_MODAL",G="ENABLE_LOGGING"},function(e,t,n){"use strict";n.r(t),n.d(t,"render",function(){return m}),n.d(t,"hydrate",function(){return L}),n.d(t,"createElement",function(){return u}),n.d(t,"h",function(){return u}),n.d(t,"Fragment",function(){return w}),n.d(t,"createRef",function(){return d}),n.d(t,"isValidElement",function(){return i}),n.d(t,"Component",function(){return C}),n.d(t,"cloneElement",function(){return x}),n.d(t,"createContext",function(){return F}),n.d(t,"toChildArray",function(){return _}),n.d(t,"__u",function(){return R}),n.d(t,"options",function(){return E});var E,i,r,a,o,s,l,b={},T=[],c=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function A(e,t){for(var n in t)e[n]=t[n];return e}function y(e){var t=e.parentNode;t&&t.removeChild(e)}function u(e,t,n){var i,r=arguments,a={};for(i in t)"key"!==i&&"ref"!==i&&(a[i]=t[i]);if(3<arguments.length)for(n=[n],i=3;i<arguments.length;i++)n.push(r[i]);if(null!=n&&(a.children=n),"function"==typeof e&&null!=e.defaultProps)for(i in e.defaultProps)void 0===a[i]&&(a[i]=e.defaultProps[i]);return S(e,a,t&&t.key,t&&t.ref,null)}function S(e,t,n,i,r){i={type:e,props:t,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r};return null==r&&(i.__v=i),E.vnode&&E.vnode(i),i}function d(){return{current:null}}function w(e){return e.children}function C(e,t){this.props=e,this.context=t}function I(e,t){if(null==t)return e.__?I(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?I(e):null}function h(e){(!e.__d&&(e.__d=!0)&&r.push(e)&&!p.__r++||o!==E.debounceRendering)&&((o=E.debounceRendering)||a)(p)}function p(){for(var e;p.__r=r.length;)e=r.sort(function(e,t){return e.__v.__b-t.__v.__b}),r=[],e.some(function(e){var t,n,i,r,a;e.__d&&(r=(i=(t=e).__v).__e,(a=t.__P)&&(n=[],a=D(a,i,(e=A({},i)).__v=e,t.__n,void 0!==a.ownerSVGElement,null,n,null==r?I(i):r),v(n,i),a!=r&&function e(t){var n,i;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,n=0;n<t.__k.length;n++)if(null!=(i=t.__k[n])&&null!=i.__e){t.__e=t.__c.base=i.__e;break}return e(t)}}(i)))})}function P(e,t,n,i,r,a,o,s,l,c){var u,d,h,p,_,f,g,v=i&&i.__k||T,m=v.length;for(l==b&&(l=null!=o?o[0]:m?I(i,0):null),n.__k=[],u=0;u<t.length;u++)if(null!=(p=n.__k[u]=null==(p=t[u])||"boolean"==typeof p?null:"string"==typeof p||"number"==typeof p?S(null,p,null,null,p):Array.isArray(p)?S(w,{children:p},null,null,null):null!=p.__e||null!=p.__c?S(p.type,p.props,p.key,null,p.__v):p)){if(p.__=n,p.__b=n.__b+1,null===(h=v[u])||h&&p.key==h.key&&p.type===h.type)v[u]=void 0;else for(d=0;d<m;d++){if((h=v[d])&&p.key==h.key&&p.type===h.type){v[d]=void 0;break}h=null}_=D(e,p,h=h||b,r,a,o,s,l,c),(d=p.ref)&&h.ref!=d&&(g=g||[],h.ref&&g.push(h.ref,null,p),g.push(d,p.__c||_,p)),null!=_?(null==f&&(f=_),l=k(e,p,h,v,o,_,l),"option"==n.type?e.value="":"function"==typeof n.type&&(n.__d=l)):l&&h.__e==l&&l.parentNode!=e&&(l=I(h))}if(n.__e=f,null!=o&&"function"!=typeof n.type)for(u=o.length;u--;)null!=o[u]&&y(o[u]);for(u=m;u--;)null!=v[u]&&R(v[u],v[u]);if(g)for(u=0;u<g.length;u++)O(g[u],g[++u],g[++u])}function _(e){return null==e||"boolean"==typeof e?[]:Array.isArray(e)?T.concat.apply([],e.map(_)):[e]}function k(e,t,n,i,r,a,o){var s,l,c;if(void 0!==t.__d)s=t.__d,t.__d=void 0;else if(r==n||a!=o||null==a.parentNode)e:if(null==o||o.parentNode!==e)e.appendChild(a),s=null;else{for(l=o,c=0;(l=l.nextSibling)&&c<i.length;c+=2)if(l==a)break e;e.insertBefore(a,o),s=o}return void 0!==s?s:a.nextSibling}function f(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]="number"==typeof n&&!1===c.test(t)?n+"px":null==n?"":n}function M(e,t,n,i,r){var a,o,s,l,c;if(r?"className"===t&&(t="class"):"class"===t&&(t="className"),"style"===t)if(a=e.style,"string"==typeof n)a.cssText=n;else{if("string"==typeof i&&(a.cssText="",i=null),i)for(l in i)n&&l in n||f(a,l,"");if(n)for(c in n)i&&n[c]===i[c]||f(a,c,n[c])}else"o"===t[0]&&"n"===t[1]?(o=t!==(t=t.replace(/Capture$/,"")),t=((s=t.toLowerCase())in e?s:t).slice(2),n?(i||e.addEventListener(t,g,o),(e.l||(e.l={}))[t]=n):e.removeEventListener(t,g,o)):"list"!==t&&"tagName"!==t&&"form"!==t&&"type"!==t&&"size"!==t&&!r&&t in e?e[t]=null==n?"":n:"function"!=typeof n&&"dangerouslySetInnerHTML"!==t&&(t!==(t=t.replace(/^xlink:?/,""))?null==n||!1===n?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),n):null==n||!1===n&&!/^ar/.test(t)?e.removeAttribute(t):e.setAttribute(t,n))}function g(e){this.l[e.type](E.event?E.event(e):e)}function D(e,t,n,i,r,a,o,s,l){var c,u,d,h,p,_,f,g,v,m,y,S=t.type;if(void 0!==t.constructor)return null;(c=E.__b)&&c(t);try{e:if("function"==typeof S){if(g=t.props,v=(c=S.contextType)&&i[c.__c],m=c?v?v.props.value:c.__:i,n.__c?f=(u=t.__c=n.__c).__=u.__E:("prototype"in S&&S.prototype.render?t.__c=u=new S(g,m):(t.__c=u=new C(g,m),u.constructor=S,u.render=N),v&&v.sub(u),u.props=g,u.state||(u.state={}),u.context=m,u.__n=i,d=u.__d=!0,u.__h=[]),null==u.__s&&(u.__s=u.state),null!=S.getDerivedStateFromProps&&(u.__s==u.state&&(u.__s=A({},u.__s)),A(u.__s,S.getDerivedStateFromProps(g,u.__s))),h=u.props,p=u.state,d)null==S.getDerivedStateFromProps&&null!=u.componentWillMount&&u.componentWillMount(),null!=u.componentDidMount&&u.__h.push(u.componentDidMount);else{if(null==S.getDerivedStateFromProps&&g!==h&&null!=u.componentWillReceiveProps&&u.componentWillReceiveProps(g,m),!u.__e&&null!=u.shouldComponentUpdate&&!1===u.shouldComponentUpdate(g,u.__s,m)||t.__v===n.__v){u.props=g,u.state=u.__s,t.__v!==n.__v&&(u.__d=!1),(u.__v=t).__e=n.__e,t.__k=n.__k,u.__h.length&&o.push(u),function e(t,n,i){for(var r,a=0;a<t.__k.length;a++)(r=t.__k[a])&&(r.__=t,r.__e&&("function"==typeof r.type&&1<r.__k.length&&e(r,n,i),n=k(i,r,r,t.__k,null,r.__e,n),"function"==typeof t.type&&(t.__d=n)))}(t,s,e);break e}null!=u.componentWillUpdate&&u.componentWillUpdate(g,u.__s,m),null!=u.componentDidUpdate&&u.__h.push(function(){u.componentDidUpdate(h,p,_)})}u.context=m,u.props=g,u.state=u.__s,(c=E.__r)&&c(t),u.__d=!1,u.__v=t,u.__P=e,c=u.render(u.props,u.state,u.context),u.state=u.__s,null!=u.getChildContext&&(i=A(A({},i),u.getChildContext())),d||null==u.getSnapshotBeforeUpdate||(_=u.getSnapshotBeforeUpdate(h,p)),y=null!=c&&c.type==w&&null==c.key?c.props.children:c,P(e,Array.isArray(y)?y:[y],t,n,i,r,a,o,s,l),u.base=t.__e,u.__h.length&&o.push(u),f&&(u.__E=u.__=null),u.__e=!1}else null==a&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=function(e,t,n,i,r,a,o,s){var l,c,u,d,h,p=n.props,_=t.props;if(r="svg"===t.type||r,null!=a)for(l=0;l<a.length;l++)if(null!=(c=a[l])&&((null===t.type?3===c.nodeType:c.localName===t.type)||e==c)){e=c,a[l]=null;break}if(null==e){if(null===t.type)return document.createTextNode(_);e=r?document.createElementNS("http://www.w3.org/2000/svg",t.type):document.createElement(t.type,_.is&&{is:_.is}),a=null,s=!1}if(null===t.type)p!==_&&e.data!=_&&(e.data=_);else{if(null!=a&&(a=T.slice.call(e.childNodes)),u=(p=n.props||b).dangerouslySetInnerHTML,d=_.dangerouslySetInnerHTML,!s){if(null!=a)for(p={},h=0;h<e.attributes.length;h++)p[e.attributes[h].name]=e.attributes[h].value;(d||u)&&(d&&u&&d.__html==u.__html||(e.innerHTML=d&&d.__html||""))}(function(e,t,n,i,r){for(var a in n)"children"===a||"key"===a||a in t||M(e,a,null,n[a],i);for(a in t)r&&"function"!=typeof t[a]||"children"===a||"key"===a||"value"===a||"checked"===a||n[a]===t[a]||M(e,a,t[a],n[a],i)})(e,_,p,r,s),d?t.__k=[]:(l=t.props.children,P(e,Array.isArray(l)?l:[l],t,n,i,"foreignObject"!==t.type&&r,a,o,b,s)),s||("value"in _&&void 0!==(l=_.value)&&l!==e.value&&M(e,"value",l,p.value,!1),"checked"in _&&void 0!==(l=_.checked)&&l!==e.checked&&M(e,"checked",l,p.checked,!1))}return e}(n.__e,t,n,i,r,a,o,l);(c=E.diffed)&&c(t)}catch(e){t.__v=null,E.__e(e,t,n)}return t.__e}function v(e,t){E.__c&&E.__c(t,e),e.some(function(t){try{e=t.__h,t.__h=[],e.some(function(e){e.call(t)})}catch(e){E.__e(e,t.__v)}})}function O(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){E.__e(e,n)}}function R(e,t,n){var i,r,a;if(E.unmount&&E.unmount(e),(i=e.ref)&&(i.current&&i.current!==e.__e||O(i,null,t)),n||"function"==typeof e.type||(n=null!=(r=e.__e)),e.__e=e.__d=void 0,null!=(i=e.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(e){E.__e(e,t)}i.base=i.__P=null}if(i=e.__k)for(a=0;a<i.length;a++)i[a]&&R(i[a],t,n);null!=r&&y(r)}function N(e,t,n){return this.constructor(e,n)}function m(e,t,n){var i,r,a;E.__&&E.__(e,t),r=(i=n===s)?null:n&&n.__k||t.__k,e=u(w,null,[e]),a=[],D(t,(!i&&n||t).__k=e,r||b,b,void 0!==t.ownerSVGElement,n&&!i?[n]:!r&&t.childNodes.length?T.slice.call(t.childNodes):null,a,n||b,i),v(a,e)}function L(e,t){m(e,t,s)}function x(e,t){var n,i;for(i in t=A(A({},e.props),t),2<arguments.length&&(t.children=T.slice.call(arguments,2)),n={},t)"key"!==i&&"ref"!==i&&(n[i]=t[i]);return S(e.type,n,t.key||e.key,t.ref||e.ref,null)}function F(e){var t={},r={__c:"__cC"+l++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var n,i=this;return this.getChildContext||(n=[],this.getChildContext=function(){return t[r.__c]=i,t},this.shouldComponentUpdate=function(t){i.props.value!==t.value&&n.some(function(e){e.context=t.value,h(e)})},this.sub=function(e){n.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n.splice(n.indexOf(e),1),t&&t.call(e)}}),e.children}};return(r.Consumer.contextType=r).Provider.__=r}E={__e:function(e,t){for(var n,i;t=t.__;)if((n=t.__c)&&!n.__)try{if(n.constructor&&null!=n.constructor.getDerivedStateFromError&&(i=!0,n.setState(n.constructor.getDerivedStateFromError(e))),null!=n.componentDidCatch&&(i=!0,n.componentDidCatch(e)),i)return h(n.__E=n)}catch(t){e=t}throw e}},i=function(e){return null!=e&&void 0===e.constructor},C.prototype.setState=function(e,t){var n=this.__s!==this.state?this.__s:this.__s=A({},this.state);(e="function"==typeof e?e(n,this.props):e)&&A(n,e),null!=e&&this.__v&&(t&&this.__h.push(t),h(this))},C.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),h(this))},C.prototype.render=w,r=[],a="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,s=b,l=p.__r=0},function(n,e,t){!function(e){function t(e){return e&&e.Math==Math&&e}n.exports=t("object"==typeof globalThis&&globalThis)||t("object"==typeof window&&window)||t("object"==typeof self&&self)||t("object"==typeof e&&e)||Function("return this")()}.call(this,t(22))},function(e,t,n){"use strict";n.r(t),n.d(t,"Provider",function(){return x}),n.d(t,"connectAdvanced",function(){return z}),n.d(t,"ReactReduxContext",function(){return D}),n.d(t,"connect",function(){return fe}),n.d(t,"batch",function(){return k}),n.d(t,"useDispatch",function(){return Se}),n.d(t,"createDispatchHook",function(){return ye}),n.d(t,"useSelector",function(){return Te}),n.d(t,"createSelectorHook",function(){return be}),n.d(t,"useStore",function(){return me}),n.d(t,"createStoreHook",function(){return ve}),n.d(t,"shallowEqual",function(){return J});var C=n(6),o=n(1);function r(e,t){for(var n in t)e[n]=t[n];return e}function a(e,t){for(var n in e)if("__source"!==n&&!(n in t))return!0;for(var i in t)if("__source"!==i&&e[i]!==t[i])return!0;return!1}var i,t=(i=o.Component,d=i,(u=s).prototype=Object.create(d.prototype),(u.prototype.constructor=u).__proto__=d,s.prototype.shouldComponentUpdate=function(e,t){return a(this.props,e)||a(this.state,t)},s);function s(e){return(e=i.call(this,e)||this).isPureReactComponent=!0,e}var l=o.options.__b;o.options.__b=function(e){e.type&&e.type.t&&e.ref&&(e.props.ref=e.ref,e.ref=null),l&&l(e)};var c="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref")||3911,u=function(e,i){return e?Object(o.toChildArray)(e).reduce(function(e,t,n){return e.concat(i(t,n))},[]):null},d={map:u,forEach:u,count:function(e){return e?Object(o.toChildArray)(e).length:0},only:function(e){if(1!==(e=Object(o.toChildArray)(e)).length)throw new Error("Children.only() expects only one child.");return e[0]},toArray:o.toChildArray},h=o.options.__e;function p(e){return e&&((e=r({},e)).__c=null,e.__k=e.__k&&e.__k.map(p)),e}function _(){this.__u=0,this.o=null,this.__b=null}function f(e){var t=e.__.__c;return t&&t.u&&t.u(e)}function g(){this.i=null,this.l=null}o.options.__e=function(e,t,n){if(e.then)for(var i,r=t;r=r.__;)if((i=r.__c)&&i.__c)return i.__c(e,t.__c);h(e,t,n)},(_.prototype=new o.Component).__c=function(e,t){var n=this;null==n.o&&(n.o=[]),n.o.push(t);function i(){a||(a=!0,r?r(o):o())}var r=f(n.__v),a=!1;t.__c=t.componentWillUnmount,t.componentWillUnmount=function(){i(),t.__c&&t.__c()};var o=function(){var e;if(!--n.__u)for(n.__v.__k[0]=n.state.u,n.setState({u:n.__b=null});e=n.o.pop();)e.forceUpdate()};n.__u++||n.setState({u:n.__b=n.__v.__k[0]}),e.then(i,i)},_.prototype.render=function(e,t){return this.__b&&(this.__v.__k[0]=p(this.__b),this.__b=null),[Object(o.createElement)(o.Fragment,null,t.u?null:e.children),t.u&&e.fallback]};function v(e,t,n){if(++n[1]===n[0]&&e.l.delete(t),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.l.size))for(n=e.i;n;){for(;3<n.length;)n.pop()();if(n[1]<n[0])break;e.i=n=n[2]}}(g.prototype=new o.Component).u=function(n){var i=this,r=f(i.__v),a=i.l.get(n);return a[0]++,function(e){function t(){i.props.revealOrder?(a.push(e),v(i,n,a)):e()}r?r(t):t()}},g.prototype.render=function(e){this.i=null,this.l=new Map;var t=Object(o.toChildArray)(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&t.reverse();for(var n=t.length;n--;)this.l.set(t[n],this.i=[1,0,this.i]);return e.children},g.prototype.componentDidUpdate=g.prototype.componentDidMount=function(){var n=this;n.l.forEach(function(e,t){v(n,t,e)})};var m=((u=y.prototype).getChildContext=function(){return this.props.context},u.render=function(e){return e.children},y);function y(){}function S(e){var t=this,n=e.container,i=Object(o.createElement)(m,{context:t.context},e.vnode);return t.s&&t.s!==n&&(t.v.parentNode&&t.s.removeChild(t.v),Object(o.__u)(t.h),t.p=!1),e.vnode?t.p?(n.__k=t.__k,Object(o.render)(i,n),t.__k=n.__k):(t.v=document.createTextNode(""),Object(o.hydrate)("",n),n.appendChild(t.v),t.p=!0,t.s=n,Object(o.render)(i,n,t.v),t.__k=t.v.__k):t.p&&(t.v.parentNode&&t.s.removeChild(t.v),Object(o.__u)(t.h)),t.h=i,t.componentWillUnmount=function(){t.v.parentNode&&t.s.removeChild(t.v),Object(o.__u)(t.h)},null}var E=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/;o.Component.prototype.isReactComponent={};var b="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,T=o.options.event;function A(e,t){e["UNSAFE_"+t]&&!e[t]&&Object.defineProperty(e,t,{configurable:!1,get:function(){return this["UNSAFE_"+t]},set:function(e){this["UNSAFE_"+t]=e}})}o.options.event=function(e){var t=!((e=T?T(e):e).persist=function(){}),n=!1,i=e.stopPropagation;e.stopPropagation=function(){i.call(e),t=!0};var r=e.preventDefault;return e.preventDefault=function(){r.call(e),n=!0},e.isPropagationStopped=function(){return t},e.isDefaultPrevented=function(){return n},e.nativeEvent=e};var w={configurable:!0,get:function(){return this.class}},I=o.options.vnode;function P(e){return!!e&&e.$$typeof===b}o.options.vnode=function(r){r.$$typeof=b;var e,t,n,i=r.type,a=r.props;if(i){if(a.class!=a.className&&(w.enumerable="className"in a,null!=a.className&&(a.class=a.className),Object.defineProperty(a,"className",w)),"function"!=typeof i){for(n in a.defaultValue&&void 0!==a.value&&(a.value||0===a.value||(a.value=a.defaultValue),delete a.defaultValue),Array.isArray(a.value)&&a.multiple&&"select"===i&&(Object(o.toChildArray)(a.children).forEach(function(e){-1!=a.value.indexOf(e.props.value)&&(e.props.selected=!0)}),delete a.value),null!=a.value&&"textarea"===i&&(a.children=a.value,delete a.value),a)if(e=E.test(n))break;if(e)for(n in t=r.props={},a)t[E.test(n)?n.replace(/[A-Z0-9]/,"-$&").toLowerCase():n]=a[n]}!function(){var e=r.type,t=r.props;if(t&&"string"==typeof e){var n,i={};for(n in t)/^on(Ani|Tra|Tou)/.test(n)&&(t[n.toLowerCase()]=t[n],delete t[n]),i[n.toLowerCase()]=n;i.ondoubleclick&&(t.ondblclick=t[i.ondoubleclick],delete t[i.ondoubleclick]),i.onbeforeinput&&(t.onbeforeinput=t[i.onbeforeinput],delete t[i.onbeforeinput]),i.onchange&&("textarea"===e||"input"===e.toLowerCase()&&!/^fil|che|ra/i.test(t.type))&&(t[e=i.oninput||"oninput"]||(t[e]=t[i.onchange],delete t[i.onchange]))}}(),"function"==typeof i&&!i.m&&i.prototype&&(A(i.prototype,"componentWillMount"),A(i.prototype,"componentWillReceiveProps"),A(i.prototype,"componentWillUpdate"),i.m=!0)}I&&I(r)};var k=function(e,t){return e(t)},M=(o.Fragment,{useState:C.useState,useReducer:C.useReducer,useEffect:C.useEffect,useLayoutEffect:C.useLayoutEffect,useRef:C.useRef,useImperativeHandle:C.useImperativeHandle,useMemo:C.useMemo,useCallback:C.useCallback,useContext:C.useContext,useDebugValue:C.useDebugValue,version:"16.8.0",Children:d,render:function(e,t,n){if(null==t.__k)for(;t.firstChild;)t.removeChild(t.firstChild);return Object(o.render)(e,t),"function"==typeof n&&n(),e?e.__c:null},hydrate:function(e,t,n){return Object(o.hydrate)(e,t),"function"==typeof n&&n(),e?e.__c:null},unmountComponentAtNode:function(e){return!!e.__k&&(Object(o.render)(null,e),!0)},createPortal:function(e,t){return Object(o.createElement)(S,{vnode:e,container:t})},createElement:o.createElement,createContext:o.createContext,createFactory:function(e){return o.createElement.bind(null,e)},cloneElement:function(e){return P(e)?o.cloneElement.apply(null,arguments):e},createRef:o.createRef,Fragment:o.Fragment,isValidElement:P,findDOMNode:function(e){return e&&(e.base||1===e.nodeType&&e)||null},Component:o.Component,PureComponent:t,memo:function(t,i){function n(e){var t=this.props.ref,n=t==e.ref;return!n&&t&&(t.call?t(null):t.current=null),i?!i(this.props,e)||!n:a(this.props,e)}function e(e){return this.shouldComponentUpdate=n,Object(o.createElement)(t,e)}return e.prototype.isReactComponent=!0,e.displayName="Memo("+(t.displayName||t.name)+")",e.t=!0,e},forwardRef:function(i){function e(e,t){var n=r({},e);return delete n.ref,i(n,"object"!=typeof(t=e.ref||t)||"current"in t?t:null)}return e.$$typeof=c,(e.render=e).prototype.isReactComponent=e.t=!0,e.displayName="ForwardRef("+(i.displayName||i.name)+")",e},unstable_batchedUpdates:k,StrictMode:o.Fragment,Suspense:_,SuspenseList:g,lazy:function(t){var n,i,r;function e(e){if(n||(n=t()).then(function(e){i=e.default||e},function(e){r=e}),r)throw r;if(!i)throw n;return Object(o.createElement)(i,e)}return e.displayName="Lazy",e.t=!0,e}}),D=(n(149),M.createContext(null)),O=function(e){e()},R={notify:function(){}};var N=((t=L.prototype).addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.handleChangeWrapper=function(){this.onStateChange&&this.onStateChange()},t.isSubscribed=function(){return Boolean(this.unsubscribe)},t.trySubscribe=function(){var e,i,r;this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.handleChangeWrapper):this.store.subscribe(this.handleChangeWrapper),this.listeners=(e=O,r=i=null,{clear:function(){r=i=null},notify:function(){e(function(){for(var e=i;e;)e.callback(),e=e.next})},get:function(){for(var e=[],t=i;t;)e.push(t),t=t.next;return e},subscribe:function(e){var t=!0,n=r={callback:e,next:null,prev:r};return n.prev?n.prev.next=n:i=n,function(){t&&null!==i&&(t=!1,n.next?n.next.prev=n.prev:r=n.prev,n.prev?n.prev.next=n.next:i=n.next)}}}))},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=R)},L);function L(e,t){this.store=e,this.parentSub=t,this.unsubscribe=null,this.listeners=R,this.handleChangeWrapper=this.handleChangeWrapper.bind(this)}var x=function(e){var t=e.store,n=e.context,e=e.children,i=Object(C.useMemo)(function(){var e=new N(t);return e.onStateChange=e.notifyNestedSubs,{store:t,subscription:e}},[t]),r=Object(C.useMemo)(function(){return t.getState()},[t]);return Object(C.useEffect)(function(){var e=i.subscription;return e.trySubscribe(),r!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}},[i,r]),M.createElement((n||D).Provider,{value:i},e)};function F(){return(F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function V(e,t){if(null==e)return{};for(var n,i={},r=Object.keys(e),a=0;a<r.length;a++)n=r[a],0<=t.indexOf(n)||(i[n]=e[n]);return i}var t=n(54),B=n.n(t),U=n(52),j="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?C.useLayoutEffect:C.useEffect,H=[],K=[null,null];function Y(e,t){e=e[1];return[t.payload,e+1]}function q(e,t,n){j(function(){return e.apply(void 0,t)},n)}function G(e,t,n,i,r,a,o){e.current=i,t.current=r,n.current=!1,a.current&&(a.current=null,o())}function W(e,i,t,r,a,o,s,l,c,u){if(e){var d=!1,h=null,e=function(){if(!d){var e,t,n=i.getState();try{e=r(n,a.current)}catch(e){h=t=e}t||(h=null),e===o.current?s.current||c():(o.current=e,l.current=e,s.current=!0,u({type:"STORE_UPDATED",payload:{error:t}}))}};return t.onStateChange=e,t.trySubscribe(),e(),function(){if(d=!0,t.tryUnsubscribe(),t.onStateChange=null,h)throw h}}}var Q=function(){return[null,0]};function z(T,e){var t=e=void 0===e?{}:e,e=t.getDisplayName,r=void 0===e?function(e){return"ConnectAdvanced("+e+")"}:e,e=t.methodName,a=void 0===e?"connectAdvanced":e,e=t.renderCountProp,o=void 0===e?void 0:e,e=t.shouldHandleStateChanges,A=void 0===e||e,e=t.storeKey,s=void 0===e?"store":e,e=(t.withRef,t.forwardRef),l=void 0!==e&&e,e=t.context,e=void 0===e?D:e,c=V(t,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"]),w=e;return function(S){var e=S.displayName||S.name||"Component",t=r(e),E=F({},c,{getDisplayName:r,methodName:a,renderCountProp:o,shouldHandleStateChanges:A,storeKey:s,displayName:t,wrappedComponentName:e,WrappedComponent:S}),e=c.pure,b=e?C.useMemo:function(e){return e()};function n(n){var e=Object(C.useMemo)(function(){var e=n.forwardedRef,t=V(n,["forwardedRef"]);return[n.context,e,t]},[n]),t=e[0],i=e[1],r=e[2],a=Object(C.useMemo)(function(){return t&&t.Consumer&&Object(U.isContextConsumer)(M.createElement(t.Consumer,null))?t:w},[t,w]),o=Object(C.useContext)(a),s=Boolean(n.store)&&Boolean(n.store.getState)&&Boolean(n.store.dispatch);Boolean(o)&&Boolean(o.store);var l=(s?n:o).store,c=Object(C.useMemo)(function(){return T(l.dispatch,E)},[l]),u=Object(C.useMemo)(function(){if(!A)return K;var e=new N(l,s?null:o.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]},[l,s,o]),d=u[0],h=u[1],p=Object(C.useMemo)(function(){return s?o:F({},o,{subscription:d})},[s,o,d]),_=Object(C.useReducer)(Y,H,Q),f=_[0][0],e=_[1];if(f&&f.error)throw f.error;var u=Object(C.useRef)(),g=Object(C.useRef)(r),v=Object(C.useRef)(),_=Object(C.useRef)(!1),m=b(function(){return v.current&&r===g.current?v.current:c(l.getState(),r)},[l,f,r]);q(G,[g,u,_,r,m,v,h]),q(W,[A,l,d,c,g,u,_,v,h,e],[l,d,c]);var y=Object(C.useMemo)(function(){return M.createElement(S,F({},m,{ref:i}))},[i,S,m]);return Object(C.useMemo)(function(){return A?M.createElement(a.Provider,{value:p},y):y},[a,y,p])}var i=e?M.memo(n):n;if(i.WrappedComponent=S,i.displayName=t,l){e=M.forwardRef(function(e,t){return M.createElement(i,F({},e,{forwardedRef:t}))});return e.displayName=t,e.WrappedComponent=S,B()(e,S)}return B()(i,S)}}function X(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function J(e,t){if(X(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(var r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!X(e[n[r]],t[n[r]]))return!1;return!0}var Z=n(5);function $(r){return function(e,t){var n=r(e,t);function i(){return n}return i.dependsOnOwnProps=!1,i}}function ee(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function te(r){return function(e,t){t.displayName;var i=function(e,t){return i.dependsOnOwnProps?i.mapToProps(e,t):i.mapToProps(e)};return i.dependsOnOwnProps=!0,i.mapToProps=function(e,t){i.mapToProps=r,i.dependsOnOwnProps=ee(r);var n=i(e,t);return"function"==typeof n&&(i.mapToProps=n,i.dependsOnOwnProps=ee(n),n=i(e,t)),n},i}}function ne(e,t,n){return F({},n,{},e,{},t)}var ie=[function(e){return"function"==typeof e?(s=e,function(e,t){t.displayName;var i,r=t.pure,a=t.areMergedPropsEqual,o=!1;return function(e,t,n){n=s(e,t,n);return o?r&&a(n,i)||(i=n):(o=!0,i=n),i}}):void 0;var s},function(e){return e?void 0:function(){return ne}}];function re(o,s,l,c,e){var u,d,h,p,_,f=e.areStatesEqual,g=e.areOwnPropsEqual,v=e.areStatePropsEqual,m=!1;return function(e,t){return m?(n=e,r=!g(i=t,d),a=!f(n,u),u=n,d=i,r&&a?(h=o(u,d),s.dependsOnOwnProps&&(p=s(c,d)),_=l(h,p,d)):r?(o.dependsOnOwnProps&&(h=o(u,d)),s.dependsOnOwnProps&&(p=s(c,d)),_=l(h,p,d)):(a&&(r=o(u,d),a=!v(r,h),h=r,a&&(_=l(h,p,d))),_)):(h=o(u=e,d=t),p=s(c,d),_=l(h,p,d),m=!0,_);var n,i,r,a}}function ae(e,t){var n=t.initMapStateToProps,i=t.initMapDispatchToProps,r=t.initMergeProps,t=V(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),n=n(e,t),i=i(e,t),r=r(e,t);return(t.pure?re:function(n,i,r,a){return function(e,t){return r(n(e,t),i(a,t),t)}})(n,i,r,e,t)}function oe(n,e,i){for(var t=e.length-1;0<=t;t--){var r=e[t](n);if(r)return r}return function(e,t){throw new Error("Invalid value of type "+typeof n+" for "+i+" argument when connecting component "+t.wrappedComponentName+".")}}function se(e,t){return e===t}var le,ce,ue,de,he,pe,_e,fe=(ue=void 0===(le=(ce=void 0===le?{}:le).connectHOC)?z:le,de=void 0===(le=ce.mapStateToPropsFactories)?[function(e){return"function"==typeof e?te(e):void 0},function(e){return e?void 0:$(function(){return{}})}]:le,he=void 0===(le=ce.mapDispatchToPropsFactories)?[function(e){return"function"==typeof e?te(e):void 0},function(e){return e?void 0:$(function(e){return{dispatch:e}})},function(t){return t&&"object"==typeof t?$(function(e){return Object(Z.bindActionCreators)(t,e)}):void 0}]:le,pe=void 0===(le=ce.mergePropsFactories)?ie:le,_e=void 0===(ce=ce.selectorFactory)?ae:ce,function(e,t,n,i){var r=i=void 0===i?{}:i,a=r.pure,o=void 0===a||a,s=r.areStatesEqual,l=void 0===s?se:s,c=r.areOwnPropsEqual,i=void 0===c?J:c,a=r.areStatePropsEqual,s=void 0===a?J:a,c=r.areMergedPropsEqual,a=void 0===c?J:c,c=V(r,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),r=oe(e,de,"mapStateToProps"),t=oe(t,he,"mapDispatchToProps"),n=oe(n,pe,"mergeProps");return ue(_e,F({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:r,initMapDispatchToProps:t,initMergeProps:n,pure:o,areStatesEqual:l,areOwnPropsEqual:i,areStatePropsEqual:s,areMergedPropsEqual:a},c))});function ge(){return Object(C.useContext)(D)}function ve(e){var t=(e=void 0===e?D:e)===D?ge:function(){return Object(C.useContext)(e)};return function(){return t().store}}var me=ve();function ye(e){var t=(e=void 0===e?D:e)===D?me:ve(e);return function(){return t().dispatch}}var Se=ye(),Ee=function(e,t){return e===t};function be(e){var i=(e=void 0===e?D:e)===D?ge:function(){return Object(C.useContext)(e)};return function(e,t){void 0===t&&(t=Ee);var n=i();return function(e,t,n,i){var r,a=Object(C.useReducer)(function(e){return e+1},0)[1],o=Object(C.useMemo)(function(){return new N(n,i)},[n,i]),s=Object(C.useRef)(),l=Object(C.useRef)(),c=Object(C.useRef)();try{r=e!==l.current||s.current?e(n.getState()):c.current}catch(e){throw s.current&&(e.message+="\nThe error may be correlated with this previous error:\n"+s.current.stack+"\n\n"),e}return j(function(){l.current=e,c.current=r,s.current=void 0}),j(function(){function e(){try{var e=l.current(n.getState());if(t(e,c.current))return;c.current=e}catch(e){s.current=e}a({})}return o.onStateChange=e,o.trySubscribe(),e(),function(){return o.tryUnsubscribe()}},[n,o]),r}(e,t,n.store,n.subscription)}}var Te=be(),O=k},function(e,t,n){var i=n(2),r=n(55),a=n(8),o=n(59),s=n(60),n=n(91),l=r("wks"),c=i.Symbol,u=n?c:c&&c.withoutSetter||o;e.exports=function(e){return a(l,e)||(s&&a(c,e)?l[e]=c[e]:l[e]=u("Symbol."+e)),l[e]}},function(e,t,n){"use strict";n.r(t),n.d(t,"__DO_NOT_USE__ActionTypes",function(){return p}),n.d(t,"applyMiddleware",function(){return u}),n.d(t,"bindActionCreators",function(){return o}),n.d(t,"combineReducers",function(){return r}),n.d(t,"compose",function(){return c}),n.d(t,"createStore",function(){return _});function i(){return Math.random().toString(36).substring(7).split("").join(".")}var h=n(50),p={INIT:"@@redux/INIT"+i(),REPLACE:"@@redux/REPLACE"+i(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+i()}};function _(e,t,n){if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(_)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var i=e,r=t,a=[],o=a,s=!1;function l(){o===a&&(o=a.slice())}function c(){if(s)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return r}function u(t){if("function"!=typeof t)throw new Error("Expected the listener to be a function.");if(s)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var n=!0;return l(),o.push(t),function(){if(n){if(s)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");n=!1,l();var e=o.indexOf(t);o.splice(e,1),a=null}}}function d(e){if(!function(e){if("object"==typeof e&&null!==e){for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}}(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(s)throw new Error("Reducers may not dispatch actions.");try{s=!0,r=i(r,e)}finally{s=!1}for(var t=a=o,n=0;n<t.length;n++)(0,t[n])();return e}return d({type:p.INIT}),(t={dispatch:d,subscribe:u,getState:c,replaceReducer:function(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");i=e,d({type:p.REPLACE})}})[h.a]=function(){var e,n=u;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function t(){e.next&&e.next(c())}return t(),{unsubscribe:n(t)}}})[h.a]=function(){return this},e},t}function r(e){for(var t=Object.keys(e),u={},n=0;n<t.length;n++){var i=t[n];"function"==typeof e[i]&&(u[i]=e[i])}var d,r,h=Object.keys(u);try{r=u,Object.keys(r).forEach(function(e){var t=r[e];if(void 0===t(void 0,{type:p.INIT}))throw new Error('Reducer "'+e+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===t(void 0,{type:p.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+e+"\" returned undefined when probed with a random type. Don't try to handle "+p.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}catch(e){d=e}return function(e,t){if(void 0===e&&(e={}),d)throw d;for(var n=!1,i={},r=0;r<h.length;r++){var a=h[r],o=u[a],s=e[a],l=o(s,t);if(void 0===l){var c=(c=a,"Given "+((o=(o=t)&&o.type)&&'action "'+String(o)+'"'||"an action")+', reducer "'+c+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.');throw new Error(c)}i[a]=l,n=n||l!==s}return(n=n||h.length!==Object.keys(e).length)?i:e}}function a(e,t){return function(){return t(e.apply(this,arguments))}}function o(e,t){if("function"==typeof e)return a(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var n,i={};for(n in e){var r=e[n];"function"==typeof r&&(i[n]=a(r,t))}return i}function s(t,e){var n=Object.keys(t);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(t)),n=e?n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}):n}function l(i){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(r,!0).forEach(function(e){var t,n;t=i,e=r[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(r)):s(r).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(r,e))})}return i}function c(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}function u(){for(var e=arguments.length,a=new Array(e),t=0;t<e;t++)a[t]=arguments[t];return function(r){return function(){var e=r.apply(void 0,arguments),t=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},n={getState:e.getState,dispatch:function(){return t.apply(void 0,arguments)}},i=a.map(function(e){return e(n)});return l({},e,{dispatch:t=c.apply(void 0,i)(e.dispatch)})}}}},function(e,t,n){"use strict";n.r(t),n.d(t,"useState",function(){return _}),n.d(t,"useReducer",function(){return f}),n.d(t,"useEffect",function(){return g}),n.d(t,"useLayoutEffect",function(){return v}),n.d(t,"useRef",function(){return m}),n.d(t,"useImperativeHandle",function(){return y}),n.d(t,"useMemo",function(){return S}),n.d(t,"useCallback",function(){return E}),n.d(t,"useContext",function(){return b}),n.d(t,"useDebugValue",function(){return T}),n.d(t,"useErrorBoundary",function(){return A});var r,a,i,o=n(1),s=0,l=[],c=o.options.__r,u=o.options.diffed,d=o.options.__c,h=o.options.unmount;function p(e,t){o.options.__h&&o.options.__h(a,e,s||t),s=0;t=a.__H||(a.__H={__:[],__h:[]});return e>=t.__.length&&t.__.push({}),t.__[e]}function _(e){return s=1,f(M,e)}function f(e,t,n){var i=p(r++,2);return i.t=e,i.__c||(i.__c=a,i.__=[n?n(t):M(void 0,t),function(e){e=i.t(i.__[0],e);i.__[0]!==e&&(i.__=[e,i.__[1]],i.__c.setState({}))}]),i.__}function g(e,t){var n=p(r++,3);!o.options.__s&&k(n.__H,t)&&(n.__=e,n.__H=t,a.__H.__h.push(n))}function v(e,t){var n=p(r++,4);!o.options.__s&&k(n.__H,t)&&(n.__=e,n.__H=t,a.__h.push(n))}function m(e){return s=5,S(function(){return{current:e}},[])}function y(e,t,n){s=6,v(function(){"function"==typeof e?e(t()):e&&(e.current=t())},null==n?n:n.concat(e))}function S(e,t){var n=p(r++,7);return k(n.__H,t)?(n.__H=t,n.__h=e,n.__=e()):n.__}function E(e,t){return s=8,S(function(){return e},t)}function b(e){var t=a.context[e.__c],n=p(r++,9);return n.__c=e,t?(null==n.__&&(n.__=!0,t.sub(a)),t.props.value):e.__}function T(e,t){o.options.useDebugValue&&o.options.useDebugValue(t?t(e):e)}function A(e){var t=p(r++,10),n=_();return t.__=e,a.componentDidCatch||(a.componentDidCatch=function(e){t.__&&t.__(e),n[1](e)}),[n[0],function(){n[1](void 0)}]}function w(){l.some(function(t){if(t.__P)try{t.__H.__h.forEach(I),t.__H.__h.forEach(P),t.__H.__h=[]}catch(e){return t.__H.__h=[],o.options.__e(e,t.__v),!0}}),l=[]}o.options.__r=function(e){c&&c(e),r=0;e=(a=e.__c).__H;e&&(e.__h.forEach(I),e.__h.forEach(P),e.__h=[])},o.options.diffed=function(e){u&&u(e);e=e.__c;e&&e.__H&&e.__H.__h.length&&(1!==l.push(e)&&i===o.options.requestAnimationFrame||((i=o.options.requestAnimationFrame)||function(e){function t(){clearTimeout(i),C&&cancelAnimationFrame(n),setTimeout(e)}var n,i=setTimeout(t,100);C&&(n=requestAnimationFrame(t))})(w))},o.options.__c=function(e,n){n.some(function(t){try{t.__h.forEach(I),t.__h=t.__h.filter(function(e){return!e.__||P(e)})}catch(e){n.some(function(e){e.__h&&(e.__h=[])}),n=[],o.options.__e(e,t.__v)}}),d&&d(e,n)},o.options.unmount=function(e){h&&h(e);var t=e.__c;if(t&&t.__H)try{t.__H.__.forEach(I)}catch(e){o.options.__e(e,t.__v)}};var C="function"==typeof requestAnimationFrame;function I(e){"function"==typeof e.u&&e.u()}function P(e){e.u=e.__()}function k(n,e){return!n||e.some(function(e,t){return e!==n[t]})}function M(e,t){return"function"==typeof t?t(e):t}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){"use strict";function l(e,t,n,i,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return n(e),0}s.done?t(l):Promise.resolve(l).then(i,r)}function i(e){var t=Math.floor(e/60)<10?"0"+Math.floor(e/60):Math.floor(e/60),e=Math.floor(e-60*t)<10?"0"+Math.floor(e-60*t):Math.floor(e-60*t);return isNaN(e)?"00:00":t+":"+e}function r(e){void 0!==performance.mark&&performance.mark(e)}function a(e,t,n){var i=1<t/n?1:0,r=e.findIndex(function(e){return!(1==i&&e.aspectRatio<1||0==i&&1<e.aspectRatio)&&e.width>=t});if(1<window.devicePixelRatio){var a=2*t;for(r+=1;r<e.length;r++){var o=e[r];if(!(1==i&&o.aspectRatio<1||0==i&&1<o.aspectRatio)&&o.width>=a)break}}return(-1===r||r===e.length?e[e.length-1]:e[r]).url}function o(e){if(e)for(;e.firstChild;)e.removeChild(e.firstChild)}function s(e){return"0"===e.slice(0,1)?e.slice(1,e.length):e}function c(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var r=n[i];" "==r.charAt(0);)r=r.substring(1);if(-1!=r.indexOf(t))return r.substring(t.length,r.length)}return""}function u(e){return fetch(e).then(function(e){if(!e.ok)throw new Error("".concat(e.status," ").concat(e.statusText));return e.json()}).then(function(e){if(!e.items||0===e.items.length)return null;var t=e.items[0];if(t.error)throw new Error(t.error);return e.items})}function d(e,t,n,i){var r="";t.useHttps&&(r="&https=1");var a="",a=null!==n.column?"&type=column&query="+encodeURIComponent(n.column):"&type="+t.suggestionsType+"&query=news";try{t.suggestionsDoctype?a="&doctype="+t.suggestionsDoctype:""!==t.suggestionsQuery?a="&type="+t.suggestionsType+"&query="+t.suggestionsQuery.replace("&","%26"):n.column||(n["wsj-subsection"]?a="&type=wsj-subsection&query="+n["wsj-subsection"].replace("&","%26").replace(" ","%20"):n["wsj-section"]&&(a="&type=wsj-section&query="+n["wsj-section"].replace("&","%26"))),""!=t.suggestionsGroupId?a+="&groupid="+t.suggestionsGroupId:n.doctypeID?a+="&groupid=".concat(n.doctypeID):-1!==document.location.href.indexOf("www.wsj.com")&&(a+="&groupid=4276")}catch(e){}return u(e+"find_all_videos.asp?count=15"+r+a+"&fields="+i)}function h(e){return fetch(e).then(function(e){if(!e.ok)throw new Error("".concat(e.status," ").concat(e.statusText));return e.json()})}function p(e){return _.apply(this,arguments)}function _(){return s=regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.abrupt("return",!0);case 4:if(e.sent.ok){e.next=7;break}return e.abrupt("return",!1);case 7:return e.next=9,response.json();case 9:return n=e.sent,e.abrupt("return",n);case 11:case"end":return e.stop()}},e,this)}),(_=function(){var e=this,o=arguments;return new Promise(function(t,n){var i=s.apply(e,o);function r(e){l(i,t,n,r,a,"next",e)}function a(e){l(i,t,n,r,a,"throw",e)}r(void 0)})}).apply(this,arguments);var s}function f(e,t){e="string"==typeof e?e:e.host;for(var n=["mansionglobal.com"],i=0;i<n.length;i++)if(-1!==e.indexOf(n[i]))return t?"oms."+n[i]:"om."+n[i];return t?"oms.dowjoneson.com":"om.dowjoneson.com"}function g(e){return-1!==(e="string"==typeof e?e:e.host).indexOf("cwsj.com")||-1!==e.indexOf("cn.wsj.com")?"WSJ China":-1!==e.indexOf("jwsj.com")?"WSJ Japan":-1!==e.indexOf("kr.wsj.com")?"WSJ Korea":-1!==e.indexOf("indo.wsj.com")?"WSJ Indonesia":-1!==e.indexOf("wsj.com")?"WSJ":-1!==e.indexOf("marketwatch.com")?"MarketWatch":-1!==e.indexOf("barrons.com")?"Barrons Online":-1!==e.indexOf("wsj.de")?"WSJ Germany":-1!==e.indexOf("allthingsd.com")?"AllThingsD":-1!==e.indexOf("smartmoney.com")?"SmartMoney":-1!==e.indexOf("fxtrader")?"DJFXTrader":-1!==e.indexOf("fins.com")?"FINS":-1!==e.indexOf("mansionglobal.com")?"Mansion Global":-1!==e.indexOf("moneyish.com")?"Moneyish":"WSJ"}function v(){try{var e,t,n,i=null===(e=window)||void 0===e||null===(t=e.utag_data)||void 0===t?void 0:t.user_type;return i||null!==(n=document.querySelector('meta[name="user.type"]'))&&(i=n.getAttribute("content")),void 0!==i&&"nonsubscriber"!==i}catch(e){return!1}}function m(e){"emptied"===e.type&&console.log("currentSrc = ".concat(e.target.src))}function y(e){for(var t=0,n=["abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","interruptbegin","interruptend","loadeddata","loadedmetadata","loadstart","mozaudioavailable","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"];t<n.length;t++){var i=n[t];e.removeEventListener(i,m),e.addEventListener(i,m)}}function S(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");e=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===e?"":decodeURIComponent(e[1].replace(/\+/g," "))}function E(){switch(S("wsjVideoApi")){case"prod":return"https://video-api.shdsvc.dowjones.io/api/";case"dev":return"https://video-api.dev.shdsvc.dowjones.io/api/";default:return null}}n.r(t),n.d(t,"gTimeFormat",function(){return i}),n.d(t,"createMark",function(){return r}),n.d(t,"pickBestThumbnail",function(){return a}),n.d(t,"emptyElement",function(){return o}),n.d(t,"removeZeros",function(){return s}),n.d(t,"getCookie",function(){return c}),n.d(t,"fetchFromApi",function(){return u}),n.d(t,"getNewPlaylist",function(){return d}),n.d(t,"fetchServerTime",function(){return h}),n.d(t,"getSavedStatus",function(){return p}),n.d(t,"getOmnitureTrackingServer",function(){return f}),n.d(t,"getChannelFromDomain",function(){return g}),n.d(t,"isUserLoggedIn",function(){return v}),n.d(t,"debugVideoEvents",function(){return y}),n.d(t,"getUrlParameter",function(){return S}),n.d(t,"getApiUrlOverride",function(){return E})},function(e,t,n){"use strict";n.r(t),n.d(t,"NONE",function(){return i}),n.d(t,"STARTED",function(){return r}),n.d(t,"FINISHED",function(){return a}),n.d(t,"FAILED",function(){return o});var i="NONE",r="STARTED",a="FINISHED",o="FAILED"},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var i=n(11);e.exports=function(e){if(!i(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t,n){"use strict";function c(e){for(var t=arguments.length,n=Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function o(e){return e&&e[H]}function u(e){return e&&(function(e){if(e&&"object"==typeof e){e=Object.getPrototypeOf(e);return!e||e===Object.prototype}}(e)||Array.isArray(e)||e[j]||e.constructor[j]||i(e)||r(e))}function d(n,i,t){void 0===t&&(t=!1),0===s(n)?(t?Object.keys:K)(n).forEach(function(e){t&&"symbol"==typeof e||i(e,n[e],n)}):n.forEach(function(e,t){return i(t,e,n)})}function s(e){var t=e[H];return t?3<t.i?t.i-4:t.i:Array.isArray(e)?1:i(e)?2:r(e)?3:0}function h(e,t){return 2===s(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function l(e,t,n){var i=s(e);2===i?e.set(t,n):3===i?(e.delete(t),e.add(n)):e[t]=n}function p(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function i(e){return F&&e instanceof Map}function r(e){return V&&e instanceof Set}function a(e){return e.o||e.t}function _(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Y(e);delete t[H];for(var n=K(t),i=0;i<n.length;i++){var r=n[i],a=t[r];!1===a.writable&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[r]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[r]})}return Object.create(Object.getPrototypeOf(e),t)}function f(e,t){v(e)||o(e)||!u(e)||(1<s(e)&&(e.set=e.add=e.clear=e.delete=g),Object.freeze(e),t&&d(e,function(e,t){return f(t,!0)},!0))}function g(){c(2)}function v(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function m(e){var t=q[e];return t||c(19,e),t}function y(e,t){t&&(m("Patches"),e.u=[],e.s=[],e.v=t)}function S(e){E(e),e.p.forEach(T),e.p=null}function E(e){e===L&&(L=e.l)}function b(e){return L={p:[],l:L,h:e,m:!0,_:0}}function T(e){e=e[H];0===e.i||1===e.i?e.j():e.g=!0}function A(e,t){t._=t.p.length;var n=t.p[0],i=void 0!==e&&e!==n;return t.h.O||m("ES5").S(t,e,i),i?(n[H].P&&(S(t),c(4)),u(e)&&(e=w(t,e),t.l||I(t,e)),t.u&&m("Patches").M(n[H],e,t.u,t.s)):e=w(t,n,[]),S(t),t.u&&t.v(t.u,t.s),e!==U?e:void 0}function w(n,i,r){if(v(i))return i;var a,o=i[H];return o?o.A!==n?i:o.P?(o.I||(o.I=!0,o.A._--,a=4===o.i||5===o.i?o.o=_(o.k):o.o,d(3===o.i?new Set(a):a,function(e,t){return C(n,o,a,e,t,r)}),I(n,a,!1),r&&n.u&&m("Patches").R(o,r,n.u,n.s)),o.o):(I(n,o.t,!0),o.t):(d(i,function(e,t){return C(n,o,i,e,t,r)},!0),i)}function C(e,t,n,i,r,a){if(o(r)){a=w(e,r,a&&t&&3!==t.i&&!h(t.D,i)?a.concat(i):void 0);if(l(n,i,a),!o(a))return;e.m=!1}u(r)&&!v(r)&&(!e.h.N&&e._<1||(w(e,r),t&&t.A.l||I(e,r)))}function I(e,t,n){void 0===n&&(n=!1),e.h.N&&e.m&&f(t,n)}function P(e,t){var n=e[H];return(n?a(n):e)[t]}function k(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var i=Object.getOwnPropertyDescriptor(n,t);if(i)return i;n=Object.getPrototypeOf(n)}}function M(e){e.P||(e.P=!0,e.l&&M(e.l))}function D(e){e.o||(e.o=_(e.t))}function O(e,t,n){t=i(t)?m("MapSet").T(t,n):r(t)?m("MapSet").F(t,n):e.O?function(e,t){var n=Array.isArray(e),i={i:n?1:0,A:t?t.A:L,P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},t=i,e=G;n&&(t=[i],e=W);t=Proxy.revocable(t,e),e=t.revoke,t=t.proxy;return i.k=t,i.j=e,t}(t,n):m("ES5").J(t,n);return(n?n.A:L).p.push(t),t}function R(e){return o(e)||c(22,e),function r(e){if(!u(e))return e;var a,o=e[H],t=s(e);if(o){if(!o.P&&(o.i<4||!m("ES5").K(o)))return o.t;o.I=!0,a=N(e,t),o.I=!1}else a=N(e,t);return d(a,function(e,t){var n,i;o&&(n=o.t,i=e,(2===s(n)?n.get(i):n[i])===t)||l(a,e,r(t))}),3===t?new Set(a):a}(e)}function N(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return _(e)}n.r(t),n.d(t,"showControls",function(){return re}),n.d(t,"hideControls",function(){return ae}),n.d(t,"playVideo",function(){return oe}),n.d(t,"pauseVideo",function(){return se}),n.d(t,"updateProgress",function(){return le}),n.d(t,"updateDuration",function(){return ce}),n.d(t,"mute",function(){return ue}),n.d(t,"unmute",function(){return de}),n.d(t,"enterFullScreen",function(){return he}),n.d(t,"exitFullScreen",function(){return pe}),n.d(t,"startAdMode",function(){return _e}),n.d(t,"stopAdMode",function(){return fe}),n.d(t,"updateAdProgress",function(){return ge}),n.d(t,"playAd",function(){return ve}),n.d(t,"pauseAd",function(){return me}),n.d(t,"adBuffering",function(){return ye}),n.d(t,"resize",function(){return Se}),n.d(t,"showThumbnail",function(){return Ee}),n.d(t,"hideThumbnail",function(){return be}),n.d(t,"updateVideoData",function(){return Te}),n.d(t,"showMoreVideosSlide",function(){return Ae}),n.d(t,"hideMoreVideosSlide",function(){return we}),n.d(t,"showEndscreen",function(){return Ce}),n.d(t,"hideEndscreen",function(){return Ie}),n.d(t,"replacePlaylist",function(){return Pe}),n.d(t,"dequeuePlaylist",function(){return ke}),n.d(t,"showCountdown",function(){return Me}),n.d(t,"hideCountdown",function(){return De}),n.d(t,"showClickForSound",function(){return Oe}),n.d(t,"hideClickForSound",function(){return Re}),n.d(t,"showLoadingSpinner",function(){return Ne}),n.d(t,"hideLoadingSpinner",function(){return Le}),n.d(t,"setVideoApiLoadState",function(){return xe}),n.d(t,"setAdInitState",function(){return Fe}),n.d(t,"setIMALoadState",function(){return Ve}),n.d(t,"setAdError",function(){return Be}),n.d(t,"setHlsJsLoadState",function(){return Ue}),n.d(t,"startVideoPlaybackInit",function(){return je}),n.d(t,"endVideoPlaybackInit",function(){return He}),n.d(t,"buffering",function(){return Ke}),n.d(t,"canPlay",function(){return Ye}),n.d(t,"showSavedModal",function(){return qe}),n.d(t,"hideSavedModal",function(){return Ge}),n.d(t,"enableLogging",function(){return We});var L,x="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),F="undefined"!=typeof Map,V="undefined"!=typeof Set,B="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,U=x?Symbol.for("immer-nothing"):((t={})["immer-nothing"]=!0,t),j=x?Symbol.for("immer-draftable"):"__$immer_draftable",H=x?Symbol.for("immer-state"):"__$immer_state",K="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Y=Object.getOwnPropertyDescriptors||function(t){var n={};return K(t).forEach(function(e){n[e]=Object.getOwnPropertyDescriptor(t,e)}),n},q={},G={get:function(e,t){if(t===H)return e;var n,i,r=a(e);if(!h(r,t))return n=e,(i=k(r,t))?"value"in i?i.value:null===(i=i.get)||void 0===i?void 0:i.call(n.k):void 0;r=r[t];return!e.I&&u(r)&&r===P(e.t,t)?(D(e),e.o[t]=O(e.A.h,r,e)):r},has:function(e,t){return t in a(e)},ownKeys:function(e){return Reflect.ownKeys(a(e))},set:function(e,t,n){var i=k(a(e),t);if(null!=i&&i.set)return i.set.call(e.k,n),!0;if(e.D[t]=!0,!e.P){if(p(n,P(a(e),t))&&(void 0!==n||h(e.t,t)))return!0;D(e),M(e)}return e.o[t]=n,!0},deleteProperty:function(e,t){return void 0!==P(e.t,t)||t in e.t?(e.D[t]=!1,D(e),M(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=a(e),i=Reflect.getOwnPropertyDescriptor(n,t);return i&&{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:i.enumerable,value:n[t]}},defineProperty:function(){c(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){c(12)}},W={};d(G,function(e,t){W[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),W.deleteProperty=function(e,t){return G.deleteProperty.call(this,e[0],t)},W.set=function(e,t,n){return G.set.call(this,e[0],t,n,e[0])};var Q,x=((x=z.prototype).produce=function(e,a,t){if("function"==typeof e&&"function"!=typeof a){var o=a;a=e;var s=this;return function(e){var t=this;void 0===e&&(e=o);for(var n=arguments.length,i=Array(1<n?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return s.produce(e,function(e){return a.call.apply(a,[t,e].concat(i))})}}var n;if("function"!=typeof a&&c(6),void 0!==t&&"function"!=typeof t&&c(7),u(e)){var i=b(this),r=O(this,e,void 0),l=!0;try{n=a(r),l=!1}finally{(l?S:E)(i)}return"undefined"!=typeof Promise&&n instanceof Promise?n.then(function(e){return y(i,t),A(e,i)},function(e){throw S(i),e}):(y(i,t),A(n,i))}if(!e||"object"!=typeof e)return(n=a(e))===U?void 0:(void 0===n&&(n=e),this.N&&f(n,!0),n);c(21,e)},x.produceWithPatches=function(r,e){var n,i,a=this;return"function"==typeof r?function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return a.produceWithPatches(e,function(e){return r.apply(void 0,[e].concat(n))})}:[this.produce(r,e,function(e,t){n=e,i=t}),n,i]},x.createDraft=function(e){u(e)||c(8),o(e)&&(e=R(e));var t=b(this),e=O(this,e,void 0);return e[H].C=!0,E(t),e},x.finishDraft=function(e,t){e=(e&&e[H]).A;return y(e,t),A(void 0,e)},x.setAutoFreeze=function(e){this.N=e},x.setUseProxies=function(e){e&&!B&&c(20),this.O=e},x.applyPatches=function(e,t){for(var n=t.length-1;0<=n;n--){var i=t[n];if(0===i.path.length&&"replace"===i.op){e=i.value;break}}var r=m("Patches").$;return o(e)?r(e,t):this.produce(e,function(e){return r(e,t.slice(n+1))})},new z);x.produce,x.produceWithPatches.bind(x),x.setAutoFreeze.bind(x),x.setUseProxies.bind(x),x.applyPatches.bind(x),x.createDraft.bind(x),x.finishDraft.bind(x),n(5);function z(e){this.O=B,this.N=!1,"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}function X(e,t){return e===t}function J(){return(J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function Z(t,n){function e(){if(n){var e=n.apply(void 0,arguments);if(!e)throw new Error("prepareAction did not return an object");return J({type:t,payload:e.payload},"meta"in e&&{meta:e.meta},{},"error"in e&&{error:e.error})}return{type:t,payload:arguments.length<=0?void 0:arguments[0]}}return e.toString=function(){return""+t},e.type=t,e.match=function(e){return e.type===t},e}function $(n,e){var t=Q[n];return t?t.enumerable=e:Q[n]=t={configurable:!0,enumerable:e,get:function(){var e=this[H];return G.get(e,n)},set:function(e){var t=this[H];G.set(t,n,e)}},t}function ee(e){for(var t=e.length-1;0<=t;t--){var n=e[t][H];if(!n.P)switch(n.i){case 5:ne(n)&&M(n);break;case 4:te(n)&&M(n)}}}function te(e){for(var t=e.t,n=e.k,i=K(n),r=i.length-1;0<=r;r--){var a=i[r];if(a!==H){var o=t[a];if(void 0===o&&!h(t,a))return!0;var s=n[a],a=s&&s[H];if(a?a.t!==o:!p(s,o))return!0}}e=!!t[H];return i.length!==K(t).length+(e?0:1)}function ne(e){var t=e.k;if(t.length!==e.t.length)return!0;t=Object.getOwnPropertyDescriptor(t,t.length-1);return!(!t||t.get)}!function(){for(var e=arguments.length,t=Array(1<e?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n]}(function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:X,n=null,i=null;return function(){return function(e,t,n){if(null!==t&&null!==n&&t.length===n.length){for(var i=t.length,r=0;r<i;r++)if(!e(t[r],n[r]))return;return 1}}(t,n,arguments)||(i=e.apply(null,arguments)),n=arguments,i}}),n(53),"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator"))),Q={},q.ES5={J:function(e,t){var n=Array.isArray(e),i=function(e,t){if(e){for(var n=Array(t.length),i=0;i<t.length;i++)Object.defineProperty(n,""+i,$(i,!0));return n}var r=Y(t);delete r[H];for(var a=K(r),o=0;o<a.length;o++){var s=a[o];r[s]=$(s,e||!!r[s].enumerable)}return Object.create(Object.getPrototypeOf(t),r)}(n,e),e={i:n?5:4,A:t?t.A:L,P:!1,I:!1,D:{},l:t,t:e,k:i,o:null,g:!1,C:!1};return Object.defineProperty(i,H,{value:e,writable:!0}),i},S:function(e,t,n){n?o(t)&&t[H].A===e&&ee(e.p):(e.u&&function t(e){if(e&&"object"==typeof e){var n=e[H];if(n){var i=n.t,r=n.k,a=n.D,e=n.i;if(4===e)d(r,function(e){e!==H&&(void 0!==i[e]||h(i,e)?a[e]||t(r[e]):(a[e]=!0,M(n)))}),d(i,function(e){void 0!==r[e]||h(r,e)||(a[e]=!1,M(n))});else if(5===e){if(ne(n)&&(M(n),a.length=!0),r.length<i.length)for(var o=r.length;o<i.length;o++)a[o]=!1;else for(var s=i.length;s<r.length;s++)a[s]=!0;for(var l=Math.min(r.length,i.length),c=0;c<l;c++)void 0===a[c]&&t(r[c])}}}}(e.p[0]),ee(e.p))},K:function(e){return(4===e.i?te:ne)(e)}};var ie=n(0);function re(){return{type:ie.h}}function ae(){return{type:ie.g}}function oe(){return{type:ie.O}}function se(){return{type:ie.N}}function le(e){return{type:ie.P,currentPosition:e}}function ce(e){return"number"!=typeof e&&(e=parseInt(e,10)),{type:ie.I,duration:e}}function ue(){return{type:ie.M}}function de(){return{type:ie.R}}function he(){return{type:ie.K}}function pe(){return{type:ie.L}}var _e=Z(ie.f),fe=Z(ie.b),ge=Z(ie.e),ve=Z(ie.d),me=Z(ie.c),ye=Z(ie.a);function Se(e,t){return{type:ie.s,width:e,height:t}}var Ee=Z(ie.z),be=Z(ie.y);function Te(e){return{type:ie.F,videoData:e}}var Ae=Z(ie.q),we=Z(ie.p),Ce=Z(ie.v),Ie=Z(ie.m);function Pe(e){return{type:ie.r,playlist:e}}var ke=Z(ie.i),Me=Z(ie.u),De=Z(ie.l),Oe=Z(ie.t),Re=Z(ie.k),Ne=Z(ie.w),Le=Z(ie.n),xe=Z(ie.E),Fe=Z(ie.B),Ve=Z(ie.D),Be=Z(ie.A),Ue=Z(ie.C),je=Z(ie.Q),He=Z(ie.J),Ke=Z(ie.G),Ye=Z(ie.H),qe=Z(ie.x),Ge=Z(ie.o),We=Z(ie.j)},function(e,t,n){n=n(7);e.exports=!n(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},function(e,t,n){var c=n(2),u=n(40).f,d=n(16),h=n(19),p=n(33),_=n(96),f=n(67);e.exports=function(e,t){var n,i,r,a,o=e.target,s=e.global,l=e.stat;if(n=s?c:l?c[o]||p(o,{}):(c[o]||{}).prototype)for(i in t){if(r=t[i],a=e.noTargetGet?(a=u(n,i))&&a.value:n[i],!f(s?i:o+(l?".":"#")+i,e.forced)&&void 0!==a){if(typeof r==typeof a)continue;_(r,a)}(e.sham||a&&a.sham)&&d(r,"sham",!0),h(n,i,r,e)}}},function(e,t,n){var i=n(14),r=n(18),a=n(35);e.exports=i?function(e,t,n){return r.f(e,t,a(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var i=n(14),r=n(57),a=n(12),o=n(58),s=Object.defineProperty;t.f=i?s:function(e,t,n){if(a(e),t=o(t,!0),a(n),r)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var o=n(2),s=n(16),l=n(8),c=n(33),i=n(36),n=n(26),r=n.get,u=n.enforce,d=String(String).split("String");(e.exports=function(e,t,n,i){var r=!!i&&!!i.unsafe,a=!!i&&!!i.enumerable,i=!!i&&!!i.noTargetGet;"function"==typeof n&&("string"!=typeof t||l(n,"name")||s(n,"name",t),u(n).source=d.join("string"==typeof t?t:"")),e!==o?(r?!i&&e[t]&&(a=!0):delete e[t],a?e[t]=n:s(e,t,n)):a?e[t]=n:c(t,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&r(this).source||i(this)})},function(e,t,n){function i(e){return"function"==typeof e?e:void 0}var r=n(42),a=n(2);e.exports=function(e,t){return arguments.length<2?i(r[e])||i(a[e]):r[e]&&r[e][t]||a[e]&&a[e][t]}},function(e,t){var a="Webkit Moz O ms".split(" ");function i(e,t,n){for(var i=e.style,r=0;r<a.length;++r)i[a[r]+o(t)]=n;i[t]=n}function o(e){return e.charAt(0).toUpperCase()+e.slice(1)}function s(e){return!("[object Array]"===Object.prototype.toString.call(e)||"object"!=typeof e||!e)}function r(e,t){for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)}e.exports={extend:function e(t,n,i){for(var r in t=t||{},i=i||!1,n=n||{}){var a,o;n.hasOwnProperty(r)&&(a=t[r],o=n[r],i&&s(a)&&s(o)?t[r]=e(a,o,i):t[r]=o)}return t},render:function(e,t){var n,i,r,a=e;for(n in t)t.hasOwnProperty(n)&&(i=t[n],r=new RegExp("\\{"+n+"\\}","g"),a=a.replace(r,i));return a},setStyle:i,setStyles:function(n,e){r(e,function(e,t){null!=e&&(s(e)&&!0===e.prefix?i(n,t,e.value):n.style[t]=e)})},capitalize:o,isString:function(e){return"string"==typeof e||e instanceof String},isFunction:function(e){return"function"==typeof e},isObject:s,forEachObject:r,floatEquals:function(e,t){return Math.abs(e-t)<.001},removeChildren:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}}},function(e,t){var n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=!1},function(e,t){e.exports={}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,t,n){var i,r,a,o,s,l,c,u,d=n(92),h=n(2),p=n(11),_=n(16),f=n(8),g=n(37),n=n(38),h=h.WeakMap;c=d?(i=new h,r=i.get,a=i.has,o=i.set,s=function(e,t){return o.call(i,e,t),t},l=function(e){return r.call(i,e)||{}},function(e){return a.call(i,e)}):(n[u=g("state")]=!0,s=function(e,t){return _(e,u,t),t},l=function(e){return f(e,u)?e[u]:{}},function(e){return f(e,u)}),e.exports={set:s,get:l,has:c,enforce:function(e){return c(e)?l(e):s(e,{})},getterFor:function(n){return function(e){var t;if(!p(e)||(t=l(e)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return t}}}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},function(e,t,n){var i=n(41),r=n(27);e.exports=function(e){return i(r(e))}},function(e,t,n){var a=n(25);e.exports=function(i,r,e){if(a(i),void 0===r)return i;switch(e){case 0:return function(){return i.call(r)};case 1:return function(e){return i.call(r,e)};case 2:return function(e,t){return i.call(r,e,t)};case 3:return function(e,t,n){return i.call(r,e,t,n)}}return function(){return i.apply(r,arguments)}}},function(e,t,n){var i;!function(){"use strict";var o={}.hasOwnProperty;function s(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"==i||"number"==i)e.push(n);else if(Array.isArray(n)&&n.length){var r=s.apply(null,n);r&&e.push(r)}else if("object"==i)for(var a in n)o.call(n,a)&&n[a]&&e.push(a)}}return e.join(" ")}e.exports?e.exports=s.default=s:void 0===(i=function(){return s}.apply(t,[]))||(e.exports=i)}()},function(e,t,n){var a=n(83),o=n(21),n=function e(t,n){if(!(this instanceof e))throw new Error("Constructor was called without new keyword");if(0!==arguments.length){this._opts=o.extend({color:"#555",strokeWidth:1,trailColor:null,trailWidth:null,fill:null,text:{style:{color:null,position:"absolute",left:"50%",top:"50%",padding:0,margin:0,transform:{prefix:!0,value:"translate(-50%, -50%)"}},autoStyleContainer:!0,alignToBottom:!0,value:null,className:"progressbar-text"},svgStyle:{display:"block",width:"100%"},warnings:!1},n,!0),o.isObject(n)&&void 0!==n.svgStyle&&(this._opts.svgStyle=n.svgStyle),o.isObject(n)&&o.isObject(n.text)&&void 0!==n.text.style&&(this._opts.text.style=n.text.style);var i=this._createSvgView(this._opts);if(!(r=o.isString(t)?document.querySelector(t):t))throw new Error("Container does not exist: "+t);this._container=r,this._container.appendChild(i.svg),this._opts.warnings&&this._warnContainerAspectRatio(this._container),this._opts.svgStyle&&o.setStyles(i.svg,this._opts.svgStyle),this.svg=i.svg,this.path=i.path,this.trail=i.trail,this.text=null;var r=o.extend({attachment:void 0,shape:this},this._opts);this._progressPath=new a(i.path,r),o.isObject(this._opts.text)&&null!==this._opts.text.value&&this.setText(this._opts.text.value)}};n.prototype.animate=function(e,t,n){if(null===this._progressPath)throw new Error("Object is destroyed");this._progressPath.animate(e,t,n)},n.prototype.stop=function(){if(null===this._progressPath)throw new Error("Object is destroyed");void 0!==this._progressPath&&this._progressPath.stop()},n.prototype.destroy=function(){if(null===this._progressPath)throw new Error("Object is destroyed");this.stop(),this.svg.parentNode.removeChild(this.svg),this.svg=null,this.path=null,this.trail=null,(this._progressPath=null)!==this.text&&(this.text.parentNode.removeChild(this.text),this.text=null)},n.prototype.set=function(e){if(null===this._progressPath)throw new Error("Object is destroyed");this._progressPath.set(e)},n.prototype.value=function(){if(null===this._progressPath)throw new Error("Object is destroyed");return void 0===this._progressPath?0:this._progressPath.value()},n.prototype.setText=function(e){if(null===this._progressPath)throw new Error("Object is destroyed");null===this.text&&(this.text=this._createTextContainer(this._opts,this._container),this._container.appendChild(this.text)),o.isObject(e)?(o.removeChildren(this.text),this.text.appendChild(e)):this.text.innerHTML=e},n.prototype._createSvgView=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");this._initializeSvg(t,e);var n=null;(e.trailColor||e.trailWidth)&&(n=this._createTrail(e),t.appendChild(n));e=this._createPath(e);return t.appendChild(e),{svg:t,path:e,trail:n}},n.prototype._initializeSvg=function(e,t){e.setAttribute("viewBox","0 0 100 100")},n.prototype._createPath=function(e){var t=this._pathString(e);return this._createPathElement(t,e)},n.prototype._createTrail=function(e){var t=this._trailString(e),e=o.extend({},e);return e.trailColor||(e.trailColor="#eee"),e.trailWidth||(e.trailWidth=e.strokeWidth),e.color=e.trailColor,e.strokeWidth=e.trailWidth,e.fill=null,this._createPathElement(t,e)},n.prototype._createPathElement=function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d",e),n.setAttribute("stroke",t.color),n.setAttribute("stroke-width",t.strokeWidth),t.fill?n.setAttribute("fill",t.fill):n.setAttribute("fill-opacity","0"),n},n.prototype._createTextContainer=function(e,t){var n=document.createElement("div");n.className=e.text.className;var i=e.text.style;return i&&(e.text.autoStyleContainer&&(t.style.position="relative"),o.setStyles(n,i),i.color||(n.style.color=e.color)),this._initializeTextContainer(e,t,n),n},n.prototype._initializeTextContainer=function(e,t,n){},n.prototype._pathString=function(e){throw new Error("Override this function for each progress bar")},n.prototype._trailString=function(e){throw new Error("Override this function for each progress bar")},n.prototype._warnContainerAspectRatio=function(e){var t,n,i;this.containerAspectRatio&&(t=window.getComputedStyle(e,null),n=parseFloat(t.getPropertyValue("width"),10),i=parseFloat(t.getPropertyValue("height"),10),o.floatEquals(this.containerAspectRatio,n/i)||(console.warn("Incorrect aspect ratio of container","#"+e.id,"detected:",t.getPropertyValue("width")+"(width)","/",t.getPropertyValue("height")+"(height)","=",n/i),console.warn("Aspect ratio of should be",this.containerAspectRatio)))},e.exports=n},function(e,t,n){var i={};i[n(4)("toStringTag")]="z",e.exports="[object z]"===String(i)},function(e,t,n){var i=n(2),r=n(16);e.exports=function(t,n){try{r(i,t,n)}catch(e){i[t]=n}return n}},function(e,t,n){var i=n(2),n=n(11),r=i.document,a=n(r)&&n(r.createElement);e.exports=function(e){return a?r.createElement(e):{}}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var n=n(56),i=Function.toString;"function"!=typeof n.inspectSource&&(n.inspectSource=function(e){return i.call(e)}),e.exports=n.inspectSource},function(e,t,n){var i=n(55),r=n(59),a=i("keys");e.exports=function(e){return a[e]||(a[e]=r(e))}},function(e,t){e.exports={}},function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(0<e?i:n)(e)}},function(e,t,n){var i=n(14),r=n(63),a=n(35),o=n(28),s=n(58),l=n(8),c=n(57),u=Object.getOwnPropertyDescriptor;t.f=i?u:function(e,t){if(e=o(e),t=s(t,!0),c)try{return u(e,t)}catch(e){}if(l(e,t))return a(!r.f.call(e,t),e[t])}},function(e,t,n){var i=n(7),r=n(17),a="".split;e.exports=i(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return"String"==r(e)?a.call(e,""):Object(e)}:Object},function(e,t,n){n=n(2);e.exports=n},function(e,t,n){var i=n(39),r=Math.min;e.exports=function(e){return 0<e?r(i(e),9007199254740991):0}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t,n){var i=n(27);e.exports=function(e){return Object(i(e))}},function(e,t,n){var i=n(18).f,r=n(8),a=n(4)("toStringTag");e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,a)&&i(e,a,{configurable:!0,value:t})}},function(e,t,n){var i=n(4),r=n(70),n=n(18),a=i("unscopables"),o=Array.prototype;null==o[a]&&n.f(o,a,{configurable:!0,value:r(null)}),e.exports=function(e){o[a][e]=!0}},function(e,t,n){"use strict";function i(e){var n,i;this.promise=new e(function(e,t){if(void 0!==n||void 0!==i)throw TypeError("Bad Promise constructor");n=e,i=t}),this.resolve=r(n),this.reject=r(i)}var r=n(25);e.exports.f=function(e){return new i(e)}},function(e,t,n){var i=n(2),r=n(29),a=Function.call;e.exports=function(e,t,n){return r(a,i[e].prototype[t],n)}},function(e,i,r){"use strict";!function(e,t){var n=r(85),t="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:t,t=Object(n.a)(t);i.a=t}.call(this,r(22),r(146)(e))},function(e,t,n){function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=c(n);return e=i?(e=c(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==r(e)&&"function"!=typeof e?l(t):e}}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=n(1),d=u.h,h=u.Component,p=n(172),_=n(173),n=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(n,h);var e,t=s(n);function n(e){return function(e){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),(e=t.call(this,e))._setCloseBtnRef=e._setCloseBtnRef.bind(l(e)),e._handleTransitionEnd=e._handleTransitionEnd.bind(l(e)),e._handleClose=e._handleClose.bind(l(e)),e}return e=[{key:"componentWillUnmount",value:function(){clearTimeout(this._closeTimer)}},{key:"_setCloseBtnRef",value:function(e){this._closeBtnRef=e}},{key:"_handleTransitionEnd",value:function(){var e=this.props,t=e.onFadeIn,n=e.onFadeOut;(e.isVisible?t:n)()}},{key:"_handleClose",value:function(e){e&&e.stopPropagation(),this.props.onClose(e)}},{key:"componentDidMount",value:function(){var e=this;this._closeBtnRef&&(this._closeBtnRef.innerHTML=_),this.props.hideTimer&&(this._closeTimer=setTimeout(function(){return e._handleClose()},this.props.hideTimer,this))}},{key:"render",value:function(){var e=[p.modal];this.props.className&&e.push(this.props.className),this.props.isVisible||e.push(p.fadeOut);e={className:e.join(" ")};return this.props.onClick&&(e.onClick=this.props.onClick,e.style={cursor:"pointer"}),this.props.style&&"object"===r(this.props.style)&&(e.style=Object.assign({},e.style,this.props.style)),d("div",i({},e,{onTransitionEnd:this._handleTransitionEnd}),this.props.children,!this.props.hideCloseButton&&d("button",{className:p.closeBtn,ref:this._setCloseBtnRef,onClick:this._handleClose}))}}],a(n.prototype,e),n}();n.defaultProps={onClose:function(){},onFadeIn:function(){},onFadeOut:function(){},isVisible:!0,hideCloseButton:!1},e.exports=n},function(e,t,n){"use strict";e.exports=n(152)},function(e,t,n){"use strict";function i(r){return function(e){var n=e.dispatch,i=e.getState;return function(t){return function(e){return"function"==typeof e?e(n,i,r):t(e)}}}}n.r(t);n=i();n.withExtraArgument=i,t.default=n},function(e,t,n){"use strict";var i=n(52),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},d={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};function h(e){return i.isMemo(e)?a:o[e.$$typeof]||r}o[i.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o[i.Memo]=a;var p=Object.defineProperty,_=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,g=Object.getOwnPropertyDescriptor,v=Object.getPrototypeOf,m=Object.prototype;e.exports=function e(t,n,i){if("string"!=typeof n){var r;!m||(r=v(n))&&r!==m&&e(t,r,i);var a=_(n);f&&(a=a.concat(f(n)));for(var o=h(t),s=h(n),l=0;l<a.length;++l){var c=a[l];if(!(d[c]||i&&i[c]||s&&s[c]||o&&o[c])){var u=g(n,c);try{p(t,c,u)}catch(e){}}}}return t}},function(e,t,n){var i=n(23),r=n(56);(e.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.5",mode:i?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var i=n(2),n=n(33),n=i["__core-js_shared__"]||n("__core-js_shared__",{});e.exports=n},function(e,t,n){var i=n(14),r=n(7),a=n(34);e.exports=!i&&!r(function(){return 7!=Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(11);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+i).toString(36)}},function(e,t,n){n=n(7);e.exports=!!Object.getOwnPropertySymbols&&!n(function(){return!String(Symbol())})},function(e,t,n){var i=n(32),r=n(17),a=n(4)("toStringTag"),o="Arguments"==r(function(){return arguments}());e.exports=i?r:function(e){var t;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(e=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),a))?e:o?r(t):"Object"==(e=r(t))&&"function"==typeof t.callee?"Arguments":e}},function(e,t,n){"use strict";function f(){return this}var g=n(15),v=n(100),m=n(69),y=n(103),S=n(46),E=n(16),b=n(19),i=n(4),T=n(23),A=n(24),n=n(68),w=n.IteratorPrototype,C=n.BUGGY_SAFARI_ITERATORS,I=i("iterator");e.exports=function(e,t,n,i,r,a,o){v(n,t,i);function s(e){if(e===r&&_)return _;if(!C&&e in h)return h[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}}var l,c,u=t+" Iterator",d=!1,h=e.prototype,p=h[I]||h["@@iterator"]||r&&h[r],_=!C&&p||s(r),i="Array"==t&&h.entries||p;if(i&&(e=m(i.call(new e)),w!==Object.prototype&&e.next&&(T||m(e)===w||(y?y(e,w):"function"!=typeof e[I]&&E(e,I,f)),S(e,u,!0,!0),T&&(A[u]=f))),"values"==r&&p&&"values"!==p.name&&(d=!0,_=function(){return p.call(this)}),T&&!o||h[I]===_||E(h,I,_),A[t]=_,r)if(l={values:s("values"),keys:a?_:s("keys"),entries:s("entries")},o)for(c in l)!C&&!d&&c in h||b(h,c,l[c]);else g({target:t,proto:!0,forced:C||d},l);return l}},function(e,t,n){"use strict";var i={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,a=r&&!i.call({1:2},1);t.f=a?function(e){e=r(this,e);return!!e&&e.enumerable}:i},function(e,t,n){var o=n(8),s=n(28),l=n(65).indexOf,c=n(38);e.exports=function(e,t){var n,i=s(e),r=0,a=[];for(n in i)!o(c,n)&&o(i,n)&&a.push(n);for(;t.length>r;)o(i,n=t[r++])&&(~l(a,n)||a.push(n));return a}},function(e,t,n){var l=n(28),c=n(43),u=n(99),n=function(s){return function(e,t,n){var i,r=l(e),a=c(r.length),o=u(n,a);if(s&&t!=t){for(;o<a;)if((i=r[o++])!=i)return!0}else for(;o<a;o++)if((s||o in r)&&r[o]===t)return s||o||0;return!s&&-1}};e.exports={includes:n(!0),indexOf:n(!1)}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var i=n(7),r=/#|\.prototype\./,n=function(e,t){e=o[a(e)];return e==l||e!=s&&("function"==typeof t?i(t):!!t)},a=n.normalize=function(e){return String(e).replace(r,".").toLowerCase()},o=n.data={},s=n.NATIVE="N",l=n.POLYFILL="P";e.exports=n},function(e,t,n){"use strict";var i,r=n(69),a=n(16),o=n(8),s=n(4),l=n(23),c=s("iterator"),n=!1;[].keys&&("next"in(s=[].keys())?(s=r(r(s)))!==Object.prototype&&(i=s):n=!0),null==i&&(i={}),l||o(i,c)||a(i,c,function(){return this}),e.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:n}},function(e,t,n){var i=n(8),r=n(45),a=n(37),n=n(101),o=a("IE_PROTO"),s=Object.prototype;e.exports=n?Object.getPrototypeOf:function(e){return e=r(e),i(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},function(e,t,n){function i(){}function r(e){return"<script>"+e+"<\/script>"}var a,o=n(12),s=n(102),l=n(44),c=n(38),u=n(72),d=n(34),h=n(37)("IE_PROTO"),p=function(){try{a=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;p=a?function(e){e.write(r("")),e.close();var t=e.parentWindow.Object;return e=null,t}(a):((t=d("iframe")).style.display="none",u.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(r("document.F=Object")),e.close(),e.F);for(var n=l.length;n--;)delete p.prototype[l[n]];return p()};c[h]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(i.prototype=o(e),n=new i,i.prototype=null,n[h]=e):n=p(),void 0===t?n:s(n,t)}},function(e,t,n){var i=n(64),r=n(44);e.exports=Object.keys||function(e){return i(e,r)}},function(e,t,n){n=n(20);e.exports=n("document","documentElement")},function(e,t,n){n=n(2);e.exports=n.Promise},function(e,t,n){function h(e,t){this.stopped=e,this.result=t}var p=n(12),_=n(112),f=n(43),g=n(29),v=n(113),m=n(114);(e.exports=function(e,t,n,i,r){var a,o,s,l,c,u,d=g(t,n,i?2:1);if(r)a=e;else{if("function"!=typeof(r=v(e)))throw TypeError("Target is not iterable");if(_(r)){for(o=0,s=f(e.length);o<s;o++)if((l=i?d(p(u=e[o])[0],u[1]):d(e[o]))&&l instanceof h)return l;return new h(!1)}a=r.call(e)}for(c=a.next;!(u=c.call(a)).done;)if("object"==typeof(l=m(a,d,u.value,i))&&l&&l instanceof h)return l;return new h(!1)}).stop=function(e){return new h(!0,e)}},function(e,t,n){var i=n(12),r=n(25),a=n(4)("species");e.exports=function(e,t){var n,e=i(e).constructor;return void 0===e||null==(n=i(e)[a])?t:r(n)}},function(e,t,n){function i(e){return function(){E(e)}}function r(e){E(e.data)}var a,o=n(2),s=n(7),l=n(17),c=n(29),u=n(72),d=n(34),h=n(77),p=o.location,_=o.setImmediate,f=o.clearImmediate,g=o.process,v=o.MessageChannel,m=o.Dispatch,y=0,S={},E=function(e){var t;S.hasOwnProperty(e)&&(t=S[e],delete S[e],t())},n=function(e){o.postMessage(e+"",p.protocol+"//"+p.host)};_&&f||(_=function(e){for(var t=[],n=1;n<arguments.length;)t.push(arguments[n++]);return S[++y]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},a(y),y},f=function(e){delete S[e]},"process"==l(g)?a=function(e){g.nextTick(i(e))}:m&&m.now?a=function(e){m.now(i(e))}:v&&!h?(v=(h=new v).port2,h.port1.onmessage=r,a=c(v.postMessage,v,1)):!o.addEventListener||"function"!=typeof postMessage||o.importScripts||s(n)||"file:"===p.protocol?a="onreadystatechange"in d("script")?function(e){u.appendChild(d("script")).onreadystatechange=function(){u.removeChild(this),E(e)}}:function(e){setTimeout(i(e),0)}:(a=n,o.addEventListener("message",r,!1))),e.exports={set:_,clear:f}},function(e,t,n){n=n(78);e.exports=/(iphone|ipod|ipad).*applewebkit/i.test(n)},function(e,t,n){n=n(20);e.exports=n("navigator","userAgent")||""},function(e,t,n){var i=n(12),r=n(11),a=n(48);e.exports=function(e,t){if(i(e),r(t)&&t.constructor===e)return t;e=a.f(e);return(0,e.resolve)(t),e.promise}},function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},function(e,t,n){function o(e){throw e}var s=n(14),l=n(7),c=n(8),u=Object.defineProperty,d={};e.exports=function(e,t){if(c(d,e))return d[e];var n=[][e],i=!!c(t=t||{},"ACCESSORS")&&t.ACCESSORS,r=c(t,0)?t[0]:o,a=c(t,1)?t[1]:void 0;return d[e]=!!n&&!l(function(){if(i&&!s)return!0;var e={length:-1};i?u(e,1,{enumerable:!0,get:o}):e[1]=1,n.call(e,r,a)})}},function(e,t,n){e.exports={container:"styles__container_14BbdRwp0rjtmY2SthKjYh",controlsVisible:"styles__controlsVisible_3YNMpna1eItRmruuU0l4Lr",fullscreen:"styles__fullscreen_2V5MixlxseUqztCkUlknr2",fadeIn:"styles__fadeIn_1XaYC5qFhwgUnRH03aUJRp",headerText:"styles__headerText_1IpJBkAZ3G-AcDLxNohTw",row:"styles__row_25TPSCHO9j2o1qNt_F8L7A",thumbnail:"styles__thumbnail_3AQZry0uMDphvHRkATJgSv",textContainer:"styles__textContainer_3po31nE30Je29SLuNRRWWW",videoTitle:"styles__videoTitle_ejWhXhNRCLIhAxgZKXPWv",countdownText:"styles__countdownText_tQ5pKo-5lQQV3De64SQuj"}},function(e,t,n){var s=n(199),l=n(21),i={easeIn:"easeInCubic",easeOut:"easeOutCubic",easeInOut:"easeInOutCubic"},n=function e(t,n){if(!(this instanceof e))throw new Error("Constructor was called without new keyword");n=l.extend({duration:800,easing:"linear",from:{},to:{},step:function(){}},n),t=l.isString(t)?document.querySelector(t):t,this.path=t,this._opts=n,this._tweenable=null;n=this.path.getTotalLength();this.path.style.strokeDasharray=n+" "+n,this.set(0)};n.prototype.value=function(){var e=this._getComputedDashOffset(),t=this.path.getTotalLength();return parseFloat((1-e/t).toFixed(6),10)},n.prototype.set=function(e){this.stop(),this.path.style.strokeDashoffset=this._progressToOffset(e);var t,n=this._opts.step;l.isFunction(n)&&(t=this._easing(this._opts.easing),n(this._calculateTo(e,t),this._opts.shape||this,this._opts.attachment))},n.prototype.stop=function(){this._stopTween(),this.path.style.strokeDashoffset=this._getComputedDashOffset()},n.prototype.animate=function(e,n,t){n=n||{},l.isFunction(n)&&(t=n,n={});var i=l.extend({},n),r=l.extend({},this._opts);n=l.extend(r,n);var a=this._easing(n.easing),r=this._resolveFromAndTo(e,a,i);this.stop(),this.path.getBoundingClientRect();var i=this._getComputedDashOffset(),e=this._progressToOffset(e),o=this;this._tweenable=new s,this._tweenable.tween({from:l.extend({offset:i},r.from),to:l.extend({offset:e},r.to),duration:n.duration,easing:a,step:function(e){o.path.style.strokeDashoffset=e.offset;var t=n.shape||o;n.step(e,t,n.attachment)},finish:function(e){l.isFunction(t)&&t()}})},n.prototype._getComputedDashOffset=function(){var e=window.getComputedStyle(this.path,null);return parseFloat(e.getPropertyValue("stroke-dashoffset"),10)},n.prototype._progressToOffset=function(e){var t=this.path.getTotalLength();return t-e*t},n.prototype._resolveFromAndTo=function(e,t,n){return n.from&&n.to?{from:n.from,to:n.to}:{from:this._calculateFrom(t),to:this._calculateTo(e,t)}},n.prototype._calculateFrom=function(e){return s.interpolate(this._opts.from,this._opts.to,this.value(),e)},n.prototype._calculateTo=function(e,t){return s.interpolate(this._opts.from,this._opts.to,e,t)},n.prototype._stopTween=function(){null!==this._tweenable&&(this._tweenable.stop(),this._tweenable=null)},n.prototype._easing=function(e){return i.hasOwnProperty(e)?i[e]:e},e.exports=n},function(e,t,n){var i=n(31),r=n(21),n=function(e,t){this._pathTemplate="M 50,50 m 0,-{radius} a {radius},{radius} 0 1 1 0,{2radius} a {radius},{radius} 0 1 1 0,-{2radius}",this.containerAspectRatio=1,i.apply(this,arguments)};((n.prototype=new i).constructor=n).prototype._pathString=function(e){var t=e.strokeWidth,t=50-(t=e.trailWidth&&e.trailWidth>e.strokeWidth?e.trailWidth:t)/2;return r.render(this._pathTemplate,{radius:t,"2radius":2*t})},n.prototype._trailString=function(e){return this._pathString(e)},e.exports=n},function(e,t,n){"use strict";function i(e){var t,e=e.Symbol;return"function"==typeof e?e.observable?t=e.observable:(t=e("observable"),e.observable=t):t="@@observable",t}n.d(t,"a",function(){return i})},function(e,t,n){!function(E){!function(e){"use strict";function t(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function n(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function h(e,t,n){h.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:n,enumerable:!0})}function p(e,t){p.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function _(e,t){_.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function f(e,t,n){f.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:n,enumerable:!0})}function g(e,t,n){n=e.slice((n||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,n),e}function v(e){var t=void 0===e?"undefined":y(e);return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":"function"==typeof e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function m(i,r,a,o,e,t,s){s=s||[];var l=(e=e||[]).slice(0);if(void 0!==t){if(o){if("function"==typeof o&&o(l,t))return;if("object"===(void 0===o?"undefined":y(o))){if(o.prefilter&&o.prefilter(l,t))return;!o.normalize||(u=o.normalize(l,t,i,r))&&(i=u[0],r=u[1])}}l.push(t)}"regexp"===v(i)&&"regexp"===v(r)&&(i=i.toString(),r=r.toString());var n,c=void 0===i?"undefined":y(i),e=void 0===r?"undefined":y(r),u="undefined"!==c||s&&s[s.length-1].lhs&&s[s.length-1].lhs.hasOwnProperty(t),t="undefined"!==e||s&&s[s.length-1].rhs&&s[s.length-1].rhs.hasOwnProperty(t);if(!u&&t)a(new p(l,r));else if(!t&&u)a(new _(l,i));else if(v(i)!==v(r))a(new h(l,i,r));else if("date"===v(i)&&i-r!=0)a(new h(l,i,r));else if("object"===c&&null!==i&&null!==r)if(s.filter(function(e){return e.lhs===i}).length)i!==r&&a(new h(l,i,r));else{if(s.push({lhs:i,rhs:r}),Array.isArray(i)){for(i.length,n=0;n<i.length;n++)n>=r.length?a(new f(l,n,new _(void 0,i[n]))):m(i[n],r[n],a,o,l,n,s);for(;n<r.length;)a(new f(l,n,new p(void 0,r[n++])))}else{var u=Object.keys(i),d=Object.keys(r);u.forEach(function(e,t){var n=d.indexOf(e);0<=n?(m(i[e],r[e],a,o,l,e,s),d=g(d,n)):m(i[e],void 0,a,o,l,e,s)}),d.forEach(function(e){m(void 0,r[e],a,o,l,e,s)})}s.length=s.length-1}else i!==r&&("number"===c&&isNaN(i)&&isNaN(r)||a(new h(l,i,r)))}function r(e,t,n,i){return i=i||[],m(e,t,function(e){e&&i.push(e)},n),i.length?i:void 0}function a(e,t,n){if(e&&t&&n&&n.kind){for(var i=e,r=-1,a=n.path?n.path.length-1:0;++r<a;)void 0===i[n.path[r]]&&(i[n.path[r]]="number"==typeof n.path[r]?[]:{}),i=i[n.path[r]];switch(n.kind){case"A":!function e(t,n,i){if(i.path&&i.path.length){for(var r=t[n],a=i.path.length-1,o=0;o<a;o++)r=r[i.path[o]];switch(i.kind){case"A":e(r[i.path[o]],i.index,i.item);break;case"D":delete r[i.path[o]];break;case"E":case"N":r[i.path[o]]=i.rhs}}else switch(i.kind){case"A":e(t[n],i.index,i.item);break;case"D":t=g(t,n);break;case"E":case"N":t[n]=i.rhs}return t}(n.path?i[n.path[r]]:i,n.index,n.item);break;case"D":delete i[n.path[r]];break;case"E":case"N":i[n.path[r]]=n.rhs}}}function A(e,t,n,i){t=r(e,t);try{i?n.groupCollapsed("diff"):n.group("diff")}catch(e){n.log("diff")}t?t.forEach(function(o){var e=o.kind,t=function(){var e=o.kind,t=o.path,n=o.lhs,i=o.rhs,r=o.index,a=o.item;switch(e){case"E":return[t.join("."),n,"",i];case"N":return[t.join("."),i];case"D":return[t.join(".")];case"A":return[t.join(".")+"["+r+"]",a];default:return[]}}();n.log.apply(n,["%c "+S[e].text,"color: "+S[e].color+"; font-weight: bold"].concat(s(t)))}):n.log(" no diff ");try{n.groupEnd()}catch(e){n.log(" diff end  ")}}function w(e,t,n,i){switch(void 0===e?"undefined":y(e)){case"object":return"function"==typeof e[i]?e[i].apply(e,s(n)):e[i];case"function":return e(t);default:return e}}function i(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},s=Object.assign({},P,e),t=s.logger,l=s.stateTransformer,c=s.errorTransformer,S=s.predicate,E=s.logErrors,b=s.diffPredicate;if(void 0===t)return function(){return function(t){return function(e){return t(e)}}};if(e.getState&&e.dispatch)return console.error("[redux-logger] redux-logger not installed. Make sure to pass logger instance as middleware:\n// Logger with default options\nimport { logger } from 'redux-logger'\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n// Or you can create your own logger with custom options http://bit.ly/redux-logger-options\nimport createLogger from 'redux-logger'\nconst logger = createLogger({\n  // ...options\n});\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n"),function(){return function(t){return function(e){return t(e)}}};var T=[];return function(e){var o=e.getState;return function(i){return function(e){if("function"==typeof S&&!S(o,e))return i(e);var t={};T.push(t),t.started=I.now(),t.startedTime=new Date,t.prevState=l(o()),t.action=e;var n=void 0;if(E)try{n=i(e)}catch(e){t.error=c(e)}else n=i(e);t.took=I.now()-t.started,t.nextState=l(o());var u,d,r,a,h,p,_,f,g,v,m,y,e=s.diff&&"function"==typeof b?b(o,e):s.diff;if(u=T,d=Object.assign({},s,{diff:e}),h=d.logger,p=d.actionTransformer,e=d.titleFormatter,_=void 0===e?(r=d.timestamp,a=d.duration,function(e,t,n){var i=["action"];return i.push("%c"+String(e.type)),r&&i.push("%c@ "+t),a&&i.push("%c(in "+n.toFixed(2)+" ms)"),i.join(" ")}):e,f=d.collapsed,g=d.colors,v=d.level,m=d.diff,y=void 0===d.titleFormatter,u.forEach(function(e,t){var n=e.started,i=e.startedTime,r=e.action,a=e.prevState,o=e.error,s=e.took,l=e.nextState,c=u[t+1];c&&(l=c.prevState,s=c.started-n);t=p(r),c="function"==typeof f?f(function(){return l},r,e):f,n=C(i),r=g.title?"color: "+g.title(t)+";":"",e=["color: gray; font-weight: lighter;"];e.push(r),d.timestamp&&e.push("color: gray; font-weight: lighter;"),d.duration&&e.push("color: gray; font-weight: lighter;");i=_(t,n,s);try{c?g.title&&y?h.groupCollapsed.apply(h,["%c "+i].concat(e)):h.groupCollapsed(i):g.title&&y?h.group.apply(h,["%c "+i].concat(e)):h.group(i)}catch(e){h.log(i)}r=w(v,t,[a],"prevState"),n=w(v,t,[t],"action"),s=w(v,t,[o,a],"error"),e=w(v,t,[l],"nextState");r&&(g.prevState?(i="color: "+g.prevState(a)+"; font-weight: bold",h[r]("%c prev state",i,a)):h[r]("prev state",a)),n&&(g.action?(r="color: "+g.action(t)+"; font-weight: bold",h[n]("%c action    ",r,t)):h[n]("action    ",t)),o&&s&&(g.error?(t="color: "+g.error(o,a)+"; font-weight: bold;",h[s]("%c error     ",t,o)):h[s]("error     ",o)),e&&(g.nextState?(o="color: "+g.nextState(l)+"; font-weight: bold",h[e]("%c next state",o,l)):h[e]("next state",l)),m&&A(a,l,h,c);try{h.groupEnd()}catch(e){h.log(" log end ")}}),T.length=0,t.error)throw t.error;return n}}}}function o(e,t){return t=t-e.toString().length,new Array(1+t).join("0")+e}function s(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var l,C=function(e){return o(e.getHours(),2)+":"+o(e.getMinutes(),2)+":"+o(e.getSeconds(),2)+"."+o(e.getMilliseconds(),3)},I="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance:Date,y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=[],u="object"===(void 0===E?"undefined":y(E))&&E?E:"undefined"!=typeof window?window:{};(l=u.DeepDiff)&&c.push(function(){void 0!==l&&u.DeepDiff===r&&(u.DeepDiff=l,l=void 0)}),t(h,n),t(p,n),t(_,n),t(f,n),Object.defineProperties(r,{diff:{value:r,enumerable:!0},observableDiff:{value:m,enumerable:!0},applyDiff:{value:function(t,n,i){t&&n&&m(t,n,function(e){i&&!i(t,n,e)||a(t,n,e)})},enumerable:!0},applyChange:{value:a,enumerable:!0},revertChange:{value:function(e,t,n){if(e&&t&&n&&n.kind){for(var i=e,r=n.path.length-1,a=0;a<r;a++)void 0===i[n.path[a]]&&(i[n.path[a]]={}),i=i[n.path[a]];switch(n.kind){case"A":!function e(t,n,i){if(i.path&&i.path.length){for(var r=t[n],a=i.path.length-1,o=0;o<a;o++)r=r[i.path[o]];switch(i.kind){case"A":e(r[i.path[o]],i.index,i.item);break;case"D":case"E":r[i.path[o]]=i.lhs;break;case"N":delete r[i.path[o]]}}else switch(i.kind){case"A":e(t[n],i.index,i.item);break;case"D":case"E":t[n]=i.lhs;break;case"N":t=g(t,n)}return t}(i[n.path[a]],n.index,n.item);break;case"D":case"E":i[n.path[a]]=n.lhs;break;case"N":delete i[n.path[a]]}}},enumerable:!0},isConflict:{value:function(){return void 0!==l},enumerable:!0},noConflict:{value:function(){return c&&(c.forEach(function(e){e()}),c=null),r},enumerable:!0}});function d(){var e=(t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).dispatch,t=t.getState;return"function"==typeof e||"function"==typeof t?i()({dispatch:e,getState:t}):void console.error("\n[redux-logger v3] BREAKING CHANGE\n[redux-logger v3] Since 3.0.0 redux-logger exports by default logger with default settings.\n[redux-logger v3] Change\n[redux-logger v3] import createLogger from 'redux-logger'\n[redux-logger v3] to\n[redux-logger v3] import { createLogger } from 'redux-logger'\n")}var S={E:{color:"#2196F3",text:"CHANGED:"},N:{color:"#4CAF50",text:"ADDED:"},D:{color:"#F44336",text:"DELETED:"},A:{color:"#2196F3",text:"ARRAY:"}},P={level:"log",logger:console,logErrors:!0,collapsed:void 0,predicate:void 0,duration:!1,timestamp:!0,stateTransformer:function(e){return e},actionTransformer:function(e){return e},errorTransformer:function(e){return e},colors:{title:function(){return"inherit"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}},diff:!1,diffPredicate:void 0,transformer:void 0};e.defaults=P,e.createLogger=i,e.logger=d,e.default=d,Object.defineProperty(e,"__esModule",{value:!0})}(t)}.call(this,n(22))},function(e,t,o){function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}o(88),o(137),o(138);function n(e,t){this._time=Date.now(),this._adPlaybackTime=0,this._store=P(),this._store.subscribe(this.updateBreakpointClass.bind(this)),this._actions=b(k,this._store.dispatch),(this._self=this)._version="3.44.1.212",this.createMark("playerLoadStart"),this._container=e,this._height=this._container.offsetHeight,this._width=this._container.offsetWidth,this._isVertical=this._width/this._height<1,this._videoId=this._container.getAttribute("id"),this._video,this._captionsShowing=!1,this._vrWrapper,this._vrComponents,this._hlsPlayer,this._wrapper,this._controls,this._context,this._videodata,this._hlsAvailable=!1,this._isFullScreen=!1,this._currentTime=0,this._sizeTimer,this._volume=1,this._hlsLoadAttempted=!1,this.parseXml,this._availableCaptions=[],this._setMuted=!1,this._fields="fields=isQAEvent,type,video174kMP4Url,video320kMP4Url,video664kMP4Url,video1264kMP4Url,video1864kMP4Url,video2564kMP4Url,hls,videoMP4List,adZone,thumbnailList,guid,state,secondsUntilStartTime,author,description,name,linkURL,videoStillURL,duration,videoURL,adCategory,adsAllowed,chapterTimes,catastrophic,linkShortURL,doctypeID,youtubeID,titletag,rssURL,wsj-section,wsj-subsection,allthingsd-section,allthingsd-subsection,sm-section,sm-subsection,provider,formattedCreationDate,iso8601CreationDate,keywords,keywordsOmni,column,editor,emailURL,emailPartnerID,showName,omniProgramName,omniVideoFormat,linkRelativeURL,touchCastID,omniPublishDate,adTagParams,gptCustParams,format,forceClosedCaptions,captionsVTT,hlsNoCaptions,episodeNumber,seriesName,thumbstripURL,thumbnailImageManager,ads_allowed,mediaLiveChannelId",this._isIpad,this._isIphone,this._isAndroid,this._isIE,this._isMobile=!1,this._androidV,this._isTwitter,this._isOperaMini,this._isChrome,this._safariV=-1,this._safariInit=!1,this._safariHandler;var n=window.navigator.userAgent.toLowerCase(),i=navigator.userAgent.toLowerCase();this._isIpad=n.match(/(iPad)/i)||"MacIntel"===navigator.platform&&1<navigator.maxTouchPoints,this._isIphone=n.match(/(iphone)/i),this._isIphone=null!=this._isIphone,this._isAndroid=n.match(/(android)/i),this._isAndroid=null!==this._isAndroid&&null!=u(this._isAndroid),this._androidV=parseFloat(n.slice(n.indexOf("android")+8)),this._isIE=-1!=i.indexOf("msie")&&parseInt(i.split("msie")[1]),this._isOperaMini=n.match(/(Android; Opera Mini)/i),this._isChrome=n.match(/(Chrome)/i),this._iOS=(/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&1<navigator.maxTouchPoints)&&!window.MSStream,this._isIE||navigator.userAgent.match(/Trident/)&&!navigator.userAgent.match(/MSIE/)&&(this._isIE=11),this._isSafariMac=-1!=navigator.userAgent.indexOf("Safari")&&-1!=navigator.userAgent.indexOf("Mac")&&-1==navigator.userAgent.indexOf("Chrome");try{this._isSafariMac&&(this._safariV=parseInt(n.match("version[ /]+[0-9]*")[0].split("/")[1]))}catch(e){this._safariV=-1}if(this._isSafari=-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome"),this._isMobile=Boolean(this._isAndroid||i.match(/webos/i)||this._isIphone||this._isIpad||i.match(/ipod/i)||i.match(/blackberry/i)||i.match(/windows phone/i)),"mozilla/5.0 (x11; linux x86_64; rv:45.0) gecko/20100101 firefox/45.0"!=n){this._bitrateList,this._selectedBitrate="video664kMP4Url",this._skipToTime=0,this._playOverlay,this._timeDisplay,this._fullscreenBtn,this._volumeBtn,this._ccBtn,this._ccList,this._langSelected="",this._currentTrack,this._bitList,this._volumeSlider,this._adLoadingScreen,this._adsSkipButton,this._startClick,this._shareScreen,this._endScreen,this._endScreenStatus,this._ajax={},this._configLoaded=!("playerid"in t),this._futureTimer,this._startTime,this._videoMsg,this._isStalled=!1,this._endScreenShowing=!1,this._endScreenLoading=!1,this._adMarkerContainer,this._currentThumbstripURL,this._adStarted=!1,this._adsManager,this._adsLoader,this._adContainer,this._adDisplayContainer,this._adDuration=0,this._adPlayNumber=1,this._adTimer,this._adTimeoutTimer,this._adTimeoutFail=!1,this._adResponseTimeout=8e3,this._currentAd,this._midRolls=[],this._midrollRequested=!1,this._adInfo,this._adId,this._adTagUsed="none",this._captionsLangs={eng:"English",spa:"Spanish",jap:"Japanese",por:"Portuguese"},this.BUCKET_HASH_MAP=["2qgQ1WCa3A","ixi4E5ylqa","830nwKog3K","K8ZnHJ5Uyn","91GjW1q7Zg","rGgki1wrhs","q85AaJVP78","1p6sdUNJWD","63L1D4y2F9","HY0f8Of9M1"],this._skipAvailable=!1,this._adCountdownText,this._videoSkipIcon,this._formatOverride="",this._trackingMilestones=[!1,!1,!1,!1],this._mediaHeartbeat,this._mediaHeartbeatConfig,this._mediaHeartbeatDelegate,this._mediaObjectHeartbeat,this._pingMilestone=-1,this._isChained=!1,this._isLive=!1,this._contentStartTracked=!1,this._sessionStarted=!1,this._comscoreC3="13047035",this._comscoreMeta={ns_st_ci:"",c3:this._comscoreC3,c4:"*null",c6:"*null"},this._comscoreTag=new f.StreamingTag({customerC2:"6035148"}),this._retryLoadAttempts=0,this._trackInViewListenerReference,this._autoplayed,this._adErrorTracked=!0,this._adErrorEvent=!1,this._tObject={},this._pageEvents="",this._currentEvents=["event136","event40","event41","event42","event46","event67","event73","event74","event96","event97","event98","event99","event100","event113","event115","event116","event117","event141"],this._larsUrl="https://video-api.wsj.com/enf/wsjdn-video.asp",this._convivaTestCustomerKey="896e280ea92df939a292df56edeb57ab25ecaecf",this._convivaProdCustomerKey="445b2eba1211f043d37dc4994c50112384f41204",this._convivaServiceURL="https://wallstreetjournal-test.testonly.conviva.com",this._testingEnvironment=!0,this._convivaClient,this._convivaAdSessionKey=null,this._convivaContentMetadata,this._convivaContentSessionKey=null,this._convivaPlayerStateManager,this._convivaAdStateManager,this._convivaClientInterfaceObject,this._convivaHtml5PlayerInterface,this._convivaTestMode=!1,this._convivaSystemFactory,this._contentInitialized=!1,this._adsRequestPending=!1,this._playRequested=!1,this._flash,this._flashContainer,this._flashInit=!1,this._flashEvents;n={autoplay:this._fPlaying=!1,loop:!1,adsEnabled:!(this._bucket=""),vpaidEnabled:!0,shareEnabled:!0,allowPlayerPopup:!1,chainVideos:!1,disableHtmlControls:!1,enableLiveButton:!1,shareDomain:null,useAllesseh:!1,api:"https://video-api.wsj.com/api-video/",api2:"https://video-api.shdsvc.dowjones.io/api/",saveApi:"https://www.wsj.com/articles/svc/personalization/saved-contents",saveApiPublication:null,clickForSound:!1,resetOnComplete:!0,type:"",query:"",contentType:"article",enableEndScreen:!1,enableMoreVideosSlide:!1,disableTitle:!1,noThumb:!1,thumbFlashLine:!1,thumbLayout:"",larsId:"91",larsAdId:"1259",trackInView:!1,channel:null,enableScrubPreview:!0,allowFullScreen:!0,adTag:"",useHttps:!0,count:1,moduleId:"",adZone:"",lnid:"",plid:"",msrc:null,collapseable:!1,disableDVR:null,maxBitrateIndex:null,enableCaptions:!0,loaderThumb:!1,adSkipTime:15,playlist:{},suggestionsType:"wsj-section",suggestionsQuery:"",suggestionsGroupId:"",sAccount:!1,imaLibrary:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",site:"",directLinks:!1,playlistQuery:"",touchCastID:null,relativeLinks:!1,disableChainPlay:!1,thumb:null,callback:null,fireTv:!1,useHLS:!0,startFullScreen:!1,playInline:!this._isVertical&&this._isIphone,suppressHeadline:!1,startLevel:!1,startPosition:-1};try{this._domain=window.location!=window.parent.location?document.referrer:document.location}catch(e){this._domain=document.domain}this._isIphone&&!n.playInline&&(n.disableHtmlControls=!0),this._settings=this.extend(n,t),this.hlsConfig={autoStartLoad:!0,startPosition:this._settings.startPosition,capLevelToPlayerSize:!1,enableWebVTT:!1,maxMaxBufferLength:30},-1!=navigator.userAgent.indexOf("amazon-fireos")?(this._settings.useHLS=!1,this._isMobile=!1):this._settings.fireTv=!1,!0!==this._settings.clickForSound&&"mobile"!=this._settings.autoplay||(this._settings.autoplay="muted"),this._isMobile&&("muted"==this._settings.autoplay?this._settings.playInline=!0:this._settings.autoplay=!1),this._isMobile||(this._settings.startFullScreen=!1),(this._iOS||this._isSafariMac)&&(this._settings.useHLS=!1),this._isIE&&(this._settings.enableCaptions=!1),this._isMobile&&(this._settings.vpaidEnabled=!1),"https://video-api.wsj.com/api-video/"!==this._settings.api&&1<this._settings.api.split("/api-video/").length&&(this._larsUrl=this._settings.api.split("/api-video/")[0]+"/enf/wsjdn-video.asp"),!1!==this._settings.startLevel&&(this.hlsConfig.startLevel=this._settings.startLevel),this._settings.hasCMPConsent="undefined"==typeof djcmp||void 0===djcmp.customVendorIsEnabled||djcmp.customVendorIsEnabled("5fa5a010e954e249a3afd700");t=A.getApiUrlOverride();if(t&&(this._settings.api2=t),this._graphics={},this._graphics.pause='<svg width="16px" height="22px" viewBox="0 0 20 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Pause</title><g id="Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Icons/Play/Pause" fill="#FFFFFF" fill-rule="nonzero"><path d="M0,25 L0,3 L6,3 L6,25 L0,25 Z M11,25 L11,3 L17,3 L17,25 L11,25 Z" id="Combined-Shape"></path></g></g></svg>',this._graphics.play='<svg width="16px" height="22px" viewBox="0 0 20 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Play</title><desc>Created with sketchtool.</desc><g id="Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Icons/Play/Play" fill="#FFFFFF" fill-rule="nonzero"><polyline id="Play" points="0 2 0 26 20 13.4528 0 2"></polyline></g></g></svg>',this._graphics.cc='<svg width="22px" height="22px" viewBox="0 0 28 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Icons/CC/Inactive" fill="#FFFFFF" fill-rule="nonzero"><path d="M26,4 L2,4 L2,22 L7,22 L7,26 L12,22 L26,22 L26,4 Z M24,20 L4,20 L4,6 L24,6 L24,20 Z M20,17 C19.77858,17 19.4452467,17 19,17 C16,17 15,15 15,13 C15,11 16,9 19,9 C19.5054152,9 19.8387485,9 20,9 L20,11 C19,11 17,11 17,13 C17,15 19,15 20,15 L20,17 Z M13,17 C12.77858,17 12.4452467,17 12,17 C9,17 8,15 8,13 C8,11 9,9 12,9 C12.5054152,9 12.8387485,9 13,9 L13,11 C12,11 10,11 10,13 C10,15 12,15 13,15 L13,17 Z" id="CC"></path></g></g></svg>',this._graphics["cc-active"]='<svg width="22px" height="22px" viewBox="0 0 28 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Icons/CC/Active" fill="#FFFFFF" fill-rule="nonzero"><path d="M26,4 L2,4 L2,22 L7,22 L7,26 L12,22 L26,22 L26,4 Z M20,17 C19.77858,17 19.4452467,17 19,17 C16,17 15,15 15,13 C15,11 16,9 19,9 C19.5054152,9 19.8387485,9 20,9 L20,11 C19,11 17,11 17,13 C17,15 19,15 20,15 L20,17 Z M13,17 C12.77858,17 12.4452467,17 12,17 C9,17 8,15 8,13 C8,11 9,9 12,9 C12.5054152,9 12.8387485,9 13,9 L13,11 C12,11 10,11 10,13 C10,15 12,15 13,15 L13,17 Z" id="CC"></path></g></g></svg>',this._graphics.bitrate='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100%" height="100%" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"><g id="Layer_1"></g><g id="Layer_2"><g><path id="ytp-svg-39_1_" fill="#FFFFFF" d="M26,17.5v-3h-2.655c-0.189-0.956-0.567-1.845-1.089-2.633L24.122,10L22,7.878 l-1.866,1.866c-0.789-0.521-1.678-0.899-2.634-1.1V6h-3v2.645c-0.967,0.2-1.855,0.578-2.645,1.1L9.988,7.878L7.866,10l1.867,1.867 c-0.522,0.788-0.9,1.677-1.089,2.633H6v3h2.645c0.2,0.956,0.578,1.845,1.1,2.633l-1.878,1.878l2.122,2.122l1.878-1.877 c0.789,0.521,1.678,0.899,2.634,1.089V26h3v-2.655c0.956-0.189,1.833-0.567,2.622-1.089L22,24.133l2.122-2.122l-1.878-1.878 c0.522-0.788,0.9-1.677,1.101-2.633H26z M16,20.5c-2.488,0-4.5-2.022-4.5-4.5c0-2.489,2.012-4.5,4.5-4.5 c2.478,0,4.5,2.011,4.5,4.5C20.5,18.478,18.478,20.5,16,20.5L16,20.5z"/></g></g></svg>',this._graphics["share-fb"]='<a id="share-link-fb-'+this._videoId+'"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100%" height="100%" viewBox="-19.5 60.5 32 32" enable-background="new -19.5 60.5 32 32" xml:space="preserve"><g id="Page-1"><g id="facebook"><path id="Path" fill="#FFFFFF" d="M1.166,76.504h-2.714V86h-4.034v-9.496H-7.5v-3.349h1.918v-2.176c0-1.551,0.758-3.979,4.064-3.979h2.987v3.267h-2.183c-0.452-0.024-0.838,0.313-0.864,0.755c-0.003,0.055,0,0.107,0.008,0.158v1.976H1.5L1.166,76.504z"/></g></g></svg></a>',this._graphics["share-twitter"]='<a id="share-link-twitter-'+this._videoId+'" target="_blank"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100%" height="100%" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"><g id="Logo__x2014__FIXED"><g><path fill="#FFFFFF" d="M12.837,25.5c7.613,0,11.776-7.313,11.776-13.642c0-0.206,0-0.411-0.006-0.618c0.807-0.673,1.51-1.523,2.065-2.486c-0.742,0.384-1.542,0.635-2.382,0.757c0.855-0.59,1.511-1.533,1.824-2.655c-0.799,0.553-1.687,0.944-2.632,1.159C22.726,7.08,21.652,6.5,20.464,6.5c-2.284,0-4.141,2.15-4.141,4.796c0,0.375,0.042,0.739,0.106,1.095c-3.439-0.196-6.49-2.113-8.533-5.011C7.542,8.09,7.34,8.912,7.34,9.792c0,1.664,0.734,3.132,1.841,3.991c-0.679-0.027-1.315-0.243-1.874-0.598c0,0.019,0,0.038,0,0.065c0,2.318,1.429,4.264,3.318,4.703c-0.347,0.111-0.71,0.168-1.089,0.168c-0.266,0-0.525-0.025-0.775-0.084c0.525,1.908,2.059,3.292,3.867,3.33c-1.421,1.29-3.206,2.056-5.142,2.056c-0.331,0-0.663-0.021-0.985-0.065C8.324,24.705,10.504,25.5,12.837,25.5"/></g></g></svg></a>',this._graphics["share-email"]='<a id="share-link-twitter-'+this._videoId+'" target="_blank"><svg version="1.1" id="svg2439" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100%" height="100%" viewBox="0 0 439.371 331.469" enable-background="new 0 0 439.371 331.469" xml:space="preserve"><g id="g2449" transform="translate(-145.3305,-145.3305)"><path fill="#FFFFFF" d="M516.516,426.799H216.331V200.334h300.186V426.799z M237.275,405.856h258.298V221.279H237.275V405.856z"/><path id="path2453" fill="#FFFFFF" stroke="#000000" stroke-width="30.655" d="M226.803,210.807"/><path fill="#FFFFFF" d="M366.882,352.684c-9.349,0.001-18.261-3.576-24.451-9.815L221.946,220.78l14.907-14.711l120.465,122.068c2.265,2.283,5.757,3.603,9.563,3.603c3.784,0,7.233-1.29,9.466-3.54l120.388-121.173l14.857,14.761L391.209,342.956C385.079,349.135,376.209,352.684,366.882,352.684z"/><rect x="269.215" y="296.385" transform="matrix(0.7149 0.6993 -0.6993 0.7149 333.1573 -92.2456)" fill="#FFFFFF" width="20.944" height="131.993"/><rect x="389.075" y="352.02" transform="matrix(0.6987 0.7154 -0.7154 0.6987 395.928 -215.1116)" fill="#FFFFFF" width="128.542" height="20.945"/></g></svg></a>',"undefined"==typeof SVGRect?this._graphics["play-overlay"]='<img style="margin:0 auto;" height="50" width="50" src="'+this._settings.api+'player/v3/css/play-overlay.png" />':this._graphics["play-overlay"]='<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100%" height="100%" viewBox="0 0 52 52" enable-background="new 0 0 52 52" xml:space="preserve"><g id="XMLID_2_" opacity="1"><path fill="#FFFFFF" d="M26,51.5C11.9,51.5,0.5,40.1,0.5,26C0.5,11.9,11.9,0.5,26,0.5c14.1,0,25.5,11.4,25.5,25.5C51.5,40.1,40.1,51.5,26,51.5z"/><path fill="#FFFFFF" d="M26,1c13.8,0,25,11.2,25,25S39.8,51,26,51S1,39.8,1,26S12.2,1,26,1 M26,0C11.7,0,0,11.7,0,26s11.7,26,26,26 s26-11.7,26-26S40.3,0,26,0L26,0z"/></g><polygon id="XMLID_1_" fill="#333333" points="19.6,37.5 19.6,14.5 37.8,25.5 "/></svg>',this._ajax.x=function(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;for(var e,t=["MSXML2.XmlHttp.6.0","MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"],n=0;n<t.length;n++)try{e=new ActiveXObject(t[n]);break}catch(e){}return e},this._ajax.send=function(e,t,n,i,r,a){try{var o=this.x();o.open(i,e,a),o.data=r,o.onerror=function(){n(),console.log("Error loading config.")},o.onreadystatechange=function(){200==o.status?4==o.readyState&&t&&(t(o.responseText,o.data),o.onreadystatechange=null,o=null):0!=o.status&&n&&(o.onreadystatechange=null,o=null,n())},o.send(r)}catch(e){n&&(o&&(o.onreadystatechange=null),n())}},this._ajax.get=function(e,t,n,i){this.send(e,t,n,"GET",i,!0)},this.base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,n,i,r,a,o,s="",l=0;for(e=this._utf8_encode(e);l<e.length;)i=(o=e.charCodeAt(l++))>>2,r=(3&o)<<4|(t=e.charCodeAt(l++))>>4,a=(15&t)<<2|(n=e.charCodeAt(l++))>>6,o=63&n,isNaN(t)?a=o=64:isNaN(n)&&(o=64),s=s+this._keyStr.charAt(i)+this._keyStr.charAt(r)+this._keyStr.charAt(a)+this._keyStr.charAt(o);return s},decode:function(e){var t,n,i,r,a,o="",s=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");s<e.length;)t=this._keyStr.indexOf(e.charAt(s++))<<2|(i=this._keyStr.indexOf(e.charAt(s++)))>>4,n=(15&i)<<4|(r=this._keyStr.indexOf(e.charAt(s++)))>>2,i=(3&r)<<6|(a=this._keyStr.indexOf(e.charAt(s++))),o+=String.fromCharCode(t),64!=r&&(o+=String.fromCharCode(n)),64!=a&&(o+=String.fromCharCode(i));return this._utf8_decode(o)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?t+=String.fromCharCode(i):(127<i&&i<2048?t+=String.fromCharCode(i>>6|192):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128)),t+=String.fromCharCode(63&i|128))}return t},_utf8_decode:function(e){var t,n="",i=0;for(c1=c2=0;i<e.length;)(t=e.charCodeAt(i))<128?(n+=String.fromCharCode(t),i++):191<t&&t<224?(c2=e.charCodeAt(i+1),n+=String.fromCharCode((31&t)<<6|63&c2),i+=2):(c2=e.charCodeAt(i+1),c3=e.charCodeAt(i+2),n+=String.fromCharCode((15&t)<<12|(63&c2)<<6|63&c3),i+=3);return n}},void 0!==window.DOMParser)this.parseXml=function(e){return(new window.DOMParser).parseFromString(e,"text/xml")};else{if(void 0===window.ActiveXObject||!new window.ActiveXObject("Microsoft.XMLDOM"))throw new Error("No XML parser found");this.parseXml=function(e){var t=new window.ActiveXObject("Microsoft.XMLDOM");return t.async="false",t.loadXML(e),t}}}else this._container.innerHTML='<div class="videoErrorMsg"><div>Playback on your browser is not currently supported.</div></div>'}var r,d,h=o(139),p=o(140),a=o(141),_=o(142),f=o(143),g=o(144),m=o(145),y=m.s_gi,S=m.Visitor,E=m.AppMeasurement,b=o(5).bindActionCreators,T=o(147),A=o(9),C=o(148).renderUI,I=o(197),P=o(201).createStore,k=o(13),M=o(202).default,D=o(10);function O(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}n.prototype={log:function(){var e;this._store.getState().enableLogging&&(e=console).log.apply(e,arguments)},init:function(){var i=this;if(this._configLoaded){this._bucket="",console.log("v "+this._version+this._bucket),1==this._settings.clickForSound&&(this._actions.mute(),this._actions.showClickForSound());var e=A.getCookie("djvideobit");""!=e&&(this._selectedBitrate=e),this.setupPlayer();var t=A.getCookie("djadplaynum");""!=t&&(this._adPlayNumber=parseInt(t),isNaN(this._adPlayNumber)&&(this._adPlayNumber=0));t=A.getCookie("djvideovol");""!=t&&this.setVolume(t,!1);t=A.getCookie("djvideolang");""!=t&&(this._langSelected=t),this._iOS&&(this._langSelected="");t=A.getCookie("djvideomute");return""!=t&&1==t&&this._actions.mute(),"function"==typeof this._settings.callback&&this._settings.callback(),this._flashEvents={ready:function(e){i._flash=_("flash"+i._videoId),i._fPlaying=!1,i._flashInit=!0,i.startVideo({fetchAds:!0})},manifest:function(e,t,n){i._flash.playerPlay(-1),i._controls.style.display="block"},complete:function(e,t,n){},state:function(e,t,n){"PAUSED"==e?(i._fPlaying=!1,i.onPaused(e),i._actions.hideLoadingSpinner()):"PLAYING"==e?(i._fPlaying=!0,i.onPlaying(e),i._actions.hideLoadingSpinner()):"PAUSED_BUFFERING"==e?(i._fPlaying=!1,i.onPaused(e),i._actions.showLoadingSpinner()):"PLAYING_BUFFERING"==e&&(i._fPlaying=!0,i.onPlaying(e),i._actions.showLoadingSpinner())},position:function(e,t,n){i.onProgress(e)},error:function(e,t,n){}},this.onHLSMediaAttached=this.onHLSMediaAttached.bind(this),this.onHlsError=this.onHlsError.bind(this),this.onHLSLevelLoaded=this.onHLSLevelLoaded.bind(this),this.onBitrateChange=this.onBitrateChange.bind(this),this.onHLSPlayerBitrateChange=this.onHLSPlayerBitrateChange.bind(this),window.onbeforeunload=this.onPageUnload.bind(this),window["flashlsCallback"+this._videoId]=function(e,t){i._flashEvents[e].apply(null,t)},this}try{var n=this._settings.api+"player/v3/config/"+this._settings.playerid+".json?callback=cbfn";this._ajax.get(n,function(e){i._configLoaded=!0;e=JSON.parse(e);i._externalConfig=e.items[0];try{i._settings=i.extend(i._settings,i._externalConfig)}catch(e){}i.init()},function(e){i._configLoaded=!0,i.init()},null)}catch(e){i._configLoaded=!0}},setupPlayer:function(){var t=this,n=this;this._container.className=this._container.className+" video-player"+(this._isMobile?" mobile-player":"");var e={videoId:this._videoId,videoProps:{},thumbProps:{layout:this._settings.thumbLayout,showFlashLine:this._settings.thumbFlashLine,suppressHeadline:this._settings.suppressHeadline,thumbnailOverride:this._settings.thumb,onClick:function(){n._autoplayed=!1,n.startVideo(),n.muteUnMute(!1,!1,!1),n._isAndroid&&n._settings.startFullScreen&&!n._isFullScreen&&n.toggleFullScreen()},graphics:this._graphics},countdownProps:{videoApiUrl:this._settings.api2,onCountdownComplete:function(){n._videodata.state,n.handleLiveUpdates(),n.startVideo()}},liveButtonEnabled:this._settings.enableLiveButton,saveToQueueEnabled:"string"==typeof this._settings.saveApiPublication&&A.isUserLoggedIn()};this._settings.enableMoreVideosSlide&&(e.moreVideosSlideProps={hasCMPConsent:this._settings.hasCMPConsent,videoApiUrl:this._settings.api,onSlideShowing:this.trackMoreVideosSlide.bind(this),playVideo:function(e){t._formatOverride="user initiated recommendation",t._settings.guid=e,t.loadVideo(!0)}}),this._settings.clickForSound&&(e.clickForSoundProps={onClicked:this.clickForSoundHandler.bind(this),isCountdownVisible:!0,isLiveButtonVisible:this._settings.enableLiveButton}),this._settings.enableEndScreen&&(e.endscreenProps={videoApiUrl:this._settings.api,fields:this._fields,playerSettings:this._settings,playVideo:this.playSuggestion.bind(this),onEndsceenShown:this.trackEndscreenSlide.bind(this)}),(this._settings.disableTitle||this._settings.disableHtmlControls)&&(e.disableTitle=!0),this._settings.disableHtmlControls?e.controlsProps=null:e.controlsProps={enableScrubPreview:this._settings.enableScrubPreview,isMobile:this._isMobile,onPlayPause:this.playPause.bind(this),onMuteUnMute:this.muteUnMute.bind(this,null,!0,!0),onToggleFullScreen:this.toggleFullScreen.bind(this),onSeek:this.onSeek.bind(this),saveApi:this._settings.saveApi,saveApiPublication:this._settings.saveApiPublication,showControls:this.showControls.bind(this,3e3),showShareScreen:this.showHideShareScreen.bind(this),saveToQueueEnabled:"string"==typeof this._settings.saveApiPublication&&A.isUserLoggedIn(),onSaveChange:this.onSaveChange.bind(this)},"muted"!=this._settings.autoplay||!this._isMobile&&1!=this._settings.clickForSound||(e.videoProps.autoplay=!0,e.videoProps.muted=!0),this._settings.playInline&&(e.videoProps.playsinline=!0),this._settings.loop&&(e.videoProps.loop=!0),this._store.getState().isMuted&&(e.videoProps.muted=!0),C(this._container,this._store,e),Object.defineProperties(this,{_video:{get:function(){var e=document.getElementById("videoplayer-"+t._videoId);return e&&!e.scope&&(e.scope=t),e}},_wrapper:{get:function(){var e=document.getElementById("wrapper-"+t._videoId);return e&&!e.scope&&(e.scope=t),e}},_pauseSlate:{get:function(){return document.getElementById("video-pause-slate-"+t._videoId)}},_adContainer:{get:function(){return document.getElementById("adContainer-"+t._videoId)}},_vrWrapper:{get:function(){return document.getElementById("vrWrapper_"+t._videoId)}},_flashContainer:{get:function(){return document.getElementById("flashContainer-"+t._videoId)}},_pauseScreen:{get:function(){return document.getElementById("video-pause-slate-"+t._videoId)}},_adCircleDiv:{get:function(){return document.getElementById("ad-circle-"+t._videoId)}}}),this._countdownTxt,this._adLowerCircleComponent=new I.Circle("#ad-circle-"+this._videoId,{color:"rgba(255, 255, 255, 0.50)",strokeWidth:7}),this._adCircleComponent=new I.Circle("#ad-circle-"+this._videoId,{color:"#ffffff",strokeWidth:7}),this._adContainer.style.display="none",this.setupListeners(!0),this._settings.disableHtmlControls?(document.getElementById("video-controls-container-"+this._videoId).style.display="none",this._settings.fireTv?this._video.controls=!1:this._video.controls=!0):(Object.defineProperties(this,{_adCountdownText:{get:function(){return document.getElementById("video-ad-countdown-"+t._videoId)}},_adMarkerContainer:{get:function(){return document.getElementById("video-ad-marker-container-"+t._videoId)}},_adsSkipButton:{get:function(){return document.getElementById("video-ad-skip-"+t._videoId)}},_bitBtn:{get:function(){return document.getElementById("video-bit-"+t._videoId)}},_bitList:{get:function(){return document.getElementById("bitrate-list-"+t._videoId)}},_ccBtn:{get:function(){return document.getElementById("video-cc-"+t._videoId)}},_ccList:{get:function(){return document.getElementById("captions-list-"+t._videoId)}},_controls:{get:function(){var e=document.getElementById("video-controls-container-"+t._videoId);return e&&!e.hideTime&&(e.hideTime=0),e}},_fullscreenBtn:{get:function(){return document.getElementById("video-fullscreen-"+t._videoId)}},_playOverlay:{get:function(){return document.getElementById("video-play-overlay-"+t._videoId)}},_shareBtn:{get:function(){return document.getElementById("video-share-b-"+t._videoId)}},_shareScreen:{get:function(){return document.getElementById("video-share-"+t._videoId)}},_timeDisplay:{get:function(){return document.getElementById("video-time-"+t._videoId)}},_volumeBG:{get:function(){return document.getElementById("video-volume-b-"+t._videoId)}},_volumeBtn:{get:function(){return document.getElementById("video-volume-"+t._videoId)}},_volumeHandle:{get:function(){return document.getElementById("video-volume-h-"+t._videoId)}},_volumeSetting:{get:function(){return document.getElementById("video-volume-v-"+t._videoId)}},_videoSkipIcon:{get:function(){return document.getElementById("videoSkipIcon-"+t._videoId)}},_volumeSlider:{get:function(){return document.getElementById("video-volume-slider-"+t._videoId)}}}),this._ccBtn.style.display="none",this._settings.shareEnabled||(this._shareBtn.style.display="none"),this._adsSkipButton.style.display="none",this._bitBtn.style.display="none",this.addUserEventListeners(),this._video.controls=!1),this._height=this._wrapper.offsetHeight,this._width=this._wrapper.offsetWidth,(this._container._self=this)._container.tabIndex="-1",this._container.resumeVideo=this.eResumeVideo.bind(this),this._container.pauseVideo=this.ePauseVideo,this._container.playVideo=this.ePlayVideo.bind(this),this._container.playPauseVideo=this.ePlayPauseVideo,this._container.killVideo=this.eKillVideo,this._container.loadVideo=this.eLoadVideo,this._container.setMute=this.eMute,this._container.updatePlaylist=this.eUpdatePlaylist,this._container.isPlaying=this.eIsPlaying,this._container.getStatus=this.eGetStatus,this._container.vidoraShownList=this.eVidoraShownList,this._container.seek=this.eSeek.bind(this),(this._settings.guid||""!==this._settings.type&&""!==this._settings.query)&&this.loadVideo(!1),this._iOS?(this._video.addEventListener("webkitendfullscreen",function(e){n.onScreenChange(e)}),this._video.addEventListener("webkitbeginfullscreen",function(e){n.onScreenChange(e)})):this._wrapper.addEventListener(g.raw.fullscreenchange,function(e){n.onScreenChange(e)}),this._settings.trackInView&&(this._trackInViewListenerReference=this.trackInView.bind(this),window.addEventListener("scroll",this._trackInViewListenerReference)),this._video.style.display="none",this.onResize()},initVideo:function(){var n=this,t=this;this._contentInitialized=!1;var e=this._store.getState().isAdsBlocked;if(this._settings.adsEnabled&&!e){if("undefined"==typeof google)return this._actions.setIMALoadState(D.STARTED),void this.loadScript(this._settings.imaLibrary,function(){t._actions.setIMALoadState(D.FINISHED),t.initVideo()},function(){t._actions.setIMALoadState(D.FAILED),t.initVideo()})}else this._adContainer.style.display="none";if(this._settings.useHLS&&void 0===r)return this._hlsLoadAttempted=!0,this._actions.setHlsJsLoadState(D.STARTED),void o.e(2).then(function(e){t._actions.setHlsJsLoadState(D.FINISHED),r=o(208),t._settings.useHLS=r.isSupported(),t.initVideo()}.bind(null,o)).catch(function(e){console.error(e),t._actions.setHlsJsLoadState(D.FAILED),t._settings.useHLS=!1,t.initVideo()});this._mediaHeartbeat||this.setupTracking(),this._resizeObserver=new ResizeObserver(this.onResize.bind(this)),this._resizeObserver.observe(this._container),"469"==this._videodata.doctypeID&&(this._settings.chainVideos=!1),"future"!==this._videodata.state&&"live"!==this._videodata.state||Promise.all([o.e(3),o.e(0)]).then(function(e){var t=o(209).default;n._liveStateController=new t,"live"!==n._videodata.state||n._store.getState().isCountdownVisible||n.handleLiveUpdates()}.bind(null,o)).catch(function(e){console.error(e)}),this._settings.adsEnabled&&!e&&this.initAds(),this.trigger(this._wrapper,"onInitialize",this._videodata),this.createMark("playerReady"),this._settings.autoplay?this.startVideo():"future"!==this._videodata.state&&this.setupThumbnail()},initAds:function(){var t=this;try{this._adDisplayContainer=new google.ima.AdDisplayContainer(this._adContainer,this._video),this._adsLoader=new google.ima.AdsLoader(this._adDisplayContainer),this._settings.vpaidEnabled?google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED):google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.DISABLED),this._adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(e){t.onAdsManagerLoaded(e)},!1),this._adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,function(e){t.onAdError(e)},!1),this.requestAds(!1)}catch(t){console.error("Failed to init ads",t),this._settings.adsEnabled=!1}},addHLSEventListeners:function(){this._hlsPlayer.off(r.Events.MEDIA_ATTACHED,this.onHLSMediaAttached),this._hlsPlayer.off(r.Events.ERROR,this.onHlsError),this._hlsPlayer.off(r.Events.LEVEL_LOADED,this.onHLSLevelLoaded),this._hlsPlayer.off(r.Events.LEVEL_SWITCHED,this.onBitrateChange),this._hlsPlayer.off(r.Events.LEVEL_SWITCHED,this.onBitrateChange),this._hlsPlayer.on(r.Events.MEDIA_ATTACHED,this.onHLSMediaAttached),this._hlsPlayer.on(r.Events.ERROR,this.onHlsError),this._hlsPlayer.on(r.Events.LEVEL_LOADED,this.onHLSLevelLoaded),this._hlsPlayer.on(r.Events.LEVEL_SWITCHED,this.onHLSPlayerBitrateChange)},onHLSMediaAttached:function(e,t,n,i){this._hlsPlayer.loadSource(this._videodata.hlsNoCaptions)},onHLSLevelLoaded:function(e,t){t=t.details.totalduration;0<t&&t!==this._store.getState().duration&&"live"!==this._store.getState().videoData.state&&this._actions.updateDuration(t)},onHLSPlayerBitrateChange:function(e,t){this.onBitrateChange(e,t)},onHlsError:function(e,t){if(t.fatal||"bufferAppendingError"==t.details)switch(2<this._retryLoadAttempts&&(t.type=r.ErrorTypes.OTHER_ERROR),this._retryLoadAttempts++,t.type){case r.ErrorTypes.MEDIA_ERROR:this._hlsPlayer.recoverMediaError();break;case r.ErrorTypes.NETWORK_ERROR:this._hlsPlayer.loadSource(this._videodata.hlsNoCaptions),this._hlsPlayer.startLoad();break;default:this.onVideoError(this._videodata.guid+" Fatal: "+t.fatal+" - "+t.details),this._hlsPlayer.destroy()}},setupTracking:function(){var t=this;this._account=this.getTrackingAccount();var n=h.va.MediaHeartbeat,e=h.va.MediaHeartbeatConfig,i=h.va.MediaHeartbeatDelegate,r=S.getInstance("CB68E4BA55144CAA0A4C98A5@AdobeOrg",{trackingServer:"om.dowjoneson.com",trackingServerSecure:"oms.dowjoneson.com",marketingCloudServer:"om.dowjoneson.com",marketingCloudServerSecure:"oms.dowjoneson.com"});svid=y(this._account),svid.visitor=r,svid.expectSupplementalData=!1,this._appMeasurement=new E,this._appMeasurement.visitor=r,this._appMeasurement.trackingServer=svid.trackingServer="om.dowjoneson.com",this._appMeasurement.trackingServerSecure=svid.trackingServerSecure="oms.dowjoneson.com",this._appMeasurement.account=this._account,this._appMeasurement.expectSupplementalData=!1,this._mediaHeartbeatConfig=new e,this._mediaHeartbeatConfig.trackingServer="dowjones.hb.omtrdc.net",this._mediaHeartbeatConfig.playerName="Web",this._settings.fireTv&&(this._mediaHeartbeatConfig.playerName="Amazon Fire TV"),this._mediaHeartbeatConfig.channel=this.getChannel(),this._mediaHeartbeatConfig.debugLogging=!1,this._mediaHeartbeatConfig.appVersion="v "+this._version,this._mediaHeartbeatConfig.ssl=!0,this._mediaHeartbeatConfig.ovp="Custom Html Player",this._appMeasurement.pageName=this.getPageName(),this._mediaHeartbeatDelegate=new i,this._mediaHeartbeatDelegate.getCurrentPlaybackTime=function(){return t._currentTime},this._mediaHeartbeatDelegate.getQoSObject=function(){var e=t.getQOSData();return n.createQoSObject(e.bitrate,e.startuptime,e.fps,e.droppedframes)},this._mediaHeartbeat=new n(this._mediaHeartbeatDelegate,this._mediaHeartbeatConfig,this._appMeasurement);var a,e=this._convivaTestMode?this.getTestingSystemSettings():this.getProductionSystemSettings(),i=new Conviva.SystemInterface(new p.Html5Time,new p.Html5Timer,new p.Html5Http,new p.Html5Storage,new p.Html5Metadata,new p.Html5Logging);this._convivaSystemFactory=new Conviva.SystemFactory(i,e),this._convivaTestMode?(a=new Conviva.ClientSettings(this._convivaTestCustomerKey)).gatewayUrl=this._convivaServiceURL:a=new Conviva.ClientSettings(this._convivaProdCustomerKey),this._convivaClient=new Conviva.Client(a,this._convivaSystemFactory),this._settings.trackInView&&this.trackInView()},getTrackingAccount:function(){var e="djglobal";try{-1!==(window.location!=window.parent.location?document.referrer:document.location.href).indexOf("mansionglobal.com")&&(e="djmansionglobal")}catch(e){}return e},onCCSelected:function(e,t,n){var i,r=this;for(n&&(this._langSelected=e,document.cookie="djvideolang="+this._langSelected+"; path=/"),this._videodata&&(i=""===e?"CC OFF":"CC ON "+e,svid.linkTrackVars="contextData.a.media.friendlyName,contextData.a.media.name,contextData.video.closed.captioning,contextData.action,eVar15",svid.contextData["a.media.friendlyName"]=this._videodata.name,svid.contextData["a.media.name"]=this._videodata.guid,svid.contextData["video.closed.captioning"]=i,svid.contextData.action="video.closed.captioned",svid.eVar15=i,svid.tl(!0,"o",""===e?"heartbeat_video closed captioned off":"heartbeat_video closed captioned on"));this._video.firstChild;)this._video.removeChild(this._video.firstChild);(i=document.createElement("track")).kind="subtitles",i.label="English",i.srclang="en",i.mode="showing",this._video.appendChild(i),(this._video.tTrack=i).addEventListener("load",function(){this.mode="showing";try{r._video.textTracks[0].mode="showing"}catch(e){}try{var e=r._video.textTracks[0].cues;for(v in e)"auto"==e[v].line&&(e[v].line=-5)}catch(e){}}),i.addEventListener("error",function(e,t){console.log("Captions failed to load.")});try{this._video.textTracks[0].mode="showing"}catch(e){}i.src=t,this.onCloseCC()},loadCaptions:function(){var n=this;for(this._availableCaptions=[];this._video.firstChild;)this._video.removeChild(this._video.firstChild);this._ccBtn&&(this._ccBtn.style.display="none"),this._videodata.forceClosedCaptions?""==this._langSelected&&(this._langSelected="English"):this._langSelected=A.getCookie("djvideolang");function e(e,t){n._ccBtn&&(n._ccBtn.style.display="block"),t={id:t.url,lang:t.label},n._availableCaptions.push(t),n._availableCaptions.length<2&&""!=n._langSelected&&(n._ccBtn.innerHTML=n._graphics["cc-active"]),t.lang==n._langSelected&&n.onCCSelected(t.lang,t.id,!1)}function t(e,t){console.log("Captions failed to load.")}if(this._videodata.captionsVTT)for(var i=this._videodata.captionsVTT,r=0;r<i.length;r++)this._ajax.get(i[r].url,e,t,i[r])},eVidoraShownList:function(e){for(gid in e)try{this._settings.hasCMPConsent&&window.vidora.push(["send","shown",e[gid]])}catch(e){}},waitForAd:function(){var i=this;return new Promise(function(t,n){var e=i._store.getState().adInitState;e!==D.STARTED||i._adInitUnsubscribe?(e===D.FAILED?n:t)():i._adInitUnsubscribe=i._store.subscribe(function(){var e=i._store.getState().adInitState;e!==D.STARTED&&(i._adInitUnsubscribe(),i._adInitUnsubscribe=null,(e===D.FINISHED?t:n)())})})},startAd:function(){this._actions.startAdMode(),this._adsManager.start()},startVideo:function(){var e,t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).fetchAds,n=void 0!==t&&t;if("future"!=this._videodata.state){var i=this._store.getState(),t=i.adInitState,r=i.isAdsBlocked;this._settings.adsEnabled&&!r&&n&&(t===D.FINISHED?this.requestAds(!1):this.initAds()),this.createNewConvivaSession();var a=this;if(this._playRequested=!0,this._controls&&(this._controls.style.display="block"),this._isIE&&("live"==this._videodata.state||"processing"==this._videodata.state)&&(this._controls.style.display="none",!this._flashInit))return this._actions.hideLoadingSpinner(),this._flashContainer.innerHTML='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="" id="flash'+this._videoId+'" width="100%" height="100%"><param name="movie"  value="'+this._settings.api+'player/v3/flashlsChromeless.swf?inline=1" /><param name="quality" value="autohigh" /><param name="swliveconnect" value="true" /><param name="allowScriptAccess" value="always" /><param name="bgcolor" value="#0" /><param name="allowFullScreen" value="false" /><param name="wmode" value="opaque" /><param name="FlashVars" value="callback=flashlsCallback'+this._videoId+'" /><embed src="'+this._settings.api+'player/v3/flashlsChromeless.swf?inline=1" width="100%" height="100%" style="position:absolute; z-index:1;" name="flash'+this._videoId+'" quality="autohigh" bgcolor="#0" align="middle" allowFullScreen="false" allowScriptAccess="always" type="application/x-shockwave-flash" swliveconnect="true" wmode="opaque" FlashVars="callback=flashlsCallback'+this._videoId+'" pluginspage="https://www.macromedia.com/go/getflashplayer" ></embed></object><div class="getFlash"><strong>Live video is not supported on IE wihtout Flash enabled.</strong><p>Install and enable Flash or use Chrome / Firefox</p><p><a href="https://get.adobe.com/flashplayer/">Get Flash Player</a></p></div>',void(this._flashContainer.style.display="block");if("live"==this._videodata.state&&this._controls&&(this._shareBtn.style.display="none",this._ccBtn.style.display="none"),this.setVideoSource(),this.setupListeners(!0),this._video.load(),"muted"==a._settings.autoplay&&(a._video.volume=0,a._video.muted=!0,a._actions.mute(),a.onMuteUnMute(this)),a._settings.adsEnabled&&!r&&a._adDisplayContainer.initialize(),"vr"==this._videodata.format){if(!(this._isIE||this._isSafariMac&&window==window.top))return this.initVrPlayback(this._vrWrapper),void console.log("Loading VR Libs..");this.displayVrMsg()}else this._vrWrapper.style.display="none";this._sizeTimer||(this._sizeTimer=setInterval(function(){a.checkStatus()},500)),r&&this.onAdError(null),a._actions.hideThumbnail(),a._video.autoplay="autoplay",a._actions.startVideoPlaybackInit(),a._video.style.display="none",(null!==(e=a._video.play())&&void 0!==e?e:Promise.resolve()).then(function(){a._settings.autoplay&&void 0===a._autoplayed&&(a._autoplayed=!0),a.onNewVideo(),!a._settings.adsEnabled||r||a._settings.clickForSound||"1"===a._videodata.catastrophic||"catastrophic"===a._videodata.adCategory||!1===a._videodata.adsAllowed||!1!==a._store.getState().imaAdErrorState?(a._actions.endVideoPlaybackInit(),a._actions.setAdError(!1),a._video.style.display="block"):(a._adDisplayContainer.initialize(),a._video.pause(),a.waitForAd().then(function(){return a.startAd()}).catch(function(){a._actions.endVideoPlaybackInit(),a._actions.setAdError(!1),a._video.style.display="block",a._video.play()}))}).catch(function(e){"AbortError"!=e.name&&(a._actions.endVideoPlaybackInit(),a._autoplayed=!1,"NotSupportedError"==e.name?a.onVideoError():a.setupThumbnail())});try{this._comscoreTag.stop(),this._comscoreTag.playContentPart(this._comscoreMeta)}catch(e){}}},setVideoSource:function(){var e,t=this;if(this._flash)return this._video.setAttribute("src",""),void this._flash.playerLoad(this._videodata.hlsNoCaptions);this._hlsAvailable=!1,this._isSafariMac&&"vr"==this._videodata.format?(e=this._videodata.videoMP4List[3].url.replace(/^https?\:\/\//i,""),this._video.setAttribute("src","//"+window.location.hostname+"/"+e)):this._iOS||this._settings.fireTv||this._isSafariMac?(-1!==this._settings.startPosition?this._video.setAttribute("src",this._videodata.hlsNoCaptions+"#t="+this._settings.startPosition):this._video.setAttribute("src",this._videodata.hlsNoCaptions),this._settings.startPosition=-1):this._settings.useHLS?this._hlsPlayer?(this._hlsPlayer.on(r.Events.MEDIA_DETACHED,function e(){t._hlsPlayer.off(r.Events.MEDIA_DETACHED,e),t._video.src=t._videodata.hlsNoCaptions,t._hlsPlayer=new r(t.hlsConfig),t.addHLSEventListeners(),t._hlsPlayer.attachMedia(t._video)}),this._hlsPlayer.destroy()):(this.hlsConfig.startPosition=this._settings.startPosition,this._hlsPlayer=new r(this.hlsConfig),this._settings.startPosition=-1,this.addHLSEventListeners(),this._hlsPlayer.attachMedia(this._video)):this._videodata.video664kMP4Url?this._video.setAttribute("src",this._videodata.video664kMP4Url):this._videodata.videoMP4List[2]?this._video.setAttribute("src",this._videodata.videoMP4List[2].url):this._video.setAttribute("src",this._videodata.videoMP4List[0].url),this.onResize()},getQOSData:function(){var e={};if(this._hlsPlayer)-1!=this._hlsPlayer.currentLevel&&(e={bitrate:this._hlsPlayer.levelController._levels[this._hlsPlayer.currentLevel].bitrate,startuptime:this._startupTime,fps:30,droppedframes:this._hlsDroppedFrames});else if(this._video.videoWidth){var t,n=[{w:416,b:464},{w:640,b:1264},{w:960,b:1864},{w:1280,b:2564},{w:1920,b:5064}],i=0;for(t in n)n[t].w<=this._video.videoWidth&&(i=n[t].b);e={bitrate:i,startuptime:this._startupTime,fps:30,droppedframes:0}}return e},convivaClientMeasureInterface:function(e){this.getPHT=function(){return parseInt(e._currentTime)},this.getBufferLength=function(){return e._video.buffered.length},this.getSignalStrength=function(){return 1e3},this.getRenderedFrameRate=function(){return 30}},onLiveStateChanged:function(e){this._videodata.state=e,this._actions.updateVideoData(this._videodata),this.initVideo(),this.trigger(this._wrapper,"onLiveStateChanged",this._videodata)},trackAdsDisabled:function(e,t){var n=h.va.MediaHeartbeat,i=n.createAdBreakObject("pre-roll",1,0),r={"ad.blank.start":"false","a.media.ad.podFriendlyName":"pre-roll","ad.catastrophic.blocker":e,"ad.disabled":"true"},a=n.createAdObject("Catastrophic","Catastrophic",1,0),o={};o[n.AdMetadataKeys.ADVERTISER]="",o[n.AdMetadataKeys.CAMPAIGN_ID]="",a.setValue(n.MediaObjectKey.StandardAdMetadata,o),this._mediaHeartbeat.trackError("Ad_catastrophic: "+e),this._mediaHeartbeat.trackEvent(n.Event.AdBreakStart,i),this._mediaHeartbeat.trackEvent(n.Event.AdStart,a,r),this._mediaHeartbeat.trackEvent(n.Event.AdComplete),this._mediaHeartbeat.trackEvent(n.Event.AdBreakComplete)},checkStatus:function(){this._controls&&this._wrapper.parentElement&&this._wrapper.parentElement.querySelector(":hover")!==this._wrapper&&(this.onCloseCC(),this.onCloseBit())},loadVideo:function(o){var s=this;return new Promise(function(t,n){var e=s._settings.useHttps?"&https=1":"";try{var i=s._self;s._video.pause(),s._actions.setVideoApiLoadState(D.STARTED),s._adsManager&&s._adsManager.stop();var r=function(e){e=JSON.parse(e);i._videodata=e.items&&e.items[0]||e[0],i._actions.updateVideoData(i._videodata);try{i._settings.guid=i._videodata.guid}catch(e){}i._settings.msrc&&(i._videodata.msrc=i._settings.msrc),i._videodata.error?(i.showError(i._videodata.error),i.onVideoError(i._videodata.error),i._actions.setVideoApiLoadState(D.FAILED),n(i._videodata.error)):(i._actions.setVideoApiLoadState(D.FINISHED),o?i.startVideo({fetchAds:!0}):i.initVideo(),t())},a=function(e){i.showError(""),i.onVideoError("guid load error"),i._actions.setVideoApiLoadState(D.FAILED),n(new Error("guid load error"))}}catch(e){}s._ajax.get(s._settings.guid?s._settings.useAllesseh?"".concat(s._settings.api2,"media?type=guid&query=").concat(s._settings.guid,"&").concat(s._fields,"&allesseh=1"):"".concat(s._settings.api2,"legacy/find-all-videos?type=guid&count=1&https=1&query=").concat(s._settings.guid,"&").concat(s._fields):""!==s._settings.type&&""!==s._settings.query?""!==s._settings.groupId?s._settings.api+"find_all_videos.asp?type="+s._settings.type+"&count=1"+e+"&query="+s._settings.query+"&"+s._fields:s._settings.api+"find_all_videos.asp?type="+s._settings.type+"&count=1"+e+"&query="+s._settings.query+"&"+s._fields+"&groupid="+s._settings.groupId:void 0,r,a,null)})},getAdTag:function(e){var t=new google.ima.AdsRequest;if(this._settings.adTag)t.adTagUrl=this._settings.adTag;else{var n=[];""!=this._settings.site&&void 0!==this._settings.site?n.site=this._settings.site:n.site="video.wsj.com",this._settings.plid?n.plid=this._settings.plid:this._videodata.plid?n.plid=this._videodata.plid:n.plid="video_articleembed",n.gptParams=this._videodata.gptCustParams,this._settings.lnid&&(n.gptParams=n.gptParams.replace(/lnid.*%26/,"lnid%3D"+this._settings.lnid+"%26")),n.gptParams+="string"==typeof this.getParameterByName("mod")?"%26mod%3D"+this.getParameterByName("mod"):"",n.gptParams+=this.getAdData();var i="%26sub%3Dno";try{A.getCookie("REMOTE_USER")&&(i="%26sub%3Dyes")}catch(e){}var r="";this._settings.msrc&&(r="%26msrc%3D"+this._settings.msrc);var a="Cheddar"==this._videodata.column?"/Cheddar":"",o=((new Date).getTime(),encodeURIComponent(this._videodata.linkURL)),s="&vpos=preroll";e&&(s="&vpos=midroll",n.gptParams+="%26mrtimeindex%3D"+parseInt(this._currentTime)),t.adTagUrl="https://pubads.g.doubleclick.net/gampad/ads?sz=4x4&gdfp_req=1&iu=/2/"+n.site+a+"&ciu_szs=300x50,300x600,300x250&url=[referrer_url]&correlator=[timestamp]&env=vp&unviewed_position_start=1&output=vast&description_url="+o+"&impl=s&hl=en"+s+"&cust_params="+n.gptParams+r+"%26adview%3D"+this._adPlayNumber+i+"%26flash%3Dno%26plid%3D"+n.plid}return"muted"==this._settings.autoplay&&(t.setAdWillAutoPlay(!0),t.setAdWillPlayMuted(!0)),t.adType="video",t},getParameterByName:function(e,t){t=t||window.location.href,e=e.replace(/[\[\]]/g,"\\$&");t=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return t?t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"":null},getThumbnail:function(){return this._settings.thumb||(this._videodata.thumbnailList?A.pickBestThumbnail(this._videodata.thumbnailList,this._width,this._height):this._videodata.thumbnailURL)},setupThumbnail:function(e){this._store.getState().isThumbnailVisible||this._actions.showThumbnail(),this._playOverlay&&(this._playOverlay.style.display="none"),this.onResize()},showError:function(e){this._wrapper.innerHTML='<div class="videoErrorMsg"><div>We are sorry, we are unable to load this video.<br />'+e+"</div></div>"},requestAds:function(e){e=this.getAdTag(e);this._adTagUsed=e.adTagUrl,e.linearAdSlotWidth=this._width,e.linearAdSlotHeight=this._height-40,e.nonLinearAdSlotWidth=this._width,e.nonLinearAdSlotHeight=this._height-40,this._adsLoader.requestAds(e),this.startAdTimeoutTimer(),this.trigger(this._wrapper,"adRequested"),this._actions.setAdInitState(D.STARTED)},onAdsManagerLoaded:function(e){var t,n=this;this._actions.setAdInitState(D.FINISHED),this._adTimeoutTimer&&(clearInterval(this._adTimeoutTimer),1==this._adTimeoutFail)?this._adTimeoutFail=!1:((t=new google.ima.AdsRenderingSettings).enablePreloading=!0,t.loadVideoTimeout=5e3,t.mimeTypes=["video/mp4"],t.restoreCustomPlaybackStateOnAdBreakComplete=!0,t.uiElements=[google.ima.UiElements.AD_ATTRIBUTION],this._adsManager=e.getAdsManager(this._video,t),this._store.getState().isMuted?this._adsManager.setVolume(0):this._adsManager.setVolume(this._volume),this._adsManager.setVolume(0),this.addListeners(),t={adsManager:this._adsManager,reduxStore:this._store,onAdDisconnect:function(){console.warn("Ad disconnect"),n._adsManager.destroy(),n._adsLoader.destroy(),n._adDisplayContainer.destroy(),n.onAdRemoved(),n._video.play(),n.initAds()}},this._adHealthObserver=new M(t),this._adsManager.init(this._width,this._height,google.ima.ViewMode.NORMAL))},onBuffering:function(e){var t=this;(t=!t._mediaHeartbeat?t.scope:t)._store.getState().isBuffering||t._actions.buffering(),"stalled"==e.type&&(t._isStalled=!0,t._mediaHeartbeat.trackEvent(h.va.MediaHeartbeat.Event.BufferStart))},onAdBuffering:function(e){this._actions.adBuffering(),this._convivaAdStateManager&&this._convivaAdStateManager.setPlayerState(Conviva.PlayerStateManager.PlayerState.BUFFERING)},onVideoResize:function(e){var t;!this._convivaPlayerStateManager||(t=this.getQOSData()).bitrate&&this._convivaPlayerStateManager.setBitrateKbps(t.bitrate)},onProgress:function(e){if(this.scope||(this.scope=this),this.scope._isStalled&&this.scope._mediaHeartbeat.trackEvent(h.va.MediaHeartbeat.Event.BufferComplete),this.scope._isStalled=!1,!this.scope._store.getState().isAdMode){this.scope._store.getState().isBuffering&&4===this.readyState&&this.scope._actions.canPlay();var t=this.scope._store.getState().duration,n=this.scope._video.currentTime;this.scope._flash&&(t=e.duration,n=e.position),this.scope._currentTime=n;t=this.scope._currentTime/t*100;if(this.scope.trackProgress(t,this.scope._currentTime),this.scope._actions.updateProgress(this.scope._currentTime),("live"==this.scope._videodata.state||"flive"==this.scope._videodata.state)&&this.scope._controls)return this.scope._shareBtn.style.display="none",void(this.scope._ccBtn.style.display="none");for(i in this.scope._midRolls)if(this.scope._currentTime>=this.scope._midRolls[i]){this.scope._midRolls.splice(i,1),this.scope._midrollRequested||(this.scope._midrollRequested=!0,this.scope.requestAds(!0),this.scope.createAdLoadingScreen());break}}},generateMidrollMarkers:function(){var e=this._store.getState().duration;for(i in this._midRolls){var t=parseInt(this._midRolls[i]/e*this._width);this._adMarkerContainer.insertAdjacentHTML("afterbegin",'<div class="ad-midroll-marker" style="left:'+t+'px;" data-adTime="'+this._midRolls[i]+'"></div>')}},createAdLoadingScreen:function(){this._adContainer.insertAdjacentHTML("beforeBegin",'<div class="ad-loading-screen" id="ad-loading-screen-'+this._videoId+'"><div class="video-loading"><div class="video-loading-inner"></div></div><span>Advertisement loading.  Please Wait.</span></div>'),this._adLoadingScreen=document.getElementById("ad-loading-screen-"+this._videoId)},onLoadedMetadata:function(e){this.onDurationChange(e),-1!==this._settings.startPosition&&(this._video.currentTime=this._settings.startPosition,this._settings.startPosition=-1)},onDurationChange:function(e){0<this._video.duration&&this._video.duration!==this._store.getState().duration&&this._actions.updateDuration(this._video.duration)},createNewConvivaSession:function(){null!==this._convivaContentSessionKey&&(this._convivaClient.cleanupSession(this._convivaContentSessionKey),this._convivaContentSessionKey=null),this._convivaPlayerStateManager?this._convivaPlayerStateManager.reset():this._convivaPlayerStateManager=this._convivaClient.getPlayerStateManager(),this.setConvivaMetaData(),this._convivaContentSessionKey=this._convivaClient.createSession(this._convivaContentMetadata),this._convivaPlayerStateManager&&(this._convivaPlayerStateManager.setPlayerType("Universal Player"),this._convivaPlayerStateManager.setPlayerVersion(this._version),e=this.getQOSData(),this._convivaPlayerStateManager.setBitrateKbps(Math.round(parseInt(e.bitrate)/1e3))),this._convivaHtml5PlayerInterface=new p.Html5PlayerInterface(this._convivaPlayerStateManager,this._video,this._convivaSystemFactory);var e=new this.convivaClientMeasureInterface(this);this._convivaPlayerStateManager.setClientMeasureInterface(e)},onNewVideo:function(){if(this._contentStartTracked&&this._mediaHeartbeat&&this._mediaHeartbeat.trackSessionEnd(),this._completeCalled=!1,this._contentStartTracked=!1,this._sessionStarted=!1,this._contentInitialized=!0,this._adErrorTracked=!1,this._adStarted=!1,this._retryLoadAttempts=0,this.trigger(this._wrapper,"newVideo",this._videodata),this.trigger(this._wrapper,"onNewVideo",this._videodata),this.trackInit(),"1"===this._videodata.catastrophic&&(this._adContainer.style.display="none",this._video.style.display="block"),"string"==typeof this._videodata.chapterTimes&&0<this._videodata.chapterTimes.length&&this._settings.adsEnabled){var e=this._videodata.chapterTimes.split(",");for(i in e)this._midRolls[i]=parseInt(e[i]);this.generateMidrollMarkers()}!1!==this._adErrorEvent&&(this._adErrorEvent=!1,this.onAdError(this._adErrorEvent)),this._trackingMilestones=[!1,!1,!1,!1],this._pingMilestone=-1,this._settings.thumb=!1,this._controls&&(this._controls.hideTime=0,A.emptyElement(this._adMarkerContainer)),this._settings.enableCaptions&&!this._flash?this.loadCaptions():this._ccBtn&&(this._ccBtn.style.display="none")},setupListeners:function(e){this._video.removeEventListener("durationchange",this.onDurationChange.bind(this)),this._video.removeEventListener("loadedmetadata",this.onLoadedMetadata.bind(this)),this._video.removeEventListener("timeupdate",this.onProgress),this._video.removeEventListener("error ",this.onVideoError),this._video.removeEventListener("waiting",this.onBuffering),this._video.removeEventListener("playing",this.onPlaying),this._video.removeEventListener("play",this.onPlay),this._video.removeEventListener("canplay",this.onCanPlay),this._video.removeEventListener("canplaythrough",this.onCanPlay),this._video.removeEventListener("pause",this.onPaused),this._video.removeEventListener("ended",this.onVideoComplete),this._video.removeEventListener("resize",this.onVideoResize),window.document.removeEventListener("visibilitychange",this.onVisibilityChanged.bind(this)),this._isMobile?this._video.addEventListener("resize",this.onVideoResize):(this._wrapper.addEventListener("mouseleave",this.onRollOut),this._wrapper.addEventListener("mousemove",this.onMouseMove)),e&&(this._video.addEventListener("durationchange",this.onDurationChange.bind(this)),this._video.addEventListener("loadedmetadata",this.onLoadedMetadata.bind(this)),this._video.addEventListener("timeupdate",this.onProgress),this._video.addEventListener("error ",this.onVideoError),this._video.addEventListener("waiting",this.onBuffering),this._video.addEventListener("playing",this.onPlaying),this._video.addEventListener("play",this.onPlay),this._video.addEventListener("pause",this.onPaused),this._video.addEventListener("ended",this.onVideoComplete),this._video.addEventListener("canplay",this.onCanPlay),this._video.addEventListener("canplaythrough",this.onCanPlay),window.document.addEventListener("visibilitychange",this.onVisibilityChanged.bind(this)))},videoClickEvent:function(e){this.scope._settings.startFullScreen&&!this.scope._isFullScreen&&this.scope._isAndroid&&this.scope.toggleFullScreen(),this.scope.playPause(e)},addUserEventListeners:function(){var t=this;t._container.onkeyup=function(e){switch((e=e||window.event).keyCode){case 27:this.onEscapeKey();break;case 37:this.onLeftKey();break;case 39:this.onRightKey();break;case 32:this.playPause()}}.bind(this),this._shareBtn.addEventListener("click",function(e){t.showSharing(e)}),this._controls&&(this._isMobile?(this._video.addEventListener("click",this.mobileClick.bind(this),!1),this._adContainer.addEventListener("click touchstart touchmove touchend",this.mobileAdContainerClick.bind(this),!1)):(this._iOS&&this._adContainer.addEventListener("click touchstart touchmove touchend",this.mobileAdContainerClick.bind(this),!1),this._video.addEventListener("click",this.videoClickEvent,!1))),this._volumeSlider._dragging=!1,this._volumeSlider.addEventListener("mousedown",function(e){t.onVolumeInteraction(e,this)}),this._volumeSlider.addEventListener("mouseup",function(e){this._dragging=!1}),this._volumeSlider.addEventListener("mouseleave",function(e){this._dragging=!1}),this._volumeSlider.addEventListener("mousemove",function(e){this._dragging&&t.onVolumeInteraction(e,this)}),this._container.addEventListener("onMuteUnMute",function(e){t.onMuteUnMute(t)}),this._ccBtn.addEventListener("click",function(e){t.onCC(t)}),this._bitBtn.addEventListener("click",function(e){t.onBit(t)}),this._adsSkipButton.addEventListener("click",function(e){t._skipAvailable&&t.skipAd()}),this._adContainer.addEventListener("click",function(e){return t._settings.startFullScreen&&!t._isFullScreen&&t._isAndroid&&t.toggleFullScreen(),!1});try{document.addEventListener(g.raw.fullscreenchange,function(){t.onResize()})}catch(t){}},mobileClick:function(e){this._controls&&(this._store.getState().isControlsVisible?(this.playPause(),this._actions.hideControls()):this.showControls(3e3))},mobileAdContainerClick:function(e){return e.preventDefault(),!1},onVolumeInteraction:function(e,t){var n=t.getBoundingClientRect(),n=(e.pageX-n.left)/t.offsetWidth;this.setVolume(n,!0),t._dragging=!0},onCloseCC:function(){this._ccList.active=!1,this._ccList.style.maxHeight="0",this._ccList.innerHTML=""},onCC:function(e){if(1<this._availableCaptions.length)if(this.onCloseBit(),this._ccList.active)this.onCloseCC();else{this._ccList.active=!0;var t=this,n='<ul class="ccList">',r=this._ccList.innerHTML="";for(n+='<li class="captionBtn '+(r=""==this._langSelected?"selected":r)+'"><a data-lang="" data-id="" class="clink">No Captions</a></li>',i=0;i<this._availableCaptions.length;i++)r="",n+='<li class="captionBtn '+(r=this._langSelected==this._availableCaptions[i].lang?"selected":r)+'"><a data-lang="'+this._availableCaptions[i].lang+'" data-id="'+this._availableCaptions[i].id+'" class="clink">'+this._availableCaptions[i].lang+"</a></li>";this._ccList.innerHTML=n+="</ul>",this._ccList.style.maxHeight=30*this._availableCaptions.length+30+"px",this._ccList.hasListener||(this._ccList.hasListener=!0,this._ccList.addEventListener("click",function(e){e.target.classList.contains("clink")&&t.onCCSelected(e.target.getAttribute("data-lang"),e.target.getAttribute("data-id"),!0)}))}else""!=this._langSelected?(this._ccBtn.style.opacity=.8,this.onCCSelected("","",!0),this._ccBtn.innerHTML=this._graphics.cc):(this._ccBtn.style.opacity=1,this.onCCSelected(this._availableCaptions[0].lang,this._availableCaptions[0].id,!0),this._ccBtn.innerHTML=this._graphics["cc-active"])},onBit:function(e){if(this.onCloseCC(),this._bitList.active)this.onCloseBit();else{this._bitList.active=!0;var t=this,n=this._videodata.videoMP4List,r='<ul class="bitList">',a=this._bitList.innerHTML="";for(""==this._selectedBitrate&&(a="selected"),i=0;i<n.length;i++)a="",r+='<li class="bitrateBtn '+(a=this._selectedBitrate==n[i].bitrate?"selected":a)+'"><a data-bit="'+n[i].bitrate+'" class="clink">'+n[i].bitrate+"kbs</a></li>";this._bitList.innerHTML=r+="</ul>",this._bitList.style.maxHeight=30*n.length+30+"px",this._bitList.addEventListener("click",function(e){e.target.classList.contains("clink")&&t.onBitSelected(e.target.getAttribute("data-bit"))})}},onCloseBit:function(){this._bitList.active=!1,this._bitList.style.maxHeight="0",this._bitList.innerHTML=""},onBitSelected:function(e){if(""!=e){this._selectedBitrate=e,document.cookie="djvideobit="+this._selectedBitrate+"; path=/";for(var t,n,i=this._videodata.videoMP4List,r=0;r<i.length;r++)if(i[r].bitrate==e){t=i[r];break}this._video.getAttribute("src").split("#t=")[0]!=t.url&&(n=this._video.paused,this._video.setAttribute("src",t.url+"#t="+Math.round(this._currentTime)),n||(this._video.play(),this._actions.showLoadingSpinner()))}this.onCloseBit()},onEscapeKey:function(e){this._shareScreen&&this.showHideShareScreen(!1)},onLeftKey:function(e){this.eSeek(this._video.currentTime-10)},onRightKey:function(e){this.eSeek(this._video.currentTime+10)},onSpaceBarKey:function(e){this.playPause()},onPlay:function(){this.scope._actions.playVideo()},onCanPlay:function(){this.scope._store.getState().isBuffering&&this.scope._actions.canPlay()},showControls:function(){var i=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;clearTimeout(this._hideControlsTimer);var t=this._store.getState(),n=t.isControlsVisible,r=t.isCountdownVisible,t=t.isClickForSoundVisible;n||r||t||this._actions.showControls();t=function(){var e=i._store.getState(),t=e.isPlaying,n=e.isAdMode,e=e.isAdPlaying;!t||n&&!e||(i._actions.hideControls(),i._wrapper.classList.add("nocursor"))};0!==e?this._hideControlsTimer=setTimeout(t,e):t()},onMouseMove:function(e){this.scope.showControls(3e3),this.scope._wrapper.classList.remove("nocursor")},onRollOut:function(e){clearTimeout(this.scope._hideControlsTimer);var t=this.scope._store.getState(),n=t.isPlaying,i=t.isAdMode,t=t.isAdPlaying;(n||i&&t)&&this.scope._actions.hideControls()},onVideoComplete:function(e){try{this.scope._comscoreTag.stop()}catch(e){}this.scope._adsLoader&&this.scope._adsLoader.contentComplete(),this.scope._mediaHeartbeat&&this.scope._mediaHeartbeat.trackComplete(),this.scope.sendOptimizelyBeacon("complete"),this.scope._convivaClient&&(this.scope._convivaClient.cleanupSession(this.scope._convivaContentSessionKey),this.scope._convivaContentSessionKey=null,this.scope._convivaPlayerStateManager.reset()),this.scope.sendOptimizelyBeacon("complete");try{this._moatManager.dispatchEvent({type:"AdStopped",adVolume:this._volume})}catch(e){}this.scope._store.getState().isAdMode||(this.scope._settings.chainVideos?(this.scope._video.pause(),this.scope._iOS&&this.scope._video.webkitExitFullScreen(),this.scope.chainVideo()):this.scope._settings.resetOnComplete?(this.scope.setupThumbnail(),this.scope._iOS&&this.scope._video.webkitExitFullScreen(),this.scope._contentInitialized=!1):(this.scope._video.currentTime=0,this.scope._video.pause())),this.scope.trigger(this.scope._wrapper,"videoComplete",{guid:this.scope._videodata.guid}),this.scope.trigger(this.scope._wrapper,"onVideoComplete",{guid:this.scope._videodata.guid})},chainVideo:function(){var t=this;this._isChained=!0;var e=this._store.getState().playlist;0<e.length?(this._videodata=e[0],this._settings.guid=this._videodata.guid,this._settings.disableChainPlay?this.trigger(this._wrapper,"onSuggestionPlay",this._videodata):this.loadVideo(!0).then(this._actions.dequeuePlaylist).catch(console.error)):A.getNewPlaylist(this._settings.api,this._settings,this._store.getState().videoData,this._fields).then(function(e){e&&0<e.length&&(t._actions.replacePlaylist(e),t.chainVideo())}).catch(console.error)},onVisibilityChanged:function(e){this._isMobile&&("hidden"==window.document.visibilityState&&this._convivaContentSessionKey!==Conviva.Client.NO_SESSION_KEY&&null!==this._convivaContentSessionKey?(this._convivaClient.cleanupSession(this._convivaContentSessionKey),this._convivaContentSessionKey=null):"visible"==window.document.visibilityState&&null==this._convivaContentSessionKey&&this._contentInitialized&&this._convivaContentSessionKey&&(this._convivaContentSessionKey=this._convivaClient.createSession(this._convivaContentMetadata),this._convivaPlayerStateManager.reset(),this._convivaClient.isPlayerAttached(this._convivaContentSessionKey)||this._convivaClient.attachPlayer(this._convivaContentSessionKey,this._convivaPlayerStateManager)))},onPlaying:function(e){if("live"!==this.scope._store.getState().videoData.state&&this.scope._actions.updateDuration(this.duration),this.scope._actions.playVideo(),this.scope._isStalled=!1,!this.scope._playRequested)return this.scope._video.pause(),void(this.scope._playRequested=!0);this.scope._controls&&this.scope._isMobile&&this.scope.showControls(3e3),this.scope._playOverlay&&(this.scope._playOverlay.style.display="none"),this.scope._settings.startFullScreen&&!this.scope._isFullScreen&&this.scope.toggleFullScreen(),this.scope._isSeeking&&(this.scope._isSeeking=!1,this.scope._mediaHeartbeat&&this.scope._mediaHeartbeat.trackEvent(h.va.MediaHeartbeat.Event.SeekComplete),this.scope._convivaPlayerStateManager&&this.scope.debounce(this.scope._convivaPlayerStateManager.setPlayerSeekEnd(),100)),this.scope._contentStartTracked&&this.scope._mediaHeartbeat.trackPlay();try{this._comscoreTag.playContentPart(this._comscoreMeta)}catch(e){}try{this.scope.trigger(this.scope._wrapper,"onPlayerStateChange",{isPlaying:this.scope.eIsPlaying(),isFullscreen:this.scope._isFullScreen})}catch(e){}try{var t;PARSELY&&(t=window!=window.top?this.scope._videodata.linkURL:document.location.href,PARSELY.video.trackPlay(this.scope._videodata.guid,{title:this.scope._videodata.name,section:this.scope._tObject.eVar20,pub_date_tmsp:Date.now(),authors:this.scope._videodata.author.toString(),image_url:this.scope._videodata.videoStillURL,tags:[this.scope._tObject.eVar70,this.scope._store.getState().duration]},t))}catch(e){}},onBitrateChange:function(e,t){try{var n,i,r;null!==(n=this._hlsPlayer)&&void 0!==n&&null!==(i=n.levels)&&void 0!==i&&i[t.level]&&(this._mediaHeartbeat&&this._sessionStarted&&(r=this.getQOSData(),this._mediaHeartbeat.trackEvent(h.va.MediaHeartbeat.Event.BitrateChange,r)),this._convivaPlayerStateManager&&this._convivaPlayerStateManager.setBitrateKbps(Math.round(parseInt(r.bitrate)/1e3)))}catch(e){}},onPageUnload:function(e,t){try{this._convivaClient.cleanupSession(this._convivaContentSessionKey),this._convivaClient.releasePlayerStateManager(playerStateManager)}catch(e){}},onPaused:function(e){this.scope||(this.scope=this),this.scope._actions.pauseVideo(),this.scope._controls&&this.scope._isMobile&&this.scope._actions.showControls(),this.scope._timePaused=new Date,this.scope._playOverlay&&(this.scope._playOverlay.style.display="block");try{this._comscoreTag.stop()}catch(e){}try{this.scope.trigger(this.scope._wrapper,"onPlayerStateChange",{isPlaying:this.scope.eIsPlaying(),isFullscreen:this.scope._isFullScreen})}catch(e){}try{var t;PARSELY&&(t=window!=window.top?this.scope._videodata.linkURL:document.location.href,PARSELY.video.trackPause(this.scope._videodata.guid,{title:this.scope._videodata.name,urlOverride:window.location!=window.parent.location?document.referrer:document.location.href,section:this.scope._tObject.eVar20,pub_date_tmsp:Date.now(),authors:this.scope._videodata.author.toString(),image_url:this.scope._videodata.videoStillURL,tags:[this.scope._tObject.eVar70,this.scope._store.getState().duration]},t))}catch(e){}},onSeek:function(e){this._isSeeking=!0;e=Math.round(this._store.getState().duration*e);this._convivaPlayerStateManager&&this.debounce(this._convivaPlayerStateManager.setPlayerSeekStart(e),100),this._actions.updateProgress(e),this._flash?this._flash.playerSeek(e):this._video.currentTime=e},onVideoError:function(e){this.displayErrorScreen("An error occurred.  Please try again later."),this._mediaHeartbeat&&("string"==typeof e?this._mediaHeartbeat.trackError("Content_"+e):this._mediaHeartbeat.trackError("Content_"+this._videodata.guid)),this._convivaClient&&null!==this._convivaContentSessionKey&&("string"!=typeof e&&(e="error: "+this._videodata.guid),this._convivaPlayerStateManager&&this._convivaPlayerStateManager.sendError("Playback Error: "+e,Conviva.Client.ErrorSeverity.FATAL),this._convivaClient.reportError(this._convivaContentSessionKey,e,Conviva.Client.ErrorSeverity.FATAL),this._convivaClient.cleanupSession(this._convivaContentSessionKey),this._convivaContentSessionKey=null)},displayErrorScreen:function(e){this._container.innerHTML='<div class="videoErrorMsg"><div>'.concat(e,"</div></div>")},updateBreakpointClass:function(){var e;this._wrapper&&(e=this._store.getState().currentBreakpoint,this._wrapper.classList.contains("player-".concat(e))||(this._wrapper.classList.remove("player-full"),this._wrapper.classList.remove("player-16U"),this._wrapper.classList.remove("player-12U"),this._wrapper.classList.remove("player-8U"),this._wrapper.classList.remove("player-4U"),this._wrapper.classList.remove("player-tiny"),this._wrapper.classList.add("player-".concat(e))))},onResize:function(){this._height=this._wrapper.offsetHeight,this._width=this._wrapper.offsetWidth;var e=this._store.getState(),t=e.width,n=e.height;if(this._hlsPlayer&&this._hlsPlayer.levels){var i=0,r=this._hlsPlayer.currentLevel;if(this._height>=this._hlsPlayer.levels[this._hlsPlayer.levels.length-1].height&&this._width>=this._hlsPlayer.levels[this._hlsPlayer.levels.length-1].width)this._hlsPlayer.autoLevelCapping=-1;else for(l=0;l<this._hlsPlayer.levels.length;l++){var a=this._hlsPlayer.levels[l];if(this._height<=a.height&&this._width<=a.width){i=l,(i=this._hlsPlayer.levels[l+1]&&this._hlsPlayer.levels[l+1].height==this._hlsPlayer.levels[l].height&&this._hlsPlayer.levels[l+1].width==this._hlsPlayer.levels[l].width?l+1:i)!=r&&(this._hlsPlayer.autoLevelCapping=i);break}}}if(this._adContainer&&this._adsManager&&(e=google.ima.ViewMode.NORMAL,g&&g.isFullscreen&&(e=google.ima.ViewMode.FULLSCREEN),this._adsManager.resize(this._width,this._height,e)),this._adMarkerContainer)for(var o=this._adMarkerContainer.firstChild;null!==o;o=o.nextSibling){var s=parseInt(o.getAttribute("data-adTime")),s=parseInt(s/this._store.getState().duration*this._width);o.style.left=s+"px"}this._width===t&&this._height===n||(this._actions.resize(this._width,this._height),this._controls&&(this._width<220?(this._timeDisplay.style.display="none",this._volumeSlider.style.display="none",this._volumeSlider.style.opacity="0",this._volumeBtn.style.width="auto"):(this._timeDisplay.style.display="inline-block",this._volumeSlider.style.removeProperty("display"),this._volumeSlider.style.removeProperty("opacity"),this._volumeBtn.style.width="120px")))},onScreenChange:function(e){var t;(t=this._iOS?this._video.webkitDisplayingFullscreen:g.isFullscreen)?this._actions.enterFullScreen():(this._actions.exitFullScreen(),this._store.getState().isMuted!==this._video.muted&&(this._video.muted?this._actions.mute():this._actions.unmute())),this._settings.startFullScreen&&(t?this._isAndroid&&(this._controls.style.display="block"):(this._adsManager&&(this._adsManager.pause(),this._adsSkipButton.style.display="none",this._actions.hideLoadingSpinner()),this._video.pause(),this._controls&&(this._controls.style.display="none",this._actions.hideLoadingSpinner(),this._video.controls=!1)));try{this.trigger(this._wrapper,"onPlayerStateChange",{isPlaying:this.eIsPlaying(),isFullscreen:t})}catch(e){}},onSaveChange:function(e){this._appMeasurement&&(svid.contextData["a.media.friendlyName"]=this._videodata.name,svid.contextData["a.media.name"]=this._videodata.guid,svid.contextData.action="video.save",svid.linkTrackVars="contextData.a.media.friendlyName,contextData.a.media.name,contextData.action",svid.tl(!0,"o",e?"video_save_add":"video_save_remove"))},muteUnMute:function(e,t,n){(null==e?!this._store.getState().isMuted:e)?(this._actions.mute(),this._flash&&this._flash.playerVolume(0),this._video.muted=!0,this._adsManager&&this._adsManager.setVolume(0),t&&(document.cookie="djvideomute=1; path=/")):(this._actions.unmute(),this._flash&&this._flash.playerVolume(100*parseFloat(this._volume)),this._video.muted=!1,this._video.volume=this._volume,this._adsManager&&this._adsManager.setVolume(this._volume),t&&(document.cookie="djvideomute=0; path=/"));t=this._store.getState().isMuted;this._videodata&&n&&(svid.contextData["a.media.friendlyName"]=this._videodata.name,svid.contextData["a.media.name"]=this._videodata.guid,svid.contextData["video.mute"]=t?"Mute ON":"Mute OFF",svid.contextData.action="video.muted",svid.linkTrackVars="contextData.a.media.friendlyName,contextData.a.media.name,contextData.video.mute,contextData.action",t=t?"heartbeat_video muted":"heartbeat_video unmuted",this._settings.clickForSound&&(t="heartbeat_tapped unmute"),svid.tl(!0,"o",t)),this.trigger(this._wrapper,"onMuteUnMute",{})},onMuteUnMute:function(e){e.showVolume()},setVolume:function(e,t){e=Math.min(Math.max(parseFloat(e),0),1),this._flash&&this._flash.playerVolume(100*parseFloat(this._volume)),this._adsManager&&this._adsManager.setVolume(e),this._volume=e,this._video.volume=e,this.showVolume(),t&&(this._volume=e,document.cookie="djvideovol="+e+"; path=/",document.cookie="djvideovol="+e+";",this._store.getState().isMuted&&this.muteUnMute(!1,!0,!0))},showPauseScreen:function(){var e=this.getShareLinkUrl(),t="";t+='<div class="video-pause-text"><div class="video-pause-title"  id="video-pause-title-'+this._videoId+'">'+this._videodata.name+'</div><div class="video-pause-description"  id="video-pause-title-'+this._videoId+'">'+this._videodata.description+'</div><div class="video-pause-share-icons"  id="video-share-icons-'+this._videoId+'"><ul class="share-buttons"><li><a href="https://www.facebook.com/sharer/sharer.php?u='+e+"&t="+this._videodata.name+'" title="Share on Facebook" target="_blank" id="sshare-fb-'+this._videoId+'" data-share="Facebook">'+this._graphics["share-fb"]+'</a></li><li><a href="https://twitter.com/intent/tweet?url='+e+"&text="+this._videodata.name+'" target="_blank" title="Tweet" id="sshare-twitter-'+this._videoId+'" data-share="Twitter">'+this._graphics["share-twitter"]+'</a></li><li><a href="mailto:?subject='+this._videodata.name+"&body=Description:"+e+'" target="_blank" title="Email" id="sshare-email-'+this._videoId+'" data-share="Email">'+this._graphics["share-email"]+'</a></li></ul></div></div><div class="video-pause-play-button"  id="video-pause-play-button-'+this._videoId+'"></div>',this._pauseScreen.innerHTML=t,this._pauseScreen.style.display="block"},hidePauseScreen:function(){this._pauseScreen.style.display="none",this._pauseScreen.innerHTML=""},playSuggestion:function(e){this._formatOverride="user initiated next",this._settings.disableChainPlay?this.trigger(this._wrapper,"onSuggestionPlay",e):this.ePlayVideo(e)},clickForSoundHandler:function(e){this.muteUnMute(!1,!0,!0),this.setVolume(this._volume,!1),this._settings.clickForSound=!1,this._controls&&(this._controls.style.display="block"),this._settings.adsEnabled&&this._adDisplayContainer.initialize(),this._actions.unmute(),this._settings.autoplay=!0},showVolume:function(){var e,t;this._controls&&(e=parseFloat(this._volume),0==(t=this._volumeBG.offsetWidth)&&(t=80),this._store.getState().isMuted&&(e=0),this._volumeSetting&&(this._volumeSetting.style.width=Math.round(t*e)+"px"),this._volumeHandle&&(this._volumeHandle.style.left=Math.round(t*e)+"px"))},getShareLinkUrl:function(){var e=window.location!=window.parent.location?document.referrer:document.location.href,t=this._videodata.linkURL;return null!==this._settings.shareDomain?t=this._settings.shareDomain+this._videodata.linkRelativeURL:-1!==e.indexOf("marketwatch.com")?(this._settings.shareDomain="http://www.marketwatch.com",shareSite="&site=video.marketwatch.com",t="http://www.marketwatch.com"+this._videodata.linkRelativeURL):-1!==e.indexOf("barrons.com")&&(this._settings.shareDomain="http://www.barrons.com",shareSite="&site=video.barrons.com",t="http://www.barrons.com"+this._videodata.linkRelativeURL),t},showHideShareScreen:function(e){try{e?(this._shareScreen.classList.add("video-show-share"),document.getElementById("video-share-b-".concat(this._videoId)).style.opacity=1):(this._shareScreen.classList.remove("video-show-share"),document.getElementById("video-share-b-".concat(this._videoId)).style.opacity=.8,this._shareScreen.innerHTML="")}catch(e){}},showSharing:function(){var e,t,n,i;function r(e){var t,n;document&&window&&(n=navigator&&navigator.userAgent.match(/ipad|iphone/i),(t=document.createElement("textarea")).value=e,t.setAttribute("readonly",""),t.style.position="fixed",t.style.left="-9999px",document.body.appendChild(t),n?((e=document.createRange()).selectNodeContents(t),(n=window.getSelection()).removeAllRanges(),n.addRange(e),t.setSelectionRange(0,999999)):t.select(),document.execCommand("copy"))}function a(){document.getElementById("copy-to-clipboard-notification").style.display="block"}this._shareScreen.classList.contains("video-show-share")?this.showHideShareScreen(!1):(e=this.getShareLinkUrl(),t=this._videodata,n=this._settings,i='\n            <div class="closeBtn" id="closeBtn-'.concat(this._videoId,'">\n            <?xml version="1.0" encoding="UTF-8"?><svg width="11px" height="11px" viewBox="0 0 21 21" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" fill-opacity="0.7"><g id="close" fill="#FFFFFF"><polygon id="Path" points="10.5 8.75 19.25 0 21 1.75 12.25 10.5 21 19.25 19.25 21 10.5 12.25 1.75 21 0 19.25 8.75 10.5 0 1.75 1.75 1.51121399e-15"></polygon></g></g></svg>\n            </div>\n            <span id="copy-to-clipboard-notification">\n                <div>\n                    <svg width="18px" height="18px" viewBox="0 0 18 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path d="M11,19.6428571 C6.22668181,19.6428571 2.35714286,15.7733182 2.35714286,11 C2.35714286,6.22668181 6.22668181,2.35714286 11,2.35714286 C15.7733182,2.35714286 19.6428571,6.22668181 19.6428571,11 C19.6428571,15.7733182 15.7733182,19.6428571 11,19.6428571 Z M14.9938835,7.85744843 L9.95229041,12.8990415 L7.79155915,10.7383103 L7.07142857,11.4587804 L9.23215983,13.6191721 L9.95229041,14.3393027 L10.672421,13.6191721 L15.7140141,8.57757901 L14.9938835,7.85744843 Z" id="path-1"></path></defs><g id="Players" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Sharing_8U" transform="translate(-230.000000, -59.000000)"><g id="-icons-/-shapes-/-actions-/-check-active" transform="translate(228.000000, 57.000000)"><mask id="mask-2" fill="white"><use xlink:href="#path-1"></use></mask><use id="Icon_Light_Plus_Active" fill="#000000" fill-rule="evenodd" xlink:href="#path-1"></use><g id="fills-/-white" mask="url(#mask-2)" fill="#FFFFFF" fill-rule="evenodd"><rect id="fill" x="0" y="0" width="22" height="22"></rect></g></g></g></g></svg>\n                    <p id="copied-prompt"></p>\n                </div>\n            </span>\n            <table class="share-wrapper">\n                <tr>\n                    <td valign="middle">\n                        <table class="shareTable">\n                                <tr>\n                                    <td>\n                                        <ul class="share-buttons">\n                                            <li>\n                                                <a title="Copy Link" id="copy-link-url-image">\n                                                    ').concat(o(203),'\n                                                    <input id="copy-link-url" type="hidden" value="').concat(e,'" /></input>\n                                                </a>\n                                                <p class="share-button-text">Copy Link</p>\n                                            </li>\n                                            <li>\n                                                <a id="copy-embed">\n                                                    ').concat(o(204),'\n                                                </a>\n                                                <p>Copy Embed</p>\n                                            </li>\n                                            <li>\n                                                <a href="https://www.facebook.com/sharer/sharer.php?u=').concat(e,"&t=").concat(this._videodata.name,'" title="Share on Facebook" target="_blank" id="sshare-fb-').concat(this._videoId,'" data-share="Facebook">\n                                                    ').concat(o(205),'\n                                                </a>\n                                                <p>Facebook</p>\n                                            </li>\n                                            <li>\n                                                <a href="https://twitter.com/intent/tweet?url=').concat(e,"&text=").concat(this._videodata.name,'" target="_blank" title="Tweet" id="sshare-twitter-').concat(this._videoId,'" data-share="Twitter">\n                                                    ').concat(o(206),"\n                                                </a>\n                                                <p>Twitter</p>\n                                            </li>\n                                        </ul>\n                                    </td>\n                                </tr>\n                        </table>\n                    </td>\n                </tr>\n            </table>"),this._shareScreen.innerHTML=i,this.showHideShareScreen(!0),document.getElementById("closeBtn-"+this._videoId).addEventListener("click",this.showHideShareScreen.bind(this,!1)),document.getElementById("copy-link-url-image").addEventListener("click",function(){document.getElementById("copied-prompt").innerText="Link copied to clipboard",r(e),a()}),document.getElementById("copy-embed").addEventListener("click",function(){var e='<iframe allowfullscreen="true" webkitallowfullscreen="true" mozallowfullscreen="true" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" width="512" height="288" src="https://video-api.wsj.com/api-video/player/v3/iframe.html?guid='.concat(t.guid).concat(n.shareDomain?"&shareDomain=".concat(n.shareDomain):"",'"></iframe>');document.getElementById("copied-prompt").innerText="Embed copied to clipboard",r(e),a()}),document.getElementById("sshare-fb-"+this._videoId).scope=this,document.getElementById("sshare-twitter-"+this._videoId).scope=this,document.getElementById("sshare-fb-"+this._videoId).addEventListener("click",this.trackShare),document.getElementById("sshare-twitter-"+this._videoId).addEventListener("click",this.trackShare))},addListeners:function(){var n=this,t=this;this._adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,function(e){t.onAdError(e,t)}),this._adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(e){t.onContentPauseRequested(e)}),this._adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(e){t.onContentResumeRequested(e)}),this._adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(e){t.onAdRemoved(e)}),this._adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,function(e){t.onAdComplete(e,t)}),this._adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,function(e){t.onAdLoaded(e)}),this._adsManager.addEventListener(google.ima.AdEvent.Type.AD_BUFFERING,function(e){t.onAdBuffering(e)}),this._adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,function(e){t.onAdStarted(e,t)}),this._adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,function(e){t.onAdPaused(e,t)}),this._adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED,function(e){t.onAdResumed(e,t)}),this._adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,function(e){t.onAdSkipped(e,t)}),this._adsManager.addEventListener(google.ima.AdEvent.Type.CLICK,function(e){t.onAdClicked(e,t)}),this._adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(e){t.onSkippableChanged(e)}),this._adsManager.addEventListener(google.ima.AdEvent.Type.AD_PROGRESS,function(e){return n.onAdProgress(e)});for(var e=0,i=Object.keys(google.ima.AdEvent.Type);e<i.length;e++)!function(){var t=i[e];n._adsManager.addEventListener(google.ima.AdEvent.Type[t],function(e){return n.log("IMA AdEvent ".concat(t,": "),e)})}()},onAdClicked:function(e,t){t._adsManager.pause()},onAdStarted:function(e){var t;this._actions.endVideoPlaybackInit(),null===(t=this._adHealthObserver)||void 0===t||t.observe(),this._adLowerCircleComponent.set(1),this._adCircleComponent.set(1),this._adCircleComponent.setText(A.gTimeFormat(this._adsManager.getRemainingTime()).slice(1)),this._adStarted=!0,this._skipAvailable=!1,this._currentAd=e.getAd(),this.onResize(),this.setupListeners(!1),this._vrWrapper.style.display="none",this.trigger(this._wrapper,"adStarted");try{this._video.textTracks[0]&&(this._video.textTracks[0].mode="hidden")}catch(e){}this._actions.playAd(),this._adLoadingScreen&&this._adLoadingScreen.parentNode&&this._adLoadingScreen.parentNode.removeChild(this._adLoadingScreen),this._shareBtn&&(this._shareBtn.style.display="none"),this._midrollRequested=!1;try{var n=[],i=new google.ima.CompanionAdSelectionSettings;i.resourceType=google.ima.CompanionAdSelectionSettings.ResourceType.STATIC,i.sizeCriteria=google.ima.CompanionAdSelectionSettings.SizeCriteria.IGNORE;var r=this._currentAd.getCompanionAds(1600,1600,i);if(r.length)for(var a=0;a<r.length;a++)n[a]={url:r[a].h,clickUrl:"",height:r[a].l.height,width:r[a].l.width,type:"html"};try{this.trigger(this._wrapper,"onCompanions",{availableAds:n})}catch(e){}}catch(e){try{this.trigger(this._wrapper,"onCompanions",{availableAds:[]})}catch(e){}}if(this._currentAd.isLinear()){this._controls&&(this._controls.classList.add("video-advertisment"),this._adContainer.style.display="block",this._adsManager.isCustomPlaybackUsed()&&(this._video.style.display="block"),this._settings.startFullScreen||this._store.getState().isAdPlaying||this._actions.playAd());try{this.trigger(this._wrapper,"onPlayerStateChange",{isPlaying:!1,isFullscreen:this._isFullScreen})}catch(e){}this._store.getState().isAdMode||this._actions.startAdMode(),this._store.getState().isMuted?this._adsManager.setVolume(0):this._adsManager.setVolume(this._volume),this.showVolume(),this._adInfo=this._currentAd.getAdPodInfo(),this._adDuration=this._currentAd.getDuration();i=!0;try{0<=this._currentAd.getUiElements().indexOf("countdown")&&(i=!1)}catch(e){}this._adsSkipButton&&16<this._adDuration&&i&&(this._adsSkipButton.style.display="block"),this.startAdTimer(),this._settings.startFullScreen&&!this._isFullScreen&&this._isMobile&&this._adsManager.pause(),this.trackAdStarted()}else this._video.play()},handleLiveUpdates:function(){var t,i=this;this._liveStateController?(t=this._store.getState().videoData.mediaLiveChannelId)?this._liveStateController.getStatus(t).then(function(e){var n=e.state;"RUNNING"===n&&"future"===i._store.getState().videoData.state&&i.onLiveStateChanged("live"),i._liveStateController.subscribe(t,function(e){var t=e.state,e=i._store.getState().videoData.state;"RUNNING"!==n&&"RUNNING"===t&&"live"!==e?i.onLiveStateChanged("live"):"IDLE"===n||"IDLE"!==t||"processing"===e&&"vod"===e||(i._autoplayed&&(i._settings.autoplay=!1),i.onLiveStateChanged("processing"),i._liveStateController.unsubscribe()),n=t})}):console.error("mediaLiveChannelId was not found"):console.error("liveStateController is not initialized")},trackAdStarted:function(){var e=h.va.MediaHeartbeat,t=e.createAdBreakObject("pre-roll",1,0),n=e.createAdObject(this._currentAd.getTitle(),this._adId,1,this._adDuration),i={};i[e.AdMetadataKeys.ADVERTISER]=this._currentAd.getAdvertiserName(),i[e.AdMetadataKeys.CAMPAIGN_ID]=this._currentAd.getCreativeId(),n.setValue(e.MediaObjectKey.StandardAdMetadata,i),this._mediaHeartbeat.trackEvent(e.Event.AdBreakStart,t),this._mediaHeartbeat.trackEvent(e.Event.AdStart,n,{"ad.blank.start":"false","ad.catastrophic.blocker":"false","ad.disabled":"false"}),this._adPlaybackTime=Date.now()-this._time,this._currentAd&&this.convivaAdStart(this._currentAd),null!==this._convivaAdSessionKey&&this._convivaAdStateManager.setPlayerState(Conviva.PlayerStateManager.PlayerState.PLAYING);try{this._comscoreTag.stop()}catch(e){}try{this._comscoreTag.playAdvertisement()}catch(e){}},convivaAdStart:function(e){this._convivaClient.adStart(this._convivaContentSessionKey,Conviva.Client.AdStream.SEPARATE,Conviva.Client.AdPlayer.SEPARATE,Conviva.Client.AdPosition.PREROLL),this._convivaClient.sendCustomEvent(this._convivaContentSessionKey,"Conviva.PodStart",{podPosition:"Pre-roll",podIndex:"1",absoluteIndex:"1",podDuration:this._adDuration+""});var t=this.getConvivaAdMetadata(e);"object"==u(e)&&(this._convivaAdSessionKey=this._convivaClient.createAdSession(this._convivaContentSessionKey,t),this._convivaAdStateManager=this._convivaClient.getPlayerStateManager(),this._convivaClient.attachPlayer(this._convivaAdSessionKey,this._convivaAdStateManager),this._convivaAdStateManager.setVideoResolutionHeight(e.getVastMediaHeight()),this._convivaAdStateManager.setVideoResolutionWidth(e.getVastMediaWidth()),this._convivaAdStateManager.setBitrateKbps(e.getVastMediaBitrate()))},getConvivaAdMetadata:function(e){var t,n,i,r,a=new Conviva.ContentMetadata;return a.assetName=e.getTitle(),a.streamUrl=e.getMediaUrl(),a.defaultBitrateKbps=0,a.applicationName="WEB V3",a.viewerId=A.getCookie("REMOTE_USER"),a.duration=e.getDuration(),a.isLive=this._isLive,r=0!==e.getWrapperAdIds().length?(r=e.getWrapperAdIds().length,t=e.getWrapperAdSystems()[r-1],n=e.getWrapperAdIds()[r-1],i=e.getWrapperCreativeIds()[r-1],e.getTitle()[r-1]):(t=e.getAdSystem(),n=e.getAdId(),i=e.getCreativeId(),e.getTitle()),a.custom=(c(i={"c3.ad.id":""+e.getAdId(),"c3.ad.creativeId":""+e.getCreativeId(),"c3.ad.technology":"Client Side","c3.ad.system":""+e.getAdSystem(),"c3.ad.sequence":""+e.getAdPodInfo().getAdPosition(),"c3.ad.advertiser":""+e.getAdvertiserName(),"c3.ad.adManagerName":"Google IMA SDK","c3.ad.adManagerVersion":""+google.ima.VERSION,"c3.ad.firstAdSystem":""+t,"c3.ad.firstAdId":""+n,"c3.ad.firstCreativeId":""+i,"c3.ad.position":"Pre-roll","c3.ad.type":"NA","c3.ad.mediaFileApiFramework":e.getApiFramework(),viewerId:A.getCookie("REMOTE_USER")},"c3.ad.advertiser",e.getAdvertiserName()),c(i,"c3.creativeName",r),c(i,"c3.ad.isSlate","NA"),c(i,"c3.ad.adStitcher","NA"),c(i,"c3.ad.unitName","NA"),c(i,"c3.ad.breakId","NA"),c(i,"c3.ad.category","NA"),c(i,"c3.ad.classification","NA"),c(i,"c3.ad.advertiserCategory",this._videodata.gptCustParams),c(i,"c3.ad.advertiserId","NA"),c(i,"c3.ad.campaignName","NA"),c(i,"c3.ad.dayPart","NA"),c(i,"c3.ad.sessionStartEvent","NA"),c(i,"contentAssetName",this._videodata.name+" - "+this._videodata.guid),i),a},trackShare:function(e){this.scope._appMeasurement&&(e="string"==typeof e.share?(this.scope=this,e.share):this.dataset.share,svid.contextData["a.media.friendlyName"]=this.scope._videodata.name,svid.contextData["a.media.name"]=this.scope._videodata.guid,svid.contextData["social.share.type"]=e,svid.contextData.action="social.share",svid.linkTrackVars="contextData.a.media.friendlyName,contextData.a.media.name,contextData.social.share.type,contextData.action",svid.tl(!0,"o","heartbeat_video share"))},trackMoreVideosSlide:function(e){this._appMeasurement&&(svid.contextData["a.media.friendlyName"]=this._videodata.name,svid.contextData["a.media.name"]=this._videodata.guid,svid.contextData.action="video.slide",svid.linkTrackVars="contextData.a.media.friendlyName,contextData.a.media.name,contextData.action",svid.tl(!0,"o","video_upnext"))},trackEndscreenSlide:function(e){this._appMeasurement&&(svid.contextData["a.media.friendlyName"]=this._videodata.name,svid.contextData["a.media.name"]=this._videodata.guid,svid.contextData.action="video.slide",svid.linkTrackVars="contextData.a.media.friendlyName,contextData.a.media.name,contextData.action",svid.tl(!0,"o","video_instreamrec"))},skipAd:function(e){this._adsManager&&(this._adsManager.skip(),this._adsManager.stop())},onAdSkipped:function(e,t){t._mediaHeartbeat.trackEvent(h.va.MediaHeartbeat.Event.AdSkip),this.onAdRemoved()},onSkippableChanged:function(e){},onAdComplete:function(e,t){this.onAdRemoved(),this._adStarted=!1,t.trigger(t._wrapper,"adComplete"),t._mediaHeartbeat.trackEvent(h.va.MediaHeartbeat.Event.AdComplete),t._mediaHeartbeat.trackEvent(h.va.MediaHeartbeat.Event.AdBreakComplete),this.sendCXevent("ad_complete"),this._ajax.get(t._larsUrl+"?source="+t._settings.larsAdId+"&guid={"+t._settings.guid+"}")},onAdResumed:function(e){var t=this._store.getState(),n=t.isAdMode,t=t.isAdPlaying;n&&(t||this._actions.playAd(),this._playOverlay&&(this._playOverlay.style.display="none")),this.showControls(3e3),this._settings.startFullScreen&&!this._isFullScreen&&this.toggleFullScreen();try{this._comscoreTag.playAdvertisement()}catch(e){}this._convivaAdStateManager&&this._convivaClient&&this._convivaAdStateManager.setPlayerState(Conviva.PlayerStateManager.PlayerState.PLAYING);try{this.trigger(this._wrapper,"onPlayerStateChange",{isPlaying:!0,isFullscreen:this._isFullScreen})}catch(e){}},onAdPaused:function(e){var t=this._store.getState(),n=t.isAdMode,t=t.isAdPlaying;if(n){t&&this._actions.pauseAd(),this._playOverlay&&(this._playOverlay.style.display="block");try{this._comscoreTag.stop()}catch(e){}this._convivaAdStateManager&&this._convivaClient&&this._convivaAdStateManager.setPlayerState(Conviva.PlayerStateManager.PlayerState.PAUSED)}this.showControls(3e3);try{this.trigger(this._wrapper,"onPlayerStateChange",{isPlaying:!1,isFullscreen:this._isFullScreen})}catch(e){}},onAdProgress:function(e){e=e.getAdData().currentTime;this._store.getState().currentAdPosition!==e&&this._actions.updateAdProgress(e)},startAdTimer:function(){var e=this;this._adTime=0,this._adTimer&&clearInterval(this._adTimer),this._adTimer=setInterval(function(){e.adTick()},500)},startAdTimeoutTimer:function(){var e=this;this._adTimeoutFail=!1,this._adTimeoutTimer&&clearInterval(this._adTimeoutTimer),this._adTimeoutTimer=setInterval(function(){e._adTimeoutFail=!0,e.adResponseTimeout()},e._adResponseTimeout)},adResponseTimeout:function(e){this.onAdError("timeout"),this._settings.adsEnabled=!1,this._actions.endVideoPlaybackInit()},adTick:function(e){if(this._store.getState().isAdPlaying&&0<this._adsManager.getRemainingTime()){var t=(this._adDuration-this._adsManager.getRemainingTime())/this._adDuration;try{this.trigger(this._wrapper,"onAdTimeUpdate",{percent:t,duration:this._adDuration})}catch(e){}this._adTime++,60<this._adTime&&clearInterval(this._adTimer),15<this._adDuration?30<this._adTime?(this._adCountdownText&&(this._videoSkipIcon.style.display="inline-block",this._adCountdownText.innerHTML=""),this._skipAvailable=!0):this._adCountdownText&&(this._videoSkipIcon.style.display="none",0==Math.round(15-Math.floor(this._adTime/2))?(this._adCountdownText.innerHTML="",this._videoSkipIcon.style.display="inline-block"):this._adCountdownText.innerHTML=" in "+Math.round(15-Math.floor(this._adTime/2))):this._adsSkipButton&&(this._adsSkipButton.style.display="none"),this._adsManager&&this._adsManager.getRemainingTime()<1&&clearInterval(this._adTimer);try{0<t&&this._adCircleComponent.animate(Math.abs(1-t),{duration:700}),this._timeDisplay&&this._adCircleComponent.setText(A.gTimeFormat(this._adsManager.getRemainingTime()).slice(1))}catch(e){}}},onAdRemoved:function(){var e;this._video.style.display="block",this._convivaClient&&this._adStarted&&null!=this._convivaAdSessionKey&&(this._convivaClient.adEnd(this._convivaContentSessionKey),this._adPlaybackTime=Date.now()-this._time-this._adPlaybackTime,this._convivaClient.sendCustomEvent(this._convivaContentSessionKey,"Conviva.PodEnd",{podPosition:"Pre-roll",podIndex:"1",absoluteIndex:"1",podDuration:this._adDuration+""}),this._convivaAdStateManager.setPlayerState(Conviva.PlayerStateManager.PlayerState.STOPPED),this._convivaClient.cleanupSession(this._convivaAdSessionKey),this._convivaAdSessionKey=null),!this._contentStartTracked&&this._sessionStarted&&this.trackContentStarted(),this._store.getState().isAdMode&&this._actions.stopAdMode(),this._adStarted=!1,this._skipAvailable=!1,this._adContainer.style.display="block",this.setupListeners(!0);try{this._video.textTracks[0]&&(this._video.textTracks[0].mode="showing")}catch(e){}this._adsSkipButton&&(this._adsSkipButton.style.display="none"),this._adContainer&&(this._adContainer.style.display="none"),"vr"==this._videodata.format&&(this._vrWrapper.style.display="block"),this._controls&&(this._controls.classList.remove("video-advertisment"),this._playOverlay.style.display="none",this._settings.shareEnabled&&this._shareBtn&&(this._shareBtn.style.display="block")),clearInterval(this._adTimer);try{this._comscoreTag.stop()}catch(e){}null===(e=this._adHealthObserver)||void 0===e||e.disconnect()},onAdLoaded:function(e){try{this._currentAd=e.getAd();var t="",n=this._currentAd.getWrapperAdIds();for(w in n)t+=n[w]+",";this._currentAd.getAdId()?this._adId=t+this._currentAd.getAdId():this._adId="none"}catch(e){this._adId="none"}this._convivaContentMetadata&&(this._convivaContentMetadata.adId=this._adId),this.trigger(this._wrapper,"adLoaded",this._currentAd)},onContentPauseRequested:function(){this._video.pause()},onContentResumeRequested:function(){var t=this;this.onAdRemoved(),this._playOverlay&&(this._playOverlay.style.display="none");var e=this._video.play();void 0!==e&&e.catch(function(e){t._video.play()})},getAdContextData:function(){return{}},onAdError:function(e){var t=this;if(this.log("AdError",e),this._adTimeoutTimer&&clearInterval(this._adTimeoutTimer),"object"===u(e)&&null!=e&&e.getError()&&null!=e&&null!==(n=e.getError())&&void 0!==n&&n.getErrorCode()&&this._actions.setAdError(e.getError().getErrorCode()),this._store.getState().adInitState===D.STARTED&&this._actions.setAdInitState(D.FAILED),this.onAdRemoved(),this.trigger(this._wrapper,"adError",a),this._adErrorTracked)this._adErrorEvent=e;else{this._adErrorTracked=!0;var n=this._adStarted?"Adpost_":"Ad_";try{this._adsLoading=!1;var i,r,a={type:"",code:"",msg:""};!1===e?(a.code="0",a.msg="Ads Blocked"):"timeout"===e?(a.code="1",a.msg="No IMA Loader Response After 5 Seconds"):(i=e.getError(),a.code=i.getErrorCode(),a.msg=i.getMessage(),void 0!==a.msg&&null!==a.msg?null!=(r=i.getInnerError())&&(a.msg=a.msg+" - "+r):a.msg="A null was recieved from ima getMessage")}catch(e){}setTimeout(function(){return t._video.play()},0),this.trackConvivaAdError(a),this._mediaHeartbeat.trackError(n+a.msg)}},trackConvivaAdError:function(e){var t,n;this._convivaClient&&((t=this._currentAd?this.getConvivaAdMetadata(this._currentAd):new Conviva.ContentMetadata).assetName="Ad Error",e&&(t.custom.AdErrorType=(n=e.code,0==(n=parseInt(n))?"Ad Blocker":1021==n||1==n||301==n||402==n?"Ad Timeout":1007==n||1009==n?"Fallback no-ad":"Other Ad Playback Error")),null===this._convivaAdSessionKey&&(this._convivaAdSessionKey=this._convivaClient.createAdSession(this._convivaContentSessionKey,t)),e="Code: "+e.code+", Message: "+e.msg,this._convivaClient.reportError(this._convivaAdSessionKey,e,Conviva.Client.ErrorSeverity.FATAL),this._adStarted&&(this._convivaClient.adEnd(this._convivaContentSessionKey),this._convivaClient.sendCustomEvent(this._convivaContentSessionKey,"Conviva.PodEnd",{podPosition:"Pre-roll",podIndex:"1",absoluteIndex:"1",podDuration:this._adDuration+""}),this._convivaAdStateManager.setPlayerState(Conviva.PlayerStateManager.PlayerState.STOPPED)),this._convivaClient.cleanupSession(this._convivaAdSessionKey),this._convivaAdSessionKey=null)},toggleFullScreen:function(){this._iOS?this._video.webkitEnterFullscreen():g.toggle(this._wrapper)},playPause:function(e){var t,n;this._flash?this._fPlaying?this._flash.playerPause():this._flash.playerResume():(t=(n=this._store.getState()).isAdMode,n=n.isAdPlaying,t?this._adsManager&&(n?(this._playRequested=!1,this._adsManager.pause(),this.onAdPaused(),this._adsManager.isCustomPlaybackUsed()&&this._video.pause()):(this._playRequested=!0,this.onAdResumed(),this._adsManager.resume(),this._adsManager.isCustomPlaybackUsed()&&this._video.play())):this._video.paused?(null===(n=this._video.play())||void 0===n||n.catch(function(){return""}),this._playRequested=!0):(this._video.pause(),this._playRequested=!1),this._playRequested||this._mediaHeartbeat.trackPause())},eResumeVideo:function(e){this._playRequested=!0,this._contentInitialized?this._store.getState().isAdMode?this._adsManager.resume():this._video.paused&&(this._video.play(),this._playRequested=!0):this.startVideo({fetchAds:!0})},eSeek:function(e,t){var n=e;t&&(n=Math.round(this._store.getState().duration*(e/100))),this._video&&!this._store.getState().isAdMode&&this._contentInitialized?n+5<this._video.duration&&(this._video.currentTime=n):(this._settings.startPosition=parseInt(e),this._contentInitialized||this.startVideo({fetchAds:!0}))},ePauseVideo:function(e){this._self._playRequested=!1,this._self._flash?this.self._flash.playerPause():this._self._store.getState().isAdMode?this._self._adsManager.pause():this._self._video.paused||this._self._video.pause()},ePlayPauseVideo:function(e){this._self._contentInitialized||this._self._playRequested?this._self.playPause(e):this._self.startVideo({fetchAds:!0})},eKillVideo:function(e){this._self._adsManager&&this._self._adsManager.stop()},eIsPlaying:function(){var e=this._self._store.getState(),t=e.isAdMode,e=e.isAdPlaying;return!!(!this._self._video.paused||this._self._video.seeking||t&&e)||!(!t||!this._self._playRequested)},ePlayVideo:function(e){if("object"===u(e)){if(this._videodata=e,!this._videodata.hlsNoCaptions)return"string"==typeof this._videodata.startAction&&(this._formatOverride=this._videodata.startAction),this._settings.guid=this._videodata.guid,void this.loadVideo(!0);this._actions.updateVideoData(e),this.startVideo({fetchAds:!0})}else"number"==typeof parseInt(e)&&(this._settings.startPosition=parseInt(e),this.eResumeVideo())},eLoadVideo:function(e){this._self._settings.guid=e.guid,e.vidora&&(this._self._isChained=!1),!this._self._contentInitialized&&this._self._isMobile&&-1!==document.location.href.indexOf("wsj.com/video")?window.location.href=e.linkURL:(this._self.loadVideo(!0),this._self._shareScreen&&this._self.showHideShareScreen(!1))},eUpdatePlaylist:function(t){var n;try{n=t.items&&void 0!==t.items?t.items:t}catch(e){n=t}this._self._actions.replacePlaylist(n)},eMute:function(e){this._self.muteUnMute(e,!1,!0)},eGetStatus:function(){return{isPlaying:this._self.eIsPlaying(),isFullscreen:this._self._isFullScreen}},initVrPlayback:function(){var t=this;if(void 0!==d){this._vrWrapper.style.display="block",this._vrComponents={},this._vrComponents.isUserInteracting=!1,onMouseDownMouseX=0,onMouseDownMouseY=0,lon=180,onMouseDownLon=0,lat=0,onMouseDownLat=0,phi=0,theta=0,this._vrComponents.camera=new d.PerspectiveCamera(75,parseInt(getComputedStyle(this._vrWrapper).width)/parseInt(getComputedStyle(this._vrWrapper).height),1,1100),this._isAndroid&&(this._vrComponents.controls=new d.DeviceOrientationControls(this._vrComponents.camera)),this._vrComponents.camera.target=new d.Vector3(0,0,0),this._vrComponents.scene=new d.Scene;var e=new d.SphereGeometry(500,60,40);e.scale(-1,1,1),this._video.crossOrigin="anonymous";var n=new d.VideoTexture(this._video);n.minFilter=d.LinearFilter,n.generateMipmaps=!1;var n=new d.MeshBasicMaterial({map:n}),n=new d.Mesh(e,n);return this._vrComponents.scene.add(n),this._vrComponents.renderer=new d.WebGLRenderer,this._vrComponents.renderer.getContext().getExtension("OES_texture_half_float_linear"),this._vrComponents.renderer.setPixelRatio(this._vrWrapper.devicePixelRatio),this._vrComponents.renderer.setSize(parseInt(getComputedStyle(this._vrWrapper).width),parseInt(getComputedStyle(this._vrWrapper).height)),this._vrWrapper.appendChild(this._vrComponents.renderer.domElement),this._video.style.display="none",t._vrComponents.camera.aspect=t._vrWrapper.clientWidth/t._vrWrapper.clientHeight,t._vrComponents.camera.updateProjectionMatrix(),t._vrComponents.renderer.setSize(t._vrWrapper.clientWidth,t._vrWrapper.clientHeight),this._video.play(),function e(){requestAnimationFrame(e),lat=Math.max(-85,Math.min(85,lat)),phi=d.Math.degToRad(90-lat),theta=d.Math.degToRad(lon),t._vrComponents.camera.target.x=500*Math.sin(phi)*Math.cos(theta),t._vrComponents.camera.target.y=500*Math.cos(phi),t._vrComponents.camera.target.z=500*Math.sin(phi)*Math.sin(theta),t._vrComponents.camera.lookAt(t._vrComponents.camera.target),t._vrComponents.controls&&t._vrComponents.controls.update(),t._vrComponents.renderer.render(t._vrComponents.scene,t._vrComponents.camera)}(),this._isMobile?(this._vrWrapper.addEventListener("touchstart",i,!1),this._vrWrapper.addEventListener("touchmove",r,!1),this._vrWrapper.addEventListener("touchend",a,!1)):(document.addEventListener("mousedown",i,!1),document.addEventListener("mousemove",r,!1),document.addEventListener("mouseup",a,!1)),!0}function i(e){e.preventDefault(),void 0!==e.touches&&(e.clientX=e.touches[0].clientX,e.clientY=e.touches[0].clientY),t._vrComponents.isUserInteracting=!0,t._vrComponents.controls&&t._vrComponents.controls.disconnect(),onMouseDownMouseX=e.clientX,onMouseDownMouseY=e.clientY,onMouseDownLon=lon,onMouseDownLat=lat,t._isMobile&&("none"!=t._controls.style.display&&t.playPause(e),t._controls.style.display="block",t._controls.style.bottom="0px",t._controls.hideTime=t._video.currentTime)}function r(e){!0===t._vrComponents.isUserInteracting&&(void 0!==e.touches&&(e.clientX=e.touches[0].clientX,e.clientY=e.touches[0].clientY),e.target.width&&(lon=.15*(onMouseDownMouseX-e.clientX)+onMouseDownLon,lat=.15*(e.clientY-onMouseDownMouseY)+onMouseDownLat,t._vrComponents.controls&&t._vrComponents.controls.update()))}function a(e){t._vrComponents.isUserInteracting=!1,t._vrComponents.controls&&t._vrComponents.controls.connect()}o.e(4).then(function(e){d=o(210),t.initVrPlayback()}.bind(null,o)).catch(function(e){console.error(e),t.startVideo({fetchAds:!0})})},displayVrMsg:function(){var e=this;this._vrWrapper.style.display="none",this._controls&&(this._controls.style.display="none"),this._actions.hideLoadingSpinner();var t=document.createElement("div");t.className="vr-alert",t.innerHTML='<span class="closebtn">&times;</span>360 videos are not available in this browser.<br />Please try with the Chrome browser',this._wrapper.appendChild(t),setTimeout(function(){t.classList.add("vr-down")},500),t.onclick=function(){t.style.display="none",e.chainVideo()},document.getElementById("vrLearnMore").onclick=function(){e._video.pause()}},getTestingSystemSettings:function(){var e=new Conviva.SystemSettings;return e.logLevel=Conviva.SystemSettings.LogLevel.DEBUG,e.allowUncaughtExceptions=!0,e},getProductionSystemSettings:function(){var e=new Conviva.SystemSettings;return e.logLevel=Conviva.SystemSettings.LogLevel.ERROR,e},trackInit:function(){try{var e=h.va.MediaHeartbeat,t=this._videodata;this._ajax.get(this._larsUrl+"?source="+this._settings.larsId+"&guid={"+this._settings.guid+"}");var n="vod"===t.state?e.StreamType.VOD:e.StreamType.LIVE;this._mediaObjectHeartbeat=e.createMediaObject(t.name,t.guid,this._store.getState().duration,n),this._mediaObjectHeartbeat.setValue(e.MediaObjectKey.StandardVideoMetadata,this.getStandardMetaData())}catch(e){}this._formatOverride="",this._mediaHeartbeat._config.channel=this.getChannel(),this._mediaHeartbeat.trackSessionStart(this._mediaObjectHeartbeat,this.getContextData()),this._sessionStarted=!0;try{this._comscoreTag.playContentPart(this._comscoreMeta)}catch(e){}try{var i={level1:this._videodata["wsj-section"],level2:this._videodata["wsj-subsection"],level3:this._videodata.guid,slicer1:A.getChannelFromDomain(this._domain)};this._moatManager=a(this._video,i,this._store.getState().duration,"dowjonesjsvideocontent394324437046",this._videodata.hls),this._moatManager.dispatchEvent({type:"AdVideoStart",adVolume:this._volume})}catch(e){}try{this._settings.hasCMPConsent&&window.vidora.push(["send","play",this._videodata.guid])}catch(e){}this.sendOptimizelyBeacon("init"),void 0!==window.cX&&"function"==typeof window.cX.sendPageViewEvent&&window.cX.sendPageViewEvent({location:this._videodata.linkURL})},sendCXevent:function(e){try{if(void 0!==window.cX&&"object"===u(window.cX.callQueue))switch(e){case"play":window.cX.callQueue.push(["sendEvent","videoPlay"]);break;case"ad_complete":window.cX.callQueue.push(["sendEvent","videoAdComplete"])}}catch(e){}},sendOptimizelyBeacon:function(e){try{if("object"!==u(window.optimizely))return;var t="";try{t=window.optimizely.get("visitor").visitorId}catch(e){}var n={account_id:"5090114122",visitors:[{visitor_id:t,session_id:"AUTO",attributes:{},snapshots:this.buildSnapshots({init:["wsj-video_initiates","14369530301"],start:["wsj-video_content-start","14377780073"],complete:["wsj-video_content-completes","14350000105"],percent:["wsj-video_percentage-of-video-watched","14355670366"],percent25:["wsj-video_percentage-25","14819120481"],percent50:["wsj-video_percentage-50","14793070766"],percent75:["wsj-video_percentage-75","14805100688"],percent95:["wsj-video_percentage-95","14799330489"]}[e])}],anonymize_ip:!0,client_name:"wsj-video-api",client_version:"1.0.0",enrich_decisions:!0};fetch("https://logx.optimizely.com/v1/events",{method:"post",body:JSON.stringify(n)})}catch(e){}},buildSnapshots:function(e){try{var t=[];return t.push({decisions:[],events:[{entity_id:e[1],key:e[0],timestamp:Date.now(),uuid:this.createUUIDv4()}]}),t}catch(e){return[]}},createUUIDv4:function(){try{return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}catch(e){return""}},getTrackingDateString:function(e){try{var t=new Date(e.formattedCreationDate),n=e.omniPublishDate.split("video_")[1],i=new Date(n);return"original_"+t.getFullYear()+"-"+(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+(t.getMinutes()<10?"0":"")+t.getMinutes()+"_current_"+i.getFullYear()+"-"+(i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1)+"-"+i.getDate()+" "+i.getHours()+":"+(i.getMinutes()<10?"0":"")+i.getMinutes()}catch(t){return e.formattedCreationDate}return e.formattedCreationDate},getSectionSubsection:function(e){var t=[],n="wsj",i="";try{i=window.s?s.channel:A.getChannelFromDomain(this._domain)}catch(e){i=A.getChannelFromDomain(document.domain)}return"AllThingsD"==i?n="allthingsd":"SmartMoney"==i&&(n="sm"),"string"==typeof e[n+"-section"]&&t.push(e[n+"-section"]),"string"==typeof e[n+"-subsection"]&&t.push(e[n+"-subsection"]),t},getContentTypes:function(){var e,t=["video embedded offsite","video embedded offsite"];return!1!==this.getChannel()&&(e=this.getVideoContent(),t[0]=void 0!==e.prop1?e.prop1:"Embedded Onsite",t[1]=void 0!==e.prop19?e.prop19:void 0!==e.prop1?e.prop1:"Embedded Onsite"),t},getContextData:function(){var e=h.va.MediaHeartbeat,t={};this.getVideoContent(),document.location.href,this._settings.shareDomain&&this._settings.shareDomain,t["a.media.friendlyName"]=this._videodata.name,t["a.media.length"]=this._store.getState().duration,t["a.media.name"]=this._videodata.guid,t["a.contentType"]="vod"===this._videodata.state?e.StreamType.VOD:e.StreamType.LIVE,this._settings.fireTv?t["a.media.playerName"]="Amazon Fire TV":t["a.media.playerName"]="Web";var n,i=this._settings.parentUrl||window.location.href;return t["user.ref"]=A.getCookie("TR"),t["user.type"]=this.getUserTypeVar(),t["page.content.type"]=this.getContentTypes()[0],t["page.content.type.detail"]=this.getContentTypes()[1],t["page.driver"]=this.getParameterByName("mod"),t["video.player.type"]="Web",t["page.full.url"]=i,t["video.keywords"]=this._videodata.keywordsOmni||"",t["page.name"]="",t["page.site"]="",t["a.media.channel"]=this.getChannel(),window.s&&(t["page.section"]=s.prop2||"",t["page.subsection"]=s.prop26||"",t["article.type"]=s.prop3||"",t["article.headline"]=s.prop4||"",t["article.id"]=s.prop20||"",t["article.author"]=s.prop21||"",t["article.publish"]=s.prop23||"",t["page.full.url"]=s.prop6||"",t["page.name"]=s.PageName||"",t["page.site"]=s.eVar11||""),window.utag_data&&(t["page.name"]=window.utag_data.page_name||"",t["page.site"]=window.utag_data.page_site||"",t["user.ref"]=window.utag_data.user_ref||"",t["user.tags"]=window.utag_data.user_tags||"",t["user.type"]=window.utag_data.user_type_post||"",t["page.content.type"]=window.utag_data.page_content_type||"",t["page.content.type.detail"]=window.utag_data.page_content_type_detail_post||"",window.utag_data.qp&&(e=(n=window.utag_data.qp).mod,n=n.reflink,t["page.driver"]=e||"",t["page.driver.internal"]=e||"",t["page.driver.external"]=n||""),t["page.section"]=window.utag_data.page_section_post||"",t["page.subsection"]=window.utag_data.page_subsection_post||"",t["article.type"]=window.utag_data.article_type_post||"",t["article.headline"]=window.utag_data.article_headline_post||"",t["article.headline.orig"]=window.utag_data.article_headline_orig_post||"",t["article.id"]=window.utag_data.article_id||"",t["article.author"]=window.utag_data.article_author||"",t["article.publish"]=window.utag_data.article_publish||"",t["article.publish.post"]=window.utag_data.article_publish_post||"",t["article.publish.orig"]=window.utag_data.article_publish_orig||""),t["video.base.url"]=i.split("?")[0],t["video.player.technology"]="html "+this._version,t["ad.blank.start"]="false",this._settings.adsEnabled?"1"===this._videodata.catastrophic&&(t["ad.catastrophic.blocker"]="true",t["ad.disabled"]="false"):(t["ad.disabled"]="true",t["ad.catastrophic.blocker"]="false"),t},getStandardMetaData:function(){var e={},t=this._videodata,n=h.va.MediaHeartbeat;e[n.VideoMetadataKeys.SHOW]=null==typeof t.column?"":t.column,e[n.VideoMetadataKeys.SEASON]="",e[n.VideoMetadataKeys.EPISODE]=t.episodeNumber,e[n.VideoMetadataKeys.ORIGINATOR]=t.author,e[n.VideoMetadataKeys.GENRE]="WSJ_"+this.getSectionSubsection(t).join("_"),e[n.VideoMetadataKeys.FIRST_DIGITAL_DATE]=this.getTrackingDateString(t),e[n.VideoMetadataKeys.FEED]=this._videodata.type,e[n.VideoMetadataKeys.NETWORK]=t.doctypeID;t=this._store.getState().isMuted;return""!=this._formatOverride?e[n.VideoMetadataKeys.STREAM_FORMAT]=this._formatOverride:this._videodata.startAction?e[n.VideoMetadataKeys.STREAM_FORMAT]=this._video.muted||t?this._videodata.startAction+" muted":this._videodata.startAction:this._isChained?e[n.VideoMetadataKeys.STREAM_FORMAT]=this._video.muted||t?"autochain muted":"autochain":this._autoplayed?e[n.VideoMetadataKeys.STREAM_FORMAT]=this._video.muted||t?"autoplay muted":"autoplay":e[n.VideoMetadataKeys.STREAM_FORMAT]="user initiated",e},trackContentStarted:function(){this._contentStartTracked=!0,this._adPlayNumber=3<this._adPlayNumber?1:this._adPlayNumber+1,document.cookie="djadplaynum="+this._adPlayNumber.toString()+"; path=/",this._convivaContentSessionKey!==Conviva.Client.NO_SESSION_KEY?this._convivaClient.isPlayerAttached(this._convivaContentSessionKey)||this._convivaClient.attachPlayer(this._convivaContentSessionKey,this._convivaPlayerStateManager):console.log("Conviva Failed"),this._mediaHeartbeat&&this._mediaHeartbeat.trackPlay();try{this.sendCXevent("play")}catch(e){}try{this._comscoreTag.playContentPart(this._comscoreMeta)}catch(e){}},trackProgress:function(e,t){if(!this._store.getState().isAdMode&&this._sessionStarted&&(1<t&&!this._contentStartTracked&&(this.trackContentStarted(),this.sendOptimizelyBeacon("start")),25<e&&!this._trackingMilestones[0]&&(this.sendOptimizelyBeacon("percent25"),this._trackingMilestones[0]=!0),50<e&&!this._trackingMilestones[1]&&(this.sendOptimizelyBeacon("percent50"),this._trackingMilestones[1]=!0),75<e&&!this._trackingMilestones[2]&&(this.sendOptimizelyBeacon("percent75"),this._trackingMilestones[2]=!0),95<e&&!this._trackingMilestones[3]&&(this.sendOptimizelyBeacon("percent95"),this._trackingMilestones[3]=!0)),Math.floor(t/15)>this._pingMilestone){this._pingMilestone=Math.floor(t/15);try{this._settings.hasCMPConsent&&window.vidora.push(["send","playhead_update",this._videodata.guid,{params:{playhead_time:t,duration:this._store.getState().duration}}])}catch(e){}}this.trigger(this._wrapper,"onTimeUpdate",{percent:e,time:t,duration:this._store.getState().duration})},getPageName:function(e){var t=this.getVideoContent();if(t.pageName)return t.pageName;t=this._store.getState().duration;return"WSJLive_Video_"+this._videodata.name+"_"+t},setConvivaMetaData:function(){var e=this._videodata;this._convivaContentMetadata=new Conviva.ContentMetadata,this._convivaContentMetadata.streamUrl=e.hlsNoCaptions,this._convivaContentMetadata.assetName=e.name+" - "+e.guid,this._convivaContentMetadata.streamType="vod"===e.state?Conviva.ContentMetadata.StreamType.VOD:Conviva.ContentMetadata.StreamType.LIVE,this._convivaContentMetadata.applicationName="WEB V3",this._convivaContentMetadata.viewerId=A.getCookie("REMOTE_USER"),this._convivaContentMetadata.defaultResource="Akamai",this._convivaContentMetadata.encodedFrameRate=30,this._convivaContentMetadata.duration=this._store.getState().duration,this._convivaContentMetadata.isLive=this._isLive,this._adId&&(this._convivaContentMetadata.adId=this._adId);var t={};t.isLive=e.state,t.section=void 0!==this.getSectionSubsection(e)[0]?this.getSectionSubsection(e)[0]:"",t.subsection=void 0!==this.getSectionSubsection(e)[1]?this.getSectionSubsection(e)[1]:"",t.column=e.column,t.package=e.column,t.doctype=e.doctypeID,t.guid=e.guid,t.episodeNumber=e.episodeNumber,t.seriesName=e.seriesName,t.pubDate=e.publishedDate,t.site=window.location.hostname,t.page=window.location.hostname+window.location.pathname,t.streamProtocol="HLS",t.playerVendor="Internal",t.playerVersion=this._version,t.adLibraryVersion="09099",t.accessType=A.getCookie("REMOTE_USER")?"WSJ_sub_yes":"WSJ_free",t.channel=this.getChannel(),t.genre=this._videodata.showName||this._videodata.name,this._convivaContentMetadata.custom=t,null!==this._convivaContentSessionKey&&this._convivaClient.updateContentMetadata(this._convivaContentSessionKey,this._convivaContentMetadata)},getUserTypeVar:function(){var e,t,n=null;window.utag_data&&window.utag_data.user_type?n=window.utag_data.user_type:null!==(e=document.querySelector('meta[name="user.type"]'))&&(n=e.getAttribute("content")),!n||void 0===(t={nonsubscriber:"free",subscriber:"sub_yes",freeregister:"mem_yes",procbsubscriber:"sub_yes",prosubscriber:"sub_yes",reguser:"mem_yes",member:"mem_yes"}[n.toLowerCase()])?t="free":"free"===t&&A.getCookie("TR")&&(t="reg_yes");n=null!==(n=null===(n=window.utag_data)||void 0===n?void 0:n.page_site_product)&&void 0!==n?n:"WSJ";return"".concat(n,"_").concat(t)},getChannel:function(){var t="";try{t=null!==this._settings.channel?this._settings.channel:window.s?s.channel:A.getChannelFromDomain(document.domain)}catch(e){t=A.getChannelFromDomain(document.domain)}return t},getHostName:function(e){e=e.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i);return null!=e&&2<e.length&&"string"==typeof e[2]&&0<e[2].length?e[2]:null},getVideoContent:function(){try{if(window!=window.top){if(void 0!==window.parent.s)return window.parent.s}else if(void 0!==window.s)return window.s;return!1}catch(e){return!1}},debounce:function(i,r,a){var o;return function(){var e=this,t=arguments,n=a&&!o;clearTimeout(o),o=setTimeout(function(){o=null,a||i.apply(e,t)},r),n&&i.apply(e,t)}},trackInView:function(){if(this._mediaHeartbeat){var e=this._container.getBoundingClientRect(),e=0<=e.top&&0<=e.left&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth);return e&&(window.removeEventListener("scroll",this._trackInViewListenerReference),svid.linkTrackEvents=svid.events="event141",svid.linkTrackVars="pageName,events,eVar4,eVar11,eVar3,eVar32,eVar26,channel,prop1,prop19,prop2,prop26,prop4,prop20,eVar72,eVar73,eVar38,eVar114,list3",window.utag_data&&(svid.pageName=window.utag_data.article_headline_post||"WSJ_Article_"+window.utag_data.article_type+"_"+window.utag_data.article_headline,svid.eVar11=window.utag_data.page_site||"D=ch",svid.eVar3=window.utag_data.user_ref||A.getCookie("TR"),svid.eVar32=window.utag_data.user_tag||"",svid.eVar26=window.utag_data.user_type_post||"",svid.prop1=window.utag_data.page_content_type||"",svid.prop19=window.utag_data.page_content_type_detail_post||"",svid.prop2=window.utag_data.page_section_post||"",svid.prop26=window.utag_data.page_subsection_post||"",svid.prop4=window.utag_data.article_headline_post||"",svid.prop20=window.utag_data.article_id||"",svid.eVar72=window.location!=window.parent.location?document.referrer:document.location.href,svid.eVar73=window.utag_data.article_id||"",svid.eVar38=svid.prop19),svid.eVar114=this._videodata.name,svid.list3="video_"+this._videodata.guid,svid.tl(!0,"o","Video in View")),e}return!1},hasFlashVersionOrBetter:function(e,t){var n;if(t=t||0,navigator.plugins&&0<navigator.plugins.length){var i="application/x-shockwave-flash",r=navigator.mimeTypes;r&&r[i]&&r[i].enabledPlugin&&r[i].enabledPlugin.description&&(n=r[i].enabledPlugin.description.replace(/^.*?([0-9]+)\.([0-9])+.*$/,"$1,$2").split(","))}else{i=null;try{i=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(e){return!1}if(null!=i){try{a=i.GetVariable("$version")}catch(e){return!1}n=a.replace(/^.*?([0-9]+,[0-9]+).*$/,"$1").split(",")}}if(n){var a=parseInt(n[0],10);return a<e||e==a&&t>=parseInt(n[1],10)}return!1},getAdData:function(){var n="",i={};"string"==typeof this.getMeta("user.type")&&""!==this.getMeta("user.type")&&(i.usertype=this.getMeta("user.type")),"string"==typeof this.getMeta("page.id")&&""!==this.getMeta("page.id")&&(i.pageid=this.getMeta("page.id")),"string"==typeof this.getMeta("article.section")&&""!==this.getMeta("article.section")&&(i.articlesection=this.getMeta("article.section")),"string"==typeof this.getMeta("article.type")&&""!==this.getMeta("article.type")&&(i.articletype=this.getMeta("article.type")),"string"==typeof this.getMeta("page.content.type")&&""!==this.getMeta("page.content.type")&&(i.pagecontenttype=this.getMeta("page.content.type")),i.refsec=encodeURIComponent(T.getRefsecKeyValue()),"object"==u(window.utag_data)&&(window.utag_data.user_type&&(i.usertype=window.utag_data.user_type),window.utag_data.article_id&&(i.articleid=window.utag_data.article_id),window.utag_data.article_type&&(i.articletype=window.utag_data.article_type),window.utag_data.page_section&&(i.articlesection=window.utag_data.page_section),window.utag_data.page_subsection&&(i.articlepage=window.utag_data.page_subsection));try{return Object.keys(i).forEach(function(e,t){n+="%26"+e+"%3D"+i[e]}),n}catch(n){return""}return""},getMeta:function(e){try{for(var t=document.getElementsByTagName("meta"),n=0;n<t.length;n++)if(t[n].getAttribute("name")==e)return"_"+t[n].getAttribute("content");return""}catch(e){return""}},extend:function(e,t){var n,i={};for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n]);for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n]);return i},loadScript:function(e,t,n){var i=this,r=document.createElement("script");r.type="text/javascript",r.readyState?r.onreadystatechange=function(){"loaded"!=r.readyState&&"complete"!=r.readyState||(r.onreadystatechange=null,t())}:(r.onload=function(){t(i)},r.onerror=function(){n(i)}),r.src=e,document.getElementsByTagName("head")[0].appendChild(r)},trigger:function(e,t,n){var i,e=e;document.createEvent?((i=new CustomEvent("build",n)).data=n,i.initEvent(t,!0,!0),e.dispatchEvent(i)):document.createEventObject&&((i=document.createEventObject()).data=n,e.fireEvent("on"+t,i))},createMark:function(e){A.createMark(e)}},e.exports=function(e){var t;this.length=1,"string"===u(e).toLowerCase()?0<(t=document.querySelectorAll(e)).length&&(this.element=t[0]):this.element=e,this.WSJVideo=function(e){return new n(this.element,e).init(),this.element.data=function(){return this.element},this.element};try{this.data=this.element.data}catch(t){}return this},O.prototype=window.Event.prototype,window.CustomEvent=O},function(e,t,n){n(89),n(121),n(124),n(129),n(131),void 0===window.fetch&&(window.fetch=n(136).default),void 0===window.ResizeObserver&&(window.ResizeObserver=n(207).ResizeObserver)},function(e,t,n){n(90),n(94),n(105),n(108),n(119),n(120);n=n(42);e.exports=n.Promise},function(e,t,n){var i=n(32),r=n(19),n=n(93);i||r(Object.prototype,"toString",n,{unsafe:!0})},function(e,t,n){n=n(60);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,t,n){var i=n(2),n=n(36),i=i.WeakMap;e.exports="function"==typeof i&&/native code/.test(n(i))},function(e,t,n){"use strict";var i=n(32),r=n(61);e.exports=i?{}.toString:function(){return"[object "+r(this)+"]"}},function(e,t,n){"use strict";var i=n(95).charAt,r=n(26),n=n(62),a=r.set,o=r.getterFor("String Iterator");n(String,"String",function(e){a(this,{type:"String Iterator",string:String(e),index:0})},function(){var e=o(this),t=e.string,n=e.index;return n>=t.length?{value:void 0,done:!0}:(n=i(t,n),e.index+=n.length,{value:n,done:!1})})},function(e,t,n){var o=n(39),s=n(27),n=function(a){return function(e,t){var n,i=String(s(e)),r=o(t),e=i.length;return r<0||e<=r?a?"":void 0:(t=i.charCodeAt(r))<55296||56319<t||r+1===e||(n=i.charCodeAt(r+1))<56320||57343<n?a?i.charAt(r):t:a?i.slice(r,r+2):n-56320+(t-55296<<10)+65536}};e.exports={codeAt:n(!1),charAt:n(!0)}},function(e,t,n){var s=n(8),l=n(97),c=n(40),u=n(18);e.exports=function(e,t){for(var n=l(t),i=u.f,r=c.f,a=0;a<n.length;a++){var o=n[a];s(e,o)||i(e,o,r(t,o))}}},function(e,t,n){var i=n(20),r=n(98),a=n(66),o=n(12);e.exports=i("Reflect","ownKeys")||function(e){var t=r.f(o(e)),n=a.f;return n?t.concat(n(e)):t}},function(e,t,n){var i=n(64),r=n(44).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},function(e,t,n){var i=n(39),r=Math.max,a=Math.min;e.exports=function(e,t){e=i(e);return e<0?r(e+t,0):a(e,t)}},function(e,t,n){"use strict";function i(){return this}var r=n(68).IteratorPrototype,a=n(70),o=n(35),s=n(46),l=n(24);e.exports=function(e,t,n){t+=" Iterator";return e.prototype=a(r,{next:o(1,n)}),s(e,t,!1,!0),l[t]=i,e}},function(e,t,n){n=n(7);e.exports=!n(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})},function(e,t,n){var i=n(14),o=n(18),s=n(12),l=n(71);e.exports=i?Object.defineProperties:function(e,t){s(e);for(var n,i=l(t),r=i.length,a=0;a<r;)o.f(e,n=i[a++],t[n]);return e}},function(e,t,n){var r=n(12),a=n(104);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var n,i=!1,e={};try{(n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(e,[]),i=e instanceof Array}catch(n){}return function(e,t){return r(e),a(t),i?n.call(e,t):e.__proto__=t,e}}():void 0)},function(e,t,n){var i=n(11);e.exports=function(e){if(!i(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},function(e,t,n){var i,r=n(2),a=n(106),o=n(107),s=n(16),n=n(4),l=n("iterator"),c=n("toStringTag"),u=o.values;for(i in a){var d=r[i],h=d&&d.prototype;if(h){if(h[l]!==u)try{s(h,l,u)}catch(e){h[l]=u}if(h[c]||s(h,c,i),a[i])for(var p in o)if(h[p]!==o[p])try{s(h,p,o[p])}catch(e){h[p]=o[p]}}}},function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,t,n){"use strict";var i=n(28),r=n(47),a=n(24),o=n(26),n=n(62),s=o.set,l=o.getterFor("Array Iterator");e.exports=n(Array,"Array",function(e,t){s(this,{type:"Array Iterator",target:i(e),index:0,kind:t})},function(){var e=l(this),t=e.target,n=e.kind,i=e.index++;return!t||i>=t.length?{value:e.target=void 0,done:!0}:"keys"==n?{value:i,done:!1}:"values"==n?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}},"values"),a.Arguments=a.Array,r("keys"),r("values"),r("entries")},function(e,t,n){"use strict";var i,r,a,o,s=n(15),l=n(23),v=n(2),c=n(20),u=n(73),d=n(19),h=n(109),p=n(46),_=n(110),f=n(11),g=n(25),m=n(111),y=n(17),S=n(36),E=n(74),b=n(115),T=n(75),A=n(76).set,w=n(116),C=n(79),I=n(117),P=n(48),k=n(80),M=n(26),D=n(67),O=n(4),R=n(118),N=O("species"),L="Promise",x=M.get,F=M.set,V=M.getterFor(L),B=u,U=v.TypeError,j=v.document,H=v.process,K=c("fetch"),Y=P.f,q=Y,G="process"==y(H),W=!!(j&&j.createEvent&&v.dispatchEvent),D=D(L,function(){if(S(B)===String(B)){if(66===R)return!0;if(!G&&"function"!=typeof PromiseRejectionEvent)return!0}if(l&&!B.prototype.finally)return!0;if(51<=R&&/native code/.test(B))return!1;function e(e){e(function(){},function(){})}var t=B.resolve(1);return(t.constructor={})[N]=e,!(t.then(function(){})instanceof e)}),b=D||!b(function(e){B.all(e).catch(function(){})}),Q=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},z=function(p,_,f){var g;_.notified||(_.notified=!0,g=_.reactions,w(function(){for(var n,i,e=_.value,t=1==_.state,r=0;g.length>r;){var a,o,s,l=g[r++],c=t?l.ok:l.fail,u=l.resolve,d=l.reject,h=l.domain;try{c?(t||(2===_.rejection&&function(e,t){A.call(v,function(){G?H.emit("rejectionHandled",e):X("rejectionhandled",e,t.value)})}(p,_),_.rejection=1),!0===c?a=e:(h&&h.enter(),a=c(e),h&&(h.exit(),s=!0)),a===l.promise?d(U("Promise-chain cycle")):(o=Q(a))?o.call(a,u,d):u(a)):d(e)}catch(e){h&&!s&&h.exit(),d(e)}}_.reactions=[],_.notified=!1,f&&!_.rejection&&(n=p,i=_,A.call(v,function(){var e,t=i.value;if(J(i)&&(e=k(function(){G?H.emit("unhandledRejection",t,n):X("unhandledrejection",n,t)}),i.rejection=G||J(i)?2:1,e.error))throw e.value}))}))},X=function(e,t,n){var i;W?((i=j.createEvent("Event")).promise=t,i.reason=n,i.initEvent(e,!1,!0),v.dispatchEvent(i)):i={promise:t,reason:n},(t=v["on"+e])?t(i):"unhandledrejection"===e&&I("Unhandled promise rejection",n)},J=function(e){return 1!==e.rejection&&!e.parent},Z=function(t,n,i,r){return function(e){t(n,i,e,r)}},$=function(e,t,n,i){t.done||(t.done=!0,(t=i?i:t).value=n,t.state=2,z(e,t,!0))},ee=function(n,i,e,t){if(!i.done){i.done=!0,t&&(i=t);try{if(n===e)throw U("Promise can't be resolved itself");var r=Q(e);r?w(function(){var t={done:!1};try{r.call(e,Z(ee,n,t,i),Z($,n,t,i))}catch(e){$(n,t,e,i)}}):(i.value=e,i.state=1,z(n,i,!1))}catch(e){$(n,{done:!1},e,i)}}};D&&(B=function(e){m(this,B,L),g(e),i.call(this);var t=x(this);try{e(Z(ee,this,t),Z($,this,t))}catch(e){$(this,t,e)}},(i=function(e){F(this,{type:L,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=h(B.prototype,{then:function(e,t){var n=V(this),i=Y(T(this,B));return i.ok="function"!=typeof e||e,i.fail="function"==typeof t&&t,i.domain=G?H.domain:void 0,n.parent=!0,n.reactions.push(i),0!=n.state&&z(this,n,!1),i.promise},catch:function(e){return this.then(void 0,e)}}),r=function(){var e=new i,t=x(e);this.promise=e,this.resolve=Z(ee,e,t),this.reject=Z($,e,t)},P.f=Y=function(e){return e===B||e===a?new r:q(e)},l||"function"!=typeof u||(o=u.prototype.then,d(u.prototype,"then",function(e,t){var n=this;return new B(function(e,t){o.call(n,e,t)}).then(e,t)},{unsafe:!0}),"function"==typeof K&&s({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return C(B,K.apply(v,arguments))}}))),s({global:!0,wrap:!0,forced:D},{Promise:B}),p(B,L,!1,!0),_(L),a=c(L),s({target:L,stat:!0,forced:D},{reject:function(e){var t=Y(this);return t.reject.call(void 0,e),t.promise}}),s({target:L,stat:!0,forced:l||D},{resolve:function(e){return C(l&&this===a?B:this,e)}}),s({target:L,stat:!0,forced:b},{all:function(e){var s=this,t=Y(s),l=t.resolve,c=t.reject,n=k(function(){var i=g(s.resolve),r=[],a=0,o=1;E(e,function(e){var t=a++,n=!1;r.push(void 0),o++,i.call(s,e).then(function(e){n||(n=!0,r[t]=e,--o||l(r))},c)}),--o||l(r)});return n.error&&c(n.value),t.promise},race:function(e){var n=this,i=Y(n),r=i.reject,t=k(function(){var t=g(n.resolve);E(e,function(e){t.call(n,e).then(i.resolve,r)})});return t.error&&r(t.value),i.promise}})},function(e,t,n){var r=n(19);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},function(e,t,n){"use strict";var i=n(20),r=n(18),a=n(4),o=n(14),s=a("species");e.exports=function(e){var t=i(e),e=r.f;o&&t&&!t[s]&&e(t,s,{configurable:!0,get:function(){return this}})}},function(e,t){e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},function(e,t,n){var i=n(4),r=n(24),a=i("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[a]===e)}},function(e,t,n){var i=n(61),r=n(24),a=n(4)("iterator");e.exports=function(e){if(null!=e)return e[a]||e["@@iterator"]||r[i(e)]}},function(e,t,n){var r=n(12);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){n=e.return;throw void 0!==n&&r(n.call(e)),t}}},function(e,t,n){var r=n(4)("iterator"),a=!1;try{var i=0,o={next:function(){return{done:!!i++}},return:function(){a=!0}};o[r]=function(){return this},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!a)return!1;var n=!1;try{var i={};i[r]=function(){return{next:function(){return{done:n=!0}}}},e(i)}catch(e){}return n}},function(e,t,n){var i,r,a,o,s,l,c,u,d=n(2),h=n(40).f,p=n(17),_=n(76).set,f=n(77),g=d.MutationObserver||d.WebKitMutationObserver,v=d.process,n=d.Promise,m="process"==p(v),h=h(d,"queueMicrotask"),h=h&&h.value;h||(i=function(){var e,t;for(m&&(e=v.domain)&&e.exit();r;){t=r.fn,r=r.next;try{t()}catch(e){throw r?o():a=void 0,e}}a=void 0,e&&e.enter()},o=m?function(){v.nextTick(i)}:g&&!f?(s=!0,l=document.createTextNode(""),new g(i).observe(l,{characterData:!0}),function(){l.data=s=!s}):n&&n.resolve?(c=n.resolve(void 0),u=c.then,function(){u.call(c,i)}):function(){_.call(d,i)}),e.exports=h||function(e){e={fn:e,next:void 0};a&&(a.next=e),r||(r=e,o()),a=e}},function(e,t,n){var i=n(2);e.exports=function(e,t){var n=i.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},function(e,t,n){var i,r,a=n(2),n=n(78),a=a.process,a=a&&a.versions,a=a&&a.v8;a?r=(i=a.split("."))[0]+i[1]:n&&(!(i=n.match(/Edge\/(\d+)/))||74<=i[1])&&(i=n.match(/Chrome\/(\d+)/))&&(r=i[1]),e.exports=r&&+r},function(e,t,n){"use strict";var i=n(15),c=n(25),r=n(48),a=n(80),u=n(74);i({target:"Promise",stat:!0},{allSettled:function(e){var s=this,t=r.f(s),l=t.resolve,n=t.reject,i=a(function(){var i=c(s.resolve),r=[],a=0,o=1;u(e,function(e){var t=a++,n=!1;r.push(void 0),o++,i.call(s,e).then(function(e){n||(n=!0,r[t]={status:"fulfilled",value:e},--o||l(r))},function(e){n||(n=!0,r[t]={status:"rejected",reason:e},--o||l(r))})}),--o||l(r)});return i.error&&n(i.value),t.promise}})},function(e,t,n){"use strict";var i=n(15),r=n(23),a=n(73),o=n(7),s=n(20),l=n(75),c=n(79),n=n(19);i({target:"Promise",proto:!0,real:!0,forced:!!a&&o(function(){a.prototype.finally.call({then:function(){}},function(){})})},{finally:function(t){var n=l(this,s("Promise")),e="function"==typeof t;return this.then(e?function(e){return c(n,t()).then(function(){return e})}:t,e?function(e){return c(n,t()).then(function(){throw e})}:t)}}),r||"function"!=typeof a||a.prototype.finally||n(a.prototype,"finally",s("Promise").prototype.finally)},function(e,t,n){n(122);n=n(42);e.exports=n.Object.assign},function(e,t,n){var i=n(15),n=n(123);i({target:"Object",stat:!0,forced:Object.assign!==n},{assign:n})},function(e,t,n){"use strict";var h=n(14),i=n(7),p=n(71),_=n(66),f=n(63),g=n(45),v=n(41),r=Object.assign,a=Object.defineProperty;e.exports=!r||i(function(){if(h&&1!==r({b:1},r(a({},"a",{enumerable:!0,get:function(){a(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol();return e[n]=7,"abcdefghijklmnopqrst".split("").forEach(function(e){t[e]=e}),7!=r({},e)[n]||"abcdefghijklmnopqrst"!=p(r({},t)).join("")})?function(e,t){for(var n=g(e),i=arguments.length,r=1,a=_.f,o=f.f;r<i;)for(var s,l=v(arguments[r++]),c=a?p(l).concat(a(l)):p(l),u=c.length,d=0;d<u;)s=c[d++],h&&!o.call(l,s)||(n[s]=l[s]);return n}:r},function(e,t,n){n(125);n=n(49);e.exports=n("Array","findIndex")},function(e,t,n){"use strict";var i=n(15),r=n(126).findIndex,a=n(47),n=n(81),o=!0,n=n("findIndex");"findIndex"in[]&&Array(1).findIndex(function(){o=!1}),i({target:"Array",proto:!0,forced:o||!n},{findIndex:function(e){return r(this,e,1<arguments.length?arguments[1]:void 0)}}),a("findIndex")},function(e,t,n){var y=n(29),S=n(41),E=n(45),b=n(43),T=n(127),A=[].push,n=function(h){var p=1==h,_=2==h,f=3==h,g=4==h,v=6==h,m=5==h||v;return function(e,t,n,i){for(var r,a,o=E(e),s=S(o),l=y(t,n,3),c=b(s.length),u=0,i=i||T,d=p?i(e,c):_?i(e,0):void 0;u<c;u++)if((m||u in s)&&(a=l(r=s[u],u,o),h))if(p)d[u]=a;else if(a)switch(h){case 3:return!0;case 5:return r;case 6:return u;case 2:A.call(d,r)}else if(g)return!1;return v?-1:f||g?g:d}};e.exports={forEach:n(0),map:n(1),filter:n(2),some:n(3),every:n(4),find:n(5),findIndex:n(6)}},function(e,t,n){var i=n(11),r=n(128),a=n(4)("species");e.exports=function(e,t){var n;return new(void 0===(n=r(e)&&("function"==typeof(n=e.constructor)&&(n===Array||r(n.prototype))||i(n)&&null===(n=n[a]))?void 0:n)?Array:n)(0===t?0:t)}},function(e,t,n){var i=n(17);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,t,n){n(130);n=n(49);e.exports=n("Array","includes")},function(e,t,n){"use strict";var i=n(15),r=n(65).includes,a=n(47);i({target:"Array",proto:!0,forced:!n(81)("indexOf",{ACCESSORS:!0,1:0})},{includes:function(e){return r(this,e,1<arguments.length?arguments[1]:void 0)}}),a("includes")},function(e,t,n){n(132);n=n(49);e.exports=n("String","includes")},function(e,t,n){"use strict";var i=n(15),r=n(133),a=n(27);i({target:"String",proto:!0,forced:!n(135)("includes")},{includes:function(e){return!!~String(a(this)).indexOf(r(e),1<arguments.length?arguments[1]:void 0)}})},function(e,t,n){var i=n(134);e.exports=function(e){if(i(e))throw TypeError("The method doesn't accept regular expressions");return e}},function(e,t,n){var i=n(11),r=n(17),a=n(4)("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==r(e))}},function(e,t,n){var i=n(4)("match");e.exports=function(t){var n=/./;try{"/./"[t](n)}catch(e){try{return n[i]=!1,"/./"[t](n)}catch(t){}}return!1}},function(e,t,n){"use strict";n.r(t),t.default=function(l,c){return c=c||{},new Promise(function(e,t){function n(){return{ok:2==(r.status/100|0),statusText:r.statusText,status:r.status,url:r.responseURL,text:function(){return Promise.resolve(r.responseText)},json:function(){return Promise.resolve(JSON.parse(r.responseText))},blob:function(){return Promise.resolve(new Blob([r.response]))},clone:n,headers:{keys:function(){return a},entries:function(){return o},get:function(e){return s[e.toLowerCase()]},has:function(e){return e.toLowerCase()in s}}}}var i,r=new XMLHttpRequest,a=[],o=[],s={};for(i in r.open(c.method||"get",l,!0),r.onload=function(){r.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(e,t,n){a.push(t=t.toLowerCase()),o.push([t,n]),s[t]=s[t]?s[t]+","+n:n}),e(n())},r.onerror=t,r.withCredentials="include"==c.credentials,c.headers)r.setRequestHeader(i,c.headers[i]);r.send(c.body||null)})}},function(e,t,n){},function(e,t){try{!function(e,t){function i(e){te.console&&console.log&&console.log(e)}function r(e){te.console&&console.error&&console.error(e)}function d(e){throw new Error(e)}function c(e,t){return e.forEach(t)}function o(e,t){return e.map(t)}function h(e){return String(e)}function a(e){return void 0===e}function n(e){return null===e}function p(e){return a(e)||n(e)}function s(e){return!n(e)&&"object"==typeof e}function _(e){return!p(e)&&e.constructor===Array}function l(e,t){return p(e)?t:e}function f(e,t){var n,i=l(e,{}),r=l(t,{});for(n in r)i[n]=r[n];return i}function g(e){e=l(e,{});return s(e)||d("Options should be an object."),e}function u(e){return JSON.parse(e)}function v(e){return JSON.stringify(e)}function m(e){return encodeURIComponent(e).replace(/!/g,"%21").replace(/\*/g,"%2A").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29")}function y(e){var t,n=[];for(t in e){var i=e[t],i=a(i)?[t]:[t,i];n.push(i)}return n.sort(function(e,t){return e<t?-1:t<e?1:0}),o(n,function(e){return o(e,m).join("=")}).join("&")}function S(){return(new Date).getTime()}function E(e,t){return 0<=e.indexOf(t)}function b(){return Math.random()}function T(){return Math.floor(65536*b())}function A(){return o(re(10),function(e){e=(e>>1).toString(32);return"000".slice(e.length)+e}).join("")}function w(e,t){return function(e,t,n){try{return e.setItem(t,v(n)),1}catch(e){return r(e),0}}(ae,e,t)}function C(e){return p(e=ae.getItem(e))?null:u(e)}function I(e){ae.removeItem(e)}function P(e){!function(e,t){for(var n=0;n<e.length;n++)t(e.key(n))}(ae,e)}function k(){return S()+":"+b()}function M(e){return C(e)}function D(e){I(e),setTimeout(function(){I(e)},100)}function O(e){return C(e)}function R(e){var t=e+ce;I(e),D(t)}function N(e,t,n){var i,r,a=le+k(),o=(i=a+ce,r=0,setInterval(function(){w(i,r+=1)},oe));return w(a,{data:e,guid:n,retry:0}),{key:a,guid:n,clock:o}}function L(){var n={};return P(function(e){var t;0===(t=e).indexOf(le)&&-1!==t.indexOf(ce)&&(n[e]=M(e))}),n}function x(){var n=[];return P(function(e){var t;0===(t=e).indexOf(le)&&-1===t.indexOf(ce)&&n.push(e)}),n}function F(e,t,n){i("XHR Request Succeded: "+n.url)}function V(e,t,n){r("XHR Request Failed: "+n.url+" "+e)}function B(e,t,n){r("XHR Timeout: "+n.url)}function U(e){return e}function j(e){return e}function H(e,t){var n=function(e,t){var n=new XMLHttpRequest;n.open(e,t.url,!0);var i="onSuccess"in t?t.onSuccess:F,r="onError"in t?t.onError:V,a="onTimeout"in t?t.onTimeout:B,o="unmarshall"in t?t.unmarshall:U;return"crossDomainCredentials"in t&&(n.withCredentials=!0===t.crossDomainCredentials),"timeoutMs"in t&&(n.timeout=t.timeoutMs,n.ontimeout=function(){a.call({},t)}),n.onload=function(){n.readyState===de&&200===n.status?i.call({},o(n.responseText),n.status,t):r.call({},n.statusText,n.status,n.readyState,t)},n.onerror=function(){var e="Unknown Error.";p(n.status)&&p(n.statusText)?e="Unknown Error.":"statusText"in n&&(e=n.statusText),r.call({},e,n.status,n.readyState,t)},n}(e,t);return"data"in t?(e="marshall"in t?t.marshall:j,"dataType"in t&&n.setRequestHeader("Content-type",t.dataType),n.send(e(t.data))):n.send(),n}function K(e,t){delete te[pe][t],fe.removeChild(e)}function Y(){}function q(e,t){var n,i,r;f(t,ye),t.data.guid=e.guid,!p(ie[me])&&p(t.onSuccess)?(i=t.url,r=t.marshall(t.data),ie[me](i,r)&&be(e)):(n=t.onSuccess||Y,t.onSuccess=function(){be(e),n()},H("POST",t))}function G(e,t,n){var i,r,a=g(n),t={url:(i=e,r=t,e=p((n=a)._baseURI)?i._apiHost:n._baseURI,t=f(f({api_key:i.token},n.query),n._params),n=m(i.getUserId()),n=r.replace("%user_id%",n),e+"/"+i.apiVersion+n+"?"+y(t))};f(t,Se),"success"in a&&(t.onSuccess=a.success),"error"in a&&(t.onError=a.error),(E(a=ie.userAgent,"MSIE ")||E(a,"Trident/")||E(a,"Edge/")?function(t){var n="cb_"+S().toString(16)+"_"+b().toString(16),i=ne.createElement("script");function e(){n in te[pe]&&(K(i,n),t.onError.call({},"jsonp error",ve,0,he,t))}te[pe][n]=function(e){K(i,n),t.onSuccess.call({},e,ge,t)},i.onerror=e,i.onload=e,i.onreadystatechange=function(){"loaded"!==i.readyState&&"complete"!==i.readyState||e()},i.type="text/javascript",i.src=t.url+"&format=jsonp&callback="+encodeURIComponent(n),fe.appendChild(i)}:function(e){H("GET",e)})(t)}function W(e,t){return"string"==typeof e?e:t(e)}function Q(e,t,n,i){i.query=function(e,t){if(p(e))return e;for(var n={},i=0;i<t.length;i++)t[i]in e&&(n[t[i]]=e[t[i]]);return n}(i.query,n),G(e,t,i)}function z(e,t,n){e in n&&(t[e]=n[e])}function X(e){p(e)?d("Vidora API constructed without any options."):s(e)?"apiKey"in e||d("Vidora API constructed without an API Key"):d("Vidora API should be constructed with an option object.");e=f({},e);this.token=e.apiKey,this.apiVersion="v1";var t,n,i,r=this;function a(){t(n),n=[]}this._queue=(t=function(e){var t,n,i;i=t=r,e=o(n=e,function(e){return e[0]}),t=g(void 0),n=f({api_key:i.token},t._params),n={url:l(t._baseURI,i._analyticsHost)+"/"+i.apiVersion+"/validate?"+y(n),data:{data:e}},e=Ee(n),"success"in t&&(n.onSuccess=t.success),q(e,n)},n=[],i=setTimeout(function(){},0),{add:function(e){clearTimeout(i),n.push(e),30<=n.length?a():i=setTimeout(a,500)},flush:function(){clearTimeout(i),a()}}),this._analyticsHost="https://a.vidora.com",this._apiHost="//api.vidora.com",this._sendMode=0,this._build=ee,this._userId=null,Te(q)}function J(e){e.call({},Me,De)}function Z(e){var t=e[0],e=e.slice(1);t in Me||d("Invalid api call '"+t+"'"),Me[t].apply(Me,e)}function $(e){_(e)?Z(e):"function"==typeof e?J(e):d("typeof call item '"+typeof e+"' not supported.")}var ee={version:"1.2.7",rev:"70defd4dcf46f60d01ad6075900d8e0381a4299b"},te=window,ne=document,ie=navigator,re=a(te.Uint16Array)||a(te.crypto)?function(e){for(var t=[],n=0;n<1&&n<e;n++)t.push(65535&(T()^S()));for(;n<e;n++)t.push(T());return t}:function(e){var t=new Uint16Array(e);crypto.getRandomValues(t);for(var n=[],i=0;i<t.length;i++)n.push(t[i]);return n},ae=(te.sessionStorage,te.localStorage),oe=5,se=3*oe,le="vidoraRequest:",ce=".clock",ue=!1,de=4,he=2,pe="_vidora_jsonp";te[pe]=te[pe]||{};var _e,fe=ne.head||ne.body||ne,ge=-200,ve=-400,me="sendBeacon",ye={marshall:v,dataType:"text/plain"},Se={unmarshall:u},Ee=Y,be=Y,Te=Y;Ie="string"==typeof(_e=ae).setItem,p(_e)||Ie||(Ee=function(e){return N(e,0,k())},be=function(e){var t,n=e.key;t=e.clock,e=n+ce,t&&clearInterval(t),D(e),R(n)},Te=function(e,o){var s,l;ue||(ue=!0,s=x(),l=L(),function(e){if(50<e.length){e.sort();for(var t=e.length-50,n=0;n<t;n++)R(e.shift())}}(s),setTimeout(function(){var n,i,t,r,a;a=l,function(){for(var e in a)t=e,n=void 0,e=void 0,n=a[t],e=M(t),!p(e)&&e!==n||(delete a[t],D(t));var t,n}(),t=l,r=[],c(s,function(e){e+ce in t||r.push(e)}),n=e,i=[],c(r,function(e){var t=O(e);p(t)||t.retry+1<3&&(t=N(t.data,0,t.guid),i.push(t)),R(e)}),c(i,function(e){var t=O(e.key);n(e,t.data,t.guid)}),ue=!1,o&&o()},se))}),X.prototype.config=function(e){e=g(e);"analyticsHost"in e&&(this._analyticsHost=e.analyticsHost),"apiHost"in e&&(this._apiHost=e.apiHost)},X.prototype.send=function(e,t,n){for(var i=_(t)?t:[t],r=this.getUserId(),a=this.getSessionId(),o=0;o<i.length;o++){var s=i[o],l=g(n),c={type:W(e,h),user_id:W(r,h),session_id:W(a,h)};p(s)||(c.content_id=W(s,h)),f(c,l.params);var u={};z("success",u,l),z("error",u,l),z("timeout",u,l);s=this._sendMode;switch(s="click"===c.type||l.quicksend?1:s){case 1:this._queue.add([c,u]),this._queue.flush();break;case 0:this._queue.add([c,u]);break;default:d()}}};var Ae="/users/%user_id%";X.prototype.getItems=function(e){Q(this,Ae+"/recommendations",["category","type","limit"],e)};var we=["group_ids"];X.prototype.getGroupRankings=function(e){Q(this,Ae+"/groups/rankings",we,e)},X.prototype._pncItems=function(e){G(this,"/pnc"+Ae+"/groups/items",e)};X.prototype.getUUID=function(){var e=function(){for(var e=ne.cookie.split("; "),t=0;t<e.length;t++){var n=e[t],i=n.indexOf("=");if(-1!==i&&"vidoraUserId"===n.slice(0,i)){i=n.slice(i+1);return decodeURIComponent(i)}}return null}();return n(e)&&function(e){var t=[];t.push("vidoraUserId="+encodeURIComponent(e));e=new Date;e.setTime(e.getTime()+5256e6);e="expires="+e.toUTCString();t.push(e),t.push("path=/");t=t.join("; ");ne.cookie=t}(e=A()),e};var Ce=A().slice(0,10);X.prototype.getSessionId=function(){return Ce},X.prototype.setUserId=function(e){this._userId=e},X.prototype.getUserId=function(){return n(this._userId)&&(this._userId=this.getUUID()),this._userId};var Ie,Pe="vidora-client",ke=X,Me=null,De={_i:function(e,t){t=f({apiKey:e},t);Me=new ke(t),i(Pe+" "+Me._build.version+" "+Me._build.rev)},_create:function(e){return new ke(e)}};Ie=t,(t=e)[e="vidora"]&&!0===t[e]._init?r(Pe+" included twice!"):(ne=Ie,Ie=(te=t)[e],e in t||(t[e]={}),t[e]._init=!0,t[e].push=Z,t[e].ready=J,Ie&&(Ie.ready=J,Ie.push=Z,c(Ie._q,$)))}(window,document),n=window,document,i="vidora",(r={_q:[]}).ready=r.push=function(e){r._q.push(e)},i in n||(n[i]=r),n[i].ready(function(e,t){t._i("wsj.E4B14D56D6D304BA4A96A94B14D11AA9",void 0)}),window.vidora.ready(function(e){console.log("Vidora API finished initializing!")})}catch(e){}var n,i,r},function(e,t){e.exports=(function(){var F,e,t,n,i,m,o,s,l;i=this,void 0===m&&(m={}),void 0===o&&(o={}),(s=void 0===s?{}:s).radio||(s.radio={}),s.plugin||(s.plugin={}),(l=void 0===l?{}:l).clock||(l.clock={}),function(){"use strict";function d(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function s(e,t,n,i,r,a){return d((a=d(d(t,e),d(i,a)))<<r|a>>>32-r,n)}function h(e,t,n,i,r,a,o){return s(t&n|~t&i,e,t,r,a,o)}function p(e,t,n,i,r,a,o){return s(t&i|n&~i,e,t,r,a,o)}function _(e,t,n,i,r,a,o){return s(t^n^i,e,t,r,a,o)}function f(e,t,n,i,r,a,o){return s(n^(t|~i),e,t,r,a,o)}function o(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var n,i,r,a,o=1732584193,s=-271733879,l=-1732584194,c=271733878,u=0;u<e.length;u+=16)o=h(n=o,i=s,r=l,a=c,e[u],7,-680876936),c=h(c,o,s,l,e[u+1],12,-389564586),l=h(l,c,o,s,e[u+2],17,606105819),s=h(s,l,c,o,e[u+3],22,-1044525330),o=h(o,s,l,c,e[u+4],7,-176418897),c=h(c,o,s,l,e[u+5],12,1200080426),l=h(l,c,o,s,e[u+6],17,-1473231341),s=h(s,l,c,o,e[u+7],22,-45705983),o=h(o,s,l,c,e[u+8],7,1770035416),c=h(c,o,s,l,e[u+9],12,-1958414417),l=h(l,c,o,s,e[u+10],17,-42063),s=h(s,l,c,o,e[u+11],22,-1990404162),o=h(o,s,l,c,e[u+12],7,1804603682),c=h(c,o,s,l,e[u+13],12,-40341101),l=h(l,c,o,s,e[u+14],17,-1502002290),o=p(o,s=h(s,l,c,o,e[u+15],22,1236535329),l,c,e[u+1],5,-165796510),c=p(c,o,s,l,e[u+6],9,-1069501632),l=p(l,c,o,s,e[u+11],14,643717713),s=p(s,l,c,o,e[u],20,-373897302),o=p(o,s,l,c,e[u+5],5,-701558691),c=p(c,o,s,l,e[u+10],9,38016083),l=p(l,c,o,s,e[u+15],14,-660478335),s=p(s,l,c,o,e[u+4],20,-405537848),o=p(o,s,l,c,e[u+9],5,568446438),c=p(c,o,s,l,e[u+14],9,-1019803690),l=p(l,c,o,s,e[u+3],14,-187363961),s=p(s,l,c,o,e[u+8],20,1163531501),o=p(o,s,l,c,e[u+13],5,-1444681467),c=p(c,o,s,l,e[u+2],9,-51403784),l=p(l,c,o,s,e[u+7],14,1735328473),o=_(o,s=p(s,l,c,o,e[u+12],20,-1926607734),l,c,e[u+5],4,-378558),c=_(c,o,s,l,e[u+8],11,-2022574463),l=_(l,c,o,s,e[u+11],16,1839030562),s=_(s,l,c,o,e[u+14],23,-35309556),o=_(o,s,l,c,e[u+1],4,-1530992060),c=_(c,o,s,l,e[u+4],11,1272893353),l=_(l,c,o,s,e[u+7],16,-155497632),s=_(s,l,c,o,e[u+10],23,-1094730640),o=_(o,s,l,c,e[u+13],4,681279174),c=_(c,o,s,l,e[u],11,-358537222),l=_(l,c,o,s,e[u+3],16,-722521979),s=_(s,l,c,o,e[u+6],23,76029189),o=_(o,s,l,c,e[u+9],4,-640364487),c=_(c,o,s,l,e[u+12],11,-421815835),l=_(l,c,o,s,e[u+15],16,530742520),o=f(o,s=_(s,l,c,o,e[u+2],23,-995338651),l,c,e[u],6,-198630844),c=f(c,o,s,l,e[u+7],10,1126891415),l=f(l,c,o,s,e[u+14],15,-1416354905),s=f(s,l,c,o,e[u+5],21,-57434055),o=f(o,s,l,c,e[u+12],6,1700485571),c=f(c,o,s,l,e[u+3],10,-1894986606),l=f(l,c,o,s,e[u+10],15,-1051523),s=f(s,l,c,o,e[u+1],21,-2054922799),o=f(o,s,l,c,e[u+8],6,1873313359),c=f(c,o,s,l,e[u+15],10,-30611744),l=f(l,c,o,s,e[u+6],15,-1560198380),s=f(s,l,c,o,e[u+13],21,1309151649),o=f(o,s,l,c,e[u+4],6,-145523070),c=f(c,o,s,l,e[u+11],10,-1120210379),l=f(l,c,o,s,e[u+2],15,718787259),s=f(s,l,c,o,e[u+9],21,-343485551),o=d(o,n),s=d(s,i),l=d(l,r),c=d(c,a);return[o,s,l,c]}function l(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>n%32&255);return t}function c(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;for(t=0;t<8*e.length;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function i(e){for(var t,n="0123456789abcdef",i="",r=0;r<e.length;r+=1)t=e.charCodeAt(r),i+=n.charAt(t>>>4&15)+n.charAt(15&t);return i}function n(e){return unescape(encodeURIComponent(e))}function r(e){return l(o(c(e=n(e)),8*e.length))}function a(e,t){return function(e,t){var n,i=c(e),r=[],a=[];for(r[15]=a[15]=void 0,16<i.length&&(i=o(i,8*e.length)),n=0;n<16;n+=1)r[n]=909522486^i[n],a[n]=1549556828^i[n];return t=o(r.concat(c(t)),512+8*t.length),l(o(a.concat(t),640))}(n(e),n(t))}m.md5=function(e,t,n){return t?n?a(t,e):i(a(t,e)):n?r(e):i(r(e))}}(),function(){"use strict";m.StringUtils={startsWith:function(e,t){return 0==e.indexOf(t)}}}(),function(){"use strict";var r={clone:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n},merge:function(e,t){var n,i=r.clone(e);for(n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);return i},append:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}};m.ObjectUtils=r}(),function(){"use strict";function l(e){if(null==e)return 1;for(var t=0;t<e.length;++t)if(isNaN(e[t]))return;return 1}function n(e,t){if("string"!=typeof e||"string"!=typeof t)return NaN;var n=e.split("."),i=t.split(".");if(!l(n)||!l(i))return NaN;for(var r=Math.max(n.length,i.length),a=0;a<r;++a){var o=null!=n[a]?n[a]:"0",s=null!=i[a]?i[a]:"0";if((o=Number(o))>(s=Number(s)))return 1;if(o<s)return-1}return 0}m.VersionUtils={isGreaterThan:function(e,t){return 0<n(e,t)},isGreaterThanEqual:function(e,t){return 0<=n(e,t)},isLessThan:function(e,t){return n(e,t)<0},isLessThanEqual:function(e,t){return n(e,t)<=0},isSame:function(e,t){return 0===n(e,t)},isDifferent:function(e,t){return 0!==n(e,t)}}}(),function(e){"use strict";function t(e,t,n){this.fn=e,this.ctx=t,this.params=n}t.prototype.run=function(){this.params?this.fn.apply(this.ctx,this.params):this.fn.apply(this.ctx)},e.radio.Command=t}(s),function(e){"use strict";function t(e,t){this._queue=[],this._lastTs=0,this._isSuspended=void 0!==e&&e,this._delay=void 0!==t?t:0}t.prototype.addCommand=function(e){this._queue.push(e),this._drain()},t.prototype.cancelAllCommands=function(){this._queue=[]},t.prototype.isEmpty=function(){return 0===this._queue.length},t.prototype.suspend=function(){this._isSuspended=!0},t.prototype.resume=function(){this._isSuspended=!1,this._drain()},t.prototype.flush=function(){this._isSuspended=!1;for(var e=0;e<this._queue.length;e++)this._queue[e].run();this._queue=[]},t.prototype._drain=function(){var n;this._isSuspended||this._drainInProgress||(this._drainInProgress=!0,n=this,function e(){var t=n._queue.shift();t?n._runCommand(t,function(){n._isSuspended||e()}):n._drainInProgress=!1}())},t.prototype._runCommand=function(e,t){function n(){e.run(),null!=t&&t.call(a)}var i,r,a=this;0==this._lastTs?n():(r=(i=(new Date).getTime())-this._lastTs,this._lastTs=i,r<this._delay?setTimeout(n,this._delay-r):n())},e.radio.CommandQueue=t}(s),function(e){"use strict";function o(e,t){if(this._name=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._listeners={},this._requests={},this._commands={},this._isShutDown=!1}o.WILDCARD="*",o.SEPARATOR=":",o.prototype.toString=function(){return"<channel: "+this._name+">"},o.prototype.shutdown=function(){this._isShutDown||(this._logger.debug(i,"#shutdown > Shutting down"),this.off(),this._requests={},this._commands={},this._isShutDown=!0)},o.prototype.on=function(e,t,n){this._isShutDown||(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push({fn:t,ctx:n}))},o.prototype.off=function(e,t,n){if(!this._isShutDown)if(t="function"==typeof t?t:null,e||null!=t||n)if(e)this._removeListener(e,t,n);else for(e in this._listeners)this._listeners.hasOwnProperty(e)&&this._removeListener(e,t,n);else this._listeners={}},o.prototype.trigger=function(e){if(!this._isShutDown)for(var t in this._listeners)if(this._listeners.hasOwnProperty(t)&&function(e,t){if(e===t)return 1;for(var n=(e||"").split(o.SEPARATOR),i=(t||"").split(o.SEPARATOR),r=!0,a=0;a<n.length;a++)r=r&&(n[a]===o.WILDCARD||n[a]===i[a]);return r}(t,e.name))for(var n=this._listeners[t].slice(0),i=0;i<n.length;i++){var r=n[i];r.fn.call(r.ctx,e)}},o.prototype.comply=function(e,t,n){this._isShutDown||(this._commands[e]={cmd:t,ctx:n})},o.prototype.command=function(e,t){var n;this._isShutDown||((n=this._commands[e])?n.cmd.call(n.ctx,t):this._logger.warn(i,"#command > No command handler for: "+e))},o.prototype.reply=function(e,t,n){this._isShutDown||(this._requests[e]={fn:t,ctx:n})},o.prototype.request=function(e){if(!this._isShutDown){var t=this._requests[e];return t?t.fn.call(t.ctx):(this._logger.warn(i,"#request > No request handler for: "+e),null)}},o.prototype._removeListener=function(e,t,n){t="function"==typeof t?t:null;var i=this._listeners[e];if(i)if(i.length&&(null!=t||n))for(var r=0;r<i.length;r++){var a=i[r];null!==t&&t!==a.fn||n&&n!==a.ctx||this._listeners[e].splice(r,1)}else delete this._listeners[e]};var i="radio::Channel";e.radio.Channel=o}(s),function(e){"use strict";function t(e){if(!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e,this._channels={}}var n=e.radio.Channel;t.prototype.channel=function(e){return this._channels[e]||(this._channels[e]=new n(e,this._logger)),this._channels[e]},t.prototype.shutdown=function(){for(var e in this._channels)this._channels.hasOwnProperty(e)&&this._channels[e].shutdown()},e.radio.Radio=t}(s),function(){"use strict";s.extend=function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e}}(),function(e){"use strict";function t(){}t.prototype.write=function(e){throw new Error("Implementation error: Method must be overridden.")},e.ILogWriter=t}(s),function(e){"use strict";function t(){}t.prototype.write=function(e){window.console&&window.console.log&&window.console.log(e)},e.LogWriter=t}(s),function(e){"use strict";function t(){}t.prototype.setLogWriter=function(e){throw new Error("Implementation error: Method must be overridden.")},t.prototype.getLogWriter=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.getEnabled=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.enable=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.disable=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.debug=function(e,t){throw new Error("Implementation error: Method must be overridden.")},t.prototype.info=function(e,t){throw new Error("Implementation error: Method must be overridden.")},t.prototype.warn=function(e,t){throw new Error("Implementation error: Method must be overridden.")},t.prototype.error=function(e,t){throw new Error("Implementation error: Method must be overridden.")},e.ILogger=t}(s),function(e){"use strict";function t(){this._logWriter=new n}var n=e.LogWriter;t.prototype.setLogWriter=function(e){if(!e)throw new Error("Reference to the ILogWriter object cannot be NULL");this._logWriter=e,this._enabled=!1},t.prototype.getLogWriter=function(){return this._logWriter},t.prototype.getEnabled=function(){return this._enabled},t.prototype.enable=function(){this._enabled=!0},t.prototype.disable=function(){this._enabled=!1},t.prototype.debug=function(e,t){this._log(e,r,t)},t.prototype.info=function(e,t){this._log(e,i,t)},t.prototype.warn=function(e,t){this._log(e,a,t)},t.prototype.error=function(e,t){this._log(e,o,t)},t.prototype._log=function(e,t,n){var i,r;t!=o&&!this._enabled||(i="",i+="["+(r=new Date).toTimeString()+"."+((r=r.getMilliseconds())<10?"00"+r:r<100?"0"+r:""+r)+"] ["+t+"] ",this._logWriter.write(i+="["+e+"] "+n))};var i="INFO",r="DEBUG",a="WARN",o="ERROR";e.Logger=t}(s),function(e){"use strict";function t(e,t){this._pluginName=e,this._eventName=t}var n=e.radio.Channel;t.prototype.getPluginName=function(){return this._pluginName},t.prototype.getEventName=function(){return this._eventName},t.prototype.getName=function(){return this._pluginName+n.SEPARATOR+this._eventName},e.Trigger=t}(s),function(e){"use strict";function t(e,t){this.name=e,this.data=t}t.SUCCESS="success",t.ERROR="error",t.createFromTrigger=function(e){return new t(e.getName())},e.Event=t}(s),function(e){"use strict";function t(){this._events={}}t.prototype.addEventListener=function(e,t,n){e&&t&&(n=n||window,this._events[e]=this._events[e]||[],this._events[e].push({cb:t,ctx:n}))},t.prototype.removeEventListener=function(e,t,n){if(e&&t){n=n||window;var i,r,a=!1;for(r in this._events)if(e===r){a=!0;break}if(a){for(i=this._events[r].length-1;0<=i;i--){var o=this._events[r][i];t===o.cb&&n===o.ctx&&this._events[r].splice(i,1)}this._events[r].length||delete this._events[r]}}},t.prototype.dispatchEvent=function(e){if(e.name)for(var t in this._events)if(this._events.hasOwnProperty(t)&&e.name===t){for(var n=this._events[t].slice(0),i=n.length,r=0;r<i;r++)n[r].cb.call(n[r].ctx,e);break}},t.prototype.removeAllListeners=function(e){var t,n;if(e){for(n in this._events)if(this._events.hasOwnProperty(n)){for(t=this._events[n].length-1;0<=t;t--)this._events[n][t].ctx===e&&this._events[n].splice(t,1);this._events[n].length||delete this._events[n]}}else this._events={}},e.EventDispatcher=t}(s),function(e){"use strict";function t(){}function a(){a.__super__.constructor.call(this),this._connection=null}var o=e.Event,n=e.EventDispatcher;t.GET="GET",a.RESPONSE="response",a.INSTANCE="instance",e.extend(a,n),a.prototype.close=function(){this.removeAllListeners(null)},a.prototype.load=function(e){e&&e.method&&e.url&&(e._xmlhttp=this._createCORSRequest(e),e._xmlhttp?e._xmlhttp.send():this._loadImage(e))},a.prototype._createCORSRequest=function(e){var t,n,i,r=null;return void 0===window.XMLHttpRequest||"withCredentials"in(t=new window.XMLHttpRequest)&&(r=t).open(e.method,e.url,!0),null==r&&void 0!==window.XDomainRequest&&(r=new window.XDomainRequest).open(e.method,e.url),r&&(i=(n={})[a.INSTANCE]=this,r.onload=function(){if(r.status&&400<=parseInt(r.status,10))return this.onerror();n[a.RESPONSE]=r.responseText,i.dispatchEvent(new o(o.SUCCESS,n))},r.onerror=function(){i.dispatchEvent(new o(o.ERROR,n))}),r},a.prototype._loadImage=function(e){this._connection||(this._connection=new Image,this._connection.alt=""),this._connection.src=e.url;e={};e[a.RESPONSE]="",(e[a.INSTANCE]=this).dispatchEvent(new o(o.SUCCESS,e))},e.URLRequestMethod=t,e.URLRequest=function(e,t){this.url=e||null,this.method=t,this._xmlhttp=null},e.URLLoader=a}(s),function(){"use strict";var e={getVersion:function(){return"js-2.2.0.223-05c3c4"},getMajor:function(){return e.getNumberAtPosition(0)},getMinor:function(){return e.getNumberAtPosition(1)},getMicro:function(){return e.getNumberAtPosition(2)},getPatch:function(){return e.getNumberAtPosition(3)},getBuild:function(){return"05c3c4"},getApiLevel:function(){return 4},getNumberAtPosition:function(e){return"2.2.0.223".split(".")[e]}};o.Version=e}(),function(e){"use strict";function t(e,t){this._message=e,this._details=t}t.prototype.getMessage=function(){return this._message},t.prototype.getDetails=function(){return this._details},e.ErrorInfo=t}(o),function(){"use strict";o.HeartbeatConfig=function(){this.debugLogging=!1}}(),function(e){"use strict";function t(){}t.prototype.onError=function(e){},e.HeartbeatDelegate=t}(o),function(e){"use strict";function t(){}t.prototype.configure=function(e){throw new Error("Implementation error: Method must be overridden.")},t.prototype.bootstrap=function(e){throw new Error("Implementation error: Method must be overridden.")},t.prototype.setup=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.destroy=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.enable=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.disable=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.getName=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.isInitialized=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.resolveData=function(e){throw new Error("Implementation error: Method must be overridden.")},e.plugin.IPlugin=t}(s),function(e){"use strict";function t(e,t,n,i){this.trigger=e,this.action=n,this.plugin=t,this._paramMappings={},this.mergeParams(i)}var n=e.plugin.ParamMapping;t.prototype.mergeParams=function(e){if(e)for(var t=0;t<e.length;t++){var n=e[t];this._paramMappings[n.getKeyName()]=n}},t.prototype.getParams=function(){var e,t=[];for(e in this._paramMappings)this._paramMappings.hasOwnProperty(e)&&t.push(this._paramMappings[e]);return t},t.prototype.addParam=function(e){this._paramMappings[e.getKeyName()]=e},t.prototype.removeParam=function(e,t){t=new n(e,t);this._paramMappings.hasOwnProperty(t.getKeyName())&&delete this._paramMappings[t.getKeyName()]},e.plugin.Behaviour=t}(s),function(e){"use strict";function t(e,t,n){this._pluginName=e,this._key=t,this._paramName=n||e+i.SEPARATOR+t}var i=e.radio.Channel;t.prototype.getPluginName=function(){return this._pluginName},t.prototype.getKey=function(){return this._key},t.prototype.getKeyName=function(){return this._pluginName+i.SEPARATOR+this._key},t.prototype.getParamName=function(){return this._paramName},e.plugin.ParamMapping=t}(s),function(e){"use strict";function t(e){if(!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e,this._plugins={},this._behaviours={},this._radio=new i(this._logger),this._dataChannel=this._radio.channel(o),this._ctrlChannel=this._radio.channel(s)}var n=e.Event,i=e.radio.Radio,r=e.radio.Channel,a=e.plugin.Behaviour;t.ERROR="error",t.prototype.addPlugin=function(e){var t=e.getName();this._plugins[t]&&this._logger.warn(l,"#addPlugin > Replacing plugin: "+t),(this._plugins[t]=e).bootstrap(this)},t.prototype.setupPlugins=function(){for(var e in this._plugins)this._plugins.hasOwnProperty(e)&&this._plugins[e].setup()},t.prototype.pluginExists=function(e){return!!this._plugins[e]},t.prototype.isPluginInitialized=function(e){return this._plugins[e]&&this._plugins[e].isInitialized()},t.prototype.on=function(e,t,n,i){this._dataChannel.on(e+r.SEPARATOR+t,n,i)},t.prototype.off=function(e,t,n,i){t=e&&t?e+r.SEPARATOR+t:null;this._dataChannel.off(t,n,i)},t.prototype.trigger=function(e){var t=e.name,n=this._behaviours[t];if(n){for(var i,r,a,o,s,l={},c={},u=0;u<n.length;u++)if(a=(r=n[u]).getParams())for(i=0;i<a.length;i++)l[(o=a[i]).getPluginName()]=l[o.getPluginName()]||[],o.key in l[o.getPluginName()]||l[o.getPluginName()].push(o.getKey());for(s in l)l.hasOwnProperty(s)&&(c[s]=this.request(s,l[s]));for(u=0;u<n.length;u++){var d={_behaviour:r=n[u],_eventData:e.data||{}};if(a=r.getParams()){for(i=0;i<a.length;i++)d[(o=a[i]).getParamName()]=c[o.getPluginName()]?c[o.getPluginName()][o.getKey()]:null;this.command(r.plugin.getName(),r.action,d)}}}this._dataChannel.trigger(e)},t.prototype.request=function(e,t){e=this._plugins[e];return e&&t&&0!=t.length?e.resolveData(t):null},t.prototype.raise=function(e){this._errorInfo=e;e=new n(t.ERROR,e);this._ctrlChannel.trigger(e)},t.prototype.getErrorInfo=function(){return this._errorInfo},t.prototype.destroy=function(){for(var e in this._radio.shutdown(),this._plugins)this._plugins.hasOwnProperty(e)&&this._plugins[e].destroy()},t.prototype.comply=function(e,t,n){this._dataChannel.comply(e.getName()+r.SEPARATOR+t,n,e)},t.prototype.command=function(e,t,n){this._dataChannel.command(e+r.SEPARATOR+t,n)},t.prototype.registerBehaviour=function(e,t,n,i){var r=e.getName(),i=new a(e,t,n,i);this._behaviours[r]=this._behaviours[r]||[],this._behaviours[r].push(i)};var o="data_channel",s="ctrl_channel",l="plugin::PluginManager";e.plugin.PluginManager=t}(s),function(e){"use strict";function t(e){this._name=e,this._isInitialized=!1,this._isDestroyed=!1,this._isEnabled=!0,this._dataResolver={},this._logTag="plugin::"+this.getName(),this._logger=new n}var n=e.Logger,i=e.Trigger,r=e.Event,a=o.ErrorInfo;t.INITIALIZED="initialized",t.prototype.configure=function(e){},t.prototype.bootstrap=function(e){this._pluginManager=e,this._isDestroyed&&this._pluginManager.raise(new a("Invalid state.","Plugin already destroyed."))},t.prototype.setup=function(){this._trigger(t.INITIALIZED),this._isInitialized=!0},t.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._teardown())},t.prototype.enable=function(){this._isEnabled=!0,this._enabled()},t.prototype.disable=function(){this._isEnabled=!1,this._disabled()},t.prototype.getName=function(){return this._name},t.prototype.getLogger=function(){return this._logger},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype.resolveData=function(e){if(!this._isEnabled||!this._isInitialized)return this._logger.warn(this._logTag,"Unable to retrieve plugin data. Plugin: "+this._name+". Enabled: "+this._isEnabled+". Initialized: "+this._isInitialized+"."),null;if("function"==typeof this._dataResolver)return this._dataResolver.call(this,e);var t=null;if(e)for(var n=0;n<e.length;n++){var i=e[n];this._dataResolver.hasOwnProperty(i)&&(t=t||{},"function"==typeof this._dataResolver[i]?t[i]=this._dataResolver[i].call(this):t[i]=this._dataResolver[i])}return t},t.prototype.toString=function(){return"<plugin: "+this._name+">"},t.prototype._enabled=function(){},t.prototype._disabled=function(){},t.prototype._teardown=function(){},t.prototype._canProcess=function(){return this._isEnabled?!this._isDestroyed||(this._logger.error(this._logTag,"Plugin destroyed."),!1):(this._logger.error(this._logTag,"Plugin disabled."),!1)},t.prototype._trigger=function(e,t){e=r.createFromTrigger(new i(this.getName(),e));e.data=t,this._pluginManager.trigger(e)},e.plugin.BasePlugin=t}(s),function(e){"use strict";function i(e,t,n){this.name=e,this.interval=t,this.isActive=!1,this.repeatCount=void 0!==n?n:r,this._nextTickTimestamp=0,this.reset()}function t(e,t){if(!e)throw new Error("Reference to the ClockService object cannot be NULL");if(this._service=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._isDestroyed=!1,this._timers={};var n=this;this._clock=window.setInterval(function(){n._onTick()},1e3*a)}i.prototype.reset=function(){this.tick=0,this._createdTimestamp=(new Date).getTime(),this._updateNextTickTimestamp()},i.prototype.shouldTick=function(){return(new Date).getTime()>this._nextTickTimestamp-o/2&&(this.tick++,this._updateNextTickTimestamp(),!0)},i.prototype._updateNextTickTimestamp=function(){var e=(new Date).getTime();this._nextTickTimestamp=e+1e3*this.interval-1},t.prototype.createTimer=function(e,t,n){this._timers[e]=new i(e,t,n)},t.prototype.destroyTimer=function(e){delete this._timers[e]},t.prototype.resumeTimer=function(e,t){this._logger.debug(n,"#resumeTimer(name="+e+", reset="+(t=void 0!==t&&t)+")");e=this._timers[e];e&&(e.isActive=!0,t&&e.reset())},t.prototype.pauseTimer=function(e,t){this._logger.debug(n,"#pauseTimer(name="+e+", reset="+(t=void 0!==t&&t)+")");e=this._timers[e];e&&(e.isActive=!1,t&&e.reset())},t.prototype.isTimerPaused=function(e){e=this._timers[e];return!!e&&!e.isActive},t.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._timers={},window.clearInterval(this._clock))},t.prototype._onTick=function(){for(var e in this._timers)!this._timers.hasOwnProperty(e)||(e=this._timers[e]).isActive&&e.shouldTick()&&(1<e.interval&&this._logger.debug(n,"#_onTick() > "+e.name+"("+e.tick+" | "+e.repeatCount+")"),0!=e.repeatCount?(this._service.onTick(e.name,e.interval,e.tick),e.repeatCount!=r&&e.repeatCount--):this.destroyTimer(e.name))};var n="service.clock::TimerManager",r=-1,a=.25,o=1e3*a;e.clock.TimerDescriptor=i,e.clock.TimerManager=t}(l),function(e,t){"use strict";function n(e){if(n.__super__.constructor.call(this,a),!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e,this._timerManager=new i(this,this._logger),this._setupDataResolver()}var i=t.clock.TimerManager,o=m.StringUtils,r=e.plugin.BasePlugin;e.extend(n,r),n.prototype.bootstrap=function(e){n.__super__.bootstrap.call(this,e),this._pluginManager.comply(this,s,this._cmdCreate),this._pluginManager.comply(this,c,this._cmdResume),this._pluginManager.comply(this,l,this._cmdPause),this._pluginManager.comply(this,u,this._cmdDestroy)},n.prototype._teardown=function(){this._timerManager.destroy()},n.prototype._cmdCreate=function(e){var t=e[p]||v;this._timerManager.createTimer(e[d],e[h],t)},n.prototype._cmdPause=function(e){this._timerManager.pauseTimer(e[d],!!e[f])},n.prototype._cmdResume=function(e){this._timerManager.resumeTimer(e[d],!!e[f])},n.prototype._cmdDestroy=function(e){this._timerManager.destroyTimer(e[d])},n.prototype.onTick=function(e,t,n){var i={};i[d]=e+=".tick",i[h]=t,i[_]=n,this._trigger(e,i)},n.prototype._setupDataResolver=function(){var a={},t=this._timerManager;a[g]=function(e){return t.isTimerPaused(e)},this._dataResolver=function(e){if(!e||0==e.length)return null;for(var t=null,n=0;n<e.length;n++){var i,r=e[n],t=t||{};o.startsWith(r,g)&&0<(i=r.split(g+".")).length&&(t[r]=a[g].call(this,i[1]))}return t}};var a="service.clock",s="create",l="pause",c="resume",u="destroy",d="name",h="interval",p="repeat_count",_="tick",f="reset",g="is_paused",v=-1;t.clock.ClockService=n}(s,l),function(e){"use strict";function t(e,t){if(this._logger=new i,this._pluginManager=new r(this._logger),this._pluginManager.addPlugin(new a(this._logger)),t)for(var n=0;n<t.length;n++)this._pluginManager.addPlugin(t[n]);this._pluginManager.setupPlugins(),this._isDestroyed=!1}var i=s.Logger,r=s.plugin.PluginManager,a=l.clock.ClockService;t.prototype.configure=function(e){if(!e)throw new Error("Configuration object cannot be NULL.");e.debugLogging?this._logger.enable():this._logger.disable(),this._isDestroyed&&this._logger.error(n,"Instance is destroyed.")},t.prototype.destroy=function(){this._isDestroyed||(this._pluginManager.destroy(),this._isDestroyed=!0)};var n="Heartbeat";e.Heartbeat=t}(o),i.ADB||(i.ADB={}),i.ADB.core||(i.ADB.core=s),i.ADB.va||(i.ADB.va=o),i.ADB.va.utils||(i.ADB.va.utils=m),i.ADB.va.plugins||(i.ADB.va.plugins={}),i=this,void 0===n&&(n={}),function(){"use strict";n.AssetType={ASSET_TYPE_VOD:"vod",ASSET_TYPE_LIVE:"live",ASSET_TYPE_LINEAR:"linear"}}(),function(e){"use strict";function t(){this.playerName=null,this.name=null,this.position=null,this.startTime=null}t.prototype.toString=function(){return"playerName="+this.playerName+", name="+this.name+", position="+this.position+", startTime="+this.startTime},e.AdBreakInfo=t}(n),function(e){"use strict";function t(){this.id=null,this.name=null,this.length=null,this.position=null,this.granularTracking=!0}t.prototype.toString=function(){return"id="+this.id+", name="+this.name+", length="+this.length+", position="+this.position+", granularTracking="+this.granularTracking},e.AdInfo=t}(n),function(e){"use strict";function t(){this.name=null,this.length=null,this.position=null,this.startTime=null}t.prototype.toString=function(){return"name="+this.name+", length="+this.length+", position="+this.position+", startTime="+this.startTime},e.ChapterInfo=t}(n),function(e){"use strict";function t(){this.bitrate=null,this.fps=null,this.droppedFrames=null,this.startupTime=null}t.prototype.toString=function(){return"bitrate="+this.bitrate+", fps="+this.fps+", droppedFrames="+this.droppedFrames+", startupTime="+this.startupTime},e.QoSInfo=t}(n),function(e){"use strict";function t(){this.playerName=null,this.id=null,this.name=null,this.length=null,this.playhead=null,this.mediaType=null,this.streamType=null,this.resumed=!1}t.prototype.toString=function(){return"playerName="+this.playerName+", id="+this.id+", name="+this.name+", length="+this.length+", playhead="+this.playhead+", mediaType="+this.mediaType+", streamType="+this.streamType+", resumed="+this.resumed},e.VideoInfo=t}(n),function(){"use strict";n.VideoPlayerPluginConfig=function(){this.debugLogging=!1}}(),function(e){"use strict";function t(){}t.prototype.getVideoInfo=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.getAdBreakInfo=function(){return null},t.prototype.getAdInfo=function(){return null},t.prototype.getChapterInfo=function(){return null},t.prototype.getQoSInfo=function(){return null},e.VideoPlayerPluginDelegate=t}(n),function(e,t){"use strict";function n(e){if(n.__super__.constructor.call(this,s),!e)throw new Error("PlayerPlugin delegate cannot be NULL.");this._delegate=e,this._isTrackingSessionActive=!1,this._isTrackingSessionStarted=!1,this._setupDataResolver()}var i=e.plugin.ParamMapping,r=e.Trigger,a=e.plugin.BasePlugin,o=t.VideoPlayerPluginConfig;e.extend(n,a),n.prototype.configure=function(e){if(!e)throw new Error("Reference to the configuration data cannot be NULL.");if(!(e instanceof o))throw new Error("Expected config data to be instance of VideoPlayerPluginConfig.");e.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,"#configure(debugLogging="+e.debugLogging+")")},n.prototype.bootstrap=function(e){n.__super__.bootstrap.call(this,e),this._registerCommands(),this._registerBehaviours()},n.prototype._cmdVideoIdleStart=function(e){this._logger.info(this._logTag,"#_cmdVideoIdleStart()"),this._videoIdle=!0},n.prototype._cmdVideoIdleResume=function(e){this._logger.info(this._logTag,"#_cmdVideoIdleResume()"),this._videoIdle&&(this._trigger(f),this._trigger(g),e.isInAd&&(this._trigger(T),this._isTrackingAdBreak=!0),e.isInAd&&(this._trigger(w),this._isTrackingAd=!0),e.isInChapter&&this._trigger(O),this._trigger(S)),this._videoIdle=!1},n.prototype.trackSessionStart=function(){var e;this._logger.info(this._logTag,"#trackSessionStart()"),this._canProcess()&&(this._isTrackingSessionActive?this._isTrackingSessionStarted?this._logger.info(this._logTag,"#trackSessionStart() > Tracking session already started."):(this._trigger(f),this._isTrackingSessionStarted=!0,(e=this._dataResolver(["video.resumed"])).hasOwnProperty("video.resumed")&&e["video.resumed"]&&this._trigger(g)):this._logger.warn(this._logTag,"#trackSessionStart() > No active tracking session."))},n.prototype.trackVideoLoad=function(){this._logger.info(this._logTag,"#trackVideoLoad()"),this._canProcess()&&(this._isTrackingAdBreak=!1,this._isTrackingAd=!1,this._contentStarted=!1,this._isPaused=!0,this._isBuffering=!1,this._isSeeking=!1,this._playheadTimer=null,this._previousPlayhead=-1,this._stalledPlayheadCount=0,this._playheadStalled=!1,this._videoIdle=!1,this._trigger(h),this._isTrackingSessionActive=!0,this._isTrackingSessionStarted=!1)},n.prototype.trackVideoUnload=function(){this._logger.info(this._logTag,"#trackVideoUnload()"),this._canProcess()&&(this._isTrackingSessionActive?(this._stopPlayheadTimer(),this._trigger(p),this._isTrackingSessionActive=!1,this._isTrackingSessionStarted=!1,this._contentStarted=!1):this._logger.warn(this._logTag,"#trackVideoUnload() > No active tracking session."))},n.prototype.trackPlay=function(){this._logger.info(this._logTag,"#trackPlay()"),this._canProcess()&&this._startSessionIfNeeded("trackPlay")&&this._allowPlayerStateChange()&&(this._isPaused=!1,this._trigger(S),this._startPlayheadTimer())},n.prototype.trackPause=function(){var e;this._logger.info(this._logTag,"#trackPause()"),this._canProcess()&&this._startSessionIfNeeded("trackPause")&&this._allowPlayerStateChange()&&(this._stopPlayheadTimer(),(e={})[U]=!1,this._isPaused=!0,this._trigger(E,e))},n.prototype.trackBufferStart=function(){this._logger.info(this._logTag,"#trackBufferStart()"),this._canProcess()&&this._startSessionIfNeeded("trackBufferStart")&&this._allowPlayerStateChange()&&(this._stopPlayheadTimer(),this._isBuffering=!0,this._trigger(P))},n.prototype.trackBufferComplete=function(){this._logger.info(this._logTag,"#trackBufferComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackBufferComplete")&&this._allowPlayerStateChange()&&(this._isBuffering=!1,this._trigger(k),this._startPlayheadTimer())},n.prototype.trackSeekStart=function(){this._logger.info(this._logTag,"#trackSeekStart()"),this._canProcess()&&this._startSessionIfNeeded("trackSeekStart")&&this._allowPlayerStateChange()&&(this._stopPlayheadTimer(),this._isSeeking=!0,this._trigger(M))},n.prototype.trackSeekComplete=function(){this._logger.info(this._logTag,"#trackSeekComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackSeekComplete")&&this._allowPlayerStateChange()&&(this._isSeeking=!1,this._trigger(D),this._startPlayheadTimer())},n.prototype.trackComplete=function(e,t){if(this._logger.info(this._logTag,"#trackComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackComplete")){if(this._stopPlayheadTimer(),this._videoIdle)return this._logger.info(this._logTag,"#trackComplete() > Video session is already in Idle State."),void(e&&e());var n={};n[B]=e,(t=void 0===t||!!t)?this._trigger(v,n):(this._trigger(m),this._trigger(_,n))}},n.prototype.trackTimedMetadata=function(e){this._logger.info(this._logTag,"#trackComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackTimedMetadata")&&this._trigger(y,e)},n.prototype.trackChapterStart=function(){this._logger.info(this._logTag,"#trackChapterStart()"),this._canProcess()&&this._startSessionIfNeeded("#trackChapterStart")&&this._trigger(O)},n.prototype.trackChapterComplete=function(){this._logger.info(this._logTag,"#trackChapterComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackChapterComplete")&&this._trigger(R)},n.prototype.trackChapterSkip=function(){this._logger.info(this._logTag,"#trackChapterSkip()"),this._canProcess()&&this._startSessionIfNeeded("trackChapterSkip")&&this._trigger(N)},n.prototype.trackAdBreakStart=function(){this._logger.info(this._logTag,"#trackAdBreakStart()"),this._canProcess()&&this._startSessionIfNeeded("trackAdBreakStart")&&(this._trigger(T),this._isTrackingAdBreak=!0)},n.prototype.trackAdBreakComplete=function(){this._logger.info(this._logTag,"#trackAdBreakComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackAdBreakComplete")&&(this._trigger(A),this._isTrackingAdBreak=!1)},n.prototype.trackAdStart=function(){this._logger.info(this._logTag,"#trackAdStart()"),this._canProcess()&&this._startSessionIfNeeded("trackAdStart")&&(this._trigger(w),this._isTrackingAd=!0)},n.prototype.trackAdComplete=function(){this._logger.info(this._logTag,"#trackAdComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackAdComplete")&&(this._trigger(C),this._isTrackingAd=!1)},n.prototype.trackAdSkip=function(){this._logger.info(this._logTag,"#trackAdSkip()"),this._canProcess()&&this._startSessionIfNeeded("trackAdSkip")&&(this._trigger(I),this._isTrackingAd=!1)},n.prototype.trackBitrateChange=function(){this._logger.info(this._logTag,"#trackBitrateChange()"),this._canProcess()&&this._startSessionIfNeeded("trackBitrateChange")&&this._trigger(L)},n.prototype.trackVideoPlayerError=function(e){var t;this._logger.info(this._logTag,"#trackVideoPlayerError(errorId="+e+")"),this._startSessionIfNeeded("trackVideoPlayerError")&&((t={})[j]=d,t[H]=e,this._trigger(x,t))},n.prototype.trackApplicationError=function(e){var t;this._logger.info(this._logTag,"#trackApplicationError(errorId="+e+")"),this._startSessionIfNeeded("trackApplicationError")&&((t={})[j]=u,t[H]=e,this._trigger(x,t))},n.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleVideoIdleStart",this._cmdVideoIdleStart),this._pluginManager.comply(this,"handleVideoIdleResume",this._cmdVideoIdleResume)},n.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new r(c,F),this,"handleVideoIdleStart"),this._pluginManager.registerBehaviour(new r(c,V),this,"handleVideoIdleResume",[new i(l,"ad.isInAdBreak","isInAdBreak"),new i(l,"ad.isInAd","isInAd"),new i(l,"chapter.isInChapter","isInChapter")])},n.prototype._setupDataResolver=function(){function t(){return s.video||(s.video=l._delegate.getVideoInfo(),l._logger.info(l._logTag,"Data from delegate > VideoInfo: "+s.video)),s.video}function n(){return s.ad||(s.ad=l._delegate.getAdInfo(),l._logger.info(l._logTag,"Data from delegate > AdInfo: "+s.ad)),s.ad}function i(){return s.pod||(s.pod=l._delegate.getAdBreakInfo(),l._logger.info(l._logTag,"Data from delegate > AdBreakInfo: "+s.pod)),s.pod}function r(){return s.chapter||(s.chapter=l._delegate.getChapterInfo(),l._logger.info(l._logTag,"Data from delegate > ChapterInfo: "+s.chapter)),s.chapter}function a(){return s.qos||(s.qos=l._delegate.getQoSInfo(),l._logger.info(l._logTag,"Data from delegate > QoSInfo: "+s.qos)),s.qos}var o={},s={},l=this;o["video.id"]=function(){var e=t(),e=e?e.id:null;return l._logger.debug(l._logTag,"Resolving video.id: "+e),e},o["video.name"]=function(){var e=t(),e=e?e.name:null;return l._logger.debug(l._logTag,"Resolving video.name: "+e),e},o["video.length"]=function(){var e=t(),e=e?e.length:NaN;return l._logger.debug(l._logTag,"Resolving video.length: "+e),e},o["video.playerName"]=function(){var e=t(),e=e?e.playerName:null;return l._logger.debug(l._logTag,"Resolving video.playerName: "+e),e},o["video.mediaType"]=function(){var e=t(),e=e?e.mediaType:null;return l._logger.debug(l._logTag,"Resolving video.mediaType: "+e),e},o["video.streamType"]=function(){var e=t(),e=e?e.streamType:null;return l._logger.debug(l._logTag,"Resolving video.streamType: "+e),e},o["video.playhead"]=function(){var e=t(),e=e?e.playhead:NaN;return l._logger.debug(l._logTag,"Resolving video.playhead: "+e),e},o["video.resumed"]=function(){var e=t(),e=!!e&&e.resumed;return l._logger.debug(l._logTag,"Resolving video.resumed: "+e),e},o["video.playheadStalled"]=function(){return this._playheadStalled},o["pod.name"]=function(){var e=i(),e=e?e.name:null;return l._logger.debug(l._logTag,"Resolving pod.name: "+e),e},o["pod.playerName"]=function(){var e=i(),e=e?e.playerName:null;return l._logger.debug(l._logTag,"Resolving pod.playerName: "+e),e},o["pod.position"]=function(){var e=i(),e=e?e.position:NaN;return l._logger.debug(l._logTag,"Resolving pod.position: "+e),e},o["pod.startTime"]=function(){var e=i(),e=e?e.startTime:NaN;return l._logger.debug(l._logTag,"Resolving pod.startTime: "+e),e},o["ad.isInAd"]=function(){var e=null!=n();return l._logger.debug(l._logTag,"Resolving ad.isInAd: "+e),e},o["ad.isInAdBreak"]=function(){var e=null!=i();return l._logger.debug(l._logTag,"Resolving ad.isInAdBreak: "+e),e},o["ad.id"]=function(){var e=n(),e=e?e.id:null;return l._logger.debug(l._logTag,"Resolving ad.id: "+e),e},o["ad.name"]=function(){var e=n(),e=e?e.name:null;return l._logger.debug(l._logTag,"Resolving ad.name: "+e),e},o["ad.length"]=function(){var e=n(),e=e?e.length:NaN;return l._logger.debug(l._logTag,"Resolving ad.length: "+e),e},o["ad.position"]=function(){var e=n(),e=e?e.position:NaN;return l._logger.debug(l._logTag,"Resolving ad.position: "+e),e},o["ad.granularTracking"]=function(){var e=n(),e=!!e&&e.granularTracking;return l._logger.debug(l._logTag,"Resolving ad.granularTracking: "+e),e},o["ad.trackingInterval"]=function(){var e=Y;return l._logger.debug(l._logTag,"Resolving ad.trackingInterval: "+e),e},o["chapter.isInChapter"]=function(){var e=null!=r();return l._logger.debug(l._logTag,"Resolving chapter.isInChapter: "+e),e},o["chapter.name"]=function(){var e=r(),e=e?e.name:null;return l._logger.debug(l._logTag,"Resolving chapter.name: "+e),e},o["chapter.length"]=function(){var e=r(),e=e?e.length:NaN;return l._logger.debug(l._logTag,"Resolving chapter.length: "+e),e},o["chapter.position"]=function(){var e=r(),e=e?e.position:NaN;return l._logger.debug(l._logTag,"Resolving chapter.position: "+e),e},o["chapter.startTime"]=function(){var e=r(),e=e?e.startTime:NaN;return l._logger.debug(l._logTag,"Resolving chapter.startTime: "+e),e},o["qos.bitrate"]=function(){var e=a(),e=e?e.bitrate:NaN;return l._logger.debug(l._logTag,"Resolving qos.bitrate: "+e),e},o["qos.fps"]=function(){var e=a(),e=e?e.fps:NaN;return l._logger.debug(l._logTag,"Resolving qos.fps: "+e),e},o["qos.droppedFrames"]=function(){var e=a(),e=e?e.droppedFrames:NaN;return l._logger.debug(l._logTag,"Resolving qos.droppedFrames: "+e),e},o["qos.startupTime"]=function(){var e=a(),e=e?1e3*e.startupTime:NaN;return l._logger.debug(l._logTag,"Resolving qos.startupTime: "+e),e},this._dataResolver=function(e){if(!e||0==e.length)return null;s={};for(var t=null,n=0;n<e.length;n++){var i=e[n];(t=t||{})[i]=o.hasOwnProperty(i)?o[i].call(this):null}return t}},n.prototype._trackPlayheadStall=function(){this._canProcess()&&(this._playheadStalled||(this._logger.info(this._logTag,"#_trackPlayheadStall()"),this._stalledPlayheadCount=0,this._playheadStalled=!0,this._trigger(E)))},n.prototype._trackExitStall=function(){this._canProcess()&&(this._stalledPlayheadCount=0,!this._playheadStalled||this._isPaused||this._isSeeking||this._isBuffering||(this._logger.info(this._logTag,"#_trackExitStall()"),this._playheadStalled=!1,this._trigger(S)))},n.prototype._startPlayheadTimer=function(){var t=this;this._playheadTimer||this._isPaused||this._isSeeking||this._isBuffering||(this._playheadTimer=setInterval(function(){var e;t._canProcess()&&(e=t._dataResolver(["ad.isInAd","video.playhead"]),t._isTrackingAdBreak?t._playheadStalled&&t._trackExitStall():((e=e["video.playhead"])!=t._previousPlayhead?t._trackExitStall():0<=t._previousPlayhead&&e==t._previousPlayhead&&++t._stalledPlayheadCount==q&&t._trackPlayheadStall(),e!=t._previousPlayhead&&0<e&&!t._contentStarted&&(t._isPaused||t._isBuffering||t._isSeeking||(t._logger.info(t._logTag,"#_playheadTimer playhead progress to: "+e),t._trigger(b),t._contentStarted=!0)),t._previousPlayhead=e))},K))},n.prototype._stopPlayheadTimer=function(){this._playheadTimer&&(clearInterval(this._playheadTimer),this._playheadTimer=null),this._trackExitStall()},n.prototype._startSessionIfNeeded=function(e){return this._isTrackingSessionActive?(this._isTrackingSessionStarted||(this._logger.info(this._logTag,"#"+e+"() > Tracking session auto-start."),this.trackSessionStart()),!0):(this._logger.warn(this._logTag,"#"+e+"() > No active tracking session."),!1)},n.prototype._allowPlayerStateChange=function(){return!(this._isTrackingAdBreak&&!this._isTrackingAd&&(this._logger.info(this._logTag,"_allowPlayerStateChange Player plugin does not allow player state changes when in Adbreak and not in Ad."),1))};var s="player",l=s,c="adobe-heartbeat",u="sourceErrorExternal",d="sourceErrorSDK",h="video_load",p="video_unload",_="video_session_end",f="video_start",g="video_resume",v="video_complete",m="video_skip",y="timed_metadata",S="play",E="pause",b="content_start",T="adbreak_start",A="adbreak_complete",w="ad_start",C="ad_complete",I="ad_skip",P="buffer_start",k="buffer_complete",M="seek_start",D="seek_complete",O="chapter_start",R="chapter_complete",N="chapter_skip",L="bitrate_change",x="track_error",F="video_idle_start",V="video_idle_resume",B="callback",U="filter_report",j="source",H="error_id",K=1001,Y=1,q=2;t.VideoPlayerPlugin=n}(i.ADB.core,n),i.ADB.va.plugins.videoplayer||(i.ADB.va.plugins.videoplayer=n),i=this,(t=void 0===t?{}:t).clock||(t.clock={}),t.context||(t.context={}),t.filter||(t.filter={}),t.model||(t.model={}),t.network||(t.network={}),function(e,t){"use strict";function n(e,t,n,i,r){if(!t)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=t,!e)throw new Error("Reference to the pluginManager object cannot be NULL");if(this._pluginManager=e,!r)throw new Error("Reference to the logger object cannot be NULL");this._logTag="ah::Timer."+n,this._logger=r,this._isDestroyed=!1,this._createTimer(n,i),this._installHandlers()}var i=e.Event;n.KEY_NAME="name",n.KEY_INTERVAL="interval",n.KEY_RESET="reset",n.prototype.resume=function(e){this._logger.debug(this._logTag,"Starting timer: "+this._name);var t={};t[n.KEY_NAME]=r+"."+this._name,t[n.KEY_RESET]=e,this._pluginManager.command(a,l,t)},n.prototype.pause=function(e){this._logger.debug(this._logTag,"Stopping timer: "+this._name);var t={};t[n.KEY_NAME]=r+"."+this._name,t[n.KEY_RESET]=e,this._pluginManager.command(a,s,t)},n.prototype.destroy=function(){var e;this._isDestroyed||(this._isDestroyed=!0,this._uninstallHandlers(),(e={})[n.KEY_NAME]=r+"."+this._name,this._pluginManager.command(a,c,e))},n.prototype.setInterval=function(e){var t=u+"."+r+"."+this._name,t=this._pluginManager.request(a,[t])[t];this.pause(!0),this._createTimer(this._name,e),t||this.resume(!0)},n.prototype._cmdResume=function(e){var t=!1;null!=e&&e.hasOwnProperty(n.KEY_RESET)&&(t=e[n.KEY_RESET]),this.resume(t)},n.prototype._cmdPause=function(e){var t=!1;null!=e&&e.hasOwnProperty(n.KEY_RESET)&&(t=e[n.KEY_RESET]),this.pause(t)},n.prototype._onTick=function(e,t){this._channel.trigger(new i("clock:"+this._name+".tick",t))},n.prototype._installHandlers=function(){this._channel.comply("clock:"+this._name+".resume",this._cmdResume,this),this._channel.comply("clock:"+this._name+".pause",this._cmdPause,this),this._pluginManager.on(a,r+"."+this._name+".tick",this._onTick,this)},n.prototype._uninstallHandlers=function(){this._channel.off(null,null,this),this._pluginManager.off(null,null,null,this)},n.prototype._createTimer=function(e,t){this._name=e,this._interval=t;t={};t[n.KEY_NAME]=r+"."+this._name,t[n.KEY_INTERVAL]=this._interval,this._pluginManager.command(a,o,t)};var r="heartbeat",a="service.clock",o="create",s="pause",l="resume",c="destroy",u="is_paused";t.clock.Timer=n}(i.ADB.core,t),function(e,t){"use strict";function i(e,t,n){i.__super__.constructor.call(this,e,t,a,s,n)}var n=e.Event,r=t.clock.Timer;e.extend(i,r),i.prototype._onCheckStatusComplete=function(e){e=e.data[d];this._logger.debug(this._logTag,"#_onCheckStatusComplete(interval="+e+")"),e?e!=this._interval?o<e?(this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Interval value too large: "+e),this.setInterval(o)):(this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval changed to: "+e),this.setInterval(e)):this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval value not changed."):(this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Invalid interval value."),this.setInterval(s))},i.prototype._getSettings=function(e){this._logger.debug(this._logTag,"#_getSettings()"),this._channel.trigger(new n(l))},i.prototype._installHandlers=function(){i.__super__._installHandlers.call(this),this._channel.on(c,this._getSettings,this),this._channel.on(u,this._onCheckStatusComplete,this),this._channel.reply(d,function(){return this._interval},this)};var a="check_status",o=600,s=180,l="clock:check_status.tick",c="clock:check_status.get_settings",u="net:check_status_complete",d="check_status_interval";t.clock.CheckStatusTimer=i}(i.ADB.core,t),function(e,t){"use strict";function i(e,t,n){i.__super__.constructor.call(this,e,t,r,a,n),this._doNotOverrideInterval=!1}var n=t.clock.Timer;e.extend(i,n),i.prototype._onCheckStatusComplete=function(e){e=e.data[o];this._logger.debug(this._logTag,"#_onCheckStatusComplete(interval="+e+")"),this._doNotOverrideInterval?this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval value not changed. (doNotOverrideInterval = true)"):e?e!=this._interval?(this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval changed to: "+e),this.setInterval(e)):this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval value not changed."):(this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Invalid interval value."),this.setInterval(a))},i.prototype._onUpdateReportingInterval=function(e){var t=e.data[o];this._doNotOverrideInterval=!!e.data[s],this._logger.debug(this._logTag,"#_onUpdateReportingInterval(interval="+t+", doNotOverrideInterval="+this._doNotOverrideInterval+")"),t?t!=this._interval?(this._logger.debug(this._logTag,"#_onUpdateReportingInterval() > Interval changed to: "+t),this.setInterval(t)):this._logger.debug(this._logTag,"#_onUpdateReportingInterval() > Interval value not changed."):(this._logger.warn(this._logTag,"#_onUpdateReportingInterval() > Invalid interval value."),this.setInterval(a))},i.prototype._installHandlers=function(){i.__super__._installHandlers.call(this),this._channel.on(c,this._onCheckStatusComplete,this),this._channel.on(l,this._onUpdateReportingInterval,this),this._channel.reply(o,function(){return this._interval},this)};var r="reporting",a=10,o="reporting_interval",s="do_not_override_interval",l="reporting:update_interval",c="net:check_status_complete";t.clock.ReportingTimer=i}(i.ADB.core,t),function(e,t){"use strict";function i(e,t,n){i.__super__.constructor.call(this,e,t,r,a,n)}var n=t.clock.Timer;e.extend(i,n);var r="idle",a=1800;t.clock.IdleTimer=i}(i.ADB.core,t),function(e,t){"use strict";function i(e,t,n){i.__super__.constructor.call(this,e,t,r,a,n)}var n=t.clock.Timer;e.extend(i,n);var r="flush_filter",a=.25;t.clock.FlushFilterTimer=i}(i.ADB.core,t),function(e){"use strict";function t(e,t,n){if(!e)throw new Error("Reference to the pluginManager object cannot be NULL");if(!t)throw new Error("Reference to the channel object cannot be NULL");if(!n)throw new Error("Reference to the logger object cannot be NULL");this._isDestroyed=!1,this._reportingTimer=new a(e,t,n),this._checkStatusTimer=new i(e,t,n),this._flushFilterTimer=new r(e,t,n),this._idleTimer=new o(e,t,n)}var i=e.clock.CheckStatusTimer,r=e.clock.FlushFilterTimer,a=e.clock.ReportingTimer,o=e.clock.IdleTimer;t.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._reportingTimer.destroy(),this._checkStatusTimer.destroy(),this._flushFilterTimer.destroy(),this._idleTimer.destroy())},e.clock.Clock=t}((i.ADB.core,t)),function(e){"use strict";function i(e,t){this.value=e,this.hint=t}function t(e){this.realm=e,this.data={}}i.HINT_SHORT="short",t.prototype.setField=function(e,t,n){this.data[e]=new i(t,n)},t.prototype._createAccessor=function(e,t,n){var i=this;return function(){return arguments.length&&(i[e]=arguments[0],i.setField(t,arguments[0],n)),i[e]}},e.model.Dao=t,e.model.DaoField=i}((i.ADB.core,t)),function(e,t){"use strict";function n(){var e;n.__super__.constructor.call(this,"asset"),this.adId=this._createAccessor("_adId","ad_id",null),this.sid=this._createAccessor("_sid","ad_sid",null),this.resolver=this._createAccessor("_resolver","resolver",null),this.podId=this._createAccessor("_podId","pod_id",null),this.podPosition=this._createAccessor("_podPosition","pod_position",null),this.podOffset=this._createAccessor("_podOffset","pod_offset",null),this.podName=this._createAccessor("_podName","pod_name",null),this.adLength=this._createAccessor("_adLength","ad_length",null),this.adName=this._createAccessor("_adName","ad_name",null),arguments.length&&arguments[0]instanceof n?(this.adId((e=arguments[0]).adId()),this.sid(e.sid()),this.resolver(e.resolver()),this.podId(e.podId()),this.podPosition(e.podPosition()),this.podOffset(e.podOffset()),this.podName(e.podName()),this.adLength(e.adLength()),this.adName(e.adName())):(this.adId(""),this.sid(""),this.resolver(""),this.podId(""),this.podPosition(""),this.podOffset(0),this.podName(""),this.adLength(0),this.adName(""))}var i=t.model.Dao;e.extend(n,i),t.model.AdDao=n}(i.ADB.core,t),function(e,t){"use strict";function n(){var e;n.__super__.constructor.call(this,"sc"),this.reportSuiteId=this._createAccessor("_reportSuiteId","rsid",null),this.trackingServer=this._createAccessor("_trackingServer","tracking_server",null),this.ssl=this._createAccessor("_ssl","ssl",r.HINT_SHORT),arguments.length&&arguments[0]instanceof n?(this.reportSuiteId((e=arguments[0]).reportSuiteId()),this.trackingServer(e.trackingServer()),this.ssl(e.ssl())):(this.reportSuiteId(""),this.trackingServer(""),this.ssl(0))}var i=t.model.Dao,r=t.model.DaoField;e.extend(n,i),t.model.AdobeAnalyticsDao=n}(i.ADB.core,t),function(e,t){"use strict";function n(){var e;n.__super__.constructor.call(this,"stream"),this.id=this._createAccessor("_id","chapter_id",null),this.sid=this._createAccessor("_sid","chapter_sid",null),this.name=this._createAccessor("_name","chapter_name",null),this.position=this._createAccessor("_position","chapter_pos",null),this.length=this._createAccessor("_length","chapter_length",null),this.offset=this._createAccessor("_offset","chapter_offset",null),arguments.length&&arguments[0]instanceof n?(this.id((e=arguments[0]).id()),this.sid(e.sid()),this.name(e.name()),this.position(e.position()),this.length(e.length()),this.offset(e.offset())):(this.id(""),this.sid(""),this.name(""),this.position(0),this.length(0),this.offset(0))}var i=t.model.Dao;e.extend(n,i),t.model.ChapterDao=n}(i.ADB.core,t),function(e,t){"use strict";function n(){var e,t;n.__super__.constructor.call(this,"asset"),this.type=this._createAccessor("_type","type",null),this.videoId=this._createAccessor("_videoId","video_id",null),this.publisher=this._createAccessor("_publisher","publisher",null),this.adData=this._createAccessor("_adData","ad_data",null),this.chapterData=this._createAccessor("_chapterData","chapter_data",null),this.length=this._createAccessor("_length","length",null),this.name=this._createAccessor("_name","name",null),arguments.length&&arguments[0]instanceof n?(this.type((t=arguments[0]).type()),this.name(t.name()),this.videoId(t.videoId()),this.publisher(t.publisher()),this.length(t.length()),e=t.adData()?new r(t.adData()):null,this.adData(e),t=t.chapterData()?new a(t.chapterData()):null,this.chapterData(t)):(this.type(""),this.name(""),this.videoId(""),this.publisher(""),this.length(0),this.adData(null),this.chapterData(null))}var i=t.model.Dao,r=t.model.AdDao,a=t.model.ChapterDao;e.extend(n,i),n.TYPE_AD="ad",n.TYPE_MAIN_CONTENT="main",t.model.AssetDao=n}(i.ADB.core,t),function(e,t){"use strict";function n(){var e;n.__super__.constructor.call(this,"event"),this.type=this._createAccessor("_type","type",null),this.duration=this._createAccessor("_duration","duration",null),this.playhead=this._createAccessor("_playhead","playhead",null),this.id=this._createAccessor("_id","id",null),this.source=this._createAccessor("_source","source",null),this.ts=this._createAccessor("_ts","ts",null),this.prevTs=this._createAccessor("_prevTs","prev_ts",null),arguments.length&&arguments[0]instanceof n?(this.type((e=arguments[0]).type()),this.duration(e.duration()),this.playhead(e.playhead()),this.id(e.id()),this.source(e.source()),this.ts(e.ts()),this.prevTs(e.prevTs())):(this.type(""),this.duration(0),this.playhead(0),this.id(""),this.source(""),this.ts(0),this.prevTs(-1))}var i=t.model.Dao;e.extend(n,i),n.EVENT_TYPE_AA_START="aa_start",n.EVENT_TYPE_AA_AD_START="aa_ad_start",n.EVENT_TYPE_START="start",n.EVENT_TYPE_RESUME="resume",n.EVENT_TYPE_CHAPTER_START="chapter_start",n.EVENT_TYPE_CHAPTER_COMPLETE="chapter_complete",n.EVENT_TYPE_CHAPTER_SKIP="chapter_skip",n.EVENT_TYPE_PLAY="play",n.EVENT_TYPE_PAUSE="pause",n.EVENT_TYPE_STALL="stall",n.EVENT_TYPE_BUFFER="buffer",n.EVENT_TYPE_BITRATE_CHANGE="bitrate_change",n.EVENT_TYPE_ERROR="error",n.EVENT_TYPE_COMPLETE="complete",n.EVENT_TYPE_SKIP="skip",n.EVENT_TYPE_END="end",t.model.EventDao=n}(i.ADB.core,t),function(e,t){"use strict";function n(){var e;n.__super__.constructor.call(this,"stream"),this.bitrate=this._createAccessor("_bitrate","bitrate",null),this.fps=this._createAccessor("_fps","fps",null),this.droppedFrames=this._createAccessor("_droppedFrames","dropped_frames",null),this.startupTime=this._createAccessor("_startup_time","startup_time",null),arguments.length&&arguments[0]instanceof n?(this.bitrate((e=arguments[0]).bitrate()),this.fps(e.fps()),this.droppedFrames(e.droppedFrames()),this.startupTime(e.startupTime()),this.isStartupTimeOverridden=e.isStartupTimeOverridden):(this.bitrate(0),this.fps(0),this.droppedFrames(0),this.startupTime(0),this.isStartupTimeOverridden=!1)}var i=t.model.Dao;e.extend(n,i),t.model.QoSDao=n}(i.ADB.core,t),function(e,t){"use strict";function n(){var e;n.__super__.constructor.call(this,"sp"),this.ovp=this._createAccessor("_ovp","ovp",null),this.sdk=this._createAccessor("_sdk","sdk",null),this.channel=this._createAccessor("_channel","channel",null),this.playerName=this._createAccessor("_playerName","player_name",null),this.libVersion=this._createAccessor("_libVersion","hb_version",null),this.apiLevel=this._createAccessor("_apiLevel","hb_api_lvl",null),arguments.length&&arguments[0]instanceof n?(this.ovp((e=arguments[0]).ovp()),this.sdk(e.sdk()),this.channel(e.channel()),this.playerName(e.playerName()),this.libVersion(e.libVersion()),this.apiLevel(e.apiLevel())):(this.ovp(r),this.sdk(r),this.channel(r),this.playerName(""),this.libVersion(""),this.apiLevel(0))}var i=t.model.Dao;e.extend(n,i);var r="unknown";t.model.ServiceProviderDao=n}(i.ADB.core,t),function(e,t){"use strict";function n(){n.__super__.constructor.call(this,"event"),this.sessionId=this._createAccessor("_sessionId","sid",null),arguments.length&&arguments[0]instanceof n?this.sessionId(arguments[0].sessionId()):this.sessionId(null)}var i=t.model.Dao;e.extend(n,i),t.model.SessionDao=n}(i.ADB.core,t),function(e,t){"use strict";function n(){n.__super__.constructor.call(this,"stream"),this.type=this._createAccessor("_type","type",null),arguments.length&&arguments[0]instanceof n?this.type(arguments[0].type()):this.type(null)}var i=t.model.Dao;e.extend(n,i),t.model.StreamDao=n}(i.ADB.core,t),function(e,t){"use strict";function n(){var e;n.__super__.constructor.call(this,"user"),this.analyticsVisitorId=this._createAccessor("_analyticsVisitorId","aid",null),this.marketingCloudVisitorId=this._createAccessor("_marketingCloudVisitorId","mid",null),this.visitorId=this._createAccessor("_visitorId","id",null),arguments.length&&arguments[0]instanceof n?(this.analyticsVisitorId((e=arguments[0]).analyticsVisitorId()),this.marketingCloudVisitorId(e.marketingCloudVisitorId()),this.visitorId(e.visitorId())):(this.analyticsVisitorId(null),this.marketingCloudVisitorId(null),this.visitorId(null))}var i=t.model.Dao;e.extend(n,i),t.model.UserDao=n}(i.ADB.core,t),function(e,t){"use strict";function n(){var e;n.__super__.constructor.call(this,"aam"),this.audienceManagerBlob=this._createAccessor("_audienceManagerBlob","blob",null),this.audienceManagerLocationHint=this._createAccessor("_audienceManagerLocationHint","loc_hint",null),arguments.length&&arguments[0]instanceof n?(this.audienceManagerBlob((e=arguments[0]).audienceManagerBlob()),this.audienceManagerLocationHint(e.audienceManagerLocationHint())):(this.audienceManagerBlob(null),this.audienceManagerLocationHint(null))}var i=t.model.Dao;e.extend(n,i),t.model.AudienceManagerDao=n}(i.ADB.core,t),function(e,t){"use strict";var a=e.ObjectUtils,o=t.model.EventDao,s=t.model.AssetDao,l=t.model.StreamDao,c=t.model.QoSDao;t.model.TrackItem=function(e,t,n,i,r){this.eventData=new o,this.eventData.type(t),this.eventData.duration(0),this.eventData.ts((new Date).getTime()),this.eventData.playhead(n),this.assetData=new s(e._assetData),this.streamData=new l(e._streamData),this.qosData=new c(e._qosData),this.cuserData=a.clone(e._cuserData),this.meta=i,this.callback=r,this.filterReport=!0}}(i.ADB.va.utils,t),function(e,t){"use strict";var o=e.ObjectUtils,s=t.model.EventDao,l=t.model.AssetDao,c=t.model.StreamDao,u=t.model.QoSDao;t.model.CUserDao,t.model.Report=function(e,t,n,i,r,a){this.adobeAnalyticsData=e,this.userData=t,this.aamData=n,this.serviceProviderData=i,this.sessionData=r,this.eventData=new s(a.eventData),this.assetData=new l(a.assetData),this.streamData=new c(a.streamData),this.qosData=new u(a.qosData),this.cuserData=o.clone(a.cuserData),this.meta=o.clone(a.meta),this.callback=a.callback,this.filterReport=a.filterReport}}(i.ADB.va.utils,t),function(e){"use strict";function t(){}t.prototype.serializeReport=function(e){},t.prototype.serializeDao=function(e){},t.prototype.serializeMap=function(e){},t.prototype.serializeNumber=function(e,t,n,i){},t.prototype.serializeString=function(e,t,n,i){},e.model.ISerializer=t}(t),function(e,t){"use strict";function n(e){if(!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e}var s=t.model.Dao,a=t.model.DaoField,i=t.model.ISerializer;e.extend(n,i),n.prototype.serializeReport=function(e){var t=[];return t.push(this.serializeDao(e.adobeAnalyticsData)),t.push(this.serializeDao(e.userData)),t.push(this.serializeDao(e.aamData)),t.push(this.serializeMap(e.cuserData,"cuser")),t.push(this.serializeDao(e.serviceProviderData)),t.push(this.serializeDao(e.sessionData)),t.push(this.serializeDao(e.eventData)),t.push(this.serializeDao(e.assetData)),t.push(this.serializeDao(e.streamData)),t.push(this.serializeDao(e.qosData)),t.push(this.serializeMap(e.meta,"meta")),{serializedOutput:t.filter(function(e){return!!e}).join("&"),callback:e.callback}},n.prototype.serializeDao=function(e){return this._processDao(e).filter(function(e){return!!e}).join("&")},n.prototype.serializeMap=function(e,t){var n,i=[],r=t||"meta";for(n in e)e.hasOwnProperty(n)&&e[n]&&i.push("s:"+r+":"+n+"="+window.encodeURIComponent(e[n]));return i.join("&")},n.prototype.serializeNumber=function(e,t,n,i){var r=o;return null==t||isNaN(t)?null:(r=i===a.HINT_SHORT?c:r)+":"+n+":"+e+"="+Math.floor(t)},n.prototype.serializeString=function(e,t,n,i){return t?r+":"+n+":"+e+"="+window.encodeURIComponent(t):null},n.prototype._processDao=function(e){var t,n=[];for(t in e.data)if(e.data.hasOwnProperty(t)){var i=e.data[t],r=i.value,a=i.hint,o=null,i=e.realm;if(null==r)continue;"number"==typeof r?o=this.serializeNumber(t,r,i,a):"string"==typeof r?o=this.serializeString(t,r,i,a):r instanceof s?o=this.serializeDao(r):this._logger.warn(l,"#_processDao() > Unable to serialize DAO. Field: "+t+". Value: "+r+"."),o&&n.push(o)}return n};var l="ah::QuerystringSerializer",o="l",c="h",r="s";t.model.QuerystringSerializer=n}(i.ADB.core,t),function(e){"use strict";function t(e,t){if(!e)throw new Error("Reference to the data object cannot be NULL");if(this._data=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t}t.prototype.parse=function(){var e,t,n,i;window.DOMParser?r=(new window.DOMParser).parseFromString(this._data,"text/xml"):((r=new window.ActiveXObject("Microsoft.XMLDOM")).async=!1,r.loadXML(this._data)),(a=parseInt(r.getElementsByTagName("trackingInterval")[0].childNodes[0].nodeValue,10))&&(e=a),(a=parseInt(r.getElementsByTagName("setupCheckInterval")[0].childNodes[0].nodeValue,10))&&(t=a),(a=parseInt(r.getElementsByTagName("trackExternalErrors")[0].childNodes[0].nodeValue,10))&&(n=1==a),r.getElementsByTagName("trackingDisabled")[0]&&(i=1==(a=parseInt(r.getElementsByTagName("trackingDisabled")[0].childNodes[0].nodeValue,10)));var r=!r.getElementsByTagName("nielsenEnabled")[0]||1==(a=parseInt(r.getElementsByTagName("nielsenEnabled")[0].childNodes[0].nodeValue,10)),a={};return a[s]=e,a[l]=t,a[c]=n,a[d]=i,a[u]=r,this._logger.debug(o,"#parse() > Obtained configuration settings."),a};var o="ah::SettingsParser",s="reporting_interval",l="check_status_interval",c="track_external_errors",u="nielsen_enabled",d="tracking_disabled";e.network.SettingsParser=t}((i.ADB.core,t)),function(e,t){"use strict";function n(e,t){if(this._trackingServer=null,this._checkStatusServer=null,this._publisher=null,this._isConfigured=!1,this._isDestroyed=!1,this._quietMode=!1,this._visitorOptedOut=!1,this._prevReportSent=null,!e)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._serializer=new i(t),this._installEventListeners()}var a=e.Event,o=e.URLRequestMethod,s=e.URLRequest,l=e.URLLoader,c=t.network.SettingsParser,i=t.model.QuerystringSerializer;n.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(u,"#destroy()"),this._uninstallEventListeners())},n.prototype._onApiConfig=function(e){e=e.data;this._logger.debug(u,"#_onApiConfig(sb_server="+e[r]+", check_status_server="+e[d]+", publisher="+e[h]+", quiet_mode="+e[p]+", ssl="+e[_]+")"),this._trackingServer=this._updateRequestProtocol(e[r],e[_]),this._checkStatusServer=this._updateRequestProtocol(e[d],e[_]),this._publisher=e[h],this._quietMode=e[p],this._isConfigured=!0},n.prototype._onUpdateVisitorOptOut=function(e){e=e.data;this._logger.debug(u,"#_onUpdateVisitorOptOut(visitor_opt_out="+e[g]+")"),this._visitorOptedOut=e[g]},n.prototype._onFilterReportAvailable=function(e){var t,n,i,r=e.data;this._isConfigured?(e=r[f],t=this._serializer.serializeReport(e),r=this._trackingServer+"/?"+t.serializedOutput,this._prevReportSent&&this._prevReportSent.eventData&&e.eventData&&this._prevReportSent.eventData.playhead==e.eventData.playhead&&this._prevReportSent.eventData.ts==e.eventData.ts&&this._prevReportSent.eventData.prevTs==e.eventData.prevTs&&this._prevReportSent.eventData.type==e.eventData.type?this._logger.debug(u,"#_onFilterReportAvailable() > Duplicate heartbeat report not sent for URL:\n"+r):(this._prevReportSent=e,r=new s(r,o.GET),this._logger.debug(u,"#_onFilterReportAvailable() > "+r.url),(n=this)._quietMode||this._visitorOptedOut||((i=new l).addEventListener(a.SUCCESS,function(e){i.close(),t.callback&&t.callback.call(null)},this),i.addEventListener(a.ERROR,function(e){i.close(),n._logger.warn(u,"#_onFilterReportAvailable() > Failed to send heartbeat report."),t.callback&&t.callback.call(null)},this),i.load(r)))):this._logger.warn(u,"#_onFilterReportAvailable() > Unable to send request: not configured.")},n.prototype._onClockCheckStatusTick=function(e){var t,n,i,r;this._isConfigured?this._publisher?(i=(t=this)._publisher.replace(/[^a-zA-Z0-9]+/,"-").toLocaleLowerCase(),n=this._checkStatusServer+i+".xml?r="+(new Date).getTime(),i=new s(n,o.GET),(r=new l).addEventListener(a.SUCCESS,function(e){e.data&&((e=new c(e.data.response,t._logger).parse())?t._channel.trigger(new a(E,e)):t._logger.warn(u,"#_onClockCheckStatusTick() > Failed to parse the config. settings.")),r.close()},this),r.addEventListener(a.ERROR,function(e){t._logger.warn(u,"#_onClockCheckStatusTick() > Failed to obtain the config. settings."),r.close()},this),this._logger.debug(u,"#_onClockCheckStatusTick() > Get new settings from: "+n),r.load(i)):this._logger.warn(u,"#_onClockCheckStatusTick() > Publisher is NULL."):this._logger.warn(u,"#_onClockCheckStatusTick() > Unable to send request: not configured.")},n.prototype._updateRequestProtocol=function(e,t){return 0===e.indexOf("http://")?e=e.slice(7):0===e.indexOf("https://")&&(e=e.slice(8)),t?"https://"+e:"http://"+e},n.prototype._installEventListeners=function(){this._channel.on(v,this._onApiConfig,this),this._channel.on(m,this._onUpdateVisitorOptOut,this),this._channel.on(y,this._onFilterReportAvailable,this),this._channel.on(S,this._onClockCheckStatusTick,this)},n.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)};var u="ah::Network",r="tracking_server",d="check_status_server",h="publisher",p="quiet_mode",_="ssl",f="report",g="visitor_opt_out",v="api:config",m="api:update_visitor_optout",y="filter:data_available",S="clock:check_status.tick",E="net:check_status_complete";t.network.Network=n}(i.ADB.core,t),function(e,t){"use strict";function n(e,t){if(!e)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._isDestroyed=!1,this._isBufferingInProgress=!1,this._reportBuffer={},this._tsHistory={},this._workQueue=new r,this._installEventListeners()}function l(i){var r=[];return i.forEach(function(e){var t,n;e.eventData.type()!=u.EVENT_TYPE_PLAY||e.eventData.duration()>g?r.push(e):0==e.eventData.duration()&&e.assetData.type()==d.TYPE_MAIN_CONTENT&&(n=[],i.forEach(function(e){e.eventData.type()!=u.EVENT_TYPE_PLAY&&e.eventData.type()!=u.EVENT_TYPE_BUFFER&&e.eventData.type()!=u.EVENT_TYPE_START||n.push(e)}),(t=n).indexOf(e)==t.length-1&&r.push(e))}),r}var i=e.radio.Command,r=e.radio.CommandQueue,c=e.Event,u=t.model.EventDao,d=t.model.AssetDao;n.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(y,"#destroy()"),this._uninstallEventListeners(),this.clear())},n.prototype.clear=function(){this._logger.debug(y,"#clear()"),this._workQueue.cancelAllCommands(),this._reportBuffer={},this._tsHistory={},this._isBufferingInProgress=!1},n.prototype.flush=function(){this._workQueue.addCommand(new i(this._flushBufferReport,this))},n.prototype._bufferReport=function(e){var t;this._isDestroyed||((t=e[p])&&(e=t.sessionData.sessionId(),this._reportBuffer[e]=this._reportBuffer[e]||[],this._reportBuffer[e].push(t)),this._isBufferingInProgress||(this._isBufferingInProgress=!0,(t={})[s]=!0,t[_]=1,this._channel.command(f,t)))},n.prototype._flushBufferReport=function(){if(!this._isDestroyed){var e,a=this;for(e in this._reportBuffer)if(this._reportBuffer.hasOwnProperty(e)){var t=l(function(e){var t=-1,n=-1,i=[];return e.forEach(function(e){e.eventData.type()==u.EVENT_TYPE_START?e.assetData.type()==d.TYPE_MAIN_CONTENT?-1==t?t=i.push(e)-1:(e.eventData.prevTs(-1),i[t]=e):-1==n?n=i.push(e)-1:(e.eventData.prevTs(-1),i[n]=e):i.push(e)}),i}(function(e){var t=[];return e&&e.forEach(function(e){(e.eventData.type()!=u.EVENT_TYPE_PAUSE&&e.eventData.type()!=u.EVENT_TYPE_STALL&&e.eventData.type()!=u.EVENT_TYPE_BUFFER||!e.filterReport||e.eventData.duration()>v)&&t.push(e)}),t}(this._reportBuffer[e])));!function(e){if(e)for(var t=0;t<e.length;t++){var n=e[t],i=n.sessionData.sessionId();a._tsHistory[i]=a._tsHistory[i]||{};var r=n.eventData.type()+"."+(n.assetData.type()==d.TYPE_AD?n.assetData.adData().adId():n.assetData.videoId());a._tsHistory[i].hasOwnProperty(r)&&n.eventData.prevTs(a._tsHistory[i][r]),a._tsHistory[i][r]=n.eventData.ts()}}(t);for(var n=0;n<t.length;n++){var i=t[n],r={};r[p]=i,this._channel.trigger(new c(h,r))}}this._reportBuffer={};var o=this._channel.request(m),s=this._tsHistory[o]||{};this._tsHistory={},this._tsHistory[o]=s,this._isBufferingInProgress=!1}},n.prototype._onContextReportAvailable=function(e){e=e.data;this._workQueue.addCommand(new i(this._bufferReport,this,[e]))},n.prototype._onClockFlushFilterTick=function(e){this.flush()},n.prototype._installEventListeners=function(){this._channel.on(a,this._onContextReportAvailable,this),this._channel.on(o,this._onClockFlushFilterTick,this)},n.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)};var a="context:report_available",h="filter:data_available",o="clock:flush_filter.tick",s="reset",p="report",_="repeat_count",f="clock:flush_filter.resume",g=250,v=250,m="session_id",y="ah::ReportFilter";t.filter.ReportFilter=n}(i.ADB.core,t),function(e,t){"use strict";function n(e,t){this._onFail={fn:e,ctx:t}}var i=e.ErrorInfo;n.prototype.validateFields=function(e,t){if(!e)return this._fail("Data cannot be null");if(t)for(var n=0;n<t.length;n++){var i=t[n];switch(i){case"videoId":if(!e.hasOwnProperty("videoId"))return this._fail("The ID for the main video must be specified.");if("string"!=typeof e.videoId)return this._fail("The ID for the main video must be a String.");if(""===e.videoId)return this._fail("The ID for the main video cannot be an empty string.");break;case"streamType":if(!e.hasOwnProperty("streamType"))return this._fail("The stream type for the main video must be specified.");if("string"!=typeof e.streamType)return this._fail("The stream type for the main video must be a String.");if(""===e.streamType)return this._fail("The stream type for the main video cannot be an empty string.");break;case"videoLength":if(!e.hasOwnProperty("videoLength"))return this._fail("The length of the main video must be specified.");if("number"!=typeof e.videoLength)return this._fail("The length of the main video must be a Number.");if(isNaN(e.videoLength))return this._fail("The length of the main video cannot be NaN.");break;case"playhead":if(!e.hasOwnProperty("playhead"))return this._fail("The playhead for the main video must be specified.");if("number"!=typeof e.playhead)return this._fail("The playhead for the main video must be a Number.");if(isNaN(e.playhead))return this._fail("The playhead for the main video cannot be NaN.");break;case"playerName":if(!e.hasOwnProperty("playerName"))return this._fail("The player name for the main video must be specified.");if("string"!=typeof e.playerName)return this._fail("The player name for the main video must be a String.");if(""===e.playerName)return this._fail("The player name for the main video cannot be an empty string.");break;case"rsid":if(!e.hasOwnProperty("rsid"))return this._fail("account (rsid) is required and has to be set in the AppMeasurement instance.");if("string"!=typeof e.rsid)return this._fail("account (rsid) of the AppMeasurement instance must be a String.");if(""===e.rsid)return this._fail("account (rsid) of the AppMeasurement instance  cannot be an empty string.");break;case"trackingServer":if(!e.hasOwnProperty("trackingServer"))return this._fail("trackingServer is required and has to be set in the AppMeasurement instance.");if("string"!=typeof e.trackingServer)return this._fail("trackingServer of the AppMeasurement instance must be a String.");if(""===e.trackingServer)return this._fail("trackingServer of the AppMeasurement instance cannot be an empty string.");break;case"podPlayerName":if(!e.hasOwnProperty("podPlayerName"))return this._fail("The player name for the ad-break must be specified.");if("string"!=typeof e.podPlayerName)return this._fail("The player name for the ad-break must be a String.");if(""===e.podPlayerName)return this._fail("The player name for the ad-break cannot be an empty string.");break;case"podPosition":if(!e.hasOwnProperty("podPosition"))return this._fail("Position (index) of the ad-break must be specified.");if("number"!=typeof e.podPosition)return this._fail("Position (index) of the ad-break must be a Number.");if(isNaN(e.podPosition))return this._fail("Position (index) of the ad-break cannot be NaN.");break;case"adId":if(!e.hasOwnProperty("adId"))return this._fail("The ad ID must be specified.");if("string"!=typeof e.adId)return this._fail("The ad ID must be a String.");if(""===e.adId)return this._fail("The ad ID cannot be an empty string.");break;case"adPosition":if(!e.hasOwnProperty("adPosition"))return this._fail("Position (index) of the ad must be specified.");if("number"!=typeof e.adPosition)return this._fail("Position (index) of the ad must be a Number.");if(isNaN(e.adPosition))return this._fail("Position (index) of the ad cannot be NaN.");break;case"chapterPosition":if(!e.hasOwnProperty("chapterPosition"))return this._fail("Position (index) of the chapter must be specified.");if("number"!=typeof e.chapterPosition)return this._fail("Position (index) of the chapter must be a Number.");if(isNaN(e.chapterPosition))return this._fail("Position (index) of the chapter cannot be NaN.");break;case"chapterOffset":if(!e.hasOwnProperty("chapterOffset"))return this._fail("Chapter start-time (offset) must be specified.");if("number"!=typeof e.chapterOffset)return this._fail("Chapter start-time (offset) must be a Number.");if(isNaN(e.chapterOffset))return this._fail("Chapter start-time (offset) cannot be NaN.");break;case"chapterLength":if(!e.hasOwnProperty("chapterLength"))return this._fail("The length of the chapter must be specified.");if("number"!=typeof e.chapterLength)return this._fail("The length of the chapter must be a Number.");if(isNaN(e.chapterLength))return this._fail("The length of the chapter cannot be NaN.");break;default:return this._fail("Unable to validate unknown parameter: "+i)}}return!0},n.prototype._fail=function(e){e=new i("Invalid input data",e);return this._onFail.fn&&this._onFail.fn.call(this._onFail.ctx,e),!1},t.context.InputDataValidator=n}(i.ADB.va,t),function(e){"use strict";function t(e,t){if(!t)throw new Error("Reference to the logger object cannot be NULL");if(this._logger=t,!e)throw new Error("Reference to the context object cannot be NULL");this._context=e}var n=e.model.Report;t.prototype.createReportForItem=function(e){return this._logger.debug(i,"Creating report for item: "+e.eventData.type()),new n(this._context._adobeAnalyticsData,this._context._userData,this._context._aamData,this._context._serviceProviderData,this._context._sessionData,e)};var i="ah::ReportFactory";e.context.ReportFactory=t}((i.ADB.core,t)),function(e,t,n){"use strict";function i(e,t){if(!e)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._lastInBandItem=null,this._stashedLastInBandItem=null,this._stashedMainMetadata=null,this._autoComputedStartupTime=0,this._reportingInterval=de,this._assetData=null,this._streamData=null,this._qosData=null,this._sessionData=null,this._cuserData=null,this._adobeAnalyticsData=new l,this._serviceProviderData=new c,this._userData=new u,this._aamData=new d,this._isTrackingSessionActive=!1,this._isVideoComplete=!1,this._isDestroyed=!1,this._doNotOverrideEventDuration=!1,this._reportFactory=new y(this,this._logger),this._inputDataValidator=new S(function(e){this._logger.error(E,e.getMessage()+" | "+e.getDetails()),this._channel.trigger(new o(T,e))},this),this._trackExternalErrors=!0,this._installEventListeners()}var r=t.md5,a=t.ObjectUtils,o=e.Event,s=n.model.SessionDao,l=n.model.AdobeAnalyticsDao,c=n.model.ServiceProviderDao,u=n.model.UserDao,d=n.model.AudienceManagerDao,h=n.model.EventDao,p=n.model.AssetDao,_=n.model.StreamDao,f=n.model.QoSDao,g=n.model.AdDao,v=n.model.ChapterDao,m=n.model.TrackItem,y=n.context.ReportFactory,S=n.context.InputDataValidator;i.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(E,"#destroy()"),this._uninstallEventListeners())},i.prototype._onApiAnalyticsStart=function(e){this._logger.debug(E,"#_onApiAnalyticsStart()");e=e.data;this._checkCall("_onApiAnalyticsStart")&&this._inputDataValidator.validateFields(e,["playhead"])&&(this._userData.visitorId(e.vid),this._userData.analyticsVisitorId(e.aid),this._userData.marketingCloudVisitorId(e.mid),this._aamData.audienceManagerBlob(e.blob),this._aamData.audienceManagerLocationHint(e.loc_hint),e.customerIDs&&(this._cuserData=e.customerIDs),this._updateQoSInfo(e),(e=new m(this,h.EVENT_TYPE_AA_START,e.playhead,null,e._eventData[k])).assetData.adData(null),e.assetData.type(p.TYPE_MAIN_CONTENT),this._cuserData=null,this._sendHit(e))},i.prototype._onApiAnalyticsAdStart=function(e){this._logger.debug(E,"#_onApiAnalyticsAdStart()");e=e.data;this._checkCall("_onApiAnalyticsAdStart")&&this._inputDataValidator.validateFields(e,["playhead"])&&(this._updateQoSInfo(e),e=new m(this,h.EVENT_TYPE_AA_AD_START,e.playhead,null,e._eventData[k]),this._sendHit(e))},i.prototype._onApiVideoLoad=function(e){e=e.data;this._logger.debug(E,"#_onApiVideoLoad(rsid="+e.rsid+", aa_trackingServer="+e.trackingServer+")"),this._resetInternalState(),this._inputDataValidator.validateFields(e,["rsid","trackingServer"])&&(this._sessionData.sessionId(this._generateSessionId()),this._isTrackingSessionActive=!0)},i.prototype._onApiVideoUnload=function(e){this._logger.debug(E,"#_onApiVideoUnload()"),this._isTrackingSessionActive?this._isTrackingSessionActive=!1:this._logger.debug(E,"#_onApiVideoUnload() > No active tracking session.")},i.prototype._onApiVideoStart=function(e){var t=e.data;this._logger.debug(E,"#_onApiVideoStart(id="+t.videoId+", name="+t.videoName+", length="+t.videoLength+", type="+t.streamType+", playerName="+t.playerName+")"),this._checkCall("_onApiVideoStart")&&this._inputDataValidator.validateFields(t,["videoId","streamType","videoLength","playhead","playerName"])&&(this._lastInBandItem=null,this._stashedLastInBandItem=null,this._adobeAnalyticsData.reportSuiteId(t.rsid),this._adobeAnalyticsData.trackingServer(t.trackingServer),this._adobeAnalyticsData.ssl(Number(t.useSsl)),this._serviceProviderData.ovp(t.ovp),this._serviceProviderData.sdk(t.sdk),this._serviceProviderData.channel(t.channel),this._serviceProviderData.libVersion(t.version),this._serviceProviderData.apiLevel(t.apiLvl),this._serviceProviderData.playerName(t.playerName),this._assetData.adData(null),this._assetData.chapterData(null),this._assetData.videoId(t.videoId),this._assetData.length(t.videoLength),this._assetData.type(p.TYPE_MAIN_CONTENT),this._assetData.publisher(t.publisher),this._assetData.name(t.videoName),this._streamData.type(t.streamType),this._updateQoSInfo(t),e=t.metaNielsen?a.merge(t.metaVideo,t.metaNielsen):t.metaVideo,t=new m(this,h.EVENT_TYPE_START,t.playhead,e,t._eventData[k]),this._sendHit(t))},i.prototype._onApiVideoResume=function(e){e=e.data;this._logger.debug(E,"#_onApiVideoResume(id="+e.videoId+", name="+e.videoName+", length="+e.videoLength+", type="+e.streamType+", playerName="+e.playerName+")"),this._checkCall("_onApiVideoResume")&&this._inputDataValidator.validateFields(e,["videoId","streamType","videoLength","playhead","playerName"])&&(this._assetData.videoId(e.videoId),this._assetData.length(e.videoLength),this._assetData.type(p.TYPE_MAIN_CONTENT),this._assetData.name(e.videoName),this._streamData.type(e.streamType),e=new m(this,h.EVENT_TYPE_RESUME,e.playhead,null,e._eventData[k]),this._sendHit(e))},i.prototype._onApiVideoSessionEnd=function(e){this._logger.debug(E,"#_onApiVideoSessionEnd()");e=e.data;this._checkCall("_onApiVideoSessionEnd")&&this._inputDataValidator.validateFields(e,["playhead"])&&((e=new m(this,h.EVENT_TYPE_END,e.playhead,null,e._eventData[k])).assetData.adData(null),e.assetData.type(p.TYPE_MAIN_CONTENT),this._sendHit(e))},i.prototype._onApiVideoComplete=function(e){this._logger.debug(E,"#_onApiVideoComplete()");e=e.data;this._checkCall("_onApiVideoComplete")&&(e=new m(this,h.EVENT_TYPE_COMPLETE,this._assetData.length(),null,e._eventData[k]),this._sendHit(e),this._isVideoComplete=!0)},i.prototype._onApiVideoSkip=function(e){this._logger.debug(E,"#_onApiVideoSkip()");e=e.data;this._checkCall("_onApiVideoSkip")&&(e=new m(this,h.EVENT_TYPE_SKIP,e.playhead,null,e._eventData[k]),this._sendHit(e),this._isVideoComplete=!0)},i.prototype._onApiPlay=function(e){this._logger.debug(E,"#_onApiPlay()");e=e.data;this._checkCall("_onApiPlay")&&this._inputDataValidator.validateFields(e,["playhead"])&&(this._updateQoSInfo(e),e=new m(this,h.EVENT_TYPE_PLAY,e.playhead,null,e._eventData[k]),this._sendHit(e))},i.prototype._onApiPause=function(e){this._logger.debug(E,"#_onApiPause()");var t=e.data;this._checkCall("_onApiPause")&&this._inputDataValidator.validateFields(t,["playhead"])&&(this._updateQoSInfo(t),e=t.playheadStalled?h.EVENT_TYPE_STALL:h.EVENT_TYPE_PAUSE,e=new m(this,e,t.playhead,null,t._eventData[k]),t._eventData.hasOwnProperty(M)&&(e.filterReport=t._eventData[M]),this._sendHit(e))},i.prototype._onApiBufferStart=function(e){this._logger.debug(E,"#_onApiBufferStart()");e=e.data;this._checkCall("_onApiBufferStart")&&this._inputDataValidator.validateFields(e,["playhead"])&&(this._updateQoSInfo(e),e=new m(this,h.EVENT_TYPE_BUFFER,e.playhead,null,e._eventData[k]),this._sendHit(e))},i.prototype._onApiAdBreakStart=function(e){this._logger.debug(E,"#_onApiAdBreakStart()");e=e.data;this._checkCall("_onApiAdBreakStart")&&this._inputDataValidator.validateFields(e,["playhead"])&&(this._flushLastInbandItem(e),this._updateLastInbandItemToBuffering())},i.prototype._onApiAdBreakComplete=function(e){this._logger.debug(E,"#_onApiAdBreakComplete()");e=e.data;this._checkCall("_onApiAdBreakComplete")&&this._inputDataValidator.validateFields(e,["playhead"])&&(this._flushLastInbandItem(e),this._restoreLastInbandItem())},i.prototype._onApiAdStart=function(e){var t=e.data;this._logger.debug(E,"#_onApiAdStart(id="+t.adId+", player_name="+t.podPlayerName+", parent_name="+this._assetData.videoId()+", pod_pos="+t.adPosition+")"),this._checkCall("_onApiAdStart")&&this._inputDataValidator.validateFields(t,["playhead","podPosition","podPlayerName","adId","adPosition"])&&((e=new g).adId(t.adId),e.adName(t.adName),e.adLength(t.adLength),e.resolver(t.podPlayerName),e.podId(r(this._assetData.videoId())+"_"+t.podPosition),e.podPosition(t.adPosition+""),e.podName(t.podName),e.podOffset(t.podSecond),e.sid(this._generateSessionId()),this._assetData.adData(e),this._assetData.type(p.TYPE_AD),this._updateQoSInfo(t),e=a.merge(t.metaVideo,t.metaAd),e=t.metaNielsen?a.merge(e,t.metaNielsen):e,e=t.metaAdNielsen?a.merge(e,t.metaAdNielsen):e,e=new m(this,h.EVENT_TYPE_START,t.playhead,e,t._eventData[k]),this._sendHit(e),this._restoreLastInbandItem(),t.adGranularTracking&&(t=t.adTrackingInterval||this._reportingInterval,this._updateReportingInterval(t,!0)))},i.prototype._onApiAdComplete=function(e){this._logger.debug(E,"#_onApiAdComplete()");e=e.data;this._checkCall("_onApiAdComplete")&&this._inputDataValidator.validateFields(e,["playhead"])&&(this._assetData.type()==p.TYPE_AD?(this._updateQoSInfo(e),e=new m(this,h.EVENT_TYPE_COMPLETE,e.playhead,null,e._eventData[k]),this._sendHit(e),this._updateLastInbandItemToBuffering(),this._assetData.adData(null),this._assetData.type(p.TYPE_MAIN_CONTENT),this._updateReportingInterval(this._reportingInterval,!1)):this._logger.warn(E,"#_onApiAdComplete() > Ignoring the ad complete event, because we are no longer in an ad."))},i.prototype._onApiAdSkip=function(e){this._logger.debug(E,"#_onApiAdSkip()");e=e.data;this._checkCall("_onApiAdSkip")&&this._inputDataValidator.validateFields(e,["playhead"])&&(this._assetData.type()==p.TYPE_AD?(this._updateQoSInfo(e),e=new m(this,h.EVENT_TYPE_SKIP,e.playhead,null,e._eventData[k]),this._sendHit(e),this._updateLastInbandItemToBuffering(),this._assetData.adData(null),this._assetData.type(p.TYPE_MAIN_CONTENT),this._updateReportingInterval(this._reportingInterval,!1)):this._logger.warn(E,"#_onApiAdSkip() > Ignoring the ad skip event, because we are no longer in an ad."))},i.prototype._onApiChapterStart=function(e){var t=e.data;this._logger.debug(E,"#_onApiChapterStart(name="+t.chapterName+", length="+t.chapterLength+", position="+t.chapterPosition+", chapter_offset="+t.chapterOffset+")"),this._checkCall("_onApiChapterStart")&&this._inputDataValidator.validateFields(t,["playhead","chapterPosition","chapterOffset","chapterLength"])&&((e=new v).id(r(this._assetData.videoId())+"_"+t.chapterPosition),e.name(t.chapterName),e.length(t.chapterLength),e.position(t.chapterPosition),e.offset(t.chapterOffset),e.sid(this._generateSessionId()),this._assetData.chapterData(e),this._updateQoSInfo(t),e=a.merge(t.metaVideo,t.metaChapter),(t=new m(this,h.EVENT_TYPE_CHAPTER_START,t.playhead,e,t._eventData[k])).assetData.adData(null),t.assetData.type(p.TYPE_MAIN_CONTENT),this._sendHit(t))},i.prototype._onApiChapterComplete=function(e){this._logger.debug(E,"#_onApiChapterComplete()");e=e.data;this._checkCall("_onApiChapterComplete")&&this._inputDataValidator.validateFields(e,["playhead"])&&(this._assetData.chapterData()?(this._updateQoSInfo(e),(e=new m(this,h.EVENT_TYPE_CHAPTER_COMPLETE,e.playhead,null,e._eventData[k])).assetData.adData(null),e.assetData.type(p.TYPE_MAIN_CONTENT),this._sendHit(e),this._assetData.chapterData(null)):this._logger.warn(E,"#_onApiChapterComplete() > Ignoring the chapter complete event, because we are no longer in a chapter."))},i.prototype._onApiChapterSkip=function(e){this._logger.debug(E,"#_onApiChapterSkip()");e=e.data;this._checkCall("_onApiChapterSkip")&&this._inputDataValidator.validateFields(e,["playhead"])&&(this._assetData.chapterData()?(this._updateQoSInfo(e),(e=new m(this,h.EVENT_TYPE_CHAPTER_SKIP,e.playhead,null,e._eventData[k])).assetData.adData(null),e.assetData.type(p.TYPE_MAIN_CONTENT),this._sendHit(e),this._assetData.chapterData(null)):this._logger.warn(E,"#_onApiChapterSkip() > Ignoring the chapter skip event, because we are no longer in a chapter."))},i.prototype._onApiBitrateChange=function(e){this._logger.debug(E,"#_onApiBitrateChange()");e=e.data;this._checkCall("_onApiBitrateChange")&&this._inputDataValidator.validateFields(e,["playhead"])&&(this._updateQoSInfo(e),e=new m(this,h.EVENT_TYPE_BITRATE_CHANGE,e.playhead,null,e._eventData[k]),this._sendHit(e))},i.prototype._onApiTrackError=function(e){var t=e.data;this._logger.debug(E,"#_onApiTrackError(source="+t._eventData.source+", err_id="+t._eventData.error_id+")"),this._isTrackingSessionActive?!this._trackExternalErrors&&t._eventData.source!==b||(this._updateQoSInfo(t),(e=new m(this,h.EVENT_TYPE_ERROR,0,null,t._eventData[k])).eventData.id(t._eventData.error_id),e.eventData.source(t._eventData.source),this._sendHit(e)):this._logger.warn(E,"#_onApiTrackError() > No active tracking session.")},i.prototype._onApiTrackInternalError=function(e){var t=e.data;this._logger.debug(E,"#_onApiTrackInternalError(source="+t.source+", err_id="+t.error_id+")"),this._updateQoSInfo(t);e=new m(this,h.EVENT_TYPE_ERROR,0);e.eventData.id(t.error_id),e.eventData.source(t.source),this._sendHit(e)},i.prototype._onApiQuantumEnd=function(e){this._logger.debug(E,"#_onApiQuantumEnd(interval="+this._channel.request(C)+")");var t=e.data;this._checkCall("_onApiQuantumEnd")&&this._inputDataValidator.validateFields(t,["playhead"])&&((e=this._lastInBandItem)&&(this._updateQoSInfo(t),(t=new m(this,e.eventData.type(),t.playhead,e.meta,e.callback)).filterReport=e.filterReport,this._sendHit(t,!0)))},i.prototype._onNetworkCheckStatusComplete=function(e){e=e.data;this._trackExternalErrors=e[R],this._reportingInterval=e[N],this._reportingInterval||(this._reportingInterval=de),this._logger.debug(E,"#_onNetworkCheckStatusComplete(track_ext_err="+this._trackExternalErrors+")")},i.prototype._onResetSessionId=function(e){var t=this._generateSessionId();this._sessionData=new s,this._sessionData.sessionId(t),this._logger.debug(E,"#_resetSessionId(new sessionId="+t+")")},i.prototype._installEventListeners=function(){this._channel.on(x,this._onApiAnalyticsStart,this),this._channel.on(F,this._onApiAnalyticsAdStart,this),this._channel.on(V,this._onApiVideoLoad,this),this._channel.on(B,this._onApiVideoUnload,this),this._channel.on(U,this._onApiVideoStart,this),this._channel.on(j,this._onApiVideoComplete,this),this._channel.on(H,this._onApiVideoSkip,this),this._channel.on(K,this._onApiVideoResume,this),this._channel.on(Y,this._onApiVideoSessionEnd,this),this._channel.on(q,this._onApiAdBreakStart,this),this._channel.on(G,this._onApiAdBreakComplete,this),this._channel.on(W,this._onApiAdStart,this),this._channel.on(Q,this._onApiAdComplete,this),this._channel.on(z,this._onApiAdSkip,this),this._channel.on(X,this._onApiPlay,this),this._channel.on(J,this._onApiPause,this),this._channel.on(Z,this._onApiBufferStart,this),this._channel.on($,this._onApiChapterStart,this),this._channel.on(ee,this._onApiChapterComplete,this),this._channel.on(te,this._onApiChapterSkip,this),this._channel.on(re,this._onApiBitrateChange,this),this._channel.on(ne,this._onApiTrackError,this),this._channel.on(ie,this._onApiTrackInternalError,this),this._channel.on(ae,this._onApiQuantumEnd,this),this._channel.on(se,this._onNetworkCheckStatusComplete,this),this._channel.on(P,this._onResetSessionId,this),this._channel.reply(I,function(){return this._sessionData&&this._sessionData.sessionId()?this._sessionData.sessionId():null},this)},i.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)},i.prototype._resetInternalState=function(){this._logger.debug(E,"#_resetInternalState()"),this._isTrackingSessionActive=!1,this._isVideoComplete=!1,this._autoComputedStartupTime=0,this._lastInBandItem=null,this._stashedLastInBandItem=null,this._streamData=new _,this._qosData=new f,this._sessionData=new s,this._assetData=new p,this._cuserData=null},i.prototype._generateSessionId=function(){return""+(new Date).getTime()+Math.floor(1e9*Math.random())},i.prototype._updateQoSInfo=function(e){this._qosData.bitrate(e.bitrate||0),this._qosData.fps(e.fps||0),this._qosData.droppedFrames(e.droppedFrames||0),null==e.startupTime||isNaN(e.startupTime)?(this._qosData.startupTime(this._autoComputedStartupTime),this._qosData.isStartupTimeOverridden=!1):(this._qosData.startupTime(e.startupTime),this._qosData.isStartupTimeOverridden=!0)},i.prototype._checkCall=function(e){return this._isTrackingSessionActive?!this._isVideoComplete||"_onApiVideoSessionEnd"===e||(this._logger.warn(E,"#"+e+"() > The video content already completed."),!1):(this._logger.warn(E,"#"+e+"() > No active tracking session."),!1)},i.prototype._updateReportingInterval=function(e,t){var n={};n[L]=!!t,n[N]=e,this._channel.trigger(new o(le,n))},i.prototype._updateLastInBandItem=function(e){var t=this._lastInBandItem,n=(new Date).getTime(),i=t.assetData.type()===p.TYPE_AD||e.assetData.type()===p.TYPE_AD,r=1e3*Math.abs(e.eventData.playhead()-t.eventData.playhead()),a=Math.abs(n-t.eventData.ts()),o=Math.abs(r-a),s=a;ce<s?(this._logger.warn(E," Resetting duration in lastInBandItem["+t.assetData.type()+":"+t.eventData.type()+"] call to 0 as calculated duration ("+s+")exceeds 10mins"),s=0):t.eventData.type()==h.EVENT_TYPE_PLAY&&!i&&!this._doNotOverrideEventDuration&&ue<o&&(s=Math.min(r,a),this._logger.warn(E," Resetting duration in lastInBandItem["+t.assetData.type()+":"+t.eventData.type()+"] call to "+s+" as calculated error delta ("+o+")exceeds 2sec")),this._doNotOverrideEventDuration=!1,t.eventData.duration(s),t.eventData.ts(n),t.eventData.playhead(e.eventData.playhead()),t.qosData.startupTime(e.qosData.startupTime()),t.qosData.isStartupTimeOverridden=e.qosData.isStartupTimeOverridden},i.prototype._updateLastInbandItemToBuffering=function(){this._stashedLastInBandItem=this._lastInBandItem;var e=0;null!=this._lastInBandItem&&(this._lastInBandItem.assetData.type()==p.TYPE_MAIN_CONTENT&&this._lastInBandItem.eventData.type()==h.EVENT_TYPE_START&&(this._stashedMainMetadata=this._lastInBandItem.meta),e=this._lastInBandItem.eventData.playhead());e=new m(this,h.EVENT_TYPE_BUFFER,e,null,null);e.assetData.adData(null),e.assetData.type(p.TYPE_MAIN_CONTENT),this._lastInBandItem=e},i.prototype._restoreLastInbandItem=function(){var e;null!=this._stashedLastInBandItem&&(e=null,this._stashedLastInBandItem.eventData.type()==h.EVENT_TYPE_START&&(this._lastInBandItem.assetData.type()==p.TYPE_AD?e=this._lastInBandItem.meta:(e=this._stashedMainMetadata,this._stashedMainMetadata=null)),(e=new m(this,this._stashedLastInBandItem.eventData.type(),this._stashedLastInBandItem.eventData.playhead(),e,this._stashedLastInBandItem.callback)).filterReport=this._stashedLastInBandItem.filterReport,this._lastInBandItem=e,this._stashedLastInBandItem=null)},i.prototype._flushLastInbandItem=function(e){this._lastInBandItem&&(this._updateQoSInfo(e),e=new m(this,this._lastInBandItem.eventData.type(),e.playhead,this._lastInBandItem.meta,this._lastInBandItem.callback),this._sendHit(e,!0))},i.prototype._createAndSendReport=function(e){var t=this._reportFactory.createReportForItem(e);t.qosData.isStartupTimeOverridden||t.qosData.startupTime(this._autoComputedStartupTime);e={};e[D]=t,this._channel.trigger(new o(oe,e)),t.eventData.type()!=h.EVENT_TYPE_START&&t.eventData.type()!=h.EVENT_TYPE_PLAY&&t.eventData.type()!=h.EVENT_TYPE_PAUSE&&t.eventData.type()!=h.EVENT_TYPE_STALL&&t.eventData.type()!=h.EVENT_TYPE_BUFFER||((t={})[O]=!0,this._channel.command(A,t))},i.prototype._sendHit=function(e,t){switch(e.eventData.type()){case h.EVENT_TYPE_START:case h.EVENT_TYPE_PLAY:case h.EVENT_TYPE_PAUSE:case h.EVENT_TYPE_STALL:case h.EVENT_TYPE_BUFFER:this._lastInBandItem?(this._updateLastInBandItem(e),this._lastInBandItem.eventData.type()==h.EVENT_TYPE_START&&this._lastInBandItem.assetData.type()==p.TYPE_MAIN_CONTENT&&(this._autoComputedStartupTime+=this._lastInBandItem.eventData.duration()),this._createAndSendReport(this._lastInBandItem),t&&this._lastInBandItem.eventData.type()==e.eventData.type()||this._createAndSendReport(e)):this._createAndSendReport(e),this._lastInBandItem=e;break;case h.EVENT_TYPE_COMPLETE:case h.EVENT_TYPE_SKIP:var n;this._lastInBandItem&&(this._updateLastInBandItem(e),this._createAndSendReport(this._lastInBandItem)),e.eventData.type()!==h.EVENT_TYPE_SKIP&&this._createAndSendReport(e),e.assetData.type()==p.TYPE_MAIN_CONTENT?(this._lastInBandItem=null,this._stashedLastInBandItem=null,(n={})[O]=!0,this._channel.command(w,n)):e.assetData.type()==p.TYPE_AD&&(this._lastInBandItem.assetData.adData(null),this._lastInBandItem.assetData.type(p.TYPE_MAIN_CONTENT),this._doNotOverrideEventDuration=!0);break;case h.EVENT_TYPE_CHAPTER_START:case h.EVENT_TYPE_CHAPTER_COMPLETE:case h.EVENT_TYPE_CHAPTER_SKIP:this._lastInBandItem&&(this._updateLastInBandItem(e),this._createAndSendReport(this._lastInBandItem)),e.eventData.type()!==h.EVENT_TYPE_CHAPTER_SKIP&&this._createAndSendReport(e),this._lastInBandItem&&(this._lastInBandItem.assetData.chapterData(e.eventData.type()==h.EVENT_TYPE_CHAPTER_START?new v(e.assetData.chapterData()):null),this._lastInBandItem.eventData.duration(0),this._createAndSendReport(this._lastInBandItem));break;default:this._createAndSendReport(e)}};var E="ah::Context",b="sourceErrorSDK",T="error",A="clock:reporting.resume",w="clock:reporting.pause",C="reporting_interval",I="session_id",P="reset_session_id",k="callback",M="filter_report",D="report",O="reset",R="track_external_errors",N="reporting_interval",L="do_not_override_interval",x="api:aa_start",F="api:aa_ad_start",V="api:video_load",B="api:video_unload",U="api:video_start",j="api:video_complete",H="api:video_skip",K="api:video_resume",Y="api:video_session_end",q="api:adbreak_start",G="api:adbreak_complete",W="api:ad_start",Q="api:ad_complete",z="api:ad_skip",X="api:play",J="api:pause",Z="api:buffer_start",$="api:chapter_start",ee="api:chapter_complete",te="api:chapter_skip",ne="api:track_error",ie="api:track_internal_error",re="api:bitrate_change",ae="api:quantum_end",oe="context:report_available",se="net:check_status_complete",le="reporting:update_interval",ce=6e5,ue=2e3,de=10;n.context.Context=i}(i.ADB.core,(i.ADB.va,i.ADB.va.utils),t),function(){"use strict";t.AdobeHeartbeatPluginConfig=function(e,t){this.trackingServer=e,this.publisher=t,this.ssl=!1,this.ovp="unknown",this.sdk="unknown",this.quietMode=!1,this.debugLogging=!1,this.__isPrimetime=!1,this.__psdkVersion=null}}(),function(e){"use strict";function t(){}t.prototype.onError=function(e){},t.prototype.onTrackingDisabled=function(){},e.AdobeHeartbeatPluginDelegate=t}(t),function(e,t,n){"use strict";function i(e){i.__super__.constructor.call(this,g),this._radio=new l(this._logger),this._channel=this._radio.channel(A),this._delegate=e,this._context=new d(this._channel,this._logger),this._filter=new h(this._channel,this._logger),this._network=new p(this._channel,this._logger),this._setupDataResolver()}var r=e.Event,a=e.Trigger,o=e.plugin.BasePlugin,s=e.plugin.ParamMapping,l=e.radio.Radio,c=t.ErrorInfo,u=t.Version,d=n.context.Context,h=n.filter.ReportFilter,p=n.network.Network,_=n.clock.Clock,f=n.AdobeHeartbeatPluginConfig;e.extend(i,o),i.prototype.configure=function(e){if(!e)throw new Error("Reference to the configuration data cannot be NULL.");if(!(e instanceof f))throw new Error("Expected config data to be instance of AdobeHeartbeatPluginConfig.");this._config=e,this._config.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,"#configure({trackingServer="+this._config.trackingServer+", publisher="+this._config.publisher+", quietMode="+this._config.quietMode+", ssl="+this._config.ssl+"})");var t=this._config.trackingServer+"/settings/",e={};e[oe]=this._config.trackingServer,e[se]=t,e[le]=this._config.publisher,e[ce]=this._config.quietMode,e[ue]=this._config.ssl,this._channel.trigger(new r(ge,e)),this._isConfigured=!0},i.prototype.bootstrap=function(e){i.__super__.bootstrap.call(this,e),this._channel.on(w,this._onError,this),this._clock=new _(this._pluginManager,this._channel,this._logger),this._channel.command(je),this._channel.trigger(new r(Qe)),this._channel.on(pe,this._onCheckStatusComplete,this),this._registerCommands(),this._registerBehaviours()},i.prototype._teardown=function(){this._logger.debug(this._logTag,"#_teardown()"),this._radio.shutdown(),this._context.destroy(),this._clock.destroy(),this._filter.destroy(),this._network.destroy()},i.prototype._canProcess=function(){return this._isConfigured?this._errorInfo?(this._logger.error(this._logTag,"_canProcess() > Plugin in ERROR state."),!1):i.__super__._canProcess.call(this):(this._logger.error(this._logTag,"_canProcess() > Plugin not configured."),!1)},i.prototype._cmdAnalyticsError=function(e){this._errorInfo||(this._errorInfo=new c("Internal error","AdobeAnalyticsPlugin is in ERROR state."),this._trigger(w,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo))},i.prototype._cmdAnalyticsStart=function(e){var t;this._canProcess()&&((t={})[de]=e.visitorOptedOut,this._channel.trigger(new r(ve,t)),this._channel.trigger(new r(_e,e)))},i.prototype._cmdAnalyticsAdStart=function(e){this._canProcess()&&this._channel.trigger(new r(fe,e))},i.prototype._cmdVideoLoad=function(e){this._errorInfo=null,this._canProcess()&&(this._isTrackingSessionActive&&this._channel.trigger(new r(ye,e)),this._isTrackingSessionActive=!1,this._isPaused=!0,this._isSeeking=!1,this._isBuffering=!1,this._isVideoIdle=!1,this._filter.clear(),this._channel.trigger(new r(me,e)),this._isTrackingSessionActive=!0)},i.prototype._cmdVideoUnload=function(e){this._errorInfo=null,this._canProcess()&&(this._channel.trigger(new r(ye,e)),this._filter.flush(),this._runReportingTimer(!1),this._runFlushFilterTimer(!1),this._runIdleTimer(!1),this._isTrackingSessionActive=!1)},i.prototype._cmdVideoSessionEnd=function(e){this._canProcess()&&this._channel.trigger(new r(Ae,e))},i.prototype._cmdVideoStart=function(e){this._canProcess()&&(this._channel.trigger(new r(Se,e)),this._filter.flush())},i.prototype._cmdVideoComplete=function(e){this._canProcess()&&this._channel.trigger(new r(Ee,e))},i.prototype._cmdVideoSkip=function(e){this._canProcess()&&this._channel.trigger(new r(be,e))},i.prototype._cmdVideoResume=function(e){this._canProcess()&&this._channel.trigger(new r(Te,e))},i.prototype._cmdPlay=function(e){this._canProcess()&&(this._isPaused=!1,this._resumePlaybackIfPossible(e))},i.prototype._cmdPause=function(e){this._canProcess()&&(this._channel.trigger(new r(De,e)),this._isPaused=!0,this._runIdleTimer(!0))},i.prototype._cmdAdBreakStart=function(e){this._canProcess()&&this._channel.trigger(new r(we,e))},i.prototype._cmdAdBreakComplete=function(e){this._canProcess()&&(this._channel.trigger(new r(Ce,e)),this._resumePlaybackIfPossible(e))},i.prototype._cmdAdStart=function(e){this._canProcess()&&(this._channel.trigger(new r(Ie,e)),this._resumePlaybackIfPossible(e))},i.prototype._cmdAdComplete=function(e){this._canProcess()&&this._channel.trigger(new r(Pe,e))},i.prototype._cmdAdSkip=function(e){this._canProcess()&&this._channel.trigger(new r(ke,e))},i.prototype._cmdBufferStart=function(e){this._canProcess()&&(this._channel.trigger(new r(Oe,e)),this._isBuffering=!0,this._runIdleTimer(!0))},i.prototype._cmdBufferComplete=function(e){this._canProcess()&&(this._isBuffering=!1,this._isPaused?this._channel.trigger(new r(De,e)):this._resumePlaybackIfPossible(e))},i.prototype._cmdSeekStart=function(e){this._canProcess()&&(this._channel.trigger(new r(De,e)),this._isSeeking=!0,this._runIdleTimer(!0))},i.prototype._cmdSeekComplete=function(e){this._canProcess()&&(this._isSeeking=!1,this._resumePlaybackIfPossible(e))},i.prototype._cmdChapterStart=function(e){this._canProcess()&&this._channel.trigger(new r(Re,e))},i.prototype._cmdChapterComplete=function(e){this._canProcess()&&this._channel.trigger(new r(Ne,e))},i.prototype._cmdChapterSkip=function(e){this._canProcess()&&this._channel.trigger(new r(Le,e))},i.prototype._cmdBitrateChange=function(e){this._canProcess()&&this._channel.trigger(new r(Ve,e))},i.prototype._cmdTrackError=function(e){this._canProcess()&&this._channel.trigger(new r(xe,e))},i.prototype._cmdClockReportingTick=function(e){this._canProcess()&&this._channel.trigger(new r(Be,e))},i.prototype._onCheckStatusComplete=function(e){var t;this._canProcess()&&(t=!1,e&&e.data&&e.data[he]&&(t=e.data[he]),this._logger.debug(this._logTag,"#_onCheckStatusComplete(trackingDisabled="+t+")"),t&&this._delegate&&this._delegate.onTrackingDisabled())},i.prototype._cmdIdleTick=function(e){this._canProcess()&&(this._isVideoIdle=!0,this._trigger(ee),this._channel.trigger(new r(Ae,e)),this._filter.flush(),this._runReportingTimer(!1),this._runFlushFilterTimer(!1),this._runIdleTimer(!1),this._trigger(Z))},i.prototype._onError=function(e){this._errorInfo=e.data;e={};e[re]=Ue,e[ae]=this._errorInfo.getMessage()+"|"+this._errorInfo.getDetails(),this._channel.trigger(new r(Fe,e)),this._runReportingTimer(!1),this._trigger(w,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo)},i.prototype._runIdleTimer=function(e){var t={};t[ie]=!0,e?this._channel.command(Ge,t):this._channel.command(We,t)},i.prototype._runFlushFilterTimer=function(e){var t={};t[ie]=!0,e?this._channel.command(Ye,t):this._channel.command(qe,t)},i.prototype._runReportingTimer=function(e){var t={};t[ie]=!0,e?this._channel.command(He,t):this._channel.command(Ke,t)},i.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleAnalyticsError",this._cmdAnalyticsError),this._pluginManager.comply(this,"handleAnalyticsStart",this._cmdAnalyticsStart),this._pluginManager.comply(this,"handleAnalyticsAdStart",this._cmdAnalyticsAdStart),this._pluginManager.comply(this,"handleVideoLoad",this._cmdVideoLoad),this._pluginManager.comply(this,"handleVideoUnload",this._cmdVideoUnload),this._pluginManager.comply(this,"handleVideoSessionEnd",this._cmdVideoSessionEnd),this._pluginManager.comply(this,"handleVideoStart",this._cmdVideoStart),this._pluginManager.comply(this,"handleVideoComplete",this._cmdVideoComplete),this._pluginManager.comply(this,"handleVideoSkip",this._cmdVideoSkip),this._pluginManager.comply(this,"handleVideoResume",this._cmdVideoResume),this._pluginManager.comply(this,"handlePlay",this._cmdPlay),this._pluginManager.comply(this,"handlePause",this._cmdPause),this._pluginManager.comply(this,"handleAdBreakStart",this._cmdAdBreakStart),this._pluginManager.comply(this,"handleAdBreakComplete",this._cmdAdBreakComplete),this._pluginManager.comply(this,"handleAdStart",this._cmdAdStart),this._pluginManager.comply(this,"handleAdComplete",this._cmdAdComplete),this._pluginManager.comply(this,"handleAdSkip",this._cmdAdSkip),this._pluginManager.comply(this,"handleBufferStart",this._cmdBufferStart),this._pluginManager.comply(this,"handleBufferComplete",this._cmdBufferComplete),this._pluginManager.comply(this,"handleSeekStart",this._cmdSeekStart),this._pluginManager.comply(this,"handleSeekComplete",this._cmdSeekComplete),this._pluginManager.comply(this,"handleChapterStart",this._cmdChapterStart),this._pluginManager.comply(this,"handleChapterComplete",this._cmdChapterComplete),this._pluginManager.comply(this,"handleChapterSkip",this._cmdChapterSkip),this._pluginManager.comply(this,"handleBitrateChange",this._cmdBitrateChange),this._pluginManager.comply(this,"handleTrackError",this._cmdTrackError),this._pluginManager.comply(this,"handleClockReportingTick",this._cmdClockReportingTick),this._pluginManager.comply(this,"handleIdleTick",this._cmdIdleTick)},i.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new a(y,P),this,"handleVideoLoad",[new s(m,"rsid","rsid"),new s(m,"tracking_server","trackingServer")]),this._pluginManager.registerBehaviour(new a(y,k),this,"handleVideoUnload"),this._pluginManager.registerBehaviour(new a(y,M),this,"handleVideoSessionEnd",[new s(y,"video.playhead","playhead")]),this._pluginManager.registerBehaviour(new a(y,D),this,"handleVideoStart",[new s(y,"video.id","videoId"),new s(y,"video.name","videoName"),new s(y,"video.length","videoLength"),new s(y,"video.playhead","playhead"),new s(y,"video.playerName","playerName"),new s(y,"video.streamType","streamType"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime"),new s(m,"rsid","rsid"),new s(m,"tracking_server","trackingServer"),new s(m,"channel","channel"),new s(m,"meta.video.*","metaVideo"),new s(m,"ssl","useSsl"),new s(S,"meta","metaNielsen"),new s(v,"publisher","publisher"),new s(v,"sdk","sdk"),new s(v,"ovp","ovp"),new s(v,"version","version"),new s(v,"api_level","apiLvl")]),this._pluginManager.registerBehaviour(new a(y,R),this,"handleVideoComplete",[new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,N),this,"handleVideoSkip",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,O),this,"handleVideoResume",[new s(y,"video.id","videoId"),new s(y,"video.name","videoName"),new s(y,"video.length","videoLength"),new s(y,"video.playhead","playhead"),new s(y,"video.playerName","playerName"),new s(y,"video.streamType","streamType")]),this._pluginManager.registerBehaviour(new a(y,L),this,"handlePlay",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,x),this,"handlePause",[new s(y,"video.playhead","playhead"),new s(y,"video.playheadStalled","playheadStalled"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,V),this,"handleAdBreakStart",[new s(y,"ad.isInAdBreak","isInAdBreak"),new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,B),this,"handleAdBreakComplete",[new s(y,"ad.isInAdBreak","isInAdBreak"),new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,U),this,"handleAdStart",[new s(y,"video.playhead","playhead"),new s(y,"ad.id","adId"),new s(y,"ad.name","adName"),new s(y,"ad.length","adLength"),new s(y,"ad.position","adPosition"),new s(y,"ad.granularTracking","adGranularTracking"),new s(y,"ad.trackingInterval","adTrackingInterval"),new s(y,"pod.name","podName"),new s(y,"pod.playerName","podPlayerName"),new s(y,"pod.position","podPosition"),new s(y,"pod.startTime","podSecond"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime"),new s(m,"meta.video.*","metaVideo"),new s(m,"meta.ad.*","metaAd"),new s(S,"meta","metaNielsen"),new s(S,"metaAd","metaAdNielsen")]),this._pluginManager.registerBehaviour(new a(y,j),this,"handleAdComplete",[new s(y,"video.playhead","playhead"),new s(y,"ad.isInAdBreak","isInAdBreak"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,H),this,"handleAdSkip",[new s(y,"video.playhead","playhead"),new s(y,"ad.isInAdBreak","isInAdBreak"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,K),this,"handleBufferStart",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,Y),this,"handleBufferComplete",[new s(y,"video.playhead","playhead"),new s(y,"video.playheadStalled","playheadStalled"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,q),this,"handleSeekStart",[new s(y,"video.playhead","playhead")]),this._pluginManager.registerBehaviour(new a(y,G),this,"handleSeekComplete",[new s(y,"video.playhead","playhead"),new s(y,"ad.isInAd","isInAd"),new s(y,"ad.id","adId"),new s(y,"ad.position","adPosition"),new s(y,"pod.playerName","podPlayerName"),new s(y,"pod.position","podPosition"),new s(y,"chapter.isInChapter","isInChapter"),new s(y,"chapter.position","chapterPosition"),new s(y,"chapter.name","chapterName"),new s(y,"chapter.length","chapterLength"),new s(y,"chapter.startTime","chapterOffset"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,W),this,"handleChapterStart",[new s(y,"video.playhead","playhead"),new s(y,"chapter.position","chapterPosition"),new s(y,"chapter.name","chapterName"),new s(y,"chapter.length","chapterLength"),new s(y,"chapter.startTime","chapterOffset"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime"),new s(m,"meta.video.*","metaVideo"),new s(m,"meta.chapter.*","metaChapter"),new s(S,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new a(y,Q),this,"handleChapterComplete",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,z),this,"handleChapterSkip",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,X),this,"handleBitrateChange",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,J),this,"handleTrackError"),this._pluginManager.registerBehaviour(new a(E,te),this,"handleClockReportingTick",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,F),this,"handleClockReportingTick",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(E,ne),this,"handleIdleTick",[new s(y,"video.playhead","playhead")]),this._pluginManager.registerBehaviour(new a(v,ee),this,"handleClockReportingTick",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(m,w),this,"handleAnalyticsError"),this._pluginManager.registerBehaviour(new a(m,C),this,"handleAnalyticsStart",[new s(m,"vid","vid"),new s(m,"aid","aid"),new s(m,"mid","mid"),new s(m,"customerIDs","customerIDs"),new s(m,"visitorOptedOut","visitorOptedOut"),new s(m,"blob","blob"),new s(m,"loc_hint","loc_hint"),new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(m,I),this,"handleAnalyticsAdStart",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")])},i.prototype._setupDataResolver=function(){var r={},e=this;r.version=function(){return u.getVersion()},r.api_level=function(){return u.getApiLevel()},r.tracking_server=function(){return e._config?e._config.trackingServer:null},r.publisher=function(){return e._config?e._config.publisher:null},r.quiet_mode=function(){return!!e._config&&e._config.quietMode},r.ovp=function(){return e._config?e._config.ovp:null},r.sdk=function(){return e._config?e._config.sdk:null},r.is_primetime=function(){return!!e._config&&e._config.__isPrimetime},r.psdk_version=function(){return e._config?e._config.__psdkVersion:null},r.session_id=function(){return e._channel.request(b)},this._dataResolver=function(e){if(!e||0==e.length)return null;for(var t=null,n=0;n<e.length;n++){var i=e[n];(t=t||{})[i]=r.hasOwnProperty(i)?r[i].call(this):null}return t}},i.prototype._resumePlaybackIfPossible=function(e){this._errorInfo||this._isPaused||this._isSeeking||this._isBuffering||(this._isVideoIdle?(this._isVideoIdle=!1,this._resumePlaybackFromIdle()):this._channel.trigger(new r(Me,e)),this._runIdleTimer(!1))},i.prototype._resumePlaybackFromIdle=function(){this._trigger(ee),this._filter.clear(),this._channel.trigger(new r(T)),this._trigger($),this._runReportingTimer(!0),this._runFlushFilterTimer(!0)};var g="adobe-heartbeat",v=g,m="adobe-analytics",y="player",S="nielsen",E="service.clock",b="session_id",T="reset_session_id",A="heartbeat-channel",w="error",C="aa_start",I="sc_ad_start",P="video_load",k="video_unload",M="video_session_end",D="video_start",O="video_resume",R="video_complete",N="video_skip",L="play",x="pause",F="content_start",V="adbreak_start",B="adbreak_complete",U="ad_start",j="ad_complete",H="ad_skip",K="buffer_start",Y="buffer_complete",q="seek_start",G="seek_complete",W="chapter_start",Q="chapter_complete",z="chapter_skip",X="bitrate_change",J="track_error",Z="video_idle_start",$="video_idle_resume",ee="quantum_close",te="heartbeat.reporting.tick",ne="heartbeat.idle.tick",ie="reset",re="source",ae="error_id",oe="tracking_server",se="check_status_server",le="publisher",ce="quiet_mode",ue="ssl",de="visitor_opt_out",he="tracking_disabled",pe="net:check_status_complete",_e="api:aa_start",fe="api:aa_ad_start",ge="api:config",ve="api:update_visitor_optout",me="api:video_load",ye="api:video_unload",Se="api:video_start",Ee="api:video_complete",be="api:video_skip",Te="api:video_resume",Ae="api:video_session_end",we="api:adbreak_start",Ce="api:adbreak_complete",Ie="api:ad_start",Pe="api:ad_complete",ke="api:ad_skip",Me="api:play",De="api:pause",Oe="api:buffer_start",Re="api:chapter_start",Ne="api:chapter_complete",Le="api:chapter_skip",xe="api:track_error",Fe="api:track_internal_error",Ve="api:bitrate_change",Be="api:quantum_end",Ue="sourceErrorHeartbeat",je="clock:check_status.resume",He="clock:reporting.resume",Ke="clock:reporting.pause",Ye="clock:flush_filter.resume",qe="clock:flush_filter.pause",Ge="clock:idle.resume",We="clock:idle.pause",Qe="clock:check_status.get_settings";n.AdobeHeartbeatPlugin=i}(i.ADB.core,i.ADB.va,t),i.ADB.va.plugins.ah||(i.ADB.va.plugins.ah=t),function(e,t){"use strict";function n(e,t){this._onFail={fn:e,ctx:t}}var i=e.ErrorInfo;n.prototype.validateFields=function(e,t){if(!e)return this._fail("Data cannot be null");if(t)for(var n=0;n<t.length;n++){var i=t[n];switch(i){case"videoId":if(!e.hasOwnProperty("videoId"))return this._fail("The ID for the main video must be specified.");if("string"!=typeof e.videoId)return this._fail("The ID for the main video must be a String.");if(""===e.videoId)return this._fail("The ID for the main video cannot be an empty string.");break;case"mediaType":if(!e.hasOwnProperty("mediaType"))return this._fail("The media type for the main video must be specified.");if("string"!=typeof e.mediaType)return this._fail("The media type for the main video must be a String.");if(""===e.mediaType)return this._fail("The stream type for the main video cannot be an empty string.");break;case"streamType":if(!e.hasOwnProperty("streamType"))return this._fail("The stream type for the main video must be specified.");if("string"!=typeof e.streamType)return this._fail("The stream type for the main video must be a String.");if(""===e.streamType)return this._fail("The stream type for the main video cannot be an empty string.");break;case"playerName":if(!e.hasOwnProperty("playerName"))return this._fail("The player name for the main video must be specified.");if("string"!=typeof e.playerName)return this._fail("The player name for the main video must be a String.");if(""===e.playerName)return this._fail("The player name for the main video cannot be an empty string.");break;case"videoLength":if(!e.hasOwnProperty("videoLength"))return this._fail("The length of the main video must be specified.");if("number"!=typeof e.videoLength)return this._fail("The length of the main video must be a Number.");if(isNaN(e.videoLength))return this._fail("The length of the main video cannot be NaN.");break;case"podPlayerName":if(!e.hasOwnProperty("podPlayerName"))return this._fail("The player name for the ad-break must be specified.");if("string"!=typeof e.podPlayerName)return this._fail("The player name for the ad-break must be a String.");if(""===e.podPlayerName)return this._fail("The player name for the ad-break cannot be an empty string.");break;case"podPosition":if(!e.hasOwnProperty("podPosition"))return this._fail("Position (index) of the ad-break must be specified.");if("number"!=typeof e.podPosition)return this._fail("Position (index) of the ad-break must be a Number.");if(isNaN(e.podPosition))return this._fail("Position (index) of the ad-break cannot be NaN.");break;case"adId":if(!e.hasOwnProperty("adId"))return this._fail("The ad ID must be specified.");if("string"!=typeof e.adId)return this._fail("The ad ID must be a String.");if(""===e.adId)return this._fail("The ad ID cannot be an empty string.");break;case"adPosition":if(!e.hasOwnProperty("adPosition"))return this._fail("Position (index) of the ad must be specified.");if("number"!=typeof e.adPosition)return this._fail("Position (index) of the ad must be a Number.");if(isNaN(e.adPosition))return this._fail("Position (index) of the ad cannot be NaN.");break;case"adLength":if(!e.hasOwnProperty("adLength"))return this._fail("The length of the ad must be specified.");if("number"!=typeof e.adLength)return this._fail("The length of the ad must be a Number.");if(isNaN(e.adLength))return this._fail("The length of the ad cannot be NaN.");break;default:return this._fail("Unable to validate unknown parameter: "+i)}}return!0},n.prototype._fail=function(e){e=new i("Invalid input data",e);return this._onFail.fn&&this._onFail.fn.call(this._onFail.ctx,e),!1},t.InputDataValidator=n}((i=this).ADB.va,e=void 0===e?{}:e),function(){"use strict";e.AdobeAnalyticsPluginConfig=function(){this.channel="",this.debugLogging=!1}}(),function(e){"use strict";function t(){}t.prototype.onError=function(e){},e.AdobeAnalyticsPluginDelegate=t}(e),function(e,t,n,i){"use strict";function r(e,t){if(r.__super__.constructor.call(this,v),!e)throw new Error("The reference to the AppMeasurement object cannot be NULL.");if(e.unsupportedBrowser)throw new Error("AppMeasurement is not supported in current browser.");this._appMeasurement=e,this._delegate=t,this._videoMetadata={},this._adMetadata={},this._chapterMetadata={},this._errorInfo=null,this._workQueue=new u(!0,b),this._inputDataValidator=new g(function(e){this._errorInfo=e,this._logger.error(this._logTag,e.getMessage()+" | "+e.getDetails());var t=this;setTimeout(function(){t._trigger(T,e),t._delegate&&t._delegate.onError(t._errorInfo)},0)},this),this._appMeasurement.isReadyToTrack(),this._setupDataResolver()}var a=e.Trigger,o=e.plugin.BasePlugin,s=e.plugin.ParamMapping,l=e.radio.Channel,c=e.radio.Command,u=e.radio.CommandQueue,d=t.ErrorInfo,h=n.md5,p=n.StringUtils,_=n.ObjectUtils,f=i.AdobeAnalyticsPluginConfig,g=i.InputDataValidator;e.extend(r,o),r.prototype.configure=function(e){if(!e)throw new Error("Reference to the configuration data cannot be NULL.");if(!(e instanceof f))throw new Error("Expected config data to be instance of AdobeAnalyticsPluginConfig.");this._config=e,this._config.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,"#configure({trackingServer="+this._config.debugLogging+", channel="+this._config.channel+", ssl="+this._appMeasurement.ssl+"})")},r.prototype.bootstrap=function(e){r.__super__.bootstrap.call(this,e),this._registerCommands(),this._registerBehaviours()},r.prototype.setup=function(){this._appMeasurement.isReadyToTrack()?this._onAppMeasurementReady():this._appMeasurement.callbackWhenReadyToTrack(this,this._onAppMeasurementReady,[]),r.__super__.setup.call(this)},r.prototype.setVideoMetadata=function(e){this._videoMetadata=_.clone(e)},r.prototype.setAdMetadata=function(e){this._adMetadata=_.clone(e)},r.prototype.setChapterMetadata=function(e){this._chapterMetadata=_.clone(e)},r.prototype._canProcess=function(){return this._errorInfo?(this._logger.error(this._logTag,"#_canProcess() > In ERROR state."),!1):r.__super__._canProcess.call(this)},r.prototype._cmdVideoLoad=function(e){this._errorInfo=null},r.prototype._cmdVideoStart=function(e){this._logger.debug(this._logTag,"#_cmdVideoStart()"),this._canProcess()&&this._workQueue.addCommand(new c(this._executeOpen,this,[e]))},r.prototype._cmdAdStart=function(e){this._logger.debug(this._logTag,"#_cmdAdStart()"),this._canProcess()&&this._workQueue.addCommand(new c(this._executeOpenAd,this,[e]))},r.prototype._cmdHeartbeatPluginError=function(e){this._errorInfo||(this._errorInfo=new d("Internal error","HeartbeatPlugin is in ERROR state."),this._trigger(T,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo))},r.prototype._track=function(e){try{var t;this._appMeasurement.visitorOptedOut||(t=this._appMeasurement.linkTrackVars,this._appMeasurement.linkTrackVars="",this._appMeasurement.track(e),this._appMeasurement.linkTrackVars=t)}catch(e){this._logger.warn(this._logTag,"appMeasurement.track() call threw an exception.")}},r.prototype._executeOpen=function(e){if(this._logger.debug(this._logTag,"#_executeOpen(id="+e.videoId+", videoName="+e.videoName+", mediaType="+e.mediaType+", streamType="+e.streamType+", length="+e.videoLength+", playerName="+e.playerName+", channel="+e.channel+", isPrimetime="+e.isPrimetime+", sessionId="+e.sessionId+")"),this._canProcess()&&this._inputDataValidator.validateFields(e,["videoId","mediaType","streamType","videoLength","playerName"])){var t={};for(n in e.metaVideo)e.metaVideo.hasOwnProperty(n)&&(t[n]=e.metaVideo[n]);if(e.metaNielsen)for(var n in e.metaNielsen)e.metaNielsen.hasOwnProperty(n)&&(t[n]=e.metaNielsen[n]);t["a.contentType"]=e.streamType,t["a.media.name"]=e.videoId,t["a.media.friendlyName"]=e.videoName||"",t["a.media.length"]=Math.floor(e.videoLength)||"0",t["a.media.playerName"]=e.playerName,t["a.media.channel"]=e.channel||"",t["a.media.view"]=!0,t["a.media.vsid"]=e.sessionId;var i={};i.contextData=t,"audio"===e.mediaType?(i.pev3=C,i.ms_a="1"):i.pev3=A,i.pe=e.isPrimetime?k:P,this._track(i);var r=this;setTimeout(function(){r._trigger(O,e)},0)}},r.prototype._executeOpenAd=function(e){var t=h(e.videoId)+"_"+e.podPosition;if(this._logger.debug(this._logTag,"#_executeOpenAd(id="+e.adId+", mediaType="+e.mediaType+", streamType="+e.streamType+", length="+e.adLength+", podPlayerName="+e.podPlayerName+", parentId="+e.videoId+", podId="+t+", parentPodPosition="+e.adPosition+", podSecond="+e.podSecond+")"),this._canProcess()&&this._inputDataValidator.validateFields(e,["videoId","mediaType","streamType","playerName","adId","adLength","podPlayerName","adPosition"])){e.podSecond=null==e.podSecond||isNaN(e.podSecond)?e.playhead:e.podSecond;var n={};for(i in e.metaVideo)e.metaVideo.hasOwnProperty(i)&&(n[i]=e.metaVideo[i]);for(i in e.metaAd)e.metaAd.hasOwnProperty(i)&&(n[i]=e.metaAd[i]);if(e.metaNielsen)for(var i in e.metaNielsen)e.metaNielsen.hasOwnProperty(i)&&(n[i]=e.metaNielsen[i]);n["a.contentType"]=e.streamType,n["a.media.name"]=e.videoId,n["a.media.playerName"]=e.playerName,n["a.media.channel"]=e.channel||"",n["a.media.vsid"]=e.sessionId,n["a.media.friendlyName"]=e.videoName||"",n["a.media.length"]=Math.floor(e.videoLength)||"0",n["a.media.ad.name"]=e.adId,n["a.media.ad.friendlyName"]=e.adName||"",n["a.media.ad.podFriendlyName"]=e.podName||"",n["a.media.ad.length"]=Math.floor(e.adLength)||"0",n["a.media.ad.playerName"]=e.podPlayerName,n["a.media.ad.pod"]=t,n["a.media.ad.podPosition"]=Math.floor(e.adPosition)||"0",n["a.media.ad.podSecond"]=Math.floor(e.podSecond)||"0",n["a.media.ad.view"]=!0;t={};t.contextData=n,"audio"===e.mediaType?(t.pev3=I,t.ms_a="1"):t.pev3=w,t.pe=e.isPrimetime?D:M,this._track(t);var r=this;setTimeout(function(){r._trigger(R,e)},0)}},r.prototype._setupDataResolver=function(){var r={},a=this;r.rsid=function(){return a._appMeasurement.account},r.tracking_server=function(){return a._appMeasurement.ssl&&a._appMeasurement.trackingServerSecure?a._appMeasurement.trackingServerSecure:a._appMeasurement.trackingServer},r.ssl=function(){return a._appMeasurement.ssl},r.vid=function(){return a._appMeasurement.visitorID},r.aid=function(){return a._appMeasurement.analyticsVisitorID},r.mid=function(){return a._appMeasurement.marketingCloudVisitorID},r.blob=function(){return a._appMeasurement.audienceManagerBlob},r.loc_hint=function(){return a._appMeasurement.audienceManagerLocationHint?parseInt(a._appMeasurement.audienceManagerLocationHint):""},r.customerIDs=function(){var e,t={},n=a._appMeasurement.visitor.getCustomerIDs();for(e in n)if(n.hasOwnProperty(e)){var i=n[e];if("object"==typeof i){for(var r in i)i.hasOwnProperty(r)&&("authState"==r?t[e+".as"]=i[r]:t[e+"."+r]=i[r]);t[e+".as"]||(t[e+".as"]="0")}}return t},r.visitorOptedOut=function(){return!!a._appMeasurement.visitorOptedOut},r.channel=function(){return a._config?a._config.channel:null},r.meta=function(e){var t=e.split(".");if(t.length<2)return null;var n=t.shift();switch(e=t.join("."),n){case"video":return e==l.WILDCARD?a._videoMetadata:a._videoMetadata[e];case"ad":return e==l.WILDCARD?a._adMetadata:a._adMetadata[e];case"chapter":return e==l.WILDCARD?a._chapterMetadata:a._chapterMetadata[e];default:return null}},this._dataResolver=function(e){if(!e||0==e.length)return null;for(var t=null,n=0;n<e.length;n++){var i=e[n],t=t||{};p.startsWith(i,"meta.")?t[i]=r.meta(i.split("meta.")[1]):t[i]=r.hasOwnProperty(i)?r[i].call(this):null}return t}},r.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleVideoLoad",this._cmdVideoLoad),this._pluginManager.comply(this,"handleVideoStart",this._cmdVideoStart),this._pluginManager.comply(this,"handleAdStart",this._cmdAdStart),this._pluginManager.comply(this,"handleHeartbeatPluginError",this._cmdHeartbeatPluginError)},r.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new a(S,N),this,"handleVideoLoad"),this._pluginManager.registerBehaviour(new a(S,L),this,"handleVideoStart",[new s(S,"video.id","videoId"),new s(S,"video.mediaType","mediaType"),new s(S,"video.streamType","streamType"),new s(S,"video.name","videoName"),new s(S,"video.length","videoLength"),new s(S,"video.playerName","playerName"),new s(S,"video.streamType","streamType"),new s(E,"is_primetime","isPrimetime"),new s(E,"session_id","sessionId"),new s(m,"channel","channel"),new s(m,"meta.video.*","metaVideo"),new s(y,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new a(S,x),this,"handleAdStart",[new s(S,"video.id","videoId"),new s(S,"video.mediaType","mediaType"),new s(S,"video.streamType","streamType"),new s(S,"video.playhead","playhead"),new s(S,"video.playerName","playerName"),new s(S,"video.name","videoName"),new s(S,"video.length","videoLength"),new s(S,"ad.id","adId"),new s(S,"ad.length","adLength"),new s(S,"ad.position","adPosition"),new s(S,"ad.name","adName"),new s(S,"pod.name","podName"),new s(S,"pod.position","podPosition"),new s(S,"pod.playerName","podPlayerName"),new s(S,"pod.startTime","podSecond"),new s(E,"is_primetime","isPrimetime"),new s(E,"session_id","sessionId"),new s(m,"channel","channel"),new s(m,"meta.video.*","metaVideo"),new s(m,"meta.ad.*","metaAd"),new s(y,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new a(E,T),this,"handleHeartbeatPluginError")},r.prototype._onAppMeasurementReady=function(){this._logger.debug(this._logTag,"[Init] #_onAppMeasurementReady"),this._workQueue.resume()};var v="adobe-analytics",m=v,y="nielsen",S="player",E="adobe-heartbeat",b=2e3,T="error",A="video",w="videoAd",C="audio",I="audioAd",P="ms_s",k="msp_s",M="msa_s",D="mspa_s",O="aa_start",R="sc_ad_start",N="video_load",L="video_start",x="ad_start";i.AdobeAnalyticsPlugin=r}(i.ADB.core,i.ADB.va,i.ADB.va.utils,e),function(e){"use strict";e.VideoMetadataKeys={SHOW:"a.media.show",SEASON:"a.media.season",EPISODE:"a.media.episode",ASSET_ID:"a.media.asset",GENRE:"a.media.genre",FIRST_AIR_DATE:"a.media.airDate",FIRST_DIGITAL_DATE:"a.media.digitalDate",RATING:"a.media.rating",ORIGINATOR:"a.media.originator",NETWORK:"a.media.network",SHOW_TYPE:"a.media.type",AD_LOAD:"a.media.adLoad",MVPD:"a.media.pass.mvpd",AUTHORIZED:"a.media.pass.auth",DAY_PART:"a.media.dayPart",FEED:"a.media.feed",STREAM_FORMAT:"a.media.format"},e.AudioMetadataKeys={ARTIST:"a.media.artist",ALBUM:"a.media.album",LABEL:"a.media.label",AUTHOR:"a.media.author",STATION:"a.media.station",PUBLISHER:"a.media.publisher"},e.AdMetadataKeys={ADVERTISER:"a.media.ad.advertiser",CAMPAIGN_ID:"a.media.ad.campaign",CREATIVE_ID:"a.media.ad.creative",PLACEMENT_ID:"a.media.ad.placement",SITE_ID:"a.media.ad.site",CREATIVE_URL:"a.media.ad.creativeURL"}}(e),i.ADB.va.plugins.aa||(i.ADB.va.plugins.aa=e),function(e){"use strict";function t(){this._processAction=!0,this._store={}}function c(e){if(!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e,this._rules=[]}t.prototype.setRuleName=function(e){this._ruleName=e},t.prototype.getRuleName=function(e,t){return this._ruleName},t.prototype.setData=function(e,t){this._store[e]=t},t.prototype.getData=function(e){return this._store[e]},t.prototype.shouldProcessAction=function(){return this._processAction},t.prototype.stopProcessingAction=function(){this._processAction=!1},t.prototype.startProcessingAction=function(){this._processAction=!0},c.createContext=function(){return new t},c.createPredicate=function(e,t,n){return{fn:e,expectedValue:t,msg:n}},c.prototype.registerRule=function(e,t,n,i,r){this._rules.push({name:e,desc:t,preconditions:n,actions:i,scope:r})},c.prototype.registerEnterExitAction=function(e,t){this._enterAction=e,this._exitAction=t},c.prototype._handleFailure=function(e,t){this._logger.error(u,e.desc+" -  "+t.msg)},c.prototype._getRule=function(e){for(var t=0;t<this._rules.length;++t)if(this._rules[t].name===e)return this._rules[t];return null},c.prototype.processRule=function(e,t){var n=!0,i=this._getRule(e);if(i){var r=i.scope;(t=t||c.createContext()).setRuleName(e);for(var a=!1,o=0;o<i.preconditions.length;++o){var s=i.preconditions[o];if(a=!!s.fn.call(r,t)!==s.expectedValue){this._handleFailure(i,s);break}}if(a)n=!1;else{for(t.startProcessingAction(),this._enterAction&&this._enterAction.call(r,t),o=0;o<i.actions.length;++o){var l=i.actions[o];if(!t.shouldProcessAction()){this._logger.info(u,"Stopping actions for "+i.desc);break}l.call(r,t)}this._exitAction&&t.shouldProcessAction()&&this._exitAction.call(r,t)}}else this._logger.warn(u,"No registered event found for ruleName "+e),n=!1;return n};var u="RuleEngine";e._RuleEngine=c}(((F=this).ADB.core,F.ADB.va)),function(e){"use strict";function i(e,t,n){this.taskFn=e,this.scope=t,this.interval=n,this.remainingInterval=n}function t(e){if(!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e,this._tasks=[],this._pausedTasks=[]}i.prototype.elapsedTime=function(e){this.remainingInterval-=e},i.prototype.shouldExecute=function(){return this.remainingInterval<=0},i.prototype.execute=function(){this.taskFn.call(this.scope)},t.prototype._getCurrentTimeInMS=function(){return(new Date).getTime()},t.prototype._runTasksForTime=function(e){var t=[],n=e-this._lastTickTime;this._lastTickTime=e;for(var i=0;i<this._tasks.length;){var r=this._tasks[i];r.elapsedTime(n),r.shouldExecute()?(t.push(r),this._tasks.splice(i,1)):++i}for(this._checkStopTimer(),i=0;i<t.length;++i)t[i].execute()},t.prototype._onTick=function(){var e=this._getCurrentTimeInMS();this._runTasksForTime(e)},t.prototype._startTimer=function(){var e=this;this._timer||(this._logger.info(r,"#startTimer()"),e._lastTickTime=this._getCurrentTimeInMS(),this._timer=window.setInterval(function(){e._onTick()},n))},t.prototype._stopTimer=function(){this._timer&&(this._logger.info(r,"#stopTimer()"),window.clearInterval(this._timer),this._timer=null)},t.prototype._checkStartTimer=function(){0<this._tasks.length&&this._startTimer()},t.prototype._checkStopTimer=function(){0===this._tasks.length&&this._stopTimer()},t.prototype._removeTask=function(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return e.splice(n,1),!0;return!1},t.prototype.scheduleTask=function(e,t,n){if(this._logger.info(r,"#scheduleTask()"),!e)throw new Error("Reference to the taskFn cannot be NULL");n=new i(e,t,n);return this._tasks.push(n),this._checkStartTimer(),n},t.prototype.cancelTask=function(e){this._logger.info(r,"#cancelTask()"),this._removeTask(this._tasks,e),this._checkStopTimer()},t.prototype.pauseTask=function(e){this._logger.info(r,"#pauseTask()"),this._removeTask(this._tasks,e)&&this._pausedTasks.push(e),this._checkStopTimer()},t.prototype.resumeTask=function(e){this._logger.info(r,"#resumeTask()"),this._removeTask(this._pausedTasks,e)&&this._tasks.push(e),this._checkStartTimer()},t.prototype.clearTasks=function(){this._stopTimer(),this._tasks=[],this._pausedTasks=[]};var r="TaskScheduler",n=250;e._TaskScheduler=t}((F.ADB.core,F.ADB.va)),function(e){"use strict";function t(){this.trackingServer=void 0,this.channel=void 0,this.ovp=void 0,this.appVersion=void 0,this.playerName=void 0,this.ssl=!1,this.debugLogging=!1}e.MediaHeartbeatConfig=t,e.MediaHeartbeatConfig.sharedInstance=new t}(F.ADB.va),function(e){"use strict";function r(){this.data={}}var t=e.plugins.videoplayer.VideoInfo,n=e.plugins.videoplayer.AdBreakInfo,i=e.plugins.videoplayer.AdInfo,a=e.plugins.videoplayer.ChapterInfo,o=e.plugins.videoplayer.QoSInfo;r.MEDIAINFO_KEY_NAME="a.name",r.MEDIAINFO_KEY_VIDEOID="a.videoId",r.MEDIAINFO_KEY_ADID="a.adId",r.MEDIAINFO_KEY_LENGTH="a.length",r.MEDIAINFO_KEY_PLAYHEAD="a.playhead",r.MEDIAINFO_KEY_MEDIATYPE="a.mediaType",r.MEDIAINFO_KEY_STREAMTYPE="a.streamType",r.MEDIAINFO_KEY_POSITION="a.position",r.MEDIAINFO_KEY_STARTTIME="a.startTime",r.MEDIAINFO_KEY_BITRATE="a.bitrate",r.MEDIAINFO_KEY_FPS="a.fps",r.MEDIAINFO_KEY_DROPPEDFRAMES="a.droppedFrames",r.MEDIAINFO_KEY_STARTUPTIME="a.startupTime",r.MEDIAINFO_KEY_TIMEDMETADATA="a.timedMetadata",r.prototype.setValue=function(e,t){this.data[e]=t},r.prototype.getValue=function(e){return this.data.hasOwnProperty(e)?this.data[e]:null},r.prototype.createVideoInfo=function(){var e=new t;return e.id=null!=this.getValue(r.MEDIAINFO_KEY_VIDEOID)?this.getValue(r.MEDIAINFO_KEY_VIDEOID):"",e.name=null!=this.getValue(r.MEDIAINFO_KEY_NAME)?this.getValue(r.MEDIAINFO_KEY_NAME):"",e.length=null!=this.getValue(r.MEDIAINFO_KEY_LENGTH)?this.getValue(r.MEDIAINFO_KEY_LENGTH):0,e.playhead=null!=this.getValue(r.MEDIAINFO_KEY_PLAYHEAD)?this.getValue(r.MEDIAINFO_KEY_PLAYHEAD):0,e.mediaType=null!=this.getValue(r.MEDIAINFO_KEY_MEDIATYPE)?this.getValue(r.MEDIAINFO_KEY_MEDIATYPE):"",e.streamType=null!=this.getValue(r.MEDIAINFO_KEY_STREAMTYPE)?this.getValue(r.MEDIAINFO_KEY_STREAMTYPE):"",e},r.prototype.createAdBreakInfo=function(){var e=new n;return e.name=null!=this.getValue(r.MEDIAINFO_KEY_NAME)?this.getValue(r.MEDIAINFO_KEY_NAME):"",e.position=null!=this.getValue(r.MEDIAINFO_KEY_POSITION)?this.getValue(r.MEDIAINFO_KEY_POSITION):0,e.startTime=null!=this.getValue(r.MEDIAINFO_KEY_STARTTIME)?this.getValue(r.MEDIAINFO_KEY_STARTTIME):0,e},r.prototype.createAdInfo=function(){var e=new i;return e.id=null!=this.getValue(r.MEDIAINFO_KEY_ADID)?this.getValue(r.MEDIAINFO_KEY_ADID):"",e.name=null!=this.getValue(r.MEDIAINFO_KEY_NAME)?this.getValue(r.MEDIAINFO_KEY_NAME):"",e.length=null!=this.getValue(r.MEDIAINFO_KEY_LENGTH)?this.getValue(r.MEDIAINFO_KEY_LENGTH):0,e.position=null!=this.getValue(r.MEDIAINFO_KEY_POSITION)?this.getValue(r.MEDIAINFO_KEY_POSITION):0,e},r.prototype.createChapterInfo=function(){var e=new a;return e.name=null!=this.getValue(r.MEDIAINFO_KEY_NAME)?this.getValue(r.MEDIAINFO_KEY_NAME):"",e.length=null!=this.getValue(r.MEDIAINFO_KEY_LENGTH)?this.getValue(r.MEDIAINFO_KEY_LENGTH):0,e.startTime=null!=this.getValue(r.MEDIAINFO_KEY_STARTTIME)?this.getValue(r.MEDIAINFO_KEY_STARTTIME):0,e.position=null!=this.getValue(r.MEDIAINFO_KEY_POSITION)?this.getValue(r.MEDIAINFO_KEY_POSITION):0,e},r.prototype.createQoSInfo=function(){var e=new o;return e.bitrate=null!=this.getValue(r.MEDIAINFO_KEY_BITRATE)?this.getValue(r.MEDIAINFO_KEY_BITRATE):0,e.fps=null!=this.getValue(r.MEDIAINFO_KEY_FPS)?this.getValue(r.MEDIAINFO_KEY_FPS):0,e.droppedFrames=null!=this.getValue(r.MEDIAINFO_KEY_DROPPEDFRAMES)?this.getValue(r.MEDIAINFO_KEY_DROPPEDFRAMES):0,e.startupTime=null!=this.getValue(r.MEDIAINFO_KEY_STARTUPTIME)?this.getValue(r.MEDIAINFO_KEY_STARTUPTIME):0,e},r.prototype.isEqual=function(e){if(this===e)return!0;if(!e||"object"!=typeof e||"function"!=typeof e.getValue)return!1;for(var t=[r.MEDIAINFO_KEY_NAME,r.MEDIAINFO_KEY_VIDEOID,r.MEDIAINFO_KEY_ADID,r.MEDIAINFO_KEY_LENGTH,r.MEDIAINFO_KEY_PLAYHEAD,r.MEDIAINFO_KEY_STREAMTYPE,r.MEDIAINFO_KEY_MEDIATYPE,r.MEDIAINFO_KEY_POSITION,r.MEDIAINFO_KEY_STARTTIME,r.MEDIAINFO_KEY_BITRATE,r.MEDIAINFO_KEY_FPS,r.MEDIAINFO_KEY_DROPPEDFRAMES,r.MEDIAINFO_KEY_STARTUPTIME,r.MEDIAINFO_KEY_TIMEDMETADATA],n=0;n<t.length;++n){var i=t[n];if(this.getValue(i)!==e.getValue(i))return!1}return!0},e.MediaObject=r}(F.ADB.va),function(e,t){"use strict";function n(e){n.__super__.constructor.call(this),this._heartbeat=e}function i(e){i.__super__.constructor.call(this),this._heartbeat=e}function r(e){r.__super__.constructor.call(this),this._heartbeat=e}function a(e){a.__super__.constructor.call(this),this._heartbeat=e}e.extend(n,t.plugins.aa.AdobeAnalyticsPluginDelegate),n.prototype.onError=function(e){this._heartbeat&&this._heartbeat._onDelegateError(e)},e.extend(i,t.plugins.ah.AdobeHeartbeatPluginDelegate),i.prototype.onError=function(e){this._heartbeat&&this._heartbeat._onDelegateError(e)},i.prototype.onTrackingDisabled=function(){this._heartbeat&&this._heartbeat._disableHBTracking()},e.extend(r,t.HeartbeatDelegate),r.prototype.onError=function(e){this._heartbeat&&this._heartbeat._onDelegateError(e)},e.extend(a,t.plugins.videoplayer.VideoPlayerPluginDelegate),a.prototype.getVideoInfo=function(){return this._heartbeat&&this._heartbeat._videoInfo?(this._heartbeat._delegate&&(this._heartbeat._videoInfo.playhead=this._heartbeat._delegate.getCurrentPlaybackTime()),this._heartbeat._videoInfo):null},a.prototype.getAdBreakInfo=function(){return this._heartbeat&&this._heartbeat._adBreakInfo?this._heartbeat._adBreakInfo:null},a.prototype.getAdInfo=function(){return this._heartbeat&&this._heartbeat._adInfo?this._heartbeat._adInfo:null},a.prototype.getChapterInfo=function(){return this._heartbeat&&this._heartbeat._chapterInfo?this._heartbeat._chapterInfo:null},a.prototype.getQoSInfo=function(){if(this._heartbeat&&this._heartbeat._delegate&&this._heartbeat._delegate.getQoSObject()){var e=this._heartbeat._delegate.getQoSObject();if(e&&"object"==typeof e&&e.setValue)return e.createQoSInfo()}return null},t._MediaAnalyticsPluginDelegate=n,t._MediaHeartbeatPluginDelegate=i,t._ADBMediaHeartbeatDelegate=r,t._MediaHeartbeatVideoPlayerPluginDelegate=a}(F.ADB.core,F.ADB.va),function(e,n){"use strict";function i(e,t){i.__super__.constructor.call(this),this._heartbeat=e,this._logger=t,this._validator=new n.plugins.nielsen.MetadataValidator(t)}var t="MediaHeartbeatNielsenPluginDelegate",r={NielsenContentMetadata:"media_nielsen_content_metadata",NielsenChannelMetadata:"media_nielsen_channel_metadata",NielsenAdMetadata:"media_nielsen_ad_metadata"};n.plugins.nielsen&&e.extend(i,n.plugins.nielsen.NielsenPluginDelegate),i.prototype.getMetadataInfo=function(){if(this._heartbeat&&this._heartbeat._currentMediaObject){var e=this._heartbeat._currentMediaObject.getValue(r.NielsenContentMetadata);if(e&&"object"==typeof e)return this._validator.validateContentMetadata(e,"MediaHeartbeat.NielsenContentMetadataKeys"),e;this._logger.warn(t,"We expect a valid object for MediaHeartbeat.MediaObjectKey.NielsenContentMetadata in MediaObject")}return null},i.prototype.getAdMetadataInfo=function(){if(this._heartbeat&&this._heartbeat._currentAdObject){var e=this._heartbeat._currentAdObject.getValue(r.NielsenAdMetadata);if(e&&"object"==typeof e)return this._validator.validateAdMetadata(e,"MediaHeartbeat.NielsenAdMetadataKeys"),e;this._logger.warn(t,"We expect a valid object for MediaHeartbeat.MediaObjectKey.NielsenAdMetadata in MediaObject")}return null},i.prototype.getChannelInfo=function(){if(this._heartbeat&&this._heartbeat._currentMediaObject){var e=this._heartbeat._currentMediaObject.getValue(r.NielsenChannelMetadata);if(e&&"object"==typeof e)return this._validator.validateChannelMetadata(e,"MediaHeartbeat.NielsenChannelMetadataKeys"),e;this._logger.warn(t,"We expect a valid object for MediaHeartbeat.MediaObjectKey.NielsenChannelMetadata in MediaObject")}return null},i.prototype.onError=function(e){this._heartbeat&&this._heartbeat._onDelegateError(e)},n.plugins.nielsen&&(n._NielsenObjectKey=r,n._NielsenPluginDelegate=i)}(F.ADB.core,F.ADB.va),function(e,i){"use strict";function t(){}function o(e,t,n){if(this._appMeasurement=n||F.s,!this._appMeasurement)throw new Error("MediaHeartbeat needs a valid AppMeasurement instance.");if(!this._appMeasurement.visitor||!this._appMeasurement.visitor.marketingCloudOrgID)throw new Error("MediaHeartbeat needs a valid visitor instance with marketingCloudOrgId set.");if(!e)throw new Error("MediaHeartbeat needs a valid delegate object.");if(!t||"object"!=typeof t||!t.trackingServer)throw new Error("MediaHeartbeat needs a valid config object with trackingServer set.");this._config=t,this._delegate=e,this._debugLogging=i.MediaHeartbeat._debugLogging||this._config.debugLogging,this._logger=new r,this._debugLogging?this._logger.enable():this._logger.disable(),this._ruleEngine=new m(this._logger),this._taskScheduler=new y(this._logger),this._resetState(),this._setupRules()}var r=e.Logger,s=i.MediaObject,n=i.Heartbeat,a=i.HeartbeatConfig,l=i._ADBMediaHeartbeatDelegate,c=i.plugins.videoplayer.VideoPlayerPlugin,u=i.plugins.videoplayer.VideoPlayerPluginConfig,d=i._MediaHeartbeatVideoPlayerPluginDelegate,h=i.plugins.aa.AdobeAnalyticsPlugin,p=i.plugins.aa.AdobeAnalyticsPluginConfig,_=i._MediaAnalyticsPluginDelegate,f=i.plugins.ah.AdobeHeartbeatPlugin,g=i.plugins.ah.AdobeHeartbeatPluginConfig,v=i._MediaHeartbeatPluginDelegate,m=i._RuleEngine,y=i._TaskScheduler,S=i.utils.ObjectUtils,E=i.utils.VersionUtils;t.prototype.getCurrentPlaybackTime=function(){return null},t.prototype.getQoSObject=function(){return null},o.MediaType={Video:"video",Audio:"audio"},o.Event={AdBreakStart:"adBreakStart",AdBreakComplete:"adBreakComplete",AdStart:"adStart",AdComplete:"adComplete",AdSkip:"adSkip",ChapterStart:"chapterStart",ChapterComplete:"chapterComplete",ChapterSkip:"chapterSkip",SeekStart:"seekStart",SeekComplete:"seekComplete",BufferStart:"bufferStart",BufferComplete:"bufferComplete",BitrateChange:"bitrateChange",TimedMetadataUpdate:"timedMetadataUpdate"},o.StreamType={VOD:"vod",LIVE:"live",LINEAR:"linear",PODCAST:"podcast",AUDIOBOOK:"audiobook",AOD:"aod"},o.MediaObjectKey={StandardVideoMetadata:"media_standard_content_metadata",StandardMediaMetadata:"media_standard_content_metadata",StandardAdMetadata:"media_standard_ad_metadata",VideoResumed:"resumed",MediaResumed:"resumed",PrerollTrackingWaitingTime:"preroll_tracking_waiting_time"},o.VideoMetadataKeys=i.plugins.aa.VideoMetadataKeys,o.AudioMetadataKeys=i.plugins.aa.AudioMetadataKeys,o.AdMetadataKeys=i.plugins.aa.AdMetadataKeys,o.createMediaObject=function(e,t,n,i,r){var a=new s;a.setValue(s.MEDIAINFO_KEY_VIDEOID,t),a.setValue(s.MEDIAINFO_KEY_NAME,e),a.setValue(s.MEDIAINFO_KEY_LENGTH,n),a.setValue(s.MEDIAINFO_KEY_PLAYHEAD,0);i=i||o.StreamType.VOD;return a.setValue(s.MEDIAINFO_KEY_STREAMTYPE,i),("string"!=typeof r||r!=o.MediaType.Video&&r!=o.MediaType.Audio)&&(r=o.MediaType.Video),a.setValue(s.MEDIAINFO_KEY_MEDIATYPE,r),a},o.createAdBreakObject=function(e,t,n){var i=new s;return i.setValue(s.MEDIAINFO_KEY_NAME,e),i.setValue(s.MEDIAINFO_KEY_POSITION,t),i.setValue(s.MEDIAINFO_KEY_STARTTIME,n),i},o.createAdObject=function(e,t,n,i){var r=new s;return r.setValue(s.MEDIAINFO_KEY_NAME,e),r.setValue(s.MEDIAINFO_KEY_ADID,t),r.setValue(s.MEDIAINFO_KEY_POSITION,n),r.setValue(s.MEDIAINFO_KEY_LENGTH,i),r},o.createChapterObject=function(e,t,n,i){var r=new s;return r.setValue(s.MEDIAINFO_KEY_NAME,e),r.setValue(s.MEDIAINFO_KEY_POSITION,t),r.setValue(s.MEDIAINFO_KEY_LENGTH,n),r.setValue(s.MEDIAINFO_KEY_STARTTIME,i),r},o.createQoSObject=function(e,t,n,i){var r=new s;return r.setValue(s.MEDIAINFO_KEY_BITRATE,e),r.setValue(s.MEDIAINFO_KEY_FPS,n),r.setValue(s.MEDIAINFO_KEY_DROPPEDFRAMES,i),r.setValue(s.MEDIAINFO_KEY_STARTUPTIME,t),r},o.createTimedMetadataObject=function(e){var t=new s;return t.setValue(s.MEDIAINFO_KEY_TIMEDMETADATA,e),t},o.version=function(){return i.Version.getVersion()},o.prototype.trackSessionStart=function(e,t){this._logger.info(w,"#::trackSessionStart()");var n=m.createContext();n.setData(C,e),n.setData(D,this._cleanContextData(t)),this._processRule(T.SessionStart,n)},o.prototype.trackPlay=function(){this._logger.info(w,"#::trackPlay()"),this._processRule(T.Play)},o.prototype.trackPause=function(){this._logger.info(w,"#::trackPause()"),this._processRule(T.Pause)},o.prototype.trackComplete=function(){this._logger.info(w,"#::trackComplete()"),this._processRule(T.VideoComplete)},o.prototype.trackSessionEnd=function(){this._logger.info(w,"#::trackSessionEnd()"),this._processRule(T.SessionEnd)},o.prototype.trackError=function(e){this._logger.info(w,"#::trackError()");var t=m.createContext();t.setData(O,e),this._processRule(T.Error,t)},o.prototype.trackEvent=function(e,t,n){this._logger.info(w,"#::trackEvent() - "+e);var i,r=m.createContext();switch(e){case o.Event.AdBreakStart:r.setData(I,t),r.setData(D,this._cleanContextData(n)),i=T.AdBreakStart;break;case o.Event.AdBreakComplete:i=T.AdBreakComplete;break;case o.Event.AdStart:r.setData(P,t),r.setData(D,this._cleanContextData(n)),i=T.AdStart;break;case o.Event.AdComplete:i=T.AdComplete;break;case o.Event.AdSkip:i=T.AdSkip;break;case o.Event.SeekStart:i=T.SeekStart;break;case o.Event.SeekComplete:i=T.SeekComplete;break;case o.Event.ChapterStart:r.setData(k,t),r.setData(D,this._cleanContextData(n)),i=T.ChapterStart;break;case o.Event.ChapterComplete:i=T.ChapterComplete;break;case o.Event.ChapterSkip:i=T.ChapterSkip;break;case o.Event.BufferStart:i=T.BufferStart;break;case o.Event.BufferComplete:i=T.BufferComplete;break;case o.Event.BitrateChange:i=T.BitrateChange;break;case o.Event.TimedMetadataUpdate:i=T.TimedMetadataUpdate,r.setData(M,t);break;default:return void this._logger.error(w,"Incorrect event name.")}this._processRule(i,r)},i.plugins.nielsen&&((e=i.MediaHeartbeatConfig).prototype.nielsenConfigKey=void 0,e.prototype.nielsenAppInfo=void 0,e=i._NielsenObjectKey,o.MediaObjectKey.NielsenContentMetadata=e.NielsenContentMetadata,o.MediaObjectKey.NielsenAdMetadata=e.NielsenAdMetadata,o.MediaObjectKey.NielsenChannelMetadata=e.NielsenChannelMetadata,o.NielsenContentMetadataKeys=i.plugins.nielsen.ContentMetadataKeys,o.NielsenChannelMetadataKeys=i.plugins.nielsen.ChannelMetadataKeys,o.NielsenAdMetadataKeys=i.plugins.nielsen.AdMetadataKeys,o.prototype.nielsenLoadMetadata=function(e){this._nielsenPlugin&&this._nielsenPlugin.loadMetadata(e)}),o.prototype._setState=function(e,t){this._mediaState[e]=t},o.prototype._isInState=function(e){return this._mediaState[e]},o.prototype._isTrackingDisabled=function(e){return this._mediaHeartbeatDisabled},o.prototype._isInSession=function(e){return this._isInState(b.Session)},o.prototype._isInMedia=function(e){return this._isInState(b.Media)},o.prototype._isInAd=function(e){return this._isInState(b.Ad)},o.prototype._isInAdBreak=function(e){return this._isInState(b.AdBreak)},o.prototype._isInChapter=function(e){return this._isInState(b.Chapter)},o.prototype._isInPlay=function(e){return this._isInState(b.PlayPause)},o.prototype._isInPause=function(e){return!this._isInState(b.PlayPause)},o.prototype._isInBuffer=function(e){return this._isInState(b.Buffer)},o.prototype._isInSeek=function(e){return this._isInState(b.Seek)},o.prototype._isPlatformTrackingSupported=function(e){return!this._appMeasurement.unsupportedBrowser},o.prototype._isAudioTrackingSupported=function(e){return e.getData(C).getValue(s.MEDIAINFO_KEY_MEDIATYPE)!==o.MediaType.Audio||E.isGreaterThanEqual(this._appMeasurement.version,"2.11.0")},o.prototype._isValidMediaObject=function(e){var t=e.getData(C);if(t&&t instanceof s){e=t.getValue(o.MediaObjectKey.MediaResumed);null!=e&&"boolean"!=typeof e&&this._logger.warn(w,"Ignoring value set for MediaHeartbeat.MediaObjectKey.MediaResumed in MediaObject as we expect a boolean value");e=t.getValue(o.MediaObjectKey.PrerollTrackingWaitingTime);null==e||("string"!=typeof e&&"number"!=typeof e||isNaN(e))&&this._logger.warn(w,"Ignoring value set for MediaHeartbeat.MediaObjectKey.PrerollTrackingWaitingTime in MediaObject as we expect a valid duration as number in milliseconds.");t=t.getValue(o.MediaObjectKey.StandardMediaMetadata);return null!=t&&"object"!=typeof t&&this._logger.warn(w,"Ignoring value set for MediaHeartbeat.MediaObjectKey.StandardMediaMetadata in MediaObject as we expect a valid object with kv pairs."),!0}return!1},o.prototype._isValidAdBreakObject=function(e){e=e.getData(I);return e&&e instanceof s},o.prototype._isDifferentAdBreakObject=function(e){e=e.getData(I);return!(this._currentAdBreakObject&&this._currentAdBreakObject.isEqual(e))},o.prototype._isValidAdObject=function(e){var t=e.getData(P);if(t&&t instanceof s){e=t.getValue(L);null!=e&&"boolean"!=typeof e&&this._logger.warn(w,"Ignoring value set for MediaHeartbeat.MediaObjectKey.GranularAdTracking in AdObject as we expect a boolean value.");t=t.getValue(o.MediaObjectKey.StandardAdMetadata);return null!=t&&"object"!=typeof t&&this._logger.warn(w,"Ignoring value set for MediaHeartbeat.MediaObjectKey.StandardAdMetadata in AdObject as we expect a valid object with kv pairs."),!0}return!1},o.prototype._isDifferentAdObject=function(e){e=e.getData(P);return!(this._currentAdObject&&this._currentAdObject.isEqual(e))},o.prototype._isValidChapterObject=function(e){e=e.getData(k);return e&&e instanceof s},o.prototype._isDifferentChapterObject=function(e){e=e.getData(k);return!(this._currentChapterObject&&this._currentChapterObject.isEqual(e))},o.prototype._isValidTimedMetadataObject=function(e){e=e.getData(M);if(e&&e instanceof s){e=e.getValue(s.MEDIAINFO_KEY_TIMEDMETADATA);return e&&"string"==typeof e}return!1},o.prototype._shouldAllowPlayerStateChange=function(e){return!(this._isInState(b.AdBreak)&&!this._isInState(b.Ad))},o.prototype._deferredTrackPlay=function(){this._prerollWaitEnabled&&(this._logger.info(w,"Executing deferred API:trackPlay."),this._prerollWaitEnabled=!1,this._playTaskHandle=null,this._processRule(T.Play))},o.prototype._cmdEnterAction=function(e){var t=e.getRuleName();if(this._prerollWaitEnabled)if(this._playReceived)switch(t){case T.SeekStart:case T.BufferStart:this._logger.info(w,"Cancelling scheduled API:trackPlay because of SeekStart/BufferStart event"),this._taskScheduler.cancelTask(this._playTaskHandle),this._playTaskHandle=null;break;case T.SeekComplete:case T.BufferComplete:this._logger.info(w,"Rescheduled API:trackPlay after SeekComplete/BufferComplete event"),this._playTaskHandle=this._taskScheduler.scheduleTask(this._deferredTrackPlay,this,this._prerollWaitTime);break;case T.Play:this._logger.info(w,"Dropping API:trackPlay as we already have a API:trackPlay scheduled."),e.stopProcessingAction();break;case T.Pause:this._logger.info(w,"Cancelling scheduled API:trackPlay because of API:trackPause call."),this._taskScheduler.cancelTask(this._playTaskHandle),this._playTaskHandle=null,this._prerollWaitEnabled=!1;break;case T.AdBreakStart:this._logger.info(w,"Received API:trackEvent(AdBreakStart) within "+this._prerollWaitTime+" ms after API:trackPlay. We will track this as preroll AdBreak."),this._taskScheduler.cancelTask(this._playTaskHandle),this._playTaskHandle=null,this._prerollWaitEnabled=!1,this._playAfterAdStart=!0}else switch(t){case T.Play:this._logger.info(w,"Deferring API:trackPlay for "+this._prerollWaitTime+" ms."),this._playReceived=!0,this._playTaskHandle=this._taskScheduler.scheduleTask(this._deferredTrackPlay,this,this._prerollWaitTime),e.stopProcessingAction();break;case T.AdBreakStart:this._logger.info(w,"Received trackEvent(AdBreakStart) before first trackPlay."),this._prerollWaitEnabled=!1}},o.prototype._cmdExitAction=function(e){var t=e.getRuleName();this._playAfterAdStart&&(t===T.AdStart?(this._cmdPlay(e),this._playAfterAdStart=!1):t===T.AdBreakComplete&&(this._playAfterAdStart=!1)),t!==T.AdStart||this._isInState(b.FPlayPause)||this._cmdPlay(e)},o.prototype._cmdConfigure=function(e){this._resetState(),this._configureAdobeAnalyticsPlugin(),this._configureAdobeHearbeatPlugin(),this._configureVideoPlayerPlugin(),this._configureOtherPlugins(),this._configureHeartbeat()},o.prototype._cmdSessionStart=function(e){var t=e.getData(C),n=e.getData(D);this._currentMediaObject=t,this._videoInfo=t.createVideoInfo(),this._videoInfo.playerName=this._config.playerName||"";var i=t.getValue(o.MediaObjectKey.StandardMediaMetadata);i&&"object"==typeof i||(i=null);e=t.getValue(o.MediaObjectKey.MediaResumed);"boolean"==typeof e&&(this._videoInfo.resumed=e);t=t.getValue(o.MediaObjectKey.PrerollTrackingWaitingTime);"string"!=typeof t&&"number"!=typeof t||isNaN(t)||(this._prerollWaitTime=Number(t),this._prerollWaitTime<=0&&(this._prerollWaitEnabled=!1));n=this._prepareMetadata(i,n);n[R]=this._videoInfo.mediaType,this._aaPlugin.setVideoMetadata(n),this._playerPlugin.trackVideoLoad(),this._playerPlugin.trackSessionStart(),this._setState(b.Session,!0),this._setState(b.Media,!0)},o.prototype._cmdVideoEnd=function(e){var t,n,e=e.getRuleName()===T.VideoComplete;this._isInState(b.Media)&&(t=this._heartbeat,n=this._playerPlugin,this._playerPlugin.trackComplete(function(){n&&n.trackVideoUnload(),t&&t.destroy()},e)),this._setState(b.Media,!1)},o.prototype._cmdHandleMediaComplete=function(e){this._isInMedia(e)||(this._logger.info(w,"API:trackComplete has already cleaned up Heartbeat instance."),this._cmdSessionEnd(e),e.stopProcessingAction())},o.prototype._cmdSessionEnd=function(e){this._setState(b.Session,!1),this._resetState()},o.prototype._cmdDisableTracking=function(e){this._logger.info(w,"#_cmdDisableTracking: ADBMediaHeartbeat Tracking Disabled Remotely."),this._mediaHeartbeatDisabled=!0},o.prototype._cmdBufferStart=function(e){this._playerPlugin.trackBufferStart(),this._setState(b.Buffer,!0)},o.prototype._cmdBufferComplete=function(e){this._isInState(b.Buffer)&&this._playerPlugin.trackBufferComplete(),this._setState(b.Buffer,!1)},o.prototype._cmdSeekStart=function(e){this._playerPlugin.trackSeekStart(),this._setState(b.Seek,!0)},o.prototype._cmdSeekComplete=function(e){this._isInState(b.Seek)&&this._playerPlugin.trackSeekComplete(),this._setState(b.Seek,!1)},o.prototype._cmdPlay=function(e){this._playerPlugin.trackPlay(),this._setState(b.PlayPause,!0),this._setState(b.FPlayPause,!0)},o.prototype._cmdPause=function(e){this._playerPlugin.trackPause(),this._setState(b.PlayPause,!1),this._setState(b.FPlayPause,!0)},o.prototype._cmdAdBreakStart=function(e){e=e.getData(I);this._currentAdBreakObject=e,this._adBreakInfo=e.createAdBreakInfo(),this._adBreakInfo.playerName=this._config.playerName||"",this._playerPlugin.trackAdBreakStart(),this._setState(b.AdBreak,!0)},o.prototype._cmdAdBreakComplete=function(e){this._currentAdBreakObject=null,this._adBreakInfo=null,this._isInState(b.AdBreak)&&this._playerPlugin.trackAdBreakComplete(),this._setState(b.AdBreak,!1)},o.prototype._cmdAdStart=function(e){var t=e.getData(P),n=e.getData(D);this._currentAdObject=t,this._adInfo=t.createAdInfo();e=t.getValue(L);"boolean"==typeof e&&(this._adInfo.granularTracking=e);t=t.getValue(o.MediaObjectKey.StandardAdMetadata),n=this._prepareMetadata(t=!t||"object"!=typeof t?null:t,n);this._aaPlugin.setAdMetadata(n),this._playerPlugin.trackAdStart(),this._setState(b.Ad,!0)},o.prototype._cmdAdComplete=function(e){this._currentAdObject=null,this._adInfo=null,this._isInState(b.Ad)&&this._playerPlugin.trackAdComplete(),this._setState(b.Ad,!1)},o.prototype._cmdAdSkip=function(e){this._currentAdObject=null,this._adInfo=null,this._isInState(b.Ad)&&this._playerPlugin.trackAdSkip(),this._setState(b.Ad,!1)},o.prototype._cmdChapterStart=function(e){var t=e.getData(k),e=e.getData(D);this._currentChapterObject=t,this._chapterInfo=t.createChapterInfo();e=this._prepareMetadata(null,e);this._aaPlugin.setChapterMetadata(e),this._playerPlugin.trackChapterStart(),this._setState(b.Chapter,!0)},o.prototype._cmdChapterComplete=function(e){this._currentChapterObject=null,this._chapterInfo=null,this._isInState(b.Chapter)&&this._playerPlugin.trackChapterComplete(),this._setState(b.Chapter,!1)},o.prototype._cmdChapterSkip=function(e){this._currentChapterObject=null,this._chapterInfo=null,this._isInState(b.Chapter)&&this._playerPlugin.trackChapterSkip(),this._setState(b.Chapter,!1)},o.prototype._cmdError=function(e){e=e.getData(O)||"unknown_error_id";this._playerPlugin.trackVideoPlayerError(e)},o.prototype._cmdBitrate=function(e){this._playerPlugin.trackBitrateChange()},o.prototype._cmdTimedMetadataUpdate=function(e){e=e.getData(M).getValue(s.MEDIAINFO_KEY_TIMEDMETADATA);this._playerPlugin.trackTimedMetadata(e)},o.prototype._processRule=function(e,t){return this._ruleEngine.processRule(e,t)},o.prototype._setupRules=function(){this._ruleEngine.registerEnterExitAction(this._cmdEnterAction,this._cmdExitAction),this._ruleEngine.registerRule(T.SessionStart,"API:trackSessionStart",[m.createPredicate(this._isPlatformTrackingSupported,!0,A.ErrUnSupportedPlatform),m.createPredicate(this._isTrackingDisabled,!1,A.ErrTrackingDisabled),m.createPredicate(this._isInSession,!1,A.ErrInSession),m.createPredicate(this._isValidMediaObject,!0,A.ErrInvalidMediaObject),m.createPredicate(this._isAudioTrackingSupported,!0,A.ErrAudioTrackingNotSupported)],[this._cmdConfigure,this._cmdSessionStart],this),this._ruleEngine.registerRule(T.SessionEnd,"API:trackSessionEnd",[m.createPredicate(this._isInSession,!0,A.ErrNotInSession)],[this._cmdHandleMediaComplete,this._cmdAdSkip,this._cmdAdBreakComplete,this._cmdChapterSkip,this._cmdVideoEnd,this._cmdSessionEnd],this),this._ruleEngine.registerRule(T.VideoComplete,"API:trackComplete",[m.createPredicate(this._isInSession,!0,A.ErrNotInSession),m.createPredicate(this._isInMedia,!0,A.ErrNotInMedia)],[this._cmdAdSkip,this._cmdAdBreakComplete,this._cmdChapterSkip,this._cmdVideoEnd],this),this._ruleEngine.registerRule(T.DisableTracking,"DisableTracking",[m.createPredicate(this._isTrackingDisabled,!1,A.ErrTrackingDisabled)],[this._cmdDisableTracking],this),this._ruleEngine.registerRule(T.Error,"API:trackError",[m.createPredicate(this._isInSession,!0,A.ErrNotInSession),m.createPredicate(this._isInMedia,!0,A.ErrNotInMedia)],[this._cmdError],this),this._ruleEngine.registerRule(T.Play,"API:trackPlay",[m.createPredicate(this._isInSession,!0,A.ErrNotInSession),m.createPredicate(this._isInMedia,!0,A.ErrNotInMedia),m.createPredicate(this._shouldAllowPlayerStateChange,!0,A.ErrInvalidPlayerState)],[this._cmdSeekComplete,this._cmdBufferComplete,this._cmdPlay],this),this._ruleEngine.registerRule(T.Pause,"API:trackPause",[m.createPredicate(this._isInSession,!0,A.ErrNotInSession),m.createPredicate(this._isInMedia,!0,A.ErrNotInMedia),m.createPredicate(this._shouldAllowPlayerStateChange,!0,A.ErrInvalidPlayerState),m.createPredicate(this._isInBuffer,!1,A.ErrInBuffer),m.createPredicate(this._isInSeek,!1,A.ErrInSeek)],[this._cmdPause],this),this._ruleEngine.registerRule(T.BufferStart,"API:trackEvent(BufferStart)",[m.createPredicate(this._isInSession,!0,A.ErrNotInSession),m.createPredicate(this._isInMedia,!0,A.ErrNotInMedia),m.createPredicate(this._shouldAllowPlayerStateChange,!0,A.ErrInvalidPlayerState),m.createPredicate(this._isInBuffer,!1,A.ErrInBuffer),m.createPredicate(this._isInSeek,!1,A.ErrInSeek)],[this._cmdBufferStart],this),this._ruleEngine.registerRule(T.BufferComplete,"API:trackEvent(BufferComplete)",[m.createPredicate(this._isInSession,!0,A.ErrNotInSession),m.createPredicate(this._isInMedia,!0,A.ErrNotInMedia),m.createPredicate(this._shouldAllowPlayerStateChange,!0,A.ErrInvalidPlayerState),m.createPredicate(this._isInBuffer,!0,A.ErrNotInBuffer)],[this._cmdBufferComplete],this),this._ruleEngine.registerRule(T.SeekStart,"API:trackEvent(SeekStart)",[m.createPredicate(this._isInSession,!0,A.ErrNotInSession),m.createPredicate(this._isInMedia,!0,A.ErrNotInMedia),m.createPredicate(this._shouldAllowPlayerStateChange,!0,A.ErrInvalidPlayerState),m.createPredicate(this._isInSeek,!1,A.ErrInSeek),m.createPredicate(this._isInBuffer,!1,A.ErrInBuffer)],[this._cmdSeekStart],this),this._ruleEngine.registerRule(T.SeekComplete,"API:trackEvent(SeekComplete)",[m.createPredicate(this._isInSession,!0,A.ErrNotInSession),m.createPredicate(this._isInMedia,!0,A.ErrNotInMedia),m.createPredicate(this._shouldAllowPlayerStateChange,!0,A.ErrInvalidPlayerState),m.createPredicate(this._isInSeek,!0,A.ErrNotInSeek)],[this._cmdSeekComplete],this),this._ruleEngine.registerRule(T.AdBreakStart,"API:trackEvent(AdBreakStart)",[m.createPredicate(this._isInSession,!0,A.ErrNotInSession),m.createPredicate(this._isInMedia,!0,A.ErrNotInMedia),m.createPredicate(this._isValidAdBreakObject,!0,A.ErrInvalidAdBreakObject),m.createPredicate(this._isDifferentAdBreakObject,!0,A.ErrDuplicateAdBreakObject)],[this._cmdAdSkip,this._cmdAdBreakComplete,this._cmdAdBreakStart],this),this._ruleEngine.registerRule(T.AdBreakComplete,"API:trackEvent(AdBreakComplete)",[m.createPredicate(this._isInSession,!0,A.ErrNotInSession),m.createPredicate(this._isInMedia,!0,A.ErrNotInMedia),m.createPredicate(this._isInAdBreak,!0,A.ErrNotInAdBreak)],[this._cmdAdSkip,this._cmdAdBreakComplete],this),this._ruleEngine.registerRule(T.AdStart,"API:trackEvent(AdStart)",[m.createPredicate(this._isInSession,!0,A.ErrNotInSession),m.createPredicate(this._isInMedia,!0,A.ErrNotInMedia),m.createPredicate(this._isInAdBreak,!0,A.ErrNotInAdBreak),m.createPredicate(this._isValidAdObject,!0,A.ErrInvalidAdObject),m.createPredicate(this._isDifferentAdObject,!0,A.ErrDuplicateAdObject)],[this._cmdAdSkip,this._cmdAdStart],this),this._ruleEngine.registerRule(T.AdComplete,"API:trackEvent(AdComplete)",[m.createPredicate(this._isInSession,!0,A.ErrNotInSession),m.createPredicate(this._isInMedia,!0,A.ErrNotInMedia),m.createPredicate(this._isInAdBreak,!0,A.ErrNotInAdBreak),m.createPredicate(this._isInAd,!0,A.ErrNotInAd)],[this._cmdAdComplete],this),this._ruleEngine.registerRule(T.AdSkip,"API:trackEvent(AdSkip)",[m.createPredicate(this._isInSession,!0,A.ErrNotInSession),m.createPredicate(this._isInMedia,!0,A.ErrNotInMedia),m.createPredicate(this._isInAdBreak,!0,A.ErrNotInAdBreak),m.createPredicate(this._isInAd,!0,A.ErrNotInAd)],[this._cmdAdSkip],this),this._ruleEngine.registerRule(T.ChapterStart,"API:trackEvent(ChapterStart)",[m.createPredicate(this._isInSession,!0,A.ErrNotInSession),m.createPredicate(this._isInMedia,!0,A.ErrNotInMedia),m.createPredicate(this._isValidChapterObject,!0,A.ErrInvalidChapterObject),m.createPredicate(this._isDifferentChapterObject,!0,A.ErrDuplicateChapterObject)],[this._cmdChapterSkip,this._cmdChapterStart],this),this._ruleEngine.registerRule(T.ChapterComplete,"API:trackEvent(ChapterComplete)",[m.createPredicate(this._isInSession,!0,A.ErrNotInSession),m.createPredicate(this._isInMedia,!0,A.ErrNotInMedia),m.createPredicate(this._isInChapter,!0,A.ErrNotInChapter)],[this._cmdChapterComplete],this),this._ruleEngine.registerRule(T.ChapterSkip,"API:trackEvent(ChapterSkip)",[m.createPredicate(this._isInSession,!0,A.ErrNotInSession),m.createPredicate(this._isInMedia,!0,A.ErrNotInMedia),m.createPredicate(this._isInChapter,!0,A.ErrNotInChapter)],[this._cmdChapterSkip],this),this._ruleEngine.registerRule(T.BitrateChange,"API:trackEvent(BitrateChange)",[m.createPredicate(this._isInSession,!0,A.ErrNotInSession),m.createPredicate(this._isInMedia,!0,A.ErrNotInMedia)],[this._cmdBitrate],this),this._ruleEngine.registerRule(T.TimedMetadataUpdate,"API:trackEvent(TimedMetadataUpdate)",[m.createPredicate(this._isInSession,!0,A.ErrNotInSession),m.createPredicate(this._isInMedia,!0,A.ErrNotInMedia),m.createPredicate(this._isValidTimedMetadataObject,!0,A.ErrInvalidTimedMetadataObject)],[this._cmdTimedMetadataUpdate],this)},o.prototype._configureAdobeAnalyticsPlugin=function(){this._aaPlugin=new h(this._appMeasurement,new _(this));var e=new p;e.channel=this._config.channel||"",e.debugLogging=i.MediaHeartbeat._debugLogging||this._config.debugLogging,this._aaPlugin.configure(e),this._plugins.push(this._aaPlugin)},o.prototype._configureAdobeHearbeatPlugin=function(){var e=this._appMeasurement.visitor?this._appMeasurement.visitor.marketingCloudOrgID:"";this._ahPlugin=new f(new v(this));var t=new g(this._config.trackingServer,e);t.debugLogging=i.MediaHeartbeat._debugLogging||this._config.debugLogging,t.ovp=this._config.ovp||"",t.ssl=this._config.ssl,t.sdk=this._config.appVersion||"";e=this._primetimeTVSDKVersion();e&&0<e.length&&(t.__primetime=!0,t.__psdkVersion=e),this._ahPlugin.configure(t),this._plugins.push(this._ahPlugin)},o.prototype._configureVideoPlayerPlugin=function(){this._playerPlugin=new c(new d(this));var e=new u;e.debugLogging=i.MediaHeartbeat._debugLogging||this._config.debugLogging,this._playerPlugin.configure(e),this._plugins.push(this._playerPlugin)},o.prototype._configureOtherPlugins=function(){var e;i.plugins.nielsen&&this._config.nielsenConfigKey&&this._config.nielsenAppInfo&&(this._nielsenPlugin=new i.plugins.nielsen.NielsenPlugin(new i._NielsenPluginDelegate(this,this._logger)),(e=new i.plugins.nielsen.NielsenPluginConfig).debugLogging=i.MediaHeartbeat._debugLogging||this._config.debugLogging,e.appInfo=this._config.nielsenAppInfo,e.configKey=this._config.nielsenConfigKey,this._nielsenPlugin.configure(e),this._plugins.push(this._nielsenPlugin))},o.prototype._configureHeartbeat=function(){var e=new a;e.debugLogging=i.MediaHeartbeat._debugLogging||this._config.debugLogging,this._heartbeat=new n(new l(this),this._plugins),this._heartbeat.configure(e)},o.prototype._resetState=function(){this._taskScheduler.clearTasks(),this._mediaState={},this._plugins=[],this._playerPlugin=null,this._aaPlugin=null,this._ahPlugin=null,this._nielsenPlugin=null,this._heartbeat=null,this._currentMediaObject=null,this._currentAdBreakObject=null,this._currentAdObject=null,this._currentChapterObject=null,this._videoInfo=null,this._adBreakInfo=null,this._adInfo=null,this._chapterInfo=null,this._prerollWaitEnabled=!0,this._prerollWaitTime=x,this._playReceived=!1,this._playTaskHandle=null,this._playAfterAdStart=!1},o.prototype._primetimeTVSDKVersion=function(){return this._currentMediaObject?this._currentMediaObject.getValue(N):null},o.prototype._cleanContextData=function(e){if(null==e||"object"!=typeof e)return null;var t,n,i={};for(t in e)e.hasOwnProperty(t)&&("number"!=typeof(n=e[t])&&"string"!=typeof n&&"boolean"!=typeof n||(i[t]=n));return i},o.prototype._prepareMetadata=function(e,t){var n={};return t&&S.append(n,t),e&&(e=this._cleanContextData(e),S.append(n,e)),delete n[R],n},o.prototype._onDelegateError=function(e){this._logger.error(w,e.getMessage()+" | "+e.getDetails())},o.prototype._disableHBTracking=function(){var e=m.createContext();this._processRule(T.DisableTracking,e),this._processRule(T.SessionEnd,e)};var b={Session:0,Media:1,AdBreak:2,Ad:3,Chapter:4,PlayPause:5,Buffer:6,Seek:7,FPlayPause:8},T={SessionStart:0,SessionEnd:1,VideoComplete:2,Play:3,Pause:4,Error:5,AdBreakStart:6,AdBreakComplete:7,AdStart:8,AdComplete:9,AdSkip:10,ChapterStart:11,ChapterComplete:12,ChapterSkip:13,SeekStart:14,SeekComplete:15,BufferStart:16,BufferComplete:17,BitrateChange:18,TimedMetadataUpdate:19,DisableTracking:20},A={ErrUnSupportedPlatform:"MediaHeartbeat does not support tracking due to AppMeasurement or VisitorAPI not supporting the browser.",ErrNotInSession:'MediaHeartbeat is not in active tracking session, call "API:trackSessionStart" to begin a new tracking session.',ErrInSession:'MediaHeartbeat is in active tracking session, call "API:trackSessionEnd" to end current tracking session.',ErrTrackingDisabled:"MediaHeartbeat tracking is disabled for this publisher. Please contact Adobe Representative to enable tracking.",ErrNotInMedia:'MediaHeartbeat has completed tracking session, call "API:trackSessionEnd" first to end current session and then begin a new tracking session.',ErrInBuffer:'MediaHeartbeat is tracking buffer events, call "API:trackEvent(BufferComplete)" first to stop tracking buffer events.',ErrNotInBuffer:'MediaHeartbeat is not tracking buffer events, call "API:trackEvent(BufferStart)" before "API:trackEvent(BufferComplete)".',ErrInSeek:'MediaHeartbeat is tracking seek events, call "API:trackEvent(SeekComplete)" first to stop tracking seek events.',ErrNotInSeek:'MediaHeartbeat is not tracking seek events, call "API:trackEvent(SeekStart)" before "API:trackEvent(SeekComplete)".',ErrNotInAdBreak:'MediaHeartbeat is not tracking any AdBreak, call "API:trackEvent(AdBreakStart)" to begin tracking AdBreak',ErrNotInAd:'MediaHeartbeat is not tracking any Ad, call "API:trackEvent(AdStart)" to begin tracking Ad',ErrNotInChapter:'MediaHeartbeat is not tracking any Chapter, call "API:trackEvent(ChapterStart)" to begin tracking Chapter',ErrInvalidMediaObject:'MediaInfo passed into "API:trackSessionStart" is invalid.',ErrInvalidAdBreakObject:'AdBreakInfo passed into "API:trackEvent(AdBreakStart)" is invalid.',ErrDuplicateAdBreakObject:'MediaHeartbeat is currently tracking the AdBreak passed into "API:trackEvent(AdBreakStart)".',ErrInvalidAdObject:'AdInfo passed into "API:trackEvent(AdStart)" is invalid.',ErrDuplicateAdObject:'MediaHeartbeat is currently tracking the Ad passed into "API:trackEvent(AdStart)".',ErrInvalidChapterObject:'ChapterInfo passed into "API:trackEvent(ChapterStart)" is invalid.',ErrDuplicateChapterObject:'MediaHeartbeat is currently tracking the Chapter passed into "API:trackEvent(ChapterStart)".',ErrInvalidTimedMetadataObject:'TimedMetadata passed into "API:trackEvent(TimedMetadataUpdate)" is invalid.',ErrInvalidPlayerState:"MediaHeartbeat is tracking an AdBreak but not tracking any Ad and will drop any calls to track player state (Play, Pause, Buffer or Seek) in this state.",ErrAudioTrackingNotSupported:"Upgrade your AppMeasurement library to version >= '2.11.0' to support tracking audio content."},w="MediaHeartbeat",C="key_media_object",I="key_adbreak_object",P="key_ad_object",k="key_chapter_object",M="key_timed_metadata_object",D="key_custom_metadata",O="key_error_id",R="a.media.streamType",N="a.__pttvsdkVersion",L="granular_ad_tracking",x=250;i._MediaHeartbeatErrorMessage=A,i.MediaHeartbeatDelegate=t,i.MediaHeartbeat=o,i.MediaHeartbeat._debugLogging=!1}(F.ADB.core,F.ADB.va),F.ADB||(F.ADB={}),F.ADB.core||(F.ADB.core=core),F.ADB.va||(F.ADB.va=va),F.ADB.va.plugins||(F.ADB.va.plugins={})}.call(e={}),e.ADB)},function(i,r,a){var o;!function(){var e,t;e=this,void 0!==(o="function"==typeof(o=t=function(){var te={};return function(){"use strict";var ee={};!function(){var h=te.Client=function(e,t){var a=this;this.defaultGatewayURLError=!1,this._logger=null,this._sessionFactory=null,this._systemFactory=null,this._globalSessionKey=-1,this._settings=null,this._systemSettings=null,this._exceptionCatcher=null,this._config=null,this._id=-1,this._released=!1,function(e,t){if(!(e instanceof i))throw new Error("clientSettings parameter should be an instance of ClientSettings.");if(!(t instanceof n))throw new Error("systemFactory parameter should be an instance of SystemFactory.");e.gatewayUrl!=i._httpsProtocol+i.defaultProductionGatewayDNS&&e.gatewayUrl!=i._httpProtocol+i.defaultProductionGatewayDNS||(this.defaultGatewayURLError=!0),this._settings=e.clone(),this._systemFactory=t,this._systemFactory.configure("SDK",this._settings),this._exceptionCatcher=this._systemFactory.buildExceptionCatcher(),this._exceptionCatcher.runProtected("Client.init",function(){a._id=G.uinteger32(),a._logger=a._systemFactory.buildLogger(),a._logger.setModuleName("Client"),a.defaultGatewayURLError&&a._logger.info("Gateway URL should not be set to https://cws.conviva.com or http://cws.conviva.com, therefore this call is ignored"),a._logger.info("init(): url="+a._settings.gatewayUrl+" customerKey="+a._settings.customerKey),a._config=a._systemFactory.buildConfig(),a._config.load(),a._sessionFactory=a._systemFactory.buildSessionFactory(a,a._settings,a._config),a._logger.info("init(): done.")},function(e){throw new Error("Client constructor failed: "+e.message)})}.apply(this,arguments),this.release=function(){this._released||this._exceptionCatcher.runProtected("Client.release",function(){a._logger.info("release()"),a._sessionFactory.cleanup(),a._sessionFactory=null,a._globalSessionKey=-1,a._logger=null,a._id=-1,a._exceptionCatcher=null,a._settings=null,a._systemSettings=null,a._systemFactory=null,a._released=!0})},this.createSession=function(e){var t=h.NO_SESSION_KEY;return this._released||(null==e||e instanceof s?this._exceptionCatcher.runProtected("Client.createSession",function(){t=a._sessionFactory.makeVideoSession(e,L.SESSION_TYPE.VIDEO)}):a._logger.error("createSession(): expecting an instance of ContentMetadata for contentMetadata parameter")),t},this.createAdSession=function(t,n){var i=h.NO_SESSION_KEY;return this._released||(null==n||n instanceof s?this._exceptionCatcher.runProtected("Client.createAdSession",function(){var e=a._sessionFactory.getVideoSession(t);null!=e&&(null!=(n=null==n?new s:n).applicationName&&null!=n.viewerId||(null==n.viewerId&&null!=e._contentMetadata.viewerId&&(n.viewerId=e._contentMetadata.viewerId),null==n.applicationName&&null!=e._contentMetadata.applicationName&&(n.applicationName=e._contentMetadata.applicationName)),n.custom["c3.csid"]=K.ToString(e._id)),i=a._sessionFactory.makeVideoSession(n,L.SESSION_TYPE.AD)}):a._logger.error("createAdSession(): expecting an instance of ContentMetadata for adMetadata parameter")),i},this.reportError=function(t,n,i){return this._released?void 0:K.isValidString(n)?i!==te.Client.ErrorSeverity.FATAL&&i!==te.Client.ErrorSeverity.WARNING?void this._logger.error("reportError(): invalid error severity: "+i):void this._exceptionCatcher.runProtected("Client.reportError",function(){var e=a._sessionFactory.getVideoSession(t);null!=e&&e.reportError(n,i)}):void this._logger.error("reportError(): invalid error message string: "+n)},this.updateContentMetadata=function(n,i){return this._released?void 0:i instanceof s?void this._exceptionCatcher.runProtected("Client.updateContentMetadata",function(){var e,t=a._sessionFactory.getVideoSession(n);null!=t&&(e=i.clone(),t.updateContentMetadata(e))}):void a._logger.error("updateContentMetadata(): expecting an instance of ContentMetadata for contentMetadata parameter")},this.detachPlayer=function(t){this._released||this._exceptionCatcher.runProtected("Client.detachPlayer",function(){var e=a._sessionFactory.getVideoSession(t);null!=e&&e.detachPlayer()})},this.attachPlayer=function(t,n){return this._released?void 0:n instanceof p?void this._exceptionCatcher.runProtected("Client.attachPlayer",function(){var e=a._sessionFactory.getVideoSession(t);null!=e&&e.attachPlayer(n)}):void a._logger.error("attachPlayer(): expecting an instance of PlayerStateManager for playerStateManager parameter")},this.contentPreload=function(t){this._released||this._exceptionCatcher.runProtected("Client.contentPreload",function(){var e=a._sessionFactory.getVideoSession(t);null!=e&&e.contentPreload()})},this.contentStart=function(t){this._released||this._exceptionCatcher.runProtected("Client.contentStart",function(){var e=a._sessionFactory.getVideoSession(t);null!=e&&e.contentStart()})},this.sendCustomEvent=function(n,i,r){return this._released?void 0:K.isValidString(i)?void this._exceptionCatcher.runProtected("Client.sendCustomEvent",function(){n==h.NO_SESSION_KEY&&(a._globalSessionKey<0&&(t=new s,a._globalSessionKey=a._sessionFactory.makeGlobalSession(t,null)),n=a._globalSessionKey);var e=K.sanitizeStringToStringObject(r),t=a._sessionFactory.getSession(n);null!=t&&t.sendCustomEvent(i,e)}):void a._logger.error("sendCustomEvent(): eventName parameter must be a valid string.")},this.adStart=function(t,n,i,r){return this._released?void 0:n!==h.AdStream.CONTENT&&n!==h.AdStream.SEPARATE?void this._logger.error("adStart(): ignored, invalid value for adStream parameter: "+n):i!==h.AdPlayer.CONTENT&&i!==h.AdPlayer.SEPARATE?void this._logger.error("adStart(): ignored, invalid value for adPlayer parameter: "+i):r!==h.AdPosition.BUMPER&&r!==h.AdPosition.PREROLL&&r!==h.AdPosition.MIDROLL&&r!==h.AdPosition.POSTROLL?void this._logger.error("adStart(): ignored, invalid value for adPosition parameter: "+r):void this._exceptionCatcher.runProtected("Client.adStart",function(){var e=a._sessionFactory.getVideoSession(t);null!=e&&e.adStart(n,i,r)})},this.adEnd=function(t){this._released||this._exceptionCatcher.runProtected("Client.adEnd",function(){var e=a._sessionFactory.getVideoSession(t);null!=e&&e.adEnd()})},this.cleanupSession=function(e){return this._released?void 0:e===h.NO_SESSION_KEY?void this._logger.warning("cleanupSession(): ignored, can't cleanup Client.NO_SESSION_KEY"):void this._exceptionCatcher.runProtected("Client.cleanupSession",function(){null!=a._sessionFactory.getVideoSession(e)&&a._sessionFactory.cleanupSession(e)})},this.getAttachedPlayer=function(t){var n=null;return this._released||(t===h.NO_SESSION_KEY?this._logger.warning("getAttachedPlayer(): ignored for Client.NO_SESSION_KEY"):this._exceptionCatcher.runProtected("Client.getAttachedPlayer",function(){var e=a._sessionFactory.getVideoSession(t);null!=e&&(n=e.getPlayerStateManager())})),n},this.isPlayerAttached=function(e){return!this._released&&null!==this.getAttachedPlayer(e)},this.getPlayerStateManager=function(){if(this._released)throw new Error("This instance of Conviva.Client has been released.");return new p(this._systemFactory)},this.releasePlayerStateManager=function(e){if(this._released)throw new Error("This instance of Conviva.Client has been released.");this._exceptionCatcher.runProtected("Client.releasePlayerStateManager",function(){e instanceof p&&e.release()})},this.getSettings=function(){return this._settings},this.getId=function(){return this._id}};h.version="2.151.0.36981",h.NO_SESSION_KEY=-2,h.AdPosition={BUMPER:"BUMPER",PREROLL:"PREROLL",MIDROLL:"MIDROLL",POSTROLL:"POSTROLL"},h.AdStream={CONTENT:"CONTENT",SEPARATE:"SEPARATE"},h.AdPlayer={CONTENT:"CONTENT",SEPARATE:"SEPARATE"},h.ErrorSeverity={FATAL:0,WARNING:1},h.DeviceType={DESKTOP:"DESKTOP",CONSOLE:"Console",SETTOP:"Settop",MOBILE:"Mobile",TABLET:"Tablet",SMARTTV:"SmartTV"},h.AdTechnology={CLIENT_SIDE:"Client Side",SERVER_SIDE:"Server Side"},h.AdType={BLACKOUT_SLATE:"Blackout slate",TECHNICAL_DIFFICULTIES_SLATE:"Technical Difficulties slate",COMMERCIAL_SLATE:"Commercial Break slate",OTHER_SLATE:"Other slate",VPAID:"VPAID",REGULAR:"Regular Ad"},h.AdServingType={INLINE:"Inline",WRAPPER:"Wrapper"},h.DeviceCategory={ANDROID_DEVICE:"AND",APPLE_DEVICE:"APL",CHROMECAST:"CHR",DESKTOP_APP:"DSKAPP",DEVICE_SIMULATOR:"SIMULATOR",LG_TV:"LGTV",NINTENDO:"NINTENDO",PLAYSTATION:"PS",ROKU:"RK",SAMSUNG_TV:"SAMSUNGTV",SMART_TV:"TV",SET_TOP_BOX:"STB",TIVO:"TIVO",WEB:"WEB",WINDOWS_DEVICE:"WIN",XBOX:"XB"};var i=te.ClientSettings=function(e){var n=this;this._customerKey=null,K.defGet(this,"customerKey",function(){return this._customerKey}),K.defSet(this,"customerKey",function(e){K.isValidString(e)&&(this._customerKey=e)}),this._heartbeatInterval=i.defaultProductionHeartbeatInterval,K.defGet(this,"heartbeatInterval",function(){return this._heartbeatInterval}),K.defSet(this,"heartbeatInterval",function(e){var t;"number"!=typeof e||(t=K.NumberToUnsignedInt(e))===e&&(this._heartbeatInterval=t)}),this._gatewayUrl=null,K.defGet(this,"gatewayUrl",function(){return this._gatewayUrl}),K.defSet(this,"gatewayUrl",function(e){K.isValidString(e)&&(this._gatewayUrl=e)}),function(e){if(!K.isValidString(e))throw new Error("customerKey must be valid");this.customerKey=e}.apply(this,arguments),this.equals=function(e){return this.customerKey===e.customerKey&&this.gatewayUrl===e.gatewayUrl&&this.heartbeatInterval===e.heartbeatInterval},this.clone=function(){var e=new i(this.customerKey);return e.gatewayUrl=function(e){if(K.isValidString(e)){var t=e.split("://");if("cws.conviva.com"!=t[1]&&("https"==t[0]||"http"==t[0]))return e}return"https://"+n.customerKey+"."+i.defaultProductionGatewayDNS}(this.gatewayUrl),e.heartbeatInterval=this.heartbeatInterval,e}};i.defaultDevelopmentGatewayUrl="https://conviva.testonly.conviva.com",i.defaultProductionGatewayUrl="https://cws.conviva.com",i.defaultProductionGatewayDNS="cws.conviva.com",i.defaultDevelopmentGatewayDNS="conviva.testonly.conviva.com",i._httpsProtocol="https://",i._httpProtocol="http://",i.defaultDevelopmentHeartbeatInterval=5,i.defaultProductionHeartbeatInterval=20;var s=te.ContentMetadata=function(){this._assetName=null,K.defGet(this,"assetName",function(){return this._assetName}),K.defSet(this,"assetName",function(e){"string"==typeof e&&(this._assetName=e)}),this._custom={},K.defGet(this,"custom",function(){return this._custom}),K.defSet(this,"custom",function(e){"object"==typeof e&&(this._custom=K.sanitizeStringToStringObject(e))}),this._defaultResource=null,K.defGet(this,"defaultResource",function(){return this._defaultResource}),K.defSet(this,"defaultResource",function(e){"string"==typeof e&&(this._defaultResource=e)}),this._viewerId=null,K.defGet(this,"viewerId",function(){return this._viewerId}),K.defSet(this,"viewerId",function(e){"string"==typeof e&&(this._viewerId=e)}),this._applicationName=null,K.defGet(this,"applicationName",function(){return this._applicationName}),K.defSet(this,"applicationName",function(e){"string"==typeof e&&(this._applicationName=e)}),this._streamUrl=null,K.defGet(this,"streamUrl",function(){return this._streamUrl}),K.defSet(this,"streamUrl",function(e){"string"==typeof e&&(this._streamUrl=e)}),this._streamType=s.StreamType.UNKNOWN,K.defGet(this,"streamType",function(){return this._streamType}),K.defSet(this,"streamType",function(e){e!==s.StreamType.UNKNOWN&&e!==s.StreamType.VOD&&e!==s.StreamType.LIVE||(this._streamType=e)}),this._duration=-1,K.defGet(this,"duration",function(){return this._duration}),K.defSet(this,"duration",function(e){this._duration=W.sanitizeSpecialIntegerValue(e)}),this._encodedFrameRate=-1,K.defGet(this,"encodedFrameRate",function(){return this._encodedFrameRate}),K.defSet(this,"encodedFrameRate",function(e){this._encodedFrameRate=W.sanitizeSpecialIntegerValue(e)}),function(){}.apply(this,arguments),this.clone=function(){var e,t=new s;for(e in t.assetName=this.assetName,t.applicationName=this.applicationName,t.streamUrl=this.streamUrl,t.viewerId=this.viewerId,t.defaultResource=this.defaultResource,t.streamType=this.streamType,t.duration=this.duration,t.encodedFrameRate=this.encodedFrameRate,this.custom)t.custom[e]=this.custom[e];return t}};s.StreamType={UNKNOWN:"UNKNOWN",LIVE:"LIVE",VOD:"VOD"};var n=(te.ErrorType={ERROR_UNKNOWN:"ERROR_UNKNOWN",ERROR_IO:"ERROR_IO",ERROR_TIMEOUT:"ERROR_TIMEOUT",ERROR_NULL_ASSET:"ERROR_NULL_ASSET",ERROR_MISSING_PARAMETER:"ERROR_MISSING_PARAMETER",ERROR_NO_AD_AVAILABLE:"ERROR_NO_AD_AVAILABLE",ERROR_PARSE:"ERROR_PARSE",ERROR_INVALID_VALUE:"ERROR_INVALID_VALUE",ERROR_INVALID_SLOT:"ERROR_INVALID_SLOT",ERROR_3P_COMPONENT:"ERROR_3P_COMPONENT",ERROR_UNSUPPORTED_3P_FEATURE:"ERROR_UNSUPPORTED_3P_FEATURE",ERROR_DEVICE_LIMIT:"ERROR_DEVICE_LIMIT",ERROR_UNMATCHED_SLOT_SIZE:"ERROR_UNMATCHED_SLOT_SIZE"},te.Events={AD_REQUESTED:"Conviva.AdRequested",AD_RESPONSE:"Conviva.AdResponse",AD_SLOT_STARTED:"Conviva.SlotStarted",AD_ATTEMPTED:"Conviva.AdAttempted",AD_SLOT_ENDED:"Conviva.SlotEnded",AD_IMPRESSION_START:"Conviva.AdImpression",AD_START:"Conviva.AdStart",AD_FIRST_QUARTILE:"Conviva.AdFirstQuartile",AD_MID_QUARTILE:"Conviva.AdMidQuartile",AD_THIRD_QUARTILE:"Conviva.AdThirdQuartile",AD_COMPLETE:"Conviva.AdComplete",AD_END:"Conviva.AdEnd",AD_IMPRESSION_END:"Conviva.AdImpressionEnd",AD_SKIPPED:"Conviva.AdSkipped",AD_ERROR:"Conviva.AdError",AD_PROGRESS:"Conviva.AdProgress",AD_CLOSE:"Conviva.AdClose",CONTENT_PAUSED:"Conviva.PauseContent",CONTENT_RESUMED:"Conviva.ResumeContent",POD_START:"Conviva.PodStart",POD_END:"Conviva.PodEnd"},te.SystemFactory=function(e,t){var n=this;(function(e,t){if(!(e instanceof g))throw new Error("systemInterface parameter should be an instance of SystemInterface.");this._systemInterface=e,this._timeInterface=this._systemInterface._timeInterface,this._timerInterface=this._systemInterface._timerInterface,this._httpInterface=this._systemInterface._httpInterface,this._storageInterface=this._systemInterface._storageInterface,this._metadataInterface=this._systemInterface._metadataInterface,this._loggingInterface=this._systemInterface._loggingInterface,this._settings=t instanceof a?t.clone():new a}).apply(this,arguments),this.configure=function(e,t){this._packageName=e,this._clientSettings=t},this.release=function(){this._systemInterface.release(),this._systemInterface=null,this._packageName=null,this._settings=null,this._logBuffer=null};var i=function(){return new z(n._loggingInterface,n._timeInterface,n.getSettings(),n._logBuffer,n._packageName)};this.buildLogger=function(){return i()},this.buildSessionFactory=function(e,t,n){return new F(e,t,n,this)},this.buildPing=function(){return new q(this.buildLogger(),this.buildHttpClient(),this._clientSettings)},this.buildCallbackWithTimeout=function(){return new V(this.buildTimer())},this.buildCallbackWithTimeoutNoPing=function(){var e=new j(this.buildLogger(),null,this.getSettings()),e=new $(this.buildLogger(),this._timerInterface,e);return new V(e)},this.buildHttpClient=function(){return new Q(this.buildLogger(),this._httpInterface,this.buildCallbackWithTimeoutNoPing(),this.getSettings())},this.buildExceptionCatcher=function(){return new j(this.buildLogger(),this.buildPing(),this.getSettings())},this.buildTime=function(){return new Z(this._timeInterface,this.buildLogger())},this.buildTimer=function(){return new $(this.buildLogger(),this._timerInterface,this.buildExceptionCatcher())},this.buildStorage=function(){return new X(this.buildLogger(),this._storageInterface,this.buildCallbackWithTimeout(),this.getSettings())},this.buildConfig=function(){return new B(this.buildLogger(),this.buildStorage(),this.buildJsonInterface())},this.buildSystemMetadata=function(){return new J(this.buildLogger(),this._metadataInterface,this.buildExceptionCatcher())},this.buildCwsProtocol=function(){return new k},this.buildGatewayControl=function(e){return new H(e,this.buildLogger(),this.buildHttpClient(),this.buildJsonInterface())},this.buildCwsSession=function(e,t,n){var i=this.buildGatewayControl(t);return new L(this.buildEventQueue(),e,t,this.buildLogger(),this.buildExceptionCatcher(),this.buildTimer(),i,this.buildCwsProtocol(),this.buildTime(),this.getLogBuffer(),n)},this.buildSession=function(e,t,n,i,r,a){var o=this.buildExceptionCatcher(),s=this.buildLogger(),t=t.clone(),t=this.buildCwsSession(e,t,n);return new x(i,r,a,n,this.buildSystemMetadata(),t,o,s)},this.buildEventQueue=function(){return new U},this.buildJsonInterface=function(){return new R},this.getLogBuffer=function(){return this._logBuffer},this.getSettings=function(){return this._settings},this._logBuffer=new Y}),a=te.SystemSettings=function(){this._logLevel=a.defaultProductionLogLevel,K.defGet(this,"logLevel",function(){return this._logLevel}),K.defSet(this,"logLevel",function(e){var t;"number"!=typeof e||(t=K.NumberToUnsignedInt(e))===e&&t>=a.LogLevel.DEBUG&&t<=a.LogLevel.ERROR&&(this._logLevel=t)}),this._allowUncaughtExceptions=a.defaultProductionAllowUncaughtExceptions,K.defGet(this,"allowUncaughtExceptions",function(){return this._allowUncaughtExceptions}),K.defSet(this,"allowUncaughtExceptions",function(e){K.isBoolean(e)&&(this._allowUncaughtExceptions=e)}),this._storageTimeout=a.defaultStorageTimeout,K.defGet(this,"storageTimeout",function(){return this._storageTimeout}),K.defSet(this,"storageTimeout",function(e){var t;"number"!=typeof e||(t=K.NumberToUnsignedInt(e))===e&&(this._storageTimeout=t)}),this._httpTimeout=a.defaultHttpTimeout,K.defGet(this,"httpTimeout",function(){return this._httpTimeout}),K.defSet(this,"httpTimeout",function(e){var t;"number"!=typeof e||(t=K.NumberToUnsignedInt(e))===e&&(this._httpTimeout=t)}),function(){}.apply(this,arguments),this.equals=function(e){return this.logLevel===e.logLevel&&this.allowUncaughtExceptions===e.allowUncaughtExceptions&&this.storageTimeout===e.storageTimeout&&this.httpTimeout===e.httpTimeout},this.clone=function(){var e=new a;return e.logLevel=this.logLevel,e.allowUncaughtExceptions=this.allowUncaughtExceptions,e.storageTimeout=this.storageTimeout,e.httpTimeout=this.httpTimeout,e}};a.LogLevel={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},a.defaultDevelopmentLogLevel=a.LogLevel.DEBUG,a.defaultProductionLogLevel=a.LogLevel.ERROR,a.defaultDevelopmentAllowUncaughtExceptions=!0,a.defaultProductionAllowUncaughtExceptions=!1,a.defaultStorageTimeout=10,a.defaultHttpTimeout=10;var p=te.PlayerStateManager=function(e){var i=this;i._monitorNotifier=null,i._bitrateKbps=-2,i._playerState=p.PlayerState.UNKNOWN,i._currentMetadata={},i._renderedFrameRate=-2,i._encodedFrameRate=-2,i._duration=-2,i._playerVersion=null,i._playerType=null,i._streamUrl=null,i._moduleName=null,i._moduleVersion=null,i._width=-1,i._height=-1,i._connectionType=null,i._linkEncryption=null,i._lastError=null,i._pendingErrors=[],i._released=!1,this.release=function(){i._released||i._exceptionCatcher.runProtected("PlayerStateManager.release",function(){null!=i._monitorNotifier&&i._monitorNotifier.onRelease(),i.removeMonitoringNotifier(),i._systemFactory=null,i._logger=null,i._exceptionCatcher=null,i._released=!0})},this.setPlayheadTime=function(e){},this.setBufferLength=function(e){},this.setRenderedFrameRate=function(e){},this.getEncodedFrameRate=function(){return i._encodedFrameRate},this.setEncodedFrameRate=function(t){i._released||i._exceptionCatcher.runProtected("PlayerStateManager.setEncodedFrameRate",function(){var e=W.sanitizeSpecialIntegerValue(t);-1<=e&&(i._encodedFrameRate=e,null!=i._monitorNotifier&&i._monitorNotifier.onEncodedFrameRateChange(i._encodedFrameRate))})},this.getDuration=function(){return i._duration},this.setClientMeasureInterface=function(e){K.validateInterface(e,new te.ClientMeasureInterface,"ClientMeasureInterface"),this._playerInterface=e},this.getPHT=function(){return this._playerInterface&&"function"==typeof this._playerInterface.getPHT?this._playerInterface.getPHT():p.DEFAULT_PHT},this.getBufferLength=function(){return this._playerInterface&&"function"==typeof this._playerInterface.getBufferLength?this._playerInterface.getBufferLength():p.DEFAULT_BUFFER_LENGTH},this.getSignalStrength=function(){return this._playerInterface&&"function"==typeof this._playerInterface.getSignalStrength?this._playerInterface.getSignalStrength():p.DEFAULT_SIGNAL_STRENGTH},this.getRenderedFrameRate=function(){return this._playerInterface&&"function"==typeof this._playerInterface.getRenderedFrameRate?this._playerInterface.getRenderedFrameRate():p.DEFAULT_RENDERED_FRAME_RATE},this.setDuration=function(t){i._released||i._exceptionCatcher.runProtected("PlayerStateManager.setDuration",function(){var e=W.sanitizeSpecialIntegerValue(t);-1<=e&&(i._duration=e,null!=i._monitorNotifier&&i._monitorNotifier.onContentLengthChange(i._duration))})},this.getStreamUrl=function(){return i._streamUrl},this.setStreamUrl=function(e){i._released||i._exceptionCatcher.runProtected("PlayerStateManager.setStreamUrl",function(){null!=e&&(i._streamUrl=e,null!=i._monitorNotifier&&i._monitorNotifier.onStreamUrlChange(i._streamUrl))})},this.getModuleName=function(){return i._moduleName},this.getModuleVersion=function(){return i._moduleVersion},this.setModuleNameAndVersion=function(e,t){i._moduleName=e,i._moduleVersion=t},this.getPlayerType=function(){return i._playerType},this.setPlayerType=function(e){i._released||i._exceptionCatcher.runProtected("PlayerStateManager.setPlayerType",function(){i._playerType=e,null!=i._monitorNotifier&&i._monitorNotifier.onPlayerTypeChange(i._playerType)})},this.getPlayerVersion=function(){return i._playerVersion},this.setPlayerVersion=function(e){i._released||i._exceptionCatcher.runProtected("PlayerStateManager.setPlayerVersion",function(){i._playerVersion=e,null!=i._monitorNotifier&&i._monitorNotifier.onPlayerVersionChange(i._playerVersion)})},this.setMonitoringNotifier=function(e,t){return i._released?void 0:null==i._monitorNotifier&&(i._monitorNotifier=e,i._logger.setSessionId(t),!0)},this.removeMonitoringNotifier=function(){i._released||(i._monitorNotifier=null,i._logger.setSessionId(null))},this.pushCurrentState=function(){i.setPlayerState(i.getPlayerState()),i.setBitrateKbps(i.getBitrateKbps()),i.setDuration(i.getDuration()),i.setEncodedFrameRate(i.getEncodedFrameRate()),i.setStreamUrl(i.getStreamUrl()),i.setPlayerType(i.getPlayerType()),i.setPlayerVersion(i.getPlayerVersion());for(var e=0;e<i._pendingErrors.length;e++){var t=i._pendingErrors[e];i.setError(t)}i._pendingErrors=[]},this.getPlayerState=function(){return i._playerState},this.setPlayerState=function(e){i._released||i._exceptionCatcher.runProtected("PlayerStateManager.setPlayerState",function(){p.isValidPlayerState(e)?(i._playerState=e,null!=i._monitorNotifier&&i._monitorNotifier.onPlayerStateChange(i._playerState)):i._logger.error("PlayerStateManager.SetPlayerState(): invalid state: "+e)})},this.getBitrateKbps=function(){return i._bitrateKbps},this.setBitrateKbps=function(t){i._released||i._exceptionCatcher.runProtected("PlayerStateManager.setBitrateKbps",function(){var e=W.sanitizeSpecialIntegerValue(t);-1<=e&&(i._bitrateKbps=e,null!=i._monitorNotifier&&i._monitorNotifier.onBitrateChange(i._bitrateKbps))})},this.setPlayerSeekStart=function(e){i._released||i._exceptionCatcher.runProtected("PlayerStateManager.setPlayerSeekStart()",function(){null!=i._monitorNotifier&&i._monitorNotifier.onSeekEvent(p.SEEK_ACTIONS_TYPE.SEEK_START,e)})},this.setPlayerSeekEnd=function(){i._released||i._exceptionCatcher.runProtected("PlayerStateManager.setPlayerSeekEnd()",function(){null!=i._monitorNotifier&&i._monitorNotifier.onSeekEvent(p.SEEK_ACTIONS_TYPE.SEEK_END,-1)})},this.setUserSeekButtonUp=function(){i._released||i._exceptionCatcher.runProtected("PlayerStateManager.setUserSeekButtonUp()",function(){null!=i._monitorNotifier&&i._monitorNotifier.onSeekEvent(p.SEEK_ACTIONS_TYPE.BUTTON_UP,-1)})},this.setUserSeekButtonDown=function(){i._released||i._exceptionCatcher.runProtected("PlayerStateManager.setUserSeekButtonDown()",function(){null!=i._monitorNotifier&&i._monitorNotifier.onSeekEvent(p.SEEK_ACTIONS_TYPE.BUTTON_DOWN,-1)})},this.setVideoResolutionWidth=function(t){i._released||i._exceptionCatcher.runProtected("PlayerStateManager.setVideoResolutionWidth()",function(){var e=W.sanitizeSpecialIntegerValue(t);0<e&&(i._width=e),null!=i._monitorNotifier&&i._monitorNotifier.onStreamResolutionWidthChange(i._width)})},this.setVideoResolutionHeight=function(t){i._released||i._exceptionCatcher.runProtected("PlayerStateManager.setVideoResolutionHeight()",function(){var e=W.sanitizeSpecialIntegerValue(t);0<e&&(i._height=e),null!=i._monitorNotifier&&i._monitorNotifier.onStreamResolutionHeightChange(i._height)})},this.setConnectionType=function(e){i._released||i._exceptionCatcher.runProtected("PlayerStateManager.setConnectionType()",function(){i._connectionType=e,null!=i._monitorNotifier&&i._monitorNotifier.onConnectionTypeChange(i._connectionType)})},this.setLinkEncryption=function(e){i._released||i._exceptionCatcher.runProtected("PlayerStateManager.setLinkEncryption()",function(){i._linkEncryption=e,null!=i._monitorNotifier&&i._monitorNotifier.onLinkEncryptionChange(i._linkEncryption)})},this.setSignalStrength=function(e){},this.setError=function(e){var t,n;i._lastError=e,null!=i._monitorNotifier?(t=e.errorCode,n=e.severity,i._monitorNotifier.onError(t,n)):i._pendingErrors.push(e)},this.sendError=function(t,n){i._released||i._exceptionCatcher.runProtected("PlayerStateManager.sendError",function(){var e=new ee.StreamerError(t,n);i.setError(e)})},this.reset=function(){i._released||i._exceptionCatcher.runProtected("PlayerStateManager.reset",function(){i._bitrateKbps=-2,i._playerState=p.PlayerState.UNKNOWN,i._currentMetadata={},i._renderedFrameRate=-1,i._encodedFrameRate=-1,i._duration=-1,i._playerVersion=null,i._playerType=null,i._streamUrl=null,i._lastError=null,i._pendingErrors=[]})},this.getError=function(){return i._lastError},function(e){i._systemFactory=e,i._logger=i._systemFactory.buildLogger(),i._logger.setModuleName("PlayerStateManager"),i._exceptionCatcher=i._systemFactory.buildExceptionCatcher()}.apply(i,arguments),p.DEFAULT_SIGNAL_STRENGTH=1e3,p.DEFAULT_RENDERED_FRAME_RATE=-1,p.DEFAULT_BUFFER_LENGTH=-1,p.DEFAULT_PHT=-1};p.PlayerState={STOPPED:"STOPPED",PLAYING:"PLAYING",BUFFERING:"BUFFERING",PAUSED:"PAUSED",UNKNOWN:"UNKNOWN",NOT_MONITORED:"NOT_MONITORED"},p.isValidPlayerState=function(e){return e===p.PlayerState.STOPPED||e===p.PlayerState.PLAYING||e===p.PlayerState.BUFFERING||e===p.PlayerState.PAUSED||e===p.PlayerState.UNKNOWN||e===p.PlayerState.NOT_MONITORED},p.SEEK_ACTIONS_TYPE={SEEK_START:"pss",SEEK_END:"pse",BUTTON_UP:"bu",BUTTON_DOWN:"bd"};var t,u,d,r,_,o=(te.ClientMeasureInterface=function(){this.getPHT=function(){},this.getBufferLength=function(){},this.getSignalStrength=function(){},this.getRenderedFrameRate=function(){}},te.HttpInterface=function(){this.makeRequest=function(e,t,n,i,r,a){},this.release=function(){}}),l=te.LoggingInterface=function(){this.consoleLog=function(e,t){},this.release=function(){}},c=te.MetadataInterface=function(){this.getBrowserName=function(){},this.getBrowserVersion=function(){},this.getDeviceBrand=function(){},this.getDeviceManufacturer=function(){},this.getDeviceModel=function(){},this.getDeviceType=function(){},this.getDeviceVersion=function(){},this.getFrameworkName=function(){},this.getFrameworkVersion=function(){},this.getOperatingSystemName=function(){},this.getOperatingSystemVersion=function(){},this.getDeviceCategory=function(){},this.release=function(){}},f=te.StorageInterface=function(){this.saveData=function(e,t,n,i){},this.loadData=function(e,t,n){},this.release=function(){}},g=te.SystemInterface=function(e,t,n,i,r,a){(function(e,t,n,i,r,a){K.validateInterface(e,new v,"TimeInterface"),K.validateInterface(t,new m,"TimerInterface"),K.validateInterface(n,new o,"HttpInterface"),K.validateInterface(i,new f,"StorageInterface"),K.validateInterface(r,new c,"MetadataInterface"),K.validateInterface(a,new l,"LoggingInterface"),this._timeInterface=e,this._timerInterface=t,this._httpInterface=n,this._storageInterface=i,this._metadataInterface=r,this._loggingInterface=a}).apply(this,arguments),this.release=function(){this._timeInterface.release(),this._timeInterface=null,this._timerInterface.release(),this._timerInterface=null,this._httpInterface.release(),this._httpInterface=null,this._storageInterface.release(),this._storageInterface=null,this._metadataInterface.release(),this._metadataInterface=null,this._loggingInterface.release(),this._loggingInterface=null}},v=te.TimeInterface=function(){this.getEpochTimeMs=function(){},this.release=function(){}},m=te.TimerInterface=function(){this.createTimer=function(e,t,n){},this.release=function(){}},y=ee.JSON2={};function e(e){return e<10?"0"+e:e}function S(e){return t.lastIndex=0,t.test(e)?'"'+e.replace(t,function(e){var t=r[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}),"function"!=typeof y.stringify&&(t=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},y.stringify=function(e,t,n){var i;if(d=u="","number"==typeof n)for(i=0;i<n;i+=1)d+=" ";else"string"==typeof n&&(d=n);if((_=t)&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON2.stringify");return function e(t,n){var i,r,a,o,s,l=u,c=n[t];switch(c&&"object"==typeof c&&"function"==typeof c.toJSON&&(c=c.toJSON(t)),typeof(c="function"==typeof _?_.call(n,t,c):c)){case"string":return S(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";if(u+=d,s=[],Object.prototype.toString.apply(c)===Object.prototype.toString.apply([])){for(o=c.length,i=0;i<o;i+=1)s[i]=e(i,c)||"null";return a=0===s.length?"[]":u?"[\n"+u+s.join(",\n"+u)+"\n"+l+"]":"["+s.join(",")+"]",u=l,a}if(_&&"object"==typeof _)for(o=_.length,i=0;i<o;i+=1)"string"==typeof _[i]&&(a=e(r=_[i],c))&&s.push(S(r)+(u?": ":":")+a);else for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(a=e(r,c))&&s.push(S(r)+(u?": ":":")+a);return a=0===s.length?"{}":u?"{\n"+u+s.join(",\n"+u)+"\n"+l+"}":"{"+s.join(",")+"}",u=l,a}}("",{"":e})});var E,b,T,A,w,C,I,P=ee.JsonParse=(A={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},w=function(e){throw{name:"SyntaxError",message:e,at:E,text:T}},C=function(e){return e&&e!==b&&w("Expected '"+e+"' instead of '"+b+"'"),b=T.charAt(E),E+=1,b},I=function(){switch(O(),b){case"{":return function(){var e,t={};if("{"===b){if(C("{"),O(),"}"===b)return C("}"),t;for(;b;){if(e=D(),O(),C(":"),Object.hasOwnProperty.call(t,e)&&w('Duplicate key "'+e+'"'),t[e]=I(),O(),"}"===b)return C("}"),t;C(","),O()}}w("Bad object")}();case"[":return function(){var e=[];if("["===b){if(C("["),O(),"]"===b)return C("]"),e;for(;b;){if(e.push(I()),O(),"]"===b)return C("]"),e;C(","),O()}}w("Bad array")}();case'"':return D();case"-":return M();default:return("0"<=b&&b<="9"?M:function(){switch(b){case"t":return C("t"),C("r"),C("u"),C("e"),!0;case"f":return C("f"),C("a"),C("l"),C("s"),C("e"),!1;case"n":return C("n"),C("u"),C("l"),C("l"),null}w("Unexpected '"+b+"'")})()}},function(e,o){return T=e,E=0,b=" ",e=I(),O(),b&&w("Syntax error"),"function"==typeof o?function e(t,n){var i,r,a=t[n];if(a&&"object"==typeof a)for(i in a)Object.hasOwnProperty.call(a,i)&&(void 0!==(r=e(a,i))?a[i]=r:delete a[i]);return o.call(t,n,a)}({"":e},""):e}),k=ee.CwsProtocol=function(){this.generateEvent=function(e,t,n,i){return i.seq=e,i.st=t,i.t=n,i},this.generateSessionEndEvent=function(e,t){var n=k.EVENT_TYPE_SESSION_END;return this.generateEvent(e,t,n,{})}};function M(){var e,t="";for("-"===b&&C(t="-");"0"<=b&&b<="9";)t+=b,C();if("."===b)for(t+=".";C()&&"0"<=b&&b<="9";)t+=b;if("e"===b||"E"===b)for(t+=b,C(),"-"!==b&&"+"!==b||(t+=b,C());"0"<=b&&b<="9";)t+=b,C();return e=+t,isNaN(e)?void w("Bad number"):e}function D(){var e,t,n,i="";if('"'===b)for(;C();){if('"'===b)return C(),i;if("\\"===b)if(C(),"u"===b){for(t=n=0;t<4&&(e=parseInt(C(),16),isFinite(e));t+=1)n=16*n+e;i+=String.fromCharCode(n)}else{if("string"!=typeof A[b])break;i+=A[b]}else i+=b}w("Bad string")}function O(){for(;b&&b<=" ";)C()}k.version="2.4",k.gatewayPath="/0/wsg",k.DEFAULT_CLIENT_ID="0",k.DEFAULT_MAX_HEARTBEAT_INFOS=0,k.DEFAULT_PLAYHEAD_TIME=-1,k.DEFAULT_BUFFER_LENGTH=-1,k.DEFAULT_SIGNAL_STRENGTH=1e3,k.SDK_METADATA_SCHEMA="sdk.js.1",k.EVENT_TYPE_STATE_CHANGE="CwsStateChangeEvent",k.EVENT_TYPE_ERROR="CwsErrorEvent",k.EVENT_TYPE_SESSION_END="CwsSessionEndEvent",k.EVENT_TYPE_CUSTOM="CwsCustomEvent",k.EVENT_TYPE_SEEK="CwsSeekEvent",k.EVENT_TYPE_DATA_SAMPLE="CwsDataSamplesEvent",k.RESPONSE_STATUS_NO_ERRORS="ok",k.RESPONSE_KEY_STATUS="err",k.RESPONSE_KEY_CLIENT_ID="clid",k.RESPONSE_KEY_CONFIG="cfg",k.RESPONSE_KEY_EVENTS="evs",k.RESPONSE_CONFIG_KEY_MAX_HEARTBEAT_INFOS="maxhbinfos",k.RESPONSE_CONFIG_KEY_SEND_LOGS="slg",k.RESPONSE_CONFIG_KEY_HEARTBEAT_INTERVAL="hbi",k.RESPONSE_CONFIG_KEY_GATEWAY_URL="gw",k.MESSAGE_TYPE_SESSION_HEARTBEAT="CwsSessionHb",k.REQUEST_KEY_MESSAGE_TYPE="t",k.REQUEST_KEY_SESSION_TIME="st",k.REQUEST_KEY_SESSION_START_TIME="sst",k.REQUEST_KEY_IS_LIVE="lv",k.REQUEST_KEY_SEQUENCE_NUMBER="seq",k.REQUEST_KEY_CUSTOMER_KEY="cid",k.REQUEST_KEY_CLIENT_ID="clid",k.REQUEST_KEY_CLIENT_VERSION="clv",k.REQUEST_KEY_PROTOCOL_VERSION="pver",k.REQUEST_KEY_INSTANCE_ID="iid",k.REQUEST_KEY_SESSION_ID="sid",k.REQUEST_KEY_VIEWER_ID="vid",k.REQUEST_KEY_ASSET_NAME="an",k.REQUEST_KEY_PLAYER_NAME="pn",k.REQUEST_KEY_TAGS="tags",k.REQUEST_KEY_SESSION_FLAGS="sf",k.REQUEST_KEY_EVENTS="evs",k.REQUEST_KEY_LOGS="lg",k.REQUEST_KEY_HEARTBEAT_INFOS="hbinfos",k.REQUEST_KEY_IS_SDK_CLIENT="sdk",k.REQUEST_KEY_PAUSE_JOIN="pj",k.REQUEST_KEY_PLAYER_STATE="ps",k.REQUEST_KEY_BITRATE="br",k.REQUEST_KEY_CONTENT_LENGTH="cl",k.REQUEST_KEY_ENCODED_FRAME_RATE="efps",k.REQUEST_KEY_AVERAGE_FRAME_RATE="afps",k.REQUEST_KEY_RFPS_TOTAL="rfpstot",k.REQUEST_KEY_RFPS_COUNT="rfpscnt",k.REQUEST_KEY_RESOURCE="rs",k.REQUEST_KEY_PLAYHEAD_TIME="pht",k.REQUEST_KEY_BUFFER_LENGTH="bl",k.REQUEST_KEY_STREAM_URL="url",k.REQUEST_KEY_CAPABILITIES="caps",k.REQUEST_KEY_PLATFORM_METADATA="pm",k.REQUEST_KEY_VIDEO_WIDTH="w",k.REQUEST_KEY_VIDEO_HEIGHT="h",k.REQUEST_KEY_CONNECTION_TYPE="ct",k.REQUEST_KEY_LINK_ENCRYPTION="le",k.REQUEST_KEY_SIGNAL_STRENGTH="ss",k.REQUEST_KEY_STREAM_METADATA_CHANGE="strmetadata",k.REQUEST_PLATFORM_METADATA_KEY_SCHEMA="sch",k.REQUEST_PLATFORM_METADATA_KEY_BROWSER_NAME="br",k.REQUEST_PLATFORM_METADATA_KEY_BROWSER_VERSION="brv",k.REQUEST_PLATFORM_METADATA_KEY_DEVICE_BRAND="dvb",k.REQUEST_PLATFORM_METADATA_KEY_DEVICE_MANUFACTURER="dvma",k.REQUEST_PLATFORM_METADATA_KEY_DEVICE_MODEL="dvm",k.REQUEST_PLATFORM_METADATA_KEY_DEVICE_TYPE="dvt",k.REQUEST_PLATFORM_METADATA_KEY_DEVICE_VERSION="dvv",k.REQUEST_PLATFORM_METADATA_KEY_FRAMEWORK_NAME="fw",k.REQUEST_PLATFORM_METADATA_KEY_FRAMEWORK_VERSION="fwv",k.REQUEST_PLATFORM_METADATA_KEY_CLIENT_CONFIGURATION="cc",k.REQUEST_PLATFORM_METADATA_KEY_MODULE_NAME="mn",k.REQUEST_PLATFORM_METADATA_KEY_MODULE_VERSION="mv",k.REQUEST_PLATFORM_METADATA_KEY_OPERATING_SYSTEM_NAME="os",k.REQUEST_PLATFORM_METADATA_KEY_OPERATING_SYSTEM_VERSION="osv",k.REQUEST_PLATFORM_METADATA_KEY_DEVICE_CATEGORY="cat",k.REQUEST_KEY_PROTOCOL_CAPP="caps",k.REQUEST_EVENT_KEY_TYPE="t",k.REQUEST_EVENT_KEY_SEQUENCE_NUMBER="seq",k.REQUEST_EVENT_KEY_SESSION_TIME="st",k.REQUEST_EVENT_KEY_SEEK_ACT_TYPE="act",k.REQUEST_EVENT_KEY_SEEK_TO_POS="skto",k.REQUEST_ERROR_EVENT_KEY_MESSAGE="err",k.REQUEST_ERROR_EVENT_KEY_FATAL="ft",k.REQUEST_STATE_CHANGE_EVENT_KEY_NEW="new",k.REQUEST_STATE_CHANGE_EVENT_KEY_OLD="old",k.REQUEST_CUSTOM_EVENT_KEY_NAME="name",k.REQUEST_CUSTOM_EVENT_KEY_ATTRIBUTES="attr",k.REQUEST_HEARTBEAT_INFO_KEY_SEQUENCE_NUMBER="seq",k.REQUEST_HEARTBEAT_INFO_KEY_STATUS="err",k.REQUEST_HEARTBEAT_INFO_KEY_ROUNDTRIP_TIME="rtt",k.REQUEST_KEY_IS_AD_SESSION="ad",k.convertPlayerState=function(e){switch(e){case p.PlayerState.STOPPED:return k.eStopped;case p.PlayerState.PLAYING:return k.ePlaying;case p.PlayerState.BUFFERING:return k.eBuffering;case p.PlayerState.PAUSED:return k.ePaused;case p.PlayerState.NOT_MONITORED:return k.eNotMonitored;default:return k.eUnknown}},k.eStopped=1,k.ePlaying=3,k.eBuffering=6,k.ePaused=12,k.eNotMonitored=98,k.eUnknown=100,k.SessionFlags={GLOBAL:0,VIDEO:1,QUALITY_METRICS:2,BITRATE_METRICS:4},k.Capabilities={INSIGHTS:0};var R=(ee.JSONInterface=function(){this.encode=function(e){},this.decode=function(e){}},ee.LibJSONInterface=function(){this.encode=function(e){var t=null;try{t=y.stringify(e)}catch(e){}return t},this.decode=function(e){var t=null;try{t=P(e)}catch(e){}return t=!K.isObject(t)?null:t}}),N=ee.CwsHeartbeat=function(){this._data={},function(){}.apply(this,arguments),this.get=function(){return this._data},this.setField=function(e,t){this._data[e]=t},this.setInnerField=function(e,t,n){this._data[e]||(this._data[e]={}),this._data[e][t]=n},this.setMessageType=function(e){this.setField(k.REQUEST_KEY_MESSAGE_TYPE,e)},this.setSessionTime=function(e){this.setField(k.REQUEST_KEY_SESSION_TIME,e)},this.setSessionStartTime=function(e){this.setField(k.REQUEST_KEY_SESSION_START_TIME,e)},this.setIsLive=function(e){this.setField(k.REQUEST_KEY_IS_LIVE,e)},this.setSequenceNumber=function(e){this.setField(k.REQUEST_KEY_SEQUENCE_NUMBER,e)},this.setCustomerKey=function(e){this.setField(k.REQUEST_KEY_CUSTOMER_KEY,e)},this.setClientId=function(e){this.setField(k.REQUEST_KEY_CLIENT_ID,e)},this.setClientVersion=function(e){this.setField(k.REQUEST_KEY_CLIENT_VERSION,e)},this.setProtocolVersion=function(e){this.setField(k.REQUEST_KEY_PROTOCOL_VERSION,e)},this.setCapfield=function(e){this.setField(k.REQUEST_KEY_PROTOCOL_CAPP,e)},this.setSessionId=function(e){this.setField(k.REQUEST_KEY_SESSION_ID,e)},this.setInstanceId=function(e){this.setField(k.REQUEST_KEY_INSTANCE_ID,e)},this.setViewerId=function(e){this.setField(k.REQUEST_KEY_VIEWER_ID,e)},this.setAssetName=function(e){this.setField(k.REQUEST_KEY_ASSET_NAME,e)},this.setPlayerName=function(e){this.setField(k.REQUEST_KEY_PLAYER_NAME,e)},this.setTags=function(e){this.setField(k.REQUEST_KEY_TAGS,e)},this.setSessionFlags=function(e){this.setField(k.REQUEST_KEY_SESSION_FLAGS,e)},this.setCapabilities=function(e){this.setField(k.REQUEST_KEY_CAPABILITIES,e)},this.setEvents=function(e){this.setField(k.REQUEST_KEY_EVENTS,e)},this.setIsSdkClient=function(e){this.setField(k.REQUEST_KEY_IS_SDK_CLIENT,e)},this.setLogs=function(e){this.setField(k.REQUEST_KEY_LOGS,e)},this.setHeartbeatInfos=function(e){this.setField(k.REQUEST_KEY_HEARTBEAT_INFOS,e)},this.setPlayerState=function(e){this.setField(k.REQUEST_KEY_PLAYER_STATE,e)},this.setPauseJoin=function(e){this.setField(k.REQUEST_KEY_PAUSE_JOIN,e)},this.setContentLength=function(e){this.setField(k.REQUEST_KEY_CONTENT_LENGTH,e)},this.setBitrate=function(e){this.setField(k.REQUEST_KEY_BITRATE,e)},this.setResource=function(e){this.setField(k.REQUEST_KEY_RESOURCE,e)},this.setEncodedFrameRate=function(e){this.setField(k.REQUEST_KEY_ENCODED_FRAME_RATE,e)},this.setAverageFrameRate=function(e){this.setField(k.REQUEST_KEY_AVERAGE_FRAME_RATE,e)},this.setRfpsObservationCount=function(e){this.setField(k.REQUEST_KEY_RFPS_COUNT,e)},this.setRfpsTotal=function(e){this.setField(k.REQUEST_KEY_RFPS_TOTAL,e)},this.setPlatformMetadataSchema=function(e){this.setInnerField(k.REQUEST_KEY_PLATFORM_METADATA,k.REQUEST_PLATFORM_METADATA_KEY_SCHEMA,e)},this.setBrowserName=function(e){this.setInnerField(k.REQUEST_KEY_PLATFORM_METADATA,k.REQUEST_PLATFORM_METADATA_KEY_BROWSER_NAME,e)},this.setBrowserVersion=function(e){this.setInnerField(k.REQUEST_KEY_PLATFORM_METADATA,k.REQUEST_PLATFORM_METADATA_KEY_BROWSER_VERSION,e)},this.setDeviceBrand=function(e){this.setInnerField(k.REQUEST_KEY_PLATFORM_METADATA,k.REQUEST_PLATFORM_METADATA_KEY_DEVICE_BRAND,e)},this.setDeviceManufacturer=function(e){this.setInnerField(k.REQUEST_KEY_PLATFORM_METADATA,k.REQUEST_PLATFORM_METADATA_KEY_DEVICE_MANUFACTURER,e)},this.setDeviceModel=function(e){this.setInnerField(k.REQUEST_KEY_PLATFORM_METADATA,k.REQUEST_PLATFORM_METADATA_KEY_DEVICE_MODEL,e)},this.setDeviceType=function(e){this.setInnerField(k.REQUEST_KEY_PLATFORM_METADATA,k.REQUEST_PLATFORM_METADATA_KEY_DEVICE_TYPE,e)},this.setDeviceVersion=function(e){this.setInnerField(k.REQUEST_KEY_PLATFORM_METADATA,k.REQUEST_PLATFORM_METADATA_KEY_DEVICE_VERSION,e)},this.setFrameworkName=function(e){this.setInnerField(k.REQUEST_KEY_PLATFORM_METADATA,k.REQUEST_PLATFORM_METADATA_KEY_FRAMEWORK_NAME,e),this.setField(k.REQUEST_PLATFORM_METADATA_KEY_FRAMEWORK_NAME,e)},this.setFrameworkVersion=function(e){this.setInnerField(k.REQUEST_KEY_PLATFORM_METADATA,k.REQUEST_PLATFORM_METADATA_KEY_FRAMEWORK_VERSION,e),this.setField(k.REQUEST_PLATFORM_METADATA_KEY_FRAMEWORK_VERSION,e)},this.setOperatingSystemName=function(e){this.setInnerField(k.REQUEST_KEY_PLATFORM_METADATA,k.REQUEST_PLATFORM_METADATA_KEY_OPERATING_SYSTEM_NAME,e.toUpperCase())},this.setOperatingSystemVersion=function(e){this.setInnerField(k.REQUEST_KEY_PLATFORM_METADATA,k.REQUEST_PLATFORM_METADATA_KEY_OPERATING_SYSTEM_VERSION,e)},this.setDeviceCategory=function(e){this.setInnerField(k.REQUEST_KEY_PLATFORM_METADATA,k.REQUEST_PLATFORM_METADATA_KEY_DEVICE_CATEGORY,e)},this.setPlayheadTime=function(e){this.setField(k.REQUEST_KEY_PLAYHEAD_TIME,e)},this.setBufferLength=function(e){this.setField(k.REQUEST_KEY_BUFFER_LENGTH,e)},this.setStreamUrl=function(e){this.setField(k.REQUEST_KEY_STREAM_URL,e)},this.setStreamWidth=function(e){this.setField(k.REQUEST_KEY_VIDEO_WIDTH,e)},this.setStreamHeight=function(e){this.setField(k.REQUEST_KEY_VIDEO_HEIGHT,e)},this.setConnectionType=function(e){this.setField(k.REQUEST_KEY_CONNECTION_TYPE,e)},this.setLinkEncryption=function(e){this.setField(k.REQUEST_KEY_LINK_ENCRYPTION,e)},this.setIsAdSession=function(){this.setField(k.REQUEST_KEY_IS_AD_SESSION,!0)},this.setSignalStrength=function(e){this.setField(k.REQUEST_KEY_SIGNAL_STRENGTH,e)},this.setModuleName=function(e){this.setInnerField(k.REQUEST_PLATFORM_METADATA_KEY_CLIENT_CONFIGURATION,k.REQUEST_PLATFORM_METADATA_KEY_MODULE_NAME,e)},this.setModuleVersion=function(e){this.setInnerField(k.REQUEST_PLATFORM_METADATA_KEY_CLIENT_CONFIGURATION,k.REQUEST_PLATFORM_METADATA_KEY_MODULE_VERSION,e)}},L=ee.CwsSession=function(e,t,n,i,r,a,o,s,l,c,u){var d=this;d._heartbeatTimerCancel=null,d._startTimeMs=0,d._heartbeatSequenceNumber=0,d._sessionFlags=k.SessionFlags.GLOBAL,d._capabilities=k.Capabilities.INSIGHTS,d._heartbeatInfos=[],d._lastRequestSentMs=-1,d._bitrateKbps=-2,d._resource=null,d._playerState=p.PlayerState.NOT_MONITORED,d._encodedFrameRate=-1,d._contentLengthSec=-1,d._streamUrl=null,d._width=-1,d._height=-1,d._playerStateManager=null,d._assetName=null,d._viewerId=null,d._playerName=null,d._isLive=null,d._tags={},d._browserName=null,d._browserVersion=null,d._deviceBrand=null,d._deviceManufacturer=null,d._deviceModel=null,d._deviceType=null,d._deviceVersion=null,d._frameworkName=null,d._frameworkVersion=null,d._operatingSystemName=null,d._operatingSystemVersion=null,d._deviceCategory=null,d._moduleName=null,d._moduleVersion=null,d._connectionType=null,d._linkEncryption=null,d._pauseJoin=!1,d._hasJoined=!1,d._cleanedUp=!1,d._willEndSoon=!1,d._rfpsTimerCancel=null,d._rfpsTimerInterval=1e3,d._playingFpsObservationCount=0,d._playingFpsTotal=0,function(e,t,n,i,r,a,o,s,l,c,u){this._eventQueue=e,this._client=t,this._clientSettings=n,this._logger=i,this._logger.setModuleName("CwsSession"),this._exceptionCatcher=r,this._timer=a,this._gatewayControl=o,this._cwsProtocol=s,this._time=l,this._logBuffer=c,this._clientConfig=u}.apply(this,arguments),this.cleanup=function(){this._clientConfig=null,this._logBuffer=null,this._systemSettings=null,this._time=null,this._cwsProtocol=null,this._gatewayControl=null,this._timer=null,this._exceptionCatcher=null,this._logger=null,this._clientSettings=null,this._client=null,this._eventQueue.flush(),this._eventQueue=null,this._cleanedUp=!0},this.start=function(e){this._session=e,this._global=this._session._global,this._logger.setSessionId(this._session._id),this._startTimeMs=this._time.current(),(this.isVideoSession()||this.isAdSession())&&(this._sessionFlags+=L.DEFAULT_VIDEO_SESSION_FLAGS)},this.willEndSoon=function(){this._willEndSoon=!0},this.initialize=function(){this._logger.debug("initialize()")},this.end=function(){(this.isVideoSession()||this.isAdSession())&&(this._logger.debug("end(): schedule the last hb before session cleanup"+d.sessionTypeTag()),this.enqueueSessionEndEvent()),this.cancelHeartbeatTimer(),this.sendHeartbeat()},this.startSendingHeartbeats=function(){this._willEndSoon||(this.sendHeartbeat(),this.resetHeartbeatTimer())},this.setBrowserName=function(e){d._logger.debug("setBrowserName(): "+e);var t=d._browserName;t!==e&&null!=e&&(d._logger.debug("Change browserName from "+t+" to "+e),d._browserName=e)},this.setBrowserVersion=function(e){d._logger.debug("setBrowserVersion(): "+e);var t=d._browserVersion;t!==e&&null!=e&&(d._logger.debug("Change browserVersion from "+t+" to "+e),d._browserVersion=e)},this.setDeviceBrand=function(e){d._logger.debug("setDeviceBrand(): "+e);var t=d._deviceBrand;t!==e&&null!=e&&(d._logger.debug("Change deviceBrand from "+t+" to "+e),d._deviceBrand=e)},this.setDeviceManufacturer=function(e){d._logger.debug("setDeviceManufacturer(): "+e);var t=d._deviceManufacturer;t!==e&&null!=e&&(d._logger.debug("Change deviceManufacturer from "+t+" to "+e),d._deviceManufacturer=e)},this.setDeviceModel=function(e){d._logger.debug("setDeviceModel(): "+e);var t=d._deviceModel;t!==e&&null!=e&&(d._logger.debug("Change deviceModel from "+t+" to "+e),d._deviceModel=e)},this.setDeviceType=function(e){d._logger.debug("setDeviceBrand(): "+e);var t=d._deviceType;t!==e&&null!=e&&(d._logger.debug("Change deviceType from "+t+" to "+e),d._deviceType=e)},this.setDeviceVersion=function(e){d._logger.debug("setDeviceVersion(): "+e);var t=d._deviceVersion;t!==e&&null!=e&&(d._logger.debug("Change deviceVersion from "+t+" to "+e),d._deviceVersion=e)},this.setOperatingSystemName=function(e){d._logger.debug("setOperatingSystemName(): "+e);var t=d._operatingSystemName;t!==e&&null!=e&&(d._logger.debug("Change operatingSystemName from "+t+" to "+e),d._operatingSystemName=e)},this.setOperatingSystemVersion=function(e){d._logger.debug("setOperatingSystemVersion(): "+e);var t=d._operatingSystemVersion;t!==e&&null!=e&&(d._logger.debug("Change operatingSystemVersion from "+t+" to "+e),d._operatingSystemVersion=e)},this.setDeviceCategory=function(e){d._logger.debug("setDeviceCategory(): "+e);var t=d._deviceCategory;t!==e&&null!=e&&(d._logger.debug("Change operatingSystemVersion from "+t+" to "+e),d._deviceCategory=e)},this.getFrameworkName=function(){return d._frameworkName},this.setFrameworkName=function(e){d._logger.debug("setFrameworkName(): "+e);var t=d._frameworkName;t!==e&&null!=e&&(d._logger.debug("Change frameworkName from "+t+" to "+e),d._frameworkName=e)},this.getFrameworkVersion=function(){return d._frameworkVersion},this.setFrameworkVersion=function(e){d._logger.debug("setFrameworkVersion(): "+e);var t=d._frameworkVersion;t!==e&&null!=e&&(d._logger.debug("Change frameworkVersion from "+t+" to "+e),d._frameworkVersion=e)},this.setStreamUrl=function(e){d._logger.debug("setStreamUrl(): "+e);var t=d._streamUrl;t!==e&&null!=e&&(d._logger.debug("Change stream url from "+t+" to "+e),d._streamUrl=e)},this.setBitrateKbps=function(e){d._logger.debug("setBitrateKbps(): "+e);var t=d._bitrateKbps;t!==e&&0<e&&(d._logger.info("Change bitrate from "+t+" to "+e),d.enqueueBitrateChangeEvent(t,e),d._bitrateKbps=e)},this.setResource=function(e){d._logger.debug("setResource(): "+e);var t=d._resource;t!==e&&null!=e&&(d._logger.info("Change resource from "+t+" to "+e),d._resource=e)},this.setAssetName=function(e){d._logger.debug("setAssetName(): "+e),d._assetName!==e&&null!=e&&(d._logger.info("Change assetName from "+d._assetName+" to "+e),d._assetName=e)},this.setIsLive=function(e){d._logger.debug("setIsLive(): "+e);var t=d._isLive;t!==e&&null!=e&&(d._logger.info("Change isLive from "+t+" to "+e),d._isLive=e)},this.setViewerId=function(e){d._logger.debug("setViewerId(): "+e);var t=d._viewerId;t!==e&&null!=e&&(d._logger.info("Change viewerId from "+t+" to "+e),d._viewerId=e)},this.setPlayerName=function(e){d._logger.debug("setPlayerName(): "+e);var t=d._playerName;t!==e&&null!=e&&(d._logger.info("Change playerName from "+t+" to "+e),d._playerName=e)},this.setTags=function(e){d._logger.debug("setTags()");var t=d._tags;K.ObjectShallowEquals(t,e)||null==e||(d._logger.info("Change tags from "+K.ObjectToString(t)+" to "+K.ObjectToString(e)),d._tags=e)},this.setEncodedFrameRate=function(e){d._logger.debug("setEncodedFrameRate(): "+e),d._encodedFrameRate=e},this.setContentLength=function(e){d._logger.debug("setContentLength(): "+e),d._contentLengthSec=e},this.setPlayerState=function(e){var t;d._logger.debug("setPlayerState(): "+e),d._hasJoined||e!=p.PlayerState.PLAYING||(d.togglePauseJoin(!1),d._hasJoined=!0),d._playerState!==e&&(t=d._playerState,d._logger.info("setPlayerState(): changing player state from "+t+" to "+e),d.enqueuePlayerStateChangeEvent(t,e),d._playerState=e)},this.setStreamResolutionWidth=function(e){d._logger.debug("setStreamResolutionWidth(): "+e);var t=d._width;t!==e&&0<e&&(d._logger.debug("Change stream resolution width from "+t+" to "+e),d.enqueueResolutionWidthChangeEvent(t,e),d._width=e)},this.setStreamResolutionHeight=function(e){d._logger.debug("setStreamResolutionHeight(): "+e);var t=d._height;t!==e&&0<e&&(d._logger.debug("Change stream resolution height from "+t+" to "+e),d.enqueueResolutionHeightChangeEvent(t,e),d._height=e)},this.setConnectionType=function(e){d._logger.debug("setConnectionType(): "+e);var t=d._connectionType;t!==e&&null!=e&&(d._logger.debug("Change network connection type from "+t+" to "+e),d.enqueueConnectionTypeChangeEvent(t,e),d._connectionType=e)},this.setLinkEncryption=function(e){d._logger.debug("setLinkEncryption(): "+e);var t=d._linkEncryption;t!==e&&null!=e&&(d._logger.debug("Change network link encryption from "+t+" to "+e),d.enqueueLinkEncryptionChangeEvent(t,e),d._linkEncryption=e)},this.togglePauseJoin=function(e){var t;d._logger.debug("togglePauseJoin()"),d._pauseJoin!==e?(t=d._pauseJoin,e=!d._pauseJoin,d.enqueuePauseJoinChangeEvent(t,e),d._pauseJoin=!d._pauseJoin):d._logger.debug("togglePauseJoin(): same value, ignoring")},this.sendError=function(e,t){d.enqueueErrorEvent(e,t)},this.enqueueEvent=function(e,t){var n;t[k.REQUEST_EVENT_KEY_TYPE]=e,t[k.REQUEST_EVENT_KEY_SESSION_TIME]=this.getSessionTime(),t[k.REQUEST_EVENT_KEY_SEQUENCE_NUMBER]=this._eventQueue.getNumber(),this._playerStateManager&&(n=W.Integer(this._playerStateManager.getPHT(),0,null,-1),e=W.Integer(this._playerStateManager.getBufferLength(),0,null,-1),0<=n&&(t[k.REQUEST_KEY_PLAYHEAD_TIME]=n),0<e&&(t[k.REQUEST_KEY_BUFFER_LENGTH]=e)),this._eventQueue.enqueue(t)},this.setPlayerStateManager=function(e){d._playerStateManager=e,null!=d._playerStateManager?d.startRfpsTimer():d.cancelRfpsTimer()},this.enqueueSessionEndEvent=function(){var e=this.getSessionTime(),t=this.getNextEventNumber(),e=this._cwsProtocol.generateSessionEndEvent(t,e);this._eventQueue.enqueue(e)},this.enqueueErrorEvent=function(e,t){var n={};n[k.REQUEST_ERROR_EVENT_KEY_MESSAGE]=e,n[k.REQUEST_ERROR_EVENT_KEY_FATAL]=t,this.enqueueEvent(k.EVENT_TYPE_ERROR,n)},this.enqueueBitrateChangeEvent=function(e,t){var n={},i={};0<e&&(i[k.REQUEST_KEY_BITRATE]=e),n[k.REQUEST_KEY_BITRATE]=t,this.declareStateChange(n,i)},this.enqueueSeekEvent=function(e,t){var n={};n[k.REQUEST_EVENT_KEY_SEEK_ACT_TYPE]=e,0<=t&&(n[k.REQUEST_EVENT_KEY_SEEK_TO_POS]=t),this.enqueueEvent(k.EVENT_TYPE_SEEK,n)},this.enqueueResolutionWidthChangeEvent=function(e,t){var n={},i={};-1!==e&&(i[k.REQUEST_KEY_VIDEO_WIDTH]=e),n[k.REQUEST_KEY_VIDEO_WIDTH]=t,this.declareStateChange(n,i)},this.enqueueResolutionHeightChangeEvent=function(e,t){var n={},i={};-1!==e&&(i[k.REQUEST_KEY_VIDEO_HEIGHT]=e),n[k.REQUEST_KEY_VIDEO_HEIGHT]=t,this.declareStateChange(n,i)},this.enqueueConnectionTypeChangeEvent=function(e,t){var n={},i={};null!==e&&(i[k.REQUEST_KEY_CONNECTION_TYPE]=e),n[k.REQUEST_KEY_CONNECTION_TYPE]=t,this.declareStateChange(n,i)},this.enqueueLinkEncryptionChangeEvent=function(e,t){var n={},i={};null!==e&&(i[k.REQUEST_KEY_LINK_ENCRYPTION]=e),n[k.REQUEST_KEY_LINK_ENCRYPTION]=t,this.declareStateChange(n,i)},this.enqueuePauseJoinChangeEvent=function(e,t){var n={},i={};i[k.REQUEST_KEY_PAUSE_JOIN]=e,n[k.REQUEST_KEY_PAUSE_JOIN]=t,this.declareStateChange(n,i)},this.enqueuePlayerStateChangeEvent=function(e,t){var n={},i={};n[k.REQUEST_KEY_PLAYER_STATE]=k.convertPlayerState(t),i[k.REQUEST_KEY_PLAYER_STATE]=k.convertPlayerState(e),this.declareStateChange(n,i)},this.declareStateChange=function(e,t){var n={};n[k.REQUEST_STATE_CHANGE_EVENT_KEY_NEW]=e,null!=t&&0<K.dictCount(t)&&(n[k.REQUEST_STATE_CHANGE_EVENT_KEY_OLD]=t),this.enqueueEvent(k.EVENT_TYPE_STATE_CHANGE,n)},this.enqueueCustomEvent=function(e,t){var n={};n[k.REQUEST_CUSTOM_EVENT_KEY_NAME]=e,n[k.REQUEST_CUSTOM_EVENT_KEY_ATTRIBUTES]=t,this.enqueueEvent(k.EVENT_TYPE_CUSTOM,n)},this.cancelHeartbeatTimer=function(){null!=d._heartbeatTimerCancel&&(d._heartbeatTimerCancel(),d._heartbeatTimerCancel=null)},this.resetHeartbeatTimer=function(){d.cancelHeartbeatTimer();var e=1e3*d._clientSettings.heartbeatInterval;d._heartbeatTimerCancel=d._timer.create(d.sendHeartbeat,e,"Session.sendHeartbeat")},this.cancelRfpsTimer=function(){null!=d._rfpsTimerCancel&&(d._rfpsTimerCancel(),d._rfpsTimerCancel=null)},this.startRfpsTimer=function(){d.cancelRfpsTimer(),d._rfpsTimerCancel=d._timer.create(d.countRfps,d._rfpsTimerInterval,"Session.startRfpsTimer")},this.createHeartbeatInfo=function(){var e={err:"pending"};e.seq=d._heartbeatSequenceNumber-1,e.sentAt=d.getSessionTime(),e.rtt=-1,d._heartbeatInfos.push(e)},this.updateHeartbeatInfoOnFailure=function(e,t){for(var n=0;n<d._heartbeatInfos.length;n++){var i=d._heartbeatInfos[n];i.seq===e&&(i.rtt=d.getSessionTime()-i.sentAt,i.err=t)}},this.updateHeartbeatInfoOnSuccess=function(e){for(var t=0;t<d._heartbeatInfos.length;t++){var n=d._heartbeatInfos[t];n.seq===e&&(n.rtt=d.getSessionTime()-n.sentAt,n.err="ok")}},this.removeOutdatedHeartbeatInfos=function(){for(var e=d._clientConfig.get(B.CONFIG_KEY_MAX_HEARTBEAT_INFOS),t=[],n=0;n<d._heartbeatInfos.length;n++)d._heartbeatInfos[n].seq<d._heartbeatSequenceNumber-e&&t.push(n);for(var i=[],r=0;r<d._heartbeatInfos.length;r++)d._heartbeatInfos[r].seq,t.indexOf(r)<0&&i.push(d._heartbeatInfos[r]);d._heartbeatInfos=i},this.compileHeartbeatInfos=function(){d.removeOutdatedHeartbeatInfos();for(var e=[],t=0;t<d._heartbeatInfos.length;t++){var n=d._heartbeatInfos[t],i={};i[k.REQUEST_HEARTBEAT_INFO_KEY_SEQUENCE_NUMBER]=n.seq,i[k.REQUEST_HEARTBEAT_INFO_KEY_ROUNDTRIP_TIME]=n.rtt,i[k.REQUEST_HEARTBEAT_INFO_KEY_STATUS]=n.err,e.push(i)}return e},this.makeHeartbeat=function(){var e=d._eventQueue.flush();if(d.isGlobalSession()&&0===e.length)return null;var t,n,i,r,a,o=new N;return o.setMessageType(k.MESSAGE_TYPE_SESSION_HEARTBEAT),o.setCustomerKey(d._clientSettings.customerKey),o.setClientId(d._clientConfig.get(B.CONFIG_KEY_CLIENT_ID)),o.setSessionId(d._session._id),o.setSequenceNumber(d._heartbeatSequenceNumber),o.setProtocolVersion(k.version),o.setClientVersion(h.version),o.setInstanceId(d._client.getId()),o.setCapfield(0),null!=d._connectionType&&o.setConnectionType(d._connectionType),null!=d._linkEncryption&&o.setLinkEncryption(d._linkEncryption),o.setPlatformMetadataSchema(k.SDK_METADATA_SCHEMA),null!=d._browserName&&o.setBrowserName(d._browserName),null!=d._browserVersion&&o.setBrowserVersion(d._browserVersion),null!=d._deviceBrand&&o.setDeviceBrand(d._deviceBrand),null!=d._deviceManufacturer&&o.setDeviceManufacturer(d._deviceManufacturer),null!=d._deviceModel&&o.setDeviceModel(d._deviceModel),null!=d._deviceType&&o.setDeviceType(d._deviceType),null!=d._deviceVersion&&o.setDeviceVersion(d._deviceVersion),null!=d._frameworkName&&o.setFrameworkName(d._frameworkName),null!=d._frameworkVersion&&o.setFrameworkVersion(d._frameworkVersion),null!=d._operatingSystemName&&o.setOperatingSystemName(d._operatingSystemName),null!=d._operatingSystemVersion&&o.setOperatingSystemVersion(d._operatingSystemVersion),null!=d._deviceCategory&&o.setDeviceCategory(d._deviceCategory),null!=d._playerStateManager&&(d._moduleName=d._playerStateManager.getModuleName(),null!=d._moduleName&&o.setModuleName(d._moduleName)),null!=d._playerStateManager&&(d._moduleVersion=d._playerStateManager.getModuleVersion(),null!=d._moduleVersion&&o.setModuleVersion(d._moduleVersion)),null!=d._viewerId&&o.setViewerId(d._viewerId),0<K.dictCount(d._tags)&&o.setTags(d._tags),d.isVideoSession()||d.isAdSession()?(d.isAdSession()&&o.setIsAdSession(),null!=d._assetName&&o.setAssetName(d._assetName),o.setSessionFlags(d._sessionFlags),i=k.convertPlayerState(d._playerState),o.setPlayerState(i),o.setPauseJoin(d._pauseJoin),null!=d._playerName&&o.setPlayerName(d._playerName),null!=d._isLive&&o.setIsLive(d._isLive),0<d._contentLengthSec&&o.setContentLength(d._contentLengthSec),0<d._bitrateKbps&&o.setBitrate(d._bitrateKbps),null!==d._resource&&o.setResource(d._resource),0<d._encodedFrameRate&&o.setEncodedFrameRate(d._encodedFrameRate),null!=d._playerStateManager&&(t=W.Integer(d._playerStateManager.getPHT(),0,null,-1),r=W.Integer(d._playerStateManager.getBufferLength(),0,null,-1),n=d._playerStateManager.getSignalStrength()),0<=t&&o.setPlayheadTime(t),0<r&&o.setBufferLength(r),0<(r=d.updateAverageFrameRate())&&o.setAverageFrameRate(r),0<d._playingFpsTotal&&o.setRfpsTotal(W.Integer(d._playingFpsTotal,0,null,-1)),0<d._playingFpsObservationCount&&o.setRfpsObservationCount(W.Integer(d._playingFpsObservationCount,0,null,-1)),n<=0&&o.setSignalStrength(n),null!=d._streamUrl&&o.setStreamUrl(d._streamUrl),0<d._width&&o.setStreamWidth(d._width),0<d._height&&o.setStreamHeight(d._height)):o.setSessionFlags(k.SessionFlags.GLOBAL),0<e.length&&o.setEvents(e),o.setCapabilities(d._capabilities),o.setIsSdkClient(!0),d._clientConfig.get(B.CONFIG_KEY_SEND_LOGS)&&o.setLogs(d._logBuffer.flush()),0<d._clientConfig.get(B.CONFIG_KEY_MAX_HEARTBEAT_INFOS)&&0<(a=d.compileHeartbeatInfos()).length&&o.setHeartbeatInfos(a),o.setSessionStartTime(d._startTimeMs),o.setSessionTime(d.getSessionTime()),d._heartbeatSequenceNumber++,o.get()},this.sendHeartbeat=function(){var e;d._cleanedUp||null!=(e=d.makeHeartbeat())&&d.postHeartbeat(e)},this.countRfps=function(){var e;d._playerState!==p.PlayerState.PLAYING||0<=(e=d._playerStateManager.getRenderedFrameRate())&&(d._playingFpsTotal+=e,d._playingFpsObservationCount++)},this.updateAverageFrameRate=function(){if(d._playerState!==p.PlayerState.PLAYING)return-1;var e=d._playerStateManager.getRenderedFrameRate();return 0<=e?(d._playingFpsTotal+=e,d._playingFpsObservationCount++,K.Int32.Cast(+d._playingFpsTotal/d._playingFpsObservationCount)):-1},this.postHeartbeat=function(e){d.createHeartbeatInfo();var n=d._heartbeatSequenceNumber-1;d._logger.info("postHeartbeat(): Send HB["+n+"]"+d.sessionTypeTag()),d._gatewayControl.send(e,function(e,t){d.onHeartbeatResponse(e,t,n)})},this.onHeartbeatResponse=function(i,r,a){d._cleanedUp||d._exceptionCatcher.runProtected("onHeartbeatResponse",function(){var e,t,n;i?null!=(t=r)?(d._logger.debug("onHeartbeatResponse(): received valid response for HB["+a+"]"),d.updateHeartbeatInfoOnSuccess(a),null!=(e=t[k.RESPONSE_KEY_CLIENT_ID])&&e!=d._clientConfig.get(B.CONFIG_KEY_CLIENT_ID)&&(d._logger.debug("onHeartbeatResponse(): setting the client id to "+e+" (from gateway)"),d._clientConfig.set(B.CONFIG_KEY_CLIENT_ID,e),d._clientConfig.save()),null!=(e=t[k.RESPONSE_KEY_STATUS])&&e!=k.RESPONSE_STATUS_NO_ERRORS&&d._logger.error("onHeartbeatResponse(): error from gateway: "+e),"object"==typeof(e=t[k.RESPONSE_KEY_CONFIG])&&(null!=(t=e[k.RESPONSE_CONFIG_KEY_MAX_HEARTBEAT_INFOS])&&d._clientConfig.get(B.CONFIG_KEY_MAX_HEARTBEAT_INFOS)!==t&&(d._logger.debug("onHeartbeatResponse(): setting Maximum Heartbeat Infos to "+t+" (from gateway)"),d._clientConfig.set(B.CONFIG_KEY_MAX_HEARTBEAT_INFOS,t)),(t=null!=(t=e[k.RESPONSE_CONFIG_KEY_SEND_LOGS])&&K.AsBoolean(t))!==d._clientConfig.get(B.CONFIG_KEY_SEND_LOGS)&&(d._logger.debug("onHeartbeatResponse(): turning "+(t?"on":"off")+" sending of logs"),d._clientConfig.set(B.CONFIG_KEY_SEND_LOGS,t)),null==(t=e[k.RESPONSE_CONFIG_KEY_HEARTBEAT_INTERVAL])||(n=K.Int32.Cast(t))!=d._clientSettings.heartbeatInterval&&(d._logger.debug("onHeartbeatResponse(): received hbIntervalMs from gateway: "+n),d._clientSettings.heartbeatInterval=n,null!=d._heartbeatTimerCancel&&d.resetHeartbeatTimer()),null!=(n=e[k.RESPONSE_CONFIG_KEY_GATEWAY_URL])&&n!=d._clientSettings.gatewayUrl&&(d._logger.debug("onHeartbeatResponse(): received gatewayUrl from gateway: "+n),d._clientSettings.gatewayUrl=n))):d._logger.warning("onHeartbeatResponse(): decoded heartbeat response is null."):(K.isValidString(n=r)?K.stringStartsWith(n,"HTTP timeout")?d._logger.warning("onHeartbeatResponse(): "+n):d._logger.error("onHeartbeatResponse(): failed to send heartbeat: "+n):(n=x.DEFAULT_HEARTBEAT_ERROR_MESSAGE,d._logger.error("onHeartbeatResponse(): "+n)),d.updateHeartbeatInfoOnFailure(a,n))})},this.getSessionTime=function(){return K.Int32.Cast(d._time.current()-d._startTimeMs)},this.getNextEventNumber=function(){return this._eventQueue.getNumber()},this.sessionTypeTag=function(){return this.isGlobalSession()?" (global session)":""},this.isGlobalSession=function(){return this._global==L.SESSION_TYPE.GLOBAL},this.isVideoSession=function(){return this._global==L.SESSION_TYPE.VIDEO},this.isAdSession=function(){return this._global==L.SESSION_TYPE.AD}};L.DEFAULT_VIDEO_SESSION_FLAGS=k.SessionFlags.VIDEO+k.SessionFlags.QUALITY_METRICS+k.SessionFlags.BITRATE_METRICS,L.SESSION_TYPE={VIDEO:"Video",GLOBAL:"Global",AD:"Ad"};var x=(ee.IMonitor=function(){this.onPlayerStateChange=function(e){},this.onBitrateChange=function(e){},this.onSeekEvent=function(e,t){},this.onEncodedFrameRateChange=function(e){},this.onRenderedFrameRateChange=function(e){},this.onContentLengthChange=function(e){},this.onPlayheadTimeChange=function(e){},this.onStreamUrlChange=function(e){},this.onBufferLengthChange=function(e){},this.onPlayerTypeChange=function(e){},this.onPlayerVersionChange=function(e){},this.onStreamResolutionWidthChange=function(e){},this.onStreamResolutionHeightChange=function(e){},this.onConnectionTypeChange=function(e){},this.onLinkEncryptionChange=function(e){},this.onSignalStrengthChange=function(e){},this.onError=function(e,t){},this.onRelease=function(){}},ee.Session=function(){var o=this;o._contentMetadata=null,o._playerStateManager=null,o._id=0,o._global=L.SESSION_TYPE.VIDEO,o._cleaningUp=!1,o._cleanedUp=!1,o._adPlaying=!1,o._adStream=null,o._adPlayer=null,o._adPosition=null,o._ignorePlayerState=!1,o._pooledPlayerState=p.PlayerState.NOT_MONITORED,o._ignoreBitrateAndResource=!1,o._ignorePlayheadTimeandBufferLength=!1,o._ignoreEncodedFrameRateAndDuration=!1,o._ignoreError=!1,function(e,t,n,i,r,a,o,s){this._id=e,this._global=t,this._contentMetadata=n,this._clientConfig=i,this._systemMetadata=r,this._cwsSession=a,this._exceptionCatcher=o,this._logger=s,this._logger.setModuleName("Session"),this._logger.setSessionId(K.ToString(this._id))}.apply(o,arguments),this.start=function(){o.isVideoSession()||o.isAdSession()?o._logger.info("start(): assetName="+o._contentMetadata.assetName):o._logger.info("start()"+o.sessionTypeTag()),o._cwsSession.start(this),o._clientConfig.isReady()?o.initiateSession():o._clientConfig.register(function(){o.initiateSession()})},this.cleanup=function(){o._logger.info("cleanup()"+o.sessionTypeTag()),o._cleaningUp=!0,o._cwsSession.willEndSoon(),o._clientConfig.isReady()?o.endCwsSessionAndCleanupAll():o._clientConfig.register(function(){o.endCwsSessionAndCleanupAll()})},this.cleanupAll=function(){o._logger.debug("cleanupAll()"+o.sessionTypeTag()),(o.isVideoSession()||o.isAdSession())&&null!=o._playerStateManager&&o.detachPlayer(),o._contentMetadata=null,o._logger.setSessionId(null),o._logger=null,o._exceptionCatcher=null,o._client=null,o._clientConfig=null,o._systemMetadata=null,o._cwsSession.cleanup(),o._cwsSession=null,o._cleanedUp=!0},this.endCwsSessionAndCleanupAll=function(){o._cwsSession.end(),o.cleanupAll()},this.initiateSession=function(){o._cwsSession.initialize(),o.setStatesFromSystemMetadata(),(o.isVideoSession()||o.isAdSession())&&(o.setStatesFromContentMetadata(),o.enqueueEventForContentMetadata()),o._cwsSession.startSendingHeartbeats()},this.enqueueEventForContentMetadata=function(){var e={};if(null!=o._contentMetadata.assetName?e[k.REQUEST_KEY_ASSET_NAME]=o._contentMetadata.assetName:o._logger.warning("enqueueEventForContentMetadata(): assetName was not set."),null!=o._contentMetadata.applicationName?(void 0===e[k.REQUEST_KEY_STREAM_METADATA_CHANGE]&&(e[k.REQUEST_KEY_STREAM_METADATA_CHANGE]={}),e[k.REQUEST_KEY_STREAM_METADATA_CHANGE][k.REQUEST_KEY_PLAYER_NAME]=o._contentMetadata.applicationName):o._logger.warning("enqueueEventForContentMetadata(): applicationName was not set."),null!=o._contentMetadata.streamUrl?e[k.REQUEST_KEY_STREAM_URL]=o._contentMetadata.streamUrl:o._logger.warning("enqueueEventForContentMetadata(): streamUrl was not set."),null!=o._contentMetadata.viewerId?(void 0===e[k.REQUEST_KEY_STREAM_METADATA_CHANGE]&&(e[k.REQUEST_KEY_STREAM_METADATA_CHANGE]={}),e[k.REQUEST_KEY_STREAM_METADATA_CHANGE][k.REQUEST_KEY_VIEWER_ID]=o._contentMetadata.viewerId):o._logger.warning("enqueueEventForContentMetadata(): viewerId was not set."),null!=o._contentMetadata.defaultResource?e[k.REQUEST_KEY_RESOURCE]=o._contentMetadata.defaultResource:o._logger.warning("enqueueEventForContentMetadata(): defaultResource was not set."),-1<o._contentMetadata.duration?e[k.REQUEST_KEY_CONTENT_LENGTH]=o._contentMetadata.duration:o._logger.warning("enqueueEventForContentMetadata(): duration was not set."),-1<o._contentMetadata.encodedFrameRate?e[k.REQUEST_KEY_ENCODED_FRAME_RATE]=o._contentMetadata.encodedFrameRate:o._logger.warning("enqueueEventForContentMetadata(): encodedFrameRate was not set."),o._contentMetadata.streamType!=s.StreamType.UNKNOWN?o._contentMetadata.streamType==te.ContentMetadata.StreamType.LIVE?e[k.REQUEST_KEY_IS_LIVE]=!0:e[k.REQUEST_KEY_IS_LIVE]=!1:o._logger.warning("enqueueEventForContentMetadata(): streamType was not set."),0<K.dictCount(o._contentMetadata.custom))for(var t in e[k.REQUEST_KEY_TAGS]={},o._contentMetadata.custom)e[k.REQUEST_KEY_TAGS][t]=o._contentMetadata.custom[t];else o._logger.warning("enqueueEventForContentMetadata(): custom tags were not set.");0<K.dictCount(e)&&o._cwsSession.declareStateChange(e,null)},this.setStatesFromSystemMetadata=function(){o._logger.debug("setStatesFromSystemMetadata()");var e=o._systemMetadata.get(),t=e[J.BROWSER_NAME];null!=t&&o._cwsSession.setBrowserName(t);t=e[J.BROWSER_VERSION];null!=t&&o._cwsSession.setBrowserVersion(t);t=e[J.DEVICE_BRAND];null!=t&&o._cwsSession.setDeviceBrand(t);t=e[J.DEVICE_MANUFACTURER];null!=t&&o._cwsSession.setDeviceManufacturer(t);t=e[J.DEVICE_MODEL];null!=t&&o._cwsSession.setDeviceModel(t);t=e[J.DEVICE_TYPE];null!=t&&o._cwsSession.setDeviceType(t);t=e[J.DEVICE_VERSION];null!=t&&o._cwsSession.setDeviceVersion(t);t=e[J.FRAMEWORK_NAME];null!=t&&o._cwsSession.setFrameworkName(t);t=e[J.FRAMEWORK_VERSION];null!=t&&o._cwsSession.setFrameworkVersion(t);t=e[J.OPERATING_SYSTEM_NAME];null!=t&&o._cwsSession.setOperatingSystemName(t);t=e[J.OPERATING_SYSTEM_VERSION];null!=t&&o._cwsSession.setOperatingSystemVersion(t);e=e[J.DEVICE_CATEGORY];null!=e&&o._cwsSession.setDeviceCategory(e)},this.setStatesFromContentMetadata=function(){var e;o._logger.debug("setStatesFromContentMetadata()"),null!=o._contentMetadata.defaultResource&&o._cwsSession.setResource(o._contentMetadata.defaultResource),null!=o._contentMetadata.streamUrl&&o._cwsSession.setStreamUrl(o._contentMetadata.streamUrl),0<o._contentMetadata.duration&&o._cwsSession.setContentLength(o._contentMetadata.duration),0<o._contentMetadata.encodedFrameRate&&o._cwsSession.setEncodedFrameRate(o._contentMetadata.encodedFrameRate),o._contentMetadata.streamType!==s.StreamType.UNKNOWN&&(e=o._contentMetadata.streamType===s.StreamType.LIVE,o._cwsSession.setIsLive(e)),null!=o._contentMetadata.assetName&&o._cwsSession.setAssetName(o._contentMetadata.assetName),null!=o._contentMetadata.viewerId&&o._cwsSession.setViewerId(o._contentMetadata.viewerId),null!=o._contentMetadata.applicationName&&o._cwsSession.setPlayerName(o._contentMetadata.applicationName),0<K.dictCount(o._contentMetadata.custom)&&o._cwsSession.setTags(o._contentMetadata.custom)},this.onPlayerStateChange=function(e){return o._logger.debug("onPlayerStateChange(): "+e),o._cwsSession._playerState!=e?(o._cwsSession._playerState==p.PlayerState.NOT_MONITORED&&e!=p.PlayerState.NOT_MONITORED&&(o._pooledPlayerState=e),o._ignorePlayerState?void o._logger.debug("onPlayerStateChange(): "+e+" (pooled, "+(o._adPlaying?"ad playing":"preloading")+")"):void o._cwsSession.setPlayerState(e)):void 0},this.onBitrateChange=function(e){return o._logger.debug("onBitrateChange(): "+e),o._ignoreBitrateAndResource?void o._logger.info("onBitrateChange(): ignored"):void o._cwsSession.setBitrateKbps(e)},this.onSeekEvent=function(e,t){null==t||K.isInteger(t)||(o._logger.error("onSeekEvent(): Ignored non-integer seekToPosition data: "+t),t=-1),o._cwsSession.enqueueSeekEvent(e,t)},this.onEncodedFrameRateChange=function(e){o._logger.debug("onEncodedFrameRateChange(): "+e),0<o._contentMetadata.encodedFrameRate||(0<e?o._ignoreEncodedFrameRateAndDuration?o._logger.info("onEncodedFrameRateChange(): Ignored encoded frame rate data: "+e+" (ads)"):(o._cwsSession.setEncodedFrameRate(e),o._logger.info("onEncodedFrameRateChange(): Received encoded frame rate data: "+e)):o._logger.warning("onEncodedFrameRateChange(): Ignored invalid encoded frame rate data: "+e))},this.onContentLengthChange=function(e){o._logger.debug("onContentLengthChange(): "+e),0<o._contentMetadata.duration||(0<e?o._ignoreEncodedFrameRateAndDuration?o._logger.info("setContentLength(): Ignored content length data: "+e+" (ads)"):(o._cwsSession.setContentLength(e),o._logger.info("setContentLength(): Received content length data: "+e)):o._logger.warning("setContentLength(): Ignored invalid content length data: "+e))},this.onStreamUrlChange=function(e){o._logger.debug("onStreamUrlChange(): "+e),null==o._contentMetadata.streamUrl&&o._cwsSession.setStreamUrl(e)},this.onStreamResolutionWidthChange=function(e){o._logger.debug("onStreamResolutionWidthChange(): "+e),o._cwsSession.setStreamResolutionWidth(e)},this.onStreamResolutionHeightChange=function(e){o._logger.debug("onStreamResolutionHeightChange(): "+e),o._cwsSession.setStreamResolutionHeight(e)},this.onConnectionTypeChange=function(e){o._logger.debug("onConnectionTypeChange(): "+e),o._cwsSession.setConnectionType(e)},this.onLinkEncryptionChange=function(e){o._logger.debug("onLinkEncryptionChange(): "+e),o._cwsSession.setLinkEncryption(e)},this.onPlayerTypeChange=function(e){o._logger.debug("onPlayerTypeChange(): "+e),null==o._cwsSession.getFrameworkName()&&o._cwsSession.setFrameworkName(e)},this.onPlayerVersionChange=function(e){o._logger.debug("onPlayerVersionChange(): "+e),null==o._cwsSession.getFrameworkVersion()&&o._cwsSession.setFrameworkVersion(e)},this.onError=function(e,t){o._logger.debug("onError(): "+e+" ("+t+")"),o.reportError(e,t)},this.onRelease=function(){o._logger.debug("onRelease()"),o.detachPlayer()},this.adStart=function(e,t,n){return o._logger.debug("adStart(): adStream="+e+" adPlayer="+t+" adPosition="+n),o._adPlaying?void o._logger.warning("adStart(): multiple adStart calls, ignoring"):(o._adPlaying=!0,o._adStream=e,o._adPlayer=t,o._adPosition=n,o._cwsSession._hasJoined||o._cwsSession.togglePauseJoin(!0),void(o._adStream==te.Client.AdStream.CONTENT||o._adPlayer==te.Client.AdPlayer.SEPARATE?(o._cwsSession._playerState!==p.PlayerState.NOT_MONITORED&&(o._pooledPlayerState=o._cwsSession._playerState),o._cwsSession.setPlayerState(p.PlayerState.NOT_MONITORED),o._ignorePlayerState=!0):o._adStream==te.Client.AdStream.SEPARATE&&o._adPlayer==te.Client.AdPlayer.CONTENT&&(o._cwsSession._playerState!==p.PlayerState.NOT_MONITORED&&(o._pooledPlayerState=o._cwsSession._playerState),o._cwsSession.setPlayerState(p.PlayerState.NOT_MONITORED),o._ignorePlayerState=!0,o._ignoreBitrateAndResource=!0,o._ignoreEncodedFrameRateAndDuration=!0,o._ignorePlayheadTimeandBufferLength=!0,o._ignoreError=!0)))},this.adEnd=function(){return o._logger.debug("adEnd()"),o._adPlaying?(o._cwsSession._hasJoined||o._cwsSession.togglePauseJoin(!1),o._adStream==te.Client.AdStream.CONTENT||o._adPlayer==te.Client.AdPlayer.SEPARATE?o._preloading||(o._ignorePlayerState=!1,o._cwsSession.setPlayerState(o._pooledPlayerState)):o._adStream==te.Client.AdStream.SEPARATE&&o._adPlayer==te.Client.AdPlayer.CONTENT&&(o._ignoreBitrateAndResource=!1,o._ignoreEncodedFrameRateAndDuration=!1,o._ignorePlayheadTimeandBufferLength=!1,o._ignoreError=!1,o._preloading||(o._ignorePlayerState=!1,o._cwsSession.setPlayerState(o._pooledPlayerState))),o._adPlaying=!1,void(o._adStream=o._adPlayer=o._adPosition=null)):void o._logger.debug("adEnd(): called before adStart, ignoring")},this.detachPlayer=function(){o._logger.debug("detachPlayer()"),null!==o._playerStateManager&&(o._exceptionCatcher.runProtected("Session.detachPlayer",function(){o._playerStateManager.removeMonitoringNotifier()}),o._playerStateManager=null,o._cwsSession.setPlayerStateManager(null),o._cwsSession.setPlayerState(p.PlayerState.NOT_MONITORED))},this.attachPlayer=function(e){return o._logger.debug("attachPlayer()"),null!=o._playerStateManager?void o._logger.error("attachPlayer(): detach current PlayerStateManager first"):void o._exceptionCatcher.runProtected("Session.attachPlayer()",function(){e.setMonitoringNotifier(o,o._id)?(e.pushCurrentState(),o._playerStateManager=e,o._cwsSession.setPlayerStateManager(o._playerStateManager)):o._logger.error("attachPlayer(): instance of PlayerStateManager is already attached to a session")})},this.getPlayerStateManager=function(){return o._logger.debug("getPlayerStateManager()"),o._playerStateManager},this.contentPreload=function(){return o._logger.debug("contentPreload()"),o._preloading?void o._logger.debug("contentPreload(): called twice, ignoring"):(o._preloading=!0,void(o._ignorePlayerState=!0))},this.contentStart=function(){return o._logger.debug("contentStart()"),o._preloading?(o._preloading=!1,void(o._adPlaying||(o._ignorePlayerState=!1,o._cwsSession.setPlayerState(o._pooledPlayerState)))):void o._logger.warning("contentStart(): called without contentPreload, ignoring")},this.reportError=function(e,t){var n;o._logger.info("reportError(): "+e),K.isValidString(e)?t===te.Client.ErrorSeverity.FATAL||t===te.Client.ErrorSeverity.WARNING?o._ignoreError?o._logger.debug("reportError(): ignored"):(n=t===te.Client.ErrorSeverity.FATAL,o._cwsSession.sendError(e,n)):o._logger.error("reportError(): invalid error severity: "+t):o._logger.error("reportError(): invalid error message string: "+e)},this.updateContentMetadata=function(e){o._logger.debug("updateContentMetadata(): enter"),o._exceptionCatcher.runProtected("Session.updateContentMetadata",function(){o.mergeContentMetadata(e),o.setStatesFromContentMetadata()})},this.sendCustomEvent=function(e,t){o._logger.info("sendEvent(): eventName="+e+o.sessionTypeTag()),o._cwsSession.enqueueCustomEvent(e,t)},this.mergeContentMetadata=function(e){var t={},n={};if(K.isValidString(e.assetName)&&(o._contentMetadata.assetName!=e.assetName?(null!=o._contentMetadata.assetName&&(t[k.REQUEST_KEY_ASSET_NAME]=o._contentMetadata.assetName),n[k.REQUEST_KEY_ASSET_NAME]=e.assetName,o._contentMetadata.assetName=e.assetName):o._logger.warning("mergeContentMetadata(): assetName was not changed.")),K.isValidString(e.applicationName)&&(o._contentMetadata.applicationName!=e.applicationName?(null!=o._contentMetadata.applicationName&&(void 0===t[k.REQUEST_KEY_STREAM_METADATA_CHANGE]&&(t[k.REQUEST_KEY_STREAM_METADATA_CHANGE]={}),t[k.REQUEST_KEY_STREAM_METADATA_CHANGE][k.REQUEST_KEY_PLAYER_NAME]=o._contentMetadata.applicationName),void 0===n[k.REQUEST_KEY_STREAM_METADATA_CHANGE]&&(n[k.REQUEST_KEY_STREAM_METADATA_CHANGE]={}),n[k.REQUEST_KEY_STREAM_METADATA_CHANGE][k.REQUEST_KEY_PLAYER_NAME]=e.applicationName,o._contentMetadata.applicationName=e.applicationName):o._logger.warning("mergeContentMetadata(): applicationName was not changed.")),K.isValidString(e.streamUrl)&&(o._contentMetadata.streamUrl!=e.streamUrl?(null!=o._contentMetadata.streamUrl&&(t[k.REQUEST_KEY_STREAM_URL]=o._contentMetadata.streamUrl),n[k.REQUEST_KEY_STREAM_URL]=e.streamUrl,o._contentMetadata.streamUrl=e.streamUrl):o._logger.warning("mergeContentMetadata(): streamUrl was not changed.")),K.isValidString(e.viewerId)&&(o._contentMetadata.viewerId!=e.viewerId?(null!=o._contentMetadata.viewerId&&(void 0===t[k.REQUEST_KEY_STREAM_METADATA_CHANGE]&&(t[k.REQUEST_KEY_STREAM_METADATA_CHANGE]={}),t[k.REQUEST_KEY_STREAM_METADATA_CHANGE][k.REQUEST_KEY_VIEWER_ID]=o._contentMetadata.viewerId),void 0===n[k.REQUEST_KEY_STREAM_METADATA_CHANGE]&&(n[k.REQUEST_KEY_STREAM_METADATA_CHANGE]={}),n[k.REQUEST_KEY_STREAM_METADATA_CHANGE][k.REQUEST_KEY_VIEWER_ID]=e.viewerId,o._contentMetadata.viewerId=e.viewerId):o._logger.warning("mergeContentMetadata(): viewerId was not changed.")),K.isValidString(e.defaultResource)&&(o._contentMetadata.defaultResource!=e.defaultResource?(null!=o._contentMetadata.defaultResource&&(t[k.REQUEST_KEY_RESOURCE]=o._contentMetadata.defaultResource),n[k.REQUEST_KEY_RESOURCE]=e.defaultResource,o._contentMetadata.defaultResource=e.defaultResource):o._logger.warning("mergeContentMetadata(): defaultResource was not changed.")),K.isInteger(e.duration)&&0<e.duration&&(o._contentMetadata.duration!=e.duration?(0<o._cwsSession._contentLengthSec&&(t[k.REQUEST_KEY_CONTENT_LENGTH]=o._cwsSession._contentLengthSec),n[k.REQUEST_KEY_CONTENT_LENGTH]=e.duration,o._contentMetadata.duration=e.duration):o._logger.warning("mergeContentMetadata(): duration was not changed.")),K.isInteger(e.encodedFrameRate)&&0<e.encodedFrameRate&&(o._contentMetadata.encodedFrameRate!=e.encodedFrameRate?(-1<o._contentMetadata.encodedFrameRate&&(t[k.REQUEST_KEY_ENCODED_FRAME_RATE]=o._contentMetadata.encodedFrameRate),n[k.REQUEST_KEY_ENCODED_FRAME_RATE]=e.encodedFrameRate,o._contentMetadata.encodedFrameRate=e.encodedFrameRate):o._logger.warning("mergeContentMetadata(): encodedFrameRate was not changed.")),e.streamType!=s.StreamType.UNKNOWN&&(o._contentMetadata.streamType!=e.streamType?(o._contentMetadata.streamType!=s.StreamType.UNKNOWN&&(o._contentMetadata.streamType==te.ContentMetadata.StreamType.LIVE?t[k.REQUEST_KEY_IS_LIVE]=!0:t[k.REQUEST_KEY_IS_LIVE]=!1),e.streamType==te.ContentMetadata.StreamType.LIVE?n[k.REQUEST_KEY_IS_LIVE]=!0:n[k.REQUEST_KEY_IS_LIVE]=!1,o._contentMetadata.streamType=e.streamType):o._logger.warning("mergeContentMetadata(): streamType was not changed.")),0<K.dictCount(e.custom)){var i,r={},a={};for(i in e.custom)o._contentMetadata.custom[i]!=e.custom[i]?(r[i]=e.custom[i],o._contentMetadata.custom[i]&&(a[i]=o._contentMetadata.custom[i]),o._contentMetadata.custom[i]=e.custom[i]):o._logger.info("mergeContentMetadata(): custom."+i+" was not changed.");0<K.dictCount(r)?(0<K.dictCount(a)&&(t[k.REQUEST_KEY_TAGS]=a),n[k.REQUEST_KEY_TAGS]=r):o._logger.warning("mergeContentMetadata(): custom was not changed.")}0<K.dictCount(n)&&o._cwsSession.declareStateChange(n,t)},this.isGlobalSession=function(){return o._global==L.SESSION_TYPE.GLOBAL},this.isVideoSession=function(){return o._global==L.SESSION_TYPE.VIDEO},this.isAdSession=function(){return o._global==L.SESSION_TYPE.AD},this.sessionTypeTag=function(){return o.isGlobalSession()?" (global session)":""}});x.DEFAULT_HEARTBEAT_ERROR_MESSAGE="received no response (or a bad response) to heartbeat POST request";var F=ee.SessionFactory=function(){var r=this;r._logger=null,r._logBuffer=null,r._nextSessionKey=0,r._sessionsByKey=null,function(e,t,n,i){r._client=e,r._clientSettings=t,r._clientConfig=n,r._systemFactory=i,r._logger=r._systemFactory.buildLogger(),r._logger.setModuleName("SessionFactory"),r._nextSessionKey=0,r._sessionsByKey={}}.apply(r,arguments),this.cleanup=function(){for(var e in r._logger=null,r._logBuffer=null,r._sessionsByKey)r._sessionsByKey[e].cleanup();r._sessionsByKey=null,r._nextSessionKey=0},this.newSessionKey=function(){var e=r._nextSessionKey;return r._nextSessionKey++,e},this.makeVideoSession=function(e,t){return null==e&&(e=new s),r.makeSession(e,t)},this.makeGlobalSession=function(e){return r.makeSession(e,L.SESSION_TYPE.GLOBAL)},this.generateSessionId=function(){return G.integer32()},this.makeSession=function(e,t){var n=e.clone(),e=r.generateSessionId(),t=r._systemFactory.buildSession(r._client,r._clientSettings,r._clientConfig,e,t,n),n=r.newSessionKey();return r.addSession(n,t),t.start(),n},this.getSession=function(e){e=r._sessionsByKey[e];return null==e&&r._logger.error("Client: invalid sessionKey. Did you cleanup that session previously?"),e},this.getVideoSession=function(e){e=this.getSession(e);return null!=e&&(e.isVideoSession()||e.isAdSession()||(r._logger.error("Client: invalid sessionKey. Did you cleanup that session previously?"),e=null)),e},this.addSession=function(e,t){r._sessionsByKey[e]=t},this.removeSession=function(e){delete r._sessionsByKey[e]},this.cleanupSession=function(e){var t=r.getSession(e);r.removeSession(e),t.cleanup()}},V=ee.CallbackWithTimeout=function(e){this._timer=e,this.getWrapperCallback=function(n,e,t){var i=!1;return this._timer.createOnce(function(){i||n(!(i=!0),t+" ("+e+" ms)")},e,"CallbackWithTimeout.wrap"),function(e,t){i||(i=!0,n(e,t))}}},B=ee.Config=function(e,t,n){var i=this;this._logger=e,this._logger.setModuleName("Config"),this._storage=t,this._jsonInterface=n,this._defaultConfig={clientId:k.DEFAULT_CLIENT_ID,sendLogs:!1,maxHbInfos:k.DEFAULT_MAX_HEARTBEAT_INFOS},this._config=K.ObjectShallowCopy(this._defaultConfig),this._loaded=!1,this._loadedEmpty=!1,this._waitingConsumers=[],this.isReady=function(){return this._loaded},this.load=function(){this._storage.load(B.STORAGE_KEY,function(e,t){e?(i._parse(t),i._logger.debug("load(): configuration successfully loaded from local storage"+(i._loadedEmpty?" (was empty)":"")+".")):i._logger.error("load(): error loading configuration from local storage: "+t),i._loaded=!0,i._notify()})},this._parse=function(e){e=this._jsonInterface.decode(e);null!=e?null!=(e=e[B.CONFIG_STORAGE_KEY_CLIENT_ID])&&e!=k.DEFAULT_CLIENT_ID&&""!=e&&"null"!=e&&(this._config[B.CONFIG_KEY_CLIENT_ID]=e,this._logger.debug("parse(): loaded clientId="+e+" (from local storage)")):this._loadedEmpty=!0},this._marshall=function(){var e={};return e[B.CONFIG_STORAGE_KEY_CLIENT_ID]=this._config.clientId,this._logger.debug("_marshall(): saving clientId="+this._config.clientId+" (to local storage)"),this._jsonInterface.encode(e)},this.save=function(){this._storage.save(B.STORAGE_KEY,this._marshall(),function(e,t){e?i._logger.debug("save(): configuration successfully saved to local storage."):i._logger.error("save(): error saving configuration to local storage: "+t)})},this.register=function(e){return this.isReady()?void e():void this._waitingConsumers.push(e)},this.get=function(e){return this._loaded?this._config[e]:null},this.set=function(e,t){this._loaded&&(this._config[e]=t)},this._notify=function(){for(var e;null!=(e=this._waitingConsumers.shift());)e()}};B.STORAGE_KEY="sdkConfig",B.CONFIG_STORAGE_KEY_CLIENT_ID="clId",B.CONFIG_KEY_CLIENT_ID="clientId",B.CONFIG_KEY_SEND_LOGS="sendLogs",B.CONFIG_KEY_MAX_HEARTBEAT_INFOS="maxHbInfos";var U=ee.EventQueue=function(){this._events=[],this._nextEventNumber=0,this.enqueue=function(e){this._events.push(e)},this.getNumber=function(){var e=this._nextEventNumber;return this._nextEventNumber++,e},this.flush=function(){var e=this._events;return this._events=[],e}},j=ee.ExceptionCatcher=function(e,t,n){this._logger=e,this._logger.setModuleName("ExceptionCatcher"),this._ping=t,this._systemSettings=n,this.runProtected=function(e,t,n){try{t()}catch(t){if(null!=n)n(t);else{if(this._systemSettings.allowUncaughtExceptions)throw t;this.onUncaughtException(e,t)}}},this.onUncaughtException=function(e,t){t="Uncaught exception: "+e+": "+t.toString();if(null!=this._ping)try{this._ping.send(t)}catch(e){this._logger.error("Caught exception while sending ping: "+e.toString())}this._logger.error(t)}},H=ee.GatewayControl=function(e,t,n,i){var r=this;this._clientSettings=e,this._logger=t,this._logger.setModuleName("GatewayControl"),this._httpClient=n,this._jsonInterface=i,this.send=function(e,i){var t=this._jsonInterface.encode(e),e=this._clientSettings.gatewayUrl+k.gatewayPath;this._httpClient.request("POST",e,t,"application/json",function(e,t){var n;e?(n=r._jsonInterface.decode(t),i(e,n)):i(e,t)})}},K=ee.Lang={};K.isMeaningfulString=function(e){return K.isValidString(e)&&null!=e&&"undefined"!=e&&"null"!=e},K.sanitizeStringToStringObject=function(e){var t,n,i={};for(t in e)K.isMeaningfulString(t)&&(n=e[t],K.isMeaningfulString(n)&&(i[t]=n));return i},K.validateInterface=function(e,t,n){if(null==e)throw new Error("Expected "+n+" implementation is null.");for(var i in t)if("function"!=typeof e[i])throw new Error("Expected method "+i+" in "+n+" implementation.")},K.dictCount=function(e){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n},K.ToString=function(e){return""+e},K.NumberToInt=function(e){return Math.floor(e)},K.NumberToUnsignedInt=function(e){return Math.abs(K.NumberToInt(e))},K.AsBoolean=function(e){return Boolean(e)},K.isValidString=function(e){return"string"==typeof e&&""!==e},K.stringStartsWith=function(e,t){return"string"==typeof e&&"string"==typeof t&&"function"==typeof e.indexOf&&0===e.indexOf(t)},K.isBoolean=function(e){return"boolean"==typeof e},K.UrlEncodeString=function(e){return escape(e)},K.isObject=function(e){return"object"==typeof e},K.ObjectToString=function(e){var t,n="";for(t in e)n+=t+"="+e[t];return"Object{"+n+"}"},K.ObjectShallowCopyOmitNull=function(e){var t,n=K.ObjectShallowCopy(e);for(t in n)null==n[t]&&delete n[t];return n},K.ObjectShallowCopy=function(e){var t,n={};for(t in e)n[t]=e[t];return n},K.ObjectShallowEquals=function(e,t){if(typeof e!=typeof t)return!1;if(e instanceof Object&&t instanceof Object){if(K.dictCount(e)!==K.dictCount(t))return!1;for(var n in e)if(e[n]!==t[n])return!1;return!0}return e===t},K.isInteger=function(e){return"number"==typeof e&&Math.round(e)===e},K.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},K.ArrayEquals=function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!=t.length)return!1;for(var n=0;n<e.length;++n)if(K.isArray(e[n])&&K.isArray(t[n])){if(!K.ArrayEquals(e[n],t[n]))return!1}else if(e[n]!==t[n])return!1;return!0},K.isObjectDefinePropertyPresent=function(){return void 0!==Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}()},K.defGet=function(e,t,n){if(K.isObjectDefinePropertyPresent())Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:n});else{if(void 0===e.__defineGetter__)throw new Error("JavaScript runtime must support either Object.defineProperty or __defineGetter__");e.__defineGetter__(t,n)}},K.defSet=function(e,t,n){if(K.isObjectDefinePropertyPresent())Object.defineProperty(e,t,{configurable:!0,set:n});else{if(void 0===e.__defineSetter__)throw new Error("JavaScript runtime must support either Object.defineProperty or __defineSetter__");e.__defineSetter__(t,n)}},function(){var t={two32:4294967296};t.MaxValue=t.two32-1,t.MinValue=0,K.UInt32=t,K.UInt32.Cast=function(e){e=parseInt(e,10);return e>t.MaxValue?e%=t.two32:e<t.MinValue&&(e=-e%t.two32,e=t.two32-e),e},K.UInt32.InRange=function(e){e=parseInt(e,10);return e<=t.MaxValue&&e>=t.MinValue};var n={MaxValue:2147483647,MinValue:-2147483648};K.Int32=n,K.Int32.Cast=function(e){e=parseInt(e,10);return n.MaxValue<e?e%=n.MaxValue:e<n.MinValue&&(e=n.MaxValue-(e=-e%n.MaxValue)),e},K.Int32.InRange=function(e){e=parseInt(e,10);return e<=n.MaxValue&&n.MinValue<=e}}();var Y=ee.LogBuffer=function(){this._buffer=[],this.add=function(e){32<=this._buffer.length&&this._buffer.shift(),this._buffer.push(e)},this.flush=function(){var e=this._buffer;return this._buffer=[],e}},q=ee.Ping=function(e,t,n){this._isSendingPing=!1,this._cachedBasePingUrl=null,this._logger=e,this._logger.setModuleName("Ping"),this._httpClient=t,this._clientSettings=n,this.send=function(e){this._isSendingPing||(this._isSendingPing=!0,e=this.getBasePingUrl()+"&d="+K.UrlEncodeString(e.toString()),this._logger.error("send(): "+e),this._httpClient.request("GET",e,null,null,null),this._isSendingPing=!1)},this.getBasePingUrl=function(){if(!this._cachedBasePingUrl){var e=q.SERVICE_URL+"?comp="+q.COMPONENT_NAME+"&clv="+h.version;if(this._clientSettings&&(e+="&cid="+this._clientSettings.customerKey),e+="&sch="+k.SDK_METADATA_SCHEMA,!this._clientSettings)return e;this._cachedBasePingUrl=e}return this._cachedBasePingUrl}};q.COMPONENT_NAME="sdkjs",q.SERVICE_URL="https://pings.conviva.com/ping.ping";var G=ee.Random={};G.maxUInt32=4294967295,G.maxInt32=2147483647,G.minInt32=-2147483648,G.integer32=function(){return Math.floor(Math.random()*G.maxUInt32)+G.minInt32},G.uinteger32=function(){return Math.floor(Math.random()*G.maxUInt32)};var W=ee.Sanitize={};W.Integer=function(e,t,n,i){if(isNaN(e))return i;if("number"!=typeof e)return i;if(e==i)return i;e=K.NumberToInt(e);return W.EnforceBoundaries(e,t,n)},W.EnforceBoundaries=function(e,t,n){return null!=n&&n<e?e=n:null!=t&&e<t&&(e=t),e},W.sanitizeSpecialIntegerValue=function(e){return-1==e||-2==e?e:W.Integer(e,0,null,-1)};var Q=(ee.StreamerError=function(){var n=this;n.errorCode=null,n.severity=h.ErrorSeverity.FATAL,function(e,t){n.errorCode=e,n.severity=t}.apply(n,arguments)},ee.HttpClient=function(e,t,n,i){this._logger=e,this._logger.setModuleName("HttpClient"),this._httpInterface=t,this._callbackWithTimeout=n,this._systemSettings=i,this.request=function(e,t,n,i,r){var a=1e3*this._systemSettings.httpTimeout,r=this._callbackWithTimeout.getWrapperCallback(r,a,"HTTP timeout");this._logger.debug("request(): calling HttpInterface.makeRequest"),this._httpInterface.makeRequest(e,t,n,i,a,r)}}),z=ee.Logger=function(e,t,n,i,r){this._loggingInterface=e,this._timeInterface=t,this._settings=n,this._logBuffer=i,this._packageName=r,this.debug=function(e){this.log(e,a.LogLevel.DEBUG)},this.info=function(e){this.log(e,a.LogLevel.INFO)},this.warning=function(e){this.log(e,a.LogLevel.WARNING)},this.error=function(e){this.log(e,a.LogLevel.ERROR)},this.log=function(e,t){e=this.formatMessage(e,t);this._logBuffer.add(e),this._settings.logLevel<=t&&this._loggingInterface.consoleLog(e,t)},this.prependModuleName=function(e){return"["+this._moduleName+"] "+e},this.prependPackageName=function(e){return"["+this._packageName+"] "+e},this.prependConvivaNamespace=function(e){return"[Conviva] "+e},this.prependTime=function(e){return"["+(this._timeInterface.getEpochTimeMs()/1e3).toFixed(3).toString()+"] "+e},this.prependLogLevel=function(e,t){return"["+z.getLogLevelString(t)+"] "+e},this.prependSessionId=function(e){return e=null!=this._sessionId?"sid="+this._sessionId+" "+e:e},this.setSessionId=function(e){this._sessionId=e},this.setModuleName=function(e){this._moduleName=e},this.formatMessage=function(e,t){return this.prependConvivaNamespace(this.prependTime(this.prependLogLevel(this.prependPackageName(this.prependModuleName(this.prependSessionId(e))),t)))}};z.getLogLevelString=function(e){var t;switch(e){case a.LogLevel.ERROR:t="ERROR";break;case a.LogLevel.WARNING:t="WARNING";break;case a.LogLevel.INFO:t="INFO";break;case a.LogLevel.DEBUG:t="DEBUG"}return t};var X=ee.Storage=function(e,t,n,i){this._logger=e,this._logger.setModuleName("Storage"),this._storageInterface=t,this._callbackWithTimeout=n,this._systemSettings=i,this.load=function(e,t){t=this._callbackWithTimeout.getWrapperCallback(t,1e3*this._systemSettings.storageTimeout,"storage load timeout");this._logger.debug("load(): calling StorageInterface.loadData"),this._storageInterface.loadData(X.STORAGE_SPACE,e,t)},this.save=function(e,t,n){n=this._callbackWithTimeout.getWrapperCallback(n,1e3*this._systemSettings.storageTimeout,"storage save timeout");this._logger.debug("save(): calling StorageInterface.saveData"),this._storageInterface.saveData(X.STORAGE_SPACE,e,t,n)}};X.STORAGE_SPACE="Conviva";var J=ee.SystemMetadata=function(e,t,n){this._logger=e,this._logger.setModuleName("SystemMetadata"),this._metadataInterface=t,this._exceptionCatcher=n,this._cachedMetadata=null,this.get=function(){return this._cachedMetadata||this.retrieve(),this._cachedMetadata},this.retrieve=function(){var e={};e[J.BROWSER_NAME]=this._metadataInterface.getBrowserName,e[J.BROWSER_VERSION]=this._metadataInterface.getBrowserVersion,e[J.DEVICE_BRAND]=this._metadataInterface.getDeviceBrand,e[J.DEVICE_MANUFACTURER]=this._metadataInterface.getDeviceManufacturer,e[J.DEVICE_MODEL]=this._metadataInterface.getDeviceModel,e[J.DEVICE_TYPE]=this._metadataInterface.getDeviceType,e[J.DEVICE_VERSION]=this._metadataInterface.getDeviceVersion,e[J.FRAMEWORK_NAME]=this._metadataInterface.getFrameworkName,e[J.FRAMEWORK_VERSION]=this._metadataInterface.getFrameworkVersion,e[J.OPERATING_SYSTEM_NAME]=this._metadataInterface.getOperatingSystemName,e[J.OPERATING_SYSTEM_VERSION]=this._metadataInterface.getOperatingSystemVersion,e[J.DEVICE_CATEGORY]=this._metadataInterface.getDeviceCategory;var t,i=this;for(t in this._logger.debug("retrieve(): calling MetadataInterface methods"),e)(function(t,n){i._exceptionCatcher.runProtected("Session.getSystemMetadataSchema(): "+t,function(){var e=n[t];n[t]=e.call(i._metadataInterface)})})(t,e),K.isValidString(e[t])||delete e[t];var n=!1;if(void 0!==e[J.DEVICE_TYPE]){for(var r in te.Client.DeviceType)if(e[J.DEVICE_TYPE]===te.Client.DeviceType[r]){n=!0;break}n||delete e[J.DEVICE_TYPE]}if(n=!1,void 0!==e[J.DEVICE_CATEGORY]){for(var a in te.Client.DeviceCategory)if(e[J.DEVICE_CATEGORY]===te.Client.DeviceCategory[a]){n=!0;break}n||delete e[J.DEVICE_CATEGORY]}this._cachedMetadata=K.ObjectShallowCopyOmitNull(e)}};J.BROWSER_NAME="browserName",J.BROWSER_VERSION="browserVersion",J.DEVICE_BRAND="deviceBrand",J.DEVICE_MANUFACTURER="deviceManufacturer",J.DEVICE_MODEL="deviceModel",J.DEVICE_TYPE="deviceType",J.DEVICE_VERSION="deviceVersion",J.FRAMEWORK_NAME="frameworkName",J.FRAMEWORK_VERSION="frameworkVersion",J.OPERATING_SYSTEM_NAME="operatingSystemName",J.OPERATING_SYSTEM_VERSION="operatingSystemVersion",J.DEVICE_CATEGORY="deviceCategory";var Z=ee.Time=function(e,t){this._timeInterface=e,this._logger=t,this._logger.setModuleName("Time"),this.current=function(){var e=this._timeInterface.getEpochTimeMs();return K.isInteger(e)||this._logger.error("current(): TimeInterface.getEpochTimeMs() did not return an integer ("+e+")"),e}},$=ee.Timer=function(e,t,n){var r=this;this._logger=e,this._logger.setModuleName("Timer"),this._timerInterface=t,this._exceptionCatcher=n,this.create=function(e,t,n){return this.createTimer(function(){r._exceptionCatcher.runProtected(n,function(){e()})},t,n)},this.createOnce=function(e,t,n){var i={cancel:null},t=this.createTimer(function(){r._exceptionCatcher.runProtected(n,function(){i&&"function"==typeof i.cancel&&(i.cancel(),i.cancel=null,i=null),e()})},t,n);return i.cancel=t},this.createTimer=function(e,t,n){return this._logger.debug("createTimer(): calling TimerInterface.create"),this._timerInterface.createTimer(e,t,n)}}}()}(),te})?o.call(r,a,r,i):o)&&(i.exports=o),void 0===e||void 0===e.Conviva&&(e.ConvivaLoading||(e.ConvivaLoading=!0,e.Conviva=t(),delete e.ConvivaLoading));var n={Html5Time:function(){(function(){}).apply(this,arguments),this.getEpochTimeMs=function(){return(new Date).getTime()},this.release=function(){}},Html5Http:function(){(function(){}).apply(this,arguments),this.makeRequest=function(e,t,n,i,r,a){return this.makeRequestStandard.apply(this,arguments)},this.makeRequestStandard=function(e,t,n,i,r,a){var o=new XMLHttpRequest;return o.open(e,t,!0),i&&o.overrideMimeType&&(o.overrideMimeType=i),i&&o.setRequestHeader&&o.setRequestHeader("Content-Type",i),0<r&&(o.timeout=r,o.ontimeout=function(){o.ontimeout=o.onreadystatechange=null,a&&a(!1,"timeout after "+r+" ms")}),o.onreadystatechange=function(){4===o.readyState&&(o.ontimeout=o.onreadystatechange=null,200==o.status?a&&a(!0,o.responseText):a&&a(!1,"http status "+o.status))},o.send(n),null},this.release=function(){}},Html5Timer:function(){(function(){}).apply(this,arguments),this.createTimer=function(e,t,n){var i=setInterval(e,t);return function(){-1!==i&&(clearInterval(i),i=-1)}},this.release=function(){}},Html5Storage:function(){(function(){}).apply(this,arguments),this.saveData=function(e,t,n,i){t=e+"."+t;try{localStorage.setItem(t,n),i(!0,null)}catch(e){i(!1,e.toString())}},this.loadData=function(e,t,n){t=e+"."+t;try{n(!0,localStorage.getItem(t))}catch(e){n(!1,e.toString())}},this.release=function(){}},Html5Metadata:function(){(function(){}).apply(this,arguments),this.getBrowserName=function(){return null},this.getBrowserVersion=function(){return null},this.getDeviceBrand=function(){return null},this.getDeviceManufacturer=function(){return null},this.getDeviceModel=function(){return null},this.getDeviceType=function(){return Conviva.Client.DeviceType.DESKTOP},this.getDeviceVersion=function(){return null},this.getFrameworkName=function(){return"HTML5"},this.getFrameworkVersion=function(){return null},this.getOperatingSystemName=function(){return null},this.getOperatingSystemVersion=function(){return null},this.getDeviceCategory=function(){return Conviva.Client.DeviceCategory.WEB},this.release=function(){}},Html5Logging:function(){(function(){}).apply(this,arguments),this.consoleLog=function(e,t){"undefined"!=typeof console&&(console.log&&t===Conviva.SystemSettings.LogLevel.DEBUG||t===Conviva.SystemSettings.LogLevel.INFO?console.log(e):console.warn&&t===Conviva.SystemSettings.LogLevel.WARNING?console.warn(e):console.error&&t===Conviva.SystemSettings.LogLevel.ERROR&&console.error(e))},this.release=function(){}},Html5PlayerInterface:function(e,t){var a=this;a._timeupdate=0,a._lastTimeupdate=0,a._currentTimeIsInvalid=!1,a._width=-1,a._height=-1,this._timerInterface=new n.Html5Timer,this._loggingInterface=new n.Html5Logging,this._addEventListener=function(e,t,n){void 0===n&&(n=a._videoElement),a._eventListeners.push([e,t,n]),window.addEventListener?n.addEventListener(e,t,!1):n.attachEvent("on"+e,t)},this._removeEventListener=function(e,t,n){void 0===n&&(n=a._videoElement),window.removeEventListener?n.removeEventListener(e,t,!1):n.detachEvent("on"+e,t)},this._registerVideoEventListeners=function(){a._addEventListener("ended",function(){a._receivedHtml5Event("ended")}),a._addEventListener("pause",function(){a._receivedHtml5Event("pause")}),a._addEventListener("playing",function(){0!=a._videoElement.currentTime?a._videoElement.seeking||a._receivedHtml5Event("playing"):a._currentTimeIsInvalid=!0}),a._addEventListener("waiting",function(){a._receivedHtml5Event("waiting")}),a._addEventListener("timeupdate",function(){a._currentTimeIsInvalid&&(a._timeupdate++,a._playerStateManager.getPlayerState()===Conviva.PlayerStateManager.PlayerState.PLAYING||a._videoElement.seeking||a._receivedHtml5Event("playing"))}),a._addEventListener("error",function(){var e;a._videoElement.error&&(e=a._videoElement.error.code,a._reportHtml5Error(e))}),a._addEventListener("loadedmetadata",a._loadedMetadata),a._addEventListener("seeking",function(){a.isSeekStarted||(a.isSeekStarted=!0,a._playerStateManager.setPlayerSeekStart(-1)),a._currentTimeIsInvalid&&a._playerStateManager.getPlayerState()!==Conviva.PlayerStateManager.PlayerState.BUFFERING&&a._receivedHtml5Event("waiting")}),a._addEventListener("seeked",function(){a.isSeekStarted=!1,a._playerStateManager.setPlayerSeekEnd()}),a._monitorErrorsFromSourceElements()},this.getPHT=function(){return 1e3*a._videoElement.currentTime},this.getBufferLength=function(){if(a._videoElement){var e=a._videoElement.buffered;if(void 0!==e){for(var t=0,n=0;n<e.length;n++){var i=e.start(n),r=e.end(n);i<=a._videoElement.currentTime&&a._videoElement.currentTime<r&&(t+=r-a._videoElement.currentTime)}return a._currentBufferLength=t,1e3*a._currentBufferLength}}},this.getSignalStrength=function(){return Conviva.PlayerStateManager.DEFAULT_SIGNAL_STRENGTH},this.getRenderedFrameRate=function(){return Conviva.PlayerStateManager.DEFAULT_RENDERED_FRAME_RATE},this._monitorErrorsFromSourceElements=function(){if(void 0!==a._videoElement.children){function e(){a._log("Caught non-specific error from <source> element, reporting as ERR_UNKNOWN"),a._reportHtml5Error(0)}a._videoElement._sources=a._videoElement.children;for(var t=0;t<a._videoElement._sources.length;t++){var n=a._videoElement._sources[t];"SOURCE"==n.tagName&&a._addEventListener("error",e,n)}}},this._removeVideoEventHandlers=function(){for(var e=0;e<a._eventListeners.length;e++){var t=a._eventListeners[e];a._removeEventListener(t[0],t[1],t[2])}a._eventListeners=[]},this._findCurrentState=function(){a._prevReadyState=a._videoElement.readyState,0===a._videoElement.readyState||a._videoElement.ended?a._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.STOPPED):(a._videoElement.paused||a._videoElement.seeking)&&a._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.PAUSED),a._videoElement.readyState>=a._videoElement.HAVE_METADATA&&a._loadedMetadata()},this._receivedHtml5Event=function(e){e=a._convertHtml5EventToConvivaPlayerState(e);a._updateConvivaPlayerState(e)},this._updateConvivaPlayerState=function(e){a._playerStateManager.getPlayerState()!==e&&(a._playerStateManager.setPlayerState(e),a._playerStateRecentlyChanged=!0)},this._convertHtml5EventToConvivaPlayerState=function(e){switch(e){case"playing":return Conviva.PlayerStateManager.PlayerState.PLAYING;case"waiting":return Conviva.PlayerStateManager.PlayerState.BUFFERING;case"ended":case"stopped":return Conviva.PlayerStateManager.PlayerState.STOPPED;case"pause":return Conviva.PlayerStateManager.PlayerState.PAUSED;default:return Conviva.PlayerStateManager.PlayerState.UNKNOWN}},this._reportHtml5Error=function(e){var t;switch(e){case 1:t="MEDIA_ERR_ABORTED";break;case 2:t="MEDIA_ERR_NETWORK";break;case 3:t="MEDIA_ERR_DECODE";break;case 4:t="MEDIA_ERR_SRC_NOT_SUPPORTED";break;default:t="MEDIA_ERR_UNKNOWN"}a._log("Reporting error: code="+e+" message="+t);e=Conviva.Client.ErrorSeverity.FATAL;a._playerStateManager.sendError(t,e)},this._loadedMetadata=function(){var e=a._videoElement.duration;isNaN(e)||e==1/0||a._playerStateManager.setDuration(e);e=a._videoElement.videoWidth;!isNaN(e)&&0<=e&&a._playerStateManager.setVideoResolutionWidth(e);e=a._videoElement.videoHeight;!isNaN(e)&&0<=e&&a._playerStateManager.setVideoResolutionHeight(e),a._playerStateManager.setConnectionType("Wi-fi"),a._playerStateManager.setLinkEncryption("YES")},this._startPolling=function(){this._previousPosition=0,this._currentPosition=0,this._currentBufferLength=0,this._pollingTimerCancel=this._timerInterface.createTimer(this._poll,500,"Html5PlayerInterface._poll()")},this._poll=function(){a._pollStreamerResolution(),a._inferPlayerStateFromPosition()},this._pollStreamerResolution=function(){var e=a._videoElement.videoWidth;!isNaN(e)&&0<=e&&e!=a._width&&(a._playerStateManager.setVideoResolutionWidth(e),a._width=e);e=a._videoElement.videoHeight;!isNaN(e)&&0<=e&&e!=a._height&&(a._playerStateManager.setVideoResolutionHeight(e),a._height=e)},this._inferPlayerStateFromPosition=function(){var e,t;a._previousPosition=a._currentPosition,a._currentPosition=a._videoElement.currentTime,a._positionDelta=Math.abs(a._previousPosition-a._currentPosition),1<a._positionDelta||(a._playerStateRecentlyChanged?a._playerStateRecentlyChanged=!1:(e=0!==a._positionDelta,t=a._playerStateManager.getPlayerState(),e&&t!==Conviva.PlayerStateManager.PlayerState.PLAYING?a._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.PLAYING):e||t!==Conviva.PlayerStateManager.PlayerState.PLAYING||(a._videoElement.paused?t!=Conviva.PlayerStateManager.PlayerState.PAUSED&&a._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.PAUSED):a._videoElement.seeking||a._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.BUFFERING)),a._currentTimeIsInvalid&&(a._videoElement.paused?(t!=Conviva.PlayerStateManager.PlayerState.PAUSED&&a._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.PAUSED),a._timeupdate=a._lastTimeupdate):a._videoElement.seeking||(1<a._timeupdate&&a._timeupdate==a._lastTimeupdate&&a._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.BUFFERING),a._lastTimeupdate=a._timeupdate))))},this._stopPolling=function(){this._pollingTimerCancel()},this._log=function(e){this._loggingInterface.consoleLog("[Html5PlayerInterface] "+e,Conviva.SystemSettings.LogLevel.ERROR)},function(e,t){if(!e)throw new Error("Html5PlayerInterface: playerStateManager argument cannot be null.");if(!t)throw new Error("Html5PlayerInterface: videoElement argument cannot be null.");this._playerStateManager=e,this._videoElement=t,this._eventListeners=[],this._registerVideoEventListeners(),this._startPolling(),this._findCurrentState(),this._playerStateManager.setClientMeasureInterface(this)}.apply(this,arguments),this.cleanup=function(){this._stopPolling(),this._removeVideoEventHandlers(),this._videoElement=null,this._playerStateManager=null}}};i.exports=n}.call(window)},function(e,t){e.exports=function(e,t,n,i,r){var a,o,s=document.createElement("script"),l=[];t={adData:{ids:t,duration:n,url:r},dispatchEvent:function(e){this.sendEvent?(l&&(l.push(e),e=l,l=!1),this.sendEvent(e)):l.push(e)}},n="_moatApi"+Math.floor(1e8*Math.random());try{o=(a=e.ownerDocument).defaultView||a.parentWindow}catch(e){a=document,o=window}return o[n]=t,s.type="text/javascript",e&&e.insertBefore(s,e.childNodes[0]||null),s.src="https://z.moatads.com/"+i+"/moatvideo.js#"+n,t}},function(e,t){e.exports=function(e){return window.document[e]||(-1!=navigator.appName.indexOf("Microsoft Internet")?document.getElementById(e):document.embeds&&document.embeds[e]?document.embeds[e]:void 0)}},function(e,t){function i(e){if(e){var t,n,i,r=[],a=0,o="";for(l in e)"string"!=(t=typeof e[l])&&"number"!=t||(r[r[u]]=l+"="+d(e[l]),"c2"==l?o=e[l]:"c1"==l&&(a=1));if(!(r[u]<=0||""==o)){if((i=e.options||{}).d=i.d||document,"string"==typeof i.url_append)for(var s,l=0,c=(n=i.url_append.replace(/&amp;/,"&").split("&"))[u];l<c;l++)2==(s=n[l].split("="))[u]&&(r[r[u]]=s[0]+"="+d(s[1]));!function(e,t){var n,i,r,a,o="comScore=",s=document,l=s.cookie,c="",u="indexOf",d="substring",h="length",p=window,_=p.encodeURIComponent||escape;if(l[u](o)+1)for(r=0,a=(i=l.split(";"))[h];r<a;r++)(n=i[r][u](o))+1&&(c="&"+unescape(i[r][d](n+o[h])));2048<(e+="&ns__t="+ +new Date+"&ns_c="+(s.characterSet||s.defaultCharset||"")+"&c8="+_(s.title)+c+"&c7="+_(s.URL)+"&c9="+_(s.referrer))[h]&&0<e[u]("&")&&(l=e[d](0,2040).lastIndexOf("&"),e=(e[d](0,l)+"&ns_cut="+_(e[d](l+1)))[d](0,2048)),s.images?(n=new Image,p.ns_p||(ns_p=n),n.onload=n.onerror=t,n.src=e):s.write("<","p","><",'img src="',e,'" height="1" width="1" alt="*"',"><","/p",">")}(["http","s"==i.d.URL.charAt(4)?"s://sb":"://b",h,"/b?",a?"":"c1=2&",r.join("&").replace(/&$/,"")].join(""),function(){p(this,i)})}}}function n(e){for(var t=0,n=(e=e||_comscore)[u];t<n;t++)i(e[t]);_comscore=[]}var u,r,d,h,a,o,p;"undefined"==typeof _comscore&&(_comscore=[]),u="length",r=self,d=r.encodeURIComponent?encodeURIComponent:escape,h=".scorecardresearch.com",a=Math,o=/c2=(\d*)&/,p=function(e,t){var n,i;e.src.indexOf("c1=2")<0||!t.d.createElement||!(t.force_script_extension||2==e.width&&e.height>a.round(100*a.random()))||(n=t.d.createElement("script"),i=t.d.getElementsByTagName("script")[0],e=[t.script_extension_url||"//app.scorecardresearch.com/s2e/invite","?","c2=",e.src.match(o)[1]].join(""),i&&(n.src=e,n.async=!0,i.parentNode.insertBefore(n,i)))},n(),(r=r.COMSCORE)?(r.purge=n,r.beacon=i):COMSCORE={purge:n,beacon:i};var ae=ae||{};ae.StreamSense=ae.StreamSense||function(){function z(e){Z=e}function X(e){}var J,Z=function(e,t){};z(function(e,t){(new Image).src=e,t&&setTimeout(t,0)});function $(){var i,n,r=this,t=null,a=0,o=0,s=0,l=0,c=0,u=0,d=!1;te.extend(this,{reset:function(e){null!=e&&0<e.length?te.filterMap(n,e):n={},r.setPlaylistId(+new Date+"_"+u),r.setBufferingTime(0),r.setPlaybackTime(0),r.setPauses(0),r.setStarts(0),r.setRebufferCount(0),d=!1},setLabels:function(e,t){null!=e&&te.extend(n,e),r.setRegisters(n,t)},getLabels:function(){return n},setLabel:function(e,t){var n={};n[e]=t,r.setLabels(n,null)},getLabel:function(e){return n[e]},getClip:function(){return t},getPlaylistId:function(){return i},setPlaylistId:function(e){i=e},setRegisters:function(e,t){var n=e.ns_st_sp;null!=n&&(a=Number(n),delete e.ns_st_sp),null!=(n=e.ns_st_bc)&&(s=Number(n),delete e.ns_st_bc),null!=(n=e.ns_st_bp)&&(l=Number(n),delete e.ns_st_bp),null!=(n=e.ns_st_id)&&(i=n,delete e.ns_st_id),t!=ie.BUFFERING&&null!=(n=e.ns_st_pa)&&(c=Number(n),delete e.ns_st_pa),t!=ie.PAUSED&&t!=ie.IDLE&&null!=t||null!=(n=e.ns_st_pp)&&(o=Number(n),delete e.ns_st_pp)},createLabels:function(e,t){t=t||{};return t.ns_st_bp=String(r.getBufferingTime()),t.ns_st_sp=String(a),t.ns_st_id=String(i),0<s&&(t.ns_st_bc=String(s)),e!=ne.PAUSE&&e!=ne.END&&e!=ne.KEEP_ALIVE&&e!=ne.HEART_BEAT&&null!=e||(t.ns_st_pa=String(r.getPlaybackTime()),t.ns_st_pp=String(o)),e!=ne.PLAY&&null!=e||r.didFirstPlayOccurred()||(t.ns_st_pb="1",r.setFirstPlayOccurred(!0)),te.extend(t,r.getLabels()),t},incrementStarts:function(){a++},incrementPauses:function(){o++,t.incrementPauses()},setPlaylistCounter:function(e){u=e},incrementPlaylistCounter:function(){u++},addPlaybackTime:function(e){0<=t.getPlaybackTimestamp()&&(e=e-t.getPlaybackTimestamp(),t.setPlaybackTimestamp(-1),t.setPlaybackTime(t.getPlaybackTime()+e),r.setPlaybackTime(r.getPlaybackTime()+e))},addBufferingTime:function(e){0<=t.getBufferingTimestamp()&&(e=e-t.getBufferingTimestamp(),t.setBufferingTimestamp(-1),t.setBufferingTime(t.getBufferingTime()+e),r.setBufferingTime(r.getBufferingTime()+e))},getBufferingTime:function(){var e=l;return 0<=t.getBufferingTimestamp()&&(e+=+new Date-t.getBufferingTimestamp()),e},setBufferingTime:function(e){l=e},getPlaybackTime:function(){var e=c;return 0<=t.getPlaybackTimestamp()&&(e+=+new Date-t.getPlaybackTimestamp()),e},setPlaybackTime:function(e){c=e},getStarts:function(){return a},setStarts:function(e){a=e},getPauses:function(){return o},setPauses:function(e){o=e},getRebufferCount:function(){return s},incrementRebufferCount:function(){s++},setRebufferCount:function(e){s=e},didFirstPlayOccurred:function(){return d},setFirstPlayOccurred:function(e){d=e}}),t=new h,n={},r.reset()}var i,n,r,t,a,e,o,ee="undefined"!=typeof window&&"undefined"!=typeof document?(J=window,document):(J={},{location:{href:""},title:"",URL:"",referrer:"",cookie:""}),te=o={uid:function(){return+new Date+"_"+e++},filter:function(e,t){var n,i={};for(n in t)t.hasOwnProperty(n)&&e(t[n])&&(i[n]=t[n]);return i},extend:function(e){var t,n=arguments.length;e=e||{};for(var i=1;i<n;i++)if(t=arguments[i])for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},getString:function(e,t){var n=String(e);return null==e?t||"na":n},getLong:function(e,t){var n=Number(e);return null==e||isNaN(n)?t||0:n},getInteger:function(e,t){var n=Number(e);return null==e||isNaN(n)?t||0:n},getBoolean:function(e,t){var n="true"==String(e).toLowerCase();return null==e?t||!1:n},isNotEmpty:function(e){return null!=e&&0<e.length},indexOf:function(n,e){var i=-1;return o.forEach(e,function(e,t){e==n&&(i=t)}),i},forEach:function(e,t,n){try{if("function"==typeof t)if(n=void 0!==n?n:null,"number"!=typeof e.length||void 0===e[0]){var i=void 0!==e.__proto__;for(r in e)i&&void 0!==e.__proto__[r]||"function"==typeof e[r]||t.call(n,e[r],r)}else for(var r=0,a=e.length;r<a;r++)t.call(n,e[r],r)}catch(e){}},regionMatches:function(e,t,n,i,r){if(t<0||i<0||t+r>e.length||i+r>n.length)return!1;for(;0<=--r;)if(e.charAt(t++)!=n.charAt(i++))return!1;return!0},size:function(e){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n},log:function(e,t){void 0!==t&&t&&(t=(t=new Date).getHours()+":"+t.getMinutes()+":"+t.getSeconds(),console.log(t,e))},isTrue:function(e){return void 0!==e&&("string"==typeof e?"true"===(e=e.toLowerCase())||"1"===e||"on"===e:!!e)},toString:function(e){if(void 0===e)return"undefined";if("string"==typeof e)return e;if("[object Array]"===Object.prototype.toString.call(e))return e.join(",");if(0<o.size(e)){var t,n="";for(t in e)e.hasOwnProperty(t)&&(n+=t+":"+e[t]+";");return n}return e.toString()},exists:function(e){return void 0!==e&&null!=e},firstGreaterThan0:function(){for(var e=0,t=arguments.length;e<t;e++){var n=arguments[e];if(0<n)return n}return 0},cloneObject:function(e){if(null==e||"object"!=typeof e)return e;var t,n=e.constructor();for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n},filterMap:function(e,t){for(var n in e)-1==o.indexOf(n,t)&&delete e[n]},getKeys:function(e,t){var n,i=[];for(n in e)t&&!t.test(n)||!e.hasOwnProperty(n)||(i[i.length]=n);return i},getBrowserName:function(){var e,t,n=navigator.userAgent,i=navigator.appName;return-1!=n.indexOf("Opera")?i="Opera":-1!=n.indexOf("MSIE")?i="Microsoft Internet Explorer":-1!=n.indexOf("Android")?i="Android":-1!=n.indexOf("Chrome")?i="Chrome":-1!=n.indexOf("Safari")?i="Safari":-1!=n.indexOf("Firefox")?i="Firefox":-1!=n.indexOf("Windows NT")?i="Microsoft Internet Explorer":(e=n.lastIndexOf(" ")+1)<(t=n.lastIndexOf("/"))&&(i=n.substring(e,t)).toLowerCase()==i.toUpperCase()&&(i=navigator.appName),i},getBrowserFullVersion:function(){var e,t,n=navigator.userAgent,i=""+parseFloat(navigator.appVersion);parseInt(navigator.appVersion,10);return-1!=(e=n.indexOf("Opera"))?(i=n.substring(e+6),-1!=(e=n.indexOf("Version"))&&(i=n.substring(e+8))):-1!=(e=n.indexOf("MSIE"))?i=n.substring(e+5):-1!=(e=n.indexOf("Android"))?i=n.substring(e+8):-1!=(e=n.indexOf("Chrome"))?i=n.substring(e+7):-1!=(e=n.indexOf("Safari"))?(i=n.substring(e+7),-1!=(e=n.indexOf("Version"))&&(i=n.substring(e+8))):-1!=(e=n.indexOf("Firefox"))?i=n.substring(e+8):-1!=(e=n.indexOf("Windows NT"))?(e=n.indexOf("rv:"),i=n.substring(e+3)):n.lastIndexOf(" ")+1<(e=n.lastIndexOf("/"))&&(i=n.substring(e+1)),-1!=(e=(i=-1!=(e=(i=-1!=(e=i.indexOf(";"))?i.substring(0,e):i).indexOf(" "))?i.substring(0,e):i).indexOf(")"))&&(i=i.substring(0,e)),t=parseInt(""+i,10),i=isNaN(t)?""+parseFloat(navigator.appVersion):i}},ne=(a=["play","pause","end","buffer","keep-alive","hb","custom","ad_play","ad_pause","ad_end","ad_click"],{PLAY:0,PAUSE:e=1,END:2,BUFFER:3,KEEP_ALIVE:4,HEART_BEAT:5,CUSTOM:6,AD_PLAY:7,AD_PAUSE:8,AD_END:9,AD_CLICK:10,toString:function(e){return a[e]}}),ie=(t=[ne.END,ne.PLAY,ne.PAUSE,ne.BUFFER],{IDLE:0,PLAYING:1,PAUSED:2,BUFFERING:3,toEventType:function(e){return t[e]}}),s={ADPLAY:ne.AD_PLAY,ADPAUSE:ne.AD_PAUSE,ADEND:ne.AD_END,ADCLICK:ne.AD_CLICK},re={STREAMSENSE_VERSION:"4.1408.29",DEFAULT_PLAYERNAME:"streamsense",DEFAULT_HEARTBEAT_INTERVAL:[{playingtime:6e4,interval:1e4},{playingtime:null,interval:6e4}],DEFAULT_KEEP_ALIVE_INTERVAL:12e5,DEFAULT_PAUSED_ON_BUFFERING_INTERVAL:500,C1_VALUE:"19",C10_VALUE:"js",NS_AP_C12M_VALUE:"1",NS_NC_VALUE:"1",PAGE_NAME_LABEL:"name",LABELS_ORDER:["c1","c2","ns_site","ns_vsite","ns_ap_an","ns_ap_pn","ns_ap_pv","c12","name","ns_ak","ns_ap_ec","ns_ap_ev","ns_ap_device","ns_ap_id","ns_ap_csf","ns_ap_bi","ns_ap_pfm","ns_ap_pfv","ns_ap_ver","ns_ap_sv","ns_type","ns_radio","ns_nc","ns_ap_ui","ns_ap_gs","ns_st_sv","ns_st_pv","ns_st_it","ns_st_id","ns_st_ec","ns_st_sp","ns_st_sq","ns_st_cn","ns_st_ev","ns_st_po","ns_st_cl","ns_st_el","ns_st_pb","ns_st_hc","ns_st_mp","ns_st_mv","ns_st_pn","ns_st_tp","ns_st_pt","ns_st_pa","ns_st_ad","ns_st_li","ns_st_ci","ns_ap_jb","ns_ap_res","ns_ap_c12m","ns_ap_install","ns_ap_updated","ns_ap_lastrun","ns_ap_cs","ns_ap_runs","ns_ap_usage","ns_ap_fg","ns_ap_ft","ns_ap_dft","ns_ap_bt","ns_ap_dbt","ns_ap_dit","ns_ap_as","ns_ap_das","ns_ap_it","ns_ap_uc","ns_ap_aus","ns_ap_daus","ns_ap_us","ns_ap_dus","ns_ap_ut","ns_ap_oc","ns_ap_uxc","ns_ap_uxs","ns_ap_lang","ns_ap_miss","ns_ts","ns_st_ca","ns_st_cp","ns_st_er","ns_st_pe","ns_st_ui","ns_st_bc","ns_st_bt","ns_st_bp","ns_st_pc","ns_st_pp","ns_st_br","ns_st_ub","ns_st_vo","ns_st_ws","ns_st_pl","ns_st_pr","ns_st_ep","ns_st_ty","ns_st_cs","ns_st_ge","ns_st_st","ns_st_dt","ns_st_ct","ns_st_de","ns_st_pu","ns_st_cu","ns_st_fee","c3","c4","c5","c6","c10","c11","c12","c13","c14","c15","c16","c7","c8","c9"]},h=function(){function i(e,t){t=t[e];null!=t&&(n[e]=t)}var t,n,r=this,a=0,o=0,s=0,l=0,c=0,u=0;te.extend(this,{reset:function(e){null!=e&&0<e.length?te.filterMap(n,e):n={},n.hasOwnProperty("ns_st_cl")||(n.ns_st_cl="0"),n.hasOwnProperty("ns_st_pn")||(n.ns_st_pn="1"),n.hasOwnProperty("ns_st_tp")||(n.ns_st_tp="1"),r.setPauses(0),r.setStarts(0),r.setBufferingTime(0),r.setBufferingTimestamp(-1),r.setPlaybackTime(0),r.setPlaybackTimestamp(-1)},setLabels:function(e,t){null!=e&&te.extend(n,e),r.setRegisters(n,t)},getLabels:function(){return n},setLabel:function(e,t){var n={};n[e]=t,r.setLabels(n,null)},getLabel:function(e){return n[e]},getClipId:function(){return void 0!==t&&null!=t||r.setClipId("1"),t},setClipId:function(e){t=e},setRegisters:function(e,t){var n=e.ns_st_cn;null!=n&&(r.setClipId(n),delete e.ns_st_cn),null!=(n=e.ns_st_bt)&&(s=Number(n),delete e.ns_st_bt),i("ns_st_cl",e),i("ns_st_pn",e),i("ns_st_tp",e),i("ns_st_ub",e),i("ns_st_br",e),t!=ie.PLAYING&&null!=t||null!=(n=e.ns_st_sq)&&(o=Number(n),delete e.ns_st_sq),t!=ie.BUFFERING&&null!=(n=e.ns_st_pt)&&(c=Number(n),delete e.ns_st_pt),t!=ie.PAUSED&&t!=ie.IDLE&&null!=t||null!=(n=e.ns_st_pc)&&(a=Number(n),delete e.ns_st_pc)},createLabels:function(e,t){t=t||{};return t.ns_st_cn=r.getClipId(),t.ns_st_bt=String(r.getBufferingTime()),e!=ne.PLAY&&null!=e||(t.ns_st_sq=String(o)),e!=ne.PAUSE&&e!=ne.END&&e!=ne.KEEP_ALIVE&&e!=ne.HEART_BEAT&&null!=e||(t.ns_st_pt=String(r.getPlaybackTime()),t.ns_st_pc=String(a)),te.extend(t,r.getLabels()),t},incrementPauses:function(){a++},incrementStarts:function(){o++},getBufferingTime:function(){var e=s;return 0<=l&&(e+=+new Date-l),e},setBufferingTime:function(e){s=e},getPlaybackTime:function(){var e=c;return 0<=u&&(e+=+new Date-u),e},setPlaybackTime:function(e){c=e},getPlaybackTimestamp:function(){return u},setPlaybackTimestamp:function(e){u=e},getBufferingTimestamp:function(){return l},setBufferingTimestamp:function(e){l=e},getPauses:function(){return a},setPauses:function(e){a=e},getStarts:function(){return o},setStarts:function(e){o=e}}),n={},r.reset()},p=(i={},r=n=-1,te.extend(l,{activeIndex:r,newInstance:d,new:d,destroyInstance:_,destroy:_,newPlaylist:function(e){return e=e||{},c().setPlaylist(e),c().getPlaylist()},newClip:function(e,t,n){return e=e||{},"number"==typeof t&&(e.ns_st_cn=t),c().setClip(e,n),c().getClip()},notify:function(e,t,n){return void 0!==e&&(n=n||null,t=t||{},c().notify(e,t,n))},setLabels:function(e){void 0!==e&&c().setLabels(e)},getLabels:function(){return c().getLabels()},setPlaylistLabels:function(e){void 0!==e&&c().getPlaylist().setLabels(e)},getPlaylistLabels:function(){return c().getPlaylist().getLabels()},setClipLabels:function(e){void 0!==e&&c().getClip().setLabels(e)},getClipLabels:function(){return c().getClip().getLabels()},resetInstance:function(e){return c().reset(e||{})},resetPlaylist:function(e){return c().getPlaylist().reset(e||{})},resetClip:function(e){return c().getClip().reset(e||{})},viewEvent:function(e){return e=e||{},c().viewNotify(null,e)},customEvent:function(e,t){return 2<arguments.length&&(e=arguments[1],t=arguments[2]),e=e||{},"number"==typeof t&&(e.ns_st_po=t),c().customNotify(e,t)},exportState:function(){return c().exportState()},importState:function(e){c().importState(e)}}),l);function l(e,t){function n(e){var t=0;if(null!=H)for(var n=0;n<H.length;n++){var i=H[n],r=i.playingtime;if(!r||e<r){t=i.interval;break}}return t}function h(){r();var e=n(B.getClip().getPlaybackTime());0<e&&(u=setTimeout(i,0<q?q:e)),q=0}function p(){r();var e=n(B.getClip().getPlaybackTime());q=e-B.getClip().getPlaybackTime()%e,null!=u&&r()}function _(){G=q=0}function i(){G++,b(w(ne.HEART_BEAT,null)),q=0,h()}function r(){null!=u&&(clearTimeout(u),u=null)}function f(){g(),c=setTimeout(a,K)}function a(){b(w(ne.KEEP_ALIVE,null)),V++,f()}function g(){null!=c&&(clearTimeout(c),c=null)}function v(){k==ie.PLAYING&&(B.incrementRebufferCount(),B.incrementPauses(),b(w(ne.PAUSE,null)),V++,k=ie.PAUSED)}function m(){null!=P&&(clearTimeout(P),P=null)}function o(e){return e==ie.PLAYING||e==ie.PAUSED}function y(){C&&(clearTimeout(C),C=null)}function S(e,t,n){if(y(),n)C=setTimeout((u=e,d=t,function(){S(u,d)}),n);else if(null!=e&&I!=e){var i=I,r=x,a=A(t),o=0<=r?a-r:0;c=I,n=A(t),c==ie.PLAYING?(B.addPlaybackTime(n),p(),g()):c==ie.BUFFERING?(B.addBufferingTime(n),m()):c==ie.IDLE&&(c=te.getKeys(B.getClip().getLabels()),B.getClip().reset(c)),a=e,n=A(r=t),c=-1,c=c=(r=r).hasOwnProperty("ns_st_po")?te.getInteger(r.ns_st_po):c,F=c,a==ie.PLAYING?(h(),f(),B.getClip().setPlaybackTimestamp(n),T(a)&&(B.getClip().incrementStarts(),B.getStarts()<1&&B.setStarts(1))):a==ie.PAUSED?T(a)&&B.incrementPauses():a==ie.BUFFERING?(B.getClip().setBufferingTimestamp(n),j&&(m(),R.isPauseOnBufferingEnabled()&&T(ie.PAUSED)&&(P=setTimeout(v,Y)))):a==ie.IDLE&&_(),I=e,x=+new Date;for(var s=0,l=O.length;s<l;s++)O[s](i,e,t,o);E(t),B.setRegisters(t,e),B.getClip().setRegisters(t,e);a=w(ie.toEventType(e),t);te.extend(a,t),T(I)&&(b(a),k=I,V++)}var c,u,d}function E(e){var t=e.ns_st_mp;null!=t&&(d=t,delete e.ns_st_mp),null!=(t=e.ns_st_mv)&&(M=t,delete e.ns_st_mv),null!=(t=e.ns_st_ec)&&(V=Number(t),delete e.ns_st_ec)}function b(e,t){(t=void 0===t?!0:t)&&(i=e,D=w(null),te.extend(D,i));var n,i,r=R.getPixelURL();l?(n=l.getAppContext(),t=l.getSalt(),i=l.getPixelURL(),null!=n&&null!=t&&0!=t.length&&null!=i&&0!=i.length&&(t=Q.am,i=Q.et,i=t.newApplicationMeasurement(l,i.HIDDEN,e,r),l.getQueue().offer(i))):r&&Z(function(e,t){for(var n=J.encodeURIComponent||escape,i=[],r=re.LABELS_ORDER,a=e.split("?"),e=a[0],o=a[1].split("&"),s=0,l=o.length;s<l;s++){var c=o[s].split("="),u=unescape(c[0]),c=unescape(c[1]);u&&(t[u]=c)}for(var d={},s=0,l=r.length;s<l;s++){var h=r[s];t.hasOwnProperty(h)&&(d[h]=!0,i.push(n(h)+"="+n(t[h])))}for(h in t)d[h]||t.hasOwnProperty(h)&&i.push(n(h)+"="+n(t[h]));return 2048<(e=(e=e+"?"+i.join("&"))+(e.indexOf("&c8=")<0?"&c8="+n(ee.title):"")+(e.indexOf("&c7=")<0?"&c7="+n(ee.URL):"")+(e.indexOf("&c9=")<0?"&c9="+n(ee.referrer):"")).length&&0<e.indexOf("&")&&(last=e.substr(0,2040).lastIndexOf("&"),e=(e.substring(0,last)+"&ns_cut="+n(e.substring(last+1))).substr(0,2048)),e}(r,e))}function T(e){return(e!=ie.PAUSED&&e!=ie.IDLE||k!=ie.IDLE&&null!=k)&&e!=ie.BUFFERING&&k!=e}function A(e){var t=-1;return t=e.hasOwnProperty("ns_ts")?Number(e.ns_ts):t}function w(e,t){var n,i,r=1==arguments.length?(n=ie.toEventType(I),e):(n=e,t),a={};return"undefined"!=typeof document&&(a.c7=(i=document).URL,a.c8=i.title,a.c9=i.referrer),null!=r&&te.extend(a,r),a.hasOwnProperty("ns_ts")||(a.ns_ts=String(+new Date)),null==n||a.hasOwnProperty("ns_st_ev")||(a.ns_st_ev=ne.toString(n)),R.isPersistentLabelsShared()&&l&&te.extend(a,l.getLabels()),te.extend(a,R.getLabels()),function(e,t){var n=t||{};{var i;n.ns_st_ec=String(V),n.hasOwnProperty("ns_st_po")||(i=F,t=A(n),(e==ne.PLAY||e==ne.KEEP_ALIVE||e==ne.HEART_BEAT||null==e&&I==ie.PLAYING)&&(i+=t-B.getClip().getPlaybackTimestamp()),n.ns_st_po=te.getInteger(i))}e==ne.HEART_BEAT&&(n.ns_st_hc=String(G))}(n,a),B.createLabels(n,a),B.getClip().createLabels(n,a),a.hasOwnProperty("ns_st_mp")||(a.ns_st_mp=d),a.hasOwnProperty("ns_st_mv")||(a.ns_st_mv=M),a.hasOwnProperty("ns_st_ub")||(a.ns_st_ub="0"),a.hasOwnProperty("ns_st_br")||(a.ns_st_br="0"),a.hasOwnProperty("ns_st_pn")||(a.ns_st_pn="1"),a.hasOwnProperty("ns_st_tp")||(a.ns_st_tp="1"),a.hasOwnProperty("ns_st_it")||(a.ns_st_it="c"),a.ns_st_sv=re.STREAMSENSE_VERSION,a.ns_type="hidden",a}var s,C,I,l,P,c,u,k,d,M,D,O,R=this,N=500,L=null,x=0,F=0,V=0,B=null,U=!0,j=!0,H=re.DEFAULT_HEARTBEAT_INTERVAL,K=re.DEFAULT_KEEP_ALIVE_INTERVAL,Y=re.DEFAULT_PAUSED_ON_BUFFERING_INTERVAL,q=0,G=0,W=!1,Q={};te.extend(this,{reset:function(e){B.reset(e),B.setPlaylistCounter(0),B.setPlaylistId(+new Date+"_1"),B.getClip().reset(e),null==e||e.isEmpty()?s={}:te.filterMap(s,e),V=1,G=0,p(),_(),g(),m(),y(),I=ie.IDLE,x=-1,k=null,d=re.DEFAULT_PLAYERNAME,M=re.STREAMSENSE_VERSION,D=null},setPauseOnBufferingInterval:function(e){Y=e},getPauseOnBufferingInterval:function(){return Y},setKeepAliveInterval:function(e){K=e},getKeepAliveInterval:function(){return K},setHeartbeatIntervals:function(e){H=e},notify:function(){var e,t,n=3==arguments.length?(t=arguments[1],arguments[2]):(t={},arguments[1]),i=(r=e=arguments[0])==ne.PLAY?ie.PLAYING:r==ne.PAUSE?ie.PAUSED:r==ne.BUFFER?ie.BUFFERING:r==ne.END?ie.IDLE:null,r=te.extend({},t);A(t=r)<0&&(t.ns_ts=String(+new Date)),r.hasOwnProperty("ns_st_po")||(r.ns_st_po=te.getInteger(n).toString()),e==ne.PLAY||e==ne.PAUSE||e==ne.BUFFER||e==ne.END?R.isPausePlaySwitchDelayEnabled()&&o(I)&&o(i)&&(I!=ie.PLAYING||i!=ie.PAUSED||C)?S(i,r,N):S(i,r):(e=w(e,r),te.extend(e,r),b(e,!1),V++)},getLabels:function(){return s},getState:function(){return I},setLabels:function(e){null!=e&&(null==s?s=e:te.extend(s,e))},getLabel:function(e){return s[e]},setLabel:function(e,t){null==t?delete s[e]:s[e]=t},setPixelURL:function(e){if(null==e||0==e.length)return null;var t=decodeURIComponent||unescape,n=e.indexOf("?");if(0<=n){if(n<e.length-1){for(var i=e.substring(n+1).split("&"),r=0,a=i.length;r<a;r++){var o=i[r].split("=");2==o.length?R.setLabel(o[0],t(o[1])):1==o.length&&R.setLabel(re.PAGE_NAME_LABEL,t(o[0]))}e=e.substring(0,n+1)}}else e+="?";return L=e},getPixelURL:function(){return L||("undefined"!=typeof ns_p&&"string"==typeof ns_p.src?L=ns_p.src.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):"string"==typeof ns_pixelUrl?L=ns_pixelUrl.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):null)},isPersistentLabelsShared:function(){return U},setPersistentLabelsShared:function(e){U=e},isPauseOnBufferingEnabled:function(){return j},setPauseOnBufferingEnabled:function(e){j=e},isPausePlaySwitchDelayEnabled:function(){return W},setPausePlaySwitchDelayEnabled:function(e){W=e},setPausePlaySwitchDelay:function(e){e&&0<e&&(N=e)},getPausePlaySwitchDelay:function(){return N},setClip:function(e,t){var n=!1;return I==ie.IDLE&&(B.getClip().reset(),B.getClip().setLabels(e,null),t&&B.incrementStarts(),n=!0),n},setPlaylist:function(e){var t=!1;return I==ie.IDLE&&(B.incrementPlaylistCounter(),B.reset(),B.getClip().reset(),B.setLabels(e,null),t=!0),t},importState:function(e){reset();e=te.extend({},e);B.setRegisters(e,null),B.getClip().setRegisters(e,null),E(e),V++},exportState:function(){return D},getVersion:function(){return re.STREAMSENSE_VERSION},addListener:function(e){O.push(e)},removeListener:function(e){O.splice(te.indexOf(e,O),1)},getClip:function(){return B.getClip()},getPlaylist:function(){return B},setHttpGet:z,setHttpPost:X}),te.extend(this,{adNotify:function(e,t,n){(t=t||{}).ns_st_ad=1,e>=ne.AD_PLAY&&e<=ne.AD_CLICK&&R.notify(e,t,n)},customNotify:function(e,t){R.notify(ne.CUSTOM,e,t)},viewNotify:function(e,t){(e=e||R.getPixelURL())&&function(e,t){var n=e||"",e=J.comScore||J.sitestat||function(e){var t,n,i,r,a="comScore=",o=ee.cookie,s="",l="indexOf",c="substring",u="length",d=J.encodeURIComponent||escape;if(o[l](a)+1)for(i=0,r=(n=o.split(";"))[u];i<r;i++)(t=n[i][l](a))+1&&(s="&"+unescape(n[i][c](t+a[u])));2048<(e+="&ns__t="+ +new Date+"&ns_c="+(ee.characterSet||ee.defaultCharset||"")+s)[u]&&0<e[l]("&")&&(o=e[c](0,2040).lastIndexOf("&"),e=(e[c](0,o)+"&ns_cut="+d(e[c](o+1)))[c](0,2048)),Z(e),"undefined"==typeof ns_p&&(ns_p={src:e}),ns_p.lastMeasurement=e};if(void 0!==t){var i,r=[],a=J.encodeURIComponent||escape;for(i in t)t.hasOwnProperty(i)&&r.push(a(i)+"="+a(t[i]));/[\?\&]$/.test(n)||(n+="&"),n+=r.join("&")}e(n)}(e,t)}}),ae.comScore&&(Q=ae.comScore.exports,l=Q.c()),s={},V=1,I=ie.IDLE,B=new $,G=0,_(),W=!(j=!(P=null)),k=C=c=u=null,F=0,O=[],R.reset(),e&&R.setLabels(e),t&&R.setPixelURL(t)}function c(e,t){return i[r]||d(e,t)}function u(){r=-1;for(var e=0;e<=n;e++)if(i.hasOwnProperty(e)){r=e;break}return ae.StreamSense.activeIndex=r}function d(e,t){return t=t||null,(e=e||null)&&"object"==typeof e&&(t=e,e=null),i[++n]=new ae.StreamSense(t,e),u(),i[n]}function _(){var e=!1,t=r;if("number"==typeof arguments[0]&&isFinite(arguments[0]))t=arguments[0];else if(arguments[0]instanceof ae.StreamSense)for(var n in i)if(i[n]===arguments[0]){t=n;break}return i.hasOwnProperty(t)&&(e=i[t],delete i[t],e.reset(),u()),e}return p.AdEvents=s,p.PlayerEvents=ne,ae.StreamingTag=ae.StreamingTag||function(e){function i(e){return te.exists(e)||(e={}),te.exists(e.ns_st_ci)||(e.ns_st_ci="0"),te.exists(e.c3)||(e.c3="*null"),te.exists(e.c4)||(e.c4="*null"),te.exists(e.c6)||(e.c6="*null"),e}function t(e){return 0<s&&s<=e?l+=e-s:l=0,l}function r(e){d.getState()!=ie.IDLE&&d.getState()!=ie.PAUSED?d.notify(ne.END,t(e)):d.getState()==ie.PAUSED&&d.notify(ne.END,l)}function a(e,t,n){if(te.exists(e)&&te.exists(t)&&te.exists(n)){t=t[e],e=n[e];return te.exists(t)&&te.exists(e)&&t===e}return!1}var n,o=0,s=0,l=0,c=null,u=!1,d=new p;te.extend(this,{playAdvertisement:function(){var e=+new Date;r(e),o++;var t=i(null);t.ns_st_cn=o,t.ns_st_pn="1",t.ns_st_ct="va",t.ns_st_tp="1",t.ns_st_ad="1",d.setClip(t),l=0,d.notify(ne.PLAY,l),s=e,u=!1},playContentPart:function(e){var t,n=+new Date;e=i(e),u&&(a("ns_st_ci",c,t=e)&&a("c3",c,t)&&a("c4",c,t)&&a("c6",c,t))?(d.getClip().setLabels(e),d.getState()!=ie.PLAYING&&(s=n,d.notify(ne.PLAY,l))):(e=e,r(n=n),o++,d.setClip({ns_st_cn:o,ns_st_pn:"1",ns_st_ct:"vc",ns_st_tp:"0"}),d.getClip().setLabels(e),c=e,s=n,l=0,d.notify(ne.PLAY,l)),u=!0},stop:function(){var e=+new Date;d.notify(ne.PAUSE,t(e))}}),te.exists(e)&&te.exists(e.customerC2)&&(n=e.secure?"https://sb":"http"+("s"==document.location.href.charAt(4)?"s://sb":"://b"),d.setPixelURL(n+".scorecardresearch.com/p?c1=2"),d.setLabel("c2",e.customerC2),d.setLabel("ns_st_it","r"))},p}(),e.exports=ae},function(i,e,t){!function(){"use strict";var a="undefined"!=typeof window&&void 0!==window.document?window.document:{},e=i.exports,r="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,o=function(){for(var e,t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n=0,i=t.length,r={};n<i;n++)if((e=t[n])&&e[1]in a){for(n=0;n<e.length;n++)r[t[0][n]]=e[n];return r}return!1}(),n={change:o.fullscreenchange,error:o.fullscreenerror},t={request:function(i){return new Promise(function(e){var t=o.requestFullscreen,n=function(){this.off("change",n),e()}.bind(this);i=i||a.documentElement,/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)?i[t]():i[t](r?Element.ALLOW_KEYBOARD_INPUT:{}),this.on("change",n)}.bind(this))},exit:function(){return new Promise(function(e){var t=function(){this.off("change",t),e()}.bind(this);a[o.exitFullscreen](),this.on("change",t)}.bind(this))},toggle:function(e){return this.isFullscreen?this.exit():this.request(e)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,t){e=n[e];e&&a.addEventListener(e,t,!1)},off:function(e,t){e=n[e];e&&a.removeEventListener(e,t,!1)},raw:o};o?(Object.defineProperties(t,{isFullscreen:{get:function(){return Boolean(a[o.fullscreenElement])}},element:{enumerable:!0,get:function(){return a[o.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(a[o.fullscreenEnabled])}}}),e?i.exports=t:window.screenfull=t):e?i.exports=!1:window.screenfull=!1}()},function(e,t,n){!function(Ee){function c(e){var p=this;p.version="2.17.0";var d=window;d.s_c_in||(d.s_c_il=[],d.s_c_in=0),p._il=d.s_c_il,p._in=d.s_c_in,p._il[p._in]=p,d.s_c_in++,p._c="s_c";var t,n,i,r,_=(_=d.AppMeasurement.ec)||null,u=d;try{for(t=u.parent,n=u.location;t&&t.location&&n&&""+t.location!=""+n&&u.location&&""+t.location!=""+u.location&&t.location.host==n.host;)t=(u=t).parent}catch(e){}p.C=function(e){try{console.log(e)}catch(e){}},p.Pa=function(e){return""+parseInt(e)==""+e},p.replace=function(e,t,n){return!e||e.indexOf(t)<0?e:e.split(t).join(n)},p.escape=function(e){var t,n;if(!e)return e;for(e=encodeURIComponent(e),t=0;t<7;t++)n="+~!*()'".substring(t,t+1),0<=e.indexOf(n)&&(e=p.replace(e,n,"%"+n.charCodeAt(0).toString(16).toUpperCase()));return e},p.unescape=function(e){if(!e)return e;e=0<=e.indexOf("+")?p.replace(e,"+"," "):e;try{return decodeURIComponent(e)}catch(e){}return unescape(e)},p.Kb=function(){var e,t=d.location.hostname,n=(n=p.fpCookieDomainPeriods)||p.cookieDomainPeriods;if(t&&!p.Ia&&!/^[0-9.]+$/.test(t)&&(n=2<(n=n?parseInt(n):2)?n:2,0<=(e=t.lastIndexOf(".")))){for(;0<=e&&1<n;)e=t.lastIndexOf(".",e-1),n--;p.Ia=0<e?t.substring(e):t}return p.Ia},p.c_r=p.cookieRead=function(e){e=p.escape(e);var t=" "+p.d.cookie,n=t.indexOf(" "+e+"="),i=n<0?n:t.indexOf(";",n);return"[[B]]"!=(e=n<0?"":p.unescape(t.substring(n+2+e.length,i<0?t.length:i)))?e:""},p.c_w=p.cookieWrite=function(e,t,n){var i,r=p.Kb(),a=p.cookieLifetime;return t=""+t,a=a?(""+a).toUpperCase():"",n&&"SESSION"!=a&&"NONE"!=a&&((i=""!=t?parseInt(a||0):-60)?(n=new Date).setTime(n.getTime()+1e3*i):1===n&&(i=(n=new Date).getYear(),n.setYear(i+2+(i<1900?1900:0)))),e&&"NONE"!=a?(p.d.cookie=p.escape(e)+"="+p.escape(""!=t?t:"[[B]]")+"; path=/;"+(n&&"SESSION"!=a?" expires="+n.toUTCString()+";":"")+(r?" domain="+r+";":""),p.cookieRead(e)==t):0},p.Hb=function(){var e=p.Util.getIeVersion();"number"==typeof e&&e<10&&(p.unsupportedBrowser=!0,p.ub(p,function(){}))},p.ub=function(e,t){for(var n in e)e.hasOwnProperty(n)&&"function"==typeof e[n]&&(e[n]=t)},p.K=[],p.ea=function(e,t,n){if(p.Ja)return 0;p.maxDelay||(p.maxDelay=250);var i=0,r=(new Date).getTime()+p.maxDelay,a=p.d.visibilityState,o=["webkitvisibilitychange","visibilitychange"];if((a=a||p.d.webkitVisibilityState)&&"prerender"==a){if(!p.fa)for(p.fa=1,n=0;n<o.length;n++)p.d.addEventListener(o[n],function(){"visible"==(p.d.visibilityState||p.d.webkitVisibilityState)&&(p.fa=0,p.delayReady())});i=1,r=0}else n||p.u("_d")&&(i=1);return i&&(p.K.push({m:e,a:t,t:r}),p.fa||setTimeout(p.delayReady,p.maxDelay)),i},p.delayReady=function(){var e,t=(new Date).getTime(),n=0;for(p.u("_d")?n=1:p.ya();0<p.K.length;){if(e=p.K.shift(),n&&!e.t&&e.t>t){p.K.unshift(e),setTimeout(p.delayReady,parseInt(p.maxDelay/2));break}p.Ja=1,p[e.m].apply(p,e.a),p.Ja=0}},p.setAccount=p.sa=function(e){var t,n;if(!p.ea("setAccount",arguments))if(p.account=e,p.allAccounts)for(t=p.allAccounts.concat(e.split(",")),p.allAccounts=[],t.sort(),n=0;n<t.length;n++)0!=n&&t[n-1]==t[n]||p.allAccounts.push(t[n]);else p.allAccounts=e.split(",")},p.foreachVar=function(e,t){var n,i,r,a="",o=i="";for(p.lightProfileID?(n=p.O,(a=p.lightTrackVars)&&(a=","+a+","+p.ka.join(",")+",")):(n=p.g,(p.pe||p.linkType)&&(a=p.linkTrackVars,i=p.linkTrackEvents,p.pe&&(o=p.pe.substring(0,1).toUpperCase()+p.pe.substring(1),p[o]&&(a=p[o].ac,i=p[o].$b))),a=a&&","+a+","+p.F.join(",")+",",i&&a&&(a+=",events,")),t=t&&","+t+",",i=0;i<n.length;i++)o=n[i],(r=p[o])&&(!a||0<=a.indexOf(","+o+","))&&(!t||0<=t.indexOf(","+o+","))&&e(o,r)},p.o=function(e,t,n,i,r){var a,o,s,l,c="",u=0;if("contextData"==e&&(e="c"),t){for(a in t)if(!(Object.prototype[a]||r&&a.substring(0,r.length)!=r)&&t[a]&&(!n||0<=n.indexOf(","+(i?i+".":"")+a+","))){if(s=!1,u)for(o=0;o<u.length;o++)if(a.substring(0,u[o].length)==u[o]){s=!0;break}if(!s&&(""==c&&(c+="&"+e+"."),o=t[a],0<(a=r?a.substring(r.length):a).length))if(0<(s=a.indexOf(".")))s=(r||"")+(o=a.substring(0,s))+".",(u=u||[]).push(s),c+=p.o(o,t,n,i,s);else if(o="boolean"==typeof o?o?"true":"false":o){if("retrieveLightData"==i&&r.indexOf(".contextData.")<0)switch(s=a.substring(0,4),l=a.substring(4),a){case"transactionID":a="xact";break;case"channel":a="ch";break;case"campaign":a="v0";break;default:p.Pa(l)&&("prop"==s?a="c"+l:"eVar"==s?a="v"+l:"list"==s?a="l"+l:"hier"==s&&(a="h"+l,o=o.substring(0,255)))}c+="&"+p.escape(a)+"="+p.escape(o)}}""!=c&&(c+="&."+e)}return c},p.usePostbacks=0,p.Nb=function(){var e,t,n,i,r,a,o,s,l="",c="",u="",d=i="",h=p.T();if(p.lightProfileID?(e=p.O,(c=p.lightTrackVars)&&(c=","+c+","+p.ka.join(",")+",")):(e=p.g,(p.pe||p.linkType)&&(c=p.linkTrackVars,u=p.linkTrackEvents,p.pe&&(i=p.pe.substring(0,1).toUpperCase()+p.pe.substring(1),p[i]&&(c=p[i].ac,u=p[i].$b))),c=c&&","+c+","+p.F.join(",")+",",u&&(u=","+u+",",c&&(c+=",events,")),p.events2&&(d+=(""!=d?",":"")+p.events2)),h&&h.getCustomerIDs){if(i=_,r=h.getCustomerIDs())for(t in r)Object.prototype[t]||"object"==typeof(n=r[t])&&(i=i||{},n.id&&(i[t+".id"]=n.id),n.authState&&(i[t+".as"]=n.authState));i&&(l+=p.o("cid",i))}for(p.AudienceManagement&&p.AudienceManagement.isReady()&&(l+=p.o("d",p.AudienceManagement.getEventCallConfigParams())),t=0;t<e.length;t++){if(i=e[t],r=p[i],n=i.substring(0,4),a=i.substring(4),r||("events"==i&&d?(r=d,d=""):"marketingCloudOrgID"==i&&h&&p.V("ECID")&&(r=h.marketingCloudOrgID)),r&&(!c||0<=c.indexOf(","+i+","))){switch(i){case"customerPerspective":i="cp";break;case"marketingCloudOrgID":i="mcorgid";break;case"supplementalDataID":i="sdid";break;case"timestamp":i="ts";break;case"dynamicVariablePrefix":i="D";break;case"visitorID":i="vid";break;case"marketingCloudVisitorID":i="mid";break;case"analyticsVisitorID":i="aid";break;case"audienceManagerLocationHint":i="aamlh";break;case"audienceManagerBlob":i="aamb";break;case"authState":i="as";break;case"pageURL":i="g",255<r.length&&(p.pageURLRest=r.substring(255),r=r.substring(0,255));break;case"pageURLRest":i="-g";break;case"referrer":i="r";break;case"vmk":case"visitorMigrationKey":i="vmt";break;case"visitorMigrationServer":i="vmf",p.ssl&&p.visitorMigrationServerSecure&&(r="");break;case"visitorMigrationServerSecure":i="vmf",!p.ssl&&p.visitorMigrationServer&&(r="");break;case"charSet":i="ce";break;case"visitorNamespace":i="ns";break;case"cookieDomainPeriods":i="cdp";break;case"cookieLifetime":i="cl";break;case"variableProvider":i="vvp";break;case"currencyCode":i="cc";break;case"channel":i="ch";break;case"transactionID":i="xact";break;case"campaign":i="v0";break;case"latitude":i="lat";break;case"longitude":i="lon";break;case"resolution":i="s";break;case"colorDepth":i="c";break;case"javascriptVersion":i="j";break;case"javaEnabled":i="v";break;case"cookiesEnabled":i="k";break;case"browserWidth":i="bw";break;case"browserHeight":i="bh";break;case"connectionType":i="ct";break;case"homepage":i="hp";break;case"events":if(d&&(r+=(""!=r?",":"")+d),u)for(a=r.split(","),r="",n=0;n<a.length;n++)0<=(s=(o=0<=(s=(o=a[n]).indexOf("="))?o.substring(0,s):o).indexOf(":"))&&(o=o.substring(0,s)),0<=u.indexOf(","+o+",")&&(r+=(r?",":"")+a[n]);break;case"events2":r="";break;case"contextData":l+=p.o("c",p[i],c,i),r="";break;case"lightProfileID":i="mtp";break;case"lightStoreForSeconds":i="mtss",p.lightProfileID||(r="");break;case"lightIncrementBy":i="mti",p.lightProfileID||(r="");break;case"retrieveLightProfiles":i="mtsr";break;case"deleteLightProfiles":i="mtsd";break;case"retrieveLightData":p.retrieveLightProfiles&&(l+=p.o("mts",p[i],c,i)),r="";break;default:p.Pa(a)&&("prop"==n?i="c"+a:"eVar"==n?i="v"+a:"list"==n?i="l"+a:"hier"==n&&(i="h"+a,r=r.substring(0,255)))}r&&(l+="&"+i+"="+("pev"!=i.substring(0,3)?p.escape(r):r))}"pev3"==i&&p.e&&(l+=p.e)}return p.ja&&(l+="&lrt="+p.ja,p.ja=null),l},p.B=function(e){var t=e.tagName;return"undefined"!=""+e.hc||"undefined"!=""+e.Wb&&"HTML"!=(""+e.Wb).toUpperCase()?"":((t="SHAPE"==(t=t&&t.toUpperCase?t.toUpperCase():"")?"":t)&&(("INPUT"==t||"BUTTON"==t)&&e.type&&e.type.toUpperCase?t=e.type.toUpperCase():!t&&e.href&&(t="A")),t)},p.La=function(e){var t=d.location,n=e.href||"",i=n.indexOf(":"),r=n.indexOf("?"),a=n.indexOf("/");return n&&(i<0||0<=r&&r<i||0<=a&&a<i)&&(r=e.protocol&&1<e.protocol.length?e.protocol:t.protocol||"",i=t.pathname.lastIndexOf("/"),n=(r?r+"//":"")+(e.host||t.host||"")+("/"!=n.substring(0,1)?t.pathname.substring(0,i<0?0:i)+"/":"")+n),n},p.L=function(e){var t,n,i=p.B(e),r="",a=0;return i&&(t=e.protocol,n=e.onclick,!e.href||"A"!=i&&"AREA"!=i||n&&t&&!(t.toLowerCase().indexOf("javascript")<0)?n?(r=p.replace(p.replace(p.replace(p.replace(""+n,"\r",""),"\n",""),"\t","")," ",""),a=2):"INPUT"==i||"SUBMIT"==i?(e.value?r=e.value:e.innerText?r=e.innerText:e.textContent&&(r=e.textContent),a=3):"IMAGE"==i&&e.src&&(r=e.src):r=p.La(e),r)?{id:r.substring(0,100),type:a}:0},p.fc=function(e){for(var t=p.B(e),n=p.L(e);e&&!n&&"BODY"!=t;)(e=e.parentElement||e.parentNode)&&(t=p.B(e),n=p.L(e));return e=(e=!n||"BODY"==t?0:e)&&(0<=(t=e.onclick?""+e.onclick:"").indexOf(".tl(")||0<=t.indexOf(".trackLink("))?0:e},p.Vb=function(){var e,t,n,i,r,a=p.linkObject,o=p.linkType,s=p.linkURL;if(p.la=1,a||(p.la=0,a=p.clickObject),a){for(e=p.B(a),t=p.L(a);a&&!t&&"BODY"!=e;)(a=a.parentElement||a.parentNode)&&(e=p.B(a),t=p.L(a));(a=!t||"BODY"==e?0:a)&&!p.linkObject&&(0<=(r=a.onclick?""+a.onclick:"").indexOf(".tl(")||0<=r.indexOf(".trackLink("))&&(a=0)}else p.la=1;if((s=!s&&a?p.La(a):s)&&!p.linkLeaveQueryString&&0<=(n=s.indexOf("?"))&&(s=s.substring(0,n)),!o&&s){var l,c=0,u=0;if(p.trackDownloadLinks&&p.linkDownloadFileTypes)for(n=(r=s.toLowerCase()).indexOf("?"),i=r.indexOf("#"),0<=(n=!(0<=n)||0<=i&&i<n?i:n)&&(r=r.substring(0,n)),n=p.linkDownloadFileTypes.toLowerCase().split(","),i=0;i<n.length;i++)(l=n[i])&&r.substring(r.length-(l.length+1))=="."+l&&(o="d");if(p.trackExternalLinks&&!o&&(r=s.toLowerCase(),p.Oa(r)&&(p.linkInternalFilters||(p.linkInternalFilters=d.location.hostname),n=0,p.linkExternalFilters?(n=p.linkExternalFilters.toLowerCase().split(","),c=1):p.linkInternalFilters&&(n=p.linkInternalFilters.toLowerCase().split(",")),n))){for(i=0;i<n.length;i++)l=n[i],0<=r.indexOf(l)&&(u=1);u?c&&(o="e"):c||(o="e")}}p.linkObject=a,p.linkURL=s,p.linkType=o,(p.trackClickMap||p.trackInlineStats)&&(p.e="",a&&(o=p.pageName,s=1,a=a.sourceIndex,o||(o=p.pageURL,s=0),d.s_objectID&&(t.id=d.s_objectID,a=t.type=1),o&&t&&t.id&&e&&(p.e="&pid="+p.escape(o.substring(0,255))+(s?"&pidt="+s:"")+"&oid="+p.escape(t.id.substring(0,100))+(t.type?"&oidt="+t.type:"")+"&ot="+e+(a?"&oi="+a:""))))},p.Ob=function(){var e=p.la,t=p.linkType,n=p.linkURL,i=p.linkName;if(t&&(n||i)&&("d"!=(t=t.toLowerCase())&&"e"!=t&&(t="o"),p.pe="lnk_"+t,p.pev1=n?p.escape(n):"",p.pev2=i?p.escape(i):"",e=1),p.abort&&(e=0),p.trackClickMap||p.trackInlineStats||p.Rb()){var r,a,o,t={},n=0,s=(l=p.pb())?l.split("&"):0,l=0;if(s)for(r=0;r<s.length;r++)a=s[r].split("="),i=p.unescape(a[0]).split(","),t[a=p.unescape(a[1])]=i;for(o in i=p.account.split(","),r={},p.contextData)o&&!Object.prototype[o]&&"a.activitymap."==o.substring(0,14)&&(r[o]=p.contextData[o],p.contextData[o]="");if(p.e=p.o("c",r)+(p.e||""),e||p.e){for(a in e&&!p.e&&(l=1),t)if(!Object.prototype[a])for(o=0;o<i.length;o++)for(l&&(s=t[a].join(","))==p.account&&(p.e+=("&"!=a.charAt(0)?"&":"")+a,t[a]=[],n=1),r=0;r<t[a].length;r++)(s=t[a][r])==i[o]&&(l&&(p.e+="&u="+p.escape(s)+("&"!=a.charAt(0)?"&":"")+a+"&u=0"),t[a].splice(r,1),n=1);if(n=!e?1:n){for(a in l="",r=2,!e&&p.e&&(l=p.escape(i.join(","))+"="+p.escape(p.e),r=1),t)!Object.prototype[a]&&0<r&&0<t[a].length&&(l+=(l?"&":"")+p.escape(t[a].join(","))+"="+p.escape(a),r--);p.wb(l)}}}return e},p.pb=function(){return p.useLinkTrackSessionStorage?p.Ca()?d.sessionStorage.getItem(p.P):void 0:p.cookieRead(p.P)},p.Ca=function(){return!!d.sessionStorage},p.wb=function(e){p.useLinkTrackSessionStorage?p.Ca()&&d.sessionStorage.setItem(p.P,e):p.cookieWrite(p.P,e)},p.Pb=function(){if(!p.Zb){var e,t,n,i,r=new Date,a=u.location,o=(t=e="","1.2"),s=p.cookieWrite("s_cc","true",0)?"Y":"N",l="",c="";if(r.setUTCDate&&(o="1.3",0..toPrecision&&(o="1.5",(r=[]).forEach))){o="1.6",t=0,e={};try{(t=new Iterator(e)).next&&(o="1.7",r.reduce&&(o="1.8").trim&&(o="1.8.1",Date.parse&&(o="1.8.2",Object.create&&(o="1.8.5"))))}catch(e){}}e=screen.width+"x"+screen.height,i=navigator.javaEnabled()?"Y":"N",t=screen.pixelDepth||screen.colorDepth,n=p.w.innerWidth||p.d.documentElement.offsetWidth,r=p.w.innerHeight||p.d.documentElement.offsetHeight;try{p.b.addBehavior("#default#homePage"),l=p.b.gc(a)?"Y":"N"}catch(e){}try{p.b.addBehavior("#default#clientCaps"),c=p.b.connectionType}catch(e){}p.resolution=e,p.colorDepth=t,p.javascriptVersion=o,p.javaEnabled=i,p.cookiesEnabled=s,p.browserWidth=n,p.browserHeight=r,p.connectionType=c,p.homepage=l,p.Zb=1}},p.Q={},p.loadModule=function(t,e){var n=p.Q[t];if(!n){n=d["AppMeasurement_Module_"+t]?new d["AppMeasurement_Module_"+t](p):{},(p.Q[t]=p[t]=n).ib=function(){return n.sb},n.xb=function(e){(n.sb=e)&&(p[t+"_onLoad"]=e,p.ea(t+"_onLoad",[p,n],1)||e(p,n))};try{Object.defineProperty?Object.defineProperty(n,"onLoad",{get:n.ib,set:n.xb}):n._olc=1}catch(t){n._olc=1}}e&&(p[t+"_onLoad"]=e,p.ea(t+"_onLoad",[p,n],1)||e(p,n))},p.u=function(e){var t,n;for(t in p.Q)if(!Object.prototype[t]&&(n=p.Q[t])&&(n._olc&&n.onLoad&&(n._olc=0,n.onLoad(p,n)),n[e]&&n[e]()))return 1;return 0},p.Rb=function(){return!(!p.ActivityMap||!p.ActivityMap._c)},p.Sb=function(){var e=Math.floor(1e13*Math.random()),t=p.visitorSampling,n=p.visitorSamplingGroup,i=(n="s_vsn_"+(p.visitorNamespace||p.account)+(n?"_"+n:""),p.cookieRead(n));if(t){if(t*=100,!(i=i&&parseInt(i))){if(!p.cookieWrite(n,e))return 0;i=e}if(t<i%1e4)return 0}return 1},p.S=function(e,t){for(var n,i,r,a,o,s={},l=0;l<2;l++)for(n=0<l?p.Ea:p.g,i=0;i<n.length;i++)if((a=e[r=n[i]])||e["!"+r]){if(a&&!t&&("contextData"==r||"retrieveLightData"==r)&&p[r])for(o in p[r])a[o]||(a[o]=p[r][o]);p[r]||(s["!"+r]=1),s[r]=p[r],p[r]=a}return s},p.cc=function(e){for(var t,n,i,r=0;r<2;r++)for(t=0<r?p.Ea:p.g,n=0;n<t.length;n++)e[i=t[n]]=p[i],e[i]||"prop"!==i.substring(0,4)&&"eVar"!==i.substring(0,4)&&"hier"!==i.substring(0,4)&&"list"!==i.substring(0,4)&&"channel"!==i&&"events"!==i&&"eventList"!==i&&"products"!==i&&"productList"!==i&&"purchaseID"!==i&&"transactionID"!==i&&"state"!==i&&"zip"!==i&&"campaign"!==i&&"events2"!==i&&"latitude"!==i&&"longitude"!==i&&"ms_a"!==i&&"contextData"!==i&&"supplementalDataID"!==i&&"tnt"!==i&&"timestamp"!==i&&"abort"!==i&&"useBeacon"!==i&&"linkObject"!==i&&"clickObject"!==i&&"linkType"!==i&&"linkName"!==i&&"linkURL"!==i&&"bodyClickTarget"!==i&&"bodyClickFunction"!==i||(e["!"+i]=1)},p.Jb=function(e){var t,n,i,r,a,o,s=0,l="",c="";if(e&&255<e.length&&0<(n=(t=""+e).indexOf("?"))&&(o=t.substring(n+1),"http://"==(r=(t=t.substring(i=0,n)).toLowerCase()).substring(0,7)?i+=7:"https://"==r.substring(0,8)&&(i+=8),0<(n=r.indexOf("/",i))&&(r=r.substring(i,n),a=t.substring(n),t=t.substring(0,n),0<=r.indexOf("google")?s=",q,ie,start,search_key,word,kw,cd,":0<=r.indexOf("yahoo.co")?s=",p,ei,":0<=r.indexOf("baidu.")&&(s=",wd,word,"),s&&o))){if((e=o.split("&"))&&1<e.length){for(i=0;i<e.length;i++)0<(n=(r=e[i]).indexOf("="))&&0<=s.indexOf(","+r.substring(0,n)+",")?l+=(l?"&":"")+r:c+=(c?"&":"")+r;l&&c?o=l+"&"+c:c=""}e=t+(0<(n=253-(o.length-c.length)-t.length)?a.substring(0,n):"")+"?"+o}return e},p.bb=function(e){var t=p.d.visibilityState,n=["webkitvisibilitychange","visibilitychange"];if((t=t||p.d.webkitVisibilityState)&&"prerender"==t){if(e)for(t=0;t<n.length;t++)p.d.addEventListener(n[t],function(){"visible"==(p.d.visibilityState||p.d.webkitVisibilityState)&&e()});return!1}return!0},p.ba=!1,p.H=!1,p.zb=function(){p.H=!0,p.p()},p.I=!1,p.Ab=function(e){p.marketingCloudVisitorID=e.MCMID,p.visitorOptedOut=e.MCOPTOUT,p.analyticsVisitorID=e.MCAID,p.audienceManagerLocationHint=e.MCAAMLH,p.audienceManagerBlob=e.MCAAMB,p.I=!1,p.p()},p.ab=function(e){return p.maxDelay||(p.maxDelay=250),!p.u("_d")||(e&&setTimeout(function(){e()},p.maxDelay),!1)},p.Z=!1,p.G=!1,p.ya=function(){p.G=!0,p.p()},p.isReadyToTrack=function(){var e=!0;return!(!p.mb()||!p.kb())&&(p.ob()||(e=!1),e=!p.rb()?!1:e)},p.mb=function(){return p.ba||p.H||(p.bb(p.zb)?p.H=!0:p.ba=!0),!(p.ba&&!p.H)},p.kb=function(){var e=p.va();if(e){if(!p.ra&&!p.aa)return e.fetchPermissions(p.tb,!0),!(p.aa=!0);if(!p.ra)return!1;if(!e.isApproved(e.Categories.ANALYTICS))return!1}return!0},p.V=function(e){var t=p.va();return!(t&&!t.isApproved(t.Categories[e]))},p.va=function(){return d.adobe&&d.adobe.optIn?d.adobe.optIn:null},p.Y=!0,p.ob=function(){var e=p.T();return!e||!e.getVisitorValues||(p.Y&&(p.Y=!1,p.I||(p.I=!0,e.getVisitorValues(p.Ab))),!p.I)},p.T=function(){var e=p.visitor;return e=e&&!e.isAllowed()?null:e},p.rb=function(){return p.Z||p.G||(p.ab(p.ya)?p.G=!0:p.Z=!0),!(p.Z&&!p.G)},p.aa=!1,p.tb=function(){p.aa=!1,p.ra=!0},p.j=_,p.q=0,p.callbackWhenReadyToTrack=function(e,t,n){var i;(i={}).Eb=e,i.Db=t,i.Bb=n,p.j==_&&(p.j=[]),p.j.push(i),0==p.q&&(p.q=setInterval(p.p,100))},p.p=function(){var e;if(p.isReadyToTrack()&&(p.yb(),p.j!=_))for(;0<p.j.length;)(e=p.j.shift()).Db.apply(e.Eb,e.Bb)},p.yb=function(){p.q&&(clearInterval(p.q),p.q=0)},p.ta=function(e){var t,n={};if(p.cc(n),e!=_)for(t in e)n[t]=e[t];p.callbackWhenReadyToTrack(p,p.Da,[n]),p.Ba()},p.Lb=function(){var e=p.cookieRead("s_fid"),t="",n="",i=8,r=4;if(!e||e.indexOf("-")<0){for(e=0;e<16;e++)i=Math.floor(Math.random()*i),t+="0123456789ABCDEF".substring(i,i+1),i=Math.floor(Math.random()*r),n+="0123456789ABCDEF".substring(i,i+1),i=r=16;e=t+"-"+n}return e=!p.cookieWrite("s_fid",e,1)?0:e},p.Da=function(e){var t,n=new Date,i="s"+Math.floor(n.getTime()/108e5)%10+Math.floor(1e13*Math.random()),r=n.getYear(),a=(r="t="+p.escape(n.getDate()+"/"+n.getMonth()+"/"+(r<1900?r+1900:r)+" "+n.getHours()+":"+n.getMinutes()+":"+n.getSeconds()+" "+n.getDay()+" "+n.getTimezoneOffset()),p.T());e&&(t=p.S(e,1)),p.Sb()&&!p.visitorOptedOut&&(p.wa()||(p.fid=p.Lb()),p.Vb(),p.usePlugins&&p.doPlugins&&p.doPlugins(p),p.account&&(p.abort||(p.trackOffline&&!p.timestamp&&(p.timestamp=Math.floor(n.getTime()/1e3)),e=d.location,p.pageURL||(p.pageURL=e.href||e),p.referrer||p.Za||(e=p.Util.getQueryParam("adobe_mc_ref",null,null,!0),p.referrer=e||void 0===e?void 0===e?"":e:u.document.referrer),p.Za=1,p.referrer=p.Jb(p.referrer),p.u("_g")),p.Ob()&&!p.abort&&(a&&p.V("TARGET")&&!p.supplementalDataID&&a.getSupplementalDataID&&(p.supplementalDataID=a.getSupplementalDataID("AppMeasurement:"+p._in,!p.expectSupplementalData)),p.V("AAM")||(p.contextData["cm.ssf"]=1),p.Pb(),r+=p.Nb(),p.qb(i,r),p.u("_t"),p.referrer=""))),p.Ba(),t&&p.S(t,1)},p.t=p.track=function(e,t){t&&p.S(t),p.Y=!0,p.isReadyToTrack()?null!=p.j&&0<p.j.length?(p.ta(e),p.p()):p.Da(e):p.ta(e)},p.Ba=function(){p.abort=p.supplementalDataID=p.timestamp=p.pageURLRest=p.linkObject=p.clickObject=p.linkURL=p.linkName=p.linkType=d.s_objectID=p.pe=p.pev1=p.pev2=p.pev3=p.e=p.lightProfileID=p.useBeacon=p.referrer=0},p.Aa=[],p.registerPreTrackCallback=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);"function"==typeof e?p.Aa.push([e,t]):p.debugTracking&&p.C("DEBUG: Non function type passed to registerPreTrackCallback")},p.fb=function(e){p.ua(p.Aa,e)},p.za=[],p.registerPostTrackCallback=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);"function"==typeof e?p.za.push([e,t]):p.debugTracking&&p.C("DEBUG: Non function type passed to registerPostTrackCallback")},p.eb=function(e){p.ua(p.za,e)},p.ua=function(e,t){if("object"==typeof e)for(var n=0;n<e.length;n++){var i=e[n][0],r=e[n][1].slice();if(r.unshift(t),"function"==typeof i)try{i.apply(null,r)}catch(e){p.debugTracking&&p.C(e.message)}}},p.tl=p.trackLink=function(e,t,n,i,r){return p.linkObject=e,p.linkType=t,p.linkName=n,r&&(p.bodyClickTarget=e,p.bodyClickFunction=r),p.track(i)},p.trackLight=function(e,t,n,i){return p.lightProfileID=e,p.lightStoreForSeconds=t,p.lightIncrementBy=n,p.track(i)},p.clearVars=function(){for(var e,t=0;t<p.g.length;t++)"prop"!=(e=p.g[t]).substring(0,4)&&"eVar"!=e.substring(0,4)&&"hier"!=e.substring(0,4)&&"list"!=e.substring(0,4)&&"channel"!=e&&"events"!=e&&"eventList"!=e&&"products"!=e&&"productList"!=e&&"purchaseID"!=e&&"transactionID"!=e&&"state"!=e&&"zip"!=e&&"campaign"!=e||(p[e]=void 0)},p.tagContainerMarker="",p.qb=function(e,t){t=p.gb()+"/"+e+"?AQB=1&ndh=1&pf=1&"+(p.xa()?"callback=s_c_il["+p._in+"].doPostbacks&et=1&":"")+t+"&AQE=1";p.fb(t),p.cb(t),p.U()},p.gb=function(){var e=p.hb();return"http"+(p.ssl?"s":"")+"://"+e+"/b/ss/"+p.account+"/"+(p.mobile?"5.":"")+(p.xa()?"10":"1")+"/JS-"+p.version+(p.Yb?"T":"")+(p.tagContainerMarker?"-"+p.tagContainerMarker:"")},p.xa=function(){return p.AudienceManagement&&p.AudienceManagement.isReady()||0!=p.usePostbacks},p.hb=function(){var e=p.dc,t=p.trackingServer;return t?p.trackingServerSecure&&p.ssl&&(t=p.trackingServerSecure):("d1"==(e=e?(""+e).toLowerCase():"d1")?e="112":"d2"==e&&(e="122"),t=p.jb()+"."+e+".2o7.net"),t},p.jb=function(){return p.visitorNamespace||p.account.split(",")[0].replace(/[^0-9a-z]/gi,"")},p.Ya=/{(%?)(.*?)(%?)}/,p.bc=RegExp(p.Ya.source,"g"),p.Ib=function(e){if("object"==typeof e.dests)for(var t=0;t<e.dests.length;++t){var n=e.dests[t];if("string"==typeof n.c&&"aa."==n.id.substr(0,3))for(var i=n.c.match(p.bc),r=0;r<i.length;++r){var a=i[r],o=a.match(p.Ya),s="";"%"==o[1]&&"timezone_offset"==o[2]?s=(new Date).getTimezoneOffset():"%"==o[1]&&"timestampz"==o[2]&&(s=p.Mb()),n.c=n.c.replace(a,p.escape(s))}}},p.Mb=function(){var e=new Date,t=new Date(6e4*Math.abs(e.getTimezoneOffset()));return p.k(4,e.getFullYear())+"-"+p.k(2,e.getMonth()+1)+"-"+p.k(2,e.getDate())+"T"+p.k(2,e.getHours())+":"+p.k(2,e.getMinutes())+":"+p.k(2,e.getSeconds())+(0<e.getTimezoneOffset()?"-":"+")+p.k(2,t.getUTCHours())+":"+p.k(2,t.getUTCMinutes())},p.k=function(e,t){return(Array(e+1).join(0)+t).slice(-e)},p.pa={},p.doPostbacks=function(e){if("object"==typeof e)if(p.Ib(e),"object"==typeof p.AudienceManagement&&"function"==typeof p.AudienceManagement.isReady&&p.AudienceManagement.isReady()&&"function"==typeof p.AudienceManagement.passData)p.AudienceManagement.passData(e);else if("object"==typeof e&&"object"==typeof e.dests)for(var t=0;t<e.dests.length;++t){var n=e.dests[t];"object"==typeof n&&"string"==typeof n.c&&"string"==typeof n.id&&"aa."==n.id.substr(0,3)&&(p.pa[n.id]=new Image,p.pa[n.id].alt="",p.pa[n.id].src=n.c)}},p.cb=function(e){p.i||p.Qb(),p.i.push(e),p.ia=p.A(),p.Wa()},p.Qb=function(){p.i=p.Tb(),p.i||(p.i=[])},p.Tb=function(){var e,t;if(p.oa()){try{(t=d.localStorage.getItem(p.ma()))&&(e=d.JSON.parse(t))}catch(e){}return e}},p.oa=function(){var e=!0;return e=!(p.trackOffline&&p.offlineFilename&&d.localStorage&&d.JSON)?!1:e},p.Ma=function(){var e=0;return p.i&&(e=p.i.length),p.l&&e++,e},p.U=function(){var e;p.l&&(p.v&&p.v.complete&&p.v.D&&p.v.R(),p.l)||(p.Na=_,p.na?(p.ia>p.N&&p.Ua(p.i),p.qa(500)):0<(e=p.Cb())?p.qa(e):(e=p.Ka())&&(p.l=1,p.Ub(e),p.Xb(e)))},p.qa=function(e){p.Na||(e=e||0,p.Na=setTimeout(p.U,e))},p.Cb=function(){var e;return!p.trackOffline||p.offlineThrottleDelay<=0?0:(e=p.A()-p.Sa,p.offlineThrottleDelay<e?0:p.offlineThrottleDelay-e)},p.Ka=function(){if(0<p.i.length)return p.i.shift()},p.Ub=function(e){if(p.debugTracking){var t,n="AppMeasurement Debug: "+e;for(e=e.split("&"),t=0;t<e.length;t++)n+="\n\t"+p.unescape(e[t]);p.C(n)}},p.wa=function(){return p.marketingCloudVisitorID||p.analyticsVisitorID},p.X=!1;try{i=JSON.parse('{"x":"y"}')}catch(e){i=null}for(i&&"y"==i.x?(p.X=!0,p.W=function(e){return JSON.parse(e)}):d.$&&d.$.parseJSON?(p.W=function(e){return d.$.parseJSON(e)},p.X=!0):p.W=function(){return null},p.Xb=function(e){var t,n,i;if(p.lb(e)&&(n=1,t={send:function(e){p.useBeacon=!1,navigator.sendBeacon(e)?t.R():t.ga()}}),!t&&p.wa()&&2047<e.length&&(p.$a()&&(n=2,t=new XMLHttpRequest),t&&(p.AudienceManagement&&p.AudienceManagement.isReady()||0!=p.usePostbacks)&&(p.X?t.Fa=!0:t=0)),!t&&p.Xa&&(e=e.substring(0,2047)),!t&&p.d.createElement&&(0!=p.usePostbacks||p.AudienceManagement&&p.AudienceManagement.isReady())&&(t=p.d.createElement("SCRIPT"))&&"async"in t&&((i=(i=p.d.getElementsByTagName("HEAD"))&&i[0]?i[0]:p.d.body)?(t.type="text/javascript",t.setAttribute("async","async"),n=3):t=0),t||((t=new Image).alt="",t.abort||void 0===d.InstallTrigger||(t.abort=function(){t.src=_})),t.Ta=Date.now(),t.Ha=function(){try{t.D&&(clearTimeout(t.D),t.D=0)}catch(e){}},t.onload=t.R=function(){if(t.Ta&&(p.ja=Date.now()-t.Ta),p.eb(e),t.Ha(),p.Gb(),p.ca(),p.l=0,p.U(),t.Fa){t.Fa=!1;try{p.doPostbacks(p.W(t.responseText))}catch(e){}}},t.onabort=t.onerror=t.ga=function(){t.Ha(),(p.trackOffline||p.na)&&p.l&&p.i.unshift(p.Fb),p.l=0,p.ia>p.N&&p.Ua(p.i),p.ca(),p.qa(500)},t.onreadystatechange=function(){4==t.readyState&&(200==t.status?t.R():t.ga())},p.Sa=p.A(),1===n)t.send(e);else if(2===n)i=e.indexOf("?"),n=e.substring(0,i),i=(i=e.substring(i+1)).replace(/&callback=[a-zA-Z0-9_.\[\]]+/,""),t.open("POST",n,!0),t.withCredentials=!0,t.send(i);else if(t.src=e,3===n){if(p.Qa)try{i.removeChild(p.Qa)}catch(e){}i.firstChild?i.insertBefore(t,i.firstChild):i.appendChild(t),p.Qa=p.v}t.D=setTimeout(function(){t.D&&(t.complete?t.R():(p.trackOffline&&t.abort&&t.abort(),t.ga()))},5e3),p.Fb=e,p.v=d["s_i_"+p.replace(p.account,",","_")]=t,(p.useForcedLinkTracking&&p.J||p.bodyClickFunction)&&(p.forcedLinkTrackingTimeout||(p.forcedLinkTrackingTimeout=250),p.da=setTimeout(p.ca,p.forcedLinkTrackingTimeout))},p.lb=function(e){var t=!1;return navigator.sendBeacon&&(p.nb(e)||p.useBeacon)&&(t=!0),t=p.vb(e)?!1:t},p.nb=function(e){return!!(e&&0<e.indexOf("pe=lnk_e"))},p.vb=function(e){return 64e3<=e.length},p.$a=function(){return"undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest},p.Gb=function(){if(p.oa()&&!(p.Ra>p.N))try{d.localStorage.removeItem(p.ma()),p.Ra=p.A()}catch(e){}},p.Ua=function(e){if(p.oa()){p.Wa();try{d.localStorage.setItem(p.ma(),d.JSON.stringify(e)),p.N=p.A()}catch(e){}}},p.Wa=function(){if(p.trackOffline)for((!p.offlineLimit||p.offlineLimit<=0)&&(p.offlineLimit=10);p.i.length>p.offlineLimit;)p.Ka()},p.forceOffline=function(){p.na=!0},p.forceOnline=function(){p.na=!1},p.ma=function(){return p.offlineFilename+"-"+p.visitorNamespace+p.account},p.A=function(){return(new Date).getTime()},p.Oa=function(e){return 0!=(e=e.toLowerCase()).indexOf("#")&&0!=e.indexOf("about:")&&0!=e.indexOf("opera:")&&0!=e.indexOf("javascript:")},p.setTagContainer=function(e){var t,n,i;for(p.Yb=e,t=0;t<p._il.length;t++)if((n=p._il[t])&&"s_l"==n._c&&n.tagContainerName==e){if(p.S(n),n.lmq)for(t=0;t<n.lmq.length;t++)i=n.lmq[t],p.loadModule(i.n);if(n.ml)for(i in n.ml)if(p[i])for(t in e=p[i],i=n.ml[i])!Object.prototype[t]&&("function"!=typeof i[t]||(""+i[t]).indexOf("s_c_il")<0)&&(e[t]=i[t]);if(n.mmq)for(t=0;t<n.mmq.length;t++)i=n.mmq[t],p[i.m]&&(e=p[i.m])[i.f]&&"function"==typeof e[i.f]&&(i.a?e[i.f].apply(e,i.a):e[i.f].apply(e));if(n.tq)for(t=0;t<n.tq.length;t++)p.track(n.tq[t]);n.s=p;break}},p.Util={urlEncode:p.escape,urlDecode:p.unescape,cookieRead:p.cookieRead,cookieWrite:p.cookieWrite,getQueryParam:function(e,t,n,i){var r,a="";return t=t||(p.pageURL||d.location),n=n||"&",!e||!t||(r=(t=""+t).indexOf("?"))<0?a:(t=n+t.substring(r+1)+n,i&&(0<=t.indexOf(n+e+n)||0<=t.indexOf(n+e+"="+n))?void 0:((r=(t=0<=(r=t.indexOf("#"))?t.substr(0,r)+n:t).indexOf(n+e+"="))<0||0<(t=0<=(r=(t=t.substring(r+n.length+e.length+1)).indexOf(n))?t.substring(0,r):t).length&&(a=p.unescape(t)),a))},getIeVersion:function(){if(document.documentMode)return document.documentMode;for(var e=7;4<e;e--){var t=document.createElement("div");if(t.innerHTML="\x3c!--[if IE "+e+"]><span></span><![endif]--\x3e",t.getElementsByTagName("span").length)return e}return null}},p.F="supplementalDataID timestamp dynamicVariablePrefix visitorID marketingCloudVisitorID analyticsVisitorID audienceManagerLocationHint authState fid vmk visitorMigrationKey visitorMigrationServer visitorMigrationServerSecure charSet visitorNamespace cookieDomainPeriods fpCookieDomainPeriods cookieLifetime pageName pageURL customerPerspective referrer contextData currencyCode lightProfileID lightStoreForSeconds lightIncrementBy retrieveLightProfiles deleteLightProfiles retrieveLightData".split(" "),p.g=p.F.concat("purchaseID variableProvider channel server pageType transactionID campaign state zip events events2 products audienceManagerBlob tnt".split(" ")),p.ka="timestamp charSet visitorNamespace cookieDomainPeriods cookieLifetime contextData lightProfileID lightStoreForSeconds lightIncrementBy".split(" "),p.O=p.ka.slice(0),p.Ea="account allAccounts debugTracking visitor visitorOptedOut trackOffline offlineLimit offlineThrottleDelay offlineFilename usePlugins doPlugins configURL visitorSampling visitorSamplingGroup linkObject clickObject linkURL linkName linkType trackDownloadLinks trackExternalLinks trackClickMap trackInlineStats linkLeaveQueryString linkTrackVars linkTrackEvents linkDownloadFileTypes linkExternalFilters linkInternalFilters useForcedLinkTracking forcedLinkTrackingTimeout useLinkTrackSessionStorage trackingServer trackingServerSecure ssl abort mobile dc lightTrackVars maxDelay expectSupplementalData useBeacon usePostbacks registerPreTrackCallback registerPostTrackCallback bodyClickTarget bodyClickFunction AudienceManagement".split(" "),t=0;t<=250;t++)t<76&&(p.g.push("prop"+t),p.O.push("prop"+t)),p.g.push("eVar"+t),p.O.push("eVar"+t),t<6&&p.g.push("hier"+t),t<4&&p.g.push("list"+t);t="pe pev1 pev2 pev3 latitude longitude resolution colorDepth javascriptVersion javaEnabled cookiesEnabled browserWidth browserHeight connectionType homepage pageURLRest marketingCloudOrgID ms_a".split(" "),p.g=p.g.concat(t),p.F=p.F.concat(t),p.ssl=0<=d.location.protocol.toLowerCase().indexOf("https"),p.charSet="UTF-8",p.contextData={},p.offlineThrottleDelay=0,p.offlineFilename="AppMeasurement.offline",p.P="s_sq",p.Sa=0,p.ia=0,p.N=0,p.Ra=0,p.linkDownloadFileTypes="exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx",p.w=d,p.d=d.document;try{p.Xa=!1,navigator&&(r=navigator.userAgent,("Microsoft Internet Explorer"==navigator.appName||0<=r.indexOf("MSIE ")||0<=r.indexOf("Trident/")&&0<=r.indexOf("Windows NT 6"))&&(p.Xa=!0))}catch(e){}p.ca=function(){p.da&&(d.clearTimeout(p.da),p.da=_),p.bodyClickTarget&&p.J&&p.bodyClickTarget.dispatchEvent(p.J),p.bodyClickFunction&&("function"==typeof p.bodyClickFunction?p.bodyClickFunction():p.bodyClickTarget&&p.bodyClickTarget.href&&(p.d.location=p.bodyClickTarget.href)),p.bodyClickTarget=p.J=p.bodyClickFunction=0},p.Va=function(){p.b=p.d.body,p.b?(p.r=function(e){var t,n,i,r,a;if(!(p.d&&p.d.getElementById("cppXYctnr")||e&&e["s_fe_"+p._in])){if(p.Ga){if(!p.useForcedLinkTracking)return p.b.removeEventListener("click",p.r,!0),void(p.Ga=p.useForcedLinkTracking=0);p.b.removeEventListener("click",p.r,!1)}else p.useForcedLinkTracking=0;p.clickObject=e.srcElement||e.target;try{if(!p.clickObject||p.M&&p.M==p.clickObject||!(p.clickObject.tagName||p.clickObject.parentElement||p.clickObject.parentNode))p.clickObject=0;else{var o=p.M=p.clickObject;if(p.ha&&(clearTimeout(p.ha),p.ha=0),p.ha=setTimeout(function(){p.M==o&&(p.M=0)},1e4),i=p.Ma(),p.track(),i<p.Ma()&&p.useForcedLinkTracking&&e.target){for(r=e.target;r&&r!=p.b&&"A"!=r.tagName.toUpperCase()&&"AREA"!=r.tagName.toUpperCase();)r=r.parentNode;if(r&&(a=r.href,p.Oa(a)||(a=0),n=r.target,e.target.dispatchEvent&&a&&(!n||"_self"==n||"_top"==n||"_parent"==n||d.name&&n==d.name))){try{t=p.d.createEvent("MouseEvents")}catch(e){t=new d.MouseEvent}if(t){try{t.initMouseEvent("click",e.bubbles,e.cancelable,e.view,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget)}catch(e){t=0}t&&(t["s_fe_"+p._in]=t.s_fe=1,e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.preventDefault(),p.bodyClickTarget=e.target,p.J=t)}}}}}catch(e){p.clickObject=0}}},p.b&&p.b.attachEvent?p.b.attachEvent("onclick",p.r):p.b&&p.b.addEventListener&&(navigator&&(0<=navigator.userAgent.indexOf("WebKit")&&p.d.createEvent||0<=navigator.userAgent.indexOf("Firefox/2")&&d.MouseEvent)&&(p.Ga=1,p.useForcedLinkTracking=1,p.b.addEventListener("click",p.r,!0)),p.b.addEventListener("click",p.r,!1))):setTimeout(p.Va,30)},p.Hb(),p.ic||(e?p.setAccount(e):p.C("Error, missing Report Suite ID in AppMeasurement initialization"),p.Va(),p.loadModule("ActivityMap"))}function a(e){var t,n,i,r,a,o=window.s_c_il,s=e.split(","),l=0;if(o)for(n=0;!l&&n<o.length;){if("s_c"==(t=o[n])._c&&(t.account||t.oun))if(t.account&&t.account==e)l=1;else for(i=t.account||t.oun,i=t.allAccounts||i.split(","),r=0;r<s.length;r++)for(a=0;a<i.length;a++)s[r]==i[a]&&(l=1);n++}return l?t.setAccount&&t.setAccount(e):t=new c(e),t}!function(){"use strict";function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t,n){t=null==e?void 0:e[t];return void 0===t?n:t}function L(e,t){if(e===t)return 0;e=e.toString().split("."),t=t.toString().split(".");return function(e){for(var t=/^\d+$/,n=0,i=e.length;n<i;n++)if(!t.test(e[n]))return;return 1}(e.concat(t))?(function(e,t){for(;e.length<t.length;)e.push("0");for(;t.length<e.length;)t.push("0")}(e,t),function(e,t){for(var n=0;n<e.length;n++){var i=parseInt(e[n],10),r=parseInt(t[n],10);if(r<i)return 1;if(i<r)return-1}return 0}(e,t)):NaN}function i(e){this.name=this.constructor.name,this.message=e,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error(e).stack}function t(){function t(e,t){var n,e=se(e);return e.length?e.every(function(e){return!!t[e]}):(n=t,!!(e=Object.keys(n)).length&&e.every(function(e){return!0===n[e]}))}function i(){A(b),T(ee),g(f.status,f.permissions),_.set(f.permissions,{optInCookieDomain:l,optInStorageExpiry:c}),v.execute(_e)}function e(n){return function(e,t){if(!le(e))throw new Error("[OptIn] Invalid category(-ies). Please use the `OptIn.Categories` enum.");return T($),Object.assign(b,C(se(e),n)),t||i(),f}}var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=n.doesOptInApply,a=n.previousPermissions,o=n.preOptInApprovals,s=n.isOptInStorageEnabled,l=n.optInCookieDomain,c=n.optInStorageExpiry,u=n.isIabContext,d=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).cookies,a=oe(n=a,"function")?n():n;P(a,"Invalid `previousPermissions`!"),P(o,"Invalid `preOptInApprovals`!");var h,p,_=function(e,t){var n=0<arguments.length&&void 0!==e?e:{},e=n.isEnabled,i=n.cookieName,r=(1<arguments.length&&void 0!==t?t:{}).cookies;return e&&i&&r?{remove:function(){r.remove(i)},get:function(){var e=r.get(i),t={};try{t=JSON.parse(e)}catch(e){t={}}return t},set:function(e,t){t=t||{},r.set(i,JSON.stringify(e),{domain:t.optInCookieDomain||"",cookieLifetime:t.optInStorageExpiry||3419e4,expires:!0})}}:{get:pe,set:pe,remove:pe}}({isEnabled:!!s,cookieName:"adobeujs-optin"},{cookies:d}),f=this,g=(h={},(n=f).on=function(e,t,n){if(!t||"function"!=typeof t)throw new Error("[ON] Callback should be a function.");h.hasOwnProperty(e)||(h[e]=[]);var i=h[e].push({callback:t,context:n})-1;return function(){h[e].splice(i,1),h[e].length||delete h[e]}},n.off=function(e,t){h.hasOwnProperty(e)&&(h[e]=h[e].filter(function(e){if(e.callback!==t)return e}))},n.publish=function(e){var t;h.hasOwnProperty(e)&&(t=[].slice.call(arguments,1),h[e].slice(0).forEach(function(e){e.callback.apply(e.context,t)}))},n.publish),v=w(),s=I(a),m=I(o),d=_.get(),y={},S=(n=d,ue(s)||n&&ue(n)?ee:Z),E=(a=m,n=s,s=d,d=C(re,!r),r?Object.assign({},d,a,n,s):d),b=(d=E,JSON.parse(JSON.stringify(d))),T=function(e){return S=e},A=function(e){return E=e};f.deny=e(!1),f.approve=e(!0),f.denyAll=f.deny.bind(f,re),f.approveAll=f.approve.bind(f,re),f.isApproved=function(e){return t(e,f.permissions)},f.isPreApproved=function(e){return t(e,m)},f.fetchPermissions=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=t?f.on(ee,e):pe;return!r||f.isComplete||o?e(f.permissions):t||v.add(_e,function(){return e(f.permissions)}),n},f.complete=function(){f.status===$&&i()},f.registerPlugin=function(e){if(!e||!e.name||"function"!=typeof e.onRegister)throw new Error("[OptIn#registerPlugin] Plugin is invalid.");y[e.name]||(y[e.name]=e).onRegister.call(e,f)},f.execute=(p=y,function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.command,n=e.params,n=void 0===n?{}:n,e=e.callback,e=void 0===e?pe:e;if(!t||-1===t.indexOf("."))throw new Error("[OptIn.execute] Please provide a valid command.");try{var i=t.split("."),r=p[i[0]],a=i[1];if(!r||"function"!=typeof r[a])throw new Error("Make sure the plugin and API name exist.");var o=Object.assign(n,{callback:e});r[a].call(r,o)}catch(e){ae.error("[execute] Something went wrong: "+e.message)}}),Object.defineProperties(f,{permissions:{get:function(){return E}},status:{get:function(){return S}},Categories:{get:function(){return te}},doesOptInApply:{get:function(){return!!r}},isPending:{get:function(){return f.status===Z}},isComplete:{get:function(){return f.status===ee}},__plugins:{get:function(){return Object.keys(y)}},isIabContext:{get:function(){return u}}})}function c(e,t){if(void 0===t)return e;var n=setTimeout(function(){n=null,e.call(e,new i("The call took longer than you wanted!"))},t);return function(){n&&(clearTimeout(n),e.apply(e,arguments))}}function u(){if(window.__cmp)return window.__cmp;var r,e=window;if(e!==window.top){for(;!r;){e=e.parent;try{e.frames.__cmpLocator&&(r=e)}catch(e){}if(e===window.top)break}if(r){var a={};return window.__cmp=function(e,t,n){var i=Math.random()+"",t={__cmpCall:{command:e,parameter:t,callId:i}};a[i]=n,r.postMessage(t,"*")},window.addEventListener("message",function(e){var t=e.data;if("string"==typeof t)try{t=JSON.parse(e.data)}catch(e){}t.__cmpReturn&&(t=t.__cmpReturn,a[t.callId]&&(a[t.callId](t.returnValue,t.success),delete a[t.callId]))},!1),window.__cmp}ae.error("__cmp not found")}else ae.error("__cmp not found")}var x="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==Ee?Ee:"undefined"!=typeof self?self:{};Object.assign=Object.assign||function(e){for(var t,n,i=1;i<arguments.length;++i)for(t in n=arguments[i])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e};function p(a){function n(){}this.getMarketingCloudVisitorID=function(e){var t=this.findField(v.MCMID,e=e||n),e=function(n,i){var r=this;return function(){var e=a(0,n),t={};return t[n]=e,r.setStateAndPublish(t),i(e),e}}.call(this,v.MCMID,e);return void 0!==t?t:e()},this.getVisitorValues=function(t){this.getMarketingCloudVisitorID(function(e){t({MCMID:e})})}}function _(){function i(){}Object.keys(y).forEach(function(n){this[y[n]]=function(e){var t=this.findField(n,e=e||i),e=function(e,t){var n=this;return function(){return n.callbackRegistry.add(e,t),n.messageParent(m.GETSTATE),""}}.call(this,n,e);return void 0!==t?t:e()}},this),Object.keys(S).forEach(function(e){this[S[e]]=function(){return this.findField(e,i)||{}}},this)}function f(){Object.keys(E).forEach(function(t){this[E[t]]=function(e){this.callbackRegistry.add(t,e)}},this)}function F(i,r){this.parse=function(e){try{var n={};return e.data.split("|").forEach(function(e,t){void 0!==e&&(n[A[t]]=2!==t?e:JSON.parse(e))}),n}catch(e){}},this.isInvalid=function(e){var t=this.parse(e);if(!t||Object.keys(t).length<2)return!0;var n=i!==t.orgID,e=!r||e.origin!==r,t=-1===Object.keys(T).indexOf(t.prefix);return n||e||t},this.send=function(e,t,n){t=t+"|"+i;n&&n===Object(n)&&(t+="|"+JSON.stringify(n));try{e.postMessage(t,r)}catch(e){}}}function o(e,t,n,i){function r(e){Object.assign(c,e)}function a(e){h.isInvalid(e)||(d=!1,e=h.parse(e),c.setStateAndPublish(e.state))}function o(e){!d&&u&&(d=!0,h.send(i,e))}function s(){r(new p(n._generateID)),c.getMarketingCloudVisitorID(),c.callbackRegistry.executeAll(c.state,!0),x.removeEventListener("message",l)}function l(e){h.isInvalid(e)||(e=h.parse(e),d=!1,x.clearTimeout(c._handshakeTimeout),x.removeEventListener("message",l),r(new _),x.addEventListener("message",a),c.setStateAndPublish(e.state),c.callbackRegistry.hasCallbacks()&&o(k.GETSTATE))}var c=this,u=t.whitelistParentDomain;c.state={ALLFIELDS:{}},c.version=n.version,c.marketingCloudOrgID=e,c.cookieDomain=n.cookieDomain||"";var d=!(c._instanceType="child"),h=new F(e,u);c.callbackRegistry=b(),c.init=function(){x.s_c_in||(x.s_c_il=[],x.s_c_in=0),c._c="Visitor",c._il=x.s_c_il,c._in=x.s_c_in,c._il[c._in]=c,x.s_c_in++,Object.keys(n).forEach(function(e){0!==e.indexOf("_")&&"function"==typeof n[e]&&(c[e]=function(){})}),c.getSupplementalDataID=n.getSupplementalDataID,c.isAllowed=function(){return!0},r(new f),u&&postMessage?(x.addEventListener("message",l),o(k.HANDSHAKE),c._handshakeTimeout=setTimeout(s,250)):s()},c.findField=function(e,t){if(void 0!==c.state[e])return t(c.state[e]),c.state[e]},c.messageParent=o,c.setStateAndPublish=function(e){Object.assign(c.state,e),Object.assign(c.state.ALLFIELDS,e),c.callbackRegistry.executeAll(c.state)}}function V(a,r){function t(r){return function e(t){var n,i=(n=[],a._loading&&Object.keys(a._loading).forEach(function(e){a._loading[e]&&(e=R[e],n.push(e))}),n.length?n:null);i?(i=O[i[0]],a[i](e,!0)):r()}}function i(e,t){var n,i=(n={},Object.keys(D).forEach(function(e){var t=D[e],t=a[t]();G.isValueEmpty(t)||(n[e]=t)}),n);r.send(e,t,i)}function n(e){var t,n;t=e,n=a.setCustomerIDs,a.setCustomerIDs=function(e){n.call(a,e),r.send(t,M.PARENTSTATE,{CUSTOMERIDS:a.getCustomerIDs()})},i(e,M.HANDSHAKE)}return function(e){r.isInvalid(e)||(r.parse(e).prefix===M.HANDSHAKE?n:function(e){t(function(){i(e,M.PARENTSTATE)})()})(e.source)}}function B(e){for(var t,n=(t=e=!e&&x.location?x.location.hostname:e).split("."),i=n.length-2;0<=i;i--)if(t=n.slice(i).join("."),W.set("test","cookie",{domain:t}))return W.remove("test",{domain:t}),t;return""}function U(t,n){var e;try{Q&&(t&&(e=function(e){if("string"==typeof n&&e.origin!==n||"[object Function]"===Object.prototype.toString.call(n)&&!1===n(e.origin))return!1;t(e)}),x.addEventListener?x[t?"addEventListener":"removeEventListener"]("message",e):x[t?"attachEvent":"detachEvent"]("onmessage",e))}catch(t){}}function j(e){var t,n,i="0123456789",r="",a="",o=8,s=10,l=10;if(1==e){for(i+="ABCDEF",t=0;t<16;t++)n=Math.floor(Math.random()*o),r+=i.substring(n,n+1),n=Math.floor(Math.random()*o),a+=i.substring(n,n+1),o=16;return r+"-"+a}for(t=0;t<19;t++)n=Math.floor(Math.random()*s),r+=i.substring(n,n+1),0===t&&9==n?s=3:((1==t||2==t)&&10!=s&&n<2||2<t)&&(s=10),n=Math.floor(Math.random()*l),a+=i.substring(n,n+1),0===t&&9==n?l=3:((1==t||2==t)&&10!=l&&n<2||2<t)&&(l=10);return r+a}function H(i,e){return{corsMetadata:(t="none",n=!0,"undefined"!=typeof XMLHttpRequest&&XMLHttpRequest===Object(XMLHttpRequest)&&("withCredentials"in new XMLHttpRequest?t="XMLHttpRequest":"undefined"!=typeof XDomainRequest&&XDomainRequest===Object(XDomainRequest)&&(n=!1),0<Object.prototype.toString.call(x.HTMLElement).indexOf("Constructor")&&(n=!1)),{corsType:t,corsCookiesEnabled:n}),getCORSInstance:function(){return"none"===this.corsMetadata.corsType?null:new x[this.corsMetadata.corsType]},fireCORS:function(a,e,t){var o=this;e&&(a.loadErrorHandler=e);try{var n=this.getCORSInstance();n.open("get",a.corsUrl+"&ts="+(new Date).getTime(),!0),"XMLHttpRequest"===this.corsMetadata.corsType&&(n.withCredentials=!0,n.timeout=i.loadTimeout,n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.onreadystatechange=function(){4===this.readyState&&200===this.status&&function(e){var t;try{if((t=JSON.parse(e))!==Object(t))return o.handleCORSError(a,null,"Response is not JSON")}catch(e){return o.handleCORSError(a,e,"Error parsing response as JSON")}try{for(var n=a.callback,i=x,r=0;r<n.length;r++)i=i[n[r]];i(t)}catch(e){o.handleCORSError(a,e,"Error forming callback function")}}(this.responseText)}),n.onerror=function(e){o.handleCORSError(a,e,"onerror")},n.ontimeout=function(e){o.handleCORSError(a,e,"ontimeout")},n.send(),i._log.requests.push(a.corsUrl)}catch(e){this.handleCORSError(a,e,"try-catch")}},handleCORSError:function(e,t,n){i.CORSErrors.push({corsData:e,error:t,description:n}),e.loadErrorHandler&&("ontimeout"===n?e.loadErrorHandler(!0):e.loadErrorHandler(!1))}};var t,n}function w(){var i={};return i.callbacks=Object.create(null),i.add=function(e,t){if(!("function"==typeof t||t instanceof Array&&t.length))throw new Error("[callbackRegistryFactory] Make sure callback is a function or an array of functions.");i.callbacks[e]=i.callbacks[e]||[];var n=i.callbacks[e].push(t)-1;return function(){i.callbacks[e].splice(n,1)}},i.execute=function(e,t){if(i.callbacks[e]){t=(t=void 0===t?[]:t)instanceof Array?t:[t];try{for(;i.callbacks[e].length;){var n=i.callbacks[e].shift();"function"==typeof n?n.apply(null,t):n instanceof Array&&n[1].apply(n[0],t)}delete i.callbacks[e]}catch(e){}}},i.executeAll=function(n,e){(e||n&&((e=n)!==Object(e)||0!==Object.keys(e).length))&&Object.keys(i.callbacks).forEach(function(e){var t=void 0!==n[e]?n[e]:"";i.execute(e,t)},i)},i.hasCallbacks=function(){return Boolean(Object.keys(i.callbacks).length)},i}function n(){}function r(a,o,e){return e()?function(){if(i=a,!!(r=window.console)&&"function"==typeof r[i]){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console[a].apply(console,[o].concat(t))}var i,r}:n}function C(e,n){return e.reduce(function(e,t){return e[t]=n,e},{})}function I(e){if(he(e))return e;try{return JSON.parse(e)}catch(e){return{}}}function P(e,t){ue(e)||ae.error("".concat(t))}var a,l,d,h={HANDSHAKE:"HANDSHAKE",GETSTATE:"GETSTATE",PARENTSTATE:"PARENTSTATE"},g={MCMID:"getMarketingCloudVisitorID",MCAID:"getAnalyticsVisitorID",MCAAMB:"getAudienceManagerBlob",MCAAMLH:"getAudienceManagerLocationHint",MCOPTOUT:"isOptedOut",ALLFIELDS:"getVisitorValues"},K={MCMID:"MCMID",MCOPTOUT:"MCOPTOUT",MCAID:"MCAID",MCAAMLH:"MCAAMLH",MCAAMB:"MCAAMB"},Y={UNKNOWN:0,AUTHENTICATED:1,LOGGED_OUT:2},q={GLOBAL:"global"},v={MCMID:"MCMID",MCAID:"MCAID",MCAAMB:"MCAAMB",MCAAMLH:"MCAAMLH",MCOPTOUT:"MCOPTOUT",CUSTOMERIDS:"CUSTOMERIDS"},m=h,y=g,S={CUSTOMERIDS:"getCustomerIDs"},E=g,G=((d=(l={exports:{}}).exports).isObjectEmpty=function(e){return e===Object(e)&&0===Object.keys(e).length},d.isValueEmpty=function(e){return""===e||d.isObjectEmpty(e)},d.getIeVersion=function(){if(document.documentMode)return document.documentMode;for(var e=7;4<e;e--){var t=document.createElement("div");if(t.innerHTML="\x3c!--[if IE "+e+"]><span></span><![endif]--\x3e",t.getElementsByTagName("span").length)return t=null,e;t=null}return null},d.encodeAndBuildRequest=function(e,t){return e.map(encodeURIComponent).join(t)},d.isObject=function(e){return null!==e&&"object"===N(e)&&!1===Array.isArray(e)},d.defineGlobalNamespace=function(){return window.adobe=d.isObject(window.adobe)?window.adobe:{},window.adobe},d.pluck=function(n,e){return e.reduce(function(e,t){return n[t]&&(e[t]=n[t]),e},Object.create(null))},d.parseOptOut=function(e,t,n){t||(t=n,e.d_optout&&e.d_optout instanceof Array&&(t=e.d_optout.join(",")));e=parseInt(e.d_ottl,10);return{optOut:t,d_ottl:e=isNaN(e)?7200:e}},d.normalizeBoolean=function(e){var t=e;return"true"===e?t=!0:"false"===e&&(t=!1),t},l.exports),b=(G.isObjectEmpty,G.isValueEmpty,G.getIeVersion,G.encodeAndBuildRequest,G.isObject,G.defineGlobalNamespace,G.pluck,G.parseOptOut,G.normalizeBoolean,function(){return{callbacks:{},add:function(e,t){this.callbacks[e]=this.callbacks[e]||[];var n=this.callbacks[e].push(t)-1,i=this;return function(){i.callbacks[e].splice(n,1)}},execute:function(e,t){if(this.callbacks[e]){t=(t=void 0===t?[]:t)instanceof Array?t:[t];try{for(;this.callbacks[e].length;){var n=this.callbacks[e].shift();"function"==typeof n?n.apply(null,t):n instanceof Array&&n[1].apply(n[0],t)}delete this.callbacks[e]}catch(e){}}},executeAll:function(n,e){(e||n&&!G.isObjectEmpty(n))&&Object.keys(this.callbacks).forEach(function(e){var t=void 0!==n[e]?n[e]:"";this.execute(e,t)},this)},hasCallbacks:function(){return Boolean(Object.keys(this.callbacks).length)}}}),T=h,A={0:"prefix",1:"orgID",2:"state"},k=h,M=h,D={MCMID:"getMarketingCloudVisitorID",MCAAMB:"getAudienceManagerBlob",MCAAMLH:"getAudienceManagerLocationHint",MCOPTOUT:"isOptedOut",MCAID:"getAnalyticsVisitorID",CUSTOMERIDS:"getCustomerIDs",ALLFIELDS:"getVisitorValues"},O=g,R={MC:"MCMID",A:"MCAID",AAM:"MCAAMB"},W={get:function(e){e=encodeURIComponent(e);var t=(";"+document.cookie).split(" ").join(";"),n=t.indexOf(";"+e+"="),i=n<0?n:t.indexOf(";",n+1);return n<0?"":decodeURIComponent(t.substring(n+2+e.length,i<0?t.length:i))},set:function(e,t,n){var i=s(n,"cookieLifetime"),r=s(n,"expires"),a=s(n,"domain"),o=s(n,"secure")?"Secure":"";return r&&"SESSION"!==i&&"NONE"!==i?(n=""!==t?parseInt(i||0,10):-60)?(r=new Date).setTime(r.getTime()+1e3*n):1===r&&(n=(r=new Date).getYear(),r.setYear(n+2+(n<1900?1900:0))):r=0,e&&"NONE"!==i?(document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+"; path=/;"+(r?" expires="+r.toGMTString()+";":"")+(a?" domain="+a+";":"")+o,this.get(e)===t):0},remove:function(e,t){t=(t=s(t,"domain"))?" domain="+t+";":"";document.cookie=encodeURIComponent(e)+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"+t}},Q=!!x.postMessage,z={POST_MESSAGE_ENABLED:!!x.postMessage,DAYS_BETWEEN_SYNC_ID_CALLS:1,MILLIS_PER_DAY:864e5,ADOBE_MC:"adobe_mc",ADOBE_MC_SDID:"adobe_mc_sdid",VALID_VISITOR_ID_REGEX:/^[0-9a-fA-F\-]+$/,ADOBE_MC_TTL_IN_MIN:5,VERSION_REGEX:/vVersion\|((\d+\.)?(\d+\.)?(\*|\d+))(?=$|\|)/,FIRST_PARTY_SERVER_COOKIE:"s_ecid"},X={audienceManagerServer:{},audienceManagerServerSecure:{},cookieDomain:{},cookieLifetime:{},cookieName:{},doesOptInApply:{},disableThirdPartyCalls:{},discardTrackingServerECID:{},idSyncAfterIDCallResult:{},idSyncAttachIframeOnWindowLoad:{},idSyncContainerID:{},idSyncDisable3rdPartySyncing:{},disableThirdPartyCookies:{},idSyncDisableSyncs:{},disableIdSyncs:{},idSyncIDCallResult:{},idSyncSSLUseAkamai:{},isCoopSafe:{},isIabContext:{},isOptInStorageEnabled:{},loadSSL:{},loadTimeout:{},marketingCloudServer:{},marketingCloudServerSecure:{},optInCookieDomain:{},optInStorageExpiry:{},overwriteCrossDomainMCIDAndAID:{},preOptInApprovals:{},previousPermissions:{},resetBeforeVersion:{},sdidParamExpiry:{},serverState:{},sessionCookieName:{},secureCookie:{},takeTimeoutMetrics:{},trackingServer:{},trackingServerSecure:{},whitelistIframeDomains:{},whitelistParentDomain:{}},J={getConfigNames:function(){return Object.keys(X)},getConfigs:function(){return X},normalizeConfig:function(e){return"function"!=typeof e?e:e()}},Z="pending",$="changed",ee="complete",te={AAM:"aam",ADCLOUD:"adcloud",ANALYTICS:"aa",CAMPAIGN:"campaign",ECID:"ecid",LIVEFYRE:"livefyre",TARGET:"target",VIDEO_ANALYTICS:"videoaa"},ne=(e(h={},te.AAM,565),e(h,te.ECID,565),h),ie=(e(g={},te.AAM,[1,2,5]),e(g,te.ECID,[1,2,5]),g),re=(a=te,Object.keys(a).map(function(e){return a[e]})),ae=new function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){return!0};this.log=r("log",e,t),this.warn=r("warn",e,t),this.error=r("error",e,t)}("[ADOBE OPT-IN]"),oe=function(e,t){return N(e)===t},se=function(e,t){return e instanceof Array?e:oe(e,"string")?[e]:t||[]},le=function(e){return!(!e||ce(e))&&se(e).every(function(e){return-1<re.indexOf(e)})},ce=function(e){return"[object Array]"===Object.prototype.toString.call(e)&&!e.length},ue=function(e){return void 0===e||(he(e)?le(Object.keys(e)):de(e))},de=function(e){try{var t=JSON.parse(e);return!!e&&oe(e,"string")&&le(Object.keys(t))}catch(e){return!1}},he=function(e){return null!==e&&oe(e,"object")&&!1===Array.isArray(e)},pe=function(){};(i.prototype=Object.create(Error.prototype)).constructor=i;var _e="fetchPermissions";t.Categories=te,t.TimeoutError=i;function fe(e,t){return e="SHA-256"===t||"SHA256"===t||"sha256"===t||"sha-256"===t?function e(t){function n(e,t){return e>>>t|e<<32-t}for(var i,r=Math.pow,a=r(2,32),o="",s=[],l=8*t.length,c=e.h=e.h||[],u=e.k=e.k||[],d=u.length,h={},p=2;d<64;p++)if(!h[p]){for(g=0;g<313;g+=p)h[g]=p;c[d]=r(p,.5)*a|0,u[d++]=r(p,1/3)*a|0}for(t+="";t.length%64-56;)t+="\0";for(g=0;g<t.length;g++){if((i=t.charCodeAt(g))>>8)return;s[g>>2]|=i<<(3-g)%4*8}for(s[s.length]=l/a|0,s[s.length]=l,i=0;i<s.length;){for(var _=s.slice(i,i+=16),f=c,c=c.slice(0,8),g=0;g<64;g++){var v=_[g-15],m=_[g-2],y=c[0],S=c[4],m=c[7]+(n(S,6)^n(S,11)^n(S,25))+(S&c[5]^~S&c[6])+u[g]+(_[g]=g<16?_[g]:_[g-16]+(n(v,7)^n(v,18)^v>>>3)+_[g-7]+(n(m,17)^n(m,19)^m>>>10)|0);(c=[m+((n(y,2)^n(y,13)^n(y,22))+(y&c[1]^y&c[2]^c[1]&c[2]))|0].concat(c))[4]=c[4]+m|0}for(g=0;g<8;g++)c[g]=c[g]+f[g]|0}for(g=0;g<8;g++)for(i=3;i+1;i--){var E=c[g]>>8*i&255;o+=(E<16?0:"")+E.toString(16)}return o}(e):e}function ge(e){return String(e).trim().toLowerCase()}h=Object.freeze({OptIn:t,IabPlugin:function(){var e=this;e.name="iabPlugin",e.version="0.0.1";function r(e){return o[e]=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}}var a=w(),o={allConsentData:null};e.fetchConsentData=function(e){e=c(e.callback,e.timeout);t({callback:e})},e.isApproved=function(e){var i=e.callback,r=e.category,e=e.timeout;if(o.allConsentData)return i(null,l(r,o.allConsentData.vendorConsents,o.allConsentData.purposeConsents));e=c(function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.vendorConsents,t=t.purposeConsents;i(e,l(r,n,t))},e);t({category:r,callback:e})},e.onRegister=function(a){var o=Object.keys(ne);e.fetchConsentData({callback:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.purposeConsents,i=t.gdprApplies,r=t.vendorConsents;!e&&i&&r&&n&&(o.forEach(function(e){var t=l(e,r,n);a[t?"approve":"deny"](e,!0)}),a.complete())}})};var t=function(e){e=e.callback;if(o.allConsentData)return e(null,o.allConsentData);a.add("FETCH_CONSENT_DATA",e);var i={};n(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.purposeConsents,n=e.gdprApplies,e=e.vendorConsents;1<arguments.length&&arguments[1]&&r("allConsentData",i={purposeConsents:t,gdprApplies:n,vendorConsents:e}),s(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};1<arguments.length&&arguments[1]&&(i.consentString=e.consentData,r("allConsentData",i)),a.execute("FETCH_CONSENT_DATA",[null,o.allConsentData])})})},s=function(e){var t=u();t&&t("getConsentData",null,e)},n=function(e){var t,n=(t=ne,Object.keys(t).map(function(e){return t[e]}).filter(function(e,t,n){return n.indexOf(e)===t})),i=u();i&&i("getVendorConsents",n,e)},l=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return!!t[ne[e]]&&ie[e].every(function(e){return n[e]})}}}),g=h.OptIn;G.defineGlobalNamespace(),window.adobe.OptInCategories=g.Categories;g=function(i,n,e){function t(e){var i=e;return function(e){var t=e||f.location.href;try{var n=u._extractParamFromUri(t,i);if(n)return C.parsePipeDelimetedKeyValues(n)}catch(e){}}}function r(e){u._supplementalDataIDCurrent=(e=e||{}).supplementalDataIDCurrent||"",u._supplementalDataIDCurrentConsumed=e.supplementalDataIDCurrentConsumed||{},u._supplementalDataIDLast=e.supplementalDataIDLast||"",u._supplementalDataIDLastConsumed=e.supplementalDataIDLastConsumed||{}}function a(e){return(e=(e=e.reduce(function(e,t){var n=t[0],t=t[1];return e=null!=t&&t!==T?(e&&e+"|")+(n+"=")+encodeURIComponent(t):e},""))&&e+"|")+"TS="+C.getTimestampInSeconds()}function l(){return u.configs.isIabContext?d.optIn.isApproved(d.optIn.Categories.ECID)&&p:d.optIn.isApproved(d.optIn.Categories.ECID)}function o(e,t){if(p=!0,e)throw new Error("[IAB plugin] : "+e);t.gdprApplies&&(h=t.consentString),u.init(),c()}function s(){d.optIn.isApproved(d.optIn.Categories.ECID)&&(u.configs.isIabContext?d.optIn.execute({command:"iabPlugin.fetchConsentData",callback:o}):(u.init(),c()))}function c(){d.optIn.off("complete",s)}if(!e||e.split("").reverse().join("")!==i)throw new Error("Please use `Visitor.getInstance` to instantiate Visitor.");var u=this,d=window.adobe,h="",p=!1,_=!1;u.version="4.4.0";var f=x,g=f.Visitor;g.version=u.version,g.AuthState=Y,g.OptOut=q,f.s_c_in||(f.s_c_il=[],f.s_c_in=0),u._c="Visitor",u._il=f.s_c_il,u._in=f.s_c_in,u._il[u._in]=u,f.s_c_in++,u._instanceType="regular",u._log={requests:[]},u.marketingCloudOrgID=i,u.cookieName="AMCV_"+i,u.sessionCookieName="AMCVS_"+i,u.cookieDomain=B(),u.loadSSL=0<=f.location.protocol.toLowerCase().indexOf("https"),u.loadTimeout=3e4,u.CORSErrors=[],u.marketingCloudServer=u.audienceManagerServer="dpm.demdex.net",u.sdidParamExpiry=30;function v(e){return!Object.prototype[e]}var m=null,y="MCMID",S="MCAID",E="AAM",b="MCAAMB",T="NONE",A=H(u);u.FIELDS=K,u.cookieRead=function(e){return W.get(e)},u.cookieWrite=function(e,t,n){var i=u.cookieLifetime?(""+u.cookieLifetime).toUpperCase():"",r=!1;return u.configs&&u.configs.secureCookie&&"https:"===location.protocol&&(r=!0),W.set(e,""+t,{expires:n,domain:u.cookieDomain,cookieLifetime:i,secure:r})},u.resetState=function(e){e?u._mergeServerState(e):r()},u._isAllowedDone=!1,u._isAllowedFlag=!1,u.isAllowed=function(){return u._isAllowedDone||(u._isAllowedDone=!0,(u.cookieRead(u.cookieName)||u.cookieWrite(u.cookieName,"T",1))&&(u._isAllowedFlag=!0)),"T"===u.cookieRead(u.cookieName)&&u._helpers.removeCookie(u.cookieName),u._isAllowedFlag},u.setMarketingCloudVisitorID=function(e){u._setMarketingCloudFields(e)},u._use1stPartyMarketingCloudServer=!1,u.getMarketingCloudVisitorID=function(e,t){u.marketingCloudServer&&u.marketingCloudServer.indexOf(".demdex.net")<0&&(u._use1stPartyMarketingCloudServer=!0);var n=u._getAudienceManagerURLData("_setMarketingCloudFields"),i=n.url;return u._getRemoteField(y,i,e,t,n)},u.getVisitorValues=function(e,t){var r,a,o,s,l,n={MCMID:{fn:u.getMarketingCloudVisitorID,args:[!0],context:u},MCOPTOUT:{fn:u.isOptedOut,args:[void 0,!0],context:u},MCAID:{fn:u.getAnalyticsVisitorID,args:[!0],context:u},MCAAMLH:{fn:u.getAudienceManagerLocationHint,args:[!0],context:u},MCAAMB:{fn:u.getAudienceManagerBlob,args:[!0],context:u}};r=t&&t.length?G.pluck(n,t):n,a=e,o={},s=0,l=Object.keys(r).length,Object.keys(r).forEach(function(e){var t,n,i=r[e];i.fn&&((t=i.args||[]).unshift((n=e,function(e){o[n]=e,++s===l&&a(o)})),i.fn.apply(i.context||null,t))})},u._currentCustomerIDs={},u._customerIDsHashChanged=!1,u._newCustomerIDsHash="",u.setCustomerIDs=function(e,t){if(!u.isOptedOut()&&e){if(!G.isObject(e)||G.isObjectEmpty(e))return!1;var n,i,r;for(n in u._readVisitor(),e)if(v(n)&&(t=(i=e[n]).hasOwnProperty("hashType")?i.hashType:t,i))if("object"===N(i)){var a={};if(i.id){if(t){if(!(r=fe(ge(i.id),t)))return;i.id=r,a.hashType=t}a.id=i.id}null!=i.authState&&(a.authState=i.authState),u._currentCustomerIDs[n]=a}else if(t){if(!(r=fe(ge(i),t)))return;u._currentCustomerIDs[n]={id:r,hashType:t}}else u._currentCustomerIDs[n]={id:i};var o=u.getCustomerIDs(),s="",l=(l=u._getField("MCCIDH"))||0;for(n in o)v(n)&&(s+=(s?"|":"")+n+"|"+((i=o[n]).id?i.id:"")+(i.authState||""));u._newCustomerIDsHash=String(u._hash(s)),u._newCustomerIDsHash!==l&&(u._customerIDsHashChanged=!0,u._mapCustomerIDs(function(){u._customerIDsHashChanged=!1}))}},u.getCustomerIDs=function(){u._readVisitor();var e,t,n={};for(e in u._currentCustomerIDs)v(e)&&(t=u._currentCustomerIDs[e],n[e]||(n[e]={}),t.id&&(n[e].id=t.id),null!=t.authState?n[e].authState=t.authState:n[e].authState=g.AuthState.UNKNOWN,t.hashType&&(n[e].hashType=t.hashType));return n},u.setAnalyticsVisitorID=function(e){u._setAnalyticsFields(e)},u.getAnalyticsVisitorID=function(t,e,n){if(!C.isTrackingServerPopulated()&&!n)return u._callCallback(t,[""]),"";var i="";if((i=!n?u.getMarketingCloudVisitorID(function(e){u.getAnalyticsVisitorID(t,!0)}):i)||n){var r=n?u.marketingCloudServer:u.trackingServer,a="";u.loadSSL&&(n?u.marketingCloudServerSecure&&(r=u.marketingCloudServerSecure):u.trackingServerSecure&&(r=u.trackingServerSecure));var o,s={};return r&&(o="http"+(u.loadSSL?"s":"")+"://"+r+"/id",r="d_visid_ver="+u.version+"&mcorgid="+encodeURIComponent(u.marketingCloudOrgID)+(i?"&mid="+encodeURIComponent(i):"")+(u.idSyncDisable3rdPartySyncing||u.disableThirdPartyCookies?"&d_coppa=true":""),i=["s_c_il",u._in,"_set"+(n?"MarketingCloud":"Analytics")+"Fields"],a=o+"?"+r+"&callback=s_c_il%5B"+u._in+"%5D._set"+(n?"MarketingCloud":"Analytics")+"Fields",s.corsUrl=o+"?"+r,s.callback=i),s.url=a,u._getRemoteField(n?y:S,a,t,e,s)}return""},u.getAudienceManagerLocationHint=function(t,e){if(u.getMarketingCloudVisitorID(function(e){u.getAudienceManagerLocationHint(t,!0)})){var n=u._getField(S);if((n=!n&&C.isTrackingServerPopulated()?u.getAnalyticsVisitorID(function(e){u.getAudienceManagerLocationHint(t,!0)}):n)||!C.isTrackingServerPopulated()){var i=u._getAudienceManagerURLData(),n=i.url;return u._getRemoteField("MCAAMLH",n,t,e,i)}}return""},u.getLocationHint=u.getAudienceManagerLocationHint,u.getAudienceManagerBlob=function(t,e){if(u.getMarketingCloudVisitorID(function(e){u.getAudienceManagerBlob(t,!0)})){var n=u._getField(S);if((n=!n&&C.isTrackingServerPopulated()?u.getAnalyticsVisitorID(function(e){u.getAudienceManagerBlob(t,!0)}):n)||!C.isTrackingServerPopulated()){var i=u._getAudienceManagerURLData(),n=i.url;return u._customerIDsHashChanged&&u._setFieldExpire(b,-1),u._getRemoteField(b,n,t,e,i)}}return""},u._supplementalDataIDCurrent="",u._supplementalDataIDCurrentConsumed={},u._supplementalDataIDLast="",u._supplementalDataIDLastConsumed={};var w=!(u.getSupplementalDataID=function(e,t){u._supplementalDataIDCurrent||t||(u._supplementalDataIDCurrent=u._generateID(1));var n=u._supplementalDataIDCurrent;return u._supplementalDataIDLast&&!u._supplementalDataIDLastConsumed[e]?(n=u._supplementalDataIDLast,u._supplementalDataIDLastConsumed[e]=!0):n&&(u._supplementalDataIDCurrentConsumed[e]&&(u._supplementalDataIDLast=u._supplementalDataIDCurrent,u._supplementalDataIDLastConsumed=u._supplementalDataIDCurrentConsumed,u._supplementalDataIDCurrent=n=t?"":u._generateID(1),u._supplementalDataIDCurrentConsumed={}),n&&(u._supplementalDataIDCurrentConsumed[e]=!0)),n});u._liberatedOptOut=null,u.getOptOut=function(e,t){var n=u._getAudienceManagerURLData("_setMarketingCloudFields"),i=n.url;if(l())return u._getRemoteField("MCOPTOUT",i,e,t,n);if(u._registerCallback("liberatedOptOut",e),null!==u._liberatedOptOut)return u._callAllCallbacks("liberatedOptOut",[u._liberatedOptOut]),w=!1,u._liberatedOptOut;if(w)return null;w=!0;e="liberatedGetOptOut";return n.corsUrl=n.corsUrl.replace(/dpm\.demdex\.net\/id\?/,"dpm.demdex.net/optOutStatus?"),n.callback=[e],x[e]=function(e){var t;e===Object(e)&&(t=(e=G.parseOptOut(e,t,T)).optOut,e=1e3*e.d_ottl,u._liberatedOptOut=t,setTimeout(function(){u._liberatedOptOut=null},e)),u._callAllCallbacks("liberatedOptOut",[t]),w=!1},A.fireCORS(n),null},u.isOptedOut=function(t,n,e){n=n||g.OptOut.GLOBAL;e=u.getOptOut(function(e){e=e===g.OptOut.GLOBAL||0<=e.indexOf(n);u._callCallback(t,[e])},e);return e?e===g.OptOut.GLOBAL||0<=e.indexOf(n):null},u._fields=null,u._fieldsExpired=null,u._hash=function(e){var t,n=0;if(e)for(t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n&=n;return n},u._generateID=j,u._generateLocalMID=function(){var e=u._generateID(0);return R.isClientSideMarketingCloudVisitorID=!0,e},u._callbackList=null,u._callCallback=function(e,t){try{"function"==typeof e?e.apply(f,t):e[1].apply(e[0],t)}catch(e){}},u._registerCallback=function(e,t){t&&(null==u._callbackList&&(u._callbackList={}),null==u._callbackList[e]&&(u._callbackList[e]=[]),u._callbackList[e].push(t))},u._callAllCallbacks=function(e,t){if(null!=u._callbackList){var n=u._callbackList[e];if(n)for(;0<n.length;)u._callCallback(n.shift(),t)}},u._addQuerystringParam=function(e,t,n,i){var r=encodeURIComponent(t)+"="+encodeURIComponent(n),t=C.parseHash(e),n=C.hashlessUrl(e);if(-1===n.indexOf("?"))return n+"?"+r+t;e=n.split("?"),n=e[0]+"?",e=e[1];return n+C.addQueryParamAtLocation(e,r,i)+t},u._extractParamFromUri=function(e,t){e=new RegExp("[\\?&#]"+t+"=([^&#]*)").exec(e);if(e&&e.length)return decodeURIComponent(e[1])},u._parseAdobeMcFromUrl=t(z.ADOBE_MC),u._parseAdobeMcSdidFromUrl=t(z.ADOBE_MC_SDID),u._attemptToPopulateSdidFromUrl=function(e){var t=u._parseAdobeMcSdidFromUrl(e),e=1e9;t&&t.TS&&(e=C.getTimestampInSeconds()-t.TS),t&&t.SDID&&t.MCORGID===i&&e<u.sdidParamExpiry&&(u._supplementalDataIDCurrent=t.SDID,u._supplementalDataIDCurrentConsumed.SDID_URL_PARAM=!0)},u._attemptToPopulateIdsFromUrl=function(){var e,t=u._parseAdobeMcFromUrl();function n(e,t,n){e&&e.match(z.VALID_VISITOR_ID_REGEX)&&(n===y&&(_=!0),t(e))}t&&t.TS&&(e=C.getTimestampInSeconds()-t.TS,Math.floor(e/60)>z.ADOBE_MC_TTL_IN_MIN||t.MCORGID!==i||(n((t=t)[y],u.setMarketingCloudVisitorID,y),u._setFieldExpire(b,-1),n(t[S],u.setAnalyticsVisitorID)))},u._mergeServerState=function(e){if(e)try{var t;i=e,(e=C.isObject(i)?i:JSON.parse(i))[u.marketingCloudOrgID]&&(t=e[u.marketingCloudOrgID],n=t.customerIDs,C.isObject(n)&&u.setCustomerIDs(n),r(t.sdid))}catch(e){throw new Error("`serverState` has an invalid format.")}var n,i},u._timeout=null,u._loadData=function(e,t,n,i){t=u._addQuerystringParam(t,"d_fieldgroup",e,1),i.url=u._addQuerystringParam(i.url,"d_fieldgroup",e,1),i.corsUrl=u._addQuerystringParam(i.corsUrl,"d_fieldgroup",e,1),R.fieldGroupObj[e]=!0,i===Object(i)&&i.corsUrl&&"XMLHttpRequest"===A.corsMetadata.corsType&&A.fireCORS(i,n,e)},u._clearTimeout=function(e){null!=u._timeout&&u._timeout[e]&&(clearTimeout(u._timeout[e]),u._timeout[e]=0)},u._settingsDigest=0,u._getSettingsDigest=function(){var e;return u._settingsDigest||(e=u.version,u.audienceManagerServer&&(e+="|"+u.audienceManagerServer),u.audienceManagerServerSecure&&(e+="|"+u.audienceManagerServerSecure),u._settingsDigest=u._hash(e)),u._settingsDigest},u._readVisitorDone=!1,u._readVisitor=function(){if(!u._readVisitorDone){u._readVisitorDone=!0;var e,t,n,i,r,a=u._getSettingsDigest(),o=!1,s=u.cookieRead(u.cookieName),l=new Date;if(s||_||u.discardTrackingServerECID||(s=u.cookieRead(z.FIRST_PARTY_SERVER_COOKIE)),null==u._fields&&(u._fields={}),s&&"T"!==s)for((s=s.split("|"))[0].match(/^[\-0-9]+$/)&&(parseInt(s[0],10)!==a&&(o=!0),s.shift()),s.length%2==1&&s.pop(),e=0;e<s.length;e+=2)t=(r=s[e].split("-"))[0],n=s[e+1],r=1<r.length?(i=parseInt(r[1],10),0<r[1].indexOf("s")):(i=0,!1),o&&("MCCIDH"===t&&(n=""),0<i&&(i=l.getTime()/1e3-60)),t&&n&&(u._setField(t,n,1),0<i&&(u._fields["expire"+t]=i+(r?"s":""),(l.getTime()>=1e3*i||r&&!u.cookieRead(u.sessionCookieName))&&(u._fieldsExpired||(u._fieldsExpired={}),u._fieldsExpired[t]=!0)));!u._getField(S)&&C.isTrackingServerPopulated()&&(s=u.cookieRead("s_vi"))&&1<(s=s.split("|")).length&&0<=s[0].indexOf("v1")&&((n=0<=(e=(n=s[1]).indexOf("["))?n.substring(0,e):n)&&n.match(z.VALID_VISITOR_ID_REGEX)&&u._setField(S,n))}},u._appendVersionTo=function(e){var t,n="vVersion|"+u.version,i=e?u._getCookieVersion(e):null;return i?(t=u.version,0!==L(i,t)&&(e=e.replace(z.VERSION_REGEX,n))):e+=(e?"|":"")+n,e},u._writeVisitor=function(){var e,t,n=u._getSettingsDigest();for(e in u._fields)v(e)&&u._fields[e]&&"expire"!==e.substring(0,6)&&(t=u._fields[e],n+=(n?"|":"")+e+(u._fields["expire"+e]?"-"+u._fields["expire"+e]:"")+"|"+t);n=u._appendVersionTo(n),u.cookieWrite(u.cookieName,n,1)},u._getField=function(e,t){return null==u._fields||!t&&u._fieldsExpired&&u._fieldsExpired[e]?null:u._fields[e]},u._setField=function(e,t,n){null==u._fields&&(u._fields={}),u._fields[e]=t,n||u._writeVisitor()},u._getFieldList=function(e,t){t=u._getField(e,t);return t?t.split("*"):null},u._setFieldList=function(e,t,n){u._setField(e,t?t.join("*"):"",n)},u._getFieldMap=function(e,t){var n=u._getFieldList(e,t);if(n){for(var i={},r=0;r<n.length;r+=2)i[n[r]]=n[r+1];return i}return null},u._setFieldMap=function(e,t,n){var i,r=null;if(t)for(i in r=[],t)v(i)&&(r.push(i),r.push(t[i]));u._setFieldList(e,r,n)},u._setFieldExpire=function(e,t,n){var i=new Date;i.setTime(i.getTime()+1e3*t),null==u._fields&&(u._fields={}),u._fields["expire"+e]=Math.floor(i.getTime()/1e3)+(n?"s":""),t<0?(u._fieldsExpired||(u._fieldsExpired={}),u._fieldsExpired[e]=!0):u._fieldsExpired&&(u._fieldsExpired[e]=!1),n&&(u.cookieRead(u.sessionCookieName)||u.cookieWrite(u.sessionCookieName,"1"))},u._findVisitorID=function(e){return e&&((e=(e="object"===N(e)?e.d_mid||e.visitorID||e.id||e.uuid||""+e:e)&&"NOTARGET"===(e=e.toUpperCase())?T:e)&&(e===T||e.match(z.VALID_VISITOR_ID_REGEX))||(e="")),e},u._setFields=function(e,t){if(u._clearTimeout(e),null!=u._loading&&(u._loading[e]=!1),R.fieldGroupObj[e]&&R.setState(e,!1),"MC"===e){!0!==R.isClientSideMarketingCloudVisitorID&&(R.isClientSideMarketingCloudVisitorID=!1);var n=u._getField(y);if(!n||u.overwriteCrossDomainMCIDAndAID){if(!(n="object"===N(t)&&t.mid?t.mid:u._findVisitorID(t))){if(u._use1stPartyMarketingCloudServer&&!u.tried1stPartyMarketingCloudServer)return u.tried1stPartyMarketingCloudServer=!0,void u.getAnalyticsVisitorID(null,!1,!0);n=u._generateLocalMID()}u._setField(y,n)}n&&n!==T||(n=""),"object"===N(t)&&((t.d_region||t.dcs_region||t.d_blob||t.blob)&&u._setFields(E,t),u._use1stPartyMarketingCloudServer&&t.mid&&u._setFields("A",{id:t.id})),u._callAllCallbacks(y,[n])}var i,r,a;e===E&&"object"===N(t)&&(i=604800,null!=t.id_sync_ttl&&t.id_sync_ttl&&(i=parseInt(t.id_sync_ttl,10)),n=M.getRegionAndCheckIfChanged(t,i),u._callAllCallbacks("MCAAMLH",[n]),n=u._getField(b),(t.d_blob||t.blob)&&((n=t.d_blob)||(n=t.blob),u._setFieldExpire(b,i),u._setField(b,n)),u._callAllCallbacks(b,[n=n||""]),!t.error_msg&&u._newCustomerIDsHash&&u._setField("MCCIDH",u._newCustomerIDsHash)),"A"===e&&((r=u._getField(S))&&!u.overwriteCrossDomainMCIDAndAID||((r=u._findVisitorID(t))?r!==T&&u._setFieldExpire(b,-1):r=T,u._setField(S,r)),u._callAllCallbacks(S,[r=!r||r===T?"":r])),u.idSyncDisableSyncs||u.disableIdSyncs?M.idCallNotProcesssed=!0:(M.idCallNotProcesssed=!1,(r={}).ibs=t.ibs,r.subdomain=t.subdomain,M.processIDCallData(r)),t===Object(t)&&(l()&&u.isAllowed()&&(a=u._getField("MCOPTOUT")),a=(t=G.parseOptOut(t,a,T)).optOut,t=t.d_ottl,u._setFieldExpire("MCOPTOUT",t,!0),u._setField("MCOPTOUT",a),u._callAllCallbacks("MCOPTOUT",[a]))},u._loading=null,u._getRemoteField=function(t,e,n,i,r){var a,o="",s=C.isFirstPartyAnalyticsVisitorIDCall(t);if(l()&&u.isAllowed())if(u._readVisitor(),!(!(o=u._getField(t,!0==={MCAAMLH:!0,MCAAMB:!0}[t]))||u._fieldsExpired&&u._fieldsExpired[t])||u.disableThirdPartyCalls&&!s)o||(t===y?(u._registerCallback(t,n),o=u._generateLocalMID(),u.setMarketingCloudVisitorID(o)):t===S?(u._registerCallback(t,n),u.setAnalyticsVisitorID(o="")):i=!(o=""));else if(t===y||"MCOPTOUT"===t?a="MC":"MCAAMLH"===t||t===b?a=E:t===S&&(a="A"),a)return!e||null!=u._loading&&u._loading[a]||(null==u._loading&&(u._loading={}),u._loading[a]=!0,u._loadData(a,e,function(e){u._getField(t)||(e&&R.setState(a,!0),e="",t===y?e=u._generateLocalMID():a===E&&(e={error_msg:"timeout"}),u._setFields(a,e))},r)),u._registerCallback(t,n),o||(e||u._setFields(a,{id:T}),"");return t!==y&&t!==S||o!==T||(i=!(o="")),n&&i&&u._callCallback(n,[o]),o},u._setMarketingCloudFields=function(e){u._readVisitor(),u._setFields("MC",e)},u._mapCustomerIDs=function(e){u.getAudienceManagerBlob(e,!0)},u._setAnalyticsFields=function(e){u._readVisitor(),u._setFields("A",e)},u._setAudienceManagerFields=function(e){u._readVisitor(),u._setFields(E,e)},u._getAudienceManagerURLData=function(e){var t=u.audienceManagerServer,n="",i=u._getField(y),r=u._getField(b,!0),a=u._getField(S),o=a&&a!==T?"&d_cid_ic=AVID%01"+encodeURIComponent(a):"";if(t=u.loadSSL&&u.audienceManagerServerSecure?u.audienceManagerServerSecure:t){var s,l,c=u.getCustomerIDs();if(c)for(s in c)v(s)&&(l=c[s],o+="&d_cid_ic="+encodeURIComponent(s)+"%01"+encodeURIComponent(l.id||"")+(l.authState?"%01"+l.authState:""));e=e||"_setAudienceManagerFields";t="http"+(u.loadSSL?"s":"")+"://"+t+"/id",i="d_visid_ver="+u.version+(h&&-1!==t.indexOf("demdex.net")?"&gdpr=1&gdpr_force=1&gdpr_consent="+h:"")+"&d_rtbd=json&d_ver=2"+(!i&&u._use1stPartyMarketingCloudServer?"&d_verify=1":"")+"&d_orgid="+encodeURIComponent(u.marketingCloudOrgID)+"&d_nsid="+(u.idSyncContainerID||0)+(i?"&d_mid="+encodeURIComponent(i):"")+(u.idSyncDisable3rdPartySyncing||u.disableThirdPartyCookies?"&d_coppa=true":"")+(!0===m?"&d_coop_safe=1":!1===m?"&d_coop_unsafe=1":"")+(r?"&d_blob="+encodeURIComponent(r):"")+o,r=["s_c_il",u._in,e];return{url:n=t+"?"+i+"&d_cb=s_c_il%5B"+u._in+"%5D."+e,corsUrl:t+"?"+i,callback:r}}return{url:n}},u.appendVisitorIDsTo=function(e){try{var t=[[y,u._getField(y)],[S,u._getField(S)],["MCORGID",u.marketingCloudOrgID]];return u._addQuerystringParam(e,z.ADOBE_MC,a(t))}catch(t){return e}},u.appendSupplementalDataIDTo=function(e,t){if(!(t=t||u.getSupplementalDataID(C.generateRandomString(),!0)))return e;try{var n=a([["SDID",t],["MCORGID",u.marketingCloudOrgID]]);return u._addQuerystringParam(e,z.ADOBE_MC_SDID,n)}catch(t){return e}};var C={parseHash:function(e){var t=e.indexOf("#");return 0<t?e.substr(t):""},hashlessUrl:function(e){var t=e.indexOf("#");return 0<t?e.substr(0,t):e},addQueryParamAtLocation:function(e,t,n){e=e.split("&");return n=null!=n?n:e.length,e.splice(n,0,t),e.join("&")},isFirstPartyAnalyticsVisitorIDCall:function(e,t,n){return e===S&&(t=t||u.trackingServer,n=n||u.trackingServerSecure,!("string"!=typeof(t=u.loadSSL?n:t)||!t.length)&&t.indexOf("2o7.net")<0&&t.indexOf("omtrdc.net")<0)},isObject:function(e){return Boolean(e&&e===Object(e))},removeCookie:function(e){W.remove(e,{domain:u.cookieDomain})},isTrackingServerPopulated:function(){return!!u.trackingServer||!!u.trackingServerSecure},getTimestampInSeconds:function(){return Math.round((new Date).getTime()/1e3)},parsePipeDelimetedKeyValues:function(e){return e.split("|").reduce(function(e,t){t=t.split("=");return e[t[0]]=decodeURIComponent(t[1]),e},{})},generateRandomString:function(e){e=e||5;for(var t="",n="abcdefghijklmnopqrstuvwxyz0123456789";e--;)t+=n[Math.floor(Math.random()*n.length)];return t},normalizeBoolean:function(e){return"true"===e||"false"!==e&&e},parseBoolean:function(e){return"true"===e||"false"!==e&&null},replaceMethodsWithFunction:function(e,t){for(var n in e)e.hasOwnProperty(n)&&"function"==typeof e[n]&&(e[n]=t);return e}};u._helpers=C;var I,P,k,M=(I=u,P=g,k=x.document,{THROTTLE_START:3e4,MAX_SYNCS_LENGTH:649,throttleTimerSet:!1,id:null,onPagePixels:[],iframeHost:null,getIframeHost:function(e){if("string"==typeof e){e=e.split("/");return e[0]+"//"+e[2]}},subdomain:null,url:null,getUrl:function(){var e="http://fast.",t="?d_nsid="+I.idSyncContainerID+"#"+encodeURIComponent(k.location.origin);return this.subdomain||(this.subdomain="nosubdomainreturned"),t=(e=I.loadSSL?I.idSyncSSLUseAkamai?"https://fast.":"https://":e)+this.subdomain+".demdex.net/dest5.html"+t,this.iframeHost=this.getIframeHost(t),this.id="destination_publishing_iframe_"+this.subdomain+"_"+I.idSyncContainerID,t},checkDPIframeSrc:function(){var e="?d_nsid="+I.idSyncContainerID+"#"+encodeURIComponent(k.location.href);"string"==typeof I.dpIframeSrc&&I.dpIframeSrc.length&&(this.id="destination_publishing_iframe_"+(I._subdomain||this.subdomain||(new Date).getTime())+"_"+I.idSyncContainerID,this.iframeHost=this.getIframeHost(I.dpIframeSrc),this.url=I.dpIframeSrc+e)},idCallNotProcesssed:null,doAttachIframe:!1,startedAttachingIframe:!1,iframeHasLoaded:null,iframeIdChanged:null,newIframeCreated:null,originalIframeHasLoadedAlready:null,iframeLoadedCallbacks:[],regionChanged:!1,timesRegionChanged:0,sendingMessages:!1,messages:[],messagesPosted:[],messagesReceived:[],messageSendingInterval:z.POST_MESSAGE_ENABLED?null:100,onPageDestinationsFired:[],jsonForComparison:[],jsonDuplicates:[],jsonWaiting:[],jsonProcessed:[],canSetThirdPartyCookies:!0,receivedThirdPartyCookiesNotification:!1,readyToAttachIframePreliminary:function(){return!(I.idSyncDisableSyncs||I.disableIdSyncs||I.idSyncDisable3rdPartySyncing||I.disableThirdPartyCookies||I.disableThirdPartyCalls)},readyToAttachIframe:function(){return this.readyToAttachIframePreliminary()&&(this.doAttachIframe||I._doAttachIframe)&&(this.subdomain&&"nosubdomainreturned"!==this.subdomain||I._subdomain)&&this.url&&!this.startedAttachingIframe},attachIframe:function(){function e(){(i=k.createElement("iframe")).sandbox="allow-scripts allow-same-origin",i.title="Adobe ID Syncing iFrame",i.id=n.id,i.name=n.id+"_name",i.style.cssText="display: none; width: 0; height: 0;",i.src=n.url,n.newIframeCreated=!0,t(),k.body.appendChild(i)}function t(e){i.addEventListener("load",function(){i.className="aamIframeLoaded",n.iframeHasLoaded=!0,n.fireIframeLoadedCallbacks(e),n.requestToProcess()})}this.startedAttachingIframe=!0;var n=this,i=k.getElementById(this.id);i?"IFRAME"!==i.nodeName?(this.id+="_2",this.iframeIdChanged=!0,e()):(this.newIframeCreated=!1,"aamIframeLoaded"!==i.className?(this.originalIframeHasLoadedAlready=!1,t("The destination publishing iframe already exists from a different library, but hadn't loaded yet.")):(this.originalIframeHasLoadedAlready=!0,this.iframeHasLoaded=!0,this.iframe=i,this.fireIframeLoadedCallbacks("The destination publishing iframe already exists from a different library, and had loaded alresady."),this.requestToProcess())):e(),this.iframe=i},fireIframeLoadedCallbacks:function(t){this.iframeLoadedCallbacks.forEach(function(e){"function"==typeof e&&e({message:t||"The destination publishing iframe was attached and loaded successfully."})}),this.iframeLoadedCallbacks=[]},requestToProcess:function(e){function t(){r.jsonForComparison.push(e),r.jsonWaiting.push(e),r.processSyncOnPage(e)}var n,i,r=this;if(e===Object(e)&&e.ibs)if(n=JSON.stringify(e.ibs||[]),this.jsonForComparison.length){for(var a,o=!1,s=0,l=this.jsonForComparison.length;s<l;s++)if(a=this.jsonForComparison[s],n===JSON.stringify(a.ibs||[])){o=!0;break}o?this.jsonDuplicates.push(e):t()}else t();(this.receivedThirdPartyCookiesNotification||!z.POST_MESSAGE_ENABLED||this.iframeHasLoaded)&&this.jsonWaiting.length&&(i=this.jsonWaiting.shift(),this.process(i),this.requestToProcess()),I.idSyncDisableSyncs||I.disableIdSyncs||!this.iframeHasLoaded||!this.messages.length||this.sendingMessages||(this.throttleTimerSet||(this.throttleTimerSet=!0,setTimeout(function(){r.messageSendingInterval=z.POST_MESSAGE_ENABLED?null:150},this.THROTTLE_START)),this.sendingMessages=!0,this.sendMessages())},getRegionAndCheckIfChanged:function(e,t){var n=I._getField("MCAAMLH"),e=e.d_region||e.dcs_region;return n?e&&(I._setFieldExpire("MCAAMLH",t),I._setField("MCAAMLH",e),parseInt(n,10)!==e&&(this.regionChanged=!0,this.timesRegionChanged++,I._setField("MCSYNCSOP",""),I._setField("MCSYNCS",""),n=e)):(n=e)&&(I._setFieldExpire("MCAAMLH",t),I._setField("MCAAMLH",n)),n=n||""},processSyncOnPage:function(e){var t,n,i,r;if((t=e.ibs)&&t instanceof Array&&(n=t.length))for(i=0;i<n;i++)(r=t[i]).syncOnPage&&this.checkFirstPartyCookie(r,"","syncOnPage")},process:function(e){var t,n,i,r,a,o=encodeURIComponent,s=!1;if((t=e.ibs)&&t instanceof Array&&(n=t.length))for(s=!0,i=0;i<n;i++)r=t[i],a=[o("ibs"),o(r.id||""),o(r.tag||""),G.encodeAndBuildRequest(r.url||[],","),o(r.ttl||""),"","",r.fireURLSync?"true":"false"],r.syncOnPage||(this.canSetThirdPartyCookies?this.addMessage(a.join("|")):r.fireURLSync&&this.checkFirstPartyCookie(r,a.join("|")));s&&this.jsonProcessed.push(e)},checkFirstPartyCookie:function(e,t,n){var i="syncOnPage"===n,r=i?"MCSYNCSOP":"MCSYNCS";I._readVisitor();var a,o,s,l=I._getField(r),n=Math.ceil((new Date).getTime()/z.MILLIS_PER_DAY);l?(a=l.split("*"),o=(l=this.pruneSyncData(a,e.id,n)).dataPresent,s=l.dataValid,o&&s||this.fireSync(i,e,t,a,r,n)):this.fireSync(i,e,t,a=[],r,n)},pruneSyncData:function(e,t,n){for(var i,r,a=!1,o=!1,s=0;s<e.length;s++)i=e[s],r=parseInt(i.split("-")[1],10),i.match("^"+t+"-")?(a=!0,n<r?o=!0:(e.splice(s,1),s--)):r<=n&&(e.splice(s,1),s--);return{dataPresent:a,dataValid:o}},manageSyncsSize:function(e){if(e.join("*").length>this.MAX_SYNCS_LENGTH)for(e.sort(function(e,t){return parseInt(e.split("-")[1],10)-parseInt(t.split("-")[1],10)});e.join("*").length>this.MAX_SYNCS_LENGTH;)e.shift()},fireSync:function(e,t,n,i,u,r){var d=this;if(e){if("img"===t.tag)for(var a=t.url,o=I.loadSSL?"https:":"http:",s=0,l=a.length;s<l;s++){var c=a[s],h=/^\/\//.test(c),p=new Image;p.addEventListener("load",function(o,s,l,c){return function(){d.onPagePixels[o]=null,I._readVisitor();var e,t,n,i,r=I._getField(u),a=[];if(r)for(t=0,n=(e=r.split("*")).length;t<n;t++)(i=e[t]).match("^"+s.id+"-")||a.push(i);d.setSyncTrackingData(a,s,l,c)}}(this.onPagePixels.length,t,u,r)),p.src=(h?o:"")+c,this.onPagePixels.push(p)}}else this.addMessage(n),this.setSyncTrackingData(i,t,u,r)},addMessage:function(e){var t=encodeURIComponent(I._enableErrorReporting?"---destpub-debug---":"---destpub---");this.messages.push((z.POST_MESSAGE_ENABLED?"":t)+e)},setSyncTrackingData:function(e,t,n,i){e.push(t.id+"-"+(i+Math.ceil(t.ttl/60/24))),this.manageSyncsSize(e),I._setField(n,e.join("*"))},sendMessages:function(){var e,t=this,n="",i=encodeURIComponent;this.regionChanged&&(n=i("---destpub-clear-dextp---"),this.regionChanged=!1),this.messages.length?z.POST_MESSAGE_ENABLED?(e=n+i("---destpub-combined---")+this.messages.join("%01"),this.postMessage(e),this.messages=[],this.sendingMessages=!1):(e=this.messages.shift(),this.postMessage(n+e),setTimeout(function(){t.sendMessages()},this.messageSendingInterval)):this.sendingMessages=!1},postMessage:function(e){var t,n,i;t=e,n=this.url,i=this.iframe.contentWindow,n&&(Q?i.postMessage(t,n.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):n&&(i.location=n.replace(/#.*$/,"")+"#"+ +new Date+"1&"+t)),this.messagesPosted.push(e)},receiveMessage:function(e){var t=/^---destpub-to-parent---/;"string"==typeof e&&t.test(e)&&("canSetThirdPartyCookies"===(t=e.replace(t,"").split("|"))[0]&&(this.canSetThirdPartyCookies="true"===t[1],this.receivedThirdPartyCookiesNotification=!0,this.requestToProcess()),this.messagesReceived.push(e))},processIDCallData:function(e){(null==this.url||e.subdomain&&"nosubdomainreturned"===this.subdomain)&&("string"==typeof I._subdomain&&I._subdomain.length?this.subdomain=I._subdomain:this.subdomain=e.subdomain||"",this.url=this.getUrl()),e.ibs instanceof Array&&e.ibs.length&&(this.doAttachIframe=!0),this.readyToAttachIframe()&&(I.idSyncAttachIframeOnWindowLoad?!P.windowLoaded&&"complete"!==k.readyState&&"loaded"!==k.readyState||this.attachIframe():this.attachIframeASAP()),"function"==typeof I.idSyncIDCallResult?I.idSyncIDCallResult(e):this.requestToProcess(e),"function"==typeof I.idSyncAfterIDCallResult&&I.idSyncAfterIDCallResult(e)},canMakeSyncIDCall:function(e,t){return I._forceSyncIDCall||!e||t-e>z.DAYS_BETWEEN_SYNC_ID_CALLS},attachIframeASAP:function(){var t=this;!function e(){t.startedAttachingIframe||(k.body?t.attachIframe():setTimeout(e,30))}()}});u._destinationPublishing=M,u.timeoutMetricsLog=[];var D,O,R={isClientSideMarketingCloudVisitorID:null,MCIDCallTimedOut:null,AnalyticsIDCallTimedOut:null,AAMIDCallTimedOut:null,fieldGroupObj:{},setState:function(e,t){switch(e){case"MC":!1===t?!0!==this.MCIDCallTimedOut&&(this.MCIDCallTimedOut=!1):this.MCIDCallTimedOut=t;break;case"A":!1===t?!0!==this.AnalyticsIDCallTimedOut&&(this.AnalyticsIDCallTimedOut=!1):this.AnalyticsIDCallTimedOut=t;break;case E:!1===t?!0!==this.AAMIDCallTimedOut&&(this.AAMIDCallTimedOut=!1):this.AAMIDCallTimedOut=t}}};u.isClientSideMarketingCloudVisitorID=function(){return R.isClientSideMarketingCloudVisitorID},u.MCIDCallTimedOut=function(){return R.MCIDCallTimedOut},u.AnalyticsIDCallTimedOut=function(){return R.AnalyticsIDCallTimedOut},u.AAMIDCallTimedOut=function(){return R.AAMIDCallTimedOut},u.idSyncGetOnPageSyncInfo=function(){return u._readVisitor(),u._getField("MCSYNCSOP")},u.idSyncByURL=function(e){if(!u.isOptedOut()){var t=(a=(i=e||{}).minutesToLive,r="",(u.idSyncDisableSyncs||u.disableIdSyncs)&&(r=r||"Error: id syncs have been disabled"),"string"==typeof i.dpid&&i.dpid.length||(r=r||"Error: config.dpid is empty"),"string"==typeof i.url&&i.url.length||(r=r||"Error: config.url is empty"),void 0===a?a=20160:(a=parseInt(a,10),(isNaN(a)||a<=0)&&(r=r||"Error: config.minutesToLive needs to be a positive number")),{error:r,ttl:a});if(t.error)return t.error;var n=e.url,i=encodeURIComponent,r=M,n=n.replace(/^https:/,"").replace(/^http:/,""),a=G.encodeAndBuildRequest(["",e.dpid,e.dpuuid||""],","),a=["ibs",i(e.dpid),"img",i(n),t.ttl,"",a];return r.addMessage(a.join("|")),r.requestToProcess(),"Successfully queued"}var i,r},u.idSyncByDataSource=function(e){if(!u.isOptedOut())return e===Object(e)&&"string"==typeof e.dpuuid&&e.dpuuid.length?(e.url="//dpm.demdex.net/ibs:dpid="+e.dpid+"&dpuuid="+e.dpuuid,u.idSyncByURL(e)):"Error: config or config.dpuuid is empty"},O=M,(D=u).publishDestinations=function(e){var t=arguments[1],n=arguments[2];try{n="function"==typeof n?n:e.callback}catch(e){n=function(){}}var i=O;if(i.readyToAttachIframePreliminary()){if("string"==typeof e){if(!e.length)return void n({error:"subdomain is not a populated string."});if(!(t instanceof Array&&t.length))return void n({error:"messages is not a populated array."});var r=!1;if(t.forEach(function(e){"string"==typeof e&&e.length&&(i.addMessage(e),r=!0)}),!r)return void n({error:"None of the messages are populated strings."})}else{if(!G.isObject(e))return void n({error:"Invalid parameters passed."});t=e;if("string"!=typeof(e=t.subdomain)||!e.length)return void n({error:"config.subdomain is not a populated string."});t=t.urlDestinations;if(!(t instanceof Array&&t.length))return void n({error:"config.urlDestinations is not a populated array."});var a=[];t.forEach(function(e){G.isObject(e)&&(e.hideReferrer?e.message&&i.addMessage(e.message):a.push(e))}),function n(){a.length&&setTimeout(function(){var e=new Image,t=a.shift();e.src=t.url,i.onPageDestinationsFired.push(t),n()},100)}()}i.iframe?(n({message:"The destination publishing iframe is already attached and loaded."}),i.requestToProcess()):!D.subdomain&&D._getField("MCMID")?(i.subdomain=e,i.doAttachIframe=!0,i.url=i.getUrl(),i.readyToAttachIframe()?(i.iframeLoadedCallbacks.push(function(e){n({message:"Attempted to attach and load the destination publishing iframe through this API call. Result: "+(e.message||"no result")})}),i.attachIframe()):n({error:"Encountered a problem in attempting to attach and load the destination publishing iframe through this API call."})):i.iframeLoadedCallbacks.push(function(e){n({message:"Attempted to attach and load the destination publishing iframe through normal Visitor API processing. Result: "+(e.message||"no result")})})}else n({error:"The destination publishing iframe is disabled in the Visitor library."})},u._getCookieVersion=function(e){e=e||u.cookieRead(u.cookieName);e=z.VERSION_REGEX.exec(e);return e&&1<e.length?e[1]:null},u._resetAmcvCookie=function(e){var t=u._getCookieVersion();t&&!(L(t,e)<0)||C.removeCookie(u.cookieName)},u.setAsCoopSafe=function(){m=!0},u.setAsCoopUnsafe=function(){m=!1},function(){if(u.configs=Object.create(null),C.isObject(n))for(var e in n)v(e)&&(u[e]=n[e],u.configs[e]=n[e])}(),[["getMarketingCloudVisitorID"],["setCustomerIDs",void 0],["getAnalyticsVisitorID"],["getAudienceManagerLocationHint"],["getLocationHint"],["getAudienceManagerBlob"]].forEach(function(e){var t=e[0],n=2===e.length?e[1]:"",i=u[t];u[t]=function(e){return l()&&u.isAllowed()?i.apply(u,arguments):("function"==typeof e&&u._callCallback(e,[n]),n)}}),u.init=function(){if(!(!u.configs.doesOptInApply||d.optIn.isComplete&&l()))return d.optIn.fetchPermissions(s,!0);var e,t;C.isObject(n)?(u.idSyncContainerID=u.idSyncContainerID||0,m="boolean"==typeof u.isCoopSafe?u.isCoopSafe:C.parseBoolean(u.isCoopSafe),u.resetBeforeVersion&&u._resetAmcvCookie(u.resetBeforeVersion),u._attemptToPopulateIdsFromUrl(),u._attemptToPopulateSdidFromUrl(),u._readVisitor(),e=u._getField("MCIDTS"),t=Math.ceil((new Date).getTime()/z.MILLIS_PER_DAY),u.idSyncDisableSyncs||u.disableIdSyncs||!M.canMakeSyncIDCall(e,t)||(u._setFieldExpire(b,-1),u._setField("MCIDTS",t)),u.getMarketingCloudVisitorID(),u.getAudienceManagerLocationHint(),u.getAudienceManagerBlob(),u._mergeServerState(u.serverState)):(u._attemptToPopulateIdsFromUrl(),u._attemptToPopulateSdidFromUrl()),function(){if(!u.idSyncDisableSyncs&&!u.disableIdSyncs){M.checkDPIframeSrc(),f.addEventListener("load",function(){var e;g.windowLoaded=!0,(e=M).readyToAttachIframe()&&e.attachIframe()});try{U(function(e){M.receiveMessage(e.data)},M.iframeHost)}catch(e){}}}(),u.whitelistIframeDomains&&z.POST_MESSAGE_ENABLED&&(u.whitelistIframeDomains=u.whitelistIframeDomains instanceof Array?u.whitelistIframeDomains:[u.whitelistIframeDomains],u.whitelistIframeDomains.forEach(function(e){var t=new F(i,e),t=V(u,t);U(t,e)}))}};g.config=J;var ve=x.Visitor=g,me=h.OptIn,ye=h.IabPlugin;function Se(){ve.windowLoaded=!0}ve.getInstance=function(i,e){if(!i)throw new Error("Visitor requires Adobe Marketing Cloud Org ID.");i.indexOf("@")<0&&(i+="@AdobeOrg");var t=function(){var e=x.s_c_il;if(e)for(var t=0;t<e.length;t++){var n=e[t];if(n&&"Visitor"===n._c&&n.marketingCloudOrgID===i)return n}}();if(t)return t;var n,r=function(i){if(G.isObject(i))return Object.keys(i).filter(function(e){return""!==i[e]}).reduce(function(e,t){var n="doesOptInApply"!==t?i[t]:J.normalizeConfig(i[t]),n=G.normalizeBoolean(n);return e[t]=n,e},Object.create(null))}(e);n=r||{},x.adobe.optIn=x.adobe.optIn||function(){var e=G.pluck(n,["doesOptInApply","previousPermissions","preOptInApprovals","isOptInStorageEnabled","optInStorageExpiry","isIabContext"]),t=(t=(t=n.optInCookieDomain||n.cookieDomain)||B())===window.location.hostname?"":t;e.optInCookieDomain=t;t=new me(e,{cookies:W});return e.isIabContext&&(e=new ye(window.__cmp),t.registerPlugin(e)),t}();var a=i.split("").reverse().join(""),t=new ve(i,null,a);G.isObject(r)&&r.cookieDomain&&(t.cookieDomain=r.cookieDomain),x.s_c_il.splice(--x.s_c_in,1);e=G.getIeVersion();if("number"==typeof e&&e<10)return t._helpers.replaceMethodsWithFunction(t,function(){});a=function(){try{return x.self!==x.parent}catch(e){return 1}}()&&((e=t).cookieWrite("TEST_AMCV_COOKIE","T",1),"T"!==e.cookieRead("TEST_AMCV_COOKIE")||(e._helpers.removeCookie("TEST_AMCV_COOKIE"),0))&&x.parent?new o(i,r,t,x.parent):new ve(i,r,a),t=null;return a.init(),a},x.addEventListener?x.addEventListener("load",Se):x.attachEvent&&x.attachEvent("onload",Se),ve.codeLoadEnd=(new Date).getTime()}(),c.getInstance=a,window.s_objectID||(window.s_objectID=0),function(){var e,t,n,i=window,r=i.s_giq;if(r)for(e=0;e<r.length;e++)(n=a((t=r[e]).oun)).setAccount(t.un),n.setTagContainer(t.tagContainerName);i.s_giq=0}(),window.AppMeasurement=c,e.exports={Visitor:Visitor,s_gi:a,AppMeasurement:c}}.call(this,n(22))},function(e,t){e.exports=function(e){var t;return e.webpackPolyfill||((t=Object.create(e)).children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1),t}},function(e,t){e.exports.getRefsecKeyValue=function(){var e=document.createElement("a");if(e.href=document.referrer,e.hostname.indexOf("wsj.com")<0&&e.hostname.indexOf("barrons.com")<0)return"";e=e.pathname,e=(e="/"===e[0]?e.substring(1):e).replace(/\//g,",").split(",");return"articles"===e[0]?"":e.join(",")}},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=s(n);return e=i?(e=s(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==r(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=n(1),h=l.h,c=l.render,u=l.Component,p=l.Fragment,_=n(3).Provider,f=n(9).emptyElement,g=n(153),v=n(171).MoreVideosSlide,m=n(175).Endscreen,y=n(177),S=n(184),E=n(186),b=n(188),T=n(190),A=n(192),w=n(194),C=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(n,u);var e,t=o(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return e=[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){var e=this.props,t=e.videoId,n=e.videoProps,i=e.controlsProps,r=e.thumbProps,a=e.countdownProps,o=e.moreVideosSlideProps,s=e.endscreenProps,l=e.clickForSoundProps,c=e.disableTitle,u=e.liveButtonEnabled,e=e.saveToQueueEnabled;return h(p,null,h(b,a),!c&&h(S,{videoId:t}),h("div",{id:"video-ad-skip-".concat(t),class:"adSkip"},h("div",{class:"skipTxt"},"Skip Ad"),h("div",{class:"videoSkipIcon",id:"videoSkipIcon-".concat(t)}),h("div",{class:"videoSkipCountdown",id:"video-ad-countdown-".concat(t)}," in 15")),o&&h(v,d({videoId:t},o)),s&&h(m,s),h("div",{class:"video-share",id:"video-share-".concat(t)}),h("div",{id:"flashContainer-".concat(t),class:"flashVideo"}),h("video",d({src:"",id:"videoplayer-".concat(t),style:{width:"100%",height:"100%",position:"absolute"},preload:"none"},n,{crossorigin:"anonymous",controls:!0}),"Your browser does not support HTML5 video."),h("div",{class:"video-play-overlay",id:"video-play-overlay-".concat(t)}),h(w,null),h("div",{class:"video-adContainer",id:"adContainer-".concat(t)},h("div",{class:"ad-top-background"}),h("div",{class:"ad-circle",id:"ad-circle-".concat(t)}),h("div",{class:"ad-text"})),h("div",{id:"video-controls-container-".concat(t),class:"video-controls-container"},i&&h(g,d({videoId:t},i))),e&&h(E,null),h("div",{id:"vrWrapper_".concat(t),class:"vrWrapper"}),l&&h(T,d({videoId:t},l)),u&&!c&&h(A,{videoId:t}),h(y,d({videoId:t},r)),h("div",{class:"video-pause-slate",id:"video-pause-slate-".concat(t)}))}}],i(n.prototype,e),n}();e.exports={renderUI:function(e,t,n){f(e);var i=document.createElement("div");return i.classList.add("video-wrapper"),i.id="wrapper-".concat(n.videoId),e.appendChild(i),c(h(_,{store:t},h(C,n)),i)}}},function(e,t,n){e.exports=n(150)()},function(e,t,n){"use strict";var o=n(151);function i(){}function r(){}r.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,r,a){if(a!==o){a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}var n={array:e.isRequired=e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:r,resetWarningCache:i};return n.PropTypes=n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";var i="function"==typeof Symbol&&Symbol.for,r=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,o=i?Symbol.for("react.fragment"):60107,s=i?Symbol.for("react.strict_mode"):60108,l=i?Symbol.for("react.profiler"):60114,c=i?Symbol.for("react.provider"):60109,u=i?Symbol.for("react.context"):60110,d=i?Symbol.for("react.async_mode"):60111,h=i?Symbol.for("react.concurrent_mode"):60111,p=i?Symbol.for("react.forward_ref"):60112,_=i?Symbol.for("react.suspense"):60113,f=i?Symbol.for("react.suspense_list"):60120,g=i?Symbol.for("react.memo"):60115,v=i?Symbol.for("react.lazy"):60116,m=i?Symbol.for("react.block"):60121,y=i?Symbol.for("react.fundamental"):60117,S=i?Symbol.for("react.responder"):60118,E=i?Symbol.for("react.scope"):60119;function b(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case d:case h:case o:case l:case s:case _:return e;default:switch(e=e&&e.$$typeof){case u:case p:case v:case g:case c:return e;default:return t}}case a:return t}}}function T(e){return b(e)===h}t.AsyncMode=d,t.ConcurrentMode=h,t.ContextConsumer=u,t.ContextProvider=c,t.Element=r,t.ForwardRef=p,t.Fragment=o,t.Lazy=v,t.Memo=g,t.Portal=a,t.Profiler=l,t.StrictMode=s,t.Suspense=_,t.isAsyncMode=function(e){return T(e)||b(e)===d},t.isConcurrentMode=T,t.isContextConsumer=function(e){return b(e)===u},t.isContextProvider=function(e){return b(e)===c},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return b(e)===p},t.isFragment=function(e){return b(e)===o},t.isLazy=function(e){return b(e)===v},t.isMemo=function(e){return b(e)===g},t.isPortal=function(e){return b(e)===a},t.isProfiler=function(e){return b(e)===l},t.isStrictMode=function(e){return b(e)===s},t.isSuspense=function(e){return b(e)===_},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===h||e===l||e===s||e===_||e===f||"object"==typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===g||e.$$typeof===c||e.$$typeof===u||e.$$typeof===p||e.$$typeof===y||e.$$typeof===S||e.$$typeof===E||e.$$typeof===m)},t.typeOf=b},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=s(n);return e=i?(e=s(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==r(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=n(1),c=l.h,u=l.Component,l=n(3).connect,d=n(154),h=n(157),p=n(160),_=n(161),f=n(164),g=n(165),v=n(169),m=n(170),n=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,u);var e=o(t);function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.apply(this,arguments)}return i(t.prototype,[{key:"componentDidMount",value:function(){document.getElementById("video-cc-".concat(this.props.videoId)).innerHTML=v,document.getElementById("video-share-b-".concat(this.props.videoId)).innerHTML=m}},{key:"componentDidUpdate",value:function(){this.props.isControlsVisible||this.props.showShareScreen(!1)}},{key:"render",value:function(){var e=this.props,t=e.isMobile,n=e.videoData,e=e.isAdMode,n="live"===n.state||"flive"===n.state||e,e={isMobile:t,videoId:this.props.videoId,onSeek:this.props.onSeek,showControls:this.props.showControls,enableScrubPreview:this.props.enableScrubPreview},t={onSaveChange:this.props.onSaveChange,saveApiPublication:this.props.saveApiPublication,saveApi:this.props.saveApi,guid:this.props.videoData.guid};return c("div",{className:"video-controls-background ".concat(this.props.isControlsVisible?"video-fade-in":"video-fade-out")},c("div",{className:"video-controls",id:"video-controls-".concat(this.props.videoId)},c(d,{onPlayPause:this.props.onPlayPause}),c(h,{videoId:this.props.videoId,onMuteUnMute:this.props.onMuteUnMute}),c(f,{videoId:this.props.videoId}),c(p,{videoId:this.props.videoId,onToggleFullScreen:this.props.onToggleFullScreen}),this.props.saveToQueueEnabled&&c(_,t),c("button",{className:"video-bit f-r",id:"video-bit-".concat(this.props.videoId)}),c("button",{className:"video-cc f-r",id:"video-cc-".concat(this.props.videoId)}),c("button",{className:"video-share-b f-r",id:"video-share-b-".concat(this.props.videoId)}),c("div",{className:"bitrate-list",id:"bitrate-list-".concat(this.props.videoId)}),c("div",{className:"captions-list",id:"captions-list-".concat(this.props.videoId)}),!n&&c(g,e)))}}]),t}(),n=l(function(e){return{isControlsVisible:e.isControlsVisible,videoData:e.videoData,isAdMode:e.isAdMode}})(n);e.exports=n},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=l(n);return e=i?(e=l(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==r(e)&&"function"!=typeof e?s(t):e}}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=n(1),u=c.h,d=c.Component,c=n(3).connect,h=n(30),p=n(10),_=n(155),f=n(156);function g(){}n=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(n,d);var t=o(n);function n(e){return function(e){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),(e=t.call(this,e))._pickIcon=e._pickIcon.bind(s(e)),e}return i(n.prototype,[{key:"_pickIcon",value:function(){var e=this.props,t=e.isPlaying,n=e.isAdPlaying,i=e.isAdMode;return e.isPlaybackInitializing?_:i?n?f:_:t?f:_}},{key:"shouldComponentUpdate",value:function(e){return this.props.isPlaying!==e.isPlaying||this.props.isAdPlaying!==e.isAdPlaying||this.props.isAdMode!==e.isAdMode||this.props.isPlaybackInitializing!==e.isPlaybackInitializing||this.props.isBtnDisabled!==e.isBtnDisabled}},{key:"render",value:function(){var e=this.props,t=e.onPlayPause,e=e.isBtnDisabled;return u("button",{onClick:e?g:t,className:h("f-l",{"disabled-btn":e}),dangerouslySetInnerHTML:{__html:this._pickIcon()}})}}]),n}(),n=c(function(e){return{isPlaying:e.isPlaying,isAdPlaying:e.isAdPlaying,isAdMode:e.isAdMode,isPlaybackInitializing:e.isPlaybackInitializing,isBtnDisabled:e.isPlaybackInitializing||e.adInitState===p.STARTED||e.videoApiLoadState===p.STARTED||e.imaLoadState===p.STARTED||e.hlsJsLoadState===p.STARTED}})(n);e.exports=n},function(e,t){e.exports='<svg width="16px" height="22px" viewBox="0 0 20 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Play</title><desc>Created with sketchtool.</desc><g id="Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Icons/Play/Play" fill="#FFFFFF" fill-rule="nonzero"><polyline id="Play" points="0 2 0 26 20 13.4528 0 2"></polyline></g></g></svg>'},function(e,t){e.exports='<title>Pause</title><svg width="16px" height="22px" viewBox="0 0 20 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Icons/Play/Pause" fill="#FFFFFF" fill-rule="nonzero"><path d="M0,25 L0,3 L6,3 L6,25 L0,25 Z M11,25 L11,3 L17,3 L17,25 L11,25 Z" id="Combined-Shape"></path></g></g></svg>'},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=s(n);return e=i?(e=s(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==r(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=n(1),c=l.h,u=l.Component,l=n(3).connect,d=n(158),h=n(159),n=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,u);var e=o(t);function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.apply(this,arguments)}return i(t.prototype,[{key:"shouldComponentUpdate",value:function(e){return this.props.isMuted!==e.isMuted}},{key:"render",value:function(){var e=this.props,t=e.videoId,e=e.isMuted?h:d;return c("div",{className:"video-volume f-l",id:"video-volume-".concat(t)},c("div",{className:"video-volume-slider",id:"video-volume-slider-".concat(t)},c("div",{id:"video-volume-b-".concat(t),className:"video-volume-b"}),c("div",{id:"video-volume-v-".concat(t),className:"video-volume-v"}),c("div",{id:"video-volume-h-".concat(t),className:"video-volume-h"})),c("span",{className:"video-volume-g-videoplayer",id:"video-volume-g-".concat(t),dangerouslySetInnerHTML:{__html:e},onClick:this.props.onMuteUnMute}))}}]),t}(),n=l(function(e){return{isMuted:e.isMuted}})(n);e.exports=n},function(e,t){e.exports='<svg width="22px" height="22px" viewBox="0 0 28 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Sound On</title><desc>Created with sketchtool.</desc><g id="Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Icons/Volume/Sound-On" fill="#FFFFFF" fill-rule="nonzero"><path d="M7.28905409,9.11111111 L14.0058039,3 L15.0900792,3 L15.0900792,25 L14.0058039,25 L7.28905409,18.8546667 L2.9711435,18.8546667 C2.70066473,18.8892622 2.43003539,18.7916893 2.24109317,18.5914537 C2.05215095,18.391218 1.96708083,18.1118307 2.01160781,17.8377778 L2.01160781,10.128 C1.96708083,9.85394708 2.05215095,9.57455976 2.24109317,9.37432412 C2.43003539,9.17408847 2.70066473,9.07651553 2.9711435,9.11111111 L7.28905409,9.11111111 Z M21.3784679,21.4376257 L21.6473569,21.0690761 C23.1764535,18.9732373 24,16.5399204 24,14 C24,11.4600796 23.1764535,9.02676274 21.6473569,6.93092392 L21.3784679,6.56237426 L22.8492845,5.26760137 L23.1738214,5.69974676 C25.0062579,8.1397748 26,11.0044256 26,14 C26,16.9955744 25.0062579,19.8602252 23.1738214,22.3002532 L22.8492845,22.7323986 L21.3784679,21.4376257 Z M17.704601,17.5721503 L17.9772048,17.1731776 C18.6483088,16.1909752 19,15.1126779 19,14 C19,12.8873221 18.6483088,11.8090248 17.9772048,10.8268224 L17.704601,10.4278497 L19.2389389,9.30076441 L19.5348499,9.70435344 C20.48979,11.0067833 21,12.4746927 21,14 C21,15.5253073 20.48979,16.9932167 19.5348499,18.2956466 L19.2389389,18.6992356 L17.704601,17.5721503 Z" id="Volume"></path></g></g></svg>'},function(e,t){e.exports='<svg width="22px" height="22px" viewBox="0 0 28 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Mute</title><desc>Created with sketchtool.</desc><g id="Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Icons/Volume/Mute" fill="#FFFFFF" fill-rule="nonzero"><path d="M7.32880533,9.11111111 L14.0960366,3 L15.1884611,3 L15.1884611,25 L14.0960366,25 L7.32880533,18.8546667 L2.97844238,18.8546667 C2.70593076,18.8892622 2.43326743,18.7916893 2.24290517,18.5914537 C2.05254291,18.391218 1.96683342,18.1118307 2.01169505,17.8377778 L2.01169505,10.128 C1.96683342,9.85394708 2.05254291,9.57455976 2.24290517,9.37432412 C2.43326743,9.17408847 2.70593076,9.07651553 2.97844238,9.11111111 L7.32880533,9.11111111 Z M22.5676418,14 L25,16.4142136 L23.5751576,17.8284271 L21.1427994,15.4142136 L18.7104412,17.8284271 L17.2855987,16.4142136 L19.7179569,14 L17.2855987,11.5857864 L18.7104412,10.1715729 L21.1427994,12.5857864 L23.5751576,10.1715729 L25,11.5857864 L22.5676418,14 Z" id="Volume"></path></g></g></svg>'},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=s(n);return e=i?(e=s(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==r(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=n(1),c=l.h,u=l.Component,l=n(3).connect,n=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,u);var e=o(t);function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.apply(this,arguments)}return i(t.prototype,[{key:"shouldComponentUpdate",value:function(e){return this.props.isFullScreen!==e.isFullScreen}},{key:"render",value:function(){var e=this.props,t=e.isFullScreen,e=e.onToggleFullScreen,t=t?'<svg width="22px" height="22px" viewBox="0 0 28 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Icons/Full-Screen/Active" fill="#FFFFFF" fill-rule="nonzero"><path d="M8.33333333,6.55555556 L11,3.88888889 L11,11 L3.88888889,11 L6.55555556,8.33333333 L3,4.77777778 L4.77777778,3 L8.33333333,6.55555556 Z M6.55555556,19.6666667 L3.88888889,17 L11,17 L11,24.1111111 L8.33333333,21.4444444 L4.77777778,25 L3,23.2222222 L6.55555556,19.6666667 Z M21.4444444,8.33333333 L24.1111111,11 L17,11 L17,3.88888889 L19.6666667,6.55555556 L23.2222222,3 L25,4.77777778 L21.4444444,8.33333333 Z M19.6666667,21.4444444 L17,24.1111111 L17,17 L24.1111111,17 L21.4444444,19.6666667 L25,23.2222222 L23.2222222,25 L19.6666667,21.4444444 Z" id="Full-Screen"></path></g></g></svg>':'<svg width="22px" height="22px" viewBox="0 0 28 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Icons/Full-Screen/Inactive" fill="#FFFFFF" fill-rule="nonzero"><path d="M21.3333333,19.5555556 L24,16.8888889 L24,24 L16.8888889,24 L19.5555556,21.3333333 L16,17.7777778 L17.7777778,16 L21.3333333,19.5555556 Z M19.5555556,6.66666667 L16.8888889,4 L24,4 L24,11.1111111 L21.3333333,8.44444444 L17.7777778,12 L16,10.2222222 L19.5555556,6.66666667 Z M8.44444444,21.3333333 L11.1111111,24 L4,24 L4,16.8888889 L6.66666667,19.5555556 L10.2222222,16 L12,17.7777778 L8.44444444,21.3333333 Z M6.66666667,8.44444444 L4,11.1111111 L4,4 L11.1111111,4 L8.44444444,6.66666667 L12,10.2222222 L10.2222222,12 L6.66666667,8.44444444 Z" id="Full-Screen"></path></g></g></svg>';return c("button",{className:"video-fullscreen f-r",id:"video-fullscreen-".concat(this.props.videoId),dangerouslySetInnerHTML:{__html:t},onClick:e})}}]),t}(),n=l(function(e){return{isFullScreen:e.isFullScreen}})(n);e.exports=n},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=s(n);return e=i?(e=s(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==r(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=n(1),c=l.h,u=l.Component,d=n(6),h=(d.useRef,d.useEffect,d.useState,n(3).connect),l=(n(9).getSavedStatus,n(13)),d=l.showSavedModal,p=(l.hideSavedModal,n(162)),_=n(163),n=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(n,u);var e,t=o(n);function n(){var e;return function(e){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),(e=t.call(this)).state={isSaved:null,isSaving:!1,isAvailable:!1,isLoaded:!1},e}return e=[{key:"componentDidUpdate",value:function(e){var t=this;e.videoData.guid!==this.props.videoData.guid&&this.setState(("isSaved"in(e={isAvailable:!1,isSaved:!1,isLoaded:!1})?Object.defineProperty(e,"isSaved",{value:!1,enumerable:!0,configurable:!0,writable:!0}):e.isSaved=!1,e)),this.props.isPlaybackInitializing&&!this.state.isLoaded&&(this.setState({isLoaded:!0}),fetch("".concat(this.props.saveApi,"/by-content-id/").concat(this.props.videoData.guid,"?pub=").concat(this.props.saveApiPublication)).then(function(e){if(e.ok)return e.json();throw Error("Cannot receive save status")}).then(function(e){void 0===e?t.setState({isAvailable:!1,isSaved:!1}):t.setState({isAvailable:!0,isSaved:e})}).catch(function(e){return t.setState({isSaving:!1})}))}},{key:"saveToQueue",value:function(){var e,t=this;this.state.isSaved||(this.setState({isSaved:!0,isSaving:!0}),e={contentId:this.props.videoData.guid,pub:this.props.saveApiPublication},fetch(this.props.saveApi,{method:"POST",body:JSON.stringify(e),headers:{"content-type":"application/json"}}).then(function(e){return e.ok||t.setState({isSaved:!1}),e.json()}).then(function(e){t.setState({isSaved:!0,isSaving:!1}),t.props.showSavedModal()}).catch(function(e){return t.setState({isSaving:!1})}))}},{key:"deleteFromQueue",value:function(){var t=this;this.state.isSaved&&(this.setState({isSaved:!1,isSaving:!0}),fetch("".concat(this.props.saveApi,"?contentId=").concat(this.props.videoData.guid,"&pub=").concat(this.props.saveApiPublication),{method:"DELETE",headers:{"content-type":"application/json"}}).then(function(e){return e.json()}).then(function(e){t.setState({isSaved:!1,isSaving:!1})}).catch(function(e){return t.setState({isSaving:!1})}))}},{key:"shouldComponentUpdate",value:function(e,t){return this.state.isSaved!==t.isSaved||this.props.isPlaybackInitializing!==e.isPlaybackInitializing||this.props.isAvailable!==e.isAvailable}},{key:"handleClick",value:function(){this.state.isSaving||(this.props.onSaveChange(!this.state.isSaved),this.state.isSaved?this.deleteFromQueue():this.saveToQueue())}},{key:"render",value:function(){return this.state.isAvailable?(this.props.saveApi,c("button",{className:"video-save-queue f-r",dangerouslySetInnerHTML:{__html:!0===this.state.isSaved?_:p},onClick:this.handleClick.bind(this)})):null}}],i(n.prototype,e),n}(),n=h(function(e){return{videoData:e.videoData,isPlaybackInitializing:e.isPlaybackInitializing}},{showSavedModal:d})(n);e.exports=n},function(e,t){e.exports='<svg width="24" height="24" version="1.1" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:xlink="http://www.w3.org/1999/xlink"><metadata><rdf:RDF><cc:Work rdf:about><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"></dc><dc:title></dc></cc:Work></rdf:RDF></metadata><defs><path id="bookmark-stroke-medium-a" d="m16 2c1.1046 0 2 0.89543 2 2v18h-0.63893l-5.3518-3.7988-5.3391 3.7541h-0.67018v-17.955c0-1.1046 0.89543-2 2-2h8zm0 1h-8c-0.51284 0-0.93551 0.38604-0.99327 0.88338l-0.0067277 0.11662v16.5l5.012-3.5232 4.988 3.5402v-16.517c0-0.51284-0.38604-0.93551-0.88338-0.99327l-0.11662-0.0067277z"></path></defs><use fill="#ffffff" fill-rule="evenodd" xlink:href="#bookmark-stroke-medium-a"></use></svg>'},function(e,t){e.exports='<svg width="24" height="24" version="1.1" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:xlink="http://www.w3.org/1999/xlink"><metadata><rdf:RDF><cc:Work rdf:about><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"></dc><dc:title></dc></cc:Work></rdf:RDF></metadata><defs><path id="bookmark-filled-medium-a" d="m16 2c1.1046 0 2 0.89543 2 2v18h-0.63893l-5.3518-3.7988-5.3391 3.7541h-0.67018v-17.955c0-1.1046 0.89543-2 2-2h8z"></path></defs><use fill="#ffffff" fill-rule="evenodd" xlink:href="#bookmark-filled-medium-a"></use></svg>'},function(e,t,n){var r=n(1).h,i=n(3).connect,n=n(9),a=n.gTimeFormat,o=n.removeZeros,i=i(function(e){return{currentPosition:e.currentPosition,duration:e.duration,isLive:"live"===e.videoData.state||"flive"===e.videoData.state}})(function(e){var t=e.videoId,n=e.currentPosition,i=void 0===n?0:n,n=e.duration,n=void 0===n?0:n;if(e.isLive)return r("div",{className:"video-time f-l",id:"video-time-".concat(t)},"LIVE");i=o(a(i)),n=o(a(n));return r("div",{className:"video-time f-l",id:"video-time-".concat(t),style:{opacity:".8"}},i,r("span",{style:{opacity:".5"}}," / "),n)});e.exports=i},function(e,t,n){function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function i(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)),i}function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach(function(e){_(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){return Math.min(t/e*100,100)}var o=n(1),f=o.h,g=o.Fragment,o=n(6),v=o.useRef,m=o.useEffect,y=o.useReducer,S=o.useCallback,E=n(3).useSelector,b=n(30),T=n(166),A=n(168),w={isDragging:!1,showLoadedBar:!1,showPreview:!1,scrubBarWidth:0,mouseXCoord:0,loadedPercent:0},C="START_DRAG",I="SHOW_LOADED_BAR",P="HIDE_LOADED_BAR",k="SHOW_PREVIEW",M="HIDE_PREVIEW",D="UPDATE_SCRUB_BAR_WIDTH",O="UPDATE_SCRUB_X_COORD";function R(e,t){switch(t.type){case C:return r(r({},e),{},{isDragging:!0});case"END_DRAG":return r(r({},e),{},{isDragging:!1});case I:return r(r({},e),{},{showLoadedBar:!0});case P:return r(r({},e),{},{showLoadedBar:!1});case k:return r(r({},e),{},{showPreview:!0});case M:return r(r({},e),{},{showPreview:!1});case D:return r(r({},e),{},{scrubBarWidth:t.width,loadedPercent:a(t.width,e.mouseXCoord)});case O:return r(r({},e),{},{mouseXCoord:Math.min(Math.max(t.xCoord,0),e.scrubBarWidth),loadedPercent:a(e.scrubBarWidth,t.xCoord)});default:return e}}e.exports=function(e){var t,n,i=E(function(e){return e.currentPosition}),r=E(function(e){return e.duration}),a=E(function(e){return e.width}),n=(t=y(R,w),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}}(t,n)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],s=n[1],l=v(null),c=e.isMobile,n=e.videoId,u=e.onSeek,d=e.showControls,e=e.enableScrubPreview,h=S(function(e){var t,n=e.pageX,e=e.touches,e=null!=n?n:null==e||null===(t=e[0])||void 0===t?void 0:t.pageX;e&&(e=e-(t=l.current).getBoundingClientRect().left,o.scrubBarWidth!==t.offsetWidth&&s({type:D,width:t.offsetWidth}),s({type:O,xCoord:e}))},[o.scrubBarWidth]);m(function(){function e(){s({type:I}),s({type:k})}var t=l.current;return t.addEventListener("mouseover",e),function(){return t.removeEventListener("mouseover",e)}},[]),m(function(){function e(){s({type:P}),s({type:M})}var t=l.current;return t.addEventListener("mouseout",e),function(){return t.removeEventListener("mouseout",e)}},[]),m(function(){function e(){return s({type:C})}var t=l.current;return t.addEventListener("mousedown",e),c&&t.addEventListener("touchstart",e),function(){t.removeEventListener("mousedown",e),c&&t.removeEventListener("touchstart",e)}},[c]),m(function(){if(c){function e(e){d(),o.isDragging||s({type:C}),h(e)}var t=l.current;return t.addEventListener("touchmove",e),function(){return t.removeEventListener("touchmove",e)}}},[c,o.isDragging,d,h]),m(function(){return window.addEventListener("mousemove",h),function(){return window.removeEventListener("mousemove",h)}},[h]),m(function(){function e(){o.isDragging&&u&&u(o.loadedPercent/100),s({type:"END_DRAG"})}var t=l.current;return window.addEventListener("mouseup",e),c&&t.addEventListener("touchend",e),function(){window.removeEventListener("mouseup",e),c&&t.removeEventListener("touchend",e)}},[o.isDragging,o.loadedPercent,u,c]);r=o.isDragging?o.loadedPercent:i/r*100;return f(g,null,e&&!c&&400<=a&&f(T,{scrubBarWidth:o.scrubBarWidth,mouseXCoord:o.mouseXCoord,show:o.showPreview||o.isDragging}),f("div",{ref:l,className:b(A.scrubBar,_({},A.mobile,c))},f("div",{className:A.adMarkerContainer,id:"video-ad-marker-container-".concat(n)}),f("div",{className:A.scrubPadding}),o.showLoadedBar&&f("div",{className:A.scrubLoaded,style:{width:"".concat(o.loadedPercent,"%")}}),f("div",{className:A.scrubBackground}),f("div",{className:A.scrubProgress,style:{width:"".concat(r,"%")}},f("span",{className:A.dot}))))}},function(e,t,n){function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var v=n(1).h,i=n(6),m=i.useRef,y=i.useEffect,S=i.useState,E=n(3).useSelector,b=n(30),i=n(9),T=i.removeZeros,A=i.gTimeFormat,w=n(167);e.exports=function(e){var t=E(function(e){return null===(e=e.videoData)||void 0===e?void 0:e.thumbstripURL}),n=E(function(e){return e.duration}),i=E(function(e){return e.width}),r=E(function(e){return e.isAdMode}),a=134===(p=E(function(e){return parseInt(null===(e=e.videoData)||void 0===e?void 0:e.doctypeID,10)}))?9/16:144===p?1:16/9,o=(_=S(!1),f=2,function(e){if(Array.isArray(e))return e}(_)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}}(_,f)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(_,f)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=o[0],l=o[1],c=m(null),u=m(null);if(y(function(){return l(!1)},[t]),!t)return null;var d=e.mouseXCoord,h=e.scrubBarWidth,p=e.show,_=function(e){if(!e)return 0;var t=(t=d-e.offsetWidth/2+20)<0?0:t,e=i-e.offsetWidth;return e<t?e:t}(c.current),f=Math.min(d/h,1),o={left:"".concat(_,"px")},e={};return s&&(_=(h=u.current).naturalWidth,a=(h=h.naturalHeight/2)*a,e.left="".concat(Math.round(100*f)*-a,"px"),e.width="".concat(_/2,"px"),e.height="".concat(h,"px"),o.width="".concat(a,"px"),o.height="".concat(h,"px")),v("div",{onselectstart:"return false;",ref:c,className:b(w.preview,(s=!s||!p||r,(p=w.hide)in(r={})?Object.defineProperty(r,p,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[p]=s,r)),style:o},v("span",{className:w.time},T(A(f*n))),v("img",{ref:u,className:w.img,src:t,onLoad:function(){return l(!0)},style:e}))}},function(e,t,n){e.exports={preview:"styles__preview_2nS_r1y42rPCYXSm3Dk6qY",hide:"styles__hide_qzdw3-CF5x1fAAZNbJvVb",time:"styles__time_X3WOoR-A7hh34442Fwris",img:"styles__img_2rEDBJuX6st5F3hCxhZ_Og"}},function(e,t,n){e.exports={scrubBar:"styles__scrubBar_2SmbWUCzg3R7MnjhBWuFJ8",mobile:"styles__mobile_343QZe_YU0jEvjdFU8aWrD",scrubBackground:"styles__scrubBackground_39WBXpRiaOiOKB9Y6QGmuf",scrubPadding:"styles__scrubPadding_nJS-HnfwjM3JloRoiOPSB",scrubProgress:"styles__scrubProgress_3-29CANQyOYYdFkSGbGvkt",dot:"styles__dot_dUP_ksR6S-rypXCDfKE4F",scrubLoaded:"styles__scrubLoaded_Fnwh6GSDzGHJx2PcKL7Uk",adMarkerContainer:"styles__adMarkerContainer_NbCndWtAjjtP4dnbRGNo0"}},function(e,t){e.exports='<svg width="22px" height="22px" viewBox="0 0 28 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Closed Captions Inactive</title><desc>Created with sketchtool.</desc><g id="Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Icons/CC/Inactive" fill="#FFFFFF" fill-rule="nonzero"><path d="M26,4 L2,4 L2,22 L7,22 L7,26 L12,22 L26,22 L26,4 Z M24,20 L4,20 L4,6 L24,6 L24,20 Z M20,17 C19.77858,17 19.4452467,17 19,17 C16,17 15,15 15,13 C15,11 16,9 19,9 C19.5054152,9 19.8387485,9 20,9 L20,11 C19,11 17,11 17,13 C17,15 19,15 20,15 L20,17 Z M13,17 C12.77858,17 12.4452467,17 12,17 C9,17 8,15 8,13 C8,11 9,9 12,9 C12.5054152,9 12.8387485,9 13,9 L13,11 C12,11 10,11 10,13 C10,15 12,15 13,15 L13,17 Z" id="CC"></path></g></g></svg>'},function(e,t){e.exports='<svg width="22px" height="22px" viewBox="0 0 28 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Share</title><desc>Created with sketchtool.</desc><g id="Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Icons/Share" fill="#FFFFFF" fill-rule="nonzero"><path d="M16,4 L16,9 L13,9 C9,9 3,12.3958048 3,22 C3,22 4,22 4,22 C4,22 5.45666691,16 11,16 L16,16 L16,22 L26,13 L16,4 Z" id="Path"></path></g></g></svg>'},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=l(n);return e=i?(e=l(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==r(e)&&"function"!=typeof e?s(t):e}}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=n(1),u=c.h,d=c.Component,h=n(3).connect,p=n(13),c=p.showMoreVideosSlide,p=p.hideMoreVideosSlide,_=n(9),f=n(51),g=n(174),n=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(n,d);var t=o(n);function n(e){return function(e){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),(e=t.call(this,e)).state={recommendations:null},e._hasShown=!1,e._isLoading=!1,e._positionShown=null,e._setThumbnailRef=e._setThumbnailRef.bind(s(e)),e._handleSlideClick=e._handleSlideClick.bind(s(e)),e._hideSlide=e._hideSlide.bind(s(e)),e}return i(n.prototype,[{key:"_setThumbnailRef",value:function(e){this._thumbnailRef=e}},{key:"_hideSlide",value:function(){this.props.hideMoreVideosSlide(),this._positionShown=null}},{key:"_handleSlideClick",value:function(){this._hideSlide(),this.props.playVideo(this.state.recommendations.guid)}},{key:"_fetchRecommendedVideo",value:function(){if(this.props.hasCMPConsent){var e="".concat(this.props.videoApiUrl,"find_all_videos.asp?type=recommended&count=1&userid=").concat(_.getCookie("vidoraUserId"),"&fields=guid,thumbnailList,name");return _.fetchFromApi(e).then(function(e){return e[0]})}return url="".concat(this.props.videoApiUrl,"find_all_videos.asp?type=playlist&query=Most%20Viewed%20WSJ%20Videos&count=20&fields=guid,thumbnailList,name"),_.fetchFromApi(url).then(function(e){return e[Math.floor(Math.random()*e.length)]})}},{key:"_getThumbnail",value:function(){if(!this._thumbnailRef)return"";var e=this._thumbnailRef.offsetWidth;return _.pickBestThumbnail(this.state.recommendations.thumbnailList,e,.5625*e)}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.props,i=n.width,r=n.isMoreVideosSlideVisible,a=n.currentPosition,o=n.duration,s=n.showMoreVideosSlide,l=n.isEndscreenVisible,n=n.videoData;if(i<485||"vod"!==(null==n?void 0:n.state)||"469"===(null==n?void 0:n.doctypeID)&&0===(null!==(u=null==n||null===(u=n.column)||void 0===u?void 0:u.length)&&void 0!==u?u:0)||isNaN(a)||isNaN(o)||0===o)r&&this._hideSlide();else{var c,u=this.props.videoData.guid;if(e.videoData.guid!==u&&this._hasShown)return r&&this._hideSlide(),this._hasShown=!1,void(this._positionShown=null);!(.6<=a/o)||l||r||this._hasShown||this._isLoading?null!==this._positionShown&&(this._positionShown+7<=a||l)&&this._hideSlide():(this._isLoading=!0,c=this.props.onSlideShowing,this._fetchRecommendedVideo().then(function(e){t._hasShown=!0,t._isLoading=!1,e&&(t.setState({recommendations:e}),s(),c(),t._positionShown=a)}).catch(function(e){console.error("Failed to fetch recommendations",e),t._hasShown=!0,t._isLoading=!1}))}}},{key:"render",value:function(){var e,t=this.props.isMoreVideosSlideVisible,n=(n=this.state.recommendations)||{},i=t&&485<=this.props.width&&"vod"===(null===(e=this.props.videoData)||void 0===e?void 0:e.state)&&("469"!==(null===(e=this.props.videoData)||void 0===e?void 0:e.doctypeID)||0<(null===(i=this.props.videoData)||void 0===i||null===(r=i.column)||void 0===r?void 0:r.length)),r=[g.slide];return i&&r.push(g.slideIn),u(f,{className:r.join(" "),isVisible:i,onClick:this._handleSlideClick,onClose:this._hideSlide},n.thumbnailList&&u("img",{className:g.thumbnail,src:this._getThumbnail(),ref:this._setThumbnailRef}),u("div",{className:g.textContainer},u("div",{className:g.headerText},"You may also like"),u("div",{className:g.videoTitle},n.name)))}}]),n}(),p=h(function(e){return{currentPosition:e.currentPosition,videoData:e.videoData,duration:e.duration,isMoreVideosSlideVisible:e.isMoreVideosSlideVisible,width:e.width,isEndscreenVisible:e.isEndscreenVisible}},{showMoreVideosSlide:c,hideMoreVideosSlide:p})(n);e.exports={MoreVideosSlide:p,UnconnectedMoreVideosSlide:n}},function(e,t,n){e.exports={modal:"styles__modal_2R1Yuwcs6Div8q2nH9vsGH",fadeOut:"styles__fadeOut_1hQV739Kjrr_eNk6KLGOPF",closeBtn:"styles__closeBtn_1Fyo4cC4u9TQu-8KxlZu6F"}},function(e,t){e.exports='<svg width="21px" height="21px" viewBox="0 0 21 21" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Close</title><desc>Created with sketchtool.</desc><g id="Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" fill-opacity="0.7"><g id="close" fill="#FFFFFF"><polygon id="Path" points="10.5 8.75 19.25 0 21 1.75 12.25 10.5 21 19.25 19.25 21 10.5 12.25 1.75 21 0 19.25 8.75 10.5 0 1.75 1.75 1.51121399e-15"></polygon></g></g></svg>'},function(e,t,n){e.exports={slide:"styles__slide_3F5t-YABxZaZsuoa9SXzP1",slideIn:"styles__slideIn_yI9dRsGQl6Kqx9TQ4MZ0v",thumbnail:"styles__thumbnail_1jNdgKuyHijlqaWVZxfQ2l",textContainer:"styles__textContainer_1PIpaSWl4SBHiFamj1SUf-",headerText:"styles__headerText_3DlP-XHOkfVdJVOwSKvO7v",videoTitle:"styles__videoTitle_3IAORCFNrdSYW86-9lRxXX"}},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=l(n);return e=i?(e=l(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==r(e)&&"function"!=typeof e?s(t):e}}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=n(1),d=u.h,h=u.Component,p=n(3).connect,_=n(13),f=_.showEndscreen,u=_.hideEndscreen,_=_.replacePlaylist,g=n(9),v=n(51),m=n(176),y=n(82),n=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(n,h);var e,t=o(n);function n(e){return function(e){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),(e=t.call(this,e)).state={visiblePlaylist:[]},e._isLoading=!1,e._hasShown=!1,e._hadError=!1,e._hideTime=-1,e._handleFadeOut=e._handleFadeOut.bind(s(e)),e}return e=[{key:"_syncVisiblePlaylist",value:function(){this.state.visiblePlaylist!==this.props.playlist&&0<this.props.playlist.length&&this.setState({visiblePlaylist:this.props.playlist})}},{key:"_handleFadeOut",value:function(){this._syncVisiblePlaylist()}},{key:"componentDidUpdate",value:function(e){var n=this,t=this.props,i=t.currentPosition,r=t.duration,a=t.videoData;if(!(isNaN(i)||isNaN(r)||0===r||"vod"!==(null==a?void 0:a.state)||"469"===(null==a?void 0:a.doctypeID)&&0===(null!==(d=null==a||null===(c=a.column)||void 0===c?void 0:c.length)&&void 0!==d?d:0))){var o=this.props,s=o.isEndscreenVisible,l=o.hideEndscreen;if(e.videoData.guid!==a.guid)return s&&(this._hideTime=Date.now(),l()),void(this._hasShown=!1);var t=this.props,c=t.showEndscreen,u=t.replacePlaylist,d=t.playlist,o=t.onEndsceenShown;!s&&!this._isLoading&&0===d.length&&Math.floor(i)>Math.max(Math.floor(r)-20,0)&&!this._hadError&&(this._isLoading=!0,l=(e=this.props).videoApiUrl,t=e.fields,e=e.playerSettings,g.getNewPlaylist(l,e,a,t).then(function(e){var t;!e||1===e.length&&(null==e||null===(t=e[0])||void 0===t?void 0:t.guid)===a.guid?(n._hadError=!0,n._isLoading=!1):(u(e),n.setState({visiblePlaylist:e},function(){return n._isLoading=!1}))}).catch(function(e){console.error("Failed to load playlist for endscreen",e),n._isLoading=!1})),!s&&!this._isLoading&&0<d.length&&!this._hasShown&&Math.floor(i)>Math.max(Math.floor(r)-7,0)&&Date.now()-2e3>this._hideTime&&(o(),this._syncVisiblePlaylist(),this._hasShown=!0,c())}}},{key:"render",value:function(){var e=[y.container],t=this.props,n=t.isEndscreenVisible,i=t.isControlsVisible,r=t.width,a=t.videoData,t=t.duration,o=n&&0<t&&"vod"===(null==a?void 0:a.state)&&("469"!==(null==a?void 0:a.doctypeID)||0<(null==a||null===(o=a.column)||void 0===o?void 0:o.length));o&&e.push(y.fadeIn),i&&e.push(y.controlsVisible),r<440&&e.push(y.fullscreen);var i={className:e.join(" "),isVisible:o},r=this.props,e=r.currentBreakpoint,o=r.currentPosition,s=r.playVideo,l=this.state.visiblePlaylist;if(null!==l){r="16U"===e||"full"===e,e={currentBreakpoint:e};return d(v,c({},i,{onFadeOut:this._handleFadeOut,onClose:this.props.hideEndscreen}),d("div",{className:y.headerText},"Up Next"),d(m,c({videoData:l[0],showCountdown:n,duration:t,currentPosition:o,onClick:function(){return s(l[0])}},e)),r&&d(m,c({videoData:l[1],onClick:function(){return s(l[1])}},e)))}}}],i(n.prototype,e),n}(),_=p(function(e){return{width:e.width,currentPosition:e.currentPosition,videoData:e.videoData,duration:e.duration,isEndscreenVisible:e.isEndscreenVisible,currentBreakpoint:e.currentBreakpoint,isControlsVisible:e.isControlsVisible,playlist:e.playlist}},{showEndscreen:f,hideEndscreen:u,replacePlaylist:_})(n);e.exports={Endscreen:_,UnconnectedEndscreen:n}},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=s(n);return e=i?(e=s(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==r(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=n(1),c=l.h,u=l.Component,d=n(9),h=n(82),n=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(n,u);var e,t=o(n);function n(e){return function(e){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),t.call(this,e)}return e=[{key:"_getThumbnail",value:function(){var e=this.props,t=e.videoData,n=e.currentBreakpoint,e=220;return"8U"===n?e=150:"4U"===n?e=120:"tiny"===n&&(e=70),d.pickBestThumbnail(t.thumbnailList,e,.5625*e)}},{key:"_renderCountdown",value:function(){var e=this.props,t=e.duration,e=e.currentPosition,t=Math.max(Math.floor(t)-Math.floor(e),0),e=1===t?"second":"seconds";return c("div",{className:h.countdownText},"Starting in ",c("strong",null,t)," ",e)}},{key:"render",value:function(){var e=this.props,t=e.videoData,e=e.showCountdown;return t?c("div",{className:h.row,onClick:this.props.onClick},t.thumbnailList&&c("img",{className:h.thumbnail,src:this._getThumbnail(),alt:t.name}),c("div",{className:h.textContainer},c("div",{className:h.videoTitle},t.name),e&&this._renderCountdown())):null}}],i(n.prototype,e),n}();n.defaultProps={showCountdown:!1,onClick:function(){}},e.exports=n},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=l(n);return e=i?(e=l(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==r(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(){return f("playerDisplayed")}var i=n(1),u=i.h,d=i.Component,h=n(3).connect,p=n(178),i=n(9),_=i.gTimeFormat,f=i.createMark,g=i.pickBestThumbnail,v=n(179),m=n(180),y=n(181),S=n(182),E=n(183),n=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(r,d);var e,i=s(r);function r(e){!function(e){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this);var t=i.call(this,e),n={};switch(e.layout){case"foe":n=m;break;case"wsj-article":n=y;break;case"mobile":n=S;break;case"barrons-video-center":n=E}return t.theme=Object.assign({},v,n),t.state={thumbSrc:t._getThumbnail()},t._updateThumbSrc=p(function(){t.setState({thumbSrc:t._getThumbnail()})},350),t}return e=[{key:"componentDidUpdate",value:function(e,t){e.width===this.props.width&&e.height===this.props.height&&this.state.thumbSrc||this._updateThumbSrc()}},{key:"_renderGradient",value:function(e){var t=this.props,n=t.layout,t=t.suppressHeadline;return"mobile"!==n&&"wsj-article"!==n&&"foe"!==n||"foe"===n&&t?null:u("div",{className:e?this.theme.gradientTop:this.theme.gradient})}},{key:"_renderHeadline",value:function(){var e=this.props,t=e.suppressHeadline,n=e.layout,e=e.width;if(t||"mobile"===n||"wsj-article"===n)return null;n={};return e<=470&&(n.fontSize="15px",n.lineHeight="22px"),u("div",{className:this.theme.videoThumbText,style:n},u("span",{className:this.theme.videoTitle},this.props.videoData.name))}},{key:"_renderFlashLine",value:function(){var e=this.props,t=e.layout,n=e.videoData,i=e.showFlashLine,e="";if("mobile"===t&&"string"==typeof n.seriesName)e=n.seriesName;else if("wsj-article"===t&&"string"==typeof n.name)e=n.name;else{if(!i||"string"!=typeof n.seriesName)return null;e="Video | ".concat(n.seriesName)}return u("div",{className:this.theme.videoThumbFlashLine},e)}},{key:"_renderCTA",value:function(){var e=this.props,t=e.layout,e=e.videoData;if("wsj-article"!==t)return"mobile"===t?u("div",{className:this.theme.videoThumbCta},"Play Video"):"foe"===t&&"string"==typeof e.seriesName?u("div",{className:this.theme.videoThumbCta},e.seriesName):null;t=null;return"live"!==e.state&&(t=u("span",null,"| ",_(e.duration))),u("div",{className:this.theme.videoThumbCta},"Play Video ",t)}},{key:"_getThumbnail",value:function(){if(this.props.thumbnailOverride)return this.props.thumbnailOverride;var e=this.props,t=e.videoData,n=e.width,e=e.height;return t.thumbnailImageManager?t.thumbnailImageManager+"?width="+n:t.thumbnailList?g(t.thumbnailList,n,e):t.thumbnailURL}},{key:"render",value:function(){var e=this.state.thumbSrc;if(!this.props.isThumbnailVisible)return null;var t=this.props,n=t.videoId,i=t.videoData,r=t.onClick,a=t.graphics,o=this._renderFlashLine(),t=null!==o;return u("div",{class:"video-thumb",id:"video-thumb-".concat(n)},u("div",{className:this.theme.vidThumb},u("div",{className:this.theme.videoThumbContent,onClick:r},this._renderGradient(t),u("div",{className:this.theme.videoHint,dangerouslySetInnerHTML:{__html:a["play-overlay"]}}),void 0!==e&&u("img",{className:this.theme.videoThumbImg,alt:i.name,src:e,onLoad:c}),this._renderHeadline(),o,this._renderCTA())))}}],a(r.prototype,e),r}(),n=h(function(e){return{width:e.width,height:e.height,isThumbnailVisible:e.isThumbnailVisible,videoData:e.videoData}})(n);e.exports=n},function(c,e,t){!function(e){function m(){return n.Date.now()}var i=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt,t="object"==typeof e&&e&&e.Object===Object&&e,e="object"==typeof self&&self&&self.Object===Object&&self,n=t||e||Function("return this")(),l=Object.prototype.toString,y=Math.max,S=Math.min;function E(e){var t=typeof e;return e&&("object"==t||"function"==t)}function b(e){if("number"==typeof e)return e;if("symbol"==typeof(t=e)||t&&"object"==typeof t&&"[object Symbol]"==l.call(t))return NaN;var t;if("string"!=typeof(e=E(e)?E(n="function"==typeof e.valueOf?e.valueOf():e)?n+"":n:e))return 0===e?e:+e;e=e.replace(i,"");var n=a.test(e);return n||o.test(e)?s(e.slice(2),n?2:8):r.test(e)?NaN:+e}c.exports=function(i,n,e){var r,a,o,s,l,c,u=0,d=!1,h=!1,t=!0;if("function"!=typeof i)throw new TypeError("Expected a function");function p(e){var t=r,n=a;return r=a=void 0,u=e,s=i.apply(n,t)}function _(e){var t=e-c;return void 0===c||n<=t||t<0||h&&o<=e-u}function f(){var e,t=m();if(_(t))return g(t);l=setTimeout(f,(e=n-(t-c),h?S(e,o-(t-u)):e))}function g(e){return l=void 0,t&&r?p(e):(r=a=void 0,s)}function v(){var e=m(),t=_(e);if(r=arguments,a=this,c=e,t){if(void 0===l)return u=t=c,l=setTimeout(f,n),d?p(t):s;if(h)return l=setTimeout(f,n),p(c)}return void 0===l&&(l=setTimeout(f,n)),s}return n=b(n)||0,E(e)&&(d=!!e.leading,o=(h="maxWait"in e)?y(b(e.maxWait)||0,n):o,t="trailing"in e?!!e.trailing:t),v.cancel=function(){void 0!==l&&clearTimeout(l),r=c=a=l=void(u=0)},v.flush=function(){return void 0===l?s:g(m())},v}}.call(this,t(22))},function(e,t,n){e.exports={vidThumb:"base__vidThumb_1ClPgLDBgLr-7YsvMmn-sY",videoThumbContent:"base__videoThumbContent_3Kb4OYgEfuuLpg9LXT8b69",videoHint:"base__videoHint_Rz0yg9Tt-lxY16-R1Fxe5",videoThumbImg:"base__videoThumbImg_1clHXjbP_aRS55gpoYwjW2",videoThumbFlashLine:"base__videoThumbFlashLine_1U6xOGEqqoiEJu5jHM1hAQ",videoThumbText:"base__videoThumbText_1PRf5FdWQbSwLGFnet8uCa",videoTitle:"base__videoTitle_3REXSZqJQDsfabpaaSWGAf"}},function(e,t,n){e.exports={videoThumbContent:"foe__videoThumbContent_1nsyi53vKav96Y_EOWeCh6",videoHint:"foe__videoHint_1pWcN5AqwvaiuDjVp3WHny",gradient:"foe__gradient_3ecTM0uXyHmdCPRTWc8WqI",gradientTop:"foe__gradientTop_2qvfusi-Yvew7TBOGOJHIh",videoThumbText:"foe__videoThumbText_1nTI7-QQIE1mK-XLNH-vg5",videoTitle:"foe__videoTitle_2jEeQEkNXmVTj4HvVdvp-0",videoThumbCta:"foe__videoThumbCta_25WYND_l7g3TzAw7xW301m"}},function(e,t,n){e.exports={gradient:"wsj-article__gradient_CRbo3WFYc_EgONG4rBQgu mobile__gradient_3T-q4CQI-g0ojJ-QWlMsua",gradientTop:"wsj-article__gradientTop_3cj0JstF817A2AnHJuM-tg mobile__gradientTop_19Xt6M_W5rjnbjO8IINtz8",videoThumbContent:"wsj-article__videoThumbContent_YML1WOJl1YMu_KdQvoqh base__videoThumbContent_3Kb4OYgEfuuLpg9LXT8b69",videoHint:"wsj-article__videoHint_g5jkq8msD-toSrHk8KvsI mobile__videoHint_2B69kcP3mOOD7rnnxPL8YH",videoThumbFlashLine:"wsj-article__videoThumbFlashLine_31No8cYhZm2FHmS3cO0pNy",videoThumbCta:"wsj-article__videoThumbCta_wbOurVY-DRWfP7X86qieu mobile__videoThumbCta_3NPpbP_vRPxMIYRzd2YiJa"}},function(e,t,n){e.exports={gradient:"mobile__gradient_3T-q4CQI-g0ojJ-QWlMsua",gradientTop:"mobile__gradientTop_19Xt6M_W5rjnbjO8IINtz8",videoThumbContent:"mobile__videoThumbContent_3g5J0Hg4Oo3tQLJYvv3tTh base__videoThumbContent_3Kb4OYgEfuuLpg9LXT8b69",videoHint:"mobile__videoHint_2B69kcP3mOOD7rnnxPL8YH",videoThumbFlashLine:"mobile__videoThumbFlashLine_cbyksiYAy5t9QkuHg6MfR",videoThumbCta:"mobile__videoThumbCta_3NPpbP_vRPxMIYRzd2YiJa"}},function(e,t,n){},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=s(n);return e=i?(e=s(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==r(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=n(1),c=l.h,u=l.Component,l=n(3).connect,d=n(185),n=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,u);var e=o(t);function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.apply(this,arguments)}return i(t.prototype,[{key:"render",value:function(){var e=this.props,t=e.isControlsVisible,n=e.isCountdownVisible,i=e.isAdMode,i=(e.isLive,[d.videoTitleContainer,!t||n||i?"video-fade-out":"video-fade-in"]);return c("div",{id:"video-title-".concat(this.props.videoId),className:i.join(" ")},c("div",{className:d.videoTitle},this.props.name))}}]),t}(),n=l(function(e){return{isControlsVisible:e.isControlsVisible,name:e.videoData.name,isCountdownVisible:e.isCountdownVisible,isAdMode:e.isAdMode,isLive:"live"==e.videoData.state}})(n);e.exports=n},function(e,t,n){e.exports={videoTitleContainer:"styles__videoTitleContainer_2N-qWhjdmXNqdA0OpqWVr_",videoTitle:"styles__videoTitle_25kJSwCFvWN3BOOrBzhlDq"}},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=c(n);return e=i?(e=c(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==r(e)&&"function"!=typeof e?l(t):e}}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=n(1),d=u.h,h=u.Component,p=n(51),_=n(3).connect,f=n(187),u=n(13).hideSavedModal,n=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(n,h);var e,t=s(n);function n(e){return function(e){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),(e=t.call(this,e))._hasShown=!1,e._hideSavedModal=e._hideSavedModal.bind(l(e)),e._savedContentPage="https://www.wsj.com/user/personalization/saved-content",e}return e=[{key:"_hideSavedModal",value:function(){this.props.hideSavedModal()}},{key:"shouldComponentUpdate",value:function(e){return this.props.isSavedQueueModalVisible!==e.isSavedQueueModalVisible}},{key:"componentDidUpdate",value:function(e){var t=this.props;t.hideSavedModal,t.isSavedQueueModalVisible||this._hasShown||(this._hasShown=!0)}},{key:"render",value:function(){if(!this.props.isSavedQueueModalVisible)return null;var e=this.props,t=e.isSavedQueueModalVisible,n=e.width,e=[f.videoTitleContainer,t?"video-fade-in":"video-fade-out"],t=t;t&&e.push(f.fadeIn);t={className:f.videoSavedQueueModalContainer,hideCloseButton:!0,hideTimer:5e3,isVisible:t};return d(p,i({},t,{onClose:this._hideSavedModal}),d("div",{className:f.videoSavedQueueModalText},"Added ",450<n?"to your saved content":"to saved"),d("a",{target:"_blank",href:this._savedContentPage},d("button",{className:f.videoSavedQueueModalButton},"View saved content")))}}],a(n.prototype,e),n}(),n=_(function(e){return{width:e.width,isSavedQueueModalVisible:e.isSavedQueueModalVisible}},{hideSavedModal:u})(n);e.exports=n},function(e,t,n){e.exports={videoSavedQueueModalContainer:"styles__videoSavedQueueModalContainer_1gfJyAvga7sj0VMg26BPPw",videoSavedQueueModalText:"styles__videoSavedQueueModalText_qNgvU3syGaAOx5RYtAtXn",videoSavedQueueModalButton:"styles__videoSavedQueueModalButton_13toxT1j9KEX4PTEImAe6r"}},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=s(n);return e=i?(e=s(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==r(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){return u("div",{className:_.countdownSquare},u("div",{className:_.squareNumber},e.value),u("div",{className:_.squareTime},e.time))}var c=n(1),u=c.h,d=c.Component,h=n(3).connect,p=n(13),c=p.showCountdown,p=p.hideCountdown,_=n(189),n=n(9),f=n.pickBestThumbnail,g=n.fetchServerTime,n=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(n,d);var t=o(n);function n(e){return function(e){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),(e=t.call(this,e)).state={timerStarted:!1,secondsRemaining:null,endCountdown:!1,thumbnailURL:null,serverTime:null},e.interval=null,e}return i(n.prototype,[{key:"componentDidMount",value:function(){var t=this;this.props.videoData&&this.setState({thumbnailURL:this._getThumbnail()}),this.props.videoData&&g(this.props.videoApiUrl+"time").then(function(e){t.setState({serverTime:e.time})}).catch(function(e){console.error("Failed to fetch server time",e),t.setState({serverTime:Date.now()})})}},{key:"componentDidUpdate",value:function(e){var t,n,i,r,a=this;!this.props.videoData||this.props.videoData.guid===e.videoData.guid&&null!==this.state.thumbnailURL||this.setState({thumbnailURL:this._getThumbnail()}),null!==this.state.serverTime&&!this.state.timerStarted&&this.props.videoData&&this.props.videoData.formattedCreationDate&&"future"===this.props.videoData.state&&(t=new Date(this.state.serverTime),e=(n=new Date(this.props.videoData.iso8601CreationDate)).getTime()-t.getTime(),i=Date.now()-t.getTime(),0<e&&(this.setState({serverTime:null,secondsRemaining:(r=function(){return(n.getTime()-Date.now()+i)/1e3})(),timerStarted:!0}),this.interval=setInterval(function(){return a.setState({secondsRemaining:r()})},250),this.props.showCountdown())),this.state.timerStarted&&this.state.secondsRemaining<1&&this.props.isCountdownVisible&&(clearInterval(this.interval),this.props.hideCountdown(),this.props.onCountdownComplete())}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"_getThumbnail",value:function(){if(this.props.thumbnailOverride)return this.props.thumbnailOverride;var e=this.props,t=e.videoData,n=e.width,e=e.height;return t.thumbnailImageManager?t.thumbnailImageManager+"?width="+n:t.thumbnailList?f(t.thumbnailList,n,e):t.thumbnailURL}},{key:"render",value:function(){return this.props.isCountdownVisible&&"future"===this.props.videoData.state?(this.state.secondsRemaining&&(i=parseInt(this.state.secondsRemaining,10),0<(e=Math.floor(i/86400))&&(i-=3600*e*24),i-=3600*(t=Math.floor(i/3600)),i-=60*(n=Math.floor(i/60))),u("div",{className:_.countdownContainer},u("div",{style:{backgroundImage:"linear-gradient(-180deg, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.8) 100%), url(".concat(this.state.thumbnailURL,")")},className:_.thumbnail}),u("div",{className:_.countdown},u("div",{className:_.title},this.state.secondsRemaining?this.props.isQAEvent?"LIVE Q&A BEGINS IN":"LIVE STREAM BEGINS IN":""),null!==this.state.secondsRemaining&&null!==e&&u("div",null,0<e&&u(l,{value:("0"+e).slice(-2),time:1===e?"DAY":"DAYS"}),u(l,{value:("0"+t).slice(-2),time:1===t?"HOUR":"HOURS"}),u(l,{value:("0"+n).slice(-2),time:1===n?"MINUTE":"MINUTES"}),e<1&&u(l,{value:("0"+i).slice(-2),time:1===i?"SECOND":"SECONDS"}))))):null;var e,t,n,i}}]),n}(),n=h(function(e){var t;return{videoData:e.videoData,width:e.width,height:e.height,isQAEvent:null===(t=e.videoData)||void 0===t?void 0:t.isQAEvent,isCountdownVisible:e.isCountdownVisible}},{showCountdown:c,hideCountdown:p})(n);e.exports=n},function(e,t,n){e.exports={countdownContainer:"styles__countdownContainer_2pr34wbnvFCqOfp90Fp-cE",thumbnail:"styles__thumbnail_11r309-0jEMDC1tsf36Bcd",countdown:"styles__countdown_2trNv4b4zgOZb1uekjxqOE",countdownSquare:"styles__countdownSquare_1XPXuBXoiDB15D_POUOPZP",squareNumber:"styles__squareNumber_2nygUMI8HtGGPZpV5gP-XX",squareTime:"styles__squareTime_1JahuyWPVV4CxqoRyv9-GF",title:"styles__title_QmwLtBbjyErNbhH7qGUhp"}},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=s(n);return e=i?(e=s(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==r(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=n(1),c=l.h,u=l.Component,d=n(3).connect,h=n(191),l=n(13).hideClickForSound,n=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,u);var e=o(t);function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.apply(this,arguments)}return i(t.prototype,[{key:"shouldComponentUpdate",value:function(e){return this.props.isCountdownVisible!==e.isCountdownVisible||this.props.isClickForSoundVisible!==e.isClickForSoundVisible||this.props.isThumbnailVisible!==e.isThumbnailVisible||this.props.isLive!==e.isLive}},{key:"render",value:function(){var e=this.props,t=e.onClicked,n=(e.isCountdownVisible,e.isClickForSoundVisible),i=e.hideClickForSound,r=e.isThumbnailVisible;if(e.isLive,e.isControlsVisible,e.isLiveButtonVisible,this.props.isCountdownVisible||!n||r)return null;r=[h.clickForSoundWrapper];return this.props.isLive&&!this.props.isControlsVisible&&this.props.isLiveButtonVisible&&r.push(h.clickForSoundWrapperWithLive),c("div",{onClick:function(){i(),t()},id:"video-sound-".concat(this.props.videoId),className:r.join(" ")},c("div",null,c("span",{className:h.cta,dangerouslySetInnerHTML:{__html:'<svg height="24px" version="1.1" viewBox="4 6 20 24" width="24px"><use class="ytp-svg-shadow" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ytp-svg-13"></use><path class="ytp-svg-fill" d="M8,21 L12,21 L17,26 L17,10 L12,15 L8,15 L8,21 Z M19,14 L19,22 C20.48,21.32 21.5,19.77 21.5,18 C21.5,16.26 20.48,14.74 19,14 Z M19,11.29 C21.89,12.15 24,14.83 24,18 C24,21.17 21.89,23.85 19,24.71 L19,26.77 C23.01,25.86 26,22.28 26,18 C26,13.72 23.01,10.14 19,9.23 L19,11.29 Z" id="ytp-svg-13"></path><svg class="ytp-svg-sound-mute-group" style="opacity: 0;"><use class="ytp-svg-shadow" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ytp-svg-14"></use><path class="ytp-svg-fill" d="M 26.11,15.73 24.85,14.5 22.52,16.76 20.20,14.5 18.94,15.73 21.26,18 18.94,20.26 20.20,21.5 22.52,19.23 24.85,21.5 26.11,20.26 23.79,18 l 2.32,-2.26 0,0 z" id="ytp-svg-14"></path></svg></svg><span> Tap For Sound</span>'}})))}}]),t}(),n=d(function(e){return{isCountdownVisible:e.isCountdownVisible,isClickForSoundVisible:e.isClickForSoundVisible,isThumbnailVisible:e.isThumbnailVisible,isLive:"live"==e.videoData.state,isControlsVisible:e.isControlsVisible}},{hideClickForSound:l})(n);e.exports=n},function(e,t,n){e.exports={clickForSoundWrapper:"styles__clickForSoundWrapper_1GX2g3g0TxMstht6vN1xga",cta:"styles__cta_2Ze8pPggh35dr7QDOTQwup",clickForSoundWrapperWithLive:"styles__clickForSoundWrapperWithLive_31xCi2ZLYtcOfi1U365Eid"}},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=s(n);return e=i?(e=s(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==r(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=n(1),c=l.h,u=l.Component,l=n(3).connect,d=n(193),n=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,u);var e=o(t);function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.apply(this,arguments)}return i(t.prototype,[{key:"render",value:function(){var e=this.props;return e.isCountdownVisible,e.isClickForSoundVisible,e.isThumbnailVisible,e.isLive,this.props.isAdMode,!this.props.isLive||this.props.isCountdownVisible||this.props.isControlsVisible&&!this.props.isClickForSoundVisible?null:c("div",{id:"video-live-".concat(this.props.videoId),className:d.liveIndicatorWrapper},c("span",{className:d.liveButton},"LIVE"))}}]),t}(),n=l(function(e){return{isCountdownVisible:e.isCountdownVisible,isClickForSoundVisible:e.isClickForSoundVisible,isThumbnailVisible:e.isThumbnailVisible,isLive:"live"==e.videoData.state,isControlsVisible:e.isControlsVisible,isAdMode:e.isAdMode}})(n);e.exports=n},function(e,t,n){e.exports={liveIndicatorWrapper:"styles__liveIndicatorWrapper_3LqyrHPQyYyI-tNdm-bPST",liveButton:"styles__liveButton_1ns5XvEXwEg8MK2qEG0uaI"}},function(e,t,n){var i=n(1).h,r=n(3).useSelector,a=n(30),o=n(10),s=n(195),n=n(196),l={__html:"".concat(n," <div></div>")};function c(e){return!e.isThumbnailVisible&&(e.isBuffering||e.isAdBuffering||e.isPlaybackInitializing||e.isLoadingSpinnerVisible||e.adInitState===o.STARTED||e.videoApiLoadState===o.STARTED||e.imaLoadState===o.STARTED||e.hlsJsLoadState===o.STARTED)}e.exports=function(){return r(c)?i("div",{className:a("video-loading",s.loader)},i("div",{className:s.loaderInner,dangerouslySetInnerHTML:l})):null}},function(e,t,n){e.exports={loader:"styles__loader_2fMYXAAKUoWUtRfViLH466",hide:"styles__hide_26mxdO48gpuVbo3RsXGG8x",loaderInner:"styles__loaderInner_3TVMSN7m78Wly8qB_0U-qS",loadspin:"styles__loadspin_1GpaQPOz0YpaJBYqI5pk6b"}},function(e,t){e.exports='<svg x="0px" y="0px" viewBox="0 0 60 60"><mask id="loading-mask-top-l" maskUnits="userSpaceOnUse"><rect x="0" y="30" width="60" height="30" fill="white"></rect></mask><circle cx="30" cy="30" r="29" stroke="#0294E8" stroke-width="2" fill="transparent" mask="url(#loading-mask-top-l)"></circle><mask id="loading-mask-bottom-l" maskUnits="userSpaceOnUse"><rect x="0" y="0" width="60" height="30" fill="white"></rect></mask><circle cx="30" cy="30" r="29" stroke="#666666" stroke-width="2" fill="transparent" mask="url(#loading-mask-bottom-l)"></circle></svg>'},function(e,t,n){e.exports={Line:n(198),Circle:n(84),SemiCircle:n(200),Path:n(83),Shape:n(31),utils:n(21)}},function(e,t,n){var i=n(31),r=n(21),n=function(e,t){this._pathTemplate="M 0,{center} L 100,{center}",i.apply(this,arguments)};((n.prototype=new i).constructor=n).prototype._initializeSvg=function(e,t){e.setAttribute("viewBox","0 0 100 "+t.strokeWidth),e.setAttribute("preserveAspectRatio","none")},n.prototype._pathString=function(e){return r.render(this._pathTemplate,{center:e.strokeWidth/2})},n.prototype._trailString=function(e){return this._pathString(e)},e.exports=n},function(b,e,t){!function(){var s,c,o,l,a,u,d,i,t,h,y=this||Function("return this")(),p=function(){"use strict";var u,n,d,h,p,e=Date.now||function(){return+new Date},_="undefined"!=typeof SHIFTY_DEBUG_NOW?SHIFTY_DEBUG_NOW:e;function r(){}function a(e,t){for(var n in e)Object.hasOwnProperty.call(e,n)&&t(n)}function o(t,n){return a(n,function(e){t[e]=n[e]}),t}function s(t,n){a(n,function(e){void 0===t[e]&&(t[e]=n[e])})}function f(e,t,n,i,r,a,o){var s,l,c=e<a?0:(e-a)/r;for(s in t)t.hasOwnProperty(s)&&(l="function"==typeof(l=o[s])?l:u[l],t[s]=g(n[s],i[s],l,c));return t}function g(e,t,n,i){return e+(t-e)*n(i)}function v(t,n){var i=m.prototype.filter,r=t._filterArgs;a(i,function(e){void 0!==i[e][n]&&i[e][n].apply(t,r)})}function l(e,t,n,i,r,a,o,s,l,c,u){p=t+n+i,d=Math.min(u||_(),p),h=p<=d,p=i-(p-d),e.isPlaying()&&(h?(l(o,e._attachment,p),e.stop(!0)):(e._scheduleId=c(e._timeoutHandler,1e3/60),v(e,"beforeTween"),d<t+n?f(1,r,a,o,1,1,s):f(d,r,a,o,i,t+n,s),v(e,"afterTween"),l(r,e._attachment,p)))}function c(e,t){var n={},i=typeof t;return a(e,"string"==i||"function"==i?function(e){n[e]=t}:function(e){n[e]||(n[e]=t[e]||"linear")}),n}function m(e,t){this._currentState=e||{},this._configured=!1,this._scheduleFunction=n,void 0!==t&&this.setConfig(t)}return n="undefined"!=typeof window&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||window.mozCancelRequestAnimationFrame&&window.mozRequestAnimationFrame)||setTimeout,m.prototype.tween=function(e){return this._isTweening?this:(void 0===e&&this._configured||this.setConfig(e),this._timestamp=_(),this._start(this.get(),this._attachment),this.resume())},m.prototype.setConfig=function(e){e=e||{},this._configured=!0,this._attachment=e.attachment,this._pausedAtTime=null,this._scheduleId=null,this._delay=e.delay||0,this._start=e.start||r,this._step=e.step||r,this._finish=e.finish||r,this._duration=e.duration||500,this._currentState=o({},e.from||this.get()),this._originalState=this.get(),this._targetState=o({},e.to||this.get());var t=this;this._timeoutHandler=function(){l(t,t._timestamp,t._delay,t._duration,t._currentState,t._originalState,t._targetState,t._easing,t._step,t._scheduleFunction)};var n=this._currentState,i=this._targetState;return s(i,n),this._easing=c(n,e.easing||"linear"),this._filterArgs=[n,this._originalState,i,this._easing],v(this,"tweenCreated"),this},m.prototype.get=function(){return o({},this._currentState)},m.prototype.set=function(e){this._currentState=e},m.prototype.pause=function(){return this._pausedAtTime=_(),this._isPaused=!0,this},m.prototype.resume=function(){return this._isPaused&&(this._timestamp+=_()-this._pausedAtTime),this._isPaused=!1,this._isTweening=!0,this._timeoutHandler(),this},m.prototype.seek=function(e){e=Math.max(e,0);var t=_();return this._timestamp+e===0||(this._timestamp=t-e,this.isPlaying()||(this._isTweening=!0,this._isPaused=!1,l(this,this._timestamp,this._delay,this._duration,this._currentState,this._originalState,this._targetState,this._easing,this._step,this._scheduleFunction,t),this.pause())),this},m.prototype.stop=function(e){return this._isTweening=!1,this._isPaused=!1,this._timeoutHandler=r,(y.cancelAnimationFrame||y.webkitCancelAnimationFrame||y.oCancelAnimationFrame||y.msCancelAnimationFrame||y.mozCancelRequestAnimationFrame||y.clearTimeout)(this._scheduleId),e&&(v(this,"beforeTween"),f(1,this._currentState,this._originalState,this._targetState,1,0,this._easing),v(this,"afterTween"),v(this,"afterTweenEnd"),this._finish.call(this,this._currentState,this._attachment)),this},m.prototype.isPlaying=function(){return this._isTweening&&!this._isPaused},m.prototype.setScheduleFunction=function(e){this._scheduleFunction=e},m.prototype.dispose=function(){for(var e in this)this.hasOwnProperty(e)&&delete this[e]},m.prototype.filter={},u=m.prototype.formula={linear:function(e){return e}},o(m,{now:_,each:a,tweenProps:f,tweenProp:g,applyFilter:v,shallowCopy:o,defaults:s,composeEasingObject:c}),"function"==typeof SHIFTY_DEBUG_NOW&&(y.timeoutHandler=l),b.exports=m}();function _(n){c.each(n,function(e){var t=n[e];"string"==typeof t&&t.match(i)&&(n[e]=f(i,t,r))})}function r(e){3===(e=(e=e).replace(/#/,"")).length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]),t[0]=n(e.substr(0,2)),t[1]=n(e.substr(2,2)),t[2]=n(e.substr(4,2)),e=t;return"rgb("+e[0]+","+e[1]+","+e[2]+")"}function n(e){return parseInt(e,16)}function f(e,t,n){var i=t.match(e),r=t.replace(e,"VAL");if(i)for(var a,o=i.length,s=0;s<o;s++)a=i.shift(),r=r.replace("VAL",n(a));return r}function g(e){for(var t=e.match(a),n=t.length,i=e.match(d)[0],r=0;r<n;r++)i+=parseInt(t[r],10)+",";return i.slice(0,-1)+")"}function v(r,a){c.each(a,function(e){for(var t=S(r[e]),n=t.length,i=0;i<n;i++)r[a[e].chunkNames[i]]=+t[i];delete r[e]})}function m(i,r){c.each(r,function(e){i[e];var t=function(e,t){h.length=0;for(var n=t.length,i=0;i<n;i++)h.push(e[t[i]]);return h}(function(e,t){for(var n,i={},r=t.length,a=0;a<r;a++)i[n=t[a]]=e[n],delete e[n];return i}(i,r[e].chunkNames),r[e].chunkNames),n=function(e,t){for(var n=e,i=t.length,r=0;r<i;r++)n=n.replace("VAL",+t[r].toFixed(4));return n}(r[e].formatString,t);i[e]=f(u,n,g)})}function S(e){return e.match(a)}function E(e,t,n,i,r,a){var l,c,u,o,s,d;function h(e){return((l*e+c)*e+u)*e}function p(e){return 0<=e?e:0-e}return l=1-(u=3*t)-(c=3*(i-t)-u),o=1-(d=3*n)-(s=3*(r-n)-d),a=function(e,t){for(var n,i,r,a,o=e,s=0;s<8;s++){if(p(r=h(o)-e)<t)return o;if(p(a=(3*l*o+2*c)*o+u)<1e-6)break;o-=r/a}if((o=e)<(n=0))return n;if((i=1)<o)return i;for(;n<i;){if(p((r=h(o))-e)<t)return o;r<e?n=o:i=o,o=.5*(i-n)+n}return o}(e,1/(200*a)),((o*a+s)*a+d)*a}p.shallowCopy(p.prototype.formula,{easeInQuad:function(e){return Math.pow(e,2)},easeOutQuad:function(e){return-(Math.pow(e-1,2)-1)},easeInOutQuad:function(e){return(e/=.5)<1?.5*Math.pow(e,2):-.5*((e-=2)*e-2)},easeInCubic:function(e){return Math.pow(e,3)},easeOutCubic:function(e){return Math.pow(e-1,3)+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*Math.pow(e,3):.5*(Math.pow(e-2,3)+2)},easeInQuart:function(e){return Math.pow(e,4)},easeOutQuart:function(e){return-(Math.pow(e-1,4)-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*Math.pow(e,4):-.5*((e-=2)*Math.pow(e,3)-2)},easeInQuint:function(e){return Math.pow(e,5)},easeOutQuint:function(e){return Math.pow(e-1,5)+1},easeInOutQuint:function(e){return(e/=.5)<1?.5*Math.pow(e,5):.5*(Math.pow(e-2,5)+2)},easeInSine:function(e){return 1-Math.cos(e*(Math.PI/2))},easeOutSine:function(e){return Math.sin(e*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e)-1)},easeInExpo:function(e){return 0===e?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return 1===e?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return 0===e?0:1===e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*--e))},easeInCirc:function(e){return-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-Math.pow(e-1,2))},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeOutBounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInBack:function(e){return e*e*(2.70158*e-1.70158)},easeOutBack:function(e){return--e*e*(2.70158*e+1.70158)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},elastic:function(e){return-1*Math.pow(4,-8*e)*Math.sin((6*e-1)*(2*Math.PI)/2)+1},swingFromTo:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},swingFrom:function(e){return e*e*(2.70158*e-1.70158)},swingTo:function(e){return--e*e*(2.70158*e+1.70158)+1},bounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bouncePast:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?2-(7.5625*(e-=1.5/2.75)*e+.75):e<2.5/2.75?2-(7.5625*(e-=2.25/2.75)*e+.9375):2-(7.5625*(e-=2.625/2.75)*e+.984375)},easeFromTo:function(e){return(e/=.5)<1?.5*Math.pow(e,4):-.5*((e-=2)*Math.pow(e,3)-2)},easeFrom:function(e){return Math.pow(e,4)},easeTo:function(e){return Math.pow(e,.25)}}),p.setBezierFunction=function(e,t,n,i,r){var a,o,s,l,c=(a=t,o=n,s=i,l=r,function(e){return E(e,a,o,s,l,1)});return c.displayName=e,c.x1=t,c.y1=n,c.x2=i,c.y2=r,p.prototype.formula[e]=c},p.unsetBezierFunction=function(e){delete p.prototype.formula[e]},(s=new p)._filterArgs=[],p.interpolate=function(e,t,n,i,r){var a=p.shallowCopy({},e),o=r||0,r=p.composeEasingObject(e,i||"linear");s.set({});i=s._filterArgs;i.length=0,i[0]=a,i[1]=e,i[2]=t,i[3]=r,p.applyFilter(s,"tweenCreated"),p.applyFilter(s,"beforeTween");r=p.tweenProps(n,a,e,t,1,o,r);return p.applyFilter(s,"afterTween"),r},c=p,o=/(\d|\-|\.)/,l=/([^\-0-9\.]+)/g,a=/[0-9.\-]+/g,u=new RegExp("rgb\\("+a.source+/,\s*/.source+a.source+/,\s*/.source+a.source+"\\)","g"),d=/^.*\(/,i=/#([0-9]|[a-f]){3,6}/gi,t=[],h=[],c.prototype.filter.token={tweenCreated:function(e,t,n,i){var r,a;_(e),_(t),_(n),this._tokenData=(a={},c.each(r=e,function(e){var t,n,i=r[e];"string"==typeof i&&(n=S(i),a[e]={formatString:((i=(t=i).match(l))?1!==i.length&&!t.charAt(0).match(o)||i.unshift(""):i=["",""],i.join("VAL")),chunkNames:function(e,t){for(var n=[],i=e.length,r=0;r<i;r++)n.push("_"+t+"_"+r);return n}(n,e)})}),a)},beforeTween:function(e,t,n,i){var s,l;s=i,l=this._tokenData,c.each(l,function(e){var t=l[e].chunkNames,n=t.length,i=s[e];if("string"==typeof i)for(var r=i.split(" "),a=r[r.length-1],o=0;o<n;o++)s[t[o]]=r[o]||a;else for(o=0;o<n;o++)s[t[o]]=i;delete s[e]}),v(e,this._tokenData),v(t,this._tokenData),v(n,this._tokenData)},afterTween:function(e,t,n,i){var o,s;m(e,this._tokenData),m(t,this._tokenData),m(n,this._tokenData),o=i,s=this._tokenData,c.each(s,function(e){var t=s[e].chunkNames,n=t.length,i=o[t[0]];if("string"==typeof i){for(var r="",a=0;a<n;a++)r+=" "+o[t[a]],delete o[t[a]];o[e]=r.substr(1)}else o[e]=i})}}}.call(null)},function(e,t,n){var i=n(31),r=n(84),a=n(21),n=function(e,t){this._pathTemplate="M 50,50 m -{radius},0 a {radius},{radius} 0 1 1 {2radius},0",this.containerAspectRatio=2,i.apply(this,arguments)};((n.prototype=new i).constructor=n).prototype._initializeSvg=function(e,t){e.setAttribute("viewBox","0 0 100 50")},n.prototype._initializeTextContainer=function(e,t,n){e.text.style&&(n.style.top="auto",n.style.bottom="0",e.text.alignToBottom?a.setStyle(n,"transform","translate(-50%, 0)"):a.setStyle(n,"transform","translate(-50%, 50%)"))},n.prototype._pathString=r.prototype._pathString,n.prototype._trailString=r.prototype._trailString,e.exports=n},function(e,t,n){"use strict";n.r(t),n.d(t,"createStore",function(){return v});var i=n(5),r=n(86),a=n(0),o=n(10),s=n(13);function l(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function u(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function d(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)),i}function h(i){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach(function(e){var t,n;t=i,e=r[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(r,e))})}return i}var p={width:0,height:0,adInitState:o.NONE,isControlsVisible:!1,isEndscreenVisible:!1,hlsJsLoadState:o.NONE,imaAdErrorState:!1,imaLoadState:o.NONE,isLoadingSpinnerVisible:!1,videoApiLoadState:o.NONE,isMoreVideosSlideVisible:!1,isPlaying:!1,isThumbnailVisible:!1,currentPosition:0,currentAdPosition:0,duration:0,videoData:{secondsUntilStartTime:0},isMuted:!1,isFullScreen:!1,currentBreakpoint:"16U",playlist:[],isCountdownVisible:!1,isAdMode:!1,isAdPlaying:!1,isAdBuffering:!1,isAdsBlocked:!1,isClickForSoundVisible:!1,isPlaybackInitializing:!1,isBuffering:!1,isSavedQueueModalVisible:!1,loggingEnabled:!1};function _(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:p,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case a.j:return h(h({},e),{},{enableLogging:!0});case a.s:return h(h({},e),{},{width:t.width,height:t.height,currentBreakpoint:e.isFullScreen?"full":g(t.width)});case a.z:return h(h({},e),{},{isThumbnailVisible:!0});case a.y:return h(h({},e),{},{isThumbnailVisible:!1});case a.q:return h(h({},e),{},{isMoreVideosSlideVisible:!0});case a.p:return h(h({},e),{},{isMoreVideosSlideVisible:!1});case a.h:return h(h({},e),{},{isControlsVisible:!0});case a.g:return h(h({},e),{},{isControlsVisible:!1});case a.v:return h(h({},e),{},{isEndscreenVisible:!0});case a.m:return h(h({},e),{},{isEndscreenVisible:!1});case a.O:return h(h({},e),{},{isPlaying:!0});case a.N:return h(h({},e),{},{isPlaying:!1});case a.P:return h(h({},e),{},{currentPosition:t.currentPosition});case a.I:return h(h({},e),{},{duration:t.duration});case a.M:return h(h({},e),{},{isMuted:!0});case a.R:return h(h({},e),{},{isMuted:!1});case a.K:return h(h({},e),{},{isFullScreen:!0,currentBreakpoint:"full"});case a.L:return h(h({},e),{},{isFullScreen:!1,currentBreakpoint:g(e.width)});case a.x:return h(h({},e),{},{isSavedQueueModalVisible:!0});case a.o:return h(h({},e),{},{isSavedQueueModalVisible:!1});case a.F:return h(h({},e),{},{videoData:t.videoData,currentPosition:0,duration:t.videoData&&t.videoData.duration?parseInt(t.videoData.duration,10):p.duration,playlist:0<e.playlist.length?f(e.playlist,t.videoData.guid):e.playlist});case a.r:if(!t.playlist||0===t.playlist.length)return e;var n=f(t.playlist,e.videoData.guid);return h(h({},e),{},{playlist:n});case a.i:var n=e.playlist;if(0===n.length)return e;n=(function(e){if(Array.isArray(e))return e}(n=n)||u(n)||l(n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).slice(1);return h(h({},e),{},{playlist:n});case a.u:return h(h({},e),{},{isCountdownVisible:!0,isControlsVisible:!1});case a.l:return h(h({},e),{},{isCountdownVisible:!1});case a.t:return h(h({},e),{},{isClickForSoundVisible:!0});case a.k:return h(h({},e),{},{isClickForSoundVisible:!1});case a.w:return h(h({},e),{},{isLoadingSpinnerVisible:!0});case a.n:return h(h({},e),{},{isLoadingSpinnerVisible:!1});case a.E:return h(h({},e),{},{videoApiLoadState:t.payload});case a.B:return h(h({},e),{},{adInitState:t.payload,isAdsBlocked:t.payload===o.FAILED});case a.D:return h(h({},e),{},{imaLoadState:t.payload,isAdsBlocked:t.payload===o.FAILED});case a.A:return h(h({},e),{},{imaAdErrorState:t.payload});case a.C:return h(h({},e),{},{hlsJsLoadState:t.payload});case a.Q:return h(h({},e),{},{isPlaybackInitializing:!0,currentPosition:0});case a.J:return h(h({},e),{},{isPlaybackInitializing:!1});case a.G:return h(h({},e),{},{isBuffering:!0});case a.H:return h(h({},e),{},{isBuffering:!1});case a.f:return h(h({},e),{},{isAdMode:!0});case a.b:return h(h({},e),{},{isAdMode:!1,isPlaybackInitializing:!1,isAdBuffering:!1,isAdPlaying:!1,currentAdPosition:0});case a.e:return h(h({},e),{},{currentAdPosition:t.payload,isAdBuffering:!1});case a.d:return h(h({},e),{},{isAdPlaying:!0});case a.c:return h(h({},e),{},{isAdPlaying:!1});case a.a:return h(h({},e),{},{isAdBuffering:!0});default:return e}}function f(e,t){var n,e=function(e){if(Array.isArray(e))return c(e)}(n=e)||u(n)||l(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n=e.findIndex(function(e){return e.guid===t});return-1!==n&&e.splice(n,1),e}function g(e){return 1260<=e?"16U":860<=e?"12U":620<=e?"8U":350<e?"4U":"tiny"}function v(){if(window.location.search.includes("wsjVideoLogger")){var n=[a.P],e=Object(r.createLogger)({predicate:function(e,t){return-1===n.indexOf(t.type)},diff:!0,collapsed:!0}),e=Object(i.createStore)(_,Object(i.applyMiddleware)(e));return e.dispatch(Object(s.enableLogging)()),e}return Object(i.createStore)(_)}},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.r(t);i(r.prototype,[{key:"_isAdPlaying",value:function(){return this._store.getState().isAdMode}},{key:"_isAdBuffering",value:function(){return this._store.getState().isAdBuffering}},{key:"_clearAllTimeouts",value:function(){clearTimeout(this._adDelayTimeout),clearTimeout(this._adDestroyTimeout)}},{key:"_handleAdProgress",value:function(){var t=this;this._isAdPlaying()&&!this._isAdBuffering()&&(this._adRemainder=this._adsManager.getRemainingTime(),this._clearAllTimeouts(),this._adDelayTimeout=setTimeout(function(){var e;t._isAdPlaying()&&!t._isAdBuffering()&&(e=1e3*Math.max(t._adRemainder-2,0),t._adDestroyTimeout=setTimeout(function(){t._isHealthy=!1,t._onAdDisconnect()},e))},2e3))}},{key:"isHealthy",value:function(){return this._isHealthy}},{key:"observe",value:function(){this._observing||(this._adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,this._clearAllTimeouts),this._adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this._clearAllTimeouts),this._adsManager.addEventListener(google.ima.AdEvent.Type.AD_PROGRESS,this._handleAdProgress),this._observing=!0)}},{key:"disconnect",value:function(){this._observing&&(this._clearAllTimeouts(),this._adsManager.removeEventListener(google.ima.AdEvent.Type.PAUSED,this._clearAllTimeouts),this._adsManager.removeEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this._clearAllTimeouts),this._adsManager.removeEventListener(google.ima.AdEvent.Type.AD_PROGRESS,this._handleAdProgress),this._observing=!1)}}]),n=r;function r(e){var t=e.adsManager,n=e.onAdDisconnect,e=e.reduxStore;!function(e){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),this._adsManager=t,this._onAdDisconnect=n,this._store=e,this._observing=!1,this._isHealthy=!0,this._clearAllTimeouts=this._clearAllTimeouts.bind(this),this._handleAdProgress=this._handleAdProgress.bind(this)}t.default=n},function(e,t){e.exports='<svg width="41px" height="41px" viewBox="0 0 41 41" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Link</title><desc>Created with sketchtool.</desc><g id="Symbols" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Share-Tools/Small" transform="translate(-19.000000, -3.000000)" fill="#FFFFFF"><g id="Group" transform="translate(0.000000, 3.000000)"><g id="link-2" transform="translate(19.000000, 0.000000)"><path d="M20.5,41 C31.8218374,41 41,31.8218374 41,20.5 C41,9.17816263 31.8218374,0 20.5,0 C9.17816263,0 0,9.17816263 0,20.5 C0,31.8218374 9.17816263,41 20.5,41 Z M29.1482244,10 L31,11.8517601 L23.8517756,19 L22,17.1482399 L29.1482244,10 Z M17.1482244,22 L19,23.8517601 L11.8517756,31 L10,29.1482399 L17.1482244,22 Z M11.6250344,24 L9.76878951,22.1436387 C8.74361379,21.1183986 8.74357389,19.4561959 9.76964768,18.4300578 L18.4304073,9.76875462 C19.456057,8.74304058 21.1206655,8.7447425 22.1437552,9.7678964 L24,11.6242577 L22.1437552,13.4806191 L20.905613,12.2423992 C20.5642443,11.9010091 20.0123957,11.8993896 19.6682227,12.2435842 L12.244322,19.6679508 C11.9022989,20.0099954 11.8989297,20.5611898 12.243137,20.9054188 L13.4812792,22.1436387 L11.6250344,24 Z M29.3749656,17 L31.2312105,18.8563613 C32.2563862,19.8816014 32.2564261,21.5438041 31.2303523,22.5699422 L22.5695927,31.2312454 C21.543943,32.2569594 19.8793345,32.2552575 18.8562448,31.2321036 L17,29.3757423 L18.8562448,27.5193809 L20.094387,28.7576008 C20.4357557,29.0989909 20.9876043,29.1006104 21.3317773,28.7564158 L28.755678,21.3320492 C29.0977011,20.9900046 29.1010703,20.4388102 28.756863,20.0945812 L27.5187208,18.8563613 L29.3749656,17 Z" id="link"></path></g></g></g></g></svg>'},function(e,t){e.exports='<svg width="41px" height="41px" viewBox="0 0 41 41" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Embed</title><desc>Created with sketchtool.</desc><g id="Symbols" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Share-Tools/Small" transform="translate(-106.000000, -3.000000)" fill="#FFFFFF" fill-rule="nonzero"><g id="Group-2" transform="translate(87.000000, 3.000000)"><g id="embed-2" transform="translate(19.000000, 0.000000)"><path d="M20.5,41 C31.8218374,41 41,31.8218374 41,20.5 C41,9.17816263 31.8218374,0 20.5,0 C9.17816263,0 0,9.17816263 0,20.5 C0,31.8218374 9.17816263,41 20.5,41 Z M15,25 L7,20.8333333 L7,19.1666667 L15,15 L15,17.5 L9.66666667,20 L15,22.5 L15,25 Z M26,15 L34,19.1666667 L34,20.8333333 L26,25 L26,22.5 L31.3333333,20 L26,17.5 L26,15 Z M25,9 L18.7,31 L16,31 L22.3,9 L25,9 Z" id="embed"></path></g></g></g></g></svg>'},function(e,t){e.exports='<svg width="41px" height="41px" viewBox="0 0 41 41" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Facebook</title><desc>Created with sketchtool.</desc><g id="Symbols" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Share-Tools/Small" transform="translate(-193.000000, -3.000000)" fill="#FFFFFF" fill-rule="nonzero"><g id="Group-3" transform="translate(174.000000, 3.000000)"><g id="facebook-2" transform="translate(19.000000, 0.000000)"><path d="M20.5,41 C31.8218374,41 41,31.8218374 41,20.5 C41,9.17816263 31.8218374,0 20.5,0 C9.17816263,0 0,9.17816263 0,20.5 C0,31.8218374 9.17816263,41 20.5,41 Z M24.6293176,20.0039078 L21.6133109,20.0039078 L21.6133109,31 L17.1314238,31 L17.1314238,20.0039078 L15,20.0039078 L15,16.4790934 L17.1314238,16.4790934 L17.1314238,14.1891364 C17.1314238,12.5556858 17.9738837,10 21.6470093,10 L24.9663016,10 L24.9663016,13.4388433 L22.5400168,13.4388433 C22.2678957,13.4246304 22.0032383,13.5243373 21.8188466,13.7105368 C21.6344549,13.8967363 21.5497517,14.1498151 21.5880371,14.4001563 L21.5880371,16.4790934 L25,16.4790934 L24.6293176,20.0039078 Z" id="facebook"></path></g></g></g></g></svg>'},function(e,t){e.exports='<svg width="41px" height="41px" viewBox="0 0 41 41" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Twitter</title><desc>Created with sketchtool.</desc><g id="Symbols" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Share-Tools/Small" transform="translate(-280.000000, -3.000000)" fill="#FFFFFF" fill-rule="nonzero"><g id="Group-4" transform="translate(261.000000, 3.000000)"><g id="twitter-2" transform="translate(19.000000, 0.000000)"><path d="M20.5,41 C31.8218374,41 41,31.8218374 41,20.5 C41,9.17816263 31.8218374,0 20.5,0 C9.17816263,0 0,9.17816263 0,20.5 C0,31.8218374 9.17816263,41 20.5,41 Z M28.8878177,16.9914714 L28.8878177,17.5117273 C28.8878177,22.8507464 24.7773883,29 17.266433,29 C15.0406158,28.9997821 12.8630788,28.3685169 11,27.1833689 C11.3229742,27.2188708 11.647806,27.2359576 11.9728309,27.2345416 C13.8142019,27.2426377 15.6036642,26.6411222 17.0473269,25.5287847 C15.3014982,25.4648489 13.7888941,24.3317766 13.2787029,22.7057571 C13.5331575,22.7510116 13.791287,22.7738475 14.0499562,22.7739873 C14.4143875,22.7735026 14.7770536,22.7247247 15.1279579,22.628998 C13.2095189,22.2327674 11.8406388,20.5801033 11.8501315,18.671642 L11.8501315,18.6289981 C12.4152302,18.940806 13.0500517,19.1135464 13.6993865,19.1321964 C11.8998965,17.9298176 11.350723,15.5843096 12.4373357,13.7420046 C14.4948277,16.2558532 17.5616482,17.7899922 20.8597721,17.9552241 C20.7888495,17.6530764 20.7535646,17.3440438 20.7546012,17.0341154 C20.7400195,14.8235531 22.5671829,13.0187685 24.8387379,13.0000003 C25.9709047,12.9995619 27.0515495,13.4604156 27.8185802,14.2707892 C28.7470872,14.0956075 29.6369313,13.7636647 30.4478528,13.289979 C30.1460477,14.2215957 29.5078215,15.015366 28.6511832,15.5245205 C29.4628438,15.4280487 30.2547824,15.2123781 31,14.8848617 C30.432782,15.7056959 29.7171122,16.4194776 28.8878177,16.9914714 Z" id="twitter"></path></g></g></g></g></svg>'},function(e,t,n){"use strict";n.r(t),n.d(t,"ResizeObserver",function(){return V}),n.d(t,"ResizeObserverEntry",function(){return C});var o,s=[],l="ResizeObserver loop completed with undelivered notifications.";(t=o=o||{}).BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box";function i(e){var t=null===(t=null===e||void 0===e?void 0:e.ownerDocument)||void 0===t?void 0:t.defaultView;return!!(t&&e instanceof t.Element)}function c(e,t){if(void 0===t&&(t=!1),y.has(e)&&!t)return y.get(e);if(v(e))return y.set(e,w),w;var n=getComputedStyle(e),i=g(e)&&e.ownerSVGElement&&e.getBBox(),r=!b&&"border-box"===n.boxSizing,a=E.test(n.writingMode||""),o=!i&&S.test(n.overflowY||""),s=!i&&S.test(n.overflowX||""),l=i?0:T(n.paddingTop),c=i?0:T(n.paddingRight),u=i?0:T(n.paddingBottom),d=i?0:T(n.paddingLeft),h=i?0:T(n.borderTopWidth),p=i?0:T(n.borderRightWidth),t=i?0:T(n.borderBottomWidth),c=d+c,u=l+u,p=(i?0:T(n.borderLeftWidth))+p,h=h+t,t=s?e.offsetHeight-h-e.clientHeight:0,s=o?e.offsetWidth-p-e.clientWidth:0,o=r?c+p:0,r=r?u+h:0,o=i?i.width:T(n.width)-o-s,r=i?i.height:T(n.height)-r-t,p=o+c+s+p,h=r+u+t+h,r=Object.freeze({devicePixelContentBoxSize:A(Math.round(o*devicePixelRatio),Math.round(r*devicePixelRatio),a),borderBoxSize:A(p,h,a),contentBoxSize:A(o,r,a),contentRect:new f(d,l,o,r)});return y.set(e,r),r}function a(e,t,n){var i=(n=c(e,n)).borderBoxSize,r=n.contentBoxSize,a=n.devicePixelContentBoxSize;switch(t){case o.DEVICE_PIXEL_CONTENT_BOX:return a;case o.BORDER_BOX:return i;default:return r}}function u(e){if(v(e))return 1/0;for(var t=0,n=e.parentNode;n;)t+=1,n=n.parentNode;return t}function d(e){return void 0===e&&(e=0),Date.now()+e}function r(e){!M&&0<e&&N.start(),(M+=e)||N.stop()}function h(e,t){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=t}function p(e,t){for(var n=0;n<e.length;n+=1)if(e[n].target===t)return n;return-1}var _,f=(K.prototype.toJSON=function(){return{x:this.x,y:this.y,top:this.top,right:this.right,bottom:this.bottom,left:this.left,width:this.width,height:this.height}},K.fromRect=function(e){return new K(e.x,e.y,e.width,e.height)},K),g=function(e){return e instanceof SVGElement&&"getBBox"in e},v=function(e){if(g(e)){var t=e.getBBox(),n=t.width,t=t.height;return!n&&!t}n=e.offsetWidth,t=e.offsetHeight;return!(n||t||e.getClientRects().length)},m="undefined"!=typeof window?window:{},y=new WeakMap,S=/auto|scroll/,E=/^tb|vertical/,b=/msie|trident/i.test(m.navigator&&m.navigator.userAgent),T=function(e){return parseFloat(e||"0")},A=function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=!1),Object.freeze({inlineSize:(n?t:e)||0,blockSize:(n?e:t)||0})},w=Object.freeze({devicePixelContentBoxSize:A(),borderBoxSize:A(),contentBoxSize:A(),contentRect:new f(0,0,0,0)}),C=function(e){var t=c(e);this.target=e,this.contentRect=t.contentRect,this.borderBoxSize=[t.borderBoxSize],this.contentBoxSize=[t.contentBoxSize],this.devicePixelContentBoxSize=[t.devicePixelContentBoxSize]},I=function(){var r=1/0,t=[];s.forEach(function(e){var i;0!==e.activeTargets.length&&(i=[],e.activeTargets.forEach(function(e){var t=new C(e.target),n=u(e.target);i.push(t),e.lastReportedSize=a(e.target,e.observedBox),n<r&&(r=n)}),t.push(function(){e.callback.call(e.observer,i,e.observer)}),e.activeTargets.splice(0,e.activeTargets.length))});for(var e=0,n=t;e<n.length;e++)(0,n[e])();return r},P=function(n){s.forEach(function(t){t.activeTargets.splice(0,t.activeTargets.length),t.skippedTargets.splice(0,t.skippedTargets.length),t.observationTargets.forEach(function(e){e.isActive()&&(u(e.target)>n?t.activeTargets:t.skippedTargets).push(e)})})},k=[],M=0,D={attributes:!0,characterData:!0,childList:!0,subtree:!0},O=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],R=!1,N=(H.prototype.run=function(t){var n,e,i,r,a,o=this;void 0===t&&(t=250),R||(R=!0,n=d(t),e=function(){var e=!1;try{e=function(){var e,t=0;for(P(t);s.some(function(e){return 0<e.activeTargets.length});)t=I(),P(t);return s.some(function(e){return 0<e.skippedTargets.length})&&("function"==typeof ErrorEvent?e=new ErrorEvent("error",{message:l}):((e=document.createEvent("Event")).initEvent("error",!1,!1),e.message=l),window.dispatchEvent(e)),0<t}()}finally{if(R=!1,t=n-d(),!M)return;e?o.run(1e3):0<t?o.run(t):o.start()}},i=function(){requestAnimationFrame(e)},_||(r=0,a=document.createTextNode(""),new MutationObserver(function(){return k.splice(0).forEach(function(e){return e()})}).observe(a,{characterData:!0}),_=function(){a.textContent=""+(r?r--:r++)}),k.push(i),_())},H.prototype.schedule=function(){this.stop(),this.run()},H.prototype.observe=function(){function e(){return t.observer&&t.observer.observe(document.body,D)}var t=this;document.body?e():m.addEventListener("DOMContentLoaded",e)},H.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),O.forEach(function(e){return m.addEventListener(e,t.listener,!0)}))},H.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),O.forEach(function(e){return m.removeEventListener(e,t.listener,!0)}),this.stopped=!0)},new H),L=(j.prototype.isActive=function(){var e=a(this.target,this.observedBox,!0),t=this.target;return g(t)||function(e){switch(e.tagName){case"INPUT":if("image"!==e.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return 1}}(t)||"inline"!==getComputedStyle(t).display||(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},j),x=new WeakMap,F=(U.connect=function(e,t){t=new h(e,t);x.set(e,t)},U.observe=function(e,t,n){var i=x.get(e),e=0===i.observationTargets.length;p(i.observationTargets,t)<0&&(e&&s.push(i),i.observationTargets.push(new L(t,n&&n.box)),r(1),N.schedule())},U.unobserve=function(e,t){var n=x.get(e),e=p(n.observationTargets,t),t=1===n.observationTargets.length;0<=e&&(t&&s.splice(s.indexOf(n),1),n.observationTargets.splice(e,1),r(-1))},U.disconnect=function(t){var n=this,e=x.get(t);e.observationTargets.slice().forEach(function(e){return n.unobserve(t,e.target)}),e.activeTargets.splice(0,e.activeTargets.length)},U),V=(B.prototype.observe=function(e,t){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!i(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");F.observe(this,e,t)},B.prototype.unobserve=function(e){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!i(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");F.unobserve(this,e)},B.prototype.disconnect=function(){F.disconnect(this)},B.toString=function(){return"function ResizeObserver () { [polyfill code] }"},B);function B(e){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof e)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");F.connect(this,e)}function U(){}function j(e,t){this.target=e,this.observedBox=t||o.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}function H(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}function K(e,t,n,i){return this.x=e,this.y=t,this.width=n,this.height=i,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Object.freeze(this)}}]);
