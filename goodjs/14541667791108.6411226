define("mp/modules/policies",[],function(){return{iplayer:{guidanceCleared:!1,siteID:"iPlayer",defaultUiClass:"iplayer",ui:{cta:{iplayer:!0},guidance:{displayContinuousGuidanceInQueuePlaylist:!1}}},news:{ui:{colour:"#bb1919",alternateColour:"#bb1919",cta:{mode:"default"}},preferPlainOverDash:!0,guidanceCleared:!0,siteID:"News",defaultUiClass:"news",preferHtmlOnMobile:!0},sport:{ui:{colour:"#eed71c",foreColour:"#000000",alternateColour:"#0087ff",alternateForeColour:"#ffffff",accessibility:{enhanceBrightColoursContrast:!0}},siteID:"Sport",defaultUiClass:"sport",guidanceCleared:!0},generic:{ui:{colour:"#ebebeb",foreColour:"#101010"},guidanceCleared:!0},background:{noTracking:!0,backgroundPlayer:!0,responsive:!0,loop:!0,muted:!0,autoplay:!0,includeAppClickHandler:!1,ui:{controls:{enabled:!1},errorDialog:{enabled:!1},buffer:{enabled:!1},cta:{enabled:!1},fullscreen:{enabled:!1,dblclick:!1},poster:{availableWhenPaused:!0,availableWhenSettingUp:!0},displayCover:!0,hideDefaultErrors:!0}}}}),define("mp/modules/device",[],function(){function c(e,t){t=e.exec(t);if(t)return t.shift(),+t[0]}var u=[],p=!1,m=0;return{get:function(){var e=window.embeddedMedia.demi,i=e.ua,a=/ edge\//.test(i),o=/chrome/.test(i)&&!a,t=/trident/.test(i),n=/firefox/.test(i),r=/windows phone/.test(i),s="PlayStation 4"==navigator.platform;o&&c(/chrome\/(\d+)(?:\.(\d*))?(?:\.(\d*))?(?:\.(\d*))?/,i),n&&c(/firefox\/(\d+)(?:\.(\d*))?/,i),a&&c(/edge\/(\d+)(?:\.(\d*))?/,i);var n=function(){var e,t=/mac/.test(i)&&!/like mac os x/.test(i),n={win:/windows/.test(i)&&!r,mac:t,macsafari:/safari/.test(i)&&t&&!o&&!a&&!r,ios:/like mac os x/.test(i),android:/android/.test(i)&&!a,playbook:/playbook/.test(i),blackberry:/blackberry/.test(i)||/bb10/.test(i),winphone:r,kindleSilk:/silk/.test(i),winwebview:/windows nt 10/.test(i)&&/webview/.test(i),win10arm:/windows nt 10\.[0-9]; arm/.test(i),kaios:/kaios/.test(i),phantomjs:/phantomjs/.test(i)};for(e in n)n[e]&&(n.name=e);return i.match(/webkit\/(\d*)/)&&(n.webkitVersion=parseFloat(RegExp.$1)),n.macsafari&&(i.match(/version\/[^\d]*([\d|\.]+\d)/),n.safariVersion=parseFloat(RegExp.$1),i.match(/mac os x 10_([\[0-9)][\[0-9)])/),n.macosVersion=parseInt(RegExp.$1,10)),n.ios&&i.match(/os (\d+)/g)&&(n.ios=parseInt(RegExp.$1,10)),n.android&&(t=i.match(/android (\d+(?:[\.\d]*)+)/i),n.androidVersion=t?parseFloat(t[1]):99),n}(),l={connection:{mobile:e.isMobileNetwork},os:n,hasHlsVodSupport:n.ios||n.macsafari||n.winwebview||n.win10arm||s,hasMseSupport:!!window.MediaSource};l.isMobileDevice=n.ios||n.android||n.blackberry||n.playbook||n.winphone||n.kaios,l.isTabletDevice=n.kindleSilk||n.winwebview||n.win10arm||i.match(/ipad/)||i.match(/sm-t/)||i.match(/tablet/),600<l.os.webkitVersion&&(!0===navigator.standalone||!1===navigator.standalone)&&(l.isTabletDevice=!0,l.hasHlsVodSupport=!0),!l.hasMseSupport&&(l.os.macsafari&&1<=l.os.safariVersion||600<l.os.webkitVersion)&&(l.isMobileDevice=!0),t&&!n.winphone&&(l.isMobileDevice=!1,l.isTabletDevice=!1),l.isMobileOrTablet=l.isMobileDevice||l.isTabletDevice,l.os.blackberry&&!p&&(p=!0,i.match(/version\/\d+.(\d+.\d+)/),3<parseFloat(RegExp.$1)&&u.push("blackberry")),l.os.winphone&&0===m&&(i.match(/windows phone (\d+.\d+)/),10<=(m=parseFloat(RegExp.$1))&&u.push("winphone"));for(var d=0;u.length>d;d++)l.os[u[d]]&&(l.hasHlsVodSupport=!0);return l.htmlAudio=4.1<=l.os.androidVersion||l.os.kindleSilk,l.preferHtmlAudio=!1===e.isUK&&5<=l.os.androidVersion,e=/smart.+tv/.test(i)||/linux; netcast/.test(i),l.supportedFlash=!l.isMobileOrTablet&&!s&&!e,l.IE11=0<i.indexOf("trident/7.0"),l.supportsSvg=l.hasMseSupport&&!l.os.playbook||8<=l.os.ios||4.4<=l.os.androidVersion&&o||l.IE11,l.supportChromecast=o&&window.chrome,l.requiresWindowOpenSMPAirLaunch=/fb_iab/.test(i)||/twitterandroid/.test(i)||/bbc_app/.test(i),l.hybrid=l.hasMseSupport||l.IE11&&(!document.documentMode||11<=document.documentMode),l.winXP=0<i.indexOf("nt 5"),l.webgl=function(){try{var e=document.createElement("canvas"),t="probablySupportsContext"in e?"probablySupportsContext":"supportsContext";return t in e?e[t]("webgl")||e[t]("experimental-webgl"):"WebGLRenderingContext"in window}catch(e){return!1}}(),l.support360=!(!l.webgl||n.ios&&n.ios<11||/(trident\/)|(MSIE\s)/i.test(i)&&!a||n.macsafari&&n.macosVersion<12),l.mediasetDesktop=!l.isMobileOrTablet&&(t||/windows nt/.test(i)||/x11/.test(i)||l.os.mac),l}}}),define("mp/modules/demi",[],function(){return function(e){var t,n=window.embeddedMedia,i="unknown",a=window.navigator.connection;a&&(i=(t=a.effectiveType)?"4g"!=t?"cellular":"":a.type,e&&!1!==e.saveData&&(e.saveData=!!a.saveData)),n.demi.isMobileNetwork="cellular"===i}}),define("mp/classes/language",["jquery-1.9"],function(n){function i(e){if(r[e])for(;0<r[e].length;)r[e].pop()()}function a(e){if(!e||!/^[\-a-zA-Z]{1,20}$/.test(e))return"en";return{"en-gb":"en","cy-gb":"cy","gd-gb":"gd","ga-gb":"ga","ru-uk":"ru","uz-latn":"uz","uz-cyrl":"uz",zh:"zh-hans",sr:"sr-latn","pt-br":"pt"}[e=e.toLowerCase()]||e}var o={en:{pgHeader:"Parental Guidance Lock",pgAgeConfirmation:"I am aged 16 or over",pgClose:"Close pop up",pgContinue:"Continue",pgPasswordValidationError:"Please confirm your age before continuing",pgAriaAgeConfirmCheckBox:"Age confirmation check box. Checked.",pgAriaAgeConfirmCheckBoxUnchecked:"Age confirmation check box. Check to confirm you are sixteen or over.",pgTurnOnParentalGuidance:"Turn on the Parental Guidance Lock?",pgInfoPlusDownload:"lets you set up a PIN to control access to Guidance-labelled BBC content on your chosen browser.<p>To set up your PIN choose â€˜Turn Onâ€™. To continue without Parental Guidance choose â€˜Downloadâ€™.</p>",pgInfoPlusPlay:"lets you set up a PIN to control access to Guidance-labelled BBC content on your chosen browser.<p>To set up your PIN choose â€˜Turn Onâ€™. To continue without Parental Guidance choose â€˜Playâ€™.</p>",pgInfo:"lets you set up a PIN to control access to Guidance-labelled BBC content on your chosen browser.",pgTurnOn:"Turn On",toolTipPlay:"Play",pgEnterPIN:"Please enter a four-digit PIN",pgActivateInfo:"You will need your PIN to play Guidance-labelled content",pgPINValidationError:"Your PIN must be four digits",pgAriaPINEntryDescription:"PIN entry text field",pgAriaPINPrompt:"Please enter a valid four-digit PIN",pgEnterPINPrompt:"Please enter your four-digit PIN to continue",pgManageYourPIN:"Manage your PIN",pgUnlock:"Unlock",pgIncorrectPIN:"Incorrect PIN. Please try again",newPgTurnOnParentalGuidance:"Turn on Parental Guidance Lock?",newPgTurnOnParentalGuidancePINsection:"Turn on Parental Guidance Lock",newPgTurnOnParentalGuidanceInsertPIN:"Parental Guidance Lock",newPgTurnOn:"Turn on PG Lock",newToolTipPlay:"Play without PG Lock",findOutMore:"Find out more",notSuitableForChildMessage:"This programme may not be suitable for children. Turn on PG Lock and we'll ask you to set up a PIN to control who can watch BBC content with a Guidance label on this browser.",newPgAgeConfirmationUnder16:"I've got permission.",newUnder16WithPermission:"You're signed in as someone whoâ€™s under 16. So you need permission from a parent or guardian to play this.",newPgPlay:"Play",newPgEnterPIN:"Please choose a four-digit PIN.",newPgPINvalidationError:"Your PIN must be four digits long.",newPgIncorrectPIN:"Wrong PIN. Please try again.",newPgManageYourPIN:"Manage your lock",newPgEnterPINprompt:"Please enter your four-digit PIN.",newPgActivateInfo:"You'll need this to play any content with a Guidance label.",newPgEnterPINinfo:"This programme has a Guidance label.",newAgeConfirmationTitle:"Guidance",pgUnder16PermissionValidationError:"Please confirm you have permission before continuing",pgDownload:"Download",pgActivate:"Activate",unableToEmbed:"Unable to embed player",errorUnsupported:"Your device is not currently supported",initialiseFailed:"Player failed to initialise",contentNotAvailableOnDevice:"This content is not currently available on this device.",defaultErrorMessage:"This content doesn't seem to be working.",flashNotAvailable:"This player no longer works properly on your device. You'll need to update your browser or device to continue.",deprecationMessageLongLink:"Find out how to keep watching and listening",embedTitle:"Embed This Media",embedDescription:"Copy the code below to share this content on your own site. Press escape to close",embedTerms:"Terms and conditions",embedClose:"Close",aaampPlay:"click to play",screenreaderDefaultIframeTitle:"Media Player"}},r={},s={},l={},d="cy,gd,ga,fr,ar,az,ha,hi,id,ky,es,so,sw,tr,ur,fa,ru,uk,vi,si,rw,ps,ne,my,zh-hans,zh-hant,uz,tg,pt,ta,bn,ja,pi,am,gu,ko,mr,om,pa,pcm,te,th,ti,yo,ig,sr-cyrl,sr-latn".split(",");return{getCode:a,add:function(e,t){clearTimeout(l[e]),o[e]=t,i(e)},load:function(e,t){var n;e=a(e),!o[e]&&function(e){if(d.length<2)return 1;for(var t=0;d.length>t;t++)if(d[t]==e)return 1}(e)?(t&&(r[e]||(r[e]=[]),r[e].push(t)),s[e]||(s[e]=!0,(n=document.createElement("script")).type="text/javascript",n.charset="utf-8",n.async=!0,n.src="//emp.bbci.co.uk/emp/translations/1.0.41/language."+e+".js",document.getElementsByTagName("head")[0].appendChild(n),clearTimeout(l[e]),l[e]=setTimeout(function(){i(e)},5e3))):t&&t()},t:function(e,t){return t=a(t),o[t]&&o[t][e]?o[t][e]:o.en[e]||e},screenreaderAlert:function(e){var t=n("<div role='alert' style='width: 1px; position: absolute; left: -2500px; overflow: hidden;'><p>"+e+"</p></div>").appendTo(n("body"));t.hide(),t.show(),setTimeout(function(){t.remove()},2500)}}}),define("mp/modules/helpers",["mp/modules/demi","mp/classes/language"],function(e,t){return{isObjectEmpty:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},addEmbeddedMedia:function(){window.embeddedMedia?(window.embeddedMedia.playerInstances||(window.embeddedMedia.playerInstances={}),window.embeddedMedia.players||(window.embeddedMedia.players=[]),isNaN(window.embeddedMedia.playerInits)&&(window.embeddedMedia.playerInits=0)):window.embeddedMedia={players:[],playerInstances:{},playerInits:0};var e,o=window.embeddedMedia;return o.openCallbacks||(o.openCallbacks=[],o.closedCallbacks=[],o.opened=function(e){for(var t=0;o.openCallbacks.length>t;t++)o.openCallbacks[t](e)},o.closed=function(e){for(var t=0;o.closedCallbacks.length>t;t++)o.closedCallbacks[t](e)}),o.addPlayer||(o.addPlayer=function(e,t){o.playerInstances[e]=t,o.players.push(t)}),o.distributeConfigToPlayers||(o.distributeConfigToPlayers=function(e,t,n){var i,a=o.api.players();for(i in a)i!=n&&a.hasOwnProperty(i)&&a[i].distributedConfig(e,t)}),o.processConfigFromPlayer||(o.processConfigFromPlayer=function(e,t,n){o.api.players()[n]._settings.set("ui"==t?{ui:e}:e),o.distributeConfigToPlayers(e,t,n)}),o.language||(o.language=t),o.demiHelper||(o.demiHelper={determineConnectionType:function(){}}),o.demi||(o.demi={callbacks:[],ua:window.navigator.userAgent.toLowerCase()},window.orb&&window.orb.fig&&((e=window.orb.fig.geo)&&e.isUK&&(o.demi.isUK=1===e.isUK())),window.bbcuser&&window.bbcuser.isUKCombined&&((e=window.bbcuser.isUKCombined()).then&&e.then(function(e){o.demi.isUK=e}))),o.chromeCast||(o.chromeCast={castInterface:!1}),o.sendEventToPlayers||(o.sendEventToPlayers=function(t,n,i){o.players.forEach(function(e){e!==i&&e.call(t,n)})}),o}}}),define("mp/classes/settingsbuilder",["jquery-1.9","mp/modules/device","mp/modules/helpers"],function(a,i,o){function n(e,t){if(e)for(var n=0;e.length>n;n++){var i=e[n];if(i){var a=i.kind;if("radioProgramme"==a||"audio"==a||!t&&(null==a||""===a||"programme"==i.kind))return i}}return null}var r={mediasets:{desktop:"pc",cellular:"mobile-cellular-main",mobile:"mobile-phone-main",tablet:"mobile-tablet-main"},findProgramme:n,firstProgramme:function(e,t){return n(e&&e.items,t)},mediationUrls:function(e,t){var n="ediatorHref",i=r.mediaSet(t);return e["samlM"+n]=e["m"+n]=r.mediatorHref(t,i),i},mediaSet:function(e){if(e.mediator&&e.mediator.overrideMediaSet)return e.mediator.overrideMediaSet;if(e.backgroundPlayer)return"mobile-tablet-main";var t=o.addEmbeddedMedia(),n=e.mediasets=this.mediasets,e=i.get();return e.mediasetDesktop?n.desktop:t.demi.isMobileNetwork?n.cellular:e.isTabletDevice?n.tablet:n.mobile},mediatorHref:function(e,t){var n="https://{host}/mediaselector/6/select/version/2.0/mediaset/{mediaset}/vpid/{id}/format/json/jsfunc/{callback}",t={href:n=(location.host+"").match(/preview\..*api/gim)?n.replace("/mediaselector/6/","/mediaselector/5/"):n,host:"open.live.bbc.co.uk",mediaset:t};a.extend(!0,t,e.mediator);var i=t.href;return a.each(t,function(e,t){i=i.replace("{"+e+"}",t)}),i}};return r}),define("mp/classes/errors/error",[],function(){function e(e,t,n){return n=n||{},this._c=e,this._s=n.severity||"critical",this._d=function(e,t,n){var i="en";if(e&&(i=e.locale()),t=a[t]||t,window.embeddedMedia.language){i=window.embeddedMedia.language.t(t,i);if(i!=t)return i}return n||"Unknown Error"}(t,e+"",n.description||n.detail),this}var a={6e3:"unableToEmbed",6003:"errorUnsupported",6004:"initialiseFailed",6005:"initialiseFailed",6010:"flashNotAvailable",6012:"errorUnsupported",1003:"defaultErrorMessage",1040:"flashNotAvailable"};return e.prototype={code:function(){return this._c},description:function(){return this._d},detail:function(){return""},severity:function(){return this._s},responsibility:function(){return"client"}},e}),define("mp/classes/settings",["jquery-1.9","mp/modules/policies","mp/classes/settingsbuilder","mp/classes/errors/error"],function(r,s,t,n){function l(e,t,n){"set"!=t&&"locale"!=t&&"playingAudio"!=t&&"posterUrl"!=t&&("playlistObject"==t||"today"==t?e[t]=n:"object"==typeof n?"object"==typeof c[t]&&r.extend(!0,e[t],n):"object"!=typeof e[t]&&(e[t]=n))}function e(e){return this.init(e)}var d={locale:{lang:"en",path:"//emp.bbci.co.uk/emp/translations/1.0.41/{lang}.xml"},subtitles:{supportLiveSubtitles:!0},thumbnail:{enabled:!0},colour:"#f54997",foreColour:"#ffffff",alternateColour:"#f54997",alternateForeColour:"#ffffff",guidance:{pgColour:"#f54997",pgSeparatorColour:"#252833",pgBackgroundColour:"#0c101c"},cta:{direction:null}},c={container:{},playlist:"",startTime:0,volume:.7,overrideHoldingImage:"",product:"iplayer",today:new Date,guidance:{},mediator:{},experimentalDashPercentage:parseFloat("0"),includeAppClickHandler:!0,plugins:{player:{width:"640px",height:"360px",poster:""},toLoad:[]},quality:"hd",uiClass:"",enableStatsReporting:!0,customRdotBaseURL:"//r.bbci.co.uk/e",autoplay:!1,enableRdotReporting:!0,enableSonarReporting:!0,enableBarbReporting:!0,enableAtiReporting:!0,statsObject:{},embedPageURL:location.href,forceGuidance:"",appName:"",appType:"",counterName:"smp.player.page",siteID:"",significantTime:10,playerType:"",blacklistedPlugins:["eavis","endSlate"],namedPlugins:{"dfpAds.js":"//emp.bbci.co.uk/plugins/dfpAdsHTML/5.2.3/js/dfpAds.js","continuousPlay.js":"//emp.bbci.co.uk/plugins/onwardJourneyHTML/2.6.7/js/onwardJourney.js","endSlate.js":"//emp.bbci.co.uk/plugins/endSlateHTML/1.8.0/js/endSlate.js","preview.js":"//emp.bbci.co.uk/plugins/preview/1.1.0/js/preview.js","onwardJourney.js":"//emp.bbci.co.uk/plugins/onwardJourneyHTML/2.6.7/js/onwardJourney.js"},suppressType:[],suppressItemKind:[],ui:{},webcastData:{},liveEnvironment:!0,preferHtmlControls:!0,hdVpids:"b07v802s",optinPids:"p03cchwf",over16:!1,under16:!1,backgroundSettings:{},threeSixty:!1,disablePreload:!1,continuousPlay:!0,skipInterval:20,embeddedOffsite:!1,androidReceiverCompatible:!1},u=[320,384,432,480,512,608,640,688,720,768,800,832,976,1024,1376,1920],p=[180,216,243,270,288,342,360,387,405,432,450,468,549,576,774,1080],m=new RegExp("^//|^http[s]{0,1}://","i");return e.prototype={set:function(){var e,t,n=this;for(e in 2===arguments.length?l(n,e=arguments[0],arguments[1]):"object"==typeof arguments[0]&&r.each(arguments[0],function(e,t){l(n,e,t)}),n.webcastData)n.webcastData.hasOwnProperty(e)&&(t=n.webcastData[e],"[object Date]"===Object.prototype.toString.call(t)&&(n.webcastData[e]=t.getTime()/1e3));return n.isBSTime=function(e){e&&e.getFullYear||(e=new Date);var t=Math.floor(1.25*e.getFullYear()),n=e.valueOf(),i=new Date(n);return i.setMonth(2),i.setDate(31-(t+4)%7),i.setUTCHours(1),i.setUTCMinutes(0),i.setUTCSeconds(0),(n=new Date(n)).setMonth(9),n.setDate(31-(t+1)%7),n.setUTCHours(1),n.setUTCMinutes(0),n.setUTCSeconds(0),i<e&&e<n}(n.today),n},init:function(e){var n=this;n.reset();var t=(e="object"!=typeof e?{}:e).product||c.product,t=s[t]||s.generic;r.each(t,function(e,t){l(n,e,t)}),n.ui=r.extend(!0,{},d,t.ui);t="";try{t=document.cookie+""}catch(e){}if(!n.allowTracking){for(var i=!1,a=["bbc.co.uk","bbc.com","britbox.com","bbcconnectedstudio.co.uk"],o=0;o<a.length;o++)-1!==location.host.indexOf(a[o])&&(i=!0);i||(n.noTracking=!0)}return t.match(/NO-SA=1/)&&(n.noTracking=!0),t.match(/html5Debug=true/)&&(n.html5Debug=!0),n.set(e)},reset:function(){var n=this,e=r.extend(!0,{},c);return r.each(e,function(e,t){n[e]=t}),n},validate:function(){var e,t=this;if(!t.container||void 0===t.container.get(0)||0===t.container.length)throw"Error 6009 DOM element not found";t.playlistObject&&t.playlistObject.items&&(!(e=t.playlistObject.items[0])||7<(e=e.versionID||e.vpid||"").length&&-1<"p09108vv,p09hh03z,p09hh046,p09hh03f,p09hh049,p09hh03x,p09hh04t,p09hh063,p09hh05v,p09hh3k5,p09hgzj3".indexOf(e)&&(t.plugins.toLoad.push({html:"https://storyplayer.pilots.bbcconnectedstudio.co.uk/smp-js"}),t.ui.skin="storykit",t.waitOnPluginLoad=!0))},dispatch:function(e){var t=r.Event("error");t.errorData=new n(e,this),this.trigger(t)},trigger:function(e){this.container&&"function"==typeof this.container.trigger&&this.container.trigger(e)},locale:function(){return this.ui.locale.lang},playingAudio:function(){if(this.willPlayAudio)return!0;var e=t.firstProgramme(this.playlistObject);return!e||("radioProgramme"==e.kind||"audio"==e.kind)},posterUrl:function(e){return function(e,t,n){var i=!(!n||!n.availableWidths||"string"!=typeof n.availableWidths)&&n.availableWidths,a=i?i.split(","):u;if(e&&m.test(e)){var o=0;0!==(o=t&&t.width?t.width():o)&&!isNaN(o)||(o=768),n&&n.densityMultiplier&&(o*=n.densityMultiplier);for(var r=a.length-1;0<r&&!(.98<o/a[r]);r--);i=i||a[r]<=1024?a[r]:1536;return e.replace(/[\${]recipe}?/,u[r]+"x"+p[r]).replace(/[\${]width}?/,i)}}(this._poster||this.playlistObject&&this.playlistObject.holdingImageURL||this.overrideHoldingImage,e,this.ui.poster)},doHdVersionCheck:function(){var e=this;"medium"==e.quality&&e.statsObject&&e.statsObject.parentPID&&-1!==(e.hdVpids+"").indexOf(e.statsObject.parentPID+"")&&(e.quality="hd")}},e}),define("mp/modules/html5",[],function(){function e(e){e=document.createElement(e);return!(!e||!e.canPlayType)}return{media:{audio:e("audio"),video:e("video")},audio:{},video:{}}}),define("mp/classes/xd",[],function(){function e(e){var o=this,t=document.getElementById(e);o._receiveKey=e+Math.random(),t&&t.contentWindow&&(o._postElement=t.contentWindow),o._url=t.src,o._listeners={},o.post({initXD:{receiveKey:o._receiveKey}}),o.receive(function(e){if(e.data){var t=e.data.type,n=e.data.data,i=o._listeners[t];if(i)for(var a=0;i.length>a;a++)i[a].call(o,n)}})}return e.prototype={_receiveKey:"",_postElement:null,_listeners:{},post:function(e){return e&&this._postElement&&this._postElement.postMessage&&this._postElement.postMessage(JSON.stringify(e),"*"),this},receive:function(a){function e(e){var t=e.origin+"";if((0===o._url.indexOf(t)||0===o._url.indexOf(t.replace("https://","http://")))&&e.data&&e.data.indexOf&&0===e.data.indexOf("{")){var n,i={};for(n in e)i[n]="data"==n?JSON.parse(e[n]):e[n];if(!i.data.receiveKey||i.data.receiveKey!==o._receiveKey)return!1;a(i)}}var o=this;return window.addEventListener?window.addEventListener("message",e,!1):window.attachEvent("onmessage",e),o},on:function(e,t){var n=this;return this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(function(){setTimeout(function(e){t.apply(n,e)},0,arguments)}),n},fire:function(e,t){this.post({receiveKey:this._receiveKey,type:e,data:t})}},e}),define("mp/classes/embedPopup",["jquery-1.9"],function(h){var g={show:function(e){g._embedBox&&g.close(!0);var t=e._settings,n=!t.ui.disableReithFonts;window.embeddedMedia.opened();g._background=h('<div id="embedBackground"></div>').css({width:"100%",height:"100%",margin:"0px",position:"fixed","z-index":1e3,top:"0px",left:"0px","background-color":"#000000",zoom:1,filter:"alpha(opacity=50)",opacity:.5}).appendTo(document.body);var i={"-webkit-box-orient":"horizontal","-webkit-box-pack":"center","-webkit-box-align":"center","-moz-box-orient":"horizontal","-moz-box-pack":"center","-moz-box-align":"center",display:"box","box-orient":"horizontal","box-pack":"center","box-align":"center",position:"fixed",width:"400px","max-width":"90%",height:"160px",bottom:"0",left:"0",top:"0",right:"0",margin:"auto","vertical-align":"middle","text-align":"center",color:"white","font-size":"22px","z-index":1001,"background-color":"#262626"};0<=document.documentElement.className.indexOf("b-reith-sans-font")&&n?g.className+="font-family-sans":i["font-family"]="helvetica, Arial, sans-serif",g._embedBox=h('<div id="embedBox" role="alertdialog" aria-labelledby="embedMediaTitle" aria-describedby="embedMediaDescription"></div>').css(i).appendTo(document.body);var a=t.locale(),o=window.embeddedMedia.language,r=o.t("embedTitle",a),n=o.t("embedDescription",a),i=o.t("embedTerms",a),o=o.t("embedClose",a);h('<span id="embedMediaTitle" style="position:absolute;left:0px;margin-left:10%;margin-top:6%">'+r+'</span><span id="embedMediaDescription" style="display:none" aria-hidden="true">'+n+"</span>").appendTo(g._embedBox);var s,r=encodeURIComponent(t.product),n=encodeURIComponent(e.playlist.title),l=t.externalEmbedUrl;if(l){for(var d=e.playlist.items,c=0;d.length>c;c++){var u=d[c].kind;if("programme"==u||"radioProgramme"==u){l=l.replace("{vpid}",d[c].identifier);break}}l=l.replace("{lang}",a)}else e.playlist.url?s=e.playlist.url:t.playlistObject&&(s=t.playlistObject.legacyPlaylist),s&&(l="https://emp.bbc.co.uk/emp/embed/smpEmbed.html?playlist="+encodeURIComponent(s)+"&title="+n+"&product="+r,"en"!=a&&(l+="&lang="+a));if(l){a='<iframe width="400" height="500" frameborder="0" src="'+l+'"></iframe>';t.externalEmbedCode&&(a=(t.externalEmbedCode+"").replace("{url}",l));var p=h('<input type="text" id="embedText" />').css({position:"absolute",width:"80%",height:"30px",top:"50%",left:0,"margin-top":"-15px","margin-left":"10%","font-size":"14px",color:"#848484"}).appendTo(g._embedBox);h("#embedText")[0].value=a;i=h('<a target="_blank" href="https://www.bbc.co.uk/usingthebbc/terms-of-use/">'+i+"</a> ");i.css({position:"absolute",bottom:0,left:0,"margin-bottom":"6%","margin-left":"10%","font-size":"0.6em",color:"#ffffff","text-decoration":"none"}).appendTo(g._embedBox),p.click(function(){h(this).select()}),setTimeout(function(){p.focus()},100);o=h('<a aria-label="'+o+'" href="#">x</a> ');o.css({position:"absolute",right:"0px","font-size":"0.8em",top:"0px","margin-top":"10px","margin-right":"10px",color:"#ffffff","text-decoration":"none",cursor:"pointer"}).appendTo(g._embedBox),o.click(function(e){e.preventDefault&&e.preventDefault(),e.returnValue=!1,g.close()}),g._tabList=[p,i,o];function m(e){var t=(e=e||window.event).keyCode||e.which;27===t&&g.close(),9!=t&&13!=t||(e.preventDefault&&e.preventDefault(),e.returnValue=!1,9==t?(t=g._tabList.length-1,g._currentTab=e.shiftKey?0===g._currentTab?t:g._currentTab-1:g._currentTab===t?0:g._currentTab+1,setTimeout(function(){g._tabList[g._currentTab].focus()},200)):this.click())}for(c=g._currentTab=0;g._tabList.length>c;c++)g._tabList[c].keydown(m)}else g.close()},close:function(e){var t=this;e||window.embeddedMedia.closed(),t._background&&(t._background.remove(),t._background=void 0),t._embedBox&&(t._embedBox.remove(),t._embedBox=void 0)}};return g}),define("mp/classes/players/player",["mp/classes/embedPopup"],function(d){function e(){return this.includePoster=!0,this._volume=1,this}return e.prototype={name:function(){return this._name},uiDefaults:function(e){var t=this._settings,i=t.ui;i.guidance||(i.guidance={}),i.guidance.useFlashGuidance=i.guidance.useFlashGuidance||!1,t.guidanceCleared||!1!==i.guidance.pinRequired&&(i.guidance.pinRequired=!0),e.isMobileOrTablet&&(i.controls||(i.controls={volumeSlider:!1}),i.controls.popout=!1,i.controls.volumeSlider||(i.controls.volumeSlider=!1),t.volume=1),1==window.devicePixelRatio||e.connection.mobile||t.lowBandwidth||(i.poster||(i.poster={}),i.poster.densityMultiplier||(i.poster.densityMultiplier=t.saveData?.8:window.devicePixelRatio)),e.supportsSvg&&!1!==i.useHighResIcons&&(i.useHighResIcons=!0);e="",e=(window.getComputedStyle&&this._settings.container[0]?window.getComputedStyle(this._settings.container[0]):this._settings.container[0].currentStyle).direction;null===i.cta.direction&&(i.cta.direction="rtl"==e?"rtl":"ltr");var a=!1,e=!0;try{var o,n;/[; ]ck[pn]s_smpSettings=([^\s;]*)/gim.test(" "+document.cookie),RegExp.$1&&(o=JSON.parse(decodeURIComponent(RegExp.$1)),this._deprecated&&o.FDd&&!isNaN(o.FDd)&&(n=new Date(o.FDd),(new Date).valueOf()<=n.valueOf()+6048e5&&(e=!1)),i.allowAudioControlsToHide|=o.allowAudioControlsToHide,o.controls&&(i.controls||(i.controls={}),i.controls.timeout=o.controls.timeout,i.controls.sizeAdjust=o.controls.sizeAdjust,i.controls.spaceControlsPlayback|=o.controls.spaceControlsPlayback,i.controls.experimentalShortcuts|=o.controls.experimentalShortcuts,i.controls.activeStartsAt=o.controls.activeStartsAt,i.controls.chromecastMode=o.controls.chromecastMode,i.controls.speed|=o.controls.speed),o.subtitles&&(i.subtitles||(i.subtitles={}),i.subtitles.contrast=o.subtitles.contrast,i.subtitles.sizeAdjustment=o.subtitles.sizeAdjustment,i.subtitles.supportLiveSubtitles|=o.subtitles.supportLiveSubtitles),o.quality&&(t.quality=o.quality)),a=!0}catch(e){}this._deprecated&&!i.deprecationWarning&&(e?this.recordDeprecationCookie=function(){try{i.deprecationWarning={enabled:!1};var e,t=(new Date).valueOf(),n=t+6048e5;a||(o={},(e=new Date).setTime(e.getTime()+15552e6),n=e.valueOf()),o.FDd=t,function(e,t,n){var i=new Date;i.setTime(n),i.setHours(23),i.setMinutes(59),i.setSeconds(59),n="; expires="+i.toGMTString(),-1!==(i=-1!==(i=location.hostname).indexOf(".bbc.co.uk")?".bbc.co.uk":i).indexOf(".bbc.com")&&(i=".bbc.com");try{document.cookie=e+"="+escape(t)+n+"; Domain="+i+"; Path=/"}catch(e){}}("ckps_smpSettings",JSON.stringify(o),n)}catch(e){}}:i.deprecationWarning={enabled:!1})},destroy:function(){this._container&&this._container.empty()},call:function(){},play:function(e){this.call("play",e)},stop:function(){this.call("stop")},suspend:function(){this.call("suspend")},pause:function(){this.call("pause")},next:function(){this.call("next")},previous:function(){this.call("previous")},pauseAt:function(e){e&&(e=e instanceof Array?e:[e],this.call("pauseAt",e))},muted:function(e){return void 0!==e&&(this._muted=e,this.call("muted",e)),this._muted},volume:function(e){return"number"==typeof e&&(this._volume=e,this.call("volume",e)),this._volume},duration:function(){return this._duration},ended:function(){return this._ended},seeking:function(){return this._seeking},paused:function(){return this._paused},kind:function(){return this._kind},mediaItem:function(){return this._mediaItem},loadedPlaylist:function(){return this.playlist},currentTime:function(e){return"number"==typeof e&&this.call("currentTime",e),this._currentTime},showSubtitles:function(e){this.call("showSubtitles",e)},setData:function(e){if(e)if(e instanceof Array)for(var t=0;e.length>t;t++)this.call("setData",e[t]);else this.call("setData",e)},updateQuality:function(e){this.call("updateQuality",e)},onAdsProcessed:function(e){this.call("onAdsProcessed",e)},webcastData:function(e){for(var t in e){var n;e.hasOwnProperty(t)&&(n=e[t],"[object Date]"===Object.prototype.toString.call(n)&&(e[t]=n.getTime()/1e3))}},loadPluginWithCheck:function(e,t,n){for(var i=this._settings.blacklistedPlugins,a=0;i.length>a;a++)if(-1<(e+"").indexOf(i[a]))return;if(0===(e+"").indexOf("name:")){var o=this._settings.namedPlugins,r=!1,s=e.split("name:");if(2==s.length)for(var l in o)if(s[1]===l){"object"==typeof t?t.url=o[l]:t=o[l],r=!0;break}if(!r)return}this.call(n||"loadPlugin",t)},before:function(){var e=this,t=e._settings;e.ready=!0,e.volume(t.volume),e.muted(t.muted),e._lastSignificant=t.startTime},started:function(e){var t=this,n=t._settings;e.supportChromecast&&n.allowCasting&&window.embeddedMedia.chromeCast.castInterface&&window.embeddedMedia.chromeCast.castInterface.initialised&&window.embeddedMedia.chromeCast.castInterface.sendCastIconState(),window.addEventListener?window.addEventListener("beforeunload",function(){t.call("stop",{destroy:!0})}):window.attachEvent&&window.attachEvent("onbeforeunload",function(){t.call("stop",{destroy:!0})});e=window.embeddedMedia.parentalGuidance;e.updateCallbacks.push(function(e){(n.guidance=e).noPin=n.guidanceCleared,t.call("updateGuidance",e)}),e.closedCallbacks.push(function(e){t.call("guidanceClosed",[e]),t.resizePlayer&&(t.resizePlayer(),setTimeout(function(){t.resizePlayer&&t.resizePlayer()},500)),"html"==t.type&&t._gCalled&&e&&!t._lockClicked&&t.play(!0),t._gCalled=!1})},processEvent:function(e,t,n,i){var a,o=e.type,r=this;for(a in t=t||{})"type"!=a&&(e[a]=t[a],"currentDuration"==a&&(e.duration=t[a]));var s=window.embeddedMedia.chromeCast.castInterface;switch(o){case"ccRequestSession":s.requestSession();break;case"ccLoadMedia":s.loadMedia(this);break;case"ccPause":s.pause();break;case"ccPlay":s.play();break;case"ccSeek":s.seek(n.seekTime);break;case"ccSubsOn":s.subtitlesOn();break;case"ccSubsOff":s.subtitlesOff();break;case"ccVolume":s.setVolume(n.volume);break;case"ccMuted":s.setMuted(n.muted);break;case"timeupdate":if(r._currentTime=t.currentTime,r._duration=t.duration,Math.abs(r._currentTime-r._lastSignificant)>r._settings.significantTime){var l=i.Event("significanttimeupdate");for(a in t)"type"!=a&&(l[a]=t[a]);r._lastSignificant=r._currentTime,r._settings.trigger(l)}break;case"seeked":r._seeking=!1,"number"==typeof t.currentTime&&(r._currentTime=t.currentTime);break;case"seeking":r._seeking=!0,"number"==typeof t.currentTime&&(r._currentTime=t.currentTime);break;case"playlistEnded":case"ended":r._playing=!1,r._ended=!0;break;case"pause":r._paused=!0;break;case"playing":r._playing=!0,r._paused=!1,r._ended=!1,r._kind=e.kind;break;case"playlistLoaded":r._seeking=!1,r._paused=!0,r._ended=!1,r.playlist=t.playlist;break;case"mediaItemChanged":r._currentTime=0,r._lastSignificant=0,r._mediaItem=e.mediaItem;break;case"linkRequest":"managePIN"!==t.type&&"PGinfo"!==t.type||window.open("//www.bbc.co.uk/iplayer/guidance","pg");break;case"embed":r.playlist&&(r._restoreFocus=!0,d.show(r));break;case"setPIN":window.embeddedMedia.parentalGuidance.setPIN(t.PIN);break;case"setGuidanceSkipped":window.embeddedMedia.parentalGuidance.setAgeConfirmation(t.skipped);break;case"guidanceLocked":window.embeddedMedia.parentalGuidance.setLocked(t.locked,!0);break;case"guidanceClosed":window.embeddedMedia.parentalGuidance.close(void 0,!0);break;case"setUnder16Permission":window.embeddedMedia.parentalGuidance.setUnder16Permission(t.hasPermission);break;case"configFromPlayer":window.embeddedMedia.processConfigFromPlayer(e.config,"",r._settings.domid);break;case"uiConfigFromPlayer":window.embeddedMedia.processConfigFromPlayer(e.config,"ui",r._settings.domid)}},setPoster:function(e,t){this.ready&&e&&this.call("setPoster",{url:e,effect:t})},updateMediaset:function(){},queuePlaylist:function(){},setPreviousPlaylist:function(){},loadPlaylist:function(){},captureIntent:function(){},updateUiConfig:function(){},updateConfig:function(){},distributeConfig:function(){}},e}),define("mp/classes/rdotreporting",[],function(){var a=0;return{error:function(e,t,n){if(t.enableRdotReporting){var i=t.customRdotBaseURL;if(i&&0===(i+"").indexOf("//")){n="c~"+navigator.platform+(n?"~"+n:"");t=encodeURIComponent(t.counterName),n=[i,"av","0","-","bump","1.0.0","bump",window.embeddedMedia.version,"-",a++,t,"-","-","-","-","-","-","-","-","-","-","-","-","-",e,n].join("/");return(new Image).src=n}}}}}),define("mp/classes/players/html5/smp-html5",["jquery-1.9","mp/modules/device","mp/modules/html5","mp/classes/xd","mp/classes/errors/error","mp/classes/settingsbuilder","mp/classes/players/player","mp/classes/rdotreporting","mp/modules/demi"],function(k,x,i,_,C,a,t,E,c){function e(){return this._name="smphtml5",this.type="html",this.includePoster=!1,this.requireSonarJS=!0,this._currentTime=0,this._duration=0,this._fullScreen=!1,this._lastSignificant=0,this._kind="",this.pluginsToLoad=[],this.updateMediasetCallback=null,this}function T(l){return function(e){var t,n,i,a=e.type,o=k.Event(a);for(n in e)"type"!=n&&(o[n]=e[n]);switch(l.processEvent(o,e,e.data,k),a){case"durationchange":l._duration=e.duration;break;case"initialised":l._version=(e.version+"").replace(/\.smphtml5/i,"").replace(/[^\d\.]/gim,""),l.initialised();break;case"volumechange":l._muted=e.muted,l._volume=e.volume;break;case"guidanceShow":l._gCalled=!0,l._lockClicked=e.lockClicked,window.embeddedMedia.parentalGuidance.show(e,l._settings.ui.colour,l._settings.locale()),l._fullScreen&&(l.wrapper[0].style.WebkitTransform="");break;case"pause":l._ended=o.ended;break;case"mediaItemChanged":case"playing":l._mediaItem=o.mediaItem;break;case"playlistLoaded":var r,s=document.getElementById(l.getId());s&&(l.playlist.title?s.title=l.playlist.title:(r=window.embeddedMedia.language,s.title=r.t("screenreaderDefaultIframeTitle",l._settings.locale())));break;case"playlistLoading":e.statsObject&&(t=function(){e.statsObject.playlistURL||(e.statsObject.playlistURL=e.url),l._statsObject=e.statsObject});break;case"beforeFullscreenEnter":e.applyPageFullScreen&&l._pfse();break;case"beforeFullscreenExit":l._settings.superResponsive&&(l.wrapper.css("paddingBottom",""),setTimeout(function(){l.wrapper.css(l.css)},10)),e.applyPageFullScreen&&l._pfsx();break;case"loadingThreeSixty":i=l,d||(d=!0,window.addEventListener("devicemotion",function(e){e={rotationRate:{alpha:e.rotationRate.alpha,beta:e.rotationRate.beta,gamma:e.rotationRate.gamma},orientation:window.orientation};i.xd.fire("devicemotion",e)}));break;case"verify":window.embeddedMedia.parentalGuidance.verify(e,function(e){l.call("PINverified",{isCorrect:e})})}try{l._settings.trigger(o),t&&t()}catch(e){throw t&&t(),e}}}function o(e){var t,n=k.extend(!0,{},e);return n._container=null,n.container=null,n.dispatch=null,n.init=null,n.trigger=null,n.embedReferer=document.referrer||"",n.uiClass=(t=[],(e=n).uiClass&&t.push(e.uiClass),e.defaultUiClass&&t.push(e.defaultUiClass),t.join(" ")),a.mediationUrls(n,n,!0),n.mobileNetwork=x.get().connection.mobile,n.enableStatsReporting=n.enableStatsReporting,n._demiIsUK=window.embeddedMedia.demi.isUK,n}var d=!1,n=e.prototype=new t;return n.compatibility=function(e){var t=x.get(),n=!1;return n=!(n=e.dashPlaybackOnly?t.hasMseSupport:i.media.video&&(t.hasHlsVodSupport||t.isMobileOrTablet||t.hasMseSupport))&&t.hybrid?!0:n},n.embedUrl=function(e){e.smpj2Beta;var t="//emp.bbc.co.uk/emp/SMPj/2.43.0/iframe.html";return t=e.html5Debug?"//emp.bbc.co.uk/emp/SMPj/2.43.0/debug.html":t},n.embed=function(v,e){clearTimeout(v.initialisationListenerTimeout);var w=this;w.css={"border-bottom":0,"z-index":999,position:"relative",height:"100%",width:"100%","padding-bottom":0},w._settings=v,w._container=v.container,w._container.empty();var t=x.get();t.supportsFlash||c(),v.saveData&&(w._settings.delayEmbed=!0,w._settings.ui.thumbnail.enabled=!1,w._settings.ui.disableReithFonts=!0),w.uiDefaults(t),v.supportHls=t.hasHlsVodSupport,v.deviceSupports360=t.support360;for(var n=0;v.plugins.toLoad.length>n;n++){var i=v.plugins.toLoad[n];w.loadPlugin(i,i.data)}for(var a=w.embedUrl(v),o=!1,r=["bbc.co.uk","bbc.com","britbox.com","bbcrewind.co.uk","bbcconnectedstudio.co.uk"],n=0;n<r.length;n++)if(-1!==location.host.indexOf(r[n])){a=a.replace("bbc.co.uk",r[n]);try{document.domain=r[n],o=!0}catch(e){}}o||(a=a.replace(/^\/\//,"https://")),w.uniqueId="X"+Math.random();var P=w._container;v.superResponsive&&(w.css["padding-bottom"]="56.25%");var s=w.getId(),l=w.wrapper=k("<div />").css(w.css).attr({id:s+"wrp"}).appendTo(P),d=k("<iframe />").attr({id:s,name:s,frameborder:0,scrolling:"no",src:a,allowfullscreen:"",allowtransparency:"",lang:w._settings.locale()}).css({position:"absolute",left:0,top:0,width:"100%",height:"100%"}).appendTo(l).load(function(){var e=setTimeout(function(){E.error(6007,v,"smphtml5");var e=k.Event("error");e.errorData=new C(6007,v),w._container.trigger(e)},5e3);P.bind("initialised",function(){clearTimeout(e)});var t,o,r,s,l,d,c,u,p,m,h,g,f,y,b,n,i,a=k(this).attr("id");o=a,g=(h=t=w).wrapper,f=document.body.style,y=document.documentElement.style,b=(t=x.get()).os.ios&&!t.isTabletDevice,h._pfse=function(){h._fullScreen=!0,m||(m=document.createElement("style"),document.createTextNode&&m.appendChild(document.createTextNode(""))),document.head.appendChild(m);var e=m.sheet||m.styleSheet;e.cssRules&&0===e.cssRules.length&&(e.insertRule("#"+o+"wrp{z-index:2147483600!important}",0),e.insertRule("div{z-index:auto!important}",1),e.insertRule(".smpPG {z-index:2147483600!important}",2)),l=window.pageXOffset||document.documentElement.scrollLeft,d=window.pageYOffset||document.documentElement.scrollTop,r=f.overflow,f.overflow="hidden",s=y.overflow,y.overflow="hidden",k(document.body).bind("touchmove.playerFullscreen",function(e){e.preventDefault()});var t=h.resizePlayer=function(){var e=window.innerWidth,t=window.innerHeight;g.css(b?{position:"fixed",top:0,left:0,height:t+"px",width:e+.5+"px","padding-bottom":0}:{position:"fixed",top:0,left:0,height:t+"px",width:e+"px","padding-bottom":0}),g[0].style.setProperty&&g[0].style.setProperty("position","fixed","important"),g[0].style.WebkitTransform="translate3d(0,0,10em)"};if(k(window).bind("resize.playerFullscreen orientationchange.playerFullscreen",function(){t(),clearTimeout(p),p=setTimeout(t,200)}),!c){for(var n="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, viewport-fit=cover",i=document.getElementsByTagName("meta"),a=0;i.length>a;a++)if("viewport"===i[a].name){u=i[a].content,i[a].content=n,c=i[a];break}u||((c=document.createElement("meta")).name="viewport",c.content=n,document.getElementsByTagName("head")[0].appendChild(c))}setTimeout(t,250)},h._pfsx=function(){h._fullScreen=!1,h.resizePlayer=null,clearTimeout(p),m&&document.head.removeChild(m),k(window).unbind("resize.playerFullscreen orientationchange.playerFullscreen"),g[0].style.setProperty&&g[0].style.removeProperty("position","fixed","important"),g.css(h.css),g[0].style.WebkitTransform="",f.overflow=r,y.overflow=s,k(document.body).unbind("touchmove.playerFullscreen"),u?(c.content=u,c=u=null):c&&c.parentNode&&(c.content="",c.parentNode.removeChild(c),c=null),window.scroll(l,d)},w.xd&&(w.xd._listeners={}),w.xd=new _(a),w.xd.on("jsapi",T(w)),"object"!=typeof window.JSON?((a=document.createElement("script")).async=!0,a.src="https://emp.bbci.co.uk/emp/assets/bump-3/json.js",a.onload=function(){clearTimeout(i),w.fireBootstrap()},document.head.appendChild(a),n=function(){window.JSON?w.fireBootstrap():i=setTimeout(n,1e3)},i=setTimeout(n,1e3)):w.fireBootstrap()});w._settings.delayEmbed&&d.attr("loading","lazy"),d.attr("allow","autoplay"),window.addEventListener&&window.addEventListener("pageshow",function(e){e.persisted&&(d.attr("src",function(e,t){return t}),w._fullScreen&&w._pfsx())}),e(w,{markers:!0,queuedPlaylist:!0,previousPlaylist:!0,threeSixty:t.support360,inPage:!0,overlay:!0})},n.fireBootstrap=function(){var t=this,n={player:{vars:o((window.embeddedMedia.playerInstances[t.uniqueId]=t)._settings)},id:t.uniqueId,requireMap:window.bbcRequireMap};try{document.getElementById(t.getId()).contentWindow.bootstrap(n)}catch(e){t.xd.fire("bootstrap",n)}},n.updateUiConfig=function(e){this.call("uiConfigFromBump",e)},n.updateConfig=function(e){this.call("configFromBump",e)},n.captureIntent=function(e){this.call("captureIntent",e)},n.updateMediaset=function(){function e(){var e=n._settings,t={mediator:e.mediator,mobileNetwork:window.embeddedMedia.demi.isMobileNetwork};a.mediationUrls(t,e,!0),n.call("configFromBump",t)}var n=this;n.ready?e():n.updateMediasetCallback=e},n.loadPlaylist=function(e){var t,n=this;n.ready&&((t=o(n._settings)).nonUserBypass=t.nonUserBypass||!0===e,n.playlist=null,n._mediaItem=null,n.call("loadPlaylist2",t),t.playlistObject&&t.playlistObject.embedRights&&!t.externalEmbedUrl&&n.updateUiConfig({embed:{enabled:!1}}),(e=t.webcastData)&&(e.accurateStartTime||e.scheduledStartTime||e.accurateEndTime||e.scheduledEndTime)&&n.webcastData(e),t.nonUserBypass=!1)},n.getId=function(){return this._name+"iframe"+this._settings.domid},n.call=function(t,n){try{var e=document.getElementById(this.getId());(e.contentWindow.publicApi.api[t]||e.contentWindow.publicApi[t])(n)}catch(e){this.xd&&this.xd.fire("jsapi",{call:t,params:n})}},n.queuePlaylist=function(e,t){this.call("queuePlaylist",{playlist:e,options:t})},n.setPreviousPlaylist=function(e,t){this.call("setPreviousPlaylist",{playlist:e,options:t})},n.loadPlugin=function(e,t){var n;e&&(e.j2?(n={url:e.j2,data:t},this.ready?(this.setData(n.data),this.loadPluginWithCheck(e.j2,n,"loadPlugin2")):this.pluginsToLoad.push(n)):e.html&&(n={url:e.html,data:t},this.ready?(this.setData(n.data),this.loadPluginWithCheck(e.html,n,"loadPlugin2")):this.pluginsToLoad.push(n)))},n.webcastData=function(e){e&&(t.prototype.webcastData.call(this,e),this.setData({name:"SMP.webcastData",data:e}))},n.dispatchEvent=function(e,t){e&&this.call("dispatch",{type:e,data:t},!0)},n.show=function(e){this.wrapper[0].firstChild.style.width="100%",this._settings.tryPlayAfterInHtml&&e&&this.play(!0)},n.hide=function(){this.wrapper[0].firstChild.style.width="0%"},n.getHandleJSAPI=function(){return T(this)},n.initialised=function(){var e=this,t=e._settings;e.before(),e.updateMediasetCallback&&e.updateMediasetCallback();for(var n=0;e.pluginsToLoad.length>n;n++){var i=e.pluginsToLoad[n];i.waitOnPluginLoad=t.waitOnPluginLoad,e.setData(i.data),this.loadPluginWithCheck(i.url,i,"loadPlugin2")}(t.playlistObject||t.playlist)&&e.loadPlaylist(!0),e.started(x.get())},e}),define("mp/classes/players/app",["jquery-1.9","mp/modules/device","mp/classes/settingsbuilder","mp/classes/players/player"],function(g,a,f,e){function y(e,t,n){var i=document.createElement("div"),a=window.embeddedMedia.players.length,o=!n,r="",s=document.getElementsByClassName("p_cta")[0],l="rtl"==(r=s?(window.getComputedStyle?window.getComputedStyle(s):s.currentStyle).direction:r),d=l?"margin-right: 10px; ":"margin-right: -2px; ",c=l?"margin-right:10px;":"margin-left:10px;",u=l?"margin-right:80px;":"margin-left:80px;",p=l?"padding-left:30px;":"padding-right:30px;";i.id="p_guidance"+a;n=document.createElement("div");n.id="p_guidanceBox"+a,n.className="p_guidanceBox";s=document.createElement("span"),r=document.createElement("span"),l="display:inline-block;margin:auto;border-radius:50%;height:15px;width:15px;"+(t?"background-color:white; color:black;":"background-color:red;")+"position: relative; top:-2px;";v?(s.id="p_guidanceG"+a,r.id="p_guidanceW"+a,s.style.backgroundImage='url("'+w+'svg/guidance.svg")',r.style.backgroundImage='url("'+w+'svg/warningGuidance.svg")',r.style.display=t?"inline-block":"none",s.style.display=t?"none":"inline-block",s.setAttribute("aria-labelledby","p_guidanceText"+a),r.setAttribute("aria-labelledby","p_guidanceText"+a),l="width:15px;height:15px;display:inline-block;position: relative; top: 2px;"+d):(s.id="p_guidanceG"+a,(d=document.createElement("span")).id="p_guidanceGText"+a,s.appendChild(d),d.textContent="G",d.setAttribute("aria-labelledby","p_guidanceText"+a)),n.appendChild(s),n.appendChild(r);r=document.createElement("span");r.id="p_guidanceText"+a,r.textContent=e,n.appendChild(r),i.appendChild(n);n=document.createElement("style");document.getElementsByTagName("head")[0].appendChild(n);n=n.sheet||n.styleSheet,p="position:absolute;height:80px;bottom:-0.5px;background-color: rgba(0, 0, 0, 0.7);"+u+"margin-top: -40px;display:table;"+p+"line-height:1";return 0<=document.documentElement.className.indexOf("b-reith-sans-font")&&o?i.className+="font-family-sans":p+="; font-family:helvetica, Arial, sans-serif",m(n,"#p_guidance"+a,p,0),m(n,".minimode #p_guidance"+a,"left: 61px;height:60px;",1),m(n,"#p_guidanceBox"+a,"color:#ffffff;font-size:12px;font-weight:bold;padding-left:8px;display:table-cell;vertical-align:middle;",2),m(n,"#p_guidanceG"+a,l,3),m(n,"#p_guidanceW"+a,l,3),m(n,"#p_guidanceGText"+a,"position:relative;left:3px;top:1px;line-height:normal;",4),m(n,"#p_guidanceText"+a,c,5),{text:r,div:i,id:a}}function m(e,t,n,i){e.insertRule?e.insertRule(t+"{"+n+"}",i):e.addRule&&e.addRule(t,n,i)}function t(e){return this.immediate=!0,this._name=e,this}function b(e,t){t={gMessage:t,isWarning:!1};return e.playlistObject&&(e.playlistObject.warning&&(t.gMessage=e.playlistObject.warning,t.isWarning=!0),e.playlistObject.guidance&&(t.gMessage=e.playlistObject.guidance,t.isWarning=!1)),t}var v,w="//emp.bbci.co.uk/emp/assets/2.0.27/",e=t.prototype=new e;return e.createCta=function(){var e=this,t=e._settings,n=t.ui.miniMode&&t.ui.miniMode.enabled;e._createdUI=g.extend(!0,{},t.ui);var i=!1,a=null;if(t.overrideCtaDuration?a=t.overrideCtaDuration:(d=f.firstProgramme(t.playlistObject))&&(i=!!(s=d)&&("radioProgramme"===s.kind||"audio"===s.kind),d.duration&&(a=function(e,t){if(!e)return"00:00";if(isNaN(e)||e<0||36e4<e)return"";var n=Math.floor(e/60),i=Math.floor(n/60),n=Math.floor(n%60),e=Math.floor(e%60),e=[n=n<10?"0"+n:n,e=e<10?"0"+e:e];return(0<i||t)&&e.unshift(i),t&&e.pop(),e.join(":")}(d.duration,!1))),!e.hasPlaylist())return!0;var o=(t.ui.colour+"").replace("0x","#").substring(0,7),r=e.css;if(t.superResponsive&&(r["padding-bottom"]="56.25%"),e.wrapper||(e.wrapper=g("<div />").css(r)),n?e.wrapper.addClass("minimode"):e.wrapper.removeClass("minimode"),!t.backgroundPlayer){var s=window.embeddedMedia.players.length,l=g('<a id="cta'+s+'" class="p_cta"/>').attr({title:window.embeddedMedia.language.t("aaampPlay",t.locale())}),d=e._ctaClassName=t.ui[e.classStr]||t.ui.CTAcss;e.incGuidance=!0;var c,u,p,m,h,r=null;return a&&t.ui.cta&&"duration"===t.ui.cta.mode&&((r=document.createElement("span")).className="p_ctaDuration",r.textContent=a,l.append(r)),d?(e.incGuidance=!1,l[0].className=d):(v=t.ui.useHighResIcons,(s=t.ui.cta||{}).ignoreAudio&&(i=!1),a=function(e,t,n){var i=e.ui.cta||{};i.ignoreAudio&&(n=!1);e="cta_play.png";return i.iplayer?e=t?n?"svg/white/play-iplayer-audio.svg":"svg/white/play-iplayer.svg":n?"cta_play_audio_iplayer.png":"cta_play_iplayer.png":t?e=n?"svg/white/audio.svg":"svg/white/play.svg":n&&(e="cta_play_audio.png"),e}(t,v,i),d=t.ui.cta&&t.ui.cta.iplayer,d=function(e,t,n,i,a){var o={ctaSize:n?"60px":"80px",ctaBackgroundSize:"52px 52px",ctaBackgroundPosition:"50% "+(t?"38%":"50%")};e?(o.ctaBackgroundSize="60px 60px",t&&(o.ctaBackgroundPosition="10px 5px"),n?i?a?(t&&(o.ctaBackgroundPosition="6px 0px"),o.ctaBackgroundSize="49px 49px"):(t&&(o.ctaBackgroundPosition="7px 1px"),o.ctaBackgroundSize="45px 45px"):(t&&(o.ctaBackgroundPosition="10px 4px"),o.ctaBackgroundSize="40px 40px"):i&&(t&&(o.ctaBackgroundPosition="9px 4px"),o.ctaBackgroundSize="62px 62px")):n?a?(o.ctaBackgroundSize=i?"23px 23px":"27px 27px",t&&(o.ctaBackgroundPosition="50% 31%")):i?(o.ctaBackgroundSize="22px 22px",t&&(o.ctaBackgroundPosition="50% 34%")):o.ctaBackgroundSize="35px 35px":i?o.ctaBackgroundSize="28px 28px":a&&(o.ctaBackgroundSize="36px 36px");return o}(v,r,n,i,d),a='url("'+w+a+'")',void 0!==s.custom&&(a='url("'+s.custom+'")'),l.css({backgroundImage:a,backgroundPosition:d.ctaBackgroundPosition,backgroundRepeat:"no-repeat",backgroundColor:"#000000",backgroundSize:d.ctaBackgroundSize,opacity:.8,margin:0,width:d.ctaSize,height:d.ctaSize,display:"block",position:"absolute",bottom:"-0.5px"}),r&&(d=n?"6px":"8px",h=n?"60px":"80px",g(r).css({"font-size":"0.75rem","text-align":"center",position:"absolute",bottom:d,left:"0px",width:h,color:"#fff","background-colour":"transparent"})),e._container.on("mousedown touchstart mouseover focusin",function(){g(l).css({backgroundColor:o,opacity:1})}),e._container.on("touchmove mouseup touchend mouseout focusout",function(){g(l).css({backgroundColor:"#000000",opacity:.8})})),t.includeAppClickHandler&&(u=!1,p=function(){u=!1},m=function(){""!==e.wrapper[0].style.display||u||(e.sonar&&setTimeout(function(){t.trigger(g.Event("userPlay")),e.sonar.action("click","play",{mediaplayer_name:e.daxname,mediaplayer_type:"video"})},50),e.play(),u=!0,clearTimeout(c),c=setTimeout(p,100))},g(l).attr("tabIndex",0).on("keyup",function(e){32!=e.keyCode&&13!=e.keyCode||m()}),e._container.on("click",m)),e.wrapper.append(l),e._container.empty().append(e.wrapper),!e.incGuidance||t.ui.guidance&&!1===t.ui.guidance.enabled||(h=t.playlistObject&&(t.playlistObject.guidance||t.playlistObject.warning)||t.forceGuidance||t[e._guidance])&&(h=b(t,h),e.guidanceWrapper=y(h.gMessage,h.isWarning),e.wrapper.append(e.guidanceWrapper.div)),!1}e._container.empty().append(e.wrapper)},e.css={position:"relative","z-index":1,height:"100%",width:"100%",cursor:"pointer","padding-bottom":0},e.embed=function(e,t){var n=this;n._settings=e,n._container=e.container,n._version=window.embeddedMedia.version,n.uiDefaults(a.get()),n.ctaNeedsCreating=n.createCta(),n.extraEmbed&&n.extraEmbed(),t(n,n.capability),n.processPlaylist(null,!0),e.trigger("initialised"),n.processPlaylist()},e.show=function(e){this.wrapper.children().show(),e&&this.play()},e.hide=function(){this.wrapper.children().hide()},e.setLocation=function(e){var t=this._settings;if(t.insideIframe){var n=g.Event("navigateTo");n.href=e,t.trigger(n)}else{try{var i=""===top.location.href&&!1}catch(e){i=!0}a.requiresWindowOpenSMPAirLaunch||i?window.open(e):top.location=e}},e.hasPlaylist=function(){var e=this._settings;return e.playlist||e.playlistObject},e.updateUiConfig=function(){var e=this._createdUI||{},t=this._settings.ui,n=!1;(e.miniMode&&e.miniMode.enabled)!=(t.miniMode&&t.miniMode.enabled)||e.colour!=t.colour?n=!0:(t=t[this.classStr]||t.CTAcss,this._ctaClassName!=t&&(n=!0)),n&&(this.wrapper&&this.wrapper.empty(),this.createCta())},e.processPlaylist=function(e,t){var n=this,i=n._settings,e=e||i.playlistObject;if(e){n.playlist=g.extend(!0,{},e);var a=n.playlist.items;if(a)for(var o=a.length-1;0<=o;o--){var r=a[o];!n.filterPlaylist||"ident"!=r.kind&&"advert"!=r.kind&&"360"!=r.kind||a.splice(o,1),r.versionID?r.vpid=r.versionID:r.serviceID&&(r.vpid=r.serviceID,!(r.live=!0)!==n.playlist.simulcast&&(n.playlist.simulcast=!0)),r.identifier=r.vpid}t||((t=g.Event("playlistLoaded")).playlist=n.playlist,i.trigger(t))}else n.playlist=null},e.next=function(){var e,t=this.playlist;t&&(t.items&&1<t.items.length?t.items.shift():t.queuedPlaylist&&(this.processPlaylist(t.queuedPlaylist),(e=this._settings).playlist="",e.playlistObject=t.queuedPlaylist,e.webcastData={},e.overrideHoldingImage=null,e.statsObject.parentPID=void 0,e.statsObject.parentPIDType=void 0,e.statsObject.episodePID=void 0,e.statsObject.clipPID=void 0,e.statsObject.brandPID=void 0,e.statsObject.seriesPID=void 0,e.statsObject.playlistLabels=void 0,e.statsObject.playlistName=void 0,t.queuedOptions&&g.extend(!0,e,t.queuedOptions),this._statsObject=g.extend(!0,{},e.statsObject)))},e.loadPlaylist=function(){var e,t,n,i=this,a=i._settings;window.embeddedMedia.parentalGuidance.setUnder16Permission(!1),i.ctaNeedsCreating?setTimeout(function(){i.ctaNeedsCreating=i.createCta()},100):!i.incGuidance||a.ui.guidance&&!1===a.ui.guidance.enabled||((e=a.playlistObject&&(a.playlistObject.guidance||a.playlistObject.warning)||a.forceGuidance||a[i._guidance])?(e=b(a,e),i.guidanceWrapper?(v?(n=document.getElementById("p_guidanceG"+i.guidanceWrapper.id),t=document.getElementById("p_guidanceW"+i.guidanceWrapper.id),e.isWarning?(t.style.display="inline-block",n.style.display="none"):(t.style.display="none",n.style.display="inline-block")):(t=document.getElementById("p_guidanceGText"+i.guidanceWrapper.id),n=document.getElementById("p_guidanceG"+i.guidanceWrapper.id),e.isWarning?(t.style.color="black",n.style.backgroundColor="white"):(t.style.color="white",n.style.backgroundColor="red")),i.guidanceWrapper.div.style.display="",i.guidanceWrapper.text.textContent=e.gMessage):(i.guidanceWrapper=y(e.gMessage,e.isWarning,a.ui.disableReithFonts),i.wrapper.append(i.guidanceWrapper.div))):i.guidanceWrapper&&(i.guidanceWrapper.div.style.display="none",i.guidanceWrapper.text.textContent="")),i.processPlaylist(),a.autoplay&&i.play(),i.resetContainer&&i.resetContainer(),i.setPoster()},t}),define("mp/classes/players/apps/smp-phantom",["mp/classes/players/app","mp/modules/device"],function(e,t){function n(e){return!0===e.phantomPlayer||e.backgroundPlayer&&!t.get().useOpaque}function i(){return this.compatibility=n,this.daxname="SMPPHANTOM",this._name="smp-phantom",this}return(i.prototype=new e("smp-phantom")).play=function(){},i}),define("mp/modules/players",["mp/classes/players/html5/smp-html5","mp/classes/players/apps/smp-phantom"],function(e,t){return[t,e]}),define("mp/classes/players/html5/smp-html-background",["jquery-1.9","mp/modules/device","mp/modules/html5","mp/classes/settingsbuilder"],function(n,e,t,a){function i(){return this._name="smp-html-background",this.type="html",this.includePoster=!1,this.backgroundPlayer=null,this}var o=i.prototype;return o.compatibility=function(e){return!(!e.backgroundPlayer||!t.media.video||e.disableHtml)},o.updateMediaset=function(){this.backgroundPlayer&&this.backgroundPlayer.determinedConnectionCallback()},o.embed=function(t,n){var i=this;a.mediationUrls(t,t,!0),i._settings=t,i._container=t.container,i._container.empty();var e=t.html5Debug?"//emp.bbci.co.uk/emp/htmlbackground/1.0.6/backgroundplayer.js":"//emp.bbci.co.uk/emp/htmlbackground/1.0.6/backgroundplayer.min.js";require([e],function(e){i.backgroundPlayer=new e(i._container[0],t,i),n(i,{markers:!1,queuedPlaylist:!1,inPage:!0,chromecast:!1,overlay:!1})})},o.loadPlaylist=function(){this.backgroundPlayer&&this.backgroundPlayer.loadPlaylist(this._settings)},o.play=function(){this.backgroundPlayer&&this.backgroundPlayer.play()},o.pause=function(){this.backgroundPlayer&&this.backgroundPlayer.pause()},o.muted=function(e){return this.backgroundPlayer?this.backgroundPlayer.muted(e):void 0},o.volume=function(e){return this.backgroundPlayer?this.backgroundPlayer.volume(e):void 0},o.trigger=function(e){var t;e.type&&(t=e.type,delete e.type,e=n.Event(t,e),this._container.trigger(e))},i}),define("mp/classes/decisionengine",["mp/modules/device","mp/modules/players","mp/classes/players/html5/smp-html-background","mp/classes/players/html5/smp-html5"],function(s,l,d,c){function e(e){return this._settings=e,this}return e.prototype={decide:function(){var e=this,t=s.get(),n=this._settings,i="";try{i=document.cookie+""}catch(e){}if(n.backgroundPlayer)return e.player=new d,e.name=e.player._name,e.player;if(n.threeSixty)return(t.support360||/force360Support=true/i.test(i))&&(e.player=new c,e.name=e.player._name),e.player;var i=i.match(/bbcBumpForcePlayer=(.*?)(?:;|$)/),a=i&&i.length?i[1]:"";if(e.name=null,!n.showUnsupportedMessage||""!==a){for(var o=0;l.length>o;o++){var r=new l[o];if(a==r._name||""===a&&r.compatibility(n)){""!==a&&(n.playerWasForced=!0),e.player=r,e.name=r._name;break}}return e.player}}},e}),define("mp/libs/securehash",["mp/libs/securehash"],function(){function t(e){return function(e){for(var t="",n=0;32*e.length>n;n+=8)t+=String.fromCharCode(e[n>>5]>>>24-n%32&255);return t}(function(e,t){e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t;for(var n=Array(80),i=1732584193,a=-271733879,o=-1732584194,r=271733878,s=-1009589776,l=0;e.length>l;l+=16){for(var d=i,c=a,u=o,p=r,m=s,h=0;h<80;h++){n[h]=h<16?e[l+h]:y(n[h-3]^n[h-8]^n[h-14]^n[h-16],1);var g=f(f(y(i,5),function(e,t,n,i){return e<20?t&n|~t&i:!(e<40)&&e<60?t&n|t&i|n&i:t^n^i}(h,a,o,r)),f(f(s,n[h]),function(e){return e<20?1518500249:e<40?1859775393:e<60?-1894007588:-899497514}(h)));s=r,r=o,o=y(a,30),a=i,i=g}i=f(i,d),a=f(a,c),o=f(o,u),r=f(r,p),s=f(s,m)}return Array(i,a,o,r,s)}(function(e){for(var t=Array(e.length>>2),n=0;t.length>n;n++)t[n]=0;for(n=0;8*e.length>n;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<24-n%32;return t}(e),8*e.length))}function f(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function y(e,t){return e<<t|e>>>32-t}return{generateHash:function(e){return function(e){for(var t,n="0123456789abcdef",i="",a=0;e.length>a;a++)t=e.charCodeAt(a),i+=n.charAt(t>>>4&15)+n.charAt(15&t);return i}(t(function(e){for(var t,n,i="",a=-1;++a<e.length;)t=e.charCodeAt(a),n=e.length>a+1?e.charCodeAt(a+1):0,55296<=t&&t<=56319&&56320<=n&&n<=57343&&(t=65536+((1023&t)<<10)+(1023&n),a++),t<=127?i+=String.fromCharCode(t):t<=2047?i+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?i+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(i+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return i}(e)))}}}),define("mp/classes/parentalguidance",["mp/libs/securehash"],function(t){function r(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function c(e){e.addEventListener&&(F.push(e),e.addEventListener("keydown",i))}function i(e){32==e.keyCode&&e.preventDefault()}function s(){L="true"==n(W,"pgAgeConfirm"),j=n(W,"pgPIN"),U="true"==n(W,"pgUnlocked")}function e(e,t){return L=!(A=[]),this.closedCallbacks=[],this.updateCallbacks=[],this.openedCallbacks=[],G=e||{noPlayerAction:function(){}},this.guidance={},this.isOver16=t.over16,this.isUnder16=t.under16,t.over16&&t.under16&&(this.isOver16=!1),H=t,this.usingReith=!1,this.reithEnabled=!H.ui.disableReithFonts,s(),this._isLocked=!!j&&!U,N=window.embeddedMedia.language,this.updateGuidanceState(),this}function u(e,t){var n=document.getElementById(e);n.onmouseover=n.onfocus=function(){n.style.transition="0.3s",t?n.style.backgroundColor=H.ui.guidance.pgColour:n.style.color=H.ui.guidance.pgColour},n.onmouseout=n.onblur=function(){n.style.transition="0.3s",t?n.style.backgroundColor=H.ui.guidance.pgBackgroundColour:n.style.color="#ffffff"}}function n(e,t){try{var n=document.cookie}catch(e){n=""}if(-1==(e=n.indexOf(e+t+"=")))return null;e=n.indexOf("=",e)+1,t=n.indexOf(";",e);return-1==t&&(t=n.length),unescape(n.substring(e,t))}function l(e,t,n,i){var a=new Date;a.setTime(a.getTime()+15552e6*(i?-1:1)),i||(a.setDate(15),a.setHours(12),a.setMinutes(0),a.setSeconds(0));i="; expires="+a.toGMTString(),a=location.hostname;-1!==(a=-1!==a.indexOf(".bbc.co.uk")?".bbc.co.uk":a).indexOf(".bbc.com")&&(a=".bbc.com");try{document.cookie=e+t+"="+escape(n)+i+"; Domain="+a+"; Path=/"}catch(e){}}function p(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function m(n,e){A.push(n),n.setAttribute("tabindex","0"),n.onkeydown=function(e){var t=(e=e||window.event).keyCode||e.which;9!=t&&13!=t||(r(e),9==t?(t=A.length-1,o=e.shiftKey?0===o?t:o-1:o===t?0:o+1,setTimeout(function(){A[o].focus()},200)):setTimeout(function(){B=!0,n.click()},200))},e&&(o=A.length-1,n.focus())}function h(){o=0,A=[],m(D)}function d(e,t,n){var i="",i=(L=t&&n&&n.isUnder16?!1:L)?(e.style.backgroundPosition="center",N.t("pgAriaAgeConfirmCheckBox",O)):(e.style.backgroundPosition="-30px",N.t("pgAriaAgeConfirmCheckBoxUnchecked",O));e.setAttribute("aria-label",i),e.textContent=e.innerText=i}function g(e,t,n){var i,a=document.getElementById("pgErrorMessage");a?p(a):((a=document.createElement("div")).id="pgErrorMessage",(i=a.style).width=I.style.width,i.backgroundColor=H.ui.guidance.pgSeparatorColour,i.marginTop="15px",i.marginBottom="5px",i.left="-26px",i.position="relative"),n?e.insertBefore(a,e.firstChild):e.appendChild(a);n=document.createElement("div"),e=n.style;e.fontSize="14px",e.position="relative",e.width="100%",e.color="#ffffff",e.fontSize="11px",e.textAlign="center",e.paddingTop=e.paddingBottom="10px",n.innerHTML='<span style="display:inline-block;  background-image: url(//emp.bbci.co.uk/emp/assets/2.0.27/alert-color.png); background-repeat: no-repeat; background-size: 100% 100%; margin-right:5px; width:15px; height:13px;"></span>'+t,a.appendChild(n)}function f(e,t){var n=document.createElement("a");n.id=t.id,n.textContent=n.innerText=t.text,n.setAttribute("aria-label",t.text+" button");var i=n.style;i.cursor="pointer";try{i.display="table"}catch(e){i.display="block"}i.verticalAlign="middle",i.width="100%",i.lineHeight="3.5",i.fontSize="14px",i.color="#ffffff",i.backgroundColor=H.ui.guidance.pgBackgroundColour,M.appendChild(n),u(t.id,!0),c(n);var a=!1;setTimeout(function(){a=!0},500);var o=t.clickFunction;return n.onclick=function(){a&&(P(!1,n.id),o())},m(n,t.focus),n}function y(e,t,n){var i,a,o;p(M),i=M,a=document.createElement("div"),(o=a.style).marginTop="-1px",o.position="absolute",o.width="100%",o.height="1px",o.backgroundColor=H.ui.guidance.pgSeparatorColour,i.appendChild(a);t=f(0,t);n&&(t.style.borderBottom="1px solid "+H.ui.guidance.pgSeparatorColour,f(0,n))}function b(e){var t=document.getElementById("pgHeader");t.textContent=t.innerText=N.t(e,O)}function v(e){p(S),h();var t=document.createElement("div");t.setAttribute("role","alertdialog"),t.setAttribute("aria-labelledby","pgInfoHeader"),t.setAttribute("aria-describedby","pgInfo"),t.style.marginBottom="24px",S.appendChild(t),b("newPgTurnOnParentalGuidance"),d=R?"pgUnlock":"download"==(o=e._intent)?"pgDownload":"play"==o?"newToolTipPlay":o;var n=document.createElement("div");n.id="infoLinkContainer";var i=document.createElement("div");i.style.color="#b2b7c4";var a=N.t("notSuitableForChildMessage",O)+'</br> </br>  <a id="pgLink" target="_blank" style="color:#ffffff; text-decoration:none; font-size:0.9em;" href="//www.bbc.co.uk/iplayer/guidance"> <div style="display:inline-block; margin-right: 5px; color:black; font-weight:bold; width:13px; height:13px; background-color:white; border-radius:50px;font-family: Arial, Helvetica, freesans, sans-serif;">i</div>'+N.t("findOutMore",O)+"</a> ",o=document.createElement("div");o.id="pgInfo",o.style.fontSize="13px",o.style.color="#868686",o.style.marginTop="35px",t.appendChild(o),o.appendChild(n),n.style.margin=" 0 auto",n.appendChild(i),i.innerHTML=a;a=document.getElementById("pgLink");a.setAttribute("aria-label",N.t("findOutMore",O)),a.style.outline="none",c(a),i.style.display="inline-block",n.style.textAlign="center";var r=o.getElementsByTagName("p");if(r)for(var s=0;r.length>s;s++)r[s].style.color="#868686",r[s].style.fontSize="13px";var o=document.getElementById("pgLink"),l=!1;setTimeout(function(){l=!0},500),o.onclick=function(){return l},m(o,!0);var o={id:"pgTurnOn",text:N.t("newPgTurnOn",O),clickFunction:function(){l&&(e.storeAgeConfirmation(),function(e){p(S),h(),b("newPgTurnOnParentalGuidancePINsection");var t=document.createElement("div");t.id="activatePIN",t.style.marginTop="35px",t.style.fontSize="14px",t.style.color="#ffffff",S.appendChild(t);var n=document.createElement("span");n.innerHTML=N.t("newPgEnterPIN",O),n.style.fontSize="14px",n.style.color="#ffffff",t.appendChild(n);var i=document.createElement("div");i.innerHTML='<span style="color:#b2b7c4;">'+N.t("newPgActivateInfo",O)+"</span>",i.id="activatePINInfo",i.style.marginTop="10px",i.style.marginBottom="24px",i.style.fontSize="14px",i.style.color="#868686",S.appendChild(i);var a=w(S);a.setAttribute("aria-label",N.t("pgAriaPINEntryDescription",O)+"."+N.t("pgAriaPINPrompt",O)),m(a,!0);t=function(){/^\d{4}$/.test(a.value)?(e.setPIN(a.value),e.setLocked(R),e.close(!R)):(a.value="",g(i,N.t("newPgPINvalidationError",O),!1),a.focus())},n=C(e._intent,"pgActivate");k(a,t),y(0,{id:"pgActivate",text:N.t(n,O),clickFunction:t})}(e))}},d={id:"toolTipPlay",text:N.t(d,O),clickFunction:function(){l&&(e.storeAgeConfirmation(),e.close(!0))}};y(0,o,R?null:d),u("pgLink")}function w(e){var t=document.createElement("div");t.id="pinEntry",t.style.width="100%",t.style.height="40px",t.style.marginBottom="20px",e.appendChild(t);var n=document.createElement("input");n.id="pinEntryInputBox";e=n.style;return n.setAttribute("maxlength",4),e.letterSpacing="5px",e.display="block",e.margin="0 auto",e.height="100%",e.width="60%",e.padding="0px",e.resize="none",e.color="#868686",e.fontSize="30px",e.textAlign="center",n.setAttribute("type","password"),n.pattern="[0-9]*",t.appendChild(n),n}function P(e,t){G.noPlayerAction(B||e?"key_press":"click",t,null,H),B=!1}function k(t,n){function e(e){13===((e=e||window.event).keyCode||e.which)&&i&&(P(!0,t.id),setTimeout(n,300))}var i=!1;setTimeout(function(){i=!0},400),t.addEventListener?t.addEventListener("keyup",e):t.onkeyup=e}function x(e){p(S),h(),b("newPgTurnOnParentalGuidanceInsertPIN");var t=document.createElement("div"),n=document.createElement("div"),i=document.createElement("span"),a=document.createElement("div");a.id="needPINinfo",t.id="enterPIN",i.innerHTML=N.t("newPgEnterPINprompt",O),t.style.marginTop=t.style.paddingBottom="16px",t.style.width="100%",t.style.position="relative",t.style.fontSize=i.style.fontSize="14px",i.style.color="#ffffff",t.style.marginTop=I.offsetWidth<330?"25px":"5px",S.appendChild(t),t.appendChild(n),n.appendChild(i),t.appendChild(a),a.innerHTML=N.t("newPgEnterPINinfo",O),a.style.color="rgb(134, 134, 134)",a.style.marginTop="15px";var o=w(S);o.setAttribute("aria-label",N.t("pgAriaPINEntryDescription",O)+"."+N.t("newPgEnterPINprompt",O)),m(o,!0);n=S,i=N.t("newPgManageYourPIN",O),(t=document.createElement("div")).style.marginBottom="20px",t.style.width="100%",t.style.height="15px",n.appendChild(t),(n=document.createElement("a")).setAttribute("target","_blank"),n.setAttribute("href","//www.bbc.co.uk/iplayer/guidance"),n.id="manageLock",n.innerHTML=i,n.style.color="#ffffff",n.style.textDecoration="none",n.style.width="100%",n.style.fontSize="12px",n.style.bottom="0px",n.style.textAlign="center",t.appendChild(n),u("manageLock"),c(n),t=n;m(t);var r=!(t.onclick=function(){return r});setTimeout(function(){r=!0},500);n=function(){r&&(e.verifyPIN(o.value)?(R&&l(W,"pgUnlocked","true"),e.isUnder16&&e.setUnder16Permission(!0),e.setLocked(!1),e.close(!0)):(o.value="",g(a,N.t("newPgIncorrectPIN",O),!1),o.focus()))};k(o,n);t=C(e._intent,"pgUnlock");y(0,{id:"pgTurnOff",text:N.t(t,O),clickFunction:n})}function _(){V++,clearTimeout(z),z=setTimeout(E,100),setTimeout(a,300)}function C(e,t){return R?t:"download"==e?"pgDownload":"play"==e?"toolTipPlay":e}function E(){var e,t;T&&((e=T.style).left=e.top="-500px",e.height=e.width="5000px"),I&&(((e=Math.floor(window.innerWidth/2-I.offsetWidth/2))<0||0<V)&&(e=0),400<=window.innerWidth&&(I.style.left=e+"px"),e=window.innerHeight-I.offsetHeight,window.innerHeight>=I.offsetHeight?(t=Math.floor(e/2),(0<V||t<5)&&(t=5)):t=2,I.style.marginTop="0px",I.style.top=t+"px")}function a(){var e=document.getElementById("pgHeader"),t=document.getElementById("pgInfo"),n=document.getElementById("pgHeaderTitle"),i=document.getElementById("enterPIN"),a=document.getElementById("pinEntry"),o=document.getElementById("pgErrorMessage"),r=document.getElementById("needPINinfo"),s=document.getElementById("activatePIN"),l=document.getElementById("activatePINInfo"),d=document.getElementById("pinEntryInputBox");I.offsetHeight>window.innerHeight?(t&&(t.style.marginTop="10px"),I.style.width=window.innerWidth-20+"px",e.style.fontSize="22px",I.style.left="10px",n&&(n.style.marginTop="10px",n.style.height="35px"),s&&(s.style.marginTop="0"),i&&(i.style.marginTop=I.offsetWidth<330?"25px":"5px",i.style.marginBottom="5px",i.style.paddingBottom="0"),a&&(a.style.marginBottom="10px"),d&&(d.style.width="30%"),o&&(o.style.marginTop="5px",o.style.width=window.innerWidth-20+"px",o.style.marginLeft="0px",o.style.left="-26px",l&&(l.style.marginBottom="5px")),r&&(r.style.marginTop="5px",r.style.marginBottom="5px")):(I.style.left=(window.innerWidth-I.offsetWidth)/2+"px",n&&(n.style.marginTop="35px",n.style.height="42px"),s&&(s.style.marginTop="35px"),a&&(a.style.marginBottom="15px"),d&&(d.style.width="60%"),window.innerWidth<420&&(I.style.width=window.innerWidth-20+"px",I.style.left="10px",t&&(t.style.marginTop="35px"),o&&(o.style.marginTop="15px",o.style.width=window.innerWidth-20+"px",o.style.marginLeft="0px",o.style.left="-26px",l&&(l.style.marginBottom="24px"))),r&&(r.style.marginTop="15px"),i&&(i.style.marginTop=I.offsetWidth<330?"25px":"5px",i.style.paddingBottom="16px"))}var T,I,S,M,D,O,N,o,A,L,R,B,j,U,G,H,z,W="ckns_",F=[],q=!1,V=0;return e.prototype={show:function(e,t,n,i){var a=this;if(O=n,s(),R=(e=e||{}).lockClicked,a._intent=e.intent||"play",window.embeddedMedia.opened({type:"guidanceShown",intent:a._intent}),i)for(var o=0;a.openedCallbacks.length>o;o++)a.openedCallbacks[o]();i=L&&(!j||!a._isLocked);a.isOver16&&(L=!0),!i||R||a.isUnder16?function(t){if(!T){(T=document.createElement("div")).setAttribute("tabindex","0"),T.id="parentalGuidanceBackground",T.className="smpPG";var e=T.style;e.width=e.height="5000px",e.left=e.top="-500px",e.zIndex="2147483600",e.backgroundColor="#333333",e.filter="alpha(opacity=85)",e.opacity=.85,(I=document.createElement("div")).id="guidancePopup",I.setAttribute("role","alertdialog"),I.setAttribute("aria-labelledby","pgHeaderTitle"),I.className="smpPG";var n=I.style;n.position=e.position="fixed",window.innerWidth<400?(n.width=window.innerWidth-20+"px",n.left="10px"):(n.width="390px",n.left=(window.innerWidth-390)/2+"px"),350<window.innerHeight?(n.top="50%",n.marginTop="-175px"):(n.top="5px",n.marginTop="0px"),n.lineHeight="normal",n.verticalAlign="middle",n.color="white",n.zIndex="2147483600",n.backgroundColor=H.ui.guidance.pgBackgroundColour,n.textAlign="left",0<=document.documentElement.className.indexOf("b-reith-sans-font")&&t.reithEnabled?(I.className+=" font-family-sans",t.usingReith=!0):n.fontFamily="helvetica, Arial, sans-serif",document.body.appendChild(T),document.body.appendChild(I),I.onkeydown=function(e){27===((e=e||window.event).keyCode||e.which)&&t.close(!1)};var i=document.createElement("div");i.id="guidanceContainer",i.style.paddingRight=i.style.paddingLeft="26px",i.style.textAlign="center",I.appendChild(i);e=document.createElement("div");e.id="pgHeaderTitle",e.style.height="42px",e.style.position="relative",e.style.marginTop="35px",i.appendChild(e);n=document.createElement("span");n.innerHTML=N.t("pgHeader",O),n.id="pgHeader",n.style.fontSize="24px",n.style.color=H.ui.guidance.pgColour,e.appendChild(n),(S=document.createElement("div")).id="guidanceBody",S.style.position="relative",S.style.width="100%",i.appendChild(S),(M=document.createElement("div")).id="guidanceFooter";i=M.style;i.width="100%",i.height="42px",i.bottom="0px",i.display="table",i.textAlign="center",I.appendChild(M),(D=document.createElement("a")).setAttribute("aria-label",N.t("pgClose",O)),D.id="pgExit";i=D.style;D.title=N.t("pgClose",O),i.position="absolute",i.right=i.top="12px",i.cursor="pointer",i.width=i.height="18px",i.backgroundImage="url(//emp.bbci.co.uk/emp/assets/2.0.27/GEL_Remove_icon.png)",i.backgroundRepeat="no-repeat",I.appendChild(D),c(D);var a=!1;return setTimeout(function(){a=!0},500),D.onclick=function(e){a&&(r(e=e||window.event),P(!1,this.id),t.close(!1))}}}(a)&&(j&&!U&&!this.guidance.under16permissionConfirmed&&this._isLocked?x(a):R&&i||a.isOver16?v(a):function(t,e){p(S),h();var n=document.createElement("div");n.id="guidanceMessage";var i=n.style;i.marginTop="15px",i.marginBottom="5px",i.width="100%",i.position="relative",i.fontSize="13px",S.appendChild(n),b("newAgeConfirmationTitle");var a=document.createElement("div");a.id="guidanceG";var o=a.style;o.display="inline-block",o.margin="auto",o.borderRadius="50%",o.width=o.height="15px",o.backgroundColor="red",o.position="relative",o.top="-2px",o.fontSize="12px",t.usingReith&&(o.lineHeight="1px"),n.appendChild(a),(i=document.createElement("span")).innerHTML="G",(o=i.style).lineHeight="normal",o.position="relative",o.left="-0.5px",o.top="1px",o.color="#ffffff",o.fontFamily="Arial, Helvetica, freesans, sans-serif",t.usingReith&&(o.left="0"),a.appendChild(i),(i=document.createElement("span")).id="guidanceText",i.textContent=i.innerText=e,t.isUnder16&&(i.appendChild(document.createElement("br")),i.appendChild(document.createElement("br")),(e=document.createElement("span")).textContent=e.innerText=N.t("newUnder16WithPermission",O),i.appendChild(e)),(o=i.style).left="0px",o.top="16px",o.marginLeft="5px",o.lineHeight="16px",o.color="#b2b7c4",n.appendChild(i),(o=document.createElement("div")).id="ageConfirm",(i=o.style).width="100%",i.height="57px",i.position="relative",i.fontSize="14px",i.color="#ffffff",i.display="-ms-inline-flexbox",i.justifyContent="center",S.appendChild(o);var r=document.createElement("button");r.id="ageConfirmCheck",(i=r.style).background="url(//emp.bbci.co.uk/emp/assets/2.0.27/tick.png) no-repeat center",i.backgroundPosition="-30px",i.position="absolute",i.top="16px",i.height=i.width="25px",i.verticalAlign="middle",i.cursor="pointer",i.backgroundColor="#ffffff",i.borderWidth="0",i.textIndent="-9999px",i.whiteSpace="nowrap",i.overflow="hidden",o.appendChild(r),m(r,!0),d(r,!0,t),(i=document.createElement("span")).innerHTML=t.isUnder16?N.t("newPgAgeConfirmationUnder16",O):N.t("pgAgeConfirmation",O),i.style.position="relative",i.style.top="20px",i.style.marginLeft="35px",o.appendChild(i);var s=!1;setTimeout(function(){s=!0},500),r.onclick=function(){s&&(L=!L,d(r))},y(0,{id:"pgAgeContinue",text:t.isUnder16?N.t("newPgPlay",O):N.t("pgContinue",O),clickFunction:function(){var e;t.isUnder16&&L?(t.storeAgeConfirmation(),t.setUnder16Permission(!0),t.updateGuidanceState(),t.close(!0)):L?v(t):(e=t.isUnder16?N.t("pgUnder16PermissionValidationError",O):N.t("pgPasswordValidationError",O),g(n,e,!1))}})}(a,e.guidance),document.body.addEventListener&&document.body.addEventListener("touchmove",r),V=0,window.addEventListener&&(window.addEventListener("resize",E),window.addEventListener("orientationchange",_))):a.close(!0)},close:function(e,t){if(document.body.removeEventListener&&document.body.removeEventListener("touchmove",r),window.removeEventListener&&(window.removeEventListener("resize",E),window.removeEventListener("orientationchange",_)),function(){for(var e=0;F.length>e;e++)F[e].removeEventListener("keydown",i);F=[]}(),T&&(T.parentNode.removeChild(T),T=void 0),I&&(I.parentNode.removeChild(I),I=void 0),!t){t={type:"guidanceClosed"};t.success=e,window.embeddedMedia.closed(t);for(var n=0;this.closedCallbacks.length>n;n++)this.closedCallbacks[n](e)}},setPIN:function(e){j=t.generateHash("smpembed"+e),l(W,"pgPIN",j)},setLocked:function(e,t){t&&(l(W,"pgUnlocked",e?"":"true"),U=!e),this._isLocked=e,this.updateGuidanceState()},verify:function(e,t){var n=this.verifyPIN(e.verifyPIN);n&&(this.setLocked(!1),e.lockClicked&&l(W,"pgUnlocked","true")),t(n)},verifyPIN:function(e){return t.generateHash("smpembed"+e)===j},setAgeConfirmation:function(e){L=e,this.storeAgeConfirmation()},storeAgeConfirmation:function(){this.isUnder16||(l(W,"pgAgeConfirm",L),this.setLocked(!0))},setUnder16Permission:function(e){q=e,this.updateGuidanceState()},updateGuidanceState:function(){var e=this.guidance;e.isGuidanceLocked=this._isLocked&&!!j&&!U,e.hasGuidancePIN=!!j,e.guidanceSkipped=L&&!j,e.guidancePINPassed=!this._isLocked&&!!j,e.under16permissionConfirmed=q,e.canPlay=e.guidanceSkipped||e.hasGuidancePIN&&e.guidancePINPassed||U,!this.isUnder16||e.isGuidanceLocked&&!e.guidancePINPassed||e.under16permissionConfirmed||(e.canPlay=!1);for(var t=0;this.updateCallbacks.length>t;t++)this.updateCallbacks[t](e)}},e}),define("mp/classes/sonarreporter",[],function(){function e(){return this.duration=0,this.isLive=!1,this.hasPlayed=!1,this.hasSetMediaItem=!1,this}function r(e,t){for(var n in e)e.hasOwnProperty(n)&&void 0!==e[n]&&(t[n]=e[n]);return t}var s,d,c,u,a;return e.prototype={initComplete:function(e){var t=this;if(d&&!t.echo){var n=e._settings,i=e.name().replace(/-/gm,""),a=n.appName&&""!==n.appName?n.appName:i,o=n.appType&&""!==n.appType?n.appType:c.ApplicationType.WEB,r={},s=e.player._statsObject||{};r[u.COMSCORE_ENABLED]=!1,r[u.BARB_ENABLED]=function(e){var t="",n=!1;try{t=document.cookie+""}catch(e){}var i=t.indexOf("ckns_policy="),a=t.indexOf("ckns_explicit=1");return 0<=i&&0<=a&&"1"===t.substr(i+14,1)&&(n=!0),i=!1,0<=(e.counterName+"").indexOf("iplayer.tv")&&(i=!0),n&&e.enableBarbReporting&&i}(n),r[u.BARB_DEBUG]=!1,r[u.BARB_SITE_CODE]=n.liveEnvironment?"bbcdotcom":"bbcdotcomtest";e=s.echoProfile||"public_service";"public_service"!==((r[u.REPORTING_PROFILE]=e)+"").toLowerCase()&&(t.ssc=r[u.USE_SSC]=!0,r[u.SSC_HOSTNAME]=".com"),r[u.USE_ESS]=!0,n.liveEnvironment||(r[u.ESS_HOSTNAME]="ess.test.api.bbci.co.uk",r[u.REMOTE_CONFIG_URL]="https://mybbc-analytics.stage.files.bbci.co.uk/analytics-remote-config/"),r[u.ATI_ENABLED]=n.enableAtiReporting,r[u.ATI_FORCE_HTTPS]=!0,s.deviceId&&(r[u.ECHO_DEVICE_ID]=s.deviceId),s.destination&&(r[u.DESTINATION]=s.destination);try{var l=t.echo=new d(a,o,r,null,function(){n.appVersion&&l.setAppVersion(n.appVersion),t.player.player._version&&t.echo.setPlayerVersion(t.player.player._version),t.processNewSettings(),l.setPlayerName(i),l.setPlayerDelegate({getPosition:function(){return t.currentTime()},getTimestamp:function(){return t.currentTime(!0)}})})}catch(e){}}},report:function(e){var t;this.hasSetMediaItem&&(t=this.currentTime(),this.echo["av"+e+"Event"](t))},end:function(){this.hasPlayed&&this.report("End")},noPlayerAction:function(e,t,n,i){var a,o=this;o.echo?o.action(e,t,n):(!o.nonPlayerEcho&&d&&(i=i||{},(a={})[u.REPORTING_PROFILE]="public_service",o.nonPlayerEcho=new d("iplayer",c.ApplicationType.WEB,a),o.nonPlayerEcho.setCounterName(i.counterName||"smp.no-player.page")),o.nonPlayerEcho&&o.nonPlayerEcho.userActionEvent(e,t,r(n,{})))},action:function(e,t,n){this.echo&&this.echo.userActionEvent(e,t,r(n,{}))},newPlayer:function(e,t){var n=this;n.player=e,(t||n.boundEvents)&&(n.boundEvents=!0,e[t?"bind":"unbind"]("durationchange info initialised mediaItemChanged playing playlistLoaded playlistLoading SonarSeekingEvent SonarEndEvent SonarPauseEvent SonarPlayEvent SonarBufferEvent SonarErrorEvent SonarResumeEvent SonarSeekEvent SonarUserActionEvent volumechange uiinfo fullscreenEnter fullscreenExit picInPicStarted picInPicStopped statsConfigChanged",{sonarReporter:n},n.eventHandler),n.initComplete(e))},init:function(e){var n=this,t={},i="12.17.0";t["echo-"+i]="//mybbc-analytics.files.bbci.co.uk/echo-client-js/echo-"+i+(e?"":".min"),require.config&&(require.config({paths:t}),require(["echo-"+i],function(e){var t;e&&(s=e.Media,d=e.EchoClient,c=e.Enums,u=e.ConfigKeys,a=e.Environment,s&&d&&c&&u&&a&&((t=n.player)&&(t._settings.liveEnvironment||e.Debug.enable(),n.initComplete(t))))}))},eventHandler:function(e){var t=e.data.sonarReporter;if(t.echo)switch(e.type){case"durationchange":t.media&&!t.isLive&&0<e.duration&&!t.durationSet&&(t.echo.setMediaLength(1e3*e.duration),t.durationSet=!0);break;case"initialised":t.player.player._version&&t.echo.setPlayerVersion(t.player.player._version);break;case"mediaItemChanged":t.hasPlayed=!1,function(t,e){e=e||{connections:[]},t.end(),t.durationSet=!1,t.isLive=e.isLive;var n=t.isLive?c.MediaConsumptionMode.LIVE:c.MediaConsumptionMode.ON_DEMAND,i="audio"==e.type?c.AvType.AUDIO:c.AvType.VIDEO,a=t.player.player._statsObject||{};a.overrideConsumptionMode&&(n=a.overrideConsumptionMode);var o=t.media=new s(i,n),i=e.identifier,n=e.versionID,e=e.serviceID;a.overrideVersionPID&&(n=a.overrideVersionPID),i?n||e||(o.setVpId(i),t.isLive?o.setServiceId(i):o.setVersionId(i)):a.playlistURL&&(i=(a.playlistURL+"").replace(/\W+/gim,"-"),o.setNonPipsContentId(i)),n&&o.setVersionId(n),e&&(o.setServiceId(e),t.playlistName||o.setPlaylist(e)),t.playlistName&&o.setPlaylist(t.playlistName),t.title&&o.setName(t.title),t.parentPID&&(t.parentPIDType==c.PIPsType.EPISODE&&o.setEpisodeId(t.parentPID),t.parentPIDType==c.PIPsType.CLIP&&o.setClipId(t.parentPID)),t.episodePID&&(o.setType(c.PIPsType.EPISODE),o.setEpisodeId(t.episodePID)),t.clipPID&&(o.setType(c.PIPsType.CLIP),o.setClipId(t.clipPID)),t.brandPID&&o.setBrand(t.brandPID),t.seriesPID&&o.setSeries(t.seriesPID),(e=t.player.player.playlist)&&e.masterbrand&&e.masterbrand.id&&o.setProducerByMasterbrand(e.masterbrand.id),a.producer&&o.setProducer(a.producer),a.wsPartnerId&&o.setWsPartnerId(a.wsPartnerId),a.castingDeviceReferrer&&o.setCastingDeviceReferrer(a.castingDeviceReferrer),e&&e.hasAds&&o.setAdsEnabled(!0),t.player._settings.embeddedOffsite&&o.setIsEmbedded(!0);try{t.echo.setMedia(o),t.hasSetMediaItem=!0}catch(e){t.hasSetMediaItem=!1}}(t,e.mediaItem);break;case"playing":t.hasPlayed=!0;break;case"playlistLoaded":t.processNewSettings();break;case"playlistLoading":t.end();break;case"SonarSeekingEvent":t.report("Seek");break;case"SonarErrorEvent":e.errorItem&&"critical"==e.errorItem.severity&&t.end();break;case"SonarEndEvent":case"SonarPauseEvent":t.report("Pause");break;case"SonarPlayEvent":case"SonarResumeEvent":t.report("Play");break;case"SonarBufferEvent":t.report("Buffer");break;case"SonarSeekEvent":t.player.paused()||t.report("Play");break;case"SonarUserActionEvent":t.action(e.actionType,e.controlId,function(e,t){t=t||{};try{var n,i,a,o,r=[];!e.media||(n=e.media.getVersionId()||e.media.getServiceId()||e.media.getVpId()||e.media.getNonPipsContentId())&&r.push("PID="+n),e.player&&(i=e.player,t.includeVolume&&r.push("VOL="+(11*i.volume()).toFixed(0)),!e.isLive&&i.currentTime()<1e5&&(!1!==t.time&&r.push("TME="+i.currentTime().toFixed(1)),"number"==typeof t.before_seek_time&&r.push("BST="+t.before_seek_time.toFixed(1))),!1!==t.playState&&(a="unknown",(o=i.player)._seeking?a="seeking":o._ended&&(a="ended"),"unknown"==a&&(o._paused?a="paused":o._playing&&(a="playing")),r.push("PST="+a)))}catch(e){}return t.metadata||(t.metadata=r.join("~").substr(0,250)),t}(t,e.labels));break;case"volumechange":t.echo.setPlayerVolume(e.muted?0:e.volume);break;case"uiinfo":t.echo.setPlayerIsSubtitled(!!e.subtitles);break;case"fullscreenEnter":t.echo.setPlayerWindowState(c.WindowState.FULL);break;case"fullscreenExit":case"picInPicStopped":t.echo.setPlayerWindowState(c.WindowState.NORMAL);break;case"picInPicStarted":t.echo.setPlayerWindowState(c.WindowState.PICTUREINPICTURE);break;case"statsConfigChanged":e.counterName&&(t.player._settings.counterName=e.counterName)}},volume:function(e){0<=e&&e<1&&this.echo.setPlayerVolume(Math.floor(100*e))},processNewSettings:function(){var e=this,t=e.player._settings,n=e.player.player._statsObject||{},i=e.player.player.playlist;e.echo.setCounterName(t.counterName),i&&i.masterbrand&&i.masterbrand.id&&e.echo.setProducerByMasterbrand(i.masterbrand.id),n.producer&&e.echo.setProducer(n.producer),e.parentPID=n.parentPID,e.parentPIDType=c.PIPsType.EPISODE,e.episodePID=n.episodePID,e.clipPID=n.clipPID,e.brandPID=n.brandPID,e.seriesPID=n.seriesPID,e.playlistName=n.playlistName,i&&i.title&&(e.title=i.title.substr(0,60)),-1!=(n.parentPIDType+"").indexOf("clip")&&(e.parentPIDType=c.PIPsType.CLIP)},currentTime:function(e){var t=Math.round(1e3*this.player.currentTime());return e?t<31536e6?0:t:this.isLive?0:t}},e}),define("mp/classes/castInterface",["mp/classes/settingsbuilder"],function(t){function e(e){this._settings=e;var t=this;window.__onGCastApiAvailable=function(e){e&&t._init()};e=document.createElement("script");e.async=!0,e.src="//www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1",document.getElementsByTagName("head")[0].appendChild(e),this.sendCastIconState=this.sendCastIconState.bind(this)}return e.prototype={_getAppId:function(){var e="5E81F6DB";return this._settings.forceCastReceiver?e=this._settings.forceCastReceiver:"sport"==this._settings.product?e="F4ABD101":"sounds"!=this._settings.product&&!t.firstProgramme(this._settings.playlistObject,!0)||(e="03977A48"),e},_isAndroidReceiverCompatible:function(){return!!this._settings.androidReceiverCompatible},_init:function(){this._castContext=cast.framework.CastContext.getInstance(),this._castContext.setOptions({receiverApplicationId:this._getAppId(),androidReceiverCompatible:this._isAndroidReceiverCompatible(),autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED}),this._castContext.addEventListener(cast.framework.CastContextEventType.CAST_STATE_CHANGED,this.sendCastIconState),this.sendCastIconState(),this._addRemotePlayerListeners(),this.initialised=!0},_addRemotePlayerListeners:function(){var i=this;this._remotePlayer=new cast.framework.RemotePlayer,this._remotePlayerController=new cast.framework.RemotePlayerController(this._remotePlayer),this._remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.IS_CONNECTED_CHANGED,function(){i._remotePlayer.isConnected?i._connected():i._disconnected()}),this._remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.CURRENT_TIME_CHANGED,function(e){i.sendToLoadedPlayer({event:"timechange",time:e.value})}),this._remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.DURATION_CHANGED,function(e){i.sendToLoadedPlayer({event:"durationchanged",duration:e.value})}),this._remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.IS_PAUSED_CHANGED,function(e){i.sendToLoadedPlayer({event:"ispausedchanged",ispaused:e.value})}),this._remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.LIVE_SEEKABLE_RANGE_CHANGED,function(){}),this._remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.IS_MEDIA_LOADED_CHANGED,function(e){i.sendToLoadedPlayer({event:"ismedialoadedchanged",ismedialoaded:e.value})}),this._remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.MEDIA_INFO_CHANGED,function(e){var t,n=i._castSession.getMediaSession();n&&(n.customData&&"subtitlesEnabled"in n.customData?i.sendToLoadedPlayer({event:"subson",on:!!n.customData.subtitlesEnabled}):(t=n.activeTrackIds||[],e=!!e.value.tracks.filter(function(e){return e.type==chrome.cast.media.TrackType.TEXT}).filter(function(e){return t.includes(e.trackId)}).length,i.sendToLoadedPlayer({event:"subson",on:e})))}),this._remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.IS_MUTED_CHANGED,function(e){i.sendToLoadedPlayer({event:"mutedchanged",muted:e.value})}),this._remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.VOLUME_LEVEL_CHANGED,function(e){i.sendToLoadedPlayer({event:"volumechanged",volume:e.value})}),this._remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.PLAYER_STATE_CHANGED,function(e){var t;switch(e.value){case chrome.cast.media.PlayerState.IDLE:t="IDLE";break;case chrome.cast.media.PlayerState.PLAYING:t="PLAYING";break;case chrome.cast.media.PlayerState.PAUSED:t="PAUSED";break;case chrome.cast.media.PlayerState.BUFFERING:t="BUFFERING"}i.sendToLoadedPlayer({event:"playerstatechanged",state:t})})},_connected:function(){var e=this;this._castSession=this._castContext.getCurrentSession(),this._requestPlayer&&(this.loadMedia(this._requestPlayer),this._requestPlayer=null),this._castSession.addEventListener(cast.framework.SessionEventType.MEDIA_SESSION,function(){e.loading||(e._loadedPlayer=null,window.embeddedMedia.sendEventToPlayers("ccInfo",{event:"notCasting",state:e.translateCastState(e._castContext.getCastState())}))})},_disconnected:function(){this._castSession=null,this._requestPlayer=null,this._loadedPlayer=null,window.embeddedMedia.sendEventToPlayers("ccInfo",{event:"disconnect"})},sendToLoadedPlayer:function(e){this._loadedPlayer&&this._loadedPlayer.call("ccInfo",e)},sendToRequestPlayer:function(e){this._requestPlayer&&this._requestPlayer.call("ccInfo",e)},isConnected:function(){return!!this._castSession},requestSession:function(){var e=this;this._castContext.requestSession().then(function(){},function(){e.sendToRequestPlayer({event:"requestfailed"})})},hasSubs:function(e){if(e&&e.tracks)for(var t=0;e.tracks.length>t;t++)if(e.tracks[t].type==chrome.cast.media.TrackType.TEXT)return!0;return!1},loadMedia:function(t){var e,n,i,a=this,o=t.mediaItem(),r=t.loadedPlaylist();this.loading=!0,this.isConnected()?(i=new chrome.cast.media.MediaInfo(o.identifier),(e=new chrome.cast.media.GenericMediaMetadata).title=r.title||"",e.subtitle=r.summary||"",r.posterImg&&((n=new chrome.cast.Image(r.posterImg.replace("{recipe}","1280x720").replace("$recipe","1280x720"))).width=1280,n.height=720,e.images=[n]),i.metadata=e,i.customData={secondary_title:r.summary||""},o.castConnectUrl&&(i.customData.connect=o.castConnectUrl),i.streamType=o.isLive?chrome.cast.media.StreamType.LIVE:chrome.cast.media.StreamType.BUFFERED,(i=new chrome.cast.media.LoadRequest(i)).currentTime=t.currentTime(),this._castSession.loadMedia(i).then(function(){a.loading=!1,a._loadedPlayer=t,window.embeddedMedia.sendEventToPlayers("ccInfo",{event:"notCasting",state:a.translateCastState(a._castContext.getCastState())},a._loadedPlayer),a._loadedPlayer.call("ccInfo",{event:"loadedMedia",duration:a._remotePlayer.duration,currentTime:a._remotePlayer.currentTime,isPaused:a._remotePlayer.isPaused,hasSubs:a.hasSubs(a._remotePlayer.mediaInfo)});var e=a._castSession.getMediaSession();e.addUpdateListener(function(){e.idleReason==chrome.cast.media.IdleReason.FINISHED&&a.sendToLoadedPlayer({event:"ended"})})},function(){a.loading=!1})):(this._requestPlayer=t,this.requestSession())},pause:function(){this._remotePlayerController.playOrPause()},play:function(){this._remotePlayerController.playOrPause()},seek:function(e){this._remotePlayer.currentTime=e,this._remotePlayerController.seek()},translateCastState:function(e){var t={};return t[cast.framework.CastState.NO_DEVICES_AVAILABLE]="no_devices",t[cast.framework.CastState.NOT_CONNECTED]="not_connected",t[cast.framework.CastState.CONNECTING]="connecting",t[cast.framework.CastState.CONNECTED]="connected",t[e]},sendCastIconState:function(){var e=this._castContext.getCastState(),t=this._castContext.getCurrentSession(),t=t&&t.getCastDevice()?t.getCastDevice().friendlyName:null;window.embeddedMedia.sendEventToPlayers("ccInfo",{event:"CASTSTATE",value:this.translateCastState(e),deviceName:t})},subtitlesOn:function(){var e;this._castSession&&(this._castSession.sendMessage("urn:x-cast:uk.co.bbc.cast","subtitlesOn"),(e=new chrome.cast.media.EditTracksInfoRequest).enableTextTracks=!0,this._castSession.getMediaSession().editTracksInfo(e,function(){},function(){}))},subtitlesOff:function(){var e;this._castSession&&(this._castSession.sendMessage("urn:x-cast:uk.co.bbc.cast","subtitlesOff"),(e=new chrome.cast.media.EditTracksInfoRequest).enableTextTracks=!1,this._castSession.getMediaSession().editTracksInfo(e,function(){},function(){}))},setVolume:function(e){this._castSession&&this._castSession.setVolume(e)},setMuted:function(e){this._castSession&&this._castSession.setMute(e)}},e}),define("mp/classes/player",["jquery-1.9","mp/classes/settings","mp/classes/decisionengine","mp/classes/errors/error","mp/modules/device","mp/classes/rdotreporting","mp/classes/parentalguidance","mp/classes/players/player","mp/classes/sonarreporter","mp/modules/helpers","mp/modules/html5","mp/classes/castInterface"],function(c,a,o,s,r,l,d,u,p,m,e,h){function g(e,t){if("string"==typeof e){if(e.match(P))return t?e:e.replace("px","");if(e.match(w))return e}return null==e||isNaN(Number(e))?void 0:Number(e)+(t?"px":"")}function f(e,t,n){var i,a=e._settings,o=a.container,r="width"===(t=t&&"width"===t?"width":"height")?"height":"width",a=g(e["_"+r]||a.plugins.player[r]);return(i=void 0!==a?a.match(w)?a:String(isNaN(a)?o[t]():Math.ceil("height"==r?a*k:a/k)):i)+(n?"px":"")}function y(e,t,n,i,a){var o,r,s,l,d;return n=n&&"width"===n?"width":"height",void 0!==t&&(o="width"===n?"height":"width",s=(r=e._settings).container,d=(l=t+="").match(P),void 0!==(t=g(l))?(e["_"+n]=l,r.plugins.player[n]=t):void 0!==(t=f(e,n))&&(e["_"+n]="0",r.plugins.player[n]=t),void 0!==t&&((i=i||null!==l.match(w))||s.css(n,t+"px"),a||void 0!==e["_"+o]||y(e,f(e,o,d),o,i,!0),b(e))),e["_"+n]}function b(e){var t,n=e._settings,i=n.container,a=n.posterUrl(i);!a||e.player&&!e.player.includePoster?i.css("background-image",""):(t="contain",(n.ui.displayCover||Math.abs(16/9-i.width()/i.height())<.2)&&(t="cover"),i.css({"background-image":"url("+a+")","background-repeat":"no-repeat","background-position":"center center","background-size":t,"background-color":"black",overflow:"hidden"})),"html"==e.type&&i.css("overflow","")}function t(e,t){var n=m.addEmbeddedMedia();n.version=this.bumpVersion="3.48.1",(v=r.get()).os.phantomjs&&(t.enableRdotReporting=!1),this.bumpRevision="-1",this.player=new u,this.player.fake=!0,this.supportsMarkers=!1,this.capability={markers:!1,queuedPlaylist:!1,inPage:!1,chromecast:!1,overlay:!1},t.container=e,t.domid=e.attr("id");var i=this._settings=new a(t);i.enableSonarReporting&&!i.noTracking&&(this._sonarReporter=new p,this._sonarReporter.init(i.html5Debug)),n.parentalGuidance||(n.parentalGuidance=new d(this._sonarReporter,i)),i.guidance=n.parentalGuidance.guidance;t=n.parentalGuidance;return t.closedCallbacks.push(function(){var e=c.Event("guidanceClosed");e.guidance=i.guidance,i.trigger(e)}),t.openedCallbacks.push(function(){var e=c.Event("guidanceShown");i.trigger(e)}),t.updateCallbacks.push(function(e){var t=c.Event("guidanceUpdated");e.noPin=i.guidanceCleared,i.guidance=e,t.guidance=i.guidance,i.trigger(t)}),!n.chromeCast.castInterface&&v.supportChromecast&&this._settings.allowCasting&&(n.chromeCast.castInterface=new h(this._settings)),this._decisionEngine=new o(i),this}var v,w=new RegExp("^([0-9\\.]+)%$","gi"),P=new RegExp("^([0-9\\.]+)px$","gi"),k=16/9;return t.prototype={showGuidance:function(e,t,n,i){n={lockClicked:n};n.title=e||"",n.guidance=t||"",n.intent=i||"play";t=window.embeddedMedia.parentalGuidance,i=this._settings;i.guidanceCleared||t.show(n,i.ui.colour,i.locale(),!0)},lockGuidance:function(){!0===this._settings.guidance.hasGuidancePIN?window.embeddedMedia.parentalGuidance.setLocked(!0,!0):this.unlockGuidance()},unlockGuidance:function(){this.showGuidance("","",!0)},name:function(){return this._decisionEngine.name||"no-player"},decide:function(){return this.player&&!this.player.fake&&("smp-phantom"!=this.name()||this._settings.phantomPlayer)||(this.player=this._decisionEngine.decide()),this.name()},settings:function(){return this._settings.set.apply(this._settings,c.makeArray(arguments))},distributedConfig:function(e,t){m.isObjectEmpty(e)||(this._settings.set(e="ui"==t?{ui:e}:e),"ui"==t?this.player.updateUiConfig(e.ui):this.player.updateConfig(e))},deviceData:function(){return{device:v,html5:e}},poster:function(e){"string"==typeof e&&(this._settings._poster=e,b(this))},play:function(e){this.player.play(!1!==e)},autoplay:function(e){return"boolean"==typeof e&&(this._settings.autoplay=e),this._settings.autoplay},pause:function(){this.player.pause()},suspend:function(){this.player.suspend()},next:function(){this.player.next()},previous:function(){this.player.next()},currentTime:function(e){return this.player.currentTime(e)},showSubtitles:function(e){return this.player.showSubtitles(e)},duration:function(){return this.player.duration()},muted:function(e){return this.player.muted(e)},queuePlaylist:function(e,t){this.player.queuePlaylist(e,t)},setPreviousPlaylist:function(e,t){this.player.setPreviousPlaylist(e,t)},loadPlaylist:function(e,t,n,i){var a=this,o=a.player,r=a._settings;r.autoplay=!1,r.playlist="",r._poster=null,r.playlistObject=null,r.overrideHoldingImage=null,r.overrideCtaDuration=null,r.webcastData={},r.statsObject.parentPID=void 0,r.statsObject.parentPIDType=void 0,r.statsObject.episodePID=void 0,r.statsObject.clipPID=void 0,r.statsObject.brandPID=void 0,r.statsObject.seriesPID=void 0,r.statsObject.playlistLabels=void 0,r.statsObject.playlistName=void 0,e&&("string"!=typeof e?r.playlistObject=e:r.playlist=e),r.statsObject.playlistURL||(r.statsObject.playlistURL=r.playlist||void 0),r.startTime=0,"object"==typeof t?a.settings(t):(a.autoplay(t),r.overrideHoldingImage=n||r.overrideHoldingImage),o._settings=r,o._statsObject=c.extend(!0,{},r.statsObject),o.includePoster&&(r.autoplay?setTimeout(function(){b(a)},100):b(a)),i&&(i.startTime&&(o._lastSignificant=r.startTime=i.startTime),"boolean"==typeof i.promptGuidanceWhenAutoplay&&(r.promptGuidanceWhenAutoplay=i.promptGuidanceWhenAutoplay)),r.phantomPlayer||"smp-phantom"!=o._name?o.loadPlaylist(a):this.load()},kind:function(){return this.player.kind()},captureIntent:function(e){return this.player.captureIntent(e)},stop:function(){return this._settings.autoplay=!1,this.player.stop()},loadPlugin:function(e,t){this.player.loadPlugin?this.player.loadPlugin(e,t):e&&(e.data=t,this._settings.plugins.toLoad.push(e))},updateUiConfig:function(e){var t=this._settings,n=t.locale();c.extend(!0,t.ui,e),n!=t.locale()&&window.embeddedMedia.language.load(t.locale()),this.player.updateUiConfig(e)},updateQuality:function(e){this._settings.set(e),this.player.updateQuality(e)},setData:function(e){this.player.setData(e)},setPoster:function(e,t){this.player.setPoster(e,t)},dispatchEvent:function(e,t){this.player.dispatchEvent(e,t)},pauseAt:function(e){this.player.pauseAt(e)},webcastData:function(e){this._settings.webcastData=e,this.player.webcastData(e)},onAdProcessed:function(e){this.player.onAdProcessed(e)},volume:function(e){return this.player.volume(e)},paused:function(){return this.player.paused()},ended:function(){return this.player.ended()},seeking:function(){return this.player.seeking()},mediaItem:function(){return this.player.mediaItem()},playlist:function(){return this.player.loadedPlaylist()},width:function(e){return y(this,e,"width")},height:function(e){return y(this,e,"height")},bind:function(){var e=this._settings.container;return e.bind.apply(e,c.makeArray(arguments)),this},unbind:function(){var e=this._settings.container;return e.unbind.apply(e,c.makeArray(arguments)),this},_loadOptions:function(e){var t,n,i,a,o=this,r=o._decisionEngine._settings=o._settings;return r.validate(),r.statsObject&&r.statsObject.parentPID&&-1!==(r.optinPids+"").indexOf(r.statsObject.parentPID+"")&&(r.smpj2OptIn=!0),o.player&&o.player.immediate&&(e=!0),o.decide(),o._decisionEngine.name?(t=function(e,t){window.embeddedMedia.addPlayer(r.domid,e),(o.player=e).showErrorDialog=o.showErrorDialog,e.includePoster&&(e.setPoster=function(e){o.poster(e)},b(o)),r.statsObject.playlistURL||(r.statsObject.playlistURL=r.playlist||void 0),e._statsObject=c.extend(!0,{},r.statsObject),o._sonarReporter&&(o._sonarReporter.newPlayer(o,e.requireSonarJS),e.sonar=o._sonarReporter),t&&(c.extend(o.capability,t),o.supportsMarkers=o.capability.markers),e.reloadScope=o},"html"==o.player.type&&(n=window.innerHeight,isNaN(n)&&(n=1e3),r.container[0]&&r.container[0].getClientRects&&((!(i=r.container[0].getClientRects())[0]||n>i[0].y)&&(e=!0))),window.embeddedMedia.playerInits++,o.create=function(){o.addInitialisationListener(o),o.player.embed(r,t),r.responsive||r.superResponsive||(r.container.css("width",g(r.plugins.player.width,!0)),r.container.css("height",g(r.plugins.player.height,!0)))},e||o.player.immediate||0===window.embeddedMedia.players.length||window.embeddedMedia.players[0].ready?o.create():(a=500*(window.embeddedMedia.playerInits+2),setTimeout(function(){o.create()},a))):(e=c.Event("error"),b(o),a=6003,r.dashPlaybackOnly&&!r.threeSixty?a=6012:!v.supportedFlash||r.showUnsupportedMessage||r.threeSixty||(a=6010),e.errorData=new s(a,r),r.ui.hideDefaultErrors||this.showErrorDialog(e.errorData),o.player=new u,o.player.fake=!0,r.trigger(e),l.error(a,r)),this},load:function(e){var t=this;return"string"==typeof e?t._settings.playlist=e:"object"==typeof e&&t._settings.set(e),window.embeddedMedia.language.load(t._settings.locale(),function(){t._loadOptions()}),t},reset:function(){return this},addInitialisationListener:function(t){var n=this._settings,i=n.container;clearTimeout(n.initialisationListenerTimeout),n.initialisationListenerTimeout=setTimeout(function(){l.error(6004,n,t.player._name);var e=c.Event("error");e.errorData=new s(6004,n),i&&(this.player=new u,this.player.fake=!0,i.trigger(e))},1e4),i.bind("initialised",function(){clearTimeout(n.initialisationListenerTimeout)})},showErrorDialog:function(e){var t=this._settings,n=t.container,i=t.ui.miniMode&&t.ui.miniMode.enabled||!1;n.empty();var a=c("<div />").css({width:"100%",height:"100%",background:"rgba(51,51,51,0.85)",position:"absolute"}),o=document.createElement("div"),r=o.style;r.position="absolute",i?(r.width="150px",r.height="80px",r.fontSize="16px"):(r.width="440px",r.height="160px",r.fontSize="18px",v.os.winphone?r.top=r.left=r.marginLeft=r.marginTop=0:(r.top=r.left="50%",r.marginLeft="-220px",r.marginTop="-80px")),r.verticalAlign="middle",r.textAlign="center",r.color="white",r.fontFamily="arial, helvetica, sans-serif";var s=document.createElement("div");s.style.backgroundImage="url(//emp.bbci.co.uk/emp/assets/2.0.27/alert.png)",s.style.backgroundRepeat="no-repeat",s.style.backgroundPosition="50% 0",s.style.height="22px",s.style.backgroundSize="22px";var l=document.createElement("div"),d=l.style;d.position="absolute",d.display="block",i?d.top=d.left=d.right="8px":(d.top="38px",d.left=d.right="20px"),l.innerHTML=e.description(),i||6010==e.code()&&((e=(d=document.createElement("div")).style).position="absolute",e.bottom="20px",e.right=e.left="10px",d.innerHTML='<a href="https://www.bbc.co.uk/iplayer/help/questions/computer-issues/flash" target="_blank" style="color:white;text-decoration:underline;background-color : transparent;">'+window.embeddedMedia.language.t("deprecationMessageLongLink",t.locale())+"</a>",o.appendChild(d)),a[0].appendChild(o),i||o.appendChild(s),n.width()<440&&(r.width="100%",r.fontSize="14px",i||(r.left="220px")),o.appendChild(l),n.append((n={position:"relative","z-index":"1",height:"100%",width:"100%","padding-bottom":0},(t=t).superResponsive&&(n["padding-bottom"]="56.25%"),t.responsive||t.superResponsive||(t.container.css("width",g(t.plugins.player.width,!0)),t.container.css("height",g(t.plugins.player.height,!0))),c("<div />").css(n).append(a)))}},t}),define("bump-3",["jquery-1.9","mp/classes/player","mp/modules/helpers"],function(a,o,e){var t,r={},e=e.addEmbeddedMedia();return"function"!=typeof a.fn.player&&(t={getPlayer:function(){var e=a(a(this).get(0)).attr("id");return r[e]},player:function(e){var t=a(a(this).get(0)),n=t.attr("id");if(void 0===r[n]||r[n].settings().container[0]!=t[0]){if(!n){for(var i=0;n="bbcMediaPlayer"+i++,document.getElementById(n););t.attr("id",n)}if(!e)throw"No player settings. If you're trying to get a reference, it's probably not created yet.";r[n]=new o(t,e)}else r[n].settings(e);return r[n]}},a.fn.extend(t)),"function"!=typeof a.players&&(t={players:function(){return r}},a.extend(t)),e.api||(e.api={players:function(){return r}}),a});
