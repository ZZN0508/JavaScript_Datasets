!function(o){"use strict";function a(t,i){this.init(t,i)}a.prototype={constructor:a,init:function(t,i){this.options=i,this.$element=o(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",o.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote);t="function"==typeof this.options.manager?this.options.manager.call(this):this.options.manager;(t=t.appendModal?t:o(t).modalmanager().data("modalmanager")).appendModal(this)},toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=o.Event("show");this.isShown||(this.$element.trigger(t),t.isDefaultPrevented()||(this.escape(),this.tab(),this.options.loading&&this.loading()))},hide:function(t){if(t&&t.preventDefault(),t=o.Event("hide"),this.$element.trigger(t),!this.isShown||t.isDefaultPrevented())return this.isShown=!1;this.isShown=!1,this.escape(),this.tab(),this.isLoading&&this.loading(),o(document).off("focusin.modal"),this.$element.removeClass("in").removeClass("animated").removeClass(this.options.attentionAnimation).removeClass("modal-overflow").attr("aria-hidden",!0),o.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},layout:function(){var t,i=this.options.height?"height":"max-height",e=this.options.height||this.options.maxHeight;this.options.width?(this.$element.css("width",this.options.width),(t=this).$element.css("margin-left",function(){return/%/gi.test(t.options.width)?-parseInt(t.options.width)/2+"%":-o(this).width()/2+"px"})):(this.$element.css("width",""),this.$element.css("margin-left","")),this.$element.find(".modal-body").css("overflow","").css(i,""),e&&this.$element.find(".modal-body").css("overflow","auto").css(i,e),o(window).height()-10<this.$element.height()||this.options.modalOverflow?this.$element.css("margin-top",0).addClass("modal-overflow"):this.$element.css("margin-top",0-this.$element.height()/2).removeClass("modal-overflow")},tab:function(){var n=this;this.isShown&&this.options.consumeTab?this.$element.on("keydown.tabindex.modal","[data-tabindex]",function(t){var i,e;t.keyCode&&9==t.keyCode&&(i=o(this),e=o(this),n.$element.find("[data-tabindex]:enabled:not([readonly])").each(function(t){i=t.shiftKey?i.data("tabindex")>o(this).data("tabindex")?o(this):e=o(this):i.data("tabindex")<o(this).data("tabindex")?o(this):e=o(this)}),(i[0]!==o(this)[0]?i:e).focus(),t.preventDefault())}):this.isShown||this.$element.off("keydown.tabindex.modal")},escape:function(){var i=this;this.isShown&&this.options.keyboard?(this.$element.attr("tabindex")||this.$element.attr("tabindex",-1),this.$element.on("keyup.dismiss.modal",function(t){27==t.which&&i.hide()})):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,i=setTimeout(function(){t.$element.off(o.support.transition.end),t.hideModal()},500);this.$element.one(o.support.transition.end,function(){clearTimeout(i),t.hideModal()})},hideModal:function(){var t=this.options.height?"height":"max-height";(this.options.height||this.options.maxHeight)&&this.$element.find(".modal-body").css("overflow","").css(t,""),this.$element.hide().trigger("hidden")},removeLoading:function(){this.$loading.remove(),this.$loading=null,this.isLoading=!1},loading:function(t){t=t||function(){};var i,e,n=this.$element.hasClass("fade")?"fade":"";this.isLoading?this.isLoading&&this.$loading?(this.$loading.removeClass("in"),i=this,o.support.transition&&this.$element.hasClass("fade")?this.$loading.one(o.support.transition.end,function(){i.removeLoading()}):i.removeLoading()):t&&t(this.isLoading):(e=o.support.transition&&n,this.$loading=o('<div class="loading-mask '+n+'">').append(this.options.spinner).appendTo(this.$element),e&&this.$loading[0].offsetWidth,this.$loading.addClass("in"),this.isLoading=!0,e?this.$loading.one(o.support.transition.end,t):t())},focus:function(){var t=this.$element.find(this.options.focusOn);(t=t.length?t:this.$element).focus()},attention:function(){var t;this.options.attentionAnimation&&(this.$element.removeClass("animated").removeClass(this.options.attentionAnimation),t=this,setTimeout(function(){t.$element.addClass("animated").addClass(t.options.attentionAnimation)},0)),this.focus()},destroy:function(){var t=o.Event("destroy");this.$element.trigger(t),t.isDefaultPrevented()||this.teardown()},teardown:function(){if(!this.$parent.length)return this.$element.remove(),void(this.$element=null);this.$parent!==this.$element.parent()&&this.$element.appendTo(this.$parent),this.$element.off(".modal"),this.$element.removeData("modal"),this.$element.removeClass("in").attr("aria-hidden",!0)}},o.fn.modal=function(n,s){return this.each(function(){var t=o(this),i=t.data("modal"),e=o.extend({},o.fn.modal.defaults,t.data(),"object"==typeof n&&n);i||t.data("modal",i=new a(this,e)),"string"==typeof n?i[n].apply(i,[].concat(s)):e.show&&i.show()})},o.fn.modal.defaults={keyboard:!0,backdrop:!0,loading:!1,show:!0,width:null,height:null,maxHeight:null,modalOverflow:!1,consumeTab:!0,focusOn:null,replace:!1,resize:!1,attentionAnimation:"shake",manager:"body",spinner:'<div class="loading-spinner" style="width: 200px; margin-left: -100px;"><div class="progress progress-striped active"><div class="bar" style="width: 100%;"></div></div></div>'},o.fn.modal.Constructor=a,o(function(){o(document).off("click.modal").on("click.modal.data-api",'[data-toggle="modal"]',function(t){var i=o(this),e=i.attr("href"),n=o(i.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),e=n.data("modal")?"toggle":o.extend({remote:!/#/.test(e)&&e},n.data(),i.data());t.preventDefault(),n.modal(e).one("hide",function(){i.focus()})})})}(window.jQuery);
