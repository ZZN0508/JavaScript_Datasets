_fsDefine(["fs","exports"],function(l,e){var r=Object.hasOwnProperty,i=Object.setPrototypeOf,d=(d=("undefined"!=typeof Reflect&&Reflect).apply)||function(e,t,n){return e.apply(t,n)},t=Object.freeze||function(e){return e};function o(e,t){i&&i(e,null);for(var n=t.length;n--;){var r,o=t[n];"string"!=typeof o||(r=o.toLowerCase())!==o&&(Object.isFrozen(t)||(t[n]=r),o=r),e[o]=!0}return e}function n(e){var t,n={};for(t in e)d(r,e,[t])&&(n[t]=e[t]);return n}var a=t(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),c=t(["#text"]),u=t(["accept","action","align","alt","autocomplete","background","bgcolor","border","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","coords","crossorigin","datetime","default","dir","disabled","download","enctype","face","for","headers","height","hidden","high","href","hreflang","id","integrity","ismap","label","lang","list","loop","low","max","maxlength","media","method","min","multiple","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","type","usemap","valign","value","width","xmlns"]),s=t(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),f=Object.seal||function(e){return e},p=f(/^data-[\-\w.\u00B7-\uFFFF]/),m=f(/^aria-[\-\w]+$/),h=f(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),T=f(/^(?:\w+script|data):/i),g=f(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g),y=Array.prototype.slice,b=window.document,A=!1,v=!1,w=window.document,E=window,L=E.DocumentFragment,_=E.HTMLTemplateElement,O=E.Node,D=E.NodeFilter,f=E.NamedNodeMap,N=void 0===f?window.NamedNodeMap||window.MozNamedAttrMap:f,R=E.Text,M=E.Comment,S=E.DOMParser;"function"!=typeof _||(H=w.createElement("template")).content&&H.content.ownerDocument&&(w=H.content.ownerDocument);function x(e){var t,n,r;if(te?e="<remove></remove>"+e:(n=(r=e.match(/^[\s]+/))&&r[0])&&(e=e.slice(n.length)),A)try{t=(new S).parseFromString(e,"text/html")}catch(e){}return v&&o($,["title"]),t&&t.documentElement||((r=(t=F.createHTMLDocument("")).body).parentNode.removeChild(r.parentNode.firstElementChild),r.outerHTML=e),n&&t.body.insertBefore(w.createTextNode(n),t.body.childNodes[0]||null),k.call(t,ee?"html":"body")[0]}var C,H=w,F=H.implementation,I=H.createNodeIterator,k=H.getElementsByTagName,P=H.createDocumentFragment,U=b.importNode,j=F&&void 0!==F.createHTMLDocument&&9!==w.documentMode,W=p,z=m,B=T,G=g,q=h,K=null,m=o({},[].concat(a,c)),Y=null,T=o({},[].concat(u,s)),$=null,X=null,J=!0,Q=!0,Z=!1,V=!1,ee=!1,te=!1,ne=!1,re=!1,oe=!1,ie=!0,ae=!0,ce=!1,le=o({},["audio","head","math","script","style","template","svg","video"]),de=o({},["audio","video","img","source","image"]),ue=null,h=o({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]),s=null,se=w.createElement("form"),fe=function(t){try{t.parentNode.removeChild(t)}catch(e){t.outerHTML=""}},pe=function(e,t){t.removeAttribute(e)};j&&(function(){try{x('<svg><p><textarea><img src="</textarea><img src=x onerror=1//">').querySelector("svg img")&&(A=!0)}catch(e){}}(),function(){try{x("<x/><title>&lt;/title&gt;&lt;img&gt;").querySelector("title").innerHTML.match(/<\/title/)&&(v=!0)}catch(e){}}(),s&&s===C||(K="ALLOWED_TAGS"in(C=!C||"object"!=typeof C?{}:C)?o({},C.ALLOWED_TAGS):m,Y="ALLOWED_ATTR"in C?o({},C.ALLOWED_ATTR):T,ue="ADD_URI_SAFE_ATTR"in C?o({},C.ADD_URI_SAFE_ATTR):h,$="FORBID_TAGS"in C?o({},C.FORBID_TAGS):{},X="FORBID_ATTR"in C?o({},C.FORBID_ATTR):{},g="USE_PROFILES"in C&&C.USE_PROFILES,J=!1!==C.ALLOW_ARIA_ATTR,Q=!1!==C.ALLOW_DATA_ATTR,Z=C.ALLOW_UNKNOWN_PROTOCOLS||!1,V=C.SAFE_FOR_JQUERY||!1,ee=C.WHOLE_DOCUMENT||!1,ne=C.RETURN_DOM||!1,re=C.RETURN_DOM_FRAGMENT||!1,oe=C.RETURN_DOM_IMPORT||!1,te=C.FORCE_BODY||!1,ie=!1!==C.SANITIZE_DOM,ae=!1!==C.KEEP_CONTENT,ce=C.IN_PLACE||!1,q=C.ALLOWED_URI_REGEXP||q,re&&(ne=!0),g&&(K=o({},[].concat(c)),Y=[],!0===g.html&&(o(K,a),o(Y,u))),C.ADD_TAGS&&o(K=K===m?n(K):K,C.ADD_TAGS),C.ADD_ATTR&&o(Y=Y===T?n(Y):Y,C.ADD_ATTR),C.ADD_URI_SAFE_ATTR&&o(ue,C.ADD_URI_SAFE_ATTR),ae&&(K["#text"]=!0),ee&&o(K,["html","head","body"]),K.table&&o(K,["tbody"]),t&&t(C),s=C));function me(e){return"object"==typeof O?e instanceof O:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName}function he(e){for(var t,n=ge(e);t=n.nextNode();)ye(t)||(t.content instanceof L&&he(t.content),Ae(t))}function Te(e){var t,n,r,o,i;if("string"!=typeof(e=e||"\x3c!--\x3e")&&!me(e)){if("function"!=typeof e.toString)throw new TypeError("toString is not a function");if("string"!=typeof(e=e.toString()))throw new TypeError("dirty is not a string, aborting")}if(!j){if("object"==typeof window.toStaticHTML||"function"==typeof window.toStaticHTML){if("string"==typeof e)return window.toStaticHTML(e);if(me(e))return window.toStaticHTML(e.outerHTML)}return e}if(!ce)if(e instanceof O)1===(n=(t=x("\x3c!--\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===n.nodeName||"HTML"===n.nodeName?t=n:t.appendChild(n);else{if(!ne&&!ee&&-1===e.indexOf("<"))return e;if(!(t=x(e)))return ne?null:""}t&&te&&fe(t.firstChild);for(var a=ge(ce?e:t);r=a.nextNode();)3===r.nodeType&&r===o||ye(r)||(r.content instanceof L&&he(r.content),Ae(r),o=r);if(o=null,ce)return e;if(ne){if(re)for(i=P.call(t.ownerDocument);t.firstChild;)i.appendChild(t.firstChild);else i=t;return i=oe?U.call(b,i,!0):i}return ee?t.outerHTML:t.innerHTML}var ge=function(e){return I.call(e.ownerDocument||e,e,D.SHOW_ELEMENT|D.SHOW_COMMENT|D.SHOW_TEXT,function(){return D.FILTER_ACCEPT},!1)},ye=function(e){if(!(e instanceof R||e instanceof M||"string"==typeof e.nodeName&&"string"==typeof e.textContent&&"function"==typeof e.removeChild&&e.attributes instanceof N&&"function"==typeof e.removeAttribute&&"function"==typeof e.setAttribute))return fe(e),!0;var t=e.nodeName.toLowerCase();if(K[t]&&!$[t])return"noscript"===t&&e.innerHTML.match(/<\/noscript/i)||"noembed"===t&&e.innerHTML.match(/<\/noembed/i)?(fe(e),!0):(!V||e.firstElementChild||e.content&&e.content.firstElementChild||!/</g.test(e.textContent)||(e.innerHTML?e.innerHTML=e.innerHTML.replace(/</g,"&lt;"):e.innerHTML=e.textContent.replace(/</g,"&lt;")),!1);if(ae&&!le[t]&&"function"==typeof e.insertAdjacentHTML)try{var n=e.innerHTML;e.insertAdjacentHTML("AfterEnd",n)}catch(e){}return fe(e),!0},be=function(e,t,n){if(ie&&("id"===t||"name"===t)&&(n in w||n in se))return!1;if(!(Q&&W.test(t)||J&&z.test(t))){if(!Y[t]||X[t])return!1;if(!ue[t]&&!q.test(n.replace(G,""))&&("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==n.indexOf("data:")||!de[e])&&(!Z||B.test(n.replace(G,"")))&&n)return!1}return!0},Ae=function(e){var t,n,r=e.attributes;if(r)for(n=r.length;n--;){var o=t=r[n],i=o.name,a=o.namespaceURI,o=t.value.trim();if("name"===(t=i.toLowerCase())&&"IMG"===e.nodeName&&r.id)c=r.id,r=d(y,r,[]),pe("id",e),pe(i,e),r.indexOf(c)>n&&e.setAttribute("id",c.value);else{if("INPUT"===e.nodeName&&"type"===t&&"file"===o&&(Y[t]||!X[t]))continue;"id"===i&&e.setAttribute(i,""),pe(i,e)}var c=e.nodeName.toLowerCase();if(be(c,t,o))try{a?e.setAttributeNS(a,i,o):e.setAttribute(i,o)}catch(e){}}};return e.checkIntegrity=function(i){var e=l.globalConfig.integrityHashLocation;if(!e)return l.Promise.resolve(!0);var t=window.crypto||window.msCrypto||{},a=t.subtle||t.webkitSubtle;if(!a)return"https:"!==document.location.protocol&&t&&console.warn("Foresee WebSDK skipping integrity code check because page not loaded over HTTPS."),l.Promise.resolve(!0);var e=l.getNested(window,e),r=e.obj[e.key];l.isArray(r)||(r=[r]);var n=new Set;r.forEach(function(e){n.add(e.split("-")[0])});var c=[];return n.forEach(function(e){var t,o,n,r;c.push((t=a,n=i,e=(o=e).toUpperCase().replace(/(\d)/,"-$1"),n=function(e){if("undefined"!=typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);for(var t,n=e.length,r=0,o=new Uint8Array(3*n),i=0,a=0;a!==n;){if(i=e.charCodeAt(a),a+=1,55296<=i&&i<=56319){if(a===n){o[r++]=239,o[r++]=191,o[r++]=189;break}if(!(56320<=(t=e.charCodeAt(a))&&t<=57343)){o[r++]=239,o[r++]=191,o[r++]=189;continue}if(a+=1,65535<(i=1024*(i-55296)+t-56320+65536)){o[r++]=240|i>>>18,o[r++]=128|i>>>12&63,o[r++]=128|i>>>6&63,o[r++]=128|63&i;continue}}i<=127?o[r++]=0|i:(i<=2047?o[r++]=192|i>>>6:(o[r++]=224|i>>>12,o[r++]=128|i>>>6&63),o[r++]=128|63&i)}return o.subarray(0,r)}(n),(n=t.digest(e,n)).then||(r=n,n=new l.Promise(function(e,t){r.oncomplete=function(){return e(r.result)},r.onerror=function(){return t(new Error("hash failed!"))}})),n.then(function(e){for(var t=new Uint8Array(e),n="",r=0;r<t.length;r++)n+=String.fromCharCode(t[r]);return n=btoa(n),o+"-"+n})))}),l.Promise.all(c).then(function(e){for(var t=0;t<r.length;t++)for(var n=0;n<e.length;n++)if(e[n]===r[t])return!0;return!1})},e.sanitize=Te,e.sanitizeObject=function(e){var a=new Set;return function e(t){if(l.isString(t))return Te(t);if(l.isArray(t)){for(var n=[],r=0;r<t.length;r++)n.push(e(t[r]));return n}if(l.isObject(t)){if(a.has(t))return{};a.add(t);var o,i={};for(o in t)l.hasProp(t,o)&&(i[o]=e(t[o]));return a.delete(t),i}return t}(e)},e});
