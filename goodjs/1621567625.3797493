!function(){"use strict";avm.define("vue-action-boxes",function(){function a(a,j,k){var l,m=k.options.option_1.pricelist,n=c(m),o=b(k.options),p=0,q=o[0];"undefined"!=typeof k.default_option?(k.default_option=parseInt(k.default_option),p=k.default_option-1):"undefined"!=typeof k.platform_detect&&(k.platform_detect="true"===k.platform_detect,l=e(k.options),p=l.indexOf(i)>-1?l.indexOf(i):l.indexOf(k.default_platform)),k.boxCount=n,k.datasetsBoxes=o,k.datasetBoxes=q,k.showRegularBoxes=!1,k.contentForBox="",k.selectedIndex=p,k.selectedValue="",k.hide_toggler="true"===k.hide_toggler,k.horizontal_toggler="true"===k.horizontal_toggler,k.toggler_placeholder="true"===k.toggler_placeholder,k.hide_desktop_title="true"===k.hide_desktop_title,k.hide_mobile_title="true"===k.hide_mobile_title,k.hide_desktop_period="true"===k.hide_desktop_period;try{var r=JSON.parse(sessionStorage.selectedIndex)[location.pathname]["vue-action-box-"+a];k.selectedIndex=r>=0?r:p}catch(s){}return window["vue-action-box-"+a]=new Vue({el:j,delimiters:["<%","%>"],data:function(){return k},methods:{changeData:function(a){var b=this.options["option_"+(a+1)],c="undefined"==typeof b.content;this.datasetBoxes=this.datasetsBoxes[a],this.showRegularBoxes=!!c,this.contentForBox=c?"":d(b.content),this.selectedIndex=a,this.selectedValue=b.toggler_text;var e=this;setTimeout(function(){f(e)},10)}},mounted:function(){if(this.changeData(this.selectedIndex),this.horizontal_toggler)if(this.options.option_2){this.horizontal_toggler=g(a);var b=this;h(window).on("resize",function(){b.horizontal_toggler=g(a)})}else this.horizontal_toggler=!0},watch:{selectedIndex:function(b){var c={};c[location.pathname]={};try{c=JSON.parse(sessionStorage.selectedIndex)}catch(s){}c[location.pathname]||(c[location.pathname]={}),c[location.pathname]["vue-action-box-"+a]=b,sessionStorage.selectedIndex=JSON.stringify(c)}}}),window["vue-action-box-"+a]}function b(a){var b=[];for(var c in a)"undefined"!=typeof a[c].pricelist?b.push(a[c].pricelist):b.push(null);return b}function c(a){var b,c=0;for(b in a)a.hasOwnProperty(b)&&c++;return c}function d(a){return a.replace(new RegExp("&lt;","gm"),"<").replace(new RegExp("&gt;","gm"),">")}function e(a){var b=1,c=[];for(var d in a)c.push(a["option_"+b].platform),b++;return c}function f(a){var b=h(a.$el),c=b.find(".js-toggle-to-option");c.length>0&&c.on("click",function(b){var c=h(this).data("option")-1;b.preventDefault(),a.changeData(c)})}function g(a){var b,c=h(".js-vue-action-box").eq(a),d=c.find(".js-actionbox-container"),e=d.width(),f=c.find(".js-horizontal-toggler"),g=f.find(".js-toggler"),i=!1,j=0,k=[];if(g.length<4)for(var l=0;l<g.length;l++){if(j=g.eq(l).outerWidth(),k.push(j),j>180){i=!1;break}i=!0}return i&&(b=Math.max.apply(Math,k),b*g.length<=e?g.outerWidth(b):i=!1),i}Vue.config.devtools=!0,Vue.config.errorHandler=function(a,b,c){console.log("errorHandler"),console.log(1,a),console.log(2,b),console.log(3,c)};var h=avm.require("jquery"),i=avm.require("avast.detect")().os.name.toLowerCase(),j=h(".js-vue-action-box"),k=function(){return h('link[href*=".css"]').attr("href").split("c/")[0]}();return 0!==j.length&&(Vue.component("toggler",{template:"#toggler",delimiters:["<%","%>"],props:["options","selected_index","selected_value","hide_toggler","horizontal_toggler","toggler_placeholder"],computed:{singleOption:function(){return!this.options.option_2}},methods:{handleClick:function(a,b){this.$emit("change_data",b)},getTogglerCssClasses:function(a){var b=!1,c=!1;return(a?Number(a.substring(7))-1:null)===this.selected_index&&(b=!0),this.options.option_2||(b=!1,c=!0),{active:b,disabled:c}}}}),Vue.component("box",{delimiters:["<%","%>"],props:["set","iterator","options","selected_index","hide_desktop_title","hide_mobile_title"],template:"#box",methods:{htmlDecode:function(a){var b=document.createElement("div");return b.innerHTML=a,0===b.childNodes.length?"":b.childNodes[0].innerText},renderLabel:function(a){var b=this.set[Object.keys(this.set)[this.iterator]].discountFormatted,c=this.set[Object.keys(this.set)[this.iterator]].discountPercent;return a.replace("##discount_price##",b).replace("##discount_percentage##",c)},setCampaignMarkerCookie:function(){var a=this.$el.querySelectorAll('[data-role="cart-link"]');return a.length&&this.campaignMarker.setCampaignMarkerCookie(a),avastGlobals.web.abtest!==undefined&&a.forEach(function(a){var b=a.getAttribute("data-campaign-marker").split("~"),c=a.getAttribute("href").split("~"),d=avastGlobals.web.abtest.ticketNumber,e=avastGlobals.web.abtest.testVariant;b[3]=d,b[4]=e,c[3]=d,c[4]=e,a.setAttribute("data-campaign-marker",b.join("~")),a.setAttribute("href",c.join("~"))}),a}},mounted:function(){this.campaignMarker=avm.require("avast.web.campaignMarkerCookie")(),this.setCampaignMarkerCookie()},updated:function(){this.setCampaignMarkerCookie()},computed:{compileOldPrice:function(){var a,b=this.set[Object.keys(this.set)[this.iterator]],c=b.priceIntegerPart,d=b.decimalSeparator,e=b.priceDecimalPart,f=b.currencySymbol,g=b.priceFormat;return a=c+(""!=e?d+e:""),g.replace("#c",f).replace("#p",a)}}}),Vue.component("box-content",{delimiters:["<%","%>"],props:["content"],template:"#box-content",computed:{updateImageLinks:function(){return this.content.replace(/'i\//gm,"'"+k+"i/")}}}),Vue.component("installments",{delimiters:["<%","%>"],props:["price","sr_inst_text","installments_placeholder"],template:"#installments",data:function(){return{}},computed:{installmentsPosition:function(){return this.price.installmentsFormat.indexOf("#i")>this.price.installmentsFormat.indexOf("#p")?"before":"after"}}}),Vue.component("price-wrapper",{delimiters:["<%","%>"],props:["options","price"],template:"#price-wrapper",data:function(){return{}},computed:{symbolShowPrefix:function(){return/^#c/.test(this.price.priceFormat)},symbol:function(){return this.symbolShowPrefix?this.price.currencySymbol.replace("&nbsp;",""):"&nbsp;"+this.price.currencySymbol.replace("&nbsp;","")},decimal:function(){return this.price.decimalSeparator+this.price.realPriceDecimalPart},showDecimal:function(){return""!==this.price.realPriceDecimalPart},priceRowSize:function(){return this.price.realPriceIntegerPart.replace(this.price.thousandSeparator," ").length>5?"price-row-medium":""}}}),j.each(function(b,c){var d=this;a(b,d,h(d).data().settings)}),{getDatasetForBoxes:b,objectSize:c,intializeVueInstance:a,convertStringToHTML:d,shouldDisplayHorizontalToggler:g})}())}();
//# sourceMappingURL=vue-universal-actionbox.js.map