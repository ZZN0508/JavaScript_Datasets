!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/sdk/",n(n.s=2)}([function(e,t,n){"use strict";e.exports.get=function(e){if(document.cookie&&document.cookie.length){for(var t,n=document.cookie.split(";"),r={},o=0,i=n.length;o<i;o++)r[(t=n[o].replace(/^(\s|\u00A0)+/g,"").split("="))[0]]=decodeURIComponent(t[1]);return e?r[e]:r}},e.exports.set=function(e,t,n){if(void 0!==e&&void 0!==t){var r=(n=n||{}).expires||{};"number"==typeof n.expires&&(r=new Date).setTime(r.getTime()+24*n.expires*60*60*1e3);var o=e+"="+encodeURIComponent(t);return o+=r.toUTCString?"; expires="+r.toUTCString():"",o+=n.path?"; path="+n.path:"",o+=n.domain?"; domain="+n.domain:"",o+=n.secure?"; secure":"",document.cookie=o,o}},e.exports.remove=function(t,n){return(n=n||{}).expires=-1,e.exports.set(t,"",n)}},function(e,t){e.exports={end_of_article:{weight:30,maxPerMonth:35},share_social_network:{weight:60,maxPerMonth:3},video_finished:{weight:30,maxPerMonth:5},video_share:{weight:1,maxPerMonth:60},comment_sent:{weight:1,maxPerMonth:50},comment_reply:{weight:1,maxPerMonth:50},quiz_finished:{weight:20,maxPerMonth:3},quiz_share:{weight:15,maxPerMonth:3},save_page:{weight:20,maxPerMonth:3},review_place_sent:{weight:60,maxPerMonth:3},review_event_sent:{weight:60,maxPerMonth:3},rating_place_sent:{weight:40,maxPerMonth:3},rating_event_sent:{weight:30,maxPerMonth:3},buy_tickets_cinema:{weight:250,maxPerMonth:2},buy_tickets_theatre:{weight:600,maxPerMonth:2},buy_tickets_concert:{weight:350,maxPerMonth:2},buy_tickets_sport:{weight:500,maxPerMonth:2},recipe_like:{weight:1,maxPerMonth:50},author_recipe_subscription:{weight:10,maxPerMonth:20},add_recipe:{weight:150,maxPerMonth:3},add_blog_article_app:{weight:100,maxPerMonth:5},add_blog_article:{weight:100,maxPerMonth:5},repost_article:{weight:100,maxPerMonth:5},article_like:{weight:1,maxPerMonth:50},comment_like:{weight:1,maxPerMonth:50}}},function(e,t,n){"use strict";n.r(t),n.d(t,"registerSdk",(function(){return g}));var r,o=function(e){r?e(null,r):(window.ramblerIdHelper||(window.ramblerIdHelper=[],function(e,t){var n=document.createElement("script");n.src=e,n.onload=function(){t(),document.body&&document.body.removeChild(n)},n.onerror=function(){t(new Error("script does not loaded"))},document.body&&document.body.appendChild(n)}("https://id.rambler.ru/rambler-id-helper/auth_events.js",(function(t){t&&e(t)}))),window.ramblerIdHelper.push((function(){r=window.ramblerIdHelper,e(null,r)})))},i=n(0),a=function(e){var t,n=null;try{n=JSON.parse(null!==(t=window.localStorage.getItem(e))&&void 0!==t?t:"")}catch(e){}return n},l=function(e,t){try{window.localStorage.setItem(e,JSON.stringify(t))}catch(e){}},u=n(1),c=n.n(u),d=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,l=i.length;a<l;a++,o++)r[o]=i[a];return r},s=1===a("loyaltyStageApi")?"https://loyalty-stage.rambler-co.ru":"https://loyalty.rambler-co.ru",p=Date.now()-2592e6,h=s+"/events",v=function(){var e,t,n=null!==(t=null===(e=function(){var e=null;try{e=i.get()}catch(e){}return e}())||void 0===e?void 0:e.ruid)&&void 0!==t?t:a("loyalty_uid");return n||(n=(+new Date/1e3).toString()+"-"+Math.round(2147483647*Math.random()).toString(),l("loyalty_uid",n)),n},f=function(e,t){var n=new XMLHttpRequest,r=JSON.stringify({params:{chainId:e}});n.open("post",s+"/api/v3/loypro/getUserStatus",!0),n.setRequestHeader("Content-Type","application/json"),n.onreadystatechange=function(){var e;if(4===n.readyState&&200===n.status){var r=JSON.parse(n.responseText);t(Boolean(null===(e=null==r?void 0:r.result)||void 0===e?void 0:e.partisipant))}},n.onerror=function(){t(!1)},n.send(r)},m=function(){return(m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function y(e,t){var n,r,i;if("setup"!==e){var u,s,g=t,w=g.project,_=g.userId;if(void 0===_)return s=function(n,r){var o,i=null!==(o=null==r?void 0:r.rccid)&&void 0!==o?o:null;y(e,m(m({},t),{userId:i}))},void o((function(e,t){e?s(e):t.getDefaultChainId((function(e,t){s(t,e)}))}));var x={type:_?"userEvent":"noauthEvent",eventType:e,chainId:null!=_?_:v(),project:w,timestamp:Date.now(),eventReferer:null===(n=window.location.href)||void 0===n?void 0:n.slice(0,200)};!function(e){("userEvent"===e.type?f:function(e,t){return t(!1)})(e.chainId,(function(t){var n,r,o,i;if(!t){var u=null!==(n=a("loyalty_noauth"))&&void 0!==n?n:{},s=c.a[e.eventType];if(s){var v=null!==(o=null===(r=u.events)||void 0===r?void 0:r.filter((function(e){return e.timestamp>p})))&&void 0!==o?o:[];if(v.filter((function(t){return t.eventType===e.eventType})).length<s.maxPerMonth){var f=e.eventType,m=e.timestamp;u.score=null!==(i=u.score)&&void 0!==i?i:0,u.score+=s.weight,u.events=d(v,[{eventType:f,timestamp:m}])}l("loyalty_noauth",u)}}var y=new XMLHttpRequest,g=encodeURIComponent(JSON.stringify([e])),w=h+"?data="+g;y.open("get",w,!0),y.setRequestHeader("content-type","text/plain"),y.send(null)}))}(x),_&&function(e){var t={event_type:e.eventType,ts:Date.now(),chain_id:e.chainId,project_name:e.project},n="https://kraken.rambler.ru/lp_endpoint?"+Object.keys(t).map((function(e){return e+"="+encodeURIComponent(t[e])})).join("&");(new Image).src=n}(x),null===(i=null===(r=window.RamblerLoyalty)||void 0===r?void 0:r.sendEvent)||void 0===i||i.call(r,x)}else(null==(u=t)?void 0:u.apiUrl)&&(h=u.apiUrl)}var g=function(){var e;if(!window.loyalty||"number"==typeof window.loyalty.l){var t=(null===(e=window.loyalty)||void 0===e?void 0:e.q)||[];window.loyalty=y,t.forEach((function(e){return y(e[0],e[1])}))}};document.body?g():document.addEventListener("DOMContentLoaded",g,!1)}]);
//# sourceMappingURL=sdk.js.map