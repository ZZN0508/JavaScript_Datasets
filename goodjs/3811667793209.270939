YUI.add("node-scroll-info",function(s,t){var i=s.config.doc,e=s.config.win;s.Plugin.ScrollInfo=s.Base.create("scrollInfoPlugin",s.Plugin.Base,[],{initializer:function(t){this._host=t.host,this._hostIsBody="body"===this._host.get("nodeName").toLowerCase(),this._scrollDelay=this.get("scrollDelay"),this._scrollMargin=this.get("scrollMargin"),this._scrollNode=this._getScrollNode(),this.refreshDimensions(),this._lastScroll=this.getScrollInfo(),this._bind()},destructor:function(){new s.EventHandle(this._events).detach(),this._events=null},getOffscreenNodes:function(t,i){void 0===i&&(i=this._scrollMargin);t=s.Selector.query(t||"*",this._host._node);return new s.NodeList(s.Array.filter(t,function(t){return!this._isElementOnscreen(t,i)},this))},getOnscreenNodes:function(t,i){void 0===i&&(i=this._scrollMargin);t=s.Selector.query(t||"*",this._host._node);return new s.NodeList(s.Array.filter(t,function(t){return this._isElementOnscreen(t,i)},this))},getScrollInfo:function(){var t=this._scrollNode,i=this._lastScroll,e=this._scrollMargin,s=t.scrollLeft,o=t.scrollHeight,l=t.scrollTop,r=t.scrollWidth,n=l+this._height,t=s+this._width;return{atBottom:o-e<n,atLeft:s<e,atRight:r-e<t,atTop:l<e,isScrollDown:i&&l>i.scrollTop,isScrollLeft:i&&s<i.scrollLeft,isScrollRight:i&&s>i.scrollLeft,isScrollUp:i&&l<i.scrollTop,scrollBottom:n,scrollHeight:o,scrollLeft:s,scrollRight:t,scrollTop:l,scrollWidth:r}},isNodeOnscreen:function(t,i){return!!(t=s.one(t))&&!!this._isElementOnscreen(t._node,i)},refreshDimensions:function(){var t=i.documentElement;s.UA.ios?(this._winHeight=e.innerHeight,this._winWidth=e.innerWidth):(this._winHeight=t.clientHeight,this._winWidth=t.clientWidth),this._hostIsBody?(this._height=this._winHeight,this._width=this._winWidth):(this._height=this._scrollNode.clientHeight,this._width=this._scrollNode.clientWidth),this._refreshHostBoundingRect()},_bind:function(){var t=s.one("win");this._events=[this.after({scrollDelayChange:this._afterScrollDelayChange,scrollMarginChange:this._afterScrollMarginChange}),t.on("windowresize",this._afterResize,this)],this._hostIsBody?this._events.push(t.after("scroll",this._afterHostScroll,this)):this._events.push(t.after("scroll",this._afterWindowScroll,this),this._host.after("scroll",this._afterHostScroll,this))},_getScrollNode:function(){return this._hostIsBody&&!s.UA.webkit?i.documentElement:s.Node.getDOMNode(this._host)},_isElementOnscreen:function(t,i){var e=this._hostRect,t=t.getBoundingClientRect();return void 0===i&&(i=this._scrollMargin),!(t.top>e.bottom+i||t.bottom<e.top-i||t.right<e.left-i||t.left>e.right+i)},_refreshHostBoundingRect:function(){var t,i=this._winHeight,e=this._winWidth;this._hostIsBody?(t={bottom:i,height:i,left:0,right:e,top:0,width:e},this._isHostOnscreen=!0):t=this._scrollNode.getBoundingClientRect(),this._hostRect=t},_triggerScroll:function(t){var i=this.getScrollInfo(),e=s.merge(t,i),t=this._lastScroll;this._lastScroll=i,this.fire("scroll",e),i.isScrollLeft?this.fire("scrollLeft",e):i.isScrollRight&&this.fire("scrollRight",e),i.isScrollUp?this.fire("scrollUp",e):i.isScrollDown&&this.fire("scrollDown",e),i.atBottom&&(!t.atBottom||i.scrollHeight>t.scrollHeight)&&this.fire("scrollToBottom",e),i.atLeft&&!t.atLeft&&this.fire("scrollToLeft",e),i.atRight&&(!t.atRight||i.scrollWidth>t.scrollWidth)&&this.fire("scrollToRight",e),i.atTop&&!t.atTop&&this.fire("scrollToTop",e)},_afterHostScroll:function(t){var i=this;clearTimeout(this._scrollTimeout),this._scrollTimeout=setTimeout(function(){i._triggerScroll(t)},this._scrollDelay)},_afterResize:function(){this.refreshDimensions()},_afterScrollDelayChange:function(t){this._scrollDelay=t.newVal},_afterScrollMarginChange:function(t){this._scrollMargin=t.newVal},_afterWindowScroll:function(){this._refreshHostBoundingRect()}},{NS:"scrollInfo",ATTRS:{scrollDelay:{value:50},scrollMargin:{value:50}}})},"3.12.0",{requires:["array-extras","base-build","event-resize","node-pluginhost","plugin","selector"]});
