!function(n){function r(t){if(o[t])return o[t].exports;var e=o[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}var o={};r.m=n,r.c=o,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="//s.alicdn.com/@g/msite/chrome-push/0.0.1/",r(r.s=3)}([function(t,e,n){"use strict";function r(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function o(t){return t="string"!=typeof t?String(t):t}function i(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return g.iterable&&(t[Symbol.iterator]=function(){return t}),t}function s(e){this.map={},e instanceof s?e.forEach(function(t,e){this.append(e,t)},this):Array.isArray(e)?e.forEach(function(t){this.append(t[0],t[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function a(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function c(n){return new Promise(function(t,e){n.onload=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function u(t){var e=new FileReader,n=c(e);return e.readAsArrayBuffer(t),n}function f(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function l(){return this.bodyUsed=!1,this._initBody=function(t){var e;(this._bodyInit=t)?"string"==typeof t?this._bodyText=t:g.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:g.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:g.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():g.arrayBuffer&&g.blob&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=f(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):g.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||m(t))?this._bodyArrayBuffer=f(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):g.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},g.blob&&(this.blob=function(){var t=a(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?a(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(u)}),this.text=function(){var t,e,n=a(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=c(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},g.formData&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function p(t,e){var n,r=(e=e||{}).body;if(t instanceof p){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new s(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new s(e.headers)),this.method=(n=e.method||this.method||"GET",t=n.toUpperCase(),-1<w.indexOf(t)?t:n),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function h(t){var n=new FormData;return t.trim().split("&").forEach(function(t){var e;t&&(t=(e=t.split("=")).shift().replace(/\+/g," "),e=e.join("=").replace(/\+/g," "),n.append(decodeURIComponent(t),decodeURIComponent(e)))}),n}function d(t,e){e=e||{},this.type="default",this.status=void 0===e.status?200:e.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new s(e.headers),this.url=e.url||"",this._initBody(t)}function y(i,a){return new Promise(function(r,t){function e(){o.abort()}var n=new p(i,a);if(n.signal&&n.signal.aborted)return t(new _("Aborted","AbortError"));var o=new XMLHttpRequest;o.onload=function(){var n,t={status:o.status,statusText:o.statusText,headers:(e=o.getAllResponseHeaders()||"",n=new s,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var e=t.split(":"),t=e.shift().trim();t&&(e=e.join(":").trim(),n.append(t,e))}),n)};t.url="responseURL"in o?o.responseURL:t.headers.get("X-Request-URL");var e="response"in o?o.response:o.responseText;r(new d(e,t))},o.onerror=function(){t(new TypeError("Network request failed"))},o.ontimeout=function(){t(new TypeError("Network request failed"))},o.onabort=function(){t(new _("Aborted","AbortError"))},o.open(n.method,n.url,!0),"include"===n.credentials?o.withCredentials=!0:"omit"===n.credentials&&(o.withCredentials=!1),"responseType"in o&&g.blob&&(o.responseType="blob"),n.headers.forEach(function(t,e){o.setRequestHeader(e,t)}),n.signal&&(n.signal.addEventListener("abort",e),o.onreadystatechange=function(){4===o.readyState&&n.signal.removeEventListener("abort",e)}),o.send(void 0===n._bodyInit?null:n._bodyInit)})}Object.defineProperty(e,"__esModule",{value:!0}),e.Headers=s,e.Request=p,e.Response=d,n.d(e,"DOMException",function(){return _}),e.fetch=y;var b,m,g={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};g.arrayBuffer&&(b=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],m=ArrayBuffer.isView||function(t){return t&&-1<b.indexOf(Object.prototype.toString.call(t))}),s.prototype.append=function(t,e){t=r(t),e=o(e);var n=this.map[t];this.map[t]=n?n+", "+e:e},s.prototype.delete=function(t){delete this.map[r(t)]},s.prototype.get=function(t){return t=r(t),this.has(t)?this.map[t]:null},s.prototype.has=function(t){return this.map.hasOwnProperty(r(t))},s.prototype.set=function(t,e){this.map[r(t)]=o(e)},s.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},s.prototype.keys=function(){var n=[];return this.forEach(function(t,e){n.push(e)}),i(n)},s.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),i(e)},s.prototype.entries=function(){var n=[];return this.forEach(function(t,e){n.push([e,t])}),i(n)},g.iterable&&(s.prototype[Symbol.iterator]=s.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];p.prototype.clone=function(){return new p(this,{body:this._bodyInit})},l.call(p.prototype),l.call(d.prototype),d.prototype.clone=function(){return new d(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new s(this.headers),url:this.url})},d.error=function(){var t=new d(null,{status:0,statusText:""});return t.type="error",t};var v=[301,302,303,307,308];d.redirect=function(t,e){if(-1===v.indexOf(e))throw new RangeError("Invalid status code");return new d(null,{status:e,headers:{location:t}})};var _=self.DOMException;try{new _}catch(t){(_=function(t,e){this.message=t,this.name=e;t=Error(t);this.stack=t.stack}).prototype=Object.create(Error.prototype),_.prototype.constructor=_}y.polyfill=!0,self.fetch||(self.fetch=y,self.Headers=s,self.Request=p,self.Response=d)},,,function(t,e,n){n(0),t.exports=n(4)},function(t,e,n){"use strict";function f(t){return"string"==typeof t}function a(t){return f(t)&&""!==t}function s(t){if(!a(t))throw new TypeError("Cookie name must be a non-empty string")}function l(t){return t}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(n){var r=o();return function(){var t,e=h(n);return t=r?(t=h(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==c(t)&&"function"!=typeof t?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e):t}}function u(t){var n="function"==typeof Map?new Map:void 0;return function(t){function e(){return r(t,arguments,h(this).constructor)}if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),p(e,t)}(t)}function r(t,e,n){return(r=o()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);r=new(Function.bind.apply(t,r));return n&&p(r,n.prototype),r}).apply(null,arguments)}function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t){var r=document.createElement("script");return r.src=t,new Promise(function(e,n){r.onload=function(){var t=this.readyState;t&&"loaded"!==t&&"complete"!==t?n():(e(),this.onload=this.onreadystatechange=null,this.parentNode.removeChild(this))},document.getElementsByTagName("head")[0].appendChild(r)})}function y(t,e,n){var r;window.goldlog&&(r="www.alibaba.com"===window.location.hostname?"-pc":"",window.goldlog.record("/sc.mobile.global-footer","CLK","module=".concat(t).concat(r,"&action=").concat(e,"&extra=").concat(n,"&pageid=").concat(window.dmtrack_pageid),"GET"))}Object.defineProperty(e,"__esModule",{value:!0});var e=n(5),b=n.n(e),e=n(6),n=n.n(e),e={},m=decodeURIComponent,g=encodeURIComponent;e.get=function(t,e){s(t),e="function"==typeof e?{converter:e}:e||{};var n=function(t,e){var n={};if(f(t)&&0<t.length)for(var r,o,i,a=e?m:l,s=t.split(/;\s/g),c=0,u=s.length;c<u;c++){if((i=s[c].match(/([^=]+)=/i))instanceof Array)try{r=m(i[1]),o=a(s[c].substring(i[1].length+1))}catch(t){}else r=m(s[c]),o="";r&&(n[r]=o)}return n}(document.cookie,!e.raw);return(e.converter||l)(n[t])},e.set=function(t,e,n){s(t);var r=(n=n||{}).expires,o=n.domain,i=n.path,t=t+"="+(e=!n.raw?g(String(e)):e),e=r;return"number"==typeof e&&(e=new Date).setDate(e.getDate()+r),e instanceof Date&&(t+="; expires="+e.toUTCString()),a(o)&&(t+="; domain="+o),a(i)&&(t+="; path="+i),n.secure&&(t+="; secure"),document.cookie=t},e.remove=function(t,e){return(e=e||{}).expires=new Date(0),this.set(t,"",e)};function w(){var t=P.get("xman_us_f")||"";return(t=E(t)).x_user=A(t.x_user),t}function v(t,e){return t=t||"",S&&/^(https?:\/\/)(gateway\.alibaba\.com|gw\.api\.alibaba\.com)/.test(t)&&(e&&e.headers instanceof Headers?e.headers.append("havanaSession","true"):(e=Object.assign({},e)).headers=Object.assign({},e.headers,{havanaSession:"true"})),e}function _(t,e,n,r,o){e=(e=!e&&/^(https?:)?\/\/(.+)([\?\#].+)$/i.test(t)?RegExp.$2:e)||t,r=new Date-r,r="name=".concat(e,"|type=").concat(n,"|time=").concat(r),"failure"===n&&(r+="|reason=".concat(o,"|url=").concat(t)),window.dmtrack&&window.dmtrack.dotstat&&window.dmtrack.dotstat(27132,{ext:r})}function x(t){return t.replace("gw.api.alibaba.com","gateway.alibaba.com")}function T(t,e){return e.noCache||(n=B(n=t),t="".concat(n,"&_=").concat((new Date).valueOf())),!1!==e.ctoken&&(n=t,t=(e=j.getCToken())?(n=B(n),"".concat(n,"&ctoken=").concat(e)):n),x(t);var n}var O,P=e,E=function(t){var n={};return t&&t.split("&").map(function(t){var e=t.split("="),t=e[0],e=e[1];n[t]=e}),n},A=function(t){t=(t=(t||"").replace(/</g,"&lt;").replace(/>/g,"&gt;")).split("|");return{country:t[0],lastName:t[1],firstName:t[2],serviceType:t[3],memberSeq:t[4]}},j={core:P,getBeaconId:function(){return P.get("ali_beacon_id")},getCna:function(){return P.get("cna")},getIsLoggedIn:function(){var t=P.get("xman_us_t");return t&&-1!==t.indexOf("sign=y")},getUserId:function(){return(P.get("ali_apache_track")||"").replace(/.+mid=(.+)$/,"$1").replace(/"/g,"")},getIsFirstIn:function(){return""===P.get("ali_intl_firstIn")},getLanguage:function(){return P.get("intl_locale")||w().x_locale||"en_US"},getUser:function(){return w().x_user},getIsOversea:function(){return"0"==w().x_l},getIsNewUser:function(){return""!==w().x_user.memberSeq},getServerDomain:function(){var t=w().x_user.serviceType;return-1<["gs","cgs","twgs","hkgs","cnfm"].indexOf(t)?"hz":"us"},getCToken:function(){var t=P.get("xman_us_t")||"";return E(t).ctoken||""}},S=navigator&&navigator.userAgent&&-1<navigator.userAgent.indexOf("HavanaSession"),k=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=o.call(this)).name="FetchError",n.response=e,n.status=t,n}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(r,u(Error));var o=i(r);return r}(),B=function(t){return t.indexOf("?")<0&&(t+="?1=1"),t},D={sendTrack:_,jsonp:function(t,e){var n=new Date;e=Object.assign({},{timeout:6e4},e),e=v(t,e),t=T(t,e);var r=b()(t,e);return R(r,t,e.apiName,n)},fetch:(O=function(t,e){return t=x(t),e=v(t,e),fetch(t,e)},C.toString=function(){return O.toString()},C)},R=function(t,e,n,r){return t.then(function(t){if(t.ok)return _(e,n,"success",r),t.json();_(e,n,"failure",r,t.status);t=new k(t.status,t);throw D.trigger("error",t),t})};function C(t,e){return O.apply(this,arguments)}["put","delete","post","get"].forEach(function(s){D[s]=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};e.method=s,t=T(t,e);var n,r,o,i,a=new Date,i=(n=t,r=e,o=a,i=Object.assign({},{method:"GET",credentials:"same-origin"},r),"object"!==c((i=v(n,i)).body)||i.body instanceof FormData||(i.body=JSON.stringify(i.body)),_(n,r.apiName,"send",o),fetch(n,i));return R(i,t,e.apiName,a)}}),n.a.mixTo(D);function U(e){return new Promise(function(t){window.firebase?t():(window.sufei_jsonp_ignore=[/googleapis\.com/],d("https://s.alicdn.com/@g/msite/global-footer/0.0.67/firebase-app.js").then(function(){d("https://s.alicdn.com/@g/msite/global-footer/0.0.67/firebase-messaging.js").then(function(){window.firebase.initializeApp(e.firebaseConfig),window.__messaging=firebase.messaging(),__messaging.usePublicVapidKey(e.publicVapidKey),window.__messaging.onTokenRefresh(function(){window.__messaging.getToken().then(function(t){V(t)})}),t()})}))})}function I(){return new Promise(function(e,n){window.__messaging.getToken().then(function(t){t&&V(t).then(function(){e(t)}).catch(function(t){n(t)})})})}var F,N=D,L=(window.navigator.userAgent.toLowerCase().match(/(ipod|iphone|android|coolpad|mmp|smartphone|midp|wap|xoom|symbian|j2me|blackberry|wince)/i),/Android/i.test(window.navigator.userAgent),function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return{msg:2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",data:e,status:t?"success":"error"}}),q="https:"===location.protocol&&"serviceWorker"in navigator&&"showNotification"in ServiceWorkerRegistration.prototype&&"denied"!==Notification.permission&&-1<location.host.indexOf(".alibaba.com")&&"PushManager"in window,H=(n=(n=(n=document.cookie)&&n.match(/(?:^|;)\s*xman_us_t\s*=\s*([^;]+)/))&&n[1].match(/(?:^|&)\s*ctoken\s*=\s*([^&]+)/),window._intl_csrf_token_||n&&n[1]),M=window.location.hostname,V=function(t){return new Promise(function(e,n){t||n("ERROR: endpoint is undefined"),N.get("https://m.alibaba.com/api/push/register.do?endPoint=".concat(t,"&from=").concat(M,"&ctoken=").concat(H),{credentials:"include"}).then(function(t){(200===t.responseCode?e:n)(t)})})};F={firebaseConfig:{apiKey:"AIzaSyAr5duppsjirgxZssTZXp6d30HuMuaUu24",authDomain:"icbu-pc.firebaseapp.com",databaseURL:"https://icbu-pc.firebaseio.com",projectId:"icbu-pc",storageBucket:"icbu-pc.appspot.com",messagingSenderId:"526862879735",appId:"1:526862879735:web:b4aba108d9c99f05873cf2"},publicVapidKey:"BDkiyauJkA65cDn_GmPxdH6BCVexUCPR4VQxyV9cH9NBjFDvGySTFAaVurVsrTDgeoceMQzJ0302mufHS2dfpK8"},new Promise(function(e,n){var t=q?window.Notification.permission:"notSupport";"notSupport"!==t?window.navigator.serviceWorker.ready.then(function(){U(F).then(function(){new Promise(function(e,t){"granted"===window.Notification.permission&&N.get("https://m.alibaba.com/api/push/getMPushSetting.do?from=".concat(M,"&ctoken=").concat(H),{credentials:"include"}).then(function(t){e(200==t.responseCode&&0<t.entity.length&&t.entity[0].settingSwitch)}),e(!1)}).then(function(t){t?I().then(function(t){e(L(1,t),"success")}).catch(function(t){n(L(0,t,"fail"))}):(y("notification","requestPermission"),new Promise(function(e,n){window.Notification.requestPermission().then(function(t){"granted"===t?I().then(function(t){y("notification","subscribeSuccess"),e(t,"success")}).catch(function(t){y("notification","subscribeFail"),n(t)}):(y("notification","userRefusePermission"),n("ç”¨æˆ·æ‹’ç»æŽˆæƒ"))})}).then(function(t){e(L(1,t),"success")}).catch(function(t){n(L(0,t,"fail"))}))})})}):n(L(0,{},"è®¢é˜…çŠ¶æ€ï¼š".concat(t)))}).then(function(t){t=t.data;console.log(t,L(1,t,"subscribe success"))}).catch(function(t){console.log(L(0,t,"subscribe fail"))})},function(t,e,n){var r;void 0!==(r="function"==typeof(r=function(t,e){"use strict";function l(){return"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random())}function p(e){try{delete window[e]}catch(t){window[e]=void 0}}function h(t){var e=document.getElementById(t);e&&document.getElementsByTagName("head")[0].removeChild(e)}function n(i){var a=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=i,c=a.timeout||r.timeout,u=a.jsonpCallback||r.jsonpCallback,f=void 0;return new Promise(function(e,t){var n=a.jsonpCallbackFunction||l(),r=u+"_"+n;window[n]=function(t){e({ok:!0,json:function(){return Promise.resolve(t)}}),f&&clearTimeout(f),h(r),p(n)},s+=-1===s.indexOf("?")?"?":"&";var o=document.createElement("script");o.setAttribute("src",""+s+u+"="+n),a.charset&&o.setAttribute("charset",a.charset),o.id=r,document.getElementsByTagName("head")[0].appendChild(o),f=setTimeout(function(){t(new Error("JSONP request to "+i+" timed out")),p(n),h(r),window[n]=function(){p(n)}},c),o.onerror=function(){t(new Error("JSONP request to "+i+" failed")),p(n),h(r),f&&clearTimeout(f)}})}var r={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};e.exports=n})?r.apply(e,[e,t]):r)&&(t.exports=r)},function(t,e){function i(){}function u(t,e,n){var r=!0;if(t){var o=0,i=t.length,a=e[0],s=e[1],c=e[2];switch(e.length){case 0:for(;o<i;o+=2)r=!1!==t[o].call(t[o+1]||n)&&r;break;case 1:for(;o<i;o+=2)r=!1!==t[o].call(t[o+1]||n,a)&&r;break;case 2:for(;o<i;o+=2)r=!1!==t[o].call(t[o+1]||n,a,s)&&r;break;case 3:for(;o<i;o+=2)r=!1!==t[o].call(t[o+1]||n,a,s,c)&&r;break;default:for(;o<i;o+=2)r=!1!==t[o].apply(t[o+1]||n,e)&&r}}return r}var f=/\s+/;i.prototype.on=function(t,e,n){var r,o;if(!e)return this;for(r=this.__events||(this.__events={}),t=t.split(f);o=t.shift();)(r[o]||(r[o]=[])).push(e,n);return this},i.prototype.once=function(t,e,n){function r(){o.off(t,r),e.apply(n||o,arguments)}var o=this;return this.on(t,r,n)},i.prototype.off=function(t,e,n){var r,o,i,a;if(!(r=this.__events))return this;if(!(t||e||n))return delete this.__events,this;for(t=t?t.split(f):s(r);o=t.shift();)if(i=r[o])if(e||n)for(a=i.length-2;0<=a;a-=2)e&&i[a]!==e||n&&i[a+1]!==n||i.splice(a,2);else delete r[o];return this},i.prototype.trigger=function(t){var e,n,r,o,i,a,s=[],c=!0;if(!(e=this.__events))return this;for(t=t.split(f),i=1,a=arguments.length;i<a;i++)s[i-1]=arguments[i];for(;n=t.shift();)(r=e.all)&&(r=r.slice()),(o=e[n])&&(o=o.slice()),"all"!==n&&(c=u(o,s,this)&&c),c=u(r,[n].concat(s),this)&&c;return c},i.prototype.emit=i.prototype.trigger;var s=(s=Object.keys)||function(t){var e,n=[];for(e in t)t.hasOwnProperty(e)&&n.push(e);return n};i.mixTo=function(e){var t;t=e,e="[object Function]"===Object.prototype.toString.call(t)?e.prototype:e;var n,r=i.prototype,o=new i;for(n in r)r.hasOwnProperty(n)&&function(t){e[t]=function(){return r[t].apply(o,Array.prototype.slice.call(arguments)),this}}(n)},t.exports=i}]);
