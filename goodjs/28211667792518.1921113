define("fly/utils/object-helper-1.0",["jquery"],function(e){return{deepFind:function(e,t){if(!e||!t)return null;var a=t.split("."),n=a.length;for(i=0;i<n;i++){if(!e.hasOwnProperty(a[i]))return null;e=e[a[i]]}return e}}}),define("fly/managers/components-1.0",["jquery","version!fly/utils/string-helper","version!fly/utils/object-helper","version!fly/managers/debug","version!fly/components/base"],function(s,n,e,t,i){var a,o={attr:"data-component",includeContext:!0},r=t.init("components"),l={};return s(document).on("domUpdated",function(e,t){a.process((t=t||{}).$context)}),a={process:function(e){var a=this;this.findByAttr(e).each(function(e,t){var i=s(t),t=i.data(),t=n.toCleanArray(t.component);s.each(t,function(e,t){a.init(t,i)})})},init:function(e,t,i){var a,n,o=l[e];o&&(i=i||{},a=s.makeArray(o.require)||[],n=e,o.alias&&(n=o.alias,i=s.extend(!0,{},o.options||{},i)),require(a,function(){t&&t.length&&s.isFunction(t[n])&&t[n](i)}),r.log("init: ",e,t,i))},setConfig:function(e){if(!s.isPlainObject(e))throw new Error("Component setConfig failure. Map is in the wrong format.");s.extend(o,e)},register:function(e){if(!s.isPlainObject(e))throw new Error("Component register failure. Map is in the wrong format.");s.each(e,function(e,t){(l[e]=t).options&&i.setDefaultOptions(e,t.options),t.events&&i.addDefaultEvents(e,t.events)}),r.log("register: ",e)},findByAttr:function(e,t,i){var a="";return(t=t&&!s.isArray(t)?[t]:t)?s.each(t,function(e,t){a+=0<e?", ":"",a+="["+o.attr+'="'+t+'"], ['+o.attr+"*='\""+t+"\"']"}):a="["+o.attr+"]",e=(e=e||s(document.body)).find(a),e=(i=void 0!==i?i:o.includeContext)?e.addBack(a):e}}}),define("managers/third-party/playbuzz",["jquery","version!fly/managers/debug"],function(e,a){return a=a.init("playbuzz"),{init:function(){document.body.addEventListener("pbItemEvent",function(e){try{switch(e.detail.name){case"pb.item.scroll-top-into-view":this.quizName=e.detail.data.title||"unknown quiz name","object"==typeof om&&"function"==typeof om.trackPlayBuzz?om.trackPlayBuzz("view",this.quizName):window.pl_buzz_name=this.quizName;break;case"pb.section.poll-vote":this.quizName=this.quizName||window.pl_buzz_name||"unknown quiz name";var t=e.detail.data.component.questions[0].text||"unknown question text",i=e.detail.data.text||"unknown answer text";"object"==typeof om&&"function"==typeof om.trackPlayBuzz&&om.trackPlayBuzz("answer",[this.quizName,t,i].join("|"))}a.log("Playbuzz event",e)}catch(e){a.error("Playbuzz data error",e)}})}}}),define("managers/tealium",["jquery","version!fly/managers/debug","managers/page-vars","managers/client-storage","managers/third-party/playbuzz","managers/tracking","optional!"+(window.CnetPageVars.services.tealium&&window.CnetPageVars.services.tealium.enabled?"tealium":"feature-disabled")],function(d,e,c,s,t,u){var p=e.get("tealium"),a={timeThreshold:4e3,requestThreshold:10,requestCount:0},e={_getCollectionId:function(){var e="";return"object"==typeof c.tracking.data.collectionId?e=c.tracking.data.collectionId[0]:"string"==typeof c.tracking.data.collectionId&&(e=c.tracking.data.collectionId),e},getDwTag:function(e,t){var i=[];for(t=t||3;(e=e.parents("[section],[id]")).attr("section")?i.push(e.attr("section")):e.attr("id")&&i.push(e.attr("id")),i.length<t&&0<e.length;);return i.reverse().join("|")},getHbParams:function(e){utag_data.videoAutoPlay="off"===s.read("autoplayEnabled")?"off":"on";var t=new Array("articleId","articleType","articleTitle","brand","channel_id","contact_id","mediaAutoPlay","mfr","pageType","pageTypeId","pageOntologyId","pageViewGuid","productId","productName","productSeriesId","productSeriesName","productSlug","productType","showId","showTitle","showEpisodeId","showEpisodeTitle","siteEdition","siteSection","siteType","userState","userId","userType","userRegId","deviceType","dwAnonId","videoAutoPlay"),i=new Array,a={};e=e||{};for(var n=0;n<t.length;n++)utag_data[t[n]]&&(i[t[n]]=utag_data[t[n]]);var o=c.tracking.data;return d.extend(a,i,{siteRsids:o.reportSuiteId,siteCode:o.brand,pageName:o.siteName?o.siteName+":"+window.location.pathname:void 0,pageUrl:window.location.href,sitePrimaryRsid:o.reportSuiteId,userStatus:o.userType,siteHier:o.siteName&&o.siteHier?o.siteName+":"+o.siteHier.join("|"):void 0,topicPrimaryId:o.topicId&&0<=o.topicId.length?o.topicId[0]:void 0,authorList:o.articleAuthorId?o.articleAuthorId.join("|"):void 0,test:o.testName?o.testName+"|"+o.testVersion+"|"+o.testGroup:""},e),a},_getUdoStockData:function(){var e=c.tracking.data;return{siteEdition:e.siteEdition,pageViewGuid:e.pageViewGuid,pageType:e.pageType,siteHier:e.siteHier,siteType:e.siteType,deviceType:e.deviceType,articleId:e.articleId,articleTitle:e.articleTitle,articleType:e.articleType,articlePubDate:e.articlePubDate,articleAuthorId:e.articleAuthorId,articleAuthorName:e.articleAuthorName,topicId:e.topicId,topicName:e.topicName}},_initRequestTracking:function(){var i,a;"article"===c.tracking.data.pageType&&(i=0,a=this,window.setInterval(function(){try{var e=window.performance.getEntriesByType("resource");for(i=i>=e.length?0:i;i<e.length;){var t=e[i];a._trackServiceRequest(t),i++}}catch(e){p.error("Failed to monitor tracking requests:",e)}},500))},_trackClickViaUtag:function(e,t,i,a,n){try{if(!0===c.tracking.enabled){n="object"!=typeof n?{}:n;var o={_test:c.tracking.data.testName?c.tracking.data.testName+"|"+c.tracking.data.testVersion+"|"+c.tracking.data.testGroup:"",userState:c.tracking.data.userState,userType:c.tracking.data.userType,message_id:c.tracking.data.message_id,contact_id:c.tracking.data.contact_id,channel_id:c.tracking.data.channel_id,oneTrustGroup1:window.utag_data.oneTrustGroup1,oneTrustGroup2:window.utag_data.oneTrustGroup2,oneTrustGroup3:window.utag_data.oneTrustGroup3,oneTrustGroup4:window.utag_data.oneTrustGroup4,oneTrustGroup5:window.utag_data.oneTrustGroup5};if(a="object"!=typeof a?{}:a,a=d.extend({},n,o,a,u.getServiceVars()),0<=d.inArray(e,["om","omnitureMgr","utag"])){p.info(i+" ping: ",a);var s=p.enabled?d.extend({},a):{};if("view"===t?u.trackPageView({path:window.location.pathname,data:a}):u.trackPageEvent({path:window.location.pathname,data:a}),a.dwLinkTag?window.dwTag=a.dwLinkTag:window.dwTag&&(a.dwLinkTag=window.dwTag),window[e][t](a),delete window.dwTag,"object"==typeof window.s&&(window.s.events="",window.s.eVar21="",window.s.eVar37="",window.s.eVar38=""),p.enabled){for(var r in s)a[r]!==s[r]&&p.warn("Tealium overrode our data: "+r+' was changed from "'+s[r]+'" to "'+a[r]+'"');var l={};for(r in a)void 0===s[r]&&(l[r]=a[r]);0!==l.length&&p.log("Tealium added the following data to the tracking call: ",l)}}else p.error("Invalid tracking object",e)}else p.info(i+" aborted; tracking is not enabled!")}catch(e){p.error(i+" failed:",e)}},trackComment:function(e,t,i){i={link_text:e,_clickAction:i||e,socialService:"cnet",brand:c.tracking.data.brand,_collectionPrimaryId:this._getCollectionId(),dwLinkTag:t.sharebarSection};this._trackClickViaUtag("utag","link",e,t,d.extend({},this._getUdoStockData(),i))},trackCustomEvent:function(e,t,i){this._trackClickViaUtag("utag","link",e,t,{link_text:e,_clickAction:i||"trackClick"})},trackExternalLink:function(e){this._trackClickViaUtag("om","trackClick","trackExternalLink",e)},trackForum:function(e,t){this._trackClickViaUtag("om","trackForum",e,t)},trackLead:function(e){var t=jQuery.extend({},c.tracking.data,{_merchantId:e.merid,_merchantName:e.merchantName,_leadType:e.ltype,_destCat:e.destcat,_destUrl:e.destUrl,leadCpc:e.leadcpc,mfr:e.manufacturer,productName:e.productTitle,productSeriesId:e.seriesGuid,productId:void 0!==e.productId?";"+e.productId+";;;;":"",commerceClickId:window.utag_data.commerceClickId,_videoAction:"",videoSegments:"",_leadProdPrice:e.productPrice,videoTime:0,_clickAction:"leadClick",link_text:"clickLead"},e);this._trackClickViaUtag("utag","link","trackLeadClick",e,t)},trackPageLoad:function(e){this._trackClickViaUtag("utag","view","Track view",e,c.tracking.data),d(window).trigger("dynamicloadcomplete"),u.trackChartbeatPageView()},trackPodcast:function(e){this._trackClickViaUtag("om","trackPodcast","trackPodcast",e)},_trackServiceRequest:function(e){for(var t in this.monitoredServices){t=this.monitoredServices[t];t.fireCount<t.maxFireCount&&-1!==e.name.indexOf(t.requestPrefix)&&(p.info("Tracking the request: "+t.timerName,e.fetchStart),this.trackCustomEvent(t.timerName,d.extend({},c.tracking.data)),t.fireCount++)}},_trackSlaRequest:function(e){var t,i;a.timeThreshold<=e.duration&&a.requestThreshold>a.requestCount&&((t=document.createElement("a")).href=e.name,!"".endsWith||t.host.endsWith(".cnet.com")||t.pathname.endsWith(".mp4")||(a.requestCount++,i=Math.round(e.duration/1e3),p.info("slow request ("+i+" seconds)",e.name),this.trackCustomEvent("trackSlaEnforcement",d.extend({serviceWorkerDomain:t.host,serviceWorkerRequestTime:i,serviceWorkerConnection:window.navigator.connection?window.navigator.connection.effectiveType:"unsupported"},c.tracking.data))))},trackSocial:function(e){var t={brand:c.tracking.data.brand,_collectionPrimaryId:this._getCollectionId(),dwLinkTag:e.sharebarSection};this._trackClickViaUtag("om","trackSocialClick","trackSocialClick",e,t)},trackSuggestedSearch:function(e){this._trackClickViaUtag("om","trackSuggestedSearchClick","trackSuggestedSearchClick",e)},trackVideo:function(e,t,i){var a=e.charAt(0).toUpperCase()+e.slice(1),a="pause"===e?"videoTime":"video"+a+(0===t?"Start":100===t?"Complete":t+"Percent"),t=c.tracking.data,t={_videoAction:a,link_text:a,siteHier:t.siteHier,siteSection:t.siteSection,siteEdition:t.siteEdition,brand:t.brand,siteType:t.siteType,deviceType:t.deviceType,pageType:t.pageType,pageNum:null!=t.pageNum?t.pageNum:1,topicId:t.topicId,pageViewGuid:t.pageViewGuid,articleAuthorId:t.articleAuthorId,articleAuthorName:t.articleAuthorName,articleId:t.articleId,articleTitle:t.articleTitle,articleType:t.articleType,productId:t.productId,productName:t.productName};this._trackClickViaUtag("utag","link",a,i,t)}};return t.init(),e._initRequestTracking(),e}),function(){var e,i,t=this;if("function"==typeof t.require)try{var a=t.require("crypto").randomBytes,s=a&&function(){return a(16)}}catch(s){}!s&&t.crypto&&crypto.getRandomValues&&(e=new Uint8Array(16),s=function(){return crypto.getRandomValues(e),e}),s||(i=new Array(16),s=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i});for(var r="function"==typeof t.Buffer?t.Buffer:Array,n=[],o={},l=0;l<256;l++)n[l]=(l+256).toString(16).substr(1),o[n[l]]=l;function c(e,t){t=t||0;return n[e[t++]]+n[e[t++]]+n[e[t++]]+n[e[t++]]+"-"+n[e[t++]]+n[e[t++]]+"-"+n[e[t++]]+n[e[t++]]+"-"+n[e[t++]]+n[e[t++]]+"-"+n[e[t++]]+n[e[t++]]+n[e[t++]]+n[e[t++]]+n[e[t++]]+n[e[t++]]}var d=s(),u=[1|d[0],d[1],d[2],d[3],d[4],d[5]],p=16383&(d[6]<<8|d[7]),h=0,m=0;function g(e,t,i){var a=t&&i||0;"string"==typeof e&&(t="binary"==e?new r(16):null,e=null);var n=(e=e||{}).random||(e.rng||s)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t)for(var o=0;o<16;o++)t[a+o]=n[o];return t||c(n)}var f=g;f.v1=function(e,t,i){var a=t&&i||0,n=t||[],o=null!=(e=e||{}).clockseq?e.clockseq:p,s=null!=e.msecs?e.msecs:(new Date).getTime(),r=null!=e.nsecs?e.nsecs:m+1,i=s-h+(r-m)/1e4;if(i<0&&null==e.clockseq&&(o=o+1&16383),1e4<=(r=(i<0||h<s)&&null==e.nsecs?0:r))throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");h=s,p=o;r=(1e4*(268435455&(s+=122192928e5))+(m=r))%4294967296;n[a++]=r>>>24&255,n[a++]=r>>>16&255,n[a++]=r>>>8&255,n[a++]=255&r;s=s/4294967296*1e4&268435455;n[a++]=s>>>8&255,n[a++]=255&s,n[a++]=s>>>24&15|16,n[a++]=s>>>16&255,n[a++]=o>>>8|128,n[a++]=255&o;for(var l=e.node||u,d=0;d<6;d++)n[a+d]=l[d];return t||c(n)},f.v4=g,f.parse=function(e,t,i){var a=t&&i||0,n=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){n<16&&(t[a+n++]=o[e])});n<16;)t[a+n++]=0;return t},f.unparse=c,f.BufferClass=r;var v=t.uuid;f.noConflict=function(){return t.uuid=v,f},t.uuid=f}.call(this),define("fly/libs/guid-1.0",function(){}),define("managers/recommendation-data",["jquery","managers/page-vars","version!fly/managers/debug","version!fly/libs/guid"],function(l,i,d){var a={APPLE:"17cf639e-36ce-4e2e-8ea8-a093af98d566",CARS:"b122d23f-29eb-493e-83e6-e9fbfeaf79c8",DEALS:"cc98b5a4-d3a9-4e35-b6d7-625e8289a152",GOOGLE:"303efe12-c4e2-4abd-af02-f99b9d1b2828","HOW TO":"787724c6-2b1e-4f6a-90d9-afa0eebd1abb",MOBILE:"d1753851-e519-4744-897e-9b6ea3b1c04b","SMART HOME":"5787016e-17a5-438f-8690-70ca531844fb","TV & AUDIO":"a13a6b57-a74a-4eaf-be94-c72b9dc931c2",CULTURE:"7b5fc82b-deb8-4e73-8a23-70461cd49a63"},t={broad:"broad-interest",specific:"specific-interest",video:"video-interest",general:"general"};d=d.init("recommendationDataManager");var r={testForLocalStorage:function(){try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch(e){return!1}},pruneViews:function(t){for(;2e3<=t.length;)t.shift();var e=Date.now();if(0<t.length)for(var i=t[0];i&&i.date_created&&i.date_created+158112e5<e;)t.shift(),i=t[0];for(var a=[],n=t.length-1;0<=n;n--)a.some(function(e){return e.content_entity_id===t[n].content_entity_id&&e.content_type===t[n].content_type})||a.push(t[n]);return a.reverse()},createNewViewEvent:function(e){var t=i.tracking.data;return{content_entity_id:t.contentId,content_type:"content_"+t.contentType,site:t.brand,dev:t.isDev,view_guid:t.pageViewGuid,page_type:t.pageType,user_id:t.userId,is_logged_in:!!e&&e.isLoggedIn,anon_id:this.getAnon(),deviceType:t.deviceType,date_created:Date.now(),interest:t.interest||this.getNoneInterest(),annotations:t.annotations||[],edition:t.siteEdition}},getAnon:function(){var t=(t=localStorage.getItem("CnetAnon"))||window.uuid.v4();try{localStorage.setItem("CnetAnon",t)}catch(e){d.error("Writing to localStorage for anon failed."),t="00000000-0000-0000-0000-000000000000"}return t},writeViewsArray:function(t){var i=!1;try{localStorage.setItem("CnetViewList",JSON.stringify(t)),i=!0}catch(e){d.error("Writing to localStorage failed, attempting to prune view data...");for(var a=0;a<t.length/10;a++)t.shift();try{localStorage.setItem("CnetViewList",JSON.stringify(t)),i=!0}catch(t){d.error("Writing to localStorage failed, even after pruning 10% of view data."),i=!1}}return i},writeExplicitInterestToLocalStorage:function(e){for(var t=(t=localStorage.getItem("CnetExplicitList"))?JSON.parse(t):[],i=!1,a=0;a<t.length;a++)if(e.interest_name&&t[a].interest_name&&e.interest_name===t[a].interest_name&&e.type&&t[a].type&&e.type===t[a].type&&e.implicit===t[a].implicit){if(e.date_created<t[a].date_created)return;t[a]=e,i=!0;break}return i||t.push(e),localStorage.setItem("CnetExplicitList",JSON.stringify(t)),{all:t,new:e}},createExplicitInterestObject:function(e,t,i){i=this.createNewViewEvent(i),i=this.normalizeView(i);return t&&t.id&&(i.interest=t),{anon_id:i.anon_id,implicit:!1,date_created:i.date_created,type:i.interest?i.interest.type:"none",interest_name:i.interest?i.interest.name.toUpperCase():"none",interest_id:i.interest?i.interest.id:"none",site:i.site,edition:i.edition,action:e,user_id:i.user_id}},createMockExplicitInterestObject:function(e){var t=this.createNewViewEvent();return{anon_id:(t=this.normalizeView(t)).anon_id,implicit:!1,date_created:t.date_created,type:"broad",interest_name:e,interest_id:a[e]||"interest_id",site:t.site,edition:t.edition,action:"unfollow"}},createImplicitInterestObject:function(e){return e=e||this.createNewViewEvent(),{anon_id:(e=this.normalizeView(e)).anon_id,implicit:!0,date_created:e.date_created,type:e.interest.type,interest_name:e.interest.name.toUpperCase(),interest_id:e.interest.id,site:e.site,edition:e.edition,action:"follow",urs_id:e.user_id}},normalizeView:function(e){return e.broad_interest?e.interest={id:a[e.broad_interest]||"interest_id",type:"broad",name:e.broad_interest}:e.interest||(e.interest=this.getNoneInterest()),null!=e.is_logged_in&&0!=e.is_logged_in||(e.user_id=""),e},repopulateInterestDB:function(e,t){var i=this.getExplicitInterests(),a=i.filter(function(e){return"unfollow"!==e.action&&!1===e.implicit}),n=this.getViewEvents(),o=this.buildImplicitInterestObjectsFromViews(n),n=i.filter(function(e){return"unfollow"!==e.action&&!0===e.implicit}),n=o.concat(n),s=[];n.forEach(function(t){i.some(function(e){return t.interest_id===e.interest_id&&"unfollow"===e.action})||s.push(t)});a=a.concat(s);d.log("Backfilling interests"),this.sendInterestsToBackend(a,e,t)},sendInterestsToBackend:function(e,t,i){var a,n;!e||!e.length||e.length<1?t():(e.sort(function(e,t){return t.date_created-e.date_created}),a=[],e.forEach(function(t){t=s(t),a.some(function(e){return t.interest_id===e.interest_id&&t.action===e.action&&t.implicit===e.implicit})||("video"===t.type&&(t.type="specific"),void 0!==t.user_id&&delete t.user_id,a.push(t))}),n="/personalization/interest/",e=[],i&&e.push("excludeUrsInfo=true"),"true"===localStorage.getItem("CnetUdsEnabled")&&e.push("udsEnabled=true"),e.length&&(n+="?"+e.join("&")),l.post(n,JSON.stringify(a),t))},syncInterestsWithBackend:function(e,s){var r=this;return!!e.isLoggedIn&&(l.ajax({method:"GET",dataType:"json",url:"/personalization/interest/"}).done(function(e){if(e.results){e=e.results[0].interests;if(e&&0!==e.length){e.sort(function(e,t){return e.lastViewed-t.lastViewed});let o=[];e.forEach(function(e){var t=e.broadInterestId?"broad":"collection"===e.type?"video":"specific",i="follow",a={action:i=!e.isImplicit&&!e.isActive?"unfollow":i,anon_id:r.getAnon(),date_created:e.lastViewed,edition:e.edition,implicit:e.isImplicit,interest_id:e.broadInterestId||e.interestId,interest_name:e.name.toUpperCase(),site:"cnet",type:t},n=r.writeExplicitInterestToLocalStorage(a);"true"===localStorage.getItem("CnetUdsEnabled")&&n&&o.push(a),"true"!==localStorage.getItem("CnetUdsEnabled")&&s.channel&&("follow"===i?s.channel.tags.add(e.name.toUpperCase(),r.getTagGroupByInterest(t)):s.channel.tags.remove(e.name.toUpperCase(),r.getTagGroupByInterest(t)))}),"true"===localStorage.getItem("CnetUdsEnabled")&&o.length&&window.uds_sdk.addInterest(o,"sync",!1),d.log("Interest Sync complete")}}}),!0)},buildImplicitInterestObjectsFromViews:function(e){var t,n=[],o=(t={},e.forEach(function(e){e.interest&&"none"!==e.interest.id&&(t[e.interest.id]?t[e.interest.id].push(e):t[e.interest.id]=[e])}),t);return o&&Object.keys(o).forEach(function(e){var t=o[e];if(!(t.length<2))for(var i=0;i<t.length-1;i++)if(t[i].date_created+2592e6>t[i+1].date_created){var a=s(a=r.createImplicitInterestObject(t[t.length-1]));n.push(a);break}}),n},getNoneInterest:function(){return{id:"none",type:"none",name:"none"}},getViewEvents:function(){var e=localStorage.getItem("CnetViewList");return e?JSON.parse(e):[]},getExplicitInterests:function(){var e=localStorage.getItem("CnetExplicitList");return e?(e=JSON.parse(e)).map(s):[]},getTagGroupByInterest:function(e){return t[e]||"device"},triggerPeriodicBackfillSync:function(t,e){var i=localStorage.getItem("CnetInterestSyncTime");if(!i||Number.parseInt(i)+36e5<Date.now())if(t.isLoggedIn)r.repopulateInterestDB(function(){window.UA?window.UA.then(function(e){r.syncInterestsWithBackend(t,e)&&localStorage.setItem("CnetInterestSyncTime",Date.now())}):l(window).on("urban-airship-loaded",function(){window.UA.then(function(e){r.syncInterestsWithBackend(t,e)&&localStorage.setItem("CnetInterestSyncTime",Date.now())})})});else{var e=r.buildImplicitInterestObjectsFromViews(e),a=r.getExplicitInterests().concat(e);if(0!==a.length){for(var n=a.sort(function(e,t){return t.date_created-e.date_created}),o=null,s=0;s<n.length;s++){if(!n[s].implicit){o=n[s];break}if(!a.some(function(e){return e.interest_id===n[s].interest_id&&"unfollow"===e.action&&!e.implicit})){o=n[s];break}}e=Date.now()-2592e6;o&&o.date_created<e&&r.repopulateInterestDB(function(){localStorage.setItem("CnetInterestSyncTime",Date.now())})}}}};function s(e){return e.interest_id=e.interest_id.replace("cnet_tag","CNET_TAG").replace("cnet_cat_topic","CNET_CAT_TOPIC"),e}return r}),define("translations/form-validate",["managers/edition"],function(e){return e.getTranslation({en:{required:{field:"This field is required",radio:"One of these fields is required"},availableEmail:"This e-mail address is already in use. Please choose another.",availableUsername:"That username is already taken. Try another.",validPassword:"Your password needs at least 6 characters, and 3 of these 4: special characters, numbers, or upper or lowercase letters.",minlength:"This field must be at least {minlength} characters",maxlength:"This field must be no more than {maxlength} characters",email:"Oops! Please enter a valid email.",mailcheck:"Did you mean",noUrl:"A url is not allowed in this field",noSpecialCharacters:"The special characters @, &, and % are not allowed in this field",equalTo:"Fields do not match",usernameSpecialCharacters:'Please use only alphanumeric characters, underscores "_", and dashes "-"',usernameCharacterLength:"Your username must be between 3 and 25 characters.",atLeastOneAlphanumeric:"You must include at least one alphanumeric character",generic:"Oops! Something went wrong, try again.","invalid.loginpassword":"Oops! Thatâ€™s not the password for this account, try again.","locked.account":"Too many attempts. Wait 5 minutes and try again, or reset your password.","invalid.email":"Oops! Please enter a valid email.","inuse.userName":"That username is already taken. Try another.","required.email":"We're sorry that you do not wish to create a CNET account.","notallowed.socialLink":'We\'re sorry, we\'ve encountered a problem with this email address. Please contact our customer service team at <a href="mailto:support.cnet@cbsinteractive.com">support.cnet@cbsinteractive.com</a>, and reference issue "log4383"'},es:{required:{field:"Campo requerido",radio:"One of these fields is required"},availableEmail:"Este email esta en uso.  Elige otro.",availableUsername:"Ese nombre de usuario ya existe. IntÃ©ntalo de nuevo.",validPassword:"Tu contraseÃ±a debe incluir al menos seis caracteres sin espacios y contar con un nÃºmero, un sÃ­mbolo especial y una mayÃºscula.",minlength:"Este campo debe tener al menos {minlength} caracteres",maxlength:"This field must be no more than {maxlength} characters",email:"Por favor utiliza un correo vÃ¡lido",mailcheck:"Â¿Te refieres a",noUrl:"A url is not allowed in this field",noSpecialCharacters:"The special characters @, &, and % are not allowed in this field",equalTo:"Fields do not match",usernameSpecialCharacters:'Por favor, usa solamente caracteres alfanumÃ©ricos, guiones bajos "_", y guiones "-"',usernameCharacterLength:"Tu nombre de usuario debe contener entre 3 y 23 letras.",atLeastOneAlphanumeric:"You must include at least one alphanumeric character",generic:"Â¡Lo sentimos! Algo no estÃ¡ funcionando, intÃ©ntalo mÃ¡s tarde.","invalid.loginpassword":"Â¡Lo sentimos! Esa no es la contraseÃ±a correcta. IntÃ©ntalo de nuevo.","locked.account":"Ingresaste una contraseÃ±a equivocada demasiadas veces. Espera 5 minutos para intentarlo de nuevo o restablece tu contraseÃ±a.","invalid.email":"Tu cuenta de e-mail no es vÃ¡lida, intÃ©ntalo de nuevo.","inuse.userName":"Ese nombre de usuario ya existe. IntÃ©ntalo de nuevo.","required.email":"Sentimos mucho que no quieras crear una cuenta con CNET en este momento. Â¡Gracias por visitarnos!"}})}),define("utils/urs-helper",["jquery","version!fly/managers/debug","managers/page-vars","optional!urs"],function(e,t,a){t=t.init("ursHelper");var i={16:257,103:259,222:263,225:265,242:266,256:268,295:298,358:359,363:361,364:362,368:365,369:366,370:367,372:371,403:401,404:402,9:269,36:270,74:278,305:304,27:280,374:373,376:375,202:394,393:394,395:396,397:398};return{getSocialAppId:function(e){return i[e]},getUrs:function(e,t){var i={};return"object"==typeof window.URS&&"function"==typeof URS.getInstance&&"function"==typeof URS.newInstance&&((i=URS.getInstance(e,"v2.2"))||(i=URS.newInstance({appId:e,clientToken:"12d6d06e118e4a90",environment:-1<a.environment.indexOf("prod")?URS.ursEnvironments.LIVE:URS.ursEnvironments.QA,version:"v2.2"}),t&&t(i))),i}}}),define("fly/utils/string-vars-1.0",["jquery"],function(s){return{compile:function(e,a,n){var o=this;return"string"!=typeof e?"":(n=s.makeArray(n),e.replace(/\{([^}]+)\}/g,function(e){var t=n,i="";return e=e.replace(/\|[^\}|]+/g,function(e){return t.push(e.substr(1)),""}),i=a[e.replace(/[{}]+/g,"")]||"",s.each(t,function(e,t){i=o.modify(t,i)}),i}))},modify:function(e,t){switch(e){case"lower":t=t.toLowerCase();break;case"upper":t=t.toUpperCase();break;case"urlencode":t=encodeURIComponent(t)}return t}}}),define("fly/libs/mailcheck-1.1",["jquery"],function(e){var n={mailcheck:{threshold:3,defaultDomains:["yahoo.com","google.com","hotmail.com","gmail.com","me.com","aol.com","mac.com","live.com","comcast.net","googlemail.com","msn.com","hotmail.co.uk","yahoo.co.uk","facebook.com","verizon.net","sbcglobal.net","att.net","gmx.com","mail.com"],defaultTopLevelDomains:["co.uk","com","net","org","info","edu","gov","mil"],run:function(e){e.domains=e.domains||n.mailcheck.defaultDomains,e.topLevelDomains=e.topLevelDomains||n.mailcheck.defaultTopLevelDomains,e.distanceFunction=e.distanceFunction||n.sift3Distance;var t=n.mailcheck.suggest(encodeURI(e.email),e.domains,e.topLevelDomains,e.distanceFunction);t?e.suggested&&e.suggested(t):e.empty&&e.empty()},suggest:function(e,t,i,a){e=e.toLowerCase();e=this.splitEmail(e);if(t=this.findClosestDomain(e.domain,t,a)){if(t!=e.domain)return{address:e.address,domain:t,full:e.address+"@"+t}}else{a=this.findClosestDomain(e.topLevelDomain,i);if(e.domain&&a&&a!=e.topLevelDomain){i=e.domain,t=i.substring(0,i.lastIndexOf(e.topLevelDomain))+a;return{address:e.address,domain:t,full:e.address+"@"+t}}}return!1},findClosestDomain:function(e,t,i){var a,n=99,o=null;if(!e||!t)return!1;i=i||this.sift3Distance;for(var s=0;s<t.length;s++){if(e===t[s])return e;(a=i(e,t[s]))<n&&(n=a,o=t[s])}return n<=this.threshold&&null!==o&&o},sift3Distance:function(e,t){if(null==e||0===e.length)return null==t||0===t.length?0:t.length;if(null==t||0===t.length)return e.length;for(var i=0,a=0,n=0,o=0;i+a<e.length&&i+n<t.length;){if(e.charAt(i+a)==t.charAt(i+n))o++;else for(var a=0,n=0,s=0;s<5;s++){if(i+s<e.length&&e.charAt(i+s)==t.charAt(i)){a=s;break}if(i+s<t.length&&e.charAt(i)==t.charAt(i+s)){n=s;break}}i++}return(e.length+t.length)/2-o},splitEmail:function(e){var t=e.split("@");if(t.length<2)return!1;for(var i=0;i<t.length;i++)if(""===t[i])return!1;var e=t.pop(),a=e.split("."),n="";if(0==a.length)return!1;if(1==a.length)n=a[0];else{for(i=1;i<a.length;i++)n+=a[i]+".";2<=a.length&&(n=n.substring(0,n.length-1))}return{topLevelDomain:n,domain:e,address:t.join("@")}}}};jQuery.fn.mailcheck=function(e){var t,i,a=this;e.suggested&&(t=e.suggested,e.suggested=function(e){t(a,e)}),e.empty&&(i=e.empty,e.empty=function(){i.call(null,a)}),e.email=this.val(),n.mailcheck.run(e)}}),define("fly/components/form-validate-1.0",["jquery","version!fly/utils/string-helper","version!fly/utils/string-vars","version!fly/managers/debug","version!fly/components/base"],function(u,e,r,t){var s=u.support.touch?"vclick":"click",p=t.init("formValidate");u.widget("fly.formValidate",u.fly.base,{options:{inlineErrorTemplate:'<label for="{id}" class="validate-{type}">{message}</label>',globalErrorTemplate:'<div class="alert alert-{type}">{message}</div>',classFieldStatus:"validate-{type}",animation:"slide",fieldSelector:'[data-item="field"]',ignoreHidden:!0,ignoreSelector:null,validateOnChange:!0,scrollToErrors:!1,attributes:["required","maxlength","minlength"],rules:{},success:function(e,t){t.$form.submit()},failure:function(e,t){},placeError:function(e,t){t.is(":checkbox, :radio")&&t.parent("label").length?e.insertAfter(t.parent("label")):e.insertAfter(t)}},rules:{required:{message:function(e){return e.is(":radio")?"One of these fields is required":"This field is required"},test:function(e){return e.is(":radio")?e.closest("form").find(':radio[name="'+e.attr("name")+'"]').is(":checked"):!!(e.is(":checkbox")?e.is(":checked"):e.val())}},mailcheck:{type:"warning",message:null,test:function(i,a){var n=this,o=i.closest("form");return require(["fly/libs/mailcheck-1.1"],function(){i.mailcheck({suggested:function(e,t){n.message='Did you mean <a class="mailcheck" data-_insert="mailcheck">'+t.domain+"</a>?",o.on(s+".mailcheck",'[data-_insert="mailcheck"]',function(){i.val(t.full).trigger("change")}),a.reject("mailcheck")},empty:function(e){o.off(".mailcheck"),a.resolve()}})}),a.promise()}},availableEmail:{remote:!0,message:"Email is already in use"},availableUsername:{remote:!0,message:"User Name is already in use"},minlength:{message:function(e){return"This field must be at least "+e.attr("minlength")+" characters"},test:function(e){return e.val().length>=e.attr("minlength")}},maxlength:{message:function(e){return"This field must be no more than "+e.attr("maxlength")+" characters"},test:function(e){return e.val().length<=e.attr("maxlength")}},email:{message:"Please enter a valid email",test:function(e){return/^[A-Z0-9._%+\-]+@[A-Z0-9.\-]+\.[A-Z]{2,4}$/i.test(e.val())}},noUrl:{message:"A url is not allowed in this field",test:function(e){return!/http:\/\//i.test(e.val())}},noSpecialCharacters:{message:"The special characters @, &, and % are not allowed in this field",test:function(e){return/^[^@&%]+$/i.test(e.val())}},equalTo:{message:"Fields do not match",test:function(e){var t=u('input[name="'+e.data("validate-equal-to")+'"]');return t.length&&e.val()===t.val()}}},wasSubmitted:!1,isWorking:!1,isFormValid:!1,_create:function(){var e=this.options,t={};this._setup(),this.$form=this.$element,this.$form.attr("novalidate","novalidate"),this.globalErrors=[],this.ignoreSelector=":submit, :reset, :image, [disabled]",e.ignoreHidden&&(this.ignoreSelector+=", :hidden"),e.ignoreSelector&&(this.ignoreSelector+=", "+e.ignoreSelector),this.addRules(e.rules),this._on(this.$form,{submit:"_handleSubmit"}),e.validateOnChange&&(t["focusout :input:not("+this.ignoreSelector+", [data-_enabled])"]="_handleFocusOut",t["keyup :input:not("+this.ignoreSelector+", [readonly])"]="_handleChange",t["change :input:not("+this.ignoreSelector+")"]="_handleChange",this._on(this.$form,t))},_handleSubmit:function(e){this._off(this.$form,"focusout"),this.wasSubmitted=!0,this.isFormValid||(e.preventDefault(),e.stopImmediatePropagation(),this.validate())},_handleFocusOut:function(e){u(e.target).attr("data-_enabled","true"),this._handleChange(e)},_handleChange:function(e){e=u(e.target);this.isFormValid=!1,(this.wasSubmitted||e.data("_enabled"))&&(e.data("_passed",!1),this.testField(e))},getRule:function(e){return void 0!==this.rules[e]&&this.rules[e]},getRulesToValidate:function(i){var a=this,e=i.data("validate")||[],n=u.isArray(e)?e:e.split(" ");return u.each(this.options.attributes,function(e,t){i.attr(t)&&n.unshift(t)}),u.grep(n,function(e,t){return a.getRule(e)})},addRules:function(e){u.isPlainObject(e)&&u.extend(this.rules,e)},removeRule:function(e){!1!==this.getRule(e)&&delete this.rules[e]},setFieldDelegate:function(e){var t=null;return e.is(":radio")&&(t=this.$form.find(':radio[name="'+e.attr("name")+'"]').first()),e.data("_field_delegate",t),e},testField:function(r){var l=this,d=[],e=r.data()||{},c=e.error||{},n=u.Deferred();return e._passed?n.resolve():(this.setFieldDelegate(r),e.remoteRequest&&e.remoteRequest.abort(),e=this.getRulesToValidate(r),p.log("test field: ",r," w/ rules:",e),u.each(e,function(e,i){var t,a=l.getRule(i),n=!0,o=!!a.remote,s=null;if(o&&(s=a.remoteUrl||r.data("remoteUrl"),l.removeError(r)),t=function(){var e,t=u.Deferred();return!1===(e=o?l.requestRemote(s,r,i,t):a.test(r,t))?(n=!1,t.reject(i)):!0===e&&t.resolve(i),t.promise()}(),d.push(t),u.when(t).fail(function(){p.log("rule failed: ",i,r)}).then(function(){c.name===i&&l.removeError(r),p.log("rule passed: ",i,r)}),!n)return!1}),u.when.apply(null,d).fail(function(e){var t=l.getRule(e),i=t.type||"error",a=r.data(),t=a.error||{};a.remoteTimeout&&clearTimeout(a.remoteTimeout),a.remoteRequest&&a.remoteRequest.abort(),t.message!=l.getMessage(e,r)&&(l.removeError(r),l.addInlineError(r,e)),"error"!==i?(n.resolve(),p.log("field passed: ",r," type: ",i)):(n.reject(),p.log("field failed: ",r))}).then(function(){r.data("_passed",!0),l.removeError(r),n.resolve(),p.log("field passed: ",r)})),n.promise()},requestRemote:function(e,i,a,n){var t,o={},s=i.data()||{};s.remoteTimeout&&(clearTimeout(s.remoteTimeout),s.remoteQueue.resolve(a)),o[i.attr("name")]=i.val(),s=setTimeout(function(){t=u.ajax({type:"POST",dataType:"json",url:e,data:o,timeout:5e3,success:function(e){switch(e){case!0:n.resolve(a);break;case!1:n.reject(a);break;default:!u.isPlainObject(e)||!e.status||"success"===e.status?n.resolve(a):n.reject(a)}},complete:function(){i.data("remoteRequest",null)},error:function(e,t){n.resolve(a),i.data("_passed",!1)}}),i.data({remoteRequest:t,remoteQueue:null,remoteTimeout:null})},300),i.data({remoteQueue:n,remoteTimeout:s})},validate:function(){var e=this.options,t=this,i=[];this.isWorking||!1!==this._trigger("validate")&&(this.isWorking=!0,this.removeGlobalErrors(),this.$form.find(":input").not(this.ignoreSelector).each(function(){var e=u(this);i.push(t.testField(e))}),u.when.apply(null,i).fail(function(){p.log("validate failed"),t._trigger("failure",null,{$form:t.$form}),e.scrollToErrors&&t.scrollToErrors()}).then(function(){p.log("validate success"),t.isFormValid=!0,t._trigger("success",null,{$form:t.$form}),t.isFormValid=!1}).always(function(){t._trigger("validated"),t.isWorking=!1}))},scrollToErrors:function(){var e=this.options,t=this.$form.find("[data-validate-error]").first(),e=t.closest(e.fieldSelector),t=(e.length?e:t).offset().top;!1!==this._trigger("scroll",null,{offset:t})&&(t-=this.$window.height()/6,u("html, body").animate({scrollTop:t},"fast"))},removeError:function(e){e=e.data("_field_delegate")||e;var t=this,i=this.options,a=e.data("error");a&&("slide"===i.animation?a.$error.slideUp("fast",function(){u(this).remove(),t._completeRemoveError(a,e)}):(e.remove(),this._completeRemoveError(a,e)),e.removeClass(a.fieldClass).removeData("error"))},getMessage:function(e,t){var i=this.getRule(e),e=t.data("validate-message-"+e)||t.data("validate-message-"+e.toLowerCase());return e=!e&&!1!==e?u.isFunction(i.message)?i.message(t):i.message:e},addInlineError:function(e,t){e=e.data("_field_delegate")||e;var i,a=this,n=this.options,o=e.data("error")||{},s={name:t,position:"inline"};"error"!==o.type&&(i=this.getMessage(t,e),o=this.getRule(t).type||"error",t=r.compile(n.inlineErrorTemplate,{type:o,id:e.attr("id"),message:i}),u.extend(s,{type:o,message:i,$error:u(t).attr("data-validate-error",!0),fieldClass:r.compile(this.options.classFieldStatus,{type:o})}),e.addClass(s.fieldClass).data("error",s),!1!==i&&("slide"===n.animation?(s.$error=u("<div />").wrapInner(s.$error),s.$error.hide(),n.placeError.call(this,s.$error,e),s.$error.slideDown("fast",function(){a._completeAddError(s,e)})):(n.placeError.call(this,s.$error,e),this._completeAddError(s,e))))},addGlobalError:function(e,t){var i=this,a=this.options,n={position:"global",type:t=t||"error",message:e},e=r.compile(a.globalErrorTemplate,{type:t,message:e});u.extend(n,{$error:u(e).attr("data-validate-error",!0)}),"slide"===a.animation?(n.$error=u("<div />").wrapInner(n.$error),n.$error.hide().prependTo(this.$form).slideDown("fast",function(){i._completeAddError(n)})):(this.$form.prepend(n.$error),this._completeAddError(n)),this.globalErrors.push(n)},removeGlobalErrors:function(){var i=this;u.each(this.globalErrors,function(e,t){t.$error.remove(),i._completeRemoveError(t)})},removeInlineErrors:function(){var i=this;this.$form.find("[data-validate-error]").each(function(){var e=u(this),t=e.data();t.error&&i.removeError(e),t.remoteRequest&&t.remoteRequest.abort()})},_completeAddError:function(e,t){this._trigger("errorAdded",null,u.extend(e,{$field:t})),this.$document.trigger("displayChange",{type:"errorAdded"})},_completeRemoveError:function(e,t){this._trigger("errorRemoved",null,u.extend(e,{$field:t})),this.$document.trigger("displayChange",{type:"errorRemoved"})},_disable:function(){this.removeGlobalErrors(),this.removeInlineErrors()},_destroy:function(){this._disable()}})}),define("components/form-validate",["jquery","version!fly/managers/debug","translations/form-validate","version!fly/utils/string-vars","version!fly/libs/mailcheck","version!fly/components/form-validate"],function(r,e,l,s){e.init("formValidate"),r.widget("cnet.formValidate",r.fly.formValidate,{options:{validateOnBlur:!1},rules:{required:{message:function(e){return e.is(":radio")?l.required.radio:l.required.field}},mailcheck:{message:null,test:function(i,a){var n=r.support.touch?"vclick":"click",o=this,s=i.parents("form");return i.mailcheck({suggested:function(e,t){o.message=l.mailcheck+' <a class="mailcheck" data-insert="mailcheck">'+t.domain+"</a>?",s.on(n+".mailcheck",'[data-insert="mailcheck"]',function(){i.val(t.full).trigger("change")}),a.reject("mailcheck")},empty:function(e){s.off(".mailcheck"),a.resolve()}}),a.promise()}},availableEmail:{message:l.availableEmail},availableUsername:{message:l.availableUsername},validPassword:{message:l.validPassword,test:function(e){var t=e.val(),e=0;return/[0-9]+/.test(t)&&e++,/[a-z]+/.test(t)&&e++,/[A-Z]+/.test(t)&&e++,/[\(\)\.@`!#\$%\^&*+=\-\[\]\\';,\/\{\}\|":<>\?~_]+/.test(t)&&e++,3<=e&&6<=t.length&&-1==t.indexOf(" ")}},minlength:{message:function(e){return s.compile(l.minlength,{minlength:e.attr("minlength")})}},maxlength:{message:function(e){return s.compile(l.maxlength,{maxlength:e.attr("maxlength")})}},email:{message:l.email,test:function(e){return/^[A-Z0-9._%+\-]+@[A-Z0-9.\-]+\.[A-Z]{2,}$/i.test(e.val())}},noUrl:{message:l.noUrl},noSpecialCharacters:{message:l.noSpecialCharacters},equalTo:{message:l.equalTo},usernameSpecialCharacters:{message:l.usernameSpecialCharacters,test:function(e){return/^[a-z0-9\-_]*$/i.test(e.val())}},usernameCharacterLength:{message:l.usernameCharacterLength,test:function(e){e=e.val().length;return 3<=e&&e<=25}},atLeastOneAlphanumeric:{message:l.atLeastOneAlphanumeric,test:function(e){return/.*[a-z0-9]+.*/i.test(e.val())}}},_create:function(){var e=this.options,t={};this._super(),e.validateOnBlur&&(t["focusout :input:not("+this.ignoreSelector+", [data-_enabled])"]="_handleFocusOut",t["blur :input:not("+this.ignoreSelector+", [data-_enabled])"]="_handleChange",this._on(this.$form,t))},getMessage:function(e,t){return this._super(e,t)||l[e||"generic"]||l.generic},addInlineError:function(e,t){e=e.data("_field_delegate")||e;var i,a,n=this.options,o={name:t,position:"inline"};"error"!==(e.data("error")||{}).type&&(a=this.getMessage(t,e),i=this.getRule(t).type||"error",t=s.compile(n.inlineErrorTemplate,{type:i,id:e.attr("id"),message:a}),r.extend(o,{type:i,message:a,$error:r(t).attr("data-validate-error",!0),fieldClass:s.compile(this.options.classFieldStatus,{type:i})}),e.addClass(o.fieldClass).data("error",o),e.attr("aria-invalid","true"),!1!==a&&("slide"===n.animation&&(o.$error=r("<div />").wrapInner(o.$error)),n.placeError.call(this,o.$error,e),this._completeAddError(o,e)))},removeError:function(e){e=e.data("_field_delegate")||e;var t=this.options,i=e.data("error");i&&("slide"===t.animation?i.$error.remove():(e.remove(),this._completeRemoveError(i,e)),e.removeClass(i.fieldClass).removeData("error"),e.attr("aria-invalid","false"),this._completeRemoveError(i,e))}})}),define("translations/loading",["managers/edition"],function(e){return e.getTranslation({en:{loading:"Loading",end:"The End",error:"Error Encountered"},es:{loading:"Cargando",end:"Fin",error:"Error Encontrado"}})}),define("fly/components/loading-1.0",["jquery","version!fly/utils/string-vars","version!fly/components/base"],function(a,n){a.widget("fly.loading",a.fly.base,{options:{disabled:!1,delay:100,timeout:25e3,initState:"",template:'<div class="{baseClass} {stateClass}"><span class="text">{text}</span></div>',classes:{base:"loader",idle:"",loading:"loading",end:"load-end",error:"load-error"},text:{idle:"",loading:"Loading",end:"The End",error:"Error Encountered :("}},_create:function(){this._setup(),this._state=null,this._timeoutId=null},_init:function(){var e=this.options;!e.disabled&&e.initState&&(this._setContent(e.initState),this._state=e.initState)},_setContent:function(e,t){var i=this.options;"remove"!==e?(t=n.compile(i.template,a.extend({state:e,baseClass:i.classes.base,stateClass:i.classes[e],text:i.text[e]},t)),this.$element.html(t)):this.$element.empty()},add:function(){var e=this.options;!1!==this._trigger("add")&&(this.update("loading"),"number"==typeof e.timeout&&0<e.timeout&&(this._timeoutId=setTimeout(a.proxy(this.remove,this),e.timeout)),this._trigger("added"))},remove:function(){!1!==this._trigger("remove")&&(this.update("remove"),this._trigger("removed"))},update:function(e,t){var i=this.options,a={state:e};!1!==this._trigger("update",null,a)&&(this._state=e,i.disabled||(clearTimeout(this._timeoutId),this._setContent(e,t),this._trigger("updated",null,a)))},isLoading:function(){return"loading"===this._state},getState:function(){return this._state},_setOption:function(e,t){var i=this.options;"data"===e?this.$element.data("data",t):"disabled"===e&&(!0===t?this.$element.empty():this._setContent(i.initState)),this._super(e,t)},_destroy:function(){this.$element.remove()}})}),define("components/loading",["jquery","version!fly/managers/debug","translations/loading","version!fly/components/loading"],function(e,t,i){t=t.init("loading"),e.widget("cnet.loading",e.fly.loading,{options:{template:'<div class="{baseClass} {stateClass}"><span class="text">{text}</span></div>',classes:{base:"loader",idle:"",loading:"loadingCircle",end:"load-end",error:"load-error"},text:i},add:function(){this._super(),this.$element.parent().addClass("loadingArea")},remove:function(){this._super(),this.$element.parent().removeClass("loadingArea")}})}),define("components/authentication",["jquery","version!fly/managers/debug","managers/ad","version!fly/managers/components","utils/cookie","managers/edition","managers/page-vars","managers/tealium","managers/recommendation-data","translations/form-validate","utils/urs-helper","version!fly/utils/url-helper","managers/client-storage","version!fly/components/base","components/form-validate","components/loading"],function(p,s,a,n,o,r,l,d,c,u,h,e,t){s=s.init("authentication");const m=t.localStorageSupported();p.widget("cnet.authentication",p.fly.base,{options:{classComplete:"complete",classSelected:"selected",classShow:"show",classActive:"active",classFade:"fade",classHide:"hide"},appId:376,entryPoints:{375:"brand_nav",270:"comments",280:"forums",265:"polls",263:"my_list",367:"brand_nav",359:"my_list",394:"brand_nav",398:"comments",376:"brand_nav",36:"comments",27:"forums",225:"polls",222:"my_list",361:"sweepstakes",370:"brand_nav",358:"my_list",368:"sweepstakes",393:"brand_nav",397:"comments",386:"sweepstakes"},newsletterCodes:{375:"e245",270:"e245",280:"e245,e497",265:"e245",263:"e245",367:"e226,e231",359:"e226,e231",394:"e237,e245",398:"e237,e245",452:"e245",453:"e245",455:"e226,e231",376:"e245",36:"e245",27:"e245,e497",202:"e237,e245",225:"e245",222:"e245",361:"e239,e245,e214",370:"e226,e231",358:"e226,e231",368:"e226,e231,e148",393:"e237,e245",397:"e237,e245",386:"e237,e245",451:"e245",454:"e245",456:"e226,e231"},$form:null,$modal:null,loading:!1,nextAction:null,refresh:!1,socialRegistration:!1,step:"start",regService:"",steps:["facebookRegister","forgot","interests","login","loginOrRegister","register","start","username"],userData:null,termsRequired:!1,termsChecked:!1,_baseTrackingData:{_pageTitle:l.tracking.data._pageTitle,siteSection:l.tracking.data.siteSection,pageType:l.tracking.data.pageType,siteEdition:l.tracking.data.siteEdition,siteType:l.tracking.data.siteType,siteHier:l.tracking.data.siteHier,brand:l.tracking.data.brand,_pageChannelType:l.tracking.data._pageChannelType,audienceManagerBlob:l.tracking.data.guid,pageViewGuid:l.guid},_create:function(){this._setup(),this._setupPageEvents(),this._loadUserData(),this._checkForOpenLoginOnLoad()},_close:function(){this.$modal.removeClass(this.options.classShow),p("body").removeClass("noScroll"),this.$modal.attr({"aria-hidden":"true",tabindex:"-1"})},_completeLogin:function(){var i=this,e=l.tracking.data;this.getUserData(function(e,t){"function"==typeof i.nextAction&&(i.refresh=i.nextAction(e),i.nextAction=null),c.repopulateInterestDB(function(){window.UA.then(function(e){c.syncInterestsWithBackend(t,e)})}),i.$element.trigger("userhasloggedin",t),!0===i.refresh?window.location.reload():a.loadAds(a.getAdUnits(),l.ads.data)}),d.trackCustomEvent("trackLogin",p.extend(!0,{},this._baseTrackingData,{userId:e.userId,userState:"authenticated",userType:"registered",regService:i.regService,regDriver:i.entryPoints[i.appId]}),"login")},_displayError:function(e){var t=this.$form.find('[data-global-errors*="'+e+'"]'),i=this.$form.data("formValidate");0===t.length?i.addGlobalError(u[e||"generic"]||u.generic,"error"):i.addInlineError(t,e)},getUserData:function(e){this.userData?e(null,this.userData):this.$element.one("userdataloaded",e)},hasAccess:function(i){var a=this;(i=p.extend(!0,{nextAction:null,requireUsername:!1},i)).appId&&(a.appId=i.appId),this.getUserData(function(e,t){t.isLoggedIn?i.requireUsername&&!t.userName?(a.nextAction=i.nextAction,a._show("username")):"function"==typeof i.nextAction&&i.nextAction(t):(a.nextAction=i.nextAction,a._show("start"),a._trackCustomEvent("tap","start_authentication"))})},_loadUserData:function(){var t=this;this.userData=null,o.read("purs_1")?p.ajax({dataType:"json",url:l.user.urls.userData}).done(function(e){t.userData=p.extend(!0,e.user,{isLoggedIn:e.isLoggedIn}),window._cbq.push(["_acct","lgdin"]),t._updateDisplay(),t.$element.trigger("userdataloaded",[t.userData])}):(this.userData={isLoggedIn:!1},window._cbq.push(["_acct","anon"]))},logout:function(){var i=this;l.tracking.data,p.ajax({dataType:"json",url:p('[data-user-action="logout"]').attr("href")}).done(function(e){var t=i.userData;i.userData={isLoggedIn:!1},d.trackCustomEvent("trackLogout",p.extend(!0,{},i._baseTrackingData,{userId:"",userState:"not authenticated",userType:"anon",regService:i.regService,regDriver:i.entryPoints[i.appId]}),"logout"),window._cbq.push(["_acct","anon"]),i._updateDisplay(),i.$element.trigger("userhasloggedout"),i.$window.trigger("anonuserloaded",[t,i.userData])})},_setStep:function(e){var t,i=this;this.$modal&&(t=this.$modal.find("._"+this.step+" input[type=email]").val(),this.$modal.find("._"+e+" input[type=email]").val(t)),this.step=e,this.$modal&&(this.$modal.removeClass(this.steps.join(" ")).addClass(this.step).addClass(this.options.classShow),this.$modal.find("._"+this.step).addClass(this.options.classActive).attr("aria-hidden","false"),this.$modal.find("input:not([type=hidden])").attr("disabled","disabled"),this.$modal.find("._"+this.step+" input").removeAttr("disabled"),this.$modal.find("[data-app-ids]").each(function(e,t){t=p(t);t.data("appIds").indexOf(i.appId)<0&&t.attr("disabled","disabled")}),this.$modal.attr({"aria-hidden":"false",tabindex:"0"}),p(".c-siteHeader").hasClass("-srOnly")&&this.$modal.trigger("focus"),p(".c-masthead").hasClass("-srOnly")&&this.$modal.trigger("focus"),this.$modal.find('[data-focus="'+this.step+'"]').trigger("focus"),p("body").addClass("noScroll"))},_fadeOutStep:function(){this.$modal.find(".fade").removeClass(this.options.classFade);var e=this.$modal.find(".active");e&&(p(e).removeClass(this.options.classActive),p(e).addClass(this.options.classFade),this.$modal.attr("aria-hidden","true"))},_setupModalEvents:function(){var u=this;u.termsChecked=!1,this.$modal&&(this.$modal.find('[data-action="close"]').on("click",function(e){u._close()}),this.$modal.find('[data-action="close"]').on("keydown",function(e){13!==e.keyCode&&32!==e.keyCode||(e.preventDefault(),u._close(),("mobile"===l.device?p('[data-component="nav"]'):p("[data-authentication]")).focus())}),this.$modal.find('[data-action="urs"]').on("tap",function(e){u.regService="urs",u._trackCustomEvent("tap","choose_authentication_method")}),this.$modal.find('[data-action="facebook"]').on("tap",function(e){h.getUrs(h.getSocialAppId(u.appId),u._setupSocialEvents.bind(u)).social.authenticate("facebook"),u.regService="facebook",u._trackCustomEvent("tap","choose_authentication_method")}),this.$modal.find('[data-action="forgot"]').on("tap",function(e){var t=u.$form.data("formValidate"),i=u.$form.find("#authentication_login_email");t.testField(i)&&p.ajax({data:{email:i.val(),csrf:u.$form.find("#authentication_csrf").val()},dataType:"json",type:"POST",url:l.user.urls.forgot}).done(function(e){u._show("forgot")})}),this.$modal.find('[data-action="showHidePass"]').on("click",function(e){var t=u.$form.find("._"+u.step+" .password");""!=t.val()&&("password"==t.prop("type")?(t.prop("type","text"),u._trackCustomEvent("click","unmask pw")):(t.prop("type","password"),u._trackCustomEvent("click","mask pw")),u.$modal.find('[data-action="showHidePass"]').toggleClass("u-hidden")),t.focus()}),this.$modal.find("[data-interest]").on("tap",function(e){var t=p(this).data("interest");p(this).toggleClass(u.options.classSelected),u._trackCustomEvent("tap","mark_interest|"+t.tracking)}),this.$modal.find("#authentication_register_password").on("keyup",function(e){var t,i,a,n,o,s,r,l,d,c;p(e.target).parent().hasClass("active")&&(t=u.$form.find("."+u.options.classActive+" button"),c=u.$form.find("#authentication_register_terms"),i=u.$form.find("[data-password-validation=requirements]"),a=u.$form.find("[data-password-validation=characters]"),n=u.$form.find("[data-password-validation=letter]"),o=u.$form.find("[data-password-validation=number]"),s=u.$form.find("[data-password-validation=specialCharacter]"),r=p(this).val(),u.termsChecked=c.prop("checked"),l=6<=r.length,d=/[A-Za-z]+/g.test(r),e=/[0-9]/g.test(r),c=/[\(\)\.@`!#\$%\^&*+=\-\[\]\\';,\/\{\}\|":<>\?~_]+/.test(r),0<r.length&&!(l&&d&&e&&c)?(i.addClass(u.options.classShow).removeClass(u.options.classHide),l?a.addClass(u.options.classComplete):a.removeClass(u.options.classComplete),d?n.addClass(u.options.classComplete):n.removeClass(u.options.classComplete),e?o.addClass(u.options.classComplete):o.removeClass(u.options.classComplete),c?s.addClass(u.options.classComplete):s.removeClass(u.options.classComplete)):i.addClass(u.options.classHide),l&&d&&e&&c&&(!u.termsRequired||u.termsChecked)?t.removeAttr("disabled"):t.attr("disabled","disabled"))}),this.$modal.find("#authentication_register_terms").on("change",function(e){var t=u.$form.find("."+u.options.classActive+" button"),i=p(this),a=u.$form.find("#authentication_register_password").val();u.termsChecked=i.prop("checked");var n=6<=a.length,o=/[A-Za-z]+/g.test(a),i=/[0-9]/g.test(a),a=/[\(\)\.@`!#\$%\^&*+=\-\[\]\\';,\/\{\}\|":<>\?~_]+/.test(a);n&&o&&i&&a&&(!u.termsRequired||u.termsChecked)?t.removeAttr("disabled"):t.attr("disabled","disabled")}),this.$modal.find("#authentication_facebook_terms").on("change",function(e){u.termsChecked=p(this).prop("checked")}),this.$form.formValidate({validateOnBlur:!0,validateOnChange:!1,success:function(e){e.preventDefault();var t=u.$form.serializeArray(),e={appId:u.appId},i=0===t.length?e:t.reduce(function(e,t){return e[t.name]=t.value,e},e),n=u.$form.find('[data-component="loading"]').data("cnetLoading");switch(u.step){case"start":u._show("loginOrRegister");break;case"facebookRegister":h.getUrs(h.getSocialAppId(u.appId),u._setupSocialEvents.bind(u)).social.authenticate("facebook",!0,{userName:u.$form.find("#authentication_facebook_username").val()});break;case"loginOrRegister":n.add(),p.ajax({data:i,dataType:"json",type:"POST",url:l.user.urls.checkEmail}).done(function(e){var t;e.success?(t=e.taken?"signin_started":"registration_started",u._trackCustomEvent("enterData","email|"+t),u._show(e.taken?"login":"register")):u._displayError(e.error),u.$modal.find("#authentication_csrf").val(e.csrf),n.remove()});break;case"register":n.add(),p.ajax({data:i,dataType:"json",type:"POST",url:l.user.urls.register}).done(function(e){e.success?(u._loadUserData(),r.isEspanol()?(u._close(),u._completeLogin()):u._show("interests"),u.termsChecked&&u.loadBlueHornetId(),d.trackCustomEvent("trackRegistration",p.extend(!0,{},u._baseTrackingData,{userid:l.tracking.data.userId,regService:u.regService,regDriver:u.entryPoints[u.appId],userState:"authenticated",userType:"registered",clickGenericText:"email_opt_in|"+u.termsChecked}),"confirmRegistration")):(u._displayError(e.error),"inuse.userName"===e.error?u._trackCustomEvent("enterData","username|taken"):"invalid.email"===e.error&&u._trackCustomEvent("enterData","email|invalid")),u.$modal.find("#authentication_csrf").val(e.csrf),n.remove()});break;case"interests":n.add();let a=[];var o=u.$form.find("[data-interest]."+u.options.classSelected).get().reduce(function(e,t){t=p(t).data("interest");e.interests.push(t.interest),e.newsletters.push(t.newsletter);let i={id:t.id,name:t.tracking,type:"broad"};return u.getUserData(function(e,t){t=c.createExplicitInterestObject("follow",i,t);c.writeExplicitInterestToLocalStorage(t),m&&"true"===localStorage.getItem("CnetUdsEnabled")&&a.push(t)}),window.UA.then(function(e){m&&"true"!==localStorage.getItem("CnetUdsEnabled")&&e.channel&&e.channel.tags&&e.channel.tags.add(i.name.toUpperCase(),c.getTagGroupByInterest(i.type))}),e},{interests:[],newsletters:[]});m&&"true"===localStorage.getItem("CnetUdsEnabled")&&window.uds_sdk&&window.uds_sdk.addInterest(a,"registration"),u._trackCustomEvent("tap","submit_interest|"+o.interests.length),u.getUserData(function(e,t){p.ajax({data:{interests:o.interests.join(","),newsletters:o.newsletters.join(","),regId:t.registrationId},dataType:"json",type:"POST",url:l.user.urls.interests}).done(function(e){e.success?(u._close(),u._completeLogin()):u._displayError(e.error),0<o.newsletters.length&&u.loadBlueHornetId(),u.$modal.find("#authentication_csrf").val(e.csrf),n.remove()})});break;case"login":n.add(),p.ajax({data:i,dataType:"json",type:"POST",url:l.user.urls.login}).done(function(e){e.success?(u._close(),u._loadUserData(),u._completeLogin()):(u._displayError(e.error),"invalid.loginpassword"===e.error&&u._trackCustomEvent("enterData","password|wrong")),u.$modal.find("#authentication_csrf").val(e.csrf),n.remove()});break;case"forgot":u._close();break;case"username":n.add(),p.ajax({data:i,dataType:"json",type:"POST",url:l.user.urls.username}).done(function(e){e.success?(u._close(),u._loadUserData(),u._completeLogin()):(u._displayError(e.error),"inuse.userName"===e.error&&u._trackCustomEvent("enterData","username|taken")),n.remove()});break;default:s.log("Current step not recognized.")}},placeError:function(e,t){t.is(":checkbox, :radio")&&t.parent("label").length?e.insertBefore(t.parent("label")):e.insertBefore(t)},errorAdded:function(e,t){"email"===t.name?u._trackCustomEvent("enterData","email|invalid"):"validPassword"===t.name?u._trackCustomEvent("enterData","password|invalid"):"usernameSpecialCharacters"!==t.name&&"usernameCharacterLength"!==t.name||u._trackCustomEvent("enterData","username|invalid")}}))},loadBlueHornetId:function(){p.ajax({dataType:"json",type:"POST",url:"/user/authentication/bluehornet/"}).done(function(e){m&&e[0].contactId&&localStorage.setItem("v77_contact_id",e[0].contactId)})},_setupPageEvents:function(){var i=this;this.$document.on("keydown","[data-authentication]",function(e){13!==e.keyCode&&32!==e.keyCode||(e.preventDefault(),e=p(this).data("authentication"),i._setupEntryPoints(e))}),this.$document.on("tap","[data-authentication]",function(e){var t=p(this).data("authentication");i._setupEntryPoints(t)}),this.$document.on("tap",'[data-user-action="logout"]',function(e){"true"===p('[data-user-action="logout"]').attr("data-user-suppress-refresh")&&e.preventDefault(),!window.uds_sdk||m&&"true"!==localStorage.getItem("CnetUdsEnabled")?c.repopulateInterestDB(function(){i.logout()},!0):i.logout()})},_setupEntryPoints:function(i){var a=this;i.appId&&(a.appId=i.appId),"boolean"==typeof i.refresh&&(a.refresh=i.refresh),a.socialRegistration=!1,a._trackCustomEvent("tap","start_authentication"),a.getUserData(function(e,t){t.isLoggedIn&&i.requireUsername&&!t.userName?a._show("username"):a._show("start")})},_setupSocialEvents:function(e){var a=this;e.common.addEventListener(URS.events.AUTH_COMPLETE,function(e,t){var i;t.response.status.errors&&0<t.response.status.errors.length?0<=(i=p.map(t.response.status.errors,function(e,t){return e.applicationCode})).indexOf("invalid.noLink")?(a.socialRegistration=!0,a._show("facebookRegister"),a._trackCustomEvent("enterData","facebook_credentials|registration_started")):(a._displayError(i[0]),(0<=i.indexOf("required.email")||0<=i.indexOf("notallowed.socialLink"))&&a.$modal.find("._facebookRegister").addClass("failed"),0<=i.indexOf("inuse.userName")&&a._trackCustomEvent("enterData","username|taken")):(o.write(a.options.cookieUserRecognized,JSON.stringify({username:t.response.receipt.account.displayName,socialSite:t.response.socialSite}),{expires:365}),p.post("/user/social-login/",{email:t.response.receipt.account.emailAddress},function(e){"success"===e.status&&(a._loadUserData(),a.socialRegistration&&!r.isEspanol()?(d.trackCustomEvent("trackRegistration",p.extend(!0,{},a._baseTrackingData,{userid:l.tracking.data.userId,regService:"facebook",regDriver:a.entryPoints[a.appId],userState:"authenticated",userType:"registered",clickGenericText:"email_opt_in|"+a.termsChecked}),"confirmRegistration"),a._show("interests")):(a._close(),a._completeLogin()))},"json"))})},_show:function(t){var e,i=this;this.loading||(0<=["start","username"].indexOf(t)?(this.loading=!0,this.$modal&&this.$modal.remove(),p.ajax({url:l.user.urls.modal}).done(function(e){i.$modal=p(e.html).addClass("appId"+i.appId).appendTo(p("body")),i._setStep(t),i.$form=i.$modal.find("form"),n.process(i.$modal),i._setupModalEvents(),i.loading=!1,p(window).trigger("authenticationLoaded")})):(this.$form.data("formValidate").removeGlobalErrors(),e=100*(3*this.$modal.find("._"+this.step)[0].children.length+5),setTimeout(function(){i._setStep(t)},e),i._fadeOutStep()))},_updateDisplay:function(){var n=this,e=p("body");this.userData.isLoggedIn?(p("[data-user-var]").each(function(){var e=p(this),t=e.data("userVar"),i=e.data("userVarAttr"),a=n.userData[t];"userName"===t?13<(a=a||n.userData.displayName).length&&"mobile"==l.device?a=a.substr(0,13)+"...":25<a.length&&(a=a.substr(0,22)+"..."):"profileLink"===t&&(i="href",a=e.attr("data-template").replace("__username__",n.userData.userName?n.userData.userName.replace(/ /g,"+").toLowerCase():n.userData.registrationId)),a&&(i?e.attr(i,a):"avatar"===t?e.html('<img class="avatarImg" src="'+a+'" />'):e.text(a))}),e.addClass("is-logged-in").removeClass("not-logged-in")):(p("[data-user-var]").each(function(){var e=p(this),t=e.data("userVar"),i=e.data("userVarAttr"),a=n.userData[t];"userName"===t?a=" ":"profileLink"===t&&(i="href",a="#"),a&&(i?e.attr(i,a):"avatar"===t?e.find("img").remove():e.text(a))}),e.removeClass("is-logged-in").addClass("not-logged-in"),p(".loggedIn .navMenu").removeClass("is-expanded").addClass("is-collapsed"),p(".c-siteHeader").removeClass("is-expanded").addClass("is-collapsed"),p(".c-masthead").removeClass("is-expanded").addClass("is-collapsed"),p("body").removeClass("nav-open").addClass("nav-closed"))},_newsletterSubscribe:function(){var i=this;i.termsChecked&&i.getUserData(function(e,t){t.isLoggedIn?p.ajax({data:{newsletters:i.newsletterCodes[i.appId],regId:t.registrationId},dataType:"json",type:"POST",url:l.user.urls.newsletters}).done(function(e){e.success?s.log("Successfully subscribed user to eCodes: "+i.newsletterCodes[i.appId]):s.log("Failed to subscribe user to newsletters.")}):s.log("Cannot subscribe to newsletters: User must be logged in.")})},_checkForOpenLoginOnLoad:function(){"1"==e.getParam("openLogin")&&p("[data-authentication]").first().trigger("tap")},_trackCustomEvent:function(e,t){s.log("Track custom event: "+e),l.tracking.data,d.trackCustomEvent(e,p.extend(!0,{},this._baseTrackingData,{clickGenericText:t,regService:this.regService,regDriver:this.entryPoints[this.appId]}),"trackClick")}})}),define("fly/utils/data-selector-1.0",["jquery"],function(i){i.extend(i.expr[":"],{data:i.expr.createPseudo(function(t){return function(e){return!!i.data(e,t)}})})}),define("components/tabs-modal",["jquery","managers/tealium","managers/page-vars","version!fly/components/base","version!fly/utils/data-selector"],function(o,s,e){o.widget("cnet.tabsModal",o.fly.base,{options:{classOverlay:"loadingArea",classSelected:"selected",classOpen:"modalopen",closeModalSelector:'[data-item="close"]',enableDeselect:!1,enableEsc:!1,idOverlay:"bodyWrapper",notRoadshow:!1,selectorFocus:'[data-item="focus"]',tabSelector:'[data-item="trigger"]',closeOnScroll:!1},$currentTab:null,_baseTrackingData:{_pageTitle:e.tracking.data._pageTitle,siteSection:e.tracking.data.siteSection,pageType:e.tracking.data.pageType,siteEdition:e.tracking.data.siteEdition,siteType:e.tracking.data.siteType,siteHier:e.tracking.data.siteHier,brand:e.tracking.data.brand,_pageChannelType:e.tracking.data._pageChannelType},_create:function(){var e=this.options,t={},i=this;this._setup(),t["click "+e.tabSelector]="_handleClick",this._on(this.$element,t),this.$element.on("click",this.options.closeModalSelector,function(){i._hide(i.$currentTab)}),this.options.enableEsc&&this.$element.on("keydown",function(e){27===e.keyCode&&(e.preventDefault(),i._hide(i.$currentTab))})},_handleClick:function(e){var t=this.options,t=o(e.target).closest(t.tabSelector);e.preventDefault(),this.change(t)},_handleScroll:function(){this.$window.off("scroll.tabsModal"),this._hide(this.$currentTab)},_getContent:function(e){var t=e.data()||{},i=t.$content||[];return i.length||(t=t.target||e.attr("href"),i=o(t),e.data("$content",i)),i},_show:function(e){var t,i,a=this.options,n=this;!1!==this._trigger("show",null,{$tab:e})&&(this.$currentTab=e,t=this._getContent(e),o("html").addClass("scrollDisabled"),e.addClass(a.classSelected),t.addClass(a.classSelected),this._trigger("shown",null,{$tab:e,$content:t}),i="false"===e.attr("aria-expanded"),e.attr("aria-expanded",i),t.attr("aria-hidden",!i),this.showOverlay(),i=o.extend(n._baseTrackingData,{clickGenericText:n.$currentTab.data("clicktracking")+"|open"}),s.trackCustomEvent(n.$currentTab.data("eventName"),i,"trackClick"),setTimeout(function(){t.find(n.options.selectorFocus).focus()},300),a.closeOnScroll&&this.$window.on("scroll.tabsModal",this._handleScroll.bind(this)))},_hide:function(e){var t,i=this.options;!1!==this._trigger("hide",null,{$tab:e})&&(t=this._getContent(e),e.removeClass(i.classSelected),t.removeClass(i.classSelected),o("html").removeClass("scrollDisabled"),this._trigger("hidden",null,{$tab:e,$content:t}),i="false"===e.attr("aria-expanded"),e.attr("aria-expanded",i),t.attr("aria-hidden",!i),this.hideOverlay(),this.$currentTab&&(i=o.extend(this._baseTrackingData,{clickGenericText:this.$currentTab.data("clicktracking")+"|close"}),s.trackCustomEvent(this.$currentTab.data("eventName"),i,"trackClick")),this.$currentTab=null)},change:function(e){var t=this.options,i=this.$element.find(t.tabSelector+"."+t.classSelected);e.data(),e.hasClass(t.classSelected)?t.enableDeselect&&this._hide(i):(this._hide(i),this._show(e))},showOverlay:function(){var e=o("<div>",{id:this.options.idOverlay,class:this.options.classOverlay});(this.options.notRoadshow?o("#rbHeader"):o(".autoHeader")).addClass(this.options.classOpen),o("body").append(e);var t=this;e.on("click",function(){t.change(o(t.options.tabSelector+"."+t.options.classSelected,t.$element))})},hideOverlay:function(){o(".autoHeader").removeClass(this.options.classOpen),o("#rbHeader").removeClass(this.options.classOpen),o("#"+this.options.idOverlay).remove()}})}),define("components/site-header",["jquery","managers/client-storage","version!fly/managers/debug","managers/tealium","managers/page-vars","version!fly/components/base"],function(r,l,e,i,t){e=e.init("siteHeader"),r.widget("cnet.siteHeader",r.fly.base,{options:{classExpanded:"is-expanded",classCollapsed:"is-collapsed",classScreenRead:"-srOnly",selectorNav:".c-siteHeader",classLink:".menuList_link",selectorMenuContainer:'[data-item="menuContainer"]',storageName:"cnet_header_new_tag"},_baseTrackingData:{_pageTitle:t.tracking.data._pageTitle,siteSection:t.tracking.data.siteSection,pageType:t.tracking.data.pageType,siteEdition:t.tracking.data.siteEdition,siteType:t.tracking.data.siteType,siteHier:t.tracking.data.siteHier,brand:t.tracking.data.brand,_pageChannelType:t.tracking.data._pageChannelType},_create:function(){this._setup(),this._setupEvents()},_setupEvents:function(){var i=this,a=i.options,e=r(".search .navMenuItem"),t=this.$element.find('[data-item="menuItem"]'),n=this.$element.find(a.selectorMenuContainer),o=r(a.selectorNav),s=r(a.classLink);e.on("click",function(){setTimeout(function(){r("[data-search-input]").focus()},200)}),t.on("click",function(e){if(e.preventDefault(),r(e.currentTarget).closest(a.selectorMenuContainer).hasClass(a.classExpanded))r(e.currentTarget).closest(a.selectorMenuContainer).removeClass(a.classExpanded).addClass(a.classCollapsed),i._trackEvent("navClick",o.attr("section")+"|"+r(e.currentTarget).closest(a.selectorMenuContainer).attr("section")+"|close");else{for(var t=0;t<n.length;t++)n.eq(t).hasClass(a.classExpanded)&&n.eq(t).removeClass(a.classExpanded).addClass(a.classCollapsed);r(e.currentTarget).closest(a.selectorMenuContainer).removeClass(a.classCollapsed).addClass(a.classExpanded),i._trackEvent("navClick",o.attr("section")+"|"+r(e.currentTarget).closest(a.selectorMenuContainer).attr("section")+"|open"),"reviews"===r(e.currentTarget).closest(a.selectorMenuContainer).attr("section")&&(3<=(e=l.read(i.options.storageName))?i.$element.find("[data-new-flag]").addClass("hidden"):e?l.write(i.options.storageName,parseInt(e,10)+1):l.write(i.options.storageName,1))}}),t.on("keydown",function(e){switch(e.which){case 38:e.preventDefault(),r(e.currentTarget).closest(a.selectorMenuContainer).removeClass(a.classExpanded).addClass(a.classCollapsed);break;case 32:e.preventDefault(),r(e.currentTarget).trigger("click");break;case 40:if(e.preventDefault(),"searchMenuItem"===e.currentTarget.id)r(e.currentTarget).trigger("click");else{for(var t=0;t<n.length;t++)n.eq(t).hasClass(a.classExpanded)&&n.eq(t).removeClass(a.classExpanded).addClass(a.classCollapsed);r(e.currentTarget).closest(a.selectorMenuContainer).removeClass(a.classCollapsed).addClass(a.classExpanded)}break;case 27:e.preventDefault();for(var i=0;i<n.length;i++)n.eq(i).hasClass(a.classExpanded)&&n.eq(i).removeClass(a.classExpanded).addClass(a.classCollapsed)}}),r(this.$element).on("keydown",function(e){9===e.keyCode&&r(e.currentTarget).addClass(a.classScreenRead)}),r(this.$element).on("click",function(e){r(e.currentTarget).removeClass(a.classScreenRead)}),r(this.$element.nextAll()).click(function(){for(var e=0;e<n.length;e++)n.eq(e).hasClass(a.classExpanded)&&n.eq(e).removeClass(a.classExpanded).addClass(a.classCollapsed)}),r('[data-item="logoContainer"').click(function(){for(var e=0;e<n.length;e++)n.eq(e).hasClass(a.classExpanded)&&n.eq(e).removeClass(a.classExpanded).addClass(a.classCollapsed)}),s.on("click",function(e){i._trackEvent("navLinkClick",o.attr("section")+"|"+r(e.currentTarget).closest(a.selectorMenuContainer).attr("section")+"|"+r(e.currentTarget).text().replace(" ","-"))})},_trackEvent:function(e,t){i.trackCustomEvent(e,r.extend(this._baseTrackingData,{clickGenericText:t}),"trackClick")}})}),define("components/auto-suggest",["jquery","version!fly/managers/debug","managers/tealium","managers/page-vars","version!fly/components/base"],function(o,n,a,e){n=n.init("autoSuggest"),o.widget("cnet.autoSuggest",o.fly.base,{options:{limit:null,classMenuShow:"active",classOpen:"open",classReady:"ready",classSelected:"selected",selectorMenu:".menuWrapper",selectorSuggestions:"li:not(.hed)",url:"/autosuggest/xhr/",showLimit:10,clickable:!1},suggestXhr:null,$searchBox:null,$submitButton:null,_didTrackEnterSubmit:!1,_baseTrackingData:{_pageTitle:e.tracking.data._pageTitle,siteSection:e.tracking.data.siteSection,pageType:e.tracking.data.pageType,siteEdition:e.tracking.data.siteEdition,siteType:e.tracking.data.siteType,siteHier:e.tracking.data.siteHier,brand:e.tracking.data.brand,_pageChannelType:e.tracking.data._pageChannelType},_create:function(){this._setup(),this.$searchBox=this.$element.find("input"),this.$submitButton=this.$element.find('[type="submit"]'),this.$siteHeader=o("#rbHeader"),this._setupEvents(),this._setupTracking()},_setupEvents:function(){var a=this;this.$element.on("submit",function(e){var t=o(a.options.selectorSuggestions,a.$element).filter("."+a.options.classSelected),i=t.text(),t=t.attr("href");t?(e.preventDefault(),window.location.href=t):i&&a.$searchBox.val(i)}),this.$element.on("mousedown",this.options.selectorSuggestions,function(e){var t=o(this).attr("href");t?window.location=t:(""!==(t=o(a.options.selectorSuggestions,a.$element).filter("."+a.options.classSelected)).text()&&t.removeClass(a.options.classSelected),a._submitAutoSuggest(e))}),this.$searchBox.on("focusout",function(e){0==o(e.relatedTarget).closest(".menuWrapper").length&&a._hideAutoSuggest()}),this.$searchBox.on("keyup",function(e){37<=e.which&&e.which<=40||a._doAutoSuggest()}),this.$searchBox.on("keydown",function(e){37<=e.which&&e.which<=40&&a._doArrowKey(e)}),o('[data-component="siteHeader"]').on("siteheadersectionchange",function(){a._updateSmartSearchTracking()}),o("#searchMenu [data-searchoverlay]").on("click",function(){a.$siteHeader.hasClass("showSearch")&&a.$siteHeader.removeClass("showSearch")})},_doAutoSuggest:function(){var e,t=this,i=t.options;t.suggestXhr&&4!=t.suggestXhr.readyState&&0!==t.suggestXhr.readyState&&t.suggestXhr.abort(),""!==t.$searchBox.val()?(e=i.url+"?query="+t.$searchBox.val(),i.limit&&(e=e+"&limit="+i.limit),i.showLimit&&(e=e+"&showLimit="+i.showLimit),n.log("AutoSuggestXHR: ",e),this.$submitButton.addClass(this.options.classReady),this.$searchBox.addClass(this.options.classReady),!1!==this.options.clickable||this.$siteHeader.hasClass("showSearch")||this.$siteHeader.addClass("showSearch"),t.suggestXhr=o.ajax({url:e,dataType:"json",context:document.body}).done(function(e){t.$element.addClass(i.classMenuShow);e=o(o.parseHTML(o.trim(e.html)));0<o(i.selectorSuggestions,e).length?(0===o(i.selectorMenu,t.$element).length?e.appendTo(t.$element):o(i.selectorMenu,t.$element).replaceWith(e),t._setupAdditionalResults()):(t._hideAutoSuggest(),o(i.selectorMenu,t.$element).html(""))}).fail(function(){t._hideAutoSuggest()})):(t._hideAutoSuggest(),o(i.selectorMenu,t.$element).html(""),this.$siteHeader.hasClass("showSearch")&&this.$siteHeader.removeClass("showSearch"),this.$submitButton.removeClass(this.options.classReady),this.$searchBox.removeClass(this.options.classReady))},_doArrowKey:function(e){var t=o(this.options.selectorSuggestions,this.$element),i=t.filter("."+this.options.classSelected),a=t.index(i);38===e.which?(i.removeClass(this.options.classSelected),(a<=0?t.last():t.eq(a-1)).addClass(this.options.classSelected)):40===e.which?(i.removeClass(this.options.classSelected),(a<0||a===t.length-1?t.first():t.eq(a+1)).addClass(this.options.classSelected)):37!==e.which&&39!==e.which||0<(i=i.closest("[data-additional-results]")).length&&this._toggleAdditionalResults(this.$element.find("[data-additional-results]"),i,39===e.which)},_hideAutoSuggest:function(){var e=this.options;this.$element.removeClass(e.classMenuShow)},_updateSmartSearchTracking:function(){var e,t=o("#searchTab [data-searchtracking]");0<t.length&&(e=o("#rbHeader > nav[section]").attr("section")?o("#rbHeader > nav[section]").attr("section"):"",t.attr("section",e))},_submitAutoSuggest:function(e){var t=o(e.target),e=t.text();a.trackSuggestedSearch({searchTerm:e,dwLinkTag:"search|suggestedSearch|"+t.prevAll().length}),this.$searchBox.val(e),this.$element.submit()},_setupAdditionalResults:function(){var a=this,n=this.$element.find("[data-additional-results]");n.each(function(e,t){var i=o(t);i.find('[data-auto-suggest-item="trigger"]').on("click",function(){a._toggleAdditionalResults(n,i)})})},_toggleAdditionalResults:function(e,t,i){var a=this,n=t.find('[data-auto-suggest-item="container"]');n.html()?t.toggleClass(function(e,t,i){return i||n.find("."+a.options.classSelected).removeClass(a.options.classSelected),a.options.classOpen},i):!1!==i&&o.ajax({dataType:"json",type:"GET",url:t.data("additionalResults")}).done(function(e){e.html&&(n.html(e.html),t.addClass(a.options.classOpen))}),e.not(t).removeClass(this.options.classOpen)},_setupTracking:function(){n.log("Setting up Smart Search tracking");var t=this,e=t.$element,i=e.find('input[type="search"]'),a=e.find(".submit");o('[data-target="#search"]'),i.on("keydown.smartSearchTracking",function(e){13===e.keyCode&&(t._trackSubmit("enter"),t._didTrackEnterSubmit=!0)}),a.on("click.smartSearchTracking",function(){t._didTrackEnterSubmit||t._trackSubmit("button")}),e.on("click",'[data-smartsearch="seeall"]',function(){t._didTrackEnterSubmit||t._trackSubmit("seeall")}),e.on("click.smartSearchTrackingMakeAndModel",".makesAndModels a",function(e){t._trackMakeModelClick(o(this))}),e.on("click.smartSearchTrackingContent",".results a",function(e){t._trackContentLinkClick(o(this))})},_trackSubmit:function(e){n.log("Track submit with "+e);var t=this.$element.find('input[type="search"]').val();n.log("Typed text: "+t);var i="search|submit|"+e;this.$element.find("button[data-smartsearch]").attr("data-smartsearch")&&(i="brand_nav|"+(this.$siteHeader.hasClass("fixed")?"popup":"top")+"|search|typed|"+e),a.trackCustomEvent("searchSubmit",o.extend(this._baseTrackingData,{_searchTerm:t.toLowerCase(),clickGenericText:i}),"trackClick")},_trackMakeModelClick:function(e){n.log("Track make and model click");var t=e.text(),e=(o('.autoHeader input[type="search"]').val(),"search|suggested"+e.attr("data-category")+"|"+(e.parent().index()+1)),e=o.extend(this._baseTrackingData,{searchTerm:t.toLowerCase(),clickGenericText:e});a.trackCustomEvent("searchResultClick",e,"trackClick")},_trackContentLinkClick:function(e){n.log("Track content link click");var t=o('.autoHeader input[type="search"]').val(),e="search|suggestedContent|"+(e.parent().index()+1);a.trackCustomEvent("searchResultClick",o.extend(this._baseTrackingData,{searchTerm:t,clickGenericText:e}),"trackClick")}})}),define("components/lazyload-component",["jquery","version!fly/managers/debug","version!fly/managers/components","version!fly/components/base"],function(i,t,a){t=t.init("lazyloadComponent"),i.widget("cnet.lazyloadComponent",i.fly.base,{options:{endpoint:"",slug:"",view:"",familyName:"",typeName:"",limit:""},_create:function(){this._setup();var e=this.options.endpoint+"?endpoint=%2Fapi%2Fcomponent%2Fcomponent%2F"+this.options.slug+"&view="+this.options.view+"&familyName="+this.options.familyName+"&typeName="+this.options.typeName;""!==this.options.limit&&(e+="&limit="+this.options.limit),t.log("URL: ",e),i.ajax({url:e,dataType:"json",context:{context:this}}).done(this._onSuccess).fail(this._onError)},_onSuccess:function(e){"use strict";var t=this.context.$element,e=i(i.parseHTML(i.trim(e.component.html)));t.append(e),t.removeClass("hide"),t.addClass("show"),a.process(t)},_onError:function(){}})}),define("components/mobile-footer-link",["jquery","version!fly/managers/debug","managers/client-storage","utils/cookie","version!fly/components/base"],function(e,t,i,a){t=t.init("mobileFooterLink"),e.widget("cnet.mobileFooterLink",e.fly.base,{options:{},_create:function(){this._setup(),i.read("mobileRedirect")&&(this.$element.append('<li><a class="view">Switch to mobile</a></li>'),this._setEvent())},_setEvent:function(){this.$element.find("a.view").on("click",function(){a.write("fly_device","mobile"),i.erase("mobileRedirect"),window.location.reload(!0)})}})}),define("fly/components/modal-1.0",["jquery","version!fly/components/base"],function(n){var o=n.support.touch?"vclick":"click";n.widget("fly.modal",n.fly.base,{options:{content:null,position:"absolute",classModal:"modal",classBackdrop:"modal-backdrop",classShow:"show",classFixed:"fixed",enableKeyEvents:!0,openOnInit:!1,template:null},$modal:null,$backdrop:null,$body:null,isOpen:!1,eventData:{},_create:function(){var e=this.options,t="fixed"===e.position?" "+e.classFixed:"",i={},a={};this._setup(),this.$modal=this.$element.addClass(e.classModal+t),this.$backdrop=n("<div>").addClass(e.classBackdrop+t),this.$body=n(document.body),this.top=parseInt(this.$modal.css("top"),10),e.content&&this.setContent(e.content),this.eventData={$modal:this.$modal,$backdrop:this.$backdrop},i[o]="_handleClose",a[o+' [data-close="modal"]']="_handleClose",this._on(this.$backdrop,i),this._on(this.$modal,a)},_init:function(){this.options.openOnInit&&this.open()},_handleKeyboard:function(e){27==e.keyCode&&this.close()},_handleClose:function(e){e.preventDefault(),this.close()},open:function(){var e=this.options;this.isOpen||!1!==this._trigger("open",null,this.eventData)&&(this.$backdrop.addClass(e.classShow).appendTo(this.$body),this.$modal.addClass(e.classShow).appendTo(this.$body),this.position(),e.enableKeyEvents&&this._on(this.$document,{keyup:"_handleKeyboard"}),this.isOpen=!0,this._trigger("opened",null,this.eventData))},close:function(){var e=this.options;this.isOpen&&!1!==this._trigger("close",null,this.eventData)&&(this.$backdrop.removeClass(e.classShow),this.$modal.removeClass(e.classShow),this._off(this.$document,"keyup"),this.isOpen=!1,this._trigger("closed",null,this.eventData))},setContent:function(e){var t=this.options,i=this,e=n(e);e.hasClass(t.classModal)&&(e.removeClass(t.classModal),t=e.prop("attributes"),n.each(t,function(){"class"===this.name?i.$modal.addClass(this.value):i.$modal.attr(this.name,this.value)}),e=e.children()),this.$modal.empty().append(e),this._trigger("contentSet",null,n.extend({},this.eventData,{$modal:this.$modal,$content:e}))},position:function(){var e=this.options,t=this.$window.height(),t=isNaN(this.top)?(t-this.$modal.outerHeight())/3:this.top;t<20&&(t=20),"absolute"==e.position&&(t+=this.$window.scrollTop(),this.$backdrop.css({height:this.$document.height()})),this.$modal.css({top:t}),this._trigger("positioned",null,{$modal:this.$modal})},_destroy:function(){this.$backdrop.remove()}}),n(document).on(o+".modal-api.data-api",'[data-open="modal"]',function(e){var t=n(this),i=t.data(),a=i.$modal;e.preventDefault(),a||(a=n(i.target||t.attr("href")),t.data("$modal",a)),a.length&&a.modal().modal("open")})}),define("components/global-modal",["jquery","managers/tealium","managers/page-vars","version!fly/managers/components","version!fly/components/modal"],function(s,i,e,n){s.widget("cnet.globalModal",s.fly.modal,{options:{modalTemplate:'<svg class="close" data-close="modal"><use xlink:href="#close" /></svg>{{content}}',container:null,setContentOnInit:!0,trackModal:null},_baseTrackingData:{_pageTitle:e.tracking.data._pageTitle,siteSection:e.tracking.data.siteSection,pageType:e.tracking.data.pageType,siteEdition:e.tracking.data.siteEdition,siteType:e.tracking.data.siteType,siteHier:e.tracking.data.siteHier,brand:e.tracking.data.brand,_pageChannelType:e.tracking.data._pageChannelType},_create:function(){var t=this,e=null;this.options.setContentOnInit||(e=this.options.content,this.options.content=null),this._super(),this.options.setContentOnInit||(this.options.content=e,this.$element.on("modalopen",function(){var e;!t.options.setContentOnInit&&t.options.content&&(t.setContent(t.options.content),t.options.trackModal)&&(e=s.extend({},t._baseTrackingData,{clickGenericText:t.options.trackModal+"|open"}),i.trackCustomEvent("modalTracking",e,"trackClick"))})),this.$body=this.options.container?s(this.options.container):this.$body},close:function(){var e;this._super(),this.options.trackModal&&(e=s.extend({},this._baseTrackingData,{clickGenericText:this.options.trackModal+"|close"}),i.trackCustomEvent("modalTracking",e,"trackClick"))},setContent:function(e){var t,i=this.options,a=this;"string"==typeof e?(t=s(e),this.$modal.html(i.modalTemplate.replace("{{content}}",null!=t.context?t.html():e))):(e.hasClass(i.classModal)&&(e.removeClass(i.classModal),t=e.prop("attributes"),s.each(t,function(){"class"===this.name?a.$modal.addClass(this.value):a.$modal.attr(this.name,this.value)}),e=i.modalTemplate.replace("{{content}}",e.html())),this.$modal.empty().append(e),this._trigger("contentSet",null,s.extend({},this.eventData,{$modal:this.$modal,$content:e}))),n.process(this.$element)},position:function(){var e,t,i,a,n=this.options,o=this.$body.is(s(document.body))?(e=this.$window.height(),t=this.$window.scrollTop(),i=this.$document.height(),a=this.$window.width()/2,this.$window.scrollLeft()):(e=this.$body.height(),t=this.$body.scrollTop(),i=e,a=this.$body.width()/2,this.$body.scrollLeft());(e=isNaN(this.top)?(e-this.$modal.outerHeight())/2:this.top)<20&&(e=20),"absolute"==n.position&&(e+=t,this.$backdrop.css({height:i})),this.$modal.css({top:e}),this._trigger("positioned",null,{$modal:this.$modal}),this.$element.css("left",a+o-this.$element.outerWidth()/2)}})}),define("fly/components/modal-iframe-1.0",["jquery","version!fly/utils/object-helper","version!fly/utils/url-helper","version!fly/components/modal","version!fly/components/loading"],function(i,e,t){i.support.touch,i.widget("fly.modalIframe",i.fly.modal,{options:{url:null,requestData:{},messages:{},loader:{disabled:!1}},messenger:null,_create:function(){this._super(),this._setupLoader()},_setupLoader:function(){var e=this;this.loader=i.fly.loading(i.extend(this.options.loader,{shown:function(){e.$element.addClass(e.loader.options.classes.loading)},hidden:function(){e.$element.removeClass(e.loader.options.classes.loading)}})),this.loader.$element.appendTo(this.$element)},open:function(){this.isOpen||(this.loader.add(),this.loadContent(),this._super())},_getUrl:function(){var e=this.options,t=e.url;return t=e.requestData?t+(0<t.indexOf("?")?"&":"?")+i.param(e.requestData):t},loadContent:function(){var e=this.options,t=this;this.messenger=this.$element.iframeMessenger({remoteUrl:this._getUrl(),receivableMessages:i.extend({},e.messages,{ready:function(){t._trigger("iframeReady"),t.loader.remove()},closeModal:function(){t.close()},scroll:function(e){e=t.$element.offset().top+e.offset;e-=t.$window.height()/6,i("html, body").animate({scrollTop:e},"fast")}})})}})}),define("components/modal-iframe",["jquery","version!fly/managers/debug","version!fly/components/modal-iframe","components/loading"],function(i,e){e=e.init("modalIframe"),i.widget("fly.modalIframe",i.fly.modalIframe,{options:{modalTemplate:'<svg class="close" data-close="modal"><use xlink:href="#close" /></svg>{{content}}',loader:{classes:{loading:"loadingCircle"}}},$body:null,_create:function(){this._super(),this.$body=i(document.body),this.setContent('<a class="close" data-close="modal"></a>'),this._setupLoader()},_setupLoader:function(){var e=this;this.loader=i.cnet.loading(i.extend(this.options.loader,{shown:function(){e.$element.addClass(e.loader.options.classes.loading)},hidden:function(){e.$element.removeClass(e.loader.options.classes.loading)}})),this.loader.$element.appendTo(this.$element)},open:function(){this.isOpen||(this.loader.add(),this.loadContent(),this._super(),this.centerHorizontally())},loadContent:function(){var e=this.options,t=this;this.messenger=this.$element.iframeMessenger({remoteUrl:this._getUrl(),receivableMessages:i.extend({},e.messages,{ready:function(){t._trigger("iframeReady"),t.loader.remove(),setTimeout(t.centerHorizontally.bind(t),250)},closeModal:function(){t.close()}})})},centerHorizontally:function(){this.$element.css("margin-left",-this.$element.width()/2)},position:function(){var e=this.options,t=this.$window.height(),t=isNaN(this.top)?(t-this.$modal.outerHeight())/3:this.top;t<20&&(t=20),"absolute"==e.position&&(t+=this.$window.scrollTop(),this.$backdrop.css({height:this.$document.height()})),this.$modal.css({top:t}),this._trigger("positioned",null,{$modal:this.$modal})}})}),define("managers/user",["jquery","components/authentication"],function(e){return e.cnet.authentication()}),define("translations/modal-email",["managers/edition"],function(e){return e.getTranslation({en:{confirmation:"Your e-mail was sent successfully!",incorrectCaptcha:"The response you entered was incorrect.  Please try again.",notice:"Keep your friends up to date on your wish list.",messageA:"Click the",messageB:"to share the products you want with your friends.",ok:"OK, Got it"},es:{confirmation:"Tu email fue enviado exitosamente!",incorrectCaptcha:"La Captcha no es correcta. Por favor, intÃ©ntalo otra vez.",notice:"MantÃ©n a tus amigos informados sobre tu lista.",messageA:"Haz clic en el",messageB:"para que tus amigos vean los productos que quieres.",ok:"De acuerdo"}})}),define("components/modal-email",["jquery","version!fly/managers/debug","version!fly/managers/components","managers/edition","managers/user","translations/modal-email","components/global-modal","components/loading","version!fly/components/form-validate"],function(o,e,t,i,a,n){e=e.init("modalEmail"),o.widget("cnet.modalEmail",o.cnet.globalModal,{options:{emailType:"friend",pageTitle:function(){return document.title},pageUrl:function(){return window.location.href},recipientId:null,recipientName:"",messageThankYou:n.confirmation},emailTypes:{friend:{url:{us:"/email/friend/",es:"/es/email/friend/"},requireUsername:!1},friendRoadshow:{url:{us:"/email/friend/roadshow/",es:"/es/email/friend/roadshow/"},requireUsername:!1},member:{url:{us:"/email/member/",es:"/es/email/member/"},requireUsername:!0},editor:{url:{us:"/email/editor/",es:"/es/email/editor/"},requireUsername:!1},flag:{url:{us:"/email/flag/",es:"/es/email/flag/"},requireUsername:!0},video:{url:{us:"/email/video-feedback/",es:"/es/email/video-feedback/"},requireUsername:!1}},errorMessages:{"cnet.notsent":"There was an error attempting to send your e-mail.  Please try again.","cnet.nousername":"You must have a valid username to send an e-mail.","cnet.notloggedin":"You must be logged in to send an e-mail.","cnet_recaptcha.incorrect-captcha-sol":n.incorrectCaptcha,"cnet_recaptcha.missing-input-response":n.incorrectCaptcha},_create:function(){this._super(),this.setContent('<a class="close" data-close="modal"></a>'),this._setupLoader()},_setupLoader:function(){this.loader=o.cnet.loading(),this.loader.$element.addClass("modal-content")},open:function(){var t=this,i=this.emailTypes[this.options.emailType];this.isOpen||(i.requireUsername?a.hasAccess({requireUsername:!0,nextAction:function(e){t._openEmailType(i)}}):this._openEmailType(i),t._super())},_openEmailType:function(e){var a=this;this.setContent(""),this.loader.$element.appendTo(this.$element),this.loader.add(),o.ajax({url:e.url[i.getEdition()],data:this.options.recipientId?{regId:this.options.recipientId}:null,dataType:"text"}).done(function(e){a.loader.remove(),a.setContent(e),a.position(),a._setupEvents(),o("[data-email-var]",a.$element).each(function(e,t){var i=o(t),t=i.data("emailVar");"pageTitle"===t?i.text(a.options.pageTitle):"recipientName"===t&&i.text(a.options.recipientName)}),o('input[name="emailFriend[pageTitle]"]',a.$element).val(a.options.pageTitle);e="string"==typeof a.options.pageUrl?a.options.pageUrl:a.options.pageUrl();o('input[name="emailFriend[pageUrl]"]',a.$element).val(e),t.process(a.$element)}).always(function(){a.loader.remove()})},_setupEvents:function(){var t=this,i=o("form",this.$element),a=o('[data-component="recaptcha"], .g-recaptcha',t.$element),n=o('[data-email-var="error"]',i);i.formValidate({success:function(e){e.preventDefault(),o.ajax({dataType:"json",type:"POST",url:i.attr("action"),data:i.serialize()}).done(function(e){"success"===e.status?(i.html(t.options.messageThankYou),t.position()):(e.errors?n.text(e.errors[0]):n.text(t.errorMessages[e.message]),a.recaptcha("reload"))})}})}}),o(document).on("click.modalEmail-api.data-api",'[data-open="modalEmail"]',function(e){var t=o(this),i=t.data().$modal;e.preventDefault(),i?i.open():(i=t.data("modalEmailOptions")||t.dataPrefix("modalEmail"),t.data("$modal",o.cnet.modalEmail(o.extend(i,{openOnInit:!0,destroy:function(){t.data("$modal",null)}}))))})}),define("managers/events",["jquery","version!fly/managers/debug"],function(e,t){t=t.init("events");var n={};return{publish:function(e,t){for(var i=0;i<e.length;i++)if(n[e[i]]&&n[e[i]][t])for(var a=0;a<n[e[i]][t].length;a++)n[e[i]][t][a]()},subscribe:function(e,t){for(var i in t)if(t.hasOwnProperty(i))for(var a in n[i]=n[i]||{},t[i])t[i].hasOwnProperty(a)&&(n[i][a]=n[i][a]||[],n[i][a].push(e[t[i][a]].bind(e)))}}}),define("components/uds-sdk",["jquery","managers/user","managers/tealium","managers/events","version!fly/managers/debug","managers/client-storage","@firebase/app","@firebase/auth","@firebase/firestore","@firebase/functions"],function(a,t,n,d,c,e,l){let u=void 0,p=void 0,h=void 0,m=!1;c=c.init("uds-sdk");const i=e.localStorageSupported();var g={enabled:void 0,_optInInterests:[],_firebaseConfig:{apiKey:void 0,authDomain:void 0,projectId:void 0},_unsubListener:void 0,_signInFunctionQueue:[],_snapshotListenerStatus:"uninitialized",options:{eventChannel:["interestChange"]},_collections:{registered:{users:void 0,interests_summary:void 0},anonymous:{users:void 0,interests_summary:void 0}},_authStatus:{localPersistenceChecked:!1,complete:void 0,type:void 0,userCollection:void 0,interestsSummaryCollection:void 0,notifyLogin:!1},_platform:void 0,_environment:void 0,activeInterests:{},_init:function(){if(i&&this._enableUDS()){if(this.enabled=!0,window.CnetPageVars.personalization&&window.CnetPageVars.personalization.firebase&&window.CnetPageVars.personalization.firebase.config&&window.CnetPageVars.personalization.functions){if(e=window.CnetPageVars.personalization.firebase.config,l.initializeApp(e),u=l.firestore(),window.CnetPageVars.personalization.firestore&&window.CnetPageVars.personalization.firestore.settings&&u.settings(window.CnetPageVars.personalization.firestore.settings),p=l.functions(),window.CnetPageVars.personalization.functions.override&&window.CnetPageVars.personalization.functions.origin&&p.useFunctionsEmulator(window.CnetPageVars.personalization.functions.origin),!window.CnetPageVars.personalization)return void c.log("Invalid UDS configuration");if(!window.CnetPageVars.personalization.functions)return void c.log("Invalid UDS functions configuration");if(m=!0,window.CnetPageVars.personalization.firestore&&window.CnetPageVars.personalization.firestore.collections){var e=window.CnetPageVars.personalization.firestore.collections;if(!(e.registered&&e.registered.users&&e.registered.interests_summary&&e.anonymous&&e.anonymous.users&&e.anonymous.interests_summary))return void c.log("Invalid UDS collection configuration");this._collections.registered.users=e.registered.users,this._collections.registered.interests_summary=e.registered.interests_summary,this._collections.anonymous.users=e.anonymous.users,this._collections.anonymous.interests_summary=e.anonymous.interests_summary}window.CnetPageVars.personalization.base&&(this._platform=window.CnetPageVars.personalization.base.platform,this._environment=window.CnetPageVars.personalization.base.environment),l.auth().onAuthStateChanged(function(e){this._localPersistenceAuth()}.bind(this)),c.log("Firestore loaded")}else c.error("Firebase SDK Failed to load");t.$element.on("userhasloggedin",function(e,t){this._regAuth(t,!0)}.bind(this)),a(window).on("anonuserloaded",function(e,t,i){this._anonAuth(!0)}.bind(this)),a(window).on("userhasexpired",function(e,t,i){this._anonAuth(!0)}.bind(this))}else this.enabled=!1},processView:function(n,o,s){let r=this;if(null==o&&(o="view-add"),null==s&&(s=!0),!(n=Array.isArray(n)?a.extend(!0,[],n):[n=a.extend(!0,{},n)]).length)return new Promise(function(e){c.warn("Empty array passed in to processView"),e("Empty array passed in to processView")});if(u||l.apps&&1<=l.apps.length&&(u=l.apps[0].firestore()),!this._authStatus.complete){if(this._signInFunctionQueue){c.warn("Trying to add view but user not signed into firebase. Adding view to sign in queue");let e={functionName:"processView"};e.views=n,e.event=o,e.shouldFireTracking=s,this._signInFunctionQueue.push(e)}return new Promise(function(e){e("View not added to firestore, current user is not the signed in user")})}let i={};if(n.forEach(function(e){var t="cnet_"+e.edition;i[t]?i[t].push(e):i[t]=[e]}),1<Object.keys(i).length)return c.warn("Multiple site edition combinations passed in on views to be added. Splitting on site-edition and reprocessing seperated lists"),Object.keys(i).forEach(function(e){r.processView(i[e],o,s)}),new Promise(function(e){e("Multiple site edition combinations passed in on views to be added. Splitting on site-edition and reprocessing seperated lists")});if(n.forEach(function(e){r._normalizeView(e)}),"view-add"===o){if(h&&h.content_entity_id===n[0].content_entity_id)return c.warn("TRYING TO ADD A VIEW FOR THE SAME PIECE OF CONTENT MULTIPLE TIMES ON ONE PAGE VIEW: "+JSON.stringify(n[0])),new Promise(function(e){e("TRYING TO ADD A VIEW FOR THE SAME PIECE OF CONTENT MULTIPLE TIMES ON ONE PAGE VIEW: "+JSON.stringify(n[0]))});h=n[0]}return new Promise(function(i,a){r._getAirshipChannelId().then(function(e){const t={event:o,site:"cnet",edition:n[0].edition,views:n,channel_id:e,platform:r._platform,environment:r._environment,should_fire_tracking:s};"anonymous"===r._authStatus.type&&(t.anon_id=r._getUserId());e=JSON.stringify(t);p.httpsCallable("viewAddRequestedProxy")(e).then(function(e){c.log(e),i(e)}).catch(function(e){e.message?(c.log(e.message),a(e.message)):a(e)})})})},addInterest:function(n,o,s){const r=this;if(null==s&&(s=!0),0===(n=Array.isArray(n)?a.extend(!0,[],n):[n=a.extend(!0,{},n)]).length)return c.warn("Not processing request to add interests. Empty interest array passed."),new Promise(function(e){e("Not processing request to add interests. Empty interest array passed.")});if(!m)return new Promise(function(e,t){e("Explicit Interest not added, invalid UDS configuration")});if(!this._authStatus.complete){if(c.warn("Trying to add interests but user not signed in to firebase. Adding intrerest to sign in queue"),this._signInFunctionQueue){let e={functionName:"addInterest"};e.interests=n,e.event=o,e.shouldFireTracking=s,this._signInFunctionQueue.push(e)}return new Promise(function(e,t){e("Explicit Interest not added to firestore, current user is not the signed in user")})}let i={};if(n.forEach(function(e){var t="cnet_"+e.edition;i[t]?i[t].push(e):i[t]=[e]}),1<Object.keys(i).length)return c.warn("Multiple site edition combinations passed in on interests to be added. Splitting on site-edition and reprocessing seperated lists"),Object.keys(i).forEach(function(e){r.addInterest(i[e],o,s)}),new Promise(function(e){e("Multiple site edition combinations passed in on interests to be added. Splitting on site-edition and reprocessing seperated lists")});if("registration"===o&&"anonymous"===this._authStatus.type){if(c.warn("Trying to add interest to anon user, even though interest should go to signed in user. Adding interest to sign in queue"),this._signInFunctionQueue){let e={functionName:"addInterest"};e.interests=n,e.event=o,e.shouldFireTracking=s,this._signInFunctionQueue.push(e)}return new Promise(function(e,t){e("Explicit Interest not added to firestore, trying to add registration event to anon user")})}const t=this._getUserId();if("opt-in"===o){if("uninitialized"===r._snapshotListenerStatus){if(c.warn("Trying to add opt-in interests but snapshot listener not configured yet. Adding to sign in queue"),this._signInFunctionQueue){let e={functionName:"addInterest"};e.interests=n,e.event=o,e.shouldFireTracking=s,this._signInFunctionQueue.push(e)}return new Promise(function(e,t){e("Adding interest add to sign in queue, trying to add opt-in event before snapshot listener hooked up.")})}var e=n.filter(function(e){return!g._optInInterests.includes(e.interest_id)});if(0===e.length)return c.log("Already sent opt-in events for user "+t+". Not sending again"),new Promise(function(e){e("Already sent opt-in event interest for user "+t+". Not sending again")});n=e}return n.forEach(function(e){delete e.anon_id,delete e.urs_id,delete e.user_id,"roadshow"===n.site&&(n.site="cnet"),e.should_fire_tracking=!1}),new Promise(function(i,a){r._getAirshipChannelId().then(function(e){const t={site:"cnet",event:o,edition:n[0].edition,interests:n,channel_id:e,platform:r._platform,environment:r._environment};"anonymous"===r._authStatus.type&&(t.anon_id=r._getUserId());e=JSON.stringify(t);p.httpsCallable("interestAddRequestedProxy")(e).then(function(e){if(c.log(e),!s)return i(e);if("registration"===o){const i=n.map(function(e){return e.interest_name}).join("|");g._trackEvent("tap","submit_interest|broad_interest",i)}else n.forEach(function(e){var t=("follow"===e.action?"add":"remove")+"_interest|"+("video"===e.type?"video_series":e.type)+"_interest";g._trackEvent("video"===o?"background":"tap",t,e.interest_name)});i(e)}).catch(function(e){e.message?(c.log(e.message),a(e.message)):a(e)})})})},_enableUDS:function(){let e=localStorage.getItem("CnetUdsEnabled"),t=parseInt(localStorage.getItem("CnetUdsVersion"));return isNaN(t)&&(t=0),6===t?"true"===e:"true"===e||Math.random()<=1?(localStorage.setItem("CnetUdsEnabled","true"),localStorage.setItem("CnetUdsVersion",6..toString()),!0):(localStorage.setItem("CnetUdsEnabled","false"),localStorage.setItem("CnetUdsVersion",6..toString()),!1)},_notifyLogin:function(e,t){const i=this;return m?(this._authStatus.notifyLogin=!1,new Promise(function(e,t){i._getAirshipChannelId().then(function(e){var t=i._getAnon();i._notifyLoginStatusChange(e,t,"login","loginNotify")}).catch(function(e){c.error("Error when trying to get user channel from airship. "+e),t(e)})})):new Promise(function(e,t){t("Login event not submitted, invalid UDS configuration")})},_notifyLogout:function(){const e=this;return m?new Promise(function(t,i){e._getAirshipChannelId().then(function(e){g._notifyLoginStatusChange(e,null,"logout","logoutNotify")}).then(function(e){t(e)}).catch(function(e){c.error("Error when trying to get user channel from airship. "+e),i(e)})}):new Promise(function(e,t){t("Logout event not submitted, invalid UDS configuration")})},_notifyLoginStatusChange:function(n,o,s,r){return new Promise(function(t,e){const i={data:{channel_id:n,action:s,site:"cnet",edition:window.CnetPageVars.edition.code},event:s,platform:this._platform,environment:this._environment};o&&(i.data.anon_id=o);var a=JSON.stringify(i);p.httpsCallable(r)(a).then(function(e){c.log(e),t("Event "+s+" notified")}).catch(function(e){e.message&&c.log(e.message),t("Event "+s+" not notified")})}.bind(this))},_notifyMigrate:function(e,n,o){const s=this;if(window.UA)return new Promise(function(a,e){window.UA.then(function(e){let t=!1,i=!1;o=JSON.parse(o);e=s._getAirshipInterests(e);o=o.concat(e),localStorage.setItem("CnetUserMigrationVersion",1..toString()),s.addInterest(o,"interest-migration",!1).then(function(){return i=!0,t?(c.log("Views and Interests successfully sent to firestore."),a("Views and Interests successfully sent to firestore.")):void c.log("Interests successfuly sent for migration")}).catch(function(e){return c.error("Migration failed to add interests. Reason: "+e),localStorage.setItem("CnetUserMigrationVersion","0"),a("Migration failed to add interests. Reason: "+e)}),s.processView(JSON.parse(n),"view-migration",!1).then(function(){return t=!0,i?(c.log("Views and Interests successfully sent to firestore."),a("Views and Interests successfully sent to firestore.")):void c.log("views successfuly sent for migration")}).catch(function(e){return c.error("Migration failed to add views. Reason: "+e),localStorage.setItem("CnetUserMigrationVersion","0"),a("Migration failed to add views. Reason: "+e)})})});a(window).on("urban-airship-loaded",function(){s._notifyMigrate(e,n,o)})},_userMigration:function(){if(!m)return new Promise(function(e,t){t("Migrate event not submitted, invalid UDS configuration")});let e=parseInt(localStorage.getItem("CnetUserMigrationVersion"),10);if(!isNaN(e)&&1<=e)return new Promise(function(e,t){e("Migration event not required")});e=0;var t=localStorage.getItem("CnetViewList"),i=localStorage.getItem("CnetExplicitList");let a=[],n=[];try{a=t?JSON.parse(t):[]}catch(e){c.log("Invalid view data for user migration")}try{n=i?JSON.parse(i):[]}catch(e){c.log("Invalid interests data for user migration")}return Array.isArray(a)||(a=[]),Array.isArray(n)||(n=[]),g._notifyMigrate(e,0<a.length?t:"[]",0<n.length?i:"[]")},_localPersistenceAuth:function(){this._authStatus.localPersistenceChecked||(this._authStatus.localPersistenceChecked=!0,this._authStatus.complete=!1,this._authStatus.type=void 0,this._authStatus.userCollection=void 0,this._authStatus.interestsSummaryCollection=void 0,t.getUserData(function(e,t){t&&t.isLoggedIn&&t.jwt?this._regAuth(t,!1):this._anonAuth(!1)}.bind(this)))},_regAuth:function(e,t){e&&e.isLoggedIn&&e.jwt&&(this._authStatus.complete=!1,this._authStatus.type="registered",this._authStatus.userCollection=this._collections.registered.users,this._authStatus.interestsSummaryCollection=this._collections.registered.interests_summary,this._authStatus.notifyLogin=t,"true"===localStorage.getItem("CnetRegEnabled")||localStorage.setItem("CnetRegEnabled","true"),(t=l.auth().currentUser?l.auth().currentUser:null)&&!t.isAnonymous&&e.isLoggedIn&&e.registrationId&&t.uid===e.registrationId?(this._authStatus.complete=!0,this._initEventManager(),this._userMigration(),this._authStatus.notifyLogin&&(this._authStatus.notifyLogin=!1,this._notifyLogin(t.uid,{}))):this._regSignIn(e,this._initEventManager,null))},_anonAuth:function(e){this._authStatus.complete=!1,this._authStatus.type="anonymous",this._authStatus.userCollection=this._collections.anonymous.users,this._authStatus.interestsSummaryCollection=this._collections.anonymous.interests_summary,"true"===localStorage.getItem("CnetRegEnabled")&&(localStorage.removeItem("CnetRegEnabled"),e=e||!0),e?this._notifyLogout().then(function(e){this._anonSignIn(this._initEventManager,null)}.bind(this)).catch(function(e){c.log("Error sending logout notification"),this._anonSignIn(this._initEventManager,null)}.bind(this)):this._anonSignIn(this._initEventManager,null)},_initEventManager:function(){var e="granted"!==Notification.permission,t=window.utag_data.interest&&"none"!==window.utag_data.interest.id;if(e&&!t)return g._snapshotListenerStatus="awaiting-opt-in",c.warn("User is opted out of notifications and no page interest exists. Not hooking up snapshot listener"),void g._invokeFunctions();const r=g._getUserId();if(!r||!g._authStatus.complete)return c.warn("User not signed in but attempting to setup snapshot listener. Adding snapshot setup onto sign in queue"),void g._signInFunctionQueue.unshift({functionName:"_initEventManager"});"function"==typeof g._unsubListener&&(g._unsubListener(),g._snapshotListenerStatus="uninitialized");const l=window.CnetPageVars.edition.code,i=u.collection(g._authStatus.userCollection).doc(r).collection("site").doc("cnet").collection("edition").doc(l);g._unsubListener=i.collection(g._authStatus.interestsSummaryCollection).doc("summary").onSnapshot(function(e){if(!e.exists)return c.warn("Doc does not exist, not tracking change"),void("uninitialized"===g._snapshotListenerStatus&&(c.log("Snapshot listener successfuly hooked up for user "+r),g._snapshotListenerStatus="initialized",g._invokeFunctions()));let a=e.data().active_map?e.data().active_map:{},t=e.data().inactive_map?e.data().inactive_map:{};g.activeInterests=a;const n="b122d23f-29eb-493e-83e6-e9fbfeaf79c8",i=Object.keys(a),o=Object.keys(t);if(t[n]&&g._optInInterests.push(n),!i.length&&!o.length)return c.log("Empty summary maps for user. Returning"),void("uninitialized"===g._snapshotListenerStatus&&(c.log("Snapshot listener successfuly hooked up for user "+r),g._snapshotListenerStatus="initialized",g._invokeFunctions()));d.publish(g.options.eventChannel,"interestChange");let s=[];if(i.forEach(function(e){var t=a[e],i=t.id,e=t.type;"general"===e&&g._optInInterests.push(i),i===n&&g._optInInterests.push(i),t.should_fire_tracking&&(t=t.name,g._trackEvent("background","add_interest|"+("video"===e?"video_series":e)+"_interest",t),s.push(i))}),"uninitialized"===g._snapshotListenerStatus&&(c.log("Snapshot listener successfuly hooked up for user "+r),g._snapshotListenerStatus="initialized",g._invokeFunctions()),s.length){let e={site:"cnet",edition:l,interests:s,platform:g._platform,environment:g._environment};"anonymous"===g._authStatus.type&&(e.anon_id=g._getAnon()),p.httpsCallable("updateInterestTracking")(JSON.stringify(e)).then(function(e){c.log(e)}).catch(function(e){e.message?c.error(e.message):c.error(e)})}})},_isInterestActive:function(e){return!!this.activeInterests[e]},_getAirshipChannelId:function(){return new Promise(function(t){window.UA?window.UA.then(function(e){t(e.channel&&e.channel.channel_id?e.channel.channel_id:null)}).catch(function(e){c.log(e),t(null)}):(c.warn("Airship not loaded yet. Will continue once airship is initialized."),a(window).on("urban-airship-loaded",function(){window.UA.then(function(e){t(e.channel&&e.channel.channel_id?e.channel.channel_id:null)}).catch(function(e){c.log(e),t(null)})}))})},_normalizeView:function(t){t.date_created||(t.date_created=Date.now()),t.site&&"roadshow"!==t.site||(t.site="cnet"),t.edition||(t.edition="us"),delete t.anon_id,delete t.user_id,delete t.urs_id,Object.keys(t).forEach(function(e){void 0===t[e]&&(t[e]="undefined")})},_anonSignIn:function(e,t){let i=this;const a=i._getAnon();l.auth().currentUser?l.auth().signOut().then(function(){i._authStatus.complete=!0,e&&e(a,t),i._userMigration()}).catch(function(e){i._authStatus.complete=!1,c.log("Sign out error")}):(i._authStatus.complete=!0,e&&e(a,t),i._userMigration())},_regSignIn:function(e,t,i){let a=this;l.auth().signInWithCustomToken(e.jwt).then(function(){a._authStatus.complete=!0,c.log("user signed in: ",l.auth().currentUser.uid),t&&e.registrationId&&t(e.registrationId,i),a._authStatus.notifyLogin&&(a._authStatus.notifyLogin=!1,a._notifyLogin(e.registrationId,{})),a._userMigration()}).catch(function(e){a._authStatus.complete=!1,c.error("Failed signing in to firebase with a custom token",e)})},_getUserId:function(){var e=l.auth().currentUser;return"registered"===this._authStatus.type&&this._authStatus.complete&&e&&(void 0===window.CnetPageVars.tracking.data.userId||window.CnetPageVars.tracking.data.userId&&window.CnetPageVars.tracking.data.userId===e.uid)?e.uid:"anonymous"===this._authStatus.type&&this._authStatus.complete?this._getAnon():window.CnetPageVars.tracking.data.userId||"00000000-0000-0000-0000-000000000000"},_getAnon:function(){var t=(t=localStorage.getItem("CnetAnon"))||window.uuid.v4();try{localStorage.setItem("CnetAnon",t)}catch(e){c.error("Writing to localStorage for anon failed."),t="00000000-0000-0000-0000-000000000000"}return t},_invokeFunctions:function(){var e;this._signInFunctionQueue.length&&(e=this._getUserId(),c.log("Clearing function queue. Adding views/interests to user "+e+". Processing "+this._signInFunctionQueue.length+" functions."),this._signInFunctionQueue.forEach(function(e){switch(e.functionName){case"_initEventManager":g._initEventManager();break;case"addInterest":g.addInterest(e.interests,e.event,e.shouldFireTracking);break;case"processView":g.processView(e.views,e.event,e.shouldFireTracking);break;default:c.error("Improper function name "+e.functionName+"passed in to be ran on sign in. Entire map: "+JSON.stringify(e))}}),this._signInFunctionQueue=[])},_getAirshipInterests:function(e){const n=e&&e.channel&&e.channel.tags?e.channel.tags.list:{};let o=[];return Object.keys(n).forEach(function(e){if(e.includes("-interest")){const t=e.includes("-es")?"es":"us",i=e.split("-")[0],a=n[e].map(function(e){return{is_airship_interest:!0,name:e,site:"cnet",edition:t,type:i,implicit:!0,action:"follow"}});o=o.concat(a)}}),o},_trackEvent:function(e,t,i){var a=window.CnetPageVars.tracking.data;n.trackCustomEvent(e,{pageViewGuid:a.pageViewGuid,_dwAnonId:a._dwAnonId,articleId:a.articleId,clickGenericText:t,pageType:a.pageType,siteEdition:a.siteEdition,siteHier:a.siteHier,siteSection:a.siteSection,interests:i},"trackClick")}};return g._init(),window.uds_sdk=g}),define("components/urban-airship",["jquery","version!fly/managers/debug","managers/edition","managers/page-vars","managers/global-functions","managers/tealium","managers/recommendation-data","managers/user","components/uds-sdk","version!fly/components/base"],function(t,a,s,r,e,n,l,d,c){a=a.init("urbanAirship");var u={trackEvent:function(e,t,i){var a=localStorage.getItem("CnetNotificationPromptTimer");if("message"===e&&!i){if(a&&!(18e5<Date.now()-a))return;localStorage.setItem("CnetNotificationPromptTimer",Date.now())}a=r.tracking.data;n.trackCustomEvent(e,{pageViewGuid:a.pageViewGuid,_dwAnonId:a._dwAnonId,articleId:a.articleId,clickGenericText:t,pageType:a.pageType,siteEdition:a.siteEdition,siteHier:a.siteHier,siteSection:a.siteSection},"trackClick")}};return r.services.urban_airship&&r.services.urban_airship.enabled&&e.gdprConsentCallback("script_urban_airship",function(){!function(i,e,a){var n,o,s=[],r=[],l={then:c,catch:function(e){return c(!1,e)},_async_setup:function(e){var t;try{t=e(a)}catch(e){return void d(r,o=e)}t.then(function(e){d(s,n=e)}).catch(function(e){o=e,d(defferedErrors,o)})}};i.UA=l;var t=e.createElement("script");function d(e,t){for(var i=0;i<e.length;i++)u(e[i],t)}function c(e,t){return e&&(n?u(e,n):s.push(e)),t&&(o?u(t,o):r.push(t)),l}function u(e,t){i.setTimeout(function(){e(t)},0)}t.src="https://aswpsdkus.com/notify/v1/ua-sdk.min.js",t.async=!0,t.id="_uasdk",t.rel="UA",e.head.appendChild(t)}(window,document,{workerUrl:"/bundles/cnetjs/js/libs/ua-push-worker.js",websitePushId:"web.com.cnet.urbanairship",appKey:r.personalization.urbanAirship.appKey,token:r.personalization.urbanAirship.token,vapidPublicKey:r.personalization.urbanAirship.vapidPublicKey}),t.widget("cnet.urbanAirship",t.fly.base,{options:{},urbanAirship:null,_create:function(){var o=this;this._setup(),window.UA.then(function(t){o.urbanAirship=t,o._setupEvents(t);var i=t.permission;"default"===i&&u.trackEvent("message","notification|automatic"),o.urbanAirship.register().then(function(a){let n=[];var e;if("default"===i&&"default"!==t.permission&&(e="granted"===t.permission?"opt-in":"opt-out",u.trackEvent("tap","notification|"+e+"|automatic")),a&&a.tags){if(s.isEspanol()){const s=o._createGeneralInterest("Edition_ES","Edition_ES");c&&c.enabled?n.push(s):a.tags.add("Edition_ES",l.getTagGroupByInterest("general"))}else{const s=o._createGeneralInterest("Edition_US","Edition_US");c&&c.enabled?n.push(s):a.tags.add("Edition_US",l.getTagGroupByInterest("general"))}if(a.optedIn&&a.tags){const s=o._createGeneralInterest("EDITORSPICKS","EDITORSPICKS");c&&c.enabled?n.push(s):a.tags.add("EDITORSPICKS",l.getTagGroupByInterest("general")),"roadshow"===r.tracking.data.brand&&d.getUserData(function(e,t){let i=l.createNewViewEvent(t);i.broad_interest="CARS";t=l.createImplicitInterestObject(i);c&&c.enabled?n.push(t):a.tags.add("CARS",l.getTagGroupByInterest("broad")),l.getExplicitInterests().some(function(e){return e.implicit&&"CARS"===e.interest_name&&"broad"===e.type})||(c&&c.enabled||u.trackEvent("background","add_interest|broad_interest|CARS"),l.writeExplicitInterestToLocalStorage(t),l.sendInterestsToBackend([t]))})}c&&c.enabled&&n.length&&c.addInterest(n,"opt-in",!1),a.id&&"undefined"!=typeof Storage&&null===localStorage.getItem("v78_channel_id")&&localStorage.setItem("v78_channel_id",a.id)}}).catch(function(e){a.error("Error when trying to register user: "+e),"default"===i&&"denied"===Notification.permission&&u.trackEvent("tap","notification|opt-out|automatic")})})},_setupEvents:function(e){t(window).trigger("urban-airship-loaded"),d.getUserData(function(e,t){var i=l.getViewEvents();l.triggerPeriodicBackfillSync(t,i)})},_createGeneralInterest:function(e,t){return{action:"follow",type:"general",interest_name:e,interest_id:t,date_created:Date.now(),site:"cnet",edition:s.isEspanol()?"es":"us",implicit:!0}}})},{},"targeting"),u}),define("managers/components.desktop",["jquery","version!fly/managers/components","version!fly/managers/debug","managers/tealium","managers/page-vars","components/authentication","components/tabs-modal","components/site-header","components/auto-suggest","components/lazyload-component","components/mobile-footer-link","components/global-modal","components/modal-iframe","components/modal-email","components/urban-airship"],function(t,i,e,a,n){e=e.init("componentManager");n="uvpjs_upgrade"===n.tracking.data.testName&&"test"===n.tracking.data.testGroup;return i.register({authentication:{},tabsModal:{},siteHeader:{},autoSuggest:{},lazyloadComponent:{},mobileFooterLink:{},globalModal:{},modalIframe:{},modalEmail:{},accordion:{require:"version!fly/components/accordion"},addthisevent:{require:"components/add-this-event"},alert:{require:"version!fly/components/alert"},amazonAd:{require:"components/amazon-ad"},article:{require:"components/article"},audioPlayer:{require:"components/audio-player"},autoLocalPricing:{require:"components/auto-local-pricing"},backgroundVideo:{require:"components/background-video"},bestFitVideoPromo:{require:"components/best-fit-video-promo"},bestList:{require:"components/best-list"},bestListing:{require:"components/best-listing"},breakingNews:{require:"components/breaking-news"},interest:{require:"components/interest"},buyingProgram:{require:"components/buyingProgram"},carFinder:{require:"components/car-finder"},carousel:{require:"version!fly/components/carousel",options:{slidechanged:function(e){t(window).trigger("scroll")}}},carouselDesktop:{require:"components/carousel.desktop"},carouselFull:{require:"components/carousel-full"},cbsiFeedWidget:{require:"components/cbsi-feed-widget"},clipboard:{require:"components/clipboard"},commands:{require:"components/commands"},commentDownloader:{require:"components/comment-downloader"},connectComponent:{require:"components/connect-es-component"},contactUs:{require:"components/contact-us"},couponsDesktop:{require:"components/coupons-page.desktop"},dropdown:{require:"components/dropdown"},dealsActivator:{require:"components/deals-activator.desktop"},dealsUpdater:{require:"components/deals-updater"},dfllActivator:{require:"components/dfll-activator.desktop"},dfllActivatorV2:{require:"components/dfll-activator-v2.desktop"},dfllUpdater:{require:"components/dfll-updater.desktop"},dfllUpdaterV2:{require:"components/dfll-updater-v2.desktop"},displayCookie:{require:"components/display-cookie"},disqusCount:{require:"components/disqus-count"},editorsChoiceToggle:{require:"components/editors-choice-toggle"},ellipsis:{require:"components/ellipsis"},expando:{require:"components/expando"},fadeOnScroll:{require:"components/fade-on-scroll"},inlineProductCarousel:{require:"components/inline-product-carousel"},topStories:{require:"components/top-stories"},errorModal:{require:"components/error-modal"},expiredDealModal:{require:"components/expired-deal-modal.desktop"},externalLink:{require:"components/external-link"},autoCalcIframe:{require:"components/auto-calc-iframe"},fixate:{require:"components/fixate"},formAjax:{require:"components/form-ajax"},formTrim:{require:"components/form-trim"},formValidate:{require:"components/form-validate"},forumsBestAnswer:{require:"components/forums-best-answer"},forumsEditPost:{require:"components/forums-edit-post"},forumsMarkAsRead:{require:"components/forums-mark-as-read"},forumsRealtime:{require:"components/forums-realtime"},forumsPostToggle:{require:"components/forums-post-toggle"},forumsPostPreview:{require:"components/forums-post-preview"},forumsPostFlag:{require:"components/forums-post-flag"},forumsPermalink:{require:"components/forums-permalink"},forumsLoadForm:{require:"components/forums-load-form"},forumsSearchUpdater:{require:"components/forums-search-updater"},forumsTools:{require:"components/forums-tools"},forumsTrack:{require:"components/forums-track"},forumsVote:{require:"components/forums-vote"},fullScreenSlides:{require:"components/full-screen-slides"},genericTracker:{require:"components/generic-tracker"},googleCsa:{require:"components/google-csa"},howlerAudioPlayer:{require:"components/howler-audio-player"},iframeAdTracker:{require:"components/iframe-ad-tracker"},iframeHoverFix:{require:"components/iframe-hover-fix"},iframeResizer:{require:"components/iframe-resizer"},imageGallery:{require:"components/image-gallery"},imageGalleryAuto:{require:"components/image-gallery-auto"},imageGalleryModal:{require:"components/image-gallery-modal"},indepthReview:{require:"components/indepth-review"},instagramFetcher:{require:"components/instagram-fetcher"},interactiveFloorPlans:{require:"components/interactive-floor-plans"},interactiveFloorPlansV2:{require:"components/interactive-floor-plans-v2"},interactiveVideoPlayer:{require:"components/interactive-video-player"},inviewElement:{require:"quantum/inviewElement"},joinCnet:{require:"components/join-cnet"},lazyloadImages:{require:"components/lazyload-images"},lazyloadElement:{require:"components/lazyload-element"},leadsTracker:{require:"components/leads-tracker"},linkCallback:{require:"components/link-callback"},linkTracker:{require:"components/link-tracker"},liveStreamPlayer:{require:"components/live-stream-player"},loading:{require:"components/loading"},loadMore:{require:"components/load-more"},loadNewest:{require:"components/load-newest",options:{clickGenericText:"refresh-river"}},longform:{require:"components/longform"},modal:{require:"version!fly/components/modal"},modalEnlargeImage:{require:"components/modal-enlarge-image"},modalNewsletter:{require:"components/modal-newsletter"},moduleAssetTracker:{require:"components/module-asset-tracker"},mostPopularDeal:{require:"components/most-popular-deal.desktop"},mostPopularDealListing:{require:"components/most-popular-deal-listing.desktop",options:{contentSet:function(e){i.process(e.$content)}}},myFinanceWidget:{require:"components/myFinance-widget"},newsletterAndInterest:{require:"components/newsletter-and-interest"},newsletterSubscription:{require:"components/newsletter-subscription"},newsCarousel:{require:"components/news-carousel"},page:{require:"components/page"},pageHeader:{require:"components/page-header"},parallaxReveal:{require:"components/parallax-reveal"},poll:{require:"components/poll"},pricesByZip:{require:"components/prices-by-zip"},productMediaCarousel:{require:"components/product-media-carousel"},productSeriesModal:{require:"components/product-series",options:{contentSet:function(e,t){i.process(t.$content)}}},productSpecs:{require:"components/product-specs"},productReviewVideo:{require:"components/product-review-video"},profileReauth:{require:"components/profile-reauth"},progressiveAd:{require:"components/progressive-ad"},popOnScroll:{require:"components/pop-on-scroll"},profileSubscriptions:{require:"components/profile-subscriptions",options:{contentSet:function(e){i.process(e.$content)}}},profileModal:{require:"components/profile-modal",options:{contentSet:function(e){i.process(e.$content)}}},profileUpdate:{require:"components/profile-update",options:{contentSet:function(e){i.process(e.$content)}}},profileUgc:{require:"components/profile-ugc",options:{contentSet:function(e){i.process(e.$content)}}},profileDiscussions:{require:"components/profile-discussions"},radio:{require:"components/radio"},readMore:{require:"components/read-more"},realtimeData:{require:"components/realtime-data"},realtimeDrawer:{require:"components/realtime-drawer"},realtimeTicker:{require:"components/realtime-ticker"},recaptcha:{require:"components/recaptcha"},reposition:{require:"components/reposition"},resetPassword:{require:"components/reset-password"},scrollbarArea:{require:"components/scrollbar-area"},scrollTracking:{require:"components/scroll-tracking"},searchBar:{require:"components/search-bar"},searchPagination:{require:"components/search-paginator",options:{contentSet:function(e){i.process(e.$content)}}},searchSort:{require:"components/search-sort"},selfishScroll:{require:"components/selfish-scroll"},sharebar:{require:"components/sharebar"},shortcodeGallery:{require:"components/shortcode-gallery"},shortcodeGalleryController:{require:"components/shortcode-gallery-controller"},showcaseHeroTabs:{require:"components/showcase-hero-tabs"},showcaseRailBody:{require:"components/showcase-rail-body"},showcaseVideos:{require:"components/showcase-videos"},sideNav:{require:"components/side-nav"},sideqik:{require:"components/sideqik"},slider:{require:"components/slider"},slidingElement:{require:"components/sliding-element"},snappyCarousel:{require:"quantum/snappyCarousel"},stacklaEvents:{require:"components/stackla-events"},stimulusCalculator:{require:"components/stimulus-calculator"},uiSlider:{require:"version!libs/jquery/ui/jquery.ui.slider"},socialButton:{require:"version!fly/components/social-button"},socialCounts:{require:"components/social-counts"},socialMenu:{require:"components/social-menu"},socialTracking:{require:"components/social-tracking"},stickyColumn:{require:"components/sticky-column"},stickyElement:{require:"components/sticky-element"},stickyLeader:{require:"components/sticky-leader"},subratingModalToggle:{require:"components/subrating-modal-toggle"},swipeAway:{require:"quantum/swipeAway"},tableSorter:{require:"components/table-sorter"},tabs:{require:"version!fly/components/tabs"},tabsAsync:{require:"components/tabs-async",options:{contentSet:function(e){i.process(e.$content)}}},tabsRefresh:{require:"components/tabs-refresh"},tagLetterSorter:{require:"components/tag-letter-sorter"},textCounter:{require:"components/text-counter"},tileSpecialNav:{require:"components/tile-special-nav"},tocNav:{require:"components/toc-nav"},toggle:{require:"components/toggle"},tooltip:{require:"components/tooltip"},touchMenuHover:{require:"components/touch-menu-hover"},trackDownload:{require:"components/track-download"},trackImpression:{require:"components/track-impression"},tvFeature:{require:"components/tv-feature"},twitterFetcher:{require:"components/twitter-fetcher"},updateArea:{require:"components/update-area"},videoPlaceholder:{require:"components/video-placeholder"},videoPlayer:{require:n?"quantum/videoPlayer_upgrade":"quantum/videoPlayer"},videoListing:{require:"components/video-listing"},videoPlaylistConnector:{require:"components/video-playlist-connector"},videoShowGallery:{require:"components/video-show-gallery"},waypointPromo:{require:"component/waypoint-promo"},zipCode:{require:"components/zip-code"},zoom:{require:"quantum/zoom"},profileNewsletterSubscription:{require:"components/profile-newsletter-subscription"},bandwidthMeterBar:{require:"components/bandwidth-meter-bar"}}),i}),define("managers/edition-notifications",["jquery","version!fly/managers/debug","managers/device","components/global-modal"],function(t,e,i,a){return e.init("editionNotifications"),{init:function(){var e;!i.isDesktop()||(e=t("body").data("edition-redirect-alert"))&&0<e.length&&t.cnet.globalModal({content:e,openOnInit:!0})}}}),define("managers/promotionals.desktop",["jquery","version!fly/managers/debug","managers/client-storage","utils/cookie","managers/edition","managers/global-functions","managers/page-vars","managers/user","version!libs/modernizr.custom"],function(i,t,a,e,n,o,s,r){(t=t.init("promotionals")).log("promos here");var l=null,d={cookiesNotification:{limit:3,isActive:function(){return!1},init:function(){require(["components/cookies-notification.desktop"],function(){i.cnet.cookiesNotification(),l.cookiesNotification++,a.write("promotionalSettings",l),a.write("suppressCookiesNotification",!0,!0)})}},autoSocialPromo:{limit:4,isActive:function(){return"front_door"==s.tracking.data._pageType&&s.tracking.data.slug,l.autoSocialPromo,d.autoSocialPromo.limit,!1},init:function(){require(["components/waypoint-promo"],function(){i.cnet.waypointPromo()})}},urbanAirshipPromo:{isActive:function(){return!0},init:function(){require(["components/urban-airship"],function(){try{o.gdprConsentCallback("script_urban_airship_promo",function(){i.cnet.urbanAirship()},{},"targeting")}catch(e){t.log("UrbanAirship component not available")}})}}};return{init:function(){function e(){!1===i.cnet.breakingNewsActive&&(d.cookiesNotification.isActive()?d.cookiesNotification.init():d.espanolPromo.isActive()&&d.espanolPromo.init())}for(var t in l=a.read("promotionalSettings")||{},d)d.hasOwnProperty(t)&&(l[t]=l[t]||0);d.autoSocialPromo.isActive()&&d.autoSocialPromo.init(),d.urbanAirshipPromo.isActive()&&d.urbanAirshipPromo.init(),void 0===i.cnet.breakingNewsActive?i(window).on("breakingNewsComplete",function(){e()}):e()},suppress:function(e){l[e]=d[e].limit,a.write("promotionalSettings",l)},increment:function(e){l[e]++,a.write("promotionalSettings",l)}}}),define("managers/third-party/social",["version!fly/managers/debug","managers/page-vars","managers/global-functions"],function(e,t,i){e=e.init("social");var a={linkedIn:"managers/third-party/linked-in",pinterest:"managers/third-party/pinterest",twitter:"managers/third-party/twitter",disqus:"managers/third-party/disqus"};function n(t,e="social"){"string"==typeof a[t]&&i.gdprConsentCallback("script_"+t,function(){require([a[t]],function(e){(a[t]=e).init()})},{},e)}return{init:function(){t.services.linkedin.enabled&&0<$('[data-social="linkedIn"]').length&&n("linkedIn"),t.services.pinterest.enabled&&0<$('[data-social="pinterest"]').length&&n("pinterest"),t.services.twitterwidget.enabled&&0<$('[data-social="twitter"]').length&&n("twitter"),t.services.disqus.enabled&&0<$('[data-social="disqus"]').length&&"comments_permalink"==t.pageType&&n("disqus","functional")},parse:function(e){e=e||null,t.services.linkedin.enabled&&0<$('[data-social="linkedIn"]',e).length&&("string"==typeof a.linkedIn?n("linkedIn"):a.linkedIn.parse(e)),t.services.pinterest.enabled&&0<$('[data-social="pinterest"]',e).length&&"string"==typeof a.pinterest&&n("pinterest"),t.services.twitterwidget.enabled&&0<$('[data-social="twitter"]',e).length&&("string"==typeof a.twitter?n("twitter"):a.twitter.parse()),t.services.disqus.enabled&&0<$('[data-social="disqus"]',e).length&&("string"==typeof a.disqus?n("disqus","functional"):a.disqus.parse(e))}}}),function(o){"use strict";void 0===(o=void 0===o?{}:o).performance?o.performance={}:"performance"in o&&o.performance&&o.performance.setResourceTimingBufferSize&&performance.setResourceTimingBufferSize(400),o._perfRefForUserTimingPolyfill=o.performance,o.performance.userTimingJsNow=!1,o.performance.userTimingJsNowPrefixed=!1,o.performance.userTimingJsUserTiming=!1,o.performance.userTimingJsUserTimingPrefixed=!1,o.performance.userTimingJsPerformanceTimeline=!1,o.performance.userTimingJsPerformanceTimelinePrefixed=!1;var a,e,t=[],i=[],n=null;if("function"!=typeof o.performance.now){for(o.performance.userTimingJsNow=!0,i=["webkitNow","msNow","mozNow"],a=0;a<i.length;a++)if("function"==typeof o.performance[i[a]]){o.performance.now=o.performance[i[a]],o.performance.userTimingJsNowPrefixed=!0;break}var s=+new Date;o.performance.timing&&o.performance.timing.navigationStart&&(s=o.performance.timing.navigationStart),"function"!=typeof o.performance.now&&(Date.now?o.performance.now=function(){return Date.now()-s}:o.performance.now=function(){return+new Date-s})}var r=function(){},l=function(){},d=[],c=!1,u=!1;if("function"!=typeof o.performance.getEntries||"function"!=typeof o.performance.mark){for("function"==typeof o.performance.getEntries&&"function"!=typeof o.performance.mark&&(u=!0),o.performance.userTimingJsPerformanceTimeline=!0,t=["webkit","moz"],i=["getEntries","getEntriesByName","getEntriesByType"],a=0;a<i.length;a++)for(e=0;e<t.length;e++)n=t[e]+i[a].substr(0,1).toUpperCase()+i[a].substr(1),"function"==typeof o.performance[n]&&(o.performance[i[a]]=o.performance[n],o.performance.userTimingJsPerformanceTimelinePrefixed=!0);var p,h,m,r=function(e){d.push(e),"measure"===e.entryType&&(c=!0)},g=function(){c&&(d.sort(function(e,t){return e.startTime-t.startTime}),c=!1)},l=function(e,t){for(a=0;a<d.length;)d[a].entryType!==e||void 0!==t&&d[a].name!==t?a++:d.splice(a,1)};"function"==typeof o.performance.getEntries&&!u||(p=o.performance.getEntries,o.performance.getEntries=function(){g();var e=d.slice(0);return u&&p&&(Array.prototype.push.apply(e,p.call(o.performance)),e.sort(function(e,t){return e.startTime-t.startTime})),e}),"function"==typeof o.performance.getEntriesByType&&!u||(h=o.performance.getEntriesByType,o.performance.getEntriesByType=function(e){if(void 0===e||"mark"!==e&&"measure"!==e)return u&&h?h.call(o.performance,e):[];"measure"===e&&g();var t=[];for(a=0;a<d.length;a++)d[a].entryType===e&&t.push(d[a]);return t}),"function"==typeof o.performance.getEntriesByName&&!u||(m=o.performance.getEntriesByName,o.performance.getEntriesByName=function(e,t){if(t&&"mark"!==t&&"measure"!==t)return u&&m?m.call(o.performance,e,t):[];void 0!==t&&"measure"===t&&g();var i=[];for(a=0;a<d.length;a++)void 0!==t&&d[a].entryType!==t||d[a].name===e&&i.push(d[a]);return u&&m&&(Array.prototype.push.apply(i,m.call(o.performance,e,t)),i.sort(function(e,t){return e.startTime-t.startTime})),i})}if("function"!=typeof o.performance.mark){for(o.performance.userTimingJsUserTiming=!0,t=["webkit","moz","ms"],i=["mark","measure","clearMarks","clearMeasures"],a=0;a<i.length;a++)for(e=0;e<t.length;e++)n=t[e]+i[a].substr(0,1).toUpperCase()+i[a].substr(1),"function"==typeof o.performance[n]&&(o.performance[i[a]]=o.performance[n],o.performance.userTimingJsUserTimingPrefixed=!0);var f={};"function"!=typeof o.performance.mark&&(o.performance.mark=function(e){var t=o.performance.now();if(void 0===e)throw new SyntaxError("Mark name must be specified");if(o.performance.timing&&e in o.performance.timing)throw new SyntaxError("Mark name is not allowed");f[e]||(f[e]=[]),f[e].push(t),r({entryType:"mark",name:e,startTime:t,duration:0})}),"function"!=typeof o.performance.clearMarks&&(o.performance.clearMarks=function(e){e?f[e]=[]:f={},l("mark",e)}),"function"!=typeof o.performance.measure&&(o.performance.measure=function(e,t,i){var a=o.performance.now();if(void 0===e)throw new SyntaxError("Measure must be specified");if(t){var n=0;if(o.performance.timing&&t in o.performance.timing){if("navigationStart"!==t&&0===o.performance.timing[t])throw new Error(t+" has a timing of 0");n=o.performance.timing[t]-o.performance.timing.navigationStart}else{if(!(t in f))throw new Error(t+" mark not found");n=f[t][f[t].length-1]}t=a;if(i)if(t=0,o.performance.timing&&i in o.performance.timing){if("navigationStart"!==i&&0===o.performance.timing[i])throw new Error(i+" has a timing of 0");t=o.performance.timing[i]-o.performance.timing.navigationStart}else{if(!(i in f))throw new Error(i+" mark not found");t=f[i][f[i].length-1]}r({entryType:"measure",name:e,startTime:n,duration:t-n})}else r({entryType:"measure",name:e,startTime:0,duration:a})}),"function"!=typeof o.performance.clearMeasures&&(o.performance.clearMeasures=function(e){l("measure",e)})}"undefined"!=typeof define&&define.amd?define("libs/usertiming-0.1.6",[],function(){return o.performance}):"undefined"!=typeof module&&void 0!==module.exports&&(module.exports=o.performance)}("undefined"!=typeof window?window:void 0),define("utils/function-natives",["version!libs/usertiming"],function(){Function.prototype.bind||(Function.prototype.bind=function(i){var a=this,n=1<arguments.length?arguments.slice(1):null,o=function(){},s=function(){var e=i,t=arguments.length;this instanceof s&&(o.prototype=a.prototype,e=new o);t=n||t?a.apply(e,n&&t?n.concat(arguments.slice()):n||arguments):a.call(e);return e==i?t:e};return s}),Array.prototype.find||(Array.prototype.find=function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,i=Object(this),a=i.length>>>0,n=arguments[1],o=0;o<a;o++)if(t=i[o],e.call(n,t,o,i))return t})}),function(e,t,i){"function"==typeof define&&define.amd?define("libs/jquery/mobile-1.4.0a1",["jquery"],function(e){return i(e,0,t),e.mobile}):i(e.jQuery,0,t)}(this,document,function(e,t,i,a){function d(e,t,i){var a=i.type;i.type=t,c.event.dispatch.call(e,i),i.type=a}var c,u,n,r,l,o,s;!function(c,e,u){var l,t,n="virtualMouseBindings",d="virtualTouchID",i="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),p="clientX clientY pageX pageY screenX screenY".split(" "),a=c.event.mouseHooks?c.event.mouseHooks.props:[],h=c.event.props.concat(a),o={},s=0,r=0,m=0,g=!1,f=[],v=!1,y=!1,A="addEventListener"in e,w=c(e),b=1,_=0;function k(e){for(;e&&void 0!==e.originalEvent;)e=e.originalEvent;return e}function C(e){for(var t,i,a={};e;){for(i in t=c.data(e,n))t[i]&&(a[i]=a.hasVirtualBinding=!0);e=e.parentNode}return a}function T(){y=!0}function S(){E(),s=setTimeout(function(){_=s=0,f.length=0,v=!1,T()},c.vmouse.resetTimerDuration)}function E(){s&&(clearTimeout(s),s=0)}function I(e,t,i){var a;return(i&&i[e]||!i&&function(e,t){for(var i;e;){if((i=c.data(e,n))&&(!t||i[t]))return e;e=e.parentNode}}(t.target,e))&&(a=function(e,t){var i,a,n,o,s,r,l,d=e.type;if((e=c.Event(e)).type=t,i=e.originalEvent,a=c.event.props,-1<d.search(/^(mouse|click)/)&&(a=h),i)for(s=a.length;s;)e[n=a[--s]]=i[n];if(-1<d.search(/mouse(down|up)|click/)&&!e.which&&(e.which=1),-1!==d.search(/^touch/)&&(d=(t=k(i)).touches,t=t.changedTouches,o=d&&d.length?d[0]:t&&t.length?t[0]:u))for(r=0,l=p.length;r<l;r++)e[n=p[r]]=o[n];return e}(t,e),c(t.target).trigger(a)),a}function P(e){var t=c.data(e.target,d);v||_&&_===t||(t=I("v"+e.type,e))&&(t.isDefaultPrevented()&&e.preventDefault(),t.isPropagationStopped()&&e.stopPropagation(),t.isImmediatePropagationStopped()&&e.stopImmediatePropagation())}function x(e){var t,i,a=k(e).touches;a&&1===a.length&&(t=C(i=e.target)).hasVirtualBinding&&(_=b++,c.data(i,d,_),E(),g=y=!1,i=k(e).touches[0],r=i.pageX,m=i.pageY,I("vmouseover",e,t),I("vmousedown",e,t))}function $(e){y||(g||I("vmousecancel",e,C(e.target)),g=!0,S())}function q(e){var t,i,a,n;y||(t=k(e).touches[0],i=g,a=c.vmouse.moveDistanceThreshold,n=C(e.target),(g=g||Math.abs(t.pageX-r)>a||Math.abs(t.pageY-m)>a)&&!i&&I("vmousecancel",e,n),I("vmousemove",e,n),S())}function D(e){var t,i;y||(T(),I("vmouseup",e,i=C(e.target)),g||(t=I("vclick",e,i))&&t.isDefaultPrevented()&&(t=k(e).changedTouches[0],f.push({touchID:_,x:t.clientX,y:t.clientY}),v=!0),I("vmouseout",e,i),g=!1,S())}function V(e){var t,i=c.data(e,n);if(i)for(t in i)if(i[t])return 1}function L(){}for(c.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500},t=0;t<i.length;t++)c.event.special[i[t]]=function(i){var a=i.substr(1);return{setup:function(){V(this)||c.data(this,n,{}),c.data(this,n)[i]=!0,o[i]=(o[i]||0)+1,1===o[i]&&w.bind(a,P),c(this).bind(a,L),A&&(o.touchstart=(o.touchstart||0)+1,1===o.touchstart&&w.bind("touchstart",x).bind("touchend",D).bind("touchmove",q).bind("scroll",$))},teardown:function(){--o[i],o[i]||w.unbind(a,P),A&&(--o.touchstart,o.touchstart||w.unbind("touchstart",x).unbind("touchmove",q).unbind("touchend",D).unbind("scroll",$));var e=c(this),t=c.data(this,n);t&&(t[i]=!1),e.unbind(a,L),V(this)||e.removeData(n)}}}(i[t]);A&&e.addEventListener("click",function(e){var t,i,a,n,o,s=f.length,r=e.target;if(s)for(t=e.clientX,i=e.clientY,l=c.vmouse.clickDistanceThreshold,a=r;a;){for(n=0;n<s;n++)if(o=f[n],a===r&&Math.abs(o.x-t)<l&&Math.abs(o.y-i)<l||c.data(a,d)===o.touchID)return e.preventDefault(),void e.stopPropagation();a=a.parentNode}},!0)}(e,i),e.mobile={},o=e,s={touch:"ontouchend"in i},o.mobile.support=o.mobile.support||{},o.extend(o.support,s),o.extend(o.mobile.support,s),u=(c=e)(i),i=c.mobile.support.touch,n=i?"touchstart":"mousedown",r=i?"touchend":"mouseup",l=i?"touchmove":"mousemove",c.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(e,t){c.fn[t]=function(e){return e?this.bind(t,e):this.trigger(t)},c.attrFn&&(c.attrFn[t]=!0)}),c.event.special.scrollstart={enabled:!0,setup:function(){var i,t,a=this;function n(e,t){d(a,(i=t)?"scrollstart":"scrollstop",e)}c(a).bind("touchmove scroll",function(e){c.event.special.scrollstart.enabled&&(i||n(e,!0),clearTimeout(t),t=setTimeout(function(){n(e,!1)},50))})},teardown:function(){c(this).unbind("touchmove scroll")}},c.event.special.tap={tapholdThreshold:750,emitTapOnTaphold:!0,setup:function(){var s=this,r=c(s),l=!1;r.bind("vmousedown",function(e){if(l=!1,e.which&&1!==e.which)return!1;var t,i=e.target;function a(){clearTimeout(t)}function n(){a(),r.unbind("vclick",o).unbind("vmouseup",a),u.unbind("vmousecancel",n)}function o(e){n(),l||i!==e.target?l&&e.stopPropagation():d(s,"tap",e)}r.bind("vmouseup",a).bind("vclick",o),u.bind("vmousecancel",n),t=setTimeout(function(){c.event.special.tap.emitTapOnTaphold&&(l=!0),d(s,"taphold",c.Event("taphold",{target:i}))},c.event.special.tap.tapholdThreshold)})},teardown:function(){c(this).unbind("vmousedown").unbind("vclick").unbind("vmouseup"),u.unbind("vmousecancel")}},c.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1e3,horizontalDistanceThreshold:10,verticalDistanceThreshold:75,start:function(e){var t=e.originalEvent.touches?e.originalEvent.touches[0]:e;return{time:(new Date).getTime(),coords:[t.pageX,t.pageY],origin:c(e.target)}},stop:function(e){e=e.originalEvent.touches?e.originalEvent.touches[0]:e;return{time:(new Date).getTime(),coords:[e.pageX,e.pageY]}},handleSwipe:function(e,t,i,a){if(t.time-e.time<c.event.special.swipe.durationThreshold&&Math.abs(e.coords[0]-t.coords[0])>c.event.special.swipe.horizontalDistanceThreshold&&Math.abs(e.coords[1]-t.coords[1])<c.event.special.swipe.verticalDistanceThreshold){var n=e.coords[0]>t.coords[0]?"swipeleft":"swiperight";return d(i,"swipe",c.Event("swipe",{target:a,swipestart:e,swipestop:t})),d(i,n,c.Event(n,{target:a,swipestart:e,swipestop:t})),!0}return!1},setup:function(){var o=this,s=c(o);s.bind(n,function(e){var t,i=c.event.special.swipe.start(e),a=e.target,n=!1;s.bind(l,function(e){i&&(t=c.event.special.swipe.stop(e),n=n||c.event.special.swipe.handleSwipe(i,t,o,a),Math.abs(i.coords[0]-t.coords[0])>c.event.special.swipe.scrollSupressionThreshold&&e.preventDefault())}).one(r,function(){n=!0})})},teardown:function(){c(this).unbind(n).unbind(l).unbind(r)}},c.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe",swiperight:"swipe"},function(e,t){c.event.special[e]={setup:function(){c(this).bind(t,c.noop)},teardown:function(){c(this).unbind(t)}}})}),define("main.desktop",["jquery","managers/client-storage","managers/components.desktop","managers/device","managers/edition-notifications","managers/page-vars","managers/promotionals.desktop","managers/third-party/social","managers/tracking","managers/tealium","version!libs/modernizr.custom","version!fly/utils/data-prefix","utils/function-natives","version!libs/jquery/mobile","managers/user"],function(e,t,i,a,n,o,s,r,l){e(document).ready(function(){l.resetTrackingData(o.tracking.data),a.init(o.device),t.init(),i.process(e("body")),s.init(),n.init(),r.init()})}),define("components/form-trim",["jquery","version!fly/managers/debug","version!fly/components/base"],function(i,e){e=e.init("formTrim"),i.widget("cnet.formTrim",i.fly.base,{options:{},_create:function(){var t=this;t._setup(),t.$element.on("submit",i.proxy(function(e){i("input[type=text]",t.$element).each(function(){i(this).val(i(this).val().replace(/\s+/g," ").trim())})},this))}})}),function(s,i){var a=s(i);s.fn.lazyload=function(e){var n=this,o={threshold:0,failure_limit:0,event:"scroll.lazyload",effect:"show",container:i,data_attribute:"original",data_srcset:"srcset",skip_invisible:!1,appear:null,load:null,placeholder:"data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=",overrideEvent:!1};function t(){var t=0;n.each(function(){var e=s(this);if((!o.skip_invisible||e.is(":visible"))&&!s.abovethetop(this,o)&&!s.leftofbegin(this,o))if(s.belowthefold(this,o)||s.rightoffold(this,o)){if(++t>o.failure_limit)return!1}else e.trigger("appear"),t=0})}return e&&(void 0!==e.failurelimit&&(e.failure_limit=e.failurelimit,delete e.failurelimit),void 0!==e.effectspeed&&(e.effect_speed=e.effectspeed,delete e.effectspeed),s.extend(o,e)),e=void 0===o.container||o.container===i?a:s(o.container),0===o.event.indexOf("scroll")&&(o.overrideEvent&&e.off(o.event),e.on(o.event,t)),this.each(function(){var i=this,a=s(i);i.loaded=!1,void 0!==a.attr("src")&&!1!==a.attr("src")||a.is("img")&&a.attr("src",o.placeholder),a.one("appear",function(){var e;this.loaded||(o.appear&&(e=n.length,o.appear.call(i,e,o)),s("<img />").one("load",function(){var e=a.attr("data-"+o.data_attribute),t=a.attr("data-"+o.data_srcset);e!==a.attr("src")&&(a.hide(),a.is("img")?(a.attr("src",e),null!==t&&a.attr("srcset",t)):a.is("video")?a.attr("poster",e):a.css("background-image","url('"+e+"')"),a[o.effect](o.effect_speed)),i.loaded=!0;e=s.grep(n,function(e){return!e.loaded});n=s(e),o.load&&(e=n.length,o.load.call(i,e,o))}).bind("error",function(){s(i).trigger("error")}).attr({src:a.attr("data-"+o.data_attribute),srcset:a.attr("data-"+o.data_srcset)||""}))}),0!==o.event.indexOf("scroll")&&a.off(o.event).on(o.event,function(){i.loaded||a.trigger("appear")})}),a.off("resize.lazyload").bind("resize.lazyload",function(){t()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&a.on("pageshow",function(e){e.originalEvent&&e.originalEvent.persisted&&n.each(function(){s(this).trigger("appear")})}),s(function(){t()}),this},s.belowthefold=function(e,t){return(void 0===t.container||t.container===i?(i.innerHeight||a.height())+a.scrollTop():s(t.container).offset().top+s(t.container).height())<=s(e).offset().top-t.threshold},s.rightoffold=function(e,t){return(void 0===t.container||t.container===i?a.width()+a.scrollLeft():s(t.container).offset().left+s(t.container).width())<=s(e).offset().left-t.threshold},s.abovethetop=function(e,t){return(void 0===t.container||t.container===i?a.scrollTop():s(t.container).offset().top)>=s(e).offset().top+t.threshold+s(e).height()},s.leftofbegin=function(e,t){return(void 0===t.container||t.container===i?a.scrollLeft():s(t.container).offset().left)>=s(e).offset().left+t.threshold+s(e).width()},s.inviewport=function(e,t){return!(s.rightoffold(e,t)||s.leftofbegin(e,t)||s.belowthefold(e,t)||s.abovethetop(e,t))},s.extend(s.expr[":"],{"below-the-fold":function(e){return s.belowthefold(e,{threshold:0})},"above-the-top":function(e){return!s.belowthefold(e,{threshold:0})},"right-of-screen":function(e){return s.rightoffold(e,{threshold:0})},"left-of-screen":function(e){return!s.rightoffold(e,{threshold:0})},"in-viewport":function(e){return s.inviewport(e,{threshold:0})},"above-the-fold":function(e){return!s.belowthefold(e,{threshold:0})},"right-of-fold":function(e){return s.rightoffold(e,{threshold:0})},"left-of-fold":function(e){return!s.rightoffold(e,{threshold:0})}})}(jQuery,window,document),define("libs/jquery/lazyload-1.10.0.custom",function(){}),define("components/lazyload-images",["jquery","version!fly/components/base","version!libs/jquery/lazyload"],function(i){i.widget("cnet.lazyloadImages",i.fly.base,{options:{threshold:200,skip_invisible:!1},_create:function(){this._super(),this._setupEvents(),this._lazyLoadImages()},_setupEvents:function(){this._on(this.$element,{ajaxStop:this._lazyLoadImages})},_lazyLoadImages:function(){window.HTMLImageElement&&"loading"in window.HTMLImageElement.prototype?this.$element.find("img.lazy").each(function(e){var t=i(this);t.attr("src",t.attr("data-original")),t.attr("srcset",t.attr("data-srcset")),t.attr("sizes",t.attr("data-sizes")),t.attr("data-original",null),t.attr("data-srcset",null),t.attr("data-sizes",null),t.attr("loading","lazy"),t.removeClass("lazy")}):this.$element.find("img.lazy").lazyload(this.options).removeClass("lazy")}})}),define("components/touch-menu-hover",["jquery","version!fly/managers/debug","managers/device","managers/page-vars","version!fly/components/base"],function(a,n,o,e){n=n.init("touchMenuHover"),a.widget("cnet.touchMenuHover",a.fly.base,{options:{hoverClass:"hover",moreButton:"moreButton",header:!1},_create:function(){this._setup(),"mobile"!=e.tracking.data.deviceType&&navigator.userAgent.match(/(iPad|iPhone|iPod)/g)&&a(".social-login").css("display","none"),Modernizr.touch&&this._setupEvents()},_setupEvents:function(){var t=this,i=t.$element,e=a('[data-trigger="menu"]',i);(e=0===e.length?i:e).on(o.getImmediateClickType(),function(e){a(":cnet-touchMenuHover").not(i).removeClass(t.options.hoverClass),t.options.header&&(a("#rbHeader").removeClass("passthru intentionalHover"),a("#rbHeader").addClass("fadeOut")),i.hasClass(t.options.hoverClass)?i.hasClass(t.options.moreButton)?(n.log("Link click on active more share menu : leaving hover class"),a(document).on(o.getImmediateClickType(),null,{self:t},t._handleClickOutsideMenu)):(i.removeClass(t.options.hoverClass),n.log("Link click on active : removing hover class"),t.options.header&&(a("#rbHeader").removeClass("passthru intentionalHover"),a("#rbHeader").addClass("fadeOut")),a(document).off(o.getImmediateClickType(),null,t._handleClickOutsideMenu)):(e.preventDefault(),i.addClass(t.options.hoverClass),t.options.header&&(a("#rbHeader").removeClass("fadeOut"),a("#rbHeader").addClass("passthru intentionalHover")),n.log("Link click on non-active : preventing link and adding hover class"),a(document).on(o.getImmediateClickType(),null,{self:t},t._handleClickOutsideMenu))})},_handleClickOutsideMenu:function(e){var t=e.data.self;0===a(e.target).parents(":cnet-touchMenuHover").length&&(n.log("Body click : removing hover class"),t.$element.removeClass(t.options.hoverClass),t.options.header&&(a("#rbHeader").removeClass("passthru intentionalHover"),a("#rbHeader").addClass("fadeOut")),a(document).off(o.getImmediateClickType(),null,t._handleClickOutsideMenu))}})}),function(){"use strict";var t=0,o={};function i(e){if(!e)throw new Error("No options passed to Waypoint constructor");if(!e.element)throw new Error("No element option passed to Waypoint constructor");if(!e.handler)throw new Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+t,this.options=i.Adapter.extend({},i.defaults,e),this.element=this.options.element,this.adapter=new i.Adapter(this.element),this.callback=e.handler,this.axis=this.options.horizontal?"horizontal":"vertical",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=i.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=i.Context.findOrCreateByElement(this.options.context),i.offsetAliases[this.options.offset]&&(this.options.offset=i.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),o[this.key]=this,t+=1}i.prototype.queueTrigger=function(e){this.group.queueTrigger(this,e)},i.prototype.trigger=function(e){this.enabled&&this.callback&&this.callback.apply(this,e)},i.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete o[this.key]},i.prototype.disable=function(){return this.enabled=!1,this},i.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},i.prototype.next=function(){return this.group.next(this)},i.prototype.previous=function(){return this.group.previous(this)},i.invokeAll=function(e){var t,i=[];for(t in o)i.push(o[t]);for(var a=0,n=i.length;a<n;a++)i[a][e]()},i.destroyAll=function(){i.invokeAll("destroy")},i.disableAll=function(){i.invokeAll("disable")},i.enableAll=function(){i.invokeAll("enable")},i.refreshAll=function(){i.Context.refreshAll()},i.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},i.viewportWidth=function(){return document.documentElement.clientWidth},i.adapters=[],i.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0},i.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=i}(),function(){"use strict";var t=0,i={},a=window.Waypoint,e=window.onload;function n(e){this.element=e,this.Adapter=a.Adapter,this.adapter=new this.Adapter(e),this.key="waypoint-context-"+t,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},e.waypointContextKey=this.key,i[e.waypointContextKey]=this,t+=1,this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}n.prototype.add=function(e){var t=e.options.horizontal?"horizontal":"vertical";this.waypoints[t][e.key]=e,this.refresh()},n.prototype.checkEmpty=function(){var e=this.Adapter.isEmptyObject(this.waypoints.horizontal),t=this.Adapter.isEmptyObject(this.waypoints.vertical);e&&t&&(this.adapter.off(".waypoints"),delete i[this.key])},n.prototype.createThrottledResizeHandler=function(){var e=this;function t(){e.handleResize(),e.didResize=!1}this.adapter.on("resize.waypoints",function(){e.didResize||(e.didResize=!0,a.requestAnimationFrame(t))})},n.prototype.createThrottledScrollHandler=function(){var e=this;function t(){e.handleScroll(),e.didScroll=!1}this.adapter.on("scroll.waypoints",function(){e.didScroll&&!a.isTouch||(e.didScroll=!0,a.requestAnimationFrame(t))})},n.prototype.handleResize=function(){a.Context.refreshAll()},n.prototype.handleScroll=function(){var e,t,i={},a={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};for(e in a){var n,o=a[e],s=o.newScroll>o.oldScroll?o.forward:o.backward;for(n in this.waypoints[e]){var r=this.waypoints[e][n],l=o.oldScroll<r.triggerPoint,d=o.newScroll>=r.triggerPoint;(l&&d||!l&&!d)&&(r.queueTrigger(s),i[r.group.id]=r.group)}}for(t in i)i[t].flushTriggers();this.oldScroll={x:a.horizontal.newScroll,y:a.vertical.newScroll}},n.prototype.innerHeight=function(){return this.element==this.element.window?a.viewportHeight():this.adapter.innerHeight()},n.prototype.remove=function(e){delete this.waypoints[e.axis][e.key],this.checkEmpty()},n.prototype.innerWidth=function(){return this.element==this.element.window?a.viewportWidth():this.adapter.innerWidth()},n.prototype.destroy=function(){var e,t=[];for(e in this.waypoints)for(var i in this.waypoints[e])t.push(this.waypoints[e][i]);for(var a=0,n=t.length;a<n;a++)t[a].destroy()},n.prototype.refresh=function(){var e,t,i,a=this.element==this.element.window,n=this.adapter.offset(),o={};for(t in this.handleScroll(),e={horizontal:{contextOffset:a?0:n.left,contextScroll:a?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:a?0:n.top,contextScroll:a?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}}){var s,r=e[t];for(s in this.waypoints[t]){var l,d=this.waypoints[t][s],c=d.options.offset,u=d.triggerPoint,p=0,h=null==u;d.element!==d.element.window&&(p=d.adapter.offset()[r.offsetProp]),"function"==typeof c?c=c.apply(d):"string"==typeof c&&(c=parseFloat(c),-1<d.options.offset.indexOf("%")&&(c=Math.ceil(r.contextDimension*c/100))),l=r.contextScroll-r.contextOffset,d.triggerPoint=p+l-c,l=u<r.oldScroll,c=d.triggerPoint>=r.oldScroll,u=!l&&!c,!h&&l&&c?(d.queueTrigger(r.backward),o[d.group.id]=d.group):(!h&&u||h&&r.oldScroll>=d.triggerPoint)&&(d.queueTrigger(r.forward),o[d.group.id]=d.group)}}for(i in o)o[i].flushTriggers();return this},n.findOrCreateByElement=function(e){return n.findByElement(e)||new n(e)},n.refreshAll=function(){for(var e in i)i[e].refresh()},n.findByElement=function(e){return i[e.waypointContextKey]},window.onload=function(){e&&e(),n.refreshAll()},a.requestAnimationFrame=function(e){(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}).call(window,e)},a.Context=n}(),function(){"use strict";function o(e,t){return e.triggerPoint-t.triggerPoint}function s(e,t){return t.triggerPoint-e.triggerPoint}var t={vertical:{},horizontal:{}},i=window.Waypoint;function a(e){this.name=e.name,this.axis=e.axis,this.id=this.name+"-"+this.axis,this.waypoints=[],this.clearTriggerQueues(),t[this.axis][this.name]=this}a.prototype.add=function(e){this.waypoints.push(e)},a.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},a.prototype.flushTriggers=function(){for(var e in this.triggerQueues){var t=this.triggerQueues[e];t.sort("up"===e||"left"===e?s:o);for(var i=0,a=t.length;i<a;i+=1){var n=t[i];!n.options.continuous&&i!==t.length-1||n.trigger([e])}}this.clearTriggerQueues()},a.prototype.next=function(e){this.waypoints.sort(o);e=i.Adapter.inArray(e,this.waypoints);return e===this.waypoints.length-1?null:this.waypoints[e+1]},a.prototype.previous=function(e){this.waypoints.sort(o);e=i.Adapter.inArray(e,this.waypoints);return e?this.waypoints[e-1]:null},a.prototype.queueTrigger=function(e,t){this.triggerQueues[t].push(e)},a.prototype.remove=function(e){e=i.Adapter.inArray(e,this.waypoints);-1<e&&this.waypoints.splice(e,1)},a.prototype.first=function(){return this.waypoints[0]},a.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},a.findOrCreate=function(e){return t[e.axis][e.name]||new a(e)},i.Group=a}(),function(){"use strict";var i=window.jQuery,e=window.Waypoint;function a(e){this.$element=i(e)}i.each(["innerHeight","innerWidth","off","offset","on","outerHeight","outerWidth","scrollLeft","scrollTop"],function(e,t){a.prototype[t]=function(){var e=Array.prototype.slice.call(arguments);return this.$element[t].apply(this.$element,e)}}),i.each(["extend","inArray","isEmptyObject"],function(e,t){a[t]=i[t]}),e.adapters.push({name:"jquery",Adapter:a}),e.Adapter=a}(),function(){"use strict";var n=window.Waypoint;function e(a){return function(){var t=[],i=arguments[0];return a.isFunction(arguments[0])&&((i=a.extend({},arguments[1])).handler=arguments[0]),this.each(function(){var e=a.extend({},i,{element:this});"string"==typeof e.context&&(e.context=a(this).closest(e.context)[0]),t.push(new n(e))}),t}}window.jQuery&&(window.jQuery.fn.waypoint=e(window.jQuery)),window.Zepto&&(window.Zepto.fn.waypoint=e(window.Zepto))}(),define("libs/waypoints/jquery.waypoints-3.1.1",function(){}),define("libs/waypoints/inview-3.1.1",["version!libs/waypoints/jquery.waypoints"],function(){"use strict";function e(){}var a=window.Waypoint;function t(e){this.options=a.Adapter.extend({},t.defaults,e),this.axis=this.options.horizontal?"horizontal":"vertical",this.waypoints=[],this.createWaypoints()}t.prototype.createWaypoints=function(){for(var e={vertical:[{down:"enter",up:"exited",offset:"100%"},{down:"entered",up:"exit",offset:"bottom-in-view"},{down:"exit",up:"entered",offset:-1},{down:"exited",up:"enter",offset:function(){return-this.adapter.outerHeight()}}],horizontal:[{right:"enter",left:"exited",offset:"100%"},{right:"entered",left:"exit",offset:"right-in-view"},{right:"exit",left:"entered",offset:0},{right:"exited",left:"enter",offset:function(){return-this.adapter.outerWidth()}}]},t=0,i=e[this.axis].length;t<i;t++){var a=e[this.axis][t];this.createWaypoint(a)}},t.prototype.createWaypoint=function(e){var t,i=this;this.waypoints.push(new a({element:this.options.element,handler:function(e){i.options[t[e]].call(this,e)},offset:(t=e).offset,horizontal:this.options.horizontal}))},t.prototype.destroy=function(){for(var e=0,t=this.waypoints.length;e<t;e++)this.waypoints[e].destroy();this.waypoints=[]},t.defaults={enter:e,entered:e,exit:e,exited:e},a.Inview=t}),define("fly/libs/jquery.throttle-debounce-1.1",["jquery"],function(t){var a;t.throttle=a=function(n,o,s,r){var l,d=0;function e(){var e=this,t=+new Date-d,i=arguments;function a(){d=+new Date,s.apply(e,i)}r&&!l&&a(),l&&clearTimeout(l),void 0===r&&n<t?a():!0!==o&&(l=setTimeout(r?function(){l=void 0}:a,void 0===r?n-t:n))}return"boolean"!=typeof o&&(r=s,s=o,o=void 0),t.guid&&(e.guid=s.guid=s.guid||t.guid++),e},t.debounce=function(e,t,i){return void 0===i?a(e,t,!1):a(e,i,!1!==t)}}),define("managers/waypoints",["jquery","version!fly/managers/debug","version!libs/waypoints/jquery.waypoints","version!fly/libs/jquery.throttle-debounce"],function(e,t){t=t.init("waypoints");var i=!1;return{init:function(){i||(i=!0,e(window).on("scroll",e.throttle(500,function(){Waypoint.refreshAll()})))}}}),define("managers/trackonomics",["jquery","version!fly/managers/debug"],function(e,t){var i=t.get("trackonomics");return{refreshTrackonomics:function(){try{var e;"object"==typeof window.trx&&(i.log("reload trackonomics"),(e=window.trx).magicLinksEngine=new e.MagicLinks(!1),e.magicLinksEngine.run(!0))}catch(e){i.log("trackonomics error: "+e)}}}}),define("managers/recommendation",["jquery","components/uds-sdk","managers/page-vars","managers/global-functions","managers/tealium","managers/user","managers/recommendation-data","version!fly/managers/debug","version!fly/libs/jquery.throttle-debounce"],function(s,r,n,l,o,t,d,c){var u="CnetUnfollowList";function p(a){var e=JSON.parse(localStorage.getItem(u));e&&(e.forEach(function(e){e=d.createMockExplicitInterestObject(e);d.writeExplicitInterestToLocalStorage(e)}),localStorage.removeItem(u));var t=d.getExplicitInterests();if(t.length)for(var i=0;i<t.length;i++)if(t[i].type===a.interest.type&&t[i].interest_name===a.interest.name.toUpperCase()&&"unfollow"===t[i].action)return c.log("Did not add tag "+t[i].interest_name+" due to being explicitly unfollowed"),0;window.UA.then(function(e){var t,i;e.channel&&(t=a.interest.name.toUpperCase(),i=d.getTagGroupByInterest(a.interest.type),e.channel.tags.has(t,i)||(c.log("Adding interests in UA API: "+t),r&&r.enabled||e.channel.tags.add(t,i),i=n.tracking.data,r&&r.enabled||o.trackCustomEvent("background",{pageViewGuid:i.pageViewGuid,_dwAnonId:i._dwAnonId,articleId:i.articleId,clickGenericText:"add_interest|"+a.interest.type+"_interest|"+a.interest.name.toUpperCase(),pageType:i.pageType,siteEdition:i.siteEdition,siteHier:i.siteHier,siteSection:i.siteSection},"trackClick")),a.ua_channel_id=e.channel.id)}),d.sendInterestsToBackend([d.createImplicitInterestObject(a)])}function h(e,t,i){var a=n.tracking.data;o.trackCustomEvent("tap",{pageViewGuid:a.pageViewGuid,_dwAnonId:a._dwAnonId,articleId:a.articleId,clickGenericText:(i?"add":"remove")+"_interest|"+t+"_interest|"+e,pageType:a.pageType,siteEdition:a.siteEdition,siteHier:a.siteHier,siteSection:a.siteSection},"trackClick")}return c=c.init("recommendationManager"),{registerPageView:function(){var o;d.testForLocalStorage()&&"us"===n.tracking.data.siteEdition&&(o=d.getViewEvents(),t.getUserData(function(e,t){var i,a,n,t=d.createNewViewEvent(t);o.push(t),r&&r.enabled&&r.processView(t),o=d.pruneViews(o,t),i=t,t=o,a={},n=Date.now()-2592e6,t.forEach(function(e){!(e=d.normalizeView(e)).interest||"none"===e.interest.id||!e.date_created||n>e.date_created||(a[e.user_id]||(a[e.user_id]={}),a[e.user_id][e.interest.type]||(a[e.user_id][e.interest.type]={}),a[e.user_id][e.interest.type][e.interest.name]?a[e.user_id][e.interest.type][e.interest.name].push(e):a[e.user_id][e.interest.type][e.interest.name]=[e])}),t=a,"none"!==i.interest.id&&t&&t[i.user_id]&&t[i.user_id][i.interest.type]&&t[i.user_id][i.interest.type][i.interest.name]&&2<=t[i.user_id][i.interest.type][i.interest.name].length&&l.gdprConsentCallback("UAInterestAdd",function(){window.UA?p(i):s(window).on("urban-airship-loaded",function(){p(i)})},{},"targeting"),d.writeViewsArray(o)}))},registerOnScroll:function(e){var t=this;e=e||window;var i=s(e);i.on("scroll.recommendationManager",s.throttle(500,function(){n.tracking&&n.tracking.data&&n.tracking.data.contentId&&t.registerPageView(),i.off("scroll.recommendationManager")}))},onVideoComplete:function(){var e=n.tracking.data.pageType;e&&-1!==["video_page","video_list"].indexOf(e)?t.getUserData(function(e,t){var i=d.createNewViewEvent(t);if("none"!==i.interest.id){const a=d.createImplicitInterestObject(i);window.UA?(c.log("Page video completed. Adding page interest"),p(i),r&&r.enabled&&r.addInterest(a,"video")):s(window).on("urban-airship-loaded",function(){c.log("Page video completed. Adding page interest"),p(i),r&&r.enabled&&r.addInterest(a,"video")})}}):c.warn("Attempted to add video completion interest on non-video page. Not adding page interest. Current page type: "+e)},addExplicitInterest:function(a,n){t.getUserData(function(e,t){var i=d.createExplicitInterestObject("follow",n,t);return a.channel&&(t=d.getTagGroupByInterest(i.type),c.log("Adding "+i.interest_name+" to UA"),r&&r.enabled||(a.channel.tags.add(i.interest_name.toUpperCase(),t),h(i.interest_name.toUpperCase(),i.type,!0))),d.writeExplicitInterestToLocalStorage(i),r&&r.enabled&&r.addInterest(i,"tap"),d.sendInterestsToBackend([i],function(e){c.log("Successfully added follow interest "+i.interest_name+" to DB")}),i})},removeExplicitInterest:function(a,n){t.getUserData(function(e,t){var i=d.createExplicitInterestObject("unfollow",n,t);return a.channel&&(t=d.getTagGroupByInterest(i.type),c.log("Removing UA interest "+i.interest_name.toUpperCase()),r&&r.enabled||(a.channel.tags.remove(i.interest_name.toUpperCase(),t),h(i.interest_name.toUpperCase(),i.type,!1))),d.writeExplicitInterestToLocalStorage(i),r&&r.enabled&&r.addInterest(i,"tap"),d.sendInterestsToBackend([i],function(e){c.log("Successfully added unfollow interest "+i.interest_name+" to DB")}),i})}}}),define("components/image-gallery-modal",["jquery","managers/components.desktop","version!fly/managers/debug","managers/page-vars","managers/tracking","managers/tealium","managers/trackonomics","managers/guid","managers/ad","managers/recommendation","version!fly/components/base"],function(o,s,r,l,d,c,u,p,h,m){r=r.init("imageGalleryModal"),o.widget("cnet.imageGalleryModal",o.fly.base,{options:{cssPath:"",trackUrl:"",url:"",index:1},cssLoadPath:"",latestDwLinkTag:"",url:"",hostUrl:"",hostState:{},hostScrollTop:0,hostAdData:{},hostGuid:0,isHostGallery:!1,_create:function(){var t=this;this._setup(),this.$video=o(".videoPlayer"),"www.theroadshow.com"!==window.location.hostname&&this.$element.on("click",function(e){t.cssLoadPath=t.options.cssPath,e.preventDefault(),t._clickControl(),t.latestDwLinkTag=c.getDwTag(o(e.target))})},_storeHostPageData:function(){this.hostUrl=window.location.href,this.hostState=window.history.state,this.hostScrollTop=o(window).scrollTop(),this.hostAdData=o.extend(!0,{},l.ads.data),this.hostTracking=o.extend(!0,{},l.tracking),this.hostImage=o('meta[property="og:image"]').attr("content").trim(),this.hostGuid=p.getViewGuid(),this.url=""!==this.options.url?this.options.url:this.$element.attr("href")},_clickControl:function(){var i=this,a=o("body");if($htmlTag=o("html"),0<o("#bodyWrapper").length?(r.log("IGM: replacing gallery modal"),o("#bodyWrapper").data("persist","true"),o("#bodyWrapper .closeModal").trigger("click"),$htmlTag.removeClass("overflow"),n=o("<div id='bodyWrapper' class='loadingArea'></div>"),a.append(n)):(r.log("IGM: setting up gallery modal"),n=o("<div id='bodyWrapper' class='loadingArea'></div>"),a.append(n),a.addClass("galleryModal image-gallery"),this._loadCss(this.cssLoadPath,"galleryCSS")),this.$video.length)if(r.log("video is present. pause it for the gallery modal"),"videoPlayer"==this.$video.attr("data-component"))try{this.$video.videoPlayer("pause")}catch(e){r.log("Failed to pause video player.")}else r.warn("Video not ready"),this.$video.on("onVideoPlayerReady",function(e){"videoPlayer"==this.$video.attr("data-component")&&this.$video.videoPlayer("pause")});"image_gallery"==l.tracking.data.pageType&&(i.isHostGallery=!0),i._storeHostPageData();var e=window.location.search,t=/ab=.*&/,n=/ab=.*/;t.test(e)?e=e.replace(t,""):n.test(e)&&(e=e.replace(n,"")),o.ajax({url:this.url+e,dataType:"json",context:document.body}).done(function(t){r.log("Gallery loaded");var e=document.createElement("a");e.href=i.options.trackUrl;e=e.pathname;o("head title").text(o(o.parseHTML(t.template)).find("h1").text()),d.resetTrackingData(t.trackingData,e),p.resetViewGuid(),c.trackPageLoad(o.extend(!0,t.trackingData,{viewguid:p.getViewGuid(),title:t.trackingData.photoGalleryTitle,_pageViewGuid:p.getViewGuid(),_topicPrimaryId:t.trackingData.topicId[0],_pageUrl:i.options.trackUrl,pageUrl:i.options.trackUrl,photoGalleryTitle:t.trackingData.photoGalleryTitle,photoGalleryId:t.trackingData.photoGalleryId,photoGalleryType:t.trackingData.articleType,pageName:""!=i.options.trackUrl?i.options.trackUrl:l.tracking.data._pageName,dwLinkTag:i.latestDwLinkTag}));e=o(t.template);o("#bodyWrapper").append(e),o("#bodyWrapper").removeClass("loadingArea"),s.process(o("#bodyWrapper")),l.ads.data=o.extend({},t.adData),h.loadAds(h.getAdUnits(l.ads.data.gpt.containerId),l.ads.data,{excludeDisabled:!0,incrementPageView:!0}),m.registerOnScroll("#bodyWrapper"),this.$close=o('[data-item="modal-close"]'),this.$close.on("click",function(){i._closeModal(a,t.trackingData)}),o("#bodyWrapper").on("click",function(e){e.target===this&&i._closeModal(a,t.trackingData)}),u.refreshTrackonomics()}).fail(function(){a.removeClass("galleryModal"),o("#bodyWrapper").remove(),window.location=i.$element.attr("href")})},_closeModal:function(e,t){c.trackCustomEvent("trackCloseGallery",o.extend({},l.tracking.data,{_articleTitle:t.photoGalleryTitle,_articleId:t.photoGalleryId,_authorPrimaryName:t.articleAuthorName,_articleType:t.articleType,_pageType:t.pageType,siteSection:t.siteSection,siteEdition:t._siteEdition,_siteTypeDevice:t._siteTypeDevice,_siteHier:t.siteHier,_pageViewGuid:t._pageViewGuid,clickGenericText:"close-gallery"}),"trackClick");t=document.createElement("a");t.href=this.hostUrl;t=t.pathname;d.resetTrackingData(this.hostTracking,t),l.ads.data=this.hostAdData,window.history.replaceState&&window.history.replaceState(this.hostState,"",this.hostUrl),o('meta[property="og:image"]').attr("content",this.hostImage),o("title").text(this.hostTracking.data._pageTitle),p.resetViewGuid(this.hostGuid),this.isHostGallery||$htmlTag.removeClass("overflow"),"true"===o("#bodyWrapper").data("persist")?(o("#bodyWrapper").remove(),o("#bodyWrapper").data("persist",null)):(o("#bodyWrapper").remove(),e.removeClass("galleryModal image-gallery"),o(window).resize(),o(window).scrollTop(this.hostScrollTop))},_loadCss:function(e,t){var i=document.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("id",t),i.setAttribute("href",e),void 0!==i&&0==o("#"+t).length&&document.getElementsByTagName("head")[0].appendChild(i)},open:function(){this.cssLoadPath=this.options.cssPath,this._clickControl()}})}),define("fly/managers/history-2.0",["jquery","version!fly/utils/string-vars"],function(n,o){"use strict";function i(e,t){e=e||{},a+=1,this.id="history-"+a,this.title=e.title,this.route=e.route,this.originalTitle=document.title,t&&this.navigate(t,{replace:!0})}var s=window.history,e=n(window),a=0,r="pushState"in s&&"replaceState"in s&&!(0<=window.navigator.userAgent.indexOf("Firefox")&&window.top!==window);return i.prototype={constructor:i,navigate:function(e,t){if(!r)return!1;n.extend(!0,e,{historyId:this.id});var i=(t=t||{}).title||this.title,a=t.url||this.route,i=o.compile(n.isFunction(i)?i(e):i,n.extend({title:this.originalTitle},e)),a=o.compile(n.isFunction(a)?a(e):a,e);s[t.replace?"replaceState":"pushState"](e,i,a),i&&(document.title=i)},stateChange:function(t){if(!r)return!1;var i=this;e.on("popstate."+this.id,function(){var e=s.state||{};e.historyId===i.id&&n.isFunction(t)&&t(e)})},stop:function(){if(!r)return!1;e.off("popstate."+this.id)}},{init:function(e,t){return new i(e,t)}}}),define("translations/load-more",["managers/edition"],function(e){return e.getTranslation({en:{loadMore:"Show More",loadMoreLowercase:"Show more",page:"Page"},es:{loadMore:"Cargar mÃ¡s",loadMoreLowercase:"Cargar mÃ¡s",page:"Pagina"}})}),define("fly/components/load-more-1.0",["jquery","version!fly/utils/object-helper","version!fly/utils/string-helper","version!fly/utils/string-vars","version!fly/managers/debug","version!fly/managers/history","version!fly/components/base","version!fly/components/loading"],function(i,a,n,e,t,o){var s=i.mobile?"vclick":"click",r=t.init("loadMore");i.widget("fly.loadMore",i.fly.base,{options:{url:null,data:{},responseKey:"loadMore",pushState:{enabled:!1,route:"./{page}",title:function(e){return"{title}"+(1<e.page?" - Page {page}":"")}},loader:{disabled:!1,initState:"idle",template:'<a class="{baseClass} {stateClass}"><span class="text">{text}</span></a>',classes:{base:"load-more"},text:{idle:"Load More"}}},isLoading:!1,id:null,data:{},loader:null,_create:function(){var e=this.options;this._setup(),this.id=this.$element.attr("id"),this.id||(this.id="uid-"+Math.floor(1e5*Math.random()),this.$element.attr("id",this.id)),this._setupLoader(),this._setupEvents(),e.pushState.enabled&&this._setupPushState()},_setupPushState:function(){var i=this,e=this.options;this.history=o.init(e.pushState),this._on({loadmoreloaded:function(e,t){t=(t.response||{}).state||{};i.history.navigate(t,{replace:!0})}})},_setupEvents:function(){var e={};e[s+' [data-load="'+this.id+'"]']="_handleLoadClick",this._on(this.$document,e)},_setupLoader:function(){this.loader=i.fly.loading(this.options.loader),this.loader.$element.attr("data-load",this.id).insertAfter(this.$element)},_handleLoadClick:function(e){e.preventDefault(),this.isLoading||this.load()},load:function(){var e=this.options;this.isLoading||!1!==this._trigger("load")&&(r.log("load initiated ",{data:e.data,url:e.url}),this.isLoading=!0,this.loader.update("loading"),i.ajax({type:"GET",dataType:"json",url:e.url,data:e.data}).done(i.proxy(this._handleResponse,this)).fail(i.proxy(this._handleResponseFailure,this)))},_handleResponse:function(e){var t=this.options;(e=a.deepFind(e,t.responseKey)||{}).html?(r.log("response success: ",e),this.loader.update("idle"),this.$element.append(e.html),e.data&&(e.data=i.extend({},t.data,e.data),this._setOption("data",e.data)),this._trigger("loaded",null,{response:e}),n.toBool(e.hasMore)||(this.loader.update("end"),this.destroy()),this.isLoading=!1):this._handleResponseFailure(e)},_handleResponseFailure:function(e){r.log("response failure: ",e),this.loader.update("error"),this.destroy()},_destroy:function(){this.loader.destroy(),this.history&&this.history.stop()},_setOption:function(e,t){"data"===e&&this.$element.data("data",t),this._super(e,t)}})}),define("fly/components/load-more-scroll-1.0",["jquery","version!fly/components/load-more","version!fly/libs/jquery.throttle-debounce"],function(e){e.widget("fly.loadMoreScroll",e.fly.loadMore,{widgetEventPrefix:"loadMore",options:{disabled:!1,threshold:"300",loader:{initState:null,text:{loading:"Please Wait"}}},_create:function(){this._super("_create")},_setupEvents:function(){e.support.touch?this._on(this.$document,{scrollstop:"_checkScroll"}):this._on(this.$document,{scroll:e.throttle(100,this._checkScroll)}),this._on({loadmorescrolloaded:this.loader.remove})},_checkScroll:function(){var e,t=this.options;t.disabled||this.isLoading||this.$element.is(":hidden")||(e=this.$window.scrollTop()+this.$window.height(),this.$element.offset().top+this.$element.outerHeight()-e<t.threshold&&this.load())}})}),define("components/load-more",["jquery","managers/page-vars","version!fly/utils/object-helper","version!fly/utils/string-helper","version!fly/utils/string-vars","version!fly/managers/debug","version!fly/managers/history","translations/load-more","version!fly/managers/components","managers/ad","managers/tealium","components/loading","version!libs/jquery/lazyload","version!fly/components/load-more-scroll"],function(n,o,s,r,e,t,a,l,d,c,u){var i=n.mobile?"vclick":"click",p=t.init("loadMore");n.widget("fly.loadMore",n.fly.loadMore,{options:{threshold:null,pushState:{currentPage:1,title:function(e){return"{title}"+(1<e.page?" - "+l.page+" {page}":"")},description:n('meta[name="description"]').attr("content")},altText:!1,loader:{classes:{loading:"loadingCircle"},text:{idle:l.loadMore}},selector:{appendContentTo:null,scrollContainer:null,loadMoreButtonLocation:null},loadMoreTrackingSection:null,trackThresholdLoad:!0,clickGenericText:"load-more",trackCustomEventName:"loadMore",appendClass:null,pageOffset:0},_setupPushState:function(){var i=this,e=this.options;this.history=a.init(e.pushState),this._on({loadmoreloaded:function(e,t){t=(t.response||{}).state||{};t.page=parseInt(t.page,10)+i.options.pageOffset,i.history.navigate(t,{replace:!0})}})},_handleResponse:function(e){var t,i=this.options,a=s.deepFind(e,i.responseKey)||{};a.html?(p.log("response success: ",a),this.loader.update("idle"),(null!=this.options.selector.appendContentTo&&0<n(this.options.selector.appendContentTo).length?n(this.options.selector.appendContentTo).first():this.$element).append(a.html),a.data&&(a.data=n.extend({},i.data,a.data),this._setOption("data",a.data)),this._trigger("loaded",null,{response:a}),r.toBool(a.hasMore)||(this.loader.update("end"),this.destroy()),this.isLoading=!1,d.setConfig({includeContext:!1}),d.process(this.$element),d.setConfig({includeContext:!0}),this.options.data.lastAssetId=e.lastAssetId,a.url&&(this.options.url=a.url),this._lazyLoadImages(),this._campaignNameOverride(),i.trackThresholdLoad&&(!(t={dwLinkTag:"load-more",siteSection:o.tracking.data.siteSection,siteEdition:o.tracking.data.siteEdition,siteType:o.tracking.data.siteType,deviceType:o.tracking.data.deviceType,pageType:o.tracking.data.pageType,brand:o.tracking.data.brand,_articleType:o.tracking.data.articleType,_siteHier:o.tracking.data._siteHier,_pageNumber:o.tracking.data.pageNum,articleType:o.tracking.data.articleType})!==i.pushState.enabled?u.trackPageLoad(t):u.trackCustomEvent("load-more",t,"trackClick")),(e=a.adData||e.adData)&&e.gpt&&(o.ads.data=n.extend(!0,e,{gpt:{targeting:o.ads.data.gpt.targeting,slotVars:o.ads.data.gpt.slotVars}}),c.loadAds(c.getAdUnits(o.ads.data.gpt.containerId),o.ads.data,{excludeDisabled:!0,incrementPageView:!0}))):this._handleResponseFailure(a)},_create:function(){void 0===this.options.data.totalPages||this.options.pushState.currentPage<this.options.data.totalPages?(!1!==this.options.pushState.enabled&&1<this.options.pushState.currentPage&&this._removePageFromTitleAndDescription(),this.options.altText&&(this.options.loader.text.idle=l[this.options.altText]),this._super(),!1!==this.options.pushState.enabled&&1<this.options.pushState.currentPage&&(this._changeTitleForPage(this.options.pushState.currentPage),this._changeDescriptionForPage(this.options.pushState.currentPage)),null!=this.options.selector.appendContentTo&&null!=this.options.loadMoreTrackingSection&&n(this.options.selector.appendContentTo).first().attr("section",this.options.loadMoreTrackingSection)):0<n("[data-load]").length&&n("[data-load]").remove()},_removePageFromTitleAndDescription:function(){var e,t=new RegExp("(.*) - "+l.page+" \\d+$","i"),i=document.title.match(t);null!==i&&2==i.length&&(document.title=i[1]),this.options.pushState.description&&null!==(e=this.options.pushState.description.match(t))&&2==e.length&&(this.options.pushState.description=e[1],n('meta[name="description"]').attr("content",this.options.pushState.description))},_changeTitleForPage:function(e){document.title=document.title+" - "+l.page+" "+e},_changeDescriptionForPage:function(e){n('meta[name="description"]').attr("content",this.options.pushState.description+" - "+l.page+" "+e)},_changeLoaderHref:function(e){this.loader.$element.children("."+this.options.loader.classes.base).attr("href",e)},_setupLoader:function(){this.loader=n.cnet.loading(this.options.loader);var e="mobile"===o.device?"button button_type_primary button_size_medium":"button button_type_primary button_size_large";null!=this.options.appendClass&&(e=e+" "+this.options.appendClass),this.$element.next("[data-no-js]").remove();var t=this.$element;null!=this.options.selector.loadMoreButtonLocation&&0<n(this.options.selector.loadMoreButtonLocation).length&&(t=this.options.selector.loadMoreButtonLocation),this.loader.$element.attr({"data-load":this.id,class:e}).insertAfter(t),this._lazyLoadImages()},_setupEvents:function(){var e;null===this.options.threshold?((e={})[i+' [data-load="'+this.id+'"]']="_handleLoadClick",this._on(this.$document,e)):(e=null==this.options.selector.scrollContainer?this.$document:n(this.options.selector.scrollContainer),n.support.touch?this._on(e,{scrollstop:"_checkScroll"}):this._on(e,{scroll:n.throttle(100,this._checkScroll)}),this._on({loadmorescrolloaded:this.loader.remove}))},load:function(){this.options.data&&this.options.data.url&&(this.options.url=this.options.data.url,this.options.data=window.location.search.replace(/^\?/,"")),this._super()},_checkScroll:function(){var e,t,i=this.options;i.disabled||this.isLoading||this.$element.is(":hidden")||(e=null!==(t=i.selector.scrollContainer)&&0<n(t).length?n(t).offset().top+n(t).outerHeight():this.$window.scrollTop()+this.$window.height(),(null!==(t=i.selector.appendContentTo)&&0<n(t).length?n(t).offset().top+n(t).outerHeight():this.$element.offset().top+this.$element.outerHeight())-e<i.threshold&&(p.log("Load more event"),this.load()))},_destroy:function(){this.loader.destroy(),this.loader.$element.remove(),this.history&&this.history.stop()},_lazyLoadImages:function(){p.log("lazyLoadImages");var e=[];e.push(this.$element),e.push(n(this.options.selector.appendContentTo)),n.each(e,function(e,t){t.find("img.lazy").lazyload({failure_limit:2e3,skip_invisible:!1,threshold:200}).removeClass("lazy")})},_campaignNameOverride:function(){p.log("campaignNameOverride"),"/5g/phones/"===window.location.pathname&&n(this.options.selector.appendContentTo+" a").each(function(){var e=n(this).attr("href").replace(new RegExp("(?<!/)adTargeting_campaign=5g(?!-)"),"adTargeting_campaign=5g-mobility");n(this).attr("href",e)})}})}),define("components/selfish-scroll",["jquery","version!fly/managers/debug","version!fly/components/base"],function(e,t){t=t.init("selfishScroll"),e.widget("cnet.selfishScroll",e.fly.base,{options:{threshold:5},_create:function(){this._setup(),this._setupEvents()},_setupEvents:function(){var i=this;this.$element.on("scroll wheel",function(){var e=i.options.threshold<5?5:i.options.threshold,t=e,e=this.scrollHeight-e;Math.floor(this.scrollTop)<=t?this.scrollTop=t:Math.ceil(this.scrollTop+this.clientHeight)>=e&&(this.scrollTop=e-this.clientHeight)})}})}),function(n){n.fn.iframeTracker=function(e){var t=this.get();if(null===e||!1===e)n.iframeTracker.untrack(t);else{if("object"!=typeof e)throw new Error("Wrong handler type (must be an object, or null|false to untrack)");n.iframeTracker.track(t,e)}},n.iframeTracker={focusRetriever:null,focusRetrieved:!1,handlersList:[],isIE8AndOlder:!1,init:function(){try{1==n.browser.msie&&n.browser.version<9&&(this.isIE8AndOlder=!0)}catch(e){try{navigator.userAgent.match(/(msie) ([\w.]+)/i)[2]<9&&(this.isIE8AndOlder=!0)}catch(e){}}if(n(window).focus(),n(window).blur(function(e){n.iframeTracker.windowLoseFocus(e)}),n("body").append('<div style="position:fixed; top:0; left:0; overflow:hidden;" aria-hidden="true"><input style="position:absolute; left:-300px;" type="text" value="" id="focus_retriever" readonly="true" /></div>'),this.focusRetriever=n("#focus_retriever"),this.focusRetrieved=!1,n(document).mousemove(function(e){document.activeElement&&"IFRAME"==document.activeElement.tagName&&(n.iframeTracker.focusRetriever.focus(),n.iframeTracker.focusRetrieved=!0)}),this.isIE8AndOlder){this.focusRetriever.blur(function(e){e.stopPropagation(),e.preventDefault(),n.iframeTracker.windowLoseFocus(e)}),n("body").click(function(e){n(window).focus()}),n("form").click(function(e){e.stopPropagation()});try{n("body").on("click","form",function(e){e.stopPropagation()})}catch(e){console.log("[iframeTracker] Please update jQuery to 1.7 or newer. (exception: "+e.message+")")}}},track:function(e,t){t.target=e,n.iframeTracker.handlersList.push(t),n(e).bind("mouseover",{handler:t},n.iframeTracker.mouseoverListener).bind("mouseout",{handler:t},n.iframeTracker.mouseoutListener)},untrack:function(e){if("function"==typeof Array.prototype.filter){n(e).each(function(e){n(this).unbind("mouseover",n.iframeTracker.mouseoverListener).unbind("mouseout",n.iframeTracker.mouseoutListener)});function t(e){return null!==e}for(var i in this.handlersList){for(var a in this.handlersList[i].target)-1!==n.inArray(this.handlersList[i].target[a],e)&&(this.handlersList[i].target[a]=null);this.handlersList[i].target=this.handlersList[i].target.filter(t),0==this.handlersList[i].target.length&&(this.handlersList[i]=null)}this.handlersList=this.handlersList.filter(t)}else console.log("Your browser doesn't support Array filter, untrack disabled")},mouseoverListener:function(e){e.data.handler.over=!0;try{e.data.handler.overCallback(this)}catch(e){}},mouseoutListener:function(e){e.data.handler.over=!1,n.iframeTracker.focusRetriever.focus();try{e.data.handler.outCallback(this)}catch(e){}},windowLoseFocus:function(e){for(var t in this.handlersList)if(1==this.handlersList[t].over)try{this.handlersList[t].blurCallback()}catch(e){}}},n(document).ready(function(){n.iframeTracker.init()})}(jQuery),define("libs/jquery/iframetracker-1.1.0",function(){}),define("components/iframe-ad-tracker",["jquery","version!fly/managers/debug","managers/tealium","managers/page-vars","version!libs/jquery/iframetracker","version!fly/components/base"],function(i,a,n,e,t){a=a.init("iframeAdTracker"),i.widget("cnet.iframeAdTracker",i.fly.base,{options:{},_baseTrackingData:{_pageTitle:e.tracking.data._pageTitle,siteSection:e.tracking.data.siteSection,pageType:e.tracking.data.pageType,siteEdition:e.tracking.data.siteEdition,siteType:e.tracking.data.siteType,siteHier:e.tracking.data.siteHier,brand:e.tracking.data.brand,_pageChannelType:e.tracking.data._pageChannelType},_create:function(){this._setup(),this._setupEvents()},_setupEvents:function(){var t=this;t.$element.find("iframe").iframeTracker({blurCallback:function(e){a.log("iframe click: ",this._overId),n.trackCustomEvent("adClick",i.extend({},t._baseTrackingData,{dwLinkTag:this._overId,clickGenericText:this._overId}),"trackClick")},overCallback:function(e){this._overId=i(e).parents("[data-ad]").attr("data-ad")},outCallback:function(e){this._overId=null},_overId:null})}})}),define("components/leads-tracker",["jquery","version!fly/managers/debug","managers/tealium","managers/page-vars","version!fly/components/base"],function(d,c,u,p){c=c.init("leadsTracker"),d.widget("cnet.leadsTracker",d.fly.base,{options:{appendViewguid:!0,fireTrackingPing:!0,numNodes:3,trackingData:{},dwLinktag:null,leadsTrackerSelector:"a[data-component=leadsTracker]"},viewguid:null,commerceClickPlaceholder:"___COM_CLICK_ID___",_create:function(){this._setup(),this.viewguid=p.guid,this.options.appendViewguid&&this.viewguid&&(this.$element.attr("href",this.$element.attr("href").replace("___VIEW_GUID___",this.viewguid)),this.options.trackingData.destUrl=this.options.trackingData.destUrl.replace("___VIEW_GUID___",this.viewguid)),this.options.fireTrackingPing&&this._setupEvents(),window.leadsTracker=!0},_setupEvents:function(){var r=this,l={pdguid:"productId",assetguid:"articleId",assettitle:"articleTitle",ttag:"qp.ttag",topicguid:"_topicPrimaryId",promoHed:"productName"};this.$element.on("mousedown",function(e){if(0==e.button||1==e.button||2==e.button)try{var t=r.options.trackingData||r.options,i=d(this).parent()[0].classList.value;r._setCommerceClickId(),p.tracking.data.commerceClickId&&(d(this).attr("href",d(this).attr("href").replace(r.commerceClickPlaceholder,p.tracking.data.commerceClickId.replaceAll("-",""))),t.destUrl=t.destUrl.replace(r.commerceClickPlaceholder,p.tracking.data.commerceClickId.replaceAll("-","")));var a={_topicPrimaryId:t.topic||"",articleType:p.tracking.data.articleType||"deal",articleId:t.articleId||t.assetguid,_campaign:t.ttag?"ttag:"+t.ttag:null,commerceClickId:p.tracking.data.commerceClickId||"",_leadcpc:t.leadcpc,dwLinkTag:t.dwLinkTag||u.getDwTag(d(e.target),r.options.numNodes),eventTarget:(i?"."+i.replaceAll(" ",".")+" ":"")+r.options.leadsTrackerSelector,eventObject:e},n=this.href.split("?"),o=1<n.length?n[1].split("&"):{};d.each(o,function(e,t){var i="string"==typeof t?t.split("="):t,t=l[i[0]]||i[0];a[t]=i[1]});var s=d.extend(a,t);u.trackLead(s),setTimeout(d.proxy(function(){p.tracking.data.commerceClickId&&(d(this).attr("href",d(this).attr("href").replace(p.tracking.data.commerceClickId.replaceAll("-",""),r.commerceClickPlaceholder)),t.destUrl=t.destUrl.replace(p.tracking.data.commerceClickId.replaceAll("-",""),r.commerceClickPlaceholder))},this),500)}catch(e){c.log("Unable to parse tracking url",e)}})},_setCommerceClickId:function(){var e=window.uuid();utag_data.commerceClickId=e,p.tracking.data.commerceClickId=e}})}),define("components/module-asset-tracker",["jquery","version!fly/managers/debug","managers/tealium","managers/page-vars","version!fly/components/base"],function(n,e,o,t){var s=e.init("moduleAssetTracker");n.widget("cnet.moduleAssetTracker",n.fly.base,{options:{assetSelector:"[section]"},_baseTrackingData:{_pageTitle:t.tracking.data._pageTitle,siteSection:t.tracking.data.siteSection,pageType:t.tracking.data.pageType,siteEdition:t.tracking.data.siteEdition,siteType:t.tracking.data.siteType,siteHier:t.tracking.data.siteHier,brand:t.tracking.data.brand,_pageChannelType:t.tracking.data._pageChannelType},_moduleName:"",_create:function(){this._setup(),this._moduleName=this.$element.attr("section"),s.log("Set up event tracking for "+this._moduleName),this._setupEvents()},_setupEvents:function(){var a=this;a.$element.find("a").each(function(){var e=n(this).closest(a.options.assetSelector).attr("section"),t=e==a._moduleName?a._moduleName:a._moduleName+"|"+e,i=n.extend({},a._baseTrackingData,{clickGenericText:t});n(this).on("click",function(e){s.log("Firing e19: "+t),o.trackCustomEvent("trackClick",i,"trackClick")})})}})}),define("components/track-download",["jquery","version!fly/managers/debug","managers/tealium","managers/page-vars","version!fly/components/base"],function(e,t,i,a){t=t.init("trackDownload"),e.widget("cnet.trackDownload",e.fly.base,{options:{},_create:function(){this._super(),this.$element.on("click",function(){i.trackCustomEvent("trackDownload",{clickGenericText:"HeadertoDL",_siteSection:a.tracking.data.siteSection,siteEdition:a.tracking.data.siteEdition,_siteTypeDevice:a.tracking.data.deviceType,_pageType:a.tracking.data.pageType},"trackClick")})}})}),define("components/social-tracking",["jquery","version!fly/managers/debug","managers/tealium","version!fly/components/base"],function(a,n,o){n=n.init("socialTracking"),a.widget("cnet.socialTracking",a.fly.base,{options:{socialSite:"notSet"},_create:function(){this._setup(),this._setupTracking()},_setupTracking:function(){n.log("Setting up social tracking");var i=this.options;a(this.$element).on("click",function(e){n.log("Social Element Clicked, Tracking Now");var t=i.socialSite,e=o.getDwTag(a(e.target));o.trackSocial({socialService:t,event:"share",eventt:"socialsite",socialId:{facebooksend:1,facebook:2,googlePlus:3,linkedin:21,pinterest:5,reddit:6,stumbleupon:7,twitter:8,twitterfollow:9,email:10,delicious:12,tumblr:14}[t],wd:"sharelink",dwLinkTag:e,sharebarSection:e}),n.log("Social Element Tracked")})}})}),define("translations/video",["managers/edition"],function(e){return e.getTranslation({en:{resume:"Your video will resume in ",resumeShortly:"Your video will resume shortly",seconds:" seconds",adBlock:{title:"Sorry about that",message:"It looks like you're using an ad blocker. We know you don't love ads. But they allow us to pay the writers, editors and producers who work to make your favorite CNET videos. To watch this video, please disable your ad blocker and refresh the page. Thanks for tuning in. You're the best."},firefoxUpgrade:{title:"Your version of Firefox is no longer supported.",message:'<a href="http://download.cnet.com/s/firefox/" target="_blank">Click here to download the latest version.</a>'},videoNotAvailable:{title:"We're sorry, but this video is no longer available.",message:"Please watch this next video instead."},upnext:"up next",autoplay:"Autoplay",on:"on",off:"off",cannotPlay:"This device is unable to play the requested video.",by:"by",playSound:"Play Sound",watch_now:"Watch now"},es:{resume:"El vÃ­deo se reanudarÃ¡ en ",resumeShortly:"El vÃ­deo se reanudarÃ¡ en breve",seconds:" segundos",adBlock:{title:"Lo sentimos",message:"Parece que estÃ¡s usando un software para bloquear anuncios. Sabemos que a mucha gente no lo encantan los anuncios, pero nos ayudan a pagarle a nuestro equipo de profesionales que hacen tus videos favoritos. Para ver este video, por favor desactiva el software y vuelve a cargar la pÃ¡gina. Â¡Mil gracias!"},firefoxUpgrade:{title:"La versiÃ³n de Firefox que usas no estÃ¡ actualizada.",message:'<a href="http://download.cnet.com/s/firefox/" target="_blank">Por favor descarga la versiÃ³n mÃ¡s reciente.</a>'},videoNotAvailable:{title:"Lo sentimos, pero este video ya no estÃ¡ disponible.",message:"Por favor, vea el siguiente video en su lugar."},upnext:"Siguiente",autoplay:"Autoplay",on:"SÃ­",off:"No",cannotPlay:"Este dispositivo no puede reproducir el video solicitado.",by:"por",playSound:"Â¿Reproducir sonido?",watch_now:"Ve el video"}})}),define("uvpjs/video-event-tracking",["require","exports","module"],function(e,t,d){let c={},p=!1;function h(t,e,i,a,n,o){return null==c[t]&&(c[t]={target:null,lastEvent:{},timeWatched:0,eventTypes:i,interval:null,percentWatched:0,lastVol:0,muted:!1,inView:!1,autostart:n,isFullscreen:!1,placement:a,adsEnabled:o}),e?new YT.Player(`iframe-${t}`,{playerVars:{listType:"playlist",list:t,rel:0},host:"https://www.youtube.com",events:{onReady:s,onStateChange:r}}):new YT.Player(`iframe-${t}`,{videoId:t,playerVars:{modestbranding:1,rel:0},host:"https://www.youtube.com",events:{onReady:s,onStateChange:r}}),["","webkit","moz","ms"].forEach(e=>document.addEventListener(e+"fullscreenchange",function(){null===document.fullscreenElement?c[t].isFullscreen=!1:document.fullscreenElement.id.includes(t)&&(c[t].isFullscreen=!c[t].isFullscreen)},!1)),window.onscroll=function(){for(var e in c)if(c[e].target){const t=document.getElementById(`iframe-${e}`),i=t.getBoundingClientRect();i.top-i.height<=0&&0<i.top+i.height&&!1===c[e].inView?(c[e].inView=!0,t.dispatchEvent(new CustomEvent(`stateChange-${e}`,{detail:{payload:{"@type":"core.videoViewed.v1",videoContext:d.exports.getVideoContext(c[e].target)}}}))):(i.top+i.height<=0||0<i.top-i.height)&&!0===c[e].inView&&(c[e].inView=!1)}},document.getElementById(`iframe-${t}`)}function s(e){const t=e.target.playerInfo.playlistId||e.target.playerInfo.videoData.video_id,i=document.getElementById(`iframe-${t}`);c[t].target=e.target,c[t].autostart&&e.target.playVideo(),i.dispatchEvent(new CustomEvent(`stateChange-${t}`,{detail:{payload:{"@type":"core.videoLoaded.v1",videoContext:d.exports.getVideoContext(e.target)}}}))}function r(e){e.target.playerInfo.currentTime;const t=e.target.playerInfo.playlistId||e.target.playerInfo.videoData.video_id,i=document.getElementById(`iframe-${t}`),a=c[t].eventTypes,n=c[t].lastEvent;let o;1!==e.data&&null!==c[t].interval&&clearInterval(c[t].interval),0===e.data&&a.includes("completed")?o="videoCompleted":1===e.data?(c[t].lastVol=e.target.playerInfo.volume,c[t].muted=e.target.isMuted(),c[t].interval=setInterval(function(){!function(e,t){const i=document.getElementById(`iframe-${t}`);var a,n;c[t].eventTypes.includes("watched")&&(c[t].timeWatched+=1,(a=e.target.playerInfo.duration)-3<=(n=e.target.playerInfo.currentTime)&&c[t].percentWatched<100?(i.dispatchEvent(new CustomEvent(`stateChange-${t}`,{detail:{payload:{"@type":"core.videoWatched.v1",videoContext:d.exports.getVideoContext(e.target),videoWatched:100,videoWatchedTime:Math.floor(c[t].timeWatched)}}})),c[t].percentWatched=100):.75*a<=n&&c[t].percentWatched<75?(i.dispatchEvent(new CustomEvent(`stateChange-${t}`,{detail:{payload:{"@type":"core.videoWatched.v1",videoContext:d.exports.getVideoContext(e.target),videoWatched:75,videoWatchedTime:Math.floor(c[t].timeWatched)}}})),c[t].percentWatched=75):a/2<=n&&c[t].percentWatched<50?(i.dispatchEvent(new CustomEvent(`stateChange-${t}`,{detail:{payload:{"@type":"core.videoWatched.v1",videoContext:d.exports.getVideoContext(e.target),videoWatched:50,videoWatchedTime:Math.floor(c[t].timeWatched)}}})),c[t].percentWatched=50):a/4<=n&&c[t].percentWatched<25&&(i.dispatchEvent(new CustomEvent(`stateChange-${t}`,{detail:{payload:{"@type":"core.videoWatched.v1",videoContext:d.exports.getVideoContext(e.target),videoWatched:25,videoWatchedTime:Math.floor(c[t].timeWatched)}}})),c[t].percentWatched=25)),c[t].eventTypes.includes("volume")&&(c[t].muted===e.target.isMuted()&&c[t].lastVol===e.target.playerInfo.volume||(i.dispatchEvent(new CustomEvent(`stateChange-${t}`,{detail:{payload:{"@type":"core.videoVolumeChanged.v1",videoContext:d.exports.getVideoContext(e.target),videoMuted:e.target.isMuted()}}})),c[t].lastVol=e.target.playerInfo.volume,c[t].muted=e.target.isMuted()))}(e,t)},1e3),"videoSeekStarted"===n.type||1<e.target.playerInfo.currentTime-n.videoTime&&a.includes("seek")?(0<c[t].timeWatched-n.videoTime&&(c[t].timeWatched=c[t].timeWatched-(c[t].timeWatched-n.videoTime)),o="videoSeekCompleted"):a.includes("playing")&&(o="notStarted"===c[t].lastEvent.type?"videoStarted":"videoPlayed")):2===e.data?0!=n.eventTime&&Math.abs(.001*(Date.now()-n.eventTime)-(e.target.playerInfo.currentTime-n.videoTime))<2&&a.includes("paused")?o="videoPaused":a.includes("seek")&&(o="videoSeekStarted"):3===e.data?"notStarted"!==n.type&&"videoSeekStarted"!==n.type&&(o="videoInterrupted"):-1===e.data&&(c[t].lastEvent={type:"notStarted",eventTime:Date.now(),videoTime:e.target.playerInfo.currentTime}),void 0!==o&&(c[t].lastEvent={type:o,eventTime:Date.now(),videoTime:e.target.playerInfo.currentTime},i.dispatchEvent(new CustomEvent(`stateChange-${t}`,{detail:{payload:{"@type":"core."+o+".v1",videoContext:d.exports.getVideoContext(e.target)}}})),"videoCompleted"===o&&(c[t].timeWatched=0,c[t].interval=null,c[t].percentWatched=0,c[t].lastEvent={}))}function o(e){e.getContainer().dispatchEvent(new CustomEvent(`stateChange-${e.getPlaylistItem().feedid}`,{detail:{payload:{"@type":"core.videoVolumeChanged.v1",videoContext:d.exports.getJWVideoContext(e)}}}))}function a(e,t,i){const a=window.uvpjs.getVideoManager().VCIs[e];let n={"@type":`core.${t}`,videoContext:d.exports.getUVPVideoContext(e)};const o=t.toLowerCase();o.includes("videoad")&&(null!=c[e].adData.videoAdTitle?(n.videoAdContext={videoAdId:c[e].adData.videoAdId,videoAdTitle:c[e].adData.videoAdTitle,adRollPosition:c[e].adData.adRollPosition},null!=c[e].adData.adSkippable?n.videoAdContext.adSkippable=c[e].adData.adSkippable:null!=i&&null!=i.payload.adData&&null!=i.payload.imaAdData&&(c[e].adData.adSkippable=-1<i.payload.imaAdData.skipTimeOffset,n.videoAdContext.adSkippable=-1<i.payload.imaAdData.skipTimeOffset)):null!=i&&null!=i.payload.adData&&(n.videoAdContext={videoAdId:i.payload.adData.adVideoId||null,videoAdTitle:i.payload.adData.adVideoTitle||null,adRollPosition:i.payload.adData.adType?i.payload.adData.adType.charAt(0).toUpperCase()+i.payload.adData.adType.slice(1):null},null!=i.payload.imaAdData&&(n.videoAdContext.adSkippable=-1<i.payload.imaAdData.skipTimeOffset),c[e].adData=n.videoAdContext)),o.includes("volume")?(o.includes("videoad")?n.videoAdMuted=a.getPlayerMuted():n.videoMuted=a.getPlayerMuted(),n.previousVolumeLevel=c[e].previousVolumeLevel,c[e].previousVolumeLevel=a.getPlayerMuted()?0:Math.round(100*a.getVolume())):o.includes("interrupted")?n.method=i.payload.errorInfo.message||"":o.includes("paused")?(n.pauseType=i.payload.autoPause?"auto":"manual",o.includes("videoAd")&&(n.autostart=a._autoPlay)):o.includes("played")||o.includes("seekstarted")&&(n.videoContext.playheadPosition=Math.ceil(i.payload.seekFromTime)),document.getElementById(e).dispatchEvent(new CustomEvent(`stateChange-${e}`,{detail:{payload:n}}))}d.exports.createVideoPlayer=async(e,t,i,a,n,o)=>{return 0==i.length&&(i=["playing","paused","completed","seek","volume","watched","interrupted","ad"]),s=e,r=t,l=i,d=a,c=n,u=o,new Promise((e,t)=>{(p||0<document.querySelectorAll('script[src="https://www.youtube.com/iframe_api"]').length)&&e(h(s,r,l,d,c,u));const i=document.createElement("script");i.src="https://www.youtube.com/iframe_api";const a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(i,a),window.addEventListener("youtube_ready",function(){e(h(s,r,l,d,c,u))}),window.onYouTubeIframeAPIReady=function(){p=!0;var e=new Event("youtube_ready");window.dispatchEvent(e)},setTimeout(()=>{p||(p=!0,t(new Error("Iframe is not ready")))},1e4)});var s,r,l,d,c,u},d.exports.getVideoContext=e=>{var t=e.playerInfo.playlistId||e.playerInfo.videoData.video_id;return{videoId:e.playerInfo.videoData.video_id,videoTitle:e.playerInfo.videoData.title,sequenceType:e.playerInfo.playlistId?"playlist":"single",playlistId:e.playerInfo.playlistId?e.playerInfo.videoData.playlistId:"",playlistTitle:e.playerInfo.playlistTitle?e.playerInfo.videoData.playlistTitle:"",playlistIndex:e.playerInfo.playlistIndex||0,videoPlayer:"Youtube",videoLength:Math.round(e.playerInfo.duration),playheadPosition:Math.round(e.playerInfo.currentTime),volumeLevel:e.isMuted()?0:e.playerInfo.volume,videoQuality:e.playerInfo.playbackQuality,fullScreenEnabled:c[t].isFullscreen,adEnabled:!(!c[t].adsEnabled||c[t].autostart),brand:c[t].placement.brand||"",category:c[t].placement.category||"",productId:c[t].placement.productId||"",location:c[t].placement.location||"",articlePlacement:c[t].placement.articlePlacement||"",autoplay:c[t].autostart,name:c[t].placement.name||""}},d.exports.trackJWPlayer=(s,e,i,a,n)=>{0==e.length&&(e=["playing","paused","completed","seek","volume","watched","interrupted","ad"]),s.on("beforePlay",e=>{var t=s.getPlaylistItem().mediaid;null==c[t]&&(c[t]={type:"",timeWatched:0,percentWatched:0,autostart:a,placement:i,quality:null,timeSkipped:0,seekStart:0,lastEvent:"",adsEnabled:n})}),s.on("playlistItem",e=>{var t=s.getPlaylistItem().mediaid;null==c[t]&&(c[t]={type:"",timeWatched:0,percentWatched:0,autostart:a,placement:i,quality:null,timeSkipped:0,seekStart:0,lastEvent:"",adsEnabled:n}),(t=s).getContainer().dispatchEvent(new CustomEvent(`stateChange-${t.getPlaylistItem().feedid}`,{detail:{payload:{"@type":"core.videoLoaded.v1",videoContext:d.exports.getJWVideoContext(t)}}}))}),e.includes("playing")&&s.on("play",e=>{var t;t=s,c[t.getPlaylistItem().mediaid].lastEvent="play",t.getContainer().dispatchEvent(new CustomEvent(`stateChange-${t.getPlaylistItem().feedid}`,{detail:{payload:{"@type":"core.videoPlayed.v1",videoContext:d.exports.getJWVideoContext(t)}}}))}),e.includes("paused")&&s.on("pause",e=>{var t;t=s,c[t.getPlaylistItem().mediaid].lastEvent="pause",t.getContainer().dispatchEvent(new CustomEvent(`stateChange-${t.getPlaylistItem().feedid}`,{detail:{payload:{"@type":"core.videoPaused.v1",videoContext:d.exports.getJWVideoContext(t)}}}))}),e.includes("completed")&&s.on("complete",e=>{var t;t=s,c[t.getPlaylistItem().mediaid].lastEvent="completed",t.getContainer().dispatchEvent(new CustomEvent(`stateChange-${t.getPlaylistItem().feedid}`,{detail:{payload:{"@type":"core.videoCompleted.v1",videoContext:d.exports.getJWVideoContext(t)}}}))}),e.includes("seek")&&(s.on("seek",e=>{var t;t=s,c[t.getPlaylistItem().mediaid].lastEvent="seek",c[t.getPlaylistItem().mediaid].seekStart=t.getPosition(),t.getContainer().dispatchEvent(new CustomEvent(`stateChange-${t.getPlaylistItem().feedid}`,{detail:{payload:{"@type":"core.videoSeekStarted.v1",videoContext:d.exports.getJWVideoContext(t)}}}))}),s.on("seeked",e=>{var t;t=s,c[t.getPlaylistItem().mediaid].lastEvent="seek",c[t.getPlaylistItem().mediaid].timeSkipped=Math.round(t.getPosition()-c[t.getPlaylistItem().mediaid].seekStart),t.getContainer().dispatchEvent(new CustomEvent(`stateChange-${t.getPlaylistItem().feedid}`,{detail:{payload:{"@type":"core.videoSeekCompleted.v1",videoContext:d.exports.getJWVideoContext(t)}}}))})),e.includes("volume")&&(s.on("mute",e=>{o(s)}),s.on("volume",e=>{o(s)})),e.includes("watched")&&s.on("time",e=>{var t,i,a,n,o;i=(t=s).getPlaylistItem().mediaid,a=t.getPlaylistItem().feedid,n=t.getDuration(),o=t.getPosition(),n-3<=o&&c[i].percentWatched<100?(c[i].percentWatched=100,t.getContainer().dispatchEvent(new CustomEvent(`stateChange-${a}`,{detail:{payload:{"@type":"core.videoWatched.v1",videoContext:d.exports.getJWVideoContext(t),videoWatched:100,videoWatchedTime:Math.round(o-c[i].timeSkipped)}}}))):.75*n<=o&&c[i].percentWatched<75?(c[i].percentWatched=75,t.getContainer().dispatchEvent(new CustomEvent(`stateChange-${a}`,{detail:{payload:{"@type":"core.videoWatched.v1",videoContext:d.exports.getJWVideoContext(t),videoWatched:75,videoWatchedTime:Math.round(o-c[i].timeSkipped)}}}))):.5*n<=o&&c[i].percentWatched<50?(c[i].percentWatched=50,t.getContainer().dispatchEvent(new CustomEvent(`stateChange-${a}`,{detail:{payload:{"@type":"core.videoWatched.v1",videoContext:d.exports.getJWVideoContext(t),videoWatched:50,videoWatchedTime:Math.round(o-c[i].timeSkipped)}}}))):.25*n<=o&&c[t.getPlaylistItem().mediaid].percentWatched<25&&(c[i].percentWatched=25,t.getContainer().dispatchEvent(new CustomEvent(`stateChange-${a}`,{detail:{payload:{"@type":"core.videoWatched.v1",videoContext:d.exports.getJWVideoContext(t),videoWatched:25,videoWatchedTime:Math.round(o-c[i].timeSkipped)}}})))}),e.includes("interrupted")&&s.on("firstFrame",e=>{var t;(t=s).getContainer().dispatchEvent(new CustomEvent(`stateChange-${t.getPlaylistItem().feedid}`,{detail:{payload:{"@type":"core.videoStarted.v1",videoContext:d.exports.getJWVideoContext(t)}}})),s.on("buffer",e=>{var t;t=s,e=e,"play"===c[t.getPlaylistItem().mediaid].lastEvent&&t.getContainer().dispatchEvent(new CustomEvent(`stateChange-${t.getPlaylistItem().feedid}`,{detail:{payload:{"@type":"core.videoInterrupted.v1",videoContext:d.exports.getJWVideoContext(t),method:e.reason}}}))})}),e.includes("ad")&&(s.on("adRequest",e=>{var t;(t=s).getContainer().dispatchEvent(new CustomEvent(`stateChange-${t.getPlaylistItem().feedid}`,{detail:{payload:{"@type":"core.videoAdRequested.v1",videoContext:d.exports.getJWVideoContext(t)}}}))}),s.on("adStarted",e=>{var t;(t=s).getContainer().dispatchEvent(new CustomEvent(`stateChange-${t.getPlaylistItem().feedid}`,{detail:{payload:{"@type":"core.videoAdStarted.v2",videoContext:d.exports.getJWVideoContext(t)}}}))}),s.on("adPause",e=>{var t;(t=s).getContainer().dispatchEvent(new CustomEvent(`stateChange-${t.getPlaylistItem().feedid}`,{detail:{payload:{"@type":"core.videoAdPaused.v2",videoContext:d.exports.getJWVideoContext(t)}}}))}),s.on("adComplete",e=>{var t;(t=s).getContainer().dispatchEvent(new CustomEvent(`stateChange-${t.getPlaylistItem().feedid}`,{detail:{payload:{"@type":"core.videoAdCompleted.v2",videoContext:d.exports.getJWVideoContext(t)}}}))}),s.on("adSkipped",e=>{var t;(t=s).getContainer().dispatchEvent(new CustomEvent(`stateChange-${t.getPlaylistItem().feedid}`,{detail:{payload:{"@type":"core.videoAdSkipped.v2",videoContext:d.exports.getJWVideoContext(t)}}}))}),s.on("adTime",e=>{var i;(i=s).on("viewable",e=>{var t;(t=i).getContainer().dispatchEvent(new CustomEvent(`stateChange-${t.getPlaylistItem().feedid}`,{detail:{payload:{"@type":"core.videoAdViewed.v1",videoContext:d.exports.getJWVideoContext(t)}}}))}),i.on("volume",e=>{var t;(t=i).getContainer().dispatchEvent(new CustomEvent(`stateChange-${t.getPlaylistItem().feedid}`,{detail:{payload:{"@type":"core.videoAdVolumeChanged.v1",videoContext:d.exports.getJWVideoContext(t)}}}))}),i.getContainer().dispatchEvent(new CustomEvent(`stateChange-${i.getPlaylistItem().feedid}`,{detail:{payload:{"@type":"core.videoAdWatched.v1",videoContext:d.exports.getJWVideoContext(i)}}}))}),s.on("adSchedule",e=>{var t;(t=s).getContainer().dispatchEvent(new CustomEvent(`stateChange-${t.getPlaylistItem().feedid}`,{detail:{payload:{"@type":"core.videoAdLoaded.v1",videoContext:d.exports.getJWVideoContext(t)}}}))})),s.on("visualQuality",e=>{c[s.getPlaylistItem().mediaid].quality=s.getVisualQuality()}),s.on("viewable",e=>{var t;(t=s).getContainer().dispatchEvent(new CustomEvent(`stateChange-${t.getPlaylistItem().feedid}`,{detail:{payload:{"@type":"core.videoViewed.v1",videoContext:d.exports.getJWVideoContext(t)}}}))})},d.exports.getJWVideoContext=e=>{var t=e.getPlaylistItem(),i=t.mediaid;return{videoId:i,videoTitle:t.title,sequenceType:t.feedData.feedid?"playlist":"single",playlistId:t.feedData.feedid||"",playlistTitle:t.feedData.feedid?t.feedData.title:"",playlistIndex:e.getPlaylistIndex(),videoPlayer:e.getProvider().name,videoLength:t.duration,playheadPosition:Math.round(e.getPosition()),volumeLevel:e.getMute()?0:e.getVolume(),videoQuality:null!=e.getVisualQuality()?e.getVisualQuality().level.label:c[i].quality,fullScreenEnabled:e.getFullscreen(),adEnabled:!c[i].adsEnabled,brand:c[i].placement.brand||"",category:c[i].placement.category||"",productId:c[i].placement.productId||"",location:c[i].placement.location||"",articlePlacement:c[i].placement.articlePlacement||"",name:c[i].placement.name||"",bitRate:null!=e.getVisualQuality()?e.getVisualQuality().level.bitrate:c[i].quality}},d.exports.trackUVP=i=>{const t=window.uvpjs.getVideoManager().VCIs[i];c[i]={timeSkipped:0,interval:null,percentWatched:0,previousVolumeLevel:t.getPlayerMuted()?0:Math.round(100*t.getVolume()),metadata:{},adData:{},isAd:!1},function(i){let e=new IntersectionObserver((e,t)=>{e.forEach(e=>{e.isIntersecting&&(c[i].isAd?a(i,"videoAdViewed.v2"):a(i,"videoViewed.v1"))})});var t=document.getElementById(i);e.observe(t)}(i),t.addEventListener("contextMetadata.trackUVP"+i,e=>{c[i].metadata=e.payload.contextMetadata}),t.addEventListener("onAdRequest.trackUVP"+i,e=>{a(i,"videoAdRequested.v1",e)}),t.addEventListener("onAdLoaded.trackUVP"+i,e=>{a(i,"videoAdLoaded.v2",e)}),t.addEventListener("onAdStart.trackUVP"+i,e=>{c[i].isAd=!0,a(i,"videoAdStarted.v3",e)}),t.addEventListener("onAdSkipped.trackUVP"+i,e=>{a(i,"videoAdSkipped.v3",e)}),t.addEventListener("onAdEnd.trackUVP"+i,e=>{!function(e,t){const i=window.uvpjs.getVideoManager().VCIs[t];clearInterval(c[t].interval),100===c[t].percentWatched&&a(t,"videoAdCompleted.v3",e),c[t]={timeSkipped:0,interval:null,percentWatched:0,previousVolumeLevel:i.getPlayerMuted()?0:Math.round(100*i.getVolume()),metadata:{},adData:{},isAd:!1}}(e,i)}),t.addEventListener("onStateChange.trackUVP"+i,e=>{switch(1!==e.payload.newState&&null!==c[i].interval&&clearInterval(c[i].interval),e.payload.newState){case 0:e.payload.isAd||(a(i,"videoCompleted.v1",e),c[i]={timeSkipped:0,interval:null,percentWatched:0,previousVolumeLevel:t.getPlayerMuted()?0:Math.round(100*t.getVolume()),metadata:{},adData:{},isAd:!1});break;case 1:c[i].interval=setInterval(function(){!function(e,t){const i=document.getElementById(e),a=window.uvpjs.getVideoManager().VCIs[e];let n="videoWatched",o={};t&&(n="videoAdWatched",o=c[e].adData);var s=a.getCurrentPlaybackState().duration,r=a.getCurrentPlaybackState().currentTime,l=0<c[e].timeSkipped?a.getCurrentPlaybackState().currentTime-c[e].timeSkipped:a.getCurrentPlaybackState().currentTime;s-3<=r&&c[e].percentWatched<100?(t?i.dispatchEvent(new CustomEvent(`stateChange-${e}`,{detail:{payload:{"@type":"core."+n+".v2",videoContext:d.exports.getUVPVideoContext(e),videoAdContext:o,videoAdWatched:100,videoAdWatchedTime:Math.floor(l)}}})):i.dispatchEvent(new CustomEvent(`stateChange-${e}`,{detail:{payload:{"@type":"core."+n+".v1",videoContext:d.exports.getUVPVideoContext(e),videoWatched:100,videoWatchedTime:Math.floor(l)}}})),c[e].percentWatched=100):.75*s<=r&&c[e].percentWatched<75?(t?i.dispatchEvent(new CustomEvent(`stateChange-${e}`,{detail:{payload:{"@type":"core."+n+".v2",videoContext:d.exports.getUVPVideoContext(e),videoAdContext:o,videoAdWatched:75,videoAdWatchedTime:Math.floor(l)}}})):i.dispatchEvent(new CustomEvent(`stateChange-${e}`,{detail:{payload:{"@type":"core."+n+".v1",videoContext:d.exports.getUVPVideoContext(e),videoWatched:75,videoWatchedTime:Math.floor(l)}}})),c[e].percentWatched=75):s/2<=r&&c[e].percentWatched<50?(t?i.dispatchEvent(new CustomEvent(`stateChange-${e}`,{detail:{payload:{"@type":"core."+n+".v2",videoContext:d.exports.getUVPVideoContext(e),videoAdContext:o,videoAdWatched:50,videoAdWatchedTime:Math.floor(l)}}})):i.dispatchEvent(new CustomEvent(`stateChange-${e}`,{detail:{payload:{"@type":"core."+n+".v1",videoContext:d.exports.getUVPVideoContext(e),videoWatched:50,videoWatchedTime:Math.floor(l)}}})),c[e].percentWatched=50):s/4<=r&&c[e].percentWatched<25&&(t?i.dispatchEvent(new CustomEvent(`stateChange-${e}`,{detail:{payload:{"@type":"core."+n+".v2",videoContext:d.exports.getUVPVideoContext(e),videoAdContext:o,videoAdWatched:25,videoAdWatchedTime:Math.floor(l)}}})):i.dispatchEvent(new CustomEvent(`stateChange-${e}`,{detail:{payload:{"@type":"core."+n+".v1",videoContext:d.exports.getUVPVideoContext(e),videoWatched:25,videoWatchedTime:Math.floor(l)}}})),c[e].percentWatched=25)}(i,e.payload.isAd)},1e3),e.payload.isAd||a(i,"videoPlayed.v1",e)}}),t.addEventListener("seekDone.trackUVP"+i,e=>{var t;t=e,e=i,c[e].timeSkipped+=t.payload.seekToTime-t.payload.seekFromTime,a(e,"videoSeekStarted.v1",t),a(e,"videoSeekCompleted.v1",t)}),t.addEventListener("videoPlaybackError.trackUVP"+i,e=>{a(i,"videoInterrupted.v1",e)}),t.addEventListener("onContentStart.trackUVP"+i,e=>{c[i].isAd=!1,a(i,"videoStarted.v1",e)}),t.addEventListener("onContentDataLoaded.trackUVP"+i,e=>{a(i,"videoLoaded.v1",e)}),t.addEventListener("controlPause.trackUVP"+i,e=>{c[i].isAd?a(i,"videoAdPaused.v3",e):a(i,"videoPaused.v1",e)}),t.addEventListener("controlVolumeChange.trackUVP"+i,e=>{a(i,"videoVolumeChanged.v1",e)}),t.addEventListener("onAdVolumeChange.trackUVP"+i,e=>{a(i,"videoAdVolumeChanged.v2",e)})},d.exports.getUVPVideoContext=e=>{const t=window.uvpjs.getVideoManager().VCIs[e],i=window.uvpjs.getVideoManager().VCIs[e].getContentVideoData(),a=i.cmsRefGuid;let n=[];return void 0!==window.utag_data&&Array.isArray(window.utag_data.tagSlugs)&&window.utag_data.tagSlugs.forEach(e=>{n.push({key:"utag",value:e})}),{videoId:a,videoTitle:i.videoTitle,sequenceType:1<t.rcoIdIndex?"playlist":"single",videoPlayer:"UVP",videoLength:Math.ceil(t.getCurrentPlaybackState().duration),playheadPosition:Math.ceil(t.getCurrentPlaybackState().currentTime),volumeLevel:t.getPlayerMuted()?0:Math.round(100*t.getVolume()),fullScreenEnabled:!(!document.fullscreenElement||!document.fullscreenElement.classList.contains("uvpjs")),livestream:t.getCurrentPlaybackState().isPlayingLive,brand:c[e].metadata.topicPrimaryId||"",category:c[e].metadata.siteHier||"",bitRate:t.getCurrentPlaybackState().facadeState?t.getCurrentPlaybackState().facadeState.currentBitrate:null,frameRate:t.getCurrentPlaybackState().facadeState?t.getCurrentPlaybackState().facadeState.playbackFramerate:null,autoplay:t._autoPlay,tags:0<n.length?n:null}}}),function(p){var d,t,i;function v(e,t){return e.innerHeight()>t.maxHeight}function y(e,t){for(;-1<p.inArray(e.slice(-1),t.lastCharacter.remove);)e=e.slice(0,-1);return p.inArray(e.slice(-1),t.lastCharacter.noEllipsis)<0&&(e+=t.ellipsis),e}function c(e){return{width:e.innerWidth(),height:e.innerHeight()}}function A(e,t){e.innerText?e.innerText=t:e.nodeValue?e.nodeValue=t:e.textContent&&(e.textContent=t)}function w(e){return e.innerText||e.nodeValue||e.textContent||""}p.fn.dotdotdot||(p.fn.dotdotdot=function(e){if(0==this.length)return e&&!1===e.debug||(t="string"==typeof(t='No element found for "'+this.selector+'".')?"dotdotdot: "+t:["dotdotdot:",t],void 0!==window.console&&void 0!==window.console.log&&window.console.log(t)),this;if(1<this.length)return this.each(function(){p(this).dotdotdot(e)});var a=this;a.data("dotdotdot")&&a.trigger("destroy.dot"),a.data("dotdotdot-style",a.attr("style")),a.css("word-wrap","break-word"),"nowrap"===a.css("white-space")&&a.css("white-space","normal"),a.bind_events=function(){return a.bind("update.dot",function(e,t){e.preventDefault(),e.stopPropagation(),n.maxHeight="number"==typeof n.height?n.height:function(e){for(var t=e.innerHeight(),i=["paddingTop","paddingBottom"],a=0,n=i.length;a<n;a++){var o=parseInt(e.css(i[a]),10);t-=o=isNaN(o)?0:o}return t}(a),n.maxHeight+=n.tolerance,void 0===t||(t="string"==typeof t||t instanceof HTMLElement?p("<div />").append(t).contents():t)instanceof p&&(i=t),(l=a.wrapInner('<div class="dotdotdot" />').children()).empty().append(i.clone(!0)).css({height:"auto",width:"auto",border:"none",padding:0,margin:0});e=!1,t=!1;return o.afterElement&&(e=o.afterElement.clone(!0),o.afterElement.remove()),v(l,n)&&(t="children"==n.wrap?function(e,t,i){var a=e.children(),n=!1;e.empty();for(var o=0,s=a.length;o<s;o++){var r=a.eq(o);if(e.append(r),i&&e.append(i),v(e,t)){r.remove(),n=!0;break}i&&i.detach()}return n}(l,n,e):function e(t,i,a,n,o){var s=t.contents(),r=!1;t.empty();for(var l=0,d=s.length;l<d&&!r;l++){var c=s[l],u=p(c);void 0!==c&&(t.append(u),o&&t[t.is("table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, blockquote, select, optgroup, option, textarea, script, style")?"after":"append"](o),3==c.nodeType?v(a,n)&&(r=function e(t,i,a,n,o){var s=!1;if(void 0===(g=t[0]))return!1;for(var r=-1!==(f=w(g)).indexOf(" ")?" ":"ã€€",l="letter"==n.wrap?"":r,d=f.split(l),c=-1,u=-1,p=0,h=d.length-1;p<=h&&(0!=p||0!=h);){var m=Math.floor((p+h)/2);if(m==u)break;u=m,A(g,d.slice(0,u+1).join(l)+n.ellipsis),v(a,n)?h=u:p=c=u,h==p&&0==h&&n.fallbackToLetter&&(l="",u=c=-1,h=(d=d[p=0].split(l)).length-1)}{var g,f;-1==c||1==d.length&&0==d[0].length?(r=t.parent(),t.remove(),t=o?o.length:0,r.contents().size()>t?s=e(r.contents().eq(-1-t),i,a,n,o):(i=r.prev(),void 0!==(g=i.contents().eq(-1)[0])&&(A(g,f=y(w(g),n)),o&&i.append(o),r.remove(),s=!0))):(s=!0,A(g,f=y(d.slice(0,c+1).join(l),n)))}return s}(u,i,a,n,o)):r=e(u,i,a,n,o),r||o&&o.detach())}return r}(l,a,l,n,e)),l.replaceWith(l.contents()),l=null,p.isFunction(n.callback)&&n.callback.call(a[0],t,i),o.isTruncated=t}).bind("isTruncated.dot",function(e,t){return e.preventDefault(),e.stopPropagation(),"function"==typeof t&&t.call(a[0],o.isTruncated),o.isTruncated}).bind("originalContent.dot",function(e,t){return e.preventDefault(),e.stopPropagation(),"function"==typeof t&&t.call(a[0],i),i}).bind("destroy.dot",function(e){e.preventDefault(),e.stopPropagation(),a.unwatch().unbind_events().empty().append(i).attr("style",a.data("dotdotdot-style")).data("dotdotdot",!1)}),a},a.unbind_events=function(){return a.unbind(".dot"),a},a.watch=function(){var e,t,i;return a.unwatch(),"window"==n.watch?(e=p(window),t=e.width(),i=e.height(),e.bind("resize.dot"+o.dotId,function(){t==e.width()&&i==e.height()&&n.windowResizeFix||(t=e.width(),i=e.height(),r&&clearInterval(r),r=setTimeout(function(){a.trigger("update.dot")},10))})):(s=c(a),r=setInterval(function(){var e=c(a);s.width==e.width&&s.height==e.height||(a.trigger("update.dot"),s=c(a))},100)),a},a.unwatch=function(){return p(window).unbind("resize.dot"+o.dotId),r&&clearInterval(r),a};var t,i=a.contents(),n=p.extend(!0,{},p.fn.dotdotdot.defaults,e),o={},s={},r=null,l=null;return n.lastCharacter.remove instanceof Array||(n.lastCharacter.remove=p.fn.dotdotdot.defaultArrays.lastCharacter.remove),n.lastCharacter.noEllipsis instanceof Array||(n.lastCharacter.noEllipsis=p.fn.dotdotdot.defaultArrays.lastCharacter.noEllipsis),o.afterElement=void 0!==(t=n.after)&&(!!t&&("string"==typeof t?!!(t=p(t,a)).length&&t:"object"==typeof t&&(void 0!==t.jquery&&t))),o.isTruncated=!1,o.dotId=d++,a.data("dotdotdot",!0).bind_events().trigger("update.dot"),n.watch&&a.watch(),a},p.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",fallbackToLetter:!0,lastCharacter:{},tolerance:0,callback:null,after:null,height:null,watch:!1,windowResizeFix:!0,debug:!1},p.fn.dotdotdot.defaultArrays={lastCharacter:{remove:[" ","ã€€",",",";",".","!","?"],noEllipsis:[]}},d=1,t=p.fn.html,p.fn.html=function(e){return void 0!==e?this.data("dotdotdot")&&"function"!=typeof e?this.trigger("update",[e]):t.call(this,e):t.call(this)},i=p.fn.text,p.fn.text=function(e){if(void 0===e)return i.call(this);if(this.data("dotdotdot")){var t=p("<div />");return t.text(e),e=t.html(),t.remove(),this.trigger("update",[e])}return i.call(this,e)})}(jQuery),define("libs/jquery/dotdotdot-1.6.1",function(){}),define("quantum/videoPlayer",["jquery","version!fly/managers/debug","managers/client-storage","translations/video","version!fly/managers/components","utils/cookie","managers/device","managers/edition","managers/events","version!fly/managers/history","managers/page-vars","managers/recommendation","managers/global-functions","managers/tealium","managers/mpulse","version!fly/utils/url-helper","utils/targeting-helper","managers/waypoints","uvpjs/video-event-tracking","uvpjs-video-player","version!fly/components/base","version!libs/waypoints/inview","version!libs/jquery/dotdotdot"],function(c,l,e,r,s,a,u,n,d,t,p,i,o,h,m,g,f,v,y){var A="videoPlayer";l=l.init(A),v.init();var w={cnetvideocreate:0,playerloaded:0,showplayoverlay:0,adstart:0,adend:0,contentstart:0},b=0,_=new window.uvpjs.VideoManager;c.widget("cnet.videoPlayer",c.fly.base,{options:{apeList:!1,autoplay:!1,classActive:"active",classCaptions:"captions",classCaptionsMissing:"captionsMissing",classDisabled:"disabled",classHidden:"hidden",classNoAutoplay:"pausedAtStartup",classPlaybackStarted:"playbackStarted",classPlaying:"playing",config:null,contentType:"vod-curated",customCSS:null,enableHistoryUpdates:!1,eventChannels:null,eventSubscriptions:null,getPlaylistSelector:null,getRelatedPlaylist:!1,getRecommendedPlaylist:!1,getShortcodeVideo:!1,idPrefix:"videoPlayer",loaderSelector:"#related-area",loop:!0,mainPlayer:!1,mutedVideoCountThreshold:10,playlist:[],preventCaptions:null,resizePlayer:!0,scrollIntoView:!1,selectorScrollingAutoplayDisabled:".inviewElement.exited",showAsModal:!1,showPreviewMetadata:!1,suppressAds:!1,suppressFirstAd:!0,tagTopicPlaylistRoute:"",titleTagPostText:"",upNextTriggerTime:30,uvpPartner:"cnet",videoShortcodeSelector:".video.shortcode"},adPodStartTimestamp:0,autoplayState:null,chapters:null,contentStartTimeStamp:null,contentVideoState:-2,errorDetails:{MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError"},haveFirstGesture:!1,id:null,initialized:!1,interrupted:!1,isAd:!1,isAmp:!1,isPlaying:!1,history:null,closePlayerRequested:!1,pauseRequested:!1,outOfViewPaused:!0,player:null,playlist:[],playlistPaused:!1,scrollingAutoplayWaypoint:null,startingNewPlaylist:!1,timelineRequests:null,suppressAds:!1,systemInfoObject:{},testGroup:null,testName:null,testVideoUrl:"data:video/mp4;base64,AAAAIGZ0eXBpc29tAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAAAuhtZGF0AUAigKN4SIUtLS0tLS0tLS0tLS0tLS0tLS0tLS0vAAACsAYF//+s3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0OCByMjc5NSBhYWE5YWE4IC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNyAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTE2IGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDM6MHgxMzMgbWU9dW1oIHN1Ym1lPTEwIHBzeT0xIHBzeV9yZD0xLjAwOjAuMDAgbWl4ZWRfcmVmPTEgbWVfcmFuZ2U9MjQgY2hyb21hX21lPTEgdHJlbGxpcz0yIDh4OGRjdD0xIGNxbT0wIGRlYWR6b25lPTIxLDExIGZhc3RfcHNraXA9MSBjaHJvbWFfcXBfb2Zmc2V0PS0yIHRocmVhZHM9MSBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTggYl9weXJhbWlkPTIgYl9hZGFwdD0yIGJfYmlhcz0wIGRpcmVjdD0zIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MiBrZXlpbnQ9MjUwIGtleWludF9taW49MjUgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD02MCByYz1jcmYgbWJ0cmVlPTEgY3JmPTUxLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IGlwX3JhdGlvPTEuNDAgYXE9MToxLjAwAIAAAAAKZYiBAAn/Ix39GwAABOltb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAALwABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAACL3RyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAIgAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAA445AAIAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAACIAAAAAAAEAAAAAAadtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAC7UAAABkBXHAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAFSbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAABEnN0YmwAAACuc3RzZAAAAAAAAAABAAAAnmF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAgACAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAA4YXZjQwFkAAr/4QAeZ2QACqxyBF+IiP/ABAACRAAAAwGQAABdqDxIlhGAAQAHaOhDgZSyLAAAABBwYXNwAAAAEAAAAAkAAAAYc3R0cwAAAAAAAAABAAAAAQAAAZAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAEAAAABAAAAFHN0c3oAAAAAAAACwgAAAAEAAAAUc3RjbwAAAAAAAAABAAAATgAAAeR0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAAAC8AAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAAAAAAEAAABAAAAAAFcbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAABWIgAABAAVxwAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAABB21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAAy3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAABWIgAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVAAAAAAAULwAAFC8FgICAAhOIBoCAgAECAAAAGHN0dHMAAAAAAAAAAQAAAAEAAAQAAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAABRzdHN6AAAAAAAAAB4AAAABAAAAFHN0Y28AAAAAAAAAAQAAADAAAABidWR0YQAAAFptZXRhAAAAAAAAACFoZGxyAAAAAAAAAABtZGlyYXBwbAAAAAAAAAAAAAAAAC1pbHN0AAAAJal0b28AAAAdZGF0YQAAAAEAAAAATGF2ZjU3LjcxLjEwMA==",uvpPayload:{},video:null,watchedVideoCount:0,initialPlay:!0,autoplayScrollDisabled:!1,uvpEvents:{adError:function(e){this._trackEvent("logError","trackVideoAdError",e),this.suppressAds?l.error("UVPJS encountered a potentially fatal ad creative exception:",e):l.info("Ad failed to load because ads are being suppressed.",e)},controlMute:function(e){this._trackEvent("trackClick","mute",{})},controlUnmute:function(e){this.$element.find("[data-overlay=mute]").addClass("hide"),this.$element.removeClass(this.options.classCaptions+" "+this.options.classCaptionsMissing),setTimeout(function(){this.$element.find("[data-overlay=mute]").removeClass("visible")}.bind(this),250),this._trackEvent("trackClick","unmute",{})},firstGesture:function(e){var t,i;this.haveFirstGesture||(this.haveFirstGesture=!0,i=(t=this).$element.find("#content_"+this.id+" video")[0],this.playlistPaused&&i?(i.src=t.testVideoUrl,(i=i.play())?i.then(function(){l.log("Promise fulfilled..."),t.player.getPlayerMuted()&&t.unmute(),t._resumePlaylist()}).catch(function(e){l.error("Promise not met...",e)}):l.log("no Promise")):t.player.getPlayerMuted()&&(t.unmute(),t.$element.removeClass(t.options.classCaptions+" "+t.options.classCaptionsMissing)))},onAdBlocked:function(e){this._trackEvent("logError","trackVideoAdBlocked",e),this.suppressAds?l.error("UVPJS encountered a potentially fatal ad creative blockage:",e):l.info("Ad failed to load because ads are being suppressed.",e)},onAdEnd:function(e){this.isAd=!1,this._trackPerformanceEvent("adend")},onAdPodStart:function(e){this.adPodStartTimestamp=Date.now()},onAdStart:function(e){this.isAd=!0,this.options.eventChannels&&d.publish(this.options.eventChannels,"onAdStart"),setTimeout(function(){this.options.eventChannels&&d.publish(this.options.eventChannels,"onDelayedAdStart")}.bind(this),250),this._trackPerformanceEvent("adstart");var t=(t=Date.now()-this.adPodStartTimestamp)<1001?"0 - 1000 ms":t<1501?"1001 - 1500 ms":t<2001?"1501 - 2000 ms":t<2501?"2001 - 2500 ms":t<3001?"2501 - 3000 ms":"3001 and more";this._setAspectRatio(!0)},onCaptionsReady:function(e){this.$element.find("[data-control=captions]").removeClass(this.options.classDisabled)},onCaptionsUnavailable:function(e){l.warn("Unable to fetch captions."),this._trackEvent("logError","trackVideoCaptionsUnavailable",e)},onContentEnd:function(e){this._trackPerformanceEvent("contentend"),this.watchedVideoCount++,this.$element.find(".chapters").empty(),this.$element.find("[data-control=captions]").addClass(this.options.classDisabled),0===Math.floor(this.player.getCurrentPlaybackState().duration-this.player.getCurrentPlaybackState().currentTime)&&i.onVideoComplete()},onContentStart:function(e){this.options.eventChannels&&d.publish(this.options.eventChannels,"onContentStart"),this.contentStartTimeStamp=(new Date).getTime(),this._trackPerformanceEvent("contentstart"),this._showChapterStarts(),this._setAspectRatio()},onResourceEnd:function(e){var t;this.player.getPlayerMuted()&&!this.haveFirstGesture?this.watchedVideoCount===this.options.mutedVideoCountThreshold&&this._pausePlaylist():0===e.payload.playlistLength&&this.options.loop&&!this.startingNewPlaylist&&(t=this.playlist[this.playlist.length-1],e.payload.rco&&e.payload.rco.cmsRefGuid===t.id&&(this.playlist=this.options.playlist,this._setPlaylist(this.playlist)))},onResourceStart:function(e){if(this.uvpPayload=e.payload,this.$element.find("[data-video-still]").addClass(this.options.classHidden),this.startingNewPlaylist=!1,this.video=this._getVideoFromPlaylist(e.payload.rco.index)||e.payload.rco,this.options.getRelatedPlaylist&&this._getRelatedPlaylist(),this._setPageContextMetadata(),this.player.getPlayerMuted()&&this.$element.find("[data-overlay=mute]").addClass("visible").addClass("muted"),this.chapters={},this.video.chapters&&this.video.chapters.data)for(var t=0;t<this.video.chapters.data.length;t++)this.chapters["time"+this.video.chapters.data[t].time]=c.extend(!0,{hasSeen:!1},this.video.chapters.data[t]);!this.options.apeList||(e=(e=a.read("apeList"))?e.split(","):[]).indexOf(this.video.id)<0&&(e.unshift(this.video.id),a.write("apeList",e.slice(0,10),{expires:1})),this._showVideoInfo(),this._showCloseButton(),this.options.enableHistoryUpdates&&(this.updateHistory(),-1===document.title.indexOf(this.video.title)&&""!==this.options.titleTagPostText&&(document.title=this.video.title+this.options.titleTagPostText))},onStateChange:function(e){switch(this.contentVideoState=e.payload.isAd?-2:e.payload.newState,e.payload.newState){case 0:l.info("onStateChange: stop"),this.isPlaying=!1,this.$element.removeClass(this.options.classPlaying),this._setEmbeddedVideoState(!1);break;case 1:l.info("onStateChange: play"),this.isPlaying=!0,this.$element.addClass(this.options.classPlaying),!this.pauseRequested&&(this._isInView()||"scroll"!==this.options.autoplay||this.$element.hasClass(this.options.classPlaybackStarted))||this.pause(),this.$element.addClass(this.options.classPlaybackStarted),this._setEmbeddedVideoState(!0),this.closePlayerRequested&&(this.pause(),this._closePlayerComplete()),"none"===this.$element.css("display")&&this.pause(),this.options.eventChannels&&!this.pauseRequested&&d.publish(this.options.eventChannels,"playVideo"),this.pauseRequested=!1,this.initialPlay=!1;break;case 2:l.info("onStateChange: pause"),this.closePlayerRequested&&this._closePlayerComplete(),this.isPlaying=!1,this.outOfViewPaused=!1,this.$element.removeClass(this.options.classPlaying),this._setEmbeddedVideoState(!1)}},onVideoProgress:function(e){var t,i,a,n,o,s=this;e.payload.isAd||(s.uvpPayload=e.payload,t=e.payload.currentTime,i=e.payload.duration,e="time"+Math.round(t),this.chapters[e]&&!this.chapters[e].hasSeen&&(this.chapters[e].hasSeen=!0,(a=this.$element.find("#"+e)).addClass("highlight"),setTimeout(function(){a.removeClass("highlight")}.bind(this),3e3),this.$element.trigger("timelineEvent",this.chapters[e])),n=s.$element.parent().find("[data-video-info=upnext]"),Math.floor(i-t)<=s.options.upNextTriggerTime&&n.hasClass(s.options.classHidden)&&!n.hasClass(s.options.classDisabled)&&u.isDesktopUserAgent()&&((o=this._getNextVideo(this.video.id)).title&&1<this.playlist.length&&(n.html("<div class='slate'><div><b>"+r.upnext+":</b> "+o.title+"</div><button class='closeButton' data-item='closeButton' aria-label='Close player'><svg class='close'><use xlink:href='#close'></use></svg></button></div>"),n.off("click."+A),n.on("click."+A,".slate",function(e){c(this).addClass(s.options.classHidden),s._trackEvent("trackClick","video-nudge-click",e),s.player.advancePlayList()}),n.on("click."+A,"[data-item=closeButton]",function(e){e.stopPropagation(),n.addClass(s.options.classHidden),n.addClass(s.options.classDisabled)}),setTimeout(function(){n.removeClass(s.options.classHidden),n.dotdotdot({watch:"window"}),n.css("background-image","url("+o.thumbnail+")")},100))))},playerStartError:function(e){l.error("UVPJS encountered a fatal exception starting the player: ",e),this._trackEvent("logError","trackPlayerStartError",e)},videoPlaybackError:function(e){l.error("UVPJS encountered a fatal exception while playing the video: ",e),e.payload&&e.payload.errorInfo&&-1<(e.payload.errorInfo.message||"").indexOf(this.errorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR)&&(c("[data-video-info]").empty(),this.player.destroyPlaylist()),this._trackEvent("logError","trackVideoPlaybackError",e)},videoStartError:function(e){e&&e.payload&&e.payload.errorInfo&&1001===e.payload.errorInfo.errorCode&&!this.suppressAds?(l.warn("IMA failed to load; attempting to play video without ads due to UVPJS exception:",e),this._trackEvent("logError","trackVideoStartImaError",e)):(l.error("UVPJS encountered a fatal error starting the video: ",e),this._trackEvent("logError","trackVideoStartError",e))}},_create:function(){var n=this;this._setup(),o.gdprConsentCallback("video_player",function(){n.isAmp=-1!==window.location.hash.indexOf("amp=1")||-1!==window.location.hash.indexOf("ampreview=1")||-1!==window.location.hash.indexOf("ampvideo=1");var e=!1;try{var t=n.options.playlist[0],e=t.liveState&&-1<t.m3u8.indexOf("dai.google.com")}catch(e){}require(["comscore-video","optional!"+(window.CnetPageVars.services.googleima&&window.CnetPageVars.services.googleima.enabled?"google-ima":"feature-disabled"),"optional!"+(n.isAmp?"video-iframe-integration":"feature-disabled"),"optional!"+(e&&(window.CnetPageVars.services.googleima||window.CnetPageVars.services.googleima.enabled)?"google-ima-dai":"feature-disabled")],function(){var i,a,e=window.uvpjs.mediaCapabilities;if(!(e.canPlayType("video/mp4")||e.canPlayNativeHLS()||e.canPlayHLSJS()))return l.error("This device is unable to play supported video types."),n.$element.addClass(n.options.classPlaybackStarted),void n._showCloseButton();n.testGroup=p.tracking.data.testGroup,n.testName=p.tracking.data.testName,n.options.eventSubscriptions&&d.subscribe(n,n.options.eventSubscriptions),b++,n.id=n.options.idPrefix+b,n.$element.attr("id",n.id),n.options.apeList&&n._setupApeList(),n.options.getShortcodeVideo&&(i=[],c(n.options.videoShortcodeSelector).each(function(){i.push(c(this).data("videoPlaylist")[0])}),a=[],c.each(n.options.playlist,function(e){var t=!0;c.each(i,function(){n.options.playlist[e].id===this.id&&(t=!1)}),t&&a.push(n.options.playlist[e])}),n.options.playlist=i.concat(a),n.options.getRelatedPlaylist&&(n.playlist=n.options.playlist,n._getRelatedPlaylist())),c.each(n.options.playlist,function(e){n.options.playlist[e].index=e}),n.options.getPlaylistSelector&&n._getExternalPlaylist(),c(window).on("appendPlaylist",function(e,t){n.appendPlaylist(t.data)}),window.CnetPageVars.services.one_trust&&window.CnetPageVars.services.one_trust.enabled?window.cbsoptanon.onScriptsReady(function(e){e.ot.awaitInitialConsent(function(){e.ot.getState(function(e,t,i,a){a=n._getUvpConfigs({targeting:e,performance:t,functional:i,social:a});n._initializeUvp(a)})})}):(e=n._getUvpConfigs(),n._initializeUvp(e))})},{},"targeting")},_destroy:function(){this.$document.off("."+A),this.$element.off("."+A),this.$element.find("[data-control=share]").off("."+A),this.$element.find("[data-control=playlist]").off("."+A),_.destroyVideoPlayer(this.id),this.$element.removeAttr("id").html(""),c("[data-load-video]").removeClass(this.options.classPlaying)},_closeOverlays:function(e,t){e.find("[data-item=close]").off("."+A),e.removeClass(this.options.classActive).html(""),t&&(this.interrupted=!1,this.play())},closePlayer:function(){var e,t;this.player&&((e=this.player.getCurrentPlaybackState().playbackState)!==(t=window.uvpjs.mediaCapabilities).PAUSED&&(this.closePlayerRequested=!0),e!==t.EMPTY&&this.pause(),(0<this.$element.closest('[data-video-player="container"]').length?this.$element.closest('[data-video-player="container"]'):this.$element).addClass(this.options.classHidden),this.$window.trigger("closePlayer"))},_closePlayerComplete:function(){this.closePlayerRequested=!1},_formatTime:function(e){e=isNaN(parseInt(e))?0:e;var t=new Date(null);return t.setSeconds(e),t.toISOString().substr(14,5)},_getRecommendedVideos:function(){var a=this,e=p.tracking.data.contentId,e=("roadshow"===p.tracking.data.brand?"/roadshow":"")+"/videos/video-recs/"+e+"/xhr/";l.log("video recs request",e),c.ajax({dataType:"json",type:"GET",url:e}).done(function(i){i&&0<i.length?(l.log("video recs response",i),a.options.getShortcodeVideo&&c.each(a.options.playlist,function(t){c.each(i,function(e){a.options.playlist[t].id===this.id&&i.splice(e,1)})}),a.playlist=a.options.playlist.concat(i),c.each(a.playlist,function(e){a.playlist[e].index=e}),l.log("video recs new playlist",a.playlist),a.options.playlist=a.playlist,a.$element.on("onVideoPlayerReady",function(){a.$element.find('[data-video-info="title"]').text(a.playlist[0].title),a.$element.find(".uvpjs__time-duration").text(a._formatTime(a.playlist[0].duration))})):(l.log("video recs - none available",i),a.playlist=a.options.playlist,a.options.getShortcodeVideo&&(a.options.getRelatedPlaylist=!0))}).fail(function(e,t,i){l.log("video recs failed to load",e,t,i)}).always(function(){l.log("video recs complete"),a.autoPlayState||1!=a.options.scrollIntoView?a._setupPlayer():a._setupScrollingVideoPlayer()})},_getAdUrl:function(e,t){var i=p.ads.data.gpt.targeting,a="sz={param:sz}&iu=/8264/{param:region}-cnet/{param:device}/{param:partner}&ciu_szs={param:ciu_szs}&impl=s&gdfp_req=1&env=vp&output={param:output}&unviewed_position_start=1&url={param:referrer_url}&description_url={param:referrer_url}&correlator={param:timestamp}&cmsid=2289&vid={param:mpxRefId}&pp={param:pp}&cust_params=",n="vid={param:mpxRefId}&ptype={param:ptype}&contentType={param:contentType}&vguid={param:vguid}&partner={param:partner_cust}&session={param:session}&subses={param:sub_session}&microsite={param:microsite}&campaign={param:campaign}&cid={param:cid}&collection={param:collection}&mfr={param:mfr}&carrier={param:carrier}&section={param:section}&userGroup={param:userGroup}&tag={param:tag}&edition={param:edition}&test={param:test}&score={param:score}&subcollection={param:subcollection}&topic={param:topic}&sectopic={param:sectopic}&pid={param:pid}&pv={param:pv}&show={param:show}&feat={param:feat}",o=u.isMobileUserAgent()||u.isIPhone()||u.isIPad(),s="cnet",r="";"es"===p.tracking.data.siteEdition?s="es-cnet":"roadshow"===p.tracking.data.brand&&(s="roadshow"),o&&(s+="_mobile"),this.isAmp&&(r="amp");var l={};try{l=JSON.parse(c.cookie("cnet_ad"))||{}}catch(e){}var d={sz:this.autoplayState&&this.player.getPlayerMuted()&&0===t?"640x483":"640x480",device:o?"mobile_web":"desktop",partner:s,partner_cust:r,ciu_szs:"300x60",output:u.isDesktopUserAgent()?"xml_vmap1":"xml_vast2",microsite:"string"==typeof i.microsite?i.microsite:"",campaign:"",referrer_url:location.protocol+"//"+location.host+location.pathname,timestamp:(new Date).getTime(),ptype:"string"==typeof i.ptype?i.ptype:p.tracking.data.pageType,contentType:i.contentType,vguid:p.guid,session:l.session,sub_session:l.subses||l.subSession,cid:i.cid,collection:i.collection,subcollection:i.subcollection,mfr:i.mfr,carrier:i.carrier,section:i.section,userGroup:f.getAdUserGroups(),tag:i.tag,edition:i.edition,region:{au:"vau",uk:"vuk"}[l.region]||"vaw",test:i.test,score:i.score,topic:i.topic&&i.topic.constructor===Array?i.topic.join():i.topic,sectopic:i.sectopic&&i.sectopic.constructor===Array?i.sectopic.join():i.sectopic,mpxRefId:e.liveState?"2kpq923WGV31B9WIu_rtHNC7LK354Xhb":e.mpxRefId,pp:"vpaid_js",pid:i.pid,pv:parseInt(c.cookie("pv"))||0,show:e.liveState?encodeURIComponent(e.title):null,feat:e.liveState?"live":null};return c.each(g.getAllParams(),function(e,t){var i=e.match(/adTargeting_(.+)/);i&&i[1]?d[i[1]]=t:"adNetwork"===e&&(d.network=t)}),c.each(d,function(e,t){e=new RegExp("{param:"+e+"}","g"),t=t&&"||"!==t?t:"";a=a.replace(e,t),n=n.replace(e,t)}),a+encodeURIComponent(n)},_getExternalPlaylist:function(){var e=c(this.options.getPlaylistSelector).data("videoPlaylist");e&&this.appendPlaylist(e)},_getMediaUrl:function(e){var t=window.uvpjs.mediaCapabilities,i=!(t.isAndroid()&&parseInt(t.getOSVersion())<7)&&(window.MediaSource||window.WebKitMediaSource||!0===t.canPlayNativeHLS()),t=e.mp4;return i&&e.m3u8&&(i="ott",u.isMobileUserAgent()||u.isIPhone()?i="mobile":(u.isIPad()||window.uvpjs.mediaCapabilities.isChromeOS())&&(i="tablet"),t=e.m3u8,t+=-1==t.indexOf("?")?"?":"&",t+="device="+i,t+="&change-to-host=cnetmedia-a.akamaihd.net"),t},_getPlaylistConfigs:function(e,o){var s=this,t={},r=u.isMobileUserAgent()||u.isIPhone()||u.isIPad();if((t=e.map(function(e,t){var i=0,a=null!=e.liveState;!s.player.getCurrentPlaybackState().playbackStarted&&0===t&&-1<c.inArray(p.tracking.data.pageType,["video_page","video_share"])&&(n=parseInt(g.getParam("t"),10),i=!isNaN(n)&&0<n&&n<e.duration?n:0);var n={cmsRefGuid:e.id,duration:a?-1:e.duration,index:e.index,isLive:!1,adCall:"//pubads.g.doubleclick.net/gampad/ads?"+s._getAdUrl(e,t),assetURL:s._getMediaUrl(e),seriesTitle:s.isAmp?"CNET AMP Video":"CNET Video",type:s.suppressAds||r&&0===t&&o?window.uvpjs.mediaCapabilities.RP_URL:window.uvpjs.mediaCapabilities.RP_IMA,vidContId:s.id,videoTitle:e.title,closedCaptionPath:e.closedCaptionPath};return a||(n.startTime=i),a&&-1<s._getMediaUrl(e).indexOf("dai.google.com")&&(i={au:"vau",uk:"vuk"}[(JSON.parse(c.cookie("cnet_ad"))||{}).region]||"vaw",a=r?"mobile_web":"desktop",t=s._getAdUrl(e,t),e=s._getMediaUrl(e),t={iu:"/8264/"+i+"-cnet/"+a+"/cnet",cust_params:decodeURIComponent(t.slice(t.indexOf("cust_params=")+"cust_params=".length)),sz:"640x480",description_url:"CNET Live Stream"},n.assetKey=e.slice(e.indexOf("/hls/event/")+"/hls/event/".length,e.lastIndexOf("/")),n.assetURL=null,n.adTagParameters=t,n.isLive=!0,n.type=window.uvpjs.mediaCapabilities.RP_DAI),n}))&&t[0]&&t[0].type===window.uvpjs.mediaCapabilities.RP_DAI)try{t.unshift({adCall:"//pubads.g.doubleclick.net/gampad/ads?"+s._getAdUrl(e[0],0),assetURL:"//vidtech.cbsinteractive.com/h5/blanks/uvp_blank.mp4",type:uvpjs.mediaCapabilities.RP_IMA})}catch(e){l.warn("Couldn't add IMA preroll to DAI live stream")}return l.log("playlistConfigs",t),t},_getRelatedPlaylist:function(){var t=this,e=t.playlist[t.playlist.length-1].slug,i=n.getEdition();e&&c.ajax({dataType:"json",type:"GET",url:("us"===i?"":"/"+i)+"/videos/related-playlist/"+e+"/xhr/"}).done(function(e){e&&0<e.length&&(t.playlist=t.playlist.concat(e),c.each(t.playlist,function(e){t.playlist[e].index=e}),t.options.playlist=t.playlist,t.player&&"load"===t.autoplayState&&t.player.addResourcesToPlaylist(t._getPlaylistConfigs(e,!1)),t.options.getRelatedPlaylist=!1,l.log("_getRelatedPlaylist new playlist",t.playlist))}).fail(function(e,t,i){l.log("_getRelatedPlaylist failed to load",e,t,i)})},_getUvpConfigs:function(e){var t=0<window.document.location.search.indexOf(A),i="object"!=typeof e||"boolean"!=typeof e.performance||e.performance,a=p.tracking.data.siteSection,e=c.inArray(a,["home","how_to","news","reviews","videos"])?a:"id",a=this.options.config&&this.options.config.tracking?escape(this.options.config.tracking["comscore_sense_"+e]):"",e={news:"P50B755CF-7443-484D-80EB-15D0499ACEB9",reviews:"P051D033D-BD8F-4F2B-93B7-A1F9F1402AB1",videos:"PB2485A3C-22F7-433C-B50B-332EF2270710"}[p.tracking.data.siteSection]||"P0EA7CD2E-455C-4925-95F9-FC8A7E69BB99";return{allowConcurrentPlayback:!1,capLevelToPlayerSize:!0,cms:"platform",controls:[{el:"PREVIEW_BTN",type:"buttonContainer",label:"Start video",children:[{el:"duration",type:"previewTitle",name:"title"},{el:"title",type:"previewDuration",name:"duration"}]},{el:"REPLAY_BTN",type:"button",label:"Replay video"},{el:"LARGE_PLAY_BTN",type:"button",label:"Large play-pause toggle"},{el:"CONTROL_BAR",type:"div",children:[{el:"title",type:"videoInfo",videoInfo:"title"},{el:"PLAYSTATE_BTN",type:"svgToggle",label:"Play pause",svgOn:"pause",svgOff:"play"},{el:"VOLUME_BTN",type:"svgToggle",label:"Volume",svgOn:"speaker-on",svgOff:"speaker-off"},{el:"TIME",type:"span",class:"uvpjs__time"},{el:"TIME_CURRENT",type:"span",text:"00:00"},{el:"TIME_DURATION",type:"span",text:this.options.playlist[0]&&this.options.playlist[0].duration?this._formatTime(this.options.playlist[0].duration):"00:00"},{el:"is-live",type:"span",text:"Live"},{el:"btn-share",type:"svg",label:"Share",svg:"share",control:"share"},{el:"CLOSED_CAPTION_BTN",type:"svg",control:"captions",label:"Closed captions",svg:"captions"},{el:"SETTINGS_BTN",type:"button",label:"Settings"},{el:"FULLSCREEN_BTN",type:"svg",label:"Fullscreen",svg:"fullscreen"}]},{el:"PROGRESS",type:"div",children:[{el:"PROGRESS_SLIDER",type:"range",label:"Progress",value:0,step:1e-4},{el:"PROGRESS_LOADED",type:"progress",value:0,step:1e-4}]},{el:"VOLUME_SLIDER",type:"range",value:1,step:.05},{el:"SETTINGS_MENU",type:"div",children:[]},{el:"overlays",type:"wrapper",name:"overlays",children:[{el:"share",type:"overlay",name:"share"},{el:"mute",type:"overlay",name:"mute"}]}],customCSS:this.options.customCSS,netwk:"cnet",partner:this.options.uvpPartner,playsInline:!0,preventFlashPlayback:!0,skin:!0,template:{button:'<button class="${ o.cls }" data-target="${ o.target }" aria-label="${ o.label }">${ o.label }</button>\n',buttonContainer:'<button class="${ o.cls }" aria-label="${ o.label }">${ o.children }</button>\n',div:'<div class="${ o.cls }">${ o.children }</div>\n',menu:'<button class="${ o.cls }" data-property="${ o.property }" data-value="${ o.value }" data-selected="${ o.selected }">${ o.label }</button>\n',overlay:'<div class="overlay ${ o.name }" data-overlay="${ o.name }"></div>\n',previewDuration:'<div class="videoMeta ${ o.name }"><div data-video-info="${ o.type }" class="${ o.type }"></div></div>',previewTitle:'<div class="videoMeta ${ o.name }"><div data-video-info="${ o.type }" class="${ o.type }"></div><div data-video-info="previewAuthor" class="previewAuthor"></div></div>',progress:'<progress class="${ o.cls }" value="${ o.value }" max="1" step="${ o.step }"></progress>\n',range:'<input type="range" value="${ o.value }" min="0" max="1" step="${ o.step }" class="${ o.cls }"  aria-label="${ o.label }" />\n',span:'<span class="${ o.cls }">${ o.text }</span>\n',svg:'<button class="${ o.cls }" data-control="${ o.control }" data-target="${ o.target }" aria-label="${ o.label }"><svg class="${ o.svg }"><use xlink:href="#${ o.svg }"/></svg></button>\n',svgToggle:'<button class="${ o.cls }" data-target="${ o.target }" aria-label="${ o.label }"><svg class="${ o.svgOn }"><use xlink:href="#${ o.svgOn }"/></svg><svg class="${ o.svgOff }"><use xlink:href="#${ o.svgOff }"/></svg></button>\n',toggle:'<span class="${ o.cls }" data-control="${ o.control }">${ o.text }<button class="on" aria-label="${ o.text } ${ o.textOff }">${ o.textOn }</button><button class="off" aria-label="${ o.text } ${ o.textOn }">${ o.textOff }</button></span>\n',videoInfo:'<span class="${ o.cls }" data-video-info="${ o.videoInfo }">'+(0<this.options.playlist.length&&this.options.playlist[0].title?this.options.playlist[0].title:"")+"</span>\n",wrapper:'<div class="${ o.name }">${ o.children }</div>\n'},usesIMA:!0,uvpc:{modules:[{name:"UVPJSDebug",category:"internal",enabled:t,params:[{name:"showAll",value:!0}]},{name:"ComScore_ss",category:"tracking",enabled:i,params:[{name:"partnerID",value:"cnet"},{name:"c1",value:"19"},{name:"c2",value:"31824268"},{name:"publishersSecret",value:"2cb08ca4d095dd734a374dff8422c2e5"},{name:"c3",value:""},{name:"c4",value:a}]},{category:"qos",enabled:i,name:"MuxQOSPluginJS",params:[{name:"propertyKey",value:"prod"===p.environment?"f13b9be8b7851594e8da77ea2":"930577dfc824ba10a4d593063"},{name:"experimentName",value:"||"===p.ads.data.gpt.targeting.test?"":p.ads.data.gpt.targeting.test}]},{name:"SiteCatalyst",category:"qos",enabled:i,params:[{name:"account",value:""},{name:"brand",value:"cnet"},{name:"edition",value:"us"},{name:"charSet",value:"UTF-8"},{name:"currencyCode",value:"USD"},{name:"visitorNamespace",value:"newimagitasinc"},{name:"TrackLiveStreams",value:"y"},{name:"trackingServer",value:"saa.cnet.com"},{name:"heartbeatTrackingServer",value:"newimagitasinc.hb.omtrdc.net"},{name:"heartbeatAdobePublisherId",value:"3C66570E5FE1A4AB0A495FFC@AdobeOrg"},{name:"heartbeatVisitorMarketingCloudOrgId",value:"3C66570E5FE1A4AB0A495FFC@AdobeOrg"}]},{category:"tracking",name:"NielsenTracking_SDK",enabled:i,params:[{name:"apid",value:e},{name:"clientid",value:"us-200330"},{name:"sfcode",value:"prod"===p.environment?"us":"dcr-cert"},{name:"vcid",value:"c07"},{name:"channelInfo",value:""},{name:"iag_sid",value:"1000011"},{name:"iag_tfid",value:"902"},{name:"channelName",value:"cbs"},{name:"segB",value:"CNET.com"},{name:"nol_devDebug",value:t?"console":""}]},{category:"internal",name:"VideoPlaybackSettings",enabled:window.uvpjs.mediaCapabilities.isAndroid(),params:[{name:"forceHlsjs",value:!0}]}]}}},_getNextVideo:function(t){var i=this,a={};return c.each(this.playlist,function(e){if(t===this.id)return a=i.playlist[e+1]||i.playlist[0],!1}),a},getVideo:function(){if(!this.video||!this.video.id)return null;var e,t="MANUAL";switch(("load"===this.autoplayState||"first"===this.autoplayState&&this.$element.is(c("[data-component*=videoPlayer]").first()))&&(1<this.playlist.length||this.options.getRelatedPlaylist?t="CONTINUOUS":this.autoplayState&&(t="AUTOPLAY")),this.contentVideoState){case-2:e="UNPLAYED";break;case-1:case 1:case 2:e="PLAYED";break;case 0:e="STOPPED";break;default:e="COMPLETED"}return c.extend(!0,{},this.video,{autoplayType:t,currentPlaybackState:this.player.getCurrentPlaybackState(),contentStartTimeStamp:this.contentStartTimeStamp,mediaUrl:this._getMediaUrl(this.video).split("?")[0],videoState:e})},_getVideoFromPlaylist:function(t){return this.playlist.filter(function(e){return e.index===t})[0]||null},_hideContainer:function(){0<this.$element.closest('[data-video-player="container"]').length&&!this.isPlaying&&1===c(".videoPlayer.playing").length&&this.$element.closest('[data-video-player="container"]').addClass(this.options.classHidden)},_initializeUvp:function(e){var t=this;window.uvpjs.Configuration.hostname="//www.cnet.com",_.initialize(e,function(e){t.systemInfoObject=e,t.options.showAsModal&&t.$element.addClass(t.options.classHidden),_.addEventListener(uvpjs.EventType.PLAYER_INIT+"."+t.id,function(e){t.id===e.target&&(t.player=e.payload.player,t.$element.trigger("onVideoPlayerReady",t.video),l.log("onVideoPlayerReady"),t.options.showPreviewMetadata&&0<t.options.playlist.length&&(t.$element.find("[data-video-info=previewDuration]").html('<svg class=" video"><use aria-hidden="false" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#video"></use></svg>'+t._formatTime(t.options.playlist[0].duration)),t.$element.find("[data-video-info=previewTitle]").text(t.options.playlist[0].title||""),(e=t.options.playlist[0].author)&&0<e.firstName.length&&t.$element.find("[data-video-info=previewAuthor]").html('<div><span class="by">'+r.by+"</span> "+e.firstName+" "+e.lastName+"</div>")),c("[data-video-info]").dotdotdot({watch:"window"}))}),t._setupData(),t.options.showAsModal&&t.$element.addClass(t.options.classHidden),t._setupExternalEvents(),t.isAmp&&(t.options.suppressFirstAd=!1,t._setupAmpIntegration()),t._setDwPageTypeFallback(),"scroll"===t.autoplayState?t._setupScrollingAutoplay():t.options.getRecommendedPlaylist?t._getRecommendedVideos():t._setupPlayer()}),t._trackPerformanceEvent("cnetvideocreate")},_isInView:function(){var e=this.$element.offset().top,t=e+this.$element.outerHeight(),i=c(window).scrollTop(),a=i+c(window).height();return i<t&&e<a},_isFilteredShowPage:function(){try{return 1===c(window.location.hash).length}catch(e){return!1}},isAdPlaying:function(){return this.isAd},_setupAmpIntegration:function(){var e,t,i,a,n=this,o=p.ads.data.gpt.targeting;try{window.DW=window.DW||{},window.DW.pageParams=window.DW.pageParams||{},-1!==window.location.hash.indexOf("amp=1")?window.DW.pageParams.pagetype="article_amp":-1!==window.location.hash.indexOf("ampreview=1")?window.DW.pageParams.pagetype="product_main_amp":-1!==window.location.hash.indexOf("ampvideo=1")&&(window.DW.pageParams.pagetype="video_page_amp"),-1!==["article_amp","product_main_amp"].indexOf(window.DW.pageParams.pagetype)&&(e=g.getHashParam("pageType"),t=g.getHashParam("contentType"),i=g.getHashParam("collection"),a=g.getHashParam("topic"),o.ptype=e||window.DW.pageParams.pagetype,o.contentType=t||"",o.collection=i||"",o.topic=a||"")}catch(n){l.log("Couldn't update page params",n)}(window.AmpVideoIframe=window.AmpVideoIframe||[]).push(function(e){!1!==n.options.autoplay&&(e.method("play",function(){n.play()}),e.method("pause",function(){n.pause()}),e.method("mute",function(){n.mute()}),e.method("unmute",function(){n.unmute()})),e.postEvent("canplay")})},_setDwPageTypeFallback:function(){var e=p.ads.data.gpt.targeting,e="string"==typeof e.ptype?e.ptype:p.tracking.data.pageType;window.DW=window.DW||{},window.DW.pageParams=window.DW.pageParams||{},window.DW.pageParams.pagetype=window.DW.pageParams.pagetype||e},_loadChapter:function(i){var a=this;this.timelineRequests=this.timelineRequests||[],i.slug&&this.timelineRequests.push(c.ajax({dataType:"html",type:"POST",url:"/videos/video-timeline/"+i.slug+"/",data:{id:i.objectId,image:i.image||null,link:i.link,rating:i.metaData&&i.metaData.starRating?i.metaData.starRating:null,slug:i.slug,text:i.text,title:i.title,typeLabel:i.typeLabel,typeName:i.typeName},success:function(e){var t=100*i.time/a.video.duration,t=c('<div class="chapterDot" style="left:'+t+'%" id="time'+i.time+'"></div>'),e=c(e);e.on("click",function(e){a.pause()}),t.append(e),a.$element.find(".chapters").append(t)}}))},mute:function(){this.player&&this.player.mute()},_openOverlay:function(t,e){var i=this;this.isPlaying&&(this.pause(),this.interrupted=!0),this._closeOverlays(this.$element.find("[data-overlay]"),!1),t.addClass(this.options.classActive).html(e),s.process(t),t.find("[data-item=close]").on("click."+A,function(e){i._closeOverlays(t,i.interrupted)})},pause:function(){this.player&&this.player.pauseVideo()},_pausePlaylist:function(){var t;this.player.pausePlaylist(),this.playlistPaused=!0,this.$element.find("[data-overlay=mute]").removeClass("visible"),this.$element.find(".uvpjs__controlbar").css("pointer-events","none"),u.isDesktop()&&(this.haveFirstGesture?(t=this).$element.find("button.uvpjs__btn-large-play").one("click",function(e){e.stopPropagation(),t._resumePlaylist()}):(this.$element.find("button.uvpjs__btn-large-play").addClass(this.options.classDisabled),this.$element.find(".uvpjs__controls").addClass(this.options.classActive)));try{this.$element.find("button.uvpjs__btn-large-play").css("background-image","url("+this.playlist[this.watchedVideoCount].image.path+")"),this.$element.find('[data-video-info="title"]').text(this.playlist[this.watchedVideoCount].title)}catch(t){}this.$element.parent().find("[data-video-info=upnext]").addClass(this.options.classHidden).removeClass(this.options.classDisabled)},play:function(){var e=this.$element.find(".uvpjs__btn-preview");this.player&&e.hasClass("uvpjs__btn-preview--hidden")?this.player.playVideo():e[0]&&(e[0].dispatchEvent(new Event("touchstart")),e[0].dispatchEvent(new Event("touchend")))},playVideoClip:function(e,t){e&&(t&&t.type&&t.type===window.uvpjs.EventType.RESOURCE_END&&1<this.playlist.length?this.play():(this.unmute(),this._setPlaylist(e)))},_processEvent:function(e){e&&e.target===this.id&&(["onVideoProgress"].indexOf(e.type)<0&&l.log(e.type,e),this.uvpEvents[e.type].call(this,e),this.$element.trigger(e.type,this.video))},_resumePlaylist:function(){this.player.resumePlaylist(),this.playlistPaused=!1,this.$element.find(".uvpjs__controlbar").css("pointer-events",""),this.$element.find("button.uvpjs__btn-large-play").css("background-image",""),u.isDesktop()&&(this.$element.find("button.uvpjs__btn-large-play").removeClass(this.options.classDisabled),this.$element.find(".uvpjs__controls").removeClass(this.options.classActive))},_setAspectRatio:function(e){this.options.resizePlayer&&(!0===e?this.$element.css("height",""):this.video.isVertical&&(e=c(window).height()-this.$element.find(".uvpjs__controlbar").height(),this.$element.css("height",e+"px")))},_setEmbeddedVideoState:function(a){var n=this;n.options.mainPlayer?c("[data-load-video]").each(function(){var e=c(this).closest("[data-video-playlist]").data("videoPlaylist"),t=c(this).data("loadVideo"),i=!1;(i=e&&e[t]&&e[t].id==n.video.id||c(this).data("videoId")==n.video.id?!0:i)?c(this).addClass(n.options.classActive):c(this).removeClass(n.options.classActive),i&&a?c(this).addClass(n.options.classPlaying):c(this).removeClass(n.options.classPlaying)}):a&&n.options.eventChannels&&d.publish(n.options.eventChannels,"heroVideoPlaying")},_setPageContextMetadata:function(){var e=null!=this.video.primaryCollection?this.video.primaryCollection.id:"",t=this.video.datePublished?this.video.datePublished.slice(0,10):"";this.player.setPageContextMetadata(c.extend(!0,{},h.getHbParams(),{collectionId:e,contentType:this.options.contentType,"a.media.originator":[null!=this.video.author?this.video.author.firstName+" "+this.video.author.lastName:null],"a.media.airDate":t,siteType:this.isAmp?"google_amp|||mobile":p.tracking.data.siteType,ns:"newimagitasinc"}))},_setPlaylist:function(e){0<e.length?(this.startingNewPlaylist=!0,this.playlist=e,this.player.destroyPlaylist(),this.player.addResourcesToPlaylist(this._getPlaylistConfigs(e,this.options.suppressFirstAd)),this.$element.addClass(this.options.classPlaying)):l.error("No videos found in the playlist.")},_setupApeList:function(){p.video.prepend&&!a.read("viewedPrepend")&&(this.options.playlist.unshift(p.video.prepend),a.write("viewedPrepend","1",{expires:1}));var e=a.read("apeList");if(e)for(var t=0,i=e.split(",");t<this.options.playlist.length&&0<=i.indexOf(this.options.playlist[0].id);)this.options.playlist.push(this.options.playlist.shift()),t++},_setupData:function(){this.video=0<this.options.playlist.length?this.options.playlist[0]:{};var e=g.getParam("adSuppress")||a.read("adSuppress")||"";this.suppressAds=this.options.suppressAds||"all"===e||0<=e.split(",").indexOf(A)||p.services.googleima&&!p.services.googleima.enabled||!(window.google&&window.google.ima),this.history=t.init(),this.video.ratingVChip&&"TV-MA"==this.video.ratingVChip||this._isFilteredShowPage()?this.autoplayState=!1:this.autoplayState=this.options.autoplay},_setupExternalEvents:function(){var o=this;this.$document.on("keyup."+o.id,"[data-load-video]",function(e){13===e.which&&o._videoExternalInteractionEvent(e,this)}),this.$document.on("click."+o.id,"[data-load-video]",function(e){o._videoExternalInteractionEvent(e,this)}),this.$document.on("click","[data-replace-video-playlist]:not([data-active-video-playlist])",function(t){var e=t.target.getAttribute("data-replace-video-playlist"),i=t.target.getAttribute("data-video-tag-type"),a=o.options.tagTopicPlaylistRoute.replace("replace-me",e),n=c("[data-tag-playlist-container]").first();a+="?currentVideo="+o.video.id,o.loader=c.cnet.loading({disabled:!1}),o.loader.$element.appendTo(c(o.options.loaderSelector)),o.loader.add(),o._trackEvent("trackClick","video-playlist|"+i+"|"+e,{}),n.hasClass("loaded")&&(n.removeClass("loaded fullLoad"),n.addClass("reset"),setTimeout(function(){c("[data-tag-playlist]").first().empty()},500)),c.ajax({dataType:"json",type:"GET",url:a}).done(function(e){e&&void 0!==e.template&&void 0!==e.playlist&&(o.playlist=e.playlist,o.loader.remove(),o._setPlaylist(o.playlist),c("[data-tag-playlist]").first().append(e.template),n.addClass("loaded"),n.removeClass("reset"),c("[data-replace-video-playlist]").removeAttr("data-active-video-playlist"),c(t.target).attr("data-active-video-playlist","true"),setTimeout(function(){n.addClass("fullLoad")},500),s.process(n))})}),this.$document.on("click","[data-active-video-playlist]",function(e){var t=c("[data-tag-playlist-container]").first();t.removeClass("loaded fullLoad"),t.addClass("reset"),c(e.target).removeAttr("data-active-video-playlist"),o.playlist=o.options.playlist,o._setPlaylist(o.playlist),setTimeout(function(){c("[data-tag-playlist]").first().empty()},500)}),this.$element.on("onVideoPlayerReady",function(){c("body").addClass("videoPlayerReady"),o.player.setVolume(.5),o.options.eventChannels&&d.publish(o.options.eventChannels,"videoReady")})},_setupInternalEvents:function(){var a=this;c.each(this.uvpEvents,function(e){a.player.addEventListener(e+"."+a.id,a._processEvent.bind(a))}),this.$element.find("[data-control=share]").on("click."+A,function(e){var t,i=a.$element.find("[data-overlay=share]");i.hasClass(a.options.classActive)?a._closeOverlays(i,a.interrupted):(t=n.getEdition(),c.ajax({url:("us"===t?"":"/"+t)+"/videos/video-share-xhr/"+a.video.slug+"/"}).done(function(e){a._openOverlay(i,e)}))}),this.$element.on("click."+A,function(e){var t;a.$element.hasClass(a.options.classActive)||(t=function(e){a.$element.removeClass(a.options.classActive),a.$document.off("tap",t)},a.$element.addClass(a.options.classActive),a.$document.on("tap."+A,t))}),this.$element.find(".uvpjs__progress").append('<div class="chapters"></div>'),this.options.enableHistoryUpdates&&this.history.stateChange(function(t){var e,i,a=-1;c.each(this.playlist,function(e){if(t.data.id===this.id)return a=e,!1}),-1<a?(e=this.playlist.slice(a),i=this.playlist.slice(0,a),this.playlist=e.concat(i)):this.playlist=[t.data].concat(this.playlist),this._setPlaylist(this.playlist)}.bind(this));var e=this.$element.find("[data-overlay=mute]");e.html('<div class="speaker-off"><svg><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#speaker-on"></use></svg><span class="label">'+r.playSound+"</span></div>"),e.one("click",function(e){c(this).removeClass("muted"),a.unmute(),a.$element.removeClass(a.options.classCaptions+" "+a.options.classCaptionsMissing)})},_videoExternalInteractionEvent:function(e,t){e.preventDefault();var i,a=c(t),n=a.data("loadVideo")||0,o=a.closest("[data-video-playlist]").data("videoPlaylist");this._closePlayerComplete(),a.data("videoId")&&(i=null,c.each(this.options.playlist,function(e,t){if(t.id===a.data("videoId"))return i=e,!1}),null!=i&&(n=i,o=this.options.playlist));var s=o.slice(n),r=o.slice(0,n),n=(o=s.concat(r))&&0<o.length?o[0].id:null,s=a.hasClass(this.options.classPlaying),r=parseInt(this.id.replace(this.options.idPrefix,""))===a.closest("[data-playlist-target]").data("playlistTarget"),t=c(t).is(this.options.videoShortcodeSelector);(this.options.mainPlayer||r)&&(this.options.showAsModal&&(this.$element.removeClass(this.options.classHidden),this._showCloseButton()),s?(this.pause(),t&&this._trackEvent("trackClick","inbody|videopause",e),a.data("trackPlaylist")&&this._trackEvent("trackClick","playlist_pause",e)):(this.$element.closest('[data-video-player="container"]').removeClass(this.options.classHidden),c(window).trigger("playerShowing"),this.unmute(),o&&0<o.length&&(!this.video||this.video&&this.video.id!=n)?this.player.getCurrentPlaybackState().playbackStarted?this._setPlaylist(o):(this.options.playlist=o,this.player.overrideUserGesture(!0)):this.player.getCurrentPlaybackState().playbackStarted?this.player.getCurrentPlaybackState().playbackStarted?this.play():(o=this.$element.find("#content_"+this.id+" video")[0])&&(o.src=this.testVideoUrl,(o=o.play())?o.then(function(){l.log("Promise fulfilled..."),c(".uvpjs__btn-preview").trigger("click")}).catch(function(e){l.error("Promise not met...",e)}):l.error("no Promise")):this.player.overrideUserGesture(!0),a.data("scrollToTop")&&c("html, body").animate({scrollTop:this.$element.offset().top},1e3),c("[data-load-video]").removeClass(this.options.classActive),c("[data-load-video]").removeClass(this.options.classPlaying),a.addClass(this.options.classActive),a.addClass(this.options.classPlaying),t&&this._trackEvent("trackClick","inbody|videoplay",e),a.data("trackPlaylist")&&this._trackEvent("trackClick","playlist_play",e),a.data("trackPlaylistRedesign")&&this._trackEvent("trackClick","video-playlist|playlist-item|"+a.data("trackPlaylistRedesign"),e)))},_setupPlayer:function(){var t=this;l.log("_setupPlayer"),this.initialized||(this.initialized=!0,this.autoplayState||(this.$element.addClass(this.options.classNoAutoplay),this.$window.trigger(this.options.classNoAutoplay),this._showCloseButton()),null===t.options.preventCaptions&&("es"===n.getEdition()?t.options.preventCaptions=!0:t.options.preventCaptions=!1),_.createVideoPlayer(t.id,function(e){t.player=e,t._setPageContextMetadata(),t._trackPerformanceEvent("playerloaded"),t._setupInternalEvents(),t._setPlaylist(t.options.playlist),t.options.apeList||(window._cbv||(window._cbv=[])).push(t.player.DOMMgr.dom.video.el),y.trackUVP(t.id),document.getElementById(t.id).addEventListener("stateChange-"+t.id,e=>{e.detail&&e.detail.payload&&t._trackTagular(e.detail.payload)});e=y.getUVPVideoContext(t.id);e&&t._trackTagular({"@type":"core.videoLoaded.v1",videoContext:e}),t.$element.trigger("onVideoPlayerReady",t.video)},{enableMutedAutoplay:"load"===t.autoplayState&&t.systemInfoObject.supportsMutedAutoplay,enableUnmutedAutoplay:!1,previewImage:0<t.options.playlist.length&&t.options.playlist[0].image&&t.options.playlist[0].image.path?t.options.playlist[0].image.path:"",deferLoadingCaptions:t.options.preventCaptions}))},_showCloseButton:function(){var t;0==this.$element.find("[data-item=closeButton]").length&&(this.$element.prepend("<button class='closeButton' data-item='closeButton' aria-label='Close player'><svg class='close'><use xlink:href='#close'></use></svg></button>"),(t=this).$element.find("[data-item=closeButton]").click(function(e){e.stopPropagation(),t.closePlayer(),t._trackEvent("trackClick","close-scroll-video",e)}))},_showVideoInfo:function(){var a=this;a.$element.parent().find("[data-video-info]").each(function(){var e=c(this),t=e.data("videoInfo"),i=a.video[t]||"";0===a.watchedVideoCount&&"title"===t&&a.video.primaryCollection&&"0d8f9ac8-61cb-4e36-9263-552d5468e04b"===a.video.primaryCollection.id?i=a.video.primaryCollection.title||"":"author"===t&&a.video.author?i=(a.video.author.firstName||"")+" "+(a.video.author.lastName||""):"collection"===t&&a.video.primaryCollection?i=a.video.primaryCollection.title||"":"upnext"===t&&(i="",e.addClass(a.options.classHidden).removeClass(a.options.classDisabled)),e.text(i)}),setTimeout(function(){c("[data-video-info]").dotdotdot({watch:"window"})},100)},_setupScrollingAutoplay:function(){function e(e){i.player?(i.options.eventChannels&&d.publish(i.options.eventChannels,"videoReady"),i.outOfViewPaused&&!i.autoplayScrollDisabled&&i.play()):i._setupPlayer()}var i=this;this.scrollingAutoplayWaypoint=new Waypoint.Inview({element:this.$element,entered:e,enter:e,exited:function(e){var t;i.player&&i.player.getPlayerMuted()&&0===i.$element.closest(i.options.selectorScrollingAutoplayDisabled).length&&(t=i.player.getCurrentPlaybackState(),i.outOfViewPaused=2!=t.playbackState,t.playbackStarted?i.pause():i.pauseRequested=!0)}})},_setupScrollingVideoPlayer:function(){var i=this;l.log("setting up scrolling video player"),i.player?i.options.eventChannels&&d.publish(i.options.eventChannels,"videoReady"):i._setupPlayer(),this.scrollingAutoplayWaypoint=new Waypoint.Inview({element:this.$element,exited:function(e){var t;i.player&&i.player.getPlayerMuted()&&0===i.$element.closest(i.options.selectorScrollingAutoplayDisabled).length&&(t=i.player.getCurrentPlaybackState(),i.outOfViewPaused=2!=t.playbackState,t.playbackStarted?i.pause():i.pauseRequested=!0)}})},_showChapterStarts:function(){if(this.timelineRequests)for(var e=0;e<this.timelineRequests.length;e++)this.timelineRequests[e].abort();if(this.$element.find(".chapters").empty(),this.video&&this.video.chapters)for(var t in this.video.chapters.data)this._loadChapter(this.video.chapters.data[t])},_trackTagular:function(e){window.tagular&&e&&(l.log("Cohesion/Tagular event:",e["@type"],e),window.tagular("beam",e))},_trackEvent:function(e,t,i,a){var n,o,s,r;"logError"!==e&&(a=a||{},n="",i.errorInfo&&(s=i.errorInfo.errorCode||"null",r=i.errorInfo.serverCode||"null",3005===s&&"string"==typeof i.errorInfo.message&&(r+="_"+(o=i.errorInfo.message.split(" "))[o.length-1]),n=s+"_"+r),s=-1<n.indexOf("3005_null_buffer"),r=-1<n.indexOf("3005_null_levelLoad"),s||r||!this.video||h.trackCustomEvent(e,c.extend(!0,{articleAuthorId:this.video.author?[this.video.author.id]:null,articleAuthorName:this.video.author?[this.video.author.firstName+" "+this.video.author.lastName]:null,articleId:p.tracking.data.articleId,articleTitle:p.tracking.data.articleTitle,articleType:p.tracking.data.articleType,brand:p.tracking.data.brand,channel:"video",clickGenericText:t,collectionId:this.video.primaryCollection?[this.video.primaryCollection.id]:null,deviceType:p.tracking.data.deviceType,error:n,pageType:p.tracking.data.pageType,siteEdition:p.tracking.data.siteEdition,siteHier:p.tracking.data.siteHier,siteSection:p.tracking.data.siteSection,siteType:p.tracking.data.siteType,videoAdIds:i.adData?i.adData.adVideoId:null,videoAdTitle:i.adData?i.adData.adVideoTitle:null,videoContentType:"video",videoId:this.video.id,videoTitle:this.video.title||this.video.headline,_pageChannelType:p.tracking.data._pageChannelType,_pageTitle:p.tracking.data._pageTitle,_pageViewGuid:p.tracking.data._pageViewGuid},a)))},_trackPerformanceEvent:function(t){l.info("Firing event: cnet_video."+t),p.video=p.video||{},p.video.performance=p.video.performance||{},p.video.performance[t]=!0;try{window.dispatchEvent(new Event("cnet_video."+t)),c(window).trigger("cnet_video."+t)}catch(e){l.error("Unable to trigger event cnet_video."+t)}try{void 0===performance.getEntriesByName(t)[0]&&performance.mark("cnet_video_"+t)}catch(e){l.error("Unable to set performance mark cnet_video_"+t)}try{var e,i,a,n,o=void 0===w[t]||0===w[t],s=-1<["video_page","article","product_main"].indexOf(p.tracking.data.pageType);o&&s&&(w[t]=performance.now(),a=w[t],e={cnetvideocreate:["create"],playerloaded:["ploaded","cnetvideocreate"],adstart:["adStart","playerloaded"],showplayoverlay:["showoverl","playerloaded"]}[t],c.isArray(e)&&(i=w[e[1]]||0,a=w[t+"_from_"+e[1]]=w[t]-i),n=c.isArray(e)?e[0]:"",-1===["adstart","cnetvideocreate"].indexOf(t)&&n&&m.sendBeacon("video_"+n,a),"adstart"===t&&m.sendBeacon("video_adStart_c",w[t]))}catch(e){l.error("mpulse error tracking "+t+": "+e)}},unmute:function(){this.player&&this.player.getPlayerMuted()&&(this.player.unMute(),this.player.hideCaptions())},updateHistory:function(){-1===document.location.pathname.indexOf(this.video.urlPath)&&this.video.urlPath&&(this.history.navigate({title:this.video.title,data:this.video},{replace:!1,url:this.video.urlPath}),c(window).trigger("historystatechange"))},appendPlaylist:function(e){var t=this;0<e.length?0<this.playlist.length?(this.options.playlist=this.options.playlist.concat(e),c.each(t.options.playlist,function(e){t.options.playlist[e].index=e}),this.playlist=this.options.playlist,this.player&&this.player.addResourcesToPlaylist(this._getPlaylistConfigs(e))):(this.options.playlist=this.options.playlist.concat(e),c.each(t.options.playlist,function(e){t.options.playlist[e].index=e})):l.error("No videos found in the playlist."),l.log("appendPlaylist: new videos",e),l.log("appendPlaylist: new playlist",this.options.playlist)},setAutoplayToPause:function(){!1!==this.options.autoplay&&(this.initialPlay&&(this.pauseRequested=!0),this.autoplayScrollDisabled=!0)}})}),define("pages/desktop/front_door",["main.desktop","components/form-trim","components/form-validate","components/global-modal","components/lazyload-images","components/touch-menu-hover","version!libs/jquery/lazyload","version!libs/waypoints/inview","version!libs/waypoints/jquery.waypoints","managers/waypoints","utils/function-natives","components/image-gallery-modal","components/load-more","components/selfish-scroll","translations/load-more","version!fly/managers/history","version!fly/components/load-more-scroll","version!fly/components/load-more","managers/edition-notifications","components/iframe-ad-tracker","version!libs/jquery/iframetracker","components/leads-tracker","components/module-asset-tracker","components/track-download","components/social-tracking","quantum/videoPlayer"],function(){});
