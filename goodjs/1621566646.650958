OK.hooks={},function(){"use strict";OK.hooks.AbstractHook={code:0,activate:OK.fn.empty,deactivate:OK.fn.empty,sinkEvents:function(t,e,n){this.m_handlers=this.m_handlers||{};for(var i=OK.fn.delegate(e,[],n),o=0;o<t.length;o++){var s=t[o],r=this.m_handlers[s]||[];r.push(i),this.m_handlers[s]=r}delete this.m_events},_init:function(t,e,n,i){var o=jQuery;this.params=n,this.fallback=i,this.hookEl=t,this.gwt=e,this.j_hookEl=o(this.hookEl),this.j_hookParentEl=o(this.hookEl.parentNode),this.activate()},_destroy:function(){this.deactivate(),delete this.gwt,delete this.hookEl,delete this.m_handlers,delete this.m_events,delete this.params},_getSinkingEvents:function(){return null==this.m_events&&(this.m_events=OK.util.keys(this.m_handlers)),this.m_events},_getSinkingHandlers:function(){return this.m_handlers},_handleEvent:function(t){for(var e=this.m_handlers[t]||[],n=0;n<e.length;n++)e[n].call(this,t)}}}(),function(t){var e=document.documentElement.classList.contains("small-toolbar")||document.documentElement.classList.contains("smooth-hiding")?48:76,n=function(t,e,n){var i="";return n&&("auto"===n||(i=e+": "+t.calcString(n.replace("px",""),"px")+"; ")),i},i=Object.create(OK.hooks.AbstractHook);OK.util.extend(i,{activate:function(){this.sinkEvents(["scroll","resize","toggle4Col","dataload","navigate","bannerState"],this.doReflow,this),this.sinkEvents(["resize"],this.doResize,this);var t=jQuery;this.j_topPanel=t("#topPanel");var e=this;require(["OK/Smokescreen"],(function(t){e.StickyBannerCnt=t.getById("hook_Block_ViewportHeightAwareBanner"),null!=e.StickyBannerCnt&&(e.StickyBannerCntTop=function(t){var e=0,n=t;if(n.offsetParent)do{e+=n.offsetTop}while(n=n.offsetParent);return e}(e.StickyBannerCnt)),e.doReflow(),e.doResize()}))},deactivate:function(){},doReflow:function(){},doResize:function(){}});var o=Object.create(i),s=0;OK.util.extend(o,{code:2,doResize:function(){this.WindowHeight=document.body.parentNode.clientHeight},doReflow:function(t){var n=this;require(["OK/Smokescreen"],(function(t){if(null!=t.getById("hook_Block_ViewportHeightAwareBanner")&&n.StickyBannerCnt){var i={},o=n.StickyBannerCnt.clientHeight;n.StickyBanner=t.getById("hook_Block_StickyBannerContainer"),s!=o&&(i.StickyBannerMinHeight=o+"px",s=o);var r=n.StickyBanner.getBoundingClientRect().top,a=e+12,c=document.getElementById("footer").getBoundingClientRect();r<=a?(i.StickyBannerCntPosition="fixed",o+a+12<c.top?(i.StickyBannerCntTop=a+"px",i.StickyBannerCntBottom="auto"):(i.StickyBannerCntTop="auto",i.StickyBannerCntBottom=n.WindowHeight-c.top+"px")):i.StickyBannerCntPosition="static",n.updateStyle||(n.updateStyle=n._changeStickyBannerStyleInline),n.updateStyle(i)}}))},applySmokescreen:function(t){this.locator=t;var e=document.head.querySelector("#stickyBannerCnt_style");e||((e=document.createElement("style")).id="stickyBannerCnt_style",e=document.head.appendChild(e)),this.StickyBannerStyle=e,this.updateStyle=this._changeStickyBannerStyleSmokescreen},_changeStickyBannerStyleInline:function(t){t.StickyBannerMinHeight&&(this.StickyBanner.style.minHeight=t.StickyBannerMinHeight),t.StickyBannerCntPosition&&(this.StickyBannerCnt.style.position=t.StickyBannerCntPosition),t.StickyBannerCntTop&&(this.StickyBannerCnt.style.top=t.StickyBannerCntTop),t.StickyBannerCntBottom&&(this.StickyBannerCnt.style.bottom=t.StickyBannerCntBottom)},previousSmokescreenStyle:{},_changeStickyBannerStyleSmokescreen:function(t){if(this.locator&&this.StickyBannerStyle){if(this.StickyBanner.removeAttribute("style"),this.StickyBannerCnt.removeAttribute("style"),!!function(t,e){var n=Object.getOwnPropertyNames(t),i=Object.getOwnPropertyNames(e);if(n.length!==i.length)return!1;for(var o=0;o<n.length;o++){var s=n[o];if(t[s]!==e[s])return!1}return!0}(t,this.previousSmokescreenStyle))return;for(var e=this.StickyBannerStyle.sheet,i=e.cssRules.length-1;i>=0;i--)e.deleteRule(0);var o="";t.StickyBannerMinHeight&&(o=" #"+this.StickyBanner.id+" {"+n(this.locator,"min-height",t.StickyBannerMinHeight)+"}",e.insertRule(o,0)),(t.StickyBannerCntBottom||t.StickyBannerCntTop)&&(o=" #"+this.StickyBannerCnt.id+" {"+n(this.locator,"bottom",t.StickyBannerCntBottom)+n(this.locator,"top",t.StickyBannerCntTop)+"} ",e.insertRule(o,0));var s=this.locator.transform("position-static"),r=this.locator.transform("position-fixed");"static"===t.StickyBannerCntPosition?(this.StickyBannerCnt.classList.remove(r),this.StickyBannerCnt.classList.add(s)):"fixed"===t.StickyBannerCntPosition?(this.StickyBannerCnt.classList.remove(s),this.StickyBannerCnt.classList.add(r)):(this.StickyBannerCnt.classList.remove(s),this.StickyBannerCnt.classList.remove(r)),this.previousSmokescreenStyle=t}else this._changeStickyBannerStyleInline.apply(t)}}),OK.hooks.StickyBannerHookFactory=function(t){return t.mobile?null:Object.create(o)};var r=Object.create(i);OK.util.extend(r,{activate:function(){i.activate.call(this),this.j_hookParentEl.css("min-height",Math.round(this.j_hookEl.innerHeight())+"px"),this.toolbarHeight=this.j_topPanel.outerHeight()},doReflow:function(t){var e=this.j_hookEl,n=window.pageYOffset;if(e.hasClass("sticky_cnt__off"))e.toggleClass("sticky_cnt__on",!1);else if(e.hasClass("sticky_cnt__bottom")){var i=this.j_hookParentEl.offset().top+this.j_hookParentEl.height();e.toggleClass("sticky_cnt__on",i>window.innerHeight+n)}else{var o=this.j_hookParentEl.offset().top;e.toggleClass("sticky_cnt__on",o<this.toolbarHeight+n)}}}),OK.hooks.StickyPanelHookFactory=function(t){return t.mobile?null:Object.create(r)};var a=Object.create(i);OK.util.extend(a,{activate:function(){i.activate.call(this)},doReflow:function(){$("#facets").trigger("reflow")}}),OK.hooks.PSStickyFiltersHookFactory=function(t){return t.mobile?null:Object.create(a)},OK.hooks.FriendsStreamHookFactory=function(t){return t.mobile?null:new Promise((function(t){require(["OK/FriendsStream"],(function(e){t(new e.FriendsStream)}))}))},require(["OK/banners/moneySave"],(function(t){t.onHooksReady()}))}(window);