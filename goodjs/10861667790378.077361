KISSY.add("node/base",["dom","event/dom"],function(a,e){function i(e,t,n){var r,o=this;if(!(o instanceof i))return new i(e,t,n);if(!e)return o;if("string"==typeof e){if((r=s.create(e,t,n)).nodeType===u.DOCUMENT_FRAGMENT_NODE)return c.apply(this,l(r.childNodes)),o}else{if(a.isArray(e)||f(e))return c.apply(o,l(e)),o;r=e}return o[0]=r,o.length=1,o}var s=e("dom"),e=e("event/dom"),r=Array.prototype,t=r.slice,u=s.NodeType,c=r.push,l=a.makeArray,f=s.isDomNodeList;return i.prototype={constructor:i,isNodeList:!0,length:0,item:function(e){return"number"==typeof e?e>=this.length?null:new i(this[e]):new i(e)},add:function(e,t,n){"number"==typeof t&&(n=t,t=void 0);e=i.all(e,t).getDOMNodes(),t=new i(this);return void 0===n?c.apply(t,e):((n=[n,0]).push.apply(n,e),r.splice.apply(t,n)),t},slice:function(){return new i(t.apply(this,arguments))},getDOMNodes:function(){return t.call(this)},each:function(n,r){var o=this;return a.each(o,function(e,t){return e=new i(e),n.call(r||e,e,t,o)}),o},getDOMNode:function(){return this[0]},end:function(){return this.__parent||this},filter:function(e){return new i(s.filter(this,e))},all:function(e){var t=this,e=0<t.length?i.all(e,t):new i;return e.__parent=t,e},one:function(e){e=this.all(e),e=e.length?e.slice(0,1):null;return e&&(e.__parent=this),e}},a.mix(i,{all:function(e,t){return"string"==typeof e&&(e=a.trim(e))&&3<=e.length&&a.startsWith(e,"<")&&a.endsWith(e,">")?new i(e,void 0,t=t?(t=t.getDOMNode?t[0]:t).ownerDocument||t:t):new i(s.query(e,t))},one:function(e,t){t=i.all(e,t);return t.length?t.slice(0,1):null}}),i.NodeType=u,i.KeyCode=e.KeyCode,i.Gesture=e.Gesture,i.REPLACE_HISTORY=e.REPLACE_HISTORY,i}),KISSY.add("node/attach",["dom","event/dom","./base"],function(a,e){function i(e,t,n){n.unshift(t);n=s[e].apply(s,n);return void 0===n?t:n}var s=e("dom"),n=e("event/dom"),o=e("./base"),u=o.prototype,c=a.makeArray;o.KeyCode=n.KeyCode,a.each(["nodeName","isCustomDomain","getEmptyIframeSrc","equals","contains","index","scrollTop","scrollLeft","height","width","innerHeight","innerWidth","outerHeight","outerWidth","addStyleSheet","appendTo","prependTo","insertBefore","before","after","insertAfter","test","hasClass","addClass","removeClass","replaceClass","toggleClass","removeAttr","hasAttr","hasProp","scrollIntoView","remove","empty","removeData","hasData","unselectable","wrap","wrapAll","replaceWith","wrapInner","unwrap"],function(t){u[t]=function(){var e=c(arguments);return i(t,this,e)}}),a.each(["getWindow","getDocument","filter","first","last","parent","closest","next","prev","clone","siblings","contents","children"],function(r){u[r]=function(){var e,t,n=c(arguments);return e=r,t=this,(n=n).unshift(t),void 0===(n=s[e].apply(s,n))?t:null===n?null:new o(n)}}),a.each({attr:1,text:0,css:1,style:1,val:0,prop:1,offset:0,html:0,outerHTML:0,outerHtml:0,data:1},function(r,o){u[o]=function(){var e,t,n=c(arguments);return e=o,t=this,void 0!==(n=n)[r]||a.isObject(n[0])?i(e,t,n):(n.unshift(t),s[e].apply(s,n))}}),a.each(["on","detach","delegate","undelegate"],function(t){u[t]=function(){var e=c(arguments);return e.unshift(this),n[t].apply(n,e),this}}),a.each(["fire","fireHandler"],function(t){u[t]=function(){var e=c(arguments);return e.unshift(this),n[t].apply(n,e)}})}),KISSY.add("node/override",["dom","./base","./attach"],function(e,t){var n=t("dom"),r=t("./base");t("./attach");var o=r.prototype;e.each(["append","prepend","before","after"],function(t){o[t]=function(e){return(e="object"!=typeof e?n.create(e+""):e)&&n[t](e,this),this}}),e.each(["wrap","wrapAll","replaceWith","wrapInner"],function(e){var t=o[e];o[e]=function(e){return"string"==typeof e&&(e=r.all(e,this[0].ownerDocument)),t.call(this,e)}})}),KISSY.add("node/anim",["./base","dom","anim"],function(a,e){function t(e,t,n){for(var r=[],o={},a=n||0;a<t;a++)r.push.apply(r,u[a]);for(a=0;a<r.length;a++)o[r[a]]=e;return o}var n=e("./base"),i=e("dom"),s=e("anim"),u=[["height","margin-top","margin-bottom","padding-top","padding-bottom"],["width","margin-left","margin-right","padding-left","padding-right"],["opacity"]];a.augment(n,{animate:function(){var r=a.makeArray(arguments);return a.each(this,function(e){var t=a.clone(r),n=t[0];n.to?(n.node=e,new s(n).run()):s.apply(void 0,[e].concat(t)).run()}),this},stop:function(t,n,r){return a.each(this,function(e){s.stop(e,t,n,r)}),this},pause:function(e,t){return a.each(this,function(e){s.pause(e,t)}),this},resume:function(e,t){return a.each(this,function(e){s.resume(e,t)}),this},isRunning:function(){for(var e=0;e<this.length;e++)if(s.isRunning(this[e]))return!0;return!1},isPaused:function(){for(var e=0;e<this.length;e++)if(s.isPaused(this[e]))return!0;return!1}}),a.each({show:t("show",3),hide:t("hide",3),toggle:t("toggle",3),fadeIn:t("show",3,2),fadeOut:t("hide",3,2),fadeToggle:t("toggle",3,2),slideDown:t("show",1),slideUp:t("hide",1),slideToggle:t("toggle",1)},function(o,e){n.prototype[e]=function(t,n,r){return i[e]&&!t?i[e](this):a.each(this,function(e){new s(e,o,t,r,n).run()}),this}})}),KISSY.add("node",["node/base","node/attach","node/override","node/anim"],function(e,t){var n=t("node/base");return t("node/attach"),t("node/override"),t("node/anim"),e.mix(e,{Node:n,NodeList:n,one:n.one,all:n.all}),n}),KISSY.add("dom/base/api",[],function(n){var r=n.Env.host||{},t=r.document,o=n.UA,a={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12},i={isCustomDomain:function(e){var t=(e=i.get(e=e||r)).document.domain,e=e.location.hostname;return t!==e&&t!=="["+e+"]"},getEmptyIframeSrc:function(e){return e=i.get(e=e||r),o.ie&&i.isCustomDomain(e)?"javascript:void(function(){"+encodeURIComponent('document.open();document.domain="'+e.document.domain+'";document.close();')+"}())":""},NodeType:a,getWindow:function(e){if(!e)return r;if(e=i.get(e),n.isWindow(e))return e;var t=e;return(t=t.nodeType!==a.DOCUMENT_NODE?e.ownerDocument:t).defaultView||t.parentWindow},getDocument:function(e){return e?(e=i.get(e),n.isWindow(e)?e.document:e.nodeType===a.DOCUMENT_NODE?e:e.ownerDocument):t},isDomNodeList:function(e){return e&&!e.nodeType&&e.item&&!e.setTimeout},nodeName:function(e){var t=i.get(e),e=t.nodeName.toLowerCase();return!o.ie||(t=t.scopeName)&&"HTML"!==t&&(e=t.toLowerCase()+":"+e),e},_RE_NUM_NO_PX:new RegExp("^("+/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source+")(?!px)[a-z%]+$","i")};return n.mix(i,a),i}),KISSY.add("dom/base/attr",["./api"],function(l,e){function u(e){return null==e?"":e+""}function s(e,t){var n=E[t=b[t]||t];return n&&n.get?n.get(e,t):e[t]}var f=e("./api"),e=l.Env.host.document,d=f.NodeType,e=e&&e.documentElement,p=f.nodeName,m=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,n=/^(?:button|input|object|select|textarea)$/i,r=/^a(?:rea)?$/i,h=/:|^on/,c=/\r/g,v={},g={val:1,css:1,html:1,text:1,data:1,width:1,height:1,offset:1,scrollTop:1,scrollLeft:1},y={tabindex:{get:function(e){var t=e.getAttributeNode("tabindex");return t&&t.specified?parseInt(t.value,10):n.test(e.nodeName)||r.test(e.nodeName)&&e.href?0:void 0}}},b={hidefocus:"hideFocus",tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},T={get:function(e,t){return f.prop(e,t)?t.toLowerCase():void 0},set:function(e,t,n){return!1===t?f.removeAttr(e,n):((t=b[n]||n)in e&&(e[t]=!0),e.setAttribute(n,n.toLowerCase())),n}},E={},S={},_={select:{get:function(e){var t,n,r,o=e.selectedIndex,a=e.options,e="select-one"===String(e.type);if(o<0)return null;if(e)return f.val(a[o]);for(t=[],n=0,r=a.length;n<r;++n)a[n].selected&&t.push(f.val(a[n]));return t},set:function(e,t){var n=l.makeArray(t),t=e.options;return l.each(t,function(e){e.selected=l.inArray(f.val(e),n)}),n.length||(e.selectedIndex=-1),n}}};return l.each(["radio","checkbox"],function(e){_[e]={get:function(e){return null===e.getAttribute("value")?"on":e.value},set:function(e,t){return l.isArray(t)?(e.checked=l.inArray(f.val(e),t),1):void 0}}}),y.style={get:function(e){return e.style.cssText}},l.mix(f,{_valHooks:_,_propFix:b,_attrHooks:y,_propHooks:E,_attrNodeHook:S,_attrFix:v,prop:function(e,t,n){var r,o,a,i=f.query(e);if(l.isPlainObject(t))l.each(t,function(e,t){f.prop(i,t,e)});else if(a=E[t=b[t]||t],void 0!==n)for(r=i.length-1;0<=r;r--)o=i[r],a&&a.set?a.set(o,n,t):o[t]=n;else if(i.length)return s(i[0],t)},hasProp:function(e,t){for(var n=f.query(e),r=n.length,o=0;o<r;o++)if(void 0!==s(n[o],t))return!0;return!1},removeProp:function(e,t){t=b[t]||t;for(var n,r=f.query(e),o=r.length-1;0<=o;o--){n=r[o];try{n[t]=void 0,delete n[t]}catch(e){}}},attr:function(e,t,n,r){var o,a,i,s=f.query(e),u=s[0];if(l.isPlainObject(t))for(var c in r=n,t)f.attr(s,c,t[c],r);else{if(r&&g[t])return f[t](e,n);if(t=t.toLowerCase(),r&&g[t])return f[t](e,n);if(o=m.test(t=v[t]||t)?T:h.test(t)?S:y[t],void 0===n){if(u&&u.nodeType===d.ELEMENT_NODE){if((o="form"===p(u)?S:o)&&o.get)return o.get(u,t);if(""===(i=u.getAttribute(t))){e=u.getAttributeNode(t);if(!e||!e.specified)return}return null===i?void 0:i}}else for(a=s.length-1;0<=a;a--)(u=s[a])&&u.nodeType===d.ELEMENT_NODE&&((o="form"===p(u)?S:o)&&o.set?o.set(u,n,t):u.setAttribute(t,""+n))}},removeAttr:function(e,t){t=t.toLowerCase(),t=v[t]||t;for(var n,r,o=f.query(e),a=o.length-1;0<=a;a--)(r=o[a]).nodeType===d.ELEMENT_NODE&&(r.removeAttribute(t),m.test(t)&&(n=b[t]||t)in r&&(r[n]=!1))},hasAttr:e&&!e.hasAttribute?function(e,t){t=t.toLowerCase();for(var n,r=f.query(e),o=0;o<r.length;o++)if((n=r[o].getAttributeNode(t))&&n.specified)return!0;return!1}:function(e,t){for(var n=f.query(e),r=n.length,o=0;o<r;o++)if(n[o].hasAttribute(t))return!0;return!1},val:function(e,t){var n,r,o,a,i,s;if(void 0===t)return(o=f.get(e))?(n=_[p(o)]||_[o.type])&&"get"in n&&void 0!==(r=n.get(o,"value"))?r:"string"==typeof(r=o.value)?r.replace(c,""):null==r?"":r:void 0;for(i=(a=f.query(e)).length-1;0<=i;i--){if(1!==(o=a[i]).nodeType)return;null==(s=t)?s="":"number"==typeof s?s+="":l.isArray(s)&&(s=l.map(s,u)),(n=_[p(o)]||_[o.type])&&"set"in n&&void 0!==n.set(o,s,"value")||(o.value=s)}},text:function(e,t){var n,r,o,a;if(void 0===t)return n=f.get(e),f._getText(n);for(o=(r=f.query(e)).length-1;0<=o;o--)(a=(n=r[o]).nodeType)===d.ELEMENT_NODE?(f.cleanData(n.getElementsByTagName("*")),"textContent"in n?n.textContent=t:n.innerText=t):a!==d.TEXT_NODE&&a!==d.CDATA_SECTION_NODE||(n.nodeValue=t)},_getText:function(e){return e.textContent}}),f}),KISSY.add("dom/base/class",["./api"],function(i,e){function a(e){for(var t,n=(e=i.trim(e||"")).split(l),r=[],o=n.length,a=0;a<o;a++)(t=n[a])&&r.push(t);return r}function t(s){return function(e,t){for(var n,r=e.classList,o=u.call(arguments,2),a=0,i=t.length;a<i;a++)(n=t[a])&&r[s].apply(r,[n].concat(o))}}function n(o){return function(e,t){var n=a(t),r=u.call(arguments,2);s.query(e).each(function(e){e.nodeType===c.ELEMENT_NODE&&s[o].apply(s,[e,n].concat(r))})}}var s=e("./api"),u=[].slice,c=s.NodeType,l=/[\.\s]\s*\.?/;return i.mix(s,{_hasClass:function(e,t){var n,r,o,a=e.classList;if(a.length){for(n=0,r=t.length;n<r;n++)if((o=t[n])&&!a.contains(o))return!1;return!0}return!1},_addClass:t("add"),_removeClass:t("remove"),_toggleClass:t("toggle"),hasClass:function(e,t){var n=!1;return t=a(t),s.query(e).each(function(e){return e.nodeType===c.ELEMENT_NODE&&s._hasClass(e,t)?!(n=!0):void 0}),n},replaceClass:function(e,t,n){s.removeClass(e,t),s.addClass(e,n)},addClass:n("_addClass"),removeClass:n("_removeClass"),toggleClass:n("_toggleClass")}),s}),KISSY.add("dom/base/create",["./api"],function(c,e){function l(e,t){return e.getElementsByTagName(t)}function u(e){e=e&&e!==v?e.createElement(y):t;return e===t&&(e.innerHTML=""),e}function f(e,t){t=u(t);return t.innerHTML="m<div>"+e+"</div>",t.lastChild}function s(e,t){t&&(n&&t.canHaveChildren&&"removeNode"in e?(e.firstChild&&function(e){try{return e.innerHTML=""}catch(e){}for(var t;t=e.lastChild;)s(t,e)}(e),e.removeNode(!1)):t.removeChild(e))}function d(e,t,n){var r=t.nodeType;if(r===g.DOCUMENT_FRAGMENT_NODE)for(var o=t.childNodes,a=n.childNodes,i=0;o[i];)a[i]&&d(e,o[i],a[i]),i++;else if(r===g.ELEMENT_NODE)for(var s=l(t,"*"),u=l(n,"*"),c=0;s[c];)u[c]&&e(s[c],u[c]),c++}function p(e,t){var n,r,o=(o=c.Env.mods["event/dom/base"])&&o.exports;if(t.nodeType!==g.ELEMENT_NODE||h.hasData(e)){for(r in n=h.data(e))h.data(t,r,n[r]);o&&o.clone&&o.clone(e,t)}}function m(e){var t,n,r=null;if(e&&(e.push||e.item)&&e[0])for(r=e[0].ownerDocument.createDocumentFragment(),t=0,n=(e=c.makeArray(e)).length;t<n;t++)r.appendChild(e[t]);else o.error("Unable to convert "+e+" to fragment.");return r}var h=e("./api"),o=c.getLogger("s/dom"),v=c.Env.host.document,g=h.NodeType,e=c.UA.ieMode,y="div",t=v&&v.createElement(y),b=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,T=/<([\w:]+)/,E=/^\s+/,S=/\s+$/,n=!!(e&&e<9),_=n,x=/<|&#?\w+;/,N=v&&"outerHTML"in v.documentElement,w=/^<(\w+)\s*\/?>(?:<\/\1>)?$/;c.mix(h,{create:function(e,t,n,r){var o=null;if(!e)return o;if(e.nodeType)return h.clone(e);if("string"!=typeof e)return o;(r=void 0===r?!0:r)&&(e=c.trim(e));var a,i,s=h._creators,u=n||v,r=y;return x.test(e)?(n=w.exec(e))?o=u.createElement(n[1]):(e=e.replace(b,"<$1></$2>"),r=(s[r=(n=T.exec(e))&&(i=n[1])?i.toLowerCase():r]||f)(e,u),_&&(a=e.match(E))&&r.insertBefore(u.createTextNode(a[0]),r.firstChild),_&&/\S/.test(e)&&(a=e.match(S))&&r.appendChild(u.createTextNode(a[0])),1===(r=r.childNodes).length?o=r[0].parentNode.removeChild(r[0]):r.length?o=m(r):c.error(e+" : create node error")):o=u.createTextNode(e),o=o,t=t,c.isPlainObject(t)&&(o.nodeType===g.ELEMENT_NODE?h.attr(o,t,!0):o.nodeType===g.DOCUMENT_FRAGMENT_NODE&&h.attr(o.childNodes,t,!0)),o},_fixCloneAttributes:function(e,t){"textarea"===h.nodeName(e)&&(t.defaultValue=e.defaultValue,t.value=e.value)},_creators:{div:f},_defaultCreator:f,html:function(e,t,n){var r,o,a=h.query(e),i=a[0],s=!1;if(!i)return null;if(void 0===t){if(i.nodeType===g.ELEMENT_NODE)return i.innerHTML;if(i.nodeType!==g.DOCUMENT_FRAGMENT_NODE)return null;e=u(i.ownerDocument);return e.appendChild(i),e.innerHTML}if(!((t+="").match(/<(?:script|style|link)/i)||_&&t.match(E)||C[(t.match(T)||["",""])[1].toLowerCase()]))try{for(r=a.length-1;0<=r;r--)(o=a[r]).nodeType===g.ELEMENT_NODE&&(h.cleanData(l(o,"*")),o.innerHTML=t);s=!0}catch(e){}s||(i=h.create(t,0,i.ownerDocument,0),h.empty(a),h.append(i,a,n))},outerHtml:function(e,t,n){var r,o=h.query(e),a=o.length,i=o[0];if(!i)return null;if(void 0===t)return N&&i.nodeType!==h.DOCUMENT_FRAGMENT_NODE?i.outerHTML:((e=u(i.ownerDocument)).appendChild(h.clone(i,!0)),e.innerHTML);if(!(t+="").match(/<(?:script|style|link)/i)&&N)for(r=a-1;0<=r;r--)(i=o[r]).nodeType===g.ELEMENT_NODE&&(h.cleanData(i,1),i.outerHTML=t);else a=h.create(t,0,i.ownerDocument,0),h.insertBefore(a,o,n),h.remove(o)},remove:function(e,t){for(var n,r,o=h.query(e),a=(a=c.Env.mods["event/dom/base"])&&a.exports,i=o.length-1;0<=i;i--)n=o[i],t||n.nodeType!==g.ELEMENT_NODE||((r=c.makeArray(l(n,"*"))).push(n),h.removeData(r),a&&a.detach&&a.detach(r)),s(n,n.parentNode)},clone:function(e,t,n,r){"object"==typeof t&&(r=t.deepWithDataAndEvent,n=t.withDataAndEvent,t=t.deep);var o,a=h.get(e),i=h._fixCloneAttributes;return a?(o=a.nodeType,e=a.cloneNode(t),o!==g.ELEMENT_NODE&&o!==g.DOCUMENT_FRAGMENT_NODE||(i&&o===g.ELEMENT_NODE&&i(a,e),t&&i&&d(i,a,e)),n&&(p(a,e),t&&r&&d(p,a,e)),e):null},empty:function(e){for(var t,n=h.query(e),r=n.length-1;0<=r;r--)t=n[r],h.remove(t.childNodes)},_nodeListToFragment:m}),h.outerHTML=h.outerHtml;var r,a=h._creators,i=h.create,C={area:"map",thead:"table",td:"tr",th:"tr",tr:"tbody",tbody:"table",tfoot:"table",caption:"table",colgroup:"table",col:"colgroup",legend:"fieldset"};for(r in C)!function(n){a[r]=function(e,t){return i("<"+n+">"+e+"</"+n+">",void 0,t)}}(C[r]);return a.option=a.optgroup=function(e,t){return i('<select multiple="multiple">'+e+"</select>",void 0,t)},C.option=C.optgroup=1,h}),KISSY.add("dom/base/data",["./api"],function(c,e){var l=e("./api"),o=c.Env.host,a="_ks_data_"+c.now(),i={},s={},u={applet:1,object:1,embed:1},n=function(e,t){if(e)if(void 0!==t){if(t in e)return!0}else if(!c.isEmptyObject(e))return!0;return!1},f={hasData:function(e,t){if(e==o)return f.hasData(s,t);e=e[a];return n(e,t)},data:function(e,t,n){if(e==o)return f.data(s,t,n);var r=e[a];if(void 0===n)return void 0!==t?r&&r[t]:e[a]=e[a]||{};(r=e[a]=e[a]||{})[t]=n},removeData:function(t,e){if(t==o)return f.removeData(s,e);var n=t[a];if(void 0!==e)delete n[e],c.isEmptyObject(n)&&f.removeData(t);else try{delete t[a]}catch(e){t[a]=void 0}}},d={hasData:function(e,t){e=e[a];if(!e)return!1;e=i[e];return n(e,t)},data:function(e,t,n){if(!u[e.nodeName.toLowerCase()]){var r=e[a];if(!r){if(void 0!==t&&void 0===n)return;r=e[a]=c.guid()}if(e=i[r],void 0===n)return void 0!==t?e&&e[t]:i[r]=i[r]||{};(e=i[r]=i[r]||{})[t]=n}},removeData:function(t,e){var n,r=t[a];if(r)if(n=i[r],void 0!==e)delete n[e],c.isEmptyObject(n)&&d.removeData(t);else{delete i[r];try{delete t[a]}catch(e){t[a]=void 0}t.removeAttribute&&t.removeAttribute(a)}}};return c.mix(l,{__EXPANDO:a,hasData:function(e,t){for(var n=!1,r=l.query(e),o=0;o<r.length;o++){var a=r[o];if(n=(a.nodeType?d:f).hasData(a,t))return n}return n},data:function(e,t,n){var r=l.query(e),o=r[0];if(c.isPlainObject(t))for(var a in t)l.data(r,a,t[a]);else if(void 0===n){if(o)return(o.nodeType?d:f).data(o,t)}else for(var i=r.length-1;0<=i;i--)((o=r[i]).nodeType?d:f).data(o,t,n)},removeData:function(e,t){for(var n,r=l.query(e),o=r.length-1;0<=o;o--)((n=r[o]).nodeType?d:f).removeData(n,t)},cleanData:function(e,t){for(var n,r=l.query(e),o=(o=c.Env.mods["event/dom/base"])&&o.exports,a=r.length-1;0<=a;a--)if((n=r[a]).nodeType){var i=t&&c.makeArray(n.getElementsByTagName("*"))||[];i.push(n);for(var s=0,u=i.length;s<u;s++)d.removeData(i[s]);o&&o.detach&&o.detach(i)}else f.removeData(n)}}),l}),KISSY.add("dom/base/insertion",["./api"],function(l,e){function f(e){return!e.type||t.test(e.type)}function d(e){e.src?l.getScript(e.src):(e=l.trim(e.text||e.textContent||e.innerHTML||""))&&l.globalEval(e)}function r(e,t,n,r){e=function e(t,n){for(var r,o,a=[],i=0;t[i];i++)if(r=t[i],o=v(r),r.nodeType===m.DOCUMENT_FRAGMENT_NODE)a.push.apply(a,e(g(r.childNodes),n));else if("script"===o&&f(r))r.parentNode&&r.parentNode.removeChild(r),n&&n.push(r);else{if(r.nodeType===m.ELEMENT_NODE&&!h.test(o)){for(var s,u=[],c=r.getElementsByTagName("script"),l=0;l<c.length;l++)f(s=c[l])&&u.push(s);y.apply(t,[i+1,0].concat(u))}a.push(r)}return a}(e=p.query(e),r=r&&[]),p._fixInsertionChecked&&p._fixInsertionChecked(e),t=p.query(t);var o,a,i,s,u=e.length,c=t.length;if((u||r&&r.length)&&c)for(o=p._nodeListToFragment(e),1<c&&(s=p.clone(o,!0),t=l.makeArray(t)),a=0;a<c;a++)i=t[a],o&&n(0<a?p.clone(s,!0):o,i),r&&r.length&&l.each(r,d)}var p=e("./api"),o="parentNode",m=p.NodeType,h=/^(?:button|input|object|select|textarea)$/i,v=p.nodeName,g=l.makeArray,y=[].splice,t=/\/(java|ecma)script/i;return l.mix(p,{_fixInsertionChecked:null,insertBefore:function(e,t,n){r(e,t,function(e,t){t[o]&&t[o].insertBefore(e,t)},n)},insertAfter:function(e,t,n){r(e,t,function(e,t){t[o]&&t[o].insertBefore(e,t.nextSibling)},n)},appendTo:function(e,t,n){r(e,t,function(e,t){t.appendChild(e)},n)},prependTo:function(e,t,n){r(e,t,function(e,t){t.insertBefore(e,t.firstChild)},n)},wrapAll:function(e,t){t=p.clone(p.get(t),!0),(e=p.query(e))[0].parentNode&&p.insertBefore(t,e[0]);for(var n;(n=t.firstChild)&&1===n.nodeType;)t=n;p.appendTo(e,t)},wrap:function(e,t){e=p.query(e),t=p.get(t),l.each(e,function(e){p.wrapAll(e,t)})},wrapInner:function(e,n){e=p.query(e),n=p.get(n),l.each(e,function(e){var t=e.childNodes;t.length?p.wrapAll(t,n):e.appendChild(n)})},unwrap:function(e){e=p.query(e),l.each(e,function(e){e=e.parentNode;p.replaceWith(e,e.childNodes)})},replaceWith:function(e,t){e=p.query(e);t=p.query(t),p.remove(t,!0),p.insertBefore(t,e),p.remove(e)}}),l.each({prepend:"prependTo",append:"appendTo",before:"insertBefore",after:"insertAfter"},function(e,t){p[t]=p[e]}),p}),KISSY.add("dom/base/offset",["./api"],function(m,e){function s(e){var t,n=e.ownerDocument.body;return e.getBoundingClientRect?(e=(t=e.getBoundingClientRect())[b],t=t[T],{left:e-=r.clientLeft||n.clientLeft||0,top:t-=r.clientTop||n.clientTop||0}):{left:0,top:0}}function u(e,t){var n,r,o={left:0,top:0},a=g(e),i=e;for(t=t||a;r=a==t?(r=void 0,r=s(n=i),n=g(n),r.left+=h[E](n),r.top+=h[S](n),r):s(i),o.left+=r.left,o.top+=r.top,a&&a!=t&&(i=a.frameElement)&&(a=a.parent););return o}var h=e("./api"),c=m.Env.host,a=m.UA,e=c.document,v=h.NodeType,r=e&&e.documentElement,g=h.getWindow,t=Math.max,l="position",f="document",d="body",p="documentElement",n="viewport",y="scroll",b="left",T="top",E=y+"Left",S=y+"Top";return m.mix(h,{offset:function(e,t,n){var r,o;if(void 0===t)return r=(o=h.get(e))?u(o,n):r;for(var a=h.query(e),i=a.length-1;0<=i;i--)(function(e,t){"static"===h.css(e,l)&&(e.style[l]="relative");var n,r,o=u(e),a={};for(r in t)n=parseFloat(h.css(e,r))||0,a[r]=n+t[r]-o[r];h.css(e,a)})(o=a[i],t)},scrollIntoView:function(e,t,n,r){var o,a,i,s,u,c,l,f,d,p;(p=h.get(e))&&((t=(t=t&&h.get(t))||p.ownerDocument).nodeType===v.DOCUMENT_NODE&&(t=g(t)),m.isPlainObject(n)&&(r=n.allowHorizontalScroll,o=n.onlyScrollIfNeeded,n=n.alignWithTop),r=void 0===r||r,f=m.isWindow(t),d=h.offset(p),e=h.outerHeight(p),p=h.outerWidth(p),f?(s=t,l=h.height(s),c=h.width(s),u={left:h.scrollLeft(s),top:h.scrollTop(s)},a={left:d[b]-u[b],top:d[T]-u[T]},i={left:d[b]+p-(u[b]+c),top:d[T]+e-(u[T]+l)},s=u):(c=h.offset(t),l=t.clientHeight,u=t.clientWidth,s={left:h.scrollLeft(t),top:h.scrollTop(t)},a={left:d[b]-(c[b]+(parseFloat(h.css(t,"borderLeftWidth"))||0)),top:d[T]-(c[T]+(parseFloat(h.css(t,"borderTopWidth"))||0))},i={left:d[b]+p-(c[b]+u+(parseFloat(h.css(t,"borderRightWidth"))||0)),top:d[T]+e-(c[T]+l+(parseFloat(h.css(t,"borderBottomWidth"))||0))}),o?(a.top<0||0<i.top)&&(!0===n||!1!==n&&a.top<0?h.scrollTop(t,s.top+a.top):h.scrollTop(t,s.top+i.top)):(n=void 0===n||!!n)?h.scrollTop(t,s.top+a.top):h.scrollTop(t,s.top+i.top),r&&(o?(a.left<0||0<i.left)&&(!0===n||!1!==n&&a.left<0?h.scrollLeft(t,s.left+a.left):h.scrollLeft(t,s.left+i.left)):(n=void 0===n||!!n)?h.scrollLeft(t,s.left+a.left):h.scrollLeft(t,s.left+i.left)))},docWidth:0,docHeight:0,viewportHeight:0,viewportWidth:0,scrollTop:0,scrollLeft:0}),m.each(["Left","Top"],function(i,s){var u=y+i;h[u]=function(e,t){return"number"==typeof e?arguments.callee(c,e):((e=h.get(e))&&e.nodeType===v.ELEMENT_NODE?void 0!==t?e[u]=parseFloat(t):n=e[u]:(a=g(e),void 0!==t?(t=parseFloat(t),r="Left"===i?t:h.scrollLeft(a),o="Top"===i?t:h.scrollTop(a),a.scrollTo(r,o)):"number"!=typeof(n=a["page"+(s?"Y":"X")+"Offset"])&&("number"!=typeof(n=(a=a[f])[p][u])&&(n=a[d][u]))),n);var n,r,o,a}}),m.each(["Width","Height"],function(o){h["doc"+o]=function(e){e=h.get(e);e=h.getDocument(e);return t(e[p][y+o],e[d][y+o],h[n+o](e))},h[n+o]=function(e){e=h.get(e);var t=g(e),n=t["inner"+o];if(a.mobile&&n)return n;var r="client"+o,e=t[f],n=e[d],t=e[p][r];return"CSS1Compat"===e.compatMode&&t||n&&n[r]||t}}),h}),KISSY.add("dom/base/style",["./api","ua"],function(e,t){function a(){return arguments[1].toUpperCase()}function u(e){return e.replace(m,a)}function n(e){if((e=-1!==e.indexOf("-")?e.replace(m,a):e)in y)return y[e];if(!S||e in S)y[e]={propertyName:e,propertyNamePrefix:""};else{for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<T;n++){var r,o=b[n];(r=o+t)in S&&(y[e]={propertyName:r,propertyNamePrefix:o})}y[e]=y[e]||null}return y[e]}function i(e){if(F[e])return F[e];var t=n(e);return t&&t.propertyName||e}function c(e,t,n){var r,o,a;if(3!==e.nodeType&&8!==e.nodeType&&(r=e.style)){if(t=u(t),a=P[t],t=i(t),void 0===n)return void 0===(o=!(a&&"get"in a&&void 0!==(o=a.get(e,!1)))?r[t]:o)?"":o;if(null===n||""===n?n="":isNaN(Number(n))||R[t]||(n+="px"),void 0!==(n=a&&a.set?a.set(e,n):n)){try{r[t]=n}catch(e){v.warn("css set error:"+e)}""===n&&r.removeAttribute&&r.removeAttribute(t)}r.cssText||(_.webkit&&(r=e.outerHTML),e.removeAttribute("style"))}}function s(e){var t,n=arguments;return 0!==e.offsetWidth?t=r.apply(void 0,n):function(e,t,n){var r,o={},a=e.style;for(r in t)o[r]=a[r],a[r]=t[r];for(r in n.call(e),t)a[r]=o[r]}(e,U,function(){t=r.apply(void 0,n)}),t}function l(e,t,n,r){for(var o,a,i=0,s=0;s<t.length;s++)if(o=t[s])for(a=0;a<n.length;a++){var u="border"===o?o+n[a]+"Width":o+n[a];i+=parseFloat(g._getComputedStyle(e,u,r))||0}return i}function f(e,t){return"border-box"===g._getComputedStyle(e,"boxSizing",t)}function d(e){var t,n=e.ownerDocument;return t=n.defaultView?n.defaultView.getComputedStyle(e,null):t}function r(e,t,n){if(h.isWindow(e))return t===I?g.viewportWidth(e):g.viewportHeight(e);if(9===e.nodeType)return t===I?g.docWidth(e):g.docHeight(e);var r=t===I?["Left","Right"]:["Top","Bottom"],o=t===I?e.offsetWidth:e.offsetHeight,a=d(e),i=f(e,a),s=0;(null==o||o<=0)&&(o=void 0,(null==(s=g._getComputedStyle(e,t,a))||Number(s)<0)&&(s=e.style[t]||0),s=parseFloat(s)||0);t=void 0!==o||i,o=o||s;return(n=void 0===n?i?C:N:n)===N?t?o-l(e,["border","padding"],r,a):s:t?o+(n===C?0:n===w?-l(e,["border"],r,a):l(e,["margin"],r,a)):s+l(e,x.slice(n),r,a)}function p(e){var t,n,r={top:0,left:0};return"fixed"===g.css(e,"position")?n=e.getBoundingClientRect():(t=function(e){for(var t=e.offsetParent||(e.ownerDocument||E).body;t&&!q.test(t.nodeName)&&"static"===g.css(t,"position");)t=t.offsetParent;return t}(e),n=g.offset(e),(r=g.offset(t)).top+=parseFloat(g.css(t,"borderTopWidth"))||0,r.left+=parseFloat(g.css(t,"borderLeftWidth"))||0),n.top-=parseFloat(g.css(e,"marginTop"))||0,n.left-=parseFloat(g.css(e,"marginLeft"))||0,{top:n.top-r.top,left:n.left-r.left}}var m=/-([a-z])/gi,h=e,v=e.getLogger("s/dom"),g=t("./api"),o=e.Env.host,y={},b=["Webkit","Moz","O","ms"],T=b.length,E=o.document||{},S=(E&&E.documentElement).style,_=t("ua"),x=["margin","border","padding"],N=-1,w=2,C=1,D=g.nodeName,O=/^margin/,I="width",A="display",M=A+h.now(),L="none",R={fillOpacity:1,fontWeight:1,lineHeight:1,opacity:1,orphans:1,widows:1,zIndex:1,zoom:1},k=/\d(?!px)[a-z%]+$/i,P={},F={},Y={},t=n("userSelect"),K=t&&t.propertyName;F.float="cssFloat",h.mix(g,{_cssHooks:P,_cssProps:F,_getComputedStyle:function(e,t,n){var r,o="",a=e.ownerDocument;return t=i(t),""!==(o=(n=n||a.defaultView.getComputedStyle(e,null))?n.getPropertyValue(t)||n[t]:o)||g.contains(a,e)||(o=e.style[t]),g._RE_NUM_NO_PX.test(o)&&O.test(t)&&(a=(r=e.style).width,t=r.minWidth,e=r.maxWidth,r.minWidth=r.maxWidth=r.width=o,o=n.width,r.width=a,r.minWidth=t,r.maxWidth=e),o},style:function(e,t,n){var r,o,a=g.query(e),i=a[0];if(h.isPlainObject(t))for(r in t)for(o=a.length-1;0<=o;o--)c(a[o],r,t[r]);else{if(void 0===n)return e="",e=i?c(i,t,n):e;for(o=a.length-1;0<=o;o--)c(a[o],t,n)}},css:function(e,t,n){var r,o,a,i=g.query(e),s=i[0];if(h.isPlainObject(t))for(r in t)for(a=i.length-1;0<=a;a--)c(i[a],r,t[r]);else{if(t=u(t),o=P[t],void 0===n)return e="",s&&(o&&"get"in o&&void 0!==(e=o.get(s,!0))||(e=g._getComputedStyle(s,t))),void 0===e?"":e;for(a=i.length-1;0<=a;a--)c(i[a],t,n)}},show:function(e){for(var t,n,r,o,a,i=g.query(e),s=i.length-1;0<=s;s--)(t=i[s]).style[A]=g.data(t,M)||"",g.css(t,A)===L&&(n=t.tagName.toLowerCase(),a=o=r=void 0,a=Y[n=n],Y[n]||(r=E.body||E.documentElement,o=E.createElement(n),g.prepend(o,r),a=g.css(o,"display"),r.removeChild(o),Y[n]=a),a=a,g.data(t,M,a),t.style[A]=a)},hide:function(e){for(var t=g.query(e),n=t.length-1;0<=n;n--){var r,o=(r=t[n]).style,a=o[A];a!==L&&(a&&g.data(r,M,a),o[A]=L)}},toggle:function(e){for(var t,n=g.query(e),r=n.length-1;0<=r;r--)t=n[r],g.css(t,A)===L?g.show(t):g.hide(t)},addStyleSheet:function(e,t,n){"string"==typeof e&&(n=t,t=e,e=o);var r,e=g.getDocument(e);(r=(n=n&&n.replace("#",""))?g.get("#"+n,e):r)||(r=g.create("<style>",{id:n},e),g.get("head",e).appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(e.createTextNode(t)))},unselectable:K?function(e){for(var t=g.query(e),n=t.length-1;0<=n;n--)t[n].style[K]="none"}:function(e){for(var t,n,r,o,a=g.query(e),i=0,s=a.length-1;0<=s;s--)for((t=a[s]).style,o=t.getElementsByTagName("*"),t.setAttribute("unselectable","on"),r=["iframe","textarea","input","select"];n=o[i++];)h.inArray(D(n),r)||n.setAttribute("unselectable","on")},innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0,width:0,height:0}),h.each([I,"height"],function(r){g["inner"+h.ucfirst(r)]=function(e){e=g.get(e);return e&&s(e,r,w)},g["outer"+h.ucfirst(r)]=function(e,t){e=g.get(e);return e&&s(e,r,t?0:C)};var o=r===I?["Left","Right"]:["Top","Bottom"];g[r]=function(e,t){var n=g.get(e);if(void 0===t)return n&&s(n,r,N);if(n){e=d(n);return f(n,e)&&(t+=l(n,["padding","border"],o,e)),g.css(n,r,t)}},P[r]={get:function(e,t){var n;return n=t?s(e,r)+"px":n}}});var U={position:"absolute",visibility:"hidden",display:"block"};h.each(["left","top"],function(o){P[o]={get:function(e,t){var n,r;if(t){if("static"===(r=g.css(e,"position")))return"auto";if((t="auto"===(n=g._getComputedStyle(e,o)))&&"relative"===r)return"0px";(t||k.test(n))&&(n=p(e)[o]+"px")}return n}}});var q=/^(?:body|html)$/i;return g}),KISSY.add("dom/base/selector",["./api"],function(T,e){function E(e){for(var t=this.length,n=0;n<t&&!1!==e(this[n],n);n++);}function a(e){e=e.substr(1);if(!e)throw new Error("An invalid or illegal string was specified for selector.");return e}function S(e){var t,n,r,o=e.charAt(0);return"#"===o?(r=a(e),function(e){var t=x._getElementById(r,N);return t&&x._contains(e,t)?[t]:[]}):"."===o?(n=a(e),function(e){return k(e,n)}):(t=e,function(e){return e.getElementsByTagName(t)})}function _(e,t){var n,r,o="string"==typeof e,a=void 0!==t?_(t):(r=1,[N]),i=a.length;if(e){if(o){if(e=R(e),r)if("body"===e)b=[N.body];else if(I.test(e))b=C(k(N,RegExp.$1));else if(L.test(e))b=(n=x._getElementById(RegExp.$2,N))&&n.nodeName.toLowerCase()===RegExp.$1?[n]:[];else if(A.test(e))b=(n=x._getElementById(e.substr(1),N))?[n]:[];else if(M.test(e))b=C(N.getElementsByTagName(e));else if(!e.match(/,|\+|=|~|\[|\]|:|>|\||\$|\^|\*|\(|\)|[\w-]+\.[\w-]+|[\w-]+#[\w-]+/)){for(var s=e.split(/\s+/),u=a,c=0,l=s.length;c<l;c++)s[c]=S(s[c]);for(c=0,l=s.length;c<l;c++){for(var f,d=s[c],p=[],m=0,h=u.length;m<h;m++)f=d(u[m]),p.push.apply(p,C(f));if(!(u=p).length)break}b=u&&1<u.length?x.unique(u):u}if(!b){for(b=[],c=0;c<i;c++)O.apply(b,x._selectInternal(e,a[c]));1<b.length&&1<i&&x.unique(b)}}else if(b=e.nodeType||T.isWindow(e)?[e]:e.getDOMNodes?e.getDOMNodes():w(e)?e:D(e)?C(e):[e],!r){var v,g=b,y=g.length,b=[];for(c=0;c<y;c++)for(v=0;v<i;v++)if(x._contains(a[v],g[c])){b.push(g[c]);break}}}else b=[];return b.each=E,b}function s(e,t){e=e&&u(e,"class");return(e=e&&e.replace(/[\r\t\n]/g," "))&&-1<(" "+e+" ").indexOf(" "+t+" ")}function u(e,t){t=e&&e.getAttributeNode(t);return t&&t.specified?t.nodeValue:void 0}function c(e,t){return"*"===t||e.nodeName.toLowerCase()===t.toLowerCase()}var r,o,x=e("./api"),N=T.Env.host.document,e=N.documentElement,i=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.msMatchesSelector,e="getElementsByClassName"in N,w=T.isArray,C=T.makeArray,D=x.isDomNodeList,O=Array.prototype.push,I=/^\.([\w-]+)$/,A=/^#([\w-]+)$/,M=/^([\w-])+$/,L=/^([\w-]+)#([\w-]+)$/,l=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/,R=T.trim,k=e?function(e,t){return e.getElementsByClassName(t)}:function(e,t){var n,r,o=[],a=e.getElementsByTagName("*");for(t=" "+t+" ",n=0;n<a.length;n++)-1<(" "+((r=a[n]).className||r.getAttribute("class"))+" ").indexOf(t)&&o.push(r);return o};return T.mix(x,{_compareNodeOrder:function(e,t){return e.compareDocumentPosition&&t.compareDocumentPosition?4&e.compareDocumentPosition(t)?-1:1:e.compareDocumentPosition?-1:1},_getElementsByTagName:function(e,t){return C(t.querySelectorAll(e))},_getElementById:function(e,t){return t.getElementById(e)},_getSimpleAttr:u,_isTag:c,_hasSingleClass:s,_matchesInternal:function(e,t){for(var n,r=[],o=0,a=t.length;o<a;o++)n=t[o],i.call(n,e)&&r.push(n);return r},_selectInternal:function(e,t){return C(t.querySelectorAll(e))},query:_,get:function(e,t){return _(e,t)[0]||null},unique:(o=!0,[0,0].sort(function(){return o=!1,0}),function(e){if(r=o,e.sort(f),r)for(var t=1,n=e.length;t<n;)e[t]===e[t-1]?(e.splice(t,1),--n):t++;return e}),filter:function(e,t,n){var r,o,a,i,n=_(e,n);return"string"==typeof t&&(t=R(t))&&(a=l.exec(t))&&(r=a[1],o=a[2],i=a[3],r?!r||o||i||(t=function(e){return u(e,"id")===r}):t=function(e){var t=!0,n=!0;return o&&(t=c(e,o)),(n=i?s(e,i):n)&&t}),"function"==typeof t?T.filter(n,t):x._matchesInternal(t,n)},test:function(e,t,n){e=_(e,n);return e.length&&x.filter(e,t,n).length===e.length}}),x;function f(e,t){return e===t?(r=!0,0):x._compareNodeOrder(e,t)}}),KISSY.add("dom/base/traversal",["./api"],function(f,e){function o(e,t,n,r,o,a,i){if(!(e=d.get(e)))return null;if(0===t)return e;if(!(e=!a?e[n]:e))return null;o=o&&d.get(o)||null;var s,u,c=[],l=f.isArray(t=void 0===t?1:t);for("number"==typeof t&&(s=0,u=t,t=function(){return++s===u});e&&e!==o&&(!(e.nodeType===p.ELEMENT_NODE||e.nodeType===p.TEXT_NODE&&i)||!function(e,t){if(!t)return!0;if(f.isArray(t)){var n,r=t.length;if(!r)return!0;for(n=0;n<r;n++)if(d.test(e,t[n]))return!0}else if(d.test(e,t))return!0;return!1}(e,t)||r&&!r(e)||(c.push(e),l));)e=e[n];return l?c:c[0]||null}function r(e,t,n,r){var o,a,i,s=[],u=d.get(e),e=u;if(e=u&&n?u.parentNode:e){for(o=f.makeArray(e.childNodes),a=0;a<o.length;a++)i=o[a],!r&&i.nodeType!==p.ELEMENT_NODE||i===u||s.push(i);t&&(s=d.filter(s,t))}return s}var d=e("./api"),p=d.NodeType;return f.mix(d,{_contains:function(e,t){return!!(16&e.compareDocumentPosition(t))},closest:function(e,t,n,r){return o(e,t,"parentNode",function(e){return e.nodeType!==p.DOCUMENT_FRAGMENT_NODE},n,!0,r)},parent:function(e,t,n){return o(e,t,"parentNode",function(e){return e.nodeType!==p.DOCUMENT_FRAGMENT_NODE},n,void 0)},first:function(e,t,n){e=d.get(e);return o(e&&e.firstChild,t,"nextSibling",void 0,void 0,!0,n)},last:function(e,t,n){e=d.get(e);return o(e&&e.lastChild,t,"previousSibling",void 0,void 0,!0,n)},next:function(e,t,n){return o(e,t,"nextSibling",void 0,void 0,void 0,n)},prev:function(e,t,n){return o(e,t,"previousSibling",void 0,void 0,void 0,n)},siblings:function(e,t,n){return r(e,t,!0,n)},children:function(e,t){return r(e,t,void 0)},contents:function(e,t){return r(e,t,void 0,1)},contains:function(e,t){return e=d.get(e),t=d.get(t),!(!e||!t)&&d._contains(e,t)},index:function(e,t){var n,r=d.query(e),o=0,a=r[0];if(t)return e=d.query(t),"string"==typeof t?f.indexOf(a,e):f.indexOf(e[0],r);if(!a||!a.parentNode)return-1;for(n=a;n=n.previousSibling;)n.nodeType===p.ELEMENT_NODE&&o++;return o},equals:function(e,t){if(e=d.query(e),t=d.query(t),e.length!==t.length)return!1;for(var n=e.length;0<=n;n--)if(e[n]!==t[n])return!1;return!0}}),d}),KISSY.add("dom/base",["./base/api","./base/attr","./base/class","./base/create","./base/data","./base/insertion","./base/offset","./base/style","./base/selector","./base/traversal"],function(e,t){var n=t("./base/api");return t("./base/attr"),t("./base/class"),t("./base/create"),t("./base/data"),t("./base/insertion"),t("./base/offset"),t("./base/style"),t("./base/selector"),t("./base/traversal"),e.mix(e,{DOM:n,get:n.get,query:n.query}),n}),KISSY.add("event/dom/base/utils",["dom"],function(e,t){var n=t("dom"),r="ksEventTargetId_"+e.now(),e=e.Env.host.document;return{simpleAdd:e&&e.addEventListener?function(e,t,n,r){e.addEventListener&&e.addEventListener(t,n,!!r)}:function(e,t,n){e.attachEvent&&e.attachEvent("on"+t,n)},simpleRemove:e&&e.removeEventListener?function(e,t,n,r){e.removeEventListener&&e.removeEventListener(t,n,!!r)}:function(e,t,n){e.detachEvent&&e.detachEvent("on"+t,n)},data:function(e,t){return n.data(e,r,t)},removeData:function(e){return n.removeData(e,r)}}}),KISSY.add("event/dom/base/special",[],function(){return{}}),KISSY.add("event/dom/base/observer",["event/base","./special"],function(e,t){function n(e){n.superclass.constructor.call(this,e)}var r=t("event/base"),a=t("./special");return e.extend(n,r.Observer,{keys:["fn","filter","data","context","originalType","groups","last"],notifyInternal:function(e,t){var n,r,o=e.type;return(r=this.originalType)?e.type=r:r=o,(r=a[r])&&r.handle?(r=r.handle(e,this,t))&&0<r.length&&(n=r[0]):n=this.simpleNotify(e,t),!1===n&&e.halt(),e.type=o,n}}),n}),KISSY.add("event/dom/base/object",["event/base"],function(u,e){function c(){return t}function l(){return p}function f(e){var t=this,n=e.type;f.superclass.constructor.call(t);var r=l;"defaultPrevented"in(t.originalEvent=e)?r=e.defaultPrevented?c:l:"getPreventDefault"in e?r=e.getPreventDefault()?c:l:"returnValue"in e&&(r=e.returnValue===p?c:l),t.isDefaultPrevented=r;var o,a,i=[],s=m.concat();for(u.each(h,function(e){n.match(e.reg)&&(s=s.concat(e.props),e.fix&&i.push(e.fix))}),o=s.length;o;)t[a=s[--o]]=e[a];for(t.target||(t.target=e.srcElement||d),3===t.target.nodeType&&(t.target=t.target.parentNode),o=i.length;o;)(0,i[--o])(t,e)}var e=e("event/base"),d=u.Env.host.document,t=!0,p=!1,m=["altKey","bubbles","cancelable","ctrlKey","currentTarget","eventPhase","metaKey","shiftKey","target","timeStamp","view","type"],h=[{reg:/^key/,props:["char","charCode","key","keyCode","which"],fix:function(e,t){null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),void 0===e.metaKey&&(e.metaKey=e.ctrlKey)}},{reg:/^touch/,props:["touches","changedTouches","targetTouches"]},{reg:/^gesturechange$/i,props:["rotation","scale"]},{reg:/^(mousewheel|DOMMouseScroll)$/,props:[],fix:function(e,t){var n,r,o,a=t.wheelDelta,i=t.axis,s=t.wheelDeltaY,u=t.wheelDeltaX,t=t.detail;a&&(o=a/120),t&&(o=-(t%3==0?t/3:t)),void 0!==i&&(i===e.HORIZONTAL_AXIS?(r=0,n=-1*o):i===e.VERTICAL_AXIS&&(n=0,r=o)),void 0!==s&&(r=s/120),(n=void 0!==u?-1*u/120:n)||r||(r=o),void 0!==n&&(e.deltaX=n),void 0!==r&&(e.deltaY=r),void 0!==o&&(e.delta=o)}},{reg:/^mouse|contextmenu|click|mspointer|(^DOMMouseScroll$)/i,props:["buttons","clientX","clientY","button","offsetX","relatedTarget","which","fromElement","toElement","offsetY","pageX","pageY","screenX","screenY"],fix:function(e,t){var n,r,o=e.target,a=t.button;return null==e.pageX&&null!=t.clientX&&(n=(r=o.ownerDocument||d).documentElement,r=r.body,e.pageX=t.clientX+(n&&n.scrollLeft||r&&r.scrollLeft||0)-(n&&n.clientLeft||r&&r.clientLeft||0),e.pageY=t.clientY+(n&&n.scrollTop||r&&r.scrollTop||0)-(n&&n.clientTop||r&&r.clientTop||0)),e.which||void 0===a||(e.which=1&a?1:2&a?3:4&a?2:0),!e.relatedTarget&&e.fromElement&&(e.relatedTarget=e.fromElement===o?e.toElement:e.fromElement),e}}];return u.extend(f,e.Object,{constructor:f,preventDefault:function(){var e=this.originalEvent;e.preventDefault?e.preventDefault():e.returnValue=p,f.superclass.preventDefault.call(this)},stopPropagation:function(){var e=this.originalEvent;e.stopPropagation?e.stopPropagation():e.cancelBubble=t,f.superclass.stopPropagation.call(this)}}),f}),KISSY.add("event/dom/base/observable",["event/base","dom","./special","./utils","./observer","./object"],function(v,e){function g(e){v.mix(this,e),this.reset()}var t=e("event/base"),b=e("dom"),y=e("./special"),i=e("./utils"),o=e("./observer"),T=e("./object"),h=t.Utils,E=v.getLogger("s/event");return v.extend(g,t.Observable,{setup:function(){var e=this.type,t=y[e]||{},n=this.currentTarget,r=i.data(n).handle;t.setup&&!1!==t.setup.call(n,e)||i.simpleAdd(n,e,r)},constructor:g,reset:function(){g.superclass.reset.call(this),this.delegateCount=0,this.lastCount=0},notify:function(e){var t,n,r,o,a,i,s=e.target,u=e.type,c=this.currentTarget,l=this.observers,f=[],d=this.delegateCount||0;if(d&&s.nodeType)for(;s!==c;){if(!0!==s.disabled||"click"!==u){for(var p,m,h,v={},g=[],y=0;y<d;y++)(p=void 0===(p=v[m=(h=(i=l[y]).filter)+""])?v[m]=b.test(s,h):p)&&g.push(i);g.length&&f.push({currentTarget:s,currentTargetObservers:g})}s=s.parentNode||c}for(d<l.length&&f.push({currentTarget:c,currentTargetObservers:l.slice(d)}),y=0,a=f.length;!e.isPropagationStopped()&&y<a;++y)for(g=(r=f[y]).currentTargetObservers,r=r.currentTarget,e.currentTarget=r,o=0;!e.isImmediatePropagationStopped()&&o<g.length;o++)t=g[o].notify(e,this),!1!==n&&void 0!==t&&(n=t);return n},fire:function(e,t){e=e||{};var n,r,o=String(this.type),a=y[o]||{},i=!1!==a.bubbles,s=this.currentTarget;if(!(a.fire&&!1===a.fire.call(s,t)||(e instanceof T||(r=e,e=new T({currentTarget:s,type:o,target:s}),v.mix(e,r)),a.preFire&&!1===a.preFire.call(s,e,t)))){for(var u,c,l=s,f=b.getWindow(l),d=f.document,p=[],m="on"+o,h=0;p.push(l),l=l.parentNode||l.ownerDocument||l===d&&f,!t&&l&&i;);for(l=p[h];e.currentTarget=l,(n=g.getDomEventObservable(l,o))&&void 0!==(c=n.notify(e))&&!1!==u&&(u=c),l[m]&&!1===l[m].call(l)&&e.preventDefault(),l=p[++h],!t&&l&&!e.isPropagationStopped(););if(!t&&!e.isDefaultPrevented()){try{s[o]&&!v.isWindow(s)&&s[g.triggeredEvent=o]()}catch(e){E.debug("trigger action error: "+e)}g.triggeredEvent=""}return u}},on:function(e){var t=this,n=t.observers,r=y[t.type]||{},e=e instanceof o?e:new o(e);v.Config.debug&&(e.fn||v.error("lack event handler for "+t.type)),-1===t.findObserver(e)&&(e.filter?(n.splice(t.delegateCount,0,e),t.delegateCount++):e.last?(n.push(e),t.lastCount++):n.splice(n.length-t.lastCount,0,e),r.add&&r.add.call(t.currentTarget,e))},detach:function(e){var t,n=this,r=y[n.type]||{},o="filter"in e,a=e.filter,i=e.context,s=e.fn,u=n.currentTarget,c=n.observers,e=e.groups;if(c.length){e&&(t=h.getGroupsRe(e));var l,f,d,p,m=c.length;if(s||o||t){for(i=i||u,f=l=0,d=[];l<m;++l)i!==((p=c[l]).context||u)||s&&s!==p.fn||o&&(a&&a!==p.filter||!a&&!p.filter)||t&&!p.groups.match(t)?d[f++]=p:(p.filter&&n.delegateCount&&n.delegateCount--,p.last&&n.lastCount&&n.lastCount--,r.remove&&r.remove.call(u,p));n.observers=d}else n.reset();n.checkMemory()}},checkMemory:function(){var e,t,n=this.type,r=y[n]||{},o=this.currentTarget,a=i.data(o);a&&(e=a.observables,this.hasObserver()||(t=a.handle,r.tearDown&&!1!==r.tearDown.call(o,n)||i.simpleRemove(o,n,t),delete e[n]),v.isEmptyObject(e)&&(a.handle=null,i.removeData(o)))}}),g.triggeredEvent="",g.getDomEventObservable=function(e,t){var n,e=i.data(e);return(n=e?e.observables:n)?n[t]:null},g.getDomEventObservablesHolder=function(e,t){var n=i.data(e);return!n&&t&&i.data(e,n={}),n},g}),KISSY.add("event/dom/base/dom-event",["event/base","./utils","dom","./special","./observable","./object"],function(i,e){function s(e,t){var n,r=f[t]||{};return!e.originalType&&(n=r.typeFix)&&(e.originalType=t,t=n),t}function u(e,t,n){var r,o,a;t=s(n=i.merge(n),t),r=d.getDomEventObservablesHolder(e,1),(a=r.handle)||((a=r.handle=function(e){var t=e.type,n=a.currentTarget;return d.triggeredEvent===t||"undefined"==typeof KISSY?void 0:(t=d.getDomEventObservable(n,t))?(e.currentTarget=n,e=new p(e),t.notify(e)):void 0}).currentTarget=e),(r=(o=!(o=r.observables)?r.observables={}:o)[t])||(r=o[t]=new d({type:t,currentTarget:e})).setup(),r.on(n)}function c(e,t,n){t=s(n=i.merge(n),t);var e=d.getDomEventObservablesHolder(e),r=(e||{}).observables;if(e&&r)if(t)(e=r[t])&&e.detach(n);else for(t in r)r[t].detach(n)}var t=e("event/base"),r=e("./utils"),l=e("dom"),f=e("./special"),d=e("./observable"),p=e("./object"),m=t.Utils,a={on:function(e,t,n,r){return e=l.query(e),m.batchForType(function(e,t,n,r){var o,a=m.normalizeParam(t,n,r);for(t=a.type,o=e.length-1;0<=o;o--)u(e[o],t,a)},1,e,t,n,r),e},detach:function(e,t,n,r){return e=l.query(e),m.batchForType(function(e,t,n,r){var o,a,i,s,u=m.normalizeParam(t,n,r);for(t=u.type,o=e.length-1;0<=o;o--)if(c(s=e[o],t,u),u.deep&&s.getElementsByTagName)for(a=(i=s.getElementsByTagName("*")).length-1;0<=a;a--)c(i[a],t,u)},1,e,t,n,r),e},delegate:function(e,t,n,r,o){return a.on(e,t,{fn:r,context:o,filter:n})},undelegate:function(e,t,n,r,o){return a.detach(e,t,{fn:r,context:o,filter:n})},fire:function(i,e,s,u){var c;return(s=s||{}).synthetic=1,m.splitAndRun(e,function(e){var t,n,r;m.fillGroupsForEvent(e,s),e=s.type;var o=f[e],a=e;for(o&&o.typeFix&&(a=o.typeFix),t=(i=l.query(i)).length-1;0<=t;t--)n=i[t],r=d.getDomEventObservable(n,a),(r=!u&&!r?new d({type:a,currentTarget:n}):r)&&(r=r.fire(s,u),!1!==c&&void 0!==r&&(c=r))}),c},fireHandler:function(e,t,n){return a.fire(e,t,n,1)},clone:function(e,n){var t;(t=d.getDomEventObservablesHolder(e))&&((e=r.data(e))&&e===r.data(n)&&r.removeData(n),t=t.observables,i.each(t,function(e,t){i.each(e.observers,function(e){u(n,t,e)})}))}};return a}),KISSY.add("event/dom/base/key-codes",[],function(e){var t=e.UA,n={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=n.F1&&t<=n.F12)return!1;switch(t){case n.ALT:case n.CAPS_LOCK:case n.CONTEXT_MENU:case n.CTRL:case n.DOWN:case n.END:case n.ESC:case n.HOME:case n.INSERT:case n.LEFT:case n.MAC_FF_META:case n.META:case n.NUMLOCK:case n.NUM_CENTER:case n.PAGE_DOWN:case n.PAGE_UP:case n.PAUSE:case n.PRINT_SCREEN:case n.RIGHT:case n.SHIFT:case n.UP:case n.WIN_KEY:case n.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=n.ZERO&&e<=n.NINE)return!0;if(e>=n.NUM_ZERO&&e<=n.NUM_MULTIPLY)return!0;if(e>=n.A&&e<=n.Z)return!0;if(t.webkit&&0===e)return!0;switch(e){case n.SPACE:case n.QUESTION_MARK:case n.NUM_PLUS:case n.NUM_MINUS:case n.NUM_PERIOD:case n.NUM_DIVISION:case n.SEMICOLON:case n.DASH:case n.EQUALS:case n.COMMA:case n.PERIOD:case n.SLASH:case n.APOSTROPHE:case n.SINGLE_QUOTE:case n.OPEN_SQUARE_BRACKET:case n.BACKSLASH:case n.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};return n}),KISSY.add("event/dom/base/gesture",[],function(){return{start:"mousedown",move:"mousemove",end:"mouseup",tap:"click",singleTap:"click",doubleTap:"dblclick"}}),KISSY.add("event/dom/base/special-events",["./dom-event","./special"],function(e,t){var n=t("./dom-event"),r=t("./special"),t=e.UA.gecko?"DOMMouseScroll":"mousewheel";return e.mix(r,{mousewheel:{typeFix:t},load:{bubbles:!1},click:{fire:function(e){return!e&&"checkbox"===String(this.type)&&this.click&&"input"===this.nodeName.toLowerCase()?(this.click(),!1):void 0}},focus:{bubbles:!1,preFire:function(e,t){if(!t)return n.fire(this,"focusin")},fire:function(e){var t=this;return!e&&t.ownerDocument&&t!==t.ownerDocument.activeElement&&t.focus?(t.focus(),!1):void 0}},blur:{bubbles:!1,preFire:function(e,t){if(!t)return n.fire(this,"focusout")},fire:function(e){var t=this;return!e&&t.ownerDocument&&t===t.ownerDocument.activeElement&&t.blur?(t.blur(),!1):void 0}}})}),KISSY.add("event/dom/base/mouseenter",["dom","./special"],function(e,t){var a=t("dom"),n=t("./special");e.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(e){n[e.name]={typeFix:e.fix,handle:function(e,t,n){var r=e.currentTarget,o=e.relatedTarget;if(!o||o!==r&&!a.contains(r,o))return[t.simpleNotify(e,n)]}}})}),KISSY.add("event/dom/base/valuechange",["dom","./dom-event","./special"],function(e,t){function n(e){var t;u.hasData(e,m)&&(t=u.data(e,m),clearTimeout(t),u.removeData(e,m))}function r(e){n(e.target)}function o(e){var t=e.value,n=u.data(e,p);t!==n&&(c.fireHandler(e,f,{prevVal:n,newVal:t}),u.data(e,p,t))}function a(e){var t,n=e.target;"focus"===e.type&&u.data(n,p,n.value),t=n,u.hasData(t,m)||u.data(t,m,setTimeout(function e(){o(t),u.data(t,m,setTimeout(e,h))},h))}function i(e){o(e.target)}function s(e){var t;t=e,u.removeData(t,p),n(t),c.detach(e,"blur",r),c.detach(e,"webkitspeechchange",i),c.detach(e,"mousedown keyup keydown focus",a)}var u=t("dom"),c=t("./dom-event"),l=t("./special"),f="valuechange",d=u.nodeName,t="event/valuechange",p=t+"/history",m=t+"/poll",h=50;return l[f]={setup:function(){var e=d(this);"input"!==e&&"textarea"!==e||(s(e=this),c.on(e,"blur",r),c.on(e,"webkitspeechchange",i),c.on(e,"mousedown keyup keydown focus",a))},tearDown:function(){s(this)}},c}),KISSY.add("event/dom/base",["./base/dom-event","./base/object","./base/key-codes","./base/gesture","./base/special-events","./base/mouseenter","./base/valuechange"],function(e,t){var n=t("./base/dom-event"),r=t("./base/object"),o=t("./base/key-codes"),a=t("./base/gesture"),i=t("./base/special-events");return t("./base/mouseenter"),t("./base/valuechange"),e.merge({add:n.on,remove:n.detach,KeyCode:o,Gesture:a,Special:i,Object:r},n)}),KISSY.add("event/base/utils",[],function(i){function o(e){if(e.indexOf(".")<0)return[e,""];var t=e.match(/([^.]+)?(\..+)?$/),e=[t[1]],t=t[2];return t?(t=t.split(".").sort(),e.push(t.join("."))):e.push(""),e}var t,r;return{splitAndRun:t=function(e,t){i.isArray(e)?i.each(e,t):-1===(e=i.trim(e)).indexOf(" ")?t(e):i.each(e.split(/\s+/),t)},normalizeParam:function(e,t,n){var r=t||{},r="function"==typeof t?{fn:t,context:n}:i.merge(r),n=o(e);return e=n[0],r.groups=n[1],r.type=e,r},batchForType:function(r,o){var a=i.makeArray(arguments),e=a[2+o];e&&"object"==typeof e?i.each(e,function(e,t){var n=[].concat(a);n.splice(0,2),n[o]=t,n[o+1]=e,r.apply(null,n)}):t(e,function(e){var t=[].concat(a);t.splice(0,2),t[o]=e,r.apply(null,t)})},fillGroupsForEvent:function(e,t){var n=o(e),e=n[1];e&&(e=r(e),t._ksGroups=e),t.type=n[0]},getGroupsRe:r=function(e){return new RegExp(e.split(".").join(".*\\.")+"(?:\\.|$)")}}}),KISSY.add("event/base/object",[],function(e){function t(){this.timeStamp=e.now(),this.target=void 0,this.currentTarget=void 0}function n(){return!1}function r(){return!0}return t.prototype={constructor:t,isDefaultPrevented:n,isPropagationStopped:n,isImmediatePropagationStopped:n,preventDefault:function(){this.isDefaultPrevented=r},stopPropagation:function(){this.isPropagationStopped=r},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=r,this.stopPropagation()},halt:function(e){e?this.stopImmediatePropagation():this.stopPropagation(),this.preventDefault()}},t}),KISSY.add("event/base/observer",[],function(t){function e(e){t.mix(this,e)}return e.prototype={constructor:e,equals:function(n){var r=this;return!!t.reduce(r.keys,function(e,t){return e&&r[t]===n[t]},1)},simpleNotify:function(e,t){var n=this,e=n.fn.call(n.context||t.currentTarget,e,n.data);return n.once&&t.removeObserver(n),e},notifyInternal:function(e,t){t=this.simpleNotify(e,t);return!1===t&&e.halt(),t},notify:function(e,t){var n=e._ksGroups;return!n||this.groups&&this.groups.match(n)?this.notifyInternal(e,t):void 0}},e}),KISSY.add("event/base/observable",[],function(t){function e(e){this.currentTarget=null,t.mix(this,e),this.reset()}return e.prototype={constructor:e,hasObserver:function(){return!!this.observers.length},reset:function(){this.observers=[]},removeObserver:function(e){for(var t=this.observers,n=t.length,r=0;r<n;r++)if(t[r]===e){t.splice(r,1);break}this.checkMemory()},checkMemory:function(){},findObserver:function(e){for(var t=this.observers,n=t.length-1;0<=n;--n)if(e.equals(t[n]))return n;return-1}},e}),KISSY.add("event/base",["./base/utils","./base/object","./base/observer","./base/observable"],function(e,t){return{Utils:t("./base/utils"),Object:t("./base/object"),Observer:t("./base/observer"),Observable:t("./base/observable")}}),KISSY.add("event/dom/shake",["event/dom/base"],function(e,t){function n(){o=void 0,u=0}function r(e){var t=e.accelerationIncludingGravity,n=t.x,r=t.y,e=t.z;void 0!==o&&(5<(t=c(l(n-o),l(r-a),l(e-i)))&&p(),20<t&&(u=1)),o=n,a=r,i=e}var o,a,i,s=t("event/dom/base"),t=s.Special,u=0,c=Math.max,l=Math.abs,f=e.Env.host,d="devicemotion",p=e.buffer(function(){u&&(s.fireHandler(f,"shake",{accelerationIncludingGravity:{x:o,y:a,z:i}}),n())},250);t.shake={setup:function(){this===f&&f.addEventListener(d,r,!1)},tearDown:function(){this===f&&(p.stop(),n(),f.removeEventListener(d,r,!1))}}}),KISSY.add("event/dom/focusin",["event/dom/base"],function(e,t){var o=t("event/dom/base"),a=o.Special;return e.each([{name:"focusin",fix:"focus"},{name:"focusout",fix:"blur"}],function(t){function n(e){e=e.target;return o.fire(e,t.name)}var r=e.guid("attaches_"+e.now()+"_");a[t.name]={setup:function(){var e=this.ownerDocument||this;r in e||(e[r]=0),e[r]+=1,1===e[r]&&e.addEventListener(t.fix,n,!0)},tearDown:function(){var e=this.ownerDocument||this;--e[r],0===e[r]&&e.removeEventListener(t.fix,n,!0)}}}),o}),KISSY.add("anim",["anim/base","anim/timer","anim/transition?"],function(i,e){function t(e,r,t,n,o){var a;return e.node?a=e:("string"==typeof r?(r=i.unparam(String(r),";",":"),i.each(r,function(e,t){var n=i.trim(t);n&&(r[n]=i.trim(e)),n&&n===t||delete r[t]})):r=i.clone(r),i.isPlainObject(t)?a=i.clone(t):(a={complete:o},t&&(a.duration=t),n&&(a.easing=n)),a.node=e,a.to=r),(a=i.merge(l,a,{useTransition:i.config("anim/useTransition")})).useTransition&&u?(c.info("use transition anim"),new u(a)):(c.info("use js timer anim"),new s(a))}var n=e("anim/base"),s=e("anim/timer"),u=e("anim/transition?"),c=i.getLogger("s/anim"),r=n.Utils,l={duration:1,easing:"linear"};return i.each(["pause","resume"],function(n){t[n]=function(e,t){return null===t||"string"==typeof t||!1===t?r.pauseOrResumeQueue(e,t,n):r.pauseOrResumeQueue(e,void 0,n)}}),t.isRunning=r.isElRunning,t.isPaused=r.isElPaused,t.stop=r.stopEl,t.Easing=s.Easing,(i.Anim=t).Q=n.Q,t}),KISSY.add("anim/base/queue",["dom"],function(a,e){function i(e,t,n){t=t||l;var r,o=u.data(e,c);return o||n||u.data(e,c,o={}),o&&((r=o[t])||n||(r=o[t]=[])),r}var s,u=e("dom"),c=a.guid("ks-queue-"+a.now()+"-"),l=a.guid("ks-queue-"+a.now()+"-");return s={queueCollectionKey:c,queue:function(e,t,n){t=i(e,t);return t.push(n),t},remove:function(e,t,n){var r,o=i(e,t,1);return o&&-1<(r=a.indexOf(n,o))&&o.splice(r,1),o&&!o.length&&s.clearQueue(e,t),o},clearQueues:function(e){u.removeData(e,c)},clearQueue:function(e,t){t=t||l;var n=u.data(e,c);n&&delete n[t],a.isEmptyObject(n)&&u.removeData(e,c)},dequeue:function(e,t){var n=i(e,t,1);return n&&(n.shift(),n.length||s.clearQueue(e,t)),n}}}),KISSY.add("anim/base/utils",["./queue","dom"],function(o,e){var a=e("./queue"),i=e("dom"),s=o.guid("ks-anim-unqueued-"+o.now()+"-"),r=o.guid("ks-anim-paused-"+o.now()+"-");return{saveRunningAnim:function(e){var t=e.node,n=i.data(t,s);n||i.data(t,s,n={}),n[o.stamp(e)]=e},removeRunningAnim:function(e){var t=e.node,n=i.data(t,s);n&&(delete n[o.stamp(e)],o.isEmptyObject(n)&&i.removeData(t,s))},isAnimPaused:function(e){var t=e.node;return(t=i.data(t,r))?!!t[o.stamp(e)]:0},removePausedAnim:function(e){var t=e.node,n=i.data(t,r);n&&(delete n[o.stamp(e)],o.isEmptyObject(n)&&i.removeData(t,r))},savePausedAnim:function(e){var t=e.node,n=i.data(t,r);n||i.data(t,r,n={}),n[o.stamp(e)]=e},isAnimRunning:function(e){var t=e.node;return(t=i.data(t,s))?!!t[o.stamp(e)]:0},isElPaused:function(e){e=i.data(e,r);return e&&!o.isEmptyObject(e)},isElRunning:function(e){e=i.data(e,s);return e&&!o.isEmptyObject(e)},pauseOrResumeQueue:function(e,t,n){e=i.data(e,"resume"===n?r:s),e=o.merge(e),o.each(e,function(e){void 0!==t&&e.config.queue!==t||e[n]()})},stopEl:function(e,t,n,r){n&&(void 0===r?a.clearQueues(e):!1!==r&&a.clearQueue(e,r));e=i.data(e,s),e=o.merge(e);o.each(e,function(e){void 0!==r&&e.config.queue!==r||e.stop(t)})}}}),KISSY.add("anim/base",["dom","./base/utils","./base/queue","promise"],function(d,e){function r(e){var t=this;r.superclass.constructor.call(t),o.Defer(t);var n=(t.config=e).node;d.isPlainObject(n)||(n=p.get(e.node)),t.node=t.el=n,t._backupProps={},t._propsData={}}var p=e("dom"),m=e("./base/utils"),u=e("./base/queue"),o=e("promise"),n=d.getLogger("s/anim"),t=p.NodeType,e=d.noop,h={toggle:1,hide:1,show:1};return d.extend(r,o,{on:function(e,t){return n.warn("please use promise api of anim instead"),"complete"===e?this.then(t):"end"===e?this.fin(t):"step"===e?this.progress(t):n.error("not supported event for anim: "+e),this},prepareFx:e,runInternal:function(){var n,r,o,a=this,i=a.config,s=a.node,u=a._backupProps,c=a._propsData,e=i.to,l=i.delay||0,f=i.duration;if((m.saveRunningAnim(a),d.each(e,function(e,t){d.isPlainObject(e)||(e={value:e}),c[t]=d.mix({delay:l,easing:i.easing,frame:i.frame,duration:f},e)}),s.nodeType===t.ELEMENT_NODE)&&((e.width||e.height)&&(e=s.style,d.mix(u,{overflow:e.overflow,"overflow-x":e.overflowX,"overflow-y":e.overflowY}),e.overflow="hidden","inline"===p.css(s,"display")&&"none"===p.css(s,"float")&&(d.UA.ieMode<10?e.zoom=1:e.display="inline-block")),o="none"===p.css(s,"display"),d.each(c,function(e,t){if(n=e.value,h[n]){if("hide"===n&&o||"show"===n&&!o)return a.stop(!0),r=!1;u[t]=p.style(s,t),"hide"===(n="toggle"===n?o?"show":"hide":n)?(e.value=0,u.display="none"):(e.value=p.css(s,t),p.css(s,t,0),p.show(s))}}),!1===r))return;a.startTime=d.now(),d.isEmptyObject(c)?(a.__totalTime=1e3*f,a.__waitTimeout=setTimeout(function(){a.stop(!0)},a.__totalTime)):(a.prepareFx(),a.doStart())},isRunning:function(){return m.isAnimRunning(this)},isPaused:function(){return m.isAnimPaused(this)},pause:function(){var e=this;return e.isRunning()&&(e._runTime=d.now()-e.startTime,e.__totalTime-=e._runTime,m.removeRunningAnim(e),m.savePausedAnim(e),e.__waitTimeout?clearTimeout(e.__waitTimeout):e.doStop()),e},doStop:e,doStart:e,resume:function(){var e=this;return e.isPaused()&&(e.startTime=d.now()-e._runTime,m.removePausedAnim(e),m.saveRunningAnim(e),e.__waitTimeout?e.__waitTimeout=setTimeout(function(){e.stop(!0)},e.__totalTime):(e.beforeResume(),e.doStart())),e},beforeResume:e,run:function(){var e=this,t=e.config.queue;return!1===t?e.runInternal():1===u.queue(e.node,t,e).length&&e.runInternal(),e},stop:function(e){var t,n=this,r=n.node,o=n.config.queue;if(n.isResolved()||n.isRejected())return n;if(n.__waitTimeout&&(clearTimeout(n.__waitTimeout),n.__waitTimeout=0),!n.isRunning()&&!n.isPaused())return!1!==o&&u.remove(r,o,n),n;n.doStop(e),m.removeRunningAnim(n),m.removePausedAnim(n);var a,i,s=n.defer;return e?(i=(a=n).config.complete,d.isEmptyObject(e=a._backupProps)||p.css(a.node,e),i&&i.call(a),s.resolve([n])):s.reject([n]),!1!==o&&(t=u.dequeue(r,o))&&t[0]&&t[0].runInternal(),n}}),r.Utils=m,r.Q=u,r}),KISSY.add("promise",[],function(r){function i(e){"undefined"!=typeof console&&console.error&&console.error(e)}function s(e,t,n){var r,o;e instanceof l?m(function(){n.call(e,e[p])}):(r=e[p],(o=e[h])?o.push([t,n]):a(r)?s(r,t,n):t&&m(function(){t.call(e,r)}))}function u(e){if(!(this instanceof u))return new u(e);this.promise=e||new c,this.promise.defer=this}function a(e){return e&&e instanceof c}function c(e){void 0===(this[p]=e)&&(this[h]=[],this[o]=[])}function l(e){if(e instanceof l)return e;return c.apply(this,arguments),this[p]instanceof c&&d.error("assert.not(this.__promise_value instanceof promise) in Reject constructor"),this}function f(e,t,n){function r(e){return a?void d.error("already done at fulfilled"):e instanceof c?void d.error("assert.not(value instanceof Promise) in when"):(a=1,void o.resolve(function(e){try{return t?t.call(this,e):e}catch(e){return i(e.stack||e),new l(e)}}.call(this,e)))}var o=new u,a=0;return e instanceof c?s(e,r,function(e){a?d.error("already done at rejected"):(a=1,o.resolve(function(e){try{return n?n.call(this,e):new l(e)}catch(e){return i(e.stack||e),new l(e)}}.call(this,e)))}):r(e),o.promise}function t(e){return!n(e)&&a(e)&&void 0===e[h]&&(!a(e[p])||t(e[p]))}function n(e){return a(e)&&void 0===e[h]&&e[p]instanceof l}var d=r.getLogger("s/promise"),p="__promise_value",m=r.setImmediate,o="__promise_progress_listeners",h="__promise_pendings";return u.prototype={constructor:u,resolve:function(e){var t,n=this.promise;return(t=n[h])?(n[p]=e,t=[].concat(t),n[h]=void 0,n[o]=void 0,r.each(t,function(e){s(n,e[0],e[1])}),e):null},reject:function(e){return this.resolve(new l(e))},notify:function(t){r.each(this.promise[o],function(e){m(function(){e(t)})})}},c.prototype={constructor:c,then:function(e,t,n){return n&&this.progress(n),f(this,e,t)},progress:function(e){return this[o]&&this[o].push(e),this},fail:function(e){return f(this,0,e)},fin:function(t){return f(this,function(e){return t(e,!0)},function(e){return t(e,!1)})},done:function(e,t){var n=this;(e||t?n.then(e,t):n).fail(function(e){r.log(e.stack||e,"error"),setTimeout(function(){throw e},0)})},isResolved:function(){return t(this)},isRejected:function(){return n(this)}},r.extend(l,c),KISSY.Defer=u,(KISSY.Promise=c).Defer=u,r.mix(c,{when:f,isPromise:a,isResolved:t,isRejected:n,all:function(n){var r=n.length;if(!r)return null;for(var o=new u,e=0;e<n.length;e++)!function(e,t){f(e,function(e){n[t]=e,0==--r&&o.resolve(n)},function(e){o.reject(e)})}(n[e],e);return o.promise},async:function(e){return function(){function t(e,t){var n;try{n=a[e](t)}catch(e){return new l(e)}return n.done?n.value:f(n.value,r,o)}function r(e){return t("next",e)}function o(e){return t("throw",e)}var a=e.apply(this,arguments);return r()}}}),c}),KISSY.add("anim/timer/easing",[],function(){function n(e){return e}function r(e,t,n,r){function s(e){return((u*e+c)*e+l)*e}function o(e){for(var t,n,r=e,o=0;o<8;o++){if(n=s(r)-e,p(n)<d)return r;if(p(t=(3*u*r+2*c)*r+l)<d)break;r-=n/t}for(var a=1,i=0,r=e;i<a;){if(n=s(r)-e,p(n)<d)return r;0<n?a=r:i=r,r=(a+i)/2}return r}var u=3*e-3*n+1,c=3*n-6*e,l=3*e,a=3*t-3*r+1,i=3*r-6*t,f=3*t;return function(e){return e=o(e),((a*e+i)*e+f)*e}}var t=Math.PI,o=Math.pow,a=Math.sin,i=parseFloat,s=/^cubic-bezier\(([^,]+),([^,]+),([^,]+),([^,]+)\)$/i,u=1.70158,c={swing:function(e){return-Math.cos(e*t)/2+.5},easeNone:n,linear:n,easeIn:function(e){return e*e},ease:r(.25,.1,.25,1),"ease-in":r(.42,0,1,1),"ease-out":r(0,0,.58,1),"ease-in-out":r(.42,0,.58,1),"ease-out-in":r(0,.42,1,.58),toFn:function(e){var t;return(t=e.match(s))?r(i(t[1]),i(t[2]),i(t[3]),i(t[4])):c[e]||n},easeOut:function(e){return(2-e)*e},easeBoth:function(e){return(e*=2)<1?.5*e*e:.5*(1- --e*(e-2))},easeInStrong:function(e){return e*e*e*e},easeOutStrong:function(e){return 1- --e*e*e*e},easeBothStrong:function(e){return(e*=2)<1?.5*e*e*e*e:.5*(2-(e-=2)*e*e*e)},elasticIn:function(e){return 0===e||1===e?e:-o(2,10*--e)*a(2*(e-.075)*t/.3)},elasticOut:function(e){return 0===e||1===e?e:o(2,-10*e)*a(2*(e-.075)*t/.3)+1},elasticBoth:function(e){return 0===e||2==(e*=2)?e:e<1?-.5*o(2,10*--e)*a(2*(e-.1125)*t/.45):o(2,-10*--e)*a(2*(e-.1125)*t/.45)*.5+1},backIn:function(e){return 1===e&&(e-=.001),e*e*((1+u)*e-u)},backOut:function(e){return--e*e*((1+u)*e+u)+1},backBoth:function(e){var t=u,n=1+(t*=1.525);return(e*=2)<1?.5*e*e*(n*e-t):.5*((e-=2)*e*(n*e+t)+2)},bounceIn:function(e){return 1-c.bounceOut(1-e)},bounceOut:function(e){var t=7.5625;return e<1/2.75?t*e*e:e<2/2.75?t*(e-=1.5/2.75)*e+.75:e<2.5/2.75?t*(e-=2.25/2.75)*e+.9375:t*(e-=2.625/2.75)*e+.984375},bounceBoth:function(e){return e<.5?.5*c.bounceIn(2*e):.5*c.bounceOut(2*e-1)+.5}},d=1e-6,p=Math.abs;return c}),KISSY.add("anim/timer/manager",[],function(t){var n=t.stamp,r=(t.Env.host,function(e){return setTimeout(e,15)}),o=function(e){clearTimeout(e)};return{runnings:{},timer:null,start:function(e){var t=n(e);this.runnings[t]||(this.runnings[t]=e,this.startTimer())},stop:function(e){this.notRun(e)},notRun:function(e){e=n(e);delete this.runnings[e],t.isEmptyObject(this.runnings)&&this.stopTimer()},pause:function(e){this.notRun(e)},resume:function(e){this.start(e)},startTimer:function(){var t=this;t.timer||(t.timer=r(function e(){t.runFrames()?t.stopTimer():t.timer=r(e)}))},stopTimer:function(){var e=this.timer;e&&(o(e),this.timer=0)},runFrames:function(){var e,t,n=this.runnings;for(e in n)n[e].frame();for(e in n){t=0;break}return void 0===t}}}),KISSY.add("anim/timer/fx",["dom"],function(p,e){function t(e,t){p.mix(e,t),e.pos=0,e.unit=e.unit||""}function o(e){t(this,e)}var m=p.getLogger("s/aim/timer/fx"),h=e("dom");return o.prototype={isCustomFx:0,constructor:o,load:function(e){t(this,e)},frame:function(e){var t,n,r,o,a,i,s,u,c,l,f,d;1!==this.pos&&(n=(t=this).anim,r=t.prop,o=n.node,a=t.from,i=t.propData,s=t.to,void 0===e&&(u=n,c=i,l=p.now(),f=u.startTime,d=c.delay,u=c.duration,e=(d=l-f-d)<=0?0:u<=d?1:c.easing(d/u)),t.pos=e,a!==s&&0!==e&&(e=t.interpolate(a,s,t.pos),t.val=e,i.frame?i.frame.call(t,n,t):t.isCustomFx||(void 0===e?(t.pos=1,m.warn(r+" update directly ! : "+(e=s)+" : "+a+" : "+s)):e+=t.unit,t.val=e,"attr"===t.type?h.attr(o,r,e,1):h.css(o,r,e))))},interpolate:function(e,t,n){return"number"==typeof e&&"number"==typeof t?Math.round(1e5*(e+(t-e)*n))/1e5:void 0},cur:function(){var e,t,n=this,r=n.prop,o=n.anim.node;return n.isCustomFx?o[r]||0:(o="attr"===(e=!(e=n.type)?n.type=(t=r,(n=o).style&&null!=n.style[t]||null==h.attr(n,t,void 0,1)?"css":"attr"):e)?h.attr(o,r,void 0,1):h.css(o,r),isNaN(r=parseFloat(o))?o&&"auto"!==o?o:0:r)}},o.Factories={},o.FxTypes={},o.getFx=function(e){var t,n,r=o;return(t=e.fxType)?r=o.FxTypes[t]:!e.isCustomFx&&(n=o.Factories[e.prop])&&(r=n),new r(e)},o}),KISSY.add("anim/timer/short-hand",[],function(){return{background:[],border:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],borderBottom:["borderBottomWidth"],borderLeft:["borderLeftWidth"],borderTop:["borderTopWidth"],borderRight:["borderRightWidth"],font:["fontSize","fontWeight"],margin:["marginBottom","marginLeft","marginRight","marginTop"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"]}}),KISSY.add("anim/timer/color",["./fx","./short-hand"],function(e,t){function n(e){var t;if(t=(e+="").match(u))return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])];if(t=e.match(c))return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3]),parseInt(t[4])];if(t=e.match(l)){for(var n=1;n<t.length;n++)t[n].length<2&&(t[n]+=t[n]);return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}return s[e=e.toLowerCase()]?s[e]:(a.warn("only allow rgb or hex color string : "+e),[255,255,255])}function o(){o.superclass.constructor.apply(this,arguments)}var r=t("./fx"),t=t("./short-hand"),a=e.getLogger("s/anim/timer/color"),i=Math.floor,s={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255]},u=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,c=/^rgba\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+),\s*([0-9]+)\)$/i,l=/^#?([0-9A-F]{1,2})([0-9A-F]{1,2})([0-9A-F]{1,2})$/i;return t.background.push("backgroundColor"),t.borderColor=["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"],t.border.push("borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"),t.borderBottom.push("borderBottomColor"),t.borderLeft.push("borderLeftColor"),t.borderRight.push("borderRightColor"),t.borderTop.push("borderTopColor"),e.extend(o,r,{load:function(){var e=this;o.superclass.load.apply(e,arguments),e.from&&(e.from=n(e.from)),e.to&&(e.to=n(e.to))},interpolate:function(e,t,n){var r=o.superclass.interpolate;return 3===e.length&&3===t.length?"rgb("+[i(r(e[0],t[0],n)),i(r(e[1],t[1],n)),i(r(e[2],t[2],n))].join(", ")+")":4===e.length||4===t.length?"rgba("+[i(r(e[0],t[0],n)),i(r(e[1],t[1],n)),i(r(e[2],t[2],n)),i(r(e[3]||1,t[3]||1,n))].join(", ")+")":void a.warn("unknown value : "+e)}}),e.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(e){r.Factories[e]=o}),r.FxTypes.color=o}),KISSY.add("anim/timer/transform",["dom","./fx"],function(c,e){function l(e){s=(s=e).split(/,/);var t,n,r,o=(e=c.map(s,d))[0],a=e[1],i=e[2],s=e[3];return o*s-a*i?(r=(o*i+a*s)/(o*s-i*a),n=(o*s-a*i)/(t=Math.sqrt(o*o+a*a)),o*s<a*i&&(r=-r,t=-t)):t=n=r=0,{translateX:d(e[4]),translateY:d(e[5]),rotate:d(180*Math.atan2(a,o)/Math.PI),skewX:d(180*Math.atan(r)/Math.PI),skewY:0,scaleX:d(t),scaleY:d(n)}}function f(){return{translateX:0,translateY:0,rotate:0,skewX:0,skewY:0,scaleX:1,scaleY:1}}function d(e){return Math.round(1e5*parseFloat(e))/1e5}function t(e){e=e.split(")");for(var t,n,r,o=c.trim,a=-1,i=e.length-1,s=f();++a<i;)switch(t=e[a].split("("),n=o(t[0]),r=t[1],n){case"translateX":case"translateY":case"scaleX":case"scaleY":s[n]=d(r);break;case"rotate":case"skewX":case"skewY":var u=d(r);c.endsWith(r,"deg")||(u=180*u/Math.PI),s[n]=u;break;case"translate":case"translate3d":r=r.split(","),s.translateX=d(r[0]),s.translateY=d(r[1]||0);break;case"scale":r=r.split(","),s.scaleX=d(r[0]),s.scaleY=d(r[1]||r[0]);break;case"matrix":return l(r)}return s}function a(){a.superclass.constructor.apply(this,arguments)}var n=e("dom"),e=e("./fx"),i=c.Features.isTransform3dSupported()?"translate3d({translateX}px,{translateY}px,0)":"translate({translateX}px,{translateY}px)";return c.extend(a,e,{load:function(){var e=this;a.superclass.load.apply(e,arguments),e.from=n.style(e.anim.node,"transform")||e.from,e.from&&"none"!==e.from?e.from=t(e.from):e.from=f(),e.to?e.to=t(e.to):e.to=f()},interpolate:function(e,t,n){var r=a.superclass.interpolate,o={};return o.translateX=r(e.translateX,t.translateX,n),o.translateY=r(e.translateY,t.translateY,n),o.rotate=r(e.rotate,t.rotate,n),o.skewX=r(e.skewX,t.skewX,n),o.skewY=r(e.skewY,t.skewY,n),o.scaleX=r(e.scaleX,t.scaleX,n),o.scaleY=r(e.scaleY,t.scaleY,n),c.substitute(i+" rotate({rotate}deg) skewX({skewX}deg) skewY({skewY}deg) scale({scaleX},{scaleY})",o)}}),e.Factories.transform=a}),KISSY.add("anim/timer",["dom","./base","./timer/easing","./timer/manager","./timer/fx","./timer/short-hand","./timer/color","./timer/transform"],function(p,e){function t(){var r;t.superclass.constructor.apply(this,arguments),p.each(r=this.to,function(e,t){var n=a(t);t!==n&&(r[n]=r[t],delete r[t])})}var m=e("dom"),n=e("./base"),h=e("./timer/easing"),o=e("./timer/manager"),v=e("./timer/fx"),g=e("./timer/short-hand");e("./timer/color"),e("./timer/transform");var a=m._camelCase,y=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i;return p.extend(t,n,{prepareFx:function(){var a=this.node,i=this._propsData;p.each(i,function(e){e.duration*=1e3,e.delay*=1e3,"string"==typeof e.easing&&(e.easing=h.toFn(e.easing))}),p.each(g,function(e,t){var n,r,o=i[t];o&&(r=o.value,n={},p.each(e,function(e){n[e]=m.css(a,e)}),m.css(a,t,r),p.each(n,function(e,t){t in i||(i[t]=p.merge(o,{value:m.css(a,t)})),m.css(a,t,e)}),delete i[t])});var e,t,n,r,o,s,u,c,l=0;for(e in p.isPlainObject(a)&&(l=1),i){if(c=(t=i[e]).value,o={isCustomFx:l,prop:e,anim:this,fxType:t.fxType,type:t.type,propData:t},n=c,r=(s=v.getFx(o)).cur(),c=(c+=u="").match(y)){if(n=parseFloat(c[2]),(u=c[3])&&"px"!==u&&r){for(var f=0,d=n;++d,m.css(a,e,d+u),0===(f=s.cur()););r*=d/f,m.css(a,e,r+u)}c[1]&&(n=("-="===c[1]?-1:1)*n+r)}o.from=r,o.to=n,o.unit=u,s.load(o),t.fx=s}},frame:function(){var e,t,n=this,r=1,o=n._propsData;for(e in o){if((t=o[e].fx).frame(),n.isRejected()||n.isResolved())return;r&=1===t.pos}var a=p.now(),i=1e3*n.config.duration,a=Math.max(0,n.startTime+i-a);n.defer.notify([n,1-(a/i||0),a]),r&&n.stop(r)},doStop:function(e){var t,n,r=this._propsData;if(o.stop(this),e)for(t in r)n=r[t],(n=n.fx)&&n.frame(1)},doStart:function(){o.start(this)}}),t.Easing=h,t.Fx=v,t}),KISSY.add("anim/transition",["dom","./base"],function(o,e,t,n){function a(){return arguments[1].toUpperCase()}function i(e){if((e=-1!==e.indexOf("-")?e.replace(u,a):e)in f)return f[e];if(!d||e in d)f[e]={propertyName:e,propertyNamePrefix:""};else{for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<l;n++){var r,o=c[n];(r=o+t)in d&&(f[e]={propertyName:r,propertyNamePrefix:o})}f[e]=f[e]||null}return f[e]}function s(e,t,n,r,o){if(!(this instanceof s))return new s(e,t,n,r,o);s.superclass.constructor.apply(this,arguments)}var u=/-([a-z])/gi,c=["Webkit","Moz","O","ms"],l=c.length,f={},d=document.documentElement.style,p=o,m=e("dom"),e=e("./base"),h=i("transition").propertyName,v={ease:1,linear:1,"ease-in":1,"ease-out":1,"ease-in-out":1};p.extend(s,e,{prepareFx:function(){var e,t,n=this._propsData,r={};for(e in n)t=n[e],"string"==typeof t.easing&&(p.startsWith(t.easing,"cubic-bezier")||v[t.easing])||(t.easing="linear"),t=i(e),t?r[t=t.propertyName,t.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()})]=n[e]:o.log("unsupported css property for transition anim: "+e,"error");this._propsData=r},doStart:function(){var n,e=this,r=e.node,t=r.style,o=e._propsData,a=t[h],i=0,s={};p.each(o,function(e,t){var n=e.value;m.css(r,t,m.css(r,t)),s[t]=n,i=Math.max(e.duration+e.delay,i)}),-1!==a.indexOf("none")?a="":a&&(a+=","),t[h]=a+(n="",p.each(o,function(e,t){n&&(n+=","),n+=t+" "+e.duration+"s "+e.easing+" "+e.delay+"s"}),n),setTimeout(function(){m.css(r,s)},0),e._transitionEndTimer=setTimeout(function(){e.stop(!0)},1e3*i)},beforeResume:function(){var r=this._propsData,e=p.merge(r),o=this._runTime/1e3;p.each(e,function(e,t){var n=o;e.delay>=n?e.delay-=n:(n-=e.delay,e.delay=0,e.duration>=n?e.duration-=n:delete r[t])})},doStop:function(n){var e=this,r=e.node,t=r.style,o=e._propsData,a=[],i={};e._transitionEndTimer&&(clearTimeout(e._transitionEndTimer),e._transitionEndTimer=null),p.each(o,function(e,t){n||(i[t]=m.css(r,t)),a.push(t)}),o=p.trim(t[h].replace(new RegExp("(^|,)\\s*(?:"+a.join("|")+")\\s+[^,]+","gi"),"$1")).replace(/^,|,,|,$/g,"")||"none",t[h]=o,m.css(r,i)}}),p.mix(s,e.Statics),n.exports=s}),KISSY.add("io/form-serializer",["dom"],function(o,e){function a(e){return e.replace(t,"\r\n")}var n,i=e("dom"),s=/^(?:select|textarea)/i,t=/\r?\n/g,u=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i;return n={serialize:function(e,t){return o.param(n.getFormData(e),void 0,void 0,t||!1)},getFormData:function(e){var t=[],r={};return o.each(i.query(e),function(e){e=e.elements?o.makeArray(e.elements):[e];t.push.apply(t,e)}),t=o.filter(t,function(e){return e.name&&!e.disabled&&(e.checked||s.test(e.nodeName)||u.test(e.type))}),o.each(t,function(e){var t,n=i.val(e);null!==n&&(n=o.isArray(n)?o.map(n,a):a(n),void 0!==(t=r[e.name])?(t=!o.isArray(t)?r[e.name]=[t]:t).push.apply(t,o.makeArray(n)):r[e.name]=n)}),r}}}),KISSY.add("io/base",["event/custom","promise"],function(c,e){function l(e){var t,n=this;if(!(n instanceof l))return new l(e);f.call(n),e=function(e){var t=e.context;delete e.context,(e=c.mix(c.clone(v),e,{deep:!0})).context=t||e;var n,r=e.type,o=e.dataType,t=e.uri=m.resolve(e.url);return e.uri.setQuery(""),"crossDomain"in e||(e.crossDomain=!e.uri.isSameOriginAs(m)),r=e.type=r.toUpperCase(),e.hasContent=!p.test(r),e.processData&&(n=e.data)&&"string"!=typeof n&&(e.data=c.param(n,void 0,void 0,e.serializeArray)),o=e.dataType=c.trim(o||"*").split(d),"cache"in e||!c.inArray(o[0],["script","jsonp"])||(e.cache=!1),e.hasContent||(e.data&&t.query.add(c.unparam(e.data)),!1===e.cache&&t.query.set("_ksTS",c.now()+"_"+c.guid())),e}(e),c.mix(n,{responseData:null,config:e||{},timeoutTimer:null,responseText:null,responseXML:null,responseHeadersString:"",responseHeaders:null,requestHeaders:{},readyState:0,state:0,statusText:null,status:0,transport:null}),f.Defer(n),l.fire("start",{ajaxConfig:e,io:n}),t=new(h[e.dataType[0]]||h["*"])(n),n.transport=t,e.contentType&&n.setRequestHeader("Content-Type",e.contentType);var r,o=e.dataType[0],a=e.timeout,i=e.context,s=e.headers,u=e.accepts;for(r in n.setRequestHeader("Accept",o&&u[o]?u[o]+("*"===o?"":", */*; q=0.01"):u["*"]),s)n.setRequestHeader(r,s[r]);if(e.beforeSend&&!1===e.beforeSend.call(i,n,e))return n;n.readyState=1,l.fire("send",{ajaxConfig:e,io:n}),e.async&&0<a&&(n.timeoutTimer=setTimeout(function(){n.abort("timeout")},1e3*a));try{n.state=1,t.send()}catch(e){n.state<2?(c.log(e.stack||e,"error"),setTimeout(function(){throw e},0),n._ioReady(-1,e.message||"send error")):c.error(e)}return n}function t(e){return e}var n=e("event/custom"),f=e("promise"),d=/\s+/,p=/^(?:GET|HEAD)$/,e=c.Env.host.location||{},m=new c.Uri(e.href),e=m&&/^(?:about|app|app\-storage|.+\-extension|file|widget)$/.test(m.getScheme()),h={},v={type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",async:!0,serializeArray:!0,processData:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},converters:{text:{json:c.parseJson,html:t,text:t,xml:c.parseXML}},headers:{"X-Requested-With":"XMLHttpRequest"},contents:{xml:/xml/,html:/html/,json:/json/}};return v.converters.html=v.converters.text,c.mix(l,n.Target),c.mix(l,{isLocal:e,setupConfig:function(e){c.mix(v,e,{deep:!0})},setupTransport:function(e,t){h[e]=t},getTransport:function(e){return h[e]},getConfig:function(){return v}}),l}),KISSY.add("io/xhr-transport-base",["./base"],function(m,e){function n(e,t){try{return new(t||r).XMLHttpRequest}catch(e){}}function h(e){return o&&e instanceof o}function v(e){var t;return e.ifModified&&(t=e.uri,!1===e.cache&&(t=t.clone()).query.remove("_ksTS"),t=t.toString()),t}var g=e("./base"),y=m.getLogger("s/io"),r=m.Env.host,o=7<m.UA.ieMode&&r.XDomainRequest,e={proto:{}},b={},T={};g.__lastModifiedCached=b,g.__eTagCached=T,e.nativeXhr=r.ActiveXObject?function(e,t){return!E&&e&&o?new o:!g.isLocal&&n(0,t)||function(e){try{return new(e||r).ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}(t)}:n,e.XDomainRequest_=o;var E=e.supportCORS="withCredentials"in e.nativeXhr();return m.mix(e.proto,{sendInternal:function(){var e,t,n,r=this,o=r.io,a=o.config,i=r.nativeXhr,s=a.files,u=s?"post":a.type,c=a.async,l=o.mimeType,f=o.requestHeaders||{},d=o._getUrlForSend(),o=v(a);for(n in o&&((t=b[o])&&(f["If-Modified-Since"]=t),(t=T[o])&&(f["If-None-Match"]=t)),(t=a.username)?i.open(u,d,c,t,a.password):i.open(u,d,c),"withCredentials"in(e=a.xhrFields||{})&&(E||delete e.withCredentials),e)try{i[n]=e[n]}catch(e){y.error(e)}if(l&&i.overrideMimeType&&i.overrideMimeType(l),!1===f["X-Requested-With"]&&delete f["X-Requested-With"],void 0!==i.setRequestHeader)for(n in f)i.setRequestHeader(n,f[n]);var p=a.hasContent&&a.data||null;s&&(d={},(l=p)&&(d=m.unparam(l)),d=m.mix(d,s),p=new FormData,m.each(d,function(e,t){m.isArray(e)?m.each(e,function(e){p.append(t+(a.serializeArray?"[]":""),e)}):p.append(t,e)})),i.send(p),c&&4!==i.readyState?h(i)?(i.onload=function(){i.readyState=4,i.status=200,r._callback()},i.onerror=function(){i.readyState=4,i.status=500,r._callback()}):i.onreadystatechange=function(){r._callback()}:r._callback()},abort:function(){this._callback(0,1)},_callback:function(e,t){var n,r,o,a,i=this.nativeXhr,s=this.io,u=s.config;try{if(t||4===i.readyState)if(h(i)?(i.onerror=m.noop,i.onload=m.noop):i.onreadystatechange=m.noop,t)4!==i.readyState&&i.abort();else{var c=v(u),l=i.status;h(i)||(s.responseHeadersString=i.getAllResponseHeaders()),c&&(n=i.getResponseHeader("Last-Modified"),r=i.getResponseHeader("ETag"),n&&(b[c]=n),r&&(T[r]=r)),(a=i.responseXML)&&a.documentElement&&(s.responseXML=a);var f,d,p=s.responseText=i.responseText;u.files&&p&&(-1!==(f=p.indexOf("<body>"))&&(-1===(d=p.lastIndexOf("</body>"))&&(d=p.length),p=p.slice(f+6,d)),s.responseText=m.unEscapeHtml(p));try{o=i.statusText}catch(e){y.error("xhr statusText error: "),y.error(e),o=""}l||!g.isLocal||u.crossDomain?1223===l&&(l=204):l=s.responseText?200:404,s._ioReady(l,o)}}catch(e){m.log(e.stack||e,"error"),setTimeout(function(){throw e},0),i.onreadystatechange=m.noop,t||s._ioReady(-1,e.message||"process error")}}}),e}),KISSY.add("io/xdr-flash-transport",["./base","dom"],function(i,e){function t(e){n.info("use XdrFlashTransport for: "+e.config.url),this.io=e}var s,o=e("./base"),u=e("dom"),n=i.getLogger("s/io"),c={},l=i.Env.host.document,f=!1;return i.augment(t,{send:function(){var e,t,n,r=this,o=r.io,a=o.config;e=(a.xdr||{}).src||i.Config.base+"io/assets/io.swf",n=t=1,f||(f=!0,t='<object id="io_swf" type="application/x-shockwave-flash" data="'+e+'" width="0" height="0"><param name="movie" value="'+e+'" /><param name="FlashVars" value="yid='+t+"&uid="+n+'&host=KISSY.IO" /><param name="allowScriptAccess" value="always" /></object>',n=l.createElement("div"),u.prepend(n,l.body||l.documentElement),n.innerHTML=t),s?(r._uid=i.guid(),c[r._uid]=r,s.send(o._getUrlForSend(),{id:r._uid,uid:r._uid,method:a.type,data:a.hasContent&&a.data||{}})):setTimeout(function(){r.send()},200)},abort:function(){s.abort(this._uid)},_xdrResponse:function(e,t){var n,r,o=t.id,a=t.c,t=this.io;switch(a&&(r=a.responseText)&&(t.responseText=decodeURI(r)),e){case"success":n={status:200,statusText:"success"},delete c[o];break;case"abort":delete c[o];break;case"timeout":case"transport error":case"failure":delete c[o],n={status:"status"in a?a.status:500,statusText:a.statusText||e}}n&&t._ioReady(n.status,n.statusText)}}),o.applyTo=function(e,t,n){var t=t.split(".").slice(1),r=o;i.each(t,function(e){r=r[e]}),r.apply(null,n)},o.xdrReady=function(){s=l.getElementById("io_swf")},o.xdrResponse=function(e,t){var n=c[t.uid];n&&n._xdrResponse(e,t)},t}),KISSY.add("io/sub-domain-transport",["event/dom","dom","./xhr-transport-base"],function(s,e){function t(e){var t=e.config;this.io=e,t.crossDomain=!1,n.info("use SubDomainTransport for: "+t.url)}function u(){var e=this.io.config.uri.getHostname(),e=p[e];e.ready=1,c.detach(e.iframe,"load",u,this),this.send()}var c=e("event/dom"),l=e("dom"),f=e("./xhr-transport-base"),n=s.getLogger("s/io"),d=s.Env.host.document,p={};return s.augment(t,f.proto,{send:function(){var e,t=this,n=t.io.config,r=n.uri,o=r.getHostname(),a=p[o],i="/sub_domain_proxy.html";if(n.xdr&&n.xdr.subDomain&&n.xdr.subDomain.proxy&&(i=n.xdr.subDomain.proxy),a&&a.ready)return t.nativeXhr=f.nativeXhr(0,a.iframe.contentWindow),void(t.nativeXhr?t.sendInternal():s.error("document.domain not set correctly!"));a?e=a.iframe:(e=(a=p[o]={}).iframe=d.createElement("iframe"),l.css(e,{position:"absolute",left:"-9999px",top:"-9999px"}),l.prepend(e,d.body||d.documentElement),(a=new s.Uri).setScheme(r.getScheme()),a.setPort(r.getPort()),a.setHostname(o),a.setPath(i),e.src=a.toString()),c.on(e,"load",u,t)}}),t}),KISSY.add("io/xhr-transport",["./base","./xhr-transport-base","./xdr-flash-transport","./sub-domain-transport"],function(i,e){function t(e){var t,n=e.config,r=n.crossDomain,o=n.xdr||{},a=o.subDomain=o.subDomain||{};if(this.io=e,r&&!s.supportCORS){if(t=n.uri.getHostname(),f.domain&&i.endsWith(t,f.domain)&&!1!==a.proxy)return new c(e);if("flash"===String(o.use)||!d)return new u(e)}e=this.nativeXhr=s.nativeXhr(r),n="crossDomain: "+r+", use "+(d&&e instanceof d?"XDomainRequest":"XhrTransport")+" for: "+n.url;return l.debug(n),this}var n=e("./base"),s=e("./xhr-transport-base"),u=e("./xdr-flash-transport"),c=e("./sub-domain-transport"),l=i.getLogger("s/io"),f=i.Env.host.document,d=s.XDomainRequest_;return i.augment(t,s.proto,{send:function(){this.sendInternal()}}),n.setupTransport("*",t),n}),KISSY.add("io/script-transport",["./base"],function(r,e){function t(e){var t=e.config;return t.crossDomain?(this.io=e,o.info("use ScriptTransport for: "+t.url),this):new(n.getTransport("*"))(e)}var n=e("./base"),o=r.getLogger("s/io");return n.setupConfig({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{text:{script:function(e){return r.globalEval(e),e}}}}),r.augment(t,{send:function(){var e=this,t=e.io,n=t.config;e.script=r.getScript(t._getUrlForSend(),{charset:n.scriptCharset,success:function(){e._callback("success")},error:function(){e._callback("error")}})},_callback:function(e,t){var n=this.script,r=this.io;n&&(this.script=void 0,t||("error"!==e?r._ioReady(200,"success"):"error"===e&&r._ioReady(500,"script error")))},abort:function(){this._callback(0,1)}}),n.setupTransport("script",t),n}),KISSY.add("io/jsonp",["./base"],function(s,e){var e=e("./base"),u=s.Env.host;return e.setupConfig({jsonp:"callback",jsonpCallback:function(){return s.guid("jsonp")}}),e.on("start",function(e){var t,n,r,o=e.io,a=o.config,i=a.dataType;"jsonp"===i[0]&&(delete a.contentType,e=a.jsonpCallback,n="function"==typeof e?e():e,r=u[n],a.uri.query.set(a.jsonp,n),u[n]=function(e){1<arguments.length&&(e=s.makeArray(arguments)),t=[e]},o.fin(function(){if(void 0===(u[n]=r))try{delete u[n]}catch(e){}else t&&r(t[0])}),(a=a.converters).script=a.script||{},a.script.json=function(){if(!t)throw new Error("not call jsonpCallback: "+n);return t[0]},i.length=2,i[0]="script",i[1]="json")}),e}),KISSY.add("io/form",["./base","dom","./form-serializer"],function(f,e){var t=e("./base"),d=e("dom"),p=e("./form-serializer"),e=f.Env.host,m=Array.prototype.slice,h=e.FormData;return t.on("start",function(e){var t,n=e.io.config,r=n.form;if(r){for(var e=d.get(r),r=n.data,o=!1,a={},i=d.query("input",e),s=0,u=i.length;s<u;s++){var c=i[s];if("file"===c.type.toLowerCase()){if(o=!0,!h)break;var l=m.call(c.files,0);a[d.attr(c,"name")]=1<l.length?l:l[0]||null}}o&&h&&(n.files=n.files||{},f.mix(n.files,a),delete n.contentType),!o||h?(t=p.getFormData(e),n.hasContent?(t=f.param(t,void 0,void 0,n.serializeArray),r?n.data+="&"+t:n.data=t):n.uri.query.add(t)):("*"===(n=(t=n.dataType)[0])&&(n="text"),t.length=2,t[0]="iframe",t[1]=n)}}),t}),KISSY.add("io/iframe-transport",["dom","./base","event/dom"],function(b,e){function t(e){this.io=e,r.info("use IframeTransport for: "+e.config.url)}var T=e("dom"),n=e("./base"),E=e("event/dom"),r=b.getLogger("s/io"),S=b.Env.host.document,e=b.clone(n.getConfig().converters.text);return e.json=function(e){return b.parseJson(b.unEscapeHtml(e))},n.setupConfig({converters:{iframe:e,text:{iframe:function(e){return e}},xml:{iframe:function(e){return e}}}}),b.augment(t,{send:function(){function e(){E.on(t,"load error",m._callback,m),y.submit()}var t,n,r,o,a,i,s,u,c,l,f,d,p,m=this,h=m.io,v=h.config,g=v.data,y=T.get(v.form);m.attrs={target:T.attr(y,"target")||"",action:T.attr(y,"action")||"",encoding:T.attr(y,"encoding"),enctype:T.attr(y,"enctype"),method:T.attr(y,"method")},m.form=y,f=h,d=b.guid("io-iframe"),p=T.getEmptyIframeSrc(),d=f.iframe=T.create("<iframe "+(p?' src="'+p+'" ':"")+' id="'+d+'" name="'+d+'" style="position:absolute;left:-9999px;top:-9999px;"/>'),T.prepend(d,S.body||S.documentElement),t=d,T.attr(y,{target:t.id,action:h._getUrlForSend(),method:"post",enctype:"multipart/form-data",encoding:"multipart/form-data"}),(n=g?b.unparam(g):n)&&(r=n,o=y,a=v.serializeArray,l=[],b.each(r,function(e,t){for(i=b.isArray(e),s=b.makeArray(e),u=0;u<s.length;u++)(c=S.createElement("input")).type="hidden",c.name=t+(i&&a?"[]":""),c.value=s[u],T.append(c,o),l.push(c)}),r=l),m.fields=r,6===b.UA.ie?setTimeout(e,0):e()},_callback:function(e){var t,n=this,r=n.form,o=n.io,a=e.type,i=o.iframe;if(i)if("abort"===a&&6===b.UA.ie?setTimeout(function(){T.attr(r,n.attrs)},0):T.attr(r,n.attrs),e=this.fields,T.remove(e),E.detach(i),setTimeout(function(){T.remove(i)},30),o.iframe=null,"load"===a)try{(t=i.contentWindow.document)&&t.body&&(o.responseText=T.html(t.body),b.startsWith(o.responseText,"<?xml")&&(o.responseText=void 0)),t&&t.XMLDocument?o.responseXML=t.XMLDocument:o.responseXML=t,t?o._ioReady(200,"success"):o._ioReady(500,"parser error")}catch(e){o._ioReady(500,"parser error")}else"error"===a&&o._ioReady(500,"error")},abort:function(){this._callback({type:"abort"})}}),n.setupTransport("iframe",t),n}),KISSY.add("io/methods",["promise","./base"],function(h,e){var t=e("promise"),u=e("./base"),r=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm;h.extend(u,t,{setRequestHeader:function(e,t){return this.requestHeaders[e]=t,this},getAllResponseHeaders:function(){return 2===this.state?this.responseHeadersString:null},getResponseHeader:function(e){var t,n;if(e=e.toLowerCase(),2===this.state){if(!(n=this.responseHeaders))for(n=this.responseHeaders={};t=r.exec(this.responseHeadersString);)n[t[1].toLowerCase()]=t[2];t=n[e]}return void 0===t?null:t},overrideMimeType:function(e){return this.state||(this.mimeType=e),this},abort:function(e){return e=e||"abort",this.transport&&this.transport.abort(e),this._ioReady(0,e),this},getNativeXhr:function(){var e=this.transport;return e?e.nativeXhr:null},_ioReady:function(e,t){var n,r=this;if(2!==r.state){if(r.state=2,r.readyState=4,200<=e&&e<300||304===e)if(304===e)t="not modified",n=!0;else try{(function(e){var t,n,r=e.responseText,o=e.responseXML,a=e.config,i=a.converters,s=a.contents,u=a.dataType;if(r||o){for(t=e.mimeType||e.getResponseHeader("Content-Type");"*"===u[0];)u.shift();if(!u.length)for(p in s)if(s[p].test(t)){u[0]!==p&&u.unshift(p);break}u[0]=u[0]||"text";for(var c,l=0;l<u.length;l++){if("text"===u[l]&&void 0!==r){n=r;break}if("xml"===u[l]&&void 0!==o){n=o;break}}n||(c={text:r,xml:o},h.each(["text","xml"],function(e){var t=u[0];return i[e]&&i[e][t]&&c[e]?(u.unshift(e),n="text"===e?r:o,!1):void 0}))}for(var f=u[0],d=1;d<u.length;d++){var p=u[d],m=i[f]&&i[f][p];if(!m)throw new Error("no covert for "+f+" => "+p);n=m(n),f=p}e.responseData=n})(r),t="success",n=!0}catch(e){h.log(e.stack||e,"error"),setTimeout(function(){throw e},0),t=e.message||"parser error"}else e<0&&(e=0);r.status=e,r.statusText=t;var o=r.defer,a=r.config;(s=r.timeoutTimer)&&(clearTimeout(s),r.timeoutTimer=0);var i=n?"success":"error",e=[r.responseData,t,r],s=a.context,t={ajaxConfig:a,io:r};(r=a[i])&&r.apply(s,e),(r=a.complete)&&r.apply(s,e),u.fire(i,t),u.fire("complete",t),o[n?"resolve":"reject"](e)}},_getUrlForSend:function(){var e=this.config,t=e.uri,n=h.Uri.getComponents(e.url).query||"";return t.toString.call(t,e.serializeArray)+(n&&(t.query.has()?"&":"?")+n)}})}),KISSY.add("io",["io/form-serializer","io/base","io/xhr-transport","io/script-transport","io/jsonp","io/form","io/iframe-transport","io/methods"],function(e,t){function o(e,t,n,r,o){return"function"==typeof t&&(r=n,n=t,t=void 0),a({type:o||"get",url:e,data:t,success:n,dataType:r})}var n=t("io/form-serializer"),a=t("io/base");return t("io/xhr-transport"),t("io/script-transport"),t("io/jsonp"),t("io/form"),t("io/iframe-transport"),t("io/methods"),e.mix(a,{serialize:n.serialize,get:o,post:function(e,t,n,r){return"function"==typeof t&&(r=n,n=t,t=void 0),o(e,t,n,r,"post")},jsonp:function(e,t,n){return"function"==typeof t&&(n=t,t=void 0),o(e,t,n,"jsonp")},getScript:e.getScript,getJSON:function(e,t,n){return"function"==typeof t&&(n=t,t=void 0),o(e,t,n,"json")},upload:function(e,t,n,r,o){return"function"==typeof n&&(o=r,r=n,n=void 0),a({url:e,type:"post",dataType:o,form:t,data:n,success:r})}}),e.mix(e,{Ajax:a,IO:a,ajax:a,io:a,jsonp:a.jsonp}),a}),KISSY.add("event/custom/observer",["event/base"],function(e,t){function n(){n.superclass.constructor.apply(this,arguments)}t=t("event/base");return e.extend(n,t.Observer,{keys:["fn","context","groups"]}),n}),KISSY.add("event/custom/object",["event/base"],function(t,e){function n(e){n.superclass.constructor.call(this),t.mix(this,e)}e=e("event/base");return t.extend(n,e.Object),n}),KISSY.add("event/custom/observable",["event/base","./observer","./object"],function(t,e){function n(){n.superclass.constructor.apply(this,arguments),this.defaultFn=null,this.defaultTargetOnly=!1,this.bubbles=!0}var r=e("event/base"),o=e("./observer"),d=e("./object"),f=r.Utils;return t.extend(n,r.Observable,{on:function(e){e=new o(e);t.Config.debug&&(e.fn||t.error("lack event handler for "+this.type)),-1===this.findObserver(e)&&this.observers.push(e)},fire:function(e){var t,n,r,o,a,i=this,s=i.bubbles,u=i.currentTarget,c=i.type,l=i.defaultFn,f=e=e||{};if(e.type=c,f instanceof d||(f.target=u,f=new d(f)),f.currentTarget=u,a=i.notify(f),!1!==o&&void 0!==a&&(o=a),s&&!f.isPropagationStopped())for(n=(t=u.getTargets())&&t.length||0,r=0;r<n&&!f.isPropagationStopped();r++)a=t[r].fire(c,f),!1!==o&&void 0!==a&&(o=a);return l&&!f.isDefaultPrevented()&&(s=(e=f.target).getCustomEventObservable(f.type),(i.defaultTargetOnly||s.defaultTargetOnly)&&u!==e||(o=l.call(u,f))),o},notify:function(e){for(var t,n,r=[].concat(this.observers),o=r.length,a=0;a<o&&!e.isImmediatePropagationStopped();a++)t=r[a].notify(e,this),!1!==n&&void 0!==t&&(n=t);return n},detach:function(e){var t,n=e.fn,r=e.context,o=this.currentTarget,a=this.observers,e=e.groups;if(a.length){e&&(t=f.getGroupsRe(e));var i,s,u,c,l=a.length;if(n||t){for(r=r||o,s=i=0,u=[];i<l;++i)(r!==((c=a[i]).context||o)||n&&n!==c.fn||t&&!c.groups.match(t))&&(u[s++]=c);this.observers=u}else this.reset()}}}),n}),KISSY.add("event/custom/target",["event/base","./observable"],function(i,e){var t=e("event/base"),s=e("./observable"),u=t.Utils,c=u.splitAndRun,n="__~ks_bubble_targets",r="__~ks_custom_events";return{isTarget:1,getCustomEventObservable:function(e,t){var n=this.getCustomEvents(),r=n&&n[e];return r=!r&&t?n[e]=new s({currentTarget:this,type:e}):r},fire:function(e,n){var r,o=this,t=o.getTargets(),a=t&&t.length;return n=n||{},c(e,function(e){var t;if(u.fillGroupsForEvent(e,n),e=n.type,(t=o.getCustomEventObservable(e))||a){if(t){if(!t.hasObserver()&&!t.defaultFn&&(t.bubbles&&!a||!t.bubbles))return}else t=new s({currentTarget:o,type:e});t=t.fire(n),!1!==r&&void 0!==t&&(r=t)}}),r},publish:function(e,t){var n,r=this;return c(e,function(e){n=r.getCustomEventObservable(e,!0),i.mix(n,t)}),r},addTarget:function(e){var t=this.getTargets();return i.inArray(e,t)||t.push(e),this},removeTarget:function(e){var t=this.getTargets(),e=i.indexOf(e,t);return-1!==e&&t.splice(e,1),this},getTargets:function(){return this[n]||(this[n]=[])},getCustomEvents:function(){return this[r]||(this[r]={})},on:function(e,t,n){var r=this;return u.batchForType(function(e,t,n){n=u.normalizeParam(e,t,n);e=n.type,(e=r.getCustomEventObservable(e,!0))&&e.on(n)},0,e,t,n),r},detach:function(e,t,n){var a=this;return u.batchForType(function(e,t,n){var r,o=u.normalizeParam(e,t,n);(e=o.type)?(r=a.getCustomEventObservable(e,!0))&&r.detach(o):(r=a.getCustomEvents(),i.each(r,function(e){e.detach(o)}))},0,e,t,n),a}}}),KISSY.add("event/custom",["./custom/target"],function(e,t){t=t("./custom/target");return{Target:t,global:e.mix({},t)}});
