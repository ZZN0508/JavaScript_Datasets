!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("wafer-darla",[],t):"object"==typeof exports?exports["wafer-darla"]=t():(e.wafer=e.wafer||{},e.wafer.wafers=e.wafer.wafers||{},e.wafer.wafers["wafer-darla"]=t())}("undefined"!=typeof self?self:this,function(){return r={"./src/controller.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var A=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],o=!0,n=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(o=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);o=!0);}catch(e){n=!0,a=e}finally{try{!o&&s.return&&s.return()}finally{if(n)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},n=function(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e},a=window.wafer,i=a.constants,a=a.utils,C=a.getUrlParameterValueByName,s=i.ATTR_PREFIX,i=window.wafer.controllers.WaferLazyController,E=window.DARLA||null,l=a.bindEvent,n=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(f,i),n(f,[{key:"makeDarlaCall",value:function(e,t,r,o,n){var a=r.authed,i=void 0===a?"0":a,s=r.rotateAds,l=void 0!==s&&s,f=r.rotateTime,u=void 0===f?3e4:f,c=r.maxRetry,d=void 0===c?5:c,p=r.width,y=void 0===p?300:p,v=r.height,w=void 0===v?250:v,h=r.device,b=void 0===h?"smartphone":h,m=r.intl,g=void 0===m?"us":m,_=r.site,a=void 0===_?"fp":_,s=r.rid,f=void 0===s?"testRid":s,c=r.bucket,p=void 0===c?"testBucket":c,v=r.npv,h=void 0===v||v,m=r.ssl,_=void 0===m||m,O=r.metaSize,s=r.siteAttribute,x=r.supports,j=r.flex,c=r.meta,P=void 0===c?{}:c,v=r.waitDelay,m=void 0===v?350:v;if(e&&t&&E){c=E.inProgress(),v=E.prefetched();if((window.vzm&&window.vzm.getPageContext&&window.vzm.getPageContext()||window.YAHOO&&window.YAHOO.context||{}).ynet&&(t=C("_spaceid",window.location.href)||t),(c||v&&0<v.length)&&0<m)return o=o||0,c&&o===d&&E.abort(),d<o?void(n&&n.style&&(n.style.display="none")):void setTimeout(this.makeDarlaCall.bind(this,e,t,r,o+1,n),o===d?2*m:m);m={pg:{device:b,intl:g,property:a,rid:f,test:p}},b='Y-BUCKET="'+p+'"';s?(a="lu:"+i,f=s.split("pct"),f=(p=A(f,2))[0],p=p[1],b+=f&&p?" "+f+a+";pct"+p:" "+s):"tw"===g&&(b+=' rs="lu:'+i+'"');i="wafer_darla_fetch_"+e.replace(",","_");E.add({name:i,autoStart:l,autoRT:u,ps:e,sa:b,sp:t,npv:h,ssl:_,ult:m}),e.split(",").forEach(function(e){var t=P[e]||{},r=t.width||y,o=t.height||w,n=t.metaSize||O,a=t.supports||x,t=t.flex||j,o={pos:e,dest:"wafer-darla-"+e,w:r,h:o};n&&(o.metaSize=n),a&&(o.supports=a),t&&(o.flex=t),E.addPos(o)}),E.event(i)}}},{key:"loadElement",value:function(e){if(this._shouldLoadElement(e)){var t={};try{t=JSON.parse(e.getAttribute(s+"darla-config"))}catch(e){return}var r,o=t,n=o.pos,a=o.spaceid;n&&a&&E&&(r=E.inProgress(),o=void 0===(o=t.abortDarlaCalls)?[]:o,r&&Array.isArray(o)&&o.length&&-1!==o.indexOf(r)&&E.abort(),this.makeDarlaCall(n,a,t,0,e))}l(e,"load",this._itemLoaded(e))}}]),f);function f(){void 0===(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).root&&document,function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f);var e=f.prototype.configs,t=e.selector,e=e.successClass,e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,{selector:t,successClass:e}));return e._options=o({},e._options,{defaultOffsetY:1200,defaultOffsetX:0}),e.sync(),e}function u(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}n.prototype.configs={selector:".wafer-darla",successClass:"wafer-darla-done"},t.default=n,e.exports=t.default},"./src/entry.js":function(e,t,r){"use strict";function o(){return e=r("./src/controller.js"),n=e&&e.__esModule?e:{default:e};var e}var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=new(n||o()).default({selector:(n||o()).default.prototype.configs.selector}),e.exports=t.default}},n={},o.m=r,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="https://s.yimg.com/aaq/wf/",o(o.s="./src/entry.js");function o(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}var r,n});
