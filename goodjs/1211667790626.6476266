webpackJsonp([2],{"8uvu":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("7+uW"),r=function(){var t=this.$createElement,t=this._self._c||t;return t("div",{attrs:{id:"app"}},[t("router-view",{staticClass:"view"})],1)};r._withStripped=!0;var o={render:r,staticRenderFns:[]},i=n("VU/8")({name:"App",data:function(){return{}},mounted:function(){},methods:{}},o,!1,null,null,null);i.options.__file="src/pages/preview/App.vue";e=i.exports,r=n("/ocq");a.default.use(r.a);o=new r.a({routes:[{path:"/preview/:id",components:{default:function(t){return n.e(0).then(function(){return t(n("vT+3"))}.bind(null,n)).catch(n.oe)}},props:{default:!0}}]}),n("nO5U"),i=n("VqY/"),r=n("LTzH");a.default.config.productionTip=!1,a.default.prototype.CFG=i.a,a.default.prototype.http=r.a,new a.default({el:"#app",router:o,http:r.a,components:{App:e},template:"<App/>",created:function(){}})},LTzH:function(t,e,n){"use strict";var a=n("//Fk"),r=n.n(a),o=n("mtWM"),i=n.n(o),u=n("7+uW"),s=n("NYxO"),a=n("bOdI"),o=n.n(a),a=n("K/Lq"),c=n.n(a),d=n("VqY/"),p=function(e){var t=Array.isArray(e)?e.join(","):e;return A.get(d.a.API_URL+"resourceManage/config?configData="+t).then(function(t){return Array.isArray(e)?t.data.data:t.data.data[e]})},f=function(){return A.get(d.a.API_URL+"user/present").then(function(t){return t.data})},m=function(){return A.get(d.a.API_URL+"account/list").then(function(t){return t.data})},l=function(){return A.get(d.a.API_URL+"account/present").then(function(t){return t.data})},o={state:{fetchLoading:!1,title:"",user:{userName:null},adShapeList:[],accountList:[],resourcePlatformList:[],productList:[],editTemplateData:{},currentAccount:"",isAdmin:!1},getters:{fetchLoading:function(t){return t.fetchLoading},userCookie:function(t){return t.user},resourcePlatformList:function(t){return t.resourcePlatformList},productList:function(t){return t.productList},adShapeList:function(t){return t.adShapeList},accountList:function(t){return t.accountList},currentAccount:function(t){return t.currentAccount},user:function(t){return t.user},editTemplateData:function(t){return t.editTemplateData},isAdmin:function(t){return t.isAdmin}},actions:{FETCH_LOADING:function(t,e){(0,t.commit)("loading",e)},dicInit:function(t){var e=t.commit;p(["resourcePlatform","product","adShape"]).then(function(t){e("dicInit",{resourcePlatformList:t.resourcePlatform,productList:t.product,adShapeList:t.adShape})})},getRelatedAccount:function(t,e){var n=t.commit;m().then(function(t){n("accountList",t.data)})},editTemplate:function(t,e){(0,t.commit)("editTemplate",e)},userLogin:function(t){var e=t.commit;f().then(function(t){200===t.status&&(c.a.set("UserName",t.data.name,{expires:"30m"}),e("userLogin",{userName:t.data.name}),e("isAdmin",1===t.data.role))})},getCurrentAccount:function(t){var e=t.commit;l().then(function(t){e("currentAccount",t.data.accountName)})}},mutations:(a={},o()(a,"loading",function(t,e){t.fetchLoading=e}),o()(a,"userLogin",function(t,e){t.user=e}),o()(a,"userLogout",function(t,e){t.user=e}),o()(a,"accountList",function(t,e){t.accountList=e}),o()(a,"editTemplate",function(t,e){t.editTemplateData=e}),o()(a,"dicInit",function(t,e){t.adShapeList=e.adShapeList,t.resourcePlatformList=e.resourcePlatformList,t.productList=e.productList}),o()(a,"currentAccount",function(t,e){t.currentAccount=e}),o()(a,"isAdmin",function(t,e){t.isAdmin=e}),a)},a=n("jJhY").Promise;window.Promise||(window.Promise=a),u.default.use(s.a);var L=new s.a.Store({modules:{app:o}}),h=n("zL8q");i.a.defaults.timeout=5e3;var g=void 0;i.a.interceptors.request.use(function(t){return t.withCredentials=!0,L.state.token&&(t.headers.Authorization="token "+L.state.token),t.data&&"false"===t.data.loading||t.params&&"false"===t.params.loading||(g=new Date,L.dispatch("FETCH_LOADING",!0)),t},function(t){return r.a.reject(t)}),i.a.interceptors.response.use(function(t){var e=(new Date).getTime()-g.getTime();return e<500&&(e=500),setTimeout(function(){L.dispatch("FETCH_LOADING",!1)},e),t},function(t){L.dispatch("FETCH_LOADING",!1),g=new Date;var e="";if(t.response){switch(t.response.status){case 401:case 403:window.location.href=d.a.API_SSO_URL}if(t.response.data&&t.response.data.code&&t.response.data.message)return e=t.response.data&&t.response.data.code&&t.response.data.message,r.a.reject(t.response.data);e=t.response.status+" "+t.response.statusText||"绯荤粺寮傚父,璇风◢鍚庡啀璇�"}else e="鏈嶅姟瓒呮椂,璇风◢鍚庨噸璇�";return-1===window.location.href.indexOf("preview")&&Object(h.Message)({type:"error",message:e,showClose:!0,center:!0,customClass:"common_tip"}),r.a.reject({code:0,message:e})});var A=e.a=i.a},"VqY/":function(t,e,n){"use strict";e.a={NODE_ENV:"production",ENV:"prod",API_URL:"http://mp-admin.csdn.net/kp/api/",API_PREVIEW_URL:"https://kunpeng.csdn.net/",STATIC_URL:"http://mp-admin.csdn.net/ad/",STATIC_PREVIEW_URL:"https://kunpeng-sc.csdnimg.cn/",ROOT_URL:"http://mp-admin.csdn.net/ad/",UPLOAD_URL:"http://kunpeng-manager.csdn.net/api/",API_SSO_URL:"https://mp-sso.csdn.net/login.html?rolePath:cn=manage_ad_admin,ou=csdn_manage,ou=csdn_production,ou=csdn_permission"}},nO5U:function(t,e){}},["8uvu"]);
