(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{105:function(t,e,i){var o=i(8),n=i(28),r=i(4),a=i(106),i="["+a+"]",s=RegExp("^"+i+i+"*"),d=RegExp(i+i+"*$"),i=function(t,e,i){var n={},s=r(function(){return!!a[t]()||"â€‹Â…"!="â€‹Â…"[t]()}),e=n[t]=s?e(c):a[t];i&&(n[i]=e),o(o.P+o.F*s,"String",n)},c=i.trim=function(t,e){return t=String(n(t)),1&e&&(t=t.replace(s,"")),t=2&e?t.replace(d,""):t};t.exports=i},106:function(t,e){t.exports="\t\n\v\f\r Â áš€á Žâ€€â€â€‚â€ƒâ€„â€…â€†â€‡â€ˆâ€‰â€Šâ€¯âŸã€€\u2028\u2029\ufeff"},26:function(t,e,i){"use strict";var u=i(3),l=i(19),h=i(50),g=i(35);i(36)("match",1,function(n,s,d,c){return[function(t){var e=n(this),i=null==t?void 0:t[s];return void 0!==i?i.call(t,e):new RegExp(t)[s](String(e))},function(t){var e=c(d,t,this);if(e.done)return e.value;var i=u(t),n=String(this);if(!i.global)return g(i,n);for(var s=i.unicode,o=[],r=i.lastIndex=0;null!==(a=g(i,n));){var a=String(a[0]);""===(o[r]=a)&&(i.lastIndex=h(n,l(i.lastIndex),s)),r++}return 0===r?null:o}]})},30:function(t,e,i){i(64)("asyncIterator")},31:function(t,e,i){"use strict";function n(t){var e=z[t]=M(H.prototype);return e._k=t,e}function r(t,e,i){return t===G&&r($,e,i),L(t),e=_(e,!0),L(i),c(z,e)?(i.enumerable?(c(t,U)&&t[U][e]&&(t[U][e]=!1),i=M(i,{enumerable:C(0,!1)})):(c(t,U)||R(t,U,C(1,{})),t[U][e]=!0),Q(t,e,i)):R(t,e,i)}function s(t,e){L(t);for(var i,n=w(e=T(e)),s=0,o=n.length;s<o;)r(t,i=n[s++],e[i]);return t}function o(t){var e=V.call(this,t=_(t,!0));return!(this===G&&c(z,t)&&!c($,t))&&(!(e||!c(this,t)||!c(z,t)||c(this,U)&&this[U][t])||e)}function a(t,e){if(t=T(t),e=_(e,!0),t!==G||!c(z,e)||c($,e)){var i=x(t,e);return!i||!c(z,e)||c(t,U)&&t[U][e]||(i.enumerable=!0),i}}var d=i(2),c=i(12),u=i(5),l=i(8),h=i(9),g=i(95).KEY,p=i(4),f=i(40),m=i(39),v=i(24),b=i(1),y=i(65),S=i(64),w=i(96),E=i(66),L=i(3),I=i(6),A=i(17),T=i(20),_=i(38),C=i(37),M=i(49),D=i(97),O=i(51),P=i(48),F=i(7),k=i(16),x=O.f,R=F.f,B=D.f,H=d.Symbol,N=d.JSON,j=N&&N.stringify,U=b("_hidden"),q=b("toPrimitive"),V={}.propertyIsEnumerable,W=f("symbol-registry"),z=f("symbols"),$=f("op-symbols"),G=Object.prototype,K="function"==typeof H&&!!P.f,Y=d.QObject,J=!Y||!Y.prototype||!Y.prototype.findChild,Q=u&&p(function(){return 7!=M(R({},"a",{get:function(){return R(this,"a",{value:7}).a}})).a})?function(t,e,i){var n=x(G,e);n&&delete G[e],R(t,e,i),n&&t!==G&&R(G,e,n)}:R,Z=K&&"symbol"==typeof H.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof H},f=function(t){for(var e,i=B(T(t)),n=[],s=0;i.length>s;)c(z,e=i[s++])||e==U||e==g||n.push(e);return n},Y=function(t){for(var e,i=t===G,n=B(i?$:T(t)),s=[],o=0;n.length>o;)!c(z,e=n[o++])||i&&!c(G,e)||s.push(z[e]);return s};K||(h((H=function(){if(this instanceof H)throw TypeError("Symbol is not a constructor!");var e=v(0<arguments.length?arguments[0]:void 0),i=function(t){this===G&&i.call($,t),c(this,U)&&c(this[U],e)&&(this[U][e]=!1),Q(this,e,C(1,t))};return u&&J&&Q(G,e,{configurable:!0,set:i}),n(e)}).prototype,"toString",function(){return this._k}),O.f=a,F.f=r,i(34).f=D.f=f,i(33).f=o,P.f=Y,u&&!i(23)&&h(G,"propertyIsEnumerable",o,!0),y.f=function(t){return n(b(t))}),l(l.G+l.W+l.F*!K,{Symbol:H});for(var X="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;X.length>tt;)b(X[tt++]);for(var et=k(b.store),it=0;et.length>it;)S(et[it++]);l(l.S+l.F*!K,"Symbol",{for:function(t){return c(W,t+="")?W[t]:W[t]=H(t)},keyFor:function(t){if(!Z(t))throw TypeError(t+" is not a symbol!");for(var e in W)if(W[e]===t)return e},useSetter:function(){J=!0},useSimple:function(){J=!1}}),l(l.S+l.F*!K,"Object",{create:function(t,e){return void 0===e?M(t):s(M(t),e)},defineProperty:r,defineProperties:s,getOwnPropertyDescriptor:a,getOwnPropertyNames:f,getOwnPropertySymbols:Y});Y=p(function(){P.f(1)});l(l.S+l.F*Y,"Object",{getOwnPropertySymbols:function(t){return P.f(A(t))}}),N&&l(l.S+l.F*(!K||p(function(){var t=H();return"[null]"!=j([t])||"{}"!=j({a:t})||"{}"!=j(Object(t))})),"JSON",{stringify:function(t){for(var e,i,n=[t],s=1;s<arguments.length;)n.push(arguments[s++]);if(i=e=n[1],(I(e)||void 0!==t)&&!Z(t))return E(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!Z(e))return e}),n[1]=e,j.apply(N,n)}}),H.prototype[q]||i(11)(H.prototype,q,H.prototype.valueOf),m(H,"Symbol"),m(Math,"Math",!0),m(d.JSON,"JSON",!0)},343:function(t,e,i){function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(){var e,i=!1;this.settings={appendHelpButton:!0,displayHelpButton:!0,isExternalPage:!0,devMode:!1,targetElement:document.body,elementForOnlineDisplay:void 0,elementForOfflineDisplay:void 0,defaultMinimizedText:"",disabledMinimizedText:"",defaultAssistiveText:"",loadingText:"Loading",showIcon:void 0,enabledFeatures:[],entryFeature:"FieldService",storageDomain:document.domain,language:void 0,linkAction:{feature:void 0,name:void 0,valid:!1},linkActionParameters:{},useCustomAuthentication:!1,allowGuestUsers:!1,requireSLDS:!1},this.auth={},this.validLinkActions={},this.isMasterAndHasSlaves=!1,Object.defineProperty(this.auth,"oauthToken",{get:function(){return e},set:function(t){this.validateHeaderValue(t)?(e=t)?(this.setSessionData(d,t),this.checkAuthentication()):this.deleteSessionData(d):this.error('"'+t+'" is not a valid OAuth token.')}.bind(this)}),this.featureScripts={},this.storedEventHandlers={},this.messageHandlers={},this.storageKeys=["ESW_BODY_SCROLL_POSITION","ESW_IS_MINIMIZED","ESW_MINIMIZED_TEXT",d],this.defaultSettings={},this.snippetSettingsFile={},this.eswFrame=void 0,this.availableFeatures=["script","session"],this.outboundMessagesAwaitingIframeLoad=[],this.pendingMessages={},this.iframeScriptsToLoad=[],this.domInitInProgress=!1,this.componentInitInProgress=!1,this.hasSessionDataLoaded=!1,this.isIframeReady=!1,this.isAuthenticationRequired=!1,this.loginPendingSerializedData=void 0,Object.defineProperty(this,"isButtonDisabled",{get:function(){return i},set:function(t){i=t,this.onButtonStatusChange()}.bind(this),configurable:!0}),this.setupMessageListener(),this.getLinkActionData()}function r(){return window.$A&&"function"==typeof window.$A.get&&window.$A.get("$Site")}var s,o,d;i(30),i(31),i(67),i(63),i(32),i(26),i(242),i(22),i(47),i(45),i(68),i(52),i(18),s=window.embedded_svc||{},o=[".salesforce.com",".force.com",".sfdc.net"],d="ESW_OAUTH_TOKEN",n.prototype.getLightningOutParamsObj=function(){var t={};return embedded_svc.config&&embedded_svc.config.additionalSettings&&embedded_svc.config.additionalSettings.labelsLanguage?t={guestUserLang:embedded_svc.config.additionalSettings.labelsLanguage}:embedded_svc.settings.language&&""!==embedded_svc.settings.language.trim()&&(t={guestUserLang:embedded_svc.settings.language}),t.eswConfigDeveloperName=embedded_svc.settings.eswConfigDevName,t},n.prototype.adjustCommunityStorageDomain=function(){this.isCommunityDomain(this.settings.storageDomain)&&this.settings.storageDomain===document.domain&&(this.settings.storageDomain=this.settings.storageDomain+"/"+window.location.pathname.split("/")[1])},n.prototype.loadLightningOutScripts=function(s){if("function"==typeof Promise)return new Promise(function(t,e){var i,n;try{i=(s&&s.baseCoreURL?s:embedded_svc.settings).baseCoreURL,window.$Lightning?t("Lightning Out is already loaded on this page."):r()?t("Communities context does not require Lightning Out to use Embedded Service."):i&&((n=document.createElement("script")).type="text/javascript",n.src=i+"/lightning/lightning.out.js",n.onload=function(){t("Lightning Out scripts loaded.")},document.getElementsByTagName("head")[0].appendChild(n))}catch(t){e(t)}});this.loadScriptFromDirectory("common","promisepolyfill",function(){return this.loadLightningOutScripts(s)}.bind(this),!0)},n.prototype.instantiateLightningOutApplication=function(o){if("function"==typeof Promise)return new Promise(function(t,e){var i,n,s;try{i=(o&&o.communityEndpointURL?o:embedded_svc.settings).communityEndpointURL,n=(o&&o.oauthToken?o:embedded_svc.settings).oauthToken,s=o&&o.paramsObj?o.paramsObj:embedded_svc.getLightningOutParamsObj()||void 0,r()?t("Communities context already has an Aura context."):window.$Lightning&&$Lightning.use("embeddedService:sidebarApp",function(){t("Lightning Out application request complete.")},i,n,s)}catch(t){e(t)}});this.loadScriptFromDirectory("common","promisepolyfill",function(){return this.instantiateLightningOutApplication(o)}.bind(this),!0)},n.prototype.createEmbeddedServiceComponent=function(o){if("function"==typeof Promise)return new Promise(function(n,s){var t,e,i=o&&o.chatAPISettings?embedded_svc.validateStartChatAttributes(o.chatAPISettings):{};try{t=o&&o.attributes?o.attributes:{configurationData:embedded_svc.settings,chatAPISettings:i},e=o&&o.locator?o.locator:embedded_svc.settings.targetElement,embedded_svc.preparePageForSidebar(),window.$Lightning&&!document.querySelector(".embeddedServiceSidebar")?$Lightning.ready($Lightning.createComponent.bind(this,"embeddedService:sidebar",t,e,function(t,e,i){"SUCCESS"===e?embedded_svc.utils.addEventHandler("afterInitialization",function(){n("Embedded Service component created.")}):s(i)})):r()?window.dispatchEvent(new CustomEvent("embeddedServiceCreateSidebar",{detail:{componentAttributes:t,resolve:n,reject:s}})):void 0===window.$Lightning?n("Lightning Out should be loaded on this page before creating the Embedded Service component."):n("Embedded Service component already exists.")}catch(t){s(t)}});this.loadScriptFromDirectory("common","promisepolyfill",function(){return this.createEmbeddedServiceComponent(o)}.bind(this),!0)},n.prototype.bootstrapEmbeddedService=function(i){if("function"==typeof Promise)return new Promise(function(t,e){try{embedded_svc.loadLightningOutScripts(i).then(function(){embedded_svc.instantiateLightningOutApplication(i).then(function(){embedded_svc.createEmbeddedServiceComponent(i).then(function(){window.requestAnimationFrame(function(){embedded_svc.hideHelpButton(),t("Embedded Service application and component bootstrapped.")})})})})}catch(t){e(t)}});this.loadScriptFromDirectory("common","promisepolyfill",function(){return embedded_svc.bootstrapEmbeddedService(i)},!0)},n.prototype.validateStartChatAttributes=function(t){var e=t||{},i=e&&e.prepopulatedPrechatFields?e.prepopulatedPrechatFields:{},n=e&&e.extraPrechatInfo?e.extraPrechatInfo:[],s=e&&e.extraPrechatFormDetails?e.extraPrechatFormDetails:[],o=e&&e.fallbackRouting?e.fallbackRouting:[],r=e&&e.directToButtonRouting?e.directToButtonRouting:void 0,t={buttonId:e&&e.buttonId?e.buttonId:void 0,userId:e&&e.userId?e.userId:void 0,fallback:e&&"boolean"==typeof e.fallback?e.fallback:void 0};if("object"!==a(i))throw new Error("Validation failed for prepopulatedPrechatFields, received: "+i);if(e.prepopulatedPrechatFields=i,!Array.isArray(s))throw new Error("Validation failed for extraPrechatFormDetails, received: "+s);if(e.extraPrechatFormDetails=s,!Array.isArray(n))throw new Error("Validation failed for extraPrechatInfo, received: "+n);if(e.extraPrechatInfo=n,!Array.isArray(o))throw new Error("Validation failed for fallbackRouting, received: "+o);if(e.fallbackRouting=o,"function"==typeof r?e.directToButtonRouting=r:embedded_svc.log("Did not receive an actionable parameter for directToButtonRouting, received: "+r),"object"!==a(t))throw new Error("Validation failed for directToAgentRouting, received: "+t);if((e.directToAgentRouting=t).buttonId){if("string"!=typeof t.buttonId||!t.buttonId.trim().length)throw new Error("Validation failed for directToAgentRouting's buttonId, received: "+t.buttonId);e.directToAgentRouting.buttonId=t.buttonId.trim(),e.directToAgentRouting.fallback=t.fallback,t.userId&&("string"==typeof t.userId&&t.userId.trim().length?e.directToAgentRouting.userId=t.userId.trim():embedded_svc.log("Did not receive an actionable parameter for directToAgentRouting's userId, received: "+t.userId))}else embedded_svc.log("Did not receive an actionable parameter for directToAgentRouting's buttonId, received: "+t.buttonId);return e},n.prototype.isInternetExplorer=function(){return"ActiveXObject"in window},n.prototype.outputToConsole=function(t,e,i){(i||this.settings.devMode)&&console&&console[t]&&console[t]("[Snap-ins] "+(Array.isArray(e)?e.join(", "):e))},n.prototype.log=function(){this.outputToConsole("log",[].slice.apply(arguments))},n.prototype.error=function(t,e){t?this.outputToConsole("error",t,e):this.outputToConsole("error","esw responed with an unspecified error.",e),embedded_svc.utils.fireEvent("error")},n.prototype.warning=function(t,e){t?this.outputToConsole("warn","Warning: "+t,e):this.outputToConsole("warn","esw sent an anonymous warning.",e)},n.prototype.deprecated=function(t){this.warning(t+" is deprecated in version "+Number("5.0").toFixed(1)+" and will be removed in version "+(Number("5.0")+1).toFixed(1))},n.prototype.getCookie=function(t){var e,i=document.cookie;if(i&&-1!==(e=i.indexOf(t+"=")))return-1===(t=i.indexOf(";",e+=(t+"=").length))&&(t=i.length),i.substring(e,t)},n.prototype.setCookie=function(t,e,i){e=t+"="+e+";";i&&((i=new Date).setFullYear(i.getFullYear()+10),e+="expires="+i.toUTCString()+";"),e+="path=/;",document.cookie=e},n.prototype.mergeSettings=function(e){Object.keys(e).forEach(function(t){void 0===this.settings[t]&&(this.settings[t]=e[t])}.bind(this))},n.prototype.loadFeatureScript=function(t,e){var i=decodeURI(t).toLowerCase();-1===t.indexOf("..")?this.loadScriptFromDirectory("client",i+".esw",function(){this.featureScripts[t](this),this.availableFeatures.push(i),embedded_svc.utils.fireEvent("featureLoaded",void 0,t),e&&e(),this.processPendingMessages(i)}.bind(this)):this.error('"'+t+'" is not a valid feature name.')},n.prototype.fireEvent=function(t,e){var i=[].slice.apply(arguments).slice(2);return window.embedded_svc&&embedded_svc.utils?embedded_svc.utils.fireEvent(t,e,i):(this.error("fireEvent should not be called before calling init!"),!0)},n.prototype.isValidEntityId=function(t){return"string"==typeof t&&(18===t.length||15===t.length)},n.prototype.getKeyPrefix=function(t){if(this.isValidEntityId(t))return t.substr(0,3)},n.prototype.isOrganizationId=function(t){return"00D"===this.getKeyPrefix(t)},n.prototype.getESWFrame=function(){var t=document.getElementById("esw_storage_iframe");return!this.eswFrame&&t&&(this.eswFrame=t.contentWindow),this.eswFrame},n.prototype.isFrameStorageEnabled=function(){return this.deprecated("isFrameStorageEnabled"),!0},n.prototype.processPendingMessages=function(t){this.pendingMessages[t]&&(this.pendingMessages[t].forEach(function(t){this.handleMessage(t.payload)}.bind(this)),this.pendingMessages[t]=void 0)},n.prototype.loadCSS=function(){var t=document.createElement("link"),e=this.settings.gslbBaseURL||this.settings.baseCoreURL;t.href=e+"/embeddedservice/"+this.settings.releaseVersion+"/esw"+(this.settings.devMode?"":".min")+".css",t.type="text/css",t.rel="stylesheet",document.getElementsByTagName("head")[0].appendChild(t)},n.prototype.appendHelpButton=function(t){var e=document.createElement("div"),i="";e.className="embeddedServiceHelpButton",this.isLanguageRtl(this.settings.language)&&this.isDesktop()&&(i='dir="rtl"'),e.innerHTML='<div class="helpButton"'+i+'><button class="helpButtonEnabled uiButton" href="javascript:void(0)"><span class="embeddedServiceIcon" aria-hidden="true" data-icon="î¤€"></span><span class="helpButtonLabel" id="helpButtonSpan" aria-live="polite" aria-atomic="true"><span class="assistiveText">'+(this.settings.defaultAssistiveText||"")+'</span><span class="message"></span></span></button></div>',t||(e.style.display="none"),this.settings.targetElement.appendChild(e),this.setHelpButtonText(this.settings.defaultMinimizedText),"ontouchstart"in document.documentElement&&[].slice.apply(document.querySelectorAll(".embeddedServiceHelpButton .uiButton")).forEach(function(t){t.classList.add("no-hover")}),this.onButtonStatusChange()},n.prototype.appendIFrame=function(){var i=document.createElement("iframe"),t={};i.id="esw_storage_iframe",i.src=this.settings.iframeURL,i.style.display="none",i.onload=function(){var e=this.getESWFrame();this.isIframeReady=!0,this.outboundMessagesAwaitingIframeLoad.forEach(function(t){e.postMessage(t,this.settings.iframeURL)}.bind(this)),this.outboundMessagesAwaitingIframeLoad=[],this.iframeScriptsToLoad.forEach(function(t){this.loadStorageScript(t)}.bind(this)),t.deploymentId=this.settings.deploymentId,t.isSamePageNavigation=this.isSamePageNavigation(),t.isRefresh=1===window.performance.navigation.type,this.postMessage("session.updateStorage",t),this.iframeScriptsToLoad=[]}.bind(this),this.settings.targetElement.appendChild(i),window.addEventListener("beforeunload",function(t){var e="You might lose the active chat session if you close this tab. Are you sure?";if(this.isInternetExplorer()&&(i.src="about:blank"),this.isMasterAndHasSlaves){if(embedded_svc.utils.fireEvent("snapinsCloseSessionWarning"),!this.settings.closeSessionWarning||"function"!=typeof this.settings.closeSessionWarning)return(t||window.event).returnValue=e;this.settings.closeSessionWarning()}this.settings.__synchronous_decrement_tab||this.postMessage("chasitor.decrementActiveChatSession",this.settings.deploymentId)}.bind(this),!1)},n.prototype.preparePageForSidebar=function(){var e={};document.getElementById("snapins_invite")&&embedded_svc.inviteAPI&&embedded_svc.inviteAPI.inviteButton.setOnlineState(!1),embedded_svc.utils.fireEvent("beforeCreate"),Object.keys(this.settings).forEach(function(t){e[t]=this.settings[t]}.bind(this)),this.mergeSettings(this.defaultSettings)},n.prototype.createLightningComponent=function(t){this.preparePageForSidebar(),this.createEmbeddedServiceComponent({attributes:{configurationData:this.settings,serializedSessionData:t},locator:this.settings.targetElement}).then(function(){this.hideHelpButton(),this.componentInitInProgress=!1,this.setHelpButtonText(this.settings.defaultMinimizedText),embedded_svc.utils.fireEvent("ready")}.bind(this))},n.prototype.loadLightningApp=function(t){var e,i;if(this.settings.isExternalPage&&"string"!=typeof this.settings.communityEndpointURL)throw new Error("communityEndpointURL String property not set");(e=document.getElementsByClassName("helpButton")[0])&&0<(i=e.getBoundingClientRect().width)&&(e.style.width=i+"px"),this.setHelpButtonText(this.settings.loadingText,!1),this.instantiateLightningOutApplication({communityEndpointURL:this.settings.communityEndpointURL,oauthToken:this.auth.oauthToken}).then(this.createLightningComponent.bind(this,t))},n.prototype.initLightningOut=function(t){this.hasSessionDataLoaded&&("function"!=typeof Promise?this.loadScriptFromDirectory("common","promisepolyfill",function(){this.initLightningOut(t)}.bind(this),!0):this.loadLightningOutScripts().then(this.loadLightningApp.bind(this,t)))},n.prototype.setHelpButtonText=function(t,e){var i=void 0===this.settings.showIcon||this.settings.showIcon,i=void 0===e?i:e,e=document.getElementById("helpButtonSpan");e&&(e.querySelector(".message").innerHTML=t,(e=e.parentElement.querySelector(".embeddedServiceIcon"))&&(e.style.display=i?"inline-block":"none"))},n.prototype.prepareDOM=function(){this.domInitInProgress||(this.domInitInProgress=!0,this.appendIFrame())},n.prototype.addSessionHandlers=function(){this.addMessageHandler("session.onLoad",function(){this.postMessage("session.get",this.storageKeys)}.bind(this)),this.addMessageHandler("session.sessionData",function(t){this.resumeInitWithSessionData(t)}.bind(this)),this.addMessageHandler("session.deletedSessionData",function(t){-1<t.indexOf("CHASITOR_SERIALIZED_KEY")&&(this.loginPendingSerializedData=void 0)}.bind(this)),this.addMessageHandler("session.updateMaster",function(t){t&&(t.isMaster?sessionStorage.setItem(this.settings.storageDomain+"MASTER_DEPLOYMENT_ID",this.settings.deploymentId):sessionStorage.removeItem(this.settings.storageDomain+"MASTER_DEPLOYMENT_ID"),this.isMasterAndHasSlaves=1<t.activeChatSessions&&t.isMaster,embedded_svc&&embedded_svc.liveAgentAPI&&(embedded_svc.liveAgentAPI.browserSessionInfo=t))}.bind(this))},n.prototype.addMetaTag=function(t,e){var i=document.createElement("meta");i.name=t,i.content=e,document.head.appendChild(i)},n.prototype.init=function(t,e,i,n,s,o){if(this.settings.baseCoreURL=t,this.settings.communityEndpointURL=e,this.settings.gslbBaseURL=i||t,this.settings.orgId=n,this.settings.releaseVersion="5.0",this.settings.eswConfigDevName=s,this.mergeSettings(o||{}),this.adjustCommunityStorageDomain(),"string"!=typeof this.settings.baseCoreURL)throw new Error("Base core URL value must be a string.");if(!this.isOrganizationId(this.settings.orgId))throw new Error("Invalid OrganizationId Parameter Value: "+this.settings.orgId);embedded_svc.utils?this.finishInit():this.loadScriptFromDirectory("utils","common",this.finishInit.bind(this))},n.prototype.finishInit=function(){if(this.storedEventHandlers&&(Object.getOwnPropertyNames(this.storedEventHandlers).forEach(function(e){this.storedEventHandlers[e].forEach(function(t){embedded_svc.utils.addEventHandler(e,t)})}.bind(this)),this.storedEventHandlers={}),!embedded_svc.utils.fireEvent("validateInit",function(t){return-1!==t.indexOf(!1)},this.settings)){if(this.checkForNativeFunctionOverrides(),this.settings.appendHelpButton&&this.loadCSS(),!this.settings.targetElement)throw new Error("No targetElement specified");this.settings.iframeURL=this.settings.gslbBaseURL+"/embeddedservice/"+this.settings.releaseVersion+(this.settings.devMode?"/eswDev.html":"/esw.html")+"?parent="+document.location.href,this.addSessionHandlers(),this.loadFeatures(this.onFeatureScriptsLoaded.bind(this)),embedded_svc.utils.fireEvent("afterInit",void 0,this.settings)}},n.prototype.onFeatureScriptsLoaded=function(){"complete"===document.readyState?setTimeout(this.prepareDOM.bind(this),1):document.addEventListener?(document.addEventListener("DOMContentLoaded",this.prepareDOM.bind(this),!1),window.addEventListener("load",this.prepareDOM.bind(this),!1)):window.attachEvent?window.attachEvent("onload",this.prepareDOM.bind(this)):this.log("No available event model. Exiting.")},n.prototype.checkForNativeFunctionOverrides=function(){[{name:"document",object:document,functions:["addEventListener","createAttribute","createComment","createDocumentFragment","createElementNS","createTextNode","createRange","getElementById","getElementsByTagName","getElementsByClassName","querySelector","querySelectorAll","removeEventListener"]},{name:"window",object:window,functions:["addEventListener","clearTimeout","dispatchEvent","open","removeEventListener","requestAnimationFrame","setInterval","setTimeout"]}].forEach(function(e){e.functions.forEach(function(t){t in e.object&&!this.isNativeFunction(e.object,t)&&this.warning("Embedded Service Chat may not function correctly with this native JS function modified: "+e.name+"."+t,!0)}.bind(this))}.bind(this))},n.prototype.isNativeFunction=function(t,e){return Function.prototype.toString.call(t[e]).match(/\[native code\]/)},n.prototype.onHelpButtonClick=function(){if(!this.componentInitInProgress&&!document.getElementsByClassName("embeddedServiceSidebar").length){this.componentInitInProgress=!0;try{this.checkAuthentication(),embedded_svc.utils.fireEvent("onHelpButtonClick")}catch(t){throw this.componentInitInProgress=!1,t}}},n.prototype.resumeInitWithSessionData=function(t){var e=embedded_svc.utils.fireEvent("sessionDataRetrieved",function(t){return-1!==t.indexOf(!0)},t),i=!1,n=!1;this.settings.linkAction.valid?i=!0:e?(this.log("Existing session found. Continuing with data: "+t),n=i=!0,embedded_svc.menu&&embedded_svc.menu.hideTopContainer()):this.componentInitInProgress&&(i=!0),this.hasSessionDataLoaded=!0,t[d]&&(this.auth.oauthToken=t[d]),this.loginPendingSerializedData=n?t:void 0,i&&(this.componentInitInProgress=!0,this.checkAuthentication()),this.settings.appendHelpButton&&this.appendHelpButton(this.settings.displayHelpButton&&!e)},n.prototype.checkAuthentication=function(){!this.isAuthenticationRequired||this.settings.allowGuestUsers||this.auth.oauthToken?(this.loginButtonPressed||this.componentInitInProgress)&&this.initLightningOut(this.loginPendingSerializedData):embedded_svc.utils.fireEvent("requireauth")},n.prototype.postMessage=function(t,e){e={domain:this.settings.storageDomain,data:e,method:t},t=this.getESWFrame();t?t.postMessage(e,this.settings.iframeURL):this.outboundMessagesAwaitingIframeLoad.push(e)},n.prototype.setSessionData=function(t,e){var i;"object"===a(t)?i=t:(i={})[t]=e,this.postMessage("session.set",i)},n.prototype.deleteSessionData=function(t){t=Array.isArray(t)?t:[t];this.postMessage("session.delete",t)},n.prototype.defineFeature=function(t,e){this.featureScripts[t]=e},n.prototype.registerStorageKeys=function(t){"string"==typeof t?this.storageKeys.push(t):t.forEach(function(t){this.storageKeys.push(t)}.bind(this))},n.prototype.addMessageHandler=function(t,e){this.messageHandlers[t]&&this.warning("Replacing an existing handler for message type "+t),this.messageHandlers[t]=e},n.prototype.loadStorageScript=function(t){this.isIframeReady?this.postMessage("script.load",t):this.iframeScriptsToLoad.push(t)},n.prototype.loadScriptFromDirectory=function(t,e,i,n){var s=e.toLowerCase(),o=document.createElement("script"),e=this.settings.gslbBaseURL;o.type="text/javascript",o.src=[e,"embeddedservice",n?void 0:this.settings.releaseVersion,t,s+(this.settings.devMode?"":".min")+".js"].filter(function(t){return Boolean(t)}).join("/"),i&&(o.onload=i),document.body.appendChild(o)},n.prototype.loadFeatures=function(e){this.settings.enabledFeatures.forEach(function(t){"base"!==t&&-1===this.availableFeatures.indexOf(t.toLowerCase())&&this.loadFeatureScript(t,e)}.bind(this))},n.prototype.addEventHandler=function(t,e){window.embedded_svc&&embedded_svc.utils?embedded_svc.utils.addEventHandler(t,e):(this.storedEventHandlers[t]||(this.storedEventHandlers[t]=[]),this.storedEventHandlers[t].push(e))},n.prototype.setupMessageListener=function(){window.addEventListener("message",function(t){var e,i=t.data,n=t.origin.split(":")[1].replace("//","");i&&i.method&&embedded_svc.isMessageFromSalesforceDomain(n)&&("session.onLoad"===i.method&&-1===this.settings.iframeURL.indexOf(n)&&(n=this.settings.iframeURL.split("/")[2],e=t.origin.split("/")[2],this.settings.iframeURL=this.settings.iframeURL.replace(n,e)),e=i.method.split(".")[0].toLowerCase(),-1===this.availableFeatures.indexOf(e)?(this.pendingMessages[e]||(this.pendingMessages[e]=[]),this.pendingMessages[e].push({direction:"incoming",payload:i})):this.handleMessage(i))}.bind(this),!1)},n.prototype.handleMessage=function(t){this.messageHandlers[t.method]?this.messageHandlers[t.method](t.data):this.log("Unregistered method "+t.method+" received.")},n.prototype.isMessageFromSalesforceDomain=function(e){var i;return!(!r()||e!==document.domain)||(i=function(t,e){return-1!==t.indexOf(e,t.length-e.length)},o.some(function(t){return i(e,t)}))},n.prototype.isCommunityDomain=function(t){return".force.com"===t.substr(-".force.com".length)},n.prototype.isSamePageNavigation=function(){var t,e=document.domain;return(e=this.isCommunityDomain(document.domain)&&(t=e+"/"+window.location.pathname.split("/")[1])===this.settings.storageDomain?t:e).substr(-this.settings.storageDomain.length)===this.settings.storageDomain},n.prototype.addDefaultSetting=function(t,e){this.defaultSettings[t]=e},n.prototype.onButtonStatusChange=function(){var t,e=document.querySelector(".embeddedServiceHelpButton button");embedded_svc.menu&&embedded_svc.menu.onAgentAvailabilityChange(),e&&(t=e.querySelector(".message"))&&(this.isButtonDisabled?(e.onclick=function(){},e.classList.remove("helpButtonEnabled"),e.classList.add("helpButtonDisabled"),t.innerHTML=this.settings.disabledMinimizedText):(e.onclick=this.onHelpButtonClick.bind(this),e.classList.remove("helpButtonDisabled"),e.classList.add("helpButtonEnabled"),t.innerHTML=this.settings.defaultMinimizedText))},n.prototype.hideHelpButton=function(){var t=document.querySelector(".embeddedServiceHelpButton");t&&(t.style.display="none")},n.prototype.showHelpButton=function(){var t=document.querySelector(".embeddedServiceHelpButton");t&&(t.style.display="")},n.prototype.setDefaultButtonText=function(t,e,i,n){this.settings.entryFeature===t&&(this.settings.defaultMinimizedText=this.settings.defaultMinimizedText||e,this.settings.disabledMinimizedText=this.settings.disabledMinimizedText||i,this.settings.defaultAssistiveText=this.settings.defaultAssistiveText||n||"")},n.prototype.setDefaultShowIcon=function(t,e){this.settings.entryFeature===t&&void 0===this.settings.showIcon&&(this.settings.showIcon=e)},n.prototype.registerLinkAction=function(t,e){var i=this.settings.linkAction;this.validLinkActions[t]||(this.validLinkActions[t]=[]),-1===this.validLinkActions[t].indexOf(e)&&this.validLinkActions[t].push(e),i.feature&&i.name&&i.feature.toLowerCase()===t.toLowerCase()&&i.name.toLowerCase()===e.toLowerCase()&&(i.valid=!0,i.feature=t,this.settings.entryFeature=t)},n.prototype.setLinkAction=function(e,i,t){var n=Object.keys(this.validLinkActions).filter(function(t){return t.toLowerCase()===e.toLowerCase()})[0];n?(this.settings.linkAction.feature=n,this.settings.linkAction.name=this.validLinkActions[n].filter(function(t){return t.toLowerCase()===i.toLowerCase()})[0],this.settings.linkAction.valid=void 0!==this.settings.linkAction.name,this.settings.linkActionParameters=t):this.settings.linkAction.valid=!1},n.prototype.getLinkActionData=function(){window.location.search.replace(/([a-zA-Z0-9._]+)=([^&\s]+)/g,function(t,e,i){var n=e.toLowerCase();0===n.indexOf("snapins.")&&("action"===(e=n.replace("snapins.",""))?2===(n=i.split(".")).length&&(this.settings.linkAction.feature=n[0],this.settings.linkAction.name=n[1]):this.settings.linkActionParameters[e.toLowerCase()]=i)}.bind(this))},n.prototype.requireAuthentication=function(){var t=document.createElement("script"),e=document.createElement("style"),i=document.querySelector(this.settings.loginTargetQuerySelector);if(this.isAuthenticationRequired=!0,"https:"!==window.location.protocol&&!this.settings.devMode)throw this.settings.displayHelpButton=!1,new Error("Snap-in authentication requires HTTPS.");if(!this.settings.useCustomAuthentication){if(!this.settings.loginClientId||!this.settings.loginRedirectURL||!this.settings.loginTargetQuerySelector)throw new Error("Authentication in Snap-ins requires these valid settings params: loginClientId, loginRedirectURL, loginTargetQuerySelector.");if(!i)throw new Error("loginTargetQuerySelector is not a valid DOM element.");this.loginButtonPressed=!1,i.addEventListener("click",function(){this.loginButtonPressed=!0}.bind(this)),this.addMetaTag("salesforce-community",this.settings.communityEndpointURL),this.addMetaTag("salesforce-client-id",this.settings.loginClientId),this.addMetaTag("salesforce-redirect-uri",this.settings.loginRedirectURL),this.addMetaTag("salesforce-mode","popup"),this.addMetaTag("salesforce-target",this.settings.loginTargetQuerySelector),this.addMetaTag("salesforce-login-handler","__snapinsLoginCallback"),this.addMetaTag("salesforce-logout-handler","__snapinsLogoutCallback"),embedded_svc.utils.addEventHandler("requireauth",function(){var t=setInterval(function(){window.SFIDWidget&&(clearInterval(t),window.SFIDWidget.openid_response?window.__snapinsLoginCallback():window.SFIDWidget.login())},100)}),embedded_svc.utils.addEventHandler("autherror",function(t){var e;window.SFIDWidget&&(this.loginButtonPressed=!0,window.SFIDWidget.logout(),e=setInterval(function(){window.SFIDWidget.config&&(clearInterval(e),embedded_svc.utils.fireEvent("requireauth"))}.bind(this,e),100))}.bind(this)),window.__snapinsLoginCallback=function(){var t=document.querySelector(this.settings.loginTargetQuerySelector),e=document.createElement("button");(this.loginButtonPressed||this.componentInitInProgress)&&(t.innerHTML=""),e.className="authenticationStart",e.innerHTML=this.settings.authenticationStartLabel,e.addEventListener("click",this.onHelpButtonClick.bind(this)),t.appendChild(e),this.auth.oauthToken=window.SFIDWidget.openid_response.access_token}.bind(this),window.__snapinsLogoutCallback=function(){this.auth.oauthToken=void 0,window.SFIDWidget.init()}.bind(this),document.head.appendChild(e),e.sheet.insertRule(".sfid-logout { display: none; }",0),t.type="text/javascript",t.src=this.settings.communityEndpointURL+"/servlet/servlet.loginwidgetcontroller?type=javascript_widget"+(embedded_svc.settings.devMode?"&min=false":""),document.head.appendChild(t)}},n.prototype.requireSLDS=function(){var t,e;this.settings.requireSLDS=!0,this.settings.targetElement===document.body&&((e=document.createElement("div")).id="esw-snapin-target",document.body.appendChild(e),this.settings.targetElement=e),this.settings.targetElement.classList.add("slds-scope"),t=document.createElement("link"),e=this.settings.gslbBaseURL||this.settings.baseCoreURL,t.href=e+"/embeddedservice/"+this.settings.releaseVersion+"/esw-slds"+(this.settings.devMode?"":".min")+".css",t.type="text/css",t.rel="stylesheet",document.getElementsByTagName("head")[0].appendChild(t)},n.prototype.validateHeaderValue=function(t){return/^[0-9a-zA-Z!#$%&'*+-.^_`|~" ]*$/g.test(t)},n.prototype.isLanguageRtl=function(t){if(t&&""!==t.trim())switch(t.substring(0,2)){case"ar":case"fa":case"he":case"iw":case"ji":case"ur":case"yi":return!0;default:return!1}},n.prototype.isDesktop=function(){return-1===navigator.userAgent.indexOf("Mobi")},window.embedded_svc=new n,Object.getOwnPropertyNames(s).forEach(function(e){var i=s[e];"object"===i?(window.embedded_svc[e]={},Object.keys(i).forEach(function(t){window.embedded_svc[e][t]=i[t]})):window.embedded_svc[e]=i})},45:function(t,e,i){for(var n=i(22),s=i(16),o=i(9),r=i(2),a=i(11),d=i(25),i=i(1),c=i("iterator"),u=i("toStringTag"),l=d.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},g=s(h),p=0;p<g.length;p++){var f,m=g[p],v=h[m],b=r[m],y=b&&b.prototype;if(y&&(y[c]||a(y,c,l),y[u]||a(y,u,m),d[m]=l,v))for(f in n)y[f]||o(y,f,n[f],!0)}},47:function(t,e,i){var n=i(17),s=i(16);i(99)("keys",function(){return function(t){return s(n(t))}})},48:function(t,e){e.f=Object.getOwnPropertySymbols},63:function(t,e,i){"use strict";var E=i(3),L=i(17),I=i(19),A=i(41),T=i(50),_=i(35),C=Math.max,M=Math.min,D=Math.floor,O=/\$([$&`']|\d\d?|<[^>]*>)/g,P=/\$([$&`']|\d\d?)/g;i(36)("replace",2,function(s,o,S,w){return[function(t,e){var i=s(this),n=null==t?void 0:t[o];return void 0!==n?n.call(t,i,e):S.call(String(i),t,e)},function(t,e){var i=w(S,t,this,e);if(i.done)return i.value;var n=E(t),s=String(this),o="function"==typeof e;o||(e=String(e));var r,a=n.global;a&&(r=n.unicode,n.lastIndex=0);for(var d=[];;){var c=_(n,s);if(null===c)break;if(d.push(c),!a)break;""===String(c[0])&&(n.lastIndex=T(s,I(n.lastIndex),r))}for(var u,l="",h=0,g=0;g<d.length;g++){for(var c=d[g],p=String(c[0]),f=C(M(A(c.index),s.length),0),m=[],v=1;v<c.length;v++)m.push(void 0===(u=c[v])?u:String(u));var b,y=c.groups,y=o?(b=[p].concat(m,f,s),void 0!==y&&b.push(y),String(e.apply(void 0,b))):function(o,r,a,d,c,t){var u=a+o.length,l=d.length,e=P;return void 0!==c&&(c=L(c),e=O),S.call(t,e,function(t,e){var i;switch(e.charAt(0)){case"$":return"$";case"&":return o;case"`":return r.slice(0,a);case"'":return r.slice(u);case"<":i=c[e.slice(1,-1)];break;default:var n=+e;if(0==n)return t;if(l<n){var s=D(n/10);return 0!==s&&s<=l?void 0===d[s-1]?e.charAt(1):d[s-1]+e.charAt(1):t}i=d[n-1]}return void 0===i?"":i})}(p,s,f,m,y,e);h<=f&&(l+=s.slice(h,f)+y,h=f+p.length)}return l+s.slice(h)}]})},64:function(t,e,i){var n=i(2),s=i(15),o=i(23),r=i(65),a=i(7).f;t.exports=function(t){var e=s.Symbol||(s.Symbol=!o&&n.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:r.f(t)})}},65:function(t,e,i){e.f=i(1)},66:function(t,e,i){var n=i(14);t.exports=Array.isArray||function(t){return"Array"==n(t)}},68:function(t,e,i){"use strict";function n(t){var e=c(t,!1);if("string"==typeof e&&2<e.length){var i,n,s=(e=v?e.trim():g(e,3)).charCodeAt(0);if(43===s||45===s){if(88===(t=e.charCodeAt(2))||120===t)return NaN}else if(48===s){switch(e.charCodeAt(1)){case 66:case 98:i=2,n=49;break;case 79:case 111:i=8,n=55;break;default:return+e}for(var o,r=e.slice(2),a=0,d=r.length;a<d;a++)if((o=r.charCodeAt(a))<48||n<o)return NaN;return parseInt(r,i)}}return+e}var s=i(2),o=i(12),r=i(14),a=i(70),c=i(38),d=i(4),u=i(34).f,l=i(51).f,h=i(7).f,g=i(105).trim,p=y=s.Number,f=y.prototype,m="Number"==r(i(49)(f)),v="trim"in String.prototype;if(!y(" 0o1")||!y("0b1")||y("+0x1")){for(var b,y=function(t){var t=arguments.length<1?0:t,e=this;return e instanceof y&&(m?d(function(){f.valueOf.call(e)}):"Number"!=r(e))?a(new p(n(t)),e,y):n(t)},S=i(5)?u(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;S.length>w;w++)o(p,b=S[w])&&!o(y,b)&&h(y,b,l(p,b));(y.prototype=f).constructor=y,i(9)(s,"Number",y)}},95:function(t,e,i){function n(t){a(t,s,{value:{i:"O"+ ++d,w:{}}})}var s=i(24)("meta"),o=i(6),r=i(12),a=i(7).f,d=0,c=Object.isExtensible||function(){return!0},u=!i(4)(function(){return c(Object.preventExtensions({}))}),l=t.exports={KEY:s,NEED:!1,fastKey:function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!r(t,s)){if(!c(t))return"F";if(!e)return"E";n(t)}return t[s].i},getWeak:function(t,e){if(!r(t,s)){if(!c(t))return!0;if(!e)return!1;n(t)}return t[s].w},onFreeze:function(t){return u&&l.NEED&&c(t)&&!r(t,s)&&n(t),t}}},96:function(t,e,i){var a=i(16),d=i(48),c=i(33);t.exports=function(t){var e=a(t),i=d.f;if(i)for(var n,s=i(t),o=c.f,r=0;s.length>r;)o.call(t,n=s[r++])&&e.push(n);return e}},97:function(t,e,i){var n=i(20),s=i(34).f,o={}.toString,r="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return r&&"[object Window]"==o.call(t)?function(t){try{return s(t)}catch(t){return r.slice()}}(t):s(n(t))}},99:function(t,e,i){var s=i(8),o=i(15),r=i(4);t.exports=function(t,e){var i=(o.Object||{})[t]||Object[t],n={};n[t]=e(i),s(s.S+s.F*r(function(){i(1)}),"Object",n)}}}]);
