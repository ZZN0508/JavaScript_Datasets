(()=>{var a;window,a={properties:{debug:!1,load:!1,running:!1,maxTries:10,delayTry:1e3,readyEvent:"readyAttribution",runEvent:"runAttribution",initEvent:"initAttribution",default:"Default",defaultCampaignId:"100000000",prodDomains:["www.outbrain.com","my.outbrain.com","careers.outbrain.com","lp.outbrain.com"],queryParams:["utm_medium","utm_source","utm_campaign","utm_term","utm_content","utm_position","utm_placement","utm_device","utm_network","utm_ad","inapp","gclid","adgroupid","matchtype","campaignid","keyword","os_utm_source","spreportid","spjobid","spuserid","spmailingid","b_id","page","domain","permalink"],cookie:{prefix:"obca",seporator:"_",path:"/",localhost:"localhost",default:"",expire:{permanent:342144e5,session:18e5,interval:15e5},cookies:{visitor:"vid",session:"sid",data:"data"}},old:{sep:"--s-e-p--",default:"Default",error:"Error",cookies:{medium:"obCAMedium",truemedium:"obCATrueMedium",source:"obCASource",campaign:"obCACampaign",content:"obCAContent",term:"obCATerm",landingpage:"obCALP",referral:"obCAReferral",current:"obCACP",session:"obCASession"}},mediumSources:{direct:"Direct",organic:"Organic",social:"Social",outbrain:"Outbrain",paidOutbrain:"Paid Outbrain",organicSeo:"Organic SEO",referral:"Generic Referral",organicBrand:"Organic Brand"},referralMedium:[{regex:/^(Default)?$/,medium:function(){return a.properties.mediumSources.direct}},{regex:/^(www\.google\.[a-zA-Z0-9\.]+|www\.bing\.com|search\.aol\.com|search\.yahoo\.com|www\.ask\.com|www\.baidu\.com|www\.yandex\.com|search\.conduit\.com|isearch\.avg\.com|isearch\.babylon\.com|search\.bt\.com|search\.centurylink\.com|search\.chatzum\.com|i?search\.nation\.com|search\.xfinity\.com|search\.gboxapp\.com|search\.genieo\.com|search\.iminent\.com|search\.incredibar\.com|(int\.)?search\.mywebsearch\.com|search\.naver\.com|search\.phpnuke\.org|search\.sweetim\.com)$/,medium:function(){return a.properties.mediumSources.organic}},{regex:/^(plancast\.com|www\.quora\.com|foursquare\.com|www\.youtube\.com|www\.stumbleupon\.com|plus\.google\.com|twitter\.com|www\.facebook\.com|www\.linkedin\.com|www\.pinterest\.com|www\.reddit\.com|www\.fark\.com)$/,medium:function(){return a.properties.mediumSources.social}},{regex:/^(paid\.outbrain\.com)$/,medium:function(){return a.properties.mediumSources.paidOutbrain}},{regex:/^(hellobiz\.fr|it\.toolbox\.com|www\.infos\.fr|www\.curata\.com|www\.happies\.fr|www\.shoutmeloud\.com|www\.convinceandconvert\.com|socialmediaweek\.org|www\.wordstream\.com|www\.jeffbullas\.com|www\.blogginpro\.com|www\.searchenginejournal\.com|searchenginewatch\.com|www\.business2community\.com|www\.socialmediatoday\.com|www\.problogger\.net)$/,medium:function(){return a.properties.mediumSources.organicSeo}},{regex:/^([a-zA-Z0-9\.\-\_]+\.)?outbrain.(com|cc|co\.jp|co\.uk|com\.au|com\.br|de|es|eu|fr|hk|in|is|it|kr|mx|org|sg|us)$/,medium:function(){return a.properties.mediumSources.outbrain}}],ignoreMedium:function(){return[a.properties.mediumSources.direct,a.properties.mediumSources.outbrain,a.properties.mediumSources.organicBrand]},homepageHosts:["www.outbrain.com","www-test.outbrain.com","www.outbrain.local"],interval:!1},functions:{event:{bind:function(e,t,r){window.addEventListener?e.addEventListener(t,r,!1):window.attachEvent?e.attachEvent("on"+t,r):e["on"+t]=r},trigger:function(e,t){var r;document.createEvent?(r=document.createEvent("HTMLEvents")).initEvent(t,!0,!0):document.createEventObject&&((r=document.createEventObject()).eventType=t),r.eventName=t,e.dispatchEvent?e.dispatchEvent(r):e.fireEvent&&htmlEvents["on"+t]?e.fireEvent("on"+r.eventType,r):e[t]?e[t]():e["on"+t]&&e["on"+t]()},unbind:function(e,t,r){window.removeEventListener?e.removeEventListener(t,r,!1):window.detachEvent?e.detachEvent("on"+t,r):e.delete("on"+t)}},query:{get:function(e){e=e.replace(/[\[\]]/g,"\\$&");e=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(window.location.href);return!!e&&!!e[2]&&decodeURIComponent(e[2].replace(/\+/g," "))},set:function(e){var t,r=[];for(t in e)e.hasOwnProperty(t)&&r.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return r.join("&")}},helpers:{log:function(e){a.properties.debug&&console.log(e)},isJson:function(e){if("[object Object]"===Object.prototype.toString.call(e))return!0;try{var t=JSON.parse(e);return"[object Object]"===Object.prototype.toString.call(t)}catch(e){return!1}},parseJson:function(e){return"[object Object]"===Object.prototype.toString.call(e)?e:!!a.functions.helpers.isJson(e)&&JSON.parse(e)},parseUrl:function(e){if(e){if(document&&document.createElement){var t=document.createElement("a");return t.href=e,{hash:t.hash,host:t.host,hostname:t.hostname,href:t.href,origin:t.origin,pathname:t.pathname,port:t.port,protocol:t.protocol,search:t.search}}t=new RegExp("^https?://([^/]*).*$"),t=e.match(t);if(1<t.length)return{hostname:t[1]}}return{}},shortenUrl:function(e){if(!e)return e;if(-1===e.indexOf("?"))return e;var t=[];t.push(e.split("?")[0]),t.push(e.substring(e.indexOf("?")+1));for(var r=t[1].split("&"),i=[],n=0;n<r.length;n++){var o=-1===r[n].indexOf("=")?r[n]:r[n].split("=")[0],s=-1===r[n].indexOf("=")?"":r[n].substring(r[n].indexOf("=")+1);s&&-1<a.properties.queryParams.indexOf(o.toLowerCase())&&i.push(o+"="+s)}t=t[0];return 0<i.length&&(t+="?"+i.join("&")),200<t.length?t.substring(0,200)+"...":t},getAbsoluteHref:function(e){var t=document.createElement("a");return t.href=e,t.href},getServiceHostname:function(){var e="my2.outbrain.com";return"https://"+(e=-1!==a.properties.prodDomains.indexOf(window.location.hostname)?"my.outbrain.com":e)+"/site-tracking"},getDeviceType:function(){if(navigator&&navigator.userAgent){if(new RegExp("(mobile)|(iPhone)|(iPod)|(blackberry)|(windows phone)","i").test(navigator.userAgent))return"Mobile";if(new RegExp("(tablet)|(iPad)|(android)|(Bada)|(samsung)|(Kindle)","i").test(navigator.userAgent))return"Tablet";if(new RegExp("(windows nt)|(linux)|(os x)|(cros)","i").test(navigator.userAgent))return"Desktop"}return"Unknown"},ajaxRequest:function(t,r,i,n,o){o=o||0,i=i||"GET",n=a.functions.helpers.parseJson(n)||{};try{var s,e=window.XMLHttpRequest||window.ActiveXObject||!1;e?((s=new e("MSXML2.XMLHTTP.3.0")).open(i,a.functions.helpers.getServiceHostname()+t,1),s.setRequestHeader("Content-Type","application/json"),s.onreadystatechange=function(){var e;3<s.readyState&&r&&(200===s.status?(e=a.functions.helpers.parseJson(s.responseText))?r(null,e):(a.functions.helpers.log({message:"Error: response not a json"}),o>a.properties.maxTries?("undefined"!=typeof _kmq&&_kmq.push(["record","",{attributionErrorName:"Error: response not a json",attributionErrorMessage:s.responseText,attributionErrorStatus:s.status,attributionErrorUrl:t,attributionErrorMethod:i,attributionErrorData:JSON.stringify(n)}]),r(new Error("Error: response not a json"))):(o++,setTimeout(function(){a.functions.helpers.ajaxRequest(t,r,i,n,o)},a.properties.delayTry))):(a.functions.helpers.log({message:"Error: response status not 200 on "+t}),o>a.properties.maxTries?("undefined"!=typeof _kmq&&_kmq.push(["record","Attribution Error",{attributionErrorName:"Response Status not 200",attributionErrorMessage:s.responseText,attributionErrorStatus:s.status,attributionErrorUrl:t,attributionErrorMethod:i,attributionErrorData:JSON.stringify(n)}]),r(new Error("Error: response status not 200 on "+t))):(o++,setTimeout(function(){a.functions.helpers.ajaxRequest(t,r,i,n,o)},a.properties.delayTry))))},s.send(JSON.stringify(n))):(a.functions.helpers.log({message:"Error: No Request"}),o>a.properties.maxTries?("undefined"!=typeof _kmq&&_kmq.push(["record","Attribution Error",{attributionErrorName:"No Request",attributionErrorMessage:"No Request",attributionErrorUrl:t,attributionErrorMethod:i,attributionErrorData:JSON.stringify(n)}]),r(new Error("Error: No Request"))):(o++,setTimeout(function(){a.functions.helpers.ajaxRequest(t,r,i,n,o)},a.properties.delayTry)))}catch(e){a.functions.helpers.log({message:"AJAX request error"}),o>a.properties.maxTries?("undefined"!=typeof _kmq&&_kmq.push(["record","Attribution Error",{attributionErrorName:e.name,attributionErrorMessage:e.message,attributionErrorUrl:t,attributionErrorMethod:i,attributionErrorData:JSON.stringify(n)}]),r(e)):(o++,setTimeout(function(){a.functions.helpers.ajaxRequest(t,r,i,n,o)},a.properties.delayTry))}},attributionException:function(e,t){this.data=e||{},this.type=t||"event"},exception:function(e,t){throw new a.functions.helpers.attributionException(e,t)},refresh:function(e,t,r){window.OBAttributionTracking=window.OBAttributionTracking||{},window.OBAttributionTracking.properties=window.OBAttributionTracking.properties||{},window.OBAttributionTracking.properties.data=window.OBAttributionTracking.properties.data||{};var i=window.OBAttributionTracking.properties.data.current||document.referrer||a.properties.default;window.OBAttributionTracking=window.OBAttributionTracking||{},window.OBAttributionTracking.properties={},window.OBAttributionTracking.properties.vid=e,window.OBAttributionTracking.properties.sid=t,window.OBAttributionTracking.properties.data={},window.OBAttributionTracking.properties.data.previous=i,window.OBAttributionTracking.properties.data.current=r.current||a.properties.default,window.OBAttributionTracking.properties.data.landingpage=r.landingpage||a.properties.default,window.OBAttributionTracking.properties.data.referral=r.referral||a.properties.default,window.OBAttributionTracking.properties.data.medium=r.medium||a.properties.default,window.OBAttributionTracking.properties.data.truemedium=r.truemedium||a.properties.default,window.OBAttributionTracking.properties.data.source=r.source||a.properties.default,window.OBAttributionTracking.properties.data.campaign=r.campaign||a.properties.default,window.OBAttributionTracking.properties.data.campaignid=r.campaignid||a.properties.defaultCampaignId,window.OBAttributionTracking.properties.data.term=r.term||a.properties.default,window.OBAttributionTracking.properties.data.content=r.content||a.properties.default},event:function(r,e){(e=e||{}).generics=e.generics||{},e.generics.eventGroup=e.generics.eventGroup||"Marketing",e.generics.visitorId=window.OBAttributionTracking.properties.vid,e.generics.sessionId=window.OBAttributionTracking.properties.sid,e.generics.eventTypeId=e.generics.eventTypeId||100,e.generics.currentUrl=e.generics.currentUrl||window.OBAttributionTracking.properties.data.current,e.generics.previousUrl=e.generics.previousUrl||(a.properties.default===window.OBAttributionTracking.properties.data.previous?"":window.OBAttributionTracking.properties.data.previous),e.attributes=e.attributes||{},a.functions.helpers.ajaxRequest("/event",function(e,t){!e&&t?r&&r(null,t):(e=e||"No EID was generated",r&&r(e))},"POST",e)},kiss:function(e,t){"undefined"!=typeof _kmq&&(e=e||"New visit",(t=a.functions.helpers.parseJson(t)||{}).AT_Current_Page_URL=window.OBAttributionTracking.properties.data.current||a.properties.default,t.AT_Previous_Page_URL=window.OBAttributionTracking.properties.data.previous||a.properties.default,t.AT_Landing_Page_URL=window.OBAttributionTracking.properties.data.landingpage||a.properties.default,t.AT_Referral_URL=window.OBAttributionTracking.properties.data.referral||a.properties.default,t.AT_Medium=window.OBAttributionTracking.properties.data.medium||a.properties.default,t.AT_True_Medium=window.OBAttributionTracking.properties.data.truemedium||a.properties.default,t.AT_Source=window.OBAttributionTracking.properties.data.source||a.properties.default,t.AT_Campaign=window.OBAttributionTracking.properties.data.campaign||a.properties.default,t.AT_Campaign_Id=window.OBAttributionTracking.properties.data.campaignid||a.properties.defaultCampaignId,t.AT_Term=window.OBAttributionTracking.properties.data.term||a.properties.default,t.AT_Content=window.OBAttributionTracking.properties.data.content||a.properties.default,t.AT_Visit_Device=a.functions.helpers.getDeviceType(),_kmq.push(["record",e,t]))},gtm:function(e){"undefined"!=typeof dataLayer&&((e=a.functions.helpers.parseJson(e)||{}).event=e.event||"New visit",e.caCurrent=window.OBAttributionTracking.properties.data.current||a.properties.default,e.caPrevious=window.OBAttributionTracking.properties.data.previous||a.properties.default,e.caLandingpage=window.OBAttributionTracking.properties.data.landingpage||a.properties.default,e.caReferral=window.OBAttributionTracking.properties.data.referral||a.properties.default,e.caMedium=window.OBAttributionTracking.properties.data.medium||a.properties.default,e.caTruemedium=window.OBAttributionTracking.properties.data.truemedium||a.properties.default,e.caSource=window.OBAttributionTracking.properties.data.source||a.properties.default,e.caCmpaign=window.OBAttributionTracking.properties.data.campaign||a.properties.default,e.caCampaignid=window.OBAttributionTracking.properties.data.campaignid||a.properties.defaultCampaignId,e.caTerm=window.OBAttributionTracking.properties.data.term||a.properties.default,e.caContent=window.OBAttributionTracking.properties.data.content||a.properties.default,dataLayer.push(e))},old:function(){return{events:{visit:"New Visit",startRegistration:"Start Registration",completeRegistration:"Complete Registration"},recordEvent:function(e,t){(t=a.functions.helpers.parseJson(t)||{}).caCurrent=window.OBAttributionTracking.properties.data.current||a.properties.default,t.caPrevious=window.OBAttributionTracking.properties.data.previous||a.properties.default,t.caLandingpage=window.OBAttributionTracking.properties.data.landingpage||a.properties.default,t.caReferral=window.OBAttributionTracking.properties.data.referral||a.properties.default,t.caMedium=window.OBAttributionTracking.properties.data.medium||a.properties.default,t.caTruemedium=window.OBAttributionTracking.properties.data.truemedium||a.properties.default,t.caSource=window.OBAttributionTracking.properties.data.source||a.properties.default,t.caCmpaign=window.OBAttributionTracking.properties.data.campaign||a.properties.default,t.caCampaignid=window.OBAttributionTracking.properties.data.campaignid||a.properties.defaultCampaignId,t.caTerm=window.OBAttributionTracking.properties.data.term||a.properties.default,t.caContent=window.OBAttributionTracking.properties.data.content||a.properties.default,"undefined"!=typeof _kmq&&_kmq.push(["record",e,t])}}},store:function(e,t,r){window.OBAttributionTracking=window.OBAttributionTracking||{},window.OBAttributionTracking.exception=window.OBAttributionTracking.exception||a.functions.helpers.exception,a.functions.helpers.refresh(e,t,r),window.OBAttributionTracking.track=window.OBAttributionTracking.track||{},window.OBAttributionTracking.track.event=a.functions.helpers.event,window.OBAttributionTracking.track.kiss=a.functions.helpers.kiss,window.OBAttributionTracking.track.gtm=a.functions.helpers.gtm,window.OBCustomerAttribution=a.functions.helpers.old()}},cookies:{domain:function(){if(window&&window.location&&window.location.hostname){var e=window.location.hostname.split(".").reverse();if(1<e.length)return e[1]+"."+e[0]}return a.properties.cookie.localhost},name:function(e){return a.properties.cookie.prefix+a.properties.cookie.seporator+e},expire:function(e){var t=new Date;return t.setTime(t.getTime()+e),t.toUTCString()},get:function(e){for(var t=e+"=",r=document.cookie.split(";"),i=0;i<r.length;i++){for(var n=r[i];" "===n.charAt(0);)n=n.substring(1);if(0===n.indexOf(t))return decodeURIComponent(n.substring(t.length,n.length))}return!1},set:function(e,t,r){if(e){t=encodeURIComponent(t||""),(r=r||{}).path=r.path||a.properties.cookie.path,r.domain=r.domain||a.functions.cookies.domain();var i,n=e+"="+t;for(i in r)r.hasOwnProperty(i)&&(n+="; "+i+"="+r[i]);document.cookie=n}},delete:function(e){a.functions.cookies.set(e,"",{expires:a.functions.cookies.expire(-1)})}},visitor:{fetch:function(r){a.functions.helpers.ajaxRequest("/visitor",function(e,t){!e&&t&&t.uuid?r(null,t.uuid):r(e=e||"No VID was generated")},"POST")},set:function(e){a.functions.cookies.set(a.functions.cookies.name(a.properties.cookie.cookies.visitor),e,{expires:a.functions.cookies.expire(a.properties.cookie.expire.permanent)})},get:function(){return a.functions.cookies.get(a.functions.cookies.name(a.properties.cookie.cookies.visitor))},createOrExtend:function(r){var e=a.functions.visitor.get();e?(a.functions.visitor.set(e),a.functions.helpers.log({message:"Visitor ID exists, extending cookie",data:{vid:e}}),r(null,e)):a.functions.visitor.fetch(function(e,t){e?r(e):(a.functions.visitor.set(t),a.functions.helpers.log({message:"Visitor ID Fetched, creating cookie",data:{vid:t}}),r(null,t))})}},data:{isHomePage:function(){return-1<a.properties.homepageHosts.indexOf(window.location.hostname)&&"/"===window.location.pathname},mediumByReferral:function(){for(var e=a.functions.helpers.parseUrl(document.referrer).hostname||a.properties.default,t=0;t<a.properties.referralMedium.length;t++)if(a.properties.referralMedium[t].regex.test(e))return a.properties.referralMedium[t].medium()===a.properties.mediumSources.organic&&a.functions.data.isHomePage()?a.properties.mediumSources.organicBrand:a.properties.referralMedium[t].medium();return!1},truemedium:function(e,t){return t?e.truemedium||!1:a.functions.query.get("utm_medium")||a.functions.data.mediumByReferral()||a.properties.mediumSources.referral||!1},original:function(e,t){t=a.functions.data.truemedium(e,t);return e.medium&&t!==e.medium&&-1!==a.properties.ignoreMedium().indexOf(t)},medium:function(e,t){return t||a.functions.data.original(e,t)?e.medium||!1:a.functions.query.get("utm_medium")||a.functions.data.mediumByReferral()||a.properties.mediumSources.referral||!1},source:function(e,t){return t||a.functions.data.original(e,t)?e.source||!1:a.functions.query.get("utm_source")||a.functions.helpers.parseUrl(document.referrer).hostname||!1},campaign:function(e,t){return t||a.functions.data.original(e,t)?e.campaign||!1:a.functions.data.medium(e,t)===a.properties.mediumSources.organicSeo?document.referrer||!1:a.functions.query.get("utm_campaign")},campaignid:function(e,t){t=(a.functions.data.campaign(e,t)||"").split("--");if(0<t.length){t=parseInt(t[0]);if(!isNaN(t)&&9===(t=t.toString()).length)return t}return!1},term:function(e,t){return t||a.functions.data.original(e,t)?e.term||!1:a.functions.query.get("utm_term")},content:function(e,t){return t||a.functions.data.original(e,t)?e.content||!1:a.functions.query.get("utm_content")},referral:function(e,t){return t?e.referral||!1:document.referrer||!1},current:function(e){return e||window.location.href||!1},landingpage:function(e,t){return t?e.landingpage||!1:window.location.href||!1}},attribution:{set:function(e){if(a.functions.helpers.isJson(e)){for(var t in e)e.hasOwnProperty(t)&&!e[t]&&delete e[t];a.functions.cookies.set(a.functions.cookies.name(a.properties.cookie.cookies.data),JSON.stringify(e),{expires:a.functions.cookies.expire(a.properties.cookie.expire.permanent)})}return e},get:function(){return a.functions.helpers.parseJson(a.functions.cookies.get(a.functions.cookies.name(a.properties.cookie.cookies.data)))},session:function(){var e=a.functions.session.get();return e?(a.functions.helpers.log({message:"Session is active",data:{sid:e}}),!0):(a.functions.helpers.log({message:"No Session"}),!1)},calculate:function(e,t,r){var i={};return i.current=a.functions.helpers.shortenUrl(a.functions.data.current(r)),a.functions.helpers.log({message:"current",url:i.current}),i.referral=a.functions.helpers.shortenUrl(a.functions.data.referral(e,t)),a.functions.helpers.log({message:"referral",url:i.referral}),i.landingpage=a.functions.helpers.shortenUrl(a.functions.data.landingpage(e,t)),a.functions.helpers.log({message:"landingpage",url:i.landingpage}),i.medium=a.functions.data.medium(e,t),i.truemedium=a.functions.data.truemedium(e,t),i.source=a.functions.data.source(e,t),i.campaign=a.functions.data.campaign(e,t),i.campaignid=a.functions.data.campaignid(e,t),i.content=a.functions.data.content(e,t),i.term=a.functions.data.term(e,t),i}},session:{fetch:function(e,t,r){a.functions.helpers.ajaxRequest("/session",function(e,t){!e&&t&&t.uuid?r(null,t.uuid):r(e=e||"No SID was generated")},"POST",{visitor_id:e,ca_medium:t.medium||a.properties.default,ca_true_medium:t.truemedium||a.properties.default,ca_source:t.source||a.properties.default,ca_campaign:t.campaign||a.properties.default,ca_campaign_id:t.campaignid||a.properties.defaultCampaignId,ca_campaign_content:t.content||a.properties.default,ca_campaign_term:t.term||a.properties.default,ca_referring_url:t.referral||a.properties.default,ca_landing_page_url:t.landingpage||a.properties.default})},set:function(e){a.functions.cookies.set(a.functions.cookies.name(a.properties.cookie.cookies.session),e,{expires:a.functions.cookies.expire(a.properties.cookie.expire.session)})},get:function(){return a.functions.cookies.get(a.functions.cookies.name(a.properties.cookie.cookies.session))},createOrExtend:function(e,r,i){var t=a.functions.session.get();t?(a.functions.session.set(t),r=a.functions.attribution.set(r),a.functions.helpers.log({message:"Session ID exists, extending cookie",sid:t,data:r}),i(null,t)):a.functions.session.fetch(e,r,function(e,t){e?i(e):(a.functions.session.set(t),r=a.functions.attribution.set(r),a.functions.helpers.log({message:"Session ID generated",data:{sid:t,data:r}}),i(null,t,!0))})}},old:{set:function(){for(var e in a.properties.old.cookies)a.properties.old.cookies.hasOwnProperty(e)&&a.functions.cookies.delete(a.properties.old.cookies[e])},value:function(e){if(e){e=e.split(a.properties.old.sep);if(0<e.length&&e[0]!==a.properties.old.default&&e[0]!==a.properties.old.error)return decodeURIComponent(e[0])}return!1},get:function(){var e={};return e.medium=a.functions.old.value(a.functions.cookies.get(a.properties.old.cookies.medium)),e.truemedium=a.functions.old.value(a.functions.cookies.get(a.properties.old.cookies.truemedium)),e.source=a.functions.old.value(a.functions.cookies.get(a.properties.old.cookies.source)),e.campaign=a.functions.old.value(a.functions.cookies.get(a.properties.old.cookies.campaign)),e.content=a.functions.old.value(a.functions.cookies.get(a.properties.old.cookies.content)),e.term=a.functions.old.value(a.functions.cookies.get(a.properties.old.cookies.term)),e.landingpage=a.functions.old.value(a.functions.cookies.get(a.properties.old.cookies.landingpage)),e.referral=a.functions.old.value(a.functions.cookies.get(a.properties.old.cookies.referral)),e.current=a.functions.old.value(a.functions.cookies.get(a.properties.old.cookies.current)),e.session=a.functions.cookies.get(a.properties.old.cookies.session),!!e.medium&&e},session:function(){var e=a.functions.old.get();return e&&e.session?(a.functions.helpers.log({message:"Old Session is active"}),!0):(a.functions.helpers.log({message:"Old Session not active"}),!1)},upgrade:function(e,r){var i=a.functions.old.get();i?(a.functions.attribution.set(i),a.functions.helpers.log({message:"Old attribution cookies exist - updating cookies"}),a.functions.old.session()?(a.functions.helpers.log({message:"Old session is active fetching for sid"}),a.functions.session.fetch(e,i,function(e,t){e?r(e):(a.functions.session.set(t),a.functions.attribution.set(i),a.functions.helpers.log({message:"set sid for old active session",sid:t}),r())})):r(),a.functions.old.set()):r()}}},init:function(o,r){return a.functions.helpers.log({message:"OBAttribution init"}),a.properties.running?(a.functions.helpers.log({message:"OBAttribution init function running"}),a.functions.event.bind(window.document,a.properties.runEvent,function(e){e.target.removeEventListener(e.type,arguments.callee),o&&window.OBAttributionCallback&&o(window.OBAttributionCallback.error,window.OBAttributionCallback.data)})):(a.properties.running=!0,a.functions.helpers.log({message:"OBAttribution init function not running - starting to grab attribution"}),a.properties.interval&&(clearInterval(a.properties.interval),a.properties.interval=!1),a.functions.visitor.createOrExtend(function(e,n){return e?(a.functions.helpers.log({message:"No VID was generated",error:e}),o&&o(new Error("No VID was generated")),a.properties.running=!1,window.OBAttributionCallback={error:new Error("No VID was generated")},void a.functions.event.trigger(window.document,a.properties.runEvent)):void a.functions.old.upgrade(n,function(e){if(e)return a.functions.helpers.log({message:"Error upgrading cookies",error:e}),o&&o(new Error("Error upgrading cookies")),a.properties.running=!1,window.OBAttributionCallback={error:new Error("Error upgrading cookies")},void a.functions.event.trigger(window.document,a.properties.runEvent);var t=a.functions.session.get(),e=a.functions.attribution.get()||{},i=a.functions.attribution.calculate(e,t,r);a.functions.session.createOrExtend(n,i,function(e,t,r){return e?(a.functions.helpers.log({message:"No SID was generated",error:e}),o&&o(new Error("No SID was generated")),a.properties.running=!1,window.OBAttributionCallback={error:new Error("No SID was generated")},void a.functions.event.trigger(window.document,a.properties.runEvent)):(a.functions.helpers.log({message:"OBAttribution Finished",vid:n,sid:t,data:i}),a.functions.helpers.store(n,t,i),window.OBAttributionCallback={data:{vid:n,sid:t,data:i}},a.functions.event.trigger(window.document,a.properties.runEvent),a.properties.load||(a.functions.event.trigger(window.document,a.properties.initEvent,{data:{vid:n,sid:t,data:i}}),a.properties.load=!0),a.properties.interval=setInterval(function(){a.init()},a.properties.cookie.expire.interval),r?a.functions.helpers.event(function(e,t){e?a.functions.helpers.log({message:"No EID was generated",error:e}):(a.functions.helpers.log({message:"New Session event",eid:t}),a.functions.helpers.kiss(),a.functions.helpers.event(function(e,t){e?a.functions.helpers.log({message:"No EID was generated",error:e}):a.functions.helpers.log({message:"New Pageview event",eid:t})},{generics:{eventTypeId:43e3}}))}):a.functions.helpers.event(function(e,t){e?a.functions.helpers.log({message:"No EID was generated",error:e}):a.functions.helpers.log({message:"New Pageview event",eid:t})},{generics:{eventTypeId:43e3}}),o&&o(null,{vid:n,sid:t,data:i}),void(a.properties.running=!1))})})})),this},push:function(){var r;return window.history&&(r=window.history.pushState,window.history.pushState=function(e){var t;return"function"==typeof window.history.onpushstate&&(t=arguments&&2<arguments.length&&arguments[2]?arguments[2]:document.location.href,window.history.onpushstate({state:e,url:t})),r.apply(window.history,arguments)},window.onpopstate=window.history.onpushstate=function(e){a.init(null,e&&e.url?a.functions.helpers.getAbsoluteHref(e.url):document.location.href)}),this}},window.getAttributionData=a.init,a.functions.event.trigger(window.document,a.properties.readyEvent),a.push().init()})();
