!function(l){function e(e){for(var o,n,t=e[0],i=e[1],a=e[2],r=0,s=[];r<t.length;r++)n=t[r],Object.prototype.hasOwnProperty.call(u,n)&&u[n]&&s.push(u[n][0]),u[n]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(l[o]=i[o]);for(p&&p(e);s.length;)s.shift()();return d.push.apply(d,a||[]),c()}function c(){for(var e,o=0;o<d.length;o++){for(var n=d[o],t=!0,i=1;i<n.length;i++){var a=n[i];0!==u[a]&&(t=!1)}t&&(d.splice(o--,1),e=r(r.s=n[0]))}return e}var n={},u={8:0},d=[];function r(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return l[e].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=l,r.c=n,r.d=function(e,o,n){r.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(o,e){if(1&e&&(o=r(o)),8&e)return o;if(4&e&&"object"==typeof o&&o&&o.__esModule)return o;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:o}),2&e&&"string"!=typeof o)for(var t in o)r.d(n,t,function(e){return o[e]}.bind(null,t));return n},r.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(o,"a",o),o},r.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},r.p="/public/";var o=(t=window.webpackJsonp=window.webpackJsonp||[]).push.bind(t);t.push=e;for(var t=t.slice(),i=0;i<t.length;i++)e(t[i]);var p=o;d.push([164,3]),c()}({164:function(e,o,n){n(128),e.exports=n(201)},201:function(e,o,n){"use strict";n.r(o);var i=n(0),t=(n(13),n(50),n(57),n(58),n(25)),a=n.n(t),r=n(16),s=n(6);function l(e,o){for(var n=0;n<o.length;n++){var t=o[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}var c=(I=[{key:"update",value:function(){this.getCookie()}},{key:"getCookie",value:function(){var e=a.a.get(r.a.polygonConsent.name),o=a.a.get(r.a.euconsent.name);if(e&&o){o=s.a.instance.consent&&s.a.instance.consent.minUpdatedAt?s.a.instance.consent.minUpdatedAt:0,e=this.decode(e);if(e&&e.updated_at&&e.updated_at>o)return void(this._cookie=e)}this.writeCookie(!1)}},{key:"updateCookie",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],o=e!==this.value;this.writeCookie(e)&&o&&window.polygon&&window.polygon.componentLoader&&window.polygon.componentLoader.publish(i.I,e)}},{key:"writeCookie",value:function(){var e={value:0<arguments.length&&void 0!==arguments[0]&&arguments[0],updated_at:Math.floor(Date.now()/1e3)},o=Number.isInteger(r.a.polygonConsent.expires)?r.a.polygonConsent.expires:365,n="boolean"!=typeof r.a.polygonConsent.secure||r.a.polygonConsent.secure,t=".".concat(s.a.instance.secondLevelDomain||"spiegel",".").concat(s.a.instance.topLevelDomain||"de");return a.a.set(r.a.polygonConsent.name,this.encode(e),{domain:t,expires:o,secure:n}),a.a.get(r.a.polygonConsent.name)?(this._cookie=e,!0):(window.polygon&&window.polygon.componentLoader&&window.polygon.componentLoader.publish(i.J),!1)}},{key:"onSourcepointChoiceProcessed",value:function(e){var o;e===r.c.accept_all?o=!0:e!==r.c.reject_all&&e!==r.c.accept_some||(o=!1),void 0!==o&&this.updateCookie(o)}},{key:"encode",value:function(e){return window.btoa(JSON.stringify(e))}},{key:"decode",value:function(e){return JSON.parse(window.atob(e))||{}}},{key:"value",get:function(){return!(!this._cookie||!this._cookie.value)&&this._cookie.value}}],l(u.prototype,I),u);function u(){!function(e){if(!(e instanceof u))throw new TypeError("Cannot call a class as a function")}(this),a.a.remove("spconsent"),this.update(),window.polygon&&window.polygon.componentLoader&&window.polygon.componentLoader.subscribe(i.M,this.onSourcepointChoiceProcessed,this)}function d(e){return function(e){if(Array.isArray(e)){for(var o=0,n=new Array(e.length);o<e.length;o++)n[o]=e[o];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(e,o){for(var n=0;n<o.length;n++){var t=o[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}n(4),n(5),n(10),n(35),n(7),n(3),n(51),n(8),n(9);var f=(p(y.prototype,[{key:"subscribe",value:function(){for(var e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];this.subscriptions.push(o)}},{key:"publish",value:function(){for(var e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];this.publications.push(o)}},{key:"destroy",value:function(e){if(e&&"function"==typeof e.subscribe&&"function"==typeof e.publish){for(window.polygon&&(window.polygon.componentLoader=e);0<this.subscriptions.length;){var o=this.subscriptions.pop();e.subscribe.apply(e,d(o))}for(;0<this.publications.length;){var n=this.publications.pop();e.publish.apply(e,d(n))}}}}]),y);function y(){!function(e){if(!(e instanceof y))throw new TypeError("Cannot call a class as a function")}(this),this.subscriptions=[],this.publications=[]}function g(e,o){for(var n=0;n<o.length;n++){var t=o[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}n(52);var h=Symbol("INSTANCE"),w=Symbol("SINGELTONENFORCER"),v=(o=[{key:"instance",get:function(){return this[h]||(this[h]=new m(w)),this[h]}}],g((t=m).prototype,[{key:"init",value:function(){this.stores={},window.polygon&&window.polygon.componentLoader&&window.polygon.componentLoader.subscribe(i.G,this.onPodloveWebplayerInitialized,this)}},{key:"onPodloveWebplayerInitialized",value:function(e,o){e&&o&&(this.stores[e]=o)}},{key:"getStore",value:function(e){return this.stores[e]}}]),g(t,o),m),b=n(20);function m(e){if(function(e){if(!(e instanceof m))throw new TypeError("Cannot call a class as a function")}(this),e!==w)throw new Error("Instantiation failed: Use Settings.instance instead of new.");this.init()}function k(e,o){for(var n=0;n<o.length;n++){var t=o[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}var t=(I=[{key:"globalFontsize",value:function(o){var e,n;!o||void 0!==(void 0!==(e=s.a.instance)&&void 0!==e.page&&void 0!==e.page.category&&void 0!==e.page.category.route?e.page.category.route:void 0)&&(n=["typo-xs","typo-s","typo-m","typo-l","typo-xl"].filter(function(e){return e!==o}),(e=document.documentElement.classList).remove.apply(e,function(e){if(Array.isArray(e)){for(var o=0,n=new Array(e.length);o<e.length;o++)n[o]=e[o];return n}}(n=n)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()),document.documentElement.classList.add(o))}},{key:"hyphenation",value:function(e){e?document.documentElement.classList.add("hyphenated"):document.documentElement.classList.remove("hyphenated")}},{key:"onPageResume",value:function(e,o){void 0!==window.polygon&&void 0!==window.polygon.componentLoader&&window.polygon.componentLoader.publish(i.u,e,o)}},{key:"outbrainFurtherReadsContainerReady",value:function(e){e&&void 0!==window.polygon&&void 0!==window.polygon.componentLoader&&window.polygon.componentLoader.publish(i.x,e)}},{key:"outbrainTopReadsContainerReady",value:function(e){e&&void 0!==window.polygon&&void 0!==window.polygon.componentLoader&&window.polygon.componentLoader.publish(i.y,e)}},{key:"targetAdPositionLoaded",value:function(e){"string"==typeof e&&e&&void 0!==window.polygon&&void 0!==window.polygon.componentLoader&&window.polygon.componentLoader.publish(i.X,e)}},{key:"triggerRegister",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:void 0;e&&"function"==typeof e.preventDefault&&e.preventDefault(),void 0!==window.polygon&&void 0!==window.polygon.componentLoader&&window.polygon.componentLoader.publish(i.kb)}},{key:"triggerLogin",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:void 0;e&&"function"==typeof e.preventDefault&&e.preventDefault(),void 0!==window.polygon&&void 0!==window.polygon.componentLoader&&window.polygon.componentLoader.publish(i.hb)}},{key:"triggerLogout",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:void 0;e&&"function"==typeof e.preventDefault&&e.preventDefault(),void 0!==window.polygon&&void 0!==window.polygon.componentLoader&&window.polygon.componentLoader.publish(i.ib)}},{key:"triggerAccount",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:void 0;e&&"function"==typeof e.preventDefault&&e.preventDefault(),void 0!==window.polygon&&void 0!==window.polygon.componentLoader&&window.polygon.componentLoader.publish(i.gb)}},{key:"triggerOffer",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:void 0;e&&"function"==typeof e.preventDefault&&e.preventDefault();var o=e&&e.product?e.product:"paid",e=e&&e.targetUrl?e.targetUrl:void 0;void 0!==window.polygon&&void 0!==window.polygon.componentLoader&&window.polygon.componentLoader.publish(i.jb,{product:o,targetUrl:e})}},{key:"triggerRestorePurchases",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:void 0;e&&"function"==typeof e.preventDefault&&e.preventDefault();e=e&&e.targetUrl?e.targetUrl:void 0;void 0!==window.polygon&&void 0!==window.polygon.componentLoader&&window.polygon.componentLoader.publish(i.lb,{targetUrl:e})}},{key:"getTeaserImageSrc",value:function(e){var o=s.a.instance;return e&&o.urls&&"string"==typeof o.urls.assetsBasePath?"".concat(o.urls.assetsBasePath,"/assets/image/").concat(e,"_tm.jpg"):""}},{key:"getPodloveWebplayerStore",value:function(e){if(e){var o,n=v.instance;return o=n?n.getStore(e):o}}},{key:"toggleTalk",value:function(){void 0!==window.polygon&&void 0!==window.polygon.componentLoader&&window.polygon.componentLoader.publish(i.fb)}},{key:"toggleToc",value:function(){void 0!==window.polygon&&void 0!==window.polygon.componentLoader&&window.polygon.componentLoader.publish(i.eb)}},{key:"userAccess",get:function(){var e=b.a.instance;return{paid:e.hasPaidAccess,noAds:e.hasNoAdsAccess}}}],k(O.prototype,I),O),L=(n(27),n(48),n(28),n(32),n(17)),A=n(1),C=n(18),P=n(55),_=n(102),T=n(46);function O(){!function(e){if(!(e instanceof O))throw new TypeError("Cannot call a class as a function")}(this)}function S(e,o){for(var n=0;n<o.length;n++){var t=o[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}S(x.prototype,[{key:"execute",value:function(){var e=T.a.instance;e.shouldRedirectToAppUpdate?e.redirectToAppUpdate():e.shouldRedirectToConsent?e.redirectToConsent():e.shouldRedirectFromConsent?e.redirectToTargetUrl():(this.setRootClasses(),this.deleteAccessTokenUrlParam(),this.initApp())}},{key:"setRootClasses",value:function(){var o=this,n=document.documentElement,e=L.a.instance;A.a.isApp&&(n.classList.add("is-app"),n.classList.add("is-".concat(A.a.appCode)),A.a.appVersion<e.minVersion&&(n.classList.add("is-unsupported"),n.classList.add("is-unsupported-version")),A.a.appVersion<e.minOfflineIssueVersion?n.classList.add("is-unsupported-offline-issue"):n.classList.add("is-supported-offline-issue"),window.navigator.webBridge.globalFontsize(e.appFontSize)),_.a.isSupported||(n.classList.add("is-unsupported"),n.classList.add("is-unsupported-feature")),C.a.isMobile&&n.classList.add("is-mobile"),this.user.isLoggedIn&&n.classList.add("is-logged-in"),this.user.hasConditionalAccess&&!this.user.hasPaidAccess&&n.classList.add("hide-conditional"),this.user.hasPaidAccess&&n.classList.add("has-paid-access"),this.user.hasNoAdsAccess&&n.classList.add("has-noads-access"),this.user.accessInfo&&Object.keys(this.user.accessInfo).forEach(function(e){!0===o.user.accessInfo[e]&&n.classList.add(e)}),this.user.hasAcceptedGlobalConsent&&n.classList.add("has-consent"),C.a.isTablet&&n.classList.add("is-tablet"),!this.route.isIssueArticle&&"issue"!==this.route.route||n.classList.add("is-issue-context"),this.route.route&&n.classList.add(this.route.route)}},{key:"deleteAccessTokenUrlParam",value:function(){var e=new URL(document.location);e.searchParams.get("accessToken")&&(e.searchParams.delete("accessToken"),window.history.replaceState({},document.title,e.href))}},{key:"initApp",value:function(){var e,o;A.a.isApp&&(e=s.a.instance,o=L.a.instance,e.app&&e.app.pageContext&&o.sendPageContext(e.app.pageContext),o.registerEventHandlers())}}]),o=x;function x(){!function(e){if(!(e instanceof x))throw new TypeError("Cannot call a class as a function")}(this),this.user=b.a.instance,this.route=P.a.instance}function j(e,o){for(var n=0;n<o.length;n++){var t=o[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}n(64),n(21),n(38);var I,E=(I=[{key:"onBreakingNewsChanged",value:function(e){e&&Array.isArray(e)&&this.refreshItems(e)}},{key:"refreshItems",value:function(e){var n=this;if(e&&Array.isArray(e)){for(;this.list.firstChild;)this.list.removeChild(this.list.firstChild);0===e.length?this.el.classList.add("hidden"):(this.el.classList.remove("hidden"),e.forEach(function(e){var o;e.headline&&e.url?(o=(o=(o=n.listItemPrototypeDefault.outerHTML).replace(new RegExp("#__proto_path__","g"),e.url)).replace(new RegExp("__proto_headline__","g"),e.headline),n.list.insertAdjacentHTML("beforeend",o)):e.headline&&(o=(o=n.listItemPrototypeTextOnly.outerHTML).replace(new RegExp("__proto_headline__","g"),e.headline),n.list.insertAdjacentHTML("beforeend",o))}))}}}],j(R.prototype,I),R),D=n(34);function R(e,o){!function(e){if(!(e instanceof R))throw new TypeError("Cannot call a class as a function")}(this),e&&(this.el=e,this.list=this.el.querySelector('[data-breakingnews-el="list"]'),this.listItemPrototypeDefault=this.el.querySelector('[data-breakingnews-prototype="default"]'),this.listItemPrototypeTextOnly=this.el.querySelector('[data-breakingnews-prototype="textOnly"]'),this.list&&this.listItemPrototypeDefault&&this.listItemPrototypeTextOnly&&(o&&Array.isArray(o)&&0<o.length?this.refreshItems(o):window.polygon&&window.polygon.componentLoader&&window.polygon.componentLoader.subscribe(i.h,this.onBreakingNewsChanged,this)))}function N(e,o){for(var n=0;n<o.length;n++){var t=o[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}var U=(n=[{key:"execute",value:function(){var e,o=[];if(D.a.getItem("breakingnews")){try{n=JSON.parse(D.a.getItem("breakingnews"))}catch(o){}n&&(e=(e=s.a.instance).cacheControl&&e.cacheControl.breakingnews&&Number.isInteger(e.cacheControl.breakingnews.sessionStorageMaxAge)?e.cacheControl.breakingnews.sessionStorageMaxAge:900,e=Date.now()-1e3*e,n.updated_at&&n.updated_at>=e&&n.items&&Array.isArray(n.items)&&0<n.items.length&&(o=n.items))}var n=document.querySelector("[data-breakingnews]");n&&(window.polygon.breakingNewsRenderer=new E(n,o),0<o.length&&document.documentElement.classList.add("has-breaking-news"))}}],N(M.prototype,n),M);function M(){!function(e){if(!(e instanceof M))throw new TypeError("Cannot call a class as a function")}(this)}window.polygon=window.polygon||{},window.polygon.componentLoader=new f,window.addEventListener(i.K,function(){(new U).execute()}),window.navigator.webBridge=new t,window.polygon.cookies=window.polygon.cookies||{},window.polygon.cookies.polygon_consent=new c,(new o).execute()}});
