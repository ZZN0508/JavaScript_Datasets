define("OK/AjaxNavigationLog",["OK/logger"],function(o){var a,i,s,r,c=!1;function u(e){if(e<0)return null;for(var t=[0,20,40,60,100,160,260,320,580,900],n=0;n<t.length-1;n++){var r=t[n],o=t[n+1];if(r<e&&e<=o)return r+"-"+o}return t[t.length-1]+"+"}function l(e,t){for(var n=t.substring(Math.max(0,t.indexOf("?")+1)).split("&"),r=0;r<n.length;r++){var o=n[r];if(0===o.indexOf(e+"="))return o.substr(e.length+1)}return""}return{log:function(e,t,n){var r;!c||0<(t=function(e){for(var t=l("st.cmd",e),n=l("cmd",e),r=0;r<a.length;r++){var o=a[r];if(-1<o.indexOf("_")){var i=o.split("_"),s=i[0],i=i[1];if("*"===s&&n===i)return i;if(t===s&&n===i)return t+"_"+n}else if(t===o)return o}return""}(t)).length&&(o.duration("ajaxrequestdatatime.send.time",e,s+"_"+t,i),(r=e<100?1:100*~~((2e3<e?2e3:e)/100))&&o.success("ad","ajax_"+s+"_"+t,r)),n&&(n=(r=n.split(":"))[0],r=Number(r[1])/1e6,e=u(e),r=u(r),e&&r&&(o.success("ajaxrequestdatatime.client.measure",n,e),o.success("ajaxrequestdatatime.server.measure",n,r)))},activate:function(e){var t,n;r||(t=e.textContent,n=e.getAttribute("data-region"),e=e.getAttribute("data-countrycode"),i=n,s=e,a=JSON.parse(t),r=c=!0)},deactivate:function(){a.length=0,s=i="",r=!1}}}),define("OK/utils/screens",{apply:function(e){var t,n;"true"===document.body.getAttribute("data-uic")&&OK.getCurrentDesktopModelId&&(t=OK.getCurrentDesktopModelId(),OK.Layers&&OK.Layers.isAnyLayerOpened()&&(n=t,t=OK.Layers.getTopLayerId()),t&&e.setRequestHeader("OK-Screen",t),n&&e.setRequestHeader("OK-PrevScreen",n))}}),define("OK/utils/utils",["jquery","OK/logger","OK/AjaxNavigationLog","OK/utils/screens"],function(u,l,d,i){"use strict";var e=document.getElementById("hook_Cfg_GwtExperimentsCfg"),e=e?OK.util.parseJSON(e.innerHTML):{},s="data-";function r(e,t,n){e.split(OK.navigation.SPLITER).forEach(function(e,t){n[t]&&OK.hookModel.setHookContent(n[t],e)})}function o(e,t,n){n=n.getResponseHeader(OK.navigation.HEADER);return n?n.split(","):null}function a(e){try{return e.getBoundingClientRect()}catch(e){return{top:0,right:0,bottom:0,left:0,width:0,height:0}}}return{ajax:function(e,t,n){1<arguments.length&&"function"!=typeof arguments[1]&&(n=t,t=void 0),n=n||0,t=t||function(e){OK.navigation.redirect?OK.navigation.redirect(e):document.location.href=decodeURIComponent(e)};var r=e.data||{},o=e.beforeSend;return e.type=e.type||"POST","POST"===e.type&&e.contentType&&-1!=e.contentType.indexOf("application/json")?"string"!=typeof r&&(r=JSON.stringify(r)):r["gwt.requested"]=window.pageCtx.gwtHash,e.data=r,e.beforeSend=function(e,t){e.setRequestHeader("TKN",OK.tkn.get()),e.setRequestHeader("STRD",OK.isStateRedesign()),i.apply(e),o&&o.apply(this,arguments)},function r(o,i,s,a){var c=window.performance.now(),e=u.ajax(o);return a.xhr=e,a.fail(function(){e.abort()}),e.done(function(e,t,n){d.log(window.performance.now()-c,o.url,n.getResponseHeader("X-Render-Time")),e&&n.responseText&&0===e.length&&0!==n.responseText.length&&"[]"!=n.responseText&&(l.error("ajax",t),l.clob("ajax",JSON.stringify({requestData:o,response:n.responseText})));var r=n.getResponseHeader("TKN");if(r&&OK.tkn.set(r),r=n.getResponseHeader("Redirect-Location"))return i(r),void a.reject(n,t,"Redirect");OK.util.processCssHeaders(n).then(function(){a.resolve(e,t,n)})}),e.fail(function(e,t,n){0<s?"timeout"!=t&&o.timeout?setTimeout(function(){r(o,i,--s,a)},o.timeout):r(o,i,--s,a):a.reject(e,t,n)}),a}(e,t,n,u.Deferred())},getBlockIds:o,updateBlockModelCallback:function(e,t,n){n=o(0,0,n);n&&r(e,0,n)},updateBlocks:r,gwtExperimentsCfg:e,removeTags:function(e){return"string"==typeof e?e.replace(/<[^>]*>/g,""):e},isElementInViewport:function(e){var t=a(e);if(t.top<0||t.left<0||t.bottom>window.innerHeight||t.right>window.innerWidth)return!1;var n=(t.right+t.left)/2,r=(t.bottom+t.top)/2;return e.contains(document.elementFromPoint(n,t.top))||e.contains(document.elementFromPoint(t.right,r))||e.contains(document.elementFromPoint(n,t.bottom))||e.contains(document.elementFromPoint(t.left,r))},isElementPartiallyInViewport:function(e,t,n){if(!t)return this.isElementInViewport(e);var r=a(e),o=Math.min(r.bottom,window.innerHeight)-Math.max(0,r.top),i=Math.min(r.right,window.innerWidth)-Math.max(0,r.left),r=e.offsetHeight,e=e.offsetWidth;return r||void 0===n?r*t<=o&&e*t<=i:!n&&null},isElementPartiallyInViewportWithOverlapCheck:function(e,t,n){var r=a(e);if(this.isElementPartiallyInViewport(e,t,n)){t=(r.right+r.left)/2,n=(r.bottom+r.top)/2;return e.contains(document.elementFromPoint(t,r.top))||e.contains(document.elementFromPoint(r.right,n))||e.contains(document.elementFromPoint(t,r.bottom))||e.contains(document.elementFromPoint(r.left,n))}return!1},extendDeep:function(e){e=e||{};for(var t=1;t<arguments.length;t++){var n=arguments[t];if(n)for(var r in n)n.hasOwnProperty(r)&&("object"!=typeof n[r]||Array.isArray(n[r])?e[r]=n[r]:e[r]=this.extendDeep(e[r],n[r]))}return e},urlBase64ToUint8Array:function(e){for(var e=(e+function(e){for(var t="";0<e--;)t+="=";return t}((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),t=window.atob(e),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n},deferred:function(){var n,r;return{promise:new Promise(function(e,t){n=e,r=t}),resolve:n,reject:r}},getAttributesFromElement:function(e,t){"string"==typeof e&&(e=document.getElementById(e));for(var n={},r=0;r<e.attributes.length;r++){var o=e.attributes[r];0==o.name.indexOf(s)&&(n[o.name.substring(s.length)]=o.value)}return t&&e.parentNode.removeChild(e),n},getFormData:function(e,t){var n={},e=Array.prototype.slice.call(e.elements);return(e=t?e.filter(t):e).forEach(function(e){var t=e.name;if(t)switch(e.type){case"checkbox":n[t]=e.checked?"on":"off";break;case"radio":e.checked&&(n[t]=e.value);break;default:n[t]=e.value}}),n},parseJson:function(e){e=e?e.replace(/<!--/gi,"").replace(/-->/gi,""):null;return e?JSON.parse(e):null}}}),define("OK/utils/vanilla",["OK/AjaxNavigationLog","OK/utils/screens"],function(g,v){"use strict";function o(e){function t(e,t){o.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}var n,r,o=[];for(n in e)e.hasOwnProperty(n)&&(r=e[n],Array.isArray(r)?r.forEach(t.bind(null,n)):t(n,e[n]));return o.join("&")}function n(a,c){var e,n=a.type||"POST",r=a.data||{},u=a.url||"",l=/^(https?:)?\/\//.test(u),t={xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},d=a.headers||{},h={},f=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,m=a.beforeOpen,p=new XMLHttpRequest;c=c||function(e){OK.navigation.redirect?OK.navigation.redirect(e):document.location.href=decodeURIComponent(e)},"POST"===n&&"string"!=typeof r&&(a.isFileUpload?(d["Content-Type"]="application/octet-stream",e=(r.name||"1.jpg").replace(/[^\u0000-\u007F]+/gi,"_").substring(0,255),d["Content-Disposition"]='attachment; filename="'+e+'"'):(d["Content-Type"]="application/x-www-form-urlencoded",window.pageCtx.gwtHash&&(r["gwt.requested"]=window.pageCtx.gwtHash),r=o(r))),a.contentType&&t.hasOwnProperty(a.contentType)&&!d.hasOwnProperty("Content-Type")&&(d["Content-Type"]=t[a.contentType]),a.dataType&&t.hasOwnProperty(a.dataType)&&!d.hasOwnProperty("Accept")&&(d.Accept="*"===a.dataType?t[a.dataType]:t[a.dataType]+", */*; q=0.01"),l||d.hasOwnProperty("TKN")||(d.TKN=OK.tkn.get()),l||d.hasOwnProperty("STRD")||(d.STRD=OK.isStateRedesign());t=new Promise(function(o,i){var e,s=window.performance.now();for(e in m&&m({xhr:p}),p.open(n,u,!0),d)d.hasOwnProperty(e)&&p.setRequestHeader(e,d[e]);l||v.apply(p),p.onreadystatechange=function(){if(p.readyState===XMLHttpRequest.HEADERS_RECEIVED){for(var e,t=p.getAllResponseHeaders();e=f.exec(t);)h[e[1].toLowerCase()]=e[2];if(!l&&h["redirect-location"])return c(h["redirect-location"]),void i(p,p.statusText,"Redirect")}if(p.readyState===XMLHttpRequest.DONE)if(200<=p.status&&p.status<300||304===p.status){g.log(window.performance.now()-s,u,p.getResponseHeader("X-Render-Time"));var n=p.responseText,r=n;if("json"===a.dataType)try{r=JSON.parse(n)}catch(e){i(e)}!l&&h.tkn&&OK.tkn.set(h.tkn),OK.util.processCssHeaders(p).then(function(){o({response:r,xhr:p})})}else i(p)},p.onerror=function(){i(p)};var t=a.signal;t&&t.addEventListener("abort",function(){p.abort(),i(p)}),p.send(r)});return t.xhr=p,t}function r(e){e=e.getResponseHeader(OK.navigation.HEADER);return e?e.split(","):null}function i(e,n){e.split(OK.navigation.SPLITER).forEach(function(e,t){n[t]&&OK.hookModel.setHookContent(n[t],e)})}return{ajax:n,getJSON:function(e,t){return n({type:"GET",dataType:"json",url:e,data:t})},trigger:function(e,t,n){var r;e&&3!==e.nodeType&&8!==e.nodeType&&((r=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,n),e.dispatchEvent(r))},encodeHtml:function(e){var t=document.createElement("div");return e.split(" ").map(function(e){return t.innerText=e,t.innerHTML}).join(" ")},extractParams:function(e){var n={},t=e&&e.indexOf("?");return-1<t&&e.substr(t+1).split("&").forEach(function(e){var t;-1<e.indexOf("=")&&(e=(t=e.split("="))[0],t=t[1],t=decodeURIComponent(t.replace(/\+/g,"%20")),n[e]=t)}),n},stringifyParams:o,getBlockIds:r,updateBlocks:i,updateBlockModelCallback:function(e){var t=r(e.xhr);t&&i(e.response,t)},getFormData:function(e){return Array.prototype.slice.apply(e.getElementsByTagName("input")).reduce(function(e,t){return t.name&&(e[t.name]="checkbox"===t.type?t.checked?"on":"off":t.value),e},{})},unescapeXml:function(e){return e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'")},escapeXml:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},formatNumber:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}}}),define("OK/utils/throttle",[],function(){"use strict";return function(o,i,s,a){var c,u=0;return"boolean"!=typeof i&&(a=s,s=i,i=void 0),function(){var e=this,t=Date.now()-u,n=arguments;function r(){u=Date.now(),s.apply(e,n)}a&&!c&&r(),c&&clearTimeout(c),void 0===a&&o<t?r():!0!==i&&(c=setTimeout(a?function(){c=void 0}:r,void 0===a?o-t:o))}}}),define("OK/utils/debounce",["OK/utils/throttle"],function(r){"use strict";return function(e,t,n){return void 0===n?r(e,t,!1):r(e,n,!1!==t)}}),define("OK/utils/requireBlock",["OK/utils/utils"],function(e){"use strict";function t(){e.ajax({url:this.getAttribute("data-url")}).done(e.updateBlockModelCallback)}return{activate:function(e){e.addEventListener("click",t)},deactivate:function(e){e.removeEventListener("click",t)}}}),define("OK/utils/dom",[],function(){"use strict";function n(e,t){if(e){if(11!==e.nodeType)return Array.prototype.slice.call(e.getElementsByClassName(t));for(var n=[],r=0;r<e.childNodes.length;r++){var o=e.childNodes[r];o.getElementsByClassName&&(n=n.concat(Array.prototype.slice.call(o.getElementsByClassName(t))))}return n}return[]}function o(e,t,n,r){for(r||(e=e.parentElement);e;){if(t(e))return e;if(n&&n===e)return null;e=e.parentElement}return e}return{byClass:n,firstByClass:function(e,t){t=n(e,t);return t.length?t[0]:null},querySelector:function(e,t){return e.querySelector(t)},querySelectorAll:function(e,t){return Array.prototype.slice.call(e.querySelectorAll(t))},parent:function(e,t,n,r){for(r||(e=e.parentElement);e;){if(!t||!e.classList||e.classList.contains(t))return e;if(n&&n===e)return null;e=e.parentElement}return e},traverseParents:o,getParentsAttrValue:function(e,t,n){function r(e){return e.getAttribute(t)}n=o(e,r,n,!0);return n?r(n):null},forEach:function(e,t){return Array.prototype.slice.call(e).forEach(t),e},innerHeight:function(t){try{return window.getComputedStyle(t,null).getPropertyValue("height")}catch(e){return t.currentStyle.height}},outerSize:function(e,t,n){var r;return null===(r="svg"===e.nodeName?(r=e.getBoundingClientRect(),t?r.width:r.height):t?e.offsetWidth:e.offsetHeight)?0:(n&&(e=window.getComputedStyle?window.getComputedStyle(e,null):e.currentStyle,r+=t?parseInt(e.marginLeft,10)+parseInt(e.marginRight,10):parseInt(e.marginTop,10)+parseInt(e.marginBottom,10)),r)},remove:function(e){var t;(e=!Array.isArray(e)?[e]:e).forEach(function(e){(t=e.parentNode)&&t.removeChild(e)})},one:function(e,t,n){e.addEventListener(t,function e(t){return t.target.removeEventListener(t.type,e),n.call(this,t)})},removeAllListeners:function(e){var t=e.cloneNode(!0);return e.parentNode.replaceChild(t,e),t}}}),define("OK/utils/delegate",[],function(){"use strict";function t(e){this.listenerMap=[{},{}],e&&this.root(e),this.handle=t.prototype.handle.bind(this)}t.prototype.root=function(e){var t,n=this.listenerMap;if(this.rootElement){for(t in n[1])n[1].hasOwnProperty(t)&&this.rootElement.removeEventListener(t,this.handle,!0);for(t in n[0])n[0].hasOwnProperty(t)&&this.rootElement.removeEventListener(t,this.handle,!1)}if(!e||!e.addEventListener)return this.rootElement&&delete this.rootElement,this;for(t in this.rootElement=e,n[1])n[1].hasOwnProperty(t)&&this.rootElement.addEventListener(t,this.handle,!0);for(t in n[0])n[0].hasOwnProperty(t)&&this.rootElement.addEventListener(t,this.handle,!1);return this},t.prototype.captureForType=function(e){return-1!==["blur","error","focus","load","resize","scroll"].indexOf(e)},t.prototype.on=function(e,t,n,r){var o,i,s;if(!e)throw new TypeError("Invalid event type: "+e);if("function"==typeof t&&(r=n,n=t,t=null),void 0===r&&(r=this.captureForType(e)),"function"!=typeof n)throw new TypeError("Handler must be a type of Function");o=this.rootElement,(i=this.listenerMap[r?1:0])[e]||(o&&o.addEventListener(e,this.handle,r),i[e]=[]);for(var a,r=t?/^[a-z]+$/i.test(t)?(s=t,h):/^#[a-z0-9\-_]+$/i.test(t)?(s=t.slice(1),f):(s=t,d):(s=null,function(e,t){return this.rootElement===window?t===document:this.rootElement===t}.bind(this)),c=i[e],u=!1,l=c.length-1;0<=l;l--)if(a=c[l],!(t&&t!==a.selector||n&&n!==a.handler)){u=!0;break}return u||c.push({selector:t,handler:n,matcher:r,matcherParam:s}),this},t.prototype.off=function(e,t,n,r){var o,i,s,a,c;if("function"==typeof t&&(r=n,n=t,t=null),void 0===r)return this.off(e,t,n,!0),this.off(e,t,n,!1),this;if(s=this.listenerMap[r?1:0],!e){for(c in s)s.hasOwnProperty(c)&&this.off(c,t,n);return this}if(!(a=s[e])||!a.length)return this;for(o=a.length-1;0<=o;o--)i=a[o],t&&t!==i.selector||n&&n!==i.handler||a.splice(o,1);return a.length||(delete s[e],this.rootElement&&this.rootElement.removeEventListener(e,this.handle,r)),this},t.prototype.handle=function(e){var t,n,r,o,i,s,a=e.type,c=[];if(!0!==e.ftLabsDelegateIgnore){switch(3===(s=e.target).nodeType&&(s=s.parentNode),r=this.rootElement,e.eventPhase||(e.target!==e.currentTarget?3:2)){case 1:c=this.listenerMap[1][a];break;case 2:this.listenerMap[0]&&this.listenerMap[0][a]&&(c=c.concat(this.listenerMap[0][a])),this.listenerMap[1]&&this.listenerMap[1][a]&&(c=c.concat(this.listenerMap[1][a]));break;case 3:c=this.listenerMap[0][a]}for(n=c.length;s&&n;){for(t=0;t<n&&(o=c[t]);t++)if(!1===(i=o.matcher.call(s,o.matcherParam,s)?this.fire(e,s,o):i))return e.ftLabsDelegateIgnore=!0,void e.preventDefault();if(s===r)break;n=c.length,s=s.parentElement}}},t.prototype.fire=function(e,t,n){return n.handler.call(t,e,t)};var d=function(e){if(e){e=e.prototype;return e.matches||e.matchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector}}(Element);function h(e,t){return e.toLowerCase()===t.tagName.toLowerCase()}function f(e,t){return e===t.id}return t.prototype.destroy=function(){this.off(),this.root()},t}),define("OK/cookie",["require","exports"],function(e,t){"use strict";function n(e,t,n,r){var o,i="";n&&(n=1e3*n*60*60*24,(o=new Date).setTime(o.getTime()+n),i=";expires="+o.toUTCString()),document.cookie=e+"="+encodeURIComponent(t)+i+(r?";path="+r:"")}Object.defineProperty(t,"__esModule",{value:!0}),t.storeCookie=t.clearCookie=t.readCookie=t.setCookie=void 0,t.setCookie=n,t.readCookie=function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var o=n[r];" "===o.charAt(0);)o=o.substring(1);if(o.startsWith(t))return o.substring(t.length)}return null},t.clearCookie=function(e,t){n(e,"",0,t)},t.storeCookie=function(e,t,n){document.cookie=e+"="+encodeURIComponent(t)+(n||"")}}),define("OK/utils/environment",["require","exports","OK/cookie"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTouchableMobile=t.isGecko=t.isSeleniumMode=t.isDebug=void 0;var r=window.navigator,o=r.userAgent.toLowerCase(),i=r.platform?r.platform.toLowerCase():"",s=null!==n.readCookie("_okSat");t.isSeleniumMode=s;var a="true"===n.readCookie("dme")||null!==document.getElementById("__gwtd__m");t.isDebug=a;r=-1<o.indexOf("chrome"),s=!r&&(-1<o.indexOf("webkit")||-1<o.indexOf("khtml")),n=s&&-1<o.indexOf("android"),a=s&&-1<o.indexOf("iphone"),i=s&&(-1<o.indexOf("ipad")||-1<i.indexOf("ipad")),o=!s&&!r&&-1<o.indexOf("gecko");t.isGecko=o,t.isTouchableMobile=a||i||n}),define("OK/LogClicks",["OK/logger","OK/utils/dom"],function(a,t){"use strict";var r,o="data-l",i="data-log-click",c="["+o+"],["+i+"]",u="click",n="log.click",s=null;function l(e,t,n){t&&Object.keys(t).length&&(e.push(t),t.target&&!n.okTarget&&(n.okTarget=t.target))}function f(e){OK.logging.alert(n+" "+e),a.error(n,e)}function d(e){return e?e.getAttribute(o)||e.getAttribute(i):null}var m={t:"target",ti:"targetId",mB:"mtBlockType",gA:"groupActionType",fF:"feedFeatures",fP:"feedPosition",fL:"feedLocation",fD:"feedDetails",fO:"feedOwners",fI:"feedId",".r":"remove",rM:"removeMenu",".c":"content",".k":"comment",re:"reshare",".l":"like",e1:"entity1",e2:"entity2",uL:"userLink",gL:"groupLink",".a":"action"};function h(e){var t=-2;try{if(!e||0==e.length||/^{|^null&/i.test(e))return t=-1,JSON.parse(e);for(var n={},r=!1,o=!(t=0),i="",s="",a="",c=e.length,u=0,l=0,d=0;d<c;d++){var t=1,h=e.charAt(d);r?(r=!1,l++):"\\"==h?(0<l&&(o?(t=2,i+=e.substr(u,l)):(t=3,s+=e.substr(u,l)),l=0),u=d+1,r=!0):","==h?(o?(0<l&&(t=4,i+=e.substr(u,l),l=0),o=!1):(0<l&&(t=5,s+=e.substr(u,l),l=0),o=!0,(a=m[i])&&(i=a),(a=m[s])&&(s=a),n[i]=s,s=i=""),u=d+1):l++}return t=6,r?f("err: escapeNow - "+e):o?u!=c&&f("err: keyNow - "+e):(u<c&&(t=7,s+=e.substr(u)),(a=m[i])&&(i=a),(a=m[s])&&(s=a),n[i]=s),n}catch(n){return f("unkn err: stepN = "+t+", data = "+e+", e = "+n),{}}}function p(e){if(null==s&&function(){s=0;try{var e,t,n=performance.getEntriesByType("navigation");if((e=n&&n.length?(r=n[0]).serverTiming:e)&&e.length)for(t=0;t<e.length;t+=1)if("from"===e[t].name){s=e[t].duration;break}}catch(e){s=0}}(),0<s)try{var t=Math.round(performance.now()-r.responseStart+s);e.push({adjustedTime:t})}catch(e){}}function g(e){var t,n,r,o=!1,i=[];try{(t=d(e.target))&&l(i,h(t),e);for(var s=e.target.parentElement;s;)s.matches(c)&&(t=d(s))&&l(i,h(t),e),s.hasAttribute("data-force")&&(o=!0),s=s.parentElement;i.length&&(p(i),o?(n=JSON.stringify(i),OK.logging.info(u+" "+n),a.force(u,n)):(r=JSON.stringify(i),OK.logging.info(u+" "+r),a.success(u,r)))}catch(e){f(e)}}return{activate:function(e){e.addEventListener("click",g,!0),OK.clickLog.incCounter()},deactivate:function(e){e.removeEventListener("click",g,!0),OK.clickLog.decCounter()},getLogDataAsString:d,parseLogData:h,getLogData:function(e){e=d(e);if(e)return h(e)},updateLogData:function(e,t){var n=o;e.getAttribute(i)&&(n=i);t=JSON.stringify(t);e.setAttribute(n,t)},copyLogData:function(e,t){var n=o;e.getAttribute(i)&&(n=i),t.setAttribute(n,e.getAttribute(n))},getClosestLogClickElement:function(e){return e.matches(c)?e:t.traverseParents(e,function(e){return e.matches(c)})},doLogOnElement:function(e){g({target:e})},LOG_ATTR_SELECTOR:c}}),define("OK/NewsFetchCoordinator",["OK/logger","OK/cookie"],function(c,o){"use strict";function t(){return"p_sId="+_}function n(e){clearTimeout(R),R=setTimeout(Q,e)}function i(e){n(w=e)}function s(){clearTimeout(R),R=null,clearTimeout(D),D=null,j=!1,0!==W&&ue("stop-sse"),l()}function r(){if(4===q.readyState)if(200===q.status){if(le(q.getResponseHeader("Redirect-Location")))return c.success("push","redirect"),void ne(k);ie(q),ne(w)}else c.success("push","status",""+q.status),ne(k)}function a(){var e=Date.now();0!=de&&he<e-de&&D&&(clearTimeout(D),D=setTimeout(ee,100),pe("wakeup")),0==de||D||"SSE"!==$||F<e-B&&(d&&d()||c.success("push","noconnection")),de=e}function u(e,t){0<e&&OK.lss&&OK.lss.isMaster()?e==fe&&me||(l(),me=setInterval(a,e)):l(),fe=e,he=t}function l(){me&&(clearInterval(me),me=null)}var d,h,f,m,p,g,v="/push?cmd=PeriodicManager&gwt.requested="+window.pageCtx.gwtHash,y={responseText:"",open:function(){},setRequestHeader:function(){},send:function(){},abort:function(){},getResponseHeader:function(){}},b={pos:0,size:0,adaptive:0,tmzOffset:0,sum:0,values:[],updateDiff:function(e){var t=new Date,e=t.getTime()-e;return this.tmzOffset=-t.getTimezoneOffset(),this.values[this.pos++]=e,this.pos%=20,this.sum+=e,this.size<20?this.size++:this.sum-=this.values[this.pos],e=~~(this.sum/this.size),this.adaptive!==e&&(this.adaptive=e,!0)},getTimeZoneHh:function(){var e=~~(this.tmzOffset/30);return(e<-24||28<e)&&c.error("NFCI_TZ"),e},getTimeDiff:function(){return isNaN(this.adaptive)&&c.error("NFCI_TD"),this.adaptive}},w=100,k=5e3,_=0,O=0,E=!1,C=2097152,S=2,L=[],T=0,x=15e4,K=18e4,I=18e4,N=0,A=6e4,B=18e4,M={},H=[],P=null,R=null,D=null,j=!1,q=y,F=0,U=0,W=0,z=0,J=0,G=0,X=0,V=0,$="LP",Z=!1,Y=function(e){return 1e3<=e?e=1e3:500<=e?e=500:100<=e?e=100:50<=e?e=50:10<=e&&(e=10),e},Q=function(){!j&&function(){try{pe("send"),"LP"===$&&N>0&&X>2&&E&&Date.now()-U>N&&(V++,c.success("push","recovery",V+"-"+Y(X)),Z=!1,J=0,_=0,$="SSE");var e="SSE"===$;if(d){if(d())return!1}else c.error("NFCI_ER","foe-udf");clearTimeout(D),B=re(),D=setTimeout(ee,B),j=!0,h?oe(e):(c.error("NFCI_ER","prc-udf"),ne(k))}catch(e){return j=!1,c.error("NFCI_ER","trc"),!1}return!0}()||n(k)},ee=function(){if("SSE"===$){var e=Date.now();if(e-(0===W?A:B)<F)return B=re(),void(D=setTimeout(ee,B));0===W&&(pe("Restore connection"),c.success("push","restoresse")),Z||!ae(q.responseText||"")?(ue("heartbeat-sse-"+J),c.success("push","chunks",J+"_"+Y(G)),c.success("push","chunks-all",J+"_"+Y(X)),++J>=S&&($="LP",U=e),ne(w)):(Z=!0,P=setTimeout(te,0),D=setTimeout(ee,I),c.success("push","check"))}else j=!1,_=0,ue("heartbeat-lp"),i(w)},te=function(){0!==W&&(3===q.readyState&&se(),P=setTimeout(te,1e3))},ne=function(e){j=!1,R&&n(e)},re=function(){return"SSE"===$?0==_?K:I:x},oe=function(e){(q=function(){try{return new window.XMLHttpRequest}catch(e){c.success("push","xhr");try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){return c.error("NFCI_AXO"),y}}}()).open("POST",v+(e?"&sse=true":"")+"&"+t(),!0),q.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),q.setRequestHeader("Cache-Control","no-cache"),q.setRequestHeader("TKN",OK.tkn.get()),e?(q.onreadystatechange=q.onprogress=se,G=z=0,W=1):q.onreadystatechange=r,q.send(function(){var e,t="";for(e in M)M.hasOwnProperty(e)&&(t+=e+"="+M[e]+"&");return(t+="blocks="+H.join(",")+"&")+"p_NLP="+O}()),e&&Z&&(clearTimeout(P),P=setTimeout(te,0))},ie=function(e){var t=OK.lss&&OK.lss.isMaster(),e=""+[t?OK.lss.getId():"",e.responseText,e.getResponseHeader("Rendered-Blocks"),e.getResponseHeader("TKN")].join("\x3c!--SP--\x3e");t&&ce(e),h(e,!1)},se=function(){if(!(q.readyState<3))if(1===W)if(200===q.status){if(le(q.getResponseHeader("Redirect-Location")))return ue("redirect-sse"),void ne(k);W=2}else ue("status-sse-"+q.status),ne(k);else if(2===W)switch(q.readyState){case 3:ae(q.responseText||"");break;case 4:var e=w;0===q.status?e=k:!ae(q.responseText||"")&&q.getResponseHeader("Rendered-Blocks")&&ie(q),W=0,ne(e)}},ae=function(e){for(var t,n,r,o=!1;~(t=e.indexOf("\x3c!--SSP--\x3e",z));)(n=e.substring(z,t))&&(n=""+[(r=OK.lss&&OK.lss.isMaster())?OK.lss.getId():"",n].join("\x3c!--SP--\x3e"),r&&ce(n),h(n,!1)),z=t+"\x3c!--SSP--\x3e".length,F=Date.now(),o=!0,G<1e3&&G++,X<1e3&&X++,J=0;return C<z&&c.success("push","overflow"),o},ce=function(t){try{localStorage.setItem("firePushContent",t)}catch(e){f?f():c.error("NFCI_ER","dop-udf");try{var n,r,o=e.message||"",i=t.length,s="pushData";for(n in localStorage)localStorage.hasOwnProperty(n)&&(o+="\n"+n+"="+(r=localStorage.getItem(n).length),i<r&&(i=r,s=n));var a=3e6<(a=i)?3e6:2e6<a?2e6:1e6<a?1e6:5e5<a?5e5:1e5<a?1e5:1e4<a?1e4:1e3;c.clob("push",o,"NFCI_LSIS_"+s,""+a)}catch(t){c.clob("push",t.stack,"NFCI_LSISE")}}},ue=function(e){"SSE"===$&&(_=W=0),q.abort(),c.success("push","abort",e)},le=function(e){return!!e&&(OK.navigation.redirect?OK.navigation.redirect(e):document.location.href=decodeURIComponent(e),!0)},de=0,he=0,fe=0,me=null,pe=function(e){var t;((t=o.readCookie("dme"))&&"true"===t.toLowerCase()||document.getElementById("__gwtd__m"))&&console&&console.log(new Date,e)};return{isMaster:function(){return OK.lss&&OK.lss.isMaster()},getClientServerTimeDiff:function(){return b.adaptive},getCurrentServerTime:function(){return Date.now()-this.getClientServerTimeDiff()},updateParam:function(e,t){M[e]=t},addBlock:function(e){H.push(e),m&&m();for(var t=0;t<L.length;t++)if(e===L[t])return;"SSE"===$&&(ue("upd-block-"+e),ne(w))},removeBlock:function(e){e=H.indexOf(e);-1<e&&H.splice(e,1)},setConfiguration:function(e){var t;_=e.p_sId||_,O=e.p_NLP||O,x=e.p_LPR||15e4,w=e.fetchTime||100,k=e.p_DFF||5e3,C=e.p_PSB||2097152,I=e.p_SRT||18e4,K=e.p_SFRRT||18e4,N=e.p_SLPT||0,S=e.p_SMF||2,A=e.p_SWT||6e4,g=!0===e.sTZDc,L=(e.cBlocks||"").split(","),B=re(),t=!0===e.p_PSE,E!==t&&(F=J=0,E&&0!==W&&(s(),$="LP",i(w)),$=(E=t)?"SSE":"LP"),e.serverTime&&function(e){try{var t,n;b.updateDiff(e)&&(t=b.getTimeZoneHh(),n=b.getTimeDiff(),o.setCookie("TZD",t+"."+n,0,"/"),g&&(o.setCookie("TZ",t,0,"/"),o.setCookie("TD",n,0,"/")))}catch(e){c.error("NFCI_AST")}}(e.serverTime),(t=e.p_CES||0)!==T&&p(T=t),u(e.p_WDI||0,e.p_WDTL||12e4);var n,r=e.params;if(r)for(n in r)r.hasOwnProperty(n)&&(M[n]=r[n])},init:function(e,t,n,r,o){d=e,h=t,f=n,m=r,p=o,Z=!1},getStateParamString:t,scheduleFetch:function(){_=0,i(w),u(fe,he)},stopScheduling:s}}),define("OK/CommentWidgets",["OK/utils/dom"],function(o){function r(n,r){var e;r=parseInt(r,10),!isNaN(r)&&s[n]&&s[n].count!==r&&(e=s[n].elements,Array.isArray(e)&&e.forEach(function(e){var t=o.firstByClass(e,"js-count");t&&(o.parent(e,"widget").classList.toggle("__null",r<1),t.classList.toggle("__empty",r<1),e=s[n].maxCount,t.textContent=e&&e<r?e+"+":r)}),s[n].count=r)}var i,s={};return{setOpenDiscussionFn:function(e){i=e},updateCount:function(e,t,n){n=parseInt(n,10);t=t+"_"+e;s[t]&&(void 0===(e=s[t].count)||isNaN(e)||r(t,e+n))},setCount:function(e,t,n){n=parseInt(n,10),r(t+"_"+e,n)},add:function(e,t,n){t=t+"_"+e,e=o.firstByClass(n,"js-count");n&&e&&(s[t]||(s[t]={maxCount:e.getAttribute("data-maxCount")||1/0,elements:[]}),e=e.textContent.replace(/\s/g,""),isNaN(+e)||(e=parseInt(e,10),isNaN(e)||(s[t].elements&&s[t].elements.push(n),s[t].count=e)))},remove:function(e,t,n){t=t+"_"+e,e=s[t];e&&n&&(-1<(n=(e=e.elements)?e.indexOf(n):-1)&&(e.splice(n,1),0===e.length&&delete s[t]))},clickHandler:function(e){var t,n;e.preventDefault(),i&&(t=parseInt(this.getAttribute("data-id"),10),n=parseInt(this.getAttribute("data-type"),10),e=this.getAttribute("data-location"),i(t,n,e))},activate:function(e){var t,n,r;e&&(t=parseInt(e.getAttribute("data-id"),10),n=parseInt(e.getAttribute("data-type"),10),r="false"!==e.getAttribute("data-bind"),this.add(t,n,e),r&&e.addEventListener("click",this.clickHandler))},deactivate:function(e){e&&(e.removeEventListener("click",this.clickHandler),this.remove(parseInt(e.getAttribute("data-id"),10),parseInt(e.getAttribute("data-type"),10),e))}}}),define("OK/scrollToTop",["OK/utils/dom","OK/utils/throttle"],function(t,n){"use strict";function e(){this.button=null,this.container=null}return e.prototype.activate=function(e){this.button=e,this.showBottom=this.button.hasAttribute("data-container"),this.container=this.showBottom?document.getElementById(this.button.getAttribute("data-container")):window,this.container&&(this.scrollToTopHeight=parseInt(this.button.getAttribute("data-height")||0,10),this.activateHeight=parseInt(this.button.getAttribute("data-activate-height")||500,10),this.scrollToBottomHeight=this.scrollToTopHeight,this.isBottom=this.button.classList.contains("__bottom"),this.link=t.firstByClass(this.button,"scroll-arrow_lk"),this.newOnScrollUp=parseInt(this.button.getAttribute("data-check-up")||0,10),this.pauseToNew=parseInt(e.getAttribute("data-max-pause")||0,10),this.onScrollSeenTimer=null,this.scrollStartTime=0,this.lastScrollTopPosition=0,this.boundClickHandler=this.onClick.bind(this),this.boundMouseEnterHandler=this.onMouseEnter.bind(this),this.boundMouseLeaveHandler=this.onMouseLeave.bind(this),this.boundScrollHandler=n(10,this.onScroll.bind(this)),this.boundHide=this.hide.bind(this),this.boundHighlightNew=this.highlightNew.bind(this),this.button.addEventListener("click",this.boundClickHandler),this.button.addEventListener("mouseenter",this.boundMouseEnterHandler),this.button.addEventListener("mouseleave",this.boundMouseLeaveHandler),this.button.addEventListener("hideScrollElement",this.boundHide),this.container.addEventListener("scroll",this.boundScrollHandler))},e.prototype.deactivate=function(){this.button.classList.remove("__active","__animated"),this.container&&(clearTimeout(this.onScrollSeenTimer),this.button.addEventListener("click",this.boundClickHandler),this.button.addEventListener("mouseenter",this.boundMouseEnterHandler),this.button.addEventListener("mouseleave",this.boundMouseLeaveHandler),this.button.addEventListener("hideScrollElement",this.boundHide),this.button=null,this.container.removeEventListener("scroll",this.boundScrollHandler))},e.prototype.getScrollTop=function(){return this.container===window?window.pageYOffset:this.container.scrollTop},e.prototype.setScrollTop=function(e){this.container===window?window.scrollTo(0,e):this.container.scrollTop=e},e.prototype.onMouseEnter=function(){this.isBottom&&this.getScrollTop()>=this.scrollToTopHeight&&this.button.classList.remove("__hidden")},e.prototype.onMouseLeave=function(){this.isBottom&&this.button.classList.add("__hidden")},e.prototype.highlightNew=function(){this.button.classList.add("__new")},e.prototype.onScroll=function(){var e=this.getScrollTop(),t=Date.now();this.scrollStartTime&&this.newOnScrollUp&&this.scrollStartTime+this.newOnScrollUp<t?this.newOnScrollUp&&this.lastScrollTopPosition>e&&this.highlightNew():!this.scrollStartTime&&this.newOnScrollUp&&(this.scrollStartTime=t),this.lastScrollTopPosition=e,this.onScrollSeenTimer&&clearTimeout(this.onScrollSeenTimer),this.pauseToNew&&(this.onScrollSeenTimer=setTimeout(this.boundHighlightNew,this.pauseToNew)),e>this.activateHeight+50?(this.button.classList.remove("__bottom","__hidden"),this.button.classList.add("__active","__animated"),this.isBottom=!1):e<this.activateHeight&&!this.isBottom&&this.hide()},e.prototype.hide=function(){this.button.classList.remove("__active")},e.prototype.onClick=function(e){return this.isBottom?(this.setScrollTop(this.scrollToBottomHeight),this.button.classList.remove("__bottom"),this.isBottom=!1):(this.scrollToBottomHeight=this.getScrollTop(),this.setScrollTop(this.scrollToTopHeight),this.showBottom&&(this.button.classList.add("__bottom"),this.isBottom=!0)),this.onScroll(),this.button.classList.contains("__new")&&this.link&&this.link.click(),OK.stop(e)},e}),define("OK/mrg/projects",[],function(){"use strict";var n,r,o="x-ph__menu_open",e="x-ph__menu_open_right",i="x-ph__menu_open_left";function t(){var t=this;this.toggleMenu=function(e){e.stopPropagation(),clearTimeout(r),r=null,t.box.classList.contains(o)?t.hideMenu():t.showMenu()},this.hideMenu=function(){document.removeEventListener("click",t.hideMenu),t.box.classList.remove(o),t.box.classList.remove(e),t.box.classList.remove(i)},this.showMenu=function(){document.addEventListener("click",t.hideMenu),t.box.classList.add(o),document.documentElement.clientWidth<1200&&600<n.clientWidth?t.box.classList.add(e):t.box.classList.add(i)},this.onMouseOver=function(){clearTimeout(r),r=null},this.onMouseOut=function(){clearTimeout(r),r=setTimeout(t.hideMenu,4e3)}}return t.prototype={activate:function(e){this.link=e.querySelector(".portal-headline__menulink"),this.menu=e.querySelector(".portal-headline__menu"),this.box=e,n=document.getElementsByClassName("portal-headline__left")[0],null!==this.link&&null!==this.menu&&null!==this.box&&(this.link.addEventListener("click",this.toggleMenu,!1),this.link.addEventListener("mouseout",this.onMouseOut,!1),this.link.addEventListener("mouseover",this.onMouseOver,!1),this.menu.addEventListener("mouseout",this.onMouseOut,!1),this.menu.addEventListener("mouseover",this.onMouseOver,!1))},deactivate:function(){this.link&&(this.link.removeEventListener("click",this.toggleMenu,!1),this.link.removeEventListener("mouseout",this.onMouseOut,!1),this.link.removeEventListener("mouseover",this.onMouseOut,!1)),this.menu&&(this.menu.removeEventListener("mouseout",this.onMouseOut,!1),this.menu.removeEventListener("mouseover",this.onMouseOver,!1)),this.link=this.menu=this.box=null}},t}),define("OK/mrg/Updater",["OK/utils/dom"],function(s){"use strict";var o=document.head||document.getElementsByTagName("head")[0];function e(){this.counterStorage={}}return e.prototype.createCounter=function(e,t){var n=Number(e.getAttribute("data-timeout")),r=e.getAttribute("data-selector"),o=e.getAttribute("data-name"),i=e.getAttribute("data-url");i&&0<n&&(r=s.byClass(e,r),this.counterStorage.hasOwnProperty(o)?this.counterStorage[o].counters=this.counterStorage[o].counters.concat(r):(this.counterStorage[o]={extract:t,counters:r,url:i,script:null,timer:null},window[o]=this.process.bind(this,o)),this.update(o),this.counterStorage[o].timer||(this.counterStorage[o].timer=setInterval(this.update.bind(this,o),n)))},e.prototype.removeCounter=function(e){var t,n=e.getAttribute("data-name"),r=e.getAttribute("data-selector"),r=s.byClass(e,r);this.counterStorage.hasOwnProperty(n)&&(t=this.counterStorage[n],r.forEach(function(e){e=t.counters.indexOf(e);-1!==e&&t.counters.splice(e,1)}),t.counters.length||(t.timer&&(clearInterval(t.timer),t.timer=null),t.script&&(o.removeChild(t.script),t.script=null)))},e.prototype.update=function(e){var t=this.counterStorage[e],n=document.createElement("script");n.type="text/javascript",n.src=t.url+"&JSONP_call="+e+"&rnd="+Math.random(),t.script&&o.removeChild(t.script),o.appendChild(n),t.script=n},e.prototype.process=function(e,n){var t=this.counterStorage[e].counters,r=this.counterStorage[e].extract;t.slice().forEach(function(e){var t=r(n,e)||"";e.parentNode.classList.toggle("x-ph__link_ext",!!t),e.textContent=t})},new e}),define("OK/mrg/counters",["OK/mrg/Updater"],function(t){"use strict";function n(e,t){t=t.getAttribute("data-cnt");if(e&&"ok"===e.status&&e.data&&e.data[t]&&(0<e.data[t]||"99+"===e.data[t]))return e.data[t]}return{activate:function(e){t.createCounter(e,n)},deactivate:function(e){t.removeCounter(e)}}}),define("OK/mrg/wamba",["OK/mrg/Updater"],function(t){"use strict";function n(e){if(e&&e.counter)return e.counter}return{activate:function(e){t.createCounter(e,n)},deactivate:function(e){t.removeCounter(e)}}}),define("OK/HookModel",["OK/utils/utils"],function(e){var s={},r=e.deferred();return{init:function(e){r.resolve(e)},hookActivated:function(r){var o,i,e=s[r],t=new Promise(function(e,t){var n=OK.hookModel.getHookById(r);n?e(n.getInstance?n.getInstance():void 0):(o=e,i=t)});return o&&i&&(t.resolve=o,t.reject=i,e&&e.length||(s[r]=e=[]),e.push(t)),t},removeObserver:function(e,t){t=s[t];t&&t.length&&(-1!=(e=t.indexOf(e))&&t.splice(e,1))},activatedCallback:function(e,t){var n=s[e];n&&(delete s[e],n.forEach(function(e){e.resolve(t)}))},extractHookId:function(e){return e.substring(e.lastIndexOf("_")+1)},createHook:function(t,n){return r.promise.then(function(e){e.createHook(t,n)})}}}),define("OK/ToolbarBubble",[],function(){"use strict";var n={},r="notifications__hide",o="notifications__reply",i="notifications__emptySmall";function s(e,t){e.classList.add(t)}function a(e,t){e.classList.remove(t)}function c(e,t){return e.classList.contains(t)}function u(e){e=document.getElementById(e);return e?new d(e):null}function t(e){var t=n[e];if(!t){if(!(t=u(e)))return null;n[e]=t}return t}function l(e){n[e]&&delete n[e]}function d(e){this.bubbleElement=e,this.textElement=e.children[0]||e,this.val=this.textElement.innerHTML&&parseInt(this.textElement.innerHTML,10)||0}return d.prototype={hide:function(){this.update(0)},decrease:function(e){this.update(this.val-e)},resetCustomIcon:function(){var e=this.bubbleElement;a(e,o),a(e,i),this.val||s(e,r)},update:function(e){e=e<0?0:e;var t=99<(this.val=e)?"99+":e<=0?"":String(e),n=this.bubbleElement,e=this.textElement;t?e.innerHTML!==t&&(e.innerHTML=t,c(n,r)?(a(n,r),a(n,i)):(s(n,"notifications__blink"),setTimeout(function(){a(n,"notifications__blink")},300))):((t=n).classList.contains(o)||t.classList.contains(i)||s(n,r),e.innerHTML="")},showSmall:function(){a(this.bubbleElement,r),s(this.bubbleElement,i)},resolveCustomIcon:function(e,t){var n;n=this.bubbleElement,(t=t)&&(s(n,o),a(n,r)),t||a(n,o),this.update(e)},getCount:function(){return this.val},hasReply:function(){return c(this.bubbleElement,o)},hasBubble:function(){return this.hasReply()||0<this.getCount()}},{wrap:t,unwrap:l,create:u,activate:function(e){e=e.getAttribute("id");e&&t(e)},deactivate:function(e){e=e.getAttribute("id");e&&l(e)}}}),define("OK/ToolbarGrowl",["OK/logger","OK/utils/dom"],function(o,t){"use strict";var r=function(){var e,t,n=document.createElement("bootstrap"),r={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in r)if(r.hasOwnProperty(t)&&void 0!==n.style[t]){e=r[t];break}return o.success("growl","transition",e),e}(),n=null,i={},e=document.getElementById("msg_toolbar_button"),s=!(!e||!e.getAttribute("data-growl-add-log")),a=!!document.querySelector(".js-msg-ok"),c=!!document.querySelector(".js-msg-tt");function u(e){return e&&parseInt(e.getAttribute("data-time"),10)||0}function l(e){return t.firstByClass(e,"growl_close")}function d(e){this.hookId=e,this.hidden=!0,this.stash=null}return d.showAny=function(){var e,t;if(!n)for(e in i)if(i.hasOwnProperty(e)&&(t=i[e]).hidden&&(t.show(),!t.hidden))break},d.hideAll=function(){n&&n.hide()},d.destroyByLayerId=function(e){e=i[e];e&&e.destroy()},d.getByLayerId=function(e){return i[e]},d.prototype={activate:function(e){this.hook=this.getContentHook(),this.layerId=e.getAttribute("data-layer"),this.exclusive="true"===e.getAttribute("data-exclusive"),this.priority=parseInt(e.getAttribute("data-priority"),10)||0,(i[this.layerId]=this).hook&&(this.elem=this.hook.element.firstChild,this.elem&&(this.activateGrowl(),this.id=this.elem.getAttribute("data-id"),this.time=u(this.elem))),this.show()},activateGrowl:function(){var e=l(this.elem);e&&e.addEventListener("click",this)},deactivateGrowl:function(){var e=l(this.elem);e&&e.removeEventListener("click",this)},show:function(){if(this.id&&function(){return!(OK.Layers&&OK.Layers.isAnyLayerOpened()||document.getElementById("CallApplication")||document.querySelector(".discovery-menu.with-search.__search-wide")||"appMain"===OK.getCurrentDesktopModelId())}.call(this)){if(n){if(this.priority<=n.priority)return;o.success("growl","replace",this.layerId),n.hide()}if(this.elem.classList.add("__active"),this.hidden=!1,n=this,o.success("growl","show","music_app"===this.layerId?this.layerId+"-"+this.id:this.layerId),"messages"===this.layerId&&s)return o.success("messagesLayer","growl",c?"tt":a?"ok":"unknown")}},hide:function(){this.elem&&(this.elem.classList.remove("__active"),this.hidden=!0,this===n&&(n=null))},destroy:function(){this.elem&&(this.deactivateGrowl(),this.hide(),this.id=null,this.time=null,this.elem=null)},setNewContent:function(e){var t,n=(n=e,(t=document.createElement("div")).innerHTML=n,t.children.length?t.children[0]:null);OK.Layers&&OK.Layers.isLayerOpened(this.layerId)?o.success("growl","ignore"):n?(t=n.getAttribute("data-id"),n=u(n),this.exclusive&&this.id&&this.id!==t||(this.id!==t||this.time!==n?this.hidden?this.setNewGrowl(e,t,n):(this.stash={html:e,id:t,time:n},this.elem.addEventListener(r,this,!1),this.destroy()):o.success("growl","equal",1))):(this.destroy(),d.showAny())},applyNewContent:function(){this.hidden=!0,null===this.stash?OK.hookModel.setHookContent(this.getContentHookId(),""):(this.setNewGrowl(this.stash.html,this.stash.id,this.stash.time),o.success("growl","replace"),this.stash=null)},setNewGrowl:function(e,t,n){var r;this.id!==t||this.time!==n?(r=this.getContentHook(),OK.hookModel.setHookContent(r.id,e),this.elem=r.element.firstChild,this.id=t,this.time=n,this.activateGrowl(),setTimeout(this.show.bind(this),30)):o.success("growl","equal",2)},handleEvent:function(e){var t=e.type;"click"===t?(this.time>this.crossTime&&(this.crossTime=this.time),this.destroy(),d.showAny()):t===r&&"opacity"===e.propertyName&&(e.target.removeEventListener(r,this),this.applyNewContent())},getContentHookId:function(){return this.hookId+"_Content"},getContentHook:function(){return this.hook||(this.hook=OK.hookModel.getHookById(this.getContentHookId())),this.hook}},d}),define("OK/css-loader",[],function(){"use strict";function t(e,t,n){for(var r=document.getElementsByTagName("link"),o=0,i=r.length;o<i;o++)if(r[o].getAttribute("href")===e)return void(n&&n(r[o]));var s=document.createElement("link");s.rel="stylesheet",s.type="text/css",s.href=e,n&&(s.addEventListener("load",function(){n(e)}),s.addEventListener("error",function(e){n.error(e)})),(document.head||document.getElementsByTagName("head")[0]).appendChild(s)}return{load:t,activate:function(e){e=e.getAttribute("data-url");e&&t(e)}}}),define("OK/banners/StickyBannerContainer",["OK/utils/throttle"],function(t){"use strict";var n,r=OK.topPanelHeight()+12,o={};function i(e){var t;(this.hookEl=e)&&e.hasChildNodes()&&(t=e.getElementsByClassName("banner-sticky-container"),this.bannerContainer=0<t.length?t[0]:e.firstElementChild),this.currBannerContainerMinHeight=0,this.doReflow()}function s(){for(var e in o)o.hasOwnProperty(e)&&o[e].doReflow()}return i.prototype.doReflow=function(){var e,t;this.bannerContainer&&(e=this.bannerContainer.clientHeight,this.currBannerContainerMinHeight!==e&&(this.hookEl.style.minHeight=e+"px",this.currBannerContainerMinHeight=e),this.hookEl.getBoundingClientRect().top<=r?(t=document.getElementById("footer").getBoundingClientRect(),this.bannerContainer.style.position="fixed",e+r+12<t.top?(this.bannerContainer.style.top=r+"px",this.bannerContainer.style.bottom="auto"):(this.bannerContainer.style.top="auto",this.bannerContainer.style.bottom=document.documentElement.clientHeight-t.top+"px")):this.bannerContainer.style.position="static")},{activate:function(e){e&&e.id&&(o[e.id]=new i(e),n||(n=t(10,s),window.addEventListener("scroll",n,!1),window.addEventListener("resize",n,!1)))},deactivate:function(e){e&&e.id&&(delete o[e.id],0===Object.keys(o).length&&(window.removeEventListener("scroll",n,!1),window.removeEventListener("resize",n,!1),n=null))}}}),define("OK/banners/SmokescreenImgStyle",[],function(){function e(e){this.bannerPlace=e,this.stylesheetEl=null,this.styleData=[]}return e.prototype={updateStylesheet:function(e){if(this.stylesheetEl){var t=this.stylesheetEl.sheet;if(t){for(var n=t.cssRules.length-1;0<=n;n--)t.deleteRule(0);for(var r,o=this.styleData,n=0;n<o.length;n++){var i="b-img-"+this.bannerPlace+n,s=o[n].width,a=o[n].height;90<s&&(a=90*a/s,s=90),r="."+e.transform(i)+" {width: "+s+"px; height: "+a+"px; background: url('"+o[n].imgSrc+"') no-repeat;} ",t.insertRule(r,n)}this.styleData=[]}}},registerImageStyle:function(e,t,n){var r=this.styleData.length;return this.styleData.push({width:e,height:t,imgSrc:n}),r},createStyleEl:function(){var e=document.createElement("style");this.stylesheetEl=document.head.appendChild(e)}},e}),define("OK/banners/blockDetect/adbWhitelistDetect",["require","exports","OK/cookie"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.detect=void 0;var r;function o(n){return new Promise(function(e){var t=document.createElement("script");t.src="https://limg.imgsmail.ru/informers/abp/px.js?ch="+n,t.onload=e,t.onerror=e,document.head.appendChild(t)})}t.detect=function(e){return r=r||(e.adbWhiteListEnabled?(window.abp=window.abp||!1,new Promise(function(e,t){setTimeout(t,4e3),o(1).then(function(){return o(2)}).then(function(){window.abp?(e(),n.setCookie("abw","1",0,"/")):(t(),n.clearCookie("abw","/"))})})):Promise.reject())}}),define("mrg-smokescreen/Utils",[],function(){var s,a=!1;try{a="http://example.com/"===new URL("http://example.com/").href}catch(s){}function c(e,t){return Math.random()*(t-e+1)+e|0}function t(e){return Array.prototype.slice.call(e)}return{random:c,calcString:function(e,t){if(e=parseInt(e,10),function(){if(void 0===s)try{var e;"function"==typeof window.getComputedStyle&&((e=document.createElement("div")).style.height="calc(30px + 30px)",document.getElementsByTagName("body")[0].appendChild(e),s="60px"===window.getComputedStyle(e,null).getPropertyValue("height"),e.parentNode.removeChild(e))}catch(e){s=!1}return s}()){for(var n=[],r=0,o=0,i=c(1,6);o<i;o++)n.push(c(-100,100)),r+=n[n.length-1];return r!==e&&n.push(e-r),"calc("+n.map(function(e){return e.toString()+t}).join(" + ")+")"}return e+t},replaceUrl:function(e,t,n){if(a&&t){var r=e.charAt(0),o='"'===r||"'"===r,i=+o,o=n?e.indexOf((o?r:"")+")"):o?e.indexOf(r,1+i):e.length,r=e.slice(i,o);try{r=new URL(r,t).href}catch(e){}return e.slice(0,i)+r+e.slice(o)}return e},replaceContent:function(e){var t=e.charAt(0),n='"'===t||"'"===t,r=Number(n),t=n?e.indexOf(t,r):e.indexOf(";",r),o=e.slice(r,t),i="";if(/^\\[a-z0-9]+$/.test(o)||!n)i=o;else for(var s=0;s<o.length;s++){var a=o[s].charCodeAt(0);isNaN(a)||(i+="\\"+a.toString(16))}return e.slice(0,r)+i+e.slice(t)},iterate:function(e,t,n){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&"length"!==r&&t.call(n||this,e[r],r)},extend:function(){var e=t(arguments),n=e.shift();return e.forEach(function(e){for(var t in e)n[t]=e[t]}),n},merge:function(){var e=t(arguments),n=e.shift();return e.forEach(function(e){for(var t in e)n[t]||(n[t]=e[t])}),n},toArray:t,isUrlConstructorExists:function(){return a}}}),define("mrg-smokescreen/StyleSheets.Item",["mrg-smokescreen/Utils"],function(r){function n(e){e&&this.__rules.push(e)}function e(e,t){var n;this.__style=(e=e,(n=document.createElement("style")).appendChild(document.createTextNode("")),(e=e||{}).rel="stylesheet",e.type="text/css",e.media=e.media||"screen",r.iterate(e,function(e,t){e&&n.setAttribute(t,e)}),n),this.__style.__created=!0,this.__rules=[],this.__originalNode=t}return e.prototype={constructor:e,insert:function(){n.apply(this,arguments)},insertBlock:function(e,t){n.apply(this,[e+"{"+t+"}"])},setContent:function(e){this.__style.appendChild(document.createTextNode(e))},apply:function(){var e,t;this.__originalNode&&this.__originalNode.parentNode?(t=this.__originalNode,e=this.__style,(t=t.getAttribute("id"))&&e.setAttribute("id",t),this.__originalNode.parentNode.replaceChild(this.__style,this.__originalNode)):(function(){for(var e=document.styleSheets,t=e.length;0<t;t--){var n=e[t-1];if(n&&n.ownerNode&&n.ownerNode.parentNode)return n.ownerNode.parentNode}}()||document.head).appendChild(this.__style),function(){this.__rules.length&&this.__style.appendChild(document.createTextNode(this.__rules.join("\n")))}.apply(this)},getSheet:function(){return this.__style.sheet}},e}),define("mrg-smokescreen/StyleSheets.NativeParser",["mrg-smokescreen/Utils"],function(v){var y=/content\s*:\s*/;function b(e){return e.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})}var w=/^(-?\d+)([a-z%]+)$/,k=/\s(?![*+\-/]|[^()]+\)+|\(+)/;function s(e,t,n,r){for(var o,i,s,a="",c=t(e.selectorText),u=0;u<e.style.length;u++){var l="important"===e.style.getPropertyPriority(e.style[u])?" !important":"",d=e.style[u];/background-(repeat|position)-[xy]/.test(d)&&(d=d.replace(/-[xy]$/,""));var h=e.style[d]||e.style[b(d)];if(void 0!==h&&h.length||(d=d.replace(/-(value|(ltr|rtl)-source)$/g,""),h=e.style[d]||e.style[b(d)]),void 0!==(h=void 0===h&&"float"===d?e.style.cssFloat:h)&&h.length){if(r.randomize&&r.randomize.length&&-1<r.randomize.indexOf(d)&&c!=e.selectorText){for(var f=h.split(k),m=f.length,p=[];m--;){var g=w.exec(f[m]);p.unshift(g?v.calcString(g[1],g[2]):f[m])}h=p.join(" ")}a+=d+": "+h+l+"; "}}return-1!==a.indexOf("url(")&&(i=n,s=!0,a=a.split("url(").map(function(e){return s?(s=!1,e):v.replaceUrl(e,i,!0)}).join("url(")),-1!==a.indexOf("content")&&(o=!0,a=a.split(y).map(function(e){return o?(o=!1,e):v.replaceContent(e)}).join("content:")),c+" { "+a+" }"}return{iterate:function(e,n,r,o,i){i=i||{},v.iterate(function(e){try{return e.cssRules||e.rules}catch(e){return null}}(e),function(e){switch(e.type){case 1:o(s(e,n,r,i));break;case 4:var t=[];v.iterate(e.cssRules||e.rules,function(e){t.push(s(e,n,r,i))}),o("@media "+e.media.mediaText+" { "+t.join(" ")+" }");break;default:o(e.cssText)}})}}}),define("mrg-nano-xhr",[],function(){var h=new Function;return{version:"0.0.15",request:function(e,t){var n=e,r="GET",o=null,i=!1,s=!1,a=function(){var t={readyState:4,status:-1};t.open=t.send=h;try{t=new window.XMLHttpRequest}catch(e){try{t=new window.ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{t=new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}}return t}(),c=null,u=new Date,l={error:c,xhr:a};"object"==typeof e&&(n=e.url,r=e.method||r,o=e.body||o,i=e.sync||i,s=e.credentials||s),a.withCredentials=s,a.url=n;var d=function(){!c&&4!==a.readyState||(d=h,l.error=c,a.duration=new Date-u,a.onerror=a.onreadystatechange=null,"function"==typeof t&&t(c,a))};try{a.onreadystatechange=d,a.onerror=function(e){c=e,d()},a.open(r,n,!i),a.send(o)}catch(e){c=e,d()}return l}}}),define("mrg-smokescreen/StyleSheets",["mrg-smokescreen/StyleSheets.Item","mrg-smokescreen/StyleSheets.NativeParser","mrg-smokescreen/Utils","mrg-nano-xhr"],function(l,d,s,h){var o=/(^(https?:)?\/\/[^/]+|\?timestamp=\d+$)/g;function f(e){return e.replace(o,"")}function m(e,t){e=e(t);return(e!==t?e+",":"")+t}function p(e){var t;return t=e.ownerNode?f((t=e.ownerNode.href||e.ownerNode.getAttribute("x-href"))||""):t}var g={};return{update:function(i,c,u){return new Promise(function(t,a){var n,r;n=function(){var r,o,e=[].map.call(document.styleSheets,function(e){return e});r=i,o=function(){e.forEach(function(e){if(e.ownerNode&&!e.ownerNode.__created&&!e.__updated&&"LINK"===e.ownerNode.tagName){var t=e;e.__updated=!0;var n=p(e);if(n)try{var r,o=g[n];if(o){try{r=e.media?e.media.mediaText:""}catch(e){r=""}var i=new l({"x-href":n,media:r},e.ownerNode);i.setContent(o),i.apply(),(t=i.getSheet()).__updated=!0;var s=new l({"x-href":n,media:r},t.ownerNode);s.__updated=!0,d.iterate(t,m.bind(null,c),n,function(e){s.insert(e.toString())},u),s.apply()}}catch(e){a(e)}}}),t()},Object.keys(g).length===r.length&&o(),r.forEach(function(n){h.request({url:n,sync:!1},function(e,t){e&&a(e),4===t.readyState&&(g[f(n)]=t.responseText,Object.keys(g).length===r.length&&o())})})},r=i.map(f),function e(){s.iterate(document.styleSheets,function(e){var t;"LINK"===e.ownerNode.tagName&&(t=p(e).replace(o,""),r=r.filter(function(e){return t!==e}))}),r.length?setTimeout(e,100):n()}()})},remove:function(n){if((n=(n||[]).map(function(e){return(e||"").replace(/^https:/,"")})).length){var r=[];s.iterate(document.styleSheets,function(e){var t=p(e);t&&-1!==n.indexOf(t)&&r.push(e)});for(var e=r.length-1;0<=e;e--){var t=r[e];t.ownerNode.parentNode.removeChild(t.ownerNode)}}},insert:function(e,t){function r(e,t){return i(e)+(n=[],s.iterate(t,function(e,t){n.push(t+":"+e+";")}),"{"+n.join("\n")+"}");var n}var o=new l({}),i=m.bind(null,t);s.iterate(e,function(e,t){var n;/@(media|supports|document|page|keyframes|font-feature-values)/.test(t)?(n=[],s.iterate(e,function(e,t){n.push(r(t,e))}),o.insertBlock(t,n.join(""))):o.insert(r(t,e))}),o.apply()}}}),define("mrg-smokescreen/Cid",[],function(){var e=1e3,n=function(e){for(var t=0;t<10;t++)e.push(t.toString());for(t=0;t<25;t++)e.push(String.fromCharCode(97+t)),e.push(String.fromCharCode(65+t));return function(e){for(var t,n,r=e.length;0!==r;)n=Math.floor(Math.random()*r),t=e[--r],e[r]=e[n],e[n]=t;return e}(e)}([]),r=n.length,t=function(){for(var e=[],t=0;e.length<5&&t<n.length;t++)(0<e.length||!/[0-9]/.test(n[t]))&&e.push(n[t]);return e.join("")}();return function(){return t+function e(t){return(r<=t?e((t/r>>0)-1):"")+n[t%r>>0]}(e++)}}),define("mrg-smokescreen/Welter",["mrg-smokescreen/Cid","mrg-smokescreen/Utils"],function(t,c){"use strict";var n={};function u(){var e=t(!0);return n[e]=!0,e}return{isWelter:function(e){return void 0!==n[e]},wrap:function(e,t){function n(e){e&&c.toArray(e.querySelectorAll(t)).forEach(function(e){var t,n;e.classList.contains("js-welter-no-wrap")||(n=(n=(t=function e(t,n){for(var r=document.createDocumentFragment(),o=0,i=c.random(t/2,t);o<i;o++){var s=document.createElement("div");c.random(0,n)&&s.appendChild(e(t,n-1));var a=0;c.random(0,t)%2||(s.id=u(),a++),c.random(0,t)%5||(s.setAttribute("data-bem",u()),a++),c.random(0,t)%6||(s.setAttribute("data-mnemo",u()),a++),c.random(0,t)%3&&a||(s.className=u()),r.appendChild(s)}return r}(5,5)).querySelectorAll("div"))[c.random(0,n.length-1)],e&&n&&(e.originalParentNode=e.parentNode,e.parentNode.insertBefore(t,e),n.appendChild(e)))})}try{e.nodeType?n(e):0<=e.length?1===e.length?n(e[0]):c.toArray(e).forEach(n):console.warn('[Walter.wrap] this "context" not supported:',e)}catch(e){console.error(e)}}}}),define("mrg-smokescreen/Locator",["mrg-smokescreen/StyleSheets","mrg-smokescreen/Welter","mrg-smokescreen/Utils","mrg-smokescreen/Cid"],function(t,i,n,o){"use strict";var s,e,r,a,c=o(),u=0,l={names:{},reverse:{},wraps:{}},d={},h=!1,f=[],m=/([@#:.]*)([\w$-]+)/gi,p=[],g={},v=(e=["top","right","bottom","left"],a=["height","width","max-width","max-height","min-height","min-width"],(r=["margin","padding"]).forEach(function(t){e.forEach(function(e){a.push(t+"-"+e)})}),a.concat(e,r));function y(e){w(e)}function b(e){e&&p.push(e),p.forEach(function(e){t.insert(e,C)}),p=[]}function w(e,t){e=n.extend({},g,e||{}),(h=(g=e).enable?!0:h)&&e.match&&e.match instanceof Array&&0<e.match.length&&(f=f.concat(e.match),s=new RegExp("^("+f.join("|")+")")),e.randomize&&(e.randomize=!0===e.randomize?v:e.randomize),e.sheet&&b(e.sheet)}function k(e,t){return(t?t+"@@@":"")+e}function _(e,t){var n=k(e,t),r=l.names[n];return!r&&h&&s&&s.test(t||e)&&(r=o(),l.names[n]=r,l.reverse[r]=e),r||e}function O(e,t){e=E(e);return t?_(e.elem,t)+(e.mod?"_"+_(e.mod,t):""):_(e.elem)+(e.mod?"_"+_(e.mod,e.elem):"")}function E(e){var t,n=(e?""+e:"").match(/^(.*?[^_])(_([^_]+))?$/);return n&&(e=n[1],t=n[3]),{elem:e,mod:t}}function C(e){return e.replace(m,function(e,t,n){return!t||/:/.test(t)?e:t+O(n)})}function S(e,t){e=E(e);return t?(l.names[k(e.elem,t)]||e.elem)+(e.mod?"_"+(l.names[k(e.mod,t)]||e.mod):""):(l.names[e.elem]||e.elem)+(e.mod?"_"+(l.names[k(e.mod,e.elem)]||e.mod):"")}function L(e,t,n){return(e||"").toString().split(/\s+/).map(function(e){return t(e,n)}).join(" ")}function T(e){e=E(e);return(l.reverse[e.elem]||e.elem)+(e.mod?"_"+(l.reverse[e.mod]||e.mod):"")}return y.prototype={constructor:y,setup:w,selector:function(e,t){var n=C(e);return t||e==n?n:n+", "+e},transform:function(e,t){return L(e,O,t)},lookup:function(e,t){return L(e,S,t)},updateSheets:function(e){if(h&&e)return t.update(e,C,g)},removeSheets:function(e){h&&e&&t.remove(e)},insertSheet:b,reverse:function(e){return L(e,T)},isWelter:function(e){return i.isWelter(e)},wrap:function(e,n){var r,o;h&&((n=n||document)[c]?r=n[c]:(r=++u,n[c]=r),null==(o=d[r])&&(o={}),e.forEach(function(e){var t;o[e]||(t=C(e),o[e]=t,d[r]=o,i.wrap(n,t))}))},calcString:function(e,t){return h?n.calcString(e,t):e+t},removeCache:function(e){delete d[e[c]],delete e[c]},isEnabled:function(){return h}},y}),define("OK/Smokescreen",["mrg-smokescreen/Locator"],function(t){"use strict";var n=null;return{getLocator:function(e){return n=n||new t({enable:!0,randomize:e||!1,match:[".*"]})},getById:function(e){var t=document.getElementById(e);return(t=!t&&n?document.getElementById(n.transform(e)):t)||null}}}),define("mrg-smokescreen/Honeypot",["OK/logger"],function(b){return{version:"1.3.0",check:function(e,t,n){var r,i,s,a,c,u,l,d,h=document.getElementsByTagName("body")[0];if(h){try{var o=(r=e,i=/^([a-z][a-z0-9]*)/g,s=/^\.([A-z0-9\-\_]+)/g,a=/^#([A-z0-9\-\_]+)/g,c=/^@([A-z0-9\-\_]+)="((?:[^"\\]|\\.)*)"/g,u=/^\*(\d+)/g,l=new RegExp('"',"g"),d=/\s+/,r.map(function(e){var t,n=e.split(d),e=(e.match(l)||[]).length;if(0<e&&e%2==0)for(var r=null,o=0;o<n.length;o++)null===r?(t=(n[o].match(l)||[]).length)&&t%2&&(r=o):(n[r]+=" "+n[o],-1!==n[o].indexOf('"')&&(r=null),n[o]=void 0);return n.filter(function(e){return e}).map(function(e){if(e){for(var t,n={multi:1};i.lastIndex=0,s.lastIndex=0,a.lastIndex=0,c.lastIndex=0,u.lastIndex=0,(t=i.exec(e))?(e=e.substr(i.lastIndex),n.tag=t[1]):(t=s.exec(e))?(e=e.substr(s.lastIndex),n.classes=n.classes||[],n.classes.push(t[1])):(t=a.exec(e))?(e=e.substr(a.lastIndex),n.id=t[1]):(t=c.exec(e))?(e=e.substr(c.lastIndex),n.attrs=n.attrs||{},n.attrs[t[1]]=t[2].replace(/\\/g,"")):(t=u.exec(e))&&(e=e.substr(u.lastIndex),n.multi=parseInt(t[1])),t&&e.length;);if(e.length)throw new Error('Unparsed template: "'+e+'"');return n}})})),f={available:"function"==typeof window.getComputedStyle,styles:(t||[]).map(function(e){e=e.split(/\s*:\s*/);return{field:e[0],value:e[1]}})};if(function(e){if((e||"").length)try{var t=new RegExp(e);return 0<Object.keys(window).filter(function(e){return e.match(t)}).length}catch(e){}}(n))return!0;for(var m,p,g=[],v=[],y=0;y<o.length;y++)o[y]&&o[y].length&&((m=function(e){for(var t,n=[],r=[];t=e.pop();){var o,i=document.createElement(t.tag||"div");for(o in t.attrs||(t.attrs={}),t.id&&(t.attrs.id=t.id),t.classes&&(t.attrs.class=t.classes.join(" ")),t.attrs)t.attrs.hasOwnProperty(o)&&"length"!==o&&i.setAttribute(o,t.attrs[o]);for(r.forEach(function(e){i.appendChild(e)}),r=[],n.push(i),r.push(i),o=1;o<t.multi;o++){var s=i.cloneNode(!0);n.push(s),r.push(s)}}return{baits:n,nodes:r}}(o[y])).nodes&&m.baits&&m.baits.length&&((p=document.createElement("div")).style.position="absolute",p.style.visibility="hidden",m.nodes.forEach(function(e){p.appendChild(e)}),h.appendChild(p),m.baits.forEach(function(e){var t;t=e,(e=f).available&&e.styles.forEach(function(e){t.style[e.field]=e.value})}),g=g.concat(m.baits),v.push(p)));return new Promise(function(e){window.setTimeout(function(){var o=!1;g.forEach(function(e){var t,n,r;null!==e.offsetParent&&((t=f).available&&(r=window.getComputedStyle(e,null),t.styles.forEach(function(e){n=n||r[e.field]!==e.value&&"auto"!==r[e.field]})),!n)||(o=!0)}),v.forEach(function(e){h.removeChild(e)}),e(!0===o)},100)})}catch(e){b.success("nb_error","honeypot",e)}return!1}}}}),define("OK/banners/blockDetect/honeypotBlockDetect",["mrg-smokescreen/Honeypot"],function(r){return function(e){if(!e.honeypotEnabled)return Promise.resolve(!1);var t=e.honeypotRules||[".dialogWrapperBanner"],n=e.honeypotCssRules||["position: relative"],e=e.honeypotJsConfig||null;return r.check(t,n,e)}}),define("OK/banners/blockDetect/networkBlockDetect",[],function(){var n,r;return function(){return new Promise(function(e){function t(){e(!0)}window.mailruEnabled=function(){e(!1)},(n=document.createElement("script")).type="text/javascript",n.src="//ad.mail.ru/adq/?callback=mailruEnabled&"+Date.now(),n.onerror=t,document.head.appendChild(n),r=setTimeout(t,4e3)}).then(function(e){return document.head.removeChild(n),window.mailruEnabled=null,n=null,clearTimeout(r),e})}}),define("OK/banners/blockDetect/blockDetect",["OK/logger","OK/cookie","OK/banners/blockDetect/honeypotBlockDetect","OK/banners/blockDetect/networkBlockDetect","OK/banners/blockDetect/adbWhitelistDetect"],function(f,m,p,g,v){function y(e){f.success("nb_success","detect",e)}return function(h){return document.documentElement.classList.contains("ie")?Promise.resolve(!1):new Promise(function(t){var n,r,o,e=g(h),i=p(h),s=v.detect(h),a=3;function c(){return o||r}function u(){var e;0==--a&&(e=c()&&!n,t(e),e?(o&&r?y("all"):(r&&y("network"),o&&y("honeypot")),m.setCookie("nbp","1",15,"/")):(f.success("nb_success","not_detect",n?"whitelist":""),m.clearCookie("nbp","/")))}function l(e){return e&&!1===n&&t(!0),e}function d(){return f.success("nb_error","detect","catch"),!1}e.then(l,d).then(function(e){r=e,u()}),i.then(l,d).then(function(e){o=e,u()}),s.then(function(){return t(!1),!0},function(){return c()&&t(!0),!1}).then(function(e){n=e,u()})})}}),define("OK/banners/moneySave",["OK/utils/dom","OK/logger","OK/utils/vanilla","OK/banners/StickyBannerContainer","OK/Smokescreen","mrg-smokescreen/Welter","mrg-smokescreen/Utils","OK/banners/blockDetect/blockDetect","OK/banners/SmokescreenImgStyle"],function(d,l,n,h,t,c,r,o,e){var i,f,s,a,u,m,p,g,v,y,b,w="nb_success",k="nb_error",_="LeftColumnBannerInner",O="js-place",E="wss://ad.mail.ru/mimic/v1/ws",C=!0,S=!1,L=!1,T=!1,x={topRight:"",message:"",discussion:"",bottomLeft:""},K={topRight:"",message:"",discussion:"",bottomLeft:""},I={topRight:3,message:3,discussion:3,bottomLeft:5},N="",A=!1,B={topRight:-1,message:-1,discussion:-1,bottomLeft:-1},M="",H="",P="",R=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,D=(d.byClass,d.firstByClass),j={topRight:[],message:[],discussion:[],bottomLeft:[]},q=new Promise(function(e){s=e}),F=new Promise(function(e){a=e}),U=!1,W={bottomLeft:new e("bottomLeft"),topRight:new e("topRight")},z={leftAdCont:"mainContentLeftColumn",leftAdWrapper:"leftColumn",hookBlockMainContent:"hook_Block_MainContent"},J={leftAdCont:"hook_Block_AsideColumn",leftAdWrapper:"hook_Block_AsideColumn",hookBlockMainContent:"hook_Block_MainContent2"},G=z;function X(){var e;U&&(e=document.getElementById("hook_Block_MainContent2"),G=e?J:z)}function V(e,t){var n=e+"Smokescreen";try{le().then(t).catch(function(e){l.success(k,n,e)})}catch(e){l.success(k,n,e)}}function $(i,e,s,a){L&&"bottomLeft"===s?V(s,function(){var e,t,n,r,o=document.getElementById(G.leftAdWrapper);o&&((e=document.getElementById("hook_Block_StickyBannerContainer"))?(t=document.getElementById("mainContent"),n=document.getElementById("hook_Block_StickyBannerContainer"),r=document.querySelector(".layout-aside"),t&&n?(t.classList.contains("narrow-feed")&&n.classList.add("narrow-feed"),t.classList.contains("profile-v2")&&n.classList.add("profile-v2"),t.classList.contains("wide-profile")&&n.classList.add("wide-profile"),t.classList.contains("mainContentDoubleColumn")&&n.classList.add("mainContentDoubleColumn")):!t&&n&&n.classList.add("layout-container"),r&&n&&(n.classList.add("layout-aside"),r.classList.contains("left-column-redesign")&&n.classList.add("left-column-redesign")),Y(e,["#hook_Block_CompactFooter"]),f.wrap(["#hook_Block_StickyBannerContainer"],o),c.wrap(o,"#"+G.leftAdWrapper+' > [id^="hook_Block"]'),(r=ee("stickyBannerHook"))&&r.applySmokescreen(f)):Y(i,["#hook_Block_CompactFooter"],!0),W.bottomLeft.updateStylesheet(f),a(),n=s,(o=(e=i).parentNode)&&(Z(r=e.cloneNode(!0),n),o.replaceChild(r,e)))}):"topRight"===s&&S?V(s,function(){Y(i,!1,!0),Z(i,s),W.topRight.updateStylesheet(f),a()}):a()}function Z(e,t){for(var n=j[t],r=e.getElementsByClassName(f.transform("b-js__href")),o=0;o<r.length;o++){var i=r[o].getAttribute("data-nbh");if(null!=i)try{var s=n[parseInt(i,10)];s&&r[o].addEventListener("click",he.bind(r[o],s,t))}catch(e){l.success(k,t+"Smokescreen",e)}r[o].removeAttribute("data-nbh")}j[t]=[]}function Y(e,t,n){if(t)for(var r=0;r<t.length;++r)if(e.matches(t[r]))return;n||function(t){t.id&&(t.id=f.transform(t.id)),t.className?t.className=f.transform(t.className):t.removeAttribute("class");var n={};["data-name","data-params","data-dependencies","data-fallback","jsplace"].forEach(function(e){t.hasAttribute(e)&&(n[e]=t.getAttribute(e),t.removeAttribute(e))}),!n.hasOwnProperty("jsplace")&&""!==t.getAttribute("style")||t.removeAttribute("style"),t.okData=n}(e);for(var o=e.children,i=o.length,s=0;s<i;s++)Y(o[s],t)}function Q(e,t){return D(e,t)||(f?D(e,f.transform(t)):null)}function ee(e){e=Q(document,e);return e?e.nativeHookImpl:null}function te(e){var t;e&&D(e,"js-banner-wrapper")&&((t=D(e,"feed_close"))&&t.addEventListener("click",function(){!function e(t){var n=t.children;t.removeAttribute("style");for(var r=n.length,o=0;o<r;o++){var i=n[o];i.classList.contains("delete-stub")||"DIV"===i.tagName&&e(i)}}(e)}))}function ne(){var e=D(document,"feed-list");if(e){for(var t=e.children,n=t.length,r=0;r<n;r++)te(t[r]);R&&new R(function(e){e.forEach(function(e){e=e.addedNodes[0];e&&te(D(e,"feed"))})}).observe(e,{attributes:!1,childList:!0,characterData:!1})}}function re(){return y=y||new Promise(function(e){b=e})}function oe(e){X();var t=document.getElementById(G.hookBlockMainContent);t&&R&&new R(function(e){e.forEach(function(e){"childList"===e.type&&0<e.addedNodes.length&&ne()})}).observe(t,{childList:!0}),ne(),Promise.all([F,re()]).then(function(e){var t,n,r,o,i,c,s,a,u,l;e[1]&&(v&&(X(),r=function(){return document.getElementById("hook_ViewportHeightAwareBanner_ViewportHeightAwareBannerInner")||document.getElementById(_)||document.querySelector("#hook_Block_ViewportHeightAwareBanner .banner_new__vha")},o=document.getElementById(G.leftAdCont),(i=r())&&o&&(c=!1,i.id!==_||(l=Q(i,"banner-controller"))&&(c="true"===l.getAttribute("data-sticky-banner")),s=function(a,e){ie(a,0,"bottomLeft",function(){for(var e,t=Q(a,"b-context"),n=t.children.length,r=0,o=0,i=0;i<n;++i){var s=t.children[i];(r+=s.offsetHeight)>.65*window.innerHeight?s.classList.add(f.transform("b-invisible")):o++}return a.id===_?c&&((e=d.parent(a,"hookBlock"))&&h.activate(e),c=!1):(e=ee("stickyBannerHook"))&&e.doReflow(),o})},a=function(){var e=r(),t=document.getElementById(G.leftAdCont);e&&t&&s(e,t)},R&&(u=new R(function(e){e.forEach(function(e){e.attributeName,"childList"===e.type&&0<e.addedNodes.length&&a()})}),e=document.getElementById(G.hookBlockMainContent),u.observe(e,{childList:!0}),l=new R(function(e){e.forEach(function(e){"childList"===e.type&&0<e.addedNodes.length&&(X(),(e=document.getElementById(G.hookBlockMainContent))&&(u.observe(e,{childList:!0}),a()))})}),(e=document.getElementById("hook_Block_MainContentWrapper"))&&l.observe(e,{childList:!0})),s(i,o))),i=document.getElementById("hook_ToolbarIconDiscussions_ToolbarDiscussions"),o=new R(function(e){e.forEach(function(e){var t;"class"===e.attributeName&&OK.util.is4ColumnActive()&&e.target.classList.contains("toolbar_nav_a__discu__active")&&(!(t=D(document,"topPanel_d"))||(t=(e=D(t,"dialogWrapperBanner"))?D(e,"dialogWrapperBanner__inner"):null)&&""===t.innerHTML&&ie(t,0,"discussion"))})}),g&&i&&o.observe(i,{attributes:!0}),o=document.getElementById("msg_layer_wrapper"),i=document.getElementById("hook_Block_MessagesLayer"),p&&i&&o&&(t=function(e){var t=document.getElementById("hook_Block_MessagesAdsPanel"),n=document.getElementById("hook_BannerNew_MessagesAdsPanelInner")||document.getElementById("MessagesAdsPanelInner");t&&n&&(e?OK.util.is4ColumnActive()&&ie(n,0,"message"):t.setAttribute("style","display: none !important"))},(n=new R(function(e){t(!0),n.disconnect()})).observe(i,{childList:!0}),new R(function(e){e.forEach(function(e){"class"===e.attributeName&&t(!e.target.classList.contains("invisible"))})}).observe(o,{attributes:!0})))}),o(e).then(function(e){b(e)})}function ie(a,e,c,u){return new Promise(function(s){!function e(t,n,r){r();var o=B[t];A&&0<o&&window.setTimeout(function(){document.body.contains(n)&&n.offsetParent&&e(t,n,r)},1e3*o)}(c,a,function(){var o=new ae;function i(){o.cleanup()}o.getAds(c).then(function(n){var e="topRight"===c&&S||"bottomLeft"===c&&L,r=function(e,t,n,r,o){if(t&&t.body&&t.body.direct&&t.body.direct.ads){var i="",s=t.body.direct.ads,a=0;if(0===s.length)return l.success(k,"emptyAds"),0;for(var c=0;c<s.length&&!(n<=c);++c){var u=s[c];u&&(i+=function(e,t,n){if(t){var t=function(e){var t=j[n].length;return j[n].push(e),t}(e.url),r='<div class="b-context__title b-context__title__link b-js__href" data-nbh="'+t+'">'+(a=e.puny_domain?'<img class="b-context__favicon" src="//favicon.yandex.net/favicon/'+de(e.puny_domain)+'" alt=""/>':"")+de(e.title)+"</div>",o="";e.images&&e.images[0]&&(o='<div class="b-context__picture b-js__href b-img-'+n+W[n].registerImageStyle(de(e.images[0][1]),de(e.images[0][2]),de(e.images[0][0]))+'" data-nbh="'+t+'"></div>');var i='<div class="b-context__content b-context__content__link b-js__href" data-nbh="'+t+'">'+de(e.body)+"</div>",s=e.region?'<span class="b-context__contacts__item">'+de(e.region)+"</span>":"";return'<div class="b-context__item">'+r+o+i+'<div class="b-context__contacts b-context__contacts__item b-context__contacts__item_link b-js__href" data-nbh="'+t+'">'+de(e.domain)+s+"</div>"+(e.warning?'<div class="b-context__warning">'+de(e.warning)+"</div>":"")+"</div>"}var a=e.puny_domain?'<img class="b-context__favicon" src="//favicon.yandex.net/favicon/'+de(e.puny_domain)+'" alt=""/>':"";return r='<div class="b-context__title"><a class="b-context__title__link" href="'+de(e.url)+'" target="_blank">'+a+de(e.title)+"</a></div>",o=e.images&&e.images[0]?'<div class="b-context__picture"><a href="'+de(e.url)+'" target="_blank"><img src="'+de(e.images[0][0])+'" width="'+de(e.images[0][1])+'" height="'+de(e.images[0][2])+'" alt=""/></a></div>':"",i='<div class="b-context__content"><a class="b-context__content__link" href="'+de(e.url)+'" target="_blank">'+de(e.body)+"</a></div>",s=e.region?'<span class="b-context__contacts__item">'+de(e.region)+"</span>":"",'<div class="b-context__item">'+r+o+i+'<div class="b-context__contacts"><a class="b-context__contacts__item b-context__contacts__item_link" href="'+de(e.url)+'" target="_blank">'+de(e.domain)+"</a>"+s+"</div>"+(e.warning?'<div class="b-context__warning">'+de(e.warning)+"</div>":"")+"</div>"}(u,o,r),a++)}return i&&e&&(e.innerHTML='<div class="b-context '+O+'">'+i+"</div>"),a}l.success(k,"badDirectBlock")}(a,n.result,I[c],c,e);$(a,0,c,function(){var e,t;!u||0<=(t=u(a))&&(r=t),l.success(w,"showDirectAd",r),0<r?(e=n.id,t=K[c],(new Image).src="//rs.mail.ru/d"+t+".gif?rnd="+e+"&ts="+Date.now(),e=function(e,t){for(var n=e.body.direct.ads,r=e.body.common.link_head.replace(/^.+\/count\//,""),o=0;o<t;++o)r+=n[o].link_tail;return r}(n.result,r),o.sendCount(c,e).then(i,i)):i(),s()})})})})}function se(r,o){return new Promise(function(e,t){var n;try{n=JSON.parse(o)}catch(e){return l.success(k,"parseError"),void t()}return n&&n.error?(l.success(k,r+".respError",n.error),void t()):n&&n.result&&n.id?200!==n.result.status?(l.success(k,r+".badStatus",n.result.status),void t()):void e(n):(l.success(k,r+".badPayload"),void t())})}function ae(){Object.defineProperty(this,"getAds",{value:function(e){e="cmd="+H+"&gwt.requested="+window.pageCtx.gwtHash+"&mt=page&pl="+window.encodeURIComponent(e);return n.ajax({url:"/dk",data:e,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){return se("page",e.response)},function(e){l.success(k,"xhrErr",e.status)})}}),this.sendCount=function(e,t){t="cmd="+H+"&gwt.requested="+window.pageCtx.gwtHash+"&mt=count&pl="+e+"&cnt="+window.encodeURIComponent(t);return n.ajax({url:"/dk",data:t,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){return se("count",e.response)})},this.cleanup=function(){}}var ce,ue,le=function(){return q.then(function(){f=T?t.getLocator(["width"]):t.getLocator(),L&&W.bottomLeft.createStyleEl(),C&&W.topRight.createStyleEl();var e=f.updateSheets(i);return le=function(){return e},e})},de=(ce={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;"},ue=/&(?!#?\w+;)|<|>|"|'/g,function(e){return e?e.toString().replace(ue,function(e){return ce[e]||e}):""});function he(e,t,n){e&&(fe(e,t),n.stopPropagation())}function fe(e,t){var n,r;l.success(w,t,"click"),u?(t="/dk?cmd=logExternal&st.name=externalLinkRedirect&st.link="+window.encodeURIComponent(e)+"&st.sig="+m,n=window.open(t),r=function(){n.location.href=e,n.removeEventListener("load",r)},n.addEventListener("load",r,!1)):window.open(e)}return{activate:function(e){var t=e.getAttribute("data-config");"{"!==t[0]&&(t=atob(t)),(t=JSON.parse(t)).removeEl&&e.parentNode.removeChild(e),E=t.mimicUrl||E,C=t.topRightBannerEnabled||!1,p=t.messagesBannerEnabled||!1,g=t.discussionsBannerEnabled||!1,v=t.bottomLeftBannerEnabled||!1,x=t.statId||x,K=t.pixelId||K,A=t.refreshEnabled||!1,B=t.refreshInterval||B,N=t.pageId||N,M=t.whitelistSelector||M,H=t.secretCmd||"",P=t.secretFeedReplaceCmd||"",t.useHttp,t.debugOrigin,S=t.smokescreenTopRightEnabled||!1,t.smokescreenDiscussionsEnabled,t.smokescreenMessagesEnabled,L=t.smokescreenBottomLeftEnabled||!1,T=t.smokescreenRandomizeCss||!1,u=t.adLinksRedirectWrapperEnabled,m=t.redirectLinkToken,U=t.redesignEnabled,i=function(e){if(!e)return null;if(!r.isUrlConstructorExists())return null;var t=[];return e.forEach(function(e){t.push(new URL(e,window.location.href).href)}),t}(t.cssUrls),"interactive"===document.readyState||"complete"===document.readyState?oe(t):document.addEventListener("DOMContentLoaded",function(){oe(t)}),s()},ready:function(){return Promise.all([F,re(),le()])},onHooksReady:a,detectAdBlock:re,obfuscate:function(e,t,n){return le().then(function(){Y(e,t,n)})},obfuscateNow:Y,transform:function(e){return le().then(function(){return f.transform(e)})},transformNow:function(e){return f.transform(e)},activateLocator:function(){return le()},openLink:fe,attachTopRightBanner:function(e,t){return C&&e&&t?ie(t,0,"topRight"):Promise.reject()},getSecretFeedReplaceCmd:function(){return P}}}),define("OK/banners/BannerClickLog",["OK/utils/environment"],function(e){"use strict";var t=e.isDebug,e=function(){};return e.prototype={_onclick:function(){OK.logging.logger.success("banner.place",this.place,"click"),t&&console.info("banner click "+this.place)},activate:function(e){this.place=e.getAttribute("data-place"),this._onclickHandler=this._onclick.bind(this),e.addEventListener("click",this._onclickHandler)},deactivate:function(e){e.removeEventListener("click",this._onclickHandler)}},e}),define("OK/Pushes",["OK/NewsFetchCoordinator"],function(e){var o={};return{activate:function(){e.addBlock("PS")},subscribe:function(n,r){return o[n]||(o[n]=[]),o[n].push(r),function(){var e,t=o[n];t&&(0<=(e=t.indexOf(r))&&t.splice(e,1),0===t.length&&delete o[n])}},setNewContent:function(e){var r=OK.util.parseJsonCorrected(e);r&&Object.keys(r).forEach(function(e){var t,n=o[e];n&&(t=r[e],n.forEach(function(e){e(t)}))})}}}),define("b/primary",["OK/utils/utils","OK/utils/vanilla","OK/utils/throttle","OK/utils/debounce","OK/utils/requireBlock","OK/utils/dom","OK/utils/delegate","OK/cookie","OK/utils/environment","OK/LogClicks","OK/NewsFetchCoordinator","OK/CommentWidgets","OK/scrollToTop","OK/mrg/projects","OK/mrg/counters","OK/mrg/wamba","OK/HookModel","OK/ToolbarBubble","OK/ToolbarGrowl","OK/css-loader","OK/banners/StickyBannerContainer","OK/banners/SmokescreenImgStyle","OK/banners/blockDetect/adbWhitelistDetect","OK/banners/moneySave","OK/banners/BannerClickLog","OK/Pushes"],{});
