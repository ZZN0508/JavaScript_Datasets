YUI.add("stencil-sticker",function(n,t){"use strict";function e(t){this.constructor.superclass.constructor.call(this,t);var e=this._node,s=n.merge(e.getData(),t)||{},o=I(e,t),r={},i={},c=n.Node.create('<div class="StickyPholder"></div>');c.setStyle(d,e.getStyle(d)),r.marginTop=0,e.insert(c,"before"),t=c.getY(),k&&k.csstransforms3d&&(!n.UA.gecko||27<=n.UA.gecko)&&(r.transform=m),e.setStyles(r),r=e.get(g),i.pHolder=c,i.top=o,i.y=t,i.currentY=t,i.forcePosition=s["sticker-forceposition"],i.parentClass=s["sticker-parentclass"],i.vpTaller=n.DOM.viewportRegion().height>r,i.nodeHeight=r,i.offset=0,i.lastPos=p,e._sticker=i,U.push(e),P(e)}var c,i,s,o,r,a,l,k,d,p,g,_,u,h,f,m,y,v,S,A,C,b,H,U,M,D,P,E,Y,I,N,T,O;n.UA.ios&&n.UA.ios<5||n.UA.android&&n.UA.android<3||n.UA.silk||n.UA.userAgent.match(/Silk/)||n.UA.ie&&n.UA.ie<7||(c="bottom",i="Sticky",s="Sticky-off",r=n.config.doc,a=!(o="Sticky-on"),l=n.one("html"),k=Modernizr,d="marginTop",p="none",g="offsetHeight",_="px",u="resize",h="scroll",f="top",m="translate3d(0,0,0)",y=n.config.win,C=S=v=0,b=a,H=parseInt(n.one("body").getComputedStyle("minWidth"),10)||1150,U=[],M=null,D=function(t){var e;if((v=n.DOM.docScrollY())!==S||!t){for(M=n.DOM.viewportRegion(),e=U.length-1;0<=e;--e)U[e].getDOMNode()?P(U[e],t):U.splice(e,1);S=v}},P=function(t,e){var s,o,r,i=M;E(t,i),s=Math.round(t._sticker.y+t._sticker.nodeHeight+t._sticker.offset),r=t._sticker.forcePosition,o=Math.round(t._sticker.y+t._sticker.nodeHeight),(r||o<t._sticker.scrollHeight)&&(o=t._sticker.lastPos,o=r?"top"===r&&i.top+t._sticker.top>t._sticker.y?f:"bottom"===r&&i.bottom>=s-1?c:p:t._sticker.nodeHeight>i.height-t._sticker.top?((r=S<v)||!e)&&i.bottom>=s-1?c:!r&&e&&i.top+t._sticker.top<=t._sticker.currentY&&i.top+t._sticker.top>t._sticker.y?f:p:t._sticker.nodeHeight<=i.height-t._sticker.top&&v+t._sticker.top>t._sticker.y?f:p,(t._sticker.lastPos!==o||t._sticker.y>=i.top+t._sticker.top)&&Y(t,o))},E=function(t,e){var s=Math.round(t.getY());s<0&&t.hasClass(i)?s=e.top+s:t._sticker.lastPos===f&&(s=e.top+t._sticker.top),t._sticker.currentY=s,t._sticker.y=Math.round(t._sticker.pHolder.getY()),t._sticker.nodeHeight=t.get(g),t._sticker.offset=Math.max(s-t._sticker.y,0),t._sticker.vpTaller=e.height>t._sticker.nodeHeight,t._sticker.scrollHeight=Math.max(r.body.scrollHeight,r.documentElement.scrollHeight)},Y=function(t,e){var s,o,r={};e===f?(r={position:"",bottom:"",top:t._sticker.top+_,transform:m},t._sticker.translated=a):e===c?(r={position:"",bottom:0,top:"",transform:m},t._sticker.translated=a):(o=t._sticker.y<M.top+t._sticker.top?(s="translate3d(0,"+t._sticker.offset+_+",0)",t._sticker.offset+_):s="",r=k&&k.csstransforms3d&&!n.UA.gecko?{position:"",bottom:"",top:"",transform:s}:{position:"relative",bottom:"",top:o},t._sticker.translated=!0),n.UA.gecko&&n.UA.gecko<27&&(r.transform=void 0),e!==p?(t.addClass(i),t._sticker.parentClass&&t.get("parentNode").addClass(t._sticker.parentClass),t._sticker.sticky=!0,Stencil&&Stencil.utils&&Stencil.utils.dispatch(t.getDOMNode(),"sticker:sticky",{where:e})):(t.removeClass(i),t._sticker.parentClass&&t.get("parentNode").removeClass(t._sticker.parentClass),t._sticker.sticky=a),t._sticker.lastPos=e,t.setStyles(r)},I=function(t,e){e=n.merge(t.getData(),e);return e["sticker-top"]?parseInt(e["sticker-top"],10):e["sticker-toptarget"]?parseInt(n.one(e["sticker-toptarget"]).get(g),10):(e=n.one("body"),parseInt(e.getComputedStyle(d),10)||parseInt(e.getComputedStyle("paddingTop"),10)||0)},N=function(){r.documentElement.clientWidth>H?l.replaceClass(s,o):l.replaceClass(o,s),D()},T=function(t,e){b=a,C=+new Date,t&&t.call(void 0,e)},O=function(t){var e,s;t.type===h?(s=D,e=!0):t.type===u&&(s=N),s=n.bind(T,void 0,s,e),y.requestAnimationFrame?b||(b=!0,requestAnimationFrame(s)):(e=+new Date,C&&e<C+50?(y.clearTimeout(A),A=y.setTimeout(s,50)):s())},n.extend(e,n.Stencil.BasePlugin,{},{NS:"StencilSticker",requiresInit:!0,defaultTriggerEvents:[],updateAllNodes:D}),n.Stencil.registerPlugin(e,"Sticker"),y.addEventListener?(y.addEventListener(h,O,a),y.addEventListener(u,O,a)):(y.attachEvent("on"+h,O),y.attachEvent("on"+u,O)),v=n.DOM.docScrollY(),N())},"@VERSION@",{requires:["node-base","node-style","node-screen"]});
