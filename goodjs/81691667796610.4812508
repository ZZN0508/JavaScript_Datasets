!function(c){"use strict";var l={version:"3.7.0",built:"Thu Apr 22 2021 10:55:42 GMT+0200 (CEST)",env:"pro",cookiesNames:{accepted:"ue_privacyPolicy"},cookieExpireDays:750,ROOT_DOMAIN:null,ROOT_REFERRER_DOMAIN:null,policyVersion:"8",cmpIsReadyEventName:"ueCmpReady",cookieAcceptedEventName:"ueCookieAccepted",consentChangedEventName:"ueConsentChanged",noticeChangedEventName:"ueNoticeChanged",classShowPreferences:"js-uecookiespolicy-preferences-show",storedConsentsKey:"storedConsents",analytics:{consentDataKey:"ueConsentData",userContentGoogle:"ueUserContentGoogle",userContentComscore:"ueUserContentComscore",ueUserPurposes:"ueUserPurposes",eventNameGDPRAccepted:"ueAnalyticsGDPRAccepted"},portalHostsNames:[{name:"El Mundo",hostnameRegex:".elmundo.es",number:"8"},{name:"Marca",hostnameRegex:"^www.marca.com",number:"2",pathnameRegex:"^(?!(/claro-mx(?=$|[/])|/en(?=$|[/])))"},{name:"Marca Claro México",number:"2",hostnameRegex:"^www.marca.com",pathnameRegex:"^/claro-mx(?=$|[/])"},{name:"Marca English",number:"2",hostnameRegex:"^www.marca.com",pathnameRegex:"^/en(?=$|[/])"},{name:"Marca Claro Argentina",number:"22",hostnameRegex:"^ar.marca.com"},{name:"Marca Claro Colombia",number:"20",hostnameRegex:"^co.marca.com"},{name:"Marca Claro USA",number:"23",hostnameRegex:"^us.marca.com"},{name:"Marca",hostnameRegex:".marca.com",number:"",pathnameRegex:"^(?!(/claro-mx(?=$|[/])|/en(?=$|[/])))"},{name:"Expansión",number:"4",hostnameRegex:".expansion.com"},{name:"Telva",number:"1",hostnameRegex:".telva.com"}],vendorsAlias:[{id:77,alias:"comscore"}],googleIds:["google","c:google",755]};l.env&&"watch"!==l.env||(l.verbose=void 0===l.verbose||l.verbose),l.verbose;var o={addButtonEventListener:function e(){if(c.document.body)for(var t=document.getElementsByClassName(l.classShowPreferences),o=t.length,n=0;n<o;n++)t[n].addEventListener("click",function(e){e.preventDefault(),d.showPreferences(e)},!1);else c.addEventListener("DOMContentLoaded",e,!1)},overwriteHistoryPushState:function(){var t;"history"in c&&"function"==typeof c.history.pushState&&(t=c.history.pushState,c.history.pushState=function(e){return"function"==typeof c.history.onpushstate&&setTimeout(function(){c.history.onpushstate({state:e})},0),setTimeout(function(){o.dispatchEvent("pushstate",{state:e})},0),t.apply(history,arguments)})},dispatchEvent:function(e,t){return"function"!=typeof c.CustomEvent&&u.addPolyfillCustomEvent(),c.dispatchEvent(new CustomEvent(e,{detail:t}))},listenUserAllows:function(o){var n=[];function i(e){return-1!==document.location.href.indexOf(e)}function e(){var e,t=["lab.elmundo.es","#"].every(i);localStorage.setItem("checkingURLDone",!0),t?(n.push(r().scrollTop),e=n[0],t=n[n.length-1]-e,localStorage.setItem("initialScrollPosition",e),144<=t&&(s(),o.scroll())):(localStorage.removeItem("initialScrollPosition"),144<=r().scrollTop&&(s(),o.scroll()))}function t(){s(),o.pushstate()}function r(){var e=document.documentElement,t=document.body,o="scrollTop",n="scrollHeight",o=e[o]||t[o],n=e[n]||t[n];return{scrollTop:o,scrollHeight:n,percent:o/(n-e.clientHeight)*100}}function s(){c.removeEventListener("scroll",e,!1),c.removeEventListener("touchmove",e,!1),c.removeEventListener("pushstate",t,!1)}"function"==typeof o.scroll&&(c.addEventListener("scroll",e),c.addEventListener("touchmove",e)),"function"==typeof o.pushstate&&c.addEventListener("pushstate",t)}},u={addStyles:function(e){var t=document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e)),t.appendChild(o)},addScript:function(e,t){t=t||function(){};var o,n=document.createElement("script");for(o in e)n.setAttribute(o,e[o]);n.async=(void 0!==e.async?e:n).async,n.onload=function(e){t(e)},n.onerror=function(e){t(e)},document.getElementsByTagName("head")[0].appendChild(n)},getPortalByLocation:function(e){var t;return(e=e||l.portalHostsNames).some(function(e){return!(!new RegExp(e.hostnameRegex+"$","i").test(c.location.hostname)||e.pathnameRegex&&!new RegExp(e.pathnameRegex,"i").test(c.location.pathname)||(t=e,0))})?t:{name:""}},setLocalStorage:function(e,t){void 0===t&&(t=""),c.localStorage&&c.localStorage.setItem(e,t)},getLocalStorage:function(e){if(c.localStorage)return c.localStorage.getItem(e)},getCookieValue:function(e){e=document.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]+)");return e?c.decodeURIComponent(e.pop()):""},setCookie:function(e){var t=e.name+"="+(void 0===e.value?"":e.value);return t+=e.expires?"; expires="+e.expires:"",t+=e.maxAge?"; max-age="+e.maxAge:"",t+=null===e.path?"":"; path="+(void 0===e.path?"/":e.path),t+="; domain="+(e.domain||u.getRootDomain())+";",c.document.cookie=t},deleteCookie:function(e){return u.setCookie({name:e.name,value:e.value,path:e.path,expires:e.expires||new Date(0).toUTCString(),domain:e.domain})},resetCookieAndLocalStorage:function(e){(e=!e||"string"==typeof e?{cookies:[e],localStorage:[e]}:e)&&e.cookies&&e.cookies.length&&e.cookies.forEach(function(e){u.deleteCookie({name:e})}),e&&e.localStorage&&e.localStorage.length&&e.localStorage.forEach(function(e){localStorage.removeItem(e)})},getRootDomain:function(e){var t=e||c.document.location.hostname,e=(t=t.split("."))[t.length-1];return(t[t.length-2]||"")+(e?"."+e:"")},parseUri:function(e,t){for(var n={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},o=n.parser[t?"strict":"loose"].exec(e),i={},r=n.key.length;r--;)i[n.key[r]]=o[r]||"";return i[n.q.name]={},i[n.key[12]].replace(n.q.parser,function(e,t,o){t&&(i[n.q.name][t]=o)}),i},isAvailablesReferrerDomains:function(){if(!document.referrer)return!1;var e=new Array(l.ROOT_DOMAIN),t=u.parseUri(document.referrer,"strictMode").authority.split("."),t=l.ROOT_REFERRER_DOMAIN||t[t.length-2]+"."+t[t.length-1];return-1!=e.indexOf(t)},getUrlParams:function(e){var e=e||c.location.search,n={};return e.replace(/[?&]+([^=&]+)=?([^&]*)/gi,function(e,t,o){n[t]=o}),n},getReferrerRootDomain:function(){if(!document.referrer)return null;var e=u.parseUri(document.referrer,"strictMode").host.split("."),t=e[e.length-1];return(e[e.length-2]||"")+(t?"."+t:"")},asyncScrollTo:function(e,t){var o=e||{top:0,left:c.scrollX,behavior:"smooth"};t=t||500,setTimeout(function(){c.scrollTo(o)},t)},addPolyfillCustomEvent:function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var o=document.createEvent("CustomEvent");return o.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),o}"function"!=typeof c.CustomEvent&&(e.prototype=c.Event.prototype,c.CustomEvent=e)}},d={init:function(e){function t(){var t;d.Didomi=c.Didomi,"function"==typeof(t=o).onConsentChanged&&d.Didomi.on("consent.changed",function(e){t.onConsentChanged(e)}),"function"==typeof t.onNoticeChanged&&(d.Didomi.on("notice.shown",function(e){t.onNoticeChanged({isVisible:!0})}),d.Didomi.on("notice.hidden",function(e){t.onNoticeChanged({isVisible:!1})})),"function"==typeof o.didomiOnReady&&o.didomiOnReady(),d.Didomi&&"function"==typeof d.Didomi.getConfig&&(c.didomiConfig=Didomi.getConfig())}var o,s,i,a;function n(e,t,o,n){"function"==typeof o&&(c[i]||(c[i]=[]),1&&c[i].push({command:e,parameter:t,callback:o,version:n}))}function r(n){if(c[s]&&!0===c[s].stub&&n.data){var e,i,r="string"==typeof n.data;try{e=r?JSON.parse(n.data):n.data}catch(e){return}e[a]&&(i=e[a],c[s](i.command,i.parameter,function(e,t){var o={};o.__tcfapiReturn={returnValue:e,success:t,callId:i.callId},n.source.postMessage(r?JSON.stringify(o):o,"*")},i.version))}}c.gdprAppliesGlobally=!0,s="__tcfapi",i="__tcfapiBuffer",a="__tcfapiCall",n.stub=!0,"function"!=typeof c[s]&&(c[s]=n,c.addEventListener?c.addEventListener("message",r,!1):c.attachEvent("onmessage",r)),function e(t){var o,n;c.frames[t]||(document.body&&document.body.firstChild?(o=document.body,(n=document.createElement("iframe")).style.display="none",n.name=t,n.title=t,o.insertBefore(n,o.firstChild)):setTimeout(function(){e(t)},5))}("__tcfapiLocator"),o=(o=e)||{},c.Didomi?t():(c.didomiOnReady=c.didomiOnReady||[],c.didomiOnReady.push(function(e){t()}))},Didomi:null,consentData:null,getConsentData:function(e,o){var t=localStorage.getItem("euconsent-v2")||u.getCookieValue("euconsent-v2");return d.consentData=t,"function"==typeof o&&__tcfapi("getTCData",2,function(e,t){if(!t)throw new Error("Could not get the TCData.");o(e)}),d.consentData||void 0},getUserConsentStatusForVendor:function(e){if("number"!=typeof e&&"string"!=typeof e)throw new TypeError(e+" is not a valid type of vendorID");return d.Didomi&&"function"==typeof d.Didomi.getUserConsentStatusForVendor?d.Didomi.getUserConsentStatusForVendor(e):null},getUserConsentStatusForAll:function(){return d.Didomi&&"function"==typeof d.Didomi.getUserConsentStatusForAll?d.Didomi.getUserConsentStatusForAll():null},setDidomiUserAgreeToAll:function(t){d.Didomi&&"function"==typeof d.Didomi.setUserAgreeToAll?(d.Didomi.setUserAgreeToAll(),d.hideNotice(),"function"==typeof t&&t()):(c.didomiOnReady=c.didomiOnReady||[],c.didomiOnReady.push(function(e){setTimeout(function(){e.setUserAgreeToAll(),d.hideNotice(),"function"==typeof t&&t()},0)}))},isUserConsentStatusPartial:function(){return d.Didomi&&"function"==typeof d.Didomi.setUserAgreeToAll?d.Didomi.isUserConsentStatusPartial():null},showPreferences:function(e){d.Didomi&&d.Didomi.preferences&&"function"==typeof d.Didomi.preferences.show?d.Didomi.preferences.show():(c.didomiOnReady=c.didomiOnReady||[],c.didomiOnReady.push(function(e){e.preferences.show()}))},hidePreferences:function(){d.Didomi&&(d.Didomi.preferences,1)&&"function"==typeof d.Didomi.preferences.hide?d.Didomi.preferences.hide():(c.didomiOnReady=c.didomiOnReady||[],c.didomiOnReady.push(function(e){e.preferences.hide()}))},showNotice:function(e){d.Didomi&&(d.Didomi.preferences,1)&&"function"==typeof d.Didomi.preferences.show?d.Didomi.notice.show():(c.didomiOnReady=c.didomiOnReady||[],c.didomiOnReady.push(function(e){e.notice.show()}))},hideNotice:function(e){d.Didomi&&(d.Didomi.preferences,1)&&"function"==typeof d.Didomi.preferences.hide?d.Didomi.notice.hide():(c.didomiOnReady=c.didomiOnReady||[],c.didomiOnReady.push(function(e){e.notice.hide()}))},noticeIsVisible:function(){return d.Didomi&&d.Didomi.notice&&"function"==typeof d.Didomi.notice.isVisible?d.Didomi.notice.isVisible():null},getUserConsentStatus:function(e,t){return d.Didomi&&"function"==typeof d.Didomi.getUserConsentStatus?d.Didomi.getUserConsentStatus(e,t):null}},s={init:function(e){s.userPrivacyCookieValue=u.getCookieValue(l.cookiesNames.accepted)||null,l.ROOT_DOMAIN||(l.ROOT_DOMAIN=u.getRootDomain()),d.init({onConsentChanged:s.onConsentChanged,onNoticeChanged:s.onNoticeChanged,didomiOnReady:s.didomiOnReady}),o.overwriteHistoryPushState(),u.addPolyfillCustomEvent(),d.consentData=u.getLocalStorage(l.analytics.consentDataKey),s.checkPrivacyPolicy(),o.addButtonEventListener()},checkPrivacyPolicy:function(){var e=s.userPrivacyCookieValue||u.getCookieValue(l.cookiesNames.accepted);Boolean("_true"===u.getUrlParams()["gdpr-consent"])?d.setDidomiUserAgreeToAll(s.userHasAcceptPolicy):e?e===l.policyVersion?d.getConsentData()?s.userHasAcceptPolicy():(d.showNotice(),s.addAutoAcceptEventListeners()):s.isAvailablesReferrerDomains()&&"0"===e?s.userWasSetPolicyPreferences?s.userHasAcceptPolicy():d.setDidomiUserAgreeToAll(s.userHasAcceptPolicy):(s.setUePrivacyCookie("0"),s.analyticsEvents("0"),d.showNotice(),s.addAutoAcceptEventListeners(),d.getConsentData()&&u.resetCookieAndLocalStorage({cookies:["didomi_token","euconsent","euconsent-v2"],localStorage:["didomi_token","euconsent","euconsent-v2","ueConsentData","ueUserContentGoogle","ueUserContentComscore","ueUserPurposes"]})):(s.setUePrivacyCookie("0"),s.analyticsEvents("0"),s.addAutoAcceptEventListeners())},isAvailablesReferrerDomains:function(){return!!document.referrer&&u.getReferrerRootDomain(document.referrer)===l.ROOT_DOMAIN},onConsentChanged:function(e){var t={vendors:s.getUserConsentStatusForVendors()};t.eventData=e,s.userWasSetPolicyPreferences=!0,s.setUePrivacyCookie(l.policyVersion),s.analyticsEvents(l.policyVersion),s.updateLocalStorageData(t);t={consents:{vendors:t.vendors,purposes:t.eventData&&t.eventData.consentToken?t.eventData.consentToken.consents:null}};s.clearLocalStorageConsents(),o.dispatchEvent(l.consentChangedEventName,t)},onNoticeChanged:function(e){d.isUserConsentStatusPartial()||document.querySelector("body").classList.remove("no_scroll"),o.dispatchEvent(l.noticeChangedEventName,e||{})},didomiOnReady:function(){o.dispatchEvent(l.cmpIsReadyEventName),d.allVendors=s.getAllVendors(),s.updateLocalStorageData({vendors:s.getUserConsentStatusForVendors(["google","comscore"])}),d.isUserConsentStatusPartial()&&(document.querySelector("body").classList.add("no_scroll"),d.showNotice(),s.addAutoAcceptEventListeners(),l.verbose)},autoAcceptEventListenersAdded:!0,addAutoAcceptEventListeners:function(){s.autoAcceptEventListenersAdded||(s.autoAcceptEventListenersAdded=!0,o.listenUserAllows({scroll:function(){var e;s.userWasSetPolicyPreferences||(localStorage.checkingURLDone?(e=0===document.scrollTop?0:localStorage.getItem("initialScrollPosition"),s.isAccepted()||u.asyncScrollTo({top:e,left:c.scrollX,behavior:"smooth"})):s.isAccepted()||u.asyncScrollTo(),d.setDidomiUserAgreeToAll(),s.userHasAcceptPolicy(),["checkingURLDone","initialScrollPosition"].forEach(function(e){localStorage.removeItem(e)}))},pushstate:function(){s.userWasSetPolicyPreferences||d.setDidomiUserAgreeToAll(s.userHasAcceptPolicy)}}))},userHasAcceptPolicy:function(){s.setUePrivacyCookie(l.policyVersion),s.analyticsEvents(l.policyVersion),o.dispatchEvent(l.cookieAcceptedEventName)},updateLocalStorageData:function(e){(e=e||{}).vendors=e.vendors||{};var t=o(e.vendors.google);u.setLocalStorage(l.analytics.userContentGoogle,t);e=o(e.vendors.comscore);u.setLocalStorage(l.analytics.userContentComscore,e);e=JSON.stringify(this.getAllPurposesEnabled());function o(e){return void 0===e?"-1":e?"1":"0"}u.setLocalStorage(l.analytics.ueUserPurposes,e),d.getConsentData(),u.setLocalStorage(l.analytics.consentDataKey,d.consentData)},isAccepted:function(e){var t={};e?e.vendors&&(t.vendors=e.vendors):t.vendors=s.getAllVendors();var o,n,i=[],r=[];for(n in o=s.getUserConsentStatusForVendors(t.vendors))e||void 0!==o[n]?i.push(o[n]):l.verbose&&r.push(n);return l.verbose&&r.length&&i.length,!!(0<i.length&&i.every(function(e){return!0===e}))||!i.some(function(e){return!1===e})&&(!i.some(function(e){return void 0===e})&&i.some(function(e){return null===e})?null:void 0)},getUserConsentStatusForVendor:function(e){var t=l.googleIds,o=d.getUserConsentStatusForVendor(s.getVendorId(e));return o=!o&&t instanceof Array&&0<t.length&&new RegExp(t.join("|"),"gmi").test(e)?(t=t.map(function(e){return d.getUserConsentStatusForVendor(s.getVendorId(e))})).some(function(e){return e})||t.filter(function(e){return"boolean"==typeof e})[0]||t.filter(function(e){return null===e})[0]:o},getUserConsentStatusForVendors:function(e){var t,o=e,n={};return e instanceof Array||!e?e||(o=s.getAllVendors()):o=[e],o instanceof Array&&o.forEach(function(e){n[e]=s.getUserConsentStatusForVendor(e),null===n[e]&&(n[e]=function(){switch(u.getLocalStorage(function(e){switch(e.toString()){case"comscore":case"77":return l.analytics.userContentComscore;case"google":case"c:google":case 755:return l.analytics.userContentGoogle;default:return e}}(e))){case"-1":return;case"1":return!0;case"0":return!1;default:return null}}())}),e||(t=n,l.vendorsAlias instanceof Array&&l.vendorsAlias.forEach(function(e){t.hasOwnProperty(e.id)&&(t[e.alias]=t[e.id])})),n},getAllVendors:function(){var e=d.getUserConsentStatusForAll(),e=e&&e.vendors||{};return(e.enabled||[]).concat(e.disabled||[])},getVendorId:function(t){var o;l.vendorsAlias.some(function(e){if(e.alias===t)return o=e.id,!0});var e=(s.getAllVendors()||[]).find(function(e){return e==="c:"+t});return o||e||t},setUePrivacyCookie:function(s){var a=new Date;a.setTime(a.getTime()+864e5*l.cookieExpireDays),u.setCookie({name:l.cookiesNames.accepted,value:s,expires:a.toGMTString(),domain:l.ROOT_DOMAIN}),setTimeout(function(){function e(e){return document.cookie.split(e).length-1}var t=c.location.pathname.split("/"),o="/"+t[1],n=e("ue_privacyPolicy");if("/"!=o&&1<n){u.deleteCookie({name:"ue_privacyPolicy",path:null});for(var i="",r=0;r<t.length&&(i+="/"+(t[r+1]||""),u.deleteCookie({name:"ue_privacyPolicy",path:i}),!(e("ue_privacyPolicy")<=1));r++);document.cookie.split("ue_privacyPolicy").length-1==0&&u.setCookie({name:l.cookiesNames.accepted,value:s,expires:a.toGMTString(),domain:l.ROOT_DOMAIN})}},0)},userPrivacyCookieValue:null,userWasSetPolicyPreferences:!1,analyticsEvents:function(e){e===l.policyVersion&&s.userPrivacyCookieValue!==l.policyVersion&&o.dispatchEvent(l.analytics.eventNameGDPRAccepted)},getAllPurposesEnabled:function(){var e=d.getUserConsentStatusForAll();return e&&e.purposes&&e.purposes.enabled},getUserConsentStatus:function(e,t){var o=l.storedConsentsKey,n=u.getLocalStorage(o)||{};if((n="string"==typeof n?JSON.parse(n):n)&&n[t]&&n[t][e])return n[t][e];var i=d.getUserConsentStatus(e,t);return"boolean"==typeof i&&(n[t]=n[t]||{},n[t][e]=i,n="string"==typeof n?n:JSON.stringify(n),u.setLocalStorage(o,n)),i},clearLocalStorageConsents:function(){var e=l.storedConsentsKey;u.resetCookieAndLocalStorage({localStorage:[e]})}},e={isAccepted:s.isAccepted,getAllPurposesEnabled:s.getAllPurposesEnabled,getUserConsentStatusForVendor:s.getUserConsentStatusForVendor,getUserConsentStatusForVendors:s.getUserConsentStatusForVendors,getConsentData:d.getConsentData,getUserConsentStatus:s.getUserConsentStatus,preferences:{show:d.showPreferences,hide:d.hidePreferences},notice:{isVisible:d.noticeIsVisible},init:s.init};"undefined"!=typeof module&&void 0!==module.exports?module.exports=init:c&&(void 0===c.ueCookiesPolicy&&Object.defineProperty(c,"ueCookiesPolicy",{value:e,writable:!1}),s.init())}(window);
