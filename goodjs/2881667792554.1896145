YUI.add("cookie",function(n,e){function r(e){throw new TypeError(e)}function s(e){g(e)&&""!==e||r("Cookie name must be a non-empty string.")}function u(e){g(e)&&""!==e||r("Subcookie name must be a non-empty string.")}var t=n.Lang,o=n.Object,h=null,g=t.isString,a=t.isObject,k=t.isUndefined,c=t.isFunction,f=encodeURIComponent,S=decodeURIComponent,i=n.config.doc;n.Cookie={_createCookieString:function(e,t,n,o){o=o||{};var i=f(e)+"="+(n?f(t):t),e=o.expires,n=o.path,t=o.domain;return a(o)&&(e instanceof Date&&(i+="; expires="+e.toUTCString()),g(n)&&""!==n&&(i+="; path="+n),g(t)&&""!==t&&(i+="; domain="+t),!0===o.secure&&(i+="; secure")),i},_createCookieHashString:function(e){a(e)||r("Cookie._createCookieHashString(): Argument must be an object.");var n=[];return o.each(e,function(e,t){c(e)||k(e)||n.push(f(t)+"="+f(String(e)))}),n.join("&")},_parseCookieHash:function(e){var t,n=e.split("&"),o={};if(e.length)for(var i=0,r=n.length;i<r;i++)t=n[i].split("="),o[S(t[0])]=S(t[1]);return o},_parseCookieString:function(e,t,n){var o={};if(g(e)&&0<e.length)for(var i,r=!1===t?function(e){return e}:S,s=e.split(/;\s/g),u=h,a=h,c=0,f=s.length;c<f;c++){if((i=s[c].match(/([^=]+)=/i))instanceof Array)try{u=S(i[1]),a=r(s[c].substring(i[1].length+1))}catch(e){}else u=S(s[c]),a="";!k(n)&&n.reverseCookieLoading&&!k(o[u])||(o[u]=a)}return o},_setDoc:function(e){i=e},exists:function(e){return s(e),this._parseCookieString(i.cookie,!0).hasOwnProperty(e)},get:function(e,t){var n;return s(e),c(t)?(n=t,t={}):a(t)?n=t.converter:t={},e=this._parseCookieString(i.cookie,!t.raw,t)[e],k(e)?h:c(n)?n(e):e},getSub:function(e,t,n,o){o=this.getSubs(e,o);return o!==h?(u(t),k(o[t])?h:c(n)?n(o[t]):o[t]):h},getSubs:function(e,t){s(e);t=this._parseCookieString(i.cookie,!1,t);return g(t[e])?this._parseCookieHash(t[e]):h},remove:function(e,t){return s(e),t=n.merge(t||{},{expires:new Date(0)}),this.set(e,"",t)},removeSub:function(e,t,n){s(e),u(t),n=n||{};var o=this.getSubs(e);if(a(o)&&o.hasOwnProperty(t)){if(delete o[t],!n.removeIfEmpty)return this.setSubs(e,o,n);for(var i in o)if(o.hasOwnProperty(i)&&!c(o[i])&&!k(o[i]))return this.setSubs(e,o,n);return this.remove(e,n)}return""},set:function(e,t,n){s(e),k(t)&&r("Cookie.set(): Value cannot be undefined.");n=this._createCookieString(e,t,!(n=n||{}).raw,n);return i.cookie=n},setSub:function(e,t,n,o){s(e),u(t),k(n)&&r("Cookie.setSub(): Subcookie value cannot be undefined.");var i=this.getSubs(e);return(i=!a(i)?{}:i)[t]=n,this.setSubs(e,i,o)},setSubs:function(e,t,n){s(e),a(t)||r("Cookie.setSubs(): Cookie value must be an object.");n=this._createCookieString(e,this._createCookieHashString(t),!1,n);return i.cookie=n}}},"3.12.0",{requires:["yui-base"]});
