!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("React")):"function"==typeof define&&define.amd?define("@ali/gmod-pop-drogue",["React"],t):"object"==typeof exports?exports["@ali/gmod-pop-drogue"]=t(require("React")):e["@ali/gmod-pop-drogue"]=t(e.React)}(this,function(n){return o=[function(e,t,n){"use strict";e.exports=function(e){return e&&e.__esModule?e:{default:e}}},function(e,t){e.exports=n},function(e,t,n){"use strict";var o=n(0);t.__esModule=!0,t.default=void 0;var p=o(n(3)),s=o(n(4)),i="postMessage"in window;function r(e,t,n){var o="";if(arguments.length<2?o="target error - target and name are both required":"object"!=typeof e?o="target error - target itself must be window object":"string"!=typeof t&&(o="target error - target name must be string type"),o)throw new Error(o);this.target=e,this.name=t,this.prefix=n}function a(e,t){this.targets={},this.name=e,this.listenFunc=[],this.prefix=t||"[PROJECT_NAME]",this.initListen()}r.prototype.send=i?function(e){this.target.postMessage(this.prefix+"|"+this.name+"__Messenger__"+e,"*")}:function(e){var t=window.navigator[this.prefix+this.name];if("function"!=typeof t)throw new Error("target callback function is not defined");t(this.prefix+e,window)},a.prototype.addTarget=function(e,t){e=new r(e,t,this.prefix);this.targets[t]=e},a.prototype.initListen=function(){function e(e){if("object"==typeof e&&e.data&&e.data.indexOf&&0<=e.data.indexOf("__Messenger__"))for(var t=(e=e.data).split("__Messenger__"),n=(t=(e=t[1],t[0].split("|")))[0],o=t[1],i=0;i<r.listenFunc.length;i++)n+o===r.prefix+r.name&&r.listenFunc[i](e)}var r=this;i?"addEventListener"in document?window.addEventListener("message",e,!1):"attachEvent"in document&&window.attachEvent("onmessage",e):window.navigator[this.prefix+this.name]=e},a.prototype.listen=function(e){for(var t=0,n=this.listenFunc.length,o=!1;t<n;t++)if(this.listenFunc[t]==e){o=!0;break}o||this.listenFunc.push(e)},a.prototype.clear=function(){this.listenFunc=[]},a.prototype.send=function(e){var t,n=this.targets;for(t in n)n.hasOwnProperty(t)&&n[t].send(e)};var n=location.href.substring(0,location.href.indexOf("#")<0?location.href.length:location.href.indexOf("#")),n=n.substr(n.indexOf("?")),l={};n&&n.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(e,t,n,o){return l[t]=decodeURIComponent(o),""});var u,d=null;function c(e){d.send(JSON.stringify(e))}!function e(t,n){var o,i=(t=void 0===t?{}:t).__poplayer_preserve_uuid||l.__poplayer_preserve_uuid;i&&((d=new a(i,void 0)).addTarget(window.top,(t.__poplayer_preserve_uuid||l.__poplayer_preserve_uuid)+"parent"),o=n,window.addEventListener("load",function(){c({type:"load",extend:null!=o?o:{}})})),u={show:function(e){c({type:"show",extend:null!=e?e:{}})},link:function(e,t){c({type:"link",payload:e,extend:null!=t?t:{}})},close:function(e){c({type:"close",extend:null!=e?e:{}})},addTime:function(e,t){c({type:"addTime",payload:e=void 0===e?1:e,extend:null!=t?t:{}})},resizeTo:function(e,t){c({type:"resizeWidthPosition",payload:{width:e.width,height:e.height,left:e.left,right:e.right,top:e.top,bottom:e.bottom},extend:null!=t?t:{}})},init:e,callApp:function(e,t){var n=e.callAppUrl,o=e.targetUrl,i=e.pageCode,r=e.needRedirect,a=e.isAutoCall,l=e.spm,u=e.pageId,e=(0,s.default)(e,["callAppUrl","targetUrl","pageCode","needRedirect","isAutoCall","spm","pageId"]);c({type:"callApp",payload:(0,p.default)({callAppUrl:n,targetUrl:o,pageCode:i,needRedirect:r,isAutoCall:a,spm:l,pageId:u},e),extend:null!=t?t:{}})}}}();n=u;t.default=n},function(e,t,n){"use strict";function o(){return e.exports=o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,o=arguments[t];for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},o.apply(this,arguments)}e.exports=o},function(e,t,n){"use strict";e.exports=function(e,t){if(null==e)return{};for(var n,o={},i=Object.keys(e),r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}},function(e,t,n){"use strict";function o(t){var e=Object.keys(t.params).map(function(e){return e+"="+t.params[e]}).join("&");window.goldlog&&window.goldlog.record(t.path,t.event,"st_page_id=".concat(window.dmtrack_pageid,"&").concat(e),"POST")}function i(e){try{window.goldlog?e():(window.goldlog_queue||(window.goldlog_queue=[])).push({action:"goldlog.aplus_pubsub.subscribe",arguments:["goldlogReady",function(){e()}]})}catch(e){}}t.__esModule=!0,t.getPageId=function(){return new Promise(function(e){i(function(){e()})}).then(function(){return window.dmtrack_pageid})},t.click=function(e){i(function(){o({path:"/ae.pc_click.statweb_ae_click",event:"CLK",params:e})})},t.exposure=function(e){i(function(){o({path:"/ae.pc_ctr.statweb_ae_ctr",event:"EXP",params:e})})}},,,,function(e,t,n){e.exports=n(10)},function(e,t,n){"use strict";var o=n(0);t.__esModule=!0,t.default=void 0;var u=n(1),p=o(n(2)),s=n(5),d=o(n(11)).default;t.default=function(e){var t=e.uuid,n=e.parentSpmB,o=void 0===n?"0":n,e=e.popInfo,i=void 0===e?{}:e,e=(0,u.useState)(null),r=e[0],a=e[1];(0,u.useEffect)(function(){p.default.init({__poplayer_preserve_uuid:t});var e=(null==i?void 0:i.params)||{};Object.keys(e).length?(a(e),p.default.show(),p.default.addTime()):(0,s.exposure)({log_key:"/ae.pc_ctr.statweb_ae_ctr",spm_cnt:"a2g0o."+o+".poplayer.notexpose",popType:"smallImage",houyiTrack:null==e?void 0:e.track,exp_page:location.href,notexposeType:"nodata",exp_type:"poplayer",clientType:"pc"})},[]);var e=(0,u.useCallback)(function(){p.default.close(),p.default.addTime(-1)},[]),l=(0,u.useCallback)(function(e){e&&(p.default.link(e),p.default.close())},[]);return r?(0,u.createElement)("div",{className:"drogue-poplayer-modal",style:d["drogue-poplayer-modal"]},(0,u.createElement)("img",{className:"close-btn",onClick:e,src:"https://img.alicdn.com/tfs/TB1tH8.d3gP7K4jSZFqXXamhVXa-52-52.png",style:d["close-btn"]}),(0,u.createElement)("img",{className:"pop-picture",onClick:function(){l(r.linkUrl)},src:r.imgUrl,style:d["pop-picture"]})):null}},function(e,t){e.exports={"drogue-poplayer-modal":{width:120,height:152,position:"fixed",bottom:"20%",left:"4%",zIndex:1e4,display:"flex",flexDirection:"column",alignItems:"flex-end"},"close-btn":{width:"26px",height:"26px",marginBottom:"4px"},"pop-picture":{display:"block",width:"120px",height:"120px",borderWidth:"none",borderColor:null,overflow:"hidden",outline:"none !important",marginTop:0,marginRight:0,marginBottom:0,marginLeft:0}}}],r={},i.m=o,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=9).default;function i(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return o[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}var o,r});
