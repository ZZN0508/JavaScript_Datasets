var slideBoxList=[],Slide=function(s,t,e,i){s||console.error("娌℃湁鎸囧畾杞挱鍥惧灞侱om!"),i=i||{},this._addStyle(),this._addClass(s,"people-slide"),s.setAttribute("boxindex",slideBoxList.length),this._box=s,this.slideList=s.querySelectorAll(e),this.activeEl=this.slideList[0],this.slideName=e,this.activeIndex=0,this.config=i,this.slideCount=this.slideList.length,this.slideWidth=s.offsetWidth,this.slideHeight=s.offsetHeight,this.sliderUlWidth=this.slideWidth*this.slideCount;for(var a,n,l=0;l<this.slideList.length;l++){var o=this.slideList[l];this._addClass(o,"slide"),this._addClass(o,"slide-"+l),o.style.width=this.slideWidth+"px",o.style.height=this.slideHeight+"px"}this.container=s.querySelector(t),this.container.style.width=this.sliderUlWidth+"px",this.container.style.height=this.slideHeight+"px",1<this.slideList.length&&(this.container.style.marginLeft=-this.slideWidth+"px"),this.container.style.left="0px",this._addClass(this.container,"people-container"),slideBoxList.push(this),this.container.prepend?(n=(a=this.container.querySelectorAll(e))[a.length-1],this.container.prepend(n)):this.container.insertBefore&&(n=(a=this.container.querySelectorAll(e))[a.length-1],this.container.insertBefore(n,this.container.childNodes[0]));var h,d=this;i.autoPlay&&1<this.slideList.length&&setTimeout(function(){d.startAutoPlay(i.autoPlay)},0),i.nextEl&&(h=s.querySelector(i.nextEl))&&(h.onclick=function(){d.next()}),i.prevEl&&(h=s.querySelector(i.prevEl))&&(h.onclick=function(){d.prev()}),!i.numberPaginationEL||(h=s.querySelector(i.numberPaginationEL))&&(this.numberPaginationEL=h),d._changeSlide(),this.next=function(){var e=this;e.isBusy||this.slideList.length<2||(e.isBusy=!0,e.container.style.transition="left 0.2s",e.container.style.left=-this.slideWidth+"px",this.activeIndex++,this.activeIndex>=this.slideCount&&(this.activeIndex=0),setTimeout(function(){e.container.style.transition="";var t=e.container.querySelectorAll(e.slideName);e._appendChild(e.container,t[0]),e.container.style.left="0px"},2<this.slideList.length?300:0),e._changeSlide(),setTimeout(function(){e.isBusy=!1},300))},this.prev=function(){var e=this;e.isBusy||this.slideList.length<2||(e.isBusy=!0,this.container.style.transition="left 0.2s",e.container.style.left=this.slideWidth+"px",this.activeIndex--,this.activeIndex<0&&(this.activeIndex=this.slideCount-1),e._changeSlide(),setTimeout(function(){var t;e.container.style.transition="",e.container.prepend?(var聽slideList聽=聽_this.container.querySelectorAll(e.slideName),聽聽聽聽聽聽聽聽_this.container.prepend(t[t.length聽-聽1])):e.container.insertBefore&&(t=(t=e.container.querySelectorAll(e.slideName))[t.length-1],e.container.insertBefore(t,e.container.childNodes[0])),e.container.style.left="0px"},2<this.slideList.length?300:0),setTimeout(function(){e.isBusy=!1},300))},this.startAutoPlay=function(t){var e;t=t||3e3,this._autoPlayIsInit||this._initAutoPlay(t),null==this.clock&&((e=this).clock=setInterval(function(){e.isBusy||e.next()},t))},this.stopAutoPlay=function(){null!=this.clock&&(clearInterval(this.clock),this.clock=void 0)},this.resize=function(t){this.slideWidth=s.offsetWidth,this.slideHeight=s.offsetHeight,this.sliderUlWidth=this.slideWidth*this.slideCount;for(var e=0;e<this.slideList.length;e++){var i=this.slideList[e];this._addClass(i,"slide"),this._addClass(i,"slide-"+e),i.style.width=this.slideWidth+"px",i.style.height=this.slideHeight+"px"}this.container.style.width=this.sliderUlWidth+"px",this.container.style.height=this.slideHeight+"px",1<this.slideList.length&&(this.container.style.marginLeft=-this.slideWidth+"px")}};function showPlayerBox(t){t.box&&(box=t.box),clientWidth=document.body.clientWidth;var e=t.name||"_v_p_"+Math.round(1e3*Math.random()),i=t.width||600,s=clientWidth<=600&&isSafari?(i=parseInt(.9*clientWidth),parseInt(i/1.3333)):"string"==typeof i&&-1!=i.indexOf("%")&&isSafari?isUC?(i=getVideoWH(i),parseInt(i/1.3333)):"auto":t.height||497.5;if(_replay=t.replay,_objName=e,t.cdn="100,0,0,0",t.sl="5",objname=e,isSafari)safariObj.w=i,safariObj.h=s,safariObj.name=e,safariObj.ap=t.autoplay,safariObj.fullscreen=t.fullscreen,safariObj.ori=t.ori,null!=safariObj.ap&&null!=safariObj.ap||(safariObj.ap=!0),safariObj.toid=t.showid,safariObj.xml=t.id,safariObj.xml||(safariObj.xml=t.xml),safariObj.xml?$.getScript("http://tvplayer.people.com.cn/getXML.php?path="+safariObj.xml+"&callback=playForMobile&ios="+isIOS+"&ori="+safariObj.ori,function(){}):(isHTTPError=!0,showVideoCodeInPage());else{var a,n=[];for(a in t)n.push(a+"="+_$_getTransStr(t[a]));isMaxthon()&&n.push("ism=1"),n.push("key="+_$_getPageKey()),n=n.join("&"),1==t.fullscreen&&(s=i="100%"),t=2==t.skin?"http://tv.people.com.cn/img/2011ptv2/playerByOsmfnb.swf"+(isMaxthon()?"?"+Math.random():""):"http://tv.people.com.cn/img/2011ptv2/playerByOsmf.swf"+(isMaxthon()?"?"+Math.random():""),box.innerHTML='<object id="'+e+'" name="'+e+'" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,1,85,3" width="'+i+'" height="'+s+'" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" ><param name="movie" value="'+t+'" /><param name="FlashVars" value="'+n+'" /><param name="wmode" value="opaque" /><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="true" /><embed name="'+e+'" width="'+i+'" height="'+s+'" src="'+t+'" wmode="opaque" allowFullScreen="true" allowScriptAccess="always" pluginspage="http://www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash" FlashVars="'+n+'" type="application/x-shockwave-flash"></embed></object>'}}Slide.prototype._addClass=function(t,e){t.classList?t.classList.add(e):t.className+=" "+e},Slide.prototype._addEventListener=function(t,e,i){t.attachEvent?t.attachEvent(e,i):window.addEventListener&&t.addEventListener(e,i,!1)},Slide.prototype._appendChild=function(t,e){t.append?t.append(e):t.appendChild&&t.appendChild(e)},Slide.prototype._addStyle=function(t,e){var i,s;document.getElementById("peopleSlideStyle")||(i=".people-slide {position: relative;overflow: hidden;}.people-container {margin: 0;padding: 0;list-style: none;position: relative;height: 100%;}",i+=".people-container:after {content:'';height: 0;line-height: 0;display: block;visibility: hidden;clear: both;zoom: 1;}",i+=".people-container .slide {position: relative;display: block;float: left;margin: 0;padding: 0;}",document.all?document.createStyleSheet("").cssText=i:((s=document.createElement("style")).type="text/css",s.innerHTML=i,document.getElementsByTagName("HEAD").item(0).appendChild(s)))},Slide.prototype._initAutoPlay=function(e){var i=this;this._autoPlayIsInit=!0,e=e||3e3,this._addEventListener(this._box,"mouseover",function(t){setTimeout(function(){i.stopAutoPlay()},0)}),this._addEventListener(this._box,"mouseout",function(t){setTimeout(function(){null==i.clock&&i.startAutoPlay(e)},0)})},Slide.prototype._changeSlide=function(){this.numberPaginationEL&&(this.numberPaginationEL.innerHTML='<b class="active-index">'+(this.activeIndex+1)+'</b><span class="separator">/</span><em class="slide-count">'+this.slideCount+"</em>"),this.activeEl.classList?this.activeEl.classList.remove("active-slide"):this.activeEl.className=this.activeEl.className.replace(/(^|\s+)active-slide(?=$|\s+)/,""),this.activeEl=this.slideList[this.activeIndex],this._addClass(this.activeEl,"active-slide"),this.config.onSlideChange&&this.config.onSlideChange(this)};
