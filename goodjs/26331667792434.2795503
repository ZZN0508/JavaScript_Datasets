(window.monolithJsonpFunction=window.monolithJsonpFunction||[]).push([["fb039570","cc9dd1c9"],{10397:function(e,t,n){"use strict";n.r(t),n.d(t,"fps",function(){return d}),n.d(t,"load",function(){return v}),n.d(t,"metrics",function(){return p});function o(o,i){var n,c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,u=!(3<arguments.length&&void 0!==arguments[3])||arguments[3];return n=babelHelpers.asyncToGenerator(regeneratorRuntime.mark(function e(n,r){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(){switch(window.location.hostname){case"www.avito.ru":case"m.avito.ru":return!0;default:return!1}}(),e.next=3,i;case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}e.t0=a;case 6:if(!e.t0){e.next=10;break}e.t1=fetch("https://stats.avito.ru/api/".concat(c,"/stats/frontend/")+o,{method:"POST",body:JSON.stringify(u?(t=r,{data:n,meta:{connection:Object(s.a)(),page:t||l.a.initialPageId,platform:(t=l.a.initialPlatform,"".concat(t).concat(l.a.isDevEnv?"-dev":""))}}):{data:n})}).then(function(e){return e.json()}).catch(function(){}),e.next=11;break;case 10:e.t1=null;case 11:return e.abrupt("return",e.t1);case 12:case"end":return e.stop()}var t},e)})),function(e,t){return n.apply(this,arguments)}}var r,a,i,c,s=n(10953),u=n(5985),l=n(5986),f=(c=babelHelpers.asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n,r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(u.g)())return e.abrupt("return",!1);e.next=2;break;case 2:return t=l.a.initialPlatform,a=l.a.initialPageId,n=0,e.prev=4,r=o("balance",!0,1,!1),e.next=8,r({platform:t,pageId:a});case 8:a=e.sent,n=a&&a.result&&a.result.percent?a.result.percent:0,e.next=14;break;case 12:e.prev=12,e.t0=e.catch(4);case 14:return e.abrupt("return",Object(u.h)(n));case 15:case"end":return e.stop()}},e,null,[[4,12]])})),function(){return c.apply(this,arguments)}),n=new Promise(function(e){e(f())}),d=o("fps",n),v=o("load",n),p=(r=o("generic",n),a=new Map,i=function(){a.forEach(r),a.clear()},function e(){return setTimeout(function(){i(),e()},5e3)}(),window.addEventListener("visibilitychange",i,!0),window.addEventListener("beforeunload",function(){removeEventListener("visibilitychange",i,!0),i()}),function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:l.a.initialPageId,n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],e=[].concat(babelHelpers.toConsumableArray(a.get(t)||[]),babelHelpers.toConsumableArray(e));a.set(t,e),!0===n&&i()})},10401:function(e,t,n){"use strict";n.r(t),n.d(t,"observer",function(){return o});var s=n(10397),r=n(5985);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f="avito:measure:",a="measure",o=function(){if("PerformanceObserver"in window&&Object(r.d)(a))try{new PerformanceObserver(function(e){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e){if(e){if("string"==typeof e)return l(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?l(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(i)throw a}}}}(e.getEntries());try{for(n.s();!(t=n.n()).done;){var r,a,o,i,c,u=t.value;u.name.includes(f)&&(r=u.name.replace(f,"").split("."),o=(a=babelHelpers.toArray(r))[0],i=a[1],c=a.slice(2),Object(s.metrics)([{name:c.join("."),value:u.duration,prefix:i}],o))}}catch(e){n.e(e)}finally{n.f()}}).observe({type:a,buffered:!0})}catch(e){}}}}]);
