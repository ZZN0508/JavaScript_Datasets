!function(o){var n={};function r(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return o[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.m=o,r.c=n,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(o,n,function(e){return t[e]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(module,exports){window.FDX||(window.FDX={}),window.FDX.SHIPPINGROUTING={isSecure:!1,wifmUrlPath:"",magsUrlPath:"",mBoxId:"",clientId:"",fclaPagePath:"",loginCheck:"",loginData:"",url:"",defaultAccount:"",loginData2:"",authCallResult:"",userCheck:!1,activationStatus:"",source:"",creationTime:"",activationStatusResp:"",isLinkAvailable:!1,setSecureClientId:function(e){FDX.SHIPPINGROUTING.isSecure=e},setPaths:function(e,t,o,n,r){FDX.SHIPPINGROUTING.wifmUrlPath=e,FDX.SHIPPINGROUTING.magsUrlPath=t,FDX.SHIPPINGROUTING.mBoxId=o,FDX.SHIPPINGROUTING.fclaPagePath=n,FDX.SHIPPINGROUTING.clientId=r},valShippingAccount:function(e){var t={userName:"",password:""};t.userName=e.user,t.password=e.pwd,null===localStorage.getItem("loginDataStorage")&&FDX.CLIENTLOGIN.getOAuthToken();var o=JSON.parse(localStorage.getItem("loginDataStorage")),e=new Date(Date.parse(o.tokenExpireTime));Date.now()>e.getTime()&&(console.log("*** Shipping login inside condition check"),FDX.SHIPPINGROUTING.loginCheck=!0,FDX.CLIENTLOGIN.getOAuthToken()),$.ajax({type:"POST",url:"https://"+FDX.SESSION.apiURL+"/user/v2/login/validate",xhrFields:{withCredentials:!0},headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+o.token,"X-locale":"en_US","X-loggedin":"true","X-version":"1.0","X-clientid":FDX.SHIPPINGROUTING.clientId},data:JSON.stringify(t),dataType:"json",success:function(e){window.history.pushState({url:String(window.location.href)},"",window.location.href),FDX.SHIPPINGROUTING.checkSourceRequired(e)},error:function(e){var t,o,n=JSON.parse(e.responseText).errors[0].code;"LOGIN.INCOMPLETE.USER"===n?(window.history.pushState({url:String(window.location.href)},"",window.location.href),window.open(FDX.SHIPPINGROUTING.fclaPagePath,"_self","",!0)):"LOGIN.UNSUCCESSFULTYPE.ERROR"===n&&e.responseJSON.errors&&0<e.responseJSON.errors.length&&e.responseJSON.errors[0].message?(FDX.LOGIN.loginFailedMessage=decodeURIComponent(escape(e.responseJSON.errors[0].message)),FDX.LOGIN.showErrorMessage(),FDX.SESSION.setTargetRedirectAuth(!1)):"1000"===n&&e.responseJSON.errors&&0<e.responseJSON.errors.length&&e.responseJSON.errors[0].message?(o=e.responseJSON.errors[0].message,t=window.location.origin+FDX.contextPath+("/"+FDX.DATALAYER.page.pageInfo.locale.replace("_","-"))+"/customer-support.html",o=(o=(o=o.replace("{0}",t)).replace("{1}","customer-support")).replace("{2}","_self"),FDX.LOGIN.loginFailedMessage=decodeURIComponent(escape(o)),FDX.LOGIN.showErrorMessage(),FDX.SESSION.setTargetRedirectAuth(!1)):(null!==n&&e.responseJSON.errors&&0<e.responseJSON.errors.length&&e.responseJSON.errors[0].message?FDX.LOGIN.loginFailedMessage=decodeURIComponent(escape(e.responseJSON.errors[0].message)):FDX.LOGIN.loginFailedMessage="Sorry. Something went wrong. Please re-enter your user name and password to try again.",FDX.LOGIN.showErrorMessage(),FDX.SESSION.setAuthenticated(!1))}})},doAPIShipingUserisLoggedIn:function(){var e=JSON.parse(localStorage.getItem("loginDataStorage"));$.ajax({type:"GET",url:"https://"+FDX.SESSION.apiURL+"/user/v2/login",xhrFields:{withCredentials:!0},cache:!1,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+e.token,"X-locale":"en_US","X-loggedin":"true","X-version":"1.0","X-clientid":"LSHP"},success:function(e){FDX.CLIENTLOGIN.isLoggedInResponse=e,FDX.CLIENTLOGIN.userLoggedIn=FDX.CLIENTLOGIN.isLoggedInResponse.output.userLoggedIn,FDX.CLIENTLOGIN.userLoggedIn?($(".fxg-user-options__option.fxg-user-options__sign-in").addClass("fxg-dropdown__item--open"),window.history.pushState({url:String(window.location.href)},"",window.location.href),FDX.SHIPPINGROUTING.checkSourceRequired(e)):(FDX.SESSION.setTargetRedirectAuth(!1),FDX.SESSION.setUserModel(null),FDX.SESSION.userAuthenticated=!1,FDX.SESSION.destroyLogedInState(),e=new Date,e={eventData:{UUID:FDX.SESSION.getUUID()},eventAction:"State Verification Anonymous",type:"authentication",effect:"Indication anonymous state notification on page load",timestamp:e.toUTCString()},FDX.DATALAYER.event.push(e))},error:function(){FDX.SESSION.setTargetRedirectAuth(!1),window.history.pushState({url:String(window.location.href)},"",window.location.href),window.open(FDX.SHIPPINGROUTING.fclaPagePath,"_self","",!0)}})},evlUrl:function(){FDX.SHIPPINGROUTING.isManaged=FDX.SHIPPINGROUTING.loginData2.output.userProfile.isManaged,FDX.SHIPPINGROUTING.defaultAccount=FDX.SHIPPINGROUTING.loginData2.output.userProfile.defaultAccount,FDX.SESSION.setTargetRedirectAuth(!0),FDX.UTILNAV.showShippingContactName(FDX.SHIPPINGROUTING.loginData2.output.userProfile.registeredContactAndAddress.contact.personName.firstName),localStorage.setItem("targetUserAuthenticated",!0),FDX.LOGINCONTAINER.hideContainer(),FDX.UTILNAV.showAuthenticatedState(),FDX.SHIPPINGROUTING.identifyUserLink()},checkSourceRequired:function(e){FDX.SHIPPINGROUTING.loginData2=e,FDX.DROPDOWN.closeAllDropdowns(),FDX.SHIPPINGROUTING.mBoxId?FDX.SHIPPINGROUTING.checkActivationStatus():FDX.SHIPPINGROUTING.evlUrl()},checkActivationStatus:function(){var e=JSON.parse(localStorage.getItem("loginDataStorage"));$.ajax({type:"GET",url:"https://"+FDX.SESSION.apiURL+"/user/v1/users/activationinfo",xhrFields:{withCredentials:!0},headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+e.token,"X-locale":"en_US","X-loggedin":"true","X-version":"1.0","X-clientid":"LSHP"},success:function(e){console.log(e),FDX.SHIPPINGROUTING.activationStatusResp=e,FDX.SHIPPINGROUTING.activationStatus=FDX.SHIPPINGROUTING.activationStatusResp.output.useractivationstatus,FDX.SHIPPINGROUTING.source=FDX.SHIPPINGROUTING.activationStatusResp.output.source,FDX.SHIPPINGROUTING.creationTime=FDX.SHIPPINGROUTING.activationStatusResp.output.creationTime,sessionStorage.setItem("userActivationStatus",FDX.SHIPPINGROUTING.activationStatus),sessionStorage.setItem("creationTime",FDX.SHIPPINGROUTING.creationTime),"undefined"!==FDX.SHIPPINGROUTING.source&&sessionStorage.setItem("source",FDX.SHIPPINGROUTING.source),FDX.SHIPPINGROUTING.evlUrl()},error:function(){FDX.SHIPPINGROUTING.evlUrl(),console.log("*** Activation-Info API Call Error ")}})},routeToShippingApp:function(){""!==FDX.SHIPPINGROUTING.url&&FDX.SHIPPINGROUTING.isSecure?(eval("window.open(FDX.SHIPPINGROUTING.url,'_self','',true)"),FDX.SHIPPINGROUTING.url=""):""!==FDX.LOGIN.loginResourceFun&&(eval(FDX.LOGIN.loginResourceFun),FDX.LOGIN.loginResourceFun="")},identifyUserLink:function(){FDX.SHIPPINGROUTING.isLinkAvailable=!0,"undefined"!==FDX.SHIPPINGROUTING.source&&"ACTIVE"===FDX.SHIPPINGROUTING.activationStatus&&"TNT"===FDX.SHIPPINGROUTING.source?FDX.SHIPPINGROUTING.url=FDX.SHIPPINGROUTING.magsUrlPath:(void 0===FDX.SHIPPINGROUTING.defaultAccount&&(FDX.SHIPPINGROUTING.url=FDX.SHIPPINGROUTING.fclaPagePath),""!==FDX.SHIPPINGROUTING.defaultAccount&&void 0!==FDX.SHIPPINGROUTING.defaultAccount&&FDX.SHIPPINGROUTING.isManaged&&(FDX.SHIPPINGROUTING.url=FDX.SHIPPINGROUTING.wifmUrlPath),""===FDX.SHIPPINGROUTING.defaultAccount||void 0===FDX.SHIPPINGROUTING.defaultAccount||FDX.SHIPPINGROUTING.isManaged||FDX.SHIPPINGROUTING.mBoxId&&(FDX.SHIPPINGROUTING.isLinkAvailable=!1,FDX.SHIPPINGROUTING.doMboxAPICall(FDX.SHIPPINGROUTING.mBoxId))),FDX.SHIPPINGROUTING.isLinkAvailable&&FDX.SHIPPINGROUTING.routeToShippingApp(),sessionStorage.setItem("targetRediretUrl",FDX.SHIPPINGROUTING.url)},getValue:function(e,t){var o=t.length;return(o=(o=e.substring(e.indexOf(t)+o)).substring(o.indexOf("|")+1)).substring(o,o.indexOf("|"))},getSessionValue:function(e,t){var o;return 0<=e.indexOf(t)&&(o=t.length,o=(o=e.substring(e.indexOf(t)+o)).substring(o,o.indexOf("#"))),o},doMboxAPICall:function(e){var t,o,n=FDX.SESSION.getCookie("AMCV_1E22171B520E93BF0A490D44%40AdobeOrg"),r="",a="",I="",s="",i=FDX.SESSION.getCookie("mbox");n&&(n=unescape(n),a=r=FDX.SHIPPINGROUTING.getValue(n,"MCMID"),I=FDX.SHIPPINGROUTING.getValue(n,"MCAAMB"),s=FDX.SHIPPINGROUTING.getValue(n,"MCAAMLH")),i&&(o=FDX.SHIPPINGROUTING.getSessionValue(i,"session#"),t=FDX.SHIPPINGROUTING.getSessionValue(i,"PC#")),void 0!==o&&""!==e&&void 0!==t||(FDX.SHIPPINGROUTING.userCheck=!1,localStorage.setItem("magsUserCheck",FDX.SHIPPINGROUTING.userCheck)),$.ajax({type:"POST",url:"https://fedex.tt.omtrdc.net/rest/v1/mbox/"+o+"?client=fedex",data:JSON.stringify({mbox:e,tntId:t,marketingCloudVisitorId:r,thirdPartyId:"12345abcde",mboxParameters:{mboxMCGVID:a,mboxAAMB:I,mboxMCGLH:s,at_property:"4ba065c0-6b92-13a5-ccc8-2b8cfb21abda"}}),headers:{"Content-Type":"application/json","cache-control":"no-cache"},dataType:"json",async:!0,crossDomain:!0,processData:!1,success:this.doMboxAPICallSuccess,error:this.doMboxAPICallError})},doMboxAPICallSuccess:function(e){console.log(e),void 0===e.content&&(FDX.SHIPPINGROUTING.userCheck="default",localStorage.setItem("magsUserCheck","default"),FDX.SHIPPINGROUTING.url=FDX.SHIPPINGROUTING.wifmUrlPath),e.content,"MAGS"===e.content&&(FDX.SHIPPINGROUTING.userCheck="true",localStorage.setItem("magsUserCheck","true"),FDX.SHIPPINGROUTING.url=FDX.SHIPPINGROUTING.wifmUrlPath),e.content,""===e.content&&(FDX.SHIPPINGROUTING.userCheck="false",localStorage.setItem("magsUserCheck","false"),FDX.SHIPPINGROUTING.url=FDX.SHIPPINGROUTING.magsUrlPath),FDX.SHIPPINGROUTING.routeToShippingApp()},doMboxAPICallError:function(e,t,o){console.log("Exception",t,o),FDX.SHIPPINGROUTING.userCheck="default",localStorage.setItem("magsUserCheck",FDX.SHIPPINGROUTING.userCheck),FDX.SHIPPINGROUTING.routeToShippingApp()}}}]);
