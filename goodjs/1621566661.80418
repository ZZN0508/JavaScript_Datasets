(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[59],{CTC5:function(e,t,i){"use strict";function r(e){fetch("/api/_ajax/metrics/ops/",{credentials:"same-origin",method:"POST",body:JSON.stringify(e),headers:{Accept:"application/json","Content-Type":"application/json"}})}i.d(t,"a",(function(){return r}))},ob7U:function(e,t,i){"use strict";i.d(t,"b",(function(){return Q})),i.d(t,"a",(function(){return H}));var r=i("zjfJ"),n=i("ERkP"),a=i.n(n),o=i("WFZG"),c=i("j/s1"),s=i("uZih"),u=i.n(s),l=i("9pOh"),d=i("05Xt"),p=i("ybdx"),f=a.a.createElement;function m(e){var t,i=e.loading,r=e.children,n=e.height,o=e.customLoader;return t=i?o?a.a.createElement(o):f(p.a,{height:n,"data-testid":"lazy-loader"}):a.a.createElement(r),f(b,u()(e,["loading","height","customLoader","children"]),f(l.a,null,f(d.a,{key:"lazyloader-"+i.toString(),timeout:170,classNames:"item"},t)))}var b=c.default.div.withConfig({displayName:"LazyLoader__StyledContainer",componentId:"sc-3p6sn8-0"})(["& .item-enter{opacity:0;transform:translateY(1rem);}& .item-enter-active{opacity:1;transform:translateY(0);transition:all ","ms ease-out,opacity ","ms ease-in;}& .item-exit{opacity:1;transform:translateY(0);}& .item-exit-active{opacity:0;transform:translateY(-1rem);transition:all ","ms ease-in,opacity ","ms ease-out;}"],170,170,170,170),v=i("odm1"),g=i("giwy"),h=i("E39Q"),O=i("j0AU"),y=i("CTC5"),w=i("JeX9"),T=Object(O.h)(),E=T.source,j=T.next;T.complete;Object(O.o)(E,Object(O.a)(Object(O.f)(100)),Object(O.u)(15),Object(O.s)((function(e){e&&e.length>0&&Object(y.a)(e)})));var _=i("y6um"),k=i("FWc9"),x=i("UnfE"),C=a.a.createElement,P=function(e){var t=e.height,i=N(t);return C(i,{className:"feature-row-loader"},C(M,null))},N=function(e){switch(e){case"title-cards":return I;case"video-slates":return D;case"name-avatars":return F;default:return S}},I=c.default.div.withConfig({displayName:"FeatureRowLoader__TitleCardContainer",componentId:"ekkh6s-0"})(["width:100%;position:relative;","{height:466px;}","{height:417px;}","{height:367px;}","{height:375px;}","{height:379px;}"],x.mediaQueries.breakpoints.above.xl,x.mediaQueries.breakpoints.above.l,x.mediaQueries.breakpoints.above.m,x.mediaQueries.breakpoints.above.s,x.mediaQueries.breakpoints.above.xs),D=c.default.div.withConfig({displayName:"FeatureRowLoader__VideoSlateContainer",componentId:"ekkh6s-1"})(["width:100%;position:relative;","{height:280px;}","{height:238px;}","{height:200px;}","{height:203px;}","{height:209px;}"],x.mediaQueries.breakpoints.above.xl,x.mediaQueries.breakpoints.above.l,x.mediaQueries.breakpoints.above.m,x.mediaQueries.breakpoints.above.s,x.mediaQueries.breakpoints.above.xs),F=c.default.div.withConfig({displayName:"FeatureRowLoader__NameAvatarContainer",componentId:"ekkh6s-2"})(["width:100%;position:relative;","{height:235px;}","{height:202px;}","{height:187px;}","{height:173px;}","{height:180px;}"],x.mediaQueries.breakpoints.above.xl,x.mediaQueries.breakpoints.above.l,x.mediaQueries.breakpoints.above.m,x.mediaQueries.breakpoints.above.s,x.mediaQueries.breakpoints.above.xs),S=c.default.div.withConfig({displayName:"FeatureRowLoader__DefaultContainer",componentId:"ekkh6s-3"})(["width:100%;position:relative;height:20rem;"]),M=Object(c.default)(o.Loader).withConfig({displayName:"FeatureRowLoader__StyledLoader",componentId:"ekkh6s-4"})(["margin:auto;position:absolute;top:0;right:0;bottom:0;left:0;"]),L=n.createElement;function R(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function U(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?R(Object(i),!0).forEach((function(t){Object(r.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):R(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var Q=function(e,t){return U(U({},e),t)},H=function(e){var t=e.id,i=e.height,r=e.title,a=e.description,c=e.link,s=e.fetching,u=e.data,l=e.shouldRender,d=e.children,p=n.useRef(),f=n.useRef(!1);h.c||p.current||(p.current=Date.now());var b=!(!(!(h.c&&!u||s)&&l)||l())||!d,O=!s&&!b,y=new g.a({requestContext:Object(_.c)().context}),T=r?void 0:"none";if(n.useEffect((function(){if(!h.c&&p.current){var e,i=Date.now()-p.current;if(s)f.current=!0,y.set({metricName:v.NextClientMetrics.FEATURE_FETCHING,value:1,unit:v.Unit.COUNT}),console.log(v.NextClientMetrics.FEATURE_FETCHING+" - "+t);else if(b){var r=f.current?v.NextClientMetrics.FEATURE_FETCHED_THEN_DROPPED_TIME:v.NextClientMetrics.FEATURE_DROPPED_WITHOUT_FETCH_TIME;y.set({metricName:r,value:i,unit:v.Unit.MILLISECONDS}),console.log(r+" - "+t+" - "+i)}else if(O){var n=f.current?v.NextClientMetrics.FEATURE_FETCHED_THEN_COMPLETE_TIME:v.NextClientMetrics.FEATURE_COMPLETE_WITHOUT_FETCH_TIME;y.set({metricName:n,value:i,unit:v.Unit.MILLISECONDS}),console.log(n+" - "+t+" - "+i)}e=y,w.r&&e.serialize().forEach((function(e){return j(e)}))}}),[b,O]),b)return null;var E=function(){return L(n.Fragment,null,d)};return L(n.Fragment,null,L(k.a,{id:t}),L(o.PageGrid.Item,{span:3},L(o.PageSection,{topPadding:T},L("div",{className:t},r?L(o.SubSectionTitle,{description:a,href:c},r):null,L(m,{loading:!!s||h.c&&!u,height:"feature",customLoader:function(){return L(P,{height:i})}},(function(){return L(E,null)}))))))}},zH5U:function(e,t,i){"use strict";i.r(t);var r=i("ERkP"),n=i.n(r),a=i("/ESf"),o=i("zygG"),c=i("j/s1"),s=i("WFZG"),u=i("UnfE"),l=i("zjfJ"),d=i("KD1n"),p=i("H5qd"),f=i.n(p),m=i("DgVT"),b=i("0VMp"),v=i("2gxx"),g=i("/V6V"),h=i("CbZs"),O=i("gp8v"),y=i("u2/3"),w=i("odm1"),T=n.a.createElement;function E(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function j(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?E(Object(i),!0).forEach((function(t){Object(l.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):E(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function _(){var e=Object(d.a)(["\n    query StreamingPicks_WatchNow($titleIds: [ID!]!, $providerId: ID!) {\n        titles(ids: $titleIds) {\n            id\n            watchOption(providerId: $providerId) {\n                link(platform: WEB)\n                provider {\n                    refTagFragment\n                }\n            }\n        }\n    }\n"]);return _=function(){return e},e}var k="amzn1.imdb.w2w.provider.prime_video.freewithads",x="amzn1.imdb.w2w.provider.imdb.showtimes",C=function(e){return e===x?"ticket":void 0},P=f()(_()),N=function(e){var t=e.tabIndex,i=e.providerId,r=e.providerDescription,a=e.streamingTitles,c={imdbTvText:Object(v.a)({id:"streamingPicks_imdbtv_link",defaultMessage:"Free on IMDb TV"}),watchNowText:Object(v.a)({id:"common_buttons_watchNow",defaultMessage:"Watch now"}),popularOnText:Object(v.a)({id:"streamingPicks_providerDescription_default",defaultMessage:"popular on"})},u=function(e,t){var i,r=e.map((function(e){return e.title.id})),n=Object(h.b)({query:P,variables:{titleIds:r,providerId:t},context:{personalized:!1,serverSideCacheable:!0}}),a=Object(o.a)(n,1)[0],c=a.fetching?{}:(null===a||void 0===a||null===(i=a.data)||void 0===i?void 0:i.titles.reduce((function(e,t){return(null===t||void 0===t?void 0:t.id)&&(e[null===t||void 0===t?void 0:t.id]=null===t||void 0===t?void 0:t.watchOption),e}),{}))||{};return{fetching:a.fetching,byTitle:c}}(a,i),l=Object(b.b)().adSlotsInfo;Object(O.b)(a.map((function(e){return e.title})));var d=function(e){return e===k?c.imdbTvText:c.watchNowText},p=function(e,t,i){var r=function(e,t){var i=u.byTitle[e],r={id:e,prefix:"hm_stp",suffix:"tt_".concat(t+1)};return i?Object(g.a)(i,r,l):{}}(e,i);if(0!==Object.keys(r).length||u.fetching)return{props:j(j({},r),{},{className:"title-watchnow-button",preIcon:C(t)}),text:d(t),fetching:u.fetching}},f=function(e,t){var i;return{prefix:"hm_stp_".concat((null===(i=u.byTitle[e])||void 0===i?void 0:i.provider.refTagFragment)||""),suffix:"".concat(t+1)}},E=I(c.popularOnText,r);return T(n.a.Fragment,null,T(D,{className:"streaming-picks-description"},E),T(s.Shoveler,{wraps:!1,key:"".concat(t,"-").concat(i),onPageChange:function(e){Object(y.a)(e,"hm_stp",w.PageType.HOME,w.SubPageType.MAIN)}},a.map((function(e,t){return T(m.a,{refMarker:f(e.title.id,t),className:"streaming-picks-title",key:e.title.id,data:e.title,alternateButton:p(e.title.id,i,t)})}))))},I=function(e,t){var i=t||e;return"".concat(i[0].toLowerCase()).concat(i.slice(1))},D=c.default.p.withConfig({displayName:"SingleProviderPicks__Description",componentId:"sc-14el632-0"})(["",";margin-bottom:1rem;"],Object(u.setPropertyToSpacingVar)("margin-left","ipt-pageMargin")),F=i("JeX9"),S=n.a.createElement,M=function(e){var t=e.providerPicks;if(!t||t.length<1)return null;var i=t.map((function(e){return{id:e.provider.id,label:e.provider.name.value}})),r=n.a.useState(i[0].id),a=Object(o.a)(r,2),c=a[0],u=a[1],l=L(t,c);return l?S(n.a.Fragment,null,S(U,{"data-testid":"streaming-picks-tab-container"},S(s.Tabs,{className:"streaming-picks-tabs",tabs:i,key:"tabs",onChange:function(e){u(e),R(t,e)}})),S("div",{"data-testid":"streaming-picks-shoveler"},S(N,l))):null},L=function(e,t){var i,r=e.findIndex((function(e){return e.provider.id===t}));if(-1===r)return null;var n=e[r];return{tabIndex:r,providerId:t,providerDescription:null===(i=n.provider.description)||void 0===i?void 0:i.value,streamingTitles:n.titles}},R=function(e,t){var i=function(e,t){var i=e.findIndex((function(e){return e.provider.id===t}));if(i<0)return"unknown";var r=e[i].provider.refTagFragment;return"hm_stp_".concat(r,"_tab_").concat(i+1)}(e,t),r={type:w.PageType.HOME,subType:w.SubPageType.MAIN};Object(F.w)(i,r,"tab-select",F.b.ACTION_ONLY)},U=c.default.div.withConfig({displayName:"MultipleProviderPicks__TabContainer",componentId:"sc-7fk6ti-0"})(["",";margin-bottom:1rem;"],Object(u.setPropertyToSpacingVar)("margin-left","ipt-pageMargin")),Q=i("ob7U"),H=n.a.createElement,A=function(e){return e&&e.streamingTitles?e.streamingTitles.filter((function(e){return e.provider&&e.titles&&e.titles.edges.length>0})).map((function(e){return{provider:e.provider,titles:Object(a.a)(e.titles.edges)}})):[]};t.default=function(e){var t=A(e.data),i=Object(Q.b)({id:"streaming-picks",height:"title-cards",shouldRender:function(){return t.length>0}},e);return H(Q.a,i,H(M,{providerPicks:t}))}}}]);