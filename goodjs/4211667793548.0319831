!function(n){var r={};function i(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=n,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=48)}([function(t,e,n){"use strict";var r=i(window).nsVersion;function i(t){t=t.com=t.com||{};return t.oath=t.oath||{},t.oath.craft=t.oath.craft||{},t.oath.craft.delivery=t.oath.craft.delivery||{},t.oath.craft.delivery["v2.7.4"]=t.oath.craft.delivery["v2.7.4"]||{},{ns:t.oath.craft.delivery,nsVersion:t.oath.craft.delivery["v2.7.4"]}}r.createNamespace=i,e.a=r},function(t,e,i){"use strict";var n=i(0);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=c(n);return t=r?(t=c(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==o(t)&&"function"!=typeof t?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e):t}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var r=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(r,i(2).a);var n=s(r);function r(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(t=n.call(this,t)).trigger=e.trigger||r.trigger.EVENT,t.name=e.name,t.meta=e.meta||{},t.reportingLabel=e.reportingLabel,t}return r}();(n.a.CreativeEvent=r).TRACKING_REQUEST="creativeEvent.trackingRequest",r.GLOBAL_RELAY="creativeEvent.globalRelay",r.QUALIFIED_CLICK="creativeEvent.qualifiedClick",r.trigger={CLICK:"click",EVENT:"event",TIMER_START:"start",TIMER_STOP:"stop"},e.a=r},function(t,e,n){"use strict";function r(t){!function(t){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this),this.type=t,this.target=null}n(0).a.Event=r,e.a=r},function(t,e,i){"use strict";var n=i(0);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=c(n);return t=r?(t=c(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==o(t)&&"function"!=typeof t?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e):t}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var r=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(r,i(2).a);var n=s(r);function r(t,e){return function(t){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this),t=n.call(this,t),e&&(t.offsetX=e.offsetX,t.offsetY=e.offsetY,t.width=e.width,t.height=e.height,t.visible=e.visible),t}return r}();r.FOCUS="hostPageEvent.focus",r.BLUR="hostPageEvent.blur",r.VISIBILITY_CHANGE="hostPageEvent.visibilityChange",r.LOAD="hostPageEvent.pageLoad",r.SCROLL="hostPageEvent.pageScroll",r.RESIZE="hostPageEvent.pageResize",r.ORIENTATION_CHANGE="hostPageEvent.orientationChange",n.a.HostPageEvent=r,e.a=r},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o}),n.d(e,"c",function(){return a}),n.d(e,"d",function(){return s}),n.d(e,"e",function(){return c});var n=n(0),r=!1;function i(t){function n(){if(!r)return r=!0,t()}if("complete"===document.readyState)return n();if(document.addEventListener)document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",n),window.attachEvent("onload",n);var e=!1;try{e=null===window.frameElement}catch(t){console.error(t.message)}if(document.documentElement.doScroll&&e)return function e(){if(!r){try{document.documentElement.doScroll("left")}catch(t){return void setTimeout(e,1)}return n()}}()}}function o(t){var e;void 0!==window.addEventListener?window.addEventListener("load",t,!1):void 0!==document.addEventListener?document.addEventListener("load",t,!1):void 0!==window.attachEvent?window.attachEvent("onload",t):"function"==typeof window.onload?(e=window.onload,window.onload=function(){e(),t()}):window.onload=t}function a(e,n){Object.keys(n).forEach(function(t){e.style[t]=n[t]})}function s(t){for(var e=0,n=0;t;)e+=t.offsetLeft,n+=t.offsetTop,t=t.offsetParent;return{x:e,y:n}}function c(t,e){try{return(void 0!==t.currentStyle?t.currentStyle:window.getComputedStyle(t,null))[e]}catch(t){return null}}n.a.DOMUtils={addDOMLoadListener:i,addPageLoadListener:o,applyStyles:a,calculateAbsolutePosition:s,getComputedStyle:c,getDocumentSize:function(){var t=document;return{width:Math.max(Math.max(t.body.scrollWidth,t.documentElement.scrollWidth),Math.max(t.body.offsetWidth,t.documentElement.offsetWidth),Math.max(t.body.clientWidth,t.documentElement.clientWidth)),height:Math.max(Math.max(t.body.scrollHeight,t.documentElement.scrollHeight),Math.max(t.body.offsetHeight,t.documentElement.offsetHeight),Math.max(t.body.clientHeight,t.documentElement.clientHeight))}}}},function(t,e,n){"use strict";n(10);var r=n(0),i=n(12),a=n(6),o=n(3),s=n(18),c=n(7);function u(){return(u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n,r=arguments[e];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n=[{key:"init",value:function(t){var e=t.Creative.containers[this.id];this.adConfig=t,this.copyProperties(e),this.state=this.initialState||f.state.DEFAULT,this.parentElementId&&(this.containerAnchorParent=document.getElementById(this.parentElementId),this.containerAnchorParent||(this.containerAnchorParent=document.createElement("div"),this.containerAnchorParent.id=this.parentElementId,document.body.appendChild(this.containerAnchorParent)),this.containerAnchorId=this.advertAnchorId+"_"+this.id),this.uid=this.id.replace(/[ /.-]/g,"_")+"_"+t.AdServer.cacheBuster,this.contentId=f.CONTENT_ID_PREFIX+this.uid,this.addRenderEventListeners(),this.content=this.contentFactory.getContent(this,t,this.id,this.advert,this.adManager,this.contentId),this.expandAdapter&&this.expandAdapter.init(this,this.getState(this.state))}},{key:"copyProperties",value:function(t){var n=this;u(this,t),Object.keys(this.states).forEach(function(t){var e=Object.create(f.STATE_DEFAULTS);n.states[t]=u(e,n.states[t])})}},{key:"getState",value:function(t){return this.states.hasOwnProperty(t)?{key:t,data:this.states[t]}:null}},{key:"addRenderEventListeners",value:function(){var e=this;this.globalEventBus.on(c.a.LOAD,function(t){return e.coreLibEventHandler(t)}),this.globalEventBus.on(o.a.LOAD,function(t){return e.coreLibEventHandler(t)}),this.adEventBus.on(i.a.INITIALIZED,function(t){return e.coreLibEventHandler(t)})}},{key:"coreLibEventHandler",value:function(){this.checkAutoRender()}},{key:"checkAutoRender",value:function(){!this.rendered&&this.autoRender&&this.render()}},{key:"render",value:function(){this.rendered||this.closed||(this.rendered=!0,this.eventBus.trigger(s.a.RENDER))}},{key:"expand",value:function(t){}},{key:"contract",value:function(t){}},{key:"show",value:function(){}},{key:"hide",value:function(){}},{key:"reload",value:function(){}},{key:"close",value:function(){this.rendered&&(this.closed=!0,this.rendered=!1)}},{key:"getContent",value:function(){return this.content}}],l(f.prototype,n),n=f;function f(t,e,n,r,i,o){!function(t){if(!(t instanceof f))throw new TypeError("Cannot call a class as a function")}(this),this.contentFactory=t,this.eventBus=new a.a(this),this.adManager=i,this.globalEventBus=i.globalEventBus,this.hostPage=i.hostPage,this.adEventBus=r.eventBus,this.advert=r,this.windowContext=window,this.id=n,this.rendered=!1,this.expanded=!1,this.closed=!1,this.advertAnchorId=e.anchorDivId,this.advertAnchorDiv=e.anchorDiv,this.advertAnchorPlaceholder=e.anchorPlaceholder,this.content=null,this.autoRender=!0,this.expandAdapter=o,this.state,this.states={},this.zIndex=10,this.init(e)}n.CONTENT_ID_PREFIX="craftContent_",n.DWELL_MIN_VIEWABLE_PERCENTAGE=.5,n.ACCEPTABLE_VIEW_AREA=37500,n.UNIT_PX="px",n.state={DEFAULT:"default",EXPAND:"expand",FULLSCREEN:"fullscreen"},n.STATE_DEFAULTS={offsetX:0,offsetY:0},n.STATE_PRECEDENCE=[n.state.FULLSCREEN,n.state.EXPAND,n.state.DEFAULT],r.a.AssetContainer=n,e.a=n},function(t,e,n){"use strict";var r=n(0),i=n(14),o=(n(10),n(2));function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n=[{key:"on",value:function(t,e,n){void 0===this.eventTypes[t]&&(this.eventTypes[t]=[]),i.a(e,this.eventTypes[t])||(void 0===n?this.eventTypes[t].push(e):this.eventTypes[t].push({ref:n,handler:e}))}},{key:"off",value:function(r,i,o){var a=this;Array.isArray(this.eventTypes[r])&&this.eventTypes[r].forEach(function(t,e){var n=void 0===o?"function":"object";if(n===s(t))switch(n){case"function":t===i&&a.eventTypes[r].splice(e,1);break;case"object":t.handler===i&&t.ref===o&&a.eventTypes[r].splice(e,1)}})}},{key:"hasEventListener",value:function(t,e,n){if(void 0===this.eventTypes[t]||0===this.eventTypes[t].length)return!1;for(var r=0;r<this.eventTypes[t].length;r++){var i=this.eventTypes[t][r],o=void 0===n?"function":"object";if(o===s(i))switch(o){case"function":if(i===e)return!0;break;case"object":if(i.handler===e&&i.ref===n)return!0}}return!1}},{key:"trigger",value:function(t){if("string"==typeof(t="string"==typeof t?new o.a(t):t).type&&void 0!==this.eventTypes[t.type]){void 0!==t.target&&null!==t.target||(t.target=this.target),t.currentTarget=this.target;for(var e=this.eventTypes[t.type].slice(0),n=0;n<e.length;n++){var r=e[n];if("object"===s(r))try{r.handler.call(r.ref,t)}catch(t){}else r(t)}}}}],a(c.prototype,n),n=c;function c(t){!function(t){if(!(t instanceof c))throw new TypeError("Cannot call a class as a function")}(this),this.target=t,this.eventTypes={}}r.a.EventDispatcher=n,e.a=n},function(t,e,i){"use strict";var n=i(0);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=c(n);return t=r?(t=c(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==o(t)&&"function"!=typeof t?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e):t}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var r=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(r,i(2).a);var n=s(r);function r(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(t=n.call(this,t)).container=e.container||null,t}return r}();r.ATTACH="domEvent.attach",r.DETACH="domEvent.detach",r.LOAD="domEvent.load",r.BEFORE_UNLOAD="domEvent.beforeUnload",n.a.DOMEvent=r,e.a=r},function(t,e,n){"use strict";var r=n(0);function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}l=o,u=[{key:"trim",value:function(t){return"string"==typeof t?t.replace(/^[\s]+|[\s]+$/g,""):""}}],null&&i(l.prototype,null),i(l,u),l=o;function o(){!function(t){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}(this)}var a=r.a.StringUtils=l;function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u,l,l=(u=f,l=[{key:"getTagOverrides",value:function(t){if("object"===s(t)&&t.anchorDivId){t=document.getElementById(t.anchorDivId);if(t)for(var e=t.previousSibling;e&&"IMG"!==e.nodeName;){if(e.nodeType===Node.COMMENT_NODE&&-1<e.nodeValue.indexOf(f.OVERRIDE_MARKER)){var n=e.nodeValue;return f.parseOverrideComment(n)}e=e.previousSibling}}return{}}},{key:"parseOverrideComment",value:function(t){var e={};return a.trim(t).split("\n").forEach(function(t){-1<t.indexOf(f.OVERRIDE_MARKER)||2===(t=t.split(f.OVERRIDE_KV_DELIM)).length&&(e[a.trim(t[0])]=a.trim(t[1]))}),e}}],null&&c(u.prototype,null),c(u,l),f);function f(){!function(t){if(!(t instanceof f))throw new TypeError("Cannot call a class as a function")}(this)}l.OVERRIDE_MARKER="##delivr.ad.overrides##",l.OVERRIDE_KV_DELIM=":";var h=r.a.TagOverridesUtils=l,d=n(33);function p(){return(p=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n,r=arguments[e];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n=[{key:"setImpressionId",value:function(){var e,n=Math.random().toString(36).substring(2)+Math.random().toString(36).substring(2);r.a.URLUtils&&(this.DeliveryServerTag&&this.DeliveryServerTag.variables&&(e=this.DeliveryServerTag.variables||{},["impid","srvreqid","srvrid"].forEach(function(t){e[t]&&(e[t]=r.a.URLUtils.replaceCacheBuster(e[t],n))})),this.AdServer.impressionId&&(this.AdServer.impressionId=r.a.URLUtils.replaceCacheBuster(this.AdServer.impressionId,n)))}},{key:"getOverride",value:function(t){return this.Overrides.hasOwnProperty(t)?this.Overrides[t]:null}},{key:"getFileUrl",value:function(t){return t&&!t.match(/^https?:\/\//i)?"".concat(this.AdServer.proto,"://").concat(this.Platform.cdn.host).concat(this.Creative.assetPath)+t:t}},{key:"applyDeliveryGroupConfig",value:function(){var e,n=this,t=this.AdServer.deliveryGroupId;!this.DeliveryGroups[t]||(e=this.DeliveryGroups[t]).clicks&&Object.keys(e.clicks).forEach(function(t){n.Creative.clicks.hasOwnProperty(t)&&(n.Creative.clicks[t].url=e.clicks[t].url)})}},{key:"setOverridesFromTag",value:function(){var t=h.getTagOverrides(this);p(this.Overrides,t)}},{key:"clone",value:function(){return p({},this._rawConfig,{Overrides:this.Overrides})}},{key:"invokeHook",value:function(t,e){if(this.Format.library&&this.Format.library.hooks&&this.Format.library.hooks[t])try{return this.Format.library.hooks[t].apply(null,e)}catch(e){Object(d.a)("[AdConfig]: error in invokeHook '".concat(t,"':"),e)}}}],v(y.prototype,n),n=y;function y(t){!function(t){if(!(t instanceof y))throw new TypeError("Cannot call a class as a function")}(this),this._rawConfig=t,this.AdManager={},this.AdServer={},this.Platform={},this.Creative={},this.Format={},this.Integrator={},this.Regs={},this.Publisher={},this.DeliveryGroups={},this.Overrides={},this.User={},this.DeliveryServerTag={},p(this,t),this.applyDeliveryGroupConfig(),this.setOverridesFromTag(),this.setImpressionId()}n.override={RENDER_BACKUP:"renderBackup",TARGET_WINDOW:"targetWindow"},n.hookTypes={BEFORE_ADVERT_INIT:"beforeAdvertInit",AFTER_ADVERT_INIT:"afterAdvertInit",ON_SAFEFRAME_STATUS_UPDATE:"onSafeFrameStatusUpdate"},r.a.AdConfig=n,e.a=n},function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"c",function(){return c}),n.d(e,"b",function(){return u}),n.d(e,"d",function(){return l}),n.d(e,"e",function(){return f});var e=n(0),r=n(8),i="self",o="parent.parent",a="TOP";function s(t){t.setAttribute("allowfullscreen","true"),t.setAttribute("allowFullScreen","true"),t.setAttribute("mozallowFullScreen","true"),t.setAttribute("webkitAllowFullScreen","true")}function c(t){for(var e=[].slice.call(t.document.getElementsByTagName("iframe")),n=0;n<e.length;n++){var r=e[n];if(t===parent&&r.contentWindow===window||t===parent.parent&&r.contentWindow===window.parent)return r}return null}function u(t){var e=parent,n=document.querySelector('meta[name="delivr.ad.targetWindow"]'),n=n?n.getAttribute("content"):null;switch(t.getOverride(r.a.override.TARGET_WINDOW)||n){case i:e=window;break;case o:e=window.parent.parent;break;case a:e=window.top}return e}function l(){return window!==top}function f(){var t=!1;try{top.document&&(t=!0)}catch(t){}return t?top:window}e.a.IframeUtils={applyAllowFullScreenAttribute:s,getTargetIframeEl:c,determineTargetWindow:u,isInFriendlyIframe:function(t){var e=!1;try{this.determineTargetWindow(t).document&&(e=!0)}catch(t){}return e},isInIframe:l,topOrSelf:f}},function(t,e,n){},function(t,e,r){"use strict";var n=r(0);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=s(n);return t=r?(t=s(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==i(t)&&"function"!=typeof t?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e):t}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var c=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(n,r(2).a);var e=a(n);function n(t){return function(t){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this),e.call(this,t)}return n}();c.MOUSE_OVER="mouseEvent.mouseOver",c.MOUSE_OUT="mouseEvent.mouseOut",n.a.MouseEvent=c,e.a=c},function(t,e,i){"use strict";var n=i(0);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=c(n);return t=r?(t=c(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==o(t)&&"function"!=typeof t?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e):t}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var r=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(r,i(2).a);var n=s(r);function r(t,e){return function(t){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this),(t=n.call(this,t)).advert=e?e.advert:null,t}return r}();r.ADDED="advertEvent.added",r.INTERACTIVE_IMPRESSION="advertEvent.interactiveImpression",r.INITIALIZED="advertEvent.initialized",n.a.AdvertEvent=r,e.a=r},function(t,e,i){"use strict";var n=i(0);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=c(n);return t=r?(t=c(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==o(t)&&"function"!=typeof t?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e):t}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var r=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(r,i(2).a);var n=s(r);function r(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(t=n.call(this,t)).uid=e.uid||null,t.action=e.action,t.state=e.state||null,t.containerId=e.containerId||null,t.status=e.status||null,t.detail=e.detail||"",t}return r}();r.status={SUCCESS:"success",FAILURE:"failure"},r.action={EXPAND:"expand",CONTRACT:"contract"},r.ACTION_COMPLETE="containerActionCompleteEvent.actionComplete",n.a.ContainerActionCompleteEvent=r,e.a=r},function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(Array.isArray(e)){if(0<=e.indexOf(t))return!0}else for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t)return!0;return!1}function i(t,e){for(var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=0;r<e.length;r++){var i=e[r];t.hasOwnProperty(i)&&(n[i]=t[i])}return n}function a(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};for(t in e)if(e.hasOwnProperty(t)&&(!n.hasOwnProperty(t)||e[t]!==n[t]))return!1;return!0}n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i}),n.d(e,"c",function(){return a}),n(0).a.CollectionUtils={contains:r,pick:i,recursiveReplace:function(t,e){for(var n in t)if(t.hasOwnProperty(n))if("object"!==o(t[n])||Array.isArray(t[n])){if("string"==typeof t[n])for(var r in e){var i;e.hasOwnProperty(r)&&(i=new RegExp(r,"g"),t[n]=t[n].replace(i,e[r]))}}else this.recursiveSubtitute(t[n],e)},shallowObjectEquals:a}},function(t,e,i){"use strict";var n=i(0);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=c(n);return t=r?(t=c(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==o(t)&&"function"!=typeof t?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e):t}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var r=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(r,i(2).a);var n=s(r);function r(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{events:[]};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(t=n.call(this,t)).events=e.events,t}return r}();(n.a.QualifiedStateEvent=r).QUALIFIED="qualifiedStateEvent.qualified",e.a=r},function(t,e,n){"use strict";var i,r=n(0),c=(n(10),n(1)),o=["[timestamp]","{random}","_ADTIME_","_TIMESTAMP_","{%r%}","%%CACHEBUSTER%%","${REQUESTID}","[CACHEBUSTER]","[INSERT_CACHEBUSTER_HERE]","${ADCALL_ID}","_ADSTAGE_"].map(function(t){return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")});function a(e,n){return e&&(n=n||+new Date,o.forEach(function(t){e=e.replace(new RegExp(t,"ig"),n)})),e}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}r.a.URLUtils={getQueryStringValue:function(t){if(!i){i={};var e=window.location.search.substr(1).split("&");if(window!==top)try{e=e.concat(top.location.search.substr(1).split("&"))}catch(t){}for(var n=0;n<e.length;n++){var r=e[n];2===(r=r.split("=")).length&&(i[r[0]]=decodeURIComponent(r[1].replace(/\+/g," ")))}}return i[t]||null},replaceCacheBuster:a,CACHEBUSTER_PATTERNS:o};var l={ADTECH:["ADTECH","1AS"]},f=(f=[{key:"getUrls",value:function(t){var e=[];return"object"!==s(t.event)?e:(t.event.trigger===c.a.trigger.CLICK&&t.type===N.type.REDIRECT?e=[this.adConfig.AdServer.clickRedirect]:t.event.trigger===c.a.trigger.CLICK&&t.type===N.type.PIXEL?e=[this.adConfig.AdServer.clickPixel]:t.event.name===N.event.DOWNLOADED_IMPRESSION&&t.type===N.type.PIXEL&&(e=[this.adConfig.AdServer.downloadedImpressionPixel]),e.filter(function(t){return t.match(/^https?:\/\//i)}).map(function(t){return a(t)}))}},{key:"servedBy",value:function(t){t=l[t.toUpperCase()];return!!t&&-1<t.indexOf(this.adConfig.AdServer.name.toUpperCase())}}],u(h.prototype,f),h);function h(t){!function(t){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}(this),this.adConfig=t}var d=r.a.AdServerTracker=f,p=n(19);function v(){return(v=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n,r=arguments[e];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g(t){return t.meta&&t.meta.video}f=[{key:"getUrls",value:function(t){var e=[];return"object"!==y(t.event)||t.type===N.type.SCRIPT||t.type===N.type.PIXEL&&t.event.trigger===c.a.trigger.CLICK?e:(e=[a(this.buildTrackingURL(t))]).filter(function(t){return t.match(/^https?:\/\//i)})}},{key:"buildTrackingURL",value:function(t){var e=this.adConfig.AdServer.proto,n=this.adConfig.Platform.pixelServer.host.GLOBAL;if(!n)throw new Error(E.NO_PIXELSERVER_HOST_ERROR);var r="".concat(e,"://").concat(n).concat(this.adConfig.Platform.pixelServer.path.simple),i=this.isAdtechServed()?this.buildAdtechParams():{},e=this.buildDeliveryServerTagParams(),n={};this.adConfig.Creative.variation&&this.adConfig.Creative.variation.name&&(n["x.vn"]=this.adConfig.Creative.variation.name);n=v(this.buildGenericParams(t),this.buildExternalParams(),i,e,n,this.buildExtensionParams()),n=JSON.parse(JSON.stringify(v(n,i))),i=t.event.trigger===c.a.trigger.CLICK?E.ENDPOINT.REDIRECT:E.ENDPOINT.EVENT,t=t.event.trigger===c.a.trigger.CLICK?"&r=":"&".concat(+new Date);return"".concat(r,"/").concat(i,"?").concat(this.buildQueryParams(n)).concat(t)}},{key:"getPixelEventType",value:function(t){var e=t.event,t=e.meta&&e.meta.eventName?e.meta.eventName:e.name;if(E.COMMON_EVENT_TYPES.hasOwnProperty(t))return E.COMMON_EVENT_TYPES[t];switch(e.trigger){case c.a.trigger.CLICK:return E.COMMON_EVENT_TYPES.click;case c.a.trigger.TIMER_STOP:case c.a.trigger.TIMER_START:return g(e)?E.COMMON_EVENT_TYPES.videoDuration:E.COMMON_EVENT_TYPES.contentDuration;default:return g(e)?e.meta&&"number"==typeof e.meta.durationPercentage?E.COMMON_EVENT_TYPES.videoDuration:e.meta&&e.meta.interaction?E.COMMON_EVENT_TYPES.videoInteraction:E.COMMON_EVENT_TYPES.video:e.meta&&e.meta.interaction?E.COMMON_EVENT_TYPES.userInteraction:E.COMMON_EVENT_TYPES.other}}},{key:"buildQueryParams",value:function(n){return Object.keys(n).map(function(t){var e=n[t];return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e))}).join("&")}},{key:"buildGenericParams",value:function(t){var e=t.event,n=e.meta||{};return{et:this.getPixelEventType(t),en:n.eventName||e.reportingLabel||e.name,d:n.duration,dp:n.durationPercentage,crid:this.adConfig.Creative.id,cpid:this.adConfig.Integrator.partnerId,gdpr:this.getGDPRFlag(),euconsent:this.adConfig.Regs.gdpr.consent,us_privacy:this.adConfig.Regs.ccpa?this.adConfig.Regs.ccpa.privacy:""}}},{key:"buildAdtechParams",value:function(){return{"a.pid":this.adConfig.AdServer.placementId,"a.fid":this.adConfig.AdServer.deliveryGroupId,"a.cid":this.adConfig.AdServer.campaignId,"a.nid":this.adConfig.AdServer.networkId,"a.bid":this.adConfig.AdServer.creativeId}}},{key:"buildExternalParams",value:function(){return{"e.crid":this.adConfig.Integrator.creativeId||this.adConfig.AdServer.creativeId,"e.plid":this.adConfig.AdServer.placementId,"e.dgid":this.adConfig.AdServer.deliveryGroupId}}},{key:"buildDeliveryServerTagParams",value:function(){var t=this.adConfig.DeliveryServerTag||{},e=t.variables;try{e=JSON.parse(t.variables)}catch(t){}return{"x.srvsrc":(e=e||{}).srvsrc||t.source,"x.srvlid":e.srvlid||t.lineId,"x.srvcid":e.srvcid||t.creativeId,impid:e.impid||e.srvrid||e.srvreqid||this.adConfig.AdServer.impressionId}}},{key:"buildExtensionParams",value:function(){return{"x.w":screen?screen.width:void 0,"x.h":screen?screen.height:void 0}}},{key:"getGDPRFlag",value:function(){var n=this,r="";return[["0","false"],["1","true"]].forEach(function(t,e){t.forEach(function(t){t===n.adConfig.Regs.gdpr.applies&&(r="".concat(e))})}),r}},{key:"isAdtechServed",value:function(){return-1<E.ADTECH_SERVER_NAMES.indexOf(this.adConfig.AdServer.name.toUpperCase())}},{key:"trackDownloadedImpression",value:function(){this.trackEvent({name:"downloadedImpression"})}},{key:"trackEvent",value:function(t){p.a.loadPixel(this.buildTrackingURL(t))}},{key:"trackClick",value:function(t){}}],m(E.prototype,f),f=E;function E(t){!function(t){if(!(t instanceof E))throw new TypeError("Cannot call a class as a function")}(this),this.adConfig=t}f.ADTECH_SERVER_NAMES=["ADTECH","1AS","1CDCS"],f.ENDPOINT={REDIRECT:"ser",EVENT:"se"},f.COMMON_EVENT_TYPES={backupImpression:"bi",backupViewableImpression:"bvi",click:"clk",contentDuration:"cd",downloadedImpression:"di",other:"o",otherUserAction:"oua",impressionDuration:"imd",indeterminableViewability:"iv",interactionDuration:"id",interactiveImpression:"ii",userInteraction:"ui",viewableImpression:"vi",video:"v",videoInteraction:"vin",videoDuration:"vd"},f.NO_PIXELSERVER_HOST_ERROR="Platform.pixelServer.host.GLOBAL property missing in adConfig.";var b=r.a.PlatformTracker=f;function C(t){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function O(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}f=[{key:"getUrls",value:function(t){var e=[];if("object"!==C(t.event))return e;if(t.event.trigger===c.a.trigger.CLICK)switch(t.type){case N.type.REDIRECT:e=[this.adConfig.Publisher.clickRedirect];break;case N.type.PIXEL:e=[this.adConfig.Publisher.clickPixel]}return e.filter(function(t){return t.match(/^https?:\/\//i)}).map(function(t){return a(t)})}}],O(T.prototype,f),f=T;function T(t){!function(t){if(!(t instanceof T))throw new TypeError("Cannot call a class as a function")}(this),this.adConfig=t}var S=r.a.PublisherTracker=f;function w(t){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function I(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var f,f=(f=[{key:"getUrls",value:function(e){var t=e.event,n=[];if("object"!==w(t))return n;var r=t.trigger===c.a.trigger.CLICK?this.thirdPartyConfig.clicks:this.thirdPartyConfig.events;if(!r)return n;var i=t.meta&&t.meta.eventName?t.meta.eventName:t.name;return r.forEach(function(t){e.type===t.type&&i===t.name&&n.push(a(t.url))}),n}},{key:"replaceCacheBuster",value:function(t){return a(t)}}],I(A.prototype,f),A);function A(t){!function(t){if(!(t instanceof A))throw new TypeError("Cannot call a class as a function")}(this),this.adConfig=t,this.thirdPartyConfig={},t.DeliveryGroups&&t.DeliveryGroups[t.AdServer.deliveryGroupId]&&t.DeliveryGroups[t.AdServer.deliveryGroupId].thirdPartyTracking&&(this.thirdPartyConfig=t.DeliveryGroups[t.AdServer.deliveryGroupId].thirdPartyTracking)}var R=r.a.ThirdPartyTracker=f,k=n(24);function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function P(){return(P=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n,r=arguments[e];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function D(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n=[{key:"initialiseEventCounters",value:function(){var e=this.adConfig.Creative.events;Object.keys(e).forEach(function(t){e[t].counter=e[t].counter||0})}},{key:"incrementEventCounter",value:function(t){var e=this.adConfig.Creative.events,t=t.meta&&t.meta.eventName?t.meta.eventName:t.name;e.hasOwnProperty(t)&&"number"==typeof e[t].counter&&e[t].counter++}},{key:"prepareClickRedirects",value:function(){var o=this;this.adConfig.Platform=this.adConfig.Platform||{},this.adConfig.Platform.CLICK_PLACEHOLDER="_DELIVR_CLK_URL_",this.adConfig.Format=this.adConfig.Format||{},this.adConfig.Format.library=this.adConfig.Format.library||{},this.adConfig.Format.library.config=P(this.adConfig.Format.library.config||{},{GENERIC_CLICK_KEY:"_DELIVR_GENERIC_CLK_",CLICK_URL_PLACEHOLDER:"_DELIVR_CLK_URL_"});function a(t,e){return e+encodeURIComponent(t)}var s=this.adConfig.Creative.clicks;s._DELIVR_GENERIC_CLK_={},Object.keys(s).forEach(function(t){if(o.disabled)s[t].redirect=s[t].url||"";else{for(var e=[],n=o.trackers,r=0;r<n.length;r++){var i=n[r];"_DELIVR_GENERIC_CLK_"===t&&i instanceof R||o.adServer.servedBy("ADTECH")&&i instanceof d||(e=e.concat(i.getUrls({type:L.type.REDIRECT,event:{name:t,trigger:c.a.trigger.CLICK}})))}e.push("_DELIVR_CLK_URL_"),e.reverse(),s[t].redirect=e.reduce(a),s[t].redirectCount=e.length}})}},{key:"performTrackingRequests",value:function(t){for(var e=[],n=[],r=[],i=this.trackers,o=0;o<i.length;o++){var a=i[o],e=e.concat(a.getUrls({type:L.type.PIXEL,event:t})),n=n.concat(a.getUrls({type:L.type.SCRIPT,event:t}));t.trigger===c.a.trigger.CLICK&&(r=r.concat(a.getUrls({type:L.type.REDIRECT,event:t})))}this.disabled||(p.a.requestPixels(e),p.a.loadScripts(n,this.adConfig.anchorDivId)),t.trigger===c.a.trigger.CLICK&&(s=t.meta||{},(s=this.getClickLandingUrl(t.name,s.url))&&r.push(s));var s=this.platform.buildGenericParams({event:t}),s=new k.a(k.a.TRACK,{name:s.en,platformEventType:s.et,urls:{pixels:e,scripts:n,redirects:r}});this.advertEventBus.trigger(s)}},{key:"populateEventMeta",value:function(t){var e,n=t.meta&&t.meta.eventName?t.meta.eventName:t.name,r={};for(e in this.adConfig.Creative.events)if(this.adConfig.Creative.events.hasOwnProperty(e)&&n===e){r=this.adConfig.Creative.events[e];break}t.meta=P({},r,t.meta)}},{key:"creativeEventHandler",value:function(t){if("object"===_(t))switch(t.trigger){case c.a.trigger.CLICK:this.performTrackingRequests(t);break;case c.a.trigger.EVENT:this.populateEventMeta(t),(!t.meta.trackOnce||void 0===t.meta.counter||"number"==typeof t.meta.counter&&t.meta.counter<1)&&(this.performTrackingRequests(t),this.incrementEventCounter(t))}}},{key:"getClickRedirectUrl",value:function(t,e){var n=this.adConfig.Format.library.config.GENERIC_CLICK_KEY,r=this.adConfig.Creative.clicks[t]||this.adConfig.Creative.clicks[n],i=e;!i&&r&&(i=r.url);e=this.adConfig.Format.library.config.CLICK_URL_PLACEHOLDER;if(r&&r.redirect&&r.redirect.length&&r.redirectCount&&e){for(var o=i,a=t,s=1;s<r.redirectCount;s++)o=encodeURIComponent(o),a=encodeURIComponent(a);return r.redirect.replace(e,o).replace(n,a)}return i}},{key:"getClickLandingUrl",value:function(t,e){var n=this.adConfig.Creative.clicks[t],t=e;return a(t=!e&&n?n.url:t)}}],D(L.prototype,n),n=L;function L(t,e){var n=this;!function(t){if(!(t instanceof L))throw new TypeError("Cannot call a class as a function")}(this),this.platform=new b(t),this.adServer=new d(t),this.publisher=new S(t),this.thirdParty=new R(t),this.trackers=[this.publisher,this.platform,this.adServer,this.thirdParty],this.advertEventBus=e.eventBus,this.globalEventBus=e.globalEventBus,this.adConfig=t,this.disabled=!0===this.adConfig.Integrator.previewMode,this.initialiseEventCounters(),this.advertEventBus.on(c.a.TRACKING_REQUEST,function(t){return n.creativeEventHandler(t)})}n.event={BACKUP_IMPRESSION:"backupImpression",DOWNLOADED_IMPRESSION:"downloadedImpression",UNSUPPORTED_CLIENT:"unsupportedClient"},n.type={PIXEL:"pixel",REDIRECT:"redirect",SCRIPT:"script"},r.a.Tracker=n;var N=e.a=n},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(){return navigator.appName.toLowerCase()}function o(){return navigator.userAgent.toLowerCase()}function a(){var t=o();return"netscape"===i()&&null!==new RegExp("trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(t)?1:-1<t.indexOf("msie")}function s(){return!!o().match(/(ipad|iphone|ipod)/i)}function c(){return!!o().match(/android/i)}function u(){return!!o().match(/windows phone/i)}function l(){return-1<o().indexOf("applewebkit")}n.d(e,"d",function(){return s}),n.d(e,"a",function(){return c}),n.d(e,"c",function(){return u}),n.d(e,"b",function(){return l}),n(0).a.UserAgentUtils={getAppName:i,getUserAgent:o,isChrome:function(){return"object"===r(window.chrome)},isIE:a,isIEQuirksMode:function(){return a()&&document.compatMode&&"BackCompat"===document.compatMode},isiOS:s,isWebkit:l,isAndroid:c,isWinPhone:u,isW3CCompliant:function(){var t=document;return"undefined"!==r(t.getElementById)&&"undefined"!==r(t.getElementsByTagName)&&"undefined"!==r(t.createElement)},supportsJSON:function(){return window.JSON&&JSON.parse&&JSON.stringify},supportsPostMessageWithObjects:function(){if(!window.postMessage)return!1;var t=!1;try{window.postMessage({toString:function(){t=!0}},"*")}catch(t){}return!t}}},function(t,e,n){"use strict";var r=n(0);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=s(n);return t=r?(t=s(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==i(t)&&"function"!=typeof t?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e):t}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var c=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(e,n(2).a);var t=a(e);function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t.apply(this,arguments)}return e}();c.RENDER="renderEvent.render",r.a.RenderEvent=c,e.a=c},function(t,e,n){"use strict";var r=n(0);function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o,n=(o=a,n=[{key:"requestPixel",value:function(t){var e;"string"==typeof t&&t.match(/https?:\/\//i)&&((e=new Image).src=t,a.pixels.push(e))}},{key:"requestPixels",value:function(t){for(var e=0;e<t.length;e++){var n=t[e];a.requestPixel(n)}}},{key:"loadScript",value:function(t,e){var n;"string"==typeof t&&t.match(/https?:\/\//i)&&((n=document.createElement("script")).async=!0,n.charset="utf-8",n.src=t,(e=document.getElementById(e))?e.parentNode.insertBefore(n,e.nextSibling):document.body.insertBefore(n,document.body.firstChild))}},{key:"loadScripts",value:function(t,e){for(var n=0;n<t.length;n++){var r=t[n];a.loadScript(r,e)}}},{key:"replaceCacheBuster",value:function(t){if("string"==typeof t)return t.replace()}}],null&&i(o.prototype,null),i(o,n),a);function a(){!function(t){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this)}n.pixels=[],r.a.TrackingUtils=n,e.a=n},function(t,e,i){"use strict";var n=i(0);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=c(n);return t=r?(t=c(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==o(t)&&"function"!=typeof t?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e):t}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var r=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(r,i(2).a);var n=s(r);function r(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(t=n.call(this,t)).containerId=e.containerId||null,t.state=e.state||null,t}return r}();r.STATE_CHANGE="containerStateChangeEvent.stateChange",r.state={EXPAND:"expand",CONTRACT:"contract"},n.a.ContainerStateChangeEvent=r,e.a=r},function(t,e,n){"use strict";var r=n(0);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=s(n);return t=r?(t=s(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==i(t)&&"function"!=typeof t?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e):t}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var c=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(e,n(2).a);var t=a(e);function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t.apply(this,arguments)}return e}();c.READY="contentEvent.ready",r.a.ContentEvent=c,e.a=c},function(t,e,i){"use strict";var n=i(0);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=c(n);return t=r?(t=c(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==o(t)&&"function"!=typeof t?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e):t}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var r=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(r,i(2).a);var n=s(r);function r(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(t=n.call(this,t)).timer=e.timer,t.platformEventType=e.platformEventType,t}return r}();(n.a.TimerEvent=r).TIMER_CHANGE="timerEvent.timerChange",e.a=r},function(t,e,n){"use strict";var r=n(0);function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n(35);i(o.prototype,[{key:"determineEnvironment",value:function(){this.backupImage=this.requiresBackupImage(),this.iframe=r.a.IframeUtils.isInIframe(),this.safeFrame=r.a.SafeFrameUtils.isInSafeFrame(),this.safeFrameSandbox=r.a.SafeFrameUtils.isInSafeFrameSandbox(),this.skypeFrame=this.isInSkypeFrame()}},{key:"determineEnvironmentForAdConfig",value:function(t){this.friendlyIframe=r.a.IframeUtils.isInFriendlyIframe(t)}},{key:"requiresBackupImage",value:function(){return!r.a.UserAgentUtils.isW3CCompliant()||!r.a.UserAgentUtils.supportsJSON()||!r.a.UserAgentUtils.supportsPostMessageWithObjects()}},{key:"isInSkypeFrame",value:function(){return!(!window.$WLXRmAd||"function"!=typeof window.$WLXRmAd.init)}},{key:"type",get:function(){return this.environmentType}}]),n=o;function o(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:o.type.WEB;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,o),this.backupImage=!1,this.friendlyIframe=!1,this.iframe=!1,this.safeFrame=!1,this.safeFrameSandbox=!1,this.skypeFrame=!1,this.environmentType=t}n.type={WEB:"WEB",MRAID:"MRAID",VPAID:"VPAID"},r.a.Environment=n,e.a=n},function(t,e,i){"use strict";var n=i(0);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=c(n);return t=r?(t=c(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==o(t)&&"function"!=typeof t?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e):t}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var r=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(r,i(2).a);var n=s(r);function r(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(t=n.call(this,t)).name=e.name,t.platformEventType=e.platformEventType,t.duration=e.duration,t.urls=e.urls||{},t.urls.pixels=e.urls.pixels||[],t.urls.redirects=e.urls.redirects||[],t.urls.scripts=e.urls.scripts||[],t}return r}();(n.a.TrackerEvent=r).TRACK="trackerEvent.track",e.a=r},function(t,e,i){"use strict";var n=i(0);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=c(n);return t=r?(t=c(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==o(t)&&"function"!=typeof t?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e):t}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var r=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(r,i(2).a);var n=s(r);function r(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(t=n.call(this,t)).viewable=e.viewable||null,t}return r}();r.CHANGE="viewableChangeEvent.change",n.a.ViewableChangeEvent=r,e.a=r},function(t,e,i){"use strict";var n=i(0);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=c(n);return t=r?(t=c(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==o(t)&&"function"!=typeof t?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e):t}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var r=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(r,i(2).a);var n=s(r);function r(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(t=n.call(this,t)).uid=e.uid||null,t.action=e.action,t.state=e.state||null,t.containerId=e.containerId||null,t}return r}();r.ACTION_REQUEST="containerActionRequestEvent.actionRequest",n.a.ContainerActionRequestEvent=r,e.a=r},function(t,e,n){"use strict";n(10);var r=n(0),i=n(8),o=n(12),a=n(14),s=n(30),c=n(6),u=n(1),l=n(7),f=n(31),h=n(22),d=n(24),p=n(15);function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var y="craft.delivr.advert",m=(v(g.prototype,[{key:"cleanup",value:function(){this.stopPinging(),this.messenger.cleanup()}},{key:"generateAdvertHash",value:function(t){return[t.Integrator.creativeId||t.AdServer.creativeId||"0",t.AdServer.deliveryGroupId||"0",t.AdServer.cacheBuster||"0"].join("_")}},{key:"publish",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};e.advertHash=this.advertHash,this.connectedToInspectrProxy?this.messenger.send(t,e):this.queue.push({topic:t,meta:e})}},{key:"startPinging",value:function(){var t=this;this.pingInspectrProxy(),this.pingInterval=setInterval(function(){return t.pingInspectrProxy()},1e3),this.pingTimeout=setTimeout(function(){return t.stopPinging()},12e4)}},{key:"stopPinging",value:function(){clearInterval(this.pingInterval),clearTimeout(this.pingTimeout)}},{key:"pingInspectrProxy",value:function(){this.messenger.send("craft.delivr.pingInspectrProxy")}},{key:"handlePong",value:function(){this.connectedToInspectrProxy||(this.stopPinging(),this.connectedToInspectrProxy=!0,this.publishQueue())}},{key:"publishAdvertAdded",value:function(t){t=t.clone(),t={action:"added",adConfig:JSON.parse(JSON.stringify(t))};this.publish(y,t)}},{key:"publishAdvertRemoved",value:function(){this.publish(y,{action:"removed"})}},{key:"publishTimerChange",value:function(t){var e=t.timer,t=t.platformEventType,e={name:e.name,running:e.running,type:t,startTime:e.startTime,cumulativeTimeElapsed:e.cumulativeTimeElapsed};this.publish("craft.delivr.timer",e)}},{key:"publishTrack",value:function(t){t={name:t.name,type:t.platformEventType,duration:t.duration,urls:t.urls};this.publish("craft.delivr.track",t)}},{key:"publishQualifiedState",value:function(){this.publish("craft.delivr.qualified")}},{key:"publishQueue",value:function(){var t={queue:this.queue.splice(0,this.queue.length)};this.publish("craft.delivr.queue",t)}}]),g);function g(t){var e=this;!function(t){if(!(t instanceof g))throw new TypeError("Cannot call a class as a function")}(this),this.queue=[],this.connectedToInspectrProxy=!1,this.adEventBus=t.eventBus,this.globalEventBus=t.globalEventBus,this.messenger=new f.a(window.top),this.messenger.on("craft.inspectrProxy.pong",function(){return e.handlePong()}),this.advertHash=this.generateAdvertHash(t.adConfig),this.publishAdvertAdded(t.adConfig),this.globalEventBus.on(l.a.BEFORE_UNLOAD,function(){return e.publishAdvertRemoved()}),this.adEventBus.on(p.a.QUALIFIED,function(){return e.publishQualifiedState()}),this.adEventBus.on(d.a.TRACK,function(t){return e.publishTrack(t)}),this.adEventBus.on(h.a.TIMER_CHANGE,function(t){return e.publishTimerChange(t)}),this.startPinging()}var E=r.a.Inspectr=m,b=n(18),C=n(16),O=n(32);function T(t){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n=[{key:"init",value:function(t,e){var n=this;if(t.Creative.containers.placement.type||(t.Creative.containers.placement.type=s.a),this.adConfig=t,this.id=t.AdServer.cacheBuster,this.eventBus=new c.a(this),this.adManager=e,this.globalEventBus=e.globalEventBus,this.env=e.env,this.containerFactory=e.containerFactory,this.tracker=new e.trackerClass(t,this),this.tracker.prepareClickRedirects(),this.inspectr=new E(this),this.eventBus.on(O.a.UPDATE,function(t){null!==t.key&&(n.darlaKey=t.key)}),this.copyPropertiesFromAdConfig(t),this.checkTrackDownloadedImpression(),this.env.backupImage||t.getOverride(i.a.override.RENDER_BACKUP)){if(!this.initBackupContainer(t))return void this.trackEvent(C.a.event.UNSUPPORTED_CLIENT);this.trackEvent(C.a.event.BACKUP_IMPRESSION)}else this.initContainers(t);this.eventBus.trigger(o.a.INITIALIZED)}},{key:"cleanup",value:function(){this.inspectr.cleanup()}},{key:"checkTrackDownloadedImpression",value:function(){this.trackEvent(C.a.event.DOWNLOADED_IMPRESSION)}},{key:"copyPropertiesFromAdConfig",value:function(t){a.b(t,["AdServer","Creative","Format","Integrator","Platform","Publisher","ThirdPartyTracking"],this)}},{key:"initBackupContainer",value:function(t){var e=t.Creative.containers.placement;if(e.type!==s.a)return null;e.content=e.default.content,e.x=0,e.y=0;t=this.containerFactory.getContainer(e.type,t,"placement",this,this.adManager);return this.containers.placement=t}},{key:"initContainers",value:function(t){var e="placement",n=t.Creative.containers;n.hasOwnProperty(e)&&(this.containers[e]=this.containerFactory.getContainer(n[e].type,t,e,this,this.adManager)),Object.keys(n).forEach(function(t){t!==e&&delete n[t]}),this.eventBus.trigger(new b.a(b.a.RENDER))}},{key:"trackEvent",value:function(t){this.eventBus.trigger(new u.a(u.a.TRACKING_REQUEST,{trigger:u.a.trigger.EVENT,name:t}))}},{key:"click",value:function(t,e){var n={};e&&e.url&&(n.url=e.url);n=new u.a(u.a.TRACKING_REQUEST,{trigger:u.a.trigger.CLICK,name:t,meta:n});this.eventBus.trigger(n),this.executeClick(n)}},{key:"executeClick",value:function(t){var e,n;"object"===T(t)&&t.trigger&&t.trigger===u.a.trigger.CLICK&&!t.clickExecuted&&(e=t.name,t.meta&&t.meta.url&&(n=t.meta.url),n=this.tracker.getClickRedirectUrl(e,n),this.openUrl(n),t.clickExecuted=!0)}},{key:"openUrl",value:function(t){window.open(t,"_blank")}}],S(w.prototype,n),n=w;function w(){!function(t){if(!(t instanceof w))throw new TypeError("Cannot call a class as a function")}(this),this.containers={},this.darlaKey=null}r.a.Advert=n,e.a=n},function(t,e,n){"use strict";var o=n(12),a=n(1),s=(n(10),n(7)),r=n(0),c=n(11),i=n(6),u=n(15);function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b=[{key:"init",value:function(){r.a.UserAgentUtils.isiOS()||r.a.UserAgentUtils.isAndroid()||r.a.UserAgentUtils.isWinPhone()?this.state=f.state.QUALIFIED:this.addListeners()}},{key:"addListeners",value:function(){var e=this;this.mouseOverHandlerFn=function(t){return e.containerMouseOverEventHandler(t)},this.mouseOutHandlerFn=function(t){return e.containerMouseOutEventHandler(t)},this.touchStartHandlerFn=function(t){return e.touchStartHandler(t)},this.setQualifiedUserClickFn=function(t){return e.setQualifiedUserClick(t)},this.adEventBus.on(c.a.MOUSE_OVER,this.mouseOverHandlerFn),this.adEventBus.on(c.a.MOUSE_OUT,this.mouseOutHandlerFn),this.adEventBus.on(f.QUALIFIED_CLICK,this.setQualifiedUserClickFn),window.addEventListener("touchstart",this.touchStartHandlerFn),this.listenersAdded=!0}},{key:"removeListeners",value:function(){this.listenersAdded&&(this.adEventBus.off(c.a.MOUSE_OVER,this.mouseOverHandlerFn),this.adEventBus.off(c.a.MOUSE_OUT,this.mouseOutHandlerFn),this.adEventBus.off(f.QUALIFIED_CLICK,this.setQualifiedUserClickFn),window.removeEventListener("touchstart",this.touchStartHandlerFn))}},{key:"bufferEvent",value:function(t){this.buffer[0]=t}},{key:"qualifies",value:function(t){var e=this;return this.state===f.state.UNQUALIFIED&&this.hoverOverThresholdPassed&&t.meta.interaction?(this.hoverOverThresholdPassed=!1,this.bufferEvent(t),setTimeout(function(){e.setStateToQualified()},0),!1):this.state===f.state.QUALIFIED||!t.meta.interaction||(this.bufferEvent(t),this.noRolloverFlushTimeout||this.mouseOverContainer||(this.noRolloverFlushTimeout=setTimeout(function(){e.noRolloverTimeoutCompleteHandler()},f.NO_HOVER_FLUSH_TIMEOUT)),!1)}},{key:"setQualifiedUserClick",value:function(){this.qualifiedUserClick=!0}},{key:"startMouseOverTimer",value:function(){var t=this;this.rolloverThresholdTimeout||(this.rolloverThresholdTimeout=setTimeout(function(){t.rolloverThresholdTimeoutCompleteHandler()},f.HOVER_THRESHOLD))}},{key:"setStateToQualified",value:function(){var t;this.state!==f.state.QUALIFIED&&(this.state=f.state.QUALIFIED,this.removeListeners(),t=new u.a(u.a.QUALIFIED,{events:this.buffer}),this.eventBus.trigger(t),this.adEventBus.trigger(t))}},{key:"containerMouseOverEventHandler",value:function(){this.mouseOverContainer||(this.mouseOverContainer=!0,this.noRolloverFlushTimeout&&(clearTimeout(this.noRolloverFlushTimeout),this.noRolloverFlushTimeout=void 0),this.startMouseOverTimer())}},{key:"containerMouseOutEventHandler",value:function(){if(this.qualifiedUserClick&&0<this.buffer.length)return this.rolloverThresholdTimeoutCompleteHandler();this.mouseOverContainer&&(this.mouseOverContainer=!1,this.hoverOverThresholdPassed=!1,this.rolloverThresholdTimeout&&(clearTimeout(this.rolloverThresholdTimeout),this.rolloverThresholdTimeout=void 0,this.buffer=[]))}},{key:"touchStartHandler",value:function(){this.setStateToQualified()}},{key:"rolloverThresholdTimeoutCompleteHandler",value:function(){this.state===f.state.QUALIFIED||0<this.buffer.length&&this.mouseOverContainer?this.setStateToQualified():this.hoverOverThresholdPassed=!0}},{key:"noRolloverTimeoutCompleteHandler",value:function(){this.buffer=[]}}],l(f.prototype,b),b=f;function f(t){!function(t){if(!(t instanceof f))throw new TypeError("Cannot call a class as a function")}(this),this.state=f.state.UNQUALIFIED,this.mouseOverContainer=!1,this.buffer=[],this.rolloverThresholdTimeout=null,this.noRolloverFlushTimeout=null,this.touchStartHandlerFn=null,this.mouseOverHandlerFn=null,this.mouseOutHandlerFn=null,this.hoverOverThresholdPassed=!1,this.listenersAdded=!1,this.adEventBus=t,this.eventBus=new i.a(this),this.qualifiedUserClick=!1}(r.a.EventQualifier=b).HOVER_THRESHOLD=500,b.NO_HOVER_FLUSH_TIMEOUT=1e3,b.QUALIFIED_CLICK="eventQualifier.qualifiedClick",b.state={QUALIFIED:1,UNQUALIFIED:0};var h=b,d=n(3);function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b=[{key:"init",value:function(){var e=this;this.initialised||(this.isTouchDevice=r.a.UserAgentUtils.isiOS()||r.a.UserAgentUtils.isAndroid()||r.a.UserAgentUtils.isWinPhone(),this.qualifiedStateChangeHandlerFn=function(t){return e.qualifiedStateChangeHandler(t)},this.isTouchDevice||(this.advertEventBus.on(c.a.MOUSE_OVER,function(){return e.containerMouseOverEventHandler()}),this.advertEventBus.on(c.a.MOUSE_OUT,function(){return e.containerMouseOutEventHandler()}),this.eventQualifier.state===h.state.UNQUALIFIED&&this.eventQualifier.eventBus.on(u.a.QUALIFIED,this.qualifiedStateChangeHandlerFn)),this.globalEventBus.on(d.a.VISIBILITY_CHANGE,function(t){return e.visibilityChangeHandler(t)}),this.advertEventBus.on(a.a.TRACKING_REQUEST,function(t){return e.trackingRequestEventHandler(t)}),this.initialised=!0)}},{key:"clearNextUserInteractionTimeout",value:function(){this.nextUserInteractionTimeout&&(clearTimeout(this.nextUserInteractionTimeout),this.nextUserInteractionTimeout=null)}},{key:"resetNextUserInteractionTimeout",value:function(){var t=this;this.clearNextUserInteractionTimeout(),this.nextUserInteractionTimeout=setTimeout(function(){return t.nextUserInteractionTimeoutHandler()},1e4)}},{key:"containerMouseOverEventHandler",value:function(){this.mouseIsOver||(this.mouseIsOver=!0,this.eventQualifier.state===h.state.QUALIFIED&&this.startTimer())}},{key:"containerMouseOutEventHandler",value:function(){this.mouseIsOver&&(this.mouseIsOver=!1,this.userInitiatedVideoPlaying||this.userInitiatedExpanded||this.stopTimer())}},{key:"visibilityChangeHandler",value:function(t){t.visible||(this.mouseIsOver=!1,this.stopTimer())}},{key:"nextUserInteractionTimeoutHandler",value:function(){this.nextUserInteractionTimeout=null,this.userInitiatedExpanded||this.userInitiatedVideoPlaying||this.stopTimer()}},{key:"qualifiedStateChangeHandler",value:function(t){this.eventQualifier.state===h.state.QUALIFIED&&(this.eventQualifier.eventBus.off(u.a.QUALIFIED,this.qualifiedStateChangeHandlerFn),0<t.events.length&&this.interactionEventHandler(t.events[0]))}},{key:"videoTimerEventHandler",value:function(t){switch(t.trigger){case a.a.trigger.TIMER_START:this.eventQualifier.state===h.state.QUALIFIED&&(this.isTouchDevice||this.mouseIsOver)&&(this.userInitiatedVideoPlaying=!0,this.startTimer());break;case a.a.trigger.TIMER_STOP:this.userInitiatedVideoPlaying=!1,!this.isTouchDevice&&this.mouseIsOver||this.stopTimer()}}},{key:"nonInteractionEventHandler",value:function(t){this.userInitiatedExpanded&&t.name===D.event.CONTRACT&&(this.userInitiatedExpanded=!1,this.stopTimer())}},{key:"interactionEventHandler",value:function(t){this.eventQualifier.state===h.state.QUALIFIED&&(this.isTouchDevice||this.mouseIsOver)&&(this.startTimer(),t.name===D.event.EXPAND&&(this.userInitiatedExpanded=!0))}},{key:"trackingRequestEventHandler",value:function(t){if("object"===p(t))switch(t.trigger){case a.a.trigger.TIMER_START:case a.a.trigger.TIMER_STOP:t.meta.video&&this.videoTimerEventHandler(t);break;case a.a.trigger.EVENT:t.meta.interaction?this.interactionEventHandler(t):this.nonInteractionEventHandler(t)}}},{key:"startTimer",value:function(){this.isTouchDevice&&this.resetNextUserInteractionTimeout(),this.timerRunning||(this.advertEventBus.trigger(new a.a(a.a.TRACKING_REQUEST,{trigger:a.a.trigger.TIMER_START,name:D.timer.INTERACTION})),this.timerRunning=!0)}},{key:"stopTimer",value:function(){this.isTouchDevice&&this.clearNextUserInteractionTimeout(),this.timerRunning&&(this.advertEventBus.trigger(new a.a(a.a.TRACKING_REQUEST,{trigger:a.a.trigger.TIMER_STOP,name:D.timer.INTERACTION})),this.timerRunning=!1)}}],v(y.prototype,b),b=y;function y(t,e,n){!function(t){if(!(t instanceof y))throw new TypeError("Cannot call a class as a function")}(this),this.advertEventBus=t,this.globalEventBus=n,this.eventQualifier=e,this.mouseIsOver=!1,this.eventBus=new i.a(this),this.isTouchDevice=!1,this.nextUserInteractionTimeout=null,this.userInitiatedExpanded=!1,this.userInitiatedVideoPlaying=!1,this.timerRunning=!1,this.initialised=!1}var m=r.a.InteractionTimerManager=b,g=n(17);function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var b=(E(C.prototype,[{key:"start",value:function(){this.running||(this.startTime=(new Date).getTime(),this.running=!0)}},{key:"stop",value:function(){this.running&&(this.timeElapsed+=(new Date).getTime()-this.startTime,this.running=!1)}},{key:"flush",value:function(){if(this.stop(),0<this.timeElapsed){var t=this.flushCount*this.timeElapsed+this.cumulativeTimeElapsed;return this.flushCount++,this.cumulativeTimeElapsed+=this.timeElapsed,this.timeElapsed=0,t}return 0}}]),C);function C(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,C),this.name=t,this.video=!!e.video,this.startTime=null,this.timeElapsed=0,this.cumulativeTimeElapsed=0,this.flushCount=1,this.running=!1}var O=r.a.Timer=b,T=n(16),S=n(19),w=n(22);function I(t){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function R(t,e,n){return(R="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=P(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function k(t,e){return(k=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=P(n);return t=r?(t=P(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==I(t)&&"function"!=typeof t?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e):t}}function P(t){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&k(t,e)}(i,T.a);var t,r=_(i);function i(t,e){var n;return function(t){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this),(n=r.call(this,t,e)).userInteracted=!1,n.expandedOnce=!1,n.videoPlaybackInitiated=!1,n.timers={},n.flushTimersTimeout=null,n.disableTimers=!1,n.mouseOverContainer=!1,n.interactionsQualified=!1,n.isTouchDevice=Object(g.d)()||Object(g.a)()||Object(g.c)(),n.qualifier=new h(n.advertEventBus),n.qualifier.init(),n.qualifierStateChangeHandlerFn=function(t){return n.qualifierStateChangeHandler(t)},n.qualifier.eventBus.on(u.a.QUALIFIED,n.qualifierStateChangeHandlerFn),n.interactionTimerManager=new m(e.eventBus,n.qualifier,e.globalEventBus),n.interactionTimerManager.init(),n.isTouchDevice||(n.advertEventBus.on(c.a.MOUSE_OVER,function(){return n.containerMouseOverEventHandler()}),n.advertEventBus.on(c.a.MOUSE_OUT,function(){return n.containerMouseOutEventHandler()})),n.globalEventBus.on(s.a.BEFORE_UNLOAD,function(){return n.pageUnloadHandler()}),n.advertEventBus.on(a.a.QUALIFIED_CLICK,function(){return n.qualifiedClickHandler()}),n}return t=[{key:"qualifiedClickHandler",value:function(){this.interactionsQualified||this.advertEventBus.trigger(h.QUALIFIED_CLICK)}},{key:"getTimer",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.timers.hasOwnProperty(t)||(this.timers[t]=new O(t,e)),this.timers[t]}},{key:"flushTimers",value:function(){var e=this;this.displayTimerThresholdReached()&&(this.disableTimers=!0,this.creativeEventHandler({name:i.event.TIMER_CAP,trigger:a.a.trigger.EVENT,meta:{trackOnce:!0}})),Object.keys(this.timers).forEach(function(t){e.flushTimer(t)}),this.disableTimers=!0}},{key:"displayTimerThresholdReached",value:function(){var t=this.getTimer(i.timer.DISPLAY);return 9e5<=("number"==typeof t.timeElapsed&&t.timeElapsed?t.timeElapsed:+new Date-t.startTime)}},{key:"flushTimer",value:function(t){var e=this.getTimer(t),n=e.flush();0!==n&&(t={type:T.a.type.PIXEL,event:{trigger:a.a.trigger.TIMER_STOP,name:t,meta:{duration:n,video:e.video}}},n=this.platform.getUrls(t),this.disabled||this.disableTimers||S.a.requestPixels(n),t=new w.a(w.a.TIMER_CHANGE,{timer:e,platformEventType:this.platform.getPixelEventType(t)}),this.advertEventBus.trigger(t))}},{key:"startFlushTimersCountdown",value:function(){var t=this;this.flushTimersTimeout||(this.flushTimersTimeout=window.setTimeout(function(){t.flushTimers()},9e5))}},{key:"containerMouseOverEventHandler",value:function(){this.mouseOverContainer||(this.mouseOverContainer=!0)}},{key:"containerMouseOutEventHandler",value:function(){this.mouseOverContainer&&(this.mouseOverContainer=!1)}},{key:"creativeExpansionHandler",value:function(){this.expandedOnce||(R(P(i.prototype),"creativeEventHandler",this).call(this,{name:i.event.EXPANDED_IMPRESSION,trigger:a.a.trigger.EVENT}),this.expandedOnce=!0)}},{key:"userInteractionHandler",value:function(){this.userInteracted||(R(P(i.prototype),"creativeEventHandler",this).call(this,{name:i.event.INTERACTIVE_IMPRESSION,trigger:a.a.trigger.EVENT}),this.userInteracted=!0,this.advertEventBus.trigger(o.a.INTERACTIVE_IMPRESSION))}},{key:"videoStartHandler",value:function(){this.videoPlaybackInitiated||(R(P(i.prototype),"creativeEventHandler",this).call(this,{name:i.event.VIDEO_IMPRESSION,trigger:a.a.trigger.EVENT,meta:{video:!0}}),this.videoPlaybackInitiated=!0)}},{key:"qualifierStateChangeHandler",value:function(t){var e=this;this.interactionsQualified=!0,this.qualifier.eventBus.off(u.a.QUALIFIED,this.qualifierStateChangeHandlerFn),t.events.forEach(function(t){return e.creativeEventHandler(t)})}},{key:"timerStartEventHandler",value:function(t){switch(t.name){case i.timer.DISPLAY:this.startFlushTimersCountdown();break;case i.timer.EXPANSION:this.creativeExpansionHandler()}var e=!(!t.meta||!t.meta.video),t=this.getTimer(t.name,{video:e});t.start();e={event:{trigger:a.a.trigger.TIMER_START,name:name,meta:{video:t.video}}},e=new w.a(w.a.TIMER_CHANGE,{timer:t,platformEventType:this.platform.getPixelEventType(e)});this.advertEventBus.trigger(e)}},{key:"timerStopEventHandler",value:function(t){t.name===i.timer.DISPLAY||t.name===i.timer.VIEW?this.getTimer(t.name).stop():this.flushTimer(t.name)}},{key:"creativeEventHandler",value:function(t){if("object"===I(t)){switch(t.trigger){case a.a.trigger.TIMER_START:if(this.disableTimers)return;this.timerStartEventHandler(t);break;case a.a.trigger.TIMER_STOP:this.timerStopEventHandler(t);break;case a.a.trigger.CLICK:this.userInteractionHandler(),this.interactionsQualified=!0,this.qualifier.setStateToQualified();break;case a.a.trigger.EVENT:if(this.populateEventMeta(t),!this.interactionsQualified&&!this.qualifier.qualifies(t))return;t.meta.interaction&&this.userInteractionHandler(),t.meta.video&&0===t.meta.durationPercentage&&this.videoStartHandler()}R(P(i.prototype),"creativeEventHandler",this).call(this,t)}}},{key:"pageUnloadHandler",value:function(){this.flushTimers()}}],A(i.prototype,t),i}();n.timer={DISPLAY:"display",EXPANSION:"expansion",INTERACTION:"interaction",VIEW:"view"},n.event={CONTRACT:"contract",EXPAND:"expand",EXPANDED_IMPRESSION:"expandedImpression",INTERACTIVE_IMPRESSION:"interactiveImpression",VIDEO_IMPRESSION:"videoImpression",TIMER_CAP:"timerCap"},r.a.RichTracker=n;var D=e.a=n},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return a});var e=n(0),i=n(9),o=n(17);function r(t){t=t?i.e().document:document;return{x:t.pageXOffset||t.documentElement.scrollLeft||t.body.scrollLeft,y:t.pageYOffset||t.documentElement.scrollTop||t.body.scrollTop}}function a(t){var e=t?i.e().document:document,n="CSS1Compat"===e.compatMode,r=e.documentElement.clientWidth,t=n&&r||e.body.clientWidth||r,r=e.documentElement.clientHeight,r=n&&r||e.body.clientHeight||r;return{w:t,h:r=o.d()&&r<window.innerHeight?window.innerHeight:r}}e.a.ViewportUtils={getPageOffsets:r,getViewportDims:a}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var n=n(0),r="inlineDiv";n.a.ContainerType={INLINE_DIV:r,FLOATING_DIV:"floatingDiv",NO_CONTENT:"noContent"}},function(t,e,n){"use strict";var r=n(6);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=s(n);return t=r?(t=s(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==i(t)&&"function"!=typeof t?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e):t}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var c=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(i,n(2).a);var r=a(i);function i(t,e,n){return function(t){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this),(t=r.call(this,t)).meta=e,t.source=n,t}return i}();function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var l,l=(l=[{key:"setTarget",value:function(t){this.targetFrameOrWindow=t}},{key:"setListenerWindow",value:function(t){t!==window&&t.addEventListener("message",this.handlePostMessage.bind(this))}},{key:"handlePostMessage",value:function(t){t.data&&t.data.topic&&this.eventDispatcher.trigger(new c(t.data.topic,t.data.meta,t.source))}},{key:"send",value:function(t,e){this.postMessage({topic:t,meta:e},"*")}},{key:"on",value:function(t,e,n){return this.eventDispatcher.on(t,e,n)}},{key:"off",value:function(t,e,n){return this.eventDispatcher.off(t,e,n)}},{key:"postMessage",value:function(){if(this.targetFrameOrWindow)try{var t=this.targetFrameOrWindow;try{t.nodeName&&"IFRAME"===t.nodeName&&(t=this.targetFrameOrWindow.contentWindow)}catch(t){}t.postMessage.apply(t,arguments)}catch(t){}}},{key:"cleanup",value:function(){window.removeEventListener("message",this.handlePostMessage)}}],u(f.prototype,l),f);function f(t){!function(t){if(!(t instanceof f))throw new TypeError("Cannot call a class as a function")}(this),this.eventDispatcher=new r.a,this.setTarget(t),window.addEventListener("message",this.handlePostMessage.bind(this))}e.a=l},function(t,e,i){"use strict";var n=i(0);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=c(n);return t=r?(t=c(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==o(t)&&"function"!=typeof t?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e):t}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var r=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(r,i(2).a);var n=s(r);function r(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{key:null};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(t=n.call(this,t)).key=e.key,t}return r}();(n.a.SafeFrameKeyUpdateEvent=r).UPDATE="SafeFrameKeyUpdateEvent.update",e.a=r},function(t,e,n){"use strict";e.a=function(){try{console.warn.apply(console,[].slice.call(arguments))}catch(t){try{console.warn(arguments[0])}catch(t){}}}},function(t,e,n){"use strict";var r=n(0),i=(n(10),n(5)),o=n(4);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=h(n);return t=r?(t=h(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==a(t)&&"function"!=typeof t?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e):t}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(s,i.a);var t,a=f(s);function s(t,e,n,r,i,o){return function(t){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}(this),(o=a.call(this,t,e,n,r,i,o)).anchorDiv=null,o.contentDiv=null,o.anchorDivAttemptIntervals=[10,20,50,100,200,500],o.preventRender=!1,o}return t=[{key:"init",value:function(t){u(h(s.prototype),"init",this).call(this,t),this.setAnchorDivStyle(),this.prepareAnchorDiv(),this.anchorDiv&&this.content&&this.content.setContext(this.anchorDiv.ownerDocument,this.anchorDiv.ownerDocument.defaultView);t=t.getOverride("domLoadTimeout");this.domLoadTimeout=null!==t?t:s.DOM_LOAD_TIMEOUT}},{key:"getAnchorLayoutState",value:function(){return this.getState(i.a.state.DEFAULT)}},{key:"getInitialLayoutState",value:function(){return this.getAnchorLayoutState()}},{key:"setAnchorDivStyle",value:function(){var t=this.getAnchorLayoutState().data;this.anchorDivStyle={position:"relative",display:"block",width:t.width+"px",height:t.height+"px",verticalAlign:"top"}}},{key:"prepareAnchorDiv",value:function(){if(this.anchorDiv=this.getAnchorDiv(),!this.anchorDiv&&this.containerAnchorParent)this.anchorDiv=document.createElement("div"),this.anchorDiv.id=this.containerAnchorId,this.containerAnchorParent.appendChild(this.anchorDiv),this.anchorDivStyle.display="inline-block";else if(!this.anchorDiv&&this.advertAnchorPlaceholder)this.anchorDiv=document.createElement("div"),this.anchorDiv.id=this.advertAnchorId,this.advertAnchorPlaceholder.parentNode.insertBefore(this.anchorDiv,this.advertAnchorPlaceholder),o.c(this.advertAnchorPlaceholder,{display:"none"}),this.anchorDivStyle.display="inline-block";else if(!this.anchorDiv){try{console.warn('[CRAFT:Anchor "'.concat(this.advertAnchorId,'" not present in current window context]'))}catch(t){}return}r.a.DOMUtils.applyStyles(this.anchorDiv,this.anchorDivStyle)}},{key:"checkAutoRender",value:function(){this.rendered||!this.autoRender||this.hostPage.domLoaded||this.addDOMLoadRenderTimeout(),u(h(s.prototype),"checkAutoRender",this).call(this)}},{key:"addDOMLoadRenderTimeout",value:function(){var t=this;this.hostPage.domLoaded||this.domLoadRenderTimeout||(this.domLoadRenderTimeout=window.setTimeout(function(){t.forceRendering()},this.domLoadTimeout))}},{key:"forceRendering",value:function(){this.render()}},{key:"getAnchorDiv",value:function(){return document.getElementById(this.containerAnchorId||this.advertAnchorId)||this.advertAnchorDiv}},{key:"render",value:function(){var t=this;if(!this.rendered&&!this.closed){if(!this.anchorDiv&&(this.anchorDiv=this.getAnchorDiv(),!this.anchorDiv))return 0<this.anchorDivAttemptIntervals.length?void window.setTimeout(function(){return t.render()},this.anchorDivAttemptIntervals.shift()):void 0;this.createContentDiv();var e=this.anchorDiv.ownerDocument;this.contentDiv=e.getElementById(this.contentId),this.adConfig.DeliveryServerTag&&this.adConfig.DeliveryServerTag.variables&&this.adConfig.DeliveryServerTag.variables.srvrid&&this.contentDiv.setAttribute(s.REQUEST_ID_ATTR,this.adConfig.DeliveryServerTag.variables.srvrid),this.content.render(),u(h(s.prototype),"render",this).call(this)}}},{key:"createContentDiv",value:function(){var t=this.getInitialLayoutState().data,e=document.createElement("div");e.id=this.contentId,o.c(e,{position:"absolute",width:"".concat(t.width,"px"),height:"".concat(t.height,"px"),left:"0",top:"0","text-align":"left"}),this.anchorDiv.appendChild(e)}},{key:"reload",value:function(){this.rendered?(this.content.remove(),this.content.forcePageLoad(),this.content.render(),this.show()):this.render()}},{key:"close",value:function(){if(this.rendered&&!this.closed){u(h(s.prototype),"close",this).call(this);try{this.contentDiv.parentNode===this.anchorDiv||this.contentDiv.parentNode.removeChild(this.contentDiv),this.anchorDiv.parentNode.removeChild(this.anchorDiv)}catch(t){}}}}],c(s.prototype,t),s}();n.DOM_LOAD_TIMEOUT=2e3,n.REQUEST_ID_ATTR="data-request-id",r.a.InlineDivContainer=n,e.a=n},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var n=n(0),r="delivr.safeFrameSandbox";function i(){try{if(window.sfAPI||window.$sf.ext)return!0}catch(t){}return!1}function o(){return!!document.querySelector('meta[name="'.concat(r,'"]'))}n.a.SafeFrameUtils={isInFlexFrame:function(){if(i()||o()){var t=(o()?parent:window).$sf.ext;try{var e=t.ui();if("string"==typeof e.flex||"number"==typeof e.flex&&0!==e.flex)return!0}catch(t){console.error(t.message)}}return!1},isInSafeFrame:i,isInSafeFrameSandbox:o,getSafeFrameSandbox:function(){return window.oneCreativeSafeFrameSandbox},SANDBOX_META_NAME:r}},function(t,e,n){"use strict";var r=n(0),i=n(21),o=n(1),a=(n(10),n(4)),s=n(6);function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n=[{key:"init",value:function(t,e){e=t.Creative.containers[e];this.content=e.content,this.width=e.states.default.width,this.height=e.states.default.height,this.setAdConfig(t)}},{key:"setAdConfig",value:function(t){this.adConfig=t,this.clickthroughs=t.Creative.clicks,this.adServerVars=t.AdServer}},{key:"render",value:function(){this.containerEl=this.DOMContext.getElementById(this.targetId),this.renderContent(),this.rendered=!0}},{key:"renderContent",value:function(){this.containerEl.appendChild(this.getBackupImageNode(this.content)),this.contentInitialised()}},{key:"getBackupImageNode",value:function(t){var e=this,n=this.getDefaultClickId(),r=document.createElement("img");if(r.src=this.adConfig.getFileUrl(t),a.c(r,{border:0,width:"".concat(this.width,"px"),height:"".concat(this.height,"px")}),n){t=document.createElement("a");return t.href=this.advert.tracker.getClickRedirectUrl(n,this.adConfig.Creative.clicks[n].url),t.target="_blank",t.addEventListener("click",function(){var t=new o.a(o.a.TRACKING_REQUEST,{trigger:o.a.trigger.CLICK,name:n});e.adEventBus.trigger(t)}),t.appendChild(r),t}return r}},{key:"getDefaultClickId",value:function(){if(this.adConfig.Creative.clicks.hasOwnProperty(u.DEFAULT_CLICK))return u.DEFAULT_CLICK;for(var t=Object.keys(this.adConfig.Creative.clicks),e=0;e<t.length;e++){var n=t[e];if(n.match(/^clicktag$/i))return n}return t[0]}},{key:"contentInitialised",value:function(){this.contentReady=!0,this.eventBus.trigger(i.a.READY)}}],c(u.prototype,n),n=u;function u(t,e,n,r,i,o){!function(t){if(!(t instanceof u))throw new TypeError("Cannot call a class as a function")}(this),this.eventBus=new s.a(this),this.adEventBus=r.eventBus,this.container=t,this.advert=r,this.containerEl=null,this.contentReady=!1,this.rendered=!1,this.DOMContext=document,this.targetId=o,this.init(e,n)}(r.a.BackupImageContent=n).DEFAULT_CLICK="default",e.a=n},function(t,e,n){"use strict";var r=n(0),i=n(8),o=n(12),a=n(23),s=n(6),c=(n(10),n(4));function u(t,r){function i(){t.apply(e,o),a=null}var o,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this,a=null;return function(){if(!a){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];o=e,a=setTimeout(i,r)}}}r.a.EventUtils={addCustomEventHandler:function(t,e,n){if(Array.isArray(n)&&t instanceof s.a)for(var r=0;r<n.length;r++){var i=n[r];i.custom&&t.on(i.name,e.customEventHandler,e)}},throttle:u};var l=n(3),f=n(7),h=n(9),d=n(29);function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n=[{key:"addLoadListeners",value:function(){var t=this;c.a(function(){t.dispatchDOMLoadEventOnce(),t.checkPageLoadStatus()}),c.b(function(){return t.dispatchPageLoadEventOnce()})}},{key:"addWindowEventListeners",value:function(){var t,e=this;this.windowEventListenersAdded||(this.windowEventListenersAdded=!0,t=window,(t=this.env.friendlyIframe&&this.env.type!==a.a.type.VPAID?h.e():t).addEventListener("scroll",u(function(){return e.dispatchViewportEvent(l.a.SCROLL)},250),!1),t.addEventListener("resize",u(function(){return e.dispatchViewportEvent(l.a.RESIZE)},250),!1),t.addEventListener("orientationchange",function(){return e.dispatchViewportEvent(l.a.ORIENTATION_CHANGE)},!1),t.addEventListener("focus",function(){return e.handleFocusChange(!0)}),t.addEventListener("blur",function(){return e.handleFocusChange(!1)}),t.addEventListener("beforeunload",function(){return e.handleOnBeforeUnload()}),document.addEventListener("visibilitychange",function(t){return e.handlePageVisibilityChange(t)}),t.hasFocus&&t.hasFocus()?this.handleFocusChange(!0):this.handleFocusChange(!1))}},{key:"checkPageLoadStatus",value:function(){var t=this;this.pageLoaded||(this.pageLoadStatusTimeout=setTimeout(function(){t.dispatchPageLoadEventOnce(),clearTimeout(t.pageLoadStatusTimeout)},v.LOAD_TIMEOUT))}},{key:"dispatchDOMLoadEventOnce",value:function(){this.domLoaded||(this.domLoaded=!0,this.globalEventBus.trigger(f.a.LOAD))}},{key:"dispatchPageLoadEventOnce",value:function(){this.pageLoaded||(this.pageLoaded=!0,this.dispatchViewportEvent(l.a.LOAD))}},{key:"dispatchViewportEvent",value:function(t){var e=d.a(this.env.friendlyIframe),n=d.b(this.env.friendlyIframe),n=new l.a(t,{offsetX:e.x,offsetY:e.y,width:n.w,height:n.h});this.globalEventBus.trigger(n)}},{key:"handleFocusChange",value:function(t){t&&!this.windowInFocus?(this.windowInFocus=!0,this.globalEventBus.trigger(l.a.FOCUS)):!t&&this.windowInFocus&&(this.windowInFocus=!1,this.globalEventBus.trigger(l.a.BLUR))}},{key:"handlePageVisibilityChange",value:function(){this.visible=!document.hidden;var t=new l.a(l.a.VISIBILITY_CHANGE,{visible:this.visible});this.globalEventBus.trigger(t)}},{key:"handleOnBeforeUnload",value:function(){this.globalEventBus.trigger(f.a.BEFORE_UNLOAD)}}],p(v.prototype,n),n=v;function v(t){!function(t){if(!(t instanceof v))throw new TypeError("Cannot call a class as a function")}(this),this.env=t.env,this.globalEventBus=t.globalEventBus,this.domLoaded=!1,this.pageLoaded=!1,this.windowInFocus=!0,this.visible=!0}n.LOAD_TIMEOUT=4e3;var y=r.a.PublisherPage=n;function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n=[{key:"registerAds",value:function(t){for(var e=t.length-1;-1<e;e--){var n=t.splice(e,1)[0];this.registerAd(n)}}},{key:"registerAd",value:function(t){var e=new i.a(t);if(this.env.determineEnvironmentForAdConfig(e),this.breakoutFactory){t=this.breakoutFactory.getBreakoutStrategy(e,this.env);if(t){if(t.breakout())return;e.Overrides[i.a.override.RENDER_BACKUP]=!0}}return this.initAd(e)}},{key:"initAd",value:function(t){var e=String(t.AdServer.cacheBuster);t.Publisher.url=h.d()?document.referrer:location.href,this.hostPage.addWindowEventListeners();var n=this.adverts[e]=new this.advertClass,e={window:window,advert:n,libraryNamespace:r.a};return t.invokeHook(i.a.hookTypes.BEFORE_ADVERT_INIT,[e]),n.init(t,this),this.globalEventBus.trigger(new o.a(o.a.ADDED,{advert:n})),t.invokeHook(i.a.hookTypes.AFTER_ADVERT_INIT,[e]),n}},{key:"cleanup",value:function(){this.adverts={}}}],m(g.prototype,n),n=g;function g(t){!function(t){if(!(t instanceof g))throw new TypeError("Cannot call a class as a function")}(this),this.adverts={},this.globalEventBus=new s.a(this),this.env=new a.a(t.environmentType),this.env.determineEnvironment(),this.hostPage=new y(this),this.hostPage.addLoadListeners(),this.advertClass=t.advertClass,this.breakoutFactory=t.breakoutFactory,this.containerFactory=t.containerFactory,this.trackerClass=t.trackerClass}r.a.BaseAdManager=n,e.a=n},function(t,e,n){"use strict";var r=n(0),i=n(12),o=n(14),a=n(4),s=n(6),c=n(3),u=n(1),l=n(21),f=n(13),h=n(26),d=n(7);function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var y,y=(y=[{key:"init",value:function(){var e=this;this.initialized||(this.initialized=!0,this.windowContext.addEventListener("message",function(t){return e.postMessageHandler(t)}),this.adEventBus.on(f.a.ACTION_COMPLETE,function(t){return e.containerActionEventCompleteHandler(t)}),this.adEventBus.on(d.a.DETACH,function(t){return e.containerDomDetatchEventHandler(t)}),this.adManager.globalEventBus.on(u.a.GLOBAL_RELAY,function(t){return e.globalRelayEventHandler(t)}))}},{key:"setContentOrigin",value:function(t){this.contentOrigin=t}},{key:"postMessageHandler",value:function(t){if(!this.shouldAcceptMessage(t))return!1;var e;this.adContentWindow=this.adContentWindow||t.source;var n={};try{n="object"===p(t.data)?t.data:JSON.parse(t.data)}catch(t){console.error(t.message)}switch(n.topic){case m.topic.INIT:this.sendConfig();break;case m.topic.CLICK:case m.topic.EVENT:var r,i={trigger:n.topic===m.topic.CLICK?u.a.trigger.CLICK:u.a.trigger.EVENT,name:n.meta.name,meta:n.meta.overrides};n.meta.reportingLabel&&(i.reportingLabel=n.meta.reportingLabel),e=new u.a(u.a.TRACKING_REQUEST,i),this.dispatchAdvertLevelEvent(e),n.meta.global&&(r=new u.a(u.a.GLOBAL_RELAY,n.meta),this.adManager.globalEventBus.trigger(r));break;case m.topic.TIMER:e=new u.a(u.a.TRACKING_REQUEST,{trigger:n.meta.action,name:n.meta.name,meta:n.meta}),this.dispatchAdvertLevelEvent(e);break;case m.topic.CONTAINER_EVENT:e=new u.a(u.a.TRACKING_REQUEST,{trigger:u.a.trigger.EVENT,name:n.meta.name,meta:n.meta.overrides}),this.dispatchAdvertLevelEvent(e),i={uid:n.meta.uid,action:n.meta.name,state:{key:n.meta.state},containerId:n.meta.container.id},i=new h.a(h.a.ACTION_REQUEST,i),this.dispatchAdvertLevelEvent(i);break;case m.topic.QUALIFIED_CLICK:e=new u.a(u.a.QUALIFIED_CLICK),this.dispatchAdvertLevelEvent(e)}return!0}},{key:"containerActionEventCompleteHandler",value:function(t){t={uid:t.uid,container:t.containerId,state:t.state.key,name:t.action,status:t.status,detail:t.detail};this.dispatchToContent(this.constructMessage(m.topic.CONTAINER_EVENT_COMPLETE,t))}},{key:"containerDomDetatchEventHandler",value:function(t){t.container===this.container&&(this.contentReady=!1,this.adContentWindow=null)}},{key:"globalRelayEventHandler",value:function(t){this.dispatchToContent(this.constructMessage(m.topic.GLOBAL_RELAY_EVENT,{name:t.name,meta:t.meta}))}},{key:"shouldAcceptMessage",value:function(t){return!(t.origin!==this.contentOrigin||!this.htmlContent.contentObject||!this.htmlContent.contentObject.contentWindow||this.htmlContent.contentObject.contentWindow!==t.source)}},{key:"contentInitialised",value:function(){this.contentReady=!0,0<this.outgoingMessageQueue.length&&this.sendQueuedMessagesToContent(),this.htmlContent.eventBus.trigger(l.a.READY)}},{key:"dispatchToContent",value:function(t){this.contentReady?this.sendMessage(t):this.addToOutgoingQueue(t)}},{key:"addToOutgoingQueue",value:function(t){this.outgoingMessageQueue.push(t)}},{key:"constructMessage",value:function(t,e){return{topic:t,meta:e}}},{key:"sendMessage",value:function(t){void 0!==this.adContentWindow&&this.adContentWindow.postMessage(t,this.contentOrigin)}},{key:"sendConfig",value:function(){var t;this.contentReady||(o.b(this.adConfig,["AdServer","Creative","Format","Integrator","Platform","Publisher","DeliveryGroups","DeliveryServerTag","User"],t={}),t.Format&&t.Format.library&&t.Format.library.hooks&&delete t.Format.library.hooks,t={environment:this.adManager.env.type,container:{id:this.container.id,state:this.container.state},configuration:t},this.sendMessage(this.constructMessage(m.topic.INIT_COMPLETE,t)),this.contentInitialised())}},{key:"dispatchAdvertLevelEvent",value:function(t){t.target=this.htmlContent,this.adEventBus.trigger(t)}},{key:"sendQueuedMessagesToContent",value:function(){var t=this;this.dispatchToContent(this.outgoingMessageQueue.shift()),0<this.outgoingMessageQueue.length&&setTimeout(function(){return t.sendQueuedMessagesToContent()},this.QUEUED_MESSAGE_PUSH_DELAY)}}],v(m.prototype,y),m);function m(t,e,n,r){!function(t){if(!(t instanceof m))throw new TypeError("Cannot call a class as a function")}(this),this.adConfig=e,this.container=t,this.adEventBus=n.eventBus,this.adManager=n.adManager,this.htmlContent=r,this.windowContext=window,this.contentReady=!1,this.outgoingMessageQueue=[],this.initialized=!1,this.contentOrigin=null}y.topic={INIT:"init",INIT_COMPLETE:"initComplete",CLICK:"click",QUALIFIED_CLICK:"qualifiedClick",EVENT:"event",CONTAINER_EVENT:"containerEvent",CONTAINER_EVENT_COMPLETE:"containerEventComplete",TIMER:"timer",GLOBAL_RELAY_EVENT:"globalRelayEvent"},y.QUEUED_MESSAGE_PUSH_DELAY=50;var g=r.a.IframeCommunicator=y,E=n(9),b=n(17);function C(){return(C=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n,r=arguments[e];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function O(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n=[{key:"init",value:function(){var e=this,t=this.adConfig.Creative.containers[this.containerId];this.content=t.content,this.width="100%",this.height="100%",this.globalEventBus.on(c.a.LOAD,function(t){return e.customEventHandler(t)}),this.globalEventBus.on(c.a.RESIZE,function(t){return e.customEventHandler(t)}),this.globalEventBus.on(c.a.SCROLL,function(t){return e.customEventHandler(t)});for(var n=0;n<T.ADVERT_EVENTS_DISPATCH_TO_CONTENT.length;n++){var r=T.ADVERT_EVENTS_DISPATCH_TO_CONTENT[n];this.adEventBus.on(r,function(t){return e.customEventHandler(t)})}}},{key:"render",value:function(){this.containerEl=this.DOMContext.getElementById(this.targetId),this.renderContent(),this.rendered=!0}},{key:"forcePageLoad",value:function(){this.iframeCommunicator.dispatchToContent(this.createContentEvent(new c.a(c.a.LOAD))),this.pageLoadForced=!0}},{key:"createContentEvent",value:function(t){var e={type:t.type};return C(e,this.createContentEventProperties(t)),e}},{key:"createContentEventProperties",value:function(e){var n={},r=["type","target","currentTarget"];return Object.keys(e).forEach(function(t){o.a(t,r)||"function"==typeof e[t]||(n[t]=e[t])}),n}},{key:"setContext",value:function(t,e){this.DOMContext=t,this.iframeCommunicator.windowContext=e}},{key:"renderContent",value:function(){var t=this.targetId+"_iframe";this.iframeCommunicator.init();var e=this.adConfig.getFileUrl(this.content);this.hostPage.pageLoaded&&this.forcePageLoad(),this.iframeCommunicator.setContentOrigin(e.split("/").splice(0,3).join("/"));var n=document.createElement("iframe");n.id=t,n.src=e,n.scrolling="no",n.seamless="seamless",n.allowtransparency="true",n.allow=["accelerometer","autoplay","camera","fullscreen","geolocation","gyroscope","microphone"].join("; "),a.c(n,{width:"100%",height:"100%",border:"0px","background-color":"transparent",overflow:"hidden"}),r.a.IframeUtils.applyAllowFullScreenAttribute(n),this.containerEl.appendChild(n),b.b()&&(n.style.visibility="hidden",setTimeout(function(){n.style.visibility="visible"},200)),r.a.IframeUtils.isInFriendlyIframe()&&this.addAllowFullscreenAttribute(),this.contentObject=this.DOMContext.getElementById(t)}},{key:"contentInitialised",value:function(){this.eventBus.trigger(l.a.READY)}},{key:"customEventHandler",value:function(t){if(!(t.target===this||this.pageLoadForced&&t.type===c.a.LOAD)){switch(t.type){case c.a.LOAD:case c.a.RESIZE:case c.a.SCROLL:t.availableWidth=t.width,t.availableHeight=t.height,t.scrollOffsetTop=t.offsetY,t.scrollOffsetLeft=t.offsetX}this.iframeCommunicator.dispatchToContent(this.createContentEvent(t))}}},{key:"addAllowFullscreenAttribute",value:function(){for(var t=window.parent.document.getElementsByTagName("iframe"),e=0;e<t.length;e++)t[e].contentWindow===window&&E.a(t[e])}}],O(T.prototype,n),n=T;function T(t,e,n,r,i,o){!function(t){if(!(t instanceof T))throw new TypeError("Cannot call a class as a function")}(this),this.eventBus=new s.a(this),this.adEventBus=r.eventBus,this.globalEventBus=i.globalEventBus,this.container=t,this.containerEl=null,this.adConfig=e,this.mouseIsOver=null,this.containerId=n,this.contentObject=null,this.rendered=!1,this.DOMContext=document,this.advert=r,this.targetId=o,this.hostPage=i.hostPage,this.pageLoadForced=!1,this.iframeCommunicator=new g(t,e,r,this),this.init()}n.ADVERT_EVENTS_DISPATCH_TO_CONTENT=[i.a.INTERACTIVE_IMPRESSION],r.a.HtmlContent=n,e.a=n},function(t,e,n){"use strict";var r=n(0);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=s(n);return t=r?(t=s(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==i(t)&&"function"!=typeof t?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e):t}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var c=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(c,n(38).a);var s=a(c);function c(t,e,n,r,i,o,a){return function(t){if(!(t instanceof c))throw new TypeError("Cannot call a class as a function")}(this),s.call(this,t,e,n,r,i,o,a)}return c}(),u=r.a.RichHtmlContent=c,l=n(36),f=n(8);function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var d,c=(d=p,c=[{key:"getContent",value:function(t,e,n,r,i,o){return new(i.env.requiresBackupImage()||e.getOverride(f.a.override.RENDER_BACKUP)?l.a:u)(t,e,n,r,i,o)}}],null&&h(d.prototype,null),h(d,c),p);function p(){!function(t){if(!(t instanceof p))throw new TypeError("Cannot call a class as a function")}(this)}r.a.RichContentFactory=c,e.a=c},function(t,e,n){"use strict";var r=n(0),i=(n(10),n(27)),o=n(1),a=n(28),s=n(5),c=n(26),u=n(18),l=n(20),f=n(25);function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=m(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=m(n);return t=r?(t=m(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==h(t)&&"function"!=typeof t?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e):t}}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(n,i.a);var t,e=y(n);function n(){var t;return function(t){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this),(t=e.call(this)).rendered=!1,t.qualifiedRolloverThreshold=n.QUALIFIED_ROLLOVER_THRESHOLD,t.mobileInteractionThreshold=n.MOBILE_INTERACTION_THRESHOLD,t.viewableImpressionThreshold=i.a.VIEWABLE_IMPRESSION_THRESHOLD,t}return t=[{key:"init",value:function(t,e){p(m(n.prototype),"init",this).call(this,t,e)}},{key:"processOverrides",value:function(t){for(var e=["qualifiedRolloverThreshold","mobileInteractionThreshold","viewableImpressionThreshold"],n=0;n<e.length;n++){var r=e[n],i=t.getOverride(r);null!==i&&(this[r]=i)}}},{key:"initBackupContainer",value:function(t){return p(m(n.prototype),"initBackupContainer",this).call(this,t)}},{key:"initContainers",value:function(t){var e,n,r=this;for(e in this.eventBus.on(c.a.ACTION_REQUEST,function(t){return r.containerActionEventHandler(t)}),t.Creative.containers)t.Creative.containers.hasOwnProperty(e)&&(this.containers[e]=this.containerFactory.getContainer(t.Creative.containers[e].type,t,e,this,this.adManager),(n=this.containers[e]).eventBus.on(u.a.RENDER,function(){return r.renderEventHandler()}),n.eventBus.on(f.a.CHANGE,function(){return r.containerViewChangeHandler()}),n.expandable&&n.eventBus.on(l.a.STATE_CHANGE,function(){return r.containerExpansionStateChangeHandler()}))}},{key:"renderEventHandler",value:function(){var t;this.rendered||(this.rendered=!0,t=new o.a(o.a.TRACKING_REQUEST,{trigger:o.a.trigger.TIMER_START,name:a.a.timer.DISPLAY}),this.eventBus.trigger(t))}},{key:"containerExpansionStateChangeHandler",value:function(){var e=this,n=o.a.trigger.TIMER_STOP;Object.keys(this.containers).forEach(function(t){e.containers[t].state!==s.a.state.DEFAULT&&(n=o.a.trigger.TIMER_START)});var t=new o.a(o.a.TRACKING_REQUEST,{trigger:n,name:a.a.timer.EXPANSION});this.eventBus.trigger(t)}},{key:"containerViewChangeHandler",value:function(){var t,e=o.a.trigger.TIMER_STOP;for(t in this.containers)if(this.containers.hasOwnProperty(t)&&this.containers[t].visible){e=o.a.trigger.TIMER_START;break}var n=new o.a(o.a.TRACKING_REQUEST,{trigger:e,name:a.a.timer.VIEW});this.eventBus.trigger(n)}},{key:"containerActionEventHandler",value:function(n){var t,r=this,e=Object.keys(this.containers),i=[n];1===e.length?(t=this.containers[e[0]])[n.action].apply(t,i):n.containerId?(t=this.containers[n.containerId])&&t[n.action].apply(t,i):this.Creative.actions&&this.Creative.actions.hasOwnProperty(n.action)&&this.Creative.actions[n.action].forEach(function(t){var e;t.source!==n.target.containerId&&"*"!==t.source||(e=r.containers[t.target])&&e[t.action].apply(e,i)})}}],d(n.prototype,t),n}();n.QUALIFIED_ROLLOVER_THRESHOLD=500,n.MOBILE_INTERACTION_THRESHOLD=1e4,r.a.RichAdvert=n,e.a=n},function(t,e,n){"use strict";var r=n(27),i=n(5),o=n(13),c=n(20),u=(n(10),n(7)),l=n(4),f=n(3),h=n(34),d=n(11),a=n(0),p=n(25);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(){return(v=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n,r=arguments[e];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function m(t,e,n){return(m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function E(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=b(n);return t=r?(t=b(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==s(t)&&"function"!=typeof t?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e):t}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(s,h.a);var t,a=E(s);function s(t,e,n,r,i,o){return function(t){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}(this),(o=a.call(this,t,e,n,r,i,o)).mouseIsOver=!1,o.visibleinViewport=!1,o.visible=!1,o.pushesContent=!1,o.width=0,o.height=0,o.absLeft=0,o.absTop=0,o.initialParentHeight=0,o}return t=[{key:"copyProperties",value:function(t){m(b(s.prototype),"copyProperties",this).call(this,t),this.initialState&&this.states.hasOwnProperty(this.initialState)||(this.initialState=i.a.state.DEFAULT),this.expandable=1<Object.keys(this.states).length}},{key:"getInitialLayoutState",value:function(){return this.getState(this.initialState)}},{key:"getMaximumLayoutState",value:function(){for(var t=i.a.STATE_PRECEDENCE.length,e=0;e<t;e++){var n=i.a.STATE_PRECEDENCE[e];if(this.states.hasOwnProperty(n))return this.getState(n)}}},{key:"render",value:function(){var e=this;this.rendered||this.closed||(this.adEventBus.on(o.a.ACTION_COMPLETE,function(t){return e.containerActionCompleteHandler(t)}),m(b(s.prototype),"render",this).call(this),this.checkVisibility(),window.setTimeout(function(){return e.checkVisibility()},r.a.VIEWABLE_IMPRESSION_THRESHOLD-300),this.addMouseListeners())}},{key:"createContentDiv",value:function(){var t,e=this.anchorDiv.ownerDocument,n=e.createElement("div");n.id=this.contentId,t=this.anchorDiv,e=this.initialState===i.a.state.FULLSCREEN?(this.preventFullscreenDetach||(t=e.body),this.getFullscreenContentStyle()):this.getMaximumAnchoredContentStyle(),l.c(n,e),t.appendChild(n),this.initialParentHeight=l.e(this.anchorDiv.parentNode,"height"),this.adjustAnchorParent(this.getInitialLayoutState(this.initialState),!0)}},{key:"addMouseListeners",value:function(){var t=this;this.contentDiv.addEventListener("mouseenter",function(){return t.triggerMouseOverEvent()},!1),this.contentDiv.addEventListener("mouseleave",function(){return t.triggerMouseOutEvent()},!1)}},{key:"triggerMouseOverEvent",value:function(){var t;this.mouseIsOver||(t=new d.a(d.a.MOUSE_OVER),this.eventBus.trigger(t),this.adEventBus.trigger(t),this.mouseIsOver=!0)}},{key:"triggerMouseOutEvent",value:function(){var t;this.mouseIsOver&&(t=new d.a(d.a.MOUSE_OUT),this.eventBus.trigger(t),this.adEventBus.trigger(t),this.mouseIsOver=!1)}},{key:"checkVisibility",value:function(){}},{key:"triggerViewportEvent",value:function(t){t=t.inViewport;!this.visibleinViewport&&t?(this.visibleinViewport=!0,this.eventBus.trigger(new p.a(p.a.CHANGE,{viewable:t}))):this.visibleinViewport&&!t&&(this.visibleinViewport=!1,this.eventBus.trigger(new p.a(p.a.CHANGE,{viewable:t})))}},{key:"expand",value:function(t){this.expandAdapter&&this.rendered&&this.expandable&&(this.states.hasOwnProperty(t.state.key)?t.state.data=this.states[t.state.key]:t.state=this.states.hasOwnProperty(i.a.state.EXPAND)?this.getState(i.a.state.EXPAND):this.getMaximumLayoutState(),this.state!==t.state.key&&this.expandAdapter&&this.expandAdapter.expand(t))}},{key:"contract",value:function(t){this.expandAdapter&&this.rendered&&this.expandable&&(this.states.hasOwnProperty(t.state.key)?t.state.data=this.states[t.state.key]:t.state=this.getState(i.a.state.DEFAULT),this.state!==t.state.key&&this.expandAdapter&&this.expandAdapter.contract(t))}},{key:"getStateClippingRect",value:function(t){var e,n=t===i.a.state.FULLSCREEN?{top:"auto",right:"auto",bottom:"auto",left:"auto"}:(t=(e=this.states[t]).offsetY||0,n=e.offsetX||0,{top:Math.abs(t),right:Math.abs(n)+e.width,bottom:Math.abs(t)+e.height,left:Math.abs(n)});return n}},{key:"getFullscreenContentStyle",value:function(){return{position:"fixed",top:"0",left:"0",bottom:"0",right:"0",width:null,height:null}}},{key:"getMaximumAnchoredContentStyle",value:function(){var t=this.getStateClippingRect(this.initialState),e=this.getAnchorLayoutState(),n=this.getMaximumLayoutState(),r=(n=n.key===i.a.state.FULLSCREEN?this.getState(i.a.state.EXPAND)||e:n).data,n=r.width,r=r.height;return v({position:"absolute",width:"".concat(n,"px"),height:"".concat(r,"px"),border:"0px",left:e.data.offsetX+"px",top:e.data.offsetY+"px",clip:"rect(".concat(t.top,"px,").concat(t.right,"px,").concat(t.bottom,"px,").concat(t.left,"px)"),"text-align":"left"},this.getAnimationCSS())}},{key:"contentToAnchor",value:function(){l.c(this.contentDiv,this.getMaximumAnchoredContentStyle()),this.preventFullscreenDetach||this.contentDiv.parentNode===this.anchorDiv||(this.adEventBus.trigger(new u.a(u.a.DETACH,{container:this})),this.anchorDiv.appendChild(this.contentDiv))}},{key:"contentToFullscreen",value:function(){l.c(this.contentDiv,this.getFullscreenContentStyle());var t=this.anchorDiv.ownerDocument;this.preventFullscreenDetach||this.contentDiv.parentNode===t.body||(this.adEventBus.trigger(new u.a(u.a.DETACH,{container:this})),t.body.appendChild(this.contentDiv))}},{key:"adjustAnchorParent",value:function(t,e){var n,r;t.key!==i.a.state.FULLSCREEN&&(n={},r={},t.data.push?(this.hasPushed=!0,n={height:"".concat(t.data.height,"px")},r={height:"auto"}):(n=this.anchorDivStyle,this.hasPushed||(r={height:this.initialParentHeight})),e||(n=v(n,this.getAnchorAnimationCSS()),r=v(r,this.getAnchorAnimationCSS())),l.c(this.anchorDiv,n),l.c(this.anchorDiv.parentNode,r))}},{key:"getAnchorAnimationCSS",value:function(){return this.transition?{transition:"height ".concat(this.transition.duration," ").concat(this.transition.timingFunction)}:{}}},{key:"getAnimationCSS",value:function(){return this.transition?{transition:"clip ".concat(this.transition.duration," ").concat(this.transition.timingFunction)}:{}}},{key:"contractionCompleteHandler",value:function(t){this.adjustAnchorParent(t.state);var e=this.getStateClippingRect(t.state.key),e={clip:"rect(".concat(e.top,"px,").concat(e.right,"px,").concat(e.bottom,"px,").concat(e.left,"px)"),"z-index":this.zIndex+1};l.c(this.contentDiv,e),this.state===i.a.state.FULLSCREEN&&this.contentToAnchor(),l.c(this.anchorDiv,{"z-index":this.zIndex}),this.state=t.state.key,this.eventBus.trigger(new c.a(c.a.STATE_CHANGE,{state:c.a.state.CONTRACT}))}},{key:"expansionCompleteHandler",value:function(t){this.adjustAnchorParent(t.state);var e=this.getStateClippingRect(t.state.key),n=t.state.key===i.a.state.FULLSCREEN?"":"px",n={clip:"rect(".concat(e.top).concat(n,",").concat(e.right).concat(n,",").concat(e.bottom).concat(n,",")+"".concat(e.left).concat(n,")"),"z-index":this.zIndex+s.ZINDEX_BUMP};l.c(this.contentDiv,n),this.state===i.a.state.FULLSCREEN?this.contentToAnchor():t.state.key===i.a.state.FULLSCREEN&&this.contentToFullscreen(),this.state=t.state.key,this.eventBus.trigger(new c.a(c.a.STATE_CHANGE,{state:c.a.state.EXPAND}))}},{key:"containerActionCompleteHandler",value:function(t){if(t.containerId===this.id&&t.status===o.a.status.SUCCESS)switch(t.action){case o.a.action.EXPAND:this.expansionCompleteHandler(t);break;case o.a.action.CONTRACT:this.contractionCompleteHandler(t)}}},{key:"coreLibEventHandler",value:function(t){m(b(s.prototype),"coreLibEventHandler",this).call(this,t),this.rendered&&(t.type===u.a.LOAD||f.a.LOAD)&&this.checkVisibility()}}],y(s.prototype,t),s}();(a.a.RichInlineDivContainer=n).ZINDEX_BUMP=10,e.a=n},function(t,e,n){"use strict";var i=n(0),r=n(9);function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a,a=(a=[{key:"bootstrapFriendlyWindow",value:function(t,e){try{n=i.a.createNamespace(t).nsVersion}catch(t){return!1}var n,r=n[e.AdManager.NAME];return r?r.registerAd(e):((n[e.AdManager.CONFIG_QUEUE]=n[e.AdManager.CONFIG_QUEUE]||[]).push(e),r=i.a[e.AdManager.LOADED_VERSIONS],n=e.Format.library.version,r&&-1!==r.indexOf(n)||((r=i.a[e.AdManager.LOADED_VERSIONS]=i.a[e.AdManager.LOADED_VERSIONS]||[]).push[n],(n=document.createElement("script")).src=e.Format.library.url,t.document.body.insertBefore(n,t.document.body.firstChild))),!0}}],o((n=s).prototype,[{key:"breakout",value:function(){var t=Object(r.c)(Object(r.b)(this.adConfig));if(!t)return!1;var e=t.ownerDocument.defaultView,n=this.adConfig.clone();return n.anchorPlaceholder=t,s.bootstrapFriendlyWindow(e,n)}}]),o(n,a),s);function s(t){!function(t){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}(this),this.adConfig=t}i.a.FriendlyIframeBreakout=a,e.a=a},function(t,e,n){"use strict";var r=n(0),i=n(8),o=n(5),a=n(4),s=n(9),c=n(42),u=n(35);function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}l(f.prototype,[{key:"breakout",value:function(){return this.registerCreative(),this.createSafeFrameSandbox()}},{key:"registerCreative",value:function(){var t=this.adConfig.Creative.containers.placement.states.default;r.a[f.registration.PROXY_FN_NAME]=function(t){t("register",r.a[f.registration.DATA_KEY]),r.a[f.registration.CALLBACK_FN_REF]=t};try{r.a[f.registration.STATUS_HOOK_REF]=this.adConfig.Format.library.hooks[i.a.hookTypes.ON_SAFEFRAME_STATUS_UPDATE]}catch(t){console.error(t)}window.$sf.ext.register(t.width,t.height,function(t,e){if("register"!==t&&"register-update"!==t||(r.a[f.registration.DATA_KEY]=e),"function"==typeof r.a[f.registration.STATUS_HOOK_REF])try{var n=f.registration.STATUS_HOOK_REF;if(!1===r.a[n].apply(null,[t,e]))return}catch(t){console.error(t)}if("function"==typeof r.a[f.registration.CALLBACK_FN_REF])try{r.a[f.registration.CALLBACK_FN_REF](t,e)}catch(t){console.error(t)}})}},{key:"createSafeFrameSandbox",value:function(){var t=this.adConfig.Creative.containers.placement.states[o.a.state.DEFAULT],e=document.createElement("iframe");e.id="craftSafeFrameSandbox_".concat(this.adConfig.AdServer.cacheBuster),e.seamless="seamless",e.allowtransparency="true",e.scrolling="no",Object(s.a)(e),a.c(e,{width:"".concat(t.width,"px"),height:"".concat(t.height,"px"),border:0,overflow:"hidden"});var n=t.offsetX<0?"right:0px;":"left:0px;",r=t.offsetY<0?"bottom:0px;":"top:0px;",r='<!DOCTYPE html><html><head><meta name="'.concat(u.a,'"></head>')+'<body style="padding:0;margin:0;width:100%;">'+'<div style="position:absolute;'.concat(n).concat(r,'">')+'<div id="'.concat(this.adConfig.anchorDivId,'"></div>')+"</div></body></html>";try{var i=document.getElementById(this.adConfig.DeliveryServerTag.variables.tagId);i.parentNode.insertBefore(e,i)}catch(t){document.body.appendChild(e)}i=e.contentDocument;return i.open(),i.write(r),i.close(),c.a.bootstrapFriendlyWindow(e.contentWindow,this.adConfig.clone())}}]),n=f;function f(t){!function(t){if(!(t instanceof f))throw new TypeError("Cannot call a class as a function")}(this),this.adConfig=t}(r.a.SafeFrameBreakout=n).registration={DATA_KEY:"_sfregdata",PROXY_FN_NAME:"_sfproxyfn",CALLBACK_FN_REF:"_sfcbfn",STATUS_HOOK_REF:"_sfhookgn"},e.a=n},function(t,e,n){"use strict";n(45),n(46)},function(t,e){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}"function"!=typeof Object.create&&(Object.create=function(t,e){function n(){}if(n.prototype=t,"object"===i(e))for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return new n})},function(t,e){Object.keys||(Object.keys=function(t){if(t!==Object(t))throw new TypeError("Object.keys called on a non-object");var e,n=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.push(e);return n})},,function(t,e,n){"use strict";n.r(e),n(44);var o=n(0),a=n(37),s=n(8),i=n(30),r=n(42);function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u=(c(l.prototype,[{key:"breakout",value:function(){}}]),l);function l(){!function(t){if(!(t instanceof l))throw new TypeError("Cannot call a class as a function")}(this)}var f=o.a.NonFriendlyIframeBreakout=u,h=n(43),d=n(9);function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}I=v,u=[{key:"getBreakoutStrategy",value:function(t,e){var n=null;return t.getOverride(s.a.override.RENDER_BACKUP)||e.safeFrameSandbox||void 0!==t.anchorPlaceholder||(e.safeFrame?n=new h.a(t):e.iframe&&v.requiresIframeBreakout(t)&&(n=new(e.friendlyIframe?r.a:f)(t))),n}},{key:"requiresIframeBreakout",value:function(t){if(Object(d.b)(t)===window.self)return!1;var e,n=t.Creative.containers;for(e in n)if(n.hasOwnProperty(e)){var r=n[e];if(r.type!==i.a||1<Object.keys(r.states).length)return!0}return!1}}],null&&p(I.prototype,null),p(I,u),I=v;function v(){!function(t){if(!(t instanceof v))throw new TypeError("Cannot call a class as a function")}(this)}var y=o.a.BreakoutFactory=I,m=n(40),g=n(34),E=n(39),b=n(4),C=n(3),O=n(29),T=n(13);function S(){return(S=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n,r=arguments[e];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var I=(u=[{key:"init",value:function(t){this.container=t,this.adEventBus=t.adEventBus;t=t.adManager.env;this.isInFriendlyIframe=t.friendlyIframe,this.isInFriendlyIframe&&d.e()!==window.self&&(this.containingIframe=d.c(parent)),this.registerHostPageGeometricUpdate(!0)}},{key:"expand",value:function(t){this.dispatchContainerActionCompleteEvent({uid:t.uid,action:T.a.action.EXPAND,state:t.state})}},{key:"contract",value:function(t){this.dispatchContainerActionCompleteEvent({uid:t.uid,action:T.a.action.CONTRACT,state:t.state})}},{key:"dispatchContainerActionCompleteEvent",value:function(t){t=S({status:T.a.status.SUCCESS,detail:"",containerId:this.container.id},t),t=new T.a(T.a.ACTION_COMPLETE,t);this.adEventBus.trigger(t)}},{key:"getVisibilityMetrics",value:function(){var t=O.b(this.isInFriendlyIframe),e=t.w,n=t.h,r=O.a(this.isInFriendlyIframe),i=r.x,o=r.y,a=this.getVisibleDims(),s=a.w,c=a.h,t=b.d(this.containingIframe||this.container.contentDiv),r=t.x,a=t.y,t=s*c;return{maximumAdArea:t,percentInView:(r+s<=i||e<r-i?0:s-(i<r?0:Math.abs(r-i))-Math.max(r+s-e-i,0))*(a+c<=o||n<a-o?0:c-(o<a?0:Math.abs(a-o))-Math.max(a+c-n-o,0))/t}}},{key:"cleanup",value:function(){this.registerHostPageGeometricUpdate(!1)}},{key:"registerHostPageGeometricUpdate",value:function(t){for(var e=[C.a.RESIZE,C.a.SCROLL,C.a.ORIENTATION_CHANGE],n=0;n<e.length;n++)this.container.globalEventBus[t?"on":"off"](e[n],this.container.checkVisibility,this.container)}},{key:"getVisibleDims",value:function(){return this.containingIframe?{w:parseInt(b.e(this.containingIframe,"width")),h:parseInt(b.e(this.containingIframe,"height"))}:{w:this.container.states[this.container.state].width,h:this.container.states[this.container.state].height}}}],w(A.prototype,u),A);function A(){!function(t){if(!(t instanceof A))throw new TypeError("Cannot call a class as a function")}(this)}var R=o.a.SimpleExpandAdapter=I,k=n(5),_=(n(10),n(32)),P=n(33);function D(){return(D=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n,r=arguments[e];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}u=[{key:"init",value:function(t,e){var n=this;this.container=t,this.adEventBus=t.adEventBus,this.initialState=e,this.commandQueue=[],this.activeCommand=null,this.safeFrameSandbox=window.frameElement,this.safeFrameAPI=window.parent.sfAPI||window.parent.$sf.ext,this.secureDarlaKey=null,o.a.createNamespace(parent).nsVersion[h.a.registration.PROXY_FN_NAME](function(t,e){n.statusUpdateHandler(t,e)}),this.defaultState=this.container.getState(k.a.state.DEFAULT),this.defaultState.key!==e.key&&this.expand({state:e})}},{key:"expand",value:function(t){var e=this.getArgumentObject();if(o.a.SafeFrameUtils.isInFlexFrame())return e.key=this.secureDarlaKey,e.ratio="".concat(t.state.data.width,"x").concat(t.state.data.height),void this.queueCommand(N.command.RESIZE_TO,[e],t);e.push=!(!t.state.data.push||!this.featureEnabled(N.feature.PUSH)),"number"!=typeof t.state.data.offsetX&&(t.state.data.offsetX=0),"number"!=typeof t.state.data.offsetY&&(t.state.data.offsetY=0);var n,r,i=this.defaultState.data;t.state.key===k.a.state.FULLSCREEN?(n=(r=this.safeFrameAPI.geom()).par&&r.par.t?parseInt(r.par.t):0,e.l=parseInt(r.self.l),e.r=parseInt(r.win.w)-(e.l+i.width),e.t=parseInt(r.self.t)-n,e.b=parseInt(r.win.h)-(e.t+i.height)+n,t.state.data.width=r.win.w,t.state.data.height=r.win.h):(r=Math.abs,e.l=r(r(i.offsetX)-r(t.state.data.offsetX)),e.r=r(t.state.data.width-(e.l+i.width)),e.t=r(r(i.offsetY)-r(t.state.data.offsetY)),e.b=r(t.state.data.height-(e.t+i.height))),Object.keys(e).forEach(function(t){0===e[t]&&delete e[t]}),this.queueCommand(N.command.EXPAND,[e],t)}},{key:"queueCommand",value:function(t,e,n){this.commandQueue.push({method:t,args:e,meta:n}),1===this.commandQueue.length&&this.executeNextCommand()}},{key:"executeNextCommand",value:function(){this.activeCommand=this.commandQueue.shift(),this.activeCommand.method===N.command.EXPAND?this.safeFrameAPI.expand(this.activeCommand.args[0]):this.safeFrameAPI[this.activeCommand.method].apply(null,this.activeCommand.args)}},{key:"contract",value:function(t){var e;o.a.SafeFrameUtils.isInFlexFrame()?((e=this.getArgumentObject()).key=this.secureDarlaKey,e.ratio="".concat(t.state.data.width,"x").concat(t.state.data.height),this.queueCommand(N.command.RESIZE_TO,[e],t)):this.queueCommand(N.command.COLLAPSE,[],t)}},{key:"resizeSandbox",value:function(){var t=this.activeCommand.meta.state.data;b.c(this.safeFrameSandbox,{width:"".concat(t.width,"px"),height:"".concat(t.height,"px")})}},{key:"getArgumentObject",value:function(){var t={};try{t=new parent.Object}catch(t){console.error(t.message)}return t}},{key:"featureEnabled",value:function(t){var e=this.safeFrameAPI.supports();return e&&e[t]}},{key:"getVisibilityMetrics",value:function(){var t=this.safeFrameAPI.geom().self;return{maximumAdArea:(t.b-t.t)*(t.r-t.l),percentInView:t.iv}}},{key:"cleanup",value:function(){}},{key:"dispatchContainerActionCompleteEvent",value:function(t,e){t=t===N.status.FAILED?T.a.status.FAILURE:T.a.status.SUCCESS;e=D({},this.activeCommand.meta,{status:t,detail:e&&e.reason?e.reason:null,containerId:this.container.id}),e=new T.a(T.a.ACTION_COMPLETE,e);this.adEventBus.trigger(e)}},{key:"dispatchKeyUpdateEvent",value:function(){null!==this.secureDarlaKey&&this.adEventBus.trigger(new _.a(_.a.UPDATE,{key:this.secureDarlaKey}))}},{key:"statusUpdateHandler",value:function(t,e){switch(N.status.GEOM_UPDATE,t){case N.status.GEOM_UPDATE:break;case N.status.REGISTER:case N.status.REGISTER_UPDATE:try{this.secureDarlaKey=e.key}catch(t){Object(P.a)("[SafeFrameExpandAdapter]: Failed to retrieve DARLA key")}this.dispatchKeyUpdateEvent();break;case N.status.RESIZED:case N.status.COLLAPSED:case N.status.EXPANDED:this.resizeSandbox();case N.status.FAILED:this.dispatchContainerActionCompleteEvent(t,e)}0<this.commandQueue.length&&this.executeNextCommand()}}],L(N.prototype,u),I=N;function N(){!function(t){if(!(t instanceof N))throw new TypeError("Cannot call a class as a function")}(this)}(o.a.SafeFrameExpandAdapter=I).command={EXPAND:"expand",COLLAPSE:"collapse",RESIZE_TO:"resizeTo"},I.feature={PUSH:"exp-push",EXPAND_OVER:"exp-over",READ_COOKIE:"read-cookie",WRITE_COOKIE:"write-cookie"},I.status={GEOM_UPDATE:"geom-update",REGISTER:"register",REGISTER_UPDATE:"register-update",EXPANDED:"expanded",COLLAPSED:"collapsed",RESIZED:"resize-to",FAILED:"failed"};var U=I,x=n(41);function F(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}u=j,I=[{key:"getContainer",value:function(t,e,n,r,i){return i.env.requiresBackupImage()||e.getOverride(s.a.override.RENDER_BACKUP)?new g.a(E.a,e,n,r,i):(o=new(i.env.safeFrameSandbox?U:R),new x.a(E.a,e,n,r,i,o));var o}}],null&&F(u.prototype,null),F(u,I),u=j;function j(){!function(t){if(!(t instanceof j))throw new TypeError("Cannot call a class as a function")}(this)}var M=o.a.RichContainerFactory=u,B=n(28);function H(t){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function V(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Q(t,e,n){return(Q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=q(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function K(t,e){return(K=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function G(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=q(n);return t=r?(t=q(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==H(t)&&"function"!=typeof t?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e):t}}function q(t){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}I=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&K(t,e)}(i,a.a);var t,e,n,r=G(i);function i(){return function(t){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this),r.call(this,i.getOptionsForSuper())}return n=[{key:"getOptionsForSuper",value:function(){return{advertClass:m.a,breakoutFactory:y,containerFactory:M,trackerClass:B.a}}}],e=[{key:"registerAd",value:function(t){t.AdManager=i.references,Q(q(i.prototype),"registerAd",this).call(this,t)}},{key:"initAd",value:function(t){Q(q(i.prototype),"initAd",this).call(this,t)}}],V((t=i).prototype,e),V(t,n),i}();I.references={NAME:"richAdManager",CONFIG_QUEUE:"richAdConfigQueue",LOADED_VERSIONS:"richAdManagerVersions"};u=o.a.RichAdManager=I,n=o.a.richAdManager;void 0===n&&(I=o.a[u.references.CONFIG_QUEUE],n=o.a[u.references.NAME]=new u,void 0!==I&&n.registerAds(I)),e.default=n}]);
